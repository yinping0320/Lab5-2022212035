/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NotifyService } from '@farris/ui-notify';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { Component, Input, EventEmitter, Output, ViewChild, forwardRef, ElementRef, HostListener, HostBinding, Injector, ViewContainerRef, ComponentFactoryResolver, Renderer2, ApplicationRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { FarrisDatePickerDirective } from './farris-datepicker.input';
import { DefaultView, ShowType, CalToggle } from './enums/public-api';
import { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';
import { LocaleService } from '@farris/ui-locale';
import { differenceInSeconds, isDate, isValid, parse } from 'date-fns';
import { CalendarComponent } from './components/calendar/calendar.component';
import { CLICK, EMPTY_STR } from './constants/constants';
import { CommonUtils, OverLayHiddenService } from '@farris/ui-common';
import { ViewType } from './interfaces/my-options.interface';
/** @type {?} */
const FARRIS_DP_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => FarrisDatepickerComponent)),
    multi: true
};
export class FarrisDatepickerComponent {
    /**
     * @param {?} el
     * @param {?} utilService
     * @param {?} defaultConfigService
     * @param {?} injector
     */
    constructor(el, utilService, defaultConfigService, injector) {
        this.el = el;
        this.utilService = utilService;
        this.defaultConfigService = defaultConfigService;
        this.injector = injector;
        this.cls = 'f-cmp-datepicker f-cmp-inputgroup';
        this.viewType = ViewType.Switch;
        // 是否禁用该组件
        this.disabled = false;
        // 是否只读
        this.readonly = false;
        // 是否只能选择数据，不可键入
        this.editable = true;
        // 是否使用日期范围输入模式
        this.dateRange = false;
        // 是否使用时间输入框
        this.showTime = false;
        this.hourStep = 1;
        this.minuteStep = 1;
        this.secondStep = 1;
        // 显示类型
        this.showType = ShowType.all;
        // 本地语言
        this.locale = 'zh-cn';
        // 是否使用默认值
        this.useDefault = false;
        this.returnType = 'String';
        // placeholder
        this.placeholder = '';
        this.beginPlaceholder = '';
        this.endPlaceholder = '';
        /**
         * 输入值变化后关闭选择面板。 默认为 true
         */
        this.whenValueChangedThenCloseSelectorPanel = true;
        // 需要高亮显示的日期
        this.highlightDates = [];
        // 禁用区域的日期开始时间
        this.disableDateRangesBegin = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用区域的日期结束时间
        this.disableDateRangesEnd = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用的日期
        this.disableDates = [];
        // 一周中被禁用的日子
        this.disableWeekdays = [];
        // 被标记的日期
        this.markDates = [];
        // 被标记的日期的显示颜色
        this.markDatesColor = '#59a1ff';
        // 是否显示第几周
        this.showWeekNumbers = false;
        // 是否标记周末
        this.isMarkWeekends = false;
        // 被标记周末的显示颜色
        this.markWeekendsColor = '#59a1ff';
        // 日期范围模式下input的显示分割符合
        this.dateRangeDatesDelimiter = '~';
        // 配置左侧 sidebar 快捷键
        this.shortcuts = [];
        // 日期范围选择时，默认结束月份为当前月份 + monthRangeValue
        this.monthRangeValue = 1;
        /**
         * 启用动态日期值设置，默认 false
         */
        this.enableDynamic = false;
        /**
         * 允许设置过去最大天数
         */
        this.previousMaxDays = 30;
        /**
         * 允许设置未来最大天数
         */
        this.futureMaxDays = 30;
        this.showClear = true;
        /**
         * 显示今天，本年，本月 按钮
         */
        this.showPresent = false;
        /**
         * 每周起始日  可选值 mo：周一  su: 周日，默认为 mo周一
         */
        this.firstDayOfWeek = 'mo';
        // clear 事件
        this.clear = new EventEmitter();
        // valueChanged 事件
        this.valueChange = new EventEmitter();
        // focus 事件
        this.focus = new EventEmitter();
        // blur 事件
        this.blur = new EventEmitter();
        // beginValueChange
        this.beginValueChange = new EventEmitter();
        // endValueChange
        this.endValueChange = new EventEmitter();
        // PrevFocus dateRange 第一个日期
        this.PrevFocus = new EventEmitter();
        // NextFocus dateRange 第二个日期
        this.NextFocus = new EventEmitter();
        // close 事件
        this.close = new EventEmitter();
        /**
         * 启用多选，默认 false
         */
        this.multiSelect = false;
        this.separator = ',';
        /**
         * 允许选择日期的个数； 0 无限
         */
        this.maxSelected = 0;
        /**
         * 选中日期的排序方式，默认为 'none' 即不排序
         */
        this.selectedOrderBy = 'none';
        this.cRef = null;
        this._timeFormat = '';
        this._value = '';
        this._beginValue = '';
        this._endValue = '';
        this._initFinished = false;
        this._minDate = {
            year: 1840,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this._maxDate = {
            year: 10000,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this.selectedWeek = null;
        this.dateOpts = {};
        // 开始输入控件聚焦
        this.beginFocus = false;
        // 结束输入控件聚焦
        this.endFocus = false;
        // 整体聚焦
        this.totalFocus = false;
        // 是否字符超长显示Tip
        this.isActiveTip = false;
        this._realValue = null;
        this._realRangeValue = null;
        this.formatedValue = '';
        this.dtService = null;
        this._updateOn = 'change';
        // 日期选择后设置为 true， blur 事件将不会重复执行valueChanged；
        // 键盘修改时，blur 事件中会执行一次 valueChanged 后，将此值设为 false;
        this._valueChangeEmitted = false;
        this._mousedownEvent = null;
        this.closeCalendarHandler = null;
        this.cdr = null;
        /**
         * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
         */
        this._SELECT_DATE_ = null;
        this.dynamicText = '';
        this.dynamicValue = null;
        this.dynamicValueChange = new EventEmitter();
        this.dynamicViewChanged = new EventEmitter();
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
        this.onModelTouched = (/**
         * @return {?}
         */
        () => { });
        this.defaultConfig = this.defaultConfigService.getDefaultConfig();
        if (this.injector) {
            this.localeService = this.injector.get(LocaleService);
            this.dtService = this.injector.get(DateTimeHelperService);
            this.notifySer = this.injector.get(NotifyService, null);
            if (this.notifySer) {
                this.notifySer.config.position = 'top-center';
            }
        }
        this.localeConfig = new DatepickerLocaleService();
        this.vcRef = this.injector.get(ViewContainerRef, null);
        this.cfr = this.injector.get(ComponentFactoryResolver, null);
        this.renderer = this.injector.get(Renderer2, null);
        this._applicationRef = this.injector.get(ApplicationRef);
        this.cdr = this.injector.get(ChangeDetectorRef);
        this.overLayService = new OverLayHiddenService();
        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());
    }
    // 日期格式
    /**
     * @param {?} value
     * @return {?}
     */
    set dateFormat(value) {
        if (value) {
            // value 格式形如 yyyy-MM-dd HH:mm:ss
            // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');
            value = value.replace(/^\s+|\s+$/g, ''); // 去掉左右空格
            value = value.replace(/\s+/g, ' '); // 将中间的多个连续空格，替换为1个空格
            // 将中间的多个连续空格，替换为1个空格
            /** @type {?} */
            const formArr = value.split(' ');
            this._dateFormat = formArr[0];
            // 处理'yyyy-MM-dd h:mm:ss a'即12小时显示的情况
            if (formArr.length === 3) {
                this._timeFormat = 'h:mm:ss a';
            }
            else {
                this._timeFormat = formArr[1];
            }
        }
        // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';
        if (this._dateFormat) {
            /** @type {?} */
            const mm = ['yyyy-mm', 'yyyy/mm', 'yyyy年mm', 'mm/yyyy'];
            /** @type {?} */
            const _mm = mm.find((/**
             * @param {?} m
             * @return {?}
             */
            m => this._dateFormat.includes(m)));
            if (_mm) {
                this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));
            }
            if (this._timeFormat && this.showTime) {
                this._dateFormat += ' ' + this._timeFormat;
                if (this._timeFormat.indexOf('时') > -1) {
                    this._timeFormat = this._timeFormat.replace('时', ':').replace('分', ':').replace('秒', '');
                }
            }
        }
        // this.dateOpts.dateFormat = this._dateFormat;
    }
    /**
     * @return {?}
     */
    get dateFormat() {
        return this._dateFormat;
    }
    // 最小日期
    // 加入接收时分秒功能
    /**
     * @param {?} val
     * @return {?}
     */
    set minDate(val) {
        /** @type {?} */
        const type = Object.prototype.toString.call(val);
        /** @type {?} */
        let date;
        switch (type) {
            case '[object Date]':
                date = val;
                break;
            case '[object String]':
                if (val) {
                    date = new Date(val);
                }
                else {
                    date = new Date(1840, 1, 1, 0, 0, 0);
                }
                break;
            case '[object Null]':
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
            // case null:
            //     date = new Date(1840, 1, 1, 0, 0, 0);
            //     break;
            case '[object Undefined]':
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
            default:
                date = new Date(1840, 1, 1, 0, 0, 0);
                break;
        }
        if (isValid(date)) {
            /** @type {?} */
            const year = date.getFullYear();
            /** @type {?} */
            const month = date.getMonth() + 1;
            /** @type {?} */
            const day = date.getDate();
            /** @type {?} */
            const hour = date.getHours();
            /** @type {?} */
            const minute = date.getMinutes();
            /** @type {?} */
            const second = date.getSeconds();
            this._minDate = { year, month, day, hour, minute, second };
        }
    }
    /**
     * @return {?}
     */
    get minDate() {
        return this._minDate;
    }
    // 最大日期
    // 加入接收时分秒功能
    /**
     * @param {?} val
     * @return {?}
     */
    set maxDate(val) {
        /** @type {?} */
        const type = Object.prototype.toString.call(val);
        /** @type {?} */
        let date;
        switch (type) {
            case '[object Date]':
                date = val;
                break;
            case '[object String]':
                if (val) {
                    date = new Date(val);
                }
                else {
                    date = new Date(10000, 1, 1, 0, 0, 0);
                }
                break;
            case '[object Null]':
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
            // case null:
            //     date = new Date(10000, 1, 1, 0, 0, 0);
            //     break;
            case '[object Undefined]':
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
            default:
                date = new Date(10000, 1, 1, 0, 0, 0);
                break;
        }
        if (isValid(date)) {
            /** @type {?} */
            const year = date.getFullYear();
            /** @type {?} */
            const month = date.getMonth() + 1;
            /** @type {?} */
            const day = date.getDate();
            /** @type {?} */
            const hour = date.getHours();
            /** @type {?} */
            const minute = date.getMinutes();
            /** @type {?} */
            const second = date.getSeconds();
            this._maxDate = { year, month, day, hour, minute, second };
        }
    }
    /**
     * @return {?}
     */
    get maxDate() {
        return this._maxDate;
    }
    // 日期范围：开始日期
    /**
     * @param {?} value
     * @return {?}
     */
    set beginValue(value) {
        value = value ? value : '';
        if (value instanceof Date) {
            value = this.dateTo(value);
            this.returnType = 'Date';
        }
        else {
            if (value.indexOf('T') > -1) {
                value = value.replace('T', ' ');
            }
            this.returnType = 'String';
        }
        this._beginValue = value;
        if (this._initFinished) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
    }
    /**
     * @return {?}
     */
    get beginValue() {
        return this.dateFrom(this._beginValue, true);
    }
    // 日期范围：结束日期
    /**
     * @param {?} value
     * @return {?}
     */
    set endValue(value) {
        value = value ? value : '';
        if (value instanceof Date) {
            value = this.dateTo(value);
            this.returnType = 'Date';
        }
        else {
            if (value.indexOf('T') > -1) {
                value = value.replace('T', ' ');
            }
            this.returnType = 'String';
        }
        this._endValue = value;
        if (this._initFinished) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
    }
    /**
     * @return {?}
     */
    get endValue() {
        return this.dateFrom(this._endValue, true);
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        this._value = v ? v : '';
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this._ngControl = this.injector.get(NgControl, null);
        this.initPlaceholder();
        this.mergeDateOptions();
        if (this._beginValue && this._endValue) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
        this._initFinished = true;
        this.datePicekrService = new DatePickerService(this.dateOpts);
    }
    /**
     * @private
     * @return {?}
     */
    initPlaceholder() {
        if (this.localeService) {
            this.locale = this.localeService.getValue('locale');
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
            this.placeholder = this.placeholder
                ? this.placeholder
                : this.localDateOpts.placeholder
                    ? this.localDateOpts.placeholder
                    : '请选择日期';
            if (!this.beginPlaceholder) {
                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;
            }
            if (!this.endPlaceholder) {
                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    mergeDateOptions() {
        this.dateOpts = Object.assign({}, this.defaultConfig, this.buildOptions());
        if (this.dateOpts.dateFormat) {
            if (!this._dateFormat) {
                this.dateFormat = this.dateOpts.dateFormat;
                this.dateOpts.dateFormat = this.dateFormat;
            }
        }
        if (this.showTime && !this._timeFormat) {
            this._timeFormat = 'HH:mm:ss';
            this.dateOpts.timeFormat = this._timeFormat;
        }
        if (this.dateOpts.returnFormat) {
            if (!this.returnFormat) {
                this.returnFormat = this.dateOpts.returnFormat;
            }
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.locale && changes.locale.isFirstChange()) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (changes) {
            /** @type {?} */
            let flag = false;
            /** @type {?} */
            const inputs = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue', 'maxSelected', 'separator', 'selectedOrderBy'];
            Object.keys(changes).forEach((/**
             * @param {?} e
             * @return {?}
             */
            e => {
                if (!changes[e].isFirstChange() && (this.dateOpts[e] || inputs.includes(e))) {
                    flag = true;
                }
            }));
            if (flag) {
                this.dateOpts = Object.assign({}, (this.dateOpts || this.defaultConfig), this.buildOptions());
            }
        }
        if (changes.readonly &&
            !changes.readonly.currentValue &&
            !changes.readonly.firstChange &&
            !this.value &&
            this.useDefault) {
            this.setDefaultValue();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this._ngControl && this._ngControl.control) {
            this._updateOn = this._ngControl.control.updateOn;
        }
        this._timer = setTimeout((/**
         * @return {?}
         */
        () => {
            this.setDefaultValue();
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        clearTimeout(this._timer);
        this.closeSelector();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        if (this.value && !this.readonly && !this.disabled) {
            if (this.value && this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = '';
            }
            if (this.dateOpts.dateRange) {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;
                }
            }
            else {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;
                }
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        if (!this.readonly && !this.disabled && this.clearIcon) {
            this.clearIcon.nativeElement.style.visibility = 'hidden';
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onBlur(e) {
        this.totalFocus = false;
        /** @type {?} */
        let _runblur = true;
        if (this.value) {
            try {
                this.value = this.transform(this.value);
                /** @type {?} */
                const valid = this._isValid(this.value);
                if (!valid) {
                    this.clearDate();
                    _runblur = false;
                }
            }
            catch (e) {
                this.clearDate();
                _runblur = false;
            }
        }
        /** @type {?} */
        const updateModel = (/**
         * @return {?}
         */
        () => {
            if (!this._valueChangeEmitted) {
                /** @type {?} */
                const realDate = this.dateFrom(this.transform(this.value, this.returnFormat));
                this.onNgModelChange(this.value, realDate, true);
                this.onModelTouched();
            }
        });
        if (this.editable && _runblur) {
            if (this['inDatagrid']) {
                updateModel();
            }
            else {
                setTimeout(updateModel, 250);
            }
        }
        this._valueChangeEmitted = false;
        if (this._mousedownEvent) {
            this._mousedownEvent();
            this._mousedownEvent = null;
        }
        this.blur.emit();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onFocus(e) {
        this.totalFocus = true;
        this.registerMouseDownHandle();
        this.focus.emit();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onInputClick(event) {
        event.stopPropagation();
        if (!this.readonly && !this.disabled) {
            this.registerMouseDownHandle();
            this.toggleCalendar(false);
        }
    }
    /**
     * @private
     * @return {?}
     */
    registerMouseDownHandle() {
        if (!this._mousedownEvent) {
            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {
                    return;
                }
                if (e.target.closest('.dynamic-view-item')) {
                    return;
                }
                if (e.target.closest('.f-cmp-datepicker') ||
                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {
                    if (this.dateInput) {
                        this.renderer.setStyle(this.dateInput.nativeElement, 'unselectable', 'on');
                    }
                    e.preventDefault();
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    setDefaultValue() {
        if (!this.readonly && !this.value && this.useDefault) {
            /** @type {?} */
            const now = new Date();
            /** @type {?} */
            let nowValue = '';
            if (!this.dateOpts.dateRange) {
                nowValue = this.dateTo(now);
            }
            else {
                nowValue =
                    this.dateTo(now) +
                        this.dateRangeDatesDelimiter +
                        this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));
            }
            if (this.datePicekrService.validate(nowValue)) {
                this.value = nowValue;
                this.onNgModelChange(this.value);
                this.onModelTouched();
            }
        }
    }
    /**
     * @param {?=} $event
     * @return {?}
     */
    clearDynamicDate($event = null) {
        if ($event) {
            $event.stopPropagation();
        }
        this.dateOpts.dynamicValueChanged(null);
    }
    /**
     * @param {?=} $event
     * @return {?}
     */
    clearDate($event = null) {
        if ($event) {
            $event.stopPropagation();
        }
        this._SELECT_DATE_ = null;
        if (!this.disabled) {
            this._realRangeValue = null;
            this._realValue = null;
            this.selectedWeek = null;
            this.onDateChanged({
                isRange: this.dateOpts.dateRange,
                singleDate: {
                    date: this.utilService.resetDate(),
                    jsDate: null,
                    formatted: EMPTY_STR,
                    epoc: 0
                },
                dateRange: {
                    beginDate: this.utilService.resetDate(),
                    beginJsDate: null,
                    beginEpoc: 0,
                    endDate: this.utilService.resetDate(),
                    endJsDate: null,
                    endEpoc: 0,
                    formatted: EMPTY_STR
                }
            });
            this.closeSelector(CalToggle.CloseByCalBtn);
            this.onModelChange(null);
            this.clear.emit();
            if (this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = 'hidden';
            }
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSingleInputNgModelChange($event) {
        this.value = $event || '';
        this._realValue = this.value ? this.dateFrom($event) : '';
        this.closeSelector();
    }
    /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    onNgModelChange(value, realdate = null, emitValueChange = false) {
        // this.value = value;
        if (this.dateRange || this.showType == ShowType.selectWeek) {
            /** @type {?} */
            const tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];
            /** @type {?} */
            const _beginValue = this.transform(tmpArr[0], this.returnFormat);
            /** @type {?} */
            const _endValue = this.transform(tmpArr[1], this.returnFormat);
            this._beginValue = this.transform(tmpArr[0]);
            this._endValue = this.transform(tmpArr[1]);
            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';
            this._realRangeValue = value;
            this.onModelChange(value);
            this.cdr.detectChanges();
            this.beginValueChange.emit(this._beginValue);
            this.endValueChange.emit(this._endValue);
            /** @type {?} */
            const p = {
                date: null,
                formatted: this.value,
                returnFormatted: this._realRangeValue,
                cmpRef: this
            };
            this.valueChange.emit(p);
        }
        else {
            if (value === '') {
                this.value = '';
                this._onModelChange(null, emitValueChange);
                return;
            }
            if (realdate) {
                this._realValue = this.getRealReturnFormatted(realdate);
                this._onModelChange(this._realValue, emitValueChange);
                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {
                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                }
            }
            else {
                if (this._isValid(value)) {
                    this._realValue = this.getRealReturnFormatted(realdate);
                    if (this.dateInput) {
                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                    }
                    this._onModelChange(this._realValue, emitValueChange);
                }
            }
        }
    }
    /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    _onModelChange(realValue, emit) {
        this._realValue = realValue;
        this.onModelChange(realValue);
        if (emit) {
            /** @type {?} */
            const p = {
                date: this.utilService.isDateValid(this.value, this.dateOpts, true),
                formatted: this.value,
                returnFormatted: realValue,
                cmpRef: this
            };
            if (this.valueChange.observers.length) {
                if (this.whenValueChangedThenCloseSelectorPanel) {
                    this.closeSelector();
                }
                this.valueChange.emit(p);
            }
        }
    }
    /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    getRealReturnFormatted(realdate) {
        if (realdate) {
            if (this.returnType === 'Date') {
                return realdate;
            }
            else {
                if (this.returnFormat) {
                    return this.dtService.formatTo(realdate, this.returnFormat);
                }
                return realdate;
            }
        }
        else {
            return this.dateFrom(this._realValue || this.value) || '';
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateRangeInputBlur(event) {
        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        this.onNgModelChange(this._realRangeValue || this.value);
    }
    /**
     * @return {?}
     */
    openCalendar() {
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        let val = this._realValue;
        if (!this.multiSelect) {
            if (this.dateRange || this.showType == ShowType.selectWeek) {
                val = this._realRangeValue;
            }
            else {
                if (this.returnType === 'Date') {
                    val = this.transform(val, this.returnFormat);
                }
            }
        }
        if (this.cRef === null) {
            this.cRef = this.calendarRef.createComponent(this.cfr.resolveComponentFactory(CalendarComponent));
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
            this.datePicekrService.registerScrollEvent((/**
             * @return {?}
             */
            () => {
                this.closeSelector();
            }));
            this.cRef.instance.dateHlp = this.dtService;
            if (this.showType === 4 && this.selectedWeek) {
                this.cRef.instance.selectedWeek = this.selectedWeek;
            }
            if (this.multiSelect) {
                this.cRef.instance.multiDatesChanged = (/**
                 * @param {?} dates
                 * @return {?}
                 */
                (dates) => {
                    this.value = dates.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n.value)).join(this.separator);
                    this._realValue = dates.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => this.dtService.formatTo(`${n.year}-${n.month}-${n.day}`, this.returnFormat))).join(this.separator);
                    this.multiSelectedChanged();
                });
                this.cRef.instance.showNotify = (/**
                 * @return {?}
                 */
                () => {
                    /** @type {?} */
                    const msg = this.localDateOpts.message['102'].replace('${0}', this.maxSelected);
                    if (this.notifySer) {
                        this.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                });
            }
            this.cRef.instance.initialize(this.dateOpts, '', this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef), val, (/**
             * @param {?} dm
             * @param {?} close
             * @return {?}
             */
            (dm, close) => {
                if (this.dateOpts.dateRange && this.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {
                    // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};
                    // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};
                    // error message:  The end time must not be earlier than the start time
                    // error message:  結束時間不得早于開始時間
                    /** @type {?} */
                    const msg = this.localDateOpts.message['101'];
                    if (this.notifySer) {
                        this.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                    return;
                }
                this.selectedWeek = this.cRef.instance.selectedWeek;
                this.onDateChanged(dm);
                if (close) {
                    this.closeSelector(CalToggle.CloseByDateSel);
                }
            }), (/**
             * @param {?} cvc
             * @return {?}
             */
            (cvc) => {
                // this.emitCalendarChanged(cvc);
            }), (/**
             * @param {?} rds
             * @return {?}
             */
            (rds) => {
                // this.emitRangeDateSelection(rds);
            }), (/**
             * @return {?}
             */
            () => {
                this.closeSelector(CalToggle.CloseByEsc);
            }));
            this.cRef.instance.dynamicViewShow.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                /** @type {?} */
                const t = Object.assign(e, { dynamicValue: this.dynamicValue, singleValue: this._realValue, instance: this });
                this.dynamicViewChanged.emit(t);
            }));
            // this.cdr.detectChanges();
        }
        else {
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
        }
        this.overLayService.registerMouseEvent(this.el.nativeElement, (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            /** @type {?} */
            const t = e.target;
            /** @type {?} */
            const notClose = (this.cRef && this.cRef.location.nativeElement.contains(t)) ||
                t.closest('.multi-date-select') || (t.className && t.className.indexOf('multi-date-select') > -1);
            if (notClose) {
                return false;
            }
            this.closeSelector();
        }), { onlyTopWindow: true });
        this.cRef.changeDetectorRef.detectChanges();
        // this.preventClose = false;
    }
    /**
     * @param {?=} reason
     * @return {?}
     */
    closeSelector(reason) {
        if (this.cRef !== null) {
            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));
            this.cRef = null;
            // this.cdr.detectChanges();
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            if (container.childElementCount) {
                container.remove();
            }
            this.renderer.setStyle(container, 'pointer-events', '');
        }
        this.totalFocus = false;
        if (this.dateOpts.dateRange) {
            this.beginFocus = false;
            this.endFocus = false;
        }
        if (this.closeCalendarHandler) {
            this.closeCalendarHandler();
            this.closeCalendarHandler = null;
        }
        if (this.datePicekrService) {
            this.datePicekrService.removeMouseEvent();
        }
        this.overLayService.destory(this.el.nativeElement);
    }
    /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    toggleCalendar(close, emit = true) {
        if (this.disabled) {
            this.totalFocus = false;
            if (this.dateOpts.dateRange) {
                this.beginFocus = false;
                this.endFocus = false;
            }
            return;
        }
        if (this.cRef === null) {
            if (!this.closeCalendarHandler) {
                this.closeCalendarHandler = this.renderer.listen(document, CLICK, (/**
                 * @return {?}
                 */
                () => this.closeSelector(CalToggle.CloseByOutClick)));
            }
            this.totalFocus = true;
            this.openCalendar();
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            this.renderer.setStyle(container, 'pointer-events', 'auto');
            /** @type {?} */
            const zindex = this.commonUtils.getFloatingLayerIndex();
            this.renderer.setStyle(container, 'zIndex', zindex);
        }
        else {
            /** @type {?} */
            let flag = true;
            /** @type {?} */
            const container = document.querySelector('.date-overlay-container');
            if (container && this.cRef.location) {
                if (container.hasChildNodes()) {
                    container.childNodes.forEach((/**
                     * @param {?} el
                     * @return {?}
                     */
                    el => {
                        if (el === this.cRef.location.nativeElement) {
                            flag = false;
                        }
                    }));
                }
            }
            if (flag) {
                this.renderer.setStyle(container, 'pointer-events', 'auto');
                this.totalFocus = true;
                this.openCalendar();
            }
            else {
                this.totalFocus = false;
                if (this.dateOpts.dateRange) {
                    this.beginFocus = false;
                    this.endFocus = false;
                }
                // document.removeEventListener(CLICK, this.onClickHidden);
                close && this.closeSelector(CalToggle.CloseByCalBtn);
                // this.renderer.setStyle(container, 'pointer-events', '')
                if (emit) {
                    this.close.emit();
                }
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onDateChanged(event) {
        this._SELECT_DATE_ = event;
        /** @type {?} */
        let valChangeParams = '';
        if (event.singleDate) {
            this.value = event.singleDate.formatted;
            this.formatedValue = event.singleDate.formatted;
            /** @type {?} */
            const returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);
            valChangeParams = Object.assign({}, event.singleDate, { formatted: event.singleDate.formatted, returnFormatted });
            const { year, month, day, hour, minute, second } = event.singleDate.date;
            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {
                /** @type {?} */
                const nd = new Date(year || new Date().getFullYear(), month - 1, day || 1, hour || 0, minute || 0, second || 0);
                event.singleDate.jsDate = nd;
            }
            let { year: minYear, month: minMonth, day: minDay, hour: minHour, minute: minMinute, second: minSecond } = this.minDate;
            minMonth = this.utilService.padStartZero(minMonth);
            minDay = this.utilService.padStartZero(minDay);
            minHour = this.utilService.padStartZero(minHour);
            minMinute = this.utilService.padStartZero(minMinute);
            minSecond = this.utilService.padStartZero(minSecond);
            /** @type {?} */
            const MIN_DATE = new Date(`${minYear}-${minMonth}-${minDay} ${minHour}:${minMinute}:${minSecond}`);
            if (this.minDate.year !== 1840) {
                if (differenceInSeconds(MIN_DATE, event.singleDate.jsDate) > 0) {
                    event.singleDate.jsDate = MIN_DATE;
                    this.value = this.transform(MIN_DATE);
                }
            }
            else if (this.maxDate.year !== 10000) {
                let { year: maxYear, month: maxMonth, day: maxDay, hour: maxHour, maxute: maxMinute, second: maxSecond } = this.maxDate;
                maxMonth = this.utilService.padStartZero(maxMonth);
                maxDay = this.utilService.padStartZero(maxDay);
                maxHour = this.utilService.padStartZero(maxHour);
                maxMinute = this.utilService.padStartZero(maxMinute);
                maxSecond = this.utilService.padStartZero(maxSecond);
                /** @type {?} */
                const MAX_DATE = new Date(`${maxYear}-${maxMonth}-${maxDay} ${maxHour}:${maxMinute}:${maxSecond}`);
                if (event.singleDate.date.year === 1840 || differenceInSeconds(MIN_DATE, event.singleDate.jsDate) === 0 || differenceInSeconds(MAX_DATE, event.singleDate.jsDate) < 0) {
                    event.singleDate.jsDate = MAX_DATE;
                    this.value = this.transform(MAX_DATE);
                }
            }
            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);
        }
        else if (event.dateRange) {
            this.value = event.dateRange.formatted;
            this.formatedValue = event.dateRange.formatted;
            /** @type {?} */
            const returnFormatted = event.dateRange.returnFormatted;
            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);
            valChangeParams = Object.assign({}, event.dateRange, { formatted: event.dateRange.formatted, returnFormatted });
            this.onNgModelChange(returnFormatted, event.dateRange);
        }
        this.onModelTouched();
        this._valueChangeEmitted = true;
        this.valueChange.emit(valChangeParams);
    }
    /**
     * @private
     * @return {?}
     */
    checkMultiSelectedOption() {
        if (this.multiSelect) {
            this.showTime = false;
            this.showType = ShowType.all;
            this.dateRange = false;
            this.enableDynamic = false;
            // 返回格式必须包括年月日
            /** @type {?} */
            const fmtList = ['yyyy-MM-dd', 'yyyy/MM/dd', 'MM/dd/yyyy', 'yyyy年MM月dd日', 'yyyyMMdd'];
            if (!fmtList.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n === this.returnFormat))) {
                this.returnFormat = 'yyyy-MM-dd';
            }
            if (!fmtList.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n === this.dateFormat))) {
                this.dateFormat = 'yyyy-MM-dd';
            }
        }
    }
    /**
     * @return {?}
     */
    buildOptions() {
        /** @type {?} */
        let dateOpts;
        if (!this.localDateOpts) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (this.showType === ShowType.noDateAndMonth) {
            this.localDateOpts.dateFormat = 'yyyy';
            this.localDateOpts.returnFormat = 'yyyy';
        }
        // 检查是否具备启用日期多选的条件
        this.checkMultiSelectedOption();
        /** @type {?} */
        const _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;
        dateOpts = {
            dateRange: this.dateRange,
            showTime: _showTime,
            showType: Number(this.showType),
            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,
            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,
            minYear: this._minDate.year,
            maxYear: this._maxDate.year,
            highlightDates: this.highlightDates,
            disableDates: this.disableDates,
            showWeekNumbers: this.showWeekNumbers,
            disableDateRanges: [
                {
                    begin: this.disableDateRangesBegin,
                    end: this.disableDateRangesEnd
                }
            ],
            disableUntil: this._minDate,
            disableSince: this._maxDate,
            disableWeekdays: this.disableWeekdays,
            markDates: [
                {
                    dates: this.markDates,
                    color: this.markDatesColor
                }
            ],
            markWeekends: {
                marked: this.isMarkWeekends,
                color: this.markWeekendsColor
            },
            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,
            shortcuts: this.shortcuts,
            timeFormat: this._timeFormat,
            monthRangeValue: this.monthRangeValue,
            viewType: this.viewType,
            enableDynamic: this.enableDynamic,
            dynamicValue: this.dynamicValue,
            dynamicValueChanged: (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                this.dynamicValue = e;
                this.dynamicText = e ? e.text : '';
                this.dateOpts.dynamicValue = e;
                this.dynamicValueChange.emit(e);
                this.closeSelector();
            }),
            previousMaxDays: this.previousMaxDays,
            futureMaxDays: this.futureMaxDays,
            dynamicLocale: this.localDateOpts.dynamicLocale,
            mulstiDatesLocale: this.localDateOpts.mulstiDatesLocale,
            showPresent: this.showPresent,
            hourStep: this.hourStep,
            minuteStep: this.minuteStep,
            secondStep: this.secondStep,
            closeSelectorOnDateSelect: !this.multiSelect,
            multiSelect: this.multiSelect,
            separator: this.separator,
            maxSelected: this.maxSelected,
            selectedOrderBy: this.selectedOrderBy
        };
        dateOpts.firstDayOfWeek = this.firstDayOfWeek;
        switch (Number(this.showType)) {
            case ShowType.noDate:
                dateOpts.defaultView = DefaultView.Month;
                break;
            case ShowType.noDateAndMonth:
                dateOpts.defaultView = DefaultView.Year;
                // dateOpts.dateFormat = 'yyyy';
                // dateOpts.returnFormat = 'yyyy';
                // this.dateFormat = 'yyyy';
                break;
            case ShowType.selectWeek:
                dateOpts.showWeekNumbers = true;
                dateOpts.dateRange = true;
                // dateOpts.firstDayOfWeek = 'mo';
                break;
            // default:
            // this.returnType = 'String';
        }
        return Object.assign({}, this.localDateOpts, dateOpts);
    }
    /**
     * @param {?} d
     * @return {?}
     */
    dateTo(d) {
        /** @type {?} */
        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        const monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;
        /** @type {?} */
        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        const year = d.getFullYear();
        /** @type {?} */
        const month = d.getMonth() + 1;
        /** @type {?} */
        const day = d.getDate();
        /** @type {?} */
        const hour = d.getHours();
        /** @type {?} */
        const minute = d.getMinutes();
        /** @type {?} */
        const second = d.getSeconds();
        /** @type {?} */
        let date;
        if (!showTime) {
            date = { year, month, day };
            this.originTime = { hour, minute, second };
        }
        else {
            date = { year, month, day, hour, minute, second };
        }
        return this.utilService.formatDate(date, dateFormat, monthLabels);
    }
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    dateFrom(str, ignorRange = false) {
        if (!str) {
            return '';
        }
        /** @type {?} */
        const _this = this;
        /** @type {?} */
        const dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;
        /** @type {?} */
        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        const returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;
        /** @type {?} */
        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        const delimeters = returnFormat.match(/[^(DdMmYy)]{1,}/g);
        /** @type {?} */
        let dateValue;
        /** @type {?} */
        const getValue = this.utilService.getDateValue;
        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {
            /** @type {?} */
            const tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];
            /** @type {?} */
            const tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];
            /** @type {?} */
            let tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);
            /** @type {?} */
            let tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);
            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;
            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;
            return (this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +
                this.dateRangeDatesDelimiter +
                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels));
        }
        else {
            if (this.returnType === 'Date') {
                if (str && str instanceof Date) {
                    return str;
                }
                return convert(str, getValue, this.originTime);
            }
            else {
                /** @type {?} */
                const tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);
                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);
            }
        }
        /**
         * @param {?} v
         * @param {?} _getValue
         * @param {?=} originTime
         * @return {?}
         */
        function convert(v, _getValue, originTime = { hour: 0, minute: 0, second: 0 }) {
            /** @type {?} */
            let fmt = returnFormat;
            if (_this.returnType === 'Date') {
                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');
            }
            if (showTime) {
                /** @type {?} */
                const date = v.split(' ')[0];
                /** @type {?} */
                let time = v.split(' ')[1];
                dateValue = _getValue(date, fmt, delimeters);
                if (time) {
                    time = time.replace(/[时,分]/g, ':').replace(/[秒]/, '');
                    const [h, m, s] = time.split(':');
                    /** @type {?} */
                    const hour = h;
                    /** @type {?} */
                    const minute = m;
                    /** @type {?} */
                    const second = s ? s : '';
                    dateValue[3] = { value: hour, format: 'hh' };
                    dateValue[4] = { value: minute, format: 'mm' };
                    if (second) {
                        dateValue[5] = { value: second, format: 'ss' };
                    }
                }
            }
            else {
                /** @type {?} */
                const date = v.split(' ')[0];
                dateValue = _getValue(date, fmt, delimeters);
            }
            /** @type {?} */
            let year = Number(dateValue[0] ? dateValue[0].value : 1970);
            /** @type {?} */
            const yearValue = dateValue[0];
            if (yearValue.format) {
                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {
                    year = null;
                }
            }
            /** @type {?} */
            const month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;
            /** @type {?} */
            const day = Number(dateValue[2] ? dateValue[2].value : 1);
            /** @type {?} */
            const _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;
            /** @type {?} */
            const _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;
            /** @type {?} */
            const _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;
            if (!year) {
                return null;
            }
            return new Date(year, month, day, _hour, _minute, _second);
        }
    }
    /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    transform(value, _fmt = this.dateOpts.dateFormat) {
        value = value ? value : '';
        const { returnFormat, dateFormat, showTime } = this.dateOpts;
        /** @type {?} */
        let _tmpDate = null;
        if (typeof value === 'string') {
            _tmpDate = parse(value, returnFormat, new Date());
            if (!isValid(_tmpDate)) {
                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {
                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;
                }
                else {
                    if (this._realValue) {
                        _tmpDate = parse(this._realValue, returnFormat, new Date());
                    }
                }
            }
        }
        else {
            if (value instanceof Date) {
                _tmpDate = value;
            }
        }
        /** @type {?} */
        let formattedVal = value;
        if (isValid(_tmpDate)) {
            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);
            return formattedVal;
        }
        else {
            // 兼容年月日,年月,年格式
            value = value.replace(/[年,月]/g, '-').replace(/[日]/, '');
            if (value[value.length - 1] === '-') {
                value = value.substr(0, value.length - 1);
            }
            if (isValid(new Date(value))) {
                formattedVal = this.dtService.formatTo(value, _fmt);
            }
            else {
                value = '';
            }
        }
        if (value) {
            if (this.dateFrom(value, true) === '') {
                /** @type {?} */
                const tmpDate = this.utilService.isDateValid(value, Object.assign({}, this.dateOpts, {
                    dateFormat: returnFormat
                }));
                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);
            }
        }
        return formattedVal;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setValue(value) {
        if (this.value !== value) {
            if (this.dateOpts.dateRange) {
                /** @type {?} */
                const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
                /** @type {?} */
                const beginStr = _tmpDateArr[0];
                /** @type {?} */
                const endStr = _tmpDateArr[1];
                this._beginValue = this.transform(beginStr);
                this._endValue = this.transform(endStr);
                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
            }
            else {
                if (value) {
                    this.value = this.transform(value);
                }
                else {
                    this.value = '';
                }
            }
            this.cdr.markForCheck();
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    updateValue(value) {
        if (this.dateOpts.dateRange) {
            /** @type {?} */
            const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
            /** @type {?} */
            const beginStr = _tmpDateArr[0];
            /** @type {?} */
            const endStr = _tmpDateArr[1];
            this._beginValue = this.transform(beginStr);
            this._endValue = this.transform(endStr);
            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
        }
        else {
            this.value = this.transform(value);
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    getValueByType(val) {
        if (val instanceof Date) {
            this.returnType = 'Date';
            // return this.dateTo(val);
            return val;
        }
        else if (val && val instanceof Object) {
            const { begin, end } = val;
            /** @type {?} */
            const beginStr = begin instanceof Date ? this.dateTo(begin) : '';
            /** @type {?} */
            const endStr = begin instanceof Date ? this.dateTo(end) : '';
            this.returnType = 'Object';
            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';
        }
        else if (val && typeof val === 'string') {
            if (val.indexOf('T') > -1) {
                val = val.replace('T', ' ');
            }
            this.returnType = 'String';
            return val;
        }
        else {
            return '';
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (!this.multiSelect) {
            if (typeof val === 'object' && val && !isDate(val)) {
                this.dynamicValue = val;
                this.dynamicText = this.utilService.formatDynamicValue(val, this.dateOpts.dynamicLocale);
                this.dateOpts.showDynamicView = true;
                this.dateOpts.dynamicValue = this.dynamicValue;
            }
            else {
                // this.dateOpts.showDynamicView = false;
                this._realValue = val;
                if (this.dateRange) {
                    this._realRangeValue = val;
                }
                this.setValue(this.getValueByType(val));
            }
        }
        else {
            if (!val) {
                val = '';
            }
            this.value = val.split(this.separator).map((/**
             * @param {?} n
             * @return {?}
             */
            n => this.transform(n))).join(this.separator);
            this._realValue = val;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onPrevFocus(value) {
        this.beginFocus = true;
        if (this.endFocus == true) {
            this.endFocus = !this.endFocus;
        }
        this.PrevFocus.emit();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onNextFocus(value) {
        this.endFocus = true;
        if (this.beginFocus == true) {
            this.beginFocus = !this.beginFocus;
        }
        this.NextFocus.emit();
    }
    /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    _convert2dateString(val, realValue = false) {
        if (val) {
            /** @type {?} */
            let t = val.replace(/[年,月]/g, '-').replace(/[日,号]/g, ' ').replace(/[时,点,分,分钟]/g, ':').replace('秒', '');
            if (this.showType === ShowType.noDateAndMonth && t.indexOf('-') === -1) {
                t += '-';
            }
            // 替换连续的空格字符为单个空格
            /** @type {?} */
            var checkSpaceReg = /(\s)\1{1,}/g;
            if (t.match(checkSpaceReg)) {
                t.match(checkSpaceReg).forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    if (n[0] === ' ') {
                        t = t.replace(n, ' ');
                    }
                }));
            }
            if (realValue) {
                /** @type {?} */
                const objDate = this.utilService.isDateValid(val, this.dateOpts, true);
                if (objDate) {
                    let { year, month, day, hour, minute, second } = objDate;
                    if (!year) {
                        year = new Date().getFullYear();
                    }
                    if (!month) {
                        month = new Date().getMonth();
                    }
                    if (!day) {
                        day = 1;
                    }
                    if (!hour) {
                        hour = 0;
                    }
                    if (!minute) {
                        minute = 0;
                    }
                    if (!second) {
                        second = 0;
                    }
                    /** @type {?} */
                    const _datePart = `${year}-${this.utilService.padStartZero(month)}-${this.utilService.padStartZero(day)}`;
                    /** @type {?} */
                    const _timePart = `${this.utilService.padStartZero(hour)}:${this.utilService.padStartZero(minute)}:${this.utilService.padStartZero(second)}`;
                    return `${_datePart} ${_timePart}`;
                }
            }
            if (t[t.length - 1] === '-') {
                // t = t.substr(0, t.length - 1);
                t += '01';
            }
            if (t[t.length - 1] === ':') {
                t = t.substr(0, t.length - 1);
            }
            return t.replace(/^\s+|\s+$/g, '');
        }
        return val;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    _isValid(value) {
        value = this._convert2dateString(value);
        if (value) {
            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {
                /** @type {?} */
                const _tmpDate = parse(this.value, this.dateFormat, new Date());
                if (this._realValue) {
                    if (this.returnType === 'Date') {
                        return isValid(this._realValue);
                    }
                    else {
                        return isValid(new Date(this._convert2dateString(this._realValue, true)));
                        // return isValid(parse(this._realValue, this.returnFormat, new Date()));
                    }
                }
                /** @type {?} */
                const d = this.utilService.isDateValid(value, this.dateOpts);
                if (d) {
                    if (d.year || d.month) {
                        /** @type {?} */
                        const cdate = new Date();
                        /** @type {?} */
                        const year = cdate.getFullYear();
                        /** @type {?} */
                        const str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')
                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');
                        return isValid(new Date(str));
                    }
                    return false;
                }
                return isValid(value);
            }
            else {
                /** @type {?} */
                const reg = /^\d{1,}$/;
                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { // 验证传入的格式为 yyyyMMddHHmmss
                    // 验证传入的格式为 yyyyMMddHHmmss
                    /** @type {?} */
                    const _r = this._isValid2(value);
                    if (_r.isValided) {
                        this._realValue = this.getRealReturnFormatted(_r.date);
                        this.value = this.transform(_r.date);
                    }
                    return _r.isValided;
                }
                else {
                    /** @type {?} */
                    const _tmpDate = parse(value, this.dateFormat, new Date());
                    /** @type {?} */
                    const d = this.utilService.isDateValid(this.value, this.dateOpts);
                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);
                }
            }
        }
        return false;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    _isValid2(value) {
        /** @type {?} */
        let year = 0;
        /** @type {?} */
        let month = 0;
        /** @type {?} */
        let day = 0;
        /** @type {?} */
        let hour = 0;
        /** @type {?} */
        let minute = 0;
        /** @type {?} */
        let seconds = 0;
        /** @type {?} */
        const df = this.dateFormat;
        if (df.includes('yyyy')) {
            if (value) {
                year = +value.slice(0, 4);
                value = value.slice(4);
            }
            else {
                return false;
            }
        }
        if (df.includes('MM')) {
            if (value) {
                month = +value.slice(0, 2) - 1;
                value = value.slice(2);
                if (month < 0) {
                    month = 0;
                }
            }
            else {
                return false;
            }
        }
        if (df.includes('dd')) {
            if (value) {
                day = +value.slice(0, 2);
                value = value.slice(2);
            }
            else {
                return false;
            }
        }
        if (df.includes('HH')) {
            if (value) {
                hour = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('mm')) {
            if (value) {
                minute = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('ss')) {
            if (value) {
                seconds = +value.slice(0, 2);
            }
        }
        /** @type {?} */
        const d = new Date(year, month, day, hour, minute, seconds);
        return {
            isValided: isValid(d),
            date: d
        };
    }
    /**
     * @private
     * @return {?}
     */
    multiSelectedChanged() {
        this.onModelChange(this._realValue);
        /** @type {?} */
        const p = {
            formatted: this.value,
            returnFormatted: this._realValue,
            cmpRef: this
        };
        this.onModelTouched();
        this.closeSelector(CalToggle.CloseByDateSel);
        this.valueChange.emit(p);
        if (!this.value) {
            this.clear.emit();
        }
    }
    /**
     * @param {?} d
     * @return {?}
     */
    onRemoveDate(d) {
        if (!d) {
            return;
        }
        const { value, index } = d;
        this.value = this.value.split(this.separator).filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n !== value)).join(this.separator);
        this._realValue = this._realValue.split(this.separator).filter((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        (n, i) => i !== index)).join(this.separator);
        this.multiSelectedChanged();
        this.cdr.detectChanges();
    }
}
FarrisDatepickerComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datepicker',
                exportAs: 'farris-datepicker',
                template: "<div class=\"input-group\" [ngClass]=\"{\r\n        'f-state-disabled': disabled,\r\n        'f-state-readonly': readonly && !disabled,\r\n        'f-state-editable': editable && !disabled && !readonly,\r\n        'f-state-focus':totalFocus\r\n    }\" *ngIf=\"!(dateOpts?.showDynamicView && enableDynamic) && !multiSelect\" >\r\n    <ng-container *ngIf=\"!dateOpts.dateRange; else range\">\r\n        <input type=\"text\" class=\"form-control f-utils-fill\" [attr.placeholder]=\"readonly||disabled?'':placeholder\" name=\"farris-date\" [ngModel]=\"value\"\r\n            (ngModelChange)=\"onSingleInputNgModelChange($event)\" #dateInput autocomplete=\"off\" [readonly]=\"readonly || !editable\"\r\n            [disabled]=\"disabled\" (dateChanged)=\"onDateChanged($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" (click)=\"onInputClick($event)\" style=\"padding-right: 4px;\" farrisPopover\r\n            [popover]=\"value\" [triggers]=\"'hover'\" [popActive]=\"isActiveTip\" [showAction]=\"'show2'\"\r\n            [container]=\"'body'\" (keydown.tab)=\"closeSelector(3)\" />\r\n\r\n    </ng-container>\r\n    <ng-template #range>\r\n        <div class=\"form-control date-range-wrapper\" (click)=\"onInputClick($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" [title]=\"readonly || !editable|| disabled ?value:''\">\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-begin\" [class.f-state-focus]=\"totalFocus&&beginFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':beginPlaceholder\"\r\n                    [(ngModel)]=\"_beginValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\"\r\n                    autocomplete=\"off\" (blur)=\"onDateRangeInputBlur('begin')\" (focus)=\"onPrevFocus($event)\"/>\r\n            </span>\r\n            <span class=\"f-icon f-icon-orientation-arrow sub-input-spliter\"></span>\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-end\" [class.f-state-focus]=\"totalFocus&&endFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':endPlaceholder\"\r\n                    [(ngModel)]=\"_endValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\" autocomplete=\"off\"\r\n                    (blur)=\"onDateRangeInputBlur('end')\" (focus)=\"onNextFocus($event)\" />\r\n            </span>\r\n        </div>\r\n    </ng-template>\r\n    <div class=\"input-group-append f-cmp-iconbtn-wrapper\" *ngIf=\"!readonly && !disabled\" style=\"position: relative;\">\r\n        <span class=\"input-group-text input-group-clear datepicker-clear\" (click)=\"clearDate($event)\"\r\n            style=\"visibility: hidden\" #clearIcon  *ngIf=\"showClear\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <button type=\"button\" class=\"btn f-cmp-iconbtn\" (click)=\"onInputClick($event)\" style=\"z-index:0\">\r\n            <span class=\"f-icon f-icon-date\"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<dynamic-date-input *ngIf=\"dateOpts?.showDynamicView && enableDynamic && !multiSelect\" [showClear]=\"showClear\"\r\n    [value]=\"dynamicValue\" [text]=\"dynamicText\" [readonly]=\"readonly\" [disabled]=\"disabled\" [isFocus]=\"totalFocus\" [placeholder]=\"placeholder\"\r\n    (inputClick)=\"onInputClick($event)\" (clear)=\"clearDynamicDate($event)\" (tabKeydown)=\"closeSelector(3)\"></dynamic-date-input>\r\n\r\n\r\n<multi-select-input  *ngIf=\"multiSelect\" [separator]=\"separator\" [dates]=\"value\" [placeholder]=\"readonly||disabled?'':placeholder\"\r\n[editable]=\"!readonly&&!disabled\"  [orderBy]=\"selectedOrderBy\"\r\n (clickHandle)=\"onInputClick($event)\" (remove)=\"onRemoveDate($event)\"></multi-select-input>\r\n <input type=\"hidden\" [(ngModel)]=\"_realValue\"  *ngIf=\"multiSelect\">\r\n\r\n\r\n<ng-container #calendar>\r\n    <ng-container></ng-container>\r\n</ng-container>\r\n",
                providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService],
                styles: [`
            :host {
                display: block;
            }

            :host .datepicker-clear {
                position: absolute;
                height: 100%;
                right: 0;
                top: 0;
                z-index: 100;
            }
        `]
            }] }
];
/** @nocollapse */
FarrisDatepickerComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: UtilService },
    { type: DefaultConfigService },
    { type: Injector }
];
FarrisDatepickerComponent.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }],
    viewType: [{ type: Input }],
    disabled: [{ type: Input }],
    readonly: [{ type: Input }],
    editable: [{ type: Input }],
    dateRange: [{ type: Input }],
    showTime: [{ type: Input }],
    hourStep: [{ type: Input }],
    minuteStep: [{ type: Input }],
    secondStep: [{ type: Input }],
    showType: [{ type: Input }],
    locale: [{ type: Input }],
    dateFormat: [{ type: Input }],
    useDefault: [{ type: Input }],
    returnType: [{ type: Input }],
    returnFormat: [{ type: Input }],
    placeholder: [{ type: Input }],
    beginPlaceholder: [{ type: Input }],
    endPlaceholder: [{ type: Input }],
    whenValueChangedThenCloseSelectorPanel: [{ type: Input }],
    minDate: [{ type: Input }],
    maxDate: [{ type: Input }],
    highlightDates: [{ type: Input }],
    disableDateRangesBegin: [{ type: Input }],
    disableDateRangesEnd: [{ type: Input }],
    disableDates: [{ type: Input }],
    disableWeekdays: [{ type: Input }],
    markDates: [{ type: Input }],
    markDatesColor: [{ type: Input }],
    showWeekNumbers: [{ type: Input }],
    isMarkWeekends: [{ type: Input }],
    markWeekendsColor: [{ type: Input }],
    dateRangeDatesDelimiter: [{ type: Input }],
    shortcuts: [{ type: Input }],
    monthRangeValue: [{ type: Input }],
    beginValue: [{ type: Input }],
    endValue: [{ type: Input }],
    enableDynamic: [{ type: Input }],
    previousMaxDays: [{ type: Input }],
    futureMaxDays: [{ type: Input }],
    showClear: [{ type: Input }],
    showPresent: [{ type: Input }],
    firstDayOfWeek: [{ type: Input }],
    clear: [{ type: Output }],
    valueChange: [{ type: Output }],
    focus: [{ type: Output }],
    blur: [{ type: Output }],
    beginValueChange: [{ type: Output }],
    endValueChange: [{ type: Output }],
    PrevFocus: [{ type: Output }],
    NextFocus: [{ type: Output }],
    close: [{ type: Output }],
    multiSelect: [{ type: Input }],
    separator: [{ type: Input }],
    maxSelected: [{ type: Input }],
    selectedOrderBy: [{ type: Input }],
    dp: [{ type: ViewChild, args: [FarrisDatePickerDirective,] }],
    clearIcon: [{ type: ViewChild, args: ['clearIcon',] }],
    calendarRef: [{ type: ViewChild, args: ['calendar', { read: ViewContainerRef },] }],
    PFocus: [{ type: ViewChild, args: ['onPrevFocus',] }],
    NFocus: [{ type: ViewChild, args: ['onNextFocus',] }],
    dateInput: [{ type: ViewChild, args: ['dateInput',] }],
    dynamicValue: [{ type: Input }],
    dynamicValueChange: [{ type: Output }],
    dynamicViewChanged: [{ type: Output }],
    onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
    onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    FarrisDatepickerComponent.prototype.cls;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.viewType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disabled;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.readonly;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.editable;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.hourStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.minuteStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.secondStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.locale;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.useDefault;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnFormat;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.placeholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginPlaceholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endPlaceholder;
    /**
     * 输入值变化后关闭选择面板。 默认为 true
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.whenValueChangedThenCloseSelectorPanel;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.highlightDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesBegin;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesEnd;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableWeekdays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDatesColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showWeekNumbers;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isMarkWeekends;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markWeekendsColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRangeDatesDelimiter;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.shortcuts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.monthRangeValue;
    /**
     * 启用动态日期值设置，默认 false
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.enableDynamic;
    /**
     * 允许设置过去最大天数
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.previousMaxDays;
    /**
     * 允许设置未来最大天数
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.futureMaxDays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showClear;
    /**
     * 显示今天，本年，本月 按钮
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.showPresent;
    /**
     * 每周起始日  可选值 mo：周一  su: 周日，默认为 mo周一
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.firstDayOfWeek;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clear;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.valueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.focus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.blur;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PrevFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NextFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.close;
    /**
     * 启用多选，默认 false
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.multiSelect;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.separator;
    /**
     * 允许选择日期的个数； 0 无限
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.maxSelected;
    /**
     * 选中日期的排序方式，默认为 'none' 即不排序
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.selectedOrderBy;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dp;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clearIcon;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.calendarRef;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateInput;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timeFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._value;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._beginValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._endValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._initFinished;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._dateFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._minDate;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._maxDate;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.selectedWeek;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.defaultConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localDateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.totalFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.originTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isActiveTip;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.vcRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.datePicekrService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._realValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realRangeValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.notifySer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.formatedValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dtService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._applicationRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._ngControl;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._updateOn;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._valueChangeEmitted;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._mousedownEvent;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.closeCalendarHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cdr;
    /**
     * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._SELECT_DATE_;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicText;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicViewChanged;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.commonUtils;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.utilService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.defaultConfigService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2ZhcnJpcy1kYXRlcGlja2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9ELE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFDckUsVUFBVSxFQUFFLFlBQVksRUFBYSxXQUFXLEVBQUUsUUFBUSxFQUFnQixnQkFBZ0IsRUFBRSx3QkFBd0IsRUFDcEgsU0FBUyxFQUE0QixjQUFjLEVBQUUsaUJBQWlCLEVBQ3pFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxpQkFBaUIsRUFBd0IsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFNdEUsT0FBTyxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFdEUsT0FBTyxFQUFFLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3RILE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDdkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDN0UsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFB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QixnREFBaUM7Ozs7O0lBRWpDLG1EQUE2Qzs7Ozs7SUFFekMsdUNBQXNCOzs7OztJQUN0QixnREFBZ0M7Ozs7O0lBQ2hDLHlEQUFrRDs7Ozs7SUFDbEQsNkNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZGF0ZSc7XHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIGZvcndhcmRSZWYsIFNpbXBsZUNoYW5nZXMsXHJcbiAgICBFbGVtZW50UmVmLCBIb3N0TGlzdGVuZXIsIE9uQ2hhbmdlcywgSG9zdEJpbmRpbmcsIEluamVjdG9yLCBDb21wb25lbnRSZWYsIFZpZXdDb250YWluZXJSZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIFJlbmRlcmVyMiwgT25EZXN0cm95LCBBZnRlclZpZXdJbml0LCBBcHBsaWNhdGlvblJlZiwgQ2hhbmdlRGV0ZWN0b3JSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEZhcnJpc0RhdGVQaWNrZXJEaXJlY3RpdmUgfSBmcm9tICcuL2ZhcnJpcy1kYXRlcGlja2VyLmlucHV0JztcclxuaW1wb3J0IHtcclxuICAgIElNeU9wdGlvbnMsIElNeURhdGUsIElNeURhdGVNb2RlbCwgSU15U2hvcnRjdXRzLCBJTXlEYXRlRm9ybWF0LFxyXG4gICAgSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCwgSU15UmFuZ2VEYXRlU2VsZWN0aW9uXHJcbn0gZnJvbSAnLi9pbnRlcmZhY2VzL3B1YmxpYy1hcGknO1xyXG5cclxuaW1wb3J0IHsgRGVmYXVsdFZpZXcsIFNob3dUeXBlLCBDYWxUb2dnbGUgfSBmcm9tICcuL2VudW1zL3B1YmxpYy1hcGknO1xyXG5cclxuaW1wb3J0IHsgVXRpbFNlcnZpY2UsIERlZmF1bHRDb25maWdTZXJ2aWNlLCBEYXRlcGlja2VyTG9jYWxlU2VydmljZSwgRGF0ZVBpY2tlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3B1YmxpYy1hcGknO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBkaWZmZXJlbmNlSW5TZWNvbmRzLCBpc0RhdGUsIGlzVmFsaWQsIHBhcnNlIH0gZnJvbSAnZGF0ZS1mbnMnO1xyXG5pbXBvcnQgeyBDYWxlbmRhckNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDTElDSywgRU1QVFlfU1RSIH0gZnJvbSAnLi9jb25zdGFudHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMsIE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBNdWx0aVNlbGVjdGVkT3JkZXJCeSwgVmlld1R5cGUgfSBmcm9tICcuL2ludGVyZmFjZXMvbXktb3B0aW9ucy5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBEeW5hbWljRGF0YSB9IGZyb20gJy4vaW50ZXJmYWNlcy9keW5hbWljLWRhdGEtdHlwZS5pbnRlcmZhY2UnO1xyXG5cclxuY29uc3QgRkFSUklTX0RQX1ZBTFVFX0FDQ0VTU09SID0ge1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBGYXJyaXNEYXRlcGlja2VyQ29tcG9uZW50KSxcclxuICAgIG11bHRpOiB0cnVlXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGVwaWNrZXInLFxyXG4gICAgZXhwb3J0QXM6ICdmYXJyaXMtZGF0ZXBpY2tlcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgOmhvc3QgLmRhdGVwaWNrZXItY2xlYXIge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdLFxyXG4gICAgcHJvdmlkZXJzOiBbRkFSUklTX0RQX1ZBTFVFX0FDQ0VTU09SLCBVdGlsU2VydmljZSwgRGVmYXVsdENvbmZpZ1NlcnZpY2UsIExvY2FsZVNlcnZpY2VdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNEYXRlcGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbHMgPSAnZi1jbXAtZGF0ZXBpY2tlciBmLWNtcC1pbnB1dGdyb3VwJztcclxuXHJcbiAgICBASW5wdXQoKSB2aWV3VHlwZTogVmlld1R5cGUgPSBWaWV3VHlwZS5Td2l0Y2g7XHJcblxyXG4gICAgLy8g5piv5ZCm56aB55So6K+l57uE5Lu2XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5Y+q6K+7XHJcbiAgICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5Y+q6IO96YCJ5oup5pWw5o2u77yM5LiN5Y+v6ZSu5YWlXHJcbiAgICBASW5wdXQoKSBlZGl0YWJsZSA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKbkvb/nlKjml6XmnJ/ojIPlm7TovpPlhaXmqKHlvI9cclxuICAgIEBJbnB1dCgpIGRhdGVSYW5nZSA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5L2/55So5pe26Ze06L6T5YWl5qGGXHJcbiAgICBASW5wdXQoKSBzaG93VGltZSA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGhvdXJTdGVwID0gMTtcclxuICAgIEBJbnB1dCgpIG1pbnV0ZVN0ZXAgPSAxO1xyXG4gICAgQElucHV0KCkgc2Vjb25kU3RlcCA9IDE7XHJcblxyXG5cclxuICAgIC8vIOaYvuekuuexu+Wei1xyXG4gICAgQElucHV0KCkgc2hvd1R5cGU6IFNob3dUeXBlID0gU2hvd1R5cGUuYWxsO1xyXG4gICAgLy8g5pys5Zyw6K+t6KiAXHJcbiAgICBASW5wdXQoKSBsb2NhbGUgPSAnemgtY24nO1xyXG4gICAgLy8g5pel5pyf5qC85byPXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRhdGVGb3JtYXQodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZSDmoLzlvI/lvaLlpoIgeXl5eS1NTS1kZCBISDptbTpzc1xyXG4gICAgICAgICAgICAvLyBjb25zdCBmb3JtQXJyID0gJ3l5eXktTU0tZGQgSEg6bW06c3MnLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpOyAvLyDljrvmjonlt6blj7PnqbrmoLxcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csICcgJyk7IC8vIOWwhuS4remXtOeahOWkmuS4qui/nue7reepuuagvO+8jOabv+aNouS4ujHkuKrnqbrmoLxcclxuICAgICAgICAgICAgY29uc3QgZm9ybUFyciA9IHZhbHVlLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGVGb3JtYXQgPSBmb3JtQXJyWzBdO1xyXG4gICAgICAgICAgICAvLyDlpITnkIYneXl5eS1NTS1kZCBoOm1tOnNzIGEn5Y2zMTLlsI/ml7bmmL7npLrnmoTmg4XlhrVcclxuICAgICAgICAgICAgaWYgKGZvcm1BcnIubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gJ2g6bW06c3MgYSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gZm9ybUFyclsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5fZGF0ZUZvcm1hdCA9IHRoaXMuX2RhdGVGb3JtYXQgPyAodGhpcy5fZGF0ZUZvcm1hdCArICcnKS5yZXBsYWNlKC9tL2csICdNJykgOiAnJztcclxuICAgICAgICBpZiAodGhpcy5fZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBjb25zdCBtbSA9IFsneXl5eS1tbScsICd5eXl5L21tJywgJ3l5eXnlubRtbScsICdtbS95eXl5J107XHJcbiAgICAgICAgICAgIGNvbnN0IF9tbSA9IG1tLmZpbmQobSA9PiB0aGlzLl9kYXRlRm9ybWF0LmluY2x1ZGVzKG0pKTtcclxuICAgICAgICAgICAgaWYgKF9tbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0ZUZvcm1hdCA9IHRoaXMuX2RhdGVGb3JtYXQucmVwbGFjZShfbW0sIF9tbS5yZXBsYWNlKC9tL2csICdNJykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fdGltZUZvcm1hdCAmJiB0aGlzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRlRm9ybWF0ICs9ICcgJyArIHRoaXMuX3RpbWVGb3JtYXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdGltZUZvcm1hdC5pbmRleE9mKCfml7YnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9IHRoaXMuX3RpbWVGb3JtYXQucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID0gdGhpcy5fZGF0ZUZvcm1hdDtcclxuICAgIH1cclxuICAgIGdldCBkYXRlRm9ybWF0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGVGb3JtYXQ7XHJcbiAgICB9XHJcbiAgICAvLyDmmK/lkKbkvb/nlKjpu5jorqTlgLxcclxuICAgIEBJbnB1dCgpIHVzZURlZmF1bHQgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHJldHVyblR5cGU6ICdPYmplY3QnIHwgJ0RhdGUnIHwgJ1N0cmluZycgPSAnU3RyaW5nJztcclxuICAgIEBJbnB1dCgpIHJldHVybkZvcm1hdDogc3RyaW5nO1xyXG4gICAgLy8gcGxhY2Vob2xkZXJcclxuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBASW5wdXQoKSBiZWdpblBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBASW5wdXQoKSBlbmRQbGFjZWhvbGRlciA9ICcnO1xyXG4gICAgLyoqIOi+k+WFpeWAvOWPmOWMluWQjuWFs+mXremAieaLqemdouadv+OAgiDpu5jorqTkuLogdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgd2hlblZhbHVlQ2hhbmdlZFRoZW5DbG9zZVNlbGVjdG9yUGFuZWwgPSB0cnVlO1xyXG4gICAgLy8g5pyA5bCP5pel5pyfXHJcbiAgICAvLyDliqDlhaXmjqXmlLbml7bliIbnp5Llip/og71cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgbWluRGF0ZSh2YWw6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcclxuICAgICAgICBsZXQgZGF0ZTogRGF0ZTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBjYXNlIG51bGw6XHJcbiAgICAgICAgICAgIC8vICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1ZhbGlkKGRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5fbWluRGF0ZSA9IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgbWluRGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWluRGF0ZTtcclxuICAgIH1cclxuICAgIC8vIOacgOWkp+aXpeacn1xyXG4gICAgLy8g5Yqg5YWl5o6l5pS25pe25YiG56eS5Yqf6IO9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IG1heERhdGUodmFsOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCk7XHJcbiAgICAgICAgbGV0IGRhdGU6IERhdGU7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUodmFsKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gY2FzZSBudWxsOlxyXG4gICAgICAgICAgICAvLyAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFVuZGVmaW5lZF0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKDEwMDAwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNWYWxpZChkYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21heERhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG1heERhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21heERhdGU7XHJcbiAgICB9XHJcbiAgICAvLyDpnIDopoHpq5jkuq7mmL7npLrnmoTml6XmnJ9cclxuICAgIEBJbnB1dCgpIGhpZ2hsaWdodERhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g56aB55So5Yy65Z+f55qE5pel5pyf5byA5aeL5pe26Ze0XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlRGF0ZVJhbmdlc0JlZ2luOiBJTXlEYXRlID0ge1xyXG4gICAgICAgIHllYXI6IDAsXHJcbiAgICAgICAgbW9udGg6IDAsXHJcbiAgICAgICAgZGF5OiAwXHJcbiAgICB9O1xyXG4gICAgLy8g56aB55So5Yy65Z+f55qE5pel5pyf57uT5p2f5pe26Ze0XHJcbiAgICBASW5wdXQoKSBkaXNhYmxlRGF0ZVJhbmdlc0VuZDogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAwLFxyXG4gICAgICAgIG1vbnRoOiAwLFxyXG4gICAgICAgIGRheTogMFxyXG4gICAgfTtcclxuICAgIC8vIOemgeeUqOeahOaXpeacn1xyXG4gICAgQElucHV0KCkgZGlzYWJsZURhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g5LiA5ZGo5Lit6KKr56aB55So55qE5pel5a2QXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlV2Vla2RheXM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIC8vIOiiq+agh+iusOeahOaXpeacn1xyXG4gICAgQElucHV0KCkgbWFya0RhdGVzOiBBcnJheTxJTXlEYXRlPiA9IFtdO1xyXG4gICAgLy8g6KKr5qCH6K6w55qE5pel5pyf55qE5pi+56S66aKc6ImyXHJcbiAgICBASW5wdXQoKSBtYXJrRGF0ZXNDb2xvciA9ICcjNTlhMWZmJztcclxuICAgIC8vIOaYr+WQpuaYvuekuuesrOWHoOWRqFxyXG4gICAgQElucHV0KCkgc2hvd1dlZWtOdW1iZXJzID0gZmFsc2U7XHJcbiAgICAvLyDmmK/lkKbmoIforrDlkajmnKtcclxuICAgIEBJbnB1dCgpIGlzTWFya1dlZWtlbmRzID0gZmFsc2U7XHJcbiAgICAvLyDooqvmoIforrDlkajmnKvnmoTmmL7npLrpopzoibJcclxuICAgIEBJbnB1dCgpIG1hcmtXZWVrZW5kc0NvbG9yID0gJyM1OWExZmYnO1xyXG4gICAgLy8g5pel5pyf6IyD5Zu05qih5byP5LiLaW5wdXTnmoTmmL7npLrliIblibLnrKblkIhcclxuICAgIEBJbnB1dCgpIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyID0gJ34nO1xyXG4gICAgLy8g6YWN572u5bem5L6nIHNpZGViYXIg5b+r5o236ZSuXHJcbiAgICBASW5wdXQoKSBzaG9ydGN1dHM6IEFycmF5PElNeVNob3J0Y3V0cz4gPSBbXTtcclxuICAgIC8vIOaXpeacn+iMg+WbtOmAieaLqeaXtu+8jOm7mOiupOe7k+adn+aciOS7veS4uuW9k+WJjeaciOS7vSArIG1vbnRoUmFuZ2VWYWx1ZVxyXG4gICAgQElucHV0KCkgbW9udGhSYW5nZVZhbHVlID0gMTtcclxuICAgIC8vIOaXpeacn+iMg+WbtO+8muW8gOWni+aXpeacn1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBiZWdpblZhbHVlKHZhbHVlOiBzdHJpbmcgfCBEYXRlKSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogJyc7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZGF0ZVRvKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ0RhdGUnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5pbmRleE9mKCdUJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCdUJywgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pbml0RmluaXNoZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYmVnaW5WYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9iZWdpblZhbHVlLCB0cnVlKTtcclxuICAgIH1cclxuICAgIC8vIOaXpeacn+iMg+WbtO+8mue7k+adn+aXpeacn1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlbmRWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgRGF0ZSkge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRhdGVUbyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdEYXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignVCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnVCcsICcgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXRGaW5pc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBlbmRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9lbmRWYWx1ZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkK/nlKjliqjmgIHml6XmnJ/lgLzorr7nva7vvIzpu5jorqQgZmFsc2VcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRHluYW1pYyA9IGZhbHNlO1xyXG4gICAgLyoqIOWFgeiuuOiuvue9rui/h+WOu+acgOWkp+WkqeaVsCAqL1xyXG4gICAgQElucHV0KCkgcHJldmlvdXNNYXhEYXlzID0gMzA7XHJcbiAgICAvKiog5YWB6K646K6+572u5pyq5p2l5pyA5aSn5aSp5pWwICovXHJcbiAgICBASW5wdXQoKSBmdXR1cmVNYXhEYXlzID0gMzA7XHJcblxyXG4gICAgQElucHV0KCkgc2hvd0NsZWFyID0gdHJ1ZTtcclxuICAgIC8qKiDmmL7npLrku4rlpKnvvIzmnKzlubTvvIzmnKzmnIgg5oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBzaG93UHJlc2VudCA9IGZhbHNlO1xyXG4gICAgLyoqIOavj+WRqOi1t+Wni+aXpSAg5Y+v6YCJ5YC8IG1v77ya5ZGo5LiAICBzdTog5ZGo5pel77yM6buY6K6k5Li6IG1v5ZGo5LiAICovXHJcbiAgICBASW5wdXQoKSBmaXJzdERheU9mV2VlazogJ21vJ3wnc3UnID0gJ21vJztcclxuXHJcbiAgICAvLyBjbGVhciDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBjbGVhciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIHZhbHVlQ2hhbmdlZCDkuovku7ZcclxuICAgIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGZvY3VzIOS6i+S7tlxyXG4gICAgQE91dHB1dCgpIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gYmx1ciDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBibHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gYmVnaW5WYWx1ZUNoYW5nZVxyXG4gICAgQE91dHB1dCgpIGJlZ2luVmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBlbmRWYWx1ZUNoYW5nZVxyXG4gICAgQE91dHB1dCgpIGVuZFZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gUHJldkZvY3VzIGRhdGVSYW5nZSDnrKzkuIDkuKrml6XmnJ9cclxuICAgIEBPdXRwdXQoKSBQcmV2Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBOZXh0Rm9jdXMgZGF0ZVJhbmdlIOesrOS6jOS4quaXpeacn1xyXG4gICAgQE91dHB1dCgpIE5leHRGb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvLyBjbG9zZSDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5ZCv55So5aSa6YCJ77yM6buY6K6kIGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBtdWx0aVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2VwYXJhdG9yID0gJywnO1xyXG4gICAgLyoqIOWFgeiuuOmAieaLqeaXpeacn+eahOS4quaVsO+8myAwIOaXoOmZkCAqL1xyXG4gICAgQElucHV0KCkgbWF4U2VsZWN0ZWQgPSAwO1xyXG4gICAgLyoqIOmAieS4reaXpeacn+eahOaOkuW6j+aWueW8j++8jOm7mOiupOS4uiAnbm9uZScg5Y2z5LiN5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RlZE9yZGVyQnk6IE11bHRpU2VsZWN0ZWRPcmRlckJ5ID0gJ25vbmUnO1xyXG5cclxuXHJcbiAgICBAVmlld0NoaWxkKEZhcnJpc0RhdGVQaWNrZXJEaXJlY3RpdmUpIGRwOiBGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlO1xyXG4gICAgQFZpZXdDaGlsZCgnY2xlYXJJY29uJykgY2xlYXJJY29uOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnY2FsZW5kYXInLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY2FsZW5kYXJSZWY6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdvblByZXZGb2N1cycpIFBGb2N1czogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ29uTmV4dEZvY3VzJykgTkZvY3VzOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2RhdGVJbnB1dCcpIGRhdGVJbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBwcml2YXRlIGNSZWY6IENvbXBvbmVudFJlZjxDYWxlbmRhckNvbXBvbmVudD4gPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfdGltZUZvcm1hdCA9ICcnO1xyXG4gICAgcHJpdmF0ZSBfdmFsdWUgPSAnJztcclxuICAgIHB1YmxpYyBfYmVnaW5WYWx1ZSA9ICcnO1xyXG4gICAgcHVibGljIF9lbmRWYWx1ZSA9ICcnO1xyXG4gICAgcHJpdmF0ZSBfaW5pdEZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF90aW1lcjogYW55O1xyXG4gICAgcHJpdmF0ZSBfZGF0ZUZvcm1hdDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfbWluRGF0ZTogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAxODQwLFxyXG4gICAgICAgIG1vbnRoOiAxLFxyXG4gICAgICAgIGRheTogMSxcclxuICAgICAgICBob3VyOiAwLFxyXG4gICAgICAgIG1pbnV0ZTogMCxcclxuICAgICAgICBzZWNvbmQ6IDBcclxuICAgIH07XHJcbiAgICBwcml2YXRlIF9tYXhEYXRlOiBJTXlEYXRlID0ge1xyXG4gICAgICAgIHllYXI6IDEwMDAwLFxyXG4gICAgICAgIG1vbnRoOiAxLFxyXG4gICAgICAgIGRheTogMSxcclxuICAgICAgICBob3VyOiAwLFxyXG4gICAgICAgIG1pbnV0ZTogMCxcclxuICAgICAgICBzZWNvbmQ6IDBcclxuICAgIH07XHJcbiAgICBzZXQgdmFsdWUodikge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdiA/IHYgOiAnJztcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZFdlZWsgPSBudWxsO1xyXG4gICAgZGF0ZU9wdHM6IElNeU9wdGlvbnMgPSB7fTtcclxuICAgIGRlZmF1bHRDb25maWc6IElNeU9wdGlvbnM7XHJcbiAgICBsb2NhbERhdGVPcHRzOiBJTXlPcHRpb25zO1xyXG4gICAgbG9jYWxlQ29uZmlnOiBEYXRlcGlja2VyTG9jYWxlU2VydmljZTtcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICAvLyDlvIDlp4vovpPlhaXmjqfku7bogZrnhKZcclxuICAgIGJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgIC8vIOe7k+adn+i+k+WFpeaOp+S7tuiBmueEplxyXG4gICAgZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgIC8vIOaVtOS9k+iBmueEplxyXG4gICAgdG90YWxGb2N1cyA9IGZhbHNlO1xyXG5cclxuICAgIG9yaWdpblRpbWU6IGFueTtcclxuICAgIC8vIOaYr+WQpuWtl+espui2hemVv+aYvuekulRpcFxyXG4gICAgaXNBY3RpdmVUaXAgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdmNSZWY6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBwcml2YXRlIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyO1xyXG4gICAgcHJpdmF0ZSBkYXRlUGljZWtyU2VydmljZTogRGF0ZVBpY2tlclNlcnZpY2U7XHJcbiAgICBfcmVhbFZhbHVlID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3JlYWxSYW5nZVZhbHVlID0gbnVsbDtcclxuICAgIHByaXZhdGUgbm90aWZ5U2VyOiBOb3RpZnlTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRlZFZhbHVlID0gJyc7XHJcbiAgICBkdFNlcnZpY2U6IERhdGVUaW1lSGVscGVyU2VydmljZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9hcHBsaWNhdGlvblJlZjogQXBwbGljYXRpb25SZWY7XHJcblxyXG4gICAgcHJpdmF0ZSBfbmdDb250cm9sOiBOZ0NvbnRyb2w7XHJcbiAgICBfdXBkYXRlT24gPSAnY2hhbmdlJztcclxuXHJcbiAgICAvLyDml6XmnJ/pgInmi6nlkI7orr7nva7kuLogdHJ1Ze+8jCBibHVyIOS6i+S7tuWwhuS4jeS8mumHjeWkjeaJp+ihjHZhbHVlQ2hhbmdlZO+8m1xyXG4gICAgLy8g6ZSu55uY5L+u5pS55pe277yMYmx1ciDkuovku7bkuK3kvJrmiafooYzkuIDmrKEgdmFsdWVDaGFuZ2VkIOWQju+8jOWwhuatpOWAvOiuvuS4uiBmYWxzZTtcclxuICAgIHByaXZhdGUgX3ZhbHVlQ2hhbmdlRW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfbW91c2Vkb3duRXZlbnQgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjbG9zZUNhbGVuZGFySGFuZGxlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYgPSBudWxsO1xyXG4gICAgLyoqIOe8k+WtmOmAmui/h+eCueWHu+aXpeWOhueahOaVsOaNru+8jOeUqOS6jueahOagvOW8j+WMluagvOW8j+S4jeagh+WHhuaXtu+8jOagvOW8j+WMluaVsOaNruOAgiAqL1xyXG4gICAgcHJpdmF0ZSBfU0VMRUNUX0RBVEVfID0gbnVsbDtcclxuXHJcbiAgICBkeW5hbWljVGV4dCA9ICcnO1xyXG4gICAgQElucHV0KCkgZHluYW1pY1ZhbHVlOiBEeW5hbWljRGF0YSA9IG51bGw7XHJcbiAgICBAT3V0cHV0KCkgZHluYW1pY1ZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGR5bmFtaWNWaWV3Q2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBvbk1vZGVsQ2hhbmdlID0gKG9iajogYW55KSA9PiB7IH07XHJcbiAgICBvbk1vZGVsVG91Y2hlZCA9ICgpID0+IHsgfTtcclxuXHJcbiAgICBwcml2YXRlIGNvbW1vblV0aWxzOiBDb21tb25VdGlscztcclxuXHJcbiAgICBwcml2YXRlIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSB1dGlsU2VydmljZTogVXRpbFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0Q29uZmlnU2VydmljZTogRGVmYXVsdENvbmZpZ1NlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3JcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdENvbmZpZyA9IHRoaXMuZGVmYXVsdENvbmZpZ1NlcnZpY2UuZ2V0RGVmYXVsdENvbmZpZygpO1xyXG4gICAgICAgIGlmICh0aGlzLmluamVjdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmR0U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KERhdGVUaW1lSGVscGVyU2VydmljZSk7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VyID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXIuY29uZmlnLnBvc2l0aW9uID0gJ3RvcC1jZW50ZXInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9jYWxlQ29uZmlnID0gbmV3IERhdGVwaWNrZXJMb2NhbGVTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy52Y1JlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KFZpZXdDb250YWluZXJSZWYsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuY2ZyID0gdGhpcy5pbmplY3Rvci5nZXQoQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBudWxsKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gdGhpcy5pbmplY3Rvci5nZXQoUmVuZGVyZXIyLCBudWxsKTtcclxuICAgICAgICB0aGlzLl9hcHBsaWNhdGlvblJlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KEFwcGxpY2F0aW9uUmVmKTtcclxuICAgICAgICB0aGlzLmNkciA9IHRoaXMuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmKTtcclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG5ldyBPdmVyTGF5SGlkZGVuU2VydmljZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbW1vblV0aWxzID0gdGhpcy5pbmplY3Rvci5nZXQoQ29tbW9uVXRpbHMsIG5ldyBDb21tb25VdGlscygpKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5fbmdDb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0UGxhY2Vob2xkZXIoKTtcclxuICAgICAgICB0aGlzLm1lcmdlRGF0ZU9wdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5fYmVnaW5WYWx1ZSAmJiB0aGlzLl9lbmRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pbml0RmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UgPSBuZXcgRGF0ZVBpY2tlclNlcnZpY2UodGhpcy5kYXRlT3B0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UGxhY2Vob2xkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9jYWxlU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnbG9jYWxlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cyA9IHRoaXMubG9jYWxlQ29uZmlnLmdldExvY2FsZU9wdGlvbnModGhpcy5sb2NhbGUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLnBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMubG9jYWxEYXRlT3B0cy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5sb2NhbERhdGVPcHRzLnBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgOiAn6K+36YCJ5oup5pel5pyfJztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmJlZ2luUGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5QbGFjZWhvbGRlciA9IHRoaXMubG9jYWxEYXRlT3B0cy5yYW5nZS5iZWdpbiB8fCB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5kUGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kUGxhY2Vob2xkZXIgPSB0aGlzLmxvY2FsRGF0ZU9wdHMucmFuZ2UuZW5kIHx8IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtZXJnZURhdGVPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuZGF0ZU9wdHMgPSB7IC4uLnRoaXMuZGVmYXVsdENvbmZpZywgLi4udGhpcy5idWlsZE9wdGlvbnMoKSB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID0gdGhpcy5kYXRlRm9ybWF0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93VGltZSAmJiAhdGhpcy5fdGltZUZvcm1hdCkge1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lRm9ybWF0ID0gJ0hIOm1tOnNzJztcclxuICAgICAgICAgICAgdGhpcy5kYXRlT3B0cy50aW1lRm9ybWF0ID0gdGhpcy5fdGltZUZvcm1hdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmV0dXJuRm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5sb2NhbGUgJiYgY2hhbmdlcy5sb2NhbGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cyA9IHRoaXMubG9jYWxlQ29uZmlnLmdldExvY2FsZU9wdGlvbnModGhpcy5sb2NhbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcykge1xyXG4gICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gWydzaG93VGltZScsICdzaG93VHlwZScsICdkYXRlUmFuZ2UnLCAnbWF4RGF0ZScsICdtaW5EYXRlJywgJ21vbnRoUmFuZ2VWYWx1ZScsICdtYXhTZWxlY3RlZCcsICdzZXBhcmF0b3InLCAnc2VsZWN0ZWRPcmRlckJ5J107XHJcblxyXG5cclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY2hhbmdlcykuZm9yRWFjaChlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlc1tlXS5pc0ZpcnN0Q2hhbmdlKCkgJiYgKHRoaXMuZGF0ZU9wdHNbZV0gfHwgaW5wdXRzLmluY2x1ZGVzKGUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMgPSB7IC4uLih0aGlzLmRhdGVPcHRzIHx8dGhpcy5kZWZhdWx0Q29uZmlnKSwgLi4udGhpcy5idWlsZE9wdGlvbnMoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgY2hhbmdlcy5yZWFkb25seSAmJlxyXG4gICAgICAgICAgICAhY2hhbmdlcy5yZWFkb25seS5jdXJyZW50VmFsdWUgJiZcclxuICAgICAgICAgICAgIWNoYW5nZXMucmVhZG9ubHkuZmlyc3RDaGFuZ2UgJiZcclxuICAgICAgICAgICAgIXRoaXMudmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy51c2VEZWZhdWx0XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fbmdDb250cm9sICYmIHRoaXMuX25nQ29udHJvbC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU9uID0gdGhpcy5fbmdDb250cm9sLmNvbnRyb2wudXBkYXRlT247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWYWx1ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XHJcbiAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBbJyRldmVudCddKSBvbk1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZSAmJiAhdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLmNsZWFySWNvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckljb24ubmF0aXZlRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPCAzMDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPCAxOTA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPCAxNzA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggPCAxMjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScsIFsnJGV2ZW50J10pIG9uTW91c2VMZWF2ZShldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCAmJiB0aGlzLmNsZWFySWNvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFySWNvbi5uYXRpdmVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25CbHVyKGUpIHtcclxuICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IF9ydW5ibHVyID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsaWQgPSB0aGlzLl9pc1ZhbGlkKHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3J1bmJsdXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckRhdGUoKTtcclxuICAgICAgICAgICAgICAgIF9ydW5ibHVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZU1vZGVsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3ZhbHVlQ2hhbmdlRW1pdHRlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbERhdGUgPSB0aGlzLmRhdGVGcm9tKHRoaXMudHJhbnNmb3JtKHRoaXMudmFsdWUsIHRoaXMucmV0dXJuRm9ybWF0KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZSh0aGlzLnZhbHVlLCByZWFsRGF0ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lZGl0YWJsZSAmJiBfcnVuYmx1cikge1xyXG4gICAgICAgICAgICBpZiAodGhpc1snaW5EYXRhZ3JpZCddKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNb2RlbCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh1cGRhdGVNb2RlbCwgMjUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl92YWx1ZUNoYW5nZUVtaXR0ZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fbW91c2Vkb3duRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbW91c2Vkb3duRXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fbW91c2Vkb3duRXZlbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJsdXIuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRm9jdXMoZSkge1xyXG4gICAgICAgIHRoaXMudG90YWxGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWdpc3Rlck1vdXNlRG93bkhhbmRsZSgpO1xyXG4gICAgICAgIHRoaXMuZm9jdXMuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSW5wdXRDbGljayhldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTW91c2VEb3duSGFuZGxlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXIoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyTW91c2VEb3duSGFuZGxlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fbW91c2Vkb3duRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbW91c2Vkb3duRXZlbnQgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgJ21vdXNlZG93bicsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUudG9TdHJpbmcoKS5pbmRleE9mKCdTVkdBbmltYXRlZFN0cmluZycpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5keW5hbWljLXZpZXctaXRlbScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZi1jbXAtZGF0ZXBpY2tlcicpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLmYtZGF0ZXBpY2tlci1jb250YWluZXInKSB8fCBlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignZi1pY29uLWRhdGUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5kYXRlSW5wdXQubmF0aXZlRWxlbWVudCwgJ3Vuc2VsZWN0YWJsZScsICdvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLnZhbHVlICYmIHRoaXMudXNlRGVmYXVsdCkge1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgbm93VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgbm93VmFsdWUgPSB0aGlzLmRhdGVUbyhub3cpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5vd1ZhbHVlID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVUbyhub3cpICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVUbyhuZXcgRGF0ZShub3cuc2V0TW9udGgobm93LmdldE1vbnRoKCkgKyAxKSkpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlUGljZWtyU2VydmljZS52YWxpZGF0ZShub3dWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBub3dWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyRHluYW1pY0RhdGUoJGV2ZW50ID0gbnVsbCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQpIHtcclxuICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXRlT3B0cy5keW5hbWljVmFsdWVDaGFuZ2VkKG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyRGF0ZSgkZXZlbnQ6IE1vdXNlRXZlbnQgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCRldmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9TRUxFQ1RfREFURV8gPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFJhbmdlVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlQ2hhbmdlZCh7XHJcbiAgICAgICAgICAgICAgICBpc1JhbmdlOiB0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIHNpbmdsZURhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IEVNUFRZX1NUUixcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0ZVJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5EYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luSnNEYXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luRXBvYzogMCxcclxuICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZEpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBlbmRFcG9jOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogRU1QVFlfU1RSXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlDYWxCdG4pO1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UobnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXIuZW1pdCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jbGVhckljb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uLm5hdGl2ZUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2luZ2xlSW5wdXROZ01vZGVsQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSAkZXZlbnQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy52YWx1ZSA/IHRoaXMuZGF0ZUZyb20oJGV2ZW50KSA6ICcnO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvbk5nTW9kZWxDaGFuZ2UodmFsdWU6IGFueSwgcmVhbGRhdGUgPSBudWxsLCBlbWl0VmFsdWVDaGFuZ2UgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5kYXRlUmFuZ2UgfHwgdGhpcy5zaG93VHlwZSA9PSBTaG93VHlwZS5zZWxlY3RXZWVrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0bXBBcnIgPSB2YWx1ZSA/IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpIDogWycnLCAnJ107XHJcbiAgICAgICAgICAgIGNvbnN0IF9iZWdpblZhbHVlID0gdGhpcy50cmFuc2Zvcm0odG1wQXJyWzBdLCB0aGlzLnJldHVybkZvcm1hdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclsxXSwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclswXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy50cmFuc2Zvcm0odG1wQXJyWzFdKTtcclxuXHJcblxyXG4gICAgICAgICAgICB2YWx1ZSA9IF9iZWdpblZhbHVlICYmIF9lbmRWYWx1ZSA/IF9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIF9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5WYWx1ZUNoYW5nZS5lbWl0KHRoaXMuX2JlZ2luVmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmVuZFZhbHVlQ2hhbmdlLmVtaXQodGhpcy5fZW5kVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcCA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudmFsdWUsXHJcbiAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXR0ZWQ6IHRoaXMuX3JlYWxSYW5nZVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgY21wUmVmOiB0aGlzXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQocCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UobnVsbCwgZW1pdFZhbHVlQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYWxkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB0aGlzLmdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQocmVhbGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25Nb2RlbENoYW5nZSh0aGlzLl9yZWFsVmFsdWUsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0ICYmIHRoaXMuZGF0ZUlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgIT09IHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuZGF0ZUlucHV0Lm5hdGl2ZUVsZW1lbnQsICd2YWx1ZScsIHRoaXMudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzVmFsaWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LCAndmFsdWUnLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Nb2RlbENoYW5nZSh0aGlzLl9yZWFsVmFsdWUsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uTW9kZWxDaGFuZ2UocmVhbFZhbHVlLCBlbWl0KSB7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gcmVhbFZhbHVlO1xyXG4gICAgICAgIHRoaXMub25Nb2RlbENoYW5nZShyZWFsVmFsdWUpO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRoaXMudmFsdWUsIHRoaXMuZGF0ZU9wdHMsIHRydWUpLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOiByZWFsVmFsdWUsXHJcbiAgICAgICAgICAgICAgICBjbXBSZWY6IHRoaXNcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlQ2hhbmdlLm9ic2VydmVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZW5WYWx1ZUNoYW5nZWRUaGVuQ2xvc2VTZWxlY3RvclBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQocmVhbGRhdGU6IGFueSkge1xyXG5cclxuICAgICAgICBpZiAocmVhbGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbGRhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5Gb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kdFNlcnZpY2UuZm9ybWF0VG8ocmVhbGRhdGUsIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZWFsZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGcm9tKHRoaXMuX3JlYWxWYWx1ZSB8fCB0aGlzLnZhbHVlKSB8fCAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRlUmFuZ2VJbnB1dEJsdXIoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFJhbmdlVmFsdWUgfHwgdGhpcy52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkNhbGVuZGFyKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2YWwgPSB0aGlzLl9yZWFsVmFsdWU7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlUmFuZ2UgfHwgdGhpcy5zaG93VHlwZSA9PSBTaG93VHlwZS5zZWxlY3RXZWVrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLl9yZWFsUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMudHJhbnNmb3JtKHZhbCwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jUmVmID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY1JlZiA9IHRoaXMuY2FsZW5kYXJSZWYuY3JlYXRlQ29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZnIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQ2FsZW5kYXJDb21wb25lbnQpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLmFwcGVuZFNlbGVjdG9yKHRoaXMuY1JlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UucmVnaXN0ZXJTY3JvbGxFdmVudCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2UuZGF0ZUhscCA9IHRoaXMuZHRTZXJ2aWNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1R5cGUgPT09IDQgJiYgdGhpcy5zZWxlY3RlZFdlZWspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY1JlZi5pbnN0YW5jZS5zZWxlY3RlZFdlZWsgPSB0aGlzLnNlbGVjdGVkV2VlaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY1JlZi5pbnN0YW5jZS5tdWx0aURhdGVzQ2hhbmdlZCA9IChkYXRlczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZXMubWFwKG4gPT4gbi52YWx1ZSkuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gZGF0ZXMubWFwKG4gPT4gdGhpcy5kdFNlcnZpY2UuZm9ybWF0VG8oIGAke24ueWVhcn0tJHtuLm1vbnRofS0ke24uZGF5fWAgLCB0aGlzLnJldHVybkZvcm1hdCkpLmpvaW4odGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlTZWxlY3RlZENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2Uuc2hvd05vdGlmeSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSAgdGhpcy5sb2NhbERhdGVPcHRzLm1lc3NhZ2VbJzEwMiddLnJlcGxhY2UoJyR7MH0nLCB0aGlzLm1heFNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RpZnlTZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXIud2FybmluZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jUmVmLmluc3RhbmNlLmluaXRpYWxpemUoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzLFxyXG4gICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLmdldFNlbGVjdG9yUG9zaXRpb24odGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzLmNSZWYpLFxyXG4gICAgICAgICAgICAgICAgdmFsLFxyXG4gICAgICAgICAgICAgICAgKGRtOiBJTXlEYXRlTW9kZWwsIGNsb3NlOiBib29sZWFuKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSAmJiB0aGlzLnNob3dUaW1lICYmIGRtLmRhdGVSYW5nZS5lbmRKc0RhdGUgPCBkbS5kYXRlUmFuZ2UuYmVnaW5Kc0RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgeyB5ZWFyOiBiZWdpblllYXIsIG1vbnRoOiBiZWdpbk1vbnRoLCAgZGF5OiBiZWdpbkRheSAgfSA9IHsuLi5kbS5kYXRlUmFuZ2UuYmVnaW5EYXRlfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgeyB5ZWFyOiBlbmRZZWFyLCBtb250aDogZW5kTW9udGgsICBkYXk6IGVuZERheSAgfSA9IHsuLi5kbS5kYXRlUmFuZ2UuZW5kRGF0ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIG1lc3NhZ2U6ICBUaGUgZW5kIHRpbWUgbXVzdCBub3QgYmUgZWFybGllciB0aGFuIHRoZSBzdGFydCB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIG1lc3NhZ2U6ICDntZDmnZ/mmYLplpPkuI3lvpfml6nkuo7plovlp4vmmYLplpNcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXNnID0gdGhpcy5sb2NhbERhdGVPcHRzLm1lc3NhZ2VbJzEwMSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RpZnlTZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VyLndhcm5pbmcobXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IHRoaXMuY1JlZi5pbnN0YW5jZS5zZWxlY3RlZFdlZWs7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRhdGVDaGFuZ2VkKGRtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5RGF0ZVNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVtaXRDYWxlbmRhckNoYW5nZWQoY3ZjKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAocmRzOiBJTXlSYW5nZURhdGVTZWxlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVtaXRSYW5nZURhdGVTZWxlY3Rpb24ocmRzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5RXNjKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY1JlZi5pbnN0YW5jZS5keW5hbWljVmlld1Nob3cuc3Vic2NyaWJlKChlOiB7c2hvd0R5bmFtaWNWaWV3OiBib29sZWFufSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IE9iamVjdC5hc3NpZ24oZSwge2R5bmFtaWNWYWx1ZTogdGhpcy5keW5hbWljVmFsdWUsIHNpbmdsZVZhbHVlOiB0aGlzLl9yZWFsVmFsdWUsIGluc3RhbmNlOiB0aGlzfSlcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1ZpZXdDaGFuZ2VkLmVtaXQodCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5hcHBlbmRTZWxlY3Rvcih0aGlzLmNSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLnJlZ2lzdGVyTW91c2VFdmVudCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQ6IGFueSA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICBjb25zdCBub3RDbG9zZSA9ICh0aGlzLmNSZWYgJiYgdGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQuY29udGFpbnModCkpIHx8IFxyXG4gICAgICAgICAgICB0LmNsb3Nlc3QoJy5tdWx0aS1kYXRlLXNlbGVjdCcpIHx8ICh0LmNsYXNzTmFtZSAmJiB0LmNsYXNzTmFtZS5pbmRleE9mKCdtdWx0aS1kYXRlLXNlbGVjdCcpID4gLTEpO1xyXG4gICAgICAgICAgICBpZiAobm90Q2xvc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgICAgICB9LCB7IG9ubHlUb3BXaW5kb3c6IHRydWV9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jUmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAvLyB0aGlzLnByZXZlbnRDbG9zZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY2xvc2VTZWxlY3RvcihyZWFzb24/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jUmVmICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJSZWYucmVtb3ZlKHRoaXMuY2FsZW5kYXJSZWYuaW5kZXhPZih0aGlzLmNSZWYuaG9zdFZpZXcpKTtcclxuICAgICAgICAgICAgdGhpcy5jUmVmID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1vdmVybGF5LWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmNoaWxkRWxlbWVudENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjb250YWluZXIsICdwb2ludGVyLWV2ZW50cycsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Gb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmVuZEZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5yZW1vdmVNb3VzZUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRvZ2dsZUNhbGVuZGFyKGNsb3NlOiBib29sZWFuLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5Gb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY1JlZiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIgPSB0aGlzLnJlbmRlcmVyLmxpc3Rlbihkb2N1bWVudCwgQ0xJQ0ssICgpID0+IHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeU91dENsaWNrKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5vcGVuQ2FsZW5kYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtb3ZlcmxheS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjb250YWluZXIsICdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB6aW5kZXggPSB0aGlzLmNvbW1vblV0aWxzLmdldEZsb2F0aW5nTGF5ZXJJbmRleCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3pJbmRleCcsIHppbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZS1vdmVybGF5LWNvbnRhaW5lcicpO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyICYmIHRoaXMuY1JlZi5sb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsID09PSB0aGlzLmNSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKENMSUNLLCB0aGlzLm9uQ2xpY2tIaWRkZW4pO1xyXG4gICAgICAgICAgICAgICAgY2xvc2UgJiYgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5Q2FsQnRuKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnJylcclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRlQ2hhbmdlZChldmVudDogSU15RGF0ZU1vZGVsKSB7XHJcbiAgICAgICAgdGhpcy5fU0VMRUNUX0RBVEVfID0gZXZlbnQ7XHJcbiAgICAgICAgbGV0IHZhbENoYW5nZVBhcmFtczogYW55ID0gJyc7XHJcbiAgICAgICAgaWYgKGV2ZW50LnNpbmdsZURhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGV2ZW50LnNpbmdsZURhdGUuZm9ybWF0dGVkO1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1hdGVkVmFsdWUgPSBldmVudC5zaW5nbGVEYXRlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgY29uc3QgcmV0dXJuRm9ybWF0dGVkID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKTtcclxuICAgICAgICAgICAgdmFsQ2hhbmdlUGFyYW1zID0geyAuLi5ldmVudC5zaW5nbGVEYXRlLCBmb3JtYXR0ZWQ6IGV2ZW50LnNpbmdsZURhdGUuZm9ybWF0dGVkLCByZXR1cm5Gb3JtYXR0ZWQgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfSA9IGV2ZW50LnNpbmdsZURhdGUuZGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb250aCAmJiAodGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ3l5eXknKSA9PT0gLTEgfHwgdGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ2RkJykgPT09IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmQgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyIHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBtb250aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF5IHx8IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgaG91ciB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZCB8fCAwXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlID0gbmQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB7IHllYXI6IG1pblllYXIsIG1vbnRoOiBtaW5Nb250aCwgZGF5OiBtaW5EYXksIGhvdXI6IG1pbkhvdXIsIG1pbnV0ZTogbWluTWludXRlLCBzZWNvbmQ6IG1pblNlY29uZCB9ID0gdGhpcy5taW5EYXRlO1xyXG4gICAgICAgICAgICBtaW5Nb250aCA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1pbk1vbnRoKTtcclxuICAgICAgICAgICAgbWluRGF5ID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWluRGF5KTtcclxuICAgICAgICAgICAgbWluSG91ciA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1pbkhvdXIpO1xyXG4gICAgICAgICAgICBtaW5NaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtaW5NaW51dGUpO1xyXG4gICAgICAgICAgICBtaW5TZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtaW5TZWNvbmQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgTUlOX0RBVEUgPSBuZXcgRGF0ZShgJHttaW5ZZWFyfS0ke21pbk1vbnRofS0ke21pbkRheX0gJHttaW5Ib3VyfToke21pbk1pbnV0ZX06JHttaW5TZWNvbmR9YCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1pbkRhdGUueWVhciAhPT0gMTg0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2VJblNlY29uZHMoTUlOX0RBVEUsIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSA9IE1JTl9EQVRFO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybShNSU5fREFURSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXhEYXRlLnllYXIgIT09IDEwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgeyB5ZWFyOiBtYXhZZWFyLCBtb250aDogbWF4TW9udGgsIGRheTogbWF4RGF5LCBob3VyOiBtYXhIb3VyLCBtYXh1dGU6IG1heE1pbnV0ZSwgc2Vjb25kOiBtYXhTZWNvbmQgfSA9IHRoaXMubWF4RGF0ZTtcclxuICAgICAgICAgICAgICAgIG1heE1vbnRoID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWF4TW9udGgpO1xyXG4gICAgICAgICAgICAgICAgbWF4RGF5ID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWF4RGF5KTtcclxuICAgICAgICAgICAgICAgIG1heEhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtYXhIb3VyKTtcclxuICAgICAgICAgICAgICAgIG1heE1pbnV0ZSA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1heE1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICBtYXhTZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtYXhTZWNvbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IE1BWF9EQVRFID0gbmV3IERhdGUoYCR7bWF4WWVhcn0tJHttYXhNb250aH0tJHttYXhEYXl9ICR7bWF4SG91cn06JHttYXhNaW51dGV9OiR7bWF4U2Vjb25kfWApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc2luZ2xlRGF0ZS5kYXRlLnllYXIgPT09IDE4NDAgfHwgZGlmZmVyZW5jZUluU2Vjb25kcyhNSU5fREFURSwgZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUpID09PSAwIHx8IGRpZmZlcmVuY2VJblNlY29uZHMoTUFYX0RBVEUsIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSA9IE1BWF9EQVRFO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybShNQVhfREFURSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHJldHVybkZvcm1hdHRlZCwgZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBldmVudC5kYXRlUmFuZ2UuZm9ybWF0dGVkO1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1hdGVkVmFsdWUgPSBldmVudC5kYXRlUmFuZ2UuZm9ybWF0dGVkO1xyXG4gICAgICAgICAgICBjb25zdCByZXR1cm5Gb3JtYXR0ZWQgPSBldmVudC5kYXRlUmFuZ2UucmV0dXJuRm9ybWF0dGVkO1xyXG4gICAgICAgICAgICAvLyBsZXQgcmV0dXJuRm9ybWF0dGVkID0gdGhpcy5kYXRlRnJvbShldmVudC5kYXRlUmFuZ2UucmV0dXJuRm9ybWF0dGVkKTtcclxuICAgICAgICAgICAgdmFsQ2hhbmdlUGFyYW1zID0geyAuLi5ldmVudC5kYXRlUmFuZ2UsIGZvcm1hdHRlZDogZXZlbnQuZGF0ZVJhbmdlLmZvcm1hdHRlZCwgcmV0dXJuRm9ybWF0dGVkIH07XHJcbiAgICAgICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHJldHVybkZvcm1hdHRlZCwgZXZlbnQuZGF0ZVJhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCgpO1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlQ2hhbmdlRW1pdHRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHZhbENoYW5nZVBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja011bHRpU2VsZWN0ZWRPcHRpb24oKSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNob3dUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1R5cGUgPSBTaG93VHlwZS5hbGw7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlRHluYW1pYyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8g6L+U5Zue5qC85byP5b+F6aG75YyF5ous5bm05pyI5pelXHJcbiAgICAgICAgICAgIGNvbnN0IGZtdExpc3QgPSBbJ3l5eXktTU0tZGQnLCAneXl5eS9NTS9kZCcsJ01NL2RkL3l5eXknLCd5eXl55bm0TU3mnIhkZOaXpScsJ3l5eXlNTWRkJ107XHJcbiAgICAgICAgICAgIGlmICghZm10TGlzdC5maW5kKG4gPT4gbiA9PT0gdGhpcy5yZXR1cm5Gb3JtYXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9ICd5eXl5LU1NLWRkJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFmbXRMaXN0LmZpbmQobiA9PiBuID09PSB0aGlzLmRhdGVGb3JtYXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSAneXl5eS1NTS1kZCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRPcHRpb25zKCkge1xyXG4gICAgICAgIGxldCBkYXRlT3B0czogYW55O1xyXG4gICAgICAgIGlmICghdGhpcy5sb2NhbERhdGVPcHRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cyA9IHRoaXMubG9jYWxlQ29uZmlnLmdldExvY2FsZU9wdGlvbnModGhpcy5sb2NhbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1R5cGUgPT09IFNob3dUeXBlLm5vRGF0ZUFuZE1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxEYXRlT3B0cy5kYXRlRm9ybWF0ID0gJ3l5eXknO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMucmV0dXJuRm9ybWF0ID0gJ3l5eXknO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKblhbflpIflkK/nlKjml6XmnJ/lpJrpgInnmoTmnaHku7ZcclxuICAgICAgICB0aGlzLmNoZWNrTXVsdGlTZWxlY3RlZE9wdGlvbigpO1xyXG5cclxuICAgICAgICBjb25zdCBfc2hvd1RpbWUgPSAoTnVtYmVyKHRoaXMuc2hvd1R5cGUpID09PSBTaG93VHlwZS5hbGwpID8gdGhpcy5zaG93VGltZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBkYXRlT3B0cyA9IHtcclxuICAgICAgICAgICAgZGF0ZVJhbmdlOiB0aGlzLmRhdGVSYW5nZSxcclxuICAgICAgICAgICAgc2hvd1RpbWU6IF9zaG93VGltZSxcclxuICAgICAgICAgICAgc2hvd1R5cGU6IE51bWJlcih0aGlzLnNob3dUeXBlKSxcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdDogdGhpcy5kYXRlRm9ybWF0ID8gdGhpcy5kYXRlRm9ybWF0IDogdGhpcy5sb2NhbERhdGVPcHRzLmRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgIHJldHVybkZvcm1hdDogdGhpcy5yZXR1cm5Gb3JtYXQgPyB0aGlzLnJldHVybkZvcm1hdCA6IHRoaXMubG9jYWxEYXRlT3B0cy5yZXR1cm5Gb3JtYXQsXHJcbiAgICAgICAgICAgIG1pblllYXI6IHRoaXMuX21pbkRhdGUueWVhcixcclxuICAgICAgICAgICAgbWF4WWVhcjogdGhpcy5fbWF4RGF0ZS55ZWFyLFxyXG4gICAgICAgICAgICBoaWdobGlnaHREYXRlczogdGhpcy5oaWdobGlnaHREYXRlcyxcclxuICAgICAgICAgICAgZGlzYWJsZURhdGVzOiB0aGlzLmRpc2FibGVEYXRlcyxcclxuICAgICAgICAgICAgc2hvd1dlZWtOdW1iZXJzOiB0aGlzLnNob3dXZWVrTnVtYmVycyxcclxuICAgICAgICAgICAgZGlzYWJsZURhdGVSYW5nZXM6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGhpcy5kaXNhYmxlRGF0ZVJhbmdlc0JlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogdGhpcy5kaXNhYmxlRGF0ZVJhbmdlc0VuZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBkaXNhYmxlVW50aWw6IHRoaXMuX21pbkRhdGUsXHJcbiAgICAgICAgICAgIGRpc2FibGVTaW5jZTogdGhpcy5fbWF4RGF0ZSxcclxuICAgICAgICAgICAgZGlzYWJsZVdlZWtkYXlzOiB0aGlzLmRpc2FibGVXZWVrZGF5cyxcclxuICAgICAgICAgICAgbWFya0RhdGVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXM6IHRoaXMubWFya0RhdGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLm1hcmtEYXRlc0NvbG9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG1hcmtXZWVrZW5kczoge1xyXG4gICAgICAgICAgICAgICAgbWFya2VkOiB0aGlzLmlzTWFya1dlZWtlbmRzLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMubWFya1dlZWtlbmRzQ29sb3JcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXI6IHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgIHNob3J0Y3V0czogdGhpcy5zaG9ydGN1dHMsXHJcbiAgICAgICAgICAgIHRpbWVGb3JtYXQ6IHRoaXMuX3RpbWVGb3JtYXQsXHJcbiAgICAgICAgICAgIG1vbnRoUmFuZ2VWYWx1ZTogdGhpcy5tb250aFJhbmdlVmFsdWUsXHJcbiAgICAgICAgICAgIHZpZXdUeXBlOiB0aGlzLnZpZXdUeXBlLFxyXG4gICAgICAgICAgICBlbmFibGVEeW5hbWljOiB0aGlzLmVuYWJsZUR5bmFtaWMsXHJcbiAgICAgICAgICAgIGR5bmFtaWNWYWx1ZTogdGhpcy5keW5hbWljVmFsdWUsXHJcbiAgICAgICAgICAgIGR5bmFtaWNWYWx1ZUNoYW5nZWQ6IChlOiBEeW5hbWljRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljVmFsdWUgPSBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljVGV4dCA9IGUgPyBlLnRleHQgOiAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMuZHluYW1pY1ZhbHVlID0gZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1ZhbHVlQ2hhbmdlLmVtaXQoZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJldmlvdXNNYXhEYXlzOiB0aGlzLnByZXZpb3VzTWF4RGF5cyxcclxuICAgICAgICAgICAgZnV0dXJlTWF4RGF5czogdGhpcy5mdXR1cmVNYXhEYXlzLFxyXG4gICAgICAgICAgICBkeW5hbWljTG9jYWxlOiB0aGlzLmxvY2FsRGF0ZU9wdHMuZHluYW1pY0xvY2FsZSxcclxuICAgICAgICAgICAgbXVsc3RpRGF0ZXNMb2NhbGU6IHRoaXMubG9jYWxEYXRlT3B0cy5tdWxzdGlEYXRlc0xvY2FsZSxcclxuICAgICAgICAgICAgc2hvd1ByZXNlbnQ6IHRoaXMuc2hvd1ByZXNlbnQsXHJcbiAgICAgICAgICAgIGhvdXJTdGVwOiB0aGlzLmhvdXJTdGVwLFxyXG4gICAgICAgICAgICBtaW51dGVTdGVwOiB0aGlzLm1pbnV0ZVN0ZXAsXHJcbiAgICAgICAgICAgIHNlY29uZFN0ZXA6IHRoaXMuc2Vjb25kU3RlcCxcclxuICAgICAgICAgICAgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdDogIXRoaXMubXVsdGlTZWxlY3QsXHJcbiAgICAgICAgICAgIG11bHRpU2VsZWN0OiB0aGlzLm11bHRpU2VsZWN0LFxyXG4gICAgICAgICAgICBzZXBhcmF0b3I6IHRoaXMuc2VwYXJhdG9yLFxyXG4gICAgICAgICAgICBtYXhTZWxlY3RlZDogdGhpcy5tYXhTZWxlY3RlZCxcclxuICAgICAgICAgICAgc2VsZWN0ZWRPcmRlckJ5OiB0aGlzLnNlbGVjdGVkT3JkZXJCeVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZGF0ZU9wdHMuZmlyc3REYXlPZldlZWsgPSB0aGlzLmZpcnN0RGF5T2ZXZWVrO1xyXG4gICAgICAgIHN3aXRjaCAoTnVtYmVyKHRoaXMuc2hvd1R5cGUpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgU2hvd1R5cGUubm9EYXRlOlxyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuZGVmYXVsdFZpZXcgPSBEZWZhdWx0Vmlldy5Nb250aDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNob3dUeXBlLm5vRGF0ZUFuZE1vbnRoOlxyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuZGVmYXVsdFZpZXcgPSBEZWZhdWx0Vmlldy5ZZWFyO1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZU9wdHMuZGF0ZUZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPcHRzLnJldHVybkZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGF0ZUZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNob3dUeXBlLnNlbGVjdFdlZWs6XHJcbiAgICAgICAgICAgICAgICBkYXRlT3B0cy5zaG93V2Vla051bWJlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuZGF0ZVJhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPcHRzLmZpcnN0RGF5T2ZXZWVrID0gJ21vJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMubG9jYWxEYXRlT3B0cywgLi4uZGF0ZU9wdHMgfTtcclxuICAgIH1cclxuXHJcbiAgICBkYXRlVG8oZDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA/IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA6IHRoaXMuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0O1xyXG4gICAgICAgIGNvbnN0IG1vbnRoTGFiZWxzID0gdGhpcy5kYXRlT3B0cy5tb250aExhYmVscyA/IHRoaXMuZGF0ZU9wdHMubW9udGhMYWJlbHMgOiB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHM7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLmRhdGVPcHRzLnNob3dUaW1lID8gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA6IHRoaXMuZGVmYXVsdENvbmZpZy5zaG93VGltZTtcclxuICAgICAgICBjb25zdCB5ZWFyID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoID0gZC5nZXRNb250aCgpICsgMTtcclxuICAgICAgICBjb25zdCBkYXkgPSBkLmdldERhdGUoKTtcclxuICAgICAgICBjb25zdCBob3VyID0gZC5nZXRIb3VycygpO1xyXG4gICAgICAgIGNvbnN0IG1pbnV0ZSA9IGQuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGQuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIGxldCBkYXRlOiBJTXlEYXRlO1xyXG4gICAgICAgIGlmICghc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgZGF0ZSA9IHsgeWVhciwgbW9udGgsIGRheSB9O1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpblRpbWUgPSB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0ZSA9IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyk7XHJcbiAgICB9XHJcbiAgICAvLyDov5Tlm57nnJ/lrp7ml6XmnJ8gRGF0ZSDnsbvlnotcclxuICAgIGRhdGVGcm9tKHN0cjogYW55LCBpZ25vclJhbmdlID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIXN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGVSYW5nZSA9IHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlID8gdGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UgOiB0aGlzLmRlZmF1bHRDb25maWcuZGF0ZVJhbmdlO1xyXG4gICAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgPyB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgOiB0aGlzLmRlZmF1bHRDb25maWcuZGF0ZUZvcm1hdDtcclxuICAgICAgICBjb25zdCByZXR1cm5Gb3JtYXQgPSB0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCA/IHRoaXMuZGF0ZU9wdHMucmV0dXJuRm9ybWF0IDogdGhpcy5kZWZhdWx0Q29uZmlnLnJldHVybkZvcm1hdDtcclxuICAgICAgICBjb25zdCBzaG93VGltZSA9IHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUgPyB0aGlzLmRhdGVPcHRzLnNob3dUaW1lIDogdGhpcy5kZWZhdWx0Q29uZmlnLnNob3dUaW1lO1xyXG4gICAgICAgIGNvbnN0IGRlbGltZXRlcnM6IEFycmF5PHN0cmluZz4gPSByZXR1cm5Gb3JtYXQubWF0Y2goL1teKERkTW1ZeSldezEsfS9nKTtcclxuICAgICAgICBsZXQgZGF0ZVZhbHVlOiBBcnJheTxJTXlEYXRlRm9ybWF0PjtcclxuICAgICAgICBjb25zdCBnZXRWYWx1ZSA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZVZhbHVlO1xyXG4gICAgICAgIGlmICgoZGF0ZVJhbmdlIHx8IHRoaXMuZGF0ZU9wdHMuc2hvd1R5cGUgPT09IFNob3dUeXBlLnNlbGVjdFdlZWspICYmICFpZ25vclJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRtcEJlZ2luID0gc3RyLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpWzBdO1xyXG4gICAgICAgICAgICBjb25zdCB0bXBFbmQgPSBzdHIuc3BsaXQodGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcilbMV07XHJcbiAgICAgICAgICAgIGxldCB0bXBCZWdpbkRhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRtcEJlZ2luLCB0aGlzLmRhdGVPcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgbGV0IHRtcEVuZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRtcEVuZCwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRtcEJlZ2luRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodG1wQmVnaW5EYXRlKSA/IHRtcEJlZ2luRGF0ZSA6IHRoaXMuZGF0ZU9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgICAgICB0bXBFbmREYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0bXBFbmREYXRlKSA/IHRtcEVuZERhdGUgOiB0aGlzLmRhdGVPcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0bXBCZWdpbkRhdGUsIHJldHVybkZvcm1hdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKSArXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICtcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0bXBFbmREYXRlLCByZXR1cm5Gb3JtYXQsIHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5UeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHIgJiYgc3RyIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udmVydChzdHIsIGdldFZhbHVlLCB0aGlzLm9yaWdpblRpbWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG1wRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQoc3RyLCB0aGlzLmRhdGVPcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wRGF0ZSwgcmV0dXJuRm9ybWF0LCB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb252ZXJ0KHYsIF9nZXRWYWx1ZTogYW55LCBvcmlnaW5UaW1lID0geyBob3VyOiAwLCBtaW51dGU6IDAsIHNlY29uZDogMCB9KSB7XHJcbiAgICAgICAgICAgIGxldCBmbXQgPSByZXR1cm5Gb3JtYXQ7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5yZXR1cm5UeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIGZtdCA9ICd5eXl5LU1NLWRkJyArIChzaG93VGltZSA/ICcgSEg6bW06c3MnIDogJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHYuc3BsaXQoJyAnKVswXTtcclxuICAgICAgICAgICAgICAgIGxldCB0aW1lID0gdi5zcGxpdCgnICcpWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVWYWx1ZSA9IF9nZXRWYWx1ZShkYXRlLCBmbXQsIGRlbGltZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGltZS5yZXBsYWNlKC9b5pe2LOWIhl0vZywgJzonKS5yZXBsYWNlKC9b56eSXS8sICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBbaCwgbSwgc10gPSB0aW1lLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91ciA9IGg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gbTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSBzID8gcyA6ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRlVmFsdWVbM10gPSB7IHZhbHVlOiBob3VyLCBmb3JtYXQ6ICdoaCcgfTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlVmFsdWVbNF0gPSB7IHZhbHVlOiBtaW51dGUsIGZvcm1hdDogJ21tJyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVZhbHVlWzVdID0geyB2YWx1ZTogc2Vjb25kLCBmb3JtYXQ6ICdzcycgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gdi5zcGxpdCgnICcpWzBdO1xyXG4gICAgICAgICAgICAgICAgZGF0ZVZhbHVlID0gX2dldFZhbHVlKGRhdGUsIGZtdCwgZGVsaW1ldGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgeWVhciA9IE51bWJlcihkYXRlVmFsdWVbMF0gPyBkYXRlVmFsdWVbMF0udmFsdWUgOiAxOTcwKTtcclxuICAgICAgICAgICAgY29uc3QgeWVhclZhbHVlID0gZGF0ZVZhbHVlWzBdO1xyXG4gICAgICAgICAgICBpZiAoeWVhclZhbHVlLmZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF5ZWFyVmFsdWUudmFsdWUgfHwgeWVhclZhbHVlLnZhbHVlLmxlbmd0aCAhPT0geWVhclZhbHVlLmZvcm1hdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9udGggPSBOdW1iZXIoZGF0ZVZhbHVlWzFdID8gZGF0ZVZhbHVlWzFdLnZhbHVlIDogMSkgLSAxO1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBOdW1iZXIoZGF0ZVZhbHVlWzJdID8gZGF0ZVZhbHVlWzJdLnZhbHVlIDogMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9ob3VyID0gZGF0ZVZhbHVlWzNdID8gTnVtYmVyKGRhdGVWYWx1ZVszXS52YWx1ZSkgOiBvcmlnaW5UaW1lLmhvdXI7XHJcbiAgICAgICAgICAgIGNvbnN0IF9taW51dGUgPSBkYXRlVmFsdWVbNF0gPyBOdW1iZXIoZGF0ZVZhbHVlWzRdLnZhbHVlKSA6IG9yaWdpblRpbWUubWludXRlO1xyXG4gICAgICAgICAgICBjb25zdCBfc2Vjb25kID0gZGF0ZVZhbHVlWzVdID8gTnVtYmVyKGRhdGVWYWx1ZVs1XS52YWx1ZSkgOiBvcmlnaW5UaW1lLnNlY29uZDtcclxuXHJcbiAgICAgICAgICAgIGlmICgheWVhcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXksIF9ob3VyLCBfbWludXRlLCBfc2Vjb25kKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNmb3JtKHZhbHVlOiBhbnksIF9mbXQgPSB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQpIHtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgOiAnJztcclxuICAgICAgICBjb25zdCB7IHJldHVybkZvcm1hdCwgZGF0ZUZvcm1hdCwgc2hvd1RpbWUgfSA9IHRoaXMuZGF0ZU9wdHM7XHJcbiAgICAgICAgbGV0IF90bXBEYXRlID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBfdG1wRGF0ZSA9IHBhcnNlKHZhbHVlLCByZXR1cm5Gb3JtYXQsIG5ldyBEYXRlKCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKF90bXBEYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX1NFTEVDVF9EQVRFXyAmJiB0aGlzLl9TRUxFQ1RfREFURV8uc2luZ2xlRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90bXBEYXRlID0gdGhpcy5fU0VMRUNUX0RBVEVfLnNpbmdsZURhdGUuanNEYXRlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVhbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90bXBEYXRlID0gIHBhcnNlKHRoaXMuX3JlYWxWYWx1ZSwgcmV0dXJuRm9ybWF0LCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBfdG1wRGF0ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmb3JtYXR0ZWRWYWwgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoaXNWYWxpZChfdG1wRGF0ZSkpIHtcclxuICAgICAgICAgICAgZm9ybWF0dGVkVmFsID0gdGhpcy5kdFNlcnZpY2UuZm9ybWF0VG8oX3RtcERhdGUsIF9mbXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWFvOWuueW5tOaciOaXpSzlubTmnIgs5bm05qC85byPXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvW+W5tCzmnIhdL2csICctJykucmVwbGFjZSgvW+aXpV0vLCAnJyk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cigwLCB2YWx1ZS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzVmFsaWQobmV3IERhdGUodmFsdWUpKSkge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsID0gdGhpcy5kdFNlcnZpY2UuZm9ybWF0VG8odmFsdWUsIF9mbXQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUZyb20odmFsdWUsIHRydWUpID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG1wRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRlT3B0cywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0OiByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbCA9IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0bXBEYXRlLCBfZm10LCB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWRWYWw7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF90bXBEYXRlQXJyID0gdmFsdWUuc3BsaXQodGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpblN0ciA9IF90bXBEYXRlQXJyWzBdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kU3RyID0gX3RtcERhdGVBcnJbMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdGhpcy50cmFuc2Zvcm0oYmVnaW5TdHIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW5kVmFsdWUgPSB0aGlzLnRyYW5zZm9ybShlbmRTdHIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX2JlZ2luVmFsdWUgJiYgdGhpcy5fZW5kVmFsdWUgPyB0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0odmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF90bXBEYXRlQXJyID0gdmFsdWUuc3BsaXQodGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luU3RyID0gX3RtcERhdGVBcnJbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFN0ciA9IF90bXBEYXRlQXJyWzFdO1xyXG4gICAgICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdGhpcy50cmFuc2Zvcm0oYmVnaW5TdHIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGVuZFN0cik7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLl9iZWdpblZhbHVlICYmIHRoaXMuX2VuZFZhbHVlID8gdGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlQnlUeXBlKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdEYXRlJztcclxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuZGF0ZVRvKHZhbCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gdmFsO1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpblN0ciA9IGJlZ2luIGluc3RhbmNlb2YgRGF0ZSA/IHRoaXMuZGF0ZVRvKGJlZ2luKSA6ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRTdHIgPSBiZWdpbiBpbnN0YW5jZW9mIERhdGUgPyB0aGlzLmRhdGVUbyhlbmQpIDogJyc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnT2JqZWN0JztcclxuICAgICAgICAgICAgcmV0dXJuIGJlZ2luU3RyICYmIGVuZFN0ciA/IGJlZ2luU3RyICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIGVuZFN0ciA6ICcnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWwuaW5kZXhPZignVCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKCdUJywgJyAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnU3RyaW5nJztcclxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3cml0ZVZhbHVlKHZhbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwgJiYgIWlzRGF0ZSh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNWYWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1RleHQgPSB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdER5bmFtaWNWYWx1ZSh2YWwsIHRoaXMuZGF0ZU9wdHMuZHluYW1pY0xvY2FsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzLnNob3dEeW5hbWljVmlldyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzLmR5bmFtaWNWYWx1ZSA9IHRoaXMuZHluYW1pY1ZhbHVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kYXRlT3B0cy5zaG93RHluYW1pY1ZpZXcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxSYW5nZVZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRWYWx1ZUJ5VHlwZSh2YWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsLnNwbGl0KHRoaXMuc2VwYXJhdG9yKS5tYXAobiA9PiB0aGlzLnRyYW5zZm9ybShuKSkuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBmbjtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkID0gZm47XHJcbiAgICB9XHJcbiAgICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBvblByZXZGb2N1cyh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYmVnaW5Gb2N1cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5kRm9jdXMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZEZvY3VzID0gIXRoaXMuZW5kRm9jdXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuUHJldkZvY3VzLmVtaXQoKTtcclxuICAgIH1cclxuICAgIG9uTmV4dEZvY3VzKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbmRGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuYmVnaW5Gb2N1cyA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Gb2N1cyA9ICF0aGlzLmJlZ2luRm9jdXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuTmV4dEZvY3VzLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jb252ZXJ0MmRhdGVTdHJpbmcodmFsOiBzdHJpbmcsIHJlYWxWYWx1ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICBsZXQgdCA9IHZhbC5yZXBsYWNlKC9b5bm0LOaciF0vZywgJy0nKS5yZXBsYWNlKC9b5pelLOWPt10vZywgJyAnKS5yZXBsYWNlKC9b5pe2LOeCuSzliIYs5YiG6ZKfXS9nLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dUeXBlID09PSBTaG93VHlwZS5ub0RhdGVBbmRNb250aCAmJiB0LmluZGV4T2YoJy0nKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHQgKz0gJy0nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDmm7/mjaLov57nu63nmoTnqbrmoLzlrZfnrKbkuLrljZXkuKrnqbrmoLxcclxuICAgICAgICAgICAgdmFyIGNoZWNrU3BhY2VSZWcgPSAvKFxccylcXDF7MSx9L2c7XHJcbiAgICAgICAgICAgIGlmICh0Lm1hdGNoKGNoZWNrU3BhY2VSZWcpKSB7XHJcbiAgICAgICAgICAgICAgICB0Lm1hdGNoKGNoZWNrU3BhY2VSZWcpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5bMF0gPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5yZXBsYWNlKG4sICAnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVhbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmpEYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh2YWwsIHRoaXMuZGF0ZU9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iakRhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgeyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZH0gPSBvYmpEYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgheWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaG91cikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWludXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlY29uZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGVQYXJ0ID0gYCR7eWVhcn0tJHt0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtb250aCl9LSR7dGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8oZGF5KX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF90aW1lUGFydCA9IGAke3RoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKGhvdXIpfToke3RoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1pbnV0ZSl9OiR7dGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8oc2Vjb25kKX1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7X2RhdGVQYXJ0fSAke190aW1lUGFydH1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodFt0Lmxlbmd0aCAtIDFdID09PSAnLScpIHtcclxuICAgICAgICAgICAgICAgIC8vIHQgPSB0LnN1YnN0cigwLCB0Lmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgdCArPSAnMDEnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodFt0Lmxlbmd0aCAtIDFdID09PSAnOicpIHtcclxuICAgICAgICAgICAgICAgIHQgPSB0LnN1YnN0cigwLCB0Lmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIF9pc1ZhbGlkKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB2YWx1ZSA9IHRoaXMuX2NvbnZlcnQyZGF0ZVN0cmluZyh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZigneXl5eScpID09PSAtMSB8fCB0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZignZGQnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF90bXBEYXRlID0gcGFyc2UodGhpcy52YWx1ZSwgdGhpcy5kYXRlRm9ybWF0LCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yZWFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5UeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQodGhpcy5fcmVhbFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZChuZXcgRGF0ZSh0aGlzLl9jb252ZXJ0MmRhdGVTdHJpbmcodGhpcy5fcmVhbFZhbHVlLCB0cnVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gaXNWYWxpZChwYXJzZSh0aGlzLl9yZWFsVmFsdWUsIHRoaXMucmV0dXJuRm9ybWF0LCBuZXcgRGF0ZSgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHZhbHVlLCB0aGlzLmRhdGVPcHRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQueWVhciB8fCBkLm1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IGNkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ciA9ICh0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCB8fCAneXl5eS1NTS1kZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgneXl5eScsICcnICsgKGQueWVhciB8fCB5ZWFyKSkucmVwbGFjZSgnTU0nLCAnJyArIGQubW9udGgpLnJlcGxhY2UoJ2RkJywgJzEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQobmV3IERhdGUoc3RyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZyA9IC9eXFxkezEsfSQvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSAmJiB0aGlzLmRhdGVGb3JtYXQuaW5kZXhPZigneXl5eU1NZGQnKSA+IC0xKSB7IC8vIOmqjOivgeS8oOWFpeeahOagvOW8j+S4uiB5eXl5TU1kZEhIbW1zc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yID0gIHRoaXMuX2lzVmFsaWQyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3IuaXNWYWxpZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChfci5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKF9yLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3IuaXNWYWxpZGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZSA9IHBhcnNlKHZhbHVlLCB0aGlzLmRhdGVGb3JtYXQsIG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHRoaXMudmFsdWUsIHRoaXMuZGF0ZU9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKF90bXBEYXRlKSB8fCB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pc1ZhbGlkMih2YWx1ZTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBsZXQgeWVhciA9IDA7XHJcbiAgICAgICAgbGV0IG1vbnRoID0gMDtcclxuICAgICAgICBsZXQgZGF5ID0gMDtcclxuICAgICAgICBsZXQgaG91ciA9IDA7XHJcbiAgICAgICAgbGV0IG1pbnV0ZSA9IDA7XHJcbiAgICAgICAgbGV0IHNlY29uZHMgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBkZiA9IHRoaXMuZGF0ZUZvcm1hdDtcclxuXHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCd5eXl5JykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gK3ZhbHVlLnNsaWNlKDAsIDQpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSg0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ01NJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtb250aCA9ICt2YWx1ZS5zbGljZSgwLCAyKSAtIDE7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtb250aCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdkZCcpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZGF5ID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ0hIJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBob3VyID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ21tJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW51dGUgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnc3MnKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZHMgPSArdmFsdWUuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZHMpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzVmFsaWRlZDogaXNWYWxpZChkKSxcclxuICAgICAgICAgICAgZGF0ZTogZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtdWx0aVNlbGVjdGVkQ2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFZhbHVlKTtcclxuICAgICAgICBjb25zdCBwID0ge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudmFsdWUsXHJcbiAgICAgICAgICAgIHJldHVybkZvcm1hdHRlZDogdGhpcy5fcmVhbFZhbHVlLFxyXG4gICAgICAgICAgICBjbXBSZWY6IHRoaXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoKTtcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlEYXRlU2VsKTtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQocCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVEYXRlKGQ6IHt2YWx1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyfSkge1xyXG4gICAgICAgIGlmICghZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHt2YWx1ZSwgaW5kZXh9ID0gZDtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zcGxpdCh0aGlzLnNlcGFyYXRvcikuZmlsdGVyKG4gPT4gbiE9PSB2YWx1ZSkuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5fcmVhbFZhbHVlLnNwbGl0KHRoaXMuc2VwYXJhdG9yKS5maWx0ZXIoKG4sIGkpID0+IGkgIT09IGluZGV4KS5qb2luKHRoaXMuc2VwYXJhdG9yKTtcclxuXHJcbiAgICAgICAgdGhpcy5tdWx0aVNlbGVjdGVkQ2hhbmdlZCgpO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxufVxyXG4iXX0=