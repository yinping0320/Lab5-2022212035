/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-09-04 07:40:04
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-09-04 15:21:46
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Injectable } from '@angular/core';
import { KeyCode, KeyName, ShowType } from '../enums/public-api';
import { D, DD, M, MM, MMM, YYYY, SU, MO, TU, WE, TH, FR, SA, ZERO_STR, EMPTY_STR } from '../constants/constants';
import { orderBy } from 'lodash-es';
export class UtilService {
    constructor() {
        this.weekDays = [SU, MO, TU, WE, TH, FR, SA];
    }
    /**
     * @param {?} dateStr
     * @param {?} options
     * @param {?=} isReturn
     * @return {?}
     */
    isDateValid(dateStr, options, isReturn = false) {
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        let _dateStr;
        /** @type {?} */
        let hour = 0;
        /** @type {?} */
        let minute = 0;
        /** @type {?} */
        let second = 0;
        /** @type {?} */
        const returnDate = this.resetDate();
        if (!dateStr || !dateStr.length) {
            return returnDate;
        }
        const { dateFormat, minYear, maxYear, monthLabels, showTime, returnFormat, showType } = options;
        /** @type {?} */
        let _st = showTime;
        /** @type {?} */
        let formatStr = dateFormat;
        if (isReturn) {
            formatStr = returnFormat.replace(/[年,月]/g, '-').replace(/[日]/, '').replace(/[时,分]/g, ':').replace(/[秒]/g, '');
            dateStr = dateStr.replace(/[年,月]/g, '-').replace(/[日]/, '').replace(/[时,分]/g, ':').replace(/[秒]/g, '');
            if (dateStr[dateStr.length - 1] === '-' || dateStr[dateStr.length - 1] === ':') {
                dateStr = dateStr.substring(0, dateStr.length - 1);
            }
            if (!showTime && returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1) {
                _st = true;
            }
        }
        /** @type {?} */
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        /** @type {?} */
        const isMonthStr = formatStr.indexOf(MMM) !== -1;
        /** @type {?} */
        let delimeters = formatStr.match(/[^(DdMmYy)]{1,}/g);
        if (_st && dateStr) {
            _dateStr = dateStr.split(' ')[0];
            Object.assign(returnDate, { hour: 0, minute: 0, second: 0 });
            /** @type {?} */
            const timeStr = dateStr.split(' ')[1];
            if (timeStr) {
                /** @type {?} */
                const _timer = timeStr.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (_timer[0]) {
                    hour = Number(_timer[0].substr(0, 2));
                    hour = isNaN(hour) ? 0 : hour;
                }
                if (_timer[1]) {
                    minute = Number(_timer[1].substr(0, 2));
                    minute = isNaN(minute) ? 0 : minute;
                }
                if (_timer[2]) {
                    second = Number(_timer[2].substr(0, 2));
                    second = isNaN(second) ? 0 : second;
                }
            }
            else {
                delimeters = undefined;
                /** @type {?} */
                const reg = /^\d{1,}$/;
                if (reg.test(dateStr)) { // 验证传入的格式为 yyyyMMddHHmmss
                    // 验证传入的格式为 yyyyMMddHHmmss
                    /** @type {?} */
                    const df = formatStr;
                    _dateStr = dateStr.substr(0, 8);
                    /** @type {?} */
                    let _timer = dateStr.substr(8);
                    if (_timer) {
                        if (df.includes('HH')) {
                            if (_timer) {
                                hour = +_timer.slice(0, 2);
                                _timer = _timer.slice(2);
                            }
                        }
                        if (df.includes('mm')) {
                            if (_timer) {
                                minute = +_timer.slice(0, 2);
                                _timer = _timer.slice(2);
                            }
                        }
                        if (df.includes('ss')) {
                            if (_timer) {
                                second = +_timer.slice(0, 2);
                            }
                        }
                    }
                }
            }
        }
        else {
            _dateStr = dateStr ? dateStr.split(' ')[0] : '';
        }
        /** @type {?} */
        const dateValue = this.getDateValue(_dateStr, formatStr, delimeters);
        /** @type {?} */
        const year = this.getNumberByValue(dateValue[0]);
        /** @type {?} */
        const month = isMonthStr
            ? this.getMonthNumberByMonthName(dateValue[1], monthLabels)
            : this.getNumberByValue(dateValue[1]);
        /** @type {?} */
        const day = this.getNumberByValue(dateValue[2]);
        if (showType === ShowType.noDateAndMonth) {
            return { year, month: 1, day: 1 };
        }
        if (month !== -1 && day !== -1 && year !== -1) {
            if (year < minYear || year > maxYear || month < 1 || month > 12) {
                return returnDate;
            }
            /** @type {?} */
            const date = _st ? { year, month, day, hour, minute, second } : { year, month, day };
            if (this.isDisabledDate(date, options)) {
                return returnDate;
            }
            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {
                daysInMonth[1] = 29;
            }
            if (day < 1 || day > daysInMonth[month - 1]) {
                return returnDate;
            }
            // Valid date
            if (options.showType === ShowType.noDate) {
                return { year: date.year, month: date.month };
            }
            else if (options.showType === ShowType.noDateAndMonth) {
                return { year: date.year };
            }
            else {
                return date;
            }
        }
        return returnDate;
    }
    /**
     * @param {?} dateRangeStr
     * @param {?} options
     * @return {?}
     */
    isDateValidDateRange(dateRangeStr, options) {
        /** @type {?} */
        let dateRange = {
            begin: this.resetDate(),
            end: this.resetDate()
        };
        if (dateRangeStr && dateRangeStr.length) {
            /** @type {?} */
            const dates = dateRangeStr.split(options.dateRangeDatesDelimiter);
            if (dates && dates.length === 2) {
                const [beginDate, endDate] = dates;
                /** @type {?} */
                const begin = this.isDateValid(beginDate, options, true);
                if (this.isInitializedDate(begin)) {
                    /** @type {?} */
                    const end = this.isDateValid(endDate, options, true);
                    if (this.isInitializedDate(end) && this.isDateSameOrEarlier(begin, end)) {
                        dateRange = { begin, end };
                    }
                }
            }
        }
        return dateRange;
    }
    /**
     * @param {?} dateStr
     * @param {?} dateFormat
     * @param {?} delimeters
     * @return {?}
     */
    getDateValue(dateStr, dateFormat, delimeters) {
        /** @type {?} */
        const da = [];
        if (delimeters) {
            /** @type {?} */
            let del = delimeters[0];
            if (delimeters[0] !== delimeters[1]) {
                del = delimeters[0] + delimeters[1];
                if (delimeters[2] && delimeters[1] !== delimeters[2]) {
                    del = del + delimeters[2];
                }
            }
            /** @type {?} */
            const re = new RegExp('[' + del + ']');
            /** @type {?} */
            const ds = dateStr.split(re);
            /** @type {?} */
            const df = dateFormat.split(re);
            for (let i = 0; i < df.length; i++) {
                if (df[i].indexOf(YYYY) !== -1) {
                    da[0] = { value: ds[i], format: df[i] };
                }
                if (df[i].indexOf(M) !== -1) {
                    da[1] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };
                }
                if (df[i].indexOf(D) !== -1) {
                    da[2] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };
                }
            }
        }
        else {
            /** @type {?} */
            const yearIndex = (dateFormat + '').indexOf(YYYY);
            /** @type {?} */
            const monthIndex = (dateFormat + '').indexOf(MM);
            /** @type {?} */
            const dayIndex = (dateFormat + '').indexOf(DD);
            if (yearIndex >= 0) {
                da[0] = { value: dateStr.substring(yearIndex, yearIndex + 4), format: dateFormat.substring(yearIndex, yearIndex + 4) };
            }
            if (monthIndex >= 0) {
                da[1] = { value: dateStr.substring(monthIndex, monthIndex + 2), format: dateFormat.substring(monthIndex, monthIndex + 2) };
            }
            if (dayIndex >= 0) {
                da[2] = { value: dateStr.substring(dayIndex, dayIndex + 2) || '01', format: dateFormat.substring(dayIndex, dayIndex + 2) };
            }
        }
        return da;
    }
    /**
     * @param {?} df
     * @param {?} monthLabels
     * @return {?}
     */
    getMonthNumberByMonthName(df, monthLabels) {
        if (df.value) {
            for (let key = 1; key <= 12; key++) {
                if (df.value.toLowerCase() === monthLabels[key].toLowerCase()) {
                    return key;
                }
            }
        }
        return -1;
    }
    /**
     * @param {?} df
     * @return {?}
     */
    getNumberByValue(df) {
        if (!df) {
            return 1;
        }
        if (!/^\d+$/.test(df.value)) {
            return -1;
        }
        /** @type {?} */
        let nbr = Number(df.value);
        if ((df.format.length === 1 && df.value.length !== 1 && nbr < 10) ||
            (df.format.length === 1 && df.value.length !== 2 && nbr >= 10)) {
            nbr = -1;
        }
        else if (df.format.length === 2 && df.value.length > 2) {
            nbr = -1;
        }
        return nbr;
    }
    /**
     * @param {?} monthString
     * @return {?}
     */
    parseDefaultMonth(monthString) {
        /** @type {?} */
        const month = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0 };
        if (monthString !== EMPTY_STR) {
            /** @type {?} */
            const split = monthString.split(monthString.match(/[^0-9]/)[0]);
            month.monthNbr = split[0].length === 2 ? Number(split[0]) : Number(split[1]);
            month.year = split[0].length === 2 ? Number(split[1]) : Number(split[0]);
        }
        return month;
    }
    /**
     * @param {?} date
     * @param {?} options
     * @return {?}
     */
    isDisabledDate(date, options) {
        const { minYear, maxYear, disableUntil, disableSince, disableWeekends, disableDates, disableDateRanges, disableWeekdays, enableDates } = options;
        // for (const d of enableDates) {
        //     if (
        //         (d.year === 0 || d.year === date.year) &&
        //         (d.month === 0 || d.month === date.month) &&
        //         d.day === date.day
        //     ) {
        //         return false;
        //     }
        // }
        if ((date.year < minYear && date.month === 12) || (date.year > maxYear && date.month === 1)) {
            return true;
        }
        /** @type {?} */
        const dateMs = this.getTimeInMilliseconds(date);
        if (this.isInitializedDate(disableUntil) && (dateMs + 24 * 60 * 60 * 1000 - 1) < this.getTimeInMilliseconds(disableUntil)) {
            return true;
        }
        if (this.isInitializedDate(disableSince) && dateMs > this.getTimeInMilliseconds(disableSince)) {
            return true;
        }
        if (disableWeekends) {
            /** @type {?} */
            const dayNbr = this.getDayNumber(date);
            if (dayNbr === 0 || dayNbr === 6) {
                return true;
            }
        }
        /** @type {?} */
        const dn = this.getDayNumber(date);
        if (disableWeekdays.length > 0) {
            for (const wd of disableWeekdays) {
                if (dn === this.getWeekdayIndex(wd)) {
                    return true;
                }
            }
        }
        for (const d of disableDates) {
            if ((d.year === 0 || d.year === date.year) &&
                (d.month === 0 || d.month === date.month) &&
                d.day === date.day) {
                return true;
            }
        }
        for (const d of disableDateRanges) {
            if (this.isInitializedDate(d.begin) &&
                this.isInitializedDate(d.end) &&
                dateMs >= this.getTimeInMilliseconds(d.begin) &&
                dateMs <= this.getTimeInMilliseconds(d.end)) {
                return true;
            }
        }
        return false;
    }
    /**
     * @param {?} date
     * @param {?} markedDates
     * @param {?} markWeekends
     * @return {?}
     */
    isMarkedDate(date, markedDates, markWeekends) {
        for (const md of markedDates) {
            for (const d of md.dates) {
                if ((d.year === 0 || d.year === date.year) &&
                    (d.month === 0 || d.month === date.month) &&
                    d.day === date.day) {
                    return { marked: true, color: md.color };
                }
            }
        }
        if (markWeekends && markWeekends.marked) {
            /** @type {?} */
            const dayNbr = this.getDayNumber(date);
            if (dayNbr === 0 || dayNbr === 6) {
                return { marked: true, color: markWeekends.color };
            }
        }
        return { marked: false, color: EMPTY_STR };
    }
    /**
     * @param {?} date
     * @param {?} sunHighlight
     * @param {?} satHighlight
     * @param {?} highlightDates
     * @return {?}
     */
    isHighlightedDate(date, sunHighlight, satHighlight, highlightDates) {
        /** @type {?} */
        const dayNbr = this.getDayNumber(date);
        if ((sunHighlight && dayNbr === 0) || (satHighlight && dayNbr === 6)) {
            return true;
        }
        for (const d of highlightDates) {
            if ((d.year === 0 || d.year === date.year) &&
                (d.month === 0 || d.month === date.month) &&
                d.day === date.day) {
                return true;
            }
        }
        return false;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getWeekNumber(date) {
        /** @type {?} */
        const d = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);
        d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));
        return Math.round((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000 / 7) + 1;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getNowWeekTime(date) {
        date.setDate(date.getDate() - ((date.getDay() + 6) % 7));
        /** @type {?} */
        const begin = {
            year: date.getFullYear(),
            month: date.getMonth() + 1,
            day: date.getDate()
        };
        date.setDate(date.getDate() + 6);
        /** @type {?} */
        const end = {
            year: date.getFullYear(),
            month: date.getMonth() + 1,
            day: date.getDate()
        };
        return { begin, end };
    }
    /**
     * @param {?} date
     * @param {?} disableUntil
     * @return {?}
     */
    isMonthDisabledByDisableUntil(date, disableUntil) {
        return (this.isInitializedDate(disableUntil) &&
            this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil));
    }
    /**
     * @param {?} date
     * @param {?} disableSince
     * @return {?}
     */
    isMonthDisabledByDisableSince(date, disableSince) {
        return (this.isInitializedDate(disableSince) &&
            this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince));
    }
    /**
     * @param {?} date
     * @param {?} dateRange
     * @param {?} dateFormat
     * @param {?} monthLabels
     * @param {?} rangeDelimiter
     * @param {?} returnFormat
     * @param {?=} dateStr
     * @return {?}
     */
    getDateModel(date, dateRange, dateFormat, monthLabels, rangeDelimiter, returnFormat, dateStr = EMPTY_STR) {
        /** @type {?} */
        let singleDateModel = null;
        /** @type {?} */
        let dateRangeModel = null;
        if (date) {
            singleDateModel = {
                date,
                jsDate: this.getDate2(date),
                formatted: dateStr.length ? dateStr : this.formatDate(date, dateFormat, monthLabels),
                returnFormatted: this.formatDate(date, returnFormat, monthLabels),
                epoc: this.getEpocTime(date)
            };
        }
        else {
            dateRangeModel = {
                beginDate: dateRange.begin,
                beginJsDate: this.getDate(dateRange.begin),
                beginEpoc: this.getEpocTime(dateRange.begin),
                endDate: dateRange.end,
                endJsDate: this.getDate(dateRange.end),
                endEpoc: this.getEpocTime(dateRange.end),
                formatted: this.formatDate(dateRange.begin, dateFormat, monthLabels) +
                    rangeDelimiter +
                    this.formatDate(dateRange.end, dateFormat, monthLabels),
                returnFormatted: this.formatDate(dateRange.begin, returnFormat, monthLabels) +
                    rangeDelimiter +
                    this.formatDate(dateRange.end, returnFormat, monthLabels),
            };
        }
        return {
            isRange: date === null,
            singleDate: singleDateModel,
            dateRange: dateRangeModel
        };
    }
    /**
     * @param {?} date
     * @param {?} dateFormat
     * @param {?} monthLabels
     * @return {?}
     */
    formatDate(date, dateFormat, monthLabels) {
        if (!date.month && dateFormat.indexOf(MM) === -1) {
            dateFormat = this.delete(dateFormat, MM);
        }
        if (!date.day && dateFormat.indexOf(DD) === -1) {
            dateFormat = this.delete(dateFormat, DD);
        }
        /** @type {?} */
        let formatted = dateFormat.replace(YYYY, String(date.year));
        if (dateFormat.indexOf(M) === -1) {
            formatted = formatted.replace(MM, '01');
        }
        else {
            if (dateFormat.indexOf(MMM) !== -1) {
                formatted = formatted.replace(MMM, monthLabels[date.month]);
            }
            else if (dateFormat.indexOf(MM) !== -1) {
                formatted = formatted.replace(MM, this.preZero(date.month || 1));
            }
            else {
                formatted = formatted.replace(M, String(date.month || 1));
            }
        }
        if (dateFormat.indexOf(DD) === -1) {
            formatted = formatted.replace(DD, '01');
        }
        else if (dateFormat.indexOf(DD) !== -1) {
            formatted = formatted.replace(DD, this.preZero(date.day || 1));
        }
        else {
            formatted = formatted.replace(D, String(date.day || 1));
        }
        formatted = formatted.replace('MM', 'mm').replace('HH', this.preZero(date.hour || 0))
            .replace('mm', this.preZero(date.minute || 0))
            .replace('ss', this.preZero(date.second || 0));
        return formatted && formatted.length > 2 ? formatted : '';
    }
    /**
     * @param {?} format
     * @param {?} delStr
     * @return {?}
     */
    delete(format, delStr) {
        /** @type {?} */
        const re = format.match(/[^(DdMmYy)]{1,}/g);
        /** @type {?} */
        const index = format.indexOf(delStr);
        if (index < 0) {
            return format;
        }
        else if (index === 0) {
            if (re) {
                return format.substring(3);
            }
            else {
                return format.substring(2);
            }
        }
        else if (index + 2 === format.length) {
            if (re) {
                return format.substring(0, format.length - 3);
            }
            else {
                return format.substring(0, format.length - 2);
            }
        }
        else {
            if (re) {
                return format.substring(0, index) + format.substring(index + 3);
            }
            else {
                return format.substring(0, index) + format.substring(index + 2);
            }
        }
    }
    /**
     * @param {?} model
     * @return {?}
     */
    getFormattedDate(model) {
        return !model.isRange ? model.singleDate.formatted : model.dateRange.formatted;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    preZero(val) {
        return val < 10 ? ZERO_STR + Number(val) : String(val);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    isInitializedDate(date) {
        return date && date.year !== 0 && date.month !== 0 && date.day !== 0;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    isInitializedMonth(date) {
        return date && date.year !== 0 && date.month !== 0;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    isInitializedYear(date) {
        return date && date.year !== 0;
    }
    /**
     * @param {?} firstDate
     * @param {?} secondDate
     * @return {?}
     */
    isDateEarlier(firstDate, secondDate) {
        return this.getTimeInMilliseconds(firstDate) < this.getTimeInMilliseconds(secondDate);
    }
    /**
     * @param {?} firstDate
     * @param {?} secondDate
     * @return {?}
     */
    isDateSameOrEarlier(firstDate, secondDate) {
        return this.getTimeInMilliseconds(firstDate) <= this.getTimeInMilliseconds(secondDate);
    }
    /**
     * @param {?} firstDate
     * @param {?} secondDate
     * @return {?}
     */
    isDateSame(firstDate, secondDate) {
        return this.getTimeInMilliseconds(firstDate) === this.getTimeInMilliseconds(secondDate);
    }
    /**
     * @param {?} dateRange
     * @param {?} date
     * @return {?}
     */
    isDateRangeBeginOrEndSame(dateRange, date) {
        /** @type {?} */
        const dateMs = this.getTimeInMilliseconds(date);
        return (this.getTimeInMilliseconds(dateRange.begin) === dateMs ||
            this.getTimeInMilliseconds(dateRange.end) === dateMs);
    }
    /**
     * @param {?} date
     * @param {?} dateRange
     * @return {?}
     */
    isDateInRange(date, dateRange) {
        if (!this.isInitializedDate(dateRange.begin) || !this.isInitializedDate(dateRange.end)) {
            return false;
        }
        return this.isDateSameOrEarlier(dateRange.begin, date) && this.isDateSameOrEarlier(date, dateRange.end);
    }
    /**
     * @return {?}
     */
    resetDate() {
        return { year: 0, month: 0, day: 0 };
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getTimeInMilliseconds(date) {
        return this.getDate(date).getTime();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getDate2(date) {
        /** @type {?} */
        const now = new Date();
        if (!date.year) {
            date.year = now.getFullYear();
        }
        if (!date.month) {
            date.month = now.getMonth() + 1;
        }
        if (!date.day) {
            date.day = 1;
        }
        return new Date(date.year, date.month - 1, date.day, date.hour ? date.hour : 0, date.minute ? date.minute : 0, date.second ? date.second : 0, 0);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getDate(date) {
        return new Date(date.year || 0, date.month ? date.month - 1 : 0, date.day || 0, date.hour ? date.hour : 0, date.minute ? date.minute : 0, date.second ? date.second : 0, 0);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getDayNumber(date) {
        return new Date(date.year, date.month - 1, date.day, date.hour ? date.hour : 0, date.minute ? date.minute : 0, date.second ? date.second : 0, 0).getDay();
    }
    /**
     * @param {?} wd
     * @return {?}
     */
    getWeekdayIndex(wd) {
        return this.weekDays.indexOf(wd);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getEpocTime(date) {
        return Math.round(this.getTimeInMilliseconds(date) / 1000.0);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getKeyCodeFromEvent(event) {
        /** @type {?} */
        const key = event.key || event.keyCode;
        if (key === KeyName.enter || key === KeyCode.enter) {
            return KeyCode.enter;
        }
        else if (key === KeyName.esc || key === KeyCode.esc) {
            return KeyCode.esc;
        }
        else if (key === KeyName.space || key === KeyCode.space) {
            return KeyCode.space;
        }
        else if (key === KeyName.leftArrow || key === KeyCode.leftArrow) {
            return KeyCode.leftArrow;
        }
        else if (key === KeyName.upArrow || key === KeyCode.upArrow) {
            return KeyCode.upArrow;
        }
        else if (key === KeyName.rightArrow || key === KeyCode.rightArrow) {
            return KeyCode.rightArrow;
        }
        else if (key === KeyName.downArrow || key === KeyCode.downArrow) {
            return KeyCode.downArrow;
        }
        else if (key === KeyName.tab || key === KeyCode.tab) {
            return KeyCode.tab;
        }
        else if (key === KeyName.shift || key === KeyCode.shift) {
            return KeyCode.shift;
        }
        else {
            return null;
        }
    }
    /**
     * @param {?} now
     * @param {?} min
     * @param {?} max
     * @return {?}
     */
    getNearDate(now, min, max) {
        /** @type {?} */
        const minMilliseconds = this.getTimeInMilliseconds(min);
        /** @type {?} */
        const maxMilliseconds = this.getTimeInMilliseconds(max);
        /** @type {?} */
        const nowMilliseconds = this.getTimeInMilliseconds(now);
        if (maxMilliseconds - nowMilliseconds > nowMilliseconds - minMilliseconds) {
            return min;
        }
        else {
            return max;
        }
    }
    // 禁用时间对应的小时
    // 选中日期等于左区间日期时，禁用左端点的左部分[0，minHour）
    // 选中日期等于右区间日期时，禁用右端点的右部分(maxHour,23]
    /**
     * @param {?} min
     * @param {?} max
     * @param {?} currentDate
     * @return {?}
     */
    disabledHours(min, max, currentDate) {
        /** @type {?} */
        let minHour = min.hour;
        /** @type {?} */
        let maxHour = max.hour;
        /** @type {?} */
        let res = [];
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {
            while (minHour-- >= 0) {
                res.push(minHour);
            }
        }
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {
            while (maxHour++ < 24) {
                res.push(maxHour);
            }
        }
        return res;
    }
    //禁用时间对应的分钟 
    //选中日期等于左区间日期时，禁用左端点的左部分[0，minMinute）
    //选中日期等于右区间日期时，禁用右端点的右部分（maxMinute，59]
    /**
     * @param {?} min
     * @param {?} max
     * @param {?} _hour
     * @param {?} currentDate
     * @return {?}
     */
    disabledMinutes(min, max, _hour, currentDate) {
        /** @type {?} */
        let maxHour = max.hour;
        /** @type {?} */
        let maxMinute = max.minute;
        /** @type {?} */
        let minHour = min.hour;
        /** @type {?} */
        let minMinute = min.minute;
        /** @type {?} */
        let res = [];
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {
            if (_hour == minHour) {
                while (minMinute-- >= 0) {
                    res.push(minMinute);
                }
            }
        }
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {
            if (_hour == maxHour) {
                while (maxMinute++ < 60) {
                    res.push(maxMinute);
                }
            }
        }
        return res;
    }
    //禁用时间对应的秒 
    //选中日期等于左区间日期时，禁用左端点的左部分[0，minSecond）
    //选中日期等于右区间日期时，禁用右端点的右部分（maxSecond，59]
    /**
     * @param {?} min
     * @param {?} max
     * @param {?} _hour
     * @param {?} _minute
     * @param {?} currentDate
     * @return {?}
     */
    disabledSeconds(min, max, _hour, _minute, currentDate) {
        /** @type {?} */
        let maxHour = max.hour;
        /** @type {?} */
        let maxMinute = max.minute;
        /** @type {?} */
        let maxSecond = max.second;
        /** @type {?} */
        let minHour = min.hour;
        /** @type {?} */
        let minMinute = min.minute;
        /** @type {?} */
        let minSecond = min.second;
        /** @type {?} */
        let res = [];
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {
            if (_hour == minHour && _minute == minMinute) {
                while (minSecond-- >= 0) {
                    res.push(minSecond);
                }
            }
        }
        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {
            if (_hour == maxHour && _minute == maxMinute) {
                while (maxSecond++ < 60) {
                    res.push(maxSecond);
                }
            }
        }
        return res;
    }
    /**
     * @private
     * @param {?} dt
     * @param {?} dynamicLocale
     * @return {?}
     */
    getDateTypeString(dt, dynamicLocale) {
        switch (dt) {
            case 'week':
                return dynamicLocale.week || '周';
            case 'day':
                return dynamicLocale.day || '天';
            case 'month':
                return dynamicLocale.month || '月';
            case 'year':
                return dynamicLocale.year || '年';
        }
    }
    /**
     * @param {?} val
     * @param {?} dynamicLocale
     * @return {?}
     */
    formatDynamicValue(val, dynamicLocale) {
        if (val) {
            /** @type {?} */
            let fval = '';
            switch (val.name) {
                case 'present_day': // 今天
                    fval = dynamicLocale.today || '今天';
                    break;
                case 'present_month': // 本月
                    fval = dynamicLocale.presentMonth || '本月';
                    break;
                case 'present_year':
                    fval = dynamicLocale.presentYear || '本年';
                    break;
                case 'previou':
                    fval = (dynamicLocale.previous || '过去') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType, dynamicLocale);
                    break;
                case 'future':
                    fval = (dynamicLocale.future || '未来') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType, dynamicLocale);
                    break;
                case 'present_first':
                    fval = (dynamicLocale.current || '本') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.first || '第 1 天');
                    break;
                case 'present_last':
                    fval = (dynamicLocale.current || '本') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.last || '最后 1 天');
                    break;
            }
            return fval;
        }
        else {
            return '';
        }
    }
    /**
     * @param {?} str
     * @return {?}
     */
    padStartZero(str) {
        if (str != null && str !== undefined) {
            return ('' + str).padStart(2, '0');
        }
        return '00';
    }
    /**
     * @param {?} items
     * @param {?=} order
     * @return {?}
     */
    orderSelectedDates(items, order = 'none') {
        if (order !== 'asc' && order !== 'desc') {
            order = 'none';
        }
        if (order === 'none') {
            return items;
        }
        return orderBy(items, ['year', 'month', 'day'], [order, order, order]);
    }
}
UtilService.decorators = [
    { type: Injectable }
];
if (false) {
    /** @type {?} */
    UtilService.prototype.weekDays;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLWRhdGVwaWNrZXIudXRpbC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL2ZhcnJpcy1kYXRlcGlja2VyLnV0aWwuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFRQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBYzNDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBR2xILE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFJcEMsTUFBTSxPQUFPLFdBQVc7SUFEeEI7UUFFSSxhQUFRLEdBQWtCLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUEyd0IzRCxDQUFDOzs7Ozs7O0lBendCRyxXQUFXLENBQUMsT0FBZSxFQUFFLE9BQW1CLEVBQUUsUUFBUSxHQUFHLEtBQUs7OztZQUUxRCxRQUFnQjs7WUFBRSxJQUFJLEdBQUcsQ0FBQzs7WUFBRSxNQUFNLEdBQUcsQ0FBQzs7WUFBRSxNQUFNLEdBQUcsQ0FBQzs7Y0FFaEQsVUFBVSxHQUFZLElBQUksQ0FBQyxTQUFTLEVBQUU7UUFFNUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7WUFDN0IsT0FBTyxVQUFVLENB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QUFDLEtBQUssRUFBRSxRQUE4QixNQUFNO1FBQzFELElBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxLQUFLLEtBQUssTUFBTSxFQUFFO1lBQ3JDLEtBQUssR0FBRyxNQUFNLENBQUM7U0FDbEI7UUFFRCxJQUFJLEtBQUssS0FBSyxNQUFNLEVBQUU7WUFDbEIsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzNFLENBQUM7OztZQTV3QkosVUFBVTs7OztJQUVQLCtCQUF1RCIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQERhdGU6IDIwMTktMDktMDQgMDc6NDA6MDRcclxuICogQExhc3RFZGl0b3JzOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMDktMDQgMTU6MjE6NDZcclxuICogQFFROiAxMDU1ODE4MjM5XHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIElNeURhdGVNb2RlbCxcclxuICAgIElNeVNpbmdsZURhdGVNb2RlbCxcclxuICAgIElNeURhdGVSYW5nZU1vZGVsLFxyXG4gICAgSU15RGF0ZSxcclxuICAgIElNeURhdGVSYW5nZSxcclxuICAgIElNeU1vbnRoLFxyXG4gICAgSU15TW9udGhMYWJlbHMsXHJcbiAgICBJTXlNYXJrZWREYXRlcyxcclxuICAgIElNeU1hcmtlZERhdGUsXHJcbiAgICBJTXlEYXRlRm9ybWF0LFxyXG4gICAgSU15T3B0aW9uc1xyXG59IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IEtleUNvZGUsIEtleU5hbWUsIFNob3dUeXBlIH0gZnJvbSAnLi4vZW51bXMvcHVibGljLWFwaSc7XHJcbmltcG9ydCB7IEQsIERELCBNLCBNTSwgTU1NLCBZWVlZLCBTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQSwgWkVST19TVFIsIEVNUFRZX1NUUiB9IGZyb20gJy4uL2NvbnN0YW50cy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBEeW5hbWljRGF0YSwgRHluYW1pY0RhdGVUeXBlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9keW5hbWljLWRhdGEtdHlwZS5pbnRlcmZhY2UnO1xyXG5cclxuaW1wb3J0IHsgb3JkZXJCeSB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCB7IE11bHRpU2VsZWN0ZWRPcmRlckJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9teS1vcHRpb25zLmludGVyZmFjZSc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBVdGlsU2VydmljZSB7XHJcbiAgICB3ZWVrRGF5czogQXJyYXk8c3RyaW5nPiA9IFtTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQV07XHJcblxyXG4gICAgaXNEYXRlVmFsaWQoZGF0ZVN0cjogc3RyaW5nLCBvcHRpb25zOiBJTXlPcHRpb25zLCBpc1JldHVybiA9IGZhbHNlKTogSU15RGF0ZSB7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm9uZS12YXJpYWJsZS1wZXItZGVjbGFyYXRpb25cclxuICAgICAgICBsZXQgX2RhdGVTdHI6IHN0cmluZywgaG91ciA9IDAsIG1pbnV0ZSA9IDAsIHNlY29uZCA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJldHVybkRhdGU6IElNeURhdGUgPSB0aGlzLnJlc2V0RGF0ZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWRhdGVTdHIgfHwgIWRhdGVTdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5EYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtaW5ZZWFyLCBtYXhZZWFyLCBtb250aExhYmVscywgc2hvd1RpbWUsIHJldHVybkZvcm1hdCwgc2hvd1R5cGUgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgbGV0IF9zdCA9IHNob3dUaW1lO1xyXG4gICAgICAgIGxldCBmb3JtYXRTdHIgPSBkYXRlRm9ybWF0O1xyXG4gICAgICAgIGlmIChpc1JldHVybikge1xyXG4gICAgICAgICAgICBmb3JtYXRTdHIgPSByZXR1cm5Gb3JtYXQucmVwbGFjZSgvW+W5tCzmnIhdL2csICctJykucmVwbGFjZSgvW+aXpV0vLCAnJykucmVwbGFjZSgvW+aXtizliIZdL2csICc6JykucmVwbGFjZSgvW+enkl0vZywgJycpO1xyXG4gICAgICAgICAgICBkYXRlU3RyID0gZGF0ZVN0ci5yZXBsYWNlKC9b5bm0LOaciF0vZywgJy0nKS5yZXBsYWNlKC9b5pelXS8sICcnKS5yZXBsYWNlKC9b5pe2LOWIhl0vZywgJzonKS5yZXBsYWNlKC9b56eSXS9nLCAnJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZVN0cltkYXRlU3RyLmxlbmd0aCAtIDFdID09PSAnLScgfHwgZGF0ZVN0cltkYXRlU3RyLmxlbmd0aCAtIDFdID09PSAnOicpIHtcclxuICAgICAgICAgICAgICAgIGRhdGVTdHIgPSBkYXRlU3RyLnN1YnN0cmluZygwLCBkYXRlU3RyLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNob3dUaW1lICYmIHJldHVybkZvcm1hdC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2hoOm1tJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgX3N0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF5c0luTW9udGg6IEFycmF5PG51bWJlcj4gPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XHJcbiAgICAgICAgY29uc3QgaXNNb250aFN0cjogYm9vbGVhbiA9IGZvcm1hdFN0ci5pbmRleE9mKE1NTSkgIT09IC0xO1xyXG4gICAgICAgIGxldCBkZWxpbWV0ZXJzOiBBcnJheTxzdHJpbmc+ID0gZm9ybWF0U3RyLm1hdGNoKC9bXihEZE1tWXkpXXsxLH0vZyk7XHJcbiAgICAgICAgaWYgKF9zdCAmJiBkYXRlU3RyKSB7XHJcbiAgICAgICAgICAgIF9kYXRlU3RyID0gZGF0ZVN0ci5zcGxpdCgnICcpWzBdO1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJldHVybkRhdGUsIHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVTdHIgPSBkYXRlU3RyLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgICAgIGlmICh0aW1lU3RyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdGltZXIgPSB0aW1lU3RyLnJlcGxhY2UoJ+aXticsICc6JykucmVwbGFjZSgn5YiGJywgJzonKS5yZXBsYWNlKCfnp5InLCAnJykuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGltZXJbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3VyID0gTnVtYmVyKF90aW1lclswXS5zdWJzdHIoMCwgMikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhvdXIgPSBpc05hTihob3VyKSA/IDAgOiBob3VyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF90aW1lclsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA9IE51bWJlcihfdGltZXJbMV0uc3Vic3RyKDAsIDIpKTtcclxuICAgICAgICAgICAgICAgICAgICBtaW51dGUgPSBpc05hTihtaW51dGUpID8gMCA6IG1pbnV0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RpbWVyWzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gTnVtYmVyKF90aW1lclsyXS5zdWJzdHIoMCwgMikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZCA9IGlzTmFOKHNlY29uZCkgPyAwIDogc2Vjb25kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVsaW1ldGVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZyA9IC9eXFxkezEsfSQvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZy50ZXN0KGRhdGVTdHIpKSB7IC8vIOmqjOivgeS8oOWFpeeahOagvOW8j+S4uiB5eXl5TU1kZEhIbW1zc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRmID0gZm9ybWF0U3RyO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kYXRlU3RyID0gZGF0ZVN0ci5zdWJzdHIoMCwgOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IF90aW1lciA9IGRhdGVTdHIuc3Vic3RyKDgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdISCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91ciA9ICtfdGltZXIuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RpbWVyID0gX3RpbWVyLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZi5pbmNsdWRlcygnbW0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZSA9ICtfdGltZXIuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RpbWVyID0gX3RpbWVyLnNsaWNlKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZi5pbmNsdWRlcygnc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZCA9ICtfdGltZXIuc2xpY2UoMCwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfZGF0ZVN0ciA9IGRhdGVTdHIgPyBkYXRlU3RyLnNwbGl0KCcgJylbMF0gOiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZVZhbHVlOiBBcnJheTxJTXlEYXRlRm9ybWF0PiA9IHRoaXMuZ2V0RGF0ZVZhbHVlKF9kYXRlU3RyLCBmb3JtYXRTdHIsIGRlbGltZXRlcnMpO1xyXG5cclxuICAgICAgICBjb25zdCB5ZWFyOiBudW1iZXIgPSB0aGlzLmdldE51bWJlckJ5VmFsdWUoZGF0ZVZhbHVlWzBdKTtcclxuICAgICAgICBjb25zdCBtb250aDogbnVtYmVyID0gaXNNb250aFN0clxyXG4gICAgICAgICAgICA/IHRoaXMuZ2V0TW9udGhOdW1iZXJCeU1vbnRoTmFtZShkYXRlVmFsdWVbMV0sIG1vbnRoTGFiZWxzKVxyXG4gICAgICAgICAgICA6IHRoaXMuZ2V0TnVtYmVyQnlWYWx1ZShkYXRlVmFsdWVbMV0pO1xyXG4gICAgICAgIGNvbnN0IGRheTogbnVtYmVyID0gdGhpcy5nZXROdW1iZXJCeVZhbHVlKGRhdGVWYWx1ZVsyXSk7XHJcblxyXG4gICAgICAgIGlmIChzaG93VHlwZSA9PT0gU2hvd1R5cGUubm9EYXRlQW5kTW9udGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgeWVhciwgbW9udGg6IDEsIGRheTogMSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1vbnRoICE9PSAtMSAmJiBkYXkgIT09IC0xICYmIHllYXIgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGlmICh5ZWFyIDwgbWluWWVhciB8fCB5ZWFyID4gbWF4WWVhciB8fCBtb250aCA8IDEgfHwgbW9udGggPiAxMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVybkRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IF9zdCA/IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQgfSA6IHsgeWVhciwgbW9udGgsIGRheSB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZERhdGUoZGF0ZSwgb3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5EYXRlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoeWVhciAlIDQwMCA9PT0gMCB8fCAoeWVhciAlIDEwMCAhPT0gMCAmJiB5ZWFyICUgNCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgICAgIGRheXNJbk1vbnRoWzFdID0gMjk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkYXkgPCAxIHx8IGRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5EYXRlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZCBkYXRlXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNob3dUeXBlID09PSBTaG93VHlwZS5ub0RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHllYXI6IGRhdGUueWVhciwgbW9udGg6IGRhdGUubW9udGggfTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnNob3dUeXBlID09PSBTaG93VHlwZS5ub0RhdGVBbmRNb250aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeWVhcjogZGF0ZS55ZWFyIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0dXJuRGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBpc0RhdGVWYWxpZERhdGVSYW5nZShkYXRlUmFuZ2VTdHI6IHN0cmluZywgb3B0aW9uczogSU15T3B0aW9ucyk6IElNeURhdGVSYW5nZSB7XHJcbiAgICAgICAgbGV0IGRhdGVSYW5nZTogSU15RGF0ZVJhbmdlID0ge1xyXG4gICAgICAgICAgICBiZWdpbjogdGhpcy5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgZW5kOiB0aGlzLnJlc2V0RGF0ZSgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoZGF0ZVJhbmdlU3RyICYmIGRhdGVSYW5nZVN0ci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZXM6IEFycmF5PHN0cmluZz4gPSBkYXRlUmFuZ2VTdHIuc3BsaXQob3B0aW9ucy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlcik7XHJcbiAgICAgICAgICAgIGlmIChkYXRlcyAmJiBkYXRlcy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtiZWdpbkRhdGUsIGVuZERhdGVdID0gZGF0ZXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpbjogSU15RGF0ZSA9IHRoaXMuaXNEYXRlVmFsaWQoYmVnaW5EYXRlLCBvcHRpb25zLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGJlZ2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZDogSU15RGF0ZSA9IHRoaXMuaXNEYXRlVmFsaWQoZW5kRGF0ZSwgb3B0aW9ucywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGVuZCkgJiYgdGhpcy5pc0RhdGVTYW1lT3JFYXJsaWVyKGJlZ2luLCBlbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZSA9IHsgYmVnaW4sIGVuZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0ZVJhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGVWYWx1ZShkYXRlU3RyOiBzdHJpbmcsIGRhdGVGb3JtYXQ6IHN0cmluZywgZGVsaW1ldGVyczogQXJyYXk8c3RyaW5nPik6IEFycmF5PElNeURhdGVGb3JtYXQ+IHtcclxuICAgICAgICBjb25zdCBkYTogQXJyYXk8SU15RGF0ZUZvcm1hdD4gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKGRlbGltZXRlcnMpIHtcclxuICAgICAgICAgICAgbGV0IGRlbDogc3RyaW5nID0gZGVsaW1ldGVyc1swXTtcclxuICAgICAgICAgICAgaWYgKGRlbGltZXRlcnNbMF0gIT09IGRlbGltZXRlcnNbMV0pIHtcclxuICAgICAgICAgICAgICAgIGRlbCA9IGRlbGltZXRlcnNbMF0gKyBkZWxpbWV0ZXJzWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGltZXRlcnNbMl0gJiYgZGVsaW1ldGVyc1sxXSAhPT0gZGVsaW1ldGVyc1syXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbCA9IGRlbCArIGRlbGltZXRlcnNbMl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmU6IGFueSA9IG5ldyBSZWdFeHAoJ1snICsgZGVsICsgJ10nKTtcclxuICAgICAgICAgICAgY29uc3QgZHM6IEFycmF5PHN0cmluZz4gPSBkYXRlU3RyLnNwbGl0KHJlKTtcclxuICAgICAgICAgICAgY29uc3QgZGY6IEFycmF5PHN0cmluZz4gPSBkYXRlRm9ybWF0LnNwbGl0KHJlKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRmW2ldLmluZGV4T2YoWVlZWSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFbMF0gPSB7IHZhbHVlOiBkc1tpXSwgZm9ybWF0OiBkZltpXSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRmW2ldLmluZGV4T2YoTSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFbMV0gPSBkc1tpXSA9PT0gdW5kZWZpbmVkID8geyB2YWx1ZTogJzEnLCBmb3JtYXQ6IGRmW2ldIH0gOiB7IHZhbHVlOiBkc1tpXSwgZm9ybWF0OiBkZltpXSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRmW2ldLmluZGV4T2YoRCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFbMl0gPSBkc1tpXSA9PT0gdW5kZWZpbmVkID8geyB2YWx1ZTogJzEnLCBmb3JtYXQ6IGRmW2ldIH0gOiB7IHZhbHVlOiBkc1tpXSwgZm9ybWF0OiBkZltpXSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhckluZGV4ID0gKGRhdGVGb3JtYXQgKyAnJykuaW5kZXhPZihZWVlZKTtcclxuICAgICAgICAgICAgY29uc3QgbW9udGhJbmRleCA9IChkYXRlRm9ybWF0ICsgJycpLmluZGV4T2YoTU0pO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlJbmRleCA9IChkYXRlRm9ybWF0ICsgJycpLmluZGV4T2YoREQpO1xyXG4gICAgICAgICAgICBpZiAoeWVhckluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGRhWzBdID0geyB2YWx1ZTogZGF0ZVN0ci5zdWJzdHJpbmcoeWVhckluZGV4LCB5ZWFySW5kZXggKyA0KSwgZm9ybWF0OiBkYXRlRm9ybWF0LnN1YnN0cmluZyh5ZWFySW5kZXgsIHllYXJJbmRleCArIDQpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1vbnRoSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGFbMV0gPSB7IHZhbHVlOiBkYXRlU3RyLnN1YnN0cmluZyhtb250aEluZGV4LCBtb250aEluZGV4ICsgMiksIGZvcm1hdDogZGF0ZUZvcm1hdC5zdWJzdHJpbmcobW9udGhJbmRleCwgbW9udGhJbmRleCArIDIpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRheUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGRhWzJdID0geyB2YWx1ZTogZGF0ZVN0ci5zdWJzdHJpbmcoZGF5SW5kZXgsIGRheUluZGV4ICsgMikgfHwgJzAxJywgZm9ybWF0OiBkYXRlRm9ybWF0LnN1YnN0cmluZyhkYXlJbmRleCwgZGF5SW5kZXggKyAyKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb250aE51bWJlckJ5TW9udGhOYW1lKGRmOiBJTXlEYXRlRm9ybWF0LCBtb250aExhYmVsczogSU15TW9udGhMYWJlbHMpOiBudW1iZXIge1xyXG4gICAgICAgIGlmIChkZi52YWx1ZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgPSAxOyBrZXkgPD0gMTI7IGtleSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGYudmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gbW9udGhMYWJlbHNba2V5XS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TnVtYmVyQnlWYWx1ZShkZjogSU15RGF0ZUZvcm1hdCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKCFkZikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEvXlxcZCskLy50ZXN0KGRmLnZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbmJyOiBudW1iZXIgPSBOdW1iZXIoZGYudmFsdWUpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKGRmLmZvcm1hdC5sZW5ndGggPT09IDEgJiYgZGYudmFsdWUubGVuZ3RoICE9PSAxICYmIG5iciA8IDEwKSB8fFxyXG4gICAgICAgICAgICAoZGYuZm9ybWF0Lmxlbmd0aCA9PT0gMSAmJiBkZi52YWx1ZS5sZW5ndGggIT09IDIgJiYgbmJyID49IDEwKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBuYnIgPSAtMTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRmLmZvcm1hdC5sZW5ndGggPT09IDIgJiYgZGYudmFsdWUubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICBuYnIgPSAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5icjtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZURlZmF1bHRNb250aChtb250aFN0cmluZzogc3RyaW5nKTogSU15TW9udGgge1xyXG4gICAgICAgIGNvbnN0IG1vbnRoOiBJTXlNb250aCA9IHsgbW9udGhUeHQ6IEVNUFRZX1NUUiwgbW9udGhOYnI6IDAsIHllYXI6IDAgfTtcclxuICAgICAgICBpZiAobW9udGhTdHJpbmcgIT09IEVNUFRZX1NUUikge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxpdCA9IG1vbnRoU3RyaW5nLnNwbGl0KG1vbnRoU3RyaW5nLm1hdGNoKC9bXjAtOV0vKVswXSk7XHJcbiAgICAgICAgICAgIG1vbnRoLm1vbnRoTmJyID0gc3BsaXRbMF0ubGVuZ3RoID09PSAyID8gTnVtYmVyKHNwbGl0WzBdKSA6IE51bWJlcihzcGxpdFsxXSk7XHJcbiAgICAgICAgICAgIG1vbnRoLnllYXIgPSBzcGxpdFswXS5sZW5ndGggPT09IDIgPyBOdW1iZXIoc3BsaXRbMV0pIDogTnVtYmVyKHNwbGl0WzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vbnRoO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRGlzYWJsZWREYXRlKGRhdGU6IElNeURhdGUsIG9wdGlvbnM6IElNeU9wdGlvbnMpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIG1pblllYXIsXHJcbiAgICAgICAgICAgIG1heFllYXIsXHJcbiAgICAgICAgICAgIGRpc2FibGVVbnRpbCxcclxuICAgICAgICAgICAgZGlzYWJsZVNpbmNlLFxyXG4gICAgICAgICAgICBkaXNhYmxlV2Vla2VuZHMsXHJcbiAgICAgICAgICAgIGRpc2FibGVEYXRlcyxcclxuICAgICAgICAgICAgZGlzYWJsZURhdGVSYW5nZXMsXHJcbiAgICAgICAgICAgIGRpc2FibGVXZWVrZGF5cyxcclxuICAgICAgICAgICAgZW5hYmxlRGF0ZXNcclxuICAgICAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBkIG9mIGVuYWJsZURhdGVzKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChcclxuICAgICAgICAvLyAgICAgICAgIChkLnllYXIgPT09IDAgfHwgZC55ZWFyID09PSBkYXRlLnllYXIpICYmXHJcbiAgICAgICAgLy8gICAgICAgICAoZC5tb250aCA9PT0gMCB8fCBkLm1vbnRoID09PSBkYXRlLm1vbnRoKSAmJlxyXG4gICAgICAgIC8vICAgICAgICAgZC5kYXkgPT09IGRhdGUuZGF5XHJcbiAgICAgICAgLy8gICAgICkge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBpZiAoKGRhdGUueWVhciA8IG1pblllYXIgJiYgZGF0ZS5tb250aCA9PT0gMTIpIHx8IChkYXRlLnllYXIgPiBtYXhZZWFyICYmIGRhdGUubW9udGggPT09IDEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlTXM6IG51bWJlciA9IHRoaXMuZ2V0VGltZUluTWlsbGlzZWNvbmRzKGRhdGUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGRpc2FibGVVbnRpbCkgJiYgKGRhdGVNcyArIDI0ICogNjAgKiA2MCAqIDEwMDAgLSAxKSA8IHRoaXMuZ2V0VGltZUluTWlsbGlzZWNvbmRzKGRpc2FibGVVbnRpbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGRpc2FibGVTaW5jZSkgJiYgZGF0ZU1zID4gdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZGlzYWJsZVNpbmNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXNhYmxlV2Vla2VuZHMpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF5TmJyID0gdGhpcy5nZXREYXlOdW1iZXIoZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChkYXlOYnIgPT09IDAgfHwgZGF5TmJyID09PSA2KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZG4gPSB0aGlzLmdldERheU51bWJlcihkYXRlKTtcclxuICAgICAgICBpZiAoZGlzYWJsZVdlZWtkYXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3ZCBvZiBkaXNhYmxlV2Vla2RheXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkbiA9PT0gdGhpcy5nZXRXZWVrZGF5SW5kZXgod2QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZCBvZiBkaXNhYmxlRGF0ZXMpIHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgKGQueWVhciA9PT0gMCB8fCBkLnllYXIgPT09IGRhdGUueWVhcikgJiZcclxuICAgICAgICAgICAgICAgIChkLm1vbnRoID09PSAwIHx8IGQubW9udGggPT09IGRhdGUubW9udGgpICYmXHJcbiAgICAgICAgICAgICAgICBkLmRheSA9PT0gZGF0ZS5kYXlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIGRpc2FibGVEYXRlUmFuZ2VzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZERhdGUoZC5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZERhdGUoZC5lbmQpICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlTXMgPj0gdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZC5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgIGRhdGVNcyA8PSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhkLmVuZClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNNYXJrZWREYXRlKGRhdGU6IElNeURhdGUsIG1hcmtlZERhdGVzOiBBcnJheTxJTXlNYXJrZWREYXRlcz4sIG1hcmtXZWVrZW5kczogSU15TWFya2VkRGF0ZSk6IElNeU1hcmtlZERhdGUge1xyXG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWFya2VkRGF0ZXMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkIG9mIG1kLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgKGQueWVhciA9PT0gMCB8fCBkLnllYXIgPT09IGRhdGUueWVhcikgJiZcclxuICAgICAgICAgICAgICAgICAgICAoZC5tb250aCA9PT0gMCB8fCBkLm1vbnRoID09PSBkYXRlLm1vbnRoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGQuZGF5ID09PSBkYXRlLmRheVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWFya2VkOiB0cnVlLCBjb2xvcjogbWQuY29sb3IgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWFya1dlZWtlbmRzICYmIG1hcmtXZWVrZW5kcy5tYXJrZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF5TmJyID0gdGhpcy5nZXREYXlOdW1iZXIoZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChkYXlOYnIgPT09IDAgfHwgZGF5TmJyID09PSA2KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtYXJrZWQ6IHRydWUsIGNvbG9yOiBtYXJrV2Vla2VuZHMuY29sb3IgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBtYXJrZWQ6IGZhbHNlLCBjb2xvcjogRU1QVFlfU1RSIH07XHJcbiAgICB9XHJcblxyXG4gICAgaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgZGF0ZTogSU15RGF0ZSxcclxuICAgICAgICBzdW5IaWdobGlnaHQ6IGJvb2xlYW4sXHJcbiAgICAgICAgc2F0SGlnaGxpZ2h0OiBib29sZWFuLFxyXG4gICAgICAgIGhpZ2hsaWdodERhdGVzOiBBcnJheTxJTXlEYXRlPlxyXG4gICAgKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZGF5TmJyOiBudW1iZXIgPSB0aGlzLmdldERheU51bWJlcihkYXRlKTtcclxuICAgICAgICBpZiAoKHN1bkhpZ2hsaWdodCAmJiBkYXlOYnIgPT09IDApIHx8IChzYXRIaWdobGlnaHQgJiYgZGF5TmJyID09PSA2KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIGhpZ2hsaWdodERhdGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIChkLnllYXIgPT09IDAgfHwgZC55ZWFyID09PSBkYXRlLnllYXIpICYmXHJcbiAgICAgICAgICAgICAgICAoZC5tb250aCA9PT0gMCB8fCBkLm1vbnRoID09PSBkYXRlLm1vbnRoKSAmJlxyXG4gICAgICAgICAgICAgICAgZC5kYXkgPT09IGRhdGUuZGF5XHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlZWtOdW1iZXIoZGF0ZTogSU15RGF0ZSk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IG5ldyBEYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCAtIDEsIGRhdGUuZGF5LCAwLCAwLCAwLCAwKTtcclxuICAgICAgICBkLnNldERhdGUoZC5nZXREYXRlKCkgKyAoZC5nZXREYXkoKSA9PT0gMCA/IC0zIDogNCAtIGQuZ2V0RGF5KCkpKTtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoZC5nZXRUaW1lKCkgLSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIDAsIDQpLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAvIDcpICsgMTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0Tm93V2Vla1RpbWUoZGF0ZTogRGF0ZSk6IElNeURhdGVSYW5nZSB7XHJcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gKChkYXRlLmdldERheSgpICsgNikgJSA3KSk7XHJcbiAgICAgICAgY29uc3QgYmVnaW4gPSB7XHJcbiAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgIGRheTogZGF0ZS5nZXREYXRlKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDYpO1xyXG4gICAgICAgIGNvbnN0IGVuZCA9IHtcclxuICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICBtb250aDogZGF0ZS5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHsgYmVnaW4sIGVuZCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKGRhdGU6IElNeURhdGUsIGRpc2FibGVVbnRpbDogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZERhdGUoZGlzYWJsZVVudGlsKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhkYXRlKSA8PSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhkaXNhYmxlVW50aWwpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZShkYXRlOiBJTXlEYXRlLCBkaXNhYmxlU2luY2U6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGRpc2FibGVTaW5jZSkgJiZcclxuICAgICAgICAgICAgdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZGF0ZSkgPj0gdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZGlzYWJsZVNpbmNlKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgIGRhdGU6IElNeURhdGUsXHJcbiAgICAgICAgZGF0ZVJhbmdlOiBJTXlEYXRlUmFuZ2UsXHJcbiAgICAgICAgZGF0ZUZvcm1hdDogc3RyaW5nLFxyXG4gICAgICAgIG1vbnRoTGFiZWxzOiBJTXlNb250aExhYmVscyxcclxuICAgICAgICByYW5nZURlbGltaXRlcjogc3RyaW5nLFxyXG4gICAgICAgIHJldHVybkZvcm1hdDogc3RyaW5nLFxyXG4gICAgICAgIGRhdGVTdHI6IHN0cmluZyA9IEVNUFRZX1NUUlxyXG4gICAgKTogSU15RGF0ZU1vZGVsIHtcclxuICAgICAgICBsZXQgc2luZ2xlRGF0ZU1vZGVsOiBJTXlTaW5nbGVEYXRlTW9kZWwgPSBudWxsO1xyXG4gICAgICAgIGxldCBkYXRlUmFuZ2VNb2RlbDogSU15RGF0ZVJhbmdlTW9kZWwgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoZGF0ZSkge1xyXG4gICAgICAgICAgICBzaW5nbGVEYXRlTW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLmdldERhdGUyKGRhdGUpLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiBkYXRlU3RyLmxlbmd0aCA/IGRhdGVTdHIgOiB0aGlzLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOiB0aGlzLmZvcm1hdERhdGUoZGF0ZSwgcmV0dXJuRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGF0ZVJhbmdlTW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICBiZWdpbkRhdGU6IGRhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgIGJlZ2luSnNEYXRlOiB0aGlzLmdldERhdGUoZGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgIGJlZ2luRXBvYzogdGhpcy5nZXRFcG9jVGltZShkYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0ZVJhbmdlLmVuZCxcclxuICAgICAgICAgICAgICAgIGVuZEpzRGF0ZTogdGhpcy5nZXREYXRlKGRhdGVSYW5nZS5lbmQpLFxyXG4gICAgICAgICAgICAgICAgZW5kRXBvYzogdGhpcy5nZXRFcG9jVGltZShkYXRlUmFuZ2UuZW5kKSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUoZGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscykgK1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlRGVsaW1pdGVyICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUoZGF0ZVJhbmdlLmVuZCwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShkYXRlUmFuZ2UuYmVnaW4sIHJldHVybkZvcm1hdCwgbW9udGhMYWJlbHMpICtcclxuICAgICAgICAgICAgICAgICAgICByYW5nZURlbGltaXRlciArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKGRhdGVSYW5nZS5lbmQsIHJldHVybkZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc1JhbmdlOiBkYXRlID09PSBudWxsLFxyXG4gICAgICAgICAgICBzaW5nbGVEYXRlOiBzaW5nbGVEYXRlTW9kZWwsXHJcbiAgICAgICAgICAgIGRhdGVSYW5nZTogZGF0ZVJhbmdlTW9kZWxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdERhdGUoZGF0ZTogSU15RGF0ZSwgZGF0ZUZvcm1hdDogc3RyaW5nLCBtb250aExhYmVsczogSU15TW9udGhMYWJlbHMpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghZGF0ZS5tb250aCAmJiBkYXRlRm9ybWF0LmluZGV4T2YoTU0pID09PSAtMSkge1xyXG4gICAgICAgICAgICBkYXRlRm9ybWF0ID0gdGhpcy5kZWxldGUoZGF0ZUZvcm1hdCwgTU0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWRhdGUuZGF5ICYmIGRhdGVGb3JtYXQuaW5kZXhPZihERCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGRhdGVGb3JtYXQgPSB0aGlzLmRlbGV0ZShkYXRlRm9ybWF0LCBERCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBmb3JtYXR0ZWQ6IHN0cmluZyA9IGRhdGVGb3JtYXQucmVwbGFjZShZWVlZLCBTdHJpbmcoZGF0ZS55ZWFyKSk7XHJcblxyXG4gICAgICAgIGlmIChkYXRlRm9ybWF0LmluZGV4T2YoTSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKE1NLCAnMDEnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZUZvcm1hdC5pbmRleE9mKE1NTSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZShNTU0sIG1vbnRoTGFiZWxzW2RhdGUubW9udGhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlRm9ybWF0LmluZGV4T2YoTU0pICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkID0gZm9ybWF0dGVkLnJlcGxhY2UoTU0sIHRoaXMucHJlWmVybyhkYXRlLm1vbnRoIHx8IDEpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKE0sIFN0cmluZyhkYXRlLm1vbnRoIHx8IDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGVGb3JtYXQuaW5kZXhPZihERCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKERELCAnMDEnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGVGb3JtYXQuaW5kZXhPZihERCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKERELCB0aGlzLnByZVplcm8oZGF0ZS5kYXkgfHwgMSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKEQsIFN0cmluZyhkYXRlLmRheSB8fCAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3JtYXR0ZWQgPSBmb3JtYXR0ZWQucmVwbGFjZSgnTU0nLCAnbW0nKS5yZXBsYWNlKCdISCcsIHRoaXMucHJlWmVybyhkYXRlLmhvdXIgfHwgMCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJ21tJywgdGhpcy5wcmVaZXJvKGRhdGUubWludXRlIHx8IDApKVxyXG4gICAgICAgIC5yZXBsYWNlKCdzcycsIHRoaXMucHJlWmVybyhkYXRlLnNlY29uZCB8fCAwKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQgJiYgZm9ybWF0dGVkLmxlbmd0aCA+IDIgPyBmb3JtYXR0ZWQgOiAnJztcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGUoZm9ybWF0OiBzdHJpbmcsIGRlbFN0cjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcmUgPSBmb3JtYXQubWF0Y2goL1teKERkTW1ZeSldezEsfS9nKTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGZvcm1hdC5pbmRleE9mKGRlbFN0cik7XHJcblxyXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcclxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChyZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5zdWJzdHJpbmcoMyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnN1YnN0cmluZygyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggKyAyID09PSBmb3JtYXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChyZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5zdWJzdHJpbmcoMCwgZm9ybWF0Lmxlbmd0aCAtIDMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5zdWJzdHJpbmcoMCwgZm9ybWF0Lmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHJlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnN1YnN0cmluZygwLCBpbmRleCkgKyBmb3JtYXQuc3Vic3RyaW5nKGluZGV4ICsgMyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0LnN1YnN0cmluZygwLCBpbmRleCkgKyBmb3JtYXQuc3Vic3RyaW5nKGluZGV4ICsgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRGb3JtYXR0ZWREYXRlKG1vZGVsOiBJTXlEYXRlTW9kZWwpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAhbW9kZWwuaXNSYW5nZSA/IG1vZGVsLnNpbmdsZURhdGUuZm9ybWF0dGVkIDogbW9kZWwuZGF0ZVJhbmdlLmZvcm1hdHRlZDtcclxuICAgIH1cclxuXHJcbiAgICBwcmVaZXJvKHZhbDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdmFsIDwgMTAgPyBaRVJPX1NUUiArIE51bWJlcih2YWwpIDogU3RyaW5nKHZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbml0aWFsaXplZERhdGUoZGF0ZTogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBkYXRlICYmIGRhdGUueWVhciAhPT0gMCAmJiBkYXRlLm1vbnRoICE9PSAwICYmIGRhdGUuZGF5ICE9PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5pdGlhbGl6ZWRNb250aChkYXRlOiBJTXlEYXRlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGUgJiYgZGF0ZS55ZWFyICE9PSAwICYmIGRhdGUubW9udGggIT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbml0aWFsaXplZFllYXIoZGF0ZTogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBkYXRlICYmIGRhdGUueWVhciAhPT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpc0RhdGVFYXJsaWVyKGZpcnN0RGF0ZTogSU15RGF0ZSwgc2Vjb25kRGF0ZTogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhmaXJzdERhdGUpIDwgdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoc2Vjb25kRGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEYXRlU2FtZU9yRWFybGllcihmaXJzdERhdGU6IElNeURhdGUsIHNlY29uZERhdGU6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZmlyc3REYXRlKSA8PSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhzZWNvbmREYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0RhdGVTYW1lKGZpcnN0RGF0ZTogSU15RGF0ZSwgc2Vjb25kRGF0ZTogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhmaXJzdERhdGUpID09PSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhzZWNvbmREYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0RhdGVSYW5nZUJlZ2luT3JFbmRTYW1lKGRhdGVSYW5nZTogSU15RGF0ZVJhbmdlLCBkYXRlOiBJTXlEYXRlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZGF0ZU1zOiBudW1iZXIgPSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhkYXRlKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhkYXRlUmFuZ2UuYmVnaW4pID09PSBkYXRlTXMgfHxcclxuICAgICAgICAgICAgdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZGF0ZVJhbmdlLmVuZCkgPT09IGRhdGVNc1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNEYXRlSW5SYW5nZShkYXRlOiBJTXlEYXRlLCBkYXRlUmFuZ2U6IElNeURhdGVSYW5nZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkRGF0ZShkYXRlUmFuZ2UuYmVnaW4pIHx8ICF0aGlzLmlzSW5pdGlhbGl6ZWREYXRlKGRhdGVSYW5nZS5lbmQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNEYXRlU2FtZU9yRWFybGllcihkYXRlUmFuZ2UuYmVnaW4sIGRhdGUpICYmIHRoaXMuaXNEYXRlU2FtZU9yRWFybGllcihkYXRlLCBkYXRlUmFuZ2UuZW5kKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldERhdGUoKTogSU15RGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgeWVhcjogMCwgbW9udGg6IDAsIGRheTogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbWVJbk1pbGxpc2Vjb25kcyhkYXRlOiBJTXlEYXRlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRlKGRhdGUpLmdldFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRlMihkYXRlOiBJTXlEYXRlKTogRGF0ZSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgaWYgKCFkYXRlLnllYXIpIHtcclxuICAgICAgICAgICAgZGF0ZS55ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWRhdGUubW9udGgpIHtcclxuICAgICAgICAgICAgZGF0ZS5tb250aCA9IG5vdy5nZXRNb250aCgpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGF0ZS5kYXkpIHtcclxuICAgICAgICAgICAgZGF0ZS5kYXkgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKFxyXG4gICAgICAgICAgICBkYXRlLnllYXIsXHJcbiAgICAgICAgICAgIGRhdGUubW9udGggLSAxLFxyXG4gICAgICAgICAgICBkYXRlLmRheSxcclxuICAgICAgICAgICAgZGF0ZS5ob3VyID8gZGF0ZS5ob3VyIDogMCxcclxuICAgICAgICAgICAgZGF0ZS5taW51dGUgPyBkYXRlLm1pbnV0ZSA6IDAsXHJcbiAgICAgICAgICAgIGRhdGUuc2Vjb25kID8gZGF0ZS5zZWNvbmQgOiAwLFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRlKGRhdGU6IElNeURhdGUpOiBEYXRlIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoXHJcbiAgICAgICAgICAgIGRhdGUueWVhciB8fCAwLFxyXG4gICAgICAgICAgICBkYXRlLm1vbnRoID8gZGF0ZS5tb250aCAtIDEgOiAwLFxyXG4gICAgICAgICAgICBkYXRlLmRheSB8fCAwLFxyXG4gICAgICAgICAgICBkYXRlLmhvdXIgPyBkYXRlLmhvdXIgOiAwLFxyXG4gICAgICAgICAgICBkYXRlLm1pbnV0ZSA/IGRhdGUubWludXRlIDogMCxcclxuICAgICAgICAgICAgZGF0ZS5zZWNvbmQgPyBkYXRlLnNlY29uZCA6IDAsXHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERheU51bWJlcihkYXRlOiBJTXlEYXRlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoXHJcbiAgICAgICAgICAgIGRhdGUueWVhcixcclxuICAgICAgICAgICAgZGF0ZS5tb250aCAtIDEsXHJcbiAgICAgICAgICAgIGRhdGUuZGF5LFxyXG4gICAgICAgICAgICBkYXRlLmhvdXIgPyBkYXRlLmhvdXIgOiAwLFxyXG4gICAgICAgICAgICBkYXRlLm1pbnV0ZSA/IGRhdGUubWludXRlIDogMCxcclxuICAgICAgICAgICAgZGF0ZS5zZWNvbmQgPyBkYXRlLnNlY29uZCA6IDAsXHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApLmdldERheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlZWtkYXlJbmRleCh3ZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2Vla0RheXMuaW5kZXhPZih3ZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXBvY1RpbWUoZGF0ZTogSU15RGF0ZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMoZGF0ZSkgLyAxMDAwLjApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEtleUNvZGVGcm9tRXZlbnQoZXZlbnQ6IGFueSk6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3Qga2V5OiBhbnkgPSBldmVudC5rZXkgfHwgZXZlbnQua2V5Q29kZTtcclxuXHJcbiAgICAgICAgaWYgKGtleSA9PT0gS2V5TmFtZS5lbnRlciB8fCBrZXkgPT09IEtleUNvZGUuZW50ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtleUNvZGUuZW50ZXI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IEtleU5hbWUuZXNjIHx8IGtleSA9PT0gS2V5Q29kZS5lc2MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtleUNvZGUuZXNjO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLZXlOYW1lLnNwYWNlIHx8IGtleSA9PT0gS2V5Q29kZS5zcGFjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V5Q29kZS5zcGFjZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gS2V5TmFtZS5sZWZ0QXJyb3cgfHwga2V5ID09PSBLZXlDb2RlLmxlZnRBcnJvdykge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V5Q29kZS5sZWZ0QXJyb3c7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IEtleU5hbWUudXBBcnJvdyB8fCBrZXkgPT09IEtleUNvZGUudXBBcnJvdykge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V5Q29kZS51cEFycm93O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLZXlOYW1lLnJpZ2h0QXJyb3cgfHwga2V5ID09PSBLZXlDb2RlLnJpZ2h0QXJyb3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtleUNvZGUucmlnaHRBcnJvdztcclxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gS2V5TmFtZS5kb3duQXJyb3cgfHwga2V5ID09PSBLZXlDb2RlLmRvd25BcnJvdykge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V5Q29kZS5kb3duQXJyb3c7XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IEtleU5hbWUudGFiIHx8IGtleSA9PT0gS2V5Q29kZS50YWIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtleUNvZGUudGFiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLZXlOYW1lLnNoaWZ0IHx8IGtleSA9PT0gS2V5Q29kZS5zaGlmdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2V5Q29kZS5zaGlmdDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXROZWFyRGF0ZShub3c6IElNeURhdGUsIG1pbjogSU15RGF0ZSwgbWF4OiBJTXlEYXRlKSB7XHJcbiAgICAgICAgY29uc3QgbWluTWlsbGlzZWNvbmRzID0gdGhpcy5nZXRUaW1lSW5NaWxsaXNlY29uZHMobWluKVxyXG4gICAgICAgIGNvbnN0IG1heE1pbGxpc2Vjb25kcyA9IHRoaXMuZ2V0VGltZUluTWlsbGlzZWNvbmRzKG1heClcclxuICAgICAgICBjb25zdCBub3dNaWxsaXNlY29uZHMgPSB0aGlzLmdldFRpbWVJbk1pbGxpc2Vjb25kcyhub3cpXHJcbiAgICAgICAgaWYgKG1heE1pbGxpc2Vjb25kcyAtIG5vd01pbGxpc2Vjb25kcyA+IG5vd01pbGxpc2Vjb25kcyAtIG1pbk1pbGxpc2Vjb25kcykge1xyXG4gICAgICAgICAgICByZXR1cm4gbWluO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pe26Ze05a+55bqU55qE5bCP5pe2XHJcbiAgICAvLyDpgInkuK3ml6XmnJ/nrYnkuo7lt6bljLrpl7Tml6XmnJ/ml7bvvIznpoHnlKjlt6bnq6/ngrnnmoTlt6bpg6jliIZbMO+8jG1pbkhvdXLvvIlcclxuICAgIC8vIOmAieS4reaXpeacn+etieS6juWPs+WMuumXtOaXpeacn+aXtu+8jOemgeeUqOWPs+err+eCueeahOWPs+mDqOWIhihtYXhIb3VyLDIzXVxyXG4gICAgZGlzYWJsZWRIb3VycyhtaW46IElNeURhdGUsIG1heDogSU15RGF0ZSwgY3VycmVudERhdGU6IElNeURhdGUpIHtcclxuICAgICAgICBsZXQgbWluSG91ciA9IG1pbi5ob3VyO1xyXG4gICAgICAgIGxldCBtYXhIb3VyID0gbWF4LmhvdXI7XHJcbiAgICAgICAgbGV0IHJlcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGF0ZVNhbWUoeyB5ZWFyOiBjdXJyZW50RGF0ZS55ZWFyLCBtb250aDogY3VycmVudERhdGUubW9udGgsIGRheTogY3VycmVudERhdGUuZGF5IH0sIHsgeWVhcjogbWluLnllYXIsIG1vbnRoOiBtaW4ubW9udGgsIGRheTogbWluLmRheSB9KSkge1xyXG4gICAgICAgICAgICB3aGlsZSAobWluSG91ci0tID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKG1pbkhvdXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0RhdGVTYW1lKHsgeWVhcjogY3VycmVudERhdGUueWVhciwgbW9udGg6IGN1cnJlbnREYXRlLm1vbnRoLCBkYXk6IGN1cnJlbnREYXRlLmRheSB9LCB7IHllYXI6IG1heC55ZWFyLCBtb250aDogbWF4Lm1vbnRoLCBkYXk6IG1heC5kYXkgfSkpIHtcclxuICAgICAgICAgICAgd2hpbGUgKG1heEhvdXIrKyA8IDI0KSB7XHJcbiAgICAgICAgICAgICAgICByZXMucHVzaChtYXhIb3VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgLy/npoHnlKjml7bpl7Tlr7nlupTnmoTliIbpkp8gXHJcbiAgICAvL+mAieS4reaXpeacn+etieS6juW3puWMuumXtOaXpeacn+aXtu+8jOemgeeUqOW3puerr+eCueeahOW3pumDqOWIhlsw77yMbWluTWludXRl77yJXHJcbiAgICAvL+mAieS4reaXpeacn+etieS6juWPs+WMuumXtOaXpeacn+aXtu+8jOemgeeUqOWPs+err+eCueeahOWPs+mDqOWIhu+8iG1heE1pbnV0Ze+8jDU5XVxyXG4gICAgZGlzYWJsZWRNaW51dGVzKG1pbjogSU15RGF0ZSwgbWF4OiBJTXlEYXRlLCBfaG91cjogbnVtYmVyLCBjdXJyZW50RGF0ZTogSU15RGF0ZSkge1xyXG4gICAgICAgIGxldCBtYXhIb3VyID0gbWF4LmhvdXI7XHJcbiAgICAgICAgbGV0IG1heE1pbnV0ZSA9IG1heC5taW51dGU7XHJcbiAgICAgICAgbGV0IG1pbkhvdXIgPSBtaW4uaG91cjtcclxuICAgICAgICBsZXQgbWluTWludXRlID0gbWluLm1pbnV0ZTtcclxuICAgICAgICBsZXQgcmVzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEYXRlU2FtZSh7IHllYXI6IGN1cnJlbnREYXRlLnllYXIsIG1vbnRoOiBjdXJyZW50RGF0ZS5tb250aCwgZGF5OiBjdXJyZW50RGF0ZS5kYXkgfSwgeyB5ZWFyOiBtaW4ueWVhciwgbW9udGg6IG1pbi5tb250aCwgZGF5OiBtaW4uZGF5IH0pKSB7XHJcbiAgICAgICAgICAgIGlmIChfaG91ciA9PSBtaW5Ib3VyKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobWluTWludXRlLS0gPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKG1pbk1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0RhdGVTYW1lKHsgeWVhcjogY3VycmVudERhdGUueWVhciwgbW9udGg6IGN1cnJlbnREYXRlLm1vbnRoLCBkYXk6IGN1cnJlbnREYXRlLmRheSB9LCB7IHllYXI6IG1heC55ZWFyLCBtb250aDogbWF4Lm1vbnRoLCBkYXk6IG1heC5kYXkgfSkpIHtcclxuICAgICAgICAgICAgaWYgKF9ob3VyID09IG1heEhvdXIpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChtYXhNaW51dGUrKyA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2gobWF4TWludXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuXHJcbiAgICB9XHJcbiAgICAvL+emgeeUqOaXtumXtOWvueW6lOeahOenkiBcclxuICAgIC8v6YCJ5Lit5pel5pyf562J5LqO5bem5Yy66Ze05pel5pyf5pe277yM56aB55So5bem56uv54K555qE5bem6YOo5YiGWzDvvIxtaW5TZWNvbmTvvIlcclxuICAgIC8v6YCJ5Lit5pel5pyf562J5LqO5Y+z5Yy66Ze05pel5pyf5pe277yM56aB55So5Y+z56uv54K555qE5Y+z6YOo5YiG77yIbWF4U2Vjb25k77yMNTldXHJcbiAgICBkaXNhYmxlZFNlY29uZHMobWluOiBJTXlEYXRlLCBtYXg6IElNeURhdGUsIF9ob3VyOiBudW1iZXIsIF9taW51dGU6IG51bWJlciwgY3VycmVudERhdGU6IElNeURhdGUpIHtcclxuICAgICAgICBsZXQgbWF4SG91ciA9IG1heC5ob3VyO1xyXG4gICAgICAgIGxldCBtYXhNaW51dGUgPSBtYXgubWludXRlO1xyXG4gICAgICAgIGxldCBtYXhTZWNvbmQgPSBtYXguc2Vjb25kO1xyXG4gICAgICAgIGxldCBtaW5Ib3VyID0gbWluLmhvdXI7XHJcbiAgICAgICAgbGV0IG1pbk1pbnV0ZSA9IG1pbi5taW51dGU7XHJcbiAgICAgICAgbGV0IG1pblNlY29uZCA9IG1pbi5zZWNvbmQ7XHJcbiAgICAgICAgbGV0IHJlcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGF0ZVNhbWUoeyB5ZWFyOiBjdXJyZW50RGF0ZS55ZWFyLCBtb250aDogY3VycmVudERhdGUubW9udGgsIGRheTogY3VycmVudERhdGUuZGF5IH0sIHsgeWVhcjogbWluLnllYXIsIG1vbnRoOiBtaW4ubW9udGgsIGRheTogbWluLmRheSB9KSkge1xyXG4gICAgICAgICAgICBpZiAoX2hvdXIgPT0gbWluSG91ciAmJiBfbWludXRlID09IG1pbk1pbnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG1pblNlY29uZC0tID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChtaW5TZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0RhdGVTYW1lKHsgeWVhcjogY3VycmVudERhdGUueWVhciwgbW9udGg6IGN1cnJlbnREYXRlLm1vbnRoLCBkYXk6IGN1cnJlbnREYXRlLmRheSB9LCB7IHllYXI6IG1heC55ZWFyLCBtb250aDogbWF4Lm1vbnRoLCBkYXk6IG1heC5kYXkgfSkpIHtcclxuICAgICAgICAgICAgaWYgKF9ob3VyID09IG1heEhvdXIgJiYgX21pbnV0ZSA9PSBtYXhNaW51dGUpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChtYXhTZWNvbmQrKyA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2gobWF4U2Vjb25kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBnZXREYXRlVHlwZVN0cmluZyhkdDogRHluYW1pY0RhdGVUeXBlLCBkeW5hbWljTG9jYWxlKSB7XHJcbiAgICAgICAgc3dpdGNoKGR0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dlZWsnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWNMb2NhbGUud2VlayB8fCAn5ZGoJztcclxuICAgICAgICAgICAgY2FzZSAnZGF5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkeW5hbWljTG9jYWxlLmRheSB8fCAn5aSpJztcclxuICAgICAgICAgICAgY2FzZSAnbW9udGgnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWNMb2NhbGUubW9udGggfHwgJ+aciCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3llYXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWNMb2NhbGUueWVhciB8fCAn5bm0JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0RHluYW1pY1ZhbHVlKHZhbDogRHluYW1pY0RhdGEsIGR5bmFtaWNMb2NhbGUpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGxldCBmdmFsID0gJyc7XHJcbiAgICAgICAgICAgIHN3aXRjaCh2YWwubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncHJlc2VudF9kYXknOiAvLyDku4rlpKlcclxuICAgICAgICAgICAgICAgIGZ2YWwgPSBkeW5hbWljTG9jYWxlLnRvZGF5IHx8ICfku4rlpKknO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ByZXNlbnRfbW9udGgnOiAvLyDmnKzmnIhcclxuICAgICAgICAgICAgICAgIGZ2YWwgPSBkeW5hbWljTG9jYWxlLnByZXNlbnRNb250aCB8fCAn5pys5pyIJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwcmVzZW50X3llYXInOlxyXG4gICAgICAgICAgICAgICAgZnZhbCA9IGR5bmFtaWNMb2NhbGUucHJlc2VudFllYXIgfHwn5pys5bm0JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwcmV2aW91JzpcclxuICAgICAgICAgICAgICAgIGZ2YWwgPSAgKGR5bmFtaWNMb2NhbGUucHJldmlvdXN8fCAn6L+H5Y67JykgKyAnICcgKyB2YWwuY291bnQgKyAnICcgKyB0aGlzLmdldERhdGVUeXBlU3RyaW5nKHZhbC5kYXRlVHlwZSwgZHluYW1pY0xvY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZnV0dXJlJzpcclxuICAgICAgICAgICAgICAgIGZ2YWwgPSAoZHluYW1pY0xvY2FsZS5mdXR1cmUgfHwgJ+acquadpScpICsgJyAnKyB2YWwuY291bnQgKyAnICcgK3RoaXMuZ2V0RGF0ZVR5cGVTdHJpbmcodmFsLmRhdGVUeXBlLCBkeW5hbWljTG9jYWxlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwcmVzZW50X2ZpcnN0JzpcclxuICAgICAgICAgICAgICAgIGZ2YWwgPSAoZHluYW1pY0xvY2FsZS5jdXJyZW50fHwn5pysJykgKyB0aGlzLmdldERhdGVUeXBlU3RyaW5nKHZhbC5kYXRlVHlwZSwgZHluYW1pY0xvY2FsZSkgKyAoZHluYW1pY0xvY2FsZS5maXJzdHx8J+esrCAxIOWkqScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ByZXNlbnRfbGFzdCc6XHJcbiAgICAgICAgICAgICAgICBmdmFsID0gKGR5bmFtaWNMb2NhbGUuY3VycmVudHx8J+acrCcpICsgdGhpcy5nZXREYXRlVHlwZVN0cmluZyh2YWwuZGF0ZVR5cGUsIGR5bmFtaWNMb2NhbGUpICsgKGR5bmFtaWNMb2NhbGUubGFzdHx8J+acgOWQjiAxIOWkqScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFkU3RhcnRaZXJvKHN0cjogYW55KSB7XHJcbiAgICAgICAgaWYoc3RyICE9IG51bGwgICYmIHN0ciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAgKCcnICsgc3RyKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICAnMDAnO1xyXG4gICAgfVxyXG5cclxuICAgIG9yZGVyU2VsZWN0ZWREYXRlcyhpdGVtcywgb3JkZXI6IE11bHRpU2VsZWN0ZWRPcmRlckJ5ID0gJ25vbmUnKSB7XHJcbiAgICAgICAgaWYgKG9yZGVyICE9PSAnYXNjJyAmJiBvcmRlciAhPT0gJ2Rlc2MnKSB7XHJcbiAgICAgICAgICAgIG9yZGVyID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG9yZGVyID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9yZGVyQnkoaXRlbXMsIFsneWVhcicsICdtb250aCcsICdkYXknXSwgW29yZGVyLCBvcmRlciwgb3JkZXJdKTtcclxuICAgIH1cclxufVxyXG4iXX0=