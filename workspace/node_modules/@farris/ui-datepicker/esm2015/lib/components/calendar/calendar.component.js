/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter } from '@angular/core';
import { UtilService } from '../../services/public-api';
import { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';
import { DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT, YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR } from '../../constants/constants';
import { TimePickerPanelComponent } from '@farris/ui-time-picker';
import { flatten } from 'lodash-es';
import { ViewType } from '../../interfaces/my-options.interface';
export class CalendarComponent {
    /**
     * @param {?} renderer
     * @param {?} cdr
     * @param {?} utilService
     */
    constructor(renderer, cdr, utilService) {
        this.renderer = renderer;
        this.cdr = cdr;
        this.utilService = utilService;
        this.position = 'static';
        this.dynamicViewShow = new EventEmitter();
        this.dateHlp = null;
        this.visibleMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.visibleMonth_range = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.selectedMonth = { monthNbr: 0, year: 0 };
        this.selectedMonth_range = { monthNbr: 0, year: 0 };
        this.selectedDate = { year: 0, month: 0, day: 0 };
        this.selectedDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };
        this.selectedWeek = { weekNbr: 0, year: 0 };
        this.weekDays = [];
        this.dates = [];
        this.dates_range = [];
        this.months = [];
        this.months_range = [];
        this.years = [];
        this.years_range = [];
        this.multiSelect = false;
        this.dayIdx = 0;
        this.weekDayOpts = [SU, MO, TU, WE, TH, FR, SA];
        this.selectMonth = false;
        this.selectMonth_range = false;
        this.selectYear = false;
        this.selectYear_range = false;
        this.selectTime = false;
        this.selectorPos = null;
        this.scrollDiff = 0;
        this.prevViewDisabled = false;
        this.nextViewDisabled = false;
        this.prevDobViewDisabled = false;
        this.nextDobViewDisabled = false;
        this.prevViewDisabled_range = false;
        this.nextViewDisabled_range = false;
        this.prevDobViewDisabled_range = false;
        this.nextDobViewDisabled_range = false;
        /**
         * 多选
         */
        this.selectedDates = [];
        // 禁用日期时间控件中的时间段的小时
        this.disabledHours = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes = (/**
         * @param {?} hour
         * @return {?}
         */
        (hour) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        (hour, minute) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
        this.disabledHours2 = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes2 = (/**
         * @param {?} hour
         * @return {?}
         */
        (hour) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds2 = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        (hour, minute) => {
            /** @type {?} */
            const min = this.opts.disableUntil;
            /** @type {?} */
            const max = this.opts.disableSince;
            /** @type {?} */
            const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;
            /** @type {?} */
            const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
        this.btnDynamicDisabled = true;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getTimeStr(date) {
        /** @type {?} */
        const hour = this.utilService.preZero(date.getHours());
        /** @type {?} */
        const minute = this.utilService.preZero(date.getMinutes());
        /** @type {?} */
        const second = this.utilService.preZero(date.getSeconds());
        return `${hour}:${minute}:${second}`;
    }
    /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    initialize(opts, defaultMonth, selectorPos, inputValue, dc, cvc, rds, cbe) {
        this.opts = opts;
        this.selectorPos = selectorPos;
        this.weekDays.length = 0;
        const { defaultView, dateRange, firstDayOfWeek, dayLabels, stylesData, yearTxt, multiSelect, separator, selectedOrderBy } = this.opts;
        this.visibleMonth.yearTxt = yearTxt;
        this.visibleMonth_range.yearTxt = yearTxt;
        this.multiSelect = multiSelect;
        // if (stylesData.styles.length) {
        //     const styleElTemp: any = this.renderer.createElement(STYLE);
        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));
        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);
        // }
        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);
        if (this.dayIdx !== -1) {
            /** @type {?} */
            let idx = this.dayIdx;
            // tslint:disable-next-line:prefer-for-of
            for (let i = 0; i < this.weekDayOpts.length; i++) {
                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);
                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;
            }
        }
        /** @type {?} */
        let today = this.getToday();
        /** @type {?} */
        const isInDisableRange = this.utilService.isDisabledDate(today, this.opts);
        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);
        switch (defaultView) {
            case DefaultView.Month:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };
                break;
            case DefaultView.Year:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };
                break;
            default:
                this.selectedMonth = { monthNbr: today.month, year: today.year };
                if (today.month >= 12) {
                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };
                }
                else {
                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };
                }
                break;
        }
        if (defaultMonth && defaultMonth.length) {
            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);
            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);
            if (this.selectedMonth_range.monthNbr >= 12) {
                this.selectedMonth_range.year++;
                this.selectedMonth_range.monthNbr = 1;
            }
            else {
                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;
            }
        }
        // 日期多选
        if (this.multiSelect && inputValue) {
            this.selectedDates = inputValue.split(separator).map((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (this.opts.returnFormat === 'yyyyMMdd') {
                    if (n.length > 8) {
                        n = this.dateHlp.formatTo(n, this.opts.returnFormat);
                    }
                }
                /** @type {?} */
                const _dObj = this.utilService.isDateValid(n, this.opts, true);
                return Object.assign({}, _dObj, { value: this.utilService.formatDate(_dObj, this.opts.dateFormat, this.opts.monthLabels) });
            }));
            this.selectedDates = this.utilService.orderSelectedDates(this.selectedDates, selectedOrderBy);
        }
        else {
            if (!dateRange) {
                // Single date mode
                /** @type {?} */
                const date = this.utilService.isDateValid(inputValue, this.opts, true);
                if (this.utilService.isInitializedDate(date)) {
                    this.selectedDate = date;
                    /** @type {?} */
                    const hour = this.utilService.preZero(date.hour);
                    /** @type {?} */
                    const minute = this.utilService.preZero(date.minute);
                    /** @type {?} */
                    const second = this.utilService.preZero(date.second);
                    this.timeVlaue = `${hour}:${minute}:${second}`;
                    this.selectedMonth = { monthNbr: date.month, year: date.year };
                }
            }
            else {
                // Date range mode
                const { begin, end } = this.utilService.isDateValidDateRange(inputValue, this.opts);
                if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {
                    this.selectedDateRange = { begin, end };
                    /** @type {?} */
                    const hour = this.utilService.preZero(begin.hour);
                    /** @type {?} */
                    const minute = this.utilService.preZero(begin.minute);
                    /** @type {?} */
                    const second = this.utilService.preZero(begin.second);
                    this.timeVlaue = `${hour}:${minute}:${second}`;
                    /** @type {?} */
                    const _hour = this.utilService.preZero(end.hour);
                    /** @type {?} */
                    const _minute = this.utilService.preZero(end.minute);
                    /** @type {?} */
                    const _second = this.utilService.preZero(end.second);
                    this.timeVlaue_range = `${_hour}:${_minute}:${_second}`;
                    this.selectedMonth = { monthNbr: begin.month, year: begin.year };
                    if (begin.month === end.month && begin.year === end.year) {
                        if (end.month >= 12) {
                            this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };
                        }
                        else {
                            /** @type {?} */
                            let endyear = end.year;
                            if (defaultView === DefaultView.Month) {
                                endyear = endyear + 1;
                            }
                            this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };
                        }
                    }
                    else {
                        if (defaultView === DefaultView.Month && begin.year === end.year) {
                            this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };
                        }
                        else {
                            this.selectedMonth_range = { monthNbr: end.month, year: end.year };
                        }
                    }
                    // tfs 579358
                    // let endDayWeekNbr = this.utilService.getWeekNumber(end);
                    // if (this.opts.firstDayOfWeek === 'su') {
                    //     endDayWeekNbr -= 1;
                    // }
                    // const weekNbr = this.utilService.getWeekNumber(begin) === endDayWeekNbr ? this.utilService.getWeekNumber(begin): 0;
                    /** @type {?} */
                    const dateObj = this.opts.firstDayOfWeek == 'su' ? end : begin;
                    /** @type {?} */
                    let weekNbr = this.utilService.getWeekNumber(dateObj);
                    this.selectedWeek = { weekNbr, year: begin.year };
                }
            }
        }
        this.dateChanged = dc;
        this.calendarViewChanged = cvc;
        this.rangeDateSelection = rds;
        this.closedByEsc = cbe;
        this.setCalendarVisibleMonth();
        if (defaultView === DefaultView.Month) {
            this.onMonthViewBtnClicked();
            if (dateRange) {
                this.onMonthViewBtnClicked(true);
            }
        }
        else if (defaultView === DefaultView.Year) {
            this.onYearViewBtnClicked();
            if (dateRange) {
                this.onYearViewBtnClicked(true);
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    resetDateValue(value) {
        if (value === ResetDateType.singleDate || value === ResetDateType.both) {
            this.selectedDate = this.utilService.resetDate();
        }
        if (value === ResetDateType.dateRange || value === ResetDateType.both) {
            this.selectedDateRange.begin = this.utilService.resetDate();
            this.selectedDateRange.end = this.utilService.resetDate();
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    resetMonthYearSelect(isSecondCalendar) {
        if (!isSecondCalendar) {
            this.selectMonth = false;
            this.selectYear = false;
        }
        else {
            this.selectMonth_range = false;
            this.selectYear_range = false;
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthViewBtnClicked(isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.selectMonth = !this.selectMonth;
            this.selectYear = false;
            if (this.selectMonth) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth.year = this.selectedMonth.year;
            }
        }
        else {
            this.selectMonth_range = !this.selectMonth_range;
            this.selectYear_range = false;
            if (this.selectMonth_range) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth_range.year = this.selectedMonth_range.year;
            }
            this.cdr.detectChanges();
        }
    }
    /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    onMonthCellClicked(cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            const { year, monthNbr } = this.visibleMonth;
            /** @type {?} */
            const mc = cell.nbr !== monthNbr;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth = false;
            }
        }
        else {
            const { year, monthNbr } = this.visibleMonth_range;
            /** @type {?} */
            const mc = cell.nbr !== monthNbr;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth_range);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth_range = false;
            }
        }
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onMonthCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, MONTH_ROW_COUNT, MONTH_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(M, targetRow, targetCol);
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearViewBtnClicked(isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.visibleMonth.year = this.selectedMonth.year;
            if (!this.selectYear) {
                this.generateYears(this.visibleMonth.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);
            }
            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;
            if (this.opts.showType === 2) {
                this.selectMonth = !this.selectMonth;
            }
            else {
                this.selectMonth = false;
            }
            // this.selectYear = !this.selectYear;
            // this.selectMonth = false;
        }
        else {
            this.visibleMonth_range.year = this.selectedMonth_range.year;
            if (!this.selectYear_range) {
                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);
            }
            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;
            if (this.opts.showType === 2) {
                this.selectMonth_range = !this.selectMonth_range;
            }
            else {
                this.selectMonth_range = false;
            }
        }
        this.cdr.detectChanges();
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellClicked(cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            const { year, monthNbr, monthTxt } = this.visibleMonth;
            /** @type {?} */
            const yc = cell.year !== year;
            this.visibleMonth = { monthTxt, monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear = false;
                this.selectMonth = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear = false;
            }
        }
        else {
            const { year, monthNbr, monthTxt } = this.visibleMonth_range;
            /** @type {?} */
            const yc = cell.year !== year;
            this.visibleMonth_range = {
                monthTxt,
                monthNbr,
                year: cell.year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth_range.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear_range = false;
                this.selectMonth_range = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear_range = false;
            }
        }
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onYearCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, YEAR_ROW_COUNT, YEAR_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(Y, targetRow, targetCol);
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateMonths(isSecondCalendar) {
        /** @type {?} */
        const today = this.getToday();
        const { disableUntil, disableSince } = this.opts;
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        let year;
        /** @type {?} */
        let monthNbr;
        if (!isSecondCalendar) {
            this.months.length = 0;
            year = this.visibleMonth.year;
            monthNbr = this.visibleMonth.monthNbr;
        }
        else {
            this.months_range.length = 0;
            year = this.visibleMonth_range.year;
            monthNbr = this.visibleMonth_range.monthNbr;
        }
        for (let i = 1; i <= 12; i += 3) {
            /** @type {?} */
            const row = [];
            for (let j = i; j < i + 3; j++) {
                /** @type {?} */
                const disabled = this.utilService.isMonthDisabledByDisableUntil({ year, month: j, day: this.daysInMonth(j, year) }, disableUntil) || this.utilService.isMonthDisabledByDisableSince({ year, month: j, day: 1 }, disableSince);
                row.push({
                    nbr: j,
                    name: this.opts.monthLabels[j],
                    currMonth: j === today.month && year === today.year,
                    disabled,
                    monthObj: { year, month: j }
                });
            }
            if (!isSecondCalendar) {
                this.months.push({ row, year });
            }
            else {
                this.months_range.push({ row, year });
            }
        }
        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);
        this.generateCalendar(isSecondCalendar ? this.visibleMonth_range.monthNbr : this.visibleMonth.monthNbr, year, false, isSecondCalendar);
    }
    /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateYears(inputYear, isSecondCalendar) {
        const { minYear, maxYear, disableUntil, disableSince } = this.opts;
        /** @type {?} */
        let y = inputYear - (inputYear % 10);
        const { year, monthNbr } = this.visibleMonth;
        if (!isSecondCalendar) {
            this.years.length = 0;
        }
        else {
            if (!this.years_range.length && ((this.years && this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year) && this.opts.showType === 3) {
                y += 10;
            }
            this.years_range.length = 0;
            /** @type {?} */
            const allYears = flatten(this.years_range);
            if (allYears.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.year == inputYear)) > -1) {
                y = this.years_range[3][2].year;
            }
        }
        /** @type {?} */
        const today = this.getToday();
        for (let i = y - 1; i < y + 10; i += 3) {
            /** @type {?} */
            const row = [];
            for (let j = i; j < i + 3; j++) {
                /** @type {?} */
                const disabled = this.utilService.isMonthDisabledByDisableUntil({
                    year: j,
                    month: monthNbr,
                    day: this.daysInMonth(monthNbr, j)
                }, disableUntil) ||
                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);
                /** @type {?} */
                const minMax = j < minYear || j > maxYear;
                row.push({
                    year: j,
                    currYear: j === today.year,
                    selected: j === year,
                    disabled: disabled || minMax,
                    yearObj: { year: j }
                });
            }
            if (!isSecondCalendar) {
                this.years.push(row);
            }
            else {
                this.years_range.push(row);
            }
        }
        if (!isSecondCalendar) {
            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);
        }
        else {
            this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year, this.years_range[3][1].year, isSecondCalendar);
        }
    }
    /**
     * @return {?}
     */
    setCalendarVisibleMonth() {
        // Sets visible month of calendar
        const { year, monthNbr } = this.selectedMonth;
        this.visibleMonth = {
            monthTxt: this.opts.monthLabels[monthNbr],
            monthNbr,
            year,
            yearTxt: this.opts.yearTxt
        };
        // Create current month
        if (this.opts.dateRange) {
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],
                monthNbr: this.selectedMonth_range.monthNbr,
                year: this.selectedMonth_range.year,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);
        }
        this.generateCalendar(monthNbr, year, true, false);
    }
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onPrevNavigateBtnClicked(event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);
                }
            }
        }
    }
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onNextNavigateBtnClicked(event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    setDateViewMonth(isSecondCalendar, isNext) {
        /** @type {?} */
        let change;
        if (isNext === undefined) {
            change = 0;
        }
        else {
            change = isNext ? 1 : -1;
        }
        if (!isSecondCalendar) {
            const { year, monthNbr } = this.visibleMonth;
            /** @type {?} */
            const d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            const y = d.getFullYear();
            /** @type {?} */
            const m = d.getMonth() + 1;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
        else {
            const { year, monthNbr } = this.visibleMonth_range;
            /** @type {?} */
            const d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            const y = d.getFullYear();
            /** @type {?} */
            const m = d.getMonth() + 1;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onCloseSelector(event) {
        /** @type {?} */
        const keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.esc) {
            this.closedByEsc();
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellClicked(cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        this.selectDate(cell.dateObj);
        this.resetMonthYearSelect(isSecondCalendar);
    }
    /**
     * @param {?} cell
     * @return {?}
     */
    onDayCellKeyDown(cell) {
        // Make possible to move focus by arrow keys
        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);
        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, DATE_ROW_COUNT, DATE_COL_COUNT);
        if (moveFocus) {
            this.focusCellElement(D, targetRow, targetCol);
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const w of this.dates) {
                for (const day of w.week) {
                    day.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                            (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                }
            }
        }
        else {
            for (const w of this.dates_range) {
                for (const day of w.week) {
                    day.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                            (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const w of this.dates) {
                for (const day of w.week) {
                    day.range = false;
                }
            }
        }
        else {
            for (const w of this.dates_range) {
                for (const day of w.week) {
                    day.range = false;
                }
            }
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                            (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                }
            }
        }
        else {
            for (const item of this.months_range) {
                for (const month of item.row) {
                    month.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                            (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onMonthCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range = false;
                }
            }
        }
        else {
            for (const item of this.months) {
                for (const month of item.row) {
                    month.range = false;
                }
            }
        }
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellMouseEnter(cell, isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.years) {
                for (const year of item) {
                    year.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                            (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                }
            }
        }
        else {
            for (const item of this.years_range) {
                for (const year of item) {
                    year.range =
                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                            (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                }
            }
        }
    }
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onYearCellMouseLeave(isSecondCalendar) {
        if (isSecondCalendar) {
            for (const item of this.years) {
                for (const year of item) {
                    year.range = false;
                }
            }
        }
        else {
            for (const item of this.years_range) {
                for (const year of item) {
                    year.range = false;
                }
            }
        }
    }
    /**
     * @param {?} weekData
     * @return {?}
     */
    onWeekClicked(weekData) {
        /** @type {?} */
        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };
        if (showTime) {
            weekData.week[0].dateObj.hour = 0;
            weekData.week[0].dateObj.minute = 0;
            weekData.week[0].dateObj.second = 0;
            weekData.week[6].dateObj.hour = 23;
            weekData.week[6].dateObj.minute = 59;
            weekData.week[6].dateObj.second = 59;
        }
        this.selectDate(weekData.week[0].dateObj);
        this.selectDate(weekData.week[6].dateObj);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getSourceRowAndColumnFromEvent(event) {
        /** @type {?} */
        let sourceRow = 0;
        /** @type {?} */
        let sourceCol = 0;
        if (event.target && event.target.id) {
            // value of id is for example: m_0_1 (first number = row, second number = column)
            /** @type {?} */
            const arr = event.target.id.split(UNDER_LINE);
            sourceRow = Number(arr[1]);
            sourceCol = Number(arr[2]);
        }
        return { sourceRow, sourceCol };
    }
    /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    getTargetFocusRowAndColumn(event, row, col, rowCount, colCount) {
        /** @type {?} */
        let moveFocus = false;
        /** @type {?} */
        let targetRow = row;
        /** @type {?} */
        let targetCol = col;
        /** @type {?} */
        const keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.upArrow && row > 0) {
            moveFocus = true;
            targetRow--;
        }
        else if (keyCode === KeyCode.downArrow && row < rowCount) {
            moveFocus = true;
            targetRow++;
        }
        else if (keyCode === KeyCode.leftArrow && col > 0) {
            moveFocus = true;
            targetCol--;
        }
        else if (keyCode === KeyCode.rightArrow && col < colCount) {
            moveFocus = true;
            targetCol++;
        }
        return { moveFocus, targetRow, targetCol };
    }
    /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    focusCellElement(type, row, col) {
        /** @type {?} */
        const elem = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);
        if (elem) {
            elem.focus();
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    selectDate(date) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // Date range
            /** @type {?} */
            const isBeginDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.end) &&
                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);
            if (isBeginDateInitialized && isEndDateInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = date;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else if (!isBeginDateInitialized) {
                // begin date
                this.selectedDateRange.begin = date;
                if (!isEndDateInitialized) {
                    this.selectedDateRange.end = date;
                }
                this.rangeDateSelection({
                    isBegin: true,
                    date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = date;
                    this.rangeDateSelection({
                        isBegin: true,
                        date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                else {
                    this.selectedDateRange.end = date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            // Single date
            this.selectedDate = date;
            if (!this.opts.showTime) {
                this.dateChanged(this.utilService.getDateModel(this.selectedDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
            }
            else {
                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {
                    this.timeVlaue = this.getTimeStr(new Date);
                }
            }
        }
    }
    /**
     * @param {?} month
     * @return {?}
     */
    toSelectMonth(month) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            const isBeginMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.end);
            if (isBeginMonthInitialized && isEndMonthInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginMonthInitialized) {
                // begin date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier({ year: month.year, month: month.monthNbr }, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.selectedMonth = month;
            this.dateChanged(this.utilService.getDateModel({ year: month.year, month: month.monthNbr }, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    }
    /**
     * @param {?} year
     * @return {?}
     */
    toSelectYear(year) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            const isBeginYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.begin);
            /** @type {?} */
            const isEndYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.end);
            if (isBeginYearInitialized && isEndYearInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = year;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginYearInitialized) {
                // begin date
                this.selectedDateRange.begin = year;
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                const firstDateEarlier = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    const _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = year;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = year;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.dateChanged(this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    }
    /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    monthStartIdx(y, m) {
        // Month start index
        /** @type {?} */
        const d = new Date();
        d.setDate(1);
        d.setMonth(m - 1);
        d.setFullYear(y);
        /** @type {?} */
        const idx = d.getDay() + this.sundayIdx();
        return idx >= 7 ? idx - 7 : idx;
    }
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    daysInMonth(m, y) {
        // Return number of days of current month
        return new Date(y, m, 0).getDate();
    }
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    daysInPrevMonth(m, y) {
        // Return number of days of the previous month
        /** @type {?} */
        const d = this.getDate(y, m, 1);
        d.setMonth(d.getMonth() - 1);
        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());
    }
    /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    isCurrDay(d, m, y, cmo, today) {
        // Check is a given date the today
        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;
    }
    /**
     * @return {?}
     */
    getWidth() {
        /** @type {?} */
        const hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;
        if (this.opts.dateRange && this.opts.showType !== 4) {
            return hasShortCuts ? '660px' : '574px';
        }
        else {
            /** @type {?} */
            const w = (hasShortCuts ? 380 : 287) + ((this.opts.viewType === ViewType.Together || this.multiSelect) ? 200 : 0);
            return w + 'px';
        }
    }
    /**
     * @return {?}
     */
    getToday() {
        /** @type {?} */
        const date = new Date();
        if (this.opts.showTime) {
            return {
                year: date.getFullYear(),
                month: date.getMonth() + 1,
                day: date.getDate(),
                hour: date.getHours(),
                minute: date.getMinutes(),
                second: date.getSeconds()
            };
        }
        else {
            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getDayNumber(date) {
        // Get day number: su=0, mo=1, tu=2, we=3 ...
        /** @type {?} */
        const d = this.getDate(date.year, date.month, date.day);
        return d.getDay();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getWeekday(date) {
        // Get weekday: su, mo, tu, we ...
        return this.weekDayOpts[this.getDayNumber(date)];
    }
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    getDate(year, month, day) {
        // Creates a date object from given year, month and day
        return new Date(year, month - 1, day, 0, 0, 0, 0);
    }
    /**
     * @return {?}
     */
    sundayIdx() {
        // Index of Sunday day
        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;
    }
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    generateCalendar(m, y, notifyChange, isSecondCalendar) {
        if (!isSecondCalendar) {
            this.dates.length = 0;
        }
        else {
            this.dates_range.length = 0;
        }
        /** @type {?} */
        const today = this.getToday();
        /** @type {?} */
        const monthStart = this.monthStartIdx(y, m);
        /** @type {?} */
        const dInThisM = this.daysInMonth(m, y);
        /** @type {?} */
        const dInPrevM = this.daysInPrevMonth(m, y);
        /** @type {?} */
        let dayNbr = 1;
        /** @type {?} */
        let cmo = MonthId.prev;
        for (let i = 1; i < 7; i++) {
            /** @type {?} */
            const week = [];
            if (i === 1) {
                // First week
                /** @type {?} */
                const pm = dInPrevM - monthStart + 1;
                // Previous month
                for (let j = pm; j <= dInPrevM; j++) {
                    /** @type {?} */
                    const date = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(j, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                }
                cmo = MonthId.curr;
                // Current month
                /** @type {?} */
                const daysLeft = 7 - week.length;
                for (let j = 0; j < daysLeft; j++) {
                    /** @type {?} */
                    const date = { year: y, month: m, day: dayNbr };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            else {
                // Rest of the weeks
                for (let j = 1; j < 8; j++) {
                    if (dayNbr > dInThisM) {
                        // Next month
                        dayNbr = 1;
                        cmo = MonthId.next;
                    }
                    /** @type {?} */
                    const date = {
                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,
                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,
                        day: dayNbr
                    };
                    week.push({
                        dateObj: date,
                        cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            // let weekNbr = this.opts.showWeekNumbers ? this.utilService.getWeekNumber(week[0].dateObj) : 0;
            /** @type {?} */
            let weekNbr = 0;
            if (this.opts.showWeekNumbers) {
                /** @type {?} */
                const dateIndex = this.opts.firstDayOfWeek == 'su' ? 6 : 0;
                weekNbr = this.utilService.getWeekNumber(week[dateIndex].dateObj);
                // if (this.opts.firstDayOfWeek === 'su') {
                //     endDayWeekNbr -= 1;
                // }
                // weekNbr = this.utilService.getWeekNumber(week[0].dateObj) === endDayWeekNbr ? this.utilService.getWeekNumber(week[0].dateObj): 0;
            }
            if (!isSecondCalendar) {
                this.dates.push({ week, weekNbr, year: y });
            }
            else {
                this.dates_range.push({ week, weekNbr, year: y });
            }
        }
        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);
        if (notifyChange) {
            // Notify parent
            this.calendarViewChanged({
                year: y,
                month: m,
                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },
                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }
            });
        }
    }
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar) {
        /** @type {?} */
        let dpm = false;
        /** @type {?} */
        let dnm = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpm = this.utilService.isMonthDisabledByDisableUntil({
            year: m === 1 ? y - 1 : y,
            month: m === 1 ? 12 : m - 1,
            day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)
        }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    }
    /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setMonthViewHeaderBtnDisabledState(y, isSecondCalendar) {
        /** @type {?} */
        let dpm = false;
        /** @type {?} */
        let dnm = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = y === minYear || dpm;
            this.nextViewDisabled = y === maxYear || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = y === minYear || dpm;
            this.nextViewDisabled_range = y === maxYear || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    }
    /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    setYearViewHeaderBtnDisabledState(yp, yn, isSecondCalendar) {
        /** @type {?} */
        let dpy = false;
        /** @type {?} */
        let dny = false;
        const { disableUntil, disableSince, minYear, maxYear } = this.opts;
        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);
        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = yp <= minYear || dpy;
            this.nextViewDisabled = yn >= maxYear || dny;
            this.prevDobViewDisabled = yp <= minYear || dpy;
            this.nextDobViewDisabled = yn >= maxYear || dny;
        }
        else {
            this.prevViewDisabled_range = yp <= minYear || dpy;
            this.nextViewDisabled_range = yn >= maxYear || dny;
            this.prevDobViewDisabled_range = yp <= minYear || dpy;
            this.nextDobViewDisabled_range = yn >= maxYear || dny;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onContainerClick(event) {
        event.stopPropagation();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClickTimeBtn(event) {
        event.stopPropagation();
        if (this.opts.dateRange) {
            /** @type {?} */
            const beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            const endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);
            /** @type {?} */
            const now = new Date();
            if (!beginIsInitializedDate || !endIsInitializedDate) {
                // 直接点击确定显示本月和下月
                if (!beginIsInitializedDate) {
                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
                }
                /** @type {?} */
                let endYear = now.getFullYear();
                /** @type {?} */
                let endmonth = now.getMonth() + 1;
                if (endmonth >= 12) {
                    endYear = endYear + 1;
                    endmonth = 1;
                }
                // else {
                //     endmonth = endmonth + this.opts.monthRangeValue;
                // }
                this.selectedDateRange.end = Object.assign({}, this.selectedDateRange.begin);
                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };
                // 点击selectTime之前给dateRange赋两个时间值
                this.timeVlaue = this.getTimeStr(now);
                this.timeVlaue_range = this.getTimeStr(now);
            }
            if (!this.timeVlaue_range) {
                this.timeVlaue_range = this.getTimeStr(now);
            }
            this.timeVlaue_range = this.checkTimeValues(this.timeVlaue_range);
        }
        else {
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                /** @type {?} */
                const now = new Date();
                // 点击selectTime之前赋值
                this.timeVlaue = this.getTimeStr(now);
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (!this.timeVlaue) {
            /** @type {?} */
            const now = new Date();
            // 点击selectTime之前赋值
            this.timeVlaue = this.getTimeStr(now);
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        this.timeVlaue = this.checkTimeValues(this.timeVlaue);
        if (this.selectYear) {
            this.selectYear = false;
        }
        if (this.selectMonth) {
            this.selectMonth = false;
        }
        if (this.selectYear_range) {
            this.selectYear_range = false;
        }
        if (this.selectMonth_range) {
            this.selectMonth_range = false;
        }
        this.selectTime = !this.selectTime;
        this.cdr.detectChanges();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onShowDynamicView($event) {
        $event.stopPropagation();
        this.opts.showDynamicView = true;
        this.dynamicViewShow.emit({ showDynamicView: true });
        this.cdr.detectChanges();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onShowDatePanel($event) {
        $event.stopPropagation();
        this.opts.showDynamicView = false;
        this.dynamicViewShow.emit({ showDynamicView: false });
        this.cdr.detectChanges();
    }
    /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    getTimeValue(isDateRange) {
        /** @type {?} */
        const t = { start: null, end: null };
        if (this.timeVlaue) {
            /** @type {?} */
            const timeArr = this.timeVlaue.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
            if (timeArr.length >= 2) {
                t.start = {
                    hour: timeArr[0],
                    minute: timeArr[1],
                    second: timeArr[2] ? timeArr[2] : 0
                };
            }
        }
        else {
            /** @type {?} */
            const nowDate = new Date();
            /** @type {?} */
            const hour = nowDate.getHours();
            /** @type {?} */
            const minute = nowDate.getMinutes();
            /** @type {?} */
            const second = nowDate.getSeconds();
            if (this.opts.dateRange) {
                t.start = { hour: 0, minute: 0, second: 0 };
            }
            else {
                t.start = { hour, minute, second };
            }
        }
        if (isDateRange) {
            if (this.timeVlaue_range) {
                /** @type {?} */
                const timeArr_range = this.timeVlaue_range.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (timeArr_range.length >= 2) {
                    t.end = {
                        hour: timeArr_range[0],
                        minute: timeArr_range[1],
                        second: timeArr_range[2] ? timeArr_range[2] : 0
                    };
                }
            }
            else {
                /** @type {?} */
                const hour = 23;
                /** @type {?} */
                const minute = 59;
                /** @type {?} */
                const second = 59;
                t.end = { hour, minute, second };
            }
        }
        return t;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClickOkBtn(event) {
        event.stopPropagation();
        /** @type {?} */
        let timeObj = null;
        /** @type {?} */
        let timeObj_range = null;
        /** @type {?} */
        let selectedDate = null;
        /** @type {?} */
        let selectedDate_range = null;
        if (this.opts.showTime) {
            const { start, end } = this.getTimeValue(this.opts.dateRange);
            timeObj = start;
            timeObj_range = end;
        }
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;
        if (!this.opts.dateRange) {
            selectedDate = Object.assign({}, this.initializedDate(this.selectedDate), timeObj);
            /** @type {?} */
            const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
            /** @type {?} */
            const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
            selectedDate = !isInDisableRange
                ? selectedDate
                : Object.assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
            this.checkTimeValue(selectedDate);
        }
        else {
            /** @type {?} */
            const begin = Object.assign({}, this.initializedDate(this.selectedDateRange.begin), timeObj);
            /** @type {?} */
            const end = Object.assign({}, this.initializedDate(this.selectedDateRange.end, begin), timeObj_range);
            this.checkTimeValue(begin);
            this.checkTimeValue(end);
            selectedDate_range = { begin, end };
        }
        /** @type {?} */
        const dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onTodayClick($event) {
        $event.stopPropagation();
        /** @type {?} */
        let timeObj = null;
        /** @type {?} */
        let selectedDate = null;
        /** @type {?} */
        let selectedDate_range = null;
        if (this.opts.showTime) {
            const { start } = this.getTimeValue(false);
            timeObj = start;
        }
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;
        selectedDate = Object.assign({}, this.initializedDate({ year: 0, month: 0, day: 0 }), timeObj);
        /** @type {?} */
        const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
        /** @type {?} */
        const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
        selectedDate = !isInDisableRange
            ? selectedDate
            : Object.assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
        /** @type {?} */
        const dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    }
    /**
     * @param {?} $event
     * @param {?} dynamicviewRef
     * @return {?}
     */
    onDynamicOkClick($event, dynamicviewRef) {
        if (dynamicviewRef) {
            /** @type {?} */
            const text = dynamicviewRef.formatValue();
            /** @type {?} */
            const value = dynamicviewRef.getValue();
            value.text = text;
            this.opts.dynamicValueChanged(value);
        }
    }
    /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    initializedDate(date, otherDate = { year: 0, month: 0, day: 0 }) {
        /** @type {?} */
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {
            /** @type {?} */
            const year = new Date().getFullYear();
            /** @type {?} */
            const month = new Date().getMonth() + 1;
            /** @type {?} */
            const day = new Date().getDate();
            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableUntil : { year, month, day };
        }
        else if (!this.utilService.isInitializedDate(date)) {
            /** @type {?} */
            const year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;
            /** @type {?} */
            let month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;
            if (!date.month) {
                month = otherDate.month;
            }
            /** @type {?} */
            const day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;
            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableSince : { year, month, day };
        }
        return date;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    setTime(date) {
        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;
        if (date instanceof Date) {
            if (this.opts.showType !== 4 && !this.opts.dateRange) {
                /** @type {?} */
                let targetDate;
                if (this.opts.showTime) {
                    targetDate = {
                        year: date.getFullYear(),
                        month: date.getMonth() + 1,
                        day: date.getDate(),
                        hour: date.getHours(),
                        minute: date.getMinutes(),
                        second: date.getSeconds()
                    };
                }
                else {
                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
                }
                /** @type {?} */
                const dateModel = this.utilService.getDateModel(targetDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
            else {
                // 启用周选择时  快捷按钮参数为单个日期
                /** @type {?} */
                const dateModel = this.utilService.getDateModel(null, this.utilService.getNowWeekTime(date), dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
        }
        else if (date instanceof Object && this.opts.dateRange) {
            /** @type {?} */
            let targetDateRange;
            const { begin, end } = date;
            if (!begin || !end) {
                return;
            }
            if (this.opts.showTime) {
                targetDateRange = {
                    begin: {
                        year: begin.getFullYear(),
                        month: begin.getMonth() + 1,
                        day: begin.getDate(),
                        hour: begin.getHours(),
                        minute: begin.getMinutes(),
                        second: begin.getSeconds()
                    },
                    end: {
                        year: end.getFullYear(),
                        month: end.getMonth() + 1,
                        day: end.getDate(),
                        hour: end.getHours(),
                        minute: end.getMinutes(),
                        second: end.getSeconds()
                    }
                };
            }
            else {
                targetDateRange = {
                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },
                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }
                };
            }
            /** @type {?} */
            const dateModel = this.utilService.getDateModel(null, targetDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
            this.dateChanged(dateModel, closeSelectorOnDateSelect);
        }
        else {
            // console.warn('参数必须符合要求！');
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSelectCurrentWeek($event) {
        $event.stopPropagation();
        /** @type {?} */
        const firstDay = this.opts.firstDayOfWeek === 'su' ? '日' : '一';
        const { begin, end } = this.dateHlp.getNowWeekTime(new Date(), firstDay);
        /** @type {?} */
        const year = new Date().getFullYear();
        /** @type {?} */
        const weekNbr = this.utilService.getWeekNumber(begin);
        /** @type {?} */
        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr, year };
        if (showTime) {
            begin['hour'] = 0;
            begin['minute'] = 0;
            begin['second'] = 0;
            end['hour'] = 23;
            end['minute'] = 59;
            end['second'] = 59;
        }
        this.selectDate(begin);
        this.selectDate(end);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onDynamicValueChanged($event) {
        this.btnDynamicDisabled = !$event;
    }
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    onDayCellClickedForMultiDates(cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        const { dateFormat, monthLabels, maxSelected, closeSelectorOnDateSelect, showTime, returnFormat, selectedOrderBy } = this.opts;
        /** @type {?} */
        let selectedDates = [];
        /** @type {?} */
        const isSelected = this.selectedDates.find((/**
         * @param {?} n
         * @return {?}
         */
        n => this.utilService.isDateSame(n, cell.dateObj)));
        if (!isSelected) {
            if (!maxSelected || (maxSelected && this.selectedDates.length < maxSelected)) {
                selectedDates = [...this.selectedDates, Object.assign({}, cell.dateObj, { value: this.utilService.formatDate(cell.dateObj, dateFormat, monthLabels) })];
            }
            else {
                selectedDates = [...this.selectedDates];
                if (this.showNotify) {
                    this.showNotify();
                }
            }
        }
        else {
            selectedDates = this.selectedDates.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n !== isSelected));
        }
        selectedDates = this.utilService.orderSelectedDates(selectedDates, selectedOrderBy);
        this.selectedDates = selectedDates;
        this.resetMonthYearSelect(isSecondCalendar);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMultiDatesOkClicked($event) {
        $event.stopPropagation();
        this.multiDatesChanged(this.selectedDates);
    }
    /**
     * @param {?} removeItem
     * @return {?}
     */
    onMultiDateRemoved(removeItem) {
        this.selectedDates = this.selectedDates.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n !== removeItem));
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onMultiDateClear($event) {
        this.selectedDates = [];
    }
    /**
     * @return {?}
     */
    showGoBackToday() {
        const { monthNbr, year } = this.visibleMonth;
        const { year: currentYear, month } = this.getToday();
        return monthNbr != month || year != currentYear;
    }
    /**
     * @private
     * @param {?} year
     * @param {?} month
     * @return {?}
     */
    setCalendarView(year, month) {
        if (this.visibleMonth.year != year || this.visibleMonth.monthNbr != month) {
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[month],
                monthNbr: month,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = year;
            this.selectedMonth.monthNbr = month;
            //tfs638280
            this.selectMonth = false;
            this.selectYear = false;
            this.generateCalendar(month, year, true);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    gototodayView($event) {
        const { year, month } = this.getToday();
        this.setCalendarView(year, month);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSelectDateClicked($event) {
        if (!$event) {
            return;
        }
        const { year, month } = $event;
        this.setCalendarView(year, month);
    }
    /**
     * @private
     * @param {?} length
     * @param {?=} step
     * @param {?=} start
     * @return {?}
     */
    makeRange(length, step = 1, start = 0) {
        step = Math.ceil(step);
        return new Array(Math.ceil(length / step))
            .fill(0)
            .map((/**
         * @param {?} _
         * @param {?} i
         * @return {?}
         */
        (_, i) => (i + start) * step));
    }
    /**
     * @private
     * @return {?}
     */
    buildHours() {
        /** @type {?} */
        let hourRanges = 24;
        /** @type {?} */
        let disabledHours = this.disabledHours && this.disabledHours();
        /** @type {?} */
        let startIndex = 0;
        /** @type {?} */
        let hourRange = this.makeRange(hourRanges, this.opts.hourStep, startIndex).map((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            return {
                index: r,
                disabled: this.disabledHours && disabledHours.indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return hourRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            return !(n.disabled);
        }));
    }
    /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    buildMinutes(timeObj) {
        /** @type {?} */
        let minuteRange = this.makeRange(60, this.opts.minuteStep).map((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            return {
                index: r,
                disabled: this.disabledMinutes &&
                    this.disabledMinutes((/** @type {?} */ (timeObj.hours))).indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return minuteRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            return !(n.disabled);
        }));
    }
    /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    buildSeconds(timeObj) {
        /** @type {?} */
        let secondRange = this.makeRange(60, this.opts.secondStep).map((/**
         * @param {?} r
         * @return {?}
         */
        r => {
            return {
                index: r,
                disabled: this.disabledSeconds &&
                    this.disabledSeconds((/** @type {?} */ (timeObj.hours)), (/** @type {?} */ (timeObj.minutes))).indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return secondRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            return !(n.disabled);
        }));
    }
    /**
     * @param {?} timeValue
     * @return {?}
     */
    checkTimeValues(timeValue) {
        if (timeValue) {
            /** @type {?} */
            let times = timeValue.split(':').map((/**
             * @param {?} n
             * @return {?}
             */
            n => parseInt(n, 10)));
            /** @type {?} */
            const timeObj = {
                hour: times[0],
                minute: times[1],
                second: times[2]
            };
            if (this.opts.hourStep > 1) {
                /** @type {?} */
                const hours = this.buildHours();
                if (!hours.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.index === timeObj.hour))) {
                    timeObj.hour = 0;
                }
            }
            if (this.opts.minuteStep > 1) {
                /** @type {?} */
                const minutes = this.buildMinutes({ hours: timeObj.hour });
                if (!minutes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.index === timeObj.minute))) {
                    timeObj.minute = 0;
                }
            }
            if (this.opts.secondStep > 1) {
                /** @type {?} */
                const seconds = this.buildSeconds({ hours: timeObj.hour, minutes: timeObj.minute });
                if (!seconds.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n.index === timeObj.second))) {
                    timeObj.second = 0;
                }
            }
            return `${timeObj.hour || '00'}:${timeObj.minute || '00'}:${timeObj.second || '00'}`;
        }
        return timeValue;
    }
    /**
     * @param {?} dateObj
     * @return {?}
     */
    checkTimeValue(dateObj) {
        if (!this.opts.showTime) {
            return;
        }
        if (this.opts.hourStep > 1) {
            /** @type {?} */
            const hours = this.buildHours();
            if (!hours.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.index === parseInt('' + dateObj.hour, 10)))) {
                dateObj.hour = 0;
            }
        }
        if (this.opts.minuteStep > 1) {
            /** @type {?} */
            const minutes = this.buildMinutes({ hours: dateObj.hour });
            if (!minutes.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.index === parseInt('' + dateObj.minute, 10)))) {
                dateObj.minute = 0;
            }
        }
        if (this.opts.secondStep > 1) {
            /** @type {?} */
            const seconds = this.buildSeconds({ hours: dateObj.hour, minutes: dateObj.minute });
            if (!seconds.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.index === parseInt('' + dateObj.second, 10)))) {
                dateObj.second = 0;
            }
        }
    }
}
CalendarComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datepicker-calendar',
                template: "<div class=\"f-datepicker-container\" #selectorEl *ngIf=\"!multiSelect\"\r\n    [ngStyle]=\"{\r\n        top: selectorPos.top + 'px',\r\n        left: selectorPos.left + 'px',\r\n        width: getWidth()\r\n    }\"\r\n    (keyup)=\"onCloseSelector($event)\"\r\n    tabindex=\"0\"\r\n    (click)=\"onContainerClick($event)\"\r\n    style=\"transition: all 0.2s ease 0s;\"\r\n    [style.display]=\"(opts?.enableDynamic ? !opts?.showDynamicView: true ) ? '': 'none'\"\r\n>\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\" >\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClicked($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n            [hourStep]=\"opts.hourStep || 1\"\r\n            [minuteStep]=\"opts.minuteStep || 1\"\r\n            [secondStep]=\"opts.secondStep || 1\"\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n    <div class=\"f-datepicker-content\" *ngIf=\"opts.dateRange && opts.showType !== 4\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [visibleMonth]=\"visibleMonth_range\"\r\n            [selectMonth]=\"selectMonth_range\"\r\n            [selectYear]=\"selectYear_range\"\r\n            [prevViewDisabled]=\"prevViewDisabled_range\"\r\n            [nextViewDisabled]=\"nextViewDisabled_range\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled_range\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled_range\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked(true)\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked(true)\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth_range && !selectYear_range && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates_range\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (dayCellClicked)=\"onDayCellClicked($event, true)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave(true)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth_range\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, true)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave(true)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear_range\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event, true)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave(true)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue_range\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours2\"\r\n            [disabledMinutes]=\"disabledMinutes2\"\r\n            [disabledSeconds]=\"disabledSeconds2\"\r\n            [format]=\"opts.timeFormat\"\r\n            [hourStep]=\"opts.hourStep || 1\"\r\n            [minuteStep]=\"opts.minuteStep || 1\"\r\n            [secondStep]=\"opts.secondStep || 1\"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-content\" *ngIf=\"!opts.dateRange && opts.viewType === 'together' && opts.showTime\" style=\"width: 190px;margin-left: 10px;\">\r\n\r\n        <div style=\"height: 41px;\r\n        border-bottom: 1px solid #E4E7EF;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        font-size: 16px;\r\n        font-weight: 500;margin-bottom: 15px;\">{{ timeVlaue }}</div>\r\n\r\n        <time-picker-panel\r\n        [(ngModel)]=\"timeVlaue\"\r\n        [opened]=\"true\"\r\n        [inDatePicker]=\"true\"\r\n        [disabledHours]=\"disabledHours\"\r\n        [disabledMinutes]=\"disabledMinutes\"\r\n        [disabledSeconds]=\"disabledSeconds\"\r\n        [selectCurrentTimeWhenNull]=\"false\"\r\n        [hourStep]=\"opts.hourStep || 1\"\r\n        [minuteStep]=\"opts.minuteStep || 1\"\r\n        [secondStep]=\"opts.secondStep || 1\"\r\n        [format]=\"opts.timeFormat\"></time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\" *ngIf=\"opts.showTime || opts?.enableDynamic\">\r\n        <button class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts?.enableDynamic\" style=\"text-align: left;\" (click)=\"onShowDynamicView($event)\">\r\n            {{ opts?.dynamicLocale.setting }}\r\n        </button>\r\n\r\n        <button (click)=\"onClickTimeBtn($event)\" class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts.showTime && opts.viewType === 'switch'\">\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : \"Select Date\"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : \"Select Time\"\r\n            }}\r\n        </button>\r\n        <button (click)=\"onClickOkBtn($event)\" class=\"btn btn-primary f-datepicker-makesure-btn\" *ngIf=\"opts.showTime\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n\r\n        <button (click)=\"onTodayClick($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;\" *ngIf=\"opts?.enableDynamic && !opts.showTime\">    \r\n            {{opts?.dynamicLocale.today}}\r\n        </button>\r\n    </div>\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: center;\" *ngIf=\"!opts.showTime && !opts?.enableDynamic && opts.showPresent && !opts.dateRange \">\r\n        <button (click)=\"onTodayClick($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;height: 100%;width: 100px;\">    \r\n            {{ (opts.showType === 1 || opts.showType === 4) ? opts?.dynamicLocale.today :  opts.showType === 2 ? opts?.dynamicLocale.presentMonth : opts?.dynamicLocale.presentYear }}\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: center;\" *ngIf=\"opts.showType === 4 && opts.showPresent\">\r\n        <button (click)=\"onSelectCurrentWeek($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;height: 100%;width: 100px;\">    \r\n            {{ opts?.dynamicLocale.presentWeek }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>\r\n\r\n\r\n<div *ngIf=\"!multiSelect && opts?.enableDynamic\" class=\"f-datepicker-container\" #dynamicViewEle [ngStyle]=\"{\r\n    top: selectorPos.top + 'px',\r\n    left: (selectorPos.left) + 'px',\r\n    width: getWidth()\r\n}\"\r\nstyle=\"transition: all 0.2s ease 0s\"\r\n[style.display]=\"(opts?.enableDynamic && opts?.showDynamicView ) ? '': 'none'\"\r\n(click)=\"$event.stopPropagation()\">\r\n\r\n    <div class=\"f-datepicker-content\" >\r\n        \r\n        <div class=\"f-datepicker-header\" style=\"justify-content: unset;\" >\r\n            <div class=\"f-datepicker-prev-btn\" style=\"padding-left: 8px;position: absolute;\">\r\n                <button type=\"button\" class=\"f-datepicker-header-btn\" (click)=\"onShowDatePanel($event)\">\r\n                    <i class=\"k-icon k-i-arrow-chevron-left\"></i>\r\n                </button>\r\n            </div>\r\n            <div class=\"f-datepicker-monthYearText\" style=\"width: 100%;align-items: center;display: flex;justify-content: center;height: 40px;\">\r\n                {{opts.dynamicLocale.setting}}\r\n            </div>\r\n        </div>\r\n        <lib-dynamic-view #dynamicview [locale]=\"opts?.dynamicLocale\" (valueChange)=\"onDynamicValueChanged($event)\"\r\n            [data]=\"opts?.dynamicValue\" [futureMaxDays]=\"opts?.futureMaxDays || 30\" [previousMaxDays]=\"opts?.previousMaxDays || 30\"></lib-dynamic-view>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\">\r\n        <button (click)=\"onDynamicOkClick($event, dynamicview)\" class=\"btn btn-primary f-datepicker-makesure-btn\" [disabled]=\"btnDynamicDisabled\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div class=\"f-datepicker-container\" tabindex=\"0\" #selectorEl *ngIf=\"multiSelect\"\r\n    [ngStyle]=\"{top: selectorPos.top + 'px',left: selectorPos.left + 'px',width: getWidth()}\"\r\n    (keyup)=\"onCloseSelector($event)\" (click)=\"onContainerClick($event)\"\r\n    style=\"transition: all 0.2s ease 0s;\" [style.display]=\"(opts?.enableDynamic ? !opts?.showDynamicView: true ) ? '': 'none'\">\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\" >\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-multi-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDates]=\"selectedDates\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClickedForMultiDates($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-multi-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n    </div>\r\n    <div class=\"f-datepicker-content\" style=\"width: 198px;border-left: 1px solid #E4E7EF;\">\r\n        <multi-days [selectedDates]=\"selectedDates\" (clicked)=\"onSelectDateClicked($event)\" \r\n        (removed)=\"onMultiDateRemoved($event)\" (clear)=\"onMultiDateClear($event)\" [locales]=\"opts.mulstiDatesLocale\"></multi-days>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\">\r\n        <button class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"showGoBackToday()\" (click)=\"gototodayView($event)\"> {{ opts.mulstiDatesLocale.backtotoday || '\u56DE\u5230\u4ECA\u5929'}} </button>\r\n        <button class=\"btn btn-primary f-datepicker-makesure-btn\" (click)=\"onMultiDatesOkClicked($event)\">    \r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>",
                providers: [UtilService],
                encapsulation: ViewEncapsulation.None
            }] }
];
/** @nocollapse */
CalendarComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: UtilService }
];
CalendarComponent.propDecorators = {
    selectorEl: [{ type: ViewChild, args: ['selectorEl',] }],
    styleEl: [{ type: ViewChild, args: ['styleEl',] }],
    endTimeRef: [{ type: ViewChild, args: ['endTimeRef',] }],
    dynamicViewEle: [{ type: ViewChild, args: ['dynamicViewEle',] }],
    position: [{ type: HostBinding, args: ['style.position',] }],
    dynamicViewShow: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    CalendarComponent.prototype.selectorEl;
    /** @type {?} */
    CalendarComponent.prototype.styleEl;
    /** @type {?} */
    CalendarComponent.prototype.endTimeRef;
    /** @type {?} */
    CalendarComponent.prototype.dynamicViewEle;
    /** @type {?} */
    CalendarComponent.prototype.position;
    /** @type {?} */
    CalendarComponent.prototype.dynamicViewShow;
    /** @type {?} */
    CalendarComponent.prototype.dateHlp;
    /** @type {?} */
    CalendarComponent.prototype.opts;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarComponent.prototype.selectedDateRange;
    /** @type {?} */
    CalendarComponent.prototype.selectedWeek;
    /** @type {?} */
    CalendarComponent.prototype.weekDays;
    /** @type {?} */
    CalendarComponent.prototype.dates;
    /** @type {?} */
    CalendarComponent.prototype.dates_range;
    /** @type {?} */
    CalendarComponent.prototype.months;
    /** @type {?} */
    CalendarComponent.prototype.months_range;
    /** @type {?} */
    CalendarComponent.prototype.years;
    /** @type {?} */
    CalendarComponent.prototype.years_range;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue_range;
    /** @type {?} */
    CalendarComponent.prototype.multiSelect;
    /** @type {?} */
    CalendarComponent.prototype.dayIdx;
    /** @type {?} */
    CalendarComponent.prototype.weekDayOpts;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectYear;
    /** @type {?} */
    CalendarComponent.prototype.selectYear_range;
    /** @type {?} */
    CalendarComponent.prototype.selectTime;
    /** @type {?} */
    CalendarComponent.prototype.dateChanged;
    /** @type {?} */
    CalendarComponent.prototype.calendarViewChanged;
    /** @type {?} */
    CalendarComponent.prototype.rangeDateSelection;
    /** @type {?} */
    CalendarComponent.prototype.multiDatesChanged;
    /** @type {?} */
    CalendarComponent.prototype.closedByEsc;
    /** @type {?} */
    CalendarComponent.prototype.selectorPos;
    /** @type {?} */
    CalendarComponent.prototype.scrollDiff;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.showNotify;
    /**
     * 多选
     * @type {?}
     */
    CalendarComponent.prototype.selectedDates;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours2;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes2;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds2;
    /** @type {?} */
    CalendarComponent.prototype.btnDynamicDisabled;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.utilService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBTXJKLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdEYsT0FBTyxFQUNILEdBQUcsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUMxRixjQUFjLEVBQUUsY0FBYyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQ3hFLE1BQU0sMkJBQTJCLENBQUM7QUFDbkMsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbEUsT0FBTyxFQUFFLE9BQU8sRUFBOEIsTUFBTSxXQUFXLENBQUM7QUFDaEUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBU2pFLE1BQU0sT0FBTyxpQkFBaUI7Ozs7OztJQTJIMUIsWUFBb0IsUUFBbUIsRUFBVSxHQUFzQixFQUFVLFdBQXdCO1FBQXJGLGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUFVLGdCQUFX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LG1DQUFXOztJQUNYLHdDQUEwRDs7SUFFMUQsd0NBQW9COztJQUNwQiw4Q0FBMEI7O0lBQzFCLHVDQUFtQjs7SUFDbkIsNkNBQXlCOztJQUN6Qix1Q0FBbUI7O0lBRW5CLHdDQUF3RDs7SUFDeEQsZ0RBQTJEOztJQUMzRCwrQ0FBeUQ7O0lBQ3pELDhDQUEwQzs7SUFFMUMsd0NBQXdCOztJQUN4Qix3Q0FBd0M7O0lBQ3hDLHVDQUFlOztJQUVmLDZDQUF5Qjs7SUFDekIsNkNBQXlCOztJQUN6QixnREFBNEI7O0lBQzVCLGdEQUE0Qjs7SUFFNUIsbURBQStCOztJQUMvQixtREFBK0I7O0lBQy9CLHNEQUFrQzs7SUFDbEMsc0RBQWtDOztJQUVsQyx1Q0FBdUI7Ozs7O0lBR3ZCLDBDQUFtQjs7SUFTbkIsMENBTUM7O0lBRUQsNENBTUM7O0lBRUQsNENBTUM7O0lBR0QsMkNBTUM7O0lBRUQsNkNBTUM7O0lBRUQsNkNBTUM7O0lBRUQsK0NBQTBCOzs7OztJQUVkLHFDQUEyQjs7Ozs7SUFBRSxnQ0FBOEI7Ozs7O0lBQUUsd0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBWaWV3RW5jYXBzdWxhdGlvbiwgVmlld0NoaWxkLCBSZW5kZXJlcjIsIENoYW5nZURldGVjdG9yUmVmLCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICAgIElNeURhdGUsIElNeURhdGVSYW5nZSwgSU15TW9udGgsIElNeUNhbGVuZGFyRGF5LCBJTXlDYWxlbmRhck1vbnRoLCBJTXlDYWxlbmRhclllYXIsXHJcbiAgICBJTXlXZWVrLCBJTXlPcHRpb25zLCBJTXlTZWxlY3RvclBvc2l0aW9uLCBJTXlDYWxlbmRhclZpZXdDaGFuZ2VkLCBJTXlSYW5nZURhdGVTZWxlY3Rpb24sIElNeURhdGVNb2RlbCxcclxuICAgIElNeU1vbnRoUm93XHJcbn0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgVXRpbFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgRGVmYXVsdFZpZXcsIEtleUNvZGUsIE1vbnRoSWQsIFJlc2V0RGF0ZVR5cGUgfSBmcm9tICcuLi8uLi9lbnVtcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHtcclxuICAgIERPVCwgVU5ERVJfTElORSwgRCwgTSwgWSwgREFURV9ST1dfQ09VTlQsIERBVEVfQ09MX0NPVU5ULCBNT05USF9ST1dfQ09VTlQsIE1PTlRIX0NPTF9DT1VOVCxcclxuICAgIFlFQVJfUk9XX0NPVU5ULCBZRUFSX0NPTF9DT1VOVCwgU1UsIE1PLCBUVSwgV0UsIFRILCBGUiwgU0EsIEVNUFRZX1NUUiwgU1RZTEVcclxufSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgVGltZVBpY2tlclBhbmVsQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS10aW1lLXBpY2tlcic7XHJcbmltcG9ydCB7IGZsYXR0ZW4sIGNsb25lRGVlcCwgc29ydEJ5LCBvcmRlckJ5IH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgVmlld1R5cGUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL215LW9wdGlvbnMuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZGF0ZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGVwaWNrZXItY2FsZW5kYXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NhbGVuZGFyLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHByb3ZpZGVyczogW1V0aWxTZXJ2aWNlXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IHtcclxuICAgIEBWaWV3Q2hpbGQoJ3NlbGVjdG9yRWwnKSBzZWxlY3RvckVsOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnc3R5bGVFbCcpIHN0eWxlRWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdlbmRUaW1lUmVmJykgZW5kVGltZVJlZjogVGltZVBpY2tlclBhbmVsQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgnZHluYW1pY1ZpZXdFbGUnKSBkeW5hbWljVmlld0VsZTogRWxlbWVudFJlZjtcclxuXHJcbiAgICBASG9zdEJpbmRpbmcoJ3N0eWxlLnBvc2l0aW9uJykgcG9zaXRpb24gPSAnc3RhdGljJztcclxuXHJcbiAgICBAT3V0cHV0KCkgZHluYW1pY1ZpZXdTaG93ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIGRhdGVIbHA6IERhdGVUaW1lSGVscGVyU2VydmljZSA9IG51bGw7XHJcblxyXG4gICAgb3B0czogSU15T3B0aW9ucztcclxuICAgIHZpc2libGVNb250aDogSU15TW9udGggPSB7IG1vbnRoVHh0OiBFTVBUWV9TVFIsIG1vbnRoTmJyOiAwLCB5ZWFyOiAwLCB5ZWFyVHh0OiBFTVBUWV9TVFIgfTtcclxuICAgIHZpc2libGVNb250aF9yYW5nZTogSU15TW9udGggPSB7IG1vbnRoVHh0OiBFTVBUWV9TVFIsIG1vbnRoTmJyOiAwLCB5ZWFyOiAwLCB5ZWFyVHh0OiBFTVBUWV9TVFIgfTtcclxuICAgIHNlbGVjdGVkTW9udGg6IElNeU1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogMCB9O1xyXG4gICAgc2VsZWN0ZWRNb250aF9yYW5nZTogSU15TW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiAwIH07XHJcbiAgICBzZWxlY3RlZERhdGU6IElNeURhdGUgPSB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfTtcclxuICAgIHNlbGVjdGVkRGF0ZVJhbmdlOiBJTXlEYXRlUmFuZ2UgPSB7IGJlZ2luOiB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSwgZW5kOiB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSB9O1xyXG4gICAgc2VsZWN0ZWRXZWVrOiBJTXlXZWVrID0geyB3ZWVrTmJyOiAwLCB5ZWFyOiAwIH07XHJcbiAgICB3ZWVrRGF5czogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgZGF0ZXM6IEFycmF5PElNeVdlZWs+ID0gW107XHJcbiAgICBkYXRlc19yYW5nZTogQXJyYXk8SU15V2Vlaz4gPSBbXTtcclxuICAgIG1vbnRoczogQXJyYXk8SU15TW9udGhSb3c+ID0gW107XHJcbiAgICBtb250aHNfcmFuZ2U6IEFycmF5PElNeU1vbnRoUm93PiA9IFtdO1xyXG4gICAgeWVhcnM6IEFycmF5PEFycmF5PElNeUNhbGVuZGFyWWVhcj4+ID0gW107XHJcbiAgICB5ZWFyc19yYW5nZTogQXJyYXk8QXJyYXk8SU15Q2FsZW5kYXJZZWFyPj4gPSBbXTtcclxuICAgIHRpbWVWbGF1ZTogc3RyaW5nO1xyXG4gICAgdGltZVZsYXVlX3JhbmdlOiBzdHJpbmc7XHJcblxyXG4gICAgbXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuXHJcbiAgICBkYXlJZHggPSAwO1xyXG4gICAgd2Vla0RheU9wdHM6IEFycmF5PHN0cmluZz4gPSBbU1UsIE1PLCBUVSwgV0UsIFRILCBGUiwgU0FdO1xyXG5cclxuICAgIHNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICBzZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgc2VsZWN0VGltZSA9IGZhbHNlO1xyXG5cclxuICAgIGRhdGVDaGFuZ2VkOiAoZG06IElNeURhdGVNb2RlbCwgY2xvc2U6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBjYWxlbmRhclZpZXdDaGFuZ2VkOiAoY3ZjOiBJTXlDYWxlbmRhclZpZXdDaGFuZ2VkKSA9PiB2b2lkO1xyXG4gICAgcmFuZ2VEYXRlU2VsZWN0aW9uOiAocmRzOiBJTXlSYW5nZURhdGVTZWxlY3Rpb24pID0+IHZvaWQ7XHJcbiAgICBtdWx0aURhdGVzQ2hhbmdlZDogKGRhdGVzOiBhbnlbXSkgPT4gdm9pZDtcclxuXHJcbiAgICBjbG9zZWRCeUVzYzogKCkgPT4gdm9pZDtcclxuICAgIHNlbGVjdG9yUG9zOiBJTXlTZWxlY3RvclBvc2l0aW9uID0gbnVsbDtcclxuICAgIHNjcm9sbERpZmYgPSAwO1xyXG5cclxuICAgIHByZXZWaWV3RGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIG5leHRWaWV3RGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHByZXZEb2JWaWV3RGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIG5leHREb2JWaWV3RGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICBwcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0gZmFsc2U7XHJcbiAgICBuZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0gZmFsc2U7XHJcbiAgICBwcmV2RG9iVmlld0Rpc2FibGVkX3JhbmdlID0gZmFsc2U7XHJcbiAgICBuZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0gZmFsc2U7XHJcblxyXG4gICAgc2hvd05vdGlmeTogKCkgPT4gdm9pZDtcclxuXHJcbiAgICAvKiog5aSa6YCJICovXHJcbiAgICBzZWxlY3RlZERhdGVzID0gW107XHJcblxyXG4gICAgZ2V0VGltZVN0cihkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuZ2V0TWludXRlcygpKTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9YDtcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOWwj+aXtlxyXG4gICAgZGlzYWJsZWRIb3VycyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRIb3VycyhtaW4sIG1heCwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICAvLyDnpoHnlKjml6XmnJ/ml7bpl7Tmjqfku7bkuK3nmoTml7bpl7TmrrXnmoTliIbpkp9cclxuICAgIGRpc2FibGVkTWludXRlcyA9IChob3VyOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRNaW51dGVzKG1pbiwgbWF4LCBob3VyLCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOenklxyXG4gICAgZGlzYWJsZWRTZWNvbmRzID0gKGhvdXI6IG51bWJlciwgbWludXRlOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRTZWNvbmRzKG1pbiwgbWF4LCBob3VyLCBtaW51dGUsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkaXNhYmxlZEhvdXJzMiA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgOiB0aGlzLnNlbGVjdGVkRGF0ZTtcclxuICAgICAgICBjb25zdCByZXMgPSB0aGlzLnV0aWxTZXJ2aWNlLmRpc2FibGVkSG91cnMobWluLCBtYXgsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE5YiG6ZKfXHJcbiAgICBkaXNhYmxlZE1pbnV0ZXMyID0gKGhvdXI6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRNaW51dGVzKG1pbiwgbWF4LCBob3VyLCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOenklxyXG4gICAgZGlzYWJsZWRTZWNvbmRzMiA9IChob3VyOiBudW1iZXIsIG1pbnV0ZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5vcHRzLmRpc2FibGVVbnRpbDtcclxuICAgICAgICBjb25zdCBtYXggPSB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gdGhpcy5vcHRzLmRhdGVSYW5nZSA/IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZFNlY29uZHMobWluLCBtYXgsIGhvdXIsIG1pbnV0ZSwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgYnRuRHluYW1pY0Rpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSB1dGlsU2VydmljZTogVXRpbFNlcnZpY2UpIHsgfVxyXG5cclxuICAgIGluaXRpYWxpemUoXHJcbiAgICAgICAgb3B0czogSU15T3B0aW9ucyxcclxuICAgICAgICBkZWZhdWx0TW9udGg6IHN0cmluZyxcclxuICAgICAgICBzZWxlY3RvclBvczogSU15U2VsZWN0b3JQb3NpdGlvbixcclxuICAgICAgICBpbnB1dFZhbHVlOiBzdHJpbmcsXHJcbiAgICAgICAgZGM6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZCxcclxuICAgICAgICBjdmM6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQsXHJcbiAgICAgICAgcmRzOiAocmRzOiBJTXlSYW5nZURhdGVTZWxlY3Rpb24pID0+IHZvaWQsXHJcbiAgICAgICAgY2JlOiAoKSA9PiB2b2lkXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JQb3MgPSBzZWxlY3RvclBvcztcclxuICAgICAgICB0aGlzLndlZWtEYXlzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgY29uc3QgeyBkZWZhdWx0VmlldywgZGF0ZVJhbmdlLCBmaXJzdERheU9mV2VlaywgZGF5TGFiZWxzLCBzdHlsZXNEYXRhLCB5ZWFyVHh0LCBtdWx0aVNlbGVjdCwgc2VwYXJhdG9yLCBzZWxlY3RlZE9yZGVyQnkgfSA9IHRoaXMub3B0cztcclxuICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyVHh0ID0geWVhclR4dDtcclxuICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyVHh0ID0geWVhclR4dDtcclxuICAgICAgICB0aGlzLm11bHRpU2VsZWN0ID0gbXVsdGlTZWxlY3Q7XHJcbiAgICAgICAgLy8gaWYgKHN0eWxlc0RhdGEuc3R5bGVzLmxlbmd0aCkge1xyXG4gICAgICAgIC8vICAgICBjb25zdCBzdHlsZUVsVGVtcDogYW55ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KFNUWUxFKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZChzdHlsZUVsVGVtcCwgdGhpcy5yZW5kZXJlci5jcmVhdGVUZXh0KHN0eWxlc0RhdGEuc3R5bGVzKSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZUVsLm5hdGl2ZUVsZW1lbnQsIHN0eWxlRWxUZW1wKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF5SWR4ID0gdGhpcy53ZWVrRGF5T3B0cy5pbmRleE9mKGZpcnN0RGF5T2ZXZWVrKTtcclxuICAgICAgICBpZiAodGhpcy5kYXlJZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBpZHg6IG51bWJlciA9IHRoaXMuZGF5SWR4O1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2Vla0RheU9wdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2Vla0RheXMucHVzaChkYXlMYWJlbHNbdGhpcy53ZWVrRGF5T3B0c1tpZHhdXSk7XHJcbiAgICAgICAgICAgICAgICBpZHggPSB0aGlzLndlZWtEYXlPcHRzW2lkeF0gPT09IFNBID8gMCA6IGlkeCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvZGF5OiBJTXlEYXRlID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHRvZGF5LCB0aGlzLm9wdHMpO1xyXG4gICAgICAgIHRvZGF5ID0gIWlzSW5EaXNhYmxlUmFuZ2UgPyB0b2RheSA6IHRoaXMudXRpbFNlcnZpY2UuZ2V0TmVhckRhdGUodG9kYXksIHRoaXMub3B0cy5kaXNhYmxlVW50aWwsIHRoaXMub3B0cy5kaXNhYmxlU2luY2UpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGRlZmF1bHRWaWV3KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuTW9udGg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiB0b2RheS55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGVmYXVsdFZpZXcuWWVhcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgKyAxMCB9O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiB0b2RheS5tb250aCwgeWVhcjogdG9kYXkueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvZGF5Lm1vbnRoID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogdG9kYXkueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogdG9kYXkubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlZmF1bHRNb250aCAmJiBkZWZhdWx0TW9udGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHRoaXMudXRpbFNlcnZpY2UucGFyc2VEZWZhdWx0TW9udGgoZGVmYXVsdE1vbnRoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0gdGhpcy51dGlsU2VydmljZS5wYXJzZURlZmF1bHRNb250aChkZWZhdWx0TW9udGgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciA9IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOaXpeacn+WkmumAiVxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0ICYmIGlucHV0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gaW5wdXRWYWx1ZS5zcGxpdChzZXBhcmF0b3IpLm1hcChuID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRzLnJldHVybkZvcm1hdCA9PT0gJ3l5eXlNTWRkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuLmxlbmd0aCA+IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuZGF0ZUhscC5mb3JtYXRUbyhuLCB0aGlzLm9wdHMucmV0dXJuRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgX2RPYmogPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKG4sIHRoaXMub3B0cywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fZE9iaixcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKF9kT2JqLCB0aGlzLm9wdHMuZGF0ZUZvcm1hdCwgdGhpcy5vcHRzLm1vbnRoTGFiZWxzKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSB0aGlzLnV0aWxTZXJ2aWNlLm9yZGVyU2VsZWN0ZWREYXRlcyh0aGlzLnNlbGVjdGVkRGF0ZXMsIHNlbGVjdGVkT3JkZXJCeSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTaW5nbGUgZGF0ZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZChpbnB1dFZhbHVlLCB0aGlzLm9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91ciA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IGAke2hvdXJ9OiR7bWludXRlfToke3NlY29uZH1gO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IGRhdGUubW9udGgsIHllYXI6IGRhdGUueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRGF0ZSByYW5nZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJlZ2luLCBlbmQgfSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWREYXRlUmFuZ2UoaW5wdXRWYWx1ZSwgdGhpcy5vcHRzKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGJlZ2luKSAmJiB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGVuZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91ciA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhiZWdpbi5ob3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4ubWludXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oYmVnaW4uc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IGAke2hvdXJ9OiR7bWludXRlfToke3NlY29uZH1gO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9ob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5ob3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGVuZC5taW51dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9zZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZW5kLnNlY29uZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSBgJHtfaG91cn06JHtfbWludXRlfToke19zZWNvbmR9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogYmVnaW4ubW9udGgsIHllYXI6IGJlZ2luLnllYXIgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlZ2luLm1vbnRoID09PSBlbmQubW9udGggJiYgYmVnaW4ueWVhciA9PT0gZW5kLnllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZC5tb250aCA+PSAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMSwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZW5keWVhciA9IGVuZC55ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRWaWV3ID09PSBEZWZhdWx0Vmlldy5Nb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHllYXIgPSBlbmR5ZWFyICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlLCB5ZWFyOiBlbmR5ZWFyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoICYmIGJlZ2luLnllYXIgPT09IGVuZC55ZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGgsIHllYXI6IGVuZC55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogZW5kLm1vbnRoLCB5ZWFyOiBlbmQueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0ZnMgNTc5MzU4XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGVuZERheVdlZWtOYnIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIoZW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5vcHRzLmZpcnN0RGF5T2ZXZWVrID09PSAnc3UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGVuZERheVdlZWtOYnIgLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgd2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihiZWdpbikgPT09IGVuZERheVdlZWtOYnIgPyB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIoYmVnaW4pOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVPYmogPSB0aGlzLm9wdHMuZmlyc3REYXlPZldlZWsgPT0gJ3N1JyA/IGVuZDogYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdlZWtOYnIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIoZGF0ZU9iaik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXZWVrID0geyB3ZWVrTmJyLCB5ZWFyOiBiZWdpbi55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkID0gZGM7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkID0gY3ZjO1xyXG4gICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uID0gcmRzO1xyXG4gICAgICAgIHRoaXMuY2xvc2VkQnlFc2MgPSBjYmU7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxlbmRhclZpc2libGVNb250aCgpO1xyXG5cclxuICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb250aFZpZXdCdG5DbGlja2VkKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuWWVhcikge1xyXG4gICAgICAgICAgICB0aGlzLm9uWWVhclZpZXdCdG5DbGlja2VkKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25ZZWFyVmlld0J0bkNsaWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0RGF0ZVZhbHVlKHZhbHVlOiBSZXNldERhdGVUeXBlKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBSZXNldERhdGVUeXBlLnNpbmdsZURhdGUgfHwgdmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuYm90aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5kYXRlUmFuZ2UgfHwgdmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuYm90aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldE1vbnRoWWVhclNlbGVjdChpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW9udGhWaWV3QnRuQ2xpY2tlZChpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0VGltZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gIXRoaXMuc2VsZWN0TW9udGg7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGgueWVhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSAhdGhpcy5zZWxlY3RNb250aF9yYW5nZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb250aENlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyTW9udGgsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYzogYm9vbGVhbiA9IGNlbGwubmJyICE9PSBtb250aE5icjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW2NlbGwubmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBjZWxsLm5icixcclxuICAgICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGgueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RNb250aCh0aGlzLnZpc2libGVNb250aCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoY2VsbC5uYnIsIHllYXIsIG1jLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWM6IGJvb2xlYW4gPSBjZWxsLm5iciAhPT0gbW9udGhOYnI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1tjZWxsLm5icl0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogY2VsbC5uYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0TW9udGgodGhpcy52aXNpYmxlTW9udGhfcmFuZ2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKGNlbGwubmJyLCB5ZWFyLCBtYywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb250aENlbGxLZXlEb3duKGNlbGw6IElNeUNhbGVuZGFyTW9udGgpIHtcclxuICAgICAgICAvLyBNYWtlIHBvc3NpYmxlIHRvIG1vdmUgZm9jdXMgYnkgYXJyb3cga2V5c1xyXG4gICAgICAgIGNvbnN0IHsgc291cmNlUm93LCBzb3VyY2VDb2wgfSA9IHRoaXMuZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBjb25zdCB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfSA9IHRoaXMuZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VSb3csXHJcbiAgICAgICAgICAgIHNvdXJjZUNvbCxcclxuICAgICAgICAgICAgTU9OVEhfUk9XX0NPVU5ULFxyXG4gICAgICAgICAgICBNT05USF9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChNLCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhclZpZXdCdG5DbGlja2VkKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGgueWVhcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnZpc2libGVNb250aC55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnZpc2libGVNb250aC5tb250aE5iciwgdGhpcy52aXNpYmxlTW9udGgueWVhciwgZmFsc2UsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSB0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMgPyB0cnVlIDogIXRoaXMuc2VsZWN0WWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9ICF0aGlzLnNlbGVjdE1vbnRoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0WWVhciA9ICF0aGlzLnNlbGVjdFllYXI7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIodGhpcy52aXNpYmxlTW9udGhfcmFuZ2UubW9udGhOYnIsIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIsIGZhbHNlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSB0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMgPyB0cnVlIDogIXRoaXMuc2VsZWN0WWVhcl9yYW5nZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9ICF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblllYXJDZWxsQ2xpY2tlZChjZWxsOiBJTXlDYWxlbmRhclllYXIsIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIsIG1vbnRoVHh0IH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHljOiBib29sZWFuID0gY2VsbC55ZWFyICE9PSB5ZWFyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aCA9IHsgbW9udGhUeHQsIG1vbnRoTmJyLCB5ZWFyOiBjZWxsLnllYXIsIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0IH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyID0gdGhpcy52aXNpYmxlTW9udGgueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdFllYXIoeyB5ZWFyOiB0aGlzLnZpc2libGVNb250aC55ZWFyIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobW9udGhOYnIsIGNlbGwueWVhciwgeWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyLCBtb250aFR4dCB9ID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5YzogYm9vbGVhbiA9IGNlbGwueWVhciAhPT0geWVhcjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dCxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogY2VsbC55ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0WWVhcih7IHllYXI6IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtb250aE5iciwgY2VsbC55ZWFyLCB5YywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblllYXJDZWxsS2V5RG93bihjZWxsOiBJTXlDYWxlbmRhclllYXIpIHtcclxuICAgICAgICAvLyBNYWtlIHBvc3NpYmxlIHRvIG1vdmUgZm9jdXMgYnkgYXJyb3cga2V5c1xyXG4gICAgICAgIGNvbnN0IHsgc291cmNlUm93LCBzb3VyY2VDb2wgfSA9IHRoaXMuZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBjb25zdCB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfSA9IHRoaXMuZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VSb3csXHJcbiAgICAgICAgICAgIHNvdXJjZUNvbCxcclxuICAgICAgICAgICAgWUVBUl9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIFlFQVJfQ09MX0NPVU5UXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVGb2N1cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbEVsZW1lbnQoWSwgdGFyZ2V0Um93LCB0YXJnZXRDb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRvZGF5OiBJTXlEYXRlID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZVVudGlsLCBkaXNhYmxlU2luY2UgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm9uZS12YXJpYWJsZS1wZXItZGVjbGFyYXRpb25cclxuICAgICAgICBsZXQgeWVhcjogbnVtYmVyLCBtb250aE5icjogbnVtYmVyO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLm1vbnRocy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB5ZWFyID0gdGhpcy52aXNpYmxlTW9udGgueWVhcjtcclxuICAgICAgICAgICAgbW9udGhOYnIgPSB0aGlzLnZpc2libGVNb250aC5tb250aE5icjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1vbnRoc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB5ZWFyID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgbW9udGhOYnIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS5tb250aE5icjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDEyOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93OiBBcnJheTxJTXlDYWxlbmRhck1vbnRoPiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGkgKyAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkOiBib29sZWFuID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHllYXIsIG1vbnRoOiBqLCBkYXk6IHRoaXMuZGF5c0luTW9udGgoaiwgeWVhcikgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVVudGlsXHJcbiAgICAgICAgICAgICAgICAgICAgKSB8fCB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVNpbmNlKHsgeWVhciwgbW9udGg6IGosIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuYnI6IGosXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW2pdLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJNb250aDogaiA9PT0gdG9kYXkubW9udGggJiYgeWVhciA9PT0gdG9kYXkueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgICAgICBtb250aE9iajogeyB5ZWFyLCBtb250aDogaiB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9udGhzLnB1c2goeyByb3csIHllYXIgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vbnRoc19yYW5nZS5wdXNoKHsgcm93LCB5ZWFyIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0TW9udGhWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZSh5ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoaXNTZWNvbmRDYWxlbmRhcj8gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UubW9udGhOYnIgOiB0aGlzLnZpc2libGVNb250aC5tb250aE5iciwgeWVhciwgZmFsc2UsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlWWVhcnMoaW5wdXRZZWFyOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBtaW5ZZWFyLCBtYXhZZWFyLCBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBsZXQgeTogbnVtYmVyID0gaW5wdXRZZWFyIC0gKGlucHV0WWVhciAlIDEwKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnllYXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnllYXJzX3JhbmdlLmxlbmd0aCAmJiAoKHRoaXMueWVhcnMmJiB0aGlzLnllYXJzLmxlbmd0aCkgJiYgeSA8IHRoaXMueWVhcnNbM11bMl0ueWVhciAmJiB5ID4gdGhpcy55ZWFyc1swXVswXS55ZWFyKSAgJiYgdGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB5Kz0gMTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBhbGxZZWFycyA9IGZsYXR0ZW48YW55Pih0aGlzLnllYXJzX3JhbmdlKTtcclxuICAgICAgICAgICAgaWYgKGFsbFllYXJzLmZpbmRJbmRleChuID0+IG4ueWVhciA9PSBpbnB1dFllYXIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLnllYXJzX3JhbmdlWzNdWzJdLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSB5IC0gMTsgaSA8IHkgKyAxMDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdzogQXJyYXk8SU15Q2FsZW5kYXJZZWFyPiA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA8IGkgKyAzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpc2FibGVkOiBib29sZWFuID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoTmJyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiB0aGlzLmRheXNJbk1vbnRoKG1vbnRoTmJyLCBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IGosIG1vbnRoOiBtb250aE5iciwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluTWF4OiBib29sZWFuID0gaiA8IG1pblllYXIgfHwgaiA+IG1heFllYXI7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogaixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyWWVhcjogaiA9PT0gdG9kYXkueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaiA9PT0geWVhcixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQgfHwgbWluTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHllYXJPYmo6IHsgeWVhcjogaiB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnMucHVzaChyb3cpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZS5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHRoaXMueWVhcnNbMF1bMV0ueWVhciwgdGhpcy55ZWFyc1szXVsxXS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFllYXJWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZShcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbMF1bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIHRoaXMueWVhcnNfcmFuZ2VbM11bMV0ueWVhcixcclxuICAgICAgICAgICAgICAgIGlzU2Vjb25kQ2FsZW5kYXJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FsZW5kYXJWaXNpYmxlTW9udGgoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2V0cyB2aXNpYmxlIG1vbnRoIG9mIGNhbGVuZGFyXHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy5zZWxlY3RlZE1vbnRoO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW21vbnRoTmJyXSxcclxuICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGN1cnJlbnQgbW9udGhcclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIsIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCB5ZWFyLCB0cnVlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc1syXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc19yYW5nZVsyXVsyXS55ZWFyIC0gMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgLSAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKGV2ZW50PzogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciArIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aCAmJiAhdGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdNb250aChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgKyAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgKyAxMCwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgJiYgIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciArIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuLCBpc05leHQ/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNoYW5nZTogbnVtYmVyO1xyXG4gICAgICAgIGlmIChpc05leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjaGFuZ2UgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSA9IGlzTmV4dCA/IDEgOiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5ZWFyLCBtb250aE5iciwgMSk7XHJcbiAgICAgICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbTogbnVtYmVyID0gZC5nZXRNb250aCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBtLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtLCB5LCB0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeWVhciwgbW9udGhOYnIsIDEpO1xyXG4gICAgICAgICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSArIGNoYW5nZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5OiBudW1iZXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG06IG51bWJlciA9IGQuZ2V0TW9udGgoKSArIDE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbV0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogbSxcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobSwgeSwgdHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2VTZWxlY3RvcihldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5lc2MpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZWRCeUVzYygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkRheUNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyRGF5LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChjZWxsLmNtbyA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUHJldk5hdmlnYXRlQnRuQ2xpY2tlZCh0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuY21vID09PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUoY2VsbC5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJEYXkpIHtcclxuICAgICAgICAvLyBNYWtlIHBvc3NpYmxlIHRvIG1vdmUgZm9jdXMgYnkgYXJyb3cga2V5c1xyXG4gICAgICAgIGNvbnN0IHsgc291cmNlUm93LCBzb3VyY2VDb2wgfSA9IHRoaXMuZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBjb25zdCB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfSA9IHRoaXMuZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBzb3VyY2VSb3csXHJcbiAgICAgICAgICAgIHNvdXJjZUNvbCxcclxuICAgICAgICAgICAgREFURV9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIERBVEVfQ09MX0NPVU5UXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVGb2N1cykge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbEVsZW1lbnQoRCwgdGFyZ2V0Um93LCB0YXJnZXRDb2wpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRheS5kYXRlT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCBjZWxsLmRhdGVPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGRheS5kYXRlT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwuZGF0ZU9iaiwgZGF5LmRhdGVPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGF5Q2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHcgb2YgdGhpcy5kYXRlc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygdy53ZWVrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5LnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbk1vbnRoQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRoc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBtb250aC5tb250aE9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgY2VsbC5tb250aE9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIobW9udGgubW9udGhPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5tb250aE9iaiwgbW9udGgubW9udGhPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW9udGhDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5tb250aHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9udGggb2YgaXRlbS5yb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aC5yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlRW50ZXIoY2VsbDogYW55LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIHllYXIueWVhck9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIGNlbGwueWVhck9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwueWVhck9iaiwgeWVhci55ZWFyT2JqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCB5ZWFyLnllYXJPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCBjZWxsLnllYXJPYmopKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHllYXIueWVhck9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLnllYXJPYmosIHllYXIueWVhck9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25ZZWFyQ2VsbE1vdXNlTGVhdmUoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFycykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy55ZWFyc19yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB5ZWFyIG9mIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbldlZWtDbGlja2VkKHdlZWtEYXRhOiBJTXlXZWVrKSB7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLm9wdHMucmV0dXJuRm9ybWF0ICYmIHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdoaDptbScpID4gLTE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB7IHdlZWtOYnI6IHdlZWtEYXRhLndlZWtOYnIsIHllYXI6IHdlZWtEYXRhLnllYXIgfTtcclxuXHJcbiAgICAgICAgaWYgKHNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5ob3VyID0gMDtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLm1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbMF0uZGF0ZU9iai5zZWNvbmQgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLmhvdXIgPSAyMztcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqLm1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmouc2Vjb25kID0gNTk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1swXS5kYXRlT2JqKTtcclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUod2Vla0RhdGEud2Vla1s2XS5kYXRlT2JqKTtcclxuICAgIH1cclxuICAgIGdldFNvdXJjZVJvd0FuZENvbHVtbkZyb21FdmVudChldmVudDogYW55KTogYW55IHtcclxuICAgICAgICBsZXQgc291cmNlUm93ID0gMDtcclxuICAgICAgICBsZXQgc291cmNlQ29sID0gMDtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5pZCkge1xyXG4gICAgICAgICAgICAvLyB2YWx1ZSBvZiBpZCBpcyBmb3IgZXhhbXBsZTogbV8wXzEgKGZpcnN0IG51bWJlciA9IHJvdywgc2Vjb25kIG51bWJlciA9IGNvbHVtbilcclxuICAgICAgICAgICAgY29uc3QgYXJyOiBBcnJheTxzdHJpbmc+ID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KFVOREVSX0xJTkUpO1xyXG4gICAgICAgICAgICBzb3VyY2VSb3cgPSBOdW1iZXIoYXJyWzFdKTtcclxuICAgICAgICAgICAgc291cmNlQ29sID0gTnVtYmVyKGFyclsyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNvdXJjZVJvdywgc291cmNlQ29sIH07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFyZ2V0Rm9jdXNSb3dBbmRDb2x1bW4oZXZlbnQ6IGFueSwgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBjb2xDb3VudDogbnVtYmVyKTogYW55IHtcclxuICAgICAgICBsZXQgbW92ZUZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHRhcmdldFJvdzogbnVtYmVyID0gcm93O1xyXG4gICAgICAgIGxldCB0YXJnZXRDb2w6IG51bWJlciA9IGNvbDtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5Q29kZTogbnVtYmVyID0gdGhpcy51dGlsU2VydmljZS5nZXRLZXlDb2RlRnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS51cEFycm93ICYmIHJvdyA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Um93LS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLmRvd25BcnJvdyAmJiByb3cgPCByb3dDb3VudCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3crKztcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUubGVmdEFycm93ICYmIGNvbCA+IDApIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sLS07XHJcbiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLnJpZ2h0QXJyb3cgJiYgY29sIDwgY29sQ291bnQpIHtcclxuICAgICAgICAgICAgbW92ZUZvY3VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0Q29sKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IG1vdmVGb2N1cywgdGFyZ2V0Um93LCB0YXJnZXRDb2wgfTtcclxuICAgIH1cclxuXHJcbiAgICBmb2N1c0NlbGxFbGVtZW50KHR5cGU6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZWxlbTogYW55ID0gdGhpcy5zZWxlY3RvckVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihET1QgKyB0eXBlICsgVU5ERVJfTElORSArIHJvdyArIFVOREVSX0xJTkUgKyBjb2wpO1xyXG4gICAgICAgIGlmIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGVsZW0uZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZWN0RGF0ZShkYXRlOiBJTXlEYXRlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHNob3dUaW1lLCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gRGF0ZSByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBpc0JlZ2luRGF0ZUluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmREYXRlSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKSAmJlxyXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luRGF0ZUluaXRpYWxpemVkICYmIGlzRW5kRGF0ZUluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0VuZERhdGVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShkYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKGRhdGUsIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZUVhcmxpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBfZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoX2RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShfZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKF9kYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTaW5nbGUgZGF0ZVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IGRhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50aW1lVmxhdWUgJiYgdGhpcy5vcHRzLnZpZXdUeXBlID09IFZpZXdUeXBlLlRvZ2V0aGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobmV3IERhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdG9TZWxlY3RNb250aChtb250aDogSU15TW9udGgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIG1vbnRoIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5Nb250aEluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkTW9udGgodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kTW9udGhJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZE1vbnRoKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5Nb250aEluaXRpYWxpemVkICYmIGlzRW5kTW9udGhJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYm90aCBhbHJlYWR5IHNlbGVjdGVkIC0gc2V0IGJlZ2luIGRhdGUgYW5kIHJlc2V0IGVuZCBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmVnaW5Nb250aEluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgeWVhcjogbW9udGgueWVhciwgbW9udGg6IG1vbnRoLm1vbnRoTmJyIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IG1vbnRoO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgeyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgc2hvd1RpbWUgPyBmYWxzZSA6IGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1NlbGVjdFllYXIoeWVhcjogeyB5ZWFyOiBudW1iZXIgfSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9udGggcmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgaXNCZWdpblllYXJJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZFllYXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRW5kWWVhckluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkWWVhcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGlmIChpc0JlZ2luWWVhckluaXRpYWxpemVkICYmIGlzRW5kWWVhckluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpblllYXJJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2Vjb25kIHNlbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3REYXRlRWFybGllcjogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlRWFybGllcih5ZWFyLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdERhdGVFYXJsaWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGUgPSB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gX2RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogX2RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKF9kYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZShfZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geWVhcjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbCh5ZWFyLCBudWxsLCBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIHJldHVybkZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG1vbnRoU3RhcnRJZHgoeTogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIC8vIE1vbnRoIHN0YXJ0IGluZGV4XHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZC5zZXREYXRlKDEpO1xyXG4gICAgICAgIGQuc2V0TW9udGgobSAtIDEpO1xyXG4gICAgICAgIGQuc2V0RnVsbFllYXIoeSk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gZC5nZXREYXkoKSArIHRoaXMuc3VuZGF5SWR4KCk7XHJcbiAgICAgICAgcmV0dXJuIGlkeCA+PSA3ID8gaWR4IC0gNyA6IGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBkYXlzSW5Nb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIGN1cnJlbnQgbW9udGhcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoeSwgbSwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRheXNJblByZXZNb250aChtOiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gUmV0dXJuIG51bWJlciBvZiBkYXlzIG9mIHRoZSBwcmV2aW91cyBtb250aFxyXG4gICAgICAgIGNvbnN0IGQ6IERhdGUgPSB0aGlzLmdldERhdGUoeSwgbSwgMSk7XHJcbiAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgLSAxKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXlzSW5Nb250aChkLmdldE1vbnRoKCkgKyAxLCBkLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ3VyckRheShkOiBudW1iZXIsIG06IG51bWJlciwgeTogbnVtYmVyLCBjbW86IG51bWJlciwgdG9kYXk6IElNeURhdGUpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBDaGVjayBpcyBhIGdpdmVuIGRhdGUgdGhlIHRvZGF5XHJcbiAgICAgICAgcmV0dXJuIGQgPT09IHRvZGF5LmRheSAmJiBtID09PSB0b2RheS5tb250aCAmJiB5ID09PSB0b2RheS55ZWFyICYmIGNtbyA9PT0gTW9udGhJZC5jdXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdpZHRoKCkge1xyXG4gICAgICAgIGNvbnN0IGhhc1Nob3J0Q3V0cyA9IHRoaXMub3B0cy5zaG9ydGN1dHMgJiYgdGhpcy5vcHRzLnNob3J0Y3V0cy5sZW5ndGggPiAwO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlICYmIHRoaXMub3B0cy5zaG93VHlwZSAhPT0gNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzU2hvcnRDdXRzID8gJzY2MHB4JyA6ICc1NzRweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdyA9ICAoaGFzU2hvcnRDdXRzID8gMzgwIDogMjg3KSArICgodGhpcy5vcHRzLnZpZXdUeXBlID09PSBWaWV3VHlwZS5Ub2dldGhlciB8fCB0aGlzLm11bHRpU2VsZWN0KSA/IDIwMCA6IDApO1xyXG4gICAgICAgICAgICByZXR1cm4gdyArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRvZGF5KCk6IElNeURhdGUge1xyXG4gICAgICAgIGNvbnN0IGRhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGhvdXI6IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZTogZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IGRhdGUuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogZGF0ZS5nZXRNb250aCgpICsgMSwgZGF5OiBkYXRlLmdldERhdGUoKSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXREYXlOdW1iZXIoZGF0ZTogSU15RGF0ZSk6IG51bWJlciB7XHJcbiAgICAgICAgLy8gR2V0IGRheSBudW1iZXI6IHN1PTAsIG1vPTEsIHR1PTIsIHdlPTMgLi4uXHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZShkYXRlLnllYXIsIGRhdGUubW9udGgsIGRhdGUuZGF5KTtcclxuICAgICAgICByZXR1cm4gZC5nZXREYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRXZWVrZGF5KGRhdGU6IElNeURhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIEdldCB3ZWVrZGF5OiBzdSwgbW8sIHR1LCB3ZSAuLi5cclxuICAgICAgICByZXR1cm4gdGhpcy53ZWVrRGF5T3B0c1t0aGlzLmdldERheU51bWJlcihkYXRlKV07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0ZSh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIsIGRheTogbnVtYmVyKTogRGF0ZSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlcyBhIGRhdGUgb2JqZWN0IGZyb20gZ2l2ZW4geWVhciwgbW9udGggYW5kIGRheVxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSwgMCwgMCwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3VuZGF5SWR4KCk6IG51bWJlciB7XHJcbiAgICAgICAgLy8gSW5kZXggb2YgU3VuZGF5IGRheVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRheUlkeCA+IDAgPyA3IC0gdGhpcy5kYXlJZHggOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FsZW5kYXIobTogbnVtYmVyLCB5OiBudW1iZXIsIG5vdGlmeUNoYW5nZTogYm9vbGVhbiwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZXNfcmFuZ2UubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgbW9udGhTdGFydDogbnVtYmVyID0gdGhpcy5tb250aFN0YXJ0SWR4KHksIG0pO1xyXG4gICAgICAgIGNvbnN0IGRJblRoaXNNOiBudW1iZXIgPSB0aGlzLmRheXNJbk1vbnRoKG0sIHkpO1xyXG4gICAgICAgIGNvbnN0IGRJblByZXZNOiBudW1iZXIgPSB0aGlzLmRheXNJblByZXZNb250aChtLCB5KTtcclxuXHJcbiAgICAgICAgbGV0IGRheU5iciA9IDE7XHJcbiAgICAgICAgbGV0IGNtbzogbnVtYmVyID0gTW9udGhJZC5wcmV2O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWs6IEFycmF5PElNeUNhbGVuZGFyRGF5PiA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3Qgd2Vla1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG0gPSBkSW5QcmV2TSAtIG1vbnRoU3RhcnQgKyAxO1xyXG4gICAgICAgICAgICAgICAgLy8gUHJldmlvdXMgbW9udGhcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBwbTsgaiA8PSBkSW5QcmV2TTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IHsgeWVhcjogbSA9PT0gMSA/IHkgLSAxIDogeSwgbW9udGg6IG0gPT09IDEgPyAxMiA6IG0gLSAxLCBkYXk6IGogfTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXk6IHRoaXMuaXNDdXJyRGF5KGosIG0sIHksIGNtbywgdG9kYXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZShkYXRlLCB0aGlzLm9wdHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWREYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmlzTWFya2VkRGF0ZShkYXRlLCB0aGlzLm9wdHMubWFya0RhdGVzLCB0aGlzLm9wdHMubWFya1dlZWtlbmRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0OiB0aGlzLnV0aWxTZXJ2aWNlLmlzSGlnaGxpZ2h0ZWREYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zdW5IaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc2F0SGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLmhpZ2hsaWdodERhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjbW8gPSBNb250aElkLmN1cnI7XHJcbiAgICAgICAgICAgICAgICAvLyBDdXJyZW50IG1vbnRoXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzTGVmdDogbnVtYmVyID0gNyAtIHdlZWsubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXlzTGVmdDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IHsgeWVhcjogeSwgbW9udGg6IG0sIGRheTogZGF5TmJyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vlay5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iajogZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyRGF5OiB0aGlzLmlzQ3VyckRheShkYXlOYnIsIG0sIHksIGNtbywgdG9kYXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZShkYXRlLCB0aGlzLm9wdHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWREYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmlzTWFya2VkRGF0ZShkYXRlLCB0aGlzLm9wdHMubWFya0RhdGVzLCB0aGlzLm9wdHMubWFya1dlZWtlbmRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0OiB0aGlzLnV0aWxTZXJ2aWNlLmlzSGlnaGxpZ2h0ZWREYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zdW5IaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc2F0SGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLmhpZ2hsaWdodERhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBkYXlOYnIrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlc3Qgb2YgdGhlIHdlZWtzXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IDg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXlOYnIgPiBkSW5UaGlzTSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXh0IG1vbnRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheU5iciA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyA9IE1vbnRoSWQubmV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZTogSU15RGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogY21vID09PSBNb250aElkLm5leHQgJiYgbSA9PT0gMTIgPyB5ICsgMSA6IHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBjbW8gPT09IE1vbnRoSWQuY3VyciA/IG0gOiBjbW8gPT09IE1vbnRoSWQubmV4dCAmJiBtIDwgMTIgPyBtICsgMSA6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZGF5TmJyXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXk6IHRoaXMuaXNDdXJyRGF5KGRheU5iciwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRheU5icisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBsZXQgd2Vla05iciA9IHRoaXMub3B0cy5zaG93V2Vla051bWJlcnMgPyB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIod2Vla1swXS5kYXRlT2JqKSA6IDA7XHJcbiAgICAgICAgICAgIGxldCB3ZWVrTmJyID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93V2Vla051bWJlcnMgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5kZXggPSB0aGlzLm9wdHMuZmlyc3REYXlPZldlZWsgPT0gJ3N1JyA/IDY6IDBcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdlZWtOYnIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIod2Vla1tkYXRlSW5kZXhdLmRhdGVPYmopO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMub3B0cy5maXJzdERheU9mV2VlayA9PT0gJ3N1Jykge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGVuZERheVdlZWtOYnIgLT0gMTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIC8vIHdlZWtOYnIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldFdlZWtOdW1iZXIod2Vla1swXS5kYXRlT2JqKSA9PT0gZW5kRGF5V2Vla05iciA/IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcih3ZWVrWzBdLmRhdGVPYmopOiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlcy5wdXNoKHsgd2Vlaywgd2Vla05iciwgeWVhcjogeSB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXNfcmFuZ2UucHVzaCh7IHdlZWssIHdlZWtOYnIsIHllYXI6IHkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKG0sIHksIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG5cclxuICAgICAgICBpZiAobm90aWZ5Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGlmeSBwYXJlbnRcclxuICAgICAgICAgICAgdGhpcy5jYWxlbmRhclZpZXdDaGFuZ2VkKHtcclxuICAgICAgICAgICAgICAgIHllYXI6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSxcclxuICAgICAgICAgICAgICAgIGZpcnN0OiB7IG51bWJlcjogMSwgd2Vla2RheTogdGhpcy5nZXRXZWVrZGF5KHsgeWVhcjogeSwgbW9udGg6IG0sIGRheTogMSB9KSB9LFxyXG4gICAgICAgICAgICAgICAgbGFzdDogeyBudW1iZXI6IGRJblRoaXNNLCB3ZWVrZGF5OiB0aGlzLmdldFdlZWtkYXkoeyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkSW5UaGlzTSB9KSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRlVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUobTogbnVtYmVyLCB5OiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHBtID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRubSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRwbSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHllYXI6IG0gPT09IDEgPyB5IC0gMSA6IHksXHJcbiAgICAgICAgICAgICAgICBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IHRoaXMuZGF5c0luTW9udGgobSA9PT0gMSA/IDEyIDogbSAtIDEsIG0gPT09IDEgPyB5IC0gMSA6IHkpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG5tID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZShcclxuICAgICAgICAgICAgeyB5ZWFyOiBtID09PSAxMiA/IHkgKyAxIDogeSwgbW9udGg6IG0gPT09IDEyID8gMSA6IG0gKyAxLCBkYXk6IDEgfSxcclxuICAgICAgICAgICAgZGlzYWJsZVNpbmNlXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWQgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0gKG0gPT09IDEgJiYgeSA9PT0gbWluWWVhcikgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSAobSA9PT0gMTIgJiYgeSA9PT0gbWF4WWVhcikgfHwgZG5tO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vbnRoVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeTogbnVtYmVyLCBpc1NlY29uZENhbGVuZGFyOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRwbSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBkbm0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSwgbWluWWVhciwgbWF4WWVhciB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBkcG0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVVudGlsKHsgeWVhcjogeSAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRubSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5ICsgMSwgbW9udGg6IDEsIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtaW5ZZWFyIHx8IGRwbTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWF4WWVhciB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHlwOiBudW1iZXIsIHluOiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHB5ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRueSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRweSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoeyB5ZWFyOiB5cCAtIDEsIG1vbnRoOiAxMiwgZGF5OiAzMSB9LCBkaXNhYmxlVW50aWwpO1xyXG4gICAgICAgIGRueSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyOiB5biArIDEsIG1vbnRoOiAxLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZCA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWQgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Vmlld0Rpc2FibGVkX3JhbmdlID0geXAgPD0gbWluWWVhciB8fCBkcHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IHluID49IG1heFllYXIgfHwgZG55O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25Db250YWluZXJDbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIG9uQ2xpY2tUaW1lQnRuKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luSXNJbml0aWFsaXplZERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRJc0luaXRpYWxpemVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoIWJlZ2luSXNJbml0aWFsaXplZERhdGUgfHwgIWVuZElzSW5pdGlhbGl6ZWREYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDnm7TmjqXngrnlh7vnoa7lrprmmL7npLrmnKzmnIjlkozkuIvmnIhcclxuICAgICAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBlbmRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5kbW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRZZWFyID0gZW5kWWVhciArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kbW9udGggPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5kbW9udGggPSBlbmRtb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgLi4udGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB7IHllYXI6IGVuZFllYXIsIG1vbnRoOiBlbmRtb250aCwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN57uZZGF0ZVJhbmdl6LWL5Lik5Liq5pe26Ze05YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZV9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy50aW1lVmxhdWVfcmFuZ2UgPSB0aGlzLmNoZWNrVGltZVZhbHVlcyh0aGlzLnRpbWVWbGF1ZV9yYW5nZSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN6LWL5YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAvLyDngrnlh7tzZWxlY3RUaW1l5LmL5YmN6LWL5YC8XHJcbiAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gdGhpcy5nZXRUaW1lU3RyKG5vdyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0geyB5ZWFyOiBub3cuZ2V0RnVsbFllYXIoKSwgbW9udGg6IG5vdy5nZXRNb250aCgpICsgMSwgZGF5OiBub3cuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGltZVZsYXVlID0gdGhpcy5jaGVja1RpbWVWYWx1ZXModGhpcy50aW1lVmxhdWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RNb250aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RUaW1lID0gIXRoaXMuc2VsZWN0VGltZTtcclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TaG93RHluYW1pY1ZpZXcoJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMub3B0cy5zaG93RHluYW1pY1ZpZXcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZHluYW1pY1ZpZXdTaG93LmVtaXQoIHsgc2hvd0R5bmFtaWNWaWV3OiB0cnVlIH0gKTtcclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TaG93RGF0ZVBhbmVsKCRldmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLm9wdHMuc2hvd0R5bmFtaWNWaWV3ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5keW5hbWljVmlld1Nob3cuZW1pdCggeyBzaG93RHluYW1pY1ZpZXc6IGZhbHNlIH0gKTtcclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgZ2V0VGltZVZhbHVlKGlzRGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHsgc3RhcnQ6IG51bGwsIGVuZDogbnVsbCB9O1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVWbGF1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lQXJyID0gdGhpcy50aW1lVmxhdWUucmVwbGFjZSgn5pe2JywgJzonKS5yZXBsYWNlKCfliIYnLCAnOicpLnJlcGxhY2UoJ+enkicsICcnKS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBpZiAodGltZUFyci5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogdGltZUFyclsxXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IHRpbWVBcnJbMl0gPyB0aW1lQXJyWzJdIDogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gbm93RGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBub3dEYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gbm93RGF0ZS5nZXRTZWNvbmRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHQuc3RhcnQgPSB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpc0RhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lVmxhdWVfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBcnJfcmFuZ2UgPSB0aGlzLnRpbWVWbGF1ZV9yYW5nZS5yZXBsYWNlKCfml7YnLCAnOicpLnJlcGxhY2UoJ+WIhicsICc6JykucmVwbGFjZSgn56eSJywgJycpLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZUFycl9yYW5nZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHQuZW5kID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiB0aW1lQXJyX3JhbmdlWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IHRpbWVBcnJfcmFuZ2VbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogdGltZUFycl9yYW5nZVsyXSA/IHRpbWVBcnJfcmFuZ2VbMl0gOiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSAyMztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IDU5O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gNTk7XHJcbiAgICAgICAgICAgICAgICB0LmVuZCA9IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uQ2xpY2tPa0J0bihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBsZXQgdGltZU9iaiA9IG51bGw7XHJcbiAgICAgICAgbGV0IHRpbWVPYmpfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGUgPSBudWxsO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZERhdGVfcmFuZ2UgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLmdldFRpbWVWYWx1ZSh0aGlzLm9wdHMuZGF0ZVJhbmdlKTtcclxuICAgICAgICAgICAgdGltZU9iaiA9IHN0YXJ0O1xyXG4gICAgICAgICAgICB0aW1lT2JqX3JhbmdlID0gZW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGUpLCAuLi50aW1lT2JqIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGlzSW5EaXNhYmxlUmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHNlbGVjdGVkRGF0ZSwgdGhpcy5vcHRzKTtcclxuICAgICAgICAgICAgY29uc3QgZWFybGllciA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihzZWxlY3RlZERhdGUsIHRoaXMub3B0cy5kaXNhYmxlVW50aWwpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0gIWlzSW5EaXNhYmxlUmFuZ2VcclxuICAgICAgICAgICAgICAgID8gc2VsZWN0ZWREYXRlXHJcbiAgICAgICAgICAgICAgICA6IHsgLi4uc2VsZWN0ZWREYXRlLCAuLi4oZWFybGllciA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlKSB9O1xyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tUaW1lVmFsdWUoc2VsZWN0ZWREYXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpbiA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksIC4uLnRpbWVPYmogfTtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCwgYmVnaW4pLCAuLi50aW1lT2JqX3JhbmdlIH07XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tUaW1lVmFsdWUoYmVnaW4pO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVGltZVZhbHVlKGVuZCk7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZV9yYW5nZSA9IHsgYmVnaW4sIGVuZCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGF0ZU1vZGVsOiBJTXlEYXRlTW9kZWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGVfcmFuZ2UsXHJcbiAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKGRhdGVNb2RlbCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub2RheUNsaWNrKCRldmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBsZXQgdGltZU9iaiA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZV9yYW5nZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHN0YXJ0IH0gPSB0aGlzLmdldFRpbWVWYWx1ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRpbWVPYmogPSBzdGFydDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNlbGVjdGVkRGF0ZSA9IHsgLi4udGhpcy5pbml0aWFsaXplZERhdGUoeyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0pLCAuLi50aW1lT2JqIH07XHJcbiAgICAgICAgY29uc3QgaXNJbkRpc2FibGVSYW5nZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoc2VsZWN0ZWREYXRlLCB0aGlzLm9wdHMpO1xyXG4gICAgICAgIGNvbnN0IGVhcmxpZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoc2VsZWN0ZWREYXRlLCB0aGlzLm9wdHMuZGlzYWJsZVVudGlsKTtcclxuXHJcbiAgICAgICAgc2VsZWN0ZWREYXRlID0gIWlzSW5EaXNhYmxlUmFuZ2VcclxuICAgICAgICAgICAgPyBzZWxlY3RlZERhdGVcclxuICAgICAgICAgICAgOiB7IC4uLnNlbGVjdGVkRGF0ZSwgLi4uKGVhcmxpZXIgPyB0aGlzLm9wdHMuZGlzYWJsZVVudGlsIDogdGhpcy5vcHRzLmRpc2FibGVTaW5jZSkgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0ZU1vZGVsOiBJTXlEYXRlTW9kZWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGVfcmFuZ2UsXHJcbiAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKGRhdGVNb2RlbCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBvbkR5bmFtaWNPa0NsaWNrKCRldmVudCwgZHluYW1pY3ZpZXdSZWYpIHtcclxuICAgICAgICBpZiAoZHluYW1pY3ZpZXdSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGR5bmFtaWN2aWV3UmVmLmZvcm1hdFZhbHVlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZHluYW1pY3ZpZXdSZWYuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgdmFsdWUudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMub3B0cy5keW5hbWljVmFsdWVDaGFuZ2VkKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZWREYXRlKGRhdGU6IElNeURhdGUsIG90aGVyRGF0ZTogSU15RGF0ZSA9IHsgeWVhcjogMCwgbW9udGg6IDAsIGRheTogMCB9KTogSU15RGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZGF5c0luTW9udGg6IEFycmF5PG51bWJlcj4gPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XHJcbiAgICAgICAgaWYgKCF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGRhdGUpICYmICF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKG90aGVyRGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBuZXcgRGF0ZSgpLmdldERhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoeyB5ZWFyLCBtb250aCwgZGF5IH0sIHRoaXMub3B0cykgPyB0aGlzLm9wdHMuZGlzYWJsZVVudGlsIDogeyB5ZWFyLCBtb250aCwgZGF5IH07XHJcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gb3RoZXJEYXRlLm1vbnRoICsgMSA+IDEyID8gb3RoZXJEYXRlLnllYXIgKyAxIDogb3RoZXJEYXRlLnllYXI7XHJcbiAgICAgICAgICAgIGxldCBtb250aCA9IG90aGVyRGF0ZS5tb250aCArIDEgPiAxMiA/IDEgOiBvdGhlckRhdGUubW9udGggKyB0aGlzLm9wdHMubW9udGhSYW5nZVZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGUubW9udGgpIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gb3RoZXJEYXRlLm1vbnRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IG90aGVyRGF0ZS5kYXkgPCAxIHx8IG90aGVyRGF0ZS5kYXkgPiBkYXlzSW5Nb250aFttb250aCAtIDFdID8gMSA6IG90aGVyRGF0ZS5kYXk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKHsgeWVhciwgbW9udGgsIGRheSB9LCB0aGlzLm9wdHMpID8gdGhpcy5vcHRzLmRpc2FibGVTaW5jZSA6IHsgeWVhciwgbW9udGgsIGRheSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lKGRhdGU6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSAhPT0gNCAmJiAhdGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldERhdGU6IElNeURhdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogZGF0ZS5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IGRhdGUuZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IGRhdGUuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IHsgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLCBtb250aDogZGF0ZS5nZXRNb250aCgpICsgMSwgZGF5OiBkYXRlLmdldERhdGUoKSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZU1vZGVsOiBJTXlEYXRlTW9kZWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKGRhdGVNb2RlbCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlkK/nlKjlkajpgInmi6nml7YgIOW/q+aNt+aMiemSruWPguaVsOS4uuWNleS4quaXpeacn1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZU1vZGVsOiBJTXlEYXRlTW9kZWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0Tm93V2Vla1RpbWUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKGRhdGVNb2RlbCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGUgaW5zdGFuY2VvZiBPYmplY3QgJiYgdGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0RGF0ZVJhbmdlOiBJTXlEYXRlUmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gZGF0ZTtcclxuICAgICAgICAgICAgaWYgKCFiZWdpbiB8fCAhZW5kKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZVJhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGJlZ2luLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBiZWdpbi5nZXRNb250aCgpICsgMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBiZWdpbi5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6IGJlZ2luLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogYmVnaW4uZ2V0TWludXRlcygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmQ6IGJlZ2luLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGVuZC5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogZW5kLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGVuZC5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6IGVuZC5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6IGVuZC5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogZW5kLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlUmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHsgeWVhcjogYmVnaW4uZ2V0RnVsbFllYXIoKSwgbW9udGg6IGJlZ2luLmdldE1vbnRoKCkgKyAxLCBkYXk6IGJlZ2luLmdldERhdGUoKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogeyB5ZWFyOiBlbmQuZ2V0RnVsbFllYXIoKSwgbW9udGg6IGVuZC5nZXRNb250aCgpICsgMSwgZGF5OiBlbmQuZ2V0RGF0ZSgpIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGF0ZU1vZGVsOiBJTXlEYXRlTW9kZWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKGRhdGVNb2RlbCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCflj4LmlbDlv4XpobvnrKblkIjopoHmsYLvvIEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWxlY3RDdXJyZW50V2VlaygkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgZmlyc3REYXkgPSB0aGlzLm9wdHMuZmlyc3REYXlPZldlZWsgPT09ICdzdScgPyAn5pelJzogJ+S4gCc7XHJcbiAgICAgICAgY29uc3QgeyBiZWdpbiwgZW5kIH0gPSB0aGlzLmRhdGVIbHAuZ2V0Tm93V2Vla1RpbWUobmV3IERhdGUoKSwgZmlyc3REYXkpO1xyXG4gICAgICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgY29uc3Qgd2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihiZWdpbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHNob3dUaW1lID0gdGhpcy5vcHRzLnJldHVybkZvcm1hdCAmJiB0aGlzLm9wdHMucmV0dXJuRm9ybWF0LnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZignaGg6bW0nKSA+IC0xO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXZWVrID0geyB3ZWVrTmJyLCB5ZWFyIH07XHJcblxyXG4gICAgICAgIGlmIChzaG93VGltZSkge1xyXG4gICAgICAgICAgICBiZWdpblsnaG91ciddID0gMDtcclxuICAgICAgICAgICAgYmVnaW5bJ21pbnV0ZSddID0gMDtcclxuICAgICAgICAgICAgYmVnaW5bJ3NlY29uZCddID0gMDtcclxuXHJcbiAgICAgICAgICAgIGVuZFsnaG91ciddID0gMjM7XHJcbiAgICAgICAgICAgIGVuZFsnbWludXRlJ10gPSA1OTtcclxuICAgICAgICAgICAgZW5kWydzZWNvbmQnXSA9IDU5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3REYXRlKGJlZ2luKTtcclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUoZW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkR5bmFtaWNWYWx1ZUNoYW5nZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5idG5EeW5hbWljRGlzYWJsZWQgPSAhJGV2ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbENsaWNrZWRGb3JNdWx0aURhdGVzKGNlbGw6IElNeUNhbGVuZGFyRGF5LCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChjZWxsLmNtbyA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUHJldk5hdmlnYXRlQnRuQ2xpY2tlZCh0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuY21vID09PSAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25OZXh0TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBtYXhTZWxlY3RlZCwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCwgc2VsZWN0ZWRPcmRlckJ5IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZERhdGVzLmZpbmQobiA9PiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWUobiwgY2VsbC5kYXRlT2JqKSk7XHJcbiAgICAgICAgaWYgKCFpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIGlmICghbWF4U2VsZWN0ZWQgfHwgKG1heFNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCBtYXhTZWxlY3RlZCkpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZXMgPSBbLi4udGhpcy5zZWxlY3RlZERhdGVzLCB7IC4uLmNlbGwuZGF0ZU9iaiwgdmFsdWU6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShjZWxsLmRhdGVPYmosIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSB9XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZXMgPSBbLi4udGhpcy5zZWxlY3RlZERhdGVzXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dOb3RpZnkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dOb3RpZnkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZXMgPSB0aGlzLnNlbGVjdGVkRGF0ZXMuZmlsdGVyKG4gPT4gbiE9PSBpc1NlbGVjdGVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdGVkRGF0ZXMgPSB0aGlzLnV0aWxTZXJ2aWNlLm9yZGVyU2VsZWN0ZWREYXRlcyhzZWxlY3RlZERhdGVzLCBzZWxlY3RlZE9yZGVyQnkpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBzZWxlY3RlZERhdGVzO1xyXG4gICAgICAgIHRoaXMucmVzZXRNb250aFllYXJTZWxlY3QoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgb25NdWx0aURhdGVzT2tDbGlja2VkKCRldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLm11bHRpRGF0ZXNDaGFuZ2VkKHRoaXMuc2VsZWN0ZWREYXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25NdWx0aURhdGVSZW1vdmVkKHJlbW92ZUl0ZW0pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSB0aGlzLnNlbGVjdGVkRGF0ZXMuZmlsdGVyKG4gPT4gbiE9PSByZW1vdmVJdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk11bHRpRGF0ZUNsZWFyKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dHb0JhY2tUb2RheSgpIHtcclxuICAgICAgICBjb25zdCB7IG1vbnRoTmJyLCB5ZWFyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuICAgICAgICBjb25zdCB7IHllYXI6IGN1cnJlbnRZZWFyLCBtb250aCB9ID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIHJldHVybiBtb250aE5iciAhPSBtb250aCB8fCB5ZWFyICE9IGN1cnJlbnRZZWFyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2FsZW5kYXJWaWV3KHllYXIsIG1vbnRoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZU1vbnRoLnllYXIgIT0geWVhciB8fCB0aGlzLnZpc2libGVNb250aC5tb250aE5iciAhPSBtb250aCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aCA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbW9udGhdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IG1vbnRoLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGgueWVhciA9IHllYXI7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC5tb250aE5iciA9IG1vbnRoO1xyXG5cclxuICAgICAgICAgICAgLy90ZnM2MzgyODBcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtb250aCwgeWVhciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdvdG90b2RheVZpZXcoJGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aCB9ID0gdGhpcy5nZXRUb2RheSgpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2FsZW5kYXJWaWV3KHllYXIsIG1vbnRoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNlbGVjdERhdGVDbGlja2VkKCRldmVudCkge1xyXG4gICAgICAgIGlmICghJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aCB9ID0gJGV2ZW50O1xyXG4gICAgICAgIHRoaXMuc2V0Q2FsZW5kYXJWaWV3KHllYXIsIG1vbnRoKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICBwcml2YXRlIG1ha2VSYW5nZShcclxuICAgICAgICBsZW5ndGg6IG51bWJlcixcclxuICAgICAgICBzdGVwOiBudW1iZXIgPSAxLFxyXG4gICAgICAgIHN0YXJ0OiBudW1iZXIgPSAwXHJcbiAgICApOiBudW1iZXJbXSB7XHJcbiAgICAgICAgc3RlcCA9IE1hdGguY2VpbChzdGVwKTtcclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5KE1hdGguY2VpbChsZW5ndGggLyBzdGVwKSlcclxuICAgICAgICAgICAgLmZpbGwoMClcclxuICAgICAgICAgICAgLm1hcCgoXywgaSkgPT4gKGkgKyBzdGFydCkgKiBzdGVwKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkSG91cnMoKSB7XHJcbiAgICAgICAgbGV0IGhvdXJSYW5nZXMgPSAyNDtcclxuICAgICAgICBsZXQgZGlzYWJsZWRIb3VycyA9IHRoaXMuZGlzYWJsZWRIb3VycyAmJiB0aGlzLmRpc2FibGVkSG91cnMoKTtcclxuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGhvdXJSYW5nZSA9IHRoaXMubWFrZVJhbmdlKGhvdXJSYW5nZXMsIHRoaXMub3B0cy5ob3VyU3RlcCwgc3RhcnRJbmRleCkubWFwKFxyXG4gICAgICAgICAgICByID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRIb3VycyAmJiBkaXNhYmxlZEhvdXJzLmluZGV4T2YocikgIT09IC0xXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyDnp7vpmaTnpoHnlKjnmoTlgLxcclxuICAgICAgICByZXR1cm4gaG91clJhbmdlLmZpbHRlciggbiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKG4uZGlzYWJsZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRNaW51dGVzKHRpbWVPYmo6IGFueSkge1xyXG4gICAgICAgIGxldCBtaW51dGVSYW5nZSA9IHRoaXMubWFrZVJhbmdlKDYwLCB0aGlzLm9wdHMubWludXRlU3RlcCkubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IHIsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkTWludXRlcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRNaW51dGVzKHRpbWVPYmouaG91cnMhKS5pbmRleE9mKHIpICE9PSAtMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDnp7vpmaTnpoHnlKjnmoTlgLxcclxuICAgICAgICByZXR1cm4gbWludXRlUmFuZ2UuZmlsdGVyKCBuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICEobi5kaXNhYmxlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZFNlY29uZHModGltZU9iajogYW55KSB7XHJcbiAgICAgICAgbGV0IHNlY29uZFJhbmdlID0gdGhpcy5tYWtlUmFuZ2UoNjAsIHRoaXMub3B0cy5zZWNvbmRTdGVwKS5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDogcixcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRTZWNvbmRzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFNlY29uZHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPYmouaG91cnMhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lT2JqLm1pbnV0ZXMhXHJcbiAgICAgICAgICAgICAgICAgICAgKS5pbmRleE9mKHIpICE9PSAtMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDnp7vpmaTnpoHnlKjnmoTlgLxcclxuICAgICAgICByZXR1cm4gc2Vjb25kUmFuZ2UuZmlsdGVyKCBuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICEobi5kaXNhYmxlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tUaW1lVmFsdWVzKHRpbWVWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRpbWVWYWx1ZSkge1xyXG4gICAgICAgICAgICBsZXQgdGltZXMgPSB0aW1lVmFsdWUuc3BsaXQoJzonKS5tYXAobiA9PiBwYXJzZUludChuLCAxMCkpO1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgaG91cjogdGltZXNbMF0sXHJcbiAgICAgICAgICAgICAgICBtaW51dGU6IHRpbWVzWzFdLFxyXG4gICAgICAgICAgICAgICAgc2Vjb25kOiB0aW1lc1syXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5ob3VyU3RlcCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy5idWlsZEhvdXJzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhvdXJzLmZpbmQobiA9PiBuLmluZGV4ID09PSB0aW1lT2JqLmhvdXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZU9iai5ob3VyID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5taW51dGVTdGVwID4gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IHRoaXMuYnVpbGRNaW51dGVzKHsgaG91cnM6IHRpbWVPYmouaG91ciB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghbWludXRlcy5maW5kKG4gPT4gbi5pbmRleCA9PT0gdGltZU9iai5taW51dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZU9iai5taW51dGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zZWNvbmRTdGVwPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gdGhpcy5idWlsZFNlY29uZHMoeyBob3VyczogdGltZU9iai5ob3VyLCBtaW51dGVzOiB0aW1lT2JqLm1pbnV0ZSB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghc2Vjb25kcy5maW5kKG4gPT4gbi5pbmRleCA9PT0gdGltZU9iai5zZWNvbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZU9iai5zZWNvbmQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYCR7dGltZU9iai5ob3VyIHx8ICcwMCd9OiR7dGltZU9iai5taW51dGUgfHwgJzAwJ306JHt0aW1lT2JqLnNlY29uZCB8fCAnMDAnfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGltZVZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrVGltZVZhbHVlKGRhdGVPYmo6IElNeURhdGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuaG91clN0ZXAgPiAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy5idWlsZEhvdXJzKCk7XHJcbiAgICAgICAgICAgIGlmICghaG91cnMuZmluZChuID0+IG4uaW5kZXggPT09ICBwYXJzZUludCgnJysgZGF0ZU9iai5ob3VyLCAxMCkpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqLmhvdXIgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5taW51dGVTdGVwID4gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGVzID0gdGhpcy5idWlsZE1pbnV0ZXMoeyBob3VyczogZGF0ZU9iai5ob3VyIH0pO1xyXG4gICAgICAgICAgICBpZiAoIW1pbnV0ZXMuZmluZChuID0+IG4uaW5kZXggPT09IHBhcnNlSW50KCcnK2RhdGVPYmoubWludXRlLCAxMCkpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqLm1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuc2Vjb25kU3RlcD4gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gdGhpcy5idWlsZFNlY29uZHMoeyBob3VyczogZGF0ZU9iai5ob3VyLCBtaW51dGVzOiBkYXRlT2JqLm1pbnV0ZSB9KTtcclxuICAgICAgICAgICAgaWYgKCFzZWNvbmRzLmZpbmQobiA9PiBuLmluZGV4ID09PSBwYXJzZUludCgnJytkYXRlT2JqLnNlY29uZCwgMTApKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9iai5zZWNvbmQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==