{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-datepicker/lib/enums/cal-toggle.enum.ts","ng://@farris/ui-datepicker/lib/enums/default-view.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-code.enum.ts","ng://@farris/ui-datepicker/lib/enums/key-name.enum.ts","ng://@farris/ui-datepicker/lib/enums/month-id.enum.ts","ng://@farris/ui-datepicker/lib/enums/reset-date-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/show-type.enum.ts","ng://@farris/ui-datepicker/lib/enums/year.enum.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.config.service.ts","ng://@farris/ui-datepicker/lib/constants/constants.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.locale.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.util.service.ts","ng://@farris/ui-datepicker/lib/services/farris-datepicker.service.ts","ng://@farris/ui-datepicker/lib/interfaces/my-options.interface.ts","ng://@farris/ui-datepicker/lib/components/calendar/calendar.component.ts","ng://@farris/ui-datepicker/lib/components/selection-bar/selection-bar.component.ts","ng://@farris/ui-datepicker/lib/components/day-view/day-view.component.ts","ng://@farris/ui-datepicker/lib/components/month-view/month-view.component.ts","ng://@farris/ui-datepicker/lib/components/year-view/year-view.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.input.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.component.ts","ng://@farris/ui-datepicker/lib/components/selection-sidebar/selection-sidebar.component.ts","ng://@farris/ui-datepicker/lib/AngularMyDatePicker.component.ts","ng://@farris/ui-datepicker/lib/components/dynamic-view/dynamic-view.component.ts","ng://@farris/ui-datepicker/lib/dynamic-date-input/dynamic-date-input.component.ts","ng://@farris/ui-datepicker/lib/multi-date-input/multi-date-input.component.ts","ng://@farris/ui-datepicker/lib/components/multi-day-view/multi-day-view.component.ts","ng://@farris/ui-datepicker/lib/components/multi-day-view/multi-days.component.ts","ng://@farris/ui-datepicker/lib/farris-datepicker.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","Open","CloseByDateSel","CloseByCalBtn","CloseByOutClick","CloseByEsc","Date","Month","Year","enter","esc","space","leftArrow","upArrow","rightArrow","downArrow","tab","shift","prev","curr","both","singleDate","dateRange","all","noDate","noDateAndMonth","selectWeek","min","max","DefaultConfigService","getDefaultConfig","defaultConfig","Injectable","dayLabels","su","mo","tu","we","th","fr","sa","monthLabels","1","2","3","4","5","6","7","8","9","10","11","12","dateFormat","returnFormat","defaultView","DefaultView","showType","ShowType","firstDayOfWeek","satHighlight","sunHighlight","highlightDates","markCurrentDay","markCurrentMonth","markCurrentYear","monthSelector","yearSelector","disableHeaderButtons","showWeekNumbers","selectorHeight","selectorWidth","disableUntil","year","month","day","hour","minute","second","disableSince","disableDates","disableDateRanges","disableWeekends","disableWeekdays","enableDates","markDates","markWeekends","marked","color","closeSelectorOnDateSelect","closeSelectorOnDocumentClick","minYear","maxYear","focusInputOnDateSelect","moveFocusByArrowKeys","dateRangeDatesDelimiter","inputFieldValidation","stylesData","selector","styles","ariaLabelPrevMonth","ariaLabelNextMonth","shortcuts","weekText","D","DD","M","MM","MMM","YYYY","UNDER_LINE","SU","MO","TU","WE","TH","FR","SA","DEFAULT_LOCALE","EMPTY_STR","CLICK","DISABLED","OPTIONS","DEFAULT_MONTH","OPTS","YEARS","VISIBLE_MONTH","SELECT_MONTH","SELECT_YEAR","PREV_VIEW_DISABLED","NEXT_VIEW_DISABLED","DATES","WEEK_DAYS","SELECTED_DATE","SELECTED_DATE_RANGE","MONTHS","DatepickerLocaleService","getLocaleOptions","locale","locales","EN_US","yearTxt","timeBtnText","dateBtnText","commitBtnText","placeholder","range","begin","end","message","101","102","dynamicLocale","setting","today","presentWeek","presentMonth","presentYear","previous","future","week","current","first","last","mulstiDatesLocale","backtotoday","clearSelections","delete","selected","ZH_CN","ZH_CHT","UtilService","isDateValid","dateStr","options","isReturn","_dateStr","returnDate","resetDate","showTime","_st","formatStr","replace","substring","toLocaleLowerCase","indexOf","daysInMonth","isMonthStr","delimeters","match","split","timeStr","_timer","Number","substr","isNaN","undefined","test","df","includes","slice","dateValue","getDateValue","getNumberByValue","getMonthNumberByMonthName","date","isDisabledDate","isDateValidDateRange","dateRangeStr","dates","_a","beginDate","endDate","isInitializedDate","isDateSameOrEarlier","da","del","re","RegExp","ds","format","yearIndex","monthIndex","dayIndex","key","toLowerCase","nbr","parseDefaultMonth","monthString","monthTxt","monthNbr","dateMs","getTimeInMilliseconds","dayNbr","getDayNumber","dn","disableWeekdays_1","tslib_1.__values","disableWeekdays_1_1","wd","getWeekdayIndex","disableDates_1","disableDates_1_1","d","disableDateRanges_1","disableDateRanges_1_1","isMarkedDate","markedDates","markedDates_1","markedDates_1_1","md","_c","_d","isHighlightedDate","highlightDates_1","highlightDates_1_1","getWeekNumber","setDate","getDate","getDay","Math","round","getTime","getFullYear","getNowWeekTime","getMonth","isMonthDisabledByDisableUntil","isMonthDisabledByDisableSince","getDateModel","rangeDelimiter","singleDateModel","dateRangeModel","date$$1","jsDate","getDate2","formatted","formatDate","returnFormatted","epoc","getEpocTime","beginJsDate","beginEpoc","endJsDate","endEpoc","isRange","String","preZero","delStr","index","getFormattedDate","model","val","isInitializedMonth","isInitializedYear","isDateEarlier","firstDate","secondDate","isDateSame","isDateRangeBeginOrEndSame","isDateInRange","now","weekDays","getKeyCodeFromEvent","event","keyCode","KeyName","KeyCode","getNearDate","minMilliseconds","maxMilliseconds","nowMilliseconds","disabledHours","currentDate","minHour","maxHour","res","disabledMinutes","_hour","maxMinute","minMinute","disabledSeconds","_minute","maxSecond","minSecond","getDateTypeString","dt","formatDynamicValue","fval","name","count","dateType","padStartZero","str","padStart","orderSelectedDates","items","order","orderBy","DatePickerService","parseOptions","opts","defaultOpts","keys","forEach","k","validate","valid","_dateRange","utilService","registerScrollEvent","fn","_mouseScrollHandle","document","addEventListener","removeMouseEvent","container","querySelector","removeEventListener","_mouseWheelHandle","appendSelector","elem","hasChildNodes","childNodes","el","removeChild","createElement","classList","add","body","appendChild","closest","preventDefault","getSelectorPosition","calendarRef","top","left","_selectorHeight","_selectorWidth","enableDynamic","showPresent","multiSelect","viewType","b","getBoundingClientRect","position","getSelectorDimension","offsetHeight","window","innerHeight","height","arrow","location","nativeElement","style","display","width","scrollTop","documentElement","CalendarComponent","getTimeStr","getHours","getMinutes","getSeconds","initialize","defaultMonth","selectorPos","inputValue","dc","cvc","rds","cbe","_this","separator","selectedOrderBy","visibleMonth","visibleMonth_range","dayIdx","weekDayOpts","idx","getToday","selectedMonth","selectedMonth_range","monthRangeValue","selectedDates","map","dateHlp","formatTo","_dObj","_b","selectedDateRange","timeVlaue","_second","timeVlaue_range","endyear","dateObj","weekNbr","selectedWeek","selectedDate","dateChanged","calendarViewChanged","rangeDateSelection","closedByEsc","setCalendarVisibleMonth","onMonthViewBtnClicked","onYearViewBtnClicked","resetDateValue","ResetDateType","resetMonthYearSelect","isSecondCalendar","selectMonth_range","selectYear_range","selectMonth","selectYear","selectTime","generateMonths","cdr","detectChanges","onMonthCellClicked","cell","mc","toSelectMonth","generateCalendar","onMonthCellKeyDown","getSourceRowAndColumnFromEvent","sourceRow","sourceCol","getTargetFocusRowAndColumn","moveFocus","targetRow","targetCol","focusCellElement","generateYears","onYearCellClicked","yc","toSelectYear","onYearCellKeyDown","months_range","months","row","j","disabled","currMonth","monthObj","setMonthViewHeaderBtnDisabledState","inputYear","y","years_range","years","flatten","findIndex","minMax","currYear","yearObj","setYearViewHeaderBtnDisabledState","onPrevNavigateBtnClicked","setDateViewMonth","onNextNavigateBtnClicked","isNext","change","setMonth","onCloseSelector","onDayCellClicked","cmo","selectDate","onDayCellKeyDown","onDayCellMouseEnter","_e","_f","w","_g","_h","_j","dates_range","_k","_l","_m","onDayCellMouseLeave","onMonthCellMouseEnter","item","onMonthCellMouseLeave","onYearCellMouseEnter","item_1","item_1_1","item_2","item_2_1","onYearCellMouseLeave","item_3","item_3_1","item_4","item_4_1","onWeekClicked","weekData","target","id","arr","col","rowCount","colCount","type","selectorEl","focus","isBeginDateInitialized","isEndDateInitialized","JSON","stringify","isBegin","_date","ViewType","isBeginMonthInitialized","isEndMonthInitialized","isBeginYearInitialized","isEndYearInitialized","monthStartIdx","setFullYear","sundayIdx","daysInPrevMonth","isCurrDay","MonthId","getWidth","hasShortCuts","getWeekday","notifyChange","monthStart","dInThisM","dInPrevM","currDay","markedDate","highlight","daysLeft","dateIndex","setDateViewHeaderBtnDisabledState","number","weekday","dpm","dnm","prevViewDisabled_range","nextViewDisabled_range","prevDobViewDisabled_range","nextDobViewDisabled_range","prevViewDisabled","nextViewDisabled","prevDobViewDisabled","nextDobViewDisabled","yp","yn","dpy","dny","onContainerClick","stopPropagation","onClickTimeBtn","beginIsInitializedDate","endIsInitializedDate","endmonth","checkTimeValues","onShowDynamicView","$event","showDynamicView","dynamicViewShow","emit","onShowDatePanel","getTimeValue","isDateRange","start","timeArr","nowDate","timeArr_range","onClickOkBtn","timeObj","timeObj_range","selectedDate_range","initializedDate","checkTimeValue","isInDisableRange","earlier","dateModel","onTodayClick","onDynamicOkClick","dynamicviewRef","text","formatValue","getValue","dynamicValueChanged","otherDate","setTime","targetDate","targetDateRange","onSelectCurrentWeek","firstDay","onDynamicValueChanged","btnDynamicDisabled","onDayCellClickedForMultiDates","maxSelected","isSelected","find","filter","showNotify","onMultiDatesOkClicked","multiDatesChanged","onMultiDateRemoved","removeItem","onMultiDateClear","showGoBackToday","currentYear","setCalendarView","gototodayView","onSelectDateClicked","makeRange","step","ceil","Array","fill","_","buildHours","hourStep","buildMinutes","minuteStep","buildSeconds","secondStep","timeValue","times","parseInt","timeObj_1","hours","minutes","Component","args","template","providers","encapsulation","ViewEncapsulation","None","Renderer2","ChangeDetectorRef","ViewChild","HostBinding","Output","renderer","EventEmitter","scrollDiff","disabledHours2","disabledMinutes2","disabledSeconds2","SelectionBarComponent","ngOnChanges","changes","currentValue","prevNavigateBtnClicked","nextNavigateBtnClicked","onPrevDobNavigateBtnClicked","onNextDobNavigateBtnClicked","monthViewBtnClicked","yearViewBtnClicked","onTodayViewBtnClicked","todayViewBtnClicked","getFormateType","yIndex","Input","DayViewComponent","dayCellClicked","dayCellKeyDown","weekClicked","onMouseEnter","onMouseLeave","prevMonthId","currMonthId","nextMonthId","MonthViewComponent","monthCellClicked","monthCellKeyDown","isMonthInRange","isMonthSame","isMonthRangeBeginOrEndSame","YearViewComponent","ngOnInit","yearCellClicked","yearCellKeyDown","onPrevOrNextYearCellClicked","prevCellClicked","nextCellClicked","isYearSame","NGX_DP_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","FarrisDatePickerDirective","multi","NGX_DP_VALIDATORS","NG_VALIDATORS","onKeyUp","ignoreKeyPress","closeSelector","CalToggle","emitInputFieldChanged","onBlur","inputText","clearDate","onChangeCb","onTouchedCb","onClick","evt","preventClose","cRef","contains","setLocaleOptions","dm","defMonth","ngOnDestroy","closeCalendar","localeService","writeValue","setInputValue","instance","registerOnChange","registerOnTouched","setDisabledState","isDisabled","setProperty","c","openCalendar","vcRef","createComponent","cfr","resolveComponentFactory","close","focusToInput","updateModel","emitDateChanged","emitCalendarChanged","emitRangeDateSelection","emitCalendarToggle","toggleCalendar","onClickWrapper","setStyle","flag_1","reason","remove","hostView","inputFieldChanged","calendarToggle","jsDateToMyDate","Directive","exportAs","ViewContainerRef","ComponentFactoryResolver","ElementRef","NgZone","HostListener","config","zone","ev","FARRIS_DP_VALUE_ACCESSOR","FarrisDatepickerComponent","defineProperty","_dateFormat","_this_1","formArr","_timeFormat","_mm","_minDate","toString","isValid","_maxDate","dateFrom","_beginValue","dateTo","returnType","_initFinished","setValue","_endValue","_value","v","_ngControl","injector","get","NgControl","initPlaceholder","mergeDateOptions","datePicekrService","dateOpts","localDateOpts","localeConfig","beginPlaceholder","endPlaceholder","buildOptions","timeFormat","isFirstChange","inputs_1","readonly","firstChange","useDefault","setDefaultValue","ngAfterViewInit","control","_updateOn","updateOn","setTimeout","clearTimeout","overLayService","destory","clearIcon","visibility","isActiveTip","_runblur","totalFocus","transform","_isValid","_valueChangeEmitted","realDate","onNgModelChange","onModelTouched","editable","_mousedownEvent","blur","onFocus","registerMouseDownHandle","onInputClick","listen","className","dateInput","nowValue","clearDynamicDate","_SELECT_DATE_","_realRangeValue","_realValue","onDateChanged","onModelChange","clear","onSingleInputNgModelChange","realdate","emitValueChange","tmpArr","beginValueChange","endValueChange","cmpRef","valueChange","_onModelChange","getRealReturnFormatted","realValue","observers","whenValueChangedThenCloseSelectorPanel","dtService","onDateRangeInputBlur","join","multiSelectedChanged","msg","notifySer","warning","alert","subscribe","dynamicValue","singleValue","dynamicViewChanged","registerMouseEvent","onlyTopWindow","changeDetectorRef","childElementCount","beginFocus","endFocus","closeCalendarHandler","zindex","commonUtils","getFloatingLayerIndex","flag_2","valChangeParams","formatedValue","nd","minDate","minMonth","minDay","MIN_DATE","differenceInSeconds","maxDate","maxMonth","maxDay","maxute","MAX_DATE","checkMultiSelectedOption","fmtList","_showTime","disableDateRangesBegin","disableDateRangesEnd","markDatesColor","isMarkWeekends","markWeekendsColor","dynamicText","dynamicValueChange","previousMaxDays","futureMaxDays","originTime","ignorRange","convert","_getValue","fmt","time","h","yearValue","tmpDate","tmpBegin","tmpEnd","tmpBeginDate","tmpEndDate","_fmt","_tmpDate","parse","formattedVal","_tmpDateArr","beginStr","endStr","markForCheck","updateValue","getValueByType","isDate","onPrevFocus","PrevFocus","onNextFocus","NextFocus","_convert2dateString","t_1","checkSpaceReg","objDate","_r","_isValid2","isValided","seconds","onRemoveDate","LocaleService","Injector","read","defaultConfigService","cls","showClear","obj","DateTimeHelperService","NotifyService","_applicationRef","ApplicationRef","OverLayHiddenService","CommonUtils","SelectionSidebarComponent","AngularMyDatePickerComponent","DynamicViewComponent","_data","onListItemFormControlClick","lbl","click","previous_dateType","previous_days","future_dateType","future_days","present_first_dateType","present_last_dateType","cd","period","isFirstDay","isLastDay","setDays","typ","days","checkMaxDays","tye","onNumberKeydown","DynamicDateInputComponent","inject","inputClick","tabKeydown","MultiSelectDateInputComponent","shadowBox","initDateItems","_dateItems","setHiddenCount","moveShadowToBody","toggleShadowBox","clickHandle","onRemove","txt","onResized","updateShadowBoxPosition","len","from","querySelectorAll","offsetTop","hiddenItemsCount$","render","append","show","removeStyle","BehaviorSubject","MultiDayViewComponent","isDateSelected","MultiSelectedDaysComponent","removed","onClear","onSelectDateClick","clicked","FarrisDatePickerModule","NgModule","imports","CommonModule","FormsModule","TimePickerModule","LocaleModule","FarrisCommonModule","PopoverModule","forRoot","DateHelperModule","NotifyModule","FarrisFormsModule","declarations","entryComponents","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export enum CalToggle {\r\n    Open = 1,\r\n    CloseByDateSel = 2,\r\n    CloseByCalBtn = 3,\r\n    CloseByOutClick = 4,\r\n    CloseByEsc = 5\r\n}\r\n","export enum DefaultView {\r\n    Date = 1,\r\n    Month = 2,\r\n    Year = 3\r\n}\r\n","/**\r\n * Event key codes\r\n */\r\nexport enum KeyCode {\r\n    enter = 13,\r\n    esc = 27,\r\n    space = 32,\r\n    leftArrow = 37,\r\n    upArrow = 38,\r\n    rightArrow = 39,\r\n    downArrow = 40,\r\n    tab = 9,\r\n    shift = 16\r\n}\r\n","/**\r\n * Event key names\r\n */\r\nexport enum KeyName {\r\n    enter = 'Enter',\r\n    esc = 'Escape',\r\n    space = ' ',\r\n    leftArrow = 'ArrowLeft',\r\n    upArrow = 'ArrowUp',\r\n    rightArrow = 'ArrowRight',\r\n    downArrow = 'ArrowDown',\r\n    tab = 'Tab',\r\n    shift = 'Shift'\r\n}\r\n","export enum MonthId {\r\n    prev = 1,\r\n    curr = 2,\r\n    next = 3\r\n}\r\n","export enum ResetDateType {\r\n    both = 0,\r\n    singleDate = 1,\r\n    dateRange = 2\r\n}\r\n","export enum ShowType {\r\n    all = 1,\r\n    noDate = 2,\r\n    noDateAndMonth = 3,\r\n    selectWeek = 4\r\n}\r\n","export enum Year {\r\n    min = 1000,\r\n    max = 9999\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyOptions } from '../interfaces/public-api';\r\nimport { Year, DefaultView, ShowType } from '../enums/public-api';\r\n\r\n@Injectable()\r\nexport class DefaultConfigService {\r\n    private defaultConfig: IMyOptions = {\r\n        dateRange: false,\r\n        dayLabels: {\r\n            su: 'Sun',\r\n            mo: 'Mon',\r\n            tu: 'Tue',\r\n            we: 'Wed',\r\n            th: 'Thu',\r\n            fr: 'Fri',\r\n            sa: 'Sat'\r\n        },\r\n        monthLabels: {\r\n            1: 'Jan',\r\n            2: 'Feb',\r\n            3: 'Mar',\r\n            4: 'Apr',\r\n            5: 'May',\r\n            6: 'Jun',\r\n            7: 'Jul',\r\n            8: 'Aug',\r\n            9: 'Sep',\r\n            10: 'Oct',\r\n            11: 'Nov',\r\n            12: 'Dec'\r\n        },\r\n        dateFormat: 'yyyy-MM-dd',\r\n        returnFormat: 'yyyy-MM-dd',\r\n        defaultView: DefaultView.Date,\r\n        showType: ShowType.all,\r\n        firstDayOfWeek: 'mo',\r\n        satHighlight: false,\r\n        sunHighlight: false,\r\n        highlightDates: [],\r\n        markCurrentDay: true,\r\n        markCurrentMonth: true,\r\n        markCurrentYear: true,\r\n        monthSelector: true,\r\n        yearSelector: true,\r\n        disableHeaderButtons: true,\r\n        showWeekNumbers: false,\r\n        selectorHeight: '295px',\r\n        selectorWidth: '287px',\r\n        disableUntil: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableSince: { year: 0, month: 0, day: 0 ,hour:0,minute:0,second:0},\r\n        disableDates: [],\r\n        disableDateRanges: [],\r\n        disableWeekends: false,\r\n        disableWeekdays: [],\r\n        enableDates: [],\r\n        markDates: [],\r\n        markWeekends: { marked: false, color: '' },\r\n        closeSelectorOnDateSelect: true,\r\n        closeSelectorOnDocumentClick: true,\r\n        minYear: Year.min,\r\n        maxYear: Year.max,\r\n        focusInputOnDateSelect: true,\r\n        moveFocusByArrowKeys: true,\r\n        dateRangeDatesDelimiter: ' - ',\r\n        inputFieldValidation: true,\r\n        stylesData: { selector: '', styles: '' },\r\n        ariaLabelPrevMonth: 'Previous Month',\r\n        ariaLabelNextMonth: 'Next Month',\r\n        shortcuts: [],\r\n        weekText: 'Week'\r\n    };\r\n\r\n    public getDefaultConfig() {\r\n        return this.defaultConfig;\r\n    }\r\n}\r\n","/**\r\n * Constants\r\n */\r\nconst D = 'd';\r\nconst DD = 'dd';\r\nconst M = 'M';\r\nconst MM = 'MM';\r\nconst MMM = 'MMM';\r\nconst Y = 'y';\r\nconst YYYY = 'yyyy';\r\n\r\nconst DATE_ROW_COUNT = 5;\r\nconst DATE_COL_COUNT = 6;\r\nconst MONTH_ROW_COUNT = 3;\r\nconst MONTH_COL_COUNT = 2;\r\nconst YEAR_ROW_COUNT = 4;\r\nconst YEAR_COL_COUNT = 4;\r\n\r\nconst DOT = '.';\r\nconst UNDER_LINE = '_';\r\n\r\nconst SU = 'su';\r\nconst MO = 'mo';\r\nconst TU = 'tu';\r\nconst WE = 'we';\r\nconst TH = 'th';\r\nconst FR = 'fr';\r\nconst SA = 'sa';\r\n\r\nconst DEFAULT_LOCALE = 'ZH_CN';\r\n\r\nconst ZERO_STR = '0';\r\nconst EMPTY_STR = '';\r\n\r\nconst CLICK = 'click';\r\nconst KEYUP = 'keyup';\r\nconst BLUR = 'blur';\r\nconst DISABLED = 'disabled';\r\nconst BODY = 'body';\r\nconst VALUE = 'value';\r\nconst OPTIONS = 'options';\r\nconst DEFAULT_MONTH = 'defaultMonth';\r\nconst LOCALE = 'locale';\r\nconst OBJECT = 'object';\r\nconst PX = 'px';\r\nconst STYLE = 'style';\r\n\r\nconst OPTS = 'opts';\r\nconst YEARS = 'years';\r\nconst VISIBLE_MONTH = 'visibleMonth';\r\nconst SELECT_MONTH = 'selectMonth';\r\nconst SELECT_YEAR = 'selectYear';\r\nconst PREV_VIEW_DISABLED = 'prevViewDisabled';\r\nconst NEXT_VIEW_DISABLED = 'nextViewDisabled';\r\nconst DATES = 'dates';\r\nconst WEEK_DAYS = 'weekDays';\r\nconst SELECTED_DATE = 'selectedDate';\r\nconst SELECTED_DATE_RANGE = 'selectedDateRange';\r\nconst MONTHS = 'months';\r\n\r\nconst PREVENT_CLOSE_TIMEOUT = 50;\r\n\r\nexport {\r\n    D,\r\n    DD,\r\n    M,\r\n    MM,\r\n    MMM,\r\n    Y,\r\n    YYYY,\r\n    DATE_ROW_COUNT,\r\n    DATE_COL_COUNT,\r\n    MONTH_ROW_COUNT,\r\n    MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT,\r\n    YEAR_COL_COUNT,\r\n    DOT,\r\n    UNDER_LINE,\r\n    SU,\r\n    MO,\r\n    TU,\r\n    WE,\r\n    TH,\r\n    FR,\r\n    SA,\r\n    DEFAULT_LOCALE,\r\n    ZERO_STR,\r\n    EMPTY_STR,\r\n    CLICK,\r\n    KEYUP,\r\n    BLUR,\r\n    DISABLED,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX,\r\n    STYLE,\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE,\r\n    MONTHS,\r\n    PREVENT_CLOSE_TIMEOUT\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { IMyLocales, IMyOptions } from '../interfaces/public-api';\r\n\r\nimport { DEFAULT_LOCALE } from '../constants/constants';\r\n\r\n@Injectable()\r\nexport class DatepickerLocaleService {\r\n    private locales: IMyLocales = {\r\n        'EN_US': {\r\n            dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n            monthLabels: {\r\n                1: 'Jan',\r\n                2: 'Feb',\r\n                3: 'Mar',\r\n                4: 'Apr',\r\n                5: 'May',\r\n                6: 'Jun',\r\n                7: 'Jul',\r\n                8: 'Aug',\r\n                9: 'Sep',\r\n                10: 'Oct',\r\n                11: 'Nov',\r\n                12: 'Dec'\r\n            },\r\n            dateFormat: 'MM/dd/yyyy',\r\n            returnFormat: 'MM/dd/yyyy',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: 'Select Time',\r\n            dateBtnText: 'Select Date',\r\n            commitBtnText: 'OK',\r\n            weekText: 'Week',\r\n            placeholder: 'Please select a date',\r\n            range: {\r\n                begin: 'Please select a begin date',\r\n                end: 'Please select a end date'\r\n            },\r\n            message: {\r\n                101: 'The end time must not be earlier than the start time.',\r\n                102: 'Only ${0} dates are allowed to be selected.'\r\n            },\r\n            dynamicLocale: {\r\n                setting: 'Dynamic Date',\r\n                today: 'Today',\r\n                presentWeek: 'Current Week',\r\n                presentMonth: 'Current Month',\r\n                presentYear: 'Current Year',\r\n                previous: 'Previous',\r\n                future: 'Future',\r\n                day: 'Day',\r\n                month: 'Month',\r\n                year: 'Year',\r\n                week: 'Week',\r\n                current: 'Current',\r\n                first: 'First Day',\r\n                last: 'Last Day'\r\n            },\r\n            mulstiDatesLocale: {\r\n                backtotoday: 'Back to today',\r\n                clearSelections: 'Clear all',\r\n                delete: 'Delete',\r\n                selected: 'Selected,days'\r\n            }\r\n        },\r\n        'ZH_CN': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: '',\r\n                102: ' ${0} '\r\n            },\r\n            dynamicLocale: {\r\n                setting: '',\r\n                today: '',\r\n                presentWeek: '',\r\n                presentMonth: '',\r\n                presentYear: '',\r\n                previous: '',\r\n                future: '',\r\n                day: '',\r\n                month: '',\r\n                year: '',\r\n                week: '',\r\n                current: '',\r\n                first: ' 1 ',\r\n                last: ' 1 '\r\n            },\r\n            mulstiDatesLocale: {\r\n                backtotoday: '',\r\n                clearSelections: '',\r\n                delete: '',\r\n                selected: ','\r\n            }\r\n        },\r\n        'ZH_CHT': {\r\n            dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n            monthLabels: {\r\n                1: '',\r\n                2: '',\r\n                3: '',\r\n                4: '',\r\n                5: '',\r\n                6: '',\r\n                7: '',\r\n                8: '',\r\n                9: '',\r\n                10: '',\r\n                11: '',\r\n                12: ''\r\n            },\r\n            dateFormat: 'yyyy-MM-dd',\r\n            returnFormat: 'yyyy-MM-dd',\r\n            firstDayOfWeek: 'mo',\r\n            sunHighlight: false,\r\n            yearTxt: '',\r\n            timeBtnText: '',\r\n            dateBtnText: '',\r\n            commitBtnText: '',\r\n            weekText: '',\r\n            placeholder: '',\r\n            range: {\r\n                begin: '',\r\n                end: ''\r\n            },\r\n            message: {\r\n                101: '',\r\n                102: ' ${0} '\r\n            },\r\n            dynamicLocale: {\r\n                setting: '',\r\n                today: '',\r\n                presentWeek: '',\r\n                presentMonth: '',\r\n                presentYear: '',\r\n                previous: '',\r\n                future: '',\r\n                day: '',\r\n                month: '',\r\n                year: '',\r\n                week: '',\r\n                current: '',\r\n                first: ' 1 ',\r\n                last: ' 1 '\r\n            },\r\n            mulstiDatesLocale: {\r\n                backtotoday: '',\r\n                clearSelections: '',\r\n                delete: '',\r\n                selected: ','\r\n            }\r\n        } // ,\r\n        // he: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ja: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy.mm.dd',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fr: {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'fr-ch': {\r\n        //     dayLabels: { su: 'Dim', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Jeu', fr: 'Ven', sa: 'Sam' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fv',\r\n        //         3: 'Mar',\r\n        //         4: 'Avr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juin',\r\n        //         7: 'Juil',\r\n        //         8: 'Ao',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dc'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // fi: {\r\n        //     dayLabels: { su: 'Su', mo: 'Ma', tu: 'Ti', we: 'Ke', th: 'To', fr: 'Pe', sa: 'La' },\r\n        //     monthLabels: {\r\n        //         1: 'Tam',\r\n        //         2: 'Hel',\r\n        //         3: 'Maa',\r\n        //         4: 'Huh',\r\n        //         5: 'Tou',\r\n        //         6: 'Kes',\r\n        //         7: 'Hei',\r\n        //         8: 'Elo',\r\n        //         9: 'Syy',\r\n        //         10: 'Lok',\r\n        //         11: 'Mar',\r\n        //         12: 'Jou'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // es: {\r\n        //     dayLabels: { su: 'Do', mo: 'Lu', tu: 'Ma', we: 'Mi', th: 'Ju', fr: 'Vi', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Ene',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hu: {\r\n        //     dayLabels: { su: 'Vas', mo: 'Ht', tu: 'Kedd', we: 'Sze', th: 'Cs', fr: 'Pn', sa: 'Szo' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'pr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Szep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sv: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Mn', tu: 'Tis', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // nl: {\r\n        //     dayLabels: { su: 'Zon', mo: 'Maa', tu: 'Din', we: 'Woe', th: 'Don', fr: 'Vri', sa: 'Zat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ru: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // uk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // no: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tr: {\r\n        //     dayLabels: { su: 'Paz', mo: 'Pzt', tu: 'Sal', we: 'ar', th: 'Per', fr: 'Cum', sa: 'Cmt' },\r\n        //     monthLabels: {\r\n        //         1: 'Oca',\r\n        //         2: 'ub',\r\n        //         3: 'Mar',\r\n        //         4: 'Nis',\r\n        //         5: 'May',\r\n        //         6: 'Haz',\r\n        //         7: 'Tem',\r\n        //         8: 'Au',\r\n        //         9: 'Eyl',\r\n        //         10: 'Eki',\r\n        //         11: 'Kas',\r\n        //         12: 'Ara'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'pt-br': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Seg', tu: 'Ter', we: 'Qua', th: 'Qui', fr: 'Sex', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Fev',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Out',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // de: {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'de-ch': {\r\n        //     dayLabels: { su: 'So', mo: 'Mo', tu: 'Di', we: 'Mi', th: 'Do', fr: 'Fr', sa: 'Sa' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mr',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dez'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // it: {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'it-ch': {\r\n        //     dayLabels: { su: 'Dom', mo: 'Lun', tu: 'Mar', we: 'Mer', th: 'Gio', fr: 'Ven', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mag',\r\n        //         6: 'Giu',\r\n        //         7: 'Lug',\r\n        //         8: 'Ago',\r\n        //         9: 'Set',\r\n        //         10: 'Ott',\r\n        //         11: 'Nov',\r\n        //         12: 'Dic'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // pl: {\r\n        //     dayLabels: { su: 'Nie', mo: 'Pon', tu: 'Wto', we: 'ro', th: 'Czw', fr: 'Pi', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Sty',\r\n        //         2: 'Lut',\r\n        //         3: 'Mar',\r\n        //         4: 'Kwi',\r\n        //         5: 'Maj',\r\n        //         6: 'Cze',\r\n        //         7: 'Lip',\r\n        //         8: 'Sie',\r\n        //         9: 'Wrz',\r\n        //         10: 'Pa',\r\n        //         11: 'Lis',\r\n        //         12: 'Gru'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // my: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sk: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ut', we: 'St', th: 't', fr: 'Pi', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mj',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // sl: {\r\n        //     dayLabels: { su: 'Ned', mo: 'Pon', tu: 'Tor', we: 'Sre', th: 'et', fr: 'Pet', sa: 'Sob' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Avg',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd. mm. yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ro: {\r\n        //     dayLabels: { su: 'du', mo: 'lu', tu: 'ma', we: 'mi', th: 'jo', fr: 'vi', sa: 'sa' },\r\n        //     monthLabels: {\r\n        //         1: 'ian',\r\n        //         2: 'feb',\r\n        //         3: 'mart',\r\n        //         4: 'apr',\r\n        //         5: 'mai',\r\n        //         6: 'iun',\r\n        //         7: 'iul',\r\n        //         8: 'aug',\r\n        //         9: 'sept',\r\n        //         10: 'oct',\r\n        //         11: 'nov',\r\n        //         12: 'dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ca: {\r\n        //     dayLabels: { su: 'dg', mo: 'dl', tu: 'dt', we: 'dc', th: 'dj', fr: 'dv', sa: 'ds' },\r\n        //     monthLabels: {\r\n        //         1: 'Gen',\r\n        //         2: 'Febr',\r\n        //         3: 'Mar',\r\n        //         4: 'Abr',\r\n        //         5: 'Maig',\r\n        //         6: 'Juny',\r\n        //         7: 'Jul',\r\n        //         8: 'Ag',\r\n        //         9: 'Set',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // id: {\r\n        //     dayLabels: { su: 'Min', mo: 'Sen', tu: 'Sel', we: 'Rab', th: 'Kam', fr: 'Jum', sa: 'Sab' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Mei',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Ags',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Des'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'en-au': {\r\n        //     dayLabels: { su: 'Sun', mo: 'Mon', tu: 'Tue', we: 'Wed', th: 'Thu', fr: 'Fri', sa: 'Sat' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'May',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Oct',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'am-et': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // cs: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 't', we: 'St', th: 't', fr: 'P', sa: 'So' },\r\n        //     monthLabels: {\r\n        //         1: 'Led',\r\n        //         2: 'no',\r\n        //         3: 'Be',\r\n        //         4: 'Dub',\r\n        //         5: 'Kv',\r\n        //         6: 'vn',\r\n        //         7: 'vc',\r\n        //         8: 'Srp',\r\n        //         9: 'Z',\r\n        //         10: 'j',\r\n        //         11: 'Lis',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // el: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // kk: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mmm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // th: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '..',\r\n        //         3: '..',\r\n        //         4: '..',\r\n        //         5: '..',\r\n        //         6: '..',\r\n        //         7: '..',\r\n        //         8: '..',\r\n        //         9: '..',\r\n        //         10: '..',\r\n        //         11: '..',\r\n        //         12: '..'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // 'ko-kr': {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '1',\r\n        //         2: '2',\r\n        //         3: '3',\r\n        //         4: '4',\r\n        //         5: '5',\r\n        //         6: '6',\r\n        //         7: '7',\r\n        //         8: '8',\r\n        //         9: '9',\r\n        //         10: '10',\r\n        //         11: '11',\r\n        //         12: '12'\r\n        //     },\r\n        //     dateFormat: 'yyyy mm dd',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // da: {\r\n        //     dayLabels: { su: 'Sn', mo: 'Man', tu: 'Tir', we: 'Ons', th: 'Tor', fr: 'Fre', sa: 'Lr' },\r\n        //     monthLabels: {\r\n        //         1: 'Jan',\r\n        //         2: 'Feb',\r\n        //         3: 'Mar',\r\n        //         4: 'Apr',\r\n        //         5: 'Maj',\r\n        //         6: 'Jun',\r\n        //         7: 'Jul',\r\n        //         8: 'Aug',\r\n        //         9: 'Sep',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lt: {\r\n        //     dayLabels: { su: 'Sk', mo: 'Pr', tu: 'An', we: 'Tr', th: 'Kt', fr: 'Pn', sa: 't' },\r\n        //     monthLabels: {\r\n        //         1: 'Saus.',\r\n        //         2: 'Vas.',\r\n        //         3: 'Kov.',\r\n        //         4: 'Bal.',\r\n        //         5: 'Geg.',\r\n        //         6: 'Bir.',\r\n        //         7: 'Liep.',\r\n        //         8: 'Rugp.',\r\n        //         9: 'Rugs.',\r\n        //         10: 'Sapl.',\r\n        //         11: 'Lapkr.',\r\n        //         12: 'Gruod.'\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // vi: {\r\n        //     dayLabels: { su: 'CN', mo: 'T2', tu: 'T3', we: 'T4', th: 'T5', fr: 'T6', sa: 'T7' },\r\n        //     monthLabels: {\r\n        //         1: 'THG 1',\r\n        //         2: 'THG 2',\r\n        //         3: 'THG 3',\r\n        //         4: 'THG 4',\r\n        //         5: 'THG 5',\r\n        //         6: 'THG 6',\r\n        //         7: 'THG 7',\r\n        //         8: 'THG 8',\r\n        //         9: 'THG 9',\r\n        //         10: 'THG 10',\r\n        //         11: 'THG 11',\r\n        //         12: 'THG 12'\r\n        //     },\r\n        //     dateFormat: 'dd/mm/yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bn: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'dd-mm-yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // bg: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '.',\r\n        //         2: '.',\r\n        //         3: '',\r\n        //         4: '.',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '.',\r\n        //         9: '.',\r\n        //         10: '.',\r\n        //         11: '.',\r\n        //         12: '.'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // hr: {\r\n        //     dayLabels: { su: 'Ne', mo: 'Po', tu: 'Ul', we: 'Sr', th: 'e', fr: 'Pe', sa: 'Su' },\r\n        //     monthLabels: {\r\n        //         1: 'Sij',\r\n        //         2: 'Vel',\r\n        //         3: 'Ou',\r\n        //         4: 'Tra',\r\n        //         5: 'Svi',\r\n        //         6: 'Lip',\r\n        //         7: 'Srp',\r\n        //         8: 'Kol',\r\n        //         9: 'Ruj',\r\n        //         10: 'Lis',\r\n        //         11: 'Stu',\r\n        //         12: 'Pro'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy.',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // ar: {\r\n        //     dayLabels: {\r\n        //         su: '',\r\n        //         mo: '',\r\n        //         tu: '',\r\n        //         we: '',\r\n        //         th: '',\r\n        //         fr: '',\r\n        //         sa: ''\r\n        //     },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'sa',\r\n        //     sunHighlight: false\r\n        // },\r\n        // is: {\r\n        //     dayLabels: { su: 'sun', mo: 'mn', tu: 'ri', we: 'mi', th: 'fim', fr: 'fs', sa: 'lau' },\r\n        //     monthLabels: {\r\n        //         1: 'jan',\r\n        //         2: 'feb',\r\n        //         3: 'mar',\r\n        //         4: 'apr',\r\n        //         5: 'ma',\r\n        //         6: 'jn',\r\n        //         7: 'jl',\r\n        //         8: 'g',\r\n        //         9: 'sep',\r\n        //         10: 'okt',\r\n        //         11: 'nv',\r\n        //         12: 'des'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'su',\r\n        //     sunHighlight: false\r\n        // },\r\n        // tw: {\r\n        //     dayLabels: { su: '', mo: '', tu: '', we: '', th: '', fr: '', sa: '' },\r\n        //     monthLabels: {\r\n        //         1: '',\r\n        //         2: '',\r\n        //         3: '',\r\n        //         4: '',\r\n        //         5: '',\r\n        //         6: '',\r\n        //         7: '',\r\n        //         8: '',\r\n        //         9: '',\r\n        //         10: '',\r\n        //         11: '',\r\n        //         12: ''\r\n        //     },\r\n        //     dateFormat: 'yyyy-mm-dd',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // lv: {\r\n        //     dayLabels: { su: 'S', mo: 'P', tu: 'O', we: 'T', th: 'C', fr: 'P', sa: 'S' },\r\n        //     monthLabels: {\r\n        //         1: 'Janv',\r\n        //         2: 'Febr',\r\n        //         3: 'Marts',\r\n        //         4: 'Apr',\r\n        //         5: 'Maijs',\r\n        //         6: 'Jn',\r\n        //         7: 'Jl',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dec'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // },\r\n        // et: {\r\n        //     dayLabels: { su: 'P', mo: 'E', tu: 'T', we: 'K', th: 'N', fr: 'R', sa: 'L' },\r\n        //     monthLabels: {\r\n        //         1: 'Jaan',\r\n        //         2: 'Veebr',\r\n        //         3: 'Mrts',\r\n        //         4: 'Apr',\r\n        //         5: 'Mai',\r\n        //         6: 'Juuni',\r\n        //         7: 'Juuli',\r\n        //         8: 'Aug',\r\n        //         9: 'Sept',\r\n        //         10: 'Okt',\r\n        //         11: 'Nov',\r\n        //         12: 'Dets'\r\n        //     },\r\n        //     dateFormat: 'dd.mm.yyyy',\r\n        //     firstDayOfWeek: 'mo',\r\n        //     sunHighlight: false\r\n        // }\r\n    };\r\n\r\n    getLocaleOptions(locale: string): IMyOptions {\r\n        if (locale && this.locales.hasOwnProperty(locale)) {\r\n            // User given locale\r\n            return this.locales[locale];\r\n        }\r\n        // Default: en\r\n        return this.locales[DEFAULT_LOCALE];\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:40:04\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:21:46\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport {\r\n    IMyDateModel,\r\n    IMySingleDateModel,\r\n    IMyDateRangeModel,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonth,\r\n    IMyMonthLabels,\r\n    IMyMarkedDates,\r\n    IMyMarkedDate,\r\n    IMyDateFormat,\r\n    IMyOptions\r\n} from '../interfaces/public-api';\r\nimport { KeyCode, KeyName, ShowType } from '../enums/public-api';\r\nimport { D, DD, M, MM, MMM, YYYY, SU, MO, TU, WE, TH, FR, SA, ZERO_STR, EMPTY_STR } from '../constants/constants';\r\nimport { DynamicData, DynamicDateType } from '../interfaces/dynamic-data-type.interface';\r\n\r\nimport { orderBy } from 'lodash-es';\r\nimport { MultiSelectedOrderBy } from '../interfaces/my-options.interface';\r\n\r\n@Injectable()\r\nexport class UtilService {\r\n    weekDays: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    isDateValid(dateStr: string, options: IMyOptions, isReturn = false): IMyDate {\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let _dateStr: string, hour = 0, minute = 0, second = 0;\r\n\r\n        const returnDate: IMyDate = this.resetDate();\r\n\r\n        if (!dateStr || !dateStr.length) {\r\n            return returnDate;\r\n        }\r\n\r\n        const { dateFormat, minYear, maxYear, monthLabels, showTime, returnFormat, showType } = options;\r\n        let _st = showTime;\r\n        let formatStr = dateFormat;\r\n        if (isReturn) {\r\n            formatStr = returnFormat.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n            dateStr = dateStr.replace(/[,]/g, '-').replace(/[]/, '').replace(/[,]/g, ':').replace(/[]/g, '');\r\n\r\n            if (dateStr[dateStr.length - 1] === '-' || dateStr[dateStr.length - 1] === ':') {\r\n                dateStr = dateStr.substring(0, dateStr.length - 1);\r\n            }\r\n\r\n            if (!showTime && returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1) {\r\n                _st = true;\r\n            }\r\n        }\r\n\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        const isMonthStr: boolean = formatStr.indexOf(MMM) !== -1;\r\n        let delimeters: Array<string> = formatStr.match(/[^(DdMmYy)]{1,}/g);\r\n        if (_st && dateStr) {\r\n            _dateStr = dateStr.split(' ')[0];\r\n            Object.assign(returnDate, { hour: 0, minute: 0, second: 0 });\r\n            const timeStr = dateStr.split(' ')[1];\r\n            if (timeStr) {\r\n                const _timer = timeStr.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (_timer[0]) {\r\n                    hour = Number(_timer[0].substr(0, 2));\r\n                    hour = isNaN(hour) ? 0 : hour;\r\n                }\r\n                if (_timer[1]) {\r\n                    minute = Number(_timer[1].substr(0, 2));\r\n                    minute = isNaN(minute) ? 0 : minute;\r\n                }\r\n\r\n                if (_timer[2]) {\r\n                    second = Number(_timer[2].substr(0, 2));\r\n                    second = isNaN(second) ? 0 : second;\r\n                }\r\n            } else {\r\n                delimeters = undefined;\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(dateStr)) { //  yyyyMMddHHmmss\r\n                    const df = formatStr;\r\n                    _dateStr = dateStr.substr(0, 8);\r\n                    let _timer = dateStr.substr(8);\r\n                    if (_timer) {\r\n                        if (df.includes('HH')) {\r\n                            if (_timer) {\r\n                                hour = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('mm')) {\r\n                            if (_timer) {\r\n                                minute = +_timer.slice(0, 2);\r\n                                _timer = _timer.slice(2);\r\n                            }\r\n                        }\r\n                        if (df.includes('ss')) {\r\n                            if (_timer) {\r\n                                second = +_timer.slice(0, 2);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            _dateStr = dateStr ? dateStr.split(' ')[0] : '';\r\n        }\r\n        const dateValue: Array<IMyDateFormat> = this.getDateValue(_dateStr, formatStr, delimeters);\r\n\r\n        const year: number = this.getNumberByValue(dateValue[0]);\r\n        const month: number = isMonthStr\r\n            ? this.getMonthNumberByMonthName(dateValue[1], monthLabels)\r\n            : this.getNumberByValue(dateValue[1]);\r\n        const day: number = this.getNumberByValue(dateValue[2]);\r\n\r\n        if (showType === ShowType.noDateAndMonth) {\r\n            return { year, month: 1, day: 1 };\r\n        }\r\n\r\n        if (month !== -1 && day !== -1 && year !== -1) {\r\n            if (year < minYear || year > maxYear || month < 1 || month > 12) {\r\n                return returnDate;\r\n            }\r\n            const date: IMyDate = _st ? { year, month, day, hour, minute, second } : { year, month, day };\r\n\r\n            if (this.isDisabledDate(date, options)) {\r\n                return returnDate;\r\n            }\r\n\r\n            if (year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)) {\r\n                daysInMonth[1] = 29;\r\n            }\r\n\r\n            if (day < 1 || day > daysInMonth[month - 1]) {\r\n                return returnDate;\r\n            }\r\n\r\n            // Valid date\r\n            if (options.showType === ShowType.noDate) {\r\n                return { year: date.year, month: date.month };\r\n            } else if (options.showType === ShowType.noDateAndMonth) {\r\n                return { year: date.year };\r\n            } else {\r\n                return date;\r\n            }\r\n        }\r\n        return returnDate;\r\n    }\r\n\r\n    isDateValidDateRange(dateRangeStr: string, options: IMyOptions): IMyDateRange {\r\n        let dateRange: IMyDateRange = {\r\n            begin: this.resetDate(),\r\n            end: this.resetDate()\r\n        };\r\n        if (dateRangeStr && dateRangeStr.length) {\r\n            const dates: Array<string> = dateRangeStr.split(options.dateRangeDatesDelimiter);\r\n            if (dates && dates.length === 2) {\r\n                const [beginDate, endDate] = dates;\r\n                const begin: IMyDate = this.isDateValid(beginDate, options, true);\r\n                if (this.isInitializedDate(begin)) {\r\n                    const end: IMyDate = this.isDateValid(endDate, options, true);\r\n\r\n                    if (this.isInitializedDate(end) && this.isDateSameOrEarlier(begin, end)) {\r\n                        dateRange = { begin, end };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dateRange;\r\n    }\r\n\r\n    getDateValue(dateStr: string, dateFormat: string, delimeters: Array<string>): Array<IMyDateFormat> {\r\n        const da: Array<IMyDateFormat> = [];\r\n\r\n        if (delimeters) {\r\n            let del: string = delimeters[0];\r\n            if (delimeters[0] !== delimeters[1]) {\r\n                del = delimeters[0] + delimeters[1];\r\n                if (delimeters[2] && delimeters[1] !== delimeters[2]) {\r\n                    del = del + delimeters[2];\r\n                }\r\n            }\r\n            const re: any = new RegExp('[' + del + ']');\r\n            const ds: Array<string> = dateStr.split(re);\r\n            const df: Array<string> = dateFormat.split(re);\r\n            for (let i = 0; i < df.length; i++) {\r\n                if (df[i].indexOf(YYYY) !== -1) {\r\n                    da[0] = { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(M) !== -1) {\r\n                    da[1] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n                if (df[i].indexOf(D) !== -1) {\r\n                    da[2] = ds[i] === undefined ? { value: '1', format: df[i] } : { value: ds[i], format: df[i] };\r\n                }\r\n            }\r\n        } else {\r\n            const yearIndex = (dateFormat + '').indexOf(YYYY);\r\n            const monthIndex = (dateFormat + '').indexOf(MM);\r\n            const dayIndex = (dateFormat + '').indexOf(DD);\r\n            if (yearIndex >= 0) {\r\n                da[0] = { value: dateStr.substring(yearIndex, yearIndex + 4), format: dateFormat.substring(yearIndex, yearIndex + 4) };\r\n            }\r\n            if (monthIndex >= 0) {\r\n                da[1] = { value: dateStr.substring(monthIndex, monthIndex + 2), format: dateFormat.substring(monthIndex, monthIndex + 2) };\r\n            }\r\n            if (dayIndex >= 0) {\r\n                da[2] = { value: dateStr.substring(dayIndex, dayIndex + 2) || '01', format: dateFormat.substring(dayIndex, dayIndex + 2) };\r\n            }\r\n        }\r\n        return da;\r\n    }\r\n\r\n    getMonthNumberByMonthName(df: IMyDateFormat, monthLabels: IMyMonthLabels): number {\r\n        if (df.value) {\r\n            for (let key = 1; key <= 12; key++) {\r\n                if (df.value.toLowerCase() === monthLabels[key].toLowerCase()) {\r\n                    return key;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    getNumberByValue(df: IMyDateFormat): number {\r\n        if (!df) {\r\n            return 1;\r\n        }\r\n        if (!/^\\d+$/.test(df.value)) {\r\n            return -1;\r\n        }\r\n\r\n        let nbr: number = Number(df.value);\r\n        if (\r\n            (df.format.length === 1 && df.value.length !== 1 && nbr < 10) ||\r\n            (df.format.length === 1 && df.value.length !== 2 && nbr >= 10)\r\n        ) {\r\n            nbr = -1;\r\n        } else if (df.format.length === 2 && df.value.length > 2) {\r\n            nbr = -1;\r\n        }\r\n        return nbr;\r\n    }\r\n\r\n    parseDefaultMonth(monthString: string): IMyMonth {\r\n        const month: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0 };\r\n        if (monthString !== EMPTY_STR) {\r\n            const split = monthString.split(monthString.match(/[^0-9]/)[0]);\r\n            month.monthNbr = split[0].length === 2 ? Number(split[0]) : Number(split[1]);\r\n            month.year = split[0].length === 2 ? Number(split[1]) : Number(split[0]);\r\n        }\r\n        return month;\r\n    }\r\n\r\n    isDisabledDate(date: IMyDate, options: IMyOptions): boolean {\r\n        const {\r\n            minYear,\r\n            maxYear,\r\n            disableUntil,\r\n            disableSince,\r\n            disableWeekends,\r\n            disableDates,\r\n            disableDateRanges,\r\n            disableWeekdays,\r\n            enableDates\r\n        } = options;\r\n\r\n        // for (const d of enableDates) {\r\n        //     if (\r\n        //         (d.year === 0 || d.year === date.year) &&\r\n        //         (d.month === 0 || d.month === date.month) &&\r\n        //         d.day === date.day\r\n        //     ) {\r\n        //         return false;\r\n        //     }\r\n        // }\r\n\r\n        if ((date.year < minYear && date.month === 12) || (date.year > maxYear && date.month === 1)) {\r\n            return true;\r\n        }\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        if (this.isInitializedDate(disableUntil) && (dateMs + 24 * 60 * 60 * 1000 - 1) < this.getTimeInMilliseconds(disableUntil)) {\r\n            return true;\r\n        }\r\n        if (this.isInitializedDate(disableSince) && dateMs > this.getTimeInMilliseconds(disableSince)) {\r\n            return true;\r\n        }\r\n\r\n        if (disableWeekends) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        const dn = this.getDayNumber(date);\r\n        if (disableWeekdays.length > 0) {\r\n            for (const wd of disableWeekdays) {\r\n                if (dn === this.getWeekdayIndex(wd)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const d of disableDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        for (const d of disableDateRanges) {\r\n            if (\r\n                this.isInitializedDate(d.begin) &&\r\n                this.isInitializedDate(d.end) &&\r\n                dateMs >= this.getTimeInMilliseconds(d.begin) &&\r\n                dateMs <= this.getTimeInMilliseconds(d.end)\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isMarkedDate(date: IMyDate, markedDates: Array<IMyMarkedDates>, markWeekends: IMyMarkedDate): IMyMarkedDate {\r\n        for (const md of markedDates) {\r\n            for (const d of md.dates) {\r\n                if (\r\n                    (d.year === 0 || d.year === date.year) &&\r\n                    (d.month === 0 || d.month === date.month) &&\r\n                    d.day === date.day\r\n                ) {\r\n                    return { marked: true, color: md.color };\r\n                }\r\n            }\r\n        }\r\n        if (markWeekends && markWeekends.marked) {\r\n            const dayNbr = this.getDayNumber(date);\r\n            if (dayNbr === 0 || dayNbr === 6) {\r\n                return { marked: true, color: markWeekends.color };\r\n            }\r\n        }\r\n        return { marked: false, color: EMPTY_STR };\r\n    }\r\n\r\n    isHighlightedDate(\r\n        date: IMyDate,\r\n        sunHighlight: boolean,\r\n        satHighlight: boolean,\r\n        highlightDates: Array<IMyDate>\r\n    ): boolean {\r\n        const dayNbr: number = this.getDayNumber(date);\r\n        if ((sunHighlight && dayNbr === 0) || (satHighlight && dayNbr === 6)) {\r\n            return true;\r\n        }\r\n        for (const d of highlightDates) {\r\n            if (\r\n                (d.year === 0 || d.year === date.year) &&\r\n                (d.month === 0 || d.month === date.month) &&\r\n                d.day === date.day\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getWeekNumber(date: IMyDate): number {\r\n        const d: Date = new Date(date.year, date.month - 1, date.day, 0, 0, 0, 0);\r\n        d.setDate(d.getDate() + (d.getDay() === 0 ? -3 : 4 - d.getDay()));\r\n        return Math.round((d.getTime() - new Date(d.getFullYear(), 0, 4).getTime()) / 86400000 / 7) + 1;\r\n    }\r\n    \r\n    getNowWeekTime(date: Date): IMyDateRange {\r\n        date.setDate(date.getDate() - ((date.getDay() + 6) % 7));\r\n        const begin = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        date.setDate(date.getDate() + 6);\r\n        const end = {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n        return { begin, end };\r\n    }\r\n\r\n    isMonthDisabledByDisableUntil(date: IMyDate, disableUntil: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableUntil) &&\r\n            this.getTimeInMilliseconds(date) <= this.getTimeInMilliseconds(disableUntil)\r\n        );\r\n    }\r\n\r\n    isMonthDisabledByDisableSince(date: IMyDate, disableSince: IMyDate): boolean {\r\n        return (\r\n            this.isInitializedDate(disableSince) &&\r\n            this.getTimeInMilliseconds(date) >= this.getTimeInMilliseconds(disableSince)\r\n        );\r\n    }\r\n\r\n    getDateModel(\r\n        date: IMyDate,\r\n        dateRange: IMyDateRange,\r\n        dateFormat: string,\r\n        monthLabels: IMyMonthLabels,\r\n        rangeDelimiter: string,\r\n        returnFormat: string,\r\n        dateStr: string = EMPTY_STR\r\n    ): IMyDateModel {\r\n        let singleDateModel: IMySingleDateModel = null;\r\n        let dateRangeModel: IMyDateRangeModel = null;\r\n\r\n        if (date) {\r\n            singleDateModel = {\r\n                date,\r\n                jsDate: this.getDate2(date),\r\n                formatted: dateStr.length ? dateStr : this.formatDate(date, dateFormat, monthLabels),\r\n                returnFormatted: this.formatDate(date, returnFormat, monthLabels),\r\n                epoc: this.getEpocTime(date)\r\n            };\r\n        } else {\r\n            dateRangeModel = {\r\n                beginDate: dateRange.begin,\r\n                beginJsDate: this.getDate(dateRange.begin),\r\n                beginEpoc: this.getEpocTime(dateRange.begin),\r\n                endDate: dateRange.end,\r\n                endJsDate: this.getDate(dateRange.end),\r\n                endEpoc: this.getEpocTime(dateRange.end),\r\n                formatted:\r\n                    this.formatDate(dateRange.begin, dateFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, dateFormat, monthLabels),\r\n                returnFormatted:\r\n                    this.formatDate(dateRange.begin, returnFormat, monthLabels) +\r\n                    rangeDelimiter +\r\n                    this.formatDate(dateRange.end, returnFormat, monthLabels),\r\n            };\r\n        }\r\n        return {\r\n            isRange: date === null,\r\n            singleDate: singleDateModel,\r\n            dateRange: dateRangeModel\r\n        };\r\n    }\r\n\r\n    formatDate(date: IMyDate, dateFormat: string, monthLabels: IMyMonthLabels): string {\r\n        if (!date.month && dateFormat.indexOf(MM) === -1) {\r\n            dateFormat = this.delete(dateFormat, MM);\r\n        }\r\n        if (!date.day && dateFormat.indexOf(DD) === -1) {\r\n            dateFormat = this.delete(dateFormat, DD);\r\n        }\r\n        let formatted: string = dateFormat.replace(YYYY, String(date.year));\r\n\r\n        if (dateFormat.indexOf(M) === -1) {\r\n            formatted = formatted.replace(MM, '01');\r\n        } else {\r\n            if (dateFormat.indexOf(MMM) !== -1) {\r\n                formatted = formatted.replace(MMM, monthLabels[date.month]);\r\n            } else if (dateFormat.indexOf(MM) !== -1) {\r\n                formatted = formatted.replace(MM, this.preZero(date.month || 1));\r\n            } else {\r\n                formatted = formatted.replace(M, String(date.month || 1));\r\n            }\r\n        }\r\n\r\n        if (dateFormat.indexOf(DD) === -1) {\r\n            formatted = formatted.replace(DD, '01');\r\n        } else if (dateFormat.indexOf(DD) !== -1) {\r\n            formatted = formatted.replace(DD, this.preZero(date.day || 1));\r\n        } else {\r\n            formatted = formatted.replace(D, String(date.day || 1));\r\n        }\r\n\r\n        formatted = formatted.replace('MM', 'mm').replace('HH', this.preZero(date.hour || 0))\r\n        .replace('mm', this.preZero(date.minute || 0))\r\n        .replace('ss', this.preZero(date.second || 0));\r\n\r\n        return formatted && formatted.length > 2 ? formatted : '';\r\n    }\r\n\r\n    delete(format: string, delStr: string) {\r\n        const re = format.match(/[^(DdMmYy)]{1,}/g);\r\n        const index = format.indexOf(delStr);\r\n\r\n        if (index < 0) {\r\n            return format;\r\n        } else if (index === 0) {\r\n            if (re) {\r\n                return format.substring(3);\r\n            } else {\r\n                return format.substring(2);\r\n            }\r\n        } else if (index + 2 === format.length) {\r\n            if (re) {\r\n                return format.substring(0, format.length - 3);\r\n            } else {\r\n                return format.substring(0, format.length - 2);\r\n            }\r\n        } else {\r\n            if (re) {\r\n                return format.substring(0, index) + format.substring(index + 3);\r\n            } else {\r\n                return format.substring(0, index) + format.substring(index + 2);\r\n            }\r\n        }\r\n    }\r\n    getFormattedDate(model: IMyDateModel): string {\r\n        return !model.isRange ? model.singleDate.formatted : model.dateRange.formatted;\r\n    }\r\n\r\n    preZero(val: number): string {\r\n        return val < 10 ? ZERO_STR + Number(val) : String(val);\r\n    }\r\n\r\n    isInitializedDate(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0 && date.day !== 0;\r\n    }\r\n\r\n    isInitializedMonth(date: IMyDate): boolean {\r\n        return date && date.year !== 0 && date.month !== 0;\r\n    }\r\n\r\n    isInitializedYear(date: IMyDate): boolean {\r\n        return date && date.year !== 0;\r\n    }\r\n\r\n    isDateEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) < this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSameOrEarlier(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) <= this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateSame(firstDate: IMyDate, secondDate: IMyDate): boolean {\r\n        return this.getTimeInMilliseconds(firstDate) === this.getTimeInMilliseconds(secondDate);\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(dateRange: IMyDateRange, date: IMyDate): boolean {\r\n        const dateMs: number = this.getTimeInMilliseconds(date);\r\n        return (\r\n            this.getTimeInMilliseconds(dateRange.begin) === dateMs ||\r\n            this.getTimeInMilliseconds(dateRange.end) === dateMs\r\n        );\r\n    }\r\n\r\n    isDateInRange(date: IMyDate, dateRange: IMyDateRange): boolean {\r\n        if (!this.isInitializedDate(dateRange.begin) || !this.isInitializedDate(dateRange.end)) {\r\n            return false;\r\n        }\r\n        return this.isDateSameOrEarlier(dateRange.begin, date) && this.isDateSameOrEarlier(date, dateRange.end);\r\n    }\r\n\r\n    resetDate(): IMyDate {\r\n        return { year: 0, month: 0, day: 0 };\r\n    }\r\n\r\n    getTimeInMilliseconds(date: IMyDate): number {\r\n        return this.getDate(date).getTime();\r\n    }\r\n\r\n    getDate2(date: IMyDate): Date {\r\n        const now = new Date();\r\n\r\n        if (!date.year) {\r\n            date.year = now.getFullYear();\r\n        }\r\n\r\n        if (!date.month) {\r\n            date.month = now.getMonth() + 1;\r\n        }\r\n\r\n        if (!date.day) {\r\n            date.day = 1;\r\n        }\r\n\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDate(date: IMyDate): Date {\r\n        return new Date(\r\n            date.year || 0,\r\n            date.month ? date.month - 1 : 0,\r\n            date.day || 0,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        );\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        return new Date(\r\n            date.year,\r\n            date.month - 1,\r\n            date.day,\r\n            date.hour ? date.hour : 0,\r\n            date.minute ? date.minute : 0,\r\n            date.second ? date.second : 0,\r\n            0\r\n        ).getDay();\r\n    }\r\n\r\n    getWeekdayIndex(wd: string) {\r\n        return this.weekDays.indexOf(wd);\r\n    }\r\n\r\n    getEpocTime(date: IMyDate): number {\r\n        return Math.round(this.getTimeInMilliseconds(date) / 1000.0);\r\n    }\r\n\r\n    getKeyCodeFromEvent(event: any): number {\r\n        const key: any = event.key || event.keyCode;\r\n\r\n        if (key === KeyName.enter || key === KeyCode.enter) {\r\n            return KeyCode.enter;\r\n        } else if (key === KeyName.esc || key === KeyCode.esc) {\r\n            return KeyCode.esc;\r\n        } else if (key === KeyName.space || key === KeyCode.space) {\r\n            return KeyCode.space;\r\n        } else if (key === KeyName.leftArrow || key === KeyCode.leftArrow) {\r\n            return KeyCode.leftArrow;\r\n        } else if (key === KeyName.upArrow || key === KeyCode.upArrow) {\r\n            return KeyCode.upArrow;\r\n        } else if (key === KeyName.rightArrow || key === KeyCode.rightArrow) {\r\n            return KeyCode.rightArrow;\r\n        } else if (key === KeyName.downArrow || key === KeyCode.downArrow) {\r\n            return KeyCode.downArrow;\r\n        } else if (key === KeyName.tab || key === KeyCode.tab) {\r\n            return KeyCode.tab;\r\n        } else if (key === KeyName.shift || key === KeyCode.shift) {\r\n            return KeyCode.shift;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    getNearDate(now: IMyDate, min: IMyDate, max: IMyDate) {\r\n        const minMilliseconds = this.getTimeInMilliseconds(min)\r\n        const maxMilliseconds = this.getTimeInMilliseconds(max)\r\n        const nowMilliseconds = this.getTimeInMilliseconds(now)\r\n        if (maxMilliseconds - nowMilliseconds > nowMilliseconds - minMilliseconds) {\r\n            return min;\r\n        } else {\r\n            return max;\r\n        }\r\n    }\r\n    // \r\n    // [0minHour\r\n    // (maxHour,23]\r\n    disabledHours(min: IMyDate, max: IMyDate, currentDate: IMyDate) {\r\n        let minHour = min.hour;\r\n        let maxHour = max.hour;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            while (minHour-- >= 0) {\r\n                res.push(minHour);\r\n            }\r\n        }\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            while (maxHour++ < 24) {\r\n                res.push(maxHour);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    // \r\n    //[0minMinute\r\n    //maxMinute59]\r\n    disabledMinutes(min: IMyDate, max: IMyDate, _hour: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour) {\r\n                while (minMinute-- >= 0) {\r\n                    res.push(minMinute);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour) {\r\n                while (maxMinute++ < 60) {\r\n                    res.push(maxMinute);\r\n                }\r\n            }\r\n        }\r\n\r\n        return res;\r\n\r\n    }\r\n    // \r\n    //[0minSecond\r\n    //maxSecond59]\r\n    disabledSeconds(min: IMyDate, max: IMyDate, _hour: number, _minute: number, currentDate: IMyDate) {\r\n        let maxHour = max.hour;\r\n        let maxMinute = max.minute;\r\n        let maxSecond = max.second;\r\n        let minHour = min.hour;\r\n        let minMinute = min.minute;\r\n        let minSecond = min.second;\r\n        let res = [];\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: min.year, month: min.month, day: min.day })) {\r\n            if (_hour == minHour && _minute == minMinute) {\r\n                while (minSecond-- >= 0) {\r\n                    res.push(minSecond);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.isDateSame({ year: currentDate.year, month: currentDate.month, day: currentDate.day }, { year: max.year, month: max.month, day: max.day })) {\r\n            if (_hour == maxHour && _minute == maxMinute) {\r\n                while (maxSecond++ < 60) {\r\n                    res.push(maxSecond);\r\n                }\r\n            }\r\n        }\r\n\r\n        return res;\r\n    }\r\n    \r\n    private getDateTypeString(dt: DynamicDateType, dynamicLocale) {\r\n        switch(dt) {\r\n            case 'week':\r\n                return dynamicLocale.week || '';\r\n            case 'day':\r\n                return dynamicLocale.day || '';\r\n            case 'month':\r\n                return dynamicLocale.month || '';\r\n            case 'year':\r\n                return dynamicLocale.year || '';\r\n        }\r\n    }\r\n\r\n    formatDynamicValue(val: DynamicData, dynamicLocale) {\r\n        if (val) {\r\n            let fval = '';\r\n            switch(val.name) {\r\n                case 'present_day': // \r\n                fval = dynamicLocale.today || '';\r\n                break;\r\n            case 'present_month': // \r\n                fval = dynamicLocale.presentMonth || '';\r\n                break;\r\n            case 'present_year':\r\n                fval = dynamicLocale.presentYear ||'';\r\n                break;\r\n            case 'previou':\r\n                fval =  (dynamicLocale.previous|| '') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType, dynamicLocale);\r\n                break;\r\n            case 'future':\r\n                fval = (dynamicLocale.future || '') + ' '+ val.count + ' ' +this.getDateTypeString(val.dateType, dynamicLocale);\r\n                break;\r\n            case 'present_first':\r\n                fval = (dynamicLocale.current||'') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.first||' 1 ');\r\n                break;\r\n            case 'present_last':\r\n                fval = (dynamicLocale.current||'') + this.getDateTypeString(val.dateType, dynamicLocale) + (dynamicLocale.last||' 1 ');\r\n                break;\r\n            }\r\n\r\n            return fval;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    padStartZero(str: any) {\r\n        if(str != null  && str !== undefined) {\r\n            return  ('' + str).padStart(2, '0');\r\n        }\r\n\r\n        return  '00';\r\n    }\r\n\r\n    orderSelectedDates(items, order: MultiSelectedOrderBy = 'none') {\r\n        if (order !== 'asc' && order !== 'desc') {\r\n            order = 'none';\r\n        }\r\n\r\n        if (order === 'none') {\r\n            return items;\r\n        }\r\n\r\n        return orderBy(items, ['year', 'month', 'day'], [order, order, order]);\r\n    }\r\n}\r\n","import { IMyDate, IMyDateRange, IMySelectorPosition, IMyOptions } from '../interfaces/public-api';\r\nimport { PX, EMPTY_STR } from '../constants/constants';\r\nimport { Year } from '../enums/year.enum';\r\nimport { UtilService } from './farris-datepicker.util.service';\r\nimport { ComponentRef } from '@angular/core';\r\n\r\nexport class DatePickerService {\r\n    opts;\r\n    utilService;\r\n\r\n    private _mouseWheelHandle = null;\r\n    private _mouseScrollHandle = null;\r\n\r\n    constructor(opts) {\r\n        this.opts = opts;\r\n        this.utilService = new UtilService();\r\n    }\r\n\r\n    static parseOptions(opts: IMyOptions, defaultOpts): IMyOptions {\r\n        if (defaultOpts !== undefined) {\r\n            Object.keys(defaultOpts).forEach(k => {\r\n                if (defaultOpts[k] !== undefined && defaultOpts[k] !== '') {\r\n                    (opts as IMyOptions)[k] = defaultOpts[k];\r\n                }\r\n            });\r\n        }\r\n        if (opts.minYear < Year.min) {\r\n            opts.minYear = Year.min;\r\n        }\r\n        if (opts.maxYear > Year.max) {\r\n            opts.maxYear = Year.max;\r\n        }\r\n        return opts;\r\n    }\r\n\r\n    validate(value: string) {\r\n        const { dateRange } = this.opts;\r\n\r\n        let valid = false;\r\n        if (!dateRange) {\r\n            const date: IMyDate = this.utilService.isDateValid(value, this.opts);\r\n\r\n            valid = this.utilService.isInitializedDate(date);\r\n        } else {\r\n            const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(value, this.opts);\r\n            const { begin, end } = _dateRange;\r\n            valid = this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end);\r\n        }\r\n\r\n        return valid;\r\n    }\r\n\r\n    registerScrollEvent(fn) {\r\n        this._mouseScrollHandle = fn;\r\n        document.addEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n\r\n    removeMouseEvent() {\r\n        const container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            container.removeEventListener('mousewheel', this._mouseWheelHandle);\r\n        }\r\n\r\n        document.removeEventListener('scroll', this._mouseScrollHandle);\r\n    }\r\n\r\n    appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n\r\n        container.addEventListener('mousewheel', this._mouseWheelHandle = (e: MouseEvent) => {\r\n            const target = e.target as any;\r\n            if (!target.closest('.calendar-time-picker-select')) {\r\n                e.preventDefault();\r\n            }\r\n            return;\r\n        });\r\n\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    getSelectorPosition(elem: any, calendarRef: ComponentRef<any>  = null): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange,\r\n            showType,\r\n            enableDynamic,\r\n            showPresent,\r\n            multiSelect,\r\n            viewType\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if ((dateRange || multiSelect || (viewType === 'together' && showTime)) && showType !== 4) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        // if (showTime || enableDynamic) {\r\n        //     top = top - 6;\r\n        // }\r\n\r\n        top = top - 6;\r\n        if ((showPresent &&  (!dateRange || showType === 4)) || showTime || enableDynamic) {\r\n            _selectorHeight += 45;\r\n        }\r\n\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2 ;\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (window.innerHeight - top < _selectorHeight) {\r\n            top = top - (_selectorHeight - (window.innerHeight - e.top - e.height - 15));\r\n\r\n            if (calendarRef) {\r\n                const calendarElem = calendarRef.location.nativeElement;\r\n                const arrow = calendarElem.querySelector('.arrow');\r\n                if (arrow) {\r\n                    arrow.style.display = 'none';\r\n                }\r\n            }\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n\r\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n        top -= scrollTop;\r\n\r\n        return { top, left, position };\r\n    }\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n\r\n}\r\n","import { IMyDayLabels } from './my-day-labels.interface';\r\nimport { IMyMonthLabels } from './my-month-labels.interface';\r\nimport { IMyDate } from './my-date.interface';\r\nimport { IMyDateRange } from './my-date-range.interface';\r\nimport { IMyMarkedDates } from './my-marked-dates.interface';\r\nimport { IMyMarkedDate } from './my-marked-date.interface';\r\nimport { IMyStyles } from './my-styles.interface';\r\nimport { DefaultView } from '../enums/default-view.enum';\r\nimport { Year } from '../enums/year.enum';\r\nimport { IMyShortcuts } from './my-shortcuts.interface';\r\nimport { ShowType } from '../enums/show-type.enum';\r\nimport { DynamicData } from './dynamic-data-type.interface';\r\n\r\n\r\nexport interface IMyOptions {\r\n    dateRange?: boolean;\r\n    showTime?: boolean;\r\n    showType?: ShowType;\r\n    dayLabels?: IMyDayLabels;\r\n    monthLabels?: IMyMonthLabels;\r\n    yearTxt?: string;\r\n    dateFormat?: string;\r\n    defaultView?: DefaultView;\r\n    /**    mo,  su:  mo */\r\n    firstDayOfWeek?: string;\r\n    satHighlight?: boolean;\r\n    sunHighlight?: boolean;\r\n    highlightDates?: Array<IMyDate>;\r\n    markCurrentDay?: boolean;\r\n    markCurrentMonth?: boolean;\r\n    markCurrentYear?: boolean;\r\n    monthSelector?: boolean;\r\n    yearSelector?: boolean;\r\n    disableHeaderButtons?: boolean;\r\n    showWeekNumbers?: boolean;\r\n    selectorHeight?: string;\r\n    selectorWidth?: string;\r\n    disableUntil?: IMyDate;\r\n    disableSince?: IMyDate;\r\n    disableDates?: Array<IMyDate>;\r\n    disableDateRanges?: Array<IMyDateRange>;\r\n    disableWeekends?: boolean;\r\n    disableWeekdays?: Array<string>;\r\n    enableDates?: Array<IMyDate>;\r\n    markDates?: Array<IMyMarkedDates>;\r\n    markWeekends?: IMyMarkedDate;\r\n    closeSelectorOnDateSelect?: boolean;\r\n    closeSelectorOnDocumentClick?: boolean;\r\n    minYear?: Year;\r\n    maxYear?: Year;\r\n    focusInputOnDateSelect?: boolean;\r\n    moveFocusByArrowKeys?: boolean;\r\n    dateRangeDatesDelimiter?: string;\r\n    inputFieldValidation?: boolean;\r\n    stylesData?: IMyStyles;\r\n    ariaLabelPrevMonth?: string;\r\n    ariaLabelNextMonth?: string;\r\n    shortcuts?: Array<IMyShortcuts>;\r\n    timeBtnText?: string;\r\n    dateBtnText?: string;\r\n    commitBtnText?: string;\r\n    weekText?: string;\r\n    returnFormat?: string;\r\n    placeholder?: string;\r\n    timeFormat?: string;\r\n    range?: any;\r\n    monthRangeValue?: number;\r\n    message?: any;\r\n   \r\n    viewType?: ViewType | string;\r\n    enableDynamic?: boolean;\r\n    showDynamicView?: boolean;\r\n    dynamicValue?: DynamicData;\r\n    // \r\n    dynamicValueChanged?: (e: {text: string, value: {}}) => void;\r\n    /**  */\r\n    previousMaxDays?: number;\r\n    /**  */\r\n    futureMaxDays?: number;\r\n    /**   */\r\n    dynamicLocale?: any;\r\n    /**   */\r\n    showPresent?: boolean;\r\n\r\n    hourStep?: number;\r\n    minuteStep?: number;\r\n    secondStep?: number;\r\n\r\n    /**  */\r\n    multiSelect?: boolean;\r\n    /**  */\r\n    separator?: string;\r\n    /** 0  */\r\n    maxSelected?: number;\r\n    /**  'none'|'asc'|'desc',  0  */\r\n    selectedOrderBy?: MultiSelectedOrderBy;\r\n    /**  */\r\n    mulstiDatesLocale?: any;\r\n}\r\n\r\n\r\n\r\n /** switch: together:  switch */\r\nexport enum ViewType {\r\n    Switch = 'switch',\r\n    Together = 'together'\r\n};\r\n\r\nexport type MultiSelectedOrderBy = 'none'|'asc'|'desc';","import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter } from '@angular/core';\r\nimport {\r\n    IMyDate, IMyDateRange, IMyMonth, IMyCalendarDay, IMyCalendarMonth, IMyCalendarYear,\r\n    IMyWeek, IMyOptions, IMySelectorPosition, IMyCalendarViewChanged, IMyRangeDateSelection, IMyDateModel,\r\n    IMyMonthRow\r\n} from '../../interfaces/public-api';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';\r\nimport {\r\n    DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT,\r\n    YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR, STYLE\r\n} from '../../constants/constants';\r\nimport { TimePickerPanelComponent } from '@farris/ui-time-picker';\r\nimport { flatten, cloneDeep, sortBy, orderBy } from 'lodash-es';\r\nimport { ViewType } from '../../interfaces/my-options.interface';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\n\r\n@Component({\r\n    selector: 'farris-datepicker-calendar',\r\n    templateUrl: './calendar.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class CalendarComponent {\r\n    @ViewChild('selectorEl') selectorEl: ElementRef;\r\n    @ViewChild('styleEl') styleEl: ElementRef;\r\n    @ViewChild('endTimeRef') endTimeRef: TimePickerPanelComponent;\r\n    @ViewChild('dynamicViewEle') dynamicViewEle: ElementRef;\r\n\r\n    @HostBinding('style.position') position = 'static';\r\n\r\n    @Output() dynamicViewShow = new EventEmitter();\r\n\r\n    dateHlp: DateTimeHelperService = null;\r\n\r\n    opts: IMyOptions;\r\n    visibleMonth: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    visibleMonth_range: IMyMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };\r\n    selectedMonth: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedMonth_range: IMyMonth = { monthNbr: 0, year: 0 };\r\n    selectedDate: IMyDate = { year: 0, month: 0, day: 0 };\r\n    selectedDateRange: IMyDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };\r\n    selectedWeek: IMyWeek = { weekNbr: 0, year: 0 };\r\n    weekDays: Array<string> = [];\r\n    dates: Array<IMyWeek> = [];\r\n    dates_range: Array<IMyWeek> = [];\r\n    months: Array<IMyMonthRow> = [];\r\n    months_range: Array<IMyMonthRow> = [];\r\n    years: Array<Array<IMyCalendarYear>> = [];\r\n    years_range: Array<Array<IMyCalendarYear>> = [];\r\n    timeVlaue: string;\r\n    timeVlaue_range: string;\r\n\r\n    multiSelect = false;\r\n\r\n    dayIdx = 0;\r\n    weekDayOpts: Array<string> = [SU, MO, TU, WE, TH, FR, SA];\r\n\r\n    selectMonth = false;\r\n    selectMonth_range = false;\r\n    selectYear = false;\r\n    selectYear_range = false;\r\n    selectTime = false;\r\n\r\n    dateChanged: (dm: IMyDateModel, close: boolean) => void;\r\n    calendarViewChanged: (cvc: IMyCalendarViewChanged) => void;\r\n    rangeDateSelection: (rds: IMyRangeDateSelection) => void;\r\n    multiDatesChanged: (dates: any[]) => void;\r\n\r\n    closedByEsc: () => void;\r\n    selectorPos: IMySelectorPosition = null;\r\n    scrollDiff = 0;\r\n\r\n    prevViewDisabled = false;\r\n    nextViewDisabled = false;\r\n    prevDobViewDisabled = false;\r\n    nextDobViewDisabled = false;\r\n\r\n    prevViewDisabled_range = false;\r\n    nextViewDisabled_range = false;\r\n    prevDobViewDisabled_range = false;\r\n    nextDobViewDisabled_range = false;\r\n\r\n    showNotify: () => void;\r\n\r\n    /**  */\r\n    selectedDates = [];\r\n\r\n    getTimeStr(date: Date): string {\r\n        const hour = this.utilService.preZero(date.getHours());\r\n        const minute = this.utilService.preZero(date.getMinutes());\r\n        const second = this.utilService.preZero(date.getSeconds());\r\n        return `${hour}:${minute}:${second}`;\r\n    }\r\n    // \r\n    disabledHours = () => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledHours(min, max, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledMinutes = (hour: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledMinutes(min, max, hour, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledSeconds = (hour: number, minute: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.begin : this.selectedDate;\r\n        const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);\r\n        return res;\r\n    }\r\n\r\n\r\n    disabledHours2 = () => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledHours(min, max, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledMinutes2 = (hour: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledMinutes(min, max, hour, currentDate);\r\n        return res;\r\n    }\r\n    // \r\n    disabledSeconds2 = (hour: number, minute: number) => {\r\n        const min = this.opts.disableUntil;\r\n        const max = this.opts.disableSince;\r\n        const currentDate = this.opts.dateRange ? this.selectedDateRange.end : this.selectedDate;\r\n        const res = this.utilService.disabledSeconds(min, max, hour, minute, currentDate);\r\n        return res;\r\n    }\r\n\r\n    btnDynamicDisabled = true;\r\n\r\n    constructor(private renderer: Renderer2, private cdr: ChangeDetectorRef, private utilService: UtilService) { }\r\n\r\n    initialize(\r\n        opts: IMyOptions,\r\n        defaultMonth: string,\r\n        selectorPos: IMySelectorPosition,\r\n        inputValue: string,\r\n        dc: (dm: IMyDateModel, close: boolean) => void,\r\n        cvc: (cvc: IMyCalendarViewChanged) => void,\r\n        rds: (rds: IMyRangeDateSelection) => void,\r\n        cbe: () => void\r\n    ): void {\r\n        this.opts = opts;\r\n        this.selectorPos = selectorPos;\r\n        this.weekDays.length = 0;\r\n        const { defaultView, dateRange, firstDayOfWeek, dayLabels, stylesData, yearTxt, multiSelect, separator, selectedOrderBy } = this.opts;\r\n        this.visibleMonth.yearTxt = yearTxt;\r\n        this.visibleMonth_range.yearTxt = yearTxt;\r\n        this.multiSelect = multiSelect;\r\n        // if (stylesData.styles.length) {\r\n        //     const styleElTemp: any = this.renderer.createElement(STYLE);\r\n        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));\r\n        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);\r\n        // }\r\n\r\n        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);\r\n        if (this.dayIdx !== -1) {\r\n            let idx: number = this.dayIdx;\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < this.weekDayOpts.length; i++) {\r\n                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);\r\n                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;\r\n            }\r\n        }\r\n        let today: IMyDate = this.getToday();\r\n        const isInDisableRange = this.utilService.isDisabledDate(today, this.opts);\r\n        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);\r\n\r\n        switch (defaultView) {\r\n            case DefaultView.Month:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };\r\n                break;\r\n            case DefaultView.Year:\r\n                this.selectedMonth = { monthNbr: 0, year: today.year };\r\n                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };\r\n                break;\r\n            default:\r\n                this.selectedMonth = { monthNbr: today.month, year: today.year };\r\n                if (today.month >= 12) {\r\n                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };\r\n                } else {\r\n                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };\r\n                }\r\n                break;\r\n        }\r\n        if (defaultMonth && defaultMonth.length) {\r\n            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);\r\n            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);\r\n            if (this.selectedMonth_range.monthNbr >= 12) {\r\n                this.selectedMonth_range.year++;\r\n                this.selectedMonth_range.monthNbr = 1;\r\n            } else {\r\n                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;\r\n            }\r\n        }\r\n\r\n        // \r\n        if (this.multiSelect && inputValue) {\r\n            this.selectedDates = inputValue.split(separator).map(n => {\r\n\r\n                if (this.opts.returnFormat === 'yyyyMMdd') {\r\n                    if (n.length > 8) {\r\n                        n = this.dateHlp.formatTo(n, this.opts.returnFormat);\r\n                    }\r\n                }\r\n\r\n                const _dObj = this.utilService.isDateValid(n, this.opts, true);\r\n\r\n                return {\r\n                    ..._dObj,\r\n                    value: this.utilService.formatDate(_dObj, this.opts.dateFormat, this.opts.monthLabels)\r\n                };\r\n            });\r\n\r\n            this.selectedDates = this.utilService.orderSelectedDates(this.selectedDates, selectedOrderBy);\r\n\r\n        } else {\r\n            if (!dateRange) {\r\n                // Single date mode\r\n                const date: IMyDate = this.utilService.isDateValid(inputValue, this.opts, true);\r\n                if (this.utilService.isInitializedDate(date)) {\r\n                    this.selectedDate = date;\r\n                    const hour = this.utilService.preZero(date.hour);\r\n                    const minute = this.utilService.preZero(date.minute);\r\n                    const second = this.utilService.preZero(date.second);\r\n                    this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                    this.selectedMonth = { monthNbr: date.month, year: date.year };\r\n                }\r\n            } else {\r\n                // Date range mode\r\n                const { begin, end } = this.utilService.isDateValidDateRange(inputValue, this.opts);\r\n                if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {\r\n                    this.selectedDateRange = { begin, end };\r\n                    const hour = this.utilService.preZero(begin.hour);\r\n                    const minute = this.utilService.preZero(begin.minute);\r\n                    const second = this.utilService.preZero(begin.second);\r\n                    this.timeVlaue = `${hour}:${minute}:${second}`;\r\n                    const _hour = this.utilService.preZero(end.hour);\r\n                    const _minute = this.utilService.preZero(end.minute);\r\n                    const _second = this.utilService.preZero(end.second);\r\n                    this.timeVlaue_range = `${_hour}:${_minute}:${_second}`;\r\n\r\n                    this.selectedMonth = { monthNbr: begin.month, year: begin.year };\r\n\r\n                    if (begin.month === end.month && begin.year === end.year) {\r\n                        if (end.month >= 12) {\r\n                            this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };\r\n                        } else {\r\n                            let endyear = end.year;\r\n                            if (defaultView === DefaultView.Month) {\r\n                                endyear = endyear + 1;\r\n                            }\r\n\r\n                            this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };\r\n                        }\r\n                    } else {\r\n                        if (defaultView === DefaultView.Month && begin.year === end.year) {\r\n                            this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };\r\n                        } else {\r\n                            this.selectedMonth_range = { monthNbr: end.month, year: end.year };\r\n                        }\r\n                    }\r\n\r\n                    // tfs 579358\r\n                    // let endDayWeekNbr = this.utilService.getWeekNumber(end);\r\n                    // if (this.opts.firstDayOfWeek === 'su') {\r\n                    //     endDayWeekNbr -= 1;\r\n                    // }\r\n                    // const weekNbr = this.utilService.getWeekNumber(begin) === endDayWeekNbr ? this.utilService.getWeekNumber(begin): 0;\r\n                    const dateObj = this.opts.firstDayOfWeek == 'su' ? end: begin;\r\n                    let weekNbr = this.utilService.getWeekNumber(dateObj);\r\n\r\n                    this.selectedWeek = { weekNbr, year: begin.year };\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        this.dateChanged = dc;\r\n        this.calendarViewChanged = cvc;\r\n        this.rangeDateSelection = rds;\r\n        this.closedByEsc = cbe;\r\n        this.setCalendarVisibleMonth();\r\n\r\n        if (defaultView === DefaultView.Month) {\r\n            this.onMonthViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onMonthViewBtnClicked(true);\r\n            }\r\n        } else if (defaultView === DefaultView.Year) {\r\n            this.onYearViewBtnClicked();\r\n            if (dateRange) {\r\n                this.onYearViewBtnClicked(true);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    resetDateValue(value: ResetDateType): void {\r\n        if (value === ResetDateType.singleDate || value === ResetDateType.both) {\r\n            this.selectedDate = this.utilService.resetDate();\r\n        }\r\n        if (value === ResetDateType.dateRange || value === ResetDateType.both) {\r\n            this.selectedDateRange.begin = this.utilService.resetDate();\r\n            this.selectedDateRange.end = this.utilService.resetDate();\r\n        }\r\n    }\r\n\r\n    resetMonthYearSelect(isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = false;\r\n            this.selectYear = false;\r\n        } else {\r\n            this.selectMonth_range = false;\r\n            this.selectYear_range = false;\r\n        }\r\n    }\r\n\r\n    onMonthViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.selectMonth = !this.selectMonth;\r\n            this.selectYear = false;\r\n            if (this.selectMonth) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth.year = this.selectedMonth.year;\r\n            }\r\n        } else {\r\n            this.selectMonth_range = !this.selectMonth_range;\r\n            this.selectYear_range = false;\r\n            if (this.selectMonth_range) {\r\n                this.generateMonths(isSecondCalendar);\r\n            } else {\r\n                this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            }\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(cell: IMyCalendarMonth, isSecondCalendar: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const mc: boolean = cell.nbr !== monthNbr;\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[cell.nbr],\r\n                monthNbr: cell.nbr,\r\n                year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 2) {\r\n                this.toSelectMonth(this.visibleMonth_range);\r\n            } else {\r\n                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onMonthCellKeyDown(cell: IMyCalendarMonth) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            MONTH_ROW_COUNT,\r\n            MONTH_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(M, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    onYearViewBtnClicked(isSecondCalendar?: boolean): void {\r\n        this.selectTime = false;\r\n        if (!isSecondCalendar) {\r\n            this.visibleMonth.year = this.selectedMonth.year;\r\n            if (!this.selectYear) {\r\n                this.generateYears(this.visibleMonth.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);\r\n            }\r\n\r\n            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth = !this.selectMonth;\r\n            } else {\r\n                this.selectMonth = false;\r\n            }\r\n            // this.selectYear = !this.selectYear;\r\n            // this.selectMonth = false;\r\n        } else {\r\n            this.visibleMonth_range.year = this.selectedMonth_range.year;\r\n            if (!this.selectYear_range) {\r\n                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);\r\n            } else {\r\n                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);\r\n            }\r\n            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;\r\n            if (this.opts.showType === 2) {\r\n                this.selectMonth_range = !this.selectMonth_range;\r\n            } else {\r\n                this.selectMonth_range = false;\r\n            }\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onYearCellClicked(cell: IMyCalendarYear, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth = { monthTxt, monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };\r\n            this.selectedMonth.year = this.visibleMonth.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear = false;\r\n                this.selectMonth = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear = false;\r\n            }\r\n        } else {\r\n            const { year, monthNbr, monthTxt } = this.visibleMonth_range;\r\n\r\n            const yc: boolean = cell.year !== year;\r\n            this.visibleMonth_range = {\r\n                monthTxt,\r\n                monthNbr,\r\n                year: cell.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.selectedMonth_range.year = this.visibleMonth_range.year;\r\n            if (this.opts.showType === 3) {\r\n                this.toSelectYear({ year: this.visibleMonth_range.year });\r\n            } else if (this.opts.showType === 2) {\r\n                this.generateMonths(isSecondCalendar);\r\n                this.selectYear_range = false;\r\n                this.selectMonth_range = true;\r\n            } else {\r\n                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);\r\n                this.selectYear_range = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    onYearCellKeyDown(cell: IMyCalendarYear) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            YEAR_ROW_COUNT,\r\n            YEAR_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(Y, targetRow, targetCol);\r\n        }\r\n    }\r\n\r\n    generateMonths(isSecondCalendar?: boolean): void {\r\n        const today: IMyDate = this.getToday();\r\n        const { disableUntil, disableSince } = this.opts;\r\n\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let year: number, monthNbr: number;\r\n        if (!isSecondCalendar) {\r\n            this.months.length = 0;\r\n            year = this.visibleMonth.year;\r\n            monthNbr = this.visibleMonth.monthNbr;\r\n        } else {\r\n            this.months_range.length = 0;\r\n            year = this.visibleMonth_range.year;\r\n            monthNbr = this.visibleMonth_range.monthNbr;\r\n        }\r\n\r\n        for (let i = 1; i <= 12; i += 3) {\r\n            const row: Array<IMyCalendarMonth> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        { year, month: j, day: this.daysInMonth(j, year) },\r\n                        disableUntil\r\n                    ) || this.utilService.isMonthDisabledByDisableSince({ year, month: j, day: 1 }, disableSince);\r\n\r\n                row.push({\r\n                    nbr: j,\r\n                    name: this.opts.monthLabels[j],\r\n                    currMonth: j === today.month && year === today.year,\r\n                    disabled,\r\n                    monthObj: { year, month: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.months.push({ row, year });\r\n            } else {\r\n                this.months_range.push({ row, year });\r\n            }\r\n        }\r\n        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);\r\n        this.generateCalendar(isSecondCalendar? this.visibleMonth_range.monthNbr : this.visibleMonth.monthNbr, year, false, isSecondCalendar);\r\n    }\r\n\r\n    generateYears(inputYear: number, isSecondCalendar?: boolean): void {\r\n        const { minYear, maxYear, disableUntil, disableSince } = this.opts;\r\n\r\n        let y: number = inputYear - (inputYear % 10);\r\n\r\n        const { year, monthNbr } = this.visibleMonth;\r\n\r\n        if (!isSecondCalendar) {\r\n            this.years.length = 0;\r\n        } else {\r\n            if (!this.years_range.length && ((this.years&& this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year)  && this.opts.showType === 3) {\r\n                y+= 10;\r\n            }\r\n            this.years_range.length = 0;\r\n            const allYears = flatten<any>(this.years_range);\r\n            if (allYears.findIndex(n => n.year == inputYear) > -1) {\r\n                y = this.years_range[3][2].year;\r\n            }\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n\r\n        for (let i = y - 1; i < y + 10; i += 3) {\r\n            const row: Array<IMyCalendarYear> = [];\r\n            for (let j = i; j < i + 3; j++) {\r\n                const disabled: boolean =\r\n                    this.utilService.isMonthDisabledByDisableUntil(\r\n                        {\r\n                            year: j,\r\n                            month: monthNbr,\r\n                            day: this.daysInMonth(monthNbr, j)\r\n                        },\r\n                        disableUntil\r\n                    ) ||\r\n                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);\r\n\r\n                const minMax: boolean = j < minYear || j > maxYear;\r\n                row.push({\r\n                    year: j,\r\n                    currYear: j === today.year,\r\n                    selected: j === year,\r\n                    disabled: disabled || minMax,\r\n                    yearObj: { year: j }\r\n                });\r\n            }\r\n            if (!isSecondCalendar) {\r\n                this.years.push(row);\r\n            } else {\r\n                this.years_range.push(row);\r\n            }\r\n        }\r\n        if (!isSecondCalendar) {\r\n            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);\r\n        } else {\r\n            this.setYearViewHeaderBtnDisabledState(\r\n                this.years_range[0][1].year,\r\n                this.years_range[3][1].year,\r\n                isSecondCalendar\r\n            );\r\n        }\r\n    }\r\n\r\n    setCalendarVisibleMonth(): void {\r\n        // Sets visible month of calendar\r\n        const { year, monthNbr } = this.selectedMonth;\r\n        this.visibleMonth = {\r\n            monthTxt: this.opts.monthLabels[monthNbr],\r\n            monthNbr,\r\n            year,\r\n            yearTxt: this.opts.yearTxt\r\n        };\r\n\r\n        // Create current month\r\n        if (this.opts.dateRange) {\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],\r\n                monthNbr: this.selectedMonth_range.monthNbr,\r\n                year: this.selectedMonth_range.year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);\r\n        }\r\n        this.generateCalendar(monthNbr, year, true, false);\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, false);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year--;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event?: any, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            if (event) {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth && !this.selectYear) {\r\n                    this.visibleMonth.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth) {\r\n                    this.visibleMonth.year++;\r\n                    this.generateMonths();\r\n                } else if (this.selectYear) {\r\n                    this.generateYears(this.years[2][2].year + 10);\r\n                }\r\n            }\r\n        } else {\r\n            if (event) {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.setDateViewMonth(isSecondCalendar, true);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            } else {\r\n                if (!this.selectMonth_range && !this.selectYear_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.setDateViewMonth(isSecondCalendar);\r\n                } else if (this.selectMonth_range) {\r\n                    this.visibleMonth_range.year++;\r\n                    this.generateMonths(isSecondCalendar);\r\n                } else if (this.selectYear_range) {\r\n                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setDateViewMonth(isSecondCalendar?: boolean, isNext?: boolean): void {\r\n        let change: number;\r\n        if (isNext === undefined) {\r\n            change = 0;\r\n        } else {\r\n            change = isNext ? 1 : -1;\r\n        }\r\n        if (!isSecondCalendar) {\r\n            const { year, monthNbr } = this.visibleMonth;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        } else {\r\n            const { year, monthNbr } = this.visibleMonth_range;\r\n\r\n            const d: Date = this.getDate(year, monthNbr, 1);\r\n            d.setMonth(d.getMonth() + change);\r\n\r\n            const y: number = d.getFullYear();\r\n            const m: number = d.getMonth() + 1;\r\n\r\n            this.visibleMonth_range = {\r\n                monthTxt: this.opts.monthLabels[m],\r\n                monthNbr: m,\r\n                year: y,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n            this.generateCalendar(m, y, true, isSecondCalendar);\r\n        }\r\n    }\r\n\r\n    onCloseSelector(event: any): void {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.esc) {\r\n            this.closedByEsc();\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(cell: IMyCalendarDay, isSecondCalendar?: boolean): void {\r\n        if (cell.cmo === 1) {\r\n            this.onPrevNavigateBtnClicked(true, isSecondCalendar);\r\n        } else if (cell.cmo === 3) {\r\n            this.onNextNavigateBtnClicked(true, isSecondCalendar);\r\n        }\r\n        this.selectDate(cell.dateObj);\r\n        this.resetMonthYearSelect(isSecondCalendar);\r\n    }\r\n\r\n    onDayCellKeyDown(cell: IMyCalendarDay) {\r\n        // Make possible to move focus by arrow keys\r\n        const { sourceRow, sourceCol } = this.getSourceRowAndColumnFromEvent(event);\r\n        const { moveFocus, targetRow, targetCol } = this.getTargetFocusRowAndColumn(\r\n            event,\r\n            sourceRow,\r\n            sourceCol,\r\n            DATE_ROW_COUNT,\r\n            DATE_COL_COUNT\r\n        );\r\n\r\n        if (moveFocus) {\r\n            this.focusCellElement(D, targetRow, targetCol);\r\n        }\r\n    }\r\n    onDayCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&\r\n                            this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDayCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const w of this.dates_range) {\r\n                for (const day of w.week) {\r\n                    day.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months_range) {\r\n                for (const month of item.row) {\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&\r\n                            this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.months) {\r\n                for (const month of item.row) {\r\n                    month.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseEnter(cell: any, isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&\r\n                            this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&\r\n                            this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onYearCellMouseLeave(isSecondCalendar?: boolean) {\r\n        if (isSecondCalendar) {\r\n            for (const item of this.years) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (const item of this.years_range) {\r\n                for (const year of item) {\r\n                    year.range = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(weekData: IMyWeek) {\r\n        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;\r\n        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };\r\n\r\n        if (showTime) {\r\n            weekData.week[0].dateObj.hour = 0;\r\n            weekData.week[0].dateObj.minute = 0;\r\n            weekData.week[0].dateObj.second = 0;\r\n\r\n            weekData.week[6].dateObj.hour = 23;\r\n            weekData.week[6].dateObj.minute = 59;\r\n            weekData.week[6].dateObj.second = 59;\r\n        }\r\n\r\n        this.selectDate(weekData.week[0].dateObj);\r\n        this.selectDate(weekData.week[6].dateObj);\r\n    }\r\n    getSourceRowAndColumnFromEvent(event: any): any {\r\n        let sourceRow = 0;\r\n        let sourceCol = 0;\r\n        if (event.target && event.target.id) {\r\n            // value of id is for example: m_0_1 (first number = row, second number = column)\r\n            const arr: Array<string> = event.target.id.split(UNDER_LINE);\r\n            sourceRow = Number(arr[1]);\r\n            sourceCol = Number(arr[2]);\r\n        }\r\n        return { sourceRow, sourceCol };\r\n    }\r\n\r\n    getTargetFocusRowAndColumn(event: any, row: number, col: number, rowCount: number, colCount: number): any {\r\n        let moveFocus = false;\r\n        let targetRow: number = row;\r\n        let targetCol: number = col;\r\n\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode === KeyCode.upArrow && row > 0) {\r\n            moveFocus = true;\r\n            targetRow--;\r\n        } else if (keyCode === KeyCode.downArrow && row < rowCount) {\r\n            moveFocus = true;\r\n            targetRow++;\r\n        } else if (keyCode === KeyCode.leftArrow && col > 0) {\r\n            moveFocus = true;\r\n            targetCol--;\r\n        } else if (keyCode === KeyCode.rightArrow && col < colCount) {\r\n            moveFocus = true;\r\n            targetCol++;\r\n        }\r\n        return { moveFocus, targetRow, targetCol };\r\n    }\r\n\r\n    focusCellElement(type: string, row: number, col: number): void {\r\n        const elem: any = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);\r\n        if (elem) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    selectDate(date: IMyDate): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n\r\n        if (this.opts.dateRange) {\r\n            // Date range\r\n            const isBeginDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const isEndDateInitialized: boolean = this.utilService.isInitializedDate(this.selectedDateRange.end) &&\r\n                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);\r\n\r\n            if (isBeginDateInitialized && isEndDateInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = date;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else if (!isBeginDateInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = date;\r\n                if (!isEndDateInitialized) {\r\n                    this.selectedDateRange.end = date;\r\n                }\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date,\r\n                    jsDate: this.utilService.getDate(date),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(date)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date,\r\n                        jsDate: this.utilService.getDate(date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(date)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            // Single date\r\n            this.selectedDate = date;\r\n\r\n            if (!this.opts.showTime) {\r\n                this.dateChanged(\r\n                    this.utilService.getDateModel(\r\n                        this.selectedDate,\r\n                        null,\r\n                        dateFormat,\r\n                        monthLabels,\r\n                        dateRangeDatesDelimiter,\r\n                        returnFormat\r\n                    ),\r\n                    showTime ? false : closeSelectorOnDateSelect\r\n                );\r\n            } else {\r\n                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {\r\n                    this.timeVlaue = this.getTimeStr(new Date);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    toSelectMonth(month: IMyMonth): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.begin);\r\n            const isEndMonthInitialized: boolean = this.utilService.isInitializedMonth(this.selectedDateRange.end);\r\n            if (isBeginMonthInitialized && isEndMonthInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginMonthInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    this.selectedDateRange.begin\r\n                );\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.selectedMonth = month;\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(\r\n                    { year: month.year, month: month.monthNbr },\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                ),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    toSelectYear(year: { year: number }): void {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, showTime, returnFormat } = this.opts;\r\n        if (this.opts.dateRange) {\r\n            // month range\r\n            const isBeginYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.begin);\r\n            const isEndYearInitialized: boolean = this.utilService.isInitializedYear(this.selectedDateRange.end);\r\n            if (isBeginYearInitialized && isEndYearInitialized) {\r\n                // both already selected - set begin date and reset end date\r\n                this.selectedDateRange.begin = year;\r\n                this.selectedDateRange.end = this.utilService.resetDate();\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else if (!isBeginYearInitialized) {\r\n                // begin date\r\n                this.selectedDateRange.begin = year;\r\n                this.rangeDateSelection({\r\n                    isBegin: true,\r\n                    date: this.selectedDateRange.begin,\r\n                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                    dateFormat,\r\n                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                });\r\n            } else {\r\n                // second selection\r\n                const firstDateEarlier: boolean = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);\r\n                if (firstDateEarlier) {\r\n                    const _date = this.selectedDateRange.begin;\r\n                    this.selectedDateRange.end = _date;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: _date,\r\n                        jsDate: this.utilService.getDate(_date),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(_date)\r\n                    });\r\n                    this.selectedDateRange.begin = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: true,\r\n                        date: this.selectedDateRange.begin,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)\r\n                    });\r\n                } else {\r\n                    this.selectedDateRange.end = year;\r\n                    this.rangeDateSelection({\r\n                        isBegin: false,\r\n                        date: this.selectedDateRange.end,\r\n                        jsDate: this.utilService.getDate(this.selectedDateRange.end),\r\n                        dateFormat,\r\n                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),\r\n                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)\r\n                    });\r\n                }\r\n                if (!this.opts.showTime) {\r\n                    this.dateChanged(\r\n                        this.utilService.getDateModel(\r\n                            null,\r\n                            this.selectedDateRange,\r\n                            dateFormat,\r\n                            monthLabels,\r\n                            dateRangeDatesDelimiter,\r\n                            returnFormat\r\n                        ),\r\n                        closeSelectorOnDateSelect\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.dateChanged(\r\n                this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat),\r\n                showTime ? false : closeSelectorOnDateSelect\r\n            );\r\n        }\r\n    }\r\n    monthStartIdx(y: number, m: number): number {\r\n        // Month start index\r\n        const d: Date = new Date();\r\n        d.setDate(1);\r\n        d.setMonth(m - 1);\r\n        d.setFullYear(y);\r\n        const idx = d.getDay() + this.sundayIdx();\r\n        return idx >= 7 ? idx - 7 : idx;\r\n    }\r\n\r\n    daysInMonth(m: number, y: number): number {\r\n        // Return number of days of current month\r\n        return new Date(y, m, 0).getDate();\r\n    }\r\n\r\n    daysInPrevMonth(m: number, y: number): number {\r\n        // Return number of days of the previous month\r\n        const d: Date = this.getDate(y, m, 1);\r\n        d.setMonth(d.getMonth() - 1);\r\n        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());\r\n    }\r\n\r\n    isCurrDay(d: number, m: number, y: number, cmo: number, today: IMyDate): boolean {\r\n        // Check is a given date the today\r\n        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;\r\n    }\r\n\r\n    getWidth() {\r\n        const hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;\r\n        if (this.opts.dateRange && this.opts.showType !== 4) {\r\n            return hasShortCuts ? '660px' : '574px';\r\n        } else {\r\n            const w =  (hasShortCuts ? 380 : 287) + ((this.opts.viewType === ViewType.Together || this.multiSelect) ? 200 : 0);\r\n            return w + 'px';\r\n        }\r\n    }\r\n\r\n    getToday(): IMyDate {\r\n        const date: Date = new Date();\r\n        if (this.opts.showTime) {\r\n            return {\r\n                year: date.getFullYear(),\r\n                month: date.getMonth() + 1,\r\n                day: date.getDate(),\r\n                hour: date.getHours(),\r\n                minute: date.getMinutes(),\r\n                second: date.getSeconds()\r\n            };\r\n        } else {\r\n            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n        }\r\n    }\r\n\r\n    getDayNumber(date: IMyDate): number {\r\n        // Get day number: su=0, mo=1, tu=2, we=3 ...\r\n        const d: Date = this.getDate(date.year, date.month, date.day);\r\n        return d.getDay();\r\n    }\r\n\r\n    getWeekday(date: IMyDate): string {\r\n        // Get weekday: su, mo, tu, we ...\r\n        return this.weekDayOpts[this.getDayNumber(date)];\r\n    }\r\n\r\n    getDate(year: number, month: number, day: number): Date {\r\n        // Creates a date object from given year, month and day\r\n        return new Date(year, month - 1, day, 0, 0, 0, 0);\r\n    }\r\n\r\n    sundayIdx(): number {\r\n        // Index of Sunday day\r\n        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;\r\n    }\r\n\r\n    generateCalendar(m: number, y: number, notifyChange: boolean, isSecondCalendar?: boolean): void {\r\n        if (!isSecondCalendar) {\r\n            this.dates.length = 0;\r\n        } else {\r\n            this.dates_range.length = 0;\r\n        }\r\n        const today: IMyDate = this.getToday();\r\n        const monthStart: number = this.monthStartIdx(y, m);\r\n        const dInThisM: number = this.daysInMonth(m, y);\r\n        const dInPrevM: number = this.daysInPrevMonth(m, y);\r\n\r\n        let dayNbr = 1;\r\n        let cmo: number = MonthId.prev;\r\n        for (let i = 1; i < 7; i++) {\r\n            const week: Array<IMyCalendarDay> = [];\r\n            if (i === 1) {\r\n                // First week\r\n                const pm = dInPrevM - monthStart + 1;\r\n                // Previous month\r\n                for (let j = pm; j <= dInPrevM; j++) {\r\n                    const date: IMyDate = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(j, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                }\r\n\r\n                cmo = MonthId.curr;\r\n                // Current month\r\n                const daysLeft: number = 7 - week.length;\r\n                for (let j = 0; j < daysLeft; j++) {\r\n                    const date: IMyDate = { year: y, month: m, day: dayNbr };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            } else {\r\n                // Rest of the weeks\r\n                for (let j = 1; j < 8; j++) {\r\n                    if (dayNbr > dInThisM) {\r\n                        // Next month\r\n                        dayNbr = 1;\r\n                        cmo = MonthId.next;\r\n                    }\r\n                    const date: IMyDate = {\r\n                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,\r\n                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,\r\n                        day: dayNbr\r\n                    };\r\n                    week.push({\r\n                        dateObj: date,\r\n                        cmo,\r\n                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),\r\n                        disabled: this.utilService.isDisabledDate(date, this.opts),\r\n                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),\r\n                        highlight: this.utilService.isHighlightedDate(\r\n                            date,\r\n                            this.opts.sunHighlight,\r\n                            this.opts.satHighlight,\r\n                            this.opts.highlightDates\r\n                        )\r\n                    });\r\n                    dayNbr++;\r\n                }\r\n            }\r\n\r\n            // let weekNbr = this.opts.showWeekNumbers ? this.utilService.getWeekNumber(week[0].dateObj) : 0;\r\n            let weekNbr = 0;\r\n            if (this.opts.showWeekNumbers ) {\r\n                const dateIndex = this.opts.firstDayOfWeek == 'su' ? 6: 0\r\n           \r\n                weekNbr = this.utilService.getWeekNumber(week[dateIndex].dateObj);\r\n                // if (this.opts.firstDayOfWeek === 'su') {\r\n                //     endDayWeekNbr -= 1;\r\n                // }\r\n                // weekNbr = this.utilService.getWeekNumber(week[0].dateObj) === endDayWeekNbr ? this.utilService.getWeekNumber(week[0].dateObj): 0;\r\n            }\r\n\r\n\r\n\r\n            if (!isSecondCalendar) {\r\n                this.dates.push({ week, weekNbr, year: y });\r\n            } else {\r\n                this.dates_range.push({ week, weekNbr, year: y });\r\n            }\r\n        }\r\n\r\n        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);\r\n\r\n        if (notifyChange) {\r\n            // Notify parent\r\n            this.calendarViewChanged({\r\n                year: y,\r\n                month: m,\r\n                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },\r\n                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDateViewHeaderBtnDisabledState(m: number, y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil(\r\n            {\r\n                year: m === 1 ? y - 1 : y,\r\n                month: m === 1 ? 12 : m - 1,\r\n                day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)\r\n            },\r\n            disableUntil\r\n        );\r\n        dnm = this.utilService.isMonthDisabledByDisableSince(\r\n            { year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 },\r\n            disableSince\r\n        );\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;\r\n            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setMonthViewHeaderBtnDisabledState(y: number, isSecondCalendar: boolean): void {\r\n        let dpm = false;\r\n        let dnm = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);\r\n        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = y === minYear || dpm;\r\n            this.nextViewDisabled = y === maxYear || dnm;\r\n            this.prevDobViewDisabled = y === minYear || dpm;\r\n            this.nextDobViewDisabled = y === maxYear || dnm;\r\n        } else {\r\n            this.prevViewDisabled_range = y === minYear || dpm;\r\n            this.nextViewDisabled_range = y === maxYear || dnm;\r\n            this.prevDobViewDisabled_range = y === minYear || dpm;\r\n            this.nextDobViewDisabled_range = y === maxYear || dnm;\r\n        }\r\n    }\r\n\r\n    setYearViewHeaderBtnDisabledState(yp: number, yn: number, isSecondCalendar: boolean): void {\r\n        let dpy = false;\r\n        let dny = false;\r\n\r\n        const { disableUntil, disableSince, minYear, maxYear } = this.opts;\r\n\r\n        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);\r\n        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);\r\n        if (!isSecondCalendar) {\r\n            this.prevViewDisabled = yp <= minYear || dpy;\r\n            this.nextViewDisabled = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled = yn >= maxYear || dny;\r\n        } else {\r\n            this.prevViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextViewDisabled_range = yn >= maxYear || dny;\r\n            this.prevDobViewDisabled_range = yp <= minYear || dpy;\r\n            this.nextDobViewDisabled_range = yn >= maxYear || dny;\r\n        }\r\n    }\r\n    onContainerClick(event: Event) {\r\n        event.stopPropagation();\r\n    }\r\n    onClickTimeBtn(event: Event) {\r\n        event.stopPropagation();\r\n        if (this.opts.dateRange) {\r\n            const beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);\r\n            const endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);\r\n            const now = new Date();\r\n            if (!beginIsInitializedDate || !endIsInitializedDate) {\r\n                // \r\n                if (!beginIsInitializedDate) {\r\n                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n                }\r\n                let endYear = now.getFullYear();\r\n                let endmonth = now.getMonth() + 1;\r\n                if (endmonth >= 12) {\r\n                    endYear = endYear + 1;\r\n                    endmonth = 1;\r\n                }\r\n                // else {\r\n                //     endmonth = endmonth + this.opts.monthRangeValue;\r\n                // }\r\n                this.selectedDateRange.end = { ...this.selectedDateRange.begin };\r\n                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };\r\n                // selectTimedateRange\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n\r\n            if (!this.timeVlaue_range) {\r\n                this.timeVlaue_range = this.getTimeStr(now);\r\n            }\r\n            \r\n            this.timeVlaue_range = this.checkTimeValues(this.timeVlaue_range);\r\n\r\n        } else {\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                const now = new Date();\r\n                // selectTime\r\n                this.timeVlaue = this.getTimeStr(now);\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n        \r\n        if (!this.timeVlaue) {\r\n            const now = new Date();\r\n            // selectTime\r\n            this.timeVlaue = this.getTimeStr(now);\r\n            if (!this.utilService.isInitializedDate(this.selectedDate)) {\r\n                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };\r\n            }\r\n        }\r\n\r\n        this.timeVlaue = this.checkTimeValues(this.timeVlaue);\r\n\r\n        if (this.selectYear) {\r\n            this.selectYear = false;\r\n        }\r\n        if (this.selectMonth) {\r\n            this.selectMonth = false;\r\n        }\r\n\r\n        if (this.selectYear_range) {\r\n            this.selectYear_range = false;\r\n        }\r\n\r\n        if (this.selectMonth_range) {\r\n            this.selectMonth_range = false;\r\n        }\r\n\r\n        this.selectTime = !this.selectTime;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onShowDynamicView($event) {\r\n        $event.stopPropagation();\r\n        this.opts.showDynamicView = true;\r\n        this.dynamicViewShow.emit( { showDynamicView: true } );\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onShowDatePanel($event) {\r\n        $event.stopPropagation();\r\n        this.opts.showDynamicView = false;\r\n        this.dynamicViewShow.emit( { showDynamicView: false } );\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n\r\n    private getTimeValue(isDateRange) {\r\n        const t = { start: null, end: null };\r\n        if (this.timeVlaue) {\r\n            const timeArr = this.timeVlaue.replace('', ':').replace('', ':').replace('', '').split(':');\r\n            if (timeArr.length >= 2) {\r\n                t.start = {\r\n                    hour: timeArr[0],\r\n                    minute: timeArr[1],\r\n                    second: timeArr[2] ? timeArr[2] : 0\r\n                };\r\n            }\r\n        } else {\r\n            const nowDate = new Date();\r\n            const hour = nowDate.getHours();\r\n            const minute = nowDate.getMinutes();\r\n            const second = nowDate.getSeconds();\r\n\r\n            if (this.opts.dateRange) {\r\n                t.start = { hour: 0, minute: 0, second: 0 };\r\n            } else {\r\n                t.start = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        if (isDateRange) {\r\n            if (this.timeVlaue_range) {\r\n                const timeArr_range = this.timeVlaue_range.replace('', ':').replace('', ':').replace('', '').split(':');\r\n                if (timeArr_range.length >= 2) {\r\n                    t.end = {\r\n                        hour: timeArr_range[0],\r\n                        minute: timeArr_range[1],\r\n                        second: timeArr_range[2] ? timeArr_range[2] : 0\r\n                    };\r\n                }\r\n            } else {\r\n                const hour = 23;\r\n                const minute = 59;\r\n                const second = 59;\r\n                t.end = { hour, minute, second };\r\n            }\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n    onClickOkBtn(event: Event) {\r\n        event.stopPropagation();\r\n        let timeObj = null;\r\n        let timeObj_range = null;\r\n        let selectedDate = null;\r\n        let selectedDate_range = null;\r\n        if (this.opts.showTime) {\r\n            const { start, end } = this.getTimeValue(this.opts.dateRange);\r\n            timeObj = start;\r\n            timeObj_range = end;\r\n        }\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (!this.opts.dateRange) {\r\n            selectedDate = { ...this.initializedDate(this.selectedDate), ...timeObj };\r\n            const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);\r\n            const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);\r\n\r\n            selectedDate = !isInDisableRange\r\n                ? selectedDate\r\n                : { ...selectedDate, ...(earlier ? this.opts.disableUntil : this.opts.disableSince) };\r\n            \r\n\r\n            this.checkTimeValue(selectedDate);\r\n        } else {\r\n            const begin = { ...this.initializedDate(this.selectedDateRange.begin), ...timeObj };\r\n            const end = { ...this.initializedDate(this.selectedDateRange.end, begin), ...timeObj_range };\r\n            this.checkTimeValue(begin);\r\n            this.checkTimeValue(end);\r\n            selectedDate_range = { begin, end };\r\n        }\r\n\r\n        const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n            selectedDate,\r\n            selectedDate_range,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        );\r\n        this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n    }\r\n\r\n    onTodayClick($event) {\r\n        $event.stopPropagation();\r\n        let timeObj = null;\r\n        let selectedDate = null;\r\n        let selectedDate_range = null;\r\n        if (this.opts.showTime) {\r\n            const { start } = this.getTimeValue(false);\r\n            timeObj = start;\r\n        }\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        \r\n        selectedDate = { ...this.initializedDate({ year: 0, month: 0, day: 0 }), ...timeObj };\r\n        const isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);\r\n        const earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);\r\n\r\n        selectedDate = !isInDisableRange\r\n            ? selectedDate\r\n            : { ...selectedDate, ...(earlier ? this.opts.disableUntil : this.opts.disableSince) };\r\n\r\n        const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n            selectedDate,\r\n            selectedDate_range,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        );\r\n        this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n    }\r\n\r\n\r\n\r\n    onDynamicOkClick($event, dynamicviewRef) {\r\n        if (dynamicviewRef) {\r\n            const text = dynamicviewRef.formatValue();\r\n            const value = dynamicviewRef.getValue();\r\n            value.text = text;\r\n            this.opts.dynamicValueChanged(value);\r\n        }\r\n    }\r\n\r\n    initializedDate(date: IMyDate, otherDate: IMyDate = { year: 0, month: 0, day: 0 }): IMyDate {\r\n        const daysInMonth: Array<number> = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {\r\n            const year = new Date().getFullYear();\r\n            const month = new Date().getMonth() + 1;\r\n            const day = new Date().getDate();\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableUntil : { year, month, day };\r\n        } else if (!this.utilService.isInitializedDate(date)) {\r\n            const year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;\r\n            let month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;\r\n            if (!date.month) {\r\n                month = otherDate.month;\r\n            }\r\n            const day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;\r\n            return this.utilService.isDisabledDate({ year, month, day }, this.opts) ? this.opts.disableSince : { year, month, day };\r\n        }\r\n        return date;\r\n    }\r\n\r\n    setTime(date: any) {\r\n        const { dateFormat, monthLabels, dateRangeDatesDelimiter, closeSelectorOnDateSelect, returnFormat } = this.opts;\r\n        if (date instanceof Date) {\r\n            if (this.opts.showType !== 4 && !this.opts.dateRange) {\r\n                let targetDate: IMyDate;\r\n                if (this.opts.showTime) {\r\n                    targetDate = {\r\n                        year: date.getFullYear(),\r\n                        month: date.getMonth() + 1,\r\n                        day: date.getDate(),\r\n                        hour: date.getHours(),\r\n                        minute: date.getMinutes(),\r\n                        second: date.getSeconds()\r\n                    };\r\n                } else {\r\n                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };\r\n                }\r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    targetDate,\r\n                    null,\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            } else {\r\n                //   \r\n                const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                    null,\r\n                    this.utilService.getNowWeekTime(date),\r\n                    dateFormat,\r\n                    monthLabels,\r\n                    dateRangeDatesDelimiter,\r\n                    returnFormat\r\n                );\r\n                this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n            }\r\n        } else if (date instanceof Object && this.opts.dateRange) {\r\n            let targetDateRange: IMyDateRange;\r\n            const { begin, end } = date;\r\n            if (!begin || !end) {\r\n                return;\r\n            }\r\n            if (this.opts.showTime) {\r\n                targetDateRange = {\r\n                    begin: {\r\n                        year: begin.getFullYear(),\r\n                        month: begin.getMonth() + 1,\r\n                        day: begin.getDate(),\r\n                        hour: begin.getHours(),\r\n                        minute: begin.getMinutes(),\r\n                        second: begin.getSeconds()\r\n                    },\r\n                    end: {\r\n                        year: end.getFullYear(),\r\n                        month: end.getMonth() + 1,\r\n                        day: end.getDate(),\r\n                        hour: end.getHours(),\r\n                        minute: end.getMinutes(),\r\n                        second: end.getSeconds()\r\n                    }\r\n                };\r\n            } else {\r\n                targetDateRange = {\r\n                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },\r\n                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }\r\n                };\r\n            }\r\n            const dateModel: IMyDateModel = this.utilService.getDateModel(\r\n                null,\r\n                targetDateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n            this.dateChanged(dateModel, closeSelectorOnDateSelect);\r\n        } else {\r\n            // console.warn('');\r\n        }\r\n    }\r\n\r\n    onSelectCurrentWeek($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const firstDay = this.opts.firstDayOfWeek === 'su' ? '': '';\r\n        const { begin, end } = this.dateHlp.getNowWeekTime(new Date(), firstDay);\r\n        const year = new Date().getFullYear();\r\n        const weekNbr = this.utilService.getWeekNumber(begin);\r\n\r\n        const showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;\r\n        this.selectedWeek = { weekNbr, year };\r\n\r\n        if (showTime) {\r\n            begin['hour'] = 0;\r\n            begin['minute'] = 0;\r\n            begin['second'] = 0;\r\n\r\n            end['hour'] = 23;\r\n            end['minute'] = 59;\r\n            end['second'] = 59;\r\n        }\r\n\r\n        this.selectDate(begin);\r\n        this.selectDate(end);\r\n    }\r\n\r\n    onDynamicValueChanged($event) {\r\n        this.btnDynamicDisabled = !$event;\r\n    }\r\n\r\n    onDayCellClickedForMultiDates(cell: IMyCalendarDay, isSecondCalendar?: boolean): void {\r\n        if (cell.cmo === 1) {\r\n            this.onPrevNavigateBtnClicked(true, isSecondCalendar);\r\n        } else if (cell.cmo === 3) {\r\n            this.onNextNavigateBtnClicked(true, isSecondCalendar);\r\n        }\r\n        const { dateFormat, monthLabels, maxSelected, closeSelectorOnDateSelect, showTime, returnFormat, selectedOrderBy } = this.opts;\r\n        let selectedDates = [];\r\n        const isSelected = this.selectedDates.find(n => this.utilService.isDateSame(n, cell.dateObj));\r\n        if (!isSelected) {\r\n            if (!maxSelected || (maxSelected && this.selectedDates.length < maxSelected)) {\r\n                selectedDates = [...this.selectedDates, { ...cell.dateObj, value: this.utilService.formatDate(cell.dateObj, dateFormat, monthLabels) }];\r\n            } else {\r\n                selectedDates = [...this.selectedDates];\r\n                if (this.showNotify) {\r\n                    this.showNotify();\r\n                }\r\n            }\r\n        } else {\r\n            selectedDates = this.selectedDates.filter(n => n!== isSelected);\r\n        }\r\n\r\n        selectedDates = this.utilService.orderSelectedDates(selectedDates, selectedOrderBy);\r\n\r\n        this.selectedDates = selectedDates;\r\n        this.resetMonthYearSelect(isSecondCalendar);\r\n    }\r\n\r\n    onMultiDatesOkClicked($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.multiDatesChanged(this.selectedDates);\r\n    }\r\n\r\n    onMultiDateRemoved(removeItem) {\r\n        this.selectedDates = this.selectedDates.filter(n => n!== removeItem);\r\n    }\r\n\r\n    onMultiDateClear($event) {\r\n        this.selectedDates = [];\r\n    }\r\n\r\n    showGoBackToday() {\r\n        const { monthNbr, year } = this.visibleMonth;\r\n        const { year: currentYear, month } = this.getToday();\r\n        return monthNbr != month || year != currentYear;\r\n    }\r\n\r\n    private setCalendarView(year, month) {\r\n        if (this.visibleMonth.year != year || this.visibleMonth.monthNbr != month) {\r\n            this.visibleMonth = {\r\n                monthTxt: this.opts.monthLabels[month],\r\n                monthNbr: month,\r\n                year: year,\r\n                yearTxt: this.opts.yearTxt\r\n            };\r\n\r\n            this.selectedMonth.year = year;\r\n            this.selectedMonth.monthNbr = month;\r\n\r\n            //tfs638280\r\n            this.selectMonth = false;\r\n            this.selectYear = false;\r\n\r\n            this.generateCalendar(month, year, true);\r\n        }\r\n    }\r\n\r\n    gototodayView($event) {\r\n        const { year, month } = this.getToday();\r\n        this.setCalendarView(year, month);\r\n    }\r\n\r\n    onSelectDateClicked($event) {\r\n        if (!$event) {\r\n            return;\r\n        }\r\n        const { year, month } = $event;\r\n        this.setCalendarView(year, month);\r\n    }\r\n\r\n\r\n\r\n\r\n    private makeRange(\r\n        length: number,\r\n        step: number = 1,\r\n        start: number = 0\r\n    ): number[] {\r\n        step = Math.ceil(step);\r\n        return new Array(Math.ceil(length / step))\r\n            .fill(0)\r\n            .map((_, i) => (i + start) * step);\r\n    }\r\n\r\n    private buildHours() {\r\n        let hourRanges = 24;\r\n        let disabledHours = this.disabledHours && this.disabledHours();\r\n        let startIndex = 0;\r\n        \r\n        let hourRange = this.makeRange(hourRanges, this.opts.hourStep, startIndex).map(\r\n            r => {\r\n                return {\r\n                    index: r,\r\n                    disabled:\r\n                        this.disabledHours && disabledHours.indexOf(r) !== -1\r\n                };\r\n            }\r\n        );\r\n        // \r\n        return hourRange.filter( n => {\r\n            return !(n.disabled);\r\n        });\r\n    }\r\n\r\n    private buildMinutes(timeObj: any) {\r\n        let minuteRange = this.makeRange(60, this.opts.minuteStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledMinutes &&\r\n                    this.disabledMinutes(timeObj.hours!).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        return minuteRange.filter( n => {\r\n            return !(n.disabled);\r\n        });\r\n    }\r\n\r\n    private buildSeconds(timeObj: any) {\r\n        let secondRange = this.makeRange(60, this.opts.secondStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledSeconds &&\r\n                    this.disabledSeconds(\r\n                        timeObj.hours!,\r\n                        timeObj.minutes!\r\n                    ).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        return secondRange.filter( n => {\r\n            return !(n.disabled);\r\n        });\r\n    }\r\n\r\n    checkTimeValues(timeValue: string) {\r\n        if (timeValue) {\r\n            let times = timeValue.split(':').map(n => parseInt(n, 10));\r\n            const timeObj = {\r\n                hour: times[0],\r\n                minute: times[1],\r\n                second: times[2]\r\n            };\r\n\r\n            if (this.opts.hourStep > 1) {\r\n                const hours = this.buildHours();\r\n                if (!hours.find(n => n.index === timeObj.hour)) {\r\n                    timeObj.hour = 0;\r\n                }\r\n    \r\n            }\r\n    \r\n            if (this.opts.minuteStep > 1) {\r\n                const minutes = this.buildMinutes({ hours: timeObj.hour });\r\n                if (!minutes.find(n => n.index === timeObj.minute)) {\r\n                    timeObj.minute = 0;\r\n                }\r\n            }\r\n    \r\n            if (this.opts.secondStep> 1) {\r\n                const seconds = this.buildSeconds({ hours: timeObj.hour, minutes: timeObj.minute });\r\n                if (!seconds.find(n => n.index === timeObj.second)) {\r\n                    timeObj.second = 0;\r\n                }\r\n            }\r\n\r\n            return `${timeObj.hour || '00'}:${timeObj.minute || '00'}:${timeObj.second || '00'}`;\r\n        }\r\n\r\n        return timeValue;\r\n    }\r\n\r\n    checkTimeValue(dateObj: IMyDate) {\r\n        if (!this.opts.showTime) {\r\n            return;\r\n        }\r\n        if (this.opts.hourStep > 1) {\r\n            const hours = this.buildHours();\r\n            if (!hours.find(n => n.index ===  parseInt(''+ dateObj.hour, 10))) {\r\n                dateObj.hour = 0;\r\n            }\r\n\r\n        }\r\n\r\n        if (this.opts.minuteStep > 1) {\r\n            const minutes = this.buildMinutes({ hours: dateObj.hour });\r\n            if (!minutes.find(n => n.index === parseInt(''+dateObj.minute, 10))) {\r\n                dateObj.minute = 0;\r\n            }\r\n        }\r\n\r\n        if (this.opts.secondStep> 1) {\r\n            const seconds = this.buildSeconds({ hours: dateObj.hour, minutes: dateObj.minute });\r\n            if (!seconds.find(n => n.index === parseInt(''+dateObj.second, 10))) {\r\n                dateObj.second = 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-09 09:27:58\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport {\r\n    IMyOptions,\r\n    IMyMonth,\r\n    IMyCalendarYear\r\n} from '../../interfaces/public-api';\r\nimport {\r\n    OPTS,\r\n    YEARS,\r\n    VISIBLE_MONTH,\r\n    SELECT_MONTH,\r\n    SELECT_YEAR,\r\n    PREV_VIEW_DISABLED,\r\n    NEXT_VIEW_DISABLED,\r\n    YYYY,\r\n    MM\r\n} from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-selection-bar',\r\n    templateUrl: './selection-bar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionBarComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() visibleMonth: IMyMonth;\r\n    @Input() selectMonth: boolean;\r\n    @Input() selectYear: boolean;\r\n    @Input() selectToday: boolean;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() prevDobViewDisabled: boolean;\r\n    @Input() nextDobViewDisabled: boolean;\r\n\r\n    @Output() prevNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() nextNavigateBtnClicked: EventEmitter<boolean> = new EventEmitter<\r\n        boolean\r\n    >();\r\n    @Output() monthViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    @Output() yearViewBtnClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() todayViewBtnClicked: EventEmitter<void> = new EventEmitter<\r\n        void\r\n    >();\r\n    constructor() {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(VISIBLE_MONTH)) {\r\n            this.visibleMonth = changes[VISIBLE_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_MONTH)) {\r\n            this.selectMonth = changes[SELECT_MONTH].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECT_YEAR)) {\r\n            this.selectYear = changes[SELECT_YEAR].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(PREV_VIEW_DISABLED)) {\r\n            this.prevViewDisabled = changes[PREV_VIEW_DISABLED].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(NEXT_VIEW_DISABLED)) {\r\n            this.nextViewDisabled = changes[NEXT_VIEW_DISABLED].currentValue;\r\n        }\r\n    }\r\n\r\n    onPrevNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevViewDisabled && this.prevNavigateBtnClicked.emit(true);\r\n    }\r\n\r\n    onNextNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextViewDisabled && this.nextNavigateBtnClicked.emit(true);\r\n    }\r\n    onPrevDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.prevDobViewDisabled && this.prevNavigateBtnClicked.emit(false);\r\n    }\r\n\r\n    onNextDobNavigateBtnClicked(event: any): void {\r\n        event.stopPropagation();\r\n        !this.nextDobViewDisabled && this.nextNavigateBtnClicked.emit(false);\r\n    }\r\n    onMonthViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.monthViewBtnClicked.emit();\r\n    }\r\n\r\n    onYearViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.yearViewBtnClicked.emit();\r\n    }\r\n    onTodayViewBtnClicked(event): void {\r\n        event.stopPropagation();\r\n        this.todayViewBtnClicked.emit();\r\n    }\r\n    getFormateType(): string {\r\n        const yIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(YYYY)\r\n            : 0;\r\n        const mIndex = this.opts.dateFormat\r\n            ? this.opts.dateFormat.indexOf(MM)\r\n            : 0;\r\n        return yIndex > mIndex ? `${MM}-${YYYY}` : `${YYYY}-${MM}`;\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:39:58\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyOptions,\r\n    IMyCalendarDay,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyWeek\r\n} from '../../interfaces/public-api';\r\nimport { MonthId, KeyCode } from '../../enums/public-api';\r\nimport {\r\n    OPTS,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE\r\n} from '../../constants/constants';\r\n\r\n// import { IMyWeek } from '../../interfaces/my-month-row.interface'\r\n\r\n@Component({\r\n    selector: 'lib-day-view',\r\n    templateUrl: './day-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DayViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() dates: Array<IMyWeek>;\r\n    @Input() weekDays: Array<string>;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() selectedWeek: IMyWeek;\r\n\r\n    @Output() dayCellClicked: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() dayCellKeyDown: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() weekClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    prevMonthId: number = MonthId.prev;\r\n    currMonthId: number = MonthId.curr;\r\n    nextMonthId: number = MonthId.next;\r\n\r\n    constructor(private utilService: UtilService) {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(DATES)) {\r\n            this.dates = changes[DATES].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(WEEK_DAYS)) {\r\n            this.weekDays = changes[WEEK_DAYS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE)) {\r\n            this.selectedDate = changes[SELECTED_DATE].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE_RANGE)) {\r\n            this.selectedDateRange = changes[SELECTED_DATE_RANGE].currentValue;\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(event: any, cell: IMyCalendarDay): void {\r\n        if (cell.disabled || this.opts.showType === 4) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        this.dayCellClicked.emit(cell);\r\n    }\r\n\r\n    onDayCellKeyDown(event: KeyboardEvent, cell: IMyCalendarDay) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onDayCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.dayCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(event: KeyboardEvent, week: IMyWeek) {\r\n        if (this.opts.showType !== 4) { return; }\r\n        event.stopPropagation();\r\n        this.weekClicked.emit(week);\r\n    }\r\n\r\n    onDayCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            (!this.utilService.isInitializedDate(this.selectedDateRange.end) ||\r\n                JSON.stringify(this.selectedDateRange.begin) === JSON.stringify(this.selectedDateRange.end))\r\n        ) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,day.dateObj) && this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj,this.selectedDateRange.begin) && this.utilService.isDateSameOrEarlier(cell.dateObj,day.dateObj));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onDayCellMouseLeave(): void {\r\n        for (const w of this.dates) {\r\n            for (const day of w.week) {\r\n                day.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n\r\n    isDateInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n\r\n    isDateSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year,\r\n                month: this.selectedDate.month,\r\n                day: this.selectedDate.day\r\n            },\r\n            date\r\n        );\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        const selectedDateRange = {\r\n            begin: {\r\n                year: this.selectedDateRange.begin.year,\r\n                month: this.selectedDateRange.begin.month,\r\n                day: this.selectedDateRange.begin.day\r\n            },\r\n            end: {\r\n                year: this.selectedDateRange.end.year,\r\n                month: this.selectedDateRange.end.month,\r\n                day: this.selectedDateRange.end.day\r\n            }\r\n        };\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-15 17:31:08\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:01:15\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    SimpleChanges,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyCalendarMonth,\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyMonthRow,\r\n    IMyMonth\r\n} from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\nimport { OPTS, MONTHS } from '../../constants/constants';\r\n\r\n@Component({\r\n    selector: 'lib-month-view',\r\n    templateUrl: './month-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class MonthViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() months: Array<IMyMonthRow> = [];\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() visibleMonth: IMyMonth;\r\n    @Output() monthCellClicked: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n    @Output() monthCellKeyDown: EventEmitter<IMyCalendarMonth> = new EventEmitter<IMyCalendarMonth>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(MONTHS)) {\r\n            this.months = changes[MONTHS].currentValue;\r\n        }\r\n    }\r\n\r\n    onMonthCellClicked(event: any, cell: IMyCalendarMonth): void {\r\n        event.stopPropagation();\r\n\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.monthCellClicked.emit(cell);\r\n    }\r\n\r\n    onMonthCellKeyDown(event: KeyboardEvent, cell: IMyCalendarMonth) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onMonthCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.monthCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.months.length; i++) {\r\n                let row = this.months[i].row;\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let month = row[j];\r\n                    month.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            month.monthObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                month.monthObj,\r\n                                cell.monthObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            month.monthObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.monthObj,\r\n                                month.monthObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.months.length; i++) {\r\n            let row = this.months[i].row;\r\n            for (let j = 0; j < row.length; j++) {\r\n                let month = row[j];\r\n                month.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n    isMonthSame(date: IMyDate): boolean {\r\n\r\n        if (this.selectedDate) {\r\n            const { year, month} = this.selectedDate;\r\n            return year == date.year && month == date.month;\r\n        }\r\n        return false;\r\n        // if (this.visibleMonth.monthNbr) {\r\n            \r\n        // } else {\r\n        //     return this.visibleMonth.year == date.year && this.visibleMonth.monthNbr == date.month;\r\n        // }\r\n    }\r\n    isMonthRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            this.selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\nimport { YEARS, OPTS } from '../../constants/constants';\r\nimport { UtilService } from '../../services/public-api';\r\nimport { IMyCalendarYear, IMyOptions, IMyDate, IMyDateRange, IMyMonth } from '../../interfaces/public-api';\r\nimport { KeyCode } from '../../enums/public-api';\r\n@Component({\r\n    selector: 'lib-year-view',\r\n    templateUrl: './year-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class YearViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() years: Array<Array<IMyCalendarYear>>;\r\n    @Input() prevViewDisabled: boolean;\r\n    @Input() nextViewDisabled: boolean;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() visibleMonth: IMyMonth;\r\n\r\n\r\n    @Output() yearCellClicked: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() yearCellKeyDown: EventEmitter<IMyCalendarYear> = new EventEmitter<IMyCalendarYear>();\r\n    @Output() prevCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() nextCellClicked: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private utilService: UtilService) {}\r\n    ngOnInit(): void {}\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(YEARS)) {\r\n            this.years = changes[YEARS].currentValue;\r\n        }\r\n    }\r\n\r\n    onYearCellClicked(event: any, cell: IMyCalendarYear): void {\r\n        event.stopPropagation();\r\n        if (cell.disabled) {\r\n            return;\r\n        }\r\n        this.yearCellClicked.emit(cell);\r\n    }\r\n\r\n    onYearCellKeyDown(event: KeyboardEvent, cell: IMyCalendarYear) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onYearCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.yearCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onPrevOrNextYearCellClicked(event: any, index: number) {\r\n        event.stopPropagation();\r\n        if (index === 0) {\r\n            if (this.prevViewDisabled) return;\r\n            this.prevCellClicked.emit(event);\r\n        } else {\r\n            if (this.nextViewDisabled) return;\r\n            this.nextCellClicked.emit(event);\r\n        }\r\n    }\r\n    onMonthCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            !this.utilService.isInitializedDate(this.selectedDateRange.end)\r\n        ) {\r\n            for (let i = 0; i < this.years.length; i++) {\r\n                let row = this.years[i];\r\n                for (let j = 0; j < row.length; j++) {\r\n                    let year = row[j];\r\n                    year.range =\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            this.selectedDateRange.begin,\r\n                            year.yearObj\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                year.yearObj,\r\n                                cell.yearObj\r\n                            )) ||\r\n                        (this.utilService.isDateSameOrEarlier(\r\n                            year.yearObj,\r\n                            this.selectedDateRange.begin\r\n                        ) &&\r\n                            this.utilService.isDateSameOrEarlier(\r\n                                cell.yearObj,\r\n                                year.yearObj\r\n                            ));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onMonthCellMouseLeave(): void {\r\n        for (let i = 0; i < this.years.length; i++) {\r\n            let row = this.years[i];\r\n            for (let j = 0; j < row.length; j++) {\r\n                let year = row[j];\r\n                year.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n    isMonthInRange(year: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(year, this.selectedDateRange);\r\n    }\r\n    isYearSame(year: IMyDate): boolean {\r\n      \r\n        // return this.utilService.isDateSame(\r\n        //     {\r\n        //         year: this.visibleMonth.year\r\n        //     },\r\n        //     year\r\n        // );\r\n\r\n        if (this.selectedDate) {\r\n            return this.selectedDate.year === year.year;\r\n        }\r\n\r\n        return false;\r\n    }\r\n    isMonthRangeBeginOrEndSame(year: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.begin.year }, year\r\n        ) || this.utilService.isDateSame(\r\n            { year: this.selectedDateRange.end.year }, year\r\n        );\r\n    }\r\n}\r\n","import {\r\n    Directive,\r\n    Input,\r\n    ComponentRef,\r\n    ElementRef,\r\n    ViewContainerRef,\r\n    Renderer2,\r\n    ChangeDetectorRef,\r\n    ComponentFactoryResolver,\r\n    forwardRef,\r\n    EventEmitter,\r\n    Output,\r\n    SimpleChanges,\r\n    OnChanges,\r\n    HostListener,\r\n    OnDestroy,\r\n    NgZone\r\n} from '@angular/core';\r\nimport {\r\n    AbstractControl,\r\n    ControlValueAccessor,\r\n    NG_VALIDATORS,\r\n    NG_VALUE_ACCESSOR,\r\n    Validator\r\n} from '@angular/forms';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\n\r\nimport {\r\n    IMyOptions,\r\n    IMyDate,\r\n    IMyDateModel,\r\n    IMyDateRange,\r\n    IMyRangeDateSelection,\r\n    IMyCalendarViewChanged,\r\n    IMyInputFieldChanged,\r\n    IMySelectorPosition\r\n} from './interfaces/public-api';\r\n\r\nimport {\r\n    UtilService,\r\n    DatepickerLocaleService,\r\n    DefaultConfigService\r\n} from './services/public-api';\r\n\r\nimport { KeyCode, CalToggle, Year, ResetDateType } from './enums/public-api';\r\n\r\nimport {\r\n    KEYUP,\r\n    BLUR,\r\n    EMPTY_STR,\r\n    DISABLED,\r\n    CLICK,\r\n    BODY,\r\n    VALUE,\r\n    OPTIONS,\r\n    DEFAULT_MONTH,\r\n    LOCALE,\r\n    OBJECT,\r\n    PX\r\n} from './constants/constants';\r\n\r\nconst NGX_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\nconst NGX_DP_VALIDATORS = {\r\n    provide: NG_VALIDATORS,\r\n    useExisting: forwardRef(() => FarrisDatePickerDirective),\r\n    multi: true\r\n};\r\n\r\n@Directive({\r\n    selector: '[farris-datepicker]',\r\n    exportAs: 'farris-datepicker',\r\n    providers: [\r\n        UtilService,\r\n        DatepickerLocaleService,\r\n        DefaultConfigService,\r\n        NGX_DP_VALUE_ACCESSOR,\r\n        NGX_DP_VALIDATORS\r\n    ]\r\n})\r\nexport class FarrisDatePickerDirective\r\n    implements OnChanges, OnDestroy, ControlValueAccessor, Validator {\r\n    @Input() options: IMyOptions;\r\n    @Input() locale: string;\r\n    @Input() defaultMonth: string;\r\n\r\n    @Output() dateChanged: EventEmitter<IMyDateModel> = new EventEmitter<\r\n        IMyDateModel\r\n    >();\r\n    @Output() inputFieldChanged: EventEmitter<\r\n        IMyInputFieldChanged\r\n    > = new EventEmitter<IMyInputFieldChanged>();\r\n    @Output() calendarViewChanged: EventEmitter<\r\n        IMyCalendarViewChanged\r\n    > = new EventEmitter<IMyCalendarViewChanged>();\r\n    @Output() calendarToggle: EventEmitter<number> = new EventEmitter<number>();\r\n    @Output() rangeDateSelection: EventEmitter<\r\n        IMyRangeDateSelection\r\n    > = new EventEmitter<IMyRangeDateSelection>();\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private inputText = '';\r\n    private preventClose = false;\r\n    private disabled = false;\r\n\r\n    private opts: IMyOptions;\r\n\r\n    // scrollFn: any = (e) => {\r\n    //     console.log((e.target as any).scrollTop);\r\n    // };\r\n\r\n    onChangeCb: (_: any) => void = () => {};\r\n    onTouchedCb: () => void = () => {};\r\n\r\n    constructor(\r\n        public localeService: DatepickerLocaleService,\r\n        private utilService: UtilService,\r\n        private vcRef: ViewContainerRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        private renderer: Renderer2,\r\n        private cdr: ChangeDetectorRef,\r\n        private elem: ElementRef,\r\n        private config: DefaultConfigService,\r\n        private zone: NgZone\r\n    ) {\r\n        this.opts = this.config.getDefaultConfig();\r\n        this.parseOptions(this.opts);\r\n    }\r\n\r\n    @HostListener(KEYUP, ['$event']) onKeyUp(event: KeyboardEvent) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (this.ignoreKeyPress(keyCode)) {\r\n            return;\r\n        } else if (keyCode === KeyCode.esc) {\r\n            this.closeSelector(CalToggle.CloseByEsc);\r\n        } else {\r\n            const { value } = this.elem.nativeElement;\r\n\r\n            let valid = false;\r\n            if (!this.opts.dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const { begin, end } = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n            this.emitInputFieldChanged(value, valid);\r\n        }\r\n    }\r\n\r\n    @HostListener(BLUR) onBlur() {\r\n        const {\r\n            inputFieldValidation,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        if (inputFieldValidation) {\r\n            const { value } = this.elem.nativeElement;\r\n            let valid = false;\r\n            if (!dateRange) {\r\n                const date: IMyDate = this.utilService.isDateValid(\r\n                    value,\r\n                    this.opts\r\n                );\r\n\r\n                valid = this.utilService.isInitializedDate(date);\r\n            } else {\r\n                const _dateRange: IMyDateRange = this.utilService.isDateValidDateRange(\r\n                    value,\r\n                    this.opts\r\n                );\r\n                const { begin, end } = _dateRange;\r\n                valid =\r\n                    this.utilService.isInitializedDate(begin) &&\r\n                    this.utilService.isInitializedDate(end);\r\n            }\r\n\r\n            if (!valid && this.inputText !== value) {\r\n                this.clearDate();\r\n            }\r\n            this.onChangeCb(value);\r\n        }\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    // wrapper with arrow function to preserve the use of 'this' word\r\n    private onClickWrapper = (ev: MouseEvent) => {\r\n        this.onClick(ev);\r\n    }\r\n\r\n    onClick(evt: MouseEvent) {\r\n        if (\r\n            this.opts.closeSelectorOnDocumentClick &&\r\n            !this.preventClose &&\r\n            evt.target &&\r\n            this.cRef !== null &&\r\n            this.elem.nativeElement !== evt.target &&\r\n            !this.cRef.location.nativeElement.contains(evt.target) &&\r\n            !this.disabled\r\n        ) {\r\n            this.closeSelector(CalToggle.CloseByOutClick);\r\n        }\r\n    }\r\n    public ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(LOCALE)) {\r\n            this.setLocaleOptions();\r\n        }\r\n\r\n        if (changes.hasOwnProperty(DEFAULT_MONTH)) {\r\n            let dm: any = changes[DEFAULT_MONTH].currentValue;\r\n            if (typeof dm === OBJECT) {\r\n                dm = dm.defMonth;\r\n            }\r\n            this.defaultMonth = dm;\r\n        }\r\n\r\n        if (changes.hasOwnProperty(OPTIONS)) {\r\n            this.parseOptions(changes[OPTIONS].currentValue);\r\n        }\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        this.closeCalendar();\r\n    }\r\n\r\n    setLocaleOptions(): void {\r\n        const opts: IMyOptions = this.localeService.getLocaleOptions(\r\n            this.locale\r\n        );\r\n        Object.keys(opts).forEach(k => {\r\n            (this.opts as IMyOptions)[k] = opts[k];\r\n        });\r\n    }\r\n\r\n    public parseOptions(opts: IMyOptions): void {\r\n        if (opts !== undefined) {\r\n            Object.keys(opts).forEach(k => {\r\n                if (opts[k] !== undefined && opts[k] !== '') {\r\n                    (this.opts as IMyOptions)[k] = opts[k];\r\n                }\r\n            });\r\n        }\r\n        if (this.opts.minYear < Year.min) {\r\n            this.opts.minYear = Year.min;\r\n        }\r\n        if (this.opts.maxYear > Year.max) {\r\n            this.opts.maxYear = Year.max;\r\n        }\r\n    }\r\n    formatDate(value: any) {\r\n        const {\r\n            dateRange,\r\n            dateFormat,\r\n            monthLabels,\r\n            dateRangeDatesDelimiter,\r\n            returnFormat\r\n        } = this.opts;\r\n        if (!dateRange) {\r\n            // Single date mode\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                date,\r\n                null,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        } else {\r\n            // Date range mode\r\n            const _dateRange = this.utilService.isDateValidDateRange(\r\n                value,\r\n                this.opts\r\n            );\r\n            return this.utilService.getDateModel(\r\n                null,\r\n                _dateRange,\r\n                dateFormat,\r\n                monthLabels,\r\n                dateRangeDatesDelimiter,\r\n                returnFormat\r\n            );\r\n        }\r\n    }\r\n    public writeValue(value: any): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (value) {\r\n            value = this.formatDate(value);\r\n        }\r\n\r\n        if (!value) {\r\n            this.setInputValue(EMPTY_STR);\r\n            this.emitInputFieldChanged(EMPTY_STR, false);\r\n\r\n            if (this.cRef !== null) {\r\n                this.cRef.instance.resetDateValue(ResetDateType.both);\r\n            }\r\n        } else if (value.isRange === false && value.singleDate) {\r\n            // single date\r\n            const { date, formatted } = value.singleDate;\r\n            const valid: boolean = this.utilService.isInitializedDate(date);\r\n            if (valid) {\r\n                this.setInputValue(formatted);\r\n                this.emitInputFieldChanged(formatted, valid);\r\n\r\n                if (this.cRef !== null) {\r\n                    this.cRef.instance.resetDateValue(ResetDateType.dateRange);\r\n                }\r\n            }\r\n        } else if (value.isRange === true && value.dateRange) {\r\n            // date range\r\n            const { beginDate, endDate, formatted } = value.dateRange;\r\n\r\n            if (beginDate && endDate) {\r\n                const valid: boolean =\r\n                    this.utilService.isInitializedDate(beginDate) &&\r\n                    this.utilService.isInitializedDate(endDate);\r\n                if (valid) {\r\n                    this.setInputValue(formatted);\r\n                    this.emitInputFieldChanged(formatted, valid);\r\n\r\n                    if (this.cRef !== null) {\r\n                        this.cRef.instance.resetDateValue(\r\n                            ResetDateType.singleDate\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public registerOnChange(fn: any): void {\r\n        this.onChangeCb = fn;\r\n    }\r\n\r\n    public registerOnTouched(fn: any): void {\r\n        this.onTouchedCb = fn;\r\n    }\r\n\r\n    public setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.renderer.setProperty(\r\n            this.elem.nativeElement,\r\n            DISABLED,\r\n            isDisabled\r\n        );\r\n\r\n        if (isDisabled) {\r\n            this.closeCalendar();\r\n        }\r\n    }\r\n\r\n    public validate(c: AbstractControl): { [p: string]: any } {\r\n        return null;\r\n    }\r\n\r\n    public openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.preventClose = true;\r\n        this.cdr.detectChanges();\r\n        if (this.cRef === null) {\r\n            this.cRef = this.vcRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n            this.cRef.instance.initialize(\r\n                this.opts,\r\n                this.defaultMonth,\r\n                this.getSelectorPosition(this.elem.nativeElement),\r\n                this.elem.nativeElement.value,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n                    this.focusToInput();\r\n                    this.updateModel(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                    this.emitDateChanged(dm);\r\n                    this.emitInputFieldChanged(\r\n                        this.utilService.getFormattedDate(dm),\r\n                        true\r\n                    );\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n            this.emitCalendarToggle(CalToggle.Open);\r\n            this.cdr.detectChanges();\r\n        } else {\r\n            this.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n        this.preventClose = false;\r\n    }\r\n\r\n    public closeCalendar(): void {\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public toggleCalendar(event: MouseEvent): void {\r\n        event.stopPropagation();\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            document.addEventListener(CLICK, this.onClickWrapper, true);\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.openCalendar();\r\n            } else {\r\n                document.removeEventListener(CLICK, this.onClickWrapper);\r\n                this.closeSelector(CalToggle.CloseByCalBtn);\r\n                this.renderer.setStyle(container, 'pointer-events', '');\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearDate(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.setInputValue(EMPTY_STR);\r\n        this.emitDateChanged({\r\n            isRange: this.opts.dateRange,\r\n            singleDate: {\r\n                date: this.utilService.resetDate(),\r\n                jsDate: null,\r\n                formatted: EMPTY_STR,\r\n                epoc: 0\r\n            },\r\n            dateRange: {\r\n                beginDate: this.utilService.resetDate(),\r\n                beginJsDate: null,\r\n                beginEpoc: 0,\r\n                endDate: this.utilService.resetDate(),\r\n                endJsDate: null,\r\n                endEpoc: 0,\r\n                formatted: EMPTY_STR\r\n            }\r\n        });\r\n        this.onChangeCb(null);\r\n        this.onTouchedCb();\r\n        this.closeSelector(CalToggle.CloseByCalBtn);\r\n    }\r\n\r\n    public isDateValid(): boolean {\r\n        const { value } = this.elem.nativeElement;\r\n\r\n        if (value !== EMPTY_STR) {\r\n            const date: IMyDate = this.utilService.isDateValid(\r\n                value,\r\n                this.opts\r\n            );\r\n            if (this.utilService.isInitializedDate(date)) {\r\n                this.emitInputFieldChanged(value, true);\r\n                return true;\r\n            }\r\n        }\r\n        this.emitInputFieldChanged(value, false);\r\n        return false;\r\n    }\r\n\r\n    private ignoreKeyPress(keyCode: number): boolean {\r\n        // keyCode === KeyCode.tab ||\r\n\r\n        return (\r\n            keyCode === KeyCode.leftArrow ||\r\n            keyCode === KeyCode.rightArrow ||\r\n            keyCode === KeyCode.upArrow ||\r\n            keyCode === KeyCode.downArrow ||\r\n            keyCode === KeyCode.shift\r\n        );\r\n    }\r\n\r\n    private closeSelector(reason: number): void {\r\n        if (this.cRef !== null) {\r\n            this.vcRef.remove(this.vcRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            this.cdr.detectChanges();\r\n            this.emitCalendarToggle(reason);\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n    }\r\n\r\n    private updateModel(model: IMyDateModel): void {\r\n        this.setInputValue(this.utilService.getFormattedDate(model));\r\n        this.onChangeCb(this.utilService.getFormattedDate(model));\r\n        this.onTouchedCb();\r\n    }\r\n\r\n    private setInputValue(value: string): void {\r\n        this.inputText = value;\r\n        this.renderer.setProperty(this.elem.nativeElement, VALUE, value);\r\n    }\r\n\r\n    private focusToInput(): void {\r\n        if (this.opts.focusInputOnDateSelect) {\r\n            this.elem.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    private emitDateChanged(dateModel: IMyDateModel): void {\r\n        this.dateChanged.emit(dateModel);\r\n    }\r\n\r\n    private emitInputFieldChanged(value: string, valid: boolean): void {\r\n        this.inputFieldChanged.emit({\r\n            value,\r\n            dateFormat: this.opts.dateFormat,\r\n            valid\r\n        });\r\n    }\r\n\r\n    private emitCalendarChanged(cvc: IMyCalendarViewChanged) {\r\n        this.calendarViewChanged.emit(cvc);\r\n    }\r\n\r\n    private emitRangeDateSelection(rds: IMyRangeDateSelection) {\r\n        this.rangeDateSelection.emit(rds);\r\n    }\r\n\r\n    private emitCalendarToggle(reason: number): void {\r\n        this.calendarToggle.emit(reason);\r\n    }\r\n\r\n    private jsDateToMyDate(date: Date): IMyDate {\r\n        return {\r\n            year: date.getFullYear(),\r\n            month: date.getMonth() + 1,\r\n            day: date.getDate()\r\n        };\r\n    }\r\n\r\n    private appendSelector(elem: any): void {\r\n        let container = document.querySelector('.date-overlay-container');\r\n        if (container) {\r\n            if (container.hasChildNodes()) {\r\n                container.childNodes.forEach(el => {\r\n                    if (el !== elem) {\r\n                        container.removeChild(el);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            container = document.createElement('div');\r\n            container.classList.add('date-overlay-container');\r\n            container.classList.add('overlay-container');\r\n            document.body.appendChild(container);\r\n        }\r\n        container.appendChild(elem);\r\n    }\r\n\r\n    private getSelectorPosition(elem: any): IMySelectorPosition {\r\n        let top = 0;\r\n        let left = 0;\r\n        let _selectorHeight = 0;\r\n        let _selectorWidth = 0;\r\n        const {\r\n            selectorHeight,\r\n            selectorWidth,\r\n            showTime,\r\n            dateRange\r\n        } = this.opts;\r\n\r\n        const b: any = document.body.getBoundingClientRect();\r\n        const e: any = elem.getBoundingClientRect();\r\n        top = e.top - b.top;\r\n        left = e.left - b.left;\r\n        let position = 'bottom';\r\n        if (dateRange) {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth) * 2;\r\n        } else {\r\n            _selectorWidth = this.getSelectorDimension(selectorWidth);\r\n        }\r\n\r\n        if (showTime) {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight) + 36;\r\n        } else {\r\n            _selectorHeight = this.getSelectorDimension(selectorHeight);\r\n        }\r\n        if (top + elem.offsetHeight + _selectorHeight > window.innerHeight && top - _selectorHeight - 2 > 0) {\r\n            top = top - _selectorHeight - 2;\r\n            position = 'top';\r\n        } else {\r\n            top = top + elem.offsetHeight + 2;\r\n        }\r\n\r\n        if (left + _selectorWidth > b.width) {\r\n            left = b.width - _selectorWidth - 15;\r\n        }\r\n        left = left > 0 ? left : 0;\r\n        return { top , left, position };\r\n    }\r\n\r\n    private getSelectorDimension(value: string): number {\r\n        return Number(value.replace(PX, EMPTY_STR));\r\n    }\r\n}\r\n","import { NotifyService } from '@farris/ui-notify';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport {\r\n    Component, OnInit, Input, EventEmitter, Output, ViewChild, forwardRef, SimpleChanges,\r\n    ElementRef, HostListener, OnChanges, HostBinding, Injector, ComponentRef, ViewContainerRef, ComponentFactoryResolver,\r\n    Renderer2, OnDestroy, AfterViewInit, ApplicationRef, ChangeDetectorRef\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, NgControl } from '@angular/forms';\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport {\r\n    IMyOptions, IMyDate, IMyDateModel, IMyShortcuts, IMyDateFormat,\r\n    IMyCalendarViewChanged, IMyRangeDateSelection\r\n} from './interfaces/public-api';\r\n\r\nimport { DefaultView, ShowType, CalToggle } from './enums/public-api';\r\n\r\nimport { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { differenceInSeconds, isDate, isValid, parse } from 'date-fns';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { CLICK, EMPTY_STR } from './constants/constants';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { MultiSelectedOrderBy, ViewType } from './interfaces/my-options.interface';\r\nimport { DynamicData } from './interfaces/dynamic-data-type.interface';\r\n\r\nconst FARRIS_DP_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => FarrisDatepickerComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-datepicker',\r\n    exportAs: 'farris-datepicker',\r\n    templateUrl: './farris-datepicker.component.html',\r\n    styles: [\r\n        `\r\n            :host {\r\n                display: block;\r\n            }\r\n\r\n            :host .datepicker-clear {\r\n                position: absolute;\r\n                height: 100%;\r\n                right: 0;\r\n                top: 0;\r\n                z-index: 100;\r\n            }\r\n        `\r\n    ],\r\n    providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService]\r\n})\r\nexport class FarrisDatepickerComponent implements OnInit, ControlValueAccessor, OnChanges, OnDestroy, AfterViewInit {\r\n\r\n    @HostBinding('class') cls = 'f-cmp-datepicker f-cmp-inputgroup';\r\n\r\n    @Input() viewType: ViewType = ViewType.Switch;\r\n\r\n    // \r\n    @Input() disabled = false;\r\n    // \r\n    @Input() readonly = false;\r\n    // \r\n    @Input() editable = true;\r\n    // \r\n    @Input() dateRange = false;\r\n    // \r\n    @Input() showTime = false;\r\n\r\n    @Input() hourStep = 1;\r\n    @Input() minuteStep = 1;\r\n    @Input() secondStep = 1;\r\n\r\n\r\n    // \r\n    @Input() showType: ShowType = ShowType.all;\r\n    // \r\n    @Input() locale = 'zh-cn';\r\n    // \r\n    @Input()\r\n    set dateFormat(value: string) {\r\n        if (value) {\r\n            // value  yyyy-MM-dd HH:mm:ss\r\n            // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');\r\n            value = value.replace(/^\\s+|\\s+$/g, ''); // \r\n            value = value.replace(/\\s+/g, ' '); // 1\r\n            const formArr = value.split(' ');\r\n            this._dateFormat = formArr[0];\r\n            // 'yyyy-MM-dd h:mm:ss a'12\r\n            if (formArr.length === 3) {\r\n                this._timeFormat = 'h:mm:ss a';\r\n            } else {\r\n                this._timeFormat = formArr[1];\r\n            }\r\n        }\r\n\r\n        // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';\r\n        if (this._dateFormat) {\r\n            const mm = ['yyyy-mm', 'yyyy/mm', 'yyyymm', 'mm/yyyy'];\r\n            const _mm = mm.find(m => this._dateFormat.includes(m));\r\n            if (_mm) {\r\n                this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));\r\n            }\r\n\r\n            if (this._timeFormat && this.showTime) {\r\n                this._dateFormat += ' ' + this._timeFormat;\r\n                if (this._timeFormat.indexOf('') > -1) {\r\n                    this._timeFormat = this._timeFormat.replace('', ':').replace('', ':').replace('', '');\r\n                }\r\n            }\r\n        }\r\n\r\n        // this.dateOpts.dateFormat = this._dateFormat;\r\n    }\r\n    get dateFormat(): string {\r\n        return this._dateFormat;\r\n    }\r\n    // \r\n    @Input() useDefault = false;\r\n    @Input() returnType: 'Object' | 'Date' | 'String' = 'String';\r\n    @Input() returnFormat: string;\r\n    // placeholder\r\n    @Input() placeholder = '';\r\n    @Input() beginPlaceholder = '';\r\n    @Input() endPlaceholder = '';\r\n    /**   true */\r\n    @Input() whenValueChangedThenCloseSelectorPanel = true;\r\n    // \r\n    // \r\n    @Input()\r\n    set minDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(1840, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(1840, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(1840, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._minDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get minDate() {\r\n        return this._minDate;\r\n    }\r\n    // \r\n    // \r\n    @Input()\r\n    set maxDate(val: any) {\r\n        const type = Object.prototype.toString.call(val);\r\n        let date: Date;\r\n\r\n        switch (type) {\r\n            case '[object Date]':\r\n                date = val;\r\n                break;\r\n            case '[object String]':\r\n                if (val) {\r\n                    date = new Date(val);\r\n                } else {\r\n                    date = new Date(10000, 1, 1, 0, 0, 0);\r\n                }\r\n                break;\r\n            case '[object Null]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            // case null:\r\n            //     date = new Date(10000, 1, 1, 0, 0, 0);\r\n            //     break;\r\n            case '[object Undefined]':\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n            default:\r\n                date = new Date(10000, 1, 1, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (isValid(date)) {\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n            const day = date.getDate();\r\n            const hour = date.getHours();\r\n            const minute = date.getMinutes();\r\n            const second = date.getSeconds();\r\n            this._maxDate = { year, month, day, hour, minute, second };\r\n        }\r\n    }\r\n    get maxDate() {\r\n        return this._maxDate;\r\n    }\r\n    // \r\n    @Input() highlightDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableDateRangesBegin: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDateRangesEnd: IMyDate = {\r\n        year: 0,\r\n        month: 0,\r\n        day: 0\r\n    };\r\n    // \r\n    @Input() disableDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() disableWeekdays: Array<string> = [];\r\n    // \r\n    @Input() markDates: Array<IMyDate> = [];\r\n    // \r\n    @Input() markDatesColor = '#59a1ff';\r\n    // \r\n    @Input() showWeekNumbers = false;\r\n    // \r\n    @Input() isMarkWeekends = false;\r\n    // \r\n    @Input() markWeekendsColor = '#59a1ff';\r\n    // input\r\n    @Input() dateRangeDatesDelimiter = '~';\r\n    //  sidebar \r\n    @Input() shortcuts: Array<IMyShortcuts> = [];\r\n    //  + monthRangeValue\r\n    @Input() monthRangeValue = 1;\r\n    // \r\n    @Input()\r\n    set beginValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._beginValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get beginValue() {\r\n        return this.dateFrom(this._beginValue, true);\r\n    }\r\n    // \r\n    @Input()\r\n    set endValue(value: string | Date) {\r\n        value = value ? value : '';\r\n        if (value instanceof Date) {\r\n            value = this.dateTo(value);\r\n            this.returnType = 'Date';\r\n        } else {\r\n            if (value.indexOf('T') > -1) {\r\n                value = value.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n        }\r\n        this._endValue = value;\r\n        if (this._initFinished) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n    }\r\n    get endValue() {\r\n        return this.dateFrom(this._endValue, true);\r\n    }\r\n\r\n    /**\r\n     *  false\r\n     */\r\n    @Input() enableDynamic = false;\r\n    /**  */\r\n    @Input() previousMaxDays = 30;\r\n    /**  */\r\n    @Input() futureMaxDays = 30;\r\n\r\n    @Input() showClear = true;\r\n    /**   */\r\n    @Input() showPresent = false;\r\n    /**    mo  su:  mo */\r\n    @Input() firstDayOfWeek: 'mo'|'su' = 'mo';\r\n\r\n    // clear \r\n    @Output() clear = new EventEmitter();\r\n    // valueChanged \r\n    @Output() valueChange = new EventEmitter();\r\n    // focus \r\n    @Output() focus = new EventEmitter();\r\n    // blur \r\n    @Output() blur = new EventEmitter();\r\n    // beginValueChange\r\n    @Output() beginValueChange = new EventEmitter();\r\n    // endValueChange\r\n    @Output() endValueChange = new EventEmitter();\r\n    // PrevFocus dateRange \r\n    @Output() PrevFocus = new EventEmitter();\r\n    // NextFocus dateRange \r\n    @Output() NextFocus = new EventEmitter();\r\n\r\n    // close \r\n    @Output() close = new EventEmitter();\r\n\r\n    /**  false */\r\n    @Input() multiSelect = false;\r\n    @Input() separator = ',';\r\n    /**  0  */\r\n    @Input() maxSelected = 0;\r\n    /**  'none'  */\r\n    @Input() selectedOrderBy: MultiSelectedOrderBy = 'none';\r\n\r\n\r\n    @ViewChild(FarrisDatePickerDirective) dp: FarrisDatePickerDirective;\r\n    @ViewChild('clearIcon') clearIcon: ElementRef;\r\n    @ViewChild('calendar', { read: ViewContainerRef }) calendarRef: ViewContainerRef;\r\n    @ViewChild('onPrevFocus') PFocus: ElementRef;\r\n    @ViewChild('onNextFocus') NFocus: ElementRef;\r\n\r\n    @ViewChild('dateInput') dateInput: ElementRef;\r\n\r\n    private cRef: ComponentRef<CalendarComponent> = null;\r\n    private _timeFormat = '';\r\n    private _value = '';\r\n    public _beginValue = '';\r\n    public _endValue = '';\r\n    private _initFinished = false;\r\n    private _timer: any;\r\n    private _dateFormat: string;\r\n    private _minDate: IMyDate = {\r\n        year: 1840,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    private _maxDate: IMyDate = {\r\n        year: 10000,\r\n        month: 1,\r\n        day: 1,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0\r\n    };\r\n    set value(v) {\r\n        this._value = v ? v : '';\r\n    }\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    selectedWeek = null;\r\n    dateOpts: IMyOptions = {};\r\n    defaultConfig: IMyOptions;\r\n    localDateOpts: IMyOptions;\r\n    localeConfig: DatepickerLocaleService;\r\n    localeService: LocaleService;\r\n    // \r\n    beginFocus = false;\r\n    // \r\n    endFocus = false;\r\n    // \r\n    totalFocus = false;\r\n\r\n    originTime: any;\r\n    // Tip\r\n    isActiveTip = false;\r\n    private vcRef: ViewContainerRef;\r\n    private cfr: ComponentFactoryResolver;\r\n    private renderer: Renderer2;\r\n    private datePicekrService: DatePickerService;\r\n    _realValue = null;\r\n    private _realRangeValue = null;\r\n    private notifySer: NotifyService;\r\n    private formatedValue = '';\r\n    dtService: DateTimeHelperService = null;\r\n    private _applicationRef: ApplicationRef;\r\n\r\n    private _ngControl: NgControl;\r\n    _updateOn = 'change';\r\n\r\n    //  true blur valueChanged\r\n    // blur  valueChanged  false;\r\n    private _valueChangeEmitted = false;\r\n    private _mousedownEvent = null;\r\n    private closeCalendarHandler = null;\r\n    private cdr: ChangeDetectorRef = null;\r\n    /**  */\r\n    private _SELECT_DATE_ = null;\r\n\r\n    dynamicText = '';\r\n    @Input() dynamicValue: DynamicData = null;\r\n    @Output() dynamicValueChange = new EventEmitter();\r\n    @Output() dynamicViewChanged = new EventEmitter();\r\n\r\n    onModelChange = (obj: any) => { };\r\n    onModelTouched = () => { };\r\n\r\n    private commonUtils: CommonUtils;\r\n\r\n    private overLayService: OverLayHiddenService;\r\n    constructor(\r\n        private el: ElementRef,\r\n        private utilService: UtilService,\r\n        private defaultConfigService: DefaultConfigService,\r\n        private injector: Injector\r\n    ) {\r\n        this.defaultConfig = this.defaultConfigService.getDefaultConfig();\r\n        if (this.injector) {\r\n            this.localeService = this.injector.get(LocaleService);\r\n            this.dtService = this.injector.get(DateTimeHelperService);\r\n            this.notifySer = this.injector.get(NotifyService, null);\r\n            if (this.notifySer) {\r\n                this.notifySer.config.position = 'top-center';\r\n            }\r\n        }\r\n        this.localeConfig = new DatepickerLocaleService();\r\n        this.vcRef = this.injector.get(ViewContainerRef, null);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver, null);\r\n        this.renderer = this.injector.get(Renderer2, null);\r\n        this._applicationRef = this.injector.get(ApplicationRef);\r\n        this.cdr = this.injector.get(ChangeDetectorRef);\r\n\r\n        this.overLayService = new OverLayHiddenService();\r\n\r\n        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this._ngControl = this.injector.get(NgControl, null);\r\n\r\n        this.initPlaceholder();\r\n        this.mergeDateOptions();\r\n        if (this._beginValue && this._endValue) {\r\n            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        }\r\n        this._initFinished = true;\r\n        this.datePicekrService = new DatePickerService(this.dateOpts);\r\n    }\r\n\r\n    private initPlaceholder() {\r\n        if (this.localeService) {\r\n            this.locale = this.localeService.getValue('locale');\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n            this.placeholder = this.placeholder\r\n                ? this.placeholder\r\n                : this.localDateOpts.placeholder\r\n                    ? this.localDateOpts.placeholder\r\n                    : '';\r\n            if (!this.beginPlaceholder) {\r\n                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;\r\n            }\r\n\r\n            if (!this.endPlaceholder) {\r\n                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;\r\n            }\r\n        }\r\n    }\r\n\r\n    private mergeDateOptions() {\r\n        this.dateOpts = { ...this.defaultConfig, ...this.buildOptions() };\r\n\r\n        if (this.dateOpts.dateFormat) {\r\n            if (!this._dateFormat) {\r\n                this.dateFormat = this.dateOpts.dateFormat;\r\n                this.dateOpts.dateFormat = this.dateFormat;\r\n            }\r\n        }\r\n\r\n        if (this.showTime && !this._timeFormat) {\r\n            this._timeFormat = 'HH:mm:ss';\r\n            this.dateOpts.timeFormat = this._timeFormat;\r\n        }\r\n\r\n        if (this.dateOpts.returnFormat) {\r\n            if (!this.returnFormat) {\r\n                this.returnFormat = this.dateOpts.returnFormat;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.locale && changes.locale.isFirstChange()) {\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n        if (changes) {\r\n            let flag = false;\r\n\r\n            const inputs = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue', 'maxSelected', 'separator', 'selectedOrderBy'];\r\n\r\n\r\n            Object.keys(changes).forEach(e => {\r\n                if (!changes[e].isFirstChange() && (this.dateOpts[e] || inputs.includes(e))) {\r\n                    flag = true;\r\n                }\r\n            });\r\n            if (flag) {\r\n                this.dateOpts = { ...(this.dateOpts ||this.defaultConfig), ...this.buildOptions() };\r\n            }\r\n        }\r\n        if (\r\n            changes.readonly &&\r\n            !changes.readonly.currentValue &&\r\n            !changes.readonly.firstChange &&\r\n            !this.value &&\r\n            this.useDefault\r\n        ) {\r\n            this.setDefaultValue();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this._ngControl && this._ngControl.control) {\r\n            this._updateOn = this._ngControl.control.updateOn;\r\n        }\r\n\r\n        this._timer = setTimeout(() => {\r\n            this.setDefaultValue();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        clearTimeout(this._timer);\r\n        this.closeSelector();\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n        this.overLayService = null;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event']) onMouseEnter(event) {\r\n        if (this.value && !this.readonly && !this.disabled) {\r\n            if (this.value && this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = '';\r\n            }\r\n            if (this.dateOpts.dateRange) {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;\r\n                }\r\n            } else {\r\n                if (this.dateOpts.showTime) {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;\r\n                } else {\r\n                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event']) onMouseLeave(event) {\r\n        if (!this.readonly && !this.disabled && this.clearIcon) {\r\n            this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n        }\r\n    }\r\n\r\n    onBlur(e) {\r\n        this.totalFocus = false;\r\n\r\n        let _runblur = true;\r\n        if (this.value) {\r\n            try {\r\n                this.value = this.transform(this.value);\r\n                const valid = this._isValid(this.value);\r\n                if (!valid) {\r\n                    this.clearDate();\r\n                    _runblur = false;\r\n                }\r\n            } catch (e) {\r\n                this.clearDate();\r\n                _runblur = false;\r\n            }\r\n        }\r\n\r\n        const updateModel = () => {\r\n            if (!this._valueChangeEmitted) {\r\n                const realDate = this.dateFrom(this.transform(this.value, this.returnFormat));\r\n                this.onNgModelChange(this.value, realDate, true);\r\n                this.onModelTouched();\r\n            }\r\n        };\r\n\r\n        if (this.editable && _runblur) {\r\n            if (this['inDatagrid']) {\r\n                updateModel();\r\n            } else {\r\n                setTimeout(updateModel, 250);\r\n            }\r\n        }\r\n        this._valueChangeEmitted = false;\r\n        if (this._mousedownEvent) {\r\n            this._mousedownEvent();\r\n            this._mousedownEvent = null;\r\n        }\r\n        this.blur.emit();\r\n    }\r\n\r\n    onFocus(e) {\r\n        this.totalFocus = true;\r\n        this.registerMouseDownHandle();\r\n        this.focus.emit();\r\n    }\r\n\r\n    onInputClick(event) {\r\n        event.stopPropagation();\r\n        if (!this.readonly && !this.disabled) {\r\n            this.registerMouseDownHandle();\r\n            this.toggleCalendar(false);\r\n        }\r\n    }\r\n\r\n    private registerMouseDownHandle() {\r\n        if (!this._mousedownEvent) {\r\n            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (e: any) => {\r\n                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {\r\n                    return;\r\n                }\r\n\r\n                if (e.target.closest('.dynamic-view-item')) {\r\n                    return;\r\n                }\r\n\r\n                if (e.target.closest('.f-cmp-datepicker') ||\r\n                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {\r\n                    if (this.dateInput) {\r\n                        this.renderer.setStyle(this.dateInput.nativeElement, 'unselectable', 'on');\r\n                    }\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    setDefaultValue() {\r\n        if (!this.readonly && !this.value && this.useDefault) {\r\n            const now = new Date();\r\n            let nowValue = '';\r\n            if (!this.dateOpts.dateRange) {\r\n                nowValue = this.dateTo(now);\r\n\r\n            } else {\r\n                nowValue =\r\n                    this.dateTo(now) +\r\n                    this.dateRangeDatesDelimiter +\r\n                    this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));\r\n\r\n            }\r\n            if (this.datePicekrService.validate(nowValue)) {\r\n                this.value = nowValue;\r\n                this.onNgModelChange(this.value);\r\n                this.onModelTouched();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearDynamicDate($event = null) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this.dateOpts.dynamicValueChanged(null);\r\n    }\r\n\r\n    clearDate($event: MouseEvent = null) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this._SELECT_DATE_ = null;\r\n\r\n        if (!this.disabled) {\r\n            this._realRangeValue = null;\r\n            this._realValue = null;\r\n            this.selectedWeek = null;\r\n            this.onDateChanged({\r\n                isRange: this.dateOpts.dateRange,\r\n                singleDate: {\r\n                    date: this.utilService.resetDate(),\r\n                    jsDate: null,\r\n                    formatted: EMPTY_STR,\r\n                    epoc: 0\r\n                },\r\n                dateRange: {\r\n                    beginDate: this.utilService.resetDate(),\r\n                    beginJsDate: null,\r\n                    beginEpoc: 0,\r\n                    endDate: this.utilService.resetDate(),\r\n                    endJsDate: null,\r\n                    endEpoc: 0,\r\n                    formatted: EMPTY_STR\r\n                }\r\n            });\r\n            this.closeSelector(CalToggle.CloseByCalBtn);\r\n            this.onModelChange(null);\r\n            this.clear.emit();\r\n            if (this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n            }\r\n        }\r\n    }\r\n\r\n    onSingleInputNgModelChange($event) {\r\n        this.value = $event || '';\r\n        this._realValue = this.value ? this.dateFrom($event) : '';\r\n        this.closeSelector();\r\n    }\r\n\r\n\r\n    onNgModelChange(value: any, realdate = null, emitValueChange = false) {\r\n        // this.value = value;\r\n        if (this.dateRange || this.showType == ShowType.selectWeek) {\r\n\r\n            const tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];\r\n            const _beginValue = this.transform(tmpArr[0], this.returnFormat);\r\n            const _endValue = this.transform(tmpArr[1], this.returnFormat);\r\n\r\n            this._beginValue = this.transform(tmpArr[0]);\r\n            this._endValue = this.transform(tmpArr[1]);\r\n\r\n\r\n            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';\r\n            this._realRangeValue = value;\r\n            this.onModelChange(value);\r\n            this.cdr.detectChanges();\r\n            this.beginValueChange.emit(this._beginValue);\r\n            this.endValueChange.emit(this._endValue);\r\n\r\n            const p = {\r\n                date: null,\r\n                formatted: this.value,\r\n                returnFormatted: this._realRangeValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            this.valueChange.emit(p);\r\n        } else {\r\n\r\n            if (value === '') {\r\n                this.value = '';\r\n                this._onModelChange(null, emitValueChange);\r\n                return;\r\n            }\r\n\r\n            if (realdate) {\r\n                this._realValue = this.getRealReturnFormatted(realdate);\r\n                this._onModelChange(this._realValue, emitValueChange);\r\n\r\n                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {\r\n                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                }\r\n            } else {\r\n                if (this._isValid(value)) {\r\n                    this._realValue = this.getRealReturnFormatted(realdate);\r\n                    if (this.dateInput) {\r\n                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);\r\n                    }\r\n                    this._onModelChange(this._realValue, emitValueChange);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private _onModelChange(realValue, emit) {\r\n        this._realValue = realValue;\r\n        this.onModelChange(realValue);\r\n        if (emit) {\r\n            const p = {\r\n                date: this.utilService.isDateValid(this.value, this.dateOpts, true),\r\n                formatted: this.value,\r\n                returnFormatted: realValue,\r\n                cmpRef: this\r\n            };\r\n\r\n            if (this.valueChange.observers.length) {\r\n                if (this.whenValueChangedThenCloseSelectorPanel) {\r\n                    this.closeSelector();\r\n                }\r\n\r\n                this.valueChange.emit(p);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private getRealReturnFormatted(realdate: any) {\r\n\r\n        if (realdate) {\r\n            if (this.returnType === 'Date') {\r\n                return realdate;\r\n            } else {\r\n                if (this.returnFormat) {\r\n                    return this.dtService.formatTo(realdate, this.returnFormat);\r\n                }\r\n                return realdate;\r\n            }\r\n        } else {\r\n            return this.dateFrom(this._realValue || this.value) || '';\r\n        }\r\n    }\r\n\r\n    onDateRangeInputBlur(event: any) {\r\n        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);\r\n        this.onNgModelChange(this._realRangeValue || this.value);\r\n    }\r\n\r\n    openCalendar(): void {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        let val = this._realValue;\r\n\r\n        if (!this.multiSelect) {\r\n            if (this.dateRange || this.showType == ShowType.selectWeek) {\r\n                val = this._realRangeValue;\r\n            } else {\r\n                if (this.returnType === 'Date') {\r\n                    val = this.transform(val, this.returnFormat);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.cRef === null) {\r\n            this.cRef = this.calendarRef.createComponent(\r\n                this.cfr.resolveComponentFactory(CalendarComponent)\r\n            );\r\n\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n\r\n            this.datePicekrService.registerScrollEvent(() => {\r\n                this.closeSelector();\r\n            });\r\n\r\n            this.cRef.instance.dateHlp = this.dtService;\r\n\r\n            if (this.showType === 4 && this.selectedWeek) {\r\n                this.cRef.instance.selectedWeek = this.selectedWeek;\r\n            }\r\n\r\n            if (this.multiSelect) {\r\n                this.cRef.instance.multiDatesChanged = (dates: any[]) => {\r\n                    this.value = dates.map(n => n.value).join(this.separator);\r\n                    this._realValue = dates.map(n => this.dtService.formatTo( `${n.year}-${n.month}-${n.day}` , this.returnFormat)).join(this.separator);\r\n                    this.multiSelectedChanged();\r\n                }\r\n\r\n                this.cRef.instance.showNotify = () => {\r\n                    const msg =  this.localDateOpts.message['102'].replace('${0}', this.maxSelected);\r\n                    if (this.notifySer) {\r\n                        this.notifySer.warning(msg);\r\n                    } else {\r\n                        alert(msg);\r\n                    }\r\n                };\r\n            }\r\n\r\n            this.cRef.instance.initialize(\r\n                this.dateOpts,\r\n                '',\r\n                this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef),\r\n                val,\r\n                (dm: IMyDateModel, close: boolean) => {\r\n\r\n                    if (this.dateOpts.dateRange && this.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {\r\n                        // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};\r\n                        // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};\r\n                        // error message:  The end time must not be earlier than the start time\r\n                        // error message:  \r\n                        const msg = this.localDateOpts.message['101'];\r\n                        if (this.notifySer) {\r\n                            this.notifySer.warning(msg);\r\n                        } else {\r\n                            alert(msg);\r\n                        }\r\n                        return;\r\n                    }\r\n                    this.selectedWeek = this.cRef.instance.selectedWeek;\r\n                    this.onDateChanged(dm);\r\n                    if (close) {\r\n                        this.closeSelector(CalToggle.CloseByDateSel);\r\n                    }\r\n                },\r\n                (cvc: IMyCalendarViewChanged) => {\r\n                    // this.emitCalendarChanged(cvc);\r\n                },\r\n                (rds: IMyRangeDateSelection) => {\r\n                    // this.emitRangeDateSelection(rds);\r\n                },\r\n                () => {\r\n                    this.closeSelector(CalToggle.CloseByEsc);\r\n                }\r\n            );\r\n\r\n            this.cRef.instance.dynamicViewShow.subscribe((e: {showDynamicView: boolean}) => {\r\n                const t = Object.assign(e, {dynamicValue: this.dynamicValue, singleValue: this._realValue, instance: this})\r\n                this.dynamicViewChanged.emit(t);\r\n            })\r\n\r\n            // this.cdr.detectChanges();\r\n        } else {\r\n            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);\r\n        }\r\n\r\n        this.overLayService.registerMouseEvent(this.el.nativeElement, (e: MouseEvent) => {\r\n            const t: any = e.target;\r\n            const notClose = (this.cRef && this.cRef.location.nativeElement.contains(t)) || \r\n            t.closest('.multi-date-select') || (t.className && t.className.indexOf('multi-date-select') > -1);\r\n            if (notClose) {\r\n                return false;\r\n            }\r\n            this.closeSelector();\r\n        }, { onlyTopWindow: true});\r\n\r\n        this.cRef.changeDetectorRef.detectChanges();\r\n        // this.preventClose = false;\r\n    }\r\n    closeSelector(reason?: number): void {\r\n        if (this.cRef !== null) {\r\n            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));\r\n            this.cRef = null;\r\n            // this.cdr.detectChanges();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container.childElementCount) {\r\n                container.remove();\r\n            }\r\n            this.renderer.setStyle(container, 'pointer-events', '');\r\n        }\r\n        this.totalFocus = false;\r\n        if (this.dateOpts.dateRange) {\r\n            this.beginFocus = false;\r\n            this.endFocus = false;\r\n        }\r\n\r\n        if (this.closeCalendarHandler) {\r\n            this.closeCalendarHandler();\r\n            this.closeCalendarHandler = null;\r\n        }\r\n\r\n        if (this.datePicekrService) {\r\n            this.datePicekrService.removeMouseEvent();\r\n        }\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n    }\r\n    toggleCalendar(close: boolean, emit = true) {\r\n        if (this.disabled) {\r\n            this.totalFocus = false;\r\n            if (this.dateOpts.dateRange) {\r\n                this.beginFocus = false;\r\n                this.endFocus = false;\r\n            }\r\n            return;\r\n        }\r\n        if (this.cRef === null) {\r\n            if (!this.closeCalendarHandler) {\r\n                this.closeCalendarHandler = this.renderer.listen(document, CLICK, () => this.closeSelector(CalToggle.CloseByOutClick));\r\n            }\r\n            this.totalFocus = true;\r\n            this.openCalendar();\r\n            const container = document.querySelector('.date-overlay-container');\r\n            this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n\r\n            const zindex = this.commonUtils.getFloatingLayerIndex();\r\n            this.renderer.setStyle(container, 'zIndex', zindex);\r\n        } else {\r\n            let flag = true;\r\n            const container = document.querySelector('.date-overlay-container');\r\n            if (container && this.cRef.location) {\r\n                if (container.hasChildNodes()) {\r\n                    container.childNodes.forEach(el => {\r\n                        if (el === this.cRef.location.nativeElement) {\r\n                            flag = false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (flag) {\r\n                this.renderer.setStyle(container, 'pointer-events', 'auto');\r\n                this.totalFocus = true;\r\n                this.openCalendar();\r\n            } else {\r\n                this.totalFocus = false;\r\n\r\n                if (this.dateOpts.dateRange) {\r\n                    this.beginFocus = false;\r\n                    this.endFocus = false;\r\n                }\r\n                // document.removeEventListener(CLICK, this.onClickHidden);\r\n                close && this.closeSelector(CalToggle.CloseByCalBtn);\r\n                // this.renderer.setStyle(container, 'pointer-events', '')\r\n                if (emit) {\r\n                    this.close.emit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDateChanged(event: IMyDateModel) {\r\n        this._SELECT_DATE_ = event;\r\n        let valChangeParams: any = '';\r\n        if (event.singleDate) {\r\n            this.value = event.singleDate.formatted;\r\n            this.formatedValue = event.singleDate.formatted;\r\n            const returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);\r\n            valChangeParams = { ...event.singleDate, formatted: event.singleDate.formatted, returnFormatted };\r\n\r\n            const { year, month, day, hour, minute, second } = event.singleDate.date;\r\n\r\n            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {\r\n                const nd = new Date(\r\n                    year || new Date().getFullYear(),\r\n                    month - 1,\r\n                    day || 1,\r\n                    hour || 0,\r\n                    minute || 0,\r\n                    second || 0\r\n                );\r\n\r\n                event.singleDate.jsDate = nd;\r\n            }\r\n\r\n            let { year: minYear, month: minMonth, day: minDay, hour: minHour, minute: minMinute, second: minSecond } = this.minDate;\r\n            minMonth = this.utilService.padStartZero(minMonth);\r\n            minDay = this.utilService.padStartZero(minDay);\r\n            minHour = this.utilService.padStartZero(minHour);\r\n            minMinute = this.utilService.padStartZero(minMinute);\r\n            minSecond = this.utilService.padStartZero(minSecond);\r\n\r\n            const MIN_DATE = new Date(`${minYear}-${minMonth}-${minDay} ${minHour}:${minMinute}:${minSecond}`);\r\n            if (this.minDate.year !== 1840) {\r\n                if (differenceInSeconds(MIN_DATE, event.singleDate.jsDate) > 0) {\r\n                    event.singleDate.jsDate = MIN_DATE;\r\n                    this.value = this.transform(MIN_DATE);\r\n                }\r\n            } else if (this.maxDate.year !== 10000) {\r\n                let { year: maxYear, month: maxMonth, day: maxDay, hour: maxHour, maxute: maxMinute, second: maxSecond } = this.maxDate;\r\n                maxMonth = this.utilService.padStartZero(maxMonth);\r\n                maxDay = this.utilService.padStartZero(maxDay);\r\n                maxHour = this.utilService.padStartZero(maxHour);\r\n                maxMinute = this.utilService.padStartZero(maxMinute);\r\n                maxSecond = this.utilService.padStartZero(maxSecond);\r\n\r\n                const MAX_DATE = new Date(`${maxYear}-${maxMonth}-${maxDay} ${maxHour}:${maxMinute}:${maxSecond}`);\r\n                \r\n                if (event.singleDate.date.year === 1840 || differenceInSeconds(MIN_DATE, event.singleDate.jsDate) === 0 || differenceInSeconds(MAX_DATE, event.singleDate.jsDate) < 0) {\r\n                    event.singleDate.jsDate = MAX_DATE;\r\n                    this.value = this.transform(MAX_DATE);\r\n                }\r\n            }\r\n\r\n            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);\r\n        } else if (event.dateRange) {\r\n            this.value = event.dateRange.formatted;\r\n            this.formatedValue = event.dateRange.formatted;\r\n            const returnFormatted = event.dateRange.returnFormatted;\r\n            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);\r\n            valChangeParams = { ...event.dateRange, formatted: event.dateRange.formatted, returnFormatted };\r\n            this.onNgModelChange(returnFormatted, event.dateRange);\r\n        }\r\n        this.onModelTouched();\r\n        this._valueChangeEmitted = true;\r\n        this.valueChange.emit(valChangeParams);\r\n    }\r\n\r\n    private checkMultiSelectedOption() {\r\n\r\n        if (this.multiSelect) {\r\n\r\n            this.showTime = false;\r\n            this.showType = ShowType.all;\r\n            this.dateRange = false;\r\n            this.enableDynamic = false;\r\n\r\n            // \r\n            const fmtList = ['yyyy-MM-dd', 'yyyy/MM/dd','MM/dd/yyyy','yyyyMMdd','yyyyMMdd'];\r\n            if (!fmtList.find(n => n === this.returnFormat)) {\r\n                this.returnFormat = 'yyyy-MM-dd';\r\n            }\r\n\r\n            if (!fmtList.find(n => n === this.dateFormat)) {\r\n                this.dateFormat = 'yyyy-MM-dd';\r\n            }\r\n        }\r\n    }\r\n\r\n    buildOptions() {\r\n        let dateOpts: any;\r\n        if (!this.localDateOpts) {\r\n            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);\r\n        }\r\n\r\n        if (this.showType === ShowType.noDateAndMonth) {\r\n            this.localDateOpts.dateFormat = 'yyyy';\r\n            this.localDateOpts.returnFormat = 'yyyy';\r\n        }\r\n        // \r\n        this.checkMultiSelectedOption();\r\n\r\n        const _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;\r\n\r\n        dateOpts = {\r\n            dateRange: this.dateRange,\r\n            showTime: _showTime,\r\n            showType: Number(this.showType),\r\n            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,\r\n            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,\r\n            minYear: this._minDate.year,\r\n            maxYear: this._maxDate.year,\r\n            highlightDates: this.highlightDates,\r\n            disableDates: this.disableDates,\r\n            showWeekNumbers: this.showWeekNumbers,\r\n            disableDateRanges: [\r\n                {\r\n                    begin: this.disableDateRangesBegin,\r\n                    end: this.disableDateRangesEnd\r\n                }\r\n            ],\r\n            disableUntil: this._minDate,\r\n            disableSince: this._maxDate,\r\n            disableWeekdays: this.disableWeekdays,\r\n            markDates: [\r\n                {\r\n                    dates: this.markDates,\r\n                    color: this.markDatesColor\r\n                }\r\n            ],\r\n            markWeekends: {\r\n                marked: this.isMarkWeekends,\r\n                color: this.markWeekendsColor\r\n            },\r\n            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,\r\n            shortcuts: this.shortcuts,\r\n            timeFormat: this._timeFormat,\r\n            monthRangeValue: this.monthRangeValue,\r\n            viewType: this.viewType,\r\n            enableDynamic: this.enableDynamic,\r\n            dynamicValue: this.dynamicValue,\r\n            dynamicValueChanged: (e: DynamicData) => {\r\n                this.dynamicValue = e;\r\n                this.dynamicText = e ? e.text : '';\r\n                this.dateOpts.dynamicValue = e;\r\n                this.dynamicValueChange.emit(e);\r\n                this.closeSelector();\r\n            },\r\n            previousMaxDays: this.previousMaxDays,\r\n            futureMaxDays: this.futureMaxDays,\r\n            dynamicLocale: this.localDateOpts.dynamicLocale,\r\n            mulstiDatesLocale: this.localDateOpts.mulstiDatesLocale,\r\n            showPresent: this.showPresent,\r\n            hourStep: this.hourStep,\r\n            minuteStep: this.minuteStep,\r\n            secondStep: this.secondStep,\r\n            closeSelectorOnDateSelect: !this.multiSelect,\r\n            multiSelect: this.multiSelect,\r\n            separator: this.separator,\r\n            maxSelected: this.maxSelected,\r\n            selectedOrderBy: this.selectedOrderBy\r\n        };\r\n        dateOpts.firstDayOfWeek = this.firstDayOfWeek;\r\n        switch (Number(this.showType)) {\r\n            case ShowType.noDate:\r\n                dateOpts.defaultView = DefaultView.Month;\r\n                break;\r\n            case ShowType.noDateAndMonth:\r\n                dateOpts.defaultView = DefaultView.Year;\r\n                // dateOpts.dateFormat = 'yyyy';\r\n                // dateOpts.returnFormat = 'yyyy';\r\n                // this.dateFormat = 'yyyy';\r\n                break;\r\n            case ShowType.selectWeek:\r\n                dateOpts.showWeekNumbers = true;\r\n                dateOpts.dateRange = true;\r\n                // dateOpts.firstDayOfWeek = 'mo';\r\n                break;\r\n            // default:\r\n            // this.returnType = 'String';\r\n\r\n        }\r\n        return { ...this.localDateOpts, ...dateOpts };\r\n    }\r\n\r\n    dateTo(d: any) {\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const year = d.getFullYear();\r\n        const month = d.getMonth() + 1;\r\n        const day = d.getDate();\r\n        const hour = d.getHours();\r\n        const minute = d.getMinutes();\r\n        const second = d.getSeconds();\r\n        let date: IMyDate;\r\n        if (!showTime) {\r\n            date = { year, month, day };\r\n            this.originTime = { hour, minute, second };\r\n        } else {\r\n            date = { year, month, day, hour, minute, second };\r\n        }\r\n        return this.utilService.formatDate(date, dateFormat, monthLabels);\r\n    }\r\n    //  Date \r\n    dateFrom(str: any, ignorRange = false) {\r\n        if (!str) {\r\n            return '';\r\n        }\r\n\r\n        const _this = this;\r\n\r\n        const dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;\r\n        const dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;\r\n        const returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;\r\n        const showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;\r\n        const delimeters: Array<string> = returnFormat.match(/[^(DdMmYy)]{1,}/g);\r\n        let dateValue: Array<IMyDateFormat>;\r\n        const getValue = this.utilService.getDateValue;\r\n        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {\r\n            const tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];\r\n            const tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];\r\n            let tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);\r\n            let tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);\r\n            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;\r\n            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;\r\n            return (\r\n                this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +\r\n                this.dateRangeDatesDelimiter +\r\n                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels)\r\n            );\r\n        } else {\r\n            if (this.returnType === 'Date') {\r\n                if (str && str instanceof Date) {\r\n                    return str;\r\n                }\r\n                return convert(str, getValue, this.originTime);\r\n            } else {\r\n                const tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);\r\n                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n\r\n        function convert(v, _getValue: any, originTime = { hour: 0, minute: 0, second: 0 }) {\r\n            let fmt = returnFormat;\r\n            if (_this.returnType === 'Date') {\r\n                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');\r\n            }\r\n            if (showTime) {\r\n                const date = v.split(' ')[0];\r\n                let time = v.split(' ')[1];\r\n\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n                if (time) {\r\n                    time = time.replace(/[,]/g, ':').replace(/[]/, '');\r\n                    const [h, m, s] = time.split(':');\r\n                    const hour = h;\r\n                    const minute = m;\r\n                    const second = s ? s : '';\r\n\r\n                    dateValue[3] = { value: hour, format: 'hh' };\r\n                    dateValue[4] = { value: minute, format: 'mm' };\r\n                    if (second) {\r\n                        dateValue[5] = { value: second, format: 'ss' };\r\n                    }\r\n                }\r\n            } else {\r\n                const date = v.split(' ')[0];\r\n                dateValue = _getValue(date, fmt, delimeters);\r\n            }\r\n\r\n\r\n            let year = Number(dateValue[0] ? dateValue[0].value : 1970);\r\n            const yearValue = dateValue[0];\r\n            if (yearValue.format) {\r\n                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {\r\n                    year = null;\r\n                }\r\n            }\r\n\r\n            const month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;\r\n            const day = Number(dateValue[2] ? dateValue[2].value : 1);\r\n            const _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;\r\n            const _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;\r\n            const _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;\r\n\r\n            if (!year) {\r\n                return null;\r\n            }\r\n            return new Date(year, month, day, _hour, _minute, _second);\r\n        }\r\n    }\r\n\r\n    transform(value: any, _fmt = this.dateOpts.dateFormat) {\r\n        value = value ? value : '';\r\n        const { returnFormat, dateFormat, showTime } = this.dateOpts;\r\n        let _tmpDate = null;\r\n        if (typeof value === 'string') {\r\n            _tmpDate = parse(value, returnFormat, new Date());\r\n\r\n            if (!isValid(_tmpDate)) {\r\n                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {\r\n                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;\r\n                } else {\r\n                    if (this._realValue) {\r\n                        _tmpDate =  parse(this._realValue, returnFormat, new Date());\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (value instanceof Date) {\r\n                _tmpDate = value;\r\n            }\r\n        }\r\n        let formattedVal = value;\r\n        if (isValid(_tmpDate)) {\r\n            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);\r\n            return formattedVal;\r\n        } else {\r\n            // ,,\r\n            value = value.replace(/[,]/g, '-').replace(/[]/, '');\r\n            if (value[value.length - 1] === '-') {\r\n                value = value.substr(0, value.length - 1);\r\n            }\r\n\r\n            if (isValid(new Date(value))) {\r\n                formattedVal = this.dtService.formatTo(value, _fmt);\r\n            } else {\r\n                value = '';\r\n            }\r\n        }\r\n        if (value) {\r\n            if (this.dateFrom(value, true) === '') {\r\n                const tmpDate = this.utilService.isDateValid(\r\n                    value,\r\n                    Object.assign({}, this.dateOpts, {\r\n                        dateFormat: returnFormat\r\n                    })\r\n                );\r\n                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);\r\n            }\r\n        }\r\n        return formattedVal;\r\n    }\r\n\r\n    setValue(value: string) {\r\n        if (this.value !== value) {\r\n            if (this.dateOpts.dateRange) {\r\n                const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n                const beginStr = _tmpDateArr[0];\r\n                const endStr = _tmpDateArr[1];\r\n                this._beginValue = this.transform(beginStr);\r\n                this._endValue = this.transform(endStr);\r\n                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n            } else {\r\n                if (value) {\r\n                    this.value = this.transform(value);\r\n                } else {\r\n                    this.value = '';\r\n                }\r\n            }\r\n\r\n            this.cdr.markForCheck();\r\n        }\r\n    }\r\n\r\n    updateValue(value: string) {\r\n        if (this.dateOpts.dateRange) {\r\n            const _tmpDateArr = value.split(this.dateRangeDatesDelimiter);\r\n            const beginStr = _tmpDateArr[0];\r\n            const endStr = _tmpDateArr[1];\r\n            this._beginValue = this.transform(beginStr);\r\n            this._endValue = this.transform(endStr);\r\n            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';\r\n        } else {\r\n            this.value = this.transform(value);\r\n        }\r\n    }\r\n\r\n    getValueByType(val) {\r\n        if (val instanceof Date) {\r\n            this.returnType = 'Date';\r\n            // return this.dateTo(val);\r\n            return val;\r\n        } else if (val && val instanceof Object) {\r\n            const { begin, end } = val;\r\n            const beginStr = begin instanceof Date ? this.dateTo(begin) : '';\r\n            const endStr = begin instanceof Date ? this.dateTo(end) : '';\r\n\r\n            this.returnType = 'Object';\r\n            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';\r\n        } else if (val && typeof val === 'string') {\r\n            if (val.indexOf('T') > -1) {\r\n                val = val.replace('T', ' ');\r\n            }\r\n            this.returnType = 'String';\r\n            return val;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n    \r\n    writeValue(val: any): void {\r\n        if (!this.multiSelect) {\r\n            if (typeof val === 'object' && val && !isDate(val)) {\r\n                this.dynamicValue = val;\r\n                this.dynamicText = this.utilService.formatDynamicValue(val, this.dateOpts.dynamicLocale);\r\n                this.dateOpts.showDynamicView = true;\r\n                this.dateOpts.dynamicValue = this.dynamicValue;\r\n            } else {\r\n                // this.dateOpts.showDynamicView = false;\r\n                this._realValue = val;\r\n                if (this.dateRange) {\r\n                    this._realRangeValue = val;\r\n                }\r\n\r\n                this.setValue(this.getValueByType(val));\r\n            }\r\n        } else {\r\n            if (!val) {\r\n                val = '';\r\n            }\r\n            this.value = val.split(this.separator).map(n => this.transform(n)).join(this.separator);\r\n            this._realValue = val;\r\n        }\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n    }\r\n    onPrevFocus(value: boolean): void {\r\n        this.beginFocus = true;\r\n        if (this.endFocus == true) {\r\n            this.endFocus = !this.endFocus;\r\n        }\r\n        this.PrevFocus.emit();\r\n    }\r\n    onNextFocus(value: boolean): void {\r\n        this.endFocus = true;\r\n        if (this.beginFocus == true) {\r\n            this.beginFocus = !this.beginFocus;\r\n        }\r\n        this.NextFocus.emit();\r\n    }\r\n\r\n    private _convert2dateString(val: string, realValue = false) {\r\n        if (val) {\r\n            let t = val.replace(/[,]/g, '-').replace(/[,]/g, ' ').replace(/[,,,]/g, ':').replace('', '');\r\n\r\n            if (this.showType === ShowType.noDateAndMonth && t.indexOf('-') === -1) {\r\n                t += '-';\r\n            }\r\n\r\n            // \r\n            var checkSpaceReg = /(\\s)\\1{1,}/g;\r\n            if (t.match(checkSpaceReg)) {\r\n                t.match(checkSpaceReg).forEach(n => {\r\n                    if (n[0] === ' ') {\r\n                        t = t.replace(n,  ' ');\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (realValue) {\r\n                const objDate = this.utilService.isDateValid(val, this.dateOpts, true);\r\n                if (objDate) {\r\n                    let { year, month, day, hour, minute, second} = objDate;\r\n                    if (!year) {\r\n                        year = new Date().getFullYear();\r\n                    }\r\n                    if (!month) {\r\n                        month = new Date().getMonth();\r\n                    }\r\n\r\n                    if (!day) {\r\n                        day = 1;\r\n                    }\r\n\r\n                    if (!hour) {\r\n                        hour = 0;\r\n                    }\r\n\r\n                    if (!minute) {\r\n                        minute = 0;\r\n                    }\r\n\r\n                    if (!second) {\r\n                        second = 0;\r\n                    }\r\n\r\n                    const _datePart = `${year}-${this.utilService.padStartZero(month)}-${this.utilService.padStartZero(day)}`;\r\n                    const _timePart = `${this.utilService.padStartZero(hour)}:${this.utilService.padStartZero(minute)}:${this.utilService.padStartZero(second)}`;\r\n\r\n                    return `${_datePart} ${_timePart}`;\r\n                }\r\n            }\r\n\r\n            if (t[t.length - 1] === '-') {\r\n                // t = t.substr(0, t.length - 1);\r\n                t += '01';\r\n            }\r\n\r\n            if (t[t.length - 1] === ':') {\r\n                t = t.substr(0, t.length - 1);\r\n            }\r\n\r\n            return t.replace(/^\\s+|\\s+$/g, '');\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n\r\n    private _isValid(value: any) {\r\n        value = this._convert2dateString(value);\r\n        if (value) {\r\n            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {\r\n                const _tmpDate = parse(this.value, this.dateFormat, new Date());\r\n                if (this._realValue) {\r\n                    if (this.returnType === 'Date') {\r\n                        return isValid(this._realValue);\r\n                    } else {\r\n                        return isValid(new Date(this._convert2dateString(this._realValue, true)));\r\n                        // return isValid(parse(this._realValue, this.returnFormat, new Date()));\r\n                    }\r\n                }\r\n\r\n                const d = this.utilService.isDateValid(value, this.dateOpts);\r\n                if (d) {\r\n                    if (d.year || d.month) {\r\n                        const cdate = new Date();\r\n                        const year = cdate.getFullYear();\r\n                        const str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')\r\n                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');\r\n                        return isValid(new Date(str));\r\n                    }\r\n                    return false;\r\n                }\r\n                return isValid(value);\r\n            } else {\r\n                const reg = /^\\d{1,}$/;\r\n                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { //  yyyyMMddHHmmss\r\n                    const _r =  this._isValid2(value);\r\n                    if (_r.isValided) {\r\n                        this._realValue = this.getRealReturnFormatted(_r.date);\r\n                        this.value = this.transform(_r.date);\r\n                    }\r\n                    return _r.isValided;\r\n                } else {\r\n                    const _tmpDate = parse(value, this.dateFormat, new Date());\r\n                    const d = this.utilService.isDateValid(this.value, this.dateOpts);\r\n                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _isValid2(value: string): any {\r\n        let year = 0;\r\n        let month = 0;\r\n        let day = 0;\r\n        let hour = 0;\r\n        let minute = 0;\r\n        let seconds = 0;\r\n\r\n        const df = this.dateFormat;\r\n\r\n        if (df.includes('yyyy')) {\r\n            if (value) {\r\n                year = +value.slice(0, 4);\r\n                value = value.slice(4);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('MM')) {\r\n            if (value) {\r\n                month = +value.slice(0, 2) - 1;\r\n                value = value.slice(2);\r\n\r\n                if (month < 0) {\r\n                    month = 0;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('dd')) {\r\n            if (value) {\r\n                day = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (df.includes('HH')) {\r\n            if (value) {\r\n                hour = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('mm')) {\r\n            if (value) {\r\n                minute = +value.slice(0, 2);\r\n                value = value.slice(2);\r\n            }\r\n        }\r\n        if (df.includes('ss')) {\r\n            if (value) {\r\n                seconds = +value.slice(0, 2);\r\n            }\r\n        }\r\n\r\n        const d = new Date(year, month, day, hour, minute, seconds);\r\n        return {\r\n            isValided: isValid(d),\r\n            date: d\r\n        };\r\n    }\r\n\r\n    private multiSelectedChanged() {\r\n        this.onModelChange(this._realValue);\r\n        const p = {\r\n            formatted: this.value,\r\n            returnFormatted: this._realValue,\r\n            cmpRef: this\r\n        };\r\n        this.onModelTouched();\r\n        this.closeSelector(CalToggle.CloseByDateSel);\r\n        this.valueChange.emit(p);\r\n\r\n        if (!this.value) {\r\n            this.clear.emit();\r\n        }\r\n    }\r\n\r\n    onRemoveDate(d: {value: string, index: number}) {\r\n        if (!d) {\r\n            return;\r\n        }\r\n        const {value, index} = d;\r\n        this.value = this.value.split(this.separator).filter(n => n!== value).join(this.separator);\r\n        this._realValue = this._realValue.split(this.separator).filter((n, i) => i !== index).join(this.separator);\r\n\r\n        this.multiSelectedChanged();\r\n        this.cdr.detectChanges();\r\n    }\r\n}\r\n","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-08-02 14:14:22\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:00\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    Output,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport { IMyOptions } from '../../interfaces/public-api';\r\n@Component({\r\n    selector: 'lib-selection-sidebar',\r\n    templateUrl: './selection-sidebar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SelectionSidebarComponent {\r\n    @Input() opts: IMyOptions;\r\n    @Output() setTime: EventEmitter<void> = new EventEmitter<void>();\r\n}\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'angular-datepicker',\r\n    template: ''\r\n})\r\nexport class AngularMyDatePickerComponent {}\r\n","import { EventEmitter, ChangeDetectorRef, Component, Injector, Input, OnInit, Output } from '@angular/core';\r\nimport { DynamicData, DynamicDateType } from '../../interfaces/dynamic-data-type.interface';\r\n\r\n@Component({\r\n    selector: 'lib-dynamic-view',\r\n    templateUrl: 'dynamic-view.component.html',\r\n    styleUrls: [\r\n        './dynamic-view.css'\r\n    ]\r\n})\r\n\r\nexport class DynamicViewComponent implements OnInit {\r\n    _value: string = '';\r\n\r\n    get value() {\r\n        return this._value;\r\n    }\r\n\r\n    set value(val) {\r\n        this._value = val;\r\n        this.valueChange.emit(val);\r\n    }\r\n\r\n    private _data: DynamicData = null;\r\n    @Input() set data(val: DynamicData) {\r\n        this._data = val;\r\n        this.setValue(val);\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    @Input() previousMaxDays = 30;\r\n    @Input() futureMaxDays = 30;\r\n\r\n    @Input() locale: any;\r\n\r\n    previous_dateType: DynamicDateType  = 'day';\r\n    previous_days: number = 1;\r\n\r\n    future_dateType: DynamicDateType = 'day'\r\n    future_days = 1;\r\n\r\n    present_first_dateType: DynamicDateType = 'month';\r\n    present_last_dateType: DynamicDateType = 'month';\r\n\r\n    @Output() valueChange = new EventEmitter();\r\n\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit() { }\r\n\r\n    onListItemFormControlClick($event) {\r\n        const lbl = $event.target.closest('label');\r\n        if (lbl) {\r\n            lbl.click();\r\n        }\r\n    }\r\n\r\n    setValue(val: DynamicData) {\r\n        if (val) {\r\n            this.value = val.name;\r\n            switch(this.value) {\r\n                case 'present_day': // \r\n                case 'present_month': // \r\n                case 'present_year':\r\n                    break;\r\n                case 'previou':\r\n                    this.previous_dateType = val.dateType;\r\n                    this.previous_days = val.count;\r\n                    break;\r\n                case 'future':\r\n                    this.future_dateType = val.dateType;\r\n                    this.future_days = val.count;\r\n                    break;\r\n                case 'present_first':\r\n                    this.present_first_dateType = val.dateType;\r\n                    break;\r\n                case 'present_last':\r\n                    this.present_last_dateType = val.dateType;\r\n                    break; \r\n            }\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    getValue(): DynamicData {\r\n        let val = null;\r\n        if (this.value) {\r\n            switch(this.value) {\r\n                case 'present_day': // \r\n                    val = {dateType:'day', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_month': // \r\n                    val = {dateType:'month', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_year':\r\n                    val = {dateType:'year', period:'present', count: null, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'previou':\r\n                    val = { dateType: this.previous_dateType , period:'previous', count: this.previous_days, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'future':\r\n                    val = { dateType: this.future_dateType , period:'future', count: this.future_days, isFirstDay: false, isLastDay: false};\r\n                    break;\r\n                case 'present_first':\r\n                    val = { dateType: this.present_first_dateType , period:'present', count: null, isFirstDay: true, isLastDay: false};\r\n                    break;\r\n                case 'present_last':\r\n                    val = { dateType: this.present_last_dateType , period:'present', count: null, isFirstDay: false, isLastDay: true};\r\n                    break;\r\n            }\r\n\r\n            if (val) {\r\n                val.name = this.value;\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    private getDateTypeString(dt: DynamicDateType) {\r\n        switch(dt) {\r\n            case 'week':\r\n                return this.locale.week || '';\r\n            case 'day':\r\n                return this.locale.day || '';\r\n            case 'month':\r\n                return this.locale.month || '';\r\n            case 'year':\r\n                return this.locale.year || '';\r\n        }\r\n    }\r\n\r\n    formatValue() {\r\n        const val = this.getValue();\r\n        if (val) {\r\n            let fval = '';\r\n            switch(val.name) {\r\n                case 'present_day': // \r\n                fval = this.locale.today || '';\r\n                break;\r\n            case 'present_month': // \r\n                fval = this.locale.presentMonth || '';\r\n                break;\r\n            case 'present_year':\r\n                fval = this.locale.presentYear ||'';\r\n                break;\r\n            case 'previou':\r\n                fval =  (this.locale.previous|| '') + ' ' + val.count + ' ' + this.getDateTypeString(val.dateType);\r\n                break;\r\n            case 'future':\r\n                fval = (this.locale.future || '') + ' '+ val.count + ' ' +this.getDateTypeString(val.dateType);\r\n                break;\r\n            case 'present_first':\r\n                fval = (this.locale.current||'') + this.getDateTypeString(val.dateType) + (this.locale.first||' 1 ');\r\n                break;\r\n            case 'present_last':\r\n                fval = (this.locale.current||'') + this.getDateTypeString(val.dateType) + (this.locale.last||' 1 ');\r\n                break;\r\n            }\r\n\r\n            return fval;\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n\r\n    private setDays(typ: string, days: number) {\r\n        if (typ === 'previous') {\r\n            this.previous_days = days;\r\n        } else {\r\n            this.future_days = days;\r\n        }\r\n    }\r\n\r\n    checkMaxDays($event, tye: string) {\r\n        const target = $event.target as any;\r\n        const val = target.value.replace(/[^\\d]/g,'');\r\n        const days = Number(val);\r\n        target.value = days;\r\n        const max = tye === 'previous' ? this.previousMaxDays: this.futureMaxDays; \r\n        this.setDays(tye, days);\r\n\r\n        if (days > max) {\r\n            target.value = max;\r\n            this.setDays(tye, max);\r\n            return;\r\n        } else {\r\n            if (days < 1) {\r\n                target.value = 1;\r\n                this.setDays(tye, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    onNumberKeydown($event: KeyboardEvent) {\r\n        $event.stopPropagation();\r\n        if ($event.key === '.' || $event.key === '-' || $event.key === '+') {\r\n            $event.preventDefault();\r\n        }\r\n    }\r\n}","import { Component, ElementRef, EventEmitter, HostListener, Injector, Input, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'dynamic-date-input',\r\n    templateUrl: 'dynamic-date-input.component.html'\r\n})\r\n\r\nexport class DynamicDateInputComponent implements OnInit {\r\n\r\n    @Input() readonly: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() value: string;\r\n    @Input() text: string;\r\n\r\n    @Input() isFocus: boolean;\r\n    @Input() placeholder: string;\r\n\r\n    @Input() showClear: boolean;\r\n\r\n\r\n    @Output() inputClick = new EventEmitter();\r\n    @Output() tabKeydown =  new EventEmitter();\r\n    @Output() clear =  new EventEmitter();\r\n\r\n    @ViewChild('clearIcon') clearIcon: ElementRef;\r\n    \r\n    constructor(private inject: Injector) { }\r\n\r\n    ngOnInit() { }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(event) {\r\n        if (this.value && !this.disabled && !this.readonly) {\r\n            if (this.value && this.clearIcon) {\r\n                this.clearIcon.nativeElement.style.visibility = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event'])\r\n    onMouseLeave(event) {\r\n        if (!this.disabled && this.clearIcon && !this.readonly) {\r\n            this.clearIcon.nativeElement.style.visibility = 'hidden';\r\n        }\r\n    }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { UtilService } from '../services/farris-datepicker.util.service';\r\nimport { MultiSelectedOrderBy } from '../interfaces/my-options.interface';\r\n\r\n@Component({\r\n    selector: 'multi-select-input',\r\n    templateUrl: './multi-date-input.component.html',\r\n    styles: [\r\n        `\r\n        .multi-date-display {\r\n            width: 100%;flex-wrap: wrap;align-items: center;cursor: text;\r\n        }\r\n\r\n        .multi-date-display:empty:before {\r\n            content: attr(placeholder);\r\n            color: #c4c4c4;\r\n        }\r\n\r\n        .multi-date-display-readonly {\r\n            padding-right: 5px;\r\n        }\r\n\r\n        .f-multi-select-date.f-state-disabled .search-tag-item {\r\n            background: #F1F3F7;\r\n            border: 1px solid #F1F3F7;\r\n            color:  #2D2F33;\r\n        }\r\n\r\n        .f-multi-select-date.f-state-disabled .multi--more-text {\r\n            color: #c7c7c7;\r\n        }\r\n\r\n        `\r\n    ]\r\n})\r\n\r\nexport class MultiSelectDateInputComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\r\n\r\n    @Input() dates = '';\r\n    @Input() separator = ',';\r\n    @Input() placeholder = '';\r\n    @Input() editable = true;\r\n    @Input() orderBy: MultiSelectedOrderBy = 'none';\r\n\r\n    @Output() clickHandle = new EventEmitter();\r\n    @Output() remove = new EventEmitter();\r\n\r\n    @ViewChild('searchbox2') shadowBox: ElementRef;\r\n    @ViewChild('searchbox') container: ElementRef;\r\n\r\n    _dateItems = [];\r\n\r\n    hiddenItemsCount$ = new BehaviorSubject(0);\r\n    commonUtils = null;\r\n\r\n    constructor(private injector: Injector, private render: Renderer2, private el: ElementRef, public overLayService: OverLayHiddenService, protected cd: ChangeDetectorRef,\r\n        private utilService: UtilService) {\r\n        this.commonUtils = this.injector.get(CommonUtils, null);\r\n    }\r\n\r\n    ngOnInit() {\r\n        \r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.overLayService) {\r\n            this.overLayService.destory(this.shadowBox.nativeElement);\r\n        }\r\n        if (this.shadowBox) {\r\n            this.shadowBox.nativeElement.remove();\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.dates && !changes.dates.isFirstChange()) {\r\n            this.initDateItems();\r\n        }\r\n    }\r\n\r\n    private initDateItems() {\r\n        const _dateItems = this.dates.split(this.separator).filter(n => n);\r\n        this._dateItems = this.utilService.orderSelectedDates(_dateItems, this.orderBy);\r\n\r\n        setTimeout(() => {\r\n            this.setHiddenCount();\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n\r\n        this.initDateItems();\r\n\r\n        setTimeout(() => {\r\n            this.moveShadowToBody();\r\n        });\r\n    }\r\n\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.toggleShadowBox($event, false);\r\n        this.clickHandle.emit($event);\r\n    }\r\n\r\n    onRemove($event: MouseEvent, txt, index) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.remove.emit({index, value: txt});\r\n    }\r\n\r\n    \r\n    onResized($event) {\r\n        this.updateShadowBoxPosition($event);\r\n        setTimeout(() => {\r\n            this.setHiddenCount();\r\n            this.cd.detectChanges();\r\n        });\r\n    }\r\n\r\n\r\n    private setHiddenCount() {\r\n        let len = 0;\r\n        if (!this._dateItems || !this._dateItems.length) {\r\n            this.hiddenItemsCount$.next(len);\r\n            return;\r\n        }\r\n        const items = Array.from(this.container.nativeElement.querySelectorAll('span.search-tag-item'));\r\n        if (items && items.length) {\r\n            len = items.map((n: any) => {\r\n                return n.offsetTop;\r\n            }).filter(n => n > 20).length\r\n        }\r\n        this.hiddenItemsCount$.next(len);\r\n    }\r\n\r\n    \r\n    updateShadowBoxPosition({top, left, width} = {top: null, left: null, width: null}) {\r\n        if (!top && !left && !width) {\r\n            const e = this.el.nativeElement.getBoundingClientRect();\r\n            top = e.top;\r\n            left = e.left;\r\n            width = e.width;\r\n        }\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'left', left + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'top', top + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'width', width + 'px');\r\n\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'zIndex', this.commonUtils.getFloatingLayerIndex());\r\n    }\r\n\r\n    private moveShadowToBody() {\r\n        this.updateShadowBoxPosition();\r\n        document.body.append(this.shadowBox.nativeElement);\r\n\r\n        this.overLayService.registerMouseEvent(this.shadowBox.nativeElement, (e) => {\r\n            if (e.target && e.target.className.indexOf('search-box_delete-keys') > -1) {\r\n                return;\r\n            }\r\n\r\n            if (!this.shadowBox || this.shadowBox.nativeElement.contains(e.target)) {\r\n                return;\r\n            }\r\n\r\n            this.toggleShadowBox(null, false);\r\n        });\r\n\r\n    }\r\n\r\n    toggleShadowBox($event, show = true) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        if (!this.hiddenItemsCount$.value) {\r\n            show = false;\r\n        }\r\n        if (show) {\r\n            this.updateShadowBoxPosition();\r\n            this.render.removeStyle(this.shadowBox.nativeElement, 'display');\r\n            this.container.nativeElement.style.visibility = 'hidden';\r\n        } else {\r\n            this.container.nativeElement.style.visibility = 'visible';\r\n            this.render.setStyle(this.shadowBox.nativeElement, 'display', 'none');\r\n        }\r\n    }\r\n}","/*\r\n * @Author: (Lucas Huang)\r\n * @Date: 2019-09-04 07:39:58\r\n * @LastEditors: (Lucas Huang)\r\n * @LastEditTime: 2019-09-04 15:03:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component,\r\n    EventEmitter,\r\n    Input,\r\n    OnChanges,\r\n    Output,\r\n    ViewEncapsulation,\r\n    SimpleChanges\r\n} from '@angular/core';\r\nimport { UtilService } from '../../services/public-api';\r\nimport {\r\n    IMyOptions,\r\n    IMyCalendarDay,\r\n    IMyDate,\r\n    IMyDateRange,\r\n    IMyWeek\r\n} from '../../interfaces/public-api';\r\nimport { MonthId, KeyCode } from '../../enums/public-api';\r\nimport {\r\n    OPTS,\r\n    DATES,\r\n    WEEK_DAYS,\r\n    SELECTED_DATE,\r\n    SELECTED_DATE_RANGE\r\n} from '../../constants/constants';\r\n\r\n// import { IMyWeek } from '../../interfaces/my-month-row.interface'\r\n\r\n@Component({\r\n    selector: 'lib-multi-day-view',\r\n    templateUrl: './multi-day-view.component.html',\r\n    providers: [UtilService],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class MultiDayViewComponent implements OnChanges {\r\n    @Input() opts: IMyOptions;\r\n    @Input() dates: Array<IMyWeek>;\r\n    @Input() weekDays: Array<string>;\r\n    @Input() selectedDate: IMyDate;\r\n    @Input() selectedDateRange: IMyDateRange;\r\n    @Input() selectedWeek: IMyWeek;\r\n\r\n    @Input() selectedDates: IMyDate[] = [];\r\n\r\n    @Output() dayCellClicked: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() dayCellKeyDown: EventEmitter<IMyCalendarDay> = new EventEmitter<\r\n        IMyCalendarDay\r\n    >();\r\n    @Output() weekClicked: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() onMouseEnter: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() onMouseLeave: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    prevMonthId: number = MonthId.prev;\r\n    currMonthId: number = MonthId.curr;\r\n    nextMonthId: number = MonthId.next;\r\n\r\n    constructor(private utilService: UtilService) {}\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.hasOwnProperty(OPTS)) {\r\n            this.opts = changes[OPTS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(DATES)) {\r\n            this.dates = changes[DATES].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(WEEK_DAYS)) {\r\n            this.weekDays = changes[WEEK_DAYS].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE)) {\r\n            this.selectedDate = changes[SELECTED_DATE].currentValue;\r\n        }\r\n        if (changes.hasOwnProperty(SELECTED_DATE_RANGE)) {\r\n            this.selectedDateRange = changes[SELECTED_DATE_RANGE].currentValue;\r\n        }\r\n    }\r\n\r\n    onDayCellClicked(event: any, cell: IMyCalendarDay): void {\r\n        if (cell.disabled || this.opts.showType === 4) {\r\n            return;\r\n        }\r\n        event.stopPropagation();\r\n        this.dayCellClicked.emit(cell);\r\n    }\r\n\r\n    onDayCellKeyDown(event: KeyboardEvent, cell: IMyCalendarDay) {\r\n        const keyCode: number = this.utilService.getKeyCodeFromEvent(event);\r\n        if (keyCode !== KeyCode.tab) {\r\n            event.preventDefault();\r\n\r\n            if (keyCode === KeyCode.enter || keyCode === KeyCode.space) {\r\n                this.onDayCellClicked(event, cell);\r\n            } else if (this.opts.moveFocusByArrowKeys) {\r\n                this.dayCellKeyDown.emit(cell);\r\n            }\r\n        }\r\n    }\r\n    onWeekClicked(event: KeyboardEvent, week: IMyWeek) {\r\n        if (this.opts.showType !== 4) { return; }\r\n        event.stopPropagation();\r\n        this.weekClicked.emit(week);\r\n    }\r\n\r\n    onDayCellMouseEnter(cell: any): void {\r\n        if (\r\n            this.utilService.isInitializedDate(this.selectedDateRange.begin) &&\r\n            (!this.utilService.isInitializedDate(this.selectedDateRange.end) ||\r\n                JSON.stringify(this.selectedDateRange.begin) === JSON.stringify(this.selectedDateRange.end))\r\n        ) {\r\n            for (const w of this.dates) {\r\n                for (const day of w.week) {\r\n                    day.range =\r\n                        (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin,day.dateObj) && this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||\r\n                        (this.utilService.isDateSameOrEarlier(day.dateObj,this.selectedDateRange.begin) && this.utilService.isDateSameOrEarlier(cell.dateObj,day.dateObj));\r\n                }\r\n            }\r\n            this.onMouseEnter.emit(cell);\r\n        }\r\n    }\r\n\r\n    onDayCellMouseLeave(): void {\r\n        for (const w of this.dates) {\r\n            for (const day of w.week) {\r\n                day.range = false;\r\n            }\r\n        }\r\n        this.onMouseLeave.emit();\r\n    }\r\n\r\n    isDateInRange(date: IMyDate): boolean {\r\n        return this.utilService.isDateInRange(date, this.selectedDateRange);\r\n    }\r\n\r\n    isDateSame(date: IMyDate): boolean {\r\n        return this.utilService.isDateSame(\r\n            {\r\n                year: this.selectedDate.year,\r\n                month: this.selectedDate.month,\r\n                day: this.selectedDate.day\r\n            },\r\n            date\r\n        );\r\n    }\r\n\r\n    isDateRangeBeginOrEndSame(date: IMyDate): boolean {\r\n        const selectedDateRange = {\r\n            begin: {\r\n                year: this.selectedDateRange.begin.year,\r\n                month: this.selectedDateRange.begin.month,\r\n                day: this.selectedDateRange.begin.day\r\n            },\r\n            end: {\r\n                year: this.selectedDateRange.end.year,\r\n                month: this.selectedDateRange.end.month,\r\n                day: this.selectedDateRange.end.day\r\n            }\r\n        };\r\n        return this.utilService.isDateRangeBeginOrEndSame(\r\n            selectedDateRange,\r\n            date\r\n        );\r\n    }\r\n\r\n    isDateSelected(date: IMyDate): boolean {\r\n        return !!this.selectedDates.find(n => this.utilService.isDateSame(n, date));\r\n    }\r\n}\r\n","import { Component, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { sortBy } from 'lodash-es';\r\n@Component({\r\n    selector: 'multi-days',\r\n    template: `\r\n        <div class=\"d-flex mb-2 f-datepicker-multi-selectdays-header\">\r\n            <span style=\"font-size: 14px;\" class=\"ml-3\">{{ locales?.selected.split(',')[0] || ''}} <span style=\"font-weight: bold;font-size: 17px;\">{{selectedDates.length}}</span> {{locales?.selected.split(',')[1] ||''}}</span>\r\n            <span class=\"f-datepicker-multi-selectdays-clear\" (click)=\"onClear($event)\">{{ locales?.clearSelections || ''}}</span>\r\n        </div>\r\n        <div #selecteditems style=\"height: 230px;overflow-y: auto;\" class=\"ml-3 multi-date-select win11Scroll nobtn\" (wheel)=\"$event.stopPropagation()\">\r\n            <ul [style.width.px]=\"167\">\r\n                <li class=\"d-flex align-items-center f-datepicker-multi-selectdays\" *ngFor=\"let d of selectedDates\" (click)=\"onSelectDateClick($event, d)\">\r\n                    {{d.value}} <span class=\"f-icon f-icon-close remove\" title=\"{{ locales?.delete || ''}}\" (click)=\"onRemove($event, d)\"></span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        .f-datepicker-multi-selectdays-header{\r\n            height: 41px;border-bottom: 1px solid #E4E7EF;line-height: 40px;justify-content: space-between;\r\n        }\r\n\r\n        .f-datepicker-multi-selectdays {\r\n            justify-content: space-between;color: #2D2F33;height: 30px;padding: 0 5px;border-radius: 6px;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .f-datepicker-multi-selectdays:hover {\r\n            background: #F7F8FB;\r\n        }\r\n\r\n        .f-datepicker-multi-selectdays .remove {\r\n            font-size: 12px;color: #C7CFDD;cursor: pointer;\r\n        }\r\n\r\n        .f-datepicker-multi-selectdays .remove:hover {\r\n            color: #5f96f5;\r\n        }\r\n\r\n        .f-datepicker-multi-selectdays-clear {\r\n            font-size: 13px;margin-right: 10px; color: #CCD1DD; cursor: pointer;\r\n        }\r\n        .f-datepicker-multi-selectdays-clear:hover {\r\n            color: #5f96f5;\r\n        }\r\n\r\n        .mr14 {\r\n            margin-right: 14px;\r\n        }\r\n        `\r\n    ]\r\n})\r\n\r\nexport class MultiSelectedDaysComponent implements OnInit, OnChanges {\r\n\r\n    @Input() locales: any = {};\r\n\r\n    @Input() selectedDates = [];\r\n    @Output() removed = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n    @Output() clicked = new EventEmitter();\r\n\r\n\r\n    @ViewChild('selecteditems') selecteditemsEl: ElementRef;\r\n\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n    }\r\n\r\n    onRemove($event: MouseEvent, item) {\r\n        $event.stopPropagation();\r\n        this.removed.emit(item);\r\n    }\r\n\r\n    onClear($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.clear.emit();\r\n    }\r\n\r\n    onSelectDateClick($event, item) {\r\n        $event.stopPropagation();\r\n        this.clicked.emit(item);\r\n    }\r\n}","import { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\nimport { SelectionBarComponent } from './components/selection-bar/selection-bar.component';\r\nimport { DayViewComponent } from './components/day-view/day-view.component';\r\nimport { MonthViewComponent } from './components/month-view/month-view.component';\r\nimport { YearViewComponent } from './components/year-view/year-view.component';\r\n\r\nimport { FarrisDatePickerDirective } from './farris-datepicker.input';\r\nimport { FarrisDatepickerComponent } from './farris-datepicker.component';\r\nimport { SelectionSidebarComponent } from './components/selection-sidebar/selection-sidebar.component';\r\nimport { AngularMyDatePickerComponent } from './AngularMyDatePicker.component';\r\n\r\nimport { TimePickerModule } from '@farris/ui-time-picker';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { PopoverModule } from '@farris/ui-popover';\r\nimport { DateHelperModule } from '@farris/ui-common/date';\r\nimport { NotifyModule  } from '@farris/ui-notify';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\n\r\nimport { DynamicViewComponent } from './components/dynamic-view/dynamic-view.component';\r\nimport { DynamicDateInputComponent } from './dynamic-date-input/dynamic-date-input.component';\r\nimport { MultiSelectDateInputComponent } from './multi-date-input/multi-date-input.component';\r\nimport { MultiDayViewComponent } from './components/multi-day-view/multi-day-view.component';\r\nimport { MultiSelectedDaysComponent } from './components/multi-day-view/multi-days.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule, \r\n        TimePickerModule,\r\n        LocaleModule,\r\n        FarrisCommonModule,\r\n        PopoverModule.forRoot(),\r\n        DateHelperModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n        FarrisFormsModule\r\n    ],\r\n    declarations: [\r\n        CalendarComponent,\r\n        SelectionSidebarComponent,\r\n        SelectionBarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective,\r\n        AngularMyDatePickerComponent,\r\n        DynamicViewComponent,\r\n        DynamicDateInputComponent,\r\n        MultiSelectDateInputComponent,\r\n        MultiDayViewComponent,\r\n        MultiSelectedDaysComponent\r\n    ],\r\n    entryComponents: [CalendarComponent],\r\n    exports: [\r\n        CalendarComponent,\r\n        SelectionBarComponent,\r\n        SelectionSidebarComponent,\r\n        DayViewComponent,\r\n        MonthViewComponent,\r\n        YearViewComponent,\r\n        FarrisDatepickerComponent,\r\n        FarrisDatePickerDirective,\r\n        DynamicViewComponent,\r\n        DynamicDateInputComponent,\r\n        MultiSelectDateInputComponent,\r\n        MultiDayViewComponent,\r\n        MultiSelectedDaysComponent\r\n    ]\r\n})\r\nexport class FarrisDatePickerModule {}\r\n"]}