/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, ViewEncapsulation, ViewChild, Renderer2, ChangeDetectorRef, HostBinding, Output, EventEmitter } from '@angular/core';
import { UtilService } from '../../services/public-api';
import { DefaultView, KeyCode, MonthId, ResetDateType } from '../../enums/public-api';
import { DOT, UNDER_LINE, D, M, Y, DATE_ROW_COUNT, DATE_COL_COUNT, MONTH_ROW_COUNT, MONTH_COL_COUNT, YEAR_ROW_COUNT, YEAR_COL_COUNT, SU, MO, TU, WE, TH, FR, SA, EMPTY_STR } from '../../constants/constants';
import { TimePickerPanelComponent } from '@farris/ui-time-picker';
import { flatten } from 'lodash-es';
import { ViewType } from '../../interfaces/my-options.interface';
var CalendarComponent = /** @class */ (function () {
    function CalendarComponent(renderer, cdr, utilService) {
        var _this = this;
        this.renderer = renderer;
        this.cdr = cdr;
        this.utilService = utilService;
        this.position = 'static';
        this.dynamicViewShow = new EventEmitter();
        this.dateHlp = null;
        this.visibleMonth = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.visibleMonth_range = { monthTxt: EMPTY_STR, monthNbr: 0, year: 0, yearTxt: EMPTY_STR };
        this.selectedMonth = { monthNbr: 0, year: 0 };
        this.selectedMonth_range = { monthNbr: 0, year: 0 };
        this.selectedDate = { year: 0, month: 0, day: 0 };
        this.selectedDateRange = { begin: { year: 0, month: 0, day: 0 }, end: { year: 0, month: 0, day: 0 } };
        this.selectedWeek = { weekNbr: 0, year: 0 };
        this.weekDays = [];
        this.dates = [];
        this.dates_range = [];
        this.months = [];
        this.months_range = [];
        this.years = [];
        this.years_range = [];
        this.multiSelect = false;
        this.dayIdx = 0;
        this.weekDayOpts = [SU, MO, TU, WE, TH, FR, SA];
        this.selectMonth = false;
        this.selectMonth_range = false;
        this.selectYear = false;
        this.selectYear_range = false;
        this.selectTime = false;
        this.selectorPos = null;
        this.scrollDiff = 0;
        this.prevViewDisabled = false;
        this.nextViewDisabled = false;
        this.prevDobViewDisabled = false;
        this.nextDobViewDisabled = false;
        this.prevViewDisabled_range = false;
        this.nextViewDisabled_range = false;
        this.prevDobViewDisabled_range = false;
        this.nextDobViewDisabled_range = false;
        /**
         * 多选
         */
        this.selectedDates = [];
        // 禁用日期时间控件中的时间段的小时
        this.disabledHours = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes = (/**
         * @param {?} hour
         * @return {?}
         */
        function (hour) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        function (hour, minute) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.begin : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
        this.disabledHours2 = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.end : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledHours(min, max, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的分钟
        this.disabledMinutes2 = (/**
         * @param {?} hour
         * @return {?}
         */
        function (hour) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.end : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledMinutes(min, max, hour, currentDate);
            return res;
        });
        // 禁用日期时间控件中的时间段的秒
        this.disabledSeconds2 = (/**
         * @param {?} hour
         * @param {?} minute
         * @return {?}
         */
        function (hour, minute) {
            /** @type {?} */
            var min = _this.opts.disableUntil;
            /** @type {?} */
            var max = _this.opts.disableSince;
            /** @type {?} */
            var currentDate = _this.opts.dateRange ? _this.selectedDateRange.end : _this.selectedDate;
            /** @type {?} */
            var res = _this.utilService.disabledSeconds(min, max, hour, minute, currentDate);
            return res;
        });
        this.btnDynamicDisabled = true;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getTimeStr = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        /** @type {?} */
        var hour = this.utilService.preZero(date.getHours());
        /** @type {?} */
        var minute = this.utilService.preZero(date.getMinutes());
        /** @type {?} */
        var second = this.utilService.preZero(date.getSeconds());
        return hour + ":" + minute + ":" + second;
    };
    /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    CalendarComponent.prototype.initialize = /**
     * @param {?} opts
     * @param {?} defaultMonth
     * @param {?} selectorPos
     * @param {?} inputValue
     * @param {?} dc
     * @param {?} cvc
     * @param {?} rds
     * @param {?} cbe
     * @return {?}
     */
    function (opts, defaultMonth, selectorPos, inputValue, dc, cvc, rds, cbe) {
        var _this = this;
        this.opts = opts;
        this.selectorPos = selectorPos;
        this.weekDays.length = 0;
        var _a = this.opts, defaultView = _a.defaultView, dateRange = _a.dateRange, firstDayOfWeek = _a.firstDayOfWeek, dayLabels = _a.dayLabels, stylesData = _a.stylesData, yearTxt = _a.yearTxt, multiSelect = _a.multiSelect, separator = _a.separator, selectedOrderBy = _a.selectedOrderBy;
        this.visibleMonth.yearTxt = yearTxt;
        this.visibleMonth_range.yearTxt = yearTxt;
        this.multiSelect = multiSelect;
        // if (stylesData.styles.length) {
        //     const styleElTemp: any = this.renderer.createElement(STYLE);
        //     this.renderer.appendChild(styleElTemp, this.renderer.createText(stylesData.styles));
        //     this.renderer.appendChild(this.styleEl.nativeElement, styleElTemp);
        // }
        this.dayIdx = this.weekDayOpts.indexOf(firstDayOfWeek);
        if (this.dayIdx !== -1) {
            /** @type {?} */
            var idx = this.dayIdx;
            // tslint:disable-next-line:prefer-for-of
            for (var i = 0; i < this.weekDayOpts.length; i++) {
                this.weekDays.push(dayLabels[this.weekDayOpts[idx]]);
                idx = this.weekDayOpts[idx] === SA ? 0 : idx + 1;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var isInDisableRange = this.utilService.isDisabledDate(today, this.opts);
        today = !isInDisableRange ? today : this.utilService.getNearDate(today, this.opts.disableUntil, this.opts.disableSince);
        switch (defaultView) {
            case DefaultView.Month:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 1 };
                break;
            case DefaultView.Year:
                this.selectedMonth = { monthNbr: 0, year: today.year };
                this.selectedMonth_range = { monthNbr: 0, year: today.year + 10 };
                break;
            default:
                this.selectedMonth = { monthNbr: today.month, year: today.year };
                if (today.month >= 12) {
                    this.selectedMonth_range = { monthNbr: 1, year: today.year + 1 };
                }
                else {
                    this.selectedMonth_range = { monthNbr: today.month + this.opts.monthRangeValue, year: today.year };
                }
                break;
        }
        if (defaultMonth && defaultMonth.length) {
            this.selectedMonth = this.utilService.parseDefaultMonth(defaultMonth);
            this.selectedMonth_range = this.utilService.parseDefaultMonth(defaultMonth);
            if (this.selectedMonth_range.monthNbr >= 12) {
                this.selectedMonth_range.year++;
                this.selectedMonth_range.monthNbr = 1;
            }
            else {
                this.selectedMonth_range.monthNbr = this.selectedMonth_range.monthNbr + this.opts.monthRangeValue;
            }
        }
        // 日期多选
        if (this.multiSelect && inputValue) {
            this.selectedDates = inputValue.split(separator).map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_this.opts.returnFormat === 'yyyyMMdd') {
                    if (n.length > 8) {
                        n = _this.dateHlp.formatTo(n, _this.opts.returnFormat);
                    }
                }
                /** @type {?} */
                var _dObj = _this.utilService.isDateValid(n, _this.opts, true);
                return tslib_1.__assign({}, _dObj, { value: _this.utilService.formatDate(_dObj, _this.opts.dateFormat, _this.opts.monthLabels) });
            }));
            this.selectedDates = this.utilService.orderSelectedDates(this.selectedDates, selectedOrderBy);
        }
        else {
            if (!dateRange) {
                // Single date mode
                /** @type {?} */
                var date = this.utilService.isDateValid(inputValue, this.opts, true);
                if (this.utilService.isInitializedDate(date)) {
                    this.selectedDate = date;
                    /** @type {?} */
                    var hour = this.utilService.preZero(date.hour);
                    /** @type {?} */
                    var minute = this.utilService.preZero(date.minute);
                    /** @type {?} */
                    var second = this.utilService.preZero(date.second);
                    this.timeVlaue = hour + ":" + minute + ":" + second;
                    this.selectedMonth = { monthNbr: date.month, year: date.year };
                }
            }
            else {
                // Date range mode
                var _b = this.utilService.isDateValidDateRange(inputValue, this.opts), begin = _b.begin, end = _b.end;
                if (this.utilService.isInitializedDate(begin) && this.utilService.isInitializedDate(end)) {
                    this.selectedDateRange = { begin: begin, end: end };
                    /** @type {?} */
                    var hour = this.utilService.preZero(begin.hour);
                    /** @type {?} */
                    var minute = this.utilService.preZero(begin.minute);
                    /** @type {?} */
                    var second = this.utilService.preZero(begin.second);
                    this.timeVlaue = hour + ":" + minute + ":" + second;
                    /** @type {?} */
                    var _hour = this.utilService.preZero(end.hour);
                    /** @type {?} */
                    var _minute = this.utilService.preZero(end.minute);
                    /** @type {?} */
                    var _second = this.utilService.preZero(end.second);
                    this.timeVlaue_range = _hour + ":" + _minute + ":" + _second;
                    this.selectedMonth = { monthNbr: begin.month, year: begin.year };
                    if (begin.month === end.month && begin.year === end.year) {
                        if (end.month >= 12) {
                            this.selectedMonth_range = { monthNbr: 1, year: end.year + 1 };
                        }
                        else {
                            /** @type {?} */
                            var endyear = end.year;
                            if (defaultView === DefaultView.Month) {
                                endyear = endyear + 1;
                            }
                            this.selectedMonth_range = { monthNbr: end.month + this.opts.monthRangeValue, year: endyear };
                        }
                    }
                    else {
                        if (defaultView === DefaultView.Month && begin.year === end.year) {
                            this.selectedMonth_range = { monthNbr: end.month, year: end.year + 1 };
                        }
                        else {
                            this.selectedMonth_range = { monthNbr: end.month, year: end.year };
                        }
                    }
                    // tfs 579358
                    // let endDayWeekNbr = this.utilService.getWeekNumber(end);
                    // if (this.opts.firstDayOfWeek === 'su') {
                    //     endDayWeekNbr -= 1;
                    // }
                    // const weekNbr = this.utilService.getWeekNumber(begin) === endDayWeekNbr ? this.utilService.getWeekNumber(begin): 0;
                    /** @type {?} */
                    var dateObj = this.opts.firstDayOfWeek == 'su' ? end : begin;
                    /** @type {?} */
                    var weekNbr = this.utilService.getWeekNumber(dateObj);
                    this.selectedWeek = { weekNbr: weekNbr, year: begin.year };
                }
            }
        }
        this.dateChanged = dc;
        this.calendarViewChanged = cvc;
        this.rangeDateSelection = rds;
        this.closedByEsc = cbe;
        this.setCalendarVisibleMonth();
        if (defaultView === DefaultView.Month) {
            this.onMonthViewBtnClicked();
            if (dateRange) {
                this.onMonthViewBtnClicked(true);
            }
        }
        else if (defaultView === DefaultView.Year) {
            this.onYearViewBtnClicked();
            if (dateRange) {
                this.onYearViewBtnClicked(true);
            }
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    CalendarComponent.prototype.resetDateValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === ResetDateType.singleDate || value === ResetDateType.both) {
            this.selectedDate = this.utilService.resetDate();
        }
        if (value === ResetDateType.dateRange || value === ResetDateType.both) {
            this.selectedDateRange.begin = this.utilService.resetDate();
            this.selectedDateRange.end = this.utilService.resetDate();
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.resetMonthYearSelect = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        if (!isSecondCalendar) {
            this.selectMonth = false;
            this.selectYear = false;
        }
        else {
            this.selectMonth_range = false;
            this.selectYear_range = false;
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.selectMonth = !this.selectMonth;
            this.selectYear = false;
            if (this.selectMonth) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth.year = this.selectedMonth.year;
            }
        }
        else {
            this.selectMonth_range = !this.selectMonth_range;
            this.selectYear_range = false;
            if (this.selectMonth_range) {
                this.generateMonths(isSecondCalendar);
            }
            else {
                this.visibleMonth_range.year = this.selectedMonth_range.year;
            }
            this.cdr.detectChanges();
        }
    };
    /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellClicked = /**
     * @param {?} cell
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var mc = cell.nbr !== monthNbr;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[cell.nbr],
                monthNbr: cell.nbr,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 2) {
                this.toSelectMonth(this.visibleMonth_range);
            }
            else {
                this.generateCalendar(cell.nbr, year, mc, isSecondCalendar);
                this.selectMonth_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, MONTH_ROW_COUNT, MONTH_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(M, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearViewBtnClicked = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        this.selectTime = false;
        if (!isSecondCalendar) {
            this.visibleMonth.year = this.selectedMonth.year;
            if (!this.selectYear) {
                this.generateYears(this.visibleMonth.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth.monthNbr, this.visibleMonth.year, false, isSecondCalendar);
            }
            this.selectYear = this.opts.showType === 3 ? true : !this.selectYear;
            if (this.opts.showType === 2) {
                this.selectMonth = !this.selectMonth;
            }
            else {
                this.selectMonth = false;
            }
            // this.selectYear = !this.selectYear;
            // this.selectMonth = false;
        }
        else {
            this.visibleMonth_range.year = this.selectedMonth_range.year;
            if (!this.selectYear_range) {
                this.generateYears(this.visibleMonth_range.year, isSecondCalendar);
            }
            else {
                this.generateCalendar(this.visibleMonth_range.monthNbr, this.visibleMonth_range.year, false, isSecondCalendar);
            }
            this.selectYear_range = this.opts.showType === 3 ? true : !this.selectYear_range;
            if (this.opts.showType === 2) {
                this.selectMonth_range = !this.selectMonth_range;
            }
            else {
                this.selectMonth_range = false;
            }
        }
        this.cdr.detectChanges();
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr, monthTxt = _a.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth = { monthTxt: monthTxt, monthNbr: monthNbr, year: cell.year, yearTxt: this.opts.yearTxt };
            this.selectedMonth.year = this.visibleMonth.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear = false;
                this.selectMonth = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear = false;
            }
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr, monthTxt = _b.monthTxt;
            /** @type {?} */
            var yc = cell.year !== year;
            this.visibleMonth_range = {
                monthTxt: monthTxt,
                monthNbr: monthNbr,
                year: cell.year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth_range.year = this.visibleMonth_range.year;
            if (this.opts.showType === 3) {
                this.toSelectYear({ year: this.visibleMonth_range.year });
            }
            else if (this.opts.showType === 2) {
                this.generateMonths(isSecondCalendar);
                this.selectYear_range = false;
                this.selectMonth_range = true;
            }
            else {
                this.generateCalendar(monthNbr, cell.year, yc, isSecondCalendar);
                this.selectYear_range = false;
            }
        }
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, YEAR_ROW_COUNT, YEAR_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(Y, targetRow, targetCol);
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateMonths = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        /** @type {?} */
        var today = this.getToday();
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        // tslint:disable-next-line:one-variable-per-declaration
        /** @type {?} */
        var year;
        /** @type {?} */
        var monthNbr;
        if (!isSecondCalendar) {
            this.months.length = 0;
            year = this.visibleMonth.year;
            monthNbr = this.visibleMonth.monthNbr;
        }
        else {
            this.months_range.length = 0;
            year = this.visibleMonth_range.year;
            monthNbr = this.visibleMonth_range.monthNbr;
        }
        for (var i = 1; i <= 12; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({ year: year, month: j, day: this.daysInMonth(j, year) }, disableUntil) || this.utilService.isMonthDisabledByDisableSince({ year: year, month: j, day: 1 }, disableSince);
                row.push({
                    nbr: j,
                    name: this.opts.monthLabels[j],
                    currMonth: j === today.month && year === today.year,
                    disabled: disabled,
                    monthObj: { year: year, month: j }
                });
            }
            if (!isSecondCalendar) {
                this.months.push({ row: row, year: year });
            }
            else {
                this.months_range.push({ row: row, year: year });
            }
        }
        this.setMonthViewHeaderBtnDisabledState(year, isSecondCalendar);
        this.generateCalendar(isSecondCalendar ? this.visibleMonth_range.monthNbr : this.visibleMonth.monthNbr, year, false, isSecondCalendar);
    };
    /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateYears = /**
     * @param {?} inputYear
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (inputYear, isSecondCalendar) {
        var _a = this.opts, minYear = _a.minYear, maxYear = _a.maxYear, disableUntil = _a.disableUntil, disableSince = _a.disableSince;
        /** @type {?} */
        var y = inputYear - (inputYear % 10);
        var _b = this.visibleMonth, year = _b.year, monthNbr = _b.monthNbr;
        if (!isSecondCalendar) {
            this.years.length = 0;
        }
        else {
            if (!this.years_range.length && ((this.years && this.years.length) && y < this.years[3][2].year && y > this.years[0][0].year) && this.opts.showType === 3) {
                y += 10;
            }
            this.years_range.length = 0;
            /** @type {?} */
            var allYears = flatten(this.years_range);
            if (allYears.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.year == inputYear; })) > -1) {
                y = this.years_range[3][2].year;
            }
        }
        /** @type {?} */
        var today = this.getToday();
        for (var i = y - 1; i < y + 10; i += 3) {
            /** @type {?} */
            var row = [];
            for (var j = i; j < i + 3; j++) {
                /** @type {?} */
                var disabled = this.utilService.isMonthDisabledByDisableUntil({
                    year: j,
                    month: monthNbr,
                    day: this.daysInMonth(monthNbr, j)
                }, disableUntil) ||
                    this.utilService.isMonthDisabledByDisableSince({ year: j, month: monthNbr, day: 1 }, disableSince);
                /** @type {?} */
                var minMax = j < minYear || j > maxYear;
                row.push({
                    year: j,
                    currYear: j === today.year,
                    selected: j === year,
                    disabled: disabled || minMax,
                    yearObj: { year: j }
                });
            }
            if (!isSecondCalendar) {
                this.years.push(row);
            }
            else {
                this.years_range.push(row);
            }
        }
        if (!isSecondCalendar) {
            this.setYearViewHeaderBtnDisabledState(this.years[0][1].year, this.years[3][1].year, isSecondCalendar);
        }
        else {
            this.setYearViewHeaderBtnDisabledState(this.years_range[0][1].year, this.years_range[3][1].year, isSecondCalendar);
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.setCalendarVisibleMonth = /**
     * @return {?}
     */
    function () {
        // Sets visible month of calendar
        var _a = this.selectedMonth, year = _a.year, monthNbr = _a.monthNbr;
        this.visibleMonth = {
            monthTxt: this.opts.monthLabels[monthNbr],
            monthNbr: monthNbr,
            year: year,
            yearTxt: this.opts.yearTxt
        };
        // Create current month
        if (this.opts.dateRange) {
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[this.selectedMonth_range.monthNbr],
                monthNbr: this.selectedMonth_range.monthNbr,
                year: this.selectedMonth_range.year,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(this.selectedMonth_range.monthNbr, this.selectedMonth_range.year, true, true);
        }
        this.generateCalendar(monthNbr, year, true, false);
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onPrevNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year - 10, isSecondCalendar);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, false);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year--;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year--;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year - 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onNextNavigateBtnClicked = /**
     * @param {?=} event
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (event, isSecondCalendar) {
        if (!isSecondCalendar) {
            if (event) {
                if (!this.selectMonth && !this.selectYear) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
            else {
                if (!this.selectMonth && !this.selectYear) {
                    this.visibleMonth.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth) {
                    this.visibleMonth.year++;
                    this.generateMonths();
                }
                else if (this.selectYear) {
                    this.generateYears(this.years[2][2].year + 10);
                }
            }
        }
        else {
            if (event) {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.setDateViewMonth(isSecondCalendar, true);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
            else {
                if (!this.selectMonth_range && !this.selectYear_range) {
                    this.visibleMonth_range.year++;
                    this.setDateViewMonth(isSecondCalendar);
                }
                else if (this.selectMonth_range) {
                    this.visibleMonth_range.year++;
                    this.generateMonths(isSecondCalendar);
                }
                else if (this.selectYear_range) {
                    this.generateYears(this.years_range[2][2].year + 10, isSecondCalendar);
                }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewMonth = /**
     * @param {?=} isSecondCalendar
     * @param {?=} isNext
     * @return {?}
     */
    function (isSecondCalendar, isNext) {
        /** @type {?} */
        var change;
        if (isNext === undefined) {
            change = 0;
        }
        else {
            change = isNext ? 1 : -1;
        }
        if (!isSecondCalendar) {
            var _a = this.visibleMonth, year = _a.year, monthNbr = _a.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
        else {
            var _b = this.visibleMonth_range, year = _b.year, monthNbr = _b.monthNbr;
            /** @type {?} */
            var d = this.getDate(year, monthNbr, 1);
            d.setMonth(d.getMonth() + change);
            /** @type {?} */
            var y = d.getFullYear();
            /** @type {?} */
            var m = d.getMonth() + 1;
            this.visibleMonth_range = {
                monthTxt: this.opts.monthLabels[m],
                monthNbr: m,
                year: y,
                yearTxt: this.opts.yearTxt
            };
            this.generateCalendar(m, y, true, isSecondCalendar);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onCloseSelector = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.esc) {
            this.closedByEsc();
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellClicked = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        this.selectDate(cell.dateObj);
        this.resetMonthYearSelect(isSecondCalendar);
    };
    /**
     * @param {?} cell
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellKeyDown = /**
     * @param {?} cell
     * @return {?}
     */
    function (cell) {
        // Make possible to move focus by arrow keys
        var _a = this.getSourceRowAndColumnFromEvent(event), sourceRow = _a.sourceRow, sourceCol = _a.sourceCol;
        var _b = this.getTargetFocusRowAndColumn(event, sourceRow, sourceCol, DATE_ROW_COUNT, DATE_COL_COUNT), moveFocus = _b.moveFocus, targetRow = _b.targetRow, targetCol = _b.targetCol;
        if (moveFocus) {
            this.focusCellElement(D, targetRow, targetCol);
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_1, _a, e_2, _b, e_3, _c, e_4, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, day.dateObj) &&
                                    this.utilService.isDateSameOrEarlier(day.dateObj, cell.dateObj)) ||
                                    (this.utilService.isDateSameOrEarlier(day.dateObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.dateObj, day.dateObj));
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_5, _a, e_6, _b, e_7, _c, e_8, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.dates), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var w = _f.value;
                    try {
                        for (var _g = tslib_1.__values(w.week), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var day = _h.value;
                            day.range = false;
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.dates_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var w = _k.value;
                    try {
                        for (var _l = tslib_1.__values(w.week), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var day = _m.value;
                            day.range = false;
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
            }
            catch (e_7_1) { e_7 = { error: e_7_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_7) throw e_7.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_9, _a, e_10, _b, e_11, _c, e_12, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_10_1) { e_10 = { error: e_10_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_10) throw e_10.error; }
                    }
                }
            }
            catch (e_9_1) { e_9 = { error: e_9_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_9) throw e_9.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months_range), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, month.monthObj) &&
                                    this.utilService.isDateSameOrEarlier(month.monthObj, cell.monthObj)) ||
                                    (this.utilService.isDateSameOrEarlier(month.monthObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.monthObj, month.monthObj));
                        }
                    }
                    catch (e_12_1) { e_12 = { error: e_12_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_12) throw e_12.error; }
                    }
                }
            }
            catch (e_11_1) { e_11 = { error: e_11_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_11) throw e_11.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onMonthCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_13, _a, e_14, _b, e_15, _c, e_16, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.months), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var _g = tslib_1.__values(item.row), _h = _g.next(); !_h.done; _h = _g.next()) {
                            var month = _h.value;
                            month.range = false;
                        }
                    }
                    catch (e_14_1) { e_14 = { error: e_14_1 }; }
                    finally {
                        try {
                            if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                        }
                        finally { if (e_14) throw e_14.error; }
                    }
                }
            }
            catch (e_13_1) { e_13 = { error: e_13_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_13) throw e_13.error; }
            }
        }
        else {
            try {
                for (var _j = tslib_1.__values(this.months), _k = _j.next(); !_k.done; _k = _j.next()) {
                    var item = _k.value;
                    try {
                        for (var _l = tslib_1.__values(item.row), _m = _l.next(); !_m.done; _m = _l.next()) {
                            var month = _m.value;
                            month.range = false;
                        }
                    }
                    catch (e_16_1) { e_16 = { error: e_16_1 }; }
                    finally {
                        try {
                            if (_m && !_m.done && (_d = _l.return)) _d.call(_l);
                        }
                        finally { if (e_16) throw e_16.error; }
                    }
                }
            }
            catch (e_15_1) { e_15 = { error: e_15_1 }; }
            finally {
                try {
                    if (_k && !_k.done && (_c = _j.return)) _c.call(_j);
                }
                finally { if (e_15) throw e_15.error; }
            }
        }
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseEnter = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var e_17, _a, e_18, _b, e_19, _c, e_20, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_1 = tslib_1.__values(item), item_1_1 = item_1.next(); !item_1_1.done; item_1_1 = item_1.next()) {
                            var year = item_1_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_18_1) { e_18 = { error: e_18_1 }; }
                    finally {
                        try {
                            if (item_1_1 && !item_1_1.done && (_b = item_1.return)) _b.call(item_1);
                        }
                        finally { if (e_18) throw e_18.error; }
                    }
                }
            }
            catch (e_17_1) { e_17 = { error: e_17_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_17) throw e_17.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_2 = tslib_1.__values(item), item_2_1 = item_2.next(); !item_2_1.done; item_2_1 = item_2.next()) {
                            var year = item_2_1.value;
                            year.range =
                                (this.utilService.isDateSameOrEarlier(this.selectedDateRange.begin, year.yearObj) &&
                                    this.utilService.isDateSameOrEarlier(year.yearObj, cell.yearObj)) ||
                                    (this.utilService.isDateSameOrEarlier(year.yearObj, this.selectedDateRange.begin) &&
                                        this.utilService.isDateSameOrEarlier(cell.yearObj, year.yearObj));
                        }
                    }
                    catch (e_20_1) { e_20 = { error: e_20_1 }; }
                    finally {
                        try {
                            if (item_2_1 && !item_2_1.done && (_d = item_2.return)) _d.call(item_2);
                        }
                        finally { if (e_20) throw e_20.error; }
                    }
                }
            }
            catch (e_19_1) { e_19 = { error: e_19_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_19) throw e_19.error; }
            }
        }
    };
    /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onYearCellMouseLeave = /**
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (isSecondCalendar) {
        var e_21, _a, e_22, _b, e_23, _c, e_24, _d;
        if (isSecondCalendar) {
            try {
                for (var _e = tslib_1.__values(this.years), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var item = _f.value;
                    try {
                        for (var item_3 = tslib_1.__values(item), item_3_1 = item_3.next(); !item_3_1.done; item_3_1 = item_3.next()) {
                            var year = item_3_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_22_1) { e_22 = { error: e_22_1 }; }
                    finally {
                        try {
                            if (item_3_1 && !item_3_1.done && (_b = item_3.return)) _b.call(item_3);
                        }
                        finally { if (e_22) throw e_22.error; }
                    }
                }
            }
            catch (e_21_1) { e_21 = { error: e_21_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                }
                finally { if (e_21) throw e_21.error; }
            }
        }
        else {
            try {
                for (var _g = tslib_1.__values(this.years_range), _h = _g.next(); !_h.done; _h = _g.next()) {
                    var item = _h.value;
                    try {
                        for (var item_4 = tslib_1.__values(item), item_4_1 = item_4.next(); !item_4_1.done; item_4_1 = item_4.next()) {
                            var year = item_4_1.value;
                            year.range = false;
                        }
                    }
                    catch (e_24_1) { e_24 = { error: e_24_1 }; }
                    finally {
                        try {
                            if (item_4_1 && !item_4_1.done && (_d = item_4.return)) _d.call(item_4);
                        }
                        finally { if (e_24) throw e_24.error; }
                    }
                }
            }
            catch (e_23_1) { e_23 = { error: e_23_1 }; }
            finally {
                try {
                    if (_h && !_h.done && (_c = _g.return)) _c.call(_g);
                }
                finally { if (e_23) throw e_23.error; }
            }
        }
    };
    /**
     * @param {?} weekData
     * @return {?}
     */
    CalendarComponent.prototype.onWeekClicked = /**
     * @param {?} weekData
     * @return {?}
     */
    function (weekData) {
        /** @type {?} */
        var showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekData.weekNbr, year: weekData.year };
        if (showTime) {
            weekData.week[0].dateObj.hour = 0;
            weekData.week[0].dateObj.minute = 0;
            weekData.week[0].dateObj.second = 0;
            weekData.week[6].dateObj.hour = 23;
            weekData.week[6].dateObj.minute = 59;
            weekData.week[6].dateObj.second = 59;
        }
        this.selectDate(weekData.week[0].dateObj);
        this.selectDate(weekData.week[6].dateObj);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.getSourceRowAndColumnFromEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var sourceRow = 0;
        /** @type {?} */
        var sourceCol = 0;
        if (event.target && event.target.id) {
            // value of id is for example: m_0_1 (first number = row, second number = column)
            /** @type {?} */
            var arr = event.target.id.split(UNDER_LINE);
            sourceRow = Number(arr[1]);
            sourceCol = Number(arr[2]);
        }
        return { sourceRow: sourceRow, sourceCol: sourceCol };
    };
    /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    CalendarComponent.prototype.getTargetFocusRowAndColumn = /**
     * @param {?} event
     * @param {?} row
     * @param {?} col
     * @param {?} rowCount
     * @param {?} colCount
     * @return {?}
     */
    function (event, row, col, rowCount, colCount) {
        /** @type {?} */
        var moveFocus = false;
        /** @type {?} */
        var targetRow = row;
        /** @type {?} */
        var targetCol = col;
        /** @type {?} */
        var keyCode = this.utilService.getKeyCodeFromEvent(event);
        if (keyCode === KeyCode.upArrow && row > 0) {
            moveFocus = true;
            targetRow--;
        }
        else if (keyCode === KeyCode.downArrow && row < rowCount) {
            moveFocus = true;
            targetRow++;
        }
        else if (keyCode === KeyCode.leftArrow && col > 0) {
            moveFocus = true;
            targetCol--;
        }
        else if (keyCode === KeyCode.rightArrow && col < colCount) {
            moveFocus = true;
            targetCol++;
        }
        return { moveFocus: moveFocus, targetRow: targetRow, targetCol: targetCol };
    };
    /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    CalendarComponent.prototype.focusCellElement = /**
     * @param {?} type
     * @param {?} row
     * @param {?} col
     * @return {?}
     */
    function (type, row, col) {
        /** @type {?} */
        var elem = this.selectorEl.nativeElement.querySelector(DOT + type + UNDER_LINE + row + UNDER_LINE + col);
        if (elem) {
            elem.focus();
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.selectDate = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // Date range
            /** @type {?} */
            var isBeginDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndDateInitialized = this.utilService.isInitializedDate(this.selectedDateRange.end) &&
                JSON.stringify(this.selectedDateRange.begin) !== JSON.stringify(this.selectedDateRange.end);
            if (isBeginDateInitialized && isEndDateInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = date;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else if (!isBeginDateInitialized) {
                // begin date
                this.selectedDateRange.begin = date;
                if (!isEndDateInitialized) {
                    this.selectedDateRange.end = date;
                }
                this.rangeDateSelection({
                    isBegin: true,
                    date: date,
                    jsDate: this.utilService.getDate(date),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(date)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(date, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = date;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                else {
                    this.selectedDateRange.end = date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: date,
                        jsDate: this.utilService.getDate(date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(date)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            // Single date
            this.selectedDate = date;
            if (!this.opts.showTime) {
                this.dateChanged(this.utilService.getDateModel(this.selectedDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
            }
            else {
                if (!this.timeVlaue && this.opts.viewType == ViewType.Together) {
                    this.timeVlaue = this.getTimeStr(new Date);
                }
            }
        }
    };
    /**
     * @param {?} month
     * @return {?}
     */
    CalendarComponent.prototype.toSelectMonth = /**
     * @param {?} month
     * @return {?}
     */
    function (month) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndMonthInitialized = this.utilService.isInitializedMonth(this.selectedDateRange.end);
            if (isBeginMonthInitialized && isEndMonthInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginMonthInitialized) {
                // begin date
                this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier({ year: month.year, month: month.monthNbr }, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = { year: month.year, month: month.monthNbr };
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.selectedMonth = month;
            this.dateChanged(this.utilService.getDateModel({ year: month.year, month: month.monthNbr }, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} year
     * @return {?}
     */
    CalendarComponent.prototype.toSelectYear = /**
     * @param {?} year
     * @return {?}
     */
    function (year) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat;
        if (this.opts.dateRange) {
            // month range
            /** @type {?} */
            var isBeginYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.begin);
            /** @type {?} */
            var isEndYearInitialized = this.utilService.isInitializedYear(this.selectedDateRange.end);
            if (isBeginYearInitialized && isEndYearInitialized) {
                // both already selected - set begin date and reset end date
                this.selectedDateRange.begin = year;
                this.selectedDateRange.end = this.utilService.resetDate();
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else if (!isBeginYearInitialized) {
                // begin date
                this.selectedDateRange.begin = year;
                this.rangeDateSelection({
                    isBegin: true,
                    date: this.selectedDateRange.begin,
                    jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                    dateFormat: dateFormat,
                    formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                    epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                });
            }
            else {
                // second selection
                /** @type {?} */
                var firstDateEarlier = this.utilService.isDateEarlier(year, this.selectedDateRange.begin);
                if (firstDateEarlier) {
                    /** @type {?} */
                    var _date = this.selectedDateRange.begin;
                    this.selectedDateRange.end = _date;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: _date,
                        jsDate: this.utilService.getDate(_date),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(_date, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(_date)
                    });
                    this.selectedDateRange.begin = year;
                    this.rangeDateSelection({
                        isBegin: true,
                        date: this.selectedDateRange.begin,
                        jsDate: this.utilService.getDate(this.selectedDateRange.begin),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.begin, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.begin)
                    });
                }
                else {
                    this.selectedDateRange.end = year;
                    this.rangeDateSelection({
                        isBegin: false,
                        date: this.selectedDateRange.end,
                        jsDate: this.utilService.getDate(this.selectedDateRange.end),
                        dateFormat: dateFormat,
                        formatted: this.utilService.formatDate(this.selectedDateRange.end, dateFormat, monthLabels),
                        epoc: this.utilService.getEpocTime(this.selectedDateRange.end)
                    });
                }
                if (!this.opts.showTime) {
                    this.dateChanged(this.utilService.getDateModel(null, this.selectedDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), closeSelectorOnDateSelect);
                }
            }
        }
        else {
            this.dateChanged(this.utilService.getDateModel(year, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat), showTime ? false : closeSelectorOnDateSelect);
        }
    };
    /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    CalendarComponent.prototype.monthStartIdx = /**
     * @param {?} y
     * @param {?} m
     * @return {?}
     */
    function (y, m) {
        // Month start index
        /** @type {?} */
        var d = new Date();
        d.setDate(1);
        d.setMonth(m - 1);
        d.setFullYear(y);
        /** @type {?} */
        var idx = d.getDay() + this.sundayIdx();
        return idx >= 7 ? idx - 7 : idx;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of current month
        return new Date(y, m, 0).getDate();
    };
    /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    CalendarComponent.prototype.daysInPrevMonth = /**
     * @param {?} m
     * @param {?} y
     * @return {?}
     */
    function (m, y) {
        // Return number of days of the previous month
        /** @type {?} */
        var d = this.getDate(y, m, 1);
        d.setMonth(d.getMonth() - 1);
        return this.daysInMonth(d.getMonth() + 1, d.getFullYear());
    };
    /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    CalendarComponent.prototype.isCurrDay = /**
     * @param {?} d
     * @param {?} m
     * @param {?} y
     * @param {?} cmo
     * @param {?} today
     * @return {?}
     */
    function (d, m, y, cmo, today) {
        // Check is a given date the today
        return d === today.day && m === today.month && y === today.year && cmo === MonthId.curr;
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getWidth = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hasShortCuts = this.opts.shortcuts && this.opts.shortcuts.length > 0;
        if (this.opts.dateRange && this.opts.showType !== 4) {
            return hasShortCuts ? '660px' : '574px';
        }
        else {
            /** @type {?} */
            var w = (hasShortCuts ? 380 : 287) + ((this.opts.viewType === ViewType.Together || this.multiSelect) ? 200 : 0);
            return w + 'px';
        }
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.getToday = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var date = new Date();
        if (this.opts.showTime) {
            return {
                year: date.getFullYear(),
                month: date.getMonth() + 1,
                day: date.getDate(),
                hour: date.getHours(),
                minute: date.getMinutes(),
                second: date.getSeconds()
            };
        }
        else {
            return { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getDayNumber = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get day number: su=0, mo=1, tu=2, we=3 ...
        /** @type {?} */
        var d = this.getDate(date.year, date.month, date.day);
        return d.getDay();
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.getWeekday = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        // Get weekday: su, mo, tu, we ...
        return this.weekDayOpts[this.getDayNumber(date)];
    };
    /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    CalendarComponent.prototype.getDate = /**
     * @param {?} year
     * @param {?} month
     * @param {?} day
     * @return {?}
     */
    function (year, month, day) {
        // Creates a date object from given year, month and day
        return new Date(year, month - 1, day, 0, 0, 0, 0);
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.sundayIdx = /**
     * @return {?}
     */
    function () {
        // Index of Sunday day
        return this.dayIdx > 0 ? 7 - this.dayIdx : 0;
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.generateCalendar = /**
     * @param {?} m
     * @param {?} y
     * @param {?} notifyChange
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (m, y, notifyChange, isSecondCalendar) {
        if (!isSecondCalendar) {
            this.dates.length = 0;
        }
        else {
            this.dates_range.length = 0;
        }
        /** @type {?} */
        var today = this.getToday();
        /** @type {?} */
        var monthStart = this.monthStartIdx(y, m);
        /** @type {?} */
        var dInThisM = this.daysInMonth(m, y);
        /** @type {?} */
        var dInPrevM = this.daysInPrevMonth(m, y);
        /** @type {?} */
        var dayNbr = 1;
        /** @type {?} */
        var cmo = MonthId.prev;
        for (var i = 1; i < 7; i++) {
            /** @type {?} */
            var week = [];
            if (i === 1) {
                // First week
                /** @type {?} */
                var pm = dInPrevM - monthStart + 1;
                // Previous month
                for (var j = pm; j <= dInPrevM; j++) {
                    /** @type {?} */
                    var date = { year: m === 1 ? y - 1 : y, month: m === 1 ? 12 : m - 1, day: j };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(j, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                }
                cmo = MonthId.curr;
                // Current month
                /** @type {?} */
                var daysLeft = 7 - week.length;
                for (var j = 0; j < daysLeft; j++) {
                    /** @type {?} */
                    var date = { year: y, month: m, day: dayNbr };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            else {
                // Rest of the weeks
                for (var j = 1; j < 8; j++) {
                    if (dayNbr > dInThisM) {
                        // Next month
                        dayNbr = 1;
                        cmo = MonthId.next;
                    }
                    /** @type {?} */
                    var date = {
                        year: cmo === MonthId.next && m === 12 ? y + 1 : y,
                        month: cmo === MonthId.curr ? m : cmo === MonthId.next && m < 12 ? m + 1 : 1,
                        day: dayNbr
                    };
                    week.push({
                        dateObj: date,
                        cmo: cmo,
                        currDay: this.isCurrDay(dayNbr, m, y, cmo, today),
                        disabled: this.utilService.isDisabledDate(date, this.opts),
                        markedDate: this.utilService.isMarkedDate(date, this.opts.markDates, this.opts.markWeekends),
                        highlight: this.utilService.isHighlightedDate(date, this.opts.sunHighlight, this.opts.satHighlight, this.opts.highlightDates)
                    });
                    dayNbr++;
                }
            }
            // let weekNbr = this.opts.showWeekNumbers ? this.utilService.getWeekNumber(week[0].dateObj) : 0;
            /** @type {?} */
            var weekNbr = 0;
            if (this.opts.showWeekNumbers) {
                /** @type {?} */
                var dateIndex = this.opts.firstDayOfWeek == 'su' ? 6 : 0;
                weekNbr = this.utilService.getWeekNumber(week[dateIndex].dateObj);
                // if (this.opts.firstDayOfWeek === 'su') {
                //     endDayWeekNbr -= 1;
                // }
                // weekNbr = this.utilService.getWeekNumber(week[0].dateObj) === endDayWeekNbr ? this.utilService.getWeekNumber(week[0].dateObj): 0;
            }
            if (!isSecondCalendar) {
                this.dates.push({ week: week, weekNbr: weekNbr, year: y });
            }
            else {
                this.dates_range.push({ week: week, weekNbr: weekNbr, year: y });
            }
        }
        this.setDateViewHeaderBtnDisabledState(m, y, isSecondCalendar);
        if (notifyChange) {
            // Notify parent
            this.calendarViewChanged({
                year: y,
                month: m,
                first: { number: 1, weekday: this.getWeekday({ year: y, month: m, day: 1 }) },
                last: { number: dInThisM, weekday: this.getWeekday({ year: y, month: m, day: dInThisM }) }
            });
        }
    };
    /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setDateViewHeaderBtnDisabledState = /**
     * @param {?} m
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (m, y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({
            year: m === 1 ? y - 1 : y,
            month: m === 1 ? 12 : m - 1,
            day: this.daysInMonth(m === 1 ? 12 : m - 1, m === 1 ? y - 1 : y)
        }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: m === 12 ? y + 1 : y, month: m === 12 ? 1 : m + 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = (m === 1 && y === minYear) || dpm;
            this.nextViewDisabled_range = (m === 12 && y === maxYear) || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setMonthViewHeaderBtnDisabledState = /**
     * @param {?} y
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (y, isSecondCalendar) {
        /** @type {?} */
        var dpm = false;
        /** @type {?} */
        var dnm = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpm = this.utilService.isMonthDisabledByDisableUntil({ year: y - 1, month: 12, day: 31 }, disableUntil);
        dnm = this.utilService.isMonthDisabledByDisableSince({ year: y + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = y === minYear || dpm;
            this.nextViewDisabled = y === maxYear || dnm;
            this.prevDobViewDisabled = y === minYear || dpm;
            this.nextDobViewDisabled = y === maxYear || dnm;
        }
        else {
            this.prevViewDisabled_range = y === minYear || dpm;
            this.nextViewDisabled_range = y === maxYear || dnm;
            this.prevDobViewDisabled_range = y === minYear || dpm;
            this.nextDobViewDisabled_range = y === maxYear || dnm;
        }
    };
    /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.setYearViewHeaderBtnDisabledState = /**
     * @param {?} yp
     * @param {?} yn
     * @param {?} isSecondCalendar
     * @return {?}
     */
    function (yp, yn, isSecondCalendar) {
        /** @type {?} */
        var dpy = false;
        /** @type {?} */
        var dny = false;
        var _a = this.opts, disableUntil = _a.disableUntil, disableSince = _a.disableSince, minYear = _a.minYear, maxYear = _a.maxYear;
        dpy = this.utilService.isMonthDisabledByDisableUntil({ year: yp - 1, month: 12, day: 31 }, disableUntil);
        dny = this.utilService.isMonthDisabledByDisableSince({ year: yn + 1, month: 1, day: 1 }, disableSince);
        if (!isSecondCalendar) {
            this.prevViewDisabled = yp <= minYear || dpy;
            this.nextViewDisabled = yn >= maxYear || dny;
            this.prevDobViewDisabled = yp <= minYear || dpy;
            this.nextDobViewDisabled = yn >= maxYear || dny;
        }
        else {
            this.prevViewDisabled_range = yp <= minYear || dpy;
            this.nextViewDisabled_range = yn >= maxYear || dny;
            this.prevDobViewDisabled_range = yp <= minYear || dpy;
            this.nextDobViewDisabled_range = yn >= maxYear || dny;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onContainerClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickTimeBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        if (this.opts.dateRange) {
            /** @type {?} */
            var beginIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.begin);
            /** @type {?} */
            var endIsInitializedDate = this.utilService.isInitializedDate(this.selectedDateRange.end);
            /** @type {?} */
            var now = new Date();
            if (!beginIsInitializedDate || !endIsInitializedDate) {
                // 直接点击确定显示本月和下月
                if (!beginIsInitializedDate) {
                    this.selectedDateRange.begin = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
                }
                /** @type {?} */
                var endYear = now.getFullYear();
                /** @type {?} */
                var endmonth = now.getMonth() + 1;
                if (endmonth >= 12) {
                    endYear = endYear + 1;
                    endmonth = 1;
                }
                // else {
                //     endmonth = endmonth + this.opts.monthRangeValue;
                // }
                this.selectedDateRange.end = tslib_1.__assign({}, this.selectedDateRange.begin);
                // this.selectedDateRange.end = { year: endYear, month: endmonth, day: now.getDate() };
                // 点击selectTime之前给dateRange赋两个时间值
                this.timeVlaue = this.getTimeStr(now);
                this.timeVlaue_range = this.getTimeStr(now);
            }
            if (!this.timeVlaue_range) {
                this.timeVlaue_range = this.getTimeStr(now);
            }
            this.timeVlaue_range = this.checkTimeValues(this.timeVlaue_range);
        }
        else {
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                /** @type {?} */
                var now = new Date();
                // 点击selectTime之前赋值
                this.timeVlaue = this.getTimeStr(now);
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        if (!this.timeVlaue) {
            /** @type {?} */
            var now = new Date();
            // 点击selectTime之前赋值
            this.timeVlaue = this.getTimeStr(now);
            if (!this.utilService.isInitializedDate(this.selectedDate)) {
                this.selectedDate = { year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() };
            }
        }
        this.timeVlaue = this.checkTimeValues(this.timeVlaue);
        if (this.selectYear) {
            this.selectYear = false;
        }
        if (this.selectMonth) {
            this.selectMonth = false;
        }
        if (this.selectYear_range) {
            this.selectYear_range = false;
        }
        if (this.selectMonth_range) {
            this.selectMonth_range = false;
        }
        this.selectTime = !this.selectTime;
        this.cdr.detectChanges();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onShowDynamicView = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        this.opts.showDynamicView = true;
        this.dynamicViewShow.emit({ showDynamicView: true });
        this.cdr.detectChanges();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onShowDatePanel = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        this.opts.showDynamicView = false;
        this.dynamicViewShow.emit({ showDynamicView: false });
        this.cdr.detectChanges();
    };
    /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    CalendarComponent.prototype.getTimeValue = /**
     * @private
     * @param {?} isDateRange
     * @return {?}
     */
    function (isDateRange) {
        /** @type {?} */
        var t = { start: null, end: null };
        if (this.timeVlaue) {
            /** @type {?} */
            var timeArr = this.timeVlaue.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
            if (timeArr.length >= 2) {
                t.start = {
                    hour: timeArr[0],
                    minute: timeArr[1],
                    second: timeArr[2] ? timeArr[2] : 0
                };
            }
        }
        else {
            /** @type {?} */
            var nowDate = new Date();
            /** @type {?} */
            var hour = nowDate.getHours();
            /** @type {?} */
            var minute = nowDate.getMinutes();
            /** @type {?} */
            var second = nowDate.getSeconds();
            if (this.opts.dateRange) {
                t.start = { hour: 0, minute: 0, second: 0 };
            }
            else {
                t.start = { hour: hour, minute: minute, second: second };
            }
        }
        if (isDateRange) {
            if (this.timeVlaue_range) {
                /** @type {?} */
                var timeArr_range = this.timeVlaue_range.replace('时', ':').replace('分', ':').replace('秒', '').split(':');
                if (timeArr_range.length >= 2) {
                    t.end = {
                        hour: timeArr_range[0],
                        minute: timeArr_range[1],
                        second: timeArr_range[2] ? timeArr_range[2] : 0
                    };
                }
            }
            else {
                /** @type {?} */
                var hour = 23;
                /** @type {?} */
                var minute = 59;
                /** @type {?} */
                var second = 59;
                t.end = { hour: hour, minute: minute, second: second };
            }
        }
        return t;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    CalendarComponent.prototype.onClickOkBtn = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        /** @type {?} */
        var timeObj = null;
        /** @type {?} */
        var timeObj_range = null;
        /** @type {?} */
        var selectedDate = null;
        /** @type {?} */
        var selectedDate_range = null;
        if (this.opts.showTime) {
            var _a = this.getTimeValue(this.opts.dateRange), start = _a.start, end = _a.end;
            timeObj = start;
            timeObj_range = end;
        }
        var _b = this.opts, dateFormat = _b.dateFormat, monthLabels = _b.monthLabels, dateRangeDatesDelimiter = _b.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _b.closeSelectorOnDateSelect, returnFormat = _b.returnFormat;
        if (!this.opts.dateRange) {
            selectedDate = tslib_1.__assign({}, this.initializedDate(this.selectedDate), timeObj);
            /** @type {?} */
            var isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
            /** @type {?} */
            var earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
            selectedDate = !isInDisableRange
                ? selectedDate
                : tslib_1.__assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
            this.checkTimeValue(selectedDate);
        }
        else {
            /** @type {?} */
            var begin = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.begin), timeObj);
            /** @type {?} */
            var end = tslib_1.__assign({}, this.initializedDate(this.selectedDateRange.end, begin), timeObj_range);
            this.checkTimeValue(begin);
            this.checkTimeValue(end);
            selectedDate_range = { begin: begin, end: end };
        }
        /** @type {?} */
        var dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onTodayClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        /** @type {?} */
        var timeObj = null;
        /** @type {?} */
        var selectedDate = null;
        /** @type {?} */
        var selectedDate_range = null;
        if (this.opts.showTime) {
            var start = this.getTimeValue(false).start;
            timeObj = start;
        }
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, returnFormat = _a.returnFormat;
        selectedDate = tslib_1.__assign({}, this.initializedDate({ year: 0, month: 0, day: 0 }), timeObj);
        /** @type {?} */
        var isInDisableRange = this.utilService.isDisabledDate(selectedDate, this.opts);
        /** @type {?} */
        var earlier = this.utilService.isDateSameOrEarlier(selectedDate, this.opts.disableUntil);
        selectedDate = !isInDisableRange
            ? selectedDate
            : tslib_1.__assign({}, selectedDate, (earlier ? this.opts.disableUntil : this.opts.disableSince));
        /** @type {?} */
        var dateModel = this.utilService.getDateModel(selectedDate, selectedDate_range, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
        this.dateChanged(dateModel, closeSelectorOnDateSelect);
    };
    /**
     * @param {?} $event
     * @param {?} dynamicviewRef
     * @return {?}
     */
    CalendarComponent.prototype.onDynamicOkClick = /**
     * @param {?} $event
     * @param {?} dynamicviewRef
     * @return {?}
     */
    function ($event, dynamicviewRef) {
        if (dynamicviewRef) {
            /** @type {?} */
            var text = dynamicviewRef.formatValue();
            /** @type {?} */
            var value = dynamicviewRef.getValue();
            value.text = text;
            this.opts.dynamicValueChanged(value);
        }
    };
    /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    CalendarComponent.prototype.initializedDate = /**
     * @param {?} date
     * @param {?=} otherDate
     * @return {?}
     */
    function (date, otherDate) {
        if (otherDate === void 0) { otherDate = { year: 0, month: 0, day: 0 }; }
        /** @type {?} */
        var daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        if (!this.utilService.isInitializedDate(date) && !this.utilService.isInitializedDate(otherDate)) {
            /** @type {?} */
            var year = new Date().getFullYear();
            /** @type {?} */
            var month = new Date().getMonth() + 1;
            /** @type {?} */
            var day = new Date().getDate();
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableUntil : { year: year, month: month, day: day };
        }
        else if (!this.utilService.isInitializedDate(date)) {
            /** @type {?} */
            var year = otherDate.month + 1 > 12 ? otherDate.year + 1 : otherDate.year;
            /** @type {?} */
            var month = otherDate.month + 1 > 12 ? 1 : otherDate.month + this.opts.monthRangeValue;
            if (!date.month) {
                month = otherDate.month;
            }
            /** @type {?} */
            var day = otherDate.day < 1 || otherDate.day > daysInMonth[month - 1] ? 1 : otherDate.day;
            return this.utilService.isDisabledDate({ year: year, month: month, day: day }, this.opts) ? this.opts.disableSince : { year: year, month: month, day: day };
        }
        return date;
    };
    /**
     * @param {?} date
     * @return {?}
     */
    CalendarComponent.prototype.setTime = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, dateRangeDatesDelimiter = _a.dateRangeDatesDelimiter, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, returnFormat = _a.returnFormat;
        if (date instanceof Date) {
            if (this.opts.showType !== 4 && !this.opts.dateRange) {
                /** @type {?} */
                var targetDate = void 0;
                if (this.opts.showTime) {
                    targetDate = {
                        year: date.getFullYear(),
                        month: date.getMonth() + 1,
                        day: date.getDate(),
                        hour: date.getHours(),
                        minute: date.getMinutes(),
                        second: date.getSeconds()
                    };
                }
                else {
                    targetDate = { year: date.getFullYear(), month: date.getMonth() + 1, day: date.getDate() };
                }
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(targetDate, null, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
            else {
                // 启用周选择时  快捷按钮参数为单个日期
                /** @type {?} */
                var dateModel = this.utilService.getDateModel(null, this.utilService.getNowWeekTime(date), dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
                this.dateChanged(dateModel, closeSelectorOnDateSelect);
            }
        }
        else if (date instanceof Object && this.opts.dateRange) {
            /** @type {?} */
            var targetDateRange = void 0;
            var begin = date.begin, end = date.end;
            if (!begin || !end) {
                return;
            }
            if (this.opts.showTime) {
                targetDateRange = {
                    begin: {
                        year: begin.getFullYear(),
                        month: begin.getMonth() + 1,
                        day: begin.getDate(),
                        hour: begin.getHours(),
                        minute: begin.getMinutes(),
                        second: begin.getSeconds()
                    },
                    end: {
                        year: end.getFullYear(),
                        month: end.getMonth() + 1,
                        day: end.getDate(),
                        hour: end.getHours(),
                        minute: end.getMinutes(),
                        second: end.getSeconds()
                    }
                };
            }
            else {
                targetDateRange = {
                    begin: { year: begin.getFullYear(), month: begin.getMonth() + 1, day: begin.getDate() },
                    end: { year: end.getFullYear(), month: end.getMonth() + 1, day: end.getDate() }
                };
            }
            /** @type {?} */
            var dateModel = this.utilService.getDateModel(null, targetDateRange, dateFormat, monthLabels, dateRangeDatesDelimiter, returnFormat);
            this.dateChanged(dateModel, closeSelectorOnDateSelect);
        }
        else {
            // console.warn('参数必须符合要求！');
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onSelectCurrentWeek = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        /** @type {?} */
        var firstDay = this.opts.firstDayOfWeek === 'su' ? '日' : '一';
        var _a = this.dateHlp.getNowWeekTime(new Date(), firstDay), begin = _a.begin, end = _a.end;
        /** @type {?} */
        var year = new Date().getFullYear();
        /** @type {?} */
        var weekNbr = this.utilService.getWeekNumber(begin);
        /** @type {?} */
        var showTime = this.opts.returnFormat && this.opts.returnFormat.toLocaleLowerCase().indexOf('hh:mm') > -1;
        this.selectedWeek = { weekNbr: weekNbr, year: year };
        if (showTime) {
            begin['hour'] = 0;
            begin['minute'] = 0;
            begin['second'] = 0;
            end['hour'] = 23;
            end['minute'] = 59;
            end['second'] = 59;
        }
        this.selectDate(begin);
        this.selectDate(end);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onDynamicValueChanged = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.btnDynamicDisabled = !$event;
    };
    /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    CalendarComponent.prototype.onDayCellClickedForMultiDates = /**
     * @param {?} cell
     * @param {?=} isSecondCalendar
     * @return {?}
     */
    function (cell, isSecondCalendar) {
        var _this = this;
        if (cell.cmo === 1) {
            this.onPrevNavigateBtnClicked(true, isSecondCalendar);
        }
        else if (cell.cmo === 3) {
            this.onNextNavigateBtnClicked(true, isSecondCalendar);
        }
        var _a = this.opts, dateFormat = _a.dateFormat, monthLabels = _a.monthLabels, maxSelected = _a.maxSelected, closeSelectorOnDateSelect = _a.closeSelectorOnDateSelect, showTime = _a.showTime, returnFormat = _a.returnFormat, selectedOrderBy = _a.selectedOrderBy;
        /** @type {?} */
        var selectedDates = [];
        /** @type {?} */
        var isSelected = this.selectedDates.find((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return _this.utilService.isDateSame(n, cell.dateObj); }));
        if (!isSelected) {
            if (!maxSelected || (maxSelected && this.selectedDates.length < maxSelected)) {
                selectedDates = tslib_1.__spread(this.selectedDates, [tslib_1.__assign({}, cell.dateObj, { value: this.utilService.formatDate(cell.dateObj, dateFormat, monthLabels) })]);
            }
            else {
                selectedDates = tslib_1.__spread(this.selectedDates);
                if (this.showNotify) {
                    this.showNotify();
                }
            }
        }
        else {
            selectedDates = this.selectedDates.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n !== isSelected; }));
        }
        selectedDates = this.utilService.orderSelectedDates(selectedDates, selectedOrderBy);
        this.selectedDates = selectedDates;
        this.resetMonthYearSelect(isSecondCalendar);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onMultiDatesOkClicked = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
        this.multiDatesChanged(this.selectedDates);
    };
    /**
     * @param {?} removeItem
     * @return {?}
     */
    CalendarComponent.prototype.onMultiDateRemoved = /**
     * @param {?} removeItem
     * @return {?}
     */
    function (removeItem) {
        this.selectedDates = this.selectedDates.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n !== removeItem; }));
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onMultiDateClear = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.selectedDates = [];
    };
    /**
     * @return {?}
     */
    CalendarComponent.prototype.showGoBackToday = /**
     * @return {?}
     */
    function () {
        var _a = this.visibleMonth, monthNbr = _a.monthNbr, year = _a.year;
        var _b = this.getToday(), currentYear = _b.year, month = _b.month;
        return monthNbr != month || year != currentYear;
    };
    /**
     * @private
     * @param {?} year
     * @param {?} month
     * @return {?}
     */
    CalendarComponent.prototype.setCalendarView = /**
     * @private
     * @param {?} year
     * @param {?} month
     * @return {?}
     */
    function (year, month) {
        if (this.visibleMonth.year != year || this.visibleMonth.monthNbr != month) {
            this.visibleMonth = {
                monthTxt: this.opts.monthLabels[month],
                monthNbr: month,
                year: year,
                yearTxt: this.opts.yearTxt
            };
            this.selectedMonth.year = year;
            this.selectedMonth.monthNbr = month;
            //tfs638280
            this.selectMonth = false;
            this.selectYear = false;
            this.generateCalendar(month, year, true);
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.gototodayView = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _a = this.getToday(), year = _a.year, month = _a.month;
        this.setCalendarView(year, month);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CalendarComponent.prototype.onSelectDateClicked = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (!$event) {
            return;
        }
        var year = $event.year, month = $event.month;
        this.setCalendarView(year, month);
    };
    /**
     * @private
     * @param {?} length
     * @param {?=} step
     * @param {?=} start
     * @return {?}
     */
    CalendarComponent.prototype.makeRange = /**
     * @private
     * @param {?} length
     * @param {?=} step
     * @param {?=} start
     * @return {?}
     */
    function (length, step, start) {
        if (step === void 0) { step = 1; }
        if (start === void 0) { start = 0; }
        step = Math.ceil(step);
        return new Array(Math.ceil(length / step))
            .fill(0)
            .map((/**
         * @param {?} _
         * @param {?} i
         * @return {?}
         */
        function (_, i) { return (i + start) * step; }));
    };
    /**
     * @private
     * @return {?}
     */
    CalendarComponent.prototype.buildHours = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var hourRanges = 24;
        /** @type {?} */
        var disabledHours = this.disabledHours && this.disabledHours();
        /** @type {?} */
        var startIndex = 0;
        /** @type {?} */
        var hourRange = this.makeRange(hourRanges, this.opts.hourStep, startIndex).map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            return {
                index: r,
                disabled: _this.disabledHours && disabledHours.indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return hourRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return !(n.disabled);
        }));
    };
    /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    CalendarComponent.prototype.buildMinutes = /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    function (timeObj) {
        var _this = this;
        /** @type {?} */
        var minuteRange = this.makeRange(60, this.opts.minuteStep).map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            return {
                index: r,
                disabled: _this.disabledMinutes &&
                    _this.disabledMinutes((/** @type {?} */ (timeObj.hours))).indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return minuteRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return !(n.disabled);
        }));
    };
    /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    CalendarComponent.prototype.buildSeconds = /**
     * @private
     * @param {?} timeObj
     * @return {?}
     */
    function (timeObj) {
        var _this = this;
        /** @type {?} */
        var secondRange = this.makeRange(60, this.opts.secondStep).map((/**
         * @param {?} r
         * @return {?}
         */
        function (r) {
            return {
                index: r,
                disabled: _this.disabledSeconds &&
                    _this.disabledSeconds((/** @type {?} */ (timeObj.hours)), (/** @type {?} */ (timeObj.minutes))).indexOf(r) !== -1
            };
        }));
        // 移除禁用的值
        return secondRange.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return !(n.disabled);
        }));
    };
    /**
     * @param {?} timeValue
     * @return {?}
     */
    CalendarComponent.prototype.checkTimeValues = /**
     * @param {?} timeValue
     * @return {?}
     */
    function (timeValue) {
        if (timeValue) {
            /** @type {?} */
            var times = timeValue.split(':').map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return parseInt(n, 10); }));
            /** @type {?} */
            var timeObj_1 = {
                hour: times[0],
                minute: times[1],
                second: times[2]
            };
            if (this.opts.hourStep > 1) {
                /** @type {?} */
                var hours = this.buildHours();
                if (!hours.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.index === timeObj_1.hour; }))) {
                    timeObj_1.hour = 0;
                }
            }
            if (this.opts.minuteStep > 1) {
                /** @type {?} */
                var minutes = this.buildMinutes({ hours: timeObj_1.hour });
                if (!minutes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.index === timeObj_1.minute; }))) {
                    timeObj_1.minute = 0;
                }
            }
            if (this.opts.secondStep > 1) {
                /** @type {?} */
                var seconds = this.buildSeconds({ hours: timeObj_1.hour, minutes: timeObj_1.minute });
                if (!seconds.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.index === timeObj_1.second; }))) {
                    timeObj_1.second = 0;
                }
            }
            return (timeObj_1.hour || '00') + ":" + (timeObj_1.minute || '00') + ":" + (timeObj_1.second || '00');
        }
        return timeValue;
    };
    /**
     * @param {?} dateObj
     * @return {?}
     */
    CalendarComponent.prototype.checkTimeValue = /**
     * @param {?} dateObj
     * @return {?}
     */
    function (dateObj) {
        if (!this.opts.showTime) {
            return;
        }
        if (this.opts.hourStep > 1) {
            /** @type {?} */
            var hours = this.buildHours();
            if (!hours.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.index === parseInt('' + dateObj.hour, 10); }))) {
                dateObj.hour = 0;
            }
        }
        if (this.opts.minuteStep > 1) {
            /** @type {?} */
            var minutes = this.buildMinutes({ hours: dateObj.hour });
            if (!minutes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.index === parseInt('' + dateObj.minute, 10); }))) {
                dateObj.minute = 0;
            }
        }
        if (this.opts.secondStep > 1) {
            /** @type {?} */
            var seconds = this.buildSeconds({ hours: dateObj.hour, minutes: dateObj.minute });
            if (!seconds.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.index === parseInt('' + dateObj.second, 10); }))) {
                dateObj.second = 0;
            }
        }
    };
    CalendarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-datepicker-calendar',
                    template: "<div class=\"f-datepicker-container\" #selectorEl *ngIf=\"!multiSelect\"\r\n    [ngStyle]=\"{\r\n        top: selectorPos.top + 'px',\r\n        left: selectorPos.left + 'px',\r\n        width: getWidth()\r\n    }\"\r\n    (keyup)=\"onCloseSelector($event)\"\r\n    tabindex=\"0\"\r\n    (click)=\"onContainerClick($event)\"\r\n    style=\"transition: all 0.2s ease 0s;\"\r\n    [style.display]=\"(opts?.enableDynamic ? !opts?.showDynamicView: true ) ? '': 'none'\"\r\n>\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\" >\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClicked($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours\"\r\n            [disabledMinutes]=\"disabledMinutes\"\r\n            [disabledSeconds]=\"disabledSeconds\"\r\n            [format]=\"opts.timeFormat\"\r\n            [hourStep]=\"opts.hourStep || 1\"\r\n            [minuteStep]=\"opts.minuteStep || 1\"\r\n            [secondStep]=\"opts.secondStep || 1\"\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n    <div class=\"f-datepicker-content\" *ngIf=\"opts.dateRange && opts.showType !== 4\">\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [visibleMonth]=\"visibleMonth_range\"\r\n            [selectMonth]=\"selectMonth_range\"\r\n            [selectYear]=\"selectYear_range\"\r\n            [prevViewDisabled]=\"prevViewDisabled_range\"\r\n            [nextViewDisabled]=\"nextViewDisabled_range\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled_range\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled_range\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked(true)\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked(true)\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-day-view\r\n            *ngIf=\"!selectMonth_range && !selectYear_range && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates_range\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (dayCellClicked)=\"onDayCellClicked($event, true)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave(true)\"\r\n        ></lib-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth_range\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, true)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave(true)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear_range\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years_range\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event, true)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked($event, true)\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked($event, true)\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event, true)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave(true)\"\r\n        ></lib-year-view>\r\n        <time-picker-panel\r\n            *ngIf=\"selectTime\"\r\n            [(ngModel)]=\"timeVlaue_range\"\r\n            [opened]=\"true\"\r\n            [inDatePicker]=\"true\"\r\n            [disabledHours]=\"disabledHours2\"\r\n            [disabledMinutes]=\"disabledMinutes2\"\r\n            [disabledSeconds]=\"disabledSeconds2\"\r\n            [format]=\"opts.timeFormat\"\r\n            [hourStep]=\"opts.hourStep || 1\"\r\n            [minuteStep]=\"opts.minuteStep || 1\"\r\n            [secondStep]=\"opts.secondStep || 1\"\r\n            #endTimeRef\r\n        >\r\n        </time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-content\" *ngIf=\"!opts.dateRange && opts.viewType === 'together' && opts.showTime\" style=\"width: 190px;margin-left: 10px;\">\r\n\r\n        <div style=\"height: 41px;\r\n        border-bottom: 1px solid #E4E7EF;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        font-size: 16px;\r\n        font-weight: 500;margin-bottom: 15px;\">{{ timeVlaue }}</div>\r\n\r\n        <time-picker-panel\r\n        [(ngModel)]=\"timeVlaue\"\r\n        [opened]=\"true\"\r\n        [inDatePicker]=\"true\"\r\n        [disabledHours]=\"disabledHours\"\r\n        [disabledMinutes]=\"disabledMinutes\"\r\n        [disabledSeconds]=\"disabledSeconds\"\r\n        [selectCurrentTimeWhenNull]=\"false\"\r\n        [hourStep]=\"opts.hourStep || 1\"\r\n        [minuteStep]=\"opts.minuteStep || 1\"\r\n        [secondStep]=\"opts.secondStep || 1\"\r\n        [format]=\"opts.timeFormat\"></time-picker-panel>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\" *ngIf=\"opts.showTime || opts?.enableDynamic\">\r\n        <button class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts?.enableDynamic\" style=\"text-align: left;\" (click)=\"onShowDynamicView($event)\">\r\n            {{ opts?.dynamicLocale.setting }}\r\n        </button>\r\n\r\n        <button (click)=\"onClickTimeBtn($event)\" class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"opts.showTime && opts.viewType === 'switch'\">\r\n            {{\r\n                selectTime\r\n                    ? opts.dateBtnText\r\n                        ? opts.dateBtnText\r\n                        : \"Select Date\"\r\n                    : opts.timeBtnText\r\n                    ? opts.timeBtnText\r\n                    : \"Select Time\"\r\n            }}\r\n        </button>\r\n        <button (click)=\"onClickOkBtn($event)\" class=\"btn btn-primary f-datepicker-makesure-btn\" *ngIf=\"opts.showTime\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n\r\n        <button (click)=\"onTodayClick($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;\" *ngIf=\"opts?.enableDynamic && !opts.showTime\">    \r\n            {{opts?.dynamicLocale.today}}\r\n        </button>\r\n    </div>\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: center;\" *ngIf=\"!opts.showTime && !opts?.enableDynamic && opts.showPresent && !opts.dateRange \">\r\n        <button (click)=\"onTodayClick($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;height: 100%;width: 100px;\">    \r\n            {{ (opts.showType === 1 || opts.showType === 4) ? opts?.dynamicLocale.today :  opts.showType === 2 ? opts?.dynamicLocale.presentMonth : opts?.dynamicLocale.presentYear }}\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: center;\" *ngIf=\"opts.showType === 4 && opts.showPresent\">\r\n        <button (click)=\"onSelectCurrentWeek($event)\" class=\"btn btn-link f-datepicker-makesure-btn\" style=\"margin-right: 0;height: 100%;width: 100px;\">    \r\n            {{ opts?.dynamicLocale.presentWeek }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>\r\n\r\n\r\n<div *ngIf=\"!multiSelect && opts?.enableDynamic\" class=\"f-datepicker-container\" #dynamicViewEle [ngStyle]=\"{\r\n    top: selectorPos.top + 'px',\r\n    left: (selectorPos.left) + 'px',\r\n    width: getWidth()\r\n}\"\r\nstyle=\"transition: all 0.2s ease 0s\"\r\n[style.display]=\"(opts?.enableDynamic && opts?.showDynamicView ) ? '': 'none'\"\r\n(click)=\"$event.stopPropagation()\">\r\n\r\n    <div class=\"f-datepicker-content\" >\r\n        \r\n        <div class=\"f-datepicker-header\" style=\"justify-content: unset;\" >\r\n            <div class=\"f-datepicker-prev-btn\" style=\"padding-left: 8px;position: absolute;\">\r\n                <button type=\"button\" class=\"f-datepicker-header-btn\" (click)=\"onShowDatePanel($event)\">\r\n                    <i class=\"k-icon k-i-arrow-chevron-left\"></i>\r\n                </button>\r\n            </div>\r\n            <div class=\"f-datepicker-monthYearText\" style=\"width: 100%;align-items: center;display: flex;justify-content: center;height: 40px;\">\r\n                {{opts.dynamicLocale.setting}}\r\n            </div>\r\n        </div>\r\n        <lib-dynamic-view #dynamicview [locale]=\"opts?.dynamicLocale\" (valueChange)=\"onDynamicValueChanged($event)\"\r\n            [data]=\"opts?.dynamicValue\" [futureMaxDays]=\"opts?.futureMaxDays || 30\" [previousMaxDays]=\"opts?.previousMaxDays || 30\"></lib-dynamic-view>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\">\r\n        <button (click)=\"onDynamicOkClick($event, dynamicview)\" class=\"btn btn-primary f-datepicker-makesure-btn\" [disabled]=\"btnDynamicDisabled\">\r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<div class=\"f-datepicker-container\" tabindex=\"0\" #selectorEl *ngIf=\"multiSelect\"\r\n    [ngStyle]=\"{top: selectorPos.top + 'px',left: selectorPos.left + 'px',width: getWidth()}\"\r\n    (keyup)=\"onCloseSelector($event)\" (click)=\"onContainerClick($event)\"\r\n    style=\"transition: all 0.2s ease 0s;\" [style.display]=\"(opts?.enableDynamic ? !opts?.showDynamicView: true ) ? '': 'none'\">\r\n    <lib-selection-sidebar *ngIf=\"opts.shortcuts[0]\" [opts]=\"opts\" (setTime)=\"setTime($event)\"></lib-selection-sidebar>\r\n    <div class=\"f-datepicker-content\" [ngStyle]=\"{'margin-left': opts.shortcuts[0] ? '100px' : 0}\" >\r\n        <lib-selection-bar\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectMonth]=\"selectMonth\"\r\n            [selectYear]=\"selectYear\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            [prevDobViewDisabled]=\"prevDobViewDisabled\"\r\n            [nextDobViewDisabled]=\"nextDobViewDisabled\"\r\n            (prevNavigateBtnClicked)=\"onPrevNavigateBtnClicked($event)\"\r\n            (nextNavigateBtnClicked)=\"onNextNavigateBtnClicked($event)\"\r\n            (monthViewBtnClicked)=\"onMonthViewBtnClicked()\"\r\n            (yearViewBtnClicked)=\"onYearViewBtnClicked()\"\r\n        ></lib-selection-bar>\r\n\r\n        <lib-multi-day-view\r\n            *ngIf=\"!selectMonth && !selectYear && !selectTime\"\r\n            [opts]=\"opts\"\r\n            [dates]=\"dates\"\r\n            [weekDays]=\"weekDays\"\r\n            [selectedDates]=\"selectedDates\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [selectedWeek]=\"selectedWeek\"\r\n            (dayCellClicked)=\"onDayCellClickedForMultiDates($event)\"\r\n            (dayCellKeyDown)=\"onDayCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onDayCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onDayCellMouseLeave($event)\"\r\n            (weekClicked)=\"onWeekClicked($event)\"\r\n        ></lib-multi-day-view>\r\n        <lib-month-view\r\n            *ngIf=\"selectMonth\"\r\n            [opts]=\"opts\"\r\n            [months]=\"months\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            (monthCellClicked)=\"onMonthCellClicked($event, false)\"\r\n            (monthCellKeyDown)=\"onMonthCellKeyDown($event)\"\r\n            (onMouseEnter)=\"onMonthCellMouseEnter($event, false)\"\r\n            (onMouseLeave)=\"onMonthCellMouseLeave($event)\"\r\n        ></lib-month-view>\r\n\r\n        <lib-year-view\r\n            *ngIf=\"selectYear\"\r\n            [opts]=\"opts\"\r\n            [years]=\"years\"\r\n            [visibleMonth]=\"visibleMonth\"\r\n            [selectedDate]=\"selectedDate\"\r\n            [selectedDateRange]=\"selectedDateRange\"\r\n            [prevViewDisabled]=\"prevViewDisabled\"\r\n            [nextViewDisabled]=\"nextViewDisabled\"\r\n            (yearCellClicked)=\"onYearCellClicked($event)\"\r\n            (yearCellKeyDown)=\"onYearCellKeyDown($event)\"\r\n            (prevCellClicked)=\"onPrevNavigateBtnClicked()\"\r\n            (nextCellClicked)=\"onNextNavigateBtnClicked()\"\r\n            (onMouseEnter)=\"onYearCellMouseEnter($event)\"\r\n            (onMouseLeave)=\"onYearCellMouseLeave($event)\"\r\n        ></lib-year-view>\r\n    </div>\r\n    <div class=\"f-datepicker-content\" style=\"width: 198px;border-left: 1px solid #E4E7EF;\">\r\n        <multi-days [selectedDates]=\"selectedDates\" (clicked)=\"onSelectDateClicked($event)\" \r\n        (removed)=\"onMultiDateRemoved($event)\" (clear)=\"onMultiDateClear($event)\" [locales]=\"opts.mulstiDatesLocale\"></multi-days>\r\n    </div>\r\n\r\n    <div class=\"f-datepicker-commitBtn-wrapper\" style=\"justify-content: end;\">\r\n        <button class=\"btn btn-link f-datepicker-select-btn\" *ngIf=\"showGoBackToday()\" (click)=\"gototodayView($event)\"> {{ opts.mulstiDatesLocale.backtotoday || '\u56DE\u5230\u4ECA\u5929'}} </button>\r\n        <button class=\"btn btn-primary f-datepicker-makesure-btn\" (click)=\"onMultiDatesOkClicked($event)\">    \r\n            {{ opts.commitBtnText ? opts.commitBtnText : \"OK\" }}\r\n        </button>\r\n    </div>\r\n    <span class=\"arrow\"></span>\r\n</div>",
                    providers: [UtilService],
                    encapsulation: ViewEncapsulation.None
                }] }
    ];
    /** @nocollapse */
    CalendarComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: UtilService }
    ]; };
    CalendarComponent.propDecorators = {
        selectorEl: [{ type: ViewChild, args: ['selectorEl',] }],
        styleEl: [{ type: ViewChild, args: ['styleEl',] }],
        endTimeRef: [{ type: ViewChild, args: ['endTimeRef',] }],
        dynamicViewEle: [{ type: ViewChild, args: ['dynamicViewEle',] }],
        position: [{ type: HostBinding, args: ['style.position',] }],
        dynamicViewShow: [{ type: Output }]
    };
    return CalendarComponent;
}());
export { CalendarComponent };
if (false) {
    /** @type {?} */
    CalendarComponent.prototype.selectorEl;
    /** @type {?} */
    CalendarComponent.prototype.styleEl;
    /** @type {?} */
    CalendarComponent.prototype.endTimeRef;
    /** @type {?} */
    CalendarComponent.prototype.dynamicViewEle;
    /** @type {?} */
    CalendarComponent.prototype.position;
    /** @type {?} */
    CalendarComponent.prototype.dynamicViewShow;
    /** @type {?} */
    CalendarComponent.prototype.dateHlp;
    /** @type {?} */
    CalendarComponent.prototype.opts;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth;
    /** @type {?} */
    CalendarComponent.prototype.visibleMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectedMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectedDate;
    /** @type {?} */
    CalendarComponent.prototype.selectedDateRange;
    /** @type {?} */
    CalendarComponent.prototype.selectedWeek;
    /** @type {?} */
    CalendarComponent.prototype.weekDays;
    /** @type {?} */
    CalendarComponent.prototype.dates;
    /** @type {?} */
    CalendarComponent.prototype.dates_range;
    /** @type {?} */
    CalendarComponent.prototype.months;
    /** @type {?} */
    CalendarComponent.prototype.months_range;
    /** @type {?} */
    CalendarComponent.prototype.years;
    /** @type {?} */
    CalendarComponent.prototype.years_range;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue;
    /** @type {?} */
    CalendarComponent.prototype.timeVlaue_range;
    /** @type {?} */
    CalendarComponent.prototype.multiSelect;
    /** @type {?} */
    CalendarComponent.prototype.dayIdx;
    /** @type {?} */
    CalendarComponent.prototype.weekDayOpts;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth;
    /** @type {?} */
    CalendarComponent.prototype.selectMonth_range;
    /** @type {?} */
    CalendarComponent.prototype.selectYear;
    /** @type {?} */
    CalendarComponent.prototype.selectYear_range;
    /** @type {?} */
    CalendarComponent.prototype.selectTime;
    /** @type {?} */
    CalendarComponent.prototype.dateChanged;
    /** @type {?} */
    CalendarComponent.prototype.calendarViewChanged;
    /** @type {?} */
    CalendarComponent.prototype.rangeDateSelection;
    /** @type {?} */
    CalendarComponent.prototype.multiDatesChanged;
    /** @type {?} */
    CalendarComponent.prototype.closedByEsc;
    /** @type {?} */
    CalendarComponent.prototype.selectorPos;
    /** @type {?} */
    CalendarComponent.prototype.scrollDiff;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled;
    /** @type {?} */
    CalendarComponent.prototype.prevViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.prevDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.nextDobViewDisabled_range;
    /** @type {?} */
    CalendarComponent.prototype.showNotify;
    /**
     * 多选
     * @type {?}
     */
    CalendarComponent.prototype.selectedDates;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds;
    /** @type {?} */
    CalendarComponent.prototype.disabledHours2;
    /** @type {?} */
    CalendarComponent.prototype.disabledMinutes2;
    /** @type {?} */
    CalendarComponent.prototype.disabledSeconds2;
    /** @type {?} */
    CalendarComponent.prototype.btnDynamicDisabled;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    CalendarComponent.prototype.utilService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU1ySixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RGLE9BQU8sRUFDSCxHQUFHLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFDMUYsY0FBYyxFQUFFLGNBQWMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUN4RSxNQUFNLDJCQUEyQixDQUFDO0FBQ25DLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxPQUFPLEVBQThCLE1BQU0sV0FBVyxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUdqRTtJQWlJSSwyQkFBb0IsUUFBbUIsRUFBVSxHQUFzQixFQUFVLFdBQXdCO1FBQXpHLGlCQUE4RztRQUExRixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQVUsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFBVSxnQkFBVyxHQUFYLFdB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Q0FBeUI7O0lBQ3pCLGdEQUE0Qjs7SUFDNUIsZ0RBQTRCOztJQUU1QixtREFBK0I7O0lBQy9CLG1EQUErQjs7SUFDL0Isc0RBQWtDOztJQUNsQyxzREFBa0M7O0lBRWxDLHVDQUF1Qjs7Ozs7SUFHdkIsMENBQW1COztJQVNuQiwwQ0FNQzs7SUFFRCw0Q0FNQzs7SUFFRCw0Q0FNQzs7SUFHRCwyQ0FNQzs7SUFFRCw2Q0FNQzs7SUFFRCw2Q0FNQzs7SUFFRCwrQ0FBMEI7Ozs7O0lBRWQscUNBQTJCOzs7OztJQUFFLGdDQUE4Qjs7Ozs7SUFBRSx3Q0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3Q2hpbGQsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEhvc3RCaW5kaW5nLCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1xyXG4gICAgSU15RGF0ZSwgSU15RGF0ZVJhbmdlLCBJTXlNb250aCwgSU15Q2FsZW5kYXJEYXksIElNeUNhbGVuZGFyTW9udGgsIElNeUNhbGVuZGFyWWVhcixcclxuICAgIElNeVdlZWssIElNeU9wdGlvbnMsIElNeVNlbGVjdG9yUG9zaXRpb24sIElNeUNhbGVuZGFyVmlld0NoYW5nZWQsIElNeVJhbmdlRGF0ZVNlbGVjdGlvbiwgSU15RGF0ZU1vZGVsLFxyXG4gICAgSU15TW9udGhSb3dcclxufSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3B1YmxpYy1hcGknO1xyXG5pbXBvcnQgeyBVdGlsU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3B1YmxpYy1hcGknO1xyXG5pbXBvcnQgeyBEZWZhdWx0VmlldywgS2V5Q29kZSwgTW9udGhJZCwgUmVzZXREYXRlVHlwZSB9IGZyb20gJy4uLy4uL2VudW1zL3B1YmxpYy1hcGknO1xyXG5pbXBvcnQge1xyXG4gICAgRE9ULCBVTkRFUl9MSU5FLCBELCBNLCBZLCBEQVRFX1JPV19DT1VOVCwgREFURV9DT0xfQ09VTlQsIE1PTlRIX1JPV19DT1VOVCwgTU9OVEhfQ09MX0NPVU5ULFxyXG4gICAgWUVBUl9ST1dfQ09VTlQsIFlFQVJfQ09MX0NPVU5ULCBTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQSwgRU1QVFlfU1RSLCBTVFlMRVxyXG59IGZyb20gJy4uLy4uL2NvbnN0YW50cy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBUaW1lUGlja2VyUGFuZWxDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLXRpbWUtcGlja2VyJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgY2xvbmVEZWVwLCBzb3J0QnksIG9yZGVyQnkgfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBWaWV3VHlwZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvbXktb3B0aW9ucy5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBEYXRlVGltZUhlbHBlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi9kYXRlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGF0ZXBpY2tlci1jYWxlbmRhcicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgcHJvdmlkZXJzOiBbVXRpbFNlcnZpY2VdLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJDb21wb25lbnQge1xyXG4gICAgQFZpZXdDaGlsZCgnc2VsZWN0b3JFbCcpIHNlbGVjdG9yRWw6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzdHlsZUVsJykgc3R5bGVFbDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2VuZFRpbWVSZWYnKSBlbmRUaW1lUmVmOiBUaW1lUGlja2VyUGFuZWxDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdkeW5hbWljVmlld0VsZScpIGR5bmFtaWNWaWV3RWxlOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnc3R5bGUucG9zaXRpb24nKSBwb3NpdGlvbiA9ICdzdGF0aWMnO1xyXG5cclxuICAgIEBPdXRwdXQoKSBkeW5hbWljVmlld1Nob3cgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgZGF0ZUhscDogRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICBvcHRzOiBJTXlPcHRpb25zO1xyXG4gICAgdmlzaWJsZU1vbnRoOiBJTXlNb250aCA9IHsgbW9udGhUeHQ6IEVNUFRZX1NUUiwgbW9udGhOYnI6IDAsIHllYXI6IDAsIHllYXJUeHQ6IEVNUFRZX1NUUiB9O1xyXG4gICAgdmlzaWJsZU1vbnRoX3JhbmdlOiBJTXlNb250aCA9IHsgbW9udGhUeHQ6IEVNUFRZX1NUUiwgbW9udGhOYnI6IDAsIHllYXI6IDAsIHllYXJUeHQ6IEVNUFRZX1NUUiB9O1xyXG4gICAgc2VsZWN0ZWRNb250aDogSU15TW9udGggPSB7IG1vbnRoTmJyOiAwLCB5ZWFyOiAwIH07XHJcbiAgICBzZWxlY3RlZE1vbnRoX3JhbmdlOiBJTXlNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IDAgfTtcclxuICAgIHNlbGVjdGVkRGF0ZTogSU15RGF0ZSA9IHsgeWVhcjogMCwgbW9udGg6IDAsIGRheTogMCB9O1xyXG4gICAgc2VsZWN0ZWREYXRlUmFuZ2U6IElNeURhdGVSYW5nZSA9IHsgYmVnaW46IHsgeWVhcjogMCwgbW9udGg6IDAsIGRheTogMCB9LCBlbmQ6IHsgeWVhcjogMCwgbW9udGg6IDAsIGRheTogMCB9IH07XHJcbiAgICBzZWxlY3RlZFdlZWs6IElNeVdlZWsgPSB7IHdlZWtOYnI6IDAsIHllYXI6IDAgfTtcclxuICAgIHdlZWtEYXlzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICBkYXRlczogQXJyYXk8SU15V2Vlaz4gPSBbXTtcclxuICAgIGRhdGVzX3JhbmdlOiBBcnJheTxJTXlXZWVrPiA9IFtdO1xyXG4gICAgbW9udGhzOiBBcnJheTxJTXlNb250aFJvdz4gPSBbXTtcclxuICAgIG1vbnRoc19yYW5nZTogQXJyYXk8SU15TW9udGhSb3c+ID0gW107XHJcbiAgICB5ZWFyczogQXJyYXk8QXJyYXk8SU15Q2FsZW5kYXJZZWFyPj4gPSBbXTtcclxuICAgIHllYXJzX3JhbmdlOiBBcnJheTxBcnJheTxJTXlDYWxlbmRhclllYXI+PiA9IFtdO1xyXG4gICAgdGltZVZsYXVlOiBzdHJpbmc7XHJcbiAgICB0aW1lVmxhdWVfcmFuZ2U6IHN0cmluZztcclxuXHJcbiAgICBtdWx0aVNlbGVjdCA9IGZhbHNlO1xyXG5cclxuICAgIGRheUlkeCA9IDA7XHJcbiAgICB3ZWVrRGF5T3B0czogQXJyYXk8c3RyaW5nPiA9IFtTVSwgTU8sIFRVLCBXRSwgVEgsIEZSLCBTQV07XHJcblxyXG4gICAgc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgIHNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICBzZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICBzZWxlY3RUaW1lID0gZmFsc2U7XHJcblxyXG4gICAgZGF0ZUNoYW5nZWQ6IChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIGNhbGVuZGFyVmlld0NoYW5nZWQ6IChjdmM6IElNeUNhbGVuZGFyVmlld0NoYW5nZWQpID0+IHZvaWQ7XHJcbiAgICByYW5nZURhdGVTZWxlY3Rpb246IChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4gdm9pZDtcclxuICAgIG11bHRpRGF0ZXNDaGFuZ2VkOiAoZGF0ZXM6IGFueVtdKSA9PiB2b2lkO1xyXG5cclxuICAgIGNsb3NlZEJ5RXNjOiAoKSA9PiB2b2lkO1xyXG4gICAgc2VsZWN0b3JQb3M6IElNeVNlbGVjdG9yUG9zaXRpb24gPSBudWxsO1xyXG4gICAgc2Nyb2xsRGlmZiA9IDA7XHJcblxyXG4gICAgcHJldlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dFZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgcHJldkRvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgbmV4dERvYlZpZXdEaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIHByZXZEb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuICAgIG5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSBmYWxzZTtcclxuXHJcbiAgICBzaG93Tm90aWZ5OiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIC8qKiDlpJrpgIkgKi9cclxuICAgIHNlbGVjdGVkRGF0ZXMgPSBbXTtcclxuXHJcbiAgICBnZXRUaW1lU3RyKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRIb3VycygpKTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5nZXRNaW51dGVzKCkpO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhkYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXJ9OiR7bWludXRlfToke3NlY29uZH1gO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE5bCP5pe2XHJcbiAgICBkaXNhYmxlZEhvdXJzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZEhvdXJzKG1pbiwgbWF4LCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIC8vIOemgeeUqOaXpeacn+aXtumXtOaOp+S7tuS4reeahOaXtumXtOauteeahOWIhumSn1xyXG4gICAgZGlzYWJsZWRNaW51dGVzID0gKGhvdXI6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZE1pbnV0ZXMobWluLCBtYXgsIGhvdXIsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE56eSXHJcbiAgICBkaXNhYmxlZFNlY29uZHMgPSAoaG91cjogbnVtYmVyLCBtaW51dGU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZFNlY29uZHMobWluLCBtYXgsIGhvdXIsIG1pbnV0ZSwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRpc2FibGVkSG91cnMyID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IHRoaXMub3B0cy5kaXNhYmxlVW50aWw7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5vcHRzLmRpc2FibGVTaW5jZTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRoaXMub3B0cy5kYXRlUmFuZ2UgPyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA6IHRoaXMuc2VsZWN0ZWREYXRlO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMudXRpbFNlcnZpY2UuZGlzYWJsZWRIb3VycyhtaW4sIG1heCwgY3VycmVudERhdGUpO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICAvLyDnpoHnlKjml6XmnJ/ml7bpl7Tmjqfku7bkuK3nmoTml7bpl7TmrrXnmoTliIbpkp9cclxuICAgIGRpc2FibGVkTWludXRlczIgPSAoaG91cjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5vcHRzLmRpc2FibGVVbnRpbDtcclxuICAgICAgICBjb25zdCBtYXggPSB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gdGhpcy5vcHRzLmRhdGVSYW5nZSA/IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kIDogdGhpcy5zZWxlY3RlZERhdGU7XHJcbiAgICAgICAgY29uc3QgcmVzID0gdGhpcy51dGlsU2VydmljZS5kaXNhYmxlZE1pbnV0ZXMobWluLCBtYXgsIGhvdXIsIGN1cnJlbnREYXRlKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgLy8g56aB55So5pel5pyf5pe26Ze05o6n5Lu25Lit55qE5pe26Ze05q6155qE56eSXHJcbiAgICBkaXNhYmxlZFNlY29uZHMyID0gKGhvdXI6IG51bWJlciwgbWludXRlOiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBtaW4gPSB0aGlzLm9wdHMuZGlzYWJsZVVudGlsO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IHRoaXMub3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0aGlzLm9wdHMuZGF0ZVJhbmdlID8gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgOiB0aGlzLnNlbGVjdGVkRGF0ZTtcclxuICAgICAgICBjb25zdCByZXMgPSB0aGlzLnV0aWxTZXJ2aWNlLmRpc2FibGVkU2Vjb25kcyhtaW4sIG1heCwgaG91ciwgbWludXRlLCBjdXJyZW50RGF0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICBidG5EeW5hbWljRGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLCBwcml2YXRlIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZSkgeyB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZShcclxuICAgICAgICBvcHRzOiBJTXlPcHRpb25zLFxyXG4gICAgICAgIGRlZmF1bHRNb250aDogc3RyaW5nLFxyXG4gICAgICAgIHNlbGVjdG9yUG9zOiBJTXlTZWxlY3RvclBvc2l0aW9uLFxyXG4gICAgICAgIGlucHV0VmFsdWU6IHN0cmluZyxcclxuICAgICAgICBkYzogKGRtOiBJTXlEYXRlTW9kZWwsIGNsb3NlOiBib29sZWFuKSA9PiB2b2lkLFxyXG4gICAgICAgIGN2YzogKGN2YzogSU15Q2FsZW5kYXJWaWV3Q2hhbmdlZCkgPT4gdm9pZCxcclxuICAgICAgICByZHM6IChyZHM6IElNeVJhbmdlRGF0ZVNlbGVjdGlvbikgPT4gdm9pZCxcclxuICAgICAgICBjYmU6ICgpID0+IHZvaWRcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvclBvcyA9IHNlbGVjdG9yUG9zO1xyXG4gICAgICAgIHRoaXMud2Vla0RheXMubGVuZ3RoID0gMDtcclxuICAgICAgICBjb25zdCB7IGRlZmF1bHRWaWV3LCBkYXRlUmFuZ2UsIGZpcnN0RGF5T2ZXZWVrLCBkYXlMYWJlbHMsIHN0eWxlc0RhdGEsIHllYXJUeHQsIG11bHRpU2VsZWN0LCBzZXBhcmF0b3IsIHNlbGVjdGVkT3JkZXJCeSB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXJUeHQgPSB5ZWFyVHh0O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXJUeHQgPSB5ZWFyVHh0O1xyXG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3QgPSBtdWx0aVNlbGVjdDtcclxuICAgICAgICAvLyBpZiAoc3R5bGVzRGF0YS5zdHlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHN0eWxlRWxUZW1wOiBhbnkgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoU1RZTEUpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHN0eWxlRWxUZW1wLCB0aGlzLnJlbmRlcmVyLmNyZWF0ZVRleHQoc3R5bGVzRGF0YS5zdHlsZXMpKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwubmF0aXZlRWxlbWVudCwgc3R5bGVFbFRlbXApO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXlJZHggPSB0aGlzLndlZWtEYXlPcHRzLmluZGV4T2YoZmlyc3REYXlPZldlZWspO1xyXG4gICAgICAgIGlmICh0aGlzLmRheUlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgbGV0IGlkeDogbnVtYmVyID0gdGhpcy5kYXlJZHg7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWVrRGF5T3B0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrRGF5cy5wdXNoKGRheUxhYmVsc1t0aGlzLndlZWtEYXlPcHRzW2lkeF1dKTtcclxuICAgICAgICAgICAgICAgIGlkeCA9IHRoaXMud2Vla0RheU9wdHNbaWR4XSA9PT0gU0EgPyAwIDogaWR4ICsgMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgaXNJbkRpc2FibGVSYW5nZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUodG9kYXksIHRoaXMub3B0cyk7XHJcbiAgICAgICAgdG9kYXkgPSAhaXNJbkRpc2FibGVSYW5nZSA/IHRvZGF5IDogdGhpcy51dGlsU2VydmljZS5nZXROZWFyRGF0ZSh0b2RheSwgdGhpcy5vcHRzLmRpc2FibGVVbnRpbCwgdGhpcy5vcHRzLmRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoZGVmYXVsdFZpZXcpIHtcclxuICAgICAgICAgICAgY2FzZSBEZWZhdWx0Vmlldy5Nb250aDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IDAsIHllYXI6IHRvZGF5LnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEZWZhdWx0Vmlldy5ZZWFyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogMCwgeWVhcjogdG9kYXkueWVhciB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlID0geyBtb250aE5icjogMCwgeWVhcjogdG9kYXkueWVhciArIDEwIH07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aCA9IHsgbW9udGhOYnI6IHRvZGF5Lm1vbnRoLCB5ZWFyOiB0b2RheS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICBpZiAodG9kYXkubW9udGggPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAxLCB5ZWFyOiB0b2RheS55ZWFyICsgMSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiB0b2RheS5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWUsIHllYXI6IHRvZGF5LnllYXIgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVmYXVsdE1vbnRoICYmIGRlZmF1bHRNb250aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0gdGhpcy51dGlsU2VydmljZS5wYXJzZURlZmF1bHRNb250aChkZWZhdWx0TW9udGgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhcnNlRGVmYXVsdE1vbnRoKGRlZmF1bHRNb250aCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIgPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnIgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLm1vbnRoTmJyICsgdGhpcy5vcHRzLm1vbnRoUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5pel5pyf5aSa6YCJXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QgJiYgaW5wdXRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZXMgPSBpbnB1dFZhbHVlLnNwbGl0KHNlcGFyYXRvcikubWFwKG4gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdHMucmV0dXJuRm9ybWF0ID09PSAneXl5eU1NZGQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoID4gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5kYXRlSGxwLmZvcm1hdFRvKG4sIHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfZE9iaiA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQobiwgdGhpcy5vcHRzLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9kT2JqLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoX2RPYmosIHRoaXMub3B0cy5kYXRlRm9ybWF0LCB0aGlzLm9wdHMubW9udGhMYWJlbHMpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IHRoaXMudXRpbFNlcnZpY2Uub3JkZXJTZWxlY3RlZERhdGVzKHRoaXMuc2VsZWN0ZWREYXRlcywgc2VsZWN0ZWRPcmRlckJ5KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFkYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmdsZSBkYXRlIG1vZGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGU6IElNeURhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKGlucHV0VmFsdWUsIHRoaXMub3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUuaG91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGRhdGUubWludXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZGF0ZS5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0geyBtb250aE5icjogZGF0ZS5tb250aCwgeWVhcjogZGF0ZS55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEYXRlIHJhbmdlIG1vZGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZERhdGVSYW5nZShpbnB1dFZhbHVlLCB0aGlzLm9wdHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoYmVnaW4pICYmIHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZW5kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UgPSB7IGJlZ2luLCBlbmQgfTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gdGhpcy51dGlsU2VydmljZS5wcmVaZXJvKGJlZ2luLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhiZWdpbi5taW51dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhiZWdpbi5zZWNvbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gYCR7aG91cn06JHttaW51dGV9OiR7c2Vjb25kfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2hvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZW5kLmhvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9taW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnByZVplcm8oZW5kLm1pbnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3NlY29uZCA9IHRoaXMudXRpbFNlcnZpY2UucHJlWmVybyhlbmQuc2Vjb25kKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZV9yYW5nZSA9IGAke19ob3VyfToke19taW51dGV9OiR7X3NlY29uZH1gO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGggPSB7IG1vbnRoTmJyOiBiZWdpbi5tb250aCwgeWVhcjogYmVnaW4ueWVhciB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmVnaW4ubW9udGggPT09IGVuZC5tb250aCAmJiBiZWdpbi55ZWFyID09PSBlbmQueWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kLm1vbnRoID49IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiAxLCB5ZWFyOiBlbmQueWVhciArIDEgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmR5ZWFyID0gZW5kLnllYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZpZXcgPT09IERlZmF1bHRWaWV3Lk1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5keWVhciA9IGVuZHllYXIgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IGVuZC5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWUsIHllYXI6IGVuZHllYXIgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuTW9udGggJiYgYmVnaW4ueWVhciA9PT0gZW5kLnllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZSA9IHsgbW9udGhOYnI6IGVuZC5tb250aCwgeWVhcjogZW5kLnllYXIgKyAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UgPSB7IG1vbnRoTmJyOiBlbmQubW9udGgsIHllYXI6IGVuZC55ZWFyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRmcyA1NzkzNThcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgZW5kRGF5V2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihlbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLm9wdHMuZmlyc3REYXlPZldlZWsgPT09ICdzdScpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgZW5kRGF5V2Vla05iciAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCB3ZWVrTmJyID0gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGJlZ2luKSA9PT0gZW5kRGF5V2Vla05iciA/IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihiZWdpbik6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZU9iaiA9IHRoaXMub3B0cy5maXJzdERheU9mV2VlayA9PSAnc3UnID8gZW5kOiBiZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcihkYXRlT2JqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB7IHdlZWtOYnIsIHllYXI6IGJlZ2luLnllYXIgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQgPSBkYztcclxuICAgICAgICB0aGlzLmNhbGVuZGFyVmlld0NoYW5nZWQgPSBjdmM7XHJcbiAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24gPSByZHM7XHJcbiAgICAgICAgdGhpcy5jbG9zZWRCeUVzYyA9IGNiZTtcclxuICAgICAgICB0aGlzLnNldENhbGVuZGFyVmlzaWJsZU1vbnRoKCk7XHJcblxyXG4gICAgICAgIGlmIChkZWZhdWx0VmlldyA9PT0gRGVmYXVsdFZpZXcuTW9udGgpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vbnRoVmlld0J0bkNsaWNrZWQoKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vbnRoVmlld0J0bkNsaWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGRlZmF1bHRWaWV3ID09PSBEZWZhdWx0Vmlldy5ZZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25ZZWFyVmlld0J0bkNsaWNrZWQoKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblllYXJWaWV3QnRuQ2xpY2tlZCh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXREYXRlVmFsdWUodmFsdWU6IFJlc2V0RGF0ZVR5cGUpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IFJlc2V0RGF0ZVR5cGUuc2luZ2xlRGF0ZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBSZXNldERhdGVUeXBlLmRhdGVSYW5nZSB8fCB2YWx1ZSA9PT0gUmVzZXREYXRlVHlwZS5ib3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0TW9udGhZZWFyU2VsZWN0KGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb250aFZpZXdCdG5DbGlja2VkKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RUaW1lID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSAhdGhpcy5zZWxlY3RNb250aDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aF9yYW5nZSA9ICF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyID0gdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJNb250aCwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1jOiBib29sZWFuID0gY2VsbC5uYnIgIT09IG1vbnRoTmJyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aCA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbY2VsbC5uYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IGNlbGwubmJyLFxyXG4gICAgICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyID0gdGhpcy52aXNpYmxlTW9udGgueWVhcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b1NlbGVjdE1vbnRoKHRoaXMudmlzaWJsZU1vbnRoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihjZWxsLm5iciwgeWVhciwgbWMsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGhfcmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYzogYm9vbGVhbiA9IGNlbGwubmJyICE9PSBtb250aE5icjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW2NlbGwubmJyXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBjZWxsLm5icixcclxuICAgICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RNb250aCh0aGlzLnZpc2libGVNb250aF9yYW5nZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoY2VsbC5uYnIsIHllYXIsIG1jLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vbnRoQ2VsbEtleURvd24oY2VsbDogSU15Q2FsZW5kYXJNb250aCkge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBNT05USF9ST1dfQ09VTlQsXHJcbiAgICAgICAgICAgIE1PTlRIX0NPTF9DT1VOVFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChtb3ZlRm9jdXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c0NlbGxFbGVtZW50KE0sIHRhcmdldFJvdywgdGFyZ2V0Q29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25ZZWFyVmlld0J0bkNsaWNrZWQoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhciA9IHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMudmlzaWJsZU1vbnRoLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyLCB0aGlzLnZpc2libGVNb250aC55ZWFyLCBmYWxzZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gIXRoaXMuc2VsZWN0TW9udGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RZZWFyID0gIXRoaXMuc2VsZWN0WWVhcjtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RNb250aCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIgPSB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcih0aGlzLnZpc2libGVNb250aF9yYW5nZS5tb250aE5iciwgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciwgZmFsc2UsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IHRoaXMub3B0cy5zaG93VHlwZSA9PT0gMyA/IHRydWUgOiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxDbGlja2VkKGNlbGw6IElNeUNhbGVuZGFyWWVhciwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciwgbW9udGhUeHQgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeWM6IGJvb2xlYW4gPSBjZWxsLnllYXIgIT09IHllYXI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0geyBtb250aFR4dCwgbW9udGhOYnIsIHllYXI6IGNlbGwueWVhciwgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHQgfTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoLnllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2VsZWN0WWVhcih7IHllYXI6IHRoaXMudmlzaWJsZU1vbnRoLnllYXIgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLnNob3dUeXBlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtb250aE5iciwgY2VsbC55ZWFyLCB5YywgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIsIG1vbnRoVHh0IH0gPSB0aGlzLnZpc2libGVNb250aF9yYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHljOiBib29sZWFuID0gY2VsbC55ZWFyICE9PSB5ZWFyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIG1vbnRoVHh0LFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiBjZWxsLnllYXIsXHJcbiAgICAgICAgICAgICAgICB5ZWFyVHh0OiB0aGlzLm9wdHMueWVhclR4dFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UueWVhciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9TZWxlY3RZZWFyKHsgeWVhcjogdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFllYXJfcmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoTmJyLCBjZWxsLnllYXIsIHljLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhcl9yYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uWWVhckNlbGxLZXlEb3duKGNlbGw6IElNeUNhbGVuZGFyWWVhcikge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBZRUFSX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgWUVBUl9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChZLCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdG9kYXk6IElNeURhdGUgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgY29uc3QgeyBkaXNhYmxlVW50aWwsIGRpc2FibGVTaW5jZSB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6b25lLXZhcmlhYmxlLXBlci1kZWNsYXJhdGlvblxyXG4gICAgICAgIGxldCB5ZWFyOiBudW1iZXIsIG1vbnRoTmJyOiBudW1iZXI7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aC55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHllYXIgPSB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyO1xyXG4gICAgICAgICAgICBtb250aE5iciA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLm1vbnRoTmJyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTI7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCByb3c6IEFycmF5PElNeUNhbGVuZGFyTW9udGg+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgaSArIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQ6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgeWVhciwgbW9udGg6IGosIGRheTogdGhpcy5kYXlzSW5Nb250aChqLCB5ZWFyKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW50aWxcclxuICAgICAgICAgICAgICAgICAgICApIHx8IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlU2luY2UoeyB5ZWFyLCBtb250aDogaiwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm93LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5icjogaixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm9wdHMubW9udGhMYWJlbHNbal0sXHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyck1vbnRoOiBqID09PSB0b2RheS5tb250aCAmJiB5ZWFyID09PSB0b2RheS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoT2JqOiB7IHllYXIsIG1vbnRoOiBqIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb250aHMucHVzaCh7IHJvdywgeWVhciB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9udGhzX3JhbmdlLnB1c2goeyByb3csIHllYXIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRNb250aFZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKHllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihpc1NlY29uZENhbGVuZGFyPyB0aGlzLnZpc2libGVNb250aF9yYW5nZS5tb250aE5iciA6IHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyLCB5ZWFyLCBmYWxzZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVZZWFycyhpbnB1dFllYXI6IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IG1pblllYXIsIG1heFllYXIsIGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGxldCB5OiBudW1iZXIgPSBpbnB1dFllYXIgLSAoaW5wdXRZZWFyICUgMTApO1xyXG5cclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnZpc2libGVNb250aDtcclxuXHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMueWVhcnMubGVuZ3RoID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMueWVhcnNfcmFuZ2UubGVuZ3RoICYmICgodGhpcy55ZWFycyYmIHRoaXMueWVhcnMubGVuZ3RoKSAmJiB5IDwgdGhpcy55ZWFyc1szXVsyXS55ZWFyICYmIHkgPiB0aGlzLnllYXJzWzBdWzBdLnllYXIpICAmJiB0aGlzLm9wdHMuc2hvd1R5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHkrPSAxMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnllYXJzX3JhbmdlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFllYXJzID0gZmxhdHRlbjxhbnk+KHRoaXMueWVhcnNfcmFuZ2UpO1xyXG4gICAgICAgICAgICBpZiAoYWxsWWVhcnMuZmluZEluZGV4KG4gPT4gbi55ZWFyID09IGlucHV0WWVhcikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMueWVhcnNfcmFuZ2VbM11bMl0ueWVhcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHkgLSAxOyBpIDwgeSArIDEwOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93OiBBcnJheTxJTXlDYWxlbmRhclllYXI+ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgaSArIDM7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQ6IGJvb2xlYW4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6IGosXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aDogbW9udGhOYnIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXk6IHRoaXMuZGF5c0luTW9udGgobW9udGhOYnIsIGopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbnRpbFxyXG4gICAgICAgICAgICAgICAgICAgICkgfHxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVNpbmNlKHsgeWVhcjogaiwgbW9udGg6IG1vbnRoTmJyLCBkYXk6IDEgfSwgZGlzYWJsZVNpbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5NYXg6IGJvb2xlYW4gPSBqIDwgbWluWWVhciB8fCBqID4gbWF4WWVhcjtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiBqLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJZZWFyOiBqID09PSB0b2RheS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBqID09PSB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBtaW5NYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgeWVhck9iajogeyB5ZWFyOiBqIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFycy5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnllYXJzX3JhbmdlLnB1c2gocm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRZZWFyVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUodGhpcy55ZWFyc1swXVsxXS55ZWFyLCB0aGlzLnllYXJzWzNdWzFdLnllYXIsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0WWVhclZpZXdIZWFkZXJCdG5EaXNhYmxlZFN0YXRlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZVswXVsxXS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy55ZWFyc19yYW5nZVszXVsxXS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgaXNTZWNvbmRDYWxlbmRhclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDYWxlbmRhclZpc2libGVNb250aCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBTZXRzIHZpc2libGUgbW9udGggb2YgY2FsZW5kYXJcclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoTmJyIH0gPSB0aGlzLnNlbGVjdGVkTW9udGg7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7XHJcbiAgICAgICAgICAgIG1vbnRoVHh0OiB0aGlzLm9wdHMubW9udGhMYWJlbHNbbW9udGhOYnJdLFxyXG4gICAgICAgICAgICBtb250aE5icixcclxuICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgY3VycmVudCBtb250aFxyXG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1t0aGlzLnNlbGVjdGVkTW9udGhfcmFuZ2UubW9udGhOYnJdLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5icixcclxuICAgICAgICAgICAgICAgIHllYXI6IHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS55ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKHRoaXMuc2VsZWN0ZWRNb250aF9yYW5nZS5tb250aE5iciwgdGhpcy5zZWxlY3RlZE1vbnRoX3JhbmdlLnllYXIsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIobW9udGhOYnIsIHllYXIsIHRydWUsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBvblByZXZOYXZpZ2F0ZUJ0bkNsaWNrZWQoZXZlbnQ/OiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzWzJdWzJdLnllYXIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGggJiYgIXRoaXMuc2VsZWN0WWVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciAtIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhci0tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVZZWFycyh0aGlzLnllYXJzX3JhbmdlWzJdWzJdLnllYXIgLSAxMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9udGhfcmFuZ2UgJiYgIXRoaXMuc2VsZWN0WWVhcl9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXItLTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyLS07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciAtIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk5leHROYXZpZ2F0ZUJ0bkNsaWNrZWQoZXZlbnQ/OiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc1syXVsyXS55ZWFyICsgMTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoICYmICF0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aC55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREYXRlVmlld01vbnRoKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGgueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVNb250aHMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNbMl1bMl0ueWVhciArIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE1vbnRoX3JhbmdlICYmICF0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0TW9udGhfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVNb250aF9yYW5nZS55ZWFyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZU1vbnRocyhpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVllYXJzKHRoaXMueWVhcnNfcmFuZ2VbMl1bMl0ueWVhciArIDEwLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RNb250aF9yYW5nZSAmJiAhdGhpcy5zZWxlY3RZZWFyX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGhfcmFuZ2UueWVhcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZVZpZXdNb250aChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlLnllYXIrKztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlTW9udGhzKGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlWWVhcnModGhpcy55ZWFyc19yYW5nZVsyXVsyXS55ZWFyICsgMTAsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGVWaWV3TW9udGgoaXNTZWNvbmRDYWxlbmRhcj86IGJvb2xlYW4sIGlzTmV4dD86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgY2hhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgaWYgKGlzTmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNoYW5nZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hhbmdlID0gaXNOZXh0ID8gMSA6IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB5ZWFyLCBtb250aE5iciB9ID0gdGhpcy52aXNpYmxlTW9udGg7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkOiBEYXRlID0gdGhpcy5nZXREYXRlKHllYXIsIG1vbnRoTmJyLCAxKTtcclxuICAgICAgICAgICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKyBjaGFuZ2UpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeTogbnVtYmVyID0gZC5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtOiBudW1iZXIgPSBkLmdldE1vbnRoKCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlTW9udGggPSB7XHJcbiAgICAgICAgICAgICAgICBtb250aFR4dDogdGhpcy5vcHRzLm1vbnRoTGFiZWxzW21dLFxyXG4gICAgICAgICAgICAgICAgbW9udGhOYnI6IG0sXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5LFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG0sIHksIHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGhOYnIgfSA9IHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5ZWFyLCBtb250aE5iciwgMSk7XHJcbiAgICAgICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHk6IG51bWJlciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbTogbnVtYmVyID0gZC5nZXRNb250aCgpICsgMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoX3JhbmdlID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttXSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTmJyOiBtLFxyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIHllYXJUeHQ6IHRoaXMub3B0cy55ZWFyVHh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcihtLCB5LCB0cnVlLCBpc1NlY29uZENhbGVuZGFyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZVNlbGVjdG9yKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBrZXlDb2RlOiBudW1iZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldEtleUNvZGVGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLmVzYykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlZEJ5RXNjKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF5Q2VsbENsaWNrZWQoY2VsbDogSU15Q2FsZW5kYXJEYXksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGNlbGwuY21vID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5jbW8gPT09IDMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5leHROYXZpZ2F0ZUJ0bkNsaWNrZWQodHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZShjZWxsLmRhdGVPYmopO1xyXG4gICAgICAgIHRoaXMucmVzZXRNb250aFllYXJTZWxlY3QoaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXlDZWxsS2V5RG93bihjZWxsOiBJTXlDYWxlbmRhckRheSkge1xyXG4gICAgICAgIC8vIE1ha2UgcG9zc2libGUgdG8gbW92ZSBmb2N1cyBieSBhcnJvdyBrZXlzXHJcbiAgICAgICAgY29uc3QgeyBzb3VyY2VSb3csIHNvdXJjZUNvbCB9ID0gdGhpcy5nZXRTb3VyY2VSb3dBbmRDb2x1bW5Gcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9ID0gdGhpcy5nZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyxcclxuICAgICAgICAgICAgc291cmNlQ29sLFxyXG4gICAgICAgICAgICBEQVRFX1JPV19DT1VOVCxcclxuICAgICAgICAgICAgREFURV9DT0xfQ09VTlRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobW92ZUZvY3VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsRWxlbWVudChELCB0YXJnZXRSb3csIHRhcmdldENvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EYXlDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3IG9mIHRoaXMuZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHcud2Vlaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheS5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF5LmRhdGVPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIGNlbGwuZGF0ZU9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5kYXRlT2JqLCBkYXkuZGF0ZU9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB3IG9mIHRoaXMuZGF0ZXNfcmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHcud2Vlaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRheS5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF5LmRhdGVPYmopICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIGNlbGwuZGF0ZU9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoZGF5LmRhdGVPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC5kYXRlT2JqLCBkYXkuZGF0ZU9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EYXlDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdyBvZiB0aGlzLmRhdGVzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiB3LndlZWspIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXkucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW9udGhDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIG1vbnRoLm1vbnRoT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKG1vbnRoLm1vbnRoT2JqLCBjZWxsLm1vbnRoT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLm1vbnRoT2JqLCBtb250aC5tb250aE9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIG1vbnRoLm1vbnRoT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKG1vbnRoLm1vbnRoT2JqLCBjZWxsLm1vbnRoT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihtb250aC5tb250aE9iaiwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihjZWxsLm1vbnRoT2JqLCBtb250aC5tb250aE9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25Nb250aENlbGxNb3VzZUxlYXZlKGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMubW9udGhzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vbnRoIG9mIGl0ZW0ucm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGgucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLm1vbnRocykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb250aCBvZiBpdGVtLnJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoLnJhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblllYXJDZWxsTW91c2VFbnRlcihjZWxsOiBhbnksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGlzU2Vjb25kQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMueWVhcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeWVhciBvZiBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhci5yYW5nZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgeWVhci55ZWFyT2JqKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHllYXIueWVhck9iaiwgY2VsbC55ZWFyT2JqKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoY2VsbC55ZWFyT2JqLCB5ZWFyLnllYXJPYmopKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIHllYXIueWVhck9iaikgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcih5ZWFyLnllYXJPYmosIGNlbGwueWVhck9iaikpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVNhbWVPckVhcmxpZXIoeWVhci55ZWFyT2JqLCB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKGNlbGwueWVhck9iaiwgeWVhci55ZWFyT2JqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblllYXJDZWxsTW91c2VMZWF2ZShpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnllYXJzX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHllYXIgb2YgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXIucmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uV2Vla0NsaWNrZWQod2Vla0RhdGE6IElNeVdlZWspIHtcclxuICAgICAgICBjb25zdCBzaG93VGltZSA9IHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQgJiYgdGhpcy5vcHRzLnJldHVybkZvcm1hdC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YoJ2hoOm1tJykgPiAtMTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkV2VlayA9IHsgd2Vla05icjogd2Vla0RhdGEud2Vla05iciwgeWVhcjogd2Vla0RhdGEueWVhciB9O1xyXG5cclxuICAgICAgICBpZiAoc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLmhvdXIgPSAwO1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzBdLmRhdGVPYmoubWludXRlID0gMDtcclxuICAgICAgICAgICAgd2Vla0RhdGEud2Vla1swXS5kYXRlT2JqLnNlY29uZCA9IDA7XHJcblxyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmouaG91ciA9IDIzO1xyXG4gICAgICAgICAgICB3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmoubWludXRlID0gNTk7XHJcbiAgICAgICAgICAgIHdlZWtEYXRhLndlZWtbNl0uZGF0ZU9iai5zZWNvbmQgPSA1OTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZSh3ZWVrRGF0YS53ZWVrWzBdLmRhdGVPYmopO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZSh3ZWVrRGF0YS53ZWVrWzZdLmRhdGVPYmopO1xyXG4gICAgfVxyXG4gICAgZ2V0U291cmNlUm93QW5kQ29sdW1uRnJvbUV2ZW50KGV2ZW50OiBhbnkpOiBhbnkge1xyXG4gICAgICAgIGxldCBzb3VyY2VSb3cgPSAwO1xyXG4gICAgICAgIGxldCBzb3VyY2VDb2wgPSAwO1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmlkKSB7XHJcbiAgICAgICAgICAgIC8vIHZhbHVlIG9mIGlkIGlzIGZvciBleGFtcGxlOiBtXzBfMSAoZmlyc3QgbnVtYmVyID0gcm93LCBzZWNvbmQgbnVtYmVyID0gY29sdW1uKVxyXG4gICAgICAgICAgICBjb25zdCBhcnI6IEFycmF5PHN0cmluZz4gPSBldmVudC50YXJnZXQuaWQuc3BsaXQoVU5ERVJfTElORSk7XHJcbiAgICAgICAgICAgIHNvdXJjZVJvdyA9IE51bWJlcihhcnJbMV0pO1xyXG4gICAgICAgICAgICBzb3VyY2VDb2wgPSBOdW1iZXIoYXJyWzJdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgc291cmNlUm93LCBzb3VyY2VDb2wgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXJnZXRGb2N1c1Jvd0FuZENvbHVtbihldmVudDogYW55LCByb3c6IG51bWJlciwgY29sOiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGNvbENvdW50OiBudW1iZXIpOiBhbnkge1xyXG4gICAgICAgIGxldCBtb3ZlRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgdGFyZ2V0Um93OiBudW1iZXIgPSByb3c7XHJcbiAgICAgICAgbGV0IHRhcmdldENvbDogbnVtYmVyID0gY29sO1xyXG5cclxuICAgICAgICBjb25zdCBrZXlDb2RlOiBudW1iZXIgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldEtleUNvZGVGcm9tRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLnVwQXJyb3cgJiYgcm93ID4gMCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRSb3ctLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuZG93bkFycm93ICYmIHJvdyA8IHJvd0NvdW50KSB7XHJcbiAgICAgICAgICAgIG1vdmVGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhcmdldFJvdysrO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5sZWZ0QXJyb3cgJiYgY29sID4gMCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wtLTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUucmlnaHRBcnJvdyAmJiBjb2wgPCBjb2xDb3VudCkge1xyXG4gICAgICAgICAgICBtb3ZlRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YXJnZXRDb2wrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbW92ZUZvY3VzLCB0YXJnZXRSb3csIHRhcmdldENvbCB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZvY3VzQ2VsbEVsZW1lbnQodHlwZTogc3RyaW5nLCByb3c6IG51bWJlciwgY29sOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBlbGVtOiBhbnkgPSB0aGlzLnNlbGVjdG9yRWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKERPVCArIHR5cGUgKyBVTkRFUl9MSU5FICsgcm93ICsgVU5ERVJfTElORSArIGNvbCk7XHJcbiAgICAgICAgaWYgKGVsZW0pIHtcclxuICAgICAgICAgICAgZWxlbS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3REYXRlKGRhdGU6IElNeURhdGUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgc2hvd1RpbWUsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAvLyBEYXRlIHJhbmdlXHJcbiAgICAgICAgICAgIGNvbnN0IGlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCBpc0VuZERhdGVJbml0aWFsaXplZDogYm9vbGVhbiA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpICYmXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5EYXRlSW5pdGlhbGl6ZWQgJiYgaXNFbmREYXRlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJvdGggYWxyZWFkeSBzZWxlY3RlZCAtIHNldCBiZWdpbiBkYXRlIGFuZCByZXNldCBlbmQgZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpbkRhdGVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYmVnaW4gZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRW5kRGF0ZUluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGRhdGUsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHNlY29uZCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0RGF0ZUVhcmxpZXI6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZUVhcmxpZXIoZGF0ZSwgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3REYXRlRWFybGllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRlID0gdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IF9kYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IF9kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShfZGF0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKF9kYXRlLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUoX2RhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IGRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0gZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmdsZSBkYXRlXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gZGF0ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVDaGFuZ2VkKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dUaW1lID8gZmFsc2UgOiBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVWbGF1ZSAmJiB0aGlzLm9wdHMudmlld1R5cGUgPT0gVmlld1R5cGUuVG9nZXRoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZSA9IHRoaXMuZ2V0VGltZVN0cihuZXcgRGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b1NlbGVjdE1vbnRoKG1vbnRoOiBJTXlNb250aCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gbW9udGggcmFuZ2VcclxuICAgICAgICAgICAgY29uc3QgaXNCZWdpbk1vbnRoSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWRNb250aCh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmRNb250aEluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkTW9udGgodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQpO1xyXG4gICAgICAgICAgICBpZiAoaXNCZWdpbk1vbnRoSW5pdGlhbGl6ZWQgJiYgaXNFbmRNb250aEluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBib3RoIGFscmVhZHkgc2VsZWN0ZWQgLSBzZXQgYmVnaW4gZGF0ZSBhbmQgcmVzZXQgZW5kIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSB0aGlzLnV0aWxTZXJ2aWNlLnJlc2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCZWdpbk1vbnRoSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIGRhdGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHNlY29uZCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0RGF0ZUVhcmxpZXI6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZUVhcmxpZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgeyB5ZWFyOiBtb250aC55ZWFyLCBtb250aDogbW9udGgubW9udGhOYnIgfSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZUVhcmxpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBfZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoX2RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShfZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKF9kYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgeWVhcjogbW9udGgueWVhciwgbW9udGg6IG1vbnRoLm1vbnRoTmJyIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoID0gbW9udGg7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVNb2RlbChcclxuICAgICAgICAgICAgICAgICAgICB7IHllYXI6IG1vbnRoLnllYXIsIG1vbnRoOiBtb250aC5tb250aE5iciB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlcixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZSA/IGZhbHNlIDogY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRvU2VsZWN0WWVhcih5ZWFyOiB7IHllYXI6IG51bWJlciB9KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHNob3dUaW1lLCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuICAgICAgICBpZiAodGhpcy5vcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAvLyBtb250aCByYW5nZVxyXG4gICAgICAgICAgICBjb25zdCBpc0JlZ2luWWVhckluaXRpYWxpemVkOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkWWVhcih0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmRZZWFySW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWRZZWFyKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKTtcclxuICAgICAgICAgICAgaWYgKGlzQmVnaW5ZZWFySW5pdGlhbGl6ZWQgJiYgaXNFbmRZZWFySW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGJvdGggYWxyZWFkeSBzZWxlY3RlZCAtIHNldCBiZWdpbiBkYXRlIGFuZCByZXNldCBlbmQgZGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHRoaXMudXRpbFNlcnZpY2UucmVzZXREYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVwb2M6IHRoaXMudXRpbFNlcnZpY2UuZ2V0RXBvY1RpbWUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0JlZ2luWWVhckluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBkYXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luID0geWVhcjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luLCBkYXRlRm9ybWF0LCBtb250aExhYmVscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdERhdGVFYXJsaWVyOiBib29sZWFuID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVFYXJsaWVyKHllYXIsIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RGF0ZUVhcmxpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQgPSBfZGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlRGF0ZVNlbGVjdGlvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVnaW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBfZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUoX2RhdGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMudXRpbFNlcnZpY2UuZm9ybWF0RGF0ZShfZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcG9jOiB0aGlzLnV0aWxTZXJ2aWNlLmdldEVwb2NUaW1lKF9kYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4gPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VEYXRlU2VsZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCZWdpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAganNEYXRlOiB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuYmVnaW4sIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZURhdGVTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JlZ2luOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzRGF0ZTogdGhpcy51dGlsU2VydmljZS5nZXREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5lbmQsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBvYzogdGhpcy51dGlsU2VydmljZS5nZXRFcG9jVGltZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXREYXRlTW9kZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlQ2hhbmdlZChcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKHllYXIsIG51bGwsIGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgcmV0dXJuRm9ybWF0KSxcclxuICAgICAgICAgICAgICAgIHNob3dUaW1lID8gZmFsc2UgOiBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW9udGhTdGFydElkeCh5OiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgLy8gTW9udGggc3RhcnQgaW5kZXhcclxuICAgICAgICBjb25zdCBkOiBEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkLnNldERhdGUoMSk7XHJcbiAgICAgICAgZC5zZXRNb250aChtIC0gMSk7XHJcbiAgICAgICAgZC5zZXRGdWxsWWVhcih5KTtcclxuICAgICAgICBjb25zdCBpZHggPSBkLmdldERheSgpICsgdGhpcy5zdW5kYXlJZHgoKTtcclxuICAgICAgICByZXR1cm4gaWR4ID49IDcgPyBpZHggLSA3IDogaWR4O1xyXG4gICAgfVxyXG5cclxuICAgIGRheXNJbk1vbnRoKG06IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIGRheXMgb2YgY3VycmVudCBtb250aFxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh5LCBtLCAwKS5nZXREYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGF5c0luUHJldk1vbnRoKG06IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBSZXR1cm4gbnVtYmVyIG9mIGRheXMgb2YgdGhlIHByZXZpb3VzIG1vbnRoXHJcbiAgICAgICAgY29uc3QgZDogRGF0ZSA9IHRoaXMuZ2V0RGF0ZSh5LCBtLCAxKTtcclxuICAgICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSAtIDEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRheXNJbk1vbnRoKGQuZ2V0TW9udGgoKSArIDEsIGQuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDdXJyRGF5KGQ6IG51bWJlciwgbTogbnVtYmVyLCB5OiBudW1iZXIsIGNtbzogbnVtYmVyLCB0b2RheTogSU15RGF0ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIENoZWNrIGlzIGEgZ2l2ZW4gZGF0ZSB0aGUgdG9kYXlcclxuICAgICAgICByZXR1cm4gZCA9PT0gdG9kYXkuZGF5ICYmIG0gPT09IHRvZGF5Lm1vbnRoICYmIHkgPT09IHRvZGF5LnllYXIgJiYgY21vID09PSBNb250aElkLmN1cnI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0V2lkdGgoKSB7XHJcbiAgICAgICAgY29uc3QgaGFzU2hvcnRDdXRzID0gdGhpcy5vcHRzLnNob3J0Y3V0cyAmJiB0aGlzLm9wdHMuc2hvcnRjdXRzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UgJiYgdGhpcy5vcHRzLnNob3dUeXBlICE9PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXNTaG9ydEN1dHMgPyAnNjYwcHgnIDogJzU3NHB4JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB3ID0gIChoYXNTaG9ydEN1dHMgPyAzODAgOiAyODcpICsgKCh0aGlzLm9wdHMudmlld1R5cGUgPT09IFZpZXdUeXBlLlRvZ2V0aGVyIHx8IHRoaXMubXVsdGlTZWxlY3QpID8gMjAwIDogMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3ICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VG9kYXkoKTogSU15RGF0ZSB7XHJcbiAgICAgICAgY29uc3QgZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgaG91cjogZGF0ZS5nZXRIb3VycygpLFxyXG4gICAgICAgICAgICAgICAgbWludXRlOiBkYXRlLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4geyB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLCBkYXk6IGRhdGUuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldERheU51bWJlcihkYXRlOiBJTXlEYXRlKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBHZXQgZGF5IG51bWJlcjogc3U9MCwgbW89MSwgdHU9Miwgd2U9MyAuLi5cclxuICAgICAgICBjb25zdCBkOiBEYXRlID0gdGhpcy5nZXREYXRlKGRhdGUueWVhciwgZGF0ZS5tb250aCwgZGF0ZS5kYXkpO1xyXG4gICAgICAgIHJldHVybiBkLmdldERheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFdlZWtkYXkoZGF0ZTogSU15RGF0ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gR2V0IHdlZWtkYXk6IHN1LCBtbywgdHUsIHdlIC4uLlxyXG4gICAgICAgIHJldHVybiB0aGlzLndlZWtEYXlPcHRzW3RoaXMuZ2V0RGF5TnVtYmVyKGRhdGUpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRlKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlciwgZGF5OiBudW1iZXIpOiBEYXRlIHtcclxuICAgICAgICAvLyBDcmVhdGVzIGEgZGF0ZSBvYmplY3QgZnJvbSBnaXZlbiB5ZWFyLCBtb250aCBhbmQgZGF5XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5LCAwLCAwLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdW5kYXlJZHgoKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBJbmRleCBvZiBTdW5kYXkgZGF5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5SWR4ID4gMCA/IDcgLSB0aGlzLmRheUlkeCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYWxlbmRhcihtOiBudW1iZXIsIHk6IG51bWJlciwgbm90aWZ5Q2hhbmdlOiBib29sZWFuLCBpc1NlY29uZENhbGVuZGFyPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlc19yYW5nZS5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b2RheTogSU15RGF0ZSA9IHRoaXMuZ2V0VG9kYXkoKTtcclxuICAgICAgICBjb25zdCBtb250aFN0YXJ0OiBudW1iZXIgPSB0aGlzLm1vbnRoU3RhcnRJZHgoeSwgbSk7XHJcbiAgICAgICAgY29uc3QgZEluVGhpc006IG51bWJlciA9IHRoaXMuZGF5c0luTW9udGgobSwgeSk7XHJcbiAgICAgICAgY29uc3QgZEluUHJldk06IG51bWJlciA9IHRoaXMuZGF5c0luUHJldk1vbnRoKG0sIHkpO1xyXG5cclxuICAgICAgICBsZXQgZGF5TmJyID0gMTtcclxuICAgICAgICBsZXQgY21vOiBudW1iZXIgPSBNb250aElkLnByZXY7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA3OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgd2VlazogQXJyYXk8SU15Q2FsZW5kYXJEYXk+ID0gW107XHJcbiAgICAgICAgICAgIGlmIChpID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCB3ZWVrXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbSA9IGRJblByZXZNIC0gbW9udGhTdGFydCArIDE7XHJcbiAgICAgICAgICAgICAgICAvLyBQcmV2aW91cyBtb250aFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHBtOyBqIDw9IGRJblByZXZNOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiBtID09PSAxID8geSAtIDEgOiB5LCBtb250aDogbSA9PT0gMSA/IDEyIDogbSAtIDEsIGRheTogaiB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoaiwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNtbyA9IE1vbnRoSWQuY3VycjtcclxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgbW9udGhcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXNMZWZ0OiBudW1iZXIgPSA3IC0gd2Vlay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRheXNMZWZ0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0geyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiBkYXlOYnIgfTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXk6IHRoaXMuaXNDdXJyRGF5KGRheU5iciwgbSwgeSwgY21vLCB0b2RheSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnV0aWxTZXJ2aWNlLmlzRGlzYWJsZWREYXRlKGRhdGUsIHRoaXMub3B0cyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZERhdGU6IHRoaXMudXRpbFNlcnZpY2UuaXNNYXJrZWREYXRlKGRhdGUsIHRoaXMub3B0cy5tYXJrRGF0ZXMsIHRoaXMub3B0cy5tYXJrV2Vla2VuZHMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQ6IHRoaXMudXRpbFNlcnZpY2UuaXNIaWdobGlnaHRlZERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnN1bkhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5zYXRIaWdobGlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuaGlnaGxpZ2h0RGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRheU5icisrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzdCBvZiB0aGUgd2Vla3NcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgODsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRheU5iciA+IGRJblRoaXNNKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5leHQgbW9udGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5TmJyID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY21vID0gTW9udGhJZC5uZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlOiBJTXlEYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBjbW8gPT09IE1vbnRoSWQubmV4dCAmJiBtID09PSAxMiA/IHkgKyAxIDogeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGNtbyA9PT0gTW9udGhJZC5jdXJyID8gbSA6IGNtbyA9PT0gTW9udGhJZC5uZXh0ICYmIG0gPCAxMiA/IG0gKyAxIDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBkYXlOYnJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWsucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNtbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyckRheTogdGhpcy5pc0N1cnJEYXkoZGF5TmJyLCBtLCB5LCBjbW8sIHRvZGF5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoZGF0ZSwgdGhpcy5vcHRzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkRGF0ZTogdGhpcy51dGlsU2VydmljZS5pc01hcmtlZERhdGUoZGF0ZSwgdGhpcy5vcHRzLm1hcmtEYXRlcywgdGhpcy5vcHRzLm1hcmtXZWVrZW5kcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogdGhpcy51dGlsU2VydmljZS5pc0hpZ2hsaWdodGVkRGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdHMuc3VuSGlnaGxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRzLnNhdEhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0cy5oaWdobGlnaHREYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5TmJyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGxldCB3ZWVrTmJyID0gdGhpcy5vcHRzLnNob3dXZWVrTnVtYmVycyA/IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcih3ZWVrWzBdLmRhdGVPYmopIDogMDtcclxuICAgICAgICAgICAgbGV0IHdlZWtOYnIgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dXZWVrTnVtYmVycyApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVJbmRleCA9IHRoaXMub3B0cy5maXJzdERheU9mV2VlayA9PSAnc3UnID8gNjogMFxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcih3ZWVrW2RhdGVJbmRleF0uZGF0ZU9iaik7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5vcHRzLmZpcnN0RGF5T2ZXZWVrID09PSAnc3UnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZW5kRGF5V2Vla05iciAtPSAxO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgLy8gd2Vla05iciA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0V2Vla051bWJlcih3ZWVrWzBdLmRhdGVPYmopID09PSBlbmREYXlXZWVrTmJyID8gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKHdlZWtbMF0uZGF0ZU9iaik6IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVzLnB1c2goeyB3ZWVrLCB3ZWVrTmJyLCB5ZWFyOiB5IH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlc19yYW5nZS5wdXNoKHsgd2Vlaywgd2Vla05iciwgeWVhcjogeSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXREYXRlVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUobSwgeSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcblxyXG4gICAgICAgIGlmIChub3RpZnlDaGFuZ2UpIHtcclxuICAgICAgICAgICAgLy8gTm90aWZ5IHBhcmVudFxyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyVmlld0NoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgeWVhcjogeSxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBtLFxyXG4gICAgICAgICAgICAgICAgZmlyc3Q6IHsgbnVtYmVyOiAxLCB3ZWVrZGF5OiB0aGlzLmdldFdlZWtkYXkoeyB5ZWFyOiB5LCBtb250aDogbSwgZGF5OiAxIH0pIH0sXHJcbiAgICAgICAgICAgICAgICBsYXN0OiB7IG51bWJlcjogZEluVGhpc00sIHdlZWtkYXk6IHRoaXMuZ2V0V2Vla2RheSh7IHllYXI6IHksIG1vbnRoOiBtLCBkYXk6IGRJblRoaXNNIH0pIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGVWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZShtOiBudW1iZXIsIHk6IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBkcG0gPSBmYWxzZTtcclxuICAgICAgICBsZXQgZG5tID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZVVudGlsLCBkaXNhYmxlU2luY2UsIG1pblllYXIsIG1heFllYXIgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgZHBtID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVVbnRpbChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogbSA9PT0gMSA/IHkgLSAxIDogeSxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiBtID09PSAxID8gMTIgOiBtIC0gMSxcclxuICAgICAgICAgICAgICAgIGRheTogdGhpcy5kYXlzSW5Nb250aChtID09PSAxID8gMTIgOiBtIC0gMSwgbSA9PT0gMSA/IHkgLSAxIDogeSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlzYWJsZVVudGlsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkbm0gPSB0aGlzLnV0aWxTZXJ2aWNlLmlzTW9udGhEaXNhYmxlZEJ5RGlzYWJsZVNpbmNlKFxyXG4gICAgICAgICAgICB7IHllYXI6IG0gPT09IDEyID8geSArIDEgOiB5LCBtb250aDogbSA9PT0gMTIgPyAxIDogbSArIDEsIGRheTogMSB9LFxyXG4gICAgICAgICAgICBkaXNhYmxlU2luY2VcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSAobSA9PT0gMSAmJiB5ID09PSBtaW5ZZWFyKSB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZCA9IChtID09PSAxMiAmJiB5ID09PSBtYXhZZWFyKSB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSAobSA9PT0gMSAmJiB5ID09PSBtaW5ZZWFyKSB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dFZpZXdEaXNhYmxlZF9yYW5nZSA9IChtID09PSAxMiAmJiB5ID09PSBtYXhZZWFyKSB8fCBkbm07XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9udGhWaWV3SGVhZGVyQnRuRGlzYWJsZWRTdGF0ZSh5OiBudW1iZXIsIGlzU2Vjb25kQ2FsZW5kYXI6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgZHBtID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRubSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGRpc2FibGVVbnRpbCwgZGlzYWJsZVNpbmNlLCBtaW5ZZWFyLCBtYXhZZWFyIH0gPSB0aGlzLm9wdHM7XHJcblxyXG4gICAgICAgIGRwbSA9IHRoaXMudXRpbFNlcnZpY2UuaXNNb250aERpc2FibGVkQnlEaXNhYmxlVW50aWwoeyB5ZWFyOiB5IC0gMSwgbW9udGg6IDEyLCBkYXk6IDMxIH0sIGRpc2FibGVVbnRpbCk7XHJcbiAgICAgICAgZG5tID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IHkgKyAxLCBtb250aDogMSwgZGF5OiAxIH0sIGRpc2FibGVTaW5jZSk7XHJcbiAgICAgICAgaWYgKCFpc1NlY29uZENhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldlZpZXdEaXNhYmxlZCA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWQgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2RG9iVmlld0Rpc2FibGVkID0geSA9PT0gbWluWWVhciB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERvYlZpZXdEaXNhYmxlZCA9IHkgPT09IG1heFllYXIgfHwgZG5tO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1pblllYXIgfHwgZHBtO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5ID09PSBtYXhZZWFyIHx8IGRubTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2RG9iVmlld0Rpc2FibGVkX3JhbmdlID0geSA9PT0gbWluWWVhciB8fCBkcG07XHJcbiAgICAgICAgICAgIHRoaXMubmV4dERvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHkgPT09IG1heFllYXIgfHwgZG5tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRZZWFyVmlld0hlYWRlckJ0bkRpc2FibGVkU3RhdGUoeXA6IG51bWJlciwgeW46IG51bWJlciwgaXNTZWNvbmRDYWxlbmRhcjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBkcHkgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZG55ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZVVudGlsLCBkaXNhYmxlU2luY2UsIG1pblllYXIsIG1heFllYXIgfSA9IHRoaXMub3B0cztcclxuXHJcbiAgICAgICAgZHB5ID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVVbnRpbCh7IHllYXI6IHlwIC0gMSwgbW9udGg6IDEyLCBkYXk6IDMxIH0sIGRpc2FibGVVbnRpbCk7XHJcbiAgICAgICAgZG55ID0gdGhpcy51dGlsU2VydmljZS5pc01vbnRoRGlzYWJsZWRCeURpc2FibGVTaW5jZSh7IHllYXI6IHluICsgMSwgbW9udGg6IDEsIGRheTogMSB9LCBkaXNhYmxlU2luY2UpO1xyXG4gICAgICAgIGlmICghaXNTZWNvbmRDYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWQgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZCA9IHlwIDw9IG1pblllYXIgfHwgZHB5O1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWQgPSB5biA+PSBtYXhZZWFyIHx8IGRueTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5cCA8PSBtaW5ZZWFyIHx8IGRweTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0Vmlld0Rpc2FibGVkX3JhbmdlID0geW4gPj0gbWF4WWVhciB8fCBkbnk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkRvYlZpZXdEaXNhYmxlZF9yYW5nZSA9IHlwIDw9IG1pblllYXIgfHwgZHB5O1xyXG4gICAgICAgICAgICB0aGlzLm5leHREb2JWaWV3RGlzYWJsZWRfcmFuZ2UgPSB5biA+PSBtYXhZZWFyIHx8IGRueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkNvbnRhaW5lckNsaWNrKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgb25DbGlja1RpbWVCdG4oZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgY29uc3QgYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZElzSW5pdGlhbGl6ZWREYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICghYmVnaW5Jc0luaXRpYWxpemVkRGF0ZSB8fCAhZW5kSXNJbml0aWFsaXplZERhdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIOebtOaOpeeCueWHu+ehruWumuaYvuekuuacrOaciOWSjOS4i+aciFxyXG4gICAgICAgICAgICAgICAgaWYgKCFiZWdpbklzSW5pdGlhbGl6ZWREYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZS5iZWdpbiA9IHsgeWVhcjogbm93LmdldEZ1bGxZZWFyKCksIG1vbnRoOiBub3cuZ2V0TW9udGgoKSArIDEsIGRheTogbm93LmdldERhdGUoKSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGVuZFllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIGxldCBlbmRtb250aCA9IG5vdy5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgICAgIGlmIChlbmRtb250aCA+PSAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZFllYXIgPSBlbmRZZWFyICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBlbmRtb250aCA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBlbmRtb250aCA9IGVuZG1vbnRoICsgdGhpcy5vcHRzLm1vbnRoUmFuZ2VWYWx1ZTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kID0geyAuLi50aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luIH07XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmVuZCA9IHsgeWVhcjogZW5kWWVhciwgbW9udGg6IGVuZG1vbnRoLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgICAgIC8vIOeCueWHu3NlbGVjdFRpbWXkuYvliY3nu5lkYXRlUmFuZ2XotYvkuKTkuKrml7bpl7TlgLxcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gdGhpcy5nZXRUaW1lU3RyKG5vdyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZV9yYW5nZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMudGltZVZsYXVlX3JhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZV9yYW5nZSA9IHRoaXMuZ2V0VGltZVN0cihub3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnRpbWVWbGF1ZV9yYW5nZSA9IHRoaXMuY2hlY2tUaW1lVmFsdWVzKHRoaXMudGltZVZsYXVlX3JhbmdlKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIC8vIOeCueWHu3NlbGVjdFRpbWXkuYvliY3otYvlgLxcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZVZsYXVlID0gdGhpcy5nZXRUaW1lU3RyKG5vdyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0ZSA9IHsgeWVhcjogbm93LmdldEZ1bGxZZWFyKCksIG1vbnRoOiBub3cuZ2V0TW9udGgoKSArIDEsIGRheTogbm93LmdldERhdGUoKSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMudGltZVZsYXVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIC8vIOeCueWHu3NlbGVjdFRpbWXkuYvliY3otYvlgLxcclxuICAgICAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmdldFRpbWVTdHIobm93KTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUgPSB7IHllYXI6IG5vdy5nZXRGdWxsWWVhcigpLCBtb250aDogbm93LmdldE1vbnRoKCkgKyAxLCBkYXk6IG5vdy5nZXREYXRlKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50aW1lVmxhdWUgPSB0aGlzLmNoZWNrVGltZVZhbHVlcyh0aGlzLnRpbWVWbGF1ZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFllYXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9udGggPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFllYXJfcmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RZZWFyX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RNb250aF9yYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoX3JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdFRpbWUgPSAhdGhpcy5zZWxlY3RUaW1lO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3dEeW5hbWljVmlldygkZXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5vcHRzLnNob3dEeW5hbWljVmlldyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5keW5hbWljVmlld1Nob3cuZW1pdCggeyBzaG93RHluYW1pY1ZpZXc6IHRydWUgfSApO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvblNob3dEYXRlUGFuZWwoJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMub3B0cy5zaG93RHluYW1pY1ZpZXcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmR5bmFtaWNWaWV3U2hvdy5lbWl0KCB7IHNob3dEeW5hbWljVmlldzogZmFsc2UgfSApO1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRUaW1lVmFsdWUoaXNEYXRlUmFuZ2UpIHtcclxuICAgICAgICBjb25zdCB0ID0geyBzdGFydDogbnVsbCwgZW5kOiBudWxsIH07XHJcbiAgICAgICAgaWYgKHRoaXMudGltZVZsYXVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVBcnIgPSB0aGlzLnRpbWVWbGF1ZS5yZXBsYWNlKCfml7YnLCAnOicpLnJlcGxhY2UoJ+WIhicsICc6JykucmVwbGFjZSgn56eSJywgJycpLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgIGlmICh0aW1lQXJyLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0LnN0YXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvdXI6IHRpbWVBcnJbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRlOiB0aW1lQXJyWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZDogdGltZUFyclsyXSA/IHRpbWVBcnJbMl0gOiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgbm93RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBub3dEYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IG5vd0RhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmQgPSBub3dEYXRlLmdldFNlY29uZHMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0LnN0YXJ0ID0geyBob3VyOiAwLCBtaW51dGU6IDAsIHNlY29uZDogMCB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdC5zdGFydCA9IHsgaG91ciwgbWludXRlLCBzZWNvbmQgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlzRGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVWbGF1ZV9yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZUFycl9yYW5nZSA9IHRoaXMudGltZVZsYXVlX3JhbmdlLnJlcGxhY2UoJ+aXticsICc6JykucmVwbGFjZSgn5YiGJywgJzonKS5yZXBsYWNlKCfnp5InLCAnJykuc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lQXJyX3JhbmdlLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdC5lbmQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI6IHRpbWVBcnJfcmFuZ2VbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogdGltZUFycl9yYW5nZVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiB0aW1lQXJyX3JhbmdlWzJdID8gdGltZUFycl9yYW5nZVsyXSA6IDBcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaG91ciA9IDIzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRlID0gNTk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmQgPSA1OTtcclxuICAgICAgICAgICAgICAgIHQuZW5kID0geyBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgb25DbGlja09rQnRuKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGxldCB0aW1lT2JqID0gbnVsbDtcclxuICAgICAgICBsZXQgdGltZU9ial9yYW5nZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRGF0ZV9yYW5nZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHRoaXMuZ2V0VGltZVZhbHVlKHRoaXMub3B0cy5kYXRlUmFuZ2UpO1xyXG4gICAgICAgICAgICB0aW1lT2JqID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIHRpbWVPYmpfcmFuZ2UgPSBlbmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCByZXR1cm5Gb3JtYXQgfSA9IHRoaXMub3B0cztcclxuICAgICAgICBpZiAoIXRoaXMub3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZSksIC4uLnRpbWVPYmogfTtcclxuICAgICAgICAgICAgY29uc3QgaXNJbkRpc2FibGVSYW5nZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoc2VsZWN0ZWREYXRlLCB0aGlzLm9wdHMpO1xyXG4gICAgICAgICAgICBjb25zdCBlYXJsaWVyID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVTYW1lT3JFYXJsaWVyKHNlbGVjdGVkRGF0ZSwgdGhpcy5vcHRzLmRpc2FibGVVbnRpbCk7XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGUgPSAhaXNJbkRpc2FibGVSYW5nZVxyXG4gICAgICAgICAgICAgICAgPyBzZWxlY3RlZERhdGVcclxuICAgICAgICAgICAgICAgIDogeyAuLi5zZWxlY3RlZERhdGUsIC4uLihlYXJsaWVyID8gdGhpcy5vcHRzLmRpc2FibGVVbnRpbCA6IHRoaXMub3B0cy5kaXNhYmxlU2luY2UpIH07XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja1RpbWVWYWx1ZShzZWxlY3RlZERhdGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZ2luID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlLmJlZ2luKSwgLi4udGltZU9iaiB9O1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSB7IC4uLnRoaXMuaW5pdGlhbGl6ZWREYXRlKHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2UuZW5kLCBiZWdpbiksIC4uLnRpbWVPYmpfcmFuZ2UgfTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1RpbWVWYWx1ZShiZWdpbik7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tUaW1lVmFsdWUoZW5kKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlX3JhbmdlID0geyBiZWdpbiwgZW5kIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZV9yYW5nZSxcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgIH1cclxuXHJcbiAgICBvblRvZGF5Q2xpY2soJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGxldCB0aW1lT2JqID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWREYXRlID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWREYXRlX3JhbmdlID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhcnQgfSA9IHRoaXMuZ2V0VGltZVZhbHVlKGZhbHNlKTtcclxuICAgICAgICAgICAgdGltZU9iaiA9IHN0YXJ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGRhdGVGb3JtYXQsIG1vbnRoTGFiZWxzLCBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciwgY2xvc2VTZWxlY3Rvck9uRGF0ZVNlbGVjdCwgcmV0dXJuRm9ybWF0IH0gPSB0aGlzLm9wdHM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2VsZWN0ZWREYXRlID0geyAuLi50aGlzLmluaXRpYWxpemVkRGF0ZSh7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAgfSksIC4uLnRpbWVPYmogfTtcclxuICAgICAgICBjb25zdCBpc0luRGlzYWJsZVJhbmdlID0gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZShzZWxlY3RlZERhdGUsIHRoaXMub3B0cyk7XHJcbiAgICAgICAgY29uc3QgZWFybGllciA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZU9yRWFybGllcihzZWxlY3RlZERhdGUsIHRoaXMub3B0cy5kaXNhYmxlVW50aWwpO1xyXG5cclxuICAgICAgICBzZWxlY3RlZERhdGUgPSAhaXNJbkRpc2FibGVSYW5nZVxyXG4gICAgICAgICAgICA/IHNlbGVjdGVkRGF0ZVxyXG4gICAgICAgICAgICA6IHsgLi4uc2VsZWN0ZWREYXRlLCAuLi4oZWFybGllciA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlKSB9O1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICBzZWxlY3RlZERhdGUsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRGF0ZV9yYW5nZSxcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdCxcclxuICAgICAgICAgICAgbW9udGhMYWJlbHMsXHJcbiAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICByZXR1cm5Gb3JtYXRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIG9uRHluYW1pY09rQ2xpY2soJGV2ZW50LCBkeW5hbWljdmlld1JlZikge1xyXG4gICAgICAgIGlmIChkeW5hbWljdmlld1JlZikge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gZHluYW1pY3ZpZXdSZWYuZm9ybWF0VmFsdWUoKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkeW5hbWljdmlld1JlZi5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICB2YWx1ZS50ZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgdGhpcy5vcHRzLmR5bmFtaWNWYWx1ZUNoYW5nZWQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplZERhdGUoZGF0ZTogSU15RGF0ZSwgb3RoZXJEYXRlOiBJTXlEYXRlID0geyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwIH0pOiBJTXlEYXRlIHtcclxuICAgICAgICBjb25zdCBkYXlzSW5Nb250aDogQXJyYXk8bnVtYmVyPiA9IFszMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcclxuICAgICAgICBpZiAoIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUoZGF0ZSkgJiYgIXRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUob3RoZXJEYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5pc0Rpc2FibGVkRGF0ZSh7IHllYXIsIG1vbnRoLCBkYXkgfSwgdGhpcy5vcHRzKSA/IHRoaXMub3B0cy5kaXNhYmxlVW50aWwgOiB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKGRhdGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXIgPSBvdGhlckRhdGUubW9udGggKyAxID4gMTIgPyBvdGhlckRhdGUueWVhciArIDEgOiBvdGhlckRhdGUueWVhcjtcclxuICAgICAgICAgICAgbGV0IG1vbnRoID0gb3RoZXJEYXRlLm1vbnRoICsgMSA+IDEyID8gMSA6IG90aGVyRGF0ZS5tb250aCArIHRoaXMub3B0cy5tb250aFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZS5tb250aCkge1xyXG4gICAgICAgICAgICAgICAgbW9udGggPSBvdGhlckRhdGUubW9udGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gb3RoZXJEYXRlLmRheSA8IDEgfHwgb3RoZXJEYXRlLmRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0gPyAxIDogb3RoZXJEYXRlLmRheTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbFNlcnZpY2UuaXNEaXNhYmxlZERhdGUoeyB5ZWFyLCBtb250aCwgZGF5IH0sIHRoaXMub3B0cykgPyB0aGlzLm9wdHMuZGlzYWJsZVNpbmNlIDogeyB5ZWFyLCBtb250aCwgZGF5IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWUoZGF0ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRlRm9ybWF0LCBtb250aExhYmVscywgZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIsIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3QsIHJldHVybkZvcm1hdCB9ID0gdGhpcy5vcHRzO1xyXG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUeXBlICE9PSA0ICYmICF0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGF0ZTogSU15RGF0ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyOiBkYXRlLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogZGF0ZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0geyB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKCksIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgKyAxLCBkYXk6IGRhdGUuZ2V0RGF0ZSgpIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWQr+eUqOWRqOmAieaLqeaXtiAg5b+r5o235oyJ6ZKu5Y+C5pWw5Li65Y2V5Liq5pel5pyfXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51dGlsU2VydmljZS5nZXROb3dXZWVrVGltZShkYXRlKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiB0aGlzLm9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXREYXRlUmFuZ2U6IElNeURhdGVSYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgeyBiZWdpbiwgZW5kIH0gPSBkYXRlO1xyXG4gICAgICAgICAgICBpZiAoIWJlZ2luIHx8ICFlbmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlUmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogYmVnaW4uZ2V0RnVsbFllYXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IGJlZ2luLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXk6IGJlZ2luLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogYmVnaW4uZ2V0SG91cnMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWludXRlOiBiZWdpbi5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogYmVnaW4uZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogZW5kLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoOiBlbmQuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZW5kLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjogZW5kLmdldEhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogZW5kLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiBlbmQuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogeyB5ZWFyOiBiZWdpbi5nZXRGdWxsWWVhcigpLCBtb250aDogYmVnaW4uZ2V0TW9udGgoKSArIDEsIGRheTogYmVnaW4uZ2V0RGF0ZSgpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB7IHllYXI6IGVuZC5nZXRGdWxsWWVhcigpLCBtb250aDogZW5kLmdldE1vbnRoKCkgKyAxLCBkYXk6IGVuZC5nZXREYXRlKCkgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlTW9kZWw6IElNeURhdGVNb2RlbCA9IHRoaXMudXRpbFNlcnZpY2UuZ2V0RGF0ZU1vZGVsKFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICBtb250aExhYmVscyxcclxuICAgICAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoZGF0ZU1vZGVsLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oJ+WPguaVsOW/hemhu+espuWQiOimgeaxgu+8gScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNlbGVjdEN1cnJlbnRXZWVrKCRldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBmaXJzdERheSA9IHRoaXMub3B0cy5maXJzdERheU9mV2VlayA9PT0gJ3N1JyA/ICfml6UnOiAn5LiAJztcclxuICAgICAgICBjb25zdCB7IGJlZ2luLCBlbmQgfSA9IHRoaXMuZGF0ZUhscC5nZXROb3dXZWVrVGltZShuZXcgRGF0ZSgpLCBmaXJzdERheSk7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBjb25zdCB3ZWVrTmJyID0gdGhpcy51dGlsU2VydmljZS5nZXRXZWVrTnVtYmVyKGJlZ2luKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLm9wdHMucmV0dXJuRm9ybWF0ICYmIHRoaXMub3B0cy5yZXR1cm5Gb3JtYXQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmRleE9mKCdoaDptbScpID4gLTE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB7IHdlZWtOYnIsIHllYXIgfTtcclxuXHJcbiAgICAgICAgaWYgKHNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIGJlZ2luWydob3VyJ10gPSAwO1xyXG4gICAgICAgICAgICBiZWdpblsnbWludXRlJ10gPSAwO1xyXG4gICAgICAgICAgICBiZWdpblsnc2Vjb25kJ10gPSAwO1xyXG5cclxuICAgICAgICAgICAgZW5kWydob3VyJ10gPSAyMztcclxuICAgICAgICAgICAgZW5kWydtaW51dGUnXSA9IDU5O1xyXG4gICAgICAgICAgICBlbmRbJ3NlY29uZCddID0gNTk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdERhdGUoYmVnaW4pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RGF0ZShlbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRHluYW1pY1ZhbHVlQ2hhbmdlZCgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmJ0bkR5bmFtaWNEaXNhYmxlZCA9ICEkZXZlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXlDZWxsQ2xpY2tlZEZvck11bHRpRGF0ZXMoY2VsbDogSU15Q2FsZW5kYXJEYXksIGlzU2Vjb25kQ2FsZW5kYXI/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGNlbGwuY21vID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25QcmV2TmF2aWdhdGVCdG5DbGlja2VkKHRydWUsIGlzU2Vjb25kQ2FsZW5kYXIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5jbW8gPT09IDMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5leHROYXZpZ2F0ZUJ0bkNsaWNrZWQodHJ1ZSwgaXNTZWNvbmRDYWxlbmRhcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMsIG1heFNlbGVjdGVkLCBjbG9zZVNlbGVjdG9yT25EYXRlU2VsZWN0LCBzaG93VGltZSwgcmV0dXJuRm9ybWF0LCBzZWxlY3RlZE9yZGVyQnkgfSA9IHRoaXMub3B0cztcclxuICAgICAgICBsZXQgc2VsZWN0ZWREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRGF0ZXMuZmluZChuID0+IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlU2FtZShuLCBjZWxsLmRhdGVPYmopKTtcclxuICAgICAgICBpZiAoIWlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXhTZWxlY3RlZCB8fCAobWF4U2VsZWN0ZWQgJiYgdGhpcy5zZWxlY3RlZERhdGVzLmxlbmd0aCA8IG1heFNlbGVjdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRlcyA9IFsuLi50aGlzLnNlbGVjdGVkRGF0ZXMsIHsgLi4uY2VsbC5kYXRlT2JqLCB2YWx1ZTogdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKGNlbGwuZGF0ZU9iaiwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpIH1dO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRlcyA9IFsuLi50aGlzLnNlbGVjdGVkRGF0ZXNdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd05vdGlmeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vdGlmeSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlcyA9IHRoaXMuc2VsZWN0ZWREYXRlcy5maWx0ZXIobiA9PiBuIT09IGlzU2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0ZWREYXRlcyA9IHRoaXMudXRpbFNlcnZpY2Uub3JkZXJTZWxlY3RlZERhdGVzKHNlbGVjdGVkRGF0ZXMsIHNlbGVjdGVkT3JkZXJCeSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IHNlbGVjdGVkRGF0ZXM7XHJcbiAgICAgICAgdGhpcy5yZXNldE1vbnRoWWVhclNlbGVjdChpc1NlY29uZENhbGVuZGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk11bHRpRGF0ZXNPa0NsaWNrZWQoJGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMubXVsdGlEYXRlc0NoYW5nZWQodGhpcy5zZWxlY3RlZERhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk11bHRpRGF0ZVJlbW92ZWQocmVtb3ZlSXRlbSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlcyA9IHRoaXMuc2VsZWN0ZWREYXRlcy5maWx0ZXIobiA9PiBuIT09IHJlbW92ZUl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTXVsdGlEYXRlQ2xlYXIoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0dvQmFja1RvZGF5KCkge1xyXG4gICAgICAgIGNvbnN0IHsgbW9udGhOYnIsIHllYXIgfSA9IHRoaXMudmlzaWJsZU1vbnRoO1xyXG4gICAgICAgIGNvbnN0IHsgeWVhcjogY3VycmVudFllYXIsIG1vbnRoIH0gPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgcmV0dXJuIG1vbnRoTmJyICE9IG1vbnRoIHx8IHllYXIgIT0gY3VycmVudFllYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDYWxlbmRhclZpZXcoeWVhciwgbW9udGgpIHtcclxuICAgICAgICBpZiAodGhpcy52aXNpYmxlTW9udGgueWVhciAhPSB5ZWFyIHx8IHRoaXMudmlzaWJsZU1vbnRoLm1vbnRoTmJyICE9IG1vbnRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZU1vbnRoID0ge1xyXG4gICAgICAgICAgICAgICAgbW9udGhUeHQ6IHRoaXMub3B0cy5tb250aExhYmVsc1ttb250aF0sXHJcbiAgICAgICAgICAgICAgICBtb250aE5icjogbW9udGgsXHJcbiAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyLFxyXG4gICAgICAgICAgICAgICAgeWVhclR4dDogdGhpcy5vcHRzLnllYXJUeHRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRNb250aC55ZWFyID0geWVhcjtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE1vbnRoLm1vbnRoTmJyID0gbW9udGg7XHJcblxyXG4gICAgICAgICAgICAvL3RmczYzODI4MFxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE1vbnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0WWVhciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKG1vbnRoLCB5ZWFyLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ290b3RvZGF5VmlldygkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoIH0gPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxlbmRhclZpZXcoeWVhciwgbW9udGgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2VsZWN0RGF0ZUNsaWNrZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCEkZXZlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoIH0gPSAkZXZlbnQ7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxlbmRhclZpZXcoeWVhciwgbW9udGgpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIHByaXZhdGUgbWFrZVJhbmdlKFxyXG4gICAgICAgIGxlbmd0aDogbnVtYmVyLFxyXG4gICAgICAgIHN0ZXA6IG51bWJlciA9IDEsXHJcbiAgICAgICAgc3RhcnQ6IG51bWJlciA9IDBcclxuICAgICk6IG51bWJlcltdIHtcclxuICAgICAgICBzdGVwID0gTWF0aC5jZWlsKHN0ZXApO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXkoTWF0aC5jZWlsKGxlbmd0aCAvIHN0ZXApKVxyXG4gICAgICAgICAgICAuZmlsbCgwKVxyXG4gICAgICAgICAgICAubWFwKChfLCBpKSA9PiAoaSArIHN0YXJ0KSAqIHN0ZXApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRIb3VycygpIHtcclxuICAgICAgICBsZXQgaG91clJhbmdlcyA9IDI0O1xyXG4gICAgICAgIGxldCBkaXNhYmxlZEhvdXJzID0gdGhpcy5kaXNhYmxlZEhvdXJzICYmIHRoaXMuZGlzYWJsZWRIb3VycygpO1xyXG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgaG91clJhbmdlID0gdGhpcy5tYWtlUmFuZ2UoaG91clJhbmdlcywgdGhpcy5vcHRzLmhvdXJTdGVwLCBzdGFydEluZGV4KS5tYXAoXHJcbiAgICAgICAgICAgIHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogcixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEhvdXJzICYmIGRpc2FibGVkSG91cnMuaW5kZXhPZihyKSAhPT0gLTFcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIOenu+mZpOemgeeUqOeahOWAvFxyXG4gICAgICAgIHJldHVybiBob3VyUmFuZ2UuZmlsdGVyKCBuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICEobi5kaXNhYmxlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZE1pbnV0ZXModGltZU9iajogYW55KSB7XHJcbiAgICAgICAgbGV0IG1pbnV0ZVJhbmdlID0gdGhpcy5tYWtlUmFuZ2UoNjAsIHRoaXMub3B0cy5taW51dGVTdGVwKS5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDogcixcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRNaW51dGVzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZE1pbnV0ZXModGltZU9iai5ob3VycyEpLmluZGV4T2YocikgIT09IC0xXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOenu+mZpOemgeeUqOeahOWAvFxyXG4gICAgICAgIHJldHVybiBtaW51dGVSYW5nZS5maWx0ZXIoIG4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIShuLmRpc2FibGVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkU2Vjb25kcyh0aW1lT2JqOiBhbnkpIHtcclxuICAgICAgICBsZXQgc2Vjb25kUmFuZ2UgPSB0aGlzLm1ha2VSYW5nZSg2MCwgdGhpcy5vcHRzLnNlY29uZFN0ZXApLm1hcChyID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluZGV4OiByLFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFNlY29uZHMgJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2Vjb25kcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZU9iai5ob3VycyEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPYmoubWludXRlcyFcclxuICAgICAgICAgICAgICAgICAgICApLmluZGV4T2YocikgIT09IC0xXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOenu+mZpOemgeeUqOeahOWAvFxyXG4gICAgICAgIHJldHVybiBzZWNvbmRSYW5nZS5maWx0ZXIoIG4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIShuLmRpc2FibGVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja1RpbWVWYWx1ZXModGltZVZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGltZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGxldCB0aW1lcyA9IHRpbWVWYWx1ZS5zcGxpdCgnOicpLm1hcChuID0+IHBhcnNlSW50KG4sIDEwKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVPYmogPSB7XHJcbiAgICAgICAgICAgICAgICBob3VyOiB0aW1lc1swXSxcclxuICAgICAgICAgICAgICAgIG1pbnV0ZTogdGltZXNbMV0sXHJcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IHRpbWVzWzJdXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmhvdXJTdGVwID4gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSB0aGlzLmJ1aWxkSG91cnMoKTtcclxuICAgICAgICAgICAgICAgIGlmICghaG91cnMuZmluZChuID0+IG4uaW5kZXggPT09IHRpbWVPYmouaG91cikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lT2JqLmhvdXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLm1pbnV0ZVN0ZXAgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzID0gdGhpcy5idWlsZE1pbnV0ZXMoeyBob3VyczogdGltZU9iai5ob3VyIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtaW51dGVzLmZpbmQobiA9PiBuLmluZGV4ID09PSB0aW1lT2JqLm1pbnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lT2JqLm1pbnV0ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLnNlY29uZFN0ZXA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZHMgPSB0aGlzLmJ1aWxkU2Vjb25kcyh7IGhvdXJzOiB0aW1lT2JqLmhvdXIsIG1pbnV0ZXM6IHRpbWVPYmoubWludXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWNvbmRzLmZpbmQobiA9PiBuLmluZGV4ID09PSB0aW1lT2JqLnNlY29uZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lT2JqLnNlY29uZCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBgJHt0aW1lT2JqLmhvdXIgfHwgJzAwJ306JHt0aW1lT2JqLm1pbnV0ZSB8fCAnMDAnfToke3RpbWVPYmouc2Vjb25kIHx8ICcwMCd9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aW1lVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tUaW1lVmFsdWUoZGF0ZU9iajogSU15RGF0ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5vcHRzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5ob3VyU3RlcCA+IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgaG91cnMgPSB0aGlzLmJ1aWxkSG91cnMoKTtcclxuICAgICAgICAgICAgaWYgKCFob3Vycy5maW5kKG4gPT4gbi5pbmRleCA9PT0gIHBhcnNlSW50KCcnKyBkYXRlT2JqLmhvdXIsIDEwKSkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGVPYmouaG91ciA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRzLm1pbnV0ZVN0ZXAgPiAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSB0aGlzLmJ1aWxkTWludXRlcyh7IGhvdXJzOiBkYXRlT2JqLmhvdXIgfSk7XHJcbiAgICAgICAgICAgIGlmICghbWludXRlcy5maW5kKG4gPT4gbi5pbmRleCA9PT0gcGFyc2VJbnQoJycrZGF0ZU9iai5taW51dGUsIDEwKSkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGVPYmoubWludXRlID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0cy5zZWNvbmRTdGVwPiAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZHMgPSB0aGlzLmJ1aWxkU2Vjb25kcyh7IGhvdXJzOiBkYXRlT2JqLmhvdXIsIG1pbnV0ZXM6IGRhdGVPYmoubWludXRlIH0pO1xyXG4gICAgICAgICAgICBpZiAoIXNlY29uZHMuZmluZChuID0+IG4uaW5kZXggPT09IHBhcnNlSW50KCcnK2RhdGVPYmouc2Vjb25kLCAxMCkpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqLnNlY29uZCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19