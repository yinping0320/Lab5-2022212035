/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { NotifyService } from '@farris/ui-notify';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { Component, Input, EventEmitter, Output, ViewChild, forwardRef, ElementRef, HostListener, HostBinding, Injector, ViewContainerRef, ComponentFactoryResolver, Renderer2, ApplicationRef, ChangeDetectorRef } from '@angular/core';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { FarrisDatePickerDirective } from './farris-datepicker.input';
import { DefaultView, ShowType, CalToggle } from './enums/public-api';
import { UtilService, DefaultConfigService, DatepickerLocaleService, DatePickerService } from './services/public-api';
import { LocaleService } from '@farris/ui-locale';
import { differenceInSeconds, isDate, isValid, parse } from 'date-fns';
import { CalendarComponent } from './components/calendar/calendar.component';
import { CLICK, EMPTY_STR } from './constants/constants';
import { CommonUtils, OverLayHiddenService } from '@farris/ui-common';
import { ViewType } from './interfaces/my-options.interface';
/** @type {?} */
var FARRIS_DP_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return FarrisDatepickerComponent; })),
    multi: true
};
var FarrisDatepickerComponent = /** @class */ (function () {
    function FarrisDatepickerComponent(el, utilService, defaultConfigService, injector) {
        this.el = el;
        this.utilService = utilService;
        this.defaultConfigService = defaultConfigService;
        this.injector = injector;
        this.cls = 'f-cmp-datepicker f-cmp-inputgroup';
        this.viewType = ViewType.Switch;
        // 是否禁用该组件
        this.disabled = false;
        // 是否只读
        this.readonly = false;
        // 是否只能选择数据，不可键入
        this.editable = true;
        // 是否使用日期范围输入模式
        this.dateRange = false;
        // 是否使用时间输入框
        this.showTime = false;
        this.hourStep = 1;
        this.minuteStep = 1;
        this.secondStep = 1;
        // 显示类型
        this.showType = ShowType.all;
        // 本地语言
        this.locale = 'zh-cn';
        // 是否使用默认值
        this.useDefault = false;
        this.returnType = 'String';
        // placeholder
        this.placeholder = '';
        this.beginPlaceholder = '';
        this.endPlaceholder = '';
        /**
         * 输入值变化后关闭选择面板。 默认为 true
         */
        this.whenValueChangedThenCloseSelectorPanel = true;
        // 需要高亮显示的日期
        this.highlightDates = [];
        // 禁用区域的日期开始时间
        this.disableDateRangesBegin = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用区域的日期结束时间
        this.disableDateRangesEnd = {
            year: 0,
            month: 0,
            day: 0
        };
        // 禁用的日期
        this.disableDates = [];
        // 一周中被禁用的日子
        this.disableWeekdays = [];
        // 被标记的日期
        this.markDates = [];
        // 被标记的日期的显示颜色
        this.markDatesColor = '#59a1ff';
        // 是否显示第几周
        this.showWeekNumbers = false;
        // 是否标记周末
        this.isMarkWeekends = false;
        // 被标记周末的显示颜色
        this.markWeekendsColor = '#59a1ff';
        // 日期范围模式下input的显示分割符合
        this.dateRangeDatesDelimiter = '~';
        // 配置左侧 sidebar 快捷键
        this.shortcuts = [];
        // 日期范围选择时，默认结束月份为当前月份 + monthRangeValue
        this.monthRangeValue = 1;
        /**
         * 启用动态日期值设置，默认 false
         */
        this.enableDynamic = false;
        /**
         * 允许设置过去最大天数
         */
        this.previousMaxDays = 30;
        /**
         * 允许设置未来最大天数
         */
        this.futureMaxDays = 30;
        this.showClear = true;
        /**
         * 显示今天，本年，本月 按钮
         */
        this.showPresent = false;
        /**
         * 每周起始日  可选值 mo：周一  su: 周日，默认为 mo周一
         */
        this.firstDayOfWeek = 'mo';
        // clear 事件
        this.clear = new EventEmitter();
        // valueChanged 事件
        this.valueChange = new EventEmitter();
        // focus 事件
        this.focus = new EventEmitter();
        // blur 事件
        this.blur = new EventEmitter();
        // beginValueChange
        this.beginValueChange = new EventEmitter();
        // endValueChange
        this.endValueChange = new EventEmitter();
        // PrevFocus dateRange 第一个日期
        this.PrevFocus = new EventEmitter();
        // NextFocus dateRange 第二个日期
        this.NextFocus = new EventEmitter();
        // close 事件
        this.close = new EventEmitter();
        /**
         * 启用多选，默认 false
         */
        this.multiSelect = false;
        this.separator = ',';
        /**
         * 允许选择日期的个数； 0 无限
         */
        this.maxSelected = 0;
        /**
         * 选中日期的排序方式，默认为 'none' 即不排序
         */
        this.selectedOrderBy = 'none';
        this.cRef = null;
        this._timeFormat = '';
        this._value = '';
        this._beginValue = '';
        this._endValue = '';
        this._initFinished = false;
        this._minDate = {
            year: 1840,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this._maxDate = {
            year: 10000,
            month: 1,
            day: 1,
            hour: 0,
            minute: 0,
            second: 0
        };
        this.selectedWeek = null;
        this.dateOpts = {};
        // 开始输入控件聚焦
        this.beginFocus = false;
        // 结束输入控件聚焦
        this.endFocus = false;
        // 整体聚焦
        this.totalFocus = false;
        // 是否字符超长显示Tip
        this.isActiveTip = false;
        this._realValue = null;
        this._realRangeValue = null;
        this.formatedValue = '';
        this.dtService = null;
        this._updateOn = 'change';
        // 日期选择后设置为 true， blur 事件将不会重复执行valueChanged；
        // 键盘修改时，blur 事件中会执行一次 valueChanged 后，将此值设为 false;
        this._valueChangeEmitted = false;
        this._mousedownEvent = null;
        this.closeCalendarHandler = null;
        this.cdr = null;
        /**
         * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
         */
        this._SELECT_DATE_ = null;
        this.dynamicText = '';
        this.dynamicValue = null;
        this.dynamicValueChange = new EventEmitter();
        this.dynamicViewChanged = new EventEmitter();
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { });
        this.onModelTouched = (/**
         * @return {?}
         */
        function () { });
        this.defaultConfig = this.defaultConfigService.getDefaultConfig();
        if (this.injector) {
            this.localeService = this.injector.get(LocaleService);
            this.dtService = this.injector.get(DateTimeHelperService);
            this.notifySer = this.injector.get(NotifyService, null);
            if (this.notifySer) {
                this.notifySer.config.position = 'top-center';
            }
        }
        this.localeConfig = new DatepickerLocaleService();
        this.vcRef = this.injector.get(ViewContainerRef, null);
        this.cfr = this.injector.get(ComponentFactoryResolver, null);
        this.renderer = this.injector.get(Renderer2, null);
        this._applicationRef = this.injector.get(ApplicationRef);
        this.cdr = this.injector.get(ChangeDetectorRef);
        this.overLayService = new OverLayHiddenService();
        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());
    }
    Object.defineProperty(FarrisDatepickerComponent.prototype, "dateFormat", {
        get: /**
         * @return {?}
         */
        function () {
            return this._dateFormat;
        },
        // 日期格式
        set: 
        // 日期格式
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this_1 = this;
            if (value) {
                // value 格式形如 yyyy-MM-dd HH:mm:ss
                // const formArr = 'yyyy-MM-dd HH:mm:ss'.split(' ');
                value = value.replace(/^\s+|\s+$/g, ''); // 去掉左右空格
                value = value.replace(/\s+/g, ' '); // 将中间的多个连续空格，替换为1个空格
                // 将中间的多个连续空格，替换为1个空格
                /** @type {?} */
                var formArr = value.split(' ');
                this._dateFormat = formArr[0];
                // 处理'yyyy-MM-dd h:mm:ss a'即12小时显示的情况
                if (formArr.length === 3) {
                    this._timeFormat = 'h:mm:ss a';
                }
                else {
                    this._timeFormat = formArr[1];
                }
            }
            // this._dateFormat = this._dateFormat ? (this._dateFormat + '').replace(/m/g, 'M') : '';
            if (this._dateFormat) {
                /** @type {?} */
                var mm = ['yyyy-mm', 'yyyy/mm', 'yyyy年mm', 'mm/yyyy'];
                /** @type {?} */
                var _mm = mm.find((/**
                 * @param {?} m
                 * @return {?}
                 */
                function (m) { return _this_1._dateFormat.includes(m); }));
                if (_mm) {
                    this._dateFormat = this._dateFormat.replace(_mm, _mm.replace(/m/g, 'M'));
                }
                if (this._timeFormat && this.showTime) {
                    this._dateFormat += ' ' + this._timeFormat;
                    if (this._timeFormat.indexOf('时') > -1) {
                        this._timeFormat = this._timeFormat.replace('时', ':').replace('分', ':').replace('秒', '');
                    }
                }
            }
            // this.dateOpts.dateFormat = this._dateFormat;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "minDate", {
        get: /**
         * @return {?}
         */
        function () {
            return this._minDate;
        },
        // 最小日期
        // 加入接收时分秒功能
        set: 
        // 最小日期
        // 加入接收时分秒功能
        /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            /** @type {?} */
            var type = Object.prototype.toString.call(val);
            /** @type {?} */
            var date;
            switch (type) {
                case '[object Date]':
                    date = val;
                    break;
                case '[object String]':
                    if (val) {
                        date = new Date(val);
                    }
                    else {
                        date = new Date(1840, 1, 1, 0, 0, 0);
                    }
                    break;
                case '[object Null]':
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
                // case null:
                //     date = new Date(1840, 1, 1, 0, 0, 0);
                //     break;
                case '[object Undefined]':
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
                default:
                    date = new Date(1840, 1, 1, 0, 0, 0);
                    break;
            }
            if (isValid(date)) {
                /** @type {?} */
                var year = date.getFullYear();
                /** @type {?} */
                var month = date.getMonth() + 1;
                /** @type {?} */
                var day = date.getDate();
                /** @type {?} */
                var hour = date.getHours();
                /** @type {?} */
                var minute = date.getMinutes();
                /** @type {?} */
                var second = date.getSeconds();
                this._minDate = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "maxDate", {
        get: /**
         * @return {?}
         */
        function () {
            return this._maxDate;
        },
        // 最大日期
        // 加入接收时分秒功能
        set: 
        // 最大日期
        // 加入接收时分秒功能
        /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            /** @type {?} */
            var type = Object.prototype.toString.call(val);
            /** @type {?} */
            var date;
            switch (type) {
                case '[object Date]':
                    date = val;
                    break;
                case '[object String]':
                    if (val) {
                        date = new Date(val);
                    }
                    else {
                        date = new Date(10000, 1, 1, 0, 0, 0);
                    }
                    break;
                case '[object Null]':
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
                // case null:
                //     date = new Date(10000, 1, 1, 0, 0, 0);
                //     break;
                case '[object Undefined]':
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
                default:
                    date = new Date(10000, 1, 1, 0, 0, 0);
                    break;
            }
            if (isValid(date)) {
                /** @type {?} */
                var year = date.getFullYear();
                /** @type {?} */
                var month = date.getMonth() + 1;
                /** @type {?} */
                var day = date.getDate();
                /** @type {?} */
                var hour = date.getHours();
                /** @type {?} */
                var minute = date.getMinutes();
                /** @type {?} */
                var second = date.getSeconds();
                this._maxDate = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "beginValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dateFrom(this._beginValue, true);
        },
        // 日期范围：开始日期
        set: 
        // 日期范围：开始日期
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            value = value ? value : '';
            if (value instanceof Date) {
                value = this.dateTo(value);
                this.returnType = 'Date';
            }
            else {
                if (value.indexOf('T') > -1) {
                    value = value.replace('T', ' ');
                }
                this.returnType = 'String';
            }
            this._beginValue = value;
            if (this._initFinished) {
                this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "endValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dateFrom(this._endValue, true);
        },
        // 日期范围：结束日期
        set: 
        // 日期范围：结束日期
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            value = value ? value : '';
            if (value instanceof Date) {
                value = this.dateTo(value);
                this.returnType = 'Date';
            }
            else {
                if (value.indexOf('T') > -1) {
                    value = value.replace('T', ' ');
                }
                this.returnType = 'String';
            }
            this._endValue = value;
            if (this._initFinished) {
                this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisDatepickerComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._value = v ? v : '';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this._ngControl = this.injector.get(NgControl, null);
        this.initPlaceholder();
        this.mergeDateOptions();
        if (this._beginValue && this._endValue) {
            this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        }
        this._initFinished = true;
        this.datePicekrService = new DatePickerService(this.dateOpts);
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.initPlaceholder = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.localeService) {
            this.locale = this.localeService.getValue('locale');
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
            this.placeholder = this.placeholder
                ? this.placeholder
                : this.localDateOpts.placeholder
                    ? this.localDateOpts.placeholder
                    : '请选择日期';
            if (!this.beginPlaceholder) {
                this.beginPlaceholder = this.localDateOpts.range.begin || this.placeholder;
            }
            if (!this.endPlaceholder) {
                this.endPlaceholder = this.localDateOpts.range.end || this.placeholder;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.mergeDateOptions = /**
     * @private
     * @return {?}
     */
    function () {
        this.dateOpts = tslib_1.__assign({}, this.defaultConfig, this.buildOptions());
        if (this.dateOpts.dateFormat) {
            if (!this._dateFormat) {
                this.dateFormat = this.dateOpts.dateFormat;
                this.dateOpts.dateFormat = this.dateFormat;
            }
        }
        if (this.showTime && !this._timeFormat) {
            this._timeFormat = 'HH:mm:ss';
            this.dateOpts.timeFormat = this._timeFormat;
        }
        if (this.dateOpts.returnFormat) {
            if (!this.returnFormat) {
                this.returnFormat = this.dateOpts.returnFormat;
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this_1 = this;
        if (changes.locale && changes.locale.isFirstChange()) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (changes) {
            /** @type {?} */
            var flag_1 = false;
            /** @type {?} */
            var inputs_1 = ['showTime', 'showType', 'dateRange', 'maxDate', 'minDate', 'monthRangeValue', 'maxSelected', 'separator', 'selectedOrderBy'];
            Object.keys(changes).forEach((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!changes[e].isFirstChange() && (_this_1.dateOpts[e] || inputs_1.includes(e))) {
                    flag_1 = true;
                }
            }));
            if (flag_1) {
                this.dateOpts = tslib_1.__assign({}, (this.dateOpts || this.defaultConfig), this.buildOptions());
            }
        }
        if (changes.readonly &&
            !changes.readonly.currentValue &&
            !changes.readonly.firstChange &&
            !this.value &&
            this.useDefault) {
            this.setDefaultValue();
        }
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this._ngControl && this._ngControl.control) {
            this._updateOn = this._ngControl.control.updateOn;
        }
        this._timer = setTimeout((/**
         * @return {?}
         */
        function () {
            _this_1.setDefaultValue();
        }));
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        clearTimeout(this._timer);
        this.closeSelector();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onMouseEnter = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.value && !this.readonly && !this.disabled) {
            if (this.value && this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = '';
            }
            if (this.dateOpts.dateRange) {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 300;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 190;
                }
            }
            else {
                if (this.dateOpts.showTime) {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 170;
                }
                else {
                    this.isActiveTip = this.el.nativeElement.getBoundingClientRect().width < 120;
                }
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onMouseLeave = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.readonly && !this.disabled && this.clearIcon) {
            this.clearIcon.nativeElement.style.visibility = 'hidden';
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onBlur = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this_1 = this;
        this.totalFocus = false;
        /** @type {?} */
        var _runblur = true;
        if (this.value) {
            try {
                this.value = this.transform(this.value);
                /** @type {?} */
                var valid = this._isValid(this.value);
                if (!valid) {
                    this.clearDate();
                    _runblur = false;
                }
            }
            catch (e) {
                this.clearDate();
                _runblur = false;
            }
        }
        /** @type {?} */
        var updateModel = (/**
         * @return {?}
         */
        function () {
            if (!_this_1._valueChangeEmitted) {
                /** @type {?} */
                var realDate = _this_1.dateFrom(_this_1.transform(_this_1.value, _this_1.returnFormat));
                _this_1.onNgModelChange(_this_1.value, realDate, true);
                _this_1.onModelTouched();
            }
        });
        if (this.editable && _runblur) {
            if (this['inDatagrid']) {
                updateModel();
            }
            else {
                setTimeout(updateModel, 250);
            }
        }
        this._valueChangeEmitted = false;
        if (this._mousedownEvent) {
            this._mousedownEvent();
            this._mousedownEvent = null;
        }
        this.blur.emit();
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onFocus = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.totalFocus = true;
        this.registerMouseDownHandle();
        this.focus.emit();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onInputClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        if (!this.readonly && !this.disabled) {
            this.registerMouseDownHandle();
            this.toggleCalendar(false);
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerMouseDownHandle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (!this._mousedownEvent) {
            this._mousedownEvent = this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e.target.className.toString().indexOf('SVGAnimatedString') > -1) {
                    return;
                }
                if (e.target.closest('.dynamic-view-item')) {
                    return;
                }
                if (e.target.closest('.f-cmp-datepicker') ||
                    e.target.closest('.f-datepicker-container') || e.target.className.indexOf('f-icon-date') > -1) {
                    if (_this_1.dateInput) {
                        _this_1.renderer.setStyle(_this_1.dateInput.nativeElement, 'unselectable', 'on');
                    }
                    e.preventDefault();
                }
            }));
        }
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setDefaultValue = /**
     * @return {?}
     */
    function () {
        if (!this.readonly && !this.value && this.useDefault) {
            /** @type {?} */
            var now = new Date();
            /** @type {?} */
            var nowValue = '';
            if (!this.dateOpts.dateRange) {
                nowValue = this.dateTo(now);
            }
            else {
                nowValue =
                    this.dateTo(now) +
                        this.dateRangeDatesDelimiter +
                        this.dateTo(new Date(now.setMonth(now.getMonth() + 1)));
            }
            if (this.datePicekrService.validate(nowValue)) {
                this.value = nowValue;
                this.onNgModelChange(this.value);
                this.onModelTouched();
            }
        }
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.clearDynamicDate = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event === void 0) { $event = null; }
        if ($event) {
            $event.stopPropagation();
        }
        this.dateOpts.dynamicValueChanged(null);
    };
    /**
     * @param {?=} $event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.clearDate = /**
     * @param {?=} $event
     * @return {?}
     */
    function ($event) {
        if ($event === void 0) { $event = null; }
        if ($event) {
            $event.stopPropagation();
        }
        this._SELECT_DATE_ = null;
        if (!this.disabled) {
            this._realRangeValue = null;
            this._realValue = null;
            this.selectedWeek = null;
            this.onDateChanged({
                isRange: this.dateOpts.dateRange,
                singleDate: {
                    date: this.utilService.resetDate(),
                    jsDate: null,
                    formatted: EMPTY_STR,
                    epoc: 0
                },
                dateRange: {
                    beginDate: this.utilService.resetDate(),
                    beginJsDate: null,
                    beginEpoc: 0,
                    endDate: this.utilService.resetDate(),
                    endJsDate: null,
                    endEpoc: 0,
                    formatted: EMPTY_STR
                }
            });
            this.closeSelector(CalToggle.CloseByCalBtn);
            this.onModelChange(null);
            this.clear.emit();
            if (this.clearIcon) {
                this.clearIcon.nativeElement.style.visibility = 'hidden';
            }
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onSingleInputNgModelChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.value = $event || '';
        this._realValue = this.value ? this.dateFrom($event) : '';
        this.closeSelector();
    };
    /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onNgModelChange = /**
     * @param {?} value
     * @param {?=} realdate
     * @param {?=} emitValueChange
     * @return {?}
     */
    function (value, realdate, emitValueChange) {
        if (realdate === void 0) { realdate = null; }
        if (emitValueChange === void 0) { emitValueChange = false; }
        // this.value = value;
        if (this.dateRange || this.showType == ShowType.selectWeek) {
            /** @type {?} */
            var tmpArr = value ? value.split(this.dateRangeDatesDelimiter) : ['', ''];
            /** @type {?} */
            var _beginValue = this.transform(tmpArr[0], this.returnFormat);
            /** @type {?} */
            var _endValue = this.transform(tmpArr[1], this.returnFormat);
            this._beginValue = this.transform(tmpArr[0]);
            this._endValue = this.transform(tmpArr[1]);
            value = _beginValue && _endValue ? _beginValue + this.dateRangeDatesDelimiter + _endValue : '';
            this._realRangeValue = value;
            this.onModelChange(value);
            this.cdr.detectChanges();
            this.beginValueChange.emit(this._beginValue);
            this.endValueChange.emit(this._endValue);
            /** @type {?} */
            var p = {
                date: null,
                formatted: this.value,
                returnFormatted: this._realRangeValue,
                cmpRef: this
            };
            this.valueChange.emit(p);
        }
        else {
            if (value === '') {
                this.value = '';
                this._onModelChange(null, emitValueChange);
                return;
            }
            if (realdate) {
                this._realValue = this.getRealReturnFormatted(realdate);
                this._onModelChange(this._realValue, emitValueChange);
                if (this.dateInput && this.dateInput.nativeElement.value !== this.value) {
                    this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                }
            }
            else {
                if (this._isValid(value)) {
                    this._realValue = this.getRealReturnFormatted(realdate);
                    if (this.dateInput) {
                        this.renderer.setProperty(this.dateInput.nativeElement, 'value', this.value);
                    }
                    this._onModelChange(this._realValue, emitValueChange);
                }
            }
        }
    };
    /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._onModelChange = /**
     * @private
     * @param {?} realValue
     * @param {?} emit
     * @return {?}
     */
    function (realValue, emit) {
        this._realValue = realValue;
        this.onModelChange(realValue);
        if (emit) {
            /** @type {?} */
            var p = {
                date: this.utilService.isDateValid(this.value, this.dateOpts, true),
                formatted: this.value,
                returnFormatted: realValue,
                cmpRef: this
            };
            if (this.valueChange.observers.length) {
                if (this.whenValueChangedThenCloseSelectorPanel) {
                    this.closeSelector();
                }
                this.valueChange.emit(p);
            }
        }
    };
    /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.getRealReturnFormatted = /**
     * @private
     * @param {?} realdate
     * @return {?}
     */
    function (realdate) {
        if (realdate) {
            if (this.returnType === 'Date') {
                return realdate;
            }
            else {
                if (this.returnFormat) {
                    return this.dtService.formatTo(realdate, this.returnFormat);
                }
                return realdate;
            }
        }
        else {
            return this.dateFrom(this._realValue || this.value) || '';
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onDateRangeInputBlur = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.setValue(this._beginValue + this.dateRangeDatesDelimiter + this._endValue);
        this.onNgModelChange(this._realRangeValue || this.value);
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.openCalendar = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        var val = this._realValue;
        if (!this.multiSelect) {
            if (this.dateRange || this.showType == ShowType.selectWeek) {
                val = this._realRangeValue;
            }
            else {
                if (this.returnType === 'Date') {
                    val = this.transform(val, this.returnFormat);
                }
            }
        }
        if (this.cRef === null) {
            this.cRef = this.calendarRef.createComponent(this.cfr.resolveComponentFactory(CalendarComponent));
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
            this.datePicekrService.registerScrollEvent((/**
             * @return {?}
             */
            function () {
                _this_1.closeSelector();
            }));
            this.cRef.instance.dateHlp = this.dtService;
            if (this.showType === 4 && this.selectedWeek) {
                this.cRef.instance.selectedWeek = this.selectedWeek;
            }
            if (this.multiSelect) {
                this.cRef.instance.multiDatesChanged = (/**
                 * @param {?} dates
                 * @return {?}
                 */
                function (dates) {
                    _this_1.value = dates.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.value; })).join(_this_1.separator);
                    _this_1._realValue = dates.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return _this_1.dtService.formatTo(n.year + "-" + n.month + "-" + n.day, _this_1.returnFormat); })).join(_this_1.separator);
                    _this_1.multiSelectedChanged();
                });
                this.cRef.instance.showNotify = (/**
                 * @return {?}
                 */
                function () {
                    /** @type {?} */
                    var msg = _this_1.localDateOpts.message['102'].replace('${0}', _this_1.maxSelected);
                    if (_this_1.notifySer) {
                        _this_1.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                });
            }
            this.cRef.instance.initialize(this.dateOpts, '', this.datePicekrService.getSelectorPosition(this.el.nativeElement, this.cRef), val, (/**
             * @param {?} dm
             * @param {?} close
             * @return {?}
             */
            function (dm, close) {
                if (_this_1.dateOpts.dateRange && _this_1.showTime && dm.dateRange.endJsDate < dm.dateRange.beginJsDate) {
                    // const { year: beginYear, month: beginMonth,  day: beginDay  } = {...dm.dateRange.beginDate};
                    // const { year: endYear, month: endMonth,  day: endDay  } = {...dm.dateRange.endDate};
                    // error message:  The end time must not be earlier than the start time
                    // error message:  結束時間不得早于開始時間
                    /** @type {?} */
                    var msg = _this_1.localDateOpts.message['101'];
                    if (_this_1.notifySer) {
                        _this_1.notifySer.warning(msg);
                    }
                    else {
                        alert(msg);
                    }
                    return;
                }
                _this_1.selectedWeek = _this_1.cRef.instance.selectedWeek;
                _this_1.onDateChanged(dm);
                if (close) {
                    _this_1.closeSelector(CalToggle.CloseByDateSel);
                }
            }), (/**
             * @param {?} cvc
             * @return {?}
             */
            function (cvc) {
                // this.emitCalendarChanged(cvc);
            }), (/**
             * @param {?} rds
             * @return {?}
             */
            function (rds) {
                // this.emitRangeDateSelection(rds);
            }), (/**
             * @return {?}
             */
            function () {
                _this_1.closeSelector(CalToggle.CloseByEsc);
            }));
            this.cRef.instance.dynamicViewShow.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                /** @type {?} */
                var t = Object.assign(e, { dynamicValue: _this_1.dynamicValue, singleValue: _this_1._realValue, instance: _this_1 });
                _this_1.dynamicViewChanged.emit(t);
            }));
            // this.cdr.detectChanges();
        }
        else {
            this.datePicekrService.appendSelector(this.cRef.location.nativeElement);
        }
        this.overLayService.registerMouseEvent(this.el.nativeElement, (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            /** @type {?} */
            var t = e.target;
            /** @type {?} */
            var notClose = (_this_1.cRef && _this_1.cRef.location.nativeElement.contains(t)) ||
                t.closest('.multi-date-select') || (t.className && t.className.indexOf('multi-date-select') > -1);
            if (notClose) {
                return false;
            }
            _this_1.closeSelector();
        }), { onlyTopWindow: true });
        this.cRef.changeDetectorRef.detectChanges();
        // this.preventClose = false;
    };
    /**
     * @param {?=} reason
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.closeSelector = /**
     * @param {?=} reason
     * @return {?}
     */
    function (reason) {
        if (this.cRef !== null) {
            this.calendarRef.remove(this.calendarRef.indexOf(this.cRef.hostView));
            this.cRef = null;
            // this.cdr.detectChanges();
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            if (container.childElementCount) {
                container.remove();
            }
            this.renderer.setStyle(container, 'pointer-events', '');
        }
        this.totalFocus = false;
        if (this.dateOpts.dateRange) {
            this.beginFocus = false;
            this.endFocus = false;
        }
        if (this.closeCalendarHandler) {
            this.closeCalendarHandler();
            this.closeCalendarHandler = null;
        }
        if (this.datePicekrService) {
            this.datePicekrService.removeMouseEvent();
        }
        this.overLayService.destory(this.el.nativeElement);
    };
    /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.toggleCalendar = /**
     * @param {?} close
     * @param {?=} emit
     * @return {?}
     */
    function (close, emit) {
        var _this_1 = this;
        if (emit === void 0) { emit = true; }
        if (this.disabled) {
            this.totalFocus = false;
            if (this.dateOpts.dateRange) {
                this.beginFocus = false;
                this.endFocus = false;
            }
            return;
        }
        if (this.cRef === null) {
            if (!this.closeCalendarHandler) {
                this.closeCalendarHandler = this.renderer.listen(document, CLICK, (/**
                 * @return {?}
                 */
                function () { return _this_1.closeSelector(CalToggle.CloseByOutClick); }));
            }
            this.totalFocus = true;
            this.openCalendar();
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            this.renderer.setStyle(container, 'pointer-events', 'auto');
            /** @type {?} */
            var zindex = this.commonUtils.getFloatingLayerIndex();
            this.renderer.setStyle(container, 'zIndex', zindex);
        }
        else {
            /** @type {?} */
            var flag_2 = true;
            /** @type {?} */
            var container = document.querySelector('.date-overlay-container');
            if (container && this.cRef.location) {
                if (container.hasChildNodes()) {
                    container.childNodes.forEach((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        if (el === _this_1.cRef.location.nativeElement) {
                            flag_2 = false;
                        }
                    }));
                }
            }
            if (flag_2) {
                this.renderer.setStyle(container, 'pointer-events', 'auto');
                this.totalFocus = true;
                this.openCalendar();
            }
            else {
                this.totalFocus = false;
                if (this.dateOpts.dateRange) {
                    this.beginFocus = false;
                    this.endFocus = false;
                }
                // document.removeEventListener(CLICK, this.onClickHidden);
                close && this.closeSelector(CalToggle.CloseByCalBtn);
                // this.renderer.setStyle(container, 'pointer-events', '')
                if (emit) {
                    this.close.emit();
                }
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onDateChanged = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this._SELECT_DATE_ = event;
        /** @type {?} */
        var valChangeParams = '';
        if (event.singleDate) {
            this.value = event.singleDate.formatted;
            this.formatedValue = event.singleDate.formatted;
            /** @type {?} */
            var returnFormatted = this.getRealReturnFormatted(event.singleDate.jsDate);
            valChangeParams = tslib_1.__assign({}, event.singleDate, { formatted: event.singleDate.formatted, returnFormatted: returnFormatted });
            var _a = event.singleDate.date, year = _a.year, month = _a.month, day = _a.day, hour = _a.hour, minute = _a.minute, second = _a.second;
            if (month && (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1)) {
                /** @type {?} */
                var nd = new Date(year || new Date().getFullYear(), month - 1, day || 1, hour || 0, minute || 0, second || 0);
                event.singleDate.jsDate = nd;
            }
            var _b = this.minDate, minYear = _b.year, minMonth = _b.month, minDay = _b.day, minHour = _b.hour, minMinute = _b.minute, minSecond = _b.second;
            minMonth = this.utilService.padStartZero(minMonth);
            minDay = this.utilService.padStartZero(minDay);
            minHour = this.utilService.padStartZero(minHour);
            minMinute = this.utilService.padStartZero(minMinute);
            minSecond = this.utilService.padStartZero(minSecond);
            /** @type {?} */
            var MIN_DATE = new Date(minYear + "-" + minMonth + "-" + minDay + " " + minHour + ":" + minMinute + ":" + minSecond);
            if (this.minDate.year !== 1840) {
                if (differenceInSeconds(MIN_DATE, event.singleDate.jsDate) > 0) {
                    event.singleDate.jsDate = MIN_DATE;
                    this.value = this.transform(MIN_DATE);
                }
            }
            else if (this.maxDate.year !== 10000) {
                var _c = this.maxDate, maxYear = _c.year, maxMonth = _c.month, maxDay = _c.day, maxHour = _c.hour, maxMinute = _c.maxute, maxSecond = _c.second;
                maxMonth = this.utilService.padStartZero(maxMonth);
                maxDay = this.utilService.padStartZero(maxDay);
                maxHour = this.utilService.padStartZero(maxHour);
                maxMinute = this.utilService.padStartZero(maxMinute);
                maxSecond = this.utilService.padStartZero(maxSecond);
                /** @type {?} */
                var MAX_DATE = new Date(maxYear + "-" + maxMonth + "-" + maxDay + " " + maxHour + ":" + maxMinute + ":" + maxSecond);
                if (event.singleDate.date.year === 1840 || differenceInSeconds(MIN_DATE, event.singleDate.jsDate) === 0 || differenceInSeconds(MAX_DATE, event.singleDate.jsDate) < 0) {
                    event.singleDate.jsDate = MAX_DATE;
                    this.value = this.transform(MAX_DATE);
                }
            }
            this.onNgModelChange(returnFormatted, event.singleDate.jsDate);
        }
        else if (event.dateRange) {
            this.value = event.dateRange.formatted;
            this.formatedValue = event.dateRange.formatted;
            /** @type {?} */
            var returnFormatted = event.dateRange.returnFormatted;
            // let returnFormatted = this.dateFrom(event.dateRange.returnFormatted);
            valChangeParams = tslib_1.__assign({}, event.dateRange, { formatted: event.dateRange.formatted, returnFormatted: returnFormatted });
            this.onNgModelChange(returnFormatted, event.dateRange);
        }
        this.onModelTouched();
        this._valueChangeEmitted = true;
        this.valueChange.emit(valChangeParams);
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.checkMultiSelectedOption = /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.multiSelect) {
            this.showTime = false;
            this.showType = ShowType.all;
            this.dateRange = false;
            this.enableDynamic = false;
            // 返回格式必须包括年月日
            /** @type {?} */
            var fmtList = ['yyyy-MM-dd', 'yyyy/MM/dd', 'MM/dd/yyyy', 'yyyy年MM月dd日', 'yyyyMMdd'];
            if (!fmtList.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n === _this_1.returnFormat; }))) {
                this.returnFormat = 'yyyy-MM-dd';
            }
            if (!fmtList.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n === _this_1.dateFormat; }))) {
                this.dateFormat = 'yyyy-MM-dd';
            }
        }
    };
    /**
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.buildOptions = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        /** @type {?} */
        var dateOpts;
        if (!this.localDateOpts) {
            this.localDateOpts = this.localeConfig.getLocaleOptions(this.locale);
        }
        if (this.showType === ShowType.noDateAndMonth) {
            this.localDateOpts.dateFormat = 'yyyy';
            this.localDateOpts.returnFormat = 'yyyy';
        }
        // 检查是否具备启用日期多选的条件
        this.checkMultiSelectedOption();
        /** @type {?} */
        var _showTime = (Number(this.showType) === ShowType.all) ? this.showTime : false;
        dateOpts = {
            dateRange: this.dateRange,
            showTime: _showTime,
            showType: Number(this.showType),
            dateFormat: this.dateFormat ? this.dateFormat : this.localDateOpts.dateFormat,
            returnFormat: this.returnFormat ? this.returnFormat : this.localDateOpts.returnFormat,
            minYear: this._minDate.year,
            maxYear: this._maxDate.year,
            highlightDates: this.highlightDates,
            disableDates: this.disableDates,
            showWeekNumbers: this.showWeekNumbers,
            disableDateRanges: [
                {
                    begin: this.disableDateRangesBegin,
                    end: this.disableDateRangesEnd
                }
            ],
            disableUntil: this._minDate,
            disableSince: this._maxDate,
            disableWeekdays: this.disableWeekdays,
            markDates: [
                {
                    dates: this.markDates,
                    color: this.markDatesColor
                }
            ],
            markWeekends: {
                marked: this.isMarkWeekends,
                color: this.markWeekendsColor
            },
            dateRangeDatesDelimiter: this.dateRangeDatesDelimiter,
            shortcuts: this.shortcuts,
            timeFormat: this._timeFormat,
            monthRangeValue: this.monthRangeValue,
            viewType: this.viewType,
            enableDynamic: this.enableDynamic,
            dynamicValue: this.dynamicValue,
            dynamicValueChanged: (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                _this_1.dynamicValue = e;
                _this_1.dynamicText = e ? e.text : '';
                _this_1.dateOpts.dynamicValue = e;
                _this_1.dynamicValueChange.emit(e);
                _this_1.closeSelector();
            }),
            previousMaxDays: this.previousMaxDays,
            futureMaxDays: this.futureMaxDays,
            dynamicLocale: this.localDateOpts.dynamicLocale,
            mulstiDatesLocale: this.localDateOpts.mulstiDatesLocale,
            showPresent: this.showPresent,
            hourStep: this.hourStep,
            minuteStep: this.minuteStep,
            secondStep: this.secondStep,
            closeSelectorOnDateSelect: !this.multiSelect,
            multiSelect: this.multiSelect,
            separator: this.separator,
            maxSelected: this.maxSelected,
            selectedOrderBy: this.selectedOrderBy
        };
        dateOpts.firstDayOfWeek = this.firstDayOfWeek;
        switch (Number(this.showType)) {
            case ShowType.noDate:
                dateOpts.defaultView = DefaultView.Month;
                break;
            case ShowType.noDateAndMonth:
                dateOpts.defaultView = DefaultView.Year;
                // dateOpts.dateFormat = 'yyyy';
                // dateOpts.returnFormat = 'yyyy';
                // this.dateFormat = 'yyyy';
                break;
            case ShowType.selectWeek:
                dateOpts.showWeekNumbers = true;
                dateOpts.dateRange = true;
                // dateOpts.firstDayOfWeek = 'mo';
                break;
            // default:
            // this.returnType = 'String';
        }
        return tslib_1.__assign({}, this.localDateOpts, dateOpts);
    };
    /**
     * @param {?} d
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.dateTo = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        var monthLabels = this.dateOpts.monthLabels ? this.dateOpts.monthLabels : this.defaultConfig.monthLabels;
        /** @type {?} */
        var showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        var year = d.getFullYear();
        /** @type {?} */
        var month = d.getMonth() + 1;
        /** @type {?} */
        var day = d.getDate();
        /** @type {?} */
        var hour = d.getHours();
        /** @type {?} */
        var minute = d.getMinutes();
        /** @type {?} */
        var second = d.getSeconds();
        /** @type {?} */
        var date;
        if (!showTime) {
            date = { year: year, month: month, day: day };
            this.originTime = { hour: hour, minute: minute, second: second };
        }
        else {
            date = { year: year, month: month, day: day, hour: hour, minute: minute, second: second };
        }
        return this.utilService.formatDate(date, dateFormat, monthLabels);
    };
    // 返回真实日期 Date 类型
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.dateFrom = 
    // 返回真实日期 Date 类型
    /**
     * @param {?} str
     * @param {?=} ignorRange
     * @return {?}
     */
    function (str, ignorRange) {
        if (ignorRange === void 0) { ignorRange = false; }
        if (!str) {
            return '';
        }
        /** @type {?} */
        var _this = this;
        /** @type {?} */
        var dateRange = this.dateOpts.dateRange ? this.dateOpts.dateRange : this.defaultConfig.dateRange;
        /** @type {?} */
        var dateFormat = this.dateOpts.dateFormat ? this.dateOpts.dateFormat : this.defaultConfig.dateFormat;
        /** @type {?} */
        var returnFormat = this.dateOpts.returnFormat ? this.dateOpts.returnFormat : this.defaultConfig.returnFormat;
        /** @type {?} */
        var showTime = this.dateOpts.showTime ? this.dateOpts.showTime : this.defaultConfig.showTime;
        /** @type {?} */
        var delimeters = returnFormat.match(/[^(DdMmYy)]{1,}/g);
        /** @type {?} */
        var dateValue;
        /** @type {?} */
        var getValue = this.utilService.getDateValue;
        if ((dateRange || this.dateOpts.showType === ShowType.selectWeek) && !ignorRange) {
            /** @type {?} */
            var tmpBegin = str.split(this.dateRangeDatesDelimiter)[0];
            /** @type {?} */
            var tmpEnd = str.split(this.dateRangeDatesDelimiter)[1];
            /** @type {?} */
            var tmpBeginDate = this.utilService.isDateValid(tmpBegin, this.dateOpts, true);
            /** @type {?} */
            var tmpEndDate = this.utilService.isDateValid(tmpEnd, this.dateOpts, true);
            tmpBeginDate = this.utilService.isInitializedDate(tmpBeginDate) ? tmpBeginDate : this.dateOpts.disableUntil;
            tmpEndDate = this.utilService.isInitializedDate(tmpEndDate) ? tmpEndDate : this.dateOpts.disableSince;
            return (this.utilService.formatDate(tmpBeginDate, returnFormat, this.defaultConfig.monthLabels) +
                this.dateRangeDatesDelimiter +
                this.utilService.formatDate(tmpEndDate, returnFormat, this.defaultConfig.monthLabels));
        }
        else {
            if (this.returnType === 'Date') {
                if (str && str instanceof Date) {
                    return str;
                }
                return convert(str, getValue, this.originTime);
            }
            else {
                /** @type {?} */
                var tmpDate = this.utilService.isDateValid(str, this.dateOpts, true);
                return this.utilService.formatDate(tmpDate, returnFormat, this.defaultConfig.monthLabels);
            }
        }
        /**
         * @param {?} v
         * @param {?} _getValue
         * @param {?=} originTime
         * @return {?}
         */
        function convert(v, _getValue, originTime) {
            if (originTime === void 0) { originTime = { hour: 0, minute: 0, second: 0 }; }
            /** @type {?} */
            var fmt = returnFormat;
            if (_this.returnType === 'Date') {
                fmt = 'yyyy-MM-dd' + (showTime ? ' HH:mm:ss' : '');
            }
            if (showTime) {
                /** @type {?} */
                var date = v.split(' ')[0];
                /** @type {?} */
                var time = v.split(' ')[1];
                dateValue = _getValue(date, fmt, delimeters);
                if (time) {
                    time = time.replace(/[时,分]/g, ':').replace(/[秒]/, '');
                    var _a = tslib_1.__read(time.split(':'), 3), h = _a[0], m = _a[1], s = _a[2];
                    /** @type {?} */
                    var hour = h;
                    /** @type {?} */
                    var minute = m;
                    /** @type {?} */
                    var second = s ? s : '';
                    dateValue[3] = { value: hour, format: 'hh' };
                    dateValue[4] = { value: minute, format: 'mm' };
                    if (second) {
                        dateValue[5] = { value: second, format: 'ss' };
                    }
                }
            }
            else {
                /** @type {?} */
                var date = v.split(' ')[0];
                dateValue = _getValue(date, fmt, delimeters);
            }
            /** @type {?} */
            var year = Number(dateValue[0] ? dateValue[0].value : 1970);
            /** @type {?} */
            var yearValue = dateValue[0];
            if (yearValue.format) {
                if (!yearValue.value || yearValue.value.length !== yearValue.format.length) {
                    year = null;
                }
            }
            /** @type {?} */
            var month = Number(dateValue[1] ? dateValue[1].value : 1) - 1;
            /** @type {?} */
            var day = Number(dateValue[2] ? dateValue[2].value : 1);
            /** @type {?} */
            var _hour = dateValue[3] ? Number(dateValue[3].value) : originTime.hour;
            /** @type {?} */
            var _minute = dateValue[4] ? Number(dateValue[4].value) : originTime.minute;
            /** @type {?} */
            var _second = dateValue[5] ? Number(dateValue[5].value) : originTime.second;
            if (!year) {
                return null;
            }
            return new Date(year, month, day, _hour, _minute, _second);
        }
    };
    /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.transform = /**
     * @param {?} value
     * @param {?=} _fmt
     * @return {?}
     */
    function (value, _fmt) {
        if (_fmt === void 0) { _fmt = this.dateOpts.dateFormat; }
        value = value ? value : '';
        var _a = this.dateOpts, returnFormat = _a.returnFormat, dateFormat = _a.dateFormat, showTime = _a.showTime;
        /** @type {?} */
        var _tmpDate = null;
        if (typeof value === 'string') {
            _tmpDate = parse(value, returnFormat, new Date());
            if (!isValid(_tmpDate)) {
                if (this._SELECT_DATE_ && this._SELECT_DATE_.singleDate) {
                    _tmpDate = this._SELECT_DATE_.singleDate.jsDate;
                }
                else {
                    if (this._realValue) {
                        _tmpDate = parse(this._realValue, returnFormat, new Date());
                    }
                }
            }
        }
        else {
            if (value instanceof Date) {
                _tmpDate = value;
            }
        }
        /** @type {?} */
        var formattedVal = value;
        if (isValid(_tmpDate)) {
            formattedVal = this.dtService.formatTo(_tmpDate, _fmt);
            return formattedVal;
        }
        else {
            // 兼容年月日,年月,年格式
            value = value.replace(/[年,月]/g, '-').replace(/[日]/, '');
            if (value[value.length - 1] === '-') {
                value = value.substr(0, value.length - 1);
            }
            if (isValid(new Date(value))) {
                formattedVal = this.dtService.formatTo(value, _fmt);
            }
            else {
                value = '';
            }
        }
        if (value) {
            if (this.dateFrom(value, true) === '') {
                /** @type {?} */
                var tmpDate = this.utilService.isDateValid(value, Object.assign({}, this.dateOpts, {
                    dateFormat: returnFormat
                }));
                formattedVal = this.utilService.formatDate(tmpDate, _fmt, this.defaultConfig.monthLabels);
            }
        }
        return formattedVal;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.value !== value) {
            if (this.dateOpts.dateRange) {
                /** @type {?} */
                var _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
                /** @type {?} */
                var beginStr = _tmpDateArr[0];
                /** @type {?} */
                var endStr = _tmpDateArr[1];
                this._beginValue = this.transform(beginStr);
                this._endValue = this.transform(endStr);
                this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
            }
            else {
                if (value) {
                    this.value = this.transform(value);
                }
                else {
                    this.value = '';
                }
            }
            this.cdr.markForCheck();
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.updateValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.dateOpts.dateRange) {
            /** @type {?} */
            var _tmpDateArr = value.split(this.dateRangeDatesDelimiter);
            /** @type {?} */
            var beginStr = _tmpDateArr[0];
            /** @type {?} */
            var endStr = _tmpDateArr[1];
            this._beginValue = this.transform(beginStr);
            this._endValue = this.transform(endStr);
            this.value = this._beginValue && this._endValue ? this._beginValue + this.dateRangeDatesDelimiter + this._endValue : '';
        }
        else {
            this.value = this.transform(value);
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.getValueByType = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (val instanceof Date) {
            this.returnType = 'Date';
            // return this.dateTo(val);
            return val;
        }
        else if (val && val instanceof Object) {
            var begin = val.begin, end = val.end;
            /** @type {?} */
            var beginStr = begin instanceof Date ? this.dateTo(begin) : '';
            /** @type {?} */
            var endStr = begin instanceof Date ? this.dateTo(end) : '';
            this.returnType = 'Object';
            return beginStr && endStr ? beginStr + this.dateRangeDatesDelimiter + endStr : '';
        }
        else if (val && typeof val === 'string') {
            if (val.indexOf('T') > -1) {
                val = val.replace('T', ' ');
            }
            this.returnType = 'String';
            return val;
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.writeValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        var _this_1 = this;
        if (!this.multiSelect) {
            if (typeof val === 'object' && val && !isDate(val)) {
                this.dynamicValue = val;
                this.dynamicText = this.utilService.formatDynamicValue(val, this.dateOpts.dynamicLocale);
                this.dateOpts.showDynamicView = true;
                this.dateOpts.dynamicValue = this.dynamicValue;
            }
            else {
                // this.dateOpts.showDynamicView = false;
                this._realValue = val;
                if (this.dateRange) {
                    this._realRangeValue = val;
                }
                this.setValue(this.getValueByType(val));
            }
        }
        else {
            if (!val) {
                val = '';
            }
            this.value = val.split(this.separator).map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this_1.transform(n); })).join(this.separator);
            this._realValue = val;
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onPrevFocus = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.beginFocus = true;
        if (this.endFocus == true) {
            this.endFocus = !this.endFocus;
        }
        this.PrevFocus.emit();
    };
    /**
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onNextFocus = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.endFocus = true;
        if (this.beginFocus == true) {
            this.beginFocus = !this.beginFocus;
        }
        this.NextFocus.emit();
    };
    /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._convert2dateString = /**
     * @private
     * @param {?} val
     * @param {?=} realValue
     * @return {?}
     */
    function (val, realValue) {
        if (realValue === void 0) { realValue = false; }
        if (val) {
            /** @type {?} */
            var t_1 = val.replace(/[年,月]/g, '-').replace(/[日,号]/g, ' ').replace(/[时,点,分,分钟]/g, ':').replace('秒', '');
            if (this.showType === ShowType.noDateAndMonth && t_1.indexOf('-') === -1) {
                t_1 += '-';
            }
            // 替换连续的空格字符为单个空格
            /** @type {?} */
            var checkSpaceReg = /(\s)\1{1,}/g;
            if (t_1.match(checkSpaceReg)) {
                t_1.match(checkSpaceReg).forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    if (n[0] === ' ') {
                        t_1 = t_1.replace(n, ' ');
                    }
                }));
            }
            if (realValue) {
                /** @type {?} */
                var objDate = this.utilService.isDateValid(val, this.dateOpts, true);
                if (objDate) {
                    var year = objDate.year, month = objDate.month, day = objDate.day, hour = objDate.hour, minute = objDate.minute, second = objDate.second;
                    if (!year) {
                        year = new Date().getFullYear();
                    }
                    if (!month) {
                        month = new Date().getMonth();
                    }
                    if (!day) {
                        day = 1;
                    }
                    if (!hour) {
                        hour = 0;
                    }
                    if (!minute) {
                        minute = 0;
                    }
                    if (!second) {
                        second = 0;
                    }
                    /** @type {?} */
                    var _datePart = year + "-" + this.utilService.padStartZero(month) + "-" + this.utilService.padStartZero(day);
                    /** @type {?} */
                    var _timePart = this.utilService.padStartZero(hour) + ":" + this.utilService.padStartZero(minute) + ":" + this.utilService.padStartZero(second);
                    return _datePart + " " + _timePart;
                }
            }
            if (t_1[t_1.length - 1] === '-') {
                // t = t.substr(0, t.length - 1);
                t_1 += '01';
            }
            if (t_1[t_1.length - 1] === ':') {
                t_1 = t_1.substr(0, t_1.length - 1);
            }
            return t_1.replace(/^\s+|\s+$/g, '');
        }
        return val;
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._isValid = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        value = this._convert2dateString(value);
        if (value) {
            if (this.dateFormat.indexOf('yyyy') === -1 || this.dateFormat.indexOf('dd') === -1) {
                /** @type {?} */
                var _tmpDate = parse(this.value, this.dateFormat, new Date());
                if (this._realValue) {
                    if (this.returnType === 'Date') {
                        return isValid(this._realValue);
                    }
                    else {
                        return isValid(new Date(this._convert2dateString(this._realValue, true)));
                        // return isValid(parse(this._realValue, this.returnFormat, new Date()));
                    }
                }
                /** @type {?} */
                var d = this.utilService.isDateValid(value, this.dateOpts);
                if (d) {
                    if (d.year || d.month) {
                        /** @type {?} */
                        var cdate = new Date();
                        /** @type {?} */
                        var year = cdate.getFullYear();
                        /** @type {?} */
                        var str = (this.dateOpts.returnFormat || 'yyyy-MM-dd')
                            .replace('yyyy', '' + (d.year || year)).replace('MM', '' + d.month).replace('dd', '1');
                        return isValid(new Date(str));
                    }
                    return false;
                }
                return isValid(value);
            }
            else {
                /** @type {?} */
                var reg = /^\d{1,}$/;
                if (reg.test(value) && this.dateFormat.indexOf('yyyyMMdd') > -1) { // 验证传入的格式为 yyyyMMddHHmmss
                    // 验证传入的格式为 yyyyMMddHHmmss
                    /** @type {?} */
                    var _r = this._isValid2(value);
                    if (_r.isValided) {
                        this._realValue = this.getRealReturnFormatted(_r.date);
                        this.value = this.transform(_r.date);
                    }
                    return _r.isValided;
                }
                else {
                    /** @type {?} */
                    var _tmpDate = parse(value, this.dateFormat, new Date());
                    /** @type {?} */
                    var d = this.utilService.isDateValid(this.value, this.dateOpts);
                    return isValid(_tmpDate) || this.utilService.isInitializedDate(d);
                }
            }
        }
        return false;
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    FarrisDatepickerComponent.prototype._isValid2 = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var year = 0;
        /** @type {?} */
        var month = 0;
        /** @type {?} */
        var day = 0;
        /** @type {?} */
        var hour = 0;
        /** @type {?} */
        var minute = 0;
        /** @type {?} */
        var seconds = 0;
        /** @type {?} */
        var df = this.dateFormat;
        if (df.includes('yyyy')) {
            if (value) {
                year = +value.slice(0, 4);
                value = value.slice(4);
            }
            else {
                return false;
            }
        }
        if (df.includes('MM')) {
            if (value) {
                month = +value.slice(0, 2) - 1;
                value = value.slice(2);
                if (month < 0) {
                    month = 0;
                }
            }
            else {
                return false;
            }
        }
        if (df.includes('dd')) {
            if (value) {
                day = +value.slice(0, 2);
                value = value.slice(2);
            }
            else {
                return false;
            }
        }
        if (df.includes('HH')) {
            if (value) {
                hour = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('mm')) {
            if (value) {
                minute = +value.slice(0, 2);
                value = value.slice(2);
            }
        }
        if (df.includes('ss')) {
            if (value) {
                seconds = +value.slice(0, 2);
            }
        }
        /** @type {?} */
        var d = new Date(year, month, day, hour, minute, seconds);
        return {
            isValided: isValid(d),
            date: d
        };
    };
    /**
     * @private
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.multiSelectedChanged = /**
     * @private
     * @return {?}
     */
    function () {
        this.onModelChange(this._realValue);
        /** @type {?} */
        var p = {
            formatted: this.value,
            returnFormatted: this._realValue,
            cmpRef: this
        };
        this.onModelTouched();
        this.closeSelector(CalToggle.CloseByDateSel);
        this.valueChange.emit(p);
        if (!this.value) {
            this.clear.emit();
        }
    };
    /**
     * @param {?} d
     * @return {?}
     */
    FarrisDatepickerComponent.prototype.onRemoveDate = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        if (!d) {
            return;
        }
        var value = d.value, index = d.index;
        this.value = this.value.split(this.separator).filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n !== value; })).join(this.separator);
        this._realValue = this._realValue.split(this.separator).filter((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) { return i !== index; })).join(this.separator);
        this.multiSelectedChanged();
        this.cdr.detectChanges();
    };
    FarrisDatepickerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-datepicker',
                    exportAs: 'farris-datepicker',
                    template: "<div class=\"input-group\" [ngClass]=\"{\r\n        'f-state-disabled': disabled,\r\n        'f-state-readonly': readonly && !disabled,\r\n        'f-state-editable': editable && !disabled && !readonly,\r\n        'f-state-focus':totalFocus\r\n    }\" *ngIf=\"!(dateOpts?.showDynamicView && enableDynamic) && !multiSelect\" >\r\n    <ng-container *ngIf=\"!dateOpts.dateRange; else range\">\r\n        <input type=\"text\" class=\"form-control f-utils-fill\" [attr.placeholder]=\"readonly||disabled?'':placeholder\" name=\"farris-date\" [ngModel]=\"value\"\r\n            (ngModelChange)=\"onSingleInputNgModelChange($event)\" #dateInput autocomplete=\"off\" [readonly]=\"readonly || !editable\"\r\n            [disabled]=\"disabled\" (dateChanged)=\"onDateChanged($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" (click)=\"onInputClick($event)\" style=\"padding-right: 4px;\" farrisPopover\r\n            [popover]=\"value\" [triggers]=\"'hover'\" [popActive]=\"isActiveTip\" [showAction]=\"'show2'\"\r\n            [container]=\"'body'\" (keydown.tab)=\"closeSelector(3)\" />\r\n\r\n    </ng-container>\r\n    <ng-template #range>\r\n        <div class=\"form-control date-range-wrapper\" (click)=\"onInputClick($event)\" (blur)=\"onBlur($event)\"\r\n            (focus)=\"onFocus($event)\" [title]=\"readonly || !editable|| disabled ?value:''\">\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-begin\" [class.f-state-focus]=\"totalFocus&&beginFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':beginPlaceholder\"\r\n                    [(ngModel)]=\"_beginValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\"\r\n                    autocomplete=\"off\" (blur)=\"onDateRangeInputBlur('begin')\" (focus)=\"onPrevFocus($event)\"/>\r\n            </span>\r\n            <span class=\"f-icon f-icon-orientation-arrow sub-input-spliter\"></span>\r\n            <span class=\"sub-input-wrapper sub-input-wrapper-end\" [class.f-state-focus]=\"totalFocus&&endFocus\">\r\n                <input class=\"sub-input form-control\" type=\"text\" [attr.placeholder]=\"readonly||disabled?'':endPlaceholder\"\r\n                    [(ngModel)]=\"_endValue\" [readonly]=\"readonly || !editable\" [disabled]=\"disabled\" autocomplete=\"off\"\r\n                    (blur)=\"onDateRangeInputBlur('end')\" (focus)=\"onNextFocus($event)\" />\r\n            </span>\r\n        </div>\r\n    </ng-template>\r\n    <div class=\"input-group-append f-cmp-iconbtn-wrapper\" *ngIf=\"!readonly && !disabled\" style=\"position: relative;\">\r\n        <span class=\"input-group-text input-group-clear datepicker-clear\" (click)=\"clearDate($event)\"\r\n            style=\"visibility: hidden\" #clearIcon  *ngIf=\"showClear\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <button type=\"button\" class=\"btn f-cmp-iconbtn\" (click)=\"onInputClick($event)\" style=\"z-index:0\">\r\n            <span class=\"f-icon f-icon-date\"></span>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<dynamic-date-input *ngIf=\"dateOpts?.showDynamicView && enableDynamic && !multiSelect\" [showClear]=\"showClear\"\r\n    [value]=\"dynamicValue\" [text]=\"dynamicText\" [readonly]=\"readonly\" [disabled]=\"disabled\" [isFocus]=\"totalFocus\" [placeholder]=\"placeholder\"\r\n    (inputClick)=\"onInputClick($event)\" (clear)=\"clearDynamicDate($event)\" (tabKeydown)=\"closeSelector(3)\"></dynamic-date-input>\r\n\r\n\r\n<multi-select-input  *ngIf=\"multiSelect\" [separator]=\"separator\" [dates]=\"value\" [placeholder]=\"readonly||disabled?'':placeholder\"\r\n[editable]=\"!readonly&&!disabled\"  [orderBy]=\"selectedOrderBy\"\r\n (clickHandle)=\"onInputClick($event)\" (remove)=\"onRemoveDate($event)\"></multi-select-input>\r\n <input type=\"hidden\" [(ngModel)]=\"_realValue\"  *ngIf=\"multiSelect\">\r\n\r\n\r\n<ng-container #calendar>\r\n    <ng-container></ng-container>\r\n</ng-container>\r\n",
                    providers: [FARRIS_DP_VALUE_ACCESSOR, UtilService, DefaultConfigService, LocaleService],
                    styles: ["\n            :host {\n                display: block;\n            }\n\n            :host .datepicker-clear {\n                position: absolute;\n                height: 100%;\n                right: 0;\n                top: 0;\n                z-index: 100;\n            }\n        "]
                }] }
    ];
    /** @nocollapse */
    FarrisDatepickerComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: UtilService },
        { type: DefaultConfigService },
        { type: Injector }
    ]; };
    FarrisDatepickerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class',] }],
        viewType: [{ type: Input }],
        disabled: [{ type: Input }],
        readonly: [{ type: Input }],
        editable: [{ type: Input }],
        dateRange: [{ type: Input }],
        showTime: [{ type: Input }],
        hourStep: [{ type: Input }],
        minuteStep: [{ type: Input }],
        secondStep: [{ type: Input }],
        showType: [{ type: Input }],
        locale: [{ type: Input }],
        dateFormat: [{ type: Input }],
        useDefault: [{ type: Input }],
        returnType: [{ type: Input }],
        returnFormat: [{ type: Input }],
        placeholder: [{ type: Input }],
        beginPlaceholder: [{ type: Input }],
        endPlaceholder: [{ type: Input }],
        whenValueChangedThenCloseSelectorPanel: [{ type: Input }],
        minDate: [{ type: Input }],
        maxDate: [{ type: Input }],
        highlightDates: [{ type: Input }],
        disableDateRangesBegin: [{ type: Input }],
        disableDateRangesEnd: [{ type: Input }],
        disableDates: [{ type: Input }],
        disableWeekdays: [{ type: Input }],
        markDates: [{ type: Input }],
        markDatesColor: [{ type: Input }],
        showWeekNumbers: [{ type: Input }],
        isMarkWeekends: [{ type: Input }],
        markWeekendsColor: [{ type: Input }],
        dateRangeDatesDelimiter: [{ type: Input }],
        shortcuts: [{ type: Input }],
        monthRangeValue: [{ type: Input }],
        beginValue: [{ type: Input }],
        endValue: [{ type: Input }],
        enableDynamic: [{ type: Input }],
        previousMaxDays: [{ type: Input }],
        futureMaxDays: [{ type: Input }],
        showClear: [{ type: Input }],
        showPresent: [{ type: Input }],
        firstDayOfWeek: [{ type: Input }],
        clear: [{ type: Output }],
        valueChange: [{ type: Output }],
        focus: [{ type: Output }],
        blur: [{ type: Output }],
        beginValueChange: [{ type: Output }],
        endValueChange: [{ type: Output }],
        PrevFocus: [{ type: Output }],
        NextFocus: [{ type: Output }],
        close: [{ type: Output }],
        multiSelect: [{ type: Input }],
        separator: [{ type: Input }],
        maxSelected: [{ type: Input }],
        selectedOrderBy: [{ type: Input }],
        dp: [{ type: ViewChild, args: [FarrisDatePickerDirective,] }],
        clearIcon: [{ type: ViewChild, args: ['clearIcon',] }],
        calendarRef: [{ type: ViewChild, args: ['calendar', { read: ViewContainerRef },] }],
        PFocus: [{ type: ViewChild, args: ['onPrevFocus',] }],
        NFocus: [{ type: ViewChild, args: ['onNextFocus',] }],
        dateInput: [{ type: ViewChild, args: ['dateInput',] }],
        dynamicValue: [{ type: Input }],
        dynamicValueChange: [{ type: Output }],
        dynamicViewChanged: [{ type: Output }],
        onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
        onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
    };
    return FarrisDatepickerComponent;
}());
export { FarrisDatepickerComponent };
if (false) {
    /** @type {?} */
    FarrisDatepickerComponent.prototype.cls;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.viewType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disabled;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.readonly;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.editable;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.hourStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.minuteStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.secondStep;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.locale;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.useDefault;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnType;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.returnFormat;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.placeholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginPlaceholder;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endPlaceholder;
    /**
     * 输入值变化后关闭选择面板。 默认为 true
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.whenValueChangedThenCloseSelectorPanel;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.highlightDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesBegin;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDateRangesEnd;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.disableWeekdays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDates;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markDatesColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showWeekNumbers;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isMarkWeekends;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.markWeekendsColor;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateRangeDatesDelimiter;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.shortcuts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.monthRangeValue;
    /**
     * 启用动态日期值设置，默认 false
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.enableDynamic;
    /**
     * 允许设置过去最大天数
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.previousMaxDays;
    /**
     * 允许设置未来最大天数
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.futureMaxDays;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.showClear;
    /**
     * 显示今天，本年，本月 按钮
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.showPresent;
    /**
     * 每周起始日  可选值 mo：周一  su: 周日，默认为 mo周一
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.firstDayOfWeek;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clear;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.valueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.focus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.blur;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PrevFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NextFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.close;
    /**
     * 启用多选，默认 false
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.multiSelect;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.separator;
    /**
     * 允许选择日期的个数； 0 无限
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.maxSelected;
    /**
     * 选中日期的排序方式，默认为 'none' 即不排序
     * @type {?}
     */
    FarrisDatepickerComponent.prototype.selectedOrderBy;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dp;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.clearIcon;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.calendarRef;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.PFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.NFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateInput;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timeFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._value;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._beginValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._endValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._initFinished;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._timer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._dateFormat;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._minDate;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._maxDate;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.selectedWeek;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.defaultConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localDateOpts;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeConfig;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.localeService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.beginFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.endFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.totalFocus;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.originTime;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.isActiveTip;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.vcRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.datePicekrService;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._realValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._realRangeValue;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.notifySer;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.formatedValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dtService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._applicationRef;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._ngControl;
    /** @type {?} */
    FarrisDatepickerComponent.prototype._updateOn;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._valueChangeEmitted;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._mousedownEvent;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.closeCalendarHandler;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.cdr;
    /**
     * 缓存通过点击日历的数据，用于的格式化格式不标准时，格式化数据。
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype._SELECT_DATE_;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicText;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicValue;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicValueChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.dynamicViewChanged;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelChange;
    /** @type {?} */
    FarrisDatepickerComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.commonUtils;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.utilService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.defaultConfigService;
    /**
     * @type {?}
     * @private
     */
    FarrisDatepickerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLWRhdGVwaWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRlcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2ZhcnJpcy1kYXRlcGlja2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUMvRCxPQUFPLEVBQ0gsU0FBUyxFQUFVLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQ3JFLFVBQVUsRUFBRSxZQUFZLEVBQWEsV0FBVyxFQUFFLFFBQVEsRUFBZ0IsZ0JBQWdCLEVBQUUsd0JBQXdCLEVBQ3BILFNBQVMsRUFBNEIsY0FBYyxFQUFFLGlCQUFpQixFQUN6RSxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsaUJBQWlCLEVBQXdCLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3BGLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBTXRFLE9BQU8sRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXRFLE9BQU8sRUFBRSxXQUFXLEVBQUUsb0JBQW9CLEVBQUUsdUJBQXVCLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN0SCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQzdFLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sdUJB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QW9COztJQUNwQixnREFBd0I7O0lBQ3hCLDhDQUFzQjs7Ozs7SUFDdEIsa0RBQThCOzs7OztJQUM5QiwyQ0FBb0I7Ozs7O0lBQ3BCLGdEQUE0Qjs7Ozs7SUFDNUIsNkNBT0U7Ozs7O0lBQ0YsNkNBT0U7O0lBT0YsaURBQW9COztJQUNwQiw2Q0FBMEI7O0lBQzFCLGtEQUEwQjs7SUFDMUIsa0RBQTBCOztJQUMxQixpREFBc0M7O0lBQ3RDLGtEQUE2Qjs7SUFFN0IsK0NBQW1COztJQUVuQiw2Q0FBaUI7O0lBRWpCLCtDQUFtQjs7SUFFbkIsK0NBQWdCOztJQUVoQixnREFBb0I7Ozs7O0lBQ3BCLDBDQUFnQzs7Ozs7SUFDaEMsd0NBQXNDOzs7OztJQUN0Qyw2Q0FBNEI7Ozs7O0lBQzVCLHNEQUE2Qzs7SUFDN0MsK0NBQWtCOzs7OztJQUNsQixvREFBK0I7Ozs7O0lBQy9CLDhDQUFpQzs7Ozs7SUFDakMsa0RBQTJCOztJQUMzQiw4Q0FBd0M7Ozs7O0lBQ3hDLG9EQUF3Qzs7Ozs7SUFFeEMsK0NBQThCOztJQUM5Qiw4Q0FBcUI7Ozs7O0lBSXJCLHdEQUFvQzs7Ozs7SUFDcEMsb0RBQStCOzs7OztJQUMvQix5REFBb0M7Ozs7O0lBQ3BDLHdDQUFzQzs7Ozs7O0lBRXRDLGtEQUE2Qjs7SUFFN0IsZ0RBQWlCOztJQUNqQixpREFBMEM7O0lBQzFDLHVEQUFrRDs7SUFDbEQsdURBQWtEOztJQUVsRCxrREFBa0M7O0lBQ2xDLG1EQUEyQjs7Ozs7SUFFM0IsZ0RBQWlDOzs7OztJQUVqQyxtREFBNkM7Ozs7O0lBRXpDLHVDQUFzQjs7Ozs7SUFDdEIsZ0RBQWdDOzs7OztJQUNoQyx5REFBa0Q7Ozs7O0lBQ2xELDZDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IERhdGVUaW1lSGVscGVyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL2RhdGUnO1xyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkLCBmb3J3YXJkUmVmLCBTaW1wbGVDaGFuZ2VzLFxyXG4gICAgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBPbkNoYW5nZXMsIEhvc3RCaW5kaW5nLCBJbmplY3RvciwgQ29tcG9uZW50UmVmLCBWaWV3Q29udGFpbmVyUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBSZW5kZXJlcjIsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQXBwbGljYXRpb25SZWYsIENoYW5nZURldGVjdG9yUmVmXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SLCBDb250cm9sVmFsdWVBY2Nlc3NvciwgTmdDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlIH0gZnJvbSAnLi9mYXJyaXMtZGF0ZXBpY2tlci5pbnB1dCc7XHJcbmltcG9ydCB7XHJcbiAgICBJTXlPcHRpb25zLCBJTXlEYXRlLCBJTXlEYXRlTW9kZWwsIElNeVNob3J0Y3V0cywgSU15RGF0ZUZvcm1hdCxcclxuICAgIElNeUNhbGVuZGFyVmlld0NoYW5nZWQsIElNeVJhbmdlRGF0ZVNlbGVjdGlvblxyXG59IGZyb20gJy4vaW50ZXJmYWNlcy9wdWJsaWMtYXBpJztcclxuXHJcbmltcG9ydCB7IERlZmF1bHRWaWV3LCBTaG93VHlwZSwgQ2FsVG9nZ2xlIH0gZnJvbSAnLi9lbnVtcy9wdWJsaWMtYXBpJztcclxuXHJcbmltcG9ydCB7IFV0aWxTZXJ2aWNlLCBEZWZhdWx0Q29uZmlnU2VydmljZSwgRGF0ZXBpY2tlckxvY2FsZVNlcnZpY2UsIERhdGVQaWNrZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9wdWJsaWMtYXBpJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgZGlmZmVyZW5jZUluU2Vjb25kcywgaXNEYXRlLCBpc1ZhbGlkLCBwYXJzZSB9IGZyb20gJ2RhdGUtZm5zJztcclxuaW1wb3J0IHsgQ2FsZW5kYXJDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ0xJQ0ssIEVNUFRZX1NUUiB9IGZyb20gJy4vY29uc3RhbnRzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IENvbW1vblV0aWxzLCBPdmVyTGF5SGlkZGVuU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgTXVsdGlTZWxlY3RlZE9yZGVyQnksIFZpZXdUeXBlIH0gZnJvbSAnLi9pbnRlcmZhY2VzL215LW9wdGlvbnMuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgRHluYW1pY0RhdGEgfSBmcm9tICcuL2ludGVyZmFjZXMvZHluYW1pYy1kYXRhLXR5cGUuaW50ZXJmYWNlJztcclxuXHJcbmNvbnN0IEZBUlJJU19EUF9WQUxVRV9BQ0NFU1NPUiA9IHtcclxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRmFycmlzRGF0ZXBpY2tlckNvbXBvbmVudCksXHJcbiAgICBtdWx0aTogdHJ1ZVxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1kYXRlcGlja2VyJyxcclxuICAgIGV4cG9ydEFzOiAnZmFycmlzLWRhdGVwaWNrZXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2ZhcnJpcy1kYXRlcGlja2VyLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIDpob3N0IC5kYXRlcGlja2VyLWNsZWFyIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICAgICAgei1pbmRleDogMTAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYFxyXG4gICAgXSxcclxuICAgIHByb3ZpZGVyczogW0ZBUlJJU19EUF9WQUxVRV9BQ0NFU1NPUiwgVXRpbFNlcnZpY2UsIERlZmF1bHRDb25maWdTZXJ2aWNlLCBMb2NhbGVTZXJ2aWNlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzRGF0ZXBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgY2xzID0gJ2YtY21wLWRhdGVwaWNrZXIgZi1jbXAtaW5wdXRncm91cCc7XHJcblxyXG4gICAgQElucHV0KCkgdmlld1R5cGU6IFZpZXdUeXBlID0gVmlld1R5cGUuU3dpdGNoO1xyXG5cclxuICAgIC8vIOaYr+WQpuemgeeUqOivpee7hOS7tlxyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuWPquivu1xyXG4gICAgQElucHV0KCkgcmVhZG9ubHkgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuWPquiDvemAieaLqeaVsOaNru+8jOS4jeWPr+mUruWFpVxyXG4gICAgQElucHV0KCkgZWRpdGFibGUgPSB0cnVlO1xyXG4gICAgLy8g5piv5ZCm5L2/55So5pel5pyf6IyD5Zu06L6T5YWl5qih5byPXHJcbiAgICBASW5wdXQoKSBkYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuS9v+eUqOaXtumXtOi+k+WFpeahhlxyXG4gICAgQElucHV0KCkgc2hvd1RpbWUgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBob3VyU3RlcCA9IDE7XHJcbiAgICBASW5wdXQoKSBtaW51dGVTdGVwID0gMTtcclxuICAgIEBJbnB1dCgpIHNlY29uZFN0ZXAgPSAxO1xyXG5cclxuXHJcbiAgICAvLyDmmL7npLrnsbvlnotcclxuICAgIEBJbnB1dCgpIHNob3dUeXBlOiBTaG93VHlwZSA9IFNob3dUeXBlLmFsbDtcclxuICAgIC8vIOacrOWcsOivreiogFxyXG4gICAgQElucHV0KCkgbG9jYWxlID0gJ3poLWNuJztcclxuICAgIC8vIOaXpeacn+agvOW8j1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBkYXRlRm9ybWF0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gdmFsdWUg5qC85byP5b2i5aaCIHl5eXktTU0tZGQgSEg6bW06c3NcclxuICAgICAgICAgICAgLy8gY29uc3QgZm9ybUFyciA9ICd5eXl5LU1NLWRkIEhIOm1tOnNzJy5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTsgLy8g5Y675o6J5bem5Y+z56m65qC8XHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxzKy9nLCAnICcpOyAvLyDlsIbkuK3pl7TnmoTlpJrkuKrov57nu63nqbrmoLzvvIzmm7/mjaLkuLox5Liq56m65qC8XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1BcnIgPSB2YWx1ZS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRlRm9ybWF0ID0gZm9ybUFyclswXTtcclxuICAgICAgICAgICAgLy8g5aSE55CGJ3l5eXktTU0tZGQgaDptbTpzcyBhJ+WNszEy5bCP5pe25pi+56S655qE5oOF5Ya1XHJcbiAgICAgICAgICAgIGlmIChmb3JtQXJyLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9ICdoOm1tOnNzIGEnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9IGZvcm1BcnJbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoaXMuX2RhdGVGb3JtYXQgPSB0aGlzLl9kYXRlRm9ybWF0ID8gKHRoaXMuX2RhdGVGb3JtYXQgKyAnJykucmVwbGFjZSgvbS9nLCAnTScpIDogJyc7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RhdGVGb3JtYXQpIHtcclxuICAgICAgICAgICAgY29uc3QgbW0gPSBbJ3l5eXktbW0nLCAneXl5eS9tbScsICd5eXl55bm0bW0nLCAnbW0veXl5eSddO1xyXG4gICAgICAgICAgICBjb25zdCBfbW0gPSBtbS5maW5kKG0gPT4gdGhpcy5fZGF0ZUZvcm1hdC5pbmNsdWRlcyhtKSk7XHJcbiAgICAgICAgICAgIGlmIChfbW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGVGb3JtYXQgPSB0aGlzLl9kYXRlRm9ybWF0LnJlcGxhY2UoX21tLCBfbW0ucmVwbGFjZSgvbS9nLCAnTScpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3RpbWVGb3JtYXQgJiYgdGhpcy5zaG93VGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0ZUZvcm1hdCArPSAnICcgKyB0aGlzLl90aW1lRm9ybWF0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3RpbWVGb3JtYXQuaW5kZXhPZign5pe2JykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVGb3JtYXQgPSB0aGlzLl90aW1lRm9ybWF0LnJlcGxhY2UoJ+aXticsICc6JykucmVwbGFjZSgn5YiGJywgJzonKS5yZXBsYWNlKCfnp5InLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA9IHRoaXMuX2RhdGVGb3JtYXQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZGF0ZUZvcm1hdCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlRm9ybWF0O1xyXG4gICAgfVxyXG4gICAgLy8g5piv5ZCm5L2/55So6buY6K6k5YC8XHJcbiAgICBASW5wdXQoKSB1c2VEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSByZXR1cm5UeXBlOiAnT2JqZWN0JyB8ICdEYXRlJyB8ICdTdHJpbmcnID0gJ1N0cmluZyc7XHJcbiAgICBASW5wdXQoKSByZXR1cm5Gb3JtYXQ6IHN0cmluZztcclxuICAgIC8vIHBsYWNlaG9sZGVyXHJcbiAgICBASW5wdXQoKSBwbGFjZWhvbGRlciA9ICcnO1xyXG4gICAgQElucHV0KCkgYmVnaW5QbGFjZWhvbGRlciA9ICcnO1xyXG4gICAgQElucHV0KCkgZW5kUGxhY2Vob2xkZXIgPSAnJztcclxuICAgIC8qKiDovpPlhaXlgLzlj5jljJblkI7lhbPpl63pgInmi6npnaLmnb/jgIIg6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIHdoZW5WYWx1ZUNoYW5nZWRUaGVuQ2xvc2VTZWxlY3RvclBhbmVsID0gdHJ1ZTtcclxuICAgIC8vIOacgOWwj+aXpeacn1xyXG4gICAgLy8g5Yqg5YWl5o6l5pS25pe25YiG56eS5Yqf6IO9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IG1pbkRhdGUodmFsOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCk7XHJcbiAgICAgICAgbGV0IGRhdGU6IERhdGU7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBOdWxsXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gY2FzZSBudWxsOlxyXG4gICAgICAgICAgICAvLyAgICAgZGF0ZSA9IG5ldyBEYXRlKDE4NDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgVW5kZWZpbmVkXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTg0MCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxODQwLCAxLCAxLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNWYWxpZChkYXRlKSkge1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICBjb25zdCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbkRhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG1pbkRhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21pbkRhdGU7XHJcbiAgICB9XHJcbiAgICAvLyDmnIDlpKfml6XmnJ9cclxuICAgIC8vIOWKoOWFpeaOpeaUtuaXtuWIhuenkuWKn+iDvVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBtYXhEYXRlKHZhbDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpO1xyXG4gICAgICAgIGxldCBkYXRlOiBEYXRlO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBOdWxsXSc6XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoMTAwMDAsIDEsIDEsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgbnVsbDpcclxuICAgICAgICAgICAgLy8gICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSgxMDAwMCwgMSwgMSwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVmFsaWQoZGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgY29uc3QgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXhEYXRlID0geyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBtYXhEYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhEYXRlO1xyXG4gICAgfVxyXG4gICAgLy8g6ZyA6KaB6auY5Lqu5pi+56S655qE5pel5pyfXHJcbiAgICBASW5wdXQoKSBoaWdobGlnaHREYXRlczogQXJyYXk8SU15RGF0ZT4gPSBbXTtcclxuICAgIC8vIOemgeeUqOWMuuWfn+eahOaXpeacn+W8gOWni+aXtumXtFxyXG4gICAgQElucHV0KCkgZGlzYWJsZURhdGVSYW5nZXNCZWdpbjogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAwLFxyXG4gICAgICAgIG1vbnRoOiAwLFxyXG4gICAgICAgIGRheTogMFxyXG4gICAgfTtcclxuICAgIC8vIOemgeeUqOWMuuWfn+eahOaXpeacn+e7k+adn+aXtumXtFxyXG4gICAgQElucHV0KCkgZGlzYWJsZURhdGVSYW5nZXNFbmQ6IElNeURhdGUgPSB7XHJcbiAgICAgICAgeWVhcjogMCxcclxuICAgICAgICBtb250aDogMCxcclxuICAgICAgICBkYXk6IDBcclxuICAgIH07XHJcbiAgICAvLyDnpoHnlKjnmoTml6XmnJ9cclxuICAgIEBJbnB1dCgpIGRpc2FibGVEYXRlczogQXJyYXk8SU15RGF0ZT4gPSBbXTtcclxuICAgIC8vIOS4gOWRqOS4reiiq+emgeeUqOeahOaXpeWtkFxyXG4gICAgQElucHV0KCkgZGlzYWJsZVdlZWtkYXlzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICAvLyDooqvmoIforrDnmoTml6XmnJ9cclxuICAgIEBJbnB1dCgpIG1hcmtEYXRlczogQXJyYXk8SU15RGF0ZT4gPSBbXTtcclxuICAgIC8vIOiiq+agh+iusOeahOaXpeacn+eahOaYvuekuuminOiJslxyXG4gICAgQElucHV0KCkgbWFya0RhdGVzQ29sb3IgPSAnIzU5YTFmZic7XHJcbiAgICAvLyDmmK/lkKbmmL7npLrnrKzlh6DlkahcclxuICAgIEBJbnB1dCgpIHNob3dXZWVrTnVtYmVycyA9IGZhbHNlO1xyXG4gICAgLy8g5piv5ZCm5qCH6K6w5ZGo5pyrXHJcbiAgICBASW5wdXQoKSBpc01hcmtXZWVrZW5kcyA9IGZhbHNlO1xyXG4gICAgLy8g6KKr5qCH6K6w5ZGo5pyr55qE5pi+56S66aKc6ImyXHJcbiAgICBASW5wdXQoKSBtYXJrV2Vla2VuZHNDb2xvciA9ICcjNTlhMWZmJztcclxuICAgIC8vIOaXpeacn+iMg+WbtOaooeW8j+S4i2lucHV055qE5pi+56S65YiG5Ymy56ym5ZCIXHJcbiAgICBASW5wdXQoKSBkYXRlUmFuZ2VEYXRlc0RlbGltaXRlciA9ICd+JztcclxuICAgIC8vIOmFjee9ruW3puS+pyBzaWRlYmFyIOW/q+aNt+mUrlxyXG4gICAgQElucHV0KCkgc2hvcnRjdXRzOiBBcnJheTxJTXlTaG9ydGN1dHM+ID0gW107XHJcbiAgICAvLyDml6XmnJ/ojIPlm7TpgInmi6nml7bvvIzpu5jorqTnu5PmnZ/mnIjku73kuLrlvZPliY3mnIjku70gKyBtb250aFJhbmdlVmFsdWVcclxuICAgIEBJbnB1dCgpIG1vbnRoUmFuZ2VWYWx1ZSA9IDE7XHJcbiAgICAvLyDml6XmnJ/ojIPlm7TvvJrlvIDlp4vml6XmnJ9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgYmVnaW5WYWx1ZSh2YWx1ZTogc3RyaW5nIHwgRGF0ZSkge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRhdGVUbyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdEYXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignVCcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgnVCcsICcgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2JlZ2luVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5faW5pdEZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGJlZ2luVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZUZyb20odGhpcy5fYmVnaW5WYWx1ZSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICAvLyDml6XmnJ/ojIPlm7TvvJrnu5PmnZ/ml6XmnJ9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZW5kVmFsdWUodmFsdWU6IHN0cmluZyB8IERhdGUpIHtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlID8gdmFsdWUgOiAnJztcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5kYXRlVG8odmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnRGF0ZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJ1QnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoJ1QnLCAnICcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVHlwZSA9ICdTdHJpbmcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pbml0RmluaXNoZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZW5kVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZUZyb20odGhpcy5fZW5kVmFsdWUsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZCv55So5Yqo5oCB5pel5pyf5YC86K6+572u77yM6buY6K6kIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUR5bmFtaWMgPSBmYWxzZTtcclxuICAgIC8qKiDlhYHorrjorr7nva7ov4fljrvmnIDlpKflpKnmlbAgKi9cclxuICAgIEBJbnB1dCgpIHByZXZpb3VzTWF4RGF5cyA9IDMwO1xyXG4gICAgLyoqIOWFgeiuuOiuvue9ruacquadpeacgOWkp+WkqeaVsCAqL1xyXG4gICAgQElucHV0KCkgZnV0dXJlTWF4RGF5cyA9IDMwO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dDbGVhciA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65LuK5aSp77yM5pys5bm077yM5pys5pyIIOaMiemSriAqL1xyXG4gICAgQElucHV0KCkgc2hvd1ByZXNlbnQgPSBmYWxzZTtcclxuICAgIC8qKiDmr4/lkajotbflp4vml6UgIOWPr+mAieWAvCBtb++8muWRqOS4gCAgc3U6IOWRqOaXpe+8jOm7mOiupOS4uiBtb+WRqOS4gCAqL1xyXG4gICAgQElucHV0KCkgZmlyc3REYXlPZldlZWs6ICdtbyd8J3N1JyA9ICdtbyc7XHJcblxyXG4gICAgLy8gY2xlYXIg5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgY2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyB2YWx1ZUNoYW5nZWQg5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyBmb2N1cyDkuovku7ZcclxuICAgIEBPdXRwdXQoKSBmb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGJsdXIg5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgYmx1ciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGJlZ2luVmFsdWVDaGFuZ2VcclxuICAgIEBPdXRwdXQoKSBiZWdpblZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gZW5kVmFsdWVDaGFuZ2VcclxuICAgIEBPdXRwdXQoKSBlbmRWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIFByZXZGb2N1cyBkYXRlUmFuZ2Ug56ys5LiA5Liq5pel5pyfXHJcbiAgICBAT3V0cHV0KCkgUHJldkZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLy8gTmV4dEZvY3VzIGRhdGVSYW5nZSDnrKzkuozkuKrml6XmnJ9cclxuICAgIEBPdXRwdXQoKSBOZXh0Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLy8gY2xvc2Ug5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWkmumAie+8jOm7mOiupCBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHNlcGFyYXRvciA9ICcsJztcclxuICAgIC8qKiDlhYHorrjpgInmi6nml6XmnJ/nmoTkuKrmlbDvvJsgMCDml6DpmZAgKi9cclxuICAgIEBJbnB1dCgpIG1heFNlbGVjdGVkID0gMDtcclxuICAgIC8qKiDpgInkuK3ml6XmnJ/nmoTmjpLluo/mlrnlvI/vvIzpu5jorqTkuLogJ25vbmUnIOWNs+S4jeaOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0ZWRPcmRlckJ5OiBNdWx0aVNlbGVjdGVkT3JkZXJCeSA9ICdub25lJztcclxuXHJcblxyXG4gICAgQFZpZXdDaGlsZChGYXJyaXNEYXRlUGlja2VyRGlyZWN0aXZlKSBkcDogRmFycmlzRGF0ZVBpY2tlckRpcmVjdGl2ZTtcclxuICAgIEBWaWV3Q2hpbGQoJ2NsZWFySWNvbicpIGNsZWFySWNvbjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2NhbGVuZGFyJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGNhbGVuZGFyUmVmOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnb25QcmV2Rm9jdXMnKSBQRm9jdXM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdvbk5leHRGb2N1cycpIE5Gb2N1czogRWxlbWVudFJlZjtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdkYXRlSW5wdXQnKSBkYXRlSW5wdXQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgcHJpdmF0ZSBjUmVmOiBDb21wb25lbnRSZWY8Q2FsZW5kYXJDb21wb25lbnQ+ID0gbnVsbDtcclxuICAgIHByaXZhdGUgX3RpbWVGb3JtYXQgPSAnJztcclxuICAgIHByaXZhdGUgX3ZhbHVlID0gJyc7XHJcbiAgICBwdWJsaWMgX2JlZ2luVmFsdWUgPSAnJztcclxuICAgIHB1YmxpYyBfZW5kVmFsdWUgPSAnJztcclxuICAgIHByaXZhdGUgX2luaXRGaW5pc2hlZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfdGltZXI6IGFueTtcclxuICAgIHByaXZhdGUgX2RhdGVGb3JtYXQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX21pbkRhdGU6IElNeURhdGUgPSB7XHJcbiAgICAgICAgeWVhcjogMTg0MCxcclxuICAgICAgICBtb250aDogMSxcclxuICAgICAgICBkYXk6IDEsXHJcbiAgICAgICAgaG91cjogMCxcclxuICAgICAgICBtaW51dGU6IDAsXHJcbiAgICAgICAgc2Vjb25kOiAwXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBfbWF4RGF0ZTogSU15RGF0ZSA9IHtcclxuICAgICAgICB5ZWFyOiAxMDAwMCxcclxuICAgICAgICBtb250aDogMSxcclxuICAgICAgICBkYXk6IDEsXHJcbiAgICAgICAgaG91cjogMCxcclxuICAgICAgICBtaW51dGU6IDAsXHJcbiAgICAgICAgc2Vjb25kOiAwXHJcbiAgICB9O1xyXG4gICAgc2V0IHZhbHVlKHYpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHYgPyB2IDogJyc7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRXZWVrID0gbnVsbDtcclxuICAgIGRhdGVPcHRzOiBJTXlPcHRpb25zID0ge307XHJcbiAgICBkZWZhdWx0Q29uZmlnOiBJTXlPcHRpb25zO1xyXG4gICAgbG9jYWxEYXRlT3B0czogSU15T3B0aW9ucztcclxuICAgIGxvY2FsZUNvbmZpZzogRGF0ZXBpY2tlckxvY2FsZVNlcnZpY2U7XHJcbiAgICBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgLy8g5byA5aeL6L6T5YWl5o6n5Lu26IGa54SmXHJcbiAgICBiZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAvLyDnu5PmnZ/ovpPlhaXmjqfku7bogZrnhKZcclxuICAgIGVuZEZvY3VzID0gZmFsc2U7XHJcbiAgICAvLyDmlbTkvZPogZrnhKZcclxuICAgIHRvdGFsRm9jdXMgPSBmYWxzZTtcclxuXHJcbiAgICBvcmlnaW5UaW1lOiBhbnk7XHJcbiAgICAvLyDmmK/lkKblrZfnrKbotoXplb/mmL7npLpUaXBcclxuICAgIGlzQWN0aXZlVGlwID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHZjUmVmOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgcHJpdmF0ZSBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcclxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMjtcclxuICAgIHByaXZhdGUgZGF0ZVBpY2VrclNlcnZpY2U6IERhdGVQaWNrZXJTZXJ2aWNlO1xyXG4gICAgX3JlYWxWYWx1ZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9yZWFsUmFuZ2VWYWx1ZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIG5vdGlmeVNlcjogTm90aWZ5U2VydmljZTtcclxuICAgIHByaXZhdGUgZm9ybWF0ZWRWYWx1ZSA9ICcnO1xyXG4gICAgZHRTZXJ2aWNlOiBEYXRlVGltZUhlbHBlclNlcnZpY2UgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBfYXBwbGljYXRpb25SZWY6IEFwcGxpY2F0aW9uUmVmO1xyXG5cclxuICAgIHByaXZhdGUgX25nQ29udHJvbDogTmdDb250cm9sO1xyXG4gICAgX3VwZGF0ZU9uID0gJ2NoYW5nZSc7XHJcblxyXG4gICAgLy8g5pel5pyf6YCJ5oup5ZCO6K6+572u5Li6IHRydWXvvIwgYmx1ciDkuovku7blsIbkuI3kvJrph43lpI3miafooYx2YWx1ZUNoYW5nZWTvvJtcclxuICAgIC8vIOmUruebmOS/ruaUueaXtu+8jGJsdXIg5LqL5Lu25Lit5Lya5omn6KGM5LiA5qyhIHZhbHVlQ2hhbmdlZCDlkI7vvIzlsIbmraTlgLzorr7kuLogZmFsc2U7XHJcbiAgICBwcml2YXRlIF92YWx1ZUNoYW5nZUVtaXR0ZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX21vdXNlZG93bkV2ZW50ID0gbnVsbDtcclxuICAgIHByaXZhdGUgY2xvc2VDYWxlbmRhckhhbmRsZXIgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmID0gbnVsbDtcclxuICAgIC8qKiDnvJPlrZjpgJrov4fngrnlh7vml6XljobnmoTmlbDmja7vvIznlKjkuo7nmoTmoLzlvI/ljJbmoLzlvI/kuI3moIflh4bml7bvvIzmoLzlvI/ljJbmlbDmja7jgIIgKi9cclxuICAgIHByaXZhdGUgX1NFTEVDVF9EQVRFXyA9IG51bGw7XHJcblxyXG4gICAgZHluYW1pY1RleHQgPSAnJztcclxuICAgIEBJbnB1dCgpIGR5bmFtaWNWYWx1ZTogRHluYW1pY0RhdGEgPSBudWxsO1xyXG4gICAgQE91dHB1dCgpIGR5bmFtaWNWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBkeW5hbWljVmlld0NoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgb25Nb2RlbENoYW5nZSA9IChvYmo6IGFueSkgPT4geyB9O1xyXG4gICAgb25Nb2RlbFRvdWNoZWQgPSAoKSA9PiB7IH07XHJcblxyXG4gICAgcHJpdmF0ZSBjb21tb25VdGlsczogQ29tbW9uVXRpbHM7XHJcblxyXG4gICAgcHJpdmF0ZSBvdmVyTGF5U2VydmljZTogT3ZlckxheUhpZGRlblNlcnZpY2U7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgdXRpbFNlcnZpY2U6IFV0aWxTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdENvbmZpZ1NlcnZpY2U6IERlZmF1bHRDb25maWdTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcgPSB0aGlzLmRlZmF1bHRDb25maWdTZXJ2aWNlLmdldERlZmF1bHRDb25maWcoKTtcclxuICAgICAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgdGhpcy5kdFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChEYXRlVGltZUhlbHBlclNlcnZpY2UpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeVNlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5vdGlmeVNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub3RpZnlTZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VyLmNvbmZpZy5wb3NpdGlvbiA9ICd0b3AtY2VudGVyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvY2FsZUNvbmZpZyA9IG5ldyBEYXRlcGlja2VyTG9jYWxlU2VydmljZSgpO1xyXG4gICAgICAgIHRoaXMudmNSZWYgPSB0aGlzLmluamVjdG9yLmdldChWaWV3Q29udGFpbmVyUmVmLCBudWxsKTtcclxuICAgICAgICB0aGlzLmNmciA9IHRoaXMuaW5qZWN0b3IuZ2V0KENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KFJlbmRlcmVyMiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5fYXBwbGljYXRpb25SZWYgPSB0aGlzLmluamVjdG9yLmdldChBcHBsaWNhdGlvblJlZik7XHJcbiAgICAgICAgdGhpcy5jZHIgPSB0aGlzLmluamVjdG9yLmdldChDaGFuZ2VEZXRlY3RvclJlZik7XHJcblxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBuZXcgT3ZlckxheUhpZGRlblNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb21tb25VdGlscyA9IHRoaXMuaW5qZWN0b3IuZ2V0KENvbW1vblV0aWxzLCBuZXcgQ29tbW9uVXRpbHMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuX25nQ29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFBsYWNlaG9sZGVyKCk7XHJcbiAgICAgICAgdGhpcy5tZXJnZURhdGVPcHRpb25zKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2JlZ2luVmFsdWUgJiYgdGhpcy5fZW5kVmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLl9iZWdpblZhbHVlICsgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArIHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW5pdEZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlID0gbmV3IERhdGVQaWNrZXJTZXJ2aWNlKHRoaXMuZGF0ZU9wdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdFBsYWNlaG9sZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2FsZVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2xvY2FsZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMgPSB0aGlzLmxvY2FsZUNvbmZpZy5nZXRMb2NhbGVPcHRpb25zKHRoaXMubG9jYWxlKTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgID8gdGhpcy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmxvY2FsRGF0ZU9wdHMucGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMubG9jYWxEYXRlT3B0cy5wbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgICAgIDogJ+ivt+mAieaLqeaXpeacnyc7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iZWdpblBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luUGxhY2Vob2xkZXIgPSB0aGlzLmxvY2FsRGF0ZU9wdHMucmFuZ2UuYmVnaW4gfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZFBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbERhdGVPcHRzLnJhbmdlLmVuZCB8fCB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVyZ2VEYXRlT3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmRhdGVPcHRzID0geyAuLi50aGlzLmRlZmF1bHRDb25maWcsIC4uLnRoaXMuYnVpbGRPcHRpb25zKCkgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2RhdGVGb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMuZGF0ZUZvcm1hdCA9IHRoaXMuZGF0ZUZvcm1hdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1RpbWUgJiYgIXRoaXMuX3RpbWVGb3JtYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGltZUZvcm1hdCA9ICdISDptbTpzcyc7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZU9wdHMudGltZUZvcm1hdCA9IHRoaXMuX3RpbWVGb3JtYXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJldHVybkZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSB0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMubG9jYWxlICYmIGNoYW5nZXMubG9jYWxlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMgPSB0aGlzLmxvY2FsZUNvbmZpZy5nZXRMb2NhbGVPcHRpb25zKHRoaXMubG9jYWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXMpIHtcclxuICAgICAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFsnc2hvd1RpbWUnLCAnc2hvd1R5cGUnLCAnZGF0ZVJhbmdlJywgJ21heERhdGUnLCAnbWluRGF0ZScsICdtb250aFJhbmdlVmFsdWUnLCAnbWF4U2VsZWN0ZWQnLCAnc2VwYXJhdG9yJywgJ3NlbGVjdGVkT3JkZXJCeSddO1xyXG5cclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNoYW5nZXMpLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYW5nZXNbZV0uaXNGaXJzdENoYW5nZSgpICYmICh0aGlzLmRhdGVPcHRzW2VdIHx8IGlucHV0cy5pbmNsdWRlcyhlKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzID0geyAuLi4odGhpcy5kYXRlT3B0cyB8fHRoaXMuZGVmYXVsdENvbmZpZyksIC4uLnRoaXMuYnVpbGRPcHRpb25zKCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGNoYW5nZXMucmVhZG9ubHkgJiZcclxuICAgICAgICAgICAgIWNoYW5nZXMucmVhZG9ubHkuY3VycmVudFZhbHVlICYmXHJcbiAgICAgICAgICAgICFjaGFuZ2VzLnJlYWRvbmx5LmZpcnN0Q2hhbmdlICYmXHJcbiAgICAgICAgICAgICF0aGlzLnZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMudXNlRGVmYXVsdFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX25nQ29udHJvbCAmJiB0aGlzLl9uZ0NvbnRyb2wuY29udHJvbCkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVPbiA9IHRoaXMuX25nQ29udHJvbC5jb250cm9sLnVwZGF0ZU9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0VmFsdWUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlLmRlc3RvcnkodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWVudGVyJywgWyckZXZlbnQnXSkgb25Nb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgJiYgdGhpcy5jbGVhckljb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uLm5hdGl2ZUVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMzAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTkwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTcwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlVGlwID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDwgMTIwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBbJyRldmVudCddKSBvbk1vdXNlTGVhdmUoZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQgJiYgdGhpcy5jbGVhckljb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckljb24ubmF0aXZlRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQmx1cihlKSB7XHJcbiAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBfcnVuYmx1ciA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gdGhpcy5faXNWYWxpZCh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9ydW5ibHVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBfcnVuYmx1ciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVNb2RlbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl92YWx1ZUNoYW5nZUVtaXR0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxEYXRlID0gdGhpcy5kYXRlRnJvbSh0aGlzLnRyYW5zZm9ybSh0aGlzLnZhbHVlLCB0aGlzLnJldHVybkZvcm1hdCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5nTW9kZWxDaGFuZ2UodGhpcy52YWx1ZSwgcmVhbERhdGUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdGFibGUgJiYgX3J1bmJsdXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXNbJ2luRGF0YWdyaWQnXSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlTW9kZWwoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlTW9kZWwsIDI1MCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fdmFsdWVDaGFuZ2VFbWl0dGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX21vdXNlZG93bkV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibHVyLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkZvY3VzKGUpIHtcclxuICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJNb3VzZURvd25IYW5kbGUoKTtcclxuICAgICAgICB0aGlzLmZvY3VzLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbklucHV0Q2xpY2soZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck1vdXNlRG93bkhhbmRsZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1vdXNlRG93bkhhbmRsZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX21vdXNlZG93bkV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdXNlZG93bkV2ZW50ID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdtb3VzZWRvd24nLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5kZXhPZignU1ZHQW5pbWF0ZWRTdHJpbmcnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZHluYW1pYy12aWV3LWl0ZW0nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmYtY21wLWRhdGVwaWNrZXInKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5mLWRhdGVwaWNrZXItY29udGFpbmVyJykgfHwgZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ2YtaWNvbi1kYXRlJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZGF0ZUlucHV0Lm5hdGl2ZUVsZW1lbnQsICd1bnNlbGVjdGFibGUnLCAnb24nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGVmYXVsdFZhbHVlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy52YWx1ZSAmJiB0aGlzLnVzZURlZmF1bHQpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgbGV0IG5vd1ZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIG5vd1ZhbHVlID0gdGhpcy5kYXRlVG8obm93KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3dWYWx1ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG8obm93KSArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlVG8obmV3IERhdGUobm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpICsgMSkpKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UudmFsaWRhdGUobm93VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gbm93VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZSh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhckR5bmFtaWNEYXRlKCRldmVudCA9IG51bGwpIHtcclxuICAgICAgICBpZiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0ZU9wdHMuZHluYW1pY1ZhbHVlQ2hhbmdlZChudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckRhdGUoJGV2ZW50OiBNb3VzZUV2ZW50ID0gbnVsbCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQpIHtcclxuICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fU0VMRUNUX0RBVEVfID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlYWxSYW5nZVZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZUNoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgaXNSYW5nZTogdGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBzaW5nbGVEYXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBqc0RhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkOiBFTVBUWV9TVFIsXHJcbiAgICAgICAgICAgICAgICAgICAgZXBvYzogMFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGVSYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luRGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbkpzRGF0ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbkVwb2M6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy51dGlsU2VydmljZS5yZXNldERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBlbmRKc0RhdGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kRXBvYzogMCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQ6IEVNUFRZX1NUUlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5Q2FsQnRuKTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2xlYXJJY29uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySWNvbi5uYXRpdmVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNpbmdsZUlucHV0TmdNb2RlbENoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gJGV2ZW50IHx8ICcnO1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMudmFsdWUgPyB0aGlzLmRhdGVGcm9tKCRldmVudCkgOiAnJztcclxuICAgICAgICB0aGlzLmNsb3NlU2VsZWN0b3IoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgb25OZ01vZGVsQ2hhbmdlKHZhbHVlOiBhbnksIHJlYWxkYXRlID0gbnVsbCwgZW1pdFZhbHVlQ2hhbmdlID0gZmFsc2UpIHtcclxuICAgICAgICAvLyB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlIHx8IHRoaXMuc2hvd1R5cGUgPT0gU2hvd1R5cGUuc2VsZWN0V2Vlaykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG1wQXJyID0gdmFsdWUgPyB2YWx1ZS5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKSA6IFsnJywgJyddO1xyXG4gICAgICAgICAgICBjb25zdCBfYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclswXSwgdGhpcy5yZXR1cm5Gb3JtYXQpO1xyXG4gICAgICAgICAgICBjb25zdCBfZW5kVmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0bXBBcnJbMV0sIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2JlZ2luVmFsdWUgPSB0aGlzLnRyYW5zZm9ybSh0bXBBcnJbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9lbmRWYWx1ZSA9IHRoaXMudHJhbnNmb3JtKHRtcEFyclsxXSk7XHJcblxyXG5cclxuICAgICAgICAgICAgdmFsdWUgPSBfYmVnaW5WYWx1ZSAmJiBfZW5kVmFsdWUgPyBfYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyBfZW5kVmFsdWUgOiAnJztcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFJhbmdlVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWVDaGFuZ2UuZW1pdCh0aGlzLl9iZWdpblZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5lbmRWYWx1ZUNoYW5nZS5lbWl0KHRoaXMuX2VuZFZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuRm9ybWF0dGVkOiB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSxcclxuICAgICAgICAgICAgICAgIGNtcFJlZjogdGhpc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbk1vZGVsQ2hhbmdlKG51bGwsIGVtaXRWYWx1ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFsZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFZhbHVlLCBlbWl0VmFsdWVDaGFuZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVJbnB1dCAmJiB0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmRhdGVJbnB1dC5uYXRpdmVFbGVtZW50LCAndmFsdWUnLCB0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1ZhbGlkKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChyZWFsZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5kYXRlSW5wdXQubmF0aXZlRWxlbWVudCwgJ3ZhbHVlJywgdGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTW9kZWxDaGFuZ2UodGhpcy5fcmVhbFZhbHVlLCBlbWl0VmFsdWVDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vbk1vZGVsQ2hhbmdlKHJlYWxWYWx1ZSwgZW1pdCkge1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHJlYWxWYWx1ZTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UocmVhbFZhbHVlKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICBjb25zdCBwID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZTogdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0aGlzLnZhbHVlLCB0aGlzLmRhdGVPcHRzLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZDogdGhpcy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHJldHVybkZvcm1hdHRlZDogcmVhbFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgY21wUmVmOiB0aGlzXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZUNoYW5nZS5vYnNlcnZlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVuVmFsdWVDaGFuZ2VkVGhlbkNsb3NlU2VsZWN0b3JQYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRSZWFsUmV0dXJuRm9ybWF0dGVkKHJlYWxkYXRlOiBhbnkpIHtcclxuXHJcbiAgICAgICAgaWYgKHJlYWxkYXRlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWxkYXRlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuRm9ybWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKHJlYWxkYXRlLCB0aGlzLnJldHVybkZvcm1hdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhbGRhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlRnJvbSh0aGlzLl9yZWFsVmFsdWUgfHwgdGhpcy52YWx1ZSkgfHwgJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0ZVJhbmdlSW5wdXRCbHVyKGV2ZW50OiBhbnkpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUpO1xyXG4gICAgICAgIHRoaXMub25OZ01vZGVsQ2hhbmdlKHRoaXMuX3JlYWxSYW5nZVZhbHVlIHx8IHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5DYWxlbmRhcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsID0gdGhpcy5fcmVhbFZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlIHx8IHRoaXMuc2hvd1R5cGUgPT0gU2hvd1R5cGUuc2VsZWN0V2Vlaykge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy5fcmVhbFJhbmdlVmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5UeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLnRyYW5zZm9ybSh2YWwsIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY1JlZiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNSZWYgPSB0aGlzLmNhbGVuZGFyUmVmLmNyZWF0ZUNvbXBvbmVudChcclxuICAgICAgICAgICAgICAgIHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KENhbGVuZGFyQ29tcG9uZW50KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5hcHBlbmRTZWxlY3Rvcih0aGlzLmNSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRhdGVQaWNla3JTZXJ2aWNlLnJlZ2lzdGVyU2Nyb2xsRXZlbnQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jUmVmLmluc3RhbmNlLmRhdGVIbHAgPSB0aGlzLmR0U2VydmljZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dUeXBlID09PSA0ICYmIHRoaXMuc2VsZWN0ZWRXZWVrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2Uuc2VsZWN0ZWRXZWVrID0gdGhpcy5zZWxlY3RlZFdlZWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2UubXVsdGlEYXRlc0NoYW5nZWQgPSAoZGF0ZXM6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGRhdGVzLm1hcChuID0+IG4udmFsdWUpLmpvaW4odGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IGRhdGVzLm1hcChuID0+IHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKCBgJHtuLnllYXJ9LSR7bi5tb250aH0tJHtuLmRheX1gICwgdGhpcy5yZXR1cm5Gb3JtYXQpKS5qb2luKHRoaXMuc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpU2VsZWN0ZWRDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jUmVmLmluc3RhbmNlLnNob3dOb3RpZnkgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXNnID0gIHRoaXMubG9jYWxEYXRlT3B0cy5tZXNzYWdlWycxMDInXS5yZXBsYWNlKCckezB9JywgdGhpcy5tYXhTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VyLndhcm5pbmcobXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY1JlZi5pbnN0YW5jZS5pbml0aWFsaXplKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cyxcclxuICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlUGljZWtyU2VydmljZS5nZXRTZWxlY3RvclBvc2l0aW9uKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcy5jUmVmKSxcclxuICAgICAgICAgICAgICAgIHZhbCxcclxuICAgICAgICAgICAgICAgIChkbTogSU15RGF0ZU1vZGVsLCBjbG9zZTogYm9vbGVhbikgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlT3B0cy5kYXRlUmFuZ2UgJiYgdGhpcy5zaG93VGltZSAmJiBkbS5kYXRlUmFuZ2UuZW5kSnNEYXRlIDwgZG0uZGF0ZVJhbmdlLmJlZ2luSnNEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHsgeWVhcjogYmVnaW5ZZWFyLCBtb250aDogYmVnaW5Nb250aCwgIGRheTogYmVnaW5EYXkgIH0gPSB7Li4uZG0uZGF0ZVJhbmdlLmJlZ2luRGF0ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHsgeWVhcjogZW5kWWVhciwgbW9udGg6IGVuZE1vbnRoLCAgZGF5OiBlbmREYXkgIH0gPSB7Li4uZG0uZGF0ZVJhbmdlLmVuZERhdGV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBtZXNzYWdlOiAgVGhlIGVuZCB0aW1lIG11c3Qgbm90IGJlIGVhcmxpZXIgdGhhbiB0aGUgc3RhcnQgdGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBtZXNzYWdlOiAg57WQ5p2f5pmC6ZaT5LiN5b6X5pep5LqO6ZaL5aeL5pmC6ZaTXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IHRoaXMubG9jYWxEYXRlT3B0cy5tZXNzYWdlWycxMDEnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm90aWZ5U2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlci53YXJuaW5nKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdlZWsgPSB0aGlzLmNSZWYuaW5zdGFuY2Uuc2VsZWN0ZWRXZWVrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EYXRlQ2hhbmdlZChkbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeURhdGVTZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoY3ZjOiBJTXlDYWxlbmRhclZpZXdDaGFuZ2VkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0Q2FsZW5kYXJDaGFuZ2VkKGN2Yyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKHJkczogSU15UmFuZ2VEYXRlU2VsZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0UmFuZ2VEYXRlU2VsZWN0aW9uKHJkcyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeUVzYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNSZWYuaW5zdGFuY2UuZHluYW1pY1ZpZXdTaG93LnN1YnNjcmliZSgoZToge3Nob3dEeW5hbWljVmlldzogYm9vbGVhbn0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBPYmplY3QuYXNzaWduKGUsIHtkeW5hbWljVmFsdWU6IHRoaXMuZHluYW1pY1ZhbHVlLCBzaW5nbGVWYWx1ZTogdGhpcy5fcmVhbFZhbHVlLCBpbnN0YW5jZTogdGhpc30pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNWaWV3Q2hhbmdlZC5lbWl0KHQpO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UuYXBwZW5kU2VsZWN0b3IodGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5yZWdpc3Rlck1vdXNlRXZlbnQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0OiBhbnkgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgY29uc3Qgbm90Q2xvc2UgPSAodGhpcy5jUmVmICYmIHRoaXMuY1JlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKHQpKSB8fCBcclxuICAgICAgICAgICAgdC5jbG9zZXN0KCcubXVsdGktZGF0ZS1zZWxlY3QnKSB8fCAodC5jbGFzc05hbWUgJiYgdC5jbGFzc05hbWUuaW5kZXhPZignbXVsdGktZGF0ZS1zZWxlY3QnKSA+IC0xKTtcclxuICAgICAgICAgICAgaWYgKG5vdENsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgfSwgeyBvbmx5VG9wV2luZG93OiB0cnVlfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY1JlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgLy8gdGhpcy5wcmV2ZW50Q2xvc2UgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGNsb3NlU2VsZWN0b3IocmVhc29uPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY1JlZiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyUmVmLnJlbW92ZSh0aGlzLmNhbGVuZGFyUmVmLmluZGV4T2YodGhpcy5jUmVmLmhvc3RWaWV3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuY1JlZiA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtb3ZlcmxheS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5jaGlsZEVsZW1lbnRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG90YWxGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VDYWxlbmRhckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUNhbGVuZGFySGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRhdGVQaWNla3JTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2VrclNlcnZpY2UucmVtb3ZlTW91c2VFdmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0b2dnbGVDYWxlbmRhcihjbG9zZTogYm9vbGVhbiwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRm9jdXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNSZWYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ2FsZW5kYXJIYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsIENMSUNLLCAoKSA9PiB0aGlzLmNsb3NlU2VsZWN0b3IoQ2FsVG9nZ2xlLkNsb3NlQnlPdXRDbGljaykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbkNhbGVuZGFyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLW92ZXJsYXktY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY29udGFpbmVyLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgemluZGV4ID0gdGhpcy5jb21tb25VdGlscy5nZXRGbG9hdGluZ0xheWVySW5kZXgoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjb250YWluZXIsICd6SW5kZXgnLCB6aW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUtb3ZlcmxheS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAmJiB0aGlzLmNSZWYubG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbCA9PT0gdGhpcy5jUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxGb2N1cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5DYWxlbmRhcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbEZvY3VzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpbkZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihDTElDSywgdGhpcy5vbkNsaWNrSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgIGNsb3NlICYmIHRoaXMuY2xvc2VTZWxlY3RvcihDYWxUb2dnbGUuQ2xvc2VCeUNhbEJ0bik7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNvbnRhaW5lciwgJ3BvaW50ZXItZXZlbnRzJywgJycpXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGF0ZUNoYW5nZWQoZXZlbnQ6IElNeURhdGVNb2RlbCkge1xyXG4gICAgICAgIHRoaXMuX1NFTEVDVF9EQVRFXyA9IGV2ZW50O1xyXG4gICAgICAgIGxldCB2YWxDaGFuZ2VQYXJhbXM6IGFueSA9ICcnO1xyXG4gICAgICAgIGlmIChldmVudC5zaW5nbGVEYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBldmVudC5zaW5nbGVEYXRlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRlZFZhbHVlID0gZXZlbnQuc2luZ2xlRGF0ZS5mb3JtYXR0ZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldHVybkZvcm1hdHRlZCA9IHRoaXMuZ2V0UmVhbFJldHVybkZvcm1hdHRlZChldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSk7XHJcbiAgICAgICAgICAgIHZhbENoYW5nZVBhcmFtcyA9IHsgLi4uZXZlbnQuc2luZ2xlRGF0ZSwgZm9ybWF0dGVkOiBldmVudC5zaW5nbGVEYXRlLmZvcm1hdHRlZCwgcmV0dXJuRm9ybWF0dGVkIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH0gPSBldmVudC5zaW5nbGVEYXRlLmRhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAobW9udGggJiYgKHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCd5eXl5JykgPT09IC0xIHx8IHRoaXMuZGF0ZUZvcm1hdC5pbmRleE9mKCdkZCcpID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5kID0gbmV3IERhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgeWVhciB8fCBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGRheSB8fCAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdXIgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBtaW51dGUgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmQgfHwgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSA9IG5kO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgeyB5ZWFyOiBtaW5ZZWFyLCBtb250aDogbWluTW9udGgsIGRheTogbWluRGF5LCBob3VyOiBtaW5Ib3VyLCBtaW51dGU6IG1pbk1pbnV0ZSwgc2Vjb25kOiBtaW5TZWNvbmQgfSA9IHRoaXMubWluRGF0ZTtcclxuICAgICAgICAgICAgbWluTW9udGggPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtaW5Nb250aCk7XHJcbiAgICAgICAgICAgIG1pbkRheSA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1pbkRheSk7XHJcbiAgICAgICAgICAgIG1pbkhvdXIgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtaW5Ib3VyKTtcclxuICAgICAgICAgICAgbWluTWludXRlID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWluTWludXRlKTtcclxuICAgICAgICAgICAgbWluU2Vjb25kID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWluU2Vjb25kKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IE1JTl9EQVRFID0gbmV3IERhdGUoYCR7bWluWWVhcn0tJHttaW5Nb250aH0tJHttaW5EYXl9ICR7bWluSG91cn06JHttaW5NaW51dGV9OiR7bWluU2Vjb25kfWApO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5taW5EYXRlLnllYXIgIT09IDE4NDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlSW5TZWNvbmRzKE1JTl9EQVRFLCBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUgPSBNSU5fREFURTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0oTUlOX0RBVEUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubWF4RGF0ZS55ZWFyICE9PSAxMDAwMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHsgeWVhcjogbWF4WWVhciwgbW9udGg6IG1heE1vbnRoLCBkYXk6IG1heERheSwgaG91cjogbWF4SG91ciwgbWF4dXRlOiBtYXhNaW51dGUsIHNlY29uZDogbWF4U2Vjb25kIH0gPSB0aGlzLm1heERhdGU7XHJcbiAgICAgICAgICAgICAgICBtYXhNb250aCA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1heE1vbnRoKTtcclxuICAgICAgICAgICAgICAgIG1heERheSA9IHRoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKG1heERheSk7XHJcbiAgICAgICAgICAgICAgICBtYXhIb3VyID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWF4SG91cik7XHJcbiAgICAgICAgICAgICAgICBtYXhNaW51dGUgPSB0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtYXhNaW51dGUpO1xyXG4gICAgICAgICAgICAgICAgbWF4U2Vjb25kID0gdGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obWF4U2Vjb25kKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBNQVhfREFURSA9IG5ldyBEYXRlKGAke21heFllYXJ9LSR7bWF4TW9udGh9LSR7bWF4RGF5fSAke21heEhvdXJ9OiR7bWF4TWludXRlfToke21heFNlY29uZH1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnNpbmdsZURhdGUuZGF0ZS55ZWFyID09PSAxODQwIHx8IGRpZmZlcmVuY2VJblNlY29uZHMoTUlOX0RBVEUsIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKSA9PT0gMCB8fCBkaWZmZXJlbmNlSW5TZWNvbmRzKE1BWF9EQVRFLCBldmVudC5zaW5nbGVEYXRlLmpzRGF0ZSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc2luZ2xlRGF0ZS5qc0RhdGUgPSBNQVhfREFURTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0oTUFYX0RBVEUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZShyZXR1cm5Gb3JtYXR0ZWQsIGV2ZW50LnNpbmdsZURhdGUuanNEYXRlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gZXZlbnQuZGF0ZVJhbmdlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRlZFZhbHVlID0gZXZlbnQuZGF0ZVJhbmdlLmZvcm1hdHRlZDtcclxuICAgICAgICAgICAgY29uc3QgcmV0dXJuRm9ybWF0dGVkID0gZXZlbnQuZGF0ZVJhbmdlLnJldHVybkZvcm1hdHRlZDtcclxuICAgICAgICAgICAgLy8gbGV0IHJldHVybkZvcm1hdHRlZCA9IHRoaXMuZGF0ZUZyb20oZXZlbnQuZGF0ZVJhbmdlLnJldHVybkZvcm1hdHRlZCk7XHJcbiAgICAgICAgICAgIHZhbENoYW5nZVBhcmFtcyA9IHsgLi4uZXZlbnQuZGF0ZVJhbmdlLCBmb3JtYXR0ZWQ6IGV2ZW50LmRhdGVSYW5nZS5mb3JtYXR0ZWQsIHJldHVybkZvcm1hdHRlZCB9O1xyXG4gICAgICAgICAgICB0aGlzLm9uTmdNb2RlbENoYW5nZShyZXR1cm5Gb3JtYXR0ZWQsIGV2ZW50LmRhdGVSYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25Nb2RlbFRvdWNoZWQoKTtcclxuICAgICAgICB0aGlzLl92YWx1ZUNoYW5nZUVtaXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWxDaGFuZ2VQYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tNdWx0aVNlbGVjdGVkT3B0aW9uKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tdWx0aVNlbGVjdCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93VGltZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dUeXBlID0gU2hvd1R5cGUuYWxsO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVSYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZUR5bmFtaWMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIOi/lOWbnuagvOW8j+W/hemhu+WMheaLrOW5tOaciOaXpVxyXG4gICAgICAgICAgICBjb25zdCBmbXRMaXN0ID0gWyd5eXl5LU1NLWRkJywgJ3l5eXkvTU0vZGQnLCdNTS9kZC95eXl5JywneXl5eeW5tE1N5pyIZGTml6UnLCd5eXl5TU1kZCddO1xyXG4gICAgICAgICAgICBpZiAoIWZtdExpc3QuZmluZChuID0+IG4gPT09IHRoaXMucmV0dXJuRm9ybWF0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSAneXl5eS1NTS1kZCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZm10TGlzdC5maW5kKG4gPT4gbiA9PT0gdGhpcy5kYXRlRm9ybWF0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkT3B0aW9ucygpIHtcclxuICAgICAgICBsZXQgZGF0ZU9wdHM6IGFueTtcclxuICAgICAgICBpZiAoIXRoaXMubG9jYWxEYXRlT3B0cykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMgPSB0aGlzLmxvY2FsZUNvbmZpZy5nZXRMb2NhbGVPcHRpb25zKHRoaXMubG9jYWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUeXBlID09PSBTaG93VHlwZS5ub0RhdGVBbmRNb250aCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsRGF0ZU9wdHMuZGF0ZUZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICAgICAgdGhpcy5sb2NhbERhdGVPcHRzLnJldHVybkZvcm1hdCA9ICd5eXl5JztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5YW35aSH5ZCv55So5pel5pyf5aSa6YCJ55qE5p2h5Lu2XHJcbiAgICAgICAgdGhpcy5jaGVja011bHRpU2VsZWN0ZWRPcHRpb24oKTtcclxuXHJcbiAgICAgICAgY29uc3QgX3Nob3dUaW1lID0gKE51bWJlcih0aGlzLnNob3dUeXBlKSA9PT0gU2hvd1R5cGUuYWxsKSA/IHRoaXMuc2hvd1RpbWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgZGF0ZU9wdHMgPSB7XHJcbiAgICAgICAgICAgIGRhdGVSYW5nZTogdGhpcy5kYXRlUmFuZ2UsXHJcbiAgICAgICAgICAgIHNob3dUaW1lOiBfc2hvd1RpbWUsXHJcbiAgICAgICAgICAgIHNob3dUeXBlOiBOdW1iZXIodGhpcy5zaG93VHlwZSksXHJcbiAgICAgICAgICAgIGRhdGVGb3JtYXQ6IHRoaXMuZGF0ZUZvcm1hdCA/IHRoaXMuZGF0ZUZvcm1hdCA6IHRoaXMubG9jYWxEYXRlT3B0cy5kYXRlRm9ybWF0LFxyXG4gICAgICAgICAgICByZXR1cm5Gb3JtYXQ6IHRoaXMucmV0dXJuRm9ybWF0ID8gdGhpcy5yZXR1cm5Gb3JtYXQgOiB0aGlzLmxvY2FsRGF0ZU9wdHMucmV0dXJuRm9ybWF0LFxyXG4gICAgICAgICAgICBtaW5ZZWFyOiB0aGlzLl9taW5EYXRlLnllYXIsXHJcbiAgICAgICAgICAgIG1heFllYXI6IHRoaXMuX21heERhdGUueWVhcixcclxuICAgICAgICAgICAgaGlnaGxpZ2h0RGF0ZXM6IHRoaXMuaGlnaGxpZ2h0RGF0ZXMsXHJcbiAgICAgICAgICAgIGRpc2FibGVEYXRlczogdGhpcy5kaXNhYmxlRGF0ZXMsXHJcbiAgICAgICAgICAgIHNob3dXZWVrTnVtYmVyczogdGhpcy5zaG93V2Vla051bWJlcnMsXHJcbiAgICAgICAgICAgIGRpc2FibGVEYXRlUmFuZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IHRoaXMuZGlzYWJsZURhdGVSYW5nZXNCZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuZGlzYWJsZURhdGVSYW5nZXNFbmRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgZGlzYWJsZVVudGlsOiB0aGlzLl9taW5EYXRlLFxyXG4gICAgICAgICAgICBkaXNhYmxlU2luY2U6IHRoaXMuX21heERhdGUsXHJcbiAgICAgICAgICAgIGRpc2FibGVXZWVrZGF5czogdGhpcy5kaXNhYmxlV2Vla2RheXMsXHJcbiAgICAgICAgICAgIG1hcmtEYXRlczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVzOiB0aGlzLm1hcmtEYXRlcyxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5tYXJrRGF0ZXNDb2xvclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBtYXJrV2Vla2VuZHM6IHtcclxuICAgICAgICAgICAgICAgIG1hcmtlZDogdGhpcy5pc01hcmtXZWVrZW5kcyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLm1hcmtXZWVrZW5kc0NvbG9yXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGVSYW5nZURhdGVzRGVsaW1pdGVyOiB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyLFxyXG4gICAgICAgICAgICBzaG9ydGN1dHM6IHRoaXMuc2hvcnRjdXRzLFxyXG4gICAgICAgICAgICB0aW1lRm9ybWF0OiB0aGlzLl90aW1lRm9ybWF0LFxyXG4gICAgICAgICAgICBtb250aFJhbmdlVmFsdWU6IHRoaXMubW9udGhSYW5nZVZhbHVlLFxyXG4gICAgICAgICAgICB2aWV3VHlwZTogdGhpcy52aWV3VHlwZSxcclxuICAgICAgICAgICAgZW5hYmxlRHluYW1pYzogdGhpcy5lbmFibGVEeW5hbWljLFxyXG4gICAgICAgICAgICBkeW5hbWljVmFsdWU6IHRoaXMuZHluYW1pY1ZhbHVlLFxyXG4gICAgICAgICAgICBkeW5hbWljVmFsdWVDaGFuZ2VkOiAoZTogRHluYW1pY0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1ZhbHVlID0gZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY1RleHQgPSBlID8gZS50ZXh0IDogJyc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVPcHRzLmR5bmFtaWNWYWx1ZSA9IGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNWYWx1ZUNoYW5nZS5lbWl0KGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByZXZpb3VzTWF4RGF5czogdGhpcy5wcmV2aW91c01heERheXMsXHJcbiAgICAgICAgICAgIGZ1dHVyZU1heERheXM6IHRoaXMuZnV0dXJlTWF4RGF5cyxcclxuICAgICAgICAgICAgZHluYW1pY0xvY2FsZTogdGhpcy5sb2NhbERhdGVPcHRzLmR5bmFtaWNMb2NhbGUsXHJcbiAgICAgICAgICAgIG11bHN0aURhdGVzTG9jYWxlOiB0aGlzLmxvY2FsRGF0ZU9wdHMubXVsc3RpRGF0ZXNMb2NhbGUsXHJcbiAgICAgICAgICAgIHNob3dQcmVzZW50OiB0aGlzLnNob3dQcmVzZW50LFxyXG4gICAgICAgICAgICBob3VyU3RlcDogdGhpcy5ob3VyU3RlcCxcclxuICAgICAgICAgICAgbWludXRlU3RlcDogdGhpcy5taW51dGVTdGVwLFxyXG4gICAgICAgICAgICBzZWNvbmRTdGVwOiB0aGlzLnNlY29uZFN0ZXAsXHJcbiAgICAgICAgICAgIGNsb3NlU2VsZWN0b3JPbkRhdGVTZWxlY3Q6ICF0aGlzLm11bHRpU2VsZWN0LFxyXG4gICAgICAgICAgICBtdWx0aVNlbGVjdDogdGhpcy5tdWx0aVNlbGVjdCxcclxuICAgICAgICAgICAgc2VwYXJhdG9yOiB0aGlzLnNlcGFyYXRvcixcclxuICAgICAgICAgICAgbWF4U2VsZWN0ZWQ6IHRoaXMubWF4U2VsZWN0ZWQsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkT3JkZXJCeTogdGhpcy5zZWxlY3RlZE9yZGVyQnlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGRhdGVPcHRzLmZpcnN0RGF5T2ZXZWVrID0gdGhpcy5maXJzdERheU9mV2VlaztcclxuICAgICAgICBzd2l0Y2ggKE51bWJlcih0aGlzLnNob3dUeXBlKSkge1xyXG4gICAgICAgICAgICBjYXNlIFNob3dUeXBlLm5vRGF0ZTpcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRlZmF1bHRWaWV3ID0gRGVmYXVsdFZpZXcuTW9udGg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTaG93VHlwZS5ub0RhdGVBbmRNb250aDpcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRlZmF1bHRWaWV3ID0gRGVmYXVsdFZpZXcuWWVhcjtcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPcHRzLmRhdGVGb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRlT3B0cy5yZXR1cm5Gb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGVGb3JtYXQgPSAneXl5eSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTaG93VHlwZS5zZWxlY3RXZWVrOlxyXG4gICAgICAgICAgICAgICAgZGF0ZU9wdHMuc2hvd1dlZWtOdW1iZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRhdGVPcHRzLmRhdGVSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRlT3B0cy5maXJzdERheU9mV2VlayA9ICdtbyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyAuLi50aGlzLmxvY2FsRGF0ZU9wdHMsIC4uLmRhdGVPcHRzIH07XHJcbiAgICB9XHJcblxyXG4gICAgZGF0ZVRvKGQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgPyB0aGlzLmRhdGVPcHRzLmRhdGVGb3JtYXQgOiB0aGlzLmRlZmF1bHRDb25maWcuZGF0ZUZvcm1hdDtcclxuICAgICAgICBjb25zdCBtb250aExhYmVscyA9IHRoaXMuZGF0ZU9wdHMubW9udGhMYWJlbHMgPyB0aGlzLmRhdGVPcHRzLm1vbnRoTGFiZWxzIDogdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzO1xyXG4gICAgICAgIGNvbnN0IHNob3dUaW1lID0gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA/IHRoaXMuZGF0ZU9wdHMuc2hvd1RpbWUgOiB0aGlzLmRlZmF1bHRDb25maWcuc2hvd1RpbWU7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBjb25zdCBtb250aCA9IGQuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgY29uc3QgZGF5ID0gZC5nZXREYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IGQuZ2V0SG91cnMoKTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBkLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBjb25zdCBzZWNvbmQgPSBkLmdldFNlY29uZHMoKTtcclxuICAgICAgICBsZXQgZGF0ZTogSU15RGF0ZTtcclxuICAgICAgICBpZiAoIXNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXkgfTtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5UaW1lID0geyBob3VyLCBtaW51dGUsIHNlY29uZCB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGUgPSB7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUoZGF0ZSwgZGF0ZUZvcm1hdCwgbW9udGhMYWJlbHMpO1xyXG4gICAgfVxyXG4gICAgLy8g6L+U5Zue55yf5a6e5pel5pyfIERhdGUg57G75Z6LXHJcbiAgICBkYXRlRnJvbShzdHI6IGFueSwgaWdub3JSYW5nZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCFzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlUmFuZ2UgPSB0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSA/IHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlIDogdGhpcy5kZWZhdWx0Q29uZmlnLmRhdGVSYW5nZTtcclxuICAgICAgICBjb25zdCBkYXRlRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0ID8gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0IDogdGhpcy5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuRm9ybWF0ID0gdGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQgPyB0aGlzLmRhdGVPcHRzLnJldHVybkZvcm1hdCA6IHRoaXMuZGVmYXVsdENvbmZpZy5yZXR1cm5Gb3JtYXQ7XHJcbiAgICAgICAgY29uc3Qgc2hvd1RpbWUgPSB0aGlzLmRhdGVPcHRzLnNob3dUaW1lID8gdGhpcy5kYXRlT3B0cy5zaG93VGltZSA6IHRoaXMuZGVmYXVsdENvbmZpZy5zaG93VGltZTtcclxuICAgICAgICBjb25zdCBkZWxpbWV0ZXJzOiBBcnJheTxzdHJpbmc+ID0gcmV0dXJuRm9ybWF0Lm1hdGNoKC9bXihEZE1tWXkpXXsxLH0vZyk7XHJcbiAgICAgICAgbGV0IGRhdGVWYWx1ZTogQXJyYXk8SU15RGF0ZUZvcm1hdD47XHJcbiAgICAgICAgY29uc3QgZ2V0VmFsdWUgPSB0aGlzLnV0aWxTZXJ2aWNlLmdldERhdGVWYWx1ZTtcclxuICAgICAgICBpZiAoKGRhdGVSYW5nZSB8fCB0aGlzLmRhdGVPcHRzLnNob3dUeXBlID09PSBTaG93VHlwZS5zZWxlY3RXZWVrKSAmJiAhaWdub3JSYW5nZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0bXBCZWdpbiA9IHN0ci5zcGxpdCh0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyKVswXTtcclxuICAgICAgICAgICAgY29uc3QgdG1wRW5kID0gc3RyLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpWzFdO1xyXG4gICAgICAgICAgICBsZXQgdG1wQmVnaW5EYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0bXBCZWdpbiwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGxldCB0bXBFbmREYXRlID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0bXBFbmQsIHRoaXMuZGF0ZU9wdHMsIHRydWUpO1xyXG4gICAgICAgICAgICB0bXBCZWdpbkRhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzSW5pdGlhbGl6ZWREYXRlKHRtcEJlZ2luRGF0ZSkgPyB0bXBCZWdpbkRhdGUgOiB0aGlzLmRhdGVPcHRzLmRpc2FibGVVbnRpbDtcclxuICAgICAgICAgICAgdG1wRW5kRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNJbml0aWFsaXplZERhdGUodG1wRW5kRGF0ZSkgPyB0bXBFbmREYXRlIDogdGhpcy5kYXRlT3B0cy5kaXNhYmxlU2luY2U7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wQmVnaW5EYXRlLCByZXR1cm5Gb3JtYXQsIHRoaXMuZGVmYXVsdENvbmZpZy5tb250aExhYmVscykgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2VEYXRlc0RlbGltaXRlciArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wRW5kRGF0ZSwgcmV0dXJuRm9ybWF0LCB0aGlzLmRlZmF1bHRDb25maWcubW9udGhMYWJlbHMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyICYmIHN0ciBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnQoc3RyLCBnZXRWYWx1ZSwgdGhpcy5vcmlnaW5UaW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKHN0ciwgdGhpcy5kYXRlT3B0cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlsU2VydmljZS5mb3JtYXREYXRlKHRtcERhdGUsIHJldHVybkZvcm1hdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29udmVydCh2LCBfZ2V0VmFsdWU6IGFueSwgb3JpZ2luVGltZSA9IHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAgfSkge1xyXG4gICAgICAgICAgICBsZXQgZm10ID0gcmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBmbXQgPSAneXl5eS1NTS1kZCcgKyAoc2hvd1RpbWUgPyAnIEhIOm1tOnNzJyA6ICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2hvd1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB2LnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgdGltZSA9IHYuc3BsaXQoJyAnKVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlVmFsdWUgPSBfZ2V0VmFsdWUoZGF0ZSwgZm10LCBkZWxpbWV0ZXJzKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IHRpbWUucmVwbGFjZSgvW+aXtizliIZdL2csICc6JykucmVwbGFjZSgvW+enkl0vLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gsIG0sIHNdID0gdGltZS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvdXIgPSBoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IG07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gcyA/IHMgOiAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVZhbHVlWzNdID0geyB2YWx1ZTogaG91ciwgZm9ybWF0OiAnaGgnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVZhbHVlWzRdID0geyB2YWx1ZTogbWludXRlLCBmb3JtYXQ6ICdtbScgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVWYWx1ZVs1XSA9IHsgdmFsdWU6IHNlY29uZCwgZm9ybWF0OiAnc3MnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHYuc3BsaXQoJyAnKVswXTtcclxuICAgICAgICAgICAgICAgIGRhdGVWYWx1ZSA9IF9nZXRWYWx1ZShkYXRlLCBmbXQsIGRlbGltZXRlcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IHllYXIgPSBOdW1iZXIoZGF0ZVZhbHVlWzBdID8gZGF0ZVZhbHVlWzBdLnZhbHVlIDogMTk3MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHllYXJWYWx1ZSA9IGRhdGVWYWx1ZVswXTtcclxuICAgICAgICAgICAgaWYgKHllYXJWYWx1ZS5mb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGlmICgheWVhclZhbHVlLnZhbHVlIHx8IHllYXJWYWx1ZS52YWx1ZS5sZW5ndGggIT09IHllYXJWYWx1ZS5mb3JtYXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gTnVtYmVyKGRhdGVWYWx1ZVsxXSA/IGRhdGVWYWx1ZVsxXS52YWx1ZSA6IDEpIC0gMTtcclxuICAgICAgICAgICAgY29uc3QgZGF5ID0gTnVtYmVyKGRhdGVWYWx1ZVsyXSA/IGRhdGVWYWx1ZVsyXS52YWx1ZSA6IDEpO1xyXG4gICAgICAgICAgICBjb25zdCBfaG91ciA9IGRhdGVWYWx1ZVszXSA/IE51bWJlcihkYXRlVmFsdWVbM10udmFsdWUpIDogb3JpZ2luVGltZS5ob3VyO1xyXG4gICAgICAgICAgICBjb25zdCBfbWludXRlID0gZGF0ZVZhbHVlWzRdID8gTnVtYmVyKGRhdGVWYWx1ZVs0XS52YWx1ZSkgOiBvcmlnaW5UaW1lLm1pbnV0ZTtcclxuICAgICAgICAgICAgY29uc3QgX3NlY29uZCA9IGRhdGVWYWx1ZVs1XSA/IE51bWJlcihkYXRlVmFsdWVbNV0udmFsdWUpIDogb3JpZ2luVGltZS5zZWNvbmQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXllYXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5LCBfaG91ciwgX21pbnV0ZSwgX3NlY29uZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zZm9ybSh2YWx1ZTogYW55LCBfZm10ID0gdGhpcy5kYXRlT3B0cy5kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlIDogJyc7XHJcbiAgICAgICAgY29uc3QgeyByZXR1cm5Gb3JtYXQsIGRhdGVGb3JtYXQsIHNob3dUaW1lIH0gPSB0aGlzLmRhdGVPcHRzO1xyXG4gICAgICAgIGxldCBfdG1wRGF0ZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgX3RtcERhdGUgPSBwYXJzZSh2YWx1ZSwgcmV0dXJuRm9ybWF0LCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNWYWxpZChfdG1wRGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9TRUxFQ1RfREFURV8gJiYgdGhpcy5fU0VMRUNUX0RBVEVfLnNpbmdsZURhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdG1wRGF0ZSA9IHRoaXMuX1NFTEVDVF9EQVRFXy5zaW5nbGVEYXRlLmpzRGF0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdG1wRGF0ZSA9ICBwYXJzZSh0aGlzLl9yZWFsVmFsdWUsIHJldHVybkZvcm1hdCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgX3RtcERhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZm9ybWF0dGVkVmFsID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKGlzVmFsaWQoX3RtcERhdGUpKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbCA9IHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKF90bXBEYXRlLCBfZm10KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlhbzlrrnlubTmnIjml6Us5bm05pyILOW5tOagvOW8j1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1vlubQs5pyIXS9nLCAnLScpLnJlcGxhY2UoL1vml6VdLywgJycpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT09ICctJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHIoMCwgdmFsdWUubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKG5ldyBEYXRlKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbCA9IHRoaXMuZHRTZXJ2aWNlLmZvcm1hdFRvKHZhbHVlLCBfZm10KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGVGcm9tKHZhbHVlLCB0cnVlKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGUgPSB0aGlzLnV0aWxTZXJ2aWNlLmlzRGF0ZVZhbGlkKFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGF0ZU9wdHMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdDogcmV0dXJuRm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwgPSB0aGlzLnV0aWxTZXJ2aWNlLmZvcm1hdERhdGUodG1wRGF0ZSwgX2ZtdCwgdGhpcy5kZWZhdWx0Q29uZmlnLm1vbnRoTGFiZWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZU9wdHMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZUFyciA9IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5TdHIgPSBfdG1wRGF0ZUFyclswXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZFN0ciA9IF90bXBEYXRlQXJyWzFdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGJlZ2luU3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy50cmFuc2Zvcm0oZW5kU3RyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLl9iZWdpblZhbHVlICYmIHRoaXMuX2VuZFZhbHVlID8gdGhpcy5fYmVnaW5WYWx1ZSArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyB0aGlzLl9lbmRWYWx1ZSA6ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudHJhbnNmb3JtKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVmFsdWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGVPcHRzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICBjb25zdCBfdG1wRGF0ZUFyciA9IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpblN0ciA9IF90bXBEYXRlQXJyWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBlbmRTdHIgPSBfdG1wRGF0ZUFyclsxXTtcclxuICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHRoaXMudHJhbnNmb3JtKGJlZ2luU3RyKTtcclxuICAgICAgICAgICAgdGhpcy5fZW5kVmFsdWUgPSB0aGlzLnRyYW5zZm9ybShlbmRTdHIpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5fYmVnaW5WYWx1ZSAmJiB0aGlzLl9lbmRWYWx1ZSA/IHRoaXMuX2JlZ2luVmFsdWUgKyB0aGlzLmRhdGVSYW5nZURhdGVzRGVsaW1pdGVyICsgdGhpcy5fZW5kVmFsdWUgOiAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy50cmFuc2Zvcm0odmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRWYWx1ZUJ5VHlwZSh2YWwpIHtcclxuICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblR5cGUgPSAnRGF0ZSc7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLmRhdGVUbyh2YWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsICYmIHZhbCBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGJlZ2luLCBlbmQgfSA9IHZhbDtcclxuICAgICAgICAgICAgY29uc3QgYmVnaW5TdHIgPSBiZWdpbiBpbnN0YW5jZW9mIERhdGUgPyB0aGlzLmRhdGVUbyhiZWdpbikgOiAnJztcclxuICAgICAgICAgICAgY29uc3QgZW5kU3RyID0gYmVnaW4gaW5zdGFuY2VvZiBEYXRlID8gdGhpcy5kYXRlVG8oZW5kKSA6ICcnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ09iamVjdCc7XHJcbiAgICAgICAgICAgIHJldHVybiBiZWdpblN0ciAmJiBlbmRTdHIgPyBiZWdpblN0ciArIHRoaXMuZGF0ZVJhbmdlRGF0ZXNEZWxpbWl0ZXIgKyBlbmRTdHIgOiAnJztcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBpZiAodmFsLmluZGV4T2YoJ1QnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWwucmVwbGFjZSgnVCcsICcgJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5UeXBlID0gJ1N0cmluZyc7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgd3JpdGVWYWx1ZSh2YWw6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsICYmICFpc0RhdGUodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5keW5hbWljVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNUZXh0ID0gdGhpcy51dGlsU2VydmljZS5mb3JtYXREeW5hbWljVmFsdWUodmFsLCB0aGlzLmRhdGVPcHRzLmR5bmFtaWNMb2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cy5zaG93RHluYW1pY1ZpZXcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlT3B0cy5keW5hbWljVmFsdWUgPSB0aGlzLmR5bmFtaWNWYWx1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZGF0ZU9wdHMuc2hvd0R5bmFtaWNWaWV3ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWFsUmFuZ2VWYWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWVCeVR5cGUodmFsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbC5zcGxpdCh0aGlzLnNlcGFyYXRvcikubWFwKG4gPT4gdGhpcy50cmFuc2Zvcm0obikpLmpvaW4odGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCA9IGZuO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gICAgfVxyXG4gICAgb25QcmV2Rm9jdXModmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmVuZEZvY3VzID09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRGb2N1cyA9ICF0aGlzLmVuZEZvY3VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlByZXZGb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICBvbk5leHRGb2N1cyh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZW5kRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmJlZ2luRm9jdXMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luRm9jdXMgPSAhdGhpcy5iZWdpbkZvY3VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLk5leHRGb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY29udmVydDJkYXRlU3RyaW5nKHZhbDogc3RyaW5nLCByZWFsVmFsdWUgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgbGV0IHQgPSB2YWwucmVwbGFjZSgvW+W5tCzmnIhdL2csICctJykucmVwbGFjZSgvW+aXpSzlj7ddL2csICcgJykucmVwbGFjZSgvW+aXtizngrks5YiGLOWIhumSn10vZywgJzonKS5yZXBsYWNlKCfnp5InLCAnJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93VHlwZSA9PT0gU2hvd1R5cGUubm9EYXRlQW5kTW9udGggJiYgdC5pbmRleE9mKCctJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0ICs9ICctJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5pu/5o2i6L+e57ut55qE56m65qC85a2X56ym5Li65Y2V5Liq56m65qC8XHJcbiAgICAgICAgICAgIHZhciBjaGVja1NwYWNlUmVnID0gLyhcXHMpXFwxezEsfS9nO1xyXG4gICAgICAgICAgICBpZiAodC5tYXRjaChjaGVja1NwYWNlUmVnKSkge1xyXG4gICAgICAgICAgICAgICAgdC5tYXRjaChjaGVja1NwYWNlUmVnKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuWzBdID09PSAnICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHQucmVwbGFjZShuLCAgJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqRGF0ZSA9IHRoaXMudXRpbFNlcnZpY2UuaXNEYXRlVmFsaWQodmFsLCB0aGlzLmRhdGVPcHRzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmpEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmR9ID0gb2JqRGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXllYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aCA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhvdXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG91ciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pbnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRlUGFydCA9IGAke3llYXJ9LSR7dGhpcy51dGlsU2VydmljZS5wYWRTdGFydFplcm8obW9udGgpfS0ke3RoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKGRheSl9YDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdGltZVBhcnQgPSBgJHt0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhob3VyKX06JHt0aGlzLnV0aWxTZXJ2aWNlLnBhZFN0YXJ0WmVybyhtaW51dGUpfToke3RoaXMudXRpbFNlcnZpY2UucGFkU3RhcnRaZXJvKHNlY29uZCl9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke19kYXRlUGFydH0gJHtfdGltZVBhcnR9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRbdC5sZW5ndGggLSAxXSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0ID0gdC5zdWJzdHIoMCwgdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIHQgKz0gJzAxJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRbdC5sZW5ndGggLSAxXSA9PT0gJzonKSB7XHJcbiAgICAgICAgICAgICAgICB0ID0gdC5zdWJzdHIoMCwgdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHQucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfaXNWYWxpZCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdmFsdWUgPSB0aGlzLl9jb252ZXJ0MmRhdGVTdHJpbmcodmFsdWUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ3l5eXknKSA9PT0gLTEgfHwgdGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ2RkJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdG1wRGF0ZSA9IHBhcnNlKHRoaXMudmFsdWUsIHRoaXMuZGF0ZUZvcm1hdCwgbmV3IERhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVhbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQobmV3IERhdGUodGhpcy5fY29udmVydDJkYXRlU3RyaW5nKHRoaXMuX3JlYWxWYWx1ZSwgdHJ1ZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGlzVmFsaWQocGFyc2UodGhpcy5fcmVhbFZhbHVlLCB0aGlzLnJldHVybkZvcm1hdCwgbmV3IERhdGUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh2YWx1ZSwgdGhpcy5kYXRlT3B0cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkLnllYXIgfHwgZC5tb250aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBjZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHIgPSAodGhpcy5kYXRlT3B0cy5yZXR1cm5Gb3JtYXQgfHwgJ3l5eXktTU0tZGQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3l5eXknLCAnJyArIChkLnllYXIgfHwgeWVhcikpLnJlcGxhY2UoJ01NJywgJycgKyBkLm1vbnRoKS5yZXBsYWNlKCdkZCcsICcxJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKG5ldyBEYXRlKHN0cikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWcgPSAvXlxcZHsxLH0kLztcclxuICAgICAgICAgICAgICAgIGlmIChyZWcudGVzdCh2YWx1ZSkgJiYgdGhpcy5kYXRlRm9ybWF0LmluZGV4T2YoJ3l5eXlNTWRkJykgPiAtMSkgeyAvLyDpqozor4HkvKDlhaXnmoTmoLzlvI/kuLogeXl5eU1NZGRISG1tc3NcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfciA9ICB0aGlzLl9pc1ZhbGlkMih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9yLmlzVmFsaWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB0aGlzLmdldFJlYWxSZXR1cm5Gb3JtYXR0ZWQoX3IuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnRyYW5zZm9ybShfci5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yLmlzVmFsaWRlZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3RtcERhdGUgPSBwYXJzZSh2YWx1ZSwgdGhpcy5kYXRlRm9ybWF0LCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gdGhpcy51dGlsU2VydmljZS5pc0RhdGVWYWxpZCh0aGlzLnZhbHVlLCB0aGlzLmRhdGVPcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZChfdG1wRGF0ZSkgfHwgdGhpcy51dGlsU2VydmljZS5pc0luaXRpYWxpemVkRGF0ZShkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaXNWYWxpZDIodmFsdWU6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgbGV0IHllYXIgPSAwO1xyXG4gICAgICAgIGxldCBtb250aCA9IDA7XHJcbiAgICAgICAgbGV0IGRheSA9IDA7XHJcbiAgICAgICAgbGV0IGhvdXIgPSAwO1xyXG4gICAgICAgIGxldCBtaW51dGUgPSAwO1xyXG4gICAgICAgIGxldCBzZWNvbmRzID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgZGYgPSB0aGlzLmRhdGVGb3JtYXQ7XHJcblxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygneXl5eScpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgeWVhciA9ICt2YWx1ZS5zbGljZSgwLCA0KTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoNCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdNTScpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbW9udGggPSArdmFsdWUuc2xpY2UoMCwgMikgLSAxO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW9udGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZi5pbmNsdWRlcygnZGQnKSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRheSA9ICt2YWx1ZS5zbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdISCcpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaG91ciA9ICt2YWx1ZS5zbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRmLmluY2x1ZGVzKCdtbScpKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWludXRlID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGYuaW5jbHVkZXMoJ3NzJykpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzID0gK3ZhbHVlLnNsaWNlKDAsIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmRzKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpc1ZhbGlkZWQ6IGlzVmFsaWQoZCksXHJcbiAgICAgICAgICAgIGRhdGU6IGRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbXVsdGlTZWxlY3RlZENoYW5nZWQoKSB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgY29uc3QgcCA9IHtcclxuICAgICAgICAgICAgZm9ybWF0dGVkOiB0aGlzLnZhbHVlLFxyXG4gICAgICAgICAgICByZXR1cm5Gb3JtYXR0ZWQ6IHRoaXMuX3JlYWxWYWx1ZSxcclxuICAgICAgICAgICAgY21wUmVmOiB0aGlzXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZVNlbGVjdG9yKENhbFRvZ2dsZS5DbG9zZUJ5RGF0ZVNlbCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHApO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhci5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlRGF0ZShkOiB7dmFsdWU6IHN0cmluZywgaW5kZXg6IG51bWJlcn0pIHtcclxuICAgICAgICBpZiAoIWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7dmFsdWUsIGluZGV4fSA9IGQ7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3BsaXQodGhpcy5zZXBhcmF0b3IpLmZpbHRlcihuID0+IG4hPT0gdmFsdWUpLmpvaW4odGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuX3JlYWxWYWx1ZS5zcGxpdCh0aGlzLnNlcGFyYXRvcikuZmlsdGVyKChuLCBpKSA9PiBpICE9PSBpbmRleCkuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcblxyXG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3RlZENoYW5nZWQoKTtcclxuICAgICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbn1cclxuIl19