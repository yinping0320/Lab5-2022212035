!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core"),require("@angular/common"),require("@farris/ui-draggable"),require("@farris/ui-perfect-scrollbar")):"function"==typeof define&&define.amd?define("@farris/ui-splitter",["exports","rxjs","@angular/core","@angular/common","@farris/ui-draggable","@farris/ui-perfect-scrollbar"],t):t((e.farris=e.farris||{},e.farris["ui-splitter"]={}),e.rxjs,e.ng.core,e.ng.common,e.uiDraggable,e.uiPerfectScrollbar)}(this,function(e,n,i,t,s,r){"use strict";var o=(a.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[]},a.ngInjectableDef=i.defineInjectable({factory:function(){return new a},token:a,providedIn:"root"}),a);function a(){}var l=(Object.defineProperty(h.prototype,"size",{set:function(e){this._size=e,this.sizeChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"order",{set:function(e){this._order=e},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"enableCollapse",{get:function(){return this._enableCollapse},set:function(e){e!==undefined&&null!==e&&(this._enableCollapse=e,this._enableCollapse&&this.initCollapse&&this.toggleInitCollapseState())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"relatedIframeParent",{get:function(){return this._relatedContainer},set:function(e){this._relatedIframeParent=e,this.getRelatedIframeParent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"collapsePosition",{get:function(){return this.pos},set:function(t){this.enableCollapse&&t&&(["left","right","top","bottom"].findIndex(function(e){return e==t})<-1&&(t="right"),this.pos!=t&&(this.el&&this.renderer.removeClass(this.el,"splitter-pane-collapse-on-"+this.pos),this.pos=t,this.el&&this.renderer.addClass(this.el,"splitter-pane-collapse-on-"+t)))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"expandDistance",{get:function(){return this._expandDistance},set:function(e){this._expandDistance=e?this.resolveSize(e+""):""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"collapsed",{get:function(){return this.initCollapse},set:function(e){this.enableCollapse&&e!==undefined&&null!==e&&this.initCollapse!==e&&(this.initCollapse=e,this.toggleInitCollapseState())},enumerable:!0,configurable:!0}),h.prototype.onRZResizing=function(e){if(this.enableCollapse&&e&&e.size){var t=this.getStyleProp(),n="";if(0<=this.resizeDistance&&(n=e.size[t]>this.resizeDistance?"expand":"collapse"),this.resizeDistance=e.size[t],"expand"==n&&this.initCollapse&&(this.initCollapse=!1),e.size[t]>this.resizeCollapseThreshold||!n)return;0<this.resizeCollapseThreshold?this.initCollapse||"collapse"!=n||(e.actions&&e.actions.hasOwnProperty("stopResize")&&e.actions.stopResize(),this.toggleCollapseState(null)):"collapse"==n&&e.size[t]<3&&!this.initCollapse&&(this.initCollapse=!0)}},h.prototype.onRZStart=function(e){this.enableCollapse&&-1<this.el.className.indexOf(this.animateCls)&&this.renderer.removeClass(this.el,this.animateCls),this._relatedIframeOverlay&&!this._iframeOverlayShownFlag&&(["relative","absolute"].indexOf(this._relatedContainerPosition)<0&&this.renderer.setStyle(this._relatedContainer,"position","relative"),this.renderer.setStyle(this._relatedIframeOverlay,"display","block"),this._iframeOverlayShownFlag=!0),!this.updateParamsFlag&&e.actions&&e.actions.hasOwnProperty("updateParams")&&(e.actions.updateParams({fixedEdge:!0}),this.updateParamsFlag=!0)},h.prototype.onRZStop=function(e){this.resizeDistance=-1,this._relatedIframeOverlay&&this._iframeOverlayShownFlag&&(["relative","absolute"].indexOf(this._relatedContainerPosition)<0&&this.renderer.setStyle(this._relatedContainer,"position",this._relatedContainerPosition),this.renderer.setStyle(this._relatedIframeOverlay,"display","none"),this._iframeOverlayShownFlag=!1)},h.prototype.ngOnInit=function(){this.elementRef&&this.compatibleEl()},h.prototype.ngAfterViewInit=function(){this.el||this.compatibleEl()},h.prototype.compatibleEl=function(){this.el=this.elementRef.nativeElement,this._relatedIframeParent&&!this._relatedIframeOverlay&&this.getRelatedIframeParent(this._relatedIframeParent),this.enableCollapse&&this.renderer.addClass(this.el,"splitter-pane-collapse-on-"+this.collapsePosition)},h.prototype.ngOnDestroy=function(){},h.prototype.resolveSize=function(e){var t=/px|%|rem|em/;return t.test(e)?""+parseInt(e,10)+e.match(t)[0]:e+"px"},h.prototype.getRelatedIframeParent=function(e){e&&this.el||(this._relatedContainer=null),e instanceof i.ElementRef?this._relatedContainer=e.nativeElement:this._relatedContainer="string"==typeof e?this.el.parentElement.querySelector(e):e,this._relatedContainer&&(this._relatedContainerPosition=this._relatedContainer.style.position,this._relatedIframeOverlay=this.renderer.createElement("div"),this._relatedIframeOverlay.className="f-utils-absolute-all",this.renderer.setStyle(this._relatedIframeOverlay,"display","none"),this.renderer.appendChild(this._relatedContainer,this._relatedIframeOverlay))},h.prototype.toggleCollapseState=function(e){e&&e.stopPropagation(),this.el&&(this.initCollapse?(this.renderer.addClass(this.el,this.animateCls),this.changeCollapse("expand")):(this.renderer.addClass(this.el,this.animateCls),this.changeCollapse("collapse")),this.initCollapse=!this.initCollapse,this.collapseStateChange.emit(this.initCollapse))},h.prototype.toggleInitCollapseState=function(){this.el&&(this.initCollapse?this.changeCollapse("collapse"):this.changeCollapse("expand"),this.collapseStateChange.emit(this.initCollapse))},h.prototype.changeCollapse=function(e){var t=this.getStyleProp();switch(e){case"expand":this._expandDistance?this.realExpandDisatance=this._expandDistance:this.realExpandDisatance=this._beforeCollapseDistance?this._beforeCollapseDistance+"px":this.defaultExpandDistance,this.renderer.setStyle(this.el,t,this.realExpandDisatance);break;default:this._beforeCollapseDistance="height"==t?this.el.offsetHeight:this.el.offsetWidth,this.renderer.setStyle(this.el,t,"0px")}},h.prototype.getStyleProp=function(){var t=this;return-1<["left","right"].findIndex(function(e){return e==t.collapsePosition})?"width":"height"},h.decorators=[{type:i.Component,args:[{selector:"farris-splitter-pane",template:'\n        <ng-content></ng-content>\n        <div\n            class="f-list-nav-toggle-sidebar"\n            *ngIf="enableCollapse"\n            [ngClass]="{ active: collapsed }"\n            (click)="toggleCollapseState($event)"\n        >\n            <span class="triangle"></span>\n        </div>\n    '}]}],h.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2}]},h.propDecorators={klass:[{type:i.HostBinding,args:["class.f-component-splitter-pane"]}],size:[{type:i.Input}],max:[{type:i.Input}],min:[{type:i.Input}],collapsible:[{type:i.Input}],sizeChange:[{type:i.Output}],enableCollapse:[{type:i.Input}],relatedIframeParent:[{type:i.Input}],resizeCollapseThreshold:[{type:i.Input}],collapsePosition:[{type:i.Input}],expandDistance:[{type:i.Input}],collapsed:[{type:i.Input}],collapseStateChange:[{type:i.Output,args:["collapseStateChange"]}],onRZResizing:[{type:i.HostListener,args:["rzResizing",["$event"]]}],onRZStart:[{type:i.HostListener,args:["rzStart",["$event"]]}],onRZStop:[{type:i.HostListener,args:["rzStop",["$event"]]}]},h);function h(e,t){this.elementRef=e,this.renderer=t,this.klass=!0,this.collapsible=!1,this.sizeChange=new i.EventEmitter,this._beforeCollapseDistance=-1,this._enableCollapse=!1,this._relatedContainer=null,this._relatedContainerPosition="",this._relatedIframeOverlay=null,this._iframeOverlayShownFlag=!1,this.resizeCollapseThreshold=20,this.pos="right",this.defaultExpandDistance="20%",this.realExpandDisatance="",this._expandDistance="",this.initCollapse=!1,this.collapseStateChange=new i.EventEmitter,this.animateCls="splitter-pane-collapse-animate",this.updateParamsFlag=!1,this.resizeDistance=-1,this.elementRef&&(this.el=this.elementRef.nativeElement)}var p=(d.fromEvent=function(e,t){if(void 0===t&&(t=null),this.isMouseEvent(e))return new d(e.clientX,e.clientY);if(null===t||1===e.changedTouches.length)return new d(e.changedTouches[0].clientX,e.changedTouches[0].clientY);for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].target===t)return new d(e.changedTouches[n].clientX,e.changedTouches[n].clientY)},d.isMouseEvent=function(e){return 8===Object.prototype.toString.apply(e).indexOf("MouseEvent")},d.isIPosition=function(e){return!!e&&"x"in e&&"y"in e},d.getCurrent=function(e){var t=new d(0,0);if(window){var n=window.getComputedStyle(e);if(n){var i=parseInt(n.getPropertyValue("left"),10),s=parseInt(n.getPropertyValue("top"),10);t.x=isNaN(i)?0:i,t.y=isNaN(s)?0:s}return t}return null},d.copy=function(e){return new d(0,0).set(e)},Object.defineProperty(d.prototype,"value",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),d.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},d.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},d.prototype.multiply=function(e){this.x*=e,this.y*=e},d.prototype.divide=function(e){this.x/=e,this.y/=e},d.prototype.reset=function(){return this.x=0,this.y=0,this},d.prototype.set=function(e){return this.x=e.x,this.y=e.y,this},d);function d(e,t){this.x=e,this.y=t}var u=(c.prototype.add=function(){this.parent&&!this._added&&(this.parent.appendChild(this._helper),this._added=!0)},c.prototype.remove=function(){this.parent&&this._added&&(this.parent.removeChild(this._helper),this._added=!1)},c.prototype.dispose=function(){this._helper=null,this._added=!1},Object.defineProperty(c.prototype,"el",{get:function(){return this._helper},enumerable:!0,configurable:!0}),c);function c(e,t){this.parent=e,this.renderer=t,this._added=!1;var n=t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(n,"width","100%"),t.setStyle(n,"height","100%"),t.setStyle(n,"background-color","transparent"),t.setStyle(n,"top","0"),t.setStyle(n,"left","0"),this._helper=n}var f=(Object.defineProperty(g.prototype,"order",{set:function(e){this._order=e,this.orderState.next(e)},enumerable:!0,configurable:!0}),g.prototype.ngOnInit=function(){this.el=this.elementRef.nativeElement},g.prototype.ngAfterViewInit=function(){var t=this;this.orderState.subscribe(function(e){e!==undefined&&t.renderer&&t.renderer.setStyle(t.el,"order",e)})},g.prototype.ngOnDestroy=function(){this.orignal=null,this.oldTrans=null,this.tempTrans=null,this.currTrans=null,this.movedTrans=null,this._helperBlock.dispose(),this._helperBlock=null,this.draggingSub&&this.draggingSub.unsubscribe()},g.prototype.moveTo=function(e){this.orignal&&(e.subtract(this.orignal),this.tempTrans.set(e),this.tempTrans.divide(this.scale),this.transform(),this.movingOffset.emit(this.currTrans.value))},g.prototype.transform=function(){var e=this.tempTrans.x+this.oldTrans.x,t=this.tempTrans.y+this.oldTrans.y;if("x"===this.lockAxis)e=this.oldTrans.x,this.tempTrans.x=0;else if("y"===this.lockAxis){if(t=this.oldTrans.y,this.tempTrans.y=0,this.movedTrans.x+this.tempTrans.x>this.rightMovedMax&&0<this.movedTrans.x+this.tempTrans.x)return;if(this.movedTrans.x+this.tempTrans.x<=0&&Math.abs(this.movedTrans.x+this.tempTrans.x)>this.leftMovedMax)return}1<this.gridSize&&(e=Math.round(e/this.gridSize)*this.gridSize,t=Math.round(t/this.gridSize)*this.gridSize);var n="translate("+Math.round(e)+"px, "+Math.round(t)+"px)";this.renderer.setStyle(this.el,"transform",n),this.renderer.setStyle(this.el,"-webkit-transform",n),this.renderer.setStyle(this.el,"-ms-transform",n),this.renderer.setStyle(this.el,"-moz-transform",n),this.renderer.setStyle(this.el,"-o-transform",n),this.currTrans.x=e,this.currTrans.y=t},g.prototype.putBack=function(){if(this._zIndex?this.renderer.setStyle(this.el,"z-index",this._zIndex):this.zIndexMoving&&(this.oldZIndex?this.renderer.setStyle(this.el,"z-index",this.oldZIndex):this.el.style.removeProperty("z-index")),this.moving){this.stopped.emit(this.el),this._helperBlock.remove(),this.needTransform&&(p.isIPosition(this.position)?this.oldTrans.set(this.position):this.oldTrans.reset(),this.transform(),this.needTransform=!1),this.moving=!1,this.endOffset.emit(this.currTrans.value),this.renderer.removeStyle(this.el,"transform"),this.trackPosition&&(this.oldTrans.add(this.tempTrans),this.movedTrans.add(this.tempTrans)),this.tempTrans.reset(),this.trackPosition||this.transform(),this.movedTrans.x+this.tempTrans.x>=this.rightMovedMax&&0<=this.movedTrans.x+this.tempTrans.x&&(this.movedTrans.x=this.rightMovedMax),this.movedTrans.x+this.tempTrans.x<=0&&Math.abs(this.movedTrans.x+this.tempTrans.x)>=this.leftMovedMax&&(this.movedTrans.x=-this.leftMovedMax);var e=this.el;this.renderer.removeClass(e,"ng-dragging"),this.unsubscribeEvents()}},g.prototype.pickUp=function(){if(this.oldZIndex=this.el.style.zIndex?this.el.style.zIndex:"",window&&(this.oldZIndex=window.getComputedStyle(this.el,null).getPropertyValue("z-index")),this.zIndexMoving&&this.renderer.setStyle(this.el,"z-index",this.zIndexMoving),!this.moving){this.started.emit(this.el),this.moving=!0;var e=this.el;this.renderer.addClass(e,"ng-dragging"),this.subscribeEvents()}},g.prototype.subscribeEvents=function(){var t=this;this.draggingSub=n.fromEvent(document,"mousemove",{passive:!1}).subscribe(function(e){return t.onMouseMove(e)}),this.draggingSub.add(n.fromEvent(document,"touchmove",{passive:!1}).subscribe(function(e){return t.onMouseMove(e)})),this.draggingSub.add(n.fromEvent(document,"mouseup",{passive:!1}).subscribe(function(){return t.putBack()})),/msie\s|trident\//i.test(window.navigator.userAgent)||this.draggingSub.add(n.fromEvent(document,"mouseleave",{passive:!1}).subscribe(function(){return t.putBack()})),this.draggingSub.add(n.fromEvent(document,"touchend",{passive:!1}).subscribe(function(){return t.putBack()})),this.draggingSub.add(n.fromEvent(document,"touchcancel",{passive:!1}).subscribe(function(){return t.putBack()}))},g.prototype.unsubscribeEvents=function(){this.draggingSub.unsubscribe(),this.draggingSub=null},g.prototype.onMouseDown=function(e){e instanceof MouseEvent&&2===e.button||(e.target||e.srcElement,!1!==this.allowDrag&&(this.preventDefaultEvent&&(e.stopPropagation(),e.preventDefault()),this.orignal=p.fromEvent(e,this.el),this.currTrans.reset(),this.oldTrans.reset(),this.pickUp()))},g.prototype.onMouseMove=function(e){this.moving&&this.allowDrag&&(this.preventDefaultEvent&&(e.stopPropagation(),e.preventDefault()),this._helperBlock.add(),this.moveTo(p.fromEvent(e,this.el)))},g.decorators=[{type:i.Component,args:[{selector:"farris-splitter-bar",template:"\n    ss\n  ",host:{ngDraggable:"true"},styles:["\n        :host{\n            width: 8px;\n            background: #ebebeb;\n            cursor: move;\n        }\n    "]}]}],g.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2}]},g.propDecorators={klass:[{type:i.HostBinding,args:["class.f-component-splitter-bar"]}],zIndexMoving:[{type:i.Input}],position:[{type:i.Input}],trackPosition:[{type:i.Input}],gridSize:[{type:i.Input}],lockAxis:[{type:i.Input}],scale:[{type:i.Input}],started:[{type:i.Output}],stopped:[{type:i.Output}],edge:[{type:i.Output}],endOffset:[{type:i.Output}],movingOffset:[{type:i.Output}],onMouseDown:[{type:i.HostListener,args:["mousedown",["$event"]]},{type:i.HostListener,args:["touchstart",["$event"]]}]},g);function g(e,t){this.elementRef=e,this.renderer=t,this.klass=!0,this.position={x:0,y:0},this.trackPosition=!0,this.gridSize=1,this.lockAxis=null,this.scale=1,this.started=new i.EventEmitter,this.stopped=new i.EventEmitter,this.edge=new i.EventEmitter,this.endOffset=new i.EventEmitter,this.movingOffset=new i.EventEmitter,this.orderState=new n.BehaviorSubject({}),this.allowDrag=!0,this.preventDefaultEvent=!0,this.orignal=null,this.draggingSub=null,this.moving=!1,this._helperBlock=null,this.needTransform=!1,this.oldTrans=new p(0,0),this.tempTrans=new p(0,0),this.currTrans=new p(0,0),this.movedTrans=new p(0,0),this._helperBlock=new u(e.nativeElement,t)}var m=(y.prototype.ngOnInit=function(){},y.prototype.ngAfterContentInit=function(){},y.prototype.ngAfterViewInit=function(){this.hostEl=this.elementRef.nativeElement},y.prototype.initPane=function(){var n=this;if(this.pane&&this.pane._results&&this.pane._results.length){var i=this.hostEl.offsetWidth,e=this.pane._results.length,t=this.pane._results.filter(function(e){return!e._size}),s=t.length;this.pane._results.forEach(function(e,t){e.order=2*t,e._size&&(i-=n.getElementSize(i,e._size))}),t.forEach(function(e){e.size=i/s}),1<e&&this.createBar(e-1),this.listenPaneSizeChange()}},y.prototype.listenPaneSizeChange=function(){var o=this,a=this.hostEl.offsetWidth;this.pane._results.forEach(function(s,r){s.sizeChange.subscribe(function(e){var t=r+1,n=s.el.offsetWidth-e;if(o.pane._results[t]){var i=o.getElementSize(a,o.pane._results[t].min);o.barComponentRefArray[t]&&(i>=s.el.offsetWidth||i<=0?o.barComponentRefArray[t].instance.leftMovedMax=o.pane._results[t].el.offsetWidth+n:o.barComponentRefArray[t].instance.leftMovedMax=o.pane._results[t].el.offsetWidth+n-i)}})})},y.prototype.getElementSize=function(e,t){var n;return t?(-1!==t.indexOf("px")||"number"==typeof t?n=parseInt(t):-1!==t.indexOf("%")&&(n=e*parseInt(t)/100),n):n=0},y.prototype.createBar=function(e){for(var h=this.hostEl.offsetWidth,t=function(e){var t=p.componentFactoryResolver.resolveComponentFactory(f),n=p.container.createComponent(t),i=p.pane._results[e],s=i.el.offsetWidth,r=p.pane._results[e+1],o=r.el.offsetWidth,a=p.getElementSize(h,p.pane._results[e].max),l=p.getElementSize(h,p.pane._results[e].min);n.instance.rightMovedMax=a<=s&&0<a?0:s+o<=a||0===a?o:a-s,n.instance.leftMovedMax=s<=l||l<=0?s:s-l,"horizontal"===p.orientation?n.instance.lockAxis="y":"vertical"===p.orientation&&(n.instance.lockAxis="x"),n.instance.order=2*e+1,n.instance.endOffset.subscribe(function(e){i.size=i.el.offsetWidth+e.x,r.size=r.el.offsetWidth-e.x}),p.barComponentRefArray.push(n),n.changeDetectorRef.detectChanges()},p=this,n=0;n<e;n++)t(n)},y.decorators=[{type:i.Component,args:[{selector:"farris-splitter",template:"\n    <ng-content></ng-content>\n    <ng-container #container></ng-container>\n  "}]}],y.ctorParameters=function(){return[{type:i.ComponentFactoryResolver},{type:i.Injector},{type:i.Renderer2},{type:i.ElementRef}]},y.propDecorators={splitterCls:[{type:i.HostBinding,args:["class.f-component-splitter"]}],orientation:[{type:i.Input}],container:[{type:i.ViewChild,args:["container",{read:i.ViewContainerRef}]}],pane:[{type:i.ContentChildren,args:[l]}]},y);function y(e,t,n,i){this.componentFactoryResolver=e,this.injector=t,this.renderer=n,this.elementRef=i,this.splitterCls=!0,this.orientation="horizontal",this.barComponentRefArray=[]}var v=(b.decorators=[{type:i.NgModule,args:[{declarations:[m,l,f],imports:[t.CommonModule,s.AngularDraggableModule,r.PerfectScrollbarModule],exports:[m,l,f],entryComponents:[f]}]}],b);function b(){}e.SplitterService=o,e.SplitterComponent=m,e.SplitterPaneComponent=l,e.SplitterModule=v,e.ɵa=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-splitter.umd.min.js.map