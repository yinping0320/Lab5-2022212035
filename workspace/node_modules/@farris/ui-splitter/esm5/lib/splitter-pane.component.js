/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, Renderer2, ElementRef, Output, EventEmitter, HostListener } from "@angular/core";
var SplitterPaneComponent = /** @class */ (function () {
    function SplitterPaneComponent(elementRef, renderer) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.klass = true;
        this.collapsible = false;
        this.sizeChange = new EventEmitter();
        //orderState = new BehaviorSubject<any>({});
        // 记录収折前宽度，方便后续恢复
        this._beforeCollapseDistance = -1;
        this._enableCollapse = false;
        // 记录真实的iframe父容器
        this._relatedContainer = null;
        // 标记iframe父容器的样式属性position的值
        this._relatedContainerPosition = "";
        // 记录iframe在拖拽时的遮罩层
        this._relatedIframeOverlay = null;
        // 标记iframe遮罩层是否已显示
        this._iframeOverlayShownFlag = false;
        // 拖拽到某个值时，自动收起的阈值。如果阈值设置小于0，则不处理自动收起
        this.resizeCollapseThreshold = 20;
        // pane在splitter的位置，left 左侧 right 右侧 top 顶部 bottom 底部
        this.pos = "right";
        // 真实的展开时的距离，
        this.defaultExpandDistance = "20%";
        this.realExpandDisatance = "";
        // 展开时的距离，不设置时为空，设置了按照设置的值来
        this._expandDistance = "";
        // 初始收起状态
        this.initCollapse = false;
        /**
         * 收起折叠状态变化
         */
        this.collapseStateChange = new EventEmitter();
        // collapse的动画样式名
        this.animateCls = "splitter-pane-collapse-animate";
        // 标记是否需要更新变量
        this.updateParamsFlag = false;
        // 标记拖拽时上次的大小
        this.resizeDistance = -1;
        // 兼容旧表单写法
        if (this.elementRef) {
            this.el = this.elementRef.nativeElement;
        }
    }
    Object.defineProperty(SplitterPaneComponent.prototype, "size", {
        /**
         * 2022年6月8日 ximena
         * size、max、min、collapsible、sizeChange、order、orderState这些属性没有被实际使用
         * 该组件常用的属性来自于 ngResizable 拖拽组件
         */
        set: /**
         * 2022年6月8日 ximena
         * size、max、min、collapsible、sizeChange、order、orderState这些属性没有被实际使用
         * 该组件常用的属性来自于 ngResizable 拖拽组件
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._size = value;
            this.sizeChange.emit(value);
            // this._sizeState.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "order", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._order = value;
            //this.orderState.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "enableCollapse", {
        get: /**
         * @return {?}
         */
        function () {
            return this._enableCollapse;
        },
        // 启用収折
        set: 
        // 启用収折
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value !== undefined && value !== null) {
                this._enableCollapse = value;
                // 变化属性时
                if (this._enableCollapse && this.initCollapse) {
                    this.toggleInitCollapseState();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "relatedIframeParent", {
        get: /**
         * @return {?}
         */
        function () {
            return this._relatedContainer;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._relatedIframeParent = value;
            this.getRelatedIframeParent(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "collapsePosition", {
        get: /**
         * @return {?}
         */
        function () {
            return this.pos;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.enableCollapse && value) {
                // 规范position
                /** @type {?} */
                var positionCorrect = ["left", "right", "top", "bottom"].findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item == value; }));
                if (positionCorrect < -1) {
                    value = "right";
                }
                if (this.pos != value) {
                    this.el &&
                        this.renderer.removeClass(this.el, "splitter-pane-collapse-on-" + this.pos);
                    this.pos = value;
                    this.el &&
                        this.renderer.addClass(this.el, "splitter-pane-collapse-on-" + value);
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "expandDistance", {
        get: /**
         * @return {?}
         */
        function () {
            return this._expandDistance;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                this._expandDistance = this.resolveSize(value + "");
            }
            else {
                this._expandDistance = "";
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitterPaneComponent.prototype, "collapsed", {
        get: /**
         * @return {?}
         */
        function () {
            return this.initCollapse;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.enableCollapse && value !== undefined && value !== null) {
                if (this.initCollapse !== value) {
                    this.initCollapse = value;
                    this.toggleInitCollapseState();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     *  拖拽的变化中事件
     *  如果超过阈值，不处理
     *  暂未处理拖拽最大、最小值的问题
     */
    /**
     *  拖拽的变化中事件
     *  如果超过阈值，不处理
     *  暂未处理拖拽最大、最小值的问题
     * @param {?} pos
     * @return {?}
     */
    SplitterPaneComponent.prototype.onRZResizing = /**
     *  拖拽的变化中事件
     *  如果超过阈值，不处理
     *  暂未处理拖拽最大、最小值的问题
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        if (this.enableCollapse && pos && pos["size"]) {
            /** @type {?} */
            var changeProp = this.getStyleProp();
            /** @type {?} */
            var resizeDirection = "";
            if (this.resizeDistance >= 0) {
                // 开始记录后
                // 此次值比上次记录大，说明在expand
                resizeDirection =
                    pos["size"][changeProp] > this.resizeDistance
                        ? "expand"
                        : "collapse";
            }
            this.resizeDistance = pos["size"][changeProp];
            if (resizeDirection == "expand" && this.initCollapse) {
                this.initCollapse = false;
            }
            if (pos["size"][changeProp] > this.resizeCollapseThreshold ||
                !resizeDirection) {
                // 拖拽速度快的时候，会漏掉计算的时机
                return;
            }
            if (this.resizeCollapseThreshold > 0) {
                // 设置了自动収折阈值
                if (!this.initCollapse && resizeDirection == "collapse") {
                    // 处理拖拽収折过程中，自动收起；不处理展开过程中的，自动展开
                    if (pos["actions"] &&
                        pos["actions"].hasOwnProperty("stopResize")) {
                        pos["actions"]["stopResize"]();
                    }
                    this.toggleCollapseState(null);
                }
            }
            else {
                // 未设置自动収折阈值，需要单独处理 即将收起时状态、即将展开时状态
                if (resizeDirection == "collapse") {
                    if (pos["size"][changeProp] < 3 && !this.initCollapse) {
                        this.initCollapse = true;
                    }
                }
            }
        }
    };
    // 拖拽的开始的事件
    // 拖拽的开始的事件
    /**
     * @param {?} pos
     * @return {?}
     */
    SplitterPaneComponent.prototype.onRZStart = 
    // 拖拽的开始的事件
    /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        if (this.enableCollapse) {
            if (this.el.className.indexOf(this.animateCls) > -1) {
                this.renderer.removeClass(this.el, this.animateCls);
            }
        }
        // 如果有iframe遮罩并且没有显示
        if (this._relatedIframeOverlay && !this._iframeOverlayShownFlag) {
            if (["relative", "absolute"].indexOf(this._relatedContainerPosition) < 0) {
                this.renderer.setStyle(this._relatedContainer, "position", "relative");
            }
            this.renderer.setStyle(this._relatedIframeOverlay, "display", "block");
            this._iframeOverlayShownFlag = true;
        }
        if (!this.updateParamsFlag &&
            pos["actions"] &&
            pos["actions"].hasOwnProperty("updateParams")) {
            pos["actions"]["updateParams"]({ fixedEdge: true });
            this.updateParamsFlag = true;
        }
    };
    // 拖拽的停止事件
    // 拖拽的停止事件
    /**
     * @param {?} pos
     * @return {?}
     */
    SplitterPaneComponent.prototype.onRZStop = 
    // 拖拽的停止事件
    /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizeDistance = -1;
        // 如果有iframe遮罩并且显示了
        if (this._relatedIframeOverlay && this._iframeOverlayShownFlag) {
            if (["relative", "absolute"].indexOf(this._relatedContainerPosition) < 0) {
                this.renderer.setStyle(this._relatedContainer, "position", this._relatedContainerPosition);
            }
            this.renderer.setStyle(this._relatedIframeOverlay, "display", "none");
            this._iframeOverlayShownFlag = false;
        }
    };
    /**
     * @return {?}
     */
    SplitterPaneComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.elementRef) {
            this.compatibleEl();
        }
    };
    /**
     * @return {?}
     */
    SplitterPaneComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (!this.el) {
            this.compatibleEl();
        }
    };
    /**
     * 兼容旧表单写法
     */
    /**
     * 兼容旧表单写法
     * @private
     * @return {?}
     */
    SplitterPaneComponent.prototype.compatibleEl = /**
     * 兼容旧表单写法
     * @private
     * @return {?}
     */
    function () {
        this.el = this.elementRef.nativeElement;
        // 设置了iframe容器，但是没有创建遮罩
        if (this._relatedIframeParent && !this._relatedIframeOverlay) {
            this.getRelatedIframeParent(this._relatedIframeParent);
        }
        this.enableCollapse &&
            this.renderer.addClass(this.el, "splitter-pane-collapse-on-" + this.collapsePosition);
    };
    /**
     * @return {?}
     */
    SplitterPaneComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () { };
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    SplitterPaneComponent.prototype.resolveSize = /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var regex = /px|%|rem|em/;
        // 说明是字符串
        return regex.test(size)
            ? "" + parseInt(size, 10) + size.match(regex)[0]
            : size + "px";
    };
    /**
     * 规范获取iframe所在的父容器
     */
    /**
     * 规范获取iframe所在的父容器
     * @private
     * @param {?} content
     * @return {?}
     */
    SplitterPaneComponent.prototype.getRelatedIframeParent = /**
     * 规范获取iframe所在的父容器
     * @private
     * @param {?} content
     * @return {?}
     */
    function (content) {
        if (!content || !this.el) {
            this._relatedContainer = null;
        }
        if (content instanceof ElementRef) {
            this._relatedContainer = content.nativeElement;
        }
        else if (typeof content == "string") {
            this._relatedContainer = this.el.parentElement.querySelector(content);
        }
        else {
            this._relatedContainer = content;
        }
        if (this._relatedContainer) {
            this._relatedContainerPosition = this._relatedContainer["style"]["position"];
            // 构造遮罩层
            this._relatedIframeOverlay = this.renderer.createElement("div");
            this._relatedIframeOverlay.className = "f-utils-absolute-all";
            this.renderer.setStyle(this._relatedIframeOverlay, "display", "none");
            this.renderer.appendChild(this._relatedContainer, this._relatedIframeOverlay);
        }
    };
    /**
     * 点击収折
     */
    /**
     * 点击収折
     * @param {?} ev
     * @return {?}
     */
    SplitterPaneComponent.prototype.toggleCollapseState = /**
     * 点击収折
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        //禁止冒泡
        ev && ev.stopPropagation();
        if (!this.el)
            return;
        if (this.initCollapse) {
            // 待展开
            this.renderer.addClass(this.el, this.animateCls);
            this.changeCollapse("expand");
        }
        else {
            // 待收起
            this.renderer.addClass(this.el, this.animateCls);
            this.changeCollapse("collapse");
        }
        this.initCollapse = !this.initCollapse;
        this.collapseStateChange.emit(this.initCollapse);
    };
    /**
     * 切换初始收起状态
     */
    /**
     * 切换初始收起状态
     * @return {?}
     */
    SplitterPaneComponent.prototype.toggleInitCollapseState = /**
     * 切换初始收起状态
     * @return {?}
     */
    function () {
        if (!this.el)
            return;
        if (this.initCollapse) {
            // 收起
            this.changeCollapse("collapse");
        }
        else {
            // 展开
            this.changeCollapse("expand");
        }
        this.collapseStateChange.emit(this.initCollapse);
    };
    /**
     * expand 为展开，collapse 为收起
     * @param collapseOrExpand
     */
    /**
     * expand 为展开，collapse 为收起
     * @private
     * @param {?} collapseOrExpand
     * @return {?}
     */
    SplitterPaneComponent.prototype.changeCollapse = /**
     * expand 为展开，collapse 为收起
     * @private
     * @param {?} collapseOrExpand
     * @return {?}
     */
    function (collapseOrExpand) {
        /** @type {?} */
        var changeProp = this.getStyleProp();
        switch (collapseOrExpand) {
            case "expand":
                // 展开
                // 如果存在手写width赋值给pane会有问题
                if (this._expandDistance) {
                    //设置了展开距离
                    this.realExpandDisatance = this._expandDistance;
                }
                else {
                    //没有设置，按照之前的记录，如果存在就按照记录的值，如果没有就按照默认的值
                    this.realExpandDisatance = this._beforeCollapseDistance
                        ? this._beforeCollapseDistance + "px"
                        : this.defaultExpandDistance;
                }
                this.renderer.setStyle(this.el, changeProp, this.realExpandDisatance);
                break;
            default:
                // 收起
                this._beforeCollapseDistance =
                    changeProp == "height"
                        ? this.el.offsetHeight
                        : this.el.offsetWidth;
                this.renderer.setStyle(this.el, changeProp, "0px");
        }
    };
    /**
     * 布局排列不一样，影响到是设置宽度还是高度
     */
    /**
     * 布局排列不一样，影响到是设置宽度还是高度
     * @private
     * @return {?}
     */
    SplitterPaneComponent.prototype.getStyleProp = /**
     * 布局排列不一样，影响到是设置宽度还是高度
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var hori = ["left", "right"].findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item == _this.collapsePosition; }));
        return hori > -1 ? "width" : "height";
    };
    SplitterPaneComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-splitter-pane",
                    template: "\n        <ng-content></ng-content>\n        <div\n            class=\"f-list-nav-toggle-sidebar\"\n            *ngIf=\"enableCollapse\"\n            [ngClass]=\"{ active: collapsed }\"\n            (click)=\"toggleCollapseState($event)\"\n        >\n            <span class=\"triangle\"></span>\n        </div>\n    "
                }] }
    ];
    /** @nocollapse */
    SplitterPaneComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    SplitterPaneComponent.propDecorators = {
        klass: [{ type: HostBinding, args: ["class.f-component-splitter-pane",] }],
        size: [{ type: Input }],
        max: [{ type: Input }],
        min: [{ type: Input }],
        collapsible: [{ type: Input }],
        sizeChange: [{ type: Output }],
        enableCollapse: [{ type: Input }],
        relatedIframeParent: [{ type: Input }],
        resizeCollapseThreshold: [{ type: Input }],
        collapsePosition: [{ type: Input }],
        expandDistance: [{ type: Input }],
        collapsed: [{ type: Input }],
        collapseStateChange: [{ type: Output, args: ["collapseStateChange",] }],
        onRZResizing: [{ type: HostListener, args: ["rzResizing", ["$event"],] }],
        onRZStart: [{ type: HostListener, args: ["rzStart", ["$event"],] }],
        onRZStop: [{ type: HostListener, args: ["rzStop", ["$event"],] }]
    };
    return SplitterPaneComponent;
}());
export { SplitterPaneComponent };
if (false) {
    /** @type {?} */
    SplitterPaneComponent.prototype.klass;
    /** @type {?} */
    SplitterPaneComponent.prototype.max;
    /** @type {?} */
    SplitterPaneComponent.prototype.min;
    /** @type {?} */
    SplitterPaneComponent.prototype.collapsible;
    /** @type {?} */
    SplitterPaneComponent.prototype.sizeChange;
    /** @type {?} */
    SplitterPaneComponent.prototype._size;
    /** @type {?} */
    SplitterPaneComponent.prototype.el;
    /** @type {?} */
    SplitterPaneComponent.prototype._order;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._beforeCollapseDistance;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._enableCollapse;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._relatedIframeParent;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._relatedContainer;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._relatedContainerPosition;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._relatedIframeOverlay;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._iframeOverlayShownFlag;
    /** @type {?} */
    SplitterPaneComponent.prototype.resizeCollapseThreshold;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.pos;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.defaultExpandDistance;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.realExpandDisatance;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype._expandDistance;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.initCollapse;
    /**
     * 收起折叠状态变化
     * @type {?}
     */
    SplitterPaneComponent.prototype.collapseStateChange;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.animateCls;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.updateParamsFlag;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.resizeDistance;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    SplitterPaneComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXR0ZXItcGFuZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNwbGl0dGVyLyIsInNvdXJjZXMiOlsibGliL3NwbGl0dGVyLXBhbmUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUVULEtBQUssRUFDTCxXQUFXLEVBQ1gsU0FBUyxFQUVULFVBQVUsRUFDVixNQUFNLEVBQ04sWUFBWSxFQUNaLFlBQVksRUFFZixNQUFNLGVBQWUsQ0FBQztBQUV2QjtJQXVRSSwrQkFBb0IsVUFBc0IsRUFBVSxRQUFtQjtRQUFuRCxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQXZQdkIsVUFBSyxHQUFHLElBQUksQ0FBQztRQWFwRCxnQkFBVyxHQUFZLEtBQUssQ0FBQztRQUM1QixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7O1FBV3ZDLDRCQUF1QixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdCLG9CQUFlLEdBQUcsS0FBSyxDQUFDOztRQWtCeEIsc0JBQWlCLEdBQUcsSUFBSSxDQUFDOztRQUV6Qiw4QkFBeUIsR0FBRyxFQUFFLENBQUM7O1FBRS9CLDBCQUFxQixHQUFHLElBQUksQ0FBQzs7UUFFN0IsNEJBQXVCLEdBQUcsS0FBSyxDQUFDOztRQVcvQiw0QkFBdUIsR0FBRyxFQUFFLENBQUM7O1FBRTlCLFFBQUcsR0FBRyxPQUFPLENBQUM7O1FBOEJkLDBCQUFxQixHQUFHLEtBQUssQ0FBQztRQUM5Qix3QkFBbUIsR0FBRyxFQUFFLENBQUM7O1FBRXpCLG9CQUFlLEdBQUcsRUFBRSxDQUFDOztRQWNyQixpQkFBWSxHQUFHLEtBQUssQ0FBQzs7OztRQWVFLHdCQUFtQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7O1FBRWhFLGVBQVUsR0FBRyxnQ0FBZ0MsQ0FBQzs7UUFHOUMscUJBQWdCLEdBQUcsS0FBSyxDQUFDOztRQUV6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Ozs7SUFFakMsZ0RBQTZCOzs7OztJQWM3Qiw2Q0FBNkI7Ozs7O0lBZTdCLG9EQUF3RTs7Ozs7SUFFeEUsMkNBQXNEOzs7OztJQUd0RCxpREFBaUM7Ozs7O0lBRWpDLCtDQUE0Qjs7Ozs7SUFtSGhCLDJDQUE4Qjs7Ozs7SUFBRSx5Q0FBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBIb3N0QmluZGluZyxcclxuICAgIFJlbmRlcmVyMixcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgT3V0cHV0LFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgSG9zdExpc3RlbmVyLFxyXG4gICAgT25EZXN0cm95XHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiZmFycmlzLXNwbGl0dGVyLXBhbmVcIixcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3M9XCJmLWxpc3QtbmF2LXRvZ2dsZS1zaWRlYmFyXCJcclxuICAgICAgICAgICAgKm5nSWY9XCJlbmFibGVDb2xsYXBzZVwiXHJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsgYWN0aXZlOiBjb2xsYXBzZWQgfVwiXHJcbiAgICAgICAgICAgIChjbGljayk9XCJ0b2dnbGVDb2xsYXBzZVN0YXRlKCRldmVudClcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0cmlhbmdsZVwiPjwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGAsXHJcbiAgICBzdHlsZXM6IFtdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTcGxpdHRlclBhbmVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mLWNvbXBvbmVudC1zcGxpdHRlci1wYW5lXCIpIGtsYXNzID0gdHJ1ZTtcclxuICAgIC8qKlxyXG4gICAgICogMjAyMuW5tDbmnIg45pelIHhpbWVuYVxyXG4gICAgICogc2l6ZeOAgW1heOOAgW1pbuOAgWNvbGxhcHNpYmxl44CBc2l6ZUNoYW5nZeOAgW9yZGVy44CBb3JkZXJTdGF0Zei/meS6m+WxnuaAp+ayoeacieiiq+WunumZheS9v+eUqFxyXG4gICAgICog6K+l57uE5Lu25bi455So55qE5bGe5oCn5p2l6Ieq5LqOIG5nUmVzaXphYmxlIOaLluaLvee7hOS7tlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZXQgc2l6ZSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fc2l6ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2l6ZUNoYW5nZS5lbWl0KHZhbHVlKTtcclxuICAgICAgICAvLyB0aGlzLl9zaXplU3RhdGUubmV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBtYXg6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIG1pbjogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgY29sbGFwc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIEBPdXRwdXQoKSBzaXplQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBfc2l6ZTogc3RyaW5nO1xyXG4gICAgLy9fc2l6ZVN0YXRlID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KHt9KTtcclxuICAgIGVsOiBIVE1MRWxlbWVudDtcclxuICAgIHNldCBvcmRlcih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fb3JkZXIgPSB2YWx1ZTtcclxuICAgICAgICAvL3RoaXMub3JkZXJTdGF0ZS5uZXh0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIF9vcmRlcjogbnVtYmVyO1xyXG4gICAgLy9vcmRlclN0YXRlID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KHt9KTtcclxuICAgIC8vIOiusOW9leWPjuaKmOWJjeWuveW6pu+8jOaWueS+v+WQjue7reaBouWkjVxyXG4gICAgcHJpdmF0ZSBfYmVmb3JlQ29sbGFwc2VEaXN0YW5jZSA9IC0xO1xyXG4gICAgcHJpdmF0ZSBfZW5hYmxlQ29sbGFwc2UgPSBmYWxzZTtcclxuICAgIC8vIOWQr+eUqOWPjuaKmFxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlbmFibGVDb2xsYXBzZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZUNvbGxhcHNlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIC8vIOWPmOWMluWxnuaAp+aXtlxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZW5hYmxlQ29sbGFwc2UgJiYgdGhpcy5pbml0Q29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlSW5pdENvbGxhcHNlU3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBlbmFibGVDb2xsYXBzZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlQ29sbGFwc2U7XHJcbiAgICB9XHJcbiAgICAvLyDlpITnkIblhbPogZTlj5jliqjkuK3vvIzlj6blpJbkuIDlpITmnIlpZnJhbWXvvIxpZnJhbWXlvbHlk43mi5bmi73nmoTmgKfog71cclxuICAgIHByaXZhdGUgX3JlbGF0ZWRJZnJhbWVQYXJlbnQ6IHN0cmluZyB8IEVsZW1lbnRSZWYgfCBhbnk7XHJcbiAgICAvLyDorrDlvZXnnJ/lrp7nmoRpZnJhbWXniLblrrnlmahcclxuICAgIHByaXZhdGUgX3JlbGF0ZWRDb250YWluZXIgPSBudWxsO1xyXG4gICAgLy8g5qCH6K6waWZyYW1l54i25a655Zmo55qE5qC35byP5bGe5oCncG9zaXRpb27nmoTlgLxcclxuICAgIHByaXZhdGUgX3JlbGF0ZWRDb250YWluZXJQb3NpdGlvbiA9IFwiXCI7XHJcbiAgICAvLyDorrDlvZVpZnJhbWXlnKjmi5bmi73ml7bnmoTpga7nvanlsYJcclxuICAgIHByaXZhdGUgX3JlbGF0ZWRJZnJhbWVPdmVybGF5ID0gbnVsbDtcclxuICAgIC8vIOagh+iusGlmcmFtZemBrue9qeWxguaYr+WQpuW3suaYvuekulxyXG4gICAgcHJpdmF0ZSBfaWZyYW1lT3ZlcmxheVNob3duRmxhZyA9IGZhbHNlO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCByZWxhdGVkSWZyYW1lUGFyZW50KHZhbHVlOiBzdHJpbmcgfCBFbGVtZW50UmVmIHwgYW55KSB7XHJcbiAgICAgICAgdGhpcy5fcmVsYXRlZElmcmFtZVBhcmVudD12YWx1ZTtcclxuICAgICAgICB0aGlzLmdldFJlbGF0ZWRJZnJhbWVQYXJlbnQodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlbGF0ZWRJZnJhbWVQYXJlbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbGF0ZWRDb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5ouW5ou95Yiw5p+Q5Liq5YC85pe277yM6Ieq5Yqo5pS26LW355qE6ZiI5YC844CC5aaC5p6c6ZiI5YC86K6+572u5bCP5LqOMO+8jOWImeS4jeWkhOeQhuiHquWKqOaUtui1t1xyXG4gICAgQElucHV0KCkgcmVzaXplQ29sbGFwc2VUaHJlc2hvbGQgPSAyMDtcclxuICAgIC8vIHBhbmXlnKhzcGxpdHRlcueahOS9jee9ru+8jGxlZnQg5bem5L6nIHJpZ2h0IOWPs+S+pyB0b3Ag6aG26YOoIGJvdHRvbSDlupXpg6hcclxuICAgIHByaXZhdGUgcG9zID0gXCJyaWdodFwiO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBjb2xsYXBzZVBvc2l0aW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVDb2xsYXBzZSAmJiB2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyDop4TojINwb3NpdGlvblxyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb25Db3JyZWN0ID0gW1wibGVmdFwiLCBcInJpZ2h0XCIsIFwidG9wXCIsIFwiYm90dG9tXCJdLmZpbmRJbmRleChcclxuICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbSA9PSB2YWx1ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAocG9zaXRpb25Db3JyZWN0IDwgLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcyAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3BsaXR0ZXItcGFuZS1jb2xsYXBzZS1vbi1cIiArIHRoaXMucG9zXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzcGxpdHRlci1wYW5lLWNvbGxhcHNlLW9uLVwiICsgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGNvbGxhcHNlUG9zaXRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3M7XHJcbiAgICB9XHJcbiAgICAvLyDnnJ/lrp7nmoTlsZXlvIDml7bnmoTot53nprvvvIxcclxuICAgIHByaXZhdGUgZGVmYXVsdEV4cGFuZERpc3RhbmNlID0gXCIyMCVcIjtcclxuICAgIHByaXZhdGUgcmVhbEV4cGFuZERpc2F0YW5jZSA9IFwiXCI7XHJcbiAgICAvLyDlsZXlvIDml7bnmoTot53nprvvvIzkuI3orr7nva7ml7bkuLrnqbrvvIzorr7nva7kuobmjInnhaforr7nva7nmoTlgLzmnaVcclxuICAgIHByaXZhdGUgX2V4cGFuZERpc3RhbmNlID0gXCJcIjtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZXhwYW5kRGlzdGFuY2UodmFsdWU6IHN0cmluZyB8IG51bWJlcikge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmREaXN0YW5jZSA9IHRoaXMucmVzb2x2ZVNpemUodmFsdWUgKyBcIlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmREaXN0YW5jZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGV4cGFuZERpc3RhbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9leHBhbmREaXN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDliJ3lp4vmlLbotbfnirbmgIFcclxuICAgIHByaXZhdGUgaW5pdENvbGxhcHNlID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGNvbGxhcHNlZCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbGxhcHNlICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5pdENvbGxhcHNlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0Q29sbGFwc2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlSW5pdENvbGxhcHNlU3RhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBjb2xsYXBzZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdENvbGxhcHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuaUtui1t+aKmOWPoOeKtuaAgeWPmOWMliAqL1xyXG4gICAgQE91dHB1dChcImNvbGxhcHNlU3RhdGVDaGFuZ2VcIikgY29sbGFwc2VTdGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIGNvbGxhcHNl55qE5Yqo55S75qC35byP5ZCNXHJcbiAgICBwcml2YXRlIGFuaW1hdGVDbHMgPSBcInNwbGl0dGVyLXBhbmUtY29sbGFwc2UtYW5pbWF0ZVwiO1xyXG5cclxuICAgIC8vIOagh+iusOaYr+WQpumcgOimgeabtOaWsOWPmOmHj1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVQYXJhbXNGbGFnID0gZmFsc2U7XHJcbiAgICAvLyDmoIforrDmi5bmi73ml7bkuIrmrKHnmoTlpKflsI9cclxuICAgIHByaXZhdGUgcmVzaXplRGlzdGFuY2UgPSAtMTtcclxuICAgIC8qKlxyXG4gICAgICogIOaLluaLveeahOWPmOWMluS4reS6i+S7tlxyXG4gICAgICogIOWmguaenOi2hei/h+mYiOWAvO+8jOS4jeWkhOeQhlxyXG4gICAgICogIOaaguacquWkhOeQhuaLluaLveacgOWkp+OAgeacgOWwj+WAvOeahOmXrumimFxyXG4gICAgICovXHJcbiAgICBASG9zdExpc3RlbmVyKFwicnpSZXNpemluZ1wiLCBbXCIkZXZlbnRcIl0pXHJcbiAgICBvblJaUmVzaXppbmcocG9zKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ29sbGFwc2UgJiYgcG9zICYmIHBvc1tcInNpemVcIl0pIHtcclxuICAgICAgICAgICAgbGV0IGNoYW5nZVByb3AgPSB0aGlzLmdldFN0eWxlUHJvcCgpO1xyXG4gICAgICAgICAgICBsZXQgcmVzaXplRGlyZWN0aW9uID0gXCJcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplRGlzdGFuY2UgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL6K6w5b2V5ZCOXHJcbiAgICAgICAgICAgICAgICAvLyDmraTmrKHlgLzmr5TkuIrmrKHorrDlvZXlpKfvvIzor7TmmI7lnKhleHBhbmRcclxuICAgICAgICAgICAgICAgIHJlc2l6ZURpcmVjdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zW1wic2l6ZVwiXVtjaGFuZ2VQcm9wXSA+IHRoaXMucmVzaXplRGlzdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImV4cGFuZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJjb2xsYXBzZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplRGlzdGFuY2UgPSBwb3NbXCJzaXplXCJdW2NoYW5nZVByb3BdO1xyXG4gICAgICAgICAgICBpZiAocmVzaXplRGlyZWN0aW9uID09IFwiZXhwYW5kXCIgJiYgdGhpcy5pbml0Q29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdENvbGxhcHNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgcG9zW1wic2l6ZVwiXVtjaGFuZ2VQcm9wXSA+IHRoaXMucmVzaXplQ29sbGFwc2VUaHJlc2hvbGQgfHxcclxuICAgICAgICAgICAgICAgICFyZXNpemVEaXJlY3Rpb25cclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDmi5bmi73pgJ/luqblv6vnmoTml7blgJnvvIzkvJrmvI/mjonorqHnrpfnmoTml7bmnLpcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplQ29sbGFwc2VUaHJlc2hvbGQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDorr7nva7kuoboh6rliqjlj47mipjpmIjlgLxcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbml0Q29sbGFwc2UgJiYgcmVzaXplRGlyZWN0aW9uID09IFwiY29sbGFwc2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuaLluaLveWPjuaKmOi/h+eoi+S4re+8jOiHquWKqOaUtui1t++8m+S4jeWkhOeQhuWxleW8gOi/h+eoi+S4reeahO+8jOiHquWKqOWxleW8gFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zW1wiYWN0aW9uc1wiXSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NbXCJhY3Rpb25zXCJdLmhhc093blByb3BlcnR5KFwic3RvcFJlc2l6ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NbXCJhY3Rpb25zXCJdW1wic3RvcFJlc2l6ZVwiXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUNvbGxhcHNlU3RhdGUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDmnKrorr7nva7oh6rliqjlj47mipjpmIjlgLzvvIzpnIDopoHljZXni6zlpITnkIYg5Y2z5bCG5pS26LW35pe254q25oCB44CB5Y2z5bCG5bGV5byA5pe254q25oCBXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzaXplRGlyZWN0aW9uID09IFwiY29sbGFwc2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NbXCJzaXplXCJdW2NoYW5nZVByb3BdIDwgMyAmJiAhdGhpcy5pbml0Q29sbGFwc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Q29sbGFwc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOaLluaLveeahOW8gOWni+eahOS6i+S7tlxyXG4gICAgQEhvc3RMaXN0ZW5lcihcInJ6U3RhcnRcIiwgW1wiJGV2ZW50XCJdKVxyXG4gICAgb25SWlN0YXJ0KHBvcykge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsLmNsYXNzTmFtZS5pbmRleE9mKHRoaXMuYW5pbWF0ZUNscykgPi0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuYW5pbWF0ZUNscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5aaC5p6c5pyJaWZyYW1l6YGu572p5bm25LiU5rKh5pyJ5pi+56S6XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5ICYmICF0aGlzLl9pZnJhbWVPdmVybGF5U2hvd25GbGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIFtcInJlbGF0aXZlXCIsIFwiYWJzb2x1dGVcIl0uaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyUG9zaXRpb25cclxuICAgICAgICAgICAgICAgICkgPCAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInJlbGF0aXZlXCJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5XCIsXHJcbiAgICAgICAgICAgICAgICBcImJsb2NrXCJcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5faWZyYW1lT3ZlcmxheVNob3duRmxhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgIXRoaXMudXBkYXRlUGFyYW1zRmxhZyAmJlxyXG4gICAgICAgICAgICBwb3NbXCJhY3Rpb25zXCJdICYmXHJcbiAgICAgICAgICAgIHBvc1tcImFjdGlvbnNcIl0uaGFzT3duUHJvcGVydHkoXCJ1cGRhdGVQYXJhbXNcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcG9zW1wiYWN0aW9uc1wiXVtcInVwZGF0ZVBhcmFtc1wiXSh7IGZpeGVkRWRnZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJhbXNGbGFnID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDmi5bmi73nmoTlgZzmraLkuovku7ZcclxuICAgIEBIb3N0TGlzdGVuZXIoXCJyelN0b3BcIiwgW1wiJGV2ZW50XCJdKVxyXG4gICAgb25SWlN0b3AocG9zKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVEaXN0YW5jZSA9IC0xO1xyXG4gICAgICAgIC8vIOWmguaenOaciWlmcmFtZemBrue9qeW5tuS4lOaYvuekuuS6hlxyXG4gICAgICAgIGlmICh0aGlzLl9yZWxhdGVkSWZyYW1lT3ZlcmxheSAmJiB0aGlzLl9pZnJhbWVPdmVybGF5U2hvd25GbGFnKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIFtcInJlbGF0aXZlXCIsIFwiYWJzb2x1dGVcIl0uaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyUG9zaXRpb25cclxuICAgICAgICAgICAgICAgICkgPCAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyUG9zaXRpb25cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5XCIsXHJcbiAgICAgICAgICAgICAgICBcIm5vbmVcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLl9pZnJhbWVPdmVybGF5U2hvd25GbGFnID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcclxuICAgICAgICAvLyDlhbzlrrnml6fooajljZXlhpnms5VcclxuICAgICAgICBpZih0aGlzLmVsZW1lbnRSZWYpe1xyXG4gICAgICAgICAgICB0aGlzLmVsID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgaWYodGhpcy5lbGVtZW50UmVmKXtcclxuICAgICAgICB0aGlzLmNvbXBhdGlibGVFbCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuZWwpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBhdGlibGVFbCgpO1xyXG4gICAgICAgIH0gICAgIFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhbzlrrnml6fooajljZXlhpnms5VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb21wYXRpYmxlRWwoKXtcclxuICAgICAgICB0aGlzLmVsID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgLy8g6K6+572u5LqGaWZyYW1l5a655Zmo77yM5L2G5piv5rKh5pyJ5Yib5bu66YGu572pXHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbGF0ZWRJZnJhbWVQYXJlbnQgJiYgIXRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVsYXRlZElmcmFtZVBhcmVudCh0aGlzLl9yZWxhdGVkSWZyYW1lUGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbmFibGVDb2xsYXBzZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbCxcclxuICAgICAgICAgICAgICAgIFwic3BsaXR0ZXItcGFuZS1jb2xsYXBzZS1vbi1cIiArIHRoaXMuY29sbGFwc2VQb3NpdGlvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge31cclxuXHJcbiAgICAvKuWuvemrmOexu+Wei+aYryBzdHJpbmfmiJbogIVudW1iZXIg6Kej5p6Q5a696auYICDlsLrlr7ggKi9cclxuICAgIHJlc29sdmVTaXplKHNpemUpIHtcclxuICAgICAgICBjb25zdCByZWdleCA9IC9weHwlfHJlbXxlbS87XHJcbiAgICAgICAgLy8g6K+05piO5piv5a2X56ym5LiyXHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3Qoc2l6ZSlcclxuICAgICAgICAgICAgPyBgJHtwYXJzZUludChzaXplLCAxMCl9JHtzaXplLm1hdGNoKHJlZ2V4KVswXX1gXHJcbiAgICAgICAgICAgIDogYCR7c2l6ZX1weGA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOinhOiMg+iOt+WPlmlmcmFtZeaJgOWcqOeahOeItuWuueWZqFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFJlbGF0ZWRJZnJhbWVQYXJlbnQoY29udGVudCkge1xyXG4gICAgICAgIGlmICghY29udGVudHx8IXRoaXMuZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVsYXRlZENvbnRhaW5lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgRWxlbWVudFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyID0gY29udGVudC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWxhdGVkQ29udGFpbmVyID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgICBjb250ZW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVsYXRlZENvbnRhaW5lciA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9yZWxhdGVkQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRDb250YWluZXJQb3NpdGlvbiA9IHRoaXMuX3JlbGF0ZWRDb250YWluZXJbXCJzdHlsZVwiXVtcclxuICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIlxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAvLyDmnoTpgKDpga7nvanlsYJcclxuICAgICAgICAgICAgdGhpcy5fcmVsYXRlZElmcmFtZU92ZXJsYXkgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5LmNsYXNzTmFtZSA9IFwiZi11dGlscy1hYnNvbHV0ZS1hbGxcIjtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5LFxyXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5XCIsXHJcbiAgICAgICAgICAgICAgICBcIm5vbmVcIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsYXRlZENvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbGF0ZWRJZnJhbWVPdmVybGF5XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vlj47miphcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlQ29sbGFwc2VTdGF0ZShldjogTW91c2VFdmVudCkge1xyXG4gICAgICAgIC8v56aB5q2i5YaS5rOhXHJcbiAgICAgICAgZXYgJiYgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVsKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuaW5pdENvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgIC8vIOW+heWxleW8gFxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsIHRoaXMuYW5pbWF0ZUNscyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlQ29sbGFwc2UoXCJleHBhbmRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g5b6F5pS26LW3XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5hbmltYXRlQ2xzKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDb2xsYXBzZShcImNvbGxhcHNlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRDb2xsYXBzZSA9ICF0aGlzLmluaXRDb2xsYXBzZTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlU3RhdGVDaGFuZ2UuZW1pdCh0aGlzLmluaXRDb2xsYXBzZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNouWIneWni+aUtui1t+eKtuaAgVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVJbml0Q29sbGFwc2VTdGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZWwpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5pbml0Q29sbGFwc2UpIHtcclxuICAgICAgICAgICAgLy8g5pS26LW3XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlQ29sbGFwc2UoXCJjb2xsYXBzZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlsZXlvIBcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDb2xsYXBzZShcImV4cGFuZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZVN0YXRlQ2hhbmdlLmVtaXQodGhpcy5pbml0Q29sbGFwc2UpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBleHBhbmQg5Li65bGV5byA77yMY29sbGFwc2Ug5Li65pS26LW3XHJcbiAgICAgKiBAcGFyYW0gY29sbGFwc2VPckV4cGFuZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoYW5nZUNvbGxhcHNlKGNvbGxhcHNlT3JFeHBhbmQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBjaGFuZ2VQcm9wID0gdGhpcy5nZXRTdHlsZVByb3AoKTtcclxuICAgICAgICBzd2l0Y2ggKGNvbGxhcHNlT3JFeHBhbmQpIHtcclxuICAgICAgICAgICAgY2FzZSBcImV4cGFuZFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5bGV5byAXHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlrZjlnKjmiYvlhpl3aWR0aOi1i+WAvOe7mXBhbmXkvJrmnInpl67pophcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9leHBhbmREaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v6K6+572u5LqG5bGV5byA6Led56a7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFsRXhwYW5kRGlzYXRhbmNlID0gdGhpcy5fZXhwYW5kRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5rKh5pyJ6K6+572u77yM5oyJ54Wn5LmL5YmN55qE6K6w5b2V77yM5aaC5p6c5a2Y5Zyo5bCx5oyJ54Wn6K6w5b2V55qE5YC877yM5aaC5p6c5rKh5pyJ5bCx5oyJ54Wn6buY6K6k55qE5YC8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFsRXhwYW5kRGlzYXRhbmNlID0gdGhpcy5fYmVmb3JlQ29sbGFwc2VEaXN0YW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2JlZm9yZUNvbGxhcHNlRGlzdGFuY2UgKyBcInB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRlZmF1bHRFeHBhbmREaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbCxcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9wLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVhbEV4cGFuZERpc2F0YW5jZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgLy8g5pS26LW3XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVDb2xsYXBzZURpc3RhbmNlID1cclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQcm9wID09IFwiaGVpZ2h0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmVsLm9mZnNldEhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWwsIGNoYW5nZVByb3AsIFwiMHB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5biD5bGA5o6S5YiX5LiN5LiA5qC377yM5b2x5ZON5Yiw5piv6K6+572u5a695bqm6L+Y5piv6auY5bqmXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U3R5bGVQcm9wKCkge1xyXG4gICAgICAgIGxldCBob3JpID0gW1wibGVmdFwiLCBcInJpZ2h0XCJdLmZpbmRJbmRleChcclxuICAgICAgICAgICAgaXRlbSA9PiBpdGVtID09IHRoaXMuY29sbGFwc2VQb3NpdGlvblxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGhvcmkgPiAtMSA/IFwid2lkdGhcIiA6IFwiaGVpZ2h0XCI7XHJcbiAgICB9XHJcbn1cclxuIl19