!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("date-fns"),require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("@farris/ui-common/date",["exports","date-fns","@angular/common","@angular/core"],t):t((e.farris=e.farris||{},e.farris["ui-common"]=e.farris["ui-common"]||{},e.farris["ui-common"].date={}),e.dateFns,e.ng.common,e.ng.core)}(this,function(e,i,t,r){"use strict";var a=(n.prototype.makePattern=function(e){var r=this;return e=e.replace(/_([A-Z][A-Z0-9]+)_/g,function(e,t){return r.regexes[t]}),new RegExp(e,"i")},n.prototype.getMonthByName=function(e){return this.MONTHNAMES_LOOKUP[String(e).slice(0,3).toLowerCase()]},n.prototype.getWeekdayByName=function(e){return this.DAYNAMES_LOOKUP[String(e).slice(0,3).toLowerCase()]},n.prototype.zeroPad=function(e,t){switch(t-String(e).length){case 2:return"00"+e;case 1:return"0"+e}return e},n.prototype.create=function(e){if(void 0===e)return Date.now();if(e instanceof Date)return e;var t=arguments;switch(t.length){case 1:if("[object Number]"==Object.prototype.toString.call(e))return new Date(e);if(""===(e=(e=String(e).replace(/^\s*(.*)\s*$/,"$1")).replace(/\s{2,}/g," ")))return Date.now();for(var r,a,n,o,i,s,u=0;r=this.patterns[u++];)if(s="string"==typeof r[0]?(i=r[1],r[2]):(i=r[0],r[1]),o=e.match(i))if("function"==typeof s){if((n=s(o,e))instanceof Date)return n}else if(a=Date.parse(e.replace(i,s)),!isNaN(a))return new Date(a);return NaN;case 2:return new Date(t[0],t[1],1);case 3:return new Date(t[0],t[1],t[2]);case 4:return new Date(t[0],t[1],t[2],t[3]);case 5:return new Date(t[0],t[1],t[2],t[3],t[4]);case 6:return new Date(t[0],t[1],t[2],t[3],t[4],t[5]);default:return new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}},n);function n(){var n=this;this.MONTHNAMES="January February March April May June July August September October November December".split(" "),this.MONTHNAMES_LOOKUP={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},this.ABBR_MONTHNAMES="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),this.DAYNAMES="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),this.DAYNAMES_LOOKUP={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},this.ABBR_DAYNAMES="Sun Mon Tue Wed Thu Fri Sat".split(" "),this.regexes={YEAR:"[1-9]\\d{3}",MONTH:"1[0-2]|0?[1-9]",MONTH2:"1[0-2]|0[1-9]",MONTHNAME:"jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december",DAYNAME:"mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday|sun|sunday",DAY:"3[01]|[12]\\d|0?[1-9]",DAY2:"3[01]|[12]\\d|0[1-9]",TIMEZONE:"[+-][01]\\d\\:?[0-5]\\d",H24:"[01]\\d|2[0-3]",MIN:"[0-5]\\d",SEC:"[0-5]\\d",MS:"\\d{3,}",H12:"0?[1-9]|1[012]",AMPM:"am|pm",UNIT:"year|month|week|day|hour|minute|second|millisecond"},this.patterns=[["iso_8601",this.makePattern("^(_YEAR_)-(_MONTH_)-(_DAY_)$"),"$2/$3/$1"],["us",this.makePattern("^(_MONTH_)([\\/-])(_DAY_)\\2(_YEAR_)$"),"$1/$3/$4"],["world",this.makePattern("^(_DAY_)([\\/\\.])(_MONTH_)\\2(_YEAR_)$"),"$3/$1/$4"],["chicago",this.makePattern("^(?:(?:_DAYNAME_),? )?(_DAY_)([ -])(_MONTHNAME_)\\2(_YEAR_)$"),"$3 $1, $4"],["conversational",this.makePattern("^(?:(?:_DAYNAME_),? )?(_MONTHNAME_) (_DAY_),? (_YEAR_)$"),"$1 $2, $3"],["month_day_time_year",this.makePattern("^(?:_DAYNAME_) (_MONTHNAME_) (_DAY_) ((?:_H24_)\\:(?:_MIN_)(?:\\:_SEC_)?) (_TIMEZONE_) (_YEAR_)$"),function(e){var t=n.zeroPad(n.getMonthByName(e[1]),2),r=n.zeroPad(e[2],2),a=n.create(e[5]+"-"+t+"-"+r+"T"+e[3]+e[4]);return!isNaN(a)&&a}],["unix",/^@(-?\d+)$/,function(e){return n.create(1e3*parseInt(e[1],10))}],["24_hour",this.makePattern("^(?:(.+?)(?: |T))?(_H24_)\\:(_MIN_)(?:\\:(_SEC_)(?:\\.(_MS_))?)? ?(?:GMT)?(_TIMEZONE_)?(?: \\([A-Z]+\\))?$"),function(e){var t;if(e[1]){if(t=n.create(e[1]),isNaN(t))return!1}else(t=new Date).setMilliseconds(0);return t.setHours(parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]||0)),e[5]&&t.setMilliseconds(+String(e[5]).slice(0,3)),e[6]&&t.setUTCOffsetString(e[6]),t}],["12_hour",this.makePattern("^(?:(.+) )?(_H12_)(?:\\:(_MIN_)(?:\\:(_SEC_))?)? ?(_AMPM_)$"),function(e){var t;if(e[1]){if(t=n.create(e[1]),isNaN(t))return!1}else(t=new Date).setMilliseconds(0);var r=parseFloat(e[2]);return r="am"==e[5].toLowerCase()?12==r?0:r:12==r?12:r+12,t.setHours(r,parseFloat(e[3]||0),parseFloat(e[4]||0)),t}]]}var o=["second","minute","hour","day","week","month","year"];var s=["秒","分钟","小时","天","周","个月","年"];var u=[60,60,24,7,365/7/12,12];function c(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}var d=function(e,t,r){return function o(e,t){for(var r=e<0?1:0,a=e=Math.abs(e),n=0;u[n]<=e&&n<u.length;n++)e/=u[n];return(0===(n*=2)?9:1)<(e=Math.floor(e))&&(n+=1),t(e,n,a)[r].replace("%s",e.toString())}(function a(e,t){return((t?c(t):new Date)-c(e))/1e3}(e,r&&r.relativeDate),y(t))},f={},p=function(e,t){f[e]=t},y=function(e){return f[e]||f["zh-CHS"]};p("en",function M(e,t){if(0===t)return["just now","right now"];var r=o[Math.floor(t/2)];return 1<e&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]}),p("zh-CHS",function v(e,t){if(0===t)return["刚刚","片刻后"];var r=s[~~(t/2)];return[e+" "+r+"前",e+" "+r+"后"]}),p("zh-CHT",function N(e,t){return[["剛剛","片刻後"],["%s 秒前","%s 秒後"],["1 分鐘前","1 分鐘後"],["%s 分鐘前","%s 分鐘後"],["1 小時前","1 小時後"],["%s 小時前","%s 小時後"],["1 天前","1 天後"],["%s 天前","%s 天後"],["1 週前","1 週後"],["%s 週前","%s 週後"],["1 個月前","1 個月後"],["%s 個月前","%s 個月後"],["1 年前","1 年後"],["%s 年前","%s 年後"]][t]});var D=(l.prototype.relativeTime=function(e,t){return void 0===t&&(t="zh-CHS"),e?d(e,t):""},l.prototype.addDays=function(e,t){return i.addDays(e,t)},l.prototype.subDays=function(e,t){return i.subDays(e,t)},l.prototype.differenceInMinutes=function(e,t){return i.differenceInMinutes(e,t)},l.prototype.formatTo=function(e,t){if(void 0===t&&(t="yyyy-MM-dd"),!e)return"";if("string"==typeof e&&0===e.indexOf("0001"))return"";if(e instanceof Date)return i.format(e,t);var r=i.parseISO(e);if("Invalid Date"==r&&(r=this.createDate(e)||new Date(e)),i.isValid(r)){var a=i.parseISO(i.format(r,"yyyy-MM-dd HH:mm:ss"));return i.format(a,t)}if(0!==t.indexOf("HH")&&0!==t.indexOf("hh"))return"";var n=e.match(/\d*/g).filter(function(e){return""!==e}).join(":");"HH"!==t&&"hh"!==t||(t=t+=":mm");var o=i.parseISO("2022-11-25 "+n);return i.format(o,t)},l.prototype.createDate=function(e){return this.$D.create(e)},l.prototype.formatDate=function(e,t){void 0===e&&(e=new Date),void 0===t&&(t="一");var r=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=e.getDay();"一"===t&&(o?o-=1:o=6);var i=["一","二","三","四","五","六","日"][o],s={date:new Date(e),dateStr:r+"-"+a.toString().padStart(2,"0")+"-"+n.toString().padStart(2,"0"),year:r,month:a,day:n,week:i,isToday:!1},u=new Date;return u.getFullYear()===r&&u.getMonth()+1===a&&u.getDate()===n&&(s.isToday=!0),s},l.prototype.setDate=function(e,t,r){void 0===e&&(e=new Date),void 0===t&&(t=7),void 0===r&&(r="一");var a=[],n=-1*(e.getDay()-1);"日"===r&&(n-=1),e=this.getDateByDate(e,n);for(var o=0;o<t;o++)a.push(this.formatDate(0==o?e:this.getDateByDate(e,1),r));return a},l.prototype.getDateByDate=function(e,t){return void 0===e&&(e=new Date),void 0===t&&(t=0),e.setDate(e.getDate()+t),e},l.prototype.getWeekDate=function(e,t){var r=e.baselineDate,a=void 0===r?new Date:r,n=e.range,o=void 0===n?0:n,i=e.step,s=void 0===i?7:i;return void 0===t&&(t="一"),this.setDate(this.getDateByDate(a,o),s,t)},l.prototype.getYearWeek=function(e,t,r){var a=new Date(e,parseInt(t)-1,r),n=new Date(e,0,1),o=Math.round((a.valueOf()-n.valueOf())/864e5);return Math.ceil((o+(n.getDay()+1-1))/7)},l.prototype.getMonthWeek=function(e,t,r){var a=new Date(e,parseInt(t)-1,r),n=a.getDay(),o=a.getDate();return 0==n&&(n=7),{getMonth:a.getMonth()+1,getYear:a.getFullYear(),getWeek:Math.ceil((o+6-n)/7)}},l.prototype.getNowWeekTime=function(e,t){e.setDate(e.getDate()-(e.getDay()+6)%7);var r={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};e.setDate(e.getDate()+6);var a={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};if("一"===t)return{begin:r,end:a};0!=e.getDay()&&e.setDate(e.getDate()-e.getDay());var n={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()};return e.setDate(e.getDate()+6-e.getDay()),{begin:n,end:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},l.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[]},l.ngInjectableDef=r.defineInjectable({factory:function(){return new l},token:l,providedIn:"root"}),l);function l(){this.$D=null,this.$D=new a}var g=(h.prototype.transform=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(e){var a="yyyy-MM-dd";if(t&&t.length&&(a=t[0]),"timeago"!==a)return this.dateSer.formatTo(e,a);var n=t[1]||"zh-CHS";return this.dateSer.relativeTime(e,n)}},h.decorators=[{type:r.Pipe,args:[{name:"dateformat"}]}],h.ctorParameters=function(){return[{type:D}]},h);function h(e){this.dateSer=e}var m=(_.forRoot=function(){return{ngModule:_,providers:[D]}},_.decorators=[{type:r.NgModule,args:[{declarations:[g],imports:[t.CommonModule],exports:[g],providers:[]}]}],_);function _(){}e.DateHelperModule=m,e.DateTimeHelperService=D,e.DateTimeFormatPipe=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-common-date.umd.min.js.map