import * as Vue from 'vue';
import { ref, watch, unref, onMounted, nextTick, onActivated, onUnmounted, onDeactivated, getCurrentInstance, reactive, createApp, defineComponent, inject, provide, openBlock, createBlock, resolveComponent, createCommentVNode, renderSlot, toDisplayString, createVNode, computed, Fragment, withCtx, renderList, withModifiers, withDirectives, vModelText, vModelDynamic, createTextVNode, useContext, mergeProps, isVNode, Transition, vShow, Teleport, resolveDynamicComponent, createSlots, onBeforeUpdate, onBeforeMount, createStaticVNode, onBeforeUnmount } from 'vue';
import dayjs from 'dayjs';
import { helperNameMap, RESOLVE_COMPONENT, RESOLVE_DIRECTIVE, assert, TO_DISPLAY_STRING, CREATE_COMMENT, WITH_DIRECTIVES, OPEN_BLOCK, CREATE_BLOCK, CREATE_VNODE, WITH_CTX, isSimpleIdentifier, SET_BLOCK_TRACKING, baseParse, getBaseTransformPreset, transform } from '@vue/compiler-core';
import { DatetimePicker, List } from 'vant';
import Quill from 'quill';

function useLazyRender(show) {
  var inited = ref(false);
  watch(show, function (value) {
    if (value) {
      inited.value = value;
    }
  }, {
    immediate: true
  });
  return function (render) {
    return function () {
      return inited.value ? render() : null;
    };
  };
}

function stopPropagation(event) {
  event.stopPropagation();
}
function preventDefault(event, isStopPropagation) {
  if (typeof event.cancelable !== 'boolean' || event.cancelable) {
    event.preventDefault();
  }

  if (isStopPropagation) {
    stopPropagation(event);
  }
}

var inBrowser = typeof window !== 'undefined';
function isDef(val) {
  return val !== undefined && val !== null;
}
function isNull(val) {
  return val === null;
}
function isUndefined(val) {
  return val === undefined;
}
function isString(val) {
  return typeof val === 'string';
}
function isNumber(val) {
  return typeof val === 'number';
}
var isArray = Array.isArray;
function isSymbol(val) {
  return typeof val === 'symbol';
}
function isFunction(val) {
  return typeof val === 'function';
}
function isObject(val) {
  return val !== null && typeof val === 'object';
}
function isPromise(val) {
  return isObject(val) && isFunction(val.then) && isFunction(val["catch"]);
}
function isNumeric(val) {
  return /^\d+(\.\d+)?$/.test(val);
}
function isDate(val) {
  return typeof val === 'object' && val instanceof Date;
}
function getType(val) {
  if (isString(val)) {
    return 'string';
  } else if (isNumber(val)) {
    return 'number';
  } else if (isDate(val)) {
    return 'date';
  } else if (isNull(val)) {
    return 'null';
  } else if (isUndefined(val)) {
    return 'undefined';
  } else if (isArray(val)) {
    return 'array';
  } else if (isSymbol(val)) {
    return 'symbol';
  } else if (isFunction(val)) {
    return 'function';
  } else if (isPromise(val)) {
    return 'promise';
  } else if (isObject(val)) {
    return 'object';
  }
}

function noop() {}
function makeMap(str, expectsLowerCase) {
  if (expectsLowerCase === void 0) {
    expectsLowerCase = false;
  }

  var map = Object.create(null);
  var list = str.split(',');

  for (var i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }

  return expectsLowerCase ? function (val) {
    return !!map[val.toLowerCase()];
  } : function (val) {
    return !!map[val];
  };
}
function addUnit(value) {
  if (!isDef(value)) {
    return undefined;
  }

  value = String(value);
  return isNumeric(value) ? value + "px" : value;
}
var getValue = function getValue(field, data, safe) {
  if (safe === void 0) {
    safe = false;
  }

  if (!data) {
    return '';
  }

  var resultVal = '';

  if (field.indexOf('.') === -1) {
    resultVal = data[field];
  } else {
    resultVal = field.split('.').reduce(function (obj, key) {
      if (obj) {
        return obj[key];
      } else {
        return null;
      }
    }, data);
  }

  if (safe) {
    return formatterValue(resultVal);
  } else {
    return resultVal;
  }
};
var escapeHtml = function escapeHtml(str) {
  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/\'/g, '&#39;').replace(/\//g, '&#x2F;');
};

var formatterValue = function formatterValue(val) {
  if (val === null || val === undefined || val === '') {
    return '';
  }

  if (typeof val === 'string') {
    return escapeHtml(val);
  }

  return val;
};

var getPosition = function getPosition(target, wrapper) {
  if (wrapper === void 0) {
    wrapper = document.body;
  }

  var initPosition = {
    top: 0,
    left: 0,
    bottom: 0,
    right: 0,
    height: 0,
    width: 0
  };

  var _target = unref(target);

  var _wrapper = unref(wrapper);

  var _targetPosition = _target ? _target.getBoundingClientRect() : initPosition;

  var _wrapperPosition = _wrapper ? _wrapper.getBoundingClientRect() : initPosition;

  return {
    top: _targetPosition.top - _wrapperPosition.top,
    bottom: _wrapperPosition.bottom - _targetPosition.bottom,
    left: _targetPosition.left - _wrapperPosition.left,
    right: _wrapperPosition.right - _targetPosition.right,
    height: _targetPosition.height,
    width: _targetPosition.width
  };
};
var getDeviation = function getDeviation(root, placement) {
  if (placement === void 0) {
    placement = 'bottomLeft';
  }

  var result = {};
  var rootPosition = getPosition(root);

  switch (placement) {
    case 'left':
      result = {
        top: rootPosition.top,
        right: rootPosition.right + rootPosition.width
      };
      break;

    case 'right':
      result = {
        top: rootPosition.top,
        left: rootPosition.left + rootPosition.width
      };
      break;

    case 'top':
      result = {
        bottom: rootPosition.bottom + rootPosition.height,
        left: rootPosition.left
      };
      break;

    case 'bottom':
      result = {
        top: rootPosition.top + rootPosition.height,
        left: rootPosition.left
      };
      break;

    case 'topLeft':
      result = {
        bottom: rootPosition.bottom + rootPosition.height,
        left: rootPosition.left
      };
      break;

    case 'topRight':
      result = {
        bottom: rootPosition.bottom + rootPosition.height,
        right: rootPosition.right
      };
      break;

    case 'bottomLeft':
      result = {
        top: rootPosition.top + rootPosition.height,
        left: rootPosition.left
      };
      break;

    case 'bottomRight':
      result = {
        top: rootPosition.top + rootPosition.height,
        right: rootPosition.right
      };
      break;

    default:
      result = rootPosition;
  }

  return result;
};
var getRectByRef = function getRectByRef(ref) {
  var target = unref(ref);
  return target === null || target === void 0 ? void 0 : target.getBoundingClientRect();
};
var HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' + 'header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,' + 'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' + 'data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,' + 'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' + 'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' + 'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' + 'option,output,progress,select,textarea,details,dialog,menu,' + 'summary,template,blockquote,iframe,tfoot';
var isHTMLTag = makeMap(HTML_TAGS);

function isHidden(elementRef) {
  var el = unref(elementRef);

  if (!el) {
    return false;
  }

  var style = window.getComputedStyle(el);
  var hidden = style.display === 'none';
  var parentHidden = el.offsetParent === null && style.position !== 'fixed';
  return hidden || parentHidden;
}

function onMountedOrActivated(hook) {
  var mounted;
  onMounted(function () {
    hook();
    nextTick(function () {
      mounted = true;
    });
  });
  onActivated(function () {
    if (mounted) {
      hook();
    }
  });
}

var format = function format(date, _format) {
  return dayjs(date).format(initFormatForDayjs(_format));
};
var parse = function parse(date, format) {
  return isDate(date) ? date : dayjs(date, format).toDate();
};
var initFormatForDayjs = function initFormatForDayjs(format) {
  if (!format) {
    return 'YYYY-MM-DD';
  }

  var formatArr = format.split(' ');
  var dateFormat = formatArr[0] ? formatArr[0] : '';
  var timeFormat = formatArr[1] ? ' ' + formatArr[1] : '';
  return "" + dateFormat.toUpperCase() + timeFormat;
};
function isEqualDate(prevDate, nextDate) {
  nextDate = nextDate ? nextDate : new Date();
  return dayjs(prevDate).isSame(nextDate, 'date');
}
function isSameDay(prevDate, nextDate) {
  return dayjs(prevDate).isSame(nextDate, 'day');
}
function isBefore(prevDate, nextDate, unit) {
  if (unit === void 0) {
    unit = 'milliseconds';
  }

  nextDate = nextDate ? nextDate : new Date();
  return dayjs(prevDate).isBefore(nextDate, unit);
}
function isAfter(prevDate, nextDate, unit) {
  if (unit === void 0) {
    unit = 'milliseconds';
  }

  nextDate = nextDate ? nextDate : new Date();
  return dayjs(prevDate).isAfter(nextDate, unit);
}
function isValidDate(date) {
  return date instanceof Date && !isNaN(date.getTime());
}

function trimExtraChar(value, _char, regExp) {
  var index = value.indexOf(_char);

  if (index === -1) {
    return value;
  }

  if (_char === '-' && index !== 0) {
    return value.slice(0, index);
  }

  return value.slice(0, index + 1) + value.slice(index).replace(regExp, '');
}

var slice = function slice(value, begin, end) {
  if (begin === void 0) {
    begin = 0;
  }

  if (!value) {
    return '';
  }

  var innerValue = String(value);
  end = end ? end : innerValue.length;
  return {
    before: innerValue.slice(0, begin),
    target: innerValue.slice(begin, end),
    after: innerValue.slice(end, innerValue.length)
  };
};

function toUpperCase(value, begin, end) {
  if (begin === void 0) {
    begin = 0;
  }

  var result = slice(value, begin, end);
  return result ? result.before + result.target.toUpperCase() + result.after : result;
}
function toLowerCase(value, begin, end) {
  if (begin === void 0) {
    begin = 0;
  }

  var result = slice(value, begin, end);
  return result ? result.before + result.target.toLowerCase() + result.after : result;
}

function formatToNumber(value, allowDot) {
  value = isDef(value) ? value : '';
  var regExp = /[^-0-9]/g;
  value = trimExtraChar(value, '-', /-/g);

  if (allowDot) {
    value = trimExtraChar(value, '.', /\./g);
    regExp = /[^-0-9.]/g;
  } else {
    value = value.split('.')[0];
  }

  return value = value.replace(regExp, '');
}
function parseFloat(value, precision) {
  if (precision === void 0) {
    precision = 0;
  }

  return Number.parseFloat(value ? String(value) : '0').toFixed(precision);
}
function range(num, min, max) {
  return Math.min(Math.max(num, min), max);
}

function VueCodeGenerate(ast) {
  var context = createCodegenContext();
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent,
      newline = context.newline;
  var functionName = "render";
  var args = ['_ctx', '_cache'];
  var signature = args.join(', ');
  genModulePreamble(ast, context);
  push("return ");
  push("function " + functionName + "(" + signature + ") {");
  indent();
  push("const { props } = _ctx");
  newline();

  if (ast.components.length) {
    genAssets(ast.components, 'component', context);

    if (ast.directives.length || ast.temps > 0) {
      newline();
    }
  }

  if (ast.directives.length) {
    console.log(ast);
    genAssets(ast.directives, 'directive', context);

    if (ast.temps > 0) {
      newline();
    }
  }

  newline();
  push("return ");

  if (ast.codegenNode) {
    genNode(ast.codegenNode, context);
  } else {
    push("null");
  }

  deindent();
  push("}");
  return {
    ast: ast,
    code: context.code
  };
}

function createCodegenContext() {
  var context = {
    code: "",
    indentLevel: 0,
    pure: false,
    helper: function helper(key) {
      return "_" + helperNameMap[key];
    },
    push: function push(code) {
      context.code += code;
    },
    indent: function indent() {
      _newline(++context.indentLevel);
    },
    deindent: function deindent(withoutNewLine) {
      if (withoutNewLine === void 0) {
        withoutNewLine = false;
      }

      if (withoutNewLine) {
        --context.indentLevel;
      } else {
        _newline(--context.indentLevel);
      }
    },
    newline: function newline() {
      _newline(context.indentLevel);
    }
  };

  function _newline(n) {
    context.push('\n' + "  ".repeat(n));
  }

  return context;
}

function genModulePreamble(ast, context) {
  var push = context.push,
      newline = context.newline;

  if (ast.helpers.length) {
    push("const { " + ast.helpers.map(function (s) {
      return helperNameMap[s] + ": _" + helperNameMap[s];
    }).join(', ') + " } = Vue\n");
  }

  newline();
}

function genAssets(assets, type, _ref) {
  var helper = _ref.helper,
      push = _ref.push,
      newline = _ref.newline;
  var resolver = helper(type === 'component' ? RESOLVE_COMPONENT : RESOLVE_DIRECTIVE);

  for (var i = 0; i < assets.length; i++) {
    var id = assets[i];
    push("const " + toValidAssetId(id, type) + " = " + resolver + "(" + JSON.stringify(id) + ")");

    if (i < assets.length - 1) {
      newline();
    }
  }
}

var PURE_ANNOTATION = "/*#__PURE__*/";

function genNode(node, context) {
  if (isString(node)) {
    context.push(node);
    return;
  }

  if (isSymbol(node)) {
    context.push(context.helper(node));
    return;
  }

  switch (node.type) {
    case 1:
    case 9:
    case 11:
      assert(node.codegenNode != null, "Codegen node is missing for element/if/for node. " + "Apply appropriate transforms first.");
      genNode(node.codegenNode, context);
      break;

    case 2:
      genText(node, context);
      break;

    case 4:
      genExpression(node, context);
      break;

    case 5:
      genInterpolation(node, context);
      break;

    case 12:
      genNode(node.codegenNode, context);
      break;

    case 8:
      genCompoundExpression(node, context);
      break;

    case 3:
      genComment(node, context);
      break;

    case 13:
      genVNodeCall(node, context);
      break;

    case 14:
      genCallExpression(node, context);
      break;

    case 15:
      genObjectExpression(node, context);
      break;

    case 17:
      genArrayExpression(node, context);
      break;

    case 18:
      genFunctionExpression(node, context);
      break;

    case 19:
      genConditionalExpression(node, context);
      break;

    case 20:
      genCacheExpression(node, context);
      break;

    case 21:
      genNodeList(node.body, context, true, false);
      break;

    case 22:
      genTemplateLiteral(node, context);
      break;

    case 23:
      genIfStatement(node, context);
      break;

    case 24:
      genAssignmentExpression(node, context);
      break;

    case 25:
      genSequenceExpression(node, context);
      break;

    case 26:
      genReturnStatement(node, context);
      break;

    case 10:
      break;

    default:
      {
        assert(false, "unhandled codegen node type: " + node.type);
        var exhaustiveCheck = node;
        return exhaustiveCheck;
      }
  }
}

function genText(node, context) {
  context.push(JSON.stringify(node.content), node);
}

function genExpression(node, context) {
  var content = node.content,
      isStatic = node.isStatic;
  context.push(isStatic ? JSON.stringify(content) : content, node);
}

function genInterpolation(node, context) {
  var push = context.push,
      helper = context.helper,
      pure = context.pure;
  if (pure) push(PURE_ANNOTATION);
  push(helper(TO_DISPLAY_STRING) + "(");
  genNode(node.content, context);
  push(")");
}

function genCompoundExpression(node, context) {
  for (var i = 0; i < node.children.length; i++) {
    var child = node.children[i];

    if (isString(child)) {
      context.push(child);
    } else {
      genNode(child, context);
    }
  }
}

function genExpressionAsPropertyKey(node, context) {
  var push = context.push;

  if (node.type === 8) {
    push("[");
    genCompoundExpression(node, context);
    push("]");
  } else if (node.isStatic) {
    var text = isSimpleIdentifier(node.content) ? node.content : JSON.stringify(node.content);
    push(text, node);
  } else {
    push("[" + node.content + "]", node);
  }
}

function genComment(node, context) {
  {
    var push = context.push,
        helper = context.helper,
        pure = context.pure;

    if (pure) {
      push(PURE_ANNOTATION);
    }

    push(helper(CREATE_COMMENT) + "(" + JSON.stringify(node.content) + ")", node);
  }
}

function genNodeList(nodes, context, multilines, comma) {
  if (multilines === void 0) {
    multilines = false;
  }

  if (comma === void 0) {
    comma = true;
  }

  var push = context.push,
      newline = context.newline;

  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];

    if (isString(node)) {
      push(node);
    } else if (isArray(node)) {
      genNodeListAsArray(node, context);
    } else {
      genNode(node, context);
    }

    if (i < nodes.length - 1) {
      if (multilines) {
        comma && push(',');
        newline();
      } else {
        comma && push(', ');
      }
    }
  }
}

function genVNodeCall(node, context) {
  var push = context.push,
      helper = context.helper,
      pure = context.pure;
  var tag = node.tag,
      props = node.props,
      children = node.children,
      patchFlag = node.patchFlag,
      dynamicProps = node.dynamicProps,
      directives = node.directives,
      isBlock = node.isBlock,
      disableTracking = node.disableTracking;

  if (directives) {
    push(helper(WITH_DIRECTIVES) + "(");
  }

  if (isBlock) {
    push("(" + helper(OPEN_BLOCK) + "(" + (disableTracking ? "true" : "") + "), ");
  }

  if (pure) {
    push(PURE_ANNOTATION);
  }

  push(helper(isBlock ? CREATE_BLOCK : CREATE_VNODE) + "(", node);
  genNodeList(genNullableArgs([tag, props, children, patchFlag, dynamicProps]), context);
  push(")");

  if (isBlock) {
    push(")");
  }

  if (directives) {
    console.log(directives);
    push(", ");
    genNode(directives, context);
    push(")");
  }
}

function genNullableArgs(args) {
  var i = args.length;

  while (i--) {
    if (args[i] != null) break;
  }

  return args.slice(0, i + 1).map(function (arg) {
    return arg || "null";
  });
}

function genCallExpression(node, context) {
  var push = context.push,
      helper = context.helper,
      pure = context.pure;
  var callee = isString(node.callee) ? node.callee : helper(node.callee);

  if (pure) {
    push(PURE_ANNOTATION);
  }

  push(callee + "(", node);
  genNodeList(node.arguments, context);
  push(")");
}

function genObjectExpression(node, context) {
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent,
      newline = context.newline;
  var properties = node.properties;

  if (!properties.length) {
    push("{}", node);
    return;
  }

  var multilines = properties.length > 1 || properties.some(function (p) {
    return p.value.type !== 4;
  });
  push(multilines ? "{" : "{ ");
  multilines && indent();

  for (var i = 0; i < properties.length; i++) {
    var _properties$i = properties[i],
        key = _properties$i.key,
        value = _properties$i.value;
    genExpressionAsPropertyKey(key, context);
    push(": ");
    genNode(value, context);

    if (i < properties.length - 1) {
      push(",");
      newline();
    }
  }

  multilines && deindent();
  push(multilines ? "}" : " }");
}

function isText$1(n) {
  return isString(n) || n.type === 4 || n.type === 2 || n.type === 5 || n.type === 8;
}

function genNodeListAsArray(nodes, context) {
  var multilines = nodes.length > 3 || nodes.some(function (n) {
    return isArray(n) || !isText$1(n);
  });
  context.push("[");
  multilines && context.indent();
  genNodeList(nodes, context, multilines);
  multilines && context.deindent();
  context.push("]");
}

function genArrayExpression(node, context) {
  genNodeListAsArray(node.elements, context);
}

function genFunctionExpression(node, context) {
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent;
  var params = node.params,
      returns = node.returns,
      body = node.body,
      newline = node.newline,
      isSlot = node.isSlot;

  if (isSlot) {
    push("_" + helperNameMap[WITH_CTX] + "(");
  }

  push("(", node);

  if (isArray(params)) {
    genNodeList(params, context);
  } else if (params) {
    genNode(params, context);
  }

  push(") => ");

  if (newline || body) {
    push("{");
    indent();
  }

  if (returns) {
    if (newline) {
      push("return ");
    }

    if (isArray(returns)) {
      genNodeListAsArray(returns, context);
    } else {
      genNode(returns, context);
    }
  } else if (body) {
    genNode(body, context);
  }

  if (newline || body) {
    deindent();
    push("}");
  }
}

function genConditionalExpression(node, context) {
  var test = node.test,
      consequent = node.consequent,
      alternate = node.alternate,
      needNewline = node.newline;
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent,
      newline = context.newline;

  if (test.type === 4) {
    var needsParens = !isSimpleIdentifier(test.content);
    needsParens && push("(");
    genExpression(test, context);
    needsParens && push(")");
  } else {
    push("(");
    genNode(test, context);
    push(")");
  }

  needNewline && indent();
  context.indentLevel++;
  needNewline || push(" ");
  push("? ");
  genNode(consequent, context);
  context.indentLevel--;
  needNewline && newline();
  needNewline || push(" ");
  push(": ");
  var isNested = alternate.type === 19;

  if (!isNested) {
    context.indentLevel++;
  }

  genNode(alternate, context);

  if (!isNested) {
    context.indentLevel--;
  }

  needNewline && deindent(true);
}

function genCacheExpression(node, context) {
  var push = context.push,
      helper = context.helper,
      indent = context.indent,
      deindent = context.deindent,
      newline = context.newline;
  push("_cache[" + node.index + "] || (");

  if (node.isVNode) {
    indent();
    push(helper(SET_BLOCK_TRACKING) + "(-1),");
    newline();
  }

  push("_cache[" + node.index + "] = ");
  genNode(node.value, context);

  if (node.isVNode) {
    push(",");
    newline();
    push(helper(SET_BLOCK_TRACKING) + "(1),");
    newline();
    push("_cache[" + node.index + "]");
    deindent();
  }

  push(")");
}

function genTemplateLiteral(node, context) {
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent;
  push('`');
  var l = node.elements.length;
  var multilines = l > 3;

  for (var i = 0; i < l; i++) {
    var e = node.elements[i];

    if (isString(e)) {
      push(e.replace(/(`|\$|\\)/g, '\\$1'));
    } else {
      push('${');
      if (multilines) indent();
      genNode(e, context);
      if (multilines) deindent();
      push('}');
    }
  }

  push('`');
}

function genIfStatement(node, context) {
  var push = context.push,
      indent = context.indent,
      deindent = context.deindent;
  var test = node.test,
      consequent = node.consequent,
      alternate = node.alternate;
  push("if (");
  genNode(test, context);
  push(") {");
  indent();
  genNode(consequent, context);
  deindent();
  push("}");

  if (alternate) {
    push(" else ");

    if (alternate.type === 23) {
      genIfStatement(alternate, context);
    } else {
      push("{");
      indent();
      genNode(alternate, context);
      deindent();
      push("}");
    }
  }
}

function genAssignmentExpression(node, context) {
  genNode(node.left, context);
  context.push(" = ");
  genNode(node.right, context);
}

function genSequenceExpression(node, context) {
  context.push("(");
  genNodeList(node.expressions, context);
  context.push(")");
}

function genReturnStatement(_ref2, context) {
  var returns = _ref2.returns;
  context.push("return ");

  if (isArray(returns)) {
    genNodeListAsArray(returns, context);
  } else {
    genNode(returns, context);
  }
}

function toValidAssetId(name, type) {
  return "_" + type + "_" + name.replace(/[^\w]/g, '_');
}

var toMultidimensional = function toMultidimensional(arr, num) {
  if (num === void 0) {
    num = 0;
  }

  var resArr = [];
  arr.forEach(function (item, index) {
    var page = Math.floor(index / num);

    if (!resArr[page]) {
      resArr[page] = [];
    }

    resArr[page].push(item);
  });
  return resArr;
};

var throttle = function throttle(fn, wait, options) {
  if (options === void 0) {
    options = {};
  }

  var timeout = null;
  var previous = 0;

  var throttled = function throttled() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var now = +new Date();

    if (!previous && options.leading === false) {
      previous = now;
    }

    var remaining = wait - (now - previous);

    if (remaining <= 0 || remaining > wait) {
      if (timeout) {
        clearTimeout(timeout);
        timeout = null;
      }

      previous = now;
      fn.apply(void 0, args);
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout(function () {
        previous = options.leading === false ? 0 : +new Date();
        timeout = null;
        console.log('2');
        fn.apply(void 0, args);
      }, remaining);
    }
  };

  throttled.cancel = function () {
    clearTimeout(timeout);
    previous = 0;
    timeout = null;
  };

  return throttled;
};

var debounce = function debounce(fn, wait, immediate) {
  var timeout;

  var debounced = function debounced() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (timeout) {
      clearTimeout(timeout);
    }

    if (immediate) {
      timeout = setTimeout(function () {
        timeout = null;
        fn.apply(void 0, args);
      }, wait);

      if (!timeout) {
        fn(args);
      }
    } else {
      timeout = setTimeout(function () {
        fn.apply(void 0, args);
      }, wait);
    }
  };

  debounced.cancel = function () {
    clearTimeout(timeout);
    timeout = null;
  };

  return debounced;
};

var supportsPassive = false;
function useEventListener(type, listener, options) {
  if (options === void 0) {
    options = {};
  }

  if (!inBrowser) {
    return;
  }

  var _options = options,
      _options$target = _options.target,
      target = _options$target === void 0 ? window : _options$target,
      _options$passive = _options.passive,
      _options$capture = _options.capture,
      capture = _options$capture === void 0 ? false : _options$capture;
  var attached = false;

  var add = function add() {
    var element = unref(target);

    if (element && !attached) {
      element.addEventListener(type, listener,  capture);
      attached = true;
    }
  };

  var remove = function remove() {
    var element = unref(target);

    if (element && attached) {
      element.removeEventListener(type, listener, capture);
      attached = false;
    }
  };

  onUnmounted(remove);
  onDeactivated(remove);
  onMountedOrActivated(add);
}

function useClickAway(target, listener, options) {
  if (options === void 0) {
    options = {};
  }

  if (!inBrowser) {
    return;
  }

  var _options = options,
      _options$eventName = _options.eventName,
      eventName = _options$eventName === void 0 ? 'click' : _options$eventName,
      _options$active = _options.active,
      active = _options$active === void 0 ? true : _options$active;

  var onClick = function onClick(event) {
    var _active = unref(active);

    var element = unref(target);

    if (_active && element && !element.contains(event.target)) {
      listener(event);
    }
  };

  useEventListener(eventName, onClick, {
    target: document
  });
}

var count = 0;
var CLASSNAME = 'fm-overflow-hidden';
function useLockScroll(shouldLock) {
  var lock = function lock() {
    if (shouldLock()) {
      if (!count) {
        document.body.classList.add(CLASSNAME);
      }

      count++;
    }
  };

  var unlock = function unlock() {
    if (shouldLock() && count) {
      count--;

      if (!count) {
        document.body.classList.remove(CLASSNAME);
      }
    }
  };

  return [lock, unlock];
}

function useExpose(apis) {
  var instance = getCurrentInstance();

  if (instance) {
    Object.assign(instance.proxy, apis);
  }
}

function usePopupState() {
  var state = reactive({
    show: false
  });

  var toggle = function toggle(show) {
    state.show = show;
  };

  var open = function open(props) {
    Object.assign(state, props);
    nextTick(function () {
      toggle(true);
    });
  };

  var close = function close() {
    toggle(false);
  };

  useExpose({
    open: open,
    close: close,
    toggle: toggle
  });
  return {
    open: open,
    close: close,
    state: state,
    toggle: toggle
  };
}
function mountComponent(RootComponent) {
  var app = createApp(RootComponent);
  var root = document.createElement('div');
  document.body.appendChild(root);
  return {
    instance: app.mount(root),
    unmount: function unmount() {
      app.unmount(root);
      document.body.removeChild(root);
    }
  };
}

var MIN_DISTANCE = 10;

function getDirection(x, y) {
  if (x > y && x > MIN_DISTANCE) {
    return 'horizontal';
  }

  if (y > x && y > MIN_DISTANCE) {
    return 'vertical';
  }

  return '';
}

var defaultTouchOffset = function defaultTouchOffset() {
  return {
    startX: 0,
    startY: 0,
    endX: 0,
    endY: 0,
    offsetX: 0,
    offsetY: 0,
    direction: ''
  };
};

var DragStatus;

(function (DragStatus) {
  DragStatus[DragStatus["NotStarted"] = 0] = "NotStarted";
  DragStatus[DragStatus["Started"] = 1] = "Started";
  DragStatus[DragStatus["Dragging"] = 2] = "Dragging";
  DragStatus[DragStatus["End"] = 3] = "End";
})(DragStatus || (DragStatus = {}));

function useTouchMove(target, listener, wait) {
  if (wait === void 0) {
    wait = 100;
  }

  var beginOffset = {
    offsetX: 0,
    offsetY: 0
  };
  var offset = reactive(defaultTouchOffset());
  var dragStatus = ref(DragStatus.NotStarted);

  var touchStart = function touchStart(event) {
    if (!event.touches || !event.touches[0]) {
      return;
    }

    offset.startX = event.touches[0].clientX;
    offset.startY = event.touches[0].clientY;
    (listener === null || listener === void 0 ? void 0 : listener.onTouchStart) && listener.onTouchStart(event);
    dragStatus.value = DragStatus.Started;
  };

  var touchMove = function touchMove(event) {
    if (!event.touches || !event.touches[0]) {
      return;
    }

    var touch = event.touches[0];
    offset.offsetX = touch.clientX - offset.startX + beginOffset.offsetX;
    offset.offsetY = touch.clientY - offset.startY + beginOffset.offsetY;
    offset.endX = event.touches[0].clientX;
    offset.endY = event.touches[0].clientY;
    offset.direction = getDirection(offset.offsetX, offset.offsetY);
    (listener === null || listener === void 0 ? void 0 : listener.onTouchMove) && listener.onTouchMove(event);
    dragStatus.value = DragStatus.Dragging;
  };

  var touchEnd = function touchEnd(event) {
    beginOffset = {
      offsetX: offset.offsetX,
      offsetY: offset.offsetY
    };
    (listener === null || listener === void 0 ? void 0 : listener.onTouchEnd) && listener.onTouchEnd(event);
    (listener === null || listener === void 0 ? void 0 : listener.onTouchCancel) && listener.onTouchCancel(event);
    dragStatus.value = DragStatus.End;
  };

  var resetTouchStatus = function resetTouchStatus() {
    offset.endX = 0;
    offset.endY = 0;
    offset.offsetX = 0;
    offset.offsetY = 0;
    offset.direction = '';
    beginOffset = {
      offsetX: 0,
      offsetY: 0
    };
    dragStatus.value = DragStatus.NotStarted;
  };

  if (!target) {
    return {
      offset: offset,
      resetTouchStatus: resetTouchStatus
    };
  }

  useEventListener('touchstart', touchStart, {
    target: target
  });
  useEventListener('touchmove', throttle(touchMove, wait), {
    target: target
  });
  useEventListener('touchend', touchEnd, {
    target: target
  });
  return {
    offset: offset,
    dragStatus: dragStatus,
    resetTouchStatus: resetTouchStatus
  };
}

var useElementRect = function useElementRect(el) {
  var rect = ref();

  var hook = function hook() {
    var target = unref(el);
    rect.value = target === null || target === void 0 ? void 0 : target.getBoundingClientRect();
  };

  onMountedOrActivated(hook);
  return {
    rect: rect
  };
};

var dynamicTemplate = defineComponent({
  name: 'dynamic-template',
  props: {
    props: {
      type: Object,
      "default": function _default() {
        return {};
      }
    }
  },
  render: function render() {}
});

function createFunction(code) {
  try {
    return new Function('Vue', code);
  } catch (err) {
    console.warn(err, code);
    return function () {};
  }
}

function useDynamicTemplate(template) {
  var ast = baseParse(template, {
    isNativeTag: isHTMLTag
  });
  var prefixIdentifiers = true;

  var _getBaseTransformPres = getBaseTransformPreset(prefixIdentifiers),
      nodeTransforms = _getBaseTransformPres[0],
      directiveTransforms = _getBaseTransformPres[1];

  transform(ast, {
    prefixIdentifiers: prefixIdentifiers,
    nodeTransforms: [].concat(nodeTransforms),
    directiveTransforms: directiveTransforms
  });
  var dynamicRender = VueCodeGenerate(ast);
  dynamicTemplate.render = createFunction(dynamicRender.code)(Vue);
  console.log(dynamicRender);
  return {
    dynamicRender: dynamicRender,
    dynamicTemplate: dynamicTemplate
  };
}

function useBem(prefix) {
  return function (className) {
    return prefix + "-" + className;
  };
}

var MIN_DISTANCE$1 = 10;

function getDirection$1(x, y) {
  if (x > y && x > MIN_DISTANCE$1) {
    return 'horizontal';
  }

  if (y > x && y > MIN_DISTANCE$1) {
    return 'vertical';
  }

  return '';
}

function useTouch() {
  var startX = ref(0);
  var startY = ref(0);
  var deltaX = ref(0);
  var deltaY = ref(0);
  var offsetX = ref(0);
  var offsetY = ref(0);
  var direction = ref('');

  var isVertical = function isVertical() {
    return direction.value === 'vertical';
  };

  var isHorizontal = function isHorizontal() {
    return direction.value === 'horizontal';
  };

  var reset = function reset() {
    deltaX.value = 0;
    deltaY.value = 0;
    offsetX.value = 0;
    offsetY.value = 0;
    direction.value = '';
  };

  var start = function start(event) {
    reset();
    startX.value = event.touches[0].clientX;
    startY.value = event.touches[0].clientY;
  };

  var move = function move(event) {
    var touch = event.touches[0];
    deltaX.value = touch.clientX - startX.value;
    deltaY.value = touch.clientY - startY.value;
    offsetX.value = Math.abs(deltaX.value);
    offsetY.value = Math.abs(deltaY.value);

    if (!direction.value) {
      direction.value = getDirection$1(offsetX.value, offsetY.value);
    }
  };

  return {
    move: move,
    start: start,
    reset: reset,
    startX: startX,
    startY: startY,
    deltaX: deltaX,
    deltaY: deltaY,
    offsetX: offsetX,
    offsetY: offsetY,
    direction: direction,
    isVertical: isVertical,
    isHorizontal: isHorizontal
  };
}

function useBack(enableShow) {
  var pushBack = function pushBack(cb) {
    window['MOBILE_ORIGIN_BACK'] && window['MOBILE_ORIGIN_BACK'].pushOriginGoback(cb);
  };

  var popBack = function popBack() {
    window['MOBILE_ORIGIN_BACK'] && window['MOBILE_ORIGIN_BACK'].popOriginGoback();
  };

  var pushOrPop = function pushOrPop(cb) {
    if (cb === void 0) {
      cb = function cb() {
        return enableShow.value = false;
      };
    }

    if (enableShow.value) {
      pushBack(cb);
    } else {
      popBack();
    }
  };

  return {
    pushBack: pushBack,
    popBack: popBack,
    pushOrPop: pushOrPop
  };
}

var stateSymbol = Symbol('state');
var createState = function createState(initState) {
  return reactive(initState);
};
var useState = function useState(key) {
  return inject(key ? key : stateSymbol);
};
var provideState = function provideState(key, initState) {
  if (initState === void 0) {
    initState = {};
  }

  return provide(key ? key : stateSymbol, createState(initState));
};

var b64pad = '';
var chrsz = 8;
var useMd5 = function useMd5() {
  return {
    md5: md5,
    hex_md5: hex_md5,
    b64_md5: b64_md5,
    str_md5: str_md5,
    hex_hmac_md5: hex_hmac_md5,
    b64_hmac_md5: b64_hmac_md5,
    str_hmac_md5: str_hmac_md5
  };
};

var md5 = function md5(s, type) {
  if (type === void 0) {
    type = 'hex';
  }

  var result = '';

  switch (type) {
    case 'hex':
      result = hex_md5(s);
      break;

    case 'b64':
      result = b64_md5(s);
      break;

    case 'str':
      result = str_md5(s);

    default:
      result = hex_md5(s);
      break;
  }

  return result;
};

function hex_md5(s) {
  return binl2hex(core_md5(str2binl(s), s.length * chrsz));
}

function b64_md5(s) {
  return binl2b64(core_md5(str2binl(s), s.length * chrsz));
}

function str_md5(s) {
  return binl2str(core_md5(str2binl(s), s.length * chrsz));
}

function hex_hmac_md5(key, data) {
  return binl2hex(core_hmac_md5(key, data));
}

function b64_hmac_md5(key, data) {
  return binl2b64(core_hmac_md5(key, data));
}

function str_hmac_md5(key, data) {
  return binl2str(core_hmac_md5(key, data));
}

function core_md5(x, len) {
  x[len >> 5] |= 0x80 << len % 32;
  x[(len + 64 >>> 9 << 4) + 14] = len;
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    a = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);
    d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);
    a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);
    c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);
    d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
  }

  return Array(a, b, c, d);
}

function md5_cmn(q, a, b, x, s, t) {
  return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);
}

function md5_ff(a, b, c, d, x, s, t) {
  return md5_cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5_gg(a, b, c, d, x, s, t) {
  return md5_cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5_hh(a, b, c, d, x, s, t) {
  return md5_cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5_ii(a, b, c, d, x, s, t) {
  return md5_cmn(c ^ (b | ~d), a, b, x, s, t);
}

function core_hmac_md5(key, data) {
  var bkey = str2binl(key);

  if (bkey.length > 16) {
    bkey = core_md5(bkey, key.length * chrsz);
  }

  var ipad = Array(16);
  var opad = Array(16);

  for (var i = 0; i < 16; i++) {
    ipad[i] = bkey[i] ^ 0x36363636;
    opad[i] = bkey[i] ^ 0x5c5c5c5c;
  }

  var hash = core_md5(ipad.concat(str2binl(data)), 512 + data.length * chrsz);
  return core_md5(opad.concat(hash), 512 + 128);
}

function safe_add(x, y) {
  var lsw = (x & 0xffff) + (y & 0xffff);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}

function bit_rol(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}

function str2binl(str) {
  var bin = [];
  var mask = (1 << chrsz) - 1;

  for (var i = 0; i < str.length * chrsz; i += chrsz) {
    bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << i % 32;
  }

  return bin;
}

function binl2str(bin) {
  var str = '';
  var mask = (1 << chrsz) - 1;

  for (var i = 0; i < bin.length * 32; i += chrsz) {
    str += String.fromCharCode(bin[i >> 5] >>> i % 32 & mask);
  }

  return str;
}

function binl2hex(binarray) {
  var hex_tab =  '0123456789abcdef';
  var str = '';

  for (var i = 0; i < binarray.length * 4; i++) {
    str += hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 + 4 & 0xf) + hex_tab.charAt(binarray[i >> 2] >> i % 4 * 8 & 0xf);
  }

  return str;
}

function binl2b64(binarray) {
  var tab = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
  var str = '';

  for (var i = 0; i < binarray.length * 4; i += 3) {
    var triplet = (binarray[i >> 2] >> 8 * (i % 4) & 0xff) << 16 | (binarray[i + 1 >> 2] >> 8 * ((i + 1) % 4) & 0xff) << 8 | binarray[i + 2 >> 2] >> 8 * ((i + 2) % 4) & 0xff;

    for (var j = 0; j < 4; j++) {
      if (i * 8 + j * 6 > binarray.length * 32) str += b64pad;else str += tab.charAt(triplet >> 6 * (3 - j) & 0x3f);
    }
  }

  return str;
}

var useRootProps = function useRootProps(key, props) {
  var setProps = function setProps(value) {
    provide(key, value);
  };

  var getProps = function getProps(defaultValue) {
    if (defaultValue === void 0) {
      defaultValue = {};
    }

    return inject(key, defaultValue);
  };

  if (props) {
    setProps(props);
  }

  var rootProps = props ? props : getProps();
  return {
    rootProps: rootProps,
    setProps: setProps,
    getProps: getProps
  };
};

var script = {
  name: 'fm-icon',
  props: {
    name: {
      type: String
    },
    color: {
      type: String
    },
    size: {
      type: [String, Number]
    },
    classPrefix: {
      type: String,
      "default": 'fm-icon'
    }
  },
  data: function data() {
    return {
      sizeStyle: ''
    };
  },
  mounted: function mounted() {
    this.sizeStyle = addUnit(this.size);
  }
};

function render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("span", {
    "class": [$props.classPrefix, $props.name ? $props.classPrefix + '-' + $props.name : ''],
    style: {
      color: $props.color,
      'font-size': $data.sizeStyle
    }
  }, null, 6
  /* CLASS, STYLE */
  );
}

script.render = render;
script.__file = "packages/icon/src/index.vue";

script.install = function (app) {
  app.component(script.name, script);
};

var _components;
var script$1 = {
  name: 'fm-button',
  components: (_components = {}, _components[script.name] = script, _components),
  emits: ['click'],
  props: {
    type: {
      type: String,
      "default": 'primary'
    },
    size: {
      type: String
    },
    color: {
      type: String
    },
    block: {
      type: Boolean,
      "default": false
    },
    noBorder: {
      type: Boolean,
      "default": false
    },
    plain: {
      type: Boolean,
      "default": false
    },
    // square: {
    //   type: Boolean,
    //   default: false
    // },
    round: {
      type: Boolean,
      "default": false
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    className: {
      type: String
    },
    icon: {
      type: String
    },
    loading: {
      type: Boolean,
      "default": false
    },
    loadingText: {
      type: String
    }
  },
  data: function data() {
    return {
      typeClass: ''
    };
  },
  computed: {
    buttonStyle: function buttonStyle() {
      var style = {};

      if (this.color) {
        style.color = this.plain ? this.color : '#fff';

        if (!this.plain) {
          style.background = this.color;
        }

        if (this.color.indexOf('gradient') !== -1) {
          style.border = 0;
        } else {
          style.borderColor = this.color;
        }

        style.boxShadow = 'none';
      }

      return style;
    }
  },
  mounted: function mounted() {
    this.typeClass = 'fm-button-' + this.type;
  },
  methods: {
    click: function click(event) {
      if (!this.disabled) {
        this.$emit('click', event);
      }
    }
  }
};

var _hoisted_1 = {
  key: 1,
  "class": "fm-button-loading"
};

var _hoisted_2 = /*#__PURE__*/createVNode("svg", {
  viewBox: "25 25 50 50",
  "class": "fm-button-loading-icon-circular"
}, [/*#__PURE__*/createVNode("circle", {
  cx: "50",
  cy: "50",
  r: "20",
  fill: "none"
})], -1
/* HOISTED */
);

var _hoisted_3 = {
  key: 0,
  "class": "fm-button-loading-text"
};
function render$1(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("button", {
    "class": ["fm-button", [$props.className, $data.typeClass, $props.disabled ? 'fm-button-disabled' : '', $props.block ? 'fm-button-block' : '', $props.round ? 'fm-button-round' : '', $props.plain ? 'fm-button-plain' : '', $props.noBorder ? 'fm-button-noborder' : '', $props.size === 'small' ? 'fm-button-small' : '', $props.size === 'large' ? 'fm-button-large' : '', $props.size === 'mini' ? 'fm-button-mini' : '', $props.loading ? 'fm-button-loading' : '']],
    style: $options.buttonStyle,
    onClick: _cache[1] || (_cache[1] = function () {
      return $options.click && $options.click.apply($options, arguments);
    })
  }, [$props.icon ? (openBlock(), createBlock(_component_fm_icon, {
    key: 0,
    name: $props.icon
  }, null, 8
  /* PROPS */
  , ["name"])) : createCommentVNode("v-if", true), $props.loading ? (openBlock(), createBlock("span", _hoisted_1, [_hoisted_2])) : createCommentVNode("v-if", true), renderSlot(_ctx.$slots, "default", {}, function () {
    return [$props.loading && $props.loadingText ? (openBlock(), createBlock("span", _hoisted_3, toDisplayString($props.loadingText), 1
    /* TEXT */
    )) : createCommentVNode("v-if", true), $props.type === 'add' ? (openBlock(), createBlock(_component_fm_icon, {
      key: 1,
      name: "s-plus"
    })) : createCommentVNode("v-if", true)];
  })], 6
  /* CLASS, STYLE */
  );
}

script$1.render = render$1;
script$1.__file = "packages/button/src/button.vue";

script$1.install = function (app) {
  app.component(script$1.name, script$1);
};

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

var script$2 = defineComponent({
  name: 'fm-popover',
  props: {
    value: {
      type: Boolean,
      "default": false
    },
    placement: {
      type: String,
      "default": 'bottomRight'
    },
    teleport: {
      type: String,
      "default": 'body'
    },
    hasMask: {
      type: Boolean,
      "default": true
    },
    maskClosable: {
      type: Boolean,
      "default": false
    },
    offset: {
      type: Object,
      "default": function _default() {
        return {
          top: 0,
          left: 0
        };
      }
    },
    className: {
      type: String
    },
    hasArrow: {
      type: Boolean,
      "default": true
    }
  },
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        emit = _ref.emit;
    var popover = ref();
    var show = ref(false);

    var open = function open(event) {
      setPosition();
      show.value = true;
      preventDefault(event, true);
    }; // useClickAway(popover, (event) => {
    //   if (show.value) {
    //     show.value = false
    //   }
    // })
    // 


    var style = ref({});
    var root = ref();
    onMounted(function () {
      setPosition();
    });

    var setPosition = function setPosition() {
      var position = getDeviation(root, props.placement);
      var offset = initOffset(position);
      style.value = {
        top: isDef(position.top) ? position.top + offset.top + 'px' : '',
        bottom: isDef(position.bottom) ? position.bottom - offset.top + 'px' : '',
        left: isDef(position.left) ? position.left + offset.left + 'px' : '',
        right: isDef(position.right) ? position.right - offset.left + 'px' : ''
      };
    };

    var initOffset = function initOffset(position) {
      var offset = props.offset ? _extends({
        top: 0,
        left: 0
      }, props.offset) : {
        top: 0,
        left: 0
      };

      if (props.placement.includes('left') || props.placement.includes('right')) {
        if (position.top) {
          offset.top = offset.top - 10;
        }

        return offset;
      } else {
        if (position.left) {
          offset.left = offset.left - 10;
        } else {
          offset.left = offset.left + 10;
        }
      }

      return offset;
    };

    var wrapperCls = computed(function () {
      var _ref2;

      return _ref2 = {}, _ref2["fm-popover-placement-" + props.placement] = ['left', 'right', 'top', 'bottom', 'topLeft', 'topRight', 'bottomLeft', 'bottomRight'].indexOf(props.placement) !== -1, _ref2;
    });

    var onContentClick = function onContentClick(event) {
      event.preventDefault();
      emit('contentClick');

      if (show.value) {
        show.value = false;
      }
    };

    return {
      show: show,
      root: root,
      popover: popover,
      style: style,
      wrapperCls: wrapperCls,
      open: open,
      onContentClick: onContentClick
    };
  }
});

var _hoisted_1$1 = /*#__PURE__*/createVNode("span", {
  "class": "fm-icon fm-icon-other"
}, null, -1
/* HOISTED */
);

var _hoisted_2$1 = {
  "class": "fm-popover-content",
  ref: "popover"
};
var _hoisted_3$1 = {
  key: 0,
  "class": "fm-popover-arrow"
};
var _hoisted_4 = {
  "class": "fm-popover-inner"
};
function render$2(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_popup = resolveComponent("fm-popup");

  return openBlock(), createBlock(Fragment, null, [createVNode("div", {
    onClick: _cache[1] || (_cache[1] = function () {
      return _ctx.open && _ctx.open.apply(_ctx, arguments);
    }),
    ref: "root",
    "class": ["fm-popover-template", _ctx.className]
  }, [renderSlot(_ctx.$slots, "default", {}, function () {
    return [_hoisted_1$1];
  })], 2
  /* CLASS */
  ), createVNode(_component_fm_popup, {
    show: _ctx.show,
    "onUpdate:show": _cache[3] || (_cache[3] = function ($event) {
      return _ctx.show = $event;
    }),
    "class": ["fm-popover", _ctx.wrapperCls],
    style: _ctx.style,
    overlay: _ctx.hasMask,
    teleport: _ctx.teleport
  }, {
    "default": withCtx(function () {
      return [createVNode("div", _hoisted_2$1, [_ctx.hasArrow ? (openBlock(), createBlock("div", _hoisted_3$1)) : createCommentVNode("v-if", true), createVNode("div", _hoisted_4, [createVNode("div", {
        "class": "fm-popover-inner-wrapper",
        onClick: _cache[2] || (_cache[2] = function () {
          return _ctx.onContentClick && _ctx.onContentClick.apply(_ctx, arguments);
        })
      }, [renderSlot(_ctx.$slots, "content")])])], 512
      /* NEED_PATCH */
      )];
    }),
    _: 3
    /* FORWARDED */

  }, 8
  /* PROPS */
  , ["show", "style", "class", "overlay", "teleport"])], 64
  /* STABLE_FRAGMENT */
  );
}

script$2.render = render$2;
script$2.__file = "packages/popover/src/popover.vue";

script$2.install = function (app) {
  app.component(script$2.name, script$2);
};

var _components$1;
var script$3 = {
  name: 'fm-action-bar',
  components: (_components$1 = {}, _components$1[script$1.name] = script$1, _components$1[script.name] = script, _components$1[script$2.name] = script$2, _components$1),
  props: {
    btns: {
      type: Array
    }
  },
  data: function data() {
    return {
      offset: {
        top: -6,
        left: -8
      },
      showPopover: false,
      innerBtns: []
    };
  },
  mounted: function mounted() {},
  watch: {
    btns: {
      handler: function handler(val) {
        if (val && val.length) {
          this.innerBtns = val.filter(function (btn) {
            return !btn.hasOwnProperty('visible') || btn.hasOwnProperty('visible') && btn['visible'];
          });
        }
      },
      immediate: true
    }
  },
  computed: {
    showBtns: function showBtns() {
      if (this.innerBtns && this.innerBtns.length <= 4) {
        return this.innerBtns;
      } else if (this.innerBtns && this.innerBtns.length > 4) {
        return this.innerBtns.slice(0, 3);
      } else {
        return [];
      }
    },
    extendBtns: function extendBtns() {
      if (this.innerBtns && this.innerBtns.length > 4) {
        return this.innerBtns.slice(3);
      } else {
        return [];
      }
    }
  },
  methods: {
    $_itemHandler: function $_itemHandler(btn) {
      if (btn.disabled) return;

      if (typeof btn.handler === 'function') {
        btn.handler();
      }
    },
    $_btnOnClick: function $_btnOnClick(btn) {
      if (btn.disabled) return;

      if (typeof btn.handler === 'function') {
        btn.handler();
      }
    }
  }
};

const _hoisted_1$2 = { class: "fm-action-bar" };
const _hoisted_2$2 = { class: "fm-action-bar-btns" };
const _hoisted_3$2 = { class: "btn-item-icon" };
const _hoisted_4$1 = { class: "btn-item-text" };
const _hoisted_5 = { class: "btn-item-icon" };
const _hoisted_6 = /*#__PURE__*/createVNode("span", { class: "btn-item-text" }, "  ", -1 /* HOISTED */);
const _hoisted_7 = { class: "fm-action-bar-popover" };
const _hoisted_8 = { class: "fm-popover-item-icon" };
const _hoisted_9 = { class: "fm-popover-item-content" };

function render$3(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");
  const _component_fm_popover = resolveComponent("fm-popover");

  return (openBlock(), createBlock("div", _hoisted_1$2, [
    renderSlot(_ctx.$slots, "default", {}, () => [
      createVNode("ul", _hoisted_2$2, [
        (openBlock(true), createBlock(Fragment, null, renderList($options.showBtns, (btn, index) => {
          return (openBlock(), createBlock("li", {
            class: ["fm-action-bar-btn-item", [
            btn.color ? 'fm-action-bar-btn-item-has-color' : '',
            btn.type ? 'fm-action-bar-btn-item-'+ btn.type: '',
            btn.disabled ? 'fm-action-bar-btn-item-disabled' : ''
          ]],
            style: {'background': btn.color},
            key: index,
            onClick: $event => ($options.$_btnOnClick(btn))
          }, [
            renderSlot(_ctx.$slots, "btn", {
              btn: btn,
              btns: $props.btns,
              showbtns: $options.showBtns,
              index: "index"
            }, () => [
              createVNode("span", _hoisted_3$2, [
                createVNode(_component_fm_icon, {
                  name: btn.icon
                }, null, 8 /* PROPS */, ["name"])
              ]),
              createVNode("span", _hoisted_4$1, toDisplayString(btn.text), 1 /* TEXT */)
            ])
          ], 14 /* CLASS, STYLE, PROPS */, ["onClick"]))
        }), 128 /* KEYED_FRAGMENT */)),
        ($options.extendBtns.length)
          ? (openBlock(), createBlock(_component_fm_popover, {
              key: 0,
              ref: "popover",
              placement: "topRight",
              offset: $data.offset,
              className: "fm-action-bar-popover fm-action-bar-btn-item",
              hasArrow: true,
              hasMask: false
            }, {
              content: withCtx(() => [
                createVNode("div", _hoisted_7, [
                  (openBlock(true), createBlock(Fragment, null, renderList($options.extendBtns, (extendBtn, index) => {
                    return (openBlock(), createBlock("div", {
                      class: "fm-popover-item",
                      onClick: $event => ($options.$_itemHandler(extendBtn)),
                      key: index
                    }, [
                      renderSlot(_ctx.$slots, "extendBtn", {
                        btn: extendBtn,
                        index: index,
                        btns: $props.btns,
                        extendBtns: $options.extendBtns
                      }, () => [
                        createVNode("div", {
                          class: ["fm-popover-item-container", [
                        extendBtn.type ? 'fm-popover-item-container-'+ extendBtn.type: '',
                        extendBtn.disabled ? 'fm-popover-item-container-disabled' : ''
                        ]]
                        }, [
                          createVNode("div", _hoisted_8, [
                            createVNode(_component_fm_icon, {
                              name: extendBtn.icon
                            }, null, 8 /* PROPS */, ["name"])
                          ]),
                          createVNode("div", _hoisted_9, toDisplayString(extendBtn.text), 1 /* TEXT */)
                        ], 2 /* CLASS */)
                      ])
                    ], 8 /* PROPS */, ["onClick"]))
                  }), 128 /* KEYED_FRAGMENT */))
                ])
              ]),
              default: withCtx(() => [
                renderSlot(_ctx.$slots, "more", { btns: $props.btns }, () => [
                  createVNode("span", _hoisted_5, [
                    createVNode(_component_fm_icon, { name: "s-more-o" })
                  ]),
                  _hoisted_6
                ])
              ]),
              _: 3 /* FORWARDED */
            }, 8 /* PROPS */, ["offset"]))
          : createCommentVNode("v-if", true)
      ])
    ])
  ]))
}

script$3.render = render$3;
script$3.__file = "packages/action-bar/src/index.vue";

script$3.install = function (app) {
  app.component(script$3.name, script$3);
};

var _DAYLABELS;

var MO = 'monday';
var TU = 'tuesday';
var WE = 'wednesday';
var TH = 'thursday';
var FR = 'friday';
var SA = 'saturday';
var SU = 'sunday';
var WEEK = [MO, TU, WE, TH, FR, SA, SU];
var DAYLABELS = (_DAYLABELS = {}, _DAYLABELS[MO] = '', _DAYLABELS[TU] = '', _DAYLABELS[WE] = '', _DAYLABELS[TH] = '', _DAYLABELS[FR] = '', _DAYLABELS[SA] = '', _DAYLABELS[SU] = '', _DAYLABELS);
var VIEW = ['week', 'month'];

var LunarDate = /*#__PURE__*/function () {
  function LunarDate(date) {
    this._data = [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2, 0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977, 0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970, 0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950, 0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0d2b2, 0x0a950, 0x0b557, 0x06ca0, 0x0b550, 0x15355, 0x04da0, 0x0a5b0, 0x14573, 0x052b0, 0x0a9a8, 0x0e950, 0x06aa0, 0x0aea6, 0x0ab50, 0x04b60, 0x0aae4, 0x0a570, 0x05260, 0x0f263, 0x0d950, 0x05b57, 0x056a0, 0x096d0, 0x04dd5, 0x04ad0, 0x0a4d0, 0x0d4d4, 0x0d250, 0x0d558, 0x0b540, 0x0b6a0, 0x195a6, 0x095b0, 0x049b0, 0x0a974, 0x0a4b0, 0x0b27a, 0x06a50, 0x06d40, 0x0af46, 0x0ab60, 0x09570, 0x04af5, 0x04970, 0x064b0, 0x074a3, 0x0ea50, 0x06b58, 0x055c0, 0x0ab60, 0x096d5, 0x092e0, 0x0c960, 0x0d954, 0x0d4a0, 0x0da50, 0x07552, 0x056a0, 0x0abb7, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0, 0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, 0x07954, 0x06aa0, 0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, 0x05aa0, 0x076a3, 0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0, 0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0, 0x14b63];
    date = date ? date : new Date();
    this.value = this.toLunar(date);
  }

  var _proto = LunarDate.prototype;

  _proto.getData = function getData(year) {
    return this._data[year - 1900];
  };

  _proto.getLeapMonth = function getLeapMonth(year, lunarData) {
    lunarData = lunarData || this.getData(year);
    return lunarData & 0xf;
  };

  _proto.getLeapDays = function getLeapDays(year, lunarData) {
    lunarData = lunarData || this.getData(year);

    if (this.getLeapMonth(year, lunarData)) {
      return lunarData & 0x10000 ? 30 : 29;
    } else {
      return 0;
    }
  };

  _proto.getMonthDays = function getMonthDays(year, month, lunarData) {
    lunarData = lunarData || this.getData(year);
    return lunarData & 0x10000 >> month ? 30 : 29;
  };

  _proto.getLunarDays = function getLunarDays(year, lunarData) {
    lunarData = lunarData || this.getData(year);
    var days = 348;

    for (var monthIndex = 0x8000; monthIndex > 0x8; monthIndex >>= 1) {
      days += lunarData & monthIndex ? 1 : 0;
    }

    return days + this.getLeapDays(year, lunarData);
  };

  _proto.toLunar = function toLunar(date) {
    var isLeap = false;
    var currentYear = 2020;
    var lunarData = this.getData(currentYear);
    var lunarDays = this.getLunarDays(currentYear, lunarData);
    var daysOffset = (Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()) - Date.UTC(2020, 0, 25)) / 86400000;

    if (daysOffset >= lunarDays) {
      while (daysOffset >= lunarDays) {
        daysOffset -= lunarDays;
        lunarData = this.getData(++currentYear);
        lunarDays = this.getLunarDays(currentYear, lunarData);
      }
    } else if (daysOffset < 0) {
      while (daysOffset < 0) {
        lunarData = this.getData(--currentYear);
        lunarDays = this.getLunarDays(currentYear, lunarData);
        daysOffset += lunarDays;
      }
    }

    daysOffset++;
    var leapMonth = this.getLeapMonth(currentYear, lunarData);
    var currentMonth, currentMonthDays;

    for (currentMonth = 1; currentMonth < 12; currentMonth++) {
      currentMonthDays = this.getMonthDays(currentYear, currentMonth);
      isLeap = false;

      if (leapMonth) {
        if (currentMonth > leapMonth) {
          currentMonth--;
          currentMonthDays = this.getLeapDays(currentYear, lunarData);
          leapMonth = 0;
          isLeap = true;
        }
      }

      if (daysOffset > currentMonthDays) {
        daysOffset -= currentMonthDays;
      } else {
        break;
      }
    }

    return Object.assign({
      lunarYear: currentYear,
      lunarMonth: currentMonth,
      lunarDay: daysOffset,
      isLeap: isLeap
    }, this.getChineseDay(currentYear, currentMonth, daysOffset, isLeap));
  };

  _proto.getChineseDay = function getChineseDay(year, month, day, isLeap) {
    var nStr1 = new Array('', '', '', '', '', '', '', '', '', '', '');
    var nStr2 = new Array('', '', '', '', '');
    var lunarDayText = '';
    var lunarMonthText = isLeap ? '' : '';
    var lunarYearText = year;

    if (month > 10) {
      lunarMonthText = lunarMonthText + '' + nStr1[month % 10] + '';
    } else {
      lunarMonthText = lunarMonthText + nStr1[month] + '';
    }

    switch (day) {
      case 10:
        lunarDayText += '';
        break;

      case 20:
        lunarDayText += '';
        break;

      case 30:
        lunarDayText += '';
        break;

      default:
        lunarDayText += nStr2[Math.floor(day / 10)];
        lunarDayText += nStr1[day % 10];
    }

    return {
      lunarYearText: lunarYearText,
      lunarMonthText: lunarMonthText,
      lunarDayText: lunarDayText
    };
  };

  return LunarDate;
}();

function getDateObj(dateRef) {
  var dateValue = unref(dateRef);
  var year = dateValue.getFullYear();
  var month = dateValue.getMonth();
  var date = dateValue.getDate();
  var day = dateValue.getDay() === 0 ? 7 : dateValue.getDay();
  var startDayInWeek = new Date(year, month, 1).getDay();
  var weekInMonth = Math.ceil((date + (startDayInWeek === 0 ? 7 : startDayInWeek) - 1) / 7);
  return {
    year: year,
    month: month,
    date: date,
    weekInMonth: weekInMonth,
    day: day
  };
}
function genWeeks(_ref, view, firstDay, selected) {
  var year = _ref.year,
      month = _ref.month,
      _ref$weekInMonth = _ref.weekInMonth,
      weekInMonth = _ref$weekInMonth === void 0 ? 1 : _ref$weekInMonth;

  if (firstDay === void 0) {
    firstDay = MO;
  }

  if (selected === void 0) {
    selected = new Date();
  }

  var weeks = reactive([]);
  var week = {
    days: [],
    num: 1
  };
  var totalDay = getMonthEndDay(year, month);
  var startDayInWeek = new Date(year, month, 1).getDay();
  var startDay = getStartDay(firstDay, startDayInWeek);
  var endDay = getEndDay(startDay, totalDay);

  for (var day = startDay; day <= endDay; day++) {
    var _date = new Date(year, month, day);

    if (week.days.length >= 7) {
      weeks.push(week);
      week = {
        days: [],
        num: week.num + 1
      };
    }

    var lunarDate = new LunarDate(_date).value;
    week.days.push(Object.assign({
      date: _date,
      disabled: isDisabled(),
      selected: selected instanceof Date ? isEqualDate(_date, selected) : !!(selected.begin && isEqualDate(_date, selected.begin) || selected.end && isEqualDate(_date, selected.end)),
      type: day < 1 ? 'prev' : day > totalDay ? 'next' : 'current',
      text: _date.getDate(),
      day: _date.getDay()
    }, lunarDate));
  }

  weeks.push(week);

  if (view === 'week') {
    return [weeks[weekInMonth - 1]];
  }

  return weeks;
}

function getStartDay(firstDay, startDayInWeek) {
  startDayInWeek = startDayInWeek === 0 ? 7 : startDayInWeek;
  var index = WEEK.findIndex(function (day) {
    return firstDay === day;
  });
  return index + 2 - startDayInWeek > 1 ? index + 2 - startDayInWeek - 7 : index + 2 - startDayInWeek;
}

function getEndDay(startDay, totalDay) {
  var total = 1 - startDay + totalDay;
  return total % 7 === 0 ? totalDay : totalDay + (7 - total % 7);
}

function getMonthEndDay(year, month) {
  return 32 - new Date(year, month, 32).getDate();
}
function genDayLabels(firstDay) {
  var index = WEEK.findIndex(function (day) {
    return firstDay === day;
  });
  var week = [].concat(WEEK.slice(index), WEEK.slice(0, index));
  return week.map(function (day) {
    return DAYLABELS[day];
  });
}

function isDisabled() {
  return false;
}

function clearSelected(weeks) {
  weeks.forEach(function (week) {
    week.days.forEach(function (day) {
      return day.selected = false;
    });
  });
}

var script$4 = defineComponent({
  name: 'fm-calendar-day',
  inject: ['calendar'],
  props: {
    day: {
      type: Object,
      "default": function _default() {
        return {};
      }
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var calendar = inject('calendar', undefined);

    var mark = function mark() {
      var initValue = {
        containerClass: '',
        containerStyle: '',
        html: ''
      };

      if (props.day && calendar && calendar.mark) {
        var target = calendar.mark(props.day);

        if (target) {
          return typeof target === 'string' ? _extends({}, initValue, {
            html: target
          }) : _extends({}, initValue, target);
        } else {
          return initValue;
        }
      }
    };

    var markOption = computed(mark);

    var onDayClick = function onDayClick(day) {
      emit('dayClick', day);
    };

    var event = function event() {
      if (calendar.events) {
        var flag = calendar.events.find(function (event) {
          return isSameDay(new Date(event), props.day.date);
        });

        if (flag) {
          return true;
        }
      }

      return calendar && calendar.event ? calendar.event(props.day) : false;
    };

    var hasEvent = computed(event);

    var isCurrentDay = function isCurrentDay(date) {
      return isEqualDate(date, new Date());
    };

    var isInRange = function isInRange(date) {
      var selectedRange = calendar.selectedRange;
      return selectedRange.begin && selectedRange.end && isAfter(date, selectedRange.begin, 'date') && isBefore(date, selectedRange.end, 'date');
    };

    var isBegin = function isBegin(date) {
      var selectedRange = calendar.selectedRange;
      return selectedRange.end && !isEqualDate(selectedRange.begin, selectedRange.end) && isEqualDate(date, selectedRange.begin);
    };

    var isEnd = function isEnd(date) {
      var selectedRange = calendar.selectedRange;
      return selectedRange.begin && !isEqualDate(selectedRange.begin, selectedRange.end) && isEqualDate(date, selectedRange.end);
    };

    var showLunar = computed(function () {
      return calendar.useLunar;
    });
    return {
      markOption: markOption,
      isCurrentDay: isCurrentDay,
      onDayClick: onDayClick,
      isInRange: isInRange,
      isBegin: isBegin,
      isEnd: isEnd,
      hasEvent: hasEvent,
      showLunar: showLunar
    };
  }
});

var _hoisted_1$3 = {
  "class": "text"
};
var _hoisted_2$3 = {
  "class": "day"
};
var _hoisted_3$3 = {
  key: 0,
  "class": "day-lunar"
};
var _hoisted_4$2 = {
  key: 0,
  "class": "event"
};
function render$4(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": ["fm-calendar-day-cell", {
      'fm-calendar-day-cell-selected': _ctx.day.selected,
      'fm-calendar-day-cell-current': _ctx.isCurrentDay(_ctx.day.date),
      'fm-calendar-day-cell-opacity': _ctx.day.type !== 'current',
      'fm-calendar-day-cell-disabled': _ctx.day.disabled,
      'fm-calendar-day-cell-range': _ctx.isInRange(_ctx.day.date),
      'fm-calendar-day-cell-begin': _ctx.isBegin(_ctx.day.date),
      'fm-calendar-day-cell-end': _ctx.isEnd(_ctx.day.date)
    }],
    onClick: _cache[1] || (_cache[1] = withModifiers(function ($event) {
      return _ctx.onDayClick(_ctx.day);
    }, ["stop"]))
  }, [createVNode("div", _hoisted_1$3, [createVNode("div", _hoisted_2$3, [createVNode("span", null, toDisplayString(_ctx.isCurrentDay(_ctx.day.date) ? '' : _ctx.day.text), 1
  /* TEXT */
  )]), _ctx.showLunar ? (openBlock(), createBlock("div", _hoisted_3$3, [createVNode("span", null, toDisplayString(_ctx.day.lunarDay === 1 ? _ctx.day.lunarMonthText : _ctx.day.lunarDayText), 1
  /* TEXT */
  )])) : createCommentVNode("v-if", true)]), createVNode("div", {
    "class": "mark " + _ctx.markOption.containerClass,
    style: _ctx.markOption.containerStyle,
    innerHTML: _ctx.markOption.html
  }, null, 14
  /* CLASS, STYLE, PROPS */
  , ["innerHTML"]), _ctx.hasEvent ? (openBlock(), createBlock("div", _hoisted_4$2)) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  );
}

script$4.render = render$4;
script$4.__file = "packages/calendar/src/day.vue";

var _components$2;
var script$5 = defineComponent({
  name: 'fm-calendar-week',
  components: (_components$2 = {}, _components$2[script$4.name] = script$4, _components$2),
  props: {
    week: {
      type: Object,
      "default": function _default() {
        return {};
      }
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onRender = function onRender() {
      var _props$week;

      var _days = isArray((_props$week = props.week) == null ? void 0 : _props$week.days) ? [].concat(props.week.days) : [];

      var days = [];

      _days.forEach(function (day) {
        days.push(day.date);
      });

      var begin = days[0];
      var end = days[days.length - 1];
      emit('render', {
        begin: begin,
        end: end,
        days: days
      });
    };

    watch(function () {
      return props.week;
    }, onRender, {
      immediate: true
    });

    var onDayClick = function onDayClick(day) {
      emit('dayClick', day);
    };

    return {
      onDayClick: onDayClick
    };
  }
});

var _hoisted_1$4 = {
  "class": "fm-calendar-week"
};
function render$5(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_calendar_day = resolveComponent("fm-calendar-day");

  return openBlock(), createBlock("div", _hoisted_1$4, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.week.days, function (day, index) {
    return openBlock(), createBlock(_component_fm_calendar_day, {
      key: index,
      day: day,
      onDayClick: _ctx.onDayClick
    }, null, 8
    /* PROPS */
    , ["day", "onDayClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))]);
}

script$5.render = render$5;
script$5.__file = "packages/calendar/src/week.vue";

var _components$3;
var script$6 = defineComponent({
  name: 'fm-calendar-month',
  components: (_components$3 = {}, _components$3[script$5.name] = script$5, _components$3),
  props: {
    weeks: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    collapsed: {
      type: Boolean,
      "default": false
    },
    mark: {
      type: Function,
      "default": function _default() {}
    },
    event: {
      type: Function,
      "default": function _default() {}
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onRender = function onRender() {
      var weeks = isArray(props.weeks) ? [].concat(props.weeks) : [];
      var days = [];
      weeks.forEach(function (week) {
        week == null ? void 0 : week.days.forEach(function (day) {
          days.push(day.date);
        });
      });
      var begin = days[0];
      var end = days[days.length - 1];
      emit('render', {
        begin: begin,
        end: end,
        days: days
      });
    };

    watch(function () {
      return props.weeks;
    }, onRender, {
      immediate: true
    });
    var firstWeek = computed(function () {
      return props.weeks[0];
    });
    var othersWeeks = computed(function () {
      return props.weeks.slice(1);
    });

    var onDayClick = function onDayClick(day) {
      emit('dayClick', day);
    };

    return {
      firstWeek: firstWeek,
      othersWeeks: othersWeeks,
      onDayClick: onDayClick
    };
  }
});

var _hoisted_1$5 = {
  "class": "fm-calendar-month"
};
var _hoisted_2$4 = {
  key: 0,
  "class": "fm-calendar-day-line-others"
};
function render$6(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_calendar_week = resolveComponent("fm-calendar-week");

  return openBlock(), createBlock("div", _hoisted_1$5, [createVNode(_component_fm_calendar_week, {
    "class": "fm-calendar-week-first",
    week: _ctx.firstWeek,
    onDayClick: _ctx.onDayClick
  }, null, 8
  /* PROPS */
  , ["week", "onDayClick"]), !_ctx.collapsed ? (openBlock(), createBlock("div", _hoisted_2$4, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.othersWeeks, function (week) {
    return openBlock(), createBlock(_component_fm_calendar_week, {
      week: week,
      key: week.num,
      onDayClick: _ctx.onDayClick
    }, null, 8
    /* PROPS */
    , ["week", "onDayClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))])) : createCommentVNode("v-if", true)]);
}

script$6.render = render$6;
script$6.__file = "packages/calendar/src/month.vue";

var _components$4;
var script$7 = defineComponent({
  name: 'fm-calendar-header',
  components: (_components$4 = {}, _components$4[script$4.name] = script$4, _components$4),
  props: {
    title: String,
    view: String,
    prevText: String,
    nextText: String,
    theme: String,
    currentDate: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    dayLabels: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  }
});

var _hoisted_1$6 = {
  "class": "fm-calendar-header"
};
var _hoisted_2$5 = {
  key: 0,
  "class": "fm-calendar-header-title"
};
var _hoisted_3$4 = {
  "class": "fm-calendar-header-subtitle"
};
var _hoisted_4$3 = {
  "class": "left"
};
var _hoisted_5$1 = {
  key: 0
};
var _hoisted_6$1 = {
  "class": "fm-calendar-header-text"
};
var _hoisted_7$1 = {
  "class": "right"
};
var _hoisted_8$1 = {
  key: 0
};
var _hoisted_9$1 = {
  "class": "fm-calendar-header-weekdays"
};
function render$7(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("div", _hoisted_1$6, [_ctx.title ? (openBlock(), createBlock("div", _hoisted_2$5, toDisplayString(_ctx.title), 1
  /* TEXT */
  )) : createCommentVNode("v-if", true), createVNode("div", _hoisted_3$4, [createVNode("div", _hoisted_4$3, [_ctx.theme === 'form' ? (openBlock(), createBlock("div", {
    key: 0,
    "class": "fm-calendar-header-button",
    onClick: _cache[1] || (_cache[1] = function ($event) {
      return _ctx.$emit('db-prev-click');
    })
  }, [renderSlot(_ctx.$slots, "db-prev", {}, function () {
    return [createVNode(_component_fm_icon, {
      name: "s-rewind"
    })];
  })])) : createCommentVNode("v-if", true), createVNode("div", {
    "class": "fm-calendar-header-button",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return _ctx.$emit('prev-click');
    })
  }, [_ctx.prevText ? (openBlock(), createBlock("span", _hoisted_5$1, toDisplayString(_ctx.prevText), 1
  /* TEXT */
  )) : renderSlot(_ctx.$slots, "prev", {
    key: 1
  }, function () {
    return [createVNode(_component_fm_icon, {
      name: "s-arrow-left"
    })];
  })])]), createVNode("div", _hoisted_6$1, [renderSlot(_ctx.$slots, "title", {
    currentDate: _ctx.currentDate
  }, function () {
    return [createVNode("span", null, toDisplayString(_ctx.currentDate.year + "\u5E74" + (_ctx.currentDate.month + 1) + "\u6708"), 1
    /* TEXT */
    )];
  })]), createVNode("div", _hoisted_7$1, [createVNode("div", {
    "class": "fm-calendar-header-button",
    onClick: _cache[3] || (_cache[3] = function ($event) {
      return _ctx.$emit('next-click');
    })
  }, [_ctx.nextText ? (openBlock(), createBlock("span", _hoisted_8$1, toDisplayString(_ctx.nextText), 1
  /* TEXT */
  )) : renderSlot(_ctx.$slots, "next", {
    key: 1
  }, function () {
    return [createVNode(_component_fm_icon, {
      name: "s-arrow"
    })];
  })]), _ctx.theme === 'form' ? (openBlock(), createBlock("div", {
    key: 0,
    "class": "fm-calendar-header-button",
    onClick: _cache[4] || (_cache[4] = function ($event) {
      return _ctx.$emit('db-next-click');
    })
  }, [renderSlot(_ctx.$slots, "db-next", {}, function () {
    return [createVNode(_component_fm_icon, {
      name: "s-forword"
    })];
  })])) : createCommentVNode("v-if", true)])]), createVNode("div", _hoisted_9$1, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.dayLabels, function (dayLabel) {
    return openBlock(), createBlock("span", {
      "class": "fm-calendar-weekday",
      key: dayLabel
    }, toDisplayString(dayLabel), 1
    /* TEXT */
    );
  }), 128
  /* KEYED_FRAGMENT */
  ))])]);
}

script$7.render = render$7;
script$7.__file = "packages/calendar/src/header.vue";

var CalendarProps = {
  type: {
    type: String,
    "default": 'single'
  },
  modelValue: {
    type: Object,
    "default": function _default() {
      return new Date();
    }
  },
  firstDay: {
    type: String,
    "default": 'monday',
    validator: function validator(val) {
      return WEEK.includes(val);
    }
  },
  view: {
    type: String,
    "default": 'month',
    validator: function validator(val) {
      return VIEW.includes(val);
    }
  },
  title: String,
  prevText: String,
  nextText: String,
  theme: {
    type: String,
    "default": 'card'
  },
  mark: {
    type: Function,
    "default": function _default() {}
  },
  event: {
    type: Function,
    "default": function _default() {}
  },
  events: {
    type: Array,
    "default": function _default() {
      return [];
    }
  },
  useCollapse: {
    type: Boolean,
    "default": false
  },
  useLunar: {
    type: Boolean,
    "default": true
  }
};

var _components$5;
var script$8 = defineComponent({
  name: 'fm-calendar',
  components: (_components$5 = {}, _components$5[script$5.name] = script$5, _components$5[script$6.name] = script$6, _components$5[script$7.name] = script$7, _components$5),
  provide: function provide() {
    return {
      calendar: this
    };
  },
  props: CalendarProps,
  emits: ['update:modelValue', 'dayClick', 'prev-click', 'next-click', 'render'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var selecteds = [];
    var selectedRange = reactive({});
    useExpose({
      selecteds: selecteds,
      selectedRange: selectedRange
    });
    var dayLabels = computed(function () {
      return genDayLabels(props.firstDay);
    });
    var innerValue = ref(props.modelValue);
    var current = ref(new Date());

    var _goto = function _goto(date) {
      current.value = date instanceof Date ? date : date != null && date.begin && isValidDate(date.begin) ? date.begin : current.value;
      weeks.value = getWeeks(current.value);
    };

    var currentDate = computed(function () {
      return getDateObj(current);
    });
    var weeks = ref([]);

    var getWeeks = function getWeeks(value) {
      return genWeeks(getDateObj(value), props.view, props.firstDay, innerValue.value);
    };

    watch(function () {
      return props.modelValue;
    }, function (value) {
      innerValue.value = value;

      _goto(value);

      if (!(value instanceof Date)) {
        selectedRange.begin = value.begin;
        selectedRange.end = value.end;
      }
    }, {
      immediate: true
    });

    var gotoByClick = function gotoByClick(gotoType, clickType) {
      if (gotoType === void 0) {
        gotoType = 'prev';
      }

      var _unref = unref(currentDate),
          year = _unref.year,
          month = _unref.month,
          date = _unref.date;

      if (clickType === 'db') {
        if (props.view === 'week') {
          _goto(new Date(year, gotoType === 'prev' ? month - 1 : month + 1));
        } else if (props.view === 'month') {
          _goto(new Date(gotoType === 'prev' ? year - 1 : year + 1, month));
        }
      } else {
        if (props.view === 'week') {
          _goto(new Date(year, month, gotoType === 'prev' ? date - 7 : date + 7));
        } else if (props.view === 'month') {
          _goto(new Date(year, gotoType === 'prev' ? month - 1 : month + 1));
        }
      }
    };

    var next = function next(type) {
      gotoByClick('next', type);
      emit('next-click', unref(currentDate));
    };

    var prev = function prev(type) {
      gotoByClick('prev', type);
      emit('prev-click', unref(currentDate));
    };

    var onDayClick = function onDayClick(day) {
      onSelected(day);
      emit('dayClick', day);
    };

    var onSelected = function onSelected(day) {
      if (props.type === 'single') {
        clearSelected(weeks.value);
        emit('update:modelValue', day.date);
      } else if (props.type === 'range') {
        if (selectedRange.begin && selectedRange.end) {
          selectedRange.begin = day.date;
          selectedRange.end = undefined;
          clearSelected(weeks.value);
        } else if (selectedRange.begin) {
          if (isAfter(selectedRange.begin, day.date)) {
            selectedRange.begin = day.date;
            clearSelected(weeks.value);
          } else {
            selectedRange.end = day.date;
            emit('update:modelValue', {
              begin: selectedRange.begin,
              end: selectedRange.end
            });
          }
        } else {
          clearSelected(weeks.value);
          selectedRange.begin = day.date;
        }

        innerValue.value = _extends({}, selectedRange);
      }

      day.selected = true;
    };

    var bodyRef = ref();
    var bodyStyle = ref({});

    var onTouchEnd = function onTouchEnd() {
      bodyStyle.value = {
        transform: "translateX(0)",
        transition: 'transform 0.3s'
      };
      var startX = offset.startX,
          endX = offset.endX;
      resetTouchStatus();

      if (!endX) {
        return;
      }

      var offsetX = startX - endX;

      if (offsetX > 50) {
        next();
      } else if (offsetX < -50) {
        prev();
      }
    };

    var onTouchMove = function onTouchMove() {
      bodyStyle.value = {
        transform: "translateX(" + offset.offsetX + "px)"
      };
    };

    var _useTouchMove = useTouchMove(bodyRef, {
      onTouchMove: onTouchMove,
      onTouchEnd: onTouchEnd
    }, 0),
        offset = _useTouchMove.offset,
        resetTouchStatus = _useTouchMove.resetTouchStatus;

    var onRender = function onRender(range) {
      emit('render', range);
    };

    var collapsed = ref(false);

    var toggle = function toggle() {
      collapsed.value = !collapsed.value;
    };

    return {
      collapsed: collapsed,
      dayLabels: dayLabels,
      currentDate: currentDate,
      bodyStyle: bodyStyle,
      offset: offset,
      weeks: weeks,
      prev: prev,
      next: next,
      onDayClick: onDayClick,
      bodyRef: bodyRef,
      toggle: toggle,
      onRender: onRender
    };
  }
});

var _hoisted_1$7 = {
  "class": "fm-calendar-body",
  ref: "bodyRef"
};
var _hoisted_2$6 = {
  key: 0,
  "class": "left"
};
var _hoisted_3$5 = {
  key: 1,
  "class": "right"
};
var _hoisted_4$4 = {
  key: 2,
  "class": "back-ground"
};
var _hoisted_5$2 = {
  key: 3,
  "class": "fm-calendar-collapse"
};

var _hoisted_6$2 = /*#__PURE__*/createVNode("div", {
  "class": "fm-calendar-footer"
}, null, -1
/* HOISTED */
);

function render$8(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_calendar_header = resolveComponent("fm-calendar-header");

  var _component_fm_calendar_month = resolveComponent("fm-calendar-month");

  var _component_fm_calendar_week = resolveComponent("fm-calendar-week");

  return openBlock(), createBlock("div", {
    "class": ["fm-calendar", 'fm-calendar-theme-' + _ctx.theme]
  }, [createVNode(_component_fm_calendar_header, {
    theme: _ctx.theme,
    currentDate: _ctx.currentDate,
    title: _ctx.title,
    view: _ctx.view,
    prevText: _ctx.prevText,
    nextText: _ctx.nextText,
    dayLabels: _ctx.dayLabels,
    onPrevClick: _ctx.prev,
    onDbPrevClick: _cache[1] || (_cache[1] = function ($event) {
      return _ctx.prev('db');
    }),
    onNextClick: _ctx.next,
    onDbNextClick: _cache[2] || (_cache[2] = function ($event) {
      return _ctx.next('db');
    })
  }, null, 8
  /* PROPS */
  , ["theme", "currentDate", "title", "view", "prevText", "nextText", "dayLabels", "onPrevClick", "onNextClick"]), createVNode("div", _hoisted_1$7, [_ctx.offset.offsetX > 50 ? (openBlock(), createBlock("div", _hoisted_2$6, "")) : createCommentVNode("v-if", true), createVNode("div", {
    "class": "fm-calendar-body-slide-wrapper",
    style: _ctx.bodyStyle
  }, [_ctx.view === 'month' ? (openBlock(), createBlock(_component_fm_calendar_month, {
    key: 0,
    weeks: _ctx.weeks,
    collapsed: _ctx.collapsed,
    onDayClick: _ctx.onDayClick,
    onRender: _ctx.onRender
  }, null, 8
  /* PROPS */
  , ["weeks", "collapsed", "onDayClick", "onRender"])) : createCommentVNode("v-if", true), _ctx.view === 'week' ? (openBlock(), createBlock(_component_fm_calendar_week, {
    key: 1,
    week: _ctx.weeks[0],
    onDayClick: _ctx.onDayClick,
    onRender: _ctx.onRender
  }, null, 8
  /* PROPS */
  , ["week", "onDayClick", "onRender"])) : createCommentVNode("v-if", true)], 4
  /* STYLE */
  ), _ctx.offset.offsetX < -50 ? (openBlock(), createBlock("div", _hoisted_3$5, "")) : createCommentVNode("v-if", true), _ctx.theme === 'form' ? (openBlock(), createBlock("div", _hoisted_4$4, toDisplayString(_ctx.currentDate.month + 1), 1
  /* TEXT */
  )) : createCommentVNode("v-if", true), _ctx.view === 'month' && _ctx.useCollapse ? (openBlock(), createBlock("div", _hoisted_5$2, [_ctx.collapsed ? (openBlock(), createBlock("span", {
    key: 0,
    onClick: _cache[3] || (_cache[3] = function () {
      return _ctx.toggle && _ctx.toggle.apply(_ctx, arguments);
    })
  }, "")) : createCommentVNode("v-if", true), !_ctx.collapsed ? (openBlock(), createBlock("span", {
    key: 1,
    onClick: _cache[4] || (_cache[4] = function () {
      return _ctx.toggle && _ctx.toggle.apply(_ctx, arguments);
    })
  }, "")) : createCommentVNode("v-if", true)])) : createCommentVNode("v-if", true)], 512
  /* NEED_PATCH */
  ), _hoisted_6$2], 2
  /* CLASS */
  );
}

script$8.render = render$8;
script$8.__file = "packages/calendar/src/calendar-panel.vue";

var InputCommonProps = {
  modelValue: {
    type: [String, Number],
    "default": ''
  },
  type: {
    type: String,
    "default": 'text'
  },
  label: {
    type: String,
    "default": ''
  },
  placeholder: {
    type: String,
    "default": ''
  },
  clearable: {
    type: Boolean,
    "default": false
  },
  editable: {
    type: Boolean,
    "default": true
  },
  required: {
    type: Boolean,
    "default": false
  },
  disabled: {
    type: Boolean,
    "default": false
  },
  readonly: {
    type: Boolean,
    "default": false
  },
  labelAlign: {
    type: String,
    "default": 'left'
  },
  inputAlign: {
    type: String,
    "default": 'right'
  },
  errorMessage: String,
  errorMessageAlign: {
    type: String,
    "default": 'right'
  },
  center: {
    type: Boolean,
    "default": false
  },
  isLink: {
    type: Boolean,
    "default": false
  },
  leftIcon: [String, Boolean],
  rightIcon: [String, Boolean],
  extra: [String, Boolean]
};
var InputNumberProps = {
  enableNull: {
    type: Boolean,
    "default": false
  },
  updateOn: {
    type: String,
    "default": 'change'
  },
  precision: {
    type: Number,
    "default": 2
  }
};
var InputTextAreaProps = {
  autoSize: {
    type: [Boolean, Object],
    "default": false
  },
  showWordLimit: {
    type: Boolean,
    "default": false
  },
  maxlength: Number
};
var InputProps = Object.assign(Object.assign(Object.assign(Object.assign({}, InputCommonProps), InputNumberProps), InputTextAreaProps), {
  formatTrigger: {
    type: String,
    "default": 'onChange'
  },
  formatter: {
    type: Function
  }
});

var Input = defineComponent({
  name: 'fm-input',
  props: InputProps,
  setup: function setup(props, _ref) {
    var emit = _ref.emit,
        slots = _ref.slots;

    var formatValue = function formatValue(value) {
      value = isDef(value) ? String(value) : '';

      if (isFunction(props.formatter)) {
        return props.formatter(value);
      }

      if (props.type === 'textarea') {
        value = formatTextAreaValue(value);
      } else if (props.type === 'number' || props.type === 'digit') {
        value = formatNumberValue(value);
      }

      return value;
    };

    var formatTextAreaValue = function formatTextAreaValue(value) {
      var maxlength = props.maxlength;

      if (isDef(maxlength) && value.length > maxlength) {
        return value = value.slice(0, maxlength);
      }

      return value;
    };

    var formatNumberValue = function formatNumberValue(value) {
      var allowDot = props.type === 'number' ? true : false;
      return formatToNumber(value, allowDot);
    };

    var updateOn = computed(function () {
      return isReturnNumber(innerValue.value) ? 'blur' : props.updateOn;
    });

    var isReturnNumber = function isReturnNumber(value) {
      return props.type === 'number' && (value || value === 0 || !props.enableNull);
    };

    var updatable = computed(function () {
      return !props.readonly && !props.disabled;
    });

    var initInnerValue = function initInnerValue(value) {
      return isReturnNumber(props.modelValue) ? parseFloat(formatValue(value), props.precision) : formatValue(value);
    };

    var innerValue = ref(initInnerValue(props.modelValue));
    watch(function () {
      return props.modelValue;
    }, function (value) {
      if (innerValue.value !== value) {
        innerValue.value = initInnerValue(value);
      }
    });

    var updateModelValue = function updateModelValue(value) {
      if (!updatable.value) {
        return;
      }

      innerValue.value = formatValue(value);

      if (isReturnNumber(innerValue.value)) {
        innerValue.value = parseFloat(innerValue.value, props.precision);

        if (!props.modelValue && props.modelValue !== 0 || Number(props.modelValue) !== Number(innerValue.value)) {
          emit('update:modelValue', Number(innerValue.value));
        }
      } else {
        emit('update:modelValue', innerValue.value);
      }
    };

    var compositioning = false;

    var onCompositionend = function onCompositionend() {
      compositioning = false;
      onInput();
    };

    var onInput = function onInput() {
      if (compositioning) {
        return;
      }

      if (updateOn.value === 'change') {
        updateModelValue(innerValue.value);
      } else if (props.type === 'number') {
        innerValue.value = formatValue(innerValue.value);
      }

      if (props.clearable && innerValue.value) {
        showClear.value = true;
      }
    };

    var onClear = function onClear() {
      updateModelValue('');
      emit('clear');
    };

    var showClear = ref(false);

    var onBlur = function onBlur(event) {
      emit('blur', event);

      if (!updatable.value) {
        return;
      }

      showClear.value = props.clearable ? false : showClear.value;

      if (updateOn.value === 'blur') {
        updateModelValue(innerValue.value);
      } else if (props.type === 'number' && props.modelValue === 0) {
        innerValue.value = parseFloat(props.modelValue, props.precision);
      }
    };

    var onFocus = function onFocus(event) {
      emit('focus', event);

      if (!updatable.value) {
        return;
      }

      showClear.value = props.clearable && innerValue.value ? true : showClear.value;

      if (props.type === 'number' && Number(innerValue.value) === 0) {
        innerValue.value = '';
      }
    };

    var onClickInput = function onClickInput(event) {
      emit('input-click', event);
    };

    var inputEl = ref();

    var onKeypress = function onKeypress(event) {
      var ENTER_CODE = 'Enter';

      if (event.code === ENTER_CODE) {
        if (props.type === 'search') {
          blur();
        }
      }
    };

    var focus = function focus() {
      var _a;

      (_a = inputEl.value) === null || _a === void 0 ? void 0 : _a.focus();
    };

    var blur = function blur() {
      var _a;

      (_a = inputEl.value) === null || _a === void 0 ? void 0 : _a.blur();
    };

    useExpose({
      focus: focus,
      blur: blur
    });
    var inputType = ref('text');
    var inputMode = ref('text');

    var inputTypeInit = function inputTypeInit(type) {
      if (type === 'number') {
        inputType.value = 'text';
        inputMode.value = 'decimal';
      } else if (type === 'digit') {
        inputType.value = 'tel';
        inputMode.value = 'numeric';
      } else {
        inputType.value = type;
      }
    };

    inputTypeInit(props.type);
    watch(function () {
      return props.type;
    }, inputTypeInit);
    var innerPlaceholder = computed(function () {
      if (props.readonly || props.disabled) {
        return '';
      }

      return props.placeholder;
    });
    var inputStyle = reactive({});

    var adjustSize = function adjustSize() {
      var input = unref(inputEl);

      if (!(props.type === 'textarea' && props.autoSize) || !input) {
        return;
      }

      inputStyle.height = 'auto';
      var height = input.scrollHeight;

      if (isObject(props.autoSize)) {
        var _props$autoSize = props.autoSize,
            maxHeight = _props$autoSize.maxHeight,
            minHeight = _props$autoSize.minHeight;

        if (maxHeight) {
          height = Math.min(height, maxHeight);
        }

        if (minHeight) {
          height = Math.max(height, minHeight);
        }
      }

      if (height) {
        inputStyle.height = height + 'px';
      }
    };

    onMounted(function () {
      adjustSize();
    });

    var renderClearIcon = function renderClearIcon() {
      return showClear.value ? createVNode("span", {
        "class": "fm-input-clear fm-icon fm-icon-cancel",
        "onTouchstart": onClear
      }, null) : '';
    };

    var renderWordLimit = function renderWordLimit() {
      return props.showWordLimit && props.maxlength ? createVNode("div", {
        "class": "fm-input-word-limit"
      }, [createVNode("span", {
        "class": "word-num"
      }, [String(innerValue.value).length]), createTextVNode("/"), props.maxlength]) : '';
    };

    var renderErrorMesagge = function renderErrorMesagge() {
      var className = props.errorMessageAlign ? "fm-input-error-message fm-input-error-message-" + props.errorMessageAlign : "fm-input-error-message";
      return props.errorMessage ? createVNode("div", {
        "class": className
      }, [props.errorMessage]) : '';
    };

    var renderInput = function renderInput() {
      return props.type === 'textarea' ? withDirectives(createVNode("textarea", {
        "ref": inputEl,
        "style": inputStyle,
        "class": ['fm-input-control', props.readonly ? 'fm-input-control-readonly' : ''],
        "onUpdate:modelValue": function onUpdateModelValue($event) {
          return innerValue.value = $event;
        },
        "placeholder": innerPlaceholder.value,
        "disabled": props.disabled,
        "readonly": props.readonly || !props.editable,
        "onBlur": onBlur,
        "onFocus": onFocus,
        "onInput": onInput,
        "onChange": stopPropagation,
        "onClick": onClickInput,
        "onKeypress": onKeypress
      }, null), [[vModelText, innerValue.value]]) : withDirectives(createVNode("input", {
        "ref": inputEl,
        "type": inputType.value,
        "inputmode": inputMode.value,
        "class": ['fm-input-control', props.inputAlign ? 'fm-input-control-' + props.inputAlign : '', props.readonly ? 'fm-input-control-readonly' : ''],
        "onUpdate:modelValue": function onUpdateModelValue($event) {
          return innerValue.value = $event;
        },
        "placeholder": innerPlaceholder.value,
        "disabled": props.disabled,
        "readonly": props.readonly || !props.editable,
        "onBlur": onBlur,
        "onFocus": onFocus,
        "onInput": onInput,
        "onChange": stopPropagation,
        "onClick": onClickInput,
        "onKeypress": onKeypress,
        "onCompositionstart": function onCompositionstart() {
          return compositioning = true;
        },
        "onCompositionend": onCompositionend
      }, null), [[vModelDynamic, innerValue.value]]);
    };

    var renderInputBody = function renderInputBody() {
      return createVNode("div", {
        "class": "fm-input-body"
      }, [slots.input ? createVNode("div", {
        "class": ['fm-input-control', props.inputAlign ? 'fm-input-control-' + props.inputAlign : '', props.readonly ? 'fm-input-control-readonly' : '']
      }, [slots.input()]) : renderInput(), renderClearIcon()]);
    };

    var renderBlock = function renderBlock() {
      return function () {
        return createVNode(Fragment, null, [slots["default"] ? slots["default"]() : renderInputBody(), renderWordLimit(), renderErrorMesagge()]);
      };
    };

    return function () {
      var innerSlots = {
        'left-icon': slots['left-icon'],
        'right-icon': slots['right-icon'],
        title: slots.title,
        label: slots.label,
        extra: slots.extra,
        "default": renderBlock()
      };
      var className = ['fm-input', props.type === 'textarea' ? 'fm-input-vertical' : '', props.disabled ? 'fm-input-disabled' : '', props.type === 'textarea' && !props.autoSize ? 'fm-input-min-height' : ''];
      return createVNode(resolveComponent("fm-cell"), {
        "class": className,
        "title": props.label,
        "required": props.required,
        "titleClass": "fm-input-label",
        "valueClass": "fm-input-value",
        "center": props.center,
        "isLink": props.isLink,
        "leftIcon": props.leftIcon,
        "rightIcon": props.rightIcon,
        "extra": props.extra
      }, _extends({}, innerSlots));
    };
  }
});

Input.install = function (app) {
  app.component(Input.name, Input);
};

var _hoisted_1$8 = {
  key: 0,
  "class": "footer"
};

var _hoisted_2$7 = /*#__PURE__*/createTextVNode("  ");
var __default__ = {
  name: 'fm-calendar-input'
};
var script$9 = defineComponent(_extends({}, __default__, {
  expose: [],
  props: _extends({}, InputCommonProps, CalendarProps, {
    modelValue: {
      type: [String, Object],
      "default": ''
    },
    theme: {
      type: String,
      "default": 'form'
    },
    label: {
      type: String,
      "default": ''
    },
    format: {
      type: String,
      "default": 'yyyy-MM-dd'
    }
  }),
  setup: function setup(__props) {
    var props = __props;

    var _useContext = useContext(),
        emit = _useContext.emit;

    var show = ref(false);

    var onInputClick = function onInputClick() {
      if (props.readonly || props.disabled) {
        return;
      }

      show.value = true;
      innerValue.value = getInnerValue(props.modelValue, props.format);
    };

    var getInnerValue = function getInnerValue(value, _format) {
      if (props.type === 'single') {
        return value ? parse(value, _format) : new Date();
      } else {
        var _ref = isString(value) ? value.split('~') : value != null && value.begin && value != null && value.end ? Object.values(value) : [],
            begin = _ref[0],
            end = _ref[1];

        return {
          begin: begin ? parse(begin, _format) : undefined,
          end: end ? parse(end, _format) : undefined
        };
      }
    };

    var getTextValue = function getTextValue(value, _format) {
      if (!value) {
        return '';
      }

      if (props.type === 'single') {
        return isDate(value) ? format(value, _format) : value;
      } else {
        return value.begin && value.end ? format(value.begin, _format) + '~' + format(value.end, _format) : '';
      }
    };

    var innerValue = ref(getInnerValue(props.modelValue, props.format));
    var innerText = ref(getTextValue(innerValue.value, props.format));
    watch(function () {
      return props.modelValue;
    }, function (newValue) {
      innerValue.value = newValue !== innerText.value ? getInnerValue(newValue, props.format) : innerValue.value;
      innerText.value = getTextValue(innerValue.value, props.format);
    });

    var onUpdateModelValue = function onUpdateModelValue() {
      if (props.type === 'single') {
        onConirm();
      }
    };

    var onConirm = function onConirm() {
      innerText.value = getTextValue(innerValue.value, props.format);
      var modelValue = '';

      if (props.type === 'single') {
        modelValue = isDate(props.modelValue) ? innerValue.value : innerText.value;
      } else {
        modelValue = isDate(props.modelValue['begin']) ? innerValue.value : innerText.value;
      }

      emit('update:modelValue', modelValue);
      show.value = false;
    };

    return function (_ctx, _cache) {
      var _component_fm_calendar = resolveComponent("fm-calendar");

      var _component_fm_button = resolveComponent("fm-button");

      var _component_fm_popup = resolveComponent("fm-popup");

      return openBlock(), createBlock(Fragment, null, [createVNode(unref(Input), {
        modelValue: innerText.value,
        label: __props.label,
        placeholder: _ctx.placeholder,
        required: _ctx.required,
        editable: false,
        readonly: _ctx.readonly,
        disabled: _ctx.disabled,
        clickable: !(props.readonly || props.disabled),
        inputAlign: _ctx.inputAlign,
        errorMessage: _ctx.errorMessage,
        errorMessageAlign: _ctx.errorMessageAlign,
        rightIcon: !(props.readonly || props.disabled) ? _ctx.rightIcon : '',
        onClick: onInputClick
      }, null, 8
      /* PROPS */
      , ["modelValue", "label", "placeholder", "required", "readonly", "disabled", "clickable", "inputAlign", "errorMessage", "errorMessageAlign", "rightIcon"]), createVNode(_component_fm_popup, {
        show: show.value,
        "onUpdate:show": _cache[3] || (_cache[3] = function ($event) {
          return show.value = $event;
        }),
        position: "bottom",
        "class": "fm-calendar-pop-wrapper",
        round: ""
      }, {
        "default": withCtx(function () {
          return [createVNode(_component_fm_calendar, {
            modelValue: innerValue.value,
            "onUpdate:modelValue": [_cache[1] || (_cache[1] = function ($event) {
              return innerValue.value = $event;
            }), onUpdateModelValue],
            theme: __props.theme,
            type: _ctx.type,
            title: __props.label,
            useLunar: _ctx.useLunar,
            firstDay: _ctx.firstDay,
            view: _ctx.view,
            mark: _ctx.mark,
            event: _ctx.event,
            events: _ctx.events,
            onRender: _cache[2] || (_cache[2] = function ($event) {
              return _ctx.$emit('render', $event);
            })
          }, null, 8
          /* PROPS */
          , ["modelValue", "theme", "type", "title", "useLunar", "firstDay", "view", "mark", "event", "events"]), _ctx.type !== 'single' ? (openBlock(), createBlock("div", _hoisted_1$8, [createVNode(_component_fm_button, {
            "class": "confirm",
            type: "primary",
            size: "large",
            round: "",
            onClick: onConirm
          }, {
            "default": withCtx(function () {
              return [_hoisted_2$7];
            }),
            _: 1
            /* STABLE */

          })])) : createCommentVNode("v-if", true)];
        }),
        _: 1
        /* STABLE */

      }, 8
      /* PROPS */
      , ["show"])], 64
      /* STABLE_FRAGMENT */
      );
    };
  }
}));

script$9.__file = "packages/calendar/src/calendar-input.vue";

script$8.install = function (app) {
  app.component(script$8.name, script$8);
};

script$9.install = function (app) {
  app.component(script$9.name, script$9);
};

var _components$6;
var script$a = {
  name: 'fm-cell',
  components: (_components$6 = {}, _components$6[script.name] = script, _components$6),
  props: {
    title: {
      type: [String, Number]
    },
    value: {
      type: [String, Number]
    },
    label: {
      type: [String, Number]
    },
    valueClass: {
      type: String
    },
    titleClass: {
      type: String
    },
    border: {
      type: Boolean,
      "default": true
    },
    required: {
      type: Boolean,
      "default": false
    },
    center: {
      type: Boolean,
      "default": false
    },
    isLink: {
      type: Boolean,
      "default": false
    },
    clickable: {
      type: Boolean,
      "default": false
    },
    leftIcon: [String, Boolean],
    rightIcon: [String, Boolean],
    extra: [String, Boolean]
  },
  setup: function setup(props, _ref) {
    var slots = _ref.slots;
    var showTitle = computed(function () {
      return props.title || slots.title;
    });
    var showValue = computed(function () {
      return props.value || isDef(props.value) || slots["default"];
    });
    var showLabel = computed(function () {
      return props.label || slots.label;
    });
    return {
      showTitle: showTitle,
      showLabel: showLabel,
      showValue: showValue
    };
  }
};

var _hoisted_1$9 = {
  "class": "fm-cell-title-text"
};
var _hoisted_2$8 = {
  key: 0,
  "class": "fm-cell-label"
};
var _hoisted_3$6 = {
  key: 0,
  style: {
    "padding-left": "4px"
  }
};
function render$9(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("div", {
    "class": ["fm-cell", {
      'fm-cell-noborder': !$props.border,
      'fm-cell-required': $props.required,
      'fm-cell-center': $props.center,
      'fm-cell-clickable': $props.clickable
    }]
  }, [$props.leftIcon || _ctx.$slots['left-icon'] ? (openBlock(), createBlock("div", {
    key: 0,
    "class": "fm-cell-left-icon",
    onClick: _cache[1] || (_cache[1] = withModifiers(function ($event) {
      return _ctx.$emit('leftIconClick');
    }, ["stop"]))
  }, [renderSlot(_ctx.$slots, "left-icon", {}, function () {
    return [createVNode(_component_fm_icon, {
      name: $props.leftIcon
    }, null, 8
    /* PROPS */
    , ["name"])];
  })])) : createCommentVNode("v-if", true), $setup.showTitle ? (openBlock(), createBlock("div", {
    key: 1,
    "class": ["fm-cell-title", [$props.titleClass]]
  }, [renderSlot(_ctx.$slots, "title", {}, function () {
    return [createVNode("span", _hoisted_1$9, toDisplayString($props.title), 1
    /* TEXT */
    )];
  }), $setup.showLabel ? (openBlock(), createBlock("div", _hoisted_2$8, [renderSlot(_ctx.$slots, "label", {}, function () {
    return [createVNode("span", null, toDisplayString($props.label), 1
    /* TEXT */
    )];
  })])) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  )) : createCommentVNode("v-if", true), $setup.showValue ? (openBlock(), createBlock("div", {
    key: 2,
    "class": ["fm-cell-value", [$props.valueClass, !$setup.showTitle ? 'fm-cell-value-alone' : '']]
  }, [renderSlot(_ctx.$slots, "default", {}, function () {
    return [createVNode("span", null, toDisplayString($props.value), 1
    /* TEXT */
    )];
  })], 2
  /* CLASS */
  )) : createCommentVNode("v-if", true), $props.rightIcon || _ctx.$slots['right-icon'] || $props.isLink ? (openBlock(), createBlock("div", {
    key: 3,
    "class": "fm-cell-right-icon",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return _ctx.$emit('rightIconClick');
    })
  }, [renderSlot(_ctx.$slots, "right-icon", {}, function () {
    return [createCommentVNode(" <span class=\"fm-icon fm-icon-s-arrow\"></span> "), createVNode(_component_fm_icon, {
      name: $props.rightIcon ? $props.rightIcon : 's-arrow'
    }, null, 8
    /* PROPS */
    , ["name"])];
  })])) : createCommentVNode("v-if", true), $props.extra || _ctx.$slots.extra ? (openBlock(), createBlock("div", {
    key: 4,
    "class": "fm-cell-extra",
    onClick: _cache[3] || (_cache[3] = function ($event) {
      return _ctx.$emit('extraClick');
    })
  }, [renderSlot(_ctx.$slots, "extra", {}, function () {
    return [$props.extra ? (openBlock(), createBlock("span", _hoisted_3$6, toDisplayString($props.extra), 1
    /* TEXT */
    )) : createCommentVNode("v-if", true)];
  })])) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  );
}

script$a.render = render$9;
script$a.__file = "packages/cell/src/index.vue";

script$a.install = function (app) {
  app.component(script$a.name, script$a);
};

var script$b = {
  name: 'fm-checker',
  props: {
    label: {
      type: String,
      "default": ''
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    shape: {
      type: String,
      "default": 'round'
    },
    checked: {
      type: Boolean,
      "default": false
    },
    modelValue: Boolean,
    checkedColor: {
      type: String,
      "default": '#3A90FF'
    },
    role: String,
    labelClass: String,
    type: {
      type: String,
      "default": 'check'
    },
    size: {
      type: [String, Boolean],
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var iconName = computed(function () {
      return props.shape === 'round' ? 's-checked' : 's-checkbox-checked';
    });
    var checkClass = computed(function () {
      var _ref2;

      return _ref2 = {
        'fm-check-readonly': props.readonly,
        'fm-check-disabled': props.disabled
      }, _ref2["fm-check-" + props.size] = !!props.size, _ref2;
    });

    var onClick = function onClick() {
      if (props.readonly || props.disabled) {
        return;
      }

      emit('update:checked', !props.checked);
    };

    return {
      iconName: iconName,
      checkClass: checkClass,
      onClick: onClick
    };
  }
};

function render$a(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("div", {
    "class": ["fm-check", $setup.checkClass],
    onClick: _cache[1] || (_cache[1] = function () {
      return $setup.onClick && $setup.onClick.apply($setup, arguments);
    })
  }, [renderSlot(_ctx.$slots, "default", {}, function () {
    return [$props.type === 'check' ? (openBlock(), createBlock("div", {
      key: 0,
      "class": ["fm-check-icon", {
        'fm-check-icon-checked': $props.checked,
        'fm-check-icon-round': $props.shape === 'round'
      }]
    }, [createVNode(_component_fm_icon, {
      name: "s-success"
    })], 2
    /* CLASS */
    )) : createCommentVNode("v-if", true), createVNode("div", {
      "class": ["fm-check-label", ['fm-check-' + $props.type, $props.checked && $props.type === 'button' ? 'fm-check-button-checked' : '', $props.labelClass]]
    }, [createVNode("span", null, toDisplayString($props.label), 1
    /* TEXT */
    )], 2
    /* CLASS */
    )];
  })], 2
  /* CLASS */
  );
}

script$b.render = render$a;
script$b.__file = "packages/checkbox/src/check.vue";

var _components$7;
var script$c = {
  name: 'fm-checkbox-group',
  components: (_components$7 = {}, _components$7[script$b.name] = script$b, _components$7),
  props: {
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    shape: {
      type: String,
      "default": 'square'
    },
    checked: {
      type: Boolean,
      "default": true
    },
    modelValue: {
      type: [String, Array],
      "default": []
    },
    checkedColor: {
      type: String,
      "default": '#3A90FF'
    },
    role: String,
    labelClass: String,
    direction: {
      type: String,
      "default": 'vertical'
    },
    items: Array,
    valueField: {
      type: String,
      "default": 'value'
    },
    textField: {
      type: String,
      "default": 'text'
    },
    type: {
      type: String,
      "default": 'check'
    },
    size: {
      type: String,
      "default": 'normal'
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onCheckedChange = function onCheckedChange(checked, value) {
      var modelValue = handlerModeChange(checked, value);
      emit('update:modelValue', modelValue);
    };

    var handlerModeChange = function handlerModeChange(checked, value) {
      var type = getType(props.modelValue);
      var checkeds = type === 'array' ? [].concat(props.modelValue) : props.modelValue ? props.modelValue.split(',') : [];

      if (checked) {
        checkeds.push(value);
      } else {
        checkeds = checkeds.filter(function (item) {
          return item !== value;
        });
      }

      return type === 'array' ? checkeds : checkeds.join(',');
    };

    var getCheckedIndex = function getCheckedIndex(value) {
      var type = getType(props.modelValue);

      if (type === 'string') {
        return props.modelValue.split(',').findIndex(function (item) {
          return item === value;
        });
      } else if (type === 'array') {
        return props.modelValue.findIndex(function (item) {
          return item === value;
        });
      }

      return -1;
    };

    var isChecked = function isChecked(value) {
      return getCheckedIndex(value) > -1 ? true : false;
    };

    return {
      isChecked: isChecked,
      onCheckedChange: onCheckedChange
    };
  }
};

function render$b(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_checker = resolveComponent("fm-checker");

  var _component_fm_cell = resolveComponent("fm-cell");

  return openBlock(), createBlock("div", {
    "class": "fm-checkbox-group",
    role: $props.role
  }, [$props.direction === 'vertical' ? (openBlock(true), createBlock(Fragment, {
    key: 0
  }, renderList($props.items, function (item) {
    return openBlock(), createBlock(_component_fm_cell, {
      key: item[$props.valueField],
      "class": "fm-checkbox-vertical"
    }, {
      "default": withCtx(function () {
        return [createVNode(_component_fm_checker, {
          label: item[$props.textField],
          disabled: $props.disabled,
          readonly: $props.readonly,
          shape: $props.shape,
          checked: $setup.isChecked(item[$props.valueField]),
          checkedColor: $props.checkedColor,
          type: $props.type,
          "onUpdate:checked": function onUpdateChecked($event) {
            return $setup.onCheckedChange($event, item[$props.valueField]);
          }
        }, null, 8
        /* PROPS */
        , ["label", "disabled", "readonly", "shape", "checked", "checkedColor", "type", "onUpdate:checked"])];
      }),
      _: 2
      /* DYNAMIC */

    }, 1024
    /* DYNAMIC_SLOTS */
    );
  }), 128
  /* KEYED_FRAGMENT */
  )) : createCommentVNode("v-if", true), $props.direction === 'horizontal' ? (openBlock(), createBlock("div", {
    key: 1,
    "class": 'fm-checkbox-' + $props.direction
  }, [(openBlock(true), createBlock(Fragment, null, renderList($props.items, function (item) {
    return openBlock(), createBlock(_component_fm_checker, {
      "class": "fm-checkbox",
      key: item[$props.valueField],
      label: item[$props.textField],
      disabled: $props.disabled,
      readonly: $props.readonly,
      shape: $props.shape,
      checked: $setup.isChecked(item[$props.valueField]),
      checkedColor: $props.checkedColor,
      type: $props.type,
      size: $props.size,
      "onUpdate:checked": function onUpdateChecked($event) {
        return $setup.onCheckedChange($event, item[$props.valueField]);
      }
    }, null, 8
    /* PROPS */
    , ["label", "disabled", "readonly", "shape", "checked", "checkedColor", "type", "size", "onUpdate:checked"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))], 2
  /* CLASS */
  )) : createCommentVNode("v-if", true)], 8
  /* PROPS */
  , ["role"]);
}

script$c.render = render$b;
script$c.__file = "packages/checkbox/src/checkbox-group.vue";

script$c.install = function (app) {
  app.component(script$c.name, script$c);
};

script$b.install = function (app) {
  app.component(script$b.name, script$b);
};

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function __rest(s, e) {
  var t = {};

  for (var p in s) {
    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  }

  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
}

function _isSlot(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);
}

var Collapse = defineComponent({
  name: 'fm-collapse',
  props: {
    isInner: Boolean,
    collapse: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        slots = _ref.slots;
    var activeItem = ref(props.collapse ? [] : [1]);
    watch(function () {
      return props.collapse;
    }, function (value) {
      activeItem.value = value ? [] : [1];
    });

    var onChange = attrs.onChange,
        collapseAttrs = __rest(attrs, ["onChange"]);

    var itemProps = Object.assign({
      name: 1
    }, collapseAttrs);
    return function () {
      var _slot;

      return createVNode(resolveComponent("van-collapse"), {
        "modelValue": activeItem.value,
        "onUpdate:modelValue": function onUpdateModelValue($event) {
          return activeItem.value = $event;
        },
        "onChange": true,
        "class": "fm-cmp-collapse-style"
      }, _isSlot(_slot = createVNode(resolveComponent("van-collapse-item"), mergeProps(itemProps, {
        "class": props.isInner ? 'fm-tmpl-collapse-sub-header' : ''
      }), _extends({}, slots))) ? _slot : {
        "default": function _default() {
          return [_slot];
        }
      });
    };
  }
});

Collapse.install = function (app) {
  app.component(Collapse.name, Collapse);
};

function _isSlot$1(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);
}

var Overlay = defineComponent({
  name: 'fm-overlay',
  props: {
    show: Boolean,
    zIndex: [Number, String],
    duration: [Number, String],
    className: null,
    customStyle: Object,
    lockScroll: {
      type: Boolean,
      "default": true
    }
  },
  setup: function setup(props, _ref) {
    var slots = _ref.slots;
    var lazyRender = useLazyRender(function () {
      return props.show;
    });

    var preventTouchMove = function preventTouchMove(event) {
      preventDefault(event, true);
    };

    var renderOverlay = lazyRender(function () {
      var _a;

      var style = Object.assign({
        zIndex: props.zIndex !== undefined ? +props.zIndex : undefined,
        animationDuration: props.duration ? props.duration + "s" : ''
      }, props.customStyle);
      return withDirectives(createVNode("div", {
        "style": style,
        "class": ['fm-overlay', props.className],
        "onTouchmove": props.lockScroll ? preventTouchMove : noop
      }, [(_a = slots["default"]) === null || _a === void 0 ? void 0 : _a.call(slots)]), [[vShow, props.show]]);
    });
    return function () {
      var _slot;

      return createVNode(Transition, {
        "name": "fm-fade"
      }, _isSlot$1(_slot = renderOverlay()) ? _slot : {
        "default": function _default() {
          return [_slot];
        }
      });
    };
  }
});

Overlay.install = function (app) {
  app.component(Overlay.name, Overlay);
};

var _components$8;

function _isSlot$2(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);
}

var Popup = defineComponent({
  name: 'fm-popup',
  components: (_components$8 = {}, _components$8[Overlay.name] = Overlay, _components$8),
  props: {
    show: Boolean,
    zIndex: [Number, String],
    duration: [Number, String],
    teleport: String,
    position: String,
    overlay: {
      type: Boolean,
      "default": true
    },
    closeOnClickOverlay: {
      type: Boolean,
      "default": true
    },
    lockScroll: {
      type: Boolean,
      "default": true
    },
    round: {
      type: Boolean,
      "default": false
    },
    transition: String,
    overlayStyle: Object
  },
  emit: ['click', 'opened', 'closed', 'update:show'],
  setup: function setup(props, _ref) {
    var _className;

    var emit = _ref.emit,
        attrs = _ref.attrs,
        slots = _ref.slots;

    var getTransitionName = function getTransitionName(position) {
      switch (position) {
        case 'bottom':
          return 'fm-slide-up';

        case 'top':
          return 'fm-slide-down';

        case 'left':
          return 'fm-slide-left';

        case 'right':
          return 'fm-slide-right';

        default:
          return 'fm-fade';
      }
    };

    var className = (_className = {
      'fm-popup': true,
      'fm-popup-round': props.round
    }, _className["fm-popup-" + props.position] = props.position, _className);

    var _useLockScroll = useLockScroll(function () {
      return props.lockScroll;
    }),
        lockScroll = _useLockScroll[0],
        unlockScroll = _useLockScroll[1];

    var close = function close() {
      props.show && emit('update:show', false);
    };

    var clickAwayActive = ref(false);
    var popupRef = ref();
    useClickAway(popupRef, close, {
      active: clickAwayActive
    });
    watch(function () {
      return props.show;
    }, function (value) {
      if (value) {
        lockScroll();
        setTimeout(function () {
          clickAwayActive.value = true;
        });
      } else {
        unlockScroll();
        clickAwayActive.value = false;
      }
    });

    var renderTransition = function renderTransition() {
      var _slot;

      var _a;

      var name = getTransitionName(props.position);
      var style = {
        zIndex: props.zIndex !== undefined ? +props.zIndex : undefined,
        transitionDuration: props.duration + "s"
      };
      return createVNode(Transition, {
        "name": props.transition || name,
        "onAfterEnter": function onAfterEnter() {
          return emit('opened');
        },
        "onAfterLeave": function onAfterLeave() {
          return emit('closed');
        }
      }, _isSlot$2(_slot = withDirectives(createVNode("div", mergeProps({
        "ref": popupRef,
        "style": style,
        "class": className,
        "onClick": function onClick() {
          return emit('click');
        }
      }, attrs), [(_a = slots["default"]) === null || _a === void 0 ? void 0 : _a.call(slots)]), [[vShow, props.show]])) ? _slot : {
        "default": function _default() {
          return [_slot];
        }
      });
    };

    var onOverlayClick = function onOverlayClick(event) {
      event.stopPropagation();
      props.closeOnClickOverlay && close();
    };

    var renderOverlay = function renderOverlay() {
      var overlayIndex = props.zIndex !== undefined ? Number(props.zIndex) - 1 : undefined;

      if (props.overlay) {
        return createVNode(resolveComponent("fm-overlay"), {
          "style": props.overlayStyle,
          "show": props.show,
          "zIndex": overlayIndex,
          "duration": props.duration,
          "onClick": onOverlayClick
        }, null);
      }
    };

    return function () {
      if (props.teleport) {
        return createVNode(Teleport, {
          "to": props.teleport
        }, {
          "default": function _default() {
            return [renderOverlay(), renderTransition()];
          }
        });
      }

      return createVNode(Fragment, null, [renderOverlay(), renderTransition()]);
    };
  }
});

Popup.install = function (app) {
  app.component(Popup.name, Popup);
};

var _components$9;
var DatePicker = defineComponent({
  name: 'fm-datetime-picker',
  inheritAttrs: false,
  components: (_components$9 = {}, _components$9[Input.name] = Input, _components$9[Popup.name] = Popup, _components$9[DatetimePicker.name] = DatetimePicker, _components$9),
  props: {
    format: {
      type: String,
      "default": 'YYYY-MM-DD HH:mm:ss'
    },
    modelValue: {
      type: [String, Date],
      "default": ''
    },
    placeholder: {
      type: String,
      "default": ''
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    rightIcon: {
      type: [String, Boolean],
      "default": 's-arrow'
    },
    teleport: {
      type: String,
      "default": ''
    },
    "class": {
      type: String,
      "default": ''
    },
    zIndex: [Number, String],
    useCurrentSecond: {
      type: Boolean,
      "default": false
    }
  },
  emits: ['click', 'update:modelValue', 'change', 'cancel'],
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        emit = _ref.emit,
        slots = _ref.slots;
    var enableShow = ref(false);
    var enableShowDate = ref(false);
    watch(enableShow, function (value) {
      if (!value) {
        setTimeout(function () {
          return enableShowDate.value = value;
        }, 300);
      } else {
        enableShowDate.value = value;
      }
    });

    var formatDate = function formatDate(date) {
      if (date instanceof Date) {
        return format(date, props.format);
      } else {
        return date;
      }
    };

    var parseDate = function parseDate(date) {
      var valueType = attrs.type === 'time' ? 'string' : 'date';

      if (date instanceof Date) {
        return valueType === 'date' ? date : formatDate(date);
      } else {
        return valueType === 'date' ? parse(date) : date;
      }
    };

    var defaultValue = parseDate(props.modelValue ? formatDate(props.modelValue) : new Date());
    var innerValue = ref(formatDate(props.modelValue));
    watch(function () {
      return props.modelValue;
    }, function (value) {
      innerValue.value = formatDate(value);
      defaultValue = parseDate(props.modelValue ? formatDate(props.modelValue) : new Date());
    });
    var isEditable = computed(function () {
      return !(props.readonly || props.disabled);
    });

    var handleClick = function handleClick(event) {
      if (!isEditable.value) {
        return;
      }

      emit('click', event);
      enableShow.value = true;
      defaultValue = parseDate(props.modelValue ? formatDate(props.modelValue) : defaultValue);
    };

    var handleConfirm = function handleConfirm(value) {
      if (value instanceof Date && props.useCurrentSecond) {
        var seconds = new Date().getSeconds();
        value.setSeconds(seconds);
      }

      innerValue.value = formatDate(value);
      enableShow.value = false;
      emit('change', value);
      emit('update:modelValue', value);
    };

    var handleClose = function handleClose() {
      enableShow.value = false;
      emit('cancel');
    };

    return function () {
      var name = attrs.name,
          label = attrs.label,
          inputClass = attrs.inputClass,
          _attrs$required = attrs.required,
          required = _attrs$required === void 0 ? false : _attrs$required,
          disabled = attrs.disabled,
          _attrs$inputAlign = attrs.inputAlign,
          inputAlign = _attrs$inputAlign === void 0 ? 'right' : _attrs$inputAlign,
          errorMessage = attrs['error-message'],
          errorMessageAlign = attrs['error-message-align'],
          onClick = attrs.onClick,
          onConfirm = attrs.onConfirm,
          onCancel = attrs.onCancel,
          onFocus = attrs.onFocus,
          onClear = attrs.onClear,
          maxValue = attrs.maxValue,
          minValue = attrs.minValue,
          slotAttrs = __rest(attrs, ["name", "label", "inputClass", "required", "disabled", "inputAlign", 'error-message', 'error-message-align', "onClick", "onConfirm", "onCancel", "onFocus", "onClear", "maxValue", "minValue"]);

      var inputProps = {
        editable: false,
        clickable: isEditable.value,
        readonly: props.readonly,
        disabled: props.disabled,
        name: name,
        label: label,
        placeholder: props.placeholder,
        required: required,
        inputAlign: inputAlign,
        errorMessage: errorMessage,
        errorMessageAlign: errorMessageAlign,
        onFocus: onFocus,
        onClear: onClear,
        "class": inputClass,
        rightIcon: isEditable.value ? props.rightIcon : ''
      };

      var renderInput = function renderInput() {
        return createVNode("div", {
          "class": "fm-datetimepicker-input fm-picker-input",
          "onClick": handleClick
        }, [slots.input ? slots.input(Object.assign(Object.assign({}, inputProps), {
          modelValue: innerValue.value
        })) : createVNode(resolveComponent("fm-input"), mergeProps({
          "modelValue": innerValue.value
        }, inputProps), _extends({}, slots))]);
      };

      var slotProps = Object.assign({
        onConfirm: handleConfirm,
        onCancel: handleClose
      }, slotAttrs);

      if (minValue) {
        slotProps.minDate = parse(minValue);
      }

      if (maxValue) {
        slotProps.maxDate = parse(maxValue);
      }

      return createVNode("div", {
        "class": "fm-datetimepicker fm-picker" + props["class"]
      }, [createVNode(Popup, {
        "show": enableShow.value,
        "onUpdate:show": function onUpdateShow($event) {
          return enableShow.value = $event;
        },
        "position": "bottom",
        "teleport": props.teleport,
        "zIndex": props.zIndex
      }, {
        "default": function _default() {
          return [enableShowDate.value ? createVNode(resolveComponent("van-datetime-picker"), mergeProps({
            "modelValue": defaultValue
          }, slotProps, {
            "class": "fm-picker-panel"
          }), null) : null];
        }
      }), renderInput()]);
    };
  }
});

DatePicker.install = function (app) {
  app.component(DatePicker.name, DatePicker);
};

var _components$a;

function _isSlot$3(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);
}

var FMDialog = defineComponent({
  name: 'fm-dialog',
  components: (_components$a = {}, _components$a[script$1.name] = script$1, _components$a),
  props: {
    title: String,
    message: String,
    messageAlign: {
      type: String,
      "default": 'center'
    },
    show: Boolean,
    overlay: {
      type: Boolean,
      "default": true
    },
    lockScroll: {
      type: Boolean,
      "default": true
    },
    teleport: {
      type: String,
      "default": 'body'
    },
    buttonLayout: {
      type: String,
      "default": 'row'
    },
    btns: Array,
    className: {
      type: String
    },
    showClose: {
      type: Boolean,
      "default": false
    }
  },
  emits: ["update:show", "open", "close"],
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        slots = _ref.slots,
        emit = _ref.emit;
    var isOpen = ref(props.show);
    watch(function () {
      return props.show;
    }, function (show) {
      isOpen.value = show;

      if (show) {
        emit('open');
      } else {
        emit('close');
      }
    });

    var close = function close() {
      isOpen.value = false;
      emit('close');
      emit('update:show', false);
    };

    var renderHeader = function renderHeader() {
      return props.title ? createVNode("div", {
        "class": "fm-dialog-header"
      }, [slots.header ? slots.header() : props.title]) : '';
    };

    var renderContent = function renderContent() {
      var className = ['fm-dialog-content-message'];
      var style = {
        textAlign: props.messageAlign
      };

      if (props.title) {
        className.push('fm-dialog-content-message-has-title');
      }

      var contentClass = ['fm-dialog-content', props.className];
      return createVNode("div", {
        "class": contentClass
      }, [slots["default"] ? slots["default"]() : createVNode("div", {
        "class": className,
        "style": style
      }, [props.message])]);
    };

    var onButtonClick = function onButtonClick(event, button) {
      preventDefault(event, true);

      if (button.disabled || button.loading) {
        return;
      }

      if (typeof button.handler === 'function') {
        button.handler.call(null, button);
      } else {
        isOpen.value = false;
        emit('update:show', false);
      }
    };

    var renderFooter = function renderFooter() {
      var _a;

      var className = ['fm-dialog-footer'];

      if (props.buttonLayout === 'column') {
        className.push('fm-dialog-footer-is-column');
      }

      return createVNode("div", {
        "class": className
      }, [slots.footer ? slots.footer() : (_a = props.btns) === null || _a === void 0 ? void 0 : _a.map(function (button) {
        return createVNode(resolveComponent("fm-button"), {
          "type": button.type ? button.type : 'info',
          "plain": true,
          "block": true,
          "size": "large",
          "disabled": !!button.disabled,
          "onClick": function onClick(event) {
            onButtonClick(event, button);
          }
        }, {
          "default": function _default() {
            return [button.text];
          }
        });
      })]);
    };

    var renderClose = function renderClose() {
      var className = ['fm-dialog-close'];

      if (props.showClose) {
        return createVNode("div", {
          "class": className,
          "onClick": close
        }, [createVNode("span", {
          "class": "fm-icon fm-icon-s-cross"
        }, null)]);
      }
    };

    var renderDialog = function renderDialog() {
      var className = ['fm-dialog'];

      if (props.showClose) {
        className.push('fm-dialog-relative');
      }

      return createVNode("div", mergeProps({
        "class": className
      }, attrs), [renderHeader(), renderContent(), renderFooter(), renderClose()]);
    };

    return function () {
      var _slot;

      var overlay = props.overlay,
          lockScroll = props.lockScroll;
      return createVNode(Popup, {
        "show": isOpen.value,
        "overlay": overlay,
        "position": "center",
        "lockScroll": lockScroll,
        "style": "border-radius: 14px;"
      }, _isSlot$3(_slot = renderDialog()) ? _slot : {
        "default": function _default() {
          return [_slot];
        }
      });
    };
  }
});

var instance;

function defaultOptions() {
  return {
    title: '',
    message: '',
    messageAlign: 'center',
    overlay: true,
    lockScroll: true,
    teleport: 'body',
    buttonLayout: 'row',
    btns: [],
    showClose: false
  };
}

function parseOptions(message) {
  return isObject(message) ? message : {
    message: message
  };
}

var initInstance = function initInstance() {

  var _mountComponent = mountComponent({
    setup: function setup() {
      var _usePopupState = usePopupState(),
          state = _usePopupState.state,
          toggle = _usePopupState.toggle;

      return function () {
        return createVNode(FMDialog, Object.assign(Object.assign({}, state), {
          'onUpdate:show': toggle
        }), null);
      };
    }
  });

  instance = _mountComponent.instance;
};

function Dialog(options) {
  if (!inBrowser) {
    return;
  }

  if (!instance) {
    initInstance();
  }

  options = Object.assign(Object.assign({}, Dialog.currentOptions), parseOptions(options));
  instance.open(options);
  return instance;
}

Dialog.clear = function () {
  if (instance) {
    instance.toggle(false);
  }
};

Dialog.confirm = function (options) {
  var _options$cancelText = options.cancelText,
      cancelText = _options$cancelText === void 0 ? '' : _options$cancelText,
      _options$confirmText = options.confirmText,
      confirmText = _options$confirmText === void 0 ? '' : _options$confirmText,
      _options$onConfirm = options.onConfirm,
      onConfirm = _options$onConfirm === void 0 ? function () {} : _options$onConfirm,
      _options$onCancel = options.onCancel,
      onCancel = _options$onCancel === void 0 ? function () {} : _options$onCancel,
      others = __rest(options, ["cancelText", "confirmText", "onConfirm", "onCancel"]);

  var _options = Object.assign({
    btns: [{
      text: cancelText,
      type: 'default',
      handler: function handler() {
        onCancel();
        instance.close();
      }
    }, {
      text: confirmText,
      handler: function handler() {
        onConfirm();
        instance.close();
      }
    }]
  }, others);

  Dialog(_options);
};

Dialog.alert = function (options) {
  var _options$confirmText2 = options.confirmText,
      confirmText = _options$confirmText2 === void 0 ? '' : _options$confirmText2,
      _options$onConfirm2 = options.onConfirm,
      onConfirm = _options$onConfirm2 === void 0 ? function () {} : _options$onConfirm2,
      others = __rest(options, ["confirmText", "onConfirm"]);

  var _options = Object.assign({
    btns: [{
      text: confirmText,
      handler: function handler() {
        onConfirm();
        instance.close();
      }
    }]
  }, others);

  Dialog(_options);
};

Dialog.currentOptions = defaultOptions();

Dialog.setDefaultOptions = function (options) {
  Object.assign(Dialog.currentOptions, options);
};

Dialog.resetDefaultOptions = function () {
  Dialog.currentOptions = defaultOptions();
};

Dialog.install = function (app) {
  app.component(FMDialog.name, FMDialog);
  app.config.globalProperties.$dialog = Dialog;
};

Dialog.Component = FMDialog;

var script$d = {
  name: 'field-check',
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    modelValue: Boolean
  },
  emits: ['update:modelValue'],
  data: function data() {
    var _this$fieldProps;

    return {
      placeholder: (_this$fieldProps = this.fieldProps) != null && _this$fieldProps.placeholder ? this.fieldProps.placeholder : ''
    };
  },
  computed: {
    innerValue: {
      set: function set(val) {
        this.$emit('update:modelValue', val);
      },
      get: function get() {
        return this.modelValue;
      }
    }
  }
};

function render$c(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_switch = resolveComponent("fm-switch");

  return openBlock(), createBlock(Fragment, null, [createCommentVNode(" <fm-input\r\n    :name=\"code\"\r\n    :placeholder=\"placeholder\"\r\n    input-align=\"left\"\r\n    class=\"pl-0 pr-0\"\r\n  >\r\n    <template #input>\r\n    </template>\r\n  </fm-input> "), createVNode(_component_fm_switch, {
    modelValue: $options.innerValue,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $options.innerValue = $event;
    })
  }, null, 8
  /* PROPS */
  , ["modelValue"])], 2112
  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */
  );
}

script$d.render = render$c;
script$d.__file = "packages/filter-panel/src/components/check.vue";

var _components$b;
var currentYear = new Date().getFullYear();
var script$e = {
  name: 'field-date',
  inheritAttrs: false,
  components: (_components$b = {}, _components$b[DatePicker.name] = DatePicker, _components$b),
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    // eslint-disable-next-line vue/require-prop-type-constructor
    modelValue: [String, Date]
  },
  emits: ['update:modelValue'],
  data: function data() {
    var _this$fieldProps, _this$fieldProps2, _this$fieldProps3, _this$fieldProps4, _this$fieldProps5;

    return {
      placeholder: (_this$fieldProps = this.fieldProps) != null && _this$fieldProps.placeholder ? this.fieldProps.placeholder : '',
      format: (_this$fieldProps2 = this.fieldProps) != null && _this$fieldProps2.format ? this.fieldProps.format : 'yyyy-MM-dd',
      type: (_this$fieldProps3 = this.fieldProps) != null && _this$fieldProps3.type ? this.fieldProps.type : 'date',
      minValue: (_this$fieldProps4 = this.fieldProps) != null && _this$fieldProps4.minValue ? parse(this.fieldProps.minValue) : new Date(currentYear - 10, 0, 1),
      maxValue: (_this$fieldProps5 = this.fieldProps) != null && _this$fieldProps5.maxValue ? parse(this.fieldProps.maxValue) : new Date(currentYear + 10, 11, 31)
    };
  },
  watch: {
    fieldProps: function fieldProps() {
      var _this$fieldProps6, _this$fieldProps7;

      this.minValue = (_this$fieldProps6 = this.fieldProps) != null && _this$fieldProps6.minValue ? parse(this.fieldProps.minValue) : new Date(currentYear - 10, 0, 1);
      this.maxValue = (_this$fieldProps7 = this.fieldProps) != null && _this$fieldProps7.maxValue ? parse(this.fieldProps.maxValue) : new Date(currentYear + 10, 11, 31);
    }
  },
  computed: {
    innerValue: {
      set: function set(val) {
        this.$emit('update:modelValue', this.formatDate(val));
      },
      get: function get() {
        if (this.type === 'date' && this.modelValue) {
          return this.formatDate(parse(this.modelValue));
        }

        return this.modelValue;
      }
    }
  },
  methods: {
    onConfirm: function onConfirm(value) {
      this.innerValue = value;
    },
    formatDate: function formatDate(date) {
      if (date instanceof Date) {
        return format(date, this.format);
      } else {
        return date;
      }
    }
  }
};

function render$d(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_datetime_picker = resolveComponent("fm-datetime-picker");

  return openBlock(), createBlock(_component_fm_datetime_picker, {
    "class": "fm-picker-row",
    modelValue: $options.innerValue,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return $options.innerValue = $event;
    }),
    type: $data.type,
    placeholder: $data.placeholder,
    format: $data.format,
    "min-date": $data.minValue,
    "max-date": $data.maxValue,
    inputClass: "fm-filter-panel-field-input",
    inputAlign: "center",
    rightIcon: false,
    teleport: "body",
    zIndex: "100"
  }, null, 8
  /* PROPS */
  , ["modelValue", "type", "placeholder", "format", "min-date", "max-date"]);
}

script$e.render = render$d;
script$e.__file = "packages/filter-panel/src/components/date.vue";

var _components$c;
var currentYear$1 = new Date().getFullYear();
var script$f = {
  name: 'field-date-range',
  components: (_components$c = {}, _components$c[script$e.name] = script$e, _components$c),
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    // eslint-disable-next-line vue/require-prop-type-constructor
    modelValue: [Object, String]
  },
  emits: ['update:modelValue'],
  data: function data() {
    var _this$fieldProps, _this$fieldProps2, _this$fieldProps3, _this$fieldProps4, _this$fieldProps5;

    return {
      active: [this.id],
      firstValue: null,
      secondValue: null,
      placeholder: (_this$fieldProps = this.fieldProps) != null && _this$fieldProps.placeholder ? this.fieldProps.placeholder : '',
      format: (_this$fieldProps2 = this.fieldProps) != null && _this$fieldProps2.format ? this.fieldProps.format : 'yyyy-MM-dd',
      type: (_this$fieldProps3 = this.fieldProps) != null && _this$fieldProps3.type ? this.fieldProps.type : 'date',
      minValue: (_this$fieldProps4 = this.fieldProps) != null && _this$fieldProps4.minValue ? parse(this.fieldProps.minValue) : new Date(currentYear$1 - 10, 0, 1),
      maxValue: (_this$fieldProps5 = this.fieldProps) != null && _this$fieldProps5.maxValue ? parse(this.fieldProps.maxValue) : new Date(currentYear$1 + 10, 11, 31)
    };
  },
  computed: {
    preMaxVlaue: function preMaxVlaue() {
      return this.secondValue ? parse(this.secondValue) : this.maxValue;
    },
    nextMinValue: function nextMinValue() {
      return this.firstValue ? parse(this.firstValue) : this.minValue;
    }
  },
  watch: {
    modelValue: {
      handler: function handler(value) {
        if (!value) {
          return;
        }

        this.firstValue = value.firstValue ? value.firstValue : null;
        this.secondValue = value.secondValue ? value.secondValue : null; // this.innerShow = value;
      },
      immediate: true,
      deep: true
    }
  },
  methods: {
    onConfirmFirst: function onConfirmFirst(value) {
      this.firstValue = value;
      this.onInput();
    },
    onConfirmSecond: function onConfirmSecond(value) {
      this.secondValue = value;
      this.onInput();
    },
    onInput: function onInput() {
      this.$emit('update:modelValue', {
        firstValue: this.formatDate(this.firstValue),
        secondValue: this.formatDate(this.secondValue, true)
      });
    },
    formatDate: function formatDate(date, isEnd) {
      var formater = this.format;

      if (this.type === 'date' && date) {
        date = parse(date);
        formater = formater + ' HH:mm:ss';

        if (isEnd) {
          date.setHours(23);
          date.setMinutes(59);
          date.setSeconds(59);
        } else {
          date.setHours(0);
        }

        console.log(date);
      }

      if (date instanceof Date) {
        return format(date, formater);
      } else {
        return date;
      }
    }
  }
};

var _hoisted_1$a = {
  "class": "fm-filter-panel-field-range"
};

var _hoisted_2$9 = /*#__PURE__*/createVNode("span", {
  "class": "fm-filter-panel-field-split"
}, null, -1
/* HOISTED */
);

function render$e(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_field_date = resolveComponent("field-date");

  return openBlock(), createBlock("div", _hoisted_1$a, [createVNode(_component_field_date, {
    fieldProps: {
      placeholder: $data.placeholder,
      format: $data.format,
      type: $data.type,
      minValue: $data.minValue,
      maxValue: $options.preMaxVlaue
    },
    code: $props.code,
    modelValue: $data.firstValue,
    "onUpdate:modelValue": [_cache[1] || (_cache[1] = function ($event) {
      return $data.firstValue = $event;
    }), $options.onConfirmFirst]
  }, null, 8
  /* PROPS */
  , ["fieldProps", "code", "modelValue", "onUpdate:modelValue"]), _hoisted_2$9, createVNode(_component_field_date, {
    fieldProps: {
      placeholder: $data.placeholder,
      format: $data.format,
      type: $data.type,
      minValue: $options.nextMinValue,
      maxValue: $data.maxValue
    },
    code: $props.code,
    modelValue: $data.secondValue,
    "onUpdate:modelValue": [_cache[2] || (_cache[2] = function ($event) {
      return $data.secondValue = $event;
    }), $options.onConfirmSecond]
  }, null, 8
  /* PROPS */
  , ["fieldProps", "code", "modelValue", "onUpdate:modelValue"])]);
}

script$f.render = render$e;
script$f.__file = "packages/filter-panel/src/components/date-range.vue";

var script$g = {
  name: 'panel-list',
  props: {
    modelValue: {
      type: String,
      "default": ''
    },
    text: {
      type: String,
      "default": ''
    },
    data: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    textField: {
      type: String,
      "default": 'name'
    },
    valueField: {
      type: String,
      "default": 'value'
    },
    multiSelect: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var innerData = computed(function () {
      return props.data ? toMultidimensional(props.data, 3) : [];
    });
    var selected = computed(function () {
      return props.modelValue ? props.modelValue.split(',') : [];
    });

    var isSelected = function isSelected(value) {
      return unref(selected).includes(value);
    };

    var onItemClick = function onItemClick(item) {
      emit('item-click', item);
      onModelChange(item[props.valueField]);
    };

    var onModelChange = function onModelChange(value) {
      var tmpValue = '';

      if (isSelected(value)) {
        if (props.multiSelect) {
          tmpValue = unref(selected).filter(function (el) {
            return el !== value;
          }).join(',');
        }
      } else {
        if (props.multiSelect) {
          tmpValue = [].concat(unref(selected), [value]).join(',');
        } else {
          tmpValue = value;
        }
      }

      emit('update:modelValue', tmpValue);
      emit('update:text', getText(tmpValue));
    };

    var getText = function getText(vlaue) {
      if (vlaue === void 0) {
        vlaue = '';
      }

      return vlaue.split(',').map(function (v) {
        var target = props.data.find(function (item) {
          return item[props.valueField] === v;
        });
        return target ? target[props.textField] : v;
      }).join(',');
    };

    var bem = useBem('fm-filter-panel');
    return {
      innerData: innerData,
      onItemClick: onItemClick,
      bem: bem,
      isSelected: isSelected
    };
  }
};

function render$f(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": $setup.bem('list')
  }, [(openBlock(true), createBlock(Fragment, null, renderList($setup.innerData, function (lineData, index) {
    return openBlock(), createBlock("div", {
      "class": $setup.bem('list-line'),
      key: index
    }, [(openBlock(true), createBlock(Fragment, null, renderList(lineData, function (item) {
      return openBlock(), createBlock("div", {
        "class": [$setup.bem('list-item'), $setup.isSelected(item[$props.valueField]) ? $setup.bem('list-item-selected') : ''],
        key: item[$props.valueField],
        onClick: function onClick($event) {
          return $setup.onItemClick(item);
        }
      }, [createVNode("span", null, toDisplayString(item[$props.textField]), 1
      /* TEXT */
      )], 10
      /* CLASS, PROPS */
      , ["onClick"]);
    }), 128
    /* KEYED_FRAGMENT */
    ))], 2
    /* CLASS */
    );
  }), 128
  /* KEYED_FRAGMENT */
  ))], 2
  /* CLASS */
  );
}

script$g.render = render$f;
script$g.__file = "packages/filter-panel/src/components/list.vue";

var _components$d;
var script$h = {
  name: 'field-dropdown',
  components: (_components$d = {}, _components$d[script$g.name] = script$g, _components$d),
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    modelValue: String
  },
  emits: ['update:modelValue', 'update:text'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var multiSelect = computed(function () {
      var _props$fieldProps;

      return (_props$fieldProps = props.fieldProps) != null && _props$fieldProps.multiSelect ? props.fieldProps.multiSelect : false;
    });
    var enumData = computed(function () {
      var _props$fieldProps2;

      return (_props$fieldProps2 = props.fieldProps) != null && _props$fieldProps2.enumValues ? props.fieldProps.enumValues : [];
    });
    var innerValue = ref(props.modelValue);
    watch(function () {
      return props.modelValue;
    }, function (value) {
      return innerValue.value = value;
    });

    var modelChange = function modelChange(value) {
      emit('update:modelValue', value ? value : null);
    };

    var textChange = function textChange(value) {
      emit('update:text', value);
    };

    return {
      multiSelect: multiSelect,
      enumData: enumData,
      innerValue: innerValue,
      modelChange: modelChange,
      textChange: textChange
    };
  }
};

function render$g(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_panel_list = resolveComponent("panel-list");

  return openBlock(), createBlock(_component_panel_list, {
    modelValue: $setup.innerValue,
    data: $setup.enumData,
    multiSelect: $setup.multiSelect,
    "onUpdate:modelValue": $setup.modelChange,
    "onUpdate:text": $setup.textChange
  }, null, 8
  /* PROPS */
  , ["modelValue", "data", "multiSelect", "onUpdate:modelValue", "onUpdate:text"]);
}

script$h.render = render$g;
script$h.__file = "packages/filter-panel/src/components/dropdown.vue";

var _components$e;
var script$i = {
  name: 'field-lookup',
  components: (_components$e = {}, _components$e[script$g.name] = script$g, _components$e),
  props: {
    fieldProps: Object,
    id: String,
    type: String,
    code: String,
    name: String,
    selecteds: String,
    modelValue: String
  },
  emits: ['update:modelValue', 'update:text', 'update:value'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var multiSelect = computed(function () {
      var _props$fieldProps;

      return (_props$fieldProps = props.fieldProps) != null && _props$fieldProps.multiSelect ? props.fieldProps.multiSelect : false;
    });
    var enumData = computed(function () {
      var _props$fieldProps2;

      return (_props$fieldProps2 = props.fieldProps) != null && _props$fieldProps2.enumValues ? props.fieldProps.enumValues : [];
    });
    var innerValue = ref(props.selecteds);
    watch(function () {
      return props.selecteds;
    }, function (value) {
      return innerValue.value = value;
    });

    var modelChange = function modelChange(value) {
      emit('update:value', value);
    };

    var textChange = function textChange(value) {
      emit('update:modelValue', value);
      emit('update:text', value);
    };

    return {
      multiSelect: multiSelect,
      enumData: enumData,
      innerValue: innerValue,
      modelChange: modelChange,
      textChange: textChange
    };
  }
};

function render$h(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_panel_list = resolveComponent("panel-list");

  return openBlock(), createBlock(_component_panel_list, {
    modelValue: $setup.innerValue,
    data: $setup.enumData,
    multiSelect: $setup.multiSelect,
    "onUpdate:modelValue": $setup.modelChange,
    "onUpdate:text": $setup.textChange
  }, null, 8
  /* PROPS */
  , ["modelValue", "data", "multiSelect", "onUpdate:modelValue", "onUpdate:text"]);
}

script$i.render = render$h;
script$i.__file = "packages/filter-panel/src/components/lookup.vue";

var ExpressCompareType;

(function (ExpressCompareType) {
  ExpressCompareType[ExpressCompareType["Equal"] = 0] = "Equal";
  ExpressCompareType[ExpressCompareType["NotEqual"] = 1] = "NotEqual";
  ExpressCompareType[ExpressCompareType["Greater"] = 2] = "Greater";
  ExpressCompareType[ExpressCompareType["GreaterOrEqual"] = 3] = "GreaterOrEqual";
  ExpressCompareType[ExpressCompareType["Less"] = 4] = "Less";
  ExpressCompareType[ExpressCompareType["LessOrEqual"] = 5] = "LessOrEqual";
  ExpressCompareType[ExpressCompareType["Like"] = 6] = "Like";
  ExpressCompareType[ExpressCompareType["LikeStartWith"] = 7] = "LikeStartWith";
  ExpressCompareType[ExpressCompareType["LikeEndWith"] = 8] = "LikeEndWith";
  ExpressCompareType[ExpressCompareType["NotLike"] = 9] = "NotLike";
  ExpressCompareType[ExpressCompareType["NotLikeStartWith"] = 10] = "NotLikeStartWith";
  ExpressCompareType[ExpressCompareType["NotLikeEndWith"] = 11] = "NotLikeEndWith";
  ExpressCompareType[ExpressCompareType["Is"] = 12] = "Is";
  ExpressCompareType[ExpressCompareType["IsNot"] = 13] = "IsNot";
  ExpressCompareType[ExpressCompareType["In"] = 14] = "In";
  ExpressCompareType[ExpressCompareType["NotIn"] = 15] = "NotIn";
})(ExpressCompareType || (ExpressCompareType = {}));

var ExpressRelationType;

(function (ExpressRelationType) {
  ExpressRelationType[ExpressRelationType["Empty"] = 0] = "Empty";
  ExpressRelationType[ExpressRelationType["And"] = 1] = "And";
  ExpressRelationType[ExpressRelationType["Or"] = 2] = "Or";
})(ExpressRelationType || (ExpressRelationType = {}));

var ExpressValueType;

(function (ExpressValueType) {
  ExpressValueType[ExpressValueType["Value"] = 0] = "Value";
  ExpressValueType[ExpressValueType["Expression"] = 1] = "Expression";
})(ExpressValueType || (ExpressValueType = {}));

var CONDITIONS = {
  FilterConditions: []
};

var TYPES;

(function (TYPES) {
  TYPES["Text"] = "text";
  TYPES["Dropdown"] = "dropdown";
  TYPES["Help"] = "help";
  TYPES["BoolCheck"] = "bool-check";
  TYPES["Date"] = "date";
  TYPES["DateTime"] = "date-time";
  TYPES["SingleDate"] = "single-date";
  TYPES["SingleYear"] = "single-year";
  TYPES["Number"] = "number";
  TYPES["SingleNumber"] = "single-number";
})(TYPES || (TYPES = {}));

var TypeMapping = {
  text: {
    type: TYPES.Text,
    component: 'field-text'
  },
  dropdown: {
    type: TYPES.Dropdown,
    component: 'field-dropdown'
  },
  help: {
    type: TYPES.Help,
    component: 'field-lookup'
  },
  'bool-check': {
    type: TYPES.BoolCheck,
    component: 'field-check'
  },
  date: {
    type: TYPES.Date,
    component: 'field-date-range'
  },
  'date-time': {
    type: TYPES.DateTime,
    component: 'field-date-range',
    fieldProps: {
      type: 'date-time'
    }
  },
  'single-date': {
    type: TYPES.SingleDate,
    component: 'field-date',
    fieldProps: {
      type: 'date'
    }
  },
  'single-year': {
    type: TYPES.SingleYear,
    component: 'field-date',
    fieldProps: {
      type: 'year-month'
    }
  },
  number: {
    type: TYPES.Number,
    component: 'field-number-range'
  },
  'single-number': {
    type: TYPES.SingleNumber,
    component: 'field-number'
  }
};

var useLookupMapping = function useLookupMapping(idField) {
  idField = idField ? idField : 'id';
  var idValue = ref('');
  var LookupMapping = {
    mapFields: function mapFields(data) {
      console.log('mapFields');
      idValue.value = isArray(data) ? data.map(function (item) {
        return item[idField];
      }).join(',') : data[idField];
    },
    getFieldValue: function getFieldValue() {
      console.log('getIdValue');
      return idValue.value;
    }
  };
  provide('LookupMappingFn', LookupMapping);
  return {
    idValue: idValue,
    LookupMapping: LookupMapping
  };
};

var formatField = function formatField(field) {
  var target = TypeMapping[field.control.controltype];
  var fieldProps = Object.assign(Object.assign({}, target.fieldProps), field.control);
  return {
    component: target.component,
    type: target.type,
    fieldProps: fieldProps,
    id: field.id,
    code: field.labelCode,
    name: field.name
  };
};

function reset(data, initValue) {
  if (initValue === void 0) {
    initValue = null;
  }

  if (data instanceof Object) {
    for (var prop in data) {
      if (data[prop] instanceof Object) {
        reset(data[prop]);
      }

      data[prop] = initValue ? initValue[prop] : initValue;
    }
  }
}

function genFilterCondition(target, value) {
  var resultTemplate = {
    FilterField: target.labelCode,
    Compare: ExpressCompareType.Like,
    Value: value,
    Relation: ExpressRelationType.And,
    Expresstype: ExpressValueType.Value,
    Lbracket: '',
    Rbracket: ''
  };
  var result = {};
  var type = target.control.controltype;

  switch (type) {
    case TYPES.Date:
    case TYPES.DateTime:
    case TYPES.Number:
      var tmp = [];

      if (isDef(value.firstValue)) {
        tmp.push({
          Compare: ExpressCompareType.GreaterOrEqual,
          Value: value.firstValue
        });
      }

      if (isDef(value.secondValue)) {
        tmp.push({
          Compare: ExpressCompareType.LessOrEqual,
          Value: value.secondValue
        });
      }

      result = tmp;
      break;

    case TYPES.SingleDate:
    case TYPES.SingleYear:
    case TYPES.SingleNumber:
    case TYPES.Dropdown:
    case TYPES.Help:
    case TYPES.BoolCheck:
      result = {
        Compare: ExpressCompareType.Equal
      };
      break;

    case TYPES.Text:
  }

  if (isArray(result)) {
    if (result[1]) {
      return [Object.assign(Object.assign({}, resultTemplate), result[0]), Object.assign(Object.assign({}, resultTemplate), result[1])];
    }

    return Object.assign(Object.assign({}, resultTemplate), result[0]);
  }

  return Object.assign(Object.assign({}, resultTemplate), result);
}

function getFilterConditions(filterData, fieldConfigs) {
  var conditions = [];
  var keys = Object.keys(filterData);
  keys.forEach(function (key) {
    if (isDef(filterData[key])) {
      var target = fieldConfigs.find(function (field) {
        return field.labelCode === key;
      });

      if (target) {
        var condition = genFilterCondition(target, filterData[key]);

        if (condition instanceof Array) {
          conditions = [].concat(conditions, condition);
        } else {
          conditions.push(condition);
        }
      }
    }
  });
  formatCondition(conditions);
  return conditions;
}

function genSearchFilterConditions(searchFields, value) {
  searchFields = isString(searchFields) ? searchFields.split(',') : searchFields;

  if (!isArray(searchFields) || !value) {
    return [];
  }

  var conditions = searchFields.map(function (searchField) {
    return {
      FilterField: searchField,
      Compare: ExpressCompareType.Like,
      Value: value,
      Relation: ExpressRelationType.Or,
      Expresstype: ExpressValueType.Value,
      Lbracket: '',
      Rbracket: ''
    };
  });
  formatCondition(conditions);
  return conditions;
}

function addFilterConditions(filterConditions, newFilterConditions) {
  var count = filterConditions.length;
  var newCount = newFilterConditions.length;

  if (count == 0) {
    return newFilterConditions;
  }

  if (newCount == 0) {
    return filterConditions;
  }

  filterConditions[0].Lbracket += '(';
  filterConditions[count - 1].Rbracket += ')';
  filterConditions[count - 1].Relation = 1;
  newFilterConditions[0].Lbracket += '(';
  newFilterConditions[newCount - 1].Rbracket += ')';
  return [].concat(filterConditions, newFilterConditions);
}

function formatCondition(conditions) {
  if (conditions && conditions.length > 0) {
    conditions[0].Lbracket = '(';
    conditions[conditions.length - 1].Rbracket = ')';
    conditions[conditions.length - 1].Relation = 0;
  }
}

var getFilterEnyity = function getFilterEnyity(filterData, fieldConfigs, extraConditions) {
  if (extraConditions === void 0) {
    extraConditions = [];
  }

  return Object.assign(Object.assign({}, CONDITIONS), {
    FilterConditions: addFilterConditions(getFilterConditions(filterData, fieldConfigs), extraConditions)
  });
};

var _components$f;
var script$j = defineComponent({
  name: 'field-lookup-input',
  components: (_components$f = {}, _components$f[script$g.name] = script$g, _components$f),
  props: {
    fieldProps: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    id: String,
    modelValue: String,
    type: String,
    code: String,
    name: String,
    selecteds: {
      type: String,
      "default": ''
    }
  },
  emits: ['update:modelValue', 'change-text', 'change-value'],
  setup: function setup(props, _ref) {
    var _props$fieldProps;

    var emit = _ref.emit;

    var _useLookupMapping = useLookupMapping((_props$fieldProps = props.fieldProps) == null ? void 0 : _props$fieldProps.idField),
        idValue = _useLookupMapping.idValue;

    idValue.value = props.selecteds ? props.selecteds : '';
    watch(function () {
      return props.selecteds;
    }, function (value) {
      console.log(value);
      idValue.value = value;
    });
    var bem = useBem('fm-filter-panel-field');

    var onModelChange = function onModelChange(value) {
      emit('update:modelValue', value);
    };

    var onTextChange = function onTextChange(value) {
      emit('change-text', value);
      emit('change-value', idValue.value);
    };

    return {
      idValue: idValue,
      bem: bem,
      onModelChange: onModelChange,
      onTextChange: onTextChange
    };
  }
});

function render$i(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_lookup_input = resolveComponent("fm-lookup-input");

  return openBlock(), createBlock(_component_fm_lookup_input, {
    name: _ctx.code,
    type: _ctx.fieldProps.displayType,
    modelValue: _ctx.modelValue,
    selectedValues: _ctx.idValue,
    label: _ctx.name,
    placeholder: _ctx.fieldProps.placeholder,
    idField: _ctx.fieldProps.idField,
    textField: _ctx.fieldProps.textField,
    url: _ctx.fieldProps.uri,
    multiSelect: _ctx.fieldProps.multiSelect,
    required: _ctx.fieldProps.require,
    fullPath: _ctx.fieldProps.fullPath,
    avatarField: _ctx.fieldProps.avatarField,
    avatarPrefix: _ctx.fieldProps.avatarPrefix,
    avatarSuffix: _ctx.fieldProps.avatarSuffix,
    usePersonal: _ctx.fieldProps.usePersonal,
    personalConfig: _ctx.fieldProps.personalConfig,
    position: "left",
    panelClass: _ctx.bem('lookup-panel'),
    "onUpdate:modelValue": _ctx.onModelChange,
    onConfirm: _ctx.onTextChange
  }, {
    template: withCtx(function (slotProps) {
      return [createVNode("span", {
        "class": _ctx.bem('title-sub-button-text'),
        onClick: slotProps.click
      }, "  ", 10
      /* CLASS, PROPS */
      , ["onClick"])];
    }),
    cell: withCtx(function (slotProps) {
      return [renderSlot(_ctx.$slots, "cell", {
        listData: slotProps.listData,
        item: slotProps.item,
        idField: slotProps.idField,
        textField: slotProps.textField
      })];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["name", "type", "modelValue", "selectedValues", "label", "placeholder", "idField", "textField", "url", "multiSelect", "required", "fullPath", "avatarField", "avatarPrefix", "avatarSuffix", "usePersonal", "personalConfig", "panelClass", "onUpdate:modelValue", "onConfirm"]);
}

script$j.render = render$i;
script$j.__file = "packages/filter-panel/src/components/lookup-input.vue";

var script$k = defineComponent({
  name: 'field-number',
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    modelValue: [Number, String]
  },
  emits: ['update:modelValue', 'click'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var handleChange = function handleChange(value) {
      console.log(value);
      emit('update:modelValue', value);
    };

    var placeholder = computed(function () {
      var _props$fieldProps;

      return (_props$fieldProps = props.fieldProps) != null && _props$fieldProps.placeholder ? props.fieldProps.placeholder : '';
    });
    var precision = computed(function () {
      return props.fieldProps && isDef(props.fieldProps.precision) ? props.fieldProps.precision : 2;
    });
    return {
      placeholder: placeholder,
      precision: precision,
      handleChange: handleChange
    };
  }
});

function render$j(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_input = resolveComponent("fm-input");

  return openBlock(), createBlock("div", null, [createVNode(_component_fm_input, {
    "class": "fm-filter-panel-field-input",
    modelValue: _ctx.modelValue,
    name: _ctx.code,
    placeholder: _ctx.placeholder,
    precision: _ctx.precision,
    enableNull: "",
    inputAlign: "center",
    type: "number",
    "onUpdate:modelValue": _ctx.handleChange
  }, null, 8
  /* PROPS */
  , ["modelValue", "name", "placeholder", "precision", "onUpdate:modelValue"])]);
}

script$k.render = render$j;
script$k.__file = "packages/filter-panel/src/components/number.vue";

var _components$g;
var script$l = {
  name: 'field-number-range',
  components: (_components$g = {}, _components$g[script$k.name] = script$k, _components$g),
  props: {
    fieldProps: {},
    id: String,
    code: String,
    name: String,
    // eslint-disable-next-line vue/require-prop-type-constructor
    modelValue: [String, Object]
  },
  emits: ['update:modelValue'],
  data: function data() {
    return {
      active: [this.id],
      firstValue: null,
      secondValue: null,
      firstKeyboardShow: false,
      secondKeyboardShow: false
    };
  },
  watch: {
    modelValue: {
      handler: function handler(value) {
        if (!value) {
          return;
        }

        this.firstValue = value.firstValue;
        this.secondValue = value.secondValue; // this.innerShow = value;
      },
      immediate: true,
      deep: true
    }
  },
  methods: {
    onConfirmFirst: function onConfirmFirst(value) {
      this.firstValue = value;
      this.onInput();
    },
    onConfirmSecond: function onConfirmSecond(value) {
      this.secondValue = value;
      this.onInput();
    },
    onInput: function onInput() {
      this.$emit('update:modelValue', {
        firstValue: this.firstValue,
        secondValue: this.secondValue
      });
    },
    onFirstKeyboardShow: function onFirstKeyboardShow() {
      this.firstKeyboardShow = true;
      this.secondKeyboardShow = false;
    },
    onSecondKeyboardShow: function onSecondKeyboardShow() {
      this.firstKeyboardShow = false;
      this.secondKeyboardShow = true;
    }
  }
};

var _hoisted_1$b = {
  "class": "fm-filter-panel-field-range"
};

var _hoisted_2$a = /*#__PURE__*/createVNode("span", {
  "class": "fm-filter-panel-field-split"
}, null, -1
/* HOISTED */
);

function render$k(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_field_number = resolveComponent("field-number");

  return openBlock(), createBlock("div", _hoisted_1$b, [createVNode(_component_field_number, {
    modelValue: $data.firstValue,
    "onUpdate:modelValue": [_cache[1] || (_cache[1] = function ($event) {
      return $data.firstValue = $event;
    }), $options.onConfirmFirst],
    fieldProps: $props.fieldProps,
    code: $props.code
  }, null, 8
  /* PROPS */
  , ["modelValue", "fieldProps", "code", "onUpdate:modelValue"]), _hoisted_2$a, createVNode(_component_field_number, {
    fieldProps: $props.fieldProps,
    code: $props.code,
    modelValue: $data.secondValue,
    "onUpdate:modelValue": [_cache[2] || (_cache[2] = function ($event) {
      return $data.secondValue = $event;
    }), $options.onConfirmSecond]
  }, null, 8
  /* PROPS */
  , ["fieldProps", "code", "modelValue", "onUpdate:modelValue"])]);
}

script$l.render = render$k;
script$l.__file = "packages/filter-panel/src/components/number-range.vue";

var _components$h;
var script$m = {
  name: 'field-text',
  components: (_components$h = {}, _components$h[Input.name] = Input, _components$h),
  props: {
    fieldProps: Object,
    id: String,
    code: String,
    name: String,
    modelValue: String
  },
  emits: ['update:modelValue'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var placeholder = computed(function () {
      var _props$fieldProps, _props$fieldProps2;

      return (_props$fieldProps = props.fieldProps) != null && _props$fieldProps.placeholder ? (_props$fieldProps2 = props.fieldProps) == null ? void 0 : _props$fieldProps2.placeholder : '';
    });
    var required = computed(function () {
      var _props$fieldProps3;

      return (_props$fieldProps3 = props.fieldProps) == null ? void 0 : _props$fieldProps3.require;
    });
    var innerValue = ref(props.modelValue);
    watch(function () {
      return props.modelValue;
    }, function (value) {
      innerValue.value = value;
    });

    var modelChange = function modelChange(val) {
      emit('update:modelValue', val);
    };

    return {
      placeholder: placeholder,
      required: required,
      innerValue: innerValue,
      modelChange: modelChange
    };
  }
};

function render$l(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_input = resolveComponent("fm-input");

  return openBlock(), createBlock(_component_fm_input, {
    "class": "fm-filter-panel-field-input",
    name: $props.code,
    placeholder: $setup.placeholder,
    required: $setup.required,
    modelValue: $setup.innerValue,
    "onUpdate:modelValue": [_cache[1] || (_cache[1] = function ($event) {
      return $setup.innerValue = $event;
    }), $setup.modelChange],
    inputAlign: "left"
  }, null, 8
  /* PROPS */
  , ["name", "placeholder", "required", "modelValue", "onUpdate:modelValue"]);
}

script$m.render = render$l;
script$m.__file = "packages/filter-panel/src/components/text.vue";

var _components$i;
var script$n = defineComponent({
  name: 'component-panel',
  components: (_components$i = {}, _components$i[script$d.name] = script$d, _components$i[script$f.name] = script$f, _components$i[script$e.name] = script$e, _components$i[script$i.name] = script$i, _components$i[script$l.name] = script$l, _components$i[script$k.name] = script$k, _components$i[script$m.name] = script$m, _components$i[script$h.name] = script$h, _components$i[script$j.name] = script$j, _components$i),
  props: {
    filterList: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    filterData: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    hasClear: Boolean,
    text: String,
    value: String
  },
  emits: ['change'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    watch(function () {
      return props.hasClear;
    }, function () {
      resetSubTitleData(subTitleDatas);
      resetSubTitleData(selecteds);
    }); // 

    var subTitleDatas = reactive({}); // 

    var selecteds = reactive({}); // 

    var resetSubTitleData = function resetSubTitleData(data) {
      for (var key in data) {
        data[key] = '';
      }
    };

    var onIdChange = function onIdChange(value, code) {
      selecteds[code] = value;
    };

    var onTextChange = function onTextChange(value, code) {
      subTitleDatas[code] = value;
    };

    var onChange = function onChange(value, code) {
      var _emit;

      emit('change', (_emit = {}, _emit[code] = value, _emit));
    };

    var bem = useBem('fm-filter-panel');

    var showSubTitle = function showSubTitle(type) {
      var types = ['dropdown', 'help'];
      return types.includes(type);
    };

    var showContent = computed(function () {
      var result = reactive({});
      props.filterList.forEach(function (item) {
        result[item.code] = true;
      });
      return result;
    });

    var toggleContentShow = function toggleContentShow(key) {
      showContent.value[key] = !showContent.value[key];
    };

    return {
      bem: bem,
      onChange: onChange,
      onTextChange: onTextChange,
      subTitleDatas: subTitleDatas,
      showSubTitle: showSubTitle,
      onIdChange: onIdChange,
      selecteds: selecteds,
      showContent: showContent,
      toggleContentShow: toggleContentShow
    };
  }
});

function render$m(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_field_lookup_input = resolveComponent("field-lookup-input");

  var _component_field_check = resolveComponent("field-check");

  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(true), createBlock(Fragment, null, renderList(_ctx.filterList, function (filter) {
    return openBlock(), createBlock("div", {
      "class": _ctx.bem('field'),
      key: filter.id
    }, [createVNode("div", {
      "class": _ctx.bem('field-title')
    }, [createVNode("span", {
      "class": _ctx.bem('field-title-text')
    }, toDisplayString(filter.name), 3
    /* TEXT, CLASS */
    ), createVNode("div", {
      "class": _ctx.bem('field-title-sub')
    }, [createVNode("span", {
      "class": _ctx.bem('field-title-sub-text')
    }, toDisplayString(_ctx.subTitleDatas[filter.code]), 3
    /* TEXT, CLASS */
    ), createVNode("div", {
      "class": _ctx.bem('field-title-sub-button')
    }, [filter.type === 'help' ? (openBlock(), createBlock(_component_field_lookup_input, {
      key: 0,
      code: filter.code,
      name: filter.name,
      fieldProps: filter.fieldProps,
      modelValue: _ctx.filterData[filter.code],
      "onUpdate:modelValue": function onUpdateModelValue($event) {
        return _ctx.filterData[filter.code] = $event;
      },
      selecteds: _ctx.selecteds[filter.code],
      teleport: "body",
      zIndex: "100",
      onChangeText: function onChangeText($event) {
        return _ctx.onTextChange($event, filter.code);
      },
      onChangeValue: function onChangeValue($event) {
        return _ctx.onIdChange($event, filter.code);
      }
    }, {
      cell: withCtx(function (slotProps) {
        return [renderSlot(_ctx.$slots, "lookup-cell", {
          listData: slotProps.listData,
          item: slotProps.item,
          idField: slotProps.idField,
          textField: slotProps.textField
        })];
      }),
      _: 2
      /* DYNAMIC */

    }, 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["code", "name", "fieldProps", "modelValue", "onUpdate:modelValue", "selecteds", "onChangeText", "onChangeValue"])) : createCommentVNode("v-if", true), filter.type === 'bool-check' ? (openBlock(), createBlock(_component_field_check, {
      key: 1,
      modelValue: _ctx.filterData[filter.code],
      "onUpdate:modelValue": [function ($event) {
        return _ctx.filterData[filter.code] = $event;
      }, function ($event) {
        return _ctx.onChange($event, filter.code);
      }],
      fieldProps: filter.fieldProps,
      id: filter.id,
      code: filter.code,
      name: filter.name
    }, null, 8
    /* PROPS */
    , ["modelValue", "onUpdate:modelValue", "fieldProps", "id", "code", "name"])) : createCommentVNode("v-if", true), _ctx.showSubTitle(filter.type) ? (openBlock(), createBlock(_component_fm_icon, {
      key: 2,
      name: _ctx.showContent[filter.code] ? 's-arrow-up' : 's-arrow-down',
      "class": _ctx.bem('field-title-sub-icon'),
      onClick: function onClick($event) {
        return _ctx.toggleContentShow(filter.code);
      }
    }, null, 8
    /* PROPS */
    , ["name", "class", "onClick"])) : createCommentVNode("v-if", true)], 2
    /* CLASS */
    )], 2
    /* CLASS */
    )], 2
    /* CLASS */
    ), _ctx.showContent[filter.code] && filter.type !== 'bool-check' ? (openBlock(), createBlock("div", {
      key: 0,
      "class": _ctx.bem('field-content')
    }, [(openBlock(), createBlock(resolveDynamicComponent(filter.component), {
      type: filter.type,
      fieldProps: filter.fieldProps,
      id: filter.id,
      code: filter.code,
      name: filter.name,
      selecteds: _ctx.selecteds[filter.code],
      "onUpdate:modelValue": [function ($event) {
        return _ctx.onChange($event, filter.code);
      }, function ($event) {
        return _ctx.filterData[filter.code] = $event;
      }],
      "onUpdate:text": function onUpdateText($event) {
        return _ctx.onTextChange($event, filter.code);
      },
      "onUpdate:value": function onUpdateValue($event) {
        return _ctx.onIdChange($event, filter.code);
      },
      modelValue: _ctx.filterData[filter.code]
    }, null, 8
    /* PROPS */
    , ["type", "fieldProps", "id", "code", "name", "selecteds", "onUpdate:modelValue", "onUpdate:text", "onUpdate:value", "modelValue"]))], 2
    /* CLASS */
    )) : createCommentVNode("v-if", true)], 2
    /* CLASS */
    );
  }), 128
  /* KEYED_FRAGMENT */
  );
}

script$n.render = render$m;
script$n.__file = "packages/filter-panel/src/components/panel.vue";

var _components$j;
var script$o = {
  name: 'fm-filter-panel',
  components: (_components$j = {}, _components$j[script$n.name] = script$n, _components$j),
  props: {
    fieldConfigs: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    extraConditions: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    modelValue: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    query: Function
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var filterData = reactive({});
    var filterList = computed(function () {
      return props.fieldConfigs.filter(function (field) {
        return field && field.control && TypeMapping[field.control.controltype];
      }).map(formatField);
    });
    filterList.value.forEach(function (filed) {
      // 
      var code = filed.code;
      filterData[code] = props.modelValue[code] ? props.modelValue[code] : null;
    });
    var hasClear = ref(false);

    var onReset = function onReset() {
      reset(filterData);
      hasClear.value = !hasClear.value;
      onChange();
      emit('clear');
    };

    var onChange = function onChange() {
      emit('change', filterData);
    };

    var onConfirm = function onConfirm() {
      var filterEnyity = getFilterEnyity(filterData, props.fieldConfigs, props.extraConditions);
      emit('confirm', {
        filterData: filterData,
        filterEnyity: filterEnyity
      });
      props.query && props.query(filterEnyity);
    };

    return {
      filterList: filterList,
      filterData: filterData,
      onReset: onReset,
      onChange: onChange,
      onConfirm: onConfirm,
      hasClear: hasClear
    };
  }
};

var _hoisted_1$c = {
  "class": "fm-filter-panel"
};
var _hoisted_2$b = {
  "class": "fm-filter-panel-content"
};
var _hoisted_3$7 = {
  "class": "fm-filter-panel-footer"
};
var _hoisted_4$5 = {
  "class": "button-wrapper"
};

var _hoisted_5$3 = /*#__PURE__*/createTextVNode("");

var _hoisted_6$3 = /*#__PURE__*/createTextVNode("");

function render$n(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_component_panel = resolveComponent("component-panel");

  var _component_fm_button = resolveComponent("fm-button");

  return openBlock(), createBlock("div", _hoisted_1$c, [createVNode("div", _hoisted_2$b, [createVNode(_component_component_panel, {
    filterList: $setup.filterList,
    filterData: $setup.filterData,
    hasClear: $setup.hasClear,
    onChange: $setup.onChange
  }, {
    "lookup-cell": withCtx(function (slotProps) {
      return [renderSlot(_ctx.$slots, "lookup-cell", {
        listData: slotProps.listData,
        item: slotProps.item,
        idField: slotProps.idField,
        textField: slotProps.textField
      })];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["filterList", "filterData", "hasClear", "onChange"])]), createVNode("div", _hoisted_3$7, [createCommentVNode(" <div class=\"button\" @click=\"onReset\"></div>\r\n      <div class=\"button bgc-blue\" @click=\"onConfirm\"></div> "), createVNode("div", _hoisted_4$5, [createVNode(_component_fm_button, {
    "class": "button",
    plain: "",
    round: "",
    onClick: $setup.onReset
  }, {
    "default": withCtx(function () {
      return [_hoisted_5$3];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["onClick"]), createVNode(_component_fm_button, {
    "class": "button",
    round: "",
    onClick: $setup.onConfirm
  }, {
    "default": withCtx(function () {
      return [_hoisted_6$3];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["onClick"])])])]);
}

script$o.render = render$n;
script$o.__file = "packages/filter-panel/src/filter-panel.vue";

var script$p = defineComponent({
  name: 'fm-filter-simple-panel',
  props: {
    modelValue: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    fieldConfigs: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var filterData = reactive({});
    var menuData = computed(function () {
      return props.fieldConfigs.length > 1 ? props.fieldConfigs.filter(function (item) {
        return item.control.controltype === 'dropdown';
      }).map(formatField) : [];
    });
    var currentMenuItem = ref();
    watch(menuData, function () {
      currentMenuItem.value = menuData.value[0];
      menuData.value.forEach(function (filed) {
        // 
        var code = filed.code;
        filterData[code] = props.modelValue[code] ? props.modelValue[code] : null;
      });
    }, {
      immediate: true
    });
    var listData = computed(function () {
      var _targetData$fieldProp;

      var targetData = menuData.value.find(function (item) {
        var _currentMenuItem$valu;

        return item.id === ((_currentMenuItem$valu = currentMenuItem.value) == null ? void 0 : _currentMenuItem$valu.id);
      });
      return targetData != null && (_targetData$fieldProp = targetData.fieldProps) != null && _targetData$fieldProp.enumValues ? targetData.fieldProps.enumValues : [];
    });

    var onMenuItemClick = function onMenuItemClick(item) {
      currentMenuItem.value = item;
    };

    var onListItemClick = function onListItemClick(item) {
      var _currentMenuItem$valu2;

      var code = (_currentMenuItem$valu2 = currentMenuItem.value) == null ? void 0 : _currentMenuItem$valu2.code;

      if (!code) {
        return;
      }

      filterData[code] = filterData[code] === item.value ? null : item.value;
      var filterEnyity = getFilterEnyity(filterData, props.fieldConfigs);
      emit('change', filterData);
      emit('confirm', {
        filterData: filterData,
        filterEnyity: filterEnyity
      });
    };

    var isListItemSelected = function isListItemSelected(item) {
      var _currentMenuItem$valu3;

      var code = (_currentMenuItem$valu3 = currentMenuItem.value) == null ? void 0 : _currentMenuItem$valu3.code;

      if (!code) {
        return false;
      }

      var selectedValue = filterData[code];
      return item.value === selectedValue;
    };

    var isMenuItemSelected = function isMenuItemSelected(item) {
      var _currentMenuItem$valu4;

      return item.id === ((_currentMenuItem$valu4 = currentMenuItem.value) == null ? void 0 : _currentMenuItem$valu4.id);
    };

    var getMenuClass = function getMenuClass(item, index) {
      var currentIndex = menuData.value.findIndex(function (menuItem) {
        var _currentMenuItem$valu5;

        return menuItem.id === ((_currentMenuItem$valu5 = currentMenuItem.value) == null ? void 0 : _currentMenuItem$valu5.id);
      });
      return {
        'menu-item-selected': isMenuItemSelected(item),
        'menu-item-selected-prev': currentIndex - index === 1,
        'menu-item-selected-next': index - currentIndex === 1
      };
    };

    return {
      menuData: menuData,
      listData: listData,
      onMenuItemClick: onMenuItemClick,
      onListItemClick: onListItemClick,
      isMenuItemSelected: isMenuItemSelected,
      isListItemSelected: isListItemSelected,
      getMenuClass: getMenuClass
    };
  }
});

var _hoisted_1$d = {
  "class": "fm-filter-simple-panel"
};
var _hoisted_2$c = {
  "class": "content"
};
var _hoisted_3$8 = {
  key: 0,
  "class": "menu"
};
var _hoisted_4$6 = {
  "class": "list"
};
function render$o(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("div", _hoisted_1$d, [createVNode("div", _hoisted_2$c, [_ctx.menuData.length > 1 ? (openBlock(), createBlock("div", _hoisted_3$8, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.menuData, function (menuItem, index) {
    return openBlock(), createBlock("div", {
      "class": ["menu-item", _ctx.getMenuClass(menuItem, index)],
      onClick: function onClick($event) {
        return _ctx.onMenuItemClick(menuItem);
      }
    }, [createVNode(_component_fm_cell, {
      "class": "menu-item-cell",
      title: menuItem.name
    }, null, 8
    /* PROPS */
    , ["title"])], 10
    /* CLASS, PROPS */
    , ["onClick"]);
  }), 256
  /* UNKEYED_FRAGMENT */
  ))])) : createCommentVNode("v-if", true), createVNode("div", _hoisted_4$6, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.listData, function (item) {
    return openBlock(), createBlock("div", {
      "class": "list-item",
      onClick: function onClick($event) {
        return _ctx.onListItemClick(item);
      }
    }, [createVNode(_component_fm_cell, {
      title: item.name
    }, createSlots({
      _: 2
      /* DYNAMIC */

    }, [_ctx.isListItemSelected(item) ? {
      name: "right-icon",
      fn: withCtx(function () {
        return [createVNode(_component_fm_icon, {
          "class": "list-item-icon",
          name: "s-success"
        })];
      })
    } : undefined]), 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["title"])], 8
    /* PROPS */
    , ["onClick"]);
  }), 256
  /* UNKEYED_FRAGMENT */
  ))])])]);
}

script$p.render = render$o;
script$p.__file = "packages/filter-panel/src/filter-simple-panel.vue";

script$o.install = function (app) {
  app.component(script$o.name, script$o);
};

script$p.install = function (app) {
  app.component(script$p.name, script$p);
};

var _components$k;
var script$q = {
  name: 'fm-search',
  components: (_components$k = {}, _components$k[Input.name] = Input, _components$k),
  props: {
    label: {
      type: String
    },
    actionText: {
      type: String
    },
    shape: {
      type: String,
      "default": 'round'
    },
    modelValue: {
      type: String
    },
    clearable: {
      type: Boolean,
      "default": true
    },
    background: {
      type: String
    },
    showAction: {
      type: Boolean,
      "default": false
    },
    placeholder: {
      type: String,
      "default": ''
    },
    inputAlign: {
      type: String,
      "default": 'left'
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var innerValue = ref(props.modelValue);
    watch(function () {
      return props.modelValue;
    }, function (value) {
      innerValue.value = value;
    });

    var onInput = function onInput(event) {
      emit('input', event);
    };

    var onFocus = function onFocus(event) {
      emit('focus', event);
    };

    var onBlur = function onBlur(event) {
      emit('blur', event);
    };

    var onClear = function onClear(event) {
      emit('clear', event);
    };

    var onCancel = function onCancel(event) {
      emit('cancel', event);
    };

    var onKeypress = function onKeypress(event) {
      if (event.code === 'Enter') {
        preventDefault(event);
        emit('search', innerValue.value);
      }

      emit('keypress', event);
    };

    var onUpdateModelValue = function onUpdateModelValue(event) {
      emit('update:modelValue', event);
    };

    return {
      innerValue: innerValue,
      onInput: onInput,
      onFocus: onFocus,
      onBlur: onBlur,
      onClear: onClear,
      onCancel: onCancel,
      onKeypress: onKeypress,
      onUpdateModelValue: onUpdateModelValue
    };
  }
};

const _hoisted_1$e = {
  key: 0,
  class: "fm-search-label"
};
const _hoisted_2$d = { class: "fm-search-left-icon" };
const _hoisted_3$9 = /*#__PURE__*/createVNode("span", { class: "fm-icon fm-icon-s-search-o" }, null, -1 /* HOISTED */);
const _hoisted_4$7 = {
  key: 0,
  class: "fm-search-action"
};
const _hoisted_5$4 = {
  key: 0,
  class: "fm-search-action-text"
};

function render$p(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_input = resolveComponent("fm-input");

  return (openBlock(), createBlock("div", {
    class: "fm-search",
    style: {'background': $props.background}
  }, [
    renderSlot(_ctx.$slots, "left"),
    createVNode("div", {
      class: ["fm-search-content", ['fm-search-content-'+ $props.shape]]
    }, [
      (_ctx.$slots.label || $props.label)
        ? (openBlock(), createBlock("div", _hoisted_1$e, [
            renderSlot(_ctx.$slots, "label", {}, () => [
              createTextVNode(toDisplayString($props.label), 1 /* TEXT */)
            ])
          ]))
        : createCommentVNode("v-if", true),
      createVNode(_component_fm_input, {
        class: "fm-no-hairline",
        type: "text",
        modelValue: $setup.innerValue,
        "onUpdate:modelValue": [
          _cache[1] || (_cache[1] = $event => ($setup.innerValue = $event)),
          $setup.onUpdateModelValue
        ],
        clearable: $props.clearable,
        placeholder: $props.placeholder,
        inputAlign: $props.inputAlign,
        disabled: $props.disabled,
        readonly: $props.readonly,
        onInput: $setup.onInput,
        onFocus: $setup.onFocus,
        onBlur: $setup.onBlur,
        onClear: $setup.onClear,
        onKeypress: $setup.onKeypress
      }, {
        "left-icon": withCtx(() => [
          createVNode("div", _hoisted_2$d, [
            renderSlot(_ctx.$slots, "lefticon", {}, () => [
              _hoisted_3$9
            ])
          ])
        ]),
        _: 1 /* STABLE */
      }, 8 /* PROPS */, ["modelValue", "clearable", "placeholder", "inputAlign", "disabled", "readonly", "onInput", "onFocus", "onBlur", "onClear", "onKeypress", "onUpdate:modelValue"])
    ], 2 /* CLASS */),
    ($props.showAction)
      ? (openBlock(), createBlock("div", _hoisted_4$7, [
          renderSlot(_ctx.$slots, "action", {}, () => [
            ($props.actionText)
              ? (openBlock(), createBlock("span", _hoisted_5$4, toDisplayString($props.actionText), 1 /* TEXT */))
              : (openBlock(), createBlock("span", {
                  key: 1,
                  class: "fm-search-action-cancel",
                  onClick: _cache[2] || (_cache[2] = (...args) => ($setup.onCancel && $setup.onCancel(...args)))
                }, ""))
          ])
        ]))
      : createCommentVNode("v-if", true)
  ], 4 /* STYLE */))
}

script$q.render = render$p;
script$q.__file = "packages/search/src/index.vue";

script$q.install = function (app) {
  app.component(script$q.name, script$q);
};

var _components$l;
var script$r = defineComponent({
  name: 'fm-filter-search',
  components: (_components$l = {}, _components$l[script$q.name] = script$q, _components$l[script.name] = script, _components$l),
  props: {
    placeholder: {
      type: String,
      "default": ''
    },
    show: Boolean,
    searchFields: {
      type: [String, Array],
      "default": ''
    },
    searchBoxValue: {
      type: String,
      "default": ''
    },
    icon: {
      type: String,
      "default": 'screening'
    },
    useSearch: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var searchBoxValue = ref(props.searchBoxValue);
    watch(function () {
      return props.searchBoxValue;
    }, function (value) {
      return searchBoxValue.value = value;
    });

    var onToggle = function onToggle() {
      emit('toggle');
    };

    var onSearch = function onSearch(value) {
      console.log('onSearch');
      emit('search', value);
    };

    var className = computed(function () {
      return props.useSearch ? 'fm-filter-search-container' : 'fm-filter-only-icon';
    });
    return {
      searchBoxValue: searchBoxValue,
      className: className,
      onToggle: onToggle,
      onSearch: onSearch
    };
  }
});

var _hoisted_1$f = {
  key: 0,
  "class": "fm-filter-search-right"
};
function render$q(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_search = resolveComponent("fm-search");

  return openBlock(), createBlock("div", {
    "class": _ctx.className
  }, [createVNode("div", {
    onClick: _cache[1] || (_cache[1] = function () {
      return _ctx.onToggle && _ctx.onToggle.apply(_ctx, arguments);
    }),
    "class": ["fm-filter-search-left fm-filter-icon", {
      'fm-state-active': _ctx.show
    }]
  }, [renderSlot(_ctx.$slots, "left", {}, function () {
    return [createVNode(_component_fm_icon, {
      name: _ctx.icon
    }, null, 8
    /* PROPS */
    , ["name"])];
  })], 2
  /* CLASS */
  ), _ctx.useSearch ? (openBlock(), createBlock("div", _hoisted_1$f, [renderSlot(_ctx.$slots, "right", {}, function () {
    return [createVNode(_component_fm_search, {
      modelValue: _ctx.searchBoxValue,
      "onUpdate:modelValue": _cache[2] || (_cache[2] = function ($event) {
        return _ctx.searchBoxValue = $event;
      }),
      placeholder: _ctx.placeholder,
      onSearch: _ctx.onSearch,
      onClear: _cache[3] || (_cache[3] = function ($event) {
        return _ctx.onSearch('');
      })
    }, null, 8
    /* PROPS */
    , ["modelValue", "placeholder", "onSearch"])];
  })])) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  );
}

script$r.render = render$q;
script$r.__file = "packages/filter/src/search-container.vue";

var _components$m;
var script$s = defineComponent({
  name: 'fm-filter',
  inheritAttrs: false,
  components: (_components$m = {}, _components$m[script$o.name] = script$o, _components$m[script$p.name] = script$p, _components$m[Popup.name] = Popup, _components$m[script$r.name] = script$r, _components$m),
  props: {
    type: {
      type: String,
      "default": 'normal'
    },
    fieldConfigs: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    placeholder: {
      type: String,
      "default": ''
    },
    modelValue: Object,
    position: {
      type: String,
      "default": 'left'
    },
    searchFields: {
      type: [String, Array],
      "default": ''
    },
    searchBoxValue: {
      type: String,
      "default": ''
    },
    useSearch: {
      type: Boolean,
      "default": false
    },
    round: {
      type: Boolean,
      "default": true
    },
    extraConditions: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    icon: {
      type: String,
      "default": 'screening'
    },
    query: Function
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var filterPanelEnyity = CONDITIONS;
    var searchBoxValue = ref(props.searchBoxValue);
    watch(function () {
      return props.searchBoxValue;
    }, function (value) {
      return searchBoxValue.value = value;
    });
    var enableShow = ref(false);

    var _useBack = useBack(enableShow),
        pushOrPop = _useBack.pushOrPop;

    var onToggle = function onToggle() {
      enableShow.value = !enableShow.value;
      pushOrPop();

      if (props.type === 'simple') {
        var position = getDeviation(searchRef, 'bottom');
        popStyle.value = {
          top: position.top + 'px'
        };
      }
    };

    var getSearchConditions = function getSearchConditions(value) {
      return genSearchFilterConditions(props.searchFields, value);
    };

    var onSearch = function onSearch(value) {
      emit('searchBoxChange', value);
      emit('search', _extends({}, filterPanelEnyity, {
        FilterConditions: addFilterConditions(filterPanelEnyity.FilterConditions, getSearchConditions(value))
      }));
    };

    var onChange = function onChange(value) {
      // filterPanelConditions = value
      emit('change', value); // {...value, FilterConditions: addFilterConditions(value.FilterConditions, getSearchConditions(searchBoxValue.value))})
    };

    var onConfirm = function onConfirm(value) {
      filterPanelEnyity = value.filterEnyity;
      onToggle();
      emit('confirm', _extends({}, filterPanelEnyity, {
        FilterConditions: addFilterConditions(filterPanelEnyity.FilterConditions, getSearchConditions(searchBoxValue.value))
      }));
      emit('update:modelValue', value.filterData);
      console.log(value);
    };

    var transitionName = computed(function () {
      return props.type === 'simple' ? 'fm-drop-down' : '';
    });
    var silderPosition = computed(function () {
      return props.type === 'simple' ? 'top' : props.position;
    });
    var popClass = computed(function () {
      return props.type === 'simple' ? 'fm-filter-popup-drop' : 'fm-filter-popup';
    });
    var popStyle = ref({});
    var searchRef = ref();
    return {
      searchBoxValue: searchBoxValue,
      enableShow: enableShow,
      transitionName: transitionName,
      silderPosition: silderPosition,
      searchRef: searchRef,
      popClass: popClass,
      popStyle: popStyle,
      onToggle: onToggle,
      onSearch: onSearch,
      onChange: onChange,
      onConfirm: onConfirm,
      pushOrPop: pushOrPop
    };
  }
});

var _hoisted_1$g = {
  "class": "fm-filter",
  ref: "searchRef"
};
function render$r(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_filter_search = resolveComponent("fm-filter-search");

  var _component_fm_filter_panel = resolveComponent("fm-filter-panel");

  var _component_fm_filter_simple_panel = resolveComponent("fm-filter-simple-panel");

  var _component_fm_popup = resolveComponent("fm-popup");

  return openBlock(), createBlock("div", _hoisted_1$g, [renderSlot(_ctx.$slots, "default", {
    click: _ctx.onToggle
  }, function () {
    return [createVNode(_component_fm_filter_search, {
      show: _ctx.enableShow,
      searchFields: _ctx.searchFields,
      searchBoxValue: _ctx.searchBoxValue,
      useSearch: _ctx.useSearch,
      placeholder: _ctx.placeholder,
      icon: _ctx.icon,
      onToggle: _ctx.onToggle,
      onSearch: _ctx.onSearch
    }, {
      left: withCtx(function () {
        return [renderSlot(_ctx.$slots, "left")];
      }),
      right: withCtx(function () {
        return [renderSlot(_ctx.$slots, "right")];
      }),
      _: 1
      /* STABLE */

    }, 8
    /* PROPS */
    , ["show", "searchFields", "searchBoxValue", "useSearch", "placeholder", "icon", "onToggle", "onSearch"])];
  }), createVNode(_component_fm_popup, {
    "class": _ctx.popClass,
    style: _ctx.popStyle,
    overlayStyle: _ctx.popStyle,
    show: _ctx.enableShow,
    "onUpdate:show": [_cache[2] || (_cache[2] = function ($event) {
      return _ctx.enableShow = $event;
    }), _ctx.pushOrPop],
    position: _ctx.silderPosition,
    transition: _ctx.transitionName,
    round: _ctx.round
  }, {
    "default": withCtx(function () {
      return [_ctx.type === 'normal' ? (openBlock(), createBlock(_component_fm_filter_panel, {
        key: 0,
        modelValue: _ctx.modelValue,
        fieldConfigs: _ctx.fieldConfigs,
        query: _ctx.query,
        extraConditions: _ctx.extraConditions,
        onConfirm: _ctx.onConfirm,
        onChange: _ctx.onChange,
        onClear: _cache[1] || (_cache[1] = function ($event) {
          return _ctx.$emit('clear');
        })
      }, {
        "lookup-cell": withCtx(function (slotProps) {
          return [renderSlot(_ctx.$slots, "lookup-cell", {
            listData: slotProps.listData,
            item: slotProps.item,
            idField: slotProps.idField,
            textField: slotProps.textField
          })];
        }),
        _: 1
        /* STABLE */

      }, 8
      /* PROPS */
      , ["modelValue", "fieldConfigs", "query", "extraConditions", "onConfirm", "onChange"])) : (openBlock(), createBlock(_component_fm_filter_simple_panel, {
        key: 1,
        fieldConfigs: _ctx.fieldConfigs,
        onChange: _ctx.onChange,
        onConfirm: _ctx.onConfirm
      }, null, 8
      /* PROPS */
      , ["fieldConfigs", "onChange", "onConfirm"]))];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["class", "style", "overlayStyle", "show", "position", "transition", "round", "onUpdate:show"])], 512
  /* NEED_PATCH */
  );
}

script$s.render = render$r;
script$s.__file = "packages/filter/src/filter.vue";

script$s.install = function (app) {
  app.component(script$s.name, script$s);
};

var _components$n;
var script$t = {
  name: 'fm-image',
  components: (_components$n = {}, _components$n[script.name] = script, _components$n),
  props: {
    src: {
      type: String
    },
    fit: {
      type: String
    },
    alt: {
      type: String
    },
    width: {
      type: [String, Number]
    },
    height: {
      type: [String, Number]
    },
    radius: {
      type: [String, Number],
      "default": 0
    },
    round: {
      type: Boolean,
      "default": false
    },
    showError: {
      type: Boolean,
      "default": true
    },
    errorIcon: {
      type: String,
      "default": 'addpicture'
    },
    loadingIcon: {
      type: String,
      "default": 's-my'
    }
  },
  data: function data() {
    return {
      isLoadError: false,
      isLoaded: false
    };
  },
  computed: {
    style: function style() {
      var style = {};

      if (isDef(this.width)) {
        style.width = addUnit(this.width);
      }

      if (isDef(this.height)) {
        style.height = addUnit(this.height);
      }

      if (isDef(this.radius) && !this.round) {
        style.overflow = 'hidden';
        style.borderRadius = addUnit(this.radius);
      }

      return style;
    },
    error: function error() {
      return this.src ? this.isLoadError ? true : false : true;
    }
  },
  methods: {
    onClick: function onClick(event) {
      this.$emit('click', event);
    },
    onLoad: function onLoad() {
      this.isLoaded = true;
    },
    onError: function onError() {
      this.isLoadError = true;
      this.isLoaded = true;
    }
  }
};

const _hoisted_1$h = {
  key: 0,
  class: "fm-image-loading"
};
const _hoisted_2$e = {
  key: 1,
  class: "fm-image-error"
};

function render$s(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");

  return (openBlock(), createBlock("div", {
    class: ["fm-image", {'fm-image-round':$props.round}],
    style: $options.style,
    onClick: _cache[3] || (_cache[3] = $event => ($options.onClick()))
  }, [
    withDirectives(createVNode("img", {
      src: $props.src,
      alt: $props.alt,
      style: {'object-fit':$props.fit},
      class: "fm-image-img",
      onError: _cache[1] || (_cache[1] = (...args) => ($options.onError && $options.onError(...args))),
      onLoad: _cache[2] || (_cache[2] = (...args) => ($options.onLoad && $options.onLoad(...args)))
    }, null, 44 /* STYLE, PROPS, HYDRATE_EVENTS */, ["src", "alt"]), [
      [vShow, $data.isLoaded]
    ]),
    (!$data.isLoaded)
      ? (openBlock(), createBlock("div", _hoisted_1$h, [
          renderSlot(_ctx.$slots, "loading", {}, () => [
            createVNode(_component_fm_icon, {
              name: $props.loadingIcon,
              class: "fm-image-icon"
            }, null, 8 /* PROPS */, ["name"])
          ])
        ]))
      : ($options.error && $props.showError)
        ? (openBlock(), createBlock("div", _hoisted_2$e, [
            renderSlot(_ctx.$slots, "error", {}, () => [
              createVNode(_component_fm_icon, {
                name: $props.errorIcon,
                class: "fm-image-icon"
              }, null, 8 /* PROPS */, ["name"])
            ])
          ]))
        : createCommentVNode("v-if", true)
  ], 6 /* CLASS, STYLE */))
}

script$t.render = render$s;
script$t.__file = "packages/image/src/index.vue";

script$t.install = function (app) {
  app.component(script$t.name, script$t);
};

var overflowScrollReg = /scroll|auto/i;
function getScroller(el) {
  var root = window;
  var node = el;

  while (node && node.tagName !== 'HTML' && node.nodeType === 1 && node !== root) {
    var _window$getComputedSt = window.getComputedStyle(node),
        overflowY = _window$getComputedSt.overflowY;

    if (overflowScrollReg.test(overflowY)) {
      if (node.tagName !== 'BODY') {
        return node;
      }

      var _window$getComputedSt2 = window.getComputedStyle(node.parentNode),
          htmlOverflowY = _window$getComputedSt2.overflowY;

      if (overflowScrollReg.test(htmlOverflowY)) {
        return node;
      }
    }

    node = node.parentNode;
  }

  return root;
}

var _components$o;
var script$u = {
  name: 'fm-listview',
  props: {
    listData: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    error: {
      type: Boolean,
      "default": false
    },
    finished: {
      type: Boolean,
      "default": false
    },
    loading: {
      type: Boolean,
      "default": false
    },
    errorText: {
      type: String,
      "default": ''
    },
    loadingText: {
      type: String,
      "default": '...'
    },
    finishedText: {
      type: String,
      "default": ''
    },
    showFinishedText: {
      type: Boolean,
      "default": false
    },
    immediateCheck: {
      type: Boolean,
      "default": true
    },
    offset: {
      type: [Number, String],
      "default": 30
    },
    direction: {
      type: String,
      "default": 'down'
    },
    multiple: {
      type: Boolean,
      "default": false
    },
    btns: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    showSubmitBtn: {
      type: Boolean,
      "default": true
    },
    className: {
      type: String
    },
    listidName: {
      type: String,
      "default": 'id'
    },
    fill: {
      type: Boolean,
      "default": false
    },
    initMultiSelect: {
      type: Boolean,
      "default": false
    },
    enablePullRefresh: {
      type: Boolean,
      "default": false
    },
    listRefreshing: {
      type: Boolean,
      "default": false
    }
  },
  components: (_components$o = {}, _components$o[script$1.name] = script$1, _components$o),
  data: function data() {
    return {
      innerLoading: this.loading,
      scroller: null,
      longPressTimer: 0,
      listMultiple: false,
      storageListData: [],
      inListData: [],
      currentListItem: {},
      //
      selectDataList: [],
      //
      throttleLoad: null,
      refreshdisabled: false,
      innerRefreshing: this.listRefreshing,
      initMultiList: false
    };
  },
  computed: {
    innerListData: {
      // getter
      get: function get() {
        var _this = this;

        var data = [];

        if (this.listData && this.listData.length) {
          if (!this.multiple) {
            data = this.listData.map(function (o) {
              return _extends({}, o);
            });
          } else {
            //checked
            var initSelectData = false;
            var initData = this.listData.filter(function (item) {
              return item.hasOwnProperty('checked');
            });

            if (initData && initData.length) {
              initSelectData = true;
            }

            data = this.listData.map(function (item, index) {
              if (initSelectData) {
                if (!item.hasOwnProperty('checked')) {
                  item.checked = false;
                }
              } else {
                if (_this.selectDataList && _this.selectDataList.length) {
                  var result = _this.selectDataList.find(function (selectItem, i) {
                    return _this.getKey(selectItem, i) === _this.getKey(item, index);
                  });

                  if (result) {
                    item.checked = true;
                  }
                }
              }

              return item;
            });
            this.selectDataList = data.map(function (o) {
              return _extends({}, o);
            }).filter(function (item) {
              return item.checked;
            });
          }
        }

        this.inListData = data;
        return data;
      },
      // setter
      set: function set(newValue) {
        this.inListData = newValue;
      }
    }
  },
  updated: function updated() {
    this.innerLoading = this.loading;
    this.innerRefreshing = this.listRefreshing;
  },
  mounted: function mounted() {
    if (this.fill) {
      this.scroller = getScroller(this.$refs.listviewMain);
    } else {
      this.scroller = getScroller(this.$el);
    }

    var _this = this;

    this.throttleLoad = this.throttle(function () {
      _this.check();
    }, 200); // this.scroller.addEventListener('scroll', this.check);

    this.scroller.addEventListener('scroll', this.throttleLoad);

    if (this.immediateCheck) {
      this.check();
    }

    window.addEventListener('contextmenu', function (e) {
      e.preventDefault();
    });

    if (this.initMultiSelect) {
      this.initMultiList = true;
      this.listCheckStart();
    }
  },
  activated: function activated() {
    // this.scroller.addEventListener('scroll', this.check);
    this.scroller.addEventListener('scroll', this.throttleLoad);
  },
  beforeUnmount: function beforeUnmount() {
    this.scroller.removeEventListener('scroll', this.throttleLoad);
  },
  deactivated: function deactivated() {
    this.scroller.removeEventListener('scroll', this.throttleLoad);
  },
  watch: {
    loading: 'check',
    finished: 'check',
    innerListData: {
      handler: function handler(newVal) {
        this.inListData = newVal;
      },
      deep: true
    },
    initMultiSelect: {
      handler: function handler(val, oldVal) {
        if (val == oldVal) return;
        if (val) this.listCheckStart();else this.listMultiple = false;
      }
    }
  },
  methods: {
    /** */
    check: function check() {
      var _this2 = this;

      this.$nextTick(function () {
        var scroller = _this2.scroller,
            offset = _this2.offset,
            direction = _this2.direction;
        var scrollerRect;

        if (scroller.getBoundingClientRect) {
          scrollerRect = scroller.getBoundingClientRect();
        } else {
          scrollerRect = {
            top: 0,
            bottom: scroller.innerHeight
          };
        }

        var isReachTop = false;

        var topPlaceholderRect = _this2.$refs.topPlaceholder.getBoundingClientRect();

        isReachTop = scrollerRect.top <= topPlaceholderRect.top;

        _this2.$emit('reachTop', isReachTop);

        _this2.refreshdisabled = isReachTop ? false : true;

        if (_this2.innerLoading || _this2.finished || _this2.error) {
          return;
        }

        var scrollerHeight = scrollerRect.bottom - scrollerRect.top;

        if (!scrollerHeight) {
          return false;
        }

        var isReachEdge = false;

        var placeholderRect = _this2.$refs.placeholder.getBoundingClientRect();

        if (direction === 'up') {
          isReachEdge = scrollerRect.top - placeholderRect.top <= offset;
        } else {
          isReachEdge = placeholderRect.bottom - scrollerRect.bottom <= offset;
        }

        if (isReachEdge) {
          _this2.innerLoading = true;

          _this2.$emit('update:loading', true);

          _this2.$emit('load');
        }
      });
    },
    throttle: function throttle(fn, delay) {
      var _this3 = this;

      if (delay === void 0) {
        delay = 500;
      }

      // true
      var flag = true; // this

      return function () {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        // return
        if (!flag) return; // false

        flag = false; // 

        setTimeout(function () {
          // applythis
          fn.apply(_this3, args); // true

          flag = true;
        }, delay);
      };
    },

    /** */
    clickErrorText: function clickErrorText() {
      this.$emit('update:error', false);
      this.check();
    },

    /** */
    goTouchStart: function goTouchStart(item, index) {
      var _this4 = this;

      this.$emit('selectChange', {
        'data': item,
        'index': index
      });
      clearTimeout(this.longPressTimer);
      this.longPressTimer = 0;

      var _this = this;

      this.longPressTimer = setTimeout(function () {
        if (_this.multiple && !_this.listMultiple) {
          _this.storageListData = _this4.inListData.map(function (o) {
            return _extends({}, o);
          });
          _this.listMultiple = true;

          _this.$emit('listMultipleChange', true);
        }
      }, 1000);
    },
    goTouchEnd: function goTouchEnd() {
      clearTimeout(this.longPressTimer);
    },
    goTouchMove: function goTouchMove() {
      clearTimeout(this.longPressTimer);
      this.longPressTimer = 0;
    },

    /** */
    listCheckStart: function listCheckStart() {
      if (this.multiple && !this.listMultiple) {
        this.storageListData = this.inListData.map(function (o) {
          return _extends({}, o);
        });
        this.listMultiple = true;
      }
    },

    /** */
    listCheckCancel: function listCheckCancel() {
      this.listMultiple = false;
      this.innerListData = this.storageListData;
      this.$emit('multipleCancel', true);
    },

    /***/
    listCheckAll: function listCheckAll() {
      if (this.multiple && this.listMultiple) {
        this.inListData.forEach(function (item) {
          item.checked = true;
        });
        this.$forceUpdate();
      }
    },

    /** */
    listCheckAllCancel: function listCheckAllCancel() {
      if (this.multiple && this.listMultiple) {
        this.inListData.forEach(function (item) {
          item.checked = false;
        });
        this.$forceUpdate();
      }
    },

    /** */
    checkSubmit: function checkSubmit() {
      var data = this.inListData.filter(function (item) {
        return item.checked;
      });
      this.$emit('multipleSubmit', data);
      this.listMultiple = false;
      return data;
    },

    /** */
    listItemClick: function listItemClick(e, item, index) {
      var _this5 = this;

      // this.$emit('selectChange',{'data': item,'index':index});
      if (this.listMultiple && (item.isLink || item.to || item.url)) {
        e.preventDefault();
      }

      if (this.multiple && this.listMultiple && item && !item.disabled) {
        if (item['checked']) {
          var selectItemIndex = this.selectDataList.findIndex(function (selectItem, i) {
            return _this5.getKey(selectItem, i) === _this5.getKey(item, index);
          });
          this.selectDataList.splice(selectItemIndex, 1);
        } else {
          var result = this.selectDataList.find(function (selectItem, i) {
            return _this5.getKey(selectItem, i) === _this5.getKey(item, index);
          });

          if (!result) {
            this.selectDataList.unshift(item);
          }
        }

        item['checked'] = !item['checked'];
        this.$forceUpdate();
      } //


      if (item && !item.disabled) {
        this.currentListItem = item;
        this.$emit('itemClick', {
          'data': this.currentListItem,
          'index': index
        });
      }
    },
    getKey: function getKey(list, index) {
      if (this.listidName && list.hasOwnProperty(this.listidName)) {
        return list[this.listidName];
      } else {
        return index;
      }
    },
    $_onClick: function $_onClick(btn) {
      // if (btn.disabled || btn.loading) {
      //   return;
      // }
      if (typeof btn.handler === 'function') {
        // if(btn.canSubmit){
        btn.handler(btn, this.checkSubmit()); // }
        // else{
        //   btn.handler(btn);
        // }
      } // else {
      //   this.close();
      // }

    },

    /** */
    getCurrentListItem: function getCurrentListItem() {
      return this.currentListItem;
    },

    /** */
    getSelectDataList: function getSelectDataList() {
      if (this.multiple) {
        return this.selectDataList;
      }
    },
    onRefresh: function onRefresh() {
      this.$emit('refresh');
    }
  }
};

const _hoisted_1$i = {
  key: 0,
  ref: "topPlaceholder",
  class: "fm-listview-topplaceholder"
};
const _hoisted_2$f = {
  key: 1,
  ref: "placeholder",
  class: "fm-listview-placeholder"
};
const _hoisted_3$a = {
  key: 2,
  class: "fm-listview-header"
};
const _hoisted_4$8 = {
  class: "fm-listview-main",
  ref: "listviewMain"
};
const _hoisted_5$5 = {
  key: 0,
  ref: "topPlaceholder",
  class: "fm-listview-topplaceholder"
};
const _hoisted_6$4 = {
  key: 1,
  ref: "placeholder",
  class: "fm-listview-placeholder"
};
const _hoisted_7$2 = {
  key: 0,
  class: "fm-checkbox"
};
const _hoisted_8$2 = /*#__PURE__*/createVNode("span", { class: "fm-icon fm-icon-singlechoice" }, null, -1 /* HOISTED */);
const _hoisted_9$2 = { class: "fm-listview-item-content" };
const _hoisted_10 = { class: "fm-cell" };
const _hoisted_11 = { class: "fm-cell-title" };
const _hoisted_12 = { class: "fm-cell-title-text" };
const _hoisted_13 = { class: "fm-cell-title-label" };
const _hoisted_14 = /*#__PURE__*/createVNode("div", { class: "fm-cell-right-icon" }, [
  /*#__PURE__*/createVNode("span", null, ">")
], -1 /* HOISTED */);
const _hoisted_15 = {
  key: 3,
  class: "fm-listview-empty"
};
const _hoisted_16 = /*#__PURE__*/createVNode("span", { class: "fm-listview-empty-text" }, "", -1 /* HOISTED */);
const _hoisted_17 = { class: "fm-listview-error-text" };
const _hoisted_18 = {
  key: 5,
  class: "fm-listview-more"
};
const _hoisted_19 = { key: 0 };
const _hoisted_20 = { class: "fm-listview-loading" };
const _hoisted_21 = { class: "fm-listview-loading-text" };
const _hoisted_22 = { key: 1 };
const _hoisted_23 = { class: "fm-listview-finished" };
const _hoisted_24 = { class: "fm-listview-finished-text" };
const _hoisted_25 = {
  key: 6,
  ref: "placeholder",
  class: "fm-listview-placeholder"
};
const _hoisted_26 = {
  key: 3,
  class: "fm-listview-btns"
};
const _hoisted_27 = {
  key: 0,
  class: "fm-listview-btns"
};
const _hoisted_28 = {
  key: 4,
  class: "fm-listview-footer"
};
const _hoisted_29 = {
  key: 5,
  ref: "placeholder",
  class: "fm-listview-placeholder"
};

function render$t(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_button = resolveComponent("fm-button");
  const _component_van_pull_refresh = resolveComponent("van-pull-refresh");

  return (openBlock(), createBlock(_component_van_pull_refresh, {
    modelValue: $data.innerRefreshing,
    "onUpdate:modelValue": _cache[5] || (_cache[5] = $event => ($data.innerRefreshing = $event)),
    onRefresh: _cache[6] || (_cache[6] = $event => ($options.onRefresh())),
    disabled: $data.refreshdisabled || !$props.enablePullRefresh,
    class: "fm-listview-wrapper"
  }, {
    default: withCtx(() => [
      createVNode("div", {
        class: ["fm-listview-container", {'fm-listview-container-multiple': $props.showSubmitBtn && $props.multiple && $data.listMultiple, 'fm-listview-container-fill': $props.fill}]
      }, [
        (!$props.fill)
          ? (openBlock(), createBlock("div", _hoisted_1$i, null, 512 /* NEED_PATCH */))
          : createCommentVNode("v-if", true),
        (!$props.fill && $props.direction === 'up')
          ? (openBlock(), createBlock("div", _hoisted_2$f, null, 512 /* NEED_PATCH */))
          : createCommentVNode("v-if", true),
        (_ctx.$slots['listViewHeader'])
          ? (openBlock(), createBlock("div", _hoisted_3$a, [
              renderSlot(_ctx.$slots, "listViewHeader")
            ]))
          : createCommentVNode("v-if", true),
        createVNode("div", _hoisted_4$8, [
          ($props.fill)
            ? (openBlock(), createBlock("div", _hoisted_5$5, null, 512 /* NEED_PATCH */))
            : createCommentVNode("v-if", true),
          ($props.fill && $props.direction === 'up')
            ? (openBlock(), createBlock("div", _hoisted_6$4, null, 512 /* NEED_PATCH */))
            : createCommentVNode("v-if", true),
          ($data.inListData && $data.inListData.length)
            ? (openBlock(), createBlock("div", {
                key: 2,
                class: ["fm-listview-content", [$props.className]]
              }, [
                (openBlock(true), createBlock(Fragment, null, renderList($data.inListData, (listItem, index) => {
                  return (openBlock(), createBlock("div", {
                    class: ["fm-listview-item", {
              'fm-listview-item-padding': $props.multiple && $data.listMultiple, 
              'fm-listview-item-checked': listItem.checked && $props.multiple && $data.listMultiple,
              'fm-listview-item-padding-none': $props.multiple && $data.listMultiple && $data.initMultiList
            }],
                    onTouchstart: $event => ($options.goTouchStart(listItem, index)),
                    onTouchmove: _cache[1] || (_cache[1] = (...args) => ($options.goTouchMove && $options.goTouchMove(...args))),
                    onTouchend: _cache[2] || (_cache[2] = (...args) => ($options.goTouchEnd && $options.goTouchEnd(...args))),
                    onClick: $event => ($options.listItemClick($event,listItem,index))
                  }, [
                    ($props.multiple && $data.listMultiple)
                      ? (openBlock(), createBlock("div", _hoisted_7$2, [
                          createVNode("div", {
                            class: ["fm-checbox-icon", {'fm-checbox-icon-checked': listItem.checked}]
                          }, [
                            _hoisted_8$2
                          ], 2 /* CLASS */)
                        ]))
                      : createCommentVNode("v-if", true),
                    createVNode("div", _hoisted_9$2, [
                      renderSlot(_ctx.$slots, "default", {
                        item: listItem,
                        last: index === $data.inListData.length - 1,
                        first: index === 0,
                        index: index,
                        disabled: $data.listMultiple
                      }, () => [
                        createVNode("div", _hoisted_10, [
                          createVNode("div", _hoisted_11, [
                            createVNode("span", _hoisted_12, toDisplayString(listItem.title), 1 /* TEXT */),
                            createVNode("div", _hoisted_13, toDisplayString(listItem.label), 1 /* TEXT */)
                          ]),
                          _hoisted_14,
                          renderSlot(_ctx.$slots, "cell-extra")
                        ])
                      ])
                    ])
                  ], 42 /* CLASS, PROPS, HYDRATE_EVENTS */, ["onTouchstart", "onClick"]))
                }), 256 /* UNKEYED_FRAGMENT */))
              ], 2 /* CLASS */))
            : (openBlock(), createBlock("div", _hoisted_15, [
                renderSlot(_ctx.$slots, "listviewEmpty", {}, () => [
                  _hoisted_16
                ])
              ])),
          ($props.error)
            ? (openBlock(), createBlock("div", {
                key: 4,
                onClick: _cache[3] || (_cache[3] = $event => ($options.clickErrorText())),
                class: "fm-listview-error"
              }, [
                renderSlot(_ctx.$slots, "error", {}, () => [
                  createVNode("span", _hoisted_17, toDisplayString($props.errorText), 1 /* TEXT */)
                ])
              ]))
            : createCommentVNode("v-if", true),
          (!$props.error)
            ? (openBlock(), createBlock("div", _hoisted_18, [
                (!$props.listRefreshing && $data.innerLoading && !$props.finished)
                  ? (openBlock(), createBlock("div", _hoisted_19, [
                      createVNode("div", _hoisted_20, [
                        renderSlot(_ctx.$slots, "loading", {}, () => [
                          createVNode("span", _hoisted_21, toDisplayString($props.loadingText), 1 /* TEXT */)
                        ])
                      ])
                    ]))
                  : createCommentVNode("v-if", true),
                ($props.finished && $props.showFinishedText && $data.inListData && $data.inListData.length)
                  ? (openBlock(), createBlock("div", _hoisted_22, [
                      createVNode("div", _hoisted_23, [
                        renderSlot(_ctx.$slots, "finished", {}, () => [
                          createVNode("span", _hoisted_24, toDisplayString($props.finishedText), 1 /* TEXT */)
                        ])
                      ])
                    ]))
                  : createCommentVNode("v-if", true)
              ]))
            : createCommentVNode("v-if", true),
          ($props.fill && $props.direction === 'down')
            ? (openBlock(), createBlock("div", _hoisted_25, null, 512 /* NEED_PATCH */))
            : createCommentVNode("v-if", true)
        ], 512 /* NEED_PATCH */),
        ($props.showSubmitBtn && $props.multiple && $data.listMultiple)
          ? (openBlock(), createBlock("div", _hoisted_26, [
              ($props.btns && $props.btns.length)
                ? (openBlock(), createBlock("div", _hoisted_27, [
                    (openBlock(true), createBlock(Fragment, null, renderList($props.btns, (btn, index) => {
                      return (openBlock(), createBlock(_component_fm_button, {
                        type: btn.type?btn.type:'primary',
                        plain: !!btn.plain?btn.plain:false,
                        block: "",
                        disabled: !!btn.disabled,
                        onClick: $event => ($options.$_onClick(btn)),
                        onTouchmove: _cache[4] || (_cache[4] = withModifiers(() => {}, ["prevent"])),
                        class: "fm-listview-btns-item"
                      }, {
                        default: withCtx(() => [
                          createTextVNode(toDisplayString(btn.text), 1 /* TEXT */)
                        ]),
                        _: 2 /* DYNAMIC */
                      }, 1032 /* PROPS, DYNAMIC_SLOTS */, ["type", "plain", "disabled", "onClick"]))
                    }), 256 /* UNKEYED_FRAGMENT */))
                  ]))
                : createCommentVNode("v-if", true)
            ]))
          : createCommentVNode("v-if", true),
        (_ctx.$slots['listViewFooter'])
          ? (openBlock(), createBlock("div", _hoisted_28, [
              renderSlot(_ctx.$slots, "listViewFooter")
            ]))
          : createCommentVNode("v-if", true),
        (!$props.fill && $props.direction === 'down')
          ? (openBlock(), createBlock("div", _hoisted_29, null, 512 /* NEED_PATCH */))
          : createCommentVNode("v-if", true)
      ], 2 /* CLASS */)
    ]),
    _: 1 /* STABLE */
  }, 8 /* PROPS */, ["modelValue", "disabled"]))
}

script$u.render = render$t;
script$u.__file = "packages/listview/src/listview.vue";

script$u.install = function (app) {
  app.component(script$u.name, script$u);
};

var script$v = defineComponent({
  name: 'fm-loading',
  props: {
    color: {
      type: String,
      "default": '#c9c9c9'
    },
    size: {
      type: Number,
      "default": 28
    },
    textSize: {
      type: Number,
      "default": 16
    },
    vertical: {
      type: Boolean,
      "default": false
    },
    show: Boolean,
    message: {
      type: String,
      "default": '...'
    }
  } // data() {
  //   return {
  //     visible: false
  //   }
  // },
  // beforeDestroy() {
  //   this.hideLoading();
  // },
  // deactivated() {
  //   this.hideLoading();
  // },
  // methods: {
  //   showLoading() {
  //     this.visible = true;
  //   },
  //   hideLoading() {
  //     this.visible = false;
  //   }
  // }

});

var _hoisted_1$j = {
  key: 0,
  "class": "fm-loading-mask"
};

var _hoisted_2$g = /*#__PURE__*/createVNode("circle", {
  cx: "50",
  cy: "50",
  r: "20",
  fill: "none"
}, null, -1
/* HOISTED */
);

function render$u(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock(Fragment, null, [_ctx.show ? (openBlock(), createBlock("div", _hoisted_1$j)) : createCommentVNode("v-if", true), _ctx.show ? (openBlock(), createBlock("div", {
    key: 1,
    "class": ["fm-loading", {
      'fm-loading-vertical': _ctx.vertical
    }]
  }, [createVNode("span", {
    "class": "fm-loading-icon",
    style: {
      width: _ctx.size + 'px',
      height: _ctx.size + 'px'
    }
  }, [(openBlock(), createBlock("svg", {
    viewBox: "25 25 50 50",
    "class": "fm-loading-icon-circular",
    style: {
      color: _ctx.color
    }
  }, [_hoisted_2$g], 4
  /* STYLE */
  ))], 4
  /* STYLE */
  ), _ctx.message ? (openBlock(), createBlock("span", {
    key: 0,
    "class": "fm-loading-text",
    style: {
      fontSize: _ctx.textSize + 'px'
    }
  }, toDisplayString(_ctx.message), 5
  /* TEXT, STYLE */
  )) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  )) : createCommentVNode("v-if", true)], 64
  /* STABLE_FRAGMENT */
  );
}

script$v.render = render$u;
script$v.__file = "packages/loading/src/loading.vue";

var instance$1;

function defaultOptions$1() {
  return {
    color: '#c9c9c9',
    size: 28,
    textSize: 16,
    vertical: false,
    show: true,
    message: '...'
  };
}

function parseOptions$1(message) {
  return isObject(message) ? message : {
    message: message
  };
}

var initInstance$1 = function initInstance() {

  var _mountComponent = mountComponent({
    setup: function setup() {
      var _usePopupState = usePopupState(),
          state = _usePopupState.state,
          toggle = _usePopupState.toggle;

      return function () {
        return createVNode(script$v, Object.assign(Object.assign({}, state), {
          'onUpdate:show': toggle
        }), null);
      };
    }
  });

  instance$1 = _mountComponent.instance;
};

function Loading(options) {
  if (!inBrowser) {
    return;
  }

  if (!instance$1) {
    initInstance$1();
  }

  options = Object.assign(Object.assign({}, Loading.currentOptions), parseOptions$1(options));
  instance$1.open(options);
  return instance$1;
}

Loading.clear = function () {
  if (instance$1) {
    instance$1.toggle(false);
  }
};

Loading.show = function (options) {
  return Loading(Object.assign({}, parseOptions$1(options)));
};

Loading.hide = function () {
  if (instance$1) {
    instance$1.toggle(false);
  }
};

Loading.currentOptions = defaultOptions$1();

Loading.setDefaultOptions = function (options) {
  Object.assign(Loading.currentOptions, options);
};

Loading.resetDefaultOptions = function () {
  Loading.currentOptions = defaultOptions$1();
};

Loading.install = function (app) {
  app.component(script$v.name, script$v);
  app.config.globalProperties.$loading = Loading;
};

Loading.Component = script$v;

var useGetTreeData = function useGetTreeData(defaultIdField) {
  var treeData = [];
  var parentData = [];

  var getTreeData = function getTreeData(data, id, idField) {
    if (id === void 0) {
      id = '';
    }

    if (!data) {
      return treeData;
    }

    idField = idField ? idField : defaultIdField;
    parentData = [];
    var finished = false;

    if (!id) {
      treeData = data.map(function (el) {
        var data = el.data,
            others = __rest(el, ["data"]);

        return Object.assign(Object.assign({}, data), {
          __meta: others
        });
      });
    } else {

      (function each(data, id) {
        var len = data.length;
        var index = 0;

        while (len > index && !finished) {
          var el = data[index];
          index++;

          if (el.data[idField] === id) {
            var _data = el.data,
                others = __rest(el, ["data"]);

            parentData.push(Object.assign(Object.assign({}, _data), {
              __meta: others
            }));
            treeData = el.children.map(function (item) {
              var data = item.data,
                  others = __rest(item, ["data"]);

              return Object.assign(Object.assign({}, data), {
                __meta: others
              });
            });
            finished = true;
          } else if (el.children && el.children.length) {
            var flag = each(el.children, id);

            if (flag) {
              var _data2 = el.data,
                  _others = __rest(el, ["data"]);

              parentData.push(Object.assign(Object.assign({}, _data2), {
                __meta: _others
              }));
            }
          }
        }

        return finished;
      })(data, id);
    }

    parentData.reverse();
    return treeData;
  };

  var getParentData = function getParentData() {
    return [].concat(parentData);
  };

  return {
    getTreeData: getTreeData,
    getParentData: getParentData
  };
};

var KEYLIST = ['customData', 'pageIndex', 'pageSize', 'pageInfo', 'search', 'enableFullTree', 'selectedInfo', 'relationFilter', 'loadTreeDataType', 'useFullTree'];
function buildQueryParams(rawParams, type) {
  if (type === void 0) {
    type = 'all';
  }

  var params = {};
  var searchParam = {
    category: type
  };
  Object.keys(rawParams).forEach(function (paramName) {
    if (KEYLIST.includes(paramName) && isDef(rawParams[paramName])) {
      if (paramName === 'search') {
        Object.keys(rawParams.search).forEach(function (searchParamName) {
          isDef(rawParams.search[searchParamName]) && (searchParam[searchParamName] = rawParams.search[searchParamName]);
        });
      } else {
        params[paramName] = rawParams[paramName];
      }
    }
  });
  params.searchValue = JSON.stringify(searchParam);
  return params;
}
var useLoadParam = function useLoadParam(params) {
  if (params === void 0) {
    params = {
      pageIndex: 1,
      pageSize: 20
    };
  }

  var innerParams = ref({});
  var defaultParams = params;

  var setParam = function setParam(key, value) {
    innerParams.value[key] = value;
  };

  var getParam = function getParam(key) {
    return innerParams.value[key];
  };

  var setParams = function setParams(params, enableNUll) {
    if (enableNUll === void 0) {
      enableNUll = false;
    }

    KEYLIST.forEach(function (key) {
      return (isDef(params[key]) || enableNUll) && setParam(key, params[key]);
    });
  };

  var getParams = function getParams() {
    return Object.assign({}, innerParams.value);
  };

  var buildParams = function buildParams(type) {
    if (type === void 0) {
      type = 'all';
    }

    return buildQueryParams(innerParams.value, type);
  };

  var resetParams = function resetParams() {
    innerParams.value = {};
    setParams(defaultParams);
  };

  var gotoPage = function gotoPage(index) {
    if (index === void 0) {
      index = 1;
    }

    innerParams.value.pageIndex && (innerParams.value.pageIndex = innerParams.value.pageIndex + index);
  };

  var setDefaultParams = function setDefaultParams(params) {
    defaultParams = params;
    setParams(defaultParams, true);
  };

  setParams(defaultParams);
  return {
    params: innerParams,
    setParam: setParam,
    getParam: getParam,
    setParams: setParams,
    getParams: getParams,
    buildParams: buildParams,
    resetParams: resetParams,
    gotoPage: gotoPage,
    setDefaultParams: setDefaultParams
  };
};

var useHttpService = function useHttpService(url) {
  if (url === void 0) {
    url = '';
  }

  var LookupHttpService = inject('LookupHttpService', {});

  var initHttp = function initHttp(cb) {
    return new Promise(function (resolve, reject) {
      var asyncTarget = cb();
      Loading.show('');

      if (asyncTarget instanceof Promise) {
        asyncTarget.then(function (res) {
          Loading.hide();
          resolve(res);
        });
      } else if (asyncTarget && asyncTarget.subscribe) {
        asyncTarget.subscribe(function (res) {
          Loading.hide();
          resolve(res);
        });
      } else {
        Loading.hide();
        console.warn('Http');
        reject('Http');
      }
    });
  };

  var getData = function getData(params) {
    return initHttp(function () {
      return LookupHttpService.getData(url, params);
    });
  };

  var request = function request(method, url, config) {
    if (config === void 0) {
      config = {};
    }

    return initHttp(function () {
      return LookupHttpService.request(method, url, config);
    });
  };

  return {
    getData: getData,
    request: request
  };
};

var memoizedKeys = [];
var memoizedRecentData = [];
var memoizedFavoriteData = [];
var index = 0;
var personalConfig = {};

var _useMd = useMd5(),
    md5$1 = _useMd.md5;

var URL = '/api/runtime/bcc/v1.0/datagrid/settings';
var usePresonal = function usePresonal(props) {
  var _a, _b, _c;

  var _useLoadParam = useLoadParam({
    pageIndex: 1,
    pageSize: 0
  }),
      setParams = _useLoadParam.setParams,
      setParam = _useLoadParam.setParam,
      buildParams = _useLoadParam.buildParams;

  var currentPage = ref('list');
  var currentIndex = index;

  if (props) {
    var _key = ((_a = props.personalConfig) === null || _a === void 0 ? void 0 : _a.key) ? props.personalConfig.key : props.url;

    memoizedKeys[currentIndex] = encrypt(_key, !((_b = props.personalConfig) === null || _b === void 0 ? void 0 : _b.key));
    memoizedRecentData[currentIndex] = ref([]);
    memoizedFavoriteData[currentIndex] = ref([]);
    index++;
  } else {
    currentIndex = index - 1;

    var _useRootProps = useRootProps('lookup-panel'),
        getProps = _useRootProps.getProps;

    props = getProps();
  }

  var _useHttpService = useHttpService(props === null || props === void 0 ? void 0 : props.url),
      getData = _useHttpService.getData;

  var key = memoizedKeys[currentIndex];
  var recentData = memoizedRecentData[currentIndex];
  var favoriteData = memoizedFavoriteData[currentIndex];

  var _ref = ((_c = props === null || props === void 0 ? void 0 : props.personalConfig) === null || _c === void 0 ? void 0 : _c.type) === 'remote' ? remotePresonal(key) : LocalPresonal(key),
      getPersonalConfig = _ref.getPersonalConfig,
      setPersonalConfig = _ref.setPersonalConfig;

  var initPersonal = function initPersonal() {
    setParams({
      enableFullTree: false,
      useFullTree: false,
      loadTreeDataType: 'default'
    });
    getPersonalConfig().then(function (config) {
      getRecentData();
      getFavoriteData();
      currentPage.value = getConfigValue('currentPage', toUpperCase(props === null || props === void 0 ? void 0 : props.type) === 'NAVTREELIST' ? 'recent' : 'list');
    });
  };

  var getConfigValue = function getConfigValue(name, defaultValue) {
    if (defaultValue === void 0) {
      defaultValue = [];
    }

    return personalConfig[name] ? personalConfig[name] : defaultValue;
  };

  var setRecentData = function setRecentData(data) {
    var _a, _b;

    var _recentData = isArray(recentData.value) ? recentData.value.filter(function (item) {
      return !data.find(function (dataItem) {
        return getValue(props === null || props === void 0 ? void 0 : props.idField, dataItem) === getValue(props === null || props === void 0 ? void 0 : props.idField, item);
      });
    }) : [];

    var maxRecentData = ((_a = props === null || props === void 0 ? void 0 : props.personalConfig) === null || _a === void 0 ? void 0 : _a.maxRecentData) ? props.personalConfig.maxRecentData : 5;
    var result = [].concat(data, _recentData).slice(0, maxRecentData);
    recentData.value = result;

    if ((_b = props === null || props === void 0 ? void 0 : props.personalConfig) === null || _b === void 0 ? void 0 : _b.disableGetRecentData) {
      return;
    }

    setPersonalConfig({
      recentData: result.map(function (item) {
        return getValue(props === null || props === void 0 ? void 0 : props.idField, item);
      })
    });
  };

  var getRecentData = function getRecentData() {
    var _a;

    if ((_a = props === null || props === void 0 ? void 0 : props.personalConfig) === null || _a === void 0 ? void 0 : _a.disableGetRecentData) {
      return;
    }

    var ids = getConfigValue('recentData');

    if (ids && ids.length <= 0) {
      recentData.value = [];
      return;
    }

    setParam('search', {
      favoriteIds: ids
    });
    getData(buildParams('fav')).then(function (res) {
      var items = (res === null || res === void 0 ? void 0 : res.items) ? res.items : [];
      recentData.value = items;
    });
  };

  var setFavoriteData = function setFavoriteData(data) {
    var result = [];

    if (isFavorited(data)) {
      result = favoriteData.value.filter(function (item) {
        return getValue(props === null || props === void 0 ? void 0 : props.idField, item) !== getValue(props === null || props === void 0 ? void 0 : props.idField, data);
      });
    } else {
      result = [].concat(favoriteData.value, [data]);
    }

    favoriteData.value = result;
    setPersonalConfig({
      favoriteData: result.map(function (item) {
        return getValue(props === null || props === void 0 ? void 0 : props.idField, item);
      })
    });
  };

  var getFavoriteData = function getFavoriteData() {
    var ids = getConfigValue('favoriteData');

    if (ids && ids.length <= 0) {
      favoriteData.value = [];
      return;
    }

    setParam('search', {
      favoriteIds: ids
    });
    getData(buildParams('fav')).then(function (res) {
      var items = (res === null || res === void 0 ? void 0 : res.items) ? res.items : [];
      favoriteData.value = items;
    });
  };

  var isFavorited = function isFavorited(item) {
    return favoriteData.value.find(function (elment) {
      return getValue(props === null || props === void 0 ? void 0 : props.idField, elment) === getValue(props === null || props === void 0 ? void 0 : props.idField, item);
    });
  };

  return {
    recentData: recentData,
    favoriteData: favoriteData,
    currentPage: currentPage,
    initPersonal: initPersonal,
    setRecentData: setRecentData,
    setFavoriteData: setFavoriteData,
    isFavorited: isFavorited
  };
};

var LocalPresonal = function LocalPresonal(key) {
  var getPersonalConfig = function getPersonalConfig() {
    var personalConfigStr = localStorage.getItem(key);
    personalConfig = personalConfigStr ? JSON.parse(personalConfigStr) : {};
    return Promise.resolve(personalConfig);
  };

  var setPersonalConfig = function setPersonalConfig(config) {
    if (!config) {
      return;
    }

    personalConfig = Object.assign(Object.assign({}, personalConfig), config);
    var personalConfigStr = JSON.stringify(personalConfig);
    localStorage.setItem(key, personalConfigStr);
  };

  return {
    getPersonalConfig: getPersonalConfig,
    setPersonalConfig: setPersonalConfig
  };
};

var remotePresonal = function remotePresonal(key) {
  var _useHttpService2 = useHttpService(),
      request = _useHttpService2.request;

  var getPersonalConfig = function getPersonalConfig() {
    return new Promise(function (resolve) {
      request('GET', URL + '/' + key).then(function (res) {
        var personalConfigStr = (res === null || res === void 0 ? void 0 : res.textValue) ? res.textValue : '';
        personalConfig = personalConfigStr ? JSON.parse(personalConfigStr) : {};
        resolve(personalConfig);
      });
    });
  };

  var setPersonalConfig = function setPersonalConfig(config) {
    if (!config) {
      return;
    }

    personalConfig = Object.assign(Object.assign({}, personalConfig), config);
    var personalConfigStr = JSON.stringify(personalConfig);
    var body = {
      configkey1: key,
      configkey2: '',
      configkey3: '',
      textvalue: personalConfigStr
    };
    request('POST', URL, {
      body: body
    }).then(function (res) {
      console.log('personal config save success');
    });
  };

  return {
    getPersonalConfig: getPersonalConfig,
    setPersonalConfig: setPersonalConfig
  };
};

var encrypt = function encrypt(str, isPrefix) {
  if (isPrefix === void 0) {
    isPrefix = true;
  }

  if (!isPrefix) {
    return md5$1(str);
  }

  var prefix = location.pathname;

  if (location.hash) {
    var pathArr = location.hash.split('?');
    prefix = prefix + (pathArr ? pathArr[0] : '');
  }

  return md5$1(prefix + '~' + str);
};

var script$w = defineComponent({
  name: 'fm-notify',
  props: {
    show: {
      type: Boolean,
      "default": false
    },
    type: {
      type: String,
      //as PropType<'info' | 'success' | 'danger' | 'warning'>,
      "default": 'info'
    },
    color: {
      type: String,
      "default": '#fff'
    },
    message: {
      type: String
    },
    duration: {
      type: Number,
      "default": 3000
    },
    className: {
      type: String
    },
    background: {
      type: String
    }
  },
  emits: [''],
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        slots = _ref.slots,
        emit = _ref.emit;
    var style = computed(function () {
      return {
        color: props.color,
        background: props.background
      };
    });
    return {
      style: style
    };
  }
});

function render$v(_ctx, _cache, $props, $setup, $data, $options) {
  return withDirectives((openBlock(), createBlock("div", {
    "class": ["fm-notify", ['fm-notify-' + this.type, _ctx.className]],
    style: _ctx.style
  }, toDisplayString(_ctx.message), 7
  /* TEXT, CLASS, STYLE */
  )), [[vShow, _ctx.show]]);
}

script$w.render = render$v;
script$w.__file = "packages/notify/src/notify.vue";

var instance$2;
var timer;

function defaultOptions$2() {
  return {
    type: 'info',
    message: '',
    duration: 3000,
    color: '#fff',
    background: ''
  };
}

function parseOptions$2(message) {
  return isObject(message) ? message : {
    message: message
  };
}

var initInstance$2 = function initInstance() {

  var _mountComponent = mountComponent({
    setup: function setup() {
      var _usePopupState = usePopupState(),
          state = _usePopupState.state,
          toggle = _usePopupState.toggle;

      return function () {
        return createVNode(script$w, Object.assign(Object.assign({}, state), {
          'onUpdate:show': toggle
        }), null);
      };
    }
  });

  instance$2 = _mountComponent.instance;
};

function Notify(options) {
  if (!inBrowser) {
    return;
  }

  if (!instance$2) {
    initInstance$2();
  }

  options = Object.assign(Object.assign({}, Notify.currentOptions), parseOptions$2(options));
  instance$2.open(options);
  clearTimeout(timer);

  if (options.duration > 0) {
    timer = setTimeout(Notify.clear, options.duration);
  }

  return instance$2;
}

Notify.clear = function () {
  if (instance$2) {
    instance$2.toggle(false);
  }
};

Notify.info = function (options) {
  Notify.resetDefaultOptions();
  return Notify(Object.assign(Object.assign({}, parseOptions$2(options)), {
    type: 'info'
  }));
};

Notify.success = function (options) {
  Notify.resetDefaultOptions();
  return Notify(Object.assign(Object.assign({}, parseOptions$2(options)), {
    type: 'success'
  }));
};

Notify.error = function (options) {
  Notify.resetDefaultOptions();
  return Notify(Object.assign(Object.assign({}, parseOptions$2(options)), {
    type: 'error'
  }));
};

Notify.warning = function (options) {
  Notify.resetDefaultOptions();
  return Notify(Object.assign(Object.assign({}, parseOptions$2(options)), {
    type: 'warning'
  }));
};

Notify.currentOptions = defaultOptions$2();

Notify.setDefaultOptions = function (options) {
  Object.assign(Notify.currentOptions, options);
};

Notify.resetDefaultOptions = function () {
  Notify.currentOptions = defaultOptions$2();
};

Notify.install = function (app) {
  app.component(script$w.name, script$w);
  app.config.globalProperties.$notify = Notify;
};

Notify.Component = script$w;

var emptySelected = {
  value: '',
  values: [],
  text: '',
  texts: [],
  items: []
};
var memoizedSelecteds = [];
var memoizedProps = [];
var index$1 = 0;
var historySelected = null;
var useSelect = function useSelect(props) {
  var currentIndex = index$1;

  if (props) {
    memoizedSelecteds[currentIndex] = ref(emptySelected);
    memoizedProps[currentIndex] = props;
    historySelected = null;
    index$1++;
  } else {
    currentIndex = index$1 - 1;
  }

  var selected = memoizedSelecteds[currentIndex];
  props = memoizedProps[currentIndex];
  var LookupMappingFn = inject('LookupMappingFn', {});

  var getSelectedValues = function getSelectedValues(ignorMapValue) {
    if (ignorMapValue === void 0) {
      ignorMapValue = false;
    }

    var _selected = unref(selected);

    var innerSelectedValues = _selected.value ? _selected.value : props.selectedValues;
    var mapIdField = props.mapFields && props.mapFields[props.idField];

    if (!ignorMapValue && (LookupMappingFn === null || LookupMappingFn === void 0 ? void 0 : LookupMappingFn.getFieldValue) && mapIdField) {
      innerSelectedValues = LookupMappingFn.getFieldValue(mapIdField);
    }

    return isString(innerSelectedValues) ? innerSelectedValues.split(',') : [];
  };

  var initSelected = function initSelected(dataList) {
    if (!isArray(dataList)) {
      return;
    }

    var values = dataList.map(function (item) {
      return getValue(props.idField, item);
    });
    var value = values.join(',');
    var texts = dataList.map(function (item) {
      return getValue(props.textField, item);
    });
    var text = texts.join(',');
    selected.value = {
      value: value,
      values: values,
      texts: texts,
      text: text,
      items: dataList
    };
  };

  var mapping = function mapping(items) {
    (LookupMappingFn === null || LookupMappingFn === void 0 ? void 0 : LookupMappingFn.mapFields) && LookupMappingFn.mapFields(items, props.mapFields);
  };

  var isSelected = function isSelected(value, ignorMapValue) {
    if (ignorMapValue === void 0) {
      ignorMapValue = true;
    }

    return getSelectedValues(ignorMapValue).includes(value);
  };

  var toggleSelecte = function toggleSelecte(item) {
    var _a;

    var idValue = getValue(props.idField, item);
    var items = [];

    var _selected = unref(selected);

    if (props.multiSelect) {
      if (isSelected(idValue)) {
        items = _selected.items.filter(function (el) {
          return getValue(props.idField, el) !== idValue;
        });
      } else {
        if (props.selectedLimit > 0 && ((_a = _selected.items) === null || _a === void 0 ? void 0 : _a.length) >= props.selectedLimit) {
          Notify.warning("\u6700\u591A\u9009\u4E2D" + props.selectedLimit + "\u6761");
          return selected.value.limited = true;
        }

        items = [].concat(_selected.items, [item]);
      }
    } else {
      items = isSelected(idValue) ? [] : [item];
    }

    var values = items.map(function (el) {
      return getValue(props.idField, el);
    });
    var value = values.join(',');
    var texts = items.map(function (el) {
      return getValue(props.textField, el);
    });
    var text = texts.join(',');
    selected.value = {
      value: value,
      values: values,
      text: text,
      texts: texts,
      items: items,
      limited: props.selectedLimit > 0 && items.length >= props.selectedLimit
    };
  };

  var toggleSelecteAll = function toggleSelecteAll(items) {
    var _items = [];

    var _selected = unref(selected);

    var _isSelectedAll = isSelectedAll(items);

    if (_isSelectedAll) {
      _items = _selected.items.filter(function (el) {
        return !items.some(function (item) {
          return getValue(props.idField, el) === getValue(props.idField, item);
        });
      });
    } else if (isArray(items)) {
      _items = [].concat(_selected.items);

      for (var i = 0; i < items.length; i++) {
        if (_selected.limited || props.selectedLimit > 0 && _items.length >= props.selectedLimit) {
          Notify.warning("\u6700\u591A\u9009\u4E2D" + props.selectedLimit + "\u6761");
          break;
        }

        var _value = getValue(props.idField, items[i]);

        if (!isSelected(_value)) {
          _items.push(items[i]);
        }
      }
    }

    console.log('toggleSelecteAll');

    var values = _items.map(function (el) {
      return getValue(props.idField, el);
    });

    var value = values.join(',');

    var texts = _items.map(function (el) {
      return getValue(props.textField, el);
    });

    var text = texts.join(',');
    selected.value = {
      value: value,
      values: values,
      text: text,
      texts: texts,
      items: _items,
      limited: props.selectedLimit > 0 && items.length >= props.selectedLimit
    };
  };

  var clearSelected = function clearSelected() {
    selected.value = emptySelected;
  };

  var isSelectedAll = function isSelectedAll(items) {
    return items.every(function (item) {
      return isSelected(getValue(props.idField, item));
    });
  };

  var recordHistorySelected = function recordHistorySelected() {
    historySelected = !historySelected ? selected.value : historySelected;
  };

  var backHistorySelected = function backHistorySelected() {
    if (historySelected) {
      selected.value = historySelected;
    }

    clearHistorySelected();
  };

  var clearHistorySelected = function clearHistorySelected() {
    historySelected = null;
  };

  return {
    selected: selected,
    initSelected: initSelected,
    getSelectedValues: getSelectedValues,
    mapping: mapping,
    isSelected: isSelected,
    isSelectedAll: isSelectedAll,
    toggleSelecte: toggleSelecte,
    toggleSelecteAll: toggleSelecteAll,
    clearSelected: clearSelected,
    recordHistorySelected: recordHistorySelected,
    backHistorySelected: backHistorySelected,
    clearHistorySelected: clearHistorySelected
  };
};

var DisplayType;

(function (DisplayType) {
  DisplayType["LIST"] = "LIST";
  DisplayType["TREELIST"] = "TREELIST";
  DisplayType["NAVLIST"] = "NAVLIST";
  DisplayType["NAVTREELIST"] = "NAVTREELIST";
})(DisplayType || (DisplayType = {}));

var LoadDataFrom;

(function (LoadDataFrom) {
  LoadDataFrom["INIT"] = "init";
  LoadDataFrom["SEARCH"] = "search";
  LoadDataFrom["PULL"] = "pull";
})(LoadDataFrom || (LoadDataFrom = {}));

var LoadTreeDataType;

(function (LoadTreeDataType) {
  LoadTreeDataType["DEFAULT"] = "default";
  LoadTreeDataType["ALL"] = "loadall";
  LoadTreeDataType["LAYER"] = "layerload";
})(LoadTreeDataType || (LoadTreeDataType = {}));

var useLoadData = function useLoadData(props) {
  var _useLoadParam = useLoadParam({
    pageIndex: 1,
    pageSize: isDef(props.pageSize) ? props.pageSize : 20
  }),
      setParam = _useLoadParam.setParam,
      getParam = _useLoadParam.getParam,
      setParams = _useLoadParam.setParams,
      getParams = _useLoadParam.getParams,
      buildParams = _useLoadParam.buildParams,
      resetParams = _useLoadParam.resetParams,
      gotoPage = _useLoadParam.gotoPage,
      setDefaultParams = _useLoadParam.setDefaultParams;

  var loadFinished = toUpperCase(props.type) !== DisplayType.TREELIST && !props.usePullDownLoad;
  var loadState = reactive({
    loadDataFrom: LoadDataFrom.INIT,
    loading: false,
    finished: loadFinished,
    totalPage: 0,
    pullLoading: false,
    searchLoading: false,
    searchFinished: false,
    searchTotalPage: 1,
    searchValue: '',
    searchFields: [],
    displayType: props.type ? toUpperCase(props.type) : DisplayType.LIST
  });

  var initLoadState = function initLoadState() {
    loadState.loadDataFrom = LoadDataFrom.INIT;
    loadState.loading = false;
    loadState.finished = loadFinished;
    loadState.totalPage = 0;
    loadState.pullLoading = false;
    loadState.searchLoading = false;
    loadState.searchFinished = false;
    loadState.searchTotalPage = 1;
    loadState.searchValue = '';
    loadState.searchFields = [];
    loadState.isShowHome = loadState.displayType === DisplayType.NAVTREELIST && props.usePersonal ? true : false;
  };

  var innerDataList = [];
  var innerParentData = [];
  var dataList = ref([]);
  var serverTemplate = ref('');

  var _useHttpService = useHttpService(props.url),
      getData = _useHttpService.getData;

  var _useSelect = useSelect(),
      getSelectedValues = _useSelect.getSelectedValues,
      initSelected = _useSelect.initSelected,
      clearSelected = _useSelect.clearSelected;

  var _usePresonal = usePresonal(),
      setRecentData = _usePresonal.setRecentData;

  var ListParams = {};
  var SearchParams = {};

  var initLoad = function initLoad() {
    resetParams();
    initLoadState();
    clearSelected();
    onBeforeGetData().then(function (result) {
      var _a;

      var selectedData = (result === null || result === void 0 ? void 0 : result.selectedData) ? result.selectedData : (_a = result === null || result === void 0 ? void 0 : result.items) === null || _a === void 0 ? void 0 : _a.filter(function (item) {
        return getSelectedValues().includes(getValue(props.idField, item));
      });
      initSelected(selectedData);
    });
  };

  var onSearch = function onSearch(value, isPullLoad) {
    if (isPullLoad === void 0) {
      isPullLoad = false;
    }

    var _a, _b;

    loadState.searchValue = value;

    if (!value) {
      return initSearchDataList({});
    }

    if (!props.url) {
      return filterData(value);
    }

    if (loadState.searchLoading) {
      return;
    }

    loadState.loadDataFrom = LoadDataFrom.SEARCH;
    loadState.searchLoading = true;

    if (isPullLoad) {
      gotoPage();
    } else {
      var field = (_b = (_a = loadState.searchFields) === null || _a === void 0 ? void 0 : _a.find(function (item) {
        return item.label === props.textField;
      })) === null || _b === void 0 ? void 0 : _b.value;
      var searchParams = {
        search: {
          searchField: '*',
          searchValue: value
        }
      };
      var loadDateTypeParams = {};

      if (loadState.displayType.includes('TREE')) {
        loadDateTypeParams.loadTreeDataType = LoadTreeDataType.ALL;
        loadDateTypeParams.enableFullTree = false;
        loadDateTypeParams.useFullTree = false;
      }

      var pageInfo = {
        pageIndex: 1,
        pageSize: 20
      };
      resetParams();
      setParams(Object.assign(Object.assign(Object.assign({}, pageInfo), searchParams), loadDateTypeParams));
      loadState.searchFinished = false;
    }

    SearchParams = getParams();
    var params = loadState.displayType === DisplayType.NAVTREELIST ? buildParams('list') : buildParams('search');

    if (loadState.searchTotalPage >= SearchParams.pageIndex || !isPullLoad) {
      getData(params).then(function (res) {
        initSearchDataList(res, isPullLoad);
        loadState.searchLoading = false;
        loadState.searchValue !== value && onSearch(loadState.searchValue);
      });
    } else {
      loadState.searchLoading = false;
      loadState.searchFinished = true;
    }
  };

  var filterData = function filterData(value) {
    searchDataList.value = innerDataList.filter(function (item) {
      return getValue(props.textField, item).includes(value);
    });
  };

  var searchDataList = ref([]);

  var initSearchDataList = function initSearchDataList(result, isPullLoad) {
    if (isPullLoad === void 0) {
      isPullLoad = false;
    }

    var _a;

    var data = result.returnValue ? result.returnValue : result;
    var items = (data === null || data === void 0 ? void 0 : data.items) ? data.items : [];
    searchDataList.value = isPullLoad ? [].concat(searchDataList.value, items) : items;

    if (data.total && ((_a = data.pageInfo) === null || _a === void 0 ? void 0 : _a.pageSize)) {
      loadState.searchTotalPage = Math.ceil(data.total / data.pageInfo.pageSize);
    }
  };

  var onPullLoad = function onPullLoad() {
    if (loadState.totalPage > ListParams.pageIndex) {
      if (loadState.pullLoading) {
        return;
      }

      console.log('pullLoad');
      loadState.loadDataFrom = LoadDataFrom.PULL;
      loadState.pullLoading = true;
      resetParams();
      setParams(ListParams);
      gotoPage();
      ListParams = getParams();
      var params = loadState.displayType === DisplayType.LIST ? buildParams() : buildParams('list');
      getData(params).then(function (res) {
        initData(res);
        loadState.pullLoading = false;
      });
    } else {
      loadState.finished = true;
    }
  };

  var onBeforeGetData = function onBeforeGetData() {
    return new Promise(function (resolve, reject) {
      if (!props.url) {
        initData(props.data);
        resolve(props.data);
        return;
      }

      try {
        var callBack = function callBack(res) {
          (res === null || res === void 0 ? void 0 : res.data) && setParam('customData', res.data);
          (res === null || res === void 0 ? void 0 : res.recentData) && setRecentData(res.recentData);

          if (loadState.displayType === DisplayType.TREELIST) {
            setDefaultParams({
              pageIndex: null,
              pageSize: null,
              loadTreeDataType: props.loadTreeDataType,
              enableFullTree: props.enableFullTree
            });
          } else if (loadState.displayType === DisplayType.NAVTREELIST) {
            setDefaultParams({
              pageIndex: 1,
              pageSize: 0,
              loadTreeDataType: props.loadTreeDataType
            });
          }

          setParams({
            selectedInfo: {
              selectedIds: getSelectedValues(),
              selected: true
            },
            pageSize: loadState.displayType === DisplayType.NAVTREELIST ? 1 : null
          });
          ListParams = getParams();
          var params = buildParams();
          getData(params).then(function (res) {
            initData(res);
            resolve(res);
          });
        };

        var asyncTarget = isFunction(props.beforeGetData) && props.beforeGetData();

        if (asyncTarget instanceof Promise) {
          asyncTarget.then(callBack);
        } else if (asyncTarget && asyncTarget.subscribe) {
          console.log('subscribe');
          asyncTarget.subscribe(callBack);
        } else {
          callBack();
        }
      } catch (error) {
        reject(error);
      }
    });
  };

  var initData = function initData(result) {
    var data = result.returnValue ? result.returnValue : result;
    loadState.searchFields = data.searchFields ? data.searchFields : loadState.searchFields;
    loadState.displayType = (data === null || data === void 0 ? void 0 : data.displayType) ? toUpperCase(data.displayType) : loadState.displayType;

    if (props.useServerTemplate) {
      serverTemplate.value = data.listTemplate ? data.listTemplate : '';
    }

    if (data.treeInfo) {
      loadState.treeInfo = data.treeInfo;
    }

    switch (loadState.displayType) {
      case DisplayType.LIST:
        {
          initListData(data);
          break;
        }

      case DisplayType.TREELIST:
        {
          initTreeListData(data);
          break;
        }

      case DisplayType.NAVTREELIST:
        {
          initNavTreeListData(data);
          break;
        }
    }
  };

  var initListData = function initListData(data) {
    var _a;

    if (isPullLoad()) {
      innerDataList = [].concat(innerDataList, data.items);
      loadState.loading = false;
    } else {
      innerDataList = data.items;
    }

    if (data.total && ((_a = data.pageInfo) === null || _a === void 0 ? void 0 : _a.pageSize)) {
      var floorTotal = Math.floor(data.total / data.pageInfo.pageSize);
      loadState.totalPage = data.total % data.pageInfo.pageSize ? floorTotal + 1 : floorTotal;
    }

    dataList.value = [].concat(innerDataList);
  };

  var _useGetTreeData = useGetTreeData(props.idField),
      getTreeData = _useGetTreeData.getTreeData,
      getParentData = _useGetTreeData.getParentData;

  var parentData = ref([]);

  var initTreeListData = function initTreeListData(data) {
    innerDataList = data.items;
    loadTreeData();
  };

  var initNavTreeListData = function initNavTreeListData(data) {
    var items = data.items,
        navigation = data.navigation;

    if (navigation) {
      innerParentData = navigation.items;
      loadState.relations = navigation.relations;
      loadState.treeInfo = navigation.treeInfo;
    }

    innerDataList = items;
    loadTreeData();
  };

  var loadTreeData = function loadTreeData(item) {
    var cb = function cb(res) {
      dataList.value = res.dataList;
      parentData.value = res.parentData;
    };

    if (loadState.displayType === DisplayType.TREELIST) {
      getTreeListData(item).then(cb);
    } else if (loadState.displayType === DisplayType.NAVTREELIST) {
      getNvaTreeData(item).then(cb);
    }
  };

  var getTreeListData = function getTreeListData(item) {
    var _a;

    if (item && isAsyncLoad()) {
      var nodeInfo = loadState.treeInfo && item[loadState.treeInfo.dataField];
      resetParams();
      setParams({
        search: {
          parentLayer: nodeInfo.layer,
          parentPath: nodeInfo.path,
          parentID: ((_a = loadState.treeInfo) === null || _a === void 0 ? void 0 : _a.layerType) === 'parentId' ? item.id : null
        },
        loadTreeDataType: props.loadTreeDataType
      });
      var params = buildParams('children');
      return new Promise(function (resolve) {
        getData(params).then(function (res) {
          var datas = res.items.map(function (item) {
            item.data.__meta = item;
            return item.data;
          });

          if (parentData.value.find(function (el) {
            return el[props.idField] === item[props.idField];
          })) {
            parentData.value.splice(-2, 2);
          }

          resolve({
            dataList: datas,
            parentData: [].concat(parentData.value, [item])
          });
        });
      });
    }

    var id = item ? item[props.idField] : '';
    return Promise.resolve({
      dataList: getTreeData(innerDataList, id),
      parentData: getParentData()
    });
  };

  var getNvaTreeData = function getNvaTreeData(item, isMerge) {
    if (isMerge === void 0) {
      isMerge = true;
    }

    var id = item ? item[props.idField] : '';
    var navDataList = getTreeData(innerParentData, id).map(function (data) {
      data.__isNav = true;
      return data;
    });

    if (id || item && isAsyncLoad()) {
      return new Promise(function (resolve) {
        getNvaTreeChildrenData(item).then(function (res) {
          var _a;

          var items = id ? res.items : [];
          innerDataList = items;

          if (isAsyncLoad()) {
            innerParentData = ((_a = res === null || res === void 0 ? void 0 : res.navigation) === null || _a === void 0 ? void 0 : _a.items) && res.navigation.items.length > 0 ? res.navigation.items : innerParentData;
            navDataList = getTreeData(innerParentData, id).map(function (data) {
              data.__isNav = true;
              return data;
            });
          }

          resolve({
            dataList: isMerge ? [].concat(items, navDataList) : items,
            parentData: getParentData()
          });
        });
      });
    }

    return Promise.resolve({
      dataList: navDataList,
      parentData: getParentData()
    });
  };

  var getNvaTreeChildrenData = function getNvaTreeChildrenData(item) {
    var relation = loadState.relations && loadState.relations[0];
    var groupField = relation === null || relation === void 0 ? void 0 : relation.groupField;
    var helpField = relation === null || relation === void 0 ? void 0 : relation.helpField;
    var groupFieldValue = groupField ? getValue(groupField, item) : '';
    resetParams();
    var params = {};

    if (isAsyncLoad()) {
      var nodeInfo = loadState.treeInfo && item && item[toLowerCase(loadState.treeInfo.dataField, 0, 1)];
      var isRoot = !nodeInfo;
      var navParams = isRoot ? {} : {
        search: {
          parentLayer: nodeInfo.layer,
          parentPath: nodeInfo.path
        },
        relationFilter: [{
          fieldName: helpField,
          fieldValue: groupFieldValue
        }]
      };
      setParams(Object.assign(Object.assign({}, navParams), {
        loadTreeDataType: props.loadTreeDataType,
        pageSize: isRoot ? 1 : 0
      }));
      params = buildParams();
    } else {
      setParams({
        enableFullTree: false,
        relationFilter: [{
          fieldName: helpField,
          fieldValue: groupFieldValue
        }],
        pageIndex: isPullLoad() ? getParam('pageIndex') : 1,
        pageSize: 0
      });
      params = buildParams('list');
    }

    return getData(params);
  };

  var isAsyncLoad = function isAsyncLoad() {
    var _a;

    return ((_a = loadState.treeInfo) === null || _a === void 0 ? void 0 : _a.loadDataType) === 'async' || props.loadTreeDataType === LoadTreeDataType.LAYER;
  };

  var isPullLoad = function isPullLoad() {
    return loadState.loadDataFrom === LoadDataFrom.PULL;
  };

  var resetData = function resetData() {
    loadState.currentItem = undefined;

    if (loadState.displayType.includes('TREE')) {
      loadTreeData();
    }

    dataList.value = [];
    searchDataList.value = [];
  };

  return {
    serverTemplate: serverTemplate,
    dataList: dataList,
    parentData: parentData,
    searchDataList: searchDataList,
    loadState: loadState,
    onSearch: onSearch,
    onPullLoad: onPullLoad,
    initLoad: initLoad,
    resetData: resetData,
    loadTreeData: loadTreeData,
    getNvaTreeData: getNvaTreeData
  };
};

var _components$p;
var script$x = defineComponent({
  name: 'lookup-header',
  components: (_components$p = {}, _components$p[Input.name] = Input, _components$p),
  props: {
    subTitle: {
      type: String,
      "default": ''
    },
    searchFocused: Boolean,
    isHome: Boolean,
    searchValue: String
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var _useRootProps = useRootProps('lookup-panel'),
        rootProps = _useRootProps.rootProps;

    var innerSearchValue = ref(props.searchValue);
    watch(function () {
      return props.searchValue;
    }, function (val) {
      return innerSearchValue.value = val;
    });

    var _useSelect = useSelect(),
        selected = _useSelect.selected,
        toggleSelecte = _useSelect.toggleSelecte,
        backHistorySelected = _useSelect.backHistorySelected;

    var onBack = function onBack() {
      if (props.searchFocused) {
        emit('update:searchFocused', false);
        emit('update:searchValue', '');
        emit('search', '');
        backHistorySelected();
      } else {
        emit('back');
      }
    };

    var onConfirm = function onConfirm() {
      emit('confirm');
    };

    var onSearch = function onSearch(value, type) {

      emit('update:searchValue', value);
      emit('search', value);
    };

    var onKeypress = function onKeypress(event) {
      if (event.code === 'Enter') {
        preventDefault(event);
      }
    };

    var isFocus = ref(false);

    var onBlur = function onBlur() {
      if (!innerSearchValue.value) {
        isFocus.value = false;
        emit('update:searchFocused', false);
      }
    };

    var onFocus = function onFocus() {
      isFocus.value = true;
      emit('update:searchFocused', true);
    };

    var selectedLength = computed(function () {
      return selected.value.items.length;
    });
    var showAvatar = computed(function () {
      return toUpperCase(rootProps.type) === DisplayType.NAVTREELIST;
    });

    var getAvatarText = function getAvatarText(text) {
      return isString(text) ? text.slice(-2) : '';
    };

    var showRoot = computed(function () {
      return props.isHome && !isFocus.value;
    });
    var inputRef = ref();

    var focus = function focus() {
      var _inputRef$value;

      (_inputRef$value = inputRef.value) == null ? void 0 : _inputRef$value.focus();
    };

    var showPortal = ref(true);

    var onPortalClick = function onPortalClick() {
      console.log('portal-click');
      showPortal.value = false;
      emit('portal-click');
    };

    return {
      rootProps: rootProps,
      selectedLength: selectedLength,
      showAvatar: showAvatar,
      showRoot: showRoot,
      selected: selected,
      innerSearchValue: innerSearchValue,
      showPortal: showPortal,
      inputRef: inputRef,
      getAvatarText: getAvatarText,
      focus: focus,
      onBack: onBack,
      onConfirm: onConfirm,
      onSearch: debounce(onSearch, 300),
      onKeypress: onKeypress,
      onBlur: onBlur,
      onFocus: onFocus,
      toggleSelecte: toggleSelecte,
      getValue: getValue,
      onPortalClick: onPortalClick
    };
  }
});

var _hoisted_1$k = {
  "class": "fm-lookup-panel-header"
};
var _hoisted_2$h = {
  "class": "nav-bar"
};
var _hoisted_3$b = {
  "class": "nav-title"
};
var _hoisted_4$9 = {
  "class": "nav-sub-title"
};
var _hoisted_5$6 = {
  "class": ['search-wrapper', 'search-wrapper-vertical']
};
var _hoisted_6$5 = {
  key: 0,
  "class": "search-selected"
};
var _hoisted_7$3 = {
  "class": "search-selected-item-text"
};
var _hoisted_8$3 = {
  key: 1,
  "class": "search-selected-item-wrapper"
};
var _hoisted_9$3 = {
  "class": "search-selected-item-text"
};
var _hoisted_10$1 = {
  "class": "avatar-wrapper"
};
var _hoisted_11$1 = {
  key: 1
};
var _hoisted_12$1 = {
  key: 0,
  "class": "header-portal"
};
function render$w(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_image = resolveComponent("fm-image");

  var _component_fm_input = resolveComponent("fm-input");

  var _component_fm_cell = resolveComponent("fm-cell");

  return openBlock(), createBlock("div", _hoisted_1$k, [createVNode("div", _hoisted_2$h, [createVNode("div", {
    "class": "nav-left",
    onClick: _cache[1] || (_cache[1] = function () {
      return _ctx.onBack && _ctx.onBack.apply(_ctx, arguments);
    })
  }, [createVNode(_component_fm_icon, {
    name: "s-arrow-left"
  })]), createVNode("div", {
    "class": "nav-content",
    style: {
      alignItems: _ctx.subTitle ? '' : 'center'
    }
  }, [createVNode("div", _hoisted_3$b, toDisplayString(_ctx.rootProps.title), 1
  /* TEXT */
  ), createVNode("div", _hoisted_4$9, toDisplayString(_ctx.subTitle), 1
  /* TEXT */
  )], 4
  /* STYLE */
  )]), createCommentVNode(" <fm-search\r\n      v-if=\"showSearch\"\r\n      :modelValue=\"searchValue\"\r\n      placeholder=\"\"\r\n      @search=\"onSearch\"\r\n      @update:modelValue=\"onSearch($event, 'input')\"\r\n      @clear=\"onSearch('', 'clear')\"\r\n    >\r\n      <template #left-icon>\r\n        \r\n      </template>\r\n    </fm-search> "), createVNode("div", _hoisted_5$6, [_ctx.selectedLength > 0 ? (openBlock(), createBlock("div", _hoisted_6$5, [!_ctx.showAvatar ? (openBlock(), createBlock(Fragment, {
    key: 0
  }, [_ctx.selectedLength > _ctx.rootProps.collapseLimit ? (openBlock(), createBlock("div", {
    key: 0,
    "class": "search-selected-item",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return _ctx.$emit('seclected-click');
    })
  }, [createVNode("span", _hoisted_7$3, toDisplayString("" + _ctx.selected.texts[0]), 1
  /* TEXT */
  ), createVNode("span", null, toDisplayString("\u7B49" + _ctx.selectedLength + "\u4E2A"), 1
  /* TEXT */
  )])) : (openBlock(), createBlock("div", _hoisted_8$3, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.selected.items, function (item, index) {
    return openBlock(), createBlock("div", {
      "class": "search-selected-item",
      onClick: function onClick($event) {
        return _ctx.toggleSelecte(item);
      }
    }, [createVNode("span", _hoisted_9$3, toDisplayString(_ctx.selected.texts[index]), 1
    /* TEXT */
    )], 8
    /* PROPS */
    , ["onClick"]);
  }), 256
  /* UNKEYED_FRAGMENT */
  ))]))], 64
  /* STABLE_FRAGMENT */
  )) : (openBlock(), createBlock(Fragment, {
    key: 1
  }, [createVNode("div", _hoisted_10$1, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.selected.items, function (item, index) {
    return openBlock(), createBlock("div", {
      "class": "avatar",
      onClick: function onClick($event) {
        return _ctx.toggleSelecte(item);
      }
    }, [_ctx.getValue(_ctx.rootProps.avatarField, item) ? (openBlock(), createBlock(_component_fm_image, {
      key: 0,
      "class": "avatar-image",
      src: _ctx.rootProps.avatarPrefix + _ctx.getValue(_ctx.rootProps.avatarField, item) + _ctx.rootProps.avatarSuffix,
      round: ""
    }, {
      error: withCtx(function () {
        return [createVNode("span", null, toDisplayString(_ctx.getAvatarText(_ctx.selected.texts[index])), 1
        /* TEXT */
        )];
      }),
      _: 2
      /* DYNAMIC */

    }, 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["src"])) : (openBlock(), createBlock("span", _hoisted_11$1, toDisplayString(_ctx.getAvatarText(_ctx.selected.texts[index])), 1
    /* TEXT */
    ))], 8
    /* PROPS */
    , ["onClick"]);
  }), 256
  /* UNKEYED_FRAGMENT */
  ))]), createVNode("div", {
    "class": "search-selected-item",
    onClick: _cache[3] || (_cache[3] = function ($event) {
      return _ctx.$emit('seclected-click');
    })
  }, [createVNode("span", null, toDisplayString("\u5171" + _ctx.selectedLength + "\u4E2A"), 1
  /* TEXT */
  )])], 64
  /* STABLE_FRAGMENT */
  ))])) : createCommentVNode("v-if", true), _ctx.rootProps.useSearch ? (openBlock(), createBlock(_component_fm_input, {
    key: 1,
    ref: "inputRef",
    "class": "search-input",
    placeholder: "",
    modelValue: _ctx.innerSearchValue,
    "onUpdate:modelValue": [_cache[4] || (_cache[4] = function ($event) {
      return _ctx.innerSearchValue = $event;
    }), _cache[5] || (_cache[5] = function ($event) {
      return _ctx.onSearch($event, 'input');
    })],
    "left-icon": _ctx.searchFocused ? '' : 's-search-o',
    inputAlign: "left",
    clearable: true,
    onKeypress: _ctx.onKeypress,
    onClear: _cache[6] || (_cache[6] = function ($event) {
      return _ctx.onSearch('', 'clear');
    }),
    onBlur: _ctx.onBlur,
    onFocus: _ctx.onFocus
  }, null, 8
  /* PROPS */
  , ["modelValue", "left-icon", "onKeypress", "onBlur", "onFocus"])) : createCommentVNode("v-if", true)]), _ctx.showRoot ? (openBlock(), createBlock("div", _hoisted_12$1, [createVNode(_component_fm_icon, {
    "class": "header-portal-icon",
    name: "s-processflow"
  }), createVNode(_component_fm_cell, {
    title: _ctx.rootProps.navTitle,
    isLink: "",
    onClick: withModifiers(_ctx.onPortalClick, ["stop"])
  }, null, 8
  /* PROPS */
  , ["title", "onClick"])])) : createCommentVNode("v-if", true)]);
}

script$x.render = render$w;
script$x.__file = "packages/lookup-panel/src/components/header.vue";

var _components$q;
var script$y = defineComponent({
  name: 'lookup-list',
  components: (_components$q = {}, _components$q[List.name] = List, _components$q),
  props: {
    dataList: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    parentData: {
      type: Object,
      "default": function _default() {
        return {};
      }
    },
    loading: {
      type: Boolean,
      "default": false
    },
    finished: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var _useRootProps = useRootProps('lookup-panel'),
        rootProps = _useRootProps.rootProps;

    var upperCaseType = computed(function () {
      return toUpperCase(rootProps.type);
    });

    var showAvatar = function showAvatar(item) {
      return upperCaseType.value === DisplayType.NAVTREELIST && !item.__isNav;
    };

    var showChecker = function showChecker(item) {
      return rootProps.multiSelect && !item.__isNav;
    };

    var showArrow = function showArrow(item) {
      return isNav(item) || !(isLeaf(item) || isParent(item));
    };

    var showStar = function showStar(item) {
      return upperCaseType.value !== DisplayType.NAVTREELIST ? rootProps.useFavorite : !showArrow(item) && rootProps.useFavorite;
    };

    var getAvatarText = function getAvatarText(item) {
      var text = getValue$1(item, 'text');
      return isString(text) ? text.slice(-2) : '';
    };

    var isLeaf = function isLeaf(item) {
      var _item$__meta;

      if (upperCaseType.value !== DisplayType.TREELIST) {
        return true;
      }

      return ((_item$__meta = item.__meta) == null ? void 0 : _item$__meta.leaf) || rootProps.customLeaf && rootProps.customLeaf(item);
    };

    var isNav = function isNav(item) {
      return upperCaseType.value === DisplayType.NAVTREELIST && item.__isNav;
    };

    var isParent = function isParent(item) {
      return isChildren.value && props.parentData[rootProps.idField] === item[rootProps.idField];
    };

    var isSelectable = function isSelectable(item) {
      return (!rootProps.onlySelectLeaf || rootProps.onlySelectLeaf && isLeaf(item)) && (rootProps.customSelectable ? rootProps.customSelectable(item) : true);
    };

    var isChildren = computed(function () {
      return props.parentData && props.parentData[rootProps.idField];
    });
    var bem = useBem('fm-lookup-panel-content');
    var allDataList = computed(function () {
      return props.parentData && props.parentData[rootProps.idField] ? [props.parentData].concat(props.dataList) : props.dataList;
    });

    var _usePresonal = usePresonal(),
        setFavoriteData = _usePresonal.setFavoriteData;

    var onIconClick = function onIconClick(item, type) {
      if (type === void 0) {
        type = 'arrow';
      }

      if (type === 'arrow') {
        emit('icon-click', item);
      } else {
        console.log('favorite');
        setFavoriteData(item);
      }
    };

    var _useSelect = useSelect(),
        isSelected = _useSelect.isSelected;

    var onCellClick = function onCellClick(item) {
      if (rootProps.onlySelectLeaf) {
        if (isLeaf(item)) {
          isSelectable(item) && emit('cell-click', item);
        } else {
          emit('icon-click', item);
        }
      } else if (isNav(item)) {
        emit('icon-click', item);
      } else {
        if (isSelectable(item)) {
          emit('cell-click', item);
        } else if (!isLeaf(item)) {
          emit('icon-click', item);
        }
      }
    };

    var loadingChange = function loadingChange(value) {
      return emit('update:loading', value);
    };

    var getValue$1 = function getValue$1(data, field) {
      if (field === void 0) {
        field = 'id';
      }

      var fieldName = field === 'text' ? data.__isNav ? rootProps.navTextField : rootProps.textField : field;
      return getValue(fieldName, data);
    };

    var listRef = ref();

    var checkLoad = function checkLoad() {
      listRef.value && listRef.value.check();
    };

    watch(function () {
      return props.dataList;
    }, checkLoad);

    var _usePresonal2 = usePresonal(),
        isFavorited = _usePresonal2.isFavorited;

    return {
      rootProps: rootProps,
      bem: bem,
      listRef: listRef,
      allDataList: allDataList,
      isSelected: isSelected,
      isLeaf: isLeaf,
      isChildren: isChildren,
      isSelectable: isSelectable,
      showAvatar: showAvatar,
      showChecker: showChecker,
      getAvatarText: getAvatarText,
      onCellClick: onCellClick,
      getValue: getValue$1,
      showArrow: showArrow,
      showStar: showStar,
      onIconClick: onIconClick,
      loadingChange: loadingChange,
      isFavorited: isFavorited
    };
  }
});

var _hoisted_1$l = {
  "class": "list-checker-wrapper"
};
var _hoisted_2$i = {
  key: 0,
  "class": "avatar-wrapper"
};
var _hoisted_3$c = {
  "class": "avatar"
};
var _hoisted_4$a = {
  key: 1
};
var _hoisted_5$7 = {
  key: 1,
  "class": "fm-lookup-list-empty"
};

var _hoisted_6$6 = /*#__PURE__*/createVNode("span", {
  "class": "fm-lookup-list-empty-text"
}, "", -1
/* HOISTED */
);

function render$x(_ctx, _cache, $props, $setup, $data, $options) {
  var _this = this;

  var _component_fm_checker = resolveComponent("fm-checker");

  var _component_fm_image = resolveComponent("fm-image");

  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_van_list = resolveComponent("van-list");

  return _ctx.allDataList && _ctx.allDataList.length > 0 ? (openBlock(), createBlock(_component_van_list, {
    key: 0,
    "class": "list",
    loading: _ctx.loading,
    finished: _ctx.finished,
    ref: "listRef",
    "onUpdate:loading": _ctx.loadingChange,
    onLoad: _cache[1] || (_cache[1] = function ($event) {
      return _ctx.$emit('load');
    })
  }, {
    "default": withCtx(function () {
      return [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.allDataList, function (item, index) {
        return openBlock(), createBlock("div", {
          key: item[_ctx.rootProps.idField],
          "class": [_ctx.bem('list-item'), _ctx.isSelected(item[_ctx.rootProps.idField]) ? _ctx.bem('list-item-selected') : '', _ctx.rootProps.multiSelect || _ctx.showAvatar(item) ? _ctx.bem('list-item-checker') : '', _ctx.isChildren && index > 0 ? _ctx.bem('list-item-children') : ''],
          onClick: function onClick($event) {
            return _ctx.onCellClick(item);
          }
        }, [createVNode("div", _hoisted_1$l, [_ctx.showChecker(item) ? (openBlock(), createBlock(_component_fm_checker, {
          key: 0,
          disabled: !_ctx.isSelectable(item),
          "class": _ctx.bem('list-item-icon'),
          checked: _ctx.isSelected(item[_ctx.rootProps.idField])
        }, null, 8
        /* PROPS */
        , ["disabled", "class", "checked"])) : createCommentVNode("v-if", true)]), _ctx.showAvatar(item) ? (openBlock(), createBlock("div", _hoisted_2$i, [createVNode("div", _hoisted_3$c, [_ctx.getValue(item, _ctx.rootProps.avatarField) ? (openBlock(), createBlock(_component_fm_image, {
          key: 0,
          "class": "avatar-image",
          src: _ctx.rootProps.avatarPrefix + _ctx.getValue(item, _ctx.rootProps.avatarField) + _ctx.rootProps.avatarSuffix,
          round: ""
        }, {
          error: withCtx(function () {
            return [createVNode("span", null, toDisplayString(_ctx.getAvatarText(item)), 1
            /* TEXT */
            )];
          }),
          _: 2
          /* DYNAMIC */

        }, 1032
        /* PROPS, DYNAMIC_SLOTS */
        , ["src"])) : (openBlock(), createBlock("span", _hoisted_4$a, toDisplayString(_ctx.getAvatarText(item)), 1
        /* TEXT */
        ))])])) : createCommentVNode("v-if", true), createVNode("div", {
          "class": _ctx.bem('list-item-cell-warpper')
        }, [renderSlot(_ctx.$slots, "default", {
          listData: _ctx.dataList,
          item: item,
          idField: _ctx.rootProps.idField,
          textField: _ctx.rootProps.textField,
          instance: _this
        }, function () {
          return [createVNode(_component_fm_cell, {
            title: _ctx.getValue(item, 'text'),
            "class": ["list-item-cell", {
              'list-item-cell-disabled': !_ctx.isSelectable(item)
            }]
          }, createSlots({
            _: 2
            /* DYNAMIC */

          }, [_ctx.showArrow(item) || _ctx.rootProps.useFavorite ? {
            name: "right-icon",
            fn: withCtx(function () {
              return [_ctx.showStar(item) ? (openBlock(), createBlock("div", {
                key: 0,
                "class": "list-item-cell-favorite",
                onClick: withModifiers(function ($event) {
                  return _ctx.onIconClick(item, 'fav');
                }, ["stop"])
              }, [createVNode(_component_fm_icon, {
                name: _ctx.isFavorited(item) ? 's-star' : 's-star-o'
              }, null, 8
              /* PROPS */
              , ["name"])], 8
              /* PROPS */
              , ["onClick"])) : createCommentVNode("v-if", true), _ctx.showArrow(item) ? (openBlock(), createBlock("div", {
                key: 1,
                "class": "list-item-cell-arrow",
                onClick: withModifiers(function ($event) {
                  return _ctx.onIconClick(item);
                }, ["stop"])
              }, [createVNode(_component_fm_icon, {
                name: "s-arrow"
              })], 8
              /* PROPS */
              , ["onClick"])) : createCommentVNode("v-if", true)];
            })
          } : undefined]), 1032
          /* PROPS, DYNAMIC_SLOTS */
          , ["title", "class"])];
        })], 2
        /* CLASS */
        )], 10
        /* CLASS, PROPS */
        , ["onClick"]);
      }), 128
      /* KEYED_FRAGMENT */
      ))];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["loading", "finished", "onUpdate:loading"])) : (openBlock(), createBlock("div", _hoisted_5$7, [createCommentVNode(" <slot name=\"listviewEmpty\">\r\n    </slot> "), _hoisted_6$6]));
}

script$y.render = render$x;
script$y.__file = "packages/lookup-panel/src/components/list.vue";

var script$z = defineComponent({
  name: 'lookup-footer',
  props: {
    leftText: {
      type: String,
      "default": ''
    },
    rightText: {
      type: String,
      "default": ''
    }
  },
  setup: function setup() {
    var _useSelect = useSelect(),
        selected = _useSelect.selected;

    var selectedTexts = computed(function () {
      return selected.value.texts;
    });
    var selectedLength = computed(function () {
      return selectedTexts.value.length;
    });
    return {
      selectedLength: selectedLength,
      selectedTexts: selectedTexts
    };
  }
});

var _hoisted_1$m = {
  "class": "fm-lookup-panel-footer"
};
function render$y(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_button = resolveComponent("fm-button");

  return openBlock(), createBlock("div", _hoisted_1$m, [createVNode("div", null, [renderSlot(_ctx.$slots, "left", {}, function () {
    return [_ctx.leftText ? (openBlock(), createBlock("span", {
      key: 0,
      style: {
        "font-size": "16px",
        "color": "#3A90FF"
      },
      onClick: _cache[1] || (_cache[1] = function ($event) {
        return _ctx.$emit('left-click');
      })
    }, toDisplayString(_ctx.leftText), 1
    /* TEXT */
    )) : createCommentVNode("v-if", true)];
  })]), createVNode(_component_fm_button, {
    round: "",
    size: "small",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return _ctx.$emit('right-click');
    })
  }, {
    "default": withCtx(function () {
      return [createTextVNode(toDisplayString(_ctx.rightText), 1
      /* TEXT */
      )];
    }),
    _: 1
    /* STABLE */

  })]);
}

script$z.render = render$y;
script$z.__file = "packages/lookup-panel/src/components/footer.vue";

var script$A = {
  name: 'fm-navbar',
  props: {
    title: {
      type: String
    },
    fixed: {
      type: Boolean,
      "default": false
    },
    leftText: {
      type: String
    },
    rightText: {
      type: String
    },
    leftArrow: {
      type: Boolean,
      "default": true
    },
    border: {
      type: Boolean,
      "default": false
    },
    className: {
      type: String
    }
  },
  data: function data() {
    return {};
  },
  methods: {
    onClickLeft: function onClickLeft(event) {
      this.$emit('click-left', event);
    },
    onClickRight: function onClickRight(event) {
      this.$emit('click-right', event);
    }
  }
};

const _hoisted_1$n = {
  key: 0,
  class: "fm-navbar-left-arrow fm-icon fm-icon-s-arrow-left"
};
const _hoisted_2$j = {
  key: 1,
  class: "fm-navbar-text"
};
const _hoisted_3$d = { class: "fm-navbar-title" };
const _hoisted_4$b = { class: "fm-navbar-text" };

function render$z(_ctx, _cache, $props, $setup, $data, $options) {
  return (openBlock(), createBlock("div", {
    class: ["fm-navbar", [
    $props.fixed? 'fm-navbar-fixed':'',
    $props.border? 'fm-navbar-border-bottom':'',
    $props.className
  ]]
  }, [
    ($props.leftArrow || $props.leftText)
      ? (openBlock(), createBlock("div", {
          key: 0,
          class: ["fm-navbar-left", {'fm-navbar-left-padding':$props.leftArrow}],
          onClick: _cache[1] || (_cache[1] = $event => ($options.onClickLeft($event)))
        }, [
          renderSlot(_ctx.$slots, "left", {}, () => [
            ($props.leftArrow)
              ? (openBlock(), createBlock("span", _hoisted_1$n))
              : createCommentVNode("v-if", true),
            ($props.leftText)
              ? (openBlock(), createBlock("span", _hoisted_2$j, toDisplayString($props.leftText), 1 /* TEXT */))
              : createCommentVNode("v-if", true)
          ])
        ], 2 /* CLASS */))
      : createCommentVNode("v-if", true),
    createVNode("div", _hoisted_3$d, [
      renderSlot(_ctx.$slots, "title", {}, () => [
        createTextVNode(toDisplayString($props.title), 1 /* TEXT */)
      ])
    ]),
    createVNode("div", {
      class: "fm-navbar-right",
      onClick: _cache[2] || (_cache[2] = $event => ($options.onClickRight($event)))
    }, [
      renderSlot(_ctx.$slots, "right", {}, () => [
        createVNode("span", _hoisted_4$b, toDisplayString($props.rightText), 1 /* TEXT */)
      ])
    ])
  ], 2 /* CLASS */))
}

script$A.render = render$z;
script$A.__file = "packages/navbar/src/navbar.vue";

script$A.install = function (app) {
  app.component(script$A.name, script$A);
};

var _components$r;
var script$B = defineComponent({
  name: 'lookup-selected-panel',
  components: (_components$r = {}, _components$r[script$A.name] = script$A, _components$r[script$A.name] = script$A, _components$r[script$y.name] = script$y, _components$r),
  props: {
    show: {
      type: Boolean,
      "default": false
    },
    dataList: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  },
  setup: function setup() {
    var _useRootProps = useRootProps('lookup-panel'),
        rootProps = _useRootProps.rootProps;

    var _useSelect = useSelect(),
        selected = _useSelect.selected,
        toggleSelecte = _useSelect.toggleSelecte;

    var onClear = function onClear(item) {
      toggleSelecte(item);
    };

    return {
      rootProps: rootProps,
      onClear: onClear,
      getValue: getValue,
      selected: selected
    };
  }
});

var _hoisted_1$o = {
  "class": "selected-panel"
};
var _hoisted_2$k = {
  "class": "list-wrapper"
};
function render$A(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_navbar = resolveComponent("fm-navbar");

  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_lookup_list = resolveComponent("lookup-list");

  var _component_fm_popup = resolveComponent("fm-popup");

  return openBlock(), createBlock("div", _hoisted_1$o, [createVNode(_component_fm_popup, {
    "class": "popup-wrapper",
    show: _ctx.show,
    position: "right",
    zIndex: 100,
    overlay: false
  }, {
    "default": withCtx(function () {
      return [createVNode(_component_fm_navbar, {
        "class": "nav-bar",
        title: "",
        "left-arrow": "",
        onClickLeft: _cache[1] || (_cache[1] = function ($event) {
          return _ctx.$emit('update:show', false);
        })
      }), createVNode("div", _hoisted_2$k, [createVNode(_component_lookup_list, {
        dataList: _ctx.selected.items
      }, {
        "default": withCtx(function (slotProps) {
          return [createVNode(_component_fm_cell, {
            title: _ctx.getValue(_ctx.rootProps.textField, slotProps.item),
            label: _ctx.getValue(_ctx.rootProps.fullPath, slotProps.item)
          }, {
            "right-icon": withCtx(function () {
              return [createVNode(_component_fm_icon, {
                name: "s-clear-o",
                style: {
                  "font-size": "20px",
                  "color": "#c6c6c6"
                },
                onClick: function onClick($event) {
                  return _ctx.onClear(slotProps.item);
                }
              }, null, 8
              /* PROPS */
              , ["onClick"])];
            }),
            _: 2
            /* DYNAMIC */

          }, 1032
          /* PROPS, DYNAMIC_SLOTS */
          , ["title", "label"])];
        }),
        _: 1
        /* STABLE */

      }, 8
      /* PROPS */
      , ["dataList"])])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["show"])]);
}

script$B.render = render$A;
script$B.__file = "packages/lookup-panel/src/components/selected-panel.vue";

var _components$s;
var script$C = defineComponent({
  name: 'lookup-search-panel',
  components: (_components$s = {}, _components$s[script$y.name] = script$y, _components$s),
  props: {
    finished: {
      type: Boolean,
      "default": false
    },
    loading: {
      type: Boolean,
      "default": false
    },
    dataList: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var _useRootProps = useRootProps('lookup-panel'),
        rootProps = _useRootProps.rootProps;

    var showTitle = computed(function () {
      return toUpperCase(rootProps.type) === DisplayType.NAVTREELIST && props.dataList && props.dataList.length > 0;
    });
    var innerLoading = ref(props.loading);
    watch(function () {
      return props.loading;
    }, function (newValue) {
      innerLoading.value = newValue;
    });

    var onUpdateLoading = function onUpdateLoading(value) {
      emit('update:loading', value);
    };

    var onCellClick = function onCellClick(item) {
      emit('cell-click', item);
    };

    return {
      rootProps: rootProps,
      showTitle: showTitle,
      getValue: getValue,
      innerLoading: innerLoading,
      onUpdateLoading: onUpdateLoading,
      onCellClick: onCellClick
    };
  }
});

var _hoisted_1$p = {
  "class": "search-panel"
};
function render$B(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_lookup_list = resolveComponent("lookup-list");

  return openBlock(), createBlock("div", _hoisted_1$p, [_ctx.showTitle ? (openBlock(), createBlock(_component_fm_cell, {
    key: 0,
    title: _ctx.rootProps.title
  }, null, 8
  /* PROPS */
  , ["title"])) : createCommentVNode("v-if", true), createVNode("div", {
    "class": "list-wrapper",
    style: {
      top: _ctx.showTitle ? '44px' : 0
    }
  }, [createVNode(_component_lookup_list, {
    dataList: _ctx.dataList,
    finished: _ctx.finished,
    loading: _ctx.innerLoading,
    "onUpdate:loading": _ctx.onUpdateLoading,
    onCellClick: _ctx.onCellClick,
    onLoad: _cache[1] || (_cache[1] = function ($event) {
      return _ctx.$emit('load');
    })
  }, {
    "default": withCtx(function (slotProps) {
      return [createVNode(_component_fm_cell, {
        title: _ctx.getValue(_ctx.rootProps.textField, slotProps['item']),
        label: _ctx.getValue(_ctx.rootProps.fullPath, slotProps['item'])
      }, null, 8
      /* PROPS */
      , ["title", "label"])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["dataList", "finished", "loading", "onUpdate:loading", "onCellClick"])], 4
  /* STYLE */
  )]);
}

script$C.render = render$B;
script$C.__file = "packages/lookup-panel/src/components/search-panel.vue";

var script$D = defineComponent({
  name: 'lookup-breadcrumb',
  props: {
    items: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var bem = useBem('fm-lookup');

    var onClick = function onClick(event) {
      if (isLast(event.value)) {
        return;
      }

      emit('item-click', event);
    };

    var isLast = function isLast(value) {
      return props.items[props.items.length - 1].value === value;
    };

    return {
      bem: bem,
      onClick: onClick,
      isLast: isLast
    };
  }
});

function render$C(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return openBlock(), createBlock("div", {
    "class": _ctx.bem('breadcrumb')
  }, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.items, function (item) {
    return openBlock(), createBlock("div", {
      "class": _ctx.bem('breadcrumb-item'),
      key: item.value,
      onClick: function onClick($event) {
        return _ctx.onClick(item);
      }
    }, [createVNode("span", {
      "class": _ctx.bem('breadcrumb-item-text')
    }, toDisplayString(item.text), 3
    /* TEXT, CLASS */
    ), !_ctx.isLast(item.value) ? (openBlock(), createBlock(_component_fm_icon, {
      key: 0,
      name: "s-arrow",
      "class": _ctx.bem('breadcrumb-item-icon')
    }, null, 8
    /* PROPS */
    , ["class"])) : createCommentVNode("v-if", true)], 10
    /* CLASS, PROPS */
    , ["onClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))], 2
  /* CLASS */
  );
}

script$D.render = render$C;
script$D.__file = "packages/lookup-panel/src/components/breadcrumb.vue";

var _components$t;
var script$E = defineComponent({
  name: 'lookup-personal-panel',
  components: (_components$t = {}, _components$t[script$y.name] = script$y, _components$t),
  props: {
    currentPage: {
      type: String,
      "default": ''
    }
  },
  setup: function setup(props) {
    var _useRootProps = useRootProps('lookup-panel'),
        rootProps = _useRootProps.rootProps;

    var _usePresonal = usePresonal(),
        recentData = _usePresonal.recentData,
        favoriteData = _usePresonal.favoriteData,
        setFavoriteData = _usePresonal.setFavoriteData,
        isFavorited = _usePresonal.isFavorited; // const dataList:Ref<any[]> = ref([])
    // watch(()=>props.currentPage, ()=>{
    //   dataList.value = props.currentPage === 'recent' ? recentData.value : favoriteData.value
    // })


    var dataList = computed(function () {
      return props.currentPage === 'recent' ? recentData.value : favoriteData.value;
    });

    var onIconClick = function onIconClick(item) {
      setFavoriteData(item);
    };

    return {
      getValue: getValue,
      dataList: dataList,
      rootProps: rootProps,
      isFavorited: isFavorited,
      onIconClick: onIconClick
    };
  }
});

var _hoisted_1$q = {
  "class": "list-wrapper"
};
function render$D(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_lookup_list = resolveComponent("lookup-list");

  return openBlock(), createBlock("div", _hoisted_1$q, [createVNode(_component_lookup_list, {
    dataList: _ctx.dataList,
    onCellClick: _cache[1] || (_cache[1] = function (item) {
      return _ctx.$emit('cell-click', item);
    })
  }, {
    "default": withCtx(function (slotProps) {
      return [createVNode(_component_fm_cell, {
        "class": "list-item-cell",
        title: _ctx.getValue(_ctx.rootProps.textField, slotProps['item']),
        label: _ctx.getValue(_ctx.rootProps.fullPath, slotProps['item'])
      }, createSlots({
        _: 2
        /* DYNAMIC */

      }, [_ctx.rootProps.useFavorite ? {
        name: "right-icon",
        fn: withCtx(function () {
          return [createVNode("div", {
            onClick: withModifiers(function ($event) {
              return _ctx.onIconClick(slotProps['item']);
            }, ["stop"])
          }, [createVNode(_component_fm_icon, {
            style: {
              "color": "#FBB902"
            },
            name: _ctx.isFavorited(slotProps['item']) ? 's-star' : 's-star-o'
          }, null, 8
          /* PROPS */
          , ["name"])], 8
          /* PROPS */
          , ["onClick"])];
        })
      } : undefined]), 1032
      /* PROPS, DYNAMIC_SLOTS */
      , ["title", "label"])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["dataList"])]);
}

script$E.render = render$D;
script$E.__file = "packages/lookup-panel/src/components/personal-panel.vue";

var script$F = defineComponent({
  name: 'lookup-tabbar',
  components: {},
  props: {
    modelValue: {
      type: String,
      "default": ''
    },
    items: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    currentPage: {
      type: String,
      "default": ''
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onItemClick = function onItemClick(id) {
      emit('update:currentPage', id);
    };

    return {
      onItemClick: onItemClick
    };
  }
});

var _hoisted_1$r = {
  "class": "lookup-tabbar"
};
function render$E(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$r, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.items, function (item) {
    return openBlock(), createBlock("span", {
      "class": ["tabbar-item", {
        selected: _ctx.currentPage === item.id
      }],
      onClick: function onClick($event) {
        return _ctx.onItemClick(item.id);
      }
    }, toDisplayString(item.text), 11
    /* TEXT, CLASS, PROPS */
    , ["onClick"]);
  }), 256
  /* UNKEYED_FRAGMENT */
  )), createCommentVNode(" <span class=\"nav-title selected\"></span> ")]);
}

script$F.render = render$E;
script$F.__file = "packages/lookup-panel/src/components/tabbar.vue";

var lookupListProps = {
  type: {
    type: String,
    "default": 'LIST'
  },
  idField: {
    type: String,
    "default": '',
    required: true
  },
  valueField: {
    type: String,
    "default": ''
  },
  textField: {
    type: String,
    "default": '',
    required: true
  },
  navTextField: {
    type: String,
    "default": ''
  },
  fullPath: {
    type: String,
    "default": ''
  },
  avatarField: {
    type: String,
    "default": ''
  },
  avatarPrefix: {
    type: String,
    "default": '/api/runtime/sys/v1.0/userinfos/setting/img/users/'
  },
  avatarSuffix: {
    type: String,
    "default": '/96/96/36'
  },
  multiSelect: {
    type: Boolean,
    "default": false
  },
  onlySelectLeaf: {
    type: Boolean,
    "default": false
  },
  useFavorite: {
    type: Boolean,
    "default": false
  },
  useAvatar: {
    type: Boolean,
    "default": false
  },
  customLeaf: Function,
  customSelectable: Function
};
var LookupProps = Object.assign(Object.assign({}, lookupListProps), {
  title: {
    type: String,
    "default": ''
  },
  navTitle: {
    type: String,
    "default": ''
  },
  url: {
    type: String,
    "default": ''
  },
  selectedValues: {
    type: String,
    "default": ''
  },
  selectedTexts: {
    type: String,
    "default": ''
  },
  searchWhen: {
    type: String,
    "default": 'all'
  },
  loadTreeDataType: {
    type: String,
    "default": 'default'
  },
  enableFullTree: {
    type: Boolean,
    "default": true
  },
  pageSize: {
    type: Number,
    "default": 20
  },
  collapseLimit: {
    type: Number,
    "default": 3
  },
  selectedLimit: {
    type: Number,
    "default": -1
  },
  useSearch: {
    type: Boolean,
    "default": true
  },
  usePullDownLoad: {
    type: Boolean,
    "default": true
  },
  useServerTemplate: Boolean,
  usePersonal: Boolean,
  beforeGetData: Function,
  afterConfirm: Function,
  personalConfig: Object,
  mapFields: {
    type: Object,
    "default": function _default() {
      return {};
    }
  },
  data: {
    type: [Array, Object],
    "default": function _default() {
      return [];
    }
  }
});

var _components$u;
var script$G = defineComponent({
  name: 'fm-lookup-panel',
  components: (_components$u = {}, _components$u[script$a.name] = script$a, _components$u[script.name] = script, _components$u[script$1.name] = script$1, _components$u[script$x.name] = script$x, _components$u[script$y.name] = script$y, _components$u[script$z.name] = script$z, _components$u[script$B.name] = script$B, _components$u[script$C.name] = script$C, _components$u[script$E.name] = script$E, _components$u[script$D.name] = script$D, _components$u[script$F.name] = script$F, _components$u[dynamicTemplate.name] = dynamicTemplate, _components$u),
  props: LookupProps,
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    useRootProps('lookup-panel', props);

    var _useSelect = useSelect(props),
        innerSelected = _useSelect.selected,
        mapping = _useSelect.mapping,
        toggleSelecte = _useSelect.toggleSelecte,
        toggleSelecteAll = _useSelect.toggleSelecteAll,
        isSelectedAll = _useSelect.isSelectedAll,
        clearSelected = _useSelect.clearSelected;

    var _usePresonal = usePresonal(props),
        currentPage = _usePresonal.currentPage,
        initPersonal = _usePresonal.initPersonal,
        setRecentData = _usePresonal.setRecentData;

    var _useLoadData = useLoadData(props),
        serverTemplate = _useLoadData.serverTemplate,
        dataList = _useLoadData.dataList,
        parentData = _useLoadData.parentData,
        searchDataList = _useLoadData.searchDataList,
        loadState = _useLoadData.loadState,
        onSearch = _useLoadData.onSearch,
        onPullLoad = _useLoadData.onPullLoad,
        initLoad = _useLoadData.initLoad,
        resetData = _useLoadData.resetData,
        loadTreeData = _useLoadData.loadTreeData;

    watch(function () {
      return serverTemplate.value;
    }, function (template) {
      return template && useDynamicTemplate(template);
    });
    var lastParentData = computed(function () {
      return loadState.displayType !== DisplayType.NAVTREELIST ? parentData.value && parentData.value[parentData.value.length - 1] : null;
    });
    var subTitle = computed(function () {
      return lastParentData ? lastParentData[props.textField] : '';
    });
    var selectedPanelShow = ref(false);

    var init = function init() {
      props.usePersonal && initPersonal();
      initLoad();
    };

    var getTreeData = function getTreeData(item) {
      loadState.loadDataFrom = 'init';
      loadState.currentItem = item;
      loadTreeData(item);
    }; // const setSelected = (item: Record<string, any>) => {
    //   return new Promise<Selected>((resolve) => {
    //     console.log('setSelected');
    //     if (item.__isNav) {
    //       getNvaTreeData(item, false).then(({ dataList }) => {
    //         console.log(dataList)
    //         toggleSelecteAll(dataList)
    //         resolve(innerSelected.value)
    //       })
    //     } else {
    //       toggleSelecte(item)
    //       resolve(innerSelected.value)
    //     }
    //   })
    // }


    var onSelect = function onSelect(item) {
      // setSelected(item).then((selected) => {
      // })
      toggleSelecte(item);
      emit('selectChange', innerSelected.value);

      if (!props.multiSelect) {
        onConfirm(innerSelected.value);
      }
    };

    var onConfirm = function onConfirm(selected) {
      var _ref2 = selected ? selected : innerSelected.value,
          value = _ref2.value,
          text = _ref2.text,
          items = _ref2.items;

      mapping(items);
      emit('update:selectedValues', value);
      emit('update:modelValue', text);
      emit('valueChange', {
        value: value,
        text: text,
        items: items
      });
      emit('confirm', text);
      onBack();
      props.usePersonal && setRecentData(items);
    };

    var breadcrumbItems = computed(function () {
      var items = parentData.value.map(function (item) {
        return {
          text: getValue(props.navTextField, item),
          value: getValue(props.idField, item),
          item: item
        };
      });
      return [{
        text: props.navTitle,
        value: '',
        item: {}
      }].concat(items);
    });
    var breadcrumbShow = computed(function () {
      return loadState.displayType === 'NAVTREELIST';
    });

    var onBreadcrumbClick = function onBreadcrumbClick(_ref3) {
      var item = _ref3.item;
      // const id = item.value
      loadState.loadDataFrom = 'init';
      loadState.currentItem = item;
      loadTreeData(item);
    };

    var onHeaderLeftClick = function onHeaderLeftClick() {
      if (lastParentData.value) {
        var __parent = parentData.value[parentData.value.length - 2];
        loadTreeData(__parent);
      } else {
        onBack();
      }
    };

    var tabsData = computed(function () {
      var tmp = [];

      if (props.usePersonal && loadState.displayType === DisplayType.NAVTREELIST) {
        tmp.push({
          text: '',
          id: 'recent'
        });
      } else if (props.type !== DisplayType.NAVTREELIST) {
        tmp.push({
          text: props.title,
          id: 'list'
        });
      }

      if (props.usePersonal && props.useFavorite) {
        tmp.push({
          text: '',
          id: 'fav'
        });
      }

      return tmp;
    });
    var tabbarShow = computed(function () {
      // return true
      return props.usePersonal ? loadState.displayType === DisplayType.NAVTREELIST ? loadState.isShowHome : props.useFavorite : false;
    });

    var onPortalClick = function onPortalClick() {
      loadState.isShowHome = false;
      currentPage.value = 'list';
    };

    var searchListShow = ref(false);
    var headerRef = ref();
    var searchValue = ref('');

    var onSearchCellClick = function onSearchCellClick(item) {
      var _headerRef$value;

      // searchValue.value = ''
      // onSearch('')
      onSelect(item);
      (_headerRef$value = headerRef.value) == null ? void 0 : _headerRef$value.focus();
    };

    var onFooterLeftClick = function onFooterLeftClick() {
      if (currentPanel.value === 'selected') {
        selectedPanelShow.value = false;
        clearSelected();
      }
    };

    var onFooterRightClick = function onFooterRightClick() {
      // if (currentPanel.value === 'search') {
      //   searchListShow.value = false
      //   searchValue.value = ''
      //   onSearch('')
      //   // clearHistorySelected()
      // } else {
      // }
      onConfirm();
    };

    var currentPanel = computed(function () {
      if (selectedPanelShow.value) {
        return 'selected';
      } else if (searchListShow.value) {
        return 'search';
      } else if (loadState.isShowHome) {
        return 'home';
      }

      return 'list';
    });
    var footerProps = computed(function () {
      var _innerSelected$value, _innerSelected$value$;

      var rightText = "\u786E\u8BA4(" + ((_innerSelected$value = innerSelected.value) != null && (_innerSelected$value$ = _innerSelected$value.items) != null && _innerSelected$value$.length ? innerSelected.value.items.length : 0) + ")";
      var leftText = '';
      var leftClick = onFooterLeftClick;
      var rightClick = onFooterRightClick;
      var showChecker = false;

      if (currentPanel.value === 'selected') {
        leftText = '';
      } else if (currentPanel.value === 'list') {
        showChecker = loadState.displayType === DisplayType.NAVTREELIST;
        leftText = showChecker ? checkAll.value ? '' : '' : '';
      }

      return {
        leftText: leftText,
        rightText: rightText,
        leftClick: leftClick,
        rightClick: rightClick,
        showChecker: showChecker
      };
    });

    var _checkAll = ref(false);

    var checkAll = computed({
      get: function get() {
        var listData = dataList.value.filter(function (item) {
          return !item.__isNav;
        });
        _checkAll.value = listData.length > 0 ? isSelectedAll(listData) : false;
        return _checkAll.value;
      },
      set: function set(value) {
        var listData = dataList.value.filter(function (item) {
          return !item.__isNav;
        });
        toggleSelecteAll(listData);
        _checkAll.value = value;
      }
    });

    var onBack = function onBack() {
      setTimeout(function () {
        searchValue.value = '';
        searchListShow.value = false;
        selectedPanelShow.value = false;
        resetData();
      }, 300);
      emit('back');
      loadState.finished = true;
    };

    return {
      serverTemplate: serverTemplate,
      dataList: dataList,
      parentData: parentData,
      lastParentData: lastParentData,
      searchDataList: searchDataList,
      subTitle: subTitle,
      breadcrumbItems: breadcrumbItems,
      innerSelected: innerSelected,
      searchValue: searchValue,
      loadState: loadState,
      selectedPanelShow: selectedPanelShow,
      searchListShow: searchListShow,
      breadcrumbShow: breadcrumbShow,
      tabbarShow: tabbarShow,
      headerRef: headerRef,
      footerProps: footerProps,
      checkAll: checkAll,
      tabsData: tabsData,
      currentPage: currentPage,
      onPortalClick: onPortalClick,
      onPullLoad: onPullLoad,
      init: init,
      onSelect: onSelect,
      onSearch: onSearch,
      onSearchCellClick: onSearchCellClick,
      onBack: onBack,
      toUpperCase: toUpperCase,
      getValue: getValue,
      getTreeData: getTreeData,
      onHeaderLeftClick: onHeaderLeftClick,
      onBreadcrumbClick: onBreadcrumbClick
    };
  }
});

var _hoisted_1$s = {
  "class": "fm-lookup-panel"
};
var _hoisted_2$l = {
  "class": "fm-lookup-panel-content"
};
var _hoisted_3$e = {
  "class": "content-tabs"
};
var _hoisted_4$c = {
  "class": "content-tab-data"
};
var _hoisted_5$8 = {
  key: 0,
  "class": "breadcrumb-wrapper"
};
var _hoisted_6$7 = {
  "class": "content-tab-personal"
};
function render$F(_ctx, _cache, $props, $setup, $data, $options) {
  var _this = this;

  var _component_lookup_header = resolveComponent("lookup-header");

  var _component_lookup_tabbar = resolveComponent("lookup-tabbar");

  var _component_lookup_breadcrumb = resolveComponent("lookup-breadcrumb");

  var _component_dynamic_template = resolveComponent("dynamic-template");

  var _component_lookup_list = resolveComponent("lookup-list");

  var _component_lookup_personal_panel = resolveComponent("lookup-personal-panel");

  var _component_lookup_search_panel = resolveComponent("lookup-search-panel");

  var _component_fm_checker = resolveComponent("fm-checker");

  var _component_lookup_footer = resolveComponent("lookup-footer");

  var _component_lookup_selected_panel = resolveComponent("lookup-selected-panel");

  return openBlock(), createBlock("div", _hoisted_1$s, [createVNode(_component_lookup_header, {
    ref: "headerRef",
    searchValue: _ctx.searchValue,
    "onUpdate:searchValue": _cache[1] || (_cache[1] = function ($event) {
      return _ctx.searchValue = $event;
    }),
    searchFocused: _ctx.searchListShow,
    "onUpdate:searchFocused": _cache[2] || (_cache[2] = function ($event) {
      return _ctx.searchListShow = $event;
    }),
    subTitle: _ctx.lastParentData ? _ctx.lastParentData[_ctx.textField] : '',
    isHome: _ctx.loadState.isShowHome,
    onSeclectedClick: _cache[3] || (_cache[3] = function ($event) {
      return _ctx.selectedPanelShow = true;
    }),
    onSearch: _ctx.onSearch,
    onBack: _ctx.onHeaderLeftClick,
    onPortalClick: _ctx.onPortalClick
  }, null, 8
  /* PROPS */
  , ["searchValue", "searchFocused", "subTitle", "isHome", "onSearch", "onBack", "onPortalClick"]), createVNode("div", _hoisted_2$l, [withDirectives(createVNode("div", _hoisted_3$e, [_ctx.tabbarShow ? (openBlock(), createBlock(_component_lookup_tabbar, {
    key: 0,
    items: _ctx.tabsData,
    currentPage: _ctx.currentPage,
    "onUpdate:currentPage": _cache[4] || (_cache[4] = function ($event) {
      return _ctx.currentPage = $event;
    })
  }, null, 8
  /* PROPS */
  , ["items", "currentPage"])) : createCommentVNode("v-if", true), withDirectives(createVNode("div", _hoisted_4$c, [_ctx.breadcrumbShow ? (openBlock(), createBlock("div", _hoisted_5$8, [createVNode(_component_lookup_breadcrumb, {
    items: _ctx.breadcrumbItems,
    onItemClick: _ctx.onBreadcrumbClick
  }, null, 8
  /* PROPS */
  , ["items", "onItemClick"])])) : createCommentVNode("v-if", true), createVNode("div", {
    "class": "list-wrapper",
    style: "top: " + (_ctx.breadcrumbShow ? '42px' : 0)
  }, [createVNode(_component_lookup_list, {
    loading: _ctx.loadState.loading,
    "onUpdate:loading": _cache[5] || (_cache[5] = function ($event) {
      return _ctx.loadState.loading = $event;
    }),
    dataList: _ctx.dataList,
    parentData: _ctx.lastParentData,
    finished: _ctx.loadState.finished,
    onCellClick: _ctx.onSelect,
    onIconClick: _ctx.getTreeData,
    onLoad: _ctx.onPullLoad
  }, {
    "default": withCtx(function (slotProps) {
      return [renderSlot(_ctx.$slots, "cell", {
        listData: _ctx.dataList,
        item: slotProps.item,
        idField: _ctx.idField,
        textField: _ctx.textField
      }, function () {
        return [_ctx.serverTemplate ? (openBlock(), createBlock(_component_dynamic_template, {
          key: 0,
          props: {
            item: slotProps.item,
            instance: _this
          }
        }, null, 8
        /* PROPS */
        , ["props"])) : createCommentVNode("v-if", true)];
      })];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["loading", "dataList", "parentData", "finished", "onCellClick", "onIconClick", "onLoad"])], 4
  /* STYLE */
  )], 512
  /* NEED_PATCH */
  ), [[vShow, !_ctx.loadState.isShowHome && _ctx.currentPage === 'list']]), withDirectives(createVNode("div", _hoisted_6$7, [createVNode(_component_lookup_personal_panel, {
    currentPage: _ctx.currentPage,
    onCellClick: _ctx.onSelect
  }, null, 8
  /* PROPS */
  , ["currentPage", "onCellClick"])], 512
  /* NEED_PATCH */
  ), [[vShow, _ctx.loadState.isShowHome || _ctx.currentPage !== 'list']])], 512
  /* NEED_PATCH */
  ), [[vShow, !_ctx.searchListShow]]), withDirectives(createVNode(_component_lookup_search_panel, {
    loading: _ctx.loadState.searchLoading,
    dataList: _ctx.searchDataList,
    finished: _ctx.loadState.searchFinished,
    onCellClick: _ctx.onSearchCellClick,
    onLoad: _cache[6] || (_cache[6] = function ($event) {
      return _ctx.onSearch(_ctx.loadState.searchValue, true);
    })
  }, null, 8
  /* PROPS */
  , ["loading", "dataList", "finished", "onCellClick"]), [[vShow, _ctx.searchListShow]])]), _ctx.multiSelect ? (openBlock(), createBlock(_component_lookup_footer, {
    key: 0,
    leftText: _ctx.footerProps.leftText,
    rightText: _ctx.footerProps.rightText,
    onLeftClick: _ctx.footerProps.leftClick,
    onRightClick: _ctx.footerProps.rightClick
  }, createSlots({
    _: 2
    /* DYNAMIC */

  }, [_ctx.footerProps.showChecker ? {
    name: "left",
    fn: withCtx(function () {
      return [createVNode(_component_fm_checker, {
        label: _ctx.footerProps.leftText,
        disabled: _ctx.innerSelected.limited && !_ctx.checkAll,
        checked: _ctx.checkAll,
        "onUpdate:checked": _cache[7] || (_cache[7] = function ($event) {
          return _ctx.checkAll = $event;
        })
      }, null, 8
      /* PROPS */
      , ["label", "disabled", "checked"])];
    })
  } : undefined]), 1032
  /* PROPS, DYNAMIC_SLOTS */
  , ["leftText", "rightText", "onLeftClick", "onRightClick"])) : createCommentVNode("v-if", true), createVNode(_component_lookup_selected_panel, {
    show: _ctx.selectedPanelShow,
    "onUpdate:show": _cache[8] || (_cache[8] = function ($event) {
      return _ctx.selectedPanelShow = $event;
    }),
    dataList: _ctx.innerSelected.items
  }, null, 8
  /* PROPS */
  , ["show", "dataList"])]);
}

script$G.render = render$F;
script$G.__file = "packages/lookup-panel/src/lookup-panel.vue";

script$G.install = function (app) {
  app.component(script$G.name, script$G);
};

var _components$v;
var script$H = defineComponent({
  name: 'fm-lookup-input',
  components: (_components$v = {}, _components$v[Popup.name] = Popup, _components$v[Input.name] = Input, _components$v[script$G.name] = script$G, _components$v),
  props: _extends({}, LookupProps, {
    modelValue: String,
    name: String,
    label: String,
    placeholder: {
      type: String,
      "default": ''
    },
    required: {
      type: Boolean,
      "default": false
    },
    clearable: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    errorMessage: String,
    errorMessageAlign: String,
    position: {
      type: String,
      "default": 'right'
    },
    panelClass: String,
    inputAlign: {
      type: String,
      "default": 'right'
    },
    teleport: {
      type: String,
      "default": ''
    },
    zIndex: [Number, String]
  }),
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var displayText = ref(props.modelValue);
    watch(function () {
      return props.modelValue;
    }, function (value, oldValue) {
      if (value !== oldValue) {
        displayText.value = value;
      }
    });
    var displayTexts = computed(function () {
      return displayText.value ? String(displayText.value).split(',') : [];
    });
    var displayValue = computed(function () {
      return props.selectedValues;
    });
    var selecteds = ref({});
    var lookupPanelRef = ref();
    var enableShow = ref(false);
    watch(enableShow, function (value) {
      value && lookupPanelRef.value && lookupPanelRef.value.init();
    });

    var _useBack = useBack(enableShow),
        pushOrPop = _useBack.pushOrPop;

    var onToggle = function onToggle() {
      if (props.readonly) {
        return;
      }

      enableShow.value = !enableShow.value;
      pushOrPop();
    };

    var onConfirm = function onConfirm(value) {
      displayText.value = value;
      emit('confirm', value);
      emit('update:modelValue', value);
    };

    var onSelectChange = function onSelectChange(value) {
      emit('selectChange', value);
    };

    var onValueChange = function onValueChange(value) {
      selecteds.value = value;
      emit('valueChange', value);
    };

    var onBack = function onBack() {
      onToggle();
      emit('back');
    };

    return {
      enableShow: enableShow,
      displayText: displayText,
      displayValue: displayValue,
      selecteds: selecteds,
      displayTexts: displayTexts,
      lookupPanelRef: lookupPanelRef,
      onToggle: onToggle,
      onConfirm: onConfirm,
      onSelectChange: onSelectChange,
      onValueChange: onValueChange,
      onBack: onBack,
      pushOrPop: pushOrPop
    };
  }
});

var _hoisted_1$t = {
  "class": "fm-lookup-input"
};
function render$G(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_input = resolveComponent("fm-input");

  var _component_fm_lookup_panel = resolveComponent("fm-lookup-panel");

  var _component_fm_popup = resolveComponent("fm-popup");

  return openBlock(), createBlock("div", _hoisted_1$t, [renderSlot(_ctx.$slots, "template", {
    displayText: _ctx.displayText,
    click: _ctx.onToggle
  }, function () {
    return [createVNode(_component_fm_input, {
      modelValue: _ctx.displayText,
      "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
        return _ctx.displayText = $event;
      }),
      editable: false,
      clickable: !_ctx.readonly,
      required: _ctx.required,
      readonly: _ctx.readonly,
      isLink: !_ctx.readonly,
      name: _ctx.name,
      label: _ctx.label,
      placeholder: _ctx.placeholder,
      clearable: _ctx.clearable,
      "input-align": _ctx.inputAlign,
      "error-message-align": _ctx.errorMessageAlign,
      "error-message": _ctx.errorMessage,
      onClick: _ctx.onToggle
    }, createSlots({
      _: 2
      /* DYNAMIC */

    }, [_ctx.$slots['left-icon'] ? {
      name: "left-icon",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "left-icon")];
      })
    } : undefined, _ctx.$slots['right-icon'] && !_ctx.readonly ? {
      name: "right-icon",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "right-icon")];
      })
    } : undefined, _ctx.$slots.extra ? {
      name: "extra",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "extra")];
      })
    } : undefined, _ctx.$slots.input ? {
      name: "input",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "input", {
          selecteds: _ctx.selecteds,
          displayTexts: _ctx.displayTexts
        })];
      })
    } : undefined]), 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["modelValue", "clickable", "required", "readonly", "isLink", "name", "label", "placeholder", "clearable", "input-align", "error-message-align", "error-message", "onClick"])];
  }), createVNode(_component_fm_popup, {
    show: _ctx.enableShow,
    "onUpdate:show": [_cache[2] || (_cache[2] = function ($event) {
      return _ctx.enableShow = $event;
    }), _ctx.pushOrPop],
    position: _ctx.position,
    "class": ["fm-lookup-popup-box", _ctx.panelClass],
    zIndex: _ctx.zIndex,
    teleport: _ctx.teleport
  }, {
    "default": withCtx(function () {
      return [createVNode(_component_fm_lookup_panel, {
        ref: "lookupPanelRef",
        type: _ctx.type,
        title: _ctx.title,
        navTitle: _ctx.navTitle,
        idField: _ctx.idField,
        valueField: _ctx.valueField,
        textField: _ctx.textField,
        navTextField: _ctx.navTextField,
        mapFields: _ctx.mapFields,
        data: _ctx.data,
        multiSelect: _ctx.multiSelect,
        useSearch: _ctx.useSearch,
        url: _ctx.url,
        beforeGetData: _ctx.beforeGetData,
        selectedValues: _ctx.displayValue,
        selectedTexts: _ctx.displayText,
        onlySelectLeaf: _ctx.onlySelectLeaf,
        usePullDownLoad: _ctx.usePullDownLoad,
        useServerTemplate: _ctx.useServerTemplate,
        loadTreeDataType: _ctx.loadTreeDataType,
        enableFullTree: _ctx.enableFullTree,
        pageSize: _ctx.pageSize,
        collapseLimit: _ctx.collapseLimit,
        customLeaf: _ctx.customLeaf,
        fullPath: _ctx.fullPath,
        avatarField: _ctx.avatarField,
        avatarPrefix: _ctx.avatarPrefix,
        avatarSuffix: _ctx.avatarSuffix,
        usePersonal: _ctx.usePersonal,
        useFavorite: _ctx.useFavorite,
        personalConfig: _ctx.personalConfig,
        selectedLimit: _ctx.selectedLimit,
        customSelectable: _ctx.customSelectable,
        onConfirm: _ctx.onConfirm,
        onBack: _ctx.onBack,
        onSelectChange: _ctx.onSelectChange,
        onValueChange: _ctx.onValueChange
      }, {
        cell: withCtx(function (slotProps) {
          return [renderSlot(_ctx.$slots, "cell", {
            slotProps: slotProps,
            listData: slotProps.listData,
            item: slotProps.item,
            idField: slotProps.idField,
            textField: slotProps.textField
          })];
        }),
        _: 1
        /* STABLE */

      }, 8
      /* PROPS */
      , ["type", "title", "navTitle", "idField", "valueField", "textField", "navTextField", "mapFields", "data", "multiSelect", "useSearch", "url", "beforeGetData", "selectedValues", "selectedTexts", "onlySelectLeaf", "usePullDownLoad", "useServerTemplate", "loadTreeDataType", "enableFullTree", "pageSize", "collapseLimit", "customLeaf", "fullPath", "avatarField", "avatarPrefix", "avatarSuffix", "usePersonal", "useFavorite", "personalConfig", "selectedLimit", "customSelectable", "onConfirm", "onBack", "onSelectChange", "onValueChange"])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["show", "position", "class", "zIndex", "teleport", "onUpdate:show"])]);
}

script$H.render = render$G;
script$H.__file = "packages/lookup/src/lookup-input.vue";

var _components$w;
var script$I = defineComponent({
  name: 'fm-lookup-employee',
  components: (_components$w = {}, _components$w[Popup.name] = Popup, _components$w[Input.name] = Input, _components$w[script$G.name] = script$G, _components$w),
  props: _extends({}, LookupProps, {
    modelValue: String,
    name: String,
    label: String,
    placeholder: {
      type: String,
      "default": ''
    },
    required: {
      type: Boolean,
      "default": false
    },
    clearable: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    errorMessage: String,
    errorMessageAlign: String,
    position: {
      type: String,
      "default": 'right'
    },
    panelClass: String,
    inputAlign: {
      type: String,
      "default": 'right'
    },
    teleport: {
      type: String,
      "default": ''
    },
    zIndex: [Number, String]
  }),
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var displayText = ref(props.modelValue);
    watch(function () {
      return props.modelValue;
    }, function (value, oldValue) {
      if (value !== oldValue) {
        displayText.value = value;
      }
    });
    var displayTexts = computed(function () {
      return displayText.value ? String(displayText.value).split(',') : [];
    });
    var displayValue = computed(function () {
      return props.selectedValues;
    });
    var selecteds = ref({});
    var lookupPanelRef = ref();
    var enableShow = ref(false);
    watch(enableShow, function (value) {
      value && lookupPanelRef.value && lookupPanelRef.value.init();
    });

    var onToggle = function onToggle() {
      if (props.readonly) {
        return;
      }

      enableShow.value = !enableShow.value;
    };

    var onConfirm = function onConfirm(value) {
      displayText.value = value;
      enableShow.value = false;
      emit('confirm', value);
      emit('update:modelValue', value);
    };

    var onSelectChange = function onSelectChange(value) {
      emit('selectChange', value);
    };

    var onValueChange = function onValueChange(value) {
      selecteds.value = value;
      emit('valueChange', value);
    };

    var onBack = function onBack() {
      enableShow.value = false;
      emit('back');
    };

    return {
      enableShow: enableShow,
      displayText: displayText,
      displayValue: displayValue,
      selecteds: selecteds,
      displayTexts: displayTexts,
      lookupPanelRef: lookupPanelRef,
      onToggle: onToggle,
      onConfirm: onConfirm,
      onSelectChange: onSelectChange,
      onValueChange: onValueChange,
      onBack: onBack
    };
  }
});

var _hoisted_1$u = {
  "class": "fm-lookup-input"
};
function render$H(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_input = resolveComponent("fm-input");

  var _component_fm_lookup_panel = resolveComponent("fm-lookup-panel");

  var _component_fm_popup = resolveComponent("fm-popup");

  return openBlock(), createBlock("div", _hoisted_1$u, [renderSlot(_ctx.$slots, "template", {
    displayText: _ctx.displayText,
    click: _ctx.onToggle
  }, function () {
    return [createVNode(_component_fm_input, {
      modelValue: _ctx.displayText,
      "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
        return _ctx.displayText = $event;
      }),
      editable: false,
      clickable: !_ctx.readonly,
      required: _ctx.required,
      readonly: _ctx.readonly,
      isLink: !_ctx.readonly,
      name: _ctx.name,
      label: _ctx.label,
      placeholder: _ctx.placeholder,
      clearable: _ctx.clearable,
      "input-align": _ctx.inputAlign,
      "error-message-align": _ctx.errorMessageAlign,
      "error-message": _ctx.errorMessage,
      onClick: _ctx.onToggle
    }, createSlots({
      _: 2
      /* DYNAMIC */

    }, [_ctx.$slots['left-icon'] ? {
      name: "left-icon",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "left-icon")];
      })
    } : undefined, _ctx.$slots['right-icon'] && !_ctx.readonly ? {
      name: "right-icon",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "right-icon")];
      })
    } : undefined, _ctx.$slots.extra ? {
      name: "extra",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "extra")];
      })
    } : undefined, _ctx.$slots.input ? {
      name: "input",
      fn: withCtx(function () {
        return [renderSlot(_ctx.$slots, "input", {
          selecteds: _ctx.selecteds,
          displayTexts: _ctx.displayTexts
        })];
      })
    } : undefined]), 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["modelValue", "clickable", "required", "readonly", "isLink", "name", "label", "placeholder", "clearable", "input-align", "error-message-align", "error-message", "onClick"])];
  }), createVNode(_component_fm_popup, {
    show: _ctx.enableShow,
    "onUpdate:show": _cache[2] || (_cache[2] = function ($event) {
      return _ctx.enableShow = $event;
    }),
    position: _ctx.position,
    "class": ["fm-lookup-popup-box", _ctx.panelClass],
    zIndex: _ctx.zIndex,
    teleport: _ctx.teleport
  }, {
    "default": withCtx(function () {
      return [createVNode(_component_fm_lookup_panel, {
        ref: "lookupPanelRef",
        type: _ctx.type,
        title: _ctx.title,
        navTitle: _ctx.navTitle,
        idField: _ctx.idField,
        valueField: _ctx.valueField,
        textField: _ctx.textField,
        navTextField: _ctx.navTextField,
        mapFields: _ctx.mapFields,
        data: _ctx.data,
        multiSelect: _ctx.multiSelect,
        showSearch: _ctx.showSearch,
        showFavorite: _ctx.showFavorite,
        url: _ctx.url,
        beforeGetData: _ctx.beforeGetData,
        selectedValues: _ctx.displayValue,
        selectedTexts: _ctx.displayText,
        onlySelectLeaf: _ctx.onlySelectLeaf,
        enablePullDownLoad: _ctx.enablePullDownLoad,
        useServerTemplate: _ctx.useServerTemplate,
        loadTreeDataType: _ctx.loadTreeDataType,
        pageSize: _ctx.pageSize,
        collapseLimit: _ctx.collapseLimit,
        customLeaf: _ctx.customLeaf,
        fullPath: _ctx.fullPath,
        onConfirm: _ctx.onConfirm,
        onBack: _ctx.onBack,
        onSelectChange: _ctx.onSelectChange,
        onValueChange: _ctx.onValueChange
      }, {
        cell: withCtx(function (slotProps) {
          return [renderSlot(_ctx.$slots, "cell", {
            slotProps: slotProps,
            listData: slotProps.listData,
            item: slotProps.item,
            idField: slotProps.idField,
            textField: slotProps.textField
          })];
        }),
        _: 1
        /* STABLE */

      }, 8
      /* PROPS */
      , ["type", "title", "navTitle", "idField", "valueField", "textField", "navTextField", "mapFields", "data", "multiSelect", "showSearch", "showFavorite", "url", "beforeGetData", "selectedValues", "selectedTexts", "onlySelectLeaf", "enablePullDownLoad", "useServerTemplate", "loadTreeDataType", "pageSize", "collapseLimit", "customLeaf", "fullPath", "onConfirm", "onBack", "onSelectChange", "onValueChange"])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["show", "position", "class", "zIndex", "teleport"])]);
}

script$I.render = render$H;
script$I.__file = "packages/lookup/src/lookup-employee.vue";

script$H.install = function (app) {
  app.component(script$H.name, script$H);
};

script$I.install = function (app) {
  app.component(script$I.name, script$I);
};
var LookupInput = {
  name: 'LookupInstall',
  install: function install() {
    script$H.install();
  }
};

function _isSlot$4(s) {
  return typeof s === 'function' || Object.prototype.toString.call(s) === '[object Object]' && !isVNode(s);
}

var Picker = defineComponent({
  name: 'fm-picker',
  inheritAttrs: false,
  props: {
    modelValue: [String, Number, Boolean],
    placeholder: {
      type: String,
      "default": ''
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    valueField: {
      type: String,
      "default": 'value'
    },
    textField: {
      type: String,
      "default": 'text'
    },
    childrenField: {
      type: String,
      "default": 'children'
    },
    mapFields: Object,
    data: {
      type: [Array, Object],
      "default": function _default() {
        return [];
      }
    },
    rightIcon: {
      type: [String, Boolean],
      "default": 's-arrow'
    }
  },
  setup: function setup(props, _ref) {
    var attrs = _ref.attrs,
        emit = _ref.emit,
        slots = _ref.slots;
    var enableShow = ref(false);
    var lookupMappingFn = inject('LookupMappingFn', null);

    var getInnerValue = function getInnerValue(value) {
      if (value && props.data && props.data.length > 0) {
        var target = props.data.find(function (el) {
          return getValue(props.valueField, el) === value;
        });
        return getValue(props.textField, target);
      }

      return props.modelValue;
    };

    var innerValue = ref(getInnerValue(props.modelValue));
    watch(function () {
      return props.modelValue;
    }, function (value) {
      innerValue.value = getInnerValue(value);
    });

    var getColumns = function getColumns(data) {
      console.log('getColumns');

      if (isArray(data)) {
        return data.map(function (item) {
          var children = undefined;

          if (item[props.childrenField]) {
            children = getColumns(item[props.childrenField]);
            return {
              text: item[props.textField],
              children: children
            };
          }

          return item[props.textField];
        });
      } else if (isObject(data)) {
        return Object.keys(data).map(function (key) {
          var values = getColumns(data[key]);
          return {
            values: values
          };
        });
      }
    };

    var columns = ref(getColumns(props.data));
    watch(function () {
      return props.data;
    }, function (data) {
      columns.value = getColumns(data);
      console.log(columns.value);
    });
    var isEditable = computed(function () {
      return !(props.readonly || props.disabled);
    });

    var handleClick = function handleClick(event) {
      if (!isEditable.value) {
        return;
      }

      emit('click', event);
      enableShow.value = true;
    };

    var getValueByIndex = function getValueByIndex(field, index) {
      if (isArray(index)) {
        if (isArray(props.data)) {
          var data = props.data;
          return index.map(function (i) {
            var result = getValue(field, data ? data[i] : {});
            data = data[i][props.childrenField];
            return result;
          }).pop();
        } else if (isObject(props.data)) {
          var keyIndex = 0;
          return index.map(function (i) {
            var result = getValue(field, props.data ? props.data[keyIndex][i] : {});
            keyIndex++;
            return result;
          }).join('-');
        }
      } else {
        return getValue(field, props.data ? props.data[index] : {});
      }
    };

    var handleConfirm = function handleConfirm(value, index) {
      enableShow.value = false;
      innerValue.value = getValueByIndex(props.textField, index);
      var newValue = getValueByIndex(props.valueField, index);
      emit('change', newValue);
      emit('update:modelValue', newValue);
      lookupMappingFn && lookupMappingFn.mapFields && lookupMappingFn.mapFields(props.data ? props.data[index] : {}, props.mapFields);
    };

    var renderInput = function renderInput(fieldProps) {
      return createVNode("div", {
        "class": "fm-picker-input",
        "onClick": handleClick
      }, [slots.input ? slots.input(Object.assign(Object.assign({}, fieldProps), {
        modelValue: innerValue.value
      })) : createVNode(resolveComponent("fm-input"), mergeProps({
        "modelValue": innerValue.value
      }, fieldProps), _extends({}, slots))]);
    };

    return function () {
      var _slot;

      var name = attrs.name,
          label = attrs.label,
          _attrs$required = attrs.required,
          required = _attrs$required === void 0 ? false : _attrs$required,
          _attrs$inputAlign = attrs.inputAlign,
          inputAlign = _attrs$inputAlign === void 0 ? 'right' : _attrs$inputAlign,
          errorMessage = attrs['error-message'],
          errorMessageAlign = attrs['error-message-align'],
          onClick = attrs.onClick,
          onConfirm = attrs.onConfirm,
          onCancel = attrs.onCancel,
          onFocus = attrs.onFocus,
          onClear = attrs.onClear,
          onChange = attrs.onChange,
          slotAttrs = __rest(attrs, ["name", "label", "required", "inputAlign", 'error-message', 'error-message-align', "onClick", "onConfirm", "onCancel", "onFocus", "onClear", "onChange"]);

      var fieldProps = {
        editable: false,
        clickable: isEditable.value,
        readonly: props.readonly,
        disabled: props.disabled,
        name: name,
        label: label,
        placeholder: props.placeholder,
        required: required,
        inputAlign: inputAlign,
        errorMessage: errorMessage,
        errorMessageAlign: errorMessageAlign,
        onFocus: onFocus,
        onClear: onClear,
        rightIcon: isEditable.value ? props.rightIcon : ''
      };
      var slotProps = Object.assign(Object.assign({}, slotAttrs), {
        onConfirm: handleConfirm,
        onCancel: function onCancel() {
          return enableShow.value = false, emit('cancel');
        }
      });
      return createVNode("div", {
        "class": "fm-picker"
      }, [createVNode(resolveComponent("fm-popup"), {
        "show": enableShow.value,
        "onUpdate:show": function onUpdateShow($event) {
          return enableShow.value = $event;
        },
        "position": "bottom"
      }, _isSlot$4(_slot = createVNode(resolveComponent("van-picker"), mergeProps(slotProps, {
        "columns": columns.value,
        "class": "fm-picker-panel"
      }), null)) ? _slot : {
        "default": function _default() {
          return [_slot];
        }
      }), renderInput(fieldProps)]);
    };
  }
});

Picker.install = function (app) {
  app.component(Picker.name, Picker);
};

var _components$x;
var script$J = {
  name: 'fm-radio-group',
  components: (_components$x = {}, _components$x[script$b.name] = script$b, _components$x),
  props: {
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    shape: {
      type: String,
      "default": 'round'
    },
    checked: {
      type: Boolean,
      "default": true
    },
    modelValue: null,
    checkedColor: {
      type: String,
      "default": '#3A90FF'
    },
    role: String,
    labelClass: String,
    direction: {
      type: String,
      "default": 'vertical'
    },
    items: Array,
    valueField: {
      type: String,
      "default": 'value'
    },
    textField: {
      type: String,
      "default": 'text'
    },
    type: {
      type: String,
      "default": 'check'
    },
    size: {
      type: String,
      "default": 'normal'
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onCheckedChange = function onCheckedChange(val) {
      emit('update:modelValue', val);
    };

    return {
      onCheckedChange: onCheckedChange
    };
  }
};

function render$I(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_checker = resolveComponent("fm-checker");

  var _component_fm_cell = resolveComponent("fm-cell");

  return openBlock(), createBlock("div", {
    "class": "fm-radio-group",
    role: $props.role
  }, [$props.direction === 'vertical' ? (openBlock(true), createBlock(Fragment, {
    key: 0
  }, renderList($props.items, function (item) {
    return openBlock(), createBlock(_component_fm_cell, {
      key: item[$props.valueField],
      "class": "fm-radio-vertical"
    }, {
      "default": withCtx(function () {
        return [createVNode(_component_fm_checker, {
          label: item[$props.textField],
          disabled: $props.disabled,
          readonly: $props.readonly,
          shape: $props.shape,
          checked: $props.modelValue === item[$props.valueField],
          checkedColor: $props.checkedColor,
          type: $props.type,
          "onUpdate:checked": function onUpdateChecked($event) {
            return $setup.onCheckedChange(item[$props.valueField]);
          }
        }, null, 8
        /* PROPS */
        , ["label", "disabled", "readonly", "shape", "checked", "checkedColor", "type", "onUpdate:checked"])];
      }),
      _: 2
      /* DYNAMIC */

    }, 1024
    /* DYNAMIC_SLOTS */
    );
  }), 128
  /* KEYED_FRAGMENT */
  )) : createCommentVNode("v-if", true), $props.direction === 'horizontal' ? (openBlock(), createBlock("div", {
    key: 1,
    "class": 'fm-radio-' + $props.direction
  }, [(openBlock(true), createBlock(Fragment, null, renderList($props.items, function (item) {
    return openBlock(), createBlock(_component_fm_checker, {
      "class": "fm-radio",
      key: item[$props.valueField],
      label: item[$props.textField],
      disabled: $props.disabled,
      readonly: $props.readonly,
      shape: $props.shape,
      checked: $props.modelValue === item[$props.valueField],
      checkedColor: $props.checkedColor,
      type: $props.type,
      size: $props.size,
      "onUpdate:checked": function onUpdateChecked($event) {
        return $setup.onCheckedChange(item[$props.valueField]);
      }
    }, null, 8
    /* PROPS */
    , ["label", "disabled", "readonly", "shape", "checked", "checkedColor", "type", "size", "onUpdate:checked"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))], 2
  /* CLASS */
  )) : createCommentVNode("v-if", true)], 8
  /* PROPS */
  , ["role"]);
}

script$J.render = render$I;
script$J.__file = "packages/radio/src/radio-group.vue";

script$J.install = function (app) {
  app.component(script$J.name, script$J);
};

var Collapse$1 = defineComponent({
  name: 'fm-rate',
  setup: function setup(props, context) {
    return function () {
      return createVNode(resolveComponent("van-rate"), null, _extends({}, context.slots));
    };
  }
});

Collapse$1.install = function (app) {
  app.component(Collapse$1.name, Collapse$1);
};

var script$K = {
  name: 'fm-scheadule',
  props: {
    startTime: {
      type: Number,
      "default": 7
    },
    endTime: {
      type: Number,
      "default": 22
    },
    events: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    eventColor: {
      type: String,
      "default": '#36a5f6'
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var hourList = reactive([]);
    var currentSelectedEvent = ref({});
    var currentSelectedAllEvent = ref({});
    var eventInfoRef = ref(null);
    var showEventInfo = ref(false);

    var genHourList = function genHourList() {
      for (var i = props.startTime; i <= props.endTime; i++) {
        hourList.push(i);
      }
    };

    onMounted(function () {
      genHourList();
    });
    var allDateEvents = ref([]);
    var hourEvents = ref([]);
    watch(function () {
      return props.events;
    }, function () {
      allDateEvents.value = props.events.filter(function (event) {
        return event.allDate;
      });
      hourEvents.value = props.events.filter(function (event) {
        return !event.allDate;
      });
    }, {
      immediate: true
    });
    var eventList = computed(function () {
      if (!Array.isArray(props.events)) {
        return [];
      }

      return sortEvents(hourEvents.value).map(function (event, index) {
        var start = event.start,
            end = event.end;
        var startArr = start.split(':');
        var endArr = end.split(':');
        var startNum = Number(startArr[0]) + Number(startArr[1]) / 60;
        var endNum = Number(endArr[0]) + Number(endArr[1]) / 60;
        var height = (endNum - startNum) * 40 - 1;
        var top = (startNum - props.startTime) * 40;

        var _getWidth = getWidth({
          start: startNum,
          end: endNum,
          index: index
        }),
            width = _getWidth.width,
            left = _getWidth.left;

        console.log(width, left);
        return _extends({
          height: height,
          width: width,
          top: top,
          left: left
        }, event);
      }); // return (
      //   Array.isArray(props.events) &&
      //   props.events.map((event: any, index: number) => {
      //     const { start, end } = event
      //     const startArr = start.split(':')
      //     const endArr = end.split(':')
      //     const startNum = Number(startArr[0]) + Number(startArr[1]) / 60
      //     const endNum = Number(endArr[0]) + Number(endArr[1]) / 60
      //     const height = (endNum - startNum) * 40 - 1
      //     const top = 28 + (startNum - props.startTime) * 40
      //     const { width, left } = getWidth({
      //       start: startNum,
      //       end: endNum,
      //       index,
      //     })
      //     console.log(width, left)
      //     return {
      //       height,
      //       width,
      //       top,
      //       left,
      //       ...event,
      //     }
      //   })
      // )
    });

    var eventClick = function eventClick(event, index, type) {
      if (type === void 0) {
        type = 'common';
      }

      if (type === 'all') {
        currentSelectedAllEvent.value = _extends({
          index: index
        }, event);
        currentSelectedEvent.value = {};
      } else {
        currentSelectedEvent.value = _extends({
          index: index
        }, event);
        currentSelectedAllEvent.value = {};
      }

      var top = event.top,
          left = event.left,
          height = event.height,
          width = event.width,
          others = _objectWithoutPropertiesLoose(event, ["top", "left", "height", "width"]);

      emit('event-click', others); // setEventInfoPosition(event)
    }; // const style = ref()
    // const setEventInfoPosition = event => {
    //   const eventInfoEl = unref(eventInfoRef)
    //   if (eventInfoEl) {
    //     showEventInfo.value = true
    //     eventInfoEl.style.top = event.top + event.height + 8 + 'px'
    //     style.value = { top: event.top + event.height + 8 + 'px' }
    //   }
    // }


    var genEventStyle = function genEventStyle(event) {
      var eventColor = event.color || props.eventColor;
      return {
        top: event.top + "px",
        width: event.width,
        left: event.left,
        height: event.height + "px",
        borderLeft: "2px solid " + eventColor
      }; // `top:${event.top}px;height:${
      //   event.height
      // }px;borderLeft: 2px solid ${
      //   event.color ? event.color : props.eventColor
      // };`
    };

    var getHourState = function getHourState(hour) {
      if (props.startTime < 7 && props.startTime === hour) {
        return '';
      } else if (props.startTime < 13 && props.startTime === hour || hour === 7) {
        return '';
      } else if (props.startTime === hour || 13 === hour) {
        return '';
      }
    }; // const onClickEdit = event => {
    //   emit('edit', event)
    // }
    // const onClickDelete = event => {
    //   emit('delete', event)
    // }


    var getWidth = function getWidth(range) {
      var proportion = 0;
      var offsetX = 0;
      sortEvents(hourEvents.value).forEach(function (event, index) {
        var start = event.start,
            end = event.end;
        var startArr = start.split(':');
        var endArr = end.split(':');
        var startNum = Number(startArr[0]) + Number(startArr[1]) / 60;
        var endNum = Number(endArr[0]) + Number(endArr[1]) / 60;
        var maxStart = Math.max(range.start, startNum);
        var minEnd = Math.min(range.end, endNum);

        if (minEnd - maxStart > 0) {
          proportion = proportion + 1;
          offsetX = range.index > index ? offsetX + 1 : offsetX;
        }
      });
      return {
        width: Math.floor(100 / proportion) + '%',
        left: 100 * offsetX / proportion + '%'
      };
    };

    var sortEvents = function sortEvents(events) {
      var targetEvents = [].concat(events);
      return targetEvents.sort(function (firstEl, secondEl) {
        var _formtTime = formtTime(firstEl),
            fStart = _formtTime.start,
            fEnd = _formtTime.end;

        var _formtTime2 = formtTime(secondEl),
            SStart = _formtTime2.start,
            SEnd = _formtTime2.end;

        if (fStart >= SStart && fEnd <= SEnd) {
          return 1;
        } else if (fStart > SStart) {
          return 1;
        }

        return -1;
      });
    };

    var formtTime = function formtTime(event) {
      var start = event.start,
          end = event.end;
      var startArr = start.split(':');
      var endArr = end.split(':');
      var startNum = Number(startArr[0]) + Number(startArr[1]) / 60;
      var endNum = Number(endArr[0]) + Number(endArr[1]) / 60;
      return {
        start: startNum,
        end: endNum
      };
    };

    return {
      hourList: hourList,
      eventList: eventList,
      allDateEvents: allDateEvents,
      currentSelectedEvent: currentSelectedEvent,
      currentSelectedAllEvent: currentSelectedAllEvent,
      eventClick: eventClick,
      showEventInfo: showEventInfo,
      // style,
      eventInfoRef: eventInfoRef,
      genEventStyle: genEventStyle,
      getHourState: getHourState // onClickEdit,
      // onClickDelete,

    };
  }
};

var _hoisted_1$v = {
  "class": "fm-scheadule"
};
var _hoisted_2$m = {
  "class": "header"
};
var _hoisted_3$f = {
  "class": "title boder-bottom"
};
var _hoisted_4$d = {
  "class": "content"
};
var _hoisted_5$9 = {
  "class": "allDate boder-bottom"
};

var _hoisted_6$8 = /*#__PURE__*/createVNode("div", {
  "class": "label"
}, [/*#__PURE__*/createVNode("span", null, "")], -1
/* HOISTED */
);

var _hoisted_7$4 = {
  "class": "event-list-all"
};
var _hoisted_8$4 = {
  "class": "event"
};

var _hoisted_9$4 = /*#__PURE__*/createVNode("div", {
  "class": "left"
}, [/*#__PURE__*/createVNode("i", {
  "class": "fm-icon fm-icon-photograph"
})], -1
/* HOISTED */
);

var _hoisted_10$2 = {
  "class": "right"
};
var _hoisted_11$2 = {
  "class": "event-title"
};
var _hoisted_12$2 = {
  "class": "event-content"
};
var _hoisted_13$1 = {
  "class": "hour-list"
};
var _hoisted_14$1 = {
  "class": "label-container"
};
var _hoisted_15$1 = {
  "class": "label hour-cell-label"
};
var _hoisted_16$1 = {
  "class": "label",
  style: {
    "height": "50%"
  }
};
var _hoisted_17$1 = {
  "class": "event-list"
};
var _hoisted_18$1 = {
  "class": "event"
};

var _hoisted_19$1 = /*#__PURE__*/createVNode("div", {
  "class": "left"
}, [/*#__PURE__*/createVNode("i", {
  "class": "fm-icon fm-icon-photograph"
})], -1
/* HOISTED */
);

var _hoisted_20$1 = {
  "class": "right"
};
var _hoisted_21$1 = {
  "class": "event-title"
};
var _hoisted_22$1 = {
  "class": "event-content"
};
function render$J(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$v, [createVNode("div", _hoisted_2$m, [createVNode("div", _hoisted_3$f, [renderSlot(_ctx.$slots, "title", {
    events: $props.events
  }, function () {
    return [createVNode("span", null, toDisplayString($props.events ? $props.events.length : 0) + "", 1
    /* TEXT */
    )];
  })])]), createVNode("div", _hoisted_4$d, [createVNode("div", _hoisted_5$9, [_hoisted_6$8, createVNode("div", _hoisted_7$4, [(openBlock(true), createBlock(Fragment, null, renderList($setup.allDateEvents, function (event, index) {
    return openBlock(), createBlock("div", {
      key: event.id,
      "class": {
        'event-container': true,
        'event-container-focus': $setup.currentSelectedAllEvent.index === index
      },
      style: {
        "border-left": "2px solid rgb(54, 165, 246)"
      },
      onClick: function onClick($event) {
        return $setup.eventClick(event, index, 'all');
      }
    }, [createVNode("div", {
      "class": "event-bg",
      style: "background:" + (event.color ? event.color : $props.eventColor) + ";"
    }, null, 4
    /* STYLE */
    ), createVNode("div", _hoisted_8$4, [renderSlot(_ctx.$slots, "event", {
      event: event
    }, function () {
      return [_hoisted_9$4, createVNode("div", _hoisted_10$2, [createVNode("div", _hoisted_11$2, [createVNode("span", null, toDisplayString(event.title), 1
      /* TEXT */
      )]), createVNode("div", _hoisted_12$2, [createVNode("span", null, toDisplayString(event.content), 1
      /* TEXT */
      )])])];
    })])], 10
    /* CLASS, PROPS */
    , ["onClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))])]), createVNode("div", _hoisted_13$1, [(openBlock(true), createBlock(Fragment, null, renderList($setup.hourList, function (hour) {
    return openBlock(), createBlock("div", {
      "class": "hour-cell boder-bottom",
      key: hour
    }, [createVNode("div", _hoisted_14$1, [createVNode("div", _hoisted_15$1, [createVNode("span", null, toDisplayString(hour > 12 ? hour - 12 : hour), 1
    /* TEXT */
    )]), createVNode("div", _hoisted_16$1, toDisplayString($setup.getHourState(hour)), 1
    /* TEXT */
    )])]);
  }), 128
  /* KEYED_FRAGMENT */
  )), createVNode("div", _hoisted_17$1, [(openBlock(true), createBlock(Fragment, null, renderList($setup.eventList, function (event, index) {
    return openBlock(), createBlock("div", {
      key: event.id,
      "class": $setup.currentSelectedEvent.index === index ? 'event-container event-container-absolute event-container-focus' : 'event-container event-container-absolute',
      style: $setup.genEventStyle(event),
      onClick: function onClick($event) {
        return $setup.eventClick(event, index);
      }
    }, [createVNode("div", {
      "class": "event-bg",
      style: "background:" + (event.color ? event.color : $props.eventColor) + ";"
    }, null, 4
    /* STYLE */
    ), createVNode("div", _hoisted_18$1, [renderSlot(_ctx.$slots, "event", {
      event: event
    }, function () {
      return [_hoisted_19$1, createVNode("div", _hoisted_20$1, [createVNode("div", _hoisted_21$1, [createVNode("span", null, toDisplayString(event.title), 1
      /* TEXT */
      )]), createVNode("div", _hoisted_22$1, [createVNode("span", null, toDisplayString(event.content), 1
      /* TEXT */
      )])])];
    })])], 14
    /* CLASS, STYLE, PROPS */
    , ["onClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  )), createCommentVNode(" <fm-overlay\r\n            :show=\"showEventInfo\"\r\n            @click=\"() => (showEventInfo = false)\"\r\n            style=\"background-color: rgba(0, 0, 0, 0.0);\"\r\n          ></fm-overlay>\r\n          <div class=\"event-info\" ref=\"eventInfoRef\" v-show=\"showEventInfo\">\r\n            <div class=\"event-info-content\">\r\n              <slot name=\"event-info\" :event=\"currentSelectedEvent\">\r\n                <div class=\"event-info-item\">\r\n                  <span>{{ currentSelectedEvent.title }}</span>\r\n                </div>\r\n                <div class=\"event-info-item\">\r\n                  <span>{{\r\n                    currentSelectedEvent.start + '-' + currentSelectedEvent.end\r\n                  }}</span>\r\n                </div>\r\n                <div class=\"event-info-item\">\r\n                  <span>{{ currentSelectedEvent.content }}</span>\r\n                </div>\r\n              </slot>\r\n            </div>\r\n            <div class=\"event-info-footer\">\r\n              <div class=\"button\" @click=\"onClickEdit(currentSelectedEvent)\">edit</div>\r\n              <div class=\"button\" @click=\"onClickDelete(currentSelectedEvent)\">delete</div>\r\n            </div>\r\n            <div class=\"triangle\"></div>\r\n          </div> ")])])])]);
}

script$K.render = render$J;
script$K.__file = "packages/schedule/src/scheadule.vue";

script$K.install = function (app) {
  app.component(script$K.name, script$K);
};

// export const isProd = process.env.NODE_ENV === 'production';
var root = typeof window !== 'undefined' ? window : global;
var inBrowser$1 = typeof window !== 'undefined';
function noop$1() {}
function extend(to, _from) {
  for (var key in _from) {
    to[key] = _from[key];
  }

  return to;
}
function debounce$1(fn, delay) {
  if (fn === void 0) {
    fn = noop$1;
  }

  if (delay === void 0) {
    delay = 300;
  }

  var timer = null;
  return function () {
    var context = this;
    var args = arguments;

    if (timer) {
      clearTimeout(timer);
    }

    timer = setTimeout(function () {
      fn.apply(context, args);
    }, delay);
  };
}

/* istanbul ignore file */

var Animate = function (global) {
  /* istanbul ignore next */
  var time = Date.now || function () {
    return +new Date();
  };

  var desiredFrames = 60;
  var millisecondsPerSecond = 1000;
  var running = {};
  var counter = 1;
  return {
    /**
     * A requestAnimationFrame wrapper / polyfill.
     *
     * @param callback {Function} The callback to be invoked before the next repaint.
     * @param root {HTMLElement} The root element for the repaint
     */
    requestAnimationFrame: function () {
      // Check for request animation Frame support
      var requestFrame = global.requestAnimationFrame || global.webkitRequestAnimationFrame || global.mozRequestAnimationFrame || global.oRequestAnimationFrame;
      var isNative = !!requestFrame;

      if (requestFrame && !/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(requestFrame.toString())) {
        isNative = false;
      }

      if (isNative) {
        return function (callback, root) {
          requestFrame(callback, root);
        };
      }

      var TARGET_FPS = 60;
      var requests = {};
      var rafHandle = 1;
      var intervalHandle = null;
      var lastActive = +new Date();
      return function (callback) {
        var callbackHandle = rafHandle++; // Store callback

        requests[callbackHandle] = callback;

        if (intervalHandle === null) {
          intervalHandle = setInterval(function () {
            var time = +new Date();
            var currentRequests = requests; // Reset data structure before executing callbacks

            requests = {};

            for (var key in currentRequests) {
              if (currentRequests.hasOwnProperty(key)) {
                currentRequests[key](time);
                lastActive = time;
              }
            } // Disable the timeout when nothing happens for a certain
            // period of time


            if (time - lastActive > 2500) {
              clearInterval(intervalHandle);
              intervalHandle = null;
            }
          }, 1000 / TARGET_FPS);
        }

        return callbackHandle;
      };
    }(),

    /**
     * Stops the given animation.
     *
     * @param id {Integer} Unique animation ID
     * @return {Boolean} Whether the animation was stopped (aka, was running before)
     */
    stop: function stop(id) {
      var cleared = running[id] != null;
      cleared && (running[id] = null);
      return cleared;
    },

    /**
     * Whether the given animation is still running.
     *
     * @param id {Integer} Unique animation ID
     * @return {Boolean} Whether the animation is still running
     */
    isRunning: function isRunning(id) {
      return running[id] != null;
    },

    /**
     * Start the animation.
     *
     * @param stepCallback {Function} Pointer to function which is executed on every step.
     *   Signature of the method should be `function(percent, now, virtual) { return continueWithAnimation; }`
     * @param verifyCallback {Function} Executed before every animation step.
     *   Signature of the method should be `function() { return continueWithAnimation; }`
     * @param completedCallback {Function}
     *   Signature of the method should be `function(droppedFrames, finishedAnimation) {}`
     * @param duration {Integer} Milliseconds to run the animation
     * @param easingMethod {Function} Pointer to easing function
     *   Signature of the method should be `function(percent) { return modifiedValue; }`
     * @param root {Element ? document.body} Render root, when available. Used for internal
     *   usage of requestAnimationFrame.
     * @return {Integer} Identifier of animation. Can be used to stop it any time.
     */
    start: function start(stepCallback, verifyCallback, completedCallback, duration, easingMethod, root) {
      var _this = this;

      var start = time();
      var lastFrame = start;
      var percent = 0;
      var dropCounter = 0;
      var id = counter++;

      if (!root) {
        root = document.body;
      } // Compacting running db automatically every few new animations


      if (id % 20 === 0) {
        var newRunning = {};

        for (var usedId in running) {
          newRunning[usedId] = true;
        }

        running = newRunning;
      } // This is the internal step method which is called every few milliseconds


      var step = function step(virtual) {
        // Normalize virtual value
        var render = virtual !== true; // Get current time

        var now = time(); // Verification is executed before next animation step

        if (!running[id] || verifyCallback && !verifyCallback(id)) {
          running[id] = null;
          completedCallback && completedCallback(desiredFrames - dropCounter / ((now - start) / millisecondsPerSecond), id, false);
          return;
        } // For the current rendering to apply let's update omitted steps in memory.
        // This is important to bring internal state variables up-to-date with progress in time.


        if (render) {
          var droppedFrames = Math.round((now - lastFrame) / (millisecondsPerSecond / desiredFrames)) - 1;

          for (var j = 0; j < Math.min(droppedFrames, 4); j++) {
            step(true);
            dropCounter++;
          }
        } // Compute percent value


        if (duration) {
          percent = (now - start) / duration;

          if (percent > 1) {
            percent = 1;
          }
        } // Execute step callback, then...


        var value = easingMethod ? easingMethod(percent) : percent;
        value = isNaN(value) ? 0 : value;

        if ((stepCallback(value, now, render) === false || percent === 1) && render) {
          running[id] = null;
          completedCallback && completedCallback(desiredFrames - dropCounter / ((now - start) / millisecondsPerSecond), id, percent === 1 || duration == null);
        } else if (render) {
          lastFrame = now;

          _this.requestAnimationFrame(step, root);
        }
      }; // Mark as running


      running[id] = true; // Init first step

      this.requestAnimationFrame(step, root); // Return unique animation ID

      return id;
    }
  };
}(root);

var easeOutCubic = function easeOutCubic(pos) {
  return Math.pow(pos - 1, 3) + 1;
};
var easeInOutCubic = function easeInOutCubic(pos) {
  if ((pos /= 0.5) < 1) {
    return 0.5 * Math.pow(pos, 3);
  }

  return 0.5 * (Math.pow(pos - 2, 3) + 2);
};

var members = {
  _isSingleTouch: false,
  _isTracking: false,
  _didDecelerationComplete: false,
  _isGesturing: false,
  _isDragging: false,
  _isDecelerating: false,
  _isAnimating: false,
  _clientLeft: 0,
  _clientTop: 0,
  _clientWidth: 0,
  _clientHeight: 0,
  _contentWidth: 0,
  _contentHeight: 0,
  _snapWidth: 100,
  _snapHeight: 100,
  _refreshHeight: null,
  _refreshActive: false,
  _refreshActivate: null,
  _refreshDeactivate: null,
  _refreshStart: null,
  _zoomLevel: 1,
  _scrollLeft: 0,
  _scrollTop: 0,
  _maxScrollLeft: 0,
  _maxScrollTop: 0,
  _scheduledLeft: 0,
  _scheduledTop: 0,
  _lastTouchLeft: null,
  _lastTouchTop: null,
  _lastTouchMove: null,
  _positions: null,
  _minDecelerationScrollLeft: null,
  _minDecelerationScrollTop: null,
  _maxDecelerationScrollLeft: null,
  _maxDecelerationScrollTop: null,
  _decelerationVelocityX: null,
  _decelerationVelocityY: null
};
/* istanbul ignore next */

var Scroller = /*#__PURE__*/function () {
  function Scroller(callback, options) {
    if (callback === void 0) {
      callback = noop$1;
    }

    this.options = {
      scrollingX: true,
      scrollingY: true,
      animating: true,
      animationDuration: 250,
      inRequestAnimationFrame: false,
      bouncing: true,
      locking: true,
      paging: false,
      snapping: false,
      snappingVelocity: 4,
      zooming: false,
      minZoom: 0.5,
      maxZoom: 3,
      speedMultiplier: 1,
      scrollingComplete: noop$1,
      penetrationDeceleration: 0.03,
      penetrationAcceleration: 0.08
    };
    extend(this.options, options);
    this._callback = callback;
  }
  /**
   * Configures the dimensions of the client (outer) and content (inner) elements.
   * Requires the available space for the outer element and the outer size of the inner element.
   * All values which are falsy (null or zero etc.) are ignored and the old value is kept.
   *
   * @param clientWidth {Integer ? null} Inner width of outer element
   * @param clientHeight {Integer ? null} Inner height of outer element
   * @param contentWidth {Integer ? null} Outer width of inner element
   * @param contentHeight {Integer ? null} Outer height of inner element
   */


  var _proto = Scroller.prototype;

  _proto.setDimensions = function setDimensions(clientWidth, clientHeight, contentWidth, contentHeight) {
    // Only update values which are defined
    if (clientWidth === +clientWidth) {
      this._clientWidth = clientWidth;
    }

    if (clientHeight === +clientHeight) {
      this._clientHeight = clientHeight;
    }

    if (contentWidth === +contentWidth) {
      this._contentWidth = contentWidth;
    }

    if (contentHeight === +contentHeight) {
      this._contentHeight = contentHeight;
    } // Refresh maximums


    this._computeScrollMax(); // Refresh scroll position


    this.scrollTo(this._scrollLeft, this._scrollTop, true);
  }
  /**
   * Sets the client coordinates in relation to the document.
   *
   * @param left {Integer ? 0} Left position of outer element
   * @param top {Integer ? 0} Top position of outer element
   */
  ;

  _proto.setPosition = function setPosition(left, top) {
    this._clientLeft = left || 0;
    this._clientTop = top || 0;
  }
  /**
   * Configures the snapping (when snapping is active)
   *
   * @param width {Integer} Snapping width
   * @param height {Integer} Snapping height
   */
  ;

  _proto.setSnapSize = function setSnapSize(width, height) {
    this._snapWidth = width;
    this._snapHeight = height;
  }
  /**
   * Returns the scroll position and zooming values
   *
   * @return {Map} `left` and `top` scroll position and `zoom` level
   */
  ;

  _proto.getValues = function getValues() {
    return {
      left: this._scrollLeft,
      top: this._scrollTop,
      zoom: this._zoomLevel
    };
  }
  /**
   * Returns the maximum scroll values
   *
   * @return {Map} `left` and `top` maximum scroll values
   */
  ;

  _proto.getScrollMax = function getScrollMax() {
    return {
      left: this._maxScrollLeft,
      top: this._maxScrollTop
    };
  }
  /**
   * Activates pull-to-refresh. A special zone on the top of the list to start a list refresh whenever
   * the user event is released during visibility of this zone. This was introduced by some apps on iOS like
   * the official Twitter client.
   *
   * @param height {Integer} Height of pull-to-refresh zone on top of rendered list
   * @param activateCallback {Function} Callback to execute on activation. This is for signalling the user about a refresh is about to happen when he release.
   * @param deactivateCallback {Function} Callback to execute on deactivation. This is for signalling the user about the refresh being cancelled.
   * @param startCallback {Function} Callback to execute to start the real async refresh action. Call {@link #finishPullToRefresh} after finish of refresh.
   */
  ;

  _proto.activatePullToRefresh = function activatePullToRefresh(height, activateCallback, deactivateCallback, startCallback) {
    this._refreshHeight = height;
    this._refreshActivate = activateCallback;
    this._refreshDeactivate = deactivateCallback;
    this._refreshStart = startCallback;
  }
  /**
   * Starts pull-to-refresh manually.
   */
  ;

  _proto.triggerPullToRefresh = function triggerPullToRefresh() {
    // Use publish instead of scrollTo to allow scrolling to out of boundary position
    // We don't need to normalize scrollLeft, zoomLevel, etc. here because we only y-scrolling when pull-to-refresh is enabled
    this._publish(this._scrollLeft, -this._refreshHeight, this._zoomLevel, true);

    if (this._refreshStart) {
      this._refreshStart();
    }
  }
  /**
   * Signalizes that pull-to-refresh is finished.
   */
  ;

  _proto.finishPullToRefresh = function finishPullToRefresh() {
    this._refreshActive = false;

    if (this._refreshDeactivate) {
      this._refreshDeactivate();
    }

    this.scrollTo(this._scrollLeft, this._scrollTop, true);
  }
  /**
   * Scrolls to the given position. Respect limitations and snapping automatically.
   *
   * @param left {Number?null} Horizontal scroll position, keeps current if value is <code>null</code>
   * @param top {Number?null} Vertical scroll position, keeps current if value is <code>null</code>
   * @param animate {Boolean?false} Whether the scrolling should happen using an animation
   * @param zoom {Number?null} Zoom level to go to
   */
  ;

  _proto.scrollTo = function scrollTo(left, top, animate, zoom) {
    if (zoom === void 0) {
      zoom = 1;
    }

    // Stop deceleration
    if (this._isDecelerating) {
      Animate.stop(this._isDecelerating);
      this._isDecelerating = false;
    } // Correct coordinates based on new zoom level


    if (zoom != null && zoom !== this._zoomLevel) {
      if (!this.options.zooming) ;

      zoom = zoom ? zoom : 1;
      left *= zoom;
      top *= zoom; // // Recompute maximum values while temporary tweaking maximum scroll ranges

      this._computeScrollMax(zoom);
    } else {
      // Keep zoom when not defined
      zoom = this._zoomLevel;
    }

    if (!this.options.scrollingX) {
      left = this._scrollLeft;
    } else {
      if (this.options.paging) {
        left = Math.round(left / this._clientWidth) * this._clientWidth;
      } else if (this.options.snapping) {
        left = Math.round(left / this._snapWidth) * this._snapWidth;
      }
    }

    if (!this.options.scrollingY) {
      top = this._scrollTop;
    } else {
      if (this.options.paging) {
        top = Math.round(top / this._clientHeight) * this._clientHeight;
      } else if (this.options.snapping) {
        top = Math.round(top / this._snapHeight) * this._snapHeight;
      }
    } // Limit for allowed ranges


    left = Math.max(Math.min(this._maxScrollLeft, left), 0);
    top = Math.max(Math.min(this._maxScrollTop, top), 0); // Don't animate when no change detected, still call publish to make sure
    // that rendered position is really in-sync with internal data

    if (left === this._scrollLeft && top === this._scrollTop) {
      animate = false;
    } // Publish new values


    if (!this._isTracking) {
      this._publish(left, top, zoom, animate);
    }
  }
  /**
   * Zooms to the given level. Supports optional animation. Zooms
   * the center when no coordinates are given.
   *
   * @param level {Number} Level to zoom to
   * @param animate {Boolean ? false} Whether to use animation
   * @param originLeft {Number ? null} Zoom in at given left coordinate
   * @param originTop {Number ? null} Zoom in at given top coordinate
   * @param callback {Function ? null} A callback that gets fired when the zoom is complete.
   */
  ;

  _proto.zoomTo = function zoomTo(level, animate, originLeft, originTop, callback) {
    if (!this.options.zooming) ; // Add callback if exists


    if (callback) {
      this._zoomComplete = callback;
    } // Stop deceleration


    if (this._isDecelerating) {
      Animate.stop(this._isDecelerating);
      this._isDecelerating = false;
    }

    var oldLevel = this._zoomLevel; // Normalize input origin to center of viewport if not defined

    if (originLeft == null) {
      originLeft = this._clientWidth / 2;
    }

    if (originTop == null) {
      originTop = this._clientHeight / 2;
    } // Limit level according to configuration


    level = Math.max(Math.min(level, this.options.maxZoom), this.options.minZoom); // Recompute maximum values while temporary tweaking maximum scroll ranges

    this._computeScrollMax(level); // Recompute left and top coordinates based on new zoom level


    var left = (originLeft + this._scrollLeft) * level / oldLevel - originLeft;
    var top = (originTop + this._scrollTop) * level / oldLevel - originTop; // Limit x-axis

    if (left > this._maxScrollLeft) {
      left = this._maxScrollLeft;
    } else if (left < 0) {
      left = 0;
    } // Limit y-axis


    if (top > this._maxScrollTop) {
      top = this._maxScrollTop;
    } else if (top < 0) {
      top = 0;
    } // Push values out


    this._publish(left, top, level, animate);
  };

  _proto.doTouchStart = function doTouchStart(touches, timeStamp) {
    // Array-like check is enough here
    if (touches.length == null) ;

    if (timeStamp instanceof Date) {
      timeStamp = timeStamp.valueOf();
    }


    this._interruptedAnimation = true; // Stop deceleration

    if (this._isDecelerating) {
      Animate.stop(this._isDecelerating);
      this._isDecelerating = false;
      this._interruptedAnimation = true;
    } // Stop animation


    if (this._isAnimating) {
      Animate.stop(this._isAnimating);
      this._isAnimating = false;
      this._interruptedAnimation = true;
    } // Use center point when dealing with two fingers


    var isSingleTouch = touches.length === 1;
    var currentTouchLeft, currentTouchTop;

    if (isSingleTouch) {
      currentTouchLeft = touches[0].pageX;
      currentTouchTop = touches[0].pageY;
    } else {
      currentTouchLeft = Math.abs(touches[0].pageX + touches[1].pageX) / 2;
      currentTouchTop = Math.abs(touches[0].pageY + touches[1].pageY) / 2;
    } // Store initial positions


    this._initialTouchLeft = currentTouchLeft;
    this._initialTouchTop = currentTouchTop; // Store current zoom level

    this._zoomLevelStart = this._zoomLevel; // Store initial touch positions

    this._lastTouchLeft = currentTouchLeft;
    this._lastTouchTop = currentTouchTop; // Store initial move time stamp

    this._lastTouchMove = timeStamp; // Reset initial scale

    this._lastScale = 1; // Reset locking flags

    this._enableScrollX = !isSingleTouch && this.options.scrollingX;
    this._enableScrollY = !isSingleTouch && this.options.scrollingY; // Reset tracking flag

    this._isTracking = true; // Reset deceleration complete flag

    this._didDecelerationComplete = false; // Dragging starts directly with two fingers, otherwise lazy with an offset

    this._isDragging = !isSingleTouch; // Some features are disabled in multi touch scenarios

    this._isSingleTouch = isSingleTouch; // Clearing data structure

    this._positions = [];
  };

  _proto.doTouchMove = function doTouchMove(touches, timeStamp, scale) {
    // Array-like check is enough here
    if (touches.length == null) ;

    if (timeStamp instanceof Date) {
      timeStamp = timeStamp.valueOf();
    }


    if (!this._isTracking) {
      return;
    }

    var currentTouchLeft, currentTouchTop; // Compute move based around of center of fingers

    if (touches.length === 2) {
      currentTouchLeft = Math.abs(touches[0].pageX + touches[1].pageX) / 2;
      currentTouchTop = Math.abs(touches[0].pageY + touches[1].pageY) / 2;
    } else {
      currentTouchLeft = touches[0].pageX;
      currentTouchTop = touches[0].pageY;
    }

    var positions = this._positions; // Are we already is dragging mode?

    if (this._isDragging) {
      // Compute move distance
      var moveX = currentTouchLeft - this._lastTouchLeft;
      var moveY = currentTouchTop - this._lastTouchTop; // Read previous scroll position and zooming

      var scrollLeft = this._scrollLeft;
      var scrollTop = this._scrollTop;
      var level = this._zoomLevel; // Work with scaling

      if (scale != null && this.options.zooming) {
        var oldLevel = level; // Recompute level based on previous scale and new scale

        level = level / this._lastScale * scale; // Limit level according to configuration

        level = Math.max(Math.min(level, this.options.maxZoom), this.options.minZoom); // Only do further compution when change happened

        if (oldLevel !== level) {
          // Compute relative event position to container
          var currentTouchLeftRel = currentTouchLeft - this._clientLeft;
          var currentTouchTopRel = currentTouchTop - this._clientTop; // Recompute left and top coordinates based on new zoom level

          scrollLeft = (currentTouchLeftRel + scrollLeft) * level / oldLevel - currentTouchLeftRel;
          scrollTop = (currentTouchTopRel + scrollTop) * level / oldLevel - currentTouchTopRel; // Recompute max scroll values

          this._computeScrollMax(level);
        }
      }

      if (this._enableScrollX) {
        scrollLeft -= moveX * this.options.speedMultiplier;
        var maxScrollLeft = this._maxScrollLeft;

        if (scrollLeft > maxScrollLeft || scrollLeft < 0) {
          // Slow down on the edges
          if (this.options.bouncing) {
            scrollLeft += moveX / 2 * this.options.speedMultiplier;
          } else if (scrollLeft > maxScrollLeft) {
            scrollLeft = maxScrollLeft;
          } else {
            scrollLeft = 0;
          }
        }
      } // Compute new vertical scroll position


      if (this._enableScrollY) {
        scrollTop -= moveY * this.options.speedMultiplier;
        var maxScrollTop = this._maxScrollTop;

        if (scrollTop > maxScrollTop || scrollTop < 0) {
          // Slow down on the edges
          if (this.options.bouncing) {
            scrollTop += moveY / 2 * this.options.speedMultiplier; // Support pull-to-refresh (only when only y is scrollable)

            if (!this._enableScrollX && this._refreshHeight != null) {
              if (!this._refreshActive && scrollTop <= -this._refreshHeight) {
                this._refreshActive = true;

                if (this._refreshActivate) {
                  this._refreshActivate();
                }
              } else if (this._refreshActive && scrollTop > -this._refreshHeight) {
                this._refreshActive = false;

                if (this._refreshDeactivate) {
                  this._refreshDeactivate();
                }
              }
            }
          } else if (scrollTop > maxScrollTop) {
            scrollTop = maxScrollTop;
          } else {
            scrollTop = 0;
          }
        }
      } // Keep list from growing infinitely (holding min 10, max 20 measure points)


      if (positions.length > 60) {
        positions.splice(0, 30);
      } // Track scroll movement for decleration


      positions.push(scrollLeft, scrollTop, timeStamp); // Sync scroll position

      this._publish(scrollLeft, scrollTop, level); // Otherwise figure out whether we are switching into dragging mode now.

    } else {
      var minimumTrackingForScroll = this.options.locking ? 3 : 0;
      var minimumTrackingForDrag = 5;
      var distanceX = Math.abs(currentTouchLeft - this._initialTouchLeft);
      var distanceY = Math.abs(currentTouchTop - this._initialTouchTop);
      this._enableScrollX = this.options.scrollingX && distanceX >= minimumTrackingForScroll;
      this._enableScrollY = this.options.scrollingY && distanceY >= minimumTrackingForScroll;
      positions.push(this._scrollLeft, this._scrollTop, timeStamp);
      this._isDragging = (this._enableScrollX || this._enableScrollY) && (distanceX >= minimumTrackingForDrag || distanceY >= minimumTrackingForDrag);

      if (this._isDragging) {
        this._interruptedAnimation = false;
      }
    } // Update last touch positions and time stamp for next event


    this._lastTouchLeft = currentTouchLeft;
    this._lastTouchTop = currentTouchTop;
    this._lastTouchMove = timeStamp;
  };

  _proto.doTouchEnd = function doTouchEnd(timeStamp) {
    if (timeStamp instanceof Date) {
      timeStamp = timeStamp.valueOf();
    }
    // This is required as this listener ('touchmove') sits on the document and not on the element itthis.


    if (!this._isTracking) {
      return;
    } // Not touching anymore (when two finger hit the screen there are two touch end events)


    this._isTracking = false; // Be sure to reset the dragging flag now. Here we also detect whether
    // the finger has moved fast enough to switch into a deceleration animation.

    if (this._isDragging) {
      // Reset dragging flag
      this._isDragging = false; // Start deceleration
      // Verify that the last move detected was in some relevant time frame

      if (this._isSingleTouch && this.options.animating && timeStamp - this._lastTouchMove <= 100) {
        // Then figure out what the scroll position was about 100ms ago
        var positions = this._positions;
        var endPos = positions.length - 1;
        var startPos = endPos; // Move pointer to position measured 100ms ago

        for (var i = endPos; i > 0 && positions[i] > this._lastTouchMove - 100; i -= 3) {
          startPos = i;
        } // If start and stop position is identical in a 100ms timeframe,
        // we cannot compute any useful deceleration.


        if (startPos !== endPos) {
          // Compute relative movement between these two points
          var timeOffset = positions[endPos] - positions[startPos];
          var movedLeft = this._scrollLeft - positions[startPos - 2];
          var movedTop = this._scrollTop - positions[startPos - 1]; // Based on 50ms compute the movement to apply for each render step

          this._decelerationVelocityX = movedLeft / timeOffset * (1000 / 60);
          this._decelerationVelocityY = movedTop / timeOffset * (1000 / 60); // How much velocity is required to start the deceleration

          var minVelocityToStartDeceleration = this.options.paging || this.options.snapping ? this.options.snappingVelocity : 0.01; // Verify that we have enough velocity to start deceleration

          if (Math.abs(this._decelerationVelocityX) > minVelocityToStartDeceleration || Math.abs(this._decelerationVelocityY) > minVelocityToStartDeceleration) {
            // Deactivate pull-to-refresh when decelerating
            if (!this._refreshActive) {
              this._startDeceleration(timeStamp);
            }
          } else {
            this.options.scrollingComplete();
          }
        } else {
          this.options.scrollingComplete();
        }
      } else if (timeStamp - this._lastTouchMove > 100) {
        !this.options.snapping && this.options.scrollingComplete();
      }
    } // If this was a slower move it is per default non decelerated, but this
    // still means that we want snap back to the bounds which is done here.
    // This is placed outside the condition above to improve edge case stability
    // e.g. touchend fired without enabled dragging. This should normally do not
    // have modified the scroll positions or even showed the scrollbars though.


    if (!this._isDecelerating) {
      if (this._refreshActive && this._refreshStart) {
        // Use publish instead of scrollTo to allow scrolling to out of boundary position
        // We don't need to normalize scrollLeft, zoomLevel, etc. here because we only y-scrolling when pull-to-refresh is enabled
        this._publish(this._scrollLeft, -this._refreshHeight, this._zoomLevel, true);

        if (this._refreshStart) {
          this._refreshStart();
        }
      } else {
        if (this._interruptedAnimation || this._isDragging) {
          this.options.scrollingComplete();
        }

        this.scrollTo(this._scrollLeft, this._scrollTop, true, this._zoomLevel); // Directly signalize deactivation (nothing todo on refresh?)

        if (this._refreshActive) {
          this._refreshActive = false;

          if (this._refreshDeactivate) {
            this._refreshDeactivate();
          }
        }
      }
    } // Fully cleanup list


    this._positions.length = 0;
  };

  _proto._publish = function _publish(left, top, zoom, animate) {
    var _this = this;

    if (zoom === void 0) {
      zoom = 1;
    }

    if (animate === void 0) {
      animate = false;
    }

    // Remember whether we had an animation, then we try to continue based on the current "drive" of the animation
    var wasAnimating = this._isAnimating;

    if (wasAnimating) {
      Animate.stop(wasAnimating);
      this._isAnimating = false;
    }

    if (animate && this.options.animating) {
      // Keep scheduled positions for scrollBy/zoomBy functionality
      this._scheduledLeft = left;
      this._scheduledTop = top;
      this._scheduledZoom = zoom;
      var oldLeft = this._scrollLeft;
      var oldTop = this._scrollTop;
      var oldZoom = this._zoomLevel;
      var diffLeft = left - oldLeft;
      var diffTop = top - oldTop;
      var diffZoom = zoom - oldZoom;

      var step = function step(percent, now, render) {
        if (render) {
          _this._scrollLeft = oldLeft + diffLeft * percent;
          _this._scrollTop = oldTop + diffTop * percent;
          _this._zoomLevel = oldZoom + diffZoom * percent; // Push values out

          if (_this._callback) {
            _this._callback(_this._scrollLeft, _this._scrollTop, _this._zoomLevel);
          }
        }
      };

      var verify = function verify(id) {
        return _this._isAnimating === id;
      };

      var completed = function completed(renderedFramesPerSecond, animationId, wasFinished) {
        if (animationId === _this._isAnimating) {
          _this._isAnimating = false;
        }

        if (_this._didDecelerationComplete || wasFinished) {
          _this.options.scrollingComplete();
        }

        if (_this.options.zooming) {
          _this._computeScrollMax();

          if (_this._zoomComplete) {
            _this._zoomComplete();

            _this._zoomComplete = null;
          }
        }
      };

      var doAnimation = function doAnimation() {
        // When continuing based on previous animation we choose an ease-out animation instead of ease-in-out
        _this._isAnimating = Animate.start(step, verify, completed, _this.options.animationDuration, wasAnimating ? easeOutCubic : easeInOutCubic);
      };

      if (this.options.inRequestAnimationFrame) {
        Animate.requestAnimationFrame(function () {
          doAnimation();
        });
      } else {
        doAnimation();
      }
    } else {
      this._scheduledLeft = this._scrollLeft = left;
      this._scheduledTop = this._scrollTop = top;
      this._scheduledZoom = this._zoomLevel = zoom; // Push values out

      if (this._callback) {
        this._callback(left, top, zoom);
      } // Fix max scroll ranges


      if (this.options.zooming) {
        this._computeScrollMax();

        if (this._zoomComplete) {
          this._zoomComplete();

          this._zoomComplete = null;
        }
      }
    }
  };

  _proto._computeScrollMax = function _computeScrollMax(zoomLevel) {
    if (zoomLevel == null) {
      zoomLevel = this._zoomLevel;
    }

    this._maxScrollLeft = Math.max(this._contentWidth * zoomLevel - this._clientWidth, 0);
    this._maxScrollTop = Math.max(this._contentHeight * zoomLevel - this._clientHeight, 0);
  };

  _proto._startDeceleration = function _startDeceleration(timeStamp) {
    var _this2 = this;

    if (this.options.paging) {
      var scrollLeft = Math.max(Math.min(this._scrollLeft, this._maxScrollLeft), 0);
      var scrollTop = Math.max(Math.min(this._scrollTop, this._maxScrollTop), 0);
      var clientWidth = this._clientWidth;
      var clientHeight = this._clientHeight; // We limit deceleration not to the min/max values of the allowed range, but to the size of the visible client area.
      // Each page should have exactly the size of the client area.

      this._minDecelerationScrollLeft = Math.floor(scrollLeft / clientWidth) * clientWidth;
      this._minDecelerationScrollTop = Math.floor(scrollTop / clientHeight) * clientHeight;
      this._maxDecelerationScrollLeft = Math.ceil(scrollLeft / clientWidth) * clientWidth;
      this._maxDecelerationScrollTop = Math.ceil(scrollTop / clientHeight) * clientHeight;
    } else {
      this._minDecelerationScrollLeft = 0;
      this._minDecelerationScrollTop = 0;
      this._maxDecelerationScrollLeft = this._maxScrollLeft;
      this._maxDecelerationScrollTop = this._maxScrollTop;
    } // Wrap class method


    var step = function step(percent, now, render) {
      _this2._stepThroughDeceleration(render);
    }; // How much velocity is required to keep the deceleration running


    var minVelocityToKeepDecelerating = this.options.snapping ? this.options.snappingVelocity : 0.01; // Detect whether it's still worth to continue animating steps
    // If we are already slow enough to not being user perceivable anymore, we stop the whole process here.

    var verify = function verify() {
      var shouldContinue = Math.abs(_this2._decelerationVelocityX) >= minVelocityToKeepDecelerating || Math.abs(_this2._decelerationVelocityY) >= minVelocityToKeepDecelerating;

      if (!shouldContinue) {
        _this2._didDecelerationComplete = true;
      }

      return shouldContinue;
    };

    var completed = function completed(renderedFramesPerSecond, animationId, wasFinished) {
      _this2._isDecelerating = false; // if (this._didDecelerationComplete) {
      //   this.options.scrollingComplete()
      // }
      // Animate to grid when snapping is active, otherwise just fix out-of-boundary positions

      _this2.scrollTo(_this2._scrollLeft, _this2._scrollTop, _this2.options.snapping);
    }; // Start animation and switch on flag


    this._isDecelerating = Animate.start(step, verify, completed);
  };

  _proto._stepThroughDeceleration = function _stepThroughDeceleration(render) {
    //
    // COMPUTE NEXT SCROLL POSITION
    //
    // Add deceleration to scroll position
    var scrollLeft = this._scrollLeft + this._decelerationVelocityX;
    var scrollTop = this._scrollTop + this._decelerationVelocityY; //
    // HARD LIMIT SCROLL POSITION FOR NON BOUNCING MODE
    //

    if (!this.options.bouncing) {
      var scrollLeftFixed = Math.max(Math.min(this._maxDecelerationScrollLeft, scrollLeft), this._minDecelerationScrollLeft);

      if (scrollLeftFixed !== scrollLeft) {
        scrollLeft = scrollLeftFixed;
        this._decelerationVelocityX = 0;
      }

      var scrollTopFixed = Math.max(Math.min(this._maxDecelerationScrollTop, scrollTop), this._minDecelerationScrollTop);

      if (scrollTopFixed !== scrollTop) {
        scrollTop = scrollTopFixed;
        this._decelerationVelocityY = 0;
      }
    } //
    // UPDATE SCROLL POSITION
    //


    if (render) {
      this._publish(scrollLeft, scrollTop, this._zoomLevel);
    } else {
      this._scrollLeft = scrollLeft;
      this._scrollTop = scrollTop;
    } //
    // SLOW DOWN
    //
    // Slow down velocity on every iteration


    if (!this.options.paging) {
      // This is the factor applied to every iteration of the animation
      // to slow down the process. This should emulate natural behavior where
      // objects slow down when the initiator of the movement is removed
      var frictionFactor = 0.95;
      this._decelerationVelocityX *= frictionFactor;
      this._decelerationVelocityY *= frictionFactor;
    } //
    // BOUNCING SUPPORT
    //


    if (this.options.bouncing) {
      var scrollOutsideX = 0;
      var scrollOutsideY = 0; // This configures the amount of change applied to deceleration/acceleration when reaching boundaries

      var penetrationDeceleration = this.options.penetrationDeceleration;
      var penetrationAcceleration = this.options.penetrationAcceleration; // Check limits

      if (scrollLeft < this._minDecelerationScrollLeft) {
        scrollOutsideX = this._minDecelerationScrollLeft - scrollLeft;
      } else if (scrollLeft > this._maxDecelerationScrollLeft) {
        scrollOutsideX = this._maxDecelerationScrollLeft - scrollLeft;
      }

      if (scrollTop < this._minDecelerationScrollTop) {
        scrollOutsideY = this._minDecelerationScrollTop - scrollTop;
      } else if (scrollTop > this._maxDecelerationScrollTop) {
        scrollOutsideY = this._maxDecelerationScrollTop - scrollTop;
      } // Slow down until slow enough, then flip back to snap position


      if (scrollOutsideX !== 0) {
        if (scrollOutsideX * this._decelerationVelocityX <= 0) {
          this._decelerationVelocityX += scrollOutsideX * penetrationDeceleration;
        } else {
          this._decelerationVelocityX = scrollOutsideX * penetrationAcceleration;
        }
      }

      if (scrollOutsideY !== 0) {
        if (scrollOutsideY * this._decelerationVelocityY <= 0) {
          this._decelerationVelocityY += scrollOutsideY * penetrationDeceleration;
        } else {
          this._decelerationVelocityY = scrollOutsideY * penetrationAcceleration;
        }
      }
    }
  };

  return Scroller;
}();
extend(Scroller.prototype, members);

/* istanbul ignore file */

var render$K = function (global) {
  // for ssr
  if (!inBrowser$1) {
    return function (content, left, top) {
      content.style.marginLeft = left ? -left + "px" : '';
      content.style.marginTop = top ? -top + "px" : '';
    };
  }

  var docStyle = document.documentElement.style;
  var engine;

  if (global.opera && Object.prototype.toString.call(opera) === '[object Opera]') {
    engine = 'presto';
  } else if ('MozAppearance' in docStyle) {
    engine = 'gecko';
  } else if ('WebkitAppearance' in docStyle) {
    engine = 'webkit';
  } else if (typeof navigator.cpuClass === 'string') {
    engine = 'trident';
  }

  var vendorPrefix = {
    trident: 'ms',
    gecko: 'Moz',
    webkit: 'Webkit',
    presto: 'O'
  }[engine];
  var helperElem = document.createElement('div');
  var perspectiveProperty = vendorPrefix + 'Perspective';
  var transformProperty = vendorPrefix + 'Transform';

  if (helperElem.style[perspectiveProperty] !== undefined) {
    return function (content, left, top, zoom, useNativeDriver) {
      if (zoom === void 0) {
        zoom = 1;
      }

      if (useNativeDriver === void 0) {
        useNativeDriver = true;
      }

      if (useNativeDriver) {
        content.style[transformProperty] = "translate3d(" + -left + "px," + -top + "px,0) scale(" + zoom + ")";
      } else {
        content.style[transformProperty] = "translate(" + -left + "px," + -top + "px) scale(" + zoom + ")";
      }
    };
  } else if (helperElem.style[transformProperty] !== undefined) {
    return function (content, left, top, zoom) {
      if (zoom === void 0) {
        zoom = 1;
      }

      content.style[transformProperty] = "translate(" + -left + "px," + -top + "px) scale(" + zoom + ")";
    };
  } else {
    return function (content, left, top, zoom) {
      content.style.marginLeft = left ? -left + "px" : '';
      content.style.marginTop = top ? -top + "px" : '';
      content.style.zoom = zoom || '';
    };
  }
}(root);

var script$L = {
  name: 'fm-scroll-view',
  props: {
    scrollingX: {
      type: Boolean,
      "default": true
    },
    scrollingY: {
      type: Boolean,
      "default": true
    },
    bouncing: {
      type: Boolean,
      "default": true
    },
    autoReflow: {
      type: Boolean,
      "default": false
    },
    //
    manualInit: {
      type: Boolean,
      "default": false
    },
    endReachedThreshold: {
      type: Number,
      "default": 0
    },
    immediateCheckEndReaching: {
      type: Boolean,
      "default": false
    },
    touchAngle: {
      type: Number,
      "default": 45
    },
    isPrevent: {
      type: Boolean,
      "default": true
    }
  },
  data: function data() {
    return {
      container: null,
      content: null,
      refresher: null,
      more: null,
      scroller: null,
      refreshOffsetY: 0,
      isInitialed: false,
      isMouseDown: false,
      isRefreshing: false,
      isRefreshActive: false,
      isEndReachingStart: false,
      isEndReaching: false,
      scrollX: null,
      scrollY: null,
      startX: 0,
      startY: 0,
      currentX: 0,
      currentY: 0,
      containerW: 0,
      containerH: 0,
      contentW: 0,
      contentH: 0,
      reflowTimer: null,
      endReachedHandler: null
    };
  },
  computed: {
    hasRefresher: function hasRefresher() {
      return !!this.$slots.refresh;
    },
    hasMore: function hasMore() {
      return !!this.$slots.more;
    }
  },
  watch: {
    autoReflow: function autoReflow(val) {
      if (val) {
        this.$_initAutoReflow();
      } else {
        this.$_destroyAutoReflow();
      }
    }
  },
  mounted: function mounted() {
    if (!this.manualInit) {
      this.$_initScroller();
    }
  },
  unmounted: function unmounted() {
    this.$_destroyAutoReflow();
  },
  methods: {
    $_initScroller: function $_initScroller() {
      var _this = this;

      /* istanbul ignore if */
      if (this.isInitialed) {
        return;
      }

      this.container = this.$el;
      this.refresher = this.$el.querySelector('.scroll-view-refresh');
      this.more = this.$el.querySelector('.scroll-view-more');
      this.content = this.$el.querySelector('.scroll-view-container');
      this.refreshOffsetY = this.refresher ? this.refresher.clientHeight : 0;
      this.moreOffsetY = this.more ? this.more.clientHeight : 0;
      var container = this.container;
      var content = this.content;
      var rect = container.getBoundingClientRect();
      var scroller = new Scroller(function (left, top) {
        render$K(content, left, top);

        if (_this.isInitialed) {
          _this.$_onScroll(left, top);
        }
      }, {
        scrollingX: this.scrollingX,
        scrollingY: this.scrollingY,
        bouncing: this.bouncing,
        zooming: false,
        animationDuration: 200,
        speedMultiplier: 1.2,
        inRequestAnimationFrame: true
      });
      scroller.setPosition(rect.left + container.clientLeft, rect.top + container.clientTop);

      if (this.hasRefresher) {
        scroller.activatePullToRefresh(this.refreshOffsetY, function () {
          _this.isRefreshActive = true;
          _this.isRefreshing = false;

          _this.$emit('refreshActive');
        }, function () {
          _this.isRefreshActive = false;
          _this.isRefreshing = false;
        }, function () {
          _this.isRefreshActive = false;
          _this.isRefreshing = true;

          _this.$emit('refreshing');
        });
      }

      this.scroller = scroller;
      this.reflowScroller(true);
      this.autoReflow && this.$_initAutoReflow();
      this.endReachedHandler = debounce$1(function () {
        _this.isEndReaching = true;

        _this.$emit('endReached');

        _this.$emit('end-reached');
      }, 50);
      setTimeout(function () {
        _this.isInitialed = true;
      }, 50);

      if (this.immediateCheckEndReaching) {
        nextTick(this.$_checkScrollerEnd);
      }
    },
    $_initAutoReflow: function $_initAutoReflow() {
      var _this2 = this;

      this.$_destroyAutoReflow();
      this.reflowTimer = setInterval(function () {
        _this2.reflowScroller();
      }, 100);
    },
    $_destroyAutoReflow: function $_destroyAutoReflow() {
      this.reflowTimer && clearInterval(this.reflowTimer);
    },
    $_checkScrollerEnd: function $_checkScrollerEnd() {
      if (!this.scroller) {
        return;
      }

      var containerHeight = this.scroller._clientHeight;
      var content = this.scroller._contentHeight;
      var top = this.scroller._scrollTop;
      var moreOffsetY = this.moreOffsetY;
      var moreThreshold = this.endReachedThreshold;
      var endOffset = content - containerHeight - (top + moreOffsetY + moreThreshold);

      if (top >= 0 && !this.isEndReaching && endOffset <= 0 && this.endReachedHandler) {
        // First prepare for "load more" state
        this.isEndReachingStart = true; // Second enter "load more" state
        // & trigger endReached event only once after the rebounding animation

        this.endReachedHandler();
      }
    },
    $_getScrollerAngle: function $_getScrollerAngle() {
      var diffX = this.currentX - this.startX;
      var diffY = this.currentY - this.startY;
      var angle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;
      return this.scrollingX ? 90 - angle : angle;
    },
    // MARK: events handler
    $_onScrollerTouchStart: function $_onScrollerTouchStart(event) {
      // event.target.tagName && event.target.tagName.match(/input|textarea|select/i)

      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.startX = event.targetTouches[0].pageX;
      this.startY = event.targetTouches[0].pageY;
      this.scroller.doTouchStart(event.touches, event.timeStamp);
    },
    $_onScrollerTouchMove: function $_onScrollerTouchMove(event) {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      var hadPrevent = false;

      if (this.isPrevent) {
        event.preventDefault();
        hadPrevent = true;
      }

      this.currentX = event.targetTouches[0].pageX;
      this.currentY = event.targetTouches[0].pageY;

      if (!this.scrollingX || !this.scrollingY) {
        var currentTouchAngle = this.$_getScrollerAngle();

        if (currentTouchAngle < this.touchAngle) {
          return;
        }
      }

      if (!hadPrevent && event.cancelable) {
        event.preventDefault();
      }

      this.scroller.doTouchMove(event.touches, event.timeStamp, event.scale);
      var boundaryDistance = 15;
      var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;
      var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;
      var pX = this.currentX - scrollLeft;
      var pY = this.currentY - scrollTop;

      if (pX > document.documentElement.clientWidth - boundaryDistance || pY > document.documentElement.clientHeight - boundaryDistance || pX < boundaryDistance || pY < boundaryDistance) {
        this.scroller.doTouchEnd(event.timeStamp);
      }
    },
    $_onScrollerTouchEnd: function $_onScrollerTouchEnd(event) {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.scroller.doTouchEnd(event.timeStamp);
    },
    $_onScrollerMouseDown: function $_onScrollerMouseDown(event) {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.startX = event.pageX;
      this.startY = event.pageY;
      this.scroller.doTouchStart([{
        pageX: event.pageX,
        pageY: event.pageY
      }], event.timeStamp);
      this.isMouseDown = true;
    },
    $_onScrollerMouseMove: function $_onScrollerMouseMove(event) {
      /* istanbul ignore if */
      if (!this.scroller || !this.isMouseDown) {
        return;
      }

      this.currentX = event.pageX;
      this.currentY = event.pageY;

      if (!this.scrollingX || !this.scrollingY) {
        var currentTouchAngle = this.$_getScrollerAngle();

        if (currentTouchAngle < this.touchAngle) {
          return;
        }
      }

      this.scroller.doTouchMove([{
        pageX: event.pageX,
        pageY: event.pageY
      }], event.timeStamp);
      this.isMouseDown = true;
    },
    $_onScrollerMouseUp: function $_onScrollerMouseUp(event) {
      /* istanbul ignore if */
      if (!this.scroller || !this.isMouseDown) {
        return;
      }

      this.scroller.doTouchEnd(event.timeStamp);
      this.isMouseDown = false;
    },
    $_onScroll: function $_onScroll(left, top) {
      left = +left.toFixed(2);
      top = +top.toFixed(2);

      if (this.scrollX === left && this.scrollY === top) {
        return;
      }

      this.scrollX = left;
      this.scrollY = top;
      this.$_checkScrollerEnd();
      this.$emit('scroll', {
        scrollLeft: left,
        scrollTop: top
      });
    },
    init: function init() {
      var _this3 = this;

      nextTick(function () {
        _this3.$_initScroller();
      });
    },
    scrollTo: function scrollTo(left, top, animate) {
      if (animate === void 0) {
        animate = false;
      }

      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.scroller.scrollTo(left, top, animate);
    },
    getOffsets: function getOffsets() {
      /* istanbul ignore if */
      if (!this.scroller) {
        return {
          left: 0,
          top: 0
        };
      }

      return this.scroller.getValues();
    },
    reflowScroller: function reflowScroller(force) {
      var _this4 = this;

      if (force === void 0) {
        force = false;
      }

      var container = this.container;
      var content = this.content;
      /* istanbul ignore if */

      if (!this.scroller || !container || !content) {
        return;
      }

      nextTick(function () {
        var containerW = container.clientWidth;
        var containerH = container.clientHeight;
        var contentW = content.offsetWidth;
        var contentH = content.offsetHeight;

        if (force || _this4.containerW !== containerW || _this4.containerH !== containerH || _this4.contentW !== contentW || _this4.contentH !== contentH) {
          _this4.scroller.setDimensions(container.clientWidth, container.clientHeight, content.offsetWidth, content.offsetHeight);

          _this4.containerW = containerW;
          _this4.containerH = containerH;
          _this4.contentW = contentW;
          _this4.contentH = contentH;
        }
      });
    },
    triggerRefresh: function triggerRefresh() {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.scroller.triggerPullToRefresh();
    },
    finishRefresh: function finishRefresh() {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.scroller.finishPullToRefresh();
      this.reflowScroller();
    },
    finishLoadMore: function finishLoadMore() {
      /* istanbul ignore if */
      if (!this.scroller) {
        return;
      }

      this.isEndReachingStart = false;
      this.isEndReaching = false;
      this.reflowScroller();
    }
  }
};

const _hoisted_1$w = {
  key: 0,
  class: "scroll-view-header"
};
const _hoisted_2$n = {
  key: 1,
  class: "scroll-view-footer"
};

function render$L(_ctx, _cache, $props, $setup, $data, $options) {
  return (openBlock(), createBlock("div", {
    class: "fm-scroll-view",
    onTouchstart: _cache[1] || (_cache[1] = (...args) => ($options.$_onScrollerTouchStart && $options.$_onScrollerTouchStart(...args))),
    onTouchmove: _cache[2] || (_cache[2] = (...args) => ($options.$_onScrollerTouchMove && $options.$_onScrollerTouchMove(...args))),
    onTouchend: _cache[3] || (_cache[3] = (...args) => ($options.$_onScrollerTouchEnd && $options.$_onScrollerTouchEnd(...args))),
    onTouchcancel: _cache[4] || (_cache[4] = (...args) => ($options.$_onScrollerTouchEnd && $options.$_onScrollerTouchEnd(...args))),
    onMousedown: _cache[5] || (_cache[5] = (...args) => ($options.$_onScrollerMouseDown && $options.$_onScrollerMouseDown(...args))),
    onMousemove: _cache[6] || (_cache[6] = (...args) => ($options.$_onScrollerMouseMove && $options.$_onScrollerMouseMove(...args))),
    onMouseup: _cache[7] || (_cache[7] = (...args) => ($options.$_onScrollerMouseUp && $options.$_onScrollerMouseUp(...args))),
    onMouseleave: _cache[8] || (_cache[8] = (...args) => ($options.$_onScrollerMouseUp && $options.$_onScrollerMouseUp(...args)))
  }, [
    (_ctx.$slots.header)
      ? (openBlock(), createBlock("div", _hoisted_1$w, [
          renderSlot(_ctx.$slots, "header")
        ]))
      : createCommentVNode("v-if", true),
    createVNode("div", {
      class: ["scroll-view-container", {
        'horizon': $props.scrollingX && !$props.scrollingY
      }],
      "scroll-wrapper": ""
    }, [
      ($options.hasRefresher)
        ? (openBlock(), createBlock("div", {
            key: 0,
            class: ["scroll-view-refresh", {
          'refreshing': $data.isRefreshing,
          'refresh-active': $data.isRefreshActive,
        }]
          }, [
            renderSlot(_ctx.$slots, "refresh", {
              scrollTop: $data.scrollY,
              isRefreshing: $data.isRefreshing,
              isRefreshActive: $data.isRefreshActive
            })
          ], 2 /* CLASS */))
        : createCommentVNode("v-if", true),
      renderSlot(_ctx.$slots, "default"),
      ($options.hasMore)
        ? (openBlock(), createBlock("div", {
            key: 1,
            class: [{active: $data.isEndReachingStart || $data.isEndReaching}, "scroll-view-more"]
          }, [
            renderSlot(_ctx.$slots, "more", {
              isEndReaching: $data.isEndReachingStart || $data.isEndReaching
            })
          ], 2 /* CLASS */))
        : createCommentVNode("v-if", true)
    ], 2 /* CLASS */),
    (_ctx.$slots.footer)
      ? (openBlock(), createBlock("div", _hoisted_2$n, [
          renderSlot(_ctx.$slots, "footer")
        ]))
      : createCommentVNode("v-if", true)
  ], 32 /* HYDRATE_EVENTS */))
}

script$L.render = render$L;
script$L.__file = "packages/scroll-view/index.vue";

script$L.install = function (app) {
  app.component(script$L.name, script$L);
};

var script$M = {
  name: 'fm-switch',
  props: {
    modelValue: {
      type: Boolean,
      "default": false
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    loading: {
      type: Boolean,
      "default": false
    },
    size: {
      type: Number,
      "default": 28
    },
    activeColor: {
      type: String,
      "default": ''
    },
    inactiveColor: {
      type: String,
      "default": ''
    },
    activeValue: {
      type: [Boolean, Number, String],
      "default": true
    },
    inactiveValue: {
      type: [Boolean, Number, String],
      "default": false
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    //   const innerValue = ref(props.modelValue)
    var checked = computed(function () {
      return props.modelValue === props.activeValue;
    });
    var style = computed(function () {
      return {
        fontSize: props.size + 'px',
        backgroundColor: checked ? props.activeColor : props.inactiveColor
      };
    });

    var onClick = function onClick(event) {
      emit('click', event);

      if (!props.disabled && !props.loading && !props.readonly) {
        var innerValue = checked.value ? props.inactiveValue : props.activeValue;
        emit('update:modelValue', innerValue);
        emit('change', innerValue);
      }
    };

    return {
      style: style,
      checked: checked,
      onClick: onClick
    };
  }
};

var _hoisted_1$x = {
  "class": "fm-switch-node"
};
var _hoisted_2$o = {
  key: 0,
  "class": "fm-switch-loading-icon"
};

var _hoisted_3$g = /*#__PURE__*/createVNode("svg", {
  viewBox: "25 25 50 50",
  "class": "fm-switch-loading-icon-circular"
}, [/*#__PURE__*/createVNode("circle", {
  cx: "50",
  cy: "50",
  r: "20",
  fill: "none"
})], -1
/* HOISTED */
);

function render$M(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": ["fm-switch", {
      'fm-switch-on': $setup.checked,
      'fm-switch-loading': $props.loading,
      'fm-switch-disabled': $props.disabled,
      'fm-switch-readonly': $props.readonly
    }],
    style: $setup.style,
    onClick: _cache[1] || (_cache[1] = function () {
      return $setup.onClick && $setup.onClick.apply($setup, arguments);
    })
  }, [createVNode("div", _hoisted_1$x, [$props.loading ? (openBlock(), createBlock("span", _hoisted_2$o, [_hoisted_3$g])) : createCommentVNode("v-if", true)])], 6
  /* CLASS, STYLE */
  );
}

script$M.render = render$M;
script$M.__file = "packages/switch/src/index.vue";

script$M.install = function (app) {
  app.component(script$M.name, script$M);
};

var script$N = {
  name: 'fm-switch-cell',
  props: {
    modelValue: {
      type: Boolean || String,
      "default": false
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    required: {
      type: Boolean,
      "default": false
    },
    loading: {
      type: Boolean,
      "default": false
    },
    size: {
      type: Number,
      "default": 28
    },
    activeColor: {
      type: String
    },
    inactiveColor: {
      type: String
    },
    activeValue: {
      "default": true
    },
    inactiveValue: {
      "default": false
    },
    title: {
      type: String
    },
    border: {
      type: Boolean
    },
    errorMessage: String,
    errorMessageAlign: String
  },
  data: function data() {
    return {
      inValue: false
    };
  },
  mounted: function mounted() {
    this.inValue = this.modelValue;
  },
  watch: {
    modelValue: function modelValue(newValue) {
      this.inValue = newValue;
    }
  },
  methods: {
    change: function change(event) {
      this.inValue = event;
      var newValue = this.inValue ? this.activeValue : this.inactiveValue;
      this.$emit('change', newValue);
      this.$emit('update:modelValue', newValue);
    }
  }
};

function render$N(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_switch = resolveComponent("fm-switch");

  var _component_fm_input = resolveComponent("fm-input");

  return openBlock(), createBlock(_component_fm_input, {
    center: "",
    required: $props.required,
    label: $props.title,
    "input-align": "right",
    "error-message-align": $props.errorMessageAlign,
    "error-message": $props.errorMessage
  }, {
    input: withCtx(function () {
      return [createVNode(_component_fm_switch, {
        modelValue: $data.inValue,
        "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
          return $data.inValue = $event;
        }),
        disabled: $props.disabled,
        readonly: $props.readonly,
        loading: $props.loading,
        size: $props.size,
        activeColor: $props.activeColor,
        inactiveColor: $props.inactiveColor,
        activeValue: $props.activeValue,
        inactiveValue: $props.inactiveValue,
        onChange: _cache[2] || (_cache[2] = function ($event) {
          return $options.change($event);
        })
      }, null, 8
      /* PROPS */
      , ["modelValue", "disabled", "readonly", "loading", "size", "activeColor", "inactiveColor", "activeValue", "inactiveValue"])];
    }),
    _: 1
    /* STABLE */

  }, 8
  /* PROPS */
  , ["required", "label", "error-message-align", "error-message"]);
}

script$N.render = render$N;
script$N.__file = "packages/switch-cell/src/index.vue";

script$N.install = function (app) {
  app.component(script$N.name, script$N);
};

var script$O = {
  name: 'fm-tab',
  inject: {
    rootTabs: {
      from: 'rootTabs',
      "default": function _default() {
        /* istanbul ignore next */
        return this.$parent;
      }
    }
  },
  props: {
    title: {
      type: String
    },
    name: {
      type: [Number, String]
    },
    disabled: {
      type: Boolean
    },
    icon: {
      type: String
    },
    iconColor: {
      type: String
    },
    dot: {
      type: Boolean,
      "default": false
    },
    badge: {
      type: [String, Number]
    },
    activeIcon: {
      type: String
    },
    activeIconColor: {
      type: String
    },
    iconPrefix: {
      type: String
    }
  },
  data: function data() {
    return {
      inited: false
    };
  },
  computed: {
    active: function active() {
      var active = this.rootTabs.currentName === this.name;

      if (active) {
        this.inited = true;
      }

      return active;
    },
    transitionName: function transitionName() {
      if (this.rootTabs.animated) {
        return this.rootTabs.prevIndex > this.rootTabs.currentIndex ? 'fm-tab-slide-right' : 'fm-tab-slide-left';
      } else {
        return '';
      }
    }
  },
  watch: {
    title: function title() {
      this.rootTabs.$forceUpdate();
    },
    disabled: function disabled() {
      this.rootTabs.$forceUpdate();
    },
    icon: function icon() {
      this.rootTabs.$forceUpdate();
    },
    iconColor: function iconColor() {
      this.rootTabs.$forceUpdate();
    }
  },
  created: function created() {
    if (!this.rootTabs.lazyRender) {
      this.inited = true;
    }

    this.rootTabs.$_addPane(this);
  },
  unmounted: function unmounted() {
    this.rootTabs.$_removePane(this);
  }
};

function render$O(_ctx, _cache, $props, $setup, $data, $options) {
  return (openBlock(), createBlock(Fragment, null, [
    createCommentVNode(" <transition :name=\"transitionName\">\r\n</transition> "),
    withDirectives(createVNode("div", {
      class: "fm-tab-pane",
      role: "tabpanel",
      tab: $props.name
    }, [
      ($data.inited)
        ? renderSlot(_ctx.$slots, "default", { key: 0 })
        : createCommentVNode("v-if", true)
    ], 8 /* PROPS */, ["tab"]), [
      [vShow, $options.active]
    ])
  ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))
}

script$O.render = render$O;
script$O.__file = "packages/tabs/src/tab/index.vue";

script$O.install = function (app) {
  app.component(script$O.name, script$O);
};

var _components$y;
var script$P = {
  name: 'fm-tab-bar',
  components: (_components$y = {}, _components$y[script$L.name] = script$L, _components$y),
  props: {
    value: {
      type: [String, Number],
      "default": ''
    },
    items: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    border: {
      type: Boolean,
      "default": true
    },
    inkLength: {
      type: Number,
      "default": 100
    },
    immediate: {
      type: Boolean,
      "default": false
    },
    className: {
      type: String
    },
    type: {
      type: String,
      "default": 'line'
    }
  },
  data: function data() {
    return {
      currentName: '',
      wrapperW: 0,
      contentW: 0,
      inkWidth: 0,
      inkPos: 0,
      scrollerTmpKey: Date.now(),
      maskStartShown: false,
      maskEndShown: true,
      itemRefs: []
    };
  },
  computed: {
    scrollable: function scrollable() {
      return this.contentW > this.wrapperW;
    },
    currentIndex: function currentIndex() {
      for (var i = 0, len = this.items.length; i < len; i++) {
        if (this.items[i].name === this.currentName) {
          return i;
        }
      }
    },
    currentTab: function currentTab() {
      if (this.currentIndex) {
        return this.items[this.currentIndex];
      }
    }
  },
  watch: {
    value: {
      immediate: true,
      handler: function handler(val) {
        if (val !== this.currentName) {
          this.currentName = val;
        }
      }
    },
    inkWidth: function inkWidth() {
      var _this = this;

      /* istanbul ignore next */
      nextTick(function () {
        _this.reflow();
      });
    },
    items: function items() {
      /* istanbul ignore next */
      //nextTick(() => {
      this.reflow2(); //});
    },
    currentIndex: function currentIndex() {
      var _this2 = this;

      nextTick(function () {
        _this2.reflow();
      });
    },
    scrollable: function scrollable() {
      /* istanbul ignore next */
      this.scrollerTmpKey = Date.now();
    }
  },
  created: function created() {
    if (this.currentName === '' && this.items.length) {
      this.currentName = this.items[0].name;
      this.$emit('change', this.items[0], 0, 0);
    }
  },
  mounted: function mounted() {
    // console.log(this.items);
    this.$_resizeEnterBehavior();
  },
  activated: function activated() {
    this.$_resizeEnterBehavior();
  },
  deactivated: function deactivated() {
    this.$_resizeLeaveBehavior();
  },
  beforeUnmount: function beforeUnmount() {
    this.$_resizeLeaveBehavior();
  },
  beforeUpdate: function beforeUpdate() {
    this.itemRefs = [];
  },
  // updated() {
  //   console.log('update');
  //   console.log(this.items);
  //   console.log(this.itemRefs);
  // },
  methods: {
    $_onScroll: function $_onScroll(_ref)
    /* istanbul ignore next */
    {
      var scrollLeft = _ref.scrollLeft;

      if (scrollLeft > 0) {
        this.maskStartShown = true;
      } else {
        this.maskStartShown = false;
      }

      if (scrollLeft >= this.$refs.scroller.contentW - this.$refs.scroller.containerW) {
        this.maskEndShown = false;
      } else {
        this.maskEndShown = true;
      }

      this.maskEndShown = true;
    },
    $_onClick: function $_onClick(item, index) {
      if (item.disabled) {
        return;
      }

      this.$emit('change', item, index, this.currentIndex);
      this.currentName = item.name;
      this.$emit('input', item.name);
    },
    $_resizeEnterBehavior: function $_resizeEnterBehavior() {
      var _this3 = this;

      window.addEventListener('resize', this.reflow2);
      this.reflow();
      /* istanbul ignore next */

      if (this.immediate) {
        nextTick(function () {
          _this3.$emit('change', _this3.items[_this3.currentIndex], _this3.currentIndex);
        });
      }
    },
    $_resizeLeaveBehavior: function $_resizeLeaveBehavior() {
      window.removeEventListener('resize', this.reflow2);
    },
    reflow: function reflow() {
      var _this4 = this;

      /* istanbul ignore next */
      if (!this.itemRefs || this.itemRefs.length === 0) {
        return;
      }

      var wrapperReact = this.$refs.wrapper.getBoundingClientRect();
      this.wrapperW = wrapperReact.width; // this.contentW = contentWidth;
      //dky 

      this.contentW = this.wrapperW;
      var contentWidth = 0;

      for (var i = 0, len = this.items.length; i < len; i++) {
        var _this$itemRefs$i$getB = this.itemRefs[i].getBoundingClientRect(),
            width = _this$itemRefs$i$getB.width;

        contentWidth += width;
      }

      this.contentW = Math.floor(contentWidth);
      this.$refs.scroller.reflowScroller();
      nextTick(function () {
        _this4.reflowCalculate();
      });
    },
    reflow2: function reflow2() {
      var _this5 = this;

      /* istanbul ignore next */
      if (!this.itemRefs || this.itemRefs.length === 0) {
        return;
      }

      var wrapperReact = this.$refs.wrapper.getBoundingClientRect();
      this.wrapperW = wrapperReact.width; //dky 

      this.contentW = this.wrapperW;
      nextTick(function () {
        var contentWidth = 0;

        for (var i = 0, len = _this5.items.length; i < len; i++) {
          var _this5$itemRefs$i$get = _this5.itemRefs[i].getBoundingClientRect(),
              width = _this5$itemRefs$i$get.width;

          contentWidth += width;
        }

        _this5.contentW = Math.floor(contentWidth);

        _this5.$refs.scroller.reflowScroller();

        _this5.reflowCalculate();
      });
    },
    reflowCalculate: function reflowCalculate() {
      /* istanbul ignore next */
      if (!this.itemRefs || !this.itemRefs[this.currentIndex]) {
        return;
      }

      var target = this.itemRefs[this.currentIndex];
      var targetContent = target.getElementsByClassName('fm-tab-bar-item-content')[0];

      if (targetContent) {
        this.inkWidth = targetContent.offsetWidth * this.inkLength / 100;
      } else {
        this.inkWidth = target.offsetWidth * this.inkLength / 100;
      }

      this.inkPos = target.offsetLeft + (target.offsetWidth - this.inkWidth) / 2;
      var prevTarget = this.itemRefs[this.currentIndex - 1];
      var nextTarget = this.itemRefs[this.currentIndex + 1];

      if (!prevTarget) {
        this.$refs.scroller.scrollTo(0, 0, true);
        return;
      }
      /* istanbul ignore next */


      if (!nextTarget) {
        this.$refs.scroller.scrollTo(this.contentW, 0, true);
        return;
      }

      var wrapperRect = this.$refs.wrapper.getBoundingClientRect();
      var prevTargetRect = prevTarget.getBoundingClientRect();
      var nextTargetRect = nextTarget.getBoundingClientRect();
      /* istanbul ignore next */

      if (prevTargetRect && prevTargetRect.left < wrapperRect.left) {
        this.$refs.scroller.scrollTo(prevTarget.offsetLeft, 0, true);
      } else if (nextTargetRect && nextTargetRect.right > wrapperRect.right) {
        this.$refs.scroller.scrollTo(nextTarget.offsetLeft + nextTarget.offsetWidth - this.wrapperW, 0, true);
      }
    },
    setItemRef: function setItemRef(el) {
      if (el) {
        this.itemRefs.push(el);
      }
    }
  }
};

const _hoisted_1$y = {
  class: "fm-tab-bar-inner",
  ref: "wrapper"
};
const _hoisted_2$p = { class: "fm-tab-bar-start" };
const _hoisted_3$h = { class: "fm-tab-bar-end" };
const _hoisted_4$e = {
  key: 0,
  class: "fm-tab-bar-item-content fm-tab-bar-item-line"
};
const _hoisted_5$a = { class: "fm-tab-bar-icon" };
const _hoisted_6$9 = {
  key: 2,
  class: "fm-tab-bar-info fm-tab-bar-dot"
};
const _hoisted_7$5 = {
  key: 3,
  class: "fm-tab-bar-info"
};
const _hoisted_8$5 = { class: "fm-tab-bar-icon" };
const _hoisted_9$5 = {
  key: 2,
  class: "fm-tab-bar-info fm-tab-bar-dot"
};
const _hoisted_10$3 = {
  key: 3,
  class: "fm-tab-bar-info"
};
const _hoisted_11$3 = {
  key: 3,
  class: "fm-tab-bar-item-content fm-tab-bar-item-line"
};

function render$P(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");
  const _component_fm_scroll_view = resolveComponent("fm-scroll-view");

  return (openBlock(), createBlock("nav", {
    class: ["fm-tab-bar", [
 $props.className,
 $options.scrollable?'fm-tab-bar-scrollable':null,
 $props.type === 'nav'?'fm-tab-bar-nav':null
 ]]
  }, [
    createVNode("div", _hoisted_1$y, [
      ($options.scrollable)
        ? (openBlock(), createBlock(Fragment, { key: 0 }, [
            withDirectives(createVNode("div", _hoisted_2$p, null, 512 /* NEED_PATCH */), [
              [vShow, $data.maskStartShown]
            ]),
            withDirectives(createVNode("div", _hoisted_3$h, null, 512 /* NEED_PATCH */), [
              [vShow, $data.maskEndShown]
            ])
          ], 64 /* STABLE_FRAGMENT */))
        : createCommentVNode("v-if", true),
      createVNode(_component_fm_scroll_view, {
        ref: "scroller",
        "scrolling-x": $options.scrollable,
        "scrolling-y": false,
        key: $data.scrollerTmpKey,
        onScroll: $options.$_onScroll
      }, {
        default: withCtx(() => [
          createVNode("div", {
            class: "fm-tab-bar-list",
            style: {width: $data.contentW + 'px'}
          }, [
            (openBlock(true), createBlock(Fragment, null, renderList($props.items, (item, index) => {
              return (openBlock(), createBlock("a", {
                class: ["fm-tab-bar-item", {
            'is-active': $data.currentName === item.name,
            'is-disabled': !!item.disabled
          }],
                ref: $options.setItemRef,
                onClick: $event => ($options.$_onClick(item, index))
              }, [
                renderSlot(_ctx.$slots, "item", {
                  item: item,
                  items: $props.items,
                  index: index,
                  currentName: $data.currentName
                }, () => [
                  ($props.type === 'line')
                    ? (openBlock(), createBlock("div", _hoisted_4$e, [
                        createVNode("span", {
                          textContent: toDisplayString(item.title)
                        }, null, 8 /* PROPS */, ["textContent"])
                      ]))
                    : ($props.type === 'tab')
                      ? (openBlock(), createBlock("div", {
                          key: 1,
                          class: ["fm-tab-bar-item-content fm-tab-bar-item-tab", {'fm-tab-bar-item-tab-active': item.name === $data.currentName }]
                        }, [
                          createVNode("div", _hoisted_5$a, [
                            (item.name !== $data.currentName || !item.activeIcon)
                              ? (openBlock(), createBlock(_component_fm_icon, {
                                  key: 0,
                                  name: item.icon,
                                  color: item.iconColor,
                                  classPrefix: item.iconPrefix
                                }, null, 8 /* PROPS */, ["name", "color", "classPrefix"]))
                              : createCommentVNode("v-if", true),
                            (item.activeIcon && item.name === $data.currentName)
                              ? (openBlock(), createBlock(_component_fm_icon, {
                                  key: 1,
                                  name: item.activeIcon,
                                  color: item.activeIconColor,
                                  classPrefix: item.iconPrefix
                                }, null, 8 /* PROPS */, ["name", "color", "classPrefix"]))
                              : createCommentVNode("v-if", true),
                            (item.dot)
                              ? (openBlock(), createBlock("div", _hoisted_6$9))
                              : createCommentVNode("v-if", true),
                            (item.badge)
                              ? (openBlock(), createBlock("div", _hoisted_7$5, toDisplayString(item.badge), 1 /* TEXT */))
                              : createCommentVNode("v-if", true)
                          ]),
                          createVNode("div", {
                            class: "text",
                            textContent: toDisplayString(item.title)
                          }, null, 8 /* PROPS */, ["textContent"])
                        ], 2 /* CLASS */))
                      : ($props.type === 'nav')
                        ? (openBlock(), createBlock("div", {
                            key: 2,
                            class: ["fm-tab-bar-item-content fm-tab-bar-item-nav", {'fm-tab-bar-item-nav-active': item.name === $data.currentName }]
                          }, [
                            createVNode("div", _hoisted_8$5, [
                              (item.name !== $data.currentName || !item.activeIcon)
                                ? (openBlock(), createBlock(_component_fm_icon, {
                                    key: 0,
                                    name: item.icon,
                                    color: item.iconColor,
                                    classPrefix: item.iconPrefix
                                  }, null, 8 /* PROPS */, ["name", "color", "classPrefix"]))
                                : createCommentVNode("v-if", true),
                              (item.activeIcon && item.name === $data.currentName)
                                ? (openBlock(), createBlock(_component_fm_icon, {
                                    key: 1,
                                    name: item.activeIcon,
                                    color: item.activeIconColor,
                                    classPrefix: item.iconPrefix
                                  }, null, 8 /* PROPS */, ["name", "color", "classPrefix"]))
                                : createCommentVNode("v-if", true),
                              (item.dot)
                                ? (openBlock(), createBlock("div", _hoisted_9$5))
                                : createCommentVNode("v-if", true),
                              (item.badge)
                                ? (openBlock(), createBlock("div", _hoisted_10$3, toDisplayString(item.badge), 1 /* TEXT */))
                                : createCommentVNode("v-if", true)
                            ]),
                            createVNode("div", {
                              class: "text",
                              textContent: toDisplayString(item.title)
                            }, null, 8 /* PROPS */, ["textContent"])
                          ], 2 /* CLASS */))
                        : (openBlock(), createBlock("div", _hoisted_11$3, [
                            createVNode("span", {
                              textContent: toDisplayString(item.title)
                            }, null, 8 /* PROPS */, ["textContent"])
                          ]))
                ])
              ], 10 /* CLASS, PROPS */, ["onClick"]))
            }), 256 /* UNKEYED_FRAGMENT */))
          ], 4 /* STYLE */),
          ($props.type === 'line' && $props.border)
            ? (openBlock(), createBlock("span", {
                key: 0,
                class: ["fm-tab-bar-ink", {
          'is-disabled': $options.currentTab && $options.currentTab.disabled
        }],
                style: {
          width: $data.inkWidth + 'px',
          transform: 'translateX(' + $data.inkPos + 'px)',
        }
              }, null, 6 /* CLASS, STYLE */))
            : createCommentVNode("v-if", true)
        ]),
        _: 1 /* STABLE */
      }, 8 /* PROPS */, ["scrolling-x", "onScroll"])
    ], 512 /* NEED_PATCH */)
  ], 2 /* CLASS */))
}

script$P.render = render$P;
script$P.__file = "packages/tab-bar/src/index.vue";

script$P.install = function (app) {
  app.component(script$P.name, script$P);
};

var _components$z;
var script$Q = {
  name: 'fm-tabs',
  components: (_components$z = {}, _components$z[script$P.name] = script$P, _components$z[script.name] = script, _components$z),
  props: {
    value: String,
    border: {
      type: Boolean,
      "default": true
    },
    inkLength: {
      type: Number,
      "default": 100
    },
    immediate: Boolean,
    animated: {
      type: Boolean,
      "default": false
    },
    type: {
      type: String,
      "default": 'line'
    },
    fill: {
      type: Boolean,
      "default": false
    },
    lazyRender: {
      type: Boolean,
      "default": true
    }
  },
  data: function data() {
    return {
      currentName: this.value,
      prevIndex: 0,
      panes: [],
      tabBarClassName: 'fm-tab-bar-tabs'
    };
  },
  watch: {
    value: function value(val) {
      if (val !== this.currentName) {
        this.currentName = val;
      }
    }
  },
  computed: {
    menus: function menus() {
      return this.panes.map(function (pane) {
        return {
          name: pane.name,
          title: pane.title,
          disabled: pane.disabled,
          icon: pane.icon,
          iconColor: pane.iconColor,
          dot: pane.dot,
          badge: pane.badge,
          activeIcon: pane.activeIcon,
          activeIconColor: pane.activeIconColor,
          iconPrefix: pane.iconPrefix
        };
      });
    },
    currentIndex: function currentIndex() {
      for (var i = 0, len = this.menus.length; i < len; i++) {
        if (this.menus[i].name === this.currentName) {
          return i;
        }
      }

      return 0;
    }
  },
  provide: function provide() {
    return {
      rootTabs: this
    };
  },
  mounted: function mounted() {
    if (!this.currentName && this.menus.length) {
      this.currentName = this.menus[0].name;
    }
  },
  methods: {
    //tab
    $_handleTabClick: function $_handleTabClick(tab, index, prevIndex) {
      this.currentName = tab.name;
      this.prevIndex = prevIndex;
      this.$emit('input', tab.name);
      this.$emit('change', tab);
    },
    //tab
    $_addPane: function $_addPane(pane) {
      if (this.panes.indexOf(pane) === -1) {
        this.panes.push(pane);
      }
    },
    $_removePane: function $_removePane(pane) {
      var index = this.panes.indexOf(pane);

      if (index >= 0) {
        this.panes.splice(index, 1);
      }
    },
    resize: function resize() {
      this.$refs.tabBar.reflow();
    }
  }
};

const _hoisted_1$z = {
  key: 0,
  class: "fm-tabs-content"
};
const _hoisted_2$q = {
  key: 1,
  class: "fm-tabs-content"
};

function render$Q(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_tab_bar = resolveComponent("fm-tab-bar");

  return (openBlock(), createBlock("div", {
    class: ["fm-tabs", {'fm-tabs-fill': $props.fill || $props.type === 'nav', 'fm-tabs-nav': $props.type === 'nav'}]
  }, [
    ($props.type === 'nav')
      ? (openBlock(), createBlock("div", _hoisted_1$z, [
          renderSlot(_ctx.$slots, "default")
        ]))
      : createCommentVNode("v-if", true),
    createVNode(_component_fm_tab_bar, {
      ref: "tabBar",
      items: $options.menus,
      value: $data.currentName,
      border: $props.type === 'line' && $props.border,
      "ink-length": $props.inkLength,
      immediate: $props.immediate,
      className: $data.tabBarClassName,
      type: $props.type,
      onChange: $options.$_handleTabClick
    }, {
      item: withCtx((props) => [
        renderSlot(_ctx.$slots, "title", {
          item: props.item,
          items: props.items,
          index: props.index,
          currentName: props.currentName
        })
      ]),
      _: 1 /* STABLE */
    }, 8 /* PROPS */, ["items", "value", "border", "ink-length", "immediate", "className", "type", "onChange"]),
    ($props.type !== 'nav')
      ? (openBlock(), createBlock("div", _hoisted_2$q, [
          renderSlot(_ctx.$slots, "default")
        ]))
      : createCommentVNode("v-if", true)
  ], 2 /* CLASS */))
}

script$Q.render = render$Q;
script$Q.__file = "packages/tabs/src/index.vue";

script$Q.install = function (app) {
  app.component(script$Q.name, script$Q);
};

var script$R = {
  name: 'fm-tag',
  props: {
    closeable: {
      type: Boolean,
      "default": false
    },
    type: {
      type: String,
      "default": 'default'
    },
    className: {
      type: String
    },
    color: {
      type: String
    },
    sign: {
      type: Boolean,
      "default": false
    }
  },
  data: function data() {
    return {
      typeClass: '',
      signClass: ''
    };
  },
  mounted: function mounted() {
    this.typeClass = 'fm-tag-' + this.type;
    this.signClass = this.sign ? 'fm-tag-sign' : '';
  },
  watch: {
    type: {
      handler: function handler(newVal) {
        this.typeClass = 'fm-tag-' + newVal;
      }
    },
    sign: {
      handler: function handler(newVal) {
        this.signClass = newVal ? 'fm-tag-sign' : '';
      }
    }
  },
  computed: {
    styleObject: function styleObject() {
      var style = {
        background: this.color
      };
      return style;
    }
  },
  methods: {
    hexToRgba: function hexToRgba(hex, opacity) {
      if (opacity === void 0) {
        opacity = 1;
      }

      var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
      var sColor = hex.toLowerCase();

      if (sColor && reg.test(sColor)) {
        if (sColor.length === 4) {
          var sColorNew = '#';

          for (var i = 1; i < 4; i += 1) {
            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
          }

          sColor = sColorNew;
        } //


        var sColorChange = [];

        for (var i = 1; i < 7; i += 2) {
          sColorChange.push(parseInt('0x' + sColor.slice(i, i + 2)));
        }

        return 'RGB(' + sColorChange.join(',') + ',' + opacity + ')';
      } else {
        return sColor;
      }
    }
  }
};

function render$R(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock(Transition, {
    name: $props.closeable ? 'fm-fade' : null
  }, {
    "default": withCtx(function () {
      return [createVNode("span", {
        "class": ["fm-tag", [$props.className, $data.typeClass, $data.signClass]],
        style: $options.styleObject
      }, [renderSlot(_ctx.$slots, "default")], 6
      /* CLASS, STYLE */
      )];
    }),
    _: 3
    /* FORWARDED */

  }, 8
  /* PROPS */
  , ["name"]);
}

script$R.render = render$R;
script$R.__file = "packages/tag/src/index.vue";

script$R.install = function (app) {
  app.component(script$R.name, script$R);
};

var script$S = {
  name: 'fm-tags',
  props: {
    modelValue: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    checkable: {
      type: Boolean,
      "default": false
    },
    addable: {
      type: Boolean,
      "default": false
    },
    className: {
      type: String
    }
  },
  data: function data() {
    return {
      addTagValue: '',
      placeholder: '',
      addInput: false
    };
  },
  computed: {
    innerValue: function innerValue() {
      if (this.checkable && this.modelValue && this.modelValue.length) {
        this.modelValue.forEach(function (tag) {
          if (tag.hasOwnProperty('checkable')) return;
          tag.checkable = true;
        });
      }

      return this.modelValue;
    }
  },
  mounted: function mounted() {// this.$_tagInit();
  },
  methods: {
    //
    $_addHander: function $_addHander() {
      var _this = this;

      if (!this.addable) return;
      this.addInput = true;
      this.addTagValue = '';
      setTimeout(function () {
        _this.$refs.addInputText.focus();
      });
    },
    //tag
    $_closeHandler: function $_closeHandler(e, tag, index) {
      e.preventDefault();
      this.modelValue.splice(index, 1);
      this.$emit('closeTag', tag);
      this.$emit('tagChange', this.modelValue);
    },
    //
    $_addInputBlur: function $_addInputBlur() {
      if (!this.addable || !this.addInput) return;

      if (this.addTagValue) {
        var tag = {
          text: this.addTagValue,
          closable: true
        };
        this.modelValue.push(tag);
        this.$emit('tagChange', this.modelValue);
      }

      this.addInput = false;
    },
    //tag
    $_clickHandler: function $_clickHandler(e, tag) {
      e.preventDefault();
      if (!this.checkable || !tag.checkable) return;

      if (tag.hasOwnProperty('checked')) {
        tag.checked = !tag.checked;
      } else {
        tag.checked = true;
      }

      this.$emit('tagCheckedChange', tag);
      this.$emit('checkedChange', this.modelValue);
      this.$forceUpdate();
    }
  }
};

const _hoisted_1$A = { class: "fm-tags-item-container" };
const _hoisted_2$r = { class: "tag-box" };
const _hoisted_3$i = {
  key: 0,
  class: "tag-delete"
};
const _hoisted_4$f = /*#__PURE__*/createVNode("span", { class: "fm-tag-add-text" }, "", -1 /* HOISTED */);
const _hoisted_5$b = {
  key: 1,
  class: "fm-tag-input-box"
};

function render$S(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");

  return (openBlock(), createBlock("div", {
    class: ["fm-tags", [
  $props.className,
  $props.checkable?'fm-tags-checkable':''
  ]]
  }, [
    createVNode("ul", _hoisted_1$A, [
      (openBlock(true), createBlock(Fragment, null, renderList($options.innerValue, (tag, index) => {
        return (openBlock(), createBlock("li", {
          key: index,
          class: ["fm-tag-item", [
        tag.type?' fm-tag-item-' + tag.type:'',
        ($props.checkable && tag.checked) ? 'fm-tag-item-checked': '',
        ($props.checkable && tag.checkable) ? 'fm-tag-item-checkable' : '',
        ($props.checkable && !tag.checkable) ? 'fm-tag-item-checkdisabled': '',
        tag.color? 'fm-tag-item-has-color' : ''
      ]],
          style: {'background': tag.color},
          onClick: $event => ($options.$_clickHandler($event,tag))
        }, [
          createVNode("span", _hoisted_2$r, toDisplayString(tag.text), 1 /* TEXT */),
          (tag.closable)
            ? (openBlock(), createBlock("span", _hoisted_3$i, [
                createVNode(_component_fm_icon, {
                  name: "s-clear",
                  onClick: $event => ($options.$_closeHandler($event,tag,index))
                }, null, 8 /* PROPS */, ["onClick"])
              ]))
            : createCommentVNode("v-if", true)
        ], 14 /* CLASS, STYLE, PROPS */, ["onClick"]))
      }), 128 /* KEYED_FRAGMENT */)),
      ($props.addable && !$data.addInput)
        ? (openBlock(), createBlock("li", {
            key: 0,
            class: "fm-tag-item fm-tag-add-button",
            onClick: _cache[1] || (_cache[1] = $event => ($options.$_addHander()))
          }, [
            createVNode(_component_fm_icon, { name: "s-plus" }),
            _hoisted_4$f
          ]))
        : createCommentVNode("v-if", true),
      ($props.addable && $data.addInput)
        ? (openBlock(), createBlock("li", _hoisted_5$b, [
            withDirectives(createVNode("input", {
              type: "text",
              class: "fm-form-control",
              onBlur: _cache[2] || (_cache[2] = $event => ($options.$_addInputBlur($event))),
              ref: "addInputText",
              "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => ($data.addTagValue = $event)),
              placeholder: $data.placeholder
            }, null, 40 /* PROPS, HYDRATE_EVENTS */, ["placeholder"]), [
              [vModelText, $data.addTagValue]
            ])
          ]))
        : createCommentVNode("v-if", true)
    ])
  ], 2 /* CLASS */))
}

script$S.render = render$S;
script$S.__file = "packages/tags/src/index.vue";

script$S.install = function (app) {
  app.component(script$S.name, script$S);
};

var DATE = 'date';
var NUMBER = 'number';
var ENUM = 'enum';
var BOOLEAN = 'boolean';
var TRUR = '';
var FALSE = '';
var EMPTYSTRING = '';

function formatNumber(value, formatOption) {
  var _formatOption$enableT = formatOption.enableThousands,
      enableThousands = _formatOption$enableT === void 0 ? true : _formatOption$enableT,
      _formatOption$prefix = formatOption.prefix,
      prefix = _formatOption$prefix === void 0 ? '' : _formatOption$prefix,
      _formatOption$suffix = formatOption.suffix,
      suffix = _formatOption$suffix === void 0 ? '' : _formatOption$suffix,
      _formatOption$precisi = formatOption.precision,
      precision = _formatOption$precisi === void 0 ? -1 : _formatOption$precisi;
  value = precision > 0 ? Number.parseFloat(value).toFixed(precision) : value;
  value = enableThousands ? toThousands(value) : value;
  value = "" + prefix + value + suffix;
  return value;
}

function formatDate(value, formatOption) {
  var _formatOption$dateFor = formatOption.dateFormat,
      dateFormat = _formatOption$dateFor === void 0 ? 'YYYY-MM-DD' : _formatOption$dateFor;
  return format(value, dateFormat);
}

function formatBoolean(value, formatOption) {
  var _formatOption$StringO = formatOption.StringOfTrue,
      StringOfTrue = _formatOption$StringO === void 0 ? TRUR : _formatOption$StringO,
      _formatOption$StringO2 = formatOption.StringOfFalse,
      StringOfFalse = _formatOption$StringO2 === void 0 ? FALSE : _formatOption$StringO2;

  if (value === true) {
    return StringOfTrue;
  } else if (value === false) {
    return StringOfFalse;
  } else {
    return EMPTYSTRING;
  }
}

function formatString(value) {
  return value;
}

function formatEnum(value, formatOption) {
  var _formatOption$enumDat = formatOption.enumData,
      enumData = _formatOption$enumDat === void 0 ? [] : _formatOption$enumDat,
      _formatOption$textFie = formatOption.textField,
      textField = _formatOption$textFie === void 0 ? 'name' : _formatOption$textFie,
      _formatOption$valueFi = formatOption.valueField,
      valueField = _formatOption$valueFi === void 0 ? 'value' : _formatOption$valueFi;
  var target = enumData.find(function (item) {
    return item[valueField] === value;
  });
  return target ? target[textField] : '';
}

function toThousands(value) {
  if (!value) {
    return '';
  }

  var _String$split = String(value).split('.'),
      integer = _String$split[0],
      decimal = _String$split[1];

  integer = String(integer).split('').reduce(function (pre, cur, index) {
    return index % 3 === 0 ? pre + ',' + cur : pre + cur;
  });
  decimal = String(decimal).split('').reduce(function (pre, cur, index) {
    return index % 3 === 0 ? pre + ',' + cur : pre + cur;
  });
  return integer + "." + decimal;
}

function getformater(type) {
  switch (type) {
    case NUMBER:
      return formatNumber;

    case DATE:
      return formatDate;

    case BOOLEAN:
      return formatBoolean;

    case ENUM:
      return formatEnum;

    default:
      return formatString;
  }
}

var script$T = {
  name: 'fm-text',
  props: {
    label: String,
    type: {
      type: String,
      "default": 'string'
    },
    // eslint-disable-next-line vue/require-prop-type-constructor
    format: String | Object,
    // eslint-disable-next-line vue/require-prop-type-constructor
    value: String | Date | Number | Boolean
  },
  computed: {
    innnerValue: function innnerValue() {
      return this.getInnerValue();
    }
  },
  methods: {
    getInnerValue: function getInnerValue() {
      if (!this.format) {
        return this.value;
      }

      if (typeof this.format === 'function') {
        return this.format(this.value);
      } else {
        var formater = getformater(this.type);
        return formater(this.value, this.format);
      }
    }
  }
};

var _hoisted_1$B = {
  "class": "fm-text"
};
var _hoisted_2$s = {
  "class": "label"
};
var _hoisted_3$j = {
  "class": "text"
};
function render$T(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$B, [createVNode("div", _hoisted_2$s, toDisplayString($props.label), 1
  /* TEXT */
  ), createVNode("div", _hoisted_3$j, toDisplayString($options.innnerValue), 1
  /* TEXT */
  )]);
}

script$T.render = render$T;
script$T.__file = "packages/text/src/index.vue";

script$T.install = function (app) {
  app.component(script$T.name, script$T);
};

var script$U = defineComponent({
  name: 'fm-toast',
  props: {
    show: {
      type: Boolean,
      "default": false
    },
    type: {
      type: String,
      "default": 'info',
      validator: function validator(value) {
        // 
        return ['success', 'warning', 'error', 'info', 'default', "loading"].indexOf(value) !== -1;
      }
    },
    position: {
      type: String,
      "default": 'middle'
    },
    message: String,
    duration: {
      type: Number,
      "default": 3000
    },
    className: String
  } // data() {
  //   return {
  //     visible: false
  //   }
  // },
  // beforeDestroy() {
  //   if (this.$_timer) {
  //     clearTimeout(this.$_timer);
  //   }
  // },
  // deactivated() {
  //   if (this.$_timer) {
  //     clearTimeout(this.$_timer);
  //   }
  // },
  // methods: {
  //   showToast() {
  //     this.visible = true;
  //     this.fire();
  //   },
  //   hideToast() {
  //     this.visible = false;
  //   },
  //   /**
  //    * toast
  //    */
  //   fire() {
  //     if (this.$_timer) {
  //       clearTimeout(this.$_timer)
  //     }
  //     if (this.visible && this.duration) {
  //       this.$_timer = setTimeout(() => {
  //         this.hideToast();
  //       }, this.duration)
  //     }
  //   }
  // }

});

const _hoisted_1$C = {
  key: 1,
  class: "fm-toast-loading-icon"
};
const _hoisted_2$t = /*#__PURE__*/createVNode("svg", {
  viewBox: "25 25 50 50",
  class: "fm-toast-loading-icon-circular",
  style: {"color":"#fff"}
}, [
  /*#__PURE__*/createVNode("circle", {
    cx: "50",
    cy: "50",
    r: "20",
    fill: "none"
  })
], -1 /* HOISTED */);
const _hoisted_3$k = { class: "fm-toast-text" };

function render$U(_ctx, _cache, $props, $setup, $data, $options) {
  return (_ctx.show)
    ? (openBlock(), createBlock("div", {
        key: 0,
        class: ["fm-toast", ['fm-toast-' + this.type, 'fm-toast-' + this.position, _ctx.className]]
      }, [
        (this.type == 'success' || this.type == 'error' || this.type == 'warning' || this.type == 'info')
          ? (openBlock(), createBlock("span", {
              key: 0,
              class: ["fm-toast-icon fm-icon", {
      'fm-icon-successfulhints': this.type == 'success',
      'fm-icon-failureprompt': this.type == 'error',
      'fm-icon-warningmessage': (this.type == 'warning' || this.type == 'info')
    }]
            }, null, 2 /* CLASS */))
          : createCommentVNode("v-if", true),
        (this.type == 'loading')
          ? (openBlock(), createBlock("span", _hoisted_1$C, [
              _hoisted_2$t
            ]))
          : createCommentVNode("v-if", true),
        createVNode("span", _hoisted_3$k, toDisplayString(_ctx.message), 1 /* TEXT */)
      ], 2 /* CLASS */))
    : createCommentVNode("v-if", true)
}

script$U.render = render$U;
script$U.__file = "packages/toast/src/toast.vue";

var instance$3;
var timer$1;

function defaultOptions$3() {
  return {
    type: 'default',
    message: '',
    duration: 3000,
    position: 'middle'
  };
}

function parseOptions$3(message) {
  return isObject(message) ? message : {
    message: message
  };
}

var initInstance$3 = function initInstance() {

  var _mountComponent = mountComponent({
    setup: function setup() {
      var _usePopupState = usePopupState(),
          state = _usePopupState.state,
          toggle = _usePopupState.toggle;

      return function () {
        return createVNode(script$U, Object.assign(Object.assign({}, state), {
          'onUpdate:show': toggle
        }), null);
      };
    }
  });

  instance$3 = _mountComponent.instance;
};

function Toast(options) {
  if (!inBrowser) {
    return;
  }

  if (!instance$3) {
    initInstance$3();
  }

  options = Object.assign(Object.assign({}, Toast.currentOptions), parseOptions$3(options));
  instance$3.open(options);
  clearTimeout(timer$1);

  if (options.duration > 0) {
    timer$1 = setTimeout(Toast.clear, options.duration);
  }

  return instance$3;
}

Toast.clear = function () {
  if (instance$3) {
    instance$3.toggle(false);
  }
};

Toast.info = function (options) {
  Toast.resetDefaultOptions();
  return Toast(Object.assign(Object.assign({}, parseOptions$3(options)), {
    type: 'info'
  }));
};

Toast.success = function (options) {
  Toast.resetDefaultOptions();
  return Toast(Object.assign(Object.assign({}, parseOptions$3(options)), {
    type: 'success'
  }));
};

Toast.error = function (options) {
  Toast.resetDefaultOptions();
  return Toast(Object.assign(Object.assign({}, parseOptions$3(options)), {
    type: 'error'
  }));
};

Toast.warning = function (options) {
  Toast.resetDefaultOptions();
  return Toast(Object.assign(Object.assign({}, parseOptions$3(options)), {
    type: 'warning'
  }));
};

Toast.loading = function (options) {
  Toast.resetDefaultOptions();
  return Toast(Object.assign(Object.assign({}, parseOptions$3(options)), {
    type: 'loading',
    duration: 0
  }));
};

Toast.currentOptions = defaultOptions$3();

Toast.setDefaultOptions = function (options) {
  Object.assign(Toast.currentOptions, options);
};

Toast.resetDefaultOptions = function () {
  Toast.currentOptions = defaultOptions$3();
};

Toast.install = function (app) {
  app.component(script$U.name, script$U);
  app.config.globalProperties.$toast = Toast;
};

Toast.Component = script$U;

var _components$A;
var script$V = {
  name: 'fm-steps',
  components: (_components$A = {}, _components$A[script.name] = script, _components$A),
  props: {
    steps: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    direction: {
      type: String,
      "default": 'horizontal'
    },
    current: {
      type: Number,
      "default": 0,
      validator: function validator(val) {
        return val >= 0;
      }
    },
    fill: {
      type: Boolean,
      "default": false
    }
  }
};

const _hoisted_1$D = { class: "fm-steps-list" };
const _hoisted_2$u = { class: "item-icon" };
const _hoisted_3$l = {
  key: 1,
  class: "fm-icon fm-icon-s-success"
};
const _hoisted_4$g = {
  key: 2,
  class: "item-icon-text"
};
const _hoisted_5$c = { class: "item-text" };
const _hoisted_6$a = { class: "name" };
const _hoisted_7$6 = {
  key: 0,
  class: "desc"
};
const _hoisted_8$6 = {
  key: 1,
  class: "sub-desc"
};
const _hoisted_9$6 = {
  key: 0,
  class: "item-line"
};
const _hoisted_10$4 = /*#__PURE__*/createVNode("span", { class: "line-inner" }, null, -1 /* HOISTED */);

function render$V(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");

  return (openBlock(), createBlock("div", {
    class: ["fm-steps", {
  'fm-steps-vertical': $props.direction == 'vertical',
  'fm-steps-horizontal': $props.direction == 'horizontal',
  'fm-steps-fill': $props.fill
}]
  }, [
    createVNode("ul", _hoisted_1$D, [
      (openBlock(true), createBlock(Fragment, null, renderList($props.steps, (step, index) => {
        return (openBlock(), createBlock(Fragment, null, [
          createVNode("li", {
            class: ["fm-steps-item", {
        'fm-steps-item-finish': index < $props.current,
        'fm-steps-item-current': index == $props.current
      }]
          }, [
            createVNode("div", _hoisted_2$u, [
              (step.icon)
                ? (openBlock(), createBlock(_component_fm_icon, {
                    key: 0,
                    name: step.icon
                  }, null, 8 /* PROPS */, ["name"]))
                : (index < $props.current)
                  ? (openBlock(), createBlock("span", _hoisted_3$l))
                  : (openBlock(), createBlock("span", _hoisted_4$g, toDisplayString(index+1), 1 /* TEXT */))
            ]),
            createVNode("div", _hoisted_5$c, [
              renderSlot(_ctx.$slots, "default", {
                step: step,
                index: index,
                currentIndex: $props.current
              }, () => [
                createVNode("div", _hoisted_6$a, toDisplayString(step.name), 1 /* TEXT */),
                (step.desc)
                  ? (openBlock(), createBlock("div", _hoisted_7$6, toDisplayString(step.desc), 1 /* TEXT */))
                  : createCommentVNode("v-if", true),
                (step.subDesc)
                  ? (openBlock(), createBlock("div", _hoisted_8$6, toDisplayString(step.subDesc), 1 /* TEXT */))
                  : createCommentVNode("v-if", true)
              ])
            ]),
            ($props.direction == 'vertical' && index < ($props.steps.length - 1))
              ? (openBlock(), createBlock("div", _hoisted_9$6))
              : createCommentVNode("v-if", true)
          ], 2 /* CLASS */),
          ($props.direction == 'horizontal' && index < ($props.steps.length - 1))
            ? (openBlock(), createBlock("li", {
                key: 0,
                class: ["fm-steps-line", {
      'fm-steps-line-horizontal':$props.direction == 'horizontal',
      'fm-steps-line-finish':index < $props.current}]
              }, [
                _hoisted_10$4
              ], 2 /* CLASS */))
            : createCommentVNode("v-if", true)
        ], 64 /* STABLE_FRAGMENT */))
      }), 256 /* UNKEYED_FRAGMENT */))
    ])
  ], 2 /* CLASS */))
}

script$V.render = render$V;
script$V.__file = "packages/steps/src/index.vue";

script$V.install = function (app) {
  app.component(script$V.name, script$V);
};

var script$W = {
  name: 'fm-swipecell',
  props: {
    name: {
      type: [Number, String],
      "default": ''
    },
    disabled: {
      type: Boolean,
      "default": false
    },
    leftWidth: {
      type: [Number, String],
      "default": 'auto'
    },
    rightWidth: {
      type: [Number, String],
      "default": 'auto'
    },
    stopPropagation: {
      type: Boolean,
      "default": true
    },
    beforeClose: {
      type: Function
    }
  },
  emits: ['click', 'open', 'close'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit,
        slots = _ref.slots;
    var instance = getCurrentInstance();
    var innerOffsetX = ref(0);
    var root = ref();
    var leftEl = ref();
    var rightEl = ref();
    var leftElWidth = 0;
    var rightElWidth = 0;

    var setSwipeWidth = function setSwipeWidth() {
      var LeftElRect = getRectByRef(leftEl);
      var rightElRect = getRectByRef(rightEl);
      leftElWidth = isNumber(props.leftWidth) ? props.leftWidth : LeftElRect != null && LeftElRect.width ? LeftElRect.width : 0;
      rightElWidth = isNumber(props.rightWidth) ? props.rightWidth : rightElRect != null && rightElRect.width ? rightElRect.width : 0;
    };

    var open = function open(type) {
      emit('open', _extends({}, offset));
    };

    var close = function close(type) {
      closed.value = false;
      innerOffsetX.value = 0;
      resetTouchStatus();
      emit('close', type);
    };

    var handleBeforeClose = function handleBeforeClose(type) {
      if ((dragStatus == null ? void 0 : dragStatus.value) === DragStatus.NotStarted) {
        return;
      }

      if (!props.beforeClose || !(props.beforeClose instanceof Function)) {
        close(type);
        return;
      }

      var result = props.beforeClose(type);

      if (result instanceof Promise) {
        result.then(function (res) {
          close(type);
        });
      } else {
        close(type);
      }
    };

    useClickAway(root, function () {
      handleBeforeClose('outside');
    });
    var closed = ref(false);
    watch(closed, function (value) {
      value && handleBeforeClose('inner');
    });

    var onTouchEnd = function onTouchEnd() {
      if (innerOffsetX.value > 0) {
        innerOffsetX.value = innerOffsetX.value > leftElWidth / 3 ? leftElWidth : 0;
      } else {
        innerOffsetX.value = Math.abs(innerOffsetX.value) > rightElWidth / 3 ? -rightElWidth : 0;
      }

      if (innerOffsetX.value !== 0) {
        open();
      }
    };

    var _useTouchMove = useTouchMove(root, {
      onTouchEnd: onTouchEnd
    }),
        offset = _useTouchMove.offset,
        resetTouchStatus = _useTouchMove.resetTouchStatus,
        dragStatus = _useTouchMove.dragStatus;

    var getOffsetX = function getOffsetX(offsetX) {
      setSwipeWidth();

      if (offsetX > 0) {
        return offsetX > leftElWidth ? leftElWidth : offsetX;
      }

      return Math.abs(offsetX) > rightElWidth ? -rightElWidth : offsetX;
    };

    watch(offset, function (_ref2) {
      var offsetX = _ref2.offsetX;
      innerOffsetX.value = getOffsetX(offsetX);
    });

    var getClickHandler = function getClickHandler(type, event) {
      props.stopPropagation && stopPropagation(event);
      emit('click', {
        type: type,
        event: event,
        closed: closed
      });
    };

    return {
      root: root,
      rightEl: rightEl,
      leftEl: leftEl,
      instance: instance,
      innerOffsetX: innerOffsetX,
      getClickHandler: getClickHandler,
      close: close,
      closed: closed
    };
  }
};

function render$W(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": "fm-swipe-cell",
    ref: "root",
    onClick: _cache[3] || (_cache[3] = function ($event) {
      return $setup.getClickHandler('cell', $event);
    })
  }, [createVNode("div", {
    "class": "fm-swipe-cell-wrapper",
    style: {
      transform: "translate3d(" + $setup.innerOffsetX + "px, 0, 0)",
      transitionDuration: ".6s"
    }
  }, [createVNode("div", {
    "class": "fm-swipe-cell-left",
    ref: "leftEl",
    onClick: _cache[1] || (_cache[1] = function ($event) {
      return $setup.getClickHandler('left', $event);
    })
  }, [renderSlot(_ctx.$slots, "left", {
    instance: $setup.instance,
    close: function close() {
      return $setup.closed = true;
    }
  })], 512
  /* NEED_PATCH */
  ), renderSlot(_ctx.$slots, "default"), createVNode("div", {
    "class": "fm-swipe-cell-right",
    ref: "rightEl",
    onClick: _cache[2] || (_cache[2] = function ($event) {
      return $setup.getClickHandler('right', $event);
    })
  }, [renderSlot(_ctx.$slots, "right", {
    instance: $setup.instance,
    close: function close() {
      return $setup.closed = true;
    }
  })], 512
  /* NEED_PATCH */
  )], 4
  /* STYLE */
  )], 512
  /* NEED_PATCH */
  );
}

script$W.render = render$W;
script$W.__file = "packages/swipecell/src/swipecell.vue";

script$W.install = function (app) {
  app.component(script$W.name, script$W);
};

var script$X = {
  name: 'fm-html',
  props: {
    html: {
      type: String,
      "default": ''
    }
  }
};

function render$X(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    innerHTML: $props.html,
    "class": "fm-html-panel"
  }, null, 8
  /* PROPS */
  , ["innerHTML"]);
}

script$X.render = render$X;
script$X.__file = "packages/html-panel/src/html-panel.vue";

script$X.install = function (app) {
  app.component(script$X.name, script$X);
};

var _components$B;
var script$Y = {
  name: 'fm-card',
  components: (_components$B = {}, _components$B[script.name] = script, _components$B),
  props: {
    title: {
      type: String,
      "default": ''
    },
    icon: {
      type: String,
      "default": 's-list'
    },
    collapse: {
      type: Boolean,
      "default": false
    },
    collapsible: {
      type: Boolean,
      "default": true
    },
    actions: {
      type: Array,
      "default": function _default() {
        return [];
      }
    }
  },
  setup: function setup(props, _ref) {
    var slots = _ref.slots;
    var contentStyle = ref({});
    var contentRef = ref();
    var show = ref(!props.collapse);
    watch(function () {
      return props.collapse;
    }, function (value) {
      toggleShow(!value);
    });

    var setContentStyle = function setContentStyle(animatable) {
      if (animatable === void 0) {
        animatable = true;
      }

      var contentEl = unref(contentRef);
      var contentHeight = '';

      if (contentEl) {
        contentHeight = contentEl.getBoundingClientRect().height + 'px';
      }

      contentStyle.value = {
        height: contentHeight
      };

      if (animatable) {
        setTimeout(function () {
          contentStyle.value = show.value ? {} : {
            height: 0
          };
        }, show.value ? 300 : 0);
      } else {
        contentStyle.value = show.value ? {} : {
          height: 0
        };
      }
    };

    onMounted(function () {
      setContentStyle(false);
    });

    var toggleShow = function toggleShow(value) {
      var contentEl = unref(contentRef);

      if (!props.collapsible || !contentEl) {
        return;
      }

      show.value = value;
      setContentStyle();
    };

    var isFn = function isFn(cb) {
      return isFunction(cb) ? cb : function () {};
    };

    var showHeader = computed(function () {
      return slots.header || props.title;
    });
    var showFooter = computed(function () {
      var _props$actions;

      return slots.footer || ((_props$actions = props.actions) == null ? void 0 : _props$actions.length) > 0;
    });
    return {
      contentRef: contentRef,
      show: show,
      contentStyle: contentStyle,
      toggleShow: toggleShow,
      isFn: isFn,
      showHeader: showHeader,
      showFooter: showFooter
    };
  }
};

var _hoisted_1$E = {
  "class": "fm-card"
};
var _hoisted_2$v = {
  key: 0,
  "class": "fm-card-header"
};
var _hoisted_3$m = {
  "class": "fm-card-content",
  ref: "contentRef"
};
var _hoisted_4$h = {
  key: 1,
  "class": "fm-card-footer"
};
var _hoisted_5$d = {
  "class": "fm-card-footer-btn-text"
};
function render$Y(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  var _component_fm_cell = resolveComponent("fm-cell");

  var _component_fm_button = resolveComponent("fm-button");

  return openBlock(), createBlock("div", _hoisted_1$E, [$setup.showHeader ? (openBlock(), createBlock("div", _hoisted_2$v, [renderSlot(_ctx.$slots, "header", {
    title: $props.title,
    icon: $props.icon,
    toggle: $setup.toggleShow
  }, function () {
    return [createVNode(_component_fm_cell, {
      title: $props.title,
      "class": "fm-card-header-cell",
      onClick: _cache[1] || (_cache[1] = function ($event) {
        return $setup.toggleShow(!$setup.show);
      })
    }, createSlots({
      _: 2
      /* DYNAMIC */

    }, [$props.icon ? {
      name: "left-icon",
      fn: withCtx(function () {
        return [createVNode(_component_fm_icon, {
          name: $props.icon,
          "class": "fm-card-header-left-icon"
        }, null, 8
        /* PROPS */
        , ["name"])];
      })
    } : undefined, $props.collapsible ? {
      name: "right-icon",
      fn: withCtx(function () {
        return [createVNode(_component_fm_icon, {
          name: "s-arrow-down",
          style: {
            transform: $setup.show ? 'rotate(0turn)' : 'rotate(0.5turn)'
          },
          "class": "fm-card-header-right-icon"
        }, null, 8
        /* PROPS */
        , ["style"])];
      })
    } : undefined]), 1032
    /* PROPS, DYNAMIC_SLOTS */
    , ["title"])];
  })])) : createCommentVNode("v-if", true), createVNode("div", {
    "class": "fm-card-content-wrapper",
    style: $setup.contentStyle
  }, [createVNode("div", _hoisted_3$m, [renderSlot(_ctx.$slots, "default")], 512
  /* NEED_PATCH */
  )], 4
  /* STYLE */
  ), $setup.showFooter ? (openBlock(), createBlock("div", _hoisted_4$h, [renderSlot(_ctx.$slots, "footer", {}, function () {
    return [(openBlock(true), createBlock(Fragment, null, renderList($props.actions, function (action) {
      return openBlock(), createBlock(_component_fm_button, {
        type: "action.type",
        block: "",
        plain: "",
        noBorder: "",
        className: "fm-card-footer-btn",
        key: action.id,
        onClick: function onClick($event) {
          return $setup.isFn(action.click)($event);
        }
      }, {
        "default": withCtx(function () {
          return [createVNode(_component_fm_icon, {
            "class": "fm-card-footer-btn-icon",
            name: action.icon
          }, null, 8
          /* PROPS */
          , ["name"]), createVNode("span", _hoisted_5$d, toDisplayString(action.text), 1
          /* TEXT */
          )];
        }),
        _: 2
        /* DYNAMIC */

      }, 1032
      /* PROPS, DYNAMIC_SLOTS */
      , ["onClick"]);
    }), 128
    /* KEYED_FRAGMENT */
    ))];
  })])) : createCommentVNode("v-if", true)]);
}

script$Y.render = render$Y;
script$Y.__file = "packages/card/src/card.vue";

script$Y.install = function (app) {
  app.component(script$Y.name, script$Y);
};

var _components$C;
var script$Z = {
  name: 'fm-notice-bar',
  components: (_components$C = {}, _components$C[script.name] = script, _components$C),
  props: {
    mode: {
      type: String,
      "default": ''
    },
    time: {
      type: Number,
      "default": 0
    },
    multiRows: {
      type: Boolean,
      "default": false
    },
    scrollable: {
      type: Boolean,
      "default": true
    },
    icon: {
      type: String,
      "default": ''
    },
    closable: {
      type: Boolean,
      "default": false
    },
    duration: {
      type: Number,
      "default": 16
    }
  },
  data: function data() {
    return {
      isShow: true,
      overflow: false
    };
  },
  computed: {
    customLeft: function customLeft() {
      return !!this.$slots.left;
    },
    customRight: function customRight() {
      return !!this.$slots.right;
    },
    rightIcon: function rightIcon() {
      var icon = this.mode === 'link' ? 's-arrow' : 's-cross';
      return icon;
    }
  },
  updated: function updated() {
    this.$_checkOverflow();
  },
  mounted: function mounted() {
    if (this.time) {
      this.$_hide(this.time);
    }

    this.$_checkOverflow();
  },
  methods: {
    $_hide: function $_hide(time) {
      var _this = this;

      setTimeout(function () {
        _this.isShow = false;
      }, time);
    },
    $_close: function $_close() {
      if (this.mode === 'closable' || this.closable) {
        this.isShow = false;
      }

      this.$emit('close');
    },
    $_checkOverflow: function $_checkOverflow() {
      if (!this.scrollable) {
        return;
      }

      var _this$$refs = this.$refs,
          wrap = _this$$refs.wrap,
          content = _this$$refs.content;
      /* istanbul ignore if */

      if (!wrap || !content) {
        return;
      }
      /**
       *  padding-left 
       *  clientWidth  getBoundingClientRect
       */


      var paddingLeft = window.getComputedStyle(content, null).getPropertyValue('padding').split(' ')[3] || '0px';
      var left = +paddingLeft.match(/\d+/g)[0];
      this.overflow = content.scrollWidth - left > Math.ceil(wrap.getBoundingClientRect().width);
    }
  }
};

var _hoisted_1$F = {
  key: 0,
  "class": "fm-notice-bar"
};
var _hoisted_2$w = {
  "class": "fm-notice-bar-right"
};
function render$Z(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_fm_icon = resolveComponent("fm-icon");

  return $data.isShow ? (openBlock(), createBlock("div", _hoisted_1$F, [createVNode("div", {
    "class": ["fm-notice-bar-left", [!$options.customLeft && !$props.icon && 'fm-notice-bar-empty']]
  }, [$options.customLeft ? renderSlot(_ctx.$slots, "left", {
    key: 0
  }) : $props.icon ? (openBlock(), createBlock(_component_fm_icon, {
    key: 1,
    "class": "fm-notice-icon",
    name: $props.icon
  }, null, 8
  /* PROPS */
  , ["name"])) : createCommentVNode("v-if", true)], 2
  /* CLASS */
  ), createVNode("div", {
    "class": ["fm-notice-bar-content", [$props.multiRows && 'fm-notice-bar-multi-content']],
    ref: "wrap"
  }, [createVNode("div", {
    "class": [$data.overflow && $props.scrollable && 'fm-notice-bar-content-animate'],
    style: {
      animationDuration: $props.duration + "s"
    },
    ref: "content"
  }, [renderSlot(_ctx.$slots, "default")], 6
  /* CLASS, STYLE */
  )], 2
  /* CLASS */
  ), createVNode("div", _hoisted_2$w, [$options.customRight ? renderSlot(_ctx.$slots, "right", {
    key: 0
  }) : $props.mode || $props.closable ? (openBlock(), createBlock(_component_fm_icon, {
    key: 1,
    "class": "fm-notice-icon fm-notice-icon-right",
    name: $options.rightIcon,
    onClick: $options.$_close
  }, null, 8
  /* PROPS */
  , ["name", "onClick"])) : createCommentVNode("v-if", true)])])) : createCommentVNode("v-if", true);
}

script$Z.render = render$Z;
script$Z.__file = "packages/notice-bar/src/notice-bar.vue";

script$Z.install = function (app) {
  app.component(script$Z.name, script$Z);
};

//   text: string
//   url?: string
//   dot?: boolean
//   badge?: string | number
//   disable?: boolean
//   to?: string
// }

var script$_ = {
  name: 'fm-sidebar',
  props: {
    modelValue: [String, Number],
    sidebarWidth: {
      type: Number,
      "default": 90
    }
  },
  emits: ['change'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var currentName = ref(props.modelValue);
    var currentIndex = ref(0);
    var items = reactive([]);
    var itemDoms = reactive([]);
    var sidebarContent = ref(null);
    var sidebarList = ref(null);
    var clickChange = ref(false);
    var itemRefs = [];
    var menus = computed(function () {
      return items.map(function (pane) {
        return {
          name: pane.props.name,
          title: pane.props.title
        };
      });
    });
    watch(currentIndex, function (value) {
      if (itemRefs && itemRefs.length) {
        var sidebarListH = sidebarList.value.getBoundingClientRect().height,
            sidebarListScroll = sidebarList.value.scrollTop,
            itemOffsetTop = itemRefs[value].offsetTop,
            itemH = itemRefs[value].getBoundingClientRect().height;

        if (sidebarListH + sidebarListScroll < itemOffsetTop + itemH) {
          sidebarList.value.scrollTop = itemOffsetTop - sidebarListH + itemH;
        } else if (sidebarListScroll > itemOffsetTop) {
          sidebarList.value.scrollTop = itemOffsetTop;
        }
      }
    });
    onMounted(function () {
      if (!currentName.value && menus.value.length) {
        currentName.value = menus.value[0].name;
      }

      currentIndex.value = getCurrentIndex(currentName.value);
      scrollTopTo(currentName.value);
      sidebarScroll();
    });

    var addPane = function addPane(pane) {
      var sidebarItem = items.find(function (item) {
        return item.props.name == pane.props.name;
      });

      if (!sidebarItem) {
        items.push(pane);
      }
    };

    var removePane = function removePane(pane) {
      var sidebarItemIndex = items.findIndex(function (item) {
        return item.props.name == pane.props.name;
      });

      if (sidebarItemIndex >= 0) {
        items.splice(sidebarItemIndex, 1);
      }
    };

    var getCurrentIndex = function getCurrentIndex(currentName) {
      for (var i = 0, len = menus.value.length; i < len; i++) {
        if (menus.value[i].name === currentName) {
          return i;
        }
      }

      return 0;
    };

    var sidebarClick = function sidebarClick(item, index) {
      if (currentName.value == item.name) return;
      currentName.value = item.name;
      currentIndex.value = getCurrentIndex(currentName.value);
      scrollTopTo(item.name);
      emit('change', item);
      clickChange.value = true;
    };

    var scrollTopTo = function scrollTopTo(name) {
      var sidebarItem = items.find(function (sidebaritem) {
        return sidebaritem.props.name == name;
      });

      if (sidebarItem) {
        sidebarContent.value.scrollTop = sidebarItem.proxy.root.offsetTop;
      }
    };

    var debounce = function debounce(func, wait) {
      // 
      var timeout;
      return function () {
        if (timeout !== null) clearTimeout(timeout);
        timeout = setTimeout(func, wait);
      };
    };

    var sidebarScroll = function sidebarScroll(event) {
      if (sidebarContent.value) {
        sidebarContent.value.addEventListener('scroll', debounce(function () {
          if (clickChange.value) {
            clickChange.value = false;
            return;
          }
          var scrollTop = sidebarContent.value.scrollTop;
          var topElementInView = items.filter(function (el) {
            return el.proxy.root.offsetTop <= scrollTop;
          });

          if (!topElementInView || !topElementInView.length) {
            return;
          }
          var topElement = topElementInView[topElementInView.length - 1];
          currentName.value = topElement.props.name;
          currentIndex.value = getCurrentIndex(currentName.value);
          clickChange.value = false;
        }), 500);
      }
    };

    provide('rootSidebar', {
      addPane: addPane,
      removePane: removePane,
      currentName: currentName
    });

    var sidebarItemRef = function sidebarItemRef(el) {
      if (el) {
        itemRefs.push(el);
      }
    };

    onBeforeUpdate(function () {
      itemRefs = [];
    });
    return {
      currentIndex: currentIndex,
      getCurrentIndex: getCurrentIndex,
      menus: menus,
      currentName: currentName,
      sidebarClick: sidebarClick,
      sidebarContent: sidebarContent,
      sidebarList: sidebarList,
      itemDoms: itemDoms,
      sidebarScroll: sidebarScroll,
      debounce: debounce,
      scrollTopTo: scrollTopTo,
      sidebarItemRef: sidebarItemRef,
      itemRefs: itemRefs,
      clickChange: clickChange
    };
  }
};

var _hoisted_1$G = {
  "class": "fm-sidebar"
};
var _hoisted_2$x = {
  "class": "fm-sidebar-item-text"
};
var _hoisted_3$n = {
  "class": "fm-sidebar-content",
  ref: "sidebarContent"
};
function render$_(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$G, [createVNode("div", {
    "class": "fm-sidebar-list",
    style: {
      'width': $props.sidebarWidth + 'px'
    },
    ref: "sidebarList"
  }, [(openBlock(true), createBlock(Fragment, null, renderList($setup.menus, function (item, index) {
    return openBlock(), createBlock("div", {
      "class": ["fm-sidebar-item", {
        'fm-sidebar-item-active': $setup.currentName == item.name
      }],
      key: index,
      onClick: function onClick($event) {
        return $setup.sidebarClick(item, index);
      },
      ref: $setup.sidebarItemRef
    }, [createVNode("span", _hoisted_2$x, toDisplayString(item.title), 1
    /* TEXT */
    )], 10
    /* CLASS, PROPS */
    , ["onClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))], 4
  /* STYLE */
  ), createVNode("div", _hoisted_3$n, [renderSlot(_ctx.$slots, "default")], 512
  /* NEED_PATCH */
  )]);
}

script$_.render = render$_;
script$_.__file = "packages/sidebar/src/sidebar.vue";

var script$$ = {
  name: 'fm-sidebar-item',
  props: {
    title: {
      type: String
    },
    name: {
      type: [String, Number]
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var rootSideBar = inject('rootSidebar');
    var internalInstance = getCurrentInstance();
    var root = ref(null);
    onBeforeMount(function () {
      rootSideBar.addPane(internalInstance, root.value);
    });
    onMounted(function () {// console.log(root.value)
    });
    onUnmounted(function () {
      rootSideBar.removePane(internalInstance, root.value);
    });
    var active = computed(function () {
      var itemActive = rootSideBar.currentName.value === props.name;
      return itemActive;
    });
    return {
      active: active,
      root: root
    };
  }
};

function render$$(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": ["fm-sidebar-pane", {
      'fm-sidebar-pane-active': $setup.active
    }],
    ref: "root"
  }, [renderSlot(_ctx.$slots, "default")], 2
  /* CLASS */
  );
}

script$$.render = render$$;
script$$.__file = "packages/sidebar/src/sidebar-item.vue";

script$_.install = function (app) {
  app.component(script$_.name, script$_);
};

script$$.install = function (app) {
  app.component(script$$.name, script$$);
};

var Parchment = Quill["import"]('parchment');
var SizeStyle = new Parchment.Attributor.Style('customSize', 'font-size', {
  scope: Parchment.Scope.INLINE
});

var ColorAttributor = /*#__PURE__*/function (_Parchment$Attributor) {
  _inheritsLoose(ColorAttributor, _Parchment$Attributor);

  function ColorAttributor(format, type, value) {
    return _Parchment$Attributor.call(this, format, type, value) || this;
  }

  var _proto = ColorAttributor.prototype;

  _proto.value = function value(domNode) {
    var value = _Parchment$Attributor.prototype.value.call(this, domNode);

    if (!value.startsWith('rgb(')) return value;
    value = value.replace(/^[^\d]+/, '').replace(/[^\d]+$/, '');
    return '#' + value.split(',').map(function (component) {
      return ('00' + parseInt(component).toString(16)).slice(-2);
    }).join('');
  };

  return ColorAttributor;
}(Parchment.Attributor.Style);

var ColorStyle = new ColorAttributor('customColor', 'color', {
  scope: Parchment.Scope.INLINE
});
Quill.register('formats/customSize', SizeStyle);
Quill.register('formats/customColor', ColorStyle);
var toolbarHandlers = {
  customColor: function customColor(value) {
    value = value === '#000000' ? '' : value;
    this.quill.format('customColor', value, 'user');
  },
  customSize: function customSize(value) {
    value = value.includes('px') ? value : value + 'px';
    this.quill.format('customSize', value, 'user');
  }
};
var quillToken = Symbol('quill');

var script$10 = defineComponent({
  name: 'fm-editor-toolbar',
  props: {
    hasFocus: {
      type: Boolean,
      "default": false
    }
  },
  setup: function setup(props) {
    var quillRef = inject(quillToken, ref(null));

    var handlerSelectionChange = function handlerSelectionChange(range, old) {
      if (!range && old && props.hasFocus) {
        return;
      }

      var quill = unref(quillRef);
      range = range ? range : quill.getSelection(true);
      var formats = quill.getFormat(range);

      if (formats.hasOwnProperty('customSize')) {
        fontSize.value = Number(formats.customSize.slice(0, -2));
      } else {
        fontSize.value = 14;
      }

      if (formats.hasOwnProperty('customColor') || formats.hasOwnProperty('color')) {
        currentColor.value = formats.customColor ? formats.customColor : formats.color;
      } else {
        currentColor.value = '#000000';
      }
    };

    watch(quillRef, function (quill) {
      quill == null ? void 0 : quill.on('selection-change', handlerSelectionChange);
    });
    var colorList = ref(['#000000', '#e60000', '#ff9900', '#008a00', '#0066cc', '#9933ff']);
    var currentColor = ref('#000000');
    var fontSize = ref(14);
    var sliderRef = ref(null); // 

    var event = new Event('click');

    var dispatchEvent = function dispatchEvent() {
      var _sliderRef$value;

      // 
      (_sliderRef$value = sliderRef.value) == null ? void 0 : _sliderRef$value.dispatchEvent(event);
    };

    var handlerClick = function handlerClick() {
      var _sliderRef$value2;

      (_sliderRef$value2 = sliderRef.value) == null ? void 0 : _sliderRef$value2.setAttribute('value', String(fontSize.value));
      dispatchEvent();
    };

    return {
      fontSize: fontSize,
      colorList: colorList,
      currentColor: currentColor,
      handlerClick: handlerClick,
      dispatchEvent: dispatchEvent,
      sliderRef: sliderRef
    };
  }
});

var _hoisted_1$H = {
  "class": "fm-editor-toobar",
  ref: "toolbarRef"
};

var _hoisted_2$y = /*#__PURE__*/createStaticVNode("<div class=\"fm-editor-toobar-row\"><button class=\"ql-bold\"></button><button class=\"ql-italic\"></button><button class=\"ql-underline\"></button><button class=\"ql-strike\"></button><button class=\"ql-header\" value=\"1\"></button><button class=\"ql-header\" value=\"2\"></button></div><div class=\"fm-editor-toobar-row\"><button class=\"ql-list\" value=\"ordered\"></button><button class=\"ql-list\" value=\"bullet\"></button><button class=\"ql-indent\" value=\"-1\"></button><button class=\"ql-indent\" value=\"+1\"></button><button class=\"ql-script\" value=\"sub\"></button><button class=\"ql-script\" value=\"super\"></button></div>", 2);

var _hoisted_4$i = {
  "class": "fm-editor-toobar-row"
};

var _hoisted_5$e = /*#__PURE__*/createVNode("button", {
  style: {
    "width": "35px",
    "font-size": "12px"
  }
}, "Aa", -1
/* HOISTED */
);

var _hoisted_6$b = /*#__PURE__*/createVNode("button", {
  style: {
    "width": "35px"
  }
}, "Aa", -1
/* HOISTED */
);

var _hoisted_7$7 = {
  "class": "fm-editor-toobar-row"
};
function render$10(_ctx, _cache, $props, $setup, $data, $options) {
  var _component_van_slider = resolveComponent("van-slider");

  return openBlock(), createBlock("div", _hoisted_1$H, [_hoisted_2$y, createVNode("div", _hoisted_4$i, [_hoisted_5$e, createVNode("div", {
    "class": "fm-editor-font-slider fm-custom-change ql-customSize",
    style: {
      "width": "100px"
    },
    ref: "sliderRef",
    value: _ctx.fontSize,
    onClick: _cache[2] || (_cache[2] = withModifiers(function () {}, ["stop"])),
    onMousedown: _cache[3] || (_cache[3] = withModifiers(function () {}, ["stop"])),
    onMouseup: _cache[4] || (_cache[4] = withModifiers(function () {}, ["stop"]))
  }, [createVNode(_component_van_slider, {
    modelValue: _ctx.fontSize,
    "onUpdate:modelValue": _cache[1] || (_cache[1] = function ($event) {
      return _ctx.fontSize = $event;
    }),
    min: "12",
    max: "24",
    step: "2",
    onDragEnd: _ctx.dispatchEvent,
    onClick: _ctx.handlerClick
  }, null, 8
  /* PROPS */
  , ["modelValue", "onDragEnd", "onClick"])], 40
  /* PROPS, HYDRATE_EVENTS */
  , ["value"]), _hoisted_6$b]), createVNode("div", _hoisted_7$7, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.colorList, function (color, index) {
    return openBlock(), createBlock("button", {
      "class": ["fm-toolbar-color ql-customColor", color === _ctx.currentColor ? 'fm-active' : ''],
      key: index,
      value: color,
      style: "background-color:" + color + ";",
      onClick: function onClick($event) {
        return _ctx.currentColor = color;
      }
    }, null, 14
    /* CLASS, STYLE, PROPS */
    , ["value", "onClick"]);
  }), 128
  /* KEYED_FRAGMENT */
  ))])], 512
  /* NEED_PATCH */
  );
}

script$10.render = render$10;
script$10.__file = "packages/rich-text-editor/src/toolbar.vue";

var _components$D;
var script$11 = {
  name: 'fm-rich-editor',
  components: (_components$D = {}, _components$D[script$10.name] = script$10, _components$D),
  props: {
    modelValue: {
      type: String,
      "default": ''
    },
    theme: {
      type: String,
      "default": 'snow'
    },
    placeholder: {
      type: String,
      "default": ''
    },
    position: {
      type: String,
      "default": 'bottom'
    },
    readonly: {
      type: Boolean,
      "default": false
    },
    debug: {
      type: Boolean,
      "default": false
    },
    border: {
      type: Boolean,
      "default": true
    }
  },
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var rootRef = ref();
    var editorRef = ref();
    var toolbarRef = ref();
    var hasFocus = ref(false);
    var editorContent = null;
    var compositionStatus = 'end';
    var quill;
    var quillRef = ref(null);
    provide(quillToken, quillRef);
    watch(function () {
      return props.modelValue;
    }, function (html) {
      var range = quill.getSelection();
      setContents(html);
      range && quill.setSelection(range);
    });
    watch(function () {
      return props.readonly;
    }, function (value) {
      if (value) {
        quill.disable();
      } else {
        quill.enable();
      }
    });
    onMounted(function () {
      initEditor();
    });
    onUnmounted(function () {
      removeCompositionListener();
    }); // 

    var initEditor = function initEditor() {
      var _unref, _editorEl$querySelect;

      var editorEl = unref(editorRef);

      if (!editorEl) {
        return;
      }

      quillRef.value = quill = new Quill(editorEl, {
        theme: props.theme,
        readOnly: props.readonly,
        debug: props.debug,
        placeholder: props.placeholder,
        modules: {
          toolbar: {
            container: unref(toolbarRef),
            handlers: toolbarHandlers
          }
        }
      });
      editorContent = (_unref = unref(editorRef)) == null ? void 0 : _unref.querySelector('.ql-editor');
      setContents(props.modelValue);
      addCompositionListener();
      quill.on('text-change', handlerTextChange);
      quill.on('blur', toggle(false));
      (_editorEl$querySelect = editorEl.querySelector('.ql-editor')) == null ? void 0 : _editorEl$querySelect.addEventListener('blur', function () {//console.log('blur');
        // toggle(false)
      });
    }; // 


    var setContents = function setContents(value) {
      if (!isDef(value)) {
        return;
      } // editorContent!.innerHTML = value


      var delta = quill.clipboard.convert(value);
      quill.setContents(delta);
    }; //  


    var handlerTextChange = function handlerTextChange() {
      if ((arguments.length <= 2 ? undefined : arguments[2]) === 'api') {
        return;
      }

      var html = editorContent.innerHTML;
      html !== props.modelValue && compositionStatus === 'end' && emit('update:modelValue', html);
    }; // 


    var addCompositionListener = function addCompositionListener() {
      var _editorContent, _editorContent2;

      (_editorContent = editorContent) == null ? void 0 : _editorContent.addEventListener('compositionstart', handlerCompositionstart);
      (_editorContent2 = editorContent) == null ? void 0 : _editorContent2.addEventListener('compositionend', handlerCompositionend);
    }; //  composition 


    var removeCompositionListener = function removeCompositionListener() {
      var _editorContent3, _editorContent4;

      // console.log('removeCompositionStatus')
      (_editorContent3 = editorContent) == null ? void 0 : _editorContent3.removeEventListener('compositionstart', handlerCompositionstart);
      (_editorContent4 = editorContent) == null ? void 0 : _editorContent4.removeEventListener('compositionend', handlerCompositionend);
    }; // compositionstart 


    var handlerCompositionstart = function handlerCompositionstart() {
      compositionStatus = 'start';
    }; // compositionend 


    var handlerCompositionend = function handlerCompositionend() {
      compositionStatus = 'end';
      var html = editorContent.innerHTML;
      html !== props.modelValue && emit('update:modelValue', html);
    }; // 


    useClickAway(rootRef, function () {
      hasFocus.value && toggle(false);
    });

    var toggle = function toggle(value) {
      if (props.readonly) {
        return;
      } // console.log(value);


      hasFocus.value = value;
    };

    return {
      rootRef: rootRef,
      editorRef: editorRef,
      toolbarRef: toolbarRef,
      hasFocus: hasFocus,
      toggle: toggle
    };
  }
};

var _hoisted_1$I = {
  "class": "fm-editor",
  ref: "rootRef"
};
var _hoisted_2$z = {
  ref: "toolbarRef"
};
function render$11(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$I, [createVNode("div", {
    "class": ["fm-editor-main", {
      'fm-editor-no-border': !$props.border
    }],
    ref: "editorRef",
    onClick: _cache[1] || (_cache[1] = function ($event) {
      return $setup.toggle(true);
    })
  }, null, 2
  /* CLASS */
  ), withDirectives(createVNode("div", _hoisted_2$z, null, 512
  /* NEED_PATCH */
  ), [[vShow, false]]), createCommentVNode(" <fm-popup\r\n      v-model:show=\"hasFocus\"\r\n      :overlay=\"false\"\r\n      :radius=\"true\"\r\n      :position=\"position\"\r\n    >\r\n      <div class=\"fm-editor-toobar-wrapper\" ref=\"toolbarRef\">\r\n        <fm-editor-toolbar :hasFocus=\"hasFocus\"></fm-editor-toolbar>\r\n      </div>\r\n    </fm-popup> ")], 512
  /* NEED_PATCH */
  );
}

script$11.render = render$11;
script$11.__file = "packages/rich-text-editor/src/rich-text-editor.vue";

script$11.install = function (app) {
  app.component(script$11.name, script$11);
};

var _components$E;
var script$12 = {
  name: 'fm-action-sheet',
  components: (_components$E = {}, _components$E[Popup.name] = Popup, _components$E),
  props: {
    show: {
      type: Boolean,
      "default": false
    },
    actions: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    title: {
      type: String
    },
    cancelText: {
      type: String
    },
    description: {
      type: String
    },
    closeable: {
      //
      type: Boolean,
      "default": false
    },
    round: {
      type: Boolean,
      "default": true
    },
    duration: {
      //
      type: [Number, String],
      "default": 0.3
    },
    overlay: {
      //
      type: Boolean,
      "default": true
    },
    lockScroll: {
      //
      type: Boolean,
      "default": true
    },
    closeOnClickOverlay: {
      //
      type: Boolean,
      "default": true
    },
    closeOnClickAction: {
      //
      type: Boolean,
      "default": false
    }
  },
  emits: ['select', 'cancel', 'update:show'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onUpdateShow = function onUpdateShow(show) {
      emit('update:show', show);
    };

    var onCancel = function onCancel() {
      onUpdateShow(false);
      emit('cancel');
    };

    var itemClick = function itemClick(item, index) {
      if (item.disabled) return;

      if (item.callback) {
        item.callback();
      }

      emit('select', item, index);

      if (props.closeOnClickAction) {
        onUpdateShow(false);
      }
    };

    var popupShow = function popupShow(event) {
      onUpdateShow(event);

      if (!event) {
        emit('cancel');
      }
    };

    return {
      itemClick: itemClick,
      onCancel: onCancel,
      onUpdateShow: onUpdateShow,
      popupShow: popupShow
    };
  }
};

const _hoisted_1$J = {
  key: 0,
  class: "fm-actionsheet-header"
};
const _hoisted_2$A = { class: "fm-actionsheet-header-title" };
const _hoisted_3$o = {
  key: 1,
  class: "fm-actionsheet-description"
};
const _hoisted_4$j = { class: "fm-actionsheet-description-inner" };
const _hoisted_5$f = { class: "fm-actionsheet-content" };
const _hoisted_6$c = {
  key: 0,
  class: "fm-actionsheet-item-subname"
};
const _hoisted_7$8 = { class: "fm-actionsheet-cancel-inner" };

function render$12(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_icon = resolveComponent("fm-icon");
  const _component_fm_popup = resolveComponent("fm-popup");

  return (openBlock(), createBlock(_component_fm_popup, {
    show: $props.show,
    "onUpdate:show": _cache[3] || (_cache[3] = $event => ($setup.popupShow($event))),
    position: "bottom",
    class: ["fm-actionsheet", {
    'fm-actionsheet-round':$props.round
  }],
    overlay: $props.overlay,
    lockScroll: $props.lockScroll,
    closeOnClickOverlay: $props.closeOnClickOverlay,
    duration: $props.duration
  }, {
    default: withCtx(() => [
      ($props.title || $props.closeable)
        ? (openBlock(), createBlock("div", _hoisted_1$J, [
            createVNode("span", _hoisted_2$A, toDisplayString($props.title), 1 /* TEXT */),
            createVNode("div", {
              class: "fm-actionsheet-header-close",
              onClick: _cache[1] || (_cache[1] = (...args) => ($setup.onCancel && $setup.onCancel(...args)))
            }, [
              renderSlot(_ctx.$slots, "cancel", {}, () => [
                createVNode(_component_fm_icon, { name: "s-cross" })
              ])
            ])
          ]))
        : createCommentVNode("v-if", true),
      ($props.description)
        ? (openBlock(), createBlock("div", _hoisted_3$o, [
            renderSlot(_ctx.$slots, "description", {}, () => [
              createVNode("div", _hoisted_4$j, toDisplayString($props.description), 1 /* TEXT */)
            ])
          ]))
        : createCommentVNode("v-if", true),
      createVNode("div", _hoisted_5$f, [
        renderSlot(_ctx.$slots, "default", {}, () => [
          (openBlock(true), createBlock(Fragment, null, renderList($props.actions, (action, index) => {
            return (openBlock(), createBlock("div", {
              class: ["fm-actionsheet-item", [
        action.disabled ? 'fm-actionsheet-item-disabled':null,
        action.className
      ]],
              key: index,
              onClick: $event => ($setup.itemClick(action,index))
            }, [
              createVNode("div", {
                class: "fm-actionsheet-item-name",
                style: {'color': action.color}
              }, toDisplayString(action.name), 5 /* TEXT, STYLE */),
              (action.subname)
                ? (openBlock(), createBlock("div", _hoisted_6$c, toDisplayString(action.subname), 1 /* TEXT */))
                : createCommentVNode("v-if", true)
            ], 10 /* CLASS, PROPS */, ["onClick"]))
          }), 128 /* KEYED_FRAGMENT */))
        ])
      ]),
      ($props.cancelText)
        ? (openBlock(), createBlock("div", {
            key: 2,
            class: "fm-actionsheet-cancel",
            onClick: _cache[2] || (_cache[2] = (...args) => ($setup.onCancel && $setup.onCancel(...args)))
          }, [
            createVNode("div", _hoisted_7$8, toDisplayString($props.cancelText), 1 /* TEXT */)
          ]))
        : createCommentVNode("v-if", true)
    ]),
    _: 3 /* FORWARDED */
  }, 8 /* PROPS */, ["show", "overlay", "lockScroll", "closeOnClickOverlay", "duration", "class"]))
}

script$12.render = render$12;
script$12.__file = "packages/action-sheet/src/index.vue";

script$12.install = function (app) {
  app.component(script$12.name, script$12);
};

var qq = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAjVBMVEUAAAA3u/tDwv83u/s4u/s7u/pW+P83uvo4u/s4vfw4u/o4uvs5vv84vPw4u/s3u/s4uvs4u/o3u/s3u/o4u/w4vPs9wv9gz/85uvs4u/w3vPw4uvo3u/o5vPw5vfs3u/s3u/w3uvs3u/tHy/83u/w+v/83u/o4u/s4vPs5u/w4vPs4u/s4u/o3vf83uvq1vdlFAAAALnRSTlMA+g7tjjQCz6pK08cgWvfB6t/znE9EEwWCZVjboWM545W7tAqYGdh4cGI+g6UwaptHdQAAAyxJREFUaN6s1ulyolAUBOC+7Lu4a4yMTmKcTGb6/R8vlVSWioV9APn+Qt3LPTRdoBsvLDdJnk195/xpliebMvQwFi8NYraIg9QbYfXtxPEqN9netkeaVDRUSYqBojJjJ1kZDVl+v2Nnu33vLZqYvcQN+ljN2dt8hc4WPgfwF+hmHXCgYI0OipyD5QVMYc0b1CEMyxlvMltCunO8kbuT63MEYoel4wjc1SmFM45iFqJVUXMkdYEW65yjydu+uIAjClr6h7b6+O/xcH/8RdsCF1Y+DdOXr8mezhkN/mW3zqlly4vETajN8UPTuyejs6PU/Lg7pjJLB9RiHOHb3npjrZqKyh5foh2V87Dq2n0foaSS4KqASolPGQVXoJUd7gwfUiqPEM5UPrORUKhOEB7qDsP1Kgq/IR0oVB7ebKk8Q1pS2eLNhIJbQVr7FCbvE3L6FsM9BeeZGQpg+GPmKLCmqNnPF1P5C0NBJQY8SicYooqKh5ASTFMqoVF0FUxPRuFtqPgwZVQ2SKjUMOVUEuP6E0xHKrlxwheYnqlkRggKmB58ClP4RlfbDjolzvidsP2n4F6btZLlBmEo5rIUCFuAkq3uGAgwaQ/5/89rnLslB8YTdPCBCzP2W/SkB3+g7ASCFP7Ah0FshV94RRV7Yg6vRo+8o82GQ6IwTSn342hRosW0HXN87kGpOPEk4OhAnOS8W3IkoFyHPIY4roW54XhG9i04eEn1zE1fihdwMjd9EfAn4EgAbUkAYfEugqLNAHlJAHWcdIoGguLW67MwUEdAfo96+h9scuD2OBUoNmcTI8r8e30VDOr+EZrY0RkNIIfD/EwUgj/dNzJRgwHEUI6aWZ+9VSVVAZxPkxVdMyTknZOzCrwC0SB2doN4gzMYILeUEgI23nApQfws0ypyLIZYXmV6Mb7C8asncg4XpL5bEkUREqS4pFZPtNdUIDa4buLTtjbNUBTksua+HGQzdmMj46GMqqJQUTnE+lM3yrhUID+dCrPOpWXX4rhred+1QeHaYnFtErm2uVwbde+3GteZpduwexcb1luy3BcsDWxv7eGFxY0tr564X55Zv/7zD8aWtoXiQOiQAAAAAElFTkSuQmCC",
    link = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAulBMVEUAAADz8/X09Pf////z9Pbz9Pbz9PXz9Pbz9Pby9ff19fj////y8/by9Pby8/bz9PXz9PXy9Pby8/bz8/by9PXz8/Xy9fX09Pj29vb19fX19fX39/fy///////y8/VkZWaoqat0dHbi4+Wtra53d3jf4OLq6+2ztbZucHHT1NaPkJFpamu4uLtmZ2fv8PLn5+nY2drNztDBw8R9foB5envc3d/Gx8m7vb6hoqOLjI2GiIl6e3yam5yEhIXxuCegAAAAHnRSTlMA7FoO+/jQqY5jSwPz39vU0snFwZ2CT0Y6NTQgFAWfM4pkAAAC7ElEQVRo3s2a2VYiMRCGO72D7Iso6C/aDs0qi7jPvP9rDRFzRAc7qSZ1hu9Kb76iT5JKUhXHDK/rtqNGrSyCQJRrjajtdj3HFl4xDrGHMC56FuyFpo8f8ZuFw2IUowAagqiY137iVmFE1T3Joy9UYEylQA5xFoJEeEbSX7RApnVh7j8VyIE4NdRfxshJfGni79WRm3pP7z8XOABxrvN3SjiIUifb7/o4EN/N9MMCGRE6Pizgd34c3xKsUPphpHsClhC9veurDmvU9624GBaJ9+QfWOX0n/wpYBXxPbe2YJnWt/0F1jn7sj+GsE64u4sWwEBh5wMqYKByoslxFrNeFSxUlb8IJtSZLwIT0dbvBaCySNN0CS2Bl2+OTtdXktsUZjO1CRr9K8V4gGya0u/5dL/iTRPB99QcovqvX9bbbzCYRzEo3I2lNwHwOJR/pfqNJwQ5QgLJg4zwhkxCx/EAaoQEW1byExbIxHO6yI/8hCky6VIS3U3/9f71eecnX+sHwXXaMGU6u3rnt5qbI/nfIzJpOxF9/t9vI/ySHzDRrITIadDXV1/5Nzwjm4ZTo/jH0/7wi/92jmxqTpngT+RIT3f9N9BQdgTND5D8EE7A6kfgBFx+FUCQ/HdEP4RTpvgfrpMBRgQ/ytppuvri36wsqTf2o6ZdaOtP//zdTfKjoUsVI7V0JelMbZWmfkS6ZJdudMM7fLB4kSEmzwOY0tal60QmN3wyX66WA5jj6jacJ/mL52r+j0Clq9sy5zO5A6j1NSRH8LSb/sv7KKv1RY0Q6o8ti4mM8Po4etr45XiQiNXBSzMK5PmvKJocHZNZbr/vGR1+l8MP/5roR9Pw+D6Y/pnMJuPVAEQK6gLCROBxX6HYL4Hc11j2izh7KYG7GMJezuEuSHGX1NiLgtxlTe7CLHtpmbs4zl3e525QcLdYuJtE3G0u7kbd/281HtYsPY52b+6G9TG13HM8Gji+Zw+EhxvH/PTEwuMZ9uc/fwHI9VO0QKM2+QAAAABJRU5ErkJggg==',
    weibo = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAk1BMVEUAAADvWV7vWF7uWF7vWV/vWV7vWF7wWV//lpbvWF7wYmP/X2nxWWD/dHTvWF/0XWPvWV/vWV7wWGDwWmHvWWDvWF7uWF7vWV/vWF7wWF7wWV/xXGLvWV/xWWHuWV/vWV/vWV/vWV7vWV/vWV/vWV/wWl/wXmLuWF/vWV/uWF/uWF/wWV/xW2H/gIDvWWDzXGPuWF6ZfYo2AAAAMHRSTlMA7vn1qlvSSgP7EA03BsIWzKFlPE7gxtyzglIibzTWm46Taui7RB7jeouIdi0CYCexFRcuAAAEeElEQVRo3qzW23qiMBQF4JWAIAcRT1AVBRWd1nbsev+nmw8ZrZRwEPnvuICd7OxvEbTjbAZLPTAWQkqxMAJ9Odg46IszTwwqGMm8hyL21LNYyfKmNl5h6pINpG6io+Fgy1a2g2GXz09DthZOny4xM/gUY4ZnjCd82mSM1laCHYgV2hnt2NFuhBbWPjvz12jkCr5AuGhganyJZqLWQPJFclD7ffagpoIp2QNZ2SVXYy80t2I+BXsilNM68tkbf4SyHXu0U+QPe7Uq5adgr8QYRRP2bIKCGXs3w4Ohwd4ZQ/yYsgNNCIs1pg8bCPmsP/nNbnyMvKoq4fCVjItwd0pkU+ptOxfIrVOqbO8hyuctTnDm09VX3oa/Z6qYyOnsQIaSJMXERSaigo4rW7Idi0r6uCrKpN16Rrfno42R+6aeqK9sEr3KSfXYxDNVieJ/LJNUu+e/q3rx2iGraeTnuBtbvHnL+/shb/mv2J6V9WjOerGNB0YpzS4kuQdwZFm2toR15AU/Csu0du+7c5ZoMckAwEhjSZKvqdrBRZHOok9gdutFyhIDcGrb/41fFiQtP7mY5v66Gc0GDiQ3AJYsc7BhtfCE3zQa+zFyc42kmY/hEcA7yzZ1QfdnjZLvx5pRnmjp/wKRMvCWrCK+0MCxrjsISGa93LNsWR1E1hGNDmQER5CH7OlTGUcBK+zRaKiRWhzeYi1mWVA5pRM0mxXmHT7LDCwqDtjGg9NgGad+4KXx59xW3XXS/ETKFhBUMnHnxoVFWEHkAL9jclXx3xKQVHnDzWXLEnEe5Wcw+xC3sl4cUkH+o83alhQEwbAKbWlia2qpm7WjZVq6s+//dI0IYsWpC7jyQuFn+P1OCBboaPXfAn4oaBoTKojPsmUbKF1ScnqP47w8OxyT0cg1qpVItHFLXjqsKB2k7MtaS9Ym3DYFiCI9Zi4mlOfgfppICMgEJPdHO49qxxkRb8P3Qe6GcYR47LhQ0c4tzwtiXFgn65wCtDKRbEOAlEBH3OHWtNlbGgtk1kIEQx2lLDJyslb6Jj1vUlde8HgeFzz5iL5JKlj71+0zaRY6Z1BwKfNoMZ1TkwrPr6y87ykryLpozSf9oUE8+tjjCQBj5ZcjKGVdKpAtf2znnYWc+Q58+imiYFFJFvgVCK8ETWhfjmrhSH7cniAomPTG6V8yYg6Ms95p6Vp+uUTP04GLlrlw1yLxaw8F9hADnzdjeUj02NRBFyBVzWL5Xv0MK2T4sfHI9GXFHAGbX2k0PUcsiiIMVc6uvR9uKSDgt5xIP3PlZODJLBQ4kAD+qUgbRkyEqQIgqDinoBgBNM7g17Wyr0HYRCtmLU9K67VU2tggF6XqfuiqfZeOEbfDhfemt/w20YofdaOEPWxyvx72gupocQuA5qXC6sMwxHU+SyW35uMc84GU+UjNfChoPtY0H8yaj5bNh+Pm433zFxTmr1jYCo9xUj5JROtpLlpP1A38VCNlk6WDY7qX7AnrwTTlTsaigcG37IGEhRuDeekJ7RfPUL78BwCDfm1dBuGDOgAAAABJRU5ErkJggg==',
    wechat = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAA5FBMVEUAAAAHwmAIwWAHwmEIw2ESyGcIwWAIwmAIwWEHwmEKxGAKxWFV/6oHwWAHwWEHwmAIwmAIwWEIwmAIwmEIwWIKwmEHwWIJwWEIx2gNzGYzzGYHwWD///8IwmEMwmMfx2/9//1V1ZIYxWsTxGjt+vNq2qA4zYAQw2b4/fuQ5Ljn+fDi+Ozf9+vL8t257tJx26Tq+vKy7M2u68un6ceg58IsyngmyXP0/PjO8t/E8Nl93qxd15fY9ebS9OJl2ZxS1JBAz4Wa5r+L4rRP045M0oxJ0Yrv+/V33ah13aeJ4bOE4LDH8duXUKJXAAAAG3RSTlMA+uzRWg7dw6mOSzQD9/PUyZ2CZGNPRjogFAUdtzlwAAAEE0lEQVRo3s3aaVfaQBQGYLKw1x2r7TszAcIiKpsssojgbtv//3/KsSQi3psESE59PiGec4fM5N6ZzCQWTDxrHqaSRkLXND1hJFOHZjYeC0s8kzYkPpFGOhMPIfpRUgNLSx5t10YmtQMfO6nMptG/mXsIZM/8tkn4XAKBJXJrN3FiYC3GyVrhfxxIrEke/Age/1jHBvTjgOF/prGh9M8g8U/3sbH9U//4WR1b0LN+8b/vYiu7373jmxq2pJme8SW2Jk2P/tEQAo3tpewuQrHLjPSpjpDop2R+7SM0+1TGpRGiNFF/EKrjT/VTR6j01dp6gJAdrMwvEiGTJx/mRwOhM5Zn0Ry8WbNCedQcP/awhtzSBSTAkw+1iXC02s0iAkq8X4IJVrV5KT4668wQzHvV2wOnXBKEjoUg9tz1GxjFtqBd3yIIZ82XAq13Llg1CX+pxfp2h4/PuwrQws6/lfERSNaF8FSDv6O3BpIgNRaB8pPl+6g0OHM+BhiH5FsPaaCMnYgVoCwcXQWr7vzHPyO0OHsPKWcAXpavpqQAVNbopAw70RScKFPM1RZ/DDBnuynnfQnOxGOA0l7+mXLghLSW2s6fF+DHmA+BBMF2hzL/Wux3hKNesQuteUON10pRwp+Mx7KgVISHm1sFWbSVKsJXNmYyQ8C6HMu52e+r4c3FoHFXsH0K3iEoTT6DbYVe91q48o0n8A6ZQjQStHwZyurkV76tz8BJMXlcFrRbyGmJaPeXZHPZAOVJkF4gmWsb2tx9mgClmCf7H4odnGEVlERMB2lITTNWdZoXnDYoekxD4EF4kVWvEj4GQeMaUJ9DXdvVe6foPdgPJWd+thaJ3iqSDeigjakReF58bLqp0lKAajnfUl2UAONOrCjYU/ejm+wTzE2cWksNsgGGGqw0YNldd0DdepuvABVn5PvUbZoEp3/5MZmkHL7nbq3ujMzdnVs3HqlES4Fl1T8UOeBSeCtTpeIQvOqVeDcBnoW3EVXsTHhQZ8LVAm7WvwIzloWHB7FEoSG8zagJJy7B6751/vDfdfScPOM8K2rKjBlgqXm2XpQVqk+jbrtRQEV4uifuUu/n40fRelVw+QzCmUUvWzJg1UZVcqoOvljNOEtHmiIWrKw/ilk6ErnM67NL+nOLmjC55TuvV2LiV0A4Yh9AeBVyzrnpezyAkOWIV1yuH94r+RT7EOhtWv+0bLFAyTCPsf6eum5HXXTq3Hy8RzyIB9crlH//Kj/2Adyeiy4IJrGVsBn7/hLkVoIrhy31iWVXLvLtnKg3pKLeUot8UzDqbc2oN2Yj31qOenM86u39qA8ooj5iifqQKOpjrqgP6v7/UeN2h6Vf47h34wPrr3TkvsFLA1/vtYc1Xtz4yq+ehPDyTOSv//wFKf0TV2KWp7YAAAAASUVORK5CYII=',
    poster = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAqFBMVEUAAADz9Pbz8/X09Pf////////z9PXz9PXz9Pbz9Pb19fjz9Pby8/by9Pby8/by9Pby8/bz8/by9PXz8/Xy9ffy9ffy9fX09Pj29vb19fX19fX39/fy///y8/VkZWZyc3TLzM3c3uDCxMWKi4xub3Dh4uRoaWrV19lrbGzs7e/n6OmEhYXw8fOnqKqOj5F6e3zHyMq7vL2bnZ7R0tTCw8SxsrOfoaGXl5kWOEU7AAAAHXRSTlMA+uxaDgPT0KmOS/fz39vJxcGdgmRjT0Y6NTQgFFatTPIAAALJSURBVGjetNXZbuowFIXhZcfOxDwPZZnocKjoqKrq+z9boUIVtDXZGOe78U3iX1G2bMiYZTLK+2lHK6U7aT8fJUuDWExZZPxDVpQRImY8UPRSg/FtjTJvsUYrLxHIJilF0sSGbD/pUqw7uToxz3iVbI5rrIa82nAFsalmAD2FjC0YqLAQuOsxWO8OtRaaN9AL1Ji1eZP2DBclijdSycX9GcGFwkwxAjWDx6LNKNoLz3xqRqL/nFbbYzQ9i98KRlTglymjmuKHlWZUeoVzQ0Y2xJk5o5vjhM0YXXY6SRM2YIJvtssGdK3gjIt06qVsRIqjkg0pj4GcHtXaCazf6JHji2nRY+1E1vRoGRyM6eOE6DPGwaC5wAB7Rl0M0EP0jDIASkYJ+OeoaDJQAMiaDGSAEby83ew226AADZaCwGa/bsICSySCwG6/7njm4UEWSDAK+4L3d1lghDzoH3w49yEK5OiHTMj2v3O7rSTQRxoQeH5ye0/PgkCKTkDgxX15EQQ60JJA9Y8nKndU1Qc0lCBQ3buTwuPhmnh9PVwEj7UB9dms2ewgCANB+OAFz54LNv4gGi2VoO//ZqYrretpLGRiuRASMl/Sv+3OLgaIfq0Ib2nB7DAAD5HoK8I4Dc4Q3iMcIjjJoq8Ibfi8pqke0CTDZSr6+yYSOicLNC1Wh5Yp3Gii39pIeIbPw2e71XCjVQAg+sZMBK9nw/QYUIHDLupHQjhX7yY9DwjYgOM66QtBHtepQ9shwAoFHNHXhKPVf9gTCjgwZIq+IvjvXzwKmRlBXwi3zKCfeW2xl3MeYE2/eNGvjuzLL/36Tk9AQArV/0RotiCFIiaB7DSWnojTrQS2GUK3c9iGFNtSo5uCbFuTbczSrWW2Oc6299kFCnaJhV0kYpe52IW6/5calxVLyyj3zi5Yl1Ryn9E0UF7bQ0bjRsmtJ/zmmeXtPy+R2DWBaC0HQgAAAABJRU5ErkJggg==',
    qrcode = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAxlBMVEUAAADz8/X09Pf////////z9Pbz9PXz9PXz9Pbz9Pb19fjz9Pbz9Pby8/by9Pby8/by9Pby8/bz8/by9PXz8/Xy9ffy9ffy9fX09Pj29vb19fX19fX39/fy///y8/VkZWbAwcOBgoNtbm/a29yam53T1Nbs7e+Gh4jMzc5wcXKIiYro6OqOj5B5e3vu7/HR0dOTlJaxsbOurrCpqqx1dndpamvg4ePOz9DIysu6vL2hoaPj5ebX2Nm3uLri4+Xh4uScnZ98fH7AqlF0AAAAHnRSTlMA7FoOA/vT0KmOS/n389/bycXBnYJkY09GOjU0IBTYaE4oAAADWklEQVRo3s2aaVPqMBSGUypdUFERXC76hlIWawFBNsH9//+pW3qHAoE0ITRzeT7QmX7oMzSnJ8k5IXKY1VzZubKKxumpUbSunHKuapKsMAuujR3YbiEDiVkp5cElX6oc5ig4ZxBw5hSIIic5C1JYuROVx99cQJqLm70V9zb2wr4n+/B4jb25fiTS3BpQwLiVffsuFHGlRuLhEspcPhAhfwwcgPGHCLg7x0Gc35FUcnkcSD6X+nxkQIrhLo8MyN9xx/ccmXDOGekHAxlh7IzWk0tkxuWuL85Fhrg78g8y5XYrfxrIFIPNrdfImGtmfkHm3G9EkI3Msdcj6QYauFn7AxfQwMWJQo5TzHoWOPSeaht8IcLfvPcCHlayfuM+v003GU+BGWXog8dyzeeAwxNl6QBdyjIBB4fEmGfgUKMsHlCnLE1wODNjQQVpgm5jSWclaCQEaQJUYkEpVdDAEn8laGFJO1VQit9QXp8gb8YxJBT4r7UtQe/z9T0RpMaRKxT4Y0rnrCAakSAUCtxIYAsFr9GlzghCGlETCuxoCCASxBePESAOH6EAJqmKBZjXPZ8VTLvBAGJBdZHotERRkvDKegVl4ggEHX9JbSVoJjc9gcAhVwD05KKYK2LtJWgvwoflA3wsUgSfrzFlGAJ99l7QA58iMZDCtOOt0x72gHDubdD3kYJBTqGVU/0CAynMuvV1gn4IYJDcbAKjUSNECkbqIPuUZb5IfQkvcUw9I4XinmHqAV1WQL/TwlT1Q0sEog9NmCoarSXNlaDz89NZfBWz2ViUKtSS3RPwJpcqynLpOlQW5GQmnF6HBlNFQVVmyvxcrL9YQfM5wQcfU3bSDxiBJLbUsuU9isWBmsCVW3iFtSZYQWswnCCSDwch+BSUlo6x4JnSeojWiNJfpC8dSUlBsFx4PS0uPniUJJbvQXuJty5AEM+Vk+h33AKPisoGZPRP8OKNPgHUur9vEGxA+OnoZUvQBxryUeQINoHbE3zgA+GztKAg3MZi0lzno4cF380QMljaN+LaSwm6iyHayzm6C1K6S2rai4K6y5q6C7PaS8u6i+O6y/u6GxS6Wyy6m0S621y6G3X/v9V4WLP0ONq9yg3rY2q5KxwaOL5jD3sc3DjmoycZHJ7RfvznL6zuXWKi/q0XAAAAAElFTkSuQmCC',
    weappQrcode = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAzFBMVEUAAADz9Pb09Pf////////z9PXz9PXz8/bz9Pby9ff19fjy8/Xy9Pbz9Pby8/bz8/Xy9Pby8/by9Pby9PXz8/Xy9fX09Pj29vb19fX19fX39/fy///z9Pby8/Xy8/VkZWZtbm/Nzs/q6+3d3+GEhYbw8fO1trfQ0NJmZ2iRk5Tb3N3s7e/h4uTDxMaytLV/gIJ6envAwsPR0tWYmJp6fH3P0NG9v8GhoqOIiYp0dXaOjpC7vL3n6Oqtrq+lp6ibnJ7GxsiHiYmUlZeBgoKtqUcNAAAAHnRSTlMA+loOA9PQw6ljS+yO9/Pr39vJnYJPRjo1NCAUj+3POlmyAAADrElEQVRo3qzSxQHEMBADwLXjMDM4Uf9l3jsXMuwUID0kMhOsckjisMmFyJswTga5BsQlyIoIN6IiCxjS01jgkYhTv44sKfGhTDJypGQII6FULvFpC2Ntal0xR7ASzWRD97DWazI2HnCQj2RGFXBUGC2xdXDWbfRpqeGhXujDVMFLNdErKeBJyNd8MHhpmAQYiOlx3wosqoeltxpM6o1uqA5sOkVXOxjtdDGC1Uh/9AFWuaazHsx6OpnBbj496MdanewmDANhAA6iULpJrdQLl984JnvCEsJWKND3f6l6EyUo44DU7xRFiseeGU/6+Hf9y056wi0yEc0nk3kkMtzi6eIAH2iVh5uYWfEmzNHq4+GOGVdM2ZVpccfU68EtGrMG4whuPc96hpOfMELiw+nZMwZwERUzRovVUvi+WK4WI2ZUAi4DT+u+wYHbxRIe4CzgiQ3K4fDWbe9RHpt8l7hSmrrEvL1TH0ETZv8hGoTmDAK0R52hDkh+ZfLgyl7lg9TptvRQotdPURekBU8DAKmOkLT00StIEVM4avK1Lsv2ew9wpkQgvcoAfZDGDfkvYmZtU1uHMUh9WQKQioavT3Z9kzu7hwKkrjcESc+fsp7+rQ56OHzZ4KWeSyANHYMub6jgTm08Ol+Q1PZB7hh4n6CEDRU+/hXlIB93ts4hKJ+OQbRRuw1Q8yPfCUhm5QkQqFbdgDKg73GmcrBA3Uy+y6AV5gRYqIGR0Xe5B4Jg0ooMsK9MDbBikqD/Ce/OW7ZsCOBDKme2e7B03rV37wWE+eXO0iSe5RcB1kw5nU86B+HF64AwYXoxJTsy6XgOYAfpGorPdLUJnd9mrWAFYRiGXrzpH0zqGCtKhYF4GKuboP7/P2lr6cjpxbGHfbftsI40eUleojmgadP38gFTeJ6s5gCNiZ6RFzo7H9D0/u7MFw6YCF1y+sK1kV6UgC8Zu2k0eGtnLxKxh90UB1oX7J1eBq4zAjDQMFVcssNEXqiNAKIKTHaRVYcmX/zDCCCyg3SdEpsfA/3UiX8yMF3jhJN+svZ+iMlF3DFOOKqU2R8yBukvOGWqkr7NJ7ykMXDS15YtR38KprgJ+2jKFn3hdXZuNAKqwoteOrKLX3r5Tm9A2C0UvQlkt7H0RpwuJbDFELqcwxak6JKaRLU1q2JbsWVNsjC7o0vLbHGcLe+zBxTsEQt7SMQec7EHdf8fNX4ibnFM7zdljHsXD6xLGrkvWBoob+3hh8WNkldPVlieoa//vAGPUmBY/mbIawAAAABJRU5ErkJggg==',
    wechatMoments = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAyVBMVEUAAAB8yUV8ykWD0E2K7GN7yUZ7yUV8yUZ8yUZ8ykd+ykZ7yUV7yUZ7yEZ7yEZ7yUV8yUZ8yUZ7yUV8yUV8yUZ8yEd8ykh+ykZ7zEh9zEaAyUqAy0uGzkn///97yEX////b8M2r3Imt3Yyq24iS0mb0+u/o9d77/fny+e2V02r1+/GAykzL6ba54pyz35SP0GL3/PSh2HvU7cLP67yNz16Kzlrr9+O946Kw3o/v+Omo2oSY1G7G566Ey1HC5qqd1nTW7sbi8tbd8c/AL+m9AAAAHnRSTlMA01wOBPnszpBlSvz07t/dxcKqqaCCUk08NzQiFQF2GmbLAAAECElEQVRo3qzVVxKEIBBFUUEJYs757X+Z8z0WKqHPAm5X2QKJm3Tn09CyWgoha9YOE9/ThEq6aAULpZeUoJ53BR4VXR414zK9wAfRmyswn3EGJ4xnIfm8gbMm9x6xMnhhq1f+HOFtPN37c4UA1ez69TUCaadNHArB1PHd3yQiyO2rb0pEKc17nwtEEvy1DwIvE4wAAWEe91uCRPmw6UOCiDys50uBjLKdOA1C2nL/gNR8758VSFX3u3UEsfH2voDc+vcH/Sgr29WEgSCKrtgWSqGtigiC95pETTQ1aqLxq2rp+z9UaVjrrmay9vwduCfZGWZqcBIvpukoCsNh/n0MlnBSMyfpGS4WaUiTPpw8Gz/guO/jBfZzWozgpwNU8vZw5447fJAexpMrwYbMDvdtvV5lB05bUhvsPyAZnSq70DsvUVSQ6EQfg+GNgFyjgvNabULmkzQMtwJmkGmqgvqjO982aIHT8Fh3zWhCkw1m0a2Aa9ekNiCxDykYTAF3kGgUL/QCgTgnrw3L7Vng8cxkBYGX3zfqOBpgkWiDJeAXJDpVh2YZUjTYAi6qDo94KTOy1LDa3gh88XYqVYeEr/EKggLP82Os8itBApG66uL/rHJLkGAvvlFXXnRZ3yaLTcMIwWW0xvNUXnht6StpE82saorAyGcYo5y2agmVnZCviREY+fIctdS7UDlK+Rot8PUan6KcdyXdgr4jH4FegEU+pSbU1KtQyXlhWJIPz8znCOW8qiehEln5canA+8tnhHKelHQMQjM/8csEnnEgQukk/NBmNrsNwkAQVqReeu6tBy8kgEHUERB+Wgikff+XquTS2sWMNzl4L9zmkwDvzo55QJqIM8U7gJPW5wD4FRl9RXuA0tanFL0i+JGztddrfToJt2x96tFHhr9pY/QNAOljp3eAB01p/UI/DQDp04IOGmwVtdHXgBLoM3P5BTa7UlJViIF+AZfWp08dana4XTer/gqIPizC3Gx7OWzXeODUk9GnWESkCY/Wq2dkan0LQHkruuPf8NR11PU+4pHpGfpn+g/QTfWN9mqAQ99nW24OABGqGdoWr/G6OABKdwkKGy+vdZxzB0Bp4hK+BLaOfvNbW84qIkSoWmx+Wfu+BejjvSGMjH1nFhADAATFLCDMCrW4AKomizAwKxS/BEoDcAky5pZAfo1NMgdA1e2H0E/8Gssv4uUgtwCSmnAtmUX83ihhvsYbAMlaqEIwUQIMQ/h1RH6OgqvnB+OcblyiPpcyzxpVl4Ktw1PoQCp0pBY8FAwda4YOZoNHy6HD8dDxfvALivBXLJjwPW6K3c9E62kuWk/UDfxUI2WTpYNjupfsCevBNOVOxqKBwbfsgZSFG4N36QkdFs9QvvwHAKAPZKV4FLndAAAAAElFTkSuQmCC';
var shareIcon = {
  qq: qq,
  link: link,
  weibo: weibo,
  wechat: wechat,
  poster: poster,
  qrcode: qrcode,
  weappQrcode: weappQrcode,
  wechatMoments: wechatMoments
};

var _components$F;
var script$13 = {
  name: 'fm-share-sheet',
  components: (_components$F = {}, _components$F[Popup.name] = Popup, _components$F),
  props: {
    show: {
      type: Boolean,
      "default": false
    },
    options: {
      type: Array,
      "default": function _default() {
        return [];
      }
    },
    title: {
      type: String
    },
    cancelText: {
      type: String,
      "default": ''
    },
    description: {
      type: String
    },
    round: {
      type: Boolean,
      "default": true
    },
    duration: {
      //
      type: [Number, String],
      "default": 0.3
    },
    overlay: {
      //
      type: Boolean,
      "default": true
    },
    lockScroll: {
      //
      type: Boolean,
      "default": true
    },
    closeOnClickOverlay: {
      //
      type: Boolean,
      "default": true
    },
    closeOnClickAction: {
      //
      type: Boolean,
      "default": false
    }
  },
  emits: ['select', 'cancel', 'update:show'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;

    var onUpdateShow = function onUpdateShow(show) {
      emit('update:show', show);
    };

    var onCancel = function onCancel() {
      onUpdateShow(false);
      emit('cancel');
    };

    var PRESET_ICONS = ['qq', 'link', 'weibo', 'wechat', 'poster', 'qrcode', 'weappQrcode', 'wechatMoments'];

    var getIconURL = function getIconURL(icon) {
      if (PRESET_ICONS.indexOf(icon) !== -1) {
        //return `https://img.yzcdn.cn/vant/share-icon-${icon}.png`
        return shareIcon[icon];
      }

      return icon;
    };

    var popupShow = function popupShow(event) {
      onUpdateShow(event);

      if (!event) {
        emit('cancel');
      }
    };

    var optionClick = function optionClick(option, index) {
      emit('select', option, index);
    };

    var shareOptions = computed(function () {
      var result = [];

      if (Array.isArray(props.options[0])) {
        result = props.options;
      } else {
        result.push(props.options);
      }

      return result;
    });
    return {
      onCancel: onCancel,
      onUpdateShow: onUpdateShow,
      popupShow: popupShow,
      getIconURL: getIconURL,
      optionClick: optionClick,
      shareOptions: shareOptions
    };
  }
};

const _hoisted_1$K = {
  key: 0,
  class: "fm-sharesheet-header"
};
const _hoisted_2$B = { class: "fm-sharesheet-header-title" };
const _hoisted_3$p = {
  key: 0,
  class: "fm-sharesheet-description"
};
const _hoisted_4$k = { class: "fm-sharesheet-name" };
const _hoisted_5$g = {
  key: 0,
  class: "fm-sharesheet-description"
};
const _hoisted_6$d = { class: "fm-sharesheet-cancel-inner" };

function render$13(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_popup = resolveComponent("fm-popup");

  return (openBlock(), createBlock(_component_fm_popup, {
    show: $props.show,
    "onUpdate:show": _cache[2] || (_cache[2] = $event => ($setup.popupShow($event))),
    position: "bottom",
    class: ["fm-sharesheet", {
    'fm-sharesheet-round':$props.round
  }],
    overlay: $props.overlay,
    lockScroll: $props.lockScroll,
    closeOnClickOverlay: $props.closeOnClickOverlay,
    duration: $props.duration
  }, {
    default: withCtx(() => [
      ($props.title)
        ? (openBlock(), createBlock("div", _hoisted_1$K, [
            renderSlot(_ctx.$slots, "title", {}, () => [
              createVNode("span", _hoisted_2$B, toDisplayString($props.title), 1 /* TEXT */)
            ]),
            ($props.description)
              ? (openBlock(), createBlock("div", _hoisted_3$p, [
                  renderSlot(_ctx.$slots, "description", {}, () => [
                    createTextVNode(toDisplayString($props.description), 1 /* TEXT */)
                  ])
                ]))
              : createCommentVNode("v-if", true)
          ]))
        : createCommentVNode("v-if", true),
      (openBlock(true), createBlock(Fragment, null, renderList($setup.shareOptions, (shareItem, i) => {
        return (openBlock(), createBlock("div", {
          class: ["fm-sharesheet-options", [
    i !== 0? 'fm-sharesheet-options-border':null
  ]],
          key: i
        }, [
          (openBlock(true), createBlock(Fragment, null, renderList(shareItem, (item, index) => {
            return (openBlock(), createBlock("div", {
              class: ["fm-sharesheet-option", [item.className]],
              key: item.name,
              onClick: $event => ($setup.optionClick(item,index))
            }, [
              createVNode("img", {
                src: $setup.getIconURL(item.icon),
                alt: "",
                class: "fm-sharesheet-icon"
              }, null, 8 /* PROPS */, ["src"]),
              createVNode("span", _hoisted_4$k, toDisplayString(item.name), 1 /* TEXT */),
              (item.description)
                ? (openBlock(), createBlock("span", _hoisted_5$g, toDisplayString(item.description), 1 /* TEXT */))
                : createCommentVNode("v-if", true)
            ], 10 /* CLASS, PROPS */, ["onClick"]))
          }), 128 /* KEYED_FRAGMENT */))
        ], 2 /* CLASS */))
      }), 128 /* KEYED_FRAGMENT */)),
      ($props.cancelText)
        ? (openBlock(), createBlock("div", {
            key: 1,
            class: "fm-sharesheet-cancel",
            onClick: _cache[1] || (_cache[1] = (...args) => ($setup.onCancel && $setup.onCancel(...args)))
          }, [
            createVNode("div", _hoisted_6$d, toDisplayString($props.cancelText), 1 /* TEXT */)
          ]))
        : createCommentVNode("v-if", true)
    ]),
    _: 1 /* STABLE */
  }, 8 /* PROPS */, ["show", "overlay", "lockScroll", "closeOnClickOverlay", "duration", "class"]))
}

script$13.render = render$13;
script$13.__file = "packages/share-sheet/src/index.vue";

script$13.install = function (app) {
  app.component(script$13.name, script$13);
};

function resetData(data) {
  var results = [];

  if (data && data.commentIds && data.commentIds.length) {
    data.commentIds.forEach(function (commentId) {
      var item = data['comments'].find(function (comment) {
        return comment["id"] === commentId;
      });

      if (item) {
        var id = item["id"],
            userId = item["userId"],
            userName = item['user']["name"],
            imgData = item['user'].hasOwnProperty('imgData') ? item['user']["imgData"] : '',
            commentDate = item["commentDate"],
            text = item["text"],
            attachFiles = item.hasOwnProperty('attachFiles') ? item["attachFiles"] : [],
            parentData;

        if (item.hasOwnProperty('parentId')) {
          var parentItem = data['comments'].find(function (i) {
            return i.id === item.parentId;
          });

          if (parentItem) {
            var parid = parentItem["id"],
                paruserId = parentItem["userId"],
                paruserName = parentItem['user']["name"],
                parimgData = parentItem['user'].hasOwnProperty('imgData') ? parentItem['user']["imgData"] : '',
                parcommentDate = parentItem["commentDate"],
                partext = parentItem["text"],
                parattachFiles = parentItem.hasOwnProperty('attachFiles') ? parentItem["attachFiles"] : [];
            parentData = {
              id: parid,
              userId: paruserId,
              userName: paruserName,
              imgData: parimgData,
              commentDate: parcommentDate,
              text: partext,
              attachFiles: parattachFiles
            };
          }
        }

        var thisData = {
          id: id,
          userId: userId,
          userName: userName,
          imgData: imgData,
          commentDate: commentDate,
          text: text,
          attachFiles: attachFiles,
          parentData: parentData
        };
        results.push(thisData);
      } else {
        return;
      }
    });
  }

  return results;
}
function dateFormate(value) {
  if (value) {
    var date = new Date(value);

    if (isValidDate$1(date)) {
      var Y = date.getFullYear() + '-';
      var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';
      var D = date.getDate() < 10 ? '0' + date.getDate() + ' ' : date.getDate() + ' ';
      var h = date.getHours() < 10 ? '0' + date.getHours() + ':' : date.getHours() + ':';
      var m = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();
      return Y + M + D + h + m;
    } else {
      return value;
    }
  } else {
    return '';
  }
}

function isValidDate$1(date) {
  return date instanceof Date && !isNaN(date.getTime());
}

var script$14 = {
  name: 'fm-discussion-list',
  props: {
    discussionListData: {
      type: Object
    }
  },
  emits: ['reply'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var dateFormateFun = dateFormate;
    var innerDiscussionListData = computed(function () {
      if (props.discussionListData) {
        return resetData(props.discussionListData);
      } else {
        return [];
      }
    });

    var getAvatar = function getAvatar(item) {
      if (item && item['userName']) {
        var str = item['userName'];
        return str.substring(str.length - 2, str.length);
      } else {
        return '';
      }
    };

    var replyMessage = function replyMessage(item) {
      emit('reply', item);
    };

    return {
      replyMessage: replyMessage,
      innerDiscussionListData: innerDiscussionListData,
      getAvatar: getAvatar,
      dateFormateFun: dateFormateFun
    };
  }
};

const _hoisted_1$L = { class: "fm-discussion-list" };
const _hoisted_2$C = { class: "list-item-avatar" };
const _hoisted_3$q = { class: "list-item-content" };
const _hoisted_4$l = { class: "list-item-name" };
const _hoisted_5$h = {
  key: 0,
  class: "list-item-reply"
};
const _hoisted_6$e = { class: "list-item-reply-title" };
const _hoisted_7$9 = /*#__PURE__*/createTextVNode("  ");
const _hoisted_8$7 = { class: "list-item-reply-name" };
const _hoisted_9$7 = /*#__PURE__*/createTextVNode(" ");
const _hoisted_10$5 = { class: "list-item-buttom" };

function render$14(_ctx, _cache, $props, $setup, $data, $options) {
  return (openBlock(), createBlock("div", _hoisted_1$L, [
    (openBlock(true), createBlock(Fragment, null, renderList($setup.innerDiscussionListData, (item, index) => {
      return (openBlock(), createBlock("div", {
        class: "fm-discussion-list-item",
        key: item.id
      }, [
        createVNode("div", _hoisted_2$C, [
          (item.imgData)
            ? (openBlock(), createBlock("img", {
                key: 0,
                src: item.imgData,
                alt: "",
                class: "list-item-avatar-image"
              }, null, 8 /* PROPS */, ["src"]))
            : createCommentVNode("v-if", true),
          (!item.imgData)
            ? (openBlock(), createBlock("div", {
                key: 1,
                class: "list-item-avatar-image-tip",
                innerHTML: $setup.getAvatar(item)
              }, null, 8 /* PROPS */, ["innerHTML"]))
            : createCommentVNode("v-if", true)
        ]),
        createVNode("div", _hoisted_3$q, [
          createVNode("div", _hoisted_4$l, toDisplayString(item.userName), 1 /* TEXT */),
          createVNode("div", {
            class: "list-item-text",
            innerHTML: item.text
          }, null, 8 /* PROPS */, ["innerHTML"]),
          (item.parentData)
            ? (openBlock(), createBlock("div", _hoisted_5$h, [
                createVNode("span", _hoisted_6$e, [
                  _hoisted_7$9,
                  createVNode("span", _hoisted_8$7, toDisplayString(item.parentData.userName), 1 /* TEXT */),
                  _hoisted_9$7
                ]),
                createVNode("span", {
                  class: "list-item-reply-content",
                  innerHTML: item.parentData.text
                }, null, 8 /* PROPS */, ["innerHTML"])
              ]))
            : createCommentVNode("v-if", true),
          createVNode("div", _hoisted_10$5, [
            (item.commentDate && item.commentDate.length)
              ? (openBlock(), createBlock("span", {
                  key: 0,
                  class: "list-item-date",
                  innerHTML: $setup.dateFormateFun(item.commentDate)
                }, null, 8 /* PROPS */, ["innerHTML"]))
              : createCommentVNode("v-if", true),
            createVNode("div", {
              class: "list-item-btn",
              onClick: $event => ($setup.replyMessage(item))
            }, "", 8 /* PROPS */, ["onClick"])
          ])
        ])
      ]))
    }), 128 /* KEYED_FRAGMENT */))
  ]))
}

script$14.render = render$14;
script$14.__file = "packages/discussion-group/src/discussion-list/index.vue";

var _components$G;
var script$15 = {
  name: 'fm-discussion-editor',
  components: (_components$G = {}, _components$G[Input.name] = Input, _components$G[script.name] = script, _components$G[script$1.name] = script$1, _components$G[Toast.name] = Toast, _components$G[script$G.name] = script$G, _components$G[LookupInput.name] = LookupInput, _components$G),
  props: {
    placeholder: {
      type: String,
      "default": ''
    },
    replyUser: {
      type: Object
    },
    personnelsData: {
      type: Object
    },
    editHeight: {
      type: Number,
      "default": 130
    },
    idField: {
      type: String,
      "default": '',
      required: true
    },
    textField: {
      type: String,
      "default": '',
      required: true
    }
  },
  emits: ['submit', 'change'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit;
    var editorValue = ref(''); //

    var editorData = {
      //
      text: '',
      replyUser: props.replyUser,
      mailTos: []
    };
    var personnelsPrimaryKey = 'id';
    var personnelsDisplayKey = 'name';
    var selectedPersonnels = []; //@

    var editorContent = ref(null); //ref dom

    var lookupValue = ref(''); //

    onMounted(function () {
      if (props.replyUser && props.replyUser['id']) {
        editorContent.value.focus();
      }
    });
    /**
     * 
     */

    var modelValueChange = function modelValueChange(event) {
      if (event.target.composing) {
        return;
      }

      var children = event.target.children;
      var childrenId = [];

      for (var i = 0; i < children.length; i++) {
        childrenId.push(children[i].id);
      }

      selectedPersonnels.forEach(function (personnel, index) {
        if (!childrenId.includes(personnel[personnelsPrimaryKey])) {
          selectedPersonnels.splice(index, 1);
        }
      });

      if (selectedPersonnels.length) {
        var text = [];
        selectedPersonnels.forEach(function (personnel) {
          text.push(personnel[props.idField]);
        });
        lookupValue.value = text.join(',');
      } else {
        lookupValue.value = '';
      } //console.log(lookupValue.value)


      emit('change', editorValue.value);
    };

    watch(function () {
      return props.replyUser;
    }, function (value) {
      editorData.replyUser = value;

      if (value && value['id']) {
        editorContent.value.focus();
      }
    });
    /**
     * 
     */

    var submitHandler = function submitHandler() {
      if (!editorContent.value.innerHTML.length) {
        Toast('');
      } else {
        editorData.text = editorContent.value.innerHTML;
        editorData.mailTos = selectedPersonnels;
        emit('submit', editorData);
        editorValue.value = '';
        editorContent.value.innerHTML = '';
        selectedPersonnels = [];
      }
    };
    /**
     * 
     */


    var personnelsChange = function personnelsChange(event) {
      var selectedList = event.items;
      editorValue.value = editorContent.value.innerHTML;

      if (selectedList.length) {
        var tempValue = '';
        selectedList.forEach(function (item) {
          if (selectedPersonnels.length && isInArray(item[personnelsPrimaryKey], personnelsPrimaryKey, selectedPersonnels)) {
            return;
          } else {
            tempValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[personnelsPrimaryKey] + '" userid="' + item[personnelsPrimaryKey] + '">@' + item[personnelsDisplayKey] + '</a>&nbsp;';
            selectedPersonnels.push(item);
          }
        });
        editorValue.value += tempValue;
      }
    };
    /**
     * 
     */


    var isInArray = function isInArray(value, fieldInArray, array) {
      if (!value || !fieldInArray) {
        return false;
      }

      return array.findIndex(function (item) {
        return value === item[fieldInArray];
      }) === -1 ? false : true;
    };

    return {
      submitHandler: submitHandler,
      modelValueChange: modelValueChange,
      editorValue: editorValue,
      personnelsChange: personnelsChange,
      editorContent: editorContent,
      lookupValue: lookupValue
    };
  }
};

const _hoisted_1$M = { class: "fm-discussion-editor" };
const _hoisted_2$D = {
  key: 0,
  class: "fm-discussion-editor-reply"
};
const _hoisted_3$r = /*#__PURE__*/createTextVNode(" : ");
const _hoisted_4$m = { class: "editor-reply-text" };
const _hoisted_5$i = { class: "fm-discussion-editor-input" };
const _hoisted_6$f = { class: "fm-discussion-editor-buttom" };
const _hoisted_7$a = /*#__PURE__*/createTextVNode("");

function render$15(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_fm_lookup_input = resolveComponent("fm-lookup-input");
  const _component_fm_button = resolveComponent("fm-button");

  return (openBlock(), createBlock("div", _hoisted_1$M, [
    ($props.replyUser && $props.replyUser.id)
      ? (openBlock(), createBlock("div", _hoisted_2$D, [
          _hoisted_3$r,
          createVNode("span", _hoisted_4$m, toDisplayString($props.replyUser.userName), 1 /* TEXT */)
        ]))
      : createCommentVNode("v-if", true),
    createVNode("div", _hoisted_5$i, [
      createVNode("div", {
        class: "fm-discussion-editor-textarea",
        contenteditable: "true",
        innerHTML: $setup.editorValue,
        placeholder: $props.placeholder,
        onInput: _cache[1] || (_cache[1] = $event => ($setup.modelValueChange($event))),
        ref: "editorContent",
        style: {
                'height': $props.editHeight+'px'
            }
      }, null, 44 /* STYLE, PROPS, HYDRATE_EVENTS */, ["innerHTML", "placeholder"]),
      createVNode("div", _hoisted_6$f, [
        createVNode(_component_fm_lookup_input, {
          selectedValues: $setup.lookupValue,
          idField: $props.idField,
          textField: $props.textField,
          multiSelect: true,
          data: $props.personnelsData,
          onValueChange: _cache[2] || (_cache[2] = $event => ($setup.personnelsChange($event)))
        }, {
          template: withCtx((slotProps) => [
            createVNode("div", {
              class: "fm-discussion-editor-toolbar",
              onClick: slotProps.click
            }, " @ ", 8 /* PROPS */, ["onClick"])
          ]),
          _: 1 /* STABLE */
        }, 8 /* PROPS */, ["selectedValues", "idField", "textField", "data"]),
        createVNode(_component_fm_button, {
          type: "primary",
          size: "mini",
          onClick: _cache[3] || (_cache[3] = $event => ($setup.submitHandler()))
        }, {
          default: withCtx(() => [
            _hoisted_7$a
          ]),
          _: 1 /* STABLE */
        })
      ])
    ])
  ]))
}

script$15.render = render$15;
script$15.__file = "packages/discussion-group/src/discussion-editor/index.vue";

script$14.install = function (app) {
  app.component(script$14.name, script$14);
};

script$15.install = function (app) {
  app.component(script$15.name, script$15);
};

var script$16 = {
  name: 'fm-swipe',
  props: {
    width: [Number, String],
    height: [Number, String],
    autoplay: [Number, String],
    vertical: Boolean,
    lazyRender: Boolean,
    indicatorColor: String,
    loop: {
      type: Boolean,
      "default": true
    },
    duration: {
      type: [Number, String],
      "default": 500
    },
    touchable: {
      type: Boolean,
      "default": true
    },
    initialSwipe: {
      type: [Number, String],
      "default": 0
    },
    showIndicators: {
      type: Boolean,
      "default": true
    },
    stopPropagation: {
      type: Boolean,
      "default": true
    }
  },
  emits: ['change'],
  setup: function setup(props, _ref) {
    var emit = _ref.emit,
        slots = _ref.slots;
    var root = ref();
    var state = reactive({
      rect: null,
      width: 0,
      height: 0,
      offset: 0,
      active: 0,
      swiping: false
    });
    var children = reactive([]);
    var touch = useTouch(); //const windowSize = useWindowSize();

    /** */

    var addSwipe = function addSwipe(swipe) {
      children.push(swipe);
    };

    var count = computed(function () {
      return children.length;
    });
    var size = computed(function () {
      return state[props.vertical ? 'height' : 'width'];
    });
    var delta = computed(function () {
      return props.vertical ? touch.deltaY.value : touch.deltaX.value;
    });
    var minOffset = computed(function () {
      return (props.vertical ? state.rect.height : state.rect.width) - size.value * count.value;
    });
    var maxCount = computed(function () {
      return Math.ceil(Math.abs(minOffset.value) / size.value);
    });
    var trackSize = computed(function () {
      return count.value * size.value;
    });
    var activeIndicator = computed(function () {
      return (state.active + count.value) % count.value;
    });
    var isCorrectDirection = computed(function () {
      var expect = props.vertical ? 'vertical' : 'horizontal';
      return touch.direction.value === expect;
    });
    var trackStyle = computed(function () {
      var _ref2;

      var mainAxis = props.vertical ? 'height' : 'width';
      var crossAxis = props.vertical ? 'width' : 'height';
      return _ref2 = {}, _ref2[mainAxis] = trackSize.value + "px", _ref2[crossAxis] = props[crossAxis] ? props[crossAxis] + "px" : '', _ref2.transitionDuration = (state.swiping ? 0 : props.duration) + "ms", _ref2.transform = "translate" + (props.vertical ? 'Y' : 'X') + "(" + state.offset + "px)", _ref2;
    });
    /**  */

    var getTargetActive = function getTargetActive(pace) {
      var active = state.active;

      if (pace) {
        if (props.loop) {
          return range(active + pace, -1, count.value);
        }

        return range(active + pace, 0, maxCount.value);
      }

      return active;
    };

    var getTargetOffset = function getTargetOffset(targetActive, offset) {
      if (offset === void 0) {
        offset = 0;
      }

      var currentPosition = targetActive * size.value;

      if (!props.loop) {
        currentPosition = Math.min(currentPosition, -minOffset.value);
      }

      var targetOffset = offset - currentPosition;

      if (!props.loop) {
        targetOffset = range(targetOffset, minOffset.value, 0);
      }

      return targetOffset;
    };

    var move = function move(_ref3) {
      var _ref3$pace = _ref3.pace,
          pace = _ref3$pace === void 0 ? 0 : _ref3$pace,
          _ref3$offset = _ref3.offset,
          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,
          emitChange = _ref3.emitChange;

      if (count.value <= 1) {
        return;
      }

      var active = state.active;
      var targetActive = getTargetActive(pace);
      var targetOffset = getTargetOffset(targetActive, offset); // auto move first and last swipe in loop mode

      if (props.loop) {
        if (children[0] && targetOffset !== minOffset.value) {
          var outRightBound = targetOffset < minOffset.value;
          children[0].setOffset(outRightBound ? trackSize.value : 0);
        }

        if (children[count.value - 1] && targetOffset !== 0) {
          var outLeftBound = targetOffset > 0;
          children[count.value - 1].setOffset(outLeftBound ? -trackSize.value : 0);
        }
      }

      state.active = targetActive;
      state.offset = targetOffset;

      if (emitChange && targetActive !== active) {
        emit('change', activeIndicator.value);
      }
    };

    var correctPosition = function correctPosition() {
      state.swiping = true;

      if (state.active <= -1) {
        move({
          pace: count.value
        });
      }

      if (state.active >= count.value) {
        move({
          pace: -count.value
        });
      }
    };

    var prev = function prev() {
      correctPosition();
      touch.reset(); //doubleRaf(() => {

      setTimeout(function () {
        state.swiping = false;
        move({
          pace: -1,
          emitChange: true
        });
      }, 0); //})
    };

    var next = function next() {
      correctPosition();
      touch.reset(); //doubleRaf(() => {

      setTimeout(function () {
        state.swiping = false;
        move({
          pace: 1,
          emitChange: true
        });
      }, 0); // })
    };

    var autoplayTimer;

    var stopAutoplay = function stopAutoplay() {
      clearTimeout(autoplayTimer);
    };

    var autoplay = function autoplay() {
      if (props.autoplay > 0 && count.value > 1) {
        stopAutoplay();
        autoplayTimer = setTimeout(function () {
          next();
          autoplay();
        }, props.autoplay);
      }
    }; // initialize swipe position


    var initialize = function initialize(active) {
      if (active === void 0) {
        active = +props.initialSwipe;
      }

      if (!root.value || isHidden(root)) {
        return;
      }

      stopAutoplay(); //const rect = useElementRect(root.value)

      var rect = root.value.getBoundingClientRect(); // state.rect = rect

      state.rect = rect;
      state.swiping = true;
      state.active = active;
      state.width = +props.width || rect.width;
      state.height = +props.height || rect.height;
      state.offset = getTargetOffset(active);
      children.forEach(function (swipe) {
        swipe.setOffset(0);
      });
      autoplay();
    };

    var resize = function resize() {
      initialize(activeIndicator.value);
    };

    var touchStartTime;

    var onTouchStart = function onTouchStart(event) {
      if (!props.touchable) return;
      touch.start(event);
      touchStartTime = Date.now();
      stopAutoplay();
      correctPosition();
    };

    var onTouchMove = function onTouchMove(event) {
      if (props.touchable && state.swiping) {
        touch.move(event);

        if (isCorrectDirection.value) {
          preventDefault(event, props.stopPropagation);
          move({
            offset: delta.value
          });
        }
      }
    };

    var onTouchEnd = function onTouchEnd() {
      if (!props.touchable || !state.swiping) {
        return;
      }

      var duration = Date.now() - touchStartTime;
      var speed = delta.value / duration;
      var shouldSwipe = Math.abs(speed) > 0.25 || Math.abs(delta.value) > size.value / 2;

      if (shouldSwipe && isCorrectDirection.value) {
        var offset = props.vertical ? touch.offsetY.value : touch.offsetX.value;
        var pace = 0;

        if (props.loop) {
          pace = offset > 0 ? delta.value > 0 ? -1 : 1 : 0;
        } else {
          pace = -Math[delta.value > 0 ? 'ceil' : 'floor'](delta.value / size.value);
        }

        move({
          pace: pace,
          emitChange: true
        });
      } else if (delta.value) {
        move({
          pace: 0
        });
      }

      state.swiping = false;
      autoplay();
    };

    var swipeTo = function swipeTo(index, options) {
      if (options === void 0) {
        options = {};
      }

      correctPosition();
      touch.reset();
      setTimeout(function () {
        var targetIndex;

        if (props.loop && index === count.value) {
          targetIndex = state.active === 0 ? 0 : index;
        } else {
          targetIndex = index % count.value;
        }

        if (options.immediate) {
          //doubleRaf(() => {
          setTimeout(function () {
            state.swiping = false;
          }, 0); //})
        } else {
          state.swiping = false;
        }

        move({
          pace: targetIndex - state.active,
          emitChange: true
        });
      }); //doubleRaf(() => {
      //})
    };

    useExpose({
      prev: prev,
      next: next,
      state: state,
      resize: resize,
      swipeTo: swipeTo
    });
    watch([function () {
      return children.length;
    }, function () {
      return props.initialSwipe;
    }], function () {
      initialize();
    });
    watch(function () {
      return props.autoplay;
    }, function (value) {
      if (value > 0) {
        autoplay();
      } else {
        stopAutoplay();
      }
    }); //watch([windowSize.width, windowSize.height], resize)
    // watch(usePageVisibility(), (visible) => {
    //   if (visible) {
    //     autoplay()
    //   } else {
    //     stopAutoplay()
    //   }
    // })

    onMounted(function () {
      window.addEventListener('resize', resize);
    });
    onBeforeUnmount(function () {
      window.removeEventListener('resize', resize);
      stopAutoplay();
    });
    onDeactivated(function () {
      window.removeEventListener('resize', resize);
      stopAutoplay();
    });
    onMountedOrActivated(initialize);
    provide('rootSwipe', {
      addSwipe: addSwipe,
      props: props,
      size: size,
      activeIndicator: activeIndicator,
      count: count,
      children: children
    });
    return {
      state: state,
      root: root,
      count: count,
      children: children,
      onTouchEnd: onTouchEnd,
      onTouchMove: onTouchMove,
      onTouchStart: onTouchStart,
      trackStyle: trackStyle,
      activeIndicator: activeIndicator
    };
  }
};

var _hoisted_1$N = {
  "class": "fm-swipe",
  ref: "root"
};
function render$16(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", _hoisted_1$N, [createVNode("div", {
    "class": ["fm-swipe-box", {
      'fm-swipe-box-vertical': $props.vertical
    }],
    style: $setup.trackStyle,
    onTouchstart: _cache[1] || (_cache[1] = function () {
      return $setup.onTouchStart && $setup.onTouchStart.apply($setup, arguments);
    }),
    onTouchmove: _cache[2] || (_cache[2] = function () {
      return $setup.onTouchMove && $setup.onTouchMove.apply($setup, arguments);
    }),
    onTouchend: _cache[3] || (_cache[3] = function () {
      return $setup.onTouchEnd && $setup.onTouchEnd.apply($setup, arguments);
    }),
    onTouchcancel: _cache[4] || (_cache[4] = function () {
      return $setup.onTouchEnd && $setup.onTouchEnd.apply($setup, arguments);
    })
  }, [renderSlot(_ctx.$slots, "default")], 38
  /* CLASS, STYLE, HYDRATE_EVENTS */
  ), renderSlot(_ctx.$slots, "indicator", {
    active: $setup.activeIndicator
  }, function () {
    return [$setup.count > 1 && $props.showIndicators ? (openBlock(), createBlock("div", {
      key: 0,
      "class": ["fm-swipe-indicators", {
        'fm-swipe-indicators-vertical': $props.vertical
      }]
    }, [(openBlock(true), createBlock(Fragment, null, renderList($setup.count, function (countitem, index) {
      return openBlock(), createBlock("div", {
        key: countitem,
        "class": ["fm-swipe-indicator", {
          'fm-swipe-indicator-active': index === $setup.activeIndicator
        }],
        style: {
          'background-color': $props.indicatorColor && index === $setup.activeIndicator ? $props.indicatorColor : ''
        }
      }, null, 6
      /* CLASS, STYLE */
      );
    }), 128
    /* KEYED_FRAGMENT */
    ))], 2
    /* CLASS */
    )) : createCommentVNode("v-if", true)];
  })], 512
  /* NEED_PATCH */
  );
}

script$16.render = render$16;
script$16.__file = "packages/swipe/src/swipe.vue";

script$16.install = function (app) {
  app.component(script$16.name, script$16);
};

var script$17 = {
  name: 'fm-swipe-item',
  setup: function setup() {
    var rootSwipe = inject('rootSwipe');
    var internalInstance = getCurrentInstance();
    onBeforeMount(function () {
      rootSwipe.addSwipe(internalInstance.ctx);
    });
    var rendered;
    var state = reactive({
      offset: 0,
      inited: false,
      mounted: false
    });
    var style = computed(function () {
      var style = {};
      var vertical = rootSwipe.props.vertical;
      style[vertical ? 'height' : 'width'] = rootSwipe.size.value + "px";

      if (state.offset) {
        style.transform = "translate" + (vertical ? 'Y' : 'X') + "(" + state.offset + "px)";
      }

      return style;
    });
    var shouldRender = computed(function () {
      var _rootSwipe$props = rootSwipe.props,
          loop = _rootSwipe$props.loop,
          lazyRender = _rootSwipe$props.lazyRender;

      if (!lazyRender || rendered) {
        return true;
      } // wait for all item to mount, so we can get the exact count


      if (!state.mounted) {
        return false;
      }

      var active = rootSwipe.activeIndicator.value;
      var maxActive = rootSwipe.count.value - 1;
      var prevActive = active === 0 && loop ? maxActive : active - 1;
      var nextActive = active === maxActive && loop ? 0 : active + 1;
      var index = 0;

      if (rootSwipe.children.length) {
        index = rootSwipe.children.findIndex(function (child) {
          return child.$el == internalInstance.ctx.$el;
        });
      }

      rendered = index === active || index === prevActive || index === nextActive;
      return rendered;
    });

    var setOffset = function setOffset(offset) {
      state.offset = offset;
    };

    onMounted(function () {
      nextTick(function () {
        state.mounted = true;
      });
    });
    useExpose({
      setOffset: setOffset
    });
    return {
      state: state,
      style: style,
      shouldRender: shouldRender,
      setOffset: setOffset
    };
  }
};

function render$17(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createBlock("div", {
    "class": "fm-swipe-item",
    style: $setup.style
  }, [$setup.shouldRender ? renderSlot(_ctx.$slots, "default", {
    key: 0
  }) : createCommentVNode("v-if", true)], 4
  /* STYLE */
  );
}

script$17.render = render$17;
script$17.__file = "packages/swipe/src/swipe-item.vue";

script$17.install = function (app) {
  app.component(script$17.name, script$17);
};

var script$18 = {
  name: 'fm-staff-card',
  props: {
    staffName: {
      type: String
    },
    title: {
      type: String
    },
    departmentName: {
      type: String
    },
    staffImage: {
      type: String
    }
  }
};

var _hoisted_1$O = {
  "class": "fm-staff-card"
};
var _hoisted_2$E = {
  "class": "fm-staff-card-image"
};
var _hoisted_3$s = {
  "class": "fm-staff-card-main"
};
var _hoisted_4$n = {
  "class": "staff-main-text"
};

var _hoisted_5$j = /*#__PURE__*/createTextVNode(" ");

var _hoisted_6$g = {
  "class": "pl-base"
};
var _hoisted_7$b = {
  "class": "staff-main-subtext"
};
function render$18(_ctx, _cache, $props, $setup, $data, $options) {
  return renderSlot(_ctx.$slots, "default", {}, function () {
    return [createVNode("div", _hoisted_1$O, [createVNode("div", _hoisted_2$E, [createVNode("img", {
      src: $props.staffImage,
      alt: "",
      "class": "fm-staff-card-img"
    }, null, 8
    /* PROPS */
    , ["src"])]), createVNode("div", _hoisted_3$s, [createVNode("div", _hoisted_4$n, [createVNode("span", null, toDisplayString($props.staffName), 1
    /* TEXT */
    ), _hoisted_5$j, createVNode("span", _hoisted_6$g, "" + toDisplayString($props.title) + "", 1
    /* TEXT */
    )]), createVNode("div", _hoisted_7$b, toDisplayString($props.departmentName), 1
    /* TEXT */
    )])])];
  });
}

script$18.render = render$18;
script$18.__file = "packages/staff-card/src/index.vue";

script$18.install = function (app) {
  app.component(script$18.name, script$18);
};

var components = [Input, script$Y, script$3, script$1, script$8, script$9, script$o, script$a, script$b, script$c, Collapse, DatePicker, Dialog, script$s, script, script$t, script$u, Loading, script$G, script$H, script$A, Notify, Overlay, Picker, script$2, Popup, script$J, Collapse$1, script$K, script$L, script$q, script$M, script$N, script$O, script$P, script$Q, script$R, script$S, script$T, Toast, script$V, script$W, script$X, script$Z, script$_, script$$, script$11, script$12, script$13, script$14, script$15, script$16, script$17, script$18];

var install = function install(app) {
  components.forEach(function (component) {
    if (component.install) {
      app.use(component);
    } else {
      app.component(component.name, component);
    }
  });
};
var index$2 = {
  install: install
};

export default index$2;
export { script$3 as ActionBar, script$1 as Button, script$8 as Calendar, script$9 as CalendarInput, script$a as Cell, script$c as Checkbox, Collapse, DatePicker, Dialog, DragStatus, script$s as Filter, script$o as FilterPanel, script$X as HtmlPanel, script as Icon, script$t as Image, script$u as Listview, Loading, script$H as LookupInput, script$G as LookupPanel, script$A as Navbar, script$Z as NoticeBar, Notify, Overlay, Picker, script$2 as Popover, Popup, script$J as Radio, Collapse$1 as Rate, script$K as Schedule, script$L as ScrollView, script$q as Search, script$18 as StaffCard, script$V as Steps, script$16 as Swipe, script$17 as SwipeItem, script$W as Swipecell, script$M as Switch, script$N as SwitchCell, script$O as Tab, script$P as TabBar, script$Q as Tabs, script$R as Tag, script$S as Tags, script$T as Text, Toast, createState, dynamicTemplate, install, mountComponent, provideState, stateSymbol, supportsPassive, useBack, useBem, useClickAway, useDynamicTemplate, useElementRect, useEventListener, useExpose, useLazyRender, useLockScroll, useMd5, usePopupState, useRootProps, useState, useTouch, useTouchMove };
