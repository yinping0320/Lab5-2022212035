/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, Input, Output, EventEmitter, HostListener, ViewChild, forwardRef, Injector, Optional } from '@angular/core';
import { Observable } from 'rxjs';
import { NotifyService } from '@farris/ui-notify';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { LocaleService } from '@farris/ui-locale';
import { WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';
/**
 * @record
 */
export function upImageFile() { }
if (false) {
    /** @type {?} */
    upImageFile.prototype.size;
    /** @type {?} */
    upImageFile.prototype.name;
    /** @type {?} */
    upImageFile.prototype.type;
    /** @type {?|undefined} */
    upImageFile.prototype.lastModified;
    /** @type {?|undefined} */
    upImageFile.prototype.lastModifiedDate;
    /** @type {?|undefined} */
    upImageFile.prototype.state;
    /** @type {?|undefined} */
    upImageFile.prototype.base64;
}
export class AvatarComponent {
    /**
     * @param {?} notifyService
     * @param {?} localeService
     * @param {?} inject
     */
    constructor(notifyService, localeService, inject) {
        this.notifyService = notifyService;
        this.localeService = localeService;
        this.inject = inject;
        this.defaultImgSrc = 'data:image/jpeg;base64,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';
        this.errorImgSrc = 'data:image/jpeg;base64,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';
        // @Input() cover = '';
        this.tReadOnly = false;
        // @Input() type;
        this.size = 1;
        this.avatarWidth = 100;
        this.avatarHeight = 100;
        this.imgShape = 'circle';
        this.imgtitle = '点击修改';
        // @Input() isBase64:boolean = true;
        this.imgChange = new EventEmitter();
        this.onChangeCallback = (/**
         * @return {?}
         */
        () => { });
        this.onTouchedCallback = (/**
         * @return {?}
         */
        () => { });
        this.perfixStr = '';
        this.imgType = 'image/*';
        this.currentImgType = ['image/image', 'image/webp', 'image/png', 'image/svg', 'image/gif', 'image/jpg', 'image/jpeg', 'image/bmp'];
        this.notifyService.config.position = 'top-center';
        if (this.inject) {
            if (WEBAPI_PREFIX_TOKEN) {
                this.perfixStr = this.inject.get(WEBAPI_PREFIX_TOKEN, '');
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set readonly(value) {
        if (value !== this.tReadOnly) {
            /** @type {?} */
            let localeTitle = this.localeService.getValue('avatar.imgtitle');
            this.imgtitle = value ? '' : (this.imgTitle ? this.imgTitle : localeTitle);
            this.tReadOnly = value;
        }
    }
    ;
    /**
     * @return {?}
     */
    get readonly() {
        return this.tReadOnly;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set type(val) {
        if (val && val.length) {
            /** @type {?} */
            let types = val;
            if (typeof val === 'string') {
                types = val.split(',');
            }
            if (types && types.length) {
                this.currentImgType = [];
                types.forEach((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => {
                    if ((typeof t == 'string') && t.constructor == String) {
                        /** @type {?} */
                        let tImgtype = 'image/' + t;
                        if (t === 'jpg') {
                            /** @type {?} */
                            let jpgType = 'image/jpeg';
                            this.currentImgType.push(jpgType);
                        }
                        this.currentImgType.push(tImgtype);
                    }
                }));
                if (this.currentImgType.length > 0) {
                    this.imgType = this.currentImgType.join(',');
                }
            }
        }
    }
    /**
     * @return {?}
     */
    get type() {
        return this._type;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set cover(val) {
        if (val) {
            this._cover = val;
            this.imgsrcInit(this.cover);
        }
        else {
            this.imgSrc = this.defaultImgSrc;
        }
    }
    /**
     * @return {?}
     */
    get cover() {
        return this._cover;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // if(this.cover){
        //   this.imgsrcInit(this.cover);
        // }
        // else{
        //   this.imgSrc = this.defaultImgSrc;
        // }
        if (this.readonly) {
            this.imgtitle = '';
        }
        else if (this.imgTitle) {
            this.imgtitle = this.imgTitle;
        }
        else {
            this.imgtitle = this.localeService.getValue('avatar.imgtitle');
        }
    }
    /*判断cover数据格式，做出修改赋值给imgSrc
      */
    /**
     * @param {?} val
     * @return {?}
     */
    imgsrcInit(val) {
        /** @type {?} */
        let isImg = this.isSrc(val);
        if (isImg) {
            this.imgSrc = this.perfixStr + val;
        }
        else {
            /** @type {?} */
            let isFullBase64 = this.isBaseSrc(val);
            if (isFullBase64) {
                this.imgSrc = val;
            }
            else {
                this.imgSrc = this.addBase64(val);
            }
        }
    }
    /**
     * @return {?}
     */
    onClick() {
        if (this.readonly) {
            return;
        }
        ((/** @type {?} */ (this.file.nativeElement))).click();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getfiledata(event) {
        if (this.readonly) {
            return;
        }
        /** @type {?} */
        const filetarget = (/** @type {?} */ (event.target));
        /** @type {?} */
        let getfile = filetarget.files;
        if (!getfile[0]) {
            return;
        }
        /** @type {?} */
        let fileType = getfile[0].type;
        /** @type {?} */
        const isLtSize = getfile[0].size / 1024 / 1024 < this.size;
        if (this.currentImgType.indexOf(fileType) < 0) {
            /** @type {?} */
            let typeerrorText = this.localeService.getValue('avatar.typeError');
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: typeerrorText
            });
            filetarget.value = '';
            // this.notifyService.error('上传图片类型不正确');
            return;
        }
        if (!isLtSize) {
            /** @type {?} */
            let sizeerrorText = this.localeService.getValue('avatar.sizeError');
            /** @type {?} */
            let errormes = sizeerrorText + this.size + "M!";
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: errormes
            });
            filetarget.value = '';
            // this.notifyService.error(`上传图片不能大于${this.size}M!`);
            return;
        }
        this.transformFile(getfile[0]);
        filetarget.value = '';
    }
    /**
     * @return {?}
     */
    getImgFileObj() {
        return this.imgFileObj;
    }
    /**
     * @param {?} getfile
     * @return {?}
     */
    transformFile(getfile) {
        // const subject = new Subject();
        this.imgFileObj = {
            size: getfile.size,
            name: getfile.name,
            type: getfile.type,
            lastModified: getfile.lastModified,
            lastModifiedDate: getfile.lastModifiedDate
        };
        this.do(getfile).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.loadingImg = false;
            if (res['state'] === 'done') {
                this.imgSrc = res['result'];
                //this.onChangeCallback(this.imgSrc);
                this.onChangeCallback(this.removeBase64(this.imgSrc));
                this.onTouchedCallback();
            }
            else if (res['state'] === 'error') {
                /** @type {?} */
                let uploaderrorText = this.localeService.getValue('avatar.uploadError');
                this.notifyService.error({
                    type: 'error',
                    title: '',
                    msg: uploaderrorText
                });
                // this.notifyService.error('图片上传失败，请重试!');
            }
            this.imgFileObj.state = res['state'];
            this.imgFileObj.base64 = res['result'];
            this.imgChange.emit(this.imgFileObj);
        }));
    }
    /**
     * @param {?} file
     * @return {?}
     */
    read(file) {
        return Observable.create((/**
         * @param {?} observer
         * @return {?}
         */
        observer => {
            /** @type {?} */
            const reader = new FileReader();
            reader.readAsDataURL(file);
            //this.loadingImg = true;
            // reader.onloadstart=function(){}
            reader.onload = (/**
             * @return {?}
             */
            () => {
                //console.log(reader.result);
                observer.next({ state: 'done', 'result': reader.result });
                observer.complete();
            });
            reader.onerror = (/**
             * @return {?}
             */
            function () {
                observer.next({ state: 'error', 'result': reader.result });
                observer.complete();
            });
        }));
    }
    /**
     * @param {?} file
     * @return {?}
     */
    do(file) {
        return this.read((/** @type {?} */ (file)));
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (val && val.length) {
            // if(this.isBase64){
            //   this.imgSrc = this.addBase64(val);
            // }
            // else{
            //   this.imgSrc = val;
            // }
            this.imgsrcInit(val);
        }
        else if (this.cover) {
            this.imgsrcInit(this.cover);
        }
        else {
            this.imgSrc = this.defaultImgSrc;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    // setDisabledState?(isDisabled: boolean): void {
    //     this.disabled = isDisabled;
    // }
    /**
     * @param {?} val
     * @return {?}
     */
    addBase64(val) {
        if (!val)
            return;
        return 'data:image/jpeg;base64,' + val;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    removeBase64(val) {
        if (!val)
            return;
        /** @type {?} */
        let img_arr = val.split(',');
        if (img_arr.length) {
            return img_arr[1];
        }
    }
    //判断是否是图片路径
    /**
     * @param {?} url
     * @return {?}
     */
    isSrc(url) {
        return (url.match(/\.(jpeg|jpg|gif|png|svg|bmp|webp)$/) != null);
    }
    //判断是否是完成base64
    /**
     * @param {?} url
     * @return {?}
     */
    isBaseSrc(url) {
        return (url.indexOf('data:image/') > -1 ? true : false);
    }
    /**
     * @return {?}
     */
    errorSrc() {
        this.imgSrc = this.errorImgSrc;
        this.imgtitle = this.localeService.getValue('avatar.loadError');
    }
}
AvatarComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-avatar',
                template: "<!-- bugNum5:471047 -->\r\n<div class=\"f-avatar\" [title]=\"imgtitle\"\r\n    [ngClass]=\"{'f-avatar-readonly': tReadOnly,'f-avatar-circle':imgShape === 'circle','f-avatar-square':imgShape === 'square'}\"\r\n    [ngStyle]=\"{'width': avatarWidth+'px','height':avatarHeight+'px'}\">\r\n    <ng-container *ngIf=\"loadingImg\">\r\n        <div class=\"f-avatar-upload-loading\">\r\n            <div class=\"loading-inner\">\r\n                \u52A0\u8F7D\u4E2D\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <img class=\"f-avatar-image\" [attr.src]=\"imgSrc\" (error)=\"errorSrc()\">\r\n    <div class=\"f-avatar-icon\" *ngIf=\"!tReadOnly\">\r\n        <span class=\"f-icon f-icon-camera\"></span>\r\n    </div>\r\n    <input type=\"file\" class=\"f-avatar-upload\" [accept]='imgType' (change)=\"getfiledata($event)\" #file\r\n        style=\"display: none;\">\r\n</div>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => AvatarComponent)),
                        multi: true
                    }
                ],
                styles: [".f-avatar{position:relative;cursor:pointer;overflow:hidden}.f-avatar.f-avatar-readonly{cursor:default}.f-avatar.f-avatar-circle{border-radius:100%;overflow:hidden}.f-avatar.f-avatar-square{border-radius:0}.f-avatar .f-avatar-defult,.f-avatar .f-avatar-image{display:inline-block;width:100%;height:100%}.f-avatar .f-avatar-icon{display:none;position:absolute;left:0;right:0;top:0;bottom:0;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:rgba(0,0,0,.3)}.f-avatar .f-avatar-icon .f-icon{font-size:24px;color:#fff}.f-avatar.f-avatar-circle .f-avatar-icon{border-radius:100%}.f-avatar.f-avatar-square .f-avatar-icon{border-radius:0}.f-avatar .f-avatar-upload-loading{position:absolute;left:0;top:0;display:inline-block;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.f-avatar .f-avatar-upload-loading .loading-inner{position:absolute;width:100%;left:0;top:50%;margin-top:-25px;height:50px;line-height:50px;text-align:center;font-size:16px;color:#fff}.f-avatar:hover .f-avatar-icon{display:-webkit-box;display:flex}"]
            }] }
];
/** @nocollapse */
AvatarComponent.ctorParameters = () => [
    { type: NotifyService },
    { type: LocaleService },
    { type: Injector, decorators: [{ type: Optional }] }
];
AvatarComponent.propDecorators = {
    file: [{ type: ViewChild, args: ['file',] }],
    readonly: [{ type: Input }],
    size: [{ type: Input }],
    imgTitle: [{ type: Input }],
    avatarWidth: [{ type: Input }],
    avatarHeight: [{ type: Input }],
    imgShape: [{ type: Input }],
    imgChange: [{ type: Output, args: ['imgChange',] }],
    type: [{ type: Input }],
    cover: [{ type: Input }],
    onClick: [{ type: HostListener, args: ['click',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.defaultImgSrc;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.errorImgSrc;
    /** @type {?} */
    AvatarComponent.prototype.imgSrc;
    /** @type {?} */
    AvatarComponent.prototype.file;
    /** @type {?} */
    AvatarComponent.prototype.tReadOnly;
    /** @type {?} */
    AvatarComponent.prototype.size;
    /** @type {?} */
    AvatarComponent.prototype.imgTitle;
    /** @type {?} */
    AvatarComponent.prototype.avatarWidth;
    /** @type {?} */
    AvatarComponent.prototype.avatarHeight;
    /** @type {?} */
    AvatarComponent.prototype.imgShape;
    /** @type {?} */
    AvatarComponent.prototype.imgtitle;
    /** @type {?} */
    AvatarComponent.prototype.imgChange;
    /** @type {?} */
    AvatarComponent.prototype._type;
    /** @type {?} */
    AvatarComponent.prototype._cover;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.perfixStr;
    /** @type {?} */
    AvatarComponent.prototype.loadingImg;
    /** @type {?} */
    AvatarComponent.prototype.imgType;
    /** @type {?} */
    AvatarComponent.prototype.imgFileObj;
    /** @type {?} */
    AvatarComponent.prototype.currentImgType;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.notifyService;
    /** @type {?} */
    AvatarComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.inject;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYXZhdGFyLyIsInNvdXJjZXMiOlsibGliL2F2YXRhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXdCLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xLLE9BQU8sRUFBRSxVQUFVLEVBQVcsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7Ozs7QUFFeEQsaUNBUUM7OztJQVBDLDJCQUFhOztJQUNiLDJCQUFhOztJQUNiLDJCQUFhOztJQUNiLG1DQUFzQjs7SUFDdEIsdUNBQXdCOztJQUN4Qiw0QkFBZTs7SUFDZiw2QkFBZ0I7O0FBZWxCLE1BQU0sT0FBTyxlQUFlOzs7Ozs7SUFrRjFCLFlBQW9CLGFBQTRCLEVBQVMsYUFBNEIsRUFBcUIsTUFBZTtRQUFyRyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQXFCLFdBQU0sR0FBTixNQUFNLENBQVM7UUFqRmpILGtCQUFhLEdBQUcseXNHQUF5c0csQ0FBQTtRQUN6dEcsZ0JBQVcsR0FBRyw2a0ZBQTZrRixDQUFDOztRQUtwbUYsY0FBUyxHQUFZLEtBQUssQ0FBQzs7UUFjbEIsU0FBSSxHQUFXLENBQUMsQ0FBQztRQUVqQixnQkFBVyxHQUFXLEdBQUcsQ0FBQztRQUMxQixp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QUdsQixLQUFLO29CQTZCTCxLQUFLO3NCQW1FTCxZQUFZLFNBQUMsT0FBTzs7Ozs7OztJQTlIckIsd0NBQWl1Rzs7Ozs7SUFDanVHLHNDQUFvbUY7O0lBQ3BtRixpQ0FBYzs7SUFFZCwrQkFBb0M7O0lBRXBDLG9DQUEyQjs7SUFjM0IsK0JBQTBCOztJQUMxQixtQ0FBMEI7O0lBQzFCLHNDQUFtQzs7SUFDbkMsdUNBQW9DOztJQUNwQyxtQ0FBcUM7O0lBQ3JDLG1DQUEwQjs7SUFFMUIsb0NBQW9EOztJQUVwRCxnQ0FBTTs7SUE2Qk4saUNBQU87Ozs7O0lBZVAsMkNBQThDOzs7OztJQUM5Qyw0Q0FBK0M7Ozs7O0lBQy9DLG9DQUFxQjs7SUFFckIscUNBQW9COztJQUNwQixrQ0FBb0I7O0lBQ3BCLHFDQUF3Qjs7SUFDeEIseUNBQThIOzs7OztJQUNsSCx3Q0FBb0M7O0lBQUUsd0NBQW1DOzs7OztJQUFDLGlDQUFtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGRyZW4sIEVsZW1lbnRSZWYsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBWaWV3Q2hpbGQsIGZvcndhcmRSZWYsIEluamVjdG9yLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgV0VCQVBJX1BSRUZJWF9UT0tFTiB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgdXBJbWFnZUZpbGUge1xyXG4gIHNpemU6IG51bWJlcjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG4gIGxhc3RNb2RpZmllZD86IHN0cmluZztcclxuICBsYXN0TW9kaWZpZWREYXRlPzogRGF0ZTtcclxuICBzdGF0ZT86IHN0cmluZztcclxuICBiYXNlNjQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmFycmlzLWF2YXRhcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2F2YXRhci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vYXZhdGFyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBdmF0YXJDb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgfVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEF2YXRhckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQge1xyXG4gIHByaXZhdGUgZGVmYXVsdEltZ1NyYyA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUVBWkFCa0FBRC8yd0JEQUF3SUNRb0pCd3dLQ1FvTkRBd09FUjBURVJBUUVTTVpHeFVkS2lVc0t5a2xLQ2d1TkVJNExqRS9NaWdvT2s0NlAwUkhTa3RLTFRkUlYxRklWa0pKU2tmLzJ3QkRBUXdORFJFUEVTSVRFeUpITUNnd1IwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGYvd0FBUkNBRXNBU3dEQVNJQUFoRUJBeEVCLzhRQUdnQUJBUUVCQVFFQkFBQUFBQUFBQUFBQUFBRUNBd1FGQi8vRUFETVFBUUVBQVFFRUNBUUdBZ01CQUFBQUFBQUJBaEVESVRGQkJCUlJVbUZ4Z2FFU2tjSHdFeUl5c2RIaE0zSWpRdkUwLzhRQUZRRUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBSC94QUFYRVFFQkFRRUFBQUFBQUFBQUFBQUFBQUFBRVFFaC85b0FEQU1CQUFJUkF4RUFQd0Q5QkJZcUNpeUFHaG91Z0lxeUdnRWhJdWk2QXl1aXhkQVRRMFdRQTBCZEE0aG91aG9DYUdndWdNcm91aG9DYUpvdW04MEJORFJkRFFHVFJiRUJOQ3hkRFFHVFJVQkUwYXNRR1JUUUdUVDcxV3hOUFA1QXVncXlBQ3lBQzZkcElzZ0dnc2hvQklTS0Fpcm9RRFEwT1N5QWdvQm9hQUJvYUFCb21pZ0pUUlFHVjBYUkFUUkdpelVHUlN3R2RFc2FxQWxqTFFET2lOV0pRWk5KNEtmZkVGSVJZQXNGa0FrRmtBSkZGa0FrTkNMSUFBQUM2QWd1aG9DQ2wzVFcyVHp1Z0lIeDRTNzg4WjZ3bVdONFpZM3lzb0ExcHUrcUFncFlDQUFhSW9ESW9DYUpadlZBUTAzTFVCbEdxV0F6WW1pbW4zdkFhUllBMUlrV0FTS0tBQ2dpcklnQXNnQm9CZEpOYlpOTjl0M2FlSUhOdzJ2U2NjYlpoUHhMTjI3ZEo2OC9SeDIyMnUxL0xqYk5uOHZpL2llSFBtNThOMDNTS041YmZhNThjN2pPekhkNzhYT3lYZmQ5OGJxb0NhU2NwOGpTZGsrU2dMamxsamRjY3NzZksxMnc2VGxOMmNtWGpOMS9pdUFEMzRaNDdTYTQzWFRqTHVzODJuejViamw4V05zczRXUFhzTnROcE5MdXprM3psWjJ3SFVzQkJGNUNBRmdBaG91aVVHUlVCRXJTQXlmZkZhbWdLcUtDcWtVQlljZ0JwQURpdWhvQUtlWUE4ZlN0cDhXWDRXUENmcThiMmVUMWJYT2JQWlpaOGJKckoyM2xIejVycHZ1dHUrM3R2T3FBQUFBQUFBQUN5M0hLWlkzU3k2eW9BK2hzODV0TUpsTjJ2R2RsYWVUb21lbTArQy85cHU4NDlTQUtsQVJRRVJya2dKVVdvQ1VWS0RJcWIvdWdxeEZCVlJRRkZCRkFCUkFVQUhuNmJsK1hER2M3YmZUL0FOZVYyNlhkZHZKMll6M3RjVkFBQUFBQUFBQUFGeHkrSEtaVGpMcStsK3o1ajZHenV1eXd0NTR6OWpSb0VRQUFSU29DQ29DSXFBSUpRYUNMekJaeENBS0M4d0lBQ2hPSUFBRHhkTC8raS82ejZ1VHQweWFiZlh0eG50YTRxQUFBQUFBQUFBQUQzN0gvQUFiUC9XUEJ3ZlEyYzAyV0U3TVlhTkFJSW9BaHpDZ2dITUVxYU5JRE5QdmlIb0FzUnFjQUZTS0M4aUlvSE5VQVVBQUFIbDZaUHpiUEx0bG4xZWQ3ZWw0NjdEWHUyWDArNjhTZ0FBQUFBQUFBQUJwcnU3Ym8rbnB5N1BvOEhSOGZpMitNNDZYVytVZTRBQkFBQVFBUVV2QUV2Qkw2QlFTOFUzZmVxcHY3ZmNGbkJVVUJVVUJTY1FGUlVCUUFBQVRLVExHNDNuTEw2dm5hV1d5OFpkTDV4OUo0dWxZL0R0clp3eW12cnpVY2dBQUFBQUFBQU5kd1BUMExIOVdkOE1aKzllbG5ZNGZoN0hIRzhwcmZPdElBQUJRQVFBS2kxQUU1S2xCRDA5aFBsN2dLalVBVkZCZVlUaUFxS2dLQUFBQTVkS3crUFkyeWE1WS9tbjE5blZRZk1HOXRoK0h0YmpPRjN6eXJDZ0FBQUFBQTZkSHcrUGJTV2ZsbjVyNk9iMjlHdytEWlMyZm15MzN5NVQ2ZzdjYnJlYUFnQUFBQWdxQWNncWZJQk9hcFFTbnI3bFBTL0lFYVNjQUZWRmdLSW9LaW9DZ0FBQmdBRGowblovSHN0WnZ5eDN6eG5ONCtUNmI1MmVQdzdUTEdjSmJJb3lBQUFBQURleDJmNG0xbU4xK0diNzVUbDlIMFBid2Vib2VPbUdXWE8zVDBuL3IwQUFJQUFBQUNLZ0hKRnB5QkVweUFSRlQ3NGdLbk5RVmVhUlFGNUlvS1RpaWdDS0FBQUNaV1k0L0ZsWk1aeHQzU0F2bnVuYStkbmxNODg4NXd5dHM4blhiOUkvRWx3MmU3RzdybGVOOEo0ZVBOeFVBQUFBQUFlcm9lVXVGeDdMclBLdlErZGpsY01wbGpkTEhzMlczeDJrMC9UbDJXOGZMdEIxQzhld1FBQUVVQkRtdDRvQmVKZUNBSVVBUkZ2Qk4zZ0J5VkFGVUlDaHpXY0FPU3BHZHBuanM1cm5sTWRlSGJmS2N3YjU4eDVjK2wyM1RaN1AxeTNlMCtybGR2dGN1TzBzblpqSkZIdnRtTTF5c25qYnBISExwT3l4M1RLNWVHTTFlS3lXNjNXM3R0MVVIZlBwZVYzWVlUR2R1VysvSnd5dVdkMXp5dVZuRFhoUEtjZ0FBQUFBQUFBQUFCMHcyKzB3M1RLWlRzeTMrN3RqMHZHL3J4eXh2Yk44ZVVCOUREYTdQUDlPZU52WnJwZmR1OE9ENW1rdkdOWTU1WS9wenl4OHJ1SVBlUEpqMG5hemo4T1U4WnBmWjF3NlRzOHJKbHJoZkhmUG1nN0ZLZ0FGNEFnVkFSUFcvTmFub0FzWmFCVmxaVUZWRjRnNTdmYmZoWTdwTGxkMGwvZStFZU8yM0s1Wlc1WlhqYjk3bzF0Y3ZqMjJXWEhTL0RQS01xQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU91eDIxMmQwdHR3dkdkbmpIcjNjZU1mUGV2bzJYeGJMVHUzVDBCMVRtSEpBWlZPWUY0cDk4eFB2aUJGU2NRR2xSWnhCZFMzVEczc2x2c2liUy84V1grdC9ZSGh4L1RQR2FxazRUeVZRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWQraVg4MmM3Wkw5L053ZHVpLzViL3Jmb0QwMHZBUkFRcUFoZnZjVk5mTDNBMVdNcURTeG1WUVZOci9pejQvcHY3TERPWExETEdjYk5QRGVEeFRoNkR0T2paYWFmRmp1ODE2dGxmKzJQdW80RHYxYlB2WSs1MWJMdlkrNVJ3SGZxMlhleDl6cXVYZXg5eWpnTy9WY3U5ajduVmMrOWo3bEhBZCtxNTk3SDNPcTU5N0gzQndIZnF1ZmV4OXpxdWZleDl5amdPL1ZjKzlqN25WYys5ajdsSEFkK3E1OTdIM09xNTk3SDNLT0E3OVZ6NzJQdWRWejcyUHVVY0IzNnJsM3NmYzZybjNzZmNvNER2ZWpaZDdIM09yWmQ3SDNLT0E3OVd5NzJQdWRXejcyUHVEZzdkRy95My9XL1E2dGwzc2Zkdlk3SzdQTzI1UzZ5elNkb09xV2xFQm1oYUJhbXQrNko2QW5tcWFxRFF5MEN4WXlvTkNLQzZtL1ZBR2hQSmRRQk9TZ0tpNitRR3U0MVFCUkFGMUxVQUJiVUFCTmRBVk9ZVUMwdEUxM2dJV2xvQ2NUWGVsb0ZRTFFUbWZmTXRUNzRnaXhPYTZncXlzcnpCVlNWUVZkV2RRR3BSTlYxQlYxMFNVbEJZSXZJRjFFMU5lMEY1aUFLSUFvaGFDbXFXZ0JhYXBxQzJvaHFDNnBxV29DMnBhYTcwdEFxQ0FDQUNhK0YrUmFueUFXSi9hOHZrQXVxVDZmVmY3QVZPejBYK0FYVlloMmVnTlNpZng5VCt3VldlZnlYK1BxQ3lycW44MDdQUUZFbjArcC9ZS0g5SDM3Z0FjL2tDNm9uTDBQNUJSUDZPVjh2cUMyb2YybC9nQU9TQXVxYW45Si9BS21vbjlBVXRMOVBxblAxb0NXbDVlaGZ2NWdoNjM1blAxcVdnLy9aJ1xyXG4gIHByaXZhdGUgZXJyb3JJbWdTcmMgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwvOWovNEFBUVNrWkpSZ0FCQVFBQVNBQklBQUQvNFFCQVJYaHBaZ0FBVFUwQUtnQUFBQWdBQVlkcEFBUUFBQUFCQUFBQUdnQUFBQUFBQXFBQ0FBUUFBQUFCQUFBQVpLQURBQVFBQUFBQkFBQUFaQUFBQUFELzdRQTRVR2h2ZEc5emFHOXdJRE11TUFBNFFrbE5CQVFBQUFBQUFBQTRRa2xOQkNVQUFBQUFBQkRVSFl6Wmp3Q3lCT21BQ1pqcytFSisvOEFBRVFnQVpBQmtBd0VpQUFJUkFRTVJBZi9FQUI4QUFBRUZBUUVCQVFFQkFBQUFBQUFBQUFBQkFnTUVCUVlIQ0FrS0MvL0VBTFVRQUFJQkF3TUNCQU1GQlFRRUFBQUJmUUVDQXdBRUVRVVNJVEZCQmhOUllRY2ljUlF5Z1pHaENDTkNzY0VWVXRId0pETmljb0lKQ2hZWEdCa2FKU1luS0NrcU5EVTJOemc1T2tORVJVWkhTRWxLVTFSVlZsZFlXVnBqWkdWbVoyaHBhbk4wZFhaM2VIbDZnNFNGaG9lSWlZcVNrNVNWbHBlWW1acWlvNlNscHFlb3FhcXlzN1MxdHJlNHVickN3OFRGeHNmSXljclMwOVRWMXRmWTJkcmg0dVBrNWVibjZPbnE4Zkx6OVBYMjkvajUrdi9FQUI4QkFBTUJBUUVCQVFFQkFRRUFBQUFBQUFBQkFnTUVCUVlIQ0FrS0MvL0VBTFVSQUFJQkFnUUVBd1FIQlFRRUFBRUNkd0FCQWdNUkJBVWhNUVlTUVZFSFlYRVRJaktCQ0JSQ2thR3h3UWtqTTFMd0ZXSnkwUW9XSkRUaEpmRVhHQmthSmljb0tTbzFOamM0T1RwRFJFVkdSMGhKU2xOVVZWWlhXRmxhWTJSbFptZG9hV3B6ZEhWMmQzaDVlb0tEaElXR2g0aUppcEtUbEpXV2w1aVptcUtqcEtXbXA2aXBxckt6dExXMnQ3aTV1c0xEeE1YR3g4akp5dExUMU5YVzE5aloydUxqNU9YbTUranA2dkx6OVBYMjkvajUrdi9iQUVNQUFRRUJBUUVCQWdFQkFnTUNBZ0lEQkFNREF3TUVCUVFFQkFRRUJRWUZCUVVGQlFVR0JnWUdCZ1lHQmdjSEJ3Y0hCd2dJQ0FnSUNRa0pDUWtKQ1FrSkNmL2JBRU1CQVFFQkFnSUNCQUlDQkFrR0JRWUpDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ2YvZEFBUUFCLy9hQUF3REFRQUNFUU1SQUQ4QS9zd29vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvOUQrekNpaWlnQW9ydC9oN2JXbDM0a1NHOGpXVmRqRUJoa1pBOURYYlgvaml6MHZWSmRLczlLVjNqa01Zd1F1NDV3TUFJZXRBSGllRGpkamlrcjZEOGM2NE5QOE9DeHVVVVhONG0zeXdjaFIvRWZ3NkErdk5lVWVFZkRNM2lQVU5qWlczaXdaVzl2N285eitsQUhKMFY3WnFmeEMwdlNybzZWcDFtazl2QU5nSVlLTWpxRitVOEQxNy96ei93RGhZUGg2Zi9qNzBsRG5yOXh2NXFLQVBJNks5Yy80U3Y0ZnpmNi9TaXYrN0hIL0FFWVZkdXRNOEc2eDRYdTlaMG0xTVJoREJTY3FReWdIcGtqSE5BSGkxRkZGQUJSUlJRQi8vOUgrekNpaWlnRHMvaDlKNWZpeTFIWnQ0LzhBSEdxL3ExL0hvUHhCbTFDV0x6VmprM0ZmOTVSeVBjWnlLd3ZCMG5sZUo3SnZXUUQ4eGl0UDRpUjdQRmM3ZjMxUS93RGpvSDlLQU94OFRhQkY0eXR4NGs4UFRlYzRVSzBSUFlkaDZIMjcvd0ErUjhHK0ptOE5YNzJXb0tSYnluYklDT1VZY1p4L01Wem1pYTdxT2dYWXU3QjhmM2xQM1dIb1JYcFBqS0hUTlk4TVErS3hENUZ6S1ZIKzlra1lQcndNZzljVUFjNzQxOEtMcEVnMVhUUG5zcCtSamtJVDIraDdIOFByaGVGdERYeERyQ2FmSSt4TUZtSTY0SHA3MTZoNFJhVzA4SFR6ZUpTRFlrSHkwWWM3RC9Rbjdvcnh5dzFHNTBxK1cvMDVqRzZFN2UvQjdIMTRvQTlCOGErQ0xIUXRQWFV0TmQ5b1lLeXVRZXZRZzRINVZjMHovUi9oZGR5ZjMzUDZzcTF4T3UrTE5ZOFF4cERmc29qUTVDb01EUHFlVG11M20vY2ZDaU5lOHJmKzFTZjVDZ0R5S2lpaWdBb29vb0EvLzlMK3pDaWlpZ0RYOFB5ZVZyMWxKNlR4L3dEb1FycnZpZkhzOFNLMzkrRlQrckQrbGNIWlNlVmVSUy8zWFUva2E5cjhkK0ZOWDE3VTRiblRVVmxXTFl4WmdNRU1UOWU5QUhoZ0JKd09wcjZSdi9ESXY3WFRkSXVPTFcwVU5MMnlVVUtCK09UbjJyeXlMd1pxV2o2enA0MVhaNWM4NnI4cHp5Q0RnOU90ZDU0NzF5NWFlTHdwcGgyelhlME81NEFWamdEUHYzOXVLQU9COGNlSnhyTjBOUHNEaXp0emhjZEdJNDNmUWRCLzlldUNyMGlYNFhlSWs1amtnZjZNUi9OYXpKZmg5NHJpNUZzSEgreTYvd0JTS0FPS3IxenhCL28vdzIwK0wrK3lmcUdhdUZsOEplSllmdjJVcC8zVjNmeXpYZWVPa2ExOEk2VFpTQXF5aE1nOEVGWThIUDUwQWVRMFVVVUFGRkZGQUgvLzAvN01LS0tLQUN2ZmZHOHZpV1NPeWs4UEdZaVJXTCtTRC9za1pJNmRUWGdWZDNEOFJmRWtGc2x0RzBlSTFDaGl1VGdjYzg0b0FvWCtuK01ZVlhWZFVTNElnSVlQSVMyMDVHRHlUam12UmZGZWhYZmpDeXNkYzBaVk1qUi9NQ1FPRHlCaytoeUs4MzFMeG40aTFhMWF5dko4eFA4QWVWVlVaeDdnWnJNc3RlMXJUb3hCWTNVc2FEb29ZN1IrSFNnRHJQN0ErSXRqL3F2dENnZjNKZ2YwRFV2Mi93Q0pObDFGMXgzTVpjZm1RYXk0dkhuaXlIN3QyVC92S2gvbUswb3ZpWjRtaisrWXBQOEFlVC9BaWdCLy9DZGVOYlAvQUkrdWNmOEFQU0lEK1FGYnZ4VWxjdzZkRy8zaUhZL1hDMVJpK0t1ckwvcjdhRnY5M2N2OHlhNVh4VDRvbThUM0VVMHNRaUVTa0FBNTY5VG5pZ0RscUtLS0FDaWlpZ0QvMVA3TUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQL1Yvc3dvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLzlrPSc7XHJcbiAgcHVibGljIGltZ1NyYztcclxuICAvLyBwdWJsaWMgZmlsZUJpbmFyeTogc3RyaW5nO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpbGUnKSBmaWxlOiBFbGVtZW50UmVmO1xyXG4gIC8vIEBJbnB1dCgpIGNvdmVyID0gJyc7XHJcbiAgdFJlYWRPbmx5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KClcclxuICBzZXQgcmVhZG9ubHkodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy50UmVhZE9ubHkpIHtcclxuICAgICAgbGV0IGxvY2FsZVRpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhdmF0YXIuaW1ndGl0bGUnKTtcclxuICAgICAgdGhpcy5pbWd0aXRsZSA9IHZhbHVlID8gJycgOiAodGhpcy5pbWdUaXRsZSA/IHRoaXMuaW1nVGl0bGUgOiBsb2NhbGVUaXRsZSk7XHJcbiAgICAgIHRoaXMudFJlYWRPbmx5ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcbiAgZ2V0IHJlYWRvbmx5KCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMudFJlYWRPbmx5O1xyXG4gIH1cclxuICAvLyBASW5wdXQoKSB0eXBlO1xyXG4gIEBJbnB1dCgpIHNpemU6IG51bWJlciA9IDE7XHJcbiAgQElucHV0KCkgaW1nVGl0bGU6IHN0cmluZztcclxuICBASW5wdXQoKSBhdmF0YXJXaWR0aDogbnVtYmVyID0gMTAwO1xyXG4gIEBJbnB1dCgpIGF2YXRhckhlaWdodDogbnVtYmVyID0gMTAwO1xyXG4gIEBJbnB1dCgpIGltZ1NoYXBlOiBzdHJpbmcgPSAnY2lyY2xlJztcclxuICBpbWd0aXRsZTogc3RyaW5nID0gJ+eCueWHu+S/ruaUuSc7XHJcbiAgLy8gQElucHV0KCkgaXNCYXNlNjQ6Ym9vbGVhbiA9IHRydWU7XHJcbiAgQE91dHB1dCgnaW1nQ2hhbmdlJykgaW1nQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBfdHlwZTtcclxuICBASW5wdXQoKVxyXG4gIHNldCB0eXBlKHZhbCkge1xyXG4gICAgaWYgKHZhbCAmJiB2YWwubGVuZ3RoKSB7XHJcbiAgICAgIGxldCB0eXBlcyA9IHZhbDtcclxuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdHlwZXMgPSB2YWwuc3BsaXQoJywnKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZXMgJiYgdHlwZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SW1nVHlwZSA9IFtdO1xyXG4gICAgICAgIHR5cGVzLmZvckVhY2godCA9PiB7XHJcbiAgICAgICAgICBpZiAoKHR5cGVvZiB0ID09ICdzdHJpbmcnKSAmJiB0LmNvbnN0cnVjdG9yID09IFN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgdEltZ3R5cGUgPSAnaW1hZ2UvJyArIHQ7XHJcbiAgICAgICAgICAgIGlmICh0ID09PSAnanBnJykge1xyXG4gICAgICAgICAgICAgIGxldCBqcGdUeXBlID0gJ2ltYWdlL2pwZWcnO1xyXG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudEltZ1R5cGUucHVzaChqcGdUeXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWdUeXBlLnB1c2godEltZ3R5cGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWdUeXBlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMuaW1nVHlwZSA9IHRoaXMuY3VycmVudEltZ1R5cGUuam9pbignLCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCB0eXBlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XHJcbiAgfVxyXG4gIF9jb3ZlcjtcclxuICBASW5wdXQoKVxyXG4gIHNldCBjb3Zlcih2YWwpIHtcclxuICAgIGlmICh2YWwpIHtcclxuICAgICAgdGhpcy5fY292ZXIgPSB2YWw7XHJcbiAgICAgIHRoaXMuaW1nc3JjSW5pdCh0aGlzLmNvdmVyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmltZ1NyYyA9IHRoaXMuZGVmYXVsdEltZ1NyYztcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0IGNvdmVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvdmVyO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvbkNoYW5nZUNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpID0+IHsgfVxyXG4gIHByaXZhdGUgb25Ub3VjaGVkQ2FsbGJhY2s6IEZ1bmN0aW9uID0gKCkgPT4geyB9XHJcbiAgcHJpdmF0ZSBwZXJmaXhTdHI9Jyc7XHJcbiAgLy/mmK/lkKbliqDovb3kuK1cclxuICBsb2FkaW5nSW1nOiBib29sZWFuO1xyXG4gIGltZ1R5cGUgPSAnaW1hZ2UvKic7XHJcbiAgaW1nRmlsZU9iajogdXBJbWFnZUZpbGU7XHJcbiAgY3VycmVudEltZ1R5cGUgPSBbJ2ltYWdlL2ltYWdlJywgJ2ltYWdlL3dlYnAnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3N2ZycsICdpbWFnZS9naWYnLCAnaW1hZ2UvanBnJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvYm1wJ107XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLCBwdWJsaWMgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZSxAT3B0aW9uYWwoKSBwcml2YXRlIGluamVjdDpJbmplY3Rvcikge1xyXG4gICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmNvbmZpZy5wb3NpdGlvbiA9ICd0b3AtY2VudGVyJztcclxuXHJcbiAgICBpZih0aGlzLmluamVjdCl7XHJcbiAgICAgIGlmKFdFQkFQSV9QUkVGSVhfVE9LRU4pe1xyXG4gICAgICAgICAgdGhpcy5wZXJmaXhTdHIgPSB0aGlzLmluamVjdC5nZXQoV0VCQVBJX1BSRUZJWF9UT0tFTiwgJycpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy8gaWYodGhpcy5jb3Zlcil7XHJcbiAgICAvLyAgIHRoaXMuaW1nc3JjSW5pdCh0aGlzLmNvdmVyKTtcclxuICAgIC8vIH1cclxuICAgIC8vIGVsc2V7XHJcbiAgICAvLyAgIHRoaXMuaW1nU3JjID0gdGhpcy5kZWZhdWx0SW1nU3JjO1xyXG4gICAgLy8gfVxyXG4gICAgaWYgKHRoaXMucmVhZG9ubHkpIHtcclxuICAgICAgdGhpcy5pbWd0aXRsZSA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5pbWdUaXRsZSkge1xyXG4gICAgICB0aGlzLmltZ3RpdGxlID0gdGhpcy5pbWdUaXRsZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmltZ3RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhdmF0YXIuaW1ndGl0bGUnKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyrliKTmlq1jb3ZlcuaVsOaNruagvOW8j++8jOWBmuWHuuS/ruaUuei1i+WAvOe7mWltZ1NyY1xyXG4gICovXHJcbiAgaW1nc3JjSW5pdCh2YWwpIHtcclxuICAgIGxldCBpc0ltZyA9IHRoaXMuaXNTcmModmFsKTtcclxuICAgIGlmIChpc0ltZykge1xyXG4gICAgICB0aGlzLmltZ1NyYyA9IHRoaXMucGVyZml4U3RyK3ZhbDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBsZXQgaXNGdWxsQmFzZTY0ID0gdGhpcy5pc0Jhc2VTcmModmFsKTtcclxuICAgICAgaWYgKGlzRnVsbEJhc2U2NCkge1xyXG4gICAgICAgIHRoaXMuaW1nU3JjID0gdmFsXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5pbWdTcmMgPSB0aGlzLmFkZEJhc2U2NCh2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCdjbGljaycpXHJcbiAgb25DbGljaygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgICh0aGlzLmZpbGUubmF0aXZlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jbGljaygpO1xyXG4gIH1cclxuXHJcbiAgZ2V0ZmlsZWRhdGEoZXZlbnQpIHtcclxuICAgIGlmICh0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGZpbGV0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGxldCBnZXRmaWxlID0gZmlsZXRhcmdldC5maWxlcztcclxuICAgIGlmICghZ2V0ZmlsZVswXSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgZmlsZVR5cGUgPSBnZXRmaWxlWzBdLnR5cGU7XHJcbiAgICBjb25zdCBpc0x0U2l6ZSA9IGdldGZpbGVbMF0uc2l6ZSAvIDEwMjQgLyAxMDI0IDwgdGhpcy5zaXplO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEltZ1R5cGUuaW5kZXhPZihmaWxlVHlwZSkgPCAwKSB7XHJcbiAgICAgIGxldCB0eXBlZXJyb3JUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhdmF0YXIudHlwZUVycm9yJyk7XHJcbiAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcih7XHJcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcclxuICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgbXNnOiB0eXBlZXJyb3JUZXh0XHJcbiAgICAgIH0pO1xyXG4gICAgICBmaWxldGFyZ2V0LnZhbHVlID0gJyc7XHJcbiAgICAgIC8vIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcign5LiK5Lyg5Zu+54mH57G75Z6L5LiN5q2j56GuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzTHRTaXplKSB7XHJcbiAgICAgIGxldCBzaXplZXJyb3JUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhdmF0YXIuc2l6ZUVycm9yJyk7XHJcbiAgICAgIGxldCBlcnJvcm1lczogc3RyaW5nID0gc2l6ZWVycm9yVGV4dCArIHRoaXMuc2l6ZSArIFwiTSFcIjtcclxuICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKHtcclxuICAgICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICBtc2c6IGVycm9ybWVzXHJcbiAgICAgIH0pO1xyXG4gICAgICBmaWxldGFyZ2V0LnZhbHVlID0gJyc7XHJcbiAgICAgIC8vIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcihg5LiK5Lyg5Zu+54mH5LiN6IO95aSn5LqOJHt0aGlzLnNpemV9TSFgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy50cmFuc2Zvcm1GaWxlKGdldGZpbGVbMF0pO1xyXG4gICAgZmlsZXRhcmdldC52YWx1ZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEltZ0ZpbGVPYmooKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbWdGaWxlT2JqO1xyXG4gIH1cclxuXHJcbiAgdHJhbnNmb3JtRmlsZShnZXRmaWxlOiBhbnkpIHtcclxuICAgIC8vIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5pbWdGaWxlT2JqID0ge1xyXG4gICAgICBzaXplOiBnZXRmaWxlLnNpemUsXHJcbiAgICAgIG5hbWU6IGdldGZpbGUubmFtZSxcclxuICAgICAgdHlwZTogZ2V0ZmlsZS50eXBlLFxyXG4gICAgICBsYXN0TW9kaWZpZWQ6IGdldGZpbGUubGFzdE1vZGlmaWVkLFxyXG4gICAgICBsYXN0TW9kaWZpZWREYXRlOiBnZXRmaWxlLmxhc3RNb2RpZmllZERhdGVcclxuICAgIH1cclxuICAgIHRoaXMuZG8oZ2V0ZmlsZSkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGluZ0ltZyA9IGZhbHNlO1xyXG4gICAgICBpZiAocmVzWydzdGF0ZSddID09PSAnZG9uZScpIHtcclxuICAgICAgICB0aGlzLmltZ1NyYyA9IHJlc1sncmVzdWx0J107XHJcblxyXG4gICAgICAgIC8vdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMuaW1nU3JjKTtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy5yZW1vdmVCYXNlNjQodGhpcy5pbWdTcmMpKTtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocmVzWydzdGF0ZSddID09PSAnZXJyb3InKSB7XHJcbiAgICAgICAgbGV0IHVwbG9hZGVycm9yVGV4dCA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnYXZhdGFyLnVwbG9hZEVycm9yJyk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKHtcclxuICAgICAgICAgIHR5cGU6ICdlcnJvcicsXHJcbiAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICBtc2c6IHVwbG9hZGVycm9yVGV4dFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKCflm77niYfkuIrkvKDlpLHotKXvvIzor7fph43or5UhJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5pbWdGaWxlT2JqLnN0YXRlID0gcmVzWydzdGF0ZSddO1xyXG4gICAgICB0aGlzLmltZ0ZpbGVPYmouYmFzZTY0ID0gcmVzWydyZXN1bHQnXTtcclxuICAgICAgdGhpcy5pbWdDaGFuZ2UuZW1pdCh0aGlzLmltZ0ZpbGVPYmopO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZWFkKGZpbGU6IEZpbGUpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKG9ic2VydmVyID0+IHtcclxuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgIC8vdGhpcy5sb2FkaW5nSW1nID0gdHJ1ZTtcclxuICAgICAgLy8gcmVhZGVyLm9ubG9hZHN0YXJ0PWZ1bmN0aW9uKCl7fVxyXG4gICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2cocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCh7IHN0YXRlOiAnZG9uZScsICdyZXN1bHQnOiByZWFkZXIucmVzdWx0IH0pO1xyXG4gICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG9ic2VydmVyLm5leHQoeyBzdGF0ZTogJ2Vycm9yJywgJ3Jlc3VsdCc6IHJlYWRlci5yZXN1bHQgfSk7XHJcbiAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGRvKGZpbGU6IGFueSk6IE9ic2VydmFibGU8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWFkKGZpbGUgYXMgRmlsZSk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbDogYW55KTogdm9pZCB7XHJcbiAgICBpZiAodmFsICYmIHZhbC5sZW5ndGgpIHtcclxuICAgICAgLy8gaWYodGhpcy5pc0Jhc2U2NCl7XHJcbiAgICAgIC8vICAgdGhpcy5pbWdTcmMgPSB0aGlzLmFkZEJhc2U2NCh2YWwpO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vIGVsc2V7XHJcbiAgICAgIC8vICAgdGhpcy5pbWdTcmMgPSB2YWw7XHJcbiAgICAgIC8vIH1cclxuICAgICAgdGhpcy5pbWdzcmNJbml0KHZhbCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLmNvdmVyKSB7XHJcbiAgICAgIHRoaXMuaW1nc3JjSW5pdCh0aGlzLmNvdmVyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmltZ1NyYyA9IHRoaXMuZGVmYXVsdEltZ1NyYztcclxuICAgIH1cclxuICB9XHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBmbjtcclxuICB9XHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xyXG4gIH1cclxuICAvLyBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgLy8gICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gIC8vIH1cclxuXHJcbiAgYWRkQmFzZTY0KHZhbCkge1xyXG4gICAgaWYgKCF2YWwpIHJldHVybjtcclxuICAgIHJldHVybiAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnICsgdmFsO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQmFzZTY0KHZhbCkge1xyXG4gICAgaWYgKCF2YWwpIHJldHVybjtcclxuICAgIGxldCBpbWdfYXJyID0gdmFsLnNwbGl0KCcsJyk7XHJcbiAgICBpZiAoaW1nX2Fyci5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGltZ19hcnJbMV07XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICAvL+WIpOaWreaYr+WQpuaYr+WbvueJh+i3r+W+hFxyXG4gIGlzU3JjKHVybCkge1xyXG4gICAgcmV0dXJuICh1cmwubWF0Y2goL1xcLihqcGVnfGpwZ3xnaWZ8cG5nfHN2Z3xibXB8d2VicCkkLykgIT0gbnVsbClcclxuICB9XHJcbiAgLy/liKTmlq3mmK/lkKbmmK/lrozmiJBiYXNlNjRcclxuICBpc0Jhc2VTcmModXJsKSB7XHJcbiAgICByZXR1cm4gKHVybC5pbmRleE9mKCdkYXRhOmltYWdlLycpID4gLTEgPyB0cnVlIDogZmFsc2UpXHJcbiAgfVxyXG5cclxuICBlcnJvclNyYygpIHtcclxuICAgIHRoaXMuaW1nU3JjID0gdGhpcy5lcnJvckltZ1NyYztcclxuICAgIHRoaXMuaW1ndGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2F2YXRhci5sb2FkRXJyb3InKTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==