import { Observable } from 'rxjs';
import { Injectable, Component, Input, Output, EventEmitter, HostListener, ViewChild, forwardRef, Injector, Optional, NgModule, defineInjectable } from '@angular/core';
import { CommonModule } from '@angular/common';
import { NotifyService, NotifyModule } from '@farris/ui-notify';
import { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';
import { LocaleService, LocaleModule } from '@farris/ui-locale';
import { WEBAPI_PREFIX_TOKEN, FarrisCommonModule } from '@farris/ui-common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class AvatarService {
    constructor() { }
}
AvatarService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
AvatarService.ctorParameters = () => [];
/** @nocollapse */ AvatarService.ngInjectableDef = defineInjectable({ factory: function AvatarService_Factory() { return new AvatarService(); }, token: AvatarService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class AvatarComponent {
    /**
     * @param {?} notifyService
     * @param {?} localeService
     * @param {?} inject
     */
    constructor(notifyService, localeService, inject) {
        this.notifyService = notifyService;
        this.localeService = localeService;
        this.inject = inject;
        this.defaultImgSrc = 'data:image/jpeg;base64,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';
        this.errorImgSrc = 'data:image/jpeg;base64,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';
        // @Input() cover = '';
        this.tReadOnly = false;
        // @Input() type;
        this.size = 1;
        this.avatarWidth = 100;
        this.avatarHeight = 100;
        this.imgShape = 'circle';
        this.imgtitle = '点击修改';
        // @Input() isBase64:boolean = true;
        this.imgChange = new EventEmitter();
        this.onChangeCallback = (/**
         * @return {?}
         */
        () => { });
        this.onTouchedCallback = (/**
         * @return {?}
         */
        () => { });
        this.perfixStr = '';
        this.imgType = 'image/*';
        this.currentImgType = ['image/image', 'image/webp', 'image/png', 'image/svg', 'image/gif', 'image/jpg', 'image/jpeg', 'image/bmp'];
        this.notifyService.config.position = 'top-center';
        if (this.inject) {
            if (WEBAPI_PREFIX_TOKEN) {
                this.perfixStr = this.inject.get(WEBAPI_PREFIX_TOKEN, '');
            }
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set readonly(value) {
        if (value !== this.tReadOnly) {
            /** @type {?} */
            let localeTitle = this.localeService.getValue('avatar.imgtitle');
            this.imgtitle = value ? '' : (this.imgTitle ? this.imgTitle : localeTitle);
            this.tReadOnly = value;
        }
    }
    ;
    /**
     * @return {?}
     */
    get readonly() {
        return this.tReadOnly;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set type(val) {
        if (val && val.length) {
            /** @type {?} */
            let types = val;
            if (typeof val === 'string') {
                types = val.split(',');
            }
            if (types && types.length) {
                this.currentImgType = [];
                types.forEach((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => {
                    if ((typeof t == 'string') && t.constructor == String) {
                        /** @type {?} */
                        let tImgtype = 'image/' + t;
                        if (t === 'jpg') {
                            /** @type {?} */
                            let jpgType = 'image/jpeg';
                            this.currentImgType.push(jpgType);
                        }
                        this.currentImgType.push(tImgtype);
                    }
                }));
                if (this.currentImgType.length > 0) {
                    this.imgType = this.currentImgType.join(',');
                }
            }
        }
    }
    /**
     * @return {?}
     */
    get type() {
        return this._type;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set cover(val) {
        if (val) {
            this._cover = val;
            this.imgsrcInit(this.cover);
        }
        else {
            this.imgSrc = this.defaultImgSrc;
        }
    }
    /**
     * @return {?}
     */
    get cover() {
        return this._cover;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // if(this.cover){
        //   this.imgsrcInit(this.cover);
        // }
        // else{
        //   this.imgSrc = this.defaultImgSrc;
        // }
        if (this.readonly) {
            this.imgtitle = '';
        }
        else if (this.imgTitle) {
            this.imgtitle = this.imgTitle;
        }
        else {
            this.imgtitle = this.localeService.getValue('avatar.imgtitle');
        }
    }
    /*判断cover数据格式，做出修改赋值给imgSrc
      */
    /**
     * @param {?} val
     * @return {?}
     */
    imgsrcInit(val) {
        /** @type {?} */
        let isImg = this.isSrc(val);
        if (isImg) {
            this.imgSrc = this.perfixStr + val;
        }
        else {
            /** @type {?} */
            let isFullBase64 = this.isBaseSrc(val);
            if (isFullBase64) {
                this.imgSrc = val;
            }
            else {
                this.imgSrc = this.addBase64(val);
            }
        }
    }
    /**
     * @return {?}
     */
    onClick() {
        if (this.readonly) {
            return;
        }
        ((/** @type {?} */ (this.file.nativeElement))).click();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getfiledata(event) {
        if (this.readonly) {
            return;
        }
        /** @type {?} */
        const filetarget = (/** @type {?} */ (event.target));
        /** @type {?} */
        let getfile = filetarget.files;
        if (!getfile[0]) {
            return;
        }
        /** @type {?} */
        let fileType = getfile[0].type;
        /** @type {?} */
        const isLtSize = getfile[0].size / 1024 / 1024 < this.size;
        if (this.currentImgType.indexOf(fileType) < 0) {
            /** @type {?} */
            let typeerrorText = this.localeService.getValue('avatar.typeError');
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: typeerrorText
            });
            filetarget.value = '';
            // this.notifyService.error('上传图片类型不正确');
            return;
        }
        if (!isLtSize) {
            /** @type {?} */
            let sizeerrorText = this.localeService.getValue('avatar.sizeError');
            /** @type {?} */
            let errormes = sizeerrorText + this.size + "M!";
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: errormes
            });
            filetarget.value = '';
            // this.notifyService.error(`上传图片不能大于${this.size}M!`);
            return;
        }
        this.transformFile(getfile[0]);
        filetarget.value = '';
    }
    /**
     * @return {?}
     */
    getImgFileObj() {
        return this.imgFileObj;
    }
    /**
     * @param {?} getfile
     * @return {?}
     */
    transformFile(getfile) {
        // const subject = new Subject();
        this.imgFileObj = {
            size: getfile.size,
            name: getfile.name,
            type: getfile.type,
            lastModified: getfile.lastModified,
            lastModifiedDate: getfile.lastModifiedDate
        };
        this.do(getfile).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.loadingImg = false;
            if (res['state'] === 'done') {
                this.imgSrc = res['result'];
                //this.onChangeCallback(this.imgSrc);
                this.onChangeCallback(this.removeBase64(this.imgSrc));
                this.onTouchedCallback();
            }
            else if (res['state'] === 'error') {
                /** @type {?} */
                let uploaderrorText = this.localeService.getValue('avatar.uploadError');
                this.notifyService.error({
                    type: 'error',
                    title: '',
                    msg: uploaderrorText
                });
                // this.notifyService.error('图片上传失败，请重试!');
            }
            this.imgFileObj.state = res['state'];
            this.imgFileObj.base64 = res['result'];
            this.imgChange.emit(this.imgFileObj);
        }));
    }
    /**
     * @param {?} file
     * @return {?}
     */
    read(file) {
        return Observable.create((/**
         * @param {?} observer
         * @return {?}
         */
        observer => {
            /** @type {?} */
            const reader = new FileReader();
            reader.readAsDataURL(file);
            //this.loadingImg = true;
            // reader.onloadstart=function(){}
            reader.onload = (/**
             * @return {?}
             */
            () => {
                //console.log(reader.result);
                observer.next({ state: 'done', 'result': reader.result });
                observer.complete();
            });
            reader.onerror = (/**
             * @return {?}
             */
            function () {
                observer.next({ state: 'error', 'result': reader.result });
                observer.complete();
            });
        }));
    }
    /**
     * @param {?} file
     * @return {?}
     */
    do(file) {
        return this.read((/** @type {?} */ (file)));
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (val && val.length) {
            // if(this.isBase64){
            //   this.imgSrc = this.addBase64(val);
            // }
            // else{
            //   this.imgSrc = val;
            // }
            this.imgsrcInit(val);
        }
        else if (this.cover) {
            this.imgsrcInit(this.cover);
        }
        else {
            this.imgSrc = this.defaultImgSrc;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    // setDisabledState?(isDisabled: boolean): void {
    //     this.disabled = isDisabled;
    // }
    /**
     * @param {?} val
     * @return {?}
     */
    addBase64(val) {
        if (!val)
            return;
        return 'data:image/jpeg;base64,' + val;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    removeBase64(val) {
        if (!val)
            return;
        /** @type {?} */
        let img_arr = val.split(',');
        if (img_arr.length) {
            return img_arr[1];
        }
    }
    //判断是否是图片路径
    /**
     * @param {?} url
     * @return {?}
     */
    isSrc(url) {
        return (url.match(/\.(jpeg|jpg|gif|png|svg|bmp|webp)$/) != null);
    }
    //判断是否是完成base64
    /**
     * @param {?} url
     * @return {?}
     */
    isBaseSrc(url) {
        return (url.indexOf('data:image/') > -1 ? true : false);
    }
    /**
     * @return {?}
     */
    errorSrc() {
        this.imgSrc = this.errorImgSrc;
        this.imgtitle = this.localeService.getValue('avatar.loadError');
    }
}
AvatarComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-avatar',
                template: "<!-- bugNum5:471047 -->\r\n<div class=\"f-avatar\" [title]=\"imgtitle\"\r\n    [ngClass]=\"{'f-avatar-readonly': tReadOnly,'f-avatar-circle':imgShape === 'circle','f-avatar-square':imgShape === 'square'}\"\r\n    [ngStyle]=\"{'width': avatarWidth+'px','height':avatarHeight+'px'}\">\r\n    <ng-container *ngIf=\"loadingImg\">\r\n        <div class=\"f-avatar-upload-loading\">\r\n            <div class=\"loading-inner\">\r\n                \u52A0\u8F7D\u4E2D\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <img class=\"f-avatar-image\" [attr.src]=\"imgSrc\" (error)=\"errorSrc()\">\r\n    <div class=\"f-avatar-icon\" *ngIf=\"!tReadOnly\">\r\n        <span class=\"f-icon f-icon-camera\"></span>\r\n    </div>\r\n    <input type=\"file\" class=\"f-avatar-upload\" [accept]='imgType' (change)=\"getfiledata($event)\" #file\r\n        style=\"display: none;\">\r\n</div>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => AvatarComponent)),
                        multi: true
                    }
                ],
                styles: [".f-avatar{position:relative;cursor:pointer;overflow:hidden}.f-avatar.f-avatar-readonly{cursor:default}.f-avatar.f-avatar-circle{border-radius:100%;overflow:hidden}.f-avatar.f-avatar-square{border-radius:0}.f-avatar .f-avatar-defult,.f-avatar .f-avatar-image{display:inline-block;width:100%;height:100%}.f-avatar .f-avatar-icon{display:none;position:absolute;left:0;right:0;top:0;bottom:0;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:rgba(0,0,0,.3)}.f-avatar .f-avatar-icon .f-icon{font-size:24px;color:#fff}.f-avatar.f-avatar-circle .f-avatar-icon{border-radius:100%}.f-avatar.f-avatar-square .f-avatar-icon{border-radius:0}.f-avatar .f-avatar-upload-loading{position:absolute;left:0;top:0;display:inline-block;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.f-avatar .f-avatar-upload-loading .loading-inner{position:absolute;width:100%;left:0;top:50%;margin-top:-25px;height:50px;line-height:50px;text-align:center;font-size:16px;color:#fff}.f-avatar:hover .f-avatar-icon{display:-webkit-box;display:flex}"]
            }] }
];
/** @nocollapse */
AvatarComponent.ctorParameters = () => [
    { type: NotifyService },
    { type: LocaleService },
    { type: Injector, decorators: [{ type: Optional }] }
];
AvatarComponent.propDecorators = {
    file: [{ type: ViewChild, args: ['file',] }],
    readonly: [{ type: Input }],
    size: [{ type: Input }],
    imgTitle: [{ type: Input }],
    avatarWidth: [{ type: Input }],
    avatarHeight: [{ type: Input }],
    imgShape: [{ type: Input }],
    imgChange: [{ type: Output, args: ['imgChange',] }],
    type: [{ type: Input }],
    cover: [{ type: Input }],
    onClick: [{ type: HostListener, args: ['click',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class AvatarModule {
}
AvatarModule.decorators = [
    { type: NgModule, args: [{
                declarations: [AvatarComponent],
                imports: [
                    CommonModule,
                    FormsModule,
                    NotifyModule,
                    FarrisCommonModule,
                    LocaleModule.forRoot()
                ],
                exports: [AvatarComponent]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

export { AvatarService, AvatarComponent, AvatarModule };

//# sourceMappingURL=farris-ui-avatar.js.map