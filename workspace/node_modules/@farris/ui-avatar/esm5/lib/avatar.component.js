/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, Input, Output, EventEmitter, HostListener, ViewChild, forwardRef, Injector, Optional } from '@angular/core';
import { Observable } from 'rxjs';
import { NotifyService } from '@farris/ui-notify';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { LocaleService } from '@farris/ui-locale';
import { WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';
/**
 * @record
 */
export function upImageFile() { }
if (false) {
    /** @type {?} */
    upImageFile.prototype.size;
    /** @type {?} */
    upImageFile.prototype.name;
    /** @type {?} */
    upImageFile.prototype.type;
    /** @type {?|undefined} */
    upImageFile.prototype.lastModified;
    /** @type {?|undefined} */
    upImageFile.prototype.lastModifiedDate;
    /** @type {?|undefined} */
    upImageFile.prototype.state;
    /** @type {?|undefined} */
    upImageFile.prototype.base64;
}
var AvatarComponent = /** @class */ (function () {
    function AvatarComponent(notifyService, localeService, inject) {
        this.notifyService = notifyService;
        this.localeService = localeService;
        this.inject = inject;
        this.defaultImgSrc = 'data:image/jpeg;base64,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';
        this.errorImgSrc = 'data:image/jpeg;base64,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';
        // @Input() cover = '';
        this.tReadOnly = false;
        // @Input() type;
        this.size = 1;
        this.avatarWidth = 100;
        this.avatarHeight = 100;
        this.imgShape = 'circle';
        this.imgtitle = '点击修改';
        // @Input() isBase64:boolean = true;
        this.imgChange = new EventEmitter();
        this.onChangeCallback = (/**
         * @return {?}
         */
        function () { });
        this.onTouchedCallback = (/**
         * @return {?}
         */
        function () { });
        this.perfixStr = '';
        this.imgType = 'image/*';
        this.currentImgType = ['image/image', 'image/webp', 'image/png', 'image/svg', 'image/gif', 'image/jpg', 'image/jpeg', 'image/bmp'];
        this.notifyService.config.position = 'top-center';
        if (this.inject) {
            if (WEBAPI_PREFIX_TOKEN) {
                this.perfixStr = this.inject.get(WEBAPI_PREFIX_TOKEN, '');
            }
        }
    }
    Object.defineProperty(AvatarComponent.prototype, "readonly", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tReadOnly;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value !== this.tReadOnly) {
                /** @type {?} */
                var localeTitle = this.localeService.getValue('avatar.imgtitle');
                this.imgtitle = value ? '' : (this.imgTitle ? this.imgTitle : localeTitle);
                this.tReadOnly = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(AvatarComponent.prototype, "type", {
        get: /**
         * @return {?}
         */
        function () {
            return this._type;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            var _this = this;
            if (val && val.length) {
                /** @type {?} */
                var types = val;
                if (typeof val === 'string') {
                    types = val.split(',');
                }
                if (types && types.length) {
                    this.currentImgType = [];
                    types.forEach((/**
                     * @param {?} t
                     * @return {?}
                     */
                    function (t) {
                        if ((typeof t == 'string') && t.constructor == String) {
                            /** @type {?} */
                            var tImgtype = 'image/' + t;
                            if (t === 'jpg') {
                                /** @type {?} */
                                var jpgType = 'image/jpeg';
                                _this.currentImgType.push(jpgType);
                            }
                            _this.currentImgType.push(tImgtype);
                        }
                    }));
                    if (this.currentImgType.length > 0) {
                        this.imgType = this.currentImgType.join(',');
                    }
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AvatarComponent.prototype, "cover", {
        get: /**
         * @return {?}
         */
        function () {
            return this._cover;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._cover = val;
                this.imgsrcInit(this.cover);
            }
            else {
                this.imgSrc = this.defaultImgSrc;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AvatarComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // if(this.cover){
        //   this.imgsrcInit(this.cover);
        // }
        // else{
        //   this.imgSrc = this.defaultImgSrc;
        // }
        if (this.readonly) {
            this.imgtitle = '';
        }
        else if (this.imgTitle) {
            this.imgtitle = this.imgTitle;
        }
        else {
            this.imgtitle = this.localeService.getValue('avatar.imgtitle');
        }
    };
    /*判断cover数据格式，做出修改赋值给imgSrc
    */
    /*判断cover数据格式，做出修改赋值给imgSrc
      */
    /**
     * @param {?} val
     * @return {?}
     */
    AvatarComponent.prototype.imgsrcInit = /*判断cover数据格式，做出修改赋值给imgSrc
      */
    /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        /** @type {?} */
        var isImg = this.isSrc(val);
        if (isImg) {
            this.imgSrc = this.perfixStr + val;
        }
        else {
            /** @type {?} */
            var isFullBase64 = this.isBaseSrc(val);
            if (isFullBase64) {
                this.imgSrc = val;
            }
            else {
                this.imgSrc = this.addBase64(val);
            }
        }
    };
    /**
     * @return {?}
     */
    AvatarComponent.prototype.onClick = /**
     * @return {?}
     */
    function () {
        if (this.readonly) {
            return;
        }
        ((/** @type {?} */ (this.file.nativeElement))).click();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    AvatarComponent.prototype.getfiledata = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.readonly) {
            return;
        }
        /** @type {?} */
        var filetarget = (/** @type {?} */ (event.target));
        /** @type {?} */
        var getfile = filetarget.files;
        if (!getfile[0]) {
            return;
        }
        /** @type {?} */
        var fileType = getfile[0].type;
        /** @type {?} */
        var isLtSize = getfile[0].size / 1024 / 1024 < this.size;
        if (this.currentImgType.indexOf(fileType) < 0) {
            /** @type {?} */
            var typeerrorText = this.localeService.getValue('avatar.typeError');
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: typeerrorText
            });
            filetarget.value = '';
            // this.notifyService.error('上传图片类型不正确');
            return;
        }
        if (!isLtSize) {
            /** @type {?} */
            var sizeerrorText = this.localeService.getValue('avatar.sizeError');
            /** @type {?} */
            var errormes = sizeerrorText + this.size + "M!";
            this.notifyService.error({
                type: 'error',
                title: '',
                msg: errormes
            });
            filetarget.value = '';
            // this.notifyService.error(`上传图片不能大于${this.size}M!`);
            return;
        }
        this.transformFile(getfile[0]);
        filetarget.value = '';
    };
    /**
     * @return {?}
     */
    AvatarComponent.prototype.getImgFileObj = /**
     * @return {?}
     */
    function () {
        return this.imgFileObj;
    };
    /**
     * @param {?} getfile
     * @return {?}
     */
    AvatarComponent.prototype.transformFile = /**
     * @param {?} getfile
     * @return {?}
     */
    function (getfile) {
        var _this = this;
        // const subject = new Subject();
        this.imgFileObj = {
            size: getfile.size,
            name: getfile.name,
            type: getfile.type,
            lastModified: getfile.lastModified,
            lastModifiedDate: getfile.lastModifiedDate
        };
        this.do(getfile).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.loadingImg = false;
            if (res['state'] === 'done') {
                _this.imgSrc = res['result'];
                //this.onChangeCallback(this.imgSrc);
                _this.onChangeCallback(_this.removeBase64(_this.imgSrc));
                _this.onTouchedCallback();
            }
            else if (res['state'] === 'error') {
                /** @type {?} */
                var uploaderrorText = _this.localeService.getValue('avatar.uploadError');
                _this.notifyService.error({
                    type: 'error',
                    title: '',
                    msg: uploaderrorText
                });
                // this.notifyService.error('图片上传失败，请重试!');
            }
            _this.imgFileObj.state = res['state'];
            _this.imgFileObj.base64 = res['result'];
            _this.imgChange.emit(_this.imgFileObj);
        }));
    };
    /**
     * @param {?} file
     * @return {?}
     */
    AvatarComponent.prototype.read = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        return Observable.create((/**
         * @param {?} observer
         * @return {?}
         */
        function (observer) {
            /** @type {?} */
            var reader = new FileReader();
            reader.readAsDataURL(file);
            //this.loadingImg = true;
            // reader.onloadstart=function(){}
            reader.onload = (/**
             * @return {?}
             */
            function () {
                //console.log(reader.result);
                observer.next({ state: 'done', 'result': reader.result });
                observer.complete();
            });
            reader.onerror = (/**
             * @return {?}
             */
            function () {
                observer.next({ state: 'error', 'result': reader.result });
                observer.complete();
            });
        }));
    };
    /**
     * @param {?} file
     * @return {?}
     */
    AvatarComponent.prototype.do = /**
     * @param {?} file
     * @return {?}
     */
    function (file) {
        return this.read((/** @type {?} */ (file)));
    };
    /**
     * @param {?} val
     * @return {?}
     */
    AvatarComponent.prototype.writeValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (val && val.length) {
            // if(this.isBase64){
            //   this.imgSrc = this.addBase64(val);
            // }
            // else{
            //   this.imgSrc = val;
            // }
            this.imgsrcInit(val);
        }
        else if (this.cover) {
            this.imgsrcInit(this.cover);
        }
        else {
            this.imgSrc = this.defaultImgSrc;
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    AvatarComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChangeCallback = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    AvatarComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouchedCallback = fn;
    };
    // setDisabledState?(isDisabled: boolean): void {
    //     this.disabled = isDisabled;
    // }
    // setDisabledState?(isDisabled: boolean): void {
    //     this.disabled = isDisabled;
    // }
    /**
     * @param {?} val
     * @return {?}
     */
    AvatarComponent.prototype.addBase64 = 
    // setDisabledState?(isDisabled: boolean): void {
    //     this.disabled = isDisabled;
    // }
    /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (!val)
            return;
        return 'data:image/jpeg;base64,' + val;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    AvatarComponent.prototype.removeBase64 = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (!val)
            return;
        /** @type {?} */
        var img_arr = val.split(',');
        if (img_arr.length) {
            return img_arr[1];
        }
    };
    //判断是否是图片路径
    //判断是否是图片路径
    /**
     * @param {?} url
     * @return {?}
     */
    AvatarComponent.prototype.isSrc = 
    //判断是否是图片路径
    /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        return (url.match(/\.(jpeg|jpg|gif|png|svg|bmp|webp)$/) != null);
    };
    //判断是否是完成base64
    //判断是否是完成base64
    /**
     * @param {?} url
     * @return {?}
     */
    AvatarComponent.prototype.isBaseSrc = 
    //判断是否是完成base64
    /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        return (url.indexOf('data:image/') > -1 ? true : false);
    };
    /**
     * @return {?}
     */
    AvatarComponent.prototype.errorSrc = /**
     * @return {?}
     */
    function () {
        this.imgSrc = this.errorImgSrc;
        this.imgtitle = this.localeService.getValue('avatar.loadError');
    };
    AvatarComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-avatar',
                    template: "<!-- bugNum5:471047 -->\r\n<div class=\"f-avatar\" [title]=\"imgtitle\"\r\n    [ngClass]=\"{'f-avatar-readonly': tReadOnly,'f-avatar-circle':imgShape === 'circle','f-avatar-square':imgShape === 'square'}\"\r\n    [ngStyle]=\"{'width': avatarWidth+'px','height':avatarHeight+'px'}\">\r\n    <ng-container *ngIf=\"loadingImg\">\r\n        <div class=\"f-avatar-upload-loading\">\r\n            <div class=\"loading-inner\">\r\n                \u52A0\u8F7D\u4E2D\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n    <img class=\"f-avatar-image\" [attr.src]=\"imgSrc\" (error)=\"errorSrc()\">\r\n    <div class=\"f-avatar-icon\" *ngIf=\"!tReadOnly\">\r\n        <span class=\"f-icon f-icon-camera\"></span>\r\n    </div>\r\n    <input type=\"file\" class=\"f-avatar-upload\" [accept]='imgType' (change)=\"getfiledata($event)\" #file\r\n        style=\"display: none;\">\r\n</div>",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return AvatarComponent; })),
                            multi: true
                        }
                    ],
                    styles: [".f-avatar{position:relative;cursor:pointer;overflow:hidden}.f-avatar.f-avatar-readonly{cursor:default}.f-avatar.f-avatar-circle{border-radius:100%;overflow:hidden}.f-avatar.f-avatar-square{border-radius:0}.f-avatar .f-avatar-defult,.f-avatar .f-avatar-image{display:inline-block;width:100%;height:100%}.f-avatar .f-avatar-icon{display:none;position:absolute;left:0;right:0;top:0;bottom:0;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:rgba(0,0,0,.3)}.f-avatar .f-avatar-icon .f-icon{font-size:24px;color:#fff}.f-avatar.f-avatar-circle .f-avatar-icon{border-radius:100%}.f-avatar.f-avatar-square .f-avatar-icon{border-radius:0}.f-avatar .f-avatar-upload-loading{position:absolute;left:0;top:0;display:inline-block;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.f-avatar .f-avatar-upload-loading .loading-inner{position:absolute;width:100%;left:0;top:50%;margin-top:-25px;height:50px;line-height:50px;text-align:center;font-size:16px;color:#fff}.f-avatar:hover .f-avatar-icon{display:-webkit-box;display:flex}"]
                }] }
    ];
    /** @nocollapse */
    AvatarComponent.ctorParameters = function () { return [
        { type: NotifyService },
        { type: LocaleService },
        { type: Injector, decorators: [{ type: Optional }] }
    ]; };
    AvatarComponent.propDecorators = {
        file: [{ type: ViewChild, args: ['file',] }],
        readonly: [{ type: Input }],
        size: [{ type: Input }],
        imgTitle: [{ type: Input }],
        avatarWidth: [{ type: Input }],
        avatarHeight: [{ type: Input }],
        imgShape: [{ type: Input }],
        imgChange: [{ type: Output, args: ['imgChange',] }],
        type: [{ type: Input }],
        cover: [{ type: Input }],
        onClick: [{ type: HostListener, args: ['click',] }]
    };
    return AvatarComponent;
}());
export { AvatarComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.defaultImgSrc;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.errorImgSrc;
    /** @type {?} */
    AvatarComponent.prototype.imgSrc;
    /** @type {?} */
    AvatarComponent.prototype.file;
    /** @type {?} */
    AvatarComponent.prototype.tReadOnly;
    /** @type {?} */
    AvatarComponent.prototype.size;
    /** @type {?} */
    AvatarComponent.prototype.imgTitle;
    /** @type {?} */
    AvatarComponent.prototype.avatarWidth;
    /** @type {?} */
    AvatarComponent.prototype.avatarHeight;
    /** @type {?} */
    AvatarComponent.prototype.imgShape;
    /** @type {?} */
    AvatarComponent.prototype.imgtitle;
    /** @type {?} */
    AvatarComponent.prototype.imgChange;
    /** @type {?} */
    AvatarComponent.prototype._type;
    /** @type {?} */
    AvatarComponent.prototype._cover;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.perfixStr;
    /** @type {?} */
    AvatarComponent.prototype.loadingImg;
    /** @type {?} */
    AvatarComponent.prototype.imgType;
    /** @type {?} */
    AvatarComponent.prototype.imgFileObj;
    /** @type {?} */
    AvatarComponent.prototype.currentImgType;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.notifyService;
    /** @type {?} */
    AvatarComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    AvatarComponent.prototype.inject;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYXZhdGFyLyIsInNvdXJjZXMiOlsibGliL2F2YXRhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXdCLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xLLE9BQU8sRUFBRSxVQUFVLEVBQVcsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7Ozs7QUFFeEQsaUNBUUM7OztJQVBDLDJCQUFhOztJQUNiLDJCQUFhOztJQUNiLDJCQUFhOztJQUNiLG1DQUFzQjs7SUFDdEIsdUNBQXdCOztJQUN4Qiw0QkFBZTs7SUFDZiw2QkFBZ0I7O0FBR2xCO0lBOEZFLHlCQUFvQixhQUE0QixFQUFTLGFBQTRCLEVBQXFCLE1BQWU7UUFBckcsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFBUyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFxQixXQUFNLEdBQU4sTUFBTSxDQUFTO1FBakZqSCxrQkFBYSxHQUFHLHlzR0FBeXNHLENBQUE7UUFDenRHLGdCQUFXLEdBQUcsNmtGQUE2a0YsQ0FBQzs7UUFLcG1GLGNBQVMsR0FBWSxLQUFLLENBQUM7O1FBY2xCLFNBQUksR0FBVyxDQUFDLENBQUM7UUFFakIsZ0JBQVcsR0FBVyxHQUFHLENBQUM7UUFDMUIsaUJBQVksR0FBVyxHQUFHLENBQUM7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QUM7NEJBQzlDLEtBQUssRUFBRSxJQUFJO3lCQUNaO3FCQUNGOztpQkFDRjs7OztnQkExQlEsYUFBYTtnQkFFYixhQUFhO2dCQUprRyxRQUFRLHVCQStHdkMsUUFBUTs7O3VCQTdFOUYsU0FBUyxTQUFDLE1BQU07MkJBR2hCLEtBQUs7dUJBYUwsS0FBSzsyQkFDTCxLQUFLOzhCQUNMLEtBQUs7K0JBQ0wsS0FBSzsyQkFDTCxLQUFLOzRCQUdMLE1BQU0sU0FBQyxXQUFXO3VCQUdsQixLQUFLO3dCQTZCTCxLQUFLOzBCQW1FTCxZQUFZLFNBQUMsT0FBTzs7SUErSnZCLHNCQUFDO0NBQUEsQUExU0QsSUEwU0M7U0E5UlksZUFBZTs7Ozs7O0lBQzFCLHdDQUFpdUc7Ozs7O0lBQ2p1RyxzQ0FBb21GOztJQUNwbUYsaUNBQWM7O0lBRWQsK0JBQW9DOztJQUVwQyxvQ0FBMkI7O0lBYzNCLCtCQUEwQjs7SUFDMUIsbUNBQTBCOztJQUMxQixzQ0FBbUM7O0lBQ25DLHVDQUFvQzs7SUFDcEMsbUNBQXFDOztJQUNyQyxtQ0FBMEI7O0lBRTFCLG9DQUFvRDs7SUFFcEQsZ0NBQU07O0lBNkJOLGlDQUFPOzs7OztJQWVQLDJDQUE4Qzs7Ozs7SUFDOUMsNENBQStDOzs7OztJQUMvQyxvQ0FBcUI7O0lBRXJCLHFDQUFvQjs7SUFDcEIsa0NBQW9COztJQUNwQixxQ0FBd0I7O0lBQ3hCLHlDQUE4SDs7Ozs7SUFDbEgsd0NBQW9DOztJQUFFLHdDQUFtQzs7Ozs7SUFBQyxpQ0FBbUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkcmVuLCBFbGVtZW50UmVmLCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciwgVmlld0NoaWxkLCBmb3J3YXJkUmVmLCBJbmplY3RvciwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IFdFQkFQSV9QUkVGSVhfVE9LRU4gfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIHVwSW1hZ2VGaWxlIHtcclxuICBzaXplOiBudW1iZXI7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHR5cGU6IHN0cmluZztcclxuICBsYXN0TW9kaWZpZWQ/OiBzdHJpbmc7XHJcbiAgbGFzdE1vZGlmaWVkRGF0ZT86IERhdGU7XHJcbiAgc3RhdGU/OiBzdHJpbmc7XHJcbiAgYmFzZTY0Pzogc3RyaW5nO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2ZhcnJpcy1hdmF0YXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9hdmF0YXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2F2YXRhci5jb21wb25lbnQuc2NzcyddLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQXZhdGFyQ29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWVcclxuICAgIH1cclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBdmF0YXJDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciwgT25Jbml0IHtcclxuICBwcml2YXRlIGRlZmF1bHRJbWdTcmMgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwvOWovNEFBUVNrWkpSZ0FCQVFFQVpBQmtBQUQvMndCREFBd0lDUW9KQnd3S0NRb05EQXdPRVIwVEVSQVFFU01aR3hVZEtpVXNLeWtsS0NndU5FSTRMakUvTWlnb09rNDZQMFJIU2t0S0xUZFJWMUZJVmtKSlNrZi8yd0JEQVF3TkRSRVBFU0lURXlKSE1DZ3dSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBkSFIwZEhSMGRIUjBmL3dBQVJDQUVzQVN3REFTSUFBaEVCQXhFQi84UUFHZ0FCQVFFQkFRRUJBQUFBQUFBQUFBQUFBQUVDQXdRRkIvL0VBRE1RQVFFQUFRRUVDQVFHQWdNQkFBQUFBQUFCQWhFRElURkJCQlJSVW1GeGdhRVNrY0h3RXlJeXNkSGhNM0lqUXZFMC84UUFGUUVCQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUgveEFBWEVRRUJBUUVBQUFBQUFBQUFBQUFBQUFBQUVRRWgvOW9BREFNQkFBSVJBeEVBUHdEOUJCWXFDaXlBR2hvdWdJcXlHZ0VoSXVpNkF5dWl4ZEFUUTBXUUEwQmRBNGhvdWhvQ2FHZ3VnTXJvdWhvQ2FKb3VtODBCTkRSZERRR1RSYkVCTkN4ZERRR1RSVUJFMGFzUUdSVFFHVFQ3MVd4TlBQNUF1Z3F5QUN5QUM2ZHBJc2dHZ3Nob0JJU0tBaXJvUURRME9TeUFnb0JvYUFCb2FBQm9taWdKVFJRR1YwWFJBVFJHaXpVR1JTd0dkRXNhcUFsakxRRE9pTldKUVpOSjRLZmZFRklSWUFzRmtBa0ZrQUpGRmtBa05DTElBQUFDNkFndWhvQ0NsM1RXMlR6dWdJSHg0Uzc4OFo2d21XTjRaWTN5c29BMXB1K3FBZ3BZQ0FBYUlvRElvQ2FKWnZWQVEwM0xVQmxHcVdBelltaW1uM3ZBYVJZQTFJa1dBU0tLQUNnaXJJZ0FzZ0JvQmRKTmJaTk45dDNhZUlITncydlNjY2JaaFB4TE4yN2RKNjgvUngyMjJ1MS9MamJObjh2aS9pZUhQbTU4TjAzU0tONWJmYTU4YzdqT3pIZDc4WE95WGZkOThicW9DYVNjcDhqU2RrK1NnTGpsbGpkY2Nzc2ZLMTJ3NlRsTjJjbVhqTjEvaXVBRDM0WjQ3U2E0M1hUakx1czgybno1YmpsOFdOc3M0V1BYc050TnBOTHV6azN6bFoyd0hVc0JCRjVDQUZnQWhvdWlVR1JVQkVyU0F5ZmZGYW1nS3FLQ3FrVUJZY2dCcEFEaXVob0FLZVlBOGZTdHA4V1g0V1BDZnE4YjJlVDFiWE9iUFpaWjhiSnJKMjNsSHo1cnB2dXR1KzN0dk9xQUFBQUFBQUFDeTNIS1pZM1N5NnlvQStoczg1dE1KbE4ydkdkbGFlVG9tZW0wK0MvOXB1ODQ5U0FLbEFSUUVScmtnSlVXb0NVVktESXFiL3VncXhGQlZSUUZGQkZBQlJBVUFIbjZibCtYREdjN2JmVC9BTmVWMjZYZGR2SjJZejN0Y1ZBQUFBQUFBQUFBRnh5K0hLWlRqTHErbCt6NWo2R3p1dXl3dDU0ejlqUm9FUUFBUlNvQ0NvQ0lxQUlKUWFDTHpCWnhDQUtDOHdJQUNoT0lBQUR4ZEwvK2kvNno2dVR0MHlhYmZYdHhudGE0cUFBQUFBQUFBQUFEMzdIL0FBYlAvV1BCd2ZRMmMwMldFN01ZYU5BSUlvQWh6Q2dnSE1FcWFOSUROUHZpSG9Bc1JxY0FGU0tDOGlJb0hOVUFVQUFBSGw2WlB6YlBMdGxuMWVkN2VsNDY3RFh1MlgwKzY4U2dBQUFBQUFBQUFCcHJ1N2JvK25weTdQbzhIUjhmaTIrTTQ2WFcrVWU0QUJBQUFRQVFVdkFFdkJMNkJRUzhVM2ZlcXB2N2ZjRm5CVVVCVVVCU2NRRlJVQlFBQUFUS1RMRzQzbkxMNnZuYVdXeThaZEw1eDlKNHVsWS9EdHJad3ltdnJ6VWNnQUFBQUFBQUFOZHdQVDBMSDlXZDhNWis5ZWxuWTRmaDdISEc4cHJmT3RJQUFCUUFRQUtpMUFFNUtsQkQwOWhQbDdnS2pVQVZGQmVZVGlBcUtnS0FBQUE1ZEt3K1BZMnlhNVkvbW4xOW5WUWZNRzl0aCtIdGJqT0YzenlyQ2dBQUFBQUE2ZEh3K1BiU1dmbG41cjZPYjI5R3crRFpTMmZteTMzeTVUNmc3Y2JyZWFBZ0FBQUFncUFjZ3FmSUJPYXBRU25yN2xQUy9JRWFTY0FGVkZnS0lvS2lvQ2dBQUJnQURqMG5aL0hzdFp2eXgzenhuTjQrVDZiNTJlUHc3VExHY0piSW95QUFBQUFEZXgyZjRtMW1OMStHYjc1VGw5SDBQYndlYm9lT21HV1hPM1Qwbi9yMEFBSUFBQUFDS2dISkZweUJFcHlBUkZUNzRnS25OUVZlYVJRRjVJb0tUaWlnQ0tBQUFDWldZNC9GbFpNWnh0M1NBdm51bmErZG5sTTg4ODV3eXRzOG5YYjlJL0VsdzJlN0c3cmxlTjhKNGVQTnhVQUFBQUFBZXJvZVV1Rng3THJQS3ZRK2RqbGNNcGxqZExIczJXM3gyazAvVGwyVzhmTHRCMUM4ZXdRQUFFVUJEbXQ0b0JlSmVDQUlVQVJGdkJOM2dCeVZBRlVJQ2h6V2NBT1NwR2RwbmpzNXJubE1kZUhiZktjd2I1OHg1YytsMjNUWjdQMXkzZTArcmxkdnRjdU8wc25aakpGSHZ0bU0xeXNuamJwSEhMcE95eDNUSzVlR00xZUt5VzYzVzN0dDFVSGZQcGVWM1lZVEdkdVcrL0p3eXVXZDF6eXVWbkRYaFBLY2dBQUFBQUFBQUFBQjB3MiswdzNUS1pUc3kzKzd0ajB2Ry9yeHl4dmJOOGVVQjlERGE3UFA5T2VOdlpycGZkdThPRDVta3ZHTlk1NVkvcHp5eDhydUlQZVBKajBuYXpqOE9VOFpwZloxdzZUczhySmxyaGZIZlBtZzdGS2dBRjRBZ1ZBUlBXL05hbm9Bc1phQlZsWlVGVkY0ZzU3ZmJmaFk3cExsZDBsL2UrRWVPMjNLNVpXNVpYamI5N28xdGN2ajIyV1hIUy9EUEtNcUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPdXgyMTJkMHR0d3ZHZG5qSHIzY2VNZlBldm8yWHhiTFR1M1QwQjFUbUhKQVpWT1lGNHA5OHhQdmlCRlNjUUdsUlp4QmRTM1RHM3NsdnNpYlMvOFdYK3QvWUhoeC9UUEdhcWs0VHlWUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFkK2lYODJjN1pMOS9Od2R1aS81Yi9yZm9EMDB2QVJBUXFBaGZ2Y1ZOZkwzQTFXTXFEU3htVlFWTnIvaXo0L3B2N0xET1hMRExHY2JOUERlRHhUaDZEdE9qWmFhZkZqdTgxNnRsZisyUHVvNER2MWJQdlkrNTFiTHZZKzVSd0hmcTJYZXg5enF1WGV4OXlqZ08vVmN1OWo3blZjKzlqN2xIQWQrcTU5N0gzT3E1OTdIM0J3SGZxdWZleDl6cXVmZXg5eWpnTy9WYys5ajduVmMrOWo3bEhBZCtxNTk3SDNPcTU5N0gzS09BNzlWejcyUHVkVno3MlB1VWNCMzZybDNzZmM2cm4zc2ZjbzREdmVqWmQ3SDNPclpkN0gzS09BNzlXeTcyUHVkV3o3MlB1RGc3ZEcveTMvVy9RNnRsM3NmZHZZN0s3UE8yNVM2eXpTZG9PcVdsRUJtaGFCYW10KzZKNkFubXFhcURReTBDeFl5b05DS0M2bS9WQUdoUEpkUUJPU2dLaTYrUUd1NDFRQlJBRjFMVUFCYlVBQk5kQVZPWVVDMHRFMTNnSVdsb0NjVFhlbG9GUUxRVG1mZk10VDc0Z2l4T2E2Z3F5c3J6QlZTVlFWZFdkUUdwUk5WMUJWMTBTVWxCWUl2SUYxRTFOZTBGNWlBS0lBb2hhQ21xV2dCYWFwcUMyb2hxQzZwcVdvQzJwYWE3MHRBcUNBQ0FDYStGK1JhbnlBV0ovYTh2a0F1cVQ2ZlZmN0FWT3owWCtBWFZZaDJlZ05TaWZ4OVQrd1ZXZWZ5WCtQcUN5cnFuODA3UFFGRW4wK3AvWUtIOUgzN2dBYy9rQzZvbkwwUDVCUlA2T1Y4dnFDMm9mMmwvZ0FPU0F1cWFuOUovQUttb245QVV0TDlQcW5QMW9DV2w1ZWhmdjVnaDYzNW5QMXFXZy8vWidcclxuICBwcml2YXRlIGVycm9ySW1nU3JjID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsLzlqLzRBQVFTa1pKUmdBQkFRQUFTQUJJQUFELzRRQkFSWGhwWmdBQVRVMEFLZ0FBQUFnQUFZZHBBQVFBQUFBQkFBQUFHZ0FBQUFBQUFxQUNBQVFBQUFBQkFBQUFaS0FEQUFRQUFBQUJBQUFBWkFBQUFBRC83UUE0VUdodmRHOXphRzl3SURNdU1BQTRRa2xOQkFRQUFBQUFBQUE0UWtsTkJDVUFBQUFBQUJEVUhZelpqd0N5Qk9tQUNaanMrRUorLzhBQUVRZ0FaQUJrQXdFaUFBSVJBUU1SQWYvRUFCOEFBQUVGQVFFQkFRRUJBQUFBQUFBQUFBQUJBZ01FQlFZSENBa0tDLy9FQUxVUUFBSUJBd01DQkFNRkJRUUVBQUFCZlFFQ0F3QUVFUVVTSVRGQkJoTlJZUWNpY1JReWdaR2hDQ05Dc2NFVlV0SHdKRE5pY29JSkNoWVhHQmthSlNZbktDa3FORFUyTnpnNU9rTkVSVVpIU0VsS1UxUlZWbGRZV1ZwalpHVm1aMmhwYW5OMGRYWjNlSGw2ZzRTRmhvZUlpWXFTazVTVmxwZVltWnFpbzZTbHBxZW9xYXF5czdTMXRyZTR1YnJDdzhURnhzZkl5Y3JTMDlUVjF0ZlkyZHJoNHVQazVlYm42T25xOGZMejlQWDI5L2o1K3YvRUFCOEJBQU1CQVFFQkFRRUJBUUVBQUFBQUFBQUJBZ01FQlFZSENBa0tDLy9FQUxVUkFBSUJBZ1FFQXdRSEJRUUVBQUVDZHdBQkFnTVJCQVVoTVFZU1FWRUhZWEVUSWpLQkNCUkNrYUd4d1Frak0xTHdGV0p5MFFvV0pEVGhKZkVYR0JrYUppY29LU28xTmpjNE9UcERSRVZHUjBoSlNsTlVWVlpYV0ZsYVkyUmxabWRvYVdwemRIVjJkM2g1ZW9LRGhJV0doNGlKaXBLVGxKV1dsNWlabXFLanBLV21wNmlwcXJLenRMVzJ0N2k1dXNMRHhNWEd4OGpKeXRMVDFOWFcxOWpaMnVMajVPWG01K2pwNnZMejlQWDI5L2o1K3YvYkFFTUFBUUVCQVFFQkFnRUJBZ01DQWdJREJBTURBd01FQlFRRUJBUUVCUVlGQlFVRkJRVUdCZ1lHQmdZR0JnY0hCd2NIQndnSUNBZ0lDUWtKQ1FrSkNRa0pDZi9iQUVNQkFRRUJBZ0lDQkFJQ0JBa0dCUVlKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNmL2RBQVFBQi8vYUFBd0RBUUFDRVFNUkFEOEEvc3dvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLzlEK3pDaWlpZ0FvcnQvaDdiV2wzNGtTRzhqV1ZkakVCaGtaQTlEWGJYL2ppejB2VkpkS3M5S1YzamtNWXdRdTQ1d01BSWV0QUhpZURqZGppa3I2RDhjNjROUDhPQ3h1VVVYTjRtM3l3Y2hSL0VmdzZBK3ZOZVVlRWZETTNpUFVOalpXM2l3Wlc5djdvOXorbEFISjBWN1pxZnhDMHZTcm82VnAxbWs5dkFOZ0lZS01qcUYrVThEMTcvenovd0RoWVBoNmYvajcwbERucjl4djVxS0FQSTZLOWMvNFN2NGZ6ZjYvU2l2KzdISC9BRVlWZHV0TThHNng0WHU5WjBtMU1SaERCU2NxUXlnSHBrakhOQUhpMUZGRkFCUlJSUUIvLzlIK3pDaWlpZ0RzL2g5SjVmaXkxSFp0NC84QUhHcS9xMS9Ib1B4Qm0xQ1dMelZqazNGZjk1UnlQY1p5S3d2QjBubGVKN0p2V1FEOHhpdFA0aVI3UEZjN2YzMVEvd0Rqb0g5S0FPeDhUYUJGNHl0eDRrOFBUZWM0VUswUlBZZGg2SDI3L3dBK1I4RytKbThOWDcyV29LUmJ5bmJJQ09VWWNaeC9NVnptaWE3cU9nWFl1N0I4ZjNsUDNXSG9SWHBQaktIVE5ZOE1RK0t4RDVGektWSCs5a2tZUHJ3TWc5Y1VBYzc0MThLTHBFZzFYVFBuc3ArUmprSVQyK2g3SDhQcmhlRnREWHhEckNhZkkreE1GbUk2NEhwNzE2aDRSYVcwOEhUemVKU0RZa0h5MFljN0QvUW43b3J4eXcxRzUwcStXLzA1akc2RTdlL0I3SDE0b0E5QjhhK0NMSFF0UFhVdE5kOW9ZS3l1UWV2UWc0SDVWYzB6L1IvaGRkeWYzM1A2c3ExeE91K0xOWThReHBEZnNvalE1Q29NRFBxZVRtdTNtL2NmQ2lOZThyZisxU2Y1Q2dEeUtpaWlnQW9vb29BLy85TCt6Q2lpaWdEWDhQeWVWcjFsSjZUeC93RG9RcnJ2aWZIczhTSzM5K0ZUK3JEK2xjSFpTZVZlUlMvM1hVL2thOXI4ZCtGTlgxN1U0Ym5UVVZsV0xZeFpnTUVNVDllOUFIaGdCSndPcHI2UnYvREl2N1hUZEl1T0xXMFVOTDJ5VVVLQitPVG4ycnl5THdacVdqNnpwNDFYWjVjODZyOHB6eUNEZzlPdGQ1NDcxeTVhZUx3cHBoMnpYZTBPNTRBVmpnRFB2Mzl1S0FPQjhjZUp4ck4wTlBzRGl6dHpoY2RHSTQzZlFkQi85ZXVDcjBpWDRYZUlrNWprZ2Y2TVIvTmF6SmZoOTRyaTVGc0hIK3k2L3dCU0tBT0tyMXp4Qi9vL3cyMCtMKyt5ZnFHYXVGbDhKZUpZZnYyVXAvM1YzZnl6WGVlT2thMThJNlRaU0FxeWhNZzhFRlk4SFA1MEFlUTBVVVVBRkZGRkFILy8wLzdNS0tLS0FDdmZmRzh2aVdTT3lrOFBHWWlSV0wrU0Qvc2taSTZkVFhnVmQzRDhSZkVrRnNsdEcwZUkxQ2hpdVRnY2M4NG9Bb1grbitNWVZYVmRVUzRJZ0lZUElTMjA1R0R5VGptdlJmRmVoWGZqQ3lzZGMwWlZNalIvTUNRT0R5QmsraHlLODMxTHhuNGkxYTFheXZKOHhQOEFlVlZVWng3Z1pyTXN0ZTFyVG94QlkzVXNhRG9vWTdSK0hTZ0RyUDdBK0l0ai9xdnRDZ2YzSmdmMERVdjIvd0NKTmwxRjF4M01aY2ZtUWF5NHZIbml5SDd0MlQvdktoL21LMG92aVo0bWorK1lwUDhBZVQvQWlnQi8vQ2RlTmJQL0FJK3VjZjhBUFNJRCtRRmJ2eFVsY3c2ZEcvM2lIWS9YQzFSaStLdXJML3I3YUZ2OTNjdjh5YTVYeFQ0b204VDNFVTBzUWlFU2tBQTU2OVRuaWdEbHFLS0tBQ2lpaWdELzFQN01LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC9WL3N3b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS85az0nO1xyXG4gIHB1YmxpYyBpbWdTcmM7XHJcbiAgLy8gcHVibGljIGZpbGVCaW5hcnk6IHN0cmluZztcclxuICBAVmlld0NoaWxkKCdmaWxlJykgZmlsZTogRWxlbWVudFJlZjtcclxuICAvLyBASW5wdXQoKSBjb3ZlciA9ICcnO1xyXG4gIHRSZWFkT25seTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IHJlYWRvbmx5KHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudFJlYWRPbmx5KSB7XHJcbiAgICAgIGxldCBsb2NhbGVUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnYXZhdGFyLmltZ3RpdGxlJyk7XHJcbiAgICAgIHRoaXMuaW1ndGl0bGUgPSB2YWx1ZSA/ICcnIDogKHRoaXMuaW1nVGl0bGUgPyB0aGlzLmltZ1RpdGxlIDogbG9jYWxlVGl0bGUpO1xyXG4gICAgICB0aGlzLnRSZWFkT25seSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICB9O1xyXG4gIGdldCByZWFkb25seSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnRSZWFkT25seTtcclxuICB9XHJcbiAgLy8gQElucHV0KCkgdHlwZTtcclxuICBASW5wdXQoKSBzaXplOiBudW1iZXIgPSAxO1xyXG4gIEBJbnB1dCgpIGltZ1RpdGxlOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgYXZhdGFyV2lkdGg6IG51bWJlciA9IDEwMDtcclxuICBASW5wdXQoKSBhdmF0YXJIZWlnaHQ6IG51bWJlciA9IDEwMDtcclxuICBASW5wdXQoKSBpbWdTaGFwZTogc3RyaW5nID0gJ2NpcmNsZSc7XHJcbiAgaW1ndGl0bGU6IHN0cmluZyA9ICfngrnlh7vkv67mlLknO1xyXG4gIC8vIEBJbnB1dCgpIGlzQmFzZTY0OmJvb2xlYW4gPSB0cnVlO1xyXG4gIEBPdXRwdXQoJ2ltZ0NoYW5nZScpIGltZ0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgX3R5cGU7XHJcbiAgQElucHV0KClcclxuICBzZXQgdHlwZSh2YWwpIHtcclxuICAgIGlmICh2YWwgJiYgdmFsLmxlbmd0aCkge1xyXG4gICAgICBsZXQgdHlwZXMgPSB2YWw7XHJcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHR5cGVzID0gdmFsLnNwbGl0KCcsJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVzICYmIHR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEltZ1R5cGUgPSBbXTtcclxuICAgICAgICB0eXBlcy5mb3JFYWNoKHQgPT4ge1xyXG4gICAgICAgICAgaWYgKCh0eXBlb2YgdCA9PSAnc3RyaW5nJykgJiYgdC5jb25zdHJ1Y3RvciA9PSBTdHJpbmcpIHtcclxuICAgICAgICAgICAgbGV0IHRJbWd0eXBlID0gJ2ltYWdlLycgKyB0O1xyXG4gICAgICAgICAgICBpZiAodCA9PT0gJ2pwZycpIHtcclxuICAgICAgICAgICAgICBsZXQganBnVHlwZSA9ICdpbWFnZS9qcGVnJztcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWdUeXBlLnB1c2goanBnVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1nVHlwZS5wdXNoKHRJbWd0eXBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW1nVHlwZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB0aGlzLmltZ1R5cGUgPSB0aGlzLmN1cnJlbnRJbWdUeXBlLmpvaW4oJywnKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgdHlwZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gIH1cclxuICBfY292ZXI7XHJcbiAgQElucHV0KClcclxuICBzZXQgY292ZXIodmFsKSB7XHJcbiAgICBpZiAodmFsKSB7XHJcbiAgICAgIHRoaXMuX2NvdmVyID0gdmFsO1xyXG4gICAgICB0aGlzLmltZ3NyY0luaXQodGhpcy5jb3Zlcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5pbWdTcmMgPSB0aGlzLmRlZmF1bHRJbWdTcmM7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBjb3ZlcigpIHtcclxuICAgIHJldHVybiB0aGlzLl9jb3ZlcjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25DaGFuZ2VDYWxsYmFjazogRnVuY3Rpb24gPSAoKSA9PiB7IH1cclxuICBwcml2YXRlIG9uVG91Y2hlZENhbGxiYWNrOiBGdW5jdGlvbiA9ICgpID0+IHsgfVxyXG4gIHByaXZhdGUgcGVyZml4U3RyPScnO1xyXG4gIC8v5piv5ZCm5Yqg6L295LitXHJcbiAgbG9hZGluZ0ltZzogYm9vbGVhbjtcclxuICBpbWdUeXBlID0gJ2ltYWdlLyonO1xyXG4gIGltZ0ZpbGVPYmo6IHVwSW1hZ2VGaWxlO1xyXG4gIGN1cnJlbnRJbWdUeXBlID0gWydpbWFnZS9pbWFnZScsICdpbWFnZS93ZWJwJywgJ2ltYWdlL3BuZycsICdpbWFnZS9zdmcnLCAnaW1hZ2UvZ2lmJywgJ2ltYWdlL2pwZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2JtcCddO1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSwgcHVibGljIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UsQE9wdGlvbmFsKCkgcHJpdmF0ZSBpbmplY3Q6SW5qZWN0b3IpIHtcclxuICAgIHRoaXMubm90aWZ5U2VydmljZS5jb25maWcucG9zaXRpb24gPSAndG9wLWNlbnRlcic7XHJcblxyXG4gICAgaWYodGhpcy5pbmplY3Qpe1xyXG4gICAgICBpZihXRUJBUElfUFJFRklYX1RPS0VOKXtcclxuICAgICAgICAgIHRoaXMucGVyZml4U3RyID0gdGhpcy5pbmplY3QuZ2V0KFdFQkFQSV9QUkVGSVhfVE9LRU4sICcnKTtcclxuICAgICAgfVxyXG4gICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIC8vIGlmKHRoaXMuY292ZXIpe1xyXG4gICAgLy8gICB0aGlzLmltZ3NyY0luaXQodGhpcy5jb3Zlcik7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBlbHNle1xyXG4gICAgLy8gICB0aGlzLmltZ1NyYyA9IHRoaXMuZGVmYXVsdEltZ1NyYztcclxuICAgIC8vIH1cclxuICAgIGlmICh0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgIHRoaXMuaW1ndGl0bGUgPSAnJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMuaW1nVGl0bGUpIHtcclxuICAgICAgdGhpcy5pbWd0aXRsZSA9IHRoaXMuaW1nVGl0bGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5pbWd0aXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnYXZhdGFyLmltZ3RpdGxlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8q5Yik5patY292ZXLmlbDmja7moLzlvI/vvIzlgZrlh7rkv67mlLnotYvlgLznu5lpbWdTcmNcclxuICAqL1xyXG4gIGltZ3NyY0luaXQodmFsKSB7XHJcbiAgICBsZXQgaXNJbWcgPSB0aGlzLmlzU3JjKHZhbCk7XHJcbiAgICBpZiAoaXNJbWcpIHtcclxuICAgICAgdGhpcy5pbWdTcmMgPSB0aGlzLnBlcmZpeFN0cit2YWw7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IGlzRnVsbEJhc2U2NCA9IHRoaXMuaXNCYXNlU3JjKHZhbCk7XHJcbiAgICAgIGlmIChpc0Z1bGxCYXNlNjQpIHtcclxuICAgICAgICB0aGlzLmltZ1NyYyA9IHZhbFxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW1nU3JjID0gdGhpcy5hZGRCYXNlNjQodmFsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignY2xpY2snKVxyXG4gIG9uQ2xpY2soKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5yZWFkb25seSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAodGhpcy5maWxlLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCkuY2xpY2soKTtcclxuICB9XHJcblxyXG4gIGdldGZpbGVkYXRhKGV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5yZWFkb25seSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBmaWxldGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBsZXQgZ2V0ZmlsZSA9IGZpbGV0YXJnZXQuZmlsZXM7XHJcbiAgICBpZiAoIWdldGZpbGVbMF0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGZpbGVUeXBlID0gZ2V0ZmlsZVswXS50eXBlO1xyXG4gICAgY29uc3QgaXNMdFNpemUgPSBnZXRmaWxlWzBdLnNpemUgLyAxMDI0IC8gMTAyNCA8IHRoaXMuc2l6ZTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRJbWdUeXBlLmluZGV4T2YoZmlsZVR5cGUpIDwgMCkge1xyXG4gICAgICBsZXQgdHlwZWVycm9yVGV4dCA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnYXZhdGFyLnR5cGVFcnJvcicpO1xyXG4gICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuZXJyb3Ioe1xyXG4gICAgICAgIHR5cGU6ICdlcnJvcicsXHJcbiAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgIG1zZzogdHlwZWVycm9yVGV4dFxyXG4gICAgICB9KTtcclxuICAgICAgZmlsZXRhcmdldC52YWx1ZSA9ICcnO1xyXG4gICAgICAvLyB0aGlzLm5vdGlmeVNlcnZpY2UuZXJyb3IoJ+S4iuS8oOWbvueJh+exu+Wei+S4jeato+ehricpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpc0x0U2l6ZSkge1xyXG4gICAgICBsZXQgc2l6ZWVycm9yVGV4dCA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnYXZhdGFyLnNpemVFcnJvcicpO1xyXG4gICAgICBsZXQgZXJyb3JtZXM6IHN0cmluZyA9IHNpemVlcnJvclRleHQgKyB0aGlzLnNpemUgKyBcIk0hXCI7XHJcbiAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcih7XHJcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcclxuICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgbXNnOiBlcnJvcm1lc1xyXG4gICAgICB9KTtcclxuICAgICAgZmlsZXRhcmdldC52YWx1ZSA9ICcnO1xyXG4gICAgICAvLyB0aGlzLm5vdGlmeVNlcnZpY2UuZXJyb3IoYOS4iuS8oOWbvueJh+S4jeiDveWkp+S6jiR7dGhpcy5zaXplfU0hYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudHJhbnNmb3JtRmlsZShnZXRmaWxlWzBdKTtcclxuICAgIGZpbGV0YXJnZXQudmFsdWUgPSAnJztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRJbWdGaWxlT2JqKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW1nRmlsZU9iajtcclxuICB9XHJcblxyXG4gIHRyYW5zZm9ybUZpbGUoZ2V0ZmlsZTogYW55KSB7XHJcbiAgICAvLyBjb25zdCBzdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuaW1nRmlsZU9iaiA9IHtcclxuICAgICAgc2l6ZTogZ2V0ZmlsZS5zaXplLFxyXG4gICAgICBuYW1lOiBnZXRmaWxlLm5hbWUsXHJcbiAgICAgIHR5cGU6IGdldGZpbGUudHlwZSxcclxuICAgICAgbGFzdE1vZGlmaWVkOiBnZXRmaWxlLmxhc3RNb2RpZmllZCxcclxuICAgICAgbGFzdE1vZGlmaWVkRGF0ZTogZ2V0ZmlsZS5sYXN0TW9kaWZpZWREYXRlXHJcbiAgICB9XHJcbiAgICB0aGlzLmRvKGdldGZpbGUpLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmdJbWcgPSBmYWxzZTtcclxuICAgICAgaWYgKHJlc1snc3RhdGUnXSA9PT0gJ2RvbmUnKSB7XHJcbiAgICAgICAgdGhpcy5pbWdTcmMgPSByZXNbJ3Jlc3VsdCddO1xyXG5cclxuICAgICAgICAvL3RoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLmltZ1NyYyk7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMucmVtb3ZlQmFzZTY0KHRoaXMuaW1nU3JjKSk7XHJcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjaygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHJlc1snc3RhdGUnXSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgIGxldCB1cGxvYWRlcnJvclRleHQgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2F2YXRhci51cGxvYWRFcnJvcicpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcih7XHJcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgbXNnOiB1cGxvYWRlcnJvclRleHRcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcign5Zu+54mH5LiK5Lyg5aSx6LSl77yM6K+36YeN6K+VIScpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuaW1nRmlsZU9iai5zdGF0ZSA9IHJlc1snc3RhdGUnXTtcclxuICAgICAgdGhpcy5pbWdGaWxlT2JqLmJhc2U2NCA9IHJlc1sncmVzdWx0J107XHJcbiAgICAgIHRoaXMuaW1nQ2hhbmdlLmVtaXQodGhpcy5pbWdGaWxlT2JqKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVhZChmaWxlOiBGaWxlKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZShvYnNlcnZlciA9PiB7XHJcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAvL3RoaXMubG9hZGluZ0ltZyA9IHRydWU7XHJcbiAgICAgIC8vIHJlYWRlci5vbmxvYWRzdGFydD1mdW5jdGlvbigpe31cclxuICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgIG9ic2VydmVyLm5leHQoeyBzdGF0ZTogJ2RvbmUnLCAncmVzdWx0JzogcmVhZGVyLnJlc3VsdCB9KTtcclxuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICB9O1xyXG4gICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBvYnNlcnZlci5uZXh0KHsgc3RhdGU6ICdlcnJvcicsICdyZXN1bHQnOiByZWFkZXIucmVzdWx0IH0pO1xyXG4gICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBkbyhmaWxlOiBhbnkpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVhZChmaWxlIGFzIEZpbGUpO1xyXG4gIH1cclxuXHJcbiAgd3JpdGVWYWx1ZSh2YWw6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKHZhbCAmJiB2YWwubGVuZ3RoKSB7XHJcbiAgICAgIC8vIGlmKHRoaXMuaXNCYXNlNjQpe1xyXG4gICAgICAvLyAgIHRoaXMuaW1nU3JjID0gdGhpcy5hZGRCYXNlNjQodmFsKTtcclxuICAgICAgLy8gfVxyXG4gICAgICAvLyBlbHNle1xyXG4gICAgICAvLyAgIHRoaXMuaW1nU3JjID0gdmFsO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIHRoaXMuaW1nc3JjSW5pdCh2YWwpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5jb3Zlcikge1xyXG4gICAgICB0aGlzLmltZ3NyY0luaXQodGhpcy5jb3Zlcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5pbWdTcmMgPSB0aGlzLmRlZmF1bHRJbWdTcmM7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gZm47XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2sgPSBmbjtcclxuICB9XHJcbiAgLy8gc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gIC8vICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAvLyB9XHJcblxyXG4gIGFkZEJhc2U2NCh2YWwpIHtcclxuICAgIGlmICghdmFsKSByZXR1cm47XHJcbiAgICByZXR1cm4gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIHZhbDtcclxuICB9XHJcblxyXG4gIHJlbW92ZUJhc2U2NCh2YWwpIHtcclxuICAgIGlmICghdmFsKSByZXR1cm47XHJcbiAgICBsZXQgaW1nX2FyciA9IHZhbC5zcGxpdCgnLCcpO1xyXG4gICAgaWYgKGltZ19hcnIubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBpbWdfYXJyWzFdO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgLy/liKTmlq3mmK/lkKbmmK/lm77niYfot6/lvoRcclxuICBpc1NyYyh1cmwpIHtcclxuICAgIHJldHVybiAodXJsLm1hdGNoKC9cXC4oanBlZ3xqcGd8Z2lmfHBuZ3xzdmd8Ym1wfHdlYnApJC8pICE9IG51bGwpXHJcbiAgfVxyXG4gIC8v5Yik5pat5piv5ZCm5piv5a6M5oiQYmFzZTY0XHJcbiAgaXNCYXNlU3JjKHVybCkge1xyXG4gICAgcmV0dXJuICh1cmwuaW5kZXhPZignZGF0YTppbWFnZS8nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlKVxyXG4gIH1cclxuXHJcbiAgZXJyb3JTcmMoKSB7XHJcbiAgICB0aGlzLmltZ1NyYyA9IHRoaXMuZXJyb3JJbWdTcmM7XHJcbiAgICB0aGlzLmltZ3RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhdmF0YXIubG9hZEVycm9yJyk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=