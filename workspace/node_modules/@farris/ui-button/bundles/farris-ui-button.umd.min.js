!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("@farris/ui-common")):"function"==typeof define&&define.amd?define("@farris/ui-button",["exports","@angular/common","@angular/core","rxjs","@farris/ui-common"],e):e((t.farris=t.farris||{},t.farris["ui-button"]={}),t.ng.common,t.ng.core,t.rxjs,t.uiCommon)}(this,function(t,e,i,n,o){"use strict";var r=(s.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[]},s.ngInjectableDef=i.defineInjectable({factory:function(){return new s},token:s,providedIn:"root"}),s);function s(){}var a=(c.prototype.initButtonEvent=function(){this.el&&this.el.closest("grid-body-cell")&&this.el.addEventListener("mousedown",this.onBtnMouseDown.bind(this),!0)},c.prototype.onBtnMouseDown=function(t){this.__zone_click=this.el.__zone_symbol__clickfalse,this.__zone_click&&this.__zone_click.length&&(t.currentTarget.style.pointerEvents="none",this.el.__zone_symbol__clickfalse=null)},c.prototype.clickEvent=function(t){t.stopPropagation(),this.disabled||this.click.emit(t)},c.decorators=[{type:i.Component,args:[{selector:"farris-button",template:"\n    <button [class]=\"(size === 'large'?'btn-lg ':'btn-sm ')+\n    'btn '+ (type?'btn-'+type+' ':'')\"  #btn \n    [class.disabled]=\"disabled\" (click)=\"clickEvent($event)\">\n      <ng-content></ng-content>\n    </button>\n  "}]}],c.ctorParameters=function(){return[{type:i.Injector,decorators:[{type:i.Optional}]},{type:i.ElementRef,decorators:[{type:i.Optional}]}]},c.propDecorators={text:[{type:i.Input}],size:[{type:i.Input}],type:[{type:i.Input}],disabled:[{type:i.Input}],click:[{type:i.Output}],btnEl:[{type:i.ViewChild,args:["btn"]}]},c);function c(t,e){var n=this;this.injector=t,this._elRef=e,this.size="small",this.type="primary",this.click=new i.EventEmitter,this.__zone_click=null,setTimeout(function(){n.el=e?e.nativeElement:n.btnEl?n.btnEl.nativeElement.parentElement:null,n.initButtonEvent()})}function u(){var t=document.querySelector(".ff-btn-group-dropdown-menu.show");t&&(t.className=t.className.replace("show",""))}var p=(Object.defineProperty(l.prototype,"placement",{get:function(){return this._placement},set:function(t){t&&t!==this._placement&&(this.realPlacement=this.getRealPlacement(t),this._placement=t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"flatButtons",{get:function(){return this.data&&this.data.slice(0,this.count)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"dpButtons",{get:function(){return this.data&&this.data.slice(this.count)},enumerable:!0,configurable:!0}),l.prototype.btnmenuId=function(){var t=new o.IdService;this.btnmenuid+=t.guid(),this.overLayService=new o.OverLayHiddenService},l.prototype.ngOnInit=function(){this.btnmenuId()},l.prototype.ngOnChanges=function(t){t.data},l.prototype.ngAfterViewInit=function(){},l.prototype.ngAfterViewChecked=function(){this.show&&this.setPosition(this.event)},l.prototype.clickEvent=function(t){var e=this;t.stopPropagation(),this.show=!(this.show&&-1<this.dpMenu.nativeElement.className.indexOf("show")),this.show&&(u(),this.appendBody(),this.overLayService.registerMouseEvent(this.dpBtn.nativeElement,function(t){!function n(t){if(t.target){var e=Array.from(t.target.classList||[]);"LI"===t.target.nodeName||t.target.closest("li.dropdown-item")||e.includes("dropdown-item")||u()}}(t)}),this.event=t,this.ngZone.runOutsideAngular(function(){e.bindMenuMouseenter(),e.bindiMenuMouseleave(),e.mouseNotEnterLeave()})),this.changeRef.detectChanges(),this.changeRef.markForCheck(),this.changeState.emit(this.show)},l.prototype.toggle=function(t,e){t.stopPropagation(),e.disabled||(this.show=!1,this.changeRef.detectChanges(),this.changeRef.markForCheck(),this.change.emit(e.id),this.click.emit(e),this.dpBtn&&this.overLayService.destory(this.dpBtn.nativeElement))},l.prototype.appendBody=function(){this.dpMenu.nativeElement&&!document.querySelector("body>#"+this.btnmenuid)&&document.body.appendChild(this.dpMenu.nativeElement),this.dpMenu.nativeElement.className=this.dpMenu.nativeElement.className+" show",this.dpMenu.nativeElement.style.zIndex=this.commonUtils.getFloatingLayerIndex()},l.prototype.removeMenuPanel=function(){this.dpMenu.nativeElement&&document.querySelector("body>#"+this.btnmenuid)&&this.dpMenu.nativeElement.remove()},l.prototype.changePlacement=function(t){if(this.autoRectify){var e=this.getReferencePosition(),n=this.realPlacement;-1<n.indexOf("bottom")?this._menuHeight>e.bottom-t.bottom&&(n=n.replace("bottom","top")):-1<n.indexOf("top")&&this._menuHeight>t.top-e.top&&(n=n.replace("top","bottom")),-1<n.indexOf("left")?this._menuWidth>t.left-e.left&&(n=n.replace("left","right")):-1<n.indexOf("right")&&this._menuWidth>e.right-t.right&&(n=n.replace("right","left")),this.rectifyPlacement=n}},l.prototype.getReferencePosition=function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight,n=0,i=0;return this.rectifyReferenceH&&(t=this.rectifyReferenceH.getBoundingClientRect().right,i=this.rectifyReferenceH.getBoundingClientRect().left),this.rectifyReferenceV&&(e=this.rectifyReferenceV.getBoundingClientRect().bottom,n=this.rectifyReferenceV.getBoundingClientRect().top),{top:n,left:i,right:t,bottom:e}},l.prototype._getClsName=function(t){var e="";switch(t){case"top-right":case"top":e="dropup";break;case"top-left":e="dropup-left";break;case"left-bottom":case"left":e="dropleft";break;case"left-top":e="dropleft-up";break;case"right-bottom":case"right":e="dropright";break;case"right-top":e="dropright-up";break;case"bottom-left":e="dropdown-left";break;case"bottom-right":e="dropdown";break;default:e="dropdown"}return e},l.prototype.getRealPlacement=function(t){var e="bottom-right";switch(t){case"top":e="top-right";break;case"left":e="left-bottom";break;case"right":e="right-bottom";break;case"bottom":e="bottom-right";break;default:e=t}return e},l.prototype.changePosition=function(t){var e="",n=0,i=0;-1<(e=this.autoRectify?this.rectifyPlacement:this.realPlacement).indexOf("top")?n=t.top-this._menuHeight:-1<e.indexOf("bottom")&&(n=t.bottom),-1<e.indexOf("right")?i=t.right:-1<e.indexOf("left")&&(i=t.left-this._menuWidth),-1<e.indexOf("-top")?n-=t.height:-1<e.indexOf("-bottom")&&(n+=t.height),this.dpMenu.nativeElement.style.top=n+"px",this.dpMenu.nativeElement.style.left=i+"px"},l.prototype.bindMenuMouseenter=function(){this.unbindMenuMouseenter(),this.mouseenterEvent=this.changeFlagToTrue.bind(this),this.dpMenu.nativeElement.addEventListener("mouseenter",this.mouseenterEvent)},l.prototype.bindiMenuMouseleave=function(){this.unbindiMenuMouseleave(),this.mouseleaveEvent=this.mouseLeave.bind(this),this.dpMenu.nativeElement.addEventListener("mouseleave",this.mouseleaveEvent)},l.prototype.unbindMenuMouseenter=function(){this.mouseenterEvent&&this.dpMenu.nativeElement.removeEventListener("mouseenter",this.mouseenterEvent)},l.prototype.unbindiMenuMouseleave=function(){this.mouseleaveEvent&&this.dpMenu.nativeElement.removeEventListener("mouseleave",this.mouseleaveEvent)},l.prototype.changeFlagToTrue=function(){this.dpFlag=!0},l.prototype.changeFlagToFalse=function(){this.dpFlag=!1},l.prototype.mouseLeave=function(){var t=this;this.dpFlag&&(this.changeFlagToFalse(),this.unbindiMenuMouseleave(),this.unbindMenuMouseenter(),this.close(),this.setTimeObj&&this.ngZone.runOutsideAngular(function(){clearTimeout(t.setTimeObj)}))},l.prototype.mouseNotEnterLeave=function(){var t=this;this.ngZone.runOutsideAngular(function(){t.setTimeObj&&clearTimeout(t.setTimeObj),t.setTimeObj=setTimeout(function(){t.dpFlag||(t.changeFlagToFalse(),t.unbindiMenuMouseleave(),t.unbindMenuMouseenter(),t.close(),t.setTimeObj&&clearTimeout(t.setTimeObj))},2e3)})},l.prototype.close=function(){this.show=!1,this.changeRef.destroyed||(this.changeRef.detectChanges(),this.changeRef.markForCheck()),this.dpBtn.nativeElement.blur(),this.dpBtn&&this.overLayService&&this.overLayService.destory(this.dpBtn.nativeElement)},l.prototype.setPosition=function(t){var e=this.dpBtn.nativeElement.getBoundingClientRect(),n=this.dpMenu.nativeElement.getBoundingClientRect();this._menuHeight=n.height,this._menuWidth=n.width,this.autoRectify&&this.changePlacement(e),this.changePosition(e)},l.prototype.ngOnDestroy=function(){this.dpBtn&&this.dpBtn.nativeElement&&this.overLayService.destory(this.dpBtn.nativeElement),this.overLayService=null},l.decorators=[{type:i.Component,args:[{selector:"farris-button-group",template:'<div class="f-btn-group" [ngClass]="adaptToOuterWidth?\'has-max-width\':\'\'">\r\n    <div [class]="(size===\'large\'?\'btn-group-lg\':\'btn-group-sm\')+\' btn-group f-btn-group-links\'">\r\n        <ng-container *ngFor="let btn of flatButtons">\r\n            <ng-container *ngIf="btn.icon">\r\n                <button [id]="btn.id" class="btn btn-link btn-icontext" [disabled]="btn.disabled" (click)="toggle($event,btn)">\r\n                    <i class="f-icon"  [ngClass]="btn.icon"></i>\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf="!btn.icon">\r\n            <button [id]="btn.id"\r\n                [class]="\'btn \'+(btn.type?\'btn-\'+btn.type:\'btn-link\')+\' \'+ (btn.type && btn.type !== \'link\' ? \'f-btn-ml\' :\'\')"\r\n                [disabled]="btn.disabled" (click)="toggle($event,btn)" [title]="adaptToOuterWidth?btn.text:\'\'">\r\n                {{btn.text}}\r\n            </button> \r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n    <ng-container *ngIf="dpButtons.length">\r\n        <div class="btn-group f-btn-group-dropdown">\r\n            <button #dpBtn type="button" class="f-btn-dropdown" (click)="clickEvent($event)">\r\n                <span class="f-icon f-icon-lookup"></span>\r\n            </button>\r\n            <div #dpMenu class="dropdown-menu ff-btn-group-dropdown-menu" [class.show]="show"  style="position:fixed;" id="{{btnmenuid}}">\r\n                <ng-container *ngFor="let dpBtn of dpButtons">\r\n                    <div class="dropdown-divider" *ngIf="dpBtn.divider"></div>\r\n                    <li [id]="dpBtn.id" class="dropdown-item" [class.disabled]="dpBtn.disabled"\r\n                        (click)="toggle($event,dpBtn)">\r\n                        <ng-container *ngIf="dpBtn.icon">\r\n                            <i class="f-icon dropdown-item-icon" [ngClass]="dpBtn.icon"></i>\r\n                        </ng-container>\r\n                        <span>{{dpBtn.text}}</span>\r\n                    </li>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>',changeDetection:i.ChangeDetectionStrategy.OnPush,styles:[".f-btn-group.has-max-width{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.f-btn-group.has-max-width .f-btn-group-links{overflow:hidden}.f-btn-group.has-max-width .f-btn-group-links .btn{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}]}],l.ctorParameters=function(){return[{type:i.ChangeDetectorRef},{type:i.NgZone}]},l.propDecorators={dpBtn:[{type:i.ViewChild,args:["dpBtn"]}],dpMenu:[{type:i.ViewChild,args:["dpMenu"]}],rectifyReferenceH:[{type:i.Input}],rectifyReferenceV:[{type:i.Input}],autoRectify:[{type:i.Input}],adaptToOuterWidth:[{type:i.Input}],data:[{type:i.Input}],count:[{type:i.Input}],size:[{type:i.Input}],type:[{type:i.Input}],placement:[{type:i.Input}],width:[{type:i.Input}],height:[{type:i.Input}],changeState:[{type:i.Output}],change:[{type:i.Output}],click:[{type:i.Output}],clickMenuOut:[{type:i.Output}],autoSize:[{type:i.Input}]},l);function l(t,e){this.changeRef=t,this.ngZone=e,this.autoRectify=!0,this.adaptToOuterWidth=!1,this.realPlacement="bottom-right",this.rectifyPlacement="bottom-right",this.count=2,this.size="small",this.type="primary",this._placement="bottom",this.width=120,this.height=250,this._menuWidth=0,this._menuHeight=0,this.changeState=new i.EventEmitter,this.change=new i.EventEmitter,this.click=new i.EventEmitter,this.clickMenuOut=new i.EventEmitter,this.autoSize=!1,this.show=!1,this.setPosition$=new n.Subject,this.btnmenuid="btn-menu-",this.previous=0,this.commonUtils=new o.CommonUtils}var h=(d.decorators=[{type:i.NgModule,args:[{declarations:[a,p],imports:[e.CommonModule,o.FarrisCommonModule],exports:[a,p]}]}],d);function d(){}t.FarrisButtonService=r,t.FarrisButtonComponent=a,t.FarrisButtonModule=h,t.FarrisButtonGroupComponent=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-button.umd.min.js.map