/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { NgZone, ChangeDetectionStrategy, } from "@angular/core";
import { ChangeDetectorRef, } from "@angular/core";
import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, } from "@angular/core";
import { Subject } from "rxjs";
import { CommonUtils, IdService, OverLayHiddenService } from "@farris/ui-common";
/**
 * @return {?}
 */
function hideBtnMenu() {
    /** @type {?} */
    var ddm = document.querySelector(".ff-btn-group-dropdown-menu.show");
    if (ddm) {
        ddm.className = ddm.className.replace("show", "");
    }
}
/**
 * @param {?} e
 * @return {?}
 */
function hideButtonMenu(e) {
    if (!e.target) {
        return;
    }
    /** @type {?} */
    var classList = Array.from(e.target.classList || []);
    if (e.target.nodeName !== "LI" && !e.target.closest('li.dropdown-item') && !classList.includes("dropdown-item")) {
        hideBtnMenu();
    }
}
var FarrisButtonGroupComponent = /** @class */ (function () {
    function FarrisButtonGroupComponent(changeRef, ngZone) {
        this.changeRef = changeRef;
        this.ngZone = ngZone;
        // 是否自动纠正位置
        this.autoRectify = true;
        /*
            * 按钮适应外层宽度
            * 默认是：false 不限定按钮宽度，true 按钮适应外层宽度，显示不全，按钮文字出现省略号和提示
            */
        this.adaptToOuterWidth = false;
        // 计算方向的真正placement
        this.realPlacement = "bottom-right";
        // 重新计算后的placement
        this.rectifyPlacement = "bottom-right";
        /* 显示的按钮数量  默认为2 */
        this.count = 2;
        /* 按钮大小 */
        this.size = "small";
        /* 按钮样式 */
        this.type = "primary";
        /* 按钮展示位置 */
        this._placement = "bottom";
        /* menu size */
        /**
         * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
         */
        this.width = 120;
        this.height = 250;
        this._menuWidth = 0;
        this._menuHeight = 0;
        /* 下拉按钮 触发事件 */
        this.changeState = new EventEmitter();
        /* 下拉菜单项点击事件 */
        this.change = new EventEmitter();
        this.click = new EventEmitter();
        /* 触发下拉按钮面板区域之外的事件 */
        this.clickMenuOut = new EventEmitter();
        /**
         * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
         */
        this.autoSize = false;
        /* 下拉面板显示 */
        this.show = false;
        this.setPosition$ = new Subject();
        this.btnmenuid = 'btn-menu-';
        this.previous = 0;
        this.commonUtils = new CommonUtils();
    }
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "placement", {
        get: /**
         * @return {?}
         */
        function () {
            return this._placement;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (!value) {
                return;
            }
            if (value !== this._placement) {
                this.realPlacement = this.getRealPlacement(value);
                this._placement = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "flatButtons", {
        /* 显示出来的按钮组 */
        get: /* 显示出来的按钮组 */
        /**
         * @return {?}
         */
        function () {
            return this.data && this.data.slice(0, this.count);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisButtonGroupComponent.prototype, "dpButtons", {
        get: /**
         * @return {?}
         */
        function () {
            // this.height = this.dpButtons.length * 35;
            return this.data && this.data.slice(this.count);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.btnmenuId = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var idSer = new IdService();
        this.btnmenuid += idSer.guid();
        this.overLayService = new OverLayHiddenService();
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.btnmenuId();
    };
    /**
     * @param {?} simpleChanges
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnChanges = /**
     * @param {?} simpleChanges
     * @return {?}
     */
    function (simpleChanges) {
        if (simpleChanges["data"]) {
            // this.flatButtons = this.data.slice(0, this.count);
            // this.dpButtons = this.data.slice(this.count);
            // this.height = this.dpButtons.length * 35;
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        if (this.show) {
            // const { height, width } = this.dpMenu.nativeElement.getBoundingClientRect();
            this.setPosition(this.event);
            // this.setPosition$.subscribe(res => this.setPosition(res, width, height));
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.clickEvent = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        e.stopPropagation();
        this.show = !(this.show && this.dpMenu.nativeElement.className.indexOf('show') > -1);
        // body添加面板
        if (this.show) {
            /** 移除现有的下拉展示菜单 */
            hideBtnMenu();
            this.appendBody();
            // this.setPosition(e);
            // this.setPosition$.next(e);
            // 注册鼠标滚轮，点击事件，用于隐藏Panel
            this.overLayService.registerMouseEvent(this.dpBtn.nativeElement, (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                hideButtonMenu(e);
            }));
            this.event = e;
            // 绑定相应的事件
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.bindMenuMouseenter();
                _this.bindiMenuMouseleave();
                // this.bindDocClick();
                _this.mouseNotEnterLeave();
            }));
        }
        // 面板显示 脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        // this.changeState.emit({ originEvent: e, show: this.show });
        this.changeState.emit(this.show);
    };
    /* 按钮触发事件 */
    /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.toggle = /* 按钮触发事件 */
    /**
     * @param {?} e
     * @param {?} btn
     * @return {?}
     */
    function (e, btn) {
        e.stopPropagation();
        if (btn.disabled)
            return;
        this.show = false;
        // this.unbindDocClick();
        // 关闭下拉按钮面板  脏值检测
        this.changeRef.detectChanges();
        this.changeRef.markForCheck();
        this.change.emit(btn.id);
        this.click.emit(btn);
        if (this.dpBtn) {
            this.overLayService.destory(this.dpBtn.nativeElement);
        }
    };
    // 下拉按钮显示到body中  可改变面板方向
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.appendBody = 
    // 下拉按钮显示到body中  可改变面板方向
    /**
     * @return {?}
     */
    function () {
        if (this.dpMenu.nativeElement && !document.querySelector('body>#' + this.btnmenuid)) {
            // 添加到body  便于全部显示
            document.body.appendChild(this.dpMenu.nativeElement);
        }
        this.dpMenu.nativeElement.className = this.dpMenu.nativeElement.className + ' show';
        this.dpMenu.nativeElement.style.zIndex = this.commonUtils.getFloatingLayerIndex();
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.removeMenuPanel = /**
     * @return {?}
     */
    function () {
        if (this.dpMenu.nativeElement && document.querySelector('body>#' + this.btnmenuid)) {
            this.dpMenu.nativeElement.remove();
        }
    };
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param btnSize
     */
    /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePlacement = /**
     * 当下拉超出边界时  转换方向,
     * 并未处理，边界不够下拉展示的情况
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        if (!this.autoRectify) {
            return;
        }
        /** @type {?} */
        var referPosition = this.getReferencePosition();
        /** @type {?} */
        var newPlacement = this.realPlacement;
        if (newPlacement.indexOf("bottom") > -1) {
            if (this._menuHeight > referPosition.bottom - btnSize.bottom) {
                newPlacement = newPlacement.replace("bottom", "top");
            }
        }
        else if (newPlacement.indexOf("top") > -1) {
            if (this._menuHeight > btnSize.top - referPosition.top) {
                newPlacement = newPlacement.replace("top", "bottom");
            }
        }
        if (newPlacement.indexOf("left") > -1) {
            if (this._menuWidth > btnSize.left - referPosition.left) {
                newPlacement = newPlacement.replace("left", "right");
            }
        }
        else if (newPlacement.indexOf("right") > -1) {
            if (this._menuWidth > referPosition.right - btnSize.right) {
                newPlacement = newPlacement.replace("right", "left");
            }
        }
        this.rectifyPlacement = newPlacement;
    };
    /**
     * 确认参照的边界
     */
    /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getReferencePosition = /**
     * 确认参照的边界
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rRight = document.documentElement.clientWidth;
        /** @type {?} */
        var rBottom = document.documentElement.clientHeight;
        /** @type {?} */
        var rTop = 0;
        /** @type {?} */
        var rLeft = 0;
        // 横向参照
        if (this.rectifyReferenceH) {
            rRight = this.rectifyReferenceH.getBoundingClientRect().right;
            rLeft = this.rectifyReferenceH.getBoundingClientRect().left;
        }
        // 纵向参照
        if (this.rectifyReferenceV) {
            rBottom = this.rectifyReferenceV.getBoundingClientRect().bottom;
            rTop = this.rectifyReferenceV.getBoundingClientRect().top;
        }
        return { top: rTop, left: rLeft, right: rRight, bottom: rBottom };
    };
    /**
     * 变化对应的class
     * @param position
     */
    /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype._getClsName = /**
     * 变化对应的class
     * @param {?} position
     * @return {?}
     */
    function (position) {
        /** @type {?} */
        var className = "";
        switch (position) {
            case "top-right":
            case "top":
                // 朝上，朝上-朝右
                className = "dropup";
                break;
            case "top-left":
                // 朝上-朝左
                className = "dropup-left";
                break;
            case "left-bottom":
            case "left":
                // 横向——朝左——朝下
                className = "dropleft";
                break;
            case "left-top":
                // 横向——朝左——朝上
                className = "dropleft-up";
                break;
            case "right-bottom":
            case "right":
                // 横向——朝右——朝下
                className = "dropright";
                break;
            case "right-top":
                // 横向——朝右——朝上
                className = "dropright-up";
                break;
            case "bottom-left":
                // 朝下——朝左
                className = "dropdown-left";
                break;
            case "bottom-right":
                className = "dropdown";
                break;
            default:
                // 朝下，朝下——朝右
                className = "dropdown";
        }
        return className;
    };
    /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.getRealPlacement = /**
     * @private
     * @param {?} pment
     * @return {?}
     */
    function (pment) {
        /** @type {?} */
        var result = "bottom-right";
        switch (pment) {
            case "top":
                result = "top-right";
                break;
            case "left":
                result = "left-bottom";
                break;
            case "right":
                result = "right-bottom";
                break;
            case "bottom":
                result = "bottom-right";
                break;
            default:
                result = pment;
        }
        return result;
    };
    /*
     * 计算的位置区分忒细化
     */
    /*
         * 计算的位置区分忒细化
         */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changePosition = /*
         * 计算的位置区分忒细化
         */
    /**
     * @private
     * @param {?} btnSize
     * @return {?}
     */
    function (btnSize) {
        /** @type {?} */
        var rplacement = "";
        if (this.autoRectify) {
            rplacement = this.rectifyPlacement;
        }
        else {
            rplacement = this.realPlacement;
        }
        /** @type {?} */
        var styleTop = 0;
        /** @type {?} */
        var styleLeft = 0;
        if (rplacement.indexOf("top") > -1) {
            styleTop = btnSize.top - this._menuHeight;
        }
        else if (rplacement.indexOf("bottom") > -1) {
            styleTop = btnSize.bottom;
        }
        if (rplacement.indexOf("right") > -1) {
            styleLeft = btnSize.right;
        }
        else if (rplacement.indexOf("left") > -1) {
            styleLeft = btnSize.left - this._menuWidth;
        }
        // 开头
        if (rplacement.indexOf("-top") > -1) {
            styleTop = styleTop - btnSize.height;
        }
        else if (rplacement.indexOf("-bottom") > -1) {
            styleTop = styleTop + btnSize.height;
        }
        this.dpMenu.nativeElement.style.top = styleTop + "px";
        this.dpMenu.nativeElement.style.left = styleLeft + "px";
    };
    /* 绑定下拉面板鼠标进入事件 */
    /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindMenuMouseenter = /* 绑定下拉面板鼠标进入事件 */
    /**
     * @return {?}
     */
    function () {
        this.unbindMenuMouseenter();
        this.mouseenterEvent = this.changeFlagToTrue.bind(this);
        this.dpMenu.nativeElement.addEventListener("mouseenter", this.mouseenterEvent);
    };
    /* 绑定下拉面板鼠标离开事件  */
    /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.bindiMenuMouseleave = /* 绑定下拉面板鼠标离开事件  */
    /**
     * @return {?}
     */
    function () {
        this.unbindiMenuMouseleave();
        this.mouseleaveEvent = this.mouseLeave.bind(this);
        this.dpMenu.nativeElement.addEventListener("mouseleave", this.mouseleaveEvent);
    };
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindMenuMouseenter = /* 绑定点击面板区域之外触发的事件 */
    // bindDocClick() {
    //   this.documentClickEvent = this.clickDoc.bind(this);
    //   document.addEventListener('click', this.documentClickEvent);
    // }
    /* 解绑事件 */
    /**
     * @return {?}
     */
    function () {
        if (this.mouseenterEvent) {
            this.dpMenu.nativeElement.removeEventListener("mouseenter", this.mouseenterEvent);
        }
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.unbindiMenuMouseleave = /**
     * @return {?}
     */
    function () {
        if (this.mouseleaveEvent) {
            this.dpMenu.nativeElement.removeEventListener("mouseleave", this.mouseleaveEvent);
        }
    };
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToTrue = 
    // unbindDocClick() {
    //   if (this.documentClickEvent) {
    //     document.removeEventListener('click', this.documentClickEvent);
    //   }
    // }
    /* flag true */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = true;
    };
    /* flag false */
    /* flag false */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.changeFlagToFalse = /* flag false */
    /**
     * @return {?}
     */
    function () {
        this.dpFlag = false;
    };
    /* 鼠标离开时  关闭menu */
    /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseLeave = /* 鼠标离开时  关闭menu */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.dpFlag) {
            this.changeFlagToFalse();
            // this.unbindDocClick();
            this.unbindiMenuMouseleave();
            this.unbindMenuMouseenter();
            this.close();
            if (this.setTimeObj) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    clearTimeout(_this.setTimeObj);
                }));
            }
        }
    };
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.mouseNotEnterLeave = /* 鼠标没有进入到面板  一段时间后面板自动消失 */
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            if (_this.setTimeObj) {
                clearTimeout(_this.setTimeObj);
            }
            _this.setTimeObj = setTimeout((/**
             * @return {?}
             */
            function () {
                if (!_this.dpFlag) {
                    _this.changeFlagToFalse();
                    // this.unbindDocClick();
                    _this.unbindiMenuMouseleave();
                    _this.unbindMenuMouseenter();
                    _this.close();
                    if (_this.setTimeObj) {
                        clearTimeout(_this.setTimeObj);
                    }
                }
            }), 2000);
        }));
    };
    /* 关闭下拉面板 */
    /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.close = /* 关闭下拉面板 */
    /**
     * @return {?}
     */
    function () {
        this.show = false;
        // 关闭下拉按钮面板  脏值检测
        if (!this.changeRef["destroyed"]) {
            this.changeRef.detectChanges();
            this.changeRef.markForCheck();
        }
        this.dpBtn.nativeElement.blur();
        if (this.dpBtn && this.overLayService) {
            this.overLayService.destory(this.dpBtn.nativeElement);
        }
    };
    /* 动态指定menu在body中的位置 */
    /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.setPosition = /* 动态指定menu在body中的位置 */
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // 下拉按钮
        /** @type {?} */
        var btnSize = this.dpBtn.nativeElement.getBoundingClientRect();
        // 下拉面板
        /** @type {?} */
        var menuRect = this.dpMenu.nativeElement.getBoundingClientRect();
        this._menuHeight = menuRect.height;
        this._menuWidth = menuRect.width;
        // 如果要自动纠正方向
        if (this.autoRectify) {
            this.changePlacement(btnSize);
        }
        this.changePosition(btnSize);
    };
    /**
     * @return {?}
     */
    FarrisButtonGroupComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // this.removeMenuPanel();
        if (this.dpBtn && this.dpBtn.nativeElement) {
            this.overLayService.destory(this.dpBtn.nativeElement);
        }
        this.overLayService = null;
    };
    FarrisButtonGroupComponent.decorators = [
        { type: Component, args: [{
                    selector: "farris-button-group",
                    template: "<div class=\"f-btn-group\" [ngClass]=\"adaptToOuterWidth?'has-max-width':''\">\r\n    <div [class]=\"(size==='large'?'btn-group-lg':'btn-group-sm')+' btn-group f-btn-group-links'\">\r\n        <ng-container *ngFor=\"let btn of flatButtons\">\r\n            <ng-container *ngIf=\"btn.icon\">\r\n                <button [id]=\"btn.id\" class=\"btn btn-link btn-icontext\" [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\">\r\n                    <i class=\"f-icon\"  [ngClass]=\"btn.icon\"></i>\r\n                </button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!btn.icon\">\r\n            <button [id]=\"btn.id\"\r\n                [class]=\"'btn '+(btn.type?'btn-'+btn.type:'btn-link')+' '+ (btn.type && btn.type !== 'link' ? 'f-btn-ml' :'')\"\r\n                [disabled]=\"btn.disabled\" (click)=\"toggle($event,btn)\" [title]=\"adaptToOuterWidth?btn.text:''\">\r\n                {{btn.text}}\r\n            </button> \r\n            </ng-container>\r\n        </ng-container>\r\n    </div>\r\n    <ng-container *ngIf=\"dpButtons.length\">\r\n        <div class=\"btn-group f-btn-group-dropdown\">\r\n            <button #dpBtn type=\"button\" class=\"f-btn-dropdown\" (click)=\"clickEvent($event)\">\r\n                <span class=\"f-icon f-icon-lookup\"></span>\r\n            </button>\r\n            <div #dpMenu class=\"dropdown-menu ff-btn-group-dropdown-menu\" [class.show]=\"show\"  style=\"position:fixed;\" id=\"{{btnmenuid}}\">\r\n                <ng-container *ngFor=\"let dpBtn of dpButtons\">\r\n                    <div class=\"dropdown-divider\" *ngIf=\"dpBtn.divider\"></div>\r\n                    <li [id]=\"dpBtn.id\" class=\"dropdown-item\" [class.disabled]=\"dpBtn.disabled\"\r\n                        (click)=\"toggle($event,dpBtn)\">\r\n                        <ng-container *ngIf=\"dpBtn.icon\">\r\n                            <i class=\"f-icon dropdown-item-icon\" [ngClass]=\"dpBtn.icon\"></i>\r\n                        </ng-container>\r\n                        <span>{{dpBtn.text}}</span>\r\n                    </li>\r\n                </ng-container>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [".f-btn-group.has-max-width{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.f-btn-group.has-max-width .f-btn-group-links{overflow:hidden}.f-btn-group.has-max-width .f-btn-group-links .btn{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]
                }] }
    ];
    /** @nocollapse */
    FarrisButtonGroupComponent.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisButtonGroupComponent.propDecorators = {
        dpBtn: [{ type: ViewChild, args: ["dpBtn",] }],
        dpMenu: [{ type: ViewChild, args: ["dpMenu",] }],
        rectifyReferenceH: [{ type: Input }],
        rectifyReferenceV: [{ type: Input }],
        autoRectify: [{ type: Input }],
        adaptToOuterWidth: [{ type: Input }],
        data: [{ type: Input }],
        count: [{ type: Input }],
        size: [{ type: Input }],
        type: [{ type: Input }],
        placement: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        changeState: [{ type: Output }],
        change: [{ type: Output }],
        click: [{ type: Output }],
        clickMenuOut: [{ type: Output }],
        autoSize: [{ type: Input }]
    };
    return FarrisButtonGroupComponent;
}());
export { FarrisButtonGroupComponent };
if (false) {
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpBtn;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpMenu;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceH;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyReferenceV;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.autoRectify;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.adaptToOuterWidth;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.realPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.rectifyPlacement;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.data;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.count;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.size;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.type;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._placement;
    /**
     * 2021.06.12 废弃，因为使用者不知道在中英文情况下，下拉面板的宽度和高度
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.width;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.height;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuWidth;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype._menuHeight;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.changeState;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.change;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.click;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.clickMenuOut;
    /**
     * 2021.06.12 废弃，因为当autoSize为true的时候，按钮显示不出来。
     * @type {?}
     */
    FarrisButtonGroupComponent.prototype.autoSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.show;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setPosition$;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.event;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.dpFlag;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseenterEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.mouseleaveEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.documentClickEvent;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnSize;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.setTimeObj;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.btnmenuid;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.previous;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.overLayService;
    /** @type {?} */
    FarrisButtonGroupComponent.prototype.commonUtils;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.changeRef;
    /**
     * @type {?}
     * @private
     */
    FarrisButtonGroupComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLWdyb3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktYnV0dG9uLyIsInNvdXJjZXMiOlsibGliL2J1dHRvbi1ncm91cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFFSCxNQUFNLEVBQ04sdUJBQXVCLEdBSTFCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFHSCxpQkFBaUIsR0FDcEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNILFNBQVMsRUFFVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixTQUFTLEVBQ1QsVUFBVSxHQUNiLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQzs7OztBQUVqRixTQUFTLFdBQVc7O1FBQ1YsR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsa0NBQWtDLENBQUM7SUFDdEUsSUFBSSxHQUFHLEVBQUU7UUFDTCxHQUFHLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztLQUNyRDtBQUNMLENBQUM7Ozs7O0FBRUQsU0FBUyxjQUFjLENBQUMsQ0FBQztJQUNyQixJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRTtRQUNYLE9BQU87S0FDVjs7UUFFRyxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7SUFFcEQsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMs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Qiw4Q0FBcUI7O0lBQ2xCLG9EQUFxQzs7SUFDckMsaURBQXlCOzs7OztJQUNiLCtDQUFvQzs7Ozs7SUFBRSw0Q0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgT25EZXN0cm95LFxyXG4gICAgTmdab25lLFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBSZW5kZXJlcjIsXHJcbiAgICBPbkNoYW5nZXMsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBBZnRlclZpZXdJbml0LFxyXG4gICAgQWZ0ZXJWaWV3Q2hlY2tlZCxcclxuICAgIENoYW5nZURldGVjdG9yUmVmLFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBPbkluaXQsXHJcbiAgICBJbnB1dCxcclxuICAgIE91dHB1dCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIFZpZXdDaGlsZCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYnV0dG9uXCI7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgSWRTZXJ2aWNlLCBPdmVyTGF5SGlkZGVuU2VydmljZSB9IGZyb20gXCJAZmFycmlzL3VpLWNvbW1vblwiO1xyXG5cclxuZnVuY3Rpb24gaGlkZUJ0bk1lbnUoKSB7XHJcbiAgICBjb25zdCBkZG0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZmLWJ0bi1ncm91cC1kcm9wZG93bi1tZW51LnNob3dcIik7XHJcbiAgICBpZiAoZGRtKSB7XHJcbiAgICAgICAgZGRtLmNsYXNzTmFtZSA9IGRkbS5jbGFzc05hbWUucmVwbGFjZShcInNob3dcIiwgXCJcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVCdXR0b25NZW51KGUpIHtcclxuICAgIGlmICghZS50YXJnZXQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNsYXNzTGlzdCA9IEFycmF5LmZyb20oZS50YXJnZXQuY2xhc3NMaXN0IHx8IFtdKTtcclxuXHJcbiAgICBpZiAoZS50YXJnZXQubm9kZU5hbWUgIT09IFwiTElcIiAmJiAhZS50YXJnZXQuY2xvc2VzdCgnbGkuZHJvcGRvd24taXRlbScpICYmICFjbGFzc0xpc3QuaW5jbHVkZXMoXCJkcm9wZG93bi1pdGVtXCIpKSB7XHJcbiAgICAgICAgaGlkZUJ0bk1lbnUoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiZmFycmlzLWJ1dHRvbi1ncm91cFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IGAuL2J1dHRvbi1ncm91cC5jb21wb25lbnQuaHRtbGAsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIHN0eWxlVXJsczpbXCIuL2J1dHRvbi1ncm91cC5jb21wb25lbnQuc2Nzc1wiXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzQnV0dG9uR3JvdXBDb21wb25lbnRcclxuICAgIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveVxyXG57XHJcbiAgICBAVmlld0NoaWxkKFwiZHBCdG5cIikgZHBCdG46IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwiZHBNZW51XCIpIGRwTWVudTogRWxlbWVudFJlZjtcclxuICAgIC8vIOaoquWQkee6oOato+eahOWPgueFp1xyXG4gICAgQElucHV0KCkgcmVjdGlmeVJlZmVyZW5jZUg6IEhUTUxFbGVtZW50O1xyXG4gICAgLy8g57q15ZCR57qg5q2j55qE5Y+C54WnXHJcbiAgICBASW5wdXQoKSByZWN0aWZ5UmVmZXJlbmNlVjogSFRNTEVsZW1lbnQ7XHJcbiAgICAvLyDmmK/lkKboh6rliqjnuqDmraPkvY3nva5cclxuICAgIEBJbnB1dCgpIGF1dG9SZWN0aWZ5ID0gdHJ1ZTtcclxuICAgIC8qXHJcbiAgICAqIOaMiemSrumAguW6lOWkluWxguWuveW6plxyXG4gICAgKiDpu5jorqTmmK/vvJpmYWxzZSDkuI3pmZDlrprmjInpkq7lrr3luqbvvIx0cnVlIOaMiemSrumAguW6lOWkluWxguWuveW6pu+8jOaYvuekuuS4jeWFqO+8jOaMiemSruaWh+Wtl+WHuueOsOecgeeVpeWPt+WSjOaPkOekulxyXG4gICAgKi9cclxuICAgIEBJbnB1dCgpIGFkYXB0VG9PdXRlcldpZHRoPWZhbHNlO1xyXG4gICAgLy8g6K6h566X5pa55ZCR55qE55yf5q2jcGxhY2VtZW50XHJcbiAgICBwcml2YXRlIHJlYWxQbGFjZW1lbnQgPSBcImJvdHRvbS1yaWdodFwiO1xyXG4gICAgLy8g6YeN5paw6K6h566X5ZCO55qEcGxhY2VtZW50XHJcbiAgICByZWN0aWZ5UGxhY2VtZW50ID0gXCJib3R0b20tcmlnaHRcIjtcclxuXHJcbiAgICAvKiDmjInpkq7kv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIGRhdGE6IEJ1dHRvbltdO1xyXG5cclxuICAgIC8qIOaYvuekuueahOaMiemSruaVsOmHjyAg6buY6K6k5Li6MiAqL1xyXG4gICAgQElucHV0KCkgY291bnQgPSAyO1xyXG5cclxuICAgIC8qIOaMiemSruWkp+WwjyAqL1xyXG4gICAgQElucHV0KCkgc2l6ZSA9IFwic21hbGxcIjtcclxuXHJcbiAgICAvKiDmjInpkq7moLflvI8gKi9cclxuICAgIEBJbnB1dCgpIHR5cGUgPSBcInByaW1hcnlcIjtcclxuXHJcbiAgICAvKiDmjInpkq7lsZXnpLrkvY3nva4gKi9cclxuICAgIHByaXZhdGUgX3BsYWNlbWVudCA9IFwiYm90dG9tXCI7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHBsYWNlbWVudCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX3BsYWNlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWxQbGFjZW1lbnQgPSB0aGlzLmdldFJlYWxQbGFjZW1lbnQodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZW1lbnQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgcGxhY2VtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGFjZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyogbWVudSBzaXplICovXHJcbiAgICAvKipcclxuICAgICAqMjAyMS4wNi4xMiDlup/lvIPvvIzlm6DkuLrkvb/nlKjogIXkuI3nn6XpgZPlnKjkuK3oi7Hmlofmg4XlhrXkuIvvvIzkuIvmi4npnaLmnb/nmoTlrr3luqblkozpq5jluqZcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgd2lkdGggPSAxMjA7XHJcbiAgICBASW5wdXQoKSBoZWlnaHQgPSAyNTA7XHJcbiAgICBwcml2YXRlIF9tZW51V2lkdGggPSAwO1xyXG4gICAgcHJpdmF0ZSBfbWVudUhlaWdodCA9IDA7XHJcblxyXG4gICAgLyog5LiL5ouJ5oyJ6ZKuIOinpuWPkeS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGNoYW5nZVN0YXRlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgLyog5LiL5ouJ6I+c5Y2V6aG554K55Ye75LqL5Lu2ICovXHJcbiAgICBAT3V0cHV0KCkgY2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICAvKiDop6blj5HkuIvmi4nmjInpkq7pnaLmnb/ljLrln5/kuYvlpJbnmoTkuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBjbGlja01lbnVPdXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIDIwMjEuMDYuMTIg5bqf5byD77yM5Zug5Li65b2TYXV0b1NpemXkuLp0cnVl55qE5pe25YCZ77yM5oyJ6ZKu5pi+56S65LiN5Ye65p2l44CCXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGF1dG9TaXplID0gZmFsc2U7XHJcblxyXG4gICAgLyog5LiL5ouJ6Z2i5p2/5pi+56S6ICovXHJcbiAgICBzaG93ID0gZmFsc2U7XHJcbiAgICAvKiDmmL7npLrlh7rmnaXnmoTmjInpkq7nu4QgKi9cclxuICAgIGdldCBmbGF0QnV0dG9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhICYmIHRoaXMuZGF0YS5zbGljZSgwLCB0aGlzLmNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZHBCdXR0b25zKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaGVpZ2h0ID0gdGhpcy5kcEJ1dHRvbnMubGVuZ3RoICogMzU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLnNsaWNlKHRoaXMuY291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBvc2l0aW9uJCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBldmVudDogYW55O1xyXG5cclxuICAgIC8qIOS4i+aLiemdouadv+aYvuekuuagh+W/lyAqL1xyXG4gICAgZHBGbGFnOiBib29sZWFuO1xyXG5cclxuICAgIC8qIOS6i+S7tiAqL1xyXG4gICAgbW91c2VlbnRlckV2ZW50OiBhbnk7XHJcbiAgICBtb3VzZWxlYXZlRXZlbnQ6IGFueTtcclxuICAgIGRvY3VtZW50Q2xpY2tFdmVudDogYW55O1xyXG5cclxuICAgIC8qIOS4ieS4queCueaMiemSruWwuuWvuCAqL1xyXG4gICAgYnRuU2l6ZTogYW55O1xyXG5cclxuICAgIC8qICAqL1xyXG4gICAgc2V0VGltZU9iajogYW55O1xyXG5cclxuXHRidG5tZW51aWQgPSAnYnRuLW1lbnUtJztcclxuXHRwcml2YXRlIHByZXZpb3VzID0gMDtcclxuICAgIG92ZXJMYXlTZXJ2aWNlOiBPdmVyTGF5SGlkZGVuU2VydmljZTtcclxuICAgIGNvbW1vblV0aWxzOiBDb21tb25VdGlscztcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhbmdlUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xyXG4gICAgICAgIHRoaXMuY29tbW9uVXRpbHMgPSBuZXcgQ29tbW9uVXRpbHMoKTtcclxuICAgIH1cclxuXHJcblx0cHJpdmF0ZSBidG5tZW51SWQoKSB7XHJcblx0XHRjb25zdCBpZFNlciA9IG5ldyBJZFNlcnZpY2UoKTtcclxuXHRcdHRoaXMuYnRubWVudWlkICs9IGlkU2VyLmd1aWQoKTtcclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcblx0fVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuYnRubWVudUlkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoc2ltcGxlQ2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChzaW1wbGVDaGFuZ2VzW1wiZGF0YVwiXSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLmZsYXRCdXR0b25zID0gdGhpcy5kYXRhLnNsaWNlKDAsIHRoaXMuY291bnQpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmRwQnV0dG9ucyA9IHRoaXMuZGF0YS5zbGljZSh0aGlzLmNvdW50KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5oZWlnaHQgPSB0aGlzLmRwQnV0dG9ucy5sZW5ndGggKiAzNTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge31cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICAgICAgICAvLyBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5ldmVudCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2V0UG9zaXRpb24kLnN1YnNjcmliZShyZXMgPT4gdGhpcy5zZXRQb3NpdGlvbihyZXMsIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xpY2tFdmVudChlOiBhbnkpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2hvdyA9ICEodGhpcy5zaG93ICYmIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3Nob3cnKSA+IC0xKTtcclxuICAgICAgICAvLyBib2R55re75Yqg6Z2i5p2/XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdykge1xyXG5cdFx0XHQvKiog56e76Zmk546w5pyJ55qE5LiL5ouJ5bGV56S66I+c5Y2VICovXHJcblx0XHRcdGhpZGVCdG5NZW51KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kQm9keSgpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNldFBvc2l0aW9uKGUpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNldFBvc2l0aW9uJC5uZXh0KGUpO1xyXG5cclxuICAgICAgICAgICAgLy8g5rOo5YaM6byg5qCH5rua6L2u77yM54K55Ye75LqL5Lu277yM55So5LqO6ZqQ6JePUGFuZWxcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5yZWdpc3Rlck1vdXNlRXZlbnQodGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50LCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaGlkZUJ1dHRvbk1lbnUoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50ID0gZTtcclxuICAgICAgICAgICAgLy8g57uR5a6a55u45bqU55qE5LqL5Lu2XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpTWVudU1vdXNlbGVhdmUoKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYmluZERvY0NsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlTm90RW50ZXJMZWF2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6Z2i5p2/5pi+56S6IOiEj+WAvOajgOa1i1xyXG4gICAgICAgIHRoaXMuY2hhbmdlUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZVJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICAvLyB0aGlzLmNoYW5nZVN0YXRlLmVtaXQoeyBvcmlnaW5FdmVudDogZSwgc2hvdzogdGhpcy5zaG93IH0pO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUuZW1pdCh0aGlzLnNob3cpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOaMiemSruinpuWPkeS6i+S7tiAqL1xyXG4gICAgdG9nZ2xlKGU6IGFueSwgYnRuKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAoYnRuLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgIC8vIOWFs+mXreS4i+aLieaMiemSrumdouadvyAg6ISP5YC85qOA5rWLXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlLmVtaXQoYnRuLmlkKTtcclxuICAgICAgICB0aGlzLmNsaWNrLmVtaXQoYnRuKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZHBCdG4pIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOS4i+aLieaMiemSruaYvuekuuWIsGJvZHnkuK0gIOWPr+aUueWPmOmdouadv+aWueWQkVxyXG4gICAgYXBwZW5kQm9keSgpIHtcclxuICAgICAgICBpZiAodGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudCAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keT4jJyArIHRoaXMuYnRubWVudWlkKSkge1xyXG4gICAgICAgICAgICAvLyDmt7vliqDliLBib2R5ICDkvr/kuo7lhajpg6jmmL7npLpcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcblx0XHR0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lICsgJyBzaG93JztcclxuICAgICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnN0eWxlLnpJbmRleCA9IHRoaXMuY29tbW9uVXRpbHMuZ2V0RmxvYXRpbmdMYXllckluZGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTWVudVBhbmVsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50ICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHk+IycgKyB0aGlzLmJ0bm1lbnVpZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlvZPkuIvmi4notoXlh7rovrnnlYzml7YgIOi9rOaNouaWueWQkSxcclxuICAgICAqIOW5tuacquWkhOeQhu+8jOi+ueeVjOS4jeWkn+S4i+aLieWxleekuueahOaDheWGtVxyXG4gICAgICogQHBhcmFtIGJ0blNpemVcclxuICAgICAqL1xyXG4gICAgY2hhbmdlUGxhY2VtZW50KGJ0blNpemU6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRvUmVjdGlmeSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZWZlclBvc2l0aW9uID0gdGhpcy5nZXRSZWZlcmVuY2VQb3NpdGlvbigpO1xyXG4gICAgICAgIGxldCBuZXdQbGFjZW1lbnQgPSB0aGlzLnJlYWxQbGFjZW1lbnQ7XHJcbiAgICAgICAgaWYgKG5ld1BsYWNlbWVudC5pbmRleE9mKFwiYm90dG9tXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX21lbnVIZWlnaHQgPiByZWZlclBvc2l0aW9uLmJvdHRvbSAtIGJ0blNpemUuYm90dG9tKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdQbGFjZW1lbnQgPSBuZXdQbGFjZW1lbnQucmVwbGFjZShcImJvdHRvbVwiLCBcInRvcFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoXCJ0b3BcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVudUhlaWdodCA+IGJ0blNpemUudG9wIC0gcmVmZXJQb3NpdGlvbi50b3ApIHtcclxuICAgICAgICAgICAgICAgIG5ld1BsYWNlbWVudCA9IG5ld1BsYWNlbWVudC5yZXBsYWNlKFwidG9wXCIsIFwiYm90dG9tXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdQbGFjZW1lbnQuaW5kZXhPZihcImxlZnRcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWVudVdpZHRoID4gYnRuU2l6ZS5sZWZ0IC0gcmVmZXJQb3NpdGlvbi5sZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdQbGFjZW1lbnQgPSBuZXdQbGFjZW1lbnQucmVwbGFjZShcImxlZnRcIiwgXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3UGxhY2VtZW50LmluZGV4T2YoXCJyaWdodFwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tZW51V2lkdGggPiByZWZlclBvc2l0aW9uLnJpZ2h0IC0gYnRuU2l6ZS5yaWdodCkge1xyXG4gICAgICAgICAgICAgICAgbmV3UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50LnJlcGxhY2UoXCJyaWdodFwiLCBcImxlZnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gbmV3UGxhY2VtZW50O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDnoa7orqTlj4LnhafnmoTovrnnlYxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRSZWZlcmVuY2VQb3NpdGlvbigpIHtcclxuICAgICAgICBsZXQgclJpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICAgIGxldCByQm90dG9tID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICBsZXQgclRvcCA9IDA7XHJcbiAgICAgICAgbGV0IHJMZWZ0ID0gMDtcclxuICAgICAgICAvLyDmqKrlkJHlj4LnhadcclxuICAgICAgICBpZiAodGhpcy5yZWN0aWZ5UmVmZXJlbmNlSCkge1xyXG4gICAgICAgICAgICByUmlnaHQgPSB0aGlzLnJlY3RpZnlSZWZlcmVuY2VILmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O1xyXG4gICAgICAgICAgICByTGVmdCA9IHRoaXMucmVjdGlmeVJlZmVyZW5jZUguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g57q15ZCR5Y+C54WnXHJcbiAgICAgICAgaWYgKHRoaXMucmVjdGlmeVJlZmVyZW5jZVYpIHtcclxuICAgICAgICAgICAgckJvdHRvbSA9IHRoaXMucmVjdGlmeVJlZmVyZW5jZVYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xyXG4gICAgICAgICAgICByVG9wID0gdGhpcy5yZWN0aWZ5UmVmZXJlbmNlVi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHRvcDogclRvcCwgbGVmdDogckxlZnQsIHJpZ2h0OiByUmlnaHQsIGJvdHRvbTogckJvdHRvbSB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlj5jljJblr7nlupTnmoRjbGFzc1xyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIF9nZXRDbHNOYW1lKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgc3dpdGNoIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlIFwidG9wLXJpZ2h0XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJ0b3BcIjpcclxuICAgICAgICAgICAgICAgIC8vIOacneS4iu+8jOacneS4ii3mnJ3lj7NcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFwiZHJvcHVwXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInRvcC1sZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICAvLyDmnJ3kuIot5pyd5bemXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3B1cC1sZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxlZnQtYm90dG9tXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lt6bigJTigJTmnJ3kuItcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFwiZHJvcGxlZnRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibGVmdC10b3BcIjpcclxuICAgICAgICAgICAgICAgIC8vIOaoquWQkeKAlOKAlOacneW3puKAlOKAlOacneS4ilxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wbGVmdC11cFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodC1ib3R0b21cIjpcclxuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICAvLyDmqKrlkJHigJTigJTmnJ3lj7PigJTigJTmnJ3kuItcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IFwiZHJvcHJpZ2h0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJpZ2h0LXRvcFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5qiq5ZCR4oCU4oCU5pyd5Y+z4oCU4oCU5pyd5LiKXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3ByaWdodC11cFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJib3R0b20tbGVmdFwiOlxyXG4gICAgICAgICAgICAgICAgLy8g5pyd5LiL4oCU4oCU5pyd5bemXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3Bkb3duLWxlZnRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tLXJpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBcImRyb3Bkb3duXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIOacneS4i++8jOacneS4i+KAlOKAlOacneWPs1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gXCJkcm9wZG93blwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmVhbFBsYWNlbWVudChwbWVudCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBcImJvdHRvbS1yaWdodFwiO1xyXG4gICAgICAgIHN3aXRjaCAocG1lbnQpIHtcclxuICAgICAgICAgICAgY2FzZSBcInRvcFwiOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJ0b3AtcmlnaHRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwibGVmdFwiOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJsZWZ0LWJvdHRvbVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJyaWdodC1ib3R0b21cIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tXCI6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcImJvdHRvbS1yaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBwbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgICog6K6h566X55qE5L2N572u5Yy65YiG5b+S57uG5YyWXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hhbmdlUG9zaXRpb24oYnRuU2l6ZTogYW55KSB7XHJcbiAgICAgICAgbGV0IHJwbGFjZW1lbnQgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9SZWN0aWZ5KSB7XHJcbiAgICAgICAgICAgIHJwbGFjZW1lbnQgPSB0aGlzLnJlY3RpZnlQbGFjZW1lbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcnBsYWNlbWVudCA9IHRoaXMucmVhbFBsYWNlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0eWxlVG9wID0gMDtcclxuICAgICAgICBsZXQgc3R5bGVMZWZ0ID0gMDtcclxuICAgICAgICBpZiAocnBsYWNlbWVudC5pbmRleE9mKFwidG9wXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgc3R5bGVUb3AgPSBidG5TaXplLnRvcCAtIHRoaXMuX21lbnVIZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChycGxhY2VtZW50LmluZGV4T2YoXCJib3R0b21cIikgPiAtMSkge1xyXG4gICAgICAgICAgICBzdHlsZVRvcCA9IGJ0blNpemUuYm90dG9tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocnBsYWNlbWVudC5pbmRleE9mKFwicmlnaHRcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBzdHlsZUxlZnQgPSBidG5TaXplLnJpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAocnBsYWNlbWVudC5pbmRleE9mKFwibGVmdFwiKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHN0eWxlTGVmdCA9IGJ0blNpemUubGVmdCAtIHRoaXMuX21lbnVXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5byA5aS0XHJcbiAgICAgICAgaWYgKHJwbGFjZW1lbnQuaW5kZXhPZihcIi10b3BcIikgPiAtMSkge1xyXG4gICAgICAgICAgICBzdHlsZVRvcCA9IHN0eWxlVG9wIC0gYnRuU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChycGxhY2VtZW50LmluZGV4T2YoXCItYm90dG9tXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgc3R5bGVUb3AgPSBzdHlsZVRvcCArIGJ0blNpemUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IHN0eWxlVG9wICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMuZHBNZW51Lm5hdGl2ZUVsZW1lbnQuc3R5bGUubGVmdCA9IHN0eWxlTGVmdCArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKiDnu5HlrprkuIvmi4npnaLmnb/pvKDmoIfov5vlhaXkuovku7YgKi9cclxuICAgIGJpbmRNZW51TW91c2VlbnRlcigpIHtcclxuICAgICAgICB0aGlzLnVuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgdGhpcy5tb3VzZWVudGVyRXZlbnQgPSB0aGlzLmNoYW5nZUZsYWdUb1RydWUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgICAgICB0aGlzLm1vdXNlZW50ZXJFdmVudFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyog57uR5a6a5LiL5ouJ6Z2i5p2/6byg5qCH56a75byA5LqL5Lu2ICAqL1xyXG4gICAgYmluZGlNZW51TW91c2VsZWF2ZSgpIHtcclxuICAgICAgICB0aGlzLnVuYmluZGlNZW51TW91c2VsZWF2ZSgpO1xyXG4gICAgICAgIHRoaXMubW91c2VsZWF2ZUV2ZW50ID0gdGhpcy5tb3VzZUxlYXZlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcIm1vdXNlbGVhdmVcIixcclxuICAgICAgICAgICAgdGhpcy5tb3VzZWxlYXZlRXZlbnRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOe7keWumueCueWHu+mdouadv+WMuuWfn+S5i+WkluinpuWPkeeahOS6i+S7tiAqL1xyXG4gICAgLy8gYmluZERvY0NsaWNrKCkge1xyXG4gICAgLy8gICB0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCA9IHRoaXMuY2xpY2tEb2MuYmluZCh0aGlzKTtcclxuICAgIC8vICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRvY3VtZW50Q2xpY2tFdmVudCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLyog6Kej57uR5LqL5Lu2ICovXHJcbiAgICB1bmJpbmRNZW51TW91c2VlbnRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZWVudGVyRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJtb3VzZWVudGVyXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlZW50ZXJFdmVudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVuYmluZGlNZW51TW91c2VsZWF2ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5tb3VzZWxlYXZlRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kcE1lbnUubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgXCJtb3VzZWxlYXZlXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlbGVhdmVFdmVudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHVuYmluZERvY0NsaWNrKCkge1xyXG4gICAgLy8gICBpZiAodGhpcy5kb2N1bWVudENsaWNrRXZlbnQpIHtcclxuICAgIC8vICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZG9jdW1lbnRDbGlja0V2ZW50KTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8qIGZsYWcgdHJ1ZSAqL1xyXG4gICAgY2hhbmdlRmxhZ1RvVHJ1ZSgpIHtcclxuICAgICAgICB0aGlzLmRwRmxhZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyogZmxhZyBmYWxzZSAqL1xyXG4gICAgY2hhbmdlRmxhZ1RvRmFsc2UoKSB7XHJcbiAgICAgICAgdGhpcy5kcEZsYWcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiDpvKDmoIfnprvlvIDml7YgIOWFs+mXrW1lbnUgKi9cclxuICAgIG1vdXNlTGVhdmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZHBGbGFnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRmxhZ1RvRmFsc2UoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgICAgICB0aGlzLnVuYmluZGlNZW51TW91c2VsZWF2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnVuYmluZE1lbnVNb3VzZWVudGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0VGltZU9iaikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNldFRpbWVPYmopO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyog6byg5qCH5rKh5pyJ6L+b5YWl5Yiw6Z2i5p2/ICDkuIDmrrXml7bpl7TlkI7pnaLmnb/oh6rliqjmtojlpLEgKi9cclxuICAgIG1vdXNlTm90RW50ZXJMZWF2ZSgpIHtcclxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLnNldFRpbWVPYmopIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy5zZXRUaW1lT2JqKTtcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICB0aGlzLnNldFRpbWVPYmogPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kcEZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUZsYWdUb0ZhbHNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy51bmJpbmREb2NDbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5iaW5kaU1lbnVNb3VzZWxlYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmRNZW51TW91c2VlbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXRUaW1lT2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNldFRpbWVPYmopO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyog5YWz6Zet5LiL5ouJ6Z2i5p2/ICovXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTtcclxuICAgICAgICAvLyDlhbPpl63kuIvmi4nmjInpkq7pnaLmnb8gIOiEj+WAvOajgOa1i1xyXG4gICAgICAgIGlmICghdGhpcy5jaGFuZ2VSZWZbXCJkZXN0cm95ZWRcIl0pIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kcEJ0bi5uYXRpdmVFbGVtZW50LmJsdXIoKTtcclxuICAgICAgICBpZiAodGhpcy5kcEJ0biAmJiB0aGlzLm92ZXJMYXlTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UuZGVzdG9yeSh0aGlzLmRwQnRuLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiDliqjmgIHmjIflrpptZW515ZyoYm9keeS4reeahOS9jee9riAqL1xyXG4gICAgcHJpdmF0ZSBzZXRQb3NpdGlvbihlKSB7XHJcbiAgICAgICAgLy8g5LiL5ouJ5oyJ6ZKuXHJcbiAgICAgICAgY29uc3QgYnRuU2l6ZSA9IHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAvLyDkuIvmi4npnaLmnb9cclxuICAgICAgICBsZXQgbWVudVJlY3QgPSB0aGlzLmRwTWVudS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHRoaXMuX21lbnVIZWlnaHQgPSBtZW51UmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5fbWVudVdpZHRoID0gbWVudVJlY3Qud2lkdGg7XHJcbiAgICAgICAgLy8g5aaC5p6c6KaB6Ieq5Yqo57qg5q2j5pa55ZCRXHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1JlY3RpZnkpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VQbGFjZW1lbnQoYnRuU2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbmdlUG9zaXRpb24oYnRuU2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgLy8gdGhpcy5yZW1vdmVNZW51UGFuZWwoKTtcclxuICAgICAgICBpZiAodGhpcy5kcEJ0biAmJiB0aGlzLmRwQnRuLm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZHBCdG4ubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3ZlckxheVNlcnZpY2UgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==