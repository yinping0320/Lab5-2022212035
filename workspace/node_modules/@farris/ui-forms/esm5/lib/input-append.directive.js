/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, Renderer2, Injector, Input, Output, ViewContainerRef, NgZone } from '@angular/core';
import { EventEmitter } from '@angular/core';
var InputAppendDirective = /** @class */ (function () {
    // private ngControl: NgControl;
    function InputAppendDirective(viewRef, el, render, injector) {
        this.viewRef = viewRef;
        this.el = el;
        this.render = render;
        this.injector = injector;
        this._enableAppend = true;
        // 应用场景，默认这个功能是在简单表格 Table
        // 追加一个场景在普通表单上 Form
        this._appendScene = 'Table';
        // 追加到哪个类型下 TextBox、MultiTextBox、 StaticText
        this.inputAppendControlType = 'InputGroup';
        // 根据类型不一样，在控件处于禁用、只读时，决定颜色是否可用
        // 有两种：按钮 button 文本 text
        this._appendType = 'button';
        // 追加的文本
        this._inputAppendText = '';
        // 模板
        // @Input() inputAppendTmpl: TemplateRef<any>;
        this._disabled = false;
        // 当_appendCls为空时，
        this._appendCls = 'input-group-text';
        /*
            * 文本点击事件
            */
        this.inputAppendClickEvent = new EventEmitter();
        // 标记native的外层
        this.elWrapElement = null;
        // 标记元素
        this.appendWrapElement = null;
        // 暂时不用
        this.appendTextElement = null;
        this.clickHandler = null;
        this.disabledCls = 'f-state-disabled';
        this.ngZone = null;
        this.ngZone = this.injector.get(NgZone);
    }
    Object.defineProperty(InputAppendDirective.prototype, "enableAppend", {
        get: /**
         * @return {?}
         */
        function () {
            return this._enableAppend;
        },
        // 相当于启用禁用此功能
        set: 
        // 相当于启用禁用此功能
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === '' || value) {
                this._enableAppend = true;
                // 需要
                if (!this.appendWrapElement) {
                    this.createStruct();
                }
            }
            else {
                this._enableAppend = false;
                if (this.appendWrapElement) {
                    this.resetStruct();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputAppendDirective.prototype, "inputAppendScene", {
        get: /**
         * @return {?}
         */
        function () {
            return this._appendScene;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            // 支持这两个场景
            val = val == 'Form' ? 'Form' : 'Table';
            if (val != this._appendScene) {
                switch (this.inputAppendControlType) {
                    case 'StaticText':
                        this.render.removeClass(this.el.nativeElement, 'f-cmp-input-append-' + this._appendScene.toLowerCase());
                        this.render.addClass(this.el.nativeElement, 'f-cmp-input-append-' + val.toLowerCase());
                        break;
                    case 'TextBox':
                    case 'MultiTextBox':
                        if (this.elWrapElement) {
                            this.elWrapElement.className = this.elWrapElement.className.replace('f-cmp-input-append-' + this._appendScene.toLowerCase(), 'f-cmp-input-append-' + val.toLowerCase());
                        }
                        break;
                }
                this._appendScene = val;
                this.modifyPaddingRight();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputAppendDirective.prototype, "inputAppendType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._appendType;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this = this;
            if (value) {
                if (['button', 'text'].findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item == value; })) < 0) {
                    // 类型在支持范围内
                    value = 'button';
                }
                if (value != this._appendType) {
                    if (this.appendWrapElement) {
                        // 移除原来，追加新的
                        this.render.removeClass(this.appendWrapElement, 'input-append-' + this._appendType);
                        this.render.addClass(this.appendWrapElement, 'input-append-' + value);
                        if (this._appendType == 'button') {
                            // 原来是按钮
                            if (this.clickHandler) {
                                this.clickHandler();
                                this.clickHandler = null;
                            }
                        }
                        else {
                            this.clickHandler = this.render.listen(this.appendWrapElement, 'click', (/**
                             * @param {?} ev
                             * @return {?}
                             */
                            function (ev) {
                                _this.inputAppendClickEvent.emit(ev);
                            }));
                        }
                    }
                    this._appendType = value;
                    this.modifyPaddingRight();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputAppendDirective.prototype, "inputAppendText", {
        get: /**
         * @return {?}
         */
        function () {
            return this._inputAppendText;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._inputAppendText) {
                this._inputAppendText = value;
                if (this.appendWrapElement && this._enableAppend) {
                    this.render.removeChild(this.appendWrapElement, this.appendTextElement);
                    this.appendTextElement.innerHTML = value;
                    this.render.appendChild(this.appendWrapElement, this.appendTextElement);
                    this.modifyPaddingRight();
                }
                else {
                    this.createStruct();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputAppendDirective.prototype, "inputAppendDisabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._disabled) {
                this._disabled = value;
                if (this.appendWrapElement) {
                    value && this.render.addClass(this.appendWrapElement, this.disabledCls);
                    !value && this.render.removeClass(this.appendWrapElement, this.disabledCls);
                }
                this.modifyPaddingRight();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputAppendDirective.prototype, "inputAppendCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this._appendCls;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val != this._appendCls) {
                val = val ? val : 'input-group-text';
                if (this.appendTextElement) {
                    this.appendTextElement.className = val;
                }
                this._appendCls = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    InputAppendDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        //this.ngControl = this.injector.get(NgControl, null);
    };
    /**
     * @return {?}
     */
    InputAppendDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.createStruct();
    };
    /**
     * @return {?}
     */
    InputAppendDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        //this.resetStruct();
        if (this.clickHandler) {
            this.clickHandler();
            this.clickHandler = null;
        }
        if (this.appendWrapElement) {
            this.appendWrapElement.remove();
            this.appendWrapElement = null;
        }
        if (this.elWrapElement) {
            this.elWrapElement.remove();
            this.elWrapElement = null;
        }
    };
    /**
     * 重置
     */
    /**
     * 重置
     * @private
     * @return {?}
     */
    InputAppendDirective.prototype.resetStruct = /**
     * 重置
     * @private
     * @return {?}
     */
    function () {
        if (this.clickHandler) {
            this.clickHandler();
            this.clickHandler = null;
        }
        // 分类型移除不同新增加的结构或样式
        switch (this.inputAppendControlType) {
            case 'StaticText':
                this.render.removeClass(this.el.nativeElement, 'f-cmp-static-text-input-append');
                this.render.removeClass(this.el.nativeElement, 'f-cmp-input-append-' + this.inputAppendScene.toLowerCase());
                break;
            case 'TextBox':
            case 'MultiTextBox':
                if (this.elWrapElement) {
                    /** @type {?} */
                    var wrapParent = this.render.parentNode(this.elWrapElement);
                    this.render.appendChild(wrapParent, this.el.nativeElement);
                    this.elWrapElement.remove();
                    this.elWrapElement = null;
                }
                break;
        }
        if (this.appendWrapElement) {
            this.appendWrapElement.remove();
            this.appendWrapElement = null;
        }
        this.modifyPaddingRight();
    };
    /**
     * 创建插入结构
     */
    /**
     * 创建插入结构
     * @private
     * @return {?}
     */
    InputAppendDirective.prototype.createStruct = /**
     * 创建插入结构
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.inputAppendText || !this.enableAppend || this.appendWrapElement) {
            return;
        }
        /** @type {?} */
        var buttonWrap = this.render.createElement('div');
        buttonWrap.className = 'input-group-append input-append-wrapper';
        buttonWrap.className += ' input-append-' + this.inputAppendType;
        if (this._disabled) {
            buttonWrap.className += ' ' + this.disabledCls;
        }
        /** @type {?} */
        var buttonTextWrap = this.render.createElement('div');
        buttonTextWrap.className = this.inputAppendCls;
        buttonTextWrap.innerHTML = this.inputAppendText;
        this.appendTextElement = buttonTextWrap;
        this.appendWrapElement = buttonWrap;
        this.render.appendChild(buttonWrap, buttonTextWrap);
        switch (this.inputAppendControlType) {
            case 'StaticText':
                // 此时还没有生成内部的样式
                // let textareaEl = this.el.nativeElement.querySelector('.f-form-control-textarea');
                /** @type {?} */
                var clsNames = 'f-cmp-static-text-input-append' + (' f-cmp-input-append-' + this.inputAppendScene.toLowerCase()) + (this._disabled ? ' ' + this.disabledCls : '');
                clsNames.split(' ').map((/**
                 * @param {?} tclsName
                 * @return {?}
                 */
                function (tclsName) {
                    _this.render.addClass(_this.el.nativeElement, tclsName);
                }));
                this.render.appendChild(this.el.nativeElement, buttonWrap);
                break;
            case 'TextBox':
            case 'MultiTextBox':
                /** @type {?} */
                var textParent = this.render.parentNode(this.el.nativeElement);
                /** @type {?} */
                var inputWrap = this.render.createElement('div');
                inputWrap.className = 'f-cmp-text-input-append f-cmp-input-append-' + this.inputAppendScene.toLowerCase() + (this._disabled ? ' ' + this.disabledCls : '');
                if (this.el.nativeElement.outerHTML.indexOf('textarea') > -1) {
                    inputWrap.className = 'f-cmp-textarea-input-append f-cmp-input-append-' + this.inputAppendScene.toLowerCase() + (this._disabled ? ' ' + this.disabledCls : '');
                }
                this.elWrapElement = inputWrap;
                this.render.appendChild(inputWrap, this.el.nativeElement);
                this.render.appendChild(inputWrap, buttonWrap);
                this.render.appendChild(textParent, inputWrap);
                break;
            default:
                // 存在类似下拉这样的控件，内部调用input-group结构还没有初始化
                /** @type {?} */
                var inputGroupEl = this.el.nativeElement.querySelector('.input-group');
                if (inputGroupEl) {
                    this.render.appendChild(inputGroupEl, buttonWrap);
                }
                else {
                    if (this.ngZone) {
                        this.ngZone.runOutsideAngular((/**
                         * @return {?}
                         */
                        function () {
                            setTimeout((/**
                             * @return {?}
                             */
                            function () {
                                /** @type {?} */
                                var inputGroupEl2 = _this.el.nativeElement.querySelector('.input-group');
                                _this.render.appendChild(inputGroupEl2, buttonWrap);
                            }));
                        }));
                    }
                }
        }
        if (this.inputAppendType == 'button') {
            this.clickHandler = this.render.listen(this.appendWrapElement, 'click', (/**
             * @param {?} ev
             * @return {?}
             */
            function (ev) {
                if (!_this.inputAppendDisabled) {
                    _this.inputAppendClickEvent.emit(ev);
                }
            }));
        }
        this.modifyPaddingRight();
    };
    /**
     * 因为在普通输入框、静态文本、多行文本框展示时，界面样式问题。
     * 所以需要单独处理，通过absolute定位，设置间距，保持界面一致
     */
    /**
     * 因为在普通输入框、静态文本、多行文本框展示时，界面样式问题。
     * 所以需要单独处理，通过absolute定位，设置间距，保持界面一致
     * @private
     * @return {?}
     */
    InputAppendDirective.prototype.modifyPaddingRight = /**
     * 因为在普通输入框、静态文本、多行文本框展示时，界面样式问题。
     * 所以需要单独处理，通过absolute定位，设置间距，保持界面一致
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var findType = ['StaticText', 'TextBox', 'MultiTextBox'].find((/**
         * @param {?} typeItem
         * @return {?}
         */
        function (typeItem) { return typeItem == _this.inputAppendControlType; }));
        if (this.inputAppendScene == 'Form' && findType) {
            /** @type {?} */
            var changeEl = findType == 'StaticText' ? this.el.nativeElement.querySelector('span') : this.el.nativeElement;
            if (this.enableAppend && !this._disabled && this.appendWrapElement) {
                //window.getComputhis.appendWrapElement
                /** @type {?} */
                var tRectObj = this.appendWrapElement.getBoundingClientRect();
                this.render.setStyle(changeEl, 'paddingRight', tRectObj.width + 'px');
            }
            else {
                this.render.removeStyle(changeEl, 'paddingRight');
            }
        }
    };
    InputAppendDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[input-append]',
                },] }
    ];
    /** @nocollapse */
    InputAppendDirective.ctorParameters = function () { return [
        { type: ViewContainerRef },
        { type: ElementRef },
        { type: Renderer2 },
        { type: Injector }
    ]; };
    InputAppendDirective.propDecorators = {
        enableAppend: [{ type: Input, args: ['input-append',] }],
        inputAppendScene: [{ type: Input }],
        inputAppendControlType: [{ type: Input }],
        inputAppendType: [{ type: Input }],
        inputAppendText: [{ type: Input }],
        inputAppendDisabled: [{ type: Input }],
        inputAppendCls: [{ type: Input }],
        inputAppendClickEvent: [{ type: Output }]
    };
    return InputAppendDirective;
}());
export { InputAppendDirective };
if (false) {
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._enableAppend;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._appendScene;
    /** @type {?} */
    InputAppendDirective.prototype.inputAppendControlType;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._appendType;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._inputAppendText;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype._appendCls;
    /** @type {?} */
    InputAppendDirective.prototype.inputAppendClickEvent;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.elWrapElement;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.appendWrapElement;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.appendTextElement;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.clickHandler;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.disabledCls;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.viewRef;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    InputAppendDirective.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtYXBwZW5kLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZm9ybXMvIiwic291cmNlcyI6WyJsaWIvaW5wdXQtYXBwZW5kLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBVSxLQUFLLEVBQ0wsTUFBTSxFQUFFLGdCQUFnQixFQUFlLE1BQU0sRUFDcEcsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUc3QztJQXlKSSxnQ0FBZ0M7SUFDaEMsOEJBQW9CLE9BQXlCLEVBQVUsRUFBYyxFQUFVLE1BQWlCLEVBQVUsUUFBa0I7UUFBeEcsWUFBTyxHQUFQLE9BQU8sQ0FBa0I7UUFBVSxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUFVLGFBQVEsR0FBUixRQUFRLENBQVU7UUF0SnBILGtCQUFhLEdBQUcsSUFBSSxDQUFDOzs7UUFzQnJCLGlCQUFZLEdBQUMsT0FBTyxDQUFDOztRQTBCcEIsMkJBQXNCLEdBQUcsWUFBWSxDQUFDOzs7UUFHdkMsZ0JBQVcsR0FBRyxRQUFRLENBQUM7O1FBbUN2QixxQkFBZ0IsR0FBRyxFQUFFLENBQUM7OztRQW9CdEIsY0FBUyxHQUFHLEtBQUssQ0FBQzs7UUFnQmxCLGVBQVUsR0FBQyxrQkFBa0IsQ0FBQzs7OztRQWlCNUIsMEJBQXFCLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFFN0Msa0JBQWEsR0FBRyxJQUFJLENBQUM7O1FBRXJCLHNCQUFpQixHQUFHLElBQUksQ0FBQzs7UUFFekIsc0JBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLGlCQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLGdCQUFXLEdBQUcsa0JBQWtCLENBQUM7UUFDakMsV0FBTSxHQUFXLElBQUksQ0FBQztR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SUFFakMsaURBQWlDOzs7OztJQUNqQyw0Q0FBNEI7Ozs7O0lBQzVCLDJDQUF5Qzs7Ozs7SUFDekMsc0NBQThCOzs7OztJQUVsQix1Q0FBaUM7Ozs7O0lBQUUsa0NBQXNCOzs7OztJQUFFLHNDQUF5Qjs7Ozs7SUFBRSx3Q0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIEluamVjdG9yLCBPbkluaXQsIElucHV0LFxyXG4gICAgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIE91dHB1dCwgVmlld0NvbnRhaW5lclJlZiwgVGVtcGxhdGVSZWYsIE5nWm9uZVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2lucHV0LWFwcGVuZF0nLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSW5wdXRBcHBlbmREaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcbiAgICBwcml2YXRlIF9lbmFibGVBcHBlbmQgPSB0cnVlO1xyXG4gICAgLy8g55u45b2T5LqO5ZCv55So56aB55So5q2k5Yqf6IO9XHJcbiAgICBASW5wdXQoJ2lucHV0LWFwcGVuZCcpXHJcbiAgICBzZXQgZW5hYmxlQXBwZW5kKHZhbHVlOiBzdHJpbmcgfCBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbmFibGVBcHBlbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyDpnIDopoFcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcGVuZFdyYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVN0cnVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZW5hYmxlQXBwZW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFwcGVuZFdyYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U3RydWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZW5hYmxlQXBwZW5kKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVBcHBlbmQ7XHJcbiAgICB9XHJcbiAgICAvLyDlupTnlKjlnLrmma/vvIzpu5jorqTov5nkuKrlip/og73mmK/lnKjnroDljZXooajmoLwgVGFibGVcclxuICAgIC8vIOi/veWKoOS4gOS4quWcuuaZr+WcqOaZrumAmuihqOWNleS4iiBGb3JtXHJcbiAgICBwcml2YXRlIF9hcHBlbmRTY2VuZT0nVGFibGUnO1xyXG4gICAgQElucHV0KCkgXHJcbiAgICBzZXQgaW5wdXRBcHBlbmRTY2VuZSh2YWw6c3RyaW5nKXtcclxuICAgICAgICAvLyDmlK/mjIHov5nkuKTkuKrlnLrmma9cclxuICAgICAgICB2YWw9dmFsPT0nRm9ybSc/J0Zvcm0nOidUYWJsZSc7XHJcbiAgICAgICAgaWYodmFsIT10aGlzLl9hcHBlbmRTY2VuZSl7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5pbnB1dEFwcGVuZENvbnRyb2xUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdTdGF0aWNUZXh0JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmLWNtcC1pbnB1dC1hcHBlbmQtJyt0aGlzLl9hcHBlbmRTY2VuZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmLWNtcC1pbnB1dC1hcHBlbmQtJyt2YWwudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdUZXh0Qm94JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ011bHRpVGV4dEJveCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxXcmFwRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsV3JhcEVsZW1lbnQuY2xhc3NOYW1lPSB0aGlzLmVsV3JhcEVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoJ2YtY21wLWlucHV0LWFwcGVuZC0nK3RoaXMuX2FwcGVuZFNjZW5lLnRvTG93ZXJDYXNlKCksJ2YtY21wLWlucHV0LWFwcGVuZC0nK3ZhbC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fYXBwZW5kU2NlbmU9dmFsO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGlmeVBhZGRpbmdSaWdodCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBpbnB1dEFwcGVuZFNjZW5lKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGVuZFNjZW5lO1xyXG4gICAgfVxyXG4gICAgLy8g6L+95Yqg5Yiw5ZOq5Liq57G75Z6L5LiLIFRleHRCb3jjgIFNdWx0aVRleHRCb3jjgIEgU3RhdGljVGV4dFxyXG4gICAgQElucHV0KCkgaW5wdXRBcHBlbmRDb250cm9sVHlwZSA9ICdJbnB1dEdyb3VwJztcclxuICAgIC8vIOagueaNruexu+Wei+S4jeS4gOagt++8jOWcqOaOp+S7tuWkhOS6juemgeeUqOOAgeWPquivu+aXtu+8jOWGs+WumuminOiJsuaYr+WQpuWPr+eUqFxyXG4gICAgLy8g5pyJ5Lik56eN77ya5oyJ6ZKuIGJ1dHRvbiDmlofmnKwgdGV4dFxyXG4gICAgcHJpdmF0ZSBfYXBwZW5kVHlwZSA9ICdidXR0b24nO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBpbnB1dEFwcGVuZFR5cGUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoWydidXR0b24nLCAndGV4dCddLmZpbmRJbmRleChpdGVtID0+IGl0ZW0gPT0gdmFsdWUpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgLy8g57G75Z6L5Zyo5pSv5oyB6IyD5Zu05YaFXHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdidXR0b24nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLl9hcHBlbmRUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHBlbmRXcmFwRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOenu+mZpOWOn+adpe+8jOi/veWKoOaWsOeahFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsICdpbnB1dC1hcHBlbmQtJyArIHRoaXMuX2FwcGVuZFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsICdpbnB1dC1hcHBlbmQtJyArIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXBwZW5kVHlwZSA9PSAnYnV0dG9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDljp/mnaXmmK/mjInpkq5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpY2tIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSB0aGlzLnJlbmRlci5saXN0ZW4odGhpcy5hcHBlbmRXcmFwRWxlbWVudCwgJ2NsaWNrJywgKGV2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0QXBwZW5kQ2xpY2tFdmVudC5lbWl0KGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwZW5kVHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZnlQYWRkaW5nUmlnaHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBnZXQgaW5wdXRBcHBlbmRUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBlbmRUeXBlO1xyXG4gICAgfVxyXG4gICAgLy8g6L+95Yqg55qE5paH5pysXHJcbiAgICBwcml2YXRlIF9pbnB1dEFwcGVuZFRleHQgPSAnJztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgaW5wdXRBcHBlbmRUZXh0KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5faW5wdXRBcHBlbmRUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0QXBwZW5kVGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hcHBlbmRXcmFwRWxlbWVudCAmJiB0aGlzLl9lbmFibGVBcHBlbmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNoaWxkKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsIHRoaXMuYXBwZW5kVGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUZXh0RWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsIHRoaXMuYXBwZW5kVGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZnlQYWRkaW5nUmlnaHQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU3RydWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgaW5wdXRBcHBlbmRUZXh0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dEFwcGVuZFRleHQ7XHJcbiAgICB9XHJcbiAgICAvLyDmqKHmnb9cclxuICAgIC8vIEBJbnB1dCgpIGlucHV0QXBwZW5kVG1wbDogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIHByaXZhdGUgX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGlucHV0QXBwZW5kRGlzYWJsZWQodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5fZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlICYmIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsIHRoaXMuZGlzYWJsZWRDbHMpO1xyXG4gICAgICAgICAgICAgICAgIXZhbHVlICYmIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsIHRoaXMuZGlzYWJsZWRDbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubW9kaWZ5UGFkZGluZ1JpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGlucHV0QXBwZW5kRGlzYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xyXG4gICAgfVxyXG4gICAgLy8g5b2TX2FwcGVuZENsc+S4uuepuuaXtu+8jFxyXG4gICAgcHJpdmF0ZSBfYXBwZW5kQ2xzPSdpbnB1dC1ncm91cC10ZXh0JztcclxuICAgIEBJbnB1dCgpIFxyXG4gICAgc2V0IGlucHV0QXBwZW5kQ2xzKHZhbDpzdHJpbmcpe1xyXG4gICAgICAgIGlmKHZhbCE9dGhpcy5fYXBwZW5kQ2xzKXsgXHJcbiAgICAgICAgICAgIHZhbD12YWw/dmFsOidpbnB1dC1ncm91cC10ZXh0JztcclxuICAgICAgICAgICAgaWYodGhpcy5hcHBlbmRUZXh0RWxlbWVudCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRleHRFbGVtZW50LmNsYXNzTmFtZT12YWw7ICBcclxuICAgICAgICAgICAgfSAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9hcHBlbmRDbHM9dmFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBpbnB1dEFwcGVuZENscygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBlbmRDbHNcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAqIOaWh+acrOeCueWHu+S6i+S7tlxyXG4gICAgKi9cclxuICAgIEBPdXRwdXQoKSBpbnB1dEFwcGVuZENsaWNrRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDmoIforrBuYXRpdmXnmoTlpJblsYJcclxuICAgIHByaXZhdGUgZWxXcmFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAvLyDmoIforrDlhYPntKBcclxuICAgIHByaXZhdGUgYXBwZW5kV3JhcEVsZW1lbnQgPSBudWxsO1xyXG4gICAgLy8g5pqC5pe25LiN55SoXHJcbiAgICBwcml2YXRlIGFwcGVuZFRleHRFbGVtZW50ID0gbnVsbDtcclxuICAgIHByaXZhdGUgY2xpY2tIYW5kbGVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgZGlzYWJsZWRDbHMgPSAnZi1zdGF0ZS1kaXNhYmxlZCc7XHJcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lID0gbnVsbDtcclxuICAgIC8vIHByaXZhdGUgbmdDb250cm9sOiBOZ0NvbnRyb2w7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZpZXdSZWY6IFZpZXdDb250YWluZXJSZWYsIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSB0aGlzLmluamVjdG9yLmdldChOZ1pvbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vdGhpcy5uZ0NvbnRyb2wgPSB0aGlzLmluamVjdG9yLmdldChOZ0NvbnRyb2wsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdHJ1Y3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICAvL3RoaXMucmVzZXRTdHJ1Y3QoKTtcclxuICAgICAgICBpZiAodGhpcy5jbGlja0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcHBlbmRXcmFwRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFdyYXBFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFdyYXBFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZWxXcmFwRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsV3JhcEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxXcmFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43nva5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZXNldFN0cnVjdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5jbGlja0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDliIbnsbvlnovnp7vpmaTkuI3lkIzmlrDlop7liqDnmoTnu5PmnoTmiJbmoLflvI9cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuaW5wdXRBcHBlbmRDb250cm9sVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdTdGF0aWNUZXh0JzpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2YtY21wLXN0YXRpYy10ZXh0LWlucHV0LWFwcGVuZCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnZi1jbXAtaW5wdXQtYXBwZW5kLScrdGhpcy5pbnB1dEFwcGVuZFNjZW5lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1RleHRCb3gnOlxyXG4gICAgICAgICAgICBjYXNlICdNdWx0aVRleHRCb3gnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxXcmFwRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3cmFwUGFyZW50ID0gdGhpcy5yZW5kZXIucGFyZW50Tm9kZSh0aGlzLmVsV3JhcEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKHdyYXBQYXJlbnQsIHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbFdyYXBFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxXcmFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRXcmFwRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRXcmFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kaWZ5UGFkZGluZ1JpZ2h0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIm+W7uuaPkuWFpee7k+aehFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVN0cnVjdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5wdXRBcHBlbmRUZXh0IHx8ICF0aGlzLmVuYWJsZUFwcGVuZCB8fCB0aGlzLmFwcGVuZFdyYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnV0dG9uV3JhcCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGJ1dHRvbldyYXAuY2xhc3NOYW1lID0gJ2lucHV0LWdyb3VwLWFwcGVuZCBpbnB1dC1hcHBlbmQtd3JhcHBlcic7XHJcbiAgICAgICAgYnV0dG9uV3JhcC5jbGFzc05hbWUgKz0gJyBpbnB1dC1hcHBlbmQtJyArIHRoaXMuaW5wdXRBcHBlbmRUeXBlO1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBidXR0b25XcmFwLmNsYXNzTmFtZSArPSAnICcgKyB0aGlzLmRpc2FibGVkQ2xzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBidXR0b25UZXh0V3JhcCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGJ1dHRvblRleHRXcmFwLmNsYXNzTmFtZSA9IHRoaXMuaW5wdXRBcHBlbmRDbHM7XHJcbiAgICAgICAgYnV0dG9uVGV4dFdyYXAuaW5uZXJIVE1MID0gdGhpcy5pbnB1dEFwcGVuZFRleHQ7XHJcbiAgICAgICAgdGhpcy5hcHBlbmRUZXh0RWxlbWVudCA9IGJ1dHRvblRleHRXcmFwO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQgPSBidXR0b25XcmFwO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKGJ1dHRvbldyYXAsIGJ1dHRvblRleHRXcmFwKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuaW5wdXRBcHBlbmRDb250cm9sVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdTdGF0aWNUZXh0JzpcclxuICAgICAgICAgICAgICAgIC8vIOatpOaXtui/mOayoeacieeUn+aIkOWGhemDqOeahOagt+W8j1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IHRleHRhcmVhRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtZm9ybS1jb250cm9sLXRleHRhcmVhJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2xzTmFtZXM9J2YtY21wLXN0YXRpYy10ZXh0LWlucHV0LWFwcGVuZCcrKCcgZi1jbXAtaW5wdXQtYXBwZW5kLScrdGhpcy5pbnB1dEFwcGVuZFNjZW5lLnRvTG93ZXJDYXNlKCkpICsgKHRoaXMuX2Rpc2FibGVkID8gJyAnICsgdGhpcy5kaXNhYmxlZENscyA6ICcnKTtcclxuICAgICAgICAgICAgICAgIGNsc05hbWVzLnNwbGl0KCcgJykubWFwKCh0Y2xzTmFtZSk9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsdGNsc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hcHBlbmRDaGlsZCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGJ1dHRvbldyYXApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1RleHRCb3gnOlxyXG4gICAgICAgICAgICBjYXNlICdNdWx0aVRleHRCb3gnOlxyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRQYXJlbnQgPSB0aGlzLnJlbmRlci5wYXJlbnROb2RlKHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFdyYXAgPSB0aGlzLnJlbmRlci5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGlucHV0V3JhcC5jbGFzc05hbWUgPSAnZi1jbXAtdGV4dC1pbnB1dC1hcHBlbmQgZi1jbXAtaW5wdXQtYXBwZW5kLScrdGhpcy5pbnB1dEFwcGVuZFNjZW5lLnRvTG93ZXJDYXNlKCkgKyAodGhpcy5fZGlzYWJsZWQgPyAnICcgKyB0aGlzLmRpc2FibGVkQ2xzIDogJycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5vdXRlckhUTUwuaW5kZXhPZigndGV4dGFyZWEnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRXcmFwLmNsYXNzTmFtZSA9ICdmLWNtcC10ZXh0YXJlYS1pbnB1dC1hcHBlbmQgZi1jbXAtaW5wdXQtYXBwZW5kLScrdGhpcy5pbnB1dEFwcGVuZFNjZW5lLnRvTG93ZXJDYXNlKCkgKyAodGhpcy5fZGlzYWJsZWQgPyAnICcgKyB0aGlzLmRpc2FibGVkQ2xzIDogJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbFdyYXBFbGVtZW50ID0gaW5wdXRXcmFwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwLCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwLCBidXR0b25XcmFwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKHRleHRQYXJlbnQsIGlucHV0V3JhcCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIOWtmOWcqOexu+S8vOS4i+aLiei/meagt+eahOaOp+S7tu+8jOWGhemDqOiwg+eUqGlucHV0LWdyb3Vw57uT5p6E6L+Y5rKh5pyJ5Yid5aeL5YyWXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXRHcm91cEVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0R3JvdXBFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKGlucHV0R3JvdXBFbCwgYnV0dG9uV3JhcCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5nWm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRHcm91cEVsMiA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hcHBlbmRDaGlsZChpbnB1dEdyb3VwRWwyLCBidXR0b25XcmFwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRBcHBlbmRUeXBlID09ICdidXR0b24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tIYW5kbGVyID0gdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMuYXBwZW5kV3JhcEVsZW1lbnQsICdjbGljaycsIChldikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaW5wdXRBcHBlbmREaXNhYmxlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEFwcGVuZENsaWNrRXZlbnQuZW1pdChldik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGlmeVBhZGRpbmdSaWdodCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlm6DkuLrlnKjmma7pgJrovpPlhaXmoYbjgIHpnZnmgIHmlofmnKzjgIHlpJrooYzmlofmnKzmoYblsZXnpLrml7bvvIznlYzpnaLmoLflvI/pl67popjjgIJcclxuICAgICAqIOaJgOS7pemcgOimgeWNleeLrOWkhOeQhu+8jOmAmui/h2Fic29sdXRl5a6a5L2N77yM6K6+572u6Ze06Led77yM5L+d5oyB55WM6Z2i5LiA6Ie0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbW9kaWZ5UGFkZGluZ1JpZ2h0KCl7XHJcbiAgICAgICAgbGV0IGZpbmRUeXBlPVsnU3RhdGljVGV4dCcsJ1RleHRCb3gnLCdNdWx0aVRleHRCb3gnXS5maW5kKHR5cGVJdGVtPT50eXBlSXRlbT09dGhpcy5pbnB1dEFwcGVuZENvbnRyb2xUeXBlKTtcclxuICAgICAgICBpZih0aGlzLmlucHV0QXBwZW5kU2NlbmU9PSdGb3JtJyYmZmluZFR5cGUpe1xyXG4gICAgICAgICAgICBsZXQgY2hhbmdlRWw9ZmluZFR5cGU9PSdTdGF0aWNUZXh0Jz90aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcignc3BhbicpOnRoaXMuZWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgaWYodGhpcy5lbmFibGVBcHBlbmQmJiF0aGlzLl9kaXNhYmxlZCYmdGhpcy5hcHBlbmRXcmFwRWxlbWVudCl7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5nZXRDb21wdXRoaXMuYXBwZW5kV3JhcEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRSZWN0T2JqPXRoaXMuYXBwZW5kV3JhcEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShjaGFuZ2VFbCwgJ3BhZGRpbmdSaWdodCcsdFJlY3RPYmoud2lkdGgrJ3B4Jyk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKGNoYW5nZUVsLCAncGFkZGluZ1JpZ2h0Jyk7ICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcbiJdfQ==