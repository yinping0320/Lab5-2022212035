{"version":3,"file":"farris-ui-scrollspy.js.map","sources":["ng://@farris/ui-scrollspy/lib/farris-scrollspy.service.ts","ng://@farris/ui-scrollspy/lib/utils.ts","ng://@farris/ui-scrollspy/lib/farris-scrollspy.component.ts","ng://@farris/ui-scrollspy/lib/farris-scrollspy.directive.ts","ng://@farris/ui-scrollspy/lib/scrollspy.module.ts"],"sourcesContent":["import { Injectable, OnDestroy, NgZone } from '@angular/core';\r\nimport { fromEvent, Subject, Observable, Subscription } from 'rxjs';\r\nimport { throttleTime, debounceTime } from 'rxjs/operators';\r\nimport { animationFrame } from 'rxjs/internal/scheduler/animationFrame';\r\n\r\ninterface ScrollElement {\r\n  element: HTMLElement,\r\n  id: string\r\n}\r\n\r\ninterface ScrollSpy {\r\n  elements: ScrollElement[];\r\n  currentSectionId: string;\r\n  subject: Subject<string>;\r\n  clickChange?: boolean //å¤æ­æ¯å¦æ¯ç¹å»å¯¼è´çé¡µé¢æ»å¨\r\n}\r\n\r\ninterface ScrollSpies {\r\n  [scrollSpyId: string]: ScrollSpy\r\n}\r\n\r\ninterface ScrollFollow {\r\n  element: HTMLElement,\r\n  id: string\r\n}\r\ninterface ScrollFollowSpipes {\r\n  [scrollFollowId: string]: ScrollFollow[]\r\n}\r\n\r\ninterface ScrollContents {\r\n  [scrollFollowId: string]: HTMLElement\r\n}\r\ninterface Offsets {\r\n  [scrollFollowId: string]: number\r\n}\r\n\r\ninterface ScrollChange {\r\n  [scrollFollowId: string]: Subject<any>\r\n}\r\n\r\ninterface CurrentId {\r\n  subject: Subject<string>;\r\n  idValue: string\r\n}\r\ninterface CurrentIdObj {\r\n  [groupId: string]: CurrentId\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FarrisScrollSpyService implements OnDestroy {\r\n  // çå¬åºåå½åæ¶åçæ ·å¼\r\n  private scrollSpyPartActiveClsName = 'f-scrollspy-part-active';\r\n  private fixedTabContainerClsName = 'f-scrollspy-container-fixed';\r\n  private parentFixedTabContainerClsName='f-scrollspy-container-fixed-parent';\r\n  private scrollSubscription: Subscription;\r\n  /**è¢«çå¬æ»å¨çcontents */\r\n  scrollContents: ScrollContents = {};\r\n  /**è¢«çå¬æ»å¨çsections*/\r\n  scrollSpies: ScrollSpies = {};\r\n  /**çå¬æ»å¨çéç¹é¨å */\r\n  scrollFollowSpipes: ScrollFollowSpipes = {};\r\n  private scrollSpyListFollowTypeChanges = {};\r\n\r\n\r\n  /**æ»å¨çå¬åç§»è·ç¦» */\r\n  offsets: Offsets = {};\r\n  /**é»è®¤çå¬åç»åç§° */\r\n  defaultId: string = 'default';\r\n\r\n  // currentSectionId: Subject<any> = new Subject();\r\n\r\n  currentSectionIdObj: CurrentIdObj = {};\r\n  //è·åcurrentid\r\n  getCurrentSectionId(groupId: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    return this.currentSectionIdObj[groupId].subject;\r\n    // return this.currentSectionId;\r\n  }\r\n  //æ»å¨ååæ¶æ¹åcurrentid\r\n  setCurrentSectionId(groupId: string, value: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    this.currentSectionIdObj[groupId].subject.next(value);\r\n    //console.log(this.currentSectionIdObj);\r\n    // this.currentSectionId.next(value);\r\n  }\r\n  //è®¾ç½®ä¸ågroupç»çcurrentid\r\n  setCurrentSectionIdObj(groupId: string, value: string) {\r\n    if (!groupId) {\r\n      groupId = this.defaultId;\r\n    }\r\n    if (!this.currentSectionIdObj[groupId]) {\r\n      this.currentSectionIdObj[groupId] = {\r\n        subject: new Subject(),\r\n        idValue: value\r\n      } as CurrentId;\r\n    }\r\n    else {\r\n      this.currentSectionIdObj[groupId].idValue = value;\r\n    }\r\n    setTimeout(() => {\r\n      if(this.scrollFollowSpipes[groupId] && this.scrollFollowSpipes[groupId].length){\r\n        let item = this.scrollFollowSpipes[groupId].find(scrollFollowItem=>{\r\n          return scrollFollowItem['id'] == this.currentSectionIdObj[groupId].idValue;\r\n        })\r\n        if(item){\r\n          this.fScrollFollowClick(groupId,item);\r\n        }\r\n      }\r\n    }, 0);\r\n    // this.fScrollFollowClick(key,follow);\r\n  }\r\n\r\n\r\n  scrollChange: ScrollChange = {};\r\n\r\n\r\n  constructor(public ngzone: NgZone) { }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.scrollSubscription.unsubscribe();\r\n  }\r\n\r\n  /**Observeré¨å ä¾æä»¤åå§åè°ç¨ */\r\n  // public getCurrentSection$(scrollSpyId: string = this.defaultId): Observable<string> {\r\n  //   if(scrollSpyId !== ''){\r\n  //     return this.scrollChange[scrollSpyId];\r\n  //   }\r\n  //   else{\r\n  //     return this.scrollChange[this.defaultId];\r\n  //   }\r\n  // }\r\n\r\n  public updateScrollGroup(scrollSpyId: string = this.defaultId) {\r\n    const groupId = scrollSpyId !== '' ? scrollSpyId : this.defaultId;\r\n    if (!this.scrollChange[groupId]) {\r\n      this.scrollChange[groupId] = new Subject();\r\n    }\r\n    return this.scrollChange[groupId];\r\n  }\r\n    private findMinInToViewElement(eles, $scrollContainer,offset){\r\n     // è·åä¿¡æ¯\r\n     let scrollInfo=this.getBoundaryInfo( $scrollContainer,offset);\r\n              \r\n     let len = eles.length;\r\n     // [{el:åç´ ,top:é¡¶,height:é«åº¦}]\r\n     let recordEles = [];\r\n     let result=[];\r\n     // å¤æ­æ¯å¦å¨è§å£\r\n     let findInView = false;\r\n     for (var k = 0; k < len; k++) {\r\n       recordEles.push({ id: eles[k].id, top: eles[k].element.offsetTop, height: eles[k].element.offsetHeight});\r\n      // recordEles[k]['ratio']=(recordEles[k]['top']+recordEles[k]['height'])/scrollInfo.contentHeight\r\n     }\r\n       var minIndex, temp;\r\n       for (var i = 0; i < len - 1; i++) {\r\n           minIndex = i;\r\n           for (var j = i + 1; j < len; j++) {\r\n               if (recordEles[j].top < recordEles[minIndex].top) {//å¯»æ¾æå°çæ°\r\n                   minIndex = j;  //å°æå°æ°çç´¢å¼ä¿å­\r\n               }\r\n           }\r\n           temp = recordEles[i];\r\n           recordEles[i] = recordEles[minIndex];\r\n           recordEles[minIndex] = temp;\r\n       }\r\n     if(scrollInfo.top>scrollInfo.min){\r\n         // scrollTop æ»å¨å°æåå©ä¸å¨çé¢ä¸çåç´ å¤ä¸ªåç´ ä¸è½æ ¹æ®offsetTopæ¥å¤æ­ï¼åºè¯¥æ¾ç¤ºåªä¸ªï¼æç§æ¯ä¾æ¥è®¡ç®\r\n         let scrollTopRatio=(scrollInfo.top-scrollInfo.min)/scrollInfo.boundary;\r\n                // å¤æ­topçä½ç½®\r\n        //let ratioReferHeight=scrollInfo.boundary+scrollInfo.fixedHeight;\r\n        let elRatio=0;\r\n                for(var k=0;k<len;k++){\r\n            //recordEles[k]['radio']=(recordEles[k]['top']+recordEles[k]['height']-scrollInfo.min)/ratioReferHeight;\r\n            if(recordEles[k].top-scrollInfo.offset>=scrollInfo.top||recordEles[k].top+recordEles[k].height-scrollInfo.offset>scrollInfo.top){\r\n             elRatio=(recordEles[k]['top']+recordEles[k]['height'])/scrollInfo.contentHeight;\r\n             if(!findInView&&scrollTopRatio<=elRatio){\r\n               findInView=true;\r\n               result.push(recordEles[k].id);\r\n               break;\r\n             }\r\n           }\r\n                }\r\n        if(result.length==0){\r\n         // æ²¡æ¾å°ï¼å°±è¿åæå¤§ç\r\n         return [recordEles[len-1].id];\r\n       }\r\n       return [result[0]]; \r\n     }else{\r\n       // é¡µé¢è¾é¿æ¶ï¼æç§scrollTopåoffsetTopæ¯è¾\r\n       for(var k=0;k<len;k++){\r\n         // å°äºç­äºï¼èèå°å®¹å¨æåä¸é´è·çæåµ\r\n          if(recordEles[k].top-scrollInfo.offset<=scrollInfo.top&&recordEles[k].top+recordEles[k].height-scrollInfo.offset>=scrollInfo.top){\r\n             result.push(recordEles[k].id);\r\n             break;\r\n         }\r\n       }\r\n       if(result.length==0){\r\n         // æ²¡æ¾å°ï¼å°±è¿åæå°ç\r\n         return [recordEles[0].id];\r\n       }       \r\n       return [result[result.length-1]]; \r\n     }                       \r\n    }\r\n  private getBoundaryInfo($scrollContainer,offset){\r\n    let fixedHeight=$scrollContainer.offsetHeight;\r\n    let realRatio=($scrollContainer.scrollHeight-fixedHeight )/fixedHeight;\r\n        let maxRound=Math.ceil(realRatio);\r\n        let minRound=maxRound-1>0?maxRound-1:0;\r\n    // // ä¸ä¸é´è·,æ­¤å¤å½±åæ¯ä¾çè®¡ç®ï¼è¯æ³å®¹å¨æåä¸é´è·ï¼åç´ çoffsetTopä¸å¯è½ä¸º0ï¼ä½æ¯å®¹å¨çscrollTopåå§ä¸º0\r\n    let scrollContainerPaddingTop=parseFloat(getComputedStyle($scrollContainer,null).paddingTop);\r\n    // let(element.currentStyle? element.currentStyle : window.getComputedStyle(element, null)).height);\r\n    return  {\r\n      offset:offset?offset:scrollContainerPaddingTop,\r\n      top:$scrollContainer.scrollTop,\r\n      bottom:$scrollContainer.scrollTop + fixedHeight,\r\n      fixedHeight:fixedHeight,\r\n      contentHeight:$scrollContainer.scrollHeight,\r\n      min:minRound*fixedHeight,\r\n      boundary:$scrollContainer.scrollHeight-(minRound+1)*fixedHeight\r\n    }// ä»¥offsetHeightä¸ºåº¦éï¼è®°å½offsetTopä¸è¶³ä¸ä¸ªé«åº¦çå·ä½é¿åº¦,\r\n  }\r\n  /**contenté¨åæ»å¨äºä»¶çå¬ */\r\n  private subscribeScroll(key: string): void {\r\n    this.ngzone.runOutsideAngular(() => {\r\n      this.scrollSubscription = fromEvent(this.scrollContents[key], 'scroll')\r\n        .pipe(debounceTime(100, animationFrame))\r\n        .subscribe((): void => {\r\n          if (this.scrollSpies[key]) {\r\n            const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n            const findMinInViewIds= this.findMinInToViewElement(elements,this.scrollContents[key],this.offsets[key]);          \r\n            if (!findMinInViewIds || !findMinInViewIds.length) {\r\n              return;\r\n            }\r\n            const topElementId: string =findMinInViewIds[0];\r\n            //å¤æ­ ç¹å»æ¯å¦æ¯ç¹å»å¼èµ·çæ»å¨\r\n            if (this.scrollSpies[key].clickChange) {\r\n              this.scrollSpies[key].clickChange = false;\r\n              return;\r\n            }\r\n            else {\r\n              this.scrollSpies[key].clickChange = false;\r\n              if (topElementId !== currentSectionId) {\r\n                this.scrollSpies[key].currentSectionId = topElementId;\r\n                this.ngzone.run(() => {\r\n                  subject.next(topElementId);\r\n                })\r\n              }\r\n            }\r\n          }\r\n        })\r\n\r\n    });\r\n  }\r\n  /**tabé¨åç¹å»äºä»¶çå¬ */\r\n  private subscribeClick(key): void {\r\n    //Object.keys(this.scrollFollowSpipes).forEach((key:string):void=>{\r\n    if (this.scrollFollowSpipes[key] && this.scrollFollowSpipes[key].length) {\r\n      this.scrollFollowSpipes[key].forEach((follow) => {\r\n        fromEvent(follow.element, 'click')\r\n          .pipe(throttleTime(100))\r\n          .subscribe((event) => {\r\n            event.stopPropagation();\r\n            this.fScrollFollowClick(key, follow);\r\n            // if(this.scrollSpies[key]){\r\n\r\n            //   const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n            //   this.scrollSpies[key].clickChange = true;\r\n            //   if(follow.id !== currentSectionId){\r\n            //     const topElementInView = elements.find(el => el.id === follow.id);\r\n            //     if(!topElementInView) { return; }\r\n            //     this.scrollSpies[key].currentSectionId = follow.id;\r\n            //     //this.scrollContents[key].offsetTop\r\n            //     this.scrollContents[key].scrollTop = Math.round(topElementInView.element.offsetTop - this.offsets[key]);\r\n            //     subject.next(follow.id);\r\n            //   }\r\n\r\n            // }\r\n\r\n          })\r\n      })\r\n    }\r\n    //});\r\n  }\r\n\r\n  fScrollFollowClick(key, follow){\r\n    if(this.scrollSpies[key]){\r\n      const { currentSectionId, elements, subject } = this.scrollSpies[key];\r\n      this.scrollSpies[key].clickChange = true;\r\n      if (follow.id !== currentSectionId) {\r\n        const topElementInView = elements.find(el => el.id === follow.id);\r\n        if (!topElementInView) { return; }\r\n        this.scrollSpies[key].currentSectionId = follow.id;\r\n        //this.scrollContents[key].offsetTop\r\n        if (this.scrollContents[key]) {\r\n          // åå®¹å»ææ»å¨\r\n          this.scrollContents[key].scrollTop = Math.round(topElementInView.element.offsetTop - this.offsets[key]- parseInt(getComputedStyle(this.scrollContents[key]).paddingTop,10));\r\n        }\r\n        subject.next(follow.id);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**æ·»å éè¦è¢«æ»å¨çå¬é¨å */\r\n  public addContentElement(element: HTMLElement, contentId = this.defaultId): void {\r\n    if (contentId !== '') {\r\n      this.scrollContents[contentId] = element;\r\n      this.subscribeScroll(contentId);\r\n    }\r\n    else {\r\n      this.scrollContents[this.defaultId] = element;\r\n      this.subscribeScroll(this.defaultId);\r\n    }\r\n    // å¤æ­æ¯æå¾æ¹åçç¶æ\r\n    this.updateContainerClsName(contentId);\r\n  }\r\n  /**ç§»é¤éè¦è¢«æ»å¨çå¬é¨ååç´  */\r\n  public removeContentElement(contentId = this.defaultId): void {\r\n    const removeId = contentId !== '' ? contentId : this.defaultId;\r\n    delete this.scrollSpies[removeId];\r\n  }\r\n  /**æ·»å æ»å¨çå¬tabé¨ååç´ */\r\n  public addFollowElement(element: HTMLElement, followId, followContentId = this.defaultId): void {\r\n    const groupId = followContentId !== '' ? followContentId : this.defaultId;\r\n\r\n    const follow = {\r\n      element: element,\r\n      id: followId\r\n    };\r\n    if (!this.scrollFollowSpipes[groupId]) {\r\n      this.scrollFollowSpipes[groupId] = []\r\n    }\r\n    //-------------------------æ­¤å¤æ²¡æå¤çéå¤ID\r\n    const follows = this.scrollFollowSpipes[groupId];\r\n    follows.push(follow);\r\n    this.scrollFollowSpipes[groupId] = follows;\r\n    this.subscribeClick(groupId);\r\n  }\r\n  /**ç§»é¤æ»å¨çå¬tabé¨ååç´  */\r\n  public removeFollowElement(followId, followContentId = this.defaultId): void {\r\n    const elements = this.scrollFollowSpipes[followContentId].filter(el => {\r\n      return el.id !== followId;\r\n    })\r\n    if (!elements.length) {\r\n      delete this.scrollFollowSpipes[followContentId];\r\n      return;\r\n    }\r\n    this.scrollFollowSpipes[followContentId] = elements;\r\n  }\r\n  /**æ·»å æ»å¨çå¬éç¹é¨ååç´  */\r\n  public addElement(element: HTMLElement, scrollId: string, scrollGroupId: string = this.defaultId): void {\r\n    if (!this.scrollSpies[scrollGroupId]) {\r\n      this.scrollSpies[scrollGroupId] = {\r\n        elements: [],\r\n        currentSectionId: '',\r\n        subject: new Subject(),\r\n      } as ScrollSpy;\r\n\r\n      this.scrollSpies[scrollGroupId].subject\r\n        .subscribe((currentSection: string): void => {\r\n          if (this.scrollChange[scrollGroupId]) {\r\n            this.scrollChange[scrollGroupId].next(currentSection);\r\n          }\r\n        });\r\n\r\n    }\r\n\r\n    if (this.hasElement(scrollId, scrollGroupId)) {\r\n      return;\r\n    }\r\n\r\n    const el: ScrollElement = {\r\n      element: element,\r\n      id: scrollId\r\n    }\r\n    // å å¥æ¶ï¼å¤æ­æ¯å¦æ¯å½å\r\n    this.updateScrollSpyActiveClsName(scrollGroupId,el);\r\n    const elements: any[] = this.scrollSpies[scrollGroupId].elements;\r\n    elements.push(el);\r\n    elements.sort((a, b): number => b.element.getBoundingClientRect().top - a.element.getBoundingClientRect().top);\r\n\r\n    this.scrollSpies[scrollGroupId].elements = elements;\r\n  }\r\n  /**ç§»é¤æ»å¨çå¬éç¹é¨ååç´  */\r\n  public removeElement(scrollId: string, scrollGroupId: string = this.defaultId): void {\r\n    const elements = this.scrollSpies[scrollGroupId].elements.filter((el): boolean => {\r\n      return el.id !== scrollId\r\n    }\r\n    );\r\n    if (!elements.length) {\r\n      delete this.scrollSpies[scrollGroupId];\r\n      return;\r\n    }\r\n    this.scrollSpies[scrollGroupId].elements = elements;\r\n  }\r\n  /**å¤æ­scrollGroupId æ¯å¦æidåä¸ºelementId çåç´  */\r\n  private hasElement(elementId: string, scrollGroupId: string): boolean {\r\n    return this.scrollSpies[scrollGroupId].elements.some((element): boolean => element.id === elementId);\r\n  }\r\n  /**è®¾ç½®offset */\r\n  public setOffset(offset: number = 0, contentId: string = this.defaultId): void {\r\n    if (contentId !== '') {\r\n      this.offsets[contentId] = offset;\r\n    }\r\n    else {\r\n      this.offsets[this.defaultId] = offset;\r\n    }\r\n  }\r\n  /*ScrollSpyç»ä»¶(éç¹åè¡¨åºåï¼åå§åé¢è®¾defaultId */\r\n  setGroupId(groupid) {\r\n    if (groupid) {\r\n      this.defaultId = groupid;\r\n    }\r\n  }\r\n\r\n  getGroupId() {\r\n    return this.defaultId;\r\n  }\r\n  /*æ¹å ScrollSpyç»ä»¶ï¼éç¹åè¡¨åºåï¼çæ¾ç¤ºç¶ææ¶ */\r\n  changeGroupIdFollowType(groupid, followTypeData) {\r\n    this.scrollSpyListFollowTypeChanges[groupid] = followTypeData;\r\n    this.updateContainerClsName(groupid);\r\n  }\r\n  private updateContainerClsName(groupid) {\r\n    // æ²¡æå¾æ´æ°åå\r\n    if (!this.scrollSpyListFollowTypeChanges.hasOwnProperty(groupid)) {\r\n      return;\r\n    }\r\n    // containerå¹¶ä¸å­å¨çæ¶å\r\n    if (!this.scrollContents.hasOwnProperty(groupid)) {\r\n      return;\r\n    }\r\n    let followTypeData = this.scrollSpyListFollowTypeChanges[groupid];\r\n    let containerEl = this.scrollContents[groupid];\r\n    // ContainerçElement \r\n    if (followTypeData['prev'] == 'fixedTab') {\r\n      //ç§»é¤class\r\n      containerEl.className = containerEl.className.replace(this.fixedTabContainerClsName, '');\r\n      containerEl.parentElement.classList.remove(this.parentFixedTabContainerClsName);\r\n    } else if (followTypeData['next'] == 'fixedTab') {\r\n      // å¢å class\r\n      containerEl.className += ' ' + this.fixedTabContainerClsName;\r\n      // ç»ç¶åç´ å¢å é«åº¦\r\n      containerEl.parentElement.classList.add(this.parentFixedTabContainerClsName);\r\n    }\r\n    this.scrollSpyListFollowTypeChanges[groupid] = null;\r\n  }\r\n\r\n  updateScrollSpiesActiveClsName(groupId,currentId) {\r\n    // è¿½å ãç§»é¤class\r\n    this.scrollSpies[groupId].elements.map((item: ScrollElement) => {\r\n      if (item.id == currentId) {\r\n        // æ¾å°å½å\r\n        if (item.element.className.indexOf(this.scrollSpyPartActiveClsName) < 0) {\r\n          item.element.className += ' ' + this.scrollSpyPartActiveClsName;\r\n        }\r\n      } else {\r\n        // å¶ä»\r\n        item.element.className = item.element.className.replace(this.scrollSpyPartActiveClsName, '');\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * å½è¿½å ScrollSpyåçæ¶åï¼å¤æ­æ¯å¦æ¯å·²ç»è®¾ç½®çå½å\r\n   * @param groupId \r\n   * @param scrollEl \r\n   */\r\n  private  updateScrollSpyActiveClsName(groupId,scrollEl:ScrollElement){\r\n    // å¦æå·²è®¾ç½®\r\n    if(this.currentSectionIdObj[groupId]){\r\n      if(this.currentSectionIdObj[groupId]['idValue']==scrollEl.id){\r\n        scrollEl.element.className+=' '+this.scrollSpyPartActiveClsName;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","export function getUuid () {\r\n    var s = [];\r\n    var hexDigits = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n    for (var i = 0; i < 36; i++) {\r\n      s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n    }\r\n    s[14] = \"4\";\r\n    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n    s[8] = s[13] = s[18] = s[23] = \"-\";\r\n    let uuid = s.join(\"\");\r\n    return uuid;\r\n}","import { Component, OnInit, Input, ElementRef, AfterViewInit, OnDestroy, Directive, TemplateRef, ContentChild, ViewChild, ChangeDetectorRef, ViewEncapsulation} from '@angular/core';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\nimport { Subject } from 'rxjs';\r\nimport { getUuid } from './utils';\r\nimport {ComponentTemplateRef}from '@farris/ui-common';\r\n\r\n@Directive({\r\n    selector: '[scrollspyItem]'\r\n  })\r\n  export class ScrollspyItemTemplateDirective {\r\n    constructor(public template: TemplateRef<any>) {}\r\n  }\r\n\r\nexport interface scrollspyData {\r\n    \"id\": string,\r\n    \"title\": string,\r\n    \"visible\"?: boolean\r\n  }\r\n// æ»å¨çå¬åè¡¨ï¼æ¾ç¤ºæ¨¡å¼æ¹åï¼æåºäºä»¶ç»æ\r\ninterface SpyListFollowTypeChange{\r\n  prev:string,\r\n  next:string\r\n}\r\n\r\n@Component({\r\n  selector: 'farris-scrollspy',\r\n  templateUrl:'./farris-scrollspy.component.html',\r\n  styleUrls:[\r\n    './farris-scrollspy.component.scss'\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ScrollspyComponent implements OnInit,AfterViewInit {\r\n    @Input() ctx=null;\r\n    // æ»å¨çå¬é¡¹æ¨¡æ¿\r\n    @Input() scrollspyItemComponentType: ComponentTemplateRef;\r\n    @ContentChild(ScrollspyItemTemplateDirective, {read: TemplateRef}) scrollspyTemplate: TemplateRef<any>;\r\n    /**æ»å¨æ°æ®åè¡¨ */\r\n    // @Input() scrollspyData:scrollspyData[];\r\n    /**å½åactiveé¨åid */\r\n    @Input() currentSectionId:string;\r\n    /**å½åæ»å¨æægroup */\r\n    @Input() scrollGroupId:string = getUuid();\r\n    /**å½åæ»å¨æ¾ç¤ºæ ·å¼ï¼é»è®¤ side å¯éåæ° tabãfixedTab */\r\n    private _followType='side';\r\n    // è®°å½ç¶ææ¹å\r\n    private _emitFollowType:SpyListFollowTypeChange=null;\r\n    @Input() \r\n    set fFollowType(value:string){\r\n      if(value!==this._followType){\r\n        this._emitFollowType={\r\n          prev:this._followType,\r\n          next:value\r\n        };\r\n        this.changeFollowType();\r\n        this._followType=value;\r\n      }\r\n    }    \r\n    get fFollowType():string{\r\n      return this._followType;\r\n    }\r\n\r\n    @Input() sidetabWidth:number = 145;\r\n\r\n    @ViewChild(\"scrollyspyList\") scrollyspyListEl;\r\n\r\n    _scrollspyData:scrollspyData[];\r\n\r\n    @Input()\r\n    set scrollspyData(value){\r\n      if(value){\r\n        this._scrollspyData = value.filter((item) =>{\r\n          if(item.hasOwnProperty('visible') && !item.visible){\r\n            return false\r\n          }\r\n          else{\r\n            return true;\r\n          }\r\n        });\r\n        if(this._scrollspyData && this._scrollspyData.length && !this.currentSectionId ){\r\n          this.currentSectionId = this._scrollspyData[0].id;\r\n        }\r\n        this.scrollSpy.setCurrentSectionIdObj(this.scrollGroupId, this.currentSectionId);\r\n      }\r\n    }\r\n    get scrollspyData(){\r\n      return this._scrollspyData;\r\n    }\r\n\r\n\r\n    constructor( private elementRef: ElementRef, private scrollSpy: FarrisScrollSpyService,private changeDetector: ChangeDetectorRef, ) { }\r\n\r\n    ngOnInit() {\r\n      // if(this.scrollspyData && this.scrollspyData.length && !this.currentSectionId ){\r\n      //   this.currentSectionId = this.scrollspyData[0].id;\r\n      // }\r\n      // this.scrollSpy.setCurrentSectionIdObj(this.scrollGroupId, this.currentSectionId);\r\n      // console.log(this.scrollGroupId);\r\n      this.scrollSpy.setGroupId(this.scrollGroupId);\r\n      this.changeFollowType();\r\n      // è·åå½åSectionçId\r\n      this.scrollSpy.getCurrentSectionId(this.scrollGroupId).subscribe((currentId)=>{\r\n        this.currentSectionId = currentId;\r\n        this.scrollSpy.updateScrollSpiesActiveClsName(this.scrollGroupId,currentId);\r\n      });\r\n\r\n      // è·åå¯¹åºContaineråºåï¼å¨æ»å¨æ¶çå½åSectionçåå\r\n      this.scrollSpy.updateScrollGroup(this.scrollGroupId).subscribe((currentSection: string): void => {\r\n\r\n          this.scrollSpy.setCurrentSectionId(this.scrollGroupId,currentSection);\r\n          \r\n        });\r\n    }\r\n    // æ¹åFollowTypeæ¶\r\n    changeFollowType(){\r\n      if(this.scrollGroupId&&this._emitFollowType){\r\n        this.scrollSpy.changeGroupIdFollowType(this.scrollGroupId,this._emitFollowType);\r\n        this._emitFollowType=null;\r\n      }\r\n    }\r\n    ngAfterViewInit(): void {\r\n        /**å½æ»å¨ä½ç½®ä¸ºsideæ¶ï¼è¯¥ç»ä»¶æè¿ç¶èç¹æ·»å relativeå®ä½ */\r\n        const parent = this.elementRef.nativeElement.parentElement;\r\n        if(!parent.style.position && parent.style.position !== 'relative' && this.fFollowType === 'side'){\r\n            parent.style.position = 'relative';\r\n        }\r\n        // if(this.scrollspyData && this.scrollspyData.length && this.currentSectionId){\r\n        //   if(this.currentSectionId !== this.scrollspyData[0].id){\r\n        //     console.log(222);\r\n        //     const element = this.scrollyspyListEl.nativeElement.querySelector(\"#scrollspy-\"+this.currentSectionId);\r\n        //     const follow = {\r\n        //       element: element,\r\n        //       id: this.currentSectionId\r\n        //     };\r\n        //     const groupId = this.scrollGroupId ? this.scrollGroupId: 'default';\r\n        //     this.scrollSpy.fScrollFollowClick(groupId,follow);\r\n        //   }\r\n        // }\r\n        \r\n    }\r\n\r\n}","import { Directive, Injectable, Input, EventEmitter, Output, ElementRef, OnInit, OnDestroy, AfterViewInit, ChangeDetectorRef, HostBinding } from '@angular/core';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\n//éç¹é¨å\r\n@Directive({\r\n    selector: '[fScrollSpy]'\r\n})\r\nexport class FarrisScrollSpyDirective implements OnInit,AfterViewInit, OnDestroy {\r\n    @Input('fScrollSpy') scrollId: string;\r\n    @Input('fScrollGroup') scrollGroupId: string;\r\n  \r\n    constructor(\r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      this.elementRef.nativeElement.className+=' f-scrollspy-part';\r\n      if(!this.scrollGroupId){\r\n        this.scrollGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      //this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);\r\n    }\r\n    ngAfterViewInit(){\r\n      this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);\r\n    }\r\n  \r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeElement(this.scrollId, this.scrollGroupId);\r\n    }\r\n  }\r\n//è·éç¹å»\r\n@Directive({\r\n    selector: '[fScrollFollowElement]'\r\n})\r\nexport class FscrollFollowElementDirective implements OnInit, OnDestroy {\r\n\r\n    //@Input() followId: string;\r\n    @Input('fScrollFollowElement') followId:string;\r\n    @Input('fScrollElement') followGroupId:string;\r\n    constructor(\r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      if(!this.followGroupId){\r\n        this.followGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      this.scrollSpy.addFollowElement(this.elementRef.nativeElement, this.followId, this.followGroupId);\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeFollowElement(this.followId, this.followGroupId);\r\n    }\r\n\r\n  }\r\n\r\n//çå¬æ»å¨é¨åcontent\r\n@Directive({\r\n    selector: '[fScrollSpyContainer]'\r\n})\r\nexport class FscrollSpyContainerDirective implements OnInit,AfterViewInit, OnDestroy {\r\n  \r\n  @Input() fOffset:number;\r\n  @Input('fScrollSpyContainer') fScrollGroupId:string;\r\n  @Output() fScrollChange = new EventEmitter;\r\n\r\n  @HostBinding(\"style.position\") position = \"relative\";\r\n\r\n    constructor( \r\n      private elementRef: ElementRef,\r\n      private scrollSpy: FarrisScrollSpyService,\r\n      private changeDetector: ChangeDetectorRef,\r\n    ) {}\r\n  \r\n    public ngOnInit(): void {\r\n      if(!this.fScrollGroupId){\r\n        this.fScrollGroupId = this.scrollSpy.getGroupId();\r\n      }\r\n      this.elementRef.nativeElement.className+=' f-scrollspy-container';\r\n      this.scrollSpy.addContentElement(this.elementRef.nativeElement, this.fScrollGroupId);\r\n      this.scrollSpy.setOffset(this.fOffset, this.fScrollGroupId);\r\n      this.scrollSpy.updateScrollGroup(this.fScrollGroupId).subscribe((currentSection: string): void => {\r\n        //console.log('111',currentSection);\r\n        // bugNum:465991\r\n        // console.log('section-group'+currentSection);\r\n          this.fScrollChange.emit(currentSection);\r\n\r\n          // this.scrollSpy.setCurrentSectionId(this.fScrollGroupId,currentSection);\r\n\r\n          // this.changeDetector.markForCheck();\r\n        });\r\n    }\r\n  \r\n    ngAfterViewInit(){\r\n      // this.scrollSpy.getCurrentSection$(this.fScrollGroupId)\r\n      // .subscribe((currentSection: string): void => {\r\n      //   this.fScrollChange.next(currentSection);\r\n      //   this.changeDetector.markForCheck();\r\n      // });\r\n\r\n    }\r\n    public ngOnDestroy(): void {\r\n      this.scrollSpy.removeContentElement(this.fScrollGroupId);\r\n    }\r\n\r\n  }","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FarrisScrollSpyDirective, FscrollFollowElementDirective, FscrollSpyContainerDirective } from './farris-scrollspy.directive';\r\nimport { ScrollspyComponent,ScrollspyItemTemplateDirective } from './farris-scrollspy.component';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\nimport { FarrisScrollSpyService } from './farris-scrollspy.service';\r\nimport {FarrisCommonModule} from '@farris/ui-common';\r\n\r\n@NgModule({\r\n  declarations: [ScrollspyComponent,ScrollspyItemTemplateDirective,FarrisScrollSpyDirective,FscrollFollowElementDirective,FscrollSpyContainerDirective],\r\n  imports: [\r\n    CommonModule,\r\n    AngularDraggableModule,\r\n    LocaleModule.forRoot(),\r\n    FarrisCommonModule\r\n  ],\r\n  providers:[\r\n    FarrisScrollSpyService\r\n  ],\r\n  exports: [ScrollspyComponent,ScrollspyItemTemplateDirective,FarrisScrollSpyDirective,FscrollFollowElementDirective,FscrollSpyContainerDirective]\r\n})\r\nexport class ScrollspyModule { }\r\n"],"names":[],"mappings":"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"}
