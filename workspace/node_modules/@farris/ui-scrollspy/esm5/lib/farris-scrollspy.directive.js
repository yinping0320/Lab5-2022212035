/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, EventEmitter, Output, ElementRef, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisScrollSpyService } from './farris-scrollspy.service';
//锚点部分
var FarrisScrollSpyDirective = /** @class */ (function () {
    function FarrisScrollSpyDirective(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    FarrisScrollSpyDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.elementRef.nativeElement.className += ' f-scrollspy-part';
        if (!this.scrollGroupId) {
            this.scrollGroupId = this.scrollSpy.getGroupId();
        }
        //this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);
    };
    /**
     * @return {?}
     */
    FarrisScrollSpyDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId, this.scrollGroupId);
    };
    /**
     * @return {?}
     */
    FarrisScrollSpyDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.scrollSpy.removeElement(this.scrollId, this.scrollGroupId);
    };
    FarrisScrollSpyDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[fScrollSpy]'
                },] }
    ];
    /** @nocollapse */
    FarrisScrollSpyDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: FarrisScrollSpyService }
    ]; };
    FarrisScrollSpyDirective.propDecorators = {
        scrollId: [{ type: Input, args: ['fScrollSpy',] }],
        scrollGroupId: [{ type: Input, args: ['fScrollGroup',] }]
    };
    return FarrisScrollSpyDirective;
}());
export { FarrisScrollSpyDirective };
if (false) {
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollId;
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollGroupId;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.scrollSpy;
}
//跟随点击
var FscrollFollowElementDirective = /** @class */ (function () {
    function FscrollFollowElementDirective(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    FscrollFollowElementDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.followGroupId) {
            this.followGroupId = this.scrollSpy.getGroupId();
        }
        this.scrollSpy.addFollowElement(this.elementRef.nativeElement, this.followId, this.followGroupId);
    };
    /**
     * @return {?}
     */
    FscrollFollowElementDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.scrollSpy.removeFollowElement(this.followId, this.followGroupId);
    };
    FscrollFollowElementDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[fScrollFollowElement]'
                },] }
    ];
    /** @nocollapse */
    FscrollFollowElementDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: FarrisScrollSpyService }
    ]; };
    FscrollFollowElementDirective.propDecorators = {
        followId: [{ type: Input, args: ['fScrollFollowElement',] }],
        followGroupId: [{ type: Input, args: ['fScrollElement',] }]
    };
    return FscrollFollowElementDirective;
}());
export { FscrollFollowElementDirective };
if (false) {
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followId;
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followGroupId;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.scrollSpy;
}
//监听滚动部分content
var FscrollSpyContainerDirective = /** @class */ (function () {
    function FscrollSpyContainerDirective(elementRef, scrollSpy, changeDetector) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
        this.changeDetector = changeDetector;
        this.fScrollChange = new EventEmitter;
        this.position = "relative";
    }
    /**
     * @return {?}
     */
    FscrollSpyContainerDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.fScrollGroupId) {
            this.fScrollGroupId = this.scrollSpy.getGroupId();
        }
        this.elementRef.nativeElement.className += ' f-scrollspy-container';
        this.scrollSpy.addContentElement(this.elementRef.nativeElement, this.fScrollGroupId);
        this.scrollSpy.setOffset(this.fOffset, this.fScrollGroupId);
        this.scrollSpy.updateScrollGroup(this.fScrollGroupId).subscribe((/**
         * @param {?} currentSection
         * @return {?}
         */
        function (currentSection) {
            //console.log('111',currentSection);
            // bugNum:465991
            // console.log('section-group'+currentSection);
            _this.fScrollChange.emit(currentSection);
            // this.scrollSpy.setCurrentSectionId(this.fScrollGroupId,currentSection);
            // this.changeDetector.markForCheck();
        }));
    };
    /**
     * @return {?}
     */
    FscrollSpyContainerDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        // this.scrollSpy.getCurrentSection$(this.fScrollGroupId)
        // .subscribe((currentSection: string): void => {
        //   this.fScrollChange.next(currentSection);
        //   this.changeDetector.markForCheck();
        // });
    };
    /**
     * @return {?}
     */
    FscrollSpyContainerDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.scrollSpy.removeContentElement(this.fScrollGroupId);
    };
    FscrollSpyContainerDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[fScrollSpyContainer]'
                },] }
    ];
    /** @nocollapse */
    FscrollSpyContainerDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: FarrisScrollSpyService },
        { type: ChangeDetectorRef }
    ]; };
    FscrollSpyContainerDirective.propDecorators = {
        fOffset: [{ type: Input }],
        fScrollGroupId: [{ type: Input, args: ['fScrollSpyContainer',] }],
        fScrollChange: [{ type: Output }],
        position: [{ type: HostBinding, args: ["style.position",] }]
    };
    return FscrollSpyContainerDirective;
}());
export { FscrollSpyContainerDirective };
if (false) {
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fOffset;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollGroupId;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollChange;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.position;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.scrollSpy;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.changeDetector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLXNjcm9sbHNweS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNjcm9sbHNweS8iLCJzb3VyY2VzIjpbImxpYi9mYXJyaXMtc2Nyb2xsc3B5LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYyxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQW9DLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqSyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7QUFFcEU7SUFPSSxrQ0FDVSxVQUFzQixFQUN0QixTQUFpQztRQURqQyxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGNBQVMsR0FBVCxTQUFTLENBQXdCO0lBQ3hDLENBQUM7Ozs7SUFFRywyQ0FBUTs7O0lBQWY7UUFDRSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxTQUFTLElBQUUsbUJBQW1CLENBQUM7UUFDN0QsSUFBRyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUM7WUFDckIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ2xEO1FBQ0QsNkZBQTZGO0lBQy9GLENBQUM7Ozs7SUFDRCxrREFBZTs7O0lBQWY7UUFDRSxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3RixDQUFDOzs7O0lBRU0sOENBQVc7OztJQUFsQjtRQUNFLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7O2dCQXpCSixTQUFTLFNBQUM7b0JBQ1As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QUNNLGtEQUFXOzs7SUFBbEI7UUFDRSxJQUFJLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUMzRCxDQUFDOztnQkE5Q0osU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSx1QkFBdUI7aUJBQ3BDOzs7O2dCQTVENEQsVUFBVTtnQkFDOUQsc0JBQXNCO2dCQUQ0RSxpQkFBaUI7OzswQkErRHpILEtBQUs7aUNBQ0wsS0FBSyxTQUFDLHFCQUFxQjtnQ0FDM0IsTUFBTTsyQkFFTixXQUFXLFNBQUMsZ0JBQWdCOztJQXVDN0IsbUNBQUM7Q0FBQSxBQWhESCxJQWdERztTQTdDVSw0QkFBNEI7OztJQUV2QywrQ0FBd0I7O0lBQ3hCLHNEQUFvRDs7SUFDcEQscURBQTJDOztJQUUzQyxnREFBcUQ7Ozs7O0lBR2pELGtEQUE4Qjs7Ozs7SUFDOUIsaURBQXlDOzs7OztJQUN6QyxzREFBeUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEluamVjdGFibGUsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgRWxlbWVudFJlZiwgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQsIENoYW5nZURldGVjdG9yUmVmLCBIb3N0QmluZGluZyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGYXJyaXNTY3JvbGxTcHlTZXJ2aWNlIH0gZnJvbSAnLi9mYXJyaXMtc2Nyb2xsc3B5LnNlcnZpY2UnO1xyXG4vL+mUmueCuemDqOWIhlxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxTcHldJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzU2Nyb2xsU3B5RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcbiAgICBASW5wdXQoJ2ZTY3JvbGxTcHknKSBzY3JvbGxJZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdmU2Nyb2xsR3JvdXAnKSBzY3JvbGxHcm91cElkOiBzdHJpbmc7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICkge31cclxuICBcclxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lKz0nIGYtc2Nyb2xsc3B5LXBhcnQnO1xyXG4gICAgICBpZighdGhpcy5zY3JvbGxHcm91cElkKXtcclxuICAgICAgICB0aGlzLnNjcm9sbEdyb3VwSWQgPSB0aGlzLnNjcm9sbFNweS5nZXRHcm91cElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy90aGlzLnNjcm9sbFNweS5hZGRFbGVtZW50KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLnNjcm9sbElkLHRoaXMuc2Nyb2xsR3JvdXBJZCk7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKXtcclxuICAgICAgdGhpcy5zY3JvbGxTcHkuYWRkRWxlbWVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5zY3JvbGxJZCx0aGlzLnNjcm9sbEdyb3VwSWQpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5yZW1vdmVFbGVtZW50KHRoaXMuc2Nyb2xsSWQsIHRoaXMuc2Nyb2xsR3JvdXBJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4vL+i3n+maj+eCueWHu1xyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxGb2xsb3dFbGVtZW50XSdcclxufSlcclxuZXhwb3J0IGNsYXNzIEZzY3JvbGxGb2xsb3dFbGVtZW50RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIC8vQElucHV0KCkgZm9sbG93SWQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgnZlNjcm9sbEZvbGxvd0VsZW1lbnQnKSBmb2xsb3dJZDpzdHJpbmc7XHJcbiAgICBASW5wdXQoJ2ZTY3JvbGxFbGVtZW50JykgZm9sbG93R3JvdXBJZDpzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICkge31cclxuICBcclxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgaWYoIXRoaXMuZm9sbG93R3JvdXBJZCl7XHJcbiAgICAgICAgdGhpcy5mb2xsb3dHcm91cElkID0gdGhpcy5zY3JvbGxTcHkuZ2V0R3JvdXBJZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LmFkZEZvbGxvd0VsZW1lbnQodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRoaXMuZm9sbG93SWQsIHRoaXMuZm9sbG93R3JvdXBJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5yZW1vdmVGb2xsb3dFbGVtZW50KHRoaXMuZm9sbG93SWQsIHRoaXMuZm9sbG93R3JvdXBJZCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbi8v55uR5ZCs5rua5Yqo6YOo5YiGY29udGVudFxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2ZTY3JvbGxTcHlDb250YWluZXJdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRnNjcm9sbFNweUNvbnRhaW5lckRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCxBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG4gIFxyXG4gIEBJbnB1dCgpIGZPZmZzZXQ6bnVtYmVyO1xyXG4gIEBJbnB1dCgnZlNjcm9sbFNweUNvbnRhaW5lcicpIGZTY3JvbGxHcm91cElkOnN0cmluZztcclxuICBAT3V0cHV0KCkgZlNjcm9sbENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI7XHJcblxyXG4gIEBIb3N0QmluZGluZyhcInN0eWxlLnBvc2l0aW9uXCIpIHBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBcclxuICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICBwcml2YXRlIHNjcm9sbFNweTogRmFycmlzU2Nyb2xsU3B5U2VydmljZSxcclxuICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICApIHt9XHJcbiAgXHJcbiAgICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgIGlmKCF0aGlzLmZTY3JvbGxHcm91cElkKXtcclxuICAgICAgICB0aGlzLmZTY3JvbGxHcm91cElkID0gdGhpcy5zY3JvbGxTcHkuZ2V0R3JvdXBJZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTmFtZSs9JyBmLXNjcm9sbHNweS1jb250YWluZXInO1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5hZGRDb250ZW50RWxlbWVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5mU2Nyb2xsR3JvdXBJZCk7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnNldE9mZnNldCh0aGlzLmZPZmZzZXQsIHRoaXMuZlNjcm9sbEdyb3VwSWQpO1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS51cGRhdGVTY3JvbGxHcm91cCh0aGlzLmZTY3JvbGxHcm91cElkKS5zdWJzY3JpYmUoKGN1cnJlbnRTZWN0aW9uOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCcxMTEnLGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAvLyBidWdOdW06NDY1OTkxXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlY3Rpb24tZ3JvdXAnK2N1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgIHRoaXMuZlNjcm9sbENoYW5nZS5lbWl0KGN1cnJlbnRTZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAvLyB0aGlzLnNjcm9sbFNweS5zZXRDdXJyZW50U2VjdGlvbklkKHRoaXMuZlNjcm9sbEdyb3VwSWQsY3VycmVudFNlY3Rpb24pO1xyXG5cclxuICAgICAgICAgIC8vIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKXtcclxuICAgICAgLy8gdGhpcy5zY3JvbGxTcHkuZ2V0Q3VycmVudFNlY3Rpb24kKHRoaXMuZlNjcm9sbEdyb3VwSWQpXHJcbiAgICAgIC8vIC5zdWJzY3JpYmUoKGN1cnJlbnRTZWN0aW9uOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgLy8gICB0aGlzLmZTY3JvbGxDaGFuZ2UubmV4dChjdXJyZW50U2VjdGlvbik7XHJcbiAgICAgIC8vICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgLy8gfSk7XHJcblxyXG4gICAgfVxyXG4gICAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5yZW1vdmVDb250ZW50RWxlbWVudCh0aGlzLmZTY3JvbGxHcm91cElkKTtcclxuICAgIH1cclxuXHJcbiAgfSJdfQ==