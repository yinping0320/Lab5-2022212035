/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, EventEmitter, Output, ElementRef, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisScrollSpyService } from './farris-scrollspy.service';
//锚点部分
export class FarrisScrollSpyDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     */
    constructor(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.elementRef.nativeElement.className += ' f-scrollspy-part';
        if (!this.scrollGroupId) {
            this.scrollGroupId = this.scrollSpy.getGroupId();
        }
        //this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId,this.scrollGroupId);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.scrollSpy.addElement(this.elementRef.nativeElement, this.scrollId, this.scrollGroupId);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeElement(this.scrollId, this.scrollGroupId);
    }
}
FarrisScrollSpyDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollSpy]'
            },] }
];
/** @nocollapse */
FarrisScrollSpyDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService }
];
FarrisScrollSpyDirective.propDecorators = {
    scrollId: [{ type: Input, args: ['fScrollSpy',] }],
    scrollGroupId: [{ type: Input, args: ['fScrollGroup',] }]
};
if (false) {
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollId;
    /** @type {?} */
    FarrisScrollSpyDirective.prototype.scrollGroupId;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisScrollSpyDirective.prototype.scrollSpy;
}
//跟随点击
export class FscrollFollowElementDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     */
    constructor(elementRef, scrollSpy) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.followGroupId) {
            this.followGroupId = this.scrollSpy.getGroupId();
        }
        this.scrollSpy.addFollowElement(this.elementRef.nativeElement, this.followId, this.followGroupId);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeFollowElement(this.followId, this.followGroupId);
    }
}
FscrollFollowElementDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollFollowElement]'
            },] }
];
/** @nocollapse */
FscrollFollowElementDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService }
];
FscrollFollowElementDirective.propDecorators = {
    followId: [{ type: Input, args: ['fScrollFollowElement',] }],
    followGroupId: [{ type: Input, args: ['fScrollElement',] }]
};
if (false) {
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followId;
    /** @type {?} */
    FscrollFollowElementDirective.prototype.followGroupId;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollFollowElementDirective.prototype.scrollSpy;
}
//监听滚动部分content
export class FscrollSpyContainerDirective {
    /**
     * @param {?} elementRef
     * @param {?} scrollSpy
     * @param {?} changeDetector
     */
    constructor(elementRef, scrollSpy, changeDetector) {
        this.elementRef = elementRef;
        this.scrollSpy = scrollSpy;
        this.changeDetector = changeDetector;
        this.fScrollChange = new EventEmitter;
        this.position = "relative";
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.fScrollGroupId) {
            this.fScrollGroupId = this.scrollSpy.getGroupId();
        }
        this.elementRef.nativeElement.className += ' f-scrollspy-container';
        this.scrollSpy.addContentElement(this.elementRef.nativeElement, this.fScrollGroupId);
        this.scrollSpy.setOffset(this.fOffset, this.fScrollGroupId);
        this.scrollSpy.updateScrollGroup(this.fScrollGroupId).subscribe((/**
         * @param {?} currentSection
         * @return {?}
         */
        (currentSection) => {
            //console.log('111',currentSection);
            // bugNum:465991
            // console.log('section-group'+currentSection);
            this.fScrollChange.emit(currentSection);
            // this.scrollSpy.setCurrentSectionId(this.fScrollGroupId,currentSection);
            // this.changeDetector.markForCheck();
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // this.scrollSpy.getCurrentSection$(this.fScrollGroupId)
        // .subscribe((currentSection: string): void => {
        //   this.fScrollChange.next(currentSection);
        //   this.changeDetector.markForCheck();
        // });
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.scrollSpy.removeContentElement(this.fScrollGroupId);
    }
}
FscrollSpyContainerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fScrollSpyContainer]'
            },] }
];
/** @nocollapse */
FscrollSpyContainerDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: FarrisScrollSpyService },
    { type: ChangeDetectorRef }
];
FscrollSpyContainerDirective.propDecorators = {
    fOffset: [{ type: Input }],
    fScrollGroupId: [{ type: Input, args: ['fScrollSpyContainer',] }],
    fScrollChange: [{ type: Output }],
    position: [{ type: HostBinding, args: ["style.position",] }]
};
if (false) {
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fOffset;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollGroupId;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.fScrollChange;
    /** @type {?} */
    FscrollSpyContainerDirective.prototype.position;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.scrollSpy;
    /**
     * @type {?}
     * @private
     */
    FscrollSpyContainerDirective.prototype.changeDetector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzLXNjcm9sbHNweS5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNjcm9sbHNweS8iLCJzb3VyY2VzIjpbImxpYi9mYXJyaXMtc2Nyb2xsc3B5LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYyxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQW9DLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqSyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7QUFLcEUsTUFBTSxPQUFPLHdCQUF3Qjs7Ozs7SUFJakMsWUFDVSxVQUFzQixFQUN0QixTQUFpQztRQURqQyxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGNBQVMsR0FBVCxTQUFTLENBQXdCO0lBQ3hDLENBQUM7Ozs7SUFFRyxRQUFRO1FBQ2IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsU0FBUyxJQUFFLG1CQUFtQixDQUFDO1FBQzdELElBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFDO1lBQ3JCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztTQUNsRDtRQUNELDZGQUE2RjtJQUMvRixDQUFDOzs7O0lBQ0QsZUFBZTtRQUNiLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzdGLENBQUM7Ozs7SUFFTSxXQUFXO1FBQ2hCLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7OztZQXpCSixTQUFTLFNBQUM7Z0JBQ1AsUUFB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OUNKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsdUJBQXVCO2FBQ3BDOzs7O1lBNUQ0RCxVQUFVO1lBQzlELHNCQUFzQjtZQUQ0RSxpQkFBaUI7OztzQkErRHpILEtBQUs7NkJBQ0wsS0FBSyxTQUFDLHFCQUFxQjs0QkFDM0IsTUFBTTt1QkFFTixXQUFXLFNBQUMsZ0JBQWdCOzs7O0lBSjdCLCtDQUF3Qjs7SUFDeEIsc0RBQW9EOztJQUNwRCxxREFBMkM7O0lBRTNDLGdEQUFxRDs7Ozs7SUFHakQsa0RBQThCOzs7OztJQUM5QixpREFBeUM7Ozs7O0lBQ3pDLHNEQUF5QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5qZWN0YWJsZSwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBFbGVtZW50UmVmLCBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZhcnJpc1Njcm9sbFNweVNlcnZpY2UgfSBmcm9tICcuL2ZhcnJpcy1zY3JvbGxzcHkuc2VydmljZSc7XHJcbi8v6ZSa54K56YOo5YiGXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZlNjcm9sbFNweV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNTY3JvbGxTcHlEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICAgIEBJbnB1dCgnZlNjcm9sbFNweScpIHNjcm9sbElkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoJ2ZTY3JvbGxHcm91cCcpIHNjcm9sbEdyb3VwSWQ6IHN0cmluZztcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgIHByaXZhdGUgc2Nyb2xsU3B5OiBGYXJyaXNTY3JvbGxTcHlTZXJ2aWNlLFxyXG4gICAgKSB7fVxyXG4gIFxyXG4gICAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc05hbWUrPScgZi1zY3JvbGxzcHktcGFydCc7XHJcbiAgICAgIGlmKCF0aGlzLnNjcm9sbEdyb3VwSWQpe1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsR3JvdXBJZCA9IHRoaXMuc2Nyb2xsU3B5LmdldEdyb3VwSWQoKTtcclxuICAgICAgfVxyXG4gICAgICAvL3RoaXMuc2Nyb2xsU3B5LmFkZEVsZW1lbnQodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRoaXMuc2Nyb2xsSWQsdGhpcy5zY3JvbGxHcm91cElkKTtcclxuICAgIH1cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpe1xyXG4gICAgICB0aGlzLnNjcm9sbFNweS5hZGRFbGVtZW50KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLnNjcm9sbElkLHRoaXMuc2Nyb2xsR3JvdXBJZCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnJlbW92ZUVsZW1lbnQodGhpcy5zY3JvbGxJZCwgdGhpcy5zY3JvbGxHcm91cElkKTtcclxuICAgIH1cclxuICB9XHJcbi8v6Lef6ZqP54K55Ye7XHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZlNjcm9sbEZvbGxvd0VsZW1lbnRdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRnNjcm9sbEZvbGxvd0VsZW1lbnREaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcblxyXG4gICAgLy9ASW5wdXQoKSBmb2xsb3dJZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCdmU2Nyb2xsRm9sbG93RWxlbWVudCcpIGZvbGxvd0lkOnN0cmluZztcclxuICAgIEBJbnB1dCgnZlNjcm9sbEVsZW1lbnQnKSBmb2xsb3dHcm91cElkOnN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgIHByaXZhdGUgc2Nyb2xsU3B5OiBGYXJyaXNTY3JvbGxTcHlTZXJ2aWNlLFxyXG4gICAgKSB7fVxyXG4gIFxyXG4gICAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICBpZighdGhpcy5mb2xsb3dHcm91cElkKXtcclxuICAgICAgICB0aGlzLmZvbGxvd0dyb3VwSWQgPSB0aGlzLnNjcm9sbFNweS5nZXRHcm91cElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zY3JvbGxTcHkuYWRkRm9sbG93RWxlbWVudCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5mb2xsb3dJZCwgdGhpcy5mb2xsb3dHcm91cElkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnJlbW92ZUZvbGxvd0VsZW1lbnQodGhpcy5mb2xsb3dJZCwgdGhpcy5mb2xsb3dHcm91cElkKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuLy/nm5HlkKzmu5rliqjpg6jliIZjb250ZW50XHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZlNjcm9sbFNweUNvbnRhaW5lcl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGc2Nyb2xsU3B5Q29udGFpbmVyRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XHJcbiAgXHJcbiAgQElucHV0KCkgZk9mZnNldDpudW1iZXI7XHJcbiAgQElucHV0KCdmU2Nyb2xsU3B5Q29udGFpbmVyJykgZlNjcm9sbEdyb3VwSWQ6c3RyaW5nO1xyXG4gIEBPdXRwdXQoKSBmU2Nyb2xsQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjtcclxuXHJcbiAgQEhvc3RCaW5kaW5nKFwic3R5bGUucG9zaXRpb25cIikgcG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoIFxyXG4gICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgIHByaXZhdGUgc2Nyb2xsU3B5OiBGYXJyaXNTY3JvbGxTcHlTZXJ2aWNlLFxyXG4gICAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICkge31cclxuICBcclxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgaWYoIXRoaXMuZlNjcm9sbEdyb3VwSWQpe1xyXG4gICAgICAgIHRoaXMuZlNjcm9sbEdyb3VwSWQgPSB0aGlzLnNjcm9sbFNweS5nZXRHcm91cElkKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lKz0nIGYtc2Nyb2xsc3B5LWNvbnRhaW5lcic7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LmFkZENvbnRlbnRFbGVtZW50KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLmZTY3JvbGxHcm91cElkKTtcclxuICAgICAgdGhpcy5zY3JvbGxTcHkuc2V0T2Zmc2V0KHRoaXMuZk9mZnNldCwgdGhpcy5mU2Nyb2xsR3JvdXBJZCk7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnVwZGF0ZVNjcm9sbEdyb3VwKHRoaXMuZlNjcm9sbEdyb3VwSWQpLnN1YnNjcmliZSgoY3VycmVudFNlY3Rpb246IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJzExMScsY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgIC8vIGJ1Z051bTo0NjU5OTFcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VjdGlvbi1ncm91cCcrY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgdGhpcy5mU2Nyb2xsQ2hhbmdlLmVtaXQoY3VycmVudFNlY3Rpb24pO1xyXG5cclxuICAgICAgICAgIC8vIHRoaXMuc2Nyb2xsU3B5LnNldEN1cnJlbnRTZWN0aW9uSWQodGhpcy5mU2Nyb2xsR3JvdXBJZCxjdXJyZW50U2VjdGlvbik7XHJcblxyXG4gICAgICAgICAgLy8gdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpe1xyXG4gICAgICAvLyB0aGlzLnNjcm9sbFNweS5nZXRDdXJyZW50U2VjdGlvbiQodGhpcy5mU2Nyb2xsR3JvdXBJZClcclxuICAgICAgLy8gLnN1YnNjcmliZSgoY3VycmVudFNlY3Rpb246IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgICAvLyAgIHRoaXMuZlNjcm9sbENoYW5nZS5uZXh0KGN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgLy8gICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAvLyB9KTtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsU3B5LnJlbW92ZUNvbnRlbnRFbGVtZW50KHRoaXMuZlNjcm9sbEdyb3VwSWQpO1xyXG4gICAgfVxyXG5cclxuICB9Il19