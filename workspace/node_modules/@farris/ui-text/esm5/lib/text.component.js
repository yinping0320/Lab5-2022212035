/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, forwardRef, Input, HostBinding, Output, EventEmitter, Injector, ElementRef, ViewChild, NgZone, HostListener } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { NumberHelperService } from '@farris/ui-common/number';
import { DebugService } from '@farris/ui-common';
import { LocaleService } from '@farris/ui-locale';
var TextComponent = /** @class */ (function () {
    function TextComponent(dtHelper, numberHelper, injector, ngzone) {
        this.dtHelper = dtHelper;
        this.numberHelper = numberHelper;
        this.injector = injector;
        this.ngzone = ngzone;
        this.cls = true;
        this.textChange = new EventEmitter();
        /**
         * 是否为密码输入
         */
        this.isPassword = false;
        // 是否多行文本
        this.isTextArea = false;
        // 是否启用自动尺寸
        this.autoSize = false;
        // 设置高度
        this.height = 0;
        // 是否是日期范围
        this.dateRange = false;
        // 千分位符号
        this.thousand = ',';
        // 小数点处符号
        this.decimal = '.';
        // 货币符号及值展现形式
        this.expression = '%s%v';
        this.textField = 'name';
        this.valueField = 'value';
        this.returnFormat = ''; // 从服务器端取值是格式化后的
        // 日期范围模式下input的显示分割符合
        this.dateRangeDelimiter = '~';
        this.enumDelimiter = ',';
        this._tshowType = 0;
        // 货币符号，默认是RMB
        this.currencySymbol = '￥';
        // 十进制前面填充的符号
        this.filledSymbol = '0';
        // 标签
        this.staticTitle = "";
        // 处理中英文情况， 因为多语言暂时不通过这个属性控制
        this.showTitle = false;
        /**
         * 日期多选
         */
        this.multiSelect = false;
        /**
         * 日期多选分隔符
         */
        this.separator = ',';
        this.beforeWriteValue = null;
        this.controlChange = (/**
         * @param {?} val
         * @return {?}
         */
        function (val) { });
        this.controlTouch = (/**
         * @param {?} val
         * @return {?}
         */
        function (val) { });
        this.debugSer = null;
        this.localeService = this.injector.get(LocaleService);
        this.debugSer = this.injector.get(DebugService, null);
    }
    Object.defineProperty(TextComponent.prototype, "showType", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tshowType;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tshowType = value;
            // 如果是周
            if (value == 4) {
                this.dateRange = true;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this.text;
        },
        // 普通文本输入值
        set: 
        // 普通文本输入值
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.text = this.formatValue(value);
            this.textChange.emit(this.text);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} ev
     * @return {?}
     */
    TextComponent.prototype.changeTitle = /**
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        if (!this.isTextArea && !this.isPassword) {
            this.mouseEnterChangeTitle();
        }
    };
    Object.defineProperty(TextComponent.prototype, "option", {
        get: /**
         * @return {?}
         */
        function () {
            return this._option;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._option = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TextComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TextComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TextComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.isTextArea) {
            /** @type {?} */
            var clsName = this.textInnerEl.nativeElement.parentElement.className;
            this.textInnerEl.nativeElement.parentElement.className = clsName + ' f-cmp-text-is-textarea';
        }
    };
    /**
     * @private
     * @return {?}
     */
    TextComponent.prototype.mouseEnterChangeTitle = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var textEl = this.textInnerEl.nativeElement;
        if (Math.abs(textEl.scrollWidth - textEl.clientWidth) > 2 || Math.abs(textEl.scrollHeight - textEl.clientHeight) > 2) {
            this.staticTitle = this.text && this.text.length > 0 ? this.text : this.control;
        }
        else {
            this.staticTitle = '';
        }
    };
    /**
     * 处理多语言，待定
     */
    /**
     * 处理多语言，待定
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.formatLang = /**
     * 处理多语言，待定
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value && value[this.currentLanguage] ? value[this.currentLanguage] : '';
    };
    /**
     * C货币
     * D十进制
     * F浮点数
     * N数字，带千分位
     * P百分比
     */
    /**
     * C货币
     * D十进制
     * F浮点数
     * N数字，带千分位
     * P百分比
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.getFormatNumberValue = /**
     * C货币
     * D十进制
     * F浮点数
     * N数字，带千分位
     * P百分比
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (!this.format && !this._option) {
            return value.toString();
        }
        if (this._option && this._option.type && this._option.type == 'number') {
            if (this._option.formatter) {
                return this._option.formatter(value);
            }
            else {
                if (this._option.useThousands) {
                    if (this._option.precision != undefined) {
                        this.format = 'n' + this._option.precision;
                    }
                    else {
                        this.format = 'n2';
                    }
                }
                else {
                    if (this._option.precision != undefined) {
                        this.format = 'f' + this._option.precision;
                    }
                    else {
                        this.format = 'f2';
                    }
                }
            }
        }
        /** @type {?} */
        var firstLetter = this.currencyToUpperCase(this.format.substring(0, 1));
        /** @type {?} */
        var precision = Number(this.format.substring(1));
        /** @type {?} */
        var config = {};
        /** @type {?} */
        var result;
        if (!/C|D|F|N|P/g.test(firstLetter)) {
            if (this.debugSer) {
                this.debugSer.warn("\u4E0D\u652F\u6301format\u4E3A " + this.format + " \u7C7B\u578B\u7684\u6570\u5B57\u683C\u5F0F\u5316");
            }
            return;
        }
        if (this.thousand) {
            Object.assign(config, { thousand: this.thousand });
        }
        if (this.decimal) {
            Object.assign(config, { decimal: this.decimal });
        }
        if (this.expression) {
            Object.assign(config, { format: this.expression });
        }
        switch (firstLetter) {
            case 'C':
                Object.assign(config, { prefix: this.currencySymbol, precision: precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'D':
                result = this.toDecimal(value, precision);
                break;
            case 'F':
                Object.assign(config, { prefix: '', thousand: '', precision: precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'N':
                Object.assign(config, { prefix: '', precision: precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'P':
                result = this.toPercent(value, precision);
                break;
        }
        return result;
    };
    /**
     * @param value 转换成十进制的数字
     * @param precision 十进制数字的长度
     */
    /**
     * @param {?} value 转换成十进制的数字
     * @param {?} precision 十进制数字的长度
     * @return {?}
     */
    TextComponent.prototype.toDecimal = /**
     * @param {?} value 转换成十进制的数字
     * @param {?} precision 十进制数字的长度
     * @return {?}
     */
    function (value, precision) {
        if (value.toString().indexOf('.') > -1) {
            if (this.debugSer) {
                this.debugSer.warn('十进制转换仅限整型类型');
            }
            return;
        }
        return (Array(precision).join(this.filledSymbol) + value).slice(-precision);
    };
    /**
     * @param value 转换成百分数的数字
     * @param decimal 小数点保留几位
     */
    /**
     * @param {?} value 转换成百分数的数字
     * @param {?} precision
     * @return {?}
     */
    TextComponent.prototype.toPercent = /**
     * @param {?} value 转换成百分数的数字
     * @param {?} precision
     * @return {?}
     */
    function (value, precision) {
        return Number(value * 100).toFixed(Number(precision)) + '%';
    };
    /**
     * 将货币符号首字母转换成大写
     */
    /**
     * 将货币符号首字母转换成大写
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.currencyToUpperCase = /**
     * 将货币符号首字母转换成大写
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value.replace(/[a-z]+/g, (/**
         * @param {?} word
         * @return {?}
         */
        function (word) {
            return word.toUpperCase();
        }));
    };
    /**
     * 处理年，Y=>y, D=>d
     */
    /**
     * 处理年，Y=>y, D=>d
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.dateToUpperCase = /**
     * 处理年，Y=>y, D=>d
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var newFormat;
        if (/Y/g.test(value) === true) {
            newFormat = value.replace(/Y/g, 'y');
        }
        else {
            newFormat = value;
        }
        if (/D/g.test(newFormat) === true) {
            newFormat = newFormat.replace(/D/g, 'd');
        }
        return newFormat;
    };
    /**
     * 枚举类型处理
     */
    /**
     * 枚举类型处理
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.getFormatEnumValue = /**
     * 枚举类型处理
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        if (value == undefined || value === null || value === '') {
            return '';
        }
        if (this.data && this.data.length) {
            // 可能存在多选枚举，作为分隔符  
            // let curVals = ('' + value).split(',');
            /** @type {?} */
            var curVals_1 = ('' + value).split(this.enumDelimiter);
            /** @type {?} */
            var nameResult = [];
            var _loop_1 = function (k) {
                /** @type {?} */
                var findObj = this_1.data.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item[_this.valueField] == curVals_1[k];
                }));
                if (findObj) {
                    nameResult.push(findObj[this_1.textField]);
                }
                else {
                    nameResult.push(curVals_1[k]);
                }
            };
            var this_1 = this;
            for (var k = 0; k < curVals_1.length; k++) {
                _loop_1(k);
            }
            if (nameResult.length > 0) {
                // return nameResult.join(',');
                return nameResult.join(this.enumDelimiter);
            }
            return '';
        }
        else {
            return value;
        }
    };
    /**
     * boolean值处理
     */
    /**
     * boolean值处理
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.getFormatCheckBoxValue = /**
     * boolean值处理
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value === true) {
            return this.localeService.getValue('text.yes');
        }
        else if (value === false || value == null || typeof value === 'undefined') {
            return this.localeService.getValue('text.no');
        }
        else {
            return value;
        }
    };
    /**
     * @private
     * @param {?} value
     * @param {?} fmt
     * @param {?=} hourSystem
     * @return {?}
     */
    TextComponent.prototype.timeFormatTo = /**
     * @private
     * @param {?} value
     * @param {?} fmt
     * @param {?=} hourSystem
     * @return {?}
     */
    function (value, fmt, hourSystem) {
        if (hourSystem === void 0) { hourSystem = 12; }
    };
    /**
     * @private
     * @param {?} fmt
     * @return {?}
     */
    TextComponent.prototype.makeFormater = /**
     * @private
     * @param {?} fmt
     * @return {?}
     */
    function (fmt) {
        return fmt;
    };
    /*
    * 日期格式化
    */
    /*
        * 日期格式化
        */
    /**
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.dateformat = /*
        * 日期格式化
        */
    /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        /** @type {?} */
        var str;
        if (!this.format) {
            this.format = 'YYYY-MM-DD';
        }
        if (this.format === 'timeago') {
            return this.dtHelper.relativeTime(value, this.localeService.localeId || 'zh-CHS');
        }
        // 当前值是已经格式化后的日期字符串
        if (this.returnFormat && this.returnFormat != 'yyyy-MM-dd' && typeof value == 'string') {
            value = this.getDateFromFormatedString(value, this.returnFormat);
        }
        //
        if (this.format === 'hh:mm:ss' || this.format === 'HH:mm:ss') {
            // 格式化时间  临时处理
            str = value;
        }
        else {
            // if (this.showTime && value instanceof String) {
            //     str = value;
            // } else {
            //     const formArr = this.format.split(' ');
            //     if (this.showTime && formArr.length < 2) {
            //         formArr.push('HH:mm:ss');
            //         this.format = formArr.join(' ');
            //     }
            //     // 格式化日期
            //     str = this.dtHelper.formatTo(value, this.dateToUpperCase(this.format));
            // }
            if (this.multiSelect && value) {
                /** @type {?} */
                var fmtList = ['yyyy-MM-dd', 'yyyy/MM/dd', 'MM/dd/yyyy', 'yyyy年MM月dd日', 'yyyyMMdd'];
                if (!fmtList.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n === _this.format; }))) {
                    this.format = 'yyyy-MM-dd';
                }
                str = value.split(this.separator).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    if (n.indexOf('年') > -1) {
                        n = n.replace('年', '-');
                    }
                    if (n.indexOf('月') > -1) {
                        n = n.replace('月', '-');
                    }
                    if (n.indexOf('日') > -1) {
                        n = n.replace('日', '');
                    }
                    return _this.dtHelper.formatTo(n, _this.dateToUpperCase(_this.format));
                })).join(this.separator);
            }
            else {
                str = this.dtHelper.formatTo(value, this.dateToUpperCase(this.format));
            }
        }
        return str;
    };
    /**
     * @private
     * @param {?} dateString
     * @param {?} format
     * @return {?}
     */
    TextComponent.prototype.getDateFromFormatedString = /**
     * @private
     * @param {?} dateString
     * @param {?} format
     * @return {?}
     */
    function (dateString, format) {
        /** @type {?} */
        var result = { year: 0, month: 0, day: 0, hour: 0, minite: 0, second: 0 };
        if (dateString) {
            format.replace(/y+|Y+|M+|d+|D+|h+|H+|m+|s+/g, (/**
             * @param {?} m
             * @param {?} a
             * @param {?} b
             * @param {?} c
             * @return {?}
             */
            function (m, a, b, c) {
                dateString.substring(a).replace(/\d+/, (/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) { c = parseInt(d, 10); }));
                if (/y+/i.test(m) && !result.year)
                    result.year = c;
                if (/M+/.test(m) && !result.month)
                    result.month = c;
                if (/d+/i.test(m) && !result.day)
                    result.day = c;
                if (/h+/i.test(m) && !result.hour)
                    result.hour = c;
                if (/m+/.test(m) && !result.minite)
                    result.minite = c;
                if (/s+/.test(m) && !result.second)
                    result.second = c;
            }));
        }
        /** @type {?} */
        var resultDate = new Date(result.year + '/' + result.month + '/' + result.day + ' ' + result.hour + ':' + result.minite + ':' + result.second);
        return resultDate;
    };
    /**
     * 格式化处理
     */
    /**
     * 格式化处理
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.formatValue = /**
     * 格式化处理
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        /** @type {?} */
        var str;
        if (this.currentLanguage) {
            return this.formatLang(value);
        }
        // if (!value) {
        //     return '';
        // }
        if (this.type !== 'boolean' && (value == null || typeof value === 'undefined')) {
            return '';
        }
        switch (this.type) {
            case 'string':
                str = value;
                break;
            case 'date':
            case 'datetime':
                if (!this.dateRange) {
                    // if (!this.format) {
                    //     this.format = 'YYYY-MM-DD';
                    // }
                    // if (this.format === 'hh:mm:ss') {
                    //     // 格式化时间  临时处理
                    //     str = value;
                    // } else {
                    //     if (this.showTime) {
                    //         str = value;
                    //     } else {
                    //         // 格式化日期
                    //         str = this.dtHelper.formatTo(value, this.dateToUpperCase(this.format));
                    //     }
                    // }
                    str = this.dateformat(value);
                }
                else {
                    /** @type {?} */
                    var dateValues = value.split(this.dateRangeDelimiter);
                    /** @type {?} */
                    var dataStr_1 = [];
                    if (dateValues && dateValues.length) {
                        dateValues.forEach((/**
                         * @param {?} date
                         * @return {?}
                         */
                        function (date) {
                            /** @type {?} */
                            var val = _this.dateformat(date);
                            dataStr_1.push(val);
                        }));
                    }
                    str = dataStr_1.join(this.dateRangeDelimiter);
                }
                break;
            // case 'dateTime':
            //     str = this.timeFormatTo(value, this.makeFormater(this.format));
            //     break;
            case 'number':
                str = this.getFormatNumberValue(value);
                break;
            case 'enum':
                str = this.getFormatEnumValue(value);
                break;
            case 'boolean':
                str = this.getFormatCheckBoxValue(value);
                break;
            default:
                break; // throw new Error(`暂不支持 ${this.type} 类型`);
        }
        return str;
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.setText2Star = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.isPassword) {
            /** @type {?} */
            var star = value ? '******' : '';
            this.text = star;
            this.control = star;
            return true;
        }
        return false;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    TextComponent.prototype.writeValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        // lucas 2021-08-27
        if (this.setText2Star(value)) {
            return;
        }
        // xia 2021-03-13
        if (this.beforeWriteValue) {
            /** @type {?} */
            var options = {
                localizationType: this.localizationType,
                showTime: this.showTime,
                ref: this
            };
            /** @type {?} */
            var text = this.beforeWriteValue(value, options);
            if (text !== undefined) {
                this.text = text;
                return;
            }
        }
        this.control = this.formatValue(value);
        this.controlChange(value);
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TextComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.controlChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TextComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.controlTouch = fn;
    };
    TextComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-text',
                    template: "\n        <span #textInner\n            [ngClass]=\"{'f-form-control-text':!isTextArea,'f-form-control-textarea':isTextArea,'f-component-text-auto-size': this.autoSize}\"\n            [title]=\"staticTitle\" [style.text-align]=\"textAlign\"\n            [style.height]=\"!autoSize&&height>0?height+'px':null\" [style.minHeight]=\"autoSize&&height>0?height+'px':null\"\n            [style.maxHeight]=\"autoSize&&maxHeight>0?maxHeight+'px':null\">{{text && text.length > 0 ?  text : control}}</span>\n    ",
                    providers: [{
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return TextComponent; })),
                            multi: true,
                        }]
                }] }
    ];
    /** @nocollapse */
    TextComponent.ctorParameters = function () { return [
        { type: DateTimeHelperService },
        { type: NumberHelperService },
        { type: Injector },
        { type: NgZone }
    ]; };
    TextComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class.f-component-text',] }],
        textInnerEl: [{ type: ViewChild, args: ['textInner', { read: ElementRef },] }],
        textChange: [{ type: Output }],
        isPassword: [{ type: Input }],
        isTextArea: [{ type: Input }],
        autoSize: [{ type: Input }],
        maxHeight: [{ type: Input }],
        height: [{ type: Input }],
        type: [{ type: Input }],
        dateRange: [{ type: Input }],
        format: [{ type: Input }],
        lang: [{ type: Input }],
        data: [{ type: Input }],
        thousand: [{ type: Input }],
        decimal: [{ type: Input }],
        expression: [{ type: Input }],
        currentLanguage: [{ type: Input }],
        showTime: [{ type: Input }],
        textField: [{ type: Input }],
        valueField: [{ type: Input }],
        returnFormat: [{ type: Input }],
        textAlign: [{ type: Input }],
        dateRangeDelimiter: [{ type: Input }],
        enumDelimiter: [{ type: Input }],
        showType: [{ type: Input }],
        localizationType: [{ type: Input }],
        filledSymbol: [{ type: Input }],
        value: [{ type: Input }],
        changeTitle: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
        showTitle: [{ type: Input }],
        option: [{ type: Input }],
        multiSelect: [{ type: Input }],
        separator: [{ type: Input }]
    };
    return TextComponent;
}());
export { TextComponent };
if (false) {
    /** @type {?} */
    TextComponent.prototype.cls;
    /** @type {?} */
    TextComponent.prototype.textInnerEl;
    /** @type {?} */
    TextComponent.prototype.textChange;
    /**
     * 是否为密码输入
     * @type {?}
     */
    TextComponent.prototype.isPassword;
    /** @type {?} */
    TextComponent.prototype.isTextArea;
    /** @type {?} */
    TextComponent.prototype.autoSize;
    /** @type {?} */
    TextComponent.prototype.maxHeight;
    /** @type {?} */
    TextComponent.prototype.height;
    /** @type {?} */
    TextComponent.prototype.type;
    /** @type {?} */
    TextComponent.prototype.dateRange;
    /** @type {?} */
    TextComponent.prototype.format;
    /** @type {?} */
    TextComponent.prototype.lang;
    /** @type {?} */
    TextComponent.prototype.data;
    /** @type {?} */
    TextComponent.prototype.thousand;
    /** @type {?} */
    TextComponent.prototype.decimal;
    /** @type {?} */
    TextComponent.prototype.expression;
    /** @type {?} */
    TextComponent.prototype.currentLanguage;
    /** @type {?} */
    TextComponent.prototype.showTime;
    /** @type {?} */
    TextComponent.prototype.textField;
    /** @type {?} */
    TextComponent.prototype.valueField;
    /** @type {?} */
    TextComponent.prototype.returnFormat;
    /** @type {?} */
    TextComponent.prototype.textAlign;
    /** @type {?} */
    TextComponent.prototype.dateRangeDelimiter;
    /** @type {?} */
    TextComponent.prototype.enumDelimiter;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype._tshowType;
    /**
     * 国际化类型
     * @type {?}
     */
    TextComponent.prototype.localizationType;
    /** @type {?} */
    TextComponent.prototype.control;
    /** @type {?} */
    TextComponent.prototype.text;
    /** @type {?} */
    TextComponent.prototype.currencySymbol;
    /** @type {?} */
    TextComponent.prototype.filledSymbol;
    /** @type {?} */
    TextComponent.prototype.staticTitle;
    /** @type {?} */
    TextComponent.prototype.showTitle;
    /** @type {?} */
    TextComponent.prototype._option;
    /**
     * 日期多选
     * @type {?}
     */
    TextComponent.prototype.multiSelect;
    /**
     * 日期多选分隔符
     * @type {?}
     */
    TextComponent.prototype.separator;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.localeService;
    /** @type {?} */
    TextComponent.prototype.beforeWriteValue;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.controlChange;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.controlTouch;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.debugSer;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.dtHelper;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.numberHelper;
    /**
     * @type {?}
     * @private
     */
    TextComponent.prototype.injector;
    /** @type {?} */
    TextComponent.prototype.ngzone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRleHQvIiwic291cmNlcyI6WyJsaWIvdGV4dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQVUsVUFBVSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQ2xFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFDN0QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGlCQUFpQixFQUF3QixNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQ7SUF5SEksdUJBQ1ksUUFBK0IsRUFDL0IsWUFBaUMsRUFDakMsUUFBa0IsRUFDbkIsTUFBYztRQUhiLGFBQVEsR0FBUixRQUFRLENBQXVCO1FBQy9CLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNqQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ25CLFdBQU0sR0FBTixNQUFNLENBQVE7UUE1R2MsUUFBRyxHQUFHLElBQUksQ0FBQztRQUV4QyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7OztRQUV0QyxlQUFVLEdBQUcsS0FBSyxDQUFDOztRQUVuQixlQUFVLEdBQUcsS0FBSyxDQUFDOztRQUVuQixhQUFRLEdBQUcsS0FBSyxDQUFDOztRQUlqQixXQUFNLEdBQUcsQ0FBQyxDQUFDOztRQUlYLGNBQVMsR0FBRyxLQUFLLENBQUM7O1FBUWxCLGFBQVEsR0FBRyxHQUFHLENBQUM7O1FBRWYs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cUI7O0lBRXJCLDZCQUFzQjs7SUFFdEIsNkJBQW1COztJQUVuQixpQ0FBd0I7O0lBRXhCLGdDQUF1Qjs7SUFFdkIsbUNBQTZCOztJQUM3Qix3Q0FBaUM7O0lBRWpDLGlDQUEyQjs7SUFDM0Isa0NBQTRCOztJQUM1QixtQ0FBOEI7O0lBQzlCLHFDQUEyQjs7SUFHM0Isa0NBQW1COztJQUVuQiwyQ0FBa0M7O0lBQ2xDLHNDQUE2Qjs7Ozs7SUFDN0IsbUNBQXVCOzs7OztJQWV2Qix5Q0FBa0M7O0lBQ2xDLGdDQUFhOztJQUViLDZCQUFVOztJQUVWLHVDQUFxQjs7SUFFckIscUNBQTRCOztJQWdCNUIsb0NBQWlCOztJQUVqQixrQ0FBMkI7O0lBRTNCLGdDQUFROzs7OztJQVVSLG9DQUE2Qjs7Ozs7SUFFN0Isa0NBQXlCOzs7OztJQUV6QixzQ0FBMkI7O0lBRTNCLHlDQUE0RDs7Ozs7SUFFNUQsc0NBQXFDOzs7OztJQUNyQyxxQ0FBb0M7Ozs7O0lBQ3BDLGlDQUFzQzs7Ozs7SUFFbEMsaUNBQXVDOzs7OztJQUN2QyxxQ0FBeUM7Ozs7O0lBQ3pDLGlDQUEwQjs7SUFDMUIsK0JBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBmb3J3YXJkUmVmLCBJbnB1dCwgSG9zdEJpbmRpbmcsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbmplY3RvcixcclxuICAgIFNpbXBsZUNoYW5nZXMsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgTmdab25lLCBIb3N0TGlzdGVuZXJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTkdfVkFMVUVfQUNDRVNTT1IsIENvbnRyb2xWYWx1ZUFjY2Vzc29yIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBEYXRlVGltZUhlbHBlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi9kYXRlJztcclxuaW1wb3J0IHsgTnVtYmVySGVscGVyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL251bWJlcic7XHJcbmltcG9ydCB7IERlYnVnU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdGV4dCcsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDxzcGFuICN0ZXh0SW5uZXJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwieydmLWZvcm0tY29udHJvbC10ZXh0JzohaXNUZXh0QXJlYSwnZi1mb3JtLWNvbnRyb2wtdGV4dGFyZWEnOmlzVGV4dEFyZWEsJ2YtY29tcG9uZW50LXRleHQtYXV0by1zaXplJzogdGhpcy5hdXRvU2l6ZX1cIlxyXG4gICAgICAgICAgICBbdGl0bGVdPVwic3RhdGljVGl0bGVcIiBbc3R5bGUudGV4dC1hbGlnbl09XCJ0ZXh0QWxpZ25cIlxyXG4gICAgICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cIiFhdXRvU2l6ZSYmaGVpZ2h0PjA/aGVpZ2h0KydweCc6bnVsbFwiIFtzdHlsZS5taW5IZWlnaHRdPVwiYXV0b1NpemUmJmhlaWdodD4wP2hlaWdodCsncHgnOm51bGxcIlxyXG4gICAgICAgICAgICBbc3R5bGUubWF4SGVpZ2h0XT1cImF1dG9TaXplJiZtYXhIZWlnaHQ+MD9tYXhIZWlnaHQrJ3B4JzpudWxsXCI+e3t0ZXh0ICYmIHRleHQubGVuZ3RoID4gMCA/ICB0ZXh0IDogY29udHJvbH19PC9zcGFuPlxyXG4gICAgYCxcclxuICAgIHN0eWxlczogW10sXHJcbiAgICBwcm92aWRlcnM6IFt7XHJcbiAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gVGV4dENvbXBvbmVudCksXHJcbiAgICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9XVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGV4dENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLWNvbXBvbmVudC10ZXh0JykgY2xzID0gdHJ1ZTtcclxuICAgIEBWaWV3Q2hpbGQoJ3RleHRJbm5lcicsIHsgcmVhZDogRWxlbWVudFJlZiB9KSB0ZXh0SW5uZXJFbDogRWxlbWVudFJlZjtcclxuICAgIEBPdXRwdXQoKSB0ZXh0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvKiog5piv5ZCm5Li65a+G56CB6L6T5YWlICovXHJcbiAgICBASW5wdXQoKSBpc1Bhc3N3b3JkID0gZmFsc2U7XHJcbiAgICAvLyDmmK/lkKblpJrooYzmlofmnKxcclxuICAgIEBJbnB1dCgpIGlzVGV4dEFyZWEgPSBmYWxzZTtcclxuICAgIC8vIOaYr+WQpuWQr+eUqOiHquWKqOWwuuWvuFxyXG4gICAgQElucHV0KCkgYXV0b1NpemUgPSBmYWxzZTtcclxuICAgIC8vIOiuvue9ruacgOWkp+mrmOW6plxyXG4gICAgQElucHV0KCkgbWF4SGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvLyDorr7nva7pq5jluqZcclxuICAgIEBJbnB1dCgpIGhlaWdodCA9IDA7XHJcbiAgICAvLyDmjqfku7bnsbvlnotcclxuICAgIEBJbnB1dCgpIHR5cGU6IHN0cmluZztcclxuICAgIC8vIOaYr+WQpuaYr+aXpeacn+iMg+WbtFxyXG4gICAgQElucHV0KCkgZGF0ZVJhbmdlID0gZmFsc2U7XHJcbiAgICAvLyDpnIDopoHovazljJbnsbvlnovmoLzlvI/nmoTooajovr7lvI9cclxuICAgIEBJbnB1dCgpIGZvcm1hdDogYW55O1xyXG4gICAgLy8g5aSa6K+t6KiAXHJcbiAgICBASW5wdXQoKSBsYW5nOiBzdHJpbmc7XHJcbiAgICAvLyDovazmjaLnsbvlnovnlKjliLDnmoTmlbDmja5cclxuICAgIEBJbnB1dCgpIGRhdGE6IGFueTtcclxuICAgIC8vIOWNg+WIhuS9jeespuWPt1xyXG4gICAgQElucHV0KCkgdGhvdXNhbmQgPSAnLCc7XHJcbiAgICAvLyDlsI/mlbDngrnlpITnrKblj7dcclxuICAgIEBJbnB1dCgpIGRlY2ltYWwgPSAnLic7XHJcbiAgICAvLyDotKfluIHnrKblj7flj4rlgLzlsZXnjrDlvaLlvI9cclxuICAgIEBJbnB1dCgpIGV4cHJlc3Npb24gPSAnJXMldic7XHJcbiAgICBASW5wdXQoKSBjdXJyZW50TGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIC8vIGZvcm1Db250cm9s5pi+56S655qE5paH5pysXHJcbiAgICBASW5wdXQoKSBzaG93VGltZTogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIHRleHRGaWVsZCA9ICduYW1lJztcclxuICAgIEBJbnB1dCgpIHZhbHVlRmllbGQgPSAndmFsdWUnO1xyXG4gICAgQElucHV0KCkgcmV0dXJuRm9ybWF0ID0gJyc7IC8vIOS7juacjeWKoeWZqOerr+WPluWAvOaYr+agvOW8j+WMluWQjueahFxyXG5cclxuICAgIC8vIOaWh+acrOaWueWQkVxyXG4gICAgQElucHV0KCkgdGV4dEFsaWduO1xyXG4gICAgLy8g5pel5pyf6IyD5Zu05qih5byP5LiLaW5wdXTnmoTmmL7npLrliIblibLnrKblkIhcclxuICAgIEBJbnB1dCgpIGRhdGVSYW5nZURlbGltaXRlciA9ICd+JztcclxuICAgIEBJbnB1dCgpIGVudW1EZWxpbWl0ZXIgPSAnLCc7XHJcbiAgICBwcml2YXRlIF90c2hvd1R5cGUgPSAwO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBzaG93VHlwZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fdHNob3dUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgLy8g5aaC5p6c5piv5ZGoXHJcbiAgICAgICAgaWYgKHZhbHVlID09IDQpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBzaG93VHlwZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90c2hvd1R5cGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWbvemZheWMluexu+Wei1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBsb2NhbGl6YXRpb25UeXBlOiBzdHJpbmc7XHJcbiAgICBjb250cm9sOiBhbnk7XHJcbiAgICAvLyDmma7pgJrmlofmnKxcclxuICAgIHRleHQ6IGFueTtcclxuICAgIC8vIOi0p+W4geespuWPt++8jOm7mOiupOaYr1JNQlxyXG4gICAgY3VycmVuY3lTeW1ib2wgPSAn77+lJztcclxuICAgIC8vIOWNgei/m+WItuWJjemdouWhq+WFheeahOespuWPt1xyXG4gICAgQElucHV0KCkgZmlsbGVkU3ltYm9sID0gJzAnO1xyXG4gICAgLy8g5pmu6YCa5paH5pys6L6T5YWl5YC8XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHZhbHVlKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLmZvcm1hdFZhbHVlKHZhbHVlKTtcclxuICAgICAgICB0aGlzLnRleHRDaGFuZ2UuZW1pdCh0aGlzLnRleHQpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHQ7XHJcbiAgICB9XHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWVudGVyJywgWyckZXZlbnQnXSkgY2hhbmdlVGl0bGUoZXYpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNUZXh0QXJlYSAmJiAhdGhpcy5pc1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VFbnRlckNoYW5nZVRpdGxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5qCH562+XHJcbiAgICBzdGF0aWNUaXRsZSA9IFwiXCI7XHJcbiAgICAvLyDlpITnkIbkuK3oi7Hmlofmg4XlhrXvvIwg5Zug5Li65aSa6K+t6KiA5pqC5pe25LiN6YCa6L+H6L+Z5Liq5bGe5oCn5o6n5Yi2XHJcbiAgICBASW5wdXQoKSBzaG93VGl0bGUgPSBmYWxzZTtcclxuICAgIC8v5pWw5YC85qC85byP5Y+C5pWwXHJcbiAgICBfb3B0aW9uO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBvcHRpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9vcHRpb24gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5pel5pyf5aSa6YCJICovXHJcbiAgICBASW5wdXQoKSBtdWx0aVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgLyoqIOaXpeacn+WkmumAieWIhumalOespiAqL1xyXG4gICAgQElucHV0KCkgc2VwYXJhdG9yID0gJywnO1xyXG5cclxuICAgIHByaXZhdGUgbG9jYWxlU2VydmljZTogYW55O1xyXG5cclxuICAgIGJlZm9yZVdyaXRlVmFsdWU6ICh2YWw6IGFueSwgb3B0aW9uczogYW55KSA9PiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgY29udHJvbENoYW5nZSA9ICh2YWwpID0+IHsgfTtcclxuICAgIHByaXZhdGUgY29udHJvbFRvdWNoID0gKHZhbCkgPT4geyB9O1xyXG4gICAgcHJpdmF0ZSBkZWJ1Z1NlcjogRGVidWdTZXJ2aWNlID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgZHRIZWxwZXI6IERhdGVUaW1lSGVscGVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIG51bWJlckhlbHBlcjogTnVtYmVySGVscGVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwdWJsaWMgbmd6b25lOiBOZ1pvbmVcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdG9yLmdldChEZWJ1Z1NlcnZpY2UsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUZXh0QXJlYSkge1xyXG4gICAgICAgICAgICBjb25zdCBjbHNOYW1lID0gdGhpcy50ZXh0SW5uZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRJbm5lckVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSBjbHNOYW1lICsgJyBmLWNtcC10ZXh0LWlzLXRleHRhcmVhJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG1vdXNlRW50ZXJDaGFuZ2VUaXRsZSgpIHtcclxuICAgICAgICBsZXQgdGV4dEVsPXRoaXMudGV4dElubmVyRWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBpZiAoTWF0aC5hYnModGV4dEVsLnNjcm9sbFdpZHRoIC0gdGV4dEVsLmNsaWVudFdpZHRoKSA+IDIgfHwgTWF0aC5hYnModGV4dEVsLnNjcm9sbEhlaWdodCAtIHRleHRFbC5jbGllbnRIZWlnaHQpID4gMikge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRpY1RpdGxlID0gdGhpcy50ZXh0ICYmIHRoaXMudGV4dC5sZW5ndGggPiAwID8gdGhpcy50ZXh0IDogdGhpcy5jb250cm9sO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGljVGl0bGUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpITnkIblpJror63oqIDvvIzlvoXlrppcclxuICAgICAqL1xyXG4gICAgZm9ybWF0TGFuZyh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlW3RoaXMuY3VycmVudExhbmd1YWdlXSA/IHZhbHVlW3RoaXMuY3VycmVudExhbmd1YWdlXSA6ICcnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBD6LSn5biBXHJcbiAgICAgKiBE5Y2B6L+b5Yi2XHJcbiAgICAgKiBG5rWu54K55pWwXHJcbiAgICAgKiBO5pWw5a2X77yM5bim5Y2D5YiG5L2NXHJcbiAgICAgKiBQ55m+5YiG5q+UXHJcbiAgICAgKi9cclxuICAgIGdldEZvcm1hdE51bWJlclZhbHVlKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZm9ybWF0ICYmICF0aGlzLl9vcHRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb24gJiYgdGhpcy5fb3B0aW9uLnR5cGUgJiYgdGhpcy5fb3B0aW9uLnR5cGUgPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbi5mb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vcHRpb24uZm9ybWF0dGVyKHZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb24udXNlVGhvdXNhbmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbi5wcmVjaXNpb24gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ24nICsgdGhpcy5fb3B0aW9uLnByZWNpc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICduMic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uLnByZWNpc2lvbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSAnZicgKyB0aGlzLl9vcHRpb24ucHJlY2lzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ2YyJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmlyc3RMZXR0ZXIgPSB0aGlzLmN1cnJlbmN5VG9VcHBlckNhc2UodGhpcy5mb3JtYXQuc3Vic3RyaW5nKDAsIDEpKTtcclxuICAgICAgICBjb25zdCBwcmVjaXNpb24gPSBOdW1iZXIodGhpcy5mb3JtYXQuc3Vic3RyaW5nKDEpKTtcclxuICAgICAgICBsZXQgY29uZmlnID0ge307XHJcbiAgICAgICAgbGV0IHJlc3VsdDogYW55O1xyXG4gICAgICAgIGlmICghL0N8RHxGfE58UC9nLnRlc3QoZmlyc3RMZXR0ZXIpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnU2VyLndhcm4oYOS4jeaUr+aMgWZvcm1hdOS4uiAke3RoaXMuZm9ybWF0fSDnsbvlnovnmoTmlbDlrZfmoLzlvI/ljJZgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRob3VzYW5kKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7IHRob3VzYW5kOiB0aGlzLnRob3VzYW5kIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kZWNpbWFsKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7IGRlY2ltYWw6IHRoaXMuZGVjaW1hbCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbikge1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyBmb3JtYXQ6IHRoaXMuZXhwcmVzc2lvbiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoIChmaXJzdExldHRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdDJzpcclxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7IHByZWZpeDogdGhpcy5jdXJyZW5jeVN5bWJvbCwgcHJlY2lzaW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5udW1iZXJIZWxwZXIuZm9ybWF0TW9uZXkodmFsdWUsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRCc6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnRvRGVjaW1hbCh2YWx1ZSwgcHJlY2lzaW9uKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdGJzpcclxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29uZmlnLCB7IHByZWZpeDogJycsIHRob3VzYW5kOiAnJywgcHJlY2lzaW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5udW1iZXJIZWxwZXIuZm9ybWF0TW9uZXkodmFsdWUsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnTic6XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyBwcmVmaXg6ICcnLCBwcmVjaXNpb24gfSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLm51bWJlckhlbHBlci5mb3JtYXRNb25leSh2YWx1ZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdQJzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudG9QZXJjZW50KHZhbHVlLCBwcmVjaXNpb24pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg6L2s5o2i5oiQ5Y2B6L+b5Yi255qE5pWw5a2XXHJcbiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIOWNgei/m+WItuaVsOWtl+eahOmVv+W6plxyXG4gICAgICovXHJcbiAgICB0b0RlY2ltYWwodmFsdWU6IGFueSwgcHJlY2lzaW9uOiBhbnkpIHtcclxuICAgICAgICBpZiAodmFsdWUudG9TdHJpbmcoKS5pbmRleE9mKCcuJykgPiAtMSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnU2VyLndhcm4oJ+WNgei/m+WItui9rOaNouS7hemZkOaVtOWei+exu+WeiycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChBcnJheShwcmVjaXNpb24pLmpvaW4odGhpcy5maWxsZWRTeW1ib2wpICsgdmFsdWUpLnNsaWNlKC1wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg6L2s5o2i5oiQ55m+5YiG5pWw55qE5pWw5a2XXHJcbiAgICAgKiBAcGFyYW0gZGVjaW1hbCDlsI/mlbDngrnkv53nlZnlh6DkvY1cclxuICAgICAqL1xyXG4gICAgdG9QZXJjZW50KHZhbHVlOiBhbnksIHByZWNpc2lvbjogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSAqIDEwMCkudG9GaXhlZChOdW1iZXIocHJlY2lzaW9uKSkgKyAnJSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsIbotKfluIHnrKblj7fpppblrZfmr43ovazmjaLmiJDlpKflhplcclxuICAgICAqL1xyXG4gICAgY3VycmVuY3lUb1VwcGVyQ2FzZSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1thLXpdKy9nLCAod29yZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3JkLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpITnkIblubTvvIxZPT55LCBEPT5kXHJcbiAgICAgKi9cclxuICAgIGRhdGVUb1VwcGVyQ2FzZSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgbGV0IG5ld0Zvcm1hdDogYW55O1xyXG4gICAgICAgIGlmICgvWS9nLnRlc3QodmFsdWUpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG5ld0Zvcm1hdCA9IHZhbHVlLnJlcGxhY2UoL1kvZywgJ3knKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXdGb3JtYXQgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKC9EL2cudGVzdChuZXdGb3JtYXQpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG5ld0Zvcm1hdCA9IG5ld0Zvcm1hdC5yZXBsYWNlKC9EL2csICdkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3Rm9ybWF0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmnprkuL7nsbvlnovlpITnkIZcclxuICAgICAqL1xyXG4gICAgZ2V0Rm9ybWF0RW51bVZhbHVlKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDlj6/og73lrZjlnKjlpJrpgInmnprkuL7vvIzkvZzkuLrliIbpmpTnrKYgIFxyXG4gICAgICAgICAgICAvLyBsZXQgY3VyVmFscyA9ICgnJyArIHZhbHVlKS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBsZXQgY3VyVmFscyA9ICgnJyArIHZhbHVlKS5zcGxpdCh0aGlzLmVudW1EZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICBsZXQgbmFtZVJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGN1clZhbHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaW5kT2JqID0gdGhpcy5kYXRhLmZpbmQoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdGhpcy52YWx1ZUZpZWxkXSA9PSBjdXJWYWxzW2tdO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZE9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVSZXN1bHQucHVzaChmaW5kT2JqW3RoaXMudGV4dEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lUmVzdWx0LnB1c2goY3VyVmFsc1trXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5hbWVSZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIG5hbWVSZXN1bHQuam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVSZXN1bHQuam9pbih0aGlzLmVudW1EZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBib29sZWFu5YC85aSE55CGXHJcbiAgICAgKi9cclxuICAgIGdldEZvcm1hdENoZWNrQm94VmFsdWUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgndGV4dC55ZXMnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgndGV4dC5ubycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdGltZUZvcm1hdFRvKHZhbHVlOiBhbnksIGZtdDogc3RyaW5nLCBob3VyU3lzdGVtID0gMTIpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYWtlRm9ybWF0ZXIoZm10OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBmbXQ7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgKiDml6XmnJ/moLzlvI/ljJZcclxuICAgICovXHJcbiAgICBkYXRlZm9ybWF0KHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IHN0cjtcclxuICAgICAgICBpZiAoIXRoaXMuZm9ybWF0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ1lZWVktTU0tREQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0ID09PSAndGltZWFnbycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHRIZWxwZXIucmVsYXRpdmVUaW1lKHZhbHVlLCB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQgfHwgJ3poLUNIUycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5b2T5YmN5YC85piv5bey57uP5qC85byP5YyW5ZCO55qE5pel5pyf5a2X56ym5LiyXHJcbiAgICAgICAgaWYgKHRoaXMucmV0dXJuRm9ybWF0ICYmIHRoaXMucmV0dXJuRm9ybWF0ICE9ICd5eXl5LU1NLWRkJyAmJiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmdldERhdGVGcm9tRm9ybWF0ZWRTdHJpbmcodmFsdWUsIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAodGhpcy5mb3JtYXQgPT09ICdoaDptbTpzcycgfHwgdGhpcy5mb3JtYXQgPT09ICdISDptbTpzcycpIHtcclxuICAgICAgICAgICAgLy8g5qC85byP5YyW5pe26Ze0ICDkuLTml7blpITnkIZcclxuICAgICAgICAgICAgc3RyID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuc2hvd1RpbWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmcpIHtcclxuICAgICAgICAgICAgLy8gICAgIHN0ciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgZm9ybUFyciA9IHRoaXMuZm9ybWF0LnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy5zaG93VGltZSAmJiBmb3JtQXJyLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBmb3JtQXJyLnB1c2goJ0hIOm1tOnNzJyk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5mb3JtYXQgPSBmb3JtQXJyLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIC8vIOagvOW8j+WMluaXpeacn1xyXG4gICAgICAgICAgICAvLyAgICAgc3RyID0gdGhpcy5kdEhlbHBlci5mb3JtYXRUbyh2YWx1ZSwgdGhpcy5kYXRlVG9VcHBlckNhc2UodGhpcy5mb3JtYXQpKTtcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZtdExpc3QgPSBbJ3l5eXktTU0tZGQnLCAneXl5eS9NTS9kZCcsJ01NL2RkL3l5eXknLCd5eXl55bm0TU3mnIhkZOaXpScsJ3l5eXlNTWRkJ107XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZtdExpc3QuZmluZChuID0+IG4gPT09IHRoaXMuZm9ybWF0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ3l5eXktTU0tZGQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHN0ciA9IHZhbHVlLnNwbGl0KHRoaXMuc2VwYXJhdG9yKS5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4uaW5kZXhPZign5bm0JykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gbi5yZXBsYWNlKCflubQnLCAnLScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5pbmRleE9mKCfmnIgnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuLnJlcGxhY2UoJ+aciCcsICctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuLmluZGV4T2YoJ+aXpScpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG4ucmVwbGFjZSgn5pelJywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kdEhlbHBlci5mb3JtYXRUbyhuLCB0aGlzLmRhdGVUb1VwcGVyQ2FzZSh0aGlzLmZvcm1hdCkpXHJcbiAgICAgICAgICAgICAgICB9KS5qb2luKHRoaXMuc2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IHRoaXMuZHRIZWxwZXIuZm9ybWF0VG8odmFsdWUsIHRoaXMuZGF0ZVRvVXBwZXJDYXNlKHRoaXMuZm9ybWF0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGF0ZUZyb21Gb3JtYXRlZFN0cmluZyhkYXRlU3RyaW5nLCBmb3JtYXQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0geyB5ZWFyOiAwLCBtb250aDogMCwgZGF5OiAwLCBob3VyOiAwLCBtaW5pdGU6IDAsIHNlY29uZDogMCB9OyAvLyDlvZPnhLbov5nph4zlj6/ku6Xpu5jorqQxOTcwLTEtMeaXpVxyXG4gICAgICAgIGlmIChkYXRlU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdC5yZXBsYWNlKC95K3xZK3xNK3xkK3xEK3xoK3xIK3xtK3xzKy9nLCBmdW5jdGlvbiAobSwgYSwgYiwgYykgey8vIOi/memHjOWPquWBmuS6huW5tOaciOaXpSAg5Yqg5pe25YiG56eS5Lmf5piv5Y+v5Lul55qEXHJcbiAgICAgICAgICAgICAgICBkYXRlU3RyaW5nLnN1YnN0cmluZyhhKS5yZXBsYWNlKC9cXGQrLywgZnVuY3Rpb24gKGQpIHsgYyA9IHBhcnNlSW50KGQsIDEwKSB9KTtcclxuICAgICAgICAgICAgICAgIGlmICgveSsvaS50ZXN0KG0pICYmICFyZXN1bHQueWVhcikgcmVzdWx0LnllYXIgPSBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKC9NKy8udGVzdChtKSAmJiAhcmVzdWx0Lm1vbnRoKSByZXN1bHQubW9udGggPSBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKC9kKy9pLnRlc3QobSkgJiYgIXJlc3VsdC5kYXkpIHJlc3VsdC5kYXkgPSBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKC9oKy9pLnRlc3QobSkgJiYgIXJlc3VsdC5ob3VyKSByZXN1bHQuaG91ciA9IGM7XHJcbiAgICAgICAgICAgICAgICBpZiAoL20rLy50ZXN0KG0pICYmICFyZXN1bHQubWluaXRlKSByZXN1bHQubWluaXRlID0gYztcclxuICAgICAgICAgICAgICAgIGlmICgvcysvLnRlc3QobSkgJiYgIXJlc3VsdC5zZWNvbmQpIHJlc3VsdC5zZWNvbmQgPSBjO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VsdERhdGUgPSBuZXcgRGF0ZShyZXN1bHQueWVhciArICcvJyArIHJlc3VsdC5tb250aCArICcvJyArIHJlc3VsdC5kYXkgKyAnICcgKyByZXN1bHQuaG91ciArICc6JyArIHJlc3VsdC5taW5pdGUgKyAnOicgKyByZXN1bHQuc2Vjb25kKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0RGF0ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC85byP5YyW5aSE55CGXHJcbiAgICAgKi9cclxuICAgIGZvcm1hdFZhbHVlKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBsZXQgc3RyOiBhbnk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudExhbmd1YWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmcodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiAnJztcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2Jvb2xlYW4nICYmICh2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICAgICAgICAgIHN0ciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxyXG4gICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0ZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCF0aGlzLmZvcm1hdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLmZvcm1hdCA9ICdZWVlZLU1NLUREJztcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuZm9ybWF0ID09PSAnaGg6bW06c3MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIOagvOW8j+WMluaXtumXtCAg5Li05pe25aSE55CGXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHN0ciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmICh0aGlzLnNob3dUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBzdHIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC8vIOagvOW8j+WMluaXpeacn1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc3RyID0gdGhpcy5kdEhlbHBlci5mb3JtYXRUbyh2YWx1ZSwgdGhpcy5kYXRlVG9VcHBlckNhc2UodGhpcy5mb3JtYXQpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gdGhpcy5kYXRlZm9ybWF0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlcyA9IHZhbHVlLnNwbGl0KHRoaXMuZGF0ZVJhbmdlRGVsaW1pdGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFTdHIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZVZhbHVlcyAmJiBkYXRlVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlVmFsdWVzLmZvckVhY2goZGF0ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gdGhpcy5kYXRlZm9ybWF0KGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0ci5wdXNoKHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdHIgPSBkYXRhU3RyLmpvaW4odGhpcy5kYXRlUmFuZ2VEZWxpbWl0ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBjYXNlICdkYXRlVGltZSc6XHJcbiAgICAgICAgICAgIC8vICAgICBzdHIgPSB0aGlzLnRpbWVGb3JtYXRUbyh2YWx1ZSwgdGhpcy5tYWtlRm9ybWF0ZXIodGhpcy5mb3JtYXQpKTtcclxuICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICAgICAgICAgICAgc3RyID0gdGhpcy5nZXRGb3JtYXROdW1iZXJWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZW51bSc6XHJcbiAgICAgICAgICAgICAgICBzdHIgPSB0aGlzLmdldEZvcm1hdEVudW1WYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XHJcbiAgICAgICAgICAgICAgICBzdHIgPSB0aGlzLmdldEZvcm1hdENoZWNrQm94VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gdGhyb3cgbmV3IEVycm9yKGDmmoLkuI3mlK/mjIEgJHt0aGlzLnR5cGV9IOexu+Wei2ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFRleHQyU3Rhcih2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhciA9IHZhbHVlID8gJyoqKioqKicgOiAnJztcclxuICAgICAgICAgICAgdGhpcy50ZXh0ID0gc3RhcjtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sID0gc3RhcjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gbHVjYXMgMjAyMS0wOC0yN1xyXG4gICAgICAgIGlmICh0aGlzLnNldFRleHQyU3Rhcih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8geGlhIDIwMjEtMDMtMTNcclxuICAgICAgICBpZiAodGhpcy5iZWZvcmVXcml0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbGl6YXRpb25UeXBlOiB0aGlzLmxvY2FsaXphdGlvblR5cGUsXHJcbiAgICAgICAgICAgICAgICBzaG93VGltZTogdGhpcy5zaG93VGltZSxcclxuICAgICAgICAgICAgICAgIHJlZjogdGhpc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5iZWZvcmVXcml0ZVZhbHVlKHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKHRleHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmZvcm1hdFZhbHVlKHZhbHVlKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xDaGFuZ2UodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICgpID0+IHt9KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sQ2hhbmdlID0gZm47XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xUb3VjaCA9IGZuO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=