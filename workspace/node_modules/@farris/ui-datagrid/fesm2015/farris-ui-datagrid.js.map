{"version":3,"file":"farris-ui-datagrid.js","sources":["ng://@farris/ui-datagrid/lib/types/data-column.ts","ng://@farris/ui-datagrid/lib/types/constant.ts","ng://@farris/ui-datagrid/lib/services/state.ts","ng://@farris/ui-datagrid/lib/utils/utils.ts","ng://@farris/ui-datagrid/lib/services/datagrid-columns.helper.ts","ng://@farris/ui-datagrid/lib/services/datagrid-facade.service.ts","ng://@farris/ui-datagrid/lib/services/datagrid.service.ts","ng://@farris/ui-datagrid/lib/services/rest.service.ts","ng://@farris/ui-datagrid/lib/types/datagrid-validator.ts","ng://@farris/ui-datagrid/lib/services/validator-messager.service.ts","ng://@farris/ui-datagrid/lib/services/domhandler.ts","ng://@farris/ui-datagrid/lib/services/datagrid-filter.service.ts","ng://@farris/ui-datagrid/lib/pagination/ngx-pagination.module.ts","ng://@farris/ui-datagrid/lib/pagination/pagination.service.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.interfaces.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.directive.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.component.ts","ng://@farris/ui-datagrid/lib/scrollbar/arrow/scrollbar-arrows.component.ts","ng://@farris/ui-datagrid/lib/scrollbar/scrollbar.module.ts","ng://@farris/ui-datagrid/lib/components/columns/column-cell-edit.directive.ts","ng://@farris/ui-datagrid/lib/components/columns/datagrid-column.directive.ts","ng://@farris/ui-datagrid/lib/components/filter-toolbar/smart-filter-toolbar.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/controlData/filter-control.options.ts","ng://@farris/ui-datagrid/lib/services/datagrid-smart-filter.service.ts","ng://@farris/ui-datagrid/lib/services/selection-mode.service.ts","ng://@farris/ui-datagrid/lib/datagrid.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/datagrid-smart-filter.component.ts","ng://@farris/ui-datagrid/lib/plugins/smart-filter/datagrid-smart-filter.module.ts","ng://@farris/ui-datagrid/lib/utils/format-cell-data.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-body.component.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row-hover.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row.directive.ts","ng://@farris/ui-datagrid/lib/components/editors/cell-editor.directive.ts","ng://@farris/ui-datagrid/lib/utils/safe.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-cell.component.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-cell-editable.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-rows.component.ts","ng://@farris/ui-datagrid/lib/components/editors/text-editor.component.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-header.component.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-resize-column.directive.ts","ng://@farris/ui-datagrid/lib/components/footer/datagrid-footer.component.ts","ng://@farris/ui-datagrid/lib/components/pager/pager.component.ts","ng://@farris/ui-datagrid/lib/components/loading.component.ts","ng://@farris/ui-datagrid/lib/components/pager/selected-list/selected-list.component.ts","ng://@farris/ui-datagrid/lib/components/pager/selected-item.pipe.ts","ng://@farris/ui-datagrid/lib/datagrid-error-handler.ts","ng://@farris/ui-datagrid/lib/components/checkbox/datagrid-checkbox.component.ts","ng://@farris/ui-datagrid/lib/components/checkbox/datagrid-header-checkbox.component.ts","ng://@farris/ui-datagrid/lib/utils/rowid.pipe.ts","ng://@farris/ui-datagrid/lib/utils/format-group-row.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/fixed-left-rows.component.ts","ng://@farris/ui-datagrid/lib/utils/rexplaceX.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-grouprow.directive.ts","ng://@farris/ui-datagrid/lib/utils/show-required-label.pipe.ts","ng://@farris/ui-datagrid/lib/utils/disable-row.pipe.ts","ng://@farris/ui-datagrid/lib/utils/select-row.pipe.ts","ng://@farris/ui-datagrid/lib/utils/field-value.pipe.ts","ng://@farris/ui-datagrid/lib/components/tooltip/cell-tooltip.directive.ts","ng://@farris/ui-datagrid/lib/components/tooltip/tip-message.pipe.ts","ng://@farris/ui-datagrid/lib/components/filter-toolbar/filter-toolbar.component.ts","ng://@farris/ui-datagrid/lib/components/header/header-style.directive.ts","ng://@farris/ui-datagrid/lib/components/auto-height/auto-height.component.ts","ng://@farris/ui-datagrid/lib/utils/row-is-selected.pipe.ts","ng://@farris/ui-datagrid/lib/utils/row-is-checked.pipe.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-group-footer-styler.directive.ts","ng://@farris/ui-datagrid/lib/components/auto-height/auto-height.directive.ts","ng://@farris/ui-datagrid/lib/components/body/datagrid-row-dblclick.directive.ts","ng://@farris/ui-datagrid/lib/components/footer/datagrid-footer-cell.styler.directive.ts","ng://@farris/ui-datagrid/lib/components/header/drag-drop-column.service.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-drag-column.directive.ts","ng://@farris/ui-datagrid/lib/components/header/datagrid-drop-column.directive.ts","ng://@farris/ui-datagrid/lib/utils/cell-readonly.pipe.ts","ng://@farris/ui-datagrid/lib/datagrid.module.ts"],"sourcesContent":["/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-11 09:52:46\r\n * @Company: Inspur\r\n * @Version: v0.0.1\r\n */\r\nimport { ComponentRef, TemplateRef } from '@angular/core';\r\nimport { ColumnFormatter } from '@farris/ui-common/column';\r\nimport { DatagridValidator } from './datagrid-validator';\r\nimport { Compare } from '@farris/ui-common/types';\r\nimport { ComponentType } from '@angular/core/src/render3';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\nexport interface CustomStyle {\r\n    cls?: string;\r\n    style?: {\r\n        [key: string]: string;\r\n    };\r\n}\r\n\r\nexport type MoveDirection = 'left' | 'right' | 'up' | 'down';\r\ntype TooltipContentFn = (value: any, rowData: any, column: any) => string;\r\ntype TooltipContent = string | TooltipContentFn;\r\nexport type HeaderStyleFn = (column: DataColumn) => CustomStyle;\r\ntype HeaderStyle = string | { [cssKey: string]: string } | HeaderStyleFn;\r\n\r\ntype ColumnFormatterFn = (value, rowData, rowIndex) => any;\r\ntype ColumnFormatterType = ColumnFormatterFn | ColumnFormatter;\r\n\r\n\r\nexport interface CellContext {\r\n    field: string,\r\n    rowIndex: number,\r\n    rowData: any,\r\n    column: any,\r\n    instance: any,\r\n    formGroup: FormGroup,\r\n    tools: any\r\n}\r\n\r\nexport interface ICellTemplateComponent {\r\n    ctx: Partial<CellContext>,\r\n    bindingContext?: any;\r\n}\r\n\r\nexport type CellTemplateFn = () => ComponentType<ICellTemplateComponent> | ComponentRef<ICellTemplateComponent>;\r\nexport type CellTemplateRef = ComponentType<ICellTemplateComponent> | ComponentRef<ICellTemplateComponent>;\r\n\r\nexport interface DataColumn {\r\n    dataType?: string;\r\n    id?: string;\r\n    parentId?: any;\r\n    field: string;\r\n    title: string;\r\n    width: number;\r\n    /** è®°å½åå§å®ä¹å®½åº¦ */\r\n    originalWidth?: number;\r\n    /** æ é¢å¯¹é½æ¹å¼ */\r\n    halign?: 'left' | 'center' | 'right';\r\n    /** ææ¬å¯¹é½æ¹å¼ */\r\n    align?: 'left' | 'center' | 'right';\r\n    /** åç´å¯¹é½æ¹å¼ */\r\n    valign?: 'top' | 'middle' | 'bottom';\r\n\r\n    formatter?: ColumnFormatterType;\r\n    styler?: (value, rowData, rowIndex) => CustomStyle;\r\n    /** è¡¨å¤´èªå®ä¹æ ·å¼ */\r\n    headerStyler?: HeaderStyle;\r\n    /** å·¦ä¾§è¾¹è· */\r\n    left?: number;\r\n    /** å³ä¾§è¾¹è· */\r\n    right?: number;\r\n    /** æ¯å¦åºå® */\r\n    fixed?: 'left' | 'right' | 'center';\r\n    /** æ¯å¦æ¾ç¤º */\r\n    visible?: boolean | any;\r\n    /** åªè¯» */\r\n    readonly?: boolean | any;\r\n\r\n    editor?: GridEditor;\r\n    /** ååæ ¼èªå®ä¹æ¨¡æ¿ */\r\n    template?: TemplateRef<any>;\r\n    /** è¡¨å³æ¨¡æ¿ */\r\n    headerTemplate?: TemplateRef<any>;\r\n    /** ç¼è¾å¨æ¨¡æ¿ */\r\n    editorTemplate?: TemplateRef<any>;\r\n    /** é¼ æ ç§»å¨è³ååæ ¼åï¼æ¾ç¤ºæ¬æµ®æ¶æ¯ */\r\n    showTips?: boolean;\r\n    /** ååæ ¼æç¤ºæ¨¡å¼ï¼\r\n     *  allwaysï¼ é¼ æ æ»è¿å³æ¾ç¤º\r\n     *  auto: ååæ ¼å®½åº¦ä¸å¤æ¶æä¼æ¾ç¤º\r\n     */\r\n    tipMode?: 'allways' | 'auto';\r\n    tipContent?: TooltipContent;\r\n    tipOptions?: any;\r\n    /** True to allow the column can be sorted. */\r\n    sortable?: boolean;\r\n    order?: 'asc' | 'desc';\r\n    sorter?: (r1: any, r2: any) => 0 | 1 | -1;\r\n    /** True to allow the column can be resized. */\r\n    resizable?: boolean;\r\n    rowspan?: number;\r\n    /** ååå¹¶ */\r\n    colspan?: number;\r\n    /** ååå¹¶åå§å¼  */\r\n    origianlColSpan?: number;\r\n    index?: number;\r\n    footer?: GridFooterRow;\r\n    /** åè®¸åç»ï¼é»è®¤ä¸º true */\r\n    allowGrouping?: boolean;\r\n    groupFooter?: GridFooterRow;\r\n    validators?: DatagridValidator[];\r\n    // è¿æ»¤è¡\r\n    filter?: ColumnFilter | any;\r\n    /** æ¯å¦å¤è¯­å­æ®µ */\r\n    isMultilingualField?: boolean;\r\n\r\n    /** ç©ºæ ¼é®ååºåè°å½æ° */\r\n    onSpaceHandler?: (e) => any;\r\n    /** åè½¦ååºåè°å½æ° */\r\n    onEnterHandler?: (e) => any;\r\n\r\n    componentType?: CellTemplateFn;\r\n    headerComponentType?: CellTemplateFn;\r\n    /** ç±datagridæ¥ç®¡click äºä»¶ï¼é»è®¤ä¸º true */\r\n    proxyClick?: boolean;\r\n}\r\n\r\nexport enum ColumnFilterType {\r\n    string = 0,\r\n    number = 1,\r\n    boolean = 2,\r\n    date = 3,\r\n    time = 4,\r\n    datetime = 5,\r\n    enum = 6,\r\n    fromdata = 7\r\n}\r\n/** Client Filter Type */\r\nexport interface FilterCondition {\r\n    operator1?: Compare;\r\n    value1?: any;\r\n    relation?: 'and' | 'or' | '';\r\n    operator2?: Compare;\r\n    value2?: any;\r\n}\r\n\r\nexport interface ColumnFilter {\r\n    type?: ColumnFilterType;\r\n    enableOperator?: boolean;\r\n    options?: any;\r\n}\r\n\r\nexport interface GridEditor {\r\n    type: string;\r\n    options?: any;\r\n    validators?: DatagridValidator[];\r\n}\r\n\r\nexport interface ColumnGroup {\r\n    /** å·¦ä¾§åºå®åæ»å®½åº¦ */\r\n    leftFixedWidth?: number;\r\n    /** å·¦ä¾§åºå®åéå */\r\n    leftFixed?: DataColumn[];\r\n    /** éåºå®åéå */\r\n    normalColumns?: DataColumn[];\r\n    /** å³ä¾§åºå®åéå */\r\n    rightFixed?: DataColumn[];\r\n\r\n    columns?: DataColumn[];\r\n    /** å³ä¾§åºå®åå®½åº¦ */\r\n    rightFixedWidth?: number;\r\n    /** æ­£å¸¸å®½åº¦ */\r\n    normalWidth?: number;\r\n    /** ææåå®½åº¦ä¹å */\r\n    totalWidth?: number;\r\n    /** ç¨æ·è®¾ç½®çåå®½ä¹å */\r\n    originalTotalWidth?: number;\r\n}\r\n\r\nexport interface PaginationInfo {\r\n    enable?: boolean;\r\n    pageList?: number[];\r\n    pageSize?: number;\r\n    pageIndex?: number;\r\n    total?: number;\r\n}\r\n\r\nexport enum CalculationType {\r\n    /** æ  */\r\n    none = -1,\r\n    /** æå¤§å¼ */\r\n    max = 0,\r\n    /** æå°å¼ */\r\n    min,\r\n    /** æ±å */\r\n    sum,\r\n    /** å¹³åæ° */\r\n    average,\r\n    /** æ»è®°å½æ° */\r\n    count\r\n}\r\n\r\nexport interface GridFooterRow {\r\n    options?: {\r\n        /** è®¡ç®ç±»å */\r\n        calculationType?: CalculationType,\r\n        /** éæææ¬ï¼ç´æ¥éå å°TD ä¸­ */\r\n        text?: string;\r\n    };\r\n    /** ææ¬å¯¹é½æ¹å¼ */\r\n    align?: 'left' | 'center' | 'right';\r\n    /** æ°æ®æ ¼å¼å */\r\n    formatter?: (value, rowData, rowIndex) => any | ColumnFormatter;\r\n    /** ååæ ¼æ ·å¼ */\r\n    styler?: (value, rowData, rowIndex) => CustomStyle;\r\n    rowspan?: number;\r\n    colspan?: number;\r\n    visible?: boolean;\r\n}\r\n\r\n\r\nexport const defaultPaginationInfo: PaginationInfo = {\r\n    enable: true,\r\n    pageIndex: 1,\r\n    pageSize: 10\r\n};\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-11 10:48:38\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { InjectionToken } from '@angular/core';\r\nexport const GRID_EDITORS = new InjectionToken('Farris DataGrid Editors.');\r\nexport const GRID_VALIDATORS = new InjectionToken('Farris DataGrid Validators.');\r\nexport const GRID_FILTER_ROW = new InjectionToken('Farris DataGrid Filter-Row Component.');\r\n\r\nexport const GRID_SETTINGS_PANEL = new InjectionToken('Farris DataGrid Setting Panel Component.');\r\nexport const GRID_SETTINGS_SERVICE = new InjectionToken('Farris DataGrid Setting Service.');\r\nexport const GRID_SETTINGS_HTTP = new InjectionToken(' Datagrid Settings HttpClient.');\r\n\r\nexport const SCROLL_Y_ACTION = 'psScrollY';\r\nexport const SCROLL_X_ACTION = 'psScrollX';\r\nexport const SCROLL_UP_ACTION = 'psScrollUp';\r\nexport const SCROLL_DOWN_ACTION = 'psScrollDown';\r\nexport const SCROLL_LEFT_ACTION = 'psScrollLeft';\r\nexport const SCROLL_RIGHT_ACTION = 'psScrollRight';\r\nexport const SCROLL_Y_REACH_END_ACTION = 'psYReachEnd';\r\nexport const SCROLL_Y_REACH_START_ACTION = 'psYReachStart';\r\nexport const SCROLL_X_REACH_END_ACTION = 'psXReachEnd';\r\nexport const SCROLL_X_REACH_START_ACTION = 'psXReachStart';\r\n\r\nexport const DATAGRID_SETTING_FIELDNAME = '_DATAGRID_CONTROL_PANEL_';\r\n\r\n/** å·¦ä¾§åºå®åé´å½±æ ·å¼åç§° */\r\nexport const FIXED_LEFT_SHADOW_CLS = 'f-datagrid-fixed-left-shadow';\r\nexport const FIXED_RIGHT_SHADOW_CLS = 'f-datagrid-fixed-right-shadow';\r\n\r\nexport const ROW_HOVER_CLS = 'f-datagrid-row-hover';\r\n\r\nexport const ROW_SELECTED_CLS = 'f-datagrid-row-selected';\r\n\r\nexport const CELL_SELECTED_CLS = 'f-datagrid-cell-selected';\r\n\r\nexport const CELL_EDITING_CLS = 'f-datagrid-cell-editing';\r\n\r\n/** è¡é«å°ºå¯¸å®ä¹ */\r\nexport const SIZE_TYPE = {\r\n    sm: {\r\n        row: 29,      // è¡é«\r\n        header: 35,   // è¡¨å¤´è¡é«\r\n        pager:  40    // åé¡µæ¡é«åº¦\r\n    },\r\n    md: {\r\n        row: 36,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n    lg: {\r\n        row: 46,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n    xl: {\r\n        row: 60,\r\n        header: 40,\r\n        pager:  44\r\n    },\r\n};\r\n\r\n/** åè®¸ç¼è¾æ¶ï¼éç®æ¾ç¤ºå¯ç¼è¾ååæ ¼çæ ·å¼ */\r\nexport const ALLOW_EDIT_CELL_HIGHLIGHT_CLS = {\r\n    datagrid: 'highlight-allowedit-cell',\r\n    textarea: 'cell-textarea',\r\n    textbox: 'cell-textbox',\r\n    checkbox: 'cell-checkbox',\r\n    datepicker: 'cell-datepicker',\r\n    'input-group': 'cell-input-group',\r\n    select: 'cell-combolist',\r\n    lookup: 'cell-lookup',\r\n    numberbox: 'cell-numberbox',\r\n    combolist: 'cell-combolist',\r\n    'combo-lookup': 'cell-combolist',\r\n    switch: 'cell-switch',\r\n    timepicker: 'cell-timepicker',\r\n    'language-textbox': 'cell-language-textbox',\r\n    'enum-editor': 'cell-enum-editor'\r\n};\r\n\r\n\r\nexport const TR_PREFIX = 'row_';\r\nexport const TR_ID_PREFIX = 'row_';\r\n\r\nexport const CUSTOM_CELL_CLS = 'customcellcls_';\r\nexport const CUSTOM_GROUP_ROW_CLS = 'customgrouprowcls_';\r\nexport const CUSTOM_ROW_CLS = 'customrowcls_';\r\n\r\n/** æè¡é«åº¦cls åç¼ wrap_row_height_ */\r\nexport const WORDWRAP_ROW_HEIGHT_CLS = 'wrap_row_height_';\r\n\r\nexport type SizeConfig = {\r\n    /**\r\n     * è¡¨å¤´è¡é«\r\n     */\r\n    'headerHeight'?: number, \r\n    /**\r\n     * åè®¡è¡é«\r\n     */\r\n    'footerHeight'?: number, \r\n    /**\r\n     * æ°æ®è¡é«\r\n     */\r\n    'rowHeight'?: number, \r\n    /**\r\n     * å¤éæ¡åå®½\r\n     */\r\n    'checkboxColumnWidth'?: number, \r\n    /**\r\n     * è¡å·åå®½\r\n     */\r\n    'lineNumberWidth'?: number,\r\n    /**\r\n     * è¿æ»¤è¡é«\r\n     */\r\n    'filterRowHeight'?: number\r\n};\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 07:47:12\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 20:30:44\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { ColumnGroup, DataColumn, FilterCondition} from './../types';\r\nimport { EntityFilter } from '@farris/ui-common/types';\r\n\r\nexport interface RowDataChanges {[id: string]: any; }\r\n\r\nexport interface FarrisDatagridState {\r\n    [key: string]: any;\r\n    width?: number;\r\n    height?: number;\r\n    rowHeight?: number;\r\n    idField?: string;\r\n    data?: any;\r\n    /** å½åé¡µæ°æ® */\r\n    currentPageData?: any;\r\n    originalData?: any;\r\n    showHeader?: boolean;\r\n    headerHeight?: number;\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n    pagerHeight?: number;\r\n    pagination?: boolean;\r\n    columns: Array<DataColumn> | Array<DataColumn>[];\r\n    flatColumns?: Array<DataColumn>;\r\n    fitColumns: boolean;\r\n    autoFitColumns?: boolean;\r\n    showLineNumber?: boolean;\r\n    showCheckbox?: boolean;\r\n    checkboxColumnWidth: number;\r\n    multiSelect?: boolean;\r\n    /** å½å¯ç¨å¤éæ¶ï¼ç¹å»è¡éä¸­ï¼åªåè®¸ä¸åªæä¸è¡è¢«éä¸­ã */\r\n    onlySelectSelf: boolean;\r\n    selectOnCheck: boolean;\r\n    checkOnSelect: boolean;\r\n    selections?: SelectedRow[];\r\n    checkedRows?: SelectedRow[];\r\n    currentRow?: SelectedRow;\r\n    currentCell?: CellInfo;\r\n    columnsGroup: ColumnGroup;\r\n    virtualized?: boolean;\r\n    showFooter?: boolean;\r\n    /** æ¯å¦å¯ç¨å¼æ­¥èæå è½½æ°æ®: false - å®¢æ·ç«¯åå­ä¸­åæ°ï¼true - è¿ç«¯æå¡å¨å è½½æ°æ®, é»è®¤å¼ä¸º false */\r\n    virtualizedAsyncLoad?: boolean;\r\n    virtual?: VirtualizedState;\r\n    sortName?: string;\r\n    sortOrder?: string;\r\n    multiSort?: boolean;\r\n    remoteSort?: boolean;\r\n    /** æå¡å¨ç«¯è¿æ»¤ */\r\n    remoteFilter?: boolean;\r\n    /** è¿æ»¤æ¡ä»¶ */\r\n    conditions?: EntityFilter | FilterCondition;\r\n    changes: RowDataChanges;\r\n    // å¯ç¨è¡åç»\r\n    groupRows?: boolean;\r\n    // åç»å­æ®µ\r\n    groupField?: string;\r\n    // åç»åè®¡è¡\r\n    groupFooter?: boolean;\r\n    /** æ¾ç¤ºåç»å */\r\n    showGroupColumn?: boolean;\r\n    mergeCell?: boolean;\r\n    enableClientSortForMergeCell?: boolean;\r\n    /** å­å¨ç»ä»¶åå§æ¶çç¸å³å±æ§è®¾ç½® */\r\n    initialOptions?: any;\r\n}\r\n\r\nexport interface VirtualizedState {\r\n    /** èæå è½½ä¸ä¸æ¾ç¤ºåé¡µæ¡æ¶ï¼è®°å½å è½½æ°è®°å½æ¶çç´¢å¼å¼ */\r\n    rowIndex: number;\r\n    /** æ°æ®æ¾ç¤ºçç´¢å¼å¼ */\r\n    startIndex?: number;\r\n    scrollTop?: number;\r\n    virtualRows?: any;\r\n    topHideHeight?: number;\r\n    bottomHideHeight?: number;\r\n    /** é¡µèæ°æ® */\r\n    footer?: any[];\r\n    /** æ¯å¦ç±æ»å¨æ¡è§¦å */\r\n    isScrollChange?: boolean;\r\n}\r\n\r\nexport interface SelectedRow {\r\n    index: number;\r\n    id: any;\r\n    data: any;\r\n    /** ä¸­é´ä½ç½®è¡å¼ç¨ */\r\n    dr?: any;\r\n    /** å·¦ä¾§ä½ç½®è¡å¼ç¨ */\r\n    drl?: any;\r\n    /** å³ä¾§ä½ç½®è¡å¼ç¨ */\r\n    drr?: any;\r\n    editors?: any[];\r\n}\r\n\r\nexport const initDataGridState: FarrisDatagridState = {\r\n    idField: 'id',\r\n    showLineNumber: false,\r\n    selections: [],\r\n    checkedRows: [],\r\n    currentRow: null,\r\n    columnsGroup: null,\r\n    columns: [],\r\n    fitColumns: false,\r\n    onlySelectSelf: true,\r\n    selectOnCheck: true,\r\n    checkOnSelect: true,\r\n    pageIndex: 1,\r\n    pageSize: 20,\r\n    pagerHeight: 40,\r\n    checkboxColumnWidth: 36,\r\n    pagination: false,\r\n    virtual: {\r\n        rowIndex: 0,\r\n        scrollTop: 0,\r\n        topHideHeight: 0,\r\n        bottomHideHeight: 0,\r\n        isScrollChange: false\r\n    },\r\n    sortName: undefined,\r\n    sortOrder: undefined,\r\n    multiSort: false,\r\n    remoteSort: true,\r\n    changes: null,\r\n    showGroupColumn: false\r\n};\r\n\r\nexport interface CellInfo {\r\n    isEditing?: boolean;\r\n    rowData?: any;\r\n    rowId?: any;\r\n    rowIndex?: number;\r\n    field?: string;\r\n    cellElement?: any;\r\n    cellRef?: any;\r\n    editor?: any;\r\n    column?: any;\r\n    cellEditorRef?: any;   //  GridCellEditorDirective\r\n    lastRow?: boolean;\r\n}\r\n\r\nexport interface DataResult {\r\n    footer?: any[];\r\n    items: any[];\r\n    total?: number;\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n}\r\n/** è¡ç´¢å¼ */\r\nexport const ROW_INDEX_FIELD = '__row_index__';\r\n/** æ¯å¦ä¸ºåç»è¡ */\r\nexport const IS_GROUP_ROW_FIELD = '__group__';\r\n/** å¼ç¨çåç»è¡å±æ§ */\r\nexport const GROUP_ROW_FIELD = '__group_parent_id__';\r\n/** æ¯å¦ä¸ºåç»åè®¡è¡ */\r\nexport const IS_GROUP_FOOTER_ROW_FIELD = '__group_footer__';\r\nexport const GROUP_VISIBLE_FIELD = '__group_visible__';\r\nexport const GROUP_LEVEL_FIELD = '__group_level__';\r\n\r\n\r\nexport interface DatagridGroupRow {\r\n    /** æ è¯æ­¤æ°æ®è¡ä¸ºåç»è¡ */\r\n    [IS_GROUP_ROW_FIELD]: boolean;\r\n    /** åç»ç­çº§ */\r\n    level: number;\r\n    /** æå¨è¡æ°æ® */\r\n    data: any;\r\n    /** åç»å­æ®µå¼ */\r\n    value: any;\r\n    /** åç»è¡æ¯å¦å¯è§ */\r\n    [GROUP_VISIBLE_FIELD]: boolean;\r\n    /** æ¯å¦å±å¼åç»è¡ */\r\n    expanded: boolean;\r\n    /** åç»å­æ®µ */\r\n    field: string;\r\n    colspan: number;\r\n    /** åç»æ»è®°å½æ° */\r\n    total: number;\r\n    /** åç»æ°æ®è¡ */\r\n    rows: any;\r\n    /** ç¶çº§åç»è¡ */\r\n    [GROUP_ROW_FIELD]: any;\r\n}\r\n\r\n\r\nexport const IgnoreProperties = [\r\n    'afterEdit',\r\n    'app',\r\n    'beforeCheck',\r\n    'beforeClickCell',\r\n    'beforeEdit',\r\n    'beforeSelect',\r\n    'beforeSortColumn',\r\n    'beforeUncheck',\r\n    'beforeUnselect',\r\n    'beginEdit',\r\n    'cancelEdited',\r\n    'cd',\r\n    'cellClick',\r\n    'checkAll',\r\n    'checkValuesChange',\r\n    'checked',\r\n    'checkedChange',\r\n    'clientFilterService',\r\n    'colFormatSer',\r\n    'columnMoved',\r\n    'columnSorted',\r\n    'componentType',\r\n    'dataChange',\r\n    'dblclickRow',\r\n    'destroy$',\r\n    'dfs',\r\n    'dgColumns',\r\n    'dgContainer',\r\n    'dgPager',\r\n    'dgs',\r\n    'domSanitizer',\r\n    'editors',\r\n    'el',\r\n    'endEdit',\r\n    'farrisInstances',\r\n    'filterChanged',\r\n    'footerTemplate',\r\n    'groupFieldChange',\r\n    'groupFields$',\r\n    'inject',\r\n    'lastCellEnterHandle',\r\n    'loadSuccess',\r\n    'localeService',\r\n    'longTextArea',\r\n    'rowAppended',\r\n    'rowClick',\r\n    'rowDeleted',\r\n    'render2',\r\n    'pageSizeChanged',\r\n    'onDocumentMouseDown',\r\n    'pageChanged',\r\n    'resizeProxy',\r\n    'resizeProxyBg',\r\n    'ro',\r\n    'rowUpdated',\r\n    'scrollInstance',\r\n    'scrollY',\r\n    'scrollYLoad',\r\n    'selectAll',\r\n    'selectChanged',\r\n    'sms',\r\n    'selectValueChange',\r\n    'selectValuesChange',\r\n    'settingService',\r\n    'smartFilterService',\r\n    'subscriptions',\r\n    'trackByRows',\r\n    'unCheckAll',\r\n    'unChecked',\r\n    'unSelect',\r\n    'unSelectAll',\r\n    'zone',\r\n    '__component_type__',\r\n    '__pagination',\r\n    '_active_datagrid_cls',\r\n    '_autoFitColumns',\r\n    '_blured_datagrid_cls',\r\n    '_columns',\r\n    '_custom_datagrid_cls',\r\n    '_editable',\r\n    '_fields',\r\n    '_fit',\r\n    '_fitColumns',\r\n    '_footerData',\r\n    '_groupField',\r\n    '_isResized',\r\n    '_loading',\r\n    '_lockPagination',\r\n    '_selectedRow',\r\n    '_showRowGroupPanel',\r\n    '_sizeType',\r\n    '_total',\r\n];\r\n","import { TR_PREFIX } from \"../types\";\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 20:31:27\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nexport class Utils {\r\n\r\n    static uuid() {\r\n        function S4() {\r\n            // tslint:disable-next-line: no-bitwise\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\r\n    }\r\n\r\n    static keysInData(field, data) {\r\n        const noProperty = 'no property';\r\n        const val = field.split('.').reduce((obj, key) => {\r\n            if (obj && obj.hasOwnProperty(key)) {\r\n                return obj[key];\r\n            } else {\r\n                return noProperty;\r\n            }\r\n        }, data);\r\n\r\n        return val != noProperty;\r\n    }\r\n\r\n    /**\r\n     * è·åå¯¹è±¡ä¸­æå®å­æ®µçå¼ã field: å¯ä»¥ä¸ºå¸¦æå±çº§ç»æçè·¯å¾ï¼å¦ï¼ user.firstName | name ç­\r\n     */\r\n    static getValue(field: string, data: any, safe = false) {\r\n        if (!data) {\r\n            return  '';\r\n        }\r\n        let resultVal = '';\r\n        if (field.indexOf('.') === -1 || data.hasOwnProperty(field)) {\r\n            resultVal = data[field];\r\n        } else {\r\n            resultVal = field.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n\r\n        if (safe) {\r\n            return this.escapeValue(resultVal);\r\n        }\r\n        return resultVal;\r\n    }\r\n\r\n    static setValue( field: string, val: any, obj: { [key: string]: any }, nest = true) {\r\n        if (field) {\r\n            if (field.indexOf('.') > -1 && nest) {\r\n                let lastObj = null;\r\n                const _fields = field.split('.');\r\n                _fields.reduce( (c, p) => {\r\n                    lastObj = c;\r\n                    return c[p];\r\n                }, obj);\r\n\r\n                if (lastObj) {\r\n                    lastObj[_fields.pop()] = val;\r\n                }\r\n            } else {\r\n                obj[field] = val;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** è·åå¤è¯­å¼ */\r\n    static getMultilingualValue(valObj, localeId) {\r\n        if (valObj && typeof valObj === 'object' && Object.keys(valObj).length > 0) {\r\n            localeId = localeId || 'zh-CHS';\r\n            const val = valObj[localeId];\r\n            if (val !== undefined) {\r\n                return val;\r\n            } else {\r\n                return '';\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n\r\n    static escapeValue(val: any) {\r\n        if (val === null || val === undefined || val === '') {\r\n            return '';\r\n        }\r\n\r\n        const escapeHTML = (unsafe_str) => {\r\n            return unsafe_str\r\n                .replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\\\"/g, '&quot;')\r\n                .replace(/\\'/g, '&#39;')\r\n                .replace(/\\//g, '&#x2F;');\r\n                // .replace('src','drc');\r\n        };\r\n\r\n        if (typeof val === 'string') {\r\n            return escapeHTML(val);\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n    static eventPath(evt: any) {\r\n        const path = (evt.composedPath && evt.composedPath()) || evt.path;\r\n        const target = evt.target;\r\n\r\n        if (path != null) {\r\n            return (path.indexOf(window) < 0) ? path.concat(window) : path;\r\n        }\r\n\r\n        if (target === window) {\r\n            return [window];\r\n        }\r\n\r\n        const getParents = (node, memo = undefined) => {\r\n            memo = memo || [];\r\n            const parentNode = node.parentNode;\r\n\r\n            if (!parentNode) {\r\n                return memo;\r\n            } else {\r\n                return getParents(parentNode, memo.concat(parentNode));\r\n            }\r\n        };\r\n\r\n        return [target].concat(getParents(target), window);\r\n    }\r\n\r\n    static hasDialogOpen() {\r\n        // return document.body.classList.value.indexOf('modal-open') > -1;\r\n        // å¼å®¹IE 11\r\n        return document.body.className.indexOf('modal-open') > -1;\r\n    }\r\n\r\n    static on(el, evt, fn, opts: any = {}) {\r\n        const delegatorFn = e => e.target.matches(opts.target) && fn.call(e.target, e);\r\n        el.addEventListener(evt, opts.target ? delegatorFn : fn, opts.options || false);\r\n        return () => {\r\n            el.removeEventListener(evt, delegatorFn, opts);\r\n        };\r\n    }\r\n\r\n    static off(el, evt, fn= () => {}, opts: any = {}) {\r\n        el.removeEventListener(evt, fn, opts);\r\n    }\r\n    /** è·åå­ç¬¦é¿åº¦ï¼ä¸­ææ±å­å 2ä¸ªå­ç¬¦ */\r\n    static getBLen(str) {\r\n        if (str == null) {\r\n            return 0;\r\n        }\r\n        if (typeof str !== 'string') {\r\n          str += '';\r\n        }\r\n        return str.replace(/[^\\x00-\\xff]/g, '01').length;\r\n    }\r\n\r\n    // static difference(first: any[], second: any[]): any[] {\r\n    //     return first.filter(item => !second.includes(item));\r\n    // }\r\n\r\n    // static getDiffItems(arr1, arr2) {\r\n    //     const diff1 = Utils.difference(arr1, arr2);\r\n    //     const diff2 = Utils.difference(arr2, arr1);\r\n\r\n    //     return diff1.concat(diff2);\r\n    // }\r\n\r\n    static getWhenEmptyText(col: any, localeId) {\r\n\r\n        const EMPTY_INPUT_TEXT = {\r\n            'zh-CHS': 'è¯·è¾å¥',\r\n            'zh-CHT': 'è«è¼¸å¥',\r\n            en: 'Please input'\r\n        };\r\n\r\n        const EMPTY_SELECT_TEXT = {\r\n            'zh-CHS': 'è¯·éæ©',\r\n            'zh-CHT': 'è«é¸æ',\r\n            en: 'Please select'\r\n        };\r\n\r\n\r\n        if (col.editor) {\r\n            switch (col.editor.type) {\r\n                case 'datepicker':\r\n                case 'select':\r\n                case 'lookup':\r\n                case 'combolist':\r\n                case 'combo-lookup':\r\n                    return  EMPTY_SELECT_TEXT[localeId];\r\n                default:\r\n                    return EMPTY_INPUT_TEXT[localeId];\r\n            }\r\n        }\r\n\r\n        // æ§å¶é¢æ¿å\r\n        if (col.field === '_datagrid-setting-control_') {\r\n            return '';\r\n        }\r\n\r\n        return EMPTY_INPUT_TEXT[localeId];\r\n    }\r\n\r\n    static getRowIdByTr(tr) {\r\n        if (tr) {\r\n            let id = tr.getAttribute('id');\r\n\r\n            if (id == null || id == undefined) {\r\n                return null;\r\n            }\r\n            return id.replace(TR_PREFIX, '').replace('_fixedright', '').replace('_fixedleft', '').replace('_grouprow', '');\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static getTrDomById(dataid, parentElement) {\r\n        if (parentElement) {\r\n            return parentElement.querySelector(`[id=\"${dataid}\"]`);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n","import { DataColumn, ColumnFilterType } from './../types/data-column';\r\nimport { bindCallback, of } from 'rxjs';\r\n\r\nexport class DatagridColumnsHelper {\r\n\r\n    static gridInstance = null;\r\n\r\n    /** è·åæ»åæ° */\r\n    private static getColumnTotal(firstCols: any[]) {\r\n        let total = 0;\r\n        firstCols.forEach(n => {\r\n            total += (n.colspan || 1);\r\n        });\r\n        return total;\r\n    }\r\n\r\n    // æ¥æ¾æªèµå¼é¡¹çç´¢å¼\r\n    private static findUndefinedItem(arr) {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            if (arr[i] == undefined) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    private static getColumnFields(columns) {\r\n        const aa = [];\r\n        // æ ¹æ®ç¬¬ä¸è¡è®¡ç®æ»åæ°\r\n        const colTotal = DatagridColumnsHelper.getColumnTotal(columns[0]);\r\n        // åå»ºç©ºæ°ç»\r\n        for (let i = 0; i < columns.length; i++) {\r\n            aa[i] = new Array(colTotal);\r\n        }\r\n        for (let i = 0; i < columns.length; i++) {\r\n            columns[i].forEach(col => {\r\n                let k = DatagridColumnsHelper.findUndefinedItem(aa[i]);\r\n                if (k >= 0) {\r\n                    const field = col.field || col.id || '';\r\n                    for (let c = 0; c < (col.colspan || 1); c++) {\r\n                        for (let r = 0; r < (col.rowspan || 1); r++) {\r\n                            aa[i + r][k] = field;\r\n                        }\r\n                        k++;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return aa;\r\n    }\r\n\r\n    static columnIsVisible(col: any, ins: any) {\r\n        if (col.visible === undefined) {\r\n            col.visible = true;\r\n        }\r\n\r\n        const t = typeof col.visible;\r\n        if (t === 'boolean') {\r\n            return col.visible;\r\n        } else if ( t === 'function') {\r\n            return col.visible({instance: ins, column: col});\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    static getFields(columns) {\r\n        // ç§»é¤éèçå\r\n        const _cols = columns.map(cols => {\r\n            cols = cols.filter(col => DatagridColumnsHelper.columnIsVisible(col, DatagridColumnsHelper.gridInstance));\r\n            return cols;\r\n        });\r\n\r\n        const fields =  DatagridColumnsHelper.getColumnFields(_cols);\r\n        return fields.length ? fields[fields.length - 1] : fields;\r\n    }\r\n\r\n    static getFilterEnumOptions(column: DataColumn) {\r\n        let enumSetting = null;\r\n        if (column.filter.type === ColumnFilterType.enum) {\r\n            const fmt = column.formatter as any;\r\n            if (fmt) {\r\n                enumSetting = fmt.options;\r\n            } else {\r\n                if (column.filter.options) {\r\n                    enumSetting = column.filter.options;\r\n                }\r\n            }\r\n        }\r\n\r\n        return enumSetting;\r\n    }\r\n\r\n    static getEnumText(enumOpts: any, value1: any) {\r\n        if (!enumOpts) {\r\n            return  '';\r\n        }\r\n        const { valueField, textField, data } = enumOpts;\r\n        let str = '';\r\n        if (value1) {\r\n            str += ` ${value1.map(v => {\r\n                const enumItem = data.find(d => d[valueField] === v);\r\n                return enumItem[textField];\r\n            }).join(',')}`;\r\n        }\r\n        return str;\r\n    }\r\n\r\n    static columnVisibleAsObservable(col: DataColumn) {\r\n        if (typeof col.visible === 'function') {\r\n            const visibleAsObservable = bindCallback(col.visible);\r\n            return visibleAsObservable();\r\n        }\r\n        return of(col.visible);\r\n    }\r\n\r\n    static getParentColumns(col: DataColumn, allCols) {\r\n        const arr = [];\r\n        const _getParents = (c) => {\r\n            if (c && c.parentId) {\r\n                const parentCol = allCols.find(n => n.id === c.parentId);\r\n                // arr.splice(0, 0, parentCol);\r\n                arr.push(parentCol);\r\n                _getParents(parentCol);\r\n            }\r\n        };\r\n        _getParents(col);\r\n        return arr;\r\n    }\r\n\r\n    static getChildColumns(col: DataColumn, allCols) {\r\n        const arr = [];\r\n        const _getChilds = (c) => {\r\n            if (c && c.parentId) {\r\n                const childs = allCols.filter(n => n.parentId === c.id);\r\n                arr.splice(0, 0, ...childs);\r\n                childs.forEach(child => {\r\n                    _getChilds(child);\r\n                });\r\n            }\r\n        };\r\n        _getChilds(col);\r\n        return arr;\r\n    }\r\n\r\n    // æ£æ¥å¤è¡¨å¤´æ¶ï¼è®¾è®¡å¨ä¸­å°åè®¾ä¸ºéè\r\n    static checkGroupHeaderColumnVisible(allCols) {\r\n        const hiddenFields = allCols.filter(n => n.visible === false).map(n => n.field);\r\n        hiddenFields.forEach(field => {\r\n            const _col = allCols.find(col => col.field === field || col.id === field);\r\n            if (_col) {\r\n                const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);\r\n\r\n                parents.forEach(p => {\r\n                    const _childs = allCols.filter(n => n.parentId === p.id && (n.visible || n.visible === undefined) );\r\n                    p.colspan = _childs.reduce(( r, c ) => {\r\n                        r = r + (c.colspan || 1);\r\n                        return r;\r\n                    }, 0);\r\n                    p.visible = !!p.colspan;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // å¤è¡¨å¤´ä¸ä»æä¸åæ¾ç¤º\r\n    static onlyOneColumn() {\r\n\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 07:39:45\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { Injectable, EventEmitter } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, of, merge, Subject } from 'rxjs';\r\nimport { map, distinctUntilChanged, filter, switchMap, auditTime, debounceTime, debounce } from 'rxjs/operators';\r\nimport { DataColumn, ColumnGroup, CalculationType } from '../types';\r\nimport { FarrisDatagridState, initDataGridState, DataResult, CellInfo, VirtualizedState, SelectedRow,\r\n        RowDataChanges, ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD, GROUP_LEVEL_FIELD } from './state';\r\nimport { VirtualizedLoaderService } from './virtualized-loader.service';\r\nimport { DatagridRow } from '../types/datagrid-row';\r\nimport { cloneDeep, groupBy, sumBy, maxBy, minBy, meanBy, isPlainObject, flatten } from 'lodash-es';\r\nimport { Utils } from '../utils/utils';\r\nimport { DatagridColumnsHelper } from './datagrid-columns.helper';\r\nimport { BigNumber } from 'bignumber.js';\r\n@Injectable()\r\nexport class DatagridFacadeService {\r\n\r\n    localId = 'zh-CHS';\r\n\r\n    protected _state: FarrisDatagridState;\r\n    // public virtualizedService: VirtualizedLoaderService;\r\n\r\n    store = new BehaviorSubject<FarrisDatagridState>(null);\r\n\r\n    virtualRowSubject = new BehaviorSubject<any>(null);\r\n    gridSizeSubject = new Subject<any>();\r\n    errorSubject = new Subject();\r\n    private selectRowSubject = new Subject<any>();\r\n    private unSelectRowSubject = new Subject<any>();\r\n    private columnResizeSubject = new Subject<any>();\r\n    private clearSelectionSubject = new Subject();\r\n    private checkRowSubject = new Subject<any>();\r\n    private unCheckRowSubject = new Subject<any>();\r\n    private clearCheckedsSubject = new Subject<any>();\r\n    private clearAllSubject = new Subject<any>();\r\n    private checkAllSubject = new Subject();\r\n    private unCheckAllSubject =  new Subject();\r\n    private selectAllSubject = new Subject();\r\n    private selectCellSubject = new Subject();\r\n\r\n    error$ = this.errorSubject.asObservable();\r\n    selectRow$ = this.selectRowSubject.asObservable();\r\n    unSelectRow$ =  this.unSelectRowSubject.asObservable();\r\n    columnResize$ = this.columnResizeSubject.asObservable();\r\n    clearSelections$ = this.clearSelectionSubject.asObservable();\r\n    checkRow$ = this.checkRowSubject.asObservable();\r\n    unCheckRow$ = this.unCheckRowSubject.asObservable();\r\n    clearCheckeds$ = this.clearCheckedsSubject.asObservable();\r\n    clearAll$ = this.clearAllSubject.asObservable();\r\n    checkAll$ = this.checkAllSubject.asObservable();\r\n    unCheckAll$ = this.unCheckAllSubject.asObservable();\r\n    selectAll$ = this.selectAllSubject.asObservable();\r\n    currentCell$ = this.selectCellSubject.asObservable();\r\n    editCell$ = new EventEmitter();\r\n    clientSort$ = new EventEmitter();\r\n    rowAppend$ = new EventEmitter();\r\n    rowUpdate$ = new EventEmitter();\r\n    rowDelete$ = new EventEmitter();\r\n\r\n    expandGroupRow =  new EventEmitter();\r\n    collapseGroupRow =  new EventEmitter();\r\n\r\n    updateCheckboxState$ = new EventEmitter();\r\n\r\n    readonly state$ = this.store.asObservable().pipe(\r\n        filter( (state: any) => state)\r\n    );\r\n\r\n    readonly columnGroup$ = this.gridSizeSubject.asObservable().pipe(\r\n        filter( (state: any) => state),\r\n        map((state: FarrisDatagridState) => state.columnsGroup),\r\n        switchMap((colgroup: any) => {\r\n            return of( colgroup);\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    gridSize$ = this.gridSizeSubject.asObservable().pipe(\r\n        filter( (state: any) => state),\r\n        map((state: FarrisDatagridState) => {\r\n            const { headerHeight, pagerHeight, width, columnsGroup, height, rowHeight } = {...state};\r\n            return { headerHeight, pagerHeight, width, columnsGroup, height, rowHeight };\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    readonly data$ = this.virtualRowSubject.pipe(\r\n        filter(vs => vs),\r\n        switchMap((vs: VirtualizedState) => {\r\n            return of({\r\n                index: vs.startIndex || 0,\r\n                rows: vs.virtualRows || [],\r\n                top: vs.topHideHeight,\r\n                bottom: vs.bottomHideHeight,\r\n                scrolling: vs.isScrollChange\r\n            });\r\n        }),\r\n        distinctUntilChanged()\r\n    );\r\n\r\n    difference = (first: any[], second: any[]) => first.filter(item => !second.includes(item));\r\n    differenceBy = (a, b, fn) => {\r\n        const s = new Set(b.map(fn));\r\n        return a.map(fn).filter(el => !s.has(el));\r\n    }\r\n\r\n    constructor(private http: HttpClient) {\r\n        this._state =  cloneDeep(initDataGridState);\r\n    }\r\n\r\n    updateVirthualRows(scrolltop: number, isScrollChange = false) {\r\n        const virtual = this.getVirthualRows(scrolltop);\r\n        virtual.isScrollChange = isScrollChange;\r\n        this.updateState({virtual}, false);\r\n        this.virtualRowSubject.next(virtual);\r\n    }\r\n\r\n    getVirthualRows(scrolltop): VirtualizedState {\r\n        if (scrolltop === undefined) {\r\n            scrolltop = 0;\r\n        }\r\n\r\n        const data =  this._state.data || [];\r\n        const virtual = {rowIndex: 0, virtualRows: data, topHideHeight: 0, bottomHideHeight: 0 };\r\n\r\n        if (data.length === 0 || (this._state.autoHeight && !this._state.groupRows)) {\r\n            virtual.virtualRows = data;\r\n            return virtual;\r\n        }\r\n\r\n        if (this._state.flatColumns && this._state.flatColumns.length) {\r\n            // data = this._state.data;\r\n\r\n            // if (!this._state.groupRows) {\r\n            //     if (this._state.virtual && this._state.virtualized) {\r\n            //         this.virtualizedService.state = this._state;\r\n            //         const rows = this.virtualizedService.getRows(scrolltop);\r\n            //         virtual = { ...this._state.virtual, ...rows };\r\n            //     } else {\r\n            //         virtual.virtualRows = data;\r\n            //     }\r\n            // } else {\r\n            //     // è¡åç»æ°æ®å¤ç\r\n            //     const groupRows = this.groupRows2(cloneDeep(data));\r\n            //     virtual.virtualRows = groupRows;\r\n            // }\r\n            if (this._state.groupRows) {\r\n                // è¡åç»æ°æ®å¤ç\r\n                const groupRows = this.groupRows2(cloneDeep(data));\r\n                virtual.virtualRows = groupRows;\r\n            }\r\n        }\r\n\r\n        if (this._state.mergeCell && this._state.enableClientSortForMergeCell) {\r\n            virtual.virtualRows = this.sort(virtual.virtualRows);\r\n        }\r\n\r\n        return virtual;\r\n    }\r\n\r\n    getData(original = false) {\r\n        if (original) {\r\n            return this._state.originalData || [];\r\n        }\r\n        return this._state.data || [];\r\n    }\r\n\r\n    getState() {\r\n        return this._state;\r\n    }\r\n\r\n    getVirtualState() {\r\n        return this._state.virtual;\r\n    }\r\n\r\n    getPageInfo() {\r\n        const { pageIndex, pageSize } = {...this._state};\r\n        return { pageIndex, pageSize };\r\n\r\n    }\r\n\r\n    initState(state: Partial<FarrisDatagridState>) {\r\n        this.updateState(state, false);\r\n        this._state.originalData = cloneDeep(this._state.data);\r\n        this.initColumns();\r\n\r\n        this.gridSizeSubject.next(this._state);\r\n        this.updateVirthualRows(0);\r\n    }\r\n\r\n\r\n    /** å è½½æ°æ®\r\n     * @param data: æ°æ®åè¡¨\r\n     * @param updateOriginalData æ¯å¦æ´æ°åå§æ°æ®, é»è®¤ä¸º true\r\n     */\r\n    loadData(data: any, updateOriginalData = true, sortable = false) {\r\n        data = data || [];\r\n        this.updateState({ data }, false);\r\n\r\n        if (updateOriginalData) {\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n        }\r\n        if (sortable && this._state.sortName) {\r\n            const sortedData = this.sort(this._state.data);\r\n            this.updateState({ data: sortedData }, false);\r\n        } else {\r\n            // this.updateState({ data: this._state.originalData }, false);\r\n        }\r\n\r\n        this.updateVirthualRows(this._state.virtual.scrollTop || 0);\r\n        this._state.checkedRows = this.getCheckedRowsFromSource();\r\n    }\r\n\r\n    /** å¤åæå®è¡çæ°æ® */\r\n    resetRow(rowId: any) {\r\n        const origData = this._state.originalData;\r\n        if (origData) {\r\n            const origRowData = origData.find(r => this.primaryId(r) === rowId);\r\n            this.getCurrentRow().data = cloneDeep(origRowData);\r\n            this.updateRow(rowId, origRowData);\r\n        }\r\n    }\r\n\r\n    // loadDataForVirtual(data: any) {\r\n    //     this.updateState({ data }, false);\r\n    //     // this.virtualizedService.state = this._state;\r\n    //     const virtual = { ...this._state.virtual, ...this.virtualizedService.reload() };\r\n    //     this.virtualRowSubject.next(virtual);\r\n    //     this.updateState({virtual});\r\n    // }\r\n\r\n    fetchData(url: string): Observable<DataResult> {\r\n        return this.http.get(url).pipe(\r\n            map( r => r as DataResult )\r\n        );\r\n    }\r\n\r\n    setTotal(total: number) {\r\n        this.updateState( {total}, false );\r\n    }\r\n\r\n    updateProperty(property: string, value: any) {\r\n        this.updateState({ [property]: value }, false);\r\n    }\r\n\r\n    setPagination(pageIndex: number, pageSize: number, total: number) {\r\n        this.updateState( { pageIndex, pageSize, total }, false);\r\n    }\r\n\r\n    setScrollTop(scrollTop: number) {\r\n        const virtual = { ...this._state.virtual, scrollTop};\r\n        this.updateState({virtual}, false);\r\n    }\r\n\r\n    isMultiSelect() {\r\n        return this._state.multiSelect;\r\n    }\r\n\r\n    private _isRowSelected(id: any) {\r\n        if (!id || !this._state.currentRow) {\r\n            return false;\r\n        } else {\r\n            return this._state.currentRow.id.toString() === id.toString();\r\n        }\r\n    }\r\n\r\n    isRowSelected(id: any, selections = null) {\r\n        const flag = this._isRowSelected(id);\r\n        if (!this.isMultiSelect() || this._state.onlySelectSelf) {\r\n           return flag;\r\n        } else {\r\n            if (!selections) {\r\n                selections = this._state.selections;\r\n            }\r\n\r\n            if (this._canCancelSelectWhenMulti()) {\r\n                return flag;\r\n            }\r\n\r\n            if (!selections || selections.length === 0) {\r\n                return false;\r\n            } else {\r\n                return selections.findIndex(sr => sr.id == id) > -1;\r\n            }\r\n        }\r\n    }\r\n\r\n    isRowChecked(id: any, checkeds = null) {\r\n        if (!checkeds) {\r\n            checkeds = this.getCheckeds();\r\n        }\r\n        if (!id || !checkeds.length) {\r\n            return false;\r\n        }\r\n\r\n        return checkeds.findIndex(sr => sr.id.toString() === id.toString()) > -1;\r\n    }\r\n\r\n    isCheckAll() {\r\n        const allRows = this.getAllRowsForLive().map(r => this.primaryId(r));\r\n        const checkIds = this._state.checkedRows.map(r => r.id);\r\n        if (this.difference(allRows, checkIds).length) {\r\n            return false; // this._state.checkedRows.length === allRows.length;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    getCurrentPageCheckeds() {\r\n        const allRows = this.getAllRowsForLive().map(r => this.primaryId(r));\r\n        return this._state.checkedRows.filter(n => allRows.indexOf(n.id) > -1);\r\n    }\r\n\r\n    getCurrentRow() {\r\n        return this._state.currentRow || undefined;\r\n    }\r\n\r\n    getSelections() {\r\n        // å¦ææ°æ®æºåäºï¼éè¦éæ°è®¡ç®\r\n        const data = this._state.data;\r\n        if (this._state.selections && this._state.selections.length) {\r\n            if (!data || !data.length) {\r\n                this._state.selections = [];\r\n            } else {\r\n                const temp: any[] = data.map(n => this.primaryId(n));\r\n                this._state.selections = this._state.selections.filter(n => {\r\n                    return temp.includes(n.id);\r\n                });\r\n            }\r\n        }\r\n        return this._state.selections || [];\r\n    }\r\n\r\n    private getCheckedRowsFromSource() {\r\n        return (this._state.checkedRows || []).map(n => {\r\n            const d = this.findRow(n.id);\r\n            if (d && d.data) {\r\n                n.data = d.data;\r\n            }\r\n            return n;\r\n        });\r\n    }\r\n\r\n    getCheckeds(fromDataSource = false) {\r\n        if (fromDataSource) {\r\n            this._state.checkedRows = this.getCheckedRowsFromSource();\r\n        }\r\n\r\n        return this._state.checkedRows || [];\r\n    }\r\n\r\n    updateCheckedData(rowid: any, rowData: { [key: string]: string }) {\r\n        const checkeds = this.getCheckeds();\r\n        if (checkeds.length) {\r\n            const item = checkeds.find(n => this.primaryId(n) == rowid);\r\n            if (item) {\r\n                Object.keys(rowData).forEach(k => {\r\n                    Utils.setValue(k, rowData[k], item.data);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    setCheckedRows(ids: string[], checked = true) {\r\n        if (ids && ids.length) {\r\n            let checkeds = this._state.checkedRows || [];\r\n\r\n            ids.forEach(id => {\r\n                const row = this.findRow(id);\r\n                if (checked && row) {\r\n                    if ( !this.isRowChecked(id, checkeds)) {\r\n                        const srow = { id: this.primaryId(row.data), data: row.data, index: row.index };\r\n                        checkeds.push(srow);\r\n                    }\r\n                } else {\r\n                    if (!this._state.enableMorePageSelect || !checked) {\r\n                        checkeds = checkeds.filter(sr => sr.id !== id);\r\n                    }\r\n                }\r\n            });\r\n            this._state.checkedRows = checkeds;\r\n        } else {\r\n            this._clearCheckeds();\r\n        }\r\n    }\r\n\r\n    checkRecord(id: any, checked = true) {\r\n        if (id) {\r\n            const row = this.findRow(id);\r\n            if (row) {\r\n                const {index: rowIndex, data: rowData} = {...row};\r\n                if (checked) {\r\n                    this.checkRow(rowIndex, rowData);\r\n                } else {\r\n                    this.unCheckRow(rowIndex, rowData);\r\n                }\r\n            } else {\r\n                this.errorSubject.next(`æªæ¾å°IDä¸º${id}çæ°æ®ã`);\r\n            }\r\n        } else {\r\n            this.errorSubject.next(`åæ°id ä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    checkRow(rowIndex: number, rowData: any, grid: any = null) {\r\n        if (!this._state.multiSelect) {\r\n            this._clearCheckeds();\r\n        }\r\n\r\n        const id = this.primaryId(rowData);\r\n        const checkeds = this._state.checkedRows || [];\r\n\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n        if (id && !this.isRowChecked(id, checkeds)) {\r\n            checkeds.push(srow);\r\n            this._state.checkedRows = checkeds;\r\n\r\n            if (this._state.selectOnCheck) {\r\n                if (grid && grid.instance && grid.instance.beforeSelect) {\r\n                    grid.instance.beforeSelect({ rowIndex, rowData, gridInstance: grid.instance }).subscribe((e) => {\r\n                        if (e) {\r\n                            this.selectRow(rowIndex, rowData);\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.selectRow(rowIndex, rowData);\r\n                }\r\n            }\r\n\r\n            this.checkRowSubject.next(srow);\r\n        }\r\n\r\n        this.updateCheckboxState$.emit({...srow, checked: true});\r\n    }\r\n\r\n    unCheckRow(rowIndex: number, rowData: any, grid: any = null) {\r\n        const id = this.primaryId(rowData);\r\n        let checkeds = this._state.checkedRows || [];\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n        if (this.isRowChecked(id, checkeds)) {\r\n            checkeds = checkeds.filter(sr => '' + sr.id !== '' + id);\r\n            this._state.checkedRows = checkeds;\r\n\r\n            if (this._state.selectOnCheck) {\r\n                if (grid && grid.instance && grid.instance.beforeUnselect) {\r\n                    grid.instance.beforeUnselect({ rowIndex, rowData, gridInstance: grid.instance }).subscribe((e) => {\r\n                        if (e) {\r\n                            this.unSelectRow(rowIndex, rowData);\r\n                        }\r\n                    });\r\n                } else  {\r\n                    this.unSelectRow(rowIndex, rowData);\r\n                }\r\n            }\r\n\r\n            this.unCheckRowSubject.next(srow);\r\n        }\r\n\r\n        this.updateCheckboxState$.emit({...srow, checked: false});\r\n    }\r\n\r\n    setCurrentPageData(data: any) {\r\n        this._state.currentPageData = data;\r\n    }\r\n\r\n    getCurrentPageData() {\r\n        return this._state.currentPageData || [];\r\n    }\r\n\r\n\r\n    /** è·åææå¯ä»¥æä½çè¡ */\r\n    private getAllRowsForLive() {\r\n        let allData = this._state.data || [];\r\n\r\n        if (this._state.pagination && !this._state.pagerOnServer) {\r\n            // è·åå½åé¡µæ°æ®\r\n            allData = this.getCurrentPageData();\r\n        }\r\n\r\n        // æé¤æç¦ç¨çè¡\r\n        if (this._state.disableRow) {\r\n            allData = allData.filter((n, i) => !this._state.disableRow(n, i));\r\n        }\r\n        return allData;\r\n    }\r\n\r\n    checkAll() {\r\n        this._state.checkedRows = this._state.checkedRows || [];\r\n        const allData = this.getAllRowsForLive();\r\n        const allCheckeds = allData.map( (r, i) => {\r\n            return {\r\n                id: this.primaryId(r),\r\n                index: i,\r\n                data: r\r\n            };\r\n        });\r\n\r\n        if (!this._state.checkedRows.length) {\r\n            this._state.checkedRows = allCheckeds;\r\n        } else {\r\n            const _checkeds = [];\r\n            allCheckeds.forEach(element => {\r\n                if (!this._state.checkedRows.find(n => n.id == element.id)) {\r\n                    _checkeds.push(element);\r\n                }\r\n            });\r\n\r\n            this._state.checkedRows = this._state.checkedRows.concat(_checkeds);\r\n        }\r\n\r\n\r\n        if (this._state.selectOnCheck && !this._state.onlySelectSelf) {\r\n            this._state.selections = [];\r\n            this._state.selections = allData.map( (r, i) => {\r\n                return {\r\n                    id: this.primaryId(r),\r\n                    index: i,\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.checkAllSubject.next(this._state.checkedRows);\r\n    }\r\n\r\n    selectAll() {\r\n        this._state.selections = [];\r\n\r\n        const allData = this.getAllRowsForLive();\r\n\r\n        this._state.selections = allData.map( (r, i) => {\r\n            return {\r\n                id: this.primaryId(r),\r\n                index: i,\r\n                data: r\r\n            };\r\n        });\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this._state.checkedRows = [];\r\n            this._state.checkedRows = allData.map( (r, i) => {\r\n                return {\r\n                    id: this.primaryId(r),\r\n                    index: i,\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.selectAllSubject.next(this._state.selections);\r\n    }\r\n\r\n    findRow(id): {index: number, data: any} {\r\n        if (this._state.data && this._state.data.length) {\r\n            let index = -1;\r\n            const data = this._state.data.find( (n, i) => {\r\n                const r = this.primaryId(n) == id;\r\n                if (r) {\r\n                    index = i;\r\n                }\r\n                return r;\r\n            });\r\n            if (index === -1) {\r\n                return null;\r\n            }\r\n            return {index, data};\r\n        }\r\n        return null;\r\n    }\r\n\r\n    findRowIndex(id) {\r\n        if (this._state.data && this._state.data.length) {\r\n            return this._state.data.findIndex(n => this.primaryId(n) === id);\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * è®¾ç½®éä¸­è¡ï¼ä¸è§¦ågrid éä¸­äºä»¶ï¼åæ¶éä¸­äºä»¶\r\n     */\r\n    setSelectRow(id: string, select = true, emit = true) {\r\n        const row = this.findRow(id);\r\n        const {index: rowIndex, data: rowData} = {...row};\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n\r\n        if (this.isMultiSelect()) {\r\n            if (select) {\r\n                this.selectRowForMulti(srow, false, emit);\r\n            } else {\r\n                this.unSelectRowForMulti(srow, false, emit);\r\n            }\r\n        }\r\n\r\n        const _sr = select ? srow : null;\r\n        this.updateState({ currentRow: _sr}, false);\r\n    }\r\n\r\n    selectRecord(id: any, select = true) {\r\n        if (id) {\r\n            const row = this.findRow(id);\r\n            if (row) {\r\n                const {index: rowIndex, data: rowData} = {...row};\r\n                if (select) {\r\n                    this.selectRow(rowIndex, rowData);\r\n                } else {\r\n                    this.unSelectRow(rowIndex, rowData);\r\n                }\r\n            } else {\r\n                this.errorSubject.next(`æªæ¾å°IDä¸º${id}çæ°æ®ã`);\r\n            }\r\n        } else {\r\n            this.errorSubject.next(`åæ°id ä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    selectRow(rowIndex: number, rowData: any, gridOpts = null) {\r\n        const isMultiSelect = this.isMultiSelect();\r\n        const id = this.primaryId(rowData);\r\n        const srow = { id, data: rowData, index: rowIndex };\r\n\r\n        if (!this.isRowSelected(id) || !this._state.currentRow) {\r\n            if (!isMultiSelect) {\r\n                this.updateState({ currentRow: srow }, false);\r\n                this.selectRowSubject.next(this._state.currentRow);\r\n\r\n                if (this._state.showCheckbox && this._state.checkOnSelect) {\r\n                    this._state.checkedRows = [ srow ];\r\n\r\n                    if (gridOpts && gridOpts.instance && gridOpts.instance.beforeCheck) {\r\n                        gridOpts.instance.beforeCheck({ rowIndex, rowData, gridInstance: gridOpts.instance }).subscribe(() => {\r\n                            this.checkRowSubject.next(srow);        \r\n                        })\r\n                    } else {\r\n                        this.checkRowSubject.next(srow);\r\n                    }\r\n                }\r\n            } else {\r\n                this.selectRowForMulti(srow, true, gridOpts);\r\n            }\r\n        }\r\n    }\r\n\r\n    private selectRowForMulti(srow: { id: any, data: any, index: any }, emit = true, gridOpts = null) {\r\n        if (this._state.onlySelectSelf) {\r\n            this._clearSelections();\r\n            this.updateState({ currentRow: srow, selections: [srow] }, false);\r\n        } else {\r\n            this._state.selections = this._state.selections || [];\r\n            this._state.selections = this._state.selections.filter(sr => sr.id !== srow.id);\r\n            this._state.selections.push(srow);\r\n        }\r\n        if (emit) {\r\n            this.selectRowSubject.next(srow);\r\n        }\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this.checkRow(srow.index, srow.data, gridOpts);        \r\n        }\r\n    }\r\n\r\n    private unSelectRowForMulti(srow: { id: any, data: any, index: any }, emit = true, gridOpts = null) {\r\n        this._state.selections = this._state.selections.filter(sr => sr.id !== srow.id);\r\n\r\n        if (this._canCancelSelectWhenMulti() || (this._state.currentRow && this._state.currentRow.id === srow.id)) {\r\n            this.updateState({ currentRow: null });\r\n        }\r\n\r\n        if (this._state.checkOnSelect) {\r\n            this.unCheckRow(srow.index, srow.data, gridOpts);\r\n        }\r\n\r\n        if (emit) {\r\n            this.unSelectRowSubject.next(srow);\r\n        }\r\n\r\n    }\r\n\r\n    unSelectRow(rowIndex: number, rowData: any, gridOpts = null) {\r\n        const id = this.primaryId(rowData);\r\n        const isMultiSelect = this.isMultiSelect();\r\n        const srow = {id, index: rowIndex, data: rowData};\r\n        if (!isMultiSelect) {\r\n            if (this._state.currentRow) {\r\n                this.updateState({ currentRow: null });\r\n                this.unSelectRowSubject.next(srow);\r\n                if (this._state.showCheckbox) {\r\n                    this.unCheckRow(srow.index, srow.data, gridOpts);\r\n                }\r\n            }\r\n        } else {\r\n            this.unSelectRowForMulti(srow, true, gridOpts);\r\n        }\r\n    }\r\n\r\n    private _canCancelSelectWhenMulti() {\r\n        return !this._state.keepSelect && this._state.onlySelectSelf;\r\n    }\r\n\r\n    private _clearSelections(excludeIds?: string[]) {\r\n        this._state.currentRow = null;\r\n\r\n        if (!excludeIds || !excludeIds.length ) {\r\n            this._state.selections = [];\r\n        } else {\r\n            this._state.selections = this._state.selections.filter(n => {\r\n                return excludeIds.findIndex(i => i == n.id) > -1;\r\n            });\r\n        }\r\n    }\r\n\r\n    private _clearCheckeds(rows = []) {\r\n        if (!rows.length) {\r\n            this._state.checkedRows = [];\r\n        } else {\r\n            this._state.checkedRows = this._state.checkedRows.filter(n => rows.findIndex(r => this.primaryId(r) === n.id) == -1);\r\n        }\r\n    }\r\n\r\n    clearSelections(excludeIds?: string[]) {\r\n        const rows = this._state.selections;\r\n        excludeIds = excludeIds || [];\r\n        this._clearSelections(excludeIds);\r\n        const unCheckRows = rows.filter(n => excludeIds.findIndex(i => i == n.id) == -1);\r\n        if (this._state.checkOnSelect || (!this._state.multiSelect && this._state.showCheckbox)) {\r\n            // this._state.checkedRows = [];\r\n            // this.clearCheckedsSubject.next(rows);\r\n            this._state.checkedRows = this._state.checkedRows.filter(n => {\r\n                return !rows.find(t1 => t1.id == n.id && excludeIds.findIndex(i => i == n.id) == -1);\r\n            });\r\n            this.clearCheckedsSubject.next(unCheckRows);\r\n        }\r\n        this.clearSelectionSubject.next(unCheckRows);\r\n    }\r\n\r\n    clearCheckeds(clearAll = true) {\r\n        const rows = this.getAllRowsForLive();\r\n        const _rows = clearAll ? [] : rows;\r\n        this._clearCheckeds(_rows);\r\n        if (this._state.selectOnCheck) {\r\n           this._clearSelections();\r\n        }\r\n        this.clearCheckedsSubject.next(rows);\r\n    }\r\n\r\n    clearAll() {\r\n        this._clearCheckeds();\r\n        this._clearSelections();\r\n        this.clearAllSubject.next();\r\n    }\r\n\r\n    setMultiSelect(flag: boolean) {\r\n        this._state.multiSelect = flag;\r\n    }\r\n\r\n    setCheckOnSelect(flag: boolean) {\r\n        this._state.checkOnSelect = flag;\r\n    }\r\n\r\n    setSelectOnCheck(flag: boolean) {\r\n        this._state.selectOnCheck = flag;\r\n    }\r\n\r\n    setCurrentCell(dr: DatagridRow, field: string, cellElement?: any, cellRef?: any ) {\r\n        const { rowIndex, rowData } = {...dr};\r\n        let currentCell = {...this._state.currentCell, rowIndex, rowData, field, rowId: this.primaryId(rowData), cellElement };\r\n\r\n        if (field !== this._state.ControlPanelFeild) {\r\n            if (cellRef) {\r\n                currentCell.cellRef = cellRef;\r\n            }\r\n\r\n            if (field) {\r\n                currentCell.column = this.getColumn(field);\r\n            }\r\n\r\n            const isLastRow = rowIndex === this.getData().length - 1;\r\n            currentCell['lastRow'] = isLastRow;\r\n        } else {\r\n            currentCell = null;\r\n        }\r\n        this._state.currentCell = null;\r\n        this.updateState({currentCell}, false);\r\n        this.selectRow(rowIndex, rowData);\r\n        if (this._state.currentRow) {\r\n            this._state.currentRow.dr = dr;\r\n        }\r\n        this.selectCellSubject.next(currentCell);\r\n    }\r\n\r\n    cancelSelectCell() {\r\n        if (this._state.currentCell) {\r\n            this._state.currentCell = null;\r\n            this.updateState({currentCell: null}, false);\r\n            this.selectCellSubject.next(null);\r\n        }\r\n    }\r\n\r\n    primaryId(rowData: any) {\r\n        return rowData[this._state.idField];\r\n    }\r\n\r\n    getCurrentCell() {\r\n        return this._state.currentCell;\r\n    }\r\n\r\n    editCell() {\r\n        if (this._state.currentCell) {\r\n            if (!this._state.currentCell.isEditing) {\r\n                const cei = { ...this._state.currentCell, isEditing: true };\r\n                this.updateState({ currentCell: cei }, false);\r\n                this.selectCellSubject.next(cei);\r\n                // this.editCell$.next(cei);\r\n            }\r\n        }\r\n    }\r\n\r\n    endEditCell() {\r\n        if (this._state.currentCell && this._state.currentCell.isEditing) {\r\n            const cei = { ...this._state.currentCell, isEditing: false };\r\n            this.updateState({ currentCell: cei }, false);\r\n            this.selectCellSubject.next(cei);\r\n            // this.editCell$.next(cei);\r\n        }\r\n    }\r\n\r\n    appendRow(rowData: any) {\r\n        if (rowData && this.primaryId(rowData)) {\r\n            const pid = this.primaryId(rowData);\r\n            if (this.findRowIndex(pid) === -1) {\r\n                this._state.data.push(rowData);\r\n                const newData = [...this._state.data];\r\n                this.updateState({data: newData}, false);\r\n                this._state.originalData = cloneDeep(this._state.data);\r\n                this.refresh();\r\n                this.rowAppend$.emit(rowData);\r\n            } else {\r\n                throw new Error(`ä¸»é®ID å·²å­å¨ï¼ID: ${pid}`);\r\n            }\r\n        } else {\r\n            throw new Error(`ä¸»é®æ è¯å­æ®µä¸è½ä¸ºç©ºã`);\r\n        }\r\n    }\r\n\r\n    updateRow(rowid: any, rowData: any) {\r\n        const row = this.findRow(rowid);\r\n        if (row && row.data) {\r\n            if (rowData) {\r\n                const keys = Object.keys(rowData);\r\n                keys.forEach(field => {\r\n                    Utils.setValue(field, rowData[field], row.data);\r\n                });\r\n                // æ´æ°å·²å¾éçæ°æ®\r\n                this.updateCheckedData(rowid, rowData);\r\n                const rowUpdateParam = {...row, keyID: rowid};\r\n                this.rowUpdate$.emit(rowUpdateParam);\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteRow(rowid) {\r\n        const row = this.findRow(rowid);\r\n        if (row) {\r\n            const newData = this.removeRow(this._state.data, rowid);\r\n            this.updateState({data: newData}, false);\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n            this.refresh();\r\n            this.rowDelete$.emit(rowid);\r\n            return row;\r\n        }\r\n    }\r\n    /**\r\n     * ä»æ°ç»ä¸­å é¤æå®çID\r\n     * @param data æ°ç»\r\n     * @param rowId è¦å é¤çID\r\n     */\r\n    removeRow(data, rowId) {\r\n        const newData = data.filter(n => {\r\n            const id = this.primaryId(n);\r\n            return rowId !== id;\r\n        });\r\n\r\n        return newData;\r\n    }\r\n\r\n    isCellSelected(cellInfo: CellInfo) {\r\n        const cc = this.getCurrentCell();\r\n        if (!cc) {\r\n            return false;\r\n        } else {\r\n            if ( this._state.currentRow.index === cc.rowIndex) {\r\n                return cc.field === cellInfo.field;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    protected updateState(state: Partial<FarrisDatagridState>, emit = true) {\r\n        const newState = { ...this._state, ...state };\r\n        this._state = newState;\r\n        if (emit) {\r\n            this.store.next(this._state);\r\n        }\r\n    }\r\n\r\n    resize(newSize?: {width: number, height: number, [key: string]: any}) {\r\n        if (newSize) {\r\n            this.updateState(newSize, false);\r\n        }\r\n        this.resetColumnsSize();\r\n        if (!this._state.groupRows) {\r\n            this.updateVirthualRows(this._state.virtual.scrollTop);\r\n        }\r\n    }\r\n\r\n    fitColumns(fit) {\r\n        this.updateState({fitColumns: fit}, false);\r\n        // const r = this.useUserSetColumnSize();\r\n        // this.setFitColumnsWidth(this._state.columnsGroup, true, r);\r\n        // this.gridSizeSubject.next(this._state);\r\n        this.resetColumnsSize();\r\n    }\r\n\r\n    private useUserSetColumnSize() {\r\n        if (this._state.autoFitColumns) {\r\n            const gridWidth = this._state.width;\r\n            const { leftFixedWidth, rightFixedWidth, originalTotalWidth } = this._state.columnsGroup;\r\n            return originalTotalWidth > gridWidth - leftFixedWidth - rightFixedWidth;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private resetColumnsSize() {\r\n        if (this._state.fitColumns) {\r\n            // 20200421\r\n            const r = this.useUserSetColumnSize();\r\n            this.setFitColumnsWidth(this._state.columnsGroup, r, r);\r\n        }\r\n        this.gridSizeSubject.next(this._state);\r\n    }\r\n\r\n    /**\r\n     * æ´æ°åè®¾ç½®\r\n     * @param columns æ°çåéå\r\n     * @param restitute æ¯å¦è¿ååå§å®½åº¦ é»è®¤ä¸º false\r\n     */\r\n    updateColumns(columns, restitute = false, emit = false) {\r\n        this._state.columns = columns;\r\n        this.initColumns(emit, restitute);\r\n        this.resizeColumns(restitute);\r\n    }\r\n\r\n\r\n    getGroupColumns(columns) {\r\n        let arr = [];\r\n        const allCols = this.getAllFlatColumns();\r\n        columns.forEach(c => {\r\n            if (!c.colspan || c.colspan == 1)            {\r\n                if (!arr.find(n => n.field === c.field)) {\r\n                    arr.push(c);\r\n                }\r\n            } else {\r\n                 arr = arr.concat(this.getGroupColumns(allCols.filter(n => n.parentId == c.id\t)));\r\n            }\r\n        });\r\n        return arr;\r\n    }\r\n\r\n\r\n\r\n    initColumns(emit = false, restColumnWidth = false) {\r\n        const columns = this._state.flatColumns;\r\n        let colgroup: any = {\r\n            leftFixed: [],\r\n            rightFixed: [],\r\n            normalColumns: [],\r\n            columns: []\r\n        };\r\n        if (columns && columns.length) {\r\n            const leftFixedCols = this.getFixedCols('left');\r\n            const rightFixedCols = this.getFixedCols('right');\r\n            const normalCols = this.getFixedCols();\r\n\r\n            columns.forEach(c => {\r\n                if (!c.originalWidth) {\r\n                    c.originalWidth = c.width;\r\n                } else {\r\n                    if (restColumnWidth) {\r\n                        c.width = c.originalWidth;\r\n                    }\r\n                }\r\n            });\r\n\r\n            colgroup = {\r\n                leftFixed: leftFixedCols,\r\n                rightFixed: rightFixedCols,\r\n                normalColumns: normalCols,\r\n                columns: leftFixedCols.concat(normalCols).concat(rightFixedCols)\r\n            };\r\n\r\n            this.initColumnsWidth(colgroup, restColumnWidth);\r\n\r\n            if (this._state.fitColumns) {\r\n                this.setFitColumnsWidth(colgroup, true);\r\n            }\r\n\r\n            this.updateState({ columnsGroup: colgroup }, emit);\r\n        } else {\r\n            colgroup.leftFixedWidth = 0;\r\n            colgroup.rightFixedWidth = 0;\r\n            colgroup.normalWidth = 0;\r\n            colgroup.totalWidth = 0;\r\n            this.updateState({ columnsGroup: colgroup }, emit);\r\n        }\r\n    }\r\n\r\n    getColumnIndex(field: string, fixed: 'right'| '' | 'left' | 'center' = '') {\r\n        const colgroup = this._state.columnsGroup;\r\n        if (!fixed || this._state.fast) {\r\n            return colgroup.normalColumns.findIndex(n => n.field === field);\r\n        } else {\r\n            if (fixed === 'left') {\r\n                return colgroup.leftFixed.findIndex(n => n.field === field);\r\n            } else if (fixed === 'right') {\r\n                return colgroup.rightFixed.findIndex(n => n.field === field);\r\n            }\r\n        }\r\n    }\r\n\r\n    columnResizeEnd() {\r\n        // const colgroup = this._state.columnsGroup;\r\n        // this.initColumnsWidth(colgroup, false);\r\n        // this.updateState({ columnsGroup:  {...colgroup} }, false);\r\n        // this.gridSizeSubject.next(this._state);\r\n        this.resizeColumns();\r\n    }\r\n\r\n\r\n    resizeColumns(restitute = false) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.initColumnsWidth(colgroup, restitute);\r\n        if (this._state.fitColumns) {\r\n            const r = this.useUserSetColumnSize();\r\n            if (r) {\r\n                this.setFitColumnsWidth(colgroup, restitute, r);\r\n            } else {\r\n                this.setFitColumnsWidth(colgroup, restitute);\r\n            }\r\n        }\r\n        this.updateState({ columnsGroup:  {...colgroup} }, false);\r\n        this.gridSizeSubject.next(this._state);\r\n    }\r\n\r\n    getAllFlatColumns() {\r\n        return flatten<DataColumn>(this._state.columns);\r\n    }\r\n\r\n    getColumn(fieldName: string) {\r\n        return this.getAllFlatColumns().find(n => n.field === fieldName);\r\n    }\r\n\r\n    setFitColumnsWidth(colgroup: ColumnGroup, restitute = false, useUserSetColumnSize = false) {\r\n        if (!colgroup) {\r\n            return;\r\n        }\r\n        colgroup.normalWidth = this._state.width - colgroup.leftFixedWidth - colgroup.rightFixedWidth;\r\n\r\n        if (this._state['scrollbarY']) {\r\n            colgroup.normalWidth -= this._state['scrollbarY'];\r\n        }\r\n\r\n        // tfs 613060\r\n        if (this._state.showBorder) {\r\n            colgroup.normalWidth -= 2;\r\n        }\r\n\r\n        if (useUserSetColumnSize) {\r\n            colgroup.totalWidth = colgroup.originalTotalWidth;\r\n            if (restitute) {\r\n                colgroup.normalColumns.forEach( col => {\r\n                    col.width = col.originalWidth;\r\n                });\r\n            }\r\n            // æ´æ° normalColumns width\r\n            colgroup.normalWidth = colgroup.normalColumns.reduce((totalWidth, col) => {\r\n                if (!restitute && col.width) {\r\n                    return totalWidth += col.width;\r\n                } else {\r\n                    return totalWidth += col.originalWidth;\r\n                }\r\n            }, 0);\r\n\r\n            colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n        } else {\r\n            const minWidth = colgroup.normalColumns.reduce((totalWidth, col) => {\r\n                if (!restitute) {\r\n                    return totalWidth += col.width;\r\n                } else {\r\n                    return totalWidth += col.originalWidth;\r\n                }\r\n            }, 0);\r\n\r\n            // colgroup.normalWidth = colgroup.normalWidth - 2;\r\n\r\n            colgroup.normalColumns.forEach( col => {\r\n                if (!restitute) {\r\n                    // col.width = Math.floor( col.width / minWidth * colgroup.normalWidth );\r\n                    col.width = Number((col.width / minWidth * colgroup.normalWidth ).toFixed(2));\r\n                } else {\r\n                    // col.width = Math.floor( col.originalWidth / minWidth * colgroup.normalWidth );\r\n                    col.width =  Number(( col.originalWidth / minWidth * colgroup.normalWidth ).toFixed(2));\r\n                }\r\n            });\r\n            colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n        }\r\n\r\n    }\r\n\r\n    private getFixedCols(direction: 'left' | 'right' | '' = '') {\r\n        let cols = [];\r\n        if (!direction) {\r\n            cols = this._state.flatColumns.filter(col => col.fixed !== 'left' && col.fixed !== 'right' );\r\n        } else {\r\n            cols = this._state.flatColumns.filter(col => col.fixed === direction);\r\n        }\r\n\r\n        // å¤è¡¨å¤´ï¼éæ°è®¡ç®åçé¡ºåº\r\n        if (this._state.columns.length > 1 && cols.length) {\r\n            const fields = DatagridColumnsHelper.getFields(this._state.columns);\r\n            const newcols = [];\r\n            fields.forEach(f => {\r\n                const c =  cols.find(col => (col.field || '' ) === f);\r\n                if (c) {\r\n                    newcols.push(c);\r\n                }\r\n            });\r\n            return newcols;\r\n        }\r\n\r\n        return cols;\r\n    }\r\n\r\n    // restitute: è¿ååå§å®½åº¦ï¼é»è®¤ false\r\n    private initColumnsWidth(colgroup: ColumnGroup,  restitute = false) {\r\n        let offset = 0;\r\n        offset = this._state.showLineNumber ? offset + this._state.lineNumberWidth : offset;\r\n        offset = this._state.showCheckbox ? offset + this._state.checkboxColumnWidth : offset;\r\n\r\n        const getColsWidth = (cols, val, reset) => {\r\n            return cols.reduce((r, c) => {\r\n                c.left = r;\r\n                if (!reset) {\r\n                    return r + c.width;\r\n                } else {\r\n                    return r + c.originalWidth;\r\n                }\r\n            }, val);\r\n        };\r\n\r\n        colgroup.leftFixedWidth = offset;\r\n        if (colgroup.leftFixed && colgroup.leftFixed.length) {\r\n            colgroup.leftFixedWidth = getColsWidth(colgroup.leftFixed, offset, restitute);\r\n        }\r\n\r\n        colgroup.rightFixedWidth = 0;\r\n        if (colgroup.rightFixed && colgroup.rightFixed.length) {\r\n            colgroup.rightFixedWidth = getColsWidth(colgroup.rightFixed, 0, restitute);\r\n        }\r\n\r\n        colgroup.normalWidth = 0;\r\n        if (this._state.columns && this._state.columns.length) {\r\n            colgroup.normalWidth = getColsWidth(colgroup.normalColumns, 0, restitute);\r\n            colgroup.originalTotalWidth = getColsWidth(colgroup.normalColumns, 0, true);\r\n        }\r\n\r\n        colgroup.totalWidth = colgroup.leftFixedWidth + colgroup.rightFixedWidth + colgroup.normalWidth;\r\n\r\n    }\r\n\r\n    showCheckbox(isShow = true) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.updateState({showCheckbox: isShow}, false);\r\n        if (isShow) {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth + this._state.checkboxColumnWidth;\r\n        } else {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth - this._state.checkboxColumnWidth;\r\n        }\r\n\r\n        this.columnResizeSubject.next(colgroup);\r\n    }\r\n\r\n    hideCheckbox() {\r\n        this.showCheckbox(false);\r\n    }\r\n\r\n    showLineNumber(isShow = true) {\r\n        const colgroup = this._state.columnsGroup;\r\n        this.updateState({showLineNumber: isShow}, false);\r\n        if (isShow) {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth + this._state.lineNumberWidth;\r\n        } else {\r\n            colgroup.leftFixedWidth = colgroup.leftFixedWidth - this._state.lineNumberWidth;\r\n        }\r\n\r\n        this.columnResizeSubject.next(colgroup);\r\n    }\r\n\r\n    hideLineNumber() {\r\n        this.showLineNumber(false);\r\n    }\r\n\r\n    setSortInfo(sortName, sortOrder) {\r\n        sortName = sortName || '';\r\n        sortOrder = sortOrder || '';\r\n        const fields = sortName.split(',');\r\n        const orders = sortOrder.split(',');\r\n        // if (!this._state.multiSort) {\r\n        const colgroup = this._state.columnsGroup;\r\n\r\n        const updateFieldOrder = (cols: DataColumn[]) => {\r\n            if (!cols || !cols.length) {\r\n                return;\r\n            }\r\n            cols.forEach( col => {\r\n                col.order = undefined;\r\n                const i = fields.findIndex(f => f === col.field);\r\n                if (i > -1) {\r\n                    col.order = orders[i];\r\n                }\r\n            });\r\n        };\r\n\r\n        updateFieldOrder(colgroup.normalColumns);\r\n        updateFieldOrder(colgroup.leftFixed);\r\n        updateFieldOrder(colgroup.rightFixed);\r\n        // }\r\n\r\n        this.updateState({sortName, sortOrder}, false);\r\n    }\r\n\r\n    orderBy(arr, props: any[], orders: any[]) {\r\n        const colObj = props.reduce((c, n) => {\r\n            c[n] = this.getColumn(n);\r\n            return c;\r\n        }, {});\r\n\r\n        return [...arr].sort((a, b) =>\r\n            props.reduce((acc, prop, i) => {\r\n                if (acc === 0) {\r\n                    let valA = Utils.getValue(prop, a);\r\n                    let valB = Utils.getValue(prop, b);\r\n\r\n                    if (colObj[prop] && colObj[prop]['isMultilingualField']) {\r\n                        valA = Utils.getMultilingualValue(valA, this.localId);\r\n                        valB = Utils.getMultilingualValue(valB, this.localId);\r\n                    }\r\n\r\n                    if (valA === undefined || valA === null) {\r\n                        valA = '';\r\n                    }\r\n                    if (valB === undefined || valB === null) {\r\n                        valB = '';\r\n                    }\r\n\r\n                    const [p1, p2] = orders && orders[i] === 'desc' ? [valB, valA] : [valA, valB];\r\n                    if (typeof p1 === 'string') {\r\n                        acc = p1.localeCompare(p2);\r\n                    } else {\r\n                        acc = p1 > p2 ? 1 : p1 < p2 ? -1 : 0;\r\n                    }\r\n                }\r\n                return acc;\r\n            }, 0)\r\n        );\r\n    }\r\n\r\n    sort(data: any) {\r\n        const orders = this._state.sortOrder.split(',');\r\n        const fields = this._state.sortName.split(',');\r\n\r\n        if (this._state.mergeCell && this._state.mergeFields && this._state.mergeFields.length) {\r\n            const newOrders = [];\r\n            const newFields = [...this._state.mergeFields];\r\n            fields.forEach((f, i) => {\r\n                let k = newFields.indexOf(f);\r\n                if (k == -1) {\r\n                    newFields.push(f);\r\n                    k = newFields.length - 1;\r\n                }\r\n                newOrders[k] = orders[i];\r\n            });\r\n\r\n            return this.orderBy(data, newFields, newOrders);\r\n        }\r\n\r\n        return this.orderBy(data, fields, orders);\r\n    }\r\n\r\n\r\n    clientSort(data?: any) {\r\n        if (this._state.sortName) {\r\n            if (data) {\r\n                this.updateState({ data }, false);\r\n            }\r\n            const sortedData = this.sort(this._state.data);\r\n            this.loadData(sortedData, false);\r\n        } else {\r\n            this.clearSort();\r\n        }\r\n\r\n        this.clientSort$.emit({sortName: this._state.sortName, sortOrder: this._state.sortOrder});\r\n    }\r\n\r\n    clearSort() {\r\n        this.loadData(this._state.originalData, false);\r\n    }\r\n\r\n    loadFilterData(filterData: any[]) {\r\n        this.loadData(filterData, false);\r\n    }\r\n\r\n\r\n    //#region åæ´é\r\n\r\n    private hasRowChanges(rowid: any) {\r\n        const _changes = this._state.changes;\r\n        if (!_changes) {\r\n            return false;\r\n        }\r\n        return _changes[rowid];\r\n    }\r\n\r\n    appendChanges(changes: RowDataChanges) {\r\n        if (!changes) {\r\n            return;\r\n        }\r\n        const id = changes[this._state.idField];\r\n        if (!id) {\r\n            return;\r\n        }\r\n        const _id = '' + id;\r\n        if (!this.hasRowChanges(_id)) {\r\n            this._state.changes = this._state.changes || {};\r\n            this._state.changes[_id] = changes;\r\n        } else {\r\n            this._state.changes[_id] = Object.assign(this._state.changes[_id], changes);\r\n        }\r\n    }\r\n\r\n    acceptChanges() {\r\n        const changes = this._state.changes;\r\n        if (changes) {\r\n            const keys = Object.keys(changes);\r\n            keys.forEach(id => {\r\n                this.updateRow(id, changes[id]);\r\n            });\r\n            this._state.originalData = cloneDeep(this._state.data);\r\n        }\r\n    }\r\n    rejectChanges(rowid = null) {\r\n        const changes = this._state.changes;\r\n        if (changes) {\r\n            if (!rowid) {\r\n                this._state.data = cloneDeep(this._state.originalData);\r\n                this._state.changes = null;\r\n            } else {\r\n                const rowChanges =  this._state.changes['' + rowid];\r\n                if (rowChanges) {\r\n                    const orgiRow = this._state.originalData.find(r => this.primaryId(r) === rowid);\r\n                    this._state.data.forEach(r => {\r\n                        if (this.primaryId(r) === rowid) {\r\n                            r = cloneDeep(orgiRow);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    getChanges() {\r\n        return this._state.changes;\r\n    }\r\n\r\n    refresh() {\r\n        const data = cloneDeep(this._state.data);\r\n        this.loadData(data);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    /**\r\n     * æé åè®¡è¡\r\n     * @param data æ°æ®éå\r\n     */\r\n    getFooterData(data) {\r\n        if (!data || !data.length) {\r\n            return [];\r\n        }\r\n\r\n        // const columns = this._state.flatColumns;\r\n        const columns = flatten<DataColumn>(this._state.columns).filter((col: DataColumn) => !col.colspan || col.colspan == 1);\r\n        const footerRow = {};\r\n\r\n        columns.forEach(col => {\r\n            if (col.footer && col.footer.options) {\r\n                const options = col.footer.options;\r\n                const text = options.text;\r\n                const typ = options.calculationType as CalculationType;\r\n\r\n                if (typ !== undefined && typ != -1) {\r\n                    const val = this.calculation(data, typ, col);\r\n                    footerRow[col.field] = val;\r\n                } else {\r\n                    footerRow[col.field] = text || '';\r\n                }\r\n            } else {\r\n                footerRow[col.field] = '';\r\n            }\r\n        });\r\n\r\n        return [footerRow];\r\n    }\r\n\r\n    private arrToGroup(items, fields: string[]) {\r\n        if (fields.length) {\r\n            const first = fields.shift();\r\n            const g1 = groupBy(items, (n) => Utils.getValue(first, n));\r\n            this.toGroup(g1, fields);\r\n            return g1;\r\n        }\r\n    }\r\n\r\n    private toGroup(g1, fieldArr) {\r\n        if (fieldArr.length) {\r\n            Object.keys(g1).forEach((k) => {\r\n                const items = g1[k];\r\n                const _nextFields = fieldArr.map((n) => n);\r\n                const _f = _nextFields.shift();\r\n                g1[k] = groupBy(items, (n) => Utils.getValue(_f, n));\r\n                if (_nextFields.length) {\r\n                    this.toGroup(g1[k], _nextFields);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private groupRows2Flat(groupRows, initLevel, parent) {\r\n        let results = [];\r\n        if (initLevel === undefined) {\r\n            initLevel = 0;\r\n        }\r\n        const idfield = this._state.idField;\r\n        const columns = this._state.flatColumns;\r\n        const data = this._state.data;\r\n        const groupFieldArr = this._state.groupField.split(',');\r\n        const pid = parent ? parent[idfield] : null;\r\n        const colspan = this._state.columnsGroup.normalColumns.length;\r\n\r\n        const expandGroupRows = this._state.expandGroupRows;\r\n\r\n        Object.keys(groupRows).forEach((k, m) => {\r\n\r\n            const groupItem = { [idfield]: Utils.uuid(),\r\n                                [IS_GROUP_ROW_FIELD]: true, [GROUP_LEVEL_FIELD]: initLevel, data: { }, value: k,\r\n                                [GROUP_VISIBLE_FIELD]: true, expanded: expandGroupRows, field: groupFieldArr[initLevel],\r\n                                colspan, total: 0, rows: [], [GROUP_ROW_FIELD]: pid};\r\n\r\n            // TFS: 356955\r\n            if (parent) {\r\n                groupItem.rows = parent.rows.filter(n => !n[IS_GROUP_ROW_FIELD] &&\r\n                    !n[IS_GROUP_FOOTER_ROW_FIELD] &&  Utils.getValue(groupFieldArr[initLevel], n) === k);\r\n                \r\n                groupItem[GROUP_VISIBLE_FIELD] = expandGroupRows;\r\n            } else {\r\n                groupItem.rows = data.filter(n => '' + Utils.getValue(groupFieldArr[initLevel], n) === k);\r\n            }\r\n\r\n            if (parent) {\r\n                parent.rows.push(groupItem);\r\n            }\r\n\r\n            groupItem.total = groupItem.rows.filter(n => !n[IS_GROUP_ROW_FIELD] && !n[IS_GROUP_FOOTER_ROW_FIELD]).length;\r\n\r\n            results.push(groupItem);\r\n            let items = groupRows[k];\r\n            if (isPlainObject(items)) {\r\n                const level = initLevel + 1;\r\n                results = results.concat(this.groupRows2Flat(items, level, groupItem));\r\n            } else {\r\n                groupItem.total = items.length;\r\n                items = items.map(n => {\r\n                    n[GROUP_ROW_FIELD] = groupItem[idfield];\r\n                    n[GROUP_VISIBLE_FIELD] = expandGroupRows;\r\n                    n[GROUP_LEVEL_FIELD] = groupItem[GROUP_LEVEL_FIELD] + 1;\r\n                    return n;\r\n                });\r\n                groupItem.rows = items;\r\n                results = results.concat(items);\r\n            }\r\n\r\n            if (this._state.groupFooter) {\r\n                const footerItem = {\r\n                    [IS_GROUP_FOOTER_ROW_FIELD]: true,\r\n                    [GROUP_ROW_FIELD]: groupItem[idfield],\r\n                    [GROUP_VISIBLE_FIELD]: expandGroupRows,\r\n                    [GROUP_LEVEL_FIELD]: initLevel,\r\n                    data: {}\r\n                };\r\n                groupItem.rows.push(footerItem);\r\n                results.push(footerItem);\r\n            }\r\n        });\r\n        return results;\r\n    }\r\n\r\n    /** æ´æ°åç»åè®¡è¡æ°æ® */\r\n    private updateGroupFooterData(groupFooterRow: any, columns: any, groupRows: any) {\r\n        columns.forEach(col => {\r\n            if (col.groupFooter && col.groupFooter.options) {\r\n                const options = col.groupFooter.options;\r\n                const text = options.text;\r\n                const typ = options.calculationType as CalculationType;\r\n\r\n                if (typ !== undefined && typ != -1) {\r\n                    const val = this.calculation(groupRows, typ, col);\r\n                    groupFooterRow.data[col.field] = val;\r\n                } else {\r\n                    groupFooterRow.data[col.field] = text || '';\r\n                }\r\n            } else {\r\n                groupFooterRow.data[col.field] = '';\r\n            }\r\n        });\r\n    }\r\n\r\n    /** å¤å­æ®µåç»\r\n     * groupField ä»¥éå·åéï¼ä»å·¦å°å³ä¾æ¬¡è¿è¡åç»\r\n     */\r\n    private groupRows2(data: any[]) {\r\n        if (data && data.length) {\r\n            const columns = this._state.flatColumns;\r\n            const groupField = this._state.groupField || '';\r\n\r\n            if (!groupField) {\r\n                return data;\r\n            }\r\n\r\n            const groupData = this.arrToGroup(data, groupField.split(','));\r\n            const result = this.groupRows2Flat(groupData, 0, null);\r\n\r\n            let k = 0;\r\n\r\n            const prow = (pid) => result.find(n => n[this._state.idField] === pid);\r\n\r\n            result.map((n, i) => {\r\n                if (!n[IS_GROUP_ROW_FIELD] && !n[IS_GROUP_FOOTER_ROW_FIELD]) {\r\n                    n[ROW_INDEX_FIELD] = k;\r\n                    k++;\r\n                }\r\n\r\n                // æ´æ°åè®¡è¡æ°æ®\r\n                if (n[IS_GROUP_FOOTER_ROW_FIELD]) {\r\n                    const rows = prow(n[GROUP_ROW_FIELD]).rows.filter((r: any) => !r[IS_GROUP_ROW_FIELD] && !r[IS_GROUP_FOOTER_ROW_FIELD]);\r\n                    this.updateGroupFooterData(n, columns, rows);\r\n                }\r\n\r\n                return n;\r\n            });\r\n            return result;\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    showGroupFooter(groupFooter) {\r\n        this.updateState({groupFooter}, false);\r\n        this.updateVirthualRows(0);\r\n    }\r\n\r\n    updateGroupFooter(groupRowId: string) {\r\n        const groupRow = this._state.virtual.virtualRows.find((n: any) => {\r\n            return n['id'] === groupRowId;\r\n        });\r\n\r\n        // tfs 574567\r\n        if (groupRow && groupRow.rows) {\r\n            const groupRows = groupRow.rows;\r\n            const groupFooterRows = groupRows.filter((n: any) => n['__group_footer__']);\r\n            const columns = this._state.flatColumns;\r\n\r\n            const rows = groupRows.filter((n: any) => !n['__group_footer__']);\r\n\r\n            groupFooterRows.forEach((n: any) => {\r\n                this.updateGroupFooterData(n, columns, rows);\r\n            });\r\n\r\n            if (groupRow['__group_parent_id__']) {\r\n                this.updateGroupFooter(groupRow['__group_parent_id__']);\r\n            }\r\n        }\r\n    }\r\n\r\n    private calculation(data: any, typ: CalculationType, col: any) {\r\n        let val: any = '';\r\n        // TFS: 357000\r\n        // http://10.24.1.11:8080/tfs/GSP/GSPCloud/web/_queries?id=357000&triage=true&fullScreen=false&_a=edit\r\n        if (!data || !data.length) {\r\n            return '';\r\n        }\r\n        const field = col.field;\r\n        const arr = data.map((o) => Utils.getValue(field, o) || 0);\r\n        switch (typ) {\r\n            case CalculationType.sum:\r\n                // val = sumBy(data, (o) => Utils.getValue(field, o));\r\n                val = BigNumber.sum.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.max:\r\n                // const maxObj = maxBy(data, (o) => Utils.getValue(field, o));\r\n                // val = Utils.getValue(field, maxObj);\r\n                val = BigNumber.max.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.min:\r\n                // const minObj = minBy(data, (o) => Utils.getValue(field, o));\r\n                // val = Utils.getValue(field, minObj);\r\n                val = BigNumber.min.apply(null, arr).toFixed();\r\n                break;\r\n            case CalculationType.average:\r\n                // val = meanBy(data, (o) => Utils.getValue(field, o));\r\n                val = BigNumber.sum.apply(null, arr).div(arr.length).toFixed();\r\n                break;\r\n            case CalculationType.count:\r\n                val = data.length;\r\n                break;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    setGroupRowsVisible(row, open: boolean, emit = true) {\r\n\r\n        if (row.rows) {\r\n\r\n            // if (!this._state.virtualized) {\r\n                const groupRows = row.rows.filter(n => n[IS_GROUP_ROW_FIELD]);\r\n                const footerRows = row.rows.filter(n => n[IS_GROUP_FOOTER_ROW_FIELD]);\r\n\r\n                if (footerRows && footerRows.length) {\r\n                    footerRows.forEach(n => {\r\n                        n[GROUP_VISIBLE_FIELD] = open && row.expanded;\r\n                    });\r\n                }\r\n\r\n                groupRows.forEach(t => {\r\n                    t[GROUP_VISIBLE_FIELD] = open && row.expanded && row[GROUP_VISIBLE_FIELD];\r\n                    this.setGroupRowsVisible(t, open, false);\r\n                });\r\n\r\n                if (!groupRows.length) {\r\n                    row.rows.forEach(t => {\r\n                        t[GROUP_VISIBLE_FIELD] = open && row.expanded && row[GROUP_VISIBLE_FIELD];\r\n                    });\r\n                }\r\n            // }\r\n\r\n            // è§¦åè¡å±å¼ææå äºä»¶\r\n            if (emit) {\r\n                if (open) {\r\n                    this.expandGroupRow.emit({ data: row });\r\n                } else {\r\n                    this.collapseGroupRow.emit({ data: row });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //#region ç»ä»¶åå§å±æ§\r\n\r\n    setinitialOptions(opts: {[key: string]: any}) {\r\n        this._state.initialOptions = {};\r\n        // åç»\r\n        this._state.initialOptions['groupField'] = opts.groupField;\r\n        this._state.initialOptions['expandGroupRows'] = opts.expandGroupRows;\r\n        \r\n\r\n        // æåº\r\n        this._state.initialOptions['sort'] = {\r\n            sortName: opts.sortName,\r\n            sortOrder: opts.sortOrder\r\n        };\r\n\r\n        const fieldInfo = (n) => {\r\n            if (n.field === \"_datagrid-setting-control_\") {\r\n                return null;\r\n            }\r\n            return {\r\n                field: n.field,\r\n                title: n.title,\r\n                colspan: n.colspan,\r\n                rowspan: n.rowspan,\r\n                fixed: n.fixed,\r\n                width: n.width || 100,\r\n                sortable: n.sortable,\r\n                order: n.order,\r\n                halign: n.halign,\r\n                align: n.align,\r\n                visible: n.visible,\r\n                allowGrouping: n.allowGrouping,\r\n                groupFooter: cloneDeep(n.groupFooter || {}),\r\n                footer: cloneDeep(n.footer || {}),\r\n                dataType: n.dataType || 'string'\r\n            };\r\n        }\r\n\r\n        // åæ¾ç¤ºéèãå¯¹é½æ¹å¼\r\n        if (opts.columns) {\r\n            if ( opts.columns.length === 1) {\r\n                this._state.initialOptions['columnFields'] = (opts.columns[0] as any).map(n => {\r\n                    return fieldInfo(n);\r\n                }).filter(n => n);\r\n            } else {\r\n                this._state.initialOptions['groupHeaderFields'] = opts.columns.map(cols => {\r\n                    return cols.map((n: any) => {\r\n                        return fieldInfo(n);\r\n                    }).filter(n => n);\r\n                });\r\n            }\r\n\r\n            this._state.initialOptions['designerColumns']  = [...opts.columns.map(n => {\r\n                return [...n];\r\n            })];\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    //#endregion\r\n}\r\n","/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2019-08-06 07:43:53\r\n* @LastEditors: ç¯çç§æ(Lucas Huang)\r\n* @LastEditTime: 2019-11-09 20:44:54\r\n* @QQ: 1055818239\r\n* @Version: v0.0.1\r\n*/\r\nimport { EventEmitter } from '@angular/core';\r\nimport { Injectable } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\nimport { filter, map, debounceTime } from 'rxjs/operators';\r\nimport { CommonUtils, IdService } from '@farris/ui-common';\r\nimport { RowEventParam, RowHoverEventParam } from '../types/event-params';\r\nimport { CellInfo } from './state';\r\nimport { Utils } from './../utils/utils';\r\nimport { CUSTOM_CELL_CLS, CUSTOM_GROUP_ROW_CLS, CUSTOM_ROW_CLS } from '../types/constant';\r\n\r\nexport type ScrollAction =\r\n    | 'psScrollY'\r\n    | 'psScrollX'\r\n    | 'psScrollUp'\r\n    | 'psScrollDown'\r\n    | 'psScrollLeft'\r\n    | 'psScrollRight'\r\n    | 'psYReachEnd'\r\n    | 'psYReachStart'\r\n    | 'psXReachEnd'\r\n    | 'psXReachStart';\r\n\r\nexport class DatagridService {\r\n    private scorllSubject = new Subject();\r\n    private scrollX = new BehaviorSubject(0);\r\n\r\n    private rowHoverSubject = new Subject<RowHoverEventParam>();\r\n    private rowSelectSubject = new Subject<Partial<RowHoverEventParam>>();\r\n\r\n    private dataSourceChangedSubject = new Subject();\r\n    /** ç¼è¾ååæ ¼ */\r\n    private editCellSubject = new Subject();\r\n    /** éä¸­ååæ ¼ */\r\n    private selectCellSubject = new Subject();\r\n    /** ç»æååç¼è¾ */\r\n    private endCellEdit = new Subject();\r\n    private changeCheckedRows = new Subject();\r\n    /** ç»æè¡ç¼è¾ */\r\n    // private endRowEdit = new BehaviorSubject(true);\r\n\r\n    public scorll$ = this.scorllSubject.asObservable();\r\n    public scrollX$ = this.scorll$.pipe(\r\n        filter((p: any) => p.type === 'psScrollX'),\r\n        map(t => t.x),\r\n        debounceTime(50)\r\n    );\r\n    public scrollY$ = this.scorll$.pipe(\r\n        filter((p: any) => p.type === 'psScrollY'),\r\n        map(t => t.x),\r\n        debounceTime(50)\r\n    );\r\n    public rowHover$ = this.rowHoverSubject.asObservable();\r\n    public rowClick$ = this.rowSelectSubject.asObservable();\r\n    public onDataSourceChange = this.dataSourceChangedSubject.asObservable();\r\n    public cellEdit$ = this.editCellSubject.asObservable();\r\n    public endCellEdit$ = this.endCellEdit.asObservable();\r\n    public checkedRowsTotalChanged$ = this.changeCheckedRows.asObservable();\r\n    public updateEmptyStyle$ = new EventEmitter();\r\n\r\n    public showGridHeader = new EventEmitter();\r\n    // åæ¶å¨é\r\n    public uncheckAll = new EventEmitter();\r\n    // å¨é¨éä¸­\r\n    public checkAll = new EventEmitter();\r\n\r\n    public columnResized = new EventEmitter();\r\n\r\n    public rowHeightChanged = new EventEmitter();\r\n\r\n    public loadVirtualData = new EventEmitter();\r\n    /** æ¾ç¤ºåºå®åéå½± */\r\n    public showFixedShadow = new EventEmitter();\r\n    // public endRowEdit$ = this.endRowEdit.asObservable();\r\n\r\n    public setSelecedRow = new EventEmitter();\r\n    public setCheckedRows = new EventEmitter();\r\n\r\n    public scrollToCurrentRow = new EventEmitter();\r\n\r\n    public columnsChanged = new EventEmitter();\r\n\r\n    public cellContentWrapChanged = new EventEmitter();\r\n\r\n    public onFilterChanged = new EventEmitter();\r\n    public clearFilter = new EventEmitter();\r\n    public filterTextChange = new EventEmitter();\r\n    public toggleFilterRow = new EventEmitter();\r\n\r\n    public closeFilterPanel = new EventEmitter();\r\n\r\n    public refreshFooterData = new EventEmitter();\r\n\r\n    public disableHeader = new EventEmitter();\r\n    /** æ´æ°å¨éå¤éæ¡ç¶æ */\r\n    public changeCheckAllStatus = new EventEmitter();\r\n\r\n    public setScrollbarPosition = new EventEmitter();\r\n\r\n    public smartFilterBarExpand = new EventEmitter();\r\n    public smartFilterDataChange = new EventEmitter();\r\n\r\n    public scrollbarUpdate = new EventEmitter();\r\n\r\n    footerPositionChanged = new EventEmitter();\r\n\r\n    styleElement: HTMLStyleElement = null;\r\n    commonUtils: CommonUtils = null;\r\n\r\n    idService: IdService = null;\r\n\r\n    // ååæ ¼ç¼è¾å¨åå»ºå®æ\r\n    cellEditorCreated = new EventEmitter();\r\n    // ååæ ¼ç¼è¾å¨éæ¯\r\n    cellEditorDestory = new EventEmitter();\r\n    // ç¦ç¹è¡åæ¢\r\n    focusRowChanged = new EventEmitter();\r\n    dataloaded = new EventEmitter();\r\n\r\n    toggleGroupRow$ = new EventEmitter<{ groupRowIndex: number, expand: boolean }>();\r\n    toggleAllGroupRows$ = new EventEmitter<{expand: boolean }>();\r\n    \r\n    // CSS ææ¬ç¼å­\r\n    private cssTextCache: Array<string> = [];\r\n\r\n    constructor() { }\r\n\r\n    onScrollMove(x: number, action: ScrollAction) {\r\n        this.scorllSubject.next({ x, type: action });\r\n    }\r\n\r\n    dataSourceChanged() {\r\n        this.dataSourceChangedSubject.next();\r\n    }\r\n\r\n    onRowHover(rowIndex: number, rowData: any, mouseEnter: boolean) {\r\n        this.rowHoverSubject.next({ index: rowIndex, data: rowData, mouseenter: mouseEnter });\r\n    }\r\n\r\n    onRowClick(rowIndex: number, rowData: any) {\r\n        this.rowSelectSubject.next({ index: rowIndex, data: rowData });\r\n    }\r\n\r\n    onCellEdit(tdElement: any) {\r\n        this.editCellSubject.next(tdElement);\r\n    }\r\n\r\n    onEndCellEdit(cell: CellInfo) {\r\n        this.endCellEdit.next(cell);\r\n    }\r\n\r\n    onSelectCell(cell: CellInfo) {\r\n        this.selectCellSubject.next(cell);\r\n    }\r\n\r\n    onCheckedRowsCountChange() {\r\n        this.changeCheckedRows.next();\r\n    }\r\n\r\n    onRowHeightChange(rowHeight: number) {\r\n        this.rowHeightChanged.emit(rowHeight);\r\n    }\r\n\r\n    onLoadVirtualData(data: any) {\r\n        this.loadVirtualData.emit({ data });\r\n    }\r\n\r\n    onClearFilter() {\r\n        this.clearFilter.emit();\r\n        this.filterTextChange.emit('');\r\n    }\r\n\r\n    onFilterTextChange(txt: string) {\r\n        this.filterTextChange.emit(txt);\r\n    }\r\n\r\n    restoreScrollbarPosition() {\r\n        this.setScrollbarPosition.emit();\r\n    }\r\n\r\n    updateEmptyStyle() {\r\n        this.updateEmptyStyle$.emit();\r\n    }\r\n\r\n    groupBy = (arr, fn) => arr.map(typeof fn === 'function' ? fn : val => Utils.getValue(fn, val)).reduce((acc, val, i) => {\r\n        acc[val] = (acc[val] || []).concat(arr[i]);\r\n        return acc;\r\n    }, {})\r\n\r\n    getMergeCellInfo(data, mergeFields) {\r\n        const result = {};\r\n        let firstVal = null;\r\n        let currVal;\r\n\r\n        mergeFields.forEach((f, i) => {\r\n            if (i === 0) {\r\n                data.forEach((d, j) => {\r\n                    const item = { [f]: { show: true, rowspan: 1 } };\r\n                    if (!result[j]) {\r\n                        result[j] = item;\r\n                    } else {\r\n                        if (!result[j][f]) {\r\n                            result[j] = Object.assign(result[j], item);\r\n                        }\r\n                    }\r\n\r\n                    const _item = result[j];\r\n\r\n                    currVal = d[f];\r\n                    if (firstVal === null || firstVal !== currVal) {\r\n                        firstVal = currVal;\r\n                        _item[f].show = true;\r\n                        _item[f].startIndex = j;\r\n                    } else {\r\n                        const strIndex = result[j - 1][f].startIndex;\r\n                        _item[f].startIndex = strIndex;\r\n                        _item[f].show = false;\r\n                        result[strIndex][f].rowspan++;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    getMergeCellInfo0(data, field) {\r\n        const result = {};\r\n        let firstVal;\r\n        let currVal;\r\n        data.forEach((d, j) => {\r\n            const item = { [field]: { show: true, rowspan: 1, value: '' } };\r\n            if (!result[j]) {\r\n                result[j] = item;\r\n            }\r\n\r\n            const _item = result[j];\r\n            currVal = Utils.getValue(field, d);\r\n            _item[field].value = currVal;\r\n            if (firstVal === undefined || firstVal !== currVal) {\r\n                firstVal = currVal;\r\n                _item[field].show = true;\r\n                _item[field].startIndex = j;\r\n            } else {\r\n                const strIndex = result[j - 1][field].startIndex;\r\n                _item[field].startIndex = strIndex;\r\n                _item[field].show = false;\r\n                result[strIndex][field].rowspan++;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    getMergeCellInfo2(data, mergeFields) {\r\n        let result = {};\r\n        let firstVal = null;\r\n        result = this.getMergeCellInfo0(data, mergeFields.splice(0, 1)[0]);\r\n\r\n        const groupData = this.groupBy(data, mergeFields[0]);\r\n        const groupKeys = Object.keys(groupData);\r\n        let startRowIndex = 0;\r\n        mergeFields.forEach((f, i) => {\r\n            groupKeys.forEach((k, j) => {\r\n                let currVal;\r\n                groupData[k].forEach((d, n) => {\r\n                    if (result[startRowIndex] && !result[startRowIndex][f]) {\r\n                        result[startRowIndex] = Object.assign(result[startRowIndex], { [f]: { show: true, rowspan: 1, value: '' } });\r\n                    }\r\n\r\n                    const _item = result[startRowIndex];\r\n                    currVal = Utils.getValue(f, d);\r\n                    _item[f].value = currVal;\r\n                    if (firstVal === null || firstVal !== currVal) {\r\n                        firstVal = currVal;\r\n                        _item[f].show = true;\r\n                        _item[f].startIndex = startRowIndex;\r\n                    } else {\r\n                        const strIndex = result[startRowIndex - 1][f].startIndex;\r\n                        _item[f].startIndex = strIndex;\r\n                        _item[f].show = false;\r\n                        result[strIndex][f].rowspan++;\r\n                    }\r\n\r\n                    startRowIndex++;\r\n                });\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n\r\n\r\n    getMergeCellInfo3(data, mergeFields) {\r\n        let result = {};\r\n        const firstField = mergeFields.splice(0, 1)[0];\r\n        result = this.getMergeCellInfo0(data, firstField);\r\n        let prevGroupField = firstField;\r\n        // const groupData = this.groupBy(data, firstField);\r\n        // const groupKeys = Object.keys(groupData);\r\n        mergeFields.forEach((f, i) => {\r\n            let startRowIndex = 0;\r\n\r\n            let firstVal;\r\n            let currVal;\r\n\r\n            if (i > 0) {\r\n                prevGroupField = mergeFields[i - 1];\r\n            }\r\n\r\n            data.forEach((d, n) => {\r\n                if (result[startRowIndex] && !result[startRowIndex][f]) {\r\n                    result[startRowIndex] = Object.assign(result[startRowIndex], { [f]: { show: true, rowspan: 1, value: '' } });\r\n                }\r\n\r\n                const _item = result[startRowIndex];\r\n                currVal = Utils.getValue(f, d);\r\n                _item[f].value = currVal;\r\n\r\n                if (startRowIndex > 0) {\r\n                    const prevItem = result[startRowIndex - 1];\r\n                    const _c = Object.keys(_item).map(c => '' + _item[c].value).join(',');\r\n                    const _p = Object.keys(prevItem).map(p => '' + prevItem[p].value).join(',');\r\n\r\n                    if (_c !== _p) {\r\n                        firstVal = undefined;\r\n                    }\r\n                }\r\n\r\n                if ((firstVal === undefined || firstVal !== currVal)) {\r\n                    firstVal = currVal;\r\n                    _item[f].show = true;\r\n                    _item[f].startIndex = startRowIndex;\r\n                } else {\r\n                    const startIndex = result[startRowIndex - 1][f].startIndex;\r\n                    _item[f].startIndex = startIndex;\r\n                    _item[f].show = false;\r\n                    result[startIndex][f].rowspan++;\r\n                }\r\n\r\n                if (data.length - 1 > startRowIndex) {\r\n                    startRowIndex++;\r\n                }\r\n            });\r\n        });\r\n        return result;\r\n    }\r\n\r\n\r\n    getMergeInfo(rowIndex: number, field: string, mergeCellInfo: any) {\r\n        if (field && mergeCellInfo && mergeCellInfo[rowIndex] && mergeCellInfo[rowIndex][field]) {\r\n            return mergeCellInfo[rowIndex][field];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    removeStyleSheet() {\r\n        if (this.styleElement) {\r\n            this.styleElement.remove();\r\n            this.styleElement = null;\r\n            // æ¸ç©ºç¼å­\r\n            this.cssTextCache = [];\r\n        }\r\n    }\r\n\r\n    createStyleElement(styleSheetId: string) {\r\n        this.styleElement = this._createStyleSheet(styleSheetId);\r\n    }\r\n\r\n    appendCssRules(rules: string[]) {\r\n        if (this.styleElement) {\r\n            this._appendCssRules(rules, this.styleElement.sheet);\r\n        }\r\n    }\r\n\r\n    removeCssRule(ruleName: string | Array<string>) {\r\n        if (this.styleElement) {\r\n            if (typeof ruleName === 'string') {\r\n                this._removeCssRule(ruleName, this.styleElement.sheet);\r\n                this.cssTextCache = this.cssTextCache.filter(n => n.indexOf(ruleName) == -1);\r\n            } else {\r\n                if (Array.isArray(ruleName)) {\r\n                    ruleName.forEach(n => {\r\n                        this._removeCssRule(n, this.styleElement.sheet);\r\n                        this.cssTextCache = this.cssTextCache.filter(n => n.indexOf(n) == -1);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private _createStyleSheet(styleSheetId: string): HTMLStyleElement {\r\n        const htmlHead = document.querySelector('head');\r\n\r\n        const styleEleId = styleSheetId;\r\n        let styleElement = null;\r\n        if (document.querySelector('#' + styleEleId)) {\r\n            styleElement = document.querySelector('#' + styleEleId);\r\n            styleElement.innerText = '';\r\n        } else {\r\n            styleElement = document.createElement('style');\r\n            styleElement.id = styleEleId;\r\n            styleElement.type = 'text/css';\r\n            htmlHead.appendChild(styleElement);\r\n        }\r\n\r\n        return styleElement;\r\n    }\r\n\r\n    private _appendCssRules(rules: string[], styleSheet) {\r\n        let allCssText = '';\r\n        for (const rule of rules) {\r\n            const ruleName = rule.slice(0, rule.indexOf('{')).trim();\r\n\r\n            // const removedCssRule = this._removeCssRule(ruleName, styleSheet);\r\n            const removedCssRule = this._getCssTextBySelector(ruleName, styleSheet);\r\n            \r\n            let cssText = '';\r\n            if (removedCssRule && ruleName.indexOf(CUSTOM_CELL_CLS) == -1 && ruleName.indexOf(CUSTOM_GROUP_ROW_CLS) == -1  && ruleName.indexOf(CUSTOM_ROW_CLS) == -1) {\r\n                cssText += removedCssRule.cssText.slice(removedCssRule.cssText.indexOf('{') + 1, removedCssRule.cssText.indexOf('}'));\r\n            }\r\n            cssText += rule.slice(rule.indexOf('{') + 1, rule.indexOf('}')).replace(/\"/g, '').replace(/,/g, ';') + ';';\r\n            const _newRule =  `${ruleName}{ ${cssText} }`;\r\n            allCssText += _newRule;\r\n            \r\n\r\n            if (!this.cssTextCache.includes(_newRule)) {\r\n                // å°åå¹¶åCSSææ¬æ·»å å°ç¼å­\r\n                this.cssTextCache.push(_newRule);\r\n\r\n                if (styleSheet.addRule) {\r\n                    styleSheet.addRule(ruleName, cssText, 0);\r\n                } else {\r\n                    styleSheet.insertRule(_newRule, 0);\r\n                }\r\n            }\r\n\r\n            \r\n        }\r\n\r\n        return allCssText;\r\n    }\r\n\r\n    private _removeCssRule(ruleName: string, styleSheet) {\r\n\r\n        if (!styleSheet) {\r\n            return;\r\n        }\r\n\r\n        const cssRules = (styleSheet.cssRules || styleSheet.rules) as any;\r\n        let ii = 0;\r\n        let cssRule: any = false;\r\n\r\n        do {\r\n            cssRule = cssRules[ii];\r\n            if (cssRule) {\r\n                if (cssRule.selectorText.toLowerCase() == ruleName.toLowerCase()) {\r\n                    if (styleSheet.cssRules) {\r\n                        styleSheet.deleteRule(ii);\r\n                    } else {\r\n                        styleSheet.removeRule(ii);\r\n                    }\r\n\r\n                    return cssRule;\r\n                }\r\n            }\r\n            ii++;\r\n        } while (cssRule);\r\n    }\r\n\r\n    createConfigKey(gridID: string) {\r\n        const { host, hash, href, pathname } = location;\r\n        let formCode = '';\r\n        let menuId = '';\r\n        if (hash) {\r\n            const _searchArr = hash.split('?');\r\n            formCode = _searchArr[0];\r\n\r\n            const searchObj: any = {};\r\n            if (_searchArr[1]) {\r\n                _searchArr[1].split('&').map(n => {\r\n                    searchObj[n.split('=')[0]] = n.split('=')[1];\r\n                });\r\n            }\r\n\r\n            const catchFuncIdKEY = `${pathname}`;\r\n            if (searchObj && Object.keys(searchObj).length) {\r\n                menuId = searchObj.funcId || '';\r\n                if (menuId) {\r\n                    localStorage.setItem(catchFuncIdKEY, menuId);\r\n                }\r\n            }\r\n\r\n            if (!menuId) {\r\n                menuId = localStorage.getItem(catchFuncIdKEY);\r\n            }\r\n        }\r\n        const key = formCode + '_' + menuId + '_' + gridID;\r\n\r\n        if (!this.idService) {\r\n            this.idService = new IdService();\r\n        }\r\n\r\n        return this.idService.encrypt(key);\r\n    }\r\n\r\n\r\n    getCustomStyle(styler: any, args: any): { cls?: any, style?: any } {\r\n        if (typeof styler === 'object') {\r\n            return styler;\r\n        } else {\r\n            if (typeof styler === 'function') {\r\n                const p = args || [];\r\n                return styler(...p);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    findNextTr(nextTr, dir) {\r\n        const getNextElement = (target) => {\r\n            if (target && target.className.indexOf('f-datagrid-disable-row') == -1) {\r\n                return target;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        const m = dir === 'down' ? 'nextElementSibling' : 'previousElementSibling';\r\n\r\n        const getEle = (t) => {\r\n            let n = null;\r\n            let next = true;\r\n            while (next) {\r\n                n = getNextElement(t);\r\n                if (n) {\r\n                    next = false;\r\n                } else {\r\n                    if (t && t[m]) {\r\n                        n = getNextElement(t[m]);\r\n                        if (n) {\r\n                            break;\r\n                        }\r\n                    } else {\r\n                        next = false;\r\n                    }\r\n                }\r\n            }\r\n            return n;\r\n        };\r\n\r\n        return getEle(nextTr);\r\n    }\r\n\r\n    private _getCssTextBySelector(selector: string, styleSheet) {\r\n        if (!styleSheet) {\r\n            return;\r\n        }\r\n\r\n        const cssRules = (styleSheet.cssRules || styleSheet.rules) as any;\r\n        let ii = 0;\r\n        let cssRule: any = false;\r\n\r\n        do {\r\n            cssRule = cssRules[ii];\r\n            if (cssRule) {\r\n                if (cssRule.selectorText.toLowerCase() == selector.toLowerCase()) {\r\n                    return cssRule;\r\n                }\r\n            }\r\n            ii++;\r\n        } while (cssRule);\r\n    }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { DataResult } from './state';\r\nimport { Observable } from 'rxjs';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport const DATAGRID_REST_SERVICEE = new InjectionToken<RestService>('DataGrid Request Data Service.');\r\n\r\nexport abstract class RestService {\r\n    abstract getData(url: string, param?: any): Observable<DataResult>;\r\n}\r\n\r\nexport class DefaultRestService implements RestService {\r\n    constructor(private http: HttpClient) {}\r\n    getData(url: string, param?: any): Observable<DataResult> {\r\n        return this.http.get<DataResult>(url, { params: param });\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-21 10:37:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-22 19:15:49\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nexport type DatagridValidatorType = 'required' | 'min' | 'max' |'minLength' |'maxLength' | 'email' | 'requriedTrue' | 'pattern' | string;\r\n\r\nexport interface DatagridValidator {\r\n    type: DatagridValidatorType;\r\n    value?: any;\r\n    messager?: string;\r\n}\r\n\r\nexport const DefaultDatagridValidatorMessager = {\r\n    required: 'æ­¤å­æ®µä¸è½ä¸ºç©ºã',\r\n    min: 'æå°å¼ä¸è½å°äº${0}',\r\n    max: 'æå¤§å¼ä¸è½å¤§äº${0}',\r\n    minlength: 'è³å°è¾å¥${0}ä¸ªå­ç¬¦',\r\n    maxlength: 'å­ç¬¦é¿åº¦ä¸è½å¤§äº${0}',\r\n    email: 'Email æ ¼å¼ä¸æ­£ç¡®',\r\n    requriedtrue: 'å¡å¿éä¸­',\r\n    pattern: 'è¾å¥çæ ¼å¼ä¸æ­£ç¡®ã'\r\n};\r\n\r\n\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-21 15:44:21\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-22 19:19:49\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { DatagridValidator } from '../types/datagrid-validator';\r\nimport { DefaultDatagridValidatorMessager as ddvm } from '../types/datagrid-validator';\r\n@Injectable()\r\nexport class ValidatorMessagerService {\r\n\r\n    getValidatorErrorMessage(validatorName: string, validators: DatagridValidator[]) {\r\n        validatorName = validatorName.toLowerCase();\r\n        const validator = validators.find(v => v.type.toLowerCase() === validatorName);\r\n        if (validator && validator.messager) {\r\n            return validator.messager;\r\n        } else {\r\n            return ddvm[validatorName] ? ddvm[validatorName] : 'éªè¯ä¸éè¿ï¼';\r\n        }\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-21 15:13:50\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nexport class DomHandler {\r\n    public static hasClass(element: any, className: string): boolean {\r\n        if (element) {\r\n            if (element.classList) {\r\n                return Array.from(element.classList).filter(n => n === className).length > 0;\r\n            } else {\r\n                return element.className.indexOf(className) > -1;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public static removeClass(element: any, className: string): void {\r\n        if (element) {\r\n            if (element.classList) {\r\n                element.classList.remove(className);\r\n            } else {\r\n                element.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n            }\r\n        }\r\n    }\r\n\r\n    public static findSingle(element: any, selector: string): any {\r\n        if (element) {\r\n            return element.querySelector(selector);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static getOffset(el) {\r\n        const rect = el.getBoundingClientRect();\r\n\r\n        return {\r\n            top: rect.top + document.body.scrollTop,\r\n            left: rect.left + document.body.scrollLeft\r\n        };\r\n    }\r\n\r\n    public static getOuterHeight(el, margin?) {\r\n        let height = el.offsetHeight;\r\n\r\n        if (margin) {\r\n            const style = getComputedStyle(el);\r\n            height += parseFloat(style.marginTop) + parseFloat(style.marginBottom);\r\n        }\r\n\r\n        return height;\r\n    }\r\n\r\n    public static getOuterWidth(el, margin?) {\r\n        let width = el.offsetWidth;\r\n\r\n        if (margin) {\r\n            const style = getComputedStyle(el);\r\n            width += parseFloat(style.marginLeft) + parseFloat(style.marginRight);\r\n        }\r\n\r\n        return width;\r\n    }\r\n}\r\n","import { LocaleService } from '@farris/ui-locale';\r\nimport { Injectable, Injector, EventEmitter, Optional } from '@angular/core';\r\nimport { Compare, FilterCondition, Relation } from '@farris/ui-common/types';\r\nimport { DatagridFacadeService } from './datagrid-facade.service';\r\nimport { Utils } from './../utils/utils';\r\nimport { DataColumn, ColumnFilterType, ColumnFilter, FilterCondition as ClientFilterCondition } from '../types/data-column';\r\nimport { DatagridColumnsHelper } from './datagrid-columns.helper';\r\nimport { trim } from 'lodash-es';\r\n\r\n@Injectable()\r\nexport class DatagridFilterService {\r\n    removeField = new EventEmitter<string>();\r\n\r\n    constructor(private dfs: DatagridFacadeService, private localeSer: LocaleService, private inject: Injector) {\r\n    }\r\n\r\n    validateRowData(rowData: any, conditions: { [field: string]: ClientFilterCondition }) {\r\n        if (!conditions || Object.keys(conditions).length === 0) {\r\n            return true;\r\n        }\r\n        return this.checkAllFieldInRowData(rowData, conditions);\r\n    }\r\n\r\n    executeFilter(data: [], conditions: any): any[] {\r\n        if ( this.dfs.getState().enableSmartFilter) {\r\n            return this.executeSmartFilter(data, conditions);\r\n        }\r\n\r\n        if (data && data.length) {\r\n            return data.filter(n => this.validateRowData(n, conditions));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    private getCompareResult(fieldDataValue: any, operator: Compare, targetValue: any) {\r\n        const op = parseInt('' + operator, 10);\r\n        switch (op) {\r\n            case Compare.Equal:\r\n                return fieldDataValue == targetValue;\r\n            case Compare.NotEqual:\r\n                return ('' + fieldDataValue).toLowerCase() !== ('' + targetValue).toLowerCase();\r\n            case Compare.Greater:\r\n                return fieldDataValue > targetValue;\r\n            case Compare.GreaterOrEqual:\r\n                return fieldDataValue >= targetValue;\r\n            case Compare.Less:\r\n                return fieldDataValue < targetValue;\r\n            case Compare.LessOrEqual:\r\n                return fieldDataValue <= targetValue;\r\n            case Compare.Like:\r\n                if (fieldDataValue == null) {\r\n                    fieldDataValue = '';\r\n                }\r\n                return ('' + fieldDataValue).toLowerCase().indexOf(targetValue.toLowerCase()) > -1;\r\n            case Compare.NotLike:\r\n                return ('' + fieldDataValue).toLowerCase().indexOf(targetValue.toLowerCase()) === -1;\r\n            case Compare.In:\r\n                targetValue = targetValue || [];\r\n                return targetValue.findIndex( n => n == fieldDataValue) > -1;\r\n            case 1001: // Empty\r\n                return trim(fieldDataValue) === '' || fieldDataValue === null || fieldDataValue === undefined;\r\n            case 1002:  // NotEmpty\r\n                return trim(fieldDataValue) !== '' && fieldDataValue !== null && fieldDataValue !== undefined;\r\n            case 1003: // Null\r\n                return fieldDataValue === null;\r\n            case 1004: // NotNull\r\n                return fieldDataValue !== null;\r\n        }\r\n    }\r\n\r\n    private getRelationResult(result1: boolean, relation: 'and' | 'or', result2: boolean) {\r\n        const _relation = relation.toLowerCase();\r\n        if (_relation === 'and') {\r\n            return result1 && result2;\r\n        } else {\r\n            return result1 || result2;\r\n        }\r\n    }\r\n\r\n    private checkAllFieldResult(resultObj: { [key: string]: boolean }) {\r\n        if (!resultObj) {\r\n            return true;\r\n        }\r\n\r\n        return Object.values(resultObj).reduce((c, n) => {\r\n            return c && n;\r\n        }, true);\r\n    }\r\n\r\n    private checkAllFieldInRowData(rowData: any, conditions: { [field: string]: ClientFilterCondition }) {\r\n        // this.state = conditions;\r\n        let resultObj = null;\r\n        if (conditions) {\r\n            const fields = Object.keys(conditions);\r\n            resultObj = {};\r\n            fields.forEach(field => {\r\n                let fieldValue = Utils.getValue(field, rowData);\r\n                const columnObj = this.dfs.getColumn(field);\r\n                if (columnObj && columnObj.isMultilingualField) {\r\n                    fieldValue = Utils.getMultilingualValue(fieldValue, this.localeSer.localeId);\r\n                }\r\n\r\n                const where = conditions[field];\r\n                const { value1, operator1, relation, operator2, value2 } = where;\r\n                if (where) {\r\n                    const result = this.getCompareResult(fieldValue , operator1, value1);\r\n                    resultObj[field] = result;\r\n                    if (relation) {\r\n                        const result2 = this.getCompareResult(fieldValue, operator2, value2);\r\n                        resultObj[field] = this.getRelationResult(result, relation, result2);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        return this.checkAllFieldResult(resultObj);\r\n    }\r\n\r\n    removeFilterField(field) {\r\n        this.removeField.emit(field);\r\n    }\r\n\r\n    convertFilterCondition2String(conditions: any) {\r\n        if (!conditions) {\r\n            return '';\r\n        }\r\n        let str = '';\r\n        const andText = this.localeSer.getValue('datagrid.filter.and');\r\n        const orText = this.localeSer.getValue('datagrid.filter.or');\r\n        const and = `<span class='badge badge-success'>${andText}</span>`;\r\n        const and2 = `<span class='badge badge-info'>${andText}</span>`;\r\n        const or = `<span class='badge badge-warning'>${orText}</span>`;\r\n        const lbracket = `<b>ã</b>`;\r\n        const rbracket = `<b>ã</b>`;\r\n        const ellipsis = `[ <span class=\"ellipsis\" title=\"$title$\">  $value$<i class=\"f-icon f-icon-lookup\"></i></span> ]`;\r\n\r\n        str = Object.keys(conditions).reduce((c, r) => {\r\n            const filter = conditions[r];\r\n            const col = this.dfs.getColumn(r);\r\n            const t = `<b>${col.title}</b>`;\r\n\r\n            let s = ` ${t} ${this.getCompareString(filter.operator1)} ${Utils.escapeValue(filter.value1)}  `;\r\n            if (filter.operator1 == Compare.In) {\r\n                let txt = filter.value1;\r\n                let txt2 = txt;\r\n                if (col.filter.type === ColumnFilterType.enum) {\r\n                    const enumOpts = DatagridColumnsHelper.getFilterEnumOptions(col);\r\n                    txt = DatagridColumnsHelper.getEnumText(enumOpts, filter.value1);\r\n                    txt2 = txt.split(',').slice(0, 2).join(',');\r\n                } else {\r\n                    txt2 = txt.slice(0, 2).join(',');\r\n                }\r\n\r\n                s = ` ${t} ${this.getCompareString(filter.operator1)} [ ${txt} ]  `;\r\n                if (filter.value1.length > 2) {\r\n                    s = ` ${t} ${this.getCompareString(filter.operator1)} ${ellipsis.replace('$title$', txt).replace('$value$', txt2)}  `;\r\n                }\r\n            } else {\r\n                if (filter.operator1 == Compare.Equal && Array.isArray(filter.value1)) {\r\n                    if (!filter.value1.length) {\r\n                        s = ` ${t} ${this.getCompareString(filter.operator1)} ''  `;\r\n                    }\r\n                }\r\n            }\r\n            if (filter.relation) {\r\n                const s2 = `${t} ${this.getCompareString(filter.operator2)} ${filter.value2}`;\r\n                s = `${lbracket} ${s} ${filter.relation === 'and' ? and2 : or} ${s2} ${rbracket}`;\r\n            }\r\n            return `${c} <span class=\"filter-field filter-column-${r}\"> ${s} AND </span>`;\r\n        }, '');\r\n        const lastANDidx = str.lastIndexOf('AND');\r\n        let resultStr = str.substr(0, lastANDidx);\r\n        resultStr += str.substr(lastANDidx + 3);\r\n        return resultStr.replace(/AND/g, and).replace(/OR/g, or);\r\n    }\r\n\r\n    private getCompareString(operator: Compare) {\r\n        const op = parseInt('' + operator, 10);\r\n        let code = '';\r\n        switch (op) {\r\n            case Compare.Equal:\r\n            case Compare.NotEqual:\r\n            case Compare.Greater:\r\n            case Compare.GreaterOrEqual:\r\n            case Compare.Less:\r\n            case Compare.LessOrEqual:\r\n            case Compare.Like:\r\n            case Compare.NotLike:\r\n            case Compare.In:\r\n                code = Compare[op];\r\n                code = code[0].toLowerCase() + code.substr(1);\r\n                return this.localeSer.getValue('datagrid.filter.operators.' + code);\r\n            case 1001: // Empty\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.empty');\r\n            case 1002:  // NotEmpty\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.notEmpty');\r\n            case 1003: // Null\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.null');\r\n            case 1004: // NotNull\r\n                return ' ' + this.localeSer.getValue('datagrid.filter.operators.notNull');\r\n        }\r\n    }\r\n\r\n    convert2FilterArray(condition: { [field: string]: any }): FilterCondition[] {\r\n        const filterArr = [];\r\n        const excludeDataTypes = ['number', 'date', 'datetime'];\r\n        if (condition) {\r\n            const fields = Object.keys(condition);\r\n            if (fields && fields.length) {\r\n                fields.forEach(field => {\r\n\r\n                    const columnInfo = this.dfs.getColumn(field);\r\n                    const dataType = columnInfo.dataType || 'string';\r\n\r\n                    const obj = { filterField: field, value: '', lbracket: '', rbracket: '', relation: 1, compare: 0 };\r\n                    const conditionVal = condition[field];\r\n                    if (typeof conditionVal === 'object') {\r\n                        // tfs 568484\r\n                        const operator1 = parseInt('' + conditionVal.operator1, 10);\r\n                        if (operator1 === 1001 || operator1 === 1002) {\r\n                            obj.compare = operator1 === 1001 ? Compare.Equal : Compare.NotEqual;\r\n                            obj.lbracket = '(';\r\n                            obj.relation = operator1 === 1002 ? 1 : 2;\r\n                            filterArr.push(obj);\r\n                            if (excludeDataTypes.includes(dataType)) {\r\n                                obj.value = null;\r\n                                obj.lbracket = '';\r\n                                obj.relation = 1;\r\n                                obj.compare = operator1 === 1002 ? Compare.IsNot : Compare.Is;\r\n                                return;\r\n                            }\r\n\r\n                            const obj2 = { filterField: field, value: null, lbracket: '', rbracket: ')', relation: 1, compare: 0 };\r\n\r\n                            if (operator1 === 1002) {\r\n                                obj2.compare = Compare.IsNot;\r\n                            } else {\r\n                                obj2.compare = Compare.Is;\r\n                            }\r\n\r\n                           \r\n                            filterArr.push(obj2);\r\n                            return;\r\n                        }\r\n\r\n                        obj.compare = conditionVal.operator1;\r\n                        obj.value = conditionVal.value1;\r\n                        filterArr.push(obj);\r\n                        if (conditionVal.value2) {\r\n                            obj.lbracket = '(';\r\n                            obj.relation = conditionVal.relation === 'and' ? 1 : 2;\r\n\r\n                            const obj2 = { filterField: field, value: '', lbracket: '', rbracket: ')', relation: 1, compare: 0 };\r\n                            obj2.compare = conditionVal.operator2;\r\n                            obj2.value = conditionVal.value2;\r\n\r\n                            filterArr.push(obj2);\r\n                        } else {\r\n                            if (conditionVal.operator2) {\r\n                                const op2 = parseInt('' + conditionVal.operator2, 10); //  Empty: 1001, NotEmpty: 1002\r\n                                if (op2 === 1001 || op2 === 1002) {\r\n                                    obj.lbracket = '(';\r\n                                    obj.relation = conditionVal.relation === 'and' ? 1 : 2;\r\n\r\n                                    const obj2 = { filterField: field, value: '', lbracket: '(', rbracket: '', relation: 2, compare: 0 };\r\n                                    obj2.compare = op2 === 1001 ? Compare.Equal : Compare.NotEqual;\r\n                                    obj2.relation = op2 === 1002? 1: 2;\r\n                                    filterArr.push(obj2);\r\n                                    if (excludeDataTypes.includes(dataType)) {\r\n                                        obj2.value = null;\r\n                                        obj2.lbracket = '';\r\n                                        obj2.rbracket = ')';\r\n                                        obj2.relation = 1;\r\n                                        obj2.compare = op2 === 1002 ? Compare.IsNot : Compare.Is;\r\n                                        return;\r\n                                    }\r\n\r\n                                    const obj21 = { filterField: field, value: null, lbracket: '', rbracket: '))', relation: 1, compare: 0 };\r\n                                    obj21.compare = op2 === 1001 ? Compare.Is : Compare.IsNot;\r\n                                    filterArr.push(obj21);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return obj;\r\n                });\r\n            }\r\n        }\r\n\r\n        if (filterArr.length) {\r\n            this.checkEnumTypeFilters(filterArr);\r\n            filterArr[filterArr.length - 1].relation = 0;\r\n        }\r\n\r\n        return filterArr;\r\n    }\r\n\r\n    private checkEnumTypeFilters(filterArr: FilterCondition[]) {\r\n        const enumFilters:{[key:string]: any[]} = { };\r\n        filterArr.forEach((f, i) => {\r\n            const enumFilterArr = this.convertEnumTypeFilter(f);\r\n            if (enumFilterArr && enumFilterArr.length) {\r\n                enumFilters[f.filterField] = enumFilterArr\r\n            }\r\n        });\r\n\r\n        const keys = Object.keys(enumFilters);\r\n        if (keys.length) {\r\n            keys.forEach((k) => {\r\n                const i = filterArr.findIndex(n => n.filterField === k);\r\n                filterArr.splice(i, 1, ...enumFilters[k]);\r\n            })\r\n        }\r\n\r\n        return filterArr;\r\n    }\r\n\r\n    // å°enum ç±»åçæ¡ä»¶è½¬æ¢å¤ä¸ªæ¡ä»¶\r\n    private convertEnumTypeFilter(filter: FilterCondition) : FilterCondition[] {\r\n        if (filter) {\r\n            const col = this.dfs.getColumn(filter.filterField) as DataColumn;\r\n            if (col && col.filter && col.filter.type ===  ColumnFilterType.enum)  {\r\n                if (Array.isArray(filter.value) && filter.value.length) {\r\n                    if (filter.value.length === 1) {\r\n                        filter.compare = Compare.Equal;\r\n                        filter.value = filter.value[0];\r\n                        return [];\r\n                    } else {\r\n                        // > 1\r\n                        let filterArr = filter.value.map((val: any) => {\r\n                            return {\r\n                                filterField: filter.filterField, \r\n                                value: val, \r\n                                lbracket: '',\r\n                                rbracket: '',\r\n                                relation: 2,  // or\r\n                                compare: 0\r\n                            }\r\n                        });\r\n                        filterArr[0].lbracket = '(';\r\n                        filterArr[filter.value.length -1].rbracket = ')';\r\n                        filterArr[filter.value.length -1].relation = 1;\r\n                        return filterArr;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    createColumnFilterOptions(col: DataColumn) {\r\n        let filterTypeOptions: ColumnFilter = {\r\n            type: ColumnFilterType.string,\r\n            enableOperator: true\r\n        };\r\n        if (col.editor) {\r\n            switch (col.editor.type) {\r\n                case 'textarea':\r\n                case 'textbox':\r\n                case 'language-textbox':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.string,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n                case 'checkbox':\r\n                case 'switch':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.boolean,\r\n                        enableOperator: false\r\n                    };\r\n                    break;\r\n                case 'numberbox':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.number,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n                case 'combolist':\r\n                case 'select':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.enum,\r\n                        enableOperator: true,\r\n                        options: col.editor.options\r\n                    };\r\n                    break;\r\n                case 'datepicker':\r\n                    filterTypeOptions = {\r\n                        type: col['dataType'] === 'datetime' ? ColumnFilterType.datetime : ColumnFilterType.date,\r\n                        enableOperator: true,\r\n                        options: {\r\n                            dateFormat: col.editor.options.dateFormat,\r\n                            returnFormat: col.editor.options.returnFormat\r\n                        }\r\n                    };\r\n                    break;\r\n                case 'timepicker':\r\n                    filterTypeOptions = {\r\n                        type: ColumnFilterType.time,\r\n                        enableOperator: true\r\n                    };\r\n                    break;\r\n\r\n            }\r\n        } else if (col.formatter) {\r\n            if (typeof col.formatter === 'object' && Object.keys(col.formatter).length) {\r\n                const options: any = col.formatter['options'];\r\n                switch (col.formatter['type']) {\r\n                    case 'number':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.number,\r\n                            enableOperator: true\r\n                        };\r\n                        break;\r\n                    case 'enum':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.enum,\r\n                            enableOperator: true,\r\n                            options\r\n                        };\r\n                        break;\r\n                    case 'boolean':\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.boolean,\r\n                            enableOperator: false\r\n                        };\r\n                        break;\r\n                    case 'datetime':\r\n                        let tye = ColumnFilterType.datetime;\r\n                        let fmt = 'yyyy-MM-dd';\r\n                        let returnFmt = 'yyyy-MM-dd';\r\n                        if (options && options.format) {\r\n                            fmt = options.format;\r\n                            if (fmt.indexOf('HH:') == -1) {\r\n                                tye = ColumnFilterType.date;\r\n                            } else {\r\n                                returnFmt += ' HH:mm';\r\n                                if (fmt.indexOf('ss') > -1) {\r\n                                    returnFmt += ':ss';\r\n                                }\r\n                            }\r\n                        } else {\r\n                            tye = ColumnFilterType.date;\r\n                        }\r\n                        filterTypeOptions = {\r\n                            type: tye,\r\n                            enableOperator: true\r\n                        };\r\n\r\n                        filterTypeOptions.options = { dateFormat: fmt, returnFormat: returnFmt };\r\n                        break;\r\n                    default:\r\n                        filterTypeOptions = {\r\n                            type: ColumnFilterType.string,\r\n                            enableOperator: true\r\n                        };\r\n                }\r\n            }\r\n        } else {\r\n            filterTypeOptions = {\r\n                type: ColumnFilterType.string,\r\n                enableOperator: true\r\n            };\r\n        }\r\n        return filterTypeOptions;\r\n    }\r\n\r\n    //#region  Smart Filter\r\n\r\n    convertSmartFilter2EntityFilter(conditions: any[]) {\r\n        if (conditions && conditions.length) {\r\n            return conditions.map(n => {\r\n                return n;\r\n            });\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    private validateRowData2(rowData: any, conditions: any) {\r\n        if (!conditions || conditions.length === 0) {\r\n            return true;\r\n        }\r\n        return this.checkRowDataWithCondition(rowData, conditions);\r\n    }\r\n\r\n    private checkRowDataWithCondition(rowData: any, conditions) {\r\n        let resultObj = null;\r\n        if (conditions) {\r\n            resultObj = {};\r\n            conditions.forEach(condition => {\r\n                const field = condition.FilterField;\r\n                let fieldValue = Utils.getValue(field, rowData);\r\n                const columnObj = this.dfs.getColumn(field);\r\n                if (columnObj && columnObj.isMultilingualField) {\r\n                    fieldValue = Utils.getMultilingualValue(fieldValue, this.localeSer.localeId);\r\n                }\r\n\r\n                const where = condition;\r\n                const { Value, Relation, Compare: operator1 } = where;\r\n                if (where) {\r\n                    const r = this.getCompareResult(fieldValue, operator1, Value);\r\n                    if (resultObj[field] === undefined) {\r\n                        resultObj[field] = [ r ];\r\n                    } else {\r\n                        resultObj[field].push(r);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        // return this.checkAllFieldResult(resultObj);\r\n        const fields = Object.keys(resultObj);\r\n        const result = [];\r\n        fields.forEach( (f) => {\r\n            const _filters = conditions.filter(n => n.FilterField === f);\r\n            if (resultObj[f].length === 1) {\r\n                result.push(resultObj[f][0]);\r\n            } else {\r\n                if (_filters[0].Relation === 1 && resultObj[f].length === 2) {  // and\r\n                    result.push(resultObj[f][0] && resultObj[f][1]);\r\n                } else {  // or\r\n                    result.push(resultObj[f].indexOf(true) > -1);\r\n                }\r\n            }\r\n        });\r\n\r\n        return result.indexOf(false) === -1;\r\n    }\r\n\r\n    executeSmartFilter(data: [], conditions: any[]) {\r\n        if (data && data.length) {\r\n            return data.filter(n => this.validateRowData2(n, conditions));\r\n        }\r\n        return data;\r\n    }\r\n\r\n    //#endregion\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n/**\r\n * @deprecated åé¨åç»ä»¶å·²åºå¼ï¼åé¡µç»ä»¶ä½¿ç¨farris-ui ä¸­çå¬å±ç»ä»¶\r\n */\r\n@NgModule({\r\n    declarations: [],\r\n    imports: [ CommonModule ],\r\n    exports: [],\r\n    providers: [\r\n    ],\r\n})\r\nexport class NgxPaginationModule {}\r\n","\r\nexport class PaginationService {}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport const SCROLLBAR_CONFIG = new InjectionToken(\r\n    'PERFECT_SCROLLBAR_CONFIG'\r\n);\r\n\r\nexport class Geometry {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    public w: number;\r\n    public h: number;\r\n\r\n    constructor(x: number, y: number, w: number, h: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.w = w;\r\n        this.h = h;\r\n    }\r\n}\r\n\r\nexport class Position {\r\n    public x: number | 'start' | 'end';\r\n    public y: number | 'start' | 'end';\r\n\r\n    constructor(x: number | 'start' | 'end', y: number | 'start' | 'end') {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\r\nexport type ScrollbarEvent =\r\n    | 'psScrollY'\r\n    | 'psScrollX'\r\n    | 'psScrollUp'\r\n    | 'psScrollDown'\r\n    | 'psScrollLeft'\r\n    | 'psScrollRight'\r\n    | 'psYReachEnd'\r\n    | 'psYReachStart'\r\n    | 'psXReachEnd'\r\n    | 'psXReachStart';\r\n\r\nexport const ScrollbarEvents: ScrollbarEvent[] = [\r\n    'psScrollY',\r\n    'psScrollX',\r\n\r\n    'psScrollUp',\r\n    'psScrollDown',\r\n    'psScrollLeft',\r\n    'psScrollRight',\r\n\r\n    'psYReachEnd',\r\n    'psYReachStart',\r\n    'psXReachEnd',\r\n    'psXReachStart'\r\n];\r\n\r\nexport interface ScrollbarConfigInterface {\r\n    handlers?: string[];\r\n\r\n    wheelSpeed?: number;\r\n    swipeEasing?: boolean;\r\n\r\n    suppressScrollX?: boolean;\r\n    suppressScrollY?: boolean;\r\n\r\n    wheelPropagation?: boolean;\r\n    useBothWheelAxes?: boolean;\r\n\r\n    scrollingThreshold?: number;\r\n\r\n    minScrollbarLength?: number;\r\n    maxScrollbarLength?: number;\r\n\r\n    scrollXMarginOffset?: number;\r\n    scrollYMarginOffset?: number;\r\n}\r\n\r\nexport class ScrollbarConfig implements ScrollbarConfigInterface {\r\n    public handlers?: string[];\r\n\r\n    public wheelSpeed?: number;\r\n    public swipeEasing?: boolean;\r\n\r\n    public suppressScrollX?: boolean;\r\n    public suppressScrollY?: boolean;\r\n\r\n    public wheelPropagation?: boolean;\r\n    public useBothWheelAxes?: boolean;\r\n\r\n    public scrollingThreshold?: number;\r\n\r\n    public minScrollbarLength?: number;\r\n    public maxScrollbarLength?: number;\r\n\r\n    public scrollXMarginOffset?: number;\r\n    public scrollYMarginOffset?: number;\r\n\r\n    constructor(config: ScrollbarConfigInterface = {}) {\r\n        this.assign(config);\r\n    }\r\n\r\n    public assign(config: ScrollbarConfigInterface = {}) {\r\n        for (const key in config) {\r\n            this[key as keyof ScrollbarConfig] = config[key as keyof ScrollbarConfigInterface];\r\n        }\r\n    }\r\n}\r\n","import { AfterViewInit } from '@angular/core';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-07-29 08:14:22\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-10 15:11:09\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\nimport PerfectScrollbar from 'perfect-scrollbar';\r\n\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nimport { Subject, fromEvent, Observable, interval } from 'rxjs';\r\nimport { auditTime, takeUntil, debounceTime, throttle } from 'rxjs/operators';\r\n\r\nimport {\r\n    NgZone, Inject, Optional, ElementRef, Directive,\r\n    OnInit, DoCheck, OnChanges, OnDestroy, Input, Output, EventEmitter,\r\n    SimpleChanges, KeyValueDiffer, KeyValueDiffers\r\n} from '@angular/core';\r\n\r\nimport { Geometry, Position } from './scrollbar.interfaces';\r\n\r\nimport {\r\n    SCROLLBAR_CONFIG, ScrollbarConfig, ScrollbarConfigInterface,\r\n    ScrollbarEvent, ScrollbarEvents\r\n} from './scrollbar.interfaces';\r\n\r\n@Directive({\r\n    selector: '[scrollbar]',\r\n    exportAs: 'ngxScrollbar'\r\n})\r\nexport class ScrollbarDirective implements OnInit, OnDestroy, DoCheck, OnChanges, AfterViewInit {\r\n    instance: PerfectScrollbar | null = null;\r\n\r\n    private ro: ResizeObserver | null = null;\r\n\r\n    private timeout: number | null = null;\r\n    private animation: number | null = null;\r\n\r\n    private configDiff: KeyValueDiffer<string, any> | null = null;\r\n\r\n    private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n    @Input() disabled = false;\r\n\r\n    @Input('scrollbar') config?: ScrollbarConfigInterface;\r\n\r\n    @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    constructor(private zone: NgZone, private differs: KeyValueDiffers,\r\n                public elementRef: ElementRef, @Inject(PLATFORM_ID) private platformId: any,\r\n                @Optional() @Inject(SCROLLBAR_CONFIG) private defaults: ScrollbarConfigInterface) { }\r\n\r\n    ngOnInit(): void {\r\n        if (!this.disabled && isPlatformBrowser(this.platformId)) {\r\n            const config = new ScrollbarConfig(this.defaults);\r\n\r\n            config.assign(this.config); // Custom configuration\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this.instance = new PerfectScrollbar(this.elementRef.nativeElement, config);\r\n                });\r\n            });\r\n\r\n            if (!this.configDiff) {\r\n                this.configDiff = this.differs.find(this.config || {}).create();\r\n\r\n                this.configDiff.diff(this.config || {});\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                this.ro = new ResizeObserver(() => {\r\n                    this.update();\r\n                });\r\n\r\n                if (this.elementRef.nativeElement.children[0]) {\r\n                    this.ro.observe(this.elementRef.nativeElement.children[0]);\r\n                }\r\n\r\n                this.ro.observe(this.elementRef.nativeElement);\r\n            });\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                ScrollbarEvents.forEach((eventName: ScrollbarEvent) => {\r\n                    const eventType = eventName.replace(/([A-Z])/g, (c) => `-${c.toLowerCase()}`);\r\n\r\n                    if (eventName.indexOf('X') > -1 || eventName.indexOf('Left') > -1 || eventName.indexOf('Right') > -1) {\r\n                        fromEvent<Event>(this.elementRef.nativeElement, eventType).subscribe((event: Event) => {\r\n                            this[eventName].emit(event);\r\n                        });\r\n                    } else {\r\n                        fromEvent<Event>(this.elementRef.nativeElement, eventType).pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        ).pipe(\r\n                            // debounceTime(20),\r\n                            // throttle(ev => interval(20)),\r\n                            auditTime(20),  // auditTime éé»æå®çæ¶é´ï¼å¨æ­¤æ¶é´åå¿½ç¥ææååºçå¼ï¼æ¶é´è¿åï¼ååºææ°çå¼\r\n                        )\r\n                        .subscribe((event: Event) => {\r\n                            this[eventName].emit(event);\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // this.zone.runOutsideAngular(() => {\r\n        //     this.instance = new PerfectScrollbar(this.elementRef.nativeElement, this.config);\r\n        // });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.ngDestroy.next();\r\n            this.ngDestroy.complete();\r\n\r\n            if (this.ro) {\r\n                this.ro.disconnect();\r\n            }\r\n\r\n            if (this.timeout && typeof window !== 'undefined') {\r\n                window.clearTimeout(this.timeout);\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                if (this.instance) {\r\n                    this.instance.destroy();\r\n                }\r\n            });\r\n\r\n            this.instance = null;\r\n        }\r\n    }\r\n\r\n    ngDoCheck(): void {\r\n        if (!this.disabled && this.configDiff && isPlatformBrowser(this.platformId)) {\r\n            const changes = this.configDiff.diff(this.config || {});\r\n\r\n            if (changes) {\r\n                this.ngOnDestroy();\r\n\r\n                this.ngOnInit();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes['disabled'] && !changes['disabled'].isFirstChange() && isPlatformBrowser(this.platformId)) {\r\n            if (changes['disabled'].currentValue !== changes['disabled'].previousValue) {\r\n                if (changes['disabled'].currentValue === true) {\r\n                    this.ngOnDestroy();\r\n                } else if (changes['disabled'].currentValue === false) {\r\n                    this.ngOnInit();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public ps(): PerfectScrollbar | null {\r\n        return this.instance;\r\n    }\r\n\r\n    public update(): void {\r\n        if (typeof window !== 'undefined') {\r\n            if (this.timeout) {\r\n                window.clearTimeout(this.timeout);\r\n            }\r\n\r\n            this.timeout = window.setTimeout(() => {\r\n                if (!this.disabled && this.configDiff) {\r\n                    try {\r\n                        this.zone.runOutsideAngular(() => {\r\n                            if (this.instance) {\r\n                                this.instance.update();\r\n                            }\r\n                        });\r\n                    } catch (error) {\r\n                        // Update can be finished after destroy so catch errors\r\n                    }\r\n                }\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    public geometry(prefix: string = 'scroll'): Geometry {\r\n        return new Geometry(\r\n            this.elementRef.nativeElement[prefix + 'Left'],\r\n            this.elementRef.nativeElement[prefix + 'Top'],\r\n            this.elementRef.nativeElement[prefix + 'Width'],\r\n            this.elementRef.nativeElement[prefix + 'Height']\r\n        );\r\n    }\r\n\r\n    public position(absolute: boolean = false): Position {\r\n        if (!absolute && this.instance) {\r\n            return new Position(\r\n                this.instance.reach.x || 0,\r\n                this.instance.reach.y || 0\r\n            );\r\n        } else {\r\n            return new Position(\r\n                this.elementRef.nativeElement.scrollLeft,\r\n                this.elementRef.nativeElement.scrollTop\r\n            );\r\n        }\r\n    }\r\n\r\n    public scrollable(direction: string = 'any'): boolean {\r\n        const element = this.elementRef.nativeElement;\r\n\r\n        if (direction === 'any') {\r\n            return element.classList.contains('ps--active-x') ||\r\n                element.classList.contains('ps--active-y');\r\n        } else if (direction === 'both') {\r\n            return element.classList.contains('ps--active-x') &&\r\n                element.classList.contains('ps--active-y');\r\n        } else {\r\n            return element.classList.contains('ps--active-' + direction);\r\n        }\r\n    }\r\n\r\n    public scrollTo(x: number, y?: number, speed?: number): void {\r\n        if (!this.disabled) {\r\n            if (y == null && speed == null) {\r\n                this.animateScrolling('scrollTop', x, speed);\r\n            } else {\r\n                if (x != null) {\r\n                    this.animateScrolling('scrollLeft', x, speed);\r\n                }\r\n\r\n                if (y != null) {\r\n                    this.animateScrolling('scrollTop', y, speed);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public scrollToX(x: number, speed?: number): void {\r\n        this.animateScrolling('scrollLeft', x, speed);\r\n    }\r\n\r\n    public scrollToY(y: number, speed?: number): void {\r\n        this.animateScrolling('scrollTop', y, speed);\r\n    }\r\n\r\n    public scrollToTop(offset?: number, speed?: number): void {\r\n        this.animateScrolling('scrollTop', (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToLeft(offset?: number, speed?: number): void {\r\n        this.animateScrolling('scrollLeft', (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToRight(offset?: number, speed?: number): void {\r\n        const left = this.elementRef.nativeElement.scrollWidth -\r\n            this.elementRef.nativeElement.clientWidth;\r\n\r\n        this.animateScrolling('scrollLeft', left - (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToBottom(offset?: number, speed?: number): void {\r\n        const top = this.elementRef.nativeElement.scrollHeight -\r\n            this.elementRef.nativeElement.clientHeight;\r\n\r\n        this.animateScrolling('scrollTop', top - (offset || 0), speed);\r\n    }\r\n\r\n    public scrollToElement(qs: string, offset?: number, speed?: number): void {\r\n        const element = this.elementRef.nativeElement.querySelector(qs);\r\n\r\n        if (element) {\r\n            const elementPos = element.getBoundingClientRect();\r\n\r\n            const scrollerPos = this.elementRef.nativeElement.getBoundingClientRect();\r\n\r\n            if (this.elementRef.nativeElement.classList.contains('ps--active-x')) {\r\n                const currentPos = this.elementRef.nativeElement['scrollLeft'];\r\n\r\n                const position = elementPos.left - scrollerPos.left + currentPos;\r\n\r\n                this.animateScrolling('scrollLeft', position + (offset || 0), speed);\r\n            }\r\n\r\n            if (this.elementRef.nativeElement.classList.contains('ps--active-y')) {\r\n                const currentPos = this.elementRef.nativeElement['scrollTop'];\r\n\r\n                const position = elementPos.top - scrollerPos.top + currentPos;\r\n\r\n                this.animateScrolling('scrollTop', position + (offset || 0), speed);\r\n            }\r\n        }\r\n    }\r\n\r\n    private animateScrolling(target: string, value: number, speed?: number): void {\r\n        if (this.animation) {\r\n            window.cancelAnimationFrame(this.animation);\r\n\r\n            this.animation = null;\r\n        }\r\n\r\n        if (!speed || typeof window === 'undefined') {\r\n            this.elementRef.nativeElement[target] = value;\r\n        } else if (value !== this.elementRef.nativeElement[target]) {\r\n            let newValue = 0;\r\n            let scrollCount = 0;\r\n\r\n            let oldTimestamp = performance.now();\r\n            let oldValue = this.elementRef.nativeElement[target];\r\n\r\n            const cosParameter = (oldValue - value) / 2;\r\n\r\n            const step = (newTimestamp: number) => {\r\n                scrollCount += Math.PI / (speed / (newTimestamp - oldTimestamp));\r\n\r\n                newValue = Math.round(value + cosParameter + cosParameter * Math.cos(scrollCount));\r\n\r\n                // Only continue animation if scroll position has not changed\r\n                if (this.elementRef.nativeElement[target] === oldValue) {\r\n                    if (scrollCount >= Math.PI) {\r\n                        this.animateScrolling(target, value, 0);\r\n                    } else {\r\n                        this.elementRef.nativeElement[target] = newValue;\r\n\r\n                        // On a zoomed out page the resulting offset may differ\r\n                        oldValue = this.elementRef.nativeElement[target];\r\n\r\n                        oldTimestamp = newTimestamp;\r\n\r\n                        this.animation = window.requestAnimationFrame(step);\r\n                    }\r\n                }\r\n            };\r\n\r\n            window.requestAnimationFrame(step);\r\n        }\r\n    }\r\n}\r\n","import { Subject, merge, fromEvent } from 'rxjs';\r\nimport { mapTo, takeUntil, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport {\r\n    NgZone, Inject, Component,\r\n    OnInit, OnDestroy, DoCheck, Input, Output, EventEmitter, HostBinding,\r\n    ViewChild, ViewEncapsulation, ChangeDetectorRef\r\n} from '@angular/core';\r\n\r\nimport { ScrollbarDirective } from './scrollbar.directive';\r\n\r\nimport {\r\n    ScrollbarEvent, ScrollbarEvents,\r\n    ScrollbarConfigInterface\r\n} from './scrollbar.interfaces';\r\n\r\n// styleUrls: [\r\n//     './scrollbar.component.css'\r\n// ],\r\n\r\n@Component({\r\n    selector: 'scrollbar',\r\n    exportAs: 'ngxScrollbar',\r\n    templateUrl: './scrollbar.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ScrollbarComponent implements OnInit, OnDestroy, DoCheck {\r\n    public states: any = {};\r\n\r\n    public indicatorX = false;\r\n    public indicatorY = false;\r\n\r\n    public interaction = false;\r\n\r\n    private scrollPositionX = 0;\r\n    private scrollPositionY = 0;\r\n\r\n    private scrollDirectionX = 0;\r\n    private scrollDirectionY = 0;\r\n\r\n    private usePropagationX = false;\r\n    private usePropagationY = false;\r\n\r\n    private allowPropagationX = false;\r\n    private allowPropagationY = false;\r\n\r\n    private stateTimeout: number | null = null;\r\n\r\n    private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n    private readonly stateUpdate: Subject<string> = new Subject();\r\n\r\n    @Input() disabled = false;\r\n\r\n    @Input() usePSClass = true;\r\n\r\n    @HostBinding('class.ps-show-limits')\r\n    @Input() autoPropagation = false;\r\n\r\n    @HostBinding('class.ps-show-active')\r\n    @Input() scrollIndicators = false;\r\n\r\n    @Input() config?: ScrollbarConfigInterface;\r\n\r\n    @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n    @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @ViewChild(ScrollbarDirective) directiveRef?: ScrollbarDirective;\r\n\r\n    constructor(private zone: NgZone, private cdRef: ChangeDetectorRef,\r\n                @Inject(PLATFORM_ID) private platformId: any) { }\r\n\r\n    ngOnInit(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.stateUpdate\r\n                .pipe( takeUntil(this.ngDestroy))\r\n                .pipe(\r\n                    distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\r\n                )\r\n                .subscribe((state: string) => {\r\n                    if (this.stateTimeout && typeof window !== 'undefined') {\r\n                        window.clearTimeout(this.stateTimeout);\r\n\r\n                        this.stateTimeout = null;\r\n                    }\r\n\r\n                    if (state === 'x' || state === 'y') {\r\n                        this.interaction = false;\r\n\r\n                        if (state === 'x') {\r\n                            this.indicatorX = false;\r\n\r\n                            this.states.left = false;\r\n                            this.states.right = false;\r\n\r\n                            if (this.autoPropagation && this.usePropagationX) {\r\n                                this.allowPropagationX = false;\r\n                            }\r\n                        } else if (state === 'y') {\r\n                            this.indicatorY = false;\r\n\r\n                            this.states.top = false;\r\n                            this.states.bottom = false;\r\n\r\n                            if (this.autoPropagation && this.usePropagationY) {\r\n                                this.allowPropagationY = false;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (state === 'left' || state === 'right') {\r\n                            this.states.left = false;\r\n                            this.states.right = false;\r\n\r\n                            this.states[state] = true;\r\n\r\n                            if (this.autoPropagation && this.usePropagationX) {\r\n                                this.indicatorX = true;\r\n                            }\r\n                        } else if (state === 'top' || state === 'bottom') {\r\n                            this.states.top = false;\r\n                            this.states.bottom = false;\r\n\r\n                            this.states[state] = true;\r\n\r\n                            if (this.autoPropagation && this.usePropagationY) {\r\n                                this.indicatorY = true;\r\n                            }\r\n                        }\r\n\r\n                        if (this.autoPropagation && typeof window !== 'undefined') {\r\n                            this.stateTimeout = window.setTimeout(() => {\r\n                                this.indicatorX = false;\r\n                                this.indicatorY = false;\r\n\r\n                                this.stateTimeout = null;\r\n\r\n                                if (this.interaction && (this.states.left || this.states.right)) {\r\n                                    this.allowPropagationX = true;\r\n                                }\r\n\r\n                                if (this.interaction && (this.states.top || this.states.bottom)) {\r\n                                    this.allowPropagationY = true;\r\n                                }\r\n\r\n                                this.cdRef.markForCheck();\r\n                            }, 500);\r\n                        }\r\n                    }\r\n\r\n                    this.cdRef.markForCheck();\r\n                    this.cdRef.detectChanges();\r\n                });\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                if (this.directiveRef) {\r\n                    const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n                    fromEvent<WheelEvent>(element, 'wheel')\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((event: WheelEvent) => {\r\n                            if (!this.disabled && this.autoPropagation) {\r\n                                const scrollDeltaX = event.deltaX;\r\n                                const scrollDeltaY = event.deltaY;\r\n\r\n                                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n                            }\r\n                        });\r\n\r\n                    fromEvent<TouchEvent>(element, 'touchmove')\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((event: TouchEvent) => {\r\n                            if (!this.disabled && this.autoPropagation) {\r\n                                const scrollPositionX = event.touches[0].clientX;\r\n                                const scrollPositionY = event.touches[0].clientY;\r\n\r\n                                const scrollDeltaX = scrollPositionX - this.scrollPositionX;\r\n                                const scrollDeltaY = scrollPositionY - this.scrollPositionY;\r\n\r\n                                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n\r\n                                this.scrollPositionX = scrollPositionX;\r\n                                this.scrollPositionY = scrollPositionY;\r\n                            }\r\n                        });\r\n\r\n                    merge(\r\n                        fromEvent(element, 'ps-scroll-x')\r\n                            .pipe(mapTo('x')),\r\n                        fromEvent(element, 'ps-scroll-y')\r\n                            .pipe(mapTo('y')),\r\n                        fromEvent(element, 'ps-x-reach-end')\r\n                            .pipe(mapTo('right')),\r\n                        fromEvent(element, 'ps-y-reach-end')\r\n                            .pipe(mapTo('bottom')),\r\n                        fromEvent(element, 'ps-x-reach-start')\r\n                            .pipe(mapTo('left')),\r\n                        fromEvent(element, 'ps-y-reach-start')\r\n                            .pipe(mapTo('top')),\r\n                    )\r\n                        .pipe(\r\n                            takeUntil(this.ngDestroy)\r\n                        )\r\n                        .subscribe((state: string) => {\r\n                            if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\r\n                                this.stateUpdate.next(state);\r\n                            }\r\n                        });\r\n                }\r\n            });\r\n\r\n            window.setTimeout(() => {\r\n                ScrollbarEvents.forEach((eventName: ScrollbarEvent) => {\r\n                    if (this.directiveRef) {\r\n                        this.directiveRef[eventName] = this[eventName];\r\n                    }\r\n                });\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            this.ngDestroy.next();\r\n            this.ngDestroy.unsubscribe();\r\n\r\n            if (this.stateTimeout && typeof window !== 'undefined') {\r\n                window.clearTimeout(this.stateTimeout);\r\n            }\r\n        }\r\n    }\r\n\r\n    ngDoCheck(): void {\r\n        if (isPlatformBrowser(this.platformId)) {\r\n            if (!this.disabled && this.autoPropagation && this.directiveRef) {\r\n                const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n                this.usePropagationX = element.classList.contains('ps--active-x');\r\n\r\n                this.usePropagationY = element.classList.contains('ps--active-y');\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkPropagation(event: any, deltaX: number, deltaY: number): void {\r\n        this.interaction = true;\r\n\r\n        const scrollDirectionX = (deltaX < 0) ? -1 : 1;\r\n        const scrollDirectionY = (deltaY < 0) ? -1 : 1;\r\n\r\n        if ((this.usePropagationX && this.usePropagationY) ||\r\n            (this.usePropagationX && (!this.allowPropagationX ||\r\n                (this.scrollDirectionX !== scrollDirectionX))) ||\r\n            (this.usePropagationY && (!this.allowPropagationY ||\r\n                (this.scrollDirectionY !== scrollDirectionY)))) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n\r\n        if (!!deltaX) {\r\n            this.scrollDirectionX = scrollDirectionX;\r\n        }\r\n\r\n        if (!!deltaY) {\r\n            this.scrollDirectionY = scrollDirectionY;\r\n        }\r\n\r\n        this.stateUpdate.next('interaction');\r\n\r\n        this.cdRef.detectChanges();\r\n    }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'scrollbar-arrows',\r\n    styleUrls: [\r\n        './scrollbar-arrows.css'\r\n    ],\r\n    templateUrl: './scrollbar-arrows.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class ScrollbarArrowsComponent implements OnInit, OnChanges {\r\n\r\n    @Input() reachX: 'start'|'end' = 'start';\r\n    @Input() reachY: 'start'|'end' = 'start';\r\n\r\n\r\n    @Input() scrollbarXActive = false;\r\n    @Input() scrollbarYActive = false;\r\n\r\n    @Output() hasXScrollbar = new EventEmitter();\r\n    @Output() hasYScrollbar = new EventEmitter();\r\n\r\n    @Output() scrollMoveTo = new EventEmitter();\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() { }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.scrollbarYActive && !changes.scrollbarYActive.isFirstChange()) {\r\n            this.hasYScrollbar.emit(this.scrollbarYActive);\r\n        }\r\n    }\r\n\r\n\r\n    scrollTo($event: MouseEvent, dir: 'left'|'right'|'top'|'bottom') {\r\n        $event.stopPropagation();\r\n        this.scrollMoveTo.emit({ dir, event: $event });\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ScrollbarComponent } from './scrollbar.component';\r\nimport { ScrollbarDirective } from './scrollbar.directive';\r\nimport { ScrollbarArrowsComponent } from './arrow/scrollbar-arrows.component';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        ScrollbarComponent, ScrollbarDirective,\r\n        ScrollbarArrowsComponent,\r\n    ],\r\n    exports: [\r\n        CommonModule, ScrollbarComponent, ScrollbarDirective,\r\n        ScrollbarArrowsComponent,\r\n    ]\r\n})\r\nexport class ScrollbarModule {\r\n}\r\n","import { Directive, TemplateRef } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[grid-cell-editor]',\r\n})\r\nexport class DatagridCellEditorDirective {\r\n    constructor(public template: TemplateRef<any>) {}\r\n}\r\n","import { OnInit, Directive, Input, ContentChild, AfterContentInit } from '@angular/core';\r\nimport { DatagridCellEditorDirective } from './column-cell-edit.directive';\r\n\r\n@Directive({\r\n    selector: 'farris-grid-column',\r\n})\r\nexport class DatagridColumnDirective implements OnInit, AfterContentInit {\r\n\r\n    @Input() field: string;\r\n    @Input() title: string;\r\n    @Input() width: number;\r\n    @Input() halign: 'left' | 'center' |'right' = 'left';\r\n    @Input() align: 'left' | 'center' |'right' = 'left';\r\n    @Input() formatter: (value, rowData, rowIndex) => any;\r\n    @Input() readonly = true;\r\n    @Input() editable = false;\r\n\r\n    @ContentChild(DatagridCellEditorDirective) editor: any;\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n\r\n    ngAfterContentInit() {\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { Component, EventEmitter, Input, OnInit, Output, ElementRef, Renderer2, Injector, OnChanges, SimpleChanges, ViewChild, Optional, OnDestroy } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'smart-filter-toolbar',\r\n    templateUrl: './smart-filter-toolbar.component.html',\r\n})\r\nexport class SmartFilterToolbarComponent implements OnInit, OnChanges, OnDestroy {\r\n    @Input() padding = '';\r\n    @Input() height = 40;\r\n    @Input() filterData = [];\r\n    @Output() clearFilters = new EventEmitter();\r\n    @Output() removeFilter = new EventEmitter();\r\n    @Output() filterChange = new EventEmitter();\r\n\r\n    @Output() resize = new EventEmitter();\r\n\r\n    @ViewChild('farrisFilter') filtebar: any;\r\n    sk = '';\r\n    dg: DatagridComponent;\r\n    destory$ = new Subject();\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector) { }\r\n\r\n    ngOnInit(): void {\r\n        this.dg = this.inject.get<DatagridComponent>(DatagridComponent);\r\n        this.sk =  'smartfilter_' + this.dg.dgs.createConfigKey(this.dg.id);\r\n\r\n\r\n        this.dg.dgs.clearFilter.pipe(takeUntil(this.destory$)).subscribe(() => {\r\n            this.clearFilters.emit(null);\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destory$.next();\r\n        this.destory$.complete();\r\n    }\r\n\r\n    /** æ¡ä»¶ååäºä»¶ */\r\n    onQuery($event) {\r\n        const { data, filterItem } = $event;\r\n        if (data && data.length) {\r\n            const conditions = JSON.parse(data);\r\n            if (conditions && conditions.length) {\r\n                this.filterChange.emit({conditions, filterItem});\r\n            }\r\n        }\r\n    }\r\n\r\n    /** æ¸é¤æææ¡ä»¶ */\r\n    onResetFilter($event) {\r\n        this.clearFilters.emit($event);\r\n    }\r\n\r\n    /** ç§»é¤åä¸ªæ¡ä»¶ */\r\n    onRemoveFilter($event) {\r\n        this.removeFilter.emit($event);\r\n    }\r\n\r\n    /** å±å¼æå äºä»¶ */\r\n    onResize($event) {\r\n        setTimeout(() => {\r\n            const smartFilterWrapper = this.el.nativeElement.querySelector('.f-filter-wrapper');\r\n            if (smartFilterWrapper) {\r\n                const h = smartFilterWrapper.offsetHeight;\r\n                if (h) {\r\n                    this.resize.emit(h + 6);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","export function TextFilterControl(col: any) {\r\n    return {\r\n        controltype: 'text'\r\n    };\r\n}\r\n\r\nexport function BooleanFilterControl(col: any) {\r\n    return {\r\n        controltype: 'bool-check',\r\n        // enumValues: [\r\n        //     {value: true, name: 'true'},\r\n        //     {value: false, name: 'false'}\r\n        // ]\r\n    };\r\n}\r\n\r\nexport function EnumFilterControl(col: any, enumopts: any) {\r\n    const valueField = enumopts.valueField || enumopts.idField;\r\n    const data = enumopts.data.map(n => {\r\n        return {\r\n            value:  n[valueField],\r\n            name: n[enumopts.textField]\r\n        };\r\n    });\r\n\r\n    return {\r\n        controltype: 'checkboxgroup',\r\n        enumValues: data,\r\n    };\r\n}\r\n\r\nexport function DateFilterControl(col, options: any) {\r\n    let tye = 'datetime';\r\n    let fmt = 'yyyy-MM-dd';\r\n    let returnFmt = 'yyyy-MM-dd';\r\n    if (options && options.format) {\r\n        fmt = options.format;\r\n        if (fmt.indexOf('HH:') == -1) {\r\n            tye = 'date';\r\n        } else {\r\n            returnFmt += ' HH:mm';\r\n            if (fmt.indexOf('ss') > -1) {\r\n                returnFmt += ':ss';\r\n            }\r\n        }\r\n    } else {\r\n        tye = 'date';\r\n    }\r\n\r\n    // all = 1, å¹´ææ¥\r\n    // noDate = 2,  å¹´æ\r\n    // noDateAndMonth = 3,  å¹´\r\n\r\n    return {\r\n        controltype: 'flexibleDate',\r\n        dateFormat: fmt,\r\n        single: false,\r\n        showType: 1,\r\n        showTime: tye === 'datetime'\r\n    };\r\n}\r\n\r\nexport function NumberFilterControl(col) {\r\n    return  {\r\n        controltype: 'flexibleNumber',\r\n        single: false\r\n    };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { ColumnFilterType } from '../types/data-column';\r\n\r\nimport { BooleanFilterControl, DateFilterControl, EnumFilterControl,\r\n        NumberFilterControl, TextFilterControl } from '../plugins/smart-filter/controlData/filter-control.options';\r\n\r\n@Injectable()\r\nexport class DatagridSmartFilterService {\r\n    private conditions: any[] = [];\r\n    controlData: any = [];\r\n\r\n    filterChanged = new Subject();\r\n\r\n    removeFilter = new Subject();\r\n    clearAllFilter = new Subject();\r\n\r\n    constructor() { }\r\n\r\n\r\n    getColumnFilterData(col: any) {\r\n        let filterControlData: any = {\r\n            controltype: 'text',\r\n        };\r\n        if (col.filter !== undefined) {\r\n            if (typeof col.filter === 'boolean') {\r\n                if (col.formatter) {\r\n                    if (typeof col.formatter === 'object' && Object.keys(col.formatter).length) {\r\n                        const options: any = col.formatter['options'];\r\n                        switch (col.formatter['type']) {\r\n                            case 'number':\r\n                                return NumberFilterControl(col);\r\n                            case 'enum':\r\n                                return EnumFilterControl(col, options);\r\n                            case 'boolean':\r\n                                return BooleanFilterControl(col);\r\n                            case 'datetime':\r\n                                let tye = 'datetime';\r\n                                let fmt = 'yyyy-MM-dd';\r\n                                let returnFmt = 'yyyy-MM-dd';\r\n                                if (options && options.format) {\r\n                                    fmt = options.format;\r\n                                    if (fmt.indexOf('HH:') == -1) {\r\n                                        tye = 'date';\r\n                                    } else {\r\n                                        returnFmt += ' HH:mm';\r\n                                        if (fmt.indexOf('ss') > -1) {\r\n                                            returnFmt += ':ss';\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    tye = 'date';\r\n                                }\r\n                                filterControlData = {\r\n                                    controltype: 'flexibleDate',\r\n                                    dateFormat: fmt,\r\n                                    single: false,\r\n                                    showType: 3,\r\n                                    showTime: tye === 'datetime'\r\n                                };\r\n                                break;\r\n                            default:\r\n                                return TextFilterControl(col);\r\n                        }\r\n                    }\r\n                }\r\n                return filterControlData;\r\n            } else {\r\n                switch (col.filter.type) {\r\n                    case ColumnFilterType.enum:\r\n                        return EnumFilterControl(col, col.filter.options);\r\n                    case ColumnFilterType.date:\r\n                    case ColumnFilterType.datetime:\r\n                        return DateFilterControl(col, col.filter.options);\r\n                    case ColumnFilterType.number:\r\n                        return NumberFilterControl(col);\r\n                    case ColumnFilterType.boolean:\r\n                        return BooleanFilterControl(col);\r\n                }\r\n            }\r\n        }\r\n\r\n        return filterControlData;\r\n    }\r\n\r\n\r\n\r\n    filterConditionChanged(e: {conditions: any[], controlData: any, from: 'toolbar' | 'panel'}) {\r\n        const items = e.conditions;\r\n\r\n        if (!this.conditions || !this.conditions.length) {\r\n            this.conditions.push(...items);\r\n            this.controlData.push({...e.controlData});\r\n        } else {\r\n            /// TODO, CONTROLDATA çç´¢å¼ä¸conditions çç´¢å¼å¾å¯è½ä¸æ¯1ä¸ª\r\n            if (e.from === 'toolbar') {\r\n                this.conditions = [...items];\r\n            } else {\r\n                this.conditions = this.conditions.filter(n => n.FilterField !== items[0].FilterField);\r\n                if (items.length === 1) {\r\n                    this.conditions.push({ ...items[0] });\r\n                } else {\r\n                    this.conditions.push(...items);\r\n                }\r\n            }\r\n\r\n            if (e.controlData) {\r\n                const ctrlIdx = this.controlData.findIndex(n => n.labelCode === e.controlData.labelCode);\r\n                if (ctrlIdx > -1) {\r\n                    this.controlData[ctrlIdx] = {...e.controlData};\r\n                } else {\r\n                    this.controlData.push({...e.controlData});\r\n                }\r\n            }\r\n        }\r\n\r\n        this.filterChanged.next({conditions: [...this.conditions], controlData: [...this.controlData] });\r\n    }\r\n\r\n    removeCondition(e, emitRemove = false) {\r\n        if (this.conditions && this.conditions.length) {\r\n            this.conditions = this.conditions.filter(n => n.FilterField !== e.labelCode);\r\n            this.controlData = this.controlData.filter(n => n.labelCode !== e.labelCode);\r\n        }\r\n        this.filterChanged.next({conditions: [...this.conditions], controlData: [...this.controlData] });\r\n        if (emitRemove) {\r\n            this.removeFilter.next(e);\r\n        }\r\n    }\r\n\r\n    clearAll() {\r\n        this.conditions = [];\r\n        this.controlData = [];\r\n        this.clearAllFilter.next(null);\r\n    }\r\n}\r\n","import { DatagridComponent } from './../datagrid.component';\r\nimport { Injectable } from '@angular/core';\r\nimport { delay } from 'rxjs/operators';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class SelectionModeService {\r\n    dgRef: DatagridComponent = null;\r\n    private oldSettings: any = null;\r\n    private selectStartEvent: any = null;\r\n    private events = null;\r\n    constructor(grid: DatagridComponent) {\r\n        this.dgRef = grid;\r\n        if (this.dgRef.selectionMode === 'default') {\r\n            grid.zone.runOutsideAngular(() => {\r\n                this.removeEvents();\r\n                this.events = this.registerStopSelectionEvent();\r\n            });\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.dgRef = null;\r\n        this.removeEvents();\r\n    }\r\n\r\n    removeEvents() {\r\n        if (this.events && this.events.length) {\r\n            this.events.forEach(e => {\r\n                e();\r\n            });\r\n\r\n            this.events = null;\r\n        }\r\n    }\r\n\r\n    public toggleMode() {\r\n        if (this.dgRef) {\r\n            if (this.dgRef.selectionMode === 'default') {\r\n                this.enableWindowsSelectionMode();\r\n            } else {\r\n                this.restoreSettings();\r\n            }\r\n        }\r\n    }\r\n\r\n    public enableWindowsSelectionMode() {\r\n        if (this.dgRef) {\r\n            this.oldSettings = {\r\n                showCheckbox: this.dgRef.showCheckbox,\r\n                keepSelect: this.dgRef.keepSelect,\r\n                onlySelectSelf: this.dgRef.onlySelectSelf,\r\n                selectOnCheck: this.dgRef.selectOnCheck,\r\n                checkOnSelect: this.dgRef.checkOnSelect\r\n            };\r\n\r\n            this.dgRef.showCheckbox = true;\r\n            this.dgRef.keepSelect = true;\r\n            this.dgRef.onlySelectSelf = false;\r\n            this.dgRef.selectOnCheck = true;\r\n            this.dgRef.checkOnSelect = true;\r\n\r\n            this.dgRef.dfs.updateProperty('keepSelect', true);\r\n            this.dgRef.dfs.updateProperty('onlySelectSelf', false);\r\n            this.dgRef.dfs.updateProperty('selectOnCheck', true);\r\n            this.dgRef.dfs.updateProperty('checkOnSelect', true);\r\n        }\r\n    }\r\n\r\n    public restoreSettings() {\r\n        if (this.dgRef && this.oldSettings) {\r\n            this.dgRef.showCheckbox = this.oldSettings.showCheckbox;\r\n            this.dgRef.keepSelect = this.oldSettings.keepSelect;\r\n            this.dgRef.onlySelectSelf = this.oldSettings.onlySelectSelf;\r\n            this.dgRef.selectOnCheck = this.oldSettings.selectOnCheck;\r\n            this.dgRef.checkOnSelect = this.oldSettings.checkOnSelect;\r\n\r\n\r\n            this.dgRef.dfs.updateProperty('keepSelect', this.oldSettings.keepSelect);\r\n            this.dgRef.dfs.updateProperty('onlySelectSelf', this.oldSettings.onlySelectSelf);\r\n            this.dgRef.dfs.updateProperty('selectOnCheck', this.oldSettings.selectOnCheck);\r\n            this.dgRef.dfs.updateProperty('checkOnSelect', this.oldSettings.checkOnSelect);\r\n        }\r\n    }\r\n\r\n\r\n    private registerStopSelectionEvent() {\r\n        const kd = this.dgRef.render2.listen(document, 'keydown', (event: any) => {\r\n            if (event.ctrlKey || event.shiftKey) {\r\n                this.unselectable();\r\n            }\r\n        });\r\n\r\n        const ku = this.dgRef.render2.listen(document, 'keyup', (event: any) => {\r\n            if (event.ctrlKey || event.shiftKey || event.keyCode === 17 || event.keyCode === 16) {\r\n                this.enableSelectable();\r\n            }\r\n        });\r\n\r\n        return [ kd, ku];\r\n    }\r\n\r\n    private unselectable() {\r\n        this.dgRef.render2.setAttribute(this.dgRef.dgContainer.nativeElement, 'unselectable', 'on');\r\n        this.dgRef.render2.setAttribute(this.dgRef.dgContainer.nativeElement, 'onselectstart', 'return false');\r\n        this.dgRef.render2.setStyle(this.dgRef.dgContainer.nativeElement, '-moz-user-select', 'none');\r\n    }\r\n\r\n    private enableSelectable() {\r\n        this.dgRef.render2.removeAttribute(this.dgRef.dgContainer.nativeElement, 'unselectable');\r\n        this.dgRef.render2.removeAttribute(this.dgRef.dgContainer.nativeElement, 'onselectstart');\r\n        this.dgRef.render2.removeStyle(this.dgRef.dgContainer.nativeElement, '-moz-user-select');\r\n    }\r\n\r\n    beforRowClick(param: any) {\r\n        if (this.dgRef && this.dgRef.selectionMode === 'default') {\r\n            const isSelected = this.dgRef.dfs.isRowSelected(param.id);\r\n            const isCtrlKey = param.e.ctrlKey;\r\n            const isShiftKey = param.e.shiftKey;\r\n\r\n            this.dgRef.endEditing();\r\n\r\n            if (!isCtrlKey && !isShiftKey) {\r\n                if (!isSelected) {\r\n                    this.dgRef.clearCheckeds();\r\n                } else {\r\n                    // å¦ææå¤æ¡éï¼ç§»é¤å¶ä»éä¸­è¡\r\n                    const currentPagerIds = this.dgRef.getRows().map(n => n.id);\r\n                    const unCheckIDs = this.dgRef.checkValues.filter(i => currentPagerIds.includes(i) && i != param.id);\r\n                    const unSelectIds = this.dgRef.checkValues.filter(n => !currentPagerIds.includes(n));\r\n                    // const unCheckIDs = this.dgRef.checkValues.filter(n => n != param.id);\r\n                    if (unCheckIDs && unCheckIDs.length) {\r\n                        this.dgRef.unCheckRows(unCheckIDs, true);\r\n                        this.dgRef.clearSelections([param.id, ...unSelectIds]);\r\n                    }\r\n                }\r\n            } else {\r\n                if (isShiftKey) {\r\n                    let focusIndex = this.dgRef.focusRowIndex;\r\n                    if (focusIndex === -1) {\r\n                        focusIndex = 0;\r\n                    }\r\n\r\n                    const endIndex = param.rowIndex;\r\n                    let start = focusIndex;\r\n                    let end = endIndex;\r\n                    if (focusIndex > endIndex) {\r\n                        start = endIndex;\r\n                        end = focusIndex;\r\n                    }\r\n\r\n                    const data = this.dgRef.getRows();\r\n                    const checkedItems = [...data].splice(start, end - start + 1);\r\n                    const willCheckIds = checkedItems.map(n => {\r\n                        return this.dgRef.dfs.primaryId(n);\r\n                    });\r\n\r\n                    if (!isCtrlKey) {\r\n                        this.dgRef.clearCheckeds(false, false);\r\n                    }\r\n                    // this.dgRef.selectValues = willCheckIds;\r\n                    this.dgRef.checkRows(willCheckIds, true);\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            if (isSelected && isCtrlKey) {\r\n                param.e.stopPropagation();\r\n                // æ§è¡åæ¶éæ©\r\n                this.dgRef.unCheckRow(param.id);\r\n                return true;\r\n            }\r\n\r\n            const zoneClick = param.cellref ? param.cellref['zoneClick'] : '';  \r\n            const _timer = zoneClick && zoneClick.length ? 100: 0;\r\n\r\n            let r$: Observable<any> = of(true);\r\n            if (this.dgRef.beforeSelect) {\r\n                const r = this.dgRef.beforeSelect(param);\r\n                if (r && r.subscribe) {\r\n                    r$ = r;\r\n                }\r\n            }\r\n            r$.pipe(delay(_timer)).subscribe((canSelect: boolean) => {\r\n                if (canSelect) {\r\n                    this.dgRef.dfs.selectRow(param.rowIndex, param.rowData);\r\n                    if (this.dgRef.selectedRow) {\r\n                        this.dgRef.selectedRow.dr = param.dr;\r\n                    }\r\n                }\r\n                this.dgRef.rowClick.emit({ data: param.rowData, grid: this.dgRef, dblclick: false });\r\n                this.dgRef.dgs.setSelecedRow.emit({ selected: true, id: this.dgRef.dfs.primaryId(param.rowData) });\r\n\r\n                if (_timer) {\r\n                    if (param.cellref && param.cellref.runZoneClick) {\r\n                        param.cellref.runZoneClick(param.e);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    endRowClick() {\r\n        if (this.dgRef && this.dgRef.selectionMode === 'default') {\r\n            this.dgRef.checkOnSelect = false;\r\n        }\r\n    }\r\n}\r\n\r\n","\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-30 16:42:51\r\n * @QQ: 1055818239\r\n * @Version: v0.8.0\r\n * - 2021/04/07 å¢å  enableHighlightCell å±æ§ï¼æ¯æéä¸­ååæ ¼é«äº®\r\n */\r\n\r\nimport {\r\n    Component, OnInit, Input, ViewEncapsulation,\r\n    ContentChildren, QueryList, Output, EventEmitter, Renderer2, OnDestroy, OnChanges,\r\n    SimpleChanges, ChangeDetectionStrategy, ChangeDetectorRef, Injector, HostBinding,\r\n    AfterContentInit, NgZone, ElementRef, ViewChild, AfterViewInit, ApplicationRef, TemplateRef, HostListener, DoCheck\r\n} from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { FormGroup, ValidatorFn } from '@angular/forms';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { of, Subscription, Observable, from, BehaviorSubject } from 'rxjs';\r\nimport { DataColumn, CustomStyle, MoveDirection, ColumnGroup, ColumnFilterType, CellTemplateFn } from './types/data-column';\r\nimport { DatagridFacadeService } from './services/datagrid-facade.service';\r\nimport { DatagridColumnDirective } from './components/columns/datagrid-column.directive';\r\nimport { CellInfo, IgnoreProperties, IS_GROUP_ROW_FIELD, SelectedRow } from './services/state';\r\nimport { RestService, DATAGRID_REST_SERVICEE } from './services/rest.service';\r\nimport { DatagridService } from './services/datagrid.service';\r\nimport { GRID_EDITORS, CELL_SELECTED_CLS, GRID_VALIDATORS, SIZE_TYPE, GRID_SETTINGS_SERVICE, GRID_SETTINGS_HTTP, CELL_EDITING_CLS, TR_PREFIX, TR_ID_PREFIX, SizeConfig } from './types/constant';\r\nimport { DomHandler } from './services/domhandler';\r\nimport { Utils } from './utils/utils';\r\nimport { CommonUtils, DebugService, FarrisComponentInstanceService, WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { flatten, cloneDeep } from 'lodash-es';\r\nimport { ScrollbarDirective } from './scrollbar/scrollbar.directive';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { BeforEventParam, RowEditParam } from './types/event-params';\r\nimport { DatagridColumnsHelper } from './services/datagrid-columns.helper';\r\nimport { DatagridFilterService } from './services/datagrid-filter.service';\r\nimport { debounceTime, map, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nimport { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';\r\nimport { DatagridSmartFilterService } from './services/datagrid-smart-filter.service';\r\nimport { IdService } from '@farris/ui-common';\r\nimport { SelectionModeService } from './services/selection-mode.service';\r\nimport { ContextMenuItem } from '@farris/ui-context-menu';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Compare, FilterCondition } from '@farris/ui-common/types';\r\n\r\n@Component({\r\n    selector: 'farris-datagrid',\r\n    templateUrl: './datagrid.component.html',\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    providers: [\r\n        DatagridFacadeService,\r\n        DatagridService,\r\n        DatagridSmartFilterService\r\n    ],\r\n    exportAs: 'datagrid',\r\n    styles:[\r\n        `.f-datagrid-header table{\r\n            background-color: #F1F3F7;\r\n        }\r\n        .scrollbar-allways-show .ps.ps--active-x > .ps__rail-x {\r\n            margin-right: 0px!important;\r\n        }\r\n        .scrollbar-allways-show .ps.ps--active-y > .ps__rail-y {\r\n            margin-bottom: 0px!important;\r\n        }\r\n        .scrollbar-allways-show .ps.ps--active-x.ps--active-y > .ps__rail-x {\r\n            margin-right: 18px!important;\r\n        }\r\n        .scrollbar-allways-show .ps.ps--active-x.ps--active-y > .ps__rail-y {\r\n            margin-bottom: 18px!important;\r\n        }\r\n\r\n        `\r\n    ]\r\n})\r\nexport class DatagridComponent implements OnInit, OnDestroy, OnChanges, AfterContentInit, AfterViewInit, DoCheck {\r\n    private auther = `Lucas Huang - QQ:1055818239`;\r\n    private version = '0.8.x';\r\n    __component_type__ = 'DatagridComponent';\r\n\r\n    /** å¯ç¨æ§è½ä¼åçï¼é»è®¤ä¸º false */\r\n    @Input() fast = false;\r\n\r\n    @HostBinding('style.position') pos = 'relative';\r\n    @HostBinding('class.f-datagrid-full') hostCls = false;\r\n    @HostBinding('class.f-datagrid-auto-height') get autoHeightCls() {\r\n        return this.autoHeight;\r\n    }\r\n    /** ä½¿ç¨ä¸»é¢ */\r\n    @Input() useThemes = true;\r\n    // ç¨äºå­å¨ç¨æ·ä¸ªæ§åè®¾ç½®\r\n    @Input() id = '';\r\n    /** èªå¨é«åº¦ - å¯ç¨æ­¤å±æ§åï¼å°±æ¯ä¸ä¸ªæ®æ®ééç table , ä¸è½ç¼è¾ï¼ä¸è½æåºï¼ä¸è½åé¡µï¼ä¸è½... å°±æ¯ä¸å¡è */\r\n    @Input() useHtmlTable = false;\r\n    /** èªå¨é«åº¦ */\r\n    @Input() autoHeight = false;\r\n    /** éå autoHeight ä¸èµ·ä½¿ç¨ï¼å½æ­¤å¼å¤§äº0 æ¶ï¼ä¸autoHeight ä¸ºtrueæ¶ï¼æ°æ®æ»è¡é«è¾¾å°æå¤§é«åº¦æ¶ï¼å°åæ­¢èªå¨é«åº¦å¹¶ä½¿ç¨åé¨æ»å¨æ¡ */\r\n    @Input() maxHeight = 0;\r\n\r\n    /** æ¾ç¤ºè¾¹æ¡ */\r\n    @Input() showBorder = false;\r\n    /** å¯ç¨æé©¬çº¿  */\r\n    @Input() striped = true;\r\n    /** å®½åº¦ */\r\n    @Input() width = 800;\r\n    /** é«åº¦ */\r\n    @Input() height = 300;\r\n\r\n    /** æ¾ç¤ºè¡¨å¤´ */\r\n    @Input() showHeader = true;\r\n    /** è¡¨å¤´-åè¡é«åº¦ */\r\n    @Input() headerHeight = 35;\r\n    /** è¡¨å¤´æè¡ */\r\n    @Input() headerWrap = false;\r\n    /** æ¾ç¤ºé¡µè */\r\n    @Input() showFooter = false;\r\n    /** é¡µèé»è®¤è¡é« */\r\n    @Input() footerHeight = 29;\r\n\r\n\r\n    /** é¡µèæ°æ®æ¥æº, é»è®¤ä¸º client */\r\n    @Input() footerDataFrom: 'server' | 'client' = 'client';\r\n    /** é¡µèåè®¡è¡æ¨¡æ¿ */\r\n    @Input() footerTemplate: TemplateRef<any>;\r\n\r\n    @Input() footerComponentType: CellTemplateFn;\r\n    /** åè®¡è¡æ¾ç¤ºä½ç½®ï¼é»è®¤ä¸ºåºé¨ */\r\n    @Input() footerPosition: 'top' | 'bottom' | 'both' = 'bottom';\r\n    /** é¡µèè¡èªå®ä¹æ ·å¼ */\r\n    @Input() footerStyler: () => { cls?: string, style?: any };\r\n    /** è¡é« */\r\n    @Input() rowHeight = 29;\r\n\r\n    /**\r\n     * è®¾ç½®grid è¡é«å°ºå¯¸\r\n     * sm: å°ï¼md: æ­£å¸¸ï¼ lg: å¤§ï¼xl: è¶å¤§\r\n     */\r\n    private _sizeType: 'sm' | 'md' | 'lg' | 'xl' = 'sm';\r\n    get sizeType() {\r\n        return this._sizeType;\r\n    }\r\n    @Input() set sizeType(val) {\r\n        this._sizeType = val;\r\n    }\r\n\r\n    /** å¡«åå®¹å¨ */\r\n    private _fit = false;\r\n    @Input() get fit() {\r\n        return this._fit;\r\n    }\r\n    set fit(val: boolean) {\r\n        this._fit = val;\r\n        this.hostCls = val;\r\n    }\r\n    /** å¦æä¸ºçï¼åèªå¨å±å¼/æ¶ç¼©åçå¤§å°ä»¥éåç½æ ¼å®½åº¦å¹¶é²æ­¢æ°´å¹³æ»å¨ã */\r\n    private _fitColumns = false;\r\n    @Input() get fitColumns() {\r\n        return this._fitColumns;\r\n    }\r\n    set fitColumns(val: boolean) {\r\n        if (this._fitColumns !== val) {\r\n            this._fitColumns = val;\r\n            if (val) {\r\n                this.setFitColumns(val);\r\n            } else {\r\n                this.dfs.fitColumns(false);\r\n                this.dfs.initColumns(false, true);\r\n                this.restituteColumnsSize();\r\n            }\r\n        }\r\n    }\r\n    /** æ ¹æ®gridçå®½åº¦èªå¨è°æ´åå®½åº¦ */\r\n    private _autoFitColumns = false;\r\n    @Input() get autoFitColumns() {\r\n        return this._autoFitColumns;\r\n    }\r\n    set autoFitColumns(val) {\r\n        this._autoFitColumns = val;\r\n        this.dfs.updateProperty('autoFitColumns', val);\r\n    }\r\n\r\n    /** ç¦ç¨ */\r\n    @Input() disabled = false;\r\n    /**\r\n     * æ»å¨æ¡æ¾ç¤ºæ¨¡å¼ï¼é»è®¤ä¸º auto\r\n     */\r\n    @Input() scrollBarShowMode: 'auto' | 'allways' = 'auto';\r\n    @Input() scrollBarOptions = {\r\n        width: 18,\r\n        height: 18\r\n    };\r\n    /** å½æ»å¨ä¸ç´æ¾ç¤ºæ¶ï¼æ¯å¦æ¾ç¤ºä¸¤ç«¯çç®­å¤´ */\r\n    @Input() showScrollArrow = false;\r\n\r\n    /** å¯æå¨åè®¾ç½®åå®½ */\r\n    @Input() resizeColumn = true;\r\n    /** æ¾ç¤ºè¡å· */\r\n    @Input() showLineNumber = false;\r\n    /** è¡å·è¡¨å¤´å­ç¬¦ */\r\n    @Input() lineNumberTitle = '';\r\n    /** è¡å·å®½åº¦ */\r\n    @Input() lineNumberWidth = 36;\r\n    /** å¤éæ¡åå®½åº¦ï¼é»è®¤ 36px */\r\n    @Input() checkboxColumnWidth = 36;\r\n    /** é¼ æ æ»è¿ææå¼å³ï¼é»è®¤å¼å¯ */\r\n    @Input() rowHover = true;\r\n    /** åè®¸ç¼è¾æ¶ï¼åå»è¿å¥ç¼è¾ç¶æ; falseä¸ºåå»è¿å¥ç¼è¾ */\r\n    @Input() clickToEdit = true;\r\n\r\n    private _lockPagination = false;\r\n    /** éå®åé¡µæ¡ï¼éå®åé¡µç ç¹å»æ æ */\r\n    @Input() get lockPagination() {\r\n        return this._lockPagination;\r\n    }\r\n    set lockPagination(val: boolean) {\r\n        this._lockPagination = val;\r\n        if (this.dgPager) {\r\n            this.dgPager[val ? 'lock' : 'unlock']();\r\n        }\r\n    }\r\n\r\n    /** åé¡µä¿¡æ¯ */\r\n    private __pagination = true;\r\n    @Input() set pagination(val) {\r\n        if (this.__pagination !== val) {\r\n            this.__pagination = val;\r\n            this.dfs.updateProperty('pagination', val);\r\n            this.dgs.showGridHeader.emit();\r\n        }\r\n    }\r\n    get pagination() {\r\n        return this.__pagination;\r\n    }\r\n\r\n    /** åé¡µç»ä»¶èªå®ä¹åå®¹åºæ¨¡æ¿ */\r\n    @Input() pagerContentTemplate: TemplateRef<any> = null;\r\n    /** åé¡µæ¡å¯¹é½å±ç¤ºæ¹å¼ï¼ left, right, center   é»è®¤ä¸º right  */\r\n    @Input() pagerPos: 'left'|'center'| 'right' = 'right';\r\n\r\n    /** åé¡µæ¡æ¾ç¤ºæ¨¡å¼ï¼ default, simple */\r\n    @Input() pagerViewMode = 'default';\r\n    /** å¯ç¨æå¡å¨ç«¯åé¡µ */\r\n    @Input() pagerOnServer = true;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageList = [10, 20, 30, 50, 100];\r\n    /** å½åé¡µç  */\r\n    @Input() pageIndex = 1;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageSize = 20;\r\n    /** åé¡µåºé«åº¦ */\r\n    @Input() pagerHeight = 56;\r\n    /** æ¾ç¤ºæ¯é¡µè®°å½æ° */\r\n    @Input() showPageList = false;\r\n    /** æ¾ç¤ºåé¡µä¿¡æ¯ */\r\n    @Input() showPageInfo = true;\r\n    /** æ¾ç¤ºé¡µç  */\r\n    @Input() showPageNumber = true;\r\n    /** æ¾ç¤ºé¡µç æå¤§æ°é */\r\n    @Input() pagerLabelSize = 7;\r\n    /** æ¾ç¤ºè½¬è³æå®é¡µç è¾å¥æ¡ */\r\n    @Input() showGotoInput = false;\r\n    /** å¯ç¨è·¨é¡µå¤é */\r\n    @Input() enableMorePageSelect = false;\r\n    /** æ¾ç¤ºéä¸­åè¡¨ */\r\n    @Input() showSelectedList = false;\r\n    /** éä¸­åè¡¨ä¸­ï¼æ¯æ¡è®°å½æ¾ç¤ºçåå®¹ */\r\n    @Input() selectedItemFormatter: (data) => string;\r\n    /** ååæ ¼ä¿¡æ¯æç¤ºå»¶æ¶ï¼é»è®¤ 1000ms */\r\n    @Input() cellTipTimer = 1000;\r\n    /** grid åé¨å¤çåé¡µç¶æ */\r\n    @Input() controlPaginationState = true;\r\n    /** æ»è®°å½æ° */\r\n    private _total = 0;\r\n    get total() {\r\n        return this._total;\r\n    }\r\n\r\n    @Input() set total(val: number) {\r\n        this._total = val;\r\n        this.pagerOpts.totalItems = val;\r\n        if (!this.pagination) {\r\n            this.pagerOpts.itemsPerPage = val;\r\n        }\r\n        this.dfs.setTotal(val);\r\n    }\r\n    /** å¯ç¨éä¸­è¡ */\r\n    @Input() enableSelectRow = true;\r\n    /** å¯ç¨å¤é */\r\n    @Input() multiSelect = false;\r\n    /** å¯ç¨å¤éæ¶ï¼æ¯å¦æ¾ç¤ºcheckbox */\r\n    @Input() showCheckbox = false;\r\n    /** æ¾ç¤ºå¨écheckbox */\r\n    @Input() showAllCheckbox = false;\r\n    /** å½å¯ç¨å¤éæ¶ï¼ç¹å»è¡éä¸­ï¼åªåè®¸ä¸åªæä¸è¡è¢«éä¸­ã, é»è®¤ä¸º true */\r\n    @Input() onlySelectSelf = true;\r\n    /** å¯ç¨å¤éä¸æ¾ç¤ºcheckbox, éä¸­è¡åæ¶é©é, é»è®¤ä¸º false */\r\n    @Input() checkOnSelect = false;\r\n    /** å¯ç¨å¤éä¸æ¾ç¤ºcheckbox, é©éåéä¸­è¡, é»è®¤ä¸º false */\r\n    @Input() selectOnCheck = false;\r\n    /**\r\n     * è¡éä¸­æ¨¡å¼ï¼custom: èªå®ä¹ï¼ default: ä»¿Windowsèµæºç®¡çå¨éä¸­\r\n     * æ³¨æï¼ æ­¤å±æ§ä»å¤éï¼æ¾ç¤ºå¤éæ¡ææ\r\n     * é»è®¤å¼ï¼ custom\r\n     * addTime: 2021-12-14 by LUCAS HUANG\r\n     */\r\n    @Input() selectionMode: 'custom' | 'default' = 'custom';\r\n    /**\r\n     * åå»è¡éä¸­åï¼å¨æ¬¡ç¹å»ä¸ä¼è¢«åæ¶éä¸­ç¶æ;\r\n     */\r\n    @Input() keepSelect = true;\r\n    /** å½æ°æ®ä¸ºç©ºæ¶ï¼ä½¿ç¨ç©ºç½æ¾ç¤ºï¼ä¸é«åº¦ä¸ºä¸è¡çé«åº¦ã é»è®¤ä¸º false */\r\n    @Input() useBlankWhenDataIsEmpty = false;\r\n\r\n    /** æ°æ®ä¸ºç©ºæ¶çé«åº¦ */\r\n    @Input() emptyDataHeight = 240;\r\n    /** ç©ºæ°æ®æ¶ï¼æ¾ç¤ºçæç¤ºææ¬ */\r\n    @Input() emptyMessage = 'ææ æ°æ®';\r\n    /** æ æ°æ®æ¶çæ¨¡æ¿ */\r\n    @Input() emptyTemplate: TemplateRef<any> = null;\r\n    @Input() emptyComponentType: CellTemplateFn = null;\r\n\r\n    /** ä¸»é®å­æ®µ */\r\n    @Input() idField = 'id';\r\n    /** è¯·æ±æ°æ®æºçURL */\r\n    @Input() url: string;\r\n    /** æ°æ®æº */\r\n    @Input() data: any[];\r\n\r\n    /** é¡µèæ°æ® */\r\n    private _footerData: Observable<any> = of([]);\r\n    @Input() get footerData() {\r\n        return this._footerData;\r\n    }\r\n    set footerData(rows) {\r\n        if (rows && rows.subscribe) {\r\n            this._footerData = rows;\r\n        } else {\r\n            this._footerData = of(rows || []);\r\n        }\r\n        if (rows) {\r\n            this.setFooterHeight();\r\n        }\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    /** éªè¯ä¸éè¿æ¶å¯ä»¥ç»æç¼è¾ */\r\n    @Input() endEditByInvalid = true;\r\n\r\n    /** åéå */\r\n    private _columns = [];\r\n    @Input()\r\n    get columns() {\r\n        return this._columns;\r\n    }\r\n    set columns(values) {\r\n        this._columns = this.correctColumns(values);\r\n        this.dfs.updateProperty('columns', this._columns);\r\n    }\r\n\r\n    private _fields = [];\r\n    get fields() {\r\n        return this._fields;\r\n    }\r\n\r\n    @Input() set fields(cols) {\r\n        this._fields = cols;\r\n        this.columns = cols;\r\n        if (this.data) {\r\n            this.columnsChanged(false, true);\r\n        }\r\n    }\r\n    /** ç¦æ­¢æ°æ®æè¡ï¼é»è®¤å¼ï¼true,å³å¨ä¸è¡æ¾ç¤ºï¼ä¸æè¡ã */\r\n    @Input() nowrap = true;\r\n    /** èæå è½½ */\r\n    @Input() virtualized = false;\r\n    /** æ¯å¦å¯ç¨å¼æ­¥å è½½æ°æ® */\r\n    @Input() virtualizedAsyncLoad = false;\r\n    /** è¡æ ·å¼ */\r\n    @Input() rowStyler: (rowData, rowIndex?: number) => { cls?: string, style?: any };\r\n    /** ç¼è¾æ¹å¼ï¼ row(æ´è¡ç¼è¾)ãcell(ååæ ¼ç¼è¾)ï¼é»è®¤ä¸º row */\r\n    @Input() editMode: 'row' | 'cell' = 'row';\r\n    /** ç¼è¾ç¶æ */\r\n    private _editable = false;\r\n    get editable() {\r\n        return this._editable;\r\n    }\r\n    @Input() set editable(v) {\r\n        if (this._editable !== v) {\r\n            this._editable = v;\r\n            this.cd.detectChanges();\r\n            this.dgs.updateEmptyStyle();\r\n        }\r\n    }\r\n    /** å¯ç¨å¯ç¼è¾ååæ ¼æ ·å¼ã */\r\n    @Input() enableEditCellStyle = false;\r\n\r\n    /** è¿å¥ç¼è¾ç¶ææ¶éæ¯å¦éä¸­ææ¬ï¼é»è®¤ä¸º false\r\n     * ä»ææ¬æ¡æ¯ææ­¤ç¹æ§\r\n     */\r\n    @Input() selectOnEditing = false;\r\n\r\n    /** ç¼è¾å¨é«åº¦ */\r\n    @Input() editorHeight = 30;\r\n    /** å¯ç¨è¿ç«¯æåº */\r\n    @Input() remoteSort = false;\r\n    /** æåºå­æ®µ */\r\n    @Input() sortName: string;\r\n    /** æåºæ¹å¼ asc | desc */\r\n    @Input() sortOrder: string;\r\n    /** åè®¸å¤åæåº */\r\n    @Input() multiSort: boolean;\r\n\r\n    @Input() hoverRowCls = 'f-datagrid-row-hover';\r\n\r\n    /** åè®¸ææ½åé¡ºåº */\r\n    @Input() enableDragColumn = false;\r\n\r\n    /** è¡åç»é¢æ¿é«åº¦ï¼é»è®¤ 50PX */\r\n    @Input() rowGroupPanelHeight = 50;\r\n    /** å¯ç¨åç»è¡ */\r\n    @Input() groupRows = false;\r\n    /** å¯ç¨è¡åç»åè®¡è¡ */\r\n    @Input() groupFooter = false;\r\n    /** åç»è¡æ¯å¦å±å¼ï¼é»è®¤ä¸º å±å¼  */\r\n    @Input() expandGroupRows = true;\r\n    /**\r\n     * åç»åè®¡è¡èªå®ä¹æ ·å¼ï¼\r\n     * åè®¸çå¼ä¸º\r\n     * - { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } }\r\n     * - (groupFooterRowData): { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } } => {}\r\n     */\r\n    @Input() groupFooterStyler: any;\r\n    /** åè®¡æ°æ®æ¾ç¤ºä½ç½®\r\n     * inGroupRow: ä¸åç»å¨åä¸è¡ï¼åå«ç¸å³åè®¡å­æ®µå¯¹é½\r\n     * groupFooterRow: å¨åç»æ°æ®æåå¢å ä¸è¡\r\n     * é»è®¤ä¸º groupFooterRow\r\n     */\r\n    @Input() groupSummaryPosition: 'inGroupRow' | 'groupFooterRow' = 'groupFooterRow';\r\n    /** åç»ä¿¡æ¯åå¹¶åæ°\r\n     * é»è®¤ä¸º 1\r\n     */\r\n    @Input() groupCellColSpan = 1;\r\n\r\n    /** åç»å­æ®µåç§°, å¤å­æ®µåç»ä»¥è±æéå·åé */\r\n    private _groupField = '';\r\n    groupFields$ = new BehaviorSubject([]);\r\n    get groupField() {\r\n        return this._groupField;\r\n    }\r\n    @Input() set groupField(val) {\r\n        this._groupField = val || '';\r\n\r\n        if (Array.isArray(this._groupField)) {\r\n            this._groupField = this._groupField.join(',');\r\n        }\r\n\r\n        if (this._groupField) {\r\n            this.groupFields$.next(this._groupField.split(','));\r\n        } else {\r\n            this.groupFields$.next([]);\r\n        }\r\n\r\n        this.dfs.updateProperty('groupField', this._groupField);\r\n    }\r\n    /** æ¾ç¤ºåç»å */\r\n    @Input() showGroupColumn = true;\r\n    /** åç»æ ¼å¼å */\r\n    @Input() groupFormatter: (groupRow: any) => any;\r\n    /** åç»è¡æ ·å¼ */\r\n    @Input() groupStyler: (groupRow: any) => { cls?: string, style?: any };\r\n\r\n    /** æ¾ç¤ºåç»åé¢æ¿ãé»è®¤ä¸º false */\r\n    private _showRowGroupPanel = false;\r\n    @Input() set showRowGroupPanel(val) {\r\n        this._showRowGroupPanel = val;\r\n    }\r\n    get showRowGroupPanel() {\r\n        return this.groupRows && this._showRowGroupPanel;\r\n    }\r\n\r\n    /** åå»è¡¨å¤´éåºåå®¹å®½åº¦ */\r\n    @Input() AutoColumnWidthUseDblclick = true;\r\n    /** è¡é©éåéä¸­ç¦ç¨è¡¨è¾¾å¼ */\r\n    @Input() disableRow: (row, index?: any) => boolean;\r\n    /** ä½¿ç¨åé¨è¿æ»¤å¨; é»è®¤ä¸º false */\r\n    @Input() useDefaultFilter = false;\r\n    /** è¿æ»¤å¾æ ä¸æåºå¾æ åå¹¶ï¼æ­¤å±æ§ä¸ enableFilterRow äºæ¥ */\r\n    @Input() enableSmartFilter = false;\r\n    /** æ¾ç¤ºè¿æ»¤è¡ */\r\n    @Input() enableFilterRow = false;\r\n    /** æå¡å¨ç«¯è¿æ»¤ */\r\n    @Input() remoteFilter = false;\r\n    /** å¯ç¨è¿æ»¤æ¡ä»¶æ¾ç¤ºæ¡ */\r\n    @Input() showFilterBar = false;\r\n    /** è¿æ»¤æ¡ä»¶æ±æ»æ¡é«åº¦ï¼é»è®¤ 32px  */\r\n    @Input() filterBarHeight = 32;\r\n    @Input() filterRowHeight = 40;\r\n    @Input() conditions: any = {};\r\n\r\n    @Input() selectValue = null;\r\n    @Input() checkValues = [];\r\n    @Input() selectValues = [];\r\n\r\n    /** åå¹¶ååæ ¼ï¼åæ¯æçºµååå¹¶ */\r\n    @Input() mergeCell = false;\r\n    @Input() mergeFields = [];\r\n    /** åå¹¶ååæ ¼æ°æ®å¯ç¨å®¢æ·ç«¯æåº */\r\n    @Input() enableClientSortForMergeCell = false;\r\n    /** ä½¿ç¨é«çº§æ§å¶é¢æ¿(åè®¾ç½®) */\r\n    @Input() useControlPanel = false;\r\n    /** å¯ç¨ç®æ´æ§å¶é¢æ¿æ¨¡å¼ãé»è®¤ä¸º false */\r\n    @Input() enableSimpleMode = false;\r\n    /** ç¹å»åè®¾ç½®å¾æ ï¼é»è®¤æå¼çæ§å¶é¢æ¿ */\r\n    @Input() controlPanelMode: 'advanced' | 'simple' = 'advanced';\r\n    /** å¯ç¨åè®¾ç½®æ¹æ¡ */\r\n    @Input() enableScheme = false;\r\n    /** ç³»ç»é¢å¶æ¹æ¡åç§° */\r\n    @Input() defaultSchemeName = 'ç³»ç»é¢å¶';\r\n    /** å¤è¡¨å¤´å¯ç¨åè®¾ç½®; é»è®¤ false */\r\n    @Input() enableSetMultiHeaders = false;\r\n    /** åè®¸è¿è¡æ¶åè®¾ç½®ä¸­å¯è®¾ç½®çæå¤§è¡¨å¤´æ°ï¼åå«æ°æ®åï¼ï¼é»è®¤ä¸º 3å± */\r\n    @Input() maxMultiHeaders = 3;\r\n    /** åè®¾ç½®æ¹æ¡åååï¼å¼¹åºæ¹æ¡åæ´æç¤ºï¼é»è®¤ä¸ºfalse,ä¿®æ¹ä¿å­å°å½åæ¹æ¡ä¸­ */\r\n    @Input() showConfirmWhenSchemeChanged = false;\r\n\r\n    /** é»æ­¢click äºä»¶åæ³¡ */\r\n    @Input() stopPropagation = true;\r\n    /**\r\n     * (202105 å¼ç¨)\r\n     * ç¹å»ååæ ¼è¿è¡ç¼è¾ç¶ææ¶ï¼å³é­å¶ä»Gridçç¼è¾å¨ãé»è®¤ falseï¼\r\n     * å¤ä¸ªåè¡¨å­æ¶ï¼ä»æä¸ä¸ªåè¡¨ä¸­æç¼è¾ç¶æï¼å¶ä»åè¡¨ç»æç¼è¾\r\n     */\r\n    @Input() closeOtherGridEditor = false;\r\n    /** å½æ°æ®æºä¸ºç©ºæ¶ï¼æ¸ç©ºå·²éè®°å½, é»è®¤ true */\r\n    @Input() clearSelectionsWhenDataIsEmpty = true;\r\n    /** å¯ç¨å³é®èåï¼é»è®¤ä¸º false */\r\n    @Input() enableContextMenu = false;\r\n    /** å³é®èåæ°æ® */\r\n    @Input() contextMenus: ContextMenuItem[] = null;\r\n\r\n    @Input() beforeShowContextMenus: (e: any) => boolean;\r\n\r\n    @Output() selectValueChange = new EventEmitter();\r\n    @Output() checkValuesChange = new EventEmitter();\r\n    @Output() selectValuesChange = new EventEmitter();\r\n\r\n    @Input() beforeEdit: (param: RowEditParam) => Observable<boolean>;\r\n    @Output() beginEdit = new EventEmitter<RowEditParam>();\r\n    @Input() afterEdit: (rowIndex: number, rowData: any, column?: DataColumn, editor?: any) => Observable<boolean>;\r\n    @Output() endEdit = new EventEmitter<{ rowIndex: number, rowData: any, column?: DataColumn, value?: any }>();\r\n    @Output() cancelEdited = new EventEmitter<string>();\r\n\r\n    @Output() scrollY = new EventEmitter();\r\n\r\n    @Output() pageSizeChanged = new EventEmitter();\r\n    @Output() pageChanged = new EventEmitter();\r\n\r\n    @Output() loadSuccess = new EventEmitter();\r\n    @Output() emptyData  = new EventEmitter();\r\n\r\n    @Output() filterChanged = new EventEmitter();\r\n\r\n    @Input() beforeSelect: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeUnselect: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeCheck: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeUncheck: (params: BeforEventParam) => Observable<boolean>;\r\n    @Input() beforeSortColumn: (field: string, order: string, instance: DatagridComponent) => Observable<boolean>;\r\n\r\n    @Input() beforeLoad: (params: {data: any, instance: DatagridComponent}) => Observable<{ data: any }>\r\n\r\n    /** å¯ç¨éä¸­ååæ ¼é«äº®æ¾ç¤º */\r\n    @Input() enableHighlightCell = false;\r\n    /**  éä¸­çæ°æ®å§ç»ä»æ°æ®æºä¸­è·å. é»è®¤ä¸º false */\r\n    @Input() checkedRowsDataFromSource = false;\r\n    /** å½åååæ ¼ä¸ºåªè¯»æ¶ï¼ä½¿ç¨tab é®è·³å°ä¸ä¸ªååæ ¼æ¶ï¼æ¯å¦åè®¸è¿å¥ç¼è¾ç¶æï¼é»è®¤ä¸º false;\r\n     * é»è®¤æåµä¸ï¼å½åååæ ¼åªè¯»ï¼æTABè·³å°ä¸ä¸ªCELL æ¶ï¼éä¸­CELL ï¼åè½¦è¿å¥ç¼è¾ã\r\n     * å¼å¯åï¼ä¸ä¸ªååæ ¼èªå¨è¿å¥ç¼è¾ç¶æã\r\n     */\r\n    @Input() editcellWhenTabKeydwon = false;\r\n\r\n    /** ååæ ¼ç¹å»åäºä»¶ */\r\n    @Output() beforeClickCell = new EventEmitter<RowEditParam>();\r\n\r\n    @Output() dblclickRow = new EventEmitter();\r\n    @Output() selectChanged = new EventEmitter<SelectedRow>();\r\n    @Output() unSelect = new EventEmitter<SelectedRow>();\r\n    @Output() selectAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() unSelectAll = new EventEmitter();\r\n    /** å¼æ­¥è¯·æ±èæå è½½ */\r\n    @Output() scrollYLoad = new EventEmitter<{ pager: number, pageSize: number }>();\r\n\r\n    @Output() checked = new EventEmitter<SelectedRow>();\r\n    @Output() unChecked = new EventEmitter<SelectedRow>();\r\n    @Output() checkAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() unCheckAll = new EventEmitter<SelectedRow[]>();\r\n    @Output() checkedChange = new EventEmitter<SelectedRow[]>();\r\n\r\n    @Output() columnSorted = new EventEmitter<any>();\r\n\r\n    @Output() rowClick = new EventEmitter();\r\n    @Output() rowAppended = new EventEmitter();\r\n    @Output() rowDeleted = new EventEmitter();\r\n    @Output() rowUpdated = new EventEmitter();\r\n\r\n    @Output() dataChange = new EventEmitter();\r\n\r\n    /** æåä¸è¡çæåååæ ¼åè½¦å¤çäºä»¶ */\r\n    @Output() lastCellEnterHandler = new EventEmitter();\r\n\r\n    /** åç»å­æ®µååå */\r\n    @Output() groupFieldChange = new EventEmitter();\r\n    /** æå¨åæ¹ååæ¾ç¤ºä½ç½®åè§¦å */\r\n    @Output() columnMoved = new EventEmitter();\r\n    /** ååæ ¼ç¹å»äºä»¶ */\r\n    @Output() cellClick = new EventEmitter();\r\n\r\n    @Output() resized = new EventEmitter();\r\n\r\n    @ContentChildren(DatagridColumnDirective) dgColumns?: QueryList<DatagridColumnDirective>;\r\n    @ViewChild('dgPager') dgPager: any;\r\n    @ViewChild('resizeProxy') resizeProxy: ElementRef;\r\n    @ViewChild('resizeProxyBg') resizeProxyBg: ElementRef;\r\n    @ViewChild('datagridContainer') dgContainer: ElementRef;\r\n    @ViewChild('longTextArea') longTextArea: ElementRef;\r\n    @ViewChild('smartfiltertoolbar') smartFilterToolbar: SmartFilterToolbarComponent;\r\n    colGroup: ColumnGroup;\r\n\r\n    private _loading = false;\r\n    get loading() {\r\n        return this._loading;\r\n    }\r\n    set loading(val: boolean) {\r\n        this._loading = val;\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    get selections(): SelectedRow[] {\r\n        return this.dfs.getSelections();\r\n    }\r\n\r\n    get checkeds() {\r\n        return this.checkedRows;\r\n    }\r\n\r\n    get checkedRows() {\r\n        const chkeds = this.dfs.getCheckeds();\r\n        if (this.enableMorePageSelect) {\r\n            if (chkeds && chkeds.length) {\r\n                if (!this.checkedRowsDataFromSource) {\r\n                    return [...chkeds];\r\n                }\r\n                // ä»æ°æ®æºä¸­è·åææ°æ°æ®\r\n                return chkeds.map(n => {\r\n                    const d = this.dfs.findRow(n.id);\r\n                    if (d) {\r\n                        n.data = d.data;\r\n                    }\r\n                    return n;\r\n                });\r\n            }\r\n        } else {\r\n            if (this.data && this.data.length) {\r\n                const temp = this.data.map(n => n[this.idField]);\r\n                if (!this.checkedRowsDataFromSource) {\r\n                    return chkeds.filter(n => temp.includes(n.id));\r\n                }\r\n                // ä»æ°æ®æºä¸­è·åææ°æ°æ®\r\n                return chkeds.filter(n => temp.includes(n.id)).map(n => {\r\n                    const d = this.dfs.findRow(n.id);\r\n                    if (d) {\r\n                        n.data = d.data;\r\n                    }\r\n                    return n;\r\n                });\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    set checkedRows(rows: any[]) {\r\n        if (rows && rows.length) {\r\n            rows = rows.map(r => {\r\n                if (r.data) {\r\n                    return r;\r\n                }\r\n                return {\r\n                    id: r[this.idField],\r\n                    data: r\r\n                };\r\n            });\r\n        }\r\n\r\n        this.dfs.updateProperty('checkedRows', rows || []);\r\n        this.initSelectOrChecked();\r\n        this.cd.markForCheck();\r\n    }\r\n\r\n    private _selectedRow = null;\r\n    get selectedRow(): SelectedRow {\r\n        return this._selectedRow;\r\n    }\r\n    set selectedRow(row) {\r\n        if (row) {\r\n            if (this.selectValue != row.id) {\r\n                this._selectedRow = row;\r\n                this.selectValue = row.id;\r\n                this.selectValueChange.emit(row.id);\r\n                this.selectChanged.emit(row);\r\n            }\r\n        } else {\r\n            this.unSelect.emit(this._selectedRow);\r\n            this.selectValue = null;\r\n            this.selectValueChange.emit('');\r\n            this._selectedRow = null;\r\n        }\r\n        // this.cd.detectChanges();\r\n    }\r\n\r\n    ds = {\r\n        index: 0,\r\n        rows: [],\r\n        top: 0,\r\n        bottom: 0,\r\n        scrolling: false // æ¯å¦ç±æ»å¨æ¡è§¦å\r\n    };\r\n\r\n    pagerOpts: any = {};\r\n    restService: RestService;\r\n    editors: { [key: string]: any } = {};\r\n\r\n    validators: { name: string, value: ValidatorFn }[] = [];\r\n\r\n    currentCell: CellInfo;\r\n    flatColumns: DataColumn[];\r\n    footerWidth = 0;\r\n\r\n    clickDelay = 150;\r\n    private resizeColumnInfo = {\r\n        proxyLineEdge: 0,\r\n        startWidth: 0,\r\n        startX: 0,\r\n        left: 0\r\n    };\r\n\r\n    private ro: ResizeObserver | null = null;\r\n    subscriptions: Subscription[] = [];\r\n    realHeaderHeight = 0;\r\n    isSingleClick: boolean;\r\n\r\n    docuemntCellClickEvents: any;\r\n    documentCellClickHandler: any;\r\n    documentCellKeydownEvents: any;\r\n    documentCellKeydownHandler: any;\r\n\r\n    // å¼¹çªä¸­ä½¿ç¨æ¶ï¼çªå£ç¹å»äºä»¶å¤ç\r\n    private modalClickEvent = null;\r\n\r\n    // è¡éä¸­é®çäºä»¶\r\n    documentRowKeydownHandler: any;\r\n    // è¡ç¼è¾å¿«æ·é®\r\n    documentRowEditKeydownHanlder: any;\r\n    // document åå»æ¶ç»æè¡ç¼è¾\r\n    documentClickEndRowEditHandler: any;\r\n\r\n    pending = false;\r\n    public colFormatSer: ColumnFormatService;\r\n    scrollInstance: ScrollbarDirective = null;\r\n    // æ¬å°åæå¡\r\n    localeService: LocaleService;\r\n    // åå¹¶ååè¾å©ä¿¡æ¯\r\n    mergeCellInfo = {};\r\n    ignoreTarget = ['INPUT', 'SELECT', 'TEXTAREA'];\r\n    clientFilterService: DatagridFilterService = null;\r\n\r\n    settingService: any; // DatagridSettingsService;\r\n\r\n    /**\r\n     * æ§å¶åå­æ®µåç§°: _datagrid-setting-control_ \r\n     **/\r\n    ControlPanelFeild = '_datagrid-setting-control_';\r\n\r\n    private _isResized = false;\r\n\r\n    gridSize = { width: this.width + 'px', height: this.height + 'px' };\r\n    // å®¢æ·ç«¯è¿æ»¤æ¶ï¼æ¯å¦è¿æ»¤è¡åçåå\r\n    clientFilterChanged = false;\r\n    // style's ID\r\n    styleSheetId = '';\r\n\r\n    groupRowPanelPlaceholder = '';\r\n    commonUtils: CommonUtils = null;\r\n    smartFilterService: DatagridSmartFilterService = null;\r\n    smartFilterResult = { controlData: [], conditions: [] };\r\n    smartFilterBarHeight = 32;\r\n    idService: IdService;\r\n    private _active_datagrid_cls = 'datagrid-active';\r\n    private _blured_datagrid_cls = 'datagrid-blurred';\r\n\r\n    // èªå®ä¹gridæ ·å¼ï¼åè¡¨åå§åï¼ä¼æ·»å ä¸ä¸ªèªå®ä¹åç§°çæ ·å¼\r\n    _custom_datagrid_cls = 'datagrid';\r\n    // å¤éä»¿ windows éæ©æ¨¡å¼\r\n    sms: SelectionModeService;\r\n    // ç¦ç¹è¡ç´¢å¼ï¼æ¯æ¬¡è¡ç¹å»åæ´æ°\r\n    focusRowIndex = -1;\r\n\r\n    private documentBodyMouseDown = null;\r\n    private farrisInstances: FarrisComponentInstanceService = null;\r\n    private currentPagerData = [];\r\n    private resizeTimer = null;\r\n    private debugSer: DebugService = null;\r\n    private DATA_CHANGED_TIMER = null;\r\n    /** å½bodyclick æ¶ï¼æ¯å¦éåºè¡ç¼è¾ç¶æï¼é»è®¤ä¸º false */\r\n    @Input() exitRowEditingWhenBodyClick = false;\r\n\r\n    formValidations = null;\r\n\r\n    isFF = false;\r\n\r\n    private _footerRowHeight = this.footerHeight;\r\n\r\n    constructor(\r\n        public cd: ChangeDetectorRef,\r\n        public el: ElementRef,\r\n        public inject: Injector, public zone: NgZone,\r\n        public dfs: DatagridFacadeService,\r\n        public dgs: DatagridService,\r\n        private app: ApplicationRef,\r\n        protected domSanitizer: DomSanitizer,\r\n        public render2: Renderer2) {\r\n\r\n        this.styleSheetId = 'DATAGRID-' + Utils.uuid();\r\n\r\n        this.localeService = this.inject.get(LocaleService);\r\n        this.restService = this.inject.get<RestService>(DATAGRID_REST_SERVICEE, null);\r\n        this.colFormatSer = this.inject.get(ColumnFormatService);\r\n        this.commonUtils = this.inject.get(CommonUtils, null);\r\n        this.clientFilterService = new DatagridFilterService(dfs, this.localeService, inject);\r\n        this.farrisInstances = this.inject.get(FarrisComponentInstanceService, null);\r\n        this.debugSer = this.inject.get(DebugService, null);\r\n        let perfixStr = '';\r\n        if (WEBAPI_PREFIX_TOKEN) {\r\n            perfixStr = this.inject.get(WEBAPI_PREFIX_TOKEN, '');\r\n        }\r\n        if (!this.debugSer) {\r\n            this.debugSer = new DebugService();\r\n        }\r\n\r\n        if (this.debugSer.useDebugMode) {\r\n            this.debugSer.useDebugMode();\r\n        }\r\n\r\n        this.smartFilterService = this.inject.get(DatagridSmartFilterService, null);\r\n        this.idService = this.inject.get(IdService, null);\r\n        this.dfs.localId = this.localeService.localeId;\r\n\r\n        this.settingService = this.inject.get(GRID_SETTINGS_SERVICE, null);\r\n        if (this.settingService) {\r\n            this.settingService.setUriPerfixStr(perfixStr);\r\n            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);\r\n            this.settingService.httpRestService = settingsHttp;\r\n        }\r\n\r\n        // ilink 367849\r\n        const dataSubscription = this.dfs.data$.pipe(\r\n            switchMap((ds: any) => {\r\n                if (this.beforeLoad) {\r\n                    return this.beforeLoad({data: ds.rows, instance: this}).pipe(\r\n                        map((e: {data: any}) => {\r\n                            if (e && e.data) {\r\n                                ds.rows = e.data;\r\n                            }\r\n                            return ds;\r\n                        })\r\n                    );\r\n                }\r\n                return of(ds);\r\n            })\r\n        ).subscribe((dataSource: any) => {\r\n            this.cleanDom();\r\n            const ds = { ...dataSource };\r\n\r\n            if (this.conditions && Object.keys(this.conditions).length && !this.remoteFilter && this.useDefaultFilter) {\r\n                ds.rows = this.clientFilterService.executeFilter(ds.rows, this.conditions);\r\n            }\r\n\r\n            this.ds = ds;\r\n\r\n            if (this.ds.rows && this.ds.rows.length) {\r\n                this.data = this.dfs.getData();\r\n\r\n                if (this.mergeCell && this.mergeFields && this.mergeFields.length) {\r\n                    this.mergeCellInfo = this.dgs.getMergeCellInfo3(this.ds.rows, [...this.mergeFields]);\r\n                }\r\n\r\n                this.setPagerTotal();\r\n                this.loadSuccess.emit(this.ds.rows);\r\n            } else {\r\n                this.data = [];\r\n                this.currentCell = null;\r\n                if (this.clearSelectionsWhenDataIsEmpty) {\r\n                    this.clearAll();\r\n                }\r\n                this.emptyData.emit();\r\n            }\r\n\r\n            if (!this.ds.scrolling) {\r\n                this.updateFooterData();\r\n            }\r\n            // æ§è½ä¼å\r\n            this.cd.detectChanges();\r\n\r\n            \r\n            if (this.DATA_CHANGED_TIMER) {\r\n                clearTimeout(this.DATA_CHANGED_TIMER);\r\n            }\r\n\r\n            this.DATA_CHANGED_TIMER = setTimeout(() => {\r\n                if (this.autoHeight && this.maxHeight) {\r\n                    if (this.maxHeight < 55) {\r\n                        this.maxHeight = 60;\r\n                    }\r\n\r\n                    const gridContainerEl = this.el.nativeElement.parentElement;\r\n                    if (gridContainerEl.nodeName !== 'DIV') {\r\n                        this.writeConsole('Datagridç¶å®¹å¨å¿é¡»ä¸ºDIVã');\r\n                    } else {\r\n                        // gridContainerEl.style.height = 'unset';\r\n                        // gridContainerEl.style.maxHeight = this.maxHeight + 'px';\r\n                        // gridContainerEl.style.minHeight = `${this.emptyDataHeight + this.realHeaderHeight + \r\n                        //     (this.showRowGroupPanel ? this.rowGroupPanelHeight: 0) +\r\n                        //     (this.pagination ? this.pagerHeight : 0)}px`;\r\n                    }\r\n                }\r\n\r\n                if (this.useBlankWhenDataIsEmpty) {\r\n                    this.calculateGridSize(this.fit);\r\n                }\r\n\r\n                this.dgs.dataloaded.emit();\r\n                // TFS 577078\r\n                this.updateAllCheckboxStatus();\r\n\r\n                // if (!this.nowrap && this.data && this.data.length) {\r\n                //     this.setRowHeight(false);\r\n                //     this.dgs.cellContentWrapChanged.emit();\r\n                // }\r\n            }, 100);\r\n        });\r\n        this.subscriptions.push(dataSubscription);\r\n\r\n        const columnGroupSubscription = this.dfs.columnGroup$.pipe(\r\n            debounceTime(60)\r\n        ).subscribe(cg => {\r\n            if (cg) {\r\n                this.colGroup = cg;\r\n                this.footerWidth = cg.totalWidth;\r\n\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(columnGroupSubscription);\r\n\r\n        this.subscriptions.push(\r\n            this.dfs.gridSize$.subscribe((cg: any) => {\r\n                if (cg && cg.columnsGroup) {\r\n                    this.colGroup = cg.columnsGroup;\r\n                    if (!this.nowrap) {\r\n                        this.setFooterHeight();\r\n                    }\r\n                    this.cd.detectChanges();\r\n                }\r\n            })\r\n        );\r\n\r\n        this.initEditorAndValidator();\r\n\r\n        const currentCellSubscription = this.dfs.currentCell$.subscribe((cell: any) => {\r\n            this.currentCell = cell;\r\n            if (cell && cell.cellRef) {\r\n                cell.cellRef.isEditing = cell.isEditing;\r\n            }\r\n            this.unbindMoveSelectRowEvent();\r\n            this.bindDocumentEditListener();\r\n        });\r\n\r\n\r\n        this.dfs.selectRow$.subscribe((sr: SelectedRow) => {\r\n            if (!this.currentCell) {\r\n                this.bindDocumentMoveSelectRowEvent();\r\n            }\r\n            this.selectedRow = sr;\r\n        });\r\n\r\n        this.subscriptions.push(currentCellSubscription);\r\n\r\n        DatagridColumnsHelper.gridInstance = this;\r\n\r\n        const filterChangedSubscription = this.dgs.onFilterChanged.pipe(\r\n            debounceTime(200)\r\n        ).subscribe((conditions: any) => {\r\n            // æ´æ°ç¼å­è¿æ»¤æ¡ä»¶\r\n            this.conditions = conditions;\r\n            this.clientFilterChanged = true;\r\n            this.filterData(this.conditions);\r\n        });\r\n        this.subscriptions.push(filterChangedSubscription);\r\n\r\n        // this.initPaginationOptions();\r\n\r\n        const footerDataSubscription = this.dgs.refreshFooterData.subscribe(() => {\r\n            this.updateFooterData();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(footerDataSubscription);\r\n        this.dgs.commonUtils = this.commonUtils;\r\n\r\n\r\n        this.dgs.focusRowChanged.subscribe((e: any) => {\r\n            if (e) {\r\n                this.focusRowIndex = e.rowIndex;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    setCurrentPagerData($data) {\r\n        this.currentPagerData = $data;\r\n    }\r\n\r\n    writeConsole(msg, type: 'info'|'log'|'warn'|'error' = 'warn') {\r\n        if (this.debugSer) {\r\n            if (this.debugSer[type]) {\r\n                this.debugSer[type](msg);\r\n            } else {\r\n                console[type](msg)\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateFooterData() {\r\n        if ((this.showFooter || this.pagerContentTemplate ) && this.footerDataFrom === 'client' ) {\r\n            const fdata = this.dfs.getFooterData(this.data);\r\n            if (JSON.stringify(this._footerData['value']) !== JSON.stringify(fdata)) {\r\n                this.footerData = of(fdata);\r\n            }\r\n        }\r\n    }\r\n\r\n    //#region Ng Event\r\n\r\n    ngDoCheck() {\r\n        // if (!this.checkValues) {\r\n        //     this.checkValues = [];\r\n        // }\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.sms = new SelectionModeService(this);\r\n\r\n        this.checkFilterStyle();\r\n\r\n        if (this.useThemes) {\r\n            this._checkSize();\r\n        }\r\n        this.checkOptions();\r\n        this.groupRowPanelPlaceholder = this.localeService.getValue('datagrid.groupRow.tips');\r\n\r\n        if (this.smartFilterService) {\r\n\r\n            if (this.enableSmartFilter && this.showFilterBar) {\r\n                if (this.smartFilterResult && this.smartFilterResult.controlData && this.smartFilterResult.controlData.length) {\r\n                    this.filterBarHeight = this.smartFilterBarHeight;\r\n                } else {\r\n                    this.filterBarHeight = 0;\r\n                }\r\n            }\r\n\r\n            this.smartFilterService.filterChanged.subscribe((e: any) => {\r\n\r\n                if (!this.smartFilterResult && !e) {\r\n                    return;\r\n                }\r\n\r\n                if (JSON.stringify(this.smartFilterResult) !== JSON.stringify(e)) {\r\n                    this.smartFilterResult = e;\r\n                    this.clientFilterChanged = true;\r\n                    this.filterData(e.conditions);\r\n                    if (!this.smartFilterResult || (this.smartFilterResult.controlData && !this.smartFilterResult.controlData.length)) {\r\n                        this.onFilterBarResize(0);\r\n                    } else {\r\n                        if (!this.filterBarHeight) {\r\n                            this.onFilterBarResize(this.smartFilterBarHeight);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        this.isFF = this.commonUtils.getBrowserType().ff;\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n\r\n        // åå»ºèªå®ä¹style å®¹å¨\r\n        // \r\n\r\n        this.setHeaderHeight();\r\n        this.setPagerHeight();\r\n        // this.setRowHeight();\r\n        this.initBeforeEvents();\r\n        if (this.fit) {\r\n            this.setGridNewSizeWhenFit();\r\n        }\r\n\r\n        this.initState();\r\n        if (this.el && this.farrisInstances) {\r\n            this.farrisInstances.add(this.el.nativeElement, this);\r\n        }\r\n        if (!this.data || !this.data.length) {\r\n            this.fetchData(1, this.pageSize).subscribe(res => {\r\n                if (!res) {\r\n                    return;\r\n                }\r\n                this.total = res.total;\r\n\r\n                if (res.footer) {\r\n                    this.footerData = res.footer;\r\n                }\r\n\r\n                this.loadData(res.items);\r\n            });\r\n        }\r\n\r\n        this.zone.runOutsideAngular(() => {\r\n            this.render2.addClass(this.dgContainer.nativeElement, this._custom_datagrid_cls);\r\n            this.ro = new ResizeObserver((e) => {\r\n                const target = e[0].target as any;\r\n                if (target.style.display === 'none') {\r\n                    return;\r\n                }\r\n\r\n                const _w = e[0].contentRect.width;\r\n                if (!_w) {\r\n                    return;\r\n                }\r\n                const _h = e[0].contentRect.height;\r\n                const _floowW = Math.floor(_w);\r\n                const _floorH = Math.floor(_h);\r\n                const _roundW = Math.round(_w);\r\n                const _roundH = Math.round(_h);\r\n                const _ceilW = Math.ceil(_w);\r\n                const _ceilH = Math.ceil(_h);\r\n\r\n                if ((this.width === _floowW || this.width === _roundW || this.width === _ceilW) && (this.height === _floorH || this.height === _roundH || this.height === _ceilH)) {\r\n                    this.dgs.restoreScrollbarPosition();\r\n                    return;\r\n                }\r\n\r\n                if (this.resizeTimer) {\r\n                    clearTimeout(this.resizeTimer);\r\n                }\r\n                this.resizeTimer = setTimeout(() => {\r\n                    this.calculateGridSize(this.fit);\r\n                    this.resized.emit();\r\n                }, 100);\r\n            });\r\n\r\n            this.ro.observe(this.el.nativeElement.parentElement);\r\n\r\n\r\n            document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);\r\n            document.body.addEventListener('mousedown', this.documentBodyMouseDown = (e) => {\r\n                if (!this.isEditing()) {\r\n                    return;\r\n                }\r\n                const target = e.target as any;\r\n                if ((target.closest('td.f-datagrid-cell') && !target.closest('.f-datagrid-footer-row'))  ||\r\n                    target.closest('.date-overlay-container') ||\r\n                    target.closest('.time-picker-overlay') ||\r\n                    target.closest('.language-textbox-panel') ||\r\n                    target.closest('.farris-notify') ||\r\n                    target.closest('.comboPanel') \r\n                    // || target.closest('.f-multi-select-date')  //æ¥æå¤é\r\n                    ) {\r\n\r\n                    return;\r\n                }\r\n                this.onDocumentMouseDown(e);\r\n            }, true);\r\n\r\n        });\r\n\r\n        if (this.showFooter) {\r\n            if (this.footerTemplate) {\r\n                const footerDom = this.el.nativeElement.querySelector('.f-datagrid-footer');\r\n                if (footerDom) {\r\n                    this.footerHeight = this.el.nativeElement.querySelector('.f-datagrid-footer').offsetHeight;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.fit) {\r\n            if (this.el.nativeElement.parentElement) {\r\n                this.el.nativeElement.parentElement.style.position = 'relative';\r\n            }\r\n            this.calculateGridSize(this.fit);\r\n        }\r\n\r\n\r\n        // æ£æ¥æ¯å¦å¯ç¨ä»¿windowsèµæºç®¡çå¨ä¸­çå¤éæ¨¡å¼\r\n        if (this.selectionMode && this.selectionMode === 'default' && this.multiSelect) {\r\n            this.sms.enableWindowsSelectionMode();\r\n        }\r\n\r\n        this.setCellStyle();\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        if (this.dgColumns && this.dgColumns.length) {\r\n            this.columns = this.dgColumns.map(dgc => {\r\n                return { ...dgc };\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.dfs.loadData(changes.data.currentValue);\r\n            this.dgs.dataSourceChanged();\r\n        }\r\n\r\n        if (changes.showAllCheckbox !== undefined && !changes.showAllCheckbox.isFirstChange()) {\r\n            if (changes.showAllCheckbox.currentValue != changes.showAllCheckbox.previousValue) {\r\n                this.columnsChanged(false);\r\n            }\r\n        }\r\n\r\n        if (changes.showCheckbox !== undefined && !changes.showCheckbox.isFirstChange()) {\r\n            this.dfs.showCheckbox(changes.showCheckbox.currentValue);\r\n        }\r\n\r\n        if (changes.showLineNumber !== undefined && !changes.showLineNumber.isFirstChange()) {\r\n            this.dfs.showLineNumber(changes.showLineNumber.currentValue);\r\n        }\r\n\r\n        if (changes.multiSelect !== undefined && !changes.multiSelect.isFirstChange()) {\r\n            this.dfs.setMultiSelect(changes.multiSelect.currentValue);\r\n            this.columnsChanged();\r\n        }\r\n\r\n        if (changes.checkOnSelect !== undefined && !changes.checkOnSelect.isFirstChange()) {\r\n            this.dfs.setCheckOnSelect(changes.checkOnSelect.currentValue);\r\n        }\r\n\r\n        if (changes.selectOnCheck !== undefined && !changes.selectOnCheck.isFirstChange()) {\r\n            this.dfs.setSelectOnCheck(changes.selectOnCheck.currentValue);\r\n        }\r\n\r\n        if (changes.onlySelectSelf !== undefined && !changes.onlySelectSelf.isFirstChange()) {\r\n            this.dfs.updateProperty('onlySelectSelf', changes.onlySelectSelf.currentValue);\r\n        }\r\n\r\n        if (changes.keepSelect !== undefined && !changes.keepSelect.isFirstChange()) {\r\n            this.dfs.updateProperty('keepSelect', changes.keepSelect.currentValue);\r\n        }\r\n\r\n        if (changes.headerWrap !== undefined && !changes.headerWrap.isFirstChange()) {\r\n            setTimeout(() => {\r\n                this.setHeaderHeight();\r\n                this.cd.detectChanges();\r\n                this.dfs.columnResizeEnd();\r\n            });\r\n        }\r\n\r\n        if (changes.nowrap !== undefined && !changes.nowrap.isFirstChange()) {\r\n            this.checkNowrap();\r\n            this.setRowHeight(false);\r\n            this.dgs.cellContentWrapChanged.emit();\r\n            this.dfs.updateProperty('nowrap', changes.nowrap.currentValue);\r\n        }\r\n\r\n        if (changes.multiSort !== undefined && !changes.multiSort.isFirstChange()) {\r\n            this.dfs.updateProperty('multiSort', changes.multiSort.currentValue);\r\n        }\r\n\r\n        if (changes.editable !== undefined && !changes.editable.isFirstChange()) {\r\n            this.dfs.updateProperty('editable', changes.editable.currentValue);\r\n            if (!changes.editable.currentValue) {\r\n                this.endCellEdit();\r\n            }\r\n            this.isSingleClick = null;\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        if (changes.showHeader !== undefined && !changes.showHeader.isFirstChange()) {\r\n            this.dfs.updateProperty('showHeader', changes.showHeader.currentValue);\r\n            this.headerHeightChange();\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        if (changes.showFilterBar !== undefined && !changes.showFilterBar.isFirstChange()) {\r\n            this.dfs.updateProperty('showFilterBar', changes.showFilterBar.currentValue);\r\n            this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n            // this.dgs.smartFilterBarExpand.emit();\r\n            let fh = 0;\r\n            if (this.conditions && this.conditions.length) {\r\n                fh = 32;\r\n            }\r\n            this.onFilterBarResize(fh);\r\n        }\r\n\r\n\r\n        if (changes.showFooter !== undefined && !changes.showFooter.isFirstChange()) {\r\n            this.dfs.updateProperty('showFooter', changes.showFooter.currentValue);\r\n            // this.cd.detectChanges();\r\n            this.calculateGridSize(this.fit);\r\n        }\r\n\r\n        if (changes.pagerOnServer !== undefined && !changes.pagerOnServer.isFirstChange()) {\r\n            this.dfs.updateProperty('pagerOnServer', changes.pagerOnServer.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                remote: this.pagerOnServer\r\n            });\r\n        }\r\n\r\n        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {\r\n            this.dfs.updateProperty('pageIndex', changes.pageIndex.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                currentPage: this.pageIndex\r\n            });\r\n        }\r\n\r\n        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {\r\n            this.dfs.updateProperty('pageSize', changes.pageSize.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                itemsPerPage: this.pageSize\r\n            });\r\n        }\r\n\r\n        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {\r\n            this.dfs.updateProperty('pageList', changes.pageList.currentValue);\r\n            this.pagerOpts = Object.assign(this.pagerOpts, {\r\n                pageList: this.pageList\r\n            });\r\n        }\r\n\r\n        if (changes.columns !== undefined && !changes.columns.isFirstChange()) {\r\n            this.columnsChanged();\r\n        }\r\n\r\n        if (changes.sizeType !== undefined && !changes.sizeType.isFirstChange()) {\r\n            this._sizeType = changes.sizeType.currentValue;\r\n            this.setRowHeight(true);\r\n            // this.setHeaderHeight();\r\n            this.dfs.updateProperty('rowHeight', this.rowHeight);\r\n            this.setFooterHeight();\r\n            this.refresh();\r\n            this.dgs.onRowHeightChange(this.rowHeight);\r\n        }\r\n        if (changes.rowHeight && !changes.rowHeight.isFirstChange()) {\r\n            this.setRowHeight(false);\r\n        }\r\n\r\n        if (changes.selectValue && !changes.selectValue.isFirstChange()) {\r\n            this.selectRow(this.selectValue, false);\r\n        }\r\n\r\n        if (changes.checkValues && !changes.checkValues.isFirstChange()) {\r\n            const checkIds = this.dfs.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (v) => v);\r\n            if (checkIds && checkIds.length) {\r\n                this.checkRows(checkIds, false);\r\n            }\r\n\r\n            const uncheckIds = this.dfs.differenceBy(changes.checkValues.previousValue || [], changes.checkValues.currentValue || [], (v) => v);\r\n            if (uncheckIds && uncheckIds.length) {\r\n                this.unCheckRows(uncheckIds, false);\r\n            }\r\n\r\n            this.zone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this.checkValues = this.checkeds.map(r => r.id);\r\n                    this.checkValuesChange.emit(this.checkValues);\r\n                    this.checkedChange.emit(this.checkeds);\r\n\r\n                    this.updateAllCheckboxStatus();\r\n                }, 10);\r\n            });\r\n        }\r\n\r\n        if (changes.showGroupColumn && !changes.showGroupColumn.isFirstChange()) {\r\n            this.toggleVisibleColumn(this.groupField.split(','), changes.showGroupColumn.currentValue);\r\n            this.columnsChanged();\r\n        }\r\n\r\n        if (changes.autoFitColumns && !changes.autoFitColumns.isFirstChange()) {\r\n            this.dfs.updateProperty('autoFitColumns', changes.autoFitColumns.currentValue);\r\n        }\r\n\r\n        // if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {\r\n        //     this.fitColumns = changes.fitColumns.currentValue;\r\n        // }\r\n\r\n        if (changes.groupRows && !changes.groupRows.isFirstChange()) {\r\n            this.dfs.updateProperty('groupRows', changes.groupRows.currentValue);\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.mergeCell && !changes.mergeCell.isFirstChange()) {\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.mergeFields && !changes.mergeFields.isFirstChange()) {\r\n            this.refresh();\r\n        }\r\n\r\n        if (changes.enableFilterRow && !changes.enableFilterRow.isFirstChange()) {\r\n            this.dfs.updateProperty('enableFilterRow', changes.enableFilterRow.currentValue);\r\n            if (this.showHeader) {\r\n                this.setHeaderHeight();\r\n                this.filterBarHeight = 32;\r\n                this.dgs.toggleFilterRow.emit(this.enableFilterRow);\r\n                this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n\r\n        if (changes.enableSmartFilter && !changes.enableSmartFilter.isFirstChange()) {\r\n            this.dfs.updateProperty('enableSmartFilter', changes.enableSmartFilter.currentValue);\r\n        }\r\n\r\n        if (changes.enableDragColumn && !changes.enableDragColumn.isFirstChange()) {\r\n            this.checkDragColumns();\r\n        }\r\n\r\n        if (changes.showRowGroupPanel && !changes.showRowGroupPanel.isFirstChange()) {\r\n            this.dgs.smartFilterBarExpand.emit();\r\n            this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n        }\r\n\r\n        if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {\r\n            this.sms.toggleMode();\r\n        }\r\n    }\r\n\r\n    private checkFilterStyle() {\r\n        // è¿æ»¤è¡ä¸æºè½è¿æ»¤ åæ¶å¯ç¨æ¶ï¼å°è¿æ»¤è¡ç¦ç¨\r\n        if (this.enableFilterRow && this.enableSmartFilter) {\r\n            this.enableFilterRow = false;\r\n        }\r\n    }\r\n\r\n    private _checkSize() {\r\n        const themesKey = localStorage.getItem('gsp_rtf_themSKey');\r\n        let st: any = 'sm';\r\n        switch (themesKey) {\r\n            case 'default':\r\n                st = 'sm';\r\n                break;\r\n            case 'loose':\r\n                st = 'md';\r\n                break;\r\n        }\r\n\r\n        this.sizeType = st;\r\n    }\r\n\r\n    private checkDragColumns() {\r\n        if (this.isMultiHeader()) {\r\n            this.enableDragColumn = false;\r\n            // this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    private enableSettings() {\r\n        return this.useControlPanel && (!this.isMultiHeader() || (this.isMultiHeader() && this.enableSetMultiHeaders));\r\n    }\r\n\r\n    private checkOptions() {\r\n\r\n        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };\r\n\r\n        if (!this.id) {\r\n            this.id = 'FarrisDataGrid' + Utils.uuid().replace(/-/g, '').substr(0, 10);\r\n            if (this.useControlPanel) {\r\n                this.useControlPanel = false;\r\n                this.writeConsole('å¯ç¨åéç½®å±æ§ï¼æªè®¾ç½®IDï¼æ­¤åè½å°ç¦ç¨ã');\r\n            }\r\n            this._custom_datagrid_cls = this.id;\r\n        } else {\r\n            this.styleSheetId = this.id + '_' + Utils.uuid().replace(/-/g, '').substr(0, 10);\r\n            this._custom_datagrid_cls = this.styleSheetId;\r\n        }\r\n        if (this.settingService && this.useControlPanel) {\r\n            this.settingService.registerGridInstance(this);\r\n        }\r\n\r\n        this.dgs.createStyleElement(this.styleSheetId);\r\n\r\n        if (!this.idField) {\r\n            throw new Error('The Datagrid\\'s idField can\\'t be Null. ');\r\n        }\r\n        this.checkNowrap();\r\n        this.checkSortInfo();\r\n        this.checkMergeCell();\r\n        this.setCheckboxBehavior();\r\n        this.initPaginationOptions();\r\n        if (!this.columns) {\r\n            this.columns = this.fields;\r\n        }\r\n\r\n        this.checkGroupHeaderColumns();\r\n\r\n        // TFS: 356956\r\n        this.checkGroupRowSetting();\r\n        this.checkColumnsType();\r\n\r\n        this.checkDragColumns();\r\n\r\n        const _defaultSetting = () => {\r\n            this._flatColumns();\r\n            this.setRowHeight();\r\n        };\r\n\r\n\r\n        this.dfs.setinitialOptions({\r\n            columns: this.columns,\r\n            groupField: this.groupField,\r\n            sortName: this.sortName,\r\n            sortOrder: this.sortOrder,\r\n            expandGroupRows: this.expandGroupRows\r\n        });\r\n\r\n        if (!this.isMultiHeader()) {\r\n            this.enableSetMultiHeaders = false;\r\n        }\r\n\r\n\r\n        \r\n\r\n        // å è½½ç¨æ·ä¸ªæ§åè®¾ç½® --ã åæ¾ç¤ºä¸åæåº\r\n        if (this.settingService && this.enableSettings()) {\r\n\r\n            const settings$ = this.settingService.getSettings(this.id);\r\n            if (!settings$) {\r\n                _defaultSetting();\r\n                return;\r\n            }\r\n            settings$.subscribe((sets) => {\r\n                if (sets) {\r\n                    if (this.enableScheme && this.settingService['schemeService']) {\r\n                        const schemalist = this.settingService['schemeService'].getStateValue(this.id, 'list');\r\n                        if (schemalist && schemalist.length) {\r\n                            this.userProfileSetting(sets);\r\n                        }\r\n                    } else {\r\n                        this.userProfileSetting(sets);\r\n                    }\r\n                    this.setRowHeight(false);\r\n                }\r\n\r\n                if (this.data && this.data.length) {\r\n                    this.dfs.updateProperty('data', this.data);\r\n                }\r\n\r\n                this.columnsChanged(this.groupRows && (this.data && !!this.data.length));\r\n            }, (err) => {\r\n                _defaultSetting();\r\n                this.writeConsole(err, 'error');\r\n            });\r\n        } else {\r\n            _defaultSetting();\r\n        }\r\n    }\r\n\r\n\r\n    refreshSelectedData() {\r\n        if (this.selectedRow && this.selectedRow.id) {\r\n            if (this.data && this.data.length) {\r\n                const rd = this.data.find(d => d[this.idField] === this.selectedRow.id);\r\n                this.selectedRow.data = rd;\r\n            } else {\r\n                this.selectedRow = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unsubscribes();\r\n\r\n        if (this.ro) {\r\n            if (this.el.nativeElement.parentElement) {\r\n                this.ro.unobserve(this.el.nativeElement.parentElement);\r\n            }\r\n            this.ro.disconnect();\r\n        }\r\n\r\n        if (this.documentRowKeydownHandler) {\r\n            this.documentRowKeydownHandler();\r\n        }\r\n\r\n        this.currentCell = null;\r\n        this.clientFilterService = null;\r\n\r\n        this.cleanDom();\r\n\r\n        // ç§»é¤å¨æçstyle\r\n        this.dgs.removeStyleSheet();\r\n\r\n        if (this.settingService && this.settingService.destroy) {\r\n            this.settingService.destroy(this.id);\r\n        }\r\n\r\n        if (this.sms) {\r\n            this.sms.destroy();\r\n            this.sms = null;\r\n        }\r\n\r\n        document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);\r\n\r\n        if (this.farrisInstances) {\r\n            this.farrisInstances.destroy(this.el.nativeElement);\r\n        }\r\n        this._selectedRow = null;\r\n        this.editors = {};\r\n        DatagridColumnsHelper.gridInstance = null;\r\n        this.unbindMoveSelectRowEvent();\r\n        this.unbindDocumentEditListener();\r\n    }\r\n\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick(event: MouseEvent): void {\r\n        if (this.showSelectedList && this.dgPager) {\r\n            this.dgPager.closeSelectedList();\r\n        }\r\n\r\n        if (this.pending) {\r\n            return;\r\n        }\r\n\r\n        const target = event.target as any;\r\n        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT') {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n        if (this.currentCell && this.currentCell.editor && this.currentCell.editor._editorClickEvent) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n\r\n        /*\r\n        this.endCellEdit(event);\r\n        this.dfs.cancelSelectCell();\r\n        */\r\n        if (this.stopPropagation) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n    }\r\n\r\n    private initPaginationOptions() {\r\n        this.pagerOpts = {\r\n            id: this.id ? this.id + '-pager_' + Utils.uuid() : 'farris-datagrid-pager_' + Utils.uuid(),\r\n            itemsPerPage: this.pagination ? this.pageSize : this.total,\r\n            currentPage: this.pageIndex,\r\n            totalItems: this.total,\r\n            pageList: this.pageList,\r\n            remote: this.pagerOnServer\r\n        };\r\n    }\r\n\r\n    private updatePagerOptions() {\r\n        this.pagerOpts = Object.assign(this.pagerOpts, {\r\n            itemsPerPage: this.pageSize,\r\n            currentPage: this.pageIndex,\r\n            totalItems: this.total\r\n        });\r\n    }\r\n\r\n    private setPagerTotal() {\r\n        const _total = this.data.length;\r\n        if (this.pagination && this.total === 0 && this.virtualized) {\r\n            this.pagerOpts.totalItems = _total;\r\n        } else {\r\n            if (!this.pagination) {\r\n                this.pagerOpts.itemsPerPage = _total;\r\n            }\r\n        }\r\n    }\r\n\r\n    private setFooterHeight(rows?: []) {\r\n        if (this.showFooter && !this.footerTemplate) {\r\n            rows = rows || this._footerData['value'];\r\n\r\n            if (!rows || !rows.length) {\r\n                return;\r\n            }\r\n\r\n            if (this.nowrap) {\r\n                this.dgs.removeCssRule(`${this.customStyleKey()} .f-datagrid-footer .f-datagrid-footer-row`);\r\n                this.renderCustomStyle2({ style: { height: `${this._footerRowHeight}px!important`}}, null, 'f-datagrid-footer .f-datagrid-footer-row');\r\n                const clsName = 'f-datagrid-footer-row .f-datagrid-cell-content,f-datagrid-group-footer .f-datagrid-cell-content,f-datagrid-footer-row .f-datagrid-cell';\r\n                clsName.split(',').forEach(n => {\r\n                    this.dgs.removeCssRule(`${this.customStyleKey()} .${n}`);\r\n                });\r\n                let fh = this._footerRowHeight - 1;\r\n                clsName.split(',').forEach(n => {\r\n                    this.renderCustomStyle2({ style: { height: `${fh}px!important`, \"line-height\": `${fh}px!important`}}, null, n);\r\n                });\r\n\r\n                this.footerHeight = rows.length * this._footerRowHeight;\r\n\r\n            } else {\r\n                if (this['_footer_height_timer_']) {\r\n                    clearTimeout(this['_footer_height_timer_']);\r\n                }\r\n\r\n                this['_footer_height_timer_'] = setTimeout(() => {\r\n                    const topFooter = document.querySelector('.f-datagrid-footer-top');\r\n                    const bottomFooter = document.querySelector('.f-datagrid-footer-bottom');\r\n\r\n\r\n                    let _footHeight = rows.length * this._footerRowHeight;\r\n                    const minFooterRowHeight = `min_footer_row_height_${this._footerRowHeight}`;\r\n                    if (topFooter) {\r\n                        topFooter.querySelectorAll('tr').forEach(tr => {\r\n                            this.render2.addClass(tr, minFooterRowHeight);\r\n                        });\r\n\r\n                        this.render2.setStyle(topFooter, 'height', _footHeight+'px');\r\n                        _footHeight = Math.max(...Array.from(topFooter.querySelectorAll('table')).map(n => n.offsetHeight));\r\n                        this.render2.setStyle(topFooter, 'height', _footHeight + 'px');\r\n                    } else {\r\n                        if (bottomFooter) {\r\n                            bottomFooter.querySelectorAll('tr').forEach(tr => {\r\n                                this.render2.addClass(tr, minFooterRowHeight);\r\n                            });\r\n\r\n                            this.render2.setStyle(bottomFooter, 'height', _footHeight+'px');\r\n                            _footHeight = Math.max(...Array.from(bottomFooter.querySelectorAll('table')).map(n => n.offsetHeight));\r\n                            this.render2.setStyle(bottomFooter, 'height', _footHeight + 'px');\r\n                        }\r\n                    }\r\n                   \r\n                    if (_footHeight !== this.footerHeight) {\r\n                        this.footerHeight = _footHeight;\r\n\r\n                        if (rows.length * this._footerRowHeight > this.footerHeight) {\r\n                            this.footerHeight = rows.length * this._footerRowHeight;\r\n                        }\r\n\r\n                        this.dfs.columnResizeEnd();\r\n                    }\r\n                    \r\n                }, 100);\r\n            }\r\n        }\r\n    }\r\n\r\n    customStyleKey() {\r\n        return `.${this._custom_datagrid_cls}`;\r\n    }\r\n\r\n    private setRowHeight(useSizeType = false) {\r\n        const _rowHeight = SIZE_TYPE[this._sizeType].row;\r\n        const _rh = 29;\r\n        if (useSizeType) {\r\n            this.rowHeight = _rowHeight;\r\n            this.filterRowHeight = SIZE_TYPE[this._sizeType].pager;\r\n        } else {\r\n            this.rowHeight = _rowHeight > this.rowHeight ? _rowHeight : this.rowHeight;\r\n        }\r\n\r\n        const key1 = `${this.customStyleKey()}.f-datagrid-body-row, ${this.customStyleKey()} .f-datagrid-cell`;\r\n        const key2 = `${this.customStyleKey()} .f-datagrid-cell-content`;\r\n\r\n        this.dgs.removeCssRule(key1);\r\n        this.dgs.removeCssRule(key2);\r\n\r\n\r\n        if (this.rowHeight !== _rh && this.nowrap) {\r\n            const rowHeightCSS = [\r\n                `${key1} { height: ${this.rowHeight}px }`,\r\n                `${key2} { height: ${this.rowHeight}px; line-height: ${this.rowHeight}px }`\r\n            ];\r\n\r\n            this.dgs.appendCssRules(rowHeightCSS);\r\n        }\r\n    }\r\n\r\n    initSelectOrChecked() {\r\n        const _data = this.dfs.getCurrentPageData();\r\n        if (!this.enableMorePageSelect && this.multiSelect) {\r\n            // this.clearAll();\r\n            if (this.checkeds && this.checkeds.length) {\r\n                this.checkeds.forEach(r => {\r\n                    if (!_data.find(n => n[this.idField] == r.id)) {\r\n                        this.unCheckRow(r.id, false);\r\n                    }\r\n                });\r\n            } else {\r\n                this.clearCheckeds();\r\n            }\r\n        }\r\n\r\n        if (this.selectValue) {\r\n            if (_data.find(n => n[this.idField] == this.selectValue)) {\r\n                this.selectRow(this.selectValue, false);\r\n                this.refreshSelectedData();\r\n            }\r\n        }\r\n\r\n        if (this.multiSelect) {\r\n            if (this.checkValues && this.checkValues.length) {\r\n                const chkids = this.checkeds.map(r => r.id);\r\n                const diffIds = this.dfs.difference(chkids, this.checkValues);\r\n\r\n                if (diffIds.length) {\r\n                    this.checkRows(diffIds, false);\r\n                } else {\r\n                    this.checkValues = [];\r\n                }\r\n            } else {\r\n                this.checkValues = [];\r\n            }\r\n\r\n            this.checkValues = this.checkeds.map(r => r.id);\r\n\r\n            if (!this._isResized || this.virtualized) {\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n            this.updateAllCheckboxStatus(_data);\r\n        }\r\n    }\r\n\r\n    private updateAllCheckboxStatus(_data?: any) {\r\n        if (!_data) {\r\n            _data = this.dfs.getCurrentPageData();\r\n        }\r\n\r\n        let checkAllStatus = 0;\r\n        if (this.showAllCheckbox) {\r\n            const allDataIDs = _data.map(r => r[this.idField]);\r\n            const newCheckValues = allDataIDs.filter(n => this.checkValues.includes(n));\r\n\r\n            if (newCheckValues && newCheckValues.length) {\r\n                const isSame = !this.dfs.difference(allDataIDs, this.checkValues).length;\r\n                if (!this.checkValues || !this.checkValues.length) {\r\n                    // æ²¡æéä¸­çæ°æ®\r\n                    checkAllStatus = 0;\r\n\r\n                } else if (isSame) { // this.checkValues.length === this.data.length ||\r\n                    // å¨é¨éä¸­\r\n                    checkAllStatus = 1;\r\n                } else if (!isSame) { // this.checkValues.length !== this.data.length &&\r\n                    // æéä¸­çæ°æ®ï¼ä½ä¸æ¯å¨é¨éä¸­\r\n                    checkAllStatus = 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.dgs.changeCheckAllStatus.emit(checkAllStatus);\r\n    }\r\n\r\n    // å½åéå¹¶æ¾ç¤ºå¤éæ¡æ¶ï¼é»è®¤å° checkOnSelect, selectOnCheck è®¾ç½®ä¸º true;\r\n    private setCheckboxBehavior() {\r\n        if (!this.multiSelect && this.showCheckbox) {\r\n            // TFS: 380899\r\n            // this.checkOnSelect = true;\r\n            // this.selectOnCheck = true;\r\n        }\r\n    }\r\n\r\n\r\n    private _cancelColumnFixed(columns) {\r\n        \r\n        if (!columns.filter(n =>(!n.fixed || (n.fixed !== 'left' && n.fixed !== 'right') ) && (n.visible || n.visible === undefined)).length) {\r\n            const colsCount = columns.length;\r\n            const rightCols = columns.filter(n => n.fixed === 'right');\r\n            const leftCols = columns.filter(n => n.fixed === 'left');\r\n            if ( leftCols.length == colsCount || rightCols.length == colsCount) {\r\n                columns.forEach(n => {\r\n                    n.fixed = ''\r\n                });\r\n            } else {\r\n                if (rightCols.length === 1) {\r\n                    leftCols.forEach(t =>{\r\n                        t.fixed = '';\r\n                    });\r\n                } else {\r\n                    rightCols.forEach(t =>{\r\n                        t.fixed = '';\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private _flatColumns() {\r\n        if (!this.columns || !this.columns.length) {\r\n            return;\r\n        }\r\n        // æ£æ¥åæ¯å¦ä¸ºå¨åºå®\r\n        this._cancelColumnFixed(this.columns[0].filter(n => n.field !== this.ControlPanelFeild));\r\n\r\n        if (this.isMultiHeader()) {\r\n            if (this.fast) {\r\n                this.flatColumns = this.dfs.getGroupColumns(this.columns[0]);\r\n            } else {\r\n                const _cols = flatten<DataColumn>(this.columns);\r\n                _cols.forEach(col => {\r\n                    if (col.parentId) {\r\n                        const t = _cols.find(n => n.id === col.parentId);\r\n                        if (t) {\r\n                            col.fixed = t.fixed;\r\n                        }\r\n                    }\r\n                })\r\n                this.flatColumns = _cols.filter((col: DataColumn) => (!col.colspan || col.colspan == 1) && this.columnIsVisible(col));\r\n            }\r\n        } else {\r\n            this.flatColumns = flatten<DataColumn>(this.columns).filter((col: DataColumn) => (!col.colspan || col.colspan == 1) && this.columnIsVisible(col));\r\n        }\r\n\r\n    }\r\n\r\n    columnIsVisible(col: DataColumn) {\r\n        return DatagridColumnsHelper.columnIsVisible(col, this);\r\n    }\r\n\r\n    // æ·»å åè®¾ç½®\r\n    private addControlCol() {\r\n        if (this.enableSettings()) {\r\n            const controlCol = this.columns[0].find(n => n.field === this.ControlPanelFeild);\r\n            if (!controlCol) {\r\n                const cp = { field: this.ControlPanelFeild, width: 24, rowspan: this.columns.length, fixed: 'right', visible: true };\r\n\r\n                // 2021-05-24 å¯ç¨è¿æ»¤è¡ååºé\r\n                // if (this.enableFilterRow) {\r\n                //     cp.rowspan += 1;\r\n                // }\r\n\r\n                this.columns[0].push(cp);\r\n            } else {\r\n                controlCol.visible = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkGroupHeaderColumns() {\r\n        if (this.isMultiHeader()) {\r\n            const allCols = flatten<DataColumn>(this.columns);\r\n            DatagridColumnsHelper.checkGroupHeaderColumnVisible(allCols);\r\n        }\r\n    }\r\n\r\n    // æ£æ¥åéå: [] -> [[]]\r\n\r\n    private correctColumns(values) {\r\n        if (values && values.length && !Array.isArray(values[0])) {\r\n            return [values];\r\n        } else {\r\n            return values || [];\r\n        }\r\n    }\r\n\r\n    private checkColumnsType() {\r\n        if (this.columns && this.columns.length) {\r\n            // if (!Array.isArray(this.columns[0])) {\r\n            //     this.columns = [ this.columns ];\r\n            // }\r\n\r\n            this.addControlCol();\r\n\r\n            this.columns.forEach((cols, columnsIndex) => {\r\n                cols.forEach((col: DataColumn, index) => {\r\n                    if (!col.field) {\r\n                        col.field = `farris-datagrid-column_${columnsIndex}_${index}`;\r\n                    }\r\n\r\n                    if (!col.valign) {\r\n                        col.valign = 'middle';\r\n                    }\r\n\r\n                    if (col.width === undefined || col.width === null) {\r\n                        col.width = 100;\r\n                    } else {\r\n                        if (typeof col.width === 'string') {\r\n                            col.width = parseInt(col.width, 10);\r\n                        }\r\n                    }\r\n\r\n                    // è®°å½åå§å®½åº¦\r\n                    if (!col.originalWidth) {\r\n                        col.originalWidth = col.width;\r\n                    }\r\n\r\n                    if (col.formatter && typeof col.formatter !== 'function' && Object.keys(col.formatter).length === 0) {\r\n                        col.formatter = null;\r\n                    }\r\n\r\n                    if (!this.showGroupColumn && this.groupRows) {\r\n                        this.toggleVisibleColumn(this.groupField.split(','), false);\r\n                    }\r\n                    // è¿æ»¤è¡æ£æ¥\r\n                    if (col.filter) {\r\n                        if (typeof col.filter === 'boolean') {\r\n                            if (col.field) {\r\n                                col.filter = this.clientFilterService.createColumnFilterOptions(col);\r\n                            } else {\r\n                                col.filter = false;\r\n                            }\r\n                        } else {\r\n                            if (!col.filter.options || !Object.keys(col.filter.options).length) {\r\n                                switch (col.filter.type) {\r\n                                    case ColumnFilterType.enum:\r\n                                        col.filter.options = col.formatter['options'];\r\n                                        break;\r\n                                    case ColumnFilterType.date:\r\n                                        col.filter.options = { dateFormat: 'yyyy-MM-dd', returnFormat: 'yyyy-MM-dd' };\r\n                                        break;\r\n                                    case ColumnFilterType.datetime:\r\n                                        col.filter.options = { dateFormat: 'yyyy-MM-dd HH:mm:ss', returnFormat: 'yyyy-MM-dd HH:mm:ss' };\r\n                                        break;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                    // å¼å®¹ hidden 2021-05-31\r\n                    if (col['hidden'] !== undefined && col.visible === undefined) {\r\n                        if (typeof col['hidden'] === 'boolean') {\r\n                            col.visible = !col['hidden'];\r\n                        } else {\r\n                            if (typeof col['hidden'] === 'function') {\r\n                                col.visible = () => {\r\n                                    const r = col['hidden'].bind(this);\r\n                                    return !r;\r\n                                };\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // å¤è¡¨å¤´ç¦ç¨è¿æ»¤\r\n                    if (!col.field || col.field.indexOf('farris-datagrid-column_') > -1) {\r\n                        col.filter = false;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private checkGroupRowSetting() {\r\n        // å¦æå¯ç¨åç»è¡ï¼ä½æªè®¾ç½®åç»å­æ®µæ¶ï¼å°å³é­åç»è¡åè½\r\n        // if (this.groupRows) {\r\n        //     if (!this.groupField) {\r\n        //         this.groupRows = false;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    private checkMergeCell() {\r\n        if (this.mergeCell) {\r\n            if (!this.mergeFields || !this.mergeFields.length) {\r\n                this.mergeCell = false;\r\n            } else {\r\n                this.virtualized = false;\r\n                this.virtualizedAsyncLoad = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkSortInfo() {\r\n        if (this.sortName) {\r\n            if (!this.sortOrder) {\r\n                this.sortOrder = this.sortName.split(',').map(() => 'asc').join(',');\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkNowrap() {\r\n        // å¯ç¨æè¡åï¼èæå è½½ç¹æ§å¤±æ\r\n        if (!this.nowrap) {\r\n            this.virtualized = false;\r\n        }\r\n    }\r\n\r\n    setHeaderHeight() {\r\n        this.realHeaderHeight = 0;\r\n        if (this.showHeader) {\r\n            const gridHeaderEl = this.el.nativeElement.querySelector('.f-datagrid-header');\r\n            if (!this.headerWrap) {\r\n                const { header: hh, pager: ph} = SIZE_TYPE[this._sizeType];\r\n                if (this.useThemes) {\r\n                    this.headerHeight =  hh;\r\n                    this.filterRowHeight = ph;\r\n                }\r\n                this.realHeaderHeight = this.columns.length * this.headerHeight;\r\n\r\n                if (this.enableFilterRow) {\r\n                    this.realHeaderHeight += this.filterRowHeight;\r\n                }\r\n\r\n                if (gridHeaderEl) {\r\n                    gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';\r\n                }\r\n            } else {\r\n                if (gridHeaderEl) {\r\n                    this.render2.removeStyle(gridHeaderEl, 'minHeight');\r\n\r\n                    const fixedLeftHeader = gridHeaderEl.querySelector('.f-datagrid-header-fixed-left');\r\n                    if (fixedLeftHeader) {\r\n                        this.render2.setStyle(fixedLeftHeader, 'height', 'auto');\r\n                    }\r\n\r\n                    const fixedRightHeader = gridHeaderEl.querySelector('.f-datagrid-header-fixed-right');\r\n                    if (fixedRightHeader) {\r\n                        this.render2.setStyle(fixedRightHeader, 'height', 'auto');\r\n                    }\r\n\r\n                    const trs = gridHeaderEl.querySelectorAll('table tr:not(.f-datagrid-filter-row)');\r\n                    trs.forEach(n => {\r\n                        n.style.height = 'auto';\r\n                        Array.from(n.children).forEach((a: any) => a.style.height = 'auto');\r\n                    });\r\n\r\n                    const tableEls = Array.from(gridHeaderEl.querySelectorAll('table'));\r\n                    if(tableEls) {\r\n                        const heights = tableEls.map((t: any) => t.offsetHeight);\r\n                        const maxHeight = Math.max(...heights);\r\n                        this.realHeaderHeight = maxHeight;\r\n                        gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';\r\n                    }\r\n\r\n                    if (fixedLeftHeader) {\r\n                        this.render2.setStyle(fixedLeftHeader, 'height', this.realHeaderHeight + 'px');\r\n                    }\r\n                    if (fixedRightHeader) {\r\n                        this.render2.setStyle(fixedRightHeader, 'height',  this.realHeaderHeight + 'px');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this.realHeaderHeight;\r\n    }\r\n\r\n    // åéååå\r\n    columnsChanged(reloadData = true, useColumnSettingWidth = null, rebuildFilterBar = true) {\r\n        const _useColumnSettingWidth = useColumnSettingWidth === null ? this.fitColumns : useColumnSettingWidth;\r\n\r\n        this.dfs.updateProperty('expandGroupRows', this.expandGroupRows);\r\n\r\n        this.checkColumnsType();\r\n\r\n        this._flatColumns();\r\n        this.headerHeightChange();\r\n\r\n        this.dfs.updateProperty('flatColumns', this.flatColumns);\r\n        this.dfs.updateColumns(this.columns, _useColumnSettingWidth, true);\r\n\r\n        // this.colGroup = this.dfs.getState().columnsGroup;\r\n        // å¨æååè®¡è¡\r\n        this.updateFooterData();\r\n\r\n        this.dgs.columnsChanged.emit({ scrollToLeft: reloadData, rebuildFilterBar });\r\n\r\n        if (reloadData) {\r\n\r\n            if (this['_COLUMNS_CHANAGED_TIMER_']) {\r\n                clearTimeout(this['_COLUMNS_CHANAGED_TIMER_']);\r\n            }\r\n\r\n            this['_COLUMNS_CHANAGED_TIMER_'] = setTimeout(() => {\r\n                this.refresh();\r\n            }, 60);\r\n        }\r\n\r\n        this.setCellStyle();\r\n    }\r\n\r\n    // åå¤´åå\r\n    private headerHeightChange() {\r\n        this.setHeaderHeight();\r\n        this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n    }\r\n\r\n    /** å¤æ­æ¯å¦å¨å¼¹åºççªå£ä¸­ï¼è¿åundefind è¯´ææ²¡æå¨å¼¹åºççªå£ï¼å¦åè§ä¸ºå½ååè¡¨å¨å¼¹åºçªå£ä½¿ç¨ */\r\n    inDialog() {\r\n        return this.el.nativeElement.closest('.modal-body');\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Init\r\n    /** åå§ç¼è¾å¨ä¸éªè¯å¨ */\r\n    private initEditorAndValidator() {\r\n        const Editors = this.inject.get<any[]>(GRID_EDITORS, []);\r\n\r\n        if (Editors.length) {\r\n            Editors.forEach(ed => {\r\n                this.editors[ed.name] = ed.value;\r\n            });\r\n        }\r\n        const _validators = this.inject.get<any[]>(GRID_VALIDATORS, []);\r\n        if (_validators && _validators.length) {\r\n            // _validators.forEach(vr => {\r\n            //     this.validators[vr.name] = vr.value;\r\n            // });\r\n            this.validators = _validators;\r\n        }\r\n    }\r\n\r\n    setPagerHeight() {\r\n        if (!this.useHtmlTable) {\r\n            if (!this.pagination) {\r\n                this.pagerHeight = 0;\r\n            } else {\r\n                this.pagerHeight = this.dgPager && this.dgPager.outerHeight || 40;\r\n            }\r\n        }\r\n    }\r\n\r\n    private initState() {\r\n        this.data = this.data || [];\r\n\r\n        let sta = {};\r\n        Object.keys(this).forEach((k: string) => {\r\n            if (!IgnoreProperties.includes(k)) {\r\n                sta[k] = this[k];\r\n            }\r\n        });\r\n\r\n        this.dfs.initState({ ...sta, fitColumns: this.fitColumns, fit: this.fit, groupField: this._groupField });\r\n        sta = null;\r\n    }\r\n\r\n    private setFitColumns(fitColumns = true) {\r\n        if (this.columns) {\r\n            this.dfs.fitColumns(fitColumns);\r\n        }\r\n    }\r\n\r\n    private setGridNewSizeWhenFit() {\r\n        const parent = this.el.nativeElement.parentElement;\r\n        if (parent) {\r\n            const { width, height } = parent.getBoundingClientRect();\r\n\r\n            const padding = this.getElementPadding(parent);\r\n            const border = this.getElementBorderWidth(parent);\r\n\r\n            let m = 'floor'\r\n            if (this.maxHeight && this.autoHeight) {\r\n                m = 'ceil';\r\n            }\r\n\r\n\r\n            this.width = Math[m](Math.floor(width) - border.left - border.right - padding.left - padding.right);\r\n            this.height = Math[m](Math.floor(height) - border.top - border.bottom - padding.top - padding.bottom);\r\n\r\n            if (this.maxHeight && this.autoHeight) {\r\n                this.height += 1;\r\n            }\r\n\r\n            if (!this.height) {\r\n                this.height = this.dfs.getState().height || 300;\r\n            }\r\n\r\n            if (!this.width) {\r\n                this.width = this.dfs.getState().width || 800;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    calculateGridSize(fit = true) {\r\n        if (this.useHtmlTable) {\r\n            return;\r\n        }\r\n\r\n        const setNewSize = () => {\r\n            let h = this.height;\r\n            if (this.useBlankWhenDataIsEmpty && (!this.data || !this.data.length)) {\r\n                h = this.emptyDataHeight + this.realHeaderHeight;\r\n\r\n                if (this.showRowGroupPanel) {\r\n                    h += this.rowGroupPanelHeight;\r\n                }\r\n\r\n                if (this.showFilterBar) {\r\n                    h += this.filterBarHeight;\r\n                }\r\n\r\n                if (this.showFooter && this.footerData['value'].length) {\r\n                    h += this.footerHeight;\r\n                }\r\n\r\n                if (this.pagination) {\r\n                    const ph = this.pagerHeight || 40;\r\n                    h += ph;\r\n                }\r\n            }\r\n\r\n\r\n            if (this.gridSize.height === h + 'px' && this.gridSize.width === this.width + 'px') {\r\n                return;\r\n            }\r\n\r\n            this.gridSize = { width: this.width + 'px', height: h + 'px' };\r\n            this.dfs.resize({ width: this.width, height: h });\r\n        }\r\n\r\n        if (fit) {\r\n            this.setGridNewSizeWhenFit();\r\n            if (this.width && this.height) {\r\n                this._isResized = true;\r\n                setNewSize();\r\n                \r\n                this._isResized = false;\r\n                if (!this.cd['destroyed']) {\r\n                    this.cd.detectChanges();\r\n                }\r\n            }\r\n        } else {\r\n            setNewSize();\r\n        }\r\n    }\r\n\r\n    private initBeforeEvents() {\r\n        if (!this.beforeSelect) {\r\n            this.beforeSelect = () => of(true);\r\n        }\r\n        if (!this.beforeUnselect) {\r\n            this.beforeUnselect = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeCheck) {\r\n            this.beforeCheck = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeUncheck) {\r\n            this.beforeUncheck = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeSortColumn) {\r\n            this.beforeSortColumn = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeEdit) {\r\n            this.beforeEdit = () => of(true);\r\n        }\r\n\r\n        if (!this.afterEdit) {\r\n            this.afterEdit = () => of(true);\r\n        }\r\n    }\r\n\r\n    trackByRows = (index: number, row: any) => {\r\n        if (row) {\r\n            return row[this.idField] || index;\r\n        }\r\n        return index;\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region å¿«æ·é®\r\n\r\n    private unbindMoveSelectRowEvent() {\r\n        if (this.documentRowKeydownHandler) {\r\n            this.documentRowKeydownHandler();\r\n            this.documentRowKeydownHandler = null;\r\n        }\r\n    }\r\n\r\n\r\n    private bindDocumentMoveSelectRowEvent() {\r\n        this.unbindMoveSelectRowEvent();\r\n        this.unbindDocumentEditListener();\r\n        this.documentRowKeydownHandler = this.render2.listen(document, 'keydown', (e: KeyboardEvent) => {\r\n            // e.preventDefault();\r\n            if (!this.isActived()) {\r\n                return;\r\n            }\r\n\r\n            // has loading\r\n            if (document.querySelectorAll('farris-loading').length) {\r\n                return;\r\n            }\r\n\r\n            if (e.target) {\r\n                const targetName = (e.target as any).nodeName;\r\n                if (this.ignoreTarget.indexOf(targetName) > -1) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (e.keyCode === 40 || e.keyCode === 38) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            switch (e.keyCode) {\r\n                case 40:\r\n                    this.selectNextRow();\r\n                    break;\r\n                case 38:\r\n                    this.selectPrevRow();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    private bindEditListenerInModal() {\r\n        // å¼¹çªä¸­äºä»¶å¤ç\r\n        if (Utils.hasDialogOpen()) {\r\n            const modalElement = this.inDialog();\r\n            if (modalElement) {\r\n                const _fmodal = modalElement.closest('.farris-modal');\r\n                if (_fmodal) {\r\n                    this.modalClickEvent = this.render2.listen(_fmodal, 'click', () => {\r\n                        this.endEditing();\r\n                        this.currentCell = null;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDocumentMouseDown = (event) => {\r\n        const dgrid = event.target.closest('.f-datagrid');\r\n\r\n        if (this.pending) {\r\n            return false;\r\n        }\r\n\r\n        if (!dgrid) {\r\n            this.activeDataGrid(false);\r\n        } else {\r\n            if (dgrid.id === this.id) {\r\n                if (this.isEditing() && (this.exitRowEditingWhenBodyClick || this.editMode == 'cell')) {\r\n                    this.endEditing();\r\n                }\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (Utils.hasDialogOpen()) {\r\n            const indlg = this.inDialog();\r\n            const currentTargetInDialog = event.target.closest('.modal-body');\r\n            if (indlg && currentTargetInDialog) {\r\n                if (indlg != currentTargetInDialog) {\r\n                    return;\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this.currentCell) {\r\n            if ( !this.currentCell.cellElement) {\r\n                return;\r\n            }\r\n\r\n            if (this.currentCell.isEditing) {\r\n\r\n                const zoneClick = event.target['__zone_symbol__clickfalse'];\r\n                const isBeBtn = event.target.closest('.bedesigner-toolbar');\r\n                const isOldBeBtn = event.target.className.indexOf('beEleGridButton') > -1;\r\n                const disableClickEvent = zoneClick && zoneClick.length && (event.target.closest('.f-section-in-mainsubcard') || isOldBeBtn || isBeBtn || event.target.closest('.datagrid-toolbars'));\r\n        \r\n                if (disableClickEvent && !dgrid) {\r\n                    event.target.style.pointerEvents = 'none';\r\n                    event.stopPropagation();\r\n                }\r\n\r\n                const _timer = disableClickEvent ? ((isBeBtn || isOldBeBtn)? 50: 200) : 0;\r\n                const stopEditingRowIndex = this.currentCell.rowIndex;\r\n                this.currentCell.cellElement.closeEdit().pipe(debounceTime(_timer)).subscribe(f => {\r\n                    if (this.currentCell && stopEditingRowIndex !== this.currentCell.rowIndex) {\r\n                        return;\r\n                    }\r\n                    if (f) {\r\n                        if (this.currentCell && this.currentCell.cellElement) {\r\n                            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n                            DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n                        }\r\n                        this.dfs.cancelSelectCell();\r\n                        this.unbindDocumentEditListener();\r\n                        this.currentCell = null;\r\n\r\n                        \r\n                        if (disableClickEvent) {\r\n                            zoneClick.forEach(n => {\r\n                                n.callback(event);\r\n                            });\r\n                            event.target.style.pointerEvents = 'auto';\r\n\r\n                            if (isBeBtn || isOldBeBtn) {\r\n                                this.app.tick();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            if (this.isEditing()) {\r\n                if(this.editMode == 'cell' || this.exitRowEditingWhenBodyClick) {\r\n                    this.endEditing();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private bindDocumentEditListener() {\r\n        this.unbindDocumentEditListener();\r\n /*\r\n        if (!this.documentCellClickHandler) {\r\n            this.bindEditListenerInModal();\r\n            this.documentCellClickHandler = (event) => {\r\n                if (this.pending) {\r\n                    return false;\r\n                }\r\n                if (this.currentCell) {\r\n                    if (Utils.hasDialogOpen()) {\r\n                        const indlg = this.inDialog();\r\n                        const currentTargetInDialog = event.target.closest('.modal-body');\r\n                        if (indlg && currentTargetInDialog) {\r\n                            if (indlg != currentTargetInDialog) {\r\n                                return;\r\n                            }\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    // DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n\r\n                    // if (this.currentCell.isEditing) {\r\n                    //     // this.dfs.endEditCell();\r\n                    //     this.currentCell.cellElement.closeEdit();\r\n                    // }\r\n                    // this.dfs.cancelSelectCell();\r\n                    // this.unbindDocumentEditListener();\r\n\r\n                    if (this.currentCell.isEditing) {\r\n                        // this.dfs.endEditCell();\r\n                        this.currentCell.cellElement.closeEdit().subscribe(f => {\r\n                            if (f) {\r\n                                DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n                                DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n                                this.dfs.cancelSelectCell();\r\n                                this.unbindDocumentEditListener();\r\n                                this.currentCell = null;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            this.docuemntCellClickEvents = this.render2.listen(document, 'click', this.documentCellClickHandler);\r\n        }\r\n*/\r\n        if (!this.documentCellKeydownHandler) {\r\n            this.documentCellKeydownHandler = (event) => {\r\n                if (!event.target.closest('.f-datagrid') && event.target.nodeName !== 'BODY') {\r\n                    return;\r\n                }\r\n\r\n                if (this.isActived()) {\r\n                    this.onKeyDownEvent(event);\r\n                }\r\n            };\r\n\r\n            this.documentCellKeydownEvents = this.render2.listen(document, 'keydown', this.documentCellKeydownHandler);\r\n        }\r\n    }\r\n\r\n    private unbindDocumentEditListener() {\r\n        if (this.documentCellClickHandler) {\r\n            this.docuemntCellClickEvents();\r\n            this.documentCellClickHandler = null;\r\n        }\r\n\r\n        if (this.documentCellKeydownHandler) {\r\n            this.documentCellKeydownEvents();\r\n            this.documentCellKeydownHandler = null;\r\n        }\r\n\r\n        if (this.modalClickEvent) {\r\n            this.modalClickEvent();\r\n            this.modalClickEvent = null;\r\n        }\r\n    }\r\n\r\n    private onKeyDownEvent(e: any) {\r\n        // if (e.ctrlKey || e.shiftKey || !this.editable) {\r\n        //     return;\r\n        // }\r\n\r\n        // if (!e.target.closest('.f-datagrid')) {\r\n        //     return;\r\n        // }\r\n\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        const keyCode = e.keyCode;\r\n\r\n\r\n        if (this.currentCell && !this.currentCell.isEditing) {\r\n            if ([13, 40, 37, 38, 39, 9].indexOf(keyCode) > -1) {\r\n                e.preventDefault();\r\n            }\r\n            switch (keyCode) {\r\n                case 32: // ç©ºæ ¼\r\n                    if (this.currentCell && this.currentCell.column.onSpaceHandler) {\r\n                        e.stopPropagation();\r\n                        this.currentCell.column.onSpaceHandler({ grid: this, cell: this.currentCell, event: e });\r\n                    }\r\n                    break;\r\n                case 13: // Enter\r\n                    if (this.currentCell) {\r\n                        const fn = this.currentCell.cellElement['editCell'];\r\n                        if (fn) {\r\n                            fn.apply(this.currentCell.cellElement);\r\n                        } else {\r\n                            if (this.currentCell.column.onEnterHandler) {\r\n                                e.stopPropagation();\r\n                                this.currentCell.column.onEnterHandler({ grid: this, cell: this.currentCell, event: e });\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 40: // â\r\n                    this.selectNextCell('down', e);\r\n                    break;\r\n                case 38: // â\r\n                    this.selectNextCell('up', e);\r\n                    break;\r\n                case 39: // â\r\n                    this.selectNextCell('right', e);\r\n                    break;\r\n                case 37: // â\r\n                    this.selectNextCell('left', e);\r\n                    break;\r\n                case 9: // Tab\r\n                    if (e.shiftKey) {\r\n                        this.selectNextCell('left', e);\r\n                    } else {\r\n                        this.selectNextCell('right', e);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private unsubscribes() {\r\n        this.subscriptions.forEach(ss => {\r\n            if (ss) {\r\n                ss.unsubscribe();\r\n                ss = null;\r\n            }\r\n        });\r\n\r\n        this.subscriptions = [];\r\n\r\n        if (this.docuemntCellClickEvents) {\r\n            this.docuemntCellClickEvents();\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Editing\r\n\r\n    isRowEditing() {\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            return false;\r\n        } else {\r\n            if (this.editMode === 'row') {\r\n                return this.selectedRow.editors && this.selectedRow.editors.length;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    isCellEditing() {\r\n        if (this.currentCell && this.editMode === 'cell') {\r\n            if (!this.currentCell.editor && this.currentCell.column && !this.currentCell.column.editorTemplate) {\r\n                this.currentCell.isEditing = false;\r\n                if (this.currentCell.cellRef) {\r\n                    this.currentCell.cellRef.isEditing = false;\r\n                }\r\n            }\r\n            return this.currentCell.isEditing;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isEditing() {\r\n        if (this.editMode === 'row') {\r\n            return this.isRowEditing();\r\n        } else {\r\n            return this.isCellEditing();\r\n        }\r\n    }\r\n\r\n    endEditing() {\r\n        if (this.editMode === 'row') {\r\n            this.endRowEdit();\r\n        } else if (this.editMode === 'cell') {\r\n            this.endCellEdit();\r\n        }\r\n    }\r\n\r\n    getEditors() {\r\n        return this.selectedRow.editors;\r\n    }\r\n\r\n    editCell(rowId: any, field: string, validation:  { isValid: boolean, message: string } = null) {\r\n        this.activeDataGrid();\r\n\r\n        const rowIndex = this.dfs.findRowIndex(rowId);\r\n        if (rowIndex > -1) {\r\n            this.endCellEdit();\r\n            const trId = TR_PREFIX + rowId;\r\n            // const trDom = this.el.nativeElement.querySelector('#' + trId);\r\n            const trDom = Utils.getTrDomById(trId, this.el.nativeElement);\r\n\r\n            let tdDom = null;\r\n            if (trDom) {\r\n                tdDom = trDom.querySelector(`[field=\"${field}\"]`);\r\n            }\r\n            const col = this.getColumn(field);\r\n            if (!tdDom && col.fixed) {\r\n                if (col.fixed === 'left') {\r\n                    // const trDomL = this.el.nativeElement.querySelector('#' + trId + '_fixedleft');\r\n                    const trDomL = Utils.getTrDomById(trId + '_fixedleft', this.el.nativeElement);\r\n                    tdDom = trDomL && trDomL.querySelector(`[field=\"${field}\"]`);\r\n                } else if (col.fixed === 'right') {\r\n                    // const trDomR = this.el.nativeElement.querySelector('#' + trId + '_fixedright');\r\n                    const trDomR = Utils.getTrDomById(trId + '_fixedright', this.el.nativeElement);\r\n                    tdDom = trDomR && trDomR.querySelector(`[field=\"${field}\"]`);\r\n                }\r\n            }\r\n\r\n            if (validation) {\r\n                this.formValidations = Object.assign( this.formValidations || {}, { [field]: validation});\r\n            }\r\n\r\n\r\n            if (tdDom && tdDom['editCell']) {\r\n                this.currentCell = null;\r\n                if (this['EDITCELL_TIMER']) {\r\n                    clearTimeout(this['EDITCELL_TIMER']);\r\n                }\r\n                this['EDITCELL_TIMER'] = setTimeout(() => {\r\n                    tdDom.editCell();\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    endCellEdit(event?: any) {\r\n        // document.body.click();\r\n        if (this.currentCell) {\r\n            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n            if (this.currentCell.isEditing) {\r\n                // this.dfs.endEditCell();\r\n                if (this.currentCell.cellEditorRef) {\r\n                    this.currentCell.cellEditorRef.hideCover();\r\n                }\r\n\r\n                const stopEdit = this.currentCell.cellElement.closeEdit();\r\n                if (stopEdit) {\r\n                    stopEdit.subscribe();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    editRow(rowId?: any) {\r\n        if (!this.editable || this.editMode !== 'row') { return false; }\r\n\r\n        if (rowId) {\r\n            this.selectRow(rowId);\r\n        }\r\n\r\n\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            this.writeConsole('Please select a row.');\r\n            return false;\r\n        }\r\n\r\n        const { index: rowIndex, data: rowData } = { ...this.selectedRow };\r\n\r\n        const beforeEditEvent = this.beforeEdit({ rowIndex, rowData, gridInstance: this });\r\n        if (!beforeEditEvent || !beforeEditEvent.subscribe) {\r\n            this.writeConsole('please return an Observable Type.');\r\n            return;\r\n        }\r\n\r\n        const trId = TR_PREFIX + rowId;\r\n        // const trDom = this.el.nativeElement.querySelector('#' + trId);\r\n        const trDom = Utils.getTrDomById(trId, this.el.nativeElement);\r\n\r\n        if (!this.selectedRow.dr) {\r\n            trDom.click();\r\n        }\r\n\r\n        beforeEditEvent.subscribe((flag: boolean) => {\r\n            if (flag) {\r\n                if (this.selectedRow.dr && this.selectedRow.dr.cells) {\r\n                    const cells = this.selectedRow.dr.cells.toArray();\r\n                    if (!cells || !cells.length) {\r\n                        return;\r\n                    }\r\n\r\n                    cells.forEach(cell => {\r\n                        if (cell.column.editor) {\r\n                            cell.isEditing = true;\r\n                        }\r\n                    });\r\n                    this.selectedRow.dr.cd.detectChanges();\r\n                    setTimeout(() => {\r\n                        const editors = cells.map(cell => {\r\n                            if (cell.cellEditor) {\r\n                                return cell.cellEditor.componentRef;\r\n                            }\r\n                        }).filter(editor => editor);\r\n                        this.selectedRow.editors = editors;\r\n\r\n                        if (editors && editors.length) {\r\n                            if (editors[0].instance.inputElement) {\r\n                                editors[0].instance.inputElement.focus();\r\n                            }\r\n                        }\r\n\r\n                        // ç»å®é®çäºä»¶\r\n                        this.bindRowEditorKeydownEvent();\r\n                        if (!this.cd['destroyed']) {\r\n                            this.cd.detectChanges();\r\n                        }\r\n                        this.beginEdit.emit({ rowIndex, rowData, gridInstance: this, editor: editors });\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    endRowEdit() {\r\n        if (!this.isRowEditing()) {\r\n            return { canEnd: true };\r\n        }\r\n\r\n        if (!this.selectedRow || this.selectedRow.index === -1) {\r\n            this.writeConsole('Please select a row.');\r\n            return;\r\n        }\r\n        const { index: rowIndex, data: rowData, dr } = { ...this.selectedRow };\r\n        const { editor: currentEditor, column } = { ...this.currentCell };\r\n        // blur\r\n        document.body.click();\r\n\r\n        if (this.pending) {\r\n            return { canEnd: false };\r\n        }\r\n\r\n\r\n        if (!dr.form) {\r\n            return {canEnd: true};\r\n        }\r\n\r\n        const rowForm = dr.form as FormGroup;\r\n        rowForm.markAsTouched();\r\n        if (rowForm.invalid && !this.endEditByInvalid) {\r\n            return { canEnd: false };\r\n        }\r\n\r\n        // afterEdit è¦ä¼ éç¸å³åæ°ï¼å¨ç¼è¾ç¶ææ¶ï¼ç§»å¨æ»å¨æ¡ä¼åºäº\r\n        const afterEditEvent = this.afterEdit(rowIndex, rowData, column, currentEditor);\r\n        if (!afterEditEvent || !afterEditEvent.subscribe) {\r\n            this.writeConsole('please return an Observable Type.');\r\n            return { canEnd: false };\r\n        }\r\n\r\n        afterEditEvent.subscribe((flag: boolean) => {\r\n            if (flag) {\r\n                this.closeAllCellEditor();\r\n\r\n                if (this.selectedRow.dr.form) {\r\n                    this.selectedRow.dr.rowData = Object.assign(this.selectedRow.dr.rowData, this.selectedRow.dr.form.value);\r\n                    this.dfs.updateRow(this.selectedRow.id, this.selectedRow.dr.rowData);\r\n                    this.cd.detectChanges();\r\n                }\r\n\r\n                let val = '';\r\n                if (currentEditor && currentEditor.formControl) {\r\n                    val = currentEditor.formControl.value;\r\n                }\r\n\r\n                this.endEdit.emit({ rowIndex, rowData, column, value: val });\r\n\r\n                this.dgs.refreshFooterData.emit();\r\n            }\r\n        });\r\n    }\r\n\r\n    cancelEdit(rowId: any, emit = true) {\r\n\r\n        if (!this.isEditing()) {\r\n            return;\r\n        }\r\n\r\n        this.closeAllCellEditor();\r\n        if (rowId) {\r\n            this.dfs.rejectChanges(rowId);\r\n        }\r\n\r\n        this.cd.detectChanges();\r\n        if (emit) {\r\n            this.cancelEdited.emit();\r\n        }\r\n    }\r\n\r\n    closeAllCellEditor() {\r\n        if (this.selectedRow && this.selectedRow.dr) {\r\n            const cells = this.selectedRow.dr.cells;\r\n            if (cells) {\r\n                cells.forEach(cell => cell.isEditing = false);\r\n                if (this.currentCell) {\r\n                    this.currentCell.isEditing = false;\r\n                }\r\n            }\r\n            this.selectedRow.editors = null;\r\n        }\r\n\r\n        // åæ¶é®çäºä»¶\r\n        this.unbindRowEditorKeydownEvent();\r\n    }\r\n\r\n    private rowEditTabKeydwonEvent(e: any) {\r\n        const keyCode = e.which || e.keyCode;\r\n\r\n        if (keyCode === 9) {  // tab\r\n            const td = e.target.closest('td');\r\n            const tr = e.target.closest('tr');\r\n            const nextTd = td.nextElementSibling;\r\n\r\n            const hasNoEditor = (_td: any) => {\r\n                return !_td.querySelector('input') && !_td.querySelector('textarea') && !_td.querySelector('select');\r\n            };\r\n\r\n            const editNextRow = () => {\r\n                const nextTr = tr.nextElementSibling;\r\n                if (nextTr) {\r\n                    nextTr.click();\r\n                    const nextRowid = nextTr.getAttribute('id').replace(TR_PREFIX, '');\r\n                    if (nextRowid) {\r\n                        this.editRow(nextRowid);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (nextTd) {\r\n                if (hasNoEditor(nextTd)) {\r\n                    const tds = tr.querySelectorAll('td');\r\n                    let tdIdx = -1;\r\n                    tds.forEach((t, i) => {\r\n                        if (t === nextTd) {\r\n                            tdIdx = i;\r\n                        }\r\n                    });\r\n                    let nextTrEdit = true;\r\n                    while (tdIdx < tds.length) {\r\n                        const _ntd = tds[tdIdx];\r\n                        if (hasNoEditor(_ntd)) {\r\n                            tdIdx++;\r\n                        } else {\r\n                            nextTrEdit = false;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (nextTrEdit) {\r\n                        editNextRow();\r\n                    }\r\n                }\r\n            } else {\r\n                editNextRow();\r\n            }\r\n        }\r\n\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private bindRowEditorKeydownEvent() {\r\n        if (!this.documentRowEditKeydownHanlder) {\r\n            this.documentRowEditKeydownHanlder = this.render2.listen(document, 'keydown', this.rowEditTabKeydwonEvent.bind(this));\r\n        }\r\n        this.documentClickEndRowEditHandler = this.render2.listen(document, 'click', (e: any) => {\r\n            if (this.pending) {\r\n                return false;\r\n            }\r\n            if (Utils.hasDialogOpen()) {\r\n                return;\r\n            }\r\n\r\n            if (this.isRowEditing()) {\r\n\r\n                // this.endRowEdit();\r\n            }\r\n        });\r\n    }\r\n\r\n    private unbindRowEditorKeydownEvent() {\r\n        // åæ¶é®çäºä»¶\r\n        if (this.documentRowEditKeydownHanlder) {\r\n            this.documentRowEditKeydownHanlder();\r\n            this.documentRowEditKeydownHanlder = null;\r\n        }\r\n\r\n        if (this.documentClickEndRowEditHandler) {\r\n            this.documentClickEndRowEditHandler();\r\n            this.documentClickEndRowEditHandler = null;\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Load Data\r\n\r\n\r\n    private _clientFilter(conditions: any, excuteLocaleFilter = false) {\r\n        // å®¢æ·ç«¯è¿æ»¤\r\n        if (excuteLocaleFilter) {\r\n            const allClientData = this.dfs.getData(true);\r\n            if (conditions && Object.keys(conditions).length) {\r\n                const _data = this.clientFilterService.executeFilter(allClientData, conditions);\r\n                this.dfs.loadFilterData(_data);\r\n            } else {\r\n                this.loadData(allClientData, false, true);\r\n            }\r\n        }\r\n\r\n        if (!this.virtualized) {\r\n            this.scrollToTop();\r\n        }\r\n\r\n        const _conditions = this.checkFilterValues(conditions);\r\n        this.filterChanged.emit(_conditions);\r\n    }\r\n\r\n    private smartFilterData(conditions: any) {\r\n        if (this.remoteFilter) { // æå¡å¨ç«¯è¿æ»¤\r\n            let entityFilters = this.clientFilterService.convertSmartFilter2EntityFilter(conditions);\r\n            entityFilters = this.checkFilterValues(entityFilters);\r\n            this.filterChanged.emit(entityFilters);\r\n        } else {\r\n            // å®¢æ·ç«¯è¿æ»¤\r\n            this._clientFilter(conditions, this.useDefaultFilter);\r\n        }\r\n\r\n    }\r\n\r\n    // smart fitler æ¸ç©ºæ¥è¯¢æ¡ä»¶\r\n    onClearSmartFilters($event?: any) {\r\n        this.smartFilterResult = { conditions: [], controlData: [] };\r\n        this.conditions = [];\r\n        this.smartFilterData([]);\r\n        this.smartFilterService.clearAll();\r\n        setTimeout(() => {\r\n            this.onFilterBarResize(0);\r\n        });\r\n    }\r\n\r\n    onRemoveSmartFilterItem($event) {\r\n        if ($event) {\r\n            const e = { ...$event };\r\n            e['labelCode'] = $event.fieldCode;\r\n            this.smartFilterService.removeCondition(e, true);\r\n        }\r\n    }\r\n\r\n    onFilterBarResize($event) {\r\n        this.filterBarHeight = $event;\r\n\r\n        const smartFilterEl = this.el.nativeElement.querySelector('.f-datagrid-column-drop-panel');\r\n        if (smartFilterEl && !$event) {\r\n            smartFilterEl.style.top = '0px';\r\n        }\r\n        this.dgs.showGridHeader.emit(this.realHeaderHeight);\r\n        this.dgs.smartFilterBarExpand.emit();\r\n    }\r\n\r\n    onSmartFilterChange($event) {\r\n        const { conditions, filterItem } = $event;\r\n\r\n        this.smartFilterService.filterConditionChanged({ conditions, controlData: filterItem, from: 'toolbar' });\r\n\r\n        // this.smartFilterData(conditions);\r\n        this.dgs.smartFilterDataChange.emit(filterItem);\r\n    }\r\n\r\n    filterData(conditions?: any) {\r\n        if (!conditions) {\r\n            conditions = this.conditions;\r\n        } else {\r\n            this.conditions = conditions;\r\n        }\r\n\r\n        this.scrollToTop();\r\n\r\n        if (this.enableSmartFilter) {\r\n            this.smartFilterData(conditions);\r\n            return;\r\n        }\r\n\r\n        if (this.remoteFilter) {\r\n            const entityFilters = this.clientFilterService.convert2FilterArray(conditions);\r\n            this.filterChanged.emit(entityFilters);\r\n        } else {\r\n            // å®¢æ·ç«¯è¿æ»¤\r\n            this._clientFilter(conditions, true);\r\n        }\r\n    }\r\n    /** æ¸ç©ºè¿æ»¤æ¡ä»¶ */\r\n    clearCondition() {\r\n        this.dgs.onClearFilter();\r\n\r\n        if (!this.enableFilterRow && !this.enableSmartFilter) {\r\n            return;\r\n        }\r\n\r\n        let isFilterChange = false;\r\n        if (this.conditions) {\r\n            if (Array.isArray(this.conditions)) {\r\n                isFilterChange = !!this.conditions.length;\r\n            } else {\r\n                isFilterChange = !!Object.keys(this.conditions).length;\r\n            }\r\n        }\r\n        \r\n        if (!isFilterChange) {\r\n            return;\r\n        }\r\n\r\n        this.conditions = this.enableSmartFilter ? [] : {};\r\n        this.clientFilterChanged = true;\r\n        this.filterData(this.conditions);\r\n    }\r\n\r\n    private _loadData(data?: any, keepSortState = false, keepScrollPosition = true) {\r\n        if (this.loading) {\r\n            this.closeLoading(!this.pagination);\r\n        }\r\n        data = data || [];\r\n\r\n        if (keepScrollPosition && this.scrollInstance && this.scrollInstance.instance) {\r\n            const lst = this.scrollInstance.instance.lastScrollTop;\r\n            const lsl = this.scrollInstance.instance.lastScrollLeft;\r\n            this.dfs.updateProperty('scrollInfo', { y: lst, x: lsl });\r\n        } else {\r\n            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });\r\n        }\r\n\r\n        if (this.pagination) {\r\n            this.dfs.setPagination(this.pageIndex, this.pageSize, this.total);\r\n            this.updatePagerOptions();\r\n\r\n            if (!this.cd['destroyed']) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n\r\n        // éæ°å è½½æ°æ®æ¶ï¼ç§»é¤ææç¼è¾å\r\n        // this.closeAllCellEditor();\r\n\r\n        this.data = data;\r\n        if (keepSortState) {\r\n            if (this.remoteSort) {\r\n                this.dfs.loadData(data);\r\n            } else {\r\n                this.dfs.loadData(data, true, true);\r\n            }\r\n        } else {\r\n            this.dfs.loadData(data);\r\n        }\r\n\r\n        this.setPagerHeight();\r\n        this.dgs.dataSourceChanged();\r\n    }\r\n\r\n\r\n    loadData(data?: any, keepSortState = false, keepScrollPosition = true) {\r\n        this._loadData(data, keepSortState, keepScrollPosition);\r\n    }\r\n\r\n    loadVirtualData(data: any) {\r\n        if (this.groupRows) {\r\n            this.writeConsole('if you using GROUPROWS, please set [virtualized]=\"false\" [virtualizedAsyncLoad]=\"false\"');\r\n            return;\r\n        }\r\n        if (this.virtualizedAsyncLoad) {\r\n            this.dgs.onLoadVirtualData(data);\r\n        }\r\n    }\r\n\r\n    fetchData(pageIndex, pageSize) {\r\n        if (this.restService) {\r\n            this.showLoading();\r\n            const params = { pageIndex, pageSize };\r\n            if (this.sortName) {\r\n                params['sortName'] = this.sortName;\r\n            }\r\n            if (this.sortOrder) {\r\n                params['sortOrder'] = this.sortOrder;\r\n            }\r\n\r\n            return this.restService.getData(this.url, params);\r\n        }\r\n        return of(undefined);\r\n    }\r\n\r\n    refresh() {\r\n        this.dfs.refresh();\r\n    }\r\n\r\n    reload() {\r\n        this.fetchData(1, this.pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.pageIndex = 1;\r\n                this.total = res.total;\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n    }\r\n\r\n    /** è·åå½åé¡µæ°æ® */\r\n    getRows() {\r\n        if (this.groupRows || this.virtualized) {\r\n            if (this.pagerOnServer) {\r\n                return this.ds.rows;\r\n            } else {\r\n                return this.currentPagerData;\r\n            }\r\n        } else {\r\n            if (this.pagerOnServer) {\r\n                return this.data;\r\n            } else {\r\n                return this.currentPagerData;\r\n            }\r\n        }\r\n    }\r\n\r\n    getGroupRow(groupRowId: string) {\r\n        const _allrows = (this.getRows() || []).filter(n => n[IS_GROUP_ROW_FIELD]);\r\n        const rowIndex = _allrows.findIndex(n => n.id == groupRowId);\r\n        return {\r\n            data: _allrows[rowIndex],\r\n            index: rowIndex\r\n        };\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Pagination\r\n\r\n    setPageIndex(pageIndex: number, detectChanges = true) {\r\n        this.pageIndex = pageIndex;\r\n        this.pagerOpts.currentPage = pageIndex;\r\n\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    // æ´æ°æ¯é¡µ\r\n    setPageList(pageList: number[], detectChanges = true) {\r\n        this.pageList = pageList;\r\n        this.pagerOpts.pageList = pageList;\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    onPageChange(pageIndex: number) {\r\n        if (this.lockPagination) {\r\n            return;\r\n        }\r\n\r\n        if (this.controlPaginationState) {\r\n            this.setPageIndex(pageIndex, false);\r\n        }\r\n\r\n\r\n        this.fetchData(pageIndex, this.pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n        this.focusRowIndex = -1;\r\n        this.scrollToTop();\r\n        this.pageChanged.emit({ pageIndex, pageSize: this.pageSize });\r\n    }\r\n\r\n    onPageSizeChange(pageSize: number) {\r\n        if (this.lockPagination) {\r\n            return;\r\n        }\r\n        this.focusRowIndex = -1;\r\n        this.scrollToTop();\r\n        this.pageSize = pageSize;\r\n        this.pagerOpts.itemsPerPage = pageSize;\r\n\r\n        this.fetchData(1, pageSize).subscribe(res => {\r\n            if (res) {\r\n                this.pageIndex = 1;\r\n                this.loadData(res.items);\r\n            }\r\n        });\r\n        this.pageSizeChanged.emit({ pageSize, pageIndex: this.pageIndex });\r\n    }\r\n\r\n    onRemoveSelectedItem(id: any) {\r\n        if (this.dfs.findRowIndex(id) > -1) {\r\n            this.unCheckRow(id);\r\n            this.cd.detectChanges();\r\n        } else {\r\n            this.unCheckRow(id, false);\r\n            this.checkValues = this.checkeds.map(r => r.id);\r\n        }\r\n    }\r\n\r\n    onClearSelectedItem($event) {\r\n        // this.clearAll();\r\n        if (this.selectOnCheck) {\r\n            this.selectValue = '';\r\n        }\r\n        this.clearCheckeds(true);\r\n    }\r\n    //#endregion\r\n\r\n    //#region Loading\r\n    showLoading() {\r\n        this.loading = true;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    closeLoading(detectChanges = true) {\r\n        this.loading = false;\r\n        if (detectChanges) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region Dom\r\n\r\n    private replacePX2Empty(strNum: string) {\r\n        if (strNum) {\r\n            return Number.parseInt(strNum.replace('px', ''), 10);\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    renderCustomCls(cls: any, dom: any) {\r\n        if (cls) {\r\n            if (cls[0] === '!') {\r\n                const _cls = cls.slice(1).split(' ').filter(c => c);\r\n                _cls.forEach(c => {\r\n                    if (c) {\r\n                        this.render2.removeClass(dom, c);\r\n                    }\r\n                });\r\n            } else {\r\n                cls.split(' ').filter(c => c).forEach(c => {\r\n                    if (c) {\r\n                        this.render2.addClass(dom, c);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    renderCustomStyle(cs: CustomStyle, dom: any, cssRuleText = null) {\r\n        if (!cs) {\r\n            return;\r\n        }\r\n        if (cs.cls) {\r\n            this.renderCustomCls(cs.cls, dom);\r\n        }\r\n\r\n        if (cs.style) {\r\n            if (!cssRuleText) {\r\n\r\n                Object.keys(cs.style).forEach(n => {\r\n                    if (n.toLowerCase() === 'color' && cs.style[n] && cs.style[n].indexOf('!important') === -1 ) {\r\n                        cs.style[n] = cs.style[n] + '!important';\r\n                    }\r\n                });\r\n\r\n                cssRuleText = `${this.customStyleKey()} #${dom.id} ${JSON.stringify(cs.style)}`;\r\n            }\r\n\r\n            this.dgs.appendCssRules([cssRuleText]);\r\n        }\r\n    }\r\n\r\n    renderCustomStyle2(cs: CustomStyle, dom: any, cssClassName: string) {\r\n        if (!cs) {\r\n            return;\r\n        }\r\n        if (cs.cls && dom) {\r\n            this.renderCustomCls(cs.cls, dom);\r\n        }\r\n\r\n        if (cs.style) {\r\n            Object.keys(cs.style).forEach(n => {\r\n                if ((n.toLowerCase().indexOf('background') > -1 || n.toLowerCase() === 'color') && cs.style[n] && cs.style[n].indexOf('!important') === -1 ) {\r\n                    cs.style[n] = cs.style[n] + '!important';\r\n                }\r\n            });\r\n\r\n            let cssRuleText = `${this.customStyleKey()} .${cssClassName} ${JSON.stringify(cs.style)}`;\r\n            if (cssClassName.indexOf(this.customStyleKey()) > -1) {\r\n                cssRuleText = `${cssClassName} ${JSON.stringify(cs.style)}`;\r\n            }\r\n\r\n            this.dgs.appendCssRules([cssRuleText]);\r\n        }\r\n    }\r\n\r\n    getBoundingClientRect(el: ElementRef) {\r\n        return el.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n    getElementPadding(el: HTMLElement) {\r\n        const style = getComputedStyle(el);\r\n        return {\r\n            top: this.replacePX2Empty(style.paddingTop),\r\n            left: this.replacePX2Empty(style.paddingLeft),\r\n            bottom: this.replacePX2Empty(style.paddingBottom),\r\n            right: this.replacePX2Empty(style.paddingRight)\r\n        };\r\n    }\r\n\r\n    getElementBorderWidth(el: HTMLElement) {\r\n        const style = getComputedStyle(el);\r\n        return {\r\n            top: this.replacePX2Empty(style.borderTopWidth),\r\n            bottom: this.replacePX2Empty(style.borderBottomWidth),\r\n            right: this.replacePX2Empty(style.borderRightWidth),\r\n            left: this.replacePX2Empty(style.borderLeftWidth)\r\n        };\r\n    }\r\n\r\n    formatData(field: any, data: any, formatter: any) {\r\n        const value = this.getFieldValue(field, data);\r\n        return this.colFormatSer.format(value, data, formatter);\r\n    }\r\n\r\n    getFieldValue(field, rowData) {\r\n        return Utils.getValue(field, rowData);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Select\r\n    private canOperateCheckbox() {\r\n        return this.multiSelect && this.showCheckbox;\r\n    }\r\n\r\n    findNextTd(nextColumn) {\r\n\r\n        if (!nextColumn) {\r\n            return null;\r\n        }\r\n\r\n        const rowid = TR_ID_PREFIX + this.selectedRow.id;\r\n        const leftTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedleft';\r\n        const rightTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedright';\r\n\r\n        let _tr = null;\r\n        let _td = null;\r\n\r\n        if (nextColumn.fixed === 'left') {\r\n            // _tr = document.querySelector(leftTrID);\r\n            _tr = Utils.getTrDomById(leftTrID, document);\r\n            if (_tr) {\r\n                _td = _tr.querySelector(`[field=\"${nextColumn.field}\"]`);\r\n            }\r\n        } else if (nextColumn.fixed === 'right' ) {\r\n            // _tr = document.querySelector(rightTrID);\r\n            _tr = Utils.getTrDomById(rightTrID, document);\r\n            if (_tr) {\r\n                _td = _tr.querySelector(`[field=\"${nextColumn.field}\"]`);\r\n            }\r\n        } else {\r\n            // _tr = document.querySelector(rowid);\r\n            _tr = Utils.getTrDomById(rowid, document);\r\n            if (_tr) {\r\n                _td = _tr.querySelector(`[field=\"${nextColumn.field}\"]`);\r\n            }\r\n        }\r\n\r\n        return _td;\r\n    }\r\n\r\n    /**\r\n     * ä¾æ®å½åå­æ®µæ¥è¯¢ä¸ä¸ªå­æ®µçTD DOM\r\n     * @param field å½åå­æ®µåç§°\r\n     * @param dir ç§»å¨æ¹å\r\n     * @returns TD element\r\n     */\r\n    findNextCell(field: string, dir: MoveDirection) {\r\n        let td = null;\r\n        if (this.currentCell && this.currentCell.cellElement) {\r\n            const col = this.dfs.getColumn(field);\r\n            const fixed = col.fixed || '';\r\n            // let cellIndex = this.dfs.getColumnIndex(field, fixed);\r\n            let cellIndex = this.colGroup.columns.findIndex(n => (n.id && n.id === col.id) || n.field === col.field);\r\n\r\n            // if (fixed === 'left' || this.fast) {\r\n            //     if (this.showCheckbox) {\r\n            //         cellIndex += 1;\r\n            //     }\r\n\r\n            //     if (this.showLineNumber) {\r\n            //         cellIndex += 1;\r\n            //     }\r\n            // }\r\n\r\n            const currCellEl = this.currentCell.cellElement;\r\n            const tdSelector = `[field=\"${field}\"]`;\r\n            if (dir === 'up') {\r\n                const prevTr = this.dgs.findNextTr(currCellEl.parentElement.previousElementSibling, 'up');\r\n                if (prevTr) {\r\n                    td = prevTr.querySelector(tdSelector);\r\n                }\r\n            } else if (dir === 'down') {\r\n                const nextTr = this.dgs.findNextTr(currCellEl.parentElement.nextElementSibling, 'down');\r\n                if (nextTr) {\r\n                    td = nextTr.querySelector(tdSelector);\r\n                }\r\n            } else if (dir === 'left') {\r\n                const nextColumn = this.colGroup.columns[cellIndex - 1];\r\n                if (nextColumn) {\r\n                    td = this.findNextTd(nextColumn);\r\n                }\r\n            } else if (dir === 'right') {\r\n                const nextColumn = this.colGroup.columns[cellIndex + 1];\r\n                if (nextColumn) {\r\n                    td = this.findNextTd(nextColumn);\r\n                }\r\n            }\r\n        }\r\n        return td;\r\n    }\r\n\r\n    selectNextCell(dir: MoveDirection, event: Event) {\r\n        const nextTd = this.findNextCell(this.currentCell.field, dir);\r\n\r\n        if (dir === 'up' && !nextTd) {\r\n            return;\r\n        }\r\n\r\n        if (nextTd && nextTd.className.indexOf('f-datagrid-cell-rownumber') == -1 && nextTd.className.indexOf('f-datagrid-cell-checkbox') == -1) {\r\n            if (event['code'] === 'Tab' && this.editable && this.editcellWhenTabKeydwon) {\r\n                nextTd['click'].apply(nextTd, [event]);\r\n            } else {\r\n                if (nextTd.selectCell) {\r\n                    if (this.selectionMode === 'default' ) {\r\n                        this.clearCheckeds();\r\n                    }\r\n                    nextTd['selectCell'](event, nextTd);\r\n                }\r\n            }\r\n            // nextTd['selectCell'](event, nextTd);\r\n            return nextTd;\r\n        } else {\r\n\r\n            const nextCol = this.colGroup.columns[0];\r\n            const tdSeletor = `td[field=\"${nextCol.field}\"]`;\r\n            const tr = this.currentCell.cellElement.parentElement;\r\n\r\n            let _next = tr.nextElementSibling;\r\n            if (dir === 'left') {\r\n                _next = tr.previousElementSibling;\r\n            }\r\n            if (!_next) {\r\n                return;\r\n            }\r\n\r\n            // const trDomId = _next.id.replace('_fixedleft','').replace('_fixedright','');\r\n            const trDomId = Utils.getRowIdByTr(_next);\r\n            const leftTrSelector = trDomId + '_fixedleft';\r\n\r\n            if (_next.id.indexOf('_fixedright') > -1) {\r\n                if (this.colGroup.leftFixed && this.colGroup.leftFixed.length) {\r\n                    // _next = document.querySelector(leftTrSelector);\r\n                    _next = Utils.getTrDomById(leftTrSelector, document);\r\n                }\r\n            }\r\n           \r\n            if (dir === 'left') {\r\n                if (_next.id.indexOf('_fixedleft') > -1) {\r\n                    // _next = document.querySelector(leftTrSelector);\r\n                    _next = Utils.getTrDomById(leftTrSelector, document);\r\n                }\r\n            }\r\n\r\n\r\n            const nextTd = _next.querySelector(tdSeletor);\r\n            if (nextTd && nextTd.selectCell) {\r\n                if (this.selectionMode === 'default' ) {\r\n                    this.clearCheckeds();\r\n                }\r\n                nextTd.selectCell(event, nextTd);\r\n            }\r\n\r\n            /*\r\n            const nextTr = this.dgs.findNextTr(_next, dir === 'left' ? 'up' : 'down');\r\n            if (nextTr && nextTr.tagName === 'TR') {\r\n                // nextTr.children.find(td => td.editCell).editCell();\r\n                let firstEditor = false;\r\n                let i = 0;\r\n                while (!firstEditor) {\r\n                    firstEditor = !!nextTr.children[i].selectCell;\r\n                    if (!firstEditor) {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (nextTr.children[i] && nextTr.children[i].selectCell) {\r\n                    if (this.selectionMode === 'default' ) {\r\n                        this.clearCheckeds();\r\n                    }\r\n                    nextTr.children[i].selectCell(event, nextTr.children[i]);\r\n                }\r\n            }\r\n            */\r\n        }\r\n    }\r\n\r\n    getRowIdByTr(tr: HTMLElement) {\r\n        if (tr && tr.className.indexOf('f-datagrid-group-row')>-1) {\r\n            return null;\r\n        }\r\n        // let id = tr.getAttribute('id');\r\n        let id = Utils.getRowIdByTr(tr);\r\n\r\n        if (id == null || id == undefined) {\r\n            return null;\r\n        }\r\n\r\n        // id = id.replace('row_', '').replace('_fixedright', '').replace('_fixedleft', '');\r\n\r\n        const rowInfo = this.dfs.findRow(id);\r\n        if (rowInfo) {\r\n            return {...this.dfs.findRow(id), id};\r\n        }\r\n        return null;\r\n    }\r\n\r\n    _beforeSelectRow$(index, data, id) {\r\n        const beforEventParam = {\r\n            rowIndex: index,\r\n            rowData: data,\r\n            gridInstance: this,\r\n            id: id,\r\n            dr: null\r\n        }\r\n        let b$ = of(true);\r\n\r\n        if (this.beforeSelect) {\r\n            const rowisSelected = this.dfs.isRowSelected(id);\r\n            if (!rowisSelected) {\r\n                const _b$ = this.beforeSelect(beforEventParam);\r\n                if (_b$ && _b$.subscribe) {\r\n                    b$ = _b$;\r\n                }\r\n            }\r\n        }\r\n        return b$;\r\n    }\r\n\r\n\r\n    selectNextRow() {\r\n        if (this.selectedRow) {\r\n            const tr = this.selectedRow.dr.el.nativeElement;\r\n            if (tr.nextElementSibling) {\r\n                const { id, data, index } = this.getRowIdByTr(tr.nextElementSibling);\r\n                if (id) {\r\n                    this._beforeSelectRow$(index, data, id ).subscribe((t) => {\r\n                        if (t) {\r\n                            this.selectRow(id, true);\r\n                        }\r\n                    });\r\n                }\r\n                // tr.nextElementSibling.click();\r\n            }\r\n        }\r\n    }\r\n    selectPrevRow() {\r\n        if (this.selectedRow) {\r\n            const tr = this.selectedRow.dr.el.nativeElement;\r\n            if (tr.previousElementSibling) {\r\n                // tr.previousElementSibling.click();\r\n                const { id, data, index } = this.getRowIdByTr(tr.previousElementSibling);\r\n                if (id) {\r\n                    this._beforeSelectRow$(index, data, id ).subscribe((t) => {\r\n                        if (t) {\r\n                            this.selectRow(id, true);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    removeCellSelectedCls() {\r\n        if (this.currentCell && this.currentCell.cellElement) {\r\n            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);\r\n            this.render2.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);\r\n        }\r\n\r\n        const selectedCell = this.el.nativeElement.querySelectorAll('.' + CELL_SELECTED_CLS);\r\n        if (selectedCell.length) {\r\n            selectedCell.forEach(n => {\r\n                this.render2.removeClass(n, CELL_SELECTED_CLS);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * éä¸­è¡\r\n     * @param id éä¸­è¡ID\r\n     * @param emit è§¦åselect äºä»¶\r\n     * @param toCurrentPosition æ»å¨æ¡å®ä½å°å½åéæ©ä¸­è¡\r\n     */\r\n    selectRow(id: any, emit = true, toCurrentPosition = false) {\r\n        if (this.selectedRow && this.selectedRow.id === id) {\r\n            if (emit) {\r\n                this.dfs.selectRecord(id);\r\n            }\r\n            \r\n            if (toCurrentPosition) {\r\n                this.scrollToCurrentRow();\r\n            }\r\n            return;\r\n        }\r\n\r\n        const _selectRow = () => {\r\n            \r\n            this.removeCellSelectedCls();\r\n\r\n            if (!this.enableSelectRow) {\r\n                return;\r\n            }\r\n\r\n            if (!this.multiSelect && this.showCheckbox) {\r\n                this.clearCheckeds(false, false);\r\n            }\r\n\r\n            if (this.multiSelect && this.selectionMode === 'default' && !this.enableMorePageSelect) {\r\n                this.clearAll();\r\n            }\r\n\r\n            if (id && (!this.selectedRow || this.selectedRow.id != id)) {\r\n\r\n                const row = this.dfs.findRow(id);\r\n                if (row && this.disableRow) {\r\n                    if (this.disableRow(row.data, row.index)) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (emit) {\r\n                    this.dfs.selectRecord(id);\r\n                } else {\r\n                    this.dfs.setSelectRow(id, emit);\r\n                    this.selectedRow = this.dfs.getCurrentRow();\r\n                    if (this.checkOnSelect) {\r\n                        this.checkRows([id]);\r\n                    }\r\n                    this.dgs.setSelecedRow.emit({ id, selected: true });\r\n                }\r\n            } else {\r\n                if (this.checkOnSelect) {\r\n                    this.checkRows([id]);\r\n                }\r\n            }\r\n\r\n            if (toCurrentPosition) {\r\n                this.scrollToCurrentRow();\r\n            }\r\n        }\r\n\r\n\r\n        if (this.isEditing()) {\r\n            if (this.editMode === 'cell') {\r\n                const stopEdit = this.currentCell.cellElement.closeEdit();\r\n                if (stopEdit) {\r\n                    stopEdit.subscribe(_selectRow);\r\n                }\r\n            } else {\r\n                this.endRowEdit();\r\n                _selectRow();\r\n            }\r\n        } else {\r\n            _selectRow();\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * æ»å¨æ¡æ»å¨å°å½åè¡çä½ç½®\r\n     */\r\n    scrollToCurrentRow() {\r\n        this.dgs.scrollToCurrentRow.next();\r\n    }\r\n\r\n    unSelectRow(id: any, emit = true) {\r\n        if (id) {\r\n            this.closeAllCellEditor();\r\n\r\n            if (this.currentCell && this.currentCell.rowId == id) {\r\n                this.cancelSelectCell();\r\n            }\r\n\r\n            if (emit) {\r\n                this.dfs.selectRecord(id, false);\r\n            } else {\r\n                this.dfs.setSelectRow(id, false);\r\n                this.selectedRow = null;\r\n                this.dgs.setSelecedRow.emit({ id, selected: false });\r\n            }\r\n        }\r\n    }\r\n\r\n    selectAllRows() {\r\n        if (this.multiSelect && this.enableSelectRow) {\r\n            this.dfs.selectAll();\r\n        }\r\n    }\r\n\r\n    cancelSelectCell() {\r\n        if (this.currentCell) {\r\n            if (this.currentCell.cellElement) {\r\n                this.currentCell.cellElement.cancelSelected();\r\n            }\r\n            if (!this.currentCell.isEditing) {\r\n                this.currentCell = null;\r\n                this.dfs.cancelSelectCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    clearSelections(excludeIds?: string[]) {\r\n        this.dfs.clearSelections(excludeIds);\r\n        this.selectedRow = null;\r\n        this.cancelSelectCell();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    checkRow(id: any, emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            if (emit) {\r\n                this.dfs.checkRecord(id);\r\n            } else {\r\n                this.checkRows([id]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** é©éè¡ï¼ä¸è§¦åéä¸­äºä»¶ */\r\n    checkRows(ids: any[], emit = false) {\r\n        if (ids && ids.length) {\r\n            this.dfs.setCheckedRows(ids, true);\r\n            this.dgs.setCheckedRows.next({ ids, checked: true });\r\n\r\n            if (this.selectionMode === 'default') {\r\n                this.dfs.updateProperty('selections', this.checkeds);\r\n            }\r\n\r\n            // this.cd.detectChanges();\r\n            if (emit) {\r\n                this.checkValues = this.checkeds.map(r => r.id);\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n\r\n            this.updateAllCheckboxStatus();\r\n        }\r\n    }\r\n\r\n    /** åæ¶é©éï¼ä¸è§¦åéä¸­äºä»¶ */\r\n    unCheckRows(ids: any[], emit = false) {\r\n        if (ids && ids.length) {\r\n            this.dfs.setCheckedRows(ids, false);\r\n            this.dgs.setCheckedRows.next({ ids, checked: false });\r\n            // this.cd.detectChanges();\r\n            if (emit) {\r\n                this.checkValues = this.checkeds.map(r => r.id);\r\n                this.checkValuesChange.emit(this.checkValues);\r\n                this.checkedChange.emit(this.checkeds);\r\n            }\r\n\r\n            this.updateAllCheckboxStatus();\r\n        }\r\n    }\r\n\r\n    checkAllRows(emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            this.dfs.checkAll();\r\n            this.dgs.checkAll.emit();\r\n            if (emit) {\r\n                this.checkAll.emit();\r\n            }\r\n        }\r\n    }\r\n\r\n    unCheckRow(id: any, emit = true) {\r\n        if (this.canOperateCheckbox()) {\r\n            if (this.currentCell && this.currentCell.rowId == id) {\r\n                this.cancelSelectCell();\r\n            }\r\n\r\n            if (emit) {\r\n                this.dfs.checkRecord(id, false);\r\n            } else {\r\n                this.unCheckRows([id]);\r\n            }\r\n\r\n            this.updateAllCheckboxStatus();\r\n        }\r\n    }\r\n    /** æ¸ç©ºé©éè¡ï¼é»è®¤åªæ¸ç©ºå½åé¡µçé©é\r\n     * clearAll: æ¸ç©ºææ é»è®¤ä¸º false; å¦åä»æ¸ç©ºå½åé¡µçé©éæ°æ®ã\r\n     */\r\n    clearCheckeds(clearAll = false, emitUnCheckAll = true) {\r\n        this.dfs.clearCheckeds(clearAll);\r\n        this.checkValues = [];\r\n        this.cancelSelectCell();\r\n        if (emitUnCheckAll) {\r\n            this.dgs.uncheckAll.emit();\r\n        }\r\n    }\r\n\r\n    clearAll() {\r\n        this.selectedRow = null;\r\n        this.checkValues = [];\r\n        this.dfs.clearAll();\r\n        this.dgs.uncheckAll.emit();\r\n        this.updateAllCheckboxStatus();\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Resize Column\r\n\r\n    private getResizeProxyPosLeft(e: MouseEvent) {\r\n        const target = e.target as any;\r\n        const dgRect = this.getBoundingClientRect(this.dgContainer);\r\n        const td = target.parentElement;\r\n        const tdLeft = td.getBoundingClientRect().left;\r\n        const deltaEdge = td.offsetWidth - (e.pageX - tdLeft);\r\n        this.resizeColumnInfo.proxyLineEdge = deltaEdge;\r\n        this.resizeColumnInfo.startWidth = td.offsetWidth;\r\n        this.resizeColumnInfo.startX = e.pageX;\r\n        this.resizeColumnInfo.left = tdLeft - dgRect.left - 1 + deltaEdge;\r\n        return e.pageX - dgRect.left - 1 + deltaEdge;\r\n    }\r\n\r\n    private toggleResizeProxy(show = true) {\r\n        let display = 'block';\r\n        if (!show) {\r\n            display = 'none';\r\n        }\r\n        this.render2.setStyle(this.resizeProxyBg.nativeElement, 'display', display);\r\n        this.render2.setStyle(this.resizeProxy.nativeElement, 'display', display);\r\n    }\r\n\r\n    onColumnResizeBegin(e: MouseEvent) {\r\n        if (this.resizeProxy) {\r\n            this.render2.setStyle(document.body, 'cursor', 'e-resize');\r\n            const proxy = this.resizeProxy.nativeElement;\r\n            const proxyPosLeft = this.getResizeProxyPosLeft(e);\r\n            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');\r\n\r\n            let top = 0;\r\n            if ((this.enableFilterRow || this.enableSmartFilter) && this.showFilterBar) {\r\n                top += this.filterBarHeight;\r\n            }\r\n\r\n            if (this.showRowGroupPanel) {\r\n                top += this.rowGroupPanelHeight;\r\n            }\r\n\r\n            this.render2.setStyle(proxy, 'top', `${top}px`);\r\n\r\n            if (!this.autoHeight) {\r\n                this.render2.setStyle(proxy, 'height', (this.height - this.pagerHeight) + 'px');\r\n            } else {\r\n                let bottomH = 0;\r\n                if (this.pagination) {\r\n                    bottomH += this.pagerHeight;\r\n                }\r\n                if (this.showFooter) {\r\n                    bottomH += this.footerHeight;\r\n                }\r\n                this.render2.setStyle(proxy, 'height', `calc(100% - ${bottomH}px)`);\r\n            }\r\n            this.toggleResizeProxy();\r\n        }\r\n    }\r\n\r\n    onColumnResize(e: MouseEvent) {\r\n        const proxy = this.resizeProxy.nativeElement;\r\n        const dgRect = this.getBoundingClientRect(this.dgContainer);\r\n        const proxyPosLeft = e.pageX - dgRect.left - 1 + this.resizeColumnInfo.proxyLineEdge;\r\n        if (proxyPosLeft - this.resizeColumnInfo.left > 20) {\r\n            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');\r\n        } else {\r\n            this.render2.setStyle(proxy, 'left', (this.resizeColumnInfo.left + 20) + 'px');\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    onColumnResizeEnd(e: MouseEvent, col: DataColumn) {\r\n        this.render2.removeStyle(document.body, 'cursor');\r\n        this.toggleResizeProxy(false);\r\n        this.resizeColumnInfo.proxyLineEdge = 0;\r\n\r\n        let newColWidth = this.resizeColumnInfo.startWidth + e.pageX - this.resizeColumnInfo.startX;\r\n\r\n        if (newColWidth < 20) {\r\n            newColWidth = 20;\r\n        }\r\n\r\n        if (col.width > newColWidth) {\r\n            const t = col.width - newColWidth;\r\n            if (!this.fitColumns && this.scrollInstance.elementRef.nativeElement.scrollLeft) {\r\n                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;\r\n                this.scrollInstance.scrollToX(moveLeft);\r\n            }\r\n        }\r\n\r\n        if (col.width != newColWidth) {\r\n            col.width = newColWidth;\r\n\r\n            if (!this.nowrap && this.showFooter) {\r\n                this.setFooterHeight();\r\n            }\r\n\r\n            if (this.useControlPanel && this.settingService) {\r\n                this.settingService.saveUserConfig(this.id).subscribe(() => {\r\n                    this.dfs.columnResizeEnd();\r\n                    this.dgs.columnResized.emit();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            this.dfs.columnResizeEnd();\r\n            this.dgs.columnResized.emit();\r\n\r\n            this.updateFixedColumnCssForFastMode(col);\r\n        }\r\n    }\r\n\r\n    /** è¿ååå®½ */\r\n    restituteColumnsSize() {\r\n        this.dfs.resizeColumns(true);\r\n        this.dgs.columnResized.emit();\r\n    }\r\n\r\n    /** ååæ ¼åå®¹èªéåºåå®½ */\r\n    sizeToContent(col: DataColumn, th: ElementRef) {\r\n        if (!this.AutoColumnWidthUseDblclick) {\r\n            return false;\r\n        }\r\n        let longestText = '';\r\n        const items = this.data;\r\n\r\n        for (let i = items.length - 1; i >= 0; i--) {\r\n            // TFS: 356964 20200203\r\n            let value = Utils.getValue(col.field, items[i]);\r\n            if (value !== 0) {\r\n                value = value || '';\r\n            }\r\n            let text = '' + value;\r\n            if (col.formatter && value !== undefined) {\r\n                text = this.colFormatSer.format(value, items[i], col.formatter);\r\n            }\r\n\r\n            if (Utils.getBLen(text) > Utils.getBLen(longestText)) {\r\n                longestText = text;\r\n            } else {\r\n                this.longTextArea.nativeElement.innerHTML = text;\r\n                const w1 = this.longTextArea.nativeElement.offsetWidth;\r\n                this.longTextArea.nativeElement.innerHTML = longestText;\r\n                const w2 = this.longTextArea.nativeElement.offsetWidth;\r\n\r\n                if (w1 > w2) {\r\n                    longestText = text;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.longTextArea.nativeElement.innerHTML = longestText;\r\n        const maxWidth = this.longTextArea.nativeElement.offsetWidth + 26;\r\n\r\n        this.longTextArea.nativeElement.innerHTML = th.nativeElement.innerText;\r\n        let thMinWidth = this.longTextArea.nativeElement.offsetWidth + 26;\r\n\r\n        if (col.sortable) {\r\n            thMinWidth += 24;\r\n        }\r\n\r\n        let newColWidth = (maxWidth > thMinWidth ? maxWidth : thMinWidth);\r\n        const colIndex = this.flatColumns.findIndex(c => c.field === col.field);\r\n        if (colIndex === this.flatColumns.length - 1) {\r\n            newColWidth += 6;\r\n        }\r\n\r\n        if (col.width > newColWidth) {\r\n            const t = col.width - newColWidth;\r\n            if (this.scrollInstance.elementRef.nativeElement.scrollLeft) {\r\n                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;\r\n                this.scrollInstance.scrollToX(moveLeft < 0 ? 0 : moveLeft);\r\n            }\r\n        }\r\n\r\n        if (col.width != newColWidth) {\r\n            col.width = newColWidth;\r\n            this.dfs.resizeColumns();\r\n            this.dgs.columnResized.emit();\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region Changes\r\n    getChanges() {\r\n        return this.dfs.getChanges();\r\n    }\r\n\r\n    acceptChanges() {\r\n        this.dfs.acceptChanges();\r\n    }\r\n\r\n    rejectChanges() {\r\n        this.dfs.rejectChanges();\r\n    }\r\n    //#endregion\r\n\r\n    //#region CRUD\r\n\r\n    appendRow(row: any) {\r\n        this.cancelEdit(null);\r\n        this.dfs.appendRow(row);\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.rowAppended.emit();\r\n    }\r\n\r\n    updateRow(rowId, newData: { [key: string]: any }) {\r\n        this.dfs.updateRow(rowId, newData);\r\n\r\n        // æ´æ°å½åæ°æ®æºä¸­å¯¹åºçè¡æ°æ®\r\n        this._updateRow(rowId, newData);\r\n\r\n        if (this.currentCell && this.currentCell.isEditing && newData) {\r\n            const { column, cellRef } = this.currentCell;\r\n            if (cellRef && column && column.field && column.editor && column.editor.type.toLowerCase() == 'input-group' && Utils.keysInData(column.field, newData)) {\r\n                const currendRowData = cellRef.rowData;\r\n                const val = this.commonUtils.getValue(column.field, currendRowData);\r\n                if (cellRef.formControl) {\r\n                    cellRef.formControl.patchValue(val);\r\n                }\r\n            }\r\n        }\r\n        // æ´æ°åè®¡è¡æ°æ®\r\n        this.updateFooterData()\r\n\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.rowUpdated.emit();\r\n\r\n        // å¯ç¨åå¹¶ååæ ¼ï¼åè®¸ç¼è¾æ¶ï¼åå¹¶æ°æ®ä¸åç¡®\r\n        if (this.mergeCell) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    private _updateRow(rowId, newData: { [key: string]: any }) {\r\n        const row = this.getRows().find((n) => {\r\n            return this.dfs.primaryId(n) === rowId;\r\n        });\r\n        if (row) {\r\n            if (newData) {\r\n                const keys = Object.keys(newData);\r\n                keys.forEach(field => {\r\n                    Utils.setValue(field, newData[field], row);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    refreshRow(rowId) {\r\n        const row = this.dfs.findRow(rowId);\r\n        if (row && row.data) {\r\n            this.dfs.rowUpdate$.emit(row);\r\n        } else {\r\n            this.writeConsole('Can not found row by id. id: ' + rowId);\r\n        }\r\n    }\r\n\r\n\r\n    deleteRow(rowId?: any) {\r\n        this.cancelEdit(rowId, false);\r\n        if (!rowId) {\r\n            if (this.selectValue) {\r\n                rowId = this.selectValue;\r\n            } else {\r\n                throw new Error(`å é¤è¡æ¶ä¸»é®æ è¯ID ä¸è½ä¸ºç©ºã`);\r\n            }\r\n        }\r\n        const deleteRow = this.dfs.deleteRow(rowId);\r\n        this.dataChange.emit(this.dfs.getData());\r\n        this.currentCell = null;\r\n        this.dfs.updateProperty('currentCell', null);\r\n        this.cd.detectChanges();\r\n        this.rowDeleted.emit(deleteRow);\r\n    }\r\n\r\n    validateRow() { }\r\n\r\n    insertRow() { }\r\n\r\n    //#endregion\r\n\r\n    //#region Scrolling\r\n\r\n    scrollToLeft() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToLeft(0, 200);\r\n        }\r\n    }\r\n\r\n    scrollToRight() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToRight(0, 200);\r\n        }\r\n    }\r\n\r\n    scrollToTop() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToTop(0, 100);\r\n            const scrollInfo = this.dfs.getState().scrollInfo;\r\n            if (scrollInfo) {\r\n                scrollInfo.y = 0;\r\n                this.dfs.updateProperty('scrollInfo', scrollInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    scrollToBottom() {\r\n        if (this.scrollInstance) {\r\n            this.scrollInstance.scrollToBottom(0, 100);\r\n        }\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private _setColumnReadonly(cols: DataColumn[], field: string, readonly = true) {\r\n        if (cols && cols.length && field) {\r\n            const col = cols.find(n => n.field === field);\r\n            if (col) {\r\n                col.readonly = readonly;\r\n            }\r\n        }\r\n    }\r\n\r\n    setColumnReadonly(field: string, readonly = true) {\r\n        this._setColumnReadonly(this.colGroup.leftFixed, field, readonly);\r\n        this._setColumnReadonly(this.colGroup.rightFixed, field, readonly);\r\n        this._setColumnReadonly(this.colGroup.normalColumns, field, readonly);\r\n    }\r\n\r\n    // æ¯å¦ä¸ºå¤è¡¨å¤´\r\n    isMultiHeader() {\r\n        return this.columns && this.columns.length > 1 && Array.isArray(this.columns[1]);\r\n    }\r\n\r\n    toggleVisibleColumn(fields: string[], visible = true) {\r\n        if (!this.isMultiHeader()) {\r\n            this.columns.forEach((cols: DataColumn[]) => {\r\n                fields.forEach(field => {\r\n                    const col = cols.find(c => c.field === field || c.id === field);\r\n                    if (col) {\r\n                        col.visible = visible;\r\n                    }\r\n                });\r\n            });\r\n        } else {\r\n            // å¤è¡¨å¤´\r\n            const allCols = flatten<DataColumn>(this.columns);\r\n\r\n            allCols.forEach(p => {\r\n                if (p.origianlColSpan === undefined) {\r\n                    p.origianlColSpan = p.colspan;\r\n                }\r\n            });\r\n\r\n            fields.forEach(field => {\r\n                const _col = allCols.find(col => col.field === field || col.id === field);\r\n                if (_col) {\r\n\r\n                    if (_col.visible === visible) {\r\n                        return;\r\n                    }\r\n\r\n                    _col.visible = visible;\r\n                    const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);\r\n                    const childs = DatagridColumnsHelper.getChildColumns(_col, allCols);\r\n                    childs.forEach(c => {\r\n                        c.visible = visible;\r\n                    });\r\n                    if (visible && childs.length) {\r\n                        _col.colspan = _col.origianlColSpan;\r\n                    }\r\n\r\n                    const _colspan = _col.colspan || 1;\r\n                    parents.forEach(p => {\r\n                        if (!visible) {\r\n                            p.colspan = p.colspan - _colspan;\r\n                        } else {\r\n                            const _childs = allCols.filter(n => n.parentId === p.id && n.visible);\r\n                            p.colspan = _childs.reduce((r, c) => {\r\n                                r = r + (c.colspan || 1);\r\n                                return r;\r\n                            }, 0);\r\n                        }\r\n\r\n                        p.visible = !!p.colspan;\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    getColumn(field: string) {\r\n        const allCols = flatten<DataColumn>(this.columns);\r\n        return allCols.find(n => n.field === field || n.id === field);\r\n    }\r\n\r\n    showColumn(field: string | string[], reload = true) {\r\n        if (typeof field === 'string') {\r\n            this.toggleVisibleColumn([field], true);\r\n        } else {\r\n            this.toggleVisibleColumn(field, true);\r\n        }\r\n        this.columnsChanged(reload);\r\n    }\r\n\r\n    hideColumn(field: string | string[], reload = true) {\r\n        if (typeof field === 'string') {\r\n            this.toggleVisibleColumn([field], false);\r\n        } else {\r\n            this.toggleVisibleColumn(field, false);\r\n        }\r\n        this.columnsChanged(reload);\r\n    }\r\n\r\n    updateColumn(field: string, columnObject: { [key: string]: any }, detectChange = true) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            let column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column = Object.assign(column, columnObject);\r\n            }\r\n        });\r\n\r\n        if (detectChange) {\r\n            this.columnsChanged();\r\n        }\r\n    }\r\n\r\n    setColumnFormatter(field: string, formatter: any, detectChange = true) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column.formatter = formatter;\r\n            }\r\n        });\r\n\r\n        if (detectChange) {\r\n            this.columnsChanged();\r\n        }\r\n    }\r\n\r\n    updateColumnFormatterOptions(field: string, formatterOptions: any, detectChange = true) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column && column.formatter) {\r\n                const colFormatter = column.formatter as any;\r\n                colFormatter.options = colFormatter.options || {};\r\n                colFormatter.options = Object.assign(colFormatter.options, formatterOptions || {});\r\n            }\r\n        });\r\n\r\n        if (detectChange) {\r\n            this.columnsChanged();\r\n        }\r\n    }\r\n\r\n    setColumnTitle(field: string, title: string, detectChange = true) {\r\n        this.columns.forEach((cols: DataColumn[]) => {\r\n            const column = cols.find(col => col.field === field);\r\n            if (column) {\r\n                column.title = title;\r\n            }\r\n        });\r\n\r\n        if (detectChange) {\r\n            this.columnsChanged();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æåº\r\n     * @param sortName æåºå­æ®µï¼å¦ï¼ 'name,age'\r\n     * @param sortOrder æåºæ¹å¼ï¼å¦ï¼'desc, asc'\r\n     */\r\n    sort(sortName?: string, sortOrder?: string) {\r\n        if (sortName === null || sortName === '' || sortOrder === null || sortOrder === '') {\r\n            this.clearSort();\r\n        } else {\r\n            if (sortName && sortOrder) {\r\n                // this.updateSortInfo(sortName, sortOrder);\r\n                this.sortName = sortName;\r\n                this.sortOrder = sortOrder;\r\n                this.dfs.setSortInfo(this.sortName, this.sortOrder);\r\n            }\r\n\r\n            if (!this.remoteSort) {\r\n                this.dfs.clientSort();\r\n            }\r\n            this.onColumnSorted();\r\n        }\r\n    }\r\n\r\n    clearSort() {\r\n        this.sortName = '';\r\n        this.sortOrder = '';\r\n        this.dfs.setSortInfo('', '');\r\n        if (!this.remoteSort) {\r\n            if (this.data && this.data.length) {\r\n                this.dfs.clearSort();\r\n            }\r\n        }\r\n        this.onColumnSorted();\r\n    }\r\n\r\n    onColumnSorted() {\r\n        let params = null;\r\n        if (this.sortName && this.sortOrder) {\r\n            const orders = this.sortOrder.split(',');\r\n            params = this.sortName.split(',').reduce((r, n, i) => {\r\n                r[n] = orders[i] || 'asc';\r\n                return r;\r\n            }, {});\r\n        }\r\n\r\n        if (!this.remoteSort) {\r\n            this.dfs.clientSort();\r\n        }\r\n\r\n        this.columnSorted.emit(params);\r\n    }\r\n\r\n    updateSortInfo(newSortName, newSortOrder) {\r\n        const sortName = this.sortName;\r\n        const sortOrder = this.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        const _sortFields = newSortName.split(',');\r\n        const _sortOrders = newSortOrder.split(',');\r\n\r\n\r\n        _sortFields.forEach((nField, nIndex) => {\r\n            const colOrder = _sortOrders[nIndex] || 'asc';\r\n            let newOrder = colOrder;\r\n            const i = sortFields.findIndex(n => n === nField);\r\n            if (i >= 0) {\r\n                const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';\r\n                newOrder = _order;\r\n                if (this.multiSort && newOrder === 'asc') {\r\n                    newOrder = undefined;\r\n                    sortFields.splice(i, 1);\r\n                    sortOrders.splice(i, 1);\r\n                } else {\r\n                    sortOrders[i] = _order;\r\n                }\r\n\r\n            } else {\r\n                if (this.multiSort) {\r\n                    sortFields.push(nField);\r\n                    sortOrders.push(colOrder);\r\n                } else {\r\n                    sortFields = [nField];\r\n                    sortOrders = [colOrder];\r\n                }\r\n            }\r\n        });\r\n\r\n        this.sortName = sortFields.join(',');\r\n        this.sortOrder = sortOrders.join(',');\r\n    }\r\n    /** åè®¾ç½® */\r\n    showControlPanel($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        const self = this;\r\n        if (this.useControlPanel && this.settingService) {\r\n            this.checkSettingHttp();\r\n            this.settingService.show(self);\r\n        }\r\n    }\r\n\r\n    checkSettingHttp() {\r\n        if (!this.settingService.httpRestService || !this.settingService.httpRestService.befRepository) {\r\n            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);\r\n            this.settingService.httpRestService = settingsHttp;\r\n        }\r\n    }\r\n\r\n    disableHeader(flag = true) {\r\n        this.dgs.disableHeader.emit(flag);\r\n    }\r\n\r\n    /** è·åç¨æ·ä¸ªæ§åè®¾ç½® */\r\n    private userProfileSetting(settings) {\r\n\r\n        const { sortInfo, viewColumns, groupField, columnFormat, expandGroupRows, multiHeaders  } = settings;\r\n        let _sortName, _sortOrder;\r\n        if (sortInfo) {\r\n            const { sortName, sortOrder } = sortInfo;\r\n            _sortName = sortName;\r\n            _sortOrder = sortOrder\r\n            if (sortName && sortName.length) {\r\n                this.sortName = sortName.join(',');\r\n                if (sortOrder) {\r\n                    this.sortOrder = sortOrder.join(',');\r\n                }\r\n            }\r\n\r\n            this['__sortInfo'] = sortInfo;\r\n        }\r\n\r\n        if (this.enableSetMultiHeaders && multiHeaders && (multiHeaders.viewCols|| []).length) {\r\n            const gridInitOptions = this.dfs['_state'].initialOptions;\r\n            const _cols = this.settingService.getMultiHeaderColumns(multiHeaders.viewCols, gridInitOptions);\r\n            if (_cols) {\r\n                this.columns = _cols;\r\n                this.addControlCol();\r\n            }\r\n        } else {\r\n            if (viewColumns && viewColumns.length) {\r\n                this.columns = this.columns.map(cols => {\r\n                    this.settingService.updateColumnFormat(cols, columnFormat, this);\r\n                    return this.settingService.newVisibleOrderColumns(cols, viewColumns, columnFormat, this);\r\n                });\r\n                this.addControlCol();\r\n            }\r\n        }\r\n        \r\n        this.columns.forEach(cols => {\r\n            cols.forEach(col => {\r\n                if (_sortName && _sortName.length) {\r\n                    const i = _sortName.indexOf(col.field);\r\n                    if (i > -1) {\r\n                        col.order = _sortOrder[i];\r\n                    }\r\n                }\r\n\r\n                if (!col.field || col.field.indexOf('farris-datagrid-column_') > -1) {\r\n                    col.filter = false;\r\n                }\r\n            });\r\n        });\r\n\r\n        if (this.groupRows && (groupField !== null && groupField !== undefined)) {\r\n            this.groupField = groupField;\r\n            this.expandGroupRows = expandGroupRows === undefined ? this.expandGroupRows: expandGroupRows;\r\n        }\r\n\r\n        this.settingService.setCurrentConfigs(settings);\r\n    }\r\n\r\n    // æ¯å¦ä¸ºå½åæ´»å¨çè¡¨æ ¼\r\n    private isActived() {\r\n        // å¤æ­gridæ¯å¦ä¸ºæ´»å¨ä¸å¯è§çï¼é¿åSPA ä¸å¤ä¸ªgridä¸èµ·è¿è¡ç¸å³çæä½ï¼æ¯å¦ä¸ä¸æ¹åé®ç§»å¨\r\n        return DomHandler.hasClass(this.dgContainer.nativeElement, this._active_datagrid_cls) && this.dgContainer.nativeElement.offsetParent;\r\n    }\r\n\r\n    // æ¸çæ æçDOM\r\n    private cleanDom() {\r\n        // æ¸ç TOOL-TIP\r\n        const tips = document.querySelectorAll('.datagrid-cell-tooltip');\r\n        if (tips && tips.length) {\r\n            tips.forEach(n => {\r\n                n.remove();\r\n            });\r\n        }\r\n    }\r\n\r\n    cellIsReadOnly(col: DataColumn, rowData) {\r\n        let readOnly = false;\r\n        if (this.disableRow) {\r\n            readOnly = this.disableRow(rowData);\r\n        }\r\n\r\n        if (!readOnly) {\r\n            if (col.readonly !== undefined) {\r\n                if (typeof col.readonly === 'boolean') {\r\n                    readOnly = col.readonly;\r\n                } else if (typeof col.readonly === 'function') {\r\n                    readOnly = col.readonly(rowData);\r\n                }\r\n            }\r\n        }\r\n        return readOnly;\r\n    }\r\n\r\n\r\n    private groupFieldChanged() {\r\n        this.columnsChanged();\r\n        if (this.settingService) {\r\n            this.checkSettingHttp();\r\n            this.settingService.saveUserConfig(this.id).subscribe();\r\n        }\r\n        this.groupFieldChange.emit({ newGroupField: this.groupField, grid: this });\r\n    }\r\n\r\n    removeGroupField(field: string) {\r\n        const fields = this.groupField.split(',');\r\n        const delIdx = fields.indexOf(field);\r\n        if (delIdx > -1) {\r\n            fields.splice(delIdx, 1).join(',');\r\n        }\r\n        this.groupField = fields.join(',');\r\n        this.toggleVisibleColumn([field], true);\r\n        this.groupFieldChanged();\r\n    }\r\n\r\n    clearAllGrouppingField($event) {\r\n        this.showLoading();\r\n        setTimeout(() => {\r\n            const fields = this.groupField.split(',');\r\n            this.groupField = '';\r\n            this.toggleVisibleColumn(fields, true);\r\n            this.groupFieldChanged();\r\n            this.closeLoading();\r\n        });\r\n    }\r\n\r\n    setGroupFields(groupFields) {\r\n        this.groupField = groupFields;\r\n        this.columnsChanged();\r\n    }\r\n\r\n    activeDataGrid(active = true) {\r\n        const grids = document.querySelectorAll('.f-datagrid.datagrid-active');\r\n        if (grids.length) {\r\n            grids.forEach(n => {\r\n                this.render2.removeClass(n, this._active_datagrid_cls);\r\n            });\r\n        }\r\n        if (active) {\r\n            this.render2.addClass(this.dgContainer.nativeElement, this._active_datagrid_cls);\r\n        }\r\n    }\r\n\r\n\r\n    onDatagridContainerFocus($event) {\r\n        if (!this.disabled) {\r\n            this.activeDataGrid();\r\n        }\r\n    }\r\n\r\n\r\n    private setShadowColumnForFastMode() {\r\n        if (this.fast) {\r\n            const fixedLeft = this.flatColumns.filter(n => n.fixed === 'left');\r\n            const fixedRight = this.flatColumns.filter(n => n.fixed === 'right');\r\n\r\n            if (fixedLeft && fixedLeft.length) {\r\n                let leftWidthTotal = 0;\r\n                if (this.showCheckbox) {\r\n                    leftWidthTotal += 36;\r\n                }\r\n                if (this.showLineNumber) {\r\n                    leftWidthTotal += this.lineNumberWidth;\r\n                }\r\n                fixedLeft.forEach((n, index) => {\r\n                    leftWidthTotal += index ? fixedLeft[index - 1].width : 0;\r\n                    n.left = leftWidthTotal;\r\n                });\r\n\r\n                fixedLeft[fixedLeft.length - 1]['leftShadowCol'] = true;\r\n\r\n                this.dfs.getColumn(fixedLeft[fixedLeft.length - 1].field)['leftShadowCol'] = true;\r\n            }\r\n\r\n            if (fixedRight && fixedRight.length) {\r\n                fixedRight[0]['rightShadowCol'] = true;\r\n                let rightWidthTotal = fixedRight.reduce((r, c) => {\r\n                    return r + c.width;\r\n                }, 0);\r\n\r\n                fixedRight.forEach((n, index) => {\r\n                    rightWidthTotal -= n.width;\r\n                    n.right = rightWidthTotal;\r\n                });\r\n\r\n                this.dfs.getColumn(fixedRight[0].field)['rightShadowCol'] = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    // ååå¯¹é½æ¹å¼æ ·å¼å¨æçæ\r\n    private setCellStyle() {\r\n\r\n        if (!this.flatColumns || !this.flatColumns.length) {\r\n            return;\r\n        }\r\n\r\n        const cssarr = [];\r\n\r\n        const  verticalAlign = (column) => {\r\n            let va = 'center';\r\n            switch (column.valign) {\r\n                case 'top':\r\n                    va = 'flex-start';\r\n                    break;\r\n                case 'bottom':\r\n                    va = 'flex-end';\r\n                    break;\r\n                default:\r\n                    va = 'center';\r\n                    break;\r\n            }\r\n            return va;\r\n        };\r\n\r\n        const horizontalAlign = (column) => {\r\n            let ha = 'flex-start';\r\n            if (column.align === 'right') {\r\n                ha = 'flex-end';\r\n            } else if (column.align === 'center') {\r\n                ha = 'center';\r\n            }\r\n            return ha;\r\n        };\r\n\r\n        this.setShadowColumnForFastMode();\r\n\r\n        this.flatColumns.forEach(col => {\r\n            const css = `${this.customStyleKey()} .cell-text-align__${col.field.replace(/\\./g, '_')} {align-items: ${verticalAlign(col)}, justify-content: ${horizontalAlign(col)}}`;\r\n            cssarr.push(css);\r\n\r\n            if (this.fast) {\r\n                if (col.fixed === 'left' || col.fixed === 'right') {\r\n                    let fixed = `${this.customStyleKey()} .f-datagrid-fast__fixed-${col.fixed}[field=\"${col.field}\"]{`;\r\n                    if (col.fixed === 'left') {\r\n                        fixed += `left: ${col.left}px}`;\r\n                    }\r\n\r\n                    if (col.fixed === 'right') {\r\n                        fixed += `right: ${col.right}px}`;\r\n                    }\r\n\r\n                    cssarr.push(fixed);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.dgs.appendCssRules(cssarr);\r\n    }\r\n\r\n    private updateFixedColumnCssForFastMode(col: DataColumn) {\r\n        if (this.fast) {\r\n            // update css.\r\n            const colIndex = this.flatColumns.findIndex(n => n.field === col.field);\r\n            const nextColumn = this.flatColumns[colIndex + 1];\r\n            this.setShadowColumnForFastMode();\r\n            if (nextColumn && nextColumn.fixed) {\r\n                const ruleName =  `${this.customStyleKey()} .f-datagrid-fast__fixed-${nextColumn.fixed}[field=\"${nextColumn.field}\"]`;\r\n                const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';\r\n                this.dgs.appendCssRules([stylecss]);\r\n            }\r\n        }\r\n    }\r\n\r\n    expandGroupRow(groupRowIndex: number) {\r\n        this.dgs.toggleGroupRow$.emit({ expand: true, groupRowIndex });\r\n    }\r\n\r\n    collapseGroupRow(groupRowIndex: number) {\r\n        this.dgs.toggleGroupRow$.emit({ expand: false, groupRowIndex });\r\n    }\r\n   \r\n\r\n    expandAllGroupRows() {\r\n        this.dgs.toggleAllGroupRows$.emit({ expand: true });\r\n    }\r\n\r\n    collapseAllGroupRows() {\r\n        this.dgs.toggleAllGroupRows$.emit({ expand: false });\r\n    }\r\n\r\n    // #382788 \r\n    private checkFilterValues(conditions: any) {\r\n        const _conditions = cloneDeep(conditions);\r\n        if (this.enableSmartFilter) {\r\n            const filterFields = Array.from(new Set(_conditions.map(n => n.FilterField)));\r\n            filterFields.forEach((n: string) => {\r\n                const col = this.dfs.getColumn(n);\r\n                if (col && col.dataType === 'datetime') {\r\n                    const dateFilters = _conditions.filter(f => f.FilterField === n);\r\n                    const contrlData = this.smartFilterService.controlData.find(ctrl => ctrl.labelCode == n);\r\n                    const val = dateFilters[0].Value;\r\n                    if (val.indexOf(':') === -1) {\r\n                        if (dateFilters.length === 1) {\r\n                            dateFilters[0].Value = val + ' 00:00:00';\r\n                            // éåºé´\r\n                            if (contrlData.value.single) {\r\n                                dateFilters[0].Compare = Compare.GreaterOrEqual;\r\n                                const less = cloneDeep(dateFilters[0]);\r\n                                less.Value = val + ' 23:59:59';\r\n                                less.Compare = Compare.LessOrEqual;\r\n                                const index = _conditions.findIndex(f => f.FilterField === n);\r\n                                _conditions.splice(index + 1, 0, less);\r\n                            } else {\r\n                                if (contrlData.value.endValue) {\r\n                                    dateFilters[0].Value = val + ' 23:59:59';\r\n                                }\r\n                            }\r\n                        } else {\r\n                            dateFilters[0].Value = dateFilters[0].Value + ' 00:00:00';\r\n                            dateFilters[1].Value = dateFilters[1].Value + ' 23:59:59';\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        return _conditions;\r\n    }\r\n        \r\n    getActionColumn() {\r\n        // æä½åid ç± åè¡¨æ è¯_caozuolie\r\n        return flatten(this.dfs.getState().initialOptions.designerColumns).find((n: any) => n.id && n.id.indexOf('_caozuolie') > -1);\r\n    }\r\n\r\n    hideActionColumn() {\r\n        const czl: any = this.getActionColumn();\r\n        if (czl) {\r\n            this.hideColumn(czl.field);\r\n        }\r\n    }\r\n\r\n    showActionColumn() {\r\n        const czl: any = this.getActionColumn();\r\n        if (czl) {\r\n            this.showColumn(czl.field);\r\n        }\r\n    }\r\n\r\n    /** \r\n     * æ¯æå¨å±è®¾ç½®è¡¨å¤´ãåè®¡è¡ãæ°æ®è¡ãè¡å·åå®½ãå¤éæ¡åå®½\r\n     * åé¡µæ¡é«åº¦å¯éè¿éç½®æ ·å¼å®ç°ï¼å¦ï¼\r\n     *  .f-datagrid-pager {\r\n            height: 60px!important;\r\n        }\r\n     * */ \r\n    applyNewSize(sizeConfig: SizeConfig) {\r\n        if (!sizeConfig || Array.isArray(sizeConfig) || typeof sizeConfig === 'boolean') {\r\n            this.writeConsole('ä¼ å¥çåæ°ç±»åä¸å¹éï¼The parameter type is incorrect!', 'warn');\r\n            return;\r\n        }\r\n\r\n        const _maxNum = 100;\r\n        \r\n        // é»è®¤å¼\r\n        const defautlValues: SizeConfig = {\r\n            'headerHeight': 35, \r\n            'footerHeight': 31, \r\n            'rowHeight': 31, \r\n            'checkboxColumnWidth': 36, \r\n            'lineNumberWidth': 36,\r\n            'filterRowHeight': 40 \r\n        };\r\n\r\n        // ææå±æ§åç§°\r\n        const props = ['headerHeight', 'footerHeight', 'rowHeight', \r\n                        'checkboxColumnWidth', 'lineNumberWidth', 'filterRowHeight'];\r\n        const keys = Object.keys(sizeConfig);\r\n\r\n        if (keys && keys.length) {\r\n            // æ¸çä¸æ¯æçå±æ§ï¼\r\n            keys.forEach(k => {\r\n                if (props.find(n => n === k)) {\r\n                    let v = sizeConfig[k];\r\n                    if (v == null || isNaN(v)) {\r\n                        delete sizeConfig[k];\r\n                    } else {\r\n                        if (typeof v === 'string' && !!parseInt(v, 10)) {\r\n                            v = parseInt(v, 10);\r\n                        } else if (typeof v === 'number') {\r\n                            v = Math.floor(v);\r\n                        }\r\n                        // å¼è®¾å¼\r\n                        if (isNaN(v) || v <= 0 || v < defautlValues[k]) {\r\n                            sizeConfig[k] = defautlValues[k];\r\n                        } else {\r\n                            sizeConfig[k] = v > _maxNum ? _maxNum: v;\r\n                        }\r\n                    }\r\n                } else {\r\n                    delete sizeConfig[k];\r\n                }\r\n            });\r\n        }\r\n\r\n        const propKeys = Object.keys(sizeConfig);\r\n\r\n        if (propKeys.length) {\r\n            this.useThemes = false;\r\n            Object.assign(this, sizeConfig);\r\n            this._footerRowHeight = this.footerHeight;\r\n\r\n            const minRowHeight = `min_row_height_${this.rowHeight}`;\r\n            this.dgs.removeCssRule(`${this.customStyleKey()} .${minRowHeight}`);\r\n            this.renderCustomStyle2({style: { \"min-height\": this.rowHeight + 'px', height:  this.rowHeight + 'px'}}, null, minRowHeight);\r\n\r\n            \r\n            const minFooterRowHeight = `min_footer_row_height_${this._footerRowHeight}`;\r\n            this.dgs.removeCssRule(`${this.customStyleKey()} .${minFooterRowHeight}`);\r\n            this.renderCustomStyle2({ style: { \"min-height\": `${this._footerRowHeight}px`,height:  this.rowHeight + 'px'}}, null, minFooterRowHeight);\r\n\r\n            this.dfs['updateState'](sizeConfig, false);\r\n            of(1).pipe(debounceTime(200)).subscribe(() => {\r\n                this.setHeaderHeight();\r\n                this.setRowHeight();\r\n                this.setFooterHeight();\r\n                this.columnsChanged();\r\n                if (!this.nowrap) {\r\n                    this.dgs.cellContentWrapChanged.emit();\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { cloneDeep } from 'lodash-es';\r\nimport { IdService } from '@farris/ui-common';\r\nimport {\r\n    Component, OnInit, ViewChild, TemplateRef, Renderer2, ElementRef,\r\n    NgZone, Injector, Input, OnDestroy, HostListener, Optional\r\n} from '@angular/core';\r\nimport { FilterPanelService, FilterPanelComponent } from '@farris/ui-filter-panel';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridSmartFilterService } from '../../services/datagrid-smart-filter.service';\r\n\r\n@Component({\r\n    selector: 'datagrid-smart-filter, [datagrid-smart-filter]',\r\n    templateUrl: 'datagrid-smart-filter.component.html',\r\n    providers: [\r\n        FilterPanelService\r\n    ]\r\n})\r\nexport class DatagridSmartFilterComponent implements OnInit, OnDestroy {\r\n    @Input() column;\r\n    @Input() filterData = null;\r\n    @Input() disabled = false;\r\n\r\n    @ViewChild('sort') sortTmp: TemplateRef<any>;\r\n\r\n    filterPanelRef: FilterPanelComponent;\r\n    private idService: IdService;\r\n    private smartFilterDataChanged$ = null;\r\n    private removeFilter$ = null;\r\n    private clearAllFilter$ = null;\r\n    private smartFilterEvents = [];\r\n    constructor(\r\n        private render: Renderer2, private el: ElementRef,\r\n        private zone: NgZone, private inject: Injector,\r\n        private filterPanelService: FilterPanelService,\r\n        private smartFilterSer: DatagridSmartFilterService,\r\n        @Optional() private dg: DatagridComponent\r\n        ) {\r\n            this.idService = this.inject.get(IdService, null);\r\n        }\r\n\r\n    ngOnInit() {\r\n\r\n        if (!this.removeFilter$) {\r\n            this.removeFilter$ = this.smartFilterSer.removeFilter.subscribe((e: any) => {\r\n                if (e && e.labelCode  === this.column.field) {\r\n                    this.filterData = null;\r\n                    this.render.removeClass(this.el.nativeElement, 'active');\r\n                }\r\n            });\r\n\r\n            this.smartFilterEvents.push(this.removeFilter$);\r\n        }\r\n\r\n        if (!this.clearAllFilter$) {\r\n            this.clearAllFilter$ = this.smartFilterSer.clearAllFilter.subscribe( () => {\r\n                this.filterData = null;\r\n                this.render.removeClass(this.el.nativeElement, 'active');\r\n            });\r\n\r\n            this.smartFilterEvents.push(this.clearAllFilter$);\r\n        }\r\n        if (this.dg && !this.smartFilterDataChanged$) {\r\n            this.smartFilterDataChanged$ = this.dg.dgs['smartFilterDataChange'].subscribe((e: any) => {\r\n                if (e && this.column.field === e.fieldCode) {\r\n                    this.filterData.value = e.value;\r\n                    this.filterData.control.single = e.control.single;\r\n                }\r\n            });\r\n            this.smartFilterEvents.push(this.smartFilterDataChanged$);\r\n        }\r\n\r\n        this.dg.dgs.clearFilter.subscribe(() => {\r\n            this.filterData = null;\r\n            this.dg.smartFilterResult = { controlData: [], conditions: [] };\r\n            this.smartFilterSer.clearAll();\r\n            this.render.removeClass(this.el.nativeElement, 'active');\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.filterPanelRef) {\r\n            this.filterPanelService.hidePanel();\r\n            this.filterPanelRef = null;\r\n        }\r\n\r\n        if (this.smartFilterEvents && this.smartFilterEvents.length) {\r\n            this.smartFilterEvents.forEach(n => {\r\n                n.unsubscribe();\r\n                n = null;\r\n            });\r\n\r\n            this.smartFilterEvents = [];\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private getFilterData() {\r\n        const { field, title } = this.column;\r\n        if (!this.filterData) {\r\n            this.filterData = this.smartFilterSer.controlData.find(n => n.id === field);\r\n        }\r\n\r\n        if (!this.filterData) {\r\n            this.filterData = {\r\n                id: field,\r\n                labelCode: field,\r\n                code: field,\r\n                name: title,\r\n                control: this.smartFilterSer.getColumnFilterData(this.column),\r\n                placeHolder: '',\r\n                value: {\r\n                    value: ''\r\n                }\r\n            };\r\n        }\r\n        // tfs 578285\r\n        if (this.filterData.value && this.filterData.control.controltype.indexOf('flexible') > -1) {\r\n            if (this.filterData.value.single) {\r\n                delete this.filterData.value.startValue;\r\n                delete  this.filterData.value.endValue;\r\n            } else {\r\n                this.filterData.value.value = '';\r\n            }\r\n        }\r\n\r\n        return cloneDeep(this.filterData);\r\n    }\r\n\r\n\r\n    private getPanelPosition($event) {\r\n        let x = $event.pageX - 33;\r\n        const y = $event.pageY +  9;\r\n        const targetRect = $event.target.getBoundingClientRect();\r\n        let moveArrow = 0;\r\n        if (window.innerWidth - x < 380) {\r\n            const i = 380 - (window.innerWidth - x);\r\n            x = x - i - 20;\r\n            moveArrow = targetRect.left - x;\r\n        }\r\n\r\n        return { x, y, moveArrow};\r\n    }\r\n\r\n    private hideFilterPanel() {\r\n        if (this.filterPanelRef) {\r\n            this.filterPanelService.hidePanel();\r\n            this.filterPanelRef = null;\r\n            if (!this.filterData ||  (this.filterData.control.controltype === 'bool-check' ? !this.filterData.value.value : !this.filterData.valueText)) {\r\n                this.render.removeClass(this.el.nativeElement, 'active');\r\n            }\r\n        }\r\n    }\r\n\r\n    private clearColumnFilter(e) {\r\n        this.filterData = null;\r\n        this.hideFilterPanel();\r\n        this.smartFilterSer.removeCondition(e);\r\n    }\r\n\r\n    showFilterPanel($event) {\r\n        $event.stopPropagation();\r\n\r\n        this.render.addClass(this.el.nativeElement, 'active');\r\n        const { x, y, moveArrow } = this.getPanelPosition($event);\r\n        this.filterPanelRef = this.filterPanelService.showPanel({\r\n            left: x,\r\n            top: y,\r\n            item: this.getFilterData(),\r\n            panelExtendTemplate: this.column.sortable ? this.sortTmp : null,\r\n            localStorageKey: 'smartfilter_' + this.dg.dgs.createConfigKey(this.dg.id),\r\n            target: $event.target\r\n        });\r\n\r\n        if (moveArrow) {\r\n            const arrowEl = this.filterPanelRef['el'].querySelector('.f-filter-panel-arrow');\r\n            if (arrowEl) {\r\n                this.render.setStyle(arrowEl, 'left', `${moveArrow}px`);\r\n            }\r\n        }\r\n\r\n        this.filterPanelRef.dataChange.subscribe(item => {\r\n            if (this.filterData && this.filterData.id == item.id) {\r\n                if (item.value && item.value.single !== undefined) {\r\n                    this.filterData.value = item.value;\r\n                    this.filterData.control.single = item.value.single;\r\n                }\r\n            }\r\n        })\r\n\r\n        this.filterPanelRef.hidePanel.subscribe(e => {\r\n            this.hideFilterPanel();\r\n        });\r\n\r\n        this.filterPanelRef.filterSubmit.subscribe(e => {\r\n            \r\n            if (e.filter && e.filter.length) {\r\n                this.filterData = e.item || null;\r\n                this.hideFilterPanel();\r\n                this.smartFilterSer.filterConditionChanged({ conditions: e.filter, controlData: e.item , from: 'panel'});\r\n            } else {\r\n                this.clearColumnFilter(e.item);\r\n            }\r\n        });\r\n\r\n        this.filterPanelRef.clearFilter.subscribe((e: any) => {\r\n            this.clearColumnFilter(e);\r\n        });\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick($event) {\r\n        $event.stopPropagation();\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n        this.showFilterPanel($event);\r\n        return false;\r\n    }\r\n\r\n    onSort($event, order) {\r\n        $event.stopPropagation();\r\n\r\n        if (this.column.order === order) {\r\n            this.column.order = '';\r\n        } else {\r\n            this.column.order = order;\r\n        }\r\n\r\n        const sortName = this.dg.sortName;\r\n        const sortOrder = this.dg.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        let newOrder =  this.column.order;\r\n        const i = sortFields.findIndex(n => n === this.column.field);\r\n        if (i >= 0) {\r\n            if (newOrder === '') {\r\n                newOrder = undefined;\r\n                sortFields.splice(i, 1);\r\n                sortOrders.splice(i, 1);\r\n            } else {\r\n                sortOrders[i] = newOrder;\r\n            }\r\n        } else {\r\n            if (this.dg.multiSort) {\r\n                sortFields.push(this.column.field);\r\n                sortOrders.push(newOrder);\r\n            } else {\r\n                sortFields = [this.column.field];\r\n                sortOrders = [newOrder];\r\n            }\r\n        }\r\n\r\n        this.hideFilterPanel();\r\n\r\n\r\n        this.dg.sortName = sortFields.join(',');\r\n        this.dg.sortOrder = sortOrders.join(',');\r\n        this.dg.dfs.setSortInfo(this.dg.sortName, this.dg.sortOrder);\r\n\r\n        this.dg.beforeSortColumn(this.dg.sortName, this.dg.sortOrder, this.dg).subscribe(() => {\r\n            this.dg.onColumnSorted();\r\n        });\r\n    }\r\n}\r\n","import { LocaleModule } from '@farris/ui-locale';\r\nimport { NgModule } from '@angular/core';\r\nimport { FilterPanelModule, FilterPanelComponent } from '@farris/ui-filter-panel';\r\nimport { DatagridSmartFilterComponent } from './datagrid-smart-filter.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        DatagridSmartFilterComponent\r\n    ],\r\n    imports: [\r\n        FilterPanelModule,\r\n        LocaleModule.forRoot(),\r\n    ],\r\n    exports: [\r\n        DatagridSmartFilterComponent\r\n    ]\r\n})\r\nexport class DatagridSmartFilterModule { }\r\n","import { DatagridComponent } from './../datagrid.component';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { Pipe, PipeTransform, Injector, Optional, ElementRef, LOCALE_ID } from '@angular/core';\r\nimport { Utils } from './utils';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { DataColumn } from '../types/data-column';\r\n\r\n@Pipe({name: 'formatCellData', pure: false})\r\nexport class FormatCellDataPipe implements PipeTransform {\r\n\r\n    private localeService: LocaleService;\r\n    private dataGrid: DatagridComponent;\r\n    private elRef: ElementRef;\r\n    private localeId = 'ZH-CHS';\r\n    constructor(private cfs: ColumnFormatService, @Optional() private injector?: Injector) {\r\n        this.localeId = this.injector.get(LOCALE_ID);\r\n    }\r\n\r\n    transform(col: any, rowData: any, groupFooter = false, footer = false): any {\r\n        if (rowData && col && col.field) {\r\n            const value = Utils.getValue(col.field, rowData);\r\n            if (col.editor && col.editor.options && col.editor.options.isPassword && !col.formatter) {\r\n                return  value ? '******' : '';\r\n            }\r\n\r\n            let formatterFn = col.formatter;\r\n            if (groupFooter) {\r\n                formatterFn = col.groupFooter ? col.groupFooter.formatter : undefined;\r\n            } else if (footer) {\r\n                formatterFn = col.footer ? col.footer.formatter : undefined;\r\n                if (typeof formatterFn === 'object') {\r\n                    if (!formatterFn.options) {\r\n                        const opts = { type: formatterFn.type, options: formatterFn };\r\n                        formatterFn = opts;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!formatterFn) {\r\n                let resoultStr = value;\r\n                if (col.isMultilingualField) {\r\n                    resoultStr = this.getMultilingualValue(value);\r\n                } else {\r\n                    if (value !== null && value !== undefined && value !== '0' && typeof value === 'string') {\r\n                        this.getDatagridInstance();\r\n                        if (value.indexOf('\\n') > -1) {\r\n                            // return value.replace(/\\n/g, '<br>');\r\n                            if (this.dataGrid && this.dataGrid.nowrap) {\r\n                                resoultStr = value.replace(/\\n/g, ' ');\r\n                            }\r\n                        }\r\n\r\n                        this.setFooterCellTitle(resoultStr, footer, col.field);\r\n                    }\r\n                    // value.replace(/ /g, '&ensp;');\r\n                }\r\n                return this.setPlaceHolderWhenEnableEditCellStyle(col, resoultStr, rowData, groupFooter || footer);\r\n            } else {\r\n                if (formatterFn) {\r\n                    if ( formatterFn.type === 'number') {\r\n                        if (!formatterFn.options || !Object.keys(formatterFn.options).length ) {\r\n                            formatterFn.options = {\r\n                                thousand: ',',\r\n                                precision: 2\r\n                            };\r\n                        }\r\n                    }\r\n                    if ( formatterFn.type === 'datetime') {\r\n                        if (formatterFn.options) {\r\n                            if (col.editor && col.editor.options) {\r\n                                const { dateRange, dateRangeDatesDelimiter } = col.editor.options;\r\n                                formatterFn.options = Object.assign({ dateRange, dateRangeDatesDelimiter }, formatterFn.options);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (formatterFn.type === 'timeago') {\r\n                        if (formatterFn.options ) {\r\n                            formatterFn.options.locale = formatterFn.options.locale || this.localeId;\r\n                        } else {\r\n                            formatterFn.options = {\r\n                                locale: this.localeId\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                this.getDatagridInstance();\r\n                let r = '';\r\n                if (this.dataGrid) {\r\n                    r = this.cfs.format(value, rowData, formatterFn, { utils: this.dataGrid.commonUtils, locale: this.localeId });\r\n                    this.setFooterCellTitle(r, footer, col.field);\r\n                    return this.setPlaceHolderWhenEnableEditCellStyle(col, r, rowData, groupFooter || footer);\r\n                } else {\r\n                    r = this.cfs.format(value, rowData, formatterFn, {locale: this.localeId });\r\n                    this.setFooterCellTitle(r, footer, col.field);\r\n                    return r;\r\n                }\r\n            }\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    private setFooterCellTitle(text: string, isFooter: boolean, field: string) {\r\n        if (text && isFooter && this.elRef) {\r\n            const span = this.elRef.nativeElement.querySelector(`td[field=\"${field}\"] .f-datagrid-footer-cell`);\r\n            if (span) {\r\n                span.title = text;\r\n            }\r\n        }\r\n    }\r\n\r\n    // è·åå¤è¯­æ°æ®\r\n    private getMultilingualValue(valObj) {\r\n        if (valObj && typeof valObj === 'object' && Object.keys(valObj).length > 0) {\r\n            if (this.injector) {\r\n                this.localeService = this.injector.get(LocaleService);\r\n            }\r\n            if (this.localeService) {\r\n                const localeId = this.localeService.localeId;\r\n                return Utils.getMultilingualValue(valObj, localeId);\r\n            } else {\r\n                return valObj['zh-CHS'];\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    // å¯ç¨æ è¯å¯ç¼è¾ååæ ¼æ¶ï¼åå®¹ä¸ºç©ºæ¶è®¾ç½®æç¤ºè¯­\r\n    private setPlaceHolderWhenEnableEditCellStyle(col, val, rowData, isFooter) {\r\n        this.getDatagridInstance();\r\n        if (this.dataGrid) {\r\n            /*\r\n            if (!this.dataGrid.editable || (val !== null && val !== undefined && val !== '') || isFooter || this.cellIsReadOnly(col, rowData)) {\r\n                if (this.elRef) {\r\n                    const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                    if (span && span.className.indexOf('cell-empty') > -1) {\r\n                        span.className = span.className.replace('cell-empty', ' ');\r\n                    }\r\n                }\r\n\r\n                return val;\r\n            }\r\n*/\r\n            if (this.dataGrid.enableEditCellStyle ) {\r\n\r\n                if (!this.dataGrid.editable || (val !== null && val !== undefined && val !== '') || isFooter || this.cellIsReadOnly(col, rowData)) {\r\n                    if (this.elRef) {\r\n                        const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                        if (span && span.className.indexOf('cell-empty') > -1) {\r\n                            span.className = span.className.replace('cell-empty', ' ');\r\n                        }\r\n                    }\r\n    \r\n                    return val;\r\n                }\r\n\r\n\r\n                if (this.elRef) {\r\n                    const span = this.elRef.nativeElement.querySelector('.cell-text-box');\r\n                    if (span && span.className.indexOf('cell-empty') === -1) {\r\n                        span.className = span.className + ' cell-empty';\r\n                    }\r\n                }\r\n                return Utils.getWhenEmptyText(col, this.localeId);\r\n            }\r\n\r\n            return val;\r\n        }\r\n\r\n        return val;\r\n    }\r\n\r\n    private getDatagridInstance() {\r\n        if (!this.dataGrid) {\r\n            this.dataGrid = this.injector.get(DatagridComponent, null);\r\n        }\r\n\r\n        if (!this.elRef) {\r\n            this.elRef = this.injector.get(ElementRef, null);\r\n        }\r\n    }\r\n\r\n    cellIsReadOnly(col: DataColumn, rowData) {\r\n        return this.dataGrid.cellIsReadOnly(col, rowData);\r\n    }\r\n}\r\n","\r\nimport { switchMap, delay, debounceTime, tap, takeUntil } from 'rxjs/operators';\r\nimport { Subscription, of, Subject } from 'rxjs';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 07:47:12\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-26 10:21:25\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport {\r\n    Component, OnInit, Input, ViewChild, Renderer2,\r\n    ElementRef, OnDestroy, ChangeDetectorRef, AfterViewInit, AfterViewChecked,\r\n    OnChanges, SimpleChanges, ChangeDetectionStrategy, NgZone, Injector, forwardRef, Inject, Optional, ApplicationRef, HostListener, Output, EventEmitter\r\n} from '@angular/core';\r\n\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { ScrollbarDirective } from '../../scrollbar/scrollbar.directive';\r\nimport { ColumnGroup } from '../../types';\r\nimport { SelectedRow, DataResult, ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD } from '../../services/state';\r\nimport { SCROLL_X_ACTION, SCROLL_Y_ACTION, SCROLL_X_REACH_START_ACTION, SCROLL_X_REACH_END_ACTION, TR_PREFIX, WORDWRAP_ROW_HEIGHT_CLS } from '../../types/constant';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { FormatCellDataPipe } from '../../utils/format-cell-data.pipe';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { ContextMenuItem } from '@farris/ui-context-menu';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Component({\r\n    selector: 'datagrid-body',\r\n    templateUrl: './body.component.html',\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatagridBodyComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit, AfterViewChecked {\r\n    // èªå¨é«åº¦æ¶ï¼ç¦ç¨çºµåæ»å¨æ¡\r\n    psConfig = { swipeEasing: false, minScrollbarLength: 15, handlers: ['click-rail', 'drag-thumb', 'wheel', 'touch'], suppressScrollY: this.dg.autoHeight && this.dg.maxHeight ? false: this.dg.autoHeight };\r\n\r\n    top: number;\r\n    height: number;\r\n    width: number;\r\n    colsWidth: number;\r\n    totalWidth: number;\r\n    leftFixedWidth: number;\r\n    rightFixedWidth: number;\r\n    rowHeight: number;\r\n    bodyStyle: any;\r\n    scrollTop = 0;\r\n    scrollLeft = 0;\r\n    deltaTopHeight = 0;\r\n    // wheelHeight = 0;\r\n    wheelWidth = 0;\r\n    private _fixedRightScrollLeft = 0;\r\n    get fixedRightScrollLeft() {\r\n        return this._fixedRightScrollLeft;\r\n    }\r\n    set fixedRightScrollLeft(val) {\r\n        this._fixedRightScrollLeft = val;\r\n    }\r\n\r\n    maxScrollLeft = 0;\r\n    showRightShadow = false;\r\n    @Input() footerHeight = 0;\r\n    @Input() canvasWidth;\r\n    @Input() columnsGroup: ColumnGroup;\r\n    // èæå è½½\r\n    @Input() topHideHeight = 0;\r\n    @Input() bottomHideHeight = 0;\r\n\r\n    @Input() startRowIndex = 0;\r\n    @Input() data: any;\r\n\r\n    @Output() dataChange = new EventEmitter();\r\n\r\n    @Input() scrollBarMode = 'auto';\r\n    @Input() contextMenuItems: ContextMenuItem[];\r\n\r\n    @Input() checkedRows = [];\r\n\r\n    /** æ§è½ä¼åçï¼é»è®¤ä¸º false */\r\n    @Input() fast = false;\r\n\r\n\r\n    @ViewChild('ps') ps?: ScrollbarDirective;\r\n    @ViewChild('mainRows') tableRowsCmp: any;\r\n    @ViewChild('rightRows') rightRowsCmp: any;\r\n    @ViewChild('fixedLeft') fixedLeftEl: ElementRef;\r\n    @ViewChild('fixedRight') fixedRightEl: ElementRef;\r\n    @ViewChild('main') mainArea: ElementRef;\r\n    @ViewChild('viewScrollContainer') viewScrollContainer: ElementRef;\r\n\r\n\r\n    visibleContextMenus = [];\r\n    currentRowId = undefined;\r\n\r\n    private _hoverRowIndex = -1;\r\n    get hoverRowIndex(): number {\r\n        return this._hoverRowIndex;\r\n    }\r\n    set hoverRowIndex(rowIdx: number) {\r\n        this._hoverRowIndex = rowIdx;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    get selectedRows() {\r\n        return this.dg.selections;\r\n    }\r\n\r\n    private gridSizeSubscribe: Subscription;\r\n    private columnResizeSubscribe: Subscription;\r\n    private onDataSourceChangeSubscribe: Subscription;\r\n    private selectRowSubscribe: Subscription;\r\n    private unselectRowSubscribe: Subscription;\r\n    private selectAllSubscribe: Subscription;\r\n    private checkRowSubscribe: Subscription;\r\n    private clearSelectionsSubscribe: Subscription;\r\n    private checkAllSubscribe: Subscription;\r\n    private uncheckRowSubscribe: Subscription;\r\n    private clearCheckedsSubscribe: Subscription;\r\n\r\n    private subscriptions = [];\r\n\r\n    public dfs: DatagridFacadeService;\r\n    public dgs: DatagridService;\r\n    public ngZone: NgZone;\r\n    public render: Renderer2;\r\n\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    private viewportH;\r\n    viewportW;\r\n    canvasHeight;\r\n    private minRowBuffer = 3;\r\n    private vScrollDir = 1;\r\n    private rowsCache = {};\r\n    private lastRenderedScrollTop = 0;\r\n    private lastRenderedScrollLeft = 0;\r\n    prevScrollTop = 0;\r\n    prevScrollLeft = 0;\r\n    rows = [];\r\n    blankTopHeight = 0;\r\n    blankBottomHeight = 0;\r\n\r\n    //////////////////////////////////////////////////////////////////////////\r\n\r\n    get scrollbarXHeight() {\r\n        if (this.dg && this.ps && this.ps.instance) {\r\n            const h = this.dg.scrollBarShowMode === 'allways' && this.ps.instance['scrollbarXActive'] ? 22 : 0;\r\n            if (this.ps.instance['scrollbarYActive'] && h) {\r\n                return h + 18; // + (this.dg.showScrollArrow && this.ps.instance['scrollbarYActive'] ? 18 : 0);\r\n            }\r\n\r\n        }\r\n    }\r\n    get scrollbarYWidth() {\r\n        if (this.dg && this.ps && this.ps.instance) {\r\n            return this.dg.scrollBarShowMode === 'allways' && this.ps.instance['scrollbarYActive'] && this.showRightShadow ? 18 : 0;\r\n        }\r\n    }\r\n\r\n    cellContentFormatter: FormatCellDataPipe = null;\r\n\r\n    // å½å¯ç¨å¤éä¸åè®¸å¤éä¸­ï¼åè¡¨ä¸è½ç¼è¾æ¶ï¼åéä¸­åç¦æ­¢è§¦åbody çclick äºä»¶\r\n    private __triggerBodyClickEvent = true;\r\n    private destroy$ = new Subject();\r\n    private _onMouseClick = null;\r\n    private _scrollTimer: any = 0;\r\n    private _scrollXTimer: any = 0;\r\n    private ro: ResizeObserver | null = null;\r\n    private resizeObserverTimer: any = 0;\r\n\r\n    private _clickCellWeakMap = new WeakMap();\r\n\r\n    constructor(\r\n        private injector: Injector,\r\n        private app: ApplicationRef,\r\n        @Optional() public dg: DatagridComponent,\r\n        private cd: ChangeDetectorRef, private el: ElementRef\r\n    ) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.render = this.injector.get(Renderer2);\r\n\r\n        const columnFormatService = this.injector.get(ColumnFormatService);\r\n        this.cellContentFormatter = new FormatCellDataPipe(columnFormatService, this.injector);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n        this.listenSubjects();\r\n        this.dg.scrollInstance = this.ps;\r\n        const s1 = this.dgs.showGridHeader.subscribe(headerHeight => {\r\n            this.updateContainerSize(headerHeight);\r\n        });\r\n        this.subscriptions.push(s1);\r\n\r\n        const s10 = this.dgs.footerPositionChanged.subscribe(() => {\r\n            this.updateContainerSize();\r\n        });\r\n        this.subscriptions.push(s10);\r\n\r\n        const s2 = this.dgs.rowHeightChanged.subscribe(() => {\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(s2);\r\n\r\n        const s3 = this.dfs.clientSort$.subscribe(() => {\r\n            this.checkScrollbarPosition(true);\r\n            this.cd.detectChanges();\r\n            // this.dg.columnSorted.emit();\r\n        });\r\n        this.subscriptions.push(s3);\r\n       \r\n        const s5 = this.dg.dgs.columnsChanged.pipe(\r\n            delay(50)\r\n        ).subscribe((e: any) => {\r\n            if (e && e.scrollToLeft) {\r\n                this.ps.elementRef.nativeElement.scrollTo(0, 0);\r\n                this.ps.scrollToLeft(0, 100);\r\n            }\r\n        });\r\n        this.subscriptions.push(s5);\r\n       \r\n        this.viewScrollContainer.nativeElement.addEventListener('click', this._onMouseClick = (e) => {\r\n            this.onMouseClick(e);\r\n        });\r\n\r\n        if (!this.dg.nowrap) {\r\n            this.dgs.dataloaded.subscribe(() => {\r\n                this.updateRowHeight();\r\n            });\r\n        }\r\n    }\r\n\r\n    private updateContainerSize(headerHeight?: any) {\r\n        const hh = headerHeight || this.dg.realHeaderHeight;\r\n        this.setPositionTop(hh);\r\n        this.height = this.dg.height - this.top;\r\n        this.bodyStyle = this.getBodyStyle();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.bodyStyle = this.getBodyStyle();\r\n            this.dfs.setCurrentPageData(changes.data.currentValue);\r\n\r\n            const isDiffrentDataSource = !!changes.data.currentValue.filter(n => !n['__group__']).map(n => n.id).filter(n => {\r\n                return !changes.data.previousValue.filter(n => !n['__group__']).find(p => p.id === n)\r\n            }).length;\r\n\r\n            const isSameLength = changes.data.currentValue.filter(n => !n['__group__']).length >= changes.data.previousValue.filter(n => !n['__group__']).length;\r\n            this.onDataChanged(isSameLength, isDiffrentDataSource);\r\n\r\n            if (!changes.data.currentValue || !changes.data.currentValue.length) {\r\n                setTimeout(() => {\r\n                    this.setPositionTop(this.dg.realHeaderHeight);\r\n                });\r\n            }\r\n        }\r\n\r\n        if (changes.footerHeight !== undefined && !changes.footerHeight.isFirstChange()) {\r\n            this.bodyStyle = this.getBodyStyle();\r\n        }\r\n\r\n        if (changes.scrollBarMode !== undefined && !changes.scrollBarMode.isFirstChange()) {\r\n            if (this.ps && this.ps.instance && this.scrollBarMode === 'allways' && this.ps.instance.scrollbarYActive) {\r\n                this.rightFixedWidth += this.showRightShadow ? 18 : 0;\r\n            } else {\r\n                this.rightFixedWidth = this.columnsGroup.rightFixedWidth;\r\n            }\r\n             \r\n            if (this.dg.scrollBarShowMode === 'allways' && this.ps && this.ps.instance && this.ps.instance.scrollbarXActive) {\r\n                this.blankBottomHeight += 22;\r\n            }\r\n        }\r\n\r\n        if (changes.showScrollArrow && !changes.showScrollArrow.isFirstChange()) {\r\n            this.ps && this.ps.update();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        this.cellContentFormatter = null;\r\n        this.dg.scrollInstance = null;\r\n        this.destroySubscriptions();\r\n        this.viewScrollContainer.nativeElement.removeEventListener('click', this._onMouseClick);\r\n\r\n        if (this.ro) {\r\n            this.ro.unobserve(this.viewScrollContainer.nativeElement);\r\n            this.ro.disconnect();\r\n        }\r\n\r\n        if (this.resizeObserverTimer) {\r\n            clearTimeout(this.resizeObserverTimer);\r\n        }\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ro = new ResizeObserver((e) => {\r\n            if (this.viewScrollContainer.nativeElement.offsetParent) {\r\n                if (this.resizeObserverTimer) {\r\n                    clearTimeout(this.resizeObserverTimer);\r\n                }\r\n                this.resizeObserverTimer = setTimeout(() => {\r\n                    this.updateCanvasHeight();\r\n                    if (this.scrollBarMode === 'allways') {\r\n                        this.ps.update();\r\n                    }\r\n                    // this.setFixedRightWidth();\r\n                    this.cd.detectChanges();\r\n                    this.dgs.scrollbarUpdate.emit({ scrollbarRef: this.ps.instance, rightWidth: this.rightFixedWidth, showRightShadow: this.showRightShadow });\r\n                }, 100);\r\n            }\r\n        });\r\n\r\n        this.ro.observe(this.viewScrollContainer.nativeElement);\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n    }\r\n\r\n    private setPositionTop(headerHeight: number) {\r\n        this.top = headerHeight;\r\n        \r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            this.top += this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            this.top += this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        if (this.dg.showFooter && (this.dg.footerPosition === 'top' || this.dg.footerPosition === 'both')) {\r\n            // headerHeight å·²åæ¬è¿æ»¤è¡çé«åº¦ tfs 542471\r\n            if (this.data && this.data.length) {\r\n                this.top += this.dg.footerHeight;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkScrollbarPosition(toTop = false) {\r\n        if (!this.dg.data || !this.dg.data.length) {\r\n            return;\r\n        }\r\n        const scrollBar: any = this.ps.instance;\r\n        const scrollElRef = this.ps.elementRef.nativeElement;\r\n        // scrollBar.update();\r\n        const lastScrollLeft = scrollBar ? scrollBar.lastScrollLeft : 0;\r\n        const lastScrollTop = scrollBar ? scrollBar.lastScrollTop : 0;\r\n\r\n        // const lastScrollLeft = this.scrollLeft;\r\n        // const lastScrollTop = this.scrollTop;\r\n\r\n        const scrollTop = scrollElRef.scrollTop;\r\n        const scrollLeft = scrollElRef.scrollLeft;\r\n\r\n        if (!toTop) {\r\n            if (scrollTop != lastScrollTop) {\r\n                this.ps.scrollToTop(lastScrollTop);\r\n                this.dgs.onScrollMove(lastScrollTop, SCROLL_Y_ACTION);\r\n            }\r\n        } else {\r\n            this.ps.scrollToTop();\r\n            this.dgs.onScrollMove(lastScrollTop, SCROLL_Y_ACTION);\r\n        }\r\n\r\n        this.scrollLeft = lastScrollLeft;\r\n        if (scrollLeft != lastScrollLeft) {\r\n            this.ps.scrollToX(lastScrollLeft);\r\n            this.dgs.onScrollMove(lastScrollLeft, SCROLL_X_ACTION);\r\n        } else {\r\n            if (lastScrollLeft) {\r\n                this.dgs.onScrollMove(lastScrollLeft, SCROLL_X_ACTION);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ°æ®åçååï¼éæ°å è½½æ°æ®æ¶æ§è¡\r\n     * éç½®æ»å¨æ¡ä½ç½®\r\n     */\r\n    private onDataChanged(isSameLength = true, isDiffrentDataSource = false) {\r\n        this.dg.setPagerHeight();\r\n        this.viewportH = this.getViewPortHeight();\r\n        this.bodyStyle = this.getBodyStyle();\r\n\r\n        /**\r\n         * update:\r\n         * node_modules\\perfect-scrollbar\\types\\perfect-scrollbar.d.ts\r\n         * lastScrollTop: number\r\n         */\r\n        if (this.ps && this.ps.instance && !this.dg.isEditing() && !this.dg.clientFilterChanged && !this.dg.autoHeight ) {\r\n            this.scrollTop = 0;\r\n            this.lastRenderedScrollTop = 0;\r\n            this.ps.scrollToTop();\r\n            this.scrollLeft = 0;\r\n            this.ps.scrollToLeft();\r\n        }\r\n\r\n        this.rowsCache = {};\r\n        const keepscrollPos = () => {\r\n            const scrollInfo = this.dg.dfs.getState().scrollInfo;\r\n            if (scrollInfo ) {\r\n                if (scrollInfo.y) {\r\n                    this.scrollTop = scrollInfo.y;\r\n                    this.dg.scrollInstance.scrollToY(scrollInfo.y);\r\n                    this.dgs.onScrollMove(scrollInfo.y, SCROLL_Y_ACTION);\r\n                }\r\n\r\n                if (scrollInfo.x) {\r\n                    this.scrollLeft = scrollInfo.x;\r\n                    this.dg.scrollInstance.scrollToX(scrollInfo.x);\r\n                    this.dg.dgs.onScrollMove(scrollInfo.x, SCROLL_X_ACTION);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (!this.dg.nowrap || this.dg.autoHeight) {\r\n            this.renderData(false);\r\n            this.dgs.cellContentWrapChanged.next(this.width);\r\n        } else {\r\n            if (isSameLength) {\r\n                keepscrollPos();\r\n            }\r\n            this.renderData(false);\r\n            this.ps.update();\r\n        }\r\n       \r\n\r\n        if (isDiffrentDataSource) {\r\n            this.dg.initSelectOrChecked();\r\n        } else {\r\n            this.dg.refreshSelectedData();\r\n        }\r\n        this.dg.clientFilterChanged = false;\r\n        this.dataChange.emit(this.data);\r\n\r\n        if (this.dg.scrollBarShowMode === 'allways' && this.ps.instance && !this.dg.showScrollArrow) {\r\n            this.hasYScrollbar();\r\n        }\r\n    }\r\n\r\n    private destroySubscriptions() {\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach((sub: Subscription) => {\r\n                if (sub) {\r\n                    sub.unsubscribe();\r\n                    sub = null;\r\n                }\r\n            });\r\n\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    private listenSubjects() {\r\n        this.destroySubscriptions();\r\n\r\n        this.gridSizeSubscribe = this.dfs.gridSize$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            debounceTime(50)\r\n        ).subscribe(state => {\r\n            if (state) {\r\n                this.dg.setPagerHeight();\r\n                const hh = this.dg.setHeaderHeight();\r\n                this.setPositionTop(hh);\r\n\r\n                this.height = state.height - this.top;\r\n\r\n                const oldWidth = this.width;\r\n                this.width = Math.floor(state.width);\r\n                this.rowHeight = state.rowHeight;\r\n\r\n                if (this.dg.showBorder) {\r\n                    this.width -= 2;\r\n                }\r\n\r\n                this.viewportW = this.width;\r\n                this.viewportH = this.getViewPortHeight();\r\n                this.canvasHeight = this.getCanvasHeight();\r\n\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    this.columnsGroup = state.columnsGroup;\r\n                    this.checkScrollbarPosition();\r\n                    // this.setFixedRightPosition();\r\n                    this.updateColumnSize(state.columnsGroup);\r\n\r\n                    this.dgs.showFixedShadow.emit({ showRightShadow: this.showRightShadow, x: this.fixedRightScrollLeft });\r\n                    this.renderData(false);\r\n\r\n                    if ((!this.dg.nowrap || this.dg.autoHeight) && this.rows && this.rows.length) {\r\n                        if (oldWidth !== this.width) {\r\n                            this.dgs.cellContentWrapChanged.next(oldWidth);\r\n                        } else {\r\n                            this.keepScrollbarPosition(oldWidth);\r\n                        }\r\n                    } else {\r\n                        if (this._scrollXTimer) {\r\n                            clearTimeout(this._scrollXTimer);\r\n                        }\r\n\r\n                        this._scrollXTimer = setTimeout(() => {\r\n                            this.keepScrollbarPosition(oldWidth);\r\n                        }, 100);\r\n                    }\r\n\r\n                });\r\n            }\r\n        });\r\n\r\n        this.subscriptions.push(this.gridSizeSubscribe);\r\n\r\n        this.columnResizeSubscribe = this.dfs.columnResize$.subscribe((cg: ColumnGroup) => {\r\n            this.updateColumnSize(cg);\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.columnResizeSubscribe);\r\n\r\n        this.dgs.setSelecedRow.subscribe((r: any) => {\r\n            if (r && r.selected) {\r\n                this.currentRowId = r.id;\r\n            } else {\r\n                this.currentRowId = undefined;\r\n            }\r\n        });\r\n        this.selectRowSubscribe = this.dfs.selectRow$.subscribe((row: SelectedRow) => {\r\n            if (row) {\r\n                this.currentRowId = row.id;\r\n                // 20210817 æ¹åé®ç§»å¨åå·æ°è§å¾ç¶æ\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(this.selectRowSubscribe);\r\n\r\n        this.unselectRowSubscribe = this.dfs.unSelectRow$.subscribe((prevRow: SelectedRow) => {\r\n            if (prevRow && prevRow.id === this.currentRowId) {\r\n                this.currentRowId = undefined;\r\n                this.dg.selectedRow = null;\r\n            }\r\n\r\n            if (!this.dg.editable && this.dg.multiSelect) {\r\n                this.__triggerBodyClickEvent = this.dg.selectionMode === 'default';\r\n            }\r\n\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.unselectRowSubscribe);\r\n\r\n        this.selectAllSubscribe = this.dfs.selectAll$.subscribe((rows: SelectedRow[]) => {\r\n            this.dg.selectAll.emit(rows);\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.selectAllSubscribe);\r\n\r\n        this.checkRowSubscribe = this.dfs.checkRow$.subscribe((row: SelectedRow) => {\r\n            this.dg.checked.emit(row);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.checkRowSubscribe);\r\n\r\n        this.clearSelectionsSubscribe = this.dfs.clearSelections$.subscribe(() => {\r\n            this.currentRowId = undefined;\r\n            if (this.dg.checkOnSelect) {\r\n                this.checkedRowsChanged();\r\n            }\r\n            this.dg.unSelectAll.emit();\r\n        });\r\n        this.subscriptions.push(this.clearSelectionsSubscribe);\r\n\r\n        this.uncheckRowSubscribe = this.dfs.unCheckRow$.subscribe((prevRow: SelectedRow) => {\r\n            this.dg.unChecked.emit(prevRow);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.uncheckRowSubscribe);\r\n\r\n        this.checkAllSubscribe = this.dfs.checkAll$.subscribe((rows: SelectedRow[]) => {\r\n            this.dg.checkAll.emit(rows);\r\n            this.checkedRowsChanged();\r\n            // this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.checkAllSubscribe);\r\n\r\n        this.clearCheckedsSubscribe = this.dfs.clearCheckeds$.subscribe((rows: SelectedRow[]) => {\r\n            if (this.dg.selectOnCheck) {\r\n                this.currentRowId = undefined;\r\n            }\r\n            this.dg.unCheckAll.emit(rows);\r\n            this.checkedRowsChanged();\r\n            this.cd.detectChanges();\r\n        });\r\n        this.subscriptions.push(this.clearCheckedsSubscribe);\r\n\r\n        this.subscriptions.push(this.dgs.setScrollbarPosition.subscribe(() => {\r\n            this.checkScrollbarPosition();\r\n            this.updateScrollPosition(this.scrollLeft);\r\n        }));\r\n\r\n        this.dgs.columnResized.pipe(\r\n            delay(100)\r\n        ).subscribe((e: any) => {\r\n            if (!this.dg.nowrap ||\r\n                (this.dg.currentCell && this.dg.currentCell.isEditing && this.dg.currentCell.column &&\r\n                    this.dg.currentCell.column.editor && this.dg.currentCell.column.editor.type === 'textarea')) {\r\n                const trdoms = this.dg.dgContainer.nativeElement.querySelectorAll('.f-datagrid-body-row:not(.f-datagrid-footer-row)');\r\n                trdoms.forEach(n => {\r\n                    this.render.setStyle(n, 'height', 'auto');\r\n                });\r\n\r\n                let trID = '';\r\n                if (e) {\r\n                    const rowId = e.id;\r\n                    trID = TR_PREFIX + rowId;\r\n                }\r\n\r\n                this.updateRowHeight(trID);\r\n            }\r\n\r\n            if (this.dg.headerWrap) {\r\n                this.dg.setHeaderHeight();\r\n                this.dfs.columnResizeEnd();\r\n            }\r\n\r\n        });\r\n\r\n        this.dgs.cellContentWrapChanged.pipe(\r\n            takeUntil(this.destroy$),\r\n            debounceTime(100)\r\n        ).subscribe((oldWidth: number) => {\r\n            this.updateRowHeight();\r\n            if (oldWidth != null) {\r\n                this.keepScrollbarPosition(oldWidth);\r\n            } else {\r\n                this.ps && this.ps.instance && this.ps.instance.update();\r\n            }\r\n        });\r\n\r\n\r\n        this.dg.dfs.rowUpdate$.subscribe((row: { index: number, data: any }) => {\r\n            if (row && row.data) {\r\n                this.buildCustomCellStyle(row);\r\n            }\r\n        });\r\n\r\n        if (this.dg.groupRows) {\r\n            this.dfs.expandGroupRow.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) => {\r\n                if (e && e.data) {\r\n                    this.groupRowStateChanged(e.data, true);\r\n                    setTimeout(() => {this.updateRowHeight();});\r\n                }\r\n            });\r\n            this.dfs.collapseGroupRow.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) =>{\r\n                if (e && e.data) {\r\n                    this.groupRowStateChanged(e.data, false);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private groupRowExpandUpdate(groupRow, isExpand) {\r\n        if (groupRow.rows && groupRow.rows.length) {\r\n            groupRow.rows.forEach(n => {\r\n                if (n[IS_GROUP_FOOTER_ROW_FIELD]) {\r\n                    this.data.filter(t => t[GROUP_ROW_FIELD] === n[GROUP_ROW_FIELD]).forEach(d => {\r\n                        d[GROUP_VISIBLE_FIELD] = isExpand && groupRow.expanded;\r\n                    });\r\n                } else {\r\n                    const item = this.data.find(e => e.id === n.id);\r\n                    if (item) {\r\n                        item[GROUP_VISIBLE_FIELD] = isExpand && groupRow.expanded;\r\n                        if (item.rows && item.rows.length) {\r\n                            this.groupRowExpandUpdate(item, isExpand);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private groupRowStateChanged(rowData, expand: boolean) {\r\n        if (this.dg.virtualized) {\r\n            const gr = this.data.find(n => n.id === rowData.id);\r\n            this.groupRowExpandUpdate(gr, expand);\r\n            this.renderData(false);\r\n        } else {\r\n            this.getCanvasHeight();\r\n        }\r\n\r\n        if (this['_psUpdateTimer_']) {\r\n            clearTimeout(this['_psUpdateTimer_']);\r\n        }\r\n\r\n        this['_psUpdateTimer_'] = setTimeout(() => {\r\n            this.ps.update();\r\n            this.cd.detectChanges();\r\n        }, 100)\r\n    }\r\n\r\n    private keepScrollbarPosition(oldWidth: number) {\r\n        if (!this.cd[\"destroyed\"]) {\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        if (!this.ps.instance) {\r\n            return;   \r\n        }\r\n\r\n        if (this[\"keepScrollbarPositionTIMER\"]) {\r\n            clearTimeout(this[\"keepScrollbarPositionTIMER\"]);\r\n        }\r\n\r\n        this[\"keepScrollbarPositionTIMER\"] = setTimeout(() => {\r\n            if (this.width > oldWidth) {\r\n                const x = this.scrollLeft - (this.width - oldWidth);\r\n                this.ps.elementRef.nativeElement.scrollLeft = x < 0 ? 0 : x;\r\n            }\r\n            if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                this.updateCanvasHeight();\r\n            }\r\n            this.ps.update();\r\n            this.updateScrollPosition(this.ps.elementRef.nativeElement.scrollLeft);\r\n            this.dgs.scrollbarUpdate.emit({ scrollbarRef: this.ps.instance, rightWidth: this.rightFixedWidth, showRightShadow: this.showRightShadow  });\r\n        }, 50);\r\n    }\r\n\r\n\r\n    private updateColumnSize(cg: ColumnGroup) {\r\n        if (cg) {\r\n            this.columnsGroup = cg;\r\n            \r\n            this.leftFixedWidth = this.columnsGroup.leftFixedWidth;\r\n            this.colsWidth = this.columnsGroup.normalWidth;\r\n\r\n            this.scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n            this.maxScrollLeft = this.colsWidth + this.leftFixedWidth;\r\n            this.fixedRightScrollLeft = this.maxScrollLeft;\r\n            // grid å®¹å¨å®½åº¦\r\n            const dgContainerWidth = this.dg.dgContainer.nativeElement.offsetWidth;\r\n            // ææåå®½ä¹å\r\n            const allColsWidth = Math.floor(this.columnsGroup.totalWidth);\r\n\r\n            this.bodyStyle = this.getBodyStyle();\r\n            if (dgContainerWidth > allColsWidth || dgContainerWidth === allColsWidth) {\r\n                this.showRightShadow = false;\r\n            } else {\r\n                this.showRightShadow = true;\r\n                // å³ä¾§åºå®åçä½ç½®\r\n                this.fixedRightScrollLeft = this.width  + this.scrollLeft;\r\n            }\r\n            this.setFixedRightWidth();\r\n        }\r\n    }\r\n\r\n    private setFixedRightWidth() {\r\n        this.rightFixedWidth = this.columnsGroup.rightFixedWidth;\r\n        this.totalWidth = this.columnsGroup.totalWidth;\r\n        if (this.ps && this.ps.instance && this.dg.scrollBarShowMode === 'allways') {\r\n            if (this.ps.instance.scrollbarYActive) {\r\n                this.rightFixedWidth += 18;\r\n            }\r\n        }\r\n    }\r\n\r\n    private buildCustomCellStyle(row: { index: number, data: any }) {\r\n\r\n        let rightTrs = [];\r\n        let leftTrs = [];\r\n        if (this.fixedRightEl) {\r\n            rightTrs = this.fixedRightEl.nativeElement.querySelectorAll('tr');\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            leftTrs = this.fixedLeftEl.nativeElement.querySelectorAll('.fixed-left-row');\r\n        }\r\n\r\n        const trs = this.mainArea.nativeElement.querySelectorAll('tr.f-datagrid-body-row');\r\n\r\n        const updateCellStyle = (arr, col, style) => {\r\n            if (arr.length) {\r\n                const td = arr[row.index].querySelector(`[field=\"${col.field}\"]`);\r\n                if (td) {\r\n                    this.dg.renderCustomStyle(style, td);\r\n                }\r\n            }\r\n        };\r\n\r\n        this.dg.flatColumns.forEach(col => {\r\n            if (col.styler) {\r\n                const _rd = row.data;\r\n                const val = Utils.getValue(col.field, _rd);\r\n                const cs = col.styler(val, _rd, row.index);\r\n                if (cs && Object.keys(cs).length) {\r\n                    updateCellStyle(leftTrs, col, cs);\r\n                    updateCellStyle(rightTrs, col, cs);\r\n                    updateCellStyle(trs, col, cs);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private checkedRowsChanged() {\r\n        this.dgs.onCheckedRowsCountChange();\r\n        const checkedRows = this.dg.checkeds;\r\n        this.dg.checkValues = checkedRows.map(r => r.id);\r\n        this.dg.checkValuesChange.emit(this.dg.checkValues);\r\n        this.dg.checkedChange.emit(checkedRows);\r\n    }\r\n\r\n    private getTrDomHeight() {\r\n        const list = [];\r\n        let rightTrs = [];\r\n        let leftTrs = [];\r\n        let trdoms = [];\r\n        if (this.fixedRightEl) {\r\n            rightTrs = this.fixedRightEl.nativeElement.querySelectorAll('tr');\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            leftTrs = this.fixedLeftEl.nativeElement.querySelectorAll('.fixed-left-row');\r\n        }\r\n\r\n        if (this.mainArea) {\r\n            trdoms = this.mainArea.nativeElement.querySelectorAll('tr.f-datagrid-body-row');\r\n        }\r\n        trdoms.forEach((tr, i) => {\r\n            let t1 = 0;\r\n            const t2 = Math.ceil(tr.offsetHeight);\r\n            let t3 = 0;\r\n            if (leftTrs && leftTrs.length) {\r\n                t1 = Math.ceil(leftTrs[i].offsetHeight);\r\n            }\r\n\r\n            if (rightTrs && rightTrs.length) {\r\n                t3 = Math.ceil(rightTrs[i].offsetHeight);\r\n            }\r\n\r\n            const _h = Math.max(t1, t2, t3, this.dg.rowHeight);\r\n            list.push(_h);\r\n        });\r\n        return list;\r\n    }\r\n\r\n\r\n    updateRowHeight2() {\r\n        let rightTrs = [];\r\n        let leftTrs = [];\r\n        let trdoms = [];\r\n        if (this.fixedRightEl) {\r\n            rightTrs = this.fixedRightEl.nativeElement.querySelectorAll('tr');\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            leftTrs = this.fixedLeftEl.nativeElement.querySelectorAll('.fixed-left-row');\r\n        }\r\n\r\n        if (this.mainArea) {\r\n            trdoms = this.mainArea.nativeElement.querySelectorAll('tr.f-datagrid-body-row');\r\n        }\r\n\r\n        trdoms.forEach((tr: any, i) => {\r\n            this.removeRowHeightCls(tr);\r\n            if (leftTrs && leftTrs[i]) {\r\n                this.removeRowHeightCls(leftTrs[i]);\r\n            }\r\n            if (rightTrs && rightTrs[i]) {\r\n                this.removeRowHeightCls(rightTrs[i]);\r\n            }\r\n        });\r\n\r\n        if (this['UPDATE_ROW_HEIGHT_TIMER']) {\r\n            clearTimeout(this['UPDATE_ROW_HEIGHT_TIMER']);\r\n        }\r\n\r\n        this['UPDATE_ROW_HEIGHT_TIMER'] = setTimeout(() => {\r\n            trdoms.forEach((tr, i) => {\r\n                let t1 = 0;\r\n                const t2 = Math.ceil(tr.offsetHeight);\r\n                let t3 = 0;\r\n\r\n                let leftTr = null;\r\n                let rightTr = null;\r\n                if (leftTrs && leftTrs.length) {\r\n                    t1 = Math.ceil(leftTrs[i].offsetHeight);\r\n                    leftTr = leftTrs[i]\r\n                }\r\n\r\n                if (rightTrs && rightTrs.length) {\r\n                    t3 = Math.ceil(rightTrs[i].offsetHeight);\r\n                    rightTr = rightTrs[i];\r\n                }\r\n\r\n                const _h = Math.max(t1, t2, t3, this.dg.rowHeight);\r\n\r\n                if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                    const heightClsName = WORDWRAP_ROW_HEIGHT_CLS + '_' + _h;\r\n                    const minRowHeightClsName = 'min_row_height_' + this.rowHeight;\r\n                    \r\n                    const _addRowHeightClsToDom = (trdom) => {\r\n                        this.removeRowHeightCls(trdom);\r\n                        this.render.addClass(trdom, heightClsName);\r\n                        this.render.addClass(trdom, minRowHeightClsName);\r\n                    }\r\n\r\n                    this.addRowHeightCls(heightClsName, _h);\r\n\r\n                    _addRowHeightClsToDom(tr);\r\n\r\n                    if (leftTr) {\r\n                        _addRowHeightClsToDom(leftTr);\r\n                    }\r\n\r\n                    if (rightTr) {\r\n                        _addRowHeightClsToDom(rightTr);\r\n                    }\r\n                }\r\n            });\r\n        }, 100);\r\n    }\r\n\r\n    private removeRowHeightCls(tr) {\r\n        if (!tr) {\r\n            return;\r\n        }\r\n        const _cls = Array.from(tr.classList).find((n: string) => n.indexOf(WORDWRAP_ROW_HEIGHT_CLS) > -1);\r\n        if (_cls) {\r\n            tr.classList.remove(_cls);\r\n        }\r\n    }\r\n\r\n    private addRowHeightCls(heightClsName: string, _h: number) {\r\n        this.dgs.removeCssRule(`${this.dg.customStyleKey()} .${heightClsName}`);\r\n        this.dg.renderCustomStyle2({style: { height: _h + 'px!important' }}, null, heightClsName);\r\n    }\r\n\r\n\r\n    /** åè®¸æ°æ®æè¡æ¶ï¼è®¡ç®è¡å·çè¡é« */\r\n    updateRowHeight(trDomId = null) {\r\n        if (this.fast) {\r\n            return;\r\n        }\r\n\r\n        if (!this.mainArea) {\r\n            return;\r\n        }\r\n\r\n        const dgBody = this.el.nativeElement.querySelector('div.f-datagrid-body');\r\n        if (dgBody) {\r\n            if (!this.dg.nowrap || this.dg.autoHeight) {\r\n                this.render.addClass(dgBody, 'data-wrap');\r\n            } else {\r\n                this.render.removeClass(dgBody, 'data-wrap');\r\n            }\r\n        }\r\n        \r\n\r\n        if (!trDomId) {\r\n            this.updateRowHeight2();\r\n        } else {\r\n            const tr = Utils.getTrDomById(trDomId, document);\r\n            if (!tr) {\r\n                return;\r\n            }\r\n\r\n            const leftTrId = trDomId + '_fixedleft';\r\n            const rightTrId = trDomId + '_fixedright';\r\n            const leftTr = Utils.getTrDomById(leftTrId, document);\r\n            const rightTr = Utils.getTrDomById(rightTrId, document);\r\n            this.removeRowHeightCls(tr);\r\n            this.removeRowHeightCls(leftTr);\r\n            this.removeRowHeightCls(rightTr);\r\n\r\n\r\n            const _arr = [];\r\n            if (this.fixedRightEl) {\r\n                const rtr = Utils.getTrDomById(trDomId, this.fixedRightEl.nativeElement);\r\n                if (rtr) {\r\n                    _arr.push(Math.ceil(rtr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            if (this.fixedLeftEl) {\r\n                const ltr = Utils.getTrDomById(trDomId, this.fixedLeftEl.nativeElement);\r\n                if (ltr) {\r\n                    _arr.push(Math.ceil(ltr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            if (this.mainArea) {\r\n                const tr = Utils.getTrDomById(trDomId, this.mainArea.nativeElement);\r\n                if (tr) {\r\n                    _arr.push(Math.ceil(tr.offsetHeight));\r\n                }\r\n            }\r\n\r\n            const _h = Math.max(..._arr);\r\n\r\n            const heightClsName = WORDWRAP_ROW_HEIGHT_CLS + '_' + _h;\r\n\r\n            if (!this.dg.nowrap || this.dg.autoHeight) {\r\n\r\n                this.render.addClass(tr, heightClsName);\r\n                this.addRowHeightCls(heightClsName, _h);\r\n\r\n                if (leftTr) {\r\n                    this.render.addClass(leftTr, heightClsName);\r\n                }\r\n\r\n                if (rightTr) {\r\n                    this.render.addClass(rightTr, heightClsName);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.updateCanvasHeight();\r\n\r\n        // ç§»é¤height: auto\r\n        const trdoms = this.dg.dgContainer.nativeElement.querySelectorAll('.f-datagrid-body-row:not(f-datagrid-footer-row)');\r\n        trdoms.forEach(n => n.style.height = '');\r\n\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n\r\n    private getBodyStyle() {\r\n        let h = this.getViewPortHeight();\r\n        if (!this.data.length) {\r\n\r\n            if (this.dg.useBlankWhenDataIsEmpty) {\r\n                h = this.dg.emptyDataHeight;\r\n            } else {\r\n                if (this.dg.autoHeight) {\r\n                    h = this.dg.emptyDataHeight;\r\n                }\r\n\r\n                if (this.dg.footerData && this.dg.showFooter) {\r\n                    let fd = this.dg.footerData;\r\n                    if (this.dg.footerData.subscribe) {\r\n                        fd = this.dg.footerData['value'];\r\n                    }\r\n\r\n                    if (fd && Array.isArray(fd) && fd.length) {\r\n                        h = h - this.dg.footerHeight;\r\n\r\n                        if (this.dg.footerPosition === 'both') {\r\n                            h = h - this.dg.footerHeight;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n\r\n            if (this.dg.showFooter && this.dg.footerPosition === 'both') {\r\n                h = h - this.dg.footerHeight;\r\n            }\r\n        }\r\n        return {\r\n            height: `${Math.floor(h) + 1}px`\r\n        };\r\n    }\r\n\r\n    private updateScrollPosition(scrollLeft: any) {\r\n        this.scrollLeft = scrollLeft;\r\n\r\n        this.fixedRightScrollLeft = this.scrollLeft + this.width - this.rightFixedWidth;\r\n        if (this.fixedRightScrollLeft === this.maxScrollLeft || this.fixedRightScrollLeft > this.maxScrollLeft) {\r\n            this.fixedRightScrollLeft = this.maxScrollLeft;\r\n            this.showRightShadow = false;\r\n        } else {\r\n            this.showRightShadow = true;\r\n        }\r\n\r\n        if (this.fixedLeftEl) {\r\n            this.render.setStyle(this.fixedLeftEl.nativeElement, 'transform', `translate3d(${this.scrollLeft}px, 0px, 0px)`);\r\n        }\r\n\r\n        if (this.fixedRightEl) {\r\n            let l = this.dg.width - (this.dg.showBorder ? 2 : 0) - this.columnsGroup.rightFixedWidth;\r\n            if (this.ps && this.ps.instance && this.ps.instance.scrollbarYActive && this.dg.scrollBarShowMode === 'allways') {\r\n                l -= 18;\r\n            }\r\n            let realWidth = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth + this.columnsGroup.rightFixedWidth;\r\n            if (this.dg.width - (this.dg.showBorder ? 2 : 0) > realWidth) {\r\n                l = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth;\r\n            }\r\n            l += this.scrollLeft;\r\n\r\n            this.fixedRightScrollLeft = l;\r\n            this.render.setStyle(this.fixedRightEl.nativeElement, 'transform', `translate3d(${this.fixedRightScrollLeft}px, 0px, 0px)`);\r\n        }\r\n    }\r\n\r\n    onScrollToX($event: any) {\r\n        const x = $event.target.scrollLeft;\r\n        this.updateScrollPosition(x);\r\n        // this.cd.detectChanges();\r\n        this.dgs.onScrollMove(x, SCROLL_X_ACTION);\r\n        this.dfs.updateProperty('scrollInfo', { y: $event.target.scrollTop, x });\r\n        this.dgs.showFixedShadow.emit({ showRightShadow: this.showRightShadow, x: this.fixedRightScrollLeft });\r\n    }\r\n\r\n    onScrollToY($event: any) {\r\n\r\n        if (this._scrollTimer) {\r\n            clearTimeout(this._scrollTimer);\r\n        }\r\n\r\n        this._scrollTimer = setTimeout(() => {\r\n            const y = $event.target.scrollTop;\r\n\r\n            if (this.dg.virtualized) {\r\n                this.handleScroll();\r\n            }\r\n\r\n            this.scrollTop = y;\r\n\r\n            this.dfs.updateProperty('scrollInfo', { y, x: $event.target.scrollLeft });\r\n\r\n            this.dg.scrollY.emit(y);\r\n            this.dgs.onScrollMove(y, SCROLL_Y_ACTION);\r\n        }, 100);\r\n    }\r\n\r\n    onPsXReachStart($event: any) {\r\n        const x = $event.target.scrollLeft;\r\n        this.updateScrollPosition(x);\r\n        this.dgs.onScrollMove(x, SCROLL_X_REACH_START_ACTION);\r\n    }\r\n\r\n    onPsXReachEnd($event: any) {\r\n        this.showRightShadow = false;\r\n        // const x = $event.target.scrollLeft;\r\n        // this.updateScrollPosition(x);\r\n        // this.cd.detectChanges();\r\n        // // this.dgs.onShowFixedShadow(this.showRightShadow);\r\n        // this.dgs.onScrollMove(x, SCROLL_X_REACH_END_ACTION);\r\n    }\r\n\r\n    isChecked(rowData: any) {\r\n        if (rowData) {\r\n            return this.dfs.isRowChecked(rowData[this.dg.idField]);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    isSelected(rowData: any) {\r\n        if (rowData) {\r\n            return this.dfs.isRowSelected(rowData[this.dg.idField]);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    toggleGroupRow(row, open = true) {\r\n        row.expanded = open;\r\n        this.ps.update();\r\n    }\r\n\r\n\r\n\r\n    /** =================================== å ====== é ====== çº¿ =================================== */\r\n\r\n    /** è·åå¯è§åºåé«åº¦ */\r\n    public getViewPortHeight() {\r\n        let viewPortHeight = this.dg.height;\r\n        if (this.dg.showHeader) {\r\n            viewPortHeight = viewPortHeight - this.dg.realHeaderHeight;\r\n        }\r\n\r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            viewPortHeight -= this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            viewPortHeight -= this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        if (this.dg.showFooter && this.data.length) {\r\n            viewPortHeight = viewPortHeight - this.dg.footerHeight;\r\n        }\r\n\r\n        if (this.dg.pagination) {\r\n            viewPortHeight = viewPortHeight - this.dg.pagerHeight - 2;\r\n        }\r\n\r\n        if (this.dg.showBorder) {\r\n            viewPortHeight -= 2;\r\n        }\r\n\r\n        this.viewportH = viewPortHeight;\r\n        return viewPortHeight;\r\n    }\r\n\r\n    // ä¸æè¡æ¶ï¼æææ°æ®çé«åº¦\r\n    private allRowsHeight() {\r\n        const rowHeightpatch = 1;  // this.dg.autoHeight ? 2 : 1;\r\n        const rowHeight = this.dg.rowHeight + rowHeightpatch;\r\n\r\n        let itemsCount = 0;\r\n        if (this.dg.groupRows) {\r\n            const data = this.data.filter(n => n['__group_visible__'] || n['__group_visible__']===undefined);\r\n            if (this.dg.groupSummaryPosition === 'inGroupRow') {\r\n                itemsCount = data.filter(n => !n['__group_footer__']).length;\r\n            } else {\r\n                itemsCount = data.length;\r\n            }\r\n        } else {\r\n            itemsCount = this.data.length;\r\n        }\r\n\r\n        let h = itemsCount * rowHeight;\r\n\r\n        if (this.dg.autoHeight) {\r\n            h += itemsCount;\r\n        } else {\r\n            h += 2;\r\n        }\r\n\r\n        return h;\r\n    }\r\n\r\n    private getCanvasHeight() {\r\n        let canvasHeight = 0;\r\n\r\n        if (!this.data || !this.data.length) {\r\n            this.canvasHeight = 0;\r\n            return 0;\r\n        }\r\n\r\n        if (this.dg.nowrap) {\r\n            // tfs 572022\r\n            if (this.dg.maxHeight && this.dg.autoHeight && this.mainArea) {\r\n                canvasHeight = Math.floor(this.mainArea.nativeElement.getBoundingClientRect().height);\r\n            } else {\r\n                canvasHeight = this.allRowsHeight();\r\n            }\r\n        } else {\r\n            canvasHeight = this.getTrDomHeight().reduce((r, c) => r + c, 0);\r\n        }\r\n\r\n        if (!canvasHeight) {\r\n            canvasHeight = this.viewportH;\r\n        }\r\n\r\n        canvasHeight = canvasHeight + (this.dg.scrollBarShowMode === 'allways' && (this.ps.instance && this.ps.instance['scrollbarXActive']) ? 18 : 0);\r\n        this.canvasHeight = canvasHeight;\r\n        return canvasHeight;\r\n    }\r\n\r\n    updateCanvasHeight() {\r\n        this.canvasHeight = this.getCanvasHeight();\r\n    }\r\n\r\n\r\n    private getRowFromPosition(y) {\r\n        return Math.floor(y / (this.dg.rowHeight + 1));\r\n    }\r\n\r\n    getVisibleRange(viewportTop?: number, viewportLeft?: number) {\r\n        if (viewportTop == null) {\r\n            viewportTop = this.scrollTop;\r\n        }\r\n        if (viewportLeft == null) {\r\n            viewportLeft = this.scrollLeft;\r\n        }\r\n\r\n        return {\r\n            top: this.getRowFromPosition(viewportTop),\r\n            bottom: this.getRowFromPosition(viewportTop + this.viewportH) + 1,\r\n            leftPx: viewportLeft,\r\n            rightPx: viewportLeft + this.viewportW\r\n        };\r\n    }\r\n\r\n    private getRenderedRange(viewportTop?: number, viewportLeft?: number) {\r\n        const range = this.getVisibleRange(viewportTop, viewportLeft);\r\n        const buffer = Math.round(this.viewportH / (this.dg.rowHeight + 1));\r\n        const minBuffer = this.minRowBuffer;\r\n\r\n        if (this.vScrollDir == -1) {\r\n            range.top -= buffer;\r\n            range.bottom += minBuffer;\r\n        } else if (this.vScrollDir == 1) {\r\n            range.top -= minBuffer;\r\n            range.bottom += buffer;\r\n        } else {\r\n            range.top -= minBuffer;\r\n            range.bottom += minBuffer;\r\n        }\r\n\r\n        range.top = Math.max(0, range.top);\r\n        range.bottom = Math.min(this.data.length - 1, range.bottom);\r\n\r\n        range.leftPx -= this.viewportW;\r\n        range.rightPx += this.viewportW;\r\n\r\n        range.leftPx = Math.max(0, range.leftPx);\r\n        range.rightPx = Math.min(this.canvasWidth, range.rightPx);\r\n\r\n        return range;\r\n    }\r\n\r\n    private renderRows(range) {\r\n        const rows = [];\r\n        let dataLength = this.data.length;\r\n        let _data =  this.data;\r\n\r\n         // å¯ç¨åç»\r\n        if (this.dg.groupRows && this.dg.groupField) {\r\n            _data =  _data.filter(n => n['__group_visible__'] || n['__group_visible__']===undefined);\r\n\r\n            if (this.dg.groupSummaryPosition === 'inGroupRow') {\r\n                _data = _data.filter(n => !n['__group_footer__']);\r\n            }\r\n\r\n            dataLength = _data.length;\r\n            this.rowsCache = {};\r\n        }\r\n\r\n        for (let i = range.top; i <= range.bottom; i++) {\r\n            if (this.rowsCache[i] || (i == dataLength) ) {\r\n                continue;\r\n            }\r\n\r\n            rows.push(i);\r\n\r\n            // Create an entry right away so that appendRowHtml() can\r\n            // start populatating it.\r\n            this.rowsCache[i] = {\r\n                rowNode: null,\r\n\r\n                // ColSpans of rendered cells (by column idx).\r\n                // Can also be used for checking whether a cell has been rendered.\r\n                cellColSpans: [],\r\n\r\n                // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\r\n                cellNodesByColumnIdx: [],\r\n\r\n                // Column indices of cell nodes that have been rendered, but not yet indexed in\r\n                // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\r\n                // end of the row.\r\n                cellRenderQueue: []\r\n            };\r\n        }\r\n\r\n        for (let i = 0, ii = rows.length; i < ii; i++) {\r\n            this.rowsCache[rows[i]].rowNode = _data[rows[i]];\r\n        }\r\n\r\n        return Object.keys(this.rowsCache).map(n => this.rowsCache[n].rowNode).filter(n => n);\r\n    }\r\n\r\n\r\n    private removeRowFromCache(row) {\r\n        const cacheEntry = this.rowsCache[row];\r\n        if (!cacheEntry) {\r\n            return;\r\n        }\r\n\r\n        delete this.rowsCache[row];\r\n    }\r\n\r\n    private cleanupRows(rangeToKeep) {\r\n        for (const i in this.rowsCache) {\r\n            if (i < rangeToKeep.top || i > rangeToKeep.bottom) {\r\n                this.removeRowFromCache(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    hasYScrollbar(showYscrollbar?: boolean) {\r\n        setTimeout(() => {\r\n            showYscrollbar = showYscrollbar == undefined ? this.ps.instance.scrollbarYActive: showYscrollbar;\r\n            const hasY = showYscrollbar && this.dg.scrollBarShowMode === 'allways' ? 18 : 0;\r\n            this.dfs.updateProperty('scrollbarY', hasY);\r\n            this.dfs.resize();\r\n        }, 60);\r\n    }\r\n\r\n    onClickScrollArrow($event) {\r\n        const { dir, event } = $event;\r\n        if (this.ps && this.ps.instance) {\r\n            const { x, y } = this.ps.instance.reach;\r\n    \r\n            switch(dir) {\r\n                case 'left':\r\n                    if (x!== 'start') {\r\n                        this.viewScrollContainer.nativeElement.scrollLeft = this.viewScrollContainer.nativeElement.scrollLeft - 40;\r\n                    }\r\n                    break;\r\n                case 'right':\r\n                    if (x!== 'end') {\r\n                        this.viewScrollContainer.nativeElement.scrollLeft = this.viewScrollContainer.nativeElement.scrollLeft + 40;\r\n                    }\r\n                    break;\r\n                case 'top':\r\n                    if (y !== 'start') {\r\n                        this.viewScrollContainer.nativeElement.scrollTop = this.viewScrollContainer.nativeElement.scrollTop - 40;\r\n                    }\r\n                    break;\r\n                case 'bottom':\r\n                    if (y !== 'end') {\r\n                        this.viewScrollContainer.nativeElement.scrollTop = this.viewScrollContainer.nativeElement.scrollTop + 40;\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            this.ps.update();\r\n        }\r\n    }\r\n\r\n    private renderData(detectchanges = true) {\r\n        this.canvasHeight = this.getCanvasHeight();\r\n        if (!this.dg.virtualized || this.dg.autoHeight) {\r\n            this.rows = this.data;\r\n        } else {\r\n            const visible = this.getVisibleRange();\r\n            const rendered = this.getRenderedRange();\r\n\r\n            // remove rows no longer in the viewport\r\n            this.cleanupRows(rendered);\r\n\r\n            // render missing rows\r\n            this.rows = this.renderRows(rendered);\r\n            this.startRowIndex = rendered.top;\r\n           \r\n            this.lastRenderedScrollTop = this.scrollTop;\r\n            this.lastRenderedScrollLeft = this.scrollLeft;\r\n\r\n\r\n            \r\n            this.blankTopHeight = this.startRowIndex * (this.dg.rowHeight + 1);\r\n            this.blankBottomHeight = this.canvasHeight - this.blankTopHeight - (this.rows.length * (this.dg.rowHeight + 1));\r\n            if (this.dg.scrollBarShowMode === 'allways' && this.ps && this.ps.instance && this.ps.instance.scrollbarXActive) {\r\n                this.blankBottomHeight += 22;\r\n            }\r\n\r\n\r\n            if (detectchanges) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    private handleScroll() {\r\n        this.scrollTop = this.ps.elementRef.nativeElement.scrollTop;\r\n        this.scrollLeft = this.ps.elementRef.nativeElement.scrollLeft;\r\n        return this._handleScroll();\r\n    }\r\n\r\n    private _handleScroll() {\r\n        const viewportContainer = this.viewScrollContainer.nativeElement;\r\n        let maxScrollDistanceY = viewportContainer.scrollHeight - viewportContainer.clientHeight;\r\n        let maxScrollDistanceX = viewportContainer.scrollWidth - viewportContainer.clientWidth;\r\n\r\n        // Protect against erroneous clientHeight/Width greater than scrollHeight/Width.\r\n        // Sometimes seen in Chrome.\r\n        maxScrollDistanceY = Math.max(0, maxScrollDistanceY);\r\n        maxScrollDistanceX = Math.max(0, maxScrollDistanceX);\r\n\r\n        // Ceiling the max scroll values\r\n        if (this.scrollTop > maxScrollDistanceY) {\r\n            this.scrollTop = maxScrollDistanceY;\r\n        }\r\n        if (this.scrollLeft > maxScrollDistanceX) {\r\n            this.scrollLeft = maxScrollDistanceX;\r\n        }\r\n\r\n        const vScrollDist = Math.abs(this.scrollTop - this.prevScrollTop);\r\n        const hScrollDist = Math.abs(this.scrollLeft - this.prevScrollLeft);\r\n\r\n        if (hScrollDist) {\r\n            this.prevScrollLeft = this.scrollLeft;\r\n\r\n            // $viewportScrollContainerX[0].scrollLeft = scrollLeft;\r\n            // if (hasFrozenColumns()) {\r\n            //     if (hasFrozenRows) {\r\n            //         $viewportTopR[0].scrollLeft = scrollLeft;\r\n            //     }\r\n            // } else {\r\n            //     if (hasFrozenRows) {\r\n            //         $viewportTopL[0].scrollLeft = scrollLeft;\r\n            //     }\r\n            // }\r\n        }\r\n\r\n        const lastScrollTop = this.lastRenderedScrollTop;\r\n\r\n        if (vScrollDist) {\r\n            this.vScrollDir = this.prevScrollTop < this.scrollTop ? 1 : -1;\r\n            this.prevScrollTop = this.scrollTop;\r\n\r\n            // if (hasFrozenColumns()) {\r\n            //     if (hasFrozenRows && !options.frozenBottom) {\r\n            //         $viewportBottomL[0].scrollTop = scrollTop;\r\n            //     } else {\r\n            //         $viewportTopL[0].scrollTop = scrollTop;\r\n            //     }\r\n            // }\r\n\r\n            // switch virtual pages if needed\r\n            if (vScrollDist < this.viewportH) {\r\n                this._scrollTo(this.scrollTop);\r\n            }\r\n        }\r\n\r\n        if (hScrollDist || vScrollDist) {\r\n            const dx = Math.abs(this.lastRenderedScrollLeft - this.scrollLeft);\r\n            const dy = Math.abs(lastScrollTop - this.scrollTop);\r\n            if (dx > 20 || dy > 20) {\r\n                // if rendering is forced or scrolling is small enough to be \"easy\", just render\r\n                if (dy < this.viewportH && dx < this.viewportW) {\r\n                    this.renderData();\r\n                } else {\r\n                    this.renderData();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hScrollDist || vScrollDist) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private _scrollTo(y) {\r\n        const $viewportScrollContainerY = this.viewScrollContainer.nativeElement;\r\n        y = Math.max(y, 0);\r\n        y = Math.min(y, this.canvasHeight - this.viewportH);\r\n\r\n        const newScrollTop = y;\r\n\r\n        if (this.prevScrollTop != newScrollTop) {\r\n            this.vScrollDir = (this.prevScrollTop < newScrollTop) ? 1 : -1;\r\n            this.lastRenderedScrollTop = (this.scrollTop = this.prevScrollTop = newScrollTop);\r\n\r\n            // if (hasFrozenColumns()) {\r\n            //     $viewportTopL[0].scrollTop = newScrollTop;\r\n            // }\r\n\r\n            // if (hasFrozenRows) {\r\n            //     $viewportBottomL[0].scrollTop = $viewportBottomR[0].scrollTop = newScrollTop;\r\n            // }\r\n\r\n            // $viewportScrollContainerY.scrollTop = newScrollTop;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onMouseClick($event: MouseEvent) {\r\n        // document.body.click();\r\n        const target = $event.target as any;\r\n\r\n        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT' ) {\r\n            return;\r\n        }\r\n    \r\n        let td = target;\r\n        if (target.nodeName !== 'TD') {\r\n            td = target.closest('TD');\r\n        }\r\n\r\n        if (!td) {\r\n            if (this.dg.isEditing() && (this.dg.exitRowEditingWhenBodyClick || this.dg.editMode == 'cell') ) {\r\n                this.dg.endEditing();\r\n            }\r\n            return;\r\n        }\r\n\r\n        let curT = new Date().getTime()\r\n        //ä¸ä¸æ¬¡æ¶é´æ³\r\n        let lastT = this['lastTapDiffTime'] || 0;\r\n        //å¯¹ä¸ä¸æ¬¡æ¶é´æ³éæ°èµå¼\r\n        this['lastTapDiffTime'] = curT;\r\n        //åå·®\r\n        let diff = curT - lastT;\r\n       \r\n\r\n        const isClickSameRow = () => {\r\n            if (this._clickCellWeakMap.has(this.el.nativeElement) && td && td.parentElement === this._clickCellWeakMap.get(this.el.nativeElement)) {\r\n                this._clickCellWeakMap.delete(this.el.nativeElement);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        const runTdClick = () => {\r\n            if (td && td.selectCell) {\r\n                td.selectCell($event, td); \r\n            } else {\r\n                this._selectRow(td, (id, rowSelected) => {\r\n                    let emit = !rowSelected;\r\n                    if (this.dg.selectionMode === 'default') {\r\n                        this.dg.clearCheckeds();\r\n                        emit = true;\r\n                    }\r\n                    this.dg.selectRow(id, emit, false);\r\n                    this.dg['updateAllCheckboxStatus']();\r\n                });\r\n            }\r\n        }\r\n\r\n        const runSelectRow = () => {\r\n            const dblclickTimer = this.dg.dblclickRow.observers.length ? 200: 0;\r\n\r\n            if (isClickSameRow() ) {\r\n                if (diff < dblclickTimer) {\r\n                    this.dg.writeConsole('åå»');\r\n                    //æ¸é¤ä¸ä¸æ¬¡åå»çå®æ¶å¨ID\r\n                    clearTimeout(this['lastTapTimeFunc'])\r\n                } else {\r\n                    //å®æ¶å¨id\r\n                    this['lastTapTimeFunc'] = setTimeout(() => {\r\n                        runTdClick();\r\n                    }, dblclickTimer);\r\n                }\r\n            } else {\r\n                this['lastTapTimeFunc'] = setTimeout(() => {\r\n                    runTdClick();\r\n                }, dblclickTimer ? 180: 0);\r\n            }\r\n\r\n            this._clickCellWeakMap.set(this.el.nativeElement, td.parentElement);\r\n        }\r\n\r\n\r\n        if (!this.dg.editable && td) {\r\n            // è§£å³è¶é¾ç¹å»äºä»¶ï¼è¦åæ§è¡éä¸­è¡\r\n            $event.stopPropagation();\r\n            runSelectRow();\r\n            return;\r\n        }\r\n\r\n        if (this.dg.editMode === 'row') {\r\n            if (this.dg.exitRowEditingWhenBodyClick && this.dg.isEditing()) {\r\n                this.dg.endEditing();\r\n            }\r\n            this._selectRow(td, (id, rowSelected) => {\r\n                this.dg.selectRow(id, !rowSelected, false);\r\n            });\r\n            return;\r\n        }\r\n        if (!td && this.dg.currentCell) {\r\n            td = this.dg.currentCell.cellElement;\r\n            if (td && td.closeEdit) {\r\n                $event.stopPropagation();\r\n                td.closeEdit();\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        if (td) {\r\n            // è¡ç¦ç¨æ¶\r\n            if (this.dg.disableRow) {\r\n                let rowData = null;\r\n                let rowIndex = -1;\r\n                if (td.gridCellData) {\r\n                    rowData = td.gridCellData.rowData;\r\n                    rowIndex = td.gridCellData.rowIndex;\r\n                } else {\r\n                    const rowInfo = this.dg.getRowIdByTr(td.parentElement);\r\n                    if (rowInfo) {\r\n                        rowData = rowInfo.data;\r\n                        rowIndex = rowInfo.index;\r\n                    }\r\n                }\r\n\r\n                if (rowData) {\r\n                    if (this.dg.disableRow(rowData, rowIndex)) {\r\n                        this.dg.endEditing();\r\n                        return;\r\n                    }\r\n                } else {\r\n                    this.dg.writeConsole('æªè·åå°è¡æ°æ®ã');\r\n                    return;\r\n                }\r\n            }\r\n            $event.stopPropagation();\r\n            if (this.dg.editable && this.dg.editMode === 'cell') {\r\n                if (td.edit) {\r\n                    this._selectRow(td, () => {\r\n                        td.edit($event);\r\n                    });\r\n                } else {\r\n                    // åè®¸ç¼è¾ç¹å»è¡å·æ¶ï¼å¯ä»¥éä¸­è¡\r\n                    if (td.selectCell || td.className.indexOf('f-datagrid-cell-rownumber') > -1) {\r\n                        runSelectRow();\r\n                    } else {\r\n                        // å½ç¹åç»è¡æåè®¡è¡æ¶ï¼é¡»ç»æç¼è¾\r\n                        this.dg.isEditing() && this.dg.endEditing();\r\n                    }\r\n                }\r\n            } else {\r\n                if (td.selectCell) {\r\n                    runSelectRow();\r\n                } else {\r\n                    if (this.dg.isEditing() && (this.dg.exitRowEditingWhenBodyClick || this.dg.editMode === 'cell')) {\r\n                        this.dg.endEditing();\r\n                    }\r\n                    // this._selectRow(td, (id, rowSelected) => {\r\n                    //     this.dg.selectRow(id, !rowSelected, false);\r\n                    // });\r\n                    runTdClick();\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    private _selectRow(tdEl: HTMLElement, callback) {\r\n        if (tdEl) {\r\n            const tr = tdEl.parentElement;\r\n            const rowInfo = this.dg.getRowIdByTr(tr);\r\n\r\n            if (!rowInfo) {\r\n                return;\r\n            }\r\n\r\n            const {data, index, id} = rowInfo\r\n            const rowisSelected = this.dfs.isRowSelected(id);\r\n            this.dg._beforeSelectRow$(index, data, id).pipe(takeUntil(this.destroy$)).subscribe((t: any) => {\r\n                if (t) {\r\n                    callback(id, rowisSelected);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    onBeforeShowContextMenu = (e: any) => {\r\n        // row_1_fixedleft  row_1  row_1_fixedright\r\n        const { contextMenuDom, event } = e;\r\n\r\n        if (event.target.closest('.datagrid-editor')) {\r\n            return of({show: false});\r\n        }\r\n\r\n\r\n        let rowID = event.target.id;\r\n\r\n        if (contextMenuDom) {\r\n            // æé¤åç»è¡ãåç»åè®¡è¡\r\n            if (contextMenuDom.className.indexOf('f-datagrid-group-row') === -1 && contextMenuDom.className.indexOf('f-datagrid-group-footer') === -1) {\r\n                rowID = Utils.getRowIdByTr(contextMenuDom);\r\n                const rowData = this.dfs.findRow(rowID);\r\n\r\n                \r\n               \r\n                const focusTargetWidth = this.viewportW > this.totalWidth ? this.totalWidth : this.viewportW;\r\n                const td = event.target.closest('td') ;\r\n                let colInfo = null;\r\n                if (td) {\r\n                    const fieldName = td.getAttribute('field');\r\n                    colInfo = fieldName ? this.dfs.getColumn(fieldName) : null;\r\n                }\r\n\r\n                let beforeShowContextMenus$ = of(true);\r\n                if (this.dg.beforeShowContextMenus) {\r\n                    const showContextMenu: any = this.dg.beforeShowContextMenus({ rowid: rowID, data: rowData.data, grid: this.dg, column: colInfo});\r\n                    if (typeof showContextMenu === 'boolean') {\r\n                        beforeShowContextMenus$ = of(showContextMenu);\r\n                    } else {\r\n                        if (showContextMenu['subscribe']) {\r\n                            beforeShowContextMenus$ = showContextMenu;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return beforeShowContextMenus$.pipe(\r\n                    switchMap((e: any) => {\r\n                        const params = { rowid: rowID, data: rowData.data, grid: this.dg, column: colInfo};\r\n                        if (typeof e === 'object') {\r\n                            const { show: isShow, customData } = e;\r\n                            return of({show: isShow, data: Object.assign(params, { customData: customData ? customData: null }), focusTargetWidth});\r\n                        } else {\r\n                            return of({ show: e, data: params, focusTargetWidth });\r\n                        }\r\n                    })\r\n                );\r\n            }\r\n        }\r\n        return of({ show: false });\r\n    }\r\n}\r\n","\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-26 17:17:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Directive, Input, NgZone, OnInit, Renderer2, ElementRef, OnDestroy, Inject, forwardRef, ChangeDetectorRef, HostListener } from '@angular/core';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { Utils } from './../../utils/utils';\r\n@Directive({\r\n    selector: '[row-hover]',\r\n    exportAs: 'rowHover'\r\n})\r\nexport class DatagridRowHoverDirective implements OnInit, OnDestroy {\r\n\r\n    @Input() rowIndex: number;\r\n    @Input('row-hover') rowData: any;\r\n\r\n    private _mouseenter = null;\r\n    private _mouseleave = null;\r\n\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridBodyComponent)) public dgb: DatagridBodyComponent,\r\n        private cd: ChangeDetectorRef,\r\n        private el: ElementRef, private zone: NgZone, private render: Renderer2) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.dg.rowHover && !this.dg.fast) {\r\n            this.zone.runOutsideAngular( () => {\r\n                this._mouseenter = Utils.on(this.el.nativeElement, 'mouseenter', this.onmouseenter.bind(this), { target: '.f-datagrid-body-row', options: { capture: true }});\r\n                this._mouseleave = Utils.on(this.el.nativeElement, 'mouseleave', this.onmouseleave.bind(this), { target: '.f-datagrid-body-row', options: { capture: true }});\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._mouseenter) {\r\n            this._mouseenter();\r\n        }\r\n\r\n        if (this._mouseleave) {\r\n            this._mouseleave();\r\n        }\r\n    }\r\n\r\n    // @HostListener('mouseenter')\r\n    onmouseenter(event) {\r\n        this.setRowHoverCls(event);\r\n    }\r\n\r\n    // @HostListener('mouseleave')\r\n    onmouseleave(event) {\r\n        this.setRowHoverCls(event, false);\r\n    }\r\n\r\n    setRowHoverCls(event, hover = true) {\r\n        if (!this.dg.rowHover) {\r\n            return;\r\n        }\r\n\r\n        if (!event.target.matches('.f-datagrid-body-row')) {\r\n            return;\r\n        }\r\n\r\n        this.rowIndex = event.target.getAttribute('index');\r\n\r\n        const leftTableCls = 'f-datagrid-body-fixed-left';\r\n        const rightTableCls = 'f-datagrid-body-fixed-right';\r\n        const centerTableCls = 'f-datagrid-body-center';\r\n\r\n        const body = this.dg.el.nativeElement.querySelector('.f-datagrid-body');\r\n\r\n        if (!body) {\r\n            return;\r\n        }\r\n\r\n        const leftTableDom = body.querySelector(`.${leftTableCls}`);\r\n        const rightTableDom = body.querySelector(`.${rightTableCls}`);\r\n        const centerTableDom = body.querySelector(`.${centerTableCls}`);\r\n\r\n        const method = hover ? 'addClass' : 'removeClass';\r\n        const trSelector = `tr[index=\"${this.rowIndex}\"]`;\r\n        const dom = this.el.nativeElement.closest('div');\r\n        if (dom && dom.className) {\r\n            const trDom = centerTableDom.querySelector(trSelector);\r\n\r\n            if (!trDom) {\r\n                return;\r\n            }\r\n\r\n            if (trDom.className.indexOf('f-datagrid-disable-row') > -1) {\r\n                return;\r\n            }\r\n            let ltr = null;\r\n            let rtr = null;\r\n            if (rightTableDom) {\r\n                rtr = rightTableDom.querySelector(trSelector);\r\n            }\r\n            if (leftTableDom) {\r\n                ltr = leftTableDom.querySelector(trSelector);\r\n            }\r\n\r\n            if (leftTableDom && ltr) {\r\n                this.render[method](ltr, this.dg.hoverRowCls);\r\n            }\r\n            if (rightTableDom && rtr) {\r\n                this.render[method](rtr, this.dg.hoverRowCls);\r\n            }\r\n\r\n            this.render[method](trDom, this.dg.hoverRowCls);\r\n\r\n        }\r\n    }\r\n\r\n}\r\n","import { delay, filter, takeUntil } from 'rxjs/operators';\r\n\r\n/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2019-08-12 07:47:12\r\n* @LastEditors: ç¯çç§æ(Lucas Huang)\r\n* @LastEditTime: 2019-11-27 13:31:43\r\n* @QQ: 1055818239\r\n* @Version: v0.0.1\r\n*/\r\nimport { Renderer2, Self, NgZone, SimpleChanges, OnChanges, ChangeDetectorRef, OnDestroy, Optional, ContentChildren, QueryList, ViewChildren } from '@angular/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport {\r\n    Directive, Input, Output, EventEmitter, HostListener,\r\n    OnInit, ElementRef, AfterViewInit, Injector, Inject, forwardRef\r\n} from '@angular/core';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridCellComponent } from './datagrid-cell.component';\r\nimport { DatagridRow } from '../../types/datagrid-row';\r\nimport { DatagridValidator } from '../../types/datagrid-validator';\r\nimport { DatagridRowHoverDirective } from './datagrid-row-hover.directive';\r\nimport { Utils } from '../../utils/utils';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { FormatCellDataPipe } from '../../utils/format-cell-data.pipe';\r\nimport { ALLOW_EDIT_CELL_HIGHLIGHT_CLS, CUSTOM_ROW_CLS } from '../../types/constant';\r\n\r\n\r\n@Directive({\r\n    selector: '[grid-row]',\r\n    exportAs: 'gridRow'\r\n})\r\nexport class DatagridRowDirective implements OnInit, AfterViewInit, DatagridRow, OnChanges, OnDestroy {\r\n    @Input() editable = false;\r\n    @Input('grid-row') rowData: any;\r\n    @Input() rowIndex: number;\r\n    @Output() clickHandler = new EventEmitter();\r\n    @Output() rowUpdated = new EventEmitter();\r\n    // ç¨äºæ´è¡ç¼è¾ï¼å¿å¨ï¼ï¼ï¼\r\n    @ContentChildren(forwardRef(() => DatagridCellComponent), { descendants: true }) cells: QueryList<DatagridCellComponent>;\r\n\r\n\r\n    get rowId() {\r\n        if (this.rowData) {\r\n            return this.dfs.primaryId(this.rowData);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    get disabled() {\r\n        if (this.dg.disableRow) {\r\n            return this.dg.disableRow(this.rowData, this.rowIndex);\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    form: FormGroup = new FormGroup({});\r\n    private dfs: DatagridFacadeService;\r\n    private documentRowDblclickEvent: any = null;\r\n    private ngZone: NgZone;\r\n    private dgb: DatagridBodyComponent;\r\n    cd: ChangeDetectorRef;\r\n\r\n    columnsChangedSubscription: Subscription = null;\r\n    datasourceChangedSubscription: Subscription = null;\r\n    subscriptions: Subscription[] = [];\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        private injector: Injector, private fb: FormBuilder, public el: ElementRef,\r\n        private render: Renderer2, @Optional() @Self() public drHover: DatagridRowHoverDirective) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.dgb = this.injector.get(DatagridBodyComponent);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.datasourceChangedSubscription = this.dg.dgs.onDataSourceChange.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.renderCustomStyle();\r\n        });\r\n\r\n        this.columnsChangedSubscription = this.dg.dgs.columnsChanged.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.createControl();\r\n        });\r\n\r\n        const s$ = this.dg.dfs.rowUpdate$.pipe(\r\n            takeUntil(this.destroy$),\r\n            filter((row: any) => {\r\n                return row.keyID === this.rowId;\r\n            })\r\n        ).subscribe((row: { index: number, data: any }) => {\r\n            if (row && row.data) {\r\n                // this.rowData = cloneDeep(row.data);\r\n                if (this.dfs.primaryId(row.data) === this.rowId) {\r\n                    this.renderCustomStyle(row.data);\r\n                }\r\n\r\n                // æ­¤å¤ä¼å¯¼è³rowData ä¸æ°æ®æºçå¼ç¨ä¸ä¸è´\r\n                // this.rowData = {...row.data};\r\n                \r\n                // æ´æ°å½åæ°æ®\r\n                Object.assign(this.rowData, row.data);\r\n                \r\n                this.updateCellEmptyStyle();\r\n                this.rowUpdated.emit(this.rowData);\r\n                this.cd.detectChanges();\r\n            }\r\n        });\r\n        this.subscriptions.push(s$);\r\n\r\n        const s1$ = this.dg.dgs.updateEmptyStyle$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.updateCellEmptyStyle();\r\n        });\r\n        this.subscriptions.push(s1$);\r\n\r\n        const s2$ = this.dg.dfs.selectRow$.pipe(takeUntil(this.destroy$)).pipe(\r\n            filter((r: any) => {\r\n                return r.id === this.rowId;\r\n            })\r\n        ).subscribe(() => {\r\n            if (this.dg.selectedRow && !this.dg.selectedRow.dr) {\r\n                const p = this.getRowPosition();\r\n                if (p === 'left') {\r\n                    this.dg.selectedRow.drl = this;\r\n                } else if (p === 'right') {\r\n                    this.dg.selectedRow.drr = this;\r\n                } else {\r\n                    this.dg.selectedRow.dr = this;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.subscriptions.push(s2$);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.columnsChangedSubscription) {\r\n            this.columnsChangedSubscription.unsubscribe();\r\n            this.columnsChangedSubscription = null;\r\n        }\r\n\r\n        if (this.datasourceChangedSubscription) {\r\n            this.datasourceChangedSubscription.unsubscribe();\r\n            this.datasourceChangedSubscription = null;\r\n        }\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n\r\n        if (this.form) {\r\n            this.form = null;\r\n        }\r\n\r\n        this.cells = null;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.updateCellEmptyStyle();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.renderCustomStyle();\r\n        this.updateCellEmptyStyle();\r\n    }\r\n\r\n    private getRowPosition() {\r\n        const id = this.el.nativeElement.id;\r\n        if (id.indexOf('fixedleft') > -1) {\r\n            return 'left';\r\n        } else if (id.indexOf('fixedright') > -1) {\r\n            return 'right';\r\n        } else {\r\n            return 'center';\r\n        }\r\n    }\r\n\r\n\r\n    renderCustomStyle(rowData = null) {\r\n        if (this.dg.rowStyler) {\r\n            const _rd = rowData || this.rowData;\r\n            const trStyle = this.dg.rowStyler(_rd, this.rowIndex);\r\n            const tr = this.el.nativeElement;\r\n\r\n            const _cls = Array.from(tr.classList).find((n: string) => n.indexOf(CUSTOM_ROW_CLS) > -1);\r\n            if (_cls) {\r\n                tr.classList.remove(_cls);\r\n            }\r\n\r\n            if (trStyle && Object.keys(trStyle).length) {\r\n                const str = CUSTOM_ROW_CLS + this.dg.idService.encrypt(JSON.stringify(trStyle));\r\n                this.dg.renderCustomStyle2(trStyle, this.el.nativeElement, 'f-datagrid-body .' + str);\r\n                this.render.addClass(this.el.nativeElement, str);\r\n            }\r\n        }\r\n    }\r\n\r\n    // @HostListener('click', ['$event'])\r\n    onRowClick(event: MouseEvent) {\r\n/*\r\n        if (event.target['className'] && event.target['className'].indexOf('checkbox-column') > -1) {\r\n            return;\r\n        }\r\n\r\n        if (!this.dg.enableSelectRow) {\r\n            return;\r\n        }\r\n\r\n        if (this.dg.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (this.dg.currentCell && this.dg.currentCell.isEditing && this.rowId !== this.dg.currentCell.rowId ) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.dg.disableRow) {\r\n            if (this.dg.disableRow(this.rowData, this.rowIndex)) {\r\n                event.stopPropagation();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // if (!this.dg.editable) {\r\n        //     event.stopPropagation();\r\n        // }\r\n\r\n        const rowId = this.dfs.primaryId(this.rowData);\r\n\r\n        if (!rowId) {\r\n            this.dg.writeConsole(`å¨ç¬¬ ${this.rowIndex + 1} è¡ï¼ä¸»é®å­æ®µ[${this.dg.idField}]çå¼ä¸º ç©ºï¼è¯·æ£æ¥ç¸å³æ°æ®ã`);\r\n        }\r\n\r\n        const beforEventParam = {\r\n            rowIndex: this.rowIndex,\r\n            rowData: this.rowData,\r\n            gridInstance: this.dg\r\n        };\r\n\r\n        if (!event.shiftKey) {\r\n            this.dg.dgs.focusRowChanged.emit({\r\n                rowIndex: this.rowIndex,\r\n                rowData: this.rowData\r\n            });\r\n        }\r\n        const useNewSelectionMode = this.dg.sms.beforRowClick({ ...beforEventParam, e: event, id: rowId, dr: this });\r\n        if (useNewSelectionMode) {\r\n            return;\r\n        }\r\n\r\n        if (!this.dfs.isRowSelected(rowId)) {\r\n            const canendedit = this.dg.endRowEdit();\r\n\r\n            if (!canendedit || canendedit.canEnd) {\r\n                this.dg.beforeSelect(beforEventParam).pipe( takeUntil(this.destroy$)).pipe(\r\n                    delay(200)\r\n                ).subscribe((canSelect: boolean) => {\r\n                    if (canSelect) {\r\n                        this.dg.removeCellSelectedCls();\r\n                        this.dfs.selectRow(this.rowIndex, this.rowData, {instance: this.dg});\r\n                        if (this.dg.selectedRow) {\r\n                            this.dg.selectedRow.dr = this;\r\n                        }\r\n                        const trCLS = this.el.nativeElement.className;\r\n                        if (trCLS.indexOf('f-datagrid-row-selected') === -1) {\r\n                            this.el.nativeElement.className = trCLS + ' f-datagrid-row-selected';\r\n                        }\r\n                        // this.drHover.setRowHoverCls(false);\r\n                        // this.dg.selectChanged.emit(this.dg.selectedRow);\r\n                        this.clickHandler.emit();\r\n                    }\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    this.dg.dgs.setSelecedRow.emit({ selected: true, id: this.dfs.primaryId(this.rowData) });\r\n                });\r\n            }\r\n        } else {\r\n            if (this.dg.selectedRow && !this.dg.selectedRow.dr) {\r\n                this.dg.selectedRow.dr = this;\r\n            }\r\n\r\n            if (!this.dg.keepSelect) {\r\n                this.dg.beforeUnselect(beforEventParam).pipe(\r\n                    takeUntil(this.destroy$),\r\n                ).subscribe((canUnselect: boolean) => {\r\n                    if (canUnselect) {\r\n                        // this.dg.unSelect.emit(this.dg.selectedRow);\r\n                        this.dfs.unSelectRow(this.rowIndex, this.rowData, {instance: this.dg});\r\n\r\n                        const trCLS = this.el.nativeElement.className;\r\n                        if (trCLS.indexOf('f-datagrid-row-selected') > -1) {\r\n                            this.el.nativeElement.className = trCLS.replace('f-datagrid-row-selected', '');\r\n                        }\r\n                    }\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    this.dg.dgs.setSelecedRow.emit();\r\n                });\r\n            } else {\r\n                this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n            }\r\n        }\r\n            */\r\n        // this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n    }\r\n\r\n    initFormControl() {\r\n        this.form = this.fb.group({});\r\n        this.createControl();\r\n        this.form['bindingData'] = this.rowData;\r\n    }\r\n\r\n    createControl() {\r\n        if (this.dg && this.dg.flatColumns) {\r\n            this.dg.flatColumns.forEach(col => {\r\n                if (!col.editor && !col.editorTemplate) { return; }\r\n                if (!this.form.controls[col.field]) {\r\n                    const control = this.createFormControl(col);\r\n                    this.form.addControl(col.field, control);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private createFormControl(col) {\r\n        return this.fb.control(\r\n            Utils.getValue(col.field, this.rowData),\r\n            {\r\n                validators: col.editor ? this.bindValidations(col.editor.validators) : null\r\n            }\r\n        );\r\n    }\r\n\r\n    private bindValidations(validators: DatagridValidator[]) {\r\n        const validations = [];\r\n        if (validators && validators.length) {\r\n\r\n            validators.forEach((v: DatagridValidator) => {\r\n                let validation = null;\r\n                switch (v.type) {\r\n                    case 'required':\r\n                        validation = Validators.required;\r\n                        break;\r\n                    case 'min':\r\n                        validation = Validators.min(v.value);\r\n                        break;\r\n                    case 'max':\r\n                        validation = Validators.max(v.value);\r\n                        break;\r\n                    case 'minLength':\r\n                        validation = Validators.minLength(v.value);\r\n                        break;\r\n                    case 'maxLength':\r\n                        validation = Validators.maxLength(v.value);\r\n                        break;\r\n                    case 'email':\r\n                        validation = Validators.email;\r\n                        break;\r\n                    case 'requiredTrue':\r\n                        validation = Validators.requiredTrue;\r\n                        break;\r\n                    case 'pattern':\r\n                        validation = Validators.pattern(v.value);\r\n                        break;\r\n                }\r\n                if (validation) {\r\n                    validations.push(validation);\r\n                } else {\r\n                    if (this.dg.validators && this.dg.validators.length) {\r\n                        const vfn = this.dg.validators.find(vr => vr.name === v.type);\r\n                        if (vfn) {\r\n                            validation = vfn.value(this.rowData);\r\n                            validations.push(validation);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return validations;\r\n    }\r\n\r\n\r\n    refresh() {\r\n        this.updateRowHeight();\r\n        this.updateCellEmptyStyle();\r\n    }\r\n\r\n    updateRowHeight() {\r\n        if (!this.dg.nowrap) {\r\n            const centerTr = this.dgb.mainArea.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n            centerTr.style.height = 'auto';\r\n            const trHeight = centerTr.offsetHeight;\r\n            let leftTrDom = null;\r\n            let rightTrDom = null;\r\n            const heightSizeList = [trHeight];\r\n            if (this.dgb) {\r\n                if (this.dgb.fixedLeftEl) {\r\n                    leftTrDom = this.dgb.fixedLeftEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n                    if (leftTrDom) {\r\n                        leftTrDom.style.height = 'auto';\r\n                        heightSizeList.push(leftTrDom.offsetHeight);\r\n                    }\r\n                }\r\n                if (this.dgb.fixedRightEl) {\r\n                    rightTrDom = this.dgb.fixedRightEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n                    if (rightTrDom) {\r\n                        rightTrDom.style.height = 'auto';\r\n                        heightSizeList.push(rightTrDom.offsetHeight);\r\n                    }\r\n                }\r\n\r\n                const maxHeight = Math.max(...heightSizeList);\r\n\r\n                centerTr.style.height = `${maxHeight}px`;\r\n                if (leftTrDom) {\r\n                    leftTrDom.style.height = `${maxHeight}px`;\r\n                }\r\n\r\n                if (rightTrDom) {\r\n                    rightTrDom.style.height = `${maxHeight}px`;\r\n                }\r\n\r\n                this.cd.markForCheck();\r\n                this.dgb.updateCanvasHeight();\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateCellEmptyStyle() {\r\n\r\n        if (!this.dg.enableEditCellStyle) {\r\n            return;\r\n        }\r\n\r\n        let rowIsDisabled = false;\r\n        if (this.dg.disableRow) {\r\n            rowIsDisabled = this.dg.disableRow(this.rowData, this.rowIndex);\r\n        }\r\n\r\n        const updateCellEmptyText = (cells) => {\r\n            if (cells.length) {\r\n\r\n                for (let k = 0; k < cells.length; k++) {\r\n                    const field = cells[k].getAttribute('field');\r\n                    if (field) {\r\n                        const col = this.dfs.getColumn(field);\r\n                        if (col) {\r\n\r\n                            if (!col.editor) {\r\n                                continue;\r\n                            }\r\n                            const cls = col.align === 'right' ? 'allow-edit-cell-left' : 'allow-edit-cell';\r\n                            const emptyicon_cls = ALLOW_EDIT_CELL_HIGHLIGHT_CLS[col.editor.type];\r\n                            const span = cells[k].querySelector('.cell-text-box');\r\n                            const colVal = Utils.getValue(field, this.rowData);\r\n                            const fmtVal = this.dg.colFormatSer.format(colVal, this.rowData, col.formatter);\r\n                            if (!this.dg.editable || rowIsDisabled || this.dg.cellIsReadOnly(col, this.rowData)) {\r\n                                cells[k].className = cells[k].className.replace(cls, '');\r\n                                cells[k].className = cells[k].className.replace(emptyicon_cls, '');\r\n                                if (span) {\r\n                                    if (span.className.indexOf('cell-empty') > -1) {\r\n                                        span.className = span.className.replace('cell-empty', '');\r\n                                    }\r\n\r\n                                    if (colVal === '' || colVal === null || colVal === undefined) {\r\n                                        span.innerHTML = '';\r\n                                    } else {\r\n                                        span.innerHTML = fmtVal;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (span) {\r\n                                    if (colVal === '' || colVal === null || colVal === undefined) {\r\n                                        if (span.className.indexOf('cell-empty') === -1) {\r\n                                            span.className = span.className + ' cell-empty';\r\n                                        }\r\n\r\n                                        span.innerHTML = Utils.getWhenEmptyText(col, this.dg.localeService.localeId);\r\n                                    } else {\r\n                                        span.innerHTML = fmtVal;\r\n                                    }\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf('cell-readonly') > -1) {\r\n                                    cells[k].className = cells[k].className.replace('cell-readonly', '');\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf(cls) === -1) {\r\n                                    this.render.addClass(cells[k], cls);\r\n                                }\r\n\r\n                                if (cells[k].className.indexOf(emptyicon_cls) === -1) {\r\n                                    this.render.addClass(cells[k], emptyicon_cls);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        // if (this.dgb.fixedLeftEl) {\r\n        //     const leftTrDom = this.dgb.fixedLeftEl.nativeElement.querySelector('tr[index=\"' + this.rowIndex + '\"]');\r\n        //     if (leftTrDom) {\r\n        //         updateCellEmptyText(leftTrDom.querySelectorAll('td[field]'));\r\n        //     }\r\n        // }\r\n\r\n        const cells = this.el.nativeElement.querySelectorAll('td[field]:not([field=\"_datagrid-setting-control_\"])');\r\n        updateCellEmptyText(cells);\r\n    }\r\n}\r\n","import { ColumnFormatService } from '@farris/ui-common/column';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-07-29 08:14:22\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-11 11:38:58\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport {\r\n    ComponentFactoryResolver,\r\n    ComponentRef,\r\n    Directive,\r\n    Input,\r\n    OnInit,\r\n    AfterViewInit,\r\n    ViewContainerRef,\r\n    Injector,\r\n    OnDestroy,\r\n    Inject,\r\n    forwardRef,\r\n    ApplicationRef\r\n} from '@angular/core';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { DataColumn } from '../../types';\r\n\r\n@Directive({\r\n    selector: '[cell-editor]',\r\n})\r\nexport class GridCellEditorDirective implements OnInit, AfterViewInit, OnDestroy {\r\n    @Input() column: DataColumn;\r\n    @Input() group: FormGroup;\r\n    @Input() rowData: any;\r\n    @Input() value: any;\r\n    @Input() height: any;\r\n    componentRef: ComponentRef<any>;\r\n    private cfs: ColumnFormatService = null;\r\n    private timer = null;\r\n    constructor(\r\n        private resolver: ComponentFactoryResolver,\r\n        private container: ViewContainerRef,\r\n        private app: ApplicationRef,\r\n        private fb: FormBuilder,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent\r\n    ) {\r\n        this.cfs = this.dg.inject.get(ColumnFormatService);\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.column.editor) {\r\n            this.createCellEditor();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.dg.dgs.cellEditorCreated.emit({ editorRef: this.componentRef, column: this.column, cellEditorRef: this});\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.dg.dgs.cellEditorDestory.emit({ editorRef: this.componentRef, column: this.column, cellEditorRef: this});\r\n        if (this.componentRef) {\r\n            this.componentRef.destroy();\r\n        }\r\n        this.componentRef = null;\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n    }\r\n\r\n    private createCellEditor() {\r\n\r\n        const editorType = this.column.editor.type;\r\n\r\n        if (!this.dg.editors[editorType]) {\r\n            this.dg.writeConsole(`æ¾ä¸å°åç§°ä¸º ${editorType} å¯¹åºçç±»ã`, 'error');\r\n            return;\r\n        }\r\n\r\n        const factory = this.resolver.resolveComponentFactory(\r\n            this.dg.editors[editorType]\r\n        );\r\n        this.componentRef = this.container.createComponent(factory);\r\n\r\n        // this.componentRef.instance.dg = this.dg;\r\n        // this.app.attachView(this.componentRef.hostView);\r\n        this.componentRef.instance.column = this.column;\r\n        this.componentRef.instance.group = this.group;\r\n        this.componentRef.instance.height = this.height;\r\n        this.componentRef.instance.controlId = (this.dg.id || 'DATAGRID_EDITOR') + '_' + this.column.field;\r\n\r\n        this.updateControlValue();\r\n        this.componentRef.changeDetectorRef.markForCheck();\r\n        this.componentRef.changeDetectorRef.detectChanges();\r\n        // this.app.tick();\r\n        if (this.timer) {\r\n            clearTimeout(this.timer);\r\n        }\r\n        this.timer = setTimeout(() => {\r\n            if (this.componentRef.instance.instance) {\r\n                if (editorType === 'lookup') {\r\n                    if (!this.componentRef.instance.instance.changeDetector.destroyed) {\r\n                        this.componentRef.instance.instance.changeDetector.detectChanges();\r\n                    }\r\n                    // this.componentRef.instance['bindingData'] = this.rowData;\r\n                }\r\n                // if (editorType === 'textarea') {\r\n                //     const textareaEl = this.componentRef.instance.inputElement;\r\n                //     textareaEl.style.height = textareaEl.closest('tr').style.height;\r\n                // }\r\n            }\r\n        });\r\n    }\r\n\r\n    private updateControlValue() {\r\n        if (this.group) {\r\n            this.group['bindingData'] = this.rowData;\r\n            if (this.group.controls[this.column.field]) {\r\n                // if (this.column.editor.type === 'datepicker') {\r\n                //     const dateRef = this.componentRef.instance.instance;\r\n                //     if (dateRef) {\r\n                //         setTimeout(() => {\r\n                //             const { dateFormat } = dateRef.dateOpts;\r\n                //             const val = this.cfs.format(this.value, this.rowData, {type: 'datetime', options: { format: dateFormat}});\r\n                //             this.group.controls[this.column.field].setValue(val, { emitEvent: true });\r\n                //         });\r\n                //     }\r\n                // } else {\r\n                //     this.group.controls[this.column.field].setValue(this.value, { emitEvent: true });\r\n                // }\r\n\r\n                this.group.controls[this.column.field].setValue(this.value, { emitEvent: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    hideCover() {\r\n        if (this.componentRef && this.column.editor && (this.column.editor.type === 'combolist' || this.column.editor.type === 'combo-lookup')) {\r\n            this.componentRef.instance.hide(!1);\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 10:11:59\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-12 10:12:05\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n    name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n    private dangerWords = ['<script', 'onerror', 'alert('];\r\n\r\n    constructor(protected sanitizer: DomSanitizer) { }\r\n\r\n    public transform(value: any, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\r\n        switch (type) {\r\n            case 'html': {\r\n                if (value === '' || value === null || value === undefined) {\r\n                    return value;\r\n                }\r\n                // if (!this.hasDanger(value)) {\r\n                //     return value;\r\n                // }\r\n                return this.sanitizer.bypassSecurityTrustHtml(value);\r\n            }\r\n            case 'style': return this.sanitizer.bypassSecurityTrustStyle(value);\r\n            case 'script': return this.sanitizer.bypassSecurityTrustScript(value);\r\n            case 'url': return this.sanitizer.bypassSecurityTrustUrl(value);\r\n            case 'resourceUrl': return this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n            default: throw new Error(`Invalid safe type specified: ${type}`);\r\n        }\r\n    }\r\n\r\n    private hasDanger(value) {\r\n        if (typeof value  === 'number' || typeof value === 'boolean') {\r\n            return false;\r\n        }\r\n\r\n        let r = 0;\r\n\r\n        this.dangerWords.forEach(n => {\r\n            if (value.indexOf(n) > -1) {\r\n                r++;\r\n            }\r\n        });\r\n\r\n        return r !== 0;\r\n    }\r\n\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-31 09:11:02\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, Output, EventEmitter, OnChanges,\r\n    ViewChild, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, ViewContainerRef,\r\n    OnDestroy, Injector, Inject, forwardRef, AfterViewInit, SimpleChanges, Renderer2, ComponentFactoryResolver} from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { CellContext, CellTemplateFn, DataColumn, ICellTemplateComponent } from '../../types/data-column';\r\nimport { Utils } from '../../utils/utils';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridRowDirective } from './datagrid-row.directive';\r\nimport { CellInfo } from '../../services/state';\r\nimport { GridCellEditorDirective } from '../editors/cell-editor.directive';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { SafePipe } from './../../utils/safe.pipe';\r\nimport { TR_PREFIX } from '../../types/constant';\r\n@Component({\r\n    selector: 'grid-body-cell',\r\n    template: `\r\n    <div\r\n     [cell-tooltip]=\"column.showTips && !isEditing\"   [attr.tipMode]=\" column.tipMode || 'auto'\"\r\n     [attr.message]=\"column | tipmsg: rowData\"  [attr.position]=\" column?.tipOptions?.position || 'top-left'\"\r\n     [attr.tipWidth]=\"column?.tipOptions?.width\" [attr.tipHeight]=\"column?.tipOptions?.height\"\r\n     class=\"f-datagrid-cell-content\" #cellContainer  [component-template]=\"column\" [ctx]=\"cellContext\"\r\n    >\r\n        <ng-container *ngIf=\"!isEditing && !column.template && !column.componentType\">\r\n            <ng-container *ngIf=\"column.formatter\">\r\n                <span class=\"cell-text-box\" *ngIf=\"cellFormatterIsFn\" [innerHtml]=\" column | formatCellData: rowData | safe: 'html'\"></span>\r\n                <span class=\"cell-text-box\" *ngIf=\"!cellFormatterIsFn\">{{  column | formatCellData: rowData }}</span>\r\n            </ng-container>\r\n            <span *ngIf=\"!column.formatter\" class=\"cell-text-box\" [class.grid-cell-nowrap]=\"dg.nowrap\" [class.grid-cell-wrap]=\"!dg.nowrap\">{{  column | formatCellData: rowData }}</span>\r\n        </ng-container>\r\n\r\n        <ng-container #cellTemplate *ngIf=\"!isEditing && column.template && !column.componentType\" [ngTemplateOutlet]=\"column.template\" [ngTemplateOutletContext]=\"{$implicit: cellContext}\"></ng-container>\r\n        <ng-container #cellEditorTemplate *ngIf=\"isEditing && column.editorTemplate\" [ngTemplateOutlet]=\"column.editorTemplate\" [ngTemplateOutletContext]=\"{$implicit: cellContext}\"></ng-container>\r\n        <ng-container #editorTemplate *ngIf=\"isEditing && !column.editorTemplate\" cell-editor [height]=\"controlHeight\" [rowData]=\"rowData\" [value]=\"value\" [column]=\"column\" [group]=\"dr.form\"></ng-container>\r\n    </div>\r\n    `,\r\n    changeDetection: ChangeDetectionStrategy.Default\r\n})\r\nexport class DatagridCellComponent implements OnInit, OnDestroy, AfterViewInit, OnChanges {\r\n    @Input() width: number;\r\n    @Input() height: number;\r\n    @Input() cls = '';\r\n    @Input() column: DataColumn;\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: number;\r\n    @Input() lastColumn = false;\r\n    // @ViewChild('celltip') celltip: DatagridCellTooltipDirective;\r\n\r\n    private _isEditing = false;\r\n    controlHeight = 'auto';\r\n    get isEditing() {\r\n        return this._isEditing;\r\n    }\r\n    @Input() set isEditing(v) {\r\n        if (this._isEditing === v) {\r\n            return;\r\n        }\r\n        this._isEditing = v;\r\n\r\n        if (v) {\r\n            if (!this.dr.form || !Object.keys(this.dr.form.controls).length ) {\r\n                this.dr.initFormControl();\r\n            }\r\n\r\n            if (this.column.editorTemplate && this.column.editorTemplate.elementRef) {\r\n                this.cellContext.formGroup = this.dr.form;\r\n\r\n                setTimeout(() => {\r\n\r\n                    if (this.el) {\r\n                        const input = this.el.nativeElement.querySelector('input,textarea');\r\n                        if (input) {\r\n                            input.focus();\r\n                        }\r\n                    }\r\n                }, 10);\r\n            }\r\n        }\r\n        if (this.column.editor && this.column.editor.type === 'textarea') {\r\n            if (!this.dg.nowrap) {\r\n                this.controlHeight = this.dr.el.nativeElement.offsetHeight;\r\n            }\r\n        }\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    @Input() isSelected = false;\r\n\r\n    @ViewChild('cellContainer') cellContainer: ElementRef;\r\n    @ViewChild('cellTemplate', {read: ViewContainerRef }) cellTemplateVcr: ViewContainerRef;\r\n\r\n\r\n    private _cellEditorTemplate = null;\r\n    @ViewChild('cellEditorTemplate', {read: ViewContainerRef })\r\n    get cellEditorTemplate(): ViewContainerRef {\r\n        return this._cellEditorTemplate;\r\n    }\r\n    set cellEditorTemplate(v) {\r\n        this._cellEditorTemplate = v;\r\n        if (v) {\r\n            this.dg.dgs.cellEditorCreated.emit({ editorRef: null, column: this.column, cellEditorRef: null, templateRef: v});\r\n        }\r\n    }\r\n\r\n    @ViewChild(GridCellEditorDirective) cellEditor;\r\n\r\n\r\n    @Output() cellClick = new EventEmitter();\r\n    @Output() cellDblClick = new EventEmitter();\r\n\r\n    cellContext: Partial<CellContext> = {};\r\n    get value() {\r\n        if (this.rowData && this.column && this.column.field) {\r\n            return Utils.getValue(this.column.field, this.rowData);\r\n        }\r\n        return '';\r\n    }\r\n\r\n    get formControl() {\r\n        if (this.cellEditor && this.cellEditor.componentRef) {\r\n            return this.cellEditor.componentRef.instance.formControl;\r\n        } else if (this.column.editorTemplate) {\r\n            return this.dr.form.get(this.column.field);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    get cellFormatterIsFn() {\r\n        return typeof this.column.formatter === 'function' || this.column.formatter.type === 'boolean';\r\n    }\r\n\r\n    cellStyler: any = {};\r\n\r\n    private dfs: DatagridFacadeService;\r\n    private dgs: DatagridService;\r\n    private cellSubscription: Subscription;\r\n    private rowUpdateSubscription: Subscription;\r\n    private safePipe: SafePipe = null;\r\n    private render: Renderer2;\r\n    private ro: ResizeObserver = null;\r\n    canEdit = () => this.dg.editable && this.dg.editMode === 'cell' && this.column.editor;\r\n\r\n    private cfr:ComponentFactoryResolver;\r\n\r\n    constructor(\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridRowDirective)) public dr: DatagridRowDirective,\r\n        public el: ElementRef, public cd: ChangeDetectorRef, private injector: Injector,\r\n        public colFormatSer: ColumnFormatService,\r\n        private domSanitizer: DomSanitizer\r\n    ) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.safePipe = new SafePipe(this.domSanitizer);\r\n        this.render = this.injector.get(Renderer2);\r\n\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n       \r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.initCellTemplateContext();\r\n    }\r\n\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.initCellTemplateContext();\r\n            this.buildCustomCellStyle();\r\n\r\n            if (this.formControl) {\r\n                const val = Utils.getValue(this.column.field, this.rowData);\r\n                this.formControl.setValue(val);\r\n            }\r\n        }\r\n    }\r\n\r\n    private initCellTemplateContext() {\r\n        this.cellContext = {\r\n            field: this.column.field,\r\n            rowIndex: this.rowIndex,\r\n            rowData: this.rowData,\r\n            column: this.column,\r\n            instance: this,\r\n            formGroup: this.dr.form,\r\n            tools: {\r\n                utils: this.dg.commonUtils,\r\n                format: this.dg.colFormatSer,\r\n                number: this.dg.colFormatSer['numberhelper'],\r\n                date: this.dg.colFormatSer['datehelper']\r\n            },\r\n        };\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.buildCustomCellStyle();\r\n\r\n        const fieldClsName = 'cell-text-align__' + this.column.field.replace(/\\./g, '_');\r\n        this.render.addClass(this.cellContainer.nativeElement, fieldClsName);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.cellSubscription) {\r\n            this.cellSubscription.unsubscribe();\r\n            this.cellSubscription = null;\r\n        }\r\n\r\n        if (this.rowUpdateSubscription) {\r\n            this.rowUpdateSubscription.unsubscribe();\r\n            this.rowUpdateSubscription = null;\r\n        }\r\n\r\n\r\n        this.cellContext = null;\r\n    }\r\n\r\n\r\n    private buildCustomCellStyle(rowData = null) {\r\n        const td = this.el.nativeElement.parentNode;\r\n        const fieldName = this.column.field.replace(/\\./g,  '_');\r\n\r\n        if (!td.id) {\r\n            td.id = TR_PREFIX + this.dr.rowId + '_' + this.rowIndex + '-' + fieldName;\r\n        }\r\n        // td.id = td.id.replace(/\\./g, '_');\r\n        let clsName = 'customcellcls_' + fieldName + '_';\r\n       \r\n        const removeCls = () => {\r\n            const _cls = Array.from(td.classList).find((n: string) => n.indexOf('customcellcls_') > -1);\r\n            if (_cls) {\r\n                td.classList.remove(_cls);\r\n            }\r\n        }\r\n        \r\n        if (this.column.styler) {\r\n            const _rd = rowData || this.rowData;\r\n            const fieldValue = Utils.getValue(this.column.field, _rd);\r\n            const cs = this.column.styler(fieldValue, _rd, this.rowIndex);\r\n            if (cs && Object.keys(cs).length) {\r\n                removeCls();\r\n                // clsName = clsName.replace(/\\./g, '_');\r\n                clsName = clsName + this.dg.idService.encrypt(JSON.stringify(cs));\r\n                this.render.addClass(td, clsName);\r\n                this.dg.renderCustomStyle2(cs, td, clsName);\r\n            }\r\n        } else {\r\n            removeCls();\r\n        }\r\n    }\r\n\r\n    updateValue(val?: any) {\r\n        if (this.dr.form) {\r\n            // this.rowData = Object.assign(this.rowData, this.dr.form.value);\r\n            Utils.setValue(this.column.field, val, this.rowData);\r\n            // this.rowData = {...this.rowData};\r\n            const rowid = this.rowData[this.dg.idField];\r\n            const item = this.dg.data.find(n => n[this.dg.idField] === rowid);\r\n            if (item) {\r\n                Utils.setValue(this.column.field, val, item);\r\n            }\r\n\r\n            this.dfs.updateCheckedData(rowid, { [this.column.field]: val });\r\n\r\n            if (!this.cd['destroyed']) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-19 15:48:27\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Directive, Input, ElementRef, Renderer2, OnInit, ContentChild, OnDestroy, Injector, forwardRef, Inject, AfterViewInit, NgZone, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { filter, map, switchMap, takeLast, debounceTime, takeUntil } from 'rxjs/operators';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridCellComponent } from './datagrid-cell.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { DatagridRowDirective } from './datagrid-row.directive';\r\nimport { DataColumn } from './../../types/data-column';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { CELL_SELECTED_CLS, CELL_EDITING_CLS, ALLOW_EDIT_CELL_HIGHLIGHT_CLS, TR_PREFIX, TR_ID_PREFIX } from '../../types/constant';\r\nimport { DomHandler } from '../../services/domhandler';\r\nimport { of, Subscription,  noop, Subject, Observable  } from 'rxjs';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Directive({\r\n    selector: '[cell-editable]',\r\n    exportAs: 'cellEditable'\r\n})\r\nexport class DatagridCellEditableDirective implements OnInit, OnDestroy, OnChanges, AfterViewInit {\r\n    @Input('cell-editable') rowData: any;\r\n    @Input() column: DataColumn;\r\n\r\n    private clickTimer: any;\r\n\r\n    private cellclick: any;\r\n    private celldblclick: any;\r\n    private bindCellEventSubscription: Subscription;\r\n\r\n    private editorInputKeydownEvent: any;\r\n    editor: any;\r\n    formControl: FormControl;\r\n    cellEditorRef: any;\r\n\r\n\r\n    @ContentChild(DatagridCellComponent) dc: DatagridCellComponent;\r\n    private dgb: DatagridBodyComponent;\r\n    private dr: DatagridRowDirective;\r\n    private dfs: DatagridFacadeService;\r\n    private dgs: DatagridService;\r\n\r\n    // private _readonly$ = null;\r\n    private cellEditorCreatedSubscription = null;\r\n    private cellEditorDestorySubscription = null;\r\n    private destroy$ = new Subject();\r\n    private validMessageEle = null;\r\n\r\n    constructor(\r\n        private injector: Injector, public el: ElementRef, private render: Renderer2,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent, public ngZone: NgZone) {\r\n        this.dgb = this.injector.get(DatagridBodyComponent);\r\n        this.dr = this.injector.get(DatagridRowDirective);\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n\r\n\r\n        if (!this.cellEditorCreatedSubscription) {\r\n            this.cellEditorCreatedSubscription = this.dgs.cellEditorCreated.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).pipe(\r\n                filter(({ column, editorRef, cellEditorRef, templateRef }) => {\r\n                    return column.field === this.column.field && this.dg.selectedRow.id === this.dr.rowId;\r\n                })\r\n            ).subscribe(({ editorRef, cellEditorRef, templateRef }) => {\r\n                if (editorRef) {\r\n                    this['editor'] = editorRef.instance;\r\n                    this['formControl'] = this.editor.formControl as FormControl;\r\n                    this.cellEditorRef = cellEditorRef;\r\n                    this.emitBeginEdit();\r\n                } else {\r\n                    this['formControl'] = this.dr.form.get(this.column.field) as FormControl;\r\n                    this.bindEditorInputEvent();\r\n                    this.dg.beginEdit.emit({ editor: null, column: this.column, rowData: this.rowData, gridInstance: this.dg, template: templateRef });\r\n                }\r\n\r\n                this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n            });\r\n        }\r\n\r\n        this.dg.dgs.cellEditorDestory.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            filter(({ column }) => {\r\n                return this.dg.selectedRow && column.field === this.column.field && this.dg.selectedRow.id === this.dr.rowId;\r\n            })\r\n        ).subscribe((e: any) => {\r\n            if (this.dg.editMode === 'cell') {\r\n                this.dg.selectedRow.editors = [];\r\n                if (this.dg.currentCell) {\r\n                    this.dg.currentCell.editor = null;\r\n                    this.dg.currentCell.cellEditorRef = null;\r\n                }\r\n            }\r\n            this.unBindEditorInputEvent();\r\n            this.cellEditorRef = null;\r\n            this.formControl = null;\r\n            this.editor = null;\r\n\r\n            this.removeValidMessage();\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowData && !changes.rowData.isFirstChange()) {\r\n            this.initCellEvent();\r\n            this.setCellClsWithEditorType();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.initCellEvent();\r\n        this.setCellClsWithEditorType();\r\n    }\r\n\r\n\r\n    private runZoneClick(e: any) {\r\n        if(this['zoneClick']) {\r\n\r\n            Object.assign(e, {rowData: this.rowData});\r\n\r\n            this['zoneClick'].forEach(n => {\r\n                n.target.style.pointerEvents = 'auto';\r\n                if (n.callback) {\r\n                    n.callback(e);\r\n                } else if (n.handler) {\r\n                    n.handler(e);\r\n                }\r\n            });\r\n\r\n            if (this.dg.isFF) {\r\n                e.target['__zone_symbol__clickfalse'] = this['zoneClick'];\r\n            }\r\n        }\r\n    }\r\n\r\n    private initCellEvent() {\r\n        if (this.column && (this.column.editor || this.column.editorTemplate)) {\r\n            if (!this.dg.clickToEdit) {\r\n                this.celldblclick = this.render.listen(this.el.nativeElement, 'dblclick', (e) => {\r\n                    this.onDblClickCell(e);\r\n                });\r\n            }\r\n            this.el.nativeElement.edit = (e) => {\r\n                this.closeEditingCell().subscribe((canEdit: boolean) => {\r\n                    if (canEdit) {\r\n                        this.onClickCell(e);\r\n\r\n                        if (!this.dg.selectedRow || this.dg.selectedRow.id !== this.dr.rowId) {\r\n                            this.dg.selectRow(this.dr.rowId, true, false);\r\n                        }\r\n\r\n                        this.runZoneClick(e);\r\n                    }\r\n                });\r\n            }\r\n            this.el.nativeElement.editCell = (e) => {\r\n                this.openCellEditor();\r\n            };\r\n        } else {\r\n            this.clickTimer = 0;\r\n        }\r\n\r\n        \r\n        const excludeTarget = (e: any) => {\r\n            return e.target.parentElement.nodeName !== 'GRID-BODY-CELL' &&\r\n            e.target.nodeName !== 'INPUT' &&  e.target.nodeName !== 'TEXTAREA' &&\r\n            !(e.target.className.indexOf('custom-control-label') > -1 && \r\n            e.target.parentElement && e.target.parentElement.className.indexOf('custom-control') > -1) &&\r\n            !e.target.closest('input-group') && !e.target.closest('farris-switch') &&\r\n            !e.target.closest('farris-number-spinner') &&\r\n            !e.target.closest('farris-datepicker') &&\r\n            !e.target.closest('farris-time-picker') && \r\n            !e.target.closest('grid-editor-textarea') &&\r\n            !e.target.closest('farris-checkboxgroup') && \r\n            !e.target.closest('grid-editor-checkbox') && !e.target.closest('farris-radiogroup') &&\r\n            !e.target.closest('farris-organization-selector') && !e.target.closest('farris-personnel-selector');\r\n        }\r\n\r\n        if (this.column.proxyClick === undefined) {\r\n            this.column.proxyClick = true;\r\n        }\r\n\r\n        if (this.column.template && this.column.proxyClick) {\r\n            if (this['_tdmousedown_']) {\r\n                this.el.nativeElement.removeEventListener('mousedown', this['_tdmousedown_'], true);\r\n                this['_tdmousedown_'] = null;\r\n            }\r\n\r\n            this.el.nativeElement.addEventListener('mousedown', this['_tdmousedown_'] = (e: any) => {\r\n                if (excludeTarget(e)) {\r\n                    this['zoneClick'] = e.target['__zone_symbol__clickfalse'] || e.target['__zone_symbol__ANGULARclickFALSE'];\r\n                    if (this['zoneClick'] && this['zoneClick'].length) {\r\n                        if (!this.dg.isFF) {\r\n                            e.target.style.pointerEvents = 'none';\r\n                        } else {\r\n                            if (e.target['__zone_symbol__clickfalse']) {\r\n                                delete(e.target['__zone_symbol__clickfalse']);\r\n                            }\r\n                            if (e.target['__zone_symbol__ANGULARclickFALSE']) {\r\n                                delete(e.target['__zone_symbol__ANGULARclickFALSE']);\r\n                            }\r\n                        }\r\n                        this['zoneClick'].forEach((proxyClick => {\r\n                            if (!proxyClick.target) {\r\n                                proxyClick.target = e.target;\r\n                            }\r\n                        }));\r\n                    }\r\n                }\r\n            }, true);\r\n            \r\n            /*\r\n            this['_tdmousedown_'] = this.render.listen(this.el.nativeElement, 'mousedown', (e: any) => {\r\n                if (excludeTarget(e)) {\r\n                    this['zoneClick'] = e.target['__zone_symbol__clickfalse'] || e.target['__zone_symbol__ANGULARclickFALSE'];\r\n                    if (this['zoneClick'] && this['zoneClick'].length) {\r\n                        e.target.style.pointerEvents = 'none';\r\n                        this['zoneClick'].forEach((proxyClick => {\r\n                            if (!proxyClick.target) {\r\n                                proxyClick.target = e.target;\r\n                            }\r\n                        }));\r\n                    }\r\n                }\r\n            });\r\n            */\r\n        }\r\n\r\n        this.el.nativeElement.gridCellData = { rowData: this.rowData, rowIndex: this.dr.rowIndex };\r\n        this.el.nativeElement.closeEdit = () => this.closeEditingCell();\r\n        this.el.nativeElement.selectCell = (e, el) => {\r\n            if (this.dg.disableRow && this.dg.disableRow(this.rowData, this.dr.rowIndex)) {\r\n                return;\r\n            }\r\n\r\n            const beforEventParam = {\r\n                rowIndex: this.dr.rowIndex,\r\n                rowData: this.rowData,\r\n                gridInstance: this.dg\r\n            };\r\n\r\n            const runTemplateClickEvent = () => {\r\n\r\n                if (!this.dg.currentCell) {\r\n                    this.selectCell(this.column.field, el);\r\n                    if (!this.dg.currentCell) {\r\n                        this.dg.currentCell = { rowData: this.rowData }\r\n                    } else {\r\n                        if (!this.dg.currentCell.rowData){\r\n                            this.dg.currentCell.rowData = this.rowData;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if(this['zoneClick']) {\r\n                    this.runZoneClick(e);\r\n                }\r\n\r\n                this.dg.cellClick.emit({ column: this.column, rowData: this.rowData, gridInstance: this.dg, event: e });\r\n            }\r\n\r\n            const useNewSelectionMode = this.dg.sms.beforRowClick({ ...beforEventParam, e, id: this.dr.rowId, dr: this.dr, cellref: this });\r\n            if (useNewSelectionMode) {\r\n                this.selectCell(this.column.field, el);\r\n                if (!this.dg.currentCell) {\r\n                    this.dg.currentCell = { rowData: this.rowData }\r\n                } else {\r\n                    if (!this.dg.currentCell.rowData){\r\n                        this.dg.currentCell.rowData = this.rowData;\r\n                    }\r\n                }\r\n                this.dg.cellClick.emit({ column: this.column, rowData: this.rowData, gridInstance: this.dg, event: e });\r\n                return;\r\n            }\r\n           \r\n            if (this.dfs.isRowSelected(this.dr.rowId)) {\r\n                if (!this.dg.keepSelect && !this.column.template) {\r\n\r\n                    if (this.dg.currentCell && this.dg.currentCell.cellElement && this.dg.currentCell.cellElement.id === el.id) {\r\n                        this.dg.cancelSelectCell();\r\n                    }\r\n\r\n                    this.dg.beforeUnselect(beforEventParam).pipe(\r\n                        takeUntil(this.destroy$),\r\n                    ).subscribe((canUnselect: boolean) => {\r\n                        if (canUnselect) {\r\n                            // this.dg.unSelect.emit(this.dg.selectedRow);\r\n                            this.dfs.unSelectRow(this.dr.rowIndex, this.rowData, {instance: this.dg});\r\n    \r\n                            const trCLS = this.el.nativeElement.className;\r\n                            if (trCLS.indexOf('f-datagrid-row-selected') > -1) {\r\n                                this.el.nativeElement.className = trCLS.replace('f-datagrid-row-selected', '');\r\n                            }\r\n                        }\r\n                        this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                        this.dg.dgs.setSelecedRow.emit();\r\n                    });\r\n                } else {\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    runTemplateClickEvent();\r\n                }\r\n            } else {\r\n                let r$: Observable<any> = of(true);\r\n                if (this.dg.beforeSelect) {\r\n                    const r = this.dg.beforeSelect({ rowIndex: this.dr.rowIndex , rowData: this.rowData, gridInstance: this.dg });\r\n                    if (r && r.subscribe) {\r\n                        r$ = r;\r\n                    }\r\n                }\r\n                const zoneClick = this['zoneClick'];\r\n                const _timer = zoneClick && zoneClick.length ? 100: 0;\r\n                r$.pipe(debounceTime(_timer)).subscribe((t) => {\r\n                    if (t) {\r\n                        this.selectCell(this.column.field, el);\r\n                        this.dg.cellClick.emit({ column: this.column, rowData: this.rowData, gridInstance: this.dg, event: e });\r\n                        if (_timer) {\r\n                            this.runZoneClick(e);\r\n                        }\r\n                    }\r\n                    this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                    this.dg.dgs.setSelecedRow.emit();\r\n                });\r\n            }\r\n        };\r\n        this.el.nativeElement.cancelSelected = () => {\r\n            this.render.removeClass(this.el.nativeElement, CELL_SELECTED_CLS);\r\n            this.render.removeClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n        };\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.cellclick) {\r\n            this.cellclick();\r\n        }\r\n\r\n        if (this.celldblclick) {\r\n            this.celldblclick();\r\n        }\r\n\r\n        this.unBindEditorInputEvent();\r\n\r\n        if (this.bindCellEventSubscription) {\r\n            this.bindCellEventSubscription.unsubscribe();\r\n            this.bindCellEventSubscription = null;\r\n        }\r\n\r\n        if (this.cellEditorCreatedSubscription) {\r\n            this.cellEditorCreatedSubscription.unsubscribe();\r\n            this.cellEditorCreatedSubscription = null;\r\n        }\r\n\r\n        if (this.cellEditorDestorySubscription) {\r\n            this.cellEditorDestorySubscription.unsubscribe();\r\n            this.cellEditorDestorySubscription = null;\r\n        }\r\n\r\n        this.editor = null;\r\n        this.cellEditorRef = null;\r\n        this.formControl = null;\r\n\r\n        if (this.el) {\r\n            this.el.nativeElement.cancelSelected = noop;\r\n            this.el.nativeElement.selectCell = noop;\r\n            this.el.nativeElement.closeEdit = noop;\r\n            this.el.nativeElement.gridCellData = noop;\r\n            this.el.nativeElement.edit = noop;\r\n            this.el.nativeElement.selectCell = noop;\r\n\r\n            if (this['_tdmousedown_']) {\r\n                this.el.nativeElement.removeEventListener('mousedown', this['_tdmousedown_'], true);\r\n                this['_tdmousedown_'] = null;\r\n            }\r\n            this.el = null;\r\n        }\r\n\r\n    }\r\n\r\n    private isDifferentCell() {\r\n        if (!this.dg.currentCell) {\r\n            return true;\r\n        } else {\r\n            if (!this.dg.selectedRow || this.dg.selectedRow.index !== this.dr.rowIndex) {\r\n                return true;\r\n            } else {\r\n                if (this.dr.rowIndex !== this.dg.currentCell.rowIndex) {\r\n                    return true;\r\n                } else {\r\n                    return this.dg.currentCell.field !== this.column.field;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onClickCell(event: any) {\r\n        // å³é­å¶ä»Grid çç¼è¾å¨\r\n        document.body.click();\r\n\r\n        this.dg.beforeClickCell.emit({ rowIndex: this.dr.rowIndex, rowData: this.rowData, column: this.column, gridInstance: this.dg });\r\n\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (this.dg.disabled) {\r\n            return;\r\n        } else {\r\n            if (!this.dg.editable || this.isReadonly()) {\r\n                if (this.dg.enableHighlightCell) {\r\n                    event.stopPropagation();\r\n                    this.dg.endEditing();\r\n                    this.selectCell(this.column.field);\r\n                }\r\n                // åªè¯»ååæ ¼ï¼ç¹å»åé¡»è§¦åè¡ç¹å»äºä»¶ tfs 574551\r\n                this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n                return;\r\n            } else {\r\n                if (this.dg.editMode === 'row') {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.dg.selectionMode === 'default' && event) {\r\n            if (event.ctrlKey || event.shiftKey) {\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        event.stopPropagation();\r\n        if (event.target['nodeName'] === 'INPUT') {\r\n            return;\r\n        }\r\n\r\n\r\n        // if (this.dg.clickToEdit && !this.dg.dblclickRow.observers.length) {\r\n        //     this.dg.clickDelay = 0;\r\n        // }\r\n\r\n\r\n        this.render.addClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n\r\n        if (!this.dg.isSingleClick && this.dg.editMode) {\r\n            this.dg.isSingleClick = true;\r\n\r\n            if (this.clickTimer) {\r\n                clearTimeout(this.clickTimer);\r\n            }\r\n\r\n            this.clickTimer = setTimeout(() => {\r\n                if (this.dg.isSingleClick && this.dg.editable && this.dg.editMode === 'cell') {\r\n                    this.dg.isSingleClick = false;\r\n                    clearTimeout(this.clickTimer);\r\n                    // if (!this.closeEditingCell()) {\r\n                    //     return;\r\n                    // }\r\n                    this.closeEditingCell().pipe(\r\n                        takeUntil(this.destroy$)\r\n                    ).subscribe((f: any) => {\r\n                        if (f) {\r\n                            if (this.dg.clickToEdit) {\r\n                                !this.dg.nowrap && this.dgb.updateRowHeight();\r\n                                this.openCellEditor();\r\n                            } else {\r\n                                this.selectCell(this.column.field);\r\n                            }\r\n                            this.render.removeClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n                            event.preventDefault();\r\n                        }\r\n                    });\r\n                }\r\n            }, this.dg.clickDelay);\r\n        }\r\n    }\r\n\r\n    private onDblClickCell(event: MouseEvent) {\r\n        if (this.dg.disabled || this.isReadonly()) {\r\n            return;\r\n        }\r\n\r\n        if (event.target['nodeName'] === 'INPUT' || event.target['nodeName'] === 'TEXTAREA') {\r\n            return;\r\n        }\r\n        if (this.dg.editable && this.dg.editMode === 'cell') {\r\n            if (this.clickTimer) {\r\n                this.dg.isSingleClick = false;\r\n                clearTimeout(this.clickTimer);\r\n                this.clickTimer = null;\r\n            }\r\n            \r\n            this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                if (f) {\r\n                    setTimeout(() => {\r\n                        this.openCellEditor();\r\n                    });\r\n                }\r\n            });\r\n        }\r\n  \r\n    }\r\n\r\n    isReadonly(col = this.column) {\r\n        if (this.dg.editable) {\r\n            // åä¸åå¹¶çååæ ¼ä¸åè®¸ç¼è¾\r\n            if (this.dg.mergeCell && this.dg.mergeFields.indexOf(col.field) > -1) {\r\n                return true;\r\n            }\r\n            return this.getReadonlyValue(col);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private getReadonlyValue(col = this.column) {\r\n        if (col.readonly !== undefined) {\r\n            if (typeof col.readonly === 'boolean') {\r\n                return col.readonly;\r\n            } else if (typeof col.readonly === 'function') {\r\n                return col.readonly(this.rowData);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    openCellEditor() {\r\n        // å½åè¡ç¦ç¨ï¼ä¸åè®¸ç¼è¾ã\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        if ((!this.column.editor && !this.column.editorTemplate) || !this.dg.editable || this.isReadonly()) {\r\n            if (this.dg.selectionMode === 'default' && this.dg.multiSelect) {\r\n                this.dg.clearCheckeds();\r\n            }\r\n            this.selectCell(this.column.field);\r\n            return;\r\n        }\r\n\r\n        const beforeEditEvent = this.dg.beforeEdit({ rowIndex: this.dr.rowIndex, rowData: this.rowData, column: this.column, gridInstance: this.dg });\r\n        if (!beforeEditEvent || !beforeEditEvent.subscribe) {\r\n            this.dg.writeConsole('please return an Observable Type.');\r\n            return;\r\n        }\r\n\r\n        if (this.dg.currentCell) {\r\n            if (!this.dg.currentCell.cellRef || this.dg.currentCell.cellRef.column.field !== this.column.field) {\r\n                this.dg.currentCell.cellRef = this.dc;\r\n            }\r\n        }\r\n\r\n\r\n        beforeEditEvent.pipe(takeUntil(this.destroy$)).subscribe((flag) => {\r\n            if (flag) {\r\n                if (this.isDifferentCell()) {\r\n\r\n                    if (this.dg.selectionMode === 'default' && this.dg.multiSelect) {\r\n                        this.dg.clearCheckeds();\r\n                    }\r\n\r\n                    this.selectCell(this.column.field);\r\n                }\r\n                this.dfs.editCell();\r\n            } else {\r\n                this.selectCell(this.column.field);\r\n                // tfs 574612\r\n                this.dg.rowClick.emit({ data: this.rowData, grid: this.dg, dblclick: false });\r\n            }\r\n        });\r\n    }\r\n\r\n    private emitBeginEdit() {\r\n\r\n        const _cellEditorRef = this.cellEditorRef || this.dc.cellEditor;\r\n\r\n        this.render.removeClass(this.dg.el.nativeElement, 'f-datagrid-unselect');\r\n\r\n        if (this.dg.editMode === 'cell') {\r\n            this.dg.selectedRow.editors = [this.editor];\r\n            this.dg.currentCell.editor = this.editor;\r\n            this.dg.currentCell.cellEditorRef = _cellEditorRef;\r\n            this.bindEditorInputEvent();\r\n\r\n            this.render.addClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n\r\n            // this.formControl.setValue(this.dc.value);\r\n            this.dg.beginEdit.emit({ editor: _cellEditorRef, column: this.column, rowData: this.rowData, gridInstance: this.dg });\r\n\r\n            if (this.column.editor.type === 'textarea' && this.column.editor.options && this.column.editor.options.editType === 'dialog') {\r\n                this.editor.showDialog();\r\n            }\r\n        }\r\n\r\n        if (this.dr && !this.dg.nowrap) {\r\n            setTimeout(() => {\r\n                this.dr.updateRowHeight();\r\n            });\r\n        }\r\n\r\n        if (this.editor) {\r\n            this.validMessageEle = this.showValidMessage();\r\n        }\r\n    }\r\n\r\n    removeValidMessage() {\r\n        // ç§»é¤éªè¯ä¿¡æ¯\r\n        if (this.validMessageEle) {\r\n            this.validMessageEle.remove();\r\n            this.validMessageEle = null;\r\n            if (this.dg.formValidations) {\r\n                delete this.dg.formValidations[this.column.field];\r\n            }\r\n        }\r\n    }\r\n\r\n    showValidMessage() {\r\n        if (this.dg.formValidations && this.dg.formValidations[this.column.field]) {\r\n            const {isValid, message} = this.dg.formValidations[this.column.field];\r\n            if (!isValid && message) {\r\n                const tr = this.editor.el.nativeElement.closest('tr');\r\n                const td = this.editor.el.nativeElement.closest('td');\r\n                const parentContainver = this.editor.el.nativeElement.closest('.f-datagrid-table');\r\n\r\n                const box = document.createElement('div');\r\n                const msgWrap = document.createElement('span');\r\n                box.appendChild(msgWrap);\r\n                msgWrap.innerText = message;\r\n\r\n                box.style.position = 'absolute';\r\n                box.style.background = '#FDEFEF';\r\n                box.style.color = '#F46160';\r\n\r\n                let top = tr.offsetTop - 21;\r\n                if (tr.getAttribute('index') == '0') {\r\n                    top = tr.offsetHeight; \r\n                }\r\n\r\n                box.style.top = `${top}px`;\r\n                box.style.left = `${td.offsetLeft + 5}px`;\r\n                box.style.zIndex = '996';\r\n                box.style.padding = '0.1875rem 0.5rem';\r\n                box.style.fontSize = '.8125rem';\r\n                box.style.lineHeight = '14px';\r\n\r\n                // document.body.append(box);\r\n                parentContainver.append(box);\r\n\r\n                return box;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n\r\n    closeEditingCell() {\r\n        if (!this.dg.isCellEditing()) {\r\n            return of(true);\r\n        }\r\n\r\n        let currentCell = null;\r\n        let editor: any = null;\r\n        if (this.dg.currentCell) {\r\n\r\n            currentCell = this.dg.currentCell.cellRef as DatagridCellComponent;\r\n            if (currentCell) {\r\n                if (!currentCell.isEditing) {\r\n                    return of(true);\r\n                }\r\n\r\n                if (currentCell.cellEditor && currentCell.cellEditor.componentRef && !currentCell.column.editorTemplate) {\r\n                    editor = currentCell.cellEditor.componentRef.instance;\r\n\r\n                    if (editor) {\r\n                        // æ§è¡blur äºä»¶\r\n                        if (editor.inputElement) {\r\n                            const domName = editor.inputElement.nodeName;\r\n                            const blurFn =  editor.options && editor.options.onBlur;\r\n                            if (blurFn) {\r\n                                if ((domName === 'INPUT' || domName === 'TEXTAREA') &&  this.dg['focusElement'] === editor.inputElement) {\r\n                                    blurFn({ editorRef: editor, rowData: currentCell.rowData});\r\n                                }\r\n                            }\r\n                            if (editor.inputElement.blur) {\r\n                                editor.inputElement.blur();\r\n                            }\r\n\r\n                            this.dg['focusElement'] = null;\r\n                        }\r\n\r\n                        if (editor.blur) {\r\n                            editor.blur();\r\n                        }\r\n\r\n                        if (editor.pending) {\r\n                            return of(false);\r\n                        }\r\n\r\n                        if (editor.formControl) {\r\n                            if (editor.formControl.pending) {\r\n                                return of(false);\r\n                            }\r\n\r\n                            if (editor.formControl && editor.formControl.invalid && !this.dg.endEditByInvalid) {\r\n                                return of(false);\r\n                            }\r\n                        } else {\r\n                            return of(true);\r\n                        }\r\n                    } else {\r\n                        return of(true);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            return of(true);\r\n        }\r\n\r\n        this.dg.isSingleClick = false;\r\n        const _col_ = (editor || currentCell).column;\r\n        const afterEditEvent = this.dg.afterEdit(currentCell.rowIndex, currentCell.rowData, _col_, editor);\r\n        if (!afterEditEvent || !afterEditEvent.subscribe) {\r\n            this.dg.writeConsole('please return an Observable Type.');\r\n            return of(undefined);\r\n        }\r\n\r\n        // let cellEndEdit = of(undefined);\r\n        let cellEndEdit = new Subject();\r\n\r\n        afterEditEvent.pipe(takeUntil(this.destroy$)).subscribe((flag: boolean) => {\r\n            if (flag) {\r\n\r\n                let val = currentCell.value === undefined ? '' : currentCell.value;\r\n                if (currentCell && currentCell.formControl && currentCell.formControl.value !== undefined && val !== currentCell.formControl.value) {\r\n                    val = currentCell.formControl.value;\r\n                    currentCell.isEditing = false;\r\n                    currentCell.updateValue(val);\r\n                }\r\n\r\n                this.dfs.endEditCell();\r\n                this.dgs.onEndCellEdit(this.dfs.getCurrentCell());\r\n                this.unBindEditorInputEvent();\r\n                // ç§»é¤ç¼è¾æ ·å¼\r\n                this.render.removeClass(this.el.nativeElement, CELL_EDITING_CLS);\r\n\r\n                if (this.dg.selectedRow) {\r\n                    this.dg.selectedRow.editors = [];\r\n                }\r\n                // this.dg.selectedRow.data = this.rowData;\r\n                // æ´æ°è¡æ ·å¼æèååæ ¼æ ·å¼\r\n                const _rid = this.dfs.primaryId(currentCell.rowData);\r\n                this.dfs.rowUpdate$.next({ index: currentCell.rowIndex, data: currentCell.rowData, cellRef: currentCell, keyID: _rid });\r\n\r\n                if (this.dg.showFooter) {\r\n                    // æ´æ°footerData\r\n                    this.dgs.refreshFooterData.emit();\r\n                }\r\n               \r\n                // å·æ°è¡æ°æ®\r\n                // this.dr.refresh();\r\n                if (this.dg.selectedRow && this.dg.selectedRow.dr) {\r\n                    this.dg.selectedRow.dr.refresh();\r\n                }\r\n\r\n                if (this['ENDEDIT_TIMER']) {\r\n                    clearTimeout(this['ENDEDIT_TIMER']);\r\n                }\r\n\r\n                const { rowIndex, rowData } = currentCell;\r\n\r\n                this['ENDEDIT_TIMER'] = setTimeout(() => {\r\n                    this.dg.endEdit.emit({ rowIndex, rowData, column: _col_, value: val});\r\n                    // cellEndEdit = of(true);\r\n                    cellEndEdit.next(true);\r\n                }, 100);\r\n            } else {\r\n                if (currentCell && currentCell.cellEditor && currentCell.cellEditor.componentRef && currentCell.cellEditor.componentRef.instance) {\r\n                    editor = currentCell.cellEditor.componentRef.instance;\r\n                    editor.inputElement.focus();\r\n                    // cellEndEdit = of(false);\r\n                    cellEndEdit.next(false);\r\n                } else {\r\n                    // cellEndEdit = of(true);\r\n                    cellEndEdit.next(true);\r\n                }\r\n            }\r\n        });\r\n        return cellEndEdit.asObservable();\r\n    }\r\n\r\n    cancelCellEditing() {\r\n        if (this.dg.currentCell && this.dg.currentCell.isEditing && this.dg.selectedRow.index > -1) {\r\n            // this.dfs.resetRow(this.dg.selectedRow.id);\r\n            this.dc.rowData = this.dg.selectedRow.data;\r\n            this.formControl.reset(Utils.getValue(this.column.field, this.dc.rowData));\r\n            this.closeEditingCell();\r\n        }\r\n    }\r\n\r\n\r\n    bindEditorInputEvent() {\r\n        const ceRef = this.cellEditorRef || this.dc.cellEditor;\r\n        let input = null;\r\n        if (ceRef) {\r\n            input = ceRef.componentRef.instance.inputElement;\r\n        } else {\r\n            if (this.column.editorTemplate) {\r\n                input = this.dc.el.nativeElement.querySelector('input,textarea');\r\n            }\r\n        }\r\n        if (input) {\r\n            input.focus();\r\n            if (this.dg.selectOnEditing && this.column.editorTemplate) {\r\n                setTimeout(() => {\r\n                    if (input.select) { input.select(); }\r\n                });\r\n            }\r\n\r\n            this.editorInputKeydownEvent = this.render.listen(input, 'keydown', (e) => {\r\n                this.onKeyDownForInput(e);\r\n            });\r\n        }\r\n    }\r\n\r\n    unBindEditorInputEvent() {\r\n        if (this.editorInputKeydownEvent) {\r\n            this.editorInputKeydownEvent();\r\n            this.editorInputKeydownEvent = null;\r\n        }\r\n    }\r\n\r\n    // private isLastCell() {\r\n    //     let i = this.dg.flatColumns.length;\r\n    //     while(i <= ) {\r\n    //         if (this.dg.flatColumns[i])\r\n    //     }\r\n    // }\r\n\r\n    findLastEditCell() {\r\n        let i = this.dg.colGroup.columns.length - 1;\r\n        let _col = null;\r\n        while(i >= 0) {\r\n            const col = this.dg.colGroup.columns[i];\r\n            if (col.editor || col.editorTemplate) {\r\n                _col = col;\r\n                break;\r\n            } else {\r\n                i--;\r\n            }\r\n        }\r\n\r\n        return _col;\r\n    }\r\n\r\n    onKeyDownForInput(e: KeyboardEvent) {\r\n        const keyCode = e.keyCode;\r\n        if (e.altKey || e.ctrlKey) {\r\n            return;\r\n        }\r\n        if ((this.editor && this.editor.stopPropagation) || keyCode === 13 || this.column.editorTemplate) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        switch (keyCode) {\r\n            case 32:  // SPACE\r\n                if (this.column.editor.type === 'switch') {\r\n                    e.preventDefault();\r\n                    this.editor.instance.updateChecked(e, false);\r\n                }\r\n                break;\r\n            case 13:  // Enter\r\n                this.closeEditingCell().pipe(takeUntil(this.destroy$)).pipe(\r\n                    debounceTime(100)\r\n                ).subscribe(f => {\r\n                    if (f) {\r\n                        this.dg.dgContainer.nativeElement.focus();\r\n                        const lastEditCell = this.findLastEditCell();\r\n                        \r\n                        const enterParam = { gird: this.dg, cell: this.dg.currentCell, event: e, lastCell: lastEditCell.field === this.column.field };\r\n                        if (this.column.onEnterHandler) {\r\n                            this.column.onEnterHandler(enterParam);\r\n                        } else {\r\n                            const nextTd = this.dg.findNextCell(this.column.field, 'right');\r\n                            if (this.dg.currentCell.lastRow && (!nextTd || lastEditCell.field === this.column.field)) {\r\n                                this.dg.lastCellEnterHandler.emit(enterParam);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                break;\r\n            case 27: // ESC\r\n                this.cancelCellEditing();\r\n                break;\r\n            case 9: // Tab\r\n                e.stopPropagation();\r\n                this.dg.clickDelay = 0;\r\n                if (e.shiftKey) {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.movePrevCellAndEdit();\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.moveNextCellAndEdit(e);\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n            case 40: // â\r\n                /** éä¸­ä¸ä¸è¡ï¼ä¸å½ååè¿å¥ç¼è¾æ; ä»æ®éææ¬è¾å¥æ¡æ¯æ */\r\n                if (this.column.editor.type === 'textbox') {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.selectNextRowAndEditCell(this.column.field, 'down');\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n            case 38: // â\r\n                /** éä¸­ä¸ä¸è¡ï¼ä¸å½ååè¿å¥ç¼è¾æ; ä»æ®éææ¬è¾å¥æ¡æ¯æ */\r\n                if (this.column.editor.type === 'textbox') {\r\n                    this.closeEditingCell().pipe(takeUntil(this.destroy$)).subscribe(f => {\r\n                        if (f) {\r\n                            this.selectNextRowAndEditCell(this.column.field, 'up');\r\n                        }\r\n                    });\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    private selectCell(field: string, tdElement?: any) {\r\n        this.closeEditingCell().subscribe(t => {\r\n            if (!t) {\r\n                return;\r\n            }\r\n            tdElement = tdElement || this.el.nativeElement;\r\n            this.clearCellSelectedClass();\r\n\r\n            if (field && field !== this.dg.ControlPanelFeild && field.indexOf('farris-datagrid-column') === -1) {\r\n                this.render.addClass(tdElement, CELL_SELECTED_CLS);\r\n            }\r\n\r\n            // this.dr.drHover.setRowHoverCls(false);\r\n            this.dfs.setCurrentCell(this.dr, field, tdElement, this.dc);\r\n            if (!this.dg.fast && this.column.fixed !== 'left' && this.column.fixed !== 'right') {\r\n                this.moveScrollbar(tdElement);\r\n            }\r\n        });\r\n    }\r\n\r\n    private moveScrollbar(td: any) {\r\n        const tdPosLeft = td.offsetLeft + td.offsetWidth;\r\n        const containerWidth = this.dg.width - this.dgb.columnsGroup.leftFixedWidth - this.dgb.columnsGroup.rightFixedWidth;\r\n        const tdRect = td.getBoundingClientRect();\r\n        const scrollContainer = this.dgb.ps.elementRef.nativeElement;\r\n        const psContainer = scrollContainer.getBoundingClientRect();\r\n        const scrollTop = scrollContainer.scrollTop;\r\n        const scrollLeft = scrollContainer.scrollLeft;\r\n        const scrollbarXLeft = this.dgb.ps.elementRef.nativeElement.scrollLeft;\r\n        if (tdPosLeft > containerWidth) {\r\n            const x = tdPosLeft - containerWidth + 2;\r\n            // const x = tdPosLeft - this.dgb.ps.instance.scrollbarXWidth + 2;\r\n            if (x > scrollbarXLeft) {\r\n                this.dgb.ps.scrollToX(x);\r\n            }\r\n        } else {\r\n            // if (tdRect.x < psContainer.x) {\r\n            //     const x = scrollLeft - tdRect.x;\r\n            //     this.dgb.ps.scrollToX(x);\r\n            // }\r\n            if (td.offsetLeft < scrollLeft) {\r\n                this.dgb.ps.scrollToX(td.offsetLeft);\r\n            }\r\n        }\r\n\r\n        const tdPosTop = tdRect.top - psContainer.top + tdRect.height;\r\n        if (tdPosTop > psContainer.height) {\r\n            const y = tdPosTop - psContainer.height;\r\n            this.dgb.ps.scrollToY(scrollTop + y);\r\n        } else {\r\n            if (tdRect.y < psContainer.y) {\r\n                this.dgb.ps.scrollToY(scrollTop - (psContainer.y - tdRect.y));\r\n            }\r\n        }\r\n    }\r\n\r\n    private moveNextCellAndEdit(event?: any) {\r\n        // if (!this.closeEditingCell()) {\r\n        //     return;\r\n        // }\r\n        // const fieldIndex = this.dfs.getColumnIndex(this.column.field);\r\n        const fieldIndex = this.dg.colGroup.columns.findIndex(n => (n.id && n.id === this.column.id) || n.field === this.column.field);\r\n        if (fieldIndex + 1 < this.dgb.columnsGroup.columns.length) {\r\n            const nextColumn = this.dgb.columnsGroup.columns[fieldIndex + 1];\r\n            const nextTd: any = this.dg.findNextTd(nextColumn);\r\n\r\n            if (nextTd && (!nextColumn.fixed || nextColumn.fixed === 'center')) {\r\n                this.moveScrollbar(nextTd);\r\n            }\r\n\r\n            // const nextTd = this.dg.currentCell.cellElement.nextElementSibling;\r\n            if (nextColumn && ((!nextColumn.editor && !nextColumn.editorTemplate) || this.isReadonly(nextColumn))) {\r\n                if (nextTd) {\r\n                    nextTd.selectCell(event, nextTd);\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (nextTd) {\r\n                nextTd.focus();\r\n                if (nextColumn.editor || nextColumn.editorTemplate) {\r\n                    nextTd.editCell();\r\n                    this.dgs.onCellEdit(nextTd);\r\n                }\r\n            }\r\n        } else {\r\n            // next row's first cell to editing\r\n            const nextTr = this.dg.currentCell.cellElement.parentElement.nextElementSibling;\r\n            if (nextTr && nextTr.tagName === 'TR') {\r\n                // nextTr.children.find(td => td.editCell).editCell();\r\n                let firstEditor = false;\r\n                let i = 0;\r\n                while (!firstEditor) {\r\n                    firstEditor = !!nextTr.children[i].editCell;\r\n                    if (!firstEditor) {\r\n                        i++;\r\n                    }\r\n                }\r\n                if (this.dg.selectionMode === 'default') {\r\n                    this.dg.clearCheckeds();\r\n                }\r\n                nextTr.children[i].editCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    private movePrevCellAndEdit() {\r\n        // if (!this.closeEditingCell()) {\r\n        //     return;\r\n        // }\r\n        const fieldIndex = this.dfs.getColumnIndex(this.column.field);\r\n        if (fieldIndex - 1 >= 0) {\r\n            const nextColumn = this.dgb.columnsGroup.normalColumns[fieldIndex - 1];\r\n            if (nextColumn && this.isReadonly(nextColumn)) {\r\n                return;\r\n            }\r\n            const nextTd = this.dg.currentCell.cellElement.previousElementSibling;\r\n            if (nextTd) {\r\n                // this.selectCell(nextColumn.field, nextTd);\r\n                nextTd.focus();\r\n                if (nextColumn.editor) {\r\n                    // this.dfs.editCell();\r\n                    nextTd.click();\r\n                    this.dgs.onCellEdit(nextTd);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private selectNextRowAndEditCell(cellFieldName: string, dir: 'down' | 'up') {\r\n\r\n        if(!this.dg.currentCell) {\r\n            this.dg.writeConsole('å½åéä¸­ååæ ¼ä¸ºç©º');\r\n            return;\r\n        }\r\n\r\n        const p = dir === 'down' ? 'nextElementSibling': 'previousElementSibling';\r\n        const nextTr = this.dg.currentCell.cellElement.parentElement[p];\r\n        if (nextTr && nextTr.tagName === 'TR') {\r\n            const td: any = Array.from(nextTr.children).find((td: any) => td.getAttribute('field') == cellFieldName);\r\n            if (td && td.editCell) {\r\n                if (this.dg.selectionMode === 'default' ) {\r\n                    this.dg.clearCheckeds();\r\n                }\r\n                td.editCell();\r\n            }\r\n        }\r\n    }\r\n\r\n    private clearCellSelectedClass() {\r\n        this.dg.removeCellSelectedCls();\r\n    }\r\n\r\n    private setCellClsWithEditorType() {\r\n\r\n        // è®¾ç½®å½åéä¸­ååæ ¼æ ·å¼\r\n        if (this.dg.currentCell && this.dg.enableHighlightCell) {\r\n            if (this.dg.currentCell.field === this.column.field && this.dg.currentCell.rowId === this.rowData[this.dg.idField] && !this.dc.isEditing) {\r\n                this.clearCellSelectedClass();\r\n                this.render.addClass(this.el.nativeElement, CELL_SELECTED_CLS);\r\n            }\r\n        }\r\n\r\n\r\n        if (!this.dg.enableEditCellStyle) {\r\n            return;\r\n        }\r\n\r\n        const td = this.el.nativeElement;\r\n        this.cleanOtherEditorIcon(td);\r\n        // å½åè¡ç¦ç¨ï¼ä¸åè®¸ç¼è¾ã\r\n        if (this.dr.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (!this.column.editor) {\r\n            return;\r\n        }\r\n\r\n        if (this.isReadonly()) {\r\n            return;\r\n        }\r\n\r\n        const editorType = this.column.editor.type;\r\n        const cls = this.column.align === 'right' ? 'allow-edit-cell-left' : 'allow-edit-cell';\r\n        this.render.addClass(td, cls);\r\n        this.render.addClass(td, ALLOW_EDIT_CELL_HIGHLIGHT_CLS[editorType]);\r\n    }\r\n\r\n    private cleanOtherEditorIcon(td) {\r\n        const values = Object.values(ALLOW_EDIT_CELL_HIGHLIGHT_CLS);\r\n        values.forEach(v => {\r\n            if (td.className.indexOf(v) > -1) {\r\n                td.className = td.className.replace('allow-edit-cell-left', '').replace('allow-edit-cell', '');\r\n                td.className = td.className.replace(v, '');\r\n            }\r\n        });\r\n    }\r\n}\r\n","\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 08:19:06\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, AfterViewInit, Injector, Inject, forwardRef } from '@angular/core';\r\nimport { ChangeDetectorRef, NgZone, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { DataColumn, SCROLL_X_ACTION, TR_ID_PREFIX } from '../../types';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD, GROUP_LEVEL_FIELD } from '../../services/state';\r\nimport { delay, takeUntil } from 'rxjs/operators';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Component({\r\n    selector: 'datagrid-rows',\r\n    templateUrl: './datagrid-rows.component.html',\r\n    // changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatagridRowsComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input() startRowIndex: number;\r\n    @Input() data: any;\r\n    @Input() columns: DataColumn[];\r\n    @ViewChild('tableEl') tableEl: ElementRef;\r\n    /** æ¯å¦ä¸ºå³ä¾§åºå®åãé»è®¤ä¸º false */\r\n    @Input() fixedRight = false;\r\n    /** æ¯å¦æå·¦ä¾§åºå®å */\r\n    @Input() hasFixedColumns = false;\r\n\r\n    @Input() width: number;\r\n\r\n    isGroupRow = IS_GROUP_ROW_FIELD;\r\n    /** åç»è¡ç¶IDå­æ®µ */\r\n    groupRow = GROUP_ROW_FIELD;\r\n    isGroupFooter = IS_GROUP_FOOTER_ROW_FIELD;\r\n    visible = GROUP_VISIBLE_FIELD;\r\n    groupLevelField = GROUP_LEVEL_FIELD;\r\n\r\n    filterConditions = '';\r\n\r\n\r\n    get groupSummaryDataInGroupRow() {\r\n        return this.dg.groupSummaryPosition === 'inGroupRow';\r\n    }\r\n\r\n    checkedRows = [];\r\n\r\n    private ro: ResizeObserver = null;\r\n    private scrollToCurrentRowSubscription: Subscription;\r\n    private subscriptions: Subscription[] = [];\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        public cd: ChangeDetectorRef,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent,\r\n        @Inject(forwardRef(() => DatagridBodyComponent)) public dgb: DatagridBodyComponent,\r\n        public el: ElementRef, private injector: Injector, private ngZone: NgZone) {\r\n\r\n    }\r\n\r\n    private listenEvent() {\r\n        const _s3 = this.dg.dgs.setSelecedRow.pipe(takeUntil(this.destroy$)).subscribe((r: any) => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_s3);\r\n\r\n        const _s4 = this.dg.dfs.rowAppend$.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_s4);\r\n\r\n        const _s5 = this.dg.dfs.rowUpdate$.pipe(takeUntil(this.destroy$)).subscribe((row: { index: number; data: any; }) => {\r\n            if (row) {\r\n                if (this.dg.groupRows && this.dg.groupFooter && this.dg.groupField) {\r\n                    let groupRowId = row.data[this.groupRow];\r\n                    if (groupRowId === undefined) {\r\n                        const _row = this.dg.getRows().find(n => n.id === this.dg.dfs.primaryId(row.data));\r\n                        if (_row) {\r\n                            groupRowId = this.dg.commonUtils.getValue(this.groupRow, _row);\r\n                        }\r\n                    }\r\n                    if (groupRowId !== '' && groupRowId !== null) {\r\n                        this.dg.dfs.updateGroupFooter(groupRowId);\r\n                    } else {\r\n                        this.dg.writeConsole('æªè·åå°groupRowIdã', 'error');\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.subscriptions.push(_s5);\r\n\r\n        this.scrollToCurrentRowSubscription = this.dg.dgs.scrollToCurrentRow.pipe(\r\n            delay(50),\r\n        ).subscribe(() => {\r\n            this.scrollToFirstSelectedRow();\r\n            const scrollInfo = this.dg.dfs.getState().scrollInfo;\r\n            this.dg.scrollInstance.scrollToLeft();\r\n            if (this.dg.enableFilterRow && scrollInfo && scrollInfo.x) {\r\n                this.dg.dgs.closeFilterPanel.emit();\r\n            }\r\n        });\r\n\r\n\r\n        this.dg.dfs.checkRow$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dg.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n\r\n        this.dg.dfs.clearCheckeds$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows =  this.dg.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n\r\n\r\n        this.dg.dgs.toggleGroupRow$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(({ expand, groupRowIndex }) => {\r\n            this._toggleGroupRow(groupRowIndex, expand);\r\n            setTimeout(() => {\r\n                if (this.dgb.ps){\r\n                    this.dgb.ps.update();\r\n                }\r\n            }, 10);\r\n        });\r\n\r\n        this.dg.dgs.toggleAllGroupRows$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(({expand}) => {\r\n            this.toggleAllGroupRows(expand);\r\n            // setTimeout(() => {\r\n            //     this.dg.scrollToTop();\r\n            // });\r\n            setTimeout(() => {\r\n                if (this.dgb.ps){\r\n                    this.dgb.ps.update();\r\n                }\r\n            }, 10)\r\n        })\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.listenEvent();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unSubscriptions();\r\n    }\r\n\r\n    private _toggleGroupRow(groupRowIndex: number, expand: boolean = true) {\r\n        if (groupRowIndex > -1) {\r\n            const allRows = this.dg.getRows();\r\n            const groupRows = allRows.filter(n => n[IS_GROUP_ROW_FIELD]);\r\n            let gr = groupRows[groupRowIndex];\r\n            if (!gr) {\r\n                gr = allRows[groupRowIndex];\r\n            }\r\n            if (gr) {\r\n                this.toggleGroupRow(gr, groupRowIndex, expand);\r\n            }\r\n        }\r\n    }\r\n\r\n    private toggleAllGroupRows(expand = true) {\r\n        const groupRows = this.data.filter(n => n[IS_GROUP_ROW_FIELD]);\r\n        groupRows.forEach(gr => {\r\n            gr.expanded = expand;\r\n            this.dg.dfs.setGroupRowsVisible(gr, expand, false);\r\n        });\r\n\r\n        this.cd.detectChanges();\r\n        if (expand){\r\n            this.dg.dfs.expandGroupRow.emit();\r\n        } else {\r\n            this.dg.dfs.collapseGroupRow.emit();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private unSubscriptions() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.scrollToCurrentRowSubscription) {\r\n            this.scrollToCurrentRowSubscription.unsubscribe();\r\n            this.scrollToCurrentRowSubscription = null;\r\n        }\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe);\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                if (!this.dg.nowrap) {\r\n                    // this.dgb.updateRowHeight();\r\n                    this.dg.calculateGridSize();\r\n                }\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    getGroupColumn(field) {\r\n        return this.dg.flatColumns.find(col => col.field === field);\r\n    }\r\n\r\n    private detectChanges() {\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    trackByField(index, item) {\r\n        return item.field;\r\n    }\r\n\r\n    isElementInViewport(el) {\r\n        const container = this.dgb.ps.instance.element.getBoundingClientRect();\r\n        const box = el.getBoundingClientRect();\r\n        const top = (box.top <= container.height + container.top);\r\n        const bottom = (box.bottom <= (container.bottom));\r\n\r\n        return (top && bottom);\r\n    }\r\n\r\n    private _elementIntoView(tr: any, rowIndex: number) {\r\n        if (tr) {\r\n            if (tr.scrollIntoViewIfNeeded) {\r\n                tr.scrollIntoViewIfNeeded(false);\r\n            } else {\r\n                tr.scrollIntoView({ block: 'nearest', inline: 'nearest' });\r\n            }\r\n        } else {\r\n            const currentTrTop = rowIndex * this.dg.rowHeight;\r\n            if (currentTrTop) {\r\n                this.dg.scrollInstance.scrollToY(currentTrTop);\r\n            }\r\n        }\r\n    }\r\n\r\n    private scrollToFirstSelectedRow() {\r\n        if (this.dg.selectedRow) {\r\n            const rowIndex = this.dg.selectedRow.index;\r\n            const rowId = TR_ID_PREFIX + this.dg.selectedRow.id;\r\n            // const tr: any = document.querySelector(rowId);\r\n            const tr: any = Utils.getTrDomById(rowId, document);\r\n            if (rowIndex === 0) {\r\n                if (this.dgb.ps && this.dgb.ps.instance) {\r\n                    if (this.dgb.ps.instance.element.scrollTop === 0) {\r\n                        return;\r\n                    } else {\r\n                        this.dg.scrollInstance.scrollToY(0);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            const { top, bottom } = this.dgb.getVisibleRange();\r\n            if (rowIndex === top || rowIndex === bottom) {\r\n                this._elementIntoView(tr, rowIndex);\r\n                return;\r\n            } else {\r\n                if (rowIndex > top && rowIndex < bottom && tr && this.isElementInViewport(tr)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this._elementIntoView(tr, rowIndex);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    toggleGroupRow(row, index, open, $event?: MouseEvent) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        row.expanded = open;\r\n        this.dg.dfs.setGroupRowsVisible(row, open);\r\n    }\r\n\r\n    private mergeInfo(field: string, rowIndex: number) {\r\n        return this.dg.dgs.getMergeInfo(rowIndex, field, this.dg.mergeCellInfo);\r\n    }\r\n\r\n    showCell(col: DataColumn, rowIndex: number) {\r\n        const mergeInfo = this.mergeInfo(col.field, rowIndex);\r\n        let show = true;\r\n        if (mergeInfo) {\r\n            show = mergeInfo.show;\r\n        }\r\n\r\n        return show;\r\n    }\r\n\r\n    getRowSpan(col: DataColumn, rowIndex: number) {\r\n        const mergeInfo = this.mergeInfo(col.field, rowIndex);\r\n        if (!mergeInfo) {\r\n            return 1;\r\n        }\r\n        if (this.showCell(col, rowIndex)) {\r\n            col.readonly = true;\r\n            return mergeInfo.rowspan;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    getGroupSummaryData(groupId: string) {\r\n        const _data = this.dg.getRows();\r\n        if (_data && _data.length) {\r\n            const row = this.dg.getRows().find(n =>  n['__group_parent_id__'] === groupId && n['__group_footer__']);\r\n            if (row) {\r\n                return row.data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n","import { Component } from '@angular/core';\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-09-06 08:30:18\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-06 08:34:35\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\n/** å¼å®¹èçæ¬ï¼xxxxxxx */\r\n@Component({\r\n    selector: 'grid-editor-textbox',\r\n    template: ''\r\n})\r\nexport class TextboxEditorComponent {}\r\n","import { QueryList, OnDestroy } from '@angular/core';\r\n/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2019-08-06 07:43:53\r\n* @LastEditors: ç¯çç§æ(Lucas Huang)\r\n* @LastEditTime: 2019-11-20 20:14:11\r\n* @QQ: 1055818239\r\n* @Version: v0.0.1\r\n*/\r\n\r\nimport { ComponentFactoryResolver, ViewContainerRef, OnChanges, SimpleChanges, ComponentRef, ViewChildren } from '@angular/core';\r\n\r\nimport {\r\n    Component, OnInit, Input, Renderer2, ViewChild, ElementRef,\r\n    AfterViewInit, ViewEncapsulation, Injector, ChangeDetectorRef, Directive, Optional, NgZone\r\n} from '@angular/core';\r\n\r\nimport { DataColumn } from './../../types/data-column';\r\nimport { ColumnGroup } from '../../types/data-column';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { SCROLL_X_ACTION, FIXED_LEFT_SHADOW_CLS, SCROLL_X_REACH_START_ACTION, FIXED_RIGHT_SHADOW_CLS, SCROLL_X_REACH_END_ACTION, GRID_FILTER_ROW } from '../../types/constant';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridHeaderCheckboxComponent } from '../checkbox/datagrid-header-checkbox.component';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { DatagridFilterService } from '../../services/datagrid-filter.service';\r\nimport { of, Observable, Subject, Subscription, fromEvent, race } from 'rxjs';\r\nimport { buffer, bufferCount, debounceTime, filter, first, map, repeat, takeUntil, tap } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'datagrid-header',\r\n    templateUrl: './header.component.html',\r\n    styles: [`\r\n        .f-datagrid-header-cell:hover>div>div {\r\n            width: calc(100% - 15px);\r\n        }\r\n\r\n        .drag-column-bar.f-icon-more-vertical:before {\r\n            position: relative;\r\n            top: -2px;\r\n        }\r\n        .f-datagrid-header-cell-content .f-datagrid-sort:before {\r\n            position: relative;\r\n            top: -1px;\r\n        }\r\n    `],\r\n    encapsulation: ViewEncapsulation.None,\r\n    exportAs: 'dgHeader'\r\n})\r\nexport class DatagridHeaderComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\r\n    @Input() height = 35;\r\n    @Input() columns = [];\r\n    @Input() columnsGroup: ColumnGroup;\r\n    @Input() enableDragColumn = false;\r\n    @Input() wrapHeader = false;\r\n    @Input() enableFilterRow = false;\r\n\r\n    @Input() scrollbarMode = 'auto';\r\n\r\n    /** å¯ç¨æ§è½ä¼åç */\r\n    @Input() fast = false;\r\n\r\n\r\n    @ViewChild('header') header: ElementRef;\r\n    @ViewChild('headerContainer') headerColumnsTable: ElementRef;\r\n    @ViewChild('fixedLeft') fixedLeft: ElementRef;\r\n\r\n    \r\n\r\n    private _chkall: DatagridHeaderCheckboxComponent;\r\n    @ViewChild('chkAll') set chkAll(v) {\r\n        this._chkall = v;\r\n    }\r\n\r\n    private fixedRight: ElementRef;\r\n    @ViewChild('fixedRight') set fr(val) {\r\n        if (val) {\r\n            this.fixedRight = val;\r\n        }\r\n    }\r\n\r\n    private dgs: DatagridService;\r\n    private dfs: DatagridFacadeService;\r\n    private ro: ResizeObserver | null = null;\r\n    private cfr: ComponentFactoryResolver;\r\n    private dfrs: DatagridFilterService;\r\n    private el: ElementRef;\r\n    rightFixedColumnWidth = 0;\r\n    normalColumnWidth = 0;\r\n\r\n    private cd: ChangeDetectorRef;\r\n    showOverlay = false;\r\n    disableSort = false;\r\n    private scrollX = 0;\r\n    showShadowCls = false;\r\n\r\n    top = 0;\r\n\r\n    // è¡å· ã å¤éæ¡ï¼å¨å¤è¡¨å¤´ä¸çåå¹¶è¡æ°\r\n    get rowSpan() {\r\n        // TFS 495872\r\n        // return this.columns.length + (this.dg.enableFilterRow ? 1 : 0);\r\n        return this.columns.length;\r\n    }\r\n\r\n    hasFixedLeftColumns = false;\r\n\r\n    private ps;\r\n    private destroy$ = new Subject();\r\n    lineNumberTitle = 'åºå·';\r\n\r\n\r\n    constructor(\r\n        private render2: Renderer2, private injector: Injector,\r\n        @Optional() public dg: DatagridComponent, private ngZone: NgZone) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.el = this.injector.get(ElementRef);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n        this.dgs.scorll$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((d: any) => {\r\n\r\n            if (d.type === SCROLL_X_ACTION || d.type === SCROLL_X_REACH_END_ACTION || d.type === SCROLL_X_REACH_START_ACTION) {\r\n                this.scrollX = d.x;\r\n                this.render2.setStyle(this.headerColumnsTable.nativeElement, 'transform', `translate3d(-${d.x}px, 0px, 0px)`);\r\n                if (!this.dg.groupRows) {\r\n                    if (this.fixedLeft) {\r\n                        if (d.x) {\r\n                            this.render2.addClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                        } else {\r\n                            this.render2.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (d.type === SCROLL_X_REACH_START_ACTION) {\r\n                if (this.fixedLeft) {\r\n                    this.render2.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.dgs.showFixedShadow.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((e: any) => {\r\n            if (this.fixedRight) {\r\n                this.setFixedColumnPosition(e.showRightShadow, e.x);\r\n            }\r\n        });\r\n\r\n        this.dgs.disableHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((flag: any) => {\r\n            this.showOverlay = flag;\r\n            this.disableSort = flag;\r\n            this.cd.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.dgs.checkedRowsTotalChanged$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this._chkall) {\r\n                const checkedsCount = this.dfs.getCurrentPageCheckeds().length;\r\n                const isCheckAll = this.dfs.isCheckAll();\r\n                const isIndeterminate = isCheckAll || !checkedsCount;\r\n                this._chkall.chk.nativeElement.indeterminate = !isIndeterminate;\r\n                const _checked = isCheckAll && checkedsCount > 0;\r\n                this._chkall.updateStatus(_checked);\r\n            }\r\n        });\r\n\r\n        this.dgs.uncheckAll.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this.dg.showAllCheckbox && this._chkall) {\r\n                this._chkall.chk.nativeElement.indeterminate = false;\r\n                this._chkall.chk.nativeElement.checked = false;\r\n            }\r\n        });\r\n\r\n        this.dgs.checkAll.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this._chkall) {\r\n                this._chkall.chk.nativeElement.checked = true;\r\n            }\r\n        });\r\n\r\n        this.dgs.scrollbarUpdate.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((ps: any) => {\r\n            this.ps = ps.scrollbarRef;\r\n            // const rw = ps.rightWidth || 0;\r\n            // if (!rw) {\r\n            //     this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n            // } else {\r\n            //     this.rightFixedColumnWidth = rw;\r\n            // }\r\n            this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n            if (this.fixedRight) {\r\n                this.setFixedColumnPosition(ps.showRightShadow, 0);\r\n            }\r\n            this.cd.detectChanges();\r\n        });\r\n\r\n\r\n        this.dgs.showGridHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.dgs.smartFilterBarExpand.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n        this.hasFixedLeftColumns = this.columnsGroup && this.columnsGroup.leftFixed && !!this.columnsGroup.leftFixed.length;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => {\r\n            this.setHeaderPosition();\r\n        });\r\n\r\n        this.lineNumberTitle = this.getLineNumberTitle();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.columnsGroup && !changes.columnsGroup.isFirstChange()) {\r\n            setTimeout(() =>{\r\n                this.rightFixedColumnWidth = this.getRightFixedColWidth(this.ps);\r\n                this.hasFixedLeftColumns = this.columnsGroup && this.columnsGroup.leftFixed && !!this.columnsGroup.leftFixed.length;\r\n\r\n                if (!this.cd['destroyed']) {\r\n                    this.cd.detectChanges();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        this.fixedRight = null;\r\n    }\r\n\r\n    private getLineNumberTitle() {\r\n        if (this.dg.lineNumberTitle) {\r\n            return this.dg.lineNumberTitle;\r\n        } else {\r\n            return this.dg.localeService.getValue('datagrid.lineNumberTitle');\r\n        }\r\n    }\r\n\r\n    private getRightFixedColWidth(ps = null) {\r\n        if (!this.columnsGroup) {\r\n            return 0;\r\n        }\r\n\r\n\r\n        let w = this.columnsGroup.rightFixedWidth;\r\n        ps = this.dg.scrollInstance ? this.dg.scrollInstance.instance : null;\r\n\r\n        if (ps && ps.scrollbarYActive && this.scrollbarMode === 'allways') {\r\n            return w += 18;\r\n        }\r\n        return w;\r\n    }\r\n\r\n    private setHeaderPosition() {\r\n        let top = 0;\r\n        if ((this.dg.enableFilterRow || this.dg.enableSmartFilter) && this.dg.showFilterBar) {\r\n            top += this.dg.filterBarHeight;\r\n        }\r\n\r\n        if (this.dg.showRowGroupPanel) {\r\n            top += this.dg.rowGroupPanelHeight;\r\n        }\r\n\r\n        this.top = top;\r\n        this.render2.setStyle(this.el.nativeElement, 'top', `${top}px`);\r\n        \r\n\r\n        const headerCellHeight =  `${this.dg.customStyleKey()} .f-datagrid-header .f-datagrid-header-cell-content`;\r\n        this.dgs.removeCssRule(headerCellHeight);\r\n        this.dg.renderCustomStyle2({style: {'min-height': this.dg.headerHeight + 'px'}}, this.el.nativeElement, headerCellHeight);\r\n\r\n        const filterRowCls = `${this.dg.customStyleKey()} .f-datagrid-header-row.f-datagrid-filter-row .f-datagrid-header-cell-content`;\r\n        this.dgs.removeCssRule(filterRowCls);\r\n        if (this.dg.enableFilterRow) {\r\n            this.dgs.appendCssRules([`${filterRowCls} { height: ${this.dg.filterRowHeight}px;min-height:${this.dg.filterRowHeight}px }`]);\r\n        }\r\n    }\r\n\r\n    isShowShadow(fixedLeftWidth) {\r\n        const dgContainerWidth = this.dg.dgContainer.nativeElement.offsetWidth;\r\n        return dgContainerWidth < this.dg.colGroup.totalWidth;\r\n\r\n    }\r\n\r\n    isColspan(left, right, col, isdatafield = false) {\r\n        // if (this.fast) {\r\n        //     if (isdatafield) {\r\n        //         return !col.colspan;\r\n        //     } else {\r\n        //         return col.colspan;\r\n        //     }\r\n        // }\r\n\r\n        const _iscolspan = (fixed: 'none'|'left'|'right'| '') => {\r\n\r\n            if (!fixed || fixed == 'none') {\r\n                if (isdatafield) {\r\n                    return (!col.colspan || col.colspan === 1) && (!col.fixed || col.fixed === 'none');\r\n                } else {\r\n                    return col.colspan && col.colspan > 1 && (!col.fixed || col.fixed === 'none');\r\n                }\r\n            } else {\r\n                if (isdatafield) {\r\n                    return (!col.colspan || col.colspan === 1) && col.fixed === fixed;\r\n                } else {\r\n                    return col.colspan && col.colspan > 1 && col.fixed && col.fixed === fixed;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!left && !right) {\r\n            return _iscolspan('none');\r\n        } else if (left) {\r\n            return _iscolspan('left');\r\n        } else if (right) {\r\n            return _iscolspan('right');\r\n        }\r\n    }\r\n\r\n    setFixedColumnPosition(isShow, scrollLeft) {\r\n        this.showShadowCls = isShow;\r\n        const method = isShow ? 'addClass' : 'removeClass';\r\n        this.render2[method](this.fixedRight.nativeElement, FIXED_RIGHT_SHADOW_CLS);\r\n\r\n        const realWidth = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth + this.rightFixedColumnWidth;\r\n        const gridWidth = this.dg.width;\r\n        let l = this.dg.width - (this.dg.showBorder ? 2 : 0) - this.rightFixedColumnWidth;\r\n        if (gridWidth > realWidth) {\r\n            l = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth;\r\n            // if (this.dg.showBorder) {\r\n            //     l-= 2;\r\n            // }\r\n        }\r\n\r\n        this.render2.setStyle(this.fixedRight.nativeElement, 'left', l + 'px');\r\n    }\r\n\r\n    onRowNumerColumnDblClick(e: MouseEvent, rntd: any) {\r\n        let maxRowNumber = this.dg.getRows().length;\r\n        if (this.dg.pagination) {\r\n            const pageSize = this.dg.pageSize;\r\n            const pageIndex = this.dg.pageIndex;\r\n            maxRowNumber = pageSize * pageIndex + pageSize;\r\n        }\r\n\r\n        this.dg.longTextArea.nativeElement.innerHTML = maxRowNumber;\r\n        const w1 = this.dg.longTextArea.nativeElement.offsetWidth;\r\n\r\n        const currentWidth = rntd.offsetWidth;\r\n\r\n        if (w1 > currentWidth) {\r\n            this.dg.lineNumberWidth = w1 + 10;\r\n            this.dfs.updateProperty('lineNumberWidth', this.dg.lineNumberWidth);\r\n            this.dfs.resizeColumns();\r\n        }\r\n    }\r\n\r\n    onSortColumnClick(e: MouseEvent, col: DataColumn) {\r\n        if (this['SORT_CLICK_TIMER']) {\r\n            clearTimeout(this['SORT_CLICK_TIMER']);\r\n        }\r\n\r\n        this['SORT_CLICK_TIMER'] = setTimeout(() => {\r\n            this._onSortClick(e, col);\r\n        }, 250)\r\n    }\r\n\r\n\r\n    private _onSortClick(e: MouseEvent, col: DataColumn) {\r\n\r\n        e.stopPropagation();\r\n\r\n        if (this.disableSort) {\r\n            return;\r\n        }\r\n\r\n        if (!col.sortable) {\r\n            return;\r\n        }\r\n        // ç»æç¼è¾\r\n        this.dg.cancelEdit(null);\r\n        const sortName = this.dg.sortName;\r\n        const sortOrder = this.dg.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        const colOrder = col.order || 'asc';\r\n        let newOrder = colOrder;\r\n        const i = sortFields.findIndex(n => n === col.field);\r\n        if (i >= 0) {\r\n            const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';\r\n            newOrder = _order;\r\n            // if (this.dg.multiSort && newOrder === 'asc') {\r\n            if (newOrder === 'asc') {\r\n                newOrder = undefined;\r\n                sortFields.splice(i, 1);\r\n                sortOrders.splice(i, 1);\r\n            } else {\r\n                sortOrders[i] = _order;\r\n            }\r\n        } else {\r\n            if (this.dg.multiSort) {\r\n                sortFields.push(col.field);\r\n                sortOrders.push(colOrder);\r\n            } else {\r\n                sortFields = [col.field];\r\n                sortOrders = [colOrder];\r\n            }\r\n        }\r\n\r\n        col.order = newOrder;\r\n\r\n        this.dg.sortName = sortFields.join(',');\r\n        this.dg.sortOrder = sortOrders.join(',');\r\n        this.dfs.setSortInfo(this.dg.sortName, this.dg.sortOrder);\r\n\r\n        this.dg.beforeSortColumn(this.dg.sortName, this.dg.sortOrder, this.dg).subscribe(() => {\r\n            this.dg.onColumnSorted();\r\n        });\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[filter-row-creator]'\r\n})\r\nexport class FilterRowCreateDirective implements OnInit, OnChanges, OnDestroy {\r\n    @Input() left: boolean;\r\n    @Input() right: boolean;\r\n\r\n    private dgs: DatagridService;\r\n    private dfs: DatagridFacadeService;\r\n    private cfr: ComponentFactoryResolver;\r\n    private dfrs: DatagridFilterService;\r\n    private filterRowType: any;\r\n    private filterRowRef: ComponentRef<any>;\r\n    private cd: ChangeDetectorRef;\r\n\r\n    private headeRef: DatagridHeaderComponent;\r\n    private destroy$ = new Subject();\r\n\r\n    constructor(private vc: ViewContainerRef, private injector: Injector,\r\n        public dg: DatagridComponent, private ngZone: NgZone) {\r\n\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cfr = this.injector.get(ComponentFactoryResolver);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n        this.headeRef = this.injector.get(DatagridHeaderComponent);\r\n\r\n        this.filterRowType = this.injector.get(GRID_FILTER_ROW, null);\r\n\r\n        this.dgs.clearFilter.pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n            if (this.filterRowRef) {\r\n                this.filterRowRef.instance.clearFilterValue(false);\r\n            }\r\n        });\r\n        this.dgs.columnsChanged.pipe(takeUntil(this.destroy$)).subscribe((e: any) => {\r\n            const rebuild = e ? e.rebuildFilterBar: true;\r\n            this.createFilterRow(rebuild);\r\n        });\r\n\r\n        if (this.dfrs) {\r\n            this.dfrs.removeField.pipe(takeUntil(this.destroy$)).subscribe((f) => {\r\n                if (this.filterRowRef && f) {\r\n                    this.filterRowRef.instance.removeField(f);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.createFilterRow(true);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n\r\n    /** è¿æ»¤è¡ */\r\n    createFilterRow(rebuild = false) {\r\n        if (rebuild && this.filterRowRef) {\r\n            this.filterRowRef.destroy();\r\n            this.filterRowRef = null;\r\n        }\r\n        if (this['_FILTERROW_CREATE_TIMER_']) {\r\n            clearTimeout(this['_FILTERROW_CREATE_TIMER_']);\r\n        }\r\n        this['_FILTERROW_CREATE_TIMER_'] = setTimeout(() => {\r\n            this._createFilterRow();\r\n            if (rebuild && !this.cd['destroyed']) {\r\n                this.cd.detectChanges();\r\n            }\r\n        }, 50);\r\n    }\r\n\r\n    private _createFilterRow() {\r\n        if (this.dg.enableFilterRow) {\r\n            if (!this.filterRowType) {\r\n                return;\r\n            }\r\n\r\n            let columnsData = this.dg.colGroup.normalColumns;\r\n            if (this.left) {\r\n                columnsData = this.dg.colGroup.leftFixed;\r\n            } else if (this.right) {\r\n                columnsData = this.dg.colGroup.rightFixed;\r\n            }\r\n\r\n            if (!this.filterRowRef && this.vc) {\r\n                const cf = this.cfr.resolveComponentFactory(this.filterRowType);\r\n                this.filterRowRef = this.vc.createComponent(cf);\r\n                this.filterRowRef.instance.fixedLeft = this.left;\r\n                this.filterRowRef.instance.columns = columnsData;\r\n                this.filterRowRef.instance.gridInstance = this.dg;\r\n\r\n                this.dgs.closeFilterPanel.subscribe(() => {\r\n                    this.filterRowRef.instance.dfrs.closeFilterPanel();\r\n                });\r\n\r\n                this.filterRowRef.instance.conditionChange.subscribe(n => {\r\n                    const _currentConditionsString = JSON.stringify(this.dg.conditions || {});\r\n\r\n                    const { conditions, removedFields } = n;\r\n                    if (removedFields) {\r\n                        delete this.dg.conditions[removedFields];\r\n                    }\r\n\r\n                    const _conditions = this.mergeFilterConditions(conditions || {});\r\n\r\n                    if (_currentConditionsString !== JSON.stringify(_conditions || {})) {\r\n\r\n                        // æ¸çä¸å­å¨çå\r\n                        Object.keys(_conditions).forEach(k => {\r\n                            const col = this.dg.dfs.getColumn(k);\r\n                            if (!col) {\r\n                                delete _conditions[k];\r\n                            }\r\n                        });\r\n\r\n                        this.dgs.onFilterChanged.emit(_conditions);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private mergeFilterConditions(conditions: any) {\r\n        const _conditions = Object.assign(this.dg.conditions || {}, conditions || {});\r\n        Object.keys(_conditions).forEach(n => {\r\n            if (_conditions[n] === null) {\r\n                delete _conditions[n];\r\n            }\r\n        });\r\n\r\n        return _conditions;\r\n    }\r\n}\r\n\r\n","import { Directive, Input, NgZone, ElementRef, Renderer2, AfterViewInit, OnDestroy, Optional, HostListener } from '@angular/core';\r\nimport { DataColumn } from '../../types/data-column';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { DatagridHeaderComponent } from './datagrid-header.component';\r\nimport { fromEvent } from 'rxjs';\r\nimport { buffer, debounceTime, map, filter, takeUntil } from 'rxjs/operators';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-10 09:04:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-20 17:09:09\r\n * @QQ: 1055818239\r\n * @Version: v0.0.12\r\n */\r\n@Directive({\r\n    selector: '[resize-column]',\r\n})\r\nexport class DatagridResizeColumnDirective implements AfterViewInit, OnDestroy {\r\n    @Input('resize-column') col: DataColumn;\r\n    resizer: HTMLSpanElement;\r\n    resizerMouseDownListener: any;\r\n    documentMouseMoveListener: any;\r\n    documentMouseUpListener: any;\r\n    dblclickListener: any;\r\n    private dg: DatagridComponent;\r\n    constructor(\r\n        @Optional() public dh: DatagridHeaderComponent,\r\n        public ngzone: NgZone, public el: ElementRef, public render: Renderer2\r\n    ) {\r\n        this.dg = this.dh.dg;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isEnable()) {\r\n            this.render.addClass(this.el.nativeElement, 'f-datagrid-header-cell-resize');\r\n\r\n            this.resizer = document.createElement('span');\r\n            this.resizer.className = 'column-resize-bar';\r\n            this.el.nativeElement.appendChild(this.resizer);\r\n\r\n            this.ngzone.runOutsideAngular(() => {\r\n                // this.resizerMouseDownListener = this.onMouseDown.bind(this);\r\n                // this.resizer.addEventListener('mousedown', this.resizerMouseDownListener);\r\n                const mouseUp$ = fromEvent(this.resizer, 'mouseup');\r\n                this.resizerMouseDownListener = fromEvent(this.resizer, 'mousedown').pipe(\r\n                    // debounceTime(260),\r\n                    takeUntil(mouseUp$)\r\n                ).subscribe((e: any) =>\r\n                    this.onMouseDown(e)\r\n                );\r\n            });\r\n\r\n            // const mouse$ = fromEvent(this.resizer, 'click');\r\n            // const buff$ = mouse$.pipe(\r\n            //     debounceTime(250)\r\n            // );\r\n\r\n            // const click$ = mouse$.pipe(\r\n            //     buffer(buff$),\r\n            //     map(list => {\r\n            //         return {event: list[0], count: list.length};\r\n            //     }),\r\n            //     filter(x => x.count === 2),\r\n            //     map(x => x.event),\r\n            //     takeUntil(mouseUp$)\r\n            // );\r\n\r\n            // click$.subscribe((e) => {\r\n            //     this.onDblClickHandler(e);\r\n            //     // this.onMouseUp(e);\r\n            // });\r\n        }\r\n    }\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    onDblClickHandler($event) {\r\n\r\n        if ($event && $event.target && $event.target.className.indexOf('f-datagrid-sort') > -1) {\r\n            return;\r\n        }\r\n\r\n        if (this.col.field && this.col.field !== this.dg.ControlPanelFeild) {\r\n            const thRef = this.el;\r\n            this.dg.sizeToContent(this.col, thRef);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private isEnable() {\r\n        if (this.dg.resizeColumn) {\r\n\r\n            if ( this.col.field === this.dg.ControlPanelFeild) {\r\n                this.col.resizable = false;\r\n            }\r\n\r\n            if (this.col.resizable === undefined) {\r\n                this.col.resizable = true;\r\n            }\r\n\r\n            return this.col.resizable;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    bindDocumentEvents() {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            this.documentMouseMoveListener = this.onMouseMove.bind(this);\r\n            document.addEventListener('mousemove', this.documentMouseMoveListener);\r\n\r\n            this.documentMouseUpListener = this.onMouseUp.bind(this);\r\n            document.addEventListener('mouseup', this.documentMouseUpListener);\r\n        });\r\n    }\r\n\r\n    unbindDocumentEvents() {\r\n        if (this.documentMouseMoveListener) {\r\n            document.removeEventListener('mousemove', this.documentMouseMoveListener);\r\n            this.documentMouseMoveListener = null;\r\n        }\r\n\r\n        if (this.documentMouseUpListener) {\r\n            document.removeEventListener('mouseup', this.documentMouseUpListener);\r\n            this.documentMouseUpListener = null;\r\n        }\r\n    }\r\n\r\n    onMouseDown(event: MouseEvent) {\r\n        event.stopPropagation();\r\n        this.dg.onColumnResizeBegin(event);\r\n        this.render.addClass(this.el.nativeElement, 'column-resizeing');\r\n        this.bindDocumentEvents();\r\n    }\r\n\r\n    onMouseMove(event: MouseEvent) {\r\n        this.dg.onColumnResize(event);\r\n    }\r\n\r\n    onMouseUp(event: MouseEvent) {\r\n        this.dg.onColumnResizeEnd(event, this.col);\r\n        this.render.removeClass(this.el.nativeElement, 'column-resizeing');\r\n        this.unbindDocumentEvents();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.resizerMouseDownListener) {\r\n            // this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);\r\n            this.resizerMouseDownListener.unsubscribe();\r\n        }\r\n\r\n        this.unbindDocumentEvents();\r\n\r\n        if (this.dblclickListener) {\r\n            this.dblclickListener();\r\n        }\r\n\r\n        this.resizer = null;\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-12 15:01:21\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-09 15:24:45\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ElementRef, Renderer2, ViewChild, OnDestroy, Injector, Inject, forwardRef, OnChanges, SimpleChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { DatagridService } from '../../services/datagrid.service';\r\nimport { FIXED_LEFT_SHADOW_CLS, FIXED_RIGHT_SHADOW_CLS, SCROLL_X_ACTION, SCROLL_X_REACH_END_ACTION, SCROLL_X_REACH_START_ACTION } from '../../types/constant';\r\nimport { Subscription, Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'datagrid-footer',\r\n    templateUrl: './datagrid-footer.component.html'\r\n})\r\nexport class DatagridFooterComponent implements OnInit, OnChanges, OnDestroy {\r\n    private _footerData = [];\r\n    @Input() get data() {\r\n        return this._footerData;\r\n    }\r\n    set data(val: any[]) {\r\n        this._footerData = val;\r\n    }\r\n\r\n    @Input() height: number;\r\n    @Input() width: number;\r\n    @Input() columns: any[];\r\n    @Input() columnsGroup: any;\r\n\r\n    /** æ¾ç¤ºä½ç½®ï¼é»è®¤ä¸º åºé¨ */\r\n    @Input() position: 'top' | 'bottom' = 'bottom';\r\n    /** æ¯å¦æå·¦ä¾§åºå®å */\r\n    @Input() hasFixedColumns = false;\r\n    @Input() fast = false;\r\n\r\n    @ViewChild('footerContainer') footerContainer: ElementRef;\r\n    @ViewChild('footerBody') footerBody: ElementRef;\r\n    @ViewChild('footerBody2') footerBody2: ElementRef;\r\n    @ViewChild('fixedLeft') fixedLeft: ElementRef;\r\n    private fixedRight: ElementRef;\r\n    @ViewChild('fixedRight') set fr(val) {\r\n        if (val) {\r\n            this.fixedRight = val;\r\n        }\r\n    }\r\n    scrollXSubscription: Subscription;\r\n\r\n    private dgs: DatagridService;\r\n    private scrollX = 0;\r\n    private showShadowCls = false;\r\n    rightFixedColumnWidth = 0;\r\n    private cdRef: ChangeDetectorRef = null;\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        private render: Renderer2, private injector: Injector,\r\n        @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent\r\n    ) {\r\n        this.dg = this.injector.get(DatagridComponent);\r\n        this.dgs = this.injector.get(DatagridService);\r\n        this.cdRef = this.injector.get(ChangeDetectorRef);\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.scrollEvents();\r\n        this.renderFooterStyle();\r\n        this.setFooterPosition(false);\r\n\r\n        this.rightFixedColumnWidth = this.getRightFixedColWidth();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.position) {\r\n            this.setFooterPosition(true);\r\n        }\r\n\r\n        if (changes.columnsGroup && !changes.columnsGroup.isFirstChange()) {\r\n            this.rightFixedColumnWidth = this.getRightFixedColWidth();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.scrollXSubscription) {\r\n            this.scrollXSubscription.unsubscribe();\r\n            this.scrollXSubscription = null;\r\n        }\r\n    }\r\n\r\n    private scrollEvents() {\r\n        this.dgs.showGridHeader.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(hh => {\r\n            this.setFooterPosition(false);\r\n        });\r\n\r\n        this.scrollXSubscription = this.dgs.scorll$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((d: any) => {\r\n            this.scrollX = d.x;\r\n\r\n            if (this.fast) {\r\n                if (d.type === SCROLL_X_ACTION && this.footerBody2) {\r\n                    this.footerBody2.nativeElement.scrollLeft = d.x;\r\n                }\r\n            } else  {\r\n                if (d.type === SCROLL_X_ACTION || d.type === SCROLL_X_REACH_END_ACTION || d.type === SCROLL_X_REACH_START_ACTION) {\r\n                    if (!this.dg.footerTemplate) {\r\n                        this.render.setStyle(this.footerBody.nativeElement,  'transform', `translate3d(-${d.x}px, 0px, 0px)` );\r\n\r\n                        if (this.fixedLeft) {\r\n                            if (d.x) {\r\n                                this.render.addClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                            } else {\r\n                                this.render.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (d.type === SCROLL_X_REACH_START_ACTION) {\r\n                    if (this.fixedLeft) {\r\n                        this.render.removeClass(this.fixedLeft.nativeElement, FIXED_LEFT_SHADOW_CLS);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        if (!this.fast) {\r\n\r\n            this.dgs.showFixedShadow.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) => {\r\n                if (this.fixedRight) {\r\n                    this.setFixedColumnPosition(e.showRightShadow, e.x);\r\n                }\r\n            });\r\n\r\n\r\n            this.dgs.scrollbarUpdate.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((ps: any) => {\r\n                // const rw = ps.rightWidth || 0;\r\n                // if (!rw) {\r\n                //     this.rightFixedColumnWidth = this.getRightFixedColWidth(ps.scrollbarRef);\r\n                // } else {\r\n                //     this.rightFixedColumnWidth = rw;\r\n                // }\r\n                this.rightFixedColumnWidth = this.getRightFixedColWidth(ps.scrollbarRef);\r\n                if (this.fixedRight) {\r\n                    this.setFixedColumnPosition(ps.showRightShadow, 0);\r\n                }\r\n                if (this.cdRef) {\r\n                    this.cdRef.detectChanges();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private getRightFixedColWidth(ps = null) {\r\n        if (!this.columnsGroup) {\r\n            return 0;\r\n        }\r\n\r\n        let w = this.columnsGroup.rightFixedWidth;\r\n        ps = this.dg.scrollInstance? this.dg.scrollInstance.instance : null;\r\n\r\n        if (ps && ps.scrollbarYActive && this.dg.scrollBarShowMode === 'allways') {\r\n            return w += 18;\r\n        }\r\n        return w;\r\n    }\r\n\r\n    private setFooterPosition(emit = true) {\r\n        if (this.position === 'bottom') {\r\n            let positionBottom = 0;\r\n            if (this.dg.pagination) {\r\n                positionBottom = this.dg.pagerHeight || 40;\r\n            }\r\n            this.render.removeStyle(this.footerContainer.nativeElement, 'top');\r\n            this.render.setStyle(this.footerContainer.nativeElement, 'bottom', `${positionBottom}px`);\r\n        }\r\n        if (this.position === 'top') {\r\n            let positionTop = 0;\r\n            if (this.dg.showHeader) {\r\n                positionTop = this.dg.realHeaderHeight || 35;\r\n            }\r\n\r\n            if (this.dg.showRowGroupPanel) {\r\n                positionTop += this.dg.rowGroupPanelHeight;\r\n            }\r\n\r\n            if (this.dg.showFilterBar) {\r\n                positionTop += this.dg.filterBarHeight;\r\n            }\r\n\r\n            this.render.removeStyle(this.footerContainer.nativeElement, 'bottom');\r\n            this.render.setStyle(this.footerContainer.nativeElement, 'top', `${positionTop}px`);\r\n        }\r\n        if (emit) {\r\n            this.dgs.footerPositionChanged.emit();\r\n        }\r\n    }\r\n\r\n    private renderFooterStyle() {\r\n        if (this.dg.footerStyler) {\r\n\r\n            const trStyleAndCls = this.dgs.getCustomStyle(this.dg.footerStyler, null);\r\n\r\n            const cssRuleID = `${this.dg.customStyleKey()} .f-datagrid-footer`;\r\n            const cssRuleId2 = `${this.dg.customStyleKey()} .f-datagrid-footer .f-datagrid-body-fixed-left,${this.dg.customStyleKey()} .f-datagrid-footer .f-datagrid-body-fixed-right`;\r\n            const cssRuleId3 = `${this.dg.customStyleKey()}.f-datagrid-fast .f-datagrid-cell.f-datagrid-fast__fixed-left,${this.dg.customStyleKey()}.f-datagrid-fast .f-datagrid-cell.f-datagrid-fast__fixed-right`;\r\n\r\n            if (trStyleAndCls && Object.keys(trStyleAndCls).length) {\r\n                const cssRule = [];\r\n                if (trStyleAndCls.style) {\r\n                    cssRule.push(`${cssRuleID} ${JSON.stringify(trStyleAndCls.style)}`);\r\n                    cssRule.push(`${cssRuleId2} ${JSON.stringify(trStyleAndCls.style)}`);\r\n\r\n                    if (this.fast) {\r\n                        cssRule.push(`${cssRuleId3} ${JSON.stringify(trStyleAndCls.style)}`);\r\n                    }\r\n                }\r\n\r\n                this.dgs.appendCssRules(cssRule);\r\n\r\n                // this.dg.renderCustomStyle(trStyleAndCls, this.footerContainer.nativeElement, cssRule);\r\n            } else {\r\n                this.dgs.removeCssRule([cssRuleID, cssRuleId2]);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    setFixedColumnPosition(isShow, scrollLeft) {\r\n        this.showShadowCls = isShow;\r\n        const method = isShow ? 'addClass' : 'removeClass';\r\n        this.render[method](this.fixedRight.nativeElement, FIXED_RIGHT_SHADOW_CLS);\r\n\r\n        const realWidth = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth + this.rightFixedColumnWidth;\r\n        const gridWidth = this.dg.width;\r\n        let l = this.dg.width - (this.dg.showBorder ? 2 : 0) - this.rightFixedColumnWidth;\r\n        if (gridWidth > realWidth) {\r\n            l = this.columnsGroup.leftFixedWidth + this.columnsGroup.normalWidth;\r\n            // if (this.dg.showBorder) {\r\n            //     l-= 2;\r\n            // }\r\n        }\r\n\r\n        this.render.setStyle(this.fixedRight.nativeElement, 'left', l + 'px');\r\n    }\r\n}\r\n","import { Subscription } from 'rxjs';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { ChangeDetectorRef, Injector, Optional, OnChanges, SimpleChanges, TemplateRef } from '@angular/core';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-17 20:20:21\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, Output, EventEmitter, ElementRef, AfterViewInit, ViewChild, HostBinding } from '@angular/core';\r\nimport { PaginationControlsComponent, PaginationControlsDirective } from '@farris/ui-pagination';\r\nimport { OverLayHiddenService } from '@farris/ui-common';\r\n\r\n@Component({\r\n    selector: 'datagrid-pager',\r\n    templateUrl: './page.component.html'\r\n})\r\nexport class DatagridPagerComponent implements OnInit, AfterViewInit, OnChanges {\r\n    @Input() pagerPos = 'right';\r\n    @Input() id = 'farris-datagrid-pager';\r\n    /** æ¾ç¤ºé¡µç çæ°é */\r\n    @Input() maxSize = 7;\r\n    /** æ¯å¦æ¾ç¤ºé¡µç  */\r\n    @Input() directionLinks = true;\r\n\r\n    @Input() autoHide = false;\r\n\r\n    @Input() responsive = false;\r\n    /** ä¸é¡µæ ç­¾ */\r\n    @Input() previousLabel = 'ä¸é¡µ';\r\n    /** ä¸é¡µæ ç­¾ */\r\n    @Input() nextLabel = 'ä¸é¡µ';\r\n    @Input() showPageList = false;\r\n    @Input() showPageInfo = true;\r\n    @Input() showPageNumber = true;\r\n    @Input() locked = false;\r\n\r\n    @Input() selectedData = [];\r\n    @Input() viewMode: 'default' | 'simple' = 'default';\r\n    @Input() listItemFormatter: (data) => string;\r\n\r\n    @Input() showSelectedList = false;\r\n\r\n    @Input() showGotoInput = false;\r\n\r\n    /** åé¡µæ¡èªå®ä¹åå®¹åºæ¨¡æ¿ */\r\n    @Input() contentTemplate: TemplateRef<any> = null;\r\n    @Input() data = null;\r\n\r\n    @Output() pageChange = new EventEmitter();\r\n    @Output() pageSizeChange = new EventEmitter();\r\n\r\n    @Output() removeSelectedItem = new EventEmitter();\r\n    @Output() clearSelectedItem = new EventEmitter();\r\n\r\n    @ViewChild('pagerContainer') pc: ElementRef;\r\n    @ViewChild('pager') pager: PaginationControlsComponent;\r\n    @ViewChild('selectItemPanel') selectItemPanel: ElementRef;\r\n\r\n    get pagination(): PaginationControlsDirective {\r\n        return this.pager.paginationDirective;\r\n    }\r\n\r\n\r\n    get pageSize() {\r\n        return this.pagination.getPageSize();\r\n    }\r\n\r\n    get total() {\r\n        return this.pagination.getTotalItems();\r\n    }\r\n\r\n    get outerHeight() {\r\n        if (this.pc) {\r\n            return this.pc.nativeElement.offsetHeight;\r\n        }\r\n        return 40;\r\n    }\r\n    styles = { opacity: 1 };\r\n\r\n    mouseInSelectedList = false;\r\n    openSelectedList = false;\r\n\r\n    private selectionDataChange$: Subscription = null;\r\n\r\n    private notifySer: NotifyService;\r\n    private overLayService: OverLayHiddenService = null;\r\n    constructor(public el: ElementRef, private cd: ChangeDetectorRef, @Optional() private inject: Injector) {\r\n        if (this.inject) {\r\n            this.notifySer = this.inject.get<NotifyService>(NotifyService, null);\r\n        }\r\n\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.listenCheckDataChanged();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.lockedStyles();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.selectedData && !changes.selectedData.isFirstChange()) {\r\n            if (!this.selectedData || !this.selectedData.length) {\r\n                this.closeSelectedList();\r\n            }\r\n        }\r\n\r\n        if (changes.showSelectedList && !changes.showSelectedList.isFirstChange()) {\r\n            this.listenCheckDataChanged();\r\n        }\r\n\r\n        if (changes.locked && !changes.locked.isFirstChange()) {\r\n            this.lockedStyles();\r\n        }\r\n    }\r\n\r\n    private listenCheckDataChanged() {\r\n        if (this.showSelectedList) {\r\n            const dg = this.inject.get(DatagridComponent, null);\r\n            if (dg) {\r\n                this.selectionDataChange$ = dg.checkedChange.subscribe((data: any) => {\r\n                    this.selectedData = data;\r\n                    if (!this.cd['destroyed']) {\r\n                        this.cd.detectChanges();\r\n                    }\r\n                });\r\n\r\n                this['resized$'] = dg.resized.subscribe(() => {\r\n                    this.closeSelectedList();\r\n                })\r\n            }\r\n        } else {\r\n            if (this.selectionDataChange$) {\r\n                this.selectionDataChange$.unsubscribe();\r\n                this.selectionDataChange$ = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    onPageChange(pageIndex: any) {\r\n        if (typeof pageIndex === 'object') {\r\n            pageIndex = pageIndex.pageIndex || 1;\r\n        }\r\n        this.pageChange.emit(Number.parseInt(pageIndex, 10));\r\n    }\r\n\r\n    onPageSizeChange(pageSize: any) {\r\n        this.pageSizeChange.emit(Number.parseInt(pageSize, 10));\r\n    }\r\n\r\n    lock() {\r\n        this.locked = true;\r\n        this.lockedStyles();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.lockedStyles();\r\n    }\r\n\r\n    private lockedStyles() {\r\n        this.styles = { opacity: this.locked? 0.5 : 1 };\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onMouseEnter($event) {\r\n        $event.stopPropagation();\r\n\r\n        if (this.locked) {\r\n            return;\r\n        }\r\n        this.mouseInSelectedList = true;\r\n        if (this.selectedData && this.selectedData.length) {\r\n            this.openSelectedList = !this.openSelectedList;\r\n        } else {\r\n            this.openSelectedList = false;\r\n        }\r\n\r\n        let target = $event.target;\r\n        if (!target.classList.contains('selected-list-badge')) {\r\n            target = $event.target.closest('.selected-list-badge');\r\n        }\r\n\r\n\r\n        if (this.openSelectedList) {\r\n\r\n            const selectedListContainer = this.el.nativeElement.querySelector('.pager-overlay-container');\r\n            const isInModal = target.closest('.modal-dialog');\r\n\r\n            let { top, left } = target.getBoundingClientRect();\r\n            if (selectedListContainer) {\r\n                if (isInModal) {\r\n                    const { top: mtop, left: mleft } = isInModal.getBoundingClientRect();\r\n                    top = top - mtop;\r\n                    left = left - mleft;\r\n                }\r\n\r\n                selectedListContainer.style.top = `${top}px`;\r\n                selectedListContainer.style.left = `${left - 10}px`;\r\n            }\r\n\r\n            this.overLayService.registerMouseEvent(this.selectItemPanel.nativeElement, (e) => {\r\n                if (this.selectItemPanel.nativeElement.contains(e.target) || e.target.classList.contains('selected-list-badge') || e.target.closest('.selected-list-badge')) {\r\n                    return;\r\n                }\r\n\r\n                this.closeSelectedList();\r\n                this.overLayService.destory(this.selectItemPanel.nativeElement);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    closeSelectedList() {\r\n        this.openSelectedList = false;\r\n        this.mouseInSelectedList = false;\r\n        if (!this.cd['destroyed']) {\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    onDelSelectedItem(id: any) {\r\n        this.removeSelectedItem.emit(id);\r\n    }\r\n\r\n    onClearSelected($event) {\r\n        this.clearSelectedItem.emit();\r\n        this.closeSelectedList();\r\n    }\r\n\r\n    onSelectListPanelClose($event) {\r\n        this.closeSelectedList();\r\n    }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\n\r\nconst loading_style_ring =\r\n`<svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n  <circle cx=\"50\" cy=\"50\" fill=\"none\" r=\"30\" stroke=\"#2c7dff\" stroke-width=\"10\"></circle>\r\n  <circle cx=\"50\" cy=\"50\" fill=\"none\" r=\"30\" stroke=\"#d0eaff\" stroke-width=\"10\" stroke-linecap=\"square\" transform=\"rotate(178.821 50 50)\">\r\n      <animateTransform attributeName=\"transform\" type=\"rotate\"\r\n          calcMode=\"linear\" values=\"0 50 50;180 50 50;720 50 50\" keyTimes=\"0;0.5;1\" dur=\"1.6s\" begin=\"0s\"\r\n          repeatCount=\"indefinite\"></animateTransform>\r\n      <animate attributeName=\"stroke-dasharray\" calcMode=\"linear\"\r\n          values=\"9.42477796076938 179.0707812546182;150.79644737231007 37.6991118430775;9.42477796076938 179.0707812546182\"\r\n          keyTimes=\"0;0.5;1\" dur=\"1.6\" begin=\"0s\" repeatCount=\"indefinite\"></animate>\r\n  </circle>\r\n</svg>`;\r\n\r\n@Component({\r\n    selector: 'datagrid-loading',\r\n    template: `\r\n    <div style=\"width:100%;height:100%;position:absolute;top:0;left: 0;background:rgba(255,255,255,0);z-index: 90000000;pointer-events: unset;\">\r\n        <div style=\"width: 50px;height: 50px;position: relative;top: 50%;margin-top: -25px;left: 50%;margin-left: -25px;\"\r\n        [innerHTML]=\"loading\" >\r\n        </div>\r\n    </div>\r\n    `\r\n})\r\nexport class DataGridLoadingComponent implements OnInit {\r\n\r\n    @Input() loading: any;\r\n\r\n    constructor(private domSanitizer: DomSanitizer) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.loading) {\r\n            this.loading = this.domSanitizer.bypassSecurityTrustHtml(this.loading);\r\n        } else {\r\n            this.loading = this.domSanitizer.bypassSecurityTrustHtml(loading_style_ring);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { debounce } from 'rxjs/operators';\r\nimport { Component, OnInit, EventEmitter, Output, Input, OnChanges, SimpleChanges, ViewChild, ElementRef } from '@angular/core';\r\nimport { interval } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'pager-selected-list',\r\n    templateUrl: './selected-list.component.html',\r\n})\r\nexport class PagerSelectedListComponent implements OnInit, OnChanges {\r\n\r\n    @Input() data = [];\r\n\r\n    @Output() close = new EventEmitter();\r\n    @Output() remove = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    onClose($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.close.emit();\r\n    }\r\n\r\n    onRemoveClick($event: MouseEvent, id: any) {\r\n        $event.stopPropagation();\r\n        this.remove.emit(id);\r\n    }\r\n\r\n    onClearClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.clear.emit();\r\n    }\r\n\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        return false;\r\n    }\r\n\r\n    trackByFn = (index, item) => {\r\n        return item.id;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'selectedItem'})\r\nexport class SelectedItemPipe implements PipeTransform {\r\n    transform(data: any, formatter: any): any {\r\n        if (data) {\r\n            if (formatter) {\r\n                data = data.map( d => {\r\n                    return {id: d.id, text:  formatter(d.data) };\r\n                });\r\n            } else  {\r\n                data = data.map(d => {\r\n                    const txt = [];\r\n                    const keys = Object.keys(d.data);\r\n                    keys.forEach(k => {\r\n                        txt.push(d.data[k]);\r\n                    });\r\n                    return {id: d.id, text: txt.join(', ') };\r\n                });\r\n            }\r\n\r\n            return data;\r\n        }\r\n    }\r\n}\r\n","import { ErrorHandler, Injector } from '@angular/core';\r\n\r\nexport class DatagridErrorHandler implements ErrorHandler {\r\n    handleError(error: any): void {\r\n        console.error(error);\r\n    }\r\n}\r\n\r\nexport class Éµs implements ErrorHandler {\r\n    handleError(error: any): void {\r\n        console.error(error);\r\n    }\r\n}\r\n","import { Subject, Subscription } from 'rxjs';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-30 16:08:56\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, Injector, Inject, forwardRef, ChangeDetectorRef, OnDestroy, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { DatagridFacadeService } from './../../services/datagrid-facade.service';\r\nimport { filter, map, takeUntil } from 'rxjs/operators';\r\nimport { IS_GROUP_ROW_FIELD } from '../../services/state';\r\n\r\n@Component({\r\n    selector: 'datagrid-checkbox',\r\n    template: ` <div class=\"custom-control custom-checkbox f-checkradio-single\">\r\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>`,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        :host .custom-checkbox {\r\n            opacity: 1;\r\n            float: none;\r\n            top: 2px;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class DatagridCheckboxComponent implements OnInit, OnDestroy, OnChanges {\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: any;\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() indeterminate = false;\r\n    @ViewChild('chk') chk: ElementRef;\r\n\r\n    private dfs: DatagridFacadeService;\r\n    private cd: ChangeDetectorRef;\r\n\r\n    checked$ = null;\r\n    private destroy$ = new Subject();\r\n    subscriptions: Subscription[] = [];\r\n    constructor(private injector: Injector, @Inject(forwardRef(() => DatagridComponent)) public dg: DatagridComponent) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.cd = this.injector.get(ChangeDetectorRef);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.indeterminate) {\r\n            this.chk.nativeElement.indeterminate = true;\r\n        }\r\n        this.listenSubjects();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.checked && !changes.checked.isFirstChange()) {\r\n            this.changeCheckedStatus(changes.checked.currentValue);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    private listenSubjects() {\r\n\r\n        const rid = this.dfs.primaryId(this.rowData);\r\n\r\n        this.subscriptions.push(\r\n            this.dg.checkAll.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe(() => {\r\n               \r\n                let flag = true;\r\n\r\n                if (this.dg.disableRow) {\r\n                    flag = !this.dg.disableRow(this.rowData, this.rowIndex);\r\n                    if (!flag) {\r\n                        flag = this.dg.dfs.isRowChecked(rid);\r\n                    }\r\n                }\r\n                this.changeCheckedStatus(flag);\r\n            })\r\n        );\r\n\r\n        this.subscriptions.push(\r\n            this.dg.unCheckAll.pipe(\r\n                takeUntil(this.destroy$)\r\n            ).subscribe((e: any) => {\r\n                if (e && e.length) {\r\n                    if (e.find(n => n[this.dg.idField] === this.rowData[this.dg.idField])) {\r\n                        this.changeCheckedStatus(false);\r\n                    }\r\n                } else {\r\n                    this.changeCheckedStatus(false);\r\n                }\r\n            })\r\n        );\r\n\r\n        const _setcheckrows = this.dg.dgs.setCheckedRows.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            filter((r: any) => {\r\n                return r.ids.includes(rid) || r.ids.includes('' + rid);\r\n            }),\r\n            map((r: any) => {\r\n                const flag = r.ids.includes(rid) || r.ids.includes('' + rid);\r\n                if (flag) {\r\n                    return flag && r.checked;\r\n                }\r\n                return false;\r\n            }),\r\n        ).subscribe(r => {\r\n            this.checked = r;\r\n            this.changeCheckedStatus(r);\r\n        });\r\n        this.subscriptions.push(_setcheckrows);\r\n\r\n        this.dfs.updateCheckboxState$.pipe(\r\n            takeUntil(this.destroy$),\r\n        ).pipe(\r\n            filter((r: any) => {\r\n                return r.id === rid;\r\n            }),\r\n            map((r: any) => {\r\n                return !!r.checked;\r\n            })\r\n        ).subscribe((r: any) => {\r\n            this.checked = r;\r\n            this.changeCheckedStatus(r);\r\n        });\r\n    }\r\n\r\n    handleClick(event: MouseEvent) {\r\n        if (!this.disabled) {\r\n            const beforEventParam = {\r\n                rowIndex: this.rowIndex,\r\n                rowData: this.rowData,\r\n                gridInstance: this.dg\r\n            };\r\n            this.dg.endCellEdit();\r\n            const _checked = this.chk.nativeElement.checked;\r\n            if (!_checked) {\r\n                this.dg.beforeCheck(beforEventParam).subscribe((canCheck: boolean) => {\r\n                    if (canCheck) {\r\n                        this.dfs.checkRow(this.rowIndex, this.rowData, { instance: this.dg});\r\n                        this.checked = true;\r\n                        this.changeCheckedStatus(true);\r\n                    }\r\n                });\r\n            } else {\r\n                this.dg.beforeUncheck(beforEventParam).subscribe((canUncheck: boolean) => {\r\n                    if (canUncheck) {\r\n                        this.dfs.unCheckRow(this.rowIndex, this.rowData, { instance: this.dg});\r\n                        this.checked = false;\r\n                        this.changeCheckedStatus(false);\r\n                        if (this.dg.showSelectedList) {\r\n                            this.dg.cd.detectChanges();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            // this.checked = !this.checked;\r\n            // this.cd.detectChanges();\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n    private changeCheckedStatus(status: boolean) {\r\n        this.chk.nativeElement.checked = status;\r\n    }\r\n\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-18 10:30:21\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Component, OnInit, Input, ViewChild, ElementRef, Injector, OnDestroy } from '@angular/core';\r\nimport { DatagridFacadeService } from './../../services/datagrid-facade.service';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'datagrid-header-checkbox',\r\n    template: ` <div class=\"custom-control custom-checkbox f-checkradio-single\">\r\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>`,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        :host .custom-checkbox {\r\n            opacity: 1;\r\n            float: none;\r\n            top: 4px;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class DatagridHeaderCheckboxComponent implements OnInit, OnDestroy {\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() indeterminate = false;\r\n\r\n    @ViewChild('chk') chk: ElementRef;\r\n    private dfs: DatagridFacadeService;\r\n    private dg: DatagridComponent;\r\n    private destroy$ = new Subject();\r\n    constructor(private injector: Injector) {\r\n        this.dfs = this.injector.get(DatagridFacadeService);\r\n        this.dg = this.injector.get(DatagridComponent);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.indeterminate) {\r\n            this.chk.nativeElement.indeterminate = true;\r\n        }\r\n\r\n        this.dg.dgs.changeCheckAllStatus.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe((status: number) => {\r\n            if (status === 2) {\r\n                this.chk.nativeElement.indeterminate = true;\r\n            } else {\r\n                this.chk.nativeElement.indeterminate = false;\r\n                this.updateStatus(!!status);\r\n            }\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n\r\n    updateStatus(checked: boolean) {\r\n        this.checked = checked;\r\n        this.chk.nativeElement.checked = checked;\r\n    }\r\n\r\n\r\n    handleClick(event: MouseEvent) {\r\n        if (!this.dg.data || !this.dg.data.length) {\r\n            return;\r\n        }\r\n\r\n        if (!this.disabled) {\r\n            this.checked = !this.checked;\r\n\r\n            this.indeterminate = false;\r\n            this.chk.nativeElement.indeterminate = false;\r\n            if (this.checked) {\r\n                this.dfs.checkAll();\r\n                this.chk.nativeElement.checked = true;\r\n                // this.dg.checkAll.emit();\r\n            } else {\r\n                this.dfs.clearCheckeds(!this.dg.enableMorePageSelect);\r\n\r\n                if (this.dg.selectedRow && this.dg.checkOnSelect && this.dg.selectOnCheck) {\r\n                    this.dg.unSelectRow(this.dg.selectedRow.id);\r\n                }\r\n                this.chk.nativeElement.checked = false;\r\n                // this.dg.unCheckAll.emit();\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n    }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TR_PREFIX } from './../types/constant';\r\nimport { DatagridFacadeService } from '../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowDataId'})\r\nexport class RowDataIdPipe implements PipeTransform {\r\n\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n\r\n    transform(rowData: any, fixedRight = false, fixedLeft = false, isGroupRow = false): any {\r\n        if (rowData) {\r\n            let rowID = TR_PREFIX + this.dfs.primaryId(rowData);\r\n            if (fixedRight) {\r\n                rowID += '_fixedright';\r\n            } else if (fixedLeft) {\r\n                rowID += '_fixedleft';\r\n            }\r\n\r\n            if (isGroupRow) {\r\n                rowID += '_grouprow';\r\n            }\r\n\r\n            return rowID;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","import { Optional, Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'formatGroupRow'})\r\nexport class FormatGroupRowPipe implements PipeTransform {\r\n\r\n    constructor(@Optional() private dfs: DatagridFacadeService) {}\r\n\r\n\r\n    transform(row: any, col: any, fn?: any): any {\r\n        if (row) {\r\n            let val = row['value'];\r\n            if (!col && this.dfs) {\r\n                col = this.dfs.getColumn(row.field);\r\n            }\r\n\r\n            if (col && col.formatter) {\r\n                if (col.formatter.type === 'enum') {\r\n                    const enumOpts: {valueField: string, textField: string, data: any} = col.formatter.options;\r\n                    const { valueField, textField, data } = {...enumOpts};\r\n                    const enumItem = data.find(item => item[valueField] === row['value']);\r\n                    val = enumItem ? enumItem[textField] : '';\r\n                }\r\n            }\r\n\r\n            return fn ? fn(row) : val;\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { Component, OnInit, ChangeDetectorRef, ElementRef, Injector, NgZone, Input, Output, EventEmitter, OnDestroy, OnChanges, SimpleChanges, Renderer2 } from '@angular/core';\r\nimport { Subscription, Subject } from 'rxjs';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridBodyComponent } from './datagrid-body.component';\r\nimport { ROW_INDEX_FIELD, IS_GROUP_ROW_FIELD, GROUP_ROW_FIELD, IS_GROUP_FOOTER_ROW_FIELD, GROUP_VISIBLE_FIELD, GROUP_LEVEL_FIELD } from '../../services/state';\r\nimport { DatagridFacadeService } from '../../services/datagrid-facade.service';\r\n\r\n\r\n@Component({\r\n    selector: 'fixed-left-rows',\r\n    templateUrl: 'fixed-left-rows.component.html'\r\n})\r\n\r\nexport class FixedLeftRowsComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() columns = [];\r\n    @Output() toggle = new EventEmitter();\r\n    @Input() checkedRows = [];\r\n    @Input() selectedRows = [];\r\n    @Input() data = [];\r\n\r\n    /** å¯ç¨åç»æ¶ï¼æ°æ®æºä¸­èªå¨è®¾ç½®è¡ç´¢å¼å­æ®µ */\r\n    groupRowIndex = ROW_INDEX_FIELD;\r\n    isGroupRow = IS_GROUP_ROW_FIELD;\r\n    groupRow = GROUP_ROW_FIELD;\r\n    isGroupFooter = IS_GROUP_FOOTER_ROW_FIELD;\r\n    visible = GROUP_VISIBLE_FIELD;\r\n    groupLevelField = GROUP_LEVEL_FIELD;\r\n\r\n    filterConditions = '';\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    dgs: DatagridService = null;\r\n    render2: Renderer2;\r\n    private destroy$ = new Subject();\r\n    constructor(\r\n        private cd: ChangeDetectorRef,\r\n        public dg: DatagridComponent,\r\n        public dgb: DatagridBodyComponent,\r\n        public dfs: DatagridFacadeService,\r\n        public el: ElementRef, private injector: Injector, private ngZone: NgZone) {\r\n            this.dgs = this.injector.get(DatagridService);\r\n            this.render2 = this.injector.get(Renderer2);\r\n        }\r\n\r\n    private listenSubject() {\r\n        // const _selectrow = this.dfs.selectRow$.subscribe(() => {\r\n        //     this.detectChanges();\r\n        // });\r\n        // this.subscriptions.push(_selectrow);\r\n\r\n        // const _unselectrow = this.dfs.unSelectRow$.subscribe(() => {\r\n        //     this.detectChanges();\r\n        // });\r\n        // this.subscriptions.push(_unselectrow);\r\n\r\n        const _setselectrow = this.dgs.setSelecedRow.pipe(\r\n            takeUntil(this.destroy$)\r\n        )\r\n        .subscribe((r: any) => {\r\n            this.detectChanges();\r\n        });\r\n        this.subscriptions.push(_setselectrow);\r\n\r\n        this.dfs.checkRow$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n\r\n        this.dfs.clearCheckeds$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe( () => {\r\n            this.checkedRows = this.dfs.getCheckeds();\r\n            this.detectChanges();\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.listenSubject();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        if (this.subscriptions && this.subscriptions.length) {\r\n            this.subscriptions.forEach(n => n.unsubscribe());\r\n            this.subscriptions = [];\r\n        }\r\n    }\r\n\r\n    private detectChanges() {\r\n        if (!this.cd['destroyed']) {\r\n            // this.cd.markForCheck();\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n    toggleGroupRow(row, index, open, $event?: MouseEvent) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        row.expanded = open;\r\n        this.dg.dfs.setGroupRowsVisible(row, open);\r\n    }\r\n\r\n    getGroupSummaryData(groupId: string) {\r\n        const _data = this.dg.getRows();\r\n        if (_data && _data.length) {\r\n            const row = this.dg.getRows().find(n =>  n['__group_parent_id__'] === groupId && n['__group_footer__']);\r\n            if (row) {\r\n                return row.data;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    getGroupColumn(field) {\r\n        return this.dg.flatColumns.find(col => col.field === field);\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n/**\r\n * ä½¿ç¨è¯´æ\r\n * let message = \"ä»å¤©å¤©æ° {0}ï¼å¤å¤å¥½ {1}ã\"\r\n * template:\r\n * <h1>{{ message| replaceX: 'æ´æ', 'é£å' }}</h1>\r\n * resule:\r\n * <h1>ä»å¤©å¤©æ° æ´æï¼å¤å¤å¥½ é£åã</h1>\r\n */\r\n@Pipe({name: 'replaceX'})\r\nexport class ReplaceXPipe implements PipeTransform {\r\n    transform(value: any, ...args: any[]) {\r\n        args.forEach((v, i) => {\r\n            value = value.replace(`{${i}}`, v);\r\n        });\r\n\r\n        return value;\r\n    }\r\n}\r\n","import { Directive, Input, Injector, Renderer2, ElementRef, OnInit } from '@angular/core';\r\nimport { CUSTOM_GROUP_ROW_CLS } from '../../types/constant';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[group-row]',\r\n})\r\nexport class DatagridGroupRowDirective implements OnInit {\r\n    @Input('group-row') groupRow;\r\n\r\n    constructor(private injector: Injector, private render: Renderer2, private el: ElementRef, private dg: DatagridComponent) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        setTimeout(() => {\r\n            if (this.dg && this.dg.groupStyler) {\r\n\r\n                const tr = this.el.nativeElement;\r\n                const _cls = Array.from(tr.classList).find((n: string) => n.indexOf(CUSTOM_GROUP_ROW_CLS) > -1);\r\n                if (_cls) {\r\n                    tr.classList.remove(_cls);\r\n                }\r\n\r\n                const styler = this.dg.groupStyler(this.groupRow);\r\n\r\n                if (!styler) {\r\n                    return;\r\n                }\r\n\r\n                if (!tr.id) {\r\n                    tr.id = 'group-tr_' + this.groupRow.id;\r\n                }\r\n\r\n                const str = CUSTOM_GROUP_ROW_CLS + this.dg.idService.encrypt(JSON.stringify(styler));\r\n               \r\n                this.render.addClass(tr, str);\r\n                this.dg.renderCustomStyle2(styler, tr, str);\r\n                // this.dg.renderCustomStyle(styler, tr);\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'showStar'})\r\nexport class ShowRequiredStarPipe implements PipeTransform {\r\n    transform(validators: any): any {\r\n        if (validators && validators.length) {\r\n            const isRequired = validators.find(v => v.type === 'required');\r\n            return isRequired;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'disableRow'})\r\nexport class DisableRowPipe implements PipeTransform {\r\n    transform(rowData: any, rowIndex: number, disableRowFn: (row, index) => {}): any {\r\n        if (disableRowFn) {\r\n            return disableRowFn(rowData, rowIndex);\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'selectedRow'})\r\nexport class SelectedRowPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowId: any): any {\r\n        return this.dfs.isRowSelected(rowId);\r\n    }\r\n}\r\n","import { Utils } from './utils';\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({name: 'fieldvalue'})\r\nexport class FieldValuePipe implements PipeTransform {\r\n    transform(field: any, rowdata: any, safe = false): any {\r\n        return Utils.getValue(field, rowdata, safe);\r\n    }\r\n}\r\n","import { DatagridComponent } from './../../datagrid.component';\r\nimport { Utils } from './../../utils/utils';\r\nimport { OnDestroy, Input, HostListener, ElementRef, Directive, Injector, OnInit, NgZone, Renderer2 } from '@angular/core';\r\nimport { CommonUtils } from '@farris/ui-common';\r\nimport { DomHandler } from '../../services/domhandler';\r\n\r\n@Directive({\r\n    selector: '[cell-tooltip]',\r\n    exportAs: 'cellTooltip'\r\n})\r\nexport class DatagridCellTooltipDirective implements OnInit, OnDestroy {\r\n    @Input('cell-tooltip') enable: boolean;\r\n    @Input() position: 'top' | 'bottom' | 'left' | 'right' | 'top-left' | 'top-center' | 'top-right' = 'top-left';\r\n    @Input() positionStyle: string;\r\n    @Input() tooltipStyleClass: string;\r\n    @Input() message: string;\r\n    @Input() delay = 1000;\r\n\r\n    @Input() cls = '';\r\n    @Input() type: 'danger' | 'success' | 'info' | 'warning' = 'info';\r\n    @Input() tipMode: 'allways' | 'auto' = 'auto';\r\n\r\n    // @HostBinding('style.width') cmpWidth = '100%';\r\n\r\n    container: any;\r\n    private commonUtils: CommonUtils;\r\n    private showTipTimer = null;\r\n\r\n\r\n    private _mouseenter = null;\r\n    private _mouseleave = null;\r\n    private _mouseclick = null;\r\n    private ngZone: NgZone = null;\r\n    private render: Renderer2 = null;\r\n    private dg: DatagridComponent;\r\n    constructor(private el: ElementRef, private injector: Injector) {\r\n        if (this.injector) {\r\n            this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());\r\n            this.ngZone = this.injector.get(NgZone);\r\n            this.render = this.injector.get(Renderer2);\r\n\r\n            this.dg = this.injector.get(DatagridComponent);\r\n        } else {\r\n            this.commonUtils = new CommonUtils();\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        if (this.ngZone && this.enable) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                this._mouseenter = Utils.on(this.el.nativeElement, 'mouseenter', this.onMouseEnter.bind(this), { target: '.f-datagrid-cell-content', options: { capture: true }});\r\n                this._mouseleave = Utils.on(this.el.nativeElement, 'mouseleave', this.onMouseLeave.bind(this), { target: '.f-datagrid-cell-content', options: { capture: true }});\r\n                this._mouseclick = Utils.on(this.el.nativeElement, 'mousedown', this.onClick.bind(this));\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.hide();\r\n        if (this._mouseenter) {\r\n            this._mouseenter();\r\n        }\r\n\r\n        if (this._mouseleave) {\r\n            this._mouseleave();\r\n        }\r\n\r\n        if (this._mouseclick) {\r\n            this._mouseclick();\r\n        }\r\n\r\n        // this.dg = null;\r\n    }\r\n\r\n    onMouseEnter($event: any) {\r\n\r\n        if (!this.enable) {\r\n            return;\r\n        }\r\n\r\n\r\n        if ($event.fromElement) {\r\n            if (!$event.fromElement.closest('.f-datagrid')) {\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        const cellTiptimer = this.dg ? this.dg.cellTipTimer : 1000;\r\n\r\n        if (this.showTipTimer) {\r\n            clearTimeout(this.showTipTimer);\r\n            this.showTipTimer = null;\r\n        }\r\n        this.showTipTimer = setTimeout(() => {\r\n            this.show($event);\r\n        }, cellTiptimer);\r\n    }\r\n\r\n    onMouseLeave() {\r\n        this.hide();\r\n    }\r\n\r\n    onClick(e: MouseEvent) {\r\n        // e.stopPropagation();\r\n        this.hide();\r\n    }\r\n\r\n    private getTextContainer() {\r\n        return DomHandler.findSingle(this.container, '.f-tooltip-text');\r\n    }\r\n\r\n    private donotShowTips(target: any) {\r\n        const tdWidth = target.offsetWidth;\r\n        const tagetSty =  window.getComputedStyle(target);\r\n        const txtWidth = this.commonUtils.getTextWidth(this.message, tagetSty.font);\r\n        const { paddingLeft, paddingRight } = tagetSty;\r\n        const _width = tdWidth - (Number(paddingLeft.replace('px', '')) || 0) - (Number(paddingRight.replace('px', '')) || 0);\r\n\r\n        let tr = target.closest('tr');\r\n        if (tr) {\r\n            const trId = tr.id;\r\n            // tr = document.querySelector('#'+ trId);\r\n            tr = Utils.getTrDomById(trId, document);\r\n        }\r\n\r\n        if (this.tipMode === 'auto') {\r\n            if (tr) {\r\n                return _width && _width > txtWidth;\r\n            }\r\n            return true;\r\n        } else {\r\n            return tr ? false : true;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        if (!this.enable) {\r\n            return;\r\n        }\r\n\r\n        if (this.showTipTimer) {\r\n            clearTimeout(this.showTipTimer);\r\n            this.showTipTimer = null;\r\n        }\r\n\r\n        if (this.container && this.container.parentElement) {\r\n            document.body.removeChild(this.container);\r\n        }\r\n        this.container = null;\r\n    }\r\n\r\n    show($event: MouseEvent) {\r\n        const cellEl = $event.target as any;\r\n        // this.enable = cellEl.getAttribute('cell-tooltip') === 'true';\r\n        this.message = cellEl.getAttribute('message');\r\n        this.tipMode = cellEl.getAttribute('tipMode') || 'auto';\r\n\r\n        if (!this.enable || !this.message) {\r\n            return;\r\n        }\r\n\r\n        const tipWidth = cellEl.getAttribute('tipWidth');\r\n        const tipHeight = cellEl.getAttribute('tipHeight');\r\n        this.position = cellEl.getAttribute('position') || 'top-left';\r\n\r\n        // æ£æ¥ä¸åå®¹å®½åº¦æ¯å¦è¶åºåå®½\r\n        if (this.donotShowTips($event.target) && cellEl.innerText === this.message) {\r\n            return;\r\n        }\r\n\r\n        // const boxEl = this.el.nativeElement;\r\n        const boxEl = $event.target;\r\n        const elSize = this.getBoxSizeObj(boxEl);\r\n\r\n\r\n        /** å¦æå­å¨åä¸æ°å»ºï¼åªéè¦ä¿®æ¹éé¢çåå®¹ */\r\n        if (!this.container) {\r\n            this.create(elSize);\r\n        } else {\r\n            DomHandler.findSingle(this.container, '.f-tooltip-text').innerHTML = this.message;\r\n        }\r\n\r\n        this.container.style.maxWidth = `${window.innerWidth - 30}px`;\r\n        this.container.style.minWidth = '35px';\r\n\r\n        if (tipWidth) {\r\n            this.container.style.width = tipWidth;\r\n        }\r\n\r\n        if (tipHeight) {\r\n            this.container.style.height = tipHeight;\r\n        }\r\n\r\n\r\n        const offset = DomHandler.getOffset(boxEl);\r\n        const targetTop = offset.top;\r\n        const targetLeft = offset.left;\r\n        let left: number;\r\n        let top: number;\r\n        this.container.style.display = 'block';\r\n\r\n        this.changeTooltipPosition(boxEl);\r\n        const arrow = DomHandler.findSingle(this.container, '.f-tooltip-arrow');\r\n        const tooltipSize = this.getTooltipSize();\r\n\r\n        // æ£æ¥åå®¹é«åº¦\r\n        if (window.innerHeight - 10 < tooltipSize.height) {\r\n            this.container.style.height = `${window.innerHeight - 20}px`;\r\n\r\n            tooltipSize.height = window.innerHeight - 25;\r\n            const textContainer = this.getTextContainer();\r\n            textContainer.style.height = `${tooltipSize.height}px`;\r\n            textContainer.style.overflow = 'hidden';\r\n        }\r\n\r\n\r\n        const n = this.updateArrowPosition(arrow, offset, $event);\r\n        switch (this.position) {\r\n            case 'right':\r\n                left = targetLeft + elSize.width;\r\n                top = n;\r\n                break;\r\n            case 'left':\r\n                left = targetLeft - tooltipSize.width;\r\n                top = n;\r\n                break;\r\n            case 'top-left':\r\n                top = targetTop - tooltipSize.height - 7;\r\n                left = n;\r\n                break;\r\n        }\r\n\r\n        if (left) {\r\n            this.container.style.left = left + 'px';\r\n        }\r\n\r\n        this.container.style.top = top + 'px';\r\n        this.container.style.zIndex = 999999;\r\n    }\r\n\r\n    private updateArrowPosition(arrow: any, elOffset: { top, left }, $event: any) {\r\n        const tooltipSize = this.getTooltipSize();\r\n        if (this.position === 'left' || this.position === 'right') {\r\n            const targetTop = elOffset.top;\r\n            const halfHeight = tooltipSize.height / 2;\r\n            let top = 10;\r\n            if (targetTop > halfHeight && window.innerHeight - targetTop > halfHeight) {\r\n                top = targetTop - tooltipSize.height / 2;\r\n            }\r\n\r\n            // è°æ´ç®­å¤´çä½ç½®\r\n            if (arrow) {\r\n                arrow.style.top = `${targetTop - top}px`;\r\n            }\r\n\r\n            return top;\r\n        } else if (this.position === 'top-left') {\r\n            let left = $event.pageX - tooltipSize.width / 2;\r\n\r\n            if (left < 10) {\r\n                left = elOffset.left;\r\n            }\r\n\r\n            if (left + tooltipSize.width > window.innerWidth) {\r\n                left = window.innerWidth - tooltipSize.width - 20;\r\n            }\r\n            // è°æ´ç®­å¤´çä½ç½®\r\n            if (arrow) {\r\n                if ($event.pageX - left > 28) {\r\n                    if ($event.pageX - left + 28 > tooltipSize.width) {\r\n                        arrow.style.left = `${tooltipSize.width - 28 }px`;\r\n                    } else {\r\n                        arrow.style.left = `${$event.pageX - left }px`;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return left;\r\n        }\r\n    }\r\n\r\n    create(elSize: any) {\r\n        let styleClass = this.tooltipCls();\r\n        this.container = document.createElement('div');\r\n        if (this.tooltipStyleClass) {\r\n            styleClass += ' ' + this.tooltipStyleClass;\r\n        }\r\n        this.container.className = styleClass;\r\n\r\n        const tooltipArrow = document.createElement('div');\r\n        tooltipArrow.className = 'f-tooltip-arrow ';\r\n        this.container.appendChild(tooltipArrow);\r\n\r\n        const tooltipText = document.createElement('div');\r\n        tooltipText.className = 'f-tooltip-text ';\r\n        tooltipText.innerHTML = this.message;\r\n\r\n        const maxWidth = window.innerWidth - 50;\r\n        tooltipText.style.maxWidth = `${maxWidth}px`;\r\n\r\n        tooltipText.style.wordBreak = 'break-all';\r\n        this.container.style.textAlign = 'center';\r\n\r\n        if (this.positionStyle) {\r\n            this.container.style.position = this.positionStyle;\r\n        }\r\n\r\n        this.container.appendChild(tooltipText);\r\n        document.body.appendChild(this.container);\r\n    }\r\n\r\n    private tooltipCls() {\r\n        return 'datagrid-cell-tooltip f-tooltip ' + this.getThemeCls() + ' f-tooltip-' + this.position + ' ' + this.cls;\r\n    }\r\n\r\n    private getThemeCls() {\r\n        if (this.type) {\r\n            return 'f-tooltip-' + this.type;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    /** è·åå®¿ä¸»å°ºå¯¸ */\r\n    private getBoxSizeObj(boxEl) {\r\n        const p = boxEl.getBoundingClientRect();\r\n        return {\r\n            width: DomHandler.getOuterWidth(boxEl),\r\n            height: DomHandler.getOuterHeight(boxEl),\r\n            left: p.left,\r\n            right: p.right,\r\n            top: p.top,\r\n            bottom: p.bottom\r\n        };\r\n    }\r\n\r\n    /** è·åtooltip å®¹å¨å°ºå¯¸ */\r\n    private getTooltipSize() {\r\n        return {\r\n            width: DomHandler.getOuterWidth(this.container),\r\n            height: DomHandler.getOuterHeight(this.container)\r\n        };\r\n    }\r\n\r\n    /** è·åçªå£å°ºå¯¸ */\r\n    private getWindowSize() {\r\n        return {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        };\r\n    }\r\n\r\n    /** æ ¹æ®åå®¹çå¤å°ï¼èªå¨æ´æ¹tooltip çä½ç½® */\r\n    private changeTooltipPosition(boxEl: any) {\r\n        const boxSize = this.getBoxSizeObj(boxEl);\r\n        const tooltip = this.getTooltipSize();\r\n        const winSize = this.getWindowSize();\r\n\r\n        this.container.className = this.tooltipCls();\r\n\r\n        if (tooltip.width < winSize.width && tooltip.height < boxSize.top) {\r\n            // this.position = 'top-left';\r\n            return;\r\n        } else {\r\n            const elOffset = DomHandler.getOffset(boxEl);\r\n            const elLeft = elOffset.left;\r\n            const elRight = winSize.width - elLeft - boxSize.width;\r\n\r\n            if (elLeft > elRight) {\r\n                this.position = 'left';\r\n            } else {\r\n                this.position = 'right';\r\n            }\r\n\r\n            const toolTipTextWidth = elLeft > elRight ? elLeft : elRight;\r\n            const textEl = this.getTextContainer();\r\n            textEl.style.maxWidth = `${toolTipTextWidth - 30}px`;\r\n            this.container.style.maxWidth = `${toolTipTextWidth}px`;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Pipe, PipeTransform, Injector } from '@angular/core';\r\nimport { ColumnFormatService } from '@farris/ui-common/column';\r\nimport { Utils } from './../../utils/utils';\r\nimport { DataColumn } from './../../types/data-column';\r\n\r\n@Pipe({ name: 'tipmsg' , pure: false})\r\nexport class CellTootipMessagePipe implements PipeTransform {\r\n\r\n    private colFormatSer: ColumnFormatService;\r\n    constructor( private injector: Injector) {\r\n    }\r\n\r\n    transform(col: any, ...args: any[]) {\r\n        if (col.showTips) {\r\n            this.colFormatSer = this.injector.get(ColumnFormatService);\r\n            const msg = this.getCellTooltipContent(col, args[0]);\r\n            return msg;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    private getCellTooltipContent(col: DataColumn, rowData) {\r\n        let txt = Utils.getValue(col.field, rowData);\r\n        if (col.tipContent) {\r\n            if ( typeof col.tipContent === 'string') {\r\n                txt = col.tipContent;\r\n            } else {\r\n                if (typeof col.tipContent === 'function') {\r\n                    txt = col.tipContent(txt, rowData, col);\r\n                }\r\n            }\r\n        } else {\r\n            if (col.formatter && (typeof col.formatter === 'function' ||\r\n                (typeof col.formatter === 'object' && Object.keys(col.formatter).length))) {\r\n                txt = this.colFormatSer.format(txt, rowData, col.formatter);\r\n            } else {\r\n                txt = Utils.escapeValue(txt);\r\n            }\r\n        }\r\n        return txt;\r\n    }\r\n}\r\n","import { takeUntil } from 'rxjs/operators';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { Component, OnInit, ViewEncapsulation, Injector, ChangeDetectorRef, ElementRef, ViewChild, Renderer2, Input, NgZone, OnDestroy, Optional, Host } from '@angular/core';\r\nimport { DatagridService } from './../../services/datagrid.service';\r\nimport { DatagridFilterService } from './../../services/datagrid-filter.service';\r\nimport {  } from './../../services/datagrid-facade.service';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n\r\n@Component({\r\n    selector: 'filter-toolbar',\r\n    template: `\r\n        <div class=\"f-datagrid-filter-toolbar-panel\" #filterPanel [class.show]=\"openFilterPanel\" style=\"width: auto\">\r\n            <span class=\"filter-text\" #filterPanelText [innerHTML]=\"filterText\"></span>\r\n        </div>\r\n        <div class=\"f-datagrid-filter-toolbar\" #filterToolbar>\r\n            <span class=\"title\">{{'datagrid.filter.title'| locale}}ï¼</span>\r\n            <span #filterbarTxt class=\"filter-text\" [innerHTML]=\"filterText\"> </span>\r\n            <span class=\"filter-action\" *ngIf=\"filterText !== empty \">\r\n                <span *ngIf=\"showExpand\" class=\"f-icon filter-action-item\"\r\n                    [class.f-icon-arrow-chevron-up]=\"openFilterPanel\"\r\n                    [class.f-icon-arrow-chevron-down]=\"!openFilterPanel\"\r\n                (click)=\"showFilterTextPanel()\" title=\"{{'datagrid.filter.more'|locale}}\"></span>\r\n                <span title=\"{{'datagrid.filter.clearAll'|locale}}\" class=\"f-icon f-icon-x filter-action-item filter-clear\" (click)=\"clearFilter($event)\"></span>\r\n                <span title=\"refresh\" class=\"f-icon f-icon-reload-sm filter-action-item filter-refresh\" style=\"color: #388fff\" (click)=\"refreshFilter($event)\"></span>\r\n                <span *ngIf=\"enableFilterSetting\" class=\"f-icon f-icon-cog filter-action-item\" title=\"{{'datagrid.filter.setting'|locale}}\"></span>\r\n            </span>\r\n        </div>\r\n    `,\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class DatagridFilterToolbarComponent implements OnInit, OnDestroy {\r\n    empty = '[ æ  ]';\r\n    filterText = this.empty;\r\n\r\n    openFilterPanel = false;\r\n    showExpand = false;\r\n\r\n    @Input() enableFilterSetting = false;\r\n\r\n    @ViewChild('filterPanel') filterPanelRef: ElementRef;\r\n    @ViewChild('filterPanelText') filterPanelTextRef: ElementRef;\r\n    @ViewChild('filterbarTxt') filterTextRef: ElementRef;\r\n    @ViewChild('filterToolbar') filterToolbarRef: ElementRef;\r\n\r\n    get toolbarWidth() {\r\n        return this.filterToolbarRef.nativeElement.offsetWidth;\r\n    }\r\n\r\n    get filterTextContainerWidth() {\r\n        let actionW = 52;\r\n        if (this.enableFilterSetting) {\r\n            actionW = 65;\r\n        }\r\n        return this.toolbarWidth - 85 - actionW;\r\n    }\r\n\r\n    get filterTextRealWidth() {\r\n        this.render.setStyle(this.filterPanelTextRef.nativeElement, 'white-space', 'nowrap');\r\n        const w = this.filterPanelTextRef.nativeElement.scrollWidth;\r\n        this.render.setStyle(this.filterPanelTextRef.nativeElement, 'white-space', 'normal');\r\n        return w;\r\n    }\r\n\r\n    filterChangeSubscription: Subscription;\r\n    windowResizeHandler = null;\r\n    ro: ResizeObserver = null;\r\n    private destory$ = new Subject();\r\n    private dfrs: DatagridFilterService;\r\n    private dg: DatagridComponent;\r\n    constructor(\r\n        private inject: Injector,\r\n        private el: ElementRef,\r\n        private cd: ChangeDetectorRef,\r\n        private dgs: DatagridService,\r\n        private render: Renderer2,\r\n        private ngZone: NgZone,\r\n        private localeSer: LocaleService,\r\n      ) {\r\n            this.empty = this.localeSer.getValue('datagrid.filter.nofilter');\r\n            this.filterText = this.empty;\r\n        }\r\n\r\n    ngOnInit(): void {\r\n        this.dg = this.inject.get<DatagridComponent>(DatagridComponent);\r\n        this.dfrs = this.dg.clientFilterService;\r\n\r\n        this.dgs.clearFilter.pipe(takeUntil(this.destory$)).subscribe(() => {\r\n            this.filterText = this.empty;\r\n            this.openFilterPanel = false;\r\n            this.dgs.onFilterTextChange(this.filterText);\r\n            this.cd.detectChanges();\r\n        });\r\n\r\n        this.filterChangeSubscription = this.dgs.onFilterChanged.pipe(takeUntil(this.destory$)).subscribe((n) => {\r\n            this.filterText = this.dfrs.convertFilterCondition2String(n);\r\n            if (!this.filterText) {\r\n                this.filterText = this.empty;\r\n            }\r\n\r\n            this.updateExpandState();\r\n            setTimeout(() => {\r\n                this.bindEvent();\r\n            }, 100);\r\n            if (!this.showExpand) {\r\n                this.openFilterPanel = false;\r\n            }\r\n            this.cd.detectChanges();\r\n            this.dgs.onFilterTextChange(this.filterText);\r\n        });\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n\r\n            this.ro = new ResizeObserver(() => {\r\n                if (this['_CONTAINER_SIZE_CHANGED_TIMER_']) {\r\n                    clearTimeout(this['_CONTAINER_SIZE_CHANGED_TIMER_']);\r\n                }\r\n                this['_CONTAINER_SIZE_CHANGED_TIMER_'] = setTimeout(() => {\r\n                    this.updateExpandState();\r\n                    this.cd.detectChanges();\r\n                }, 100);\r\n            });\r\n\r\n            this.ro.observe(this.el.nativeElement.closest('div.f-datagrid'));\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.destory$.next();\r\n        this.destory$.complete();\r\n        this.ro.disconnect();\r\n        if (this.filterChangeSubscription) {\r\n            this.filterChangeSubscription.unsubscribe();\r\n            this.filterChangeSubscription = null;\r\n        }\r\n        if (this.windowResizeHandler) {\r\n            this.windowResizeHandler();\r\n            this.windowResizeHandler = null;\r\n        }\r\n    }\r\n\r\n    private bindEvent() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            const filterFields = this.filterToolbarRef.nativeElement.querySelectorAll('.filter-field');\r\n            this.bindFilterFieldHandler(filterFields);\r\n\r\n            const dropdownFilterFields = this.filterPanelTextRef.nativeElement.querySelectorAll('.filter-field');\r\n            this.bindFilterFieldHandler(dropdownFilterFields, false);\r\n        });\r\n    }\r\n\r\n    private bindFilterFieldHandler(filterFields: any, hidePanel = true) {\r\n        if (filterFields && filterFields.length) {\r\n            filterFields.forEach(ff => {\r\n                this.render.listen(ff, 'click', () => {\r\n                    this.removeFilterField(ff, hidePanel);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    private removeFilterField(ff: any, hidePanel = true) {\r\n        const field = ff.classList[1].replace('filter-column-', '');\r\n        // delete this.dg.conditions[field];\r\n        ff.remove();\r\n        if (hidePanel) {\r\n            this.openFilterPanel = false;\r\n            this.updateExpandState();\r\n        }\r\n        this.dfrs.removeFilterField(field);\r\n    }\r\n\r\n    private updateExpandState() {\r\n        this.showExpand = this.isShowExpand();\r\n    }\r\n\r\n    isShowExpand() {\r\n\r\n        if (this.filterTextContainerWidth > this.filterTextRealWidth) {\r\n            return false;\r\n        } else if (this.filterTextRealWidth > this.filterTextContainerWidth) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    clearFilter($event) {\r\n        this.filterText = this.empty;\r\n        this.dgs.onClearFilter();\r\n        this.dgs.onFilterChanged.emit({});\r\n        return false;\r\n    }\r\n\r\n    refreshFilter($event) {\r\n        this.dg.filterData();\r\n        return false;\r\n    }\r\n\r\n    showFilterTextPanel() {\r\n        this.openFilterPanel = !this.openFilterPanel;\r\n        this.cd.detectChanges();\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit, RendererStyleFlags2, AfterViewInit } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DataColumn, HeaderStyleFn } from './../../types/data-column';\r\n\r\n@Directive({\r\n    selector: '[header-style]',\r\n    exportAs: 'HeaderStyler'\r\n})\r\nexport class HeaderStyleDirective implements OnInit, AfterViewInit {\r\n    @Input('header-style') column: DataColumn;\r\n    @Input() groupHeader = false;\r\n\r\n\r\n    private dg: DatagridComponent = null;\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector) {\r\n        this.dg = this.inject.get(DatagridComponent);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.renderCss2Element();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // å¯ç¨è¡¨å¤´èªæç¤º\r\n        if (this.column.halign && this.column.halign !== 'left') {\r\n            const tipEl = this.el.nativeElement.querySelector('.farris-label-tips');\r\n            if (tipEl && tipEl.parentElement && tipEl.parentElement.nodeName == 'DIV') {\r\n                this.render.setStyle(tipEl.parentElement, 'width', '100%');\r\n                if (this.column.halign === 'right') {\r\n                    this.render.setStyle(tipEl.parentElement, 'justify-content', 'end');\r\n                } else {\r\n                    this.render.setStyle(tipEl.parentElement, 'justify-content', 'center');\r\n                }\r\n            } else {\r\n                if (this.groupHeader) {\r\n                    if (this.column.halign === 'right') {\r\n                        this.render.setStyle(this.el.nativeElement, 'justify-content', 'end');\r\n                    } else {\r\n                        this.render.setStyle(this.el.nativeElement, 'justify-content', 'center');\r\n                    }   \r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderCss2Element() {\r\n        if (this.column && this.column.headerStyler) {\r\n            const styler = this.column.headerStyler;\r\n            const dom = this.el.nativeElement;\r\n            const st = typeof this.column.headerStyler;\r\n\r\n            if (st === 'string') {\r\n                this.render.addClass(this.el.nativeElement, styler as string);\r\n            } else if (st === 'function') {\r\n                const r = (this.column.headerStyler as HeaderStyleFn)(this.column);\r\n                if (r.cls) {\r\n                    this.render.addClass(this.el.nativeElement, r.cls);\r\n                }\r\n                if (r.style) {\r\n                    this.renderStyle(dom, r.style);\r\n                }\r\n            } else if (st === 'object' && Object.keys(st).length) {\r\n                this.renderStyle(dom, styler);\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderStyle(targetEl: any, styleObj: any) {\r\n        const clskey = `${this.dg.customStyleKey()} td[field=\"${this.column.field}\"] span.f-datagrid-header-cell-title`;\r\n        this.dg.renderCustomStyle2({style: styleObj}, targetEl, clskey);\r\n\r\n\r\n        const tdClskey = `${this.dg.customStyleKey()} td[field=\"${this.column.field}\"].f-datagrid-header-cell`;\r\n        this.dg.renderCustomStyle2({style: styleObj}, targetEl, tdClskey);\r\n\r\n        const bg = Object.keys(styleObj).filter(n => n.toLowerCase().indexOf('background') > -1);\r\n        if (bg && bg.length) {\r\n            const _bgcolor = styleObj[bg[bg.length - 1]];\r\n            const tdClskey2 = `${this.dg.customStyleKey()} td[field=\"${this.column.field}\"] div.f-datagrid-header-cell-content::after`;\r\n            this.dg.renderCustomStyle2({style: {'background-color': _bgcolor}}, targetEl, tdClskey2);\r\n        }\r\n        \r\n    }\r\n\r\n}\r\n","import { DatagridComponent } from './../../datagrid.component';\r\nimport { Component, OnInit, Injector, Input } from '@angular/core';\r\n\r\n\r\n/**\r\n * èªå¨é«åº¦\r\n * ç¦ç¨åé¡µï¼ç¦ç¨åºå®è¡¨å¤´ï¼ç¦ç¨èæå è½½ï¼ç¦ç¨åºå®å\r\n * æ¯æååæ ¼ç¼è¾, æ¯ææåº, æ¯ææå¨åå®½\r\n */\r\n\r\n@Component({\r\n    selector: 'auto-height',\r\n    templateUrl: './auto-height.component.html'\r\n})\r\nexport class AutoHeightComponent implements OnInit {\r\n\r\n    @Input() columns: any[];\r\n    @Input() columnsGroup: any;\r\n    @Input() data: any;\r\n\r\n    constructor(public dg: DatagridComponent, private inject: Injector) { }\r\n\r\n    ngOnInit(): void { }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from '../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowIsSelected', pure: false})\r\nexport class RowIsSelectedPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowData: any, selections?: any[]): any {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n        const id = this.dfs.primaryId(rowData);\r\n\r\n        if (id) {\r\n            return this.dfs.isRowSelected(id, selections);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DatagridFacadeService } from './../services/datagrid-facade.service';\r\n\r\n@Pipe({name: 'rowIsChecked', pure: false})\r\nexport class RowIsCheckedPipe implements PipeTransform {\r\n    constructor(private dfs: DatagridFacadeService) {}\r\n    transform(rowData: any, checkeds: any[]): any {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n\r\n        const id = this.dfs.primaryId(rowData);\r\n        if (id) {\r\n            return this.dfs.isRowChecked(id, checkeds);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit, AfterViewInit } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[group-footer-row-styler]',\r\n})\r\nexport class GroupFooterRowStylerDirective implements OnInit, AfterViewInit {\r\n    @Input() column: any;\r\n    @Input('group-footer-row-styler') rowData: any;\r\n    @Input() rowIndex: any;\r\n\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector, public dg: DatagridComponent) { }\r\n\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.buildCustomGroupFooterRowStyle(this.rowData);\r\n    }\r\n\r\n    private buildCustomGroupFooterRowStyle(rowData) {\r\n\r\n        if (this.dg.groupFooterStyler) {\r\n\r\n            const cs = this.dg.dgs.getCustomStyle(this.dg.groupFooterStyler, [rowData]);\r\n            if (cs) {\r\n                this.dg.renderCustomCls(cs.cls, this.el.nativeElement);\r\n                if (cs.style) {\r\n                    Object.keys(cs.style).forEach(n => {\r\n                        this.el.nativeElement.style[n] = cs.style[n];\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { DatagridComponent } from '../../datagrid.component';\r\nimport { Component, Directive, OnInit, Injector, Input, ElementRef, AfterViewInit, OnChanges, SimpleChanges, DoCheck } from '@angular/core';\r\nimport { DatagridBodyComponent } from '../body';\r\n\r\n@Directive({\r\n    selector: '[auto-height]',\r\n})\r\nexport class AutoHeightDirective implements OnInit, AfterViewInit, OnChanges, DoCheck {\r\n\r\n    @Input('auto-height') autoHeight = false;\r\n    /** æ°æ®åè¡¨æ»é«åº¦ */\r\n    @Input() wheelHeight: number;\r\n\r\n    private _timer = null;\r\n    private _dgb = null;\r\n\r\n    constructor(public dg: DatagridComponent, private inject: Injector, private el: ElementRef) {\r\n        this._dgb = this.inject.get(DatagridBodyComponent);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // this.updateDatagridHeight(this.wheelHeight);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this._updateDatagridHeight(this.wheelHeight);\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.wheelHeight) {\r\n            this._updateDatagridHeight(this.wheelHeight);\r\n        }\r\n    }\r\n\r\n    ngDoCheck() {\r\n        // this.checkScrollbarPosition();\r\n    }\r\n\r\n    private updateDatagridHeight(wheelHeight) {\r\n\r\n        if (this.el && this.el.nativeElement && this.el.nativeElement.parentElement) {\r\n            if (this.autoHeight) {\r\n                if (!wheelHeight) {\r\n                    wheelHeight = 240;\r\n\r\n                    if (!this.dg.ds || !this.dg.ds.rows || !this.dg.ds.rows.length) {\r\n                        wheelHeight = (!this.dg.emptyDataHeight || this.dg.emptyDataHeight < 0 ) ? 240 : this.dg.emptyDataHeight;\r\n                    }\r\n                }\r\n                let h =  parseInt(wheelHeight, 10);\r\n\r\n                if (this.dg.showHeader) {\r\n\r\n                    if (!this.dg.realHeaderHeight) {\r\n                        h += this.dg.setHeaderHeight();\r\n                    } else {\r\n                        h += this.dg.realHeaderHeight;\r\n                    }\r\n                }\r\n\r\n                if (this.dg.showFooter) {\r\n                    h += this.dg.footerHeight;\r\n                }\r\n\r\n                if (this.dg.pagination) {\r\n                    const ph = this.dg.pagerHeight || 40;\r\n                    h += ph;\r\n                }\r\n\r\n                if (this.dg.showFilterBar) {\r\n                    h += this.dg.filterBarHeight;\r\n                }\r\n\r\n                if (this.dg.showRowGroupPanel) {\r\n                    h += this.dg.rowGroupPanelHeight;\r\n                }\r\n\r\n                let wh =  `${wheelHeight}px`;\r\n\r\n                if (this.dg.maxHeight && h > this.dg.maxHeight) {\r\n                    wh = this._dgb.getViewPortHeight();\r\n                }\r\n                this.el.nativeElement.parentElement.style.height = wh;\r\n                this.el.nativeElement.parentElement.parentElement.style.height = wh;    \r\n\r\n                if (this.dg.dgContainer) {\r\n                    if (this.dg.maxHeight && h > this.dg.maxHeight) {\r\n                        h = this.dg.maxHeight;\r\n                    }\r\n\r\n                    const dgHeight = `${h}px`;\r\n                    // æ´æ°grid æå¤å±çé«åº¦\r\n                    this.dg.dgContainer.nativeElement.style.height = dgHeight;\r\n                    // farris-datagrid å¢å é«åº¦\r\n                    this.dg.el.nativeElement.style.height = dgHeight;\r\n\r\n                    this.dg.height = h;\r\n\r\n                    if (this.dg.maxHeight) {\r\n                        if (this.dg.maxHeight && this.dg.maxHeight < 55) {\r\n                            this.dg.maxHeight = 60;\r\n                        }\r\n    \r\n                        const gridContainerEl = this.dg.el.nativeElement.parentElement;\r\n                        gridContainerEl.style.height = 'unset';\r\n                        gridContainerEl.style.maxHeight = this.dg.maxHeight + 'px';\r\n                        gridContainerEl.style.minHeight = h + 'px';\r\n                    }\r\n\r\n                } else {\r\n                    this.dg.el.nativeElement.querySelector('.f-datagrid').style.height = `${h}px`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _updateDatagridHeight(wheelHeight) {\r\n        if (this.dg.autoHeight) {\r\n            if (this.dg.el.nativeElement.parentElement.className.indexOf('f-utils-fill') > -1) {\r\n                this.dg.el.nativeElement.parentElement.className = this.dg.el.nativeElement.parentElement.className.replace('f-utils-fill', '');\r\n            }\r\n            setTimeout(() => {\r\n                this.updateDatagridHeight(wheelHeight);\r\n            }, 50);\r\n        }\r\n    }\r\n\r\n}\r\n","import { Directive, ElementRef, Injector, OnInit, NgZone, Renderer2, OnDestroy, HostListener } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { TR_PREFIX } from '../../types/constant';\r\nimport { Utils } from '../../utils/utils';\r\n\r\n@Directive({\r\n    selector: '[row-dblclick]',\r\n})\r\nexport class DatagridRowDblClickDirective implements OnInit, OnDestroy {\r\n\r\n\r\n    constructor(private el: ElementRef, private injector: Injector, private ngZone: NgZone, private render: Renderer2,\r\n                public dg: DatagridComponent) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngOnDestroy() {\r\n\r\n    }\r\n\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    dblclickRowEvent(event: any) {\r\n\r\n        const tr = event.target.closest('tr');\r\n        if (!tr) {\r\n            return;\r\n        }\r\n\r\n        if (tr.id == null || tr.id == undefined) {\r\n            return;\r\n        }\r\n\r\n        // const rowid = tr.id.replace(TR_PREFIX, '').replace('_fixedright', '').replace('_fixedleft', '').replace('');\r\n        const rowid = Utils.getRowIdByTr(tr);\r\n\r\n        if (tr.className.indexOf('f-datagrid-group-row') > -1) {\r\n            const groupRowid = rowid.replace('group-tr_', '');\r\n            const {data: groupData, index: groupIndex} = this.dg.getGroupRow(groupRowid);\r\n            if (groupData && !isNaN(groupIndex)) {\r\n                if (groupData.expanded) {\r\n                    this.dg.collapseGroupRow(groupIndex);\r\n                } else {\r\n                    this.dg.expandGroupRow(groupIndex);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n\r\n        const rowIndex = tr.getAttribute('index');\r\n        const rowData = this.dg.dfs.findRow(rowid);\r\n\r\n        if (!rowData) {\r\n            return;\r\n        }\r\n       \r\n        if (this.dg.disableRow) {\r\n            if (this.dg.disableRow(rowData.data, rowData.index)) {\r\n                event.stopPropagation();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const handler = () => {\r\n\r\n            if (!this.dg.dfs.isRowSelected(rowid)) {\r\n                const r = this.dg.beforeSelect({ rowIndex: rowIndex, rowData: rowData.data, gridInstance: this.dg });\r\n                let r$: Observable<any> = of(true);\r\n                if (r && r.subscribe) {\r\n                    r$ = r;\r\n                }\r\n                r$.subscribe((t) => {\r\n                    if (t) {\r\n                        this.dg.selectRow(rowid, true, false);\r\n                        this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg, dblclick: true });        \r\n                    }\r\n                })\r\n            } else {\r\n                this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg, dblclick: true });\r\n            }\r\n        }\r\n\r\n        if (this.dg.editable) {\r\n            if (this.dg.editMode === 'row' && this.dg.clickToEdit) {\r\n                this.dg.endRowEdit();\r\n                setTimeout(() => {\r\n                    this.dg.editRow(rowid);\r\n                }, 200);\r\n            } else {\r\n                this.dg.isSingleClick = false;\r\n                // this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg, dblclick: true });\r\n                handler();\r\n            }\r\n        } else {\r\n            // this.dg.dblclickRow.emit({ rowData, id: rowid, index: rowIndex, grid: this.dg,  dblclick: true });\r\n            handler();\r\n        }\r\n\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n    }\r\n}\r\n","import { Directive, ElementRef, Renderer2, Injector, Input, OnInit, AfterViewInit } from '@angular/core';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\n\r\n@Directive({\r\n    selector: '[footer-cell-styler]',\r\n})\r\nexport class FooterCellStylerDirective implements OnInit, AfterViewInit {\r\n    @Input() column: any;\r\n    @Input() rowData: any;\r\n    @Input() rowIndex: any;\r\n    @Input() isGroupFooter = false;\r\n    constructor(private el: ElementRef, private render: Renderer2, private inject: Injector, public dg: DatagridComponent) { }\r\n\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isGroupFooter) {\r\n            this.setGroupFooterCellStyle(this.column);\r\n        } else {\r\n            this.buildCustomCellStyle(this.column, this.rowData);\r\n        }\r\n    }\r\n\r\n    private buildCustomCellStyle(column, rowData) {\r\n\r\n        const tr = this.el.nativeElement.parentNode;\r\n        if (tr && !tr.id) {\r\n            const rowdataid = this.dg.dfs.primaryId(rowData);\r\n            let fixed = '';\r\n            if (tr.closest('.f-datagrid-body-fixed-left')) {\r\n                fixed = '-left';\r\n            } else if (tr.closest('.f-datagrid-body-fixed-right')) {\r\n                fixed = '-right';\r\n            }\r\n\r\n            const trID = 'footer-row'+ fixed + '_' + (rowdataid || this.rowIndex);\r\n            tr.id = trID;\r\n        }\r\n\r\n        if (!this.el.nativeElement.id) {\r\n            this.el.nativeElement.id = 'footer-td_' + this.rowIndex + '_'  + this.column.field.replace(/\\./g, '_') ;\r\n        }\r\n\r\n        if (column && column.footer && column.footer.styler) {\r\n            const _rd = rowData;\r\n            const styler = column.footer.styler;\r\n            const cs = styler(_rd[column.field], _rd);\r\n            if (cs && Object.keys(cs).length) {\r\n                this.dg.renderCustomStyle(cs, this.el.nativeElement);\r\n            } else {\r\n                this.dg.dgs.removeCssRule('#' + this.el.nativeElement.id);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private setGroupFooterCellStyle(col: any) {\r\n        // åç»åè®¡è¡èªå®ä¹æ ·å¼ 20210909\r\n        if (col.groupFooter && col.groupFooter.styler) {\r\n            const val = this.dg.commonUtils.getValue(col.field, this.rowData);\r\n            const _customStyles = this.dg.dgs.getCustomStyle(col.groupFooter.styler, [val, this.rowData]);\r\n            if (_customStyles) {\r\n                this.dg.renderCustomCls(_customStyles.cls, this.el.nativeElement);\r\n                if (_customStyles.style) {\r\n                    Object.keys(_customStyles.style).forEach(n => {\r\n                        this.el.nativeElement.style[n] = _customStyles.style[n];\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class DragDropColumnService {\r\n    private initColumns;\r\n    constructor() {}\r\n\r\n    /** åç´ ä½ç½®è°æ´\r\n     * arr: æ°ç»\r\n     * newIndex: æ°ä½ç½®ç´¢å¼\r\n     * removedIndex: èä½ç½®ç´¢å¼\r\n     */\r\n    moveItem(arr, newIndex, removedIndex) {\r\n        const removedItem = arr.splice(removedIndex, 1);\r\n        arr.splice(newIndex, 0, ...removedItem);\r\n        return arr;\r\n    }\r\n\r\n    backupColumns(columns) {\r\n        this.initColumns = columns.map( cols => {\r\n            return cols.map( n => {\r\n                return {\r\n                    id: n.id,\r\n                    field: n.field\r\n                };\r\n            });\r\n        });\r\n    }\r\n}\r\n","\r\nimport { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input, OnChanges, SimpleChanges, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD as SmoothDnDForHeader, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\nimport { DatagridComponent } from '../../datagrid.component';\r\nimport { DatagridHeaderComponent } from './datagrid-header.component';\r\nimport { DragDropColumnService } from './drag-drop-column.service';\r\n\r\n\r\nconst { wrapperClass, animationClass } = constants;\r\nSmoothDnDForHeader.dropHandler = dropHandlers.reactDropHandler().handler;\r\nSmoothDnDForHeader.wrapChild = false;\r\n\r\nexport interface DragStartEndInfo {\r\n    isSource: boolean;\r\n    payload: any;\r\n    willAcceptDrop: boolean;\r\n}\r\n\r\n@Directive({\r\n    selector: '[drag-column]',\r\n    providers: [\r\n        DragDropColumnService\r\n    ]\r\n})\r\nexport class DragColumnDirective implements AfterViewInit, OnChanges, OnDestroy {\r\n    private container: any;\r\n    @Input('drag-column') enableDrag = true;\r\n    @Input() groupName = '';\r\n\r\n    @Input() options: ContainerOptions = {\r\n        groupName: this.groupName,\r\n        orientation: 'horizontal',\r\n        behaviour: 'move',\r\n        dragHandleSelector: '.drag-column-bar',\r\n        dragClass: 'drag-column-moving',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        getChildPayload: this.getChildPayload.bind(this),\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            if (typeof payload === 'number') {\r\n                return false;\r\n            }\r\n\r\n            if (sourceContainerOptions.groupName !== this.groupName) {\r\n                return false;\r\n            }\r\n\r\n            return !this.dg.isMultiHeader();\r\n        },\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDrop(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2,\r\n                private el: ElementRef, private header: DatagridHeaderComponent, private dg: DatagridComponent,\r\n                private dndSer: DragDropColumnService) { }\r\n\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.enableDrag && !changes.enableDrag.isFirstChange()) {\r\n            if (this.enableDrag) {\r\n                this.initDnD();\r\n            } else {\r\n                this.disposeDnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n    private initDnD() {\r\n        if (!this.dg.enableDragColumn) {\r\n            return;\r\n        }\r\n        if (this.groupName === 'left' || this.groupName === 'right') {\r\n            const { left, right } = this.columnsGroup();\r\n\r\n            if (this.groupName === 'left' && !left.length) {\r\n                return;\r\n            }\r\n\r\n            if (this.groupName === 'right' && (!right.length || (right.length === 1 && right[0].field === '_datagrid-setting-control_'))) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.options.groupName = this.groupName;\r\n        this.disposeDnd();\r\n\r\n\r\n        if (this.enableDrag) {\r\n            this.container = SmoothDnDForHeader(\r\n                this.el.nativeElement,\r\n                this.options\r\n            );\r\n\r\n            this.dndSer.backupColumns(this.header.columns);\r\n        }\r\n    }\r\n\r\n    private getChildPayload(index) {\r\n        if (this.groupName === 'left') {\r\n            if (this.dg.showCheckbox) {\r\n                index--;\r\n            }\r\n            if (this.dg.showLineNumber) {\r\n                index--;\r\n            }\r\n        }\r\n\r\n        const groupColumns = this.columnsGroup();\r\n\r\n        if (this.groupName === 'left') {\r\n            return groupColumns.left.filter((n, i) => this.dg.columnIsVisible(n))[index];\r\n        } else if (this.groupName === 'right') {\r\n            return groupColumns.right.filter((n, i) => this.dg.columnIsVisible(n))[index];\r\n        } else {\r\n            return groupColumns.middle.filter((n, i) => this.dg.columnIsVisible(n))[index];\r\n        }\r\n    }\r\n\r\n    onDropReady(dropResult) {\r\n    }\r\n\r\n    private onDrop(dropResult: DropResult) {\r\n        const { addedIndex, payload, removedIndex } = dropResult;\r\n        if (addedIndex === null) {\r\n            return;\r\n        }\r\n\r\n        const groupColumns = this.columnsGroup();\r\n\r\n        const cols = this.dg.columns[0];\r\n        const currIndex = cols.findIndex(n => n.field === payload.field);\r\n\r\n        let newIndex = addedIndex;\r\n\r\n        const moveColumn = (columns: any) => {\r\n            if (columns) {\r\n                const targetColumn = columns.filter(n => n.visible || n.visible === undefined)[newIndex];\r\n                if (targetColumn) {\r\n                    const realTagetIndex = cols.findIndex(n => n.field === targetColumn.field);\r\n                    this.dg.columns[0] = this.dndSer.moveItem(this.dg.columns[0], realTagetIndex, currIndex);\r\n\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        let columns = [];\r\n        if (this.groupName === 'left') {\r\n            if (this.dg.showCheckbox) {\r\n                newIndex--;\r\n            }\r\n            if (this.dg.showLineNumber) {\r\n                newIndex--;\r\n            }\r\n            columns = groupColumns.left;\r\n        } else if (this.groupName === 'center') {\r\n            columns = groupColumns.middle;\r\n        } else if (this.groupName === 'right') {\r\n            columns = groupColumns.right;\r\n        }\r\n\r\n        if (moveColumn(columns)) {\r\n            this.dg.columnsChanged(false);\r\n\r\n            if (this.dg.useControlPanel && this.dg.settingService) {\r\n                this.dg.settingService.saveUserConfig(this.dg.id);\r\n            }\r\n\r\n            this.dg.columnMoved.emit({ newColumns: this.dg.columns, grid: this.dg });\r\n        }\r\n    }\r\n\r\n    private onDragStart(info) {\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n    }\r\n\r\n\r\n    private columnsGroup() {\r\n        const leftColumns = this.dg.columns[0].filter(n => n.fixed === 'left');\r\n        const rightColumns = this.dg.columns[0].filter(n => n.fixed === 'right');\r\n        const middleColumns = this.dg.columns[0].filter(n => n.fixed !== 'right' && n.fixed !== 'left');\r\n\r\n        return {\r\n            left: leftColumns,\r\n            right: rightColumns,\r\n            middle: middleColumns\r\n        };\r\n    }\r\n}\r\n\r\n","\r\nimport { Directive, NgZone, Injector, Renderer2, ElementRef, AfterViewInit, Input, OnDestroy } from '@angular/core';\r\nimport { dropHandlers, smoothDnD, DropResult, ContainerOptions, constants } from '@farris/smooth-dnd';\r\nimport { DatagridComponent } from './../../datagrid.component';\r\nimport { DragStartEndInfo } from './datagrid-drag-column.directive';\r\nimport { DragDropColumnService } from './drag-drop-column.service';\r\n\r\n\r\nsmoothDnD.dropHandler = dropHandlers.reactDropHandler().handler;\r\nsmoothDnD.wrapChild = false;\r\nconst { wrapperClass, animationClass } = constants;\r\n\r\n@Directive({\r\n    selector: '[drop-column]',\r\n    providers: [\r\n        DragDropColumnService\r\n    ]\r\n})\r\nexport class DropColumnDirective implements AfterViewInit, OnDestroy {\r\n    @Input() options: ContainerOptions = {\r\n        orientation: 'horizontal',\r\n        behaviour: 'move',\r\n        dragHandleSelector: '.group-field',\r\n        dropPlaceholder: {\r\n            className: 'drop-group-field',\r\n        },\r\n        getGhostParent: () => {\r\n            return document.body;\r\n        },\r\n        shouldAcceptDrop: (sourceContainerOptions, payload) => {\r\n            if(payload === undefined || payload === null) {\r\n                return false;\r\n            }\r\n            if (typeof payload === 'number') {\r\n                return true;\r\n            }\r\n\r\n            if (this.getGroupFields().length < 3) {\r\n                return payload.allowGrouping === undefined || payload.allowGrouping;\r\n            }\r\n            return false;\r\n        },\r\n        getChildPayload: (index) => {\r\n            return index;\r\n        },\r\n        // dragClass: 'drag-column-moving',\r\n        onDropReady: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDropReady(dropResult);\r\n            });\r\n        },\r\n        onDrop: (dropResult: DropResult) => {\r\n            this.ngzone.run(() => {\r\n                this.onDrop(dropResult);\r\n            });\r\n        },\r\n        onDragEnter: () => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnter();\r\n            });\r\n        },\r\n        onDragStart: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragStart(info);\r\n            });\r\n        },\r\n        onDragEnd: (info: DragStartEndInfo) => {\r\n            this.ngzone.run(() => {\r\n                this.onDragEnd(info);\r\n            });\r\n        }\r\n    };\r\n\r\n    private container: any;\r\n    constructor(private ngzone: NgZone, private injector: Injector, private render: Renderer2, private el: ElementRef,\r\n                private dg: DatagridComponent, private dndSer: DragDropColumnService) { }\r\n\r\n    ngAfterViewInit() {\r\n        this.initDnD();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.disposeDnd();\r\n    }\r\n\r\n    private disposeDnd() {\r\n        if (this.container) {\r\n            this.container.dispose();\r\n            this.container = null;\r\n        }\r\n    }\r\n\r\n    private initDnD() {\r\n        this.disposeDnd();\r\n        if (this.dg.showRowGroupPanel) {\r\n            this.container = smoothDnD(\r\n                this.el.nativeElement,\r\n                this.options\r\n            );\r\n        }\r\n    }\r\n\r\n    private onDropReady(dropResult) {\r\n    }\r\n\r\n    private getGroupFields() {\r\n        return this.dg.groupField ? this.dg.groupField.split(',') : [];\r\n    }\r\n\r\n\r\n    private onDrop(dropResult: DropResult) {\r\n        const { addedIndex, payload, removedIndex } = dropResult;\r\n\r\n        if (addedIndex === null) {\r\n            return;\r\n        }\r\n\r\n        const newGroupFields = this.getGroupFields();\r\n\r\n        if (removedIndex === null) {\r\n            if (!newGroupFields.some((v) => v === payload.field)) {\r\n                // newGroupFields.splice(0, 0, payload.field);\r\n                newGroupFields.push(payload.field);\r\n            }\r\n        } else {\r\n            this.dndSer.moveItem(newGroupFields, addedIndex, removedIndex);\r\n        }\r\n        this.dg.groupField = newGroupFields.join(',');\r\n        // this.dg.toggleVisibleColumn([this.dg.groupField], false);\r\n\r\n        if (this.dg.useControlPanel && this.dg.settingService) {\r\n            this.dg.checkSettingHttp();\r\n            this.dg.settingService.saveUserConfig(this.dg.id).subscribe( () => {\r\n                this.dg.columnsChanged();\r\n            });\r\n        } else {\r\n            this.dg.columnsChanged();\r\n        }\r\n\r\n        this.dg.groupFieldChange.emit({ newGroupField: this.dg.groupField, grid: this.dg });\r\n    }\r\n\r\n    private onDragStart(info) {\r\n    }\r\n\r\n    private onDragEnd(info) {\r\n    }\r\n\r\n\r\n    private onDragEnter() {\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'cellReadonly'\r\n})\r\nexport class CellIsReadonlyPipe implements PipeTransform {\r\n    transform(col: any, ...args: any[]): any {\r\n        return this.isReadonly(col, args[0], args[1]);\r\n    }\r\n\r\n    private isReadonly(col, rowData, dg) {\r\n        if (dg.editable) {\r\n            // åä¸åå¹¶çååæ ¼ä¸åè®¸ç¼è¾\r\n            if (dg.mergeCell && dg.mergeFields.indexOf(col.field) > -1) {\r\n                return true;\r\n            }\r\n            return this.getReadonlyValue(col, rowData);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private getReadonlyValue(col, rowData) {\r\n        if (col.readonly !== undefined) {\r\n            if (typeof col.readonly === 'boolean') {\r\n                return col.readonly;\r\n            } else if (typeof col.readonly === 'function') {\r\n                return col.readonly(rowData);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","\r\n\r\n\r\n/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-06 07:43:53\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-28 09:28:28\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { NgModule, ModuleWithProviders, Provider, ErrorHandler } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { DataColumnModule } from '@farris/ui-common/column';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { SimpleFilterModule } from '@farris/ui-filter';\r\n// import { FilterPanelModule, FilterPanelComponent } from '@farris/ui-filter-panel';\r\n\r\nimport { DatagridSmartFilterModule } from './plugins/smart-filter/datagrid-smart-filter.module';\r\n\r\nimport { DatagridComponent } from './datagrid.component';\r\nimport { NgxPaginationModule } from './pagination/ngx-pagination.module';\r\nimport { DatagridPagerComponent } from './components/pager/pager.component';\r\nimport { DataGridLoadingComponent } from './components/loading.component';\r\nimport { DatagridHeaderComponent, FilterRowCreateDirective } from './components/header/datagrid-header.component';\r\nimport { DatagridCellEditableDirective } from './components/body/datagrid-cell-editable.directive';\r\nimport { DatagridCellComponent } from './components/body/datagrid-cell.component';\r\nimport { DatagridRowDirective } from './components/body/datagrid-row.directive';\r\nimport { DatagridBodyComponent } from './components/body/datagrid-body.component';\r\nimport { DatagridCellEditorDirective } from './components/columns/column-cell-edit.directive';\r\nimport { DatagridColumnDirective } from './components/columns/datagrid-column.directive';\r\nimport { GridCellEditorDirective } from './components/editors/cell-editor.directive';\r\nimport { ScrollbarModule } from './scrollbar/scrollbar.module';\r\nimport { ScrollbarConfigInterface, SCROLLBAR_CONFIG } from './scrollbar/scrollbar.interfaces';\r\n\r\nimport { DatagridRowHoverDirective } from './components/body/datagrid-row-hover.directive';\r\nimport { DatagridRowsComponent } from './components/body/datagrid-rows.component';\r\nimport { DatagridCheckboxComponent } from './components/checkbox/datagrid-checkbox.component';\r\nimport { DatagridHeaderCheckboxComponent } from './components/checkbox/datagrid-header-checkbox.component';\r\nimport { DatagridResizeColumnDirective } from './components/header/datagrid-resize-column.directive';\r\nimport { DatagridFooterComponent } from './components/footer/datagrid-footer.component';\r\nimport { SafePipe } from './utils/safe.pipe';\r\nimport { FormatCellDataPipe } from './utils/format-cell-data.pipe';\r\nimport { RowDataIdPipe } from './utils/rowid.pipe';\r\nimport { FormatGroupRowPipe } from './utils/format-group-row.pipe';\r\nimport { FixedLeftRowsComponent } from './components/body/fixed-left-rows.component';\r\n\r\n/** å¼å®¹ä¸èçæ¬ */\r\nimport { TextboxEditorComponent } from './components/editors/text-editor.component';\r\n\r\nimport { ReplaceXPipe } from './utils/rexplaceX.pipe';\r\nimport { DatagridGroupRowDirective } from './components/body/datagrid-grouprow.directive';\r\nimport { ShowRequiredStarPipe } from './utils/show-required-label.pipe';\r\nimport { DisableRowPipe } from './utils/disable-row.pipe';\r\nimport { SelectedRowPipe } from './utils/select-row.pipe';\r\nimport { FieldValuePipe } from './utils/field-value.pipe';\r\nimport { DatagridCellTooltipDirective } from './components/tooltip/cell-tooltip.directive';\r\nimport { CellTootipMessagePipe } from './components/tooltip/tip-message.pipe';\r\nimport { DatagridFilterToolbarComponent } from './components/filter-toolbar/filter-toolbar.component';\r\nimport { HeaderStyleDirective } from './components/header/header-style.directive';\r\nimport { AutoHeightComponent } from './components/auto-height/auto-height.component';\r\nimport { RowIsSelectedPipe } from './utils/row-is-selected.pipe';\r\nimport { RowIsCheckedPipe } from './utils/row-is-checked.pipe';\r\nimport { DatagridErrorHandler } from './datagrid-error-handler';\r\nimport { AutoHeightDirective } from './components/auto-height/auto-height.directive';\r\nimport { ValidatorMessagerService } from './services/validator-messager.service';\r\nimport { PagerSelectedListComponent } from './components/pager/selected-list/selected-list.component';\r\nimport { SelectedItemPipe } from './components/pager/selected-item.pipe';\r\nimport { DatagridRowDblClickDirective } from './components/body/datagrid-row-dblclick.directive';\r\nimport { FooterCellStylerDirective } from './components/footer/datagrid-footer-cell.styler.directive';\r\nimport { DragColumnDirective } from './components/header/datagrid-drag-column.directive';\r\nimport { DropColumnDirective } from './components/header/datagrid-drop-column.directive';\r\nimport { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';\r\n\r\nimport { FarrisContextMenuModule } from '@farris/ui-context-menu';\r\nimport { GroupFooterRowStylerDirective } from './components/body/datagrid-group-footer-styler.directive';\r\nimport { CellIsReadonlyPipe } from './utils/cell-readonly.pipe';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n\r\nconst DEFAULT_PERFECT_SCROLLBAR_CONFIG: ScrollbarConfigInterface = {\r\n    minScrollbarLength: 20\r\n};\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        HttpClientModule,\r\n        PaginationModule,\r\n        NgxPaginationModule,\r\n        ScrollbarModule,\r\n        LocaleModule.forRoot(),\r\n        DataColumnModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n        SimpleFilterModule,\r\n        DatagridSmartFilterModule,\r\n        FarrisContextMenuModule,\r\n        FarrisCommonModule.forRoot()\r\n    ],\r\n    declarations: [\r\n        SafePipe,\r\n        FormatCellDataPipe,\r\n        RowDataIdPipe,\r\n        FormatGroupRowPipe,\r\n        ShowRequiredStarPipe,\r\n        FieldValuePipe,\r\n        ReplaceXPipe,\r\n        DisableRowPipe,\r\n        SelectedRowPipe,\r\n        CellIsReadonlyPipe,\r\n        CellTootipMessagePipe,\r\n        DatagridComponent,\r\n        DatagridHeaderComponent,\r\n        DatagridFooterComponent,\r\n        DatagridResizeColumnDirective,\r\n        DatagridCellEditableDirective,\r\n        DatagridCellComponent,\r\n        DatagridRowDirective,\r\n        DatagridBodyComponent,\r\n        DatagridPagerComponent,\r\n        DatagridCellEditorDirective,\r\n        DatagridColumnDirective,\r\n        DatagridRowsComponent,\r\n        FixedLeftRowsComponent,\r\n        DatagridRowHoverDirective,\r\n        DataGridLoadingComponent,\r\n        DatagridCheckboxComponent,\r\n        DatagridHeaderCheckboxComponent,\r\n        GridCellEditorDirective,\r\n        TextboxEditorComponent,\r\n        DatagridGroupRowDirective,\r\n        DatagridCellTooltipDirective,\r\n        DatagridFilterToolbarComponent,\r\n        HeaderStyleDirective,\r\n        AutoHeightDirective,\r\n        AutoHeightComponent,\r\n        RowIsSelectedPipe,\r\n        RowIsCheckedPipe,\r\n        SelectedItemPipe,\r\n        PagerSelectedListComponent,\r\n        DatagridRowDblClickDirective,\r\n        FooterCellStylerDirective,\r\n        DragColumnDirective,\r\n        DropColumnDirective,\r\n        FilterRowCreateDirective,\r\n        SmartFilterToolbarComponent,\r\n        GroupFooterRowStylerDirective,\r\n    ],\r\n    providers: [\r\n        { provide: ErrorHandler, useClass: DatagridErrorHandler },\r\n        {\r\n            provide: SCROLLBAR_CONFIG,\r\n            useValue: DEFAULT_PERFECT_SCROLLBAR_CONFIG\r\n        },\r\n        ValidatorMessagerService\r\n    ],\r\n    exports: [\r\n        SafePipe,\r\n        DatagridComponent,\r\n        DatagridHeaderComponent,\r\n        DatagridColumnDirective,\r\n        DatagridCellEditorDirective,\r\n        DatagridCellEditableDirective,\r\n        DatagridRowHoverDirective,\r\n        DatagridResizeColumnDirective,\r\n        TextboxEditorComponent,\r\n        FormatCellDataPipe,\r\n        RowDataIdPipe,\r\n        ReplaceXPipe,\r\n        FieldValuePipe,\r\n        CellTootipMessagePipe,\r\n        ShowRequiredStarPipe,\r\n        DatagridCellTooltipDirective,\r\n        DatagridFilterToolbarComponent,\r\n        RowIsSelectedPipe,\r\n        RowIsCheckedPipe,\r\n        DatagridRowDblClickDirective,\r\n        FooterCellStylerDirective,\r\n        DragColumnDirective,\r\n        DropColumnDirective,\r\n        FilterRowCreateDirective,\r\n        SmartFilterToolbarComponent,\r\n        DatagridSmartFilterModule,\r\n        GroupFooterRowStylerDirective,\r\n        FarrisContextMenuModule,\r\n        CellIsReadonlyPipe\r\n    ],\r\n    entryComponents: [\r\n        // FilterPanelComponent\r\n    ]\r\n})\r\nexport class DatagridModule {\r\n    static forRoot(editors?: Provider[]): ModuleWithProviders {\r\n        return {\r\n            ngModule: DatagridModule,\r\n            providers: editors || []\r\n        };\r\n    }\r\n}\r\n"],"names":["ddvm","SmoothDnDForHeader"],"mappings":"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"}