/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-06 07:43:07
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-30 16:42:51
 * @QQ: 1055818239
 * @Version: v0.8.0
 * - 2021/04/07 增加 enableHighlightCell 属性，支持选中单元格高亮
 */
import { Component, Input, ViewEncapsulation, ContentChildren, QueryList, Output, EventEmitter, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, Injector, HostBinding, NgZone, ElementRef, ViewChild, ApplicationRef, TemplateRef, HostListener } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import ResizeObserver from 'resize-observer-polyfill';
import { of, BehaviorSubject } from 'rxjs';
import { ColumnFilterType } from './types/data-column';
import { DatagridFacadeService } from './services/datagrid-facade.service';
import { DatagridColumnDirective } from './components/columns/datagrid-column.directive';
import { IgnoreProperties, IS_GROUP_ROW_FIELD } from './services/state';
import { DATAGRID_REST_SERVICEE } from './services/rest.service';
import { DatagridService } from './services/datagrid.service';
import { GRID_EDITORS, CELL_SELECTED_CLS, GRID_VALIDATORS, SIZE_TYPE, GRID_SETTINGS_SERVICE, GRID_SETTINGS_HTTP, CELL_EDITING_CLS, TR_PREFIX, TR_ID_PREFIX } from './types/constant';
import { DomHandler } from './services/domhandler';
import { Utils } from './utils/utils';
import { CommonUtils, DebugService, FarrisComponentInstanceService, WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';
import { ColumnFormatService } from '@farris/ui-common/column';
import { flatten, cloneDeep } from 'lodash-es';
import { LocaleService } from '@farris/ui-locale';
import { DatagridColumnsHelper } from './services/datagrid-columns.helper';
import { DatagridFilterService } from './services/datagrid-filter.service';
import { debounceTime, map, switchMap } from 'rxjs/operators';
import { SmartFilterToolbarComponent } from './components/filter-toolbar/smart-filter-toolbar.component';
import { DatagridSmartFilterService } from './services/datagrid-smart-filter.service';
import { IdService } from '@farris/ui-common';
import { SelectionModeService } from './services/selection-mode.service';
import { Compare } from '@farris/ui-common/types';
export class DatagridComponent {
    /**
     * @param {?} cd
     * @param {?} el
     * @param {?} inject
     * @param {?} zone
     * @param {?} dfs
     * @param {?} dgs
     * @param {?} app
     * @param {?} domSanitizer
     * @param {?} render2
     */
    constructor(cd, el, inject, zone, dfs, dgs, app, domSanitizer, render2) {
        this.cd = cd;
        this.el = el;
        this.inject = inject;
        this.zone = zone;
        this.dfs = dfs;
        this.dgs = dgs;
        this.app = app;
        this.domSanitizer = domSanitizer;
        this.render2 = render2;
        this.auther = `Lucas Huang - QQ:1055818239`;
        this.version = '0.8.x';
        this.__component_type__ = 'DatagridComponent';
        /**
         * 启用性能优化版，默认为 false
         */
        this.fast = false;
        this.pos = 'relative';
        this.hostCls = false;
        /**
         * 使用主题
         */
        this.useThemes = true;
        // 用于存储用户个性化设置
        this.id = '';
        /**
         * 自动高度 - 启用此属性后，就是一个普普通通的 table , 不能编辑，不能排序，不能分页，不能... 就是一凡胎
         */
        this.useHtmlTable = false;
        /**
         * 自动高度
         */
        this.autoHeight = false;
        /**
         * 配合 autoHeight 一起使用，当此值大于0 时，且autoHeight 为true时，数据总行高达到最大高度时，将停止自动高度并使用内部滚动条
         */
        this.maxHeight = 0;
        /**
         * 显示边框
         */
        this.showBorder = false;
        /**
         * 启用斑马线
         */
        this.striped = true;
        /**
         * 宽度
         */
        this.width = 800;
        /**
         * 高度
         */
        this.height = 300;
        /**
         * 显示表头
         */
        this.showHeader = true;
        /**
         * 表头-单行高度
         */
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 显示页脚
         */
        this.showFooter = false;
        /**
         * 页脚默认行高
         */
        this.footerHeight = 29;
        /**
         * 页脚数据来源, 默认为 client
         */
        this.footerDataFrom = 'client';
        /**
         * 合计行显示位置，默认为底部
         */
        this.footerPosition = 'bottom';
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 设置grid 行高尺寸
         * sm: 小，md: 正常， lg: 大，xl: 超大
         */
        this._sizeType = 'sm';
        /**
         * 填充容器
         */
        this._fit = false;
        /**
         * 如果为真，则自动展开/收缩列的大小以适合网格宽度并防止水平滚动。
         */
        this._fitColumns = false;
        /**
         * 根据grid的宽度自动调整列宽度
         */
        this._autoFitColumns = false;
        /**
         * 禁用
         */
        this.disabled = false;
        /**
         * 滚动条显示模式，默认为 auto
         */
        this.scrollBarShowMode = 'auto';
        this.scrollBarOptions = {
            width: 18,
            height: 18
        };
        /**
         * 当滚动一直显示时，是否显示两端的箭头
         */
        this.showScrollArrow = false;
        /**
         * 可拖动列设置列宽
         */
        this.resizeColumn = true;
        /**
         * 显示行号
         */
        this.showLineNumber = false;
        /**
         * 行号表头字符
         */
        this.lineNumberTitle = '';
        /**
         * 行号宽度
         */
        this.lineNumberWidth = 36;
        /**
         * 复选框列宽度，默认 36px
         */
        this.checkboxColumnWidth = 36;
        /**
         * 鼠标滑过效果开关，默认开启
         */
        this.rowHover = true;
        /**
         * 允许编辑时，单击进入编辑状态; false为双击进入编辑
         */
        this.clickToEdit = true;
        this._lockPagination = false;
        /**
         * 分页信息
         */
        this.__pagination = true;
        /**
         * 分页组件自定义内容区模板
         */
        this.pagerContentTemplate = null;
        /**
         * 分页条对齐展示方式， left, right, center   默认为 right
         */
        this.pagerPos = 'right';
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 显示转至指定页码输入框
         */
        this.showGotoInput = false;
        /**
         * 启用跨页多选
         */
        this.enableMorePageSelect = false;
        /**
         * 显示选中列表
         */
        this.showSelectedList = false;
        /**
         * 单元格信息提示延时，默认 1000ms
         */
        this.cellTipTimer = 1000;
        /**
         * grid 内部处理分页状态
         */
        this.controlPaginationState = true;
        /**
         * 总记录数
         */
        this._total = 0;
        /**
         * 启用选中行
         */
        this.enableSelectRow = true;
        /**
         * 启用多选
         */
        this.multiSelect = false;
        /**
         * 启用多选时，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示全选checkbox
         */
        this.showAllCheckbox = false;
        /**
         * 当启用多选时，点击行选中，只允许且只有一行被选中。, 默认为 true
         */
        this.onlySelectSelf = true;
        /**
         * 启用多选且显示checkbox, 选中行同时钩选, 默认为 false
         */
        this.checkOnSelect = false;
        /**
         * 启用多选且显示checkbox, 钩选后选中行, 默认为 false
         */
        this.selectOnCheck = false;
        /**
         * 行选中模式，custom: 自定义， default: 仿Windows资源管理器选中
         * 注意： 此属性仅多选，显示复选框有效
         * 默认值： custom
         * addTime: 2021-12-14 by LUCAS HUANG
         */
        this.selectionMode = 'custom';
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 当数据为空时，使用空白显示，且高度为一行的高度。 默认为 false
         */
        this.useBlankWhenDataIsEmpty = false;
        /**
         * 数据为空时的高度
         */
        this.emptyDataHeight = 240;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 无数据时的模板
         */
        this.emptyTemplate = null;
        this.emptyComponentType = null;
        /**
         * 主键字段
         */
        this.idField = 'id';
        /**
         * 页脚数据
         */
        this._footerData = of([]);
        /**
         * 验证不通过时可以结束编辑
         */
        this.endEditByInvalid = true;
        /**
         * 列集合
         */
        this._columns = [];
        this._fields = [];
        /**
         * 禁止数据折行，默认值：true,即在一行显示，不折行。
         */
        this.nowrap = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 是否启用异步加载数据
         */
        this.virtualizedAsyncLoad = false;
        /**
         * 编辑方式： row(整行编辑)、cell(单元格编辑)；默认为 row
         */
        this.editMode = 'row';
        /**
         * 编辑状态
         */
        this._editable = false;
        /**
         * 启用可编辑单元格样式。
         */
        this.enableEditCellStyle = false;
        /**
         * 进入编辑状态时选是否选中文本；默认为 false
         * 仅文本框支持此特性
         */
        this.selectOnEditing = false;
        /**
         * 编辑器高度
         */
        this.editorHeight = 30;
        /**
         * 启用远端排序
         */
        this.remoteSort = false;
        this.hoverRowCls = 'f-datagrid-row-hover';
        /**
         * 允许拖拽列顺序
         */
        this.enableDragColumn = false;
        /**
         * 行分组面板高度，默认 50PX
         */
        this.rowGroupPanelHeight = 50;
        /**
         * 启用分组行
         */
        this.groupRows = false;
        /**
         * 启用行分组合计行
         */
        this.groupFooter = false;
        /**
         * 分组行是否展开，默认为 展开
         */
        this.expandGroupRows = true;
        /**
         * 合计数据显示位置
         * inGroupRow: 与分组在同一行，分别相关合计字段对齐
         * groupFooterRow: 在分组数据最后增加一行
         * 默认为 groupFooterRow
         */
        this.groupSummaryPosition = 'groupFooterRow';
        /**
         * 分组信息合并列数
         * 默认为 1
         */
        this.groupCellColSpan = 1;
        /**
         * 分组字段名称, 多字段分组以英文逗号分隔
         */
        this._groupField = '';
        this.groupFields$ = new BehaviorSubject([]);
        /**
         * 显示分组列
         */
        this.showGroupColumn = true;
        /**
         * 显示分组列面板。默认为 false
         */
        this._showRowGroupPanel = false;
        /**
         * 双击表头适应内容宽度
         */
        this.AutoColumnWidthUseDblclick = true;
        /**
         * 使用内部过滤器; 默认为 false
         */
        this.useDefaultFilter = false;
        /**
         * 过滤图标与排序图标合并，此属性与 enableFilterRow 互斥
         */
        this.enableSmartFilter = false;
        /**
         * 显示过滤行
         */
        this.enableFilterRow = false;
        /**
         * 服务器端过滤
         */
        this.remoteFilter = false;
        /**
         * 启用过滤条件显示条
         */
        this.showFilterBar = false;
        /**
         * 过滤条件汇总条高度，默认 32px
         */
        this.filterBarHeight = 32;
        this.filterRowHeight = 40;
        this.conditions = {};
        this.selectValue = null;
        this.checkValues = [];
        this.selectValues = [];
        /**
         * 合并单元格；先支持纵向合并
         */
        this.mergeCell = false;
        this.mergeFields = [];
        /**
         * 合并单元格数据启用客户端排序
         */
        this.enableClientSortForMergeCell = false;
        /**
         * 使用高级控制面板(列设置)
         */
        this.useControlPanel = false;
        /**
         * 启用简洁控制面板模式。默认为 false
         */
        this.enableSimpleMode = false;
        /**
         * 点击列设置图标，默认打开的控制面板
         */
        this.controlPanelMode = 'advanced';
        /**
         * 启用列设置方案
         */
        this.enableScheme = false;
        /**
         * 系统预制方案名称
         */
        this.defaultSchemeName = '系统预制';
        /**
         * 多表头启用列设置; 默认 false
         */
        this.enableSetMultiHeaders = false;
        /**
         * 允许运行时列设置中可设置的最大表头数（包含数据列）；默认为 3层
         */
        this.maxMultiHeaders = 3;
        /**
         * 列设置方案变化后，弹出方案变更提示，默认为false,修改保存到当前方案中
         */
        this.showConfirmWhenSchemeChanged = false;
        /**
         * 阻止click 事件冒泡
         */
        this.stopPropagation = true;
        /**
         * (202105 弃用)
         * 点击单元格进行编辑状态时，关闭其他Grid的编辑器。默认 false，
         * 多个列表存时，仅有一个列表中有编辑状态，其他列表结束编辑
         */
        this.closeOtherGridEditor = false;
        /**
         * 当数据源为空时，清空已选记录, 默认 true
         */
        this.clearSelectionsWhenDataIsEmpty = true;
        /**
         * 启用右键菜单，默认为 false
         */
        this.enableContextMenu = false;
        /**
         * 右键菜单数据
         */
        this.contextMenus = null;
        this.selectValueChange = new EventEmitter();
        this.checkValuesChange = new EventEmitter();
        this.selectValuesChange = new EventEmitter();
        this.beginEdit = new EventEmitter();
        this.endEdit = new EventEmitter();
        this.cancelEdited = new EventEmitter();
        this.scrollY = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.emptyData = new EventEmitter();
        this.filterChanged = new EventEmitter();
        /**
         * 启用选中单元格高亮显示
         */
        this.enableHighlightCell = false;
        /**
         * 选中的数据始终从数据源中获取. 默认为 false
         */
        this.checkedRowsDataFromSource = false;
        /**
         * 当前单元格为只读时，使用tab 键跳到下个单元格时，是否允许进入编辑状态，默认为 false;
         * 默认情况下，当前单元格只读，按TAB跳到下个CELL 时，选中CELL ，回车进入编辑。
         * 开启后，下个单元格自动进入编辑状态。
         */
        this.editcellWhenTabKeydwon = false;
        /**
         * 单元格点击前事件
         */
        this.beforeClickCell = new EventEmitter();
        this.dblclickRow = new EventEmitter();
        this.selectChanged = new EventEmitter();
        this.unSelect = new EventEmitter();
        this.selectAll = new EventEmitter();
        this.unSelectAll = new EventEmitter();
        /**
         * 异步请求虚拟加载
         */
        this.scrollYLoad = new EventEmitter();
        this.checked = new EventEmitter();
        this.unChecked = new EventEmitter();
        this.checkAll = new EventEmitter();
        this.unCheckAll = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.columnSorted = new EventEmitter();
        this.rowClick = new EventEmitter();
        this.rowAppended = new EventEmitter();
        this.rowDeleted = new EventEmitter();
        this.rowUpdated = new EventEmitter();
        this.dataChange = new EventEmitter();
        /**
         * 最后一行的最后单元格回车处理事件
         */
        this.lastCellEnterHandler = new EventEmitter();
        /**
         * 分组字段变化后
         */
        this.groupFieldChange = new EventEmitter();
        /**
         * 拖动列改变列显示位置后触发
         */
        this.columnMoved = new EventEmitter();
        /**
         * 单元格点击事件
         */
        this.cellClick = new EventEmitter();
        this.resized = new EventEmitter();
        this._loading = false;
        this._selectedRow = null;
        this.ds = {
            index: 0,
            rows: [],
            top: 0,
            bottom: 0,
            scrolling: false // 是否由滚动条触发
        };
        this.pagerOpts = {};
        this.editors = {};
        this.validators = [];
        this.footerWidth = 0;
        this.clickDelay = 150;
        this.resizeColumnInfo = {
            proxyLineEdge: 0,
            startWidth: 0,
            startX: 0,
            left: 0
        };
        this.ro = null;
        this.subscriptions = [];
        this.realHeaderHeight = 0;
        // 弹窗中使用时，窗口点击事件处理
        this.modalClickEvent = null;
        this.pending = false;
        this.scrollInstance = null;
        // 合并单元辅助信息
        this.mergeCellInfo = {};
        this.ignoreTarget = ['INPUT', 'SELECT', 'TEXTAREA'];
        this.clientFilterService = null;
        // DatagridSettingsService;
        /**
         * 控制列字段名称: _datagrid-setting-control_
         *
         */
        this.ControlPanelFeild = '_datagrid-setting-control_';
        this._isResized = false;
        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };
        // 客户端过滤时，是否过滤行发生变化
        this.clientFilterChanged = false;
        // style's ID
        this.styleSheetId = '';
        this.groupRowPanelPlaceholder = '';
        this.commonUtils = null;
        this.smartFilterService = null;
        this.smartFilterResult = { controlData: [], conditions: [] };
        this.smartFilterBarHeight = 32;
        this._active_datagrid_cls = 'datagrid-active';
        this._blured_datagrid_cls = 'datagrid-blurred';
        // 自定义grid样式，列表初始后，会添加一个自定义名称的样式
        this._custom_datagrid_cls = 'datagrid';
        // 焦点行索引，每次行点击后更新
        this.focusRowIndex = -1;
        this.documentBodyMouseDown = null;
        this.farrisInstances = null;
        this.currentPagerData = [];
        this.resizeTimer = null;
        this.debugSer = null;
        this.DATA_CHANGED_TIMER = null;
        /**
         * 当bodyclick 时，是否退出行编辑状态，默认为 false
         */
        this.exitRowEditingWhenBodyClick = false;
        this.formValidations = null;
        this.isFF = false;
        this._footerRowHeight = this.footerHeight;
        this.trackByRows = (/**
         * @param {?} index
         * @param {?} row
         * @return {?}
         */
        (index, row) => {
            if (row) {
                return row[this.idField] || index;
            }
            return index;
        });
        this.onDocumentMouseDown = (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            /** @type {?} */
            const dgrid = event.target.closest('.f-datagrid');
            if (this.pending) {
                return false;
            }
            if (!dgrid) {
                this.activeDataGrid(false);
            }
            else {
                if (dgrid.id === this.id) {
                    if (this.isEditing() && (this.exitRowEditingWhenBodyClick || this.editMode == 'cell')) {
                        this.endEditing();
                    }
                    return;
                }
            }
            if (Utils.hasDialogOpen()) {
                /** @type {?} */
                const indlg = this.inDialog();
                /** @type {?} */
                const currentTargetInDialog = event.target.closest('.modal-body');
                if (indlg && currentTargetInDialog) {
                    if (indlg != currentTargetInDialog) {
                        return;
                    }
                }
                else {
                    return;
                }
            }
            if (this.currentCell) {
                if (!this.currentCell.cellElement) {
                    return;
                }
                if (this.currentCell.isEditing) {
                    /** @type {?} */
                    const zoneClick = event.target['__zone_symbol__clickfalse'];
                    /** @type {?} */
                    const isBeBtn = event.target.closest('.bedesigner-toolbar');
                    /** @type {?} */
                    const isOldBeBtn = event.target.className.indexOf('beEleGridButton') > -1;
                    /** @type {?} */
                    const disableClickEvent = zoneClick && zoneClick.length && (event.target.closest('.f-section-in-mainsubcard') || isOldBeBtn || isBeBtn || event.target.closest('.datagrid-toolbars'));
                    if (disableClickEvent && !dgrid) {
                        event.target.style.pointerEvents = 'none';
                        event.stopPropagation();
                    }
                    /** @type {?} */
                    const _timer = disableClickEvent ? ((isBeBtn || isOldBeBtn) ? 50 : 200) : 0;
                    /** @type {?} */
                    const stopEditingRowIndex = this.currentCell.rowIndex;
                    this.currentCell.cellElement.closeEdit().pipe(debounceTime(_timer)).subscribe((/**
                     * @param {?} f
                     * @return {?}
                     */
                    f => {
                        if (this.currentCell && stopEditingRowIndex !== this.currentCell.rowIndex) {
                            return;
                        }
                        if (f) {
                            if (this.currentCell && this.currentCell.cellElement) {
                                DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
                                DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
                            }
                            this.dfs.cancelSelectCell();
                            this.unbindDocumentEditListener();
                            this.currentCell = null;
                            if (disableClickEvent) {
                                zoneClick.forEach((/**
                                 * @param {?} n
                                 * @return {?}
                                 */
                                n => {
                                    n.callback(event);
                                }));
                                event.target.style.pointerEvents = 'auto';
                                if (isBeBtn || isOldBeBtn) {
                                    this.app.tick();
                                }
                            }
                        }
                    }));
                }
            }
            else {
                if (this.isEditing()) {
                    if (this.editMode == 'cell' || this.exitRowEditingWhenBodyClick) {
                        this.endEditing();
                    }
                }
            }
        });
        this.styleSheetId = 'DATAGRID-' + Utils.uuid();
        this.localeService = this.inject.get(LocaleService);
        this.restService = this.inject.get(DATAGRID_REST_SERVICEE, null);
        this.colFormatSer = this.inject.get(ColumnFormatService);
        this.commonUtils = this.inject.get(CommonUtils, null);
        this.clientFilterService = new DatagridFilterService(dfs, this.localeService, inject);
        this.farrisInstances = this.inject.get(FarrisComponentInstanceService, null);
        this.debugSer = this.inject.get(DebugService, null);
        /** @type {?} */
        let perfixStr = '';
        if (WEBAPI_PREFIX_TOKEN) {
            perfixStr = this.inject.get(WEBAPI_PREFIX_TOKEN, '');
        }
        if (!this.debugSer) {
            this.debugSer = new DebugService();
        }
        if (this.debugSer.useDebugMode) {
            this.debugSer.useDebugMode();
        }
        this.smartFilterService = this.inject.get(DatagridSmartFilterService, null);
        this.idService = this.inject.get(IdService, null);
        this.dfs.localId = this.localeService.localeId;
        this.settingService = this.inject.get(GRID_SETTINGS_SERVICE, null);
        if (this.settingService) {
            this.settingService.setUriPerfixStr(perfixStr);
            /** @type {?} */
            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);
            this.settingService.httpRestService = settingsHttp;
        }
        // ilink 367849
        /** @type {?} */
        const dataSubscription = this.dfs.data$.pipe(switchMap((/**
         * @param {?} ds
         * @return {?}
         */
        (ds) => {
            if (this.beforeLoad) {
                return this.beforeLoad({ data: ds.rows, instance: this }).pipe(map((/**
                 * @param {?} e
                 * @return {?}
                 */
                (e) => {
                    if (e && e.data) {
                        ds.rows = e.data;
                    }
                    return ds;
                })));
            }
            return of(ds);
        }))).subscribe((/**
         * @param {?} dataSource
         * @return {?}
         */
        (dataSource) => {
            this.cleanDom();
            /** @type {?} */
            const ds = Object.assign({}, dataSource);
            if (this.conditions && Object.keys(this.conditions).length && !this.remoteFilter && this.useDefaultFilter) {
                ds.rows = this.clientFilterService.executeFilter(ds.rows, this.conditions);
            }
            this.ds = ds;
            if (this.ds.rows && this.ds.rows.length) {
                this.data = this.dfs.getData();
                if (this.mergeCell && this.mergeFields && this.mergeFields.length) {
                    this.mergeCellInfo = this.dgs.getMergeCellInfo3(this.ds.rows, [...this.mergeFields]);
                }
                this.setPagerTotal();
                this.loadSuccess.emit(this.ds.rows);
            }
            else {
                this.data = [];
                this.currentCell = null;
                if (this.clearSelectionsWhenDataIsEmpty) {
                    this.clearAll();
                }
                this.emptyData.emit();
            }
            if (!this.ds.scrolling) {
                this.updateFooterData();
            }
            // 性能优化
            this.cd.detectChanges();
            if (this.DATA_CHANGED_TIMER) {
                clearTimeout(this.DATA_CHANGED_TIMER);
            }
            this.DATA_CHANGED_TIMER = setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.autoHeight && this.maxHeight) {
                    if (this.maxHeight < 55) {
                        this.maxHeight = 60;
                    }
                    /** @type {?} */
                    const gridContainerEl = this.el.nativeElement.parentElement;
                    if (gridContainerEl.nodeName !== 'DIV') {
                        this.writeConsole('Datagrid父容器必须为DIV。');
                    }
                    else {
                        // gridContainerEl.style.height = 'unset';
                        // gridContainerEl.style.maxHeight = this.maxHeight + 'px';
                        // gridContainerEl.style.minHeight = `${this.emptyDataHeight + this.realHeaderHeight + 
                        //     (this.showRowGroupPanel ? this.rowGroupPanelHeight: 0) +
                        //     (this.pagination ? this.pagerHeight : 0)}px`;
                    }
                }
                if (this.useBlankWhenDataIsEmpty) {
                    this.calculateGridSize(this.fit);
                }
                this.dgs.dataloaded.emit();
                // TFS 577078
                this.updateAllCheckboxStatus();
                // if (!this.nowrap && this.data && this.data.length) {
                //     this.setRowHeight(false);
                //     this.dgs.cellContentWrapChanged.emit();
                // }
            }), 100);
        }));
        this.subscriptions.push(dataSubscription);
        /** @type {?} */
        const columnGroupSubscription = this.dfs.columnGroup$.pipe(debounceTime(60)).subscribe((/**
         * @param {?} cg
         * @return {?}
         */
        cg => {
            if (cg) {
                this.colGroup = cg;
                this.footerWidth = cg.totalWidth;
                this.cd.detectChanges();
            }
        }));
        this.subscriptions.push(columnGroupSubscription);
        this.subscriptions.push(this.dfs.gridSize$.subscribe((/**
         * @param {?} cg
         * @return {?}
         */
        (cg) => {
            if (cg && cg.columnsGroup) {
                this.colGroup = cg.columnsGroup;
                if (!this.nowrap) {
                    this.setFooterHeight();
                }
                this.cd.detectChanges();
            }
        })));
        this.initEditorAndValidator();
        /** @type {?} */
        const currentCellSubscription = this.dfs.currentCell$.subscribe((/**
         * @param {?} cell
         * @return {?}
         */
        (cell) => {
            this.currentCell = cell;
            if (cell && cell.cellRef) {
                cell.cellRef.isEditing = cell.isEditing;
            }
            this.unbindMoveSelectRowEvent();
            this.bindDocumentEditListener();
        }));
        this.dfs.selectRow$.subscribe((/**
         * @param {?} sr
         * @return {?}
         */
        (sr) => {
            if (!this.currentCell) {
                this.bindDocumentMoveSelectRowEvent();
            }
            this.selectedRow = sr;
        }));
        this.subscriptions.push(currentCellSubscription);
        DatagridColumnsHelper.gridInstance = this;
        /** @type {?} */
        const filterChangedSubscription = this.dgs.onFilterChanged.pipe(debounceTime(200)).subscribe((/**
         * @param {?} conditions
         * @return {?}
         */
        (conditions) => {
            // 更新缓存过滤条件
            this.conditions = conditions;
            this.clientFilterChanged = true;
            this.filterData(this.conditions);
        }));
        this.subscriptions.push(filterChangedSubscription);
        // this.initPaginationOptions();
        /** @type {?} */
        const footerDataSubscription = this.dgs.refreshFooterData.subscribe((/**
         * @return {?}
         */
        () => {
            this.updateFooterData();
            // this.cd.detectChanges();
        }));
        this.subscriptions.push(footerDataSubscription);
        this.dgs.commonUtils = this.commonUtils;
        this.dgs.focusRowChanged.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (e) {
                this.focusRowIndex = e.rowIndex;
            }
        }));
    }
    /**
     * @return {?}
     */
    get autoHeightCls() {
        return this.autoHeight;
    }
    /**
     * @return {?}
     */
    get sizeType() {
        return this._sizeType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set sizeType(val) {
        this._sizeType = val;
    }
    /**
     * @return {?}
     */
    get fit() {
        return this._fit;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set fit(val) {
        this._fit = val;
        this.hostCls = val;
    }
    /**
     * @return {?}
     */
    get fitColumns() {
        return this._fitColumns;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set fitColumns(val) {
        if (this._fitColumns !== val) {
            this._fitColumns = val;
            if (val) {
                this.setFitColumns(val);
            }
            else {
                this.dfs.fitColumns(false);
                this.dfs.initColumns(false, true);
                this.restituteColumnsSize();
            }
        }
    }
    /**
     * @return {?}
     */
    get autoFitColumns() {
        return this._autoFitColumns;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set autoFitColumns(val) {
        this._autoFitColumns = val;
        this.dfs.updateProperty('autoFitColumns', val);
    }
    /**
     * 锁定分页条，锁定后页码点击无效
     * @return {?}
     */
    get lockPagination() {
        return this._lockPagination;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set lockPagination(val) {
        this._lockPagination = val;
        if (this.dgPager) {
            this.dgPager[val ? 'lock' : 'unlock']();
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set pagination(val) {
        if (this.__pagination !== val) {
            this.__pagination = val;
            this.dfs.updateProperty('pagination', val);
            this.dgs.showGridHeader.emit();
        }
    }
    /**
     * @return {?}
     */
    get pagination() {
        return this.__pagination;
    }
    /**
     * @return {?}
     */
    get total() {
        return this._total;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set total(val) {
        this._total = val;
        this.pagerOpts.totalItems = val;
        if (!this.pagination) {
            this.pagerOpts.itemsPerPage = val;
        }
        this.dfs.setTotal(val);
    }
    /**
     * @return {?}
     */
    get footerData() {
        return this._footerData;
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    set footerData(rows) {
        if (rows && rows.subscribe) {
            this._footerData = rows;
        }
        else {
            this._footerData = of(rows || []);
        }
        if (rows) {
            this.setFooterHeight();
        }
        this.cd.detectChanges();
    }
    /**
     * @return {?}
     */
    get columns() {
        return this._columns;
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set columns(values) {
        this._columns = this.correctColumns(values);
        this.dfs.updateProperty('columns', this._columns);
    }
    /**
     * @return {?}
     */
    get fields() {
        return this._fields;
    }
    /**
     * @param {?} cols
     * @return {?}
     */
    set fields(cols) {
        this._fields = cols;
        this.columns = cols;
        if (this.data) {
            this.columnsChanged(false, true);
        }
    }
    /**
     * @return {?}
     */
    get editable() {
        return this._editable;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set editable(v) {
        if (this._editable !== v) {
            this._editable = v;
            this.cd.detectChanges();
            this.dgs.updateEmptyStyle();
        }
    }
    /**
     * @return {?}
     */
    get groupField() {
        return this._groupField;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set groupField(val) {
        this._groupField = val || '';
        if (Array.isArray(this._groupField)) {
            this._groupField = this._groupField.join(',');
        }
        if (this._groupField) {
            this.groupFields$.next(this._groupField.split(','));
        }
        else {
            this.groupFields$.next([]);
        }
        this.dfs.updateProperty('groupField', this._groupField);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set showRowGroupPanel(val) {
        this._showRowGroupPanel = val;
    }
    /**
     * @return {?}
     */
    get showRowGroupPanel() {
        return this.groupRows && this._showRowGroupPanel;
    }
    /**
     * @return {?}
     */
    get loading() {
        return this._loading;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set loading(val) {
        this._loading = val;
        if (!this.cd['destroyed']) {
            this.cd.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    get selections() {
        return this.dfs.getSelections();
    }
    /**
     * @return {?}
     */
    get checkeds() {
        return this.checkedRows;
    }
    /**
     * @return {?}
     */
    get checkedRows() {
        /** @type {?} */
        const chkeds = this.dfs.getCheckeds();
        if (this.enableMorePageSelect) {
            if (chkeds && chkeds.length) {
                if (!this.checkedRowsDataFromSource) {
                    return [...chkeds];
                }
                // 从数据源中获取最新数据
                return chkeds.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    /** @type {?} */
                    const d = this.dfs.findRow(n.id);
                    if (d) {
                        n.data = d.data;
                    }
                    return n;
                }));
            }
        }
        else {
            if (this.data && this.data.length) {
                /** @type {?} */
                const temp = this.data.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n[this.idField]));
                if (!this.checkedRowsDataFromSource) {
                    return chkeds.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => temp.includes(n.id)));
                }
                // 从数据源中获取最新数据
                return chkeds.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => temp.includes(n.id))).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    /** @type {?} */
                    const d = this.dfs.findRow(n.id);
                    if (d) {
                        n.data = d.data;
                    }
                    return n;
                }));
            }
        }
        return [];
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    set checkedRows(rows) {
        if (rows && rows.length) {
            rows = rows.map((/**
             * @param {?} r
             * @return {?}
             */
            r => {
                if (r.data) {
                    return r;
                }
                return {
                    id: r[this.idField],
                    data: r
                };
            }));
        }
        this.dfs.updateProperty('checkedRows', rows || []);
        this.initSelectOrChecked();
        this.cd.markForCheck();
    }
    /**
     * @return {?}
     */
    get selectedRow() {
        return this._selectedRow;
    }
    /**
     * @param {?} row
     * @return {?}
     */
    set selectedRow(row) {
        if (row) {
            if (this.selectValue != row.id) {
                this._selectedRow = row;
                this.selectValue = row.id;
                this.selectValueChange.emit(row.id);
                this.selectChanged.emit(row);
            }
        }
        else {
            this.unSelect.emit(this._selectedRow);
            this.selectValue = null;
            this.selectValueChange.emit('');
            this._selectedRow = null;
        }
        // this.cd.detectChanges();
    }
    /**
     * @param {?} $data
     * @return {?}
     */
    setCurrentPagerData($data) {
        this.currentPagerData = $data;
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            if (this.debugSer[type]) {
                this.debugSer[type](msg);
            }
            else {
                console[type](msg);
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    updateFooterData() {
        if ((this.showFooter || this.pagerContentTemplate) && this.footerDataFrom === 'client') {
            /** @type {?} */
            const fdata = this.dfs.getFooterData(this.data);
            if (JSON.stringify(this._footerData['value']) !== JSON.stringify(fdata)) {
                this.footerData = of(fdata);
            }
        }
    }
    //#region Ng Event
    /**
     * @return {?}
     */
    ngDoCheck() {
        // if (!this.checkValues) {
        //     this.checkValues = [];
        // }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.sms = new SelectionModeService(this);
        this.checkFilterStyle();
        if (this.useThemes) {
            this._checkSize();
        }
        this.checkOptions();
        this.groupRowPanelPlaceholder = this.localeService.getValue('datagrid.groupRow.tips');
        if (this.smartFilterService) {
            if (this.enableSmartFilter && this.showFilterBar) {
                if (this.smartFilterResult && this.smartFilterResult.controlData && this.smartFilterResult.controlData.length) {
                    this.filterBarHeight = this.smartFilterBarHeight;
                }
                else {
                    this.filterBarHeight = 0;
                }
            }
            this.smartFilterService.filterChanged.subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!this.smartFilterResult && !e) {
                    return;
                }
                if (JSON.stringify(this.smartFilterResult) !== JSON.stringify(e)) {
                    this.smartFilterResult = e;
                    this.clientFilterChanged = true;
                    this.filterData(e.conditions);
                    if (!this.smartFilterResult || (this.smartFilterResult.controlData && !this.smartFilterResult.controlData.length)) {
                        this.onFilterBarResize(0);
                    }
                    else {
                        if (!this.filterBarHeight) {
                            this.onFilterBarResize(this.smartFilterBarHeight);
                        }
                    }
                }
            }));
        }
        this.isFF = this.commonUtils.getBrowserType().ff;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 创建自定义style 容器
        // 
        this.setHeaderHeight();
        this.setPagerHeight();
        // this.setRowHeight();
        this.initBeforeEvents();
        if (this.fit) {
            this.setGridNewSizeWhenFit();
        }
        this.initState();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
        if (!this.data || !this.data.length) {
            this.fetchData(1, this.pageSize).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                if (!res) {
                    return;
                }
                this.total = res.total;
                if (res.footer) {
                    this.footerData = res.footer;
                }
                this.loadData(res.items);
            }));
        }
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this.render2.addClass(this.dgContainer.nativeElement, this._custom_datagrid_cls);
            this.ro = new ResizeObserver((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                /** @type {?} */
                const target = (/** @type {?} */ (e[0].target));
                if (target.style.display === 'none') {
                    return;
                }
                /** @type {?} */
                const _w = e[0].contentRect.width;
                if (!_w) {
                    return;
                }
                /** @type {?} */
                const _h = e[0].contentRect.height;
                /** @type {?} */
                const _floowW = Math.floor(_w);
                /** @type {?} */
                const _floorH = Math.floor(_h);
                /** @type {?} */
                const _roundW = Math.round(_w);
                /** @type {?} */
                const _roundH = Math.round(_h);
                /** @type {?} */
                const _ceilW = Math.ceil(_w);
                /** @type {?} */
                const _ceilH = Math.ceil(_h);
                if ((this.width === _floowW || this.width === _roundW || this.width === _ceilW) && (this.height === _floorH || this.height === _roundH || this.height === _ceilH)) {
                    this.dgs.restoreScrollbarPosition();
                    return;
                }
                if (this.resizeTimer) {
                    clearTimeout(this.resizeTimer);
                }
                this.resizeTimer = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.calculateGridSize(this.fit);
                    this.resized.emit();
                }), 100);
            }));
            this.ro.observe(this.el.nativeElement.parentElement);
            document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);
            document.body.addEventListener('mousedown', this.documentBodyMouseDown = (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!this.isEditing()) {
                    return;
                }
                /** @type {?} */
                const target = (/** @type {?} */ (e.target));
                if ((target.closest('td.f-datagrid-cell') && !target.closest('.f-datagrid-footer-row')) ||
                    target.closest('.date-overlay-container') ||
                    target.closest('.time-picker-overlay') ||
                    target.closest('.language-textbox-panel') ||
                    target.closest('.farris-notify') ||
                    target.closest('.comboPanel')
                // || target.closest('.f-multi-select-date')  //日期多选
                ) {
                    return;
                }
                this.onDocumentMouseDown(e);
            }), true);
        }));
        if (this.showFooter) {
            if (this.footerTemplate) {
                /** @type {?} */
                const footerDom = this.el.nativeElement.querySelector('.f-datagrid-footer');
                if (footerDom) {
                    this.footerHeight = this.el.nativeElement.querySelector('.f-datagrid-footer').offsetHeight;
                }
            }
        }
        if (this.fit) {
            if (this.el.nativeElement.parentElement) {
                this.el.nativeElement.parentElement.style.position = 'relative';
            }
            this.calculateGridSize(this.fit);
        }
        // 检查是否启用仿windows资源管理器中的多选模式
        if (this.selectionMode && this.selectionMode === 'default' && this.multiSelect) {
            this.sms.enableWindowsSelectionMode();
        }
        this.setCellStyle();
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        if (this.dgColumns && this.dgColumns.length) {
            this.columns = this.dgColumns.map((/**
             * @param {?} dgc
             * @return {?}
             */
            dgc => {
                return Object.assign({}, dgc);
            }));
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.dfs.loadData(changes.data.currentValue);
            this.dgs.dataSourceChanged();
        }
        if (changes.showAllCheckbox !== undefined && !changes.showAllCheckbox.isFirstChange()) {
            if (changes.showAllCheckbox.currentValue != changes.showAllCheckbox.previousValue) {
                this.columnsChanged(false);
            }
        }
        if (changes.showCheckbox !== undefined && !changes.showCheckbox.isFirstChange()) {
            this.dfs.showCheckbox(changes.showCheckbox.currentValue);
        }
        if (changes.showLineNumber !== undefined && !changes.showLineNumber.isFirstChange()) {
            this.dfs.showLineNumber(changes.showLineNumber.currentValue);
        }
        if (changes.multiSelect !== undefined && !changes.multiSelect.isFirstChange()) {
            this.dfs.setMultiSelect(changes.multiSelect.currentValue);
            this.columnsChanged();
        }
        if (changes.checkOnSelect !== undefined && !changes.checkOnSelect.isFirstChange()) {
            this.dfs.setCheckOnSelect(changes.checkOnSelect.currentValue);
        }
        if (changes.selectOnCheck !== undefined && !changes.selectOnCheck.isFirstChange()) {
            this.dfs.setSelectOnCheck(changes.selectOnCheck.currentValue);
        }
        if (changes.onlySelectSelf !== undefined && !changes.onlySelectSelf.isFirstChange()) {
            this.dfs.updateProperty('onlySelectSelf', changes.onlySelectSelf.currentValue);
        }
        if (changes.keepSelect !== undefined && !changes.keepSelect.isFirstChange()) {
            this.dfs.updateProperty('keepSelect', changes.keepSelect.currentValue);
        }
        if (changes.headerWrap !== undefined && !changes.headerWrap.isFirstChange()) {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.setHeaderHeight();
                this.cd.detectChanges();
                this.dfs.columnResizeEnd();
            }));
        }
        if (changes.nowrap !== undefined && !changes.nowrap.isFirstChange()) {
            this.checkNowrap();
            this.setRowHeight(false);
            this.dgs.cellContentWrapChanged.emit();
            this.dfs.updateProperty('nowrap', changes.nowrap.currentValue);
        }
        if (changes.multiSort !== undefined && !changes.multiSort.isFirstChange()) {
            this.dfs.updateProperty('multiSort', changes.multiSort.currentValue);
        }
        if (changes.editable !== undefined && !changes.editable.isFirstChange()) {
            this.dfs.updateProperty('editable', changes.editable.currentValue);
            if (!changes.editable.currentValue) {
                this.endCellEdit();
            }
            this.isSingleClick = null;
            this.cd.detectChanges();
        }
        if (changes.showHeader !== undefined && !changes.showHeader.isFirstChange()) {
            this.dfs.updateProperty('showHeader', changes.showHeader.currentValue);
            this.headerHeightChange();
            this.cd.detectChanges();
        }
        if (changes.showFilterBar !== undefined && !changes.showFilterBar.isFirstChange()) {
            this.dfs.updateProperty('showFilterBar', changes.showFilterBar.currentValue);
            this.dgs.showGridHeader.emit(this.realHeaderHeight);
            // this.dgs.smartFilterBarExpand.emit();
            /** @type {?} */
            let fh = 0;
            if (this.conditions && this.conditions.length) {
                fh = 32;
            }
            this.onFilterBarResize(fh);
        }
        if (changes.showFooter !== undefined && !changes.showFooter.isFirstChange()) {
            this.dfs.updateProperty('showFooter', changes.showFooter.currentValue);
            // this.cd.detectChanges();
            this.calculateGridSize(this.fit);
        }
        if (changes.pagerOnServer !== undefined && !changes.pagerOnServer.isFirstChange()) {
            this.dfs.updateProperty('pagerOnServer', changes.pagerOnServer.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                remote: this.pagerOnServer
            });
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.dfs.updateProperty('pageIndex', changes.pageIndex.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.dfs.updateProperty('pageSize', changes.pageSize.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.dfs.updateProperty('pageList', changes.pageList.currentValue);
            this.pagerOpts = Object.assign(this.pagerOpts, {
                pageList: this.pageList
            });
        }
        if (changes.columns !== undefined && !changes.columns.isFirstChange()) {
            this.columnsChanged();
        }
        if (changes.sizeType !== undefined && !changes.sizeType.isFirstChange()) {
            this._sizeType = changes.sizeType.currentValue;
            this.setRowHeight(true);
            // this.setHeaderHeight();
            this.dfs.updateProperty('rowHeight', this.rowHeight);
            this.setFooterHeight();
            this.refresh();
            this.dgs.onRowHeightChange(this.rowHeight);
        }
        if (changes.rowHeight && !changes.rowHeight.isFirstChange()) {
            this.setRowHeight(false);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectRow(this.selectValue, false);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            /** @type {?} */
            const checkIds = this.dfs.differenceBy(changes.checkValues.currentValue || [], changes.checkValues.previousValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            (v) => v));
            if (checkIds && checkIds.length) {
                this.checkRows(checkIds, false);
            }
            /** @type {?} */
            const uncheckIds = this.dfs.differenceBy(changes.checkValues.previousValue || [], changes.checkValues.currentValue || [], (/**
             * @param {?} v
             * @return {?}
             */
            (v) => v));
            if (uncheckIds && uncheckIds.length) {
                this.unCheckRows(uncheckIds, false);
            }
            this.zone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.checkValues = this.checkeds.map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    r => r.id));
                    this.checkValuesChange.emit(this.checkValues);
                    this.checkedChange.emit(this.checkeds);
                    this.updateAllCheckboxStatus();
                }), 10);
            }));
        }
        if (changes.showGroupColumn && !changes.showGroupColumn.isFirstChange()) {
            this.toggleVisibleColumn(this.groupField.split(','), changes.showGroupColumn.currentValue);
            this.columnsChanged();
        }
        if (changes.autoFitColumns && !changes.autoFitColumns.isFirstChange()) {
            this.dfs.updateProperty('autoFitColumns', changes.autoFitColumns.currentValue);
        }
        // if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
        //     this.fitColumns = changes.fitColumns.currentValue;
        // }
        if (changes.groupRows && !changes.groupRows.isFirstChange()) {
            this.dfs.updateProperty('groupRows', changes.groupRows.currentValue);
            this.refresh();
        }
        if (changes.mergeCell && !changes.mergeCell.isFirstChange()) {
            this.refresh();
        }
        if (changes.mergeFields && !changes.mergeFields.isFirstChange()) {
            this.refresh();
        }
        if (changes.enableFilterRow && !changes.enableFilterRow.isFirstChange()) {
            this.dfs.updateProperty('enableFilterRow', changes.enableFilterRow.currentValue);
            if (this.showHeader) {
                this.setHeaderHeight();
                this.filterBarHeight = 32;
                this.dgs.toggleFilterRow.emit(this.enableFilterRow);
                this.dgs.showGridHeader.emit(this.realHeaderHeight);
                this.cd.detectChanges();
            }
        }
        if (changes.enableSmartFilter && !changes.enableSmartFilter.isFirstChange()) {
            this.dfs.updateProperty('enableSmartFilter', changes.enableSmartFilter.currentValue);
        }
        if (changes.enableDragColumn && !changes.enableDragColumn.isFirstChange()) {
            this.checkDragColumns();
        }
        if (changes.showRowGroupPanel && !changes.showRowGroupPanel.isFirstChange()) {
            this.dgs.smartFilterBarExpand.emit();
            this.dgs.showGridHeader.emit(this.realHeaderHeight);
        }
        if (changes.selectionMode && !changes.selectionMode.isFirstChange()) {
            this.sms.toggleMode();
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkFilterStyle() {
        // 过滤行与智能过滤 同时启用时，将过滤行禁用
        if (this.enableFilterRow && this.enableSmartFilter) {
            this.enableFilterRow = false;
        }
    }
    /**
     * @private
     * @return {?}
     */
    _checkSize() {
        /** @type {?} */
        const themesKey = localStorage.getItem('gsp_rtf_themSKey');
        /** @type {?} */
        let st = 'sm';
        switch (themesKey) {
            case 'default':
                st = 'sm';
                break;
            case 'loose':
                st = 'md';
                break;
        }
        this.sizeType = st;
    }
    /**
     * @private
     * @return {?}
     */
    checkDragColumns() {
        if (this.isMultiHeader()) {
            this.enableDragColumn = false;
            // this.cd.detectChanges();
        }
    }
    /**
     * @private
     * @return {?}
     */
    enableSettings() {
        return this.useControlPanel && (!this.isMultiHeader() || (this.isMultiHeader() && this.enableSetMultiHeaders));
    }
    /**
     * @private
     * @return {?}
     */
    checkOptions() {
        this.gridSize = { width: this.width + 'px', height: this.height + 'px' };
        if (!this.id) {
            this.id = 'FarrisDataGrid' + Utils.uuid().replace(/-/g, '').substr(0, 10);
            if (this.useControlPanel) {
                this.useControlPanel = false;
                this.writeConsole('启用列配置属性，未设置ID，此功能将禁用。');
            }
            this._custom_datagrid_cls = this.id;
        }
        else {
            this.styleSheetId = this.id + '_' + Utils.uuid().replace(/-/g, '').substr(0, 10);
            this._custom_datagrid_cls = this.styleSheetId;
        }
        if (this.settingService && this.useControlPanel) {
            this.settingService.registerGridInstance(this);
        }
        this.dgs.createStyleElement(this.styleSheetId);
        if (!this.idField) {
            throw new Error('The Datagrid\'s idField can\'t be Null. ');
        }
        this.checkNowrap();
        this.checkSortInfo();
        this.checkMergeCell();
        this.setCheckboxBehavior();
        this.initPaginationOptions();
        if (!this.columns) {
            this.columns = this.fields;
        }
        this.checkGroupHeaderColumns();
        // TFS: 356956
        this.checkGroupRowSetting();
        this.checkColumnsType();
        this.checkDragColumns();
        /** @type {?} */
        const _defaultSetting = (/**
         * @return {?}
         */
        () => {
            this._flatColumns();
            this.setRowHeight();
        });
        this.dfs.setinitialOptions({
            columns: this.columns,
            groupField: this.groupField,
            sortName: this.sortName,
            sortOrder: this.sortOrder,
            expandGroupRows: this.expandGroupRows
        });
        if (!this.isMultiHeader()) {
            this.enableSetMultiHeaders = false;
        }
        // 加载用户个性化设置 --》 列显示与列排序
        if (this.settingService && this.enableSettings()) {
            /** @type {?} */
            const settings$ = this.settingService.getSettings(this.id);
            if (!settings$) {
                _defaultSetting();
                return;
            }
            settings$.subscribe((/**
             * @param {?} sets
             * @return {?}
             */
            (sets) => {
                if (sets) {
                    if (this.enableScheme && this.settingService['schemeService']) {
                        /** @type {?} */
                        const schemalist = this.settingService['schemeService'].getStateValue(this.id, 'list');
                        if (schemalist && schemalist.length) {
                            this.userProfileSetting(sets);
                        }
                    }
                    else {
                        this.userProfileSetting(sets);
                    }
                    this.setRowHeight(false);
                }
                if (this.data && this.data.length) {
                    this.dfs.updateProperty('data', this.data);
                }
                this.columnsChanged(this.groupRows && (this.data && !!this.data.length));
            }), (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                _defaultSetting();
                this.writeConsole(err, 'error');
            }));
        }
        else {
            _defaultSetting();
        }
    }
    /**
     * @return {?}
     */
    refreshSelectedData() {
        if (this.selectedRow && this.selectedRow.id) {
            if (this.data && this.data.length) {
                /** @type {?} */
                const rd = this.data.find((/**
                 * @param {?} d
                 * @return {?}
                 */
                d => d[this.idField] === this.selectedRow.id));
                this.selectedRow.data = rd;
            }
            else {
                this.selectedRow = null;
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.unsubscribes();
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro.disconnect();
        }
        if (this.documentRowKeydownHandler) {
            this.documentRowKeydownHandler();
        }
        this.currentCell = null;
        this.clientFilterService = null;
        this.cleanDom();
        // 移除动态的style
        this.dgs.removeStyleSheet();
        if (this.settingService && this.settingService.destroy) {
            this.settingService.destroy(this.id);
        }
        if (this.sms) {
            this.sms.destroy();
            this.sms = null;
        }
        document.body.removeEventListener('mousedown', this.documentBodyMouseDown, true);
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        this._selectedRow = null;
        this.editors = {};
        DatagridColumnsHelper.gridInstance = null;
        this.unbindMoveSelectRowEvent();
        this.unbindDocumentEditListener();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        if (this.showSelectedList && this.dgPager) {
            this.dgPager.closeSelectedList();
        }
        if (this.pending) {
            return;
        }
        /** @type {?} */
        const target = (/** @type {?} */ (event.target));
        if (target.nodeName === 'TEXTAREA' || target.nodeName === 'INPUT') {
            event.stopPropagation();
            return;
        }
        if (this.currentCell && this.currentCell.editor && this.currentCell.editor._editorClickEvent) {
            event.stopPropagation();
            return;
        }
        /*
        this.endCellEdit(event);
        this.dfs.cancelSelectCell();
        */
        if (this.stopPropagation) {
            event.stopPropagation();
            return;
        }
    }
    /**
     * @private
     * @return {?}
     */
    initPaginationOptions() {
        this.pagerOpts = {
            id: this.id ? this.id + '-pager_' + Utils.uuid() : 'farris-datagrid-pager_' + Utils.uuid(),
            itemsPerPage: this.pagination ? this.pageSize : this.total,
            currentPage: this.pageIndex,
            totalItems: this.total,
            pageList: this.pageList,
            remote: this.pagerOnServer
        };
    }
    /**
     * @private
     * @return {?}
     */
    updatePagerOptions() {
        this.pagerOpts = Object.assign(this.pagerOpts, {
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            totalItems: this.total
        });
    }
    /**
     * @private
     * @return {?}
     */
    setPagerTotal() {
        /** @type {?} */
        const _total = this.data.length;
        if (this.pagination && this.total === 0 && this.virtualized) {
            this.pagerOpts.totalItems = _total;
        }
        else {
            if (!this.pagination) {
                this.pagerOpts.itemsPerPage = _total;
            }
        }
    }
    /**
     * @private
     * @param {?=} rows
     * @return {?}
     */
    setFooterHeight(rows) {
        if (this.showFooter && !this.footerTemplate) {
            rows = rows || this._footerData['value'];
            if (!rows || !rows.length) {
                return;
            }
            if (this.nowrap) {
                this.dgs.removeCssRule(`${this.customStyleKey()} .f-datagrid-footer .f-datagrid-footer-row`);
                this.renderCustomStyle2({ style: { height: `${this._footerRowHeight}px!important` } }, null, 'f-datagrid-footer .f-datagrid-footer-row');
                /** @type {?} */
                const clsName = 'f-datagrid-footer-row .f-datagrid-cell-content,f-datagrid-group-footer .f-datagrid-cell-content,f-datagrid-footer-row .f-datagrid-cell';
                clsName.split(',').forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    this.dgs.removeCssRule(`${this.customStyleKey()} .${n}`);
                }));
                /** @type {?} */
                let fh = this._footerRowHeight - 1;
                clsName.split(',').forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    this.renderCustomStyle2({ style: { height: `${fh}px!important`, "line-height": `${fh}px!important` } }, null, n);
                }));
                this.footerHeight = rows.length * this._footerRowHeight;
            }
            else {
                if (this['_footer_height_timer_']) {
                    clearTimeout(this['_footer_height_timer_']);
                }
                this['_footer_height_timer_'] = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    /** @type {?} */
                    const topFooter = document.querySelector('.f-datagrid-footer-top');
                    /** @type {?} */
                    const bottomFooter = document.querySelector('.f-datagrid-footer-bottom');
                    /** @type {?} */
                    let _footHeight = rows.length * this._footerRowHeight;
                    /** @type {?} */
                    const minFooterRowHeight = `min_footer_row_height_${this._footerRowHeight}`;
                    if (topFooter) {
                        topFooter.querySelectorAll('tr').forEach((/**
                         * @param {?} tr
                         * @return {?}
                         */
                        tr => {
                            this.render2.addClass(tr, minFooterRowHeight);
                        }));
                        this.render2.setStyle(topFooter, 'height', _footHeight + 'px');
                        _footHeight = Math.max(...Array.from(topFooter.querySelectorAll('table')).map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n.offsetHeight)));
                        this.render2.setStyle(topFooter, 'height', _footHeight + 'px');
                    }
                    else {
                        if (bottomFooter) {
                            bottomFooter.querySelectorAll('tr').forEach((/**
                             * @param {?} tr
                             * @return {?}
                             */
                            tr => {
                                this.render2.addClass(tr, minFooterRowHeight);
                            }));
                            this.render2.setStyle(bottomFooter, 'height', _footHeight + 'px');
                            _footHeight = Math.max(...Array.from(bottomFooter.querySelectorAll('table')).map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            n => n.offsetHeight)));
                            this.render2.setStyle(bottomFooter, 'height', _footHeight + 'px');
                        }
                    }
                    if (_footHeight !== this.footerHeight) {
                        this.footerHeight = _footHeight;
                        if (rows.length * this._footerRowHeight > this.footerHeight) {
                            this.footerHeight = rows.length * this._footerRowHeight;
                        }
                        this.dfs.columnResizeEnd();
                    }
                }), 100);
            }
        }
    }
    /**
     * @return {?}
     */
    customStyleKey() {
        return `.${this._custom_datagrid_cls}`;
    }
    /**
     * @private
     * @param {?=} useSizeType
     * @return {?}
     */
    setRowHeight(useSizeType = false) {
        /** @type {?} */
        const _rowHeight = SIZE_TYPE[this._sizeType].row;
        /** @type {?} */
        const _rh = 29;
        if (useSizeType) {
            this.rowHeight = _rowHeight;
            this.filterRowHeight = SIZE_TYPE[this._sizeType].pager;
        }
        else {
            this.rowHeight = _rowHeight > this.rowHeight ? _rowHeight : this.rowHeight;
        }
        /** @type {?} */
        const key1 = `${this.customStyleKey()}.f-datagrid-body-row, ${this.customStyleKey()} .f-datagrid-cell`;
        /** @type {?} */
        const key2 = `${this.customStyleKey()} .f-datagrid-cell-content`;
        this.dgs.removeCssRule(key1);
        this.dgs.removeCssRule(key2);
        if (this.rowHeight !== _rh && this.nowrap) {
            /** @type {?} */
            const rowHeightCSS = [
                `${key1} { height: ${this.rowHeight}px }`,
                `${key2} { height: ${this.rowHeight}px; line-height: ${this.rowHeight}px }`
            ];
            this.dgs.appendCssRules(rowHeightCSS);
        }
    }
    /**
     * @return {?}
     */
    initSelectOrChecked() {
        /** @type {?} */
        const _data = this.dfs.getCurrentPageData();
        if (!this.enableMorePageSelect && this.multiSelect) {
            // this.clearAll();
            if (this.checkeds && this.checkeds.length) {
                this.checkeds.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => {
                    if (!_data.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n[this.idField] == r.id))) {
                        this.unCheckRow(r.id, false);
                    }
                }));
            }
            else {
                this.clearCheckeds();
            }
        }
        if (this.selectValue) {
            if (_data.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n[this.idField] == this.selectValue))) {
                this.selectRow(this.selectValue, false);
                this.refreshSelectedData();
            }
        }
        if (this.multiSelect) {
            if (this.checkValues && this.checkValues.length) {
                /** @type {?} */
                const chkids = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                /** @type {?} */
                const diffIds = this.dfs.difference(chkids, this.checkValues);
                if (diffIds.length) {
                    this.checkRows(diffIds, false);
                }
                else {
                    this.checkValues = [];
                }
            }
            else {
                this.checkValues = [];
            }
            this.checkValues = this.checkeds.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r.id));
            if (!this._isResized || this.virtualized) {
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus(_data);
        }
    }
    /**
     * @private
     * @param {?=} _data
     * @return {?}
     */
    updateAllCheckboxStatus(_data) {
        if (!_data) {
            _data = this.dfs.getCurrentPageData();
        }
        /** @type {?} */
        let checkAllStatus = 0;
        if (this.showAllCheckbox) {
            /** @type {?} */
            const allDataIDs = _data.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r[this.idField]));
            /** @type {?} */
            const newCheckValues = allDataIDs.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => this.checkValues.includes(n)));
            if (newCheckValues && newCheckValues.length) {
                /** @type {?} */
                const isSame = !this.dfs.difference(allDataIDs, this.checkValues).length;
                if (!this.checkValues || !this.checkValues.length) {
                    // 没有选中的数据
                    checkAllStatus = 0;
                }
                else if (isSame) { // this.checkValues.length === this.data.length ||
                    // 全部选中
                    checkAllStatus = 1;
                }
                else if (!isSame) { // this.checkValues.length !== this.data.length &&
                    // 有选中的数据，但不是全部选中
                    checkAllStatus = 2;
                }
            }
        }
        this.dgs.changeCheckAllStatus.emit(checkAllStatus);
    }
    // 当单选并显示复选框时，默认将 checkOnSelect, selectOnCheck 设置为 true;
    /**
     * @private
     * @return {?}
     */
    setCheckboxBehavior() {
        if (!this.multiSelect && this.showCheckbox) {
            // TFS: 380899
            // this.checkOnSelect = true;
            // this.selectOnCheck = true;
        }
    }
    /**
     * @private
     * @param {?} columns
     * @return {?}
     */
    _cancelColumnFixed(columns) {
        if (!columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        n => (!n.fixed || (n.fixed !== 'left' && n.fixed !== 'right')) && (n.visible || n.visible === undefined))).length) {
            /** @type {?} */
            const colsCount = columns.length;
            /** @type {?} */
            const rightCols = columns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'right'));
            /** @type {?} */
            const leftCols = columns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'left'));
            if (leftCols.length == colsCount || rightCols.length == colsCount) {
                columns.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    n.fixed = '';
                }));
            }
            else {
                if (rightCols.length === 1) {
                    leftCols.forEach((/**
                     * @param {?} t
                     * @return {?}
                     */
                    t => {
                        t.fixed = '';
                    }));
                }
                else {
                    rightCols.forEach((/**
                     * @param {?} t
                     * @return {?}
                     */
                    t => {
                        t.fixed = '';
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    _flatColumns() {
        if (!this.columns || !this.columns.length) {
            return;
        }
        // 检查列是否为全固定
        this._cancelColumnFixed(this.columns[0].filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n.field !== this.ControlPanelFeild)));
        if (this.isMultiHeader()) {
            if (this.fast) {
                this.flatColumns = this.dfs.getGroupColumns(this.columns[0]);
            }
            else {
                /** @type {?} */
                const _cols = flatten(this.columns);
                _cols.forEach((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => {
                    if (col.parentId) {
                        /** @type {?} */
                        const t = _cols.find((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n.id === col.parentId));
                        if (t) {
                            col.fixed = t.fixed;
                        }
                    }
                }));
                this.flatColumns = _cols.filter((/**
                 * @param {?} col
                 * @return {?}
                 */
                (col) => (!col.colspan || col.colspan == 1) && this.columnIsVisible(col)));
            }
        }
        else {
            this.flatColumns = flatten(this.columns).filter((/**
             * @param {?} col
             * @return {?}
             */
            (col) => (!col.colspan || col.colspan == 1) && this.columnIsVisible(col)));
        }
    }
    /**
     * @param {?} col
     * @return {?}
     */
    columnIsVisible(col) {
        return DatagridColumnsHelper.columnIsVisible(col, this);
    }
    // 添加列设置
    /**
     * @private
     * @return {?}
     */
    addControlCol() {
        if (this.enableSettings()) {
            /** @type {?} */
            const controlCol = this.columns[0].find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === this.ControlPanelFeild));
            if (!controlCol) {
                /** @type {?} */
                const cp = { field: this.ControlPanelFeild, width: 24, rowspan: this.columns.length, fixed: 'right', visible: true };
                // 2021-05-24 启用过滤行后出错
                // if (this.enableFilterRow) {
                //     cp.rowspan += 1;
                // }
                this.columns[0].push(cp);
            }
            else {
                controlCol.visible = true;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkGroupHeaderColumns() {
        if (this.isMultiHeader()) {
            /** @type {?} */
            const allCols = flatten(this.columns);
            DatagridColumnsHelper.checkGroupHeaderColumnVisible(allCols);
        }
    }
    // 检查列集合: [] -> [[]]
    /**
     * @private
     * @param {?} values
     * @return {?}
     */
    correctColumns(values) {
        if (values && values.length && !Array.isArray(values[0])) {
            return [values];
        }
        else {
            return values || [];
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkColumnsType() {
        if (this.columns && this.columns.length) {
            // if (!Array.isArray(this.columns[0])) {
            //     this.columns = [ this.columns ];
            // }
            this.addControlCol();
            this.columns.forEach((/**
             * @param {?} cols
             * @param {?} columnsIndex
             * @return {?}
             */
            (cols, columnsIndex) => {
                cols.forEach((/**
                 * @param {?} col
                 * @param {?} index
                 * @return {?}
                 */
                (col, index) => {
                    if (!col.field) {
                        col.field = `farris-datagrid-column_${columnsIndex}_${index}`;
                    }
                    if (!col.valign) {
                        col.valign = 'middle';
                    }
                    if (col.width === undefined || col.width === null) {
                        col.width = 100;
                    }
                    else {
                        if (typeof col.width === 'string') {
                            col.width = parseInt(col.width, 10);
                        }
                    }
                    // 记录原始宽度
                    if (!col.originalWidth) {
                        col.originalWidth = col.width;
                    }
                    if (col.formatter && typeof col.formatter !== 'function' && Object.keys(col.formatter).length === 0) {
                        col.formatter = null;
                    }
                    if (!this.showGroupColumn && this.groupRows) {
                        this.toggleVisibleColumn(this.groupField.split(','), false);
                    }
                    // 过滤行检查
                    if (col.filter) {
                        if (typeof col.filter === 'boolean') {
                            if (col.field) {
                                col.filter = this.clientFilterService.createColumnFilterOptions(col);
                            }
                            else {
                                col.filter = false;
                            }
                        }
                        else {
                            if (!col.filter.options || !Object.keys(col.filter.options).length) {
                                switch (col.filter.type) {
                                    case ColumnFilterType.enum:
                                        col.filter.options = col.formatter['options'];
                                        break;
                                    case ColumnFilterType.date:
                                        col.filter.options = { dateFormat: 'yyyy-MM-dd', returnFormat: 'yyyy-MM-dd' };
                                        break;
                                    case ColumnFilterType.datetime:
                                        col.filter.options = { dateFormat: 'yyyy-MM-dd HH:mm:ss', returnFormat: 'yyyy-MM-dd HH:mm:ss' };
                                        break;
                                }
                            }
                        }
                    }
                    // 兼容 hidden 2021-05-31
                    if (col['hidden'] !== undefined && col.visible === undefined) {
                        if (typeof col['hidden'] === 'boolean') {
                            col.visible = !col['hidden'];
                        }
                        else {
                            if (typeof col['hidden'] === 'function') {
                                col.visible = (/**
                                 * @return {?}
                                 */
                                () => {
                                    /** @type {?} */
                                    const r = col['hidden'].bind(this);
                                    return !r;
                                });
                            }
                        }
                    }
                    // 多表头禁用过滤
                    if (!col.field || col.field.indexOf('farris-datagrid-column_') > -1) {
                        col.filter = false;
                    }
                }));
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkGroupRowSetting() {
        // 如果启用分组行，但未设置分组字段时，将关闭分组行功能
        // if (this.groupRows) {
        //     if (!this.groupField) {
        //         this.groupRows = false;
        //     }
        // }
    }
    /**
     * @private
     * @return {?}
     */
    checkMergeCell() {
        if (this.mergeCell) {
            if (!this.mergeFields || !this.mergeFields.length) {
                this.mergeCell = false;
            }
            else {
                this.virtualized = false;
                this.virtualizedAsyncLoad = false;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkSortInfo() {
        if (this.sortName) {
            if (!this.sortOrder) {
                this.sortOrder = this.sortName.split(',').map((/**
                 * @return {?}
                 */
                () => 'asc')).join(',');
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkNowrap() {
        // 启用折行后，虚拟加载特性失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
    }
    /**
     * @return {?}
     */
    setHeaderHeight() {
        this.realHeaderHeight = 0;
        if (this.showHeader) {
            /** @type {?} */
            const gridHeaderEl = this.el.nativeElement.querySelector('.f-datagrid-header');
            if (!this.headerWrap) {
                const { header: hh, pager: ph } = SIZE_TYPE[this._sizeType];
                if (this.useThemes) {
                    this.headerHeight = hh;
                    this.filterRowHeight = ph;
                }
                this.realHeaderHeight = this.columns.length * this.headerHeight;
                if (this.enableFilterRow) {
                    this.realHeaderHeight += this.filterRowHeight;
                }
                if (gridHeaderEl) {
                    gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';
                }
            }
            else {
                if (gridHeaderEl) {
                    this.render2.removeStyle(gridHeaderEl, 'minHeight');
                    /** @type {?} */
                    const fixedLeftHeader = gridHeaderEl.querySelector('.f-datagrid-header-fixed-left');
                    if (fixedLeftHeader) {
                        this.render2.setStyle(fixedLeftHeader, 'height', 'auto');
                    }
                    /** @type {?} */
                    const fixedRightHeader = gridHeaderEl.querySelector('.f-datagrid-header-fixed-right');
                    if (fixedRightHeader) {
                        this.render2.setStyle(fixedRightHeader, 'height', 'auto');
                    }
                    /** @type {?} */
                    const trs = gridHeaderEl.querySelectorAll('table tr:not(.f-datagrid-filter-row)');
                    trs.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        n.style.height = 'auto';
                        Array.from(n.children).forEach((/**
                         * @param {?} a
                         * @return {?}
                         */
                        (a) => a.style.height = 'auto'));
                    }));
                    /** @type {?} */
                    const tableEls = Array.from(gridHeaderEl.querySelectorAll('table'));
                    if (tableEls) {
                        /** @type {?} */
                        const heights = tableEls.map((/**
                         * @param {?} t
                         * @return {?}
                         */
                        (t) => t.offsetHeight));
                        /** @type {?} */
                        const maxHeight = Math.max(...heights);
                        this.realHeaderHeight = maxHeight;
                        gridHeaderEl.style.minHeight = this.realHeaderHeight + 'px';
                    }
                    if (fixedLeftHeader) {
                        this.render2.setStyle(fixedLeftHeader, 'height', this.realHeaderHeight + 'px');
                    }
                    if (fixedRightHeader) {
                        this.render2.setStyle(fixedRightHeader, 'height', this.realHeaderHeight + 'px');
                    }
                }
            }
        }
        return this.realHeaderHeight;
    }
    // 列集合变化
    /**
     * @param {?=} reloadData
     * @param {?=} useColumnSettingWidth
     * @param {?=} rebuildFilterBar
     * @return {?}
     */
    columnsChanged(reloadData = true, useColumnSettingWidth = null, rebuildFilterBar = true) {
        /** @type {?} */
        const _useColumnSettingWidth = useColumnSettingWidth === null ? this.fitColumns : useColumnSettingWidth;
        this.dfs.updateProperty('expandGroupRows', this.expandGroupRows);
        this.checkColumnsType();
        this._flatColumns();
        this.headerHeightChange();
        this.dfs.updateProperty('flatColumns', this.flatColumns);
        this.dfs.updateColumns(this.columns, _useColumnSettingWidth, true);
        // this.colGroup = this.dfs.getState().columnsGroup;
        // 动态列合计行
        this.updateFooterData();
        this.dgs.columnsChanged.emit({ scrollToLeft: reloadData, rebuildFilterBar });
        if (reloadData) {
            if (this['_COLUMNS_CHANAGED_TIMER_']) {
                clearTimeout(this['_COLUMNS_CHANAGED_TIMER_']);
            }
            this['_COLUMNS_CHANAGED_TIMER_'] = setTimeout((/**
             * @return {?}
             */
            () => {
                this.refresh();
            }), 60);
        }
        this.setCellStyle();
    }
    // 列头变化
    /**
     * @private
     * @return {?}
     */
    headerHeightChange() {
        this.setHeaderHeight();
        this.dgs.showGridHeader.emit(this.realHeaderHeight);
    }
    /**
     * 判断是否在弹出的窗口中；返回undefind 说明没有在弹出的窗口，否则视为当前列表在弹出窗口使用
     * @return {?}
     */
    inDialog() {
        return this.el.nativeElement.closest('.modal-body');
    }
    //#endregion
    //#region Init
    /**
     * 初始编辑器与验证器
     * @private
     * @return {?}
     */
    initEditorAndValidator() {
        /** @type {?} */
        const Editors = this.inject.get(GRID_EDITORS, []);
        if (Editors.length) {
            Editors.forEach((/**
             * @param {?} ed
             * @return {?}
             */
            ed => {
                this.editors[ed.name] = ed.value;
            }));
        }
        /** @type {?} */
        const _validators = this.inject.get(GRID_VALIDATORS, []);
        if (_validators && _validators.length) {
            // _validators.forEach(vr => {
            //     this.validators[vr.name] = vr.value;
            // });
            this.validators = _validators;
        }
    }
    /**
     * @return {?}
     */
    setPagerHeight() {
        if (!this.useHtmlTable) {
            if (!this.pagination) {
                this.pagerHeight = 0;
            }
            else {
                this.pagerHeight = this.dgPager && this.dgPager.outerHeight || 40;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    initState() {
        this.data = this.data || [];
        /** @type {?} */
        let sta = {};
        Object.keys(this).forEach((/**
         * @param {?} k
         * @return {?}
         */
        (k) => {
            if (!IgnoreProperties.includes(k)) {
                sta[k] = this[k];
            }
        }));
        this.dfs.initState(Object.assign({}, sta, { fitColumns: this.fitColumns, fit: this.fit, groupField: this._groupField }));
        sta = null;
    }
    /**
     * @private
     * @param {?=} fitColumns
     * @return {?}
     */
    setFitColumns(fitColumns = true) {
        if (this.columns) {
            this.dfs.fitColumns(fitColumns);
        }
    }
    /**
     * @private
     * @return {?}
     */
    setGridNewSizeWhenFit() {
        /** @type {?} */
        const parent = this.el.nativeElement.parentElement;
        if (parent) {
            const { width, height } = parent.getBoundingClientRect();
            /** @type {?} */
            const padding = this.getElementPadding(parent);
            /** @type {?} */
            const border = this.getElementBorderWidth(parent);
            /** @type {?} */
            let m = 'floor';
            if (this.maxHeight && this.autoHeight) {
                m = 'ceil';
            }
            this.width = Math[m](Math.floor(width) - border.left - border.right - padding.left - padding.right);
            this.height = Math[m](Math.floor(height) - border.top - border.bottom - padding.top - padding.bottom);
            if (this.maxHeight && this.autoHeight) {
                this.height += 1;
            }
            if (!this.height) {
                this.height = this.dfs.getState().height || 300;
            }
            if (!this.width) {
                this.width = this.dfs.getState().width || 800;
            }
        }
    }
    /**
     * @param {?=} fit
     * @return {?}
     */
    calculateGridSize(fit = true) {
        if (this.useHtmlTable) {
            return;
        }
        /** @type {?} */
        const setNewSize = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            let h = this.height;
            if (this.useBlankWhenDataIsEmpty && (!this.data || !this.data.length)) {
                h = this.emptyDataHeight + this.realHeaderHeight;
                if (this.showRowGroupPanel) {
                    h += this.rowGroupPanelHeight;
                }
                if (this.showFilterBar) {
                    h += this.filterBarHeight;
                }
                if (this.showFooter && this.footerData['value'].length) {
                    h += this.footerHeight;
                }
                if (this.pagination) {
                    /** @type {?} */
                    const ph = this.pagerHeight || 40;
                    h += ph;
                }
            }
            if (this.gridSize.height === h + 'px' && this.gridSize.width === this.width + 'px') {
                return;
            }
            this.gridSize = { width: this.width + 'px', height: h + 'px' };
            this.dfs.resize({ width: this.width, height: h });
        });
        if (fit) {
            this.setGridNewSizeWhenFit();
            if (this.width && this.height) {
                this._isResized = true;
                setNewSize();
                this._isResized = false;
                if (!this.cd['destroyed']) {
                    this.cd.detectChanges();
                }
            }
        }
        else {
            setNewSize();
        }
    }
    /**
     * @private
     * @return {?}
     */
    initBeforeEvents() {
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeUnselect) {
            this.beforeUnselect = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeCheck) {
            this.beforeCheck = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeUncheck) {
            this.beforeUncheck = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.beforeEdit) {
            this.beforeEdit = (/**
             * @return {?}
             */
            () => of(true));
        }
        if (!this.afterEdit) {
            this.afterEdit = (/**
             * @return {?}
             */
            () => of(true));
        }
    }
    //#endregion
    //#region 快捷键
    /**
     * @private
     * @return {?}
     */
    unbindMoveSelectRowEvent() {
        if (this.documentRowKeydownHandler) {
            this.documentRowKeydownHandler();
            this.documentRowKeydownHandler = null;
        }
    }
    /**
     * @private
     * @return {?}
     */
    bindDocumentMoveSelectRowEvent() {
        this.unbindMoveSelectRowEvent();
        this.unbindDocumentEditListener();
        this.documentRowKeydownHandler = this.render2.listen(document, 'keydown', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            // e.preventDefault();
            if (!this.isActived()) {
                return;
            }
            // has loading
            if (document.querySelectorAll('farris-loading').length) {
                return;
            }
            if (e.target) {
                /** @type {?} */
                const targetName = ((/** @type {?} */ (e.target))).nodeName;
                if (this.ignoreTarget.indexOf(targetName) > -1) {
                    return;
                }
            }
            if (e.keyCode === 40 || e.keyCode === 38) {
                e.preventDefault();
            }
            switch (e.keyCode) {
                case 40:
                    this.selectNextRow();
                    break;
                case 38:
                    this.selectPrevRow();
                    break;
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    bindEditListenerInModal() {
        // 弹窗中事件处理
        if (Utils.hasDialogOpen()) {
            /** @type {?} */
            const modalElement = this.inDialog();
            if (modalElement) {
                /** @type {?} */
                const _fmodal = modalElement.closest('.farris-modal');
                if (_fmodal) {
                    this.modalClickEvent = this.render2.listen(_fmodal, 'click', (/**
                     * @return {?}
                     */
                    () => {
                        this.endEditing();
                        this.currentCell = null;
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    bindDocumentEditListener() {
        this.unbindDocumentEditListener();
        /*
               if (!this.documentCellClickHandler) {
                   this.bindEditListenerInModal();
                   this.documentCellClickHandler = (event) => {
                       if (this.pending) {
                           return false;
                       }
                       if (this.currentCell) {
                           if (Utils.hasDialogOpen()) {
                               const indlg = this.inDialog();
                               const currentTargetInDialog = event.target.closest('.modal-body');
                               if (indlg && currentTargetInDialog) {
                                   if (indlg != currentTargetInDialog) {
                                       return;
                                   }
                               } else {
                                   return;
                               }
                           }
                           // DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
       
                           // if (this.currentCell.isEditing) {
                           //     // this.dfs.endEditCell();
                           //     this.currentCell.cellElement.closeEdit();
                           // }
                           // this.dfs.cancelSelectCell();
                           // this.unbindDocumentEditListener();
       
                           if (this.currentCell.isEditing) {
                               // this.dfs.endEditCell();
                               this.currentCell.cellElement.closeEdit().subscribe(f => {
                                   if (f) {
                                       DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
                                       DomHandler.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
                                       this.dfs.cancelSelectCell();
                                       this.unbindDocumentEditListener();
                                       this.currentCell = null;
                                   }
                               });
                           }
                       }
                   };
                   this.docuemntCellClickEvents = this.render2.listen(document, 'click', this.documentCellClickHandler);
               }
       */
        if (!this.documentCellKeydownHandler) {
            this.documentCellKeydownHandler = (/**
             * @param {?} event
             * @return {?}
             */
            (event) => {
                if (!event.target.closest('.f-datagrid') && event.target.nodeName !== 'BODY') {
                    return;
                }
                if (this.isActived()) {
                    this.onKeyDownEvent(event);
                }
            });
            this.documentCellKeydownEvents = this.render2.listen(document, 'keydown', this.documentCellKeydownHandler);
        }
    }
    /**
     * @private
     * @return {?}
     */
    unbindDocumentEditListener() {
        if (this.documentCellClickHandler) {
            this.docuemntCellClickEvents();
            this.documentCellClickHandler = null;
        }
        if (this.documentCellKeydownHandler) {
            this.documentCellKeydownEvents();
            this.documentCellKeydownHandler = null;
        }
        if (this.modalClickEvent) {
            this.modalClickEvent();
            this.modalClickEvent = null;
        }
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    onKeyDownEvent(e) {
        // if (e.ctrlKey || e.shiftKey || !this.editable) {
        //     return;
        // }
        // if (!e.target.closest('.f-datagrid')) {
        //     return;
        // }
        if (this.disabled) {
            return;
        }
        /** @type {?} */
        const keyCode = e.keyCode;
        if (this.currentCell && !this.currentCell.isEditing) {
            if ([13, 40, 37, 38, 39, 9].indexOf(keyCode) > -1) {
                e.preventDefault();
            }
            switch (keyCode) {
                case 32: // 空格
                    if (this.currentCell && this.currentCell.column.onSpaceHandler) {
                        e.stopPropagation();
                        this.currentCell.column.onSpaceHandler({ grid: this, cell: this.currentCell, event: e });
                    }
                    break;
                case 13: // Enter
                    if (this.currentCell) {
                        /** @type {?} */
                        const fn = this.currentCell.cellElement['editCell'];
                        if (fn) {
                            fn.apply(this.currentCell.cellElement);
                        }
                        else {
                            if (this.currentCell.column.onEnterHandler) {
                                e.stopPropagation();
                                this.currentCell.column.onEnterHandler({ grid: this, cell: this.currentCell, event: e });
                            }
                        }
                    }
                    break;
                case 40: // ↓
                    this.selectNextCell('down', e);
                    break;
                case 38: // ↑
                    this.selectNextCell('up', e);
                    break;
                case 39: // →
                    this.selectNextCell('right', e);
                    break;
                case 37: // ←
                    this.selectNextCell('left', e);
                    break;
                case 9: // Tab
                    if (e.shiftKey) {
                        this.selectNextCell('left', e);
                    }
                    else {
                        this.selectNextCell('right', e);
                    }
                    break;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    unsubscribes() {
        this.subscriptions.forEach((/**
         * @param {?} ss
         * @return {?}
         */
        ss => {
            if (ss) {
                ss.unsubscribe();
                ss = null;
            }
        }));
        this.subscriptions = [];
        if (this.docuemntCellClickEvents) {
            this.docuemntCellClickEvents();
        }
    }
    //#endregion
    //#region Editing
    /**
     * @return {?}
     */
    isRowEditing() {
        if (!this.selectedRow || this.selectedRow.index === -1) {
            return false;
        }
        else {
            if (this.editMode === 'row') {
                return this.selectedRow.editors && this.selectedRow.editors.length;
            }
            else {
                return false;
            }
        }
    }
    /**
     * @return {?}
     */
    isCellEditing() {
        if (this.currentCell && this.editMode === 'cell') {
            if (!this.currentCell.editor && this.currentCell.column && !this.currentCell.column.editorTemplate) {
                this.currentCell.isEditing = false;
                if (this.currentCell.cellRef) {
                    this.currentCell.cellRef.isEditing = false;
                }
            }
            return this.currentCell.isEditing;
        }
        return false;
    }
    /**
     * @return {?}
     */
    isEditing() {
        if (this.editMode === 'row') {
            return this.isRowEditing();
        }
        else {
            return this.isCellEditing();
        }
    }
    /**
     * @return {?}
     */
    endEditing() {
        if (this.editMode === 'row') {
            this.endRowEdit();
        }
        else if (this.editMode === 'cell') {
            this.endCellEdit();
        }
    }
    /**
     * @return {?}
     */
    getEditors() {
        return this.selectedRow.editors;
    }
    /**
     * @param {?} rowId
     * @param {?} field
     * @param {?=} validation
     * @return {?}
     */
    editCell(rowId, field, validation = null) {
        this.activeDataGrid();
        /** @type {?} */
        const rowIndex = this.dfs.findRowIndex(rowId);
        if (rowIndex > -1) {
            this.endCellEdit();
            /** @type {?} */
            const trId = TR_PREFIX + rowId;
            // const trDom = this.el.nativeElement.querySelector('#' + trId);
            /** @type {?} */
            const trDom = Utils.getTrDomById(trId, this.el.nativeElement);
            /** @type {?} */
            let tdDom = null;
            if (trDom) {
                tdDom = trDom.querySelector(`[field="${field}"]`);
            }
            /** @type {?} */
            const col = this.getColumn(field);
            if (!tdDom && col.fixed) {
                if (col.fixed === 'left') {
                    // const trDomL = this.el.nativeElement.querySelector('#' + trId + '_fixedleft');
                    /** @type {?} */
                    const trDomL = Utils.getTrDomById(trId + '_fixedleft', this.el.nativeElement);
                    tdDom = trDomL && trDomL.querySelector(`[field="${field}"]`);
                }
                else if (col.fixed === 'right') {
                    // const trDomR = this.el.nativeElement.querySelector('#' + trId + '_fixedright');
                    /** @type {?} */
                    const trDomR = Utils.getTrDomById(trId + '_fixedright', this.el.nativeElement);
                    tdDom = trDomR && trDomR.querySelector(`[field="${field}"]`);
                }
            }
            if (validation) {
                this.formValidations = Object.assign(this.formValidations || {}, { [field]: validation });
            }
            if (tdDom && tdDom['editCell']) {
                this.currentCell = null;
                if (this['EDITCELL_TIMER']) {
                    clearTimeout(this['EDITCELL_TIMER']);
                }
                this['EDITCELL_TIMER'] = setTimeout((/**
                 * @return {?}
                 */
                () => {
                    tdDom.editCell();
                }), 0);
            }
        }
    }
    /**
     * @param {?=} event
     * @return {?}
     */
    endCellEdit(event) {
        // document.body.click();
        if (this.currentCell) {
            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
            if (this.currentCell.isEditing) {
                // this.dfs.endEditCell();
                if (this.currentCell.cellEditorRef) {
                    this.currentCell.cellEditorRef.hideCover();
                }
                /** @type {?} */
                const stopEdit = this.currentCell.cellElement.closeEdit();
                if (stopEdit) {
                    stopEdit.subscribe();
                }
            }
        }
    }
    /**
     * @param {?=} rowId
     * @return {?}
     */
    editRow(rowId) {
        if (!this.editable || this.editMode !== 'row') {
            return false;
        }
        if (rowId) {
            this.selectRow(rowId);
        }
        if (!this.selectedRow || this.selectedRow.index === -1) {
            this.writeConsole('Please select a row.');
            return false;
        }
        const { index: rowIndex, data: rowData } = Object.assign({}, this.selectedRow);
        /** @type {?} */
        const beforeEditEvent = this.beforeEdit({ rowIndex, rowData, gridInstance: this });
        if (!beforeEditEvent || !beforeEditEvent.subscribe) {
            this.writeConsole('please return an Observable Type.');
            return;
        }
        /** @type {?} */
        const trId = TR_PREFIX + rowId;
        // const trDom = this.el.nativeElement.querySelector('#' + trId);
        /** @type {?} */
        const trDom = Utils.getTrDomById(trId, this.el.nativeElement);
        if (!this.selectedRow.dr) {
            trDom.click();
        }
        beforeEditEvent.subscribe((/**
         * @param {?} flag
         * @return {?}
         */
        (flag) => {
            if (flag) {
                if (this.selectedRow.dr && this.selectedRow.dr.cells) {
                    /** @type {?} */
                    const cells = this.selectedRow.dr.cells.toArray();
                    if (!cells || !cells.length) {
                        return;
                    }
                    cells.forEach((/**
                     * @param {?} cell
                     * @return {?}
                     */
                    cell => {
                        if (cell.column.editor) {
                            cell.isEditing = true;
                        }
                    }));
                    this.selectedRow.dr.cd.detectChanges();
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        /** @type {?} */
                        const editors = cells.map((/**
                         * @param {?} cell
                         * @return {?}
                         */
                        cell => {
                            if (cell.cellEditor) {
                                return cell.cellEditor.componentRef;
                            }
                        })).filter((/**
                         * @param {?} editor
                         * @return {?}
                         */
                        editor => editor));
                        this.selectedRow.editors = editors;
                        if (editors && editors.length) {
                            if (editors[0].instance.inputElement) {
                                editors[0].instance.inputElement.focus();
                            }
                        }
                        // 绑定键盘事件
                        this.bindRowEditorKeydownEvent();
                        if (!this.cd['destroyed']) {
                            this.cd.detectChanges();
                        }
                        this.beginEdit.emit({ rowIndex, rowData, gridInstance: this, editor: editors });
                    }));
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    endRowEdit() {
        if (!this.isRowEditing()) {
            return { canEnd: true };
        }
        if (!this.selectedRow || this.selectedRow.index === -1) {
            this.writeConsole('Please select a row.');
            return;
        }
        const { index: rowIndex, data: rowData, dr } = Object.assign({}, this.selectedRow);
        const { editor: currentEditor, column } = Object.assign({}, this.currentCell);
        // blur
        document.body.click();
        if (this.pending) {
            return { canEnd: false };
        }
        if (!dr.form) {
            return { canEnd: true };
        }
        /** @type {?} */
        const rowForm = (/** @type {?} */ (dr.form));
        rowForm.markAsTouched();
        if (rowForm.invalid && !this.endEditByInvalid) {
            return { canEnd: false };
        }
        // afterEdit 要传递相关参数，在编辑状态时，移动滚动条会出事
        /** @type {?} */
        const afterEditEvent = this.afterEdit(rowIndex, rowData, column, currentEditor);
        if (!afterEditEvent || !afterEditEvent.subscribe) {
            this.writeConsole('please return an Observable Type.');
            return { canEnd: false };
        }
        afterEditEvent.subscribe((/**
         * @param {?} flag
         * @return {?}
         */
        (flag) => {
            if (flag) {
                this.closeAllCellEditor();
                if (this.selectedRow.dr.form) {
                    this.selectedRow.dr.rowData = Object.assign(this.selectedRow.dr.rowData, this.selectedRow.dr.form.value);
                    this.dfs.updateRow(this.selectedRow.id, this.selectedRow.dr.rowData);
                    this.cd.detectChanges();
                }
                /** @type {?} */
                let val = '';
                if (currentEditor && currentEditor.formControl) {
                    val = currentEditor.formControl.value;
                }
                this.endEdit.emit({ rowIndex, rowData, column, value: val });
                this.dgs.refreshFooterData.emit();
            }
        }));
    }
    /**
     * @param {?} rowId
     * @param {?=} emit
     * @return {?}
     */
    cancelEdit(rowId, emit = true) {
        if (!this.isEditing()) {
            return;
        }
        this.closeAllCellEditor();
        if (rowId) {
            this.dfs.rejectChanges(rowId);
        }
        this.cd.detectChanges();
        if (emit) {
            this.cancelEdited.emit();
        }
    }
    /**
     * @return {?}
     */
    closeAllCellEditor() {
        if (this.selectedRow && this.selectedRow.dr) {
            /** @type {?} */
            const cells = this.selectedRow.dr.cells;
            if (cells) {
                cells.forEach((/**
                 * @param {?} cell
                 * @return {?}
                 */
                cell => cell.isEditing = false));
                if (this.currentCell) {
                    this.currentCell.isEditing = false;
                }
            }
            this.selectedRow.editors = null;
        }
        // 取消键盘事件
        this.unbindRowEditorKeydownEvent();
    }
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    rowEditTabKeydwonEvent(e) {
        /** @type {?} */
        const keyCode = e.which || e.keyCode;
        if (keyCode === 9) { // tab
            // tab
            /** @type {?} */
            const td = e.target.closest('td');
            /** @type {?} */
            const tr = e.target.closest('tr');
            /** @type {?} */
            const nextTd = td.nextElementSibling;
            /** @type {?} */
            const hasNoEditor = (/**
             * @param {?} _td
             * @return {?}
             */
            (_td) => {
                return !_td.querySelector('input') && !_td.querySelector('textarea') && !_td.querySelector('select');
            });
            /** @type {?} */
            const editNextRow = (/**
             * @return {?}
             */
            () => {
                /** @type {?} */
                const nextTr = tr.nextElementSibling;
                if (nextTr) {
                    nextTr.click();
                    /** @type {?} */
                    const nextRowid = nextTr.getAttribute('id').replace(TR_PREFIX, '');
                    if (nextRowid) {
                        this.editRow(nextRowid);
                    }
                }
            });
            if (nextTd) {
                if (hasNoEditor(nextTd)) {
                    /** @type {?} */
                    const tds = tr.querySelectorAll('td');
                    /** @type {?} */
                    let tdIdx = -1;
                    tds.forEach((/**
                     * @param {?} t
                     * @param {?} i
                     * @return {?}
                     */
                    (t, i) => {
                        if (t === nextTd) {
                            tdIdx = i;
                        }
                    }));
                    /** @type {?} */
                    let nextTrEdit = true;
                    while (tdIdx < tds.length) {
                        /** @type {?} */
                        const _ntd = tds[tdIdx];
                        if (hasNoEditor(_ntd)) {
                            tdIdx++;
                        }
                        else {
                            nextTrEdit = false;
                            break;
                        }
                    }
                    if (nextTrEdit) {
                        editNextRow();
                    }
                }
            }
            else {
                editNextRow();
            }
        }
        e.stopPropagation();
    }
    /**
     * @private
     * @return {?}
     */
    bindRowEditorKeydownEvent() {
        if (!this.documentRowEditKeydownHanlder) {
            this.documentRowEditKeydownHanlder = this.render2.listen(document, 'keydown', this.rowEditTabKeydwonEvent.bind(this));
        }
        this.documentClickEndRowEditHandler = this.render2.listen(document, 'click', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.pending) {
                return false;
            }
            if (Utils.hasDialogOpen()) {
                return;
            }
            if (this.isRowEditing()) {
                // this.endRowEdit();
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    unbindRowEditorKeydownEvent() {
        // 取消键盘事件
        if (this.documentRowEditKeydownHanlder) {
            this.documentRowEditKeydownHanlder();
            this.documentRowEditKeydownHanlder = null;
        }
        if (this.documentClickEndRowEditHandler) {
            this.documentClickEndRowEditHandler();
            this.documentClickEndRowEditHandler = null;
        }
    }
    //#endregion
    //#region Load Data
    /**
     * @private
     * @param {?} conditions
     * @param {?=} excuteLocaleFilter
     * @return {?}
     */
    _clientFilter(conditions, excuteLocaleFilter = false) {
        // 客户端过滤
        if (excuteLocaleFilter) {
            /** @type {?} */
            const allClientData = this.dfs.getData(true);
            if (conditions && Object.keys(conditions).length) {
                /** @type {?} */
                const _data = this.clientFilterService.executeFilter(allClientData, conditions);
                this.dfs.loadFilterData(_data);
            }
            else {
                this.loadData(allClientData, false, true);
            }
        }
        if (!this.virtualized) {
            this.scrollToTop();
        }
        /** @type {?} */
        const _conditions = this.checkFilterValues(conditions);
        this.filterChanged.emit(_conditions);
    }
    /**
     * @private
     * @param {?} conditions
     * @return {?}
     */
    smartFilterData(conditions) {
        if (this.remoteFilter) { // 服务器端过滤
            // 服务器端过滤
            /** @type {?} */
            let entityFilters = this.clientFilterService.convertSmartFilter2EntityFilter(conditions);
            entityFilters = this.checkFilterValues(entityFilters);
            this.filterChanged.emit(entityFilters);
        }
        else {
            // 客户端过滤
            this._clientFilter(conditions, this.useDefaultFilter);
        }
    }
    // smart fitler 清空查询条件
    /**
     * @param {?=} $event
     * @return {?}
     */
    onClearSmartFilters($event) {
        this.smartFilterResult = { conditions: [], controlData: [] };
        this.conditions = [];
        this.smartFilterData([]);
        this.smartFilterService.clearAll();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.onFilterBarResize(0);
        }));
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onRemoveSmartFilterItem($event) {
        if ($event) {
            /** @type {?} */
            const e = Object.assign({}, $event);
            e['labelCode'] = $event.fieldCode;
            this.smartFilterService.removeCondition(e, true);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onFilterBarResize($event) {
        this.filterBarHeight = $event;
        /** @type {?} */
        const smartFilterEl = this.el.nativeElement.querySelector('.f-datagrid-column-drop-panel');
        if (smartFilterEl && !$event) {
            smartFilterEl.style.top = '0px';
        }
        this.dgs.showGridHeader.emit(this.realHeaderHeight);
        this.dgs.smartFilterBarExpand.emit();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSmartFilterChange($event) {
        const { conditions, filterItem } = $event;
        this.smartFilterService.filterConditionChanged({ conditions, controlData: filterItem, from: 'toolbar' });
        // this.smartFilterData(conditions);
        this.dgs.smartFilterDataChange.emit(filterItem);
    }
    /**
     * @param {?=} conditions
     * @return {?}
     */
    filterData(conditions) {
        if (!conditions) {
            conditions = this.conditions;
        }
        else {
            this.conditions = conditions;
        }
        this.scrollToTop();
        if (this.enableSmartFilter) {
            this.smartFilterData(conditions);
            return;
        }
        if (this.remoteFilter) {
            /** @type {?} */
            const entityFilters = this.clientFilterService.convert2FilterArray(conditions);
            this.filterChanged.emit(entityFilters);
        }
        else {
            // 客户端过滤
            this._clientFilter(conditions, true);
        }
    }
    /**
     * 清空过滤条件
     * @return {?}
     */
    clearCondition() {
        this.dgs.onClearFilter();
        if (!this.enableFilterRow && !this.enableSmartFilter) {
            return;
        }
        /** @type {?} */
        let isFilterChange = false;
        if (this.conditions) {
            if (Array.isArray(this.conditions)) {
                isFilterChange = !!this.conditions.length;
            }
            else {
                isFilterChange = !!Object.keys(this.conditions).length;
            }
        }
        if (!isFilterChange) {
            return;
        }
        this.conditions = this.enableSmartFilter ? [] : {};
        this.clientFilterChanged = true;
        this.filterData(this.conditions);
    }
    /**
     * @private
     * @param {?=} data
     * @param {?=} keepSortState
     * @param {?=} keepScrollPosition
     * @return {?}
     */
    _loadData(data, keepSortState = false, keepScrollPosition = true) {
        if (this.loading) {
            this.closeLoading(!this.pagination);
        }
        data = data || [];
        if (keepScrollPosition && this.scrollInstance && this.scrollInstance.instance) {
            /** @type {?} */
            const lst = this.scrollInstance.instance.lastScrollTop;
            /** @type {?} */
            const lsl = this.scrollInstance.instance.lastScrollLeft;
            this.dfs.updateProperty('scrollInfo', { y: lst, x: lsl });
        }
        else {
            this.dfs.updateProperty('scrollInfo', { y: 0, x: 0 });
        }
        if (this.pagination) {
            this.dfs.setPagination(this.pageIndex, this.pageSize, this.total);
            this.updatePagerOptions();
            if (!this.cd['destroyed']) {
                this.cd.detectChanges();
            }
        }
        // 重新加载数据时，移除所有编辑列
        // this.closeAllCellEditor();
        this.data = data;
        if (keepSortState) {
            if (this.remoteSort) {
                this.dfs.loadData(data);
            }
            else {
                this.dfs.loadData(data, true, true);
            }
        }
        else {
            this.dfs.loadData(data);
        }
        this.setPagerHeight();
        this.dgs.dataSourceChanged();
    }
    /**
     * @param {?=} data
     * @param {?=} keepSortState
     * @param {?=} keepScrollPosition
     * @return {?}
     */
    loadData(data, keepSortState = false, keepScrollPosition = true) {
        this._loadData(data, keepSortState, keepScrollPosition);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    loadVirtualData(data) {
        if (this.groupRows) {
            this.writeConsole('if you using GROUPROWS, please set [virtualized]="false" [virtualizedAsyncLoad]="false"');
            return;
        }
        if (this.virtualizedAsyncLoad) {
            this.dgs.onLoadVirtualData(data);
        }
    }
    /**
     * @param {?} pageIndex
     * @param {?} pageSize
     * @return {?}
     */
    fetchData(pageIndex, pageSize) {
        if (this.restService) {
            this.showLoading();
            /** @type {?} */
            const params = { pageIndex, pageSize };
            if (this.sortName) {
                params['sortName'] = this.sortName;
            }
            if (this.sortOrder) {
                params['sortOrder'] = this.sortOrder;
            }
            return this.restService.getData(this.url, params);
        }
        return of(undefined);
    }
    /**
     * @return {?}
     */
    refresh() {
        this.dfs.refresh();
    }
    /**
     * @return {?}
     */
    reload() {
        this.fetchData(1, this.pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.pageIndex = 1;
                this.total = res.total;
                this.loadData(res.items);
            }
        }));
    }
    /**
     * 获取当前页数据
     * @return {?}
     */
    getRows() {
        if (this.groupRows || this.virtualized) {
            if (this.pagerOnServer) {
                return this.ds.rows;
            }
            else {
                return this.currentPagerData;
            }
        }
        else {
            if (this.pagerOnServer) {
                return this.data;
            }
            else {
                return this.currentPagerData;
            }
        }
    }
    /**
     * @param {?} groupRowId
     * @return {?}
     */
    getGroupRow(groupRowId) {
        /** @type {?} */
        const _allrows = (this.getRows() || []).filter((/**
         * @param {?} n
         * @return {?}
         */
        n => n[IS_GROUP_ROW_FIELD]));
        /** @type {?} */
        const rowIndex = _allrows.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        n => n.id == groupRowId));
        return {
            data: _allrows[rowIndex],
            index: rowIndex
        };
    }
    //#endregion
    //#region Pagination
    /**
     * @param {?} pageIndex
     * @param {?=} detectChanges
     * @return {?}
     */
    setPageIndex(pageIndex, detectChanges = true) {
        this.pageIndex = pageIndex;
        this.pagerOpts.currentPage = pageIndex;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    // 更新每页
    /**
     * @param {?} pageList
     * @param {?=} detectChanges
     * @return {?}
     */
    setPageList(pageList, detectChanges = true) {
        this.pageList = pageList;
        this.pagerOpts.pageList = pageList;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    /**
     * @param {?} pageIndex
     * @return {?}
     */
    onPageChange(pageIndex) {
        if (this.lockPagination) {
            return;
        }
        if (this.controlPaginationState) {
            this.setPageIndex(pageIndex, false);
        }
        this.fetchData(pageIndex, this.pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.loadData(res.items);
            }
        }));
        this.focusRowIndex = -1;
        this.scrollToTop();
        this.pageChanged.emit({ pageIndex, pageSize: this.pageSize });
    }
    /**
     * @param {?} pageSize
     * @return {?}
     */
    onPageSizeChange(pageSize) {
        if (this.lockPagination) {
            return;
        }
        this.focusRowIndex = -1;
        this.scrollToTop();
        this.pageSize = pageSize;
        this.pagerOpts.itemsPerPage = pageSize;
        this.fetchData(1, pageSize).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            if (res) {
                this.pageIndex = 1;
                this.loadData(res.items);
            }
        }));
        this.pageSizeChanged.emit({ pageSize, pageIndex: this.pageIndex });
    }
    /**
     * @param {?} id
     * @return {?}
     */
    onRemoveSelectedItem(id) {
        if (this.dfs.findRowIndex(id) > -1) {
            this.unCheckRow(id);
            this.cd.detectChanges();
        }
        else {
            this.unCheckRow(id, false);
            this.checkValues = this.checkeds.map((/**
             * @param {?} r
             * @return {?}
             */
            r => r.id));
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onClearSelectedItem($event) {
        // this.clearAll();
        if (this.selectOnCheck) {
            this.selectValue = '';
        }
        this.clearCheckeds(true);
    }
    //#endregion
    //#region Loading
    /**
     * @return {?}
     */
    showLoading() {
        this.loading = true;
        this.cd.detectChanges();
    }
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    closeLoading(detectChanges = true) {
        this.loading = false;
        if (detectChanges) {
            this.cd.detectChanges();
        }
    }
    //#endregion
    //#region Dom
    /**
     * @private
     * @param {?} strNum
     * @return {?}
     */
    replacePX2Empty(strNum) {
        if (strNum) {
            return Number.parseInt(strNum.replace('px', ''), 10);
        }
        return 0;
    }
    /**
     * @param {?} cls
     * @param {?} dom
     * @return {?}
     */
    renderCustomCls(cls, dom) {
        if (cls) {
            if (cls[0] === '!') {
                /** @type {?} */
                const _cls = cls.slice(1).split(' ').filter((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c));
                _cls.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    if (c) {
                        this.render2.removeClass(dom, c);
                    }
                }));
            }
            else {
                cls.split(' ').filter((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => c)).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                c => {
                    if (c) {
                        this.render2.addClass(dom, c);
                    }
                }));
            }
        }
    }
    /**
     * @param {?} cs
     * @param {?} dom
     * @param {?=} cssRuleText
     * @return {?}
     */
    renderCustomStyle(cs, dom, cssRuleText = null) {
        if (!cs) {
            return;
        }
        if (cs.cls) {
            this.renderCustomCls(cs.cls, dom);
        }
        if (cs.style) {
            if (!cssRuleText) {
                Object.keys(cs.style).forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => {
                    if (n.toLowerCase() === 'color' && cs.style[n] && cs.style[n].indexOf('!important') === -1) {
                        cs.style[n] = cs.style[n] + '!important';
                    }
                }));
                cssRuleText = `${this.customStyleKey()} #${dom.id} ${JSON.stringify(cs.style)}`;
            }
            this.dgs.appendCssRules([cssRuleText]);
        }
    }
    /**
     * @param {?} cs
     * @param {?} dom
     * @param {?} cssClassName
     * @return {?}
     */
    renderCustomStyle2(cs, dom, cssClassName) {
        if (!cs) {
            return;
        }
        if (cs.cls && dom) {
            this.renderCustomCls(cs.cls, dom);
        }
        if (cs.style) {
            Object.keys(cs.style).forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if ((n.toLowerCase().indexOf('background') > -1 || n.toLowerCase() === 'color') && cs.style[n] && cs.style[n].indexOf('!important') === -1) {
                    cs.style[n] = cs.style[n] + '!important';
                }
            }));
            /** @type {?} */
            let cssRuleText = `${this.customStyleKey()} .${cssClassName} ${JSON.stringify(cs.style)}`;
            if (cssClassName.indexOf(this.customStyleKey()) > -1) {
                cssRuleText = `${cssClassName} ${JSON.stringify(cs.style)}`;
            }
            this.dgs.appendCssRules([cssRuleText]);
        }
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getBoundingClientRect(el) {
        return el.nativeElement.getBoundingClientRect();
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getElementPadding(el) {
        /** @type {?} */
        const style = getComputedStyle(el);
        return {
            top: this.replacePX2Empty(style.paddingTop),
            left: this.replacePX2Empty(style.paddingLeft),
            bottom: this.replacePX2Empty(style.paddingBottom),
            right: this.replacePX2Empty(style.paddingRight)
        };
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getElementBorderWidth(el) {
        /** @type {?} */
        const style = getComputedStyle(el);
        return {
            top: this.replacePX2Empty(style.borderTopWidth),
            bottom: this.replacePX2Empty(style.borderBottomWidth),
            right: this.replacePX2Empty(style.borderRightWidth),
            left: this.replacePX2Empty(style.borderLeftWidth)
        };
    }
    /**
     * @param {?} field
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    formatData(field, data, formatter) {
        /** @type {?} */
        const value = this.getFieldValue(field, data);
        return this.colFormatSer.format(value, data, formatter);
    }
    /**
     * @param {?} field
     * @param {?} rowData
     * @return {?}
     */
    getFieldValue(field, rowData) {
        return Utils.getValue(field, rowData);
    }
    //#endregion
    //#region Select
    /**
     * @private
     * @return {?}
     */
    canOperateCheckbox() {
        return this.multiSelect && this.showCheckbox;
    }
    /**
     * @param {?} nextColumn
     * @return {?}
     */
    findNextTd(nextColumn) {
        if (!nextColumn) {
            return null;
        }
        /** @type {?} */
        const rowid = TR_ID_PREFIX + this.selectedRow.id;
        /** @type {?} */
        const leftTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedleft';
        /** @type {?} */
        const rightTrID = TR_ID_PREFIX + this.selectedRow.id + '_fixedright';
        /** @type {?} */
        let _tr = null;
        /** @type {?} */
        let _td = null;
        if (nextColumn.fixed === 'left') {
            // _tr = document.querySelector(leftTrID);
            _tr = Utils.getTrDomById(leftTrID, document);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        else if (nextColumn.fixed === 'right') {
            // _tr = document.querySelector(rightTrID);
            _tr = Utils.getTrDomById(rightTrID, document);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        else {
            // _tr = document.querySelector(rowid);
            _tr = Utils.getTrDomById(rowid, document);
            if (_tr) {
                _td = _tr.querySelector(`[field="${nextColumn.field}"]`);
            }
        }
        return _td;
    }
    /**
     * 依据当前字段查询下个字段的TD DOM
     * @param {?} field 当前字段名称
     * @param {?} dir 移动方向
     * @return {?} TD element
     */
    findNextCell(field, dir) {
        /** @type {?} */
        let td = null;
        if (this.currentCell && this.currentCell.cellElement) {
            /** @type {?} */
            const col = this.dfs.getColumn(field);
            /** @type {?} */
            const fixed = col.fixed || '';
            // let cellIndex = this.dfs.getColumnIndex(field, fixed);
            /** @type {?} */
            let cellIndex = this.colGroup.columns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => (n.id && n.id === col.id) || n.field === col.field));
            // if (fixed === 'left' || this.fast) {
            //     if (this.showCheckbox) {
            //         cellIndex += 1;
            //     }
            //     if (this.showLineNumber) {
            //         cellIndex += 1;
            //     }
            // }
            /** @type {?} */
            const currCellEl = this.currentCell.cellElement;
            /** @type {?} */
            const tdSelector = `[field="${field}"]`;
            if (dir === 'up') {
                /** @type {?} */
                const prevTr = this.dgs.findNextTr(currCellEl.parentElement.previousElementSibling, 'up');
                if (prevTr) {
                    td = prevTr.querySelector(tdSelector);
                }
            }
            else if (dir === 'down') {
                /** @type {?} */
                const nextTr = this.dgs.findNextTr(currCellEl.parentElement.nextElementSibling, 'down');
                if (nextTr) {
                    td = nextTr.querySelector(tdSelector);
                }
            }
            else if (dir === 'left') {
                /** @type {?} */
                const nextColumn = this.colGroup.columns[cellIndex - 1];
                if (nextColumn) {
                    td = this.findNextTd(nextColumn);
                }
            }
            else if (dir === 'right') {
                /** @type {?} */
                const nextColumn = this.colGroup.columns[cellIndex + 1];
                if (nextColumn) {
                    td = this.findNextTd(nextColumn);
                }
            }
        }
        return td;
    }
    /**
     * @param {?} dir
     * @param {?} event
     * @return {?}
     */
    selectNextCell(dir, event) {
        /** @type {?} */
        const nextTd = this.findNextCell(this.currentCell.field, dir);
        if (dir === 'up' && !nextTd) {
            return;
        }
        if (nextTd && nextTd.className.indexOf('f-datagrid-cell-rownumber') == -1 && nextTd.className.indexOf('f-datagrid-cell-checkbox') == -1) {
            if (event['code'] === 'Tab' && this.editable && this.editcellWhenTabKeydwon) {
                nextTd['click'].apply(nextTd, [event]);
            }
            else {
                if (nextTd.selectCell) {
                    if (this.selectionMode === 'default') {
                        this.clearCheckeds();
                    }
                    nextTd['selectCell'](event, nextTd);
                }
            }
            // nextTd['selectCell'](event, nextTd);
            return nextTd;
        }
        else {
            /** @type {?} */
            const nextCol = this.colGroup.columns[0];
            /** @type {?} */
            const tdSeletor = `td[field="${nextCol.field}"]`;
            /** @type {?} */
            const tr = this.currentCell.cellElement.parentElement;
            /** @type {?} */
            let _next = tr.nextElementSibling;
            if (dir === 'left') {
                _next = tr.previousElementSibling;
            }
            if (!_next) {
                return;
            }
            // const trDomId = _next.id.replace('_fixedleft','').replace('_fixedright','');
            /** @type {?} */
            const trDomId = Utils.getRowIdByTr(_next);
            /** @type {?} */
            const leftTrSelector = trDomId + '_fixedleft';
            if (_next.id.indexOf('_fixedright') > -1) {
                if (this.colGroup.leftFixed && this.colGroup.leftFixed.length) {
                    // _next = document.querySelector(leftTrSelector);
                    _next = Utils.getTrDomById(leftTrSelector, document);
                }
            }
            if (dir === 'left') {
                if (_next.id.indexOf('_fixedleft') > -1) {
                    // _next = document.querySelector(leftTrSelector);
                    _next = Utils.getTrDomById(leftTrSelector, document);
                }
            }
            /** @type {?} */
            const nextTd = _next.querySelector(tdSeletor);
            if (nextTd && nextTd.selectCell) {
                if (this.selectionMode === 'default') {
                    this.clearCheckeds();
                }
                nextTd.selectCell(event, nextTd);
            }
            /*
            const nextTr = this.dgs.findNextTr(_next, dir === 'left' ? 'up' : 'down');
            if (nextTr && nextTr.tagName === 'TR') {
                // nextTr.children.find(td => td.editCell).editCell();
                let firstEditor = false;
                let i = 0;
                while (!firstEditor) {
                    firstEditor = !!nextTr.children[i].selectCell;
                    if (!firstEditor) {
                        i++;
                    }
                }
                if (nextTr.children[i] && nextTr.children[i].selectCell) {
                    if (this.selectionMode === 'default' ) {
                        this.clearCheckeds();
                    }
                    nextTr.children[i].selectCell(event, nextTr.children[i]);
                }
            }
            */
        }
    }
    /**
     * @param {?} tr
     * @return {?}
     */
    getRowIdByTr(tr) {
        if (tr && tr.className.indexOf('f-datagrid-group-row') > -1) {
            return null;
        }
        // let id = tr.getAttribute('id');
        /** @type {?} */
        let id = Utils.getRowIdByTr(tr);
        if (id == null || id == undefined) {
            return null;
        }
        // id = id.replace('row_', '').replace('_fixedright', '').replace('_fixedleft', '');
        /** @type {?} */
        const rowInfo = this.dfs.findRow(id);
        if (rowInfo) {
            return Object.assign({}, this.dfs.findRow(id), { id });
        }
        return null;
    }
    /**
     * @param {?} index
     * @param {?} data
     * @param {?} id
     * @return {?}
     */
    _beforeSelectRow$(index, data, id) {
        /** @type {?} */
        const beforEventParam = {
            rowIndex: index,
            rowData: data,
            gridInstance: this,
            id: id,
            dr: null
        };
        /** @type {?} */
        let b$ = of(true);
        if (this.beforeSelect) {
            /** @type {?} */
            const rowisSelected = this.dfs.isRowSelected(id);
            if (!rowisSelected) {
                /** @type {?} */
                const _b$ = this.beforeSelect(beforEventParam);
                if (_b$ && _b$.subscribe) {
                    b$ = _b$;
                }
            }
        }
        return b$;
    }
    /**
     * @return {?}
     */
    selectNextRow() {
        if (this.selectedRow) {
            /** @type {?} */
            const tr = this.selectedRow.dr.el.nativeElement;
            if (tr.nextElementSibling) {
                const { id, data, index } = this.getRowIdByTr(tr.nextElementSibling);
                if (id) {
                    this._beforeSelectRow$(index, data, id).subscribe((/**
                     * @param {?} t
                     * @return {?}
                     */
                    (t) => {
                        if (t) {
                            this.selectRow(id, true);
                        }
                    }));
                }
                // tr.nextElementSibling.click();
            }
        }
    }
    /**
     * @return {?}
     */
    selectPrevRow() {
        if (this.selectedRow) {
            /** @type {?} */
            const tr = this.selectedRow.dr.el.nativeElement;
            if (tr.previousElementSibling) {
                // tr.previousElementSibling.click();
                const { id, data, index } = this.getRowIdByTr(tr.previousElementSibling);
                if (id) {
                    this._beforeSelectRow$(index, data, id).subscribe((/**
                     * @param {?} t
                     * @return {?}
                     */
                    (t) => {
                        if (t) {
                            this.selectRow(id, true);
                        }
                    }));
                }
            }
        }
    }
    /**
     * @return {?}
     */
    removeCellSelectedCls() {
        if (this.currentCell && this.currentCell.cellElement) {
            DomHandler.removeClass(this.currentCell.cellElement, CELL_SELECTED_CLS);
            this.render2.removeClass(this.currentCell.cellElement, CELL_EDITING_CLS);
        }
        /** @type {?} */
        const selectedCell = this.el.nativeElement.querySelectorAll('.' + CELL_SELECTED_CLS);
        if (selectedCell.length) {
            selectedCell.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                this.render2.removeClass(n, CELL_SELECTED_CLS);
            }));
        }
    }
    /**
     * 选中行
     * @param {?} id 选中行ID
     * @param {?=} emit 触发select 事件
     * @param {?=} toCurrentPosition 滚动条定位到当前选择中行
     * @return {?}
     */
    selectRow(id, emit = true, toCurrentPosition = false) {
        if (this.selectedRow && this.selectedRow.id === id) {
            if (emit) {
                this.dfs.selectRecord(id);
            }
            if (toCurrentPosition) {
                this.scrollToCurrentRow();
            }
            return;
        }
        /** @type {?} */
        const _selectRow = (/**
         * @return {?}
         */
        () => {
            this.removeCellSelectedCls();
            if (!this.enableSelectRow) {
                return;
            }
            if (!this.multiSelect && this.showCheckbox) {
                this.clearCheckeds(false, false);
            }
            if (this.multiSelect && this.selectionMode === 'default' && !this.enableMorePageSelect) {
                this.clearAll();
            }
            if (id && (!this.selectedRow || this.selectedRow.id != id)) {
                /** @type {?} */
                const row = this.dfs.findRow(id);
                if (row && this.disableRow) {
                    if (this.disableRow(row.data, row.index)) {
                        return;
                    }
                }
                if (emit) {
                    this.dfs.selectRecord(id);
                }
                else {
                    this.dfs.setSelectRow(id, emit);
                    this.selectedRow = this.dfs.getCurrentRow();
                    if (this.checkOnSelect) {
                        this.checkRows([id]);
                    }
                    this.dgs.setSelecedRow.emit({ id, selected: true });
                }
            }
            else {
                if (this.checkOnSelect) {
                    this.checkRows([id]);
                }
            }
            if (toCurrentPosition) {
                this.scrollToCurrentRow();
            }
        });
        if (this.isEditing()) {
            if (this.editMode === 'cell') {
                /** @type {?} */
                const stopEdit = this.currentCell.cellElement.closeEdit();
                if (stopEdit) {
                    stopEdit.subscribe(_selectRow);
                }
            }
            else {
                this.endRowEdit();
                _selectRow();
            }
        }
        else {
            _selectRow();
        }
    }
    /**
     * 滚动条滚动到当前行的位置
     * @return {?}
     */
    scrollToCurrentRow() {
        this.dgs.scrollToCurrentRow.next();
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    unSelectRow(id, emit = true) {
        if (id) {
            this.closeAllCellEditor();
            if (this.currentCell && this.currentCell.rowId == id) {
                this.cancelSelectCell();
            }
            if (emit) {
                this.dfs.selectRecord(id, false);
            }
            else {
                this.dfs.setSelectRow(id, false);
                this.selectedRow = null;
                this.dgs.setSelecedRow.emit({ id, selected: false });
            }
        }
    }
    /**
     * @return {?}
     */
    selectAllRows() {
        if (this.multiSelect && this.enableSelectRow) {
            this.dfs.selectAll();
        }
    }
    /**
     * @return {?}
     */
    cancelSelectCell() {
        if (this.currentCell) {
            if (this.currentCell.cellElement) {
                this.currentCell.cellElement.cancelSelected();
            }
            if (!this.currentCell.isEditing) {
                this.currentCell = null;
                this.dfs.cancelSelectCell();
            }
        }
    }
    /**
     * @param {?=} excludeIds
     * @return {?}
     */
    clearSelections(excludeIds) {
        this.dfs.clearSelections(excludeIds);
        this.selectedRow = null;
        this.cancelSelectCell();
        this.cd.detectChanges();
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    checkRow(id, emit = true) {
        if (this.canOperateCheckbox()) {
            if (emit) {
                this.dfs.checkRecord(id);
            }
            else {
                this.checkRows([id]);
            }
        }
    }
    /**
     * 钩选行，不触发选中事件
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    checkRows(ids, emit = false) {
        if (ids && ids.length) {
            this.dfs.setCheckedRows(ids, true);
            this.dgs.setCheckedRows.next({ ids, checked: true });
            if (this.selectionMode === 'default') {
                this.dfs.updateProperty('selections', this.checkeds);
            }
            // this.cd.detectChanges();
            if (emit) {
                this.checkValues = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * 取消钩选，不触发选中事件
     * @param {?} ids
     * @param {?=} emit
     * @return {?}
     */
    unCheckRows(ids, emit = false) {
        if (ids && ids.length) {
            this.dfs.setCheckedRows(ids, false);
            this.dgs.setCheckedRows.next({ ids, checked: false });
            // this.cd.detectChanges();
            if (emit) {
                this.checkValues = this.checkeds.map((/**
                 * @param {?} r
                 * @return {?}
                 */
                r => r.id));
                this.checkValuesChange.emit(this.checkValues);
                this.checkedChange.emit(this.checkeds);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    checkAllRows(emit = true) {
        if (this.canOperateCheckbox()) {
            this.dfs.checkAll();
            this.dgs.checkAll.emit();
            if (emit) {
                this.checkAll.emit();
            }
        }
    }
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    unCheckRow(id, emit = true) {
        if (this.canOperateCheckbox()) {
            if (this.currentCell && this.currentCell.rowId == id) {
                this.cancelSelectCell();
            }
            if (emit) {
                this.dfs.checkRecord(id, false);
            }
            else {
                this.unCheckRows([id]);
            }
            this.updateAllCheckboxStatus();
        }
    }
    /**
     * 清空钩选行，默认只清空当前页的钩选
     * clearAll: 清空所有 默认为 false; 否则仅清空当前页的钩选数据。
     * @param {?=} clearAll
     * @param {?=} emitUnCheckAll
     * @return {?}
     */
    clearCheckeds(clearAll = false, emitUnCheckAll = true) {
        this.dfs.clearCheckeds(clearAll);
        this.checkValues = [];
        this.cancelSelectCell();
        if (emitUnCheckAll) {
            this.dgs.uncheckAll.emit();
        }
    }
    /**
     * @return {?}
     */
    clearAll() {
        this.selectedRow = null;
        this.checkValues = [];
        this.dfs.clearAll();
        this.dgs.uncheckAll.emit();
        this.updateAllCheckboxStatus();
    }
    //#endregion
    //#region Resize Column
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    getResizeProxyPosLeft(e) {
        /** @type {?} */
        const target = (/** @type {?} */ (e.target));
        /** @type {?} */
        const dgRect = this.getBoundingClientRect(this.dgContainer);
        /** @type {?} */
        const td = target.parentElement;
        /** @type {?} */
        const tdLeft = td.getBoundingClientRect().left;
        /** @type {?} */
        const deltaEdge = td.offsetWidth - (e.pageX - tdLeft);
        this.resizeColumnInfo.proxyLineEdge = deltaEdge;
        this.resizeColumnInfo.startWidth = td.offsetWidth;
        this.resizeColumnInfo.startX = e.pageX;
        this.resizeColumnInfo.left = tdLeft - dgRect.left - 1 + deltaEdge;
        return e.pageX - dgRect.left - 1 + deltaEdge;
    }
    /**
     * @private
     * @param {?=} show
     * @return {?}
     */
    toggleResizeProxy(show = true) {
        /** @type {?} */
        let display = 'block';
        if (!show) {
            display = 'none';
        }
        this.render2.setStyle(this.resizeProxyBg.nativeElement, 'display', display);
        this.render2.setStyle(this.resizeProxy.nativeElement, 'display', display);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onColumnResizeBegin(e) {
        if (this.resizeProxy) {
            this.render2.setStyle(document.body, 'cursor', 'e-resize');
            /** @type {?} */
            const proxy = this.resizeProxy.nativeElement;
            /** @type {?} */
            const proxyPosLeft = this.getResizeProxyPosLeft(e);
            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');
            /** @type {?} */
            let top = 0;
            if ((this.enableFilterRow || this.enableSmartFilter) && this.showFilterBar) {
                top += this.filterBarHeight;
            }
            if (this.showRowGroupPanel) {
                top += this.rowGroupPanelHeight;
            }
            this.render2.setStyle(proxy, 'top', `${top}px`);
            if (!this.autoHeight) {
                this.render2.setStyle(proxy, 'height', (this.height - this.pagerHeight) + 'px');
            }
            else {
                /** @type {?} */
                let bottomH = 0;
                if (this.pagination) {
                    bottomH += this.pagerHeight;
                }
                if (this.showFooter) {
                    bottomH += this.footerHeight;
                }
                this.render2.setStyle(proxy, 'height', `calc(100% - ${bottomH}px)`);
            }
            this.toggleResizeProxy();
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onColumnResize(e) {
        /** @type {?} */
        const proxy = this.resizeProxy.nativeElement;
        /** @type {?} */
        const dgRect = this.getBoundingClientRect(this.dgContainer);
        /** @type {?} */
        const proxyPosLeft = e.pageX - dgRect.left - 1 + this.resizeColumnInfo.proxyLineEdge;
        if (proxyPosLeft - this.resizeColumnInfo.left > 20) {
            this.render2.setStyle(proxy, 'left', proxyPosLeft + 'px');
        }
        else {
            this.render2.setStyle(proxy, 'left', (this.resizeColumnInfo.left + 20) + 'px');
        }
        e.stopPropagation();
        e.preventDefault();
    }
    /**
     * @param {?} e
     * @param {?} col
     * @return {?}
     */
    onColumnResizeEnd(e, col) {
        this.render2.removeStyle(document.body, 'cursor');
        this.toggleResizeProxy(false);
        this.resizeColumnInfo.proxyLineEdge = 0;
        /** @type {?} */
        let newColWidth = this.resizeColumnInfo.startWidth + e.pageX - this.resizeColumnInfo.startX;
        if (newColWidth < 20) {
            newColWidth = 20;
        }
        if (col.width > newColWidth) {
            /** @type {?} */
            const t = col.width - newColWidth;
            if (!this.fitColumns && this.scrollInstance.elementRef.nativeElement.scrollLeft) {
                /** @type {?} */
                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;
                this.scrollInstance.scrollToX(moveLeft);
            }
        }
        if (col.width != newColWidth) {
            col.width = newColWidth;
            if (!this.nowrap && this.showFooter) {
                this.setFooterHeight();
            }
            if (this.useControlPanel && this.settingService) {
                this.settingService.saveUserConfig(this.id).subscribe((/**
                 * @return {?}
                 */
                () => {
                    this.dfs.columnResizeEnd();
                    this.dgs.columnResized.emit();
                }));
                return;
            }
            this.dfs.columnResizeEnd();
            this.dgs.columnResized.emit();
            this.updateFixedColumnCssForFastMode(col);
        }
    }
    /**
     * 还原列宽
     * @return {?}
     */
    restituteColumnsSize() {
        this.dfs.resizeColumns(true);
        this.dgs.columnResized.emit();
    }
    /**
     * 单元格内容自适应列宽
     * @param {?} col
     * @param {?} th
     * @return {?}
     */
    sizeToContent(col, th) {
        if (!this.AutoColumnWidthUseDblclick) {
            return false;
        }
        /** @type {?} */
        let longestText = '';
        /** @type {?} */
        const items = this.data;
        for (let i = items.length - 1; i >= 0; i--) {
            // TFS: 356964 20200203
            /** @type {?} */
            let value = Utils.getValue(col.field, items[i]);
            if (value !== 0) {
                value = value || '';
            }
            /** @type {?} */
            let text = '' + value;
            if (col.formatter && value !== undefined) {
                text = this.colFormatSer.format(value, items[i], col.formatter);
            }
            if (Utils.getBLen(text) > Utils.getBLen(longestText)) {
                longestText = text;
            }
            else {
                this.longTextArea.nativeElement.innerHTML = text;
                /** @type {?} */
                const w1 = this.longTextArea.nativeElement.offsetWidth;
                this.longTextArea.nativeElement.innerHTML = longestText;
                /** @type {?} */
                const w2 = this.longTextArea.nativeElement.offsetWidth;
                if (w1 > w2) {
                    longestText = text;
                }
            }
        }
        this.longTextArea.nativeElement.innerHTML = longestText;
        /** @type {?} */
        const maxWidth = this.longTextArea.nativeElement.offsetWidth + 26;
        this.longTextArea.nativeElement.innerHTML = th.nativeElement.innerText;
        /** @type {?} */
        let thMinWidth = this.longTextArea.nativeElement.offsetWidth + 26;
        if (col.sortable) {
            thMinWidth += 24;
        }
        /** @type {?} */
        let newColWidth = (maxWidth > thMinWidth ? maxWidth : thMinWidth);
        /** @type {?} */
        const colIndex = this.flatColumns.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.field === col.field));
        if (colIndex === this.flatColumns.length - 1) {
            newColWidth += 6;
        }
        if (col.width > newColWidth) {
            /** @type {?} */
            const t = col.width - newColWidth;
            if (this.scrollInstance.elementRef.nativeElement.scrollLeft) {
                /** @type {?} */
                const moveLeft = this.scrollInstance.elementRef.nativeElement.scrollLeft - t;
                this.scrollInstance.scrollToX(moveLeft < 0 ? 0 : moveLeft);
            }
        }
        if (col.width != newColWidth) {
            col.width = newColWidth;
            this.dfs.resizeColumns();
            this.dgs.columnResized.emit();
        }
    }
    //#endregion
    //#region Changes
    /**
     * @return {?}
     */
    getChanges() {
        return this.dfs.getChanges();
    }
    /**
     * @return {?}
     */
    acceptChanges() {
        this.dfs.acceptChanges();
    }
    /**
     * @return {?}
     */
    rejectChanges() {
        this.dfs.rejectChanges();
    }
    //#endregion
    //#region CRUD
    /**
     * @param {?} row
     * @return {?}
     */
    appendRow(row) {
        this.cancelEdit(null);
        this.dfs.appendRow(row);
        this.dataChange.emit(this.dfs.getData());
        this.rowAppended.emit();
    }
    /**
     * @param {?} rowId
     * @param {?} newData
     * @return {?}
     */
    updateRow(rowId, newData) {
        this.dfs.updateRow(rowId, newData);
        // 更新当前数据源中对应的行数据
        this._updateRow(rowId, newData);
        if (this.currentCell && this.currentCell.isEditing && newData) {
            const { column, cellRef } = this.currentCell;
            if (cellRef && column && column.field && column.editor && column.editor.type.toLowerCase() == 'input-group' && Utils.keysInData(column.field, newData)) {
                /** @type {?} */
                const currendRowData = cellRef.rowData;
                /** @type {?} */
                const val = this.commonUtils.getValue(column.field, currendRowData);
                if (cellRef.formControl) {
                    cellRef.formControl.patchValue(val);
                }
            }
        }
        // 更新合计行数据
        this.updateFooterData();
        this.dataChange.emit(this.dfs.getData());
        this.rowUpdated.emit();
        // 启用合并单元格，允许编辑时，合并数据不准确
        if (this.mergeCell) {
            this.refresh();
        }
    }
    /**
     * @private
     * @param {?} rowId
     * @param {?} newData
     * @return {?}
     */
    _updateRow(rowId, newData) {
        /** @type {?} */
        const row = this.getRows().find((/**
         * @param {?} n
         * @return {?}
         */
        (n) => {
            return this.dfs.primaryId(n) === rowId;
        }));
        if (row) {
            if (newData) {
                /** @type {?} */
                const keys = Object.keys(newData);
                keys.forEach((/**
                 * @param {?} field
                 * @return {?}
                 */
                field => {
                    Utils.setValue(field, newData[field], row);
                }));
            }
        }
    }
    /**
     * @param {?} rowId
     * @return {?}
     */
    refreshRow(rowId) {
        /** @type {?} */
        const row = this.dfs.findRow(rowId);
        if (row && row.data) {
            this.dfs.rowUpdate$.emit(row);
        }
        else {
            this.writeConsole('Can not found row by id. id: ' + rowId);
        }
    }
    /**
     * @param {?=} rowId
     * @return {?}
     */
    deleteRow(rowId) {
        this.cancelEdit(rowId, false);
        if (!rowId) {
            if (this.selectValue) {
                rowId = this.selectValue;
            }
            else {
                throw new Error(`删除行时主键标识ID 不能为空。`);
            }
        }
        /** @type {?} */
        const deleteRow = this.dfs.deleteRow(rowId);
        this.dataChange.emit(this.dfs.getData());
        this.currentCell = null;
        this.dfs.updateProperty('currentCell', null);
        this.cd.detectChanges();
        this.rowDeleted.emit(deleteRow);
    }
    /**
     * @return {?}
     */
    validateRow() { }
    /**
     * @return {?}
     */
    insertRow() { }
    //#endregion
    //#region Scrolling
    /**
     * @return {?}
     */
    scrollToLeft() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToLeft(0, 200);
        }
    }
    /**
     * @return {?}
     */
    scrollToRight() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToRight(0, 200);
        }
    }
    /**
     * @return {?}
     */
    scrollToTop() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToTop(0, 100);
            /** @type {?} */
            const scrollInfo = this.dfs.getState().scrollInfo;
            if (scrollInfo) {
                scrollInfo.y = 0;
                this.dfs.updateProperty('scrollInfo', scrollInfo);
            }
        }
    }
    /**
     * @return {?}
     */
    scrollToBottom() {
        if (this.scrollInstance) {
            this.scrollInstance.scrollToBottom(0, 100);
        }
    }
    //#endregion
    /**
     * @private
     * @param {?} cols
     * @param {?} field
     * @param {?=} readonly
     * @return {?}
     */
    _setColumnReadonly(cols, field, readonly = true) {
        if (cols && cols.length && field) {
            /** @type {?} */
            const col = cols.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === field));
            if (col) {
                col.readonly = readonly;
            }
        }
    }
    /**
     * @param {?} field
     * @param {?=} readonly
     * @return {?}
     */
    setColumnReadonly(field, readonly = true) {
        this._setColumnReadonly(this.colGroup.leftFixed, field, readonly);
        this._setColumnReadonly(this.colGroup.rightFixed, field, readonly);
        this._setColumnReadonly(this.colGroup.normalColumns, field, readonly);
    }
    // 是否为多表头
    /**
     * @return {?}
     */
    isMultiHeader() {
        return this.columns && this.columns.length > 1 && Array.isArray(this.columns[1]);
    }
    /**
     * @param {?} fields
     * @param {?=} visible
     * @return {?}
     */
    toggleVisibleColumn(fields, visible = true) {
        if (!this.isMultiHeader()) {
            this.columns.forEach((/**
             * @param {?} cols
             * @return {?}
             */
            (cols) => {
                fields.forEach((/**
                 * @param {?} field
                 * @return {?}
                 */
                field => {
                    /** @type {?} */
                    const col = cols.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => c.field === field || c.id === field));
                    if (col) {
                        col.visible = visible;
                    }
                }));
            }));
        }
        else {
            // 多表头
            /** @type {?} */
            const allCols = flatten(this.columns);
            allCols.forEach((/**
             * @param {?} p
             * @return {?}
             */
            p => {
                if (p.origianlColSpan === undefined) {
                    p.origianlColSpan = p.colspan;
                }
            }));
            fields.forEach((/**
             * @param {?} field
             * @return {?}
             */
            field => {
                /** @type {?} */
                const _col = allCols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => col.field === field || col.id === field));
                if (_col) {
                    if (_col.visible === visible) {
                        return;
                    }
                    _col.visible = visible;
                    /** @type {?} */
                    const parents = DatagridColumnsHelper.getParentColumns(_col, allCols);
                    /** @type {?} */
                    const childs = DatagridColumnsHelper.getChildColumns(_col, allCols);
                    childs.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    c => {
                        c.visible = visible;
                    }));
                    if (visible && childs.length) {
                        _col.colspan = _col.origianlColSpan;
                    }
                    /** @type {?} */
                    const _colspan = _col.colspan || 1;
                    parents.forEach((/**
                     * @param {?} p
                     * @return {?}
                     */
                    p => {
                        if (!visible) {
                            p.colspan = p.colspan - _colspan;
                        }
                        else {
                            /** @type {?} */
                            const _childs = allCols.filter((/**
                             * @param {?} n
                             * @return {?}
                             */
                            n => n.parentId === p.id && n.visible));
                            p.colspan = _childs.reduce((/**
                             * @param {?} r
                             * @param {?} c
                             * @return {?}
                             */
                            (r, c) => {
                                r = r + (c.colspan || 1);
                                return r;
                            }), 0);
                        }
                        p.visible = !!p.colspan;
                    }));
                }
            }));
        }
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getColumn(field) {
        /** @type {?} */
        const allCols = flatten(this.columns);
        return allCols.find((/**
         * @param {?} n
         * @return {?}
         */
        n => n.field === field || n.id === field));
    }
    /**
     * @param {?} field
     * @param {?=} reload
     * @return {?}
     */
    showColumn(field, reload = true) {
        if (typeof field === 'string') {
            this.toggleVisibleColumn([field], true);
        }
        else {
            this.toggleVisibleColumn(field, true);
        }
        this.columnsChanged(reload);
    }
    /**
     * @param {?} field
     * @param {?=} reload
     * @return {?}
     */
    hideColumn(field, reload = true) {
        if (typeof field === 'string') {
            this.toggleVisibleColumn([field], false);
        }
        else {
            this.toggleVisibleColumn(field, false);
        }
        this.columnsChanged(reload);
    }
    /**
     * @param {?} field
     * @param {?} columnObject
     * @param {?=} detectChange
     * @return {?}
     */
    updateColumn(field, columnObject, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            let column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column = Object.assign(column, columnObject);
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} formatter
     * @param {?=} detectChange
     * @return {?}
     */
    setColumnFormatter(field, formatter, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column.formatter = formatter;
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} formatterOptions
     * @param {?=} detectChange
     * @return {?}
     */
    updateColumnFormatterOptions(field, formatterOptions, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column && column.formatter) {
                /** @type {?} */
                const colFormatter = (/** @type {?} */ (column.formatter));
                colFormatter.options = colFormatter.options || {};
                colFormatter.options = Object.assign(colFormatter.options, formatterOptions || {});
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * @param {?} field
     * @param {?} title
     * @param {?=} detectChange
     * @return {?}
     */
    setColumnTitle(field, title, detectChange = true) {
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        (cols) => {
            /** @type {?} */
            const column = cols.find((/**
             * @param {?} col
             * @return {?}
             */
            col => col.field === field));
            if (column) {
                column.title = title;
            }
        }));
        if (detectChange) {
            this.columnsChanged();
        }
    }
    /**
     * 排序
     * @param {?=} sortName 排序字段，如： 'name,age'
     * @param {?=} sortOrder 排序方式，如：'desc, asc'
     * @return {?}
     */
    sort(sortName, sortOrder) {
        if (sortName === null || sortName === '' || sortOrder === null || sortOrder === '') {
            this.clearSort();
        }
        else {
            if (sortName && sortOrder) {
                // this.updateSortInfo(sortName, sortOrder);
                this.sortName = sortName;
                this.sortOrder = sortOrder;
                this.dfs.setSortInfo(this.sortName, this.sortOrder);
            }
            if (!this.remoteSort) {
                this.dfs.clientSort();
            }
            this.onColumnSorted();
        }
    }
    /**
     * @return {?}
     */
    clearSort() {
        this.sortName = '';
        this.sortOrder = '';
        this.dfs.setSortInfo('', '');
        if (!this.remoteSort) {
            if (this.data && this.data.length) {
                this.dfs.clearSort();
            }
        }
        this.onColumnSorted();
    }
    /**
     * @return {?}
     */
    onColumnSorted() {
        /** @type {?} */
        let params = null;
        if (this.sortName && this.sortOrder) {
            /** @type {?} */
            const orders = this.sortOrder.split(',');
            params = this.sortName.split(',').reduce((/**
             * @param {?} r
             * @param {?} n
             * @param {?} i
             * @return {?}
             */
            (r, n, i) => {
                r[n] = orders[i] || 'asc';
                return r;
            }), {});
        }
        if (!this.remoteSort) {
            this.dfs.clientSort();
        }
        this.columnSorted.emit(params);
    }
    /**
     * @param {?} newSortName
     * @param {?} newSortOrder
     * @return {?}
     */
    updateSortInfo(newSortName, newSortOrder) {
        /** @type {?} */
        const sortName = this.sortName;
        /** @type {?} */
        const sortOrder = this.sortOrder;
        /** @type {?} */
        let sortFields = [];
        /** @type {?} */
        let sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        const _sortFields = newSortName.split(',');
        /** @type {?} */
        const _sortOrders = newSortOrder.split(',');
        _sortFields.forEach((/**
         * @param {?} nField
         * @param {?} nIndex
         * @return {?}
         */
        (nField, nIndex) => {
            /** @type {?} */
            const colOrder = _sortOrders[nIndex] || 'asc';
            /** @type {?} */
            let newOrder = colOrder;
            /** @type {?} */
            const i = sortFields.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n === nField));
            if (i >= 0) {
                /** @type {?} */
                const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
                newOrder = _order;
                if (this.multiSort && newOrder === 'asc') {
                    newOrder = undefined;
                    sortFields.splice(i, 1);
                    sortOrders.splice(i, 1);
                }
                else {
                    sortOrders[i] = _order;
                }
            }
            else {
                if (this.multiSort) {
                    sortFields.push(nField);
                    sortOrders.push(colOrder);
                }
                else {
                    sortFields = [nField];
                    sortOrders = [colOrder];
                }
            }
        }));
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
    }
    /**
     * 列设置
     * @param {?} $event
     * @return {?}
     */
    showControlPanel($event) {
        $event.stopPropagation();
        /** @type {?} */
        const self = this;
        if (this.useControlPanel && this.settingService) {
            this.checkSettingHttp();
            this.settingService.show(self);
        }
    }
    /**
     * @return {?}
     */
    checkSettingHttp() {
        if (!this.settingService.httpRestService || !this.settingService.httpRestService.befRepository) {
            /** @type {?} */
            const settingsHttp = this.inject.get(GRID_SETTINGS_HTTP, null);
            this.settingService.httpRestService = settingsHttp;
        }
    }
    /**
     * @param {?=} flag
     * @return {?}
     */
    disableHeader(flag = true) {
        this.dgs.disableHeader.emit(flag);
    }
    /**
     * 获取用户个性化设置
     * @private
     * @param {?} settings
     * @return {?}
     */
    userProfileSetting(settings) {
        const { sortInfo, viewColumns, groupField, columnFormat, expandGroupRows, multiHeaders } = settings;
        /** @type {?} */
        let _sortName;
        /** @type {?} */
        let _sortOrder;
        if (sortInfo) {
            const { sortName, sortOrder } = sortInfo;
            _sortName = sortName;
            _sortOrder = sortOrder;
            if (sortName && sortName.length) {
                this.sortName = sortName.join(',');
                if (sortOrder) {
                    this.sortOrder = sortOrder.join(',');
                }
            }
            this['__sortInfo'] = sortInfo;
        }
        if (this.enableSetMultiHeaders && multiHeaders && (multiHeaders.viewCols || []).length) {
            /** @type {?} */
            const gridInitOptions = this.dfs['_state'].initialOptions;
            /** @type {?} */
            const _cols = this.settingService.getMultiHeaderColumns(multiHeaders.viewCols, gridInitOptions);
            if (_cols) {
                this.columns = _cols;
                this.addControlCol();
            }
        }
        else {
            if (viewColumns && viewColumns.length) {
                this.columns = this.columns.map((/**
                 * @param {?} cols
                 * @return {?}
                 */
                cols => {
                    this.settingService.updateColumnFormat(cols, columnFormat, this);
                    return this.settingService.newVisibleOrderColumns(cols, viewColumns, columnFormat, this);
                }));
                this.addControlCol();
            }
        }
        this.columns.forEach((/**
         * @param {?} cols
         * @return {?}
         */
        cols => {
            cols.forEach((/**
             * @param {?} col
             * @return {?}
             */
            col => {
                if (_sortName && _sortName.length) {
                    /** @type {?} */
                    const i = _sortName.indexOf(col.field);
                    if (i > -1) {
                        col.order = _sortOrder[i];
                    }
                }
                if (!col.field || col.field.indexOf('farris-datagrid-column_') > -1) {
                    col.filter = false;
                }
            }));
        }));
        if (this.groupRows && (groupField !== null && groupField !== undefined)) {
            this.groupField = groupField;
            this.expandGroupRows = expandGroupRows === undefined ? this.expandGroupRows : expandGroupRows;
        }
        this.settingService.setCurrentConfigs(settings);
    }
    // 是否为当前活动的表格
    /**
     * @private
     * @return {?}
     */
    isActived() {
        // 判断grid是否为活动且可见的，避免SPA 下多个grid一起进行相关的操作；比如上下方向键移动
        return DomHandler.hasClass(this.dgContainer.nativeElement, this._active_datagrid_cls) && this.dgContainer.nativeElement.offsetParent;
    }
    // 清理无效的DOM
    /**
     * @private
     * @return {?}
     */
    cleanDom() {
        // 清理 TOOL-TIP
        /** @type {?} */
        const tips = document.querySelectorAll('.datagrid-cell-tooltip');
        if (tips && tips.length) {
            tips.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                n.remove();
            }));
        }
    }
    /**
     * @param {?} col
     * @param {?} rowData
     * @return {?}
     */
    cellIsReadOnly(col, rowData) {
        /** @type {?} */
        let readOnly = false;
        if (this.disableRow) {
            readOnly = this.disableRow(rowData);
        }
        if (!readOnly) {
            if (col.readonly !== undefined) {
                if (typeof col.readonly === 'boolean') {
                    readOnly = col.readonly;
                }
                else if (typeof col.readonly === 'function') {
                    readOnly = col.readonly(rowData);
                }
            }
        }
        return readOnly;
    }
    /**
     * @private
     * @return {?}
     */
    groupFieldChanged() {
        this.columnsChanged();
        if (this.settingService) {
            this.checkSettingHttp();
            this.settingService.saveUserConfig(this.id).subscribe();
        }
        this.groupFieldChange.emit({ newGroupField: this.groupField, grid: this });
    }
    /**
     * @param {?} field
     * @return {?}
     */
    removeGroupField(field) {
        /** @type {?} */
        const fields = this.groupField.split(',');
        /** @type {?} */
        const delIdx = fields.indexOf(field);
        if (delIdx > -1) {
            fields.splice(delIdx, 1).join(',');
        }
        this.groupField = fields.join(',');
        this.toggleVisibleColumn([field], true);
        this.groupFieldChanged();
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    clearAllGrouppingField($event) {
        this.showLoading();
        setTimeout((/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const fields = this.groupField.split(',');
            this.groupField = '';
            this.toggleVisibleColumn(fields, true);
            this.groupFieldChanged();
            this.closeLoading();
        }));
    }
    /**
     * @param {?} groupFields
     * @return {?}
     */
    setGroupFields(groupFields) {
        this.groupField = groupFields;
        this.columnsChanged();
    }
    /**
     * @param {?=} active
     * @return {?}
     */
    activeDataGrid(active = true) {
        /** @type {?} */
        const grids = document.querySelectorAll('.f-datagrid.datagrid-active');
        if (grids.length) {
            grids.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                this.render2.removeClass(n, this._active_datagrid_cls);
            }));
        }
        if (active) {
            this.render2.addClass(this.dgContainer.nativeElement, this._active_datagrid_cls);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onDatagridContainerFocus($event) {
        if (!this.disabled) {
            this.activeDataGrid();
        }
    }
    /**
     * @private
     * @return {?}
     */
    setShadowColumnForFastMode() {
        if (this.fast) {
            /** @type {?} */
            const fixedLeft = this.flatColumns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'left'));
            /** @type {?} */
            const fixedRight = this.flatColumns.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n.fixed === 'right'));
            if (fixedLeft && fixedLeft.length) {
                /** @type {?} */
                let leftWidthTotal = 0;
                if (this.showCheckbox) {
                    leftWidthTotal += 36;
                }
                if (this.showLineNumber) {
                    leftWidthTotal += this.lineNumberWidth;
                }
                fixedLeft.forEach((/**
                 * @param {?} n
                 * @param {?} index
                 * @return {?}
                 */
                (n, index) => {
                    leftWidthTotal += index ? fixedLeft[index - 1].width : 0;
                    n.left = leftWidthTotal;
                }));
                fixedLeft[fixedLeft.length - 1]['leftShadowCol'] = true;
                this.dfs.getColumn(fixedLeft[fixedLeft.length - 1].field)['leftShadowCol'] = true;
            }
            if (fixedRight && fixedRight.length) {
                fixedRight[0]['rightShadowCol'] = true;
                /** @type {?} */
                let rightWidthTotal = fixedRight.reduce((/**
                 * @param {?} r
                 * @param {?} c
                 * @return {?}
                 */
                (r, c) => {
                    return r + c.width;
                }), 0);
                fixedRight.forEach((/**
                 * @param {?} n
                 * @param {?} index
                 * @return {?}
                 */
                (n, index) => {
                    rightWidthTotal -= n.width;
                    n.right = rightWidthTotal;
                }));
                this.dfs.getColumn(fixedRight[0].field)['rightShadowCol'] = true;
            }
        }
    }
    // 单元对齐方式样式动态生成
    /**
     * @private
     * @return {?}
     */
    setCellStyle() {
        if (!this.flatColumns || !this.flatColumns.length) {
            return;
        }
        /** @type {?} */
        const cssarr = [];
        /** @type {?} */
        const verticalAlign = (/**
         * @param {?} column
         * @return {?}
         */
        (column) => {
            /** @type {?} */
            let va = 'center';
            switch (column.valign) {
                case 'top':
                    va = 'flex-start';
                    break;
                case 'bottom':
                    va = 'flex-end';
                    break;
                default:
                    va = 'center';
                    break;
            }
            return va;
        });
        /** @type {?} */
        const horizontalAlign = (/**
         * @param {?} column
         * @return {?}
         */
        (column) => {
            /** @type {?} */
            let ha = 'flex-start';
            if (column.align === 'right') {
                ha = 'flex-end';
            }
            else if (column.align === 'center') {
                ha = 'center';
            }
            return ha;
        });
        this.setShadowColumnForFastMode();
        this.flatColumns.forEach((/**
         * @param {?} col
         * @return {?}
         */
        col => {
            /** @type {?} */
            const css = `${this.customStyleKey()} .cell-text-align__${col.field.replace(/\./g, '_')} {align-items: ${verticalAlign(col)}, justify-content: ${horizontalAlign(col)}}`;
            cssarr.push(css);
            if (this.fast) {
                if (col.fixed === 'left' || col.fixed === 'right') {
                    /** @type {?} */
                    let fixed = `${this.customStyleKey()} .f-datagrid-fast__fixed-${col.fixed}[field="${col.field}"]{`;
                    if (col.fixed === 'left') {
                        fixed += `left: ${col.left}px}`;
                    }
                    if (col.fixed === 'right') {
                        fixed += `right: ${col.right}px}`;
                    }
                    cssarr.push(fixed);
                }
            }
        }));
        this.dgs.appendCssRules(cssarr);
    }
    /**
     * @private
     * @param {?} col
     * @return {?}
     */
    updateFixedColumnCssForFastMode(col) {
        if (this.fast) {
            // update css.
            /** @type {?} */
            const colIndex = this.flatColumns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === col.field));
            /** @type {?} */
            const nextColumn = this.flatColumns[colIndex + 1];
            this.setShadowColumnForFastMode();
            if (nextColumn && nextColumn.fixed) {
                /** @type {?} */
                const ruleName = `${this.customStyleKey()} .f-datagrid-fast__fixed-${nextColumn.fixed}[field="${nextColumn.field}"]`;
                /** @type {?} */
                const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
                this.dgs.appendCssRules([stylecss]);
            }
        }
    }
    /**
     * @param {?} groupRowIndex
     * @return {?}
     */
    expandGroupRow(groupRowIndex) {
        this.dgs.toggleGroupRow$.emit({ expand: true, groupRowIndex });
    }
    /**
     * @param {?} groupRowIndex
     * @return {?}
     */
    collapseGroupRow(groupRowIndex) {
        this.dgs.toggleGroupRow$.emit({ expand: false, groupRowIndex });
    }
    /**
     * @return {?}
     */
    expandAllGroupRows() {
        this.dgs.toggleAllGroupRows$.emit({ expand: true });
    }
    /**
     * @return {?}
     */
    collapseAllGroupRows() {
        this.dgs.toggleAllGroupRows$.emit({ expand: false });
    }
    // #382788 
    /**
     * @private
     * @param {?} conditions
     * @return {?}
     */
    checkFilterValues(conditions) {
        /** @type {?} */
        const _conditions = cloneDeep(conditions);
        if (this.enableSmartFilter) {
            /** @type {?} */
            const filterFields = Array.from(new Set(_conditions.map((/**
             * @param {?} n
             * @return {?}
             */
            n => n.FilterField))));
            filterFields.forEach((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                /** @type {?} */
                const col = this.dfs.getColumn(n);
                if (col && col.dataType === 'datetime') {
                    /** @type {?} */
                    const dateFilters = _conditions.filter((/**
                     * @param {?} f
                     * @return {?}
                     */
                    f => f.FilterField === n));
                    /** @type {?} */
                    const contrlData = this.smartFilterService.controlData.find((/**
                     * @param {?} ctrl
                     * @return {?}
                     */
                    ctrl => ctrl.labelCode == n));
                    /** @type {?} */
                    const val = dateFilters[0].Value;
                    if (val.indexOf(':') === -1) {
                        if (dateFilters.length === 1) {
                            dateFilters[0].Value = val + ' 00:00:00';
                            // 非区间
                            if (contrlData.value.single) {
                                dateFilters[0].Compare = Compare.GreaterOrEqual;
                                /** @type {?} */
                                const less = cloneDeep(dateFilters[0]);
                                less.Value = val + ' 23:59:59';
                                less.Compare = Compare.LessOrEqual;
                                /** @type {?} */
                                const index = _conditions.findIndex((/**
                                 * @param {?} f
                                 * @return {?}
                                 */
                                f => f.FilterField === n));
                                _conditions.splice(index + 1, 0, less);
                            }
                            else {
                                if (contrlData.value.endValue) {
                                    dateFilters[0].Value = val + ' 23:59:59';
                                }
                            }
                        }
                        else {
                            dateFilters[0].Value = dateFilters[0].Value + ' 00:00:00';
                            dateFilters[1].Value = dateFilters[1].Value + ' 23:59:59';
                        }
                    }
                }
            }));
        }
        return _conditions;
    }
    /**
     * @return {?}
     */
    getActionColumn() {
        // 操作列id 由 列表标识_caozuolie
        return flatten(this.dfs.getState().initialOptions.designerColumns).find((/**
         * @param {?} n
         * @return {?}
         */
        (n) => n.id && n.id.indexOf('_caozuolie') > -1));
    }
    /**
     * @return {?}
     */
    hideActionColumn() {
        /** @type {?} */
        const czl = this.getActionColumn();
        if (czl) {
            this.hideColumn(czl.field);
        }
    }
    /**
     * @return {?}
     */
    showActionColumn() {
        /** @type {?} */
        const czl = this.getActionColumn();
        if (czl) {
            this.showColumn(czl.field);
        }
    }
    /**
     * 支持全局设置表头、合计行、数据行、行号列宽、复选框列宽
     * 分页条高度可通过配置样式实现，如：
     *  .f-datagrid-pager {
     * height: 60px!important;
     * }
     *
     * @param {?} sizeConfig
     * @return {?}
     */
    applyNewSize(sizeConfig) {
        if (!sizeConfig || Array.isArray(sizeConfig) || typeof sizeConfig === 'boolean') {
            this.writeConsole('传入的参数类型不匹配！The parameter type is incorrect!', 'warn');
            return;
        }
        /** @type {?} */
        const _maxNum = 100;
        // 默认值
        /** @type {?} */
        const defautlValues = {
            'headerHeight': 35,
            'footerHeight': 31,
            'rowHeight': 31,
            'checkboxColumnWidth': 36,
            'lineNumberWidth': 36,
            'filterRowHeight': 40
        };
        // 有效属性名称
        /** @type {?} */
        const props = ['headerHeight', 'footerHeight', 'rowHeight',
            'checkboxColumnWidth', 'lineNumberWidth', 'filterRowHeight'];
        /** @type {?} */
        const keys = Object.keys(sizeConfig);
        if (keys && keys.length) {
            // 清理不支持的属性；
            keys.forEach((/**
             * @param {?} k
             * @return {?}
             */
            k => {
                if (props.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                n => n === k))) {
                    /** @type {?} */
                    let v = sizeConfig[k];
                    if (v == null || isNaN(v)) {
                        delete sizeConfig[k];
                    }
                    else {
                        if (typeof v === 'string' && !!parseInt(v, 10)) {
                            v = parseInt(v, 10);
                        }
                        else if (typeof v === 'number') {
                            v = Math.floor(v);
                        }
                        // 值设值
                        if (isNaN(v) || v <= 0 || v < defautlValues[k]) {
                            sizeConfig[k] = defautlValues[k];
                        }
                        else {
                            sizeConfig[k] = v > _maxNum ? _maxNum : v;
                        }
                    }
                }
                else {
                    delete sizeConfig[k];
                }
            }));
        }
        /** @type {?} */
        const propKeys = Object.keys(sizeConfig);
        if (propKeys.length) {
            this.useThemes = false;
            Object.assign(this, sizeConfig);
            this._footerRowHeight = this.footerHeight;
            /** @type {?} */
            const minRowHeight = `min_row_height_${this.rowHeight}`;
            this.dgs.removeCssRule(`${this.customStyleKey()} .${minRowHeight}`);
            this.renderCustomStyle2({ style: { "min-height": this.rowHeight + 'px', height: this.rowHeight + 'px' } }, null, minRowHeight);
            /** @type {?} */
            const minFooterRowHeight = `min_footer_row_height_${this._footerRowHeight}`;
            this.dgs.removeCssRule(`${this.customStyleKey()} .${minFooterRowHeight}`);
            this.renderCustomStyle2({ style: { "min-height": `${this._footerRowHeight}px`, height: this.rowHeight + 'px' } }, null, minFooterRowHeight);
            this.dfs['updateState'](sizeConfig, false);
            of(1).pipe(debounceTime(200)).subscribe((/**
             * @return {?}
             */
            () => {
                this.setHeaderHeight();
                this.setRowHeight();
                this.setFooterHeight();
                this.columnsChanged();
                if (!this.nowrap) {
                    this.dgs.cellContentWrapChanged.emit();
                }
            }));
        }
    }
}
DatagridComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-datagrid',
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-08-10 11:02:50\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 15:48:39\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n<div #datagridContainer *ngIf=\"!useHtmlTable\"  tabindex=\"0\" style=\"outline: 0;\" hidefocus=\"true\" class=\"f-datagrid\" [ngStyle]=\"gridSize\"  [attr.id]=\"id\"\r\n    [class.f-datagrid-rowhover]=\"rowHover\" [class.f-datagrid-bordered]=\"showBorder\" [class.f-datagrid-wrap]=\"!nowrap\" [class.f-datagrid-strip]=\"striped\"\r\n    [class.f-datagrid-mergecell]=\"mergeCell\" [class.f-datagrid-enable-highlight]=\"enableHighlightCell\" [class.f-datagrid-fast]=\"fast\" \r\n    [class.highlight-allowedit-cell]=\"enableEditCellStyle && editable\" [class.scrollbar-allways-show]=\"scrollBarShowMode === 'allways'\" [class.scroolbar-arrows]=\"showScrollArrow\"\r\n    [class.f-datagrid-sm]=\"sizeType === 'sm'\" [class.f-datagrid-lg]=\"sizeType === 'lg'\" [class.f-datagrid-xl]=\"sizeType === 'xl'\"\r\n    (focus)=\"onDatagridContainerFocus($event)\" >\r\n    <div class=\"f-datagrid-column-drop-panel d-flex flex-row\" *ngIf=\"showRowGroupPanel\"\r\n        [style.height.px]=\"rowGroupPanelHeight\" [style.top.px]=\"showFilterBar ? (filterBarHeight): 0\"\r\n        [attr.placeholder]=\"groupField ? '': groupRowPanelPlaceholder\" [style.pointer-events]=\"editable ? 'none': ''\">\r\n        <div class=\"row-group-fields flex-fill\" drop-column style=\"display: inline-block!important;\">\r\n            <div class=\"group-field smooth-dnd-draggable-wrapper\" *ngFor=\"let f of groupFields$ | async\">{{ dfs.getColumn(f)?.title }}\r\n                <span class=\"f-icon f-icon-x\" title=\"{{ 'datagrid.groupRow.removeColumn'| locale }}\" (click)=\"removeGroupField(f)\"></span>\r\n            </div>\r\n        </div>\r\n        <button class=\"f-datagrid-clear-group-field btn btn-light ml-auto\"\r\n        title=\"{{'datagrid.groupRow.clearTip' | locale}}\" (click)=\"clearAllGrouppingField($event)\" [style.display]=\"groupField ? '' : 'none'\">\r\n            <span class=\"f-icon f-icon-remove\"></span> {{'datagrid.groupRow.clear' | locale}}\r\n        </button>\r\n    </div>\r\n    \r\n    <filter-toolbar #filterText *ngIf=\"enableFilterRow && showFilterBar\"></filter-toolbar>\r\n    <smart-filter-toolbar #smartfiltertoolbar *ngIf=\"enableSmartFilter && showFilterBar\"\r\n    [height]=\"filterBarHeight\"\r\n    [filterData]=\"smartFilterResult?.controlData || []\" \r\n    (clearFilters)=\"onClearSmartFilters($event)\"\r\n    (removeFilter)=\"onRemoveSmartFilterItem($event)\"\r\n    [padding]=\"showBorder && filterBarHeight ? '3px': ''\"\r\n    (resize)=\"onFilterBarResize($event)\"\r\n    (filterChange)=\"onSmartFilterChange($event)\"></smart-filter-toolbar>\r\n\r\n    <datagrid-header class=\"d-flex flex-fill\" *ngIf=\"showHeader\" #header [fast]=\"fast\"\r\n    [columns]=\"columns\" [columnsGroup]=\"colGroup\" [height]=\"realHeaderHeight\"\r\n    [style.height.px]=\"realHeaderHeight\" style=\"position: relative;width:100%;\" \r\n    [enableDragColumn]=\"enableDragColumn\" [wrapHeader]=\"headerWrap\"\r\n    [enableFilterRow]=\"enableFilterRow\" [scrollbarMode]=\"scrollBarShowMode\"></datagrid-header>\r\n\r\n\r\n    <datagrid-footer [height]=\"footerHeight\" [width]=\"footerWidth\" [columnsGroup]=\"colGroup\" [position]=\"'top'\"\r\n    [columns]=\"colGroup?.normalColumns\" [data]=\"footerData | async\" \r\n    [hasFixedColumns]=\"colGroup?.leftFixed && colGroup?.leftFixed?.length\" [fast]=\"fast\"\r\n    *ngIf=\"(footerPosition==='top' || footerPosition === 'both') && showFooter && ((ds && ds.rows && ds.rows.length) || (footerData | async).length)\"></datagrid-footer>\r\n\r\n    <datagrid-body [columnsGroup]=\"colGroup\" [data]=\"ds.rows | paginate: pagerOpts\" (dataChange)=\"setCurrentPagerData($event)\"\r\n        [startRowIndex]=\"ds.index\" [checkedRows]=\"checkedRows\" cell-tooltip [canvasWidth]=\"colGroup?.totalWidth\"\r\n        [topHideHeight]=\"ds.top\" [bottomHideHeight]=\"ds.bottom\" [footerHeight]=\"footerHeight\"\r\n        [scrollBarMode]=\"scrollBarShowMode\" [contextMenuItems]=\"contextMenus\"  [fast]=\"fast\"></datagrid-body>\r\n\r\n    <datagrid-footer [height]=\"footerHeight\" [width]=\"footerWidth\" [columnsGroup]=\"colGroup\" [position]=\"'bottom'\"\r\n    [columns]=\"colGroup?.normalColumns\" [data]=\"footerData | async\"  [fast]=\"fast\"\r\n    [hasFixedColumns]=\"colGroup?.leftFixed && colGroup?.leftFixed?.length\" \r\n    *ngIf=\"(footerPosition==='bottom' || footerPosition === 'both') && showFooter && ((ds && ds.rows && ds.rows.length) || (footerData | async).length)\"></datagrid-footer>\r\n    \r\n    <datagrid-pager *ngIf=\"pagination\" #dgPager \r\n        [showPageList]=\"showPageList\"\r\n        [id]=\"pagerOpts.id\" [locked]=\"lockPagination\"\r\n        [showPageInfo]=\"showPageInfo\"\r\n        [viewMode]=\"pagerViewMode\"\r\n        [showPageNumber] = \"showPageNumber\"\r\n        [maxSize]=\"pagerLabelSize\"\r\n        [showSelectedList]=\"showSelectedList && multiSelect\"\r\n        [selectedData]=\"checkedRows\"\r\n        [showGotoInput]=\"showGotoInput\"\r\n        (pageChange)=\"onPageChange($event)\"\r\n        (pageSizeChange)=\"onPageSizeChange($event)\"\r\n        (removeSelectedItem)=\"onRemoveSelectedItem($event)\"\r\n        (clearSelectedItem)=\"onClearSelectedItem($event)\"\r\n        [listItemFormatter]=\"selectedItemFormatter\"\r\n        [contentTemplate]=\"pagerContentTemplate\"\r\n        [data]=\"footerData | async\"\r\n        [pagerPos]=\"pagerPos\"\r\n        ></datagrid-pager>\r\n\r\n    <div class=\"f-datagrid-resize-bg\" #resizeProxyBg></div>\r\n    <div #resizeProxy class=\"f-datagrid-resize-proxy\" *ngIf=\"resizeColumn\"></div>\r\n    \r\n    <datagrid-loading *ngIf=\"loading\"></datagrid-loading>\r\n    <div style=\"position: absolute; left: -1000px; top: -1000px;visibility: hidden;\" #longTextArea></div>\r\n    <div class=\"f-datagrid-disabled\" style=\"position: absolute;\r\n        background: #fff;\r\n        height: 100%;\r\n        width: 100%;\r\n        z-index: 99;\r\n        opacity: .3;\" *ngIf=\"disabled\">\r\n    </div>\r\n</div>\r\n\r\n\r\n<div #datagridContainer\r\nclass=\"f-datagrid f-datagrid-htmltable\" [attr.id]=\"id\"\r\n[class.f-datagrid-rowhover]=\"rowHover\"\r\n[class.f-datagrid-bordered]=\"showBorder\"\r\n[class.f-datagrid-wrap]=\"!nowrap\"\r\n[class.f-datagrid-strip]=\"striped\" \r\n[class.f-datagrid-md]=\"sizeType === 'md'\"\r\n[class.f-datagrid-sm]=\"sizeType === 'sm'\" [class.f-datagrid-lg]=\"sizeType === 'lg'\" [class.f-datagrid-xl]=\"sizeType === 'xl'\"\r\n*ngIf=\"useHtmlTable\" style=\"border-right: 0px; border-bottom: 0px; overflow: auto\">\r\n\r\n    <auto-height [columnsGroup]=\"colGroup\" [columns]=\"columns\" [data]=\"ds.rows\"></auto-height>\r\n</div>\r\n",
                encapsulation: ViewEncapsulation.None,
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    DatagridFacadeService,
                    DatagridService,
                    DatagridSmartFilterService
                ],
                exportAs: 'datagrid',
                styles: [`.f-datagrid-header table{
            background-color: #F1F3F7;
        }
        .scrollbar-allways-show .ps.ps--active-x > .ps__rail-x {
            margin-right: 0px!important;
        }
        .scrollbar-allways-show .ps.ps--active-y > .ps__rail-y {
            margin-bottom: 0px!important;
        }
        .scrollbar-allways-show .ps.ps--active-x.ps--active-y > .ps__rail-x {
            margin-right: 18px!important;
        }
        .scrollbar-allways-show .ps.ps--active-x.ps--active-y > .ps__rail-y {
            margin-bottom: 18px!important;
        }

        `]
            }] }
];
/** @nocollapse */
DatagridComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: ElementRef },
    { type: Injector },
    { type: NgZone },
    { type: DatagridFacadeService },
    { type: DatagridService },
    { type: ApplicationRef },
    { type: DomSanitizer },
    { type: Renderer2 }
];
DatagridComponent.propDecorators = {
    fast: [{ type: Input }],
    pos: [{ type: HostBinding, args: ['style.position',] }],
    hostCls: [{ type: HostBinding, args: ['class.f-datagrid-full',] }],
    autoHeightCls: [{ type: HostBinding, args: ['class.f-datagrid-auto-height',] }],
    useThemes: [{ type: Input }],
    id: [{ type: Input }],
    useHtmlTable: [{ type: Input }],
    autoHeight: [{ type: Input }],
    maxHeight: [{ type: Input }],
    showBorder: [{ type: Input }],
    striped: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    showHeader: [{ type: Input }],
    headerHeight: [{ type: Input }],
    headerWrap: [{ type: Input }],
    showFooter: [{ type: Input }],
    footerHeight: [{ type: Input }],
    footerDataFrom: [{ type: Input }],
    footerTemplate: [{ type: Input }],
    footerComponentType: [{ type: Input }],
    footerPosition: [{ type: Input }],
    footerStyler: [{ type: Input }],
    rowHeight: [{ type: Input }],
    sizeType: [{ type: Input }],
    fit: [{ type: Input }],
    fitColumns: [{ type: Input }],
    autoFitColumns: [{ type: Input }],
    disabled: [{ type: Input }],
    scrollBarShowMode: [{ type: Input }],
    scrollBarOptions: [{ type: Input }],
    showScrollArrow: [{ type: Input }],
    resizeColumn: [{ type: Input }],
    showLineNumber: [{ type: Input }],
    lineNumberTitle: [{ type: Input }],
    lineNumberWidth: [{ type: Input }],
    checkboxColumnWidth: [{ type: Input }],
    rowHover: [{ type: Input }],
    clickToEdit: [{ type: Input }],
    lockPagination: [{ type: Input }],
    pagination: [{ type: Input }],
    pagerContentTemplate: [{ type: Input }],
    pagerPos: [{ type: Input }],
    pagerViewMode: [{ type: Input }],
    pagerOnServer: [{ type: Input }],
    pageList: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pagerHeight: [{ type: Input }],
    showPageList: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    pagerLabelSize: [{ type: Input }],
    showGotoInput: [{ type: Input }],
    enableMorePageSelect: [{ type: Input }],
    showSelectedList: [{ type: Input }],
    selectedItemFormatter: [{ type: Input }],
    cellTipTimer: [{ type: Input }],
    controlPaginationState: [{ type: Input }],
    total: [{ type: Input }],
    enableSelectRow: [{ type: Input }],
    multiSelect: [{ type: Input }],
    showCheckbox: [{ type: Input }],
    showAllCheckbox: [{ type: Input }],
    onlySelectSelf: [{ type: Input }],
    checkOnSelect: [{ type: Input }],
    selectOnCheck: [{ type: Input }],
    selectionMode: [{ type: Input }],
    keepSelect: [{ type: Input }],
    useBlankWhenDataIsEmpty: [{ type: Input }],
    emptyDataHeight: [{ type: Input }],
    emptyMessage: [{ type: Input }],
    emptyTemplate: [{ type: Input }],
    emptyComponentType: [{ type: Input }],
    idField: [{ type: Input }],
    url: [{ type: Input }],
    data: [{ type: Input }],
    footerData: [{ type: Input }],
    endEditByInvalid: [{ type: Input }],
    columns: [{ type: Input }],
    fields: [{ type: Input }],
    nowrap: [{ type: Input }],
    virtualized: [{ type: Input }],
    virtualizedAsyncLoad: [{ type: Input }],
    rowStyler: [{ type: Input }],
    editMode: [{ type: Input }],
    editable: [{ type: Input }],
    enableEditCellStyle: [{ type: Input }],
    selectOnEditing: [{ type: Input }],
    editorHeight: [{ type: Input }],
    remoteSort: [{ type: Input }],
    sortName: [{ type: Input }],
    sortOrder: [{ type: Input }],
    multiSort: [{ type: Input }],
    hoverRowCls: [{ type: Input }],
    enableDragColumn: [{ type: Input }],
    rowGroupPanelHeight: [{ type: Input }],
    groupRows: [{ type: Input }],
    groupFooter: [{ type: Input }],
    expandGroupRows: [{ type: Input }],
    groupFooterStyler: [{ type: Input }],
    groupSummaryPosition: [{ type: Input }],
    groupCellColSpan: [{ type: Input }],
    groupField: [{ type: Input }],
    showGroupColumn: [{ type: Input }],
    groupFormatter: [{ type: Input }],
    groupStyler: [{ type: Input }],
    showRowGroupPanel: [{ type: Input }],
    AutoColumnWidthUseDblclick: [{ type: Input }],
    disableRow: [{ type: Input }],
    useDefaultFilter: [{ type: Input }],
    enableSmartFilter: [{ type: Input }],
    enableFilterRow: [{ type: Input }],
    remoteFilter: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    filterBarHeight: [{ type: Input }],
    filterRowHeight: [{ type: Input }],
    conditions: [{ type: Input }],
    selectValue: [{ type: Input }],
    checkValues: [{ type: Input }],
    selectValues: [{ type: Input }],
    mergeCell: [{ type: Input }],
    mergeFields: [{ type: Input }],
    enableClientSortForMergeCell: [{ type: Input }],
    useControlPanel: [{ type: Input }],
    enableSimpleMode: [{ type: Input }],
    controlPanelMode: [{ type: Input }],
    enableScheme: [{ type: Input }],
    defaultSchemeName: [{ type: Input }],
    enableSetMultiHeaders: [{ type: Input }],
    maxMultiHeaders: [{ type: Input }],
    showConfirmWhenSchemeChanged: [{ type: Input }],
    stopPropagation: [{ type: Input }],
    closeOtherGridEditor: [{ type: Input }],
    clearSelectionsWhenDataIsEmpty: [{ type: Input }],
    enableContextMenu: [{ type: Input }],
    contextMenus: [{ type: Input }],
    beforeShowContextMenus: [{ type: Input }],
    selectValueChange: [{ type: Output }],
    checkValuesChange: [{ type: Output }],
    selectValuesChange: [{ type: Output }],
    beforeEdit: [{ type: Input }],
    beginEdit: [{ type: Output }],
    afterEdit: [{ type: Input }],
    endEdit: [{ type: Output }],
    cancelEdited: [{ type: Output }],
    scrollY: [{ type: Output }],
    pageSizeChanged: [{ type: Output }],
    pageChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    emptyData: [{ type: Output }],
    filterChanged: [{ type: Output }],
    beforeSelect: [{ type: Input }],
    beforeUnselect: [{ type: Input }],
    beforeCheck: [{ type: Input }],
    beforeUncheck: [{ type: Input }],
    beforeSortColumn: [{ type: Input }],
    beforeLoad: [{ type: Input }],
    enableHighlightCell: [{ type: Input }],
    checkedRowsDataFromSource: [{ type: Input }],
    editcellWhenTabKeydwon: [{ type: Input }],
    beforeClickCell: [{ type: Output }],
    dblclickRow: [{ type: Output }],
    selectChanged: [{ type: Output }],
    unSelect: [{ type: Output }],
    selectAll: [{ type: Output }],
    unSelectAll: [{ type: Output }],
    scrollYLoad: [{ type: Output }],
    checked: [{ type: Output }],
    unChecked: [{ type: Output }],
    checkAll: [{ type: Output }],
    unCheckAll: [{ type: Output }],
    checkedChange: [{ type: Output }],
    columnSorted: [{ type: Output }],
    rowClick: [{ type: Output }],
    rowAppended: [{ type: Output }],
    rowDeleted: [{ type: Output }],
    rowUpdated: [{ type: Output }],
    dataChange: [{ type: Output }],
    lastCellEnterHandler: [{ type: Output }],
    groupFieldChange: [{ type: Output }],
    columnMoved: [{ type: Output }],
    cellClick: [{ type: Output }],
    resized: [{ type: Output }],
    dgColumns: [{ type: ContentChildren, args: [DatagridColumnDirective,] }],
    dgPager: [{ type: ViewChild, args: ['dgPager',] }],
    resizeProxy: [{ type: ViewChild, args: ['resizeProxy',] }],
    resizeProxyBg: [{ type: ViewChild, args: ['resizeProxyBg',] }],
    dgContainer: [{ type: ViewChild, args: ['datagridContainer',] }],
    longTextArea: [{ type: ViewChild, args: ['longTextArea',] }],
    smartFilterToolbar: [{ type: ViewChild, args: ['smartfiltertoolbar',] }],
    exitRowEditingWhenBodyClick: [{ type: Input }],
    onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.auther;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.version;
    /** @type {?} */
    DatagridComponent.prototype.__component_type__;
    /**
     * 启用性能优化版，默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.fast;
    /** @type {?} */
    DatagridComponent.prototype.pos;
    /** @type {?} */
    DatagridComponent.prototype.hostCls;
    /**
     * 使用主题
     * @type {?}
     */
    DatagridComponent.prototype.useThemes;
    /** @type {?} */
    DatagridComponent.prototype.id;
    /**
     * 自动高度 - 启用此属性后，就是一个普普通通的 table , 不能编辑，不能排序，不能分页，不能... 就是一凡胎
     * @type {?}
     */
    DatagridComponent.prototype.useHtmlTable;
    /**
     * 自动高度
     * @type {?}
     */
    DatagridComponent.prototype.autoHeight;
    /**
     * 配合 autoHeight 一起使用，当此值大于0 时，且autoHeight 为true时，数据总行高达到最大高度时，将停止自动高度并使用内部滚动条
     * @type {?}
     */
    DatagridComponent.prototype.maxHeight;
    /**
     * 显示边框
     * @type {?}
     */
    DatagridComponent.prototype.showBorder;
    /**
     * 启用斑马线
     * @type {?}
     */
    DatagridComponent.prototype.striped;
    /**
     * 宽度
     * @type {?}
     */
    DatagridComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    DatagridComponent.prototype.height;
    /**
     * 显示表头
     * @type {?}
     */
    DatagridComponent.prototype.showHeader;
    /**
     * 表头-单行高度
     * @type {?}
     */
    DatagridComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    DatagridComponent.prototype.headerWrap;
    /**
     * 显示页脚
     * @type {?}
     */
    DatagridComponent.prototype.showFooter;
    /**
     * 页脚默认行高
     * @type {?}
     */
    DatagridComponent.prototype.footerHeight;
    /**
     * 页脚数据来源, 默认为 client
     * @type {?}
     */
    DatagridComponent.prototype.footerDataFrom;
    /**
     * 页脚合计行模板
     * @type {?}
     */
    DatagridComponent.prototype.footerTemplate;
    /** @type {?} */
    DatagridComponent.prototype.footerComponentType;
    /**
     * 合计行显示位置，默认为底部
     * @type {?}
     */
    DatagridComponent.prototype.footerPosition;
    /**
     * 页脚行自定义样式
     * @type {?}
     */
    DatagridComponent.prototype.footerStyler;
    /**
     * 行高
     * @type {?}
     */
    DatagridComponent.prototype.rowHeight;
    /**
     * 设置grid 行高尺寸
     * sm: 小，md: 正常， lg: 大，xl: 超大
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._sizeType;
    /**
     * 填充容器
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fit;
    /**
     * 如果为真，则自动展开/收缩列的大小以适合网格宽度并防止水平滚动。
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fitColumns;
    /**
     * 根据grid的宽度自动调整列宽度
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._autoFitColumns;
    /**
     * 禁用
     * @type {?}
     */
    DatagridComponent.prototype.disabled;
    /**
     * 滚动条显示模式，默认为 auto
     * @type {?}
     */
    DatagridComponent.prototype.scrollBarShowMode;
    /** @type {?} */
    DatagridComponent.prototype.scrollBarOptions;
    /**
     * 当滚动一直显示时，是否显示两端的箭头
     * @type {?}
     */
    DatagridComponent.prototype.showScrollArrow;
    /**
     * 可拖动列设置列宽
     * @type {?}
     */
    DatagridComponent.prototype.resizeColumn;
    /**
     * 显示行号
     * @type {?}
     */
    DatagridComponent.prototype.showLineNumber;
    /**
     * 行号表头字符
     * @type {?}
     */
    DatagridComponent.prototype.lineNumberTitle;
    /**
     * 行号宽度
     * @type {?}
     */
    DatagridComponent.prototype.lineNumberWidth;
    /**
     * 复选框列宽度，默认 36px
     * @type {?}
     */
    DatagridComponent.prototype.checkboxColumnWidth;
    /**
     * 鼠标滑过效果开关，默认开启
     * @type {?}
     */
    DatagridComponent.prototype.rowHover;
    /**
     * 允许编辑时，单击进入编辑状态; false为双击进入编辑
     * @type {?}
     */
    DatagridComponent.prototype.clickToEdit;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._lockPagination;
    /**
     * 分页信息
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.__pagination;
    /**
     * 分页组件自定义内容区模板
     * @type {?}
     */
    DatagridComponent.prototype.pagerContentTemplate;
    /**
     * 分页条对齐展示方式， left, right, center   默认为 right
     * @type {?}
     */
    DatagridComponent.prototype.pagerPos;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    DatagridComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    DatagridComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    DatagridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    DatagridComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    DatagridComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    DatagridComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    DatagridComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    DatagridComponent.prototype.pagerLabelSize;
    /**
     * 显示转至指定页码输入框
     * @type {?}
     */
    DatagridComponent.prototype.showGotoInput;
    /**
     * 启用跨页多选
     * @type {?}
     */
    DatagridComponent.prototype.enableMorePageSelect;
    /**
     * 显示选中列表
     * @type {?}
     */
    DatagridComponent.prototype.showSelectedList;
    /**
     * 选中列表中，每条记录显示的内容
     * @type {?}
     */
    DatagridComponent.prototype.selectedItemFormatter;
    /**
     * 单元格信息提示延时，默认 1000ms
     * @type {?}
     */
    DatagridComponent.prototype.cellTipTimer;
    /**
     * grid 内部处理分页状态
     * @type {?}
     */
    DatagridComponent.prototype.controlPaginationState;
    /**
     * 总记录数
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._total;
    /**
     * 启用选中行
     * @type {?}
     */
    DatagridComponent.prototype.enableSelectRow;
    /**
     * 启用多选
     * @type {?}
     */
    DatagridComponent.prototype.multiSelect;
    /**
     * 启用多选时，是否显示checkbox
     * @type {?}
     */
    DatagridComponent.prototype.showCheckbox;
    /**
     * 显示全选checkbox
     * @type {?}
     */
    DatagridComponent.prototype.showAllCheckbox;
    /**
     * 当启用多选时，点击行选中，只允许且只有一行被选中。, 默认为 true
     * @type {?}
     */
    DatagridComponent.prototype.onlySelectSelf;
    /**
     * 启用多选且显示checkbox, 选中行同时钩选, 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.checkOnSelect;
    /**
     * 启用多选且显示checkbox, 钩选后选中行, 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.selectOnCheck;
    /**
     * 行选中模式，custom: 自定义， default: 仿Windows资源管理器选中
     * 注意： 此属性仅多选，显示复选框有效
     * 默认值： custom
     * addTime: 2021-12-14 by LUCAS HUANG
     * @type {?}
     */
    DatagridComponent.prototype.selectionMode;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    DatagridComponent.prototype.keepSelect;
    /**
     * 当数据为空时，使用空白显示，且高度为一行的高度。 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.useBlankWhenDataIsEmpty;
    /**
     * 数据为空时的高度
     * @type {?}
     */
    DatagridComponent.prototype.emptyDataHeight;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    DatagridComponent.prototype.emptyMessage;
    /**
     * 无数据时的模板
     * @type {?}
     */
    DatagridComponent.prototype.emptyTemplate;
    /** @type {?} */
    DatagridComponent.prototype.emptyComponentType;
    /**
     * 主键字段
     * @type {?}
     */
    DatagridComponent.prototype.idField;
    /**
     * 请求数据源的URL
     * @type {?}
     */
    DatagridComponent.prototype.url;
    /**
     * 数据源
     * @type {?}
     */
    DatagridComponent.prototype.data;
    /**
     * 页脚数据
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._footerData;
    /**
     * 验证不通过时可以结束编辑
     * @type {?}
     */
    DatagridComponent.prototype.endEditByInvalid;
    /**
     * 列集合
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._columns;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._fields;
    /**
     * 禁止数据折行，默认值：true,即在一行显示，不折行。
     * @type {?}
     */
    DatagridComponent.prototype.nowrap;
    /**
     * 虚拟加载
     * @type {?}
     */
    DatagridComponent.prototype.virtualized;
    /**
     * 是否启用异步加载数据
     * @type {?}
     */
    DatagridComponent.prototype.virtualizedAsyncLoad;
    /**
     * 行样式
     * @type {?}
     */
    DatagridComponent.prototype.rowStyler;
    /**
     * 编辑方式： row(整行编辑)、cell(单元格编辑)；默认为 row
     * @type {?}
     */
    DatagridComponent.prototype.editMode;
    /**
     * 编辑状态
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._editable;
    /**
     * 启用可编辑单元格样式。
     * @type {?}
     */
    DatagridComponent.prototype.enableEditCellStyle;
    /**
     * 进入编辑状态时选是否选中文本；默认为 false
     * 仅文本框支持此特性
     * @type {?}
     */
    DatagridComponent.prototype.selectOnEditing;
    /**
     * 编辑器高度
     * @type {?}
     */
    DatagridComponent.prototype.editorHeight;
    /**
     * 启用远端排序
     * @type {?}
     */
    DatagridComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    DatagridComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    DatagridComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    DatagridComponent.prototype.multiSort;
    /** @type {?} */
    DatagridComponent.prototype.hoverRowCls;
    /**
     * 允许拖拽列顺序
     * @type {?}
     */
    DatagridComponent.prototype.enableDragColumn;
    /**
     * 行分组面板高度，默认 50PX
     * @type {?}
     */
    DatagridComponent.prototype.rowGroupPanelHeight;
    /**
     * 启用分组行
     * @type {?}
     */
    DatagridComponent.prototype.groupRows;
    /**
     * 启用行分组合计行
     * @type {?}
     */
    DatagridComponent.prototype.groupFooter;
    /**
     * 分组行是否展开，默认为 展开
     * @type {?}
     */
    DatagridComponent.prototype.expandGroupRows;
    /**
     * 分组合计行自定义样式：
     * 允许的值为
     * - { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } }
     * - (groupFooterRowData): { cls: 'cssclassname, ', style: { color: 'red', border: 1px solid } } => {}
     * @type {?}
     */
    DatagridComponent.prototype.groupFooterStyler;
    /**
     * 合计数据显示位置
     * inGroupRow: 与分组在同一行，分别相关合计字段对齐
     * groupFooterRow: 在分组数据最后增加一行
     * 默认为 groupFooterRow
     * @type {?}
     */
    DatagridComponent.prototype.groupSummaryPosition;
    /**
     * 分组信息合并列数
     * 默认为 1
     * @type {?}
     */
    DatagridComponent.prototype.groupCellColSpan;
    /**
     * 分组字段名称, 多字段分组以英文逗号分隔
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._groupField;
    /** @type {?} */
    DatagridComponent.prototype.groupFields$;
    /**
     * 显示分组列
     * @type {?}
     */
    DatagridComponent.prototype.showGroupColumn;
    /**
     * 分组格式化
     * @type {?}
     */
    DatagridComponent.prototype.groupFormatter;
    /**
     * 分组行样式
     * @type {?}
     */
    DatagridComponent.prototype.groupStyler;
    /**
     * 显示分组列面板。默认为 false
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._showRowGroupPanel;
    /**
     * 双击表头适应内容宽度
     * @type {?}
     */
    DatagridComponent.prototype.AutoColumnWidthUseDblclick;
    /**
     * 行钩选及选中禁用表达式
     * @type {?}
     */
    DatagridComponent.prototype.disableRow;
    /**
     * 使用内部过滤器; 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.useDefaultFilter;
    /**
     * 过滤图标与排序图标合并，此属性与 enableFilterRow 互斥
     * @type {?}
     */
    DatagridComponent.prototype.enableSmartFilter;
    /**
     * 显示过滤行
     * @type {?}
     */
    DatagridComponent.prototype.enableFilterRow;
    /**
     * 服务器端过滤
     * @type {?}
     */
    DatagridComponent.prototype.remoteFilter;
    /**
     * 启用过滤条件显示条
     * @type {?}
     */
    DatagridComponent.prototype.showFilterBar;
    /**
     * 过滤条件汇总条高度，默认 32px
     * @type {?}
     */
    DatagridComponent.prototype.filterBarHeight;
    /** @type {?} */
    DatagridComponent.prototype.filterRowHeight;
    /** @type {?} */
    DatagridComponent.prototype.conditions;
    /** @type {?} */
    DatagridComponent.prototype.selectValue;
    /** @type {?} */
    DatagridComponent.prototype.checkValues;
    /** @type {?} */
    DatagridComponent.prototype.selectValues;
    /**
     * 合并单元格；先支持纵向合并
     * @type {?}
     */
    DatagridComponent.prototype.mergeCell;
    /** @type {?} */
    DatagridComponent.prototype.mergeFields;
    /**
     * 合并单元格数据启用客户端排序
     * @type {?}
     */
    DatagridComponent.prototype.enableClientSortForMergeCell;
    /**
     * 使用高级控制面板(列设置)
     * @type {?}
     */
    DatagridComponent.prototype.useControlPanel;
    /**
     * 启用简洁控制面板模式。默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.enableSimpleMode;
    /**
     * 点击列设置图标，默认打开的控制面板
     * @type {?}
     */
    DatagridComponent.prototype.controlPanelMode;
    /**
     * 启用列设置方案
     * @type {?}
     */
    DatagridComponent.prototype.enableScheme;
    /**
     * 系统预制方案名称
     * @type {?}
     */
    DatagridComponent.prototype.defaultSchemeName;
    /**
     * 多表头启用列设置; 默认 false
     * @type {?}
     */
    DatagridComponent.prototype.enableSetMultiHeaders;
    /**
     * 允许运行时列设置中可设置的最大表头数（包含数据列）；默认为 3层
     * @type {?}
     */
    DatagridComponent.prototype.maxMultiHeaders;
    /**
     * 列设置方案变化后，弹出方案变更提示，默认为false,修改保存到当前方案中
     * @type {?}
     */
    DatagridComponent.prototype.showConfirmWhenSchemeChanged;
    /**
     * 阻止click 事件冒泡
     * @type {?}
     */
    DatagridComponent.prototype.stopPropagation;
    /**
     * (202105 弃用)
     * 点击单元格进行编辑状态时，关闭其他Grid的编辑器。默认 false，
     * 多个列表存时，仅有一个列表中有编辑状态，其他列表结束编辑
     * @type {?}
     */
    DatagridComponent.prototype.closeOtherGridEditor;
    /**
     * 当数据源为空时，清空已选记录, 默认 true
     * @type {?}
     */
    DatagridComponent.prototype.clearSelectionsWhenDataIsEmpty;
    /**
     * 启用右键菜单，默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.enableContextMenu;
    /**
     * 右键菜单数据
     * @type {?}
     */
    DatagridComponent.prototype.contextMenus;
    /** @type {?} */
    DatagridComponent.prototype.beforeShowContextMenus;
    /** @type {?} */
    DatagridComponent.prototype.selectValueChange;
    /** @type {?} */
    DatagridComponent.prototype.checkValuesChange;
    /** @type {?} */
    DatagridComponent.prototype.selectValuesChange;
    /** @type {?} */
    DatagridComponent.prototype.beforeEdit;
    /** @type {?} */
    DatagridComponent.prototype.beginEdit;
    /** @type {?} */
    DatagridComponent.prototype.afterEdit;
    /** @type {?} */
    DatagridComponent.prototype.endEdit;
    /** @type {?} */
    DatagridComponent.prototype.cancelEdited;
    /** @type {?} */
    DatagridComponent.prototype.scrollY;
    /** @type {?} */
    DatagridComponent.prototype.pageSizeChanged;
    /** @type {?} */
    DatagridComponent.prototype.pageChanged;
    /** @type {?} */
    DatagridComponent.prototype.loadSuccess;
    /** @type {?} */
    DatagridComponent.prototype.emptyData;
    /** @type {?} */
    DatagridComponent.prototype.filterChanged;
    /** @type {?} */
    DatagridComponent.prototype.beforeSelect;
    /** @type {?} */
    DatagridComponent.prototype.beforeUnselect;
    /** @type {?} */
    DatagridComponent.prototype.beforeCheck;
    /** @type {?} */
    DatagridComponent.prototype.beforeUncheck;
    /** @type {?} */
    DatagridComponent.prototype.beforeSortColumn;
    /** @type {?} */
    DatagridComponent.prototype.beforeLoad;
    /**
     * 启用选中单元格高亮显示
     * @type {?}
     */
    DatagridComponent.prototype.enableHighlightCell;
    /**
     * 选中的数据始终从数据源中获取. 默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.checkedRowsDataFromSource;
    /**
     * 当前单元格为只读时，使用tab 键跳到下个单元格时，是否允许进入编辑状态，默认为 false;
     * 默认情况下，当前单元格只读，按TAB跳到下个CELL 时，选中CELL ，回车进入编辑。
     * 开启后，下个单元格自动进入编辑状态。
     * @type {?}
     */
    DatagridComponent.prototype.editcellWhenTabKeydwon;
    /**
     * 单元格点击前事件
     * @type {?}
     */
    DatagridComponent.prototype.beforeClickCell;
    /** @type {?} */
    DatagridComponent.prototype.dblclickRow;
    /** @type {?} */
    DatagridComponent.prototype.selectChanged;
    /** @type {?} */
    DatagridComponent.prototype.unSelect;
    /** @type {?} */
    DatagridComponent.prototype.selectAll;
    /** @type {?} */
    DatagridComponent.prototype.unSelectAll;
    /**
     * 异步请求虚拟加载
     * @type {?}
     */
    DatagridComponent.prototype.scrollYLoad;
    /** @type {?} */
    DatagridComponent.prototype.checked;
    /** @type {?} */
    DatagridComponent.prototype.unChecked;
    /** @type {?} */
    DatagridComponent.prototype.checkAll;
    /** @type {?} */
    DatagridComponent.prototype.unCheckAll;
    /** @type {?} */
    DatagridComponent.prototype.checkedChange;
    /** @type {?} */
    DatagridComponent.prototype.columnSorted;
    /** @type {?} */
    DatagridComponent.prototype.rowClick;
    /** @type {?} */
    DatagridComponent.prototype.rowAppended;
    /** @type {?} */
    DatagridComponent.prototype.rowDeleted;
    /** @type {?} */
    DatagridComponent.prototype.rowUpdated;
    /** @type {?} */
    DatagridComponent.prototype.dataChange;
    /**
     * 最后一行的最后单元格回车处理事件
     * @type {?}
     */
    DatagridComponent.prototype.lastCellEnterHandler;
    /**
     * 分组字段变化后
     * @type {?}
     */
    DatagridComponent.prototype.groupFieldChange;
    /**
     * 拖动列改变列显示位置后触发
     * @type {?}
     */
    DatagridComponent.prototype.columnMoved;
    /**
     * 单元格点击事件
     * @type {?}
     */
    DatagridComponent.prototype.cellClick;
    /** @type {?} */
    DatagridComponent.prototype.resized;
    /** @type {?} */
    DatagridComponent.prototype.dgColumns;
    /** @type {?} */
    DatagridComponent.prototype.dgPager;
    /** @type {?} */
    DatagridComponent.prototype.resizeProxy;
    /** @type {?} */
    DatagridComponent.prototype.resizeProxyBg;
    /** @type {?} */
    DatagridComponent.prototype.dgContainer;
    /** @type {?} */
    DatagridComponent.prototype.longTextArea;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterToolbar;
    /** @type {?} */
    DatagridComponent.prototype.colGroup;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._loading;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._selectedRow;
    /** @type {?} */
    DatagridComponent.prototype.ds;
    /** @type {?} */
    DatagridComponent.prototype.pagerOpts;
    /** @type {?} */
    DatagridComponent.prototype.restService;
    /** @type {?} */
    DatagridComponent.prototype.editors;
    /** @type {?} */
    DatagridComponent.prototype.validators;
    /** @type {?} */
    DatagridComponent.prototype.currentCell;
    /** @type {?} */
    DatagridComponent.prototype.flatColumns;
    /** @type {?} */
    DatagridComponent.prototype.footerWidth;
    /** @type {?} */
    DatagridComponent.prototype.clickDelay;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.resizeColumnInfo;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.ro;
    /** @type {?} */
    DatagridComponent.prototype.subscriptions;
    /** @type {?} */
    DatagridComponent.prototype.realHeaderHeight;
    /** @type {?} */
    DatagridComponent.prototype.isSingleClick;
    /** @type {?} */
    DatagridComponent.prototype.docuemntCellClickEvents;
    /** @type {?} */
    DatagridComponent.prototype.documentCellClickHandler;
    /** @type {?} */
    DatagridComponent.prototype.documentCellKeydownEvents;
    /** @type {?} */
    DatagridComponent.prototype.documentCellKeydownHandler;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.modalClickEvent;
    /** @type {?} */
    DatagridComponent.prototype.documentRowKeydownHandler;
    /** @type {?} */
    DatagridComponent.prototype.documentRowEditKeydownHanlder;
    /** @type {?} */
    DatagridComponent.prototype.documentClickEndRowEditHandler;
    /** @type {?} */
    DatagridComponent.prototype.pending;
    /** @type {?} */
    DatagridComponent.prototype.colFormatSer;
    /** @type {?} */
    DatagridComponent.prototype.scrollInstance;
    /** @type {?} */
    DatagridComponent.prototype.localeService;
    /** @type {?} */
    DatagridComponent.prototype.mergeCellInfo;
    /** @type {?} */
    DatagridComponent.prototype.ignoreTarget;
    /** @type {?} */
    DatagridComponent.prototype.clientFilterService;
    /** @type {?} */
    DatagridComponent.prototype.settingService;
    /**
     * 控制列字段名称: _datagrid-setting-control_
     *
     * @type {?}
     */
    DatagridComponent.prototype.ControlPanelFeild;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._isResized;
    /** @type {?} */
    DatagridComponent.prototype.gridSize;
    /** @type {?} */
    DatagridComponent.prototype.clientFilterChanged;
    /** @type {?} */
    DatagridComponent.prototype.styleSheetId;
    /** @type {?} */
    DatagridComponent.prototype.groupRowPanelPlaceholder;
    /** @type {?} */
    DatagridComponent.prototype.commonUtils;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterService;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterResult;
    /** @type {?} */
    DatagridComponent.prototype.smartFilterBarHeight;
    /** @type {?} */
    DatagridComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._active_datagrid_cls;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._blured_datagrid_cls;
    /** @type {?} */
    DatagridComponent.prototype._custom_datagrid_cls;
    /** @type {?} */
    DatagridComponent.prototype.sms;
    /** @type {?} */
    DatagridComponent.prototype.focusRowIndex;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.documentBodyMouseDown;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.farrisInstances;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.currentPagerData;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.resizeTimer;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.debugSer;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.DATA_CHANGED_TIMER;
    /**
     * 当bodyclick 时，是否退出行编辑状态，默认为 false
     * @type {?}
     */
    DatagridComponent.prototype.exitRowEditingWhenBodyClick;
    /** @type {?} */
    DatagridComponent.prototype.formValidations;
    /** @type {?} */
    DatagridComponent.prototype.isFF;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype._footerRowHeight;
    /** @type {?} */
    DatagridComponent.prototype.trackByRows;
    /** @type {?} */
    DatagridComponent.prototype.onDocumentMouseDown;
    /** @type {?} */
    DatagridComponent.prototype.cd;
    /** @type {?} */
    DatagridComponent.prototype.el;
    /** @type {?} */
    DatagridComponent.prototype.inject;
    /** @type {?} */
    DatagridComponent.prototype.zone;
    /** @type {?} */
    DatagridComponent.prototype.dfs;
    /** @type {?} */
    DatagridComponent.prototype.dgs;
    /**
     * @type {?}
     * @private
     */
    DatagridComponent.prototype.app;
    /**
     * @type {?}
     * @protected
     */
    DatagridComponent.prototype.domSanitizer;
    /** @type {?} */
    DatagridComponent.prototype.render2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1kYXRhZ3JpZC8iLCJzb3VyY2VzIjpbImxpYi9kYXRhZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVdBLE9BQU8sRUFDSCxTQUFTLEVBQVUsS0FBSyxFQUFFLGlCQUFpQixFQUMzQyxlQUFlLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUM1Qyx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUM5RCxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBaUIsY0FBYyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQzVHLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUV6RCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsRUFBRSxFQUFrQyxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0UsT0FBTyxFQUF1RCxnQkFBZ0IsRUFBa0IsTUFBTSxxQkFBcUIsQ0FBQztBQUM1SCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUMzRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUN6RixPQUFPLEVBQVksZ0JBQWdCLEVBQUUsa0JBQWtCLEVBQWUsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRixPQUFPLEVBQWUsc0JBQXNCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLHFCQUFxQixFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLFNBQVMsRUFBRSxZQUFZ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QUFxQjs7SUFDckIsbUNBQXVCOztJQUFFLGlDQUFtQjs7SUFDNUMsZ0NBQWlDOztJQUNqQyxnQ0FBMkI7Ozs7O0lBQzNCLGdDQUEyQjs7Ozs7SUFDM0IseUNBQW9DOztJQUNwQyxvQ0FBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOS0wOC0wNiAwNzo0MzowN1xyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0zMCAxNjo0Mjo1MVxyXG4gKiBAUVE6IDEwNTU4MTgyMzlcclxuICogQFZlcnNpb246IHYwLjguMFxyXG4gKiAtIDIwMjEvMDQvMDcg5aKe5YqgIGVuYWJsZUhpZ2hsaWdodENlbGwg5bGe5oCn77yM5pSv5oyB6YCJ5Lit5Y2V5YWD5qC86auY5LquXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0VuY2Fwc3VsYXRpb24sXHJcbiAgICBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFJlbmRlcmVyMiwgT25EZXN0cm95LCBPbkNoYW5nZXMsXHJcbiAgICBTaW1wbGVDaGFuZ2VzLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yLCBIb3N0QmluZGluZyxcclxuICAgIEFmdGVyQ29udGVudEluaXQsIE5nWm9uZSwgRWxlbWVudFJlZiwgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0LCBBcHBsaWNhdGlvblJlZiwgVGVtcGxhdGVSZWYsIEhvc3RMaXN0ZW5lciwgRG9DaGVja1xyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcclxuaW1wb3J0IHsgRm9ybUdyb3VwLCBWYWxpZGF0b3JGbiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcbmltcG9ydCB7IG9mLCBTdWJzY3JpcHRpb24sIE9ic2VydmFibGUsIGZyb20sIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBEYXRhQ29sdW1uLCBDdXN0b21TdHlsZSwgTW92ZURpcmVjdGlvbiwgQ29sdW1uR3JvdXAsIENvbHVtbkZpbHRlclR5cGUsIENlbGxUZW1wbGF0ZUZuIH0gZnJvbSAnLi90eXBlcy9kYXRhLWNvbHVtbic7XHJcbmltcG9ydCB7IERhdGFncmlkRmFjYWRlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZGF0YWdyaWQtZmFjYWRlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vY29tcG9uZW50cy9jb2x1bW5zL2RhdGFncmlkLWNvbHVtbi5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBDZWxsSW5mbywgSWdub3JlUHJvcGVydGllcywgSVNfR1JPVVBfUk9XX0ZJRUxELCBTZWxlY3RlZFJvdyB9IGZyb20gJy4vc2VydmljZXMvc3RhdGUnO1xyXG5pbXBvcnQgeyBSZXN0U2VydmljZSwgREFUQUdSSURfUkVTVF9TRVJWSUNFRSB9IGZyb20gJy4vc2VydmljZXMvcmVzdC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YWdyaWRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kYXRhZ3JpZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgR1JJRF9FRElUT1JTLCBDRUxMX1NFTEVDVEVEX0NMUywgR1JJRF9WQUxJREFUT1JTLCBTSVpFX1RZUEUsIEdSSURfU0VUVElOR1NfU0VSVklDRSwgR1JJRF9TRVRUSU5HU19IVFRQLCBDRUxMX0VESVRJTkdfQ0xTLCBUUl9QUkVGSVgsIFRSX0lEX1BSRUZJWCwgU2l6ZUNvbmZpZyB9IGZyb20gJy4vdHlwZXMvY29uc3RhbnQnO1xyXG5pbXBvcnQgeyBEb21IYW5kbGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9kb21oYW5kbGVyJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMsIERlYnVnU2VydmljZSwgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBXRUJBUElfUFJFRklYX1RPS0VOIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQgeyBDb2x1bW5Gb3JtYXRTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vY29sdW1uJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgY2xvbmVEZWVwIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyRGlyZWN0aXZlIH0gZnJvbSAnLi9zY3JvbGxiYXIvc2Nyb2xsYmFyLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IEJlZm9yRXZlbnRQYXJhbSwgUm93RWRpdFBhcmFtIH0gZnJvbSAnLi90eXBlcy9ldmVudC1wYXJhbXMnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbHVtbnNIZWxwZXIgfSBmcm9tICcuL3NlcnZpY2VzL2RhdGFncmlkLWNvbHVtbnMuaGVscGVyJztcclxuaW1wb3J0IHsgRGF0YWdyaWRGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9kYXRhZ3JpZC1maWx0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgbWFwLCBzd2l0Y2hNYXAsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7IFNtYXJ0RmlsdGVyVG9vbGJhckNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9maWx0ZXItdG9vbGJhci9zbWFydC1maWx0ZXItdG9vbGJhci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZFNtYXJ0RmlsdGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZGF0YWdyaWQtc21hcnQtZmlsdGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJZFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcbmltcG9ydCB7IFNlbGVjdGlvbk1vZGVTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9zZWxlY3Rpb24tbW9kZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29udGV4dE1lbnVJdGVtIH0gZnJvbSAnQGZhcnJpcy91aS1jb250ZXh0LW1lbnUnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBDb21wYXJlLCBGaWx0ZXJDb25kaXRpb24gfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi90eXBlcyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRhdGFncmlkJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kYXRhZ3JpZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBEYXRhZ3JpZEZhY2FkZVNlcnZpY2UsXHJcbiAgICAgICAgRGF0YWdyaWRTZXJ2aWNlLFxyXG4gICAgICAgIERhdGFncmlkU21hcnRGaWx0ZXJTZXJ2aWNlXHJcbiAgICBdLFxyXG4gICAgZXhwb3J0QXM6ICdkYXRhZ3JpZCcsXHJcbiAgICBzdHlsZXM6W1xyXG4gICAgICAgIGAuZi1kYXRhZ3JpZC1oZWFkZXIgdGFibGV7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGMUYzRjc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zY3JvbGxiYXItYWxsd2F5cy1zaG93IC5wcy5wcy0tYWN0aXZlLXggPiAucHNfX3JhaWwteCB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMHB4IWltcG9ydGFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNjcm9sbGJhci1hbGx3YXlzLXNob3cgLnBzLnBzLS1hY3RpdmUteSA+IC5wc19fcmFpbC15IHtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4IWltcG9ydGFudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNjcm9sbGJhci1hbGx3YXlzLXNob3cgLnBzLnBzLS1hY3RpdmUteC5wcy0tYWN0aXZlLXkgPiAucHNfX3JhaWwteCB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMThweCFpbXBvcnRhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5zY3JvbGxiYXItYWxsd2F5cy1zaG93IC5wcy5wcy0tYWN0aXZlLXgucHMtLWFjdGl2ZS15ID4gLnBzX19yYWlsLXkge1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxOHB4IWltcG9ydGFudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIERhdGFncmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIE9uQ2hhbmdlcywgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCwgRG9DaGVjayB7XHJcbiAgICBwcml2YXRlIGF1dGhlciA9IGBMdWNhcyBIdWFuZyAtIFFROjEwNTU4MTgyMzlgO1xyXG4gICAgcHJpdmF0ZSB2ZXJzaW9uID0gJzAuOC54JztcclxuICAgIF9fY29tcG9uZW50X3R5cGVfXyA9ICdEYXRhZ3JpZENvbXBvbmVudCc7XHJcblxyXG4gICAgLyoqIOWQr+eUqOaAp+iDveS8mOWMlueJiO+8jOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgZmFzdCA9IGZhbHNlO1xyXG5cclxuICAgIEBIb3N0QmluZGluZygnc3R5bGUucG9zaXRpb24nKSBwb3MgPSAncmVsYXRpdmUnO1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLWRhdGFncmlkLWZ1bGwnKSBob3N0Q2xzID0gZmFsc2U7XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLmYtZGF0YWdyaWQtYXV0by1oZWlnaHQnKSBnZXQgYXV0b0hlaWdodENscygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRvSGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgLyoqIOS9v+eUqOS4u+mimCAqL1xyXG4gICAgQElucHV0KCkgdXNlVGhlbWVzID0gdHJ1ZTtcclxuICAgIC8vIOeUqOS6juWtmOWCqOeUqOaIt+S4quaAp+WMluiuvue9rlxyXG4gICAgQElucHV0KCkgaWQgPSAnJztcclxuICAgIC8qKiDoh6rliqjpq5jluqYgLSDlkK/nlKjmraTlsZ7mgKflkI7vvIzlsLHmmK/kuIDkuKrmma7mma7pgJrpgJrnmoQgdGFibGUgLCDkuI3og73nvJbovpHvvIzkuI3og73mjpLluo/vvIzkuI3og73liIbpobXvvIzkuI3og70uLi4g5bCx5piv5LiA5Yeh6IOOICovXHJcbiAgICBASW5wdXQoKSB1c2VIdG1sVGFibGUgPSBmYWxzZTtcclxuICAgIC8qKiDoh6rliqjpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGF1dG9IZWlnaHQgPSBmYWxzZTtcclxuICAgIC8qKiDphY3lkIggYXV0b0hlaWdodCDkuIDotbfkvb/nlKjvvIzlvZPmraTlgLzlpKfkuo4wIOaXtu+8jOS4lGF1dG9IZWlnaHQg5Li6dHJ1ZeaXtu+8jOaVsOaNruaAu+ihjOmrmOi+vuWIsOacgOWkp+mrmOW6puaXtu+8jOWwhuWBnOatouiHquWKqOmrmOW6puW5tuS9v+eUqOWGhemDqOa7muWKqOadoSAqL1xyXG4gICAgQElucHV0KCkgbWF4SGVpZ2h0ID0gMDtcclxuXHJcbiAgICAvKiog5pi+56S66L655qGGICovXHJcbiAgICBASW5wdXQoKSBzaG93Qm9yZGVyID0gZmFsc2U7XHJcbiAgICAvKiog5ZCv55So5paR6ams57q/ICAqL1xyXG4gICAgQElucHV0KCkgc3RyaXBlZCA9IHRydWU7XHJcbiAgICAvKiog5a695bqmICovXHJcbiAgICBASW5wdXQoKSB3aWR0aCA9IDgwMDtcclxuICAgIC8qKiDpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGhlaWdodCA9IDMwMDtcclxuXHJcbiAgICAvKiog5pi+56S66KGo5aS0ICovXHJcbiAgICBASW5wdXQoKSBzaG93SGVhZGVyID0gdHJ1ZTtcclxuICAgIC8qKiDooajlpLQt5Y2V6KGM6auY5bqmICovXHJcbiAgICBASW5wdXQoKSBoZWFkZXJIZWlnaHQgPSAzNTtcclxuICAgIC8qKiDooajlpLTmipjooYwgKi9cclxuICAgIEBJbnB1dCgpIGhlYWRlcldyYXAgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrpobXohJogKi9cclxuICAgIEBJbnB1dCgpIHNob3dGb290ZXIgPSBmYWxzZTtcclxuICAgIC8qKiDpobXohJrpu5jorqTooYzpq5ggKi9cclxuICAgIEBJbnB1dCgpIGZvb3RlckhlaWdodCA9IDI5O1xyXG5cclxuXHJcbiAgICAvKiog6aG16ISa5pWw5o2u5p2l5rqQLCDpu5jorqTkuLogY2xpZW50ICovXHJcbiAgICBASW5wdXQoKSBmb290ZXJEYXRhRnJvbTogJ3NlcnZlcicgfCAnY2xpZW50JyA9ICdjbGllbnQnO1xyXG4gICAgLyoqIOmhteiEmuWQiOiuoeihjOaooeadvyAqL1xyXG4gICAgQElucHV0KCkgZm9vdGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgQElucHV0KCkgZm9vdGVyQ29tcG9uZW50VHlwZTogQ2VsbFRlbXBsYXRlRm47XHJcbiAgICAvKiog5ZCI6K6h6KGM5pi+56S65L2N572u77yM6buY6K6k5Li65bqV6YOoICovXHJcbiAgICBASW5wdXQoKSBmb290ZXJQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJyB8ICdib3RoJyA9ICdib3R0b20nO1xyXG4gICAgLyoqIOmhteiEmuihjOiHquWumuS5ieagt+W8jyAqL1xyXG4gICAgQElucHV0KCkgZm9vdGVyU3R5bGVyOiAoKSA9PiB7IGNscz86IHN0cmluZywgc3R5bGU/OiBhbnkgfTtcclxuICAgIC8qKiDooYzpq5ggKi9cclxuICAgIEBJbnB1dCgpIHJvd0hlaWdodCA9IDI5O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572uZ3JpZCDooYzpq5jlsLrlr7hcclxuICAgICAqIHNtOiDlsI/vvIxtZDog5q2j5bi477yMIGxnOiDlpKfvvIx4bDog6LaF5aSnXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3NpemVUeXBlOiAnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnID0gJ3NtJztcclxuICAgIGdldCBzaXplVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZVR5cGU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgc2l6ZVR5cGUodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fc2l6ZVR5cGUgPSB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWhq+WFheWuueWZqCAqL1xyXG4gICAgcHJpdmF0ZSBfZml0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBnZXQgZml0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXQ7XHJcbiAgICB9XHJcbiAgICBzZXQgZml0KHZhbDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2ZpdCA9IHZhbDtcclxuICAgICAgICB0aGlzLmhvc3RDbHMgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKiog5aaC5p6c5Li655yf77yM5YiZ6Ieq5Yqo5bGV5byAL+aUtue8qeWIl+eahOWkp+Wwj+S7pemAguWQiOe9keagvOWuveW6puW5tumYsuatouawtOW5s+a7muWKqOOAgiAqL1xyXG4gICAgcHJpdmF0ZSBfZml0Q29sdW1ucyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZ2V0IGZpdENvbHVtbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpdENvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgZml0Q29sdW1ucyh2YWw6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodGhpcy5fZml0Q29sdW1ucyAhPT0gdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpdENvbHVtbnMgPSB2YWw7XHJcbiAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rml0Q29sdW1ucyh2YWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuZml0Q29sdW1ucyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5pbml0Q29sdW1ucyhmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RpdHV0ZUNvbHVtbnNTaXplKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5qC55o2uZ3JpZOeahOWuveW6puiHquWKqOiwg+aVtOWIl+WuveW6piAqL1xyXG4gICAgcHJpdmF0ZSBfYXV0b0ZpdENvbHVtbnMgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGdldCBhdXRvRml0Q29sdW1ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b0ZpdENvbHVtbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b0ZpdENvbHVtbnModmFsKSB7XHJcbiAgICAgICAgdGhpcy5fYXV0b0ZpdENvbHVtbnMgPSB2YWw7XHJcbiAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2F1dG9GaXRDb2x1bW5zJywgdmFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog56aB55SoICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmu5rliqjmnaHmmL7npLrmqKHlvI/vvIzpu5jorqTkuLogYXV0b1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzY3JvbGxCYXJTaG93TW9kZTogJ2F1dG8nIHwgJ2FsbHdheXMnID0gJ2F1dG8nO1xyXG4gICAgQElucHV0KCkgc2Nyb2xsQmFyT3B0aW9ucyA9IHtcclxuICAgICAgICB3aWR0aDogMTgsXHJcbiAgICAgICAgaGVpZ2h0OiAxOFxyXG4gICAgfTtcclxuICAgIC8qKiDlvZPmu5rliqjkuIDnm7TmmL7npLrml7bvvIzmmK/lkKbmmL7npLrkuKTnq6/nmoTnrq3lpLQgKi9cclxuICAgIEBJbnB1dCgpIHNob3dTY3JvbGxBcnJvdyA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDlj6/mi5bliqjliJforr7nva7liJflrr0gKi9cclxuICAgIEBJbnB1dCgpIHJlc2l6ZUNvbHVtbiA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66KGM5Y+3ICovXHJcbiAgICBASW5wdXQoKSBzaG93TGluZU51bWJlciA9IGZhbHNlO1xyXG4gICAgLyoqIOihjOWPt+ihqOWktOWtl+espiAqL1xyXG4gICAgQElucHV0KCkgbGluZU51bWJlclRpdGxlID0gJyc7XHJcbiAgICAvKiog6KGM5Y+35a695bqmICovXHJcbiAgICBASW5wdXQoKSBsaW5lTnVtYmVyV2lkdGggPSAzNjtcclxuICAgIC8qKiDlpI3pgInmoYbliJflrr3luqbvvIzpu5jorqQgMzZweCAqL1xyXG4gICAgQElucHV0KCkgY2hlY2tib3hDb2x1bW5XaWR0aCA9IDM2O1xyXG4gICAgLyoqIOm8oOagh+a7kei/h+aViOaenOW8gOWFs++8jOm7mOiupOW8gOWQryAqL1xyXG4gICAgQElucHV0KCkgcm93SG92ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOWFgeiuuOe8lui+keaXtu+8jOWNleWHu+i/m+WFpee8lui+keeKtuaAgTsgZmFsc2XkuLrlj4zlh7vov5vlhaXnvJbovpEgKi9cclxuICAgIEBJbnB1dCgpIGNsaWNrVG9FZGl0ID0gdHJ1ZTtcclxuXHJcbiAgICBwcml2YXRlIF9sb2NrUGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOmUgeWumuWIhumhteadoe+8jOmUgeWumuWQjumhteeggeeCueWHu+aXoOaViCAqL1xyXG4gICAgQElucHV0KCkgZ2V0IGxvY2tQYWdpbmF0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NrUGFnaW5hdGlvbjtcclxuICAgIH1cclxuICAgIHNldCBsb2NrUGFnaW5hdGlvbih2YWw6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9sb2NrUGFnaW5hdGlvbiA9IHZhbDtcclxuICAgICAgICBpZiAodGhpcy5kZ1BhZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGdQYWdlclt2YWwgPyAnbG9jaycgOiAndW5sb2NrJ10oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIhumhteS/oeaBryAqL1xyXG4gICAgcHJpdmF0ZSBfX3BhZ2luYXRpb24gPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2V0IHBhZ2luYXRpb24odmFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX19wYWdpbmF0aW9uICE9PSB2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fX3BhZ2luYXRpb24gPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdwYWdpbmF0aW9uJywgdmFsKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBwYWdpbmF0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9fcGFnaW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5YiG6aG157uE5Lu26Ieq5a6a5LmJ5YaF5a655Yy65qih5p2/ICovXHJcbiAgICBASW5wdXQoKSBwYWdlckNvbnRlbnRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiA9IG51bGw7XHJcbiAgICAvKiog5YiG6aG15p2h5a+56b2Q5bGV56S65pa55byP77yMIGxlZnQsIHJpZ2h0LCBjZW50ZXIgICDpu5jorqTkuLogcmlnaHQgICovXHJcbiAgICBASW5wdXQoKSBwYWdlclBvczogJ2xlZnQnfCdjZW50ZXInfCAncmlnaHQnID0gJ3JpZ2h0JztcclxuXHJcbiAgICAvKiog5YiG6aG15p2h5pi+56S65qih5byP77yMIGRlZmF1bHQsIHNpbXBsZSAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJWaWV3TW9kZSA9ICdkZWZhdWx0JztcclxuICAgIC8qKiDlkK/nlKjmnI3liqHlmajnq6/liIbpobUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5b2T5YmN6aG156CBICovXHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZVNpemUgPSAyMDtcclxuICAgIC8qKiDliIbpobXljLrpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VySGVpZ2h0ID0gNTY7XHJcbiAgICAvKiog5pi+56S65q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrliIbpobXkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CBICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CB5pyA5aSn5pWw6YePICovXHJcbiAgICBASW5wdXQoKSBwYWdlckxhYmVsU2l6ZSA9IDc7XHJcbiAgICAvKiog5pi+56S66L2s6Iez5oyH5a6a6aG156CB6L6T5YWl5qGGICovXHJcbiAgICBASW5wdXQoKSBzaG93R290b0lucHV0ID0gZmFsc2U7XHJcbiAgICAvKiog5ZCv55So6Leo6aG15aSa6YCJICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVNb3JlUGFnZVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgLyoqIOaYvuekuumAieS4reWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgc2hvd1NlbGVjdGVkTGlzdCA9IGZhbHNlO1xyXG4gICAgLyoqIOmAieS4reWIl+ihqOS4re+8jOavj+adoeiusOW9leaYvuekuueahOWGheWuuSAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0ZWRJdGVtRm9ybWF0dGVyOiAoZGF0YSkgPT4gc3RyaW5nO1xyXG4gICAgLyoqIOWNleWFg+agvOS/oeaBr+aPkOekuuW7tuaXtu+8jOm7mOiupCAxMDAwbXMgKi9cclxuICAgIEBJbnB1dCgpIGNlbGxUaXBUaW1lciA9IDEwMDA7XHJcbiAgICAvKiogZ3JpZCDlhoXpg6jlpITnkIbliIbpobXnirbmgIEgKi9cclxuICAgIEBJbnB1dCgpIGNvbnRyb2xQYWdpbmF0aW9uU3RhdGUgPSB0cnVlO1xyXG4gICAgLyoqIOaAu+iusOW9leaVsCAqL1xyXG4gICAgcHJpdmF0ZSBfdG90YWwgPSAwO1xyXG4gICAgZ2V0IHRvdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSBzZXQgdG90YWwodmFsOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl90b3RhbCA9IHZhbDtcclxuICAgICAgICB0aGlzLnBhZ2VyT3B0cy50b3RhbEl0ZW1zID0gdmFsO1xyXG4gICAgICAgIGlmICghdGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzLml0ZW1zUGVyUGFnZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kZnMuc2V0VG90YWwodmFsKTtcclxuICAgIH1cclxuICAgIC8qKiDlkK/nlKjpgInkuK3ooYwgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVNlbGVjdFJvdyA9IHRydWU7XHJcbiAgICAvKiog5ZCv55So5aSa6YCJICovXHJcbiAgICBASW5wdXQoKSBtdWx0aVNlbGVjdCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOWkmumAieaXtu+8jOaYr+WQpuaYvuekumNoZWNrYm94ICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2hlY2tib3ggPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrlhajpgIljaGVja2JveCAqL1xyXG4gICAgQElucHV0KCkgc2hvd0FsbENoZWNrYm94ID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5ZCv55So5aSa6YCJ5pe277yM54K55Ye76KGM6YCJ5Lit77yM5Y+q5YWB6K645LiU5Y+q5pyJ5LiA6KGM6KKr6YCJ5Lit44CCLCDpu5jorqTkuLogdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgb25seVNlbGVjdFNlbGYgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOWkmumAieS4lOaYvuekumNoZWNrYm94LCDpgInkuK3ooYzlkIzml7bpkqnpgIksIOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgY2hlY2tPblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOWkmumAieS4lOaYvuekumNoZWNrYm94LCDpkqnpgInlkI7pgInkuK3ooYwsIOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgc2VsZWN0T25DaGVjayA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDooYzpgInkuK3mqKHlvI/vvIxjdXN0b206IOiHquWumuS5ie+8jCBkZWZhdWx0OiDku79XaW5kb3dz6LWE5rqQ566h55CG5Zmo6YCJ5LitXHJcbiAgICAgKiDms6jmhI/vvJog5q2k5bGe5oCn5LuF5aSa6YCJ77yM5pi+56S65aSN6YCJ5qGG5pyJ5pWIXHJcbiAgICAgKiDpu5jorqTlgLzvvJogY3VzdG9tXHJcbiAgICAgKiBhZGRUaW1lOiAyMDIxLTEyLTE0IGJ5IExVQ0FTIEhVQU5HXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdGlvbk1vZGU6ICdjdXN0b20nIHwgJ2RlZmF1bHQnID0gJ2N1c3RvbSc7XHJcbiAgICAvKipcclxuICAgICAqIOWNleWHu+ihjOmAieS4reWQju+8jOWcqOasoeeCueWHu+S4jeS8muiiq+WPlua2iOmAieS4reeKtuaAgTtcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkga2VlcFNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5b2T5pWw5o2u5Li656m65pe277yM5L2/55So56m655m95pi+56S677yM5LiU6auY5bqm5Li65LiA6KGM55qE6auY5bqm44CCIOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgdXNlQmxhbmtXaGVuRGF0YUlzRW1wdHkgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5pWw5o2u5Li656m65pe255qE6auY5bqmICovXHJcbiAgICBASW5wdXQoKSBlbXB0eURhdGFIZWlnaHQgPSAyNDA7XHJcbiAgICAvKiog56m65pWw5o2u5pe277yM5pi+56S655qE5o+Q56S65paH5pysICovXHJcbiAgICBASW5wdXQoKSBlbXB0eU1lc3NhZ2UgPSAn5pqC5peg5pWw5o2uJztcclxuICAgIC8qKiDml6DmlbDmja7ml7bnmoTmqKHmnb8gKi9cclxuICAgIEBJbnB1dCgpIGVtcHR5VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gPSBudWxsO1xyXG4gICAgQElucHV0KCkgZW1wdHlDb21wb25lbnRUeXBlOiBDZWxsVGVtcGxhdGVGbiA9IG51bGw7XHJcblxyXG4gICAgLyoqIOS4u+mUruWtl+autSAqL1xyXG4gICAgQElucHV0KCkgaWRGaWVsZCA9ICdpZCc7XHJcbiAgICAvKiog6K+35rGC5pWw5o2u5rqQ55qEVVJMICovXHJcbiAgICBASW5wdXQoKSB1cmw6IHN0cmluZztcclxuICAgIC8qKiDmlbDmja7mupAgKi9cclxuICAgIEBJbnB1dCgpIGRhdGE6IGFueVtdO1xyXG5cclxuICAgIC8qKiDpobXohJrmlbDmja4gKi9cclxuICAgIHByaXZhdGUgX2Zvb3RlckRhdGE6IE9ic2VydmFibGU8YW55PiA9IG9mKFtdKTtcclxuICAgIEBJbnB1dCgpIGdldCBmb290ZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb290ZXJEYXRhO1xyXG4gICAgfVxyXG4gICAgc2V0IGZvb3RlckRhdGEocm93cykge1xyXG4gICAgICAgIGlmIChyb3dzICYmIHJvd3Muc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvb3RlckRhdGEgPSByb3dzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvb3RlckRhdGEgPSBvZihyb3dzIHx8IFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJvd3MpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJIZWlnaHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOmqjOivgeS4jemAmui/h+aXtuWPr+S7pee7k+adn+e8lui+kSAqL1xyXG4gICAgQElucHV0KCkgZW5kRWRpdEJ5SW52YWxpZCA9IHRydWU7XHJcblxyXG4gICAgLyoqIOWIl+mbhuWQiCAqL1xyXG4gICAgcHJpdmF0ZSBfY29sdW1ucyA9IFtdO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBjb2x1bW5zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zO1xyXG4gICAgfVxyXG4gICAgc2V0IGNvbHVtbnModmFsdWVzKSB7XHJcbiAgICAgICAgdGhpcy5fY29sdW1ucyA9IHRoaXMuY29ycmVjdENvbHVtbnModmFsdWVzKTtcclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnY29sdW1ucycsIHRoaXMuX2NvbHVtbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2ZpZWxkcyA9IFtdO1xyXG4gICAgZ2V0IGZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmllbGRzO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpIHNldCBmaWVsZHMoY29scykge1xyXG4gICAgICAgIHRoaXMuX2ZpZWxkcyA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29scztcclxuICAgICAgICBpZiAodGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDnpoHmraLmlbDmja7mipjooYzvvIzpu5jorqTlgLzvvJp0cnVlLOWNs+WcqOS4gOihjOaYvuekuu+8jOS4jeaKmOihjOOAgiAqL1xyXG4gICAgQElucHV0KCkgbm93cmFwID0gdHJ1ZTtcclxuICAgIC8qKiDomZrmi5/liqDovb0gKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAvKiog5piv5ZCm5ZCv55So5byC5q2l5Yqg6L295pWw5o2uICovXHJcbiAgICBASW5wdXQoKSB2aXJ0dWFsaXplZEFzeW5jTG9hZCA9IGZhbHNlO1xyXG4gICAgLyoqIOihjOagt+W8jyAqL1xyXG4gICAgQElucHV0KCkgcm93U3R5bGVyOiAocm93RGF0YSwgcm93SW5kZXg/OiBudW1iZXIpID0+IHsgY2xzPzogc3RyaW5nLCBzdHlsZT86IGFueSB9O1xyXG4gICAgLyoqIOe8lui+keaWueW8j++8miByb3co5pW06KGM57yW6L6RKeOAgWNlbGwo5Y2V5YWD5qC857yW6L6RKe+8m+m7mOiupOS4uiByb3cgKi9cclxuICAgIEBJbnB1dCgpIGVkaXRNb2RlOiAncm93JyB8ICdjZWxsJyA9ICdyb3cnO1xyXG4gICAgLyoqIOe8lui+keeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSBfZWRpdGFibGUgPSBmYWxzZTtcclxuICAgIGdldCBlZGl0YWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWRpdGFibGU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZWRpdGFibGUodikge1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0YWJsZSAhPT0gdikge1xyXG4gICAgICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IHY7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmRncy51cGRhdGVFbXB0eVN0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIOWQr+eUqOWPr+e8lui+keWNleWFg+agvOagt+W8j+OAgiAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRWRpdENlbGxTdHlsZSA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDov5vlhaXnvJbovpHnirbmgIHml7bpgInmmK/lkKbpgInkuK3mlofmnKzvvJvpu5jorqTkuLogZmFsc2VcclxuICAgICAqIOS7heaWh+acrOahhuaUr+aMgeatpOeJueaAp1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RPbkVkaXRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog57yW6L6R5Zmo6auY5bqmICovXHJcbiAgICBASW5wdXQoKSBlZGl0b3JIZWlnaHQgPSAzMDtcclxuICAgIC8qKiDlkK/nlKjov5znq6/mjpLluo8gKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZVNvcnQgPSBmYWxzZTtcclxuICAgIC8qKiDmjpLluo/lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAvKiog5o6S5bqP5pa55byPIGFzYyB8IGRlc2MgKi9cclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG4gICAgLyoqIOWFgeiuuOWkmuWIl+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTb3J0OiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIGhvdmVyUm93Q2xzID0gJ2YtZGF0YWdyaWQtcm93LWhvdmVyJztcclxuXHJcbiAgICAvKiog5YWB6K645ouW5ou95YiX6aG65bqPICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVEcmFnQ29sdW1uID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOihjOWIhue7hOmdouadv+mrmOW6pu+8jOm7mOiupCA1MFBYICovXHJcbiAgICBASW5wdXQoKSByb3dHcm91cFBhbmVsSGVpZ2h0ID0gNTA7XHJcbiAgICAvKiog5ZCv55So5YiG57uE6KGMICovXHJcbiAgICBASW5wdXQoKSBncm91cFJvd3MgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjooYzliIbnu4TlkIjorqHooYwgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwRm9vdGVyID0gZmFsc2U7XHJcbiAgICAvKiog5YiG57uE6KGM5piv5ZCm5bGV5byA77yM6buY6K6k5Li6IOWxleW8gCAgKi9cclxuICAgIEBJbnB1dCgpIGV4cGFuZEdyb3VwUm93cyA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqIOWIhue7hOWQiOiuoeihjOiHquWumuS5ieagt+W8j++8mlxyXG4gICAgICog5YWB6K6455qE5YC85Li6XHJcbiAgICAgKiAtIHsgY2xzOiAnY3NzY2xhc3NuYW1lLCAnLCBzdHlsZTogeyBjb2xvcjogJ3JlZCcsIGJvcmRlcjogMXB4IHNvbGlkIH0gfVxyXG4gICAgICogLSAoZ3JvdXBGb290ZXJSb3dEYXRhKTogeyBjbHM6ICdjc3NjbGFzc25hbWUsICcsIHN0eWxlOiB7IGNvbG9yOiAncmVkJywgYm9yZGVyOiAxcHggc29saWQgfSB9ID0+IHt9XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwRm9vdGVyU3R5bGVyOiBhbnk7XHJcbiAgICAvKiog5ZCI6K6h5pWw5o2u5pi+56S65L2N572uXHJcbiAgICAgKiBpbkdyb3VwUm93OiDkuI7liIbnu4TlnKjlkIzkuIDooYzvvIzliIbliKvnm7jlhbPlkIjorqHlrZfmrrXlr7npvZBcclxuICAgICAqIGdyb3VwRm9vdGVyUm93OiDlnKjliIbnu4TmlbDmja7mnIDlkI7lop7liqDkuIDooYxcclxuICAgICAqIOm7mOiupOS4uiBncm91cEZvb3RlclJvd1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBncm91cFN1bW1hcnlQb3NpdGlvbjogJ2luR3JvdXBSb3cnIHwgJ2dyb3VwRm9vdGVyUm93JyA9ICdncm91cEZvb3RlclJvdyc7XHJcbiAgICAvKiog5YiG57uE5L+h5oGv5ZCI5bm25YiX5pWwXHJcbiAgICAgKiDpu5jorqTkuLogMVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBncm91cENlbGxDb2xTcGFuID0gMTtcclxuXHJcbiAgICAvKiog5YiG57uE5a2X5q615ZCN56ewLCDlpJrlrZfmrrXliIbnu4Tku6Xoi7HmlofpgJflj7fliIbpmpQgKi9cclxuICAgIHByaXZhdGUgX2dyb3VwRmllbGQgPSAnJztcclxuICAgIGdyb3VwRmllbGRzJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoW10pO1xyXG4gICAgZ2V0IGdyb3VwRmllbGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwRmllbGQ7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JvdXBGaWVsZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9ncm91cEZpZWxkID0gdmFsIHx8ICcnO1xyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9ncm91cEZpZWxkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ncm91cEZpZWxkID0gdGhpcy5fZ3JvdXBGaWVsZC5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fZ3JvdXBGaWVsZCkge1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRmllbGRzJC5uZXh0KHRoaXMuX2dyb3VwRmllbGQuc3BsaXQoJywnKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ncm91cEZpZWxkcyQubmV4dChbXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZ3JvdXBGaWVsZCcsIHRoaXMuX2dyb3VwRmllbGQpO1xyXG4gICAgfVxyXG4gICAgLyoqIOaYvuekuuWIhue7hOWIlyAqL1xyXG4gICAgQElucHV0KCkgc2hvd0dyb3VwQ29sdW1uID0gdHJ1ZTtcclxuICAgIC8qKiDliIbnu4TmoLzlvI/ljJYgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwRm9ybWF0dGVyOiAoZ3JvdXBSb3c6IGFueSkgPT4gYW55O1xyXG4gICAgLyoqIOWIhue7hOihjOagt+W8jyAqL1xyXG4gICAgQElucHV0KCkgZ3JvdXBTdHlsZXI6IChncm91cFJvdzogYW55KSA9PiB7IGNscz86IHN0cmluZywgc3R5bGU/OiBhbnkgfTtcclxuXHJcbiAgICAvKiog5pi+56S65YiG57uE5YiX6Z2i5p2/44CC6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBwcml2YXRlIF9zaG93Um93R3JvdXBQYW5lbCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2V0IHNob3dSb3dHcm91cFBhbmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3Nob3dSb3dHcm91cFBhbmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNob3dSb3dHcm91cFBhbmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdyb3VwUm93cyAmJiB0aGlzLl9zaG93Um93R3JvdXBQYW5lbDtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+M5Ye76KGo5aS06YCC5bqU5YaF5a655a695bqmICovXHJcbiAgICBASW5wdXQoKSBBdXRvQ29sdW1uV2lkdGhVc2VEYmxjbGljayA9IHRydWU7XHJcbiAgICAvKiog6KGM6ZKp6YCJ5Y+K6YCJ5Lit56aB55So6KGo6L6+5byPICovXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlUm93OiAocm93LCBpbmRleD86IGFueSkgPT4gYm9vbGVhbjtcclxuICAgIC8qKiDkvb/nlKjlhoXpg6jov4fmu6Tlmag7IOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgdXNlRGVmYXVsdEZpbHRlciA9IGZhbHNlO1xyXG4gICAgLyoqIOi/h+a7pOWbvuagh+S4juaOkuW6j+Wbvuagh+WQiOW5tu+8jOatpOWxnuaAp+S4jiBlbmFibGVGaWx0ZXJSb3cg5LqS5palICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVTbWFydEZpbHRlciA9IGZhbHNlO1xyXG4gICAgLyoqIOaYvuekuui/h+a7pOihjCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRmlsdGVyUm93ID0gZmFsc2U7XHJcbiAgICAvKiog5pyN5Yqh5Zmo56uv6L+H5rukICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVGaWx0ZXIgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjov4fmu6TmnaHku7bmmL7npLrmnaEgKi9cclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSBmYWxzZTtcclxuICAgIC8qKiDov4fmu6TmnaHku7bmsYfmgLvmnaHpq5jluqbvvIzpu5jorqQgMzJweCAgKi9cclxuICAgIEBJbnB1dCgpIGZpbHRlckJhckhlaWdodCA9IDMyO1xyXG4gICAgQElucHV0KCkgZmlsdGVyUm93SGVpZ2h0ID0gNDA7XHJcbiAgICBASW5wdXQoKSBjb25kaXRpb25zOiBhbnkgPSB7fTtcclxuXHJcbiAgICBASW5wdXQoKSBzZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICBASW5wdXQoKSBjaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgQElucHV0KCkgc2VsZWN0VmFsdWVzID0gW107XHJcblxyXG4gICAgLyoqIOWQiOW5tuWNleWFg+agvO+8m+WFiOaUr+aMgee6teWQkeWQiOW5tiAqL1xyXG4gICAgQElucHV0KCkgbWVyZ2VDZWxsID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBtZXJnZUZpZWxkcyA9IFtdO1xyXG4gICAgLyoqIOWQiOW5tuWNleWFg+agvOaVsOaNruWQr+eUqOWuouaIt+err+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2xpZW50U29ydEZvck1lcmdlQ2VsbCA9IGZhbHNlO1xyXG4gICAgLyoqIOS9v+eUqOmrmOe6p+aOp+WItumdouadvyjliJforr7nva4pICovXHJcbiAgICBASW5wdXQoKSB1c2VDb250cm9sUGFuZWwgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjnroDmtIHmjqfliLbpnaLmnb/mqKHlvI/jgILpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVNpbXBsZU1vZGUgPSBmYWxzZTtcclxuICAgIC8qKiDngrnlh7vliJforr7nva7lm77moIfvvIzpu5jorqTmiZPlvIDnmoTmjqfliLbpnaLmnb8gKi9cclxuICAgIEBJbnB1dCgpIGNvbnRyb2xQYW5lbE1vZGU6ICdhZHZhbmNlZCcgfCAnc2ltcGxlJyA9ICdhZHZhbmNlZCc7XHJcbiAgICAvKiog5ZCv55So5YiX6K6+572u5pa55qGIICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVTY2hlbWUgPSBmYWxzZTtcclxuICAgIC8qKiDns7vnu5/pooTliLbmlrnmoYjlkI3np7AgKi9cclxuICAgIEBJbnB1dCgpIGRlZmF1bHRTY2hlbWVOYW1lID0gJ+ezu+e7n+mihOWItic7XHJcbiAgICAvKiog5aSa6KGo5aS05ZCv55So5YiX6K6+572uOyDpu5jorqQgZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVNldE11bHRpSGVhZGVycyA9IGZhbHNlO1xyXG4gICAgLyoqIOWFgeiuuOi/kOihjOaXtuWIl+iuvue9ruS4reWPr+iuvue9rueahOacgOWkp+ihqOWktOaVsO+8iOWMheWQq+aVsOaNruWIl++8ie+8m+m7mOiupOS4uiAz5bGCICovXHJcbiAgICBASW5wdXQoKSBtYXhNdWx0aUhlYWRlcnMgPSAzO1xyXG4gICAgLyoqIOWIl+iuvue9ruaWueahiOWPmOWMluWQju+8jOW8ueWHuuaWueahiOWPmOabtOaPkOekuu+8jOm7mOiupOS4umZhbHNlLOS/ruaUueS/neWtmOWIsOW9k+WJjeaWueahiOS4rSAqL1xyXG4gICAgQElucHV0KCkgc2hvd0NvbmZpcm1XaGVuU2NoZW1lQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDpmLvmraJjbGljayDkuovku7blhpLms6EgKi9cclxuICAgIEBJbnB1dCgpIHN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XHJcbiAgICAvKipcclxuICAgICAqICgyMDIxMDUg5byD55SoKVxyXG4gICAgICog54K55Ye75Y2V5YWD5qC86L+b6KGM57yW6L6R54q25oCB5pe277yM5YWz6Zet5YW25LuWR3JpZOeahOe8lui+keWZqOOAgum7mOiupCBmYWxzZe+8jFxyXG4gICAgICog5aSa5Liq5YiX6KGo5a2Y5pe277yM5LuF5pyJ5LiA5Liq5YiX6KGo5Lit5pyJ57yW6L6R54q25oCB77yM5YW25LuW5YiX6KGo57uT5p2f57yW6L6RXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNsb3NlT3RoZXJHcmlkRWRpdG9yID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5pWw5o2u5rqQ5Li656m65pe277yM5riF56m65bey6YCJ6K6w5b2VLCDpu5jorqQgdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgY2xlYXJTZWxlY3Rpb25zV2hlbkRhdGFJc0VtcHR5ID0gdHJ1ZTtcclxuICAgIC8qKiDlkK/nlKjlj7PplK7oj5zljZXvvIzpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUNvbnRleHRNZW51ID0gZmFsc2U7XHJcbiAgICAvKiog5Y+z6ZSu6I+c5Y2V5pWw5o2uICovXHJcbiAgICBASW5wdXQoKSBjb250ZXh0TWVudXM6IENvbnRleHRNZW51SXRlbVtdID0gbnVsbDtcclxuXHJcbiAgICBASW5wdXQoKSBiZWZvcmVTaG93Q29udGV4dE1lbnVzOiAoZTogYW55KSA9PiBib29sZWFuO1xyXG5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjaGVja1ZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZXNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlRWRpdDogKHBhcmFtOiBSb3dFZGl0UGFyYW0pID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBAT3V0cHV0KCkgYmVnaW5FZGl0ID0gbmV3IEV2ZW50RW1pdHRlcjxSb3dFZGl0UGFyYW0+KCk7XHJcbiAgICBASW5wdXQoKSBhZnRlckVkaXQ6IChyb3dJbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnksIGNvbHVtbj86IERhdGFDb2x1bW4sIGVkaXRvcj86IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBPdXRwdXQoKSBlbmRFZGl0ID0gbmV3IEV2ZW50RW1pdHRlcjx7IHJvd0luZGV4OiBudW1iZXIsIHJvd0RhdGE6IGFueSwgY29sdW1uPzogRGF0YUNvbHVtbiwgdmFsdWU/OiBhbnkgfT4oKTtcclxuICAgIEBPdXRwdXQoKSBjYW5jZWxFZGl0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2Nyb2xsWSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHBhZ2VDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBsb2FkU3VjY2VzcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBlbXB0eURhdGEgID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBmaWx0ZXJDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdDogKHBhcmFtczogQmVmb3JFdmVudFBhcmFtKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlVW5zZWxlY3Q6IChwYXJhbXM6IEJlZm9yRXZlbnRQYXJhbSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZUNoZWNrOiAocGFyYW1zOiBCZWZvckV2ZW50UGFyYW0pID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVVbmNoZWNrOiAocGFyYW1zOiBCZWZvckV2ZW50UGFyYW0pID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVTb3J0Q29sdW1uOiAoZmllbGQ6IHN0cmluZywgb3JkZXI6IHN0cmluZywgaW5zdGFuY2U6IERhdGFncmlkQ29tcG9uZW50KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUxvYWQ6IChwYXJhbXM6IHtkYXRhOiBhbnksIGluc3RhbmNlOiBEYXRhZ3JpZENvbXBvbmVudH0pID0+IE9ic2VydmFibGU8eyBkYXRhOiBhbnkgfT5cclxuXHJcbiAgICAvKiog5ZCv55So6YCJ5Lit5Y2V5YWD5qC86auY5Lqu5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVIaWdobGlnaHRDZWxsID0gZmFsc2U7XHJcbiAgICAvKiogIOmAieS4reeahOaVsOaNruWni+e7iOS7juaVsOaNrua6kOS4reiOt+WPli4g6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjaGVja2VkUm93c0RhdGFGcm9tU291cmNlID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5YmN5Y2V5YWD5qC85Li65Y+q6K+75pe277yM5L2/55SodGFiIOmUrui3s+WIsOS4i+S4quWNleWFg+agvOaXtu+8jOaYr+WQpuWFgeiuuOi/m+WFpee8lui+keeKtuaAge+8jOm7mOiupOS4uiBmYWxzZTtcclxuICAgICAqIOm7mOiupOaDheWGteS4i++8jOW9k+WJjeWNleWFg+agvOWPquivu++8jOaMiVRBQui3s+WIsOS4i+S4qkNFTEwg5pe277yM6YCJ5LitQ0VMTCDvvIzlm57ovabov5vlhaXnvJbovpHjgIJcclxuICAgICAqIOW8gOWQr+WQju+8jOS4i+S4quWNleWFg+agvOiHquWKqOi/m+WFpee8lui+keeKtuaAgeOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBlZGl0Y2VsbFdoZW5UYWJLZXlkd29uID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWNleWFg+agvOeCueWHu+WJjeS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGJlZm9yZUNsaWNrQ2VsbCA9IG5ldyBFdmVudEVtaXR0ZXI8Um93RWRpdFBhcmFtPigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBkYmxjbGlja1JvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvdz4oKTtcclxuICAgIEBPdXRwdXQoKSB1blNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3c+KCk7XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0QWxsID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvd1tdPigpO1xyXG4gICAgQE91dHB1dCgpIHVuU2VsZWN0QWxsID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOW8guatpeivt+axguiZmuaLn+WKoOi9vSAqL1xyXG4gICAgQE91dHB1dCgpIHNjcm9sbFlMb2FkID0gbmV3IEV2ZW50RW1pdHRlcjx7IHBhZ2VyOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgfT4oKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3c+KCk7XHJcbiAgICBAT3V0cHV0KCkgdW5DaGVja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvdz4oKTtcclxuICAgIEBPdXRwdXQoKSBjaGVja0FsbCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0ZWRSb3dbXT4oKTtcclxuICAgIEBPdXRwdXQoKSB1bkNoZWNrQWxsID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3RlZFJvd1tdPigpO1xyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdGVkUm93W10+KCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNvbHVtblNvcnRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSByb3dDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByb3dBcHBlbmRlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSByb3dEZWxldGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHJvd1VwZGF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGRhdGFDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOacgOWQjuS4gOihjOeahOacgOWQjuWNleWFg+agvOWbnui9puWkhOeQhuS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGxhc3RDZWxsRW50ZXJIYW5kbGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDliIbnu4TlrZfmrrXlj5jljJblkI4gKi9cclxuICAgIEBPdXRwdXQoKSBncm91cEZpZWxkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOaLluWKqOWIl+aUueWPmOWIl+aYvuekuuS9jee9ruWQjuinpuWPkSAqL1xyXG4gICAgQE91dHB1dCgpIGNvbHVtbk1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWNleWFg+agvOeCueWHu+S6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIGNlbGxDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgcmVzaXplZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAQ29udGVudENoaWxkcmVuKERhdGFncmlkQ29sdW1uRGlyZWN0aXZlKSBkZ0NvbHVtbnM/OiBRdWVyeUxpc3Q8RGF0YWdyaWRDb2x1bW5EaXJlY3RpdmU+O1xyXG4gICAgQFZpZXdDaGlsZCgnZGdQYWdlcicpIGRnUGFnZXI6IGFueTtcclxuICAgIEBWaWV3Q2hpbGQoJ3Jlc2l6ZVByb3h5JykgcmVzaXplUHJveHk6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdyZXNpemVQcm94eUJnJykgcmVzaXplUHJveHlCZzogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2RhdGFncmlkQ29udGFpbmVyJykgZGdDb250YWluZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdsb25nVGV4dEFyZWEnKSBsb25nVGV4dEFyZWE6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdzbWFydGZpbHRlcnRvb2xiYXInKSBzbWFydEZpbHRlclRvb2xiYXI6IFNtYXJ0RmlsdGVyVG9vbGJhckNvbXBvbmVudDtcclxuICAgIGNvbEdyb3VwOiBDb2x1bW5Hcm91cDtcclxuXHJcbiAgICBwcml2YXRlIF9sb2FkaW5nID0gZmFsc2U7XHJcbiAgICBnZXQgbG9hZGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGluZztcclxuICAgIH1cclxuICAgIHNldCBsb2FkaW5nKHZhbDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2xvYWRpbmcgPSB2YWw7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNkWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdGlvbnMoKTogU2VsZWN0ZWRSb3dbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGZzLmdldFNlbGVjdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2hlY2tlZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tlZFJvd3M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNoZWNrZWRSb3dzKCkge1xyXG4gICAgICAgIGNvbnN0IGNoa2VkcyA9IHRoaXMuZGZzLmdldENoZWNrZWRzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlTW9yZVBhZ2VTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKGNoa2VkcyAmJiBjaGtlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZFJvd3NEYXRhRnJvbVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uY2hrZWRzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOS7juaVsOaNrua6kOS4reiOt+WPluacgOaWsOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoa2Vkcy5tYXAobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHRoaXMuZGZzLmZpbmRSb3cobi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5kYXRhID0gZC5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5kYXRhLm1hcChuID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZFJvd3NEYXRhRnJvbVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGtlZHMuZmlsdGVyKG4gPT4gdGVtcC5pbmNsdWRlcyhuLmlkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDku47mlbDmja7mupDkuK3ojrflj5bmnIDmlrDmlbDmja5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGtlZHMuZmlsdGVyKG4gPT4gdGVtcC5pbmNsdWRlcyhuLmlkKSkubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLmRmcy5maW5kUm93KG4uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uZGF0YSA9IGQuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNoZWNrZWRSb3dzKHJvd3M6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKHJvd3MgJiYgcm93cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcm93cyA9IHJvd3MubWFwKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogclt0aGlzLmlkRmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2NoZWNrZWRSb3dzJywgcm93cyB8fCBbXSk7XHJcbiAgICAgICAgdGhpcy5pbml0U2VsZWN0T3JDaGVja2VkKCk7XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICBnZXQgc2VsZWN0ZWRSb3coKTogU2VsZWN0ZWRSb3cge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZFJvdztcclxuICAgIH1cclxuICAgIHNldCBzZWxlY3RlZFJvdyhyb3cpIHtcclxuICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlICE9IHJvdy5pZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRSb3cgPSByb3c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gcm93LmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZUNoYW5nZS5lbWl0KHJvdy5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENoYW5nZWQuZW1pdChyb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdC5lbWl0KHRoaXMuX3NlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVDaGFuZ2UuZW1pdCgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHMgPSB7XHJcbiAgICAgICAgaW5kZXg6IDAsXHJcbiAgICAgICAgcm93czogW10sXHJcbiAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICBzY3JvbGxpbmc6IGZhbHNlIC8vIOaYr+WQpueUsea7muWKqOadoeinpuWPkVxyXG4gICAgfTtcclxuXHJcbiAgICBwYWdlck9wdHM6IGFueSA9IHt9O1xyXG4gICAgcmVzdFNlcnZpY2U6IFJlc3RTZXJ2aWNlO1xyXG4gICAgZWRpdG9yczogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG5cclxuICAgIHZhbGlkYXRvcnM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogVmFsaWRhdG9yRm4gfVtdID0gW107XHJcblxyXG4gICAgY3VycmVudENlbGw6IENlbGxJbmZvO1xyXG4gICAgZmxhdENvbHVtbnM6IERhdGFDb2x1bW5bXTtcclxuICAgIGZvb3RlcldpZHRoID0gMDtcclxuXHJcbiAgICBjbGlja0RlbGF5ID0gMTUwO1xyXG4gICAgcHJpdmF0ZSByZXNpemVDb2x1bW5JbmZvID0ge1xyXG4gICAgICAgIHByb3h5TGluZUVkZ2U6IDAsXHJcbiAgICAgICAgc3RhcnRXaWR0aDogMCxcclxuICAgICAgICBzdGFydFg6IDAsXHJcbiAgICAgICAgbGVmdDogMFxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG4gICAgc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIHJlYWxIZWFkZXJIZWlnaHQgPSAwO1xyXG4gICAgaXNTaW5nbGVDbGljazogYm9vbGVhbjtcclxuXHJcbiAgICBkb2N1ZW1udENlbGxDbGlja0V2ZW50czogYW55O1xyXG4gICAgZG9jdW1lbnRDZWxsQ2xpY2tIYW5kbGVyOiBhbnk7XHJcbiAgICBkb2N1bWVudENlbGxLZXlkb3duRXZlbnRzOiBhbnk7XHJcbiAgICBkb2N1bWVudENlbGxLZXlkb3duSGFuZGxlcjogYW55O1xyXG5cclxuICAgIC8vIOW8ueeql+S4reS9v+eUqOaXtu+8jOeql+WPo+eCueWHu+S6i+S7tuWkhOeQhlxyXG4gICAgcHJpdmF0ZSBtb2RhbENsaWNrRXZlbnQgPSBudWxsO1xyXG5cclxuICAgIC8vIOihjOmAieS4remUruebmOS6i+S7tlxyXG4gICAgZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcjogYW55O1xyXG4gICAgLy8g6KGM57yW6L6R5b+r5o236ZSuXHJcbiAgICBkb2N1bWVudFJvd0VkaXRLZXlkb3duSGFubGRlcjogYW55O1xyXG4gICAgLy8gZG9jdW1lbnQg5Y2V5Ye75pe257uT5p2f6KGM57yW6L6RXHJcbiAgICBkb2N1bWVudENsaWNrRW5kUm93RWRpdEhhbmRsZXI6IGFueTtcclxuXHJcbiAgICBwZW5kaW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgY29sRm9ybWF0U2VyOiBDb2x1bW5Gb3JtYXRTZXJ2aWNlO1xyXG4gICAgc2Nyb2xsSW5zdGFuY2U6IFNjcm9sbGJhckRpcmVjdGl2ZSA9IG51bGw7XHJcbiAgICAvLyDmnKzlnLDljJbmnI3liqFcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2U7XHJcbiAgICAvLyDlkIjlubbljZXlhYPovoXliqnkv6Hmga9cclxuICAgIG1lcmdlQ2VsbEluZm8gPSB7fTtcclxuICAgIGlnbm9yZVRhcmdldCA9IFsnSU5QVVQnLCAnU0VMRUNUJywgJ1RFWFRBUkVBJ107XHJcbiAgICBjbGllbnRGaWx0ZXJTZXJ2aWNlOiBEYXRhZ3JpZEZpbHRlclNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIHNldHRpbmdTZXJ2aWNlOiBhbnk7IC8vIERhdGFncmlkU2V0dGluZ3NTZXJ2aWNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o6n5Yi25YiX5a2X5q615ZCN56ewOiBfZGF0YWdyaWQtc2V0dGluZy1jb250cm9sXyBcclxuICAgICAqKi9cclxuICAgIENvbnRyb2xQYW5lbEZlaWxkID0gJ19kYXRhZ3JpZC1zZXR0aW5nLWNvbnRyb2xfJztcclxuXHJcbiAgICBwcml2YXRlIF9pc1Jlc2l6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBncmlkU2l6ZSA9IHsgd2lkdGg6IHRoaXMud2lkdGggKyAncHgnLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0ICsgJ3B4JyB9O1xyXG4gICAgLy8g5a6i5oi356uv6L+H5ruk5pe277yM5piv5ZCm6L+H5ruk6KGM5Y+R55Sf5Y+Y5YyWXHJcbiAgICBjbGllbnRGaWx0ZXJDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAvLyBzdHlsZSdzIElEXHJcbiAgICBzdHlsZVNoZWV0SWQgPSAnJztcclxuXHJcbiAgICBncm91cFJvd1BhbmVsUGxhY2Vob2xkZXIgPSAnJztcclxuICAgIGNvbW1vblV0aWxzOiBDb21tb25VdGlscyA9IG51bGw7XHJcbiAgICBzbWFydEZpbHRlclNlcnZpY2U6IERhdGFncmlkU21hcnRGaWx0ZXJTZXJ2aWNlID0gbnVsbDtcclxuICAgIHNtYXJ0RmlsdGVyUmVzdWx0ID0geyBjb250cm9sRGF0YTogW10sIGNvbmRpdGlvbnM6IFtdIH07XHJcbiAgICBzbWFydEZpbHRlckJhckhlaWdodCA9IDMyO1xyXG4gICAgaWRTZXJ2aWNlOiBJZFNlcnZpY2U7XHJcbiAgICBwcml2YXRlIF9hY3RpdmVfZGF0YWdyaWRfY2xzID0gJ2RhdGFncmlkLWFjdGl2ZSc7XHJcbiAgICBwcml2YXRlIF9ibHVyZWRfZGF0YWdyaWRfY2xzID0gJ2RhdGFncmlkLWJsdXJyZWQnO1xyXG5cclxuICAgIC8vIOiHquWumuS5iWdyaWTmoLflvI/vvIzliJfooajliJ3lp4vlkI7vvIzkvJrmt7vliqDkuIDkuKroh6rlrprkuYnlkI3np7DnmoTmoLflvI9cclxuICAgIF9jdXN0b21fZGF0YWdyaWRfY2xzID0gJ2RhdGFncmlkJztcclxuICAgIC8vIOWkmumAieS7vyB3aW5kb3dzIOmAieaLqeaooeW8j1xyXG4gICAgc21zOiBTZWxlY3Rpb25Nb2RlU2VydmljZTtcclxuICAgIC8vIOeEpueCueihjOe0ouW8le+8jOavj+asoeihjOeCueWHu+WQjuabtOaWsFxyXG4gICAgZm9jdXNSb3dJbmRleCA9IC0xO1xyXG5cclxuICAgIHByaXZhdGUgZG9jdW1lbnRCb2R5TW91c2VEb3duID0gbnVsbDtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50UGFnZXJEYXRhID0gW107XHJcbiAgICBwcml2YXRlIHJlc2l6ZVRpbWVyID0gbnVsbDtcclxuICAgIHByaXZhdGUgZGVidWdTZXI6IERlYnVnU2VydmljZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIERBVEFfQ0hBTkdFRF9USU1FUiA9IG51bGw7XHJcbiAgICAvKiog5b2TYm9keWNsaWNrIOaXtu+8jOaYr+WQpumAgOWHuuihjOe8lui+keeKtuaAge+8jOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgZXhpdFJvd0VkaXRpbmdXaGVuQm9keUNsaWNrID0gZmFsc2U7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRpb25zID0gbnVsbDtcclxuXHJcbiAgICBpc0ZGID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBfZm9vdGVyUm93SGVpZ2h0ID0gdGhpcy5mb290ZXJIZWlnaHQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHVibGljIGluamVjdDogSW5qZWN0b3IsIHB1YmxpYyB6b25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHVibGljIGRmczogRGF0YWdyaWRGYWNhZGVTZXJ2aWNlLFxyXG4gICAgICAgIHB1YmxpYyBkZ3M6IERhdGFncmlkU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGFwcDogQXBwbGljYXRpb25SZWYsXHJcbiAgICAgICAgcHJvdGVjdGVkIGRvbVNhbml0aXplcjogRG9tU2FuaXRpemVyLFxyXG4gICAgICAgIHB1YmxpYyByZW5kZXIyOiBSZW5kZXJlcjIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZVNoZWV0SWQgPSAnREFUQUdSSUQtJyArIFV0aWxzLnV1aWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3QuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMucmVzdFNlcnZpY2UgPSB0aGlzLmluamVjdC5nZXQ8UmVzdFNlcnZpY2U+KERBVEFHUklEX1JFU1RfU0VSVklDRUUsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuY29sRm9ybWF0U2VyID0gdGhpcy5pbmplY3QuZ2V0KENvbHVtbkZvcm1hdFNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuY29tbW9uVXRpbHMgPSB0aGlzLmluamVjdC5nZXQoQ29tbW9uVXRpbHMsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50RmlsdGVyU2VydmljZSA9IG5ldyBEYXRhZ3JpZEZpbHRlclNlcnZpY2UoZGZzLCB0aGlzLmxvY2FsZVNlcnZpY2UsIGluamVjdCk7XHJcbiAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMgPSB0aGlzLmluamVjdC5nZXQoRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICB0aGlzLmRlYnVnU2VyID0gdGhpcy5pbmplY3QuZ2V0KERlYnVnU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgbGV0IHBlcmZpeFN0ciA9ICcnO1xyXG4gICAgICAgIGlmIChXRUJBUElfUFJFRklYX1RPS0VOKSB7XHJcbiAgICAgICAgICAgIHBlcmZpeFN0ciA9IHRoaXMuaW5qZWN0LmdldChXRUJBUElfUFJFRklYX1RPS0VOLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5kZWJ1Z1Nlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnU2VyID0gbmV3IERlYnVnU2VydmljZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNtYXJ0RmlsdGVyU2VydmljZSA9IHRoaXMuaW5qZWN0LmdldChEYXRhZ3JpZFNtYXJ0RmlsdGVyU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5pZFNlcnZpY2UgPSB0aGlzLmluamVjdC5nZXQoSWRTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICB0aGlzLmRmcy5sb2NhbElkID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmxvY2FsZUlkO1xyXG5cclxuICAgICAgICB0aGlzLnNldHRpbmdTZXJ2aWNlID0gdGhpcy5pbmplY3QuZ2V0KEdSSURfU0VUVElOR1NfU0VSVklDRSwgbnVsbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zZXRVcmlQZXJmaXhTdHIocGVyZml4U3RyKTtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3NIdHRwID0gdGhpcy5pbmplY3QuZ2V0KEdSSURfU0VUVElOR1NfSFRUUCwgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuaHR0cFJlc3RTZXJ2aWNlID0gc2V0dGluZ3NIdHRwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWxpbmsgMzY3ODQ5XHJcbiAgICAgICAgY29uc3QgZGF0YVN1YnNjcmlwdGlvbiA9IHRoaXMuZGZzLmRhdGEkLnBpcGUoXHJcbiAgICAgICAgICAgIHN3aXRjaE1hcCgoZHM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlTG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJlZm9yZUxvYWQoe2RhdGE6IGRzLnJvd3MsIGluc3RhbmNlOiB0aGlzfSkucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKChlOiB7ZGF0YTogYW55fSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHMucm93cyA9IGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKGRzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLnN1YnNjcmliZSgoZGF0YVNvdXJjZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYW5Eb20oKTtcclxuICAgICAgICAgICAgY29uc3QgZHMgPSB7IC4uLmRhdGFTb3VyY2UgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbnMgJiYgT2JqZWN0LmtleXModGhpcy5jb25kaXRpb25zKS5sZW5ndGggJiYgIXRoaXMucmVtb3RlRmlsdGVyICYmIHRoaXMudXNlRGVmYXVsdEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgZHMucm93cyA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5leGVjdXRlRmlsdGVyKGRzLnJvd3MsIHRoaXMuY29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHMgPSBkcztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRzLnJvd3MgJiYgdGhpcy5kcy5yb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kZnMuZ2V0RGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lcmdlQ2VsbCAmJiB0aGlzLm1lcmdlRmllbGRzICYmIHRoaXMubWVyZ2VGaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZUNlbGxJbmZvID0gdGhpcy5kZ3MuZ2V0TWVyZ2VDZWxsSW5mbzModGhpcy5kcy5yb3dzLCBbLi4udGhpcy5tZXJnZUZpZWxkc10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFnZXJUb3RhbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkU3VjY2Vzcy5lbWl0KHRoaXMuZHMucm93cyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xlYXJTZWxlY3Rpb25zV2hlbkRhdGFJc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbXB0eURhdGEuZW1pdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZHMuc2Nyb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlckRhdGEoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDmgKfog73kvJjljJZcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuREFUQV9DSEFOR0VEX1RJTUVSKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5EQVRBX0NIQU5HRURfVElNRVIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLkRBVEFfQ0hBTkdFRF9USU1FUiA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0hlaWdodCAmJiB0aGlzLm1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heEhlaWdodCA8IDU1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gNjA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncmlkQ29udGFpbmVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JpZENvbnRhaW5lckVsLm5vZGVOYW1lICE9PSAnRElWJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnRGF0YWdyaWTniLblrrnlmajlv4XpobvkuLpESVbjgIInKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBncmlkQ29udGFpbmVyRWwuc3R5bGUuaGVpZ2h0ID0gJ3Vuc2V0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JpZENvbnRhaW5lckVsLnN0eWxlLm1heEhlaWdodCA9IHRoaXMubWF4SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JpZENvbnRhaW5lckVsLnN0eWxlLm1pbkhlaWdodCA9IGAke3RoaXMuZW1wdHlEYXRhSGVpZ2h0ICsgdGhpcy5yZWFsSGVhZGVySGVpZ2h0ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodGhpcy5zaG93Um93R3JvdXBQYW5lbCA/IHRoaXMucm93R3JvdXBQYW5lbEhlaWdodDogMCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgKHRoaXMucGFnaW5hdGlvbiA/IHRoaXMucGFnZXJIZWlnaHQgOiAwKX1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZUJsYW5rV2hlbkRhdGFJc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVHcmlkU2l6ZSh0aGlzLmZpdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3MuZGF0YWxvYWRlZC5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICAvLyBURlMgNTc3MDc4XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKCF0aGlzLm5vd3JhcCAmJiB0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuc2V0Um93SGVpZ2h0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLmRncy5jZWxsQ29udGVudFdyYXBDaGFuZ2VkLmVtaXQoKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChkYXRhU3Vic2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sdW1uR3JvdXBTdWJzY3JpcHRpb24gPSB0aGlzLmRmcy5jb2x1bW5Hcm91cCQucGlwZShcclxuICAgICAgICAgICAgZGVib3VuY2VUaW1lKDYwKVxyXG4gICAgICAgICkuc3Vic2NyaWJlKGNnID0+IHtcclxuICAgICAgICAgICAgaWYgKGNnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbEdyb3VwID0gY2c7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlcldpZHRoID0gY2cudG90YWxXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKGNvbHVtbkdyb3VwU3Vic2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuZGZzLmdyaWRTaXplJC5zdWJzY3JpYmUoKGNnOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjZyAmJiBjZy5jb2x1bW5zR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbEdyb3VwID0gY2cuY29sdW1uc0dyb3VwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5ub3dyYXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0RWRpdG9yQW5kVmFsaWRhdG9yKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDZWxsU3Vic2NyaXB0aW9uID0gdGhpcy5kZnMuY3VycmVudENlbGwkLnN1YnNjcmliZSgoY2VsbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBjZWxsO1xyXG4gICAgICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLmNlbGxSZWYpIHtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2VsbFJlZi5pc0VkaXRpbmcgPSBjZWxsLmlzRWRpdGluZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVuYmluZE1vdmVTZWxlY3RSb3dFdmVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kZnMuc2VsZWN0Um93JC5zdWJzY3JpYmUoKHNyOiBTZWxlY3RlZFJvdykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZERvY3VtZW50TW92ZVNlbGVjdFJvd0V2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHNyO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChjdXJyZW50Q2VsbFN1YnNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgIERhdGFncmlkQ29sdW1uc0hlbHBlci5ncmlkSW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgICAgICBjb25zdCBmaWx0ZXJDaGFuZ2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kZ3Mub25GaWx0ZXJDaGFuZ2VkLnBpcGUoXHJcbiAgICAgICAgICAgIGRlYm91bmNlVGltZSgyMDApXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoKGNvbmRpdGlvbnM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDnvJPlrZjov4fmu6TmnaHku7ZcclxuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25zID0gY29uZGl0aW9ucztcclxuICAgICAgICAgICAgdGhpcy5jbGllbnRGaWx0ZXJDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJEYXRhKHRoaXMuY29uZGl0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goZmlsdGVyQ2hhbmdlZFN1YnNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvb3RlckRhdGFTdWJzY3JpcHRpb24gPSB0aGlzLmRncy5yZWZyZXNoRm9vdGVyRGF0YS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlckRhdGEoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goZm9vdGVyRGF0YVN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgdGhpcy5kZ3MuY29tbW9uVXRpbHMgPSB0aGlzLmNvbW1vblV0aWxzO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kZ3MuZm9jdXNSb3dDaGFuZ2VkLnN1YnNjcmliZSgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzUm93SW5kZXggPSBlLnJvd0luZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldEN1cnJlbnRQYWdlckRhdGEoJGRhdGEpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlckRhdGEgPSAkZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICB3cml0ZUNvbnNvbGUobXNnLCB0eXBlOiAnaW5mbyd8J2xvZyd8J3dhcm4nfCdlcnJvcicgPSAnd2FybicpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlcikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlclt0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z1Nlclt0eXBlXShtc2cpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZVt0eXBlXShtc2cpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVGb290ZXJEYXRhKCkge1xyXG4gICAgICAgIGlmICgodGhpcy5zaG93Rm9vdGVyIHx8IHRoaXMucGFnZXJDb250ZW50VGVtcGxhdGUgKSAmJiB0aGlzLmZvb3RlckRhdGFGcm9tID09PSAnY2xpZW50JyApIHtcclxuICAgICAgICAgICAgY29uc3QgZmRhdGEgPSB0aGlzLmRmcy5nZXRGb290ZXJEYXRhKHRoaXMuZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLl9mb290ZXJEYXRhWyd2YWx1ZSddKSAhPT0gSlNPTi5zdHJpbmdpZnkoZmRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckRhdGEgPSBvZihmZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIE5nIEV2ZW50XHJcblxyXG4gICAgbmdEb0NoZWNrKCkge1xyXG4gICAgICAgIC8vIGlmICghdGhpcy5jaGVja1ZhbHVlcykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmNoZWNrVmFsdWVzID0gW107XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG5cclxuICAgICAgICB0aGlzLnNtcyA9IG5ldyBTZWxlY3Rpb25Nb2RlU2VydmljZSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0ZpbHRlclN0eWxlKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZVRoZW1lcykge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGVja1NpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGVja09wdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmdyb3VwUm93UGFuZWxQbGFjZWhvbGRlciA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGF0YWdyaWQuZ3JvdXBSb3cudGlwcycpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zbWFydEZpbHRlclNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVNtYXJ0RmlsdGVyICYmIHRoaXMuc2hvd0ZpbHRlckJhcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQgJiYgdGhpcy5zbWFydEZpbHRlclJlc3VsdC5jb250cm9sRGF0YSAmJiB0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0LmNvbnRyb2xEYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyQmFySGVpZ2h0ID0gdGhpcy5zbWFydEZpbHRlckJhckhlaWdodDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJCYXJIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNtYXJ0RmlsdGVyU2VydmljZS5maWx0ZXJDaGFuZ2VkLnN1YnNjcmliZSgoZTogYW55KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0ICYmICFlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0KSAhPT0gSlNPTi5zdHJpbmdpZnkoZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNtYXJ0RmlsdGVyUmVzdWx0ID0gZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudEZpbHRlckNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyRGF0YShlLmNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zbWFydEZpbHRlclJlc3VsdCB8fCAodGhpcy5zbWFydEZpbHRlclJlc3VsdC5jb250cm9sRGF0YSAmJiAhdGhpcy5zbWFydEZpbHRlclJlc3VsdC5jb250cm9sRGF0YS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25GaWx0ZXJCYXJSZXNpemUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpbHRlckJhckhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJhclJlc2l6ZSh0aGlzLnNtYXJ0RmlsdGVyQmFySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmlzRkYgPSB0aGlzLmNvbW1vblV0aWxzLmdldEJyb3dzZXJUeXBlKCkuZmY7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyDliJvlu7roh6rlrprkuYlzdHlsZSDlrrnlmahcclxuICAgICAgICAvLyBcclxuXHJcbiAgICAgICAgdGhpcy5zZXRIZWFkZXJIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLnNldFBhZ2VySGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gdGhpcy5zZXRSb3dIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLmluaXRCZWZvcmVFdmVudHMoKTtcclxuICAgICAgICBpZiAodGhpcy5maXQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRHcmlkTmV3U2l6ZVdoZW5GaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFN0YXRlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuYWRkKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5kYXRhIHx8ICF0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKDEsIHRoaXMucGFnZVNpemUpLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXMuZm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXJEYXRhID0gcmVzLmZvb3RlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJlcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLmFkZENsYXNzKHRoaXMuZGdDb250YWluZXIubmF0aXZlRWxlbWVudCwgdGhpcy5fY3VzdG9tX2RhdGFncmlkX2Nscyk7XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGVbMF0udGFyZ2V0IGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IF93ID0gZVswXS5jb250ZW50UmVjdC53aWR0aDtcclxuICAgICAgICAgICAgICAgIGlmICghX3cpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfaCA9IGVbMF0uY29udGVudFJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2Zsb293VyA9IE1hdGguZmxvb3IoX3cpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2Zsb29ySCA9IE1hdGguZmxvb3IoX2gpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3JvdW5kVyA9IE1hdGgucm91bmQoX3cpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3JvdW5kSCA9IE1hdGgucm91bmQoX2gpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2NlaWxXID0gTWF0aC5jZWlsKF93KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jZWlsSCA9IE1hdGguY2VpbChfaCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLndpZHRoID09PSBfZmxvb3dXIHx8IHRoaXMud2lkdGggPT09IF9yb3VuZFcgfHwgdGhpcy53aWR0aCA9PT0gX2NlaWxXKSAmJiAodGhpcy5oZWlnaHQgPT09IF9mbG9vckggfHwgdGhpcy5oZWlnaHQgPT09IF9yb3VuZEggfHwgdGhpcy5oZWlnaHQgPT09IF9jZWlsSCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRncy5yZXN0b3JlU2Nyb2xsYmFyUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplVGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVHcmlkU2l6ZSh0aGlzLmZpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVkLmVtaXQoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yby5vYnNlcnZlKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuXHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuZG9jdW1lbnRCb2R5TW91c2VEb3duLCB0cnVlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmRvY3VtZW50Qm9keU1vdXNlRG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNFZGl0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRhcmdldC5jbG9zZXN0KCd0ZC5mLWRhdGFncmlkLWNlbGwnKSAmJiAhdGFyZ2V0LmNsb3Nlc3QoJy5mLWRhdGFncmlkLWZvb3Rlci1yb3cnKSkgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5kYXRlLW92ZXJsYXktY29udGFpbmVyJykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLnRpbWUtcGlja2VyLW92ZXJsYXknKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcubGFuZ3VhZ2UtdGV4dGJveC1wYW5lbCcpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5mYXJyaXMtbm90aWZ5JykgfHxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLmNvbWJvUGFuZWwnKSBcclxuICAgICAgICAgICAgICAgICAgICAvLyB8fCB0YXJnZXQuY2xvc2VzdCgnLmYtbXVsdGktc2VsZWN0LWRhdGUnKSAgLy/ml6XmnJ/lpJrpgIlcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkRvY3VtZW50TW91c2VEb3duKGUpO1xyXG4gICAgICAgICAgICB9LCB0cnVlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dGb290ZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZm9vdGVyVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvb3RlckRvbSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1mb290ZXInKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb290ZXJEb20pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckhlaWdodCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZi1kYXRhZ3JpZC1mb290ZXInKS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUdyaWRTaXplKHRoaXMuZml0KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKblkK/nlKjku793aW5kb3dz6LWE5rqQ566h55CG5Zmo5Lit55qE5aSa6YCJ5qih5byPXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSAmJiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdkZWZhdWx0JyAmJiB0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc21zLmVuYWJsZVdpbmRvd3NTZWxlY3Rpb25Nb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZ0NvbHVtbnMgJiYgdGhpcy5kZ0NvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZGdDb2x1bW5zLm1hcChkZ2MgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uZGdjIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5sb2FkRGF0YShjaGFuZ2VzLmRhdGEuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuZGF0YVNvdXJjZUNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dBbGxDaGVja2JveCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNob3dBbGxDaGVja2JveC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0FsbENoZWNrYm94LmN1cnJlbnRWYWx1ZSAhPSBjaGFuZ2VzLnNob3dBbGxDaGVja2JveC5wcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0NoZWNrYm94ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0NoZWNrYm94LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5zaG93Q2hlY2tib3goY2hhbmdlcy5zaG93Q2hlY2tib3guY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dMaW5lTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2hvd0xpbmVOdW1iZXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNob3dMaW5lTnVtYmVyKGNoYW5nZXMuc2hvd0xpbmVOdW1iZXIuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm11bHRpU2VsZWN0ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMubXVsdGlTZWxlY3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldE11bHRpU2VsZWN0KGNoYW5nZXMubXVsdGlTZWxlY3QuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tPblNlbGVjdCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLmNoZWNrT25TZWxlY3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldENoZWNrT25TZWxlY3QoY2hhbmdlcy5jaGVja09uU2VsZWN0LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RPbkNoZWNrICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2VsZWN0T25DaGVjay5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMuc2V0U2VsZWN0T25DaGVjayhjaGFuZ2VzLnNlbGVjdE9uQ2hlY2suY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm9ubHlTZWxlY3RTZWxmICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMub25seVNlbGVjdFNlbGYuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdvbmx5U2VsZWN0U2VsZicsIGNoYW5nZXMub25seVNlbGVjdFNlbGYuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmtlZXBTZWxlY3QgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5rZWVwU2VsZWN0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgna2VlcFNlbGVjdCcsIGNoYW5nZXMua2VlcFNlbGVjdC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuaGVhZGVyV3JhcCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLmhlYWRlcldyYXAuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIZWFkZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY29sdW1uUmVzaXplRW5kKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubm93cmFwICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMubm93cmFwLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrTm93cmFwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93SGVpZ2h0KGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuY2VsbENvbnRlbnRXcmFwQ2hhbmdlZC5lbWl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdub3dyYXAnLCBjaGFuZ2VzLm5vd3JhcC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubXVsdGlTb3J0ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMubXVsdGlTb3J0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnbXVsdGlTb3J0JywgY2hhbmdlcy5tdWx0aVNvcnQuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVkaXRhYmxlICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuZWRpdGFibGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdlZGl0YWJsZScsIGNoYW5nZXMuZWRpdGFibGUuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VzLmVkaXRhYmxlLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRDZWxsRWRpdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNTaW5nbGVDbGljayA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0hlYWRlciAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNob3dIZWFkZXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdzaG93SGVhZGVyJywgY2hhbmdlcy5zaG93SGVhZGVyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVySGVpZ2h0Q2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0ZpbHRlckJhciAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNob3dGaWx0ZXJCYXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdzaG93RmlsdGVyQmFyJywgY2hhbmdlcy5zaG93RmlsdGVyQmFyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNob3dHcmlkSGVhZGVyLmVtaXQodGhpcy5yZWFsSGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5kZ3Muc21hcnRGaWx0ZXJCYXJFeHBhbmQuZW1pdCgpO1xyXG4gICAgICAgICAgICBsZXQgZmggPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25zICYmIHRoaXMuY29uZGl0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGZoID0gMzI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJhclJlc2l6ZShmaCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0Zvb3RlciAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnNob3dGb290ZXIuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdzaG93Rm9vdGVyJywgY2hhbmdlcy5zaG93Rm9vdGVyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUdyaWRTaXplKHRoaXMuZml0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VyT25TZXJ2ZXIgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlck9uU2VydmVyLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncGFnZXJPblNlcnZlcicsIGNoYW5nZXMucGFnZXJPblNlcnZlci5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VyT3B0cyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdlck9wdHMsIHtcclxuICAgICAgICAgICAgICAgIHJlbW90ZTogdGhpcy5wYWdlck9uU2VydmVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZUluZGV4ICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMucGFnZUluZGV4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncGFnZUluZGV4JywgY2hhbmdlcy5wYWdlSW5kZXguY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5wYWdlck9wdHMgPSBPYmplY3QuYXNzaWduKHRoaXMucGFnZXJPcHRzLCB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYWdlSW5kZXhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlU2l6ZSAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VTaXplLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncGFnZVNpemUnLCBjaGFuZ2VzLnBhZ2VTaXplLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2VyT3B0cywge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZUxpc3QgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlTGlzdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3BhZ2VMaXN0JywgY2hhbmdlcy5wYWdlTGlzdC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VyT3B0cyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdlck9wdHMsIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY29sdW1ucyAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLmNvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNpemVUeXBlICE9PSB1bmRlZmluZWQgJiYgIWNoYW5nZXMuc2l6ZVR5cGUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NpemVUeXBlID0gY2hhbmdlcy5zaXplVHlwZS5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93SGVpZ2h0KHRydWUpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNldEhlYWRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgncm93SGVpZ2h0JywgdGhpcy5yb3dIZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvb3RlckhlaWdodCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3Mub25Sb3dIZWlnaHRDaGFuZ2UodGhpcy5yb3dIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcy5yb3dIZWlnaHQgJiYgIWNoYW5nZXMucm93SGVpZ2h0LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd0hlaWdodChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5zZWxlY3RWYWx1ZSAmJiAhY2hhbmdlcy5zZWxlY3RWYWx1ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3codGhpcy5zZWxlY3RWYWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tWYWx1ZXMgJiYgIWNoYW5nZXMuY2hlY2tWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrSWRzID0gdGhpcy5kZnMuZGlmZmVyZW5jZUJ5KGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlIHx8IFtdLCBjaGFuZ2VzLmNoZWNrVmFsdWVzLnByZXZpb3VzVmFsdWUgfHwgW10sICh2KSA9PiB2KTtcclxuICAgICAgICAgICAgaWYgKGNoZWNrSWRzICYmIGNoZWNrSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3MoY2hlY2tJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdW5jaGVja0lkcyA9IHRoaXMuZGZzLmRpZmZlcmVuY2VCeShjaGFuZ2VzLmNoZWNrVmFsdWVzLnByZXZpb3VzVmFsdWUgfHwgW10sIGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlIHx8IFtdLCAodikgPT4gdik7XHJcbiAgICAgICAgICAgIGlmICh1bmNoZWNrSWRzICYmIHVuY2hlY2tJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuQ2hlY2tSb3dzKHVuY2hlY2tJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrZWRzLm1hcChyID0+IHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrZWRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dHcm91cENvbHVtbiAmJiAhY2hhbmdlcy5zaG93R3JvdXBDb2x1bW4uaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbih0aGlzLmdyb3VwRmllbGQuc3BsaXQoJywnKSwgY2hhbmdlcy5zaG93R3JvdXBDb2x1bW4uY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuYXV0b0ZpdENvbHVtbnMgJiYgIWNoYW5nZXMuYXV0b0ZpdENvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdhdXRvRml0Q29sdW1ucycsIGNoYW5nZXMuYXV0b0ZpdENvbHVtbnMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIChjaGFuZ2VzLmZpdENvbHVtbnMgJiYgIWNoYW5nZXMuZml0Q29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5maXRDb2x1bW5zID0gY2hhbmdlcy5maXRDb2x1bW5zLmN1cnJlbnRWYWx1ZTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmdyb3VwUm93cyAmJiAhY2hhbmdlcy5ncm91cFJvd3MuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdncm91cFJvd3MnLCBjaGFuZ2VzLmdyb3VwUm93cy5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLm1lcmdlQ2VsbCAmJiAhY2hhbmdlcy5tZXJnZUNlbGwuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubWVyZ2VGaWVsZHMgJiYgIWNoYW5nZXMubWVyZ2VGaWVsZHMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlRmlsdGVyUm93ICYmICFjaGFuZ2VzLmVuYWJsZUZpbHRlclJvdy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ2VuYWJsZUZpbHRlclJvdycsIGNoYW5nZXMuZW5hYmxlRmlsdGVyUm93LmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJhckhlaWdodCA9IDMyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3MudG9nZ2xlRmlsdGVyUm93LmVtaXQodGhpcy5lbmFibGVGaWx0ZXJSb3cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCh0aGlzLnJlYWxIZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyICYmICFjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZW5hYmxlU21hcnRGaWx0ZXInLCBjaGFuZ2VzLmVuYWJsZVNtYXJ0RmlsdGVyLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5lbmFibGVEcmFnQ29sdW1uICYmICFjaGFuZ2VzLmVuYWJsZURyYWdDb2x1bW4uaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEcmFnQ29sdW1ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd1Jvd0dyb3VwUGFuZWwgJiYgIWNoYW5nZXMuc2hvd1Jvd0dyb3VwUGFuZWwuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNtYXJ0RmlsdGVyQmFyRXhwYW5kLmVtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3Muc2hvd0dyaWRIZWFkZXIuZW1pdCh0aGlzLnJlYWxIZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0aW9uTW9kZSAmJiAhY2hhbmdlcy5zZWxlY3Rpb25Nb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNtcy50b2dnbGVNb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tGaWx0ZXJTdHlsZSgpIHtcclxuICAgICAgICAvLyDov4fmu6TooYzkuI7mmbrog73ov4fmu6Qg5ZCM5pe25ZCv55So5pe277yM5bCG6L+H5ruk6KGM56aB55SoXHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRmlsdGVyUm93ICYmIHRoaXMuZW5hYmxlU21hcnRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVGaWx0ZXJSb3cgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hlY2tTaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHRoZW1lc0tleSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnc3BfcnRmX3RoZW1TS2V5Jyk7XHJcbiAgICAgICAgbGV0IHN0OiBhbnkgPSAnc20nO1xyXG4gICAgICAgIHN3aXRjaCAodGhlbWVzS2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHQnOlxyXG4gICAgICAgICAgICAgICAgc3QgPSAnc20nO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xvb3NlJzpcclxuICAgICAgICAgICAgICAgIHN0ID0gJ21kJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zaXplVHlwZSA9IHN0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tEcmFnQ29sdW1ucygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc011bHRpSGVhZGVyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVEcmFnQ29sdW1uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuYWJsZVNldHRpbmdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZUNvbnRyb2xQYW5lbCAmJiAoIXRoaXMuaXNNdWx0aUhlYWRlcigpIHx8ICh0aGlzLmlzTXVsdGlIZWFkZXIoKSAmJiB0aGlzLmVuYWJsZVNldE11bHRpSGVhZGVycykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tPcHRpb25zKCkge1xyXG5cclxuICAgICAgICB0aGlzLmdyaWRTaXplID0geyB3aWR0aDogdGhpcy53aWR0aCArICdweCcsIGhlaWdodDogdGhpcy5oZWlnaHQgKyAncHgnIH07XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gJ0ZhcnJpc0RhdGFHcmlkJyArIFV0aWxzLnV1aWQoKS5yZXBsYWNlKC8tL2csICcnKS5zdWJzdHIoMCwgMTApO1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VDb250cm9sUGFuZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlQ29udHJvbFBhbmVsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgn5ZCv55So5YiX6YWN572u5bGe5oCn77yM5pyq6K6+572uSUTvvIzmraTlip/og73lsIbnpoHnlKjjgIInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21fZGF0YWdyaWRfY2xzID0gdGhpcy5pZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlU2hlZXRJZCA9IHRoaXMuaWQgKyAnXycgKyBVdGlscy51dWlkKCkucmVwbGFjZSgvLS9nLCAnJykuc3Vic3RyKDAsIDEwKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tX2RhdGFncmlkX2NscyA9IHRoaXMuc3R5bGVTaGVldElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nU2VydmljZSAmJiB0aGlzLnVzZUNvbnRyb2xQYW5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdTZXJ2aWNlLnJlZ2lzdGVyR3JpZEluc3RhbmNlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZ3MuY3JlYXRlU3R5bGVFbGVtZW50KHRoaXMuc3R5bGVTaGVldElkKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlkRmllbGQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgRGF0YWdyaWRcXCdzIGlkRmllbGQgY2FuXFwndCBiZSBOdWxsLiAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGVja05vd3JhcCgpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tTb3J0SW5mbygpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tNZXJnZUNlbGwoKTtcclxuICAgICAgICB0aGlzLnNldENoZWNrYm94QmVoYXZpb3IoKTtcclxuICAgICAgICB0aGlzLmluaXRQYWdpbmF0aW9uT3B0aW9ucygpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuZmllbGRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0dyb3VwSGVhZGVyQ29sdW1ucygpO1xyXG5cclxuICAgICAgICAvLyBURlM6IDM1Njk1NlxyXG4gICAgICAgIHRoaXMuY2hlY2tHcm91cFJvd1NldHRpbmcoKTtcclxuICAgICAgICB0aGlzLmNoZWNrQ29sdW1uc1R5cGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0RyYWdDb2x1bW5zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IF9kZWZhdWx0U2V0dGluZyA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZmxhdENvbHVtbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRSb3dIZWlnaHQoKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5kZnMuc2V0aW5pdGlhbE9wdGlvbnMoe1xyXG4gICAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbnMsXHJcbiAgICAgICAgICAgIGdyb3VwRmllbGQ6IHRoaXMuZ3JvdXBGaWVsZCxcclxuICAgICAgICAgICAgc29ydE5hbWU6IHRoaXMuc29ydE5hbWUsXHJcbiAgICAgICAgICAgIHNvcnRPcmRlcjogdGhpcy5zb3J0T3JkZXIsXHJcbiAgICAgICAgICAgIGV4cGFuZEdyb3VwUm93czogdGhpcy5leHBhbmRHcm91cFJvd3NcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlIZWFkZXIoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuYWJsZVNldE11bHRpSGVhZGVycyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAvLyDliqDovb3nlKjmiLfkuKrmgKfljJborr7nva4gLS3jgIsg5YiX5pi+56S65LiO5YiX5o6S5bqPXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UgJiYgdGhpcy5lbmFibGVTZXR0aW5ncygpKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyQgPSB0aGlzLnNldHRpbmdTZXJ2aWNlLmdldFNldHRpbmdzKHRoaXMuaWQpO1xyXG4gICAgICAgICAgICBpZiAoIXNldHRpbmdzJCkge1xyXG4gICAgICAgICAgICAgICAgX2RlZmF1bHRTZXR0aW5nKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0dGluZ3MkLnN1YnNjcmliZSgoc2V0cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVTY2hlbWUgJiYgdGhpcy5zZXR0aW5nU2VydmljZVsnc2NoZW1lU2VydmljZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjaGVtYWxpc3QgPSB0aGlzLnNldHRpbmdTZXJ2aWNlWydzY2hlbWVTZXJ2aWNlJ10uZ2V0U3RhdGVWYWx1ZSh0aGlzLmlkLCAnbGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZW1hbGlzdCAmJiBzY2hlbWFsaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZVNldHRpbmcoc2V0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJQcm9maWxlU2V0dGluZyhzZXRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRSb3dIZWlnaHQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdkYXRhJywgdGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKHRoaXMuZ3JvdXBSb3dzICYmICh0aGlzLmRhdGEgJiYgISF0aGlzLmRhdGEubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIF9kZWZhdWx0U2V0dGluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoZXJyLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2RlZmF1bHRTZXR0aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZWZyZXNoU2VsZWN0ZWREYXRhKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZCA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZFt0aGlzLmlkRmllbGRdID09PSB0aGlzLnNlbGVjdGVkUm93LmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cuZGF0YSA9IHJkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yby5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFJvd0tleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhbkRvbSgpO1xyXG5cclxuICAgICAgICAvLyDnp7vpmaTliqjmgIHnmoRzdHlsZVxyXG4gICAgICAgIHRoaXMuZGdzLnJlbW92ZVN0eWxlU2hlZXQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ1NlcnZpY2UgJiYgdGhpcy5zZXR0aW5nU2VydmljZS5kZXN0cm95KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2UuZGVzdHJveSh0aGlzLmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNtcykge1xyXG4gICAgICAgICAgICB0aGlzLnNtcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc21zID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5kb2N1bWVudEJvZHlNb3VzZURvd24sIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuZGVzdHJveSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lZGl0b3JzID0ge307XHJcbiAgICAgICAgRGF0YWdyaWRDb2x1bW5zSGVscGVyLmdyaWRJbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51bmJpbmRNb3ZlU2VsZWN0Um93RXZlbnQoKTtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93U2VsZWN0ZWRMaXN0ICYmIHRoaXMuZGdQYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRnUGFnZXIuY2xvc2VTZWxlY3RlZExpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnIHx8IHRhcmdldC5ub2RlTmFtZSA9PT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLmVkaXRvciAmJiB0aGlzLmN1cnJlbnRDZWxsLmVkaXRvci5fZWRpdG9yQ2xpY2tFdmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICB0aGlzLmVuZENlbGxFZGl0KGV2ZW50KTtcclxuICAgICAgICB0aGlzLmRmcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UGFnaW5hdGlvbk9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlck9wdHMgPSB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkID8gdGhpcy5pZCArICctcGFnZXJfJyArIFV0aWxzLnV1aWQoKSA6ICdmYXJyaXMtZGF0YWdyaWQtcGFnZXJfJyArIFV0aWxzLnV1aWQoKSxcclxuICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2luYXRpb24gPyB0aGlzLnBhZ2VTaXplIDogdGhpcy50b3RhbCxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlUGFnZXJPcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMucGFnZXJPcHRzID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2VyT3B0cywge1xyXG4gICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy50b3RhbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0UGFnZXJUb3RhbCgpIHtcclxuICAgICAgICBjb25zdCBfdG90YWwgPSB0aGlzLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24gJiYgdGhpcy50b3RhbCA9PT0gMCAmJiB0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzLnRvdGFsSXRlbXMgPSBfdG90YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJPcHRzLml0ZW1zUGVyUGFnZSA9IF90b3RhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEZvb3RlckhlaWdodChyb3dzPzogW10pIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93Rm9vdGVyICYmICF0aGlzLmZvb3RlclRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIHJvd3MgPSByb3dzIHx8IHRoaXMuX2Zvb3RlckRhdGFbJ3ZhbHVlJ107XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJvd3MgfHwgIXJvd3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vd3JhcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3MucmVtb3ZlQ3NzUnVsZShgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC5mLWRhdGFncmlkLWZvb3RlciAuZi1kYXRhZ3JpZC1mb290ZXItcm93YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckN1c3RvbVN0eWxlMih7IHN0eWxlOiB7IGhlaWdodDogYCR7dGhpcy5fZm9vdGVyUm93SGVpZ2h0fXB4IWltcG9ydGFudGB9fSwgbnVsbCwgJ2YtZGF0YWdyaWQtZm9vdGVyIC5mLWRhdGFncmlkLWZvb3Rlci1yb3cnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsc05hbWUgPSAnZi1kYXRhZ3JpZC1mb290ZXItcm93IC5mLWRhdGFncmlkLWNlbGwtY29udGVudCxmLWRhdGFncmlkLWdyb3VwLWZvb3RlciAuZi1kYXRhZ3JpZC1jZWxsLWNvbnRlbnQsZi1kYXRhZ3JpZC1mb290ZXItcm93IC5mLWRhdGFncmlkLWNlbGwnO1xyXG4gICAgICAgICAgICAgICAgY2xzTmFtZS5zcGxpdCgnLCcpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZ3MucmVtb3ZlQ3NzUnVsZShgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC4ke259YCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBmaCA9IHRoaXMuX2Zvb3RlclJvd0hlaWdodCAtIDE7XHJcbiAgICAgICAgICAgICAgICBjbHNOYW1lLnNwbGl0KCcsJykuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckN1c3RvbVN0eWxlMih7IHN0eWxlOiB7IGhlaWdodDogYCR7Zmh9cHghaW1wb3J0YW50YCwgXCJsaW5lLWhlaWdodFwiOiBgJHtmaH1weCFpbXBvcnRhbnRgfX0sIG51bGwsIG4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb290ZXJIZWlnaHQgPSByb3dzLmxlbmd0aCAqIHRoaXMuX2Zvb3RlclJvd0hlaWdodDtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1snX2Zvb3Rlcl9oZWlnaHRfdGltZXJfJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpc1snX2Zvb3Rlcl9oZWlnaHRfdGltZXJfJ10pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXNbJ19mb290ZXJfaGVpZ2h0X3RpbWVyXyddID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9wRm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtZm9vdGVyLXRvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdHRvbUZvb3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mLWRhdGFncmlkLWZvb3Rlci1ib3R0b20nKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBfZm9vdEhlaWdodCA9IHJvd3MubGVuZ3RoICogdGhpcy5fZm9vdGVyUm93SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbkZvb3RlclJvd0hlaWdodCA9IGBtaW5fZm9vdGVyX3Jvd19oZWlnaHRfJHt0aGlzLl9mb290ZXJSb3dIZWlnaHR9YDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG9wRm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcEZvb3Rlci5xdWVyeVNlbGVjdG9yQWxsKCd0cicpLmZvckVhY2godHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLmFkZENsYXNzKHRyLCBtaW5Gb290ZXJSb3dIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZSh0b3BGb290ZXIsICdoZWlnaHQnLCBfZm9vdEhlaWdodCsncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Zvb3RIZWlnaHQgPSBNYXRoLm1heCguLi5BcnJheS5mcm9tKHRvcEZvb3Rlci5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpKS5tYXAobiA9PiBuLm9mZnNldEhlaWdodCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUodG9wRm9vdGVyLCAnaGVpZ2h0JywgX2Zvb3RIZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm90dG9tRm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b21Gb290ZXIucXVlcnlTZWxlY3RvckFsbCgndHInKS5mb3JFYWNoKHRyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuYWRkQ2xhc3ModHIsIG1pbkZvb3RlclJvd0hlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoYm90dG9tRm9vdGVyLCAnaGVpZ2h0JywgX2Zvb3RIZWlnaHQrJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZm9vdEhlaWdodCA9IE1hdGgubWF4KC4uLkFycmF5LmZyb20oYm90dG9tRm9vdGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykpLm1hcChuID0+IG4ub2Zmc2V0SGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoYm90dG9tRm9vdGVyLCAnaGVpZ2h0JywgX2Zvb3RIZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZm9vdEhlaWdodCAhPT0gdGhpcy5mb290ZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb290ZXJIZWlnaHQgPSBfZm9vdEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dzLmxlbmd0aCAqIHRoaXMuX2Zvb3RlclJvd0hlaWdodCA+IHRoaXMuZm9vdGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvb3RlckhlaWdodCA9IHJvd3MubGVuZ3RoICogdGhpcy5fZm9vdGVyUm93SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRmcy5jb2x1bW5SZXNpemVFbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGN1c3RvbVN0eWxlS2V5KCkge1xyXG4gICAgICAgIHJldHVybiBgLiR7dGhpcy5fY3VzdG9tX2RhdGFncmlkX2Nsc31gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Um93SGVpZ2h0KHVzZVNpemVUeXBlID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBfcm93SGVpZ2h0ID0gU0laRV9UWVBFW3RoaXMuX3NpemVUeXBlXS5yb3c7XHJcbiAgICAgICAgY29uc3QgX3JoID0gMjk7XHJcbiAgICAgICAgaWYgKHVzZVNpemVUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm93SGVpZ2h0ID0gX3Jvd0hlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJSb3dIZWlnaHQgPSBTSVpFX1RZUEVbdGhpcy5fc2l6ZVR5cGVdLnBhZ2VyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucm93SGVpZ2h0ID0gX3Jvd0hlaWdodCA+IHRoaXMucm93SGVpZ2h0ID8gX3Jvd0hlaWdodCA6IHRoaXMucm93SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qga2V5MSA9IGAke3RoaXMuY3VzdG9tU3R5bGVLZXkoKX0uZi1kYXRhZ3JpZC1ib2R5LXJvdywgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC5mLWRhdGFncmlkLWNlbGxgO1xyXG4gICAgICAgIGNvbnN0IGtleTIgPSBgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC5mLWRhdGFncmlkLWNlbGwtY29udGVudGA7XHJcblxyXG4gICAgICAgIHRoaXMuZGdzLnJlbW92ZUNzc1J1bGUoa2V5MSk7XHJcbiAgICAgICAgdGhpcy5kZ3MucmVtb3ZlQ3NzUnVsZShrZXkyKTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvd0hlaWdodCAhPT0gX3JoICYmIHRoaXMubm93cmFwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd0hlaWdodENTUyA9IFtcclxuICAgICAgICAgICAgICAgIGAke2tleTF9IHsgaGVpZ2h0OiAke3RoaXMucm93SGVpZ2h0fXB4IH1gLFxyXG4gICAgICAgICAgICAgICAgYCR7a2V5Mn0geyBoZWlnaHQ6ICR7dGhpcy5yb3dIZWlnaHR9cHg7IGxpbmUtaGVpZ2h0OiAke3RoaXMucm93SGVpZ2h0fXB4IH1gXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRncy5hcHBlbmRDc3NSdWxlcyhyb3dIZWlnaHRDU1MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0U2VsZWN0T3JDaGVja2VkKCkge1xyXG4gICAgICAgIGNvbnN0IF9kYXRhID0gdGhpcy5kZnMuZ2V0Q3VycmVudFBhZ2VEYXRhKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0ICYmIHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkcyAmJiB0aGlzLmNoZWNrZWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2RhdGEuZmluZChuID0+IG5bdGhpcy5pZEZpZWxkXSA9PSByLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuQ2hlY2tSb3coci5pZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChfZGF0YS5maW5kKG4gPT4gblt0aGlzLmlkRmllbGRdID09IHRoaXMuc2VsZWN0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLnNlbGVjdFZhbHVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hTZWxlY3RlZERhdGEoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWYWx1ZXMgJiYgdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoa2lkcyA9IHRoaXMuY2hlY2tlZHMubWFwKHIgPT4gci5pZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmSWRzID0gdGhpcy5kZnMuZGlmZmVyZW5jZShjaGtpZHMsIHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaWZmSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tSb3dzKGRpZmZJZHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gdGhpcy5jaGVja2Vkcy5tYXAociA9PiByLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNSZXNpemVkIHx8IHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXNDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoX2RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKF9kYXRhPzogYW55KSB7XHJcbiAgICAgICAgaWYgKCFfZGF0YSkge1xyXG4gICAgICAgICAgICBfZGF0YSA9IHRoaXMuZGZzLmdldEN1cnJlbnRQYWdlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNoZWNrQWxsU3RhdHVzID0gMDtcclxuICAgICAgICBpZiAodGhpcy5zaG93QWxsQ2hlY2tib3gpIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsRGF0YUlEcyA9IF9kYXRhLm1hcChyID0+IHJbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrVmFsdWVzID0gYWxsRGF0YUlEcy5maWx0ZXIobiA9PiB0aGlzLmNoZWNrVmFsdWVzLmluY2x1ZGVzKG4pKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXdDaGVja1ZhbHVlcyAmJiBuZXdDaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2FtZSA9ICF0aGlzLmRmcy5kaWZmZXJlbmNlKGFsbERhdGFJRHMsIHRoaXMuY2hlY2tWYWx1ZXMpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1ZhbHVlcyB8fCAhdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmsqHmnInpgInkuK3nmoTmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc1NhbWUpIHsgLy8gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggPT09IHRoaXMuZGF0YS5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgICAgICAvLyDlhajpg6jpgInkuK1cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1NhbWUpIHsgLy8gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggIT09IHRoaXMuZGF0YS5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnInpgInkuK3nmoTmlbDmja7vvIzkvYbkuI3mmK/lhajpg6jpgInkuK1cclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FsbFN0YXR1cyA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGdzLmNoYW5nZUNoZWNrQWxsU3RhdHVzLmVtaXQoY2hlY2tBbGxTdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOW9k+WNlemAieW5tuaYvuekuuWkjemAieahhuaXtu+8jOm7mOiupOWwhiBjaGVja09uU2VsZWN0LCBzZWxlY3RPbkNoZWNrIOiuvue9ruS4uiB0cnVlO1xyXG4gICAgcHJpdmF0ZSBzZXRDaGVja2JveEJlaGF2aW9yKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAvLyBURlM6IDM4MDg5OVxyXG4gICAgICAgICAgICAvLyB0aGlzLmNoZWNrT25TZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdE9uQ2hlY2sgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBfY2FuY2VsQ29sdW1uRml4ZWQoY29sdW1ucykge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghY29sdW1ucy5maWx0ZXIobiA9Pighbi5maXhlZCB8fCAobi5maXhlZCAhPT0gJ2xlZnQnICYmIG4uZml4ZWQgIT09ICdyaWdodCcpICkgJiYgKG4udmlzaWJsZSB8fCBuLnZpc2libGUgPT09IHVuZGVmaW5lZCkpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xzQ291bnQgPSBjb2x1bW5zLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgcmlnaHRDb2xzID0gY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuICAgICAgICAgICAgY29uc3QgbGVmdENvbHMgPSBjb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgIGlmICggbGVmdENvbHMubGVuZ3RoID09IGNvbHNDb3VudCB8fCByaWdodENvbHMubGVuZ3RoID09IGNvbHNDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uZml4ZWQgPSAnJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRDb2xzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRDb2xzLmZvckVhY2godCA9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdC5maXhlZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByaWdodENvbHMuZm9yRWFjaCh0ID0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0LmZpeGVkID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgX2ZsYXRDb2x1bW5zKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5qOA5p+l5YiX5piv5ZCm5Li65YWo5Zu65a6aXHJcbiAgICAgICAgdGhpcy5fY2FuY2VsQ29sdW1uRml4ZWQodGhpcy5jb2x1bW5zWzBdLmZpbHRlcihuID0+IG4uZmllbGQgIT09IHRoaXMuQ29udHJvbFBhbmVsRmVpbGQpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNdWx0aUhlYWRlcigpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhc3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmxhdENvbHVtbnMgPSB0aGlzLmRmcy5nZXRHcm91cENvbHVtbnModGhpcy5jb2x1bW5zWzBdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jb2xzID0gZmxhdHRlbjxEYXRhQ29sdW1uPih0aGlzLmNvbHVtbnMpO1xyXG4gICAgICAgICAgICAgICAgX2NvbHMuZm9yRWFjaChjb2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wucGFyZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9jb2xzLmZpbmQobiA9PiBuLmlkID09PSBjb2wucGFyZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpeGVkID0gdC5maXhlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsYXRDb2x1bW5zID0gX2NvbHMuZmlsdGVyKChjb2w6IERhdGFDb2x1bW4pID0+ICghY29sLmNvbHNwYW4gfHwgY29sLmNvbHNwYW4gPT0gMSkgJiYgdGhpcy5jb2x1bW5Jc1Zpc2libGUoY29sKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZsYXRDb2x1bW5zID0gZmxhdHRlbjxEYXRhQ29sdW1uPih0aGlzLmNvbHVtbnMpLmZpbHRlcigoY29sOiBEYXRhQ29sdW1uKSA9PiAoIWNvbC5jb2xzcGFuIHx8IGNvbC5jb2xzcGFuID09IDEpICYmIHRoaXMuY29sdW1uSXNWaXNpYmxlKGNvbCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgY29sdW1uSXNWaXNpYmxlKGNvbDogRGF0YUNvbHVtbikge1xyXG4gICAgICAgIHJldHVybiBEYXRhZ3JpZENvbHVtbnNIZWxwZXIuY29sdW1uSXNWaXNpYmxlKGNvbCwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5re75Yqg5YiX6K6+572uXHJcbiAgICBwcml2YXRlIGFkZENvbnRyb2xDb2woKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlU2V0dGluZ3MoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sQ29sID0gdGhpcy5jb2x1bW5zWzBdLmZpbmQobiA9PiBuLmZpZWxkID09PSB0aGlzLkNvbnRyb2xQYW5lbEZlaWxkKTtcclxuICAgICAgICAgICAgaWYgKCFjb250cm9sQ29sKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcCA9IHsgZmllbGQ6IHRoaXMuQ29udHJvbFBhbmVsRmVpbGQsIHdpZHRoOiAyNCwgcm93c3BhbjogdGhpcy5jb2x1bW5zLmxlbmd0aCwgZml4ZWQ6ICdyaWdodCcsIHZpc2libGU6IHRydWUgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyMDIxLTA1LTI0IOWQr+eUqOi/h+a7pOihjOWQjuWHuumUmVxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuZW5hYmxlRmlsdGVyUm93KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY3Aucm93c3BhbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1swXS5wdXNoKGNwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xDb2wudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0dyb3VwSGVhZGVyQ29sdW1ucygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc011bHRpSGVhZGVyKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsQ29scyA9IGZsYXR0ZW48RGF0YUNvbHVtbj4odGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgRGF0YWdyaWRDb2x1bW5zSGVscGVyLmNoZWNrR3JvdXBIZWFkZXJDb2x1bW5WaXNpYmxlKGFsbENvbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XliJfpm4blkIg6IFtdIC0+IFtbXV1cclxuXHJcbiAgICBwcml2YXRlIGNvcnJlY3RDb2x1bW5zKHZhbHVlcykge1xyXG4gICAgICAgIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdmFsdWVzXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzIHx8IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrQ29sdW1uc1R5cGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAmJiB0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLmNvbHVtbnNbMF0pKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmNvbHVtbnMgPSBbIHRoaXMuY29sdW1ucyBdO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xDb2woKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzLCBjb2x1bW5zSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbHMuZm9yRWFjaCgoY29sOiBEYXRhQ29sdW1uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5maWVsZCA9IGBmYXJyaXMtZGF0YWdyaWQtY29sdW1uXyR7Y29sdW1uc0luZGV4fV8ke2luZGV4fWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbC52YWxpZ24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnZhbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IGNvbC53aWR0aCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wud2lkdGggPSAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2wud2lkdGggPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wud2lkdGggPSBwYXJzZUludChjb2wud2lkdGgsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6K6w5b2V5Y6f5aeL5a695bqmXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2wub3JpZ2luYWxXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wub3JpZ2luYWxXaWR0aCA9IGNvbC53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZm9ybWF0dGVyICYmIHR5cGVvZiBjb2wuZm9ybWF0dGVyICE9PSAnZnVuY3Rpb24nICYmIE9iamVjdC5rZXlzKGNvbC5mb3JtYXR0ZXIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93R3JvdXBDb2x1bW4gJiYgdGhpcy5ncm91cFJvd3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKHRoaXMuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOi/h+a7pOihjOajgOafpVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29sLmZpbHRlciA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlciA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5jcmVhdGVDb2x1bW5GaWx0ZXJPcHRpb25zKGNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC5maWx0ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29sLmZpbHRlci5vcHRpb25zIHx8ICFPYmplY3Qua2V5cyhjb2wuZmlsdGVyLm9wdGlvbnMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29sLmZpbHRlci50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29sdW1uRmlsdGVyVHlwZS5lbnVtOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0gY29sLmZvcm1hdHRlclsnb3B0aW9ucyddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29sdW1uRmlsdGVyVHlwZS5kYXRlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0geyBkYXRlRm9ybWF0OiAneXl5eS1NTS1kZCcsIHJldHVybkZvcm1hdDogJ3l5eXktTU0tZGQnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb2x1bW5GaWx0ZXJUeXBlLmRhdGV0aW1lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlci5vcHRpb25zID0geyBkYXRlRm9ybWF0OiAneXl5eS1NTS1kZCBISDptbTpzcycsIHJldHVybkZvcm1hdDogJ3l5eXktTU0tZGQgSEg6bW06c3MnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDlhbzlrrkgaGlkZGVuIDIwMjEtMDUtMzFcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sWydoaWRkZW4nXSAhPT0gdW5kZWZpbmVkICYmIGNvbC52aXNpYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2xbJ2hpZGRlbiddID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbC52aXNpYmxlID0gIWNvbFsnaGlkZGVuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbFsnaGlkZGVuJ10gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wudmlzaWJsZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGNvbFsnaGlkZGVuJ10uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWkmuihqOWktOemgeeUqOi/h+a7pFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sLmZpZWxkIHx8IGNvbC5maWVsZC5pbmRleE9mKCdmYXJyaXMtZGF0YWdyaWQtY29sdW1uXycpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLmZpbHRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0dyb3VwUm93U2V0dGluZygpIHtcclxuICAgICAgICAvLyDlpoLmnpzlkK/nlKjliIbnu4TooYzvvIzkvYbmnKrorr7nva7liIbnu4TlrZfmrrXml7bvvIzlsIblhbPpl63liIbnu4TooYzlip/og71cclxuICAgICAgICAvLyBpZiAodGhpcy5ncm91cFJvd3MpIHtcclxuICAgICAgICAvLyAgICAgaWYgKCF0aGlzLmdyb3VwRmllbGQpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMuZ3JvdXBSb3dzID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja01lcmdlQ2VsbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5tZXJnZUNlbGwpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1lcmdlRmllbGRzIHx8ICF0aGlzLm1lcmdlRmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXJnZUNlbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlydHVhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlydHVhbGl6ZWRBc3luY0xvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrU29ydEluZm8oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc29ydE5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSB0aGlzLnNvcnROYW1lLnNwbGl0KCcsJykubWFwKCgpID0+ICdhc2MnKS5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja05vd3JhcCgpIHtcclxuICAgICAgICAvLyDlkK/nlKjmipjooYzlkI7vvIzomZrmi5/liqDovb3nibnmgKflpLHmlYhcclxuICAgICAgICBpZiAoIXRoaXMubm93cmFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlydHVhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SGVhZGVySGVpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0hlYWRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBncmlkSGVhZGVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5oZWFkZXJXcmFwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGhlYWRlcjogaGgsIHBhZ2VyOiBwaH0gPSBTSVpFX1RZUEVbdGhpcy5fc2l6ZVR5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlVGhlbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJIZWlnaHQgPSAgaGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJSb3dIZWlnaHQgPSBwaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IHRoaXMuY29sdW1ucy5sZW5ndGggKiB0aGlzLmhlYWRlckhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVGaWx0ZXJSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgKz0gdGhpcy5maWx0ZXJSb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGdyaWRIZWFkZXJFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyaWRIZWFkZXJFbC5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyaWRIZWFkZXJFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShncmlkSGVhZGVyRWwsICdtaW5IZWlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZml4ZWRMZWZ0SGVhZGVyID0gZ3JpZEhlYWRlckVsLnF1ZXJ5U2VsZWN0b3IoJy5mLWRhdGFncmlkLWhlYWRlci1maXhlZC1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpeGVkTGVmdEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZml4ZWRMZWZ0SGVhZGVyLCAnaGVpZ2h0JywgJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkUmlnaHRIZWFkZXIgPSBncmlkSGVhZGVyRWwucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtaGVhZGVyLWZpeGVkLXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGZpeGVkUmlnaHRIZWFkZXIsICdoZWlnaHQnLCAnYXV0bycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJzID0gZ3JpZEhlYWRlckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlIHRyOm5vdCguZi1kYXRhZ3JpZC1maWx0ZXItcm93KScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRycy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShuLmNoaWxkcmVuKS5mb3JFYWNoKChhOiBhbnkpID0+IGEuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVFbHMgPSBBcnJheS5mcm9tKGdyaWRIZWFkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0YWJsZUVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHRzID0gdGFibGVFbHMubWFwKCh0OiBhbnkpID0+IHQub2Zmc2V0SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gTWF0aC5tYXgoLi4uaGVpZ2h0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhbEhlYWRlckhlaWdodCA9IG1heEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZEhlYWRlckVsLnN0eWxlLm1pbkhlaWdodCA9IHRoaXMucmVhbEhlYWRlckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZml4ZWRMZWZ0SGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShmaXhlZExlZnRIZWFkZXIsICdoZWlnaHQnLCB0aGlzLnJlYWxIZWFkZXJIZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGZpeGVkUmlnaHRIZWFkZXIsICdoZWlnaHQnLCAgdGhpcy5yZWFsSGVhZGVySGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWxIZWFkZXJIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YiX6ZuG5ZCI5Y+Y5YyWXHJcbiAgICBjb2x1bW5zQ2hhbmdlZChyZWxvYWREYXRhID0gdHJ1ZSwgdXNlQ29sdW1uU2V0dGluZ1dpZHRoID0gbnVsbCwgcmVidWlsZEZpbHRlckJhciA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBfdXNlQ29sdW1uU2V0dGluZ1dpZHRoID0gdXNlQ29sdW1uU2V0dGluZ1dpZHRoID09PSBudWxsID8gdGhpcy5maXRDb2x1bW5zIDogdXNlQ29sdW1uU2V0dGluZ1dpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZXhwYW5kR3JvdXBSb3dzJywgdGhpcy5leHBhbmRHcm91cFJvd3MpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrQ29sdW1uc1R5cGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZmxhdENvbHVtbnMoKTtcclxuICAgICAgICB0aGlzLmhlYWRlckhlaWdodENoYW5nZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnZmxhdENvbHVtbnMnLCB0aGlzLmZsYXRDb2x1bW5zKTtcclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVDb2x1bW5zKHRoaXMuY29sdW1ucywgX3VzZUNvbHVtblNldHRpbmdXaWR0aCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuY29sR3JvdXAgPSB0aGlzLmRmcy5nZXRTdGF0ZSgpLmNvbHVtbnNHcm91cDtcclxuICAgICAgICAvLyDliqjmgIHliJflkIjorqHooYxcclxuICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlckRhdGEoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZ3MuY29sdW1uc0NoYW5nZWQuZW1pdCh7IHNjcm9sbFRvTGVmdDogcmVsb2FkRGF0YSwgcmVidWlsZEZpbHRlckJhciB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJlbG9hZERhdGEpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzWydfQ09MVU1OU19DSEFOQUdFRF9USU1FUl8nXSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNbJ19DT0xVTU5TX0NIQU5BR0VEX1RJTUVSXyddKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpc1snX0NPTFVNTlNfQ0hBTkFHRURfVElNRVJfJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9LCA2MCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIl+WktOWPmOWMllxyXG4gICAgcHJpdmF0ZSBoZWFkZXJIZWlnaHRDaGFuZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRIZWFkZXJIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLmRncy5zaG93R3JpZEhlYWRlci5lbWl0KHRoaXMucmVhbEhlYWRlckhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuWcqOW8ueWHuueahOeql+WPo+S4re+8m+i/lOWbnnVuZGVmaW5kIOivtOaYjuayoeacieWcqOW8ueWHuueahOeql+WPo++8jOWQpuWImeinhuS4uuW9k+WJjeWIl+ihqOWcqOW8ueWHuueql+WPo+S9v+eUqCAqL1xyXG4gICAgaW5EaWFsb2coKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCcubW9kYWwtYm9keScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBJbml0XHJcbiAgICAvKiog5Yid5aeL57yW6L6R5Zmo5LiO6aqM6K+B5ZmoICovXHJcbiAgICBwcml2YXRlIGluaXRFZGl0b3JBbmRWYWxpZGF0b3IoKSB7XHJcbiAgICAgICAgY29uc3QgRWRpdG9ycyA9IHRoaXMuaW5qZWN0LmdldDxhbnlbXT4oR1JJRF9FRElUT1JTLCBbXSk7XHJcblxyXG4gICAgICAgIGlmIChFZGl0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBFZGl0b3JzLmZvckVhY2goZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3JzW2VkLm5hbWVdID0gZWQudmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBfdmFsaWRhdG9ycyA9IHRoaXMuaW5qZWN0LmdldDxhbnlbXT4oR1JJRF9WQUxJREFUT1JTLCBbXSk7XHJcbiAgICAgICAgaWYgKF92YWxpZGF0b3JzICYmIF92YWxpZGF0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBfdmFsaWRhdG9ycy5mb3JFYWNoKHZyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMudmFsaWRhdG9yc1t2ci5uYW1lXSA9IHZyLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0b3JzID0gX3ZhbGlkYXRvcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFBhZ2VySGVpZ2h0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy51c2VIdG1sVGFibGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZXJIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlckhlaWdodCA9IHRoaXMuZGdQYWdlciAmJiB0aGlzLmRnUGFnZXIub3V0ZXJIZWlnaHQgfHwgNDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0U3RhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhIHx8IFtdO1xyXG5cclxuICAgICAgICBsZXQgc3RhID0ge307XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcykuZm9yRWFjaCgoazogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghSWdub3JlUHJvcGVydGllcy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICAgICAgc3RhW2tdID0gdGhpc1trXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmRmcy5pbml0U3RhdGUoeyAuLi5zdGEsIGZpdENvbHVtbnM6IHRoaXMuZml0Q29sdW1ucywgZml0OiB0aGlzLmZpdCwgZ3JvdXBGaWVsZDogdGhpcy5fZ3JvdXBGaWVsZCB9KTtcclxuICAgICAgICBzdGEgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Rml0Q29sdW1ucyhmaXRDb2x1bW5zID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbHVtbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMuZml0Q29sdW1ucyhmaXRDb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRHcmlkTmV3U2l6ZVdoZW5GaXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmdldEVsZW1lbnRQYWRkaW5nKHBhcmVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvcmRlciA9IHRoaXMuZ2V0RWxlbWVudEJvcmRlcldpZHRoKHBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbSA9ICdmbG9vcidcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0ICYmIHRoaXMuYXV0b0hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgbSA9ICdjZWlsJztcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBNYXRoW21dKE1hdGguZmxvb3Iod2lkdGgpIC0gYm9yZGVyLmxlZnQgLSBib3JkZXIucmlnaHQgLSBwYWRkaW5nLmxlZnQgLSBwYWRkaW5nLnJpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoW21dKE1hdGguZmxvb3IoaGVpZ2h0KSAtIGJvcmRlci50b3AgLSBib3JkZXIuYm90dG9tIC0gcGFkZGluZy50b3AgLSBwYWRkaW5nLmJvdHRvbSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhIZWlnaHQgJiYgdGhpcy5hdXRvSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuZGZzLmdldFN0YXRlKCkuaGVpZ2h0IHx8IDMwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5kZnMuZ2V0U3RhdGUoKS53aWR0aCB8fCA4MDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUdyaWRTaXplKGZpdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy51c2VIdG1sVGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2V0TmV3U2l6ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGggPSB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlQmxhbmtXaGVuRGF0YUlzRW1wdHkgJiYgKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICBoID0gdGhpcy5lbXB0eURhdGFIZWlnaHQgKyB0aGlzLnJlYWxIZWFkZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1Jvd0dyb3VwUGFuZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBoICs9IHRoaXMucm93R3JvdXBQYW5lbEhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93RmlsdGVyQmFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaCArPSB0aGlzLmZpbHRlckJhckhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Rm9vdGVyICYmIHRoaXMuZm9vdGVyRGF0YVsndmFsdWUnXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBoICs9IHRoaXMuZm9vdGVySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaCA9IHRoaXMucGFnZXJIZWlnaHQgfHwgNDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaCArPSBwaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdyaWRTaXplLmhlaWdodCA9PT0gaCArICdweCcgJiYgdGhpcy5ncmlkU2l6ZS53aWR0aCA9PT0gdGhpcy53aWR0aCArICdweCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ncmlkU2l6ZSA9IHsgd2lkdGg6IHRoaXMud2lkdGggKyAncHgnLCBoZWlnaHQ6IGggKyAncHgnIH07XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnJlc2l6ZSh7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IGggfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0R3JpZE5ld1NpemVXaGVuRml0KCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoICYmIHRoaXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc2l6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc2V0TmV3U2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc2l6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jZFsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNldE5ld1NpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0QmVmb3JlRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVVuc2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVW5zZWxlY3QgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVDaGVjaykge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUNoZWNrID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlVW5jaGVjaykge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVVuY2hlY2sgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTb3J0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU29ydENvbHVtbiA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUVkaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVFZGl0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYWZ0ZXJFZGl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJFZGl0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlSb3dzID0gKGluZGV4OiBudW1iZXIsIHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKHJvdykge1xyXG4gICAgICAgICAgICByZXR1cm4gcm93W3RoaXMuaWRGaWVsZF0gfHwgaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24g5b+r5o236ZSuXHJcblxyXG4gICAgcHJpdmF0ZSB1bmJpbmRNb3ZlU2VsZWN0Um93RXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Um93S2V5ZG93bkhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudFJvd0tleWRvd25IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYmluZERvY3VtZW50TW92ZVNlbGVjdFJvd0V2ZW50KCkge1xyXG4gICAgICAgIHRoaXMudW5iaW5kTW92ZVNlbGVjdFJvd0V2ZW50KCk7XHJcbiAgICAgICAgdGhpcy51bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRSb3dLZXlkb3duSGFuZGxlciA9IHRoaXMucmVuZGVyMi5saXN0ZW4oZG9jdW1lbnQsICdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaGFzIGxvYWRpbmdcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZhcnJpcy1sb2FkaW5nJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TmFtZSA9IChlLnRhcmdldCBhcyBhbnkpLm5vZGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaWdub3JlVGFyZ2V0LmluZGV4T2YodGFyZ2V0TmFtZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDAgfHwgZS5rZXlDb2RlID09PSAzOCkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRSb3coKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RQcmV2Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFZGl0TGlzdGVuZXJJbk1vZGFsKCkge1xyXG4gICAgICAgIC8vIOW8ueeql+S4reS6i+S7tuWkhOeQhlxyXG4gICAgICAgIGlmIChVdGlscy5oYXNEaWFsb2dPcGVuKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWxFbGVtZW50ID0gdGhpcy5pbkRpYWxvZygpO1xyXG4gICAgICAgICAgICBpZiAobW9kYWxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfZm1vZGFsID0gbW9kYWxFbGVtZW50LmNsb3Nlc3QoJy5mYXJyaXMtbW9kYWwnKTtcclxuICAgICAgICAgICAgICAgIGlmIChfZm1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RhbENsaWNrRXZlbnQgPSB0aGlzLnJlbmRlcjIubGlzdGVuKF9mbW9kYWwsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRG9jdW1lbnRNb3VzZURvd24gPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBkZ3JpZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZi1kYXRhZ3JpZCcpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGdyaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVEYXRhR3JpZChmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRncmlkLmlkID09PSB0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSAmJiAodGhpcy5leGl0Um93RWRpdGluZ1doZW5Cb2R5Q2xpY2sgfHwgdGhpcy5lZGl0TW9kZSA9PSAnY2VsbCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFZGl0aW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChVdGlscy5oYXNEaWFsb2dPcGVuKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kbGcgPSB0aGlzLmluRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYXJnZXRJbkRpYWxvZyA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubW9kYWwtYm9keScpO1xyXG4gICAgICAgICAgICBpZiAoaW5kbGcgJiYgY3VycmVudFRhcmdldEluRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kbGcgIT0gY3VycmVudFRhcmdldEluRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCkge1xyXG4gICAgICAgICAgICBpZiAoICF0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHpvbmVDbGljayA9IGV2ZW50LnRhcmdldFsnX196b25lX3N5bWJvbF9fY2xpY2tmYWxzZSddO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNCZUJ0biA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuYmVkZXNpZ25lci10b29sYmFyJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc09sZEJlQnRuID0gZXZlbnQudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdiZUVsZUdyaWRCdXR0b24nKSA+IC0xO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZUNsaWNrRXZlbnQgPSB6b25lQ2xpY2sgJiYgem9uZUNsaWNrLmxlbmd0aCAmJiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5mLXNlY3Rpb24taW4tbWFpbnN1YmNhcmQnKSB8fCBpc09sZEJlQnRuIHx8IGlzQmVCdG4gfHwgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5kYXRhZ3JpZC10b29sYmFycycpKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChkaXNhYmxlQ2xpY2tFdmVudCAmJiAhZGdyaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdGltZXIgPSBkaXNhYmxlQ2xpY2tFdmVudCA/ICgoaXNCZUJ0biB8fCBpc09sZEJlQnRuKT8gNTA6IDIwMCkgOiAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcEVkaXRpbmdSb3dJbmRleCA9IHRoaXMuY3VycmVudENlbGwucm93SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNsb3NlRWRpdCgpLnBpcGUoZGVib3VuY2VUaW1lKF90aW1lcikpLnN1YnNjcmliZShmID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiBzdG9wRWRpdGluZ1Jvd0luZGV4ICE9PSB0aGlzLmN1cnJlbnRDZWxsLnJvd0luZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwgJiYgdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQsIENFTExfRURJVElOR19DTFMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzYWJsZUNsaWNrRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvbmVDbGljay5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uY2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNCZUJ0biB8fCBpc09sZEJlQnRuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0VkaXRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5lZGl0TW9kZSA9PSAnY2VsbCcgfHwgdGhpcy5leGl0Um93RWRpdGluZ1doZW5Cb2R5Q2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEVkaXRpbmcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgdGhpcy51bmJpbmREb2N1bWVudEVkaXRMaXN0ZW5lcigpO1xyXG4gLypcclxuICAgICAgICBpZiAoIXRoaXMuZG9jdW1lbnRDZWxsQ2xpY2tIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEVkaXRMaXN0ZW5lckluTW9kYWwoKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxDbGlja0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVdGlscy5oYXNEaWFsb2dPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kbGcgPSB0aGlzLmluRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUYXJnZXRJbkRpYWxvZyA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcubW9kYWwtYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kbGcgJiYgY3VycmVudFRhcmdldEluRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kbGcgIT0gY3VycmVudFRhcmdldEluRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvbUhhbmRsZXIucmVtb3ZlQ2xhc3ModGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCwgQ0VMTF9TRUxFQ1RFRF9DTFMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGhpcy5kZnMuZW5kRWRpdENlbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudC5jbG9zZUVkaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5kZnMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMudW5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwuaXNFZGl0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZGZzLmVuZEVkaXRDZWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQuY2xvc2VFZGl0KCkuc3Vic2NyaWJlKGYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQsIENFTExfU0VMRUNURURfQ0xTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21IYW5kbGVyLnJlbW92ZUNsYXNzKHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQsIENFTExfRURJVElOR19DTFMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RWRpdExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1ZW1udENlbGxDbGlja0V2ZW50cyA9IHRoaXMucmVuZGVyMi5saXN0ZW4oZG9jdW1lbnQsICdjbGljaycsIHRoaXMuZG9jdW1lbnRDZWxsQ2xpY2tIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiovXHJcbiAgICAgICAgaWYgKCF0aGlzLmRvY3VtZW50Q2VsbEtleWRvd25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDZWxsS2V5ZG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5mLWRhdGFncmlkJykgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lICE9PSAnQk9EWScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uS2V5RG93bkV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDZWxsS2V5ZG93bkV2ZW50cyA9IHRoaXMucmVuZGVyMi5saXN0ZW4oZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5kb2N1bWVudENlbGxLZXlkb3duSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdW5iaW5kRG9jdW1lbnRFZGl0TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRDZWxsQ2xpY2tIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdWVtbnRDZWxsQ2xpY2tFdmVudHMoKTtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxDbGlja0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRDZWxsS2V5ZG93bkhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudENlbGxLZXlkb3duRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDZWxsS2V5ZG93bkhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kYWxDbGlja0V2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDbGlja0V2ZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDbGlja0V2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbktleURvd25FdmVudChlOiBhbnkpIHtcclxuICAgICAgICAvLyBpZiAoZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgIXRoaXMuZWRpdGFibGUpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuZi1kYXRhZ3JpZCcpKSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGUua2V5Q29kZTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmICF0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICBpZiAoWzEzLCA0MCwgMzcsIDM4LCAzOSwgOV0uaW5kZXhPZihrZXlDb2RlKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDMyOiAvLyDnqbrmoLxcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAmJiB0aGlzLmN1cnJlbnRDZWxsLmNvbHVtbi5vblNwYWNlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNvbHVtbi5vblNwYWNlSGFuZGxlcih7IGdyaWQ6IHRoaXMsIGNlbGw6IHRoaXMuY3VycmVudENlbGwsIGV2ZW50OiBlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6IC8vIEVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm4gPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50WydlZGl0Q2VsbCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwuY29sdW1uLm9uRW50ZXJIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNvbHVtbi5vbkVudGVySGFuZGxlcih7IGdyaWQ6IHRoaXMsIGNlbGw6IHRoaXMuY3VycmVudENlbGwsIGV2ZW50OiBlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDogLy8g4oaTXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0Q2VsbCgnZG93bicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODogLy8g4oaRXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROZXh0Q2VsbCgndXAnLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzk6IC8vIOKGklxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dENlbGwoJ3JpZ2h0JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OiAvLyDihpBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRDZWxsKCdsZWZ0JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6IC8vIFRhYlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0TmV4dENlbGwoJ2xlZnQnLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5leHRDZWxsKCdyaWdodCcsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZXMoKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3MgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc3MpIHtcclxuICAgICAgICAgICAgICAgIHNzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICBzcyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRvY3VlbW50Q2VsbENsaWNrRXZlbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdWVtbnRDZWxsQ2xpY2tFdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIEVkaXRpbmdcclxuXHJcbiAgICBpc1Jvd0VkaXRpbmcoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkUm93IHx8IHRoaXMuc2VsZWN0ZWRSb3cuaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0TW9kZSA9PT0gJ3JvdycpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUm93LmVkaXRvcnMgJiYgdGhpcy5zZWxlY3RlZFJvdy5lZGl0b3JzLmxlbmd0aDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0NlbGxFZGl0aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuZWRpdE1vZGUgPT09ICdjZWxsJykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudENlbGwuZWRpdG9yICYmIHRoaXMuY3VycmVudENlbGwuY29sdW1uICYmICF0aGlzLmN1cnJlbnRDZWxsLmNvbHVtbi5lZGl0b3JUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmNlbGxSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxSZWYuaXNFZGl0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudENlbGwuaXNFZGl0aW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNFZGl0aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVkaXRNb2RlID09PSAncm93Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1Jvd0VkaXRpbmcoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NlbGxFZGl0aW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVuZEVkaXRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWRpdE1vZGUgPT09ICdyb3cnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kUm93RWRpdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGl0TW9kZSA9PT0gJ2NlbGwnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RWRpdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFJvdy5lZGl0b3JzO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRDZWxsKHJvd0lkOiBhbnksIGZpZWxkOiBzdHJpbmcsIHZhbGlkYXRpb246ICB7IGlzVmFsaWQ6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyB9ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlRGF0YUdyaWQoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSB0aGlzLmRmcy5maW5kUm93SW5kZXgocm93SWQpO1xyXG4gICAgICAgIGlmIChyb3dJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kQ2VsbEVkaXQoKTtcclxuICAgICAgICAgICAgY29uc3QgdHJJZCA9IFRSX1BSRUZJWCArIHJvd0lkO1xyXG4gICAgICAgICAgICAvLyBjb25zdCB0ckRvbSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpO1xyXG4gICAgICAgICAgICBjb25zdCB0ckRvbSA9IFV0aWxzLmdldFRyRG9tQnlJZCh0cklkLCB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRkRG9tID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRyRG9tKSB7XHJcbiAgICAgICAgICAgICAgICB0ZERvbSA9IHRyRG9tLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7ZmllbGR9XCJdYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5nZXRDb2x1bW4oZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoIXRkRG9tICYmIGNvbC5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgdHJEb21MID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdHJJZCArICdfZml4ZWRsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJEb21MID0gVXRpbHMuZ2V0VHJEb21CeUlkKHRySWQgKyAnX2ZpeGVkbGVmdCcsIHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGREb20gPSB0ckRvbUwgJiYgdHJEb21MLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7ZmllbGR9XCJdYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbC5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHRyRG9tUiA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQgKyAnX2ZpeGVkcmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ckRvbVIgPSBVdGlscy5nZXRUckRvbUJ5SWQodHJJZCArICdfZml4ZWRyaWdodCcsIHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGREb20gPSB0ckRvbVIgJiYgdHJEb21SLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7ZmllbGR9XCJdYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0aW9ucyA9IE9iamVjdC5hc3NpZ24oIHRoaXMuZm9ybVZhbGlkYXRpb25zIHx8IHt9LCB7IFtmaWVsZF06IHZhbGlkYXRpb259KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICh0ZERvbSAmJiB0ZERvbVsnZWRpdENlbGwnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1snRURJVENFTExfVElNRVInXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzWydFRElUQ0VMTF9USU1FUiddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXNbJ0VESVRDRUxMX1RJTUVSJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZERvbS5lZGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZW5kQ2VsbEVkaXQoZXZlbnQ/OiBhbnkpIHtcclxuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmNsaWNrKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwpIHtcclxuICAgICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kZnMuZW5kRWRpdENlbGwoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFZGl0b3JSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFZGl0b3JSZWYuaGlkZUNvdmVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcEVkaXQgPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNsb3NlRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3BFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcEVkaXQuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFJvdyhyb3dJZD86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5lZGl0YWJsZSB8fCB0aGlzLmVkaXRNb2RlICE9PSAncm93JykgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgaWYgKHJvd0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KHJvd0lkKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZWxlY3QgYSByb3cuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgaW5kZXg6IHJvd0luZGV4LCBkYXRhOiByb3dEYXRhIH0gPSB7IC4uLnRoaXMuc2VsZWN0ZWRSb3cgfTtcclxuXHJcbiAgICAgICAgY29uc3QgYmVmb3JlRWRpdEV2ZW50ID0gdGhpcy5iZWZvcmVFZGl0KHsgcm93SW5kZXgsIHJvd0RhdGEsIGdyaWRJbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICBpZiAoIWJlZm9yZUVkaXRFdmVudCB8fCAhYmVmb3JlRWRpdEV2ZW50LnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgncGxlYXNlIHJldHVybiBhbiBPYnNlcnZhYmxlIFR5cGUuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRySWQgPSBUUl9QUkVGSVggKyByb3dJZDtcclxuICAgICAgICAvLyBjb25zdCB0ckRvbSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpO1xyXG4gICAgICAgIGNvbnN0IHRyRG9tID0gVXRpbHMuZ2V0VHJEb21CeUlkKHRySWQsIHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFJvdy5kcikge1xyXG4gICAgICAgICAgICB0ckRvbS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmVmb3JlRWRpdEV2ZW50LnN1YnNjcmliZSgoZmxhZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cuZHIgJiYgdGhpcy5zZWxlY3RlZFJvdy5kci5jZWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5zZWxlY3RlZFJvdy5kci5jZWxscy50b0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjZWxscyB8fCAhY2VsbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZWxsLmNvbHVtbi5lZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuaXNFZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cuZHIuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGl0b3JzID0gY2VsbHMubWFwKGNlbGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwuY2VsbEVkaXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZWxsLmNlbGxFZGl0b3IuY29tcG9uZW50UmVmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZWRpdG9yID0+IGVkaXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cuZWRpdG9ycyA9IGVkaXRvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdG9ycyAmJiBlZGl0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkaXRvcnNbMF0uaW5zdGFuY2UuaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yc1swXS5pbnN0YW5jZS5pbnB1dEVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g57uR5a6a6ZSu55uY5LqL5Lu2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZFJvd0VkaXRvcktleWRvd25FdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2RbJ2Rlc3Ryb3llZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJlZ2luRWRpdC5lbWl0KHsgcm93SW5kZXgsIHJvd0RhdGEsIGdyaWRJbnN0YW5jZTogdGhpcywgZWRpdG9yOiBlZGl0b3JzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5kUm93RWRpdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSb3dFZGl0aW5nKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2FuRW5kOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZWxlY3QgYSByb3cuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBpbmRleDogcm93SW5kZXgsIGRhdGE6IHJvd0RhdGEsIGRyIH0gPSB7IC4uLnRoaXMuc2VsZWN0ZWRSb3cgfTtcclxuICAgICAgICBjb25zdCB7IGVkaXRvcjogY3VycmVudEVkaXRvciwgY29sdW1uIH0gPSB7IC4uLnRoaXMuY3VycmVudENlbGwgfTtcclxuICAgICAgICAvLyBibHVyXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGljaygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGNhbkVuZDogZmFsc2UgfTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAoIWRyLmZvcm0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtjYW5FbmQ6IHRydWV9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgcm93Rm9ybSA9IGRyLmZvcm0gYXMgRm9ybUdyb3VwO1xyXG4gICAgICAgIHJvd0Zvcm0ubWFya0FzVG91Y2hlZCgpO1xyXG4gICAgICAgIGlmIChyb3dGb3JtLmludmFsaWQgJiYgIXRoaXMuZW5kRWRpdEJ5SW52YWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjYW5FbmQ6IGZhbHNlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZnRlckVkaXQg6KaB5Lyg6YCS55u45YWz5Y+C5pWw77yM5Zyo57yW6L6R54q25oCB5pe277yM56e75Yqo5rua5Yqo5p2h5Lya5Ye65LqLXHJcbiAgICAgICAgY29uc3QgYWZ0ZXJFZGl0RXZlbnQgPSB0aGlzLmFmdGVyRWRpdChyb3dJbmRleCwgcm93RGF0YSwgY29sdW1uLCBjdXJyZW50RWRpdG9yKTtcclxuICAgICAgICBpZiAoIWFmdGVyRWRpdEV2ZW50IHx8ICFhZnRlckVkaXRFdmVudC5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ3BsZWFzZSByZXR1cm4gYW4gT2JzZXJ2YWJsZSBUeXBlLicpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBjYW5FbmQ6IGZhbHNlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZnRlckVkaXRFdmVudC5zdWJzY3JpYmUoKGZsYWc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VBbGxDZWxsRWRpdG9yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cuZHIuZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cuZHIucm93RGF0YSA9IE9iamVjdC5hc3NpZ24odGhpcy5zZWxlY3RlZFJvdy5kci5yb3dEYXRhLCB0aGlzLnNlbGVjdGVkUm93LmRyLmZvcm0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVJvdyh0aGlzLnNlbGVjdGVkUm93LmlkLCB0aGlzLnNlbGVjdGVkUm93LmRyLnJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB2YWwgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWRpdG9yICYmIGN1cnJlbnRFZGl0b3IuZm9ybUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBjdXJyZW50RWRpdG9yLmZvcm1Db250cm9sLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRWRpdC5lbWl0KHsgcm93SW5kZXgsIHJvd0RhdGEsIGNvbHVtbiwgdmFsdWU6IHZhbCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRncy5yZWZyZXNoRm9vdGVyRGF0YS5lbWl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxFZGl0KHJvd0lkOiBhbnksIGVtaXQgPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc0VkaXRpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsb3NlQWxsQ2VsbEVkaXRvcigpO1xyXG4gICAgICAgIGlmIChyb3dJZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRmcy5yZWplY3RDaGFuZ2VzKHJvd0lkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsRWRpdGVkLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VBbGxDZWxsRWRpdG9yKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuZHIpIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLnNlbGVjdGVkUm93LmRyLmNlbGxzO1xyXG4gICAgICAgICAgICBpZiAoY2VsbHMpIHtcclxuICAgICAgICAgICAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiBjZWxsLmlzRWRpdGluZyA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbC5pc0VkaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93LmVkaXRvcnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Y+W5raI6ZSu55uY5LqL5Lu2XHJcbiAgICAgICAgdGhpcy51bmJpbmRSb3dFZGl0b3JLZXlkb3duRXZlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJvd0VkaXRUYWJLZXlkd29uRXZlbnQoZTogYW55KSB7XHJcbiAgICAgICAgY29uc3Qga2V5Q29kZSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xyXG5cclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gOSkgeyAgLy8gdGFiXHJcbiAgICAgICAgICAgIGNvbnN0IHRkID0gZS50YXJnZXQuY2xvc2VzdCgndGQnKTtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSBlLnRhcmdldC5jbG9zZXN0KCd0cicpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0VGQgPSB0ZC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBoYXNOb0VkaXRvciA9IChfdGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFfdGQucXVlcnlTZWxlY3RvcignaW5wdXQnKSAmJiAhX3RkLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykgJiYgIV90ZC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXROZXh0Um93ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFRyID0gdHIubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRUcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRUci5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRSb3dpZCA9IG5leHRUci5nZXRBdHRyaWJ1dGUoJ2lkJykucmVwbGFjZShUUl9QUkVGSVgsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFJvd2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdFJvdyhuZXh0Um93aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0VGQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNOb0VkaXRvcihuZXh0VGQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGRzID0gdHIucXVlcnlTZWxlY3RvckFsbCgndGQnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGRJZHggPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB0ZHMuZm9yRWFjaCgodCwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gbmV4dFRkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZElkeCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dFRyRWRpdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRkSWR4IDwgdGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfbnRkID0gdGRzW3RkSWR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc05vRWRpdG9yKF9udGQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZElkeCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFRyRWRpdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0VHJFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXROZXh0Um93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWRpdE5leHRSb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRSb3dFZGl0b3JLZXlkb3duRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRvY3VtZW50Um93RWRpdEtleWRvd25IYW5sZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRSb3dFZGl0S2V5ZG93bkhhbmxkZXIgPSB0aGlzLnJlbmRlcjIubGlzdGVuKGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMucm93RWRpdFRhYktleWR3b25FdmVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENsaWNrRW5kUm93RWRpdEhhbmRsZXIgPSB0aGlzLnJlbmRlcjIubGlzdGVuKGRvY3VtZW50LCAnY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoVXRpbHMuaGFzRGlhbG9nT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93RWRpdGluZygpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmRSb3dFZGl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVuYmluZFJvd0VkaXRvcktleWRvd25FdmVudCgpIHtcclxuICAgICAgICAvLyDlj5bmtojplK7nm5jkuovku7ZcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudFJvd0VkaXRLZXlkb3duSGFubGRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50Um93RWRpdEtleWRvd25IYW5sZGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRSb3dFZGl0S2V5ZG93bkhhbmxkZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRDbGlja0VuZFJvd0VkaXRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDbGlja0VuZFJvd0VkaXRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDbGlja0VuZFJvd0VkaXRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIExvYWQgRGF0YVxyXG5cclxuXHJcbiAgICBwcml2YXRlIF9jbGllbnRGaWx0ZXIoY29uZGl0aW9uczogYW55LCBleGN1dGVMb2NhbGVGaWx0ZXIgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIOWuouaIt+err+i/h+a7pFxyXG4gICAgICAgIGlmIChleGN1dGVMb2NhbGVGaWx0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsQ2xpZW50RGF0YSA9IHRoaXMuZGZzLmdldERhdGEodHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25zICYmIE9iamVjdC5rZXlzKGNvbmRpdGlvbnMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2RhdGEgPSB0aGlzLmNsaWVudEZpbHRlclNlcnZpY2UuZXhlY3V0ZUZpbHRlcihhbGxDbGllbnREYXRhLCBjb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLmxvYWRGaWx0ZXJEYXRhKF9kYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEoYWxsQ2xpZW50RGF0YSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX2NvbmRpdGlvbnMgPSB0aGlzLmNoZWNrRmlsdGVyVmFsdWVzKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyQ2hhbmdlZC5lbWl0KF9jb25kaXRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNtYXJ0RmlsdGVyRGF0YShjb25kaXRpb25zOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5yZW1vdGVGaWx0ZXIpIHsgLy8g5pyN5Yqh5Zmo56uv6L+H5rukXHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlGaWx0ZXJzID0gdGhpcy5jbGllbnRGaWx0ZXJTZXJ2aWNlLmNvbnZlcnRTbWFydEZpbHRlcjJFbnRpdHlGaWx0ZXIoY29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIGVudGl0eUZpbHRlcnMgPSB0aGlzLmNoZWNrRmlsdGVyVmFsdWVzKGVudGl0eUZpbHRlcnMpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZWQuZW1pdChlbnRpdHlGaWx0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlrqLmiLfnq6/ov4fmu6RcclxuICAgICAgICAgICAgdGhpcy5fY2xpZW50RmlsdGVyKGNvbmRpdGlvbnMsIHRoaXMudXNlRGVmYXVsdEZpbHRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBzbWFydCBmaXRsZXIg5riF56m65p+l6K+i5p2h5Lu2XHJcbiAgICBvbkNsZWFyU21hcnRGaWx0ZXJzKCRldmVudD86IGFueSkge1xyXG4gICAgICAgIHRoaXMuc21hcnRGaWx0ZXJSZXN1bHQgPSB7IGNvbmRpdGlvbnM6IFtdLCBjb250cm9sRGF0YTogW10gfTtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnNtYXJ0RmlsdGVyRGF0YShbXSk7XHJcbiAgICAgICAgdGhpcy5zbWFydEZpbHRlclNlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkZpbHRlckJhclJlc2l6ZSgwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlbW92ZVNtYXJ0RmlsdGVySXRlbSgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGUgPSB7IC4uLiRldmVudCB9O1xyXG4gICAgICAgICAgICBlWydsYWJlbENvZGUnXSA9ICRldmVudC5maWVsZENvZGU7XHJcbiAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJTZXJ2aWNlLnJlbW92ZUNvbmRpdGlvbihlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25GaWx0ZXJCYXJSZXNpemUoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJCYXJIZWlnaHQgPSAkZXZlbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNtYXJ0RmlsdGVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtZGF0YWdyaWQtY29sdW1uLWRyb3AtcGFuZWwnKTtcclxuICAgICAgICBpZiAoc21hcnRGaWx0ZXJFbCAmJiAhJGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHNtYXJ0RmlsdGVyRWwuc3R5bGUudG9wID0gJzBweCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGdzLnNob3dHcmlkSGVhZGVyLmVtaXQodGhpcy5yZWFsSGVhZGVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmRncy5zbWFydEZpbHRlckJhckV4cGFuZC5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25TbWFydEZpbHRlckNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGNvbmRpdGlvbnMsIGZpbHRlckl0ZW0gfSA9ICRldmVudDtcclxuXHJcbiAgICAgICAgdGhpcy5zbWFydEZpbHRlclNlcnZpY2UuZmlsdGVyQ29uZGl0aW9uQ2hhbmdlZCh7IGNvbmRpdGlvbnMsIGNvbnRyb2xEYXRhOiBmaWx0ZXJJdGVtLCBmcm9tOiAndG9vbGJhcicgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuc21hcnRGaWx0ZXJEYXRhKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZGdzLnNtYXJ0RmlsdGVyRGF0YUNoYW5nZS5lbWl0KGZpbHRlckl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlckRhdGEoY29uZGl0aW9ucz86IGFueSkge1xyXG4gICAgICAgIGlmICghY29uZGl0aW9ucykge1xyXG4gICAgICAgICAgICBjb25kaXRpb25zID0gdGhpcy5jb25kaXRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9ucyA9IGNvbmRpdGlvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbFRvVG9wKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNtYXJ0RmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc21hcnRGaWx0ZXJEYXRhKGNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5yZW1vdGVGaWx0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5RmlsdGVycyA9IHRoaXMuY2xpZW50RmlsdGVyU2VydmljZS5jb252ZXJ0MkZpbHRlckFycmF5KGNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckNoYW5nZWQuZW1pdChlbnRpdHlGaWx0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlrqLmiLfnq6/ov4fmu6RcclxuICAgICAgICAgICAgdGhpcy5fY2xpZW50RmlsdGVyKGNvbmRpdGlvbnMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmuIXnqbrov4fmu6TmnaHku7YgKi9cclxuICAgIGNsZWFyQ29uZGl0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuZGdzLm9uQ2xlYXJGaWx0ZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZpbHRlclJvdyAmJiAhdGhpcy5lbmFibGVTbWFydEZpbHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXNGaWx0ZXJDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuY29uZGl0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGlzRmlsdGVyQ2hhbmdlID0gISF0aGlzLmNvbmRpdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNGaWx0ZXJDaGFuZ2UgPSAhIU9iamVjdC5rZXlzKHRoaXMuY29uZGl0aW9ucykubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghaXNGaWx0ZXJDaGFuZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb25kaXRpb25zID0gdGhpcy5lbmFibGVTbWFydEZpbHRlciA/IFtdIDoge307XHJcbiAgICAgICAgdGhpcy5jbGllbnRGaWx0ZXJDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZpbHRlckRhdGEodGhpcy5jb25kaXRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9sb2FkRGF0YShkYXRhPzogYW55LCBrZWVwU29ydFN0YXRlID0gZmFsc2UsIGtlZXBTY3JvbGxQb3NpdGlvbiA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCF0aGlzLnBhZ2luYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhID0gZGF0YSB8fCBbXTtcclxuXHJcbiAgICAgICAgaWYgKGtlZXBTY3JvbGxQb3NpdGlvbiAmJiB0aGlzLnNjcm9sbEluc3RhbmNlICYmIHRoaXMuc2Nyb2xsSW5zdGFuY2UuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY29uc3QgbHN0ID0gdGhpcy5zY3JvbGxJbnN0YW5jZS5pbnN0YW5jZS5sYXN0U2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBjb25zdCBsc2wgPSB0aGlzLnNjcm9sbEluc3RhbmNlLmluc3RhbmNlLmxhc3RTY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnc2Nyb2xsSW5mbycsIHsgeTogbHN0LCB4OiBsc2wgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Njcm9sbEluZm8nLCB7IHk6IDAsIHg6IDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldFBhZ2luYXRpb24odGhpcy5wYWdlSW5kZXgsIHRoaXMucGFnZVNpemUsIHRoaXMudG90YWwpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2VyT3B0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNkWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmHjeaWsOWKoOi9veaVsOaNruaXtu+8jOenu+mZpOaJgOaciee8lui+keWIl1xyXG4gICAgICAgIC8vIHRoaXMuY2xvc2VBbGxDZWxsRWRpdG9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgaWYgKGtlZXBTb3J0U3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlU29ydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMubG9hZERhdGEoZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5sb2FkRGF0YShkYXRhLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLmxvYWREYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRQYWdlckhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMuZGdzLmRhdGFTb3VyY2VDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGxvYWREYXRhKGRhdGE/OiBhbnksIGtlZXBTb3J0U3RhdGUgPSBmYWxzZSwga2VlcFNjcm9sbFBvc2l0aW9uID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuX2xvYWREYXRhKGRhdGEsIGtlZXBTb3J0U3RhdGUsIGtlZXBTY3JvbGxQb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFZpcnR1YWxEYXRhKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwUm93cykge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnaWYgeW91IHVzaW5nIEdST1VQUk9XUywgcGxlYXNlIHNldCBbdmlydHVhbGl6ZWRdPVwiZmFsc2VcIiBbdmlydHVhbGl6ZWRBc3luY0xvYWRdPVwiZmFsc2VcIicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkQXN5bmNMb2FkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLm9uTG9hZFZpcnR1YWxEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmZXRjaERhdGEocGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3RTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0geyBwYWdlSW5kZXgsIHBhZ2VTaXplIH07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3NvcnROYW1lJ10gPSB0aGlzLnNvcnROYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvcnRPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydzb3J0T3JkZXInXSA9IHRoaXMuc29ydE9yZGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXN0U2VydmljZS5nZXREYXRhKHRoaXMudXJsLCBwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2YodW5kZWZpbmVkKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuZGZzLnJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5mZXRjaERhdGEoMSwgdGhpcy5wYWdlU2l6ZSkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJlcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6I635Y+W5b2T5YmN6aG15pWw5o2uICovXHJcbiAgICBnZXRSb3dzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwUm93cyB8fCB0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyT25TZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRzLnJvd3M7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UGFnZXJEYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXJPblNlcnZlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlckRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R3JvdXBSb3coZ3JvdXBSb3dJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgX2FsbHJvd3MgPSAodGhpcy5nZXRSb3dzKCkgfHwgW10pLmZpbHRlcihuID0+IG5bSVNfR1JPVVBfUk9XX0ZJRUxEXSk7XHJcbiAgICAgICAgY29uc3Qgcm93SW5kZXggPSBfYWxscm93cy5maW5kSW5kZXgobiA9PiBuLmlkID09IGdyb3VwUm93SWQpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IF9hbGxyb3dzW3Jvd0luZGV4XSxcclxuICAgICAgICAgICAgaW5kZXg6IHJvd0luZGV4XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gUGFnaW5hdGlvblxyXG5cclxuICAgIHNldFBhZ2VJbmRleChwYWdlSW5kZXg6IG51bWJlciwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2VJbmRleDtcclxuICAgICAgICB0aGlzLnBhZ2VyT3B0cy5jdXJyZW50UGFnZSA9IHBhZ2VJbmRleDtcclxuXHJcbiAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOabtOaWsOavj+mhtVxyXG4gICAgc2V0UGFnZUxpc3QocGFnZUxpc3Q6IG51bWJlcltdLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMucGFnZUxpc3QgPSBwYWdlTGlzdDtcclxuICAgICAgICB0aGlzLnBhZ2VyT3B0cy5wYWdlTGlzdCA9IHBhZ2VMaXN0O1xyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VDaGFuZ2UocGFnZUluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2NrUGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jb250cm9sUGFnaW5hdGlvblN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGFnZUluZGV4KHBhZ2VJbmRleCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuZmV0Y2hEYXRhKHBhZ2VJbmRleCwgdGhpcy5wYWdlU2l6ZSkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZERhdGEocmVzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZm9jdXNSb3dJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTtcclxuICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoeyBwYWdlSW5kZXgsIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZVNpemVDaGFuZ2UocGFnZVNpemU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxvY2tQYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mb2N1c1Jvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTtcclxuICAgICAgICB0aGlzLnBhZ2VyT3B0cy5pdGVtc1BlclBhZ2UgPSBwYWdlU2l6ZTtcclxuXHJcbiAgICAgICAgdGhpcy5mZXRjaERhdGEoMSwgcGFnZVNpemUpLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKHJlcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlZC5lbWl0KHsgcGFnZVNpemUsIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXggfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW1vdmVTZWxlY3RlZEl0ZW0oaWQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRmcy5maW5kUm93SW5kZXgoaWQpID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy51bkNoZWNrUm93KGlkKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51bkNoZWNrUm93KGlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrZWRzLm1hcChyID0+IHIuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsZWFyU2VsZWN0ZWRJdGVtKCRldmVudCkge1xyXG4gICAgICAgIC8vIHRoaXMuY2xlYXJBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkNoZWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIExvYWRpbmdcclxuICAgIHNob3dMb2FkaW5nKCkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VMb2FkaW5nKGRldGVjdENoYW5nZXMgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIERvbVxyXG5cclxuICAgIHByaXZhdGUgcmVwbGFjZVBYMkVtcHR5KHN0ck51bTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHN0ck51bSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLnBhcnNlSW50KHN0ck51bS5yZXBsYWNlKCdweCcsICcnKSwgMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJDdXN0b21DbHMoY2xzOiBhbnksIGRvbTogYW55KSB7XHJcbiAgICAgICAgaWYgKGNscykge1xyXG4gICAgICAgICAgICBpZiAoY2xzWzBdID09PSAnIScpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jbHMgPSBjbHMuc2xpY2UoMSkuc3BsaXQoJyAnKS5maWx0ZXIoYyA9PiBjKTtcclxuICAgICAgICAgICAgICAgIF9jbHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIucmVtb3ZlQ2xhc3MoZG9tLCBjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNscy5zcGxpdCgnICcpLmZpbHRlcihjID0+IGMpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLmFkZENsYXNzKGRvbSwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ3VzdG9tU3R5bGUoY3M6IEN1c3RvbVN0eWxlLCBkb206IGFueSwgY3NzUnVsZVRleHQgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCFjcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjcy5jbHMpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXN0b21DbHMoY3MuY2xzLCBkb20pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNzLnN0eWxlKSB7XHJcbiAgICAgICAgICAgIGlmICghY3NzUnVsZVRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjcy5zdHlsZSkuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobi50b0xvd2VyQ2FzZSgpID09PSAnY29sb3InICYmIGNzLnN0eWxlW25dICYmIGNzLnN0eWxlW25dLmluZGV4T2YoJyFpbXBvcnRhbnQnKSA9PT0gLTEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzLnN0eWxlW25dID0gY3Muc3R5bGVbbl0gKyAnIWltcG9ydGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3NzUnVsZVRleHQgPSBgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9ICMke2RvbS5pZH0gJHtKU09OLnN0cmluZ2lmeShjcy5zdHlsZSl9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kZ3MuYXBwZW5kQ3NzUnVsZXMoW2Nzc1J1bGVUZXh0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckN1c3RvbVN0eWxlMihjczogQ3VzdG9tU3R5bGUsIGRvbTogYW55LCBjc3NDbGFzc05hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghY3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3MuY2xzICYmIGRvbSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckN1c3RvbUNscyhjcy5jbHMsIGRvbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY3Muc3R5bGUpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoY3Muc3R5bGUpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKG4udG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrZ3JvdW5kJykgPiAtMSB8fCBuLnRvTG93ZXJDYXNlKCkgPT09ICdjb2xvcicpICYmIGNzLnN0eWxlW25dICYmIGNzLnN0eWxlW25dLmluZGV4T2YoJyFpbXBvcnRhbnQnKSA9PT0gLTEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3Muc3R5bGVbbl0gPSBjcy5zdHlsZVtuXSArICchaW1wb3J0YW50JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY3NzUnVsZVRleHQgPSBgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC4ke2Nzc0NsYXNzTmFtZX0gJHtKU09OLnN0cmluZ2lmeShjcy5zdHlsZSl9YDtcclxuICAgICAgICAgICAgaWYgKGNzc0NsYXNzTmFtZS5pbmRleE9mKHRoaXMuY3VzdG9tU3R5bGVLZXkoKSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgY3NzUnVsZVRleHQgPSBgJHtjc3NDbGFzc05hbWV9ICR7SlNPTi5zdHJpbmdpZnkoY3Muc3R5bGUpfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGdzLmFwcGVuZENzc1J1bGVzKFtjc3NSdWxlVGV4dF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWw6IEVsZW1lbnRSZWYpIHtcclxuICAgICAgICByZXR1cm4gZWwubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbGVtZW50UGFkZGluZyhlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5yZXBsYWNlUFgyRW1wdHkoc3R5bGUucGFkZGluZ1RvcCksXHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLnBhZGRpbmdMZWZ0KSxcclxuICAgICAgICAgICAgYm90dG9tOiB0aGlzLnJlcGxhY2VQWDJFbXB0eShzdHlsZS5wYWRkaW5nQm90dG9tKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLnBhZGRpbmdSaWdodClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZW1lbnRCb3JkZXJXaWR0aChlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5yZXBsYWNlUFgyRW1wdHkoc3R5bGUuYm9yZGVyVG9wV2lkdGgpLFxyXG4gICAgICAgICAgICBib3R0b206IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKSxcclxuICAgICAgICAgICAgcmlnaHQ6IHRoaXMucmVwbGFjZVBYMkVtcHR5KHN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpLFxyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLnJlcGxhY2VQWDJFbXB0eShzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXREYXRhKGZpZWxkOiBhbnksIGRhdGE6IGFueSwgZm9ybWF0dGVyOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShmaWVsZCwgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sRm9ybWF0U2VyLmZvcm1hdCh2YWx1ZSwgZGF0YSwgZm9ybWF0dGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGaWVsZFZhbHVlKGZpZWxkLCByb3dEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmdldFZhbHVlKGZpZWxkLCByb3dEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2VsZWN0XHJcbiAgICBwcml2YXRlIGNhbk9wZXJhdGVDaGVja2JveCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveDtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kTmV4dFRkKG5leHRDb2x1bW4pIHtcclxuXHJcbiAgICAgICAgaWYgKCFuZXh0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgcm93aWQgPSBUUl9JRF9QUkVGSVggKyB0aGlzLnNlbGVjdGVkUm93LmlkO1xyXG4gICAgICAgIGNvbnN0IGxlZnRUcklEID0gVFJfSURfUFJFRklYICsgdGhpcy5zZWxlY3RlZFJvdy5pZCArICdfZml4ZWRsZWZ0JztcclxuICAgICAgICBjb25zdCByaWdodFRySUQgPSBUUl9JRF9QUkVGSVggKyB0aGlzLnNlbGVjdGVkUm93LmlkICsgJ19maXhlZHJpZ2h0JztcclxuXHJcbiAgICAgICAgbGV0IF90ciA9IG51bGw7XHJcbiAgICAgICAgbGV0IF90ZCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChuZXh0Q29sdW1uLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgLy8gX3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsZWZ0VHJJRCk7XHJcbiAgICAgICAgICAgIF90ciA9IFV0aWxzLmdldFRyRG9tQnlJZChsZWZ0VHJJRCwgZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAoX3RyKSB7XHJcbiAgICAgICAgICAgICAgICBfdGQgPSBfdHIucXVlcnlTZWxlY3RvcihgW2ZpZWxkPVwiJHtuZXh0Q29sdW1uLmZpZWxkfVwiXWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXh0Q29sdW1uLmZpeGVkID09PSAncmlnaHQnICkge1xyXG4gICAgICAgICAgICAvLyBfdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJpZ2h0VHJJRCk7XHJcbiAgICAgICAgICAgIF90ciA9IFV0aWxzLmdldFRyRG9tQnlJZChyaWdodFRySUQsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgaWYgKF90cikge1xyXG4gICAgICAgICAgICAgICAgX3RkID0gX3RyLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7bmV4dENvbHVtbi5maWVsZH1cIl1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIF90ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm93aWQpO1xyXG4gICAgICAgICAgICBfdHIgPSBVdGlscy5nZXRUckRvbUJ5SWQocm93aWQsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgaWYgKF90cikge1xyXG4gICAgICAgICAgICAgICAgX3RkID0gX3RyLnF1ZXJ5U2VsZWN0b3IoYFtmaWVsZD1cIiR7bmV4dENvbHVtbi5maWVsZH1cIl1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF90ZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS+neaNruW9k+WJjeWtl+auteafpeivouS4i+S4quWtl+auteeahFREIERPTVxyXG4gICAgICogQHBhcmFtIGZpZWxkIOW9k+WJjeWtl+auteWQjeensFxyXG4gICAgICogQHBhcmFtIGRpciDnp7vliqjmlrnlkJFcclxuICAgICAqIEByZXR1cm5zIFREIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZmluZE5leHRDZWxsKGZpZWxkOiBzdHJpbmcsIGRpcjogTW92ZURpcmVjdGlvbikge1xyXG4gICAgICAgIGxldCB0ZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENlbGwgJiYgdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmRmcy5nZXRDb2x1bW4oZmllbGQpO1xyXG4gICAgICAgICAgICBjb25zdCBmaXhlZCA9IGNvbC5maXhlZCB8fCAnJztcclxuICAgICAgICAgICAgLy8gbGV0IGNlbGxJbmRleCA9IHRoaXMuZGZzLmdldENvbHVtbkluZGV4KGZpZWxkLCBmaXhlZCk7XHJcbiAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSB0aGlzLmNvbEdyb3VwLmNvbHVtbnMuZmluZEluZGV4KG4gPT4gKG4uaWQgJiYgbi5pZCA9PT0gY29sLmlkKSB8fCBuLmZpZWxkID09PSBjb2wuZmllbGQpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKGZpeGVkID09PSAnbGVmdCcgfHwgdGhpcy5mYXN0KSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBjZWxsSW5kZXggKz0gMTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy5zaG93TGluZU51bWJlcikge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNlbGxJbmRleCArPSAxO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXJyQ2VsbEVsID0gdGhpcy5jdXJyZW50Q2VsbC5jZWxsRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgdGRTZWxlY3RvciA9IGBbZmllbGQ9XCIke2ZpZWxkfVwiXWA7XHJcbiAgICAgICAgICAgIGlmIChkaXIgPT09ICd1cCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZUciA9IHRoaXMuZGdzLmZpbmROZXh0VHIoY3VyckNlbGxFbC5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcsICd1cCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZUcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkID0gcHJldlRyLnF1ZXJ5U2VsZWN0b3IodGRTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlyID09PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUciA9IHRoaXMuZGdzLmZpbmROZXh0VHIoY3VyckNlbGxFbC5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZywgJ2Rvd24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZCA9IG5leHRUci5xdWVyeVNlbGVjdG9yKHRkU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpciA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sdW1uID0gdGhpcy5jb2xHcm91cC5jb2x1bW5zW2NlbGxJbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZCA9IHRoaXMuZmluZE5leHRUZChuZXh0Q29sdW1uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXIgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW4gPSB0aGlzLmNvbEdyb3VwLmNvbHVtbnNbY2VsbEluZGV4ICsgMV07XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkID0gdGhpcy5maW5kTmV4dFRkKG5leHRDb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZDtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3ROZXh0Q2VsbChkaXI6IE1vdmVEaXJlY3Rpb24sIGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IG5leHRUZCA9IHRoaXMuZmluZE5leHRDZWxsKHRoaXMuY3VycmVudENlbGwuZmllbGQsIGRpcik7XHJcblxyXG4gICAgICAgIGlmIChkaXIgPT09ICd1cCcgJiYgIW5leHRUZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV4dFRkICYmIG5leHRUZC5jbGFzc05hbWUuaW5kZXhPZignZi1kYXRhZ3JpZC1jZWxsLXJvd251bWJlcicpID09IC0xICYmIG5leHRUZC5jbGFzc05hbWUuaW5kZXhPZignZi1kYXRhZ3JpZC1jZWxsLWNoZWNrYm94JykgPT0gLTEpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50Wydjb2RlJ10gPT09ICdUYWInICYmIHRoaXMuZWRpdGFibGUgJiYgdGhpcy5lZGl0Y2VsbFdoZW5UYWJLZXlkd29uKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0VGRbJ2NsaWNrJ10uYXBwbHkobmV4dFRkLCBbZXZlbnRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VGQuc2VsZWN0Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgPT09ICdkZWZhdWx0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRUZFsnc2VsZWN0Q2VsbCddKGV2ZW50LCBuZXh0VGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIG5leHRUZFsnc2VsZWN0Q2VsbCddKGV2ZW50LCBuZXh0VGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dFRkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q29sID0gdGhpcy5jb2xHcm91cC5jb2x1bW5zWzBdO1xyXG4gICAgICAgICAgICBjb25zdCB0ZFNlbGV0b3IgPSBgdGRbZmllbGQ9XCIke25leHRDb2wuZmllbGR9XCJdYDtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgX25leHQgPSB0ci5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIGlmIChkaXIgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgX25leHQgPSB0ci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghX25leHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY29uc3QgdHJEb21JZCA9IF9uZXh0LmlkLnJlcGxhY2UoJ19maXhlZGxlZnQnLCcnKS5yZXBsYWNlKCdfZml4ZWRyaWdodCcsJycpO1xyXG4gICAgICAgICAgICBjb25zdCB0ckRvbUlkID0gVXRpbHMuZ2V0Um93SWRCeVRyKF9uZXh0KTtcclxuICAgICAgICAgICAgY29uc3QgbGVmdFRyU2VsZWN0b3IgPSB0ckRvbUlkICsgJ19maXhlZGxlZnQnO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9uZXh0LmlkLmluZGV4T2YoJ19maXhlZHJpZ2h0JykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sR3JvdXAubGVmdEZpeGVkICYmIHRoaXMuY29sR3JvdXAubGVmdEZpeGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF9uZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsZWZ0VHJTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgX25leHQgPSBVdGlscy5nZXRUckRvbUJ5SWQobGVmdFRyU2VsZWN0b3IsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZGlyID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfbmV4dC5pZC5pbmRleE9mKCdfZml4ZWRsZWZ0JykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF9uZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsZWZ0VHJTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgX25leHQgPSBVdGlscy5nZXRUckRvbUJ5SWQobGVmdFRyU2VsZWN0b3IsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRUZCA9IF9uZXh0LnF1ZXJ5U2VsZWN0b3IodGRTZWxldG9yKTtcclxuICAgICAgICAgICAgaWYgKG5leHRUZCAmJiBuZXh0VGQuc2VsZWN0Q2VsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ2RlZmF1bHQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV4dFRkLnNlbGVjdENlbGwoZXZlbnQsIG5leHRUZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRUciA9IHRoaXMuZGdzLmZpbmROZXh0VHIoX25leHQsIGRpciA9PT0gJ2xlZnQnID8gJ3VwJyA6ICdkb3duJyk7XHJcbiAgICAgICAgICAgIGlmIChuZXh0VHIgJiYgbmV4dFRyLnRhZ05hbWUgPT09ICdUUicpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5leHRUci5jaGlsZHJlbi5maW5kKHRkID0+IHRkLmVkaXRDZWxsKS5lZGl0Q2VsbCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0RWRpdG9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoIWZpcnN0RWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFZGl0b3IgPSAhIW5leHRUci5jaGlsZHJlbltpXS5zZWxlY3RDZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RFZGl0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0VHIuY2hpbGRyZW5baV0gJiYgbmV4dFRyLmNoaWxkcmVuW2ldLnNlbGVjdENlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnZGVmYXVsdCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXh0VHIuY2hpbGRyZW5baV0uc2VsZWN0Q2VsbChldmVudCwgbmV4dFRyLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3dJZEJ5VHIodHI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHRyICYmIHRyLmNsYXNzTmFtZS5pbmRleE9mKCdmLWRhdGFncmlkLWdyb3VwLXJvdycpPi0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBsZXQgaWQgPSB0ci5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgbGV0IGlkID0gVXRpbHMuZ2V0Um93SWRCeVRyKHRyKTtcclxuXHJcbiAgICAgICAgaWYgKGlkID09IG51bGwgfHwgaWQgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gaWQgPSBpZC5yZXBsYWNlKCdyb3dfJywgJycpLnJlcGxhY2UoJ19maXhlZHJpZ2h0JywgJycpLnJlcGxhY2UoJ19maXhlZGxlZnQnLCAnJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJvd0luZm8gPSB0aGlzLmRmcy5maW5kUm93KGlkKTtcclxuICAgICAgICBpZiAocm93SW5mbykge1xyXG4gICAgICAgICAgICByZXR1cm4gey4uLnRoaXMuZGZzLmZpbmRSb3coaWQpLCBpZH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9iZWZvcmVTZWxlY3RSb3ckKGluZGV4LCBkYXRhLCBpZCkge1xyXG4gICAgICAgIGNvbnN0IGJlZm9yRXZlbnRQYXJhbSA9IHtcclxuICAgICAgICAgICAgcm93SW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICByb3dEYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICBncmlkSW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgZHI6IG51bGxcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGIkID0gb2YodHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJlZm9yZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dpc1NlbGVjdGVkID0gdGhpcy5kZnMuaXNSb3dTZWxlY3RlZChpZCk7XHJcbiAgICAgICAgICAgIGlmICghcm93aXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2IkID0gdGhpcy5iZWZvcmVTZWxlY3QoYmVmb3JFdmVudFBhcmFtKTtcclxuICAgICAgICAgICAgICAgIGlmIChfYiQgJiYgX2IkLnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGIkID0gX2IkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiJDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2VsZWN0TmV4dFJvdygpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBjb25zdCB0ciA9IHRoaXMuc2VsZWN0ZWRSb3cuZHIuZWwubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHRyLm5leHRFbGVtZW50U2libGluZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgZGF0YSwgaW5kZXggfSA9IHRoaXMuZ2V0Um93SWRCeVRyKHRyLm5leHRFbGVtZW50U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3RSb3ckKGluZGV4LCBkYXRhLCBpZCApLnN1YnNjcmliZSgodCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0ci5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGVjdFByZXZSb3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLnNlbGVjdGVkUm93LmRyLmVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICh0ci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0ci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlkLCBkYXRhLCBpbmRleCB9ID0gdGhpcy5nZXRSb3dJZEJ5VHIodHIucHJldmlvdXNFbGVtZW50U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3RSb3ckKGluZGV4LCBkYXRhLCBpZCApLnN1YnNjcmliZSgodCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2VsbFNlbGVjdGVkQ2xzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwuY2VsbEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgRG9tSGFuZGxlci5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5yZW1vdmVDbGFzcyh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LCBDRUxMX0VESVRJTkdfQ0xTKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ2VsbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIENFTExfU0VMRUNURURfQ0xTKTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWRDZWxsLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZENlbGwuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5yZW1vdmVDbGFzcyhuLCBDRUxMX1NFTEVDVEVEX0NMUyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reihjFxyXG4gICAgICogQHBhcmFtIGlkIOmAieS4reihjElEXHJcbiAgICAgKiBAcGFyYW0gZW1pdCDop6blj5FzZWxlY3Qg5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gdG9DdXJyZW50UG9zaXRpb24g5rua5Yqo5p2h5a6a5L2N5Yiw5b2T5YmN6YCJ5oup5Lit6KGMXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFJvdyhpZDogYW55LCBlbWl0ID0gdHJ1ZSwgdG9DdXJyZW50UG9zaXRpb24gPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5zZWxlY3RSZWNvcmQoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodG9DdXJyZW50UG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX3NlbGVjdFJvdyA9ICgpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2VsbFNlbGVjdGVkQ2xzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlU2VsZWN0Um93KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tdWx0aVNlbGVjdCAmJiB0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0ICYmIHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gJ2RlZmF1bHQnICYmICF0aGlzLmVuYWJsZU1vcmVQYWdlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpZCAmJiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgdGhpcy5zZWxlY3RlZFJvdy5pZCAhPSBpZCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSB0aGlzLmRmcy5maW5kUm93KGlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3cgJiYgdGhpcy5kaXNhYmxlUm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWJsZVJvdyhyb3cuZGF0YSwgcm93LmluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZnMuc2VsZWN0UmVjb3JkKGlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZnMuc2V0U2VsZWN0Um93KGlkLCBlbWl0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gdGhpcy5kZnMuZ2V0Q3VycmVudFJvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1Jvd3MoW2lkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGdzLnNldFNlbGVjZWRSb3cuZW1pdCh7IGlkLCBzZWxlY3RlZDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUm93cyhbaWRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRvQ3VycmVudFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNFZGl0aW5nKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdE1vZGUgPT09ICdjZWxsJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcEVkaXQgPSB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNsb3NlRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3BFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcEVkaXQuc3Vic2NyaWJlKF9zZWxlY3RSb3cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRSb3dFZGl0KCk7XHJcbiAgICAgICAgICAgICAgICBfc2VsZWN0Um93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfc2VsZWN0Um93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmu5rliqjmnaHmu5rliqjliLDlvZPliY3ooYznmoTkvY3nva5cclxuICAgICAqL1xyXG4gICAgc2Nyb2xsVG9DdXJyZW50Um93KCkge1xyXG4gICAgICAgIHRoaXMuZGdzLnNjcm9sbFRvQ3VycmVudFJvdy5uZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdW5TZWxlY3RSb3coaWQ6IGFueSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAoaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUFsbENlbGxFZGl0b3IoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwucm93SWQgPT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuc2VsZWN0UmVjb3JkKGlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5zZXRTZWxlY3RSb3coaWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZ3Muc2V0U2VsZWNlZFJvdy5lbWl0KHsgaWQsIHNlbGVjdGVkOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RBbGxSb3dzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0ICYmIHRoaXMuZW5hYmxlU2VsZWN0Um93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNlbGVjdEFsbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxTZWxlY3RDZWxsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDZWxsLmNlbGxFbGVtZW50LmNhbmNlbFNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDZWxsLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5jYW5jZWxTZWxlY3RDZWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJTZWxlY3Rpb25zKGV4Y2x1ZGVJZHM/OiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuZGZzLmNsZWFyU2VsZWN0aW9ucyhleGNsdWRlSWRzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhbmNlbFNlbGVjdENlbGwoKTtcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja1JvdyhpZDogYW55LCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk9wZXJhdGVDaGVja2JveCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5jaGVja1JlY29yZChpZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUm93cyhbaWRdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6ZKp6YCJ6KGM77yM5LiN6Kem5Y+R6YCJ5Lit5LqL5Lu2ICovXHJcbiAgICBjaGVja1Jvd3MoaWRzOiBhbnlbXSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnNldENoZWNrZWRSb3dzKGlkcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNldENoZWNrZWRSb3dzLm5leHQoeyBpZHMsIGNoZWNrZWQ6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLnVwZGF0ZVByb3BlcnR5KCdzZWxlY3Rpb25zJywgdGhpcy5jaGVja2Vkcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoaXMuY2hlY2tlZHMubWFwKHIgPT4gci5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQodGhpcy5jaGVja1ZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRDaGFuZ2UuZW1pdCh0aGlzLmNoZWNrZWRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y+W5raI6ZKp6YCJ77yM5LiN6Kem5Y+R6YCJ5Lit5LqL5Lu2ICovXHJcbiAgICB1bkNoZWNrUm93cyhpZHM6IGFueVtdLCBlbWl0ID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMuc2V0Q2hlY2tlZFJvd3MoaWRzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGdzLnNldENoZWNrZWRSb3dzLm5leHQoeyBpZHMsIGNoZWNrZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrZWRzLm1hcChyID0+IHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlLmVtaXQodGhpcy5jaGVja2Vkcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tBbGxSb3dzKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuT3BlcmF0ZUNoZWNrYm94KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMuY2hlY2tBbGwoKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuY2hlY2tBbGwuZW1pdCgpO1xyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0FsbC5lbWl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja1JvdyhpZDogYW55LCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk9wZXJhdGVDaGVja2JveCgpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwucm93SWQgPT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY2hlY2tSZWNvcmQoaWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5DaGVja1Jvd3MoW2lkXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5riF56m66ZKp6YCJ6KGM77yM6buY6K6k5Y+q5riF56m65b2T5YmN6aG155qE6ZKp6YCJXHJcbiAgICAgKiBjbGVhckFsbDog5riF56m65omA5pyJIOm7mOiupOS4uiBmYWxzZTsg5ZCm5YiZ5LuF5riF56m65b2T5YmN6aG155qE6ZKp6YCJ5pWw5o2u44CCXHJcbiAgICAgKi9cclxuICAgIGNsZWFyQ2hlY2tlZHMoY2xlYXJBbGwgPSBmYWxzZSwgZW1pdFVuQ2hlY2tBbGwgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5kZnMuY2xlYXJDaGVja2VkcyhjbGVhckFsbCk7XHJcbiAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsU2VsZWN0Q2VsbCgpO1xyXG4gICAgICAgIGlmIChlbWl0VW5DaGVja0FsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmRncy51bmNoZWNrQWxsLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGZzLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgdGhpcy5kZ3MudW5jaGVja0FsbC5lbWl0KCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBSZXNpemUgQ29sdW1uXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRSZXNpemVQcm94eVBvc0xlZnQoZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBjb25zdCBkZ1JlY3QgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCh0aGlzLmRnQ29udGFpbmVyKTtcclxuICAgICAgICBjb25zdCB0ZCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHRkTGVmdCA9IHRkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgY29uc3QgZGVsdGFFZGdlID0gdGQub2Zmc2V0V2lkdGggLSAoZS5wYWdlWCAtIHRkTGVmdCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW5JbmZvLnByb3h5TGluZUVkZ2UgPSBkZWx0YUVkZ2U7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW5JbmZvLnN0YXJ0V2lkdGggPSB0ZC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbkluZm8uc3RhcnRYID0gZS5wYWdlWDtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbkluZm8ubGVmdCA9IHRkTGVmdCAtIGRnUmVjdC5sZWZ0IC0gMSArIGRlbHRhRWRnZTtcclxuICAgICAgICByZXR1cm4gZS5wYWdlWCAtIGRnUmVjdC5sZWZ0IC0gMSArIGRlbHRhRWRnZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZVJlc2l6ZVByb3h5KHNob3cgPSB0cnVlKSB7XHJcbiAgICAgICAgbGV0IGRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGlmICghc2hvdykge1xyXG4gICAgICAgICAgICBkaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUodGhpcy5yZXNpemVQcm94eUJnLm5hdGl2ZUVsZW1lbnQsICdkaXNwbGF5JywgZGlzcGxheSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHRoaXMucmVzaXplUHJveHkubmF0aXZlRWxlbWVudCwgJ2Rpc3BsYXknLCBkaXNwbGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZUJlZ2luKGU6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVQcm94eSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoZG9jdW1lbnQuYm9keSwgJ2N1cnNvcicsICdlLXJlc2l6ZScpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm94eSA9IHRoaXMucmVzaXplUHJveHkubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgcHJveHlQb3NMZWZ0ID0gdGhpcy5nZXRSZXNpemVQcm94eVBvc0xlZnQoZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShwcm94eSwgJ2xlZnQnLCBwcm94eVBvc0xlZnQgKyAncHgnKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0b3AgPSAwO1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMuZW5hYmxlRmlsdGVyUm93IHx8IHRoaXMuZW5hYmxlU21hcnRGaWx0ZXIpICYmIHRoaXMuc2hvd0ZpbHRlckJhcikge1xyXG4gICAgICAgICAgICAgICAgdG9wICs9IHRoaXMuZmlsdGVyQmFySGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93Um93R3JvdXBQYW5lbCkge1xyXG4gICAgICAgICAgICAgICAgdG9wICs9IHRoaXMucm93R3JvdXBQYW5lbEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHByb3h5LCAndG9wJywgYCR7dG9wfXB4YCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0b0hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKHByb3h5LCAnaGVpZ2h0JywgKHRoaXMuaGVpZ2h0IC0gdGhpcy5wYWdlckhlaWdodCkgKyAncHgnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBib3R0b21IID0gMDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBib3R0b21IICs9IHRoaXMucGFnZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93Rm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tSCArPSB0aGlzLmZvb3RlckhlaWdodDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShwcm94eSwgJ2hlaWdodCcsIGBjYWxjKDEwMCUgLSAke2JvdHRvbUh9cHgpYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVSZXNpemVQcm94eSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNvbHVtblJlc2l6ZShlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJveHkgPSB0aGlzLnJlc2l6ZVByb3h5Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgZGdSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QodGhpcy5kZ0NvbnRhaW5lcik7XHJcbiAgICAgICAgY29uc3QgcHJveHlQb3NMZWZ0ID0gZS5wYWdlWCAtIGRnUmVjdC5sZWZ0IC0gMSArIHRoaXMucmVzaXplQ29sdW1uSW5mby5wcm94eUxpbmVFZGdlO1xyXG4gICAgICAgIGlmIChwcm94eVBvc0xlZnQgLSB0aGlzLnJlc2l6ZUNvbHVtbkluZm8ubGVmdCA+IDIwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5zZXRTdHlsZShwcm94eSwgJ2xlZnQnLCBwcm94eVBvc0xlZnQgKyAncHgnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUocHJveHksICdsZWZ0JywgKHRoaXMucmVzaXplQ29sdW1uSW5mby5sZWZ0ICsgMjApICsgJ3B4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sdW1uUmVzaXplRW5kKGU6IE1vdXNlRXZlbnQsIGNvbDogRGF0YUNvbHVtbikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyMi5yZW1vdmVTdHlsZShkb2N1bWVudC5ib2R5LCAnY3Vyc29yJyk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVSZXNpemVQcm94eShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW5JbmZvLnByb3h5TGluZUVkZ2UgPSAwO1xyXG5cclxuICAgICAgICBsZXQgbmV3Q29sV2lkdGggPSB0aGlzLnJlc2l6ZUNvbHVtbkluZm8uc3RhcnRXaWR0aCArIGUucGFnZVggLSB0aGlzLnJlc2l6ZUNvbHVtbkluZm8uc3RhcnRYO1xyXG5cclxuICAgICAgICBpZiAobmV3Q29sV2lkdGggPCAyMCkge1xyXG4gICAgICAgICAgICBuZXdDb2xXaWR0aCA9IDIwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbC53aWR0aCA+IG5ld0NvbFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBjb2wud2lkdGggLSBuZXdDb2xXaWR0aDtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmZpdENvbHVtbnMgJiYgdGhpcy5zY3JvbGxJbnN0YW5jZS5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZUxlZnQgPSB0aGlzLnNjcm9sbEluc3RhbmNlLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0IC0gdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9YKG1vdmVMZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbC53aWR0aCAhPSBuZXdDb2xXaWR0aCkge1xyXG4gICAgICAgICAgICBjb2wud2lkdGggPSBuZXdDb2xXaWR0aDtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5ub3dyYXAgJiYgdGhpcy5zaG93Rm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZvb3RlckhlaWdodCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VDb250cm9sUGFuZWwgJiYgdGhpcy5zZXR0aW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zYXZlVXNlckNvbmZpZyh0aGlzLmlkKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNvbHVtblJlc2l6ZUVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGdzLmNvbHVtblJlc2l6ZWQuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRmcy5jb2x1bW5SZXNpemVFbmQoKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuY29sdW1uUmVzaXplZC5lbWl0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpeGVkQ29sdW1uQ3NzRm9yRmFzdE1vZGUoY29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOi/mOWOn+WIl+WuvSAqL1xyXG4gICAgcmVzdGl0dXRlQ29sdW1uc1NpemUoKSB7XHJcbiAgICAgICAgdGhpcy5kZnMucmVzaXplQ29sdW1ucyh0cnVlKTtcclxuICAgICAgICB0aGlzLmRncy5jb2x1bW5SZXNpemVkLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5Y2V5YWD5qC85YaF5a656Ieq6YCC5bqU5YiX5a69ICovXHJcbiAgICBzaXplVG9Db250ZW50KGNvbDogRGF0YUNvbHVtbiwgdGg6IEVsZW1lbnRSZWYpIHtcclxuICAgICAgICBpZiAoIXRoaXMuQXV0b0NvbHVtbldpZHRoVXNlRGJsY2xpY2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbG9uZ2VzdFRleHQgPSAnJztcclxuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuZGF0YTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGl0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIC8vIFRGUzogMzU2OTY0IDIwMjAwMjAzXHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IFV0aWxzLmdldFZhbHVlKGNvbC5maWVsZCwgaXRlbXNbaV0pO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgfHwgJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRleHQgPSAnJyArIHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoY29sLmZvcm1hdHRlciAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGhpcy5jb2xGb3JtYXRTZXIuZm9ybWF0KHZhbHVlLCBpdGVtc1tpXSwgY29sLmZvcm1hdHRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChVdGlscy5nZXRCTGVuKHRleHQpID4gVXRpbHMuZ2V0Qkxlbihsb25nZXN0VGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIGxvbmdlc3RUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHcxID0gdGhpcy5sb25nVGV4dEFyZWEubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gbG9uZ2VzdFRleHQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3MiA9IHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHcxID4gdzIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb25nZXN0VGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gbG9uZ2VzdFRleHQ7XHJcbiAgICAgICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLmxvbmdUZXh0QXJlYS5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoICsgMjY7XHJcblxyXG4gICAgICAgIHRoaXMubG9uZ1RleHRBcmVhLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gdGgubmF0aXZlRWxlbWVudC5pbm5lclRleHQ7XHJcbiAgICAgICAgbGV0IHRoTWluV2lkdGggPSB0aGlzLmxvbmdUZXh0QXJlYS5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoICsgMjY7XHJcblxyXG4gICAgICAgIGlmIChjb2wuc29ydGFibGUpIHtcclxuICAgICAgICAgICAgdGhNaW5XaWR0aCArPSAyNDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXdDb2xXaWR0aCA9IChtYXhXaWR0aCA+IHRoTWluV2lkdGggPyBtYXhXaWR0aCA6IHRoTWluV2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGNvbEluZGV4ID0gdGhpcy5mbGF0Q29sdW1ucy5maW5kSW5kZXgoYyA9PiBjLmZpZWxkID09PSBjb2wuZmllbGQpO1xyXG4gICAgICAgIGlmIChjb2xJbmRleCA9PT0gdGhpcy5mbGF0Q29sdW1ucy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIG5ld0NvbFdpZHRoICs9IDY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29sLndpZHRoID4gbmV3Q29sV2lkdGgpIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IGNvbC53aWR0aCAtIG5ld0NvbFdpZHRoO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxJbnN0YW5jZS5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZUxlZnQgPSB0aGlzLnNjcm9sbEluc3RhbmNlLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0IC0gdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9YKG1vdmVMZWZ0IDwgMCA/IDAgOiBtb3ZlTGVmdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb2wud2lkdGggIT0gbmV3Q29sV2lkdGgpIHtcclxuICAgICAgICAgICAgY29sLndpZHRoID0gbmV3Q29sV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnJlc2l6ZUNvbHVtbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5kZ3MuY29sdW1uUmVzaXplZC5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBDaGFuZ2VzXHJcbiAgICBnZXRDaGFuZ2VzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRmcy5nZXRDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWNjZXB0Q2hhbmdlcygpIHtcclxuICAgICAgICB0aGlzLmRmcy5hY2NlcHRDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVqZWN0Q2hhbmdlcygpIHtcclxuICAgICAgICB0aGlzLmRmcy5yZWplY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gQ1JVRFxyXG5cclxuICAgIGFwcGVuZFJvdyhyb3c6IGFueSkge1xyXG4gICAgICAgIHRoaXMuY2FuY2VsRWRpdChudWxsKTtcclxuICAgICAgICB0aGlzLmRmcy5hcHBlbmRSb3cocm93KTtcclxuICAgICAgICB0aGlzLmRhdGFDaGFuZ2UuZW1pdCh0aGlzLmRmcy5nZXREYXRhKCkpO1xyXG4gICAgICAgIHRoaXMucm93QXBwZW5kZWQuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVJvdyhyb3dJZCwgbmV3RGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkge1xyXG4gICAgICAgIHRoaXMuZGZzLnVwZGF0ZVJvdyhyb3dJZCwgbmV3RGF0YSk7XHJcblxyXG4gICAgICAgIC8vIOabtOaWsOW9k+WJjeaVsOaNrua6kOS4reWvueW6lOeahOihjOaVsOaNrlxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJvdyhyb3dJZCwgbmV3RGF0YSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDZWxsICYmIHRoaXMuY3VycmVudENlbGwuaXNFZGl0aW5nICYmIG5ld0RhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBjb2x1bW4sIGNlbGxSZWYgfSA9IHRoaXMuY3VycmVudENlbGw7XHJcbiAgICAgICAgICAgIGlmIChjZWxsUmVmICYmIGNvbHVtbiAmJiBjb2x1bW4uZmllbGQgJiYgY29sdW1uLmVkaXRvciAmJiBjb2x1bW4uZWRpdG9yLnR5cGUudG9Mb3dlckNhc2UoKSA9PSAnaW5wdXQtZ3JvdXAnICYmIFV0aWxzLmtleXNJbkRhdGEoY29sdW1uLmZpZWxkLCBuZXdEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVuZFJvd0RhdGEgPSBjZWxsUmVmLnJvd0RhdGE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmNvbW1vblV0aWxzLmdldFZhbHVlKGNvbHVtbi5maWVsZCwgY3VycmVuZFJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbGxSZWYuZm9ybUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsUmVmLmZvcm1Db250cm9sLnBhdGNoVmFsdWUodmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmm7TmlrDlkIjorqHooYzmlbDmja5cclxuICAgICAgICB0aGlzLnVwZGF0ZUZvb3RlckRhdGEoKVxyXG5cclxuICAgICAgICB0aGlzLmRhdGFDaGFuZ2UuZW1pdCh0aGlzLmRmcy5nZXREYXRhKCkpO1xyXG4gICAgICAgIHRoaXMucm93VXBkYXRlZC5lbWl0KCk7XHJcblxyXG4gICAgICAgIC8vIOWQr+eUqOWQiOW5tuWNleWFg+agvO+8jOWFgeiuuOe8lui+keaXtu+8jOWQiOW5tuaVsOaNruS4jeWHhuehrlxyXG4gICAgICAgIGlmICh0aGlzLm1lcmdlQ2VsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfdXBkYXRlUm93KHJvd0lkLCBuZXdEYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRSb3dzKCkuZmluZCgobikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZnMucHJpbWFyeUlkKG4pID09PSByb3dJZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goZmllbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNldFZhbHVlKGZpZWxkLCBuZXdEYXRhW2ZpZWxkXSwgcm93KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hSb3cocm93SWQpIHtcclxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmRmcy5maW5kUm93KHJvd0lkKTtcclxuICAgICAgICBpZiAocm93ICYmIHJvdy5kYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGZzLnJvd1VwZGF0ZSQuZW1pdChyb3cpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdDYW4gbm90IGZvdW5kIHJvdyBieSBpZC4gaWQ6ICcgKyByb3dJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkZWxldGVSb3cocm93SWQ/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbEVkaXQocm93SWQsIGZhbHNlKTtcclxuICAgICAgICBpZiAoIXJvd0lkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dJZCA9IHRoaXMuc2VsZWN0VmFsdWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOWIoOmZpOihjOaXtuS4u+mUruagh+ivhklEIOS4jeiDveS4uuepuuOAgmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZVJvdyA9IHRoaXMuZGZzLmRlbGV0ZVJvdyhyb3dJZCk7XHJcbiAgICAgICAgdGhpcy5kYXRhQ2hhbmdlLmVtaXQodGhpcy5kZnMuZ2V0RGF0YSgpKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRDZWxsID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRmcy51cGRhdGVQcm9wZXJ0eSgnY3VycmVudENlbGwnLCBudWxsKTtcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLnJvd0RlbGV0ZWQuZW1pdChkZWxldGVSb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlUm93KCkgeyB9XHJcblxyXG4gICAgaW5zZXJ0Um93KCkgeyB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNjcm9sbGluZ1xyXG5cclxuICAgIHNjcm9sbFRvTGVmdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGxJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEluc3RhbmNlLnNjcm9sbFRvTGVmdCgwLCAyMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzY3JvbGxUb1JpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW5zdGFuY2Uuc2Nyb2xsVG9SaWdodCgwLCAyMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzY3JvbGxUb1RvcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGxJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEluc3RhbmNlLnNjcm9sbFRvVG9wKDAsIDEwMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEluZm8gPSB0aGlzLmRmcy5nZXRTdGF0ZSgpLnNjcm9sbEluZm87XHJcbiAgICAgICAgICAgIGlmIChzY3JvbGxJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxJbmZvLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMudXBkYXRlUHJvcGVydHkoJ3Njcm9sbEluZm8nLCBzY3JvbGxJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzY3JvbGxUb0JvdHRvbSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zY3JvbGxJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEluc3RhbmNlLnNjcm9sbFRvQm90dG9tKDAsIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgX3NldENvbHVtblJlYWRvbmx5KGNvbHM6IERhdGFDb2x1bW5bXSwgZmllbGQ6IHN0cmluZywgcmVhZG9ubHkgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGNvbHMgJiYgY29scy5sZW5ndGggJiYgZmllbGQpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gY29scy5maW5kKG4gPT4gbi5maWVsZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoY29sKSB7XHJcbiAgICAgICAgICAgICAgICBjb2wucmVhZG9ubHkgPSByZWFkb25seTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDb2x1bW5SZWFkb25seShmaWVsZDogc3RyaW5nLCByZWFkb25seSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9zZXRDb2x1bW5SZWFkb25seSh0aGlzLmNvbEdyb3VwLmxlZnRGaXhlZCwgZmllbGQsIHJlYWRvbmx5KTtcclxuICAgICAgICB0aGlzLl9zZXRDb2x1bW5SZWFkb25seSh0aGlzLmNvbEdyb3VwLnJpZ2h0Rml4ZWQsIGZpZWxkLCByZWFkb25seSk7XHJcbiAgICAgICAgdGhpcy5fc2V0Q29sdW1uUmVhZG9ubHkodGhpcy5jb2xHcm91cC5ub3JtYWxDb2x1bW5zLCBmaWVsZCwgcmVhZG9ubHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaYr+WQpuS4uuWkmuihqOWktFxyXG4gICAgaXNNdWx0aUhlYWRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zICYmIHRoaXMuY29sdW1ucy5sZW5ndGggPiAxICYmIEFycmF5LmlzQXJyYXkodGhpcy5jb2x1bW5zWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVWaXNpYmxlQ29sdW1uKGZpZWxkczogc3RyaW5nW10sIHZpc2libGUgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlIZWFkZXIoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sczogRGF0YUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID0gY29scy5maW5kKGMgPT4gYy5maWVsZCA9PT0gZmllbGQgfHwgYy5pZCA9PT0gZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDlpJrooajlpLRcclxuICAgICAgICAgICAgY29uc3QgYWxsQ29scyA9IGZsYXR0ZW48RGF0YUNvbHVtbj4odGhpcy5jb2x1bW5zKTtcclxuXHJcbiAgICAgICAgICAgIGFsbENvbHMuZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwLm9yaWdpYW5sQ29sU3BhbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5vcmlnaWFubENvbFNwYW4gPSBwLmNvbHNwYW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX2NvbCA9IGFsbENvbHMuZmluZChjb2wgPT4gY29sLmZpZWxkID09PSBmaWVsZCB8fCBjb2wuaWQgPT09IGZpZWxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChfY29sKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfY29sLnZpc2libGUgPT09IHZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbC52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRzID0gRGF0YWdyaWRDb2x1bW5zSGVscGVyLmdldFBhcmVudENvbHVtbnMoX2NvbCwgYWxsQ29scyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRzID0gRGF0YWdyaWRDb2x1bW5zSGVscGVyLmdldENoaWxkQ29sdW1ucyhfY29sLCBhbGxDb2xzKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYy52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaWJsZSAmJiBjaGlsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb2wuY29sc3BhbiA9IF9jb2wub3JpZ2lhbmxDb2xTcGFuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NvbHNwYW4gPSBfY29sLmNvbHNwYW4gfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5jb2xzcGFuID0gcC5jb2xzcGFuIC0gX2NvbHNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfY2hpbGRzID0gYWxsQ29scy5maWx0ZXIobiA9PiBuLnBhcmVudElkID09PSBwLmlkICYmIG4udmlzaWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmNvbHNwYW4gPSBfY2hpbGRzLnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSByICsgKGMuY29sc3BhbiB8fCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLnZpc2libGUgPSAhIXAuY29sc3BhbjtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbHVtbihmaWVsZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgYWxsQ29scyA9IGZsYXR0ZW48RGF0YUNvbHVtbj4odGhpcy5jb2x1bW5zKTtcclxuICAgICAgICByZXR1cm4gYWxsQ29scy5maW5kKG4gPT4gbi5maWVsZCA9PT0gZmllbGQgfHwgbi5pZCA9PT0gZmllbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dDb2x1bW4oZmllbGQ6IHN0cmluZyB8IHN0cmluZ1tdLCByZWxvYWQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKFtmaWVsZF0sIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbihmaWVsZCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQocmVsb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQ29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSwgcmVsb2FkID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmllbGQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbihbZmllbGRdLCBmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKGZpZWxkLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQocmVsb2FkKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDb2x1bW4oZmllbGQ6IHN0cmluZywgY29sdW1uT2JqZWN0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCBkZXRlY3RDaGFuZ2UgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGNvbHM6IERhdGFDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29sdW1uID0gY29scy5maW5kKGNvbCA9PiBjb2wuZmllbGQgPT09IGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uID0gT2JqZWN0LmFzc2lnbihjb2x1bW4sIGNvbHVtbk9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGRldGVjdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENvbHVtbkZvcm1hdHRlcihmaWVsZDogc3RyaW5nLCBmb3JtYXR0ZXI6IGFueSwgZGV0ZWN0Q2hhbmdlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzOiBEYXRhQ29sdW1uW10pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29scy5maW5kKGNvbCA9PiBjb2wuZmllbGQgPT09IGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uLmZvcm1hdHRlciA9IGZvcm1hdHRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29sdW1uRm9ybWF0dGVyT3B0aW9ucyhmaWVsZDogc3RyaW5nLCBmb3JtYXR0ZXJPcHRpb25zOiBhbnksIGRldGVjdENoYW5nZSA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgoY29sczogRGF0YUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHMuZmluZChjb2wgPT4gY29sLmZpZWxkID09PSBmaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChjb2x1bW4gJiYgY29sdW1uLmZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sRm9ybWF0dGVyID0gY29sdW1uLmZvcm1hdHRlciBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBjb2xGb3JtYXR0ZXIub3B0aW9ucyA9IGNvbEZvcm1hdHRlci5vcHRpb25zIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgY29sRm9ybWF0dGVyLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGNvbEZvcm1hdHRlci5vcHRpb25zLCBmb3JtYXR0ZXJPcHRpb25zIHx8IHt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZGV0ZWN0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29sdW1uVGl0bGUoZmllbGQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGV0ZWN0Q2hhbmdlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2xzOiBEYXRhQ29sdW1uW10pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gY29scy5maW5kKGNvbCA9PiBjb2wuZmllbGQgPT09IGZpZWxkKTtcclxuICAgICAgICAgICAgaWYgKGNvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGRldGVjdENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o6S5bqPXHJcbiAgICAgKiBAcGFyYW0gc29ydE5hbWUg5o6S5bqP5a2X5q6177yM5aaC77yaICduYW1lLGFnZSdcclxuICAgICAqIEBwYXJhbSBzb3J0T3JkZXIg5o6S5bqP5pa55byP77yM5aaC77yaJ2Rlc2MsIGFzYydcclxuICAgICAqL1xyXG4gICAgc29ydChzb3J0TmFtZT86IHN0cmluZywgc29ydE9yZGVyPzogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHNvcnROYW1lID09PSBudWxsIHx8IHNvcnROYW1lID09PSAnJyB8fCBzb3J0T3JkZXIgPT09IG51bGwgfHwgc29ydE9yZGVyID09PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyU29ydCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzb3J0TmFtZSAmJiBzb3J0T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMudXBkYXRlU29ydEluZm8oc29ydE5hbWUsIHNvcnRPcmRlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnROYW1lID0gc29ydE5hbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRPcmRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLnNldFNvcnRJbmZvKHRoaXMuc29ydE5hbWUsIHRoaXMuc29ydE9yZGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGZzLmNsaWVudFNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9uQ29sdW1uU29ydGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyU29ydCgpIHtcclxuICAgICAgICB0aGlzLnNvcnROYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSAnJztcclxuICAgICAgICB0aGlzLmRmcy5zZXRTb3J0SW5mbygnJywgJycpO1xyXG4gICAgICAgIGlmICghdGhpcy5yZW1vdGVTb3J0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuY2xlYXJTb3J0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkNvbHVtblNvcnRlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sdW1uU29ydGVkKCkge1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLnNvcnROYW1lICYmIHRoaXMuc29ydE9yZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVycyA9IHRoaXMuc29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIHBhcmFtcyA9IHRoaXMuc29ydE5hbWUuc3BsaXQoJywnKS5yZWR1Y2UoKHIsIG4sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJbbl0gPSBvcmRlcnNbaV0gfHwgJ2FzYyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZnMuY2xpZW50U29ydCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2x1bW5Tb3J0ZWQuZW1pdChwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNvcnRJbmZvKG5ld1NvcnROYW1lLCBuZXdTb3J0T3JkZXIpIHtcclxuICAgICAgICBjb25zdCBzb3J0TmFtZSA9IHRoaXMuc29ydE5hbWU7XHJcbiAgICAgICAgY29uc3Qgc29ydE9yZGVyID0gdGhpcy5zb3J0T3JkZXI7XHJcbiAgICAgICAgbGV0IHNvcnRGaWVsZHMgPSBbXTtcclxuICAgICAgICBsZXQgc29ydE9yZGVycyA9IFtdO1xyXG4gICAgICAgIGlmIChzb3J0TmFtZSkge1xyXG4gICAgICAgICAgICBzb3J0RmllbGRzID0gc29ydE5hbWUuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgc29ydE9yZGVycyA9IHNvcnRPcmRlci5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX3NvcnRGaWVsZHMgPSBuZXdTb3J0TmFtZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGNvbnN0IF9zb3J0T3JkZXJzID0gbmV3U29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcblxyXG5cclxuICAgICAgICBfc29ydEZpZWxkcy5mb3JFYWNoKChuRmllbGQsIG5JbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xPcmRlciA9IF9zb3J0T3JkZXJzW25JbmRleF0gfHwgJ2FzYyc7XHJcbiAgICAgICAgICAgIGxldCBuZXdPcmRlciA9IGNvbE9yZGVyO1xyXG4gICAgICAgICAgICBjb25zdCBpID0gc29ydEZpZWxkcy5maW5kSW5kZXgobiA9PiBuID09PSBuRmllbGQpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfb3JkZXIgPSBzb3J0T3JkZXJzW2ldID09PSAnYXNjJyA/ICdkZXNjJyA6ICdhc2MnO1xyXG4gICAgICAgICAgICAgICAgbmV3T3JkZXIgPSBfb3JkZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aVNvcnQgJiYgbmV3T3JkZXIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydEZpZWxkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRPcmRlcnNbaV0gPSBfb3JkZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydEZpZWxkcy5wdXNoKG5GaWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydE9yZGVycy5wdXNoKGNvbE9yZGVyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydEZpZWxkcyA9IFtuRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRPcmRlcnMgPSBbY29sT3JkZXJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0RmllbGRzLmpvaW4oJywnKTtcclxuICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRPcmRlcnMuam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIOWIl+iuvue9riAqL1xyXG4gICAgc2hvd0NvbnRyb2xQYW5lbCgkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlQ29udHJvbFBhbmVsICYmIHRoaXMuc2V0dGluZ1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1NldHRpbmdIdHRwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1NlcnZpY2Uuc2hvdyhzZWxmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tTZXR0aW5nSHR0cCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ1NlcnZpY2UuaHR0cFJlc3RTZXJ2aWNlIHx8ICF0aGlzLnNldHRpbmdTZXJ2aWNlLmh0dHBSZXN0U2VydmljZS5iZWZSZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzSHR0cCA9IHRoaXMuaW5qZWN0LmdldChHUklEX1NFVFRJTkdTX0hUVFAsIG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdTZXJ2aWNlLmh0dHBSZXN0U2VydmljZSA9IHNldHRpbmdzSHR0cDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZUhlYWRlcihmbGFnID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuZGdzLmRpc2FibGVIZWFkZXIuZW1pdChmbGFnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog6I635Y+W55So5oi35Liq5oCn5YyW6K6+572uICovXHJcbiAgICBwcml2YXRlIHVzZXJQcm9maWxlU2V0dGluZyhzZXR0aW5ncykge1xyXG5cclxuICAgICAgICBjb25zdCB7IHNvcnRJbmZvLCB2aWV3Q29sdW1ucywgZ3JvdXBGaWVsZCwgY29sdW1uRm9ybWF0LCBleHBhbmRHcm91cFJvd3MsIG11bHRpSGVhZGVycyAgfSA9IHNldHRpbmdzO1xyXG4gICAgICAgIGxldCBfc29ydE5hbWUsIF9zb3J0T3JkZXI7XHJcbiAgICAgICAgaWYgKHNvcnRJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc29ydE5hbWUsIHNvcnRPcmRlciB9ID0gc29ydEluZm87XHJcbiAgICAgICAgICAgIF9zb3J0TmFtZSA9IHNvcnROYW1lO1xyXG4gICAgICAgICAgICBfc29ydE9yZGVyID0gc29ydE9yZGVyXHJcbiAgICAgICAgICAgIGlmIChzb3J0TmFtZSAmJiBzb3J0TmFtZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0TmFtZS5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc29ydE9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0T3JkZXIgPSBzb3J0T3JkZXIuam9pbignLCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzWydfX3NvcnRJbmZvJ10gPSBzb3J0SW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNldE11bHRpSGVhZGVycyAmJiBtdWx0aUhlYWRlcnMgJiYgKG11bHRpSGVhZGVycy52aWV3Q29sc3x8IFtdKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgZ3JpZEluaXRPcHRpb25zID0gdGhpcy5kZnNbJ19zdGF0ZSddLmluaXRpYWxPcHRpb25zO1xyXG4gICAgICAgICAgICBjb25zdCBfY29scyA9IHRoaXMuc2V0dGluZ1NlcnZpY2UuZ2V0TXVsdGlIZWFkZXJDb2x1bW5zKG11bHRpSGVhZGVycy52aWV3Q29scywgZ3JpZEluaXRPcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKF9jb2xzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBfY29scztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbENvbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHZpZXdDb2x1bW5zICYmIHZpZXdDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5jb2x1bW5zLm1hcChjb2xzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdTZXJ2aWNlLnVwZGF0ZUNvbHVtbkZvcm1hdChjb2xzLCBjb2x1bW5Gb3JtYXQsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdTZXJ2aWNlLm5ld1Zpc2libGVPcmRlckNvbHVtbnMoY29scywgdmlld0NvbHVtbnMsIGNvbHVtbkZvcm1hdCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbENvbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGNvbHMgPT4ge1xyXG4gICAgICAgICAgICBjb2xzLmZvckVhY2goY29sID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChfc29ydE5hbWUgJiYgX3NvcnROYW1lLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBfc29ydE5hbWUuaW5kZXhPZihjb2wuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sLm9yZGVyID0gX3NvcnRPcmRlcltpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2wuZmllbGQgfHwgY29sLmZpZWxkLmluZGV4T2YoJ2ZhcnJpcy1kYXRhZ3JpZC1jb2x1bW5fJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbC5maWx0ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwUm93cyAmJiAoZ3JvdXBGaWVsZCAhPT0gbnVsbCAmJiBncm91cEZpZWxkICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBGaWVsZCA9IGdyb3VwRmllbGQ7XHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kR3JvdXBSb3dzID0gZXhwYW5kR3JvdXBSb3dzID09PSB1bmRlZmluZWQgPyB0aGlzLmV4cGFuZEdyb3VwUm93czogZXhwYW5kR3JvdXBSb3dzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zZXRDdXJyZW50Q29uZmlncyhzZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5piv5ZCm5Li65b2T5YmN5rS75Yqo55qE6KGo5qC8XHJcbiAgICBwcml2YXRlIGlzQWN0aXZlZCgpIHtcclxuICAgICAgICAvLyDliKTmlq1ncmlk5piv5ZCm5Li65rS75Yqo5LiU5Y+v6KeB55qE77yM6YG/5YWNU1BBIOS4i+WkmuS4qmdyaWTkuIDotbfov5vooYznm7jlhbPnmoTmk43kvZzvvJvmr5TlpoLkuIrkuIvmlrnlkJHplK7np7vliqhcclxuICAgICAgICByZXR1cm4gRG9tSGFuZGxlci5oYXNDbGFzcyh0aGlzLmRnQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMuX2FjdGl2ZV9kYXRhZ3JpZF9jbHMpICYmIHRoaXMuZGdDb250YWluZXIubmF0aXZlRWxlbWVudC5vZmZzZXRQYXJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5riF55CG5peg5pWI55qERE9NXHJcbiAgICBwcml2YXRlIGNsZWFuRG9tKCkge1xyXG4gICAgICAgIC8vIOa4heeQhiBUT09MLVRJUFxyXG4gICAgICAgIGNvbnN0IHRpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0YWdyaWQtY2VsbC10b29sdGlwJyk7XHJcbiAgICAgICAgaWYgKHRpcHMgJiYgdGlwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGlwcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgbi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNlbGxJc1JlYWRPbmx5KGNvbDogRGF0YUNvbHVtbiwgcm93RGF0YSkge1xyXG4gICAgICAgIGxldCByZWFkT25seSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVSb3cpIHtcclxuICAgICAgICAgICAgcmVhZE9ubHkgPSB0aGlzLmRpc2FibGVSb3cocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXJlYWRPbmx5KSB7XHJcbiAgICAgICAgICAgIGlmIChjb2wucmVhZG9ubHkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2wucmVhZG9ubHkgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5ID0gY29sLnJlYWRvbmx5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29sLnJlYWRvbmx5ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHkgPSBjb2wucmVhZG9ubHkocm93RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWRPbmx5O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdyb3VwRmllbGRDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrU2V0dGluZ0h0dHAoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5nU2VydmljZS5zYXZlVXNlckNvbmZpZyh0aGlzLmlkKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ncm91cEZpZWxkQ2hhbmdlLmVtaXQoeyBuZXdHcm91cEZpZWxkOiB0aGlzLmdyb3VwRmllbGQsIGdyaWQ6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlR3JvdXBGaWVsZChmaWVsZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZmllbGRzID0gdGhpcy5ncm91cEZpZWxkLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgY29uc3QgZGVsSWR4ID0gZmllbGRzLmluZGV4T2YoZmllbGQpO1xyXG4gICAgICAgIGlmIChkZWxJZHggPiAtMSkge1xyXG4gICAgICAgICAgICBmaWVsZHMuc3BsaWNlKGRlbElkeCwgMSkuam9pbignLCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdyb3VwRmllbGQgPSBmaWVsZHMuam9pbignLCcpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZUNvbHVtbihbZmllbGRdLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmdyb3VwRmllbGRDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJBbGxHcm91cHBpbmdGaWVsZCgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMuZ3JvdXBGaWVsZC5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRmllbGQgPSAnJztcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlQ29sdW1uKGZpZWxkcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBGaWVsZENoYW5nZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRHcm91cEZpZWxkcyhncm91cEZpZWxkcykge1xyXG4gICAgICAgIHRoaXMuZ3JvdXBGaWVsZCA9IGdyb3VwRmllbGRzO1xyXG4gICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3RpdmVEYXRhR3JpZChhY3RpdmUgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZ3JpZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZi1kYXRhZ3JpZC5kYXRhZ3JpZC1hY3RpdmUnKTtcclxuICAgICAgICBpZiAoZ3JpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGdyaWRzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIucmVtb3ZlQ2xhc3MobiwgdGhpcy5fYWN0aXZlX2RhdGFncmlkX2Nscyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5hZGRDbGFzcyh0aGlzLmRnQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQsIHRoaXMuX2FjdGl2ZV9kYXRhZ3JpZF9jbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgb25EYXRhZ3JpZENvbnRhaW5lckZvY3VzKCRldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZURhdGFHcmlkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldFNoYWRvd0NvbHVtbkZvckZhc3RNb2RlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZhc3QpIHtcclxuICAgICAgICAgICAgY29uc3QgZml4ZWRMZWZ0ID0gdGhpcy5mbGF0Q29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAnbGVmdCcpO1xyXG4gICAgICAgICAgICBjb25zdCBmaXhlZFJpZ2h0ID0gdGhpcy5mbGF0Q29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAncmlnaHQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaXhlZExlZnQgJiYgZml4ZWRMZWZ0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnRXaWR0aFRvdGFsID0gMDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRXaWR0aFRvdGFsICs9IDM2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0V2lkdGhUb3RhbCArPSB0aGlzLmxpbmVOdW1iZXJXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpeGVkTGVmdC5mb3JFYWNoKChuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRXaWR0aFRvdGFsICs9IGluZGV4ID8gZml4ZWRMZWZ0W2luZGV4IC0gMV0ud2lkdGggOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG4ubGVmdCA9IGxlZnRXaWR0aFRvdGFsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZml4ZWRMZWZ0W2ZpeGVkTGVmdC5sZW5ndGggLSAxXVsnbGVmdFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRmcy5nZXRDb2x1bW4oZml4ZWRMZWZ0W2ZpeGVkTGVmdC5sZW5ndGggLSAxXS5maWVsZClbJ2xlZnRTaGFkb3dDb2wnXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChmaXhlZFJpZ2h0ICYmIGZpeGVkUmlnaHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBmaXhlZFJpZ2h0WzBdWydyaWdodFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGxldCByaWdodFdpZHRoVG90YWwgPSBmaXhlZFJpZ2h0LnJlZHVjZSgociwgYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByICsgYy53aWR0aDtcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpeGVkUmlnaHQuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByaWdodFdpZHRoVG90YWwgLT0gbi53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBuLnJpZ2h0ID0gcmlnaHRXaWR0aFRvdGFsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZnMuZ2V0Q29sdW1uKGZpeGVkUmlnaHRbMF0uZmllbGQpWydyaWdodFNoYWRvd0NvbCddID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDljZXlhYPlr7npvZDmlrnlvI/moLflvI/liqjmgIHnlJ/miJBcclxuICAgIHByaXZhdGUgc2V0Q2VsbFN0eWxlKCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZmxhdENvbHVtbnMgfHwgIXRoaXMuZmxhdENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNzc2FyciA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCAgdmVydGljYWxBbGlnbiA9IChjb2x1bW4pID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY29sdW1uLnZhbGlnbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB2YSA9ICdmbGV4LXN0YXJ0JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdmEgPSAnZmxleC1lbmQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB2YSA9ICdjZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB2YTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBob3Jpem9udGFsQWxpZ24gPSAoY29sdW1uKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBoYSA9ICdmbGV4LXN0YXJ0JztcclxuICAgICAgICAgICAgaWYgKGNvbHVtbi5hbGlnbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgaGEgPSAnZmxleC1lbmQnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi5hbGlnbiA9PT0gJ2NlbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIGhhID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGhhO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U2hhZG93Q29sdW1uRm9yRmFzdE1vZGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5mbGF0Q29sdW1ucy5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzcyA9IGAke3RoaXMuY3VzdG9tU3R5bGVLZXkoKX0gLmNlbGwtdGV4dC1hbGlnbl9fJHtjb2wuZmllbGQucmVwbGFjZSgvXFwuL2csICdfJyl9IHthbGlnbi1pdGVtczogJHt2ZXJ0aWNhbEFsaWduKGNvbCl9LCBqdXN0aWZ5LWNvbnRlbnQ6ICR7aG9yaXpvbnRhbEFsaWduKGNvbCl9fWA7XHJcbiAgICAgICAgICAgIGNzc2Fyci5wdXNoKGNzcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5mYXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkID09PSAnbGVmdCcgfHwgY29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpeGVkID0gYCR7dGhpcy5jdXN0b21TdHlsZUtleSgpfSAuZi1kYXRhZ3JpZC1mYXN0X19maXhlZC0ke2NvbC5maXhlZH1bZmllbGQ9XCIke2NvbC5maWVsZH1cIl17YDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWQgKz0gYGxlZnQ6ICR7Y29sLmxlZnR9cHh9YDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2wuZml4ZWQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWQgKz0gYHJpZ2h0OiAke2NvbC5yaWdodH1weH1gO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3NzYXJyLnB1c2goZml4ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGdzLmFwcGVuZENzc1J1bGVzKGNzc2Fycik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVGaXhlZENvbHVtbkNzc0ZvckZhc3RNb2RlKGNvbDogRGF0YUNvbHVtbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZhc3QpIHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIGNzcy5cclxuICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSB0aGlzLmZsYXRDb2x1bW5zLmZpbmRJbmRleChuID0+IG4uZmllbGQgPT09IGNvbC5maWVsZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW4gPSB0aGlzLmZsYXRDb2x1bW5zW2NvbEluZGV4ICsgMV07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2hhZG93Q29sdW1uRm9yRmFzdE1vZGUoKTtcclxuICAgICAgICAgICAgaWYgKG5leHRDb2x1bW4gJiYgbmV4dENvbHVtbi5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSAgYCR7dGhpcy5jdXN0b21TdHlsZUtleSgpfSAuZi1kYXRhZ3JpZC1mYXN0X19maXhlZC0ke25leHRDb2x1bW4uZml4ZWR9W2ZpZWxkPVwiJHtuZXh0Q29sdW1uLmZpZWxkfVwiXWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZWNzcyA9IHJ1bGVOYW1lICsgJ3snICsgbmV4dENvbHVtbi5maXhlZCArICc6JyArIG5leHRDb2x1bW5bbmV4dENvbHVtbi5maXhlZF0gKyAncHh9JztcclxuICAgICAgICAgICAgICAgIHRoaXMuZGdzLmFwcGVuZENzc1J1bGVzKFtzdHlsZWNzc10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZEdyb3VwUm93KGdyb3VwUm93SW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZGdzLnRvZ2dsZUdyb3VwUm93JC5lbWl0KHsgZXhwYW5kOiB0cnVlLCBncm91cFJvd0luZGV4IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbGxhcHNlR3JvdXBSb3coZ3JvdXBSb3dJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5kZ3MudG9nZ2xlR3JvdXBSb3ckLmVtaXQoeyBleHBhbmQ6IGZhbHNlLCBncm91cFJvd0luZGV4IH0pO1xyXG4gICAgfVxyXG4gICBcclxuXHJcbiAgICBleHBhbmRBbGxHcm91cFJvd3MoKSB7XHJcbiAgICAgICAgdGhpcy5kZ3MudG9nZ2xlQWxsR3JvdXBSb3dzJC5lbWl0KHsgZXhwYW5kOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbGxhcHNlQWxsR3JvdXBSb3dzKCkge1xyXG4gICAgICAgIHRoaXMuZGdzLnRvZ2dsZUFsbEdyb3VwUm93cyQuZW1pdCh7IGV4cGFuZDogZmFsc2UgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gIzM4Mjc4OCBcclxuICAgIHByaXZhdGUgY2hlY2tGaWx0ZXJWYWx1ZXMoY29uZGl0aW9uczogYW55KSB7XHJcbiAgICAgICAgY29uc3QgX2NvbmRpdGlvbnMgPSBjbG9uZURlZXAoY29uZGl0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlU21hcnRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyRmllbGRzID0gQXJyYXkuZnJvbShuZXcgU2V0KF9jb25kaXRpb25zLm1hcChuID0+IG4uRmlsdGVyRmllbGQpKSk7XHJcbiAgICAgICAgICAgIGZpbHRlckZpZWxkcy5mb3JFYWNoKChuOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuZGZzLmdldENvbHVtbihuKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2wgJiYgY29sLmRhdGFUeXBlID09PSAnZGF0ZXRpbWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUZpbHRlcnMgPSBfY29uZGl0aW9ucy5maWx0ZXIoZiA9PiBmLkZpbHRlckZpZWxkID09PSBuKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cmxEYXRhID0gdGhpcy5zbWFydEZpbHRlclNlcnZpY2UuY29udHJvbERhdGEuZmluZChjdHJsID0+IGN0cmwubGFiZWxDb2RlID09IG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGRhdGVGaWx0ZXJzWzBdLlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwuaW5kZXhPZignOicpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZUZpbHRlcnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRmlsdGVyc1swXS5WYWx1ZSA9IHZhbCArICcgMDA6MDA6MDAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Z2e5Yy66Ze0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJsRGF0YS52YWx1ZS5zaW5nbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRmlsdGVyc1swXS5Db21wYXJlID0gQ29tcGFyZS5HcmVhdGVyT3JFcXVhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZXNzID0gY2xvbmVEZWVwKGRhdGVGaWx0ZXJzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXNzLlZhbHVlID0gdmFsICsgJyAyMzo1OTo1OSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVzcy5Db21wYXJlID0gQ29tcGFyZS5MZXNzT3JFcXVhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IF9jb25kaXRpb25zLmZpbmRJbmRleChmID0+IGYuRmlsdGVyRmllbGQgPT09IG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb25kaXRpb25zLnNwbGljZShpbmRleCArIDEsIDAsIGxlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJsRGF0YS52YWx1ZS5lbmRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRmlsdGVyc1swXS5WYWx1ZSA9IHZhbCArICcgMjM6NTk6NTknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGaWx0ZXJzWzBdLlZhbHVlID0gZGF0ZUZpbHRlcnNbMF0uVmFsdWUgKyAnIDAwOjAwOjAwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGaWx0ZXJzWzFdLlZhbHVlID0gZGF0ZUZpbHRlcnNbMV0uVmFsdWUgKyAnIDIzOjU5OjU5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gX2NvbmRpdGlvbnM7XHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICBnZXRBY3Rpb25Db2x1bW4oKSB7XHJcbiAgICAgICAgLy8g5pON5L2c5YiXaWQg55SxIOWIl+ihqOagh+ivhl9jYW96dW9saWVcclxuICAgICAgICByZXR1cm4gZmxhdHRlbih0aGlzLmRmcy5nZXRTdGF0ZSgpLmluaXRpYWxPcHRpb25zLmRlc2lnbmVyQ29sdW1ucykuZmluZCgobjogYW55KSA9PiBuLmlkICYmIG4uaWQuaW5kZXhPZignX2Nhb3p1b2xpZScpID4gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVBY3Rpb25Db2x1bW4oKSB7XHJcbiAgICAgICAgY29uc3QgY3psOiBhbnkgPSB0aGlzLmdldEFjdGlvbkNvbHVtbigpO1xyXG4gICAgICAgIGlmIChjemwpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlQ29sdW1uKGN6bC5maWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dBY3Rpb25Db2x1bW4oKSB7XHJcbiAgICAgICAgY29uc3QgY3psOiBhbnkgPSB0aGlzLmdldEFjdGlvbkNvbHVtbigpO1xyXG4gICAgICAgIGlmIChjemwpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q29sdW1uKGN6bC5maWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIOaUr+aMgeWFqOWxgOiuvue9ruihqOWktOOAgeWQiOiuoeihjOOAgeaVsOaNruihjOOAgeihjOWPt+WIl+WuveOAgeWkjemAieahhuWIl+WuvVxyXG4gICAgICog5YiG6aG15p2h6auY5bqm5Y+v6YCa6L+H6YWN572u5qC35byP5a6e546w77yM5aaC77yaXHJcbiAgICAgKiAgLmYtZGF0YWdyaWQtcGFnZXIge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDYwcHghaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuICAgICAqICovIFxyXG4gICAgYXBwbHlOZXdTaXplKHNpemVDb25maWc6IFNpemVDb25maWcpIHtcclxuICAgICAgICBpZiAoIXNpemVDb25maWcgfHwgQXJyYXkuaXNBcnJheShzaXplQ29uZmlnKSB8fCB0eXBlb2Ygc2l6ZUNvbmZpZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCfkvKDlhaXnmoTlj4LmlbDnsbvlnovkuI3ljLnphY3vvIFUaGUgcGFyYW1ldGVyIHR5cGUgaXMgaW5jb3JyZWN0IScsICd3YXJuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IF9tYXhOdW0gPSAxMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6buY6K6k5YC8XHJcbiAgICAgICAgY29uc3QgZGVmYXV0bFZhbHVlczogU2l6ZUNvbmZpZyA9IHtcclxuICAgICAgICAgICAgJ2hlYWRlckhlaWdodCc6IDM1LCBcclxuICAgICAgICAgICAgJ2Zvb3RlckhlaWdodCc6IDMxLCBcclxuICAgICAgICAgICAgJ3Jvd0hlaWdodCc6IDMxLCBcclxuICAgICAgICAgICAgJ2NoZWNrYm94Q29sdW1uV2lkdGgnOiAzNiwgXHJcbiAgICAgICAgICAgICdsaW5lTnVtYmVyV2lkdGgnOiAzNixcclxuICAgICAgICAgICAgJ2ZpbHRlclJvd0hlaWdodCc6IDQwIFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIOacieaViOWxnuaAp+WQjeensFxyXG4gICAgICAgIGNvbnN0IHByb3BzID0gWydoZWFkZXJIZWlnaHQnLCAnZm9vdGVySGVpZ2h0JywgJ3Jvd0hlaWdodCcsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2hlY2tib3hDb2x1bW5XaWR0aCcsICdsaW5lTnVtYmVyV2lkdGgnLCAnZmlsdGVyUm93SGVpZ2h0J107XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNpemVDb25maWcpO1xyXG5cclxuICAgICAgICBpZiAoa2V5cyAmJiBrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDmuIXnkIbkuI3mlK/mjIHnmoTlsZ7mgKfvvJtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLmZpbmQobiA9PiBuID09PSBrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2ID0gc2l6ZUNvbmZpZ1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA9PSBudWxsIHx8IGlzTmFOKHYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzaXplQ29uZmlnW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgJiYgISFwYXJzZUludCh2LCAxMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBwYXJzZUludCh2LCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5mbG9vcih2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlgLzorr7lgLxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHYpIHx8IHYgPD0gMCB8fCB2IDwgZGVmYXV0bFZhbHVlc1trXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZUNvbmZpZ1trXSA9IGRlZmF1dGxWYWx1ZXNba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplQ29uZmlnW2tdID0gdiA+IF9tYXhOdW0gPyBfbWF4TnVtOiB2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2l6ZUNvbmZpZ1trXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwcm9wS2V5cyA9IE9iamVjdC5rZXlzKHNpemVDb25maWcpO1xyXG5cclxuICAgICAgICBpZiAocHJvcEtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlVGhlbWVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgc2l6ZUNvbmZpZyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvb3RlclJvd0hlaWdodCA9IHRoaXMuZm9vdGVySGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWluUm93SGVpZ2h0ID0gYG1pbl9yb3dfaGVpZ2h0XyR7dGhpcy5yb3dIZWlnaHR9YDtcclxuICAgICAgICAgICAgdGhpcy5kZ3MucmVtb3ZlQ3NzUnVsZShgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC4ke21pblJvd0hlaWdodH1gKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXN0b21TdHlsZTIoe3N0eWxlOiB7IFwibWluLWhlaWdodFwiOiB0aGlzLnJvd0hlaWdodCArICdweCcsIGhlaWdodDogIHRoaXMucm93SGVpZ2h0ICsgJ3B4J319LCBudWxsLCBtaW5Sb3dIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IG1pbkZvb3RlclJvd0hlaWdodCA9IGBtaW5fZm9vdGVyX3Jvd19oZWlnaHRfJHt0aGlzLl9mb290ZXJSb3dIZWlnaHR9YDtcclxuICAgICAgICAgICAgdGhpcy5kZ3MucmVtb3ZlQ3NzUnVsZShgJHt0aGlzLmN1c3RvbVN0eWxlS2V5KCl9IC4ke21pbkZvb3RlclJvd0hlaWdodH1gKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXN0b21TdHlsZTIoeyBzdHlsZTogeyBcIm1pbi1oZWlnaHRcIjogYCR7dGhpcy5fZm9vdGVyUm93SGVpZ2h0fXB4YCxoZWlnaHQ6ICB0aGlzLnJvd0hlaWdodCArICdweCd9fSwgbnVsbCwgbWluRm9vdGVyUm93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGZzWyd1cGRhdGVTdGF0ZSddKHNpemVDb25maWcsIGZhbHNlKTtcclxuICAgICAgICAgICAgb2YoMSkucGlwZShkZWJvdW5jZVRpbWUoMjAwKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvd0hlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGb290ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc0NoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ub3dyYXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRncy5jZWxsQ29udGVudFdyYXBDaGFuZ2VkLmVtaXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==