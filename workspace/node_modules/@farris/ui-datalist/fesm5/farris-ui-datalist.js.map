{"version":3,"file":"farris-ui-datalist.js.map","sources":["ng://@farris/ui-datalist/lib/datalist.service.ts","ng://@farris/ui-datalist/lib/core/types/index.ts","ng://@farris/ui-datalist/lib/core/datalist-facade.service.ts","ng://@farris/ui-datalist/lib/datalist.component.ts","ng://@farris/ui-datalist/lib/datalist.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DatalistService {\r\n\r\n  constructor() { }\r\n}\r\n","import { FarrisDataState } from '@farris/ui-common';\r\n\r\nexport interface DataListState extends FarrisDataState {\r\n    title: string;\r\n    fit: boolean;\r\n    width: number;\r\n    height: number;\r\n    showHeader: boolean;\r\n    headerHeight: number;\r\n    containerHeight: number;\r\n}\r\n\r\n\r\nexport const defaultDataState: DataListState = {\r\n    title: '',\r\n    data: [],\r\n    textField: '',\r\n    idField: 'id',\r\n    fit: true,\r\n    width: 300,\r\n    height: 400,\r\n    multiSelect: false,\r\n    showHeader: false,\r\n    headerHeight: 40,\r\n    disabled: false,\r\n    containerHeight: 360,\r\n    selections: []\r\n}\r\n\r\n\r\nexport type SelectItem = { index: number, data: any };","import { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs/operators';\r\nimport { defaultDataState, DataListState } from './types/index';\r\nimport { BaseDataFacadeService } from '@farris/ui-common';\r\n\r\n@Injectable()\r\nexport class DataListFacadeService extends BaseDataFacadeService<DataListState> {\r\n    containerHeight$ = this.state$.pipe(\r\n        map((state: DataListState) => {\r\n            return state.containerHeight;\r\n        })\r\n    );\r\n\r\n    options$ = this.state$;\r\n\r\n    constructor() {\r\n        super(defaultDataState);\r\n    }\r\n\r\n    updateContainerSize(width: number, height: number) {\r\n        // tslint:disable-next-line:variable-name\r\n        let _height = height;\r\n        if (this._state.showHeader) {\r\n            _height = height - this._state.headerHeight;\r\n        }\r\n\r\n        this.updateState({ containerHeight: _height, width, height });\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    Input,\r\n    Directive,\r\n    TemplateRef,\r\n    ContentChild,\r\n    ElementRef,\r\n    HostBinding,\r\n    AfterViewInit,\r\n    ViewEncapsulation,\r\n    Output,\r\n    EventEmitter,\r\n    ChangeDetectionStrategy,\r\n    SimpleChanges,\r\n    OnChanges,\r\n    ViewChild\r\n} from '@angular/core';\r\nimport { FarrisDataItem } from '@farris/ui-common';\r\nimport { DataListFacadeService } from './core/datalist-facade.service';\r\nimport { SelectItem } from './core/types';\r\n\r\n@Directive({\r\n    selector: '[list-item-tmp]'\r\n})\r\nexport class DataListItemTemplateDirective {\r\n    constructor(public template: TemplateRef<any>) {}\r\n}\r\n\r\n@Component({\r\n    selector: 'farris-datalist',\r\n    templateUrl: './datalist.component.html',\r\n    styles: [\r\n        `\r\n            .ps__rail-x,\r\n            .ps__rail-y {\r\n                z-index: 9;\r\n            }\r\n            .norecords-content {\r\n                height: 8.125rem;\r\n                padding: 7.8125rem 0 0;\r\n                width: 100%;\r\n                text-align: center;\r\n                font-size: 1rem;\r\n                color: rgba(0,0,0,.25);\r\n                background: url(imgs/table-norecords.png) top center no-repeat;\r\n                margin: -4.0625rem 0 0 -.625rem;\r\n                line-height: 2.5rem;\r\n            }\r\n\r\n            .list-group-item-disabled {\r\n                color: #ccc!important;\r\n            }\r\n\r\n            .f-datalist .list-group .list-group-item.list-group-item-disabled:hover {\r\n                background: transparent!important;\r\n            }\r\n        `\r\n    ],\r\n    providers: [DataListFacadeService],\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DatalistComponent implements OnInit, OnChanges, AfterViewInit {\r\n    @HostBinding('class.f-datalist') cls = true;\r\n\r\n    @HostBinding('class.farris-main-area')\r\n    get fluid() {\r\n        return this._height === 'auto' ? false : this.fit;\r\n    }\r\n\r\n    @Input() itemHeight: number;\r\n\r\n    @Input() title: string;\r\n    @Input() data: any;\r\n    @Input() textField: string;\r\n    @Input() valueField: string;\r\n    @Input() idField: string;\r\n    @Input() fit = true;\r\n    @Input() width = 300;\r\n    @Input() height: number | string = 400;\r\n    @Input() multiSelect = false;\r\n    @Input() disabled = false;\r\n    @Input() showHeader = false;\r\n    @Input() showCheckBox = false;\r\n    @Input() headerHeight = 40;\r\n    @Input() selectedValues: string;\r\n    @Input() enableCancelSelected = true;\r\n\r\n    @Input() disabledField = 'disabled';\r\n    @Input() showDisabledItem = true;\r\n    /** åéç¬¦ï¼é»è®¤ä¸º , */\r\n    @Input() separator = ',';\r\n    @ContentChild(DataListItemTemplateDirective, { read: TemplateRef }) itemTemplate: TemplateRef<any>;\r\n\r\n    @Output() selected = new EventEmitter<SelectItem>();\r\n    @Output() unSelected = new EventEmitter<SelectItem>();\r\n    @Output() selectedValuesChange = new EventEmitter();\r\n\r\n\r\n    @Input() emptyMessage = 'ææ æ°æ®'\r\n    scrollbarHeight$ = this.store.containerHeight$;\r\n    // tslint:disable-next-line:variable-name\r\n    _options$ = this.store.options$;\r\n    data$ = this.store.data$;\r\n    private _height: any;\r\n\r\n    @ViewChild('emptyMsgEl') emptyMsgEl: ElementRef<any>;\r\n\r\n    constructor(public el: ElementRef, public store: DataListFacadeService) {}\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes && changes.data && !changes.data.isFirstChange()) {\r\n            this.initCtrlState();\r\n        }\r\n\r\n        if (changes.selectedValues && !changes.selectedValues.isFirstChange()) {\r\n            if (this.selectedValues !== '' && this.selectedValues !== undefined && this.selectedValues !== null) {\r\n                this.store.setSelections(this.selectedValues, this.separator);\r\n            } else {\r\n                this.clearSelections();\r\n            }\r\n        }\r\n\r\n    }\r\n    ngOnInit() {\r\n        this._height = this.height;\r\n        this.initCtrlState();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => {\r\n            if (this.selectedValues && this.height !== 'auto') {\r\n\r\n                let val = this.selectedValues;\r\n                if (this.selectedValues.indexOf(this.separator) > -1) {\r\n                    val = this.selectedValues.indexOf(this.separator)[0];\r\n                }\r\n\r\n                const index = this.data.findIndex(n => n[this.idField] == val);\r\n                const ulEl = this.el.nativeElement.querySelector('ul.list-group');\r\n                if (ulEl.children[index]) {\r\n                    ulEl.children[index].scrollIntoView({block: 'nearest'});\r\n                }\r\n            }\r\n        }, 10);\r\n    }\r\n    private loadData() {\r\n        if (this.data) {\r\n            this.store.loadData(this.data, this.selectedValues, this.separator);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (this.emptyMsgEl && (!this.data || !this.data.length)) {\r\n                this.emptyMsgEl.nativeElement.innerHTML = this.emptyMessage;\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    private initCtrlState() {\r\n        const { title, textField, fit, idField, valueField, width, height, multiSelect, disabled, headerHeight, separator, disabledField} = {\r\n            ...this\r\n        };\r\n        this.store.initState({\r\n            title,\r\n            textField,\r\n            valueField,\r\n            fit,\r\n            idField,\r\n            width,\r\n            height,\r\n            multiSelect,\r\n            disabled,\r\n            headerHeight,\r\n            separator,\r\n            disabledField\r\n        });\r\n\r\n        this.loadData();\r\n    }\r\n\r\n    clearSelections() {\r\n        this.store.clearSelections();\r\n    }\r\n\r\n    resize() {\r\n        if (this.fit) {\r\n            const container = this.el.nativeElement.parentElement;\r\n            const width = container.offsetWidth;\r\n            const height = container.offsetHeight;\r\n            this.store.updateContainerSize(width, height);\r\n        }\r\n    }\r\n\r\n    private updateSelectValues() {\r\n        const values = this.store.getSelections().map(item => {\r\n            return item[this.valueField];\r\n        });\r\n\r\n        this.selectedValues = values.join(this.separator);\r\n        this.selectedValuesChange.emit(this.selectedValues);\r\n    }\r\n\r\n    onSelectHandler(event: Event, index: number, item: FarrisDataItem) {\r\n        event.stopPropagation();\r\n        if (this.disabled) {\r\n            return false;\r\n        }\r\n\r\n        if (item.disabled) {\r\n            return;\r\n        }\r\n\r\n        const { data } = { ...item };\r\n\r\n        if (!this.store.isSelect(item.id)) {\r\n            this.store.selectItem(data, index);\r\n            this.updateSelectValues();\r\n            this.selected.emit({ index, data });\r\n        } else {\r\n            if (this.enableCancelSelected) {\r\n                this.store.unSelectItem(data);\r\n                this.updateSelectValues();\r\n                this.unSelected.emit({ index, data });\r\n            }\r\n        }\r\n    }\r\n    onCheckedChange($event) {\r\n        const { index, row, originalEvent } = $event;\r\n        this.onSelectHandler(originalEvent, index, row);\r\n    }\r\n    isChecked(item: FarrisDataItem) {\r\n        let val = this.selectedValues;\r\n        if (this.selectedValues === null && this.selectedValues === undefined) {\r\n            val = '';\r\n        }\r\n\r\n        if (typeof val === 'boolean') {\r\n            val = '' + val;\r\n        }\r\n\r\n        if (val) {\r\n            let _vals = [];\r\n            if (this.multiSelect) {\r\n                _vals = val.split(this.separator);\r\n            } else {\r\n                _vals = [val];\r\n            }\r\n            return _vals.some( v => v ==  '' + item.data[this.valueField]);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isSelected(item: FarrisDataItem) {\r\n        return this.isChecked(item);\r\n    }\r\n\r\n    selectAll() {\r\n        this.selectedValues = this.data.map(item => item[this.valueField]).join(this.separator);\r\n        this.store.selectAll();\r\n    }\r\n\r\n    unSelectAll() {\r\n        this.selectedValues = '';\r\n        this.store.clearSelections();\r\n    }\r\n}\r\n\r\n@Directive({\r\n    // tslint:disable-next-line:directive-selector\r\n    selector: '[farrist-datalist-item]'\r\n})\r\nexport class DataListItemComponentDirective implements OnInit {\r\n    @Input('farrist-datalist-item') data: FarrisDataItem;\r\n\r\n    constructor(private el: ElementRef) {}\r\n    ngOnInit() {}\r\n}\r\n\r\n/**\r\n * è¡¨ä½checkbox ç»ä»¶\r\n */\r\n@Component({\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'dl-checkbox',\r\n    template: `\r\n        <div class=\"custom-control custom-checkbox  custom-control-inline dl-checkbox\">\r\n            <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\" />\r\n            <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n        </div>\r\n    `,\r\n    styles: [\r\n        `\r\n            :host .custom-checkbox {\r\n                opacity: 1;\r\n                float: none;\r\n                margin: 0;\r\n                vertical-align: top;\r\n                padding-right: 0px;\r\n            }\r\n        `\r\n    ]\r\n})\r\nexport class DataListCheckboxComponent implements OnInit {\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n    @Input() index: number;\r\n    @Input() row: any;\r\n    @Output() checkedChange = new EventEmitter();\r\n\r\n    @ViewChild('chk') chk: ElementRef;\r\n\r\n    constructor() {}\r\n\r\n    ngOnInit() {}\r\n\r\n    handleClick(event) {\r\n        this.checked = !this.checked;\r\n        this.checkedChange.emit({ originalEvent: event, index: this.index, row: this.row, state: this.checked });\r\n        event.stopPropagation();\r\n    }\r\n}\r\n","import { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { NgModule } from '@angular/core';\r\nimport {\r\n    DatalistComponent,\r\n    DataListItemTemplateDirective,\r\n    DataListItemComponentDirective,\r\n    DataListCheckboxComponent\r\n} from './datalist.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        DatalistComponent,\r\n        DataListItemTemplateDirective,\r\n        DataListItemComponentDirective,\r\n        DataListCheckboxComponent\r\n    ],\r\n    imports: [PerfectScrollbarModule],\r\n    exports: [\r\n        DatalistComponent,\r\n        DataListItemTemplateDirective,\r\n        DataListItemComponentDirective,\r\n        DataListCheckboxComponent\r\n    ]\r\n})\r\nexport class DatalistModule {}\r\n"],"names":["tslib_1.__extends"],"mappings":"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"}
