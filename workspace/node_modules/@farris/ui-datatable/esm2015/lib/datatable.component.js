/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { InputGroupComponent } from '@farris/ui-input-group';
import { ChangeDetectorRef } from '@angular/core';
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-07-10 11:44:49
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-05 11:44:18
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, ViewChild, ElementRef, Input, ContentChild, TemplateRef, QueryList, ContentChildren, Output, EventEmitter, ViewEncapsulation, NgZone } from '@angular/core';
import { of } from 'rxjs';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { PaginationControlsComponent } from '@farris/ui-pagination';
import { IdService } from '@farris/ui-common';
import { deepCopy } from './datatable-column';
import { ColumnDirective } from './datatable-column.component';
import { DataTableService } from './datatable.service';
import { DataTableHeaderComponent } from './table/datatable-header.component';
export class DataTableComponent {
    /**
     * @param {?} dataService
     * @param {?} idService
     * @param {?} el
     * @param {?} cd
     * @param {?} ngZone
     */
    constructor(dataService, idService, el, cd, ngZone) {
        this.dataService = dataService;
        this.idService = idService;
        this.el = el;
        this.cd = cd;
        this.ngZone = ngZone;
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        this.keydownEnterEdit = false;
        this.allColumnsTitle = '所有列';
        /**
         * 是否支持任意字段搜索
         */
        this.searchAnyField = true;
        // 数据表高度
        // 是否填充
        this.fill = false;
        // 默认分页
        this.pagination = true;
        this.pagerOnServer = true;
        this.pageSize = 10;
        this.pageIndex = 1;
        this.showPageInfo = true;
        this.showPageNumber = true;
        this.showPageList = true;
        this.pagerViewMode = 'default';
        /**
         * 显示表头
         */
        this.showHeader = true;
        this._pageList = [10, 20, 30, 50, 100];
        this.total = 0;
        // 可筛选
        this.showFilterBar = false;
        /**
         * 启用虚拟渲染
         */
        this.virtualized = false;
        this.autoFitColumns = false;
        // table  数据
        this._data = [];
        this.remote = 'client';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 允许多列排序
         */
        this.multiSort = false;
        // 多选  单选
        this.singleSelect = true;
        this.idField = 'id';
        // 显示鼠标悬停高亮
        this.hover = true;
        // 分页事件
        this.pageChanged = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        this.search = new EventEmitter();
        this.columnSorted = new EventEmitter();
        this.rowDblClick = new EventEmitter();
        this.selectedRow = new EventEmitter();
        // 兼容
        this.selectRows = new EventEmitter();
        this.unSelectRow = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.checkAll = new EventEmitter();
        this.searchValueChange = new EventEmitter();
        this.sortChange = new EventEmitter();
        // 是否可拖拽  默认可以
        this.resizableColumns = true;
        /**
         * 针对同一条记录，单选时，多次单击后不取消选中。
         */
        this.keepSelect = true;
        // 是否有行模板
        this.hasRowTepml = false;
        // 设置拖拽停止器
        this.moveable = false;
        this.searchData = { field: '*', value: '' };
        // 事件订阅存储  便于销毁
        this.subscription = [];
        // 原数据
        this.filter = '';
        this.maxSize = 7;
        this.directionLinks = true;
        this.autoHide = false;
        this.responsive = true;
        this.paginationOptions = {
            id: 'Farris-DataTable-Pagination',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.labels = {
            previousLabel: ' ',
            nextLabel: ' ',
            screenReaderPaginationLabel: 'Pagination',
            screenReaderPageLabel: 'page',
            screenReaderCurrentLabel: `You're on page`
        };
        this._currentRowIndex = -1;
        this._currentRow = undefined;
        this.isCheckAll = (/**
         * @return {?}
         */
        () => {
            if (!this.selections || !this.selections.length) {
                return false;
            }
            if (!this.data || !this.data.length) {
                return false;
            }
            /** @type {?} */
            let total = 0;
            this.selections.forEach((/**
             * @param {?} n
             * @return {?}
             */
            n => {
                if (this.data.find((/**
                 * @param {?} d
                 * @return {?}
                 */
                d => d[this.idField] === n[this.idField]))) {
                    total += 1;
                }
            }));
            return this.data.length === total;
        });
        this.mouseEnterOnPager = null;
        this.mouseLeaveOnPager = null;
        this.mouseWheelOnPager = null;
        this.trackByRows = (/**
         * @param {?} index
         * @param {?} row
         * @return {?}
         */
        (index, row) => {
            return row ? row[this.idField] : index;
        });
        this.dataService.selectedRow.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.singleSelect) {
                this._currentRowIndex = e.rowIndex;
                this._currentRow = e.rowData;
            }
            else {
                if (this.selections) {
                    this.dtHeader.isCheckAll = this.isCheckAll();
                }
            }
        }));
        this.dataService.unSelectedRow.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.singleSelect) {
                this._currentRow = undefined;
                this._currentRowIndex = -1;
            }
            else {
                this.dtHeader.isCheckAll = false;
            }
        }));
    }
    /**
     * @return {?}
     */
    get pageList() {
        return this._pageList;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set pageList(val) {
        this._pageList = val;
        if (this.pager) {
            this.pager.setPageList(val);
        }
    }
    /**
     * @return {?}
     */
    get data() {
        return this._data;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set data(data) {
        this._data = data || [];
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set selections(v) {
        this.dtBody.selections = v ? v : {};
    }
    /**
     * @return {?}
     */
    get selections() {
        return this.dtBody.selections;
    }
    /**
     * @return {?}
     */
    get currentRowIndex() {
        return this._currentRowIndex;
    }
    /**
     * @return {?}
     */
    get currentRow() {
        return this._currentRow;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.setBodyHeight(true);
            this.ps = this.perfectScrollbar.directiveRef.ps();
        }));
        if (!this.id) {
            this.id = `datatable_${this.idService.generate()}`;
        }
        this.paginationOptions.id = this.paginationOptions.id + this.id;
        this.paginationOptions.remote = this.pagerOnServer;
        this.copyData = deepCopy(this.data);
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            () => of(true));
        }
    }
    /**
     * @private
     * @param {?=} refresh
     * @return {?}
     */
    setBodyHeight(refresh = true) {
        /** @type {?} */
        let _tableheight = this.height;
        if (this.showFilterBar) {
            _tableheight = this.height - 46;
        }
        this.tableHeight = _tableheight;
        /** @type {?} */
        let _scorllableBodyHeight = 0;
        if (this.showHeader && this.tableHeader) {
            // _scorllableBodyHeight = this.tableHeight - this.tableHeader.nativeElement.clientHeight;
            _scorllableBodyHeight = this.tableHeight - this.tableHeader.nativeElement.querySelector('table').clientHeight;
        }
        if (this.pagination) {
            _scorllableBodyHeight = _scorllableBodyHeight - 50;
        }
        this.scorllableBodyHeight = _scorllableBodyHeight;
        if (refresh && this.cd && !this.cd['destroyed']) {
            this.cd.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    onClearSearchValue() {
        this.searchData.value = '';
        this.cd.detectChanges();
        this.clearSearchValue.emit();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.height && !changes.height.isFirstChange()) {
            this.setBodyHeight();
        }
        if (changes.total && !changes.total.isFirstChange()) {
            this.paginationOptions.totalItems = changes.total.currentValue;
        }
        if (changes.pageSize) {
            this.paginationOptions.itemsPerPage = changes.pageSize.currentValue;
        }
        if (changes.pagerOnServer && !changes.pagerOnServer.isFirstChange()) {
            this.paginationOptions.remote = changes.pagerOnServer.currentValue;
        }
        if (changes.pageIndex && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions.currentPage = changes.pageIndex.currentValue;
        }
        if (changes.data && !changes.data.isFirstChange()) {
            /** @type {?} */
            const rows = changes.data.currentValue;
            this.updateCheckboxState(rows);
            this.paginationOptions = Object.assign({}, this.paginationOptions);
            this.dataService.loadSuccess.next(changes.data.currentValue);
        }
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        // 支持列组件写入
        if (!this.columns) {
            if (this.columnsRef && this.columnsRef.length) {
                this.columns = this.columnsRef.map((/**
                 * @param {?} col
                 * @return {?}
                 */
                col => {
                    return {
                        width: col.width,
                        title: col.title,
                        field: col.field,
                        align: col.align,
                        fixed: col.fixed,
                        className: col.className,
                        multipleFilter: col.multipleFilter,
                        filter: col.filter,
                        media: col.media,
                        sortable: col.sortable,
                        edit: col.edit
                    };
                }));
            }
        }
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.tablePager && this.pagerViewMode !== 'simple') {
                    this.tablePager.nativeElement.addEventListener('mouseenter', this.mouseEnterOnPager = (/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        /** @type {?} */
                        let overflowX = 'auto';
                        if (e.target.className.indexOf('pg-pagelist') > -1 || e.target.closest('.pg-pagelist')) {
                            overflowX = "unset";
                            this.pgScrollbar.nativeElement.scrollLeft = 0;
                        }
                        this.pgScrollbar.nativeElement.style.overflowX = overflowX;
                    }), true);
                    this.tablePager.nativeElement.addEventListener('mouseleave', this.mouseLeaveOnPager = (/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        this.pgScrollbar.nativeElement.style.overflowX = "hidden";
                    }));
                    this.tablePager.nativeElement.addEventListener('wheel', this.mouseWheelOnPager = (/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        /** @type {?} */
                        const box = this.tablePager.nativeElement;
                        /** @type {?} */
                        const sw = this.pgScrollbar.nativeElement.scrollWidth;
                        /** @type {?} */
                        const ow = box.offsetWidth;
                        if (sw > ow) {
                            /** @type {?} */
                            const right = sw - ow;
                            /** @type {?} */
                            const sl = Math.abs(this.pgScrollbar.nativeElement.scrollLeft);
                            if (sl < right && e.deltaY > 0) {
                                e.preventDefault();
                                this.pgScrollbar.nativeElement.scrollLeft = sl + 50;
                            }
                            if (sl > 0 && e.deltaY < 0) {
                                e.preventDefault();
                                this.pgScrollbar.nativeElement.scrollLeft = sl - 50;
                            }
                        }
                    }));
                }
            }));
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        sub => {
            sub.unsubscribe();
        }));
        this.subscription = [];
        this.pager = null;
        if (this.tablePager && this.tablePager.nativeElement) {
            this.tablePager.nativeElement.removeEventListener('mouseenter', this.mouseEnterOnPager, true);
            this.tablePager.nativeElement.removeEventListener('mouseleave', this.mouseLeaveOnPager);
            this.tablePager.nativeElement.removeEventListener('wheel', this.mouseWheelOnPager);
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 获取表格容器  即表格
        this.datatableContainer = this.el.nativeElement.querySelector('.farris-datatable');
        // this.headerTr = this.tableHeader.nativeElement.querySelectorAll('tr');
        if (this.pagerViewMode == 'simple' && this.tablePager) {
            this.tablePager.nativeElement.style.minHeight = '44px';
            this.tablePager.nativeElement.style.height = '44px';
        }
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    updateCheckboxState(rows) {
        /** @type {?} */
        const updateCheckAllStatus = (/**
         * @param {?} f
         * @return {?}
         */
        (f) => {
            if (this.showHeader && this.dtHeader) {
                this.dtHeader.isCheckAll = f;
            }
        });
        if (rows && rows.length) {
            if (this.selections) {
                /** @type {?} */
                const keys = Object.keys(this.dtBody._selections);
                if (keys.length) {
                    /** @type {?} */
                    let count = 0;
                    /** @type {?} */
                    const ids = rows.map((/**
                     * @param {?} row
                     * @return {?}
                     */
                    (row) => {
                        return row[this.idField].toString();
                    }));
                    keys.forEach((/**
                     * @param {?} id
                     * @return {?}
                     */
                    id => {
                        if (ids.indexOf(id) > -1) {
                            count++;
                        }
                    }));
                    updateCheckAllStatus(ids.length === count);
                }
                else {
                    updateCheckAllStatus(false);
                }
            }
            else {
                updateCheckAllStatus(false);
            }
        }
        else {
            updateCheckAllStatus(false);
        }
    }
    /**
     * 获取表格容器的位置  距离左边视口和上边视口的距离  如果页面有滚动条  需要加上滚动条滚动的数值
     * @return {?}
     */
    getContainerOffset() {
        /** @type {?} */
        const rect = this.datatableContainer.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop,
            right: rect.right,
            bottom: rect.bottom,
        };
    }
    /**
     *  鼠标按下  开始记录拖拽线的位置  拖拽线到达当前鼠标位置
     * @param {?} e 鼠标对象
     * @return {?}
     */
    beginDrag(e) {
        this.dragLineX = e.pageX;
        event.preventDefault();
    }
    /**
     * 鼠标移动 移动拖拽线位置变动
     * @param {?} e 鼠标对象
     * @return {?}
     */
    moveDrag(e) {
        // 获取表格的左边距离
        /** @type {?} */
        const containerLeft = this.getContainerOffset().left;
        // 设置拖拽线的高度  即获取表头+表内容+表尾的高度  此表格结构包含了分页  因此要去掉分页的高度
        if (this.tablePager) {
            this.dragLine.nativeElement.style.height = this.datatableContainer.offsetHeight -
                this.tablePager.nativeElement.offsetHeight + 'px';
        }
        else {
            // const headerHeight = this.el.nativeElement.querySelector('.farris-table-header');
            // const bodyHeight = this.el.nativeElement.querySelector('.ps-content');
            this.dragLine.nativeElement.style.height = this.datatableContainer.offsetHeight + 'px';
        }
        // 设置拖拽线的高度 拖拽线相对于表格relative定位是absolute，因此是0
        this.dragLine.nativeElement.style.top = 0 + 'px';
        // 鼠标移动时，拖拽线相对于表格的位置
        this.dragLine.nativeElement.style.left = (e.pageX - containerLeft) + 'px';
        // 鼠标移动  设置拖拽线总是可见
        this.dragLine.nativeElement.style.display = 'block';
    }
    // 重新计算表格宽度
    /**
     * 鼠标抬起 重新计算单元格宽度
     * 鼠标对象
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    stopDrag(e, column) {
        if (this.autoFitColumns) {
            this.resizeColumn2(e, column);
            if (this.ps) {
                this.ps.update();
            }
            return;
        }
        this.resizeColumn(e, column);
    }
    /**
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    resizeColumn(e, column) {
        if (this.isCheckBox(column, 'dt-checkbox-cell')) {
            this.dragLine.nativeElement.style.display = 'none';
            return;
        }
        // 偏移量
        /** @type {?} */
        const delta = e.pageX - this.dragLineX;
        // 拖拽前列宽
        /** @type {?} */
        const columnWidth = column.offsetWidth;
        // 拖拽后列宽
        /** @type {?} */
        let newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        const minWidth = column.style.minWidth || 30;
        // 新宽度大于或等于最小宽度时
        newColumnWidth = newColumnWidth > minWidth ? newColumnWidth : minWidth;
        // 重新设置宽度
        /** @type {?} */
        let colIndex = -1;
        /** @type {?} */
        const othersCol = [];
        /** @type {?} */
        const cols = this.tableHeader.nativeElement.querySelectorAll('th');
        // 父节点宽度
        /** @type {?} */
        const parentWidth = column.parentElement.offsetWidth;
        // 判断是不是有checkbox
        /** @type {?} */
        const firstElement = column.parentElement.firstElementChild;
        /** @type {?} */
        const checkBoxWidth = this.isCheckBox(firstElement, 'dt-checkbox-cell') ? firstElement.offsetWidth : 0;
        // 其他列宽度
        /** @type {?} */
        let othersWidth = parentWidth - columnWidth - checkBoxWidth;
        /** @type {?} */
        let newOthersWidth = parentWidth - newColumnWidth - checkBoxWidth;
        for (let i = 0; i < cols.length; i++) {
            if (cols[i] === column) {
                colIndex = i;
            }
            else {
                if (this.isCheckBox(cols[i], 'dt-checkbox-cell')) {
                    continue;
                }
                /** @type {?} */
                const rate = cols[i].offsetWidth / othersWidth;
                if (rate > 1) {
                    // console.log(cols[i]);
                }
                /** @type {?} */
                let colWidth = newOthersWidth * rate;
                if (newOthersWidth * rate > 15) {
                    colWidth = newOthersWidth * rate;
                }
                else {
                    colWidth = 15;
                    othersWidth = othersWidth - colWidth;
                    newOthersWidth = newOthersWidth - colWidth;
                    newColumnWidth = newColumnWidth - 15 + newOthersWidth * rate;
                }
                othersCol.push({ colIndex: i, colWidth });
            }
        }
        this.resizeColGroup(this.dtHeader.el.nativeElement, colIndex, newColumnWidth, othersCol);
        this.resizeColGroup(this.dtBody.el.nativeElement, colIndex, newColumnWidth, othersCol);
        // 计算宽度完毕  设置拖拽线隐藏
        this.dragLine.nativeElement.style.display = 'none';
    }
    /**
     * @param {?} e
     * @param {?} column
     * @return {?}
     */
    resizeColumn2(e, column) {
        if (this.isCheckBox(column, 'dt-checkbox-cell')) {
            this.dragLine.nativeElement.style.display = 'none';
            return;
        }
        // 偏移量
        /** @type {?} */
        const delta = e.pageX - this.dragLineX;
        // 拖拽前列宽
        /** @type {?} */
        const columnWidth = column.offsetWidth;
        // 拖拽后列宽
        /** @type {?} */
        let newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        const minWidth = column.style.minWidth || 30;
        // 新宽度大于或等于最小宽度时
        newColumnWidth = newColumnWidth > minWidth ? newColumnWidth : minWidth;
        // 重新设置宽度
        /** @type {?} */
        let colIndex = -1;
        /** @type {?} */
        const othersCol = [];
        /** @type {?} */
        const cols = this.tableHeader.nativeElement.querySelectorAll('th');
        // 父节点宽度
        /** @type {?} */
        const parentWidth = column.parentElement.offsetWidth;
        // 判断是不是有checkbox
        /** @type {?} */
        const firstElement = column.parentElement.firstElementChild;
        /** @type {?} */
        const checkBoxWidth = this.isCheckBox(firstElement, 'dt-checkbox-cell') ? firstElement.offsetWidth : 0;
        // 其他列宽度
        /** @type {?} */
        let othersWidth = parentWidth - columnWidth - checkBoxWidth;
        /** @type {?} */
        let newOthersWidth = parentWidth - newColumnWidth - checkBoxWidth;
        for (let i = 0; i < cols.length; i++) {
            if (cols[i] === column) {
                colIndex = i;
            }
            else {
                if (this.isCheckBox(cols[i], 'dt-checkbox-cell')) {
                    continue;
                }
                /** @type {?} */
                const rate = cols[i].offsetWidth / othersWidth;
                if (rate > 1) {
                    // console.log(cols[i]);
                }
                /** @type {?} */
                let colWidth = newOthersWidth * rate;
                if (newOthersWidth * rate > 15) {
                    colWidth = newOthersWidth * rate;
                }
                else {
                    colWidth = 15;
                    othersWidth = othersWidth - colWidth;
                    newOthersWidth = newOthersWidth - colWidth;
                    newColumnWidth = newColumnWidth - 15 + newOthersWidth * rate;
                }
                othersCol.push({ colIndex: i, colWidth });
            }
        }
        this.resizeColGroup(this.dtHeader.el.nativeElement, colIndex, newColumnWidth, []);
        this.resizeColGroup(this.dtBody.el.nativeElement, colIndex, newColumnWidth, []);
        /** @type {?} */
        const field = column.getAttribute('field');
        if (field) {
            /** @type {?} */
            const col = this.columns.find((/**
             * @param {?} n
             * @return {?}
             */
            n => n.field === field));
            if (col) {
                col.width = newColumnWidth;
            }
        }
        // 计算宽度完毕  设置拖拽线隐藏
        this.dragLine.nativeElement.style.display = 'none';
    }
    /**
     * @param {?} elements
     * @param {?} cName
     * @return {?}
     */
    isCheckBox(elements, cName) {
        return !!elements.className.match(new RegExp('(\\s|^)' + cName + '(\\s|$)'));
    }
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?} othersColumn
     * @return {?}
     */
    resizeColGroup(table, resizeColumnIndex, newColumnWidth, othersColumn) {
        if (table) {
            // 此处要视不同的表格结构来确定 本组件中  header和body结构相同
            /** @type {?} */
            const colGroup = table.childNodes[0].children[0].nodeName === 'COLGROUP' ?
                table.childNodes[0].children[0] : null;
            if (colGroup) {
                /** @type {?} */
                const col = colGroup.children[resizeColumnIndex];
                col.style.width = newColumnWidth + 'px';
                for (let i = 0; i < othersColumn.length; i++) {
                    /** @type {?} */
                    const otherCol = colGroup.children[othersColumn[i].colIndex];
                    if (otherCol && othersColumn[i].colWidth) {
                        otherCol.style.width = othersColumn[i].colWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onScrollX(e) {
        // 横向滚动 非固定表头滚动
        /** @type {?} */
        const x = e.srcElement.scrollLeft;
        this.tableHeader.nativeElement.scrollTo(x, 0);
    }
    /**
     * 滚动条纵向滚动
     * @param {?} e
     * @return {?}
     */
    onScrollY(e) {
        if (!this.hasFixed) {
            return;
        }
        /** @type {?} */
        const y = e.srcElement.scrollTop;
        this.dtLeftFixed.nativeElement.style.top = -y + 'px';
        this.dtRightFixed.nativeElement.style.top = -y + 'px';
    }
    /**
     * @param {?} page
     * @return {?}
     */
    onPageChange(page) {
        if (this.pageIndex !== page.pageIndex) {
            this.pageIndex = page.pageIndex;
            this.paginationOptions.currentPage = page.pageIndex;
            this.pageChanged.emit({ pageInfo: page, search: this.searchData, sortName: this.sortName, sortOrder: this.sortOrder });
        }
    }
    /**
     * @param {?} pageSize
     * @return {?}
     */
    onPageSizeChange(pageSize) {
        if (this.pageSize !== pageSize && this.total) {
            this.paginationOptions.itemsPerPage = pageSize;
            this.pageSize = pageSize;
            /** @type {?} */
            const total = this.total;
            /** @type {?} */
            let pageLength = Math.floor(total / pageSize);
            if (total % pageSize > 0) {
                pageLength += 1;
            }
            if (pageLength && this.pageIndex > pageLength) {
                this.pageIndex = pageLength;
                this.paginationOptions.currentPage = this.pageIndex;
            }
            this.pageSizeChanged.emit({
                pageInfo: { pageIndex: this.pageIndex, pageSize },
                search: this.searchData, sortName: this.sortName, sortOrder: this.sortOrder
            });
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onSearch($event) {
        if ($event.originalEvent) {
            $event.originalEvent.stopPropagation();
        }
        this.search.emit(this.searchData);
    }
    /**
     * @param {?} state
     * @return {?}
     */
    onCheckAll(state) {
        this.dataService.selectedAll.next(state);
        this.checkAll.emit(state);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onSelectedRow(e) {
        this.selectedRow.emit({ data: e.rowData, index: e.rowIndex });
        // 兼容
        this.selectRows.emit({ data: e.rowData, index: e.rowIndex });
    }
    // tslint:disable-next-line:no-shadowed-variable
    /**
     * @param {?} size
     * @return {?}
     */
    resize(size) {
        if (!size) {
            return;
        }
        if (this.width !== size.width || this.height !== size.height) {
            this.width = size.width;
            this.height = size.height;
        }
        this.setBodyHeight();
    }
    /**
     * @param {?} e
     * @return {?}
     */
    loadData(e) {
        this.data = e.data;
        if (this.pagination) {
            const { total = 0, pageSize = 20, pageIndex = 1 } = Object.assign({}, e);
            this.paginationOptions.totalItems = total;
            this.paginationOptions.itemsPerPage = pageSize;
            this.paginationOptions.currentPage = pageIndex;
            this.paginationOptions.pageList = this.pageList;
            this.paginationOptions = Object.assign({}, this.paginationOptions);
            this.total = total;
            this.pageSize = pageSize;
            this.pageIndex = pageIndex;
        }
        this.cd.detectChanges();
        // TFS 580296
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.ps && this.ps.update();
        }), 10);
        this.updateCheckboxState(this.data);
    }
    /*
         */
    /**
     * @param {?} e
     * @return {?}
     */
    onCellClick(e) {
        this.cellClick.emit(e);
    }
    /* 添加行 */
    /**
     * @param {?} dataItem
     * @return {?}
     */
    addRows(dataItem) {
        this.data = this.data.concat(dataItem);
    }
    /* 删除行 */
    /**
     * @return {?}
     */
    removeRows() {
        /** @type {?} */
        const SELECTIONS = this.selections;
        if (this.singleSelect) {
            for (let i = 0; i < this.data.length; i++) {
                if (this.data[i] === SELECTIONS) {
                    this.data.splice(i, 1);
                }
            }
        }
        else {
            for (let i = 0; i < SELECTIONS.length; i++) {
                for (let j = 0; j < this.data.length; j++) {
                    if (SELECTIONS[i][this.idField] === this.data[j][this.idField]) {
                        this.data.splice(j, 1);
                    }
                }
            }
        }
    }
    /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    checkRow(rid, emit = false) {
        /** @type {?} */
        let rowIndex = -1;
        /** @type {?} */
        const rowData = this.data.find((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        (n, i) => {
            if (n[this.idField] == rid) {
                rowIndex = i;
                return true;
            }
        }));
        if (!rowData) {
            return;
        }
        if (!this.selections) {
            this.selections = { [rid]: rowData };
        }
        else {
            this.selections = Object.assign({ [rid]: rowData }, this.selections.reduce((/**
             * @param {?} r
             * @param {?} n
             * @return {?}
             */
            (r, n) => {
                r[n[this.idField]] = n;
                return r;
            }), {}));
        }
        this.dataService.selectedRow.next({
            rowIndex,
            rowData
        });
        if (emit) {
            /** @type {?} */
            const p = { data: rowData, index: rowIndex };
            this.selectedRow.emit(p);
            // 兼容
            this.selectRows.emit(p);
        }
    }
    /**
     * @param {?} rid
     * @param {?=} emit
     * @return {?}
     */
    unCheckRow(rid, emit = false) {
        /** @type {?} */
        let rowIndex = -1;
        /** @type {?} */
        const rowData = this.data.find((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        (n, i) => {
            if (n[this.idField] == rid) {
                rowIndex = i;
                return true;
            }
        }));
        if (this.selections) {
            this.selections = this.selections.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n[this.idField] != rid)).reduce((/**
             * @param {?} r
             * @param {?} n
             * @return {?}
             */
            (r, n) => {
                r[n[this.idField]] = n;
                return r;
            }), {});
            this.dataService.unSelectedRow.next({
                rowIndex,
                rowData
            });
            if (emit) {
                this.unSelectRow.emit({ data: rowData, index: rowIndex });
            }
        }
    }
    /**
     * @param {?} ids
     * @return {?}
     */
    unCheckRows(ids) {
        if (this.selections) {
            this.selections = this.selections.filter((/**
             * @param {?} n
             * @return {?}
             */
            n => !ids.includes(n[this.idField]))).reduce((/**
             * @param {?} r
             * @param {?} n
             * @return {?}
             */
            (r, n) => {
                r[n[this.idField]] = n;
                return r;
            }), {});
            this.cd.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    clearSelections() {
        this.selections = [];
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onKeydownEvent($event) {
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        if (!['ArrowDown', 'ArrowUp'].includes($event.code)) {
            return;
        }
        /** @type {?} */
        let newIdx;
        if ($event.code === 'ArrowDown') {
            newIdx = this._currentRowIndex + 1;
            if (newIdx >= this.data.length) {
                newIdx = 0;
            }
        }
        else if ($event.code === 'ArrowUp') {
            if (this._currentRowIndex !== -1) {
                newIdx = this._currentRowIndex - 1;
            }
        }
        if (newIdx >= 0) {
            this.dtBody.selectedRow($event, newIdx, this.data[newIdx]);
        }
        setTimeout((/**
         * @return {?}
         */
        () => {
            // scroll intoView
            /** @type {?} */
            const trDoms = this.dtBody.el.nativeElement.querySelectorAll('.ui-table-tbody tr');
            if (trDoms && trDoms[this._currentRowIndex]) {
                trDoms[this._currentRowIndex].scrollIntoView({ block: 'nearest' });
            }
        }));
    }
}
DataTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'farrisui-datatable,farris-datatable',
                template: "<div class=\"filter-row\" [style.width]=\"width + 'px'\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\" style=\"max-width: 180px;min-width: 140px;\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\" single-select [panelRef]=\"selectpanel\" [items]=\"searchFields\">\r\n                <!-- <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option> -->\r\n            </select>\r\n\r\n            <div #selectpanel class=\"single-select-panel f-area-hide\">\r\n                <ul class=\"dropdown-menu show\">\r\n                    <li class=\"dropdown-item\" [attr.value]=\"'*'\" *ngIf=\"searchAnyField\" [class.active]=\"searchData.field === '*'\">{{allColumnsTitle}}</li>\r\n                    <li class=\"dropdown-item\" *ngFor=\"let col of searchFields\" [attr.value]=\"col.value\" [class.active]=\"searchData.field === col.value\">{{ col.label }}</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"search-text flex-fill\">\r\n            <input-group [groupText]=\"searchButtonText\" name=\"searchValue\" (clear)=\"onClearSearchValue()\" #inputgroup\r\n                [(ngModel)]=\"searchData.value\" (clickHandle)=\"onSearch($event)\" (enterHandle)=\"onSearch($event)\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\" (valueChange)=\"searchValueChange.emit(searchData)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div [style.height.px]=\"tableHeight\" [style.width.px]=\"width\" class=\"farris-datatable-container\">\r\n    <div class=\"farris-datatable\">\r\n        <div #tableHeader class=\"farris-table-header\" [style.display]=\"showHeader? '': 'none'\">\r\n            <datatable-header #dtHeader [size]=\"size\" [columns]=\"columns\" [singleSelect]=\"singleSelect\" [data]=\"data\"\r\n                (loadData)=\"loadData\" (checkedAll)=\"onCheckAll($event)\">\r\n                <ng-content select=\"data-columns\"></ng-content>\r\n            </datatable-header>\r\n        </div>\r\n        <div #scorllableBody class=\"farris-table-scorllable-body\" [style.height.px]=\"scorllableBodyHeight\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{}\" (psScrollX)=\"onScrollX($event)\" (psScrollY)=\"onScrollY($event)\">\r\n                <ng-container [style.display]=\"data && data.length ? 'block': 'none'\">\r\n                    <datatable-body #dtBody [rows]=\"pagination ? (data | paginate: paginationOptions) : data\" [size]=\"size\" [columns]=\"columns\" [striped]=\"striped\"\r\n                        [bordered]=\"bordered\" [rowClassName]=\"rowClassName\" [cellClassName]=\"cellClassName\" (cellClick)=\"onCellClick($event)\">\r\n                    </datatable-body>\r\n                </ng-container>\r\n\r\n            </perfect-scrollbar>\r\n        </div>\r\n        <div class=\"farris-table-header\" *ngIf=\"footer\">\r\n            <ng-template [ngTemplateOutlet]=\"footer\">\r\n            </ng-template>\r\n        </div>\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\" style=\"box-shadow: inset 0px 1px 0px 0px #e9ecf3;\" >\r\n            <div #pgScrollbar style=\"width: 100%;position: absolute;overflow-x: unset;\">\r\n                <pagination-controls #pager [id]=\"paginationOptions.id\" [maxSize]=\"maxSize\" [directionLinks]=\"directionLinks\"\r\n                    [autoHide]=\"autoHide\" [responsive]=\"responsive\" [previousLabel]=\"labels.previousLabel\" [nextLabel]=\"labels.nextLabel\"\r\n                    [screenReaderPaginationLabel]=\"labels.screenReaderPaginationLabel\" [screenReaderPageLabel]=\"labels.screenReaderPageLabel\"\r\n                    [screenReaderCurrentLabel]=\"labels.screenReaderCurrentLabel\" (pageChange)=\"onPageChange($event)\"\r\n                    (pageSizeChange)=\"onPageSizeChange($event)\" [viewMode]=\"pagerViewMode\" [showGoToFirst]=\"true\" [showGoToLast]=\"true\"\r\n                    [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\" style=\"position: relative;\"\r\n                >\r\n\r\n                    <div class=\"simple-pager-extend-area\" *ngIf=\"pagerViewMode === 'simple' && pagerExtendTemplate\">\r\n                        <ng-template [ngTemplateOutlet]=\"pagerExtendTemplate\" [ngTemplateOutletContext]=\"{$implicit: this}\"></ng-template>\r\n                    </div>\r\n\r\n                </pagination-controls>\r\n            </div>\r\n        </div>\r\n        <div #dragLine *ngIf=\"resizableColumns\" class=\"column-resizer-helper\"></div>\r\n    </div>\r\n</div>",
                encapsulation: ViewEncapsulation.None,
                providers: [
                    DataTableService
                ],
                styles: [".farris-table-scorllable-body .ps__rail-x{z-index:2}.filter-row{display:-webkit-box;display:flex;margin:10px 0}.filter-row .search-text{-webkit-box-flex:1;flex:1;margin-left:10px}.filter-row .search-text .btn-outline-secondary{border-color:#ced4da}.filter-row .search-text .btn-outline-secondary:active,.filter-row .search-text .btn-outline-secondary:focus{box-shadow:none}.filter-row .form-control:focus{border-color:#ced4da;box-shadow:none}.filter-row .custom-select:focus{box-shadow:none}.farris-datatable{position:relative}.resizable-column{background-clip:padding-box;position:relative}.column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5em;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.column-resizer-helper{width:1px;position:absolute;z-index:10;display:none;background-color:#6c757d;opacity:.6}.farris-table-fixed-body,.farris-table-fixed-header{position:absolute;top:0;left:0;overflow:hidden;box-shadow:2px 0 6px -2px rgba(0,0,0,.2)}.farris-table-fixed-right-body,.farris-table-fixed-right-header{position:absolute;top:0;right:0;overflow:hidden;box-shadow:-2px 0 6px -2px rgba(0,0,0,.2)}.td-hidden{visibility:hidden}@media (min-width:576px){.td-sm-hidden{visibility:hidden!important}.td-sm-visible{visibility:visible!important}}@media (min-width:768px){.td-md-hidden{visibility:hidden!important}.td-md-visible{visibility:visible!important}}@media (min-width:992px){.td-lg-hidden{visibility:hidden!important}.td-lg-visible{visibility:visible!important}}@media (min-width:1200px){.td-xl-hidden{visibility:hidden!important}.td-xl-visible{visibility:visible!important}}"]
            }] }
];
/** @nocollapse */
DataTableComponent.ctorParameters = () => [
    { type: DataTableService },
    { type: IdService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: NgZone }
];
DataTableComponent.propDecorators = {
    keydownEnterEdit: [{ type: Input }],
    id: [{ type: Input }],
    size: [{ type: Input }],
    allColumnsTitle: [{ type: Input }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    searchAnyField: [{ type: Input }],
    fill: [{ type: Input }],
    pagination: [{ type: Input }],
    pagerOnServer: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageIndex: [{ type: Input }],
    showPageInfo: [{ type: Input }],
    showPageNumber: [{ type: Input }],
    showPageList: [{ type: Input }],
    pagerViewMode: [{ type: Input }],
    pagerExtendTemplate: [{ type: Input }],
    showHeader: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    columns: [{ type: Input }],
    searchFields: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    virtualized: [{ type: Input }],
    autoFitColumns: [{ type: Input }],
    data: [{ type: Input }],
    remote: [{ type: Input }],
    remoteSort: [{ type: Input }],
    sortName: [{ type: Input }],
    sortOrder: [{ type: Input }],
    multiSort: [{ type: Input }],
    beforeSortColumn: [{ type: Input }],
    singleSelect: [{ type: Input }],
    idField: [{ type: Input }],
    hover: [{ type: Input }],
    striped: [{ type: Input }],
    bordered: [{ type: Input }],
    rowClassName: [{ type: Input }],
    cellClassName: [{ type: Input }],
    rowStyler: [{ type: Input }],
    cellStyler: [{ type: Input }],
    selections: [{ type: Input }],
    scorllableBody: [{ type: ViewChild, args: ['scorllableBody',] }],
    tableHeader: [{ type: ViewChild, args: ['tableHeader',] }],
    tablePager: [{ type: ViewChild, args: ['tablePager',] }],
    dtHeader: [{ type: ViewChild, args: ['dtHeader',] }],
    dtBody: [{ type: ViewChild, args: ['dtBody',] }],
    dtLeftBody: [{ type: ViewChild, args: ['dtLeftBody',] }],
    dtRightBody: [{ type: ViewChild, args: ['dtRightBody',] }],
    dtLeftFixed: [{ type: ViewChild, args: ['dtLeftFixed',] }],
    dtRightFixed: [{ type: ViewChild, args: ['dtRightFixed',] }],
    pager: [{ type: ViewChild, args: ['pager',] }],
    inputGroup: [{ type: ViewChild, args: ['inputgroup',] }],
    pgScrollbar: [{ type: ViewChild, args: ['pgScrollbar',] }],
    pageChanged: [{ type: Output }],
    pageSizeChanged: [{ type: Output }],
    search: [{ type: Output }],
    columnSorted: [{ type: Output }],
    rowDblClick: [{ type: Output }],
    selectedRow: [{ type: Output }],
    selectRows: [{ type: Output }],
    unSelectRow: [{ type: Output }],
    cellClick: [{ type: Output }],
    clearSearchValue: [{ type: Output }],
    checkAll: [{ type: Output }],
    searchValueChange: [{ type: Output }],
    sortChange: [{ type: Output }],
    columnsRef: [{ type: ContentChildren, args: [ColumnDirective,] }],
    footer: [{ type: ContentChild, args: ['footer',] }],
    dragLine: [{ type: ViewChild, args: ['dragLine',] }],
    resizableColumns: [{ type: Input }],
    keepSelect: [{ type: Input }],
    perfectScrollbar: [{ type: ViewChild, args: ['perfectScrollbar',] }]
};
if (false) {
    /** @type {?} */
    DataTableComponent.prototype.searchButtonText;
    /** @type {?} */
    DataTableComponent.prototype.keydownEnterEdit;
    /** @type {?} */
    DataTableComponent.prototype.id;
    /** @type {?} */
    DataTableComponent.prototype.size;
    /** @type {?} */
    DataTableComponent.prototype.allColumnsTitle;
    /** @type {?} */
    DataTableComponent.prototype.width;
    /** @type {?} */
    DataTableComponent.prototype.height;
    /**
     * 是否支持任意字段搜索
     * @type {?}
     */
    DataTableComponent.prototype.searchAnyField;
    /** @type {?} */
    DataTableComponent.prototype.tableHeight;
    /** @type {?} */
    DataTableComponent.prototype.fill;
    /** @type {?} */
    DataTableComponent.prototype.pagination;
    /** @type {?} */
    DataTableComponent.prototype.pagerOnServer;
    /** @type {?} */
    DataTableComponent.prototype.pageSize;
    /** @type {?} */
    DataTableComponent.prototype.pageIndex;
    /** @type {?} */
    DataTableComponent.prototype.showPageInfo;
    /** @type {?} */
    DataTableComponent.prototype.showPageNumber;
    /** @type {?} */
    DataTableComponent.prototype.showPageList;
    /** @type {?} */
    DataTableComponent.prototype.pagerViewMode;
    /**
     * 分页条为简单模式时，分页条左侧区域模板
     * @type {?}
     */
    DataTableComponent.prototype.pagerExtendTemplate;
    /**
     * 显示表头
     * @type {?}
     */
    DataTableComponent.prototype.showHeader;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._pageList;
    /** @type {?} */
    DataTableComponent.prototype.total;
    /** @type {?} */
    DataTableComponent.prototype.columns;
    /** @type {?} */
    DataTableComponent.prototype.searchFields;
    /** @type {?} */
    DataTableComponent.prototype.showFilterBar;
    /**
     * 启用虚拟渲染
     * @type {?}
     */
    DataTableComponent.prototype.virtualized;
    /** @type {?} */
    DataTableComponent.prototype.autoFitColumns;
    /** @type {?} */
    DataTableComponent.prototype._data;
    /** @type {?} */
    DataTableComponent.prototype.copyData;
    /** @type {?} */
    DataTableComponent.prototype.remote;
    /**
     * 启用远端排序
     * @type {?}
     */
    DataTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    DataTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    DataTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    DataTableComponent.prototype.multiSort;
    /** @type {?} */
    DataTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    DataTableComponent.prototype.singleSelect;
    /** @type {?} */
    DataTableComponent.prototype.idField;
    /** @type {?} */
    DataTableComponent.prototype.hover;
    /** @type {?} */
    DataTableComponent.prototype.striped;
    /** @type {?} */
    DataTableComponent.prototype.bordered;
    /** @type {?} */
    DataTableComponent.prototype.rowClassName;
    /** @type {?} */
    DataTableComponent.prototype.cellClassName;
    /** @type {?} */
    DataTableComponent.prototype.rowStyler;
    /** @type {?} */
    DataTableComponent.prototype.cellStyler;
    /** @type {?} */
    DataTableComponent.prototype.scorllableBody;
    /** @type {?} */
    DataTableComponent.prototype.tableHeader;
    /** @type {?} */
    DataTableComponent.prototype.tablePager;
    /** @type {?} */
    DataTableComponent.prototype.dtHeader;
    /** @type {?} */
    DataTableComponent.prototype.dtBody;
    /** @type {?} */
    DataTableComponent.prototype.dtLeftBody;
    /** @type {?} */
    DataTableComponent.prototype.dtRightBody;
    /** @type {?} */
    DataTableComponent.prototype.dtLeftFixed;
    /** @type {?} */
    DataTableComponent.prototype.dtRightFixed;
    /** @type {?} */
    DataTableComponent.prototype.pager;
    /** @type {?} */
    DataTableComponent.prototype.inputGroup;
    /** @type {?} */
    DataTableComponent.prototype.pgScrollbar;
    /** @type {?} */
    DataTableComponent.prototype.pageChanged;
    /** @type {?} */
    DataTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    DataTableComponent.prototype.search;
    /** @type {?} */
    DataTableComponent.prototype.columnSorted;
    /** @type {?} */
    DataTableComponent.prototype.rowDblClick;
    /** @type {?} */
    DataTableComponent.prototype.selectedRow;
    /** @type {?} */
    DataTableComponent.prototype.selectRows;
    /** @type {?} */
    DataTableComponent.prototype.unSelectRow;
    /** @type {?} */
    DataTableComponent.prototype.cellClick;
    /** @type {?} */
    DataTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    DataTableComponent.prototype.checkAll;
    /** @type {?} */
    DataTableComponent.prototype.searchValueChange;
    /** @type {?} */
    DataTableComponent.prototype.sortChange;
    /** @type {?} */
    DataTableComponent.prototype.columnsRef;
    /** @type {?} */
    DataTableComponent.prototype.footer;
    /** @type {?} */
    DataTableComponent.prototype.dragLine;
    /** @type {?} */
    DataTableComponent.prototype.resizableColumns;
    /**
     * 针对同一条记录，单选时，多次单击后不取消选中。
     * @type {?}
     */
    DataTableComponent.prototype.keepSelect;
    /** @type {?} */
    DataTableComponent.prototype.hasRowTepml;
    /** @type {?} */
    DataTableComponent.prototype.datatableContainer;
    /** @type {?} */
    DataTableComponent.prototype.dragLineX;
    /** @type {?} */
    DataTableComponent.prototype.moveable;
    /** @type {?} */
    DataTableComponent.prototype.currentColumn;
    /** @type {?} */
    DataTableComponent.prototype.hasFixed;
    /** @type {?} */
    DataTableComponent.prototype.fixedLeftWidth;
    /** @type {?} */
    DataTableComponent.prototype.fixedRightWidth;
    /** @type {?} */
    DataTableComponent.prototype.searchData;
    /** @type {?} */
    DataTableComponent.prototype.subscription;
    /** @type {?} */
    DataTableComponent.prototype.headerTr;
    /** @type {?} */
    DataTableComponent.prototype.leftFixedHeaderTr;
    /** @type {?} */
    DataTableComponent.prototype.rightFixedHeaderTr;
    /** @type {?} */
    DataTableComponent.prototype.filter;
    /** @type {?} */
    DataTableComponent.prototype.maxSize;
    /** @type {?} */
    DataTableComponent.prototype.directionLinks;
    /** @type {?} */
    DataTableComponent.prototype.autoHide;
    /** @type {?} */
    DataTableComponent.prototype.responsive;
    /** @type {?} */
    DataTableComponent.prototype.paginationOptions;
    /** @type {?} */
    DataTableComponent.prototype.labels;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._currentRowIndex;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype._currentRow;
    /** @type {?} */
    DataTableComponent.prototype.perfectScrollbar;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.isCheckAll;
    /** @type {?} */
    DataTableComponent.prototype.scorllableBodyHeight;
    /** @type {?} */
    DataTableComponent.prototype.mouseEnterOnPager;
    /** @type {?} */
    DataTableComponent.prototype.mouseLeaveOnPager;
    /** @type {?} */
    DataTableComponent.prototype.mouseWheelOnPager;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.ps;
    /** @type {?} */
    DataTableComponent.prototype.trackByRows;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.dataService;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.el;
    /** @type {?} */
    DataTableComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DataTableComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktZGF0YXRhYmxlLyIsInNvdXJjZXMiOlsibGliL2RhdGF0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7Ozs7Ozs7O0FBVWxELE9BQU8sRUFDSCxTQUFTLEVBQVUsU0FBUyxFQUFFLFVBQVUsRUFBYSxLQUFLLEVBQWlCLFlBQVksRUFBRSxXQUFXLEVBQ3BHLFNBQVMsRUFBbUMsZUFBZSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQXFCLE1BQU0sRUFDbEksTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUE0QixFQUFFLEVBQWEsTUFBTSxNQUFNLENBQUM7QUFFL0QsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDekUsT0FBTyxFQUFzQiwyQkFBMkIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUc5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBWTlFLE1BQU0sT0FBTyxrQkFBa0I7Ozs7Ozs7O0lBbU8zQixZQUFvQixXQUE2QixFQUFVLFNBQW9CLEVBQVUsRUFBYyxFQUM1RixFQUFxQixFQUFVLE1BQWM7UUFEcEMsZ0JBQVcsR0FBWCxXQUFXLENBQWtCO1FBQVUsY0FBUyxHQUFULFNBQVMs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aUQ7O0lBQ2pELHlDQUFnRDs7SUFDaEQseUNBQWdEOztJQUVoRCx3Q0FBK0M7O0lBQy9DLHlDQUFnRDs7SUFDaEQsdUNBQThDOztJQUM5Qyw4Q0FBZ0Q7O0lBQ2hELHNDQUE2Qzs7SUFDN0MsK0NBQXNEOztJQUd0RCx3Q0FBMEM7O0lBRTFDLHdDQUF5RTs7SUFFekUsb0NBQWlEOztJQUdqRCxzQ0FBNEM7O0lBRTVDLDhDQUFpQzs7Ozs7SUFHakMsd0NBQTJCOztJQUczQix5Q0FBb0I7O0lBRXBCLGdEQUFtQzs7SUFFbkMsdUNBQWtCOztJQUVsQixzQ0FBaUI7O0lBRWpCLDJDQUFtQjs7SUFFbkIsc0NBQWtCOztJQUNsQiw0Q0FBdUI7O0lBRXZCLDZDQUF3Qjs7SUFDeEIsd0NBQXVDOztJQUV2QywwQ0FBa0M7O0lBRWxDLHNDQUFjOztJQUNkLCtDQUF1Qjs7SUFDdkIsZ0RBQXdCOztJQUd4QixvQ0FBbUI7O0lBQ25CLHFDQUFtQjs7SUFDbkIsNENBQTZCOztJQUM3QixzQ0FBd0I7O0lBQ3hCLHdDQUF5Qjs7SUFDekIsK0NBT0U7O0lBQ0Ysb0NBTUU7Ozs7O0lBRUYsOENBQThCOzs7OztJQUs5Qix5Q0FBZ0M7O0lBS2hDLDhDQUEyRTs7Ozs7SUFFM0Usd0NBaUJDOztJQUVELGtEQUE2Qjs7SUFDN0IsK0NBQXlCOztJQUN6QiwrQ0FBeUI7O0lBQ3pCLCtDQUF5Qjs7Ozs7SUEwQnpCLGdDQUE2Qjs7SUFtRDdCLHlDQUVDOzs7OztJQTdFVyx5Q0FBcUM7Ozs7O0lBQUUsdUNBQTRCOzs7OztJQUFFLGdDQUFzQjs7SUFDbkcsZ0NBQTRCOzs7OztJQUFFLG9DQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0R3JvdXBDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWlucHV0LWdyb3VwJztcclxuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOS0wNy0xMCAxMTo0NDo0OVxyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0wNSAxMTo0NDoxOFxyXG4gKiBAUVE6IDEwNTU4MTgyMzlcclxuICogQFZlcnNpb246IHYwLjAuMVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPbkNoYW5nZXMsIElucHV0LCBTaW1wbGVDaGFuZ2VzLCBDb250ZW50Q2hpbGQsIFRlbXBsYXRlUmVmLFxyXG4gICAgUXVlcnlMaXN0LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdJbml0LCBDb250ZW50Q2hpbGRyZW4sIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgT25EZXN0cm95LCBJbmplY3QsIE5nWm9uZVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBPYnNlcnZhYmxlLCBvZiwgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCBQZXJmZWN0U2Nyb2xsYmFyIGZyb20gJ3BlcmZlY3Qtc2Nyb2xsYmFyJztcclxuaW1wb3J0IHsgUGVyZmVjdFNjcm9sbGJhckNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktcGVyZmVjdC1zY3JvbGxiYXInO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uSW5zdGFuY2UsIFBhZ2luYXRpb25Db250cm9sc0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktcGFnaW5hdGlvbic7XHJcbmltcG9ydCB7IElkU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgRGF0YUNvbHVtbiB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uL2NvbHVtbic7XHJcblxyXG5pbXBvcnQgeyBkZWVwQ29weSB9IGZyb20gJy4vZGF0YXRhYmxlLWNvbHVtbic7XHJcbmltcG9ydCB7IENvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vZGF0YXRhYmxlLWNvbHVtbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBEYXRhVGFibGVTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhdGFibGUuc2VydmljZSc7XHJcbmltcG9ydCB7IERhdGFUYWJsZUhlYWRlckNvbXBvbmVudCB9IGZyb20gJy4vdGFibGUvZGF0YXRhYmxlLWhlYWRlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBkZWxheSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXN1aS1kYXRhdGFibGUsZmFycmlzLWRhdGF0YWJsZScsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGF0YXRhYmxlLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2RhdGF0YWJsZS5zY3NzJ10sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgRGF0YVRhYmxlU2VydmljZVxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGF0YVRhYmxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgICBzZWFyY2hCdXR0b25UZXh0ID0gJzxpIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1zZWFyY2hcIj48L2k+JztcclxuICAgIEBJbnB1dCgpIGtleWRvd25FbnRlckVkaXQgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGlkOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBzaXplOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBhbGxDb2x1bW5zVGl0bGUgPSAn5omA5pyJ5YiXJztcclxuICAgIC8vIHRhYmxlIOWwuuWvuFxyXG4gICAgQElucHV0KCkgd2lkdGg7XHJcbiAgICAvLyDnu4Tku7bnuqfpq5jluqbljIXmi6zov4fmu6TmnaHpq5jluqZcclxuICAgIEBJbnB1dCgpIGhlaWdodDtcclxuXHJcbiAgICAvKiog5piv5ZCm5pSv5oyB5Lu75oSP5a2X5q615pCc57SiICovXHJcbiAgICBASW5wdXQoKSBzZWFyY2hBbnlGaWVsZCA9IHRydWU7XHJcblxyXG4gICAgdGFibGVIZWlnaHQ6IG51bWJlcjsgLy8g5pWw5o2u6KGo6auY5bqmXHJcbiAgICAvLyDmmK/lkKbloavlhYVcclxuICAgIEBJbnB1dCgpIGZpbGwgPSBmYWxzZTtcclxuICAgIC8vIOm7mOiupOWIhumhtVxyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBwYWdlck9uU2VydmVyID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMTA7XHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgQElucHV0KCkgc2hvd1BhZ2VJbmZvID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTnVtYmVyID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHNob3dQYWdlTGlzdCA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBwYWdlclZpZXdNb2RlOiAnc2ltcGxlJ3wgJ2RlZmF1bHQnID0gJ2RlZmF1bHQnO1xyXG4gICAgLyoqIOWIhumhteadoeS4uueugOWNleaooeW8j+aXtu+8jOWIhumhteadoeW3puS+p+WMuuWfn+aooeadvyAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJFeHRlbmRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIC8qKiDmmL7npLrooajlpLQgKi9cclxuICAgIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG5cclxuICAgIHByaXZhdGUgX3BhZ2VMaXN0ID0gWzEwLCAyMCwgMzAsIDUwLCAxMDBdO1xyXG5cclxuICAgIGdldCBwYWdlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFnZUxpc3Q7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgcGFnZUxpc3QodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fcGFnZUxpc3QgPSB2YWw7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlci5zZXRQYWdlTGlzdCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKSB0b3RhbCA9IDA7XHJcbiAgICAvLyDliJcg5pWw5o2uXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBEYXRhQ29sdW1uW107XHJcbiAgICBASW5wdXQoKSBzZWFyY2hGaWVsZHM6IHsgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W107XHJcbiAgICAvLyDlj6/nrZvpgIlcclxuICAgIEBJbnB1dCgpIHNob3dGaWx0ZXJCYXIgPSBmYWxzZTtcclxuICAgIC8qKiDlkK/nlKjomZrmi5/muLLmn5MgKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgYXV0b0ZpdENvbHVtbnMgPSBmYWxzZTtcclxuXHJcbiAgICAvLyB0YWJsZSAg5pWw5o2uXHJcbiAgICBfZGF0YSA9IFtdO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgfVxyXG4gICAgc2V0IGRhdGEoZGF0YTogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhIHx8IFtdO1xyXG4gICAgfVxyXG4gICAgLy8g5rex5ou36LSdZGF0YSDmlbDmja5cclxuICAgIGNvcHlEYXRhOiBhbnk7XHJcblxyXG4gICAgQElucHV0KCkgcmVtb3RlID0gJ2NsaWVudCc7XHJcblxyXG4gICAgLyoqIOWQr+eUqOi/nOerr+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgcmVtb3RlU29ydCA9IHRydWU7XHJcbiAgICAvKiog5o6S5bqP5a2X5q61ICovXHJcbiAgICBASW5wdXQoKSBzb3J0TmFtZTogc3RyaW5nO1xyXG4gICAgLyoqIOaOkuW6j+aWueW8jyBhc2MgfCBkZXNjICovXHJcbiAgICBASW5wdXQoKSBzb3J0T3JkZXI6IHN0cmluZztcclxuICAgIC8qKiDlhYHorrjlpJrliJfmjpLluo8gKi9cclxuICAgIEBJbnB1dCgpIG11bHRpU29ydCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgYmVmb3JlU29ydENvbHVtbjogKGZpZWxkOiBzdHJpbmcsIG9yZGVyOiBzdHJpbmcpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgLy8g5aSa6YCJICDljZXpgIlcclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBpZEZpZWxkID0gJ2lkJztcclxuICAgIC8vIOaYvuekuum8oOagh+aCrOWBnOmrmOS6rlxyXG4gICAgQElucHV0KCkgaG92ZXIgPSB0cnVlO1xyXG4gICAgLy8g5paR6ams57q/XHJcbiAgICBASW5wdXQoKSBzdHJpcGVkOiBib29sZWFuO1xyXG4gICAgLy8g6L655qGGXHJcbiAgICBASW5wdXQoKSBib3JkZXJlZDogYm9vbGVhbjtcclxuICAgIC8vIOaUr+aMgea3u+WKoOihjCDljZXlhYPmoLwg57G75qC35byPXHJcbiAgICBASW5wdXQoKSByb3dDbGFzc05hbWU6IChyb3c6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nO1xyXG4gICAgQElucHV0KCkgY2VsbENsYXNzTmFtZTogKHZhbHVlOiBhbnksIGNvbDogYW55KSA9PiBzdHJpbmc7XHJcblxyXG4gICAgQElucHV0KCkgcm93U3R5bGVyOiAoYXJnczogYW55KSA9PiBhbnk7XHJcbiAgICBASW5wdXQoKSBjZWxsU3R5bGVyOiAodmFsOiBhbnkgKSA9PiBhbnk7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBzZWxlY3Rpb25zKHYpIHtcclxuICAgICAgICB0aGlzLmR0Qm9keS5zZWxlY3Rpb25zID0gdiA/IHYgOiB7fTtcclxuICAgIH1cclxuICAgIGdldCBzZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmR0Qm9keS5zZWxlY3Rpb25zO1xyXG4gICAgfVxyXG4gICAgLy8g5rua5Yqo5p2h5byV55SoXHJcbiAgICBAVmlld0NoaWxkKCdzY29ybGxhYmxlQm9keScpIHNjb3JsbGFibGVCb2R5OiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgndGFibGVIZWFkZXInKSB0YWJsZUhlYWRlcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYmxlUGFnZXInKSB0YWJsZVBhZ2VyOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZHRIZWFkZXInKSBkdEhlYWRlcjogRGF0YVRhYmxlSGVhZGVyQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZCgnZHRCb2R5JykgZHRCb2R5OiBhbnk7XHJcbiAgICBAVmlld0NoaWxkKCdkdExlZnRCb2R5JykgZHRMZWZ0Qm9keTogYW55O1xyXG4gICAgQFZpZXdDaGlsZCgnZHRSaWdodEJvZHknKSBkdFJpZ2h0Qm9keTogYW55O1xyXG4gICAgQFZpZXdDaGlsZCgnZHRMZWZ0Rml4ZWQnKSBkdExlZnRGaXhlZDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ2R0UmlnaHRGaXhlZCcpIGR0UmlnaHRGaXhlZDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BhZ2VyJykgcGFnZXI6IFBhZ2luYXRpb25Db250cm9sc0NvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0Z3JvdXAnKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3BnU2Nyb2xsYmFyJykgcGdTY3JvbGxiYXI6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgLy8g5YiG6aG15LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgcGFnZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcGFnZVNpemVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXI8eyBmaWVsZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIH0+KCk7XHJcbiAgICBAT3V0cHV0KCkgY29sdW1uU29ydGVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgcm93RGJsQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RlZFJvdyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8g5YW85a65XHJcbiAgICBAT3V0cHV0KCkgc2VsZWN0Um93cyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIHVuU2VsZWN0Um93ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2VsbENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXJTZWFyY2hWYWx1ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBjaGVja0FsbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIHNlYXJjaFZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG5cclxuICAgIEBPdXRwdXQoKSBzb3J0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBDb250ZW50Q2hpbGRyZW4oQ29sdW1uRGlyZWN0aXZlKSBjb2x1bW5zUmVmOiBRdWVyeUxpc3Q8Q29sdW1uRGlyZWN0aXZlPjtcclxuICAgIC8vIOihqOWwvlxyXG4gICAgQENvbnRlbnRDaGlsZCgnZm9vdGVyJykgZm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgLy8g6KGo5qC85Y+v5ouW5ou95a695bqm57O75YiXXHJcbiAgICAvLyDmi5bmi73nur9cclxuICAgIEBWaWV3Q2hpbGQoJ2RyYWdMaW5lJykgZHJhZ0xpbmU6IEVsZW1lbnRSZWY7XHJcbiAgICAvLyDmmK/lkKblj6/mi5bmi70gIOm7mOiupOWPr+S7pVxyXG4gICAgQElucHV0KCkgcmVzaXphYmxlQ29sdW1ucyA9IHRydWU7XHJcblxyXG4gICAgLyoqIOmSiOWvueWQjOS4gOadoeiusOW9le+8jOWNlemAieaXtu+8jOWkmuasoeWNleWHu+WQjuS4jeWPlua2iOmAieS4reOAgiAqL1xyXG4gICAgQElucHV0KCkga2VlcFNlbGVjdCA9IHRydWU7XHJcblxyXG4gICAgLy8g5piv5ZCm5pyJ6KGM5qih5p2/XHJcbiAgICBoYXNSb3dUZXBtbCA9IGZhbHNlO1xyXG4gICAgLy8g55So5oi36I635Y+W6KGo5aS0K+ihqOagvOWGheWuueeahOmrmOW6piAg5a695bqmICDnrYlcclxuICAgIGRhdGF0YWJsZUNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAvLyDmi5bmi73nur/liJ3lp4vljJbkvY3nva5cclxuICAgIGRyYWdMaW5lWDogbnVtYmVyO1xyXG4gICAgLy8g6K6+572u5ouW5ou95YGc5q2i5ZmoXHJcbiAgICBtb3ZlYWJsZSA9IGZhbHNlO1xyXG4gICAgLy9cclxuICAgIGN1cnJlbnRDb2x1bW46IGFueTtcclxuICAgIC8vIOiuvue9ruW3puWbuuWumuWIl1xyXG4gICAgaGFzRml4ZWQ6IGJvb2xlYW47XHJcbiAgICBmaXhlZExlZnRXaWR0aDogc3RyaW5nO1xyXG4gICAgLy8g6K6+572u5Y+z5Zu65a6a5YiXXHJcbiAgICBmaXhlZFJpZ2h0V2lkdGg6IHN0cmluZztcclxuICAgIHNlYXJjaERhdGEgPSB7IGZpZWxkOiAnKicsIHZhbHVlOiAnJyB9O1xyXG4gICAgLy8g5LqL5Lu26K6i6ZiF5a2Y5YKoICDkvr/kuo7plIDmr4FcclxuICAgIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICAgIC8vIOWbuuWumuWIl+aXtiAg5ZCM5LiA6KGM55qEdHIgaG92ZXLkuovku7ZcclxuICAgIGhlYWRlclRyOiBhbnk7XHJcbiAgICBsZWZ0Rml4ZWRIZWFkZXJUcjogYW55O1xyXG4gICAgcmlnaHRGaXhlZEhlYWRlclRyOiBhbnk7XHJcblxyXG4gICAgLy8g5Y6f5pWw5o2uXHJcbiAgICBwdWJsaWMgZmlsdGVyID0gJyc7XHJcbiAgICBwdWJsaWMgbWF4U2l6ZSA9IDc7XHJcbiAgICBwdWJsaWMgZGlyZWN0aW9uTGlua3MgPSB0cnVlO1xyXG4gICAgcHVibGljIGF1dG9IaWRlID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmVzcG9uc2l2ZSA9IHRydWU7XHJcbiAgICBwdWJsaWMgcGFnaW5hdGlvbk9wdGlvbnM6IFBhZ2luYXRpb25JbnN0YW5jZSA9IHtcclxuICAgICAgICBpZDogJ0ZhcnJpcy1EYXRhVGFibGUtUGFnaW5hdGlvbicsXHJcbiAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplLFxyXG4gICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgIHJlbW90ZTogdGhpcy5wYWdlck9uU2VydmVyXHJcbiAgICB9O1xyXG4gICAgcHVibGljIGxhYmVsczogYW55ID0ge1xyXG4gICAgICAgIHByZXZpb3VzTGFiZWw6ICcgJyxcclxuICAgICAgICBuZXh0TGFiZWw6ICcgJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJQYWdpbmF0aW9uTGFiZWw6ICdQYWdpbmF0aW9uJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJQYWdlTGFiZWw6ICdwYWdlJyxcclxuICAgICAgICBzY3JlZW5SZWFkZXJDdXJyZW50TGFiZWw6IGBZb3UncmUgb24gcGFnZWBcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBfY3VycmVudFJvd0luZGV4ID0gLTE7XHJcbiAgICBnZXQgY3VycmVudFJvd0luZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRSb3dJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jdXJyZW50Um93ID0gdW5kZWZpbmVkO1xyXG4gICAgZ2V0IGN1cnJlbnRSb3coKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRSb3c7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZCgncGVyZmVjdFNjcm9sbGJhcicpIHBlcmZlY3RTY3JvbGxiYXI6IFBlcmZlY3RTY3JvbGxiYXJDb21wb25lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBpc0NoZWNrQWxsID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zIHx8ICF0aGlzLnNlbGVjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5kYXRhIHx8ICF0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0b3RhbCA9IDA7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZmluZChkID0+IGRbdGhpcy5pZEZpZWxkXSA9PT0gblt0aGlzLmlkRmllbGRdKSkge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aCA9PT0gdG90YWw7XHJcbiAgICB9XHJcblxyXG4gICAgc2NvcmxsYWJsZUJvZHlIZWlnaHQ6IG51bWJlcjtcclxuICAgIG1vdXNlRW50ZXJPblBhZ2VyID0gbnVsbDtcclxuICAgIG1vdXNlTGVhdmVPblBhZ2VyID0gbnVsbDtcclxuICAgIG1vdXNlV2hlZWxPblBhZ2VyID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFTZXJ2aWNlOiBEYXRhVGFibGVTZXJ2aWNlLCBwcml2YXRlIGlkU2VydmljZTogSWRTZXJ2aWNlLCBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHB1YmxpYyBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhU2VydmljZS5zZWxlY3RlZFJvdy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3dJbmRleCA9IGUucm93SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um93ID0gZS5yb3dEYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHRIZWFkZXIuaXNDaGVja0FsbCA9IHRoaXMuaXNDaGVja0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudW5TZWxlY3RlZFJvdy5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRSb3cgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50Um93SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHRIZWFkZXIuaXNDaGVja0FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwczogUGVyZmVjdFNjcm9sbGJhcjtcclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvZHlIZWlnaHQodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucHMgPSB0aGlzLnBlcmZlY3RTY3JvbGxiYXIuZGlyZWN0aXZlUmVmLnBzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gYGRhdGF0YWJsZV8ke3RoaXMuaWRTZXJ2aWNlLmdlbmVyYXRlKCl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaWQgPSB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmlkICsgdGhpcy5pZDtcclxuICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnJlbW90ZSA9IHRoaXMucGFnZXJPblNlcnZlcjtcclxuXHJcbiAgICAgICAgdGhpcy5jb3B5RGF0YSA9IGRlZXBDb3B5KHRoaXMuZGF0YSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTb3J0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU29ydENvbHVtbiA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEJvZHlIZWlnaHQocmVmcmVzaCA9IHRydWUpIHtcclxuICAgICAgICBsZXQgX3RhYmxlaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0ZpbHRlckJhcikge1xyXG4gICAgICAgICAgICBfdGFibGVoZWlnaHQgPSB0aGlzLmhlaWdodCAtIDQ2O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhYmxlSGVpZ2h0ID0gX3RhYmxlaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgX3Njb3JsbGFibGVCb2R5SGVpZ2h0ID0gMDtcclxuICAgICAgICBpZiAodGhpcy5zaG93SGVhZGVyICYmIHRoaXMudGFibGVIZWFkZXIpIHtcclxuICAgICAgICAgICAgLy8gX3Njb3JsbGFibGVCb2R5SGVpZ2h0ID0gdGhpcy50YWJsZUhlaWdodCAtIHRoaXMudGFibGVIZWFkZXIubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgIF9zY29ybGxhYmxlQm9keUhlaWdodCA9IHRoaXMudGFibGVIZWlnaHQgLSB0aGlzLnRhYmxlSGVhZGVyLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUnKS5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIF9zY29ybGxhYmxlQm9keUhlaWdodCA9IF9zY29ybGxhYmxlQm9keUhlaWdodCAtIDUwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY29ybGxhYmxlQm9keUhlaWdodCA9IF9zY29ybGxhYmxlQm9keUhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKHJlZnJlc2ggJiYgdGhpcy5jZCAmJiAhdGhpcy5jZFsnZGVzdHJveWVkJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXJTZWFyY2hWYWx1ZSgpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaERhdGEudmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLmNsZWFyU2VhcmNoVmFsdWUuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrQnlSb3dzID0gKGluZGV4OiBudW1iZXIsIHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJvdyA/IHJvd1t0aGlzLmlkRmllbGRdOiBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuaGVpZ2h0ICYmICFjaGFuZ2VzLmhlaWdodC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb2R5SGVpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy50b3RhbCAmJiAhY2hhbmdlcy50b3RhbC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy50b3RhbEl0ZW1zID0gY2hhbmdlcy50b3RhbC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLml0ZW1zUGVyUGFnZSA9IGNoYW5nZXMucGFnZVNpemUuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZXJPblNlcnZlciAmJiAhY2hhbmdlcy5wYWdlck9uU2VydmVyLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnJlbW90ZSA9IGNoYW5nZXMucGFnZXJPblNlcnZlci5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5wYWdlSW5kZXggJiYgIWNoYW5nZXMucGFnZUluZGV4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gY2hhbmdlcy5wYWdlSW5kZXguY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0YSAmJiAhY2hhbmdlcy5kYXRhLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm93cyA9IGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0ZShyb3dzKTtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHsgLi4udGhpcy5wYWdpbmF0aW9uT3B0aW9ucyB9O1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLmxvYWRTdWNjZXNzLm5leHQoY2hhbmdlcy5kYXRhLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgICAgICAvLyDmlK/mjIHliJfnu4Tku7blhpnlhaVcclxuICAgICAgICBpZiAoIXRoaXMuY29sdW1ucykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zUmVmICYmIHRoaXMuY29sdW1uc1JlZi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMuY29sdW1uc1JlZi5tYXAoY29sID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29sLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY29sLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogY29sLmZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogY29sLmFsaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXhlZDogY29sLmZpeGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNvbC5jbGFzc05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlRmlsdGVyOiBjb2wubXVsdGlwbGVGaWx0ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogY29sLmZpbHRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWE6IGNvbC5tZWRpYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGFibGU6IGNvbC5zb3J0YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdDogY29sLmVkaXRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YWJsZVBhZ2VyICYmIHRoaXMucGFnZXJWaWV3TW9kZSAhPT0gJ3NpbXBsZScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMubW91c2VFbnRlck9uUGFnZXIgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3ZlcmZsb3dYID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3BnLXBhZ2VsaXN0JykgPiAtMSB8fCBlLnRhcmdldC5jbG9zZXN0KCcucGctcGFnZWxpc3QnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dYID0gXCJ1bnNldFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZ1Njcm9sbGJhci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc3R5bGUub3ZlcmZsb3dYID0gb3ZlcmZsb3dYO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMubW91c2VMZWF2ZU9uUGFnZXIgPShlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGdTY3JvbGxiYXIubmF0aXZlRWxlbWVudC5zdHlsZS5vdmVyZmxvd1ggPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLm1vdXNlV2hlZWxPblBhZ2VyID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm94ID0gdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3ID0gdGhpcy5wZ1Njcm9sbGJhci5uYXRpdmVFbGVtZW50LnNjcm9sbFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdyA9IGJveC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3cgPiBvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBzdyAtIG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2wgPSBNYXRoLmFicyh0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2wgPCByaWdodCAmJiBlLmRlbHRhWSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZ1Njcm9sbGJhci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSBzbCArIDUwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2wgPiAwICYmIGUuZGVsdGFZIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBnU2Nyb2xsYmFyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNsIC0gNTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24uZm9yRWFjaChzdWIgPT4ge1xyXG4gICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnBhZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGFibGVQYWdlciAmJiB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5tb3VzZUVudGVyT25QYWdlciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFibGVQYWdlci5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm1vdXNlTGVhdmVPblBhZ2VyKTtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLm1vdXNlV2hlZWxPblBhZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgLy8g6I635Y+W6KGo5qC85a655ZmoICDljbPooajmoLxcclxuICAgICAgICB0aGlzLmRhdGF0YWJsZUNvbnRhaW5lciA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLWRhdGF0YWJsZScpO1xyXG4gICAgICAgIC8vIHRoaXMuaGVhZGVyVHIgPSB0aGlzLnRhYmxlSGVhZGVyLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGFnZXJWaWV3TW9kZSA9PSAnc2ltcGxlJyAmJiB0aGlzLnRhYmxlUGFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzQ0cHgnO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlUGFnZXIubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnNDRweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNoZWNrYm94U3RhdGUocm93czogYW55W10pIHtcclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlQ2hlY2tBbGxTdGF0dXMgPSAoZikgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93SGVhZGVyICYmIHRoaXMuZHRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHRIZWFkZXIuaXNDaGVja0FsbCA9IGY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAocm93cyAmJiByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5kdEJvZHkuX3NlbGVjdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSByb3dzLm1hcCgocm93OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvd1t0aGlzLmlkRmllbGRdLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5cy5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkcy5pbmRleE9mKGlkKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNoZWNrQWxsU3RhdHVzKGlkcy5sZW5ndGggPT09IGNvdW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2hlY2tBbGxTdGF0dXMoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2hlY2tBbGxTdGF0dXMoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXBkYXRlQ2hlY2tBbGxTdGF0dXMoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5booajmoLzlrrnlmajnmoTkvY3nva4gIOi3neemu+W3pui+ueinhuWPo+WSjOS4iui+ueinhuWPo+eahOi3neemuyAg5aaC5p6c6aG16Z2i5pyJ5rua5Yqo5p2hICDpnIDopoHliqDkuIrmu5rliqjmnaHmu5rliqjnmoTmlbDlgLxcclxuICAgICAqL1xyXG4gICAgZ2V0Q29udGFpbmVyT2Zmc2V0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmRhdGF0YWJsZUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCxcclxuICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQsXHJcbiAgICAgICAgICAgIGJvdHRvbTogcmVjdC5ib3R0b20sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogIOm8oOagh+aMieS4iyAg5byA5aeL6K6w5b2V5ouW5ou957q/55qE5L2N572uICDmi5bmi73nur/liLDovr7lvZPliY3pvKDmoIfkvY3nva5cclxuICAgICAqIEBwYXJhbSBlIOm8oOagh+WvueixoVxyXG4gICAgICovXHJcbiAgICBiZWdpbkRyYWcoZSkge1xyXG4gICAgICAgIHRoaXMuZHJhZ0xpbmVYID0gZS5wYWdlWDtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpvKDmoIfnp7vliqgg56e75Yqo5ouW5ou957q/5L2N572u5Y+Y5YqoXHJcbiAgICAgKiBAcGFyYW0gZSDpvKDmoIflr7nosaFcclxuICAgICAqL1xyXG4gICAgbW92ZURyYWcoZSkge1xyXG4gICAgICAgIC8vIOiOt+WPluihqOagvOeahOW3pui+uei3neemu1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckxlZnQgPSB0aGlzLmdldENvbnRhaW5lck9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgLy8g6K6+572u5ouW5ou957q/55qE6auY5bqmICDljbPojrflj5booajlpLQr6KGo5YaF5a65K+ihqOWwvueahOmrmOW6piAg5q2k6KGo5qC857uT5p6E5YyF5ZCr5LqG5YiG6aG1ICDlm6DmraTopoHljrvmjonliIbpobXnmoTpq5jluqZcclxuICAgICAgICBpZiAodGhpcy50YWJsZVBhZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGF0YWJsZUNvbnRhaW5lci5vZmZzZXRIZWlnaHQgLVxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJsZVBhZ2VyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zdCBoZWFkZXJIZWlnaHQgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJsZS1oZWFkZXInKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgYm9keUhlaWdodCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHMtY29udGVudCcpO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdMaW5lLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhdGFibGVDb250YWluZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6K6+572u5ouW5ou957q/55qE6auY5bqmIOaLluaLvee6v+ebuOWvueS6juihqOagvHJlbGF0aXZl5a6a5L2N5pivYWJzb2x1dGXvvIzlm6DmraTmmK8wXHJcbiAgICAgICAgdGhpcy5kcmFnTGluZS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IDAgKyAncHgnO1xyXG4gICAgICAgIC8vIOm8oOagh+enu+WKqOaXtu+8jOaLluaLvee6v+ebuOWvueS6juihqOagvOeahOS9jee9rlxyXG4gICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gKGUucGFnZVggLSBjb250YWluZXJMZWZ0KSArICdweCc7XHJcbiAgICAgICAgLy8g6byg5qCH56e75YqoICDorr7nva7mi5bmi73nur/mgLvmmK/lj6/op4FcclxuICAgICAgICB0aGlzLmRyYWdMaW5lLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB9XHJcbiAgICAvLyDph43mlrDorqHnrpfooajmoLzlrr3luqZcclxuICAgIC8qKlxyXG4gICAgICog6byg5qCH5oqs6LW3IOmHjeaWsOiuoeeul+WNleWFg+agvOWuveW6plxyXG4gICAgICog6byg5qCH5a+56LGhXHJcbiAgICAgKi9cclxuICAgIHN0b3BEcmFnKGUsIGNvbHVtbikge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9GaXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ29sdW1uMihlLCBjb2x1bW4pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcy51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzaXplQ29sdW1uKGUsIGNvbHVtbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplQ29sdW1uKGUsIGNvbHVtbikge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQ2hlY2tCb3goY29sdW1uLCAnZHQtY2hlY2tib3gtY2VsbCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpbmUubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWBj+enu+mHj1xyXG4gICAgICAgIGNvbnN0IGRlbHRhID0gZS5wYWdlWCAtIHRoaXMuZHJhZ0xpbmVYO1xyXG4gICAgICAgIC8vIOaLluaLveWJjeWIl+WuvVxyXG4gICAgICAgIGNvbnN0IGNvbHVtbldpZHRoID0gY29sdW1uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOaLluaLveWQjuWIl+WuvVxyXG4gICAgICAgIGxldCBuZXdDb2x1bW5XaWR0aCA9IGNvbHVtbldpZHRoICsgZGVsdGE7XHJcbiAgICAgICAgLy8g5pyA5bCP5a695bqmXHJcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBjb2x1bW4uc3R5bGUubWluV2lkdGggfHwgMzA7XHJcbiAgICAgICAgLy8g5paw5a695bqm5aSn5LqO5oiW562J5LqO5pyA5bCP5a695bqm5pe2XHJcbiAgICAgICAgbmV3Q29sdW1uV2lkdGggPSBuZXdDb2x1bW5XaWR0aCA+IG1pbldpZHRoID8gbmV3Q29sdW1uV2lkdGggOiBtaW5XaWR0aDtcclxuICAgICAgICAvLyDph43mlrDorr7nva7lrr3luqZcclxuICAgICAgICBsZXQgY29sSW5kZXggPSAtMTtcclxuICAgICAgICBjb25zdCBvdGhlcnNDb2wgPSBbXTtcclxuICAgICAgICBjb25zdCBjb2xzID0gdGhpcy50YWJsZUhlYWRlci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XHJcblxyXG4gICAgICAgIC8vIOeItuiKgueCueWuveW6plxyXG4gICAgICAgIGNvbnN0IHBhcmVudFdpZHRoID0gY29sdW1uLnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgLy8g5Yik5pat5piv5LiN5piv5pyJY2hlY2tib3hcclxuICAgICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBjb2x1bW4ucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICBjb25zdCBjaGVja0JveFdpZHRoID0gdGhpcy5pc0NoZWNrQm94KGZpcnN0RWxlbWVudCwgJ2R0LWNoZWNrYm94LWNlbGwnKSA/IGZpcnN0RWxlbWVudC5vZmZzZXRXaWR0aCA6IDA7XHJcbiAgICAgICAgLy8g5YW25LuW5YiX5a695bqmXHJcbiAgICAgICAgbGV0IG90aGVyc1dpZHRoID0gcGFyZW50V2lkdGggLSBjb2x1bW5XaWR0aCAtIGNoZWNrQm94V2lkdGg7XHJcbiAgICAgICAgbGV0IG5ld090aGVyc1dpZHRoID0gcGFyZW50V2lkdGggLSBuZXdDb2x1bW5XaWR0aCAtIGNoZWNrQm94V2lkdGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjb2xzW2ldID09PSBjb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbEluZGV4ID0gaTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hlY2tCb3goY29sc1tpXSwgJ2R0LWNoZWNrYm94LWNlbGwnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IGNvbHNbaV0ub2Zmc2V0V2lkdGggLyBvdGhlcnNXaWR0aDtcclxuICAgICAgICAgICAgICAgIGlmIChyYXRlID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbFdpZHRoID0gbmV3T3RoZXJzV2lkdGggKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld090aGVyc1dpZHRoICogcmF0ZSA+IDE1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sV2lkdGggPSBuZXdPdGhlcnNXaWR0aCAqIHJhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJzV2lkdGggPSBvdGhlcnNXaWR0aCAtIGNvbFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld090aGVyc1dpZHRoID0gbmV3T3RoZXJzV2lkdGggLSBjb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBuZXdDb2x1bW5XaWR0aCA9IG5ld0NvbHVtbldpZHRoIC0gMTUgKyBuZXdPdGhlcnNXaWR0aCAqIHJhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvdGhlcnNDb2wucHVzaCh7IGNvbEluZGV4OiBpLCBjb2xXaWR0aCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbEdyb3VwKHRoaXMuZHRIZWFkZXIuZWwubmF0aXZlRWxlbWVudCwgY29sSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBvdGhlcnNDb2wpO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5kdEJvZHkuZWwubmF0aXZlRWxlbWVudCwgY29sSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBvdGhlcnNDb2wpO1xyXG4gICAgICAgIC8vIOiuoeeul+WuveW6puWujOavlSAg6K6+572u5ouW5ou957q/6ZqQ6JePXHJcbiAgICAgICAgdGhpcy5kcmFnTGluZS5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzaXplQ29sdW1uMihlLCBjb2x1bW4pIHtcclxuICAgICAgICBpZiAodGhpcy5pc0NoZWNrQm94KGNvbHVtbiwgJ2R0LWNoZWNrYm94LWNlbGwnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdMaW5lLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlgY/np7vph49cclxuICAgICAgICBjb25zdCBkZWx0YSA9IGUucGFnZVggLSB0aGlzLmRyYWdMaW5lWDtcclxuICAgICAgICAvLyDmi5bmi73liY3liJflrr1cclxuICAgICAgICBjb25zdCBjb2x1bW5XaWR0aCA9IGNvbHVtbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICAvLyDmi5bmi73lkI7liJflrr1cclxuICAgICAgICBsZXQgbmV3Q29sdW1uV2lkdGggPSBjb2x1bW5XaWR0aCArIGRlbHRhO1xyXG4gICAgICAgIC8vIOacgOWwj+WuveW6plxyXG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gY29sdW1uLnN0eWxlLm1pbldpZHRoIHx8IDMwO1xyXG4gICAgICAgIC8vIOaWsOWuveW6puWkp+S6juaIluetieS6juacgOWwj+WuveW6puaXtlxyXG4gICAgICAgIG5ld0NvbHVtbldpZHRoID0gbmV3Q29sdW1uV2lkdGggPiBtaW5XaWR0aCA/IG5ld0NvbHVtbldpZHRoIDogbWluV2lkdGg7XHJcbiAgICAgICAgLy8g6YeN5paw6K6+572u5a695bqmXHJcbiAgICAgICAgbGV0IGNvbEluZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgb3RoZXJzQ29sID0gW107XHJcbiAgICAgICAgY29uc3QgY29scyA9IHRoaXMudGFibGVIZWFkZXIubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpO1xyXG5cclxuICAgICAgICAvLyDniLboioLngrnlrr3luqZcclxuICAgICAgICBjb25zdCBwYXJlbnRXaWR0aCA9IGNvbHVtbi5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOWIpOaWreaYr+S4jeaYr+aciWNoZWNrYm94XHJcbiAgICAgICAgY29uc3QgZmlyc3RFbGVtZW50ID0gY29sdW1uLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgY29uc3QgY2hlY2tCb3hXaWR0aCA9IHRoaXMuaXNDaGVja0JveChmaXJzdEVsZW1lbnQsICdkdC1jaGVja2JveC1jZWxsJykgPyBmaXJzdEVsZW1lbnQub2Zmc2V0V2lkdGggOiAwO1xyXG4gICAgICAgIC8vIOWFtuS7luWIl+WuveW6plxyXG4gICAgICAgIGxldCBvdGhlcnNXaWR0aCA9IHBhcmVudFdpZHRoIC0gY29sdW1uV2lkdGggLSBjaGVja0JveFdpZHRoO1xyXG4gICAgICAgIGxldCBuZXdPdGhlcnNXaWR0aCA9IHBhcmVudFdpZHRoIC0gbmV3Q29sdW1uV2lkdGggLSBjaGVja0JveFdpZHRoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29sc1tpXSA9PT0gY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NoZWNrQm94KGNvbHNbaV0sICdkdC1jaGVja2JveC1jZWxsJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBjb2xzW2ldLm9mZnNldFdpZHRoIC8gb3RoZXJzV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAocmF0ZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb2xzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBjb2xXaWR0aCA9IG5ld090aGVyc1dpZHRoICogcmF0ZTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPdGhlcnNXaWR0aCAqIHJhdGUgPiAxNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbFdpZHRoID0gbmV3T3RoZXJzV2lkdGggKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aCA9IDE1O1xyXG4gICAgICAgICAgICAgICAgICAgIG90aGVyc1dpZHRoID0gb3RoZXJzV2lkdGggLSBjb2xXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBuZXdPdGhlcnNXaWR0aCA9IG5ld090aGVyc1dpZHRoIC0gY29sV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29sdW1uV2lkdGggPSBuZXdDb2x1bW5XaWR0aCAtIDE1ICsgbmV3T3RoZXJzV2lkdGggKiByYXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3RoZXJzQ29sLnB1c2goeyBjb2xJbmRleDogaSwgY29sV2lkdGggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmR0SGVhZGVyLmVsLm5hdGl2ZUVsZW1lbnQsIGNvbEluZGV4LCBuZXdDb2x1bW5XaWR0aCwgW10pO1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5kdEJvZHkuZWwubmF0aXZlRWxlbWVudCwgY29sSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBbXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gY29sdW1uLmdldEF0dHJpYnV0ZSgnZmllbGQnKTtcclxuICAgICAgICBpZiAoZmllbGQpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zLmZpbmQobiA9PiBuLmZpZWxkID09PSBmaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChjb2wpIHtcclxuICAgICAgICAgICAgICAgIGNvbC53aWR0aCA9IG5ld0NvbHVtbldpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiuoeeul+WuveW6puWujOavlSAg6K6+572u5ouW5ou957q/6ZqQ6JePXHJcbiAgICAgICAgdGhpcy5kcmFnTGluZS5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDaGVja0JveChlbGVtZW50cywgY05hbWUpIHtcclxuICAgICAgICByZXR1cm4gISFlbGVtZW50cy5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJyArIGNOYW1lICsgJyhcXFxcc3wkKScpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDb2xHcm91cCh0YWJsZSwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCBvdGhlcnNDb2x1bW4pIHtcclxuICAgICAgICBpZiAodGFibGUpIHtcclxuICAgICAgICAgICAgLy8g5q2k5aSE6KaB6KeG5LiN5ZCM55qE6KGo5qC857uT5p6E5p2l56Gu5a6aIOacrOe7hOS7tuS4rSAgaGVhZGVy5ZKMYm9keee7k+aehOebuOWQjFxyXG4gICAgICAgICAgICBjb25zdCBjb2xHcm91cCA9IHRhYmxlLmNoaWxkTm9kZXNbMF0uY2hpbGRyZW5bMF0ubm9kZU5hbWUgPT09ICdDT0xHUk9VUCcgP1xyXG4gICAgICAgICAgICAgICAgdGFibGUuY2hpbGROb2Rlc1swXS5jaGlsZHJlblswXSA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChjb2xHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sID0gY29sR3JvdXAuY2hpbGRyZW5bcmVzaXplQ29sdW1uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gbmV3Q29sdW1uV2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlcnNDb2x1bW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlckNvbCA9IGNvbEdyb3VwLmNoaWxkcmVuW290aGVyc0NvbHVtbltpXS5jb2xJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVyQ29sICYmIG90aGVyc0NvbHVtbltpXS5jb2xXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlckNvbC5zdHlsZS53aWR0aCA9IG90aGVyc0NvbHVtbltpXS5jb2xXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTY3JvbGxhYmxlIHRhYmxlcyByZXF1aXJlIGEgY29sZ3JvdXAgdG8gc3VwcG9ydCByZXNpemFibGUgY29sdW1ucycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TY3JvbGxYKGU6IGFueSkge1xyXG4gICAgICAgIC8vIOaoquWQkea7muWKqCDpnZ7lm7rlrprooajlpLTmu5rliqhcclxuICAgICAgICBjb25zdCB4ID0gZS5zcmNFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgdGhpcy50YWJsZUhlYWRlci5uYXRpdmVFbGVtZW50LnNjcm9sbFRvKHgsIDApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmu5rliqjmnaHnurXlkJHmu5rliqhcclxuICAgICAqL1xyXG4gICAgb25TY3JvbGxZKGU6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNGaXhlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHkgPSBlLnNyY0VsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgIHRoaXMuZHRMZWZ0Rml4ZWQubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAteSArICdweCc7XHJcbiAgICAgICAgdGhpcy5kdFJpZ2h0Rml4ZWQubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAteSArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlQ2hhbmdlKHBhZ2U6IHsgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgfSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VJbmRleCAhPT0gcGFnZS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlLnBhZ2VJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHBhZ2UucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VDaGFuZ2VkLmVtaXQoeyBwYWdlSW5mbzogcGFnZSwgc2VhcmNoOiB0aGlzLnNlYXJjaERhdGEsIHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VTaXplQ2hhbmdlKHBhZ2VTaXplOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5wYWdlU2l6ZSAhPT0gcGFnZVNpemUgJiYgdGhpcy50b3RhbCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLml0ZW1zUGVyUGFnZSA9IHBhZ2VTaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b3RhbCA9IHRoaXMudG90YWw7XHJcbiAgICAgICAgICAgIGxldCBwYWdlTGVuZ3RoID0gTWF0aC5mbG9vcih0b3RhbCAvIHBhZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKHRvdGFsICUgcGFnZVNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlTGVuZ3RoICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlTGVuZ3RoICYmIHRoaXMucGFnZUluZGV4ID4gcGFnZUxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5kZXggPSBwYWdlTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy5jdXJyZW50UGFnZSA9IHRoaXMucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlZC5lbWl0KHtcclxuICAgICAgICAgICAgICAgIHBhZ2VJbmZvOiB7IHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsIHBhZ2VTaXplIH0sXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6IHRoaXMuc2VhcmNoRGF0YSwgc29ydE5hbWU6IHRoaXMuc29ydE5hbWUsIHNvcnRPcmRlcjogdGhpcy5zb3J0T3JkZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoKCRldmVudCkge1xyXG4gICAgICAgIGlmICgkZXZlbnQub3JpZ2luYWxFdmVudCkge1xyXG4gICAgICAgICAgICAkZXZlbnQub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWFyY2guZW1pdCh0aGlzLnNlYXJjaERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hlY2tBbGwoc3RhdGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmRhdGFTZXJ2aWNlLnNlbGVjdGVkQWxsLm5leHQoc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tBbGwuZW1pdChzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uU2VsZWN0ZWRSb3coZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvdy5lbWl0KHsgZGF0YTogZS5yb3dEYXRhLCBpbmRleDogZS5yb3dJbmRleCB9KTtcclxuICAgICAgICAvLyDlhbzlrrlcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd3MuZW1pdCh7IGRhdGE6IGUucm93RGF0YSwgaW5kZXg6IGUucm93SW5kZXggfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXHJcbiAgICByZXNpemUoc2l6ZTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9KSB7XHJcbiAgICAgICAgaWYgKCFzaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMud2lkdGggIT09IHNpemUud2lkdGggfHwgdGhpcy5oZWlnaHQgIT09IHNpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHNpemUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldEJvZHlIZWlnaHQoKTsgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERhdGEoZTogeyBwYWdlU2l6ZTogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBkYXRhOiBhbnksIHBhZ2VJbmRleDogbnVtYmVyIH0pIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBlLmRhdGE7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCB7IHRvdGFsID0gMCwgcGFnZVNpemUgPSAyMCwgcGFnZUluZGV4ID0gMSB9ID0geyAuLi5lIH07XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMudG90YWxJdGVtcyA9IHRvdGFsO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLml0ZW1zUGVyUGFnZSA9IHBhZ2VTaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gcGFnZUluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnBhZ2VMaXN0ID0gdGhpcy5wYWdlTGlzdDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMgPSB7Li4udGhpcy5wYWdpbmF0aW9uT3B0aW9uc307XHJcbiAgICAgICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcclxuICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2VJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgLy8gVEZTIDU4MDI5NlxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBzICYmIHRoaXMucHMudXBkYXRlKCk7XHJcbiAgICAgICAgfSwgMTApO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0ZSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKi9cclxuICAgIG9uQ2VsbENsaWNrKGUpIHtcclxuICAgICAgICB0aGlzLmNlbGxDbGljay5lbWl0KGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOa3u+WKoOihjCAqL1xyXG4gICAgYWRkUm93cyhkYXRhSXRlbSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5jb25jYXQoZGF0YUl0ZW0pO1xyXG4gICAgfVxyXG4gICAgLyog5Yig6Zmk6KGMICovXHJcbiAgICByZW1vdmVSb3dzKCkge1xyXG4gICAgICAgIGNvbnN0IFNFTEVDVElPTlMgPSB0aGlzLnNlbGVjdGlvbnM7XHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09PSBTRUxFQ1RJT05TKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU0VMRUNUSU9OUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmRhdGEubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU0VMRUNUSU9OU1tpXVt0aGlzLmlkRmllbGRdID09PSB0aGlzLmRhdGFbal1bdGhpcy5pZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja1JvdyhyaWQ6IGFueSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMuZGF0YS5maW5kKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuW3RoaXMuaWRGaWVsZF0gPT0gcmlkKSB7XHJcbiAgICAgICAgICAgICAgICByb3dJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKCFyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHsgW3JpZF06IHJvd0RhdGEgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBbcmlkXTogcm93RGF0YSwgLi4udGhpcy5zZWxlY3Rpb25zLnJlZHVjZSgociwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJbblt0aGlzLmlkRmllbGRdXSA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgICAgICB9LCB7fSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YVNlcnZpY2Uuc2VsZWN0ZWRSb3cubmV4dCh7XHJcbiAgICAgICAgICAgIHJvd0luZGV4LFxyXG4gICAgICAgICAgICByb3dEYXRhXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSB7IGRhdGE6IHJvd0RhdGEsIGluZGV4OiByb3dJbmRleCB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93LmVtaXQocCk7XHJcbiAgICAgICAgICAgIC8vIOWFvOWuuVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd3MuZW1pdChwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5DaGVja1JvdyhyaWQ6IGFueSwgZW1pdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMuZGF0YS5maW5kKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuW3RoaXMuaWRGaWVsZF0gPT0gcmlkKSB7XHJcbiAgICAgICAgICAgICAgICByb3dJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLmZpbHRlcihuID0+IG5bdGhpcy5pZEZpZWxkXSAhPSByaWQpLnJlZHVjZSgociwgbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcltuW3RoaXMuaWRGaWVsZF1dID0gbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNlcnZpY2UudW5TZWxlY3RlZFJvdy5uZXh0KHtcclxuICAgICAgICAgICAgICAgIHJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgcm93RGF0YVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5TZWxlY3RSb3cuZW1pdCh7IGRhdGE6IHJvd0RhdGEsIGluZGV4OiByb3dJbmRleCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1bkNoZWNrUm93cyhpZHM6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLmZpbHRlcihuID0+ICFpZHMuaW5jbHVkZXMoblt0aGlzLmlkRmllbGRdKSkucmVkdWNlKChyLCBuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByW25bdGhpcy5pZEZpZWxkXV0gPSBuO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclNlbGVjdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlkb3duRXZlbnQoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCEkZXZlbnQgfHwgIXRoaXMuc2luZ2xlU2VsZWN0IHx8ICF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFbJ0Fycm93RG93bicsICdBcnJvd1VwJ10uaW5jbHVkZXMoJGV2ZW50LmNvZGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgbmV3SWR4O1xyXG4gICAgICAgIGlmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicpIHtcclxuICAgICAgICAgICAgbmV3SWR4ID0gdGhpcy5fY3VycmVudFJvd0luZGV4ICsgMTtcclxuICAgICAgICAgICAgaWYgKG5ld0lkeCA+PSB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJZHggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93VXAnKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50Um93SW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJZHggPSB0aGlzLl9jdXJyZW50Um93SW5kZXggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3SWR4ID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kdEJvZHkuc2VsZWN0ZWRSb3coJGV2ZW50LCBuZXdJZHgsIHRoaXMuZGF0YVtuZXdJZHhdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBzY3JvbGwgaW50b1ZpZXdcclxuICAgICAgICAgICAgY29uc3QgdHJEb21zID0gdGhpcy5kdEJvZHkuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudWktdGFibGUtdGJvZHkgdHInKTtcclxuICAgICAgICAgICAgaWYgKHRyRG9tcyAmJiB0ckRvbXNbdGhpcy5fY3VycmVudFJvd0luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgdHJEb21zW3RoaXMuX2N1cnJlbnRSb3dJbmRleF0uc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==