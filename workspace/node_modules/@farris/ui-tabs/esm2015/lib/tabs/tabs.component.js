/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, ViewChild, EventEmitter, Output, NgZone } from '@angular/core';
import { fromEvent, Observable, of, BehaviorSubject, Subject } from 'rxjs';
import { takeUntil, map, scan, switchMap, takeWhile, debounceTime } from 'rxjs/operators';
import { TabService } from '../tabs.config';
import ResizeObserver from 'resize-observer-polyfill';
import { NgbDropdownMenu } from '../dropdown/dropdown';
export class FarrisTabsComponent {
    /**
     * @param {?} stService
     * @param {?} elementRef
     * @param {?} renderer
     * @param {?} cdRef
     * @param {?} ngZone
     */
    constructor(stService, elementRef, renderer, cdRef, ngZone) {
        this.stService = stService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.tabType = '';
        // 支持标签页填充
        this.fill = false;
        // 支持标签页标题自适应宽度-
        this.autoTitleWidth = false;
        // 标题长度大于等于多少字符，启用渐变样式——属性废弃
        this.titleLength = 7;
        // 搜索框是否显示
        this.searchBoxVisible = true;
        // 内容是否是flex 容器 用于内部子元素flex-----未被使用
        this.contentDirection = 'column';
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        /**
         * 因为生成器结构变更导致此处变更
         */
        this._disableStatesDatas = new Subject();
        // 按照之前的逻辑，如果没有找到key，就说明可见
        this._visibleDatas = new Subject();
        // 左侧所有标签的宽度和,百分比
        this.titleWidth = 0;
        this.tabChange = new EventEmitter();
        this.tabRemove = new EventEmitter();
        // 内容填充状态
        this.contentFillStates = new BehaviorSubject(false);
        // 宽度状态
        this.widthStates = new BehaviorSubject(false);
        // 高度状态
        this.heightStates = new BehaviorSubject(false);
        this.positionStates = new BehaviorSubject('top');
        this.menuItemsWidth = 'auto';
        //maxDropdownH = 200; -----未被使用
        // 下拉列表最大宽度： 非正值表明是不限制宽度 -----未被使用
        this.maxDropdownW = -1;
        this._customClass = '';
        // 标签存储列表
        this._tabs = [];
        // 工具条显示相关配置
        this.toolbarConf = {
            position: '',
            contents: []
        };
        // 工具条右侧小下拉框是否显示
        this.toolbarDpHidden = true;
        // 工具条“更多”里的按钮
        this.inMoreButtonContents = [];
        // 显示下拉数据
        this.dropdownTabs = [];
        // 隐藏左右滚动箭头按钮
        this.hideButtons = true;
        // 隐藏下拉
        this.hideDropDown = true;
        // 禁用左箭头
        this.disableLeft = false;
        // 禁用右箭头
        this.disableRight = false;
        // 记录事件流
        this.subscription = [];
        // 禁用右侧提示
        this.disableRTooltip = true;
        // 禁用左侧提示
        this.disableLTooltip = true;
        // 左侧提示数据
        this.leftTooltipTabs = [];
        // 右侧提示数据
        this.rightTooltipTabs = [];
        this.maxTooltipLen = 5;
        // 标记当前Tab标签
        this.activeId = '';
        this.ro = null;
        this._ddmHandler = null;
        // 当宽度改变时，强制收起下拉菜单 
        this.dpState = [false];
        // 在toolbar不存在的时候先记录visible变化的地方
        this.visibleRecord = {};
        this.disableRecord = {};
        // 下拉菜单的参照元素
        this.referEl = null;
        this.tabVisibleChanged = new Subject();
        this.el = this.elementRef.nativeElement;
        if (this.el.parentElement) {
            this.referEl = this.el.parentElement;
        }
        this.verifyConfig();
        this.subscription.push(this.tabVisibleChanged.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            this._reCalculateAll();
            this._calculateToolbarDropdownIsShow();
            this._calculateButtonsShow();
        })));
    }
    // tab页位置 上下左右
    /**
     * @param {?} value
     * @return {?}
     */
    set position(value) {
        this._position = value;
        this.positionStates.next(value);
    }
    /**
     * @return {?}
     */
    get position() {
        return this._position;
    }
    // tabs宽度和高度
    /**
     * @param {?} value
     * @return {?}
     */
    set width(value) {
        this._width = this.resolveSize(value);
        this.widthStates.next(this._width);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set height(value) {
        this._height = this.resolveSize(value);
        this.heightStates.next(this._height);
    }
    /**
     * @return {?}
     */
    get headerHeight() {
        return this._headerHeight;
    }
    /**
     * @param {?} headerHeight
     * @return {?}
     */
    set headerHeight(headerHeight) {
        this._headerHeight = this.resolveSize(headerHeight);
    }
    // 内容是否填充  默认是不填充
    /**
     * @param {?} value
     * @return {?}
     */
    set contentFill(value) {
        this._contentFill = value;
        this.contentFillStates.next(value);
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set btnStates(values) {
        if (values) {
            if (this._disableStatesDatas &&
                this._disableStatesDatas.hasOwnProperty("unsubscribe")) {
                this._disableStatesDatas["unsubscribe"]();
            }
            this._disableStatesDatas = values;
            this.disableStateBind();
        }
    }
    // 是否可见的状态
    /**
     * @param {?} values
     * @return {?}
     */
    set btnVisible(values) {
        if (values) {
            if (this._visibleDatas &&
                this._visibleDatas.hasOwnProperty("unsubscribe")) {
                this._visibleDatas["unsubscribe"]();
            }
            this._visibleDatas = values;
            this.visibleStateBind();
        }
    }
    // 所有标签数据
    /**
     * @return {?}
     */
    get tabs() {
        return this._tabs;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set tabs(value) {
        this._tabs = value;
    }
    /**
     * @return {?}
     */
    get customClass() {
        return this._customClass;
    }
    /**
     * @param {?} customClass
     * @return {?}
     */
    set customClass(customClass) {
        if (this.customClass) {
            this.customClass.split(' ').forEach((/**
             * @param {?} cssClass
             * @return {?}
             */
            (cssClass) => {
                this.renderer.removeClass(this.el, cssClass);
            }));
        }
        this._customClass = customClass ? customClass.trim() : null;
        if (this.customClass) {
            this.customClass.split(' ').forEach((/**
             * @param {?} cssClass
             * @return {?}
             */
            (cssClass) => {
                this.renderer.addClass(this.el, cssClass);
            }));
        }
    }
    /**
     * @return {?}
     */
    get direction() {
        switch (this.position) {
            case 'top':
                return 'column';
            case 'bottom':
                return 'column-reverse';
            case 'left':
                return 'row';
            case 'right':
                return 'row-reverse';
        }
    }
    // 无用，兼容
    /**
     * @return {?}
     */
    get tabDirection() {
        if (this.position === 'top' || this.position === 'bottom') {
            return 'row';
        }
        else if (this.position === 'left' || this.position === 'right') {
            return 'column';
        }
    }
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    trackByButton(index, btn) { return btn.id; }
    ;
    /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    verifyConfig() {
        /** @type {?} */
        const config = this.stService.getConfig();
        Object.assign(this, config);
        this.scrollStep = parseInt(this.scrollStep + '', 10);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            () => of(true));
        }
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        (btnInfo) => {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click();
            }
        }));
        this._tabContainerEl = this.tabContainer.nativeElement;
        this._createStream();
        this.activeId = this.selectId;
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            () => {
                if (this.ro === null) {
                    this.ro = new ResizeObserver((/**
                     * @param {?} el
                     * @return {?}
                     */
                    (el) => {
                        this._reCalculateAll();
                        this._calculateToolbarDropdownIsShow();
                        this._calculateButtonsShow();
                    }));
                    this.ro.observe(this.el.parentElement);
                }
            }));
        }
    }
    /**
     * 解决按钮调整隐藏状态之后，下拉中能显示的按钮有多少
     * @private
     * @return {?}
     */
    visibleStateBind() {
        this._visibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            // 解决切换时，按钮状态没被记录的问题
            /** @type {?} */
            const idArray = Object.keys(data);
            idArray.forEach((/**
             * @param {?} btnId
             * @return {?}
             */
            (btnId) => {
                this.visibleRecord[btnId] = data[btnId];
            }));
            if (this.toolbarConf && this.toolbarConf.contents.length > 0) {
                // 调整按钮可见状态            
                this.changeState(data, "visible");
                // 重新计算
                this._reCalculateAll();
                this._calculateToolbarDropdownIsShow();
                this._calculateButtonsShow();
            }
        }));
    }
    /**
     * @private
     * @return {?}
     */
    disableStateBind() {
        this._disableStatesDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            // 解决切换时，按钮状态没被记录的问题
            /** @type {?} */
            const idArray = Object.keys(data);
            idArray.forEach((/**
             * @param {?} btnId
             * @return {?}
             */
            (btnId) => {
                this.disableRecord[btnId] = data[btnId];
            }));
            if (this.toolbarConf && this.toolbarConf.contents.length > 0) {
                // 调整按钮可见状态            
                this.changeState(data, "disable");
            }
        }));
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes['selectId']) {
            this.selectTab(changes['selectId'].currentValue);
        }
    }
    /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    ngAfterContentInit() { }
    /**
     * @return {?}
     */
    ngAfterContentChecked() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        // 为了兼容弄旧表单，不兼容HostBinding, 通过追加class的方式实现
        this.renderer.addClass(this.el, 'farris-tabs');
        this.renderer.addClass(this.el, 'flex-column');
        this.contentFillStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.addClass(this.el, 'f-tabs-content-fill');
            }
            else {
                this.renderer.removeClass(this.el, 'f-tabs-content-fill');
            }
        }));
        this.widthStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.setStyle(this.el, 'width', data);
            }
        }));
        this.heightStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data) {
                this.renderer.setStyle(this.el, 'height', data);
            }
        }));
        this.positionStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.renderer.removeClass(this.el, 'flex-row');
            this.renderer.removeClass(this.el, 'flex-column');
            this.renderer.removeClass(this.el, 'flex-row-reverse');
            this.renderer.removeClass(this.el, 'flex-column-reverse');
            if (data === 'left') {
                this.renderer.addClass(this.el, 'flex-row');
            }
            if (data === 'top') {
                this.renderer.addClass(this.el, 'flex-column');
            }
            if (data === 'right') {
                this.renderer.addClass(this.el, 'flex-row-reverse');
            }
            if (data === 'bottom') {
                this.renderer.addClass(this.el, 'flex-column-reverse');
            }
        }));
        // 兼容结束
        this.getToolbarConf();
        this._reCalculateAll();
        this._setActive();
        this._changeTitleStyle();
        this._listenShowChanges();
        /** @type {?} */
        const self = this;
        // this.renderer.listen(document, 'keyup', function (e) {
        //     if (self.searchInputVisible) {
        //         console.log(e);
        //     }
        // });
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            this._ddmHandler = this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (!e.target.closest('.farris-tabs-header')) {
                    if (this.el && this.el.querySelector('.dropdown-menu')) {
                        if (this.ddm && this.ddm.dropdown) {
                            this.ddm.dropdown.close();
                        }
                    }
                }
            }));
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        // 组件销毁时  取消所有事件订阅
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        sub => {
            sub.unsubscribe();
        }));
        this.subscription = [];
        if (this.ro) {
            if (this.el.parentElement) {
                this.ro.unobserve(this.el.parentElement);
            }
            this.ro = null;
        }
        if (this._ddmHandler) {
            this._ddmHandler();
            this._ddmHandler = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
        if (this._visibleDatas &&
            this._visibleDatas.hasOwnProperty("unsubscribe")) {
            this._visibleDatas["unsubscribe"]();
            this._visibleDatas = null;
        }
    }
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    clickHandler(btnInfo) {
        if (!btnInfo) {
            return;
        }
        if (btnInfo.hasOwnProperty('disable') && btnInfo['disable']) {
            // 如果禁用就不触发点击事件
            return;
        }
        this.clickItems.next(btnInfo);
    }
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    openChange(e) {
        this.searchInputVisible = e;
        this.searchTabText = undefined;
        this._reCalculateAll();
        // 启用了搜索，需要判断下拉面板的值
        // 因为下拉面板可能存在遮挡的问题
        if (e) {
            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';
        }
        else {
            this.menuItemsWidth = 'auto';
        }
    }
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    searchTab(e) {
        this.stopBubble(e);
        this._reCalculateAll();
    }
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    stopBubble(e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    }
    /**
     * Ximena 23.08.30 判断是否可见,独立出来
     * Todo:
     * 1、现在btnVisible每次的变更都是全量，是否需要记录每次变更，然后合并计算？
     * 2、现在判断是否可见的方法，是直接更新界面的，每个按钮上都绑定了这个方法，会有性能问题。应该改成处理在绑定的所有数据，然后更新界面。
     * 3、是否可见和禁用有同样的问题
     * @param {?} btnItem
     * @return {?}
     */
    getToolbarStateVisible(btnItem) {
        /** @type {?} */
        let stateProp = "visible";
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        return true;
    }
    /**
     * @param {?} btnItem
     * @return {?}
     */
    getToolbarStateDisable(btnItem) {
        /** @type {?} */
        let stateProp = "disable";
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        return false;
    }
    /**
     * 只处理是否禁用
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    getToolbarState(id, state = this.btnStates) {
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return false;
                }
                return n[id];
            })));
        }
        else {
            return of(true);
        }
    }
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    _listenShowChanges() {
        // 如果隐藏的组件是激活状态，先将其设置为常规
        this.tabs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.showStates.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                /** @type {?} */
                let activeIdToken;
                item._show = data;
                if (data === false && item.id === this.activeId) {
                    item._active = false;
                    this.activeId = '';
                    activeIdToken = false;
                }
                /** @type {?} */
                const tabs = this.tabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item._show === true));
                /** @type {?} */
                const defaultTabId = tabs.length ? tabs[0].id : null;
                // 然后将显示状态下的第一个tab激活
                if (defaultTabId && activeIdToken === false) {
                    this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    (item, index) => {
                        if (item.id === defaultTabId) {
                            this.activeId = item.id;
                            this.tabs[index]._active = true;
                        }
                    }));
                    this.getToolbarConf();
                }
                this.cdRef.detectChanges();
            }));
        }));
    }
    /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    selectTab(tabId) {
        /** @type {?} */
        const selectedTab = this._getTabById(tabId);
        this._selectTab(selectedTab.tab, selectedTab.index);
    }
    /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    _cpSelectTabByIndex(ev, id, ddm = null) {
        ev.preventDefault();
        ev.stopPropagation();
        /** @type {?} */
        const targetEL = (/** @type {?} */ (ev.target));
        if (targetEL.className.indexOf('st-drop-close') > -1 ||
            targetEL.parentElement.className.indexOf('st-drop-close') > -1) {
            // 阻止冒泡和捕获事件 点击删除标记 则执行删除标签方法  而不是选中标签
            this.closeTab(id);
        }
        else {
            // 阻止冒泡
            this.selectTab(id);
        }
        this.getToolbarConf();
        this.cdRef.markForCheck();
        this._reCalculateAll();
        this._calculateToolbarDropdownIsShow();
        this._calculateButtonsShow();
        if (ddm) {
            ddm.dropdown.close();
        }
        return false;
    }
    /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    selectTabByIndex(index) {
        if (index >= 0 && index < this.tabs.length) {
            /** @type {?} */
            const selectTab = this.tabs[index];
            this._selectTab(selectTab, index);
        }
    }
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    _selectTab(tab, index) {
        if (tab && !tab.disabled && this.activeId !== tab.id) {
            if (!this.beforeSelect) {
                this.beforeSelect = (/**
                 * @return {?}
                 */
                () => of(true));
            }
            /** @type {?} */
            const tabsChangeEventParam = {
                prevId: this.activeId,
                nextId: tab.id
            };
            this.beforeSelect(tabsChangeEventParam).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (e) {
                    this.activeId = tab.id;
                    // 首先不激活所有的tab页  然后激活当前tab页
                    // let index = -1;
                    this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} i
                     * @return {?}
                     */
                    (item, i) => {
                        item._active = false;
                    }));
                    this.tabs[index]._active = true;
                    this.getToolbarConf();
                    // 滚动到可见区域内
                    this.scrollTabIntoView(index);
                    this.cdRef.detectChanges();
                    this.tabChange.emit(tabsChangeEventParam);
                }
            }));
        }
    }
    /**
     * @private
     * @return {?}
     */
    _setActive() {
        if (this.tabs.length) {
            /** @type {?} */
            const tabs = this.tabs.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => item._show === true));
            /** @type {?} */
            const activeTab = this._getTabById(this.activeId).tab;
            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;
            // 过滤掉show=false（隐藏）的tab
            if (tabs.length) {
                if (this.activeId) {
                    /** @type {?} */
                    const targetTab = tabs.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    item => item.id === this.activeId));
                    if (targetTab) {
                        this.activeId = targetTab.id;
                    }
                }
                else {
                    this.activeId = tabs[0].id;
                }
            }
            else {
                this.activeId = null;
            }
            this.tabs.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item._active = false;
                if (item.id === this.activeId) {
                    item._active = true;
                }
            }));
        }
    }
    /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    showTab(tabId, selectable = true) {
        /** @type {?} */
        const len = this.tabs.length;
        for (let i = 0; i < len; i++) {
            if (this.tabs[i].id === tabId) {
                this.tabs[i]._show = true;
                if (selectable) {
                    this.selectTab(tabId);
                }
                return;
            }
        }
    }
    /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    hideTab(activeId) {
        /** @type {?} */
        const showTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._show === true;
        }));
        /** @type {?} */
        const len = showTabs.length - 1;
        if (len < 0) {
            return;
        }
        /** @type {?} */
        let index;
        for (let i = 0; i <= len; i++) {
            if (showTabs[i].id === activeId) {
                showTabs[i]._show = false;
                index = i;
                break;
            }
        }
        if (index === undefined) {
            return;
        }
        else if (index === len && len < 1) {
            this.selectTab('');
        }
        else if (index === len && len >= 1) {
            this.selectTab(showTabs[len - 1].id);
        }
        else {
            this.selectTab(showTabs[index + 1].id);
        }
    }
    /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    addTabs(curTabs, index, setActiveId) {
        if (curTabs.length > 0) {
            this.tabs.splice(index, 0, ...curTabs);
            // 去重
            this.tabs = this._unique(this.tabs);
        }
        if (setActiveId && this.activeId !== setActiveId) {
            /** @type {?} */
            const filterTab = this._getTabById(setActiveId);
            if (filterTab.index >= 0) {
                this.selectTab(setActiveId);
                this.activeId = setActiveId;
                this.scrollTabIntoView(filterTab.index);
            }
        }
        this.cdRef.detectChanges();
        this._reCalculateAll();
        this._changeTitleStyle();
    }
    /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    _unique(objArray) {
        /** @type {?} */
        const hash = {};
        objArray = objArray.reduce((/**
         * @param {?} item
         * @param {?} next
         * @return {?}
         */
        function (item, next) {
            if (hash[next.id]) {
                hash[next.id] = '';
            }
            else {
                hash[next.id] = true && item.push(next);
            }
            return item;
        }), []);
        return objArray;
    }
    /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    removeTabByIndex(index) {
        /** @type {?} */
        const len = this.tabs.length - 1;
        if (index < 0 || index > len) {
            return;
        }
        /** @type {?} */
        const removeTab = this.tabs[index];
        removeTab._active = false;
        if (this.activeId === removeTab.id) {
            // 只有一个而且被删除
            if (len === 0) {
                // 如果所有标签均删除 激活id为空
                this.activeId = '';
            }
            else if (index === len) {
                // 如果删除的是最后一个标签 设置其前面的处于激活状态
                this.activeId = this.tabs[len - 1].id;
                this.tabs[index - 1]._active = true;
            }
            else {
                // 如果其他情况  设置其后面的处于激活状态
                this.activeId = this.tabs[index + 1].id;
                this.tabs[index + 1]._active = true;
            }
            this.tabs.splice(index, 1);
            this.scrollTabIntoView(index);
        }
        else {
            this.tabs.splice(index, 1);
        }
        this.tabRemove.emit({
            removeIndex: index,
            removeId: removeTab.id,
            activeId: this.activeId
        });
        this.cdRef.detectChanges();
    }
    /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    closeTab(activeId) {
        /** @type {?} */
        const len = this.tabs.length;
        for (let i = 0; i < len; i++) {
            /** @type {?} */
            const tab = this.tabs[i];
            if (tab.id === activeId) {
                this.removeTabByIndex(i);
                return;
            }
        }
    }
    /**
     * 初始化
     * @return {?}
     */
    load() {
        for (let i = 0; i < this.tabs.length; i++) {
            if (this.tabs[i].id === this.activeId) {
                this.tabs[i]._active = true;
                return;
            }
        }
    }
    /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    _truncateTitle() {
        this.tabs = this.tabs.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;
            return item;
        }));
    }
    /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    _changeTitleStyle() {
        if (this.autoTitleWidth) {
            return;
        }
        /** @type {?} */
        const $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');
        for (var k = 0; k < $textEls.length; k++) {
            /** @type {?} */
            let parentEl = $textEls[k].parentNode;
            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {
                this.tabs[k].titleOverflow = true;
            }
            else {
                this.tabs[k].titleOverflow = false;
            }
        }
        //this.cdRef.detectChanges();
    }
    /**
     * 创建流
     * @private
     * @return {?}
     */
    _createStream() {
        [this.rightNav, this.leftNav].forEach((/**
         * @param {?} curBtn
         * @param {?} index
         * @return {?}
         */
        (curBtn, index) => {
            /** @type {?} */
            const direction = index ? -1 : 1;
            /** @type {?} */
            const mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');
            /** @type {?} */
            const mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');
            /** @type {?} */
            const newMouseDown$ = mousedown$.pipe(switchMap((/**
             * @param {?} event
             * @return {?}
             */
            (event) => {
                event.preventDefault();
                event.stopPropagation();
                /** @type {?} */
                const interval$ = of(0).pipe(
                // concat(interval(80)),
                takeUntil(mouseup$), scan((/**
                 * @param {?} sum
                 * @param {?} num
                 * @return {?}
                 */
                (sum, num) => {
                    return sum + this.scrollStep * direction;
                }), 0), takeWhile((/**
                 * @param {?} num
                 * @return {?}
                 */
                num => {
                    if (direction > 0) {
                        return !this.disableRight;
                    }
                    return !this.disableLeft;
                })), map((/**
                 * @param {?} v
                 * @return {?}
                 */
                v => {
                    return { value: v, direction };
                })));
                return interval$;
            })));
            /** @type {?} */
            const mousepressSub = newMouseDown$.subscribe((/**
             * @param {?} change
             * @return {?}
             */
            change => {
                this._scrollTab(change.value, change.direction);
            }));
            this.subscription.push(mousepressSub);
        }));
        // if (this.autoResize) {
        //     // 订阅windows resize事件
        //     this.subscription.push(
        //         fromEvent(window, 'resize')
        //             .pipe(throttleTime(80))
        //             .subscribe(e => {
        //                 this.cdRef.detectChanges();
        //             })
        //     );
        // }
    }
    /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    _scrollTab(move, direction) {
        /** @type {?} */
        const dist_scrollleft = this._tabContainerEl.scrollLeft + move;
        /** @type {?} */
        const max_scroll_left = this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        // 标签页左侧移动
        if (direction > 0) {
            this._tabContainerEl.scrollLeft = Math.min(dist_scrollleft, max_scroll_left);
        }
        else if (direction < 0) {
            // 标签页右侧移动
            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);
        }
        this._reCalculateSides();
        // this.cdRef.detectChanges();
    }
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    scrollTabIntoView(index) {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        const tabIndex = parseInt(index + '', 10);
        /** @type {?} */
        let tabToScroll;
        // first we find the tab element.
        if (tabIndex >= 0) {
            /** @type {?} */
            const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
            if (allTabs.length > tabIndex) {
                tabToScroll = allTabs[tabIndex];
            }
        }
        else {
            // scroll selected tab into view
            /** @type {?} */
            const activeTab = this._tabContainerEl.querySelector('li.active');
            if (activeTab) {
                tabToScroll = activeTab;
            }
        }
        if (tabToScroll) {
            /** @type {?} */
            const tab_left = parseInt(tabToScroll.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            const tabs_left = parseInt(this._tabContainerEl.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            const rightPosition = tab_left +
                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -
                tabs_left;
            /** @type {?} */
            const leftPosition = tab_left - tabs_left - 10;
            if (leftPosition < 0) {
                this._scrollTab(leftPosition, -1);
            }
            else if (rightPosition > this._tabContainerEl.offsetWidth) {
                this._scrollTab(rightPosition - this._tabContainerEl.offsetWidth + 20, 1);
            }
        }
    }
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    getToolbarConf() {
        /** @type {?} */
        const tabConfig = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._active === true;
        }))[0];
        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {
            this.toolbarConf = null;
        }
        else {
            this.toolbarConf = tabConfig.toolbar;
        }
        // 记录状态
        this.changeState(this.visibleRecord, "visible");
        this.changeState(this.disableRecord, "disable");
        // 获取该tab下的头部扩展区域
        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {
            this.headerExtendConf = null;
        }
        else {
            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;
        }
        // 隐藏更多按钮
        this.toolbarDpHidden = true;
        this.cdRef.detectChanges();
    }
    /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    _calculateToolbarDropdownIsShow() {
        /** @type {?} */
        let headerExtendEl;
        /** @type {?} */
        let headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        if (!divEl) {
            return;
        }
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            this.renderer.removeStyle(headerExtendEl, 'overflow');
            headerExtendElWidth = headerExtendEl.offsetWidth;
        }
        // 按钮在内容区
        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {
            // 按钮在头部工具栏
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
        this.cdRef.detectChanges();
    }
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    _calculateButtonsShow() {
        /** @type {?} */
        let headerExtendEl;
        /** @type {?} */
        let headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        /** @type {?} */
        let btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        let btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('.btn--cal');
        if (!divEl || btnPlaceHolderBtns.length == 0) {
            return;
        }
        // 此处有个Bug，如果是inContent还是headerExtendConf的情况下，按钮的位置形如inHead
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;
        }
        /** @type {?} */
        const moreButton = btnPlaceHolderEl.parentElement.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        let basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        let basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;
        /** @type {?} */
        let toolbarDropdownHidden = true;
        /** @type {?} */
        let k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        let showBtns = divEl.querySelectorAll('.btn--cal');
        for (let i = 0; i < k; i++) {
            this.renderer.setStyle(showBtns[i], 'display', '');
        }
        for (let m = k; m < showBtns.length; m++) {
            this.renderer.setStyle(showBtns[m], 'display', 'none');
        }
        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {
            // 过滤显示按钮的个数
            /** @type {?} */
            let filterShowBtns = this.toolbarConf.contents.filter((/**
             * @param {?} item
             * @return {?}
             */
            (item) => this.getToolbarStateVisible(item)));
            // 从显示按钮中过滤下拉按钮
            this.inMoreButtonContents = filterShowBtns.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                return index >= k;
            }));
        }
        this.cdRef && !this.cdRef['destroyed'] && this.cdRef.detectChanges();
    }
    /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    _reCalculateAll() {
        if (!this._tabContainerEl) {
            return;
        }
        /** @type {?} */
        let tabParentWidth = this.tabParent.nativeElement.offsetWidth;
        if (!this.hideButtons) {
            /** @type {?} */
            const tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"));
            /** @type {?} */
            const tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"));
            tabParentWidth += tr + tl;
        }
        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;
        this.hideDropDown = this.showDropDown ? this.hideButtons : true;
        if (!this.hideButtons) {
            if (!this.hideDropDown) {
                this.dropdownTabs = [].concat(this.tabs);
            }
            if (this.searchTabText) {
                this.dropdownTabs = this.dropdownTabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    return item['title'].indexOf(this.searchTabText) !== -1;
                }));
            }
            this._reCalculateSides();
        }
        this.dpState = [false];
        this.cdRef.detectChanges();
    }
    /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    _reCalulateTooltips() {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        const t_right_tooltips = [];
        /** @type {?} */
        const t_left_tooltips = [];
        /** @type {?} */
        const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
        /** @type {?} */
        const len = allTabs.length;
        /** @type {?} */
        const hiddenTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return item._show !== true;
        }));
        /** @type {?} */
        const hiddenTabsLength = hiddenTabs.length;
        for (let i = 0; i < len; i++) {
            /** @type {?} */
            const leftPosition = allTabs[i].getBoundingClientRect().left -
                this._tabContainerEl.getBoundingClientRect().left;
            /** @type {?} */
            const rightPosition = allTabs[i].getBoundingClientRect().width + leftPosition;
            if (rightPosition > this._tabContainerEl.offsetWidth) {
                t_right_tooltips.push(this.tabs[i]);
            }
            else if (leftPosition < 0) {
                t_left_tooltips.push(this.tabs[i]);
            }
        }
        this.leftTooltipTabs = []
            .concat(t_left_tooltips)
            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));
        this.rightTooltipTabs = []
            .concat(t_right_tooltips)
            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));
        this.disableRTooltip = this.rightTooltipTabs.length < 1;
        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;
    }
    /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    _reCalculateSides() {
        this.disableRight =
            this._tabContainerEl.scrollLeft >=
                this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;
        this._reCalulateTooltips();
    }
    /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    _getTabById(id) {
        /** @type {?} */
        const indexWidthId = [];
        /** @type {?} */
        const tabsWithId = this.tabs.filter((/**
         * @param {?} tab
         * @param {?} index
         * @return {?}
         */
        (tab, index) => {
            if (tab.id === id) {
                indexWidthId.push(index);
                return true;
            }
            else {
                return false;
            }
        }));
        return {
            tab: tabsWithId.length ? tabsWithId[0] : null,
            index: indexWidthId.length ? indexWidthId[0] : -1
        };
    }
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    resolveSize(size) {
        /** @type {?} */
        const regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? `${parseInt(size, 10)}${size.match(regex)[0]}`
            : `${size}px`;
    }
    /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    hasInHeadCl() {
        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {
            return true;
        }
        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {
            return true;
        }
        return false;
    }
    /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    changeState(values, stateProp) {
        if (!this.toolbarConf || !this.toolbarConf.contents) {
            return;
        }
        /** @type {?} */
        const idArray = Object.keys(values);
        this.toolbarConf.contents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            (id) => id == item.id));
            if (findId) {
                item[stateProp] = values[findId];
            }
            if (item['children'] && item['children'].length > 0) {
                // 数据源只有一级的下拉
                /** @type {?} */
                let dpChildren = item.children;
                dpChildren.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                (item) => {
                    /** @type {?} */
                    const findId = idArray.find((/**
                     * @param {?} id
                     * @return {?}
                     */
                    (id) => id == item.id));
                    if (findId) {
                        item[stateProp] = values[findId];
                    }
                }));
            }
        }));
        this.inMoreButtonContents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            /** @type {?} */
            const findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            (id) => id == item.id));
            if (findId) {
                item[stateProp] = values[findId];
            }
            if (item['children'] && item['children'].length > 0) {
                // 数据源只有一级的下拉
                /** @type {?} */
                let dpChildren = item.children;
                dpChildren.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                (item) => {
                    /** @type {?} */
                    const findId = idArray.find((/**
                     * @param {?} id
                     * @return {?}
                     */
                    (id) => id == item.id));
                    if (findId) {
                        item[stateProp] = values[findId];
                    }
                }));
            }
        }));
        this.dpState = [false];
        this.cdRef && !this.cdRef['destroyed'] && this.cdRef.detectChanges();
    }
}
FarrisTabsComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-tabs',
                template: "<div #tabHeader class=\"farris-tabs-header\"\r\n    [class.farris-tabs-inHead]=\"hasInHeadCl()\"\r\n    [class.farris-tabs-inContent]=\"!hasInHeadCl()\"\r\n    [class.farris-tabs-nav-fill]=\"fill||tabType=='fill'\"\r\n    [class.farris-tabs-nav-pills]=\"tabType=='pills'\"\r\n    >\r\n    <div class=\"farris-tabs-title scroll-tabs\"\r\n        [ngStyle]=\"{'width': hasInHeadCl() ? (titleWidth?titleWidth + '%':null) : null}\">\r\n        <button type=\"button\" (disabled)=\"disableLeft\" class=\"btn sc-nav-btn px-1 sc-nav-lr\"\r\n            [ngClass]=\"{'d-none':hideButtons}\" #leftNav>\r\n        </button>\r\n        <div class=\"spacer f-utils-fill\" #tabParent\r\n            [ngClass]=\"{'spacer-sides':!hideButtons&& hideDropDown,'spacer-sides-dropdown':!hideButtons&&!hideDropDown}\"\r\n            style=\"width:100%;\">\r\n            <ul class=\"nav farris-nav-tabs flex-nowrap\" [class.nav-fill]=\"fill||tabType=='fill'\"\r\n                [class.flex-row]=\"position==='top'||position==='bottom'\"\r\n                [class.flex-column]=\"position==='left'||position==='right'\" [class.nav-pills]=\"tabType=='pills'\" #tabContainer>\r\n                <li class=\"nav-item\" *ngFor=\"let tab of tabs;index as tabIndex\"\r\n                    [ngClass]=\"{'d-none': tab._show !== true, 'f-state-active': tab.id === activeId, 'f-state-disabled': tab.disabled === true}\"\r\n                    [ngStyle]=\"{'width':tab.tabWidth+'px'}\">\r\n                    <a class=\"nav-link tabs-text-truncate\" #anchor [class.active]=\"tab.id === activeId\"\r\n                        [class.disabled]=\"tab.disabled\" (click)=\"_cpSelectTabByIndex($event,tab.id)\">\r\n                        <span class=\"st-tab-text\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [ngClass]=\"tab.titleCustomCls\" [tabTransclude]=\"tab.headingRef\"\r\n                            *ngIf=\"tab.headingRef\"></span>\r\n                        <span class=\"st-tab-text\" [ngbTooltip]=\"tab.title\" [referElement]=\"tabContainer\"\r\n                            [disableTooltip]=\"!tab.titleOverflow\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [class.farris-title-text-custom]=\"tab.titleOverflow\"\r\n                            *ngIf=\"!tab.headingRef\">{{tab.title}}</span>\r\n                        <span class=\"st-drop-close\" *ngIf=\"tab.removeable\">\r\n                            <i class=\"f-icon f-icon-close\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown (openChange)=\"openChange($event)\" >\r\n            <button type=\"button\"  (disabled)=\"disableRight\" class=\"btn sc-nav-rg\" [ngClass]=\"{'d-none':hideButtons}\"\r\n                #rightNav></button>\r\n            <button #dropDownButton class=\"btn dropdown-toggle-split \" ngbDropdownToggle\r\n                [ngClass]=\"{'d-none':hideDropDown}\">\r\n            </button>\r\n            <div class=\"dropdown-menu\" style=\"max-width: 300px;\" [class.tabs-pt28]=\"searchBoxVisible\" ngbDropdownMenu #ddm=\"DropdownMenu\">\r\n                <div (click)=\"stopBubble($event)\" class='pb-1 tabs-li-absolute' *ngIf=\"searchBoxVisible\">\r\n                    <input type=\"text\" class=\"form-control k-textbox\" [(ngModel)]=\"searchTabText\"\r\n                        (keyup)=\"searchTab($event)\" />\r\n                    <span class=\"f-icon f-icon-page-title-query tabs-icon-search\"></span>\r\n                </div>\r\n                <ul class=\"tab-dropdown-menu--items\" [ngStyle]=\"{'width':menuItemsWidth}\">\r\n                    <li class=\"dropdown-item text-truncate px-2\" *ngFor=\"let tab of dropdownTabs;index as tabIndex\"\r\n                        [ngClass]=\"{'disabled': tab.disabled, 'active': tab.id === activeId, 'd-none': tab._show !==true}\"\r\n                        (click)=\"_cpSelectTabByIndex($event,tab.id, ddm)\">\r\n                        <a class=\"dropdown-title\" style=\"\r\n                            text-overflow: ellipsis;white-space: nowrap;word-break: break-word;width: 100%;\">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class=\"farris-tabs-toolbar\" *ngIf=\"toolbarConf || headerExtendConf\">\r\n        <div class=\"farris-tabs-inline-flex\" *ngIf=\"toolbarConf\">\r\n            <ng-template ngFor let-btn [ngForOf]=\"toolbarConf.contents\" let-i=\"index\" [ngForTrackBy]=\"trackByButton\">\r\n                <ng-container  *ngIf=\"getToolbarStateVisible(btn)\">\r\n                    <ng-container *ngIf=\"!btn.children||btn.children.length==0\">\r\n                        <button class=\"btn--cal\" [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"  [disabled]=\"getToolbarStateDisable(btn)\"\r\n                        (click)=\"clickHandler(btn)\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                        <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"btn.children&&btn.children.length>0\">\r\n                        <ng-container *ngTemplateOutlet=\"dropdownTmpl; context: { $implicit: btn }\"></ng-container>\r\n                    </ng-container>  \r\n                </ng-container>              \r\n            </ng-template>\r\n        </div>\r\n         <ng-container *ngIf=\"!toolbarDpHidden&&inMoreButtonContents.length>0\">\r\n            <div class=\"btn-group f-btn-ml sc-nav-btn\" fDropdown #ddmore=\"fDropdown\"  [forceState]=\"dpState\"  [rectifyReference]=\"referEl\" [autoRectify]=\"true\">\r\n                    <button class=\"btn btn-secondary morebtn  dropdown-toggle\" fDropdownToggle >{{'tabs.more' | locale}}</button>\r\n                    <ul class=\"dropdown-menu\" fDropdownMenu id=\"more_menu\">\r\n                        <ng-container *ngFor=\"let item of inMoreButtonContents\">                                            \r\n                            <ng-container  *ngIf=\"getToolbarStateVisible(item)\">\r\n                                <ng-container *ngIf=\"item.children&&item.children.length>0\">\r\n                                    <ng-container *ngTemplateOutlet=\"dropdownSubTmpl;context: { $implicit: item}\"></ng-container>\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"!item.children||item.children.length==0\">\r\n                                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"getToolbarStateDisable(item)\"  (click)=\"clickHandler(item)\">\r\n                                        {{ item.title }}\r\n                                    </li>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ul>\r\n            </div> \r\n        </ng-container>             \r\n        <div *ngIf=\"headerExtendConf && headerExtendConf.templateRef\" class=\"farris-tabs-header-extend\"\r\n        [class.margin-right-14]=\"toolbarConf && toolbarConf.contents.length\"\r\n        [ngClass]=\"headerExtendConf && headerExtendConf.extendCls\">\r\n        <template [ngTemplateOutlet]=\"headerExtendConf.templateRef\"></template>\r\n    </div>\r\n    </div>\r\n    <!--\u8BA1\u7B97\u4F4D\u7F6E-->\r\n    <div class=\"farris-tabs-btn-placeholder\" *ngIf=\"toolbarConf\">\r\n        <div class=\"btn-group\"><button class=\"btn btn-secondary morebtn  dropdown-toggle\">{{'tabs.more' | locale}}</button></div>        \r\n        <div class=\"btn-placeholder--content\" #btnPlaceholder>\r\n            <ng-container *ngFor=\"let btn of toolbarConf.contents\">\r\n                <ng-container  *ngIf=\"getToolbarStateVisible(btn)\">                    \r\n                    <ng-container *ngIf=\"!btn.children||btn.children.length==0\">\r\n                        <button class=\"btn--cal\" [ngClass]=\"btn.appearance.class\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                        <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"btn.children&&btn.children.length>0\">\r\n                        <div class=\"btn-group btn--cal\" [ngClass]=\"btn.appearance?.dropdownCls\" >\r\n                            <ng-container *ngIf=\"btn.split\">\r\n                                <button type=\"button\" class=\"btn\" [ngClass]=\"btn.appearance?.class\" [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                                    <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{ btn.title }}\r\n                                </button>\r\n                            <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"btn.appearance?.class\"></button>\r\n                            </ng-container>\r\n                            <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n                            <ng-container *ngIf=\"!btn.split\">\r\n                                <button type=\"button\"  class=\"btn\" [ngClass]=\"btn.appearance?.class + ' dropdown-toggle'\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                                    <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{ btn.title }}\r\n                                </button>\r\n                                <i></i>\r\n                            </ng-container>\r\n                        </div>\r\n                    </ng-container>  \r\n                </ng-container> \r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!--\u7B2C\u4E00\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownTmpl let-data>\r\n    <div class=\"btn-group btn--cal\" id=\"{{ data.id }}\" [ngClass]=\"data.appearance?.dropdownCls\" fDropdown [rectifyReference]=\"referEl\"  [autoRectify]=\"true\">\r\n        <ng-container *ngIf=\"data.split\">\r\n            <button type=\"button\" class=\"btn\"  (click)=\"clickHandler(data)\" [ngClass]=\"data.appearance?.class\" [class.disabled]=\"getToolbarStateDisable(data)\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.title }}\r\n            </button>\r\n        <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"data.appearance?.class\" fDropdownToggle></button>\r\n        </ng-container>\r\n        <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"!data.split\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn\" [ngClass]=\"data.appearance?.class + ' dropdown-toggle'\"\r\n                [dpDisabled]=\"getToolbarStateDisable(data)\"  [class.btn-icontext]=\"data.icon&&data.icon.trim()\"   (click)=\"clickHandler(data)\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.title }}\r\n            </button>\r\n            <i></i>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu id=\"{{ data.id }}_menu\">\r\n            <ng-container *ngTemplateOutlet=\"dropMenuItem; context: { $implicit: data.children }\"></ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>\r\n<!--\u4E0B\u62C9\u5B50\u9879-->\r\n<ng-template #dropMenuItem let-data>\r\n    <ng-container *ngFor=\"let item of data\">\r\n        <ng-container *ngIf=\"getToolbarStateVisible(item)\">\r\n            <li class=\"dropdown-item\" id=\"{{ item.id }}\" [class.disabled]=\"getToolbarStateDisable(item)\"  (click)=\"clickHandler(item)\">\r\n                {{ item.title }}\r\n            </li>\r\n        </ng-container>\r\n    </ng-container>\r\n</ng-template>\r\n<!--\u7B2C\u4E8C\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownSubTmpl let-subData>\r\n    <li class=\"dropdown-submenu\" fDropdown [isSubDP]=\"true\" [placement]=\"'left-bottom'\" [autoRectify]=\"true\" [rectifyReference]=\"referEl\" id=\"{{ subData.id }}\">\r\n        <ng-container *ngIf=\"subData.split\">\r\n            <span class=\"dropdown-item\" [class.disabled]=\"getToolbarStateDisable(subData)\"  (click)=\"clickHandler(subData)\">{{ subData.title }}</span>\r\n            <span class=\"dropdown-toggle dropdown-toggle-split\" fDropdownToggle></span>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!subData.split\">\r\n            <span class=\"dropdown-item  dropdown-toggle\" [dpDisabled]=\"getToolbarStateDisable(subData)\"  (click)=\"clickHandler(subData)\" fDropdownToggle>{{ subData.title }}</span>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu id=\"{{ subData.id }}_submenu\">\r\n            <ng-container *ngTemplateOutlet=\"dropMenuItem; context: { $implicit: subData.children }\"></ng-container>\r\n        </ul>\r\n    </li>\r\n</ng-template>\r\n<ng-content></ng-content>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                styles: [".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;top:-30px;right:0;overflow:hidden;left:0;opacity:0;z-index:-90}.farris-tabs .farris-tabs-btn-placeholder .btn-placeholder--content{display:-webkit-inline-box;display:inline-flex;left:0;position:absolute}"]
            }] }
];
/** @nocollapse */
FarrisTabsComponent.ctorParameters = () => [
    { type: TabService },
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: NgZone }
];
FarrisTabsComponent.propDecorators = {
    tabType: [{ type: Input }],
    fill: [{ type: Input }],
    autoTitleWidth: [{ type: Input }],
    titleLength: [{ type: Input }],
    position: [{ type: Input }],
    showDropDown: [{ type: Input }],
    showTooltips: [{ type: Input }],
    scrollStep: [{ type: Input }],
    autoResize: [{ type: Input }],
    closeable: [{ type: Input }],
    selectId: [{ type: Input, args: ['value',] }],
    width: [{ type: Input }],
    height: [{ type: Input }],
    searchBoxVisible: [{ type: Input }],
    headerHeight: [{ type: Input, args: ['header-height',] }],
    contentDirection: [{ type: Input }],
    contentFill: [{ type: Input }],
    clickThrottleTime: [{ type: Input }],
    btnStates: [{ type: Input }],
    btnVisible: [{ type: Input }],
    tabs: [{ type: Input }],
    customClass: [{ type: Input }],
    titleWidth: [{ type: Input }],
    leftNav: [{ type: ViewChild, args: ['leftNav',] }],
    rightNav: [{ type: ViewChild, args: ['rightNav',] }],
    tabContainer: [{ type: ViewChild, args: ['tabContainer',] }],
    toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
    dropDownButton: [{ type: ViewChild, args: ['dropDownButton',] }],
    tabParent: [{ type: ViewChild, args: ['tabParent',] }],
    btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }],
    beforeSelect: [{ type: Input }],
    tabChange: [{ type: Output }],
    tabRemove: [{ type: Output }],
    ddm: [{ type: ViewChild, args: ['ddm',] }]
};
if (false) {
    /** @type {?} */
    FarrisTabsComponent.prototype.tabType;
    /** @type {?} */
    FarrisTabsComponent.prototype.fill;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoTitleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleLength;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchInputVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.showDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.showTooltips;
    /** @type {?} */
    FarrisTabsComponent.prototype.scrollStep;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoResize;
    /** @type {?} */
    FarrisTabsComponent.prototype.closeable;
    /** @type {?} */
    FarrisTabsComponent.prototype.selectId;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchBoxVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype._headerHeight;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentDirection;
    /** @type {?} */
    FarrisTabsComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickSubscription;
    /**
     * 因为生成器结构变更导致此处变更
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._disableStatesDatas;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._visibleDatas;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropDownButton;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabParent;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnPlaceHolder;
    /**
     * 选中tab 前事件
     * @type {?}
     */
    FarrisTabsComponent.prototype.beforeSelect;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabChange;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabRemove;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentFillStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._contentFill;
    /** @type {?} */
    FarrisTabsComponent.prototype.widthStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._width;
    /** @type {?} */
    FarrisTabsComponent.prototype.heightStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._height;
    /** @type {?} */
    FarrisTabsComponent.prototype._position;
    /** @type {?} */
    FarrisTabsComponent.prototype.positionStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.menuItemsWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.maxDropdownW;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._customClass;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.headerExtendConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisTabsComponent.prototype.inMoreButtonContents;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropdownTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideButtons;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLeft;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRight;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.el;
    /** @type {?} */
    FarrisTabsComponent.prototype.subscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftTooltipTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightTooltipTabs;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabContainerEl;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.maxTooltipLen;
    /** @type {?} */
    FarrisTabsComponent.prototype.activeId;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ro;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchTabText;
    /** @type {?} */
    FarrisTabsComponent.prototype.ddm;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._ddmHandler;
    /** @type {?} */
    FarrisTabsComponent.prototype.dpState;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.visibleRecord;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.disableRecord;
    /** @type {?} */
    FarrisTabsComponent.prototype.referEl;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabVisibleChanged;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.stService;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ngZone;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRhYnMvIiwic291cmNlcyI6WyJsaWIvdGFicy90YWJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUNILFNBQVMsRUFBb0MsS0FBSyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsdUJBQXVCLEVBQ2xHLGlCQUFpQixFQUFFLGlCQUFpQixFQUFpQixTQUFTLEVBQzlELFlBQVksRUFBRSxNQUFNLEVBQXNDLE1BQU0sRUFDbkUsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFnQixTQUFTLEVBQVksVUFBVSxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ25HLE9BQU8sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFVLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRWxHLE9BQU8sRUFBRSxVQUFVLEVBQWEsTUFBTSxnQkFBZ0IsQ0FBQztBQUl2RCxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFTdkQsTUFBTSxPQUFPLG1CQUFtQjs7Ozs7Ozs7SUFxUDVCLFlBQ1ksU0FBcUIsRUFDckIsVUFBc0IsRUFDdEIsUUFBbUIsRUFDbkIsS0FBd0IsRUFDeEIsTUFBYztRQUpkLGNBQVMsR0FBVCxTQUFTLENBQVk7UUFDckIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLFVBQUssR0FBTCxLQUFLLENBQW1CO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQVE7UUF2UGpCLFlBQU8sR0FBbUIsRUFBRSxDQUFDOztRQUU3QixTQUFJLEdBQUcsS0FBSyxDQUFDOztRQUViLG1CQUFjLEdBQUcsS0FBSyxDQUFDOztR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OztJQUV6QixzQ0FBZTs7SUFJZixnREFBa0M7Ozs7O0lBRzlCLHdDQUE2Qjs7Ozs7SUFDN0IseUNBQThCOzs7OztJQUM5Qix1Q0FBMkI7Ozs7O0lBQzNCLG9DQUFnQzs7Ozs7SUFDaEMscUNBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBJbnB1dCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICAgIENoYW5nZURldGVjdG9yUmVmLCBWaWV3RW5jYXBzdWxhdGlvbiwgQWZ0ZXJWaWV3SW5pdCwgVmlld0NoaWxkLCBPbkRlc3Ryb3ksIEFmdGVyQ29udGVudENoZWNrZWQsXHJcbiAgICBFdmVudEVtaXR0ZXIsIE91dHB1dCwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgTmdab25lXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgZnJvbUV2ZW50LCBpbnRlcnZhbCwgT2JzZXJ2YWJsZSwgb2YsIEJlaGF2aW9yU3ViamVjdCwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyB0YWtlVW50aWwsIG1hcCwgc2Nhbiwgc3dpdGNoTWFwLCB0YWtlV2hpbGUsIGNvbmNhdCwgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHsgVGFiU2VydmljZSwgVGFiQ29uZmlnIH0gZnJvbSAnLi4vdGFicy5jb25maWcnO1xyXG5pbXBvcnQgeyBUYWJzQ2hhbmdlRXZlbnQsIFRhYnNSZW1vdmVUYWJFdmVudCB9IGZyb20gJy4uL3RhYnMuZXZlbnRzJztcclxuaW1wb3J0IHsgRmFycmlzVGFiQ29tcG9uZW50IH0gZnJvbSAnLi4vdGFiL3RhYi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBUb29sYmFyQ29uZixUb29sYmFyQ29udGVudHNDb25mfSBmcm9tICcuLi90b29sYmFyLmNvbmZpZyc7XHJcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5pbXBvcnQgeyBOZ2JEcm9wZG93bk1lbnUgfSBmcm9tICcuLi9kcm9wZG93bi9kcm9wZG93bic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRhYnMnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RhYnMuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFicy5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGYXJyaXNUYWJzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIEFmdGVyVmlld0luaXQsXHJcbiAgICBPbkRlc3Ryb3ksIEFmdGVyQ29udGVudEluaXQsIEFmdGVyQ29udGVudENoZWNrZWQsIEFmdGVyVmlld0NoZWNrZWQge1xyXG5cclxuICAgIEBJbnB1dCgpIHRhYlR5cGU6J2ZpbGwnfCdwaWxscyd8Jyc9Jyc7XHJcbiAgICAvLyDmlK/mjIHmoIfnrb7pobXloavlhYVcclxuICAgIEBJbnB1dCgpIGZpbGwgPSBmYWxzZTtcclxuICAgIC8vIOaUr+aMgeagh+etvumhteagh+mimOiHqumAguW6lOWuveW6pi1cclxuICAgIEBJbnB1dCgpIGF1dG9UaXRsZVdpZHRoID0gZmFsc2U7XHJcbiAgICAvLyDmoIfpopjplb/luqblpKfkuo7nrYnkuo7lpJrlsJHlrZfnrKbvvIzlkK/nlKjmuJDlj5jmoLflvI/igJTigJTlsZ7mgKflup/lvINcclxuICAgIEBJbnB1dCgpIHRpdGxlTGVuZ3RoID0gNztcclxuICAgIHNlYXJjaElucHV0VmlzaWJsZTogYm9vbGVhbjtcclxuICAgIC8vIHRhYumhteS9jee9riDkuIrkuIvlt6blj7NcclxuICAgIEBJbnB1dCgpIHNldCBwb3NpdGlvbih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uU3RhdGVzLm5leHQodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBvc2l0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICAgIH1cclxuICAgIC8vIOaYr+WQpuWQr+eUqOS4i+aLieahhlxyXG4gICAgQElucHV0KCkgc2hvd0Ryb3BEb3duO1xyXG4gICAgLy8g5piv5ZCm5ZCv55So5o+Q56S65L+h5oGvLS0t5pyq6KKr5L2/55SoXHJcbiAgICBASW5wdXQoKSBzaG93VG9vbHRpcHM7XHJcbiAgICAvLyDngrnlh7vml7bmu5rliqjmraXplb9cclxuICAgIEBJbnB1dCgpIHNjcm9sbFN0ZXA7XHJcbiAgICAvLyDmmK/lkKboh6rliqjph43mlrDlrr3luqYtLS3mnKrooqvkvb/nlKhcclxuICAgIEBJbnB1dCgpIGF1dG9SZXNpemU7XHJcbiAgICAvLyDorr7nva7lj6/lhbPpl63moIfnrb7pobUtLS3mnKrooqvkvb/nlKhcclxuICAgIEBJbnB1dCgpIGNsb3NlYWJsZTogYm9vbGVhbjtcclxuICAgIC8vIOiuvue9ruWPr+mAieS4reagh+etvumhtVxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWlucHV0LXJlbmFtZVxyXG4gICAgQElucHV0KCd2YWx1ZScpIHNlbGVjdElkOiBzdHJpbmc7XHJcbiAgICAvLyB0YWJz5a695bqm5ZKM6auY5bqmXHJcbiAgICBASW5wdXQoKSBzZXQgd2lkdGgodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX3dpZHRoID0gdGhpcy5yZXNvbHZlU2l6ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy53aWR0aFN0YXRlcy5uZXh0KHRoaXMuX3dpZHRoKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIHNldCBoZWlnaHQodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHRoaXMucmVzb2x2ZVNpemUodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0U3RhdGVzLm5leHQodGhpcy5faGVpZ2h0KTtcclxuICAgIH1cclxuICAgIC8vIOaQnOe0ouahhuaYr+WQpuaYvuekulxyXG4gICAgQElucHV0KCkgc2VhcmNoQm94VmlzaWJsZSA9IHRydWU7XHJcbiAgICAvLyDmoIfnrb7pobXpq5jluqYtLS0tLeacquiiq+S9v+eUqFxyXG4gICAgX2hlYWRlckhlaWdodDogc3RyaW5nIHwgbnVtYmVyO1xyXG4gICAgQElucHV0KCdoZWFkZXItaGVpZ2h0JylcclxuICAgIGdldCBoZWFkZXJIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlYWRlckhlaWdodDtcclxuICAgIH1cclxuICAgIHNldCBoZWFkZXJIZWlnaHQoaGVhZGVySGVpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5faGVhZGVySGVpZ2h0ID0gdGhpcy5yZXNvbHZlU2l6ZShoZWFkZXJIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWGheWuueaYr+WQpuaYr2ZsZXgg5a655ZmoIOeUqOS6juWGhemDqOWtkOWFg+e0oGZsZXgtLS0tLeacquiiq+S9v+eUqFxyXG4gICAgQElucHV0KCkgY29udGVudERpcmVjdGlvbiA9ICdjb2x1bW4nO1xyXG4gICAgLy8g5YaF5a655piv5ZCm5aGr5YWFICDpu5jorqTmmK/kuI3loavlhYVcclxuICAgIEBJbnB1dCgpIHNldCBjb250ZW50RmlsbCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRGaWxsID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsbFN0YXRlcy5uZXh0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIGNsaWNrVGhyb3R0bGVUaW1lID0gMzUwO1xyXG4gICAgcHJpdmF0ZSBjbGlja0l0ZW1zID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgcHJpdmF0ZSBjbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gLyoqXHJcbiAgKiDlm6DkuLrnlJ/miJDlmajnu5PmnoTlj5jmm7Tlr7zoh7TmraTlpITlj5jmm7RcclxuICAqL1xyXG4gIHByaXZhdGUgIF9kaXNhYmxlU3RhdGVzRGF0YXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+PiA9XHJcbiAgICBuZXcgU3ViamVjdCgpO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGJ0blN0YXRlcyh2YWx1ZXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+Pikge1xyXG4gICAgICBpZiAodmFsdWVzKSB7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRlc0RhdGFzICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRlc0RhdGFzLmhhc093blByb3BlcnR5KFwidW5zdWJzY3JpYmVcIilcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0ZXNEYXRhc1tcInVuc3Vic2NyaWJlXCJdKCk7XHJcbiAgICAgICAgICB9ICAgICAgICAgICBcclxuICAgICAgICAgIHRoaXMuX2Rpc2FibGVTdGF0ZXNEYXRhcyA9IHZhbHVlczsgICAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy5kaXNhYmxlU3RhdGVCaW5kKCk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgLy8g5oyJ54Wn5LmL5YmN55qE6YC76L6R77yM5aaC5p6c5rKh5pyJ5om+5Yiwa2V577yM5bCx6K+05piO5Y+v6KeBXHJcbiAgcHJpdmF0ZSAgX3Zpc2libGVEYXRhczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+ID1cclxuICAgICAgIG5ldyBTdWJqZWN0KCk7XHJcbiAgIC8vIOaYr+WQpuWPr+ingeeahOeKtuaAgVxyXG4gICBASW5wdXQoKVxyXG4gICBzZXQgYnRuVmlzaWJsZSh2YWx1ZXM6IE9ic2VydmFibGU8QXJyYXk8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+Pikge1xyXG4gICAgICAgaWYgKHZhbHVlcykge1xyXG4gICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzICYmXHJcbiAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcy5oYXNPd25Qcm9wZXJ0eShcInVuc3Vic2NyaWJlXCIpXHJcbiAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhc1tcInVuc3Vic2NyaWJlXCJdKCk7XHJcbiAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzID0gdmFsdWVzOyAgICAgICAgICAgXHJcbiAgICAgICAgICAgdGhpcy52aXNpYmxlU3RhdGVCaW5kKCk7XHJcbiAgICAgICB9XHJcbiAgIH1cclxuXHJcbiAgICAvLyDmiYDmnInmoIfnrb7mlbDmja5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgdGFicygpOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYnM7XHJcbiAgICB9XHJcbiAgICBzZXQgdGFicyh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3RhYnMgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IGN1c3RvbUNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUNsYXNzO1xyXG4gICAgfVxyXG4gICAgc2V0IGN1c3RvbUNsYXNzKGN1c3RvbUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXN0b21DbGFzcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbUNsYXNzLnNwbGl0KCcgJykuZm9yRWFjaCgoY3NzQ2xhc3M6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLCBjc3NDbGFzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY3VzdG9tQ2xhc3MgPSBjdXN0b21DbGFzcyA/IGN1c3RvbUNsYXNzLnRyaW0oKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsIGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5bem5L6n5omA5pyJ5qCH562+55qE5a695bqm5ZKMLOeZvuWIhuavlFxyXG4gICAgQElucHV0KCkgdGl0bGVXaWR0aCA9IDA7XHJcbiAgICBAVmlld0NoaWxkKCdsZWZ0TmF2JykgbGVmdE5hdjtcclxuICAgIEBWaWV3Q2hpbGQoJ3JpZ2h0TmF2JykgcmlnaHROYXY7XHJcbiAgICBAVmlld0NoaWxkKCd0YWJDb250YWluZXInKSB0YWJDb250YWluZXI7XHJcbiAgICBAVmlld0NoaWxkKCd0b29sYmFyQ29udGFpbmVyJykgdG9vbGJhckNvbnRhaW5lcjtcclxuICAgIEBWaWV3Q2hpbGQoJ2Ryb3BEb3duQnV0dG9uJykgZHJvcERvd25CdXR0b247XHJcbiAgICBAVmlld0NoaWxkKCd0YWJQYXJlbnQnKSB0YWJQYXJlbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdidG5QbGFjZWhvbGRlcicpIGJ0blBsYWNlSG9sZGVyO1xyXG5cclxuICAgIC8qKiDpgInkuK10YWIg5YmN5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBiZWZvcmVTZWxlY3Q6IChlOiBUYWJzQ2hhbmdlRXZlbnQpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBAT3V0cHV0KCkgdGFiQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJzQ2hhbmdlRXZlbnQ+KCk7XHJcbiAgICBAT3V0cHV0KCkgdGFiUmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJzUmVtb3ZlVGFiRXZlbnQ+KCk7XHJcblxyXG4gICAgZ2V0IGRpcmVjdGlvbigpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY29sdW1uJztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnY29sdW1uLXJldmVyc2UnO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncm93JztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdyb3ctcmV2ZXJzZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaXoOeUqO+8jOWFvOWuuVxyXG4gICAgZ2V0IHRhYkRpcmVjdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcgfHwgdGhpcy5wb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdyb3cnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wb3NpdGlvbiA9PT0gJ2xlZnQnIHx8IHRoaXMucG9zaXRpb24gPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOWGheWuueWhq+WFheeKtuaAgVxyXG4gICAgY29udGVudEZpbGxTdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcclxuICAgIC8vIOWGheWuueaYr+WQpuWhq+WFhSzpu5jorqTkuI3loavlhYVcclxuICAgIF9jb250ZW50RmlsbDogYW55O1xyXG4gICAgLy8g5a695bqm54q25oCBXHJcbiAgICB3aWR0aFN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihmYWxzZSk7XHJcbiAgICAvLyB0YWJz5a695bqmXHJcbiAgICBfd2lkdGg6IGFueTtcclxuICAgIC8vIOmrmOW6pueKtuaAgVxyXG4gICAgaGVpZ2h0U3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KGZhbHNlKTtcclxuICAgIC8vIHRhYnPlrr3luqZcclxuICAgIF9oZWlnaHQ6IGFueTtcclxuICAgIC8vIHRhYnPmoIfpopjkvY3nva5cclxuICAgIF9wb3NpdGlvbjogYW55O1xyXG4gICAgcG9zaXRpb25TdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4oJ3RvcCcpO1xyXG4gICAgbWVudUl0ZW1zV2lkdGggPSAnYXV0byc7XHJcbiAgICAvL21heERyb3Bkb3duSCA9IDIwMDsgLS0tLS3mnKrooqvkvb/nlKhcclxuICAgIC8vIOS4i+aLieWIl+ihqOacgOWkp+WuveW6pu+8miDpnZ7mraPlgLzooajmmI7mmK/kuI3pmZDliLblrr3luqYgLS0tLS3mnKrooqvkvb/nlKhcclxuICAgIG1heERyb3Bkb3duVyA9IC0xO1xyXG4gICAgcHJpdmF0ZSBfY3VzdG9tQ2xhc3MgPSAnJztcclxuICAgIC8vIOagh+etvuWtmOWCqOWIl+ihqFxyXG4gICAgcHJpdmF0ZSBfdGFiczogRmFycmlzVGFiQ29tcG9uZW50W10gPSBbXTtcclxuXHJcbiAgICBoZWFkZXJFeHRlbmRDb25mOiBhbnk7XHJcbiAgICAvLyDlt6XlhbfmnaHmmL7npLrnm7jlhbPphY3nva5cclxuICAgIHRvb2xiYXJDb25mOiBUb29sYmFyQ29uZiA9IHtcclxuICAgICAgICBwb3NpdGlvbjogJycsXHJcbiAgICAgICAgY29udGVudHM6IFtdXHJcbiAgICB9O1xyXG4gICAgLy8g5bel5YW35p2h5Y+z5L6n5bCP5LiL5ouJ5qGG5piv5ZCm5pi+56S6XHJcbiAgICB0b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgLy8g5bel5YW35p2h4oCc5pu05aSa4oCd6YeM55qE5oyJ6ZKuXHJcbiAgICBpbk1vcmVCdXR0b25Db250ZW50czogYW55W10gPSBbXTtcclxuICAgIC8vIOaYvuekuuS4i+aLieaVsOaNrlxyXG4gICAgZHJvcGRvd25UYWJzID0gW107XHJcbiAgICAvLyDpmpDol4/lt6blj7Pmu5rliqjnrq3lpLTmjInpkq5cclxuICAgIGhpZGVCdXR0b25zID0gdHJ1ZTtcclxuICAgIC8vIOWNleS4quagh+etvumhteagh+mimOeahOWuveW6plxyXG4gICAgdGFiV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICAvLyDpmpDol4/kuIvmi4lcclxuICAgIGhpZGVEcm9wRG93biA9IHRydWU7XHJcbiAgICAvLyDnpoHnlKjlt6bnrq3lpLRcclxuICAgIGRpc2FibGVMZWZ0ID0gZmFsc2U7XHJcbiAgICAvLyDnpoHnlKjlj7Pnrq3lpLRcclxuICAgIGRpc2FibGVSaWdodCA9IGZhbHNlO1xyXG4gICAgLy8g5b2T5YmN5qC35byPXHJcbiAgICBwcml2YXRlIGVsOiBIVE1MRWxlbWVudDtcclxuICAgIC8vIOiusOW9leS6i+S7tua1gVxyXG4gICAgc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgLy8g56aB55So5Y+z5L6n5o+Q56S6XHJcbiAgICBkaXNhYmxlUlRvb2x0aXAgPSB0cnVlO1xyXG4gICAgLy8g56aB55So5bem5L6n5o+Q56S6XHJcbiAgICBkaXNhYmxlTFRvb2x0aXAgPSB0cnVlO1xyXG4gICAgLy8g5bem5L6n5o+Q56S65pWw5o2uXHJcbiAgICBsZWZ0VG9vbHRpcFRhYnMgPSBbXTtcclxuICAgIC8vIOWPs+S+p+aPkOekuuaVsOaNrlxyXG4gICAgcmlnaHRUb29sdGlwVGFicyA9IFtdO1xyXG4gICAgLy8g5YaF6YOo5aSE55CG5qCH6K6wVGFi5qCH562+XHJcbiAgICBwcml2YXRlIF90YWJDb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1heFRvb2x0aXBMZW4gPSA1O1xyXG4gICAgLy8g5qCH6K6w5b2T5YmNVGFi5qCH562+XHJcbiAgICBhY3RpdmVJZCA9ICcnO1xyXG4gICAgcHJpdmF0ZSBybzogUmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgLy8g5pCc57SidGFi5qGG55qE5YC8XHJcbiAgICBzZWFyY2hUYWJUZXh0OiBzdHJpbmc7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnZGRtJykgZGRtOiBOZ2JEcm9wZG93bk1lbnU7XHJcblxyXG4gICAgcHJpdmF0ZSBfZGRtSGFuZGxlcjogYW55ID0gbnVsbDtcclxuICAgIC8vIOW9k+WuveW6puaUueWPmOaXtu+8jOW8uuWItuaUtui1t+S4i+aLieiPnOWNlSBcclxuICAgIGRwU3RhdGUgPSBbZmFsc2VdO1xyXG4gICAgLy8g5ZyodG9vbGJhcuS4jeWtmOWcqOeahOaXtuWAmeWFiOiusOW9lXZpc2libGXlj5jljJbnmoTlnLDmlrlcclxuICAgIHByaXZhdGUgdmlzaWJsZVJlY29yZD17fTtcclxuICAgIHByaXZhdGUgZGlzYWJsZVJlY29yZD17fTtcclxuICAgIC8vIOS4i+aLieiPnOWNleeahOWPgueFp+WFg+e0oFxyXG4gICAgcmVmZXJFbCA9IG51bGw7XHJcbiAgICB0cmFja0J5QnV0dG9uKGluZGV4OiBudW1iZXIsIGJ0bjogYW55KTogbnVtYmVyIHsgcmV0dXJuIGJ0bi5pZDsgfTtcclxuXHJcblxyXG4gICAgdGFiVmlzaWJsZUNoYW5nZWQgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgc3RTZXJ2aWNlOiBUYWJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGlmICh0aGlzLmVsLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZlckVsID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZlcmlmeUNvbmZpZygpO1xyXG5cclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5wdXNoKHRoaXMudGFiVmlzaWJsZUNoYW5nZWQuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDpqozor4HkvKDpgJLlj4LmlbAgKi9cclxuICAgIHByaXZhdGUgdmVyaWZ5Q29uZmlnKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZzogVGFiQ29uZmlnID0gdGhpcy5zdFNlcnZpY2UuZ2V0Q29uZmlnKCk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsU3RlcCA9IHBhcnNlSW50KHRoaXMuc2Nyb2xsU3RlcCArICcnLCAxMCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24gPSB0aGlzLmNsaWNrSXRlbXMucGlwZShkZWJvdW5jZVRpbWUodGhpcy5jbGlja1Rocm90dGxlVGltZSkpXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGJ0bkluZm86VG9vbGJhckNvbnRlbnRzQ29uZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJ0bkluZm8uY2xpY2smJnR5cGVvZiBidG5JbmZvLmNsaWNrPT0nZnVuY3Rpb24nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuSW5mby5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbCA9IHRoaXMudGFiQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlU3RyZWFtKCk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRoaXMuc2VsZWN0SWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5nWm9uZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ybyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8gPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvLm9ic2VydmUodGhpcy5lbC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOino+WGs+aMiemSruiwg+aVtOmakOiXj+eKtuaAgeS5i+WQju+8jOS4i+aLieS4reiDveaYvuekuueahOaMiemSruacieWkmuWwkVxyXG4gICAgICAgICAqL1xyXG4gICAgcHJpdmF0ZSB2aXNpYmxlU3RhdGVCaW5kKCl7XHJcbiAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAvLyDop6PlhrPliIfmjaLml7bvvIzmjInpkq7nirbmgIHmsqHooqvorrDlvZXnmoTpl67pophcclxuICAgICAgICAgICAgY29uc3QgaWRBcnJheSA9IE9iamVjdC5rZXlzKGRhdGEpO1xyXG4gICAgICAgICAgICBpZEFycmF5LmZvckVhY2goKGJ0bklkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSZWNvcmRbYnRuSWRdPWRhdGFbYnRuSWRdO1xyXG4gICAgICAgICAgICB9KTsgIFxyXG4gICAgICAgICAgICBpZih0aGlzLnRvb2xiYXJDb25mJiZ0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgIC8vIOiwg+aVtOaMiemSruWPr+ingeeKtuaAgSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShkYXRhLFwidmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIC8vIOmHjeaWsOiuoeeul1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkaXNhYmxlU3RhdGVCaW5kKCl7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRlc0RhdGFzLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAvLyDop6PlhrPliIfmjaLml7bvvIzmjInpkq7nirbmgIHmsqHooqvorrDlvZXnmoTpl67pophcclxuICAgICAgICAgICAgY29uc3QgaWRBcnJheSA9IE9iamVjdC5rZXlzKGRhdGEpO1xyXG4gICAgICAgICAgICBpZEFycmF5LmZvckVhY2goKGJ0bklkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVSZWNvcmRbYnRuSWRdPWRhdGFbYnRuSWRdO1xyXG4gICAgICAgICAgICB9KTsgIFxyXG4gICAgICAgICAgICBpZih0aGlzLnRvb2xiYXJDb25mJiZ0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgIC8vIOiwg+aVtOaMiemSruWPr+ingeeKtuaAgSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShkYXRhLFwiZGlzYWJsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlc1snc2VsZWN0SWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihjaGFuZ2VzWydzZWxlY3RJZCddLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIOagh+etvumhteWGheWuueWIneWni+WMliAqL1xyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQgeyB9XHJcbiAgICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICAvLyDkuLrkuoblhbzlrrnlvITml6fooajljZXvvIzkuI3lhbzlrrlIb3N0QmluZGluZywg6YCa6L+H6L+95YqgY2xhc3PnmoTmlrnlvI/lrp7njrBcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmYXJyaXMtdGFicycpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsbFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmLXRhYnMtY29udGVudC1maWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndpZHRoU3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbCwgJ3dpZHRoJywgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhlaWdodFN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZWwsICdoZWlnaHQnLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25TdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdycpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LWNvbHVtbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsICdmbGV4LXJvdy1yZXZlcnNlJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1yb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ3RvcCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGEgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93LXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uLXJldmVyc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOWFvOWuuee7k+adn1xyXG4gICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIHRoaXMuX3NldEFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZVRpdGxlU3R5bGUoKTtcclxuICAgICAgICB0aGlzLl9saXN0ZW5TaG93Q2hhbmdlcygpO1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vIHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vICAgICBpZiAoc2VsZi5zZWFyY2hJbnB1dFZpc2libGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuZmFycmlzLXRhYnMtaGVhZGVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGRtICYmIHRoaXMuZGRtLmRyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICAvLyDnu4Tku7bplIDmr4Hml7YgIOWPlua2iOaJgOacieS6i+S7tuiuoumYhVxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLmZvckVhY2goc3ViID0+IHtcclxuICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yby51bm9ic2VydmUodGhpcy5lbC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kZG1IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RkbUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNsaWNrU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgJiZcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzLmhhc093blByb3BlcnR5KFwidW5zdWJzY3JpYmVcIilcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzW1widW5zdWJzY3JpYmVcIl0oKTtcclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGlja0hhbmRsZXIoYnRuSW5mbykge1xyXG4gICAgICAgIGlmICghYnRuSW5mbykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGJ0bkluZm8uaGFzT3duUHJvcGVydHkoJ2Rpc2FibGUnKSYmYnRuSW5mb1snZGlzYWJsZSddKXtcclxuICAgICAgICAgICAgLy8g5aaC5p6c56aB55So5bCx5LiN6Kem5Y+R54K55Ye75LqL5Lu2XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja0l0ZW1zLm5leHQoYnRuSW5mbyk7XHJcbiAgICB9XHJcbiAgICAvLyDmm7TlpJp0YWLnmoTmmL7npLrpmpDol49cclxuICAgIG9wZW5DaGFuZ2UoZSkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXRWaXNpYmxlID0gZTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRhYlRleHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAvLyDlkK/nlKjkuobmkJzntKLvvIzpnIDopoHliKTmlq3kuIvmi4npnaLmnb/nmoTlgLxcclxuICAgICAgICAvLyDlm6DkuLrkuIvmi4npnaLmnb/lj6/og73lrZjlnKjpga7mjKHnmoTpl67pophcclxuICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1dpZHRoID0gdGhpcy5kZG0ucmVzZXRNZW51RWxXaWR0aE9wZW4oKSArICdweCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNXaWR0aCA9ICdhdXRvJztcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy8g5pCc57SidGFiXHJcbiAgICBzZWFyY2hUYWIoZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcEJ1YmJsZShlKTtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgfVxyXG4gICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICBzdG9wQnViYmxlKGUpIHtcclxuICAgICAgICBpZiAoZSAmJiBlLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogWGltZW5hIDIzLjA4LjMwIOWIpOaWreaYr+WQpuWPr+ingSzni6znq4vlh7rmnaVcclxuICAgICAqIFRvZG86XHJcbiAgICAgKiAx44CB546w5ZyoYnRuVmlzaWJsZeavj+asoeeahOWPmOabtOmDveaYr+WFqOmHj++8jOaYr+WQpumcgOimgeiusOW9leavj+asoeWPmOabtO+8jOeEtuWQjuWQiOW5tuiuoeeul++8n1xyXG4gICAgICogMuOAgeeOsOWcqOWIpOaWreaYr+WQpuWPr+ingeeahOaWueazle+8jOaYr+ebtOaOpeabtOaWsOeVjOmdoueahO+8jOavj+S4quaMiemSruS4iumDvee7keWumuS6hui/meS4quaWueazle+8jOS8muacieaAp+iDvemXrumimOOAguW6lOivpeaUueaIkOWkhOeQhuWcqOe7keWumueahOaJgOacieaVsOaNru+8jOeEtuWQjuabtOaWsOeVjOmdouOAglxyXG4gICAgICogM+OAgeaYr+WQpuWPr+ingeWSjOemgeeUqOacieWQjOagt+eahOmXrumimFxyXG4gICAgICogQHBhcmFtIGlkIFxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIGdldFRvb2xiYXJTdGF0ZVZpc2libGUoYnRuSXRlbSkge1xyXG4gICAgICAgIGxldCBzdGF0ZVByb3A9XCJ2aXNpYmxlXCI7XHJcbiAgICAgICAgaWYgKGJ0bkl0ZW0uaGFzT3duUHJvcGVydHkoc3RhdGVQcm9wKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRuSXRlbVtzdGF0ZVByb3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDkuI3lrZjlnKjlsZ7mgKdcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGdldFRvb2xiYXJTdGF0ZURpc2FibGUoYnRuSXRlbSkge1xyXG4gICAgICAgIGxldCBzdGF0ZVByb3A9XCJkaXNhYmxlXCI7XHJcbiAgICAgICAgaWYgKGJ0bkl0ZW0uaGFzT3duUHJvcGVydHkoc3RhdGVQcm9wKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRuSXRlbVtzdGF0ZVByb3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDkuI3lrZjlnKjlsZ7mgKdcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPquWkhOeQhuaYr+WQpuemgeeUqFxyXG4gICAgICogQHBhcmFtIGlkIFxyXG4gICAgICogQHBhcmFtIHN0YXRlIFxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIGdldFRvb2xiYXJTdGF0ZShpZDogc3RyaW5nLCBzdGF0ZTogT2JzZXJ2YWJsZTxhbnk+ID0gdGhpcy5idG5TdGF0ZXMpIHtcclxuICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBtYXAoKG46IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuW2lkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybihg5pyq5om+SUTkuLrvvJoke2lkfSDnm7jlhbPnirbmgIHorr7nva7vvIFgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltpZF07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDnm5HlkKzlrZDnu4Tku7bnmoTpmpDol4/mmL7npLrlsZ7mgKdcclxuICAgIHByaXZhdGUgX2xpc3RlblNob3dDaGFuZ2VzKCkge1xyXG4gICAgICAgIC8vIOWmguaenOmakOiXj+eahOe7hOS7tuaYr+a/gOa0u+eKtuaAge+8jOWFiOWwhuWFtuiuvue9ruS4uuW4uOinhFxyXG4gICAgICAgIHRoaXMudGFicy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnNob3dTdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUlkVG9rZW47XHJcbiAgICAgICAgICAgICAgICBpdGVtLl9zaG93ID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBmYWxzZSAmJiBpdGVtLmlkID09PSB0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5fYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUlkVG9rZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhYnMgPSB0aGlzLnRhYnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5fc2hvdyA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VGFiSWQgPSB0YWJzLmxlbmd0aCA/IHRhYnNbMF0uaWQgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8g54S25ZCO5bCG5pi+56S654q25oCB5LiL55qE56ys5LiA5LiqdGFi5r+A5rS7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFRhYklkICYmIGFjdGl2ZUlkVG9rZW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSBkZWZhdWx0VGFiSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSBpdGVtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4XS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5LitVGFiXHJcbiAgICAgKiBAcGFyYW0gIHRhYklkIHRhYuagh+ivhlxyXG4gICAgICovXHJcbiAgICBzZWxlY3RUYWIodGFiSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGFiID0gdGhpcy5fZ2V0VGFiQnlJZCh0YWJJZCk7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0VGFiKHNlbGVjdGVkVGFiLnRhYiwgc2VsZWN0ZWRUYWIuaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgX2NwU2VsZWN0VGFiQnlJbmRleChldjogRXZlbnQsIGlkOiBzdHJpbmcsIGRkbSA9IG51bGwpIHtcclxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldEVMID0gZXYudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRhcmdldEVMLmNsYXNzTmFtZS5pbmRleE9mKCdzdC1kcm9wLWNsb3NlJykgPiAtMSB8fFxyXG4gICAgICAgICAgICB0YXJnZXRFTC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKCdzdC1kcm9wLWNsb3NlJykgPiAtMVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICAvLyDpmLvmraLlhpLms6HlkozmjZXojrfkuovku7Yg54K55Ye75Yig6Zmk5qCH6K6wIOWImeaJp+ihjOWIoOmZpOagh+etvuaWueazlSAg6ICM5LiN5piv6YCJ5Lit5qCH562+XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VUYWIoaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICB0aGlzLmNkUmVmLm1hcmtGb3JDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuXHJcbiAgICAgICAgaWYgKGRkbSkge1xyXG4gICAgICAgICAgICBkZG0uZHJvcGRvd24uY2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+HdGFic+eahOe0ouW8lemAieaLqSB0YWJcclxuICAgICAqIEBwYXJhbSBpbmRleCB0YWJz57Si5byVXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFRhYkJ5SW5kZXgoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy50YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RUYWIgPSB0aGlzLnRhYnNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RUYWIoc2VsZWN0VGFiLCBpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyog6YCJ5LitdGFi5pe2ICDmmrTpnLLlh7rpgInkuK10YWLnmoRpZCDlkozlhbbkuYvlkI7nmoRpZCAqL1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0VGFiKHRhYiwgaW5kZXgpIHtcclxuICAgICAgICBpZiAodGFiICYmICF0YWIuZGlzYWJsZWQgJiYgdGhpcy5hY3RpdmVJZCAhPT0gdGFiLmlkKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYmVmb3JlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZVNlbGVjdCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YWJzQ2hhbmdlRXZlbnRQYXJhbSA9IHtcclxuICAgICAgICAgICAgICAgIHByZXZJZDogdGhpcy5hY3RpdmVJZCxcclxuICAgICAgICAgICAgICAgIG5leHRJZDogdGFiLmlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0KHRhYnNDaGFuZ2VFdmVudFBhcmFtKS5zdWJzY3JpYmUoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhYi5pZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDpppblhYjkuI3mv4DmtLvmiYDmnInnmoR0YWLpobUgIOeEtuWQjua/gOa0u+W9k+WJjXRhYumhtVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBpbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKChpdGVtOiBGYXJyaXNUYWJDb21wb25lbnQsIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXhdLl9hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRvb2xiYXJDb25mKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5rua5Yqo5Yiw5Y+v6KeB5Yy65Z+f5YaFXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFiQ2hhbmdlLmVtaXQodGFic0NoYW5nZUV2ZW50UGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9zZXRBY3RpdmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiBpdGVtLl9zaG93ID09PSB0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gdGhpcy5fZ2V0VGFiQnlJZCh0aGlzLmFjdGl2ZUlkKS50YWI7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSBhY3RpdmVUYWIgPyBhY3RpdmVUYWIuaWQgOiB0aGlzLnRhYnMubGVuZ3RoID8gdGhpcy50YWJzWzBdLmlkIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vIOi/h+a7pOaOiXNob3c9ZmFsc2XvvIjpmpDol4/vvInnmoR0YWJcclxuICAgICAgICAgICAgaWYgKHRhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IHRhYnMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhcmdldFRhYi5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0YWJzWzBdLmlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlSWQg5pi+56S65p+Q5LiqdGFiXHJcbiAgICAgKi9cclxuICAgIHNob3dUYWIodGFiSWQ6IGFueSwgc2VsZWN0YWJsZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnRhYnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFic1tpXS5pZCA9PT0gdGFiSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1tpXS5fc2hvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHRhYklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGl2ZUlkIOmakOiXj+afkOS4qnRhYlxyXG4gICAgICovXHJcbiAgICBoaWRlVGFiKGFjdGl2ZUlkOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBzaG93VGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9zaG93ID09PSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHNob3dUYWJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYgKGxlbiA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXg6IG51bWJlcjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoc2hvd1RhYnNbaV0uaWQgPT09IGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93VGFic1tpXS5fc2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbiAmJiBsZW4gPCAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKCcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW4gJiYgbGVuID49IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2hvd1RhYnNbbGVuIC0gMV0uaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHNob3dUYWJzW2luZGV4ICsgMV0uaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5qCH562+XHJcbiAgICAgKiBAcGFyYW0gY3VyVGFicyDmlbDnu4TmiJbogIXlr7nosaFcclxuICAgICAqIEBwYXJhbSBhY3RpdmVJZCDorr7nva5cclxuICAgICAqL1xyXG4gICAgYWRkVGFicyhjdXJUYWJzOiBhbnlbXSwgaW5kZXgsIHNldEFjdGl2ZUlkKSB7XHJcbiAgICAgICAgaWYgKGN1clRhYnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAwLCAuLi5jdXJUYWJzKTtcclxuICAgICAgICAgICAgLy8g5Y676YeNXHJcbiAgICAgICAgICAgIHRoaXMudGFicyA9IHRoaXMuX3VuaXF1ZSh0aGlzLnRhYnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0QWN0aXZlSWQgJiYgdGhpcy5hY3RpdmVJZCAhPT0gc2V0QWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyVGFiID0gdGhpcy5fZ2V0VGFiQnlJZChzZXRBY3RpdmVJZCk7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJUYWIuaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2V0QWN0aXZlSWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHNldEFjdGl2ZUlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhmaWx0ZXJUYWIuaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlVGl0bGVTdHlsZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmoIfnrb7ml7YgIOWOu+mHjVxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfdW5pcXVlKG9iakFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IHt9O1xyXG4gICAgICAgIG9iakFycmF5ID0gb2JqQXJyYXkucmVkdWNlKGZ1bmN0aW9uIChpdGVtLCBuZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChoYXNoW25leHQuaWRdKSB7XHJcbiAgICAgICAgICAgICAgICBoYXNoW25leHQuaWRdID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoYXNoW25leHQuaWRdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSwgW10pO1xyXG4gICAgICAgIHJldHVybiBvYmpBcnJheTtcclxuICAgIH1cclxuICAgIC8qIOmAmui/h3RhYuWIl+ihqOeahOW6j+WIl+WIoOmZpHRhYiAqL1xyXG4gICAgcmVtb3ZlVGFiQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IGxlbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlbW92ZVRhYiA9IHRoaXMudGFic1tpbmRleF07XHJcbiAgICAgICAgcmVtb3ZlVGFiLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVJZCA9PT0gcmVtb3ZlVGFiLmlkKSB7XHJcbiAgICAgICAgICAgIC8vIOWPquacieS4gOS4quiAjOS4lOiiq+WIoOmZpFxyXG4gICAgICAgICAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmiYDmnInmoIfnrb7lnYfliKDpmaQg5r+A5rS7aWTkuLrnqbpcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzliKDpmaTnmoTmmK/mnIDlkI7kuIDkuKrmoIfnrb4g6K6+572u5YW25YmN6Z2i55qE5aSE5LqO5r+A5rS754q25oCBXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy50YWJzW2xlbiAtIDFdLmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4IC0gMV0uX2FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhbbku5bmg4XlhrUgIOiuvue9ruWFtuWQjumdoueahOWkhOS6jua/gOa0u+eKtuaAgVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRoaXMudGFic1tpbmRleCArIDFdLmlkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2luZGV4ICsgMV0uX2FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFiSW50b1ZpZXcoaW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhYlJlbW92ZS5lbWl0KHtcclxuICAgICAgICAgICAgcmVtb3ZlSW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICByZW1vdmVJZDogcmVtb3ZlVGFiLmlkLFxyXG4gICAgICAgICAgICBhY3RpdmVJZDogdGhpcy5hY3RpdmVJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhbPpl63moIfnrb4gIOi3n+WIoOmZpOagh+etvuS4jeWQjFxyXG4gICAgICogQHBhcmFtIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBjbG9zZVRhYihhY3RpdmVJZCkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YWIgPSB0aGlzLnRhYnNbaV07XHJcbiAgICAgICAgICAgIGlmICh0YWIuaWQgPT09IGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRhYkJ5SW5kZXgoaSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMllxyXG4gICAgICovXHJcbiAgICBsb2FkKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYnNbaV0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1tpXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaIquWPlnRhYuS4reeahHRpdGxlLOi2hei/hzbkvY3vvIzmiKrmlq1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfdHJ1bmNhdGVUaXRsZSgpIHtcclxuICAgICAgICB0aGlzLnRhYnMgPSB0aGlzLnRhYnMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLnRpdGxlID0gaXRlbS50aXRsZS5sZW5ndGggPiA2ID8gaXRlbS50aXRsZS5zdWJzdHIoMCwgNikgOiBpdGVtLnRpdGxlO1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabv+aNonRhYuS4reeahHRpdGxl6aKc6ImyXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NoYW5nZVRpdGxlU3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b1RpdGxlV2lkdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCAkdGV4dEVscyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdC10YWItdGV4dCcpO1xyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgJHRleHRFbHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudEVsID0gJHRleHRFbHNba10ucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgaWYgKCR0ZXh0RWxzW2tdLnNjcm9sbFdpZHRoID4gcGFyZW50RWxbJ29mZnNldFdpZHRoJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1trXS50aXRsZU92ZXJmbG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFic1trXS50aXRsZU92ZXJmbG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu65rWBXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NyZWF0ZVN0cmVhbSgpIHtcclxuICAgICAgICBbdGhpcy5yaWdodE5hdiwgdGhpcy5sZWZ0TmF2XS5mb3JFYWNoKChjdXJCdG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGluZGV4ID8gLTEgOiAxO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW91c2Vkb3duJCA9IGZyb21FdmVudChjdXJCdG4ubmF0aXZlRWxlbWVudCwgJ21vdXNlZG93bicpO1xyXG4gICAgICAgICAgICBjb25zdCBtb3VzZXVwJCA9IGZyb21FdmVudChjdXJCdG4ubmF0aXZlRWxlbWVudCwgJ21vdXNldXAnKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3TW91c2VEb3duJCA9IG1vdXNlZG93biQucGlwZShcclxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcCgoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsJCA9IG9mKDApLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbmNhdChpbnRlcnZhbCg4MCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlVW50aWwobW91c2V1cCQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuKChzdW06IG51bWJlciwgbnVtOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdW0gKyB0aGlzLnNjcm9sbFN0ZXAgKiBkaXJlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlV2hpbGUobnVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVSaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5kaXNhYmxlTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCh2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2LCBkaXJlY3Rpb24gfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbCQ7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBtb3VzZXByZXNzU3ViID0gbmV3TW91c2VEb3duJC5zdWJzY3JpYmUoY2hhbmdlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbFRhYihjaGFuZ2UudmFsdWUsIGNoYW5nZS5kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24ucHVzaChtb3VzZXByZXNzU3ViKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMuYXV0b1Jlc2l6ZSkge1xyXG4gICAgICAgIC8vICAgICAvLyDorqLpmIV3aW5kb3dzIHJlc2l6ZeS6i+S7tlxyXG4gICAgICAgIC8vICAgICB0aGlzLnN1YnNjcmlwdGlvbi5wdXNoKFxyXG4gICAgICAgIC8vICAgICAgICAgZnJvbUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgLnBpcGUodGhyb3R0bGVUaW1lKDgwKSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAuc3Vic2NyaWJlKGUgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB9KVxyXG4gICAgICAgIC8vICAgICApO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5oyJ54Wn5pa55ZCR77yM5rua5Yqo5Yiw5oyH5a6a5L2N572uXHJcbiAgICAgKiBAcGFyYW0gZGlzdF9zY3JvbGwg55uu5qCH5rua5YqoXHJcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIOaWueWQkVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9zY3JvbGxUYWIobW92ZSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgZGlzdF9zY3JvbGxsZWZ0ID0gdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCArIG1vdmU7XHJcbiAgICAgICAgY29uc3QgbWF4X3Njcm9sbF9sZWZ0ID1cclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsV2lkdGggLSB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAvLyDmoIfnrb7pobXlt6bkvqfnp7vliqhcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICBkaXN0X3Njcm9sbGxlZnQsXHJcbiAgICAgICAgICAgICAgICBtYXhfc2Nyb2xsX2xlZnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHtcclxuICAgICAgICAgICAgLy8g5qCH562+6aG15Y+z5L6n56e75YqoXHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPSBNYXRoLm1heChkaXN0X3Njcm9sbGxlZnQsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZVNpZGVzKCk7XHJcbiAgICAgICAgLy8gdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaMh+WumuW9k+WJjea7keWKqOWIsOWPr+inhuWMuuWfn+KAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOacqua1i+ivlVxyXG4gICAgICogaW5kZXhcclxuICAgICAqL1xyXG4gICAgc2Nyb2xsVGFiSW50b1ZpZXcoaW5kZXgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RhYkNvbnRhaW5lckVsIHx8IHRoaXMuaGlkZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0YWJJbmRleCA9IHBhcnNlSW50KGluZGV4ICsgJycsIDEwKTtcclxuICAgICAgICBsZXQgdGFiVG9TY3JvbGw7XHJcblxyXG4gICAgICAgIC8vIGZpcnN0IHdlIGZpbmQgdGhlIHRhYiBlbGVtZW50LlxyXG4gICAgICAgIGlmICh0YWJJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFRhYnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWl0ZW0nKTtcclxuICAgICAgICAgICAgaWYgKGFsbFRhYnMubGVuZ3RoID4gdGFiSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRhYlRvU2Nyb2xsID0gYWxsVGFic1t0YWJJbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzY3JvbGwgc2VsZWN0ZWQgdGFiIGludG8gdmlld1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLl90YWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCdsaS5hY3RpdmUnKTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYikge1xyXG4gICAgICAgICAgICAgICAgdGFiVG9TY3JvbGwgPSBhY3RpdmVUYWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0YWJUb1Njcm9sbCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWJfbGVmdCA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICAgICAgdGFiVG9TY3JvbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArICcnLFxyXG4gICAgICAgICAgICAgICAgMTBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgdGFic19sZWZ0ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJycsXHJcbiAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCByaWdodFBvc2l0aW9uID1cclxuICAgICAgICAgICAgICAgIHRhYl9sZWZ0ICtcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KHRhYlRvU2Nyb2xsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgJycsIDEwKSAtXHJcbiAgICAgICAgICAgICAgICB0YWJzX2xlZnQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPSB0YWJfbGVmdCAtIHRhYnNfbGVmdCAtIDEwO1xyXG4gICAgICAgICAgICBpZiAobGVmdFBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVGFiKGxlZnRQb3NpdGlvbiwgLTEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0UG9zaXRpb24gPiB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVGFiKFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0UG9zaXRpb24gLSB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aCArIDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIDFcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliIfmjaJ0YWLlkI7vvIzph43mlrDojrflj5bpnIDopoHor6V0YWLkuIvlt6XlhbfmnaHmjInpkq7nmoTphY3nva7kv6Hmga/ku6Xlj4rpmpDol4/mm7TlpJrmjInpkq5cclxuICAgICAqIOS7peWPiuiOt+WPluivpXRhYuS4i+eahOWktOmDqOaJqeWxleWMuuWfn1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRvb2xiYXJDb25mKCkge1xyXG4gICAgICAgIGNvbnN0IHRhYkNvbmZpZyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLl9hY3RpdmUgPT09IHRydWU7XHJcbiAgICAgICAgfSlbMF07XHJcbiAgICAgICAgaWYgKCF0YWJDb25maWcgfHwgIXRhYkNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgndG9vbGJhcicpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbmYgPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbmYgPSB0YWJDb25maWcudG9vbGJhcjsgICAgICAgICAgIFxyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIC8vIOiusOW9leeKtuaAgVxyXG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUodGhpcy52aXNpYmxlUmVjb3JkLFwidmlzaWJsZVwiKTsgICBcclxuICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKHRoaXMuZGlzYWJsZVJlY29yZCxcImRpc2FibGVcIik7XHJcbiAgICAgICAgLy8g6I635Y+W6K+ldGFi5LiL55qE5aS06YOo5omp5bGV5Yy65Z+fXHJcbiAgICAgICAgaWYgKCF0YWJDb25maWcgfHwgIXRhYkNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnZmFycmlzVGFic0V4dGVuZERpcmVjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyRXh0ZW5kQ29uZiA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJFeHRlbmRDb25mID0gdGFiQ29uZmlnLmZhcnJpc1RhYnNFeHRlbmREaXJlY3RpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOmakOiXj+abtOWkmuaMiemSrlxyXG4gICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+W3peWFt+agj+aYr+WQpuaYvuekuuS4i+aLieaMiemSrlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKSB7XHJcbiAgICAgICAgbGV0IGhlYWRlckV4dGVuZEVsOiBhbnk7XHJcbiAgICAgICAgbGV0IGhlYWRlckV4dGVuZEVsV2lkdGggPSAwO1xyXG4gICAgICAgIGlmICghdGhpcy50b29sYmFyQ29udGFpbmVyIHx8ICF0aGlzLnRvb2xiYXJDb25mKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9vbGJhckNvbnRhaW5lciA9IHRoaXMuaGFzSW5IZWFkQ2woKSA/IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50IDogdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICBsZXQgZGl2RWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1pbmxpbmUtZmxleCcpO1xyXG4gICAgICAgIGlmICghZGl2RWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaGVhZGVyLWV4dGVuZCcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKGhlYWRlckV4dGVuZEVsLCAnb3ZlcmZsb3cnKTtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IGhlYWRlckV4dGVuZEVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmjInpkq7lnKjlhoXlrrnljLpcclxuICAgICAgICBpZiAoIXRoaXMuaGFzSW5IZWFkQ2woKSAmJiB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggPiB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0luSGVhZENsKCkgJiYgdGhpcy5idG5QbGFjZUhvbGRlci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoID4gdG9vbGJhckNvbnRhaW5lci5vZmZzZXRXaWR0aCAtIGhlYWRlckV4dGVuZEVsV2lkdGgpIHtcclxuICAgICAgICAgICAgLy8g5oyJ6ZKu5Zyo5aS06YOo5bel5YW35qCPXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckRwSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+aYvuekuueahOaMiemSruS4quaVsOWPiuabtOWkmuS4reaYvuekuueahOaMiemSruS4quaVsFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9jYWxjdWxhdGVCdXR0b25zU2hvdygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWw6IGFueTtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhckNvbmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b29sYmFyQ29udGFpbmVyID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQgOiB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCBkaXZFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWlubGluZS1mbGV4Jyk7XHJcbiAgICAgICAgbGV0IGJ0blBsYWNlSG9sZGVyRWwgPSB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGJ0blBsYWNlSG9sZGVyQnRucyA9IGJ0blBsYWNlSG9sZGVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi0tY2FsJyk7XHJcbiAgICAgICAgaWYgKCFkaXZFbCB8fCBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDmraTlpITmnInkuKpCdWfvvIzlpoLmnpzmmK9pbkNvbnRlbnTov5jmmK9oZWFkZXJFeHRlbmRDb25m55qE5oOF5Ya15LiL77yM5oyJ6ZKu55qE5L2N572u5b2i5aaCaW5IZWFkXHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyRXh0ZW5kQ29uZikge1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWhlYWRlci1leHRlbmQnKTtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IHRoaXMuaGFzSW5IZWFkQ2woKSA/IGhlYWRlckV4dGVuZEVsLm9mZnNldFdpZHRoIDogMDtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1vcmVCdXR0b24gPSBidG5QbGFjZUhvbGRlckVsLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vcmVidG4nKTtcclxuICAgICAgICAvLyDorqHnrpfmjInpkq7nmoTlrr3luqYgICAgICBcclxuICAgICAgICBsZXQgYmFzaWNTdGFydCA9IHBhcnNlSW50KGJ0blBsYWNlSG9sZGVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCk7XHJcbiAgICAgICAgbGV0IGJhc2ljV2lkdGggPSB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gbW9yZUJ1dHRvbi5vZmZzZXRXaWR0aCAtIDEyIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aDtcclxuICAgICAgICBsZXQgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICBsZXQgayA9IDBcclxuICAgICAgICAvLyDlj6rmnInkuIDkuKrmjInpkq5cclxuICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBrID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoayA9IDE7IGsgPD0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5YaF5a656LaF5Ye6LOiAg+iZkeWIsOaMiemSruS5i+mXtOeahOmXtOi3nVxyXG4gICAgICAgICAgICAgICAgaWYgKGsgPT0gYnRuUGxhY2VIb2xkZXJCdG5zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuUGxhY2VIb2xkZXJFbC5vZmZzZXRXaWR0aCA+IGJhc2ljV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZUludChidG5QbGFjZUhvbGRlckJ0bnNba10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCkgLSBiYXNpY1N0YXJ0ID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xiYXJEcm9wZG93bkhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBrIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0b29sYmFyRHJvcGRvd25IaWRkZW47XHJcbiAgICAgICAgbGV0IHNob3dCdG5zID0gZGl2RWwucXVlcnlTZWxlY3RvckFsbCgnLmJ0bi0tY2FsJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1tpXSwgJ2Rpc3BsYXknLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IG0gPSBrOyBtIDwgc2hvd0J0bnMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShzaG93QnRuc1ttXSwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50b29sYmFyQ29uZi5jb250ZW50cyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDov4fmu6TmmL7npLrmjInpkq7nmoTkuKrmlbBcclxuICAgICAgICAgICAgbGV0IGZpbHRlclNob3dCdG5zID0gdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5maWx0ZXIoKGl0ZW0pID0+IHRoaXMuZ2V0VG9vbGJhclN0YXRlVmlzaWJsZShpdGVtKSk7XHJcbiAgICAgICAgICAgIC8vIOS7juaYvuekuuaMiemSruS4rei/h+a7pOS4i+aLieaMiemSrlxyXG4gICAgICAgICAgICB0aGlzLmluTW9yZUJ1dHRvbkNvbnRlbnRzID0gZmlsdGVyU2hvd0J0bnMuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID49IGs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jZFJlZiYmIXRoaXMuY2RSZWZbJ2Rlc3Ryb3llZCddJiZ0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTsgXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+aYr+WQpuaYvuekuuaMiemSruWSjOS4i+aLiVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbGN1bGF0ZUFsbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RhYkNvbnRhaW5lckVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0YWJQYXJlbnRXaWR0aCA9IHRoaXMudGFiUGFyZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1yaWdodFwiKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRsID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIm1hcmdpbi1sZWZ0XCIpKTtcclxuICAgICAgICAgICAgdGFiUGFyZW50V2lkdGggKz0gdHIgKyB0bDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZUJ1dHRvbnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCA8PSB0YWJQYXJlbnRXaWR0aDtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRlRHJvcERvd24gPSB0aGlzLnNob3dEcm9wRG93biA/IHRoaXMuaGlkZUJ1dHRvbnMgOiB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGlkZURyb3BEb3duKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duVGFicyA9IFtdLmNvbmNhdCh0aGlzLnRhYnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaFRhYlRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25UYWJzID0gdGhpcy5kcm9wZG93blRhYnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWyd0aXRsZSddLmluZGV4T2YodGhpcy5zZWFyY2hUYWJUZXh0KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZVNpZGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHBTdGF0ZSA9IFtmYWxzZV07XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+W3puWPs+eahOaPkOekuuaWh+Wtl1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbHVsYXRlVG9vbHRpcHMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90YWJDb250YWluZXJFbCB8fCB0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdF9yaWdodF90b29sdGlwcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRfbGVmdF90b29sdGlwcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFsbFRhYnMgPSB0aGlzLl90YWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWl0ZW0nKTtcclxuICAgICAgICBjb25zdCBsZW4gPSBhbGxUYWJzLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBoaWRkZW5UYWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX3Nob3cgIT09IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBoaWRkZW5UYWJzTGVuZ3RoID0gaGlkZGVuVGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgYWxsVGFic1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgYWxsVGFic1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArIGxlZnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKHJpZ2h0UG9zaXRpb24gPiB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdF9yaWdodF90b29sdGlwcy5wdXNoKHRoaXMudGFic1tpXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFBvc2l0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdF9sZWZ0X3Rvb2x0aXBzLnB1c2godGhpcy50YWJzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sZWZ0VG9vbHRpcFRhYnMgPSBbXVxyXG4gICAgICAgICAgICAuY29uY2F0KHRfbGVmdF90b29sdGlwcylcclxuICAgICAgICAgICAgLnNsaWNlKE1hdGgubWF4KDAsIHRfbGVmdF90b29sdGlwcy5sZW5ndGggLSB0aGlzLm1heFRvb2x0aXBMZW4pKTtcclxuICAgICAgICB0aGlzLnJpZ2h0VG9vbHRpcFRhYnMgPSBbXVxyXG4gICAgICAgICAgICAuY29uY2F0KHRfcmlnaHRfdG9vbHRpcHMpXHJcbiAgICAgICAgICAgIC5zbGljZSgwLCBNYXRoLm1pbih0aGlzLm1heFRvb2x0aXBMZW4sIHRfcmlnaHRfdG9vbHRpcHMubGVuZ3RoKSk7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlUlRvb2x0aXAgPSB0aGlzLnJpZ2h0VG9vbHRpcFRhYnMubGVuZ3RoIDwgMTtcclxuICAgICAgICB0aGlzLmRpc2FibGVMVG9vbHRpcCA9IHRoaXMubGVmdFRvb2x0aXBUYWJzLmxlbmd0aCAtIGhpZGRlblRhYnNMZW5ndGggPCAxO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDph43mlrDorqHnrpflt6blj7Pnrq3lpLTnirbmgIFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVDYWxjdWxhdGVTaWRlcygpIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVSaWdodCA9XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPj1cclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsV2lkdGggLSB0aGlzLl90YWJDb250YWluZXJFbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLmRpc2FibGVMZWZ0ID0gdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA8PSAwO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsdWxhdGVUb29sdGlwcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4dpZOWvu+aJvlRhYlxyXG4gICAgICogQHBhcmFtIGlkIElEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2dldFRhYkJ5SWQoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGluZGV4V2lkdGhJZCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRhYnNXaXRoSWQ6IEZhcnJpc1RhYkNvbXBvbmVudFtdID0gdGhpcy50YWJzLmZpbHRlcihcclxuICAgICAgICAgICAgKHRhYiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWIuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhXaWR0aElkLnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRhYjogdGFic1dpdGhJZC5sZW5ndGggPyB0YWJzV2l0aElkWzBdIDogbnVsbCxcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4V2lkdGhJZC5sZW5ndGggPyBpbmRleFdpZHRoSWRbMF0gOiAtMVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKuWuvemrmOexu+Wei+aYryBzdHJpbmfmiJbogIVudW1iZXIg6Kej5p6Q5a696auYICDlsLrlr7ggKi9cclxuICAgIHJlc29sdmVTaXplKHNpemUpIHtcclxuICAgICAgICBjb25zdCByZWdleCA9IC9weHxlbXxyZW18cHR8JS87XHJcbiAgICAgICAgLy8g6K+05piO5piv5a2X56ym5LiyXHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3Qoc2l6ZSlcclxuICAgICAgICAgICAgPyBgJHtwYXJzZUludChzaXplLCAxMCl9JHtzaXplLm1hdGNoKHJlZ2V4KVswXX1gXHJcbiAgICAgICAgICAgIDogYCR7c2l6ZX1weGA7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICDmuIXnqbp0YWJcclxuICAgICAgICovXHJcbiAgICAvLyByZW1vdmVBbGxUYWIoKSB7XHJcbiAgICAvLyAgICAgdGhpcy50YWJzLnNwbGljZSgwLCB0aGlzLnRhYnMubGVuZ3RoKTtcclxuICAgIC8vIH1cclxuICAgIGhhc0luSGVhZENsKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRvb2xiYXJDb25mICYmIHRoaXMudG9vbGJhckNvbmYuaGFzT3duUHJvcGVydHkoJ3Bvc2l0aW9uJykgJiYgdGhpcy50b29sYmFyQ29uZi5oYXNPd25Qcm9wZXJ0eSgnY29udGVudHMnKSAmJiB0aGlzLnRvb2xiYXJDb25mLnBvc2l0aW9uID09PSAnaW5IZWFkJyAmJiB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYgJiYgISh0aGlzLnRvb2xiYXJDb25mICYmIHRoaXMudG9vbGJhckNvbmYucG9zaXRpb24gPT09ICdpbkNvbnRlbnQnICYmIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICog5pS55Y+Y5Y+v55So54q25oCBXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVzXHJcbiAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGNoYW5nZVN0YXRlKHZhbHVlcywgc3RhdGVQcm9wKSB7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnRvb2xiYXJDb25mfHwhdGhpcy50b29sYmFyQ29uZi5jb250ZW50cyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaWRBcnJheSA9IE9iamVjdC5rZXlzKHZhbHVlcyk7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZElkID0gaWRBcnJheS5maW5kKChpZCkgPT4gaWQgPT0gaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gdmFsdWVzW2ZpbmRJZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtWydjaGlsZHJlbiddJiZpdGVtWydjaGlsZHJlbiddLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlbDmja7mupDlj6rmnInkuIDnuqfnmoTkuIvmi4lcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZHBDaGlsZHJlbj1pdGVtLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGRwQ2hpbGRyZW4uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5kSWQgPSBpZEFycmF5LmZpbmQoKGlkKSA9PiBpZCA9PSBpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gdmFsdWVzW2ZpbmRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluZElkID0gaWRBcnJheS5maW5kKChpZCkgPT4gaWQgPT0gaXRlbS5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gdmFsdWVzW2ZpbmRJZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtWydjaGlsZHJlbiddJiZpdGVtWydjaGlsZHJlbiddLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlbDmja7mupDlj6rmnInkuIDnuqfnmoTkuIvmi4lcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZHBDaGlsZHJlbj1pdGVtLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGRwQ2hpbGRyZW4uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5kSWQgPSBpZEFycmF5LmZpbmQoKGlkKSA9PiBpZCA9PSBpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVtzdGF0ZVByb3BdID0gdmFsdWVzW2ZpbmRJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZHBTdGF0ZSA9IFtmYWxzZV07XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYmJiF0aGlzLmNkUmVmWydkZXN0cm95ZWQnXSYmdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG59XHJcbiJdfQ==