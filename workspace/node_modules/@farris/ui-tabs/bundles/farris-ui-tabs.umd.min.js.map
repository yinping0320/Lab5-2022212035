{"version":3,"sources":["ng://@farris/ui-tabs/lib/tab/tabhost.directive.ts","node_modules/tslib/tslib.es6.js","ng://@farris/ui-tabs/lib/tabs.config.ts","ng://@farris/ui-tabs/lib/tabs/tabs.component.ts","ng://@farris/ui-tabs/lib/tab/extend.directive.ts","ng://@farris/ui-tabs/lib/tab/tab.component.ts","ng://@farris/ui-tabs/lib/tab/tab.transclude.directive.ts","ng://@farris/ui-tabs/lib/tab/tab.headtemplate.directive.ts","ng://@farris/ui-tabs/lib/dropdown/dropdown-config.ts","ng://@farris/ui-tabs/lib/util/positioning.ts","ng://@farris/ui-tabs/lib/dropdown/dropdown.ts","ng://@farris/ui-tabs/lib/dropdown/dropdown.module.ts","ng://@farris/ui-tabs/lib/util/triggers.ts","ng://@farris/ui-tabs/lib/util/popup.ts","ng://@farris/ui-tabs/lib/tooltip/tooltip-config.ts","ng://@farris/ui-tabs/lib/tooltip/tooltip.ts","ng://@farris/ui-tabs/lib/tooltip/tooltip.module.ts","ng://@farris/ui-tabs/lib/tabs.module.ts"],"names":["TabHostDirective","Directive","args","selector","ViewContainerRef","viewContainerRef","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","TabConfig","showDropDown","showTooltips","scrollStep","autoResize","maxDropdownH","maxDropdownW","maxTabW","maxTooltipLen","TabService","prototype","getConfig","config","Injectable","decorators","type","Optional","exConfig","assign","defineProperty","FarrisTabsComponent","_position","positionStates","_width","resolveSize","widthStates","_height","heightStates","_headerHeight","headerHeight","_contentFill","contentFillStates","values","_disableStatesDatas","disableStateBind","_visibleDatas","visibleStateBind","_tabs","_customClass","customClass","_this","split","forEach","cssClass","renderer","removeClass","el","trim","addClass","position","trackByButton","index","btn","id","verifyConfig","stService","parseInt","ngOnInit","beforeSelect","of","clickSubscription","clickItems","pipe","debounceTime","clickThrottleTime","subscribe","btnInfo","click","_tabContainerEl","tabContainer","nativeElement","_createStream","activeId","selectId","ngZone","runOutsideAngular","ro","ResizeObserver","_reCalculateAll","_calculateToolbarDropdownIsShow","_calculateButtonsShow","observe","parentElement","data","keys","btnId","visibleRecord","toolbarConf","contents","length","changeState","disableRecord","ngOnChanges","changes","selectTab","currentValue","ngAfterContentInit","ngAfterContentChecked","ngAfterViewInit","setStyle","getToolbarConf","_setActive","_changeTitleStyle","_listenShowChanges","_ddmHandler","listen","document","target","closest","querySelector","ddm","dropdown","close","ngAfterViewChecked","ngOnDestroy","subscription","sub","unsubscribe","unobserve","clickHandler","openChange","searchInputVisible","searchTabText","undefined","menuItemsWidth","resetMenuElWidthOpen","searchTab","stopBubble","stopPropagation","window","event","cancelBubble","getToolbarStateVisible","btnItem","stateProp","getToolbarStateDisable","getToolbarState","state","btnStates","map","tabs","item","showStates","activeIdToken","_show","_active","filter","defaultTabId","cdRef","detectChanges","tabId","selectedTab","_getTabById","_selectTab","tab","_cpSelectTabByIndex","ev","preventDefault","targetEL","className","indexOf","closeTab","markForCheck","selectTabByIndex","disabled","tabsChangeEventParam_1","prevId","nextId","scrollTabIntoView","tabChange","emit","activeTab","targetTab","find","showTab","selectable","len","hideTab","showTabs","addTabs","curTabs","setActiveId","_a","splice","apply","__spread","arguments","concat","_unique","filterTab","objArray","hash","reduce","removeTabByIndex","removeTab","tabRemove","removeIndex","removeId","load","_truncateTitle","title","substr","autoTitleWidth","$textEls","querySelectorAll","k","parentEl","parentNode","scrollWidth","titleOverflow","rightNav","leftNav","curBtn","direction","mousedown$","fromEvent","mouseup$","mousepressSub","switchMap","takeUntil","scan","sum","num","takeWhile","disableRight","disableLeft","v","change","_scrollTab","move","dist_scrollleft","scrollLeft","max_scroll_left","offsetWidth","Math","min","max","_reCalculateSides","hideButtons","tabToScroll","tabIndex","allTabs","tab_left","getBoundingClientRect","left","tabs_left","rightPosition","width","leftPosition","tabConfig","toolbar","headerExtendConf","farrisTabsExtendDirective","toolbarDpHidden","headerExtendEl","headerExtendElWidth","toolbarContainer","hasInHeadCl","removeStyle","btnPlaceHolder","divEl","btnPlaceHolderEl","btnPlaceHolderBtns","moreButton","basicStart","basicWidth","toolbarDropdownHidden","showBtns","filterShowBtns","inMoreButtonContents","tabParentWidth","tabParent","getComputedStyle","getPropertyValue","hideDropDown","dropdownTabs","dpState","_reCalulateTooltips","t_right_tooltips","t_left_tooltips","hiddenTabsLength","leftTooltipTabs","slice","rightTooltipTabs","disableRTooltip","disableLTooltip","indexWidthId","tabsWithId","size","regex","test","match","idArray","findId","children","Component","template","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","ElementRef","Renderer2","ChangeDetectorRef","NgZone","Input","ViewChild","Output","elementRef","tabType","fill","titleLength","searchBoxVisible","contentDirection","Subject","titleWidth","EventEmitter","BehaviorSubject","referEl","tabVisibleChanged","FarrisTabsExtendDirective","TemplateRef","templateRef","FarrisTabComponent","scrollTabs","visible","_activeForOld","activeState","nEl","render","loadComponent","Compiler","ComponentFactoryResolver","ContentChild","cp","componentFactoryResolver","cef","tabWidth","titleCustomCls","selected","TabTranscludeDirective","_trancludeTempl","viewRef","createEmbeddedView","ngDoCheck","KeyValueDiffers","_differs","TabHeadDirective","tabItem","headingRef","NgbDropdownConfig","autoClose","placement","Positioning","positionService","getAllStyles","element","getStyle","prop","isStaticPositioned","offsetParent","offsetParentEl","documentElement","round","elPosition","parentOffset","height","top","bottom","right","offset","clientTop","clientLeft","elBcr","viewportOffset","pageYOffset","pageXOffset","elOffset","offsetHeight","positionElements","hostElement","targetElement","appendToBody","referElement","oldhostElPosition","hostElPosition","getRectCompareReferElementAndHostElement","targetElStyles","targetElBCR","placementPrimary","placementSecondary","targetElPosition","parseFloat","marginBottom","marginRight","hostRect","hostElemClientRect","referRect","getAvailablePlacements","oldhostElemClientRect","availablePlacements","targetElemClientRect","html","windowHeight","innerHeight","clientHeight","windowWidth","innerWidth","clientWidth","hostElemClientRectHorCenter","hostElemClientRectVerCenter","setSecondaryPlacementForLeftRight","setSecondaryPlacementForTopBottom","primaryPlacement","availablePlacementArr","placementVals","isArray","hasAuto","findIndex","val","obj","search","appliedPlacement","topVal","leftVal","pos","_b","__values","tslib_1.__values","toItemIndexes","a","_c","_d","style","NgbDropdownMenu","_elementRef","parentNodeW","menuW","isEventFrom","$event","contains","triggerEl","setTimeout","applyPlacement","_placement","_renderer","host","[class.dropdown-menu]","[class.show]","[attr.x-placement]","exportAs","Inject","forwardRef","NgbDropdown","isOpen","NgbDropdownAnchor","class","aria-haspopup","[attr.aria-expanded]","anchorEl","_super","NgbDropdownToggle","__extends","__","constructor","create","tslib_1.__extends","toggleOpen","toggle","(click)","providers","provide","useExisting","_menu","_open","open","_positionMenu","classList","add","overLayService","registerMouseEvent","tar","from","includes","remove","destory","closeFromClick","button","_isEventFromToggle","_isEventFromMenu","closeFromOutsideEsc","_zoneSubscription","_anchor","(keyup.esc)","onStable","OverLayHiddenService","NGB_DROPDOWN_DIRECTIVES","NgbDropdownModule","forRoot","ngModule","NgModule","imports","FarrisCommonModule","declarations","exports","Trigger","isManual","DEFAULT_ALIASES","hover","noopFn","listenToTriggers","triggers","openFn","closeFn","toggleFn","parsedTriggers","parseTriggers","aliases","trimmedTriggers","trigger","triggerPair","alias","manualTriggers","listeners","unsubscribeFn","ContentRef","nodes","componentRef","PopupService","content","context","_windowRef","_contentRef","_getContentRef","_viewContainerRef","createComponent","_componentFactoryResolver","resolveComponentFactory","_type","_injector","hostView","rootNodes","createText","NgbTooltipConfig","container","disableTooltip","NgbTooltipWindow","_element","toString","[class]","role","[id]","NgbTooltip","_ngbTooltip","_popupService","instance","_ngbTooltipWindowId","setAttribute","appendChild","location","changeDetectorRef","shown","removeAttribute","hidden","_unregisterListenersFn","bind","Injector","injector","NgbTooltipModule","entryComponents","FarrisTabsModule","useValue","CommonModule","LocaleModule","FormsModule","FDropdownDirectiveTypeModule"],"mappings":"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","sourcesContent":["import { Directive, ViewContainerRef} from '@angular/core';\r\n@Directive({\r\n    selector: '[tabHost]'\r\n})\r\n\r\nexport class TabHostDirective {\r\n    constructor( public viewContainerRef: ViewContainerRef) {\r\n    }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Optional } from '@angular/core';\r\n\r\nexport class TabConfig {\r\n  // \r\n  showDropDown = true;\r\n  // \r\n  showTooltips = true;\r\n  // \r\n  scrollStep = 15;\r\n  //  ---- todo:windowresize\r\n  autoResize = true;\r\n  //  \r\n  maxDropdownH = 200;\r\n  //  \r\n  maxDropdownW = -1;\r\n  // \r\n  maxTabW = 100;\r\n  // \r\n  maxTooltipLen = 5;\r\n}\r\n\r\n@Injectable()\r\nexport class TabService {\r\n  config: TabConfig;\r\n  constructor(@Optional() exConfig: TabConfig) {\r\n    this.config = new TabConfig();\r\n    if (exConfig) {\r\n      Object.assign(this.config, exConfig);\r\n    }\r\n  }\r\n  getConfig() {\r\n    return this.config;\r\n  }\r\n}\r\n","\r\nimport {\r\n    Component, OnInit, OnChanges, SimpleChanges, Input, ElementRef, Renderer2, ChangeDetectionStrategy,\r\n    ChangeDetectorRef, ViewEncapsulation, AfterViewInit, ViewChild, OnDestroy, AfterContentChecked,\r\n    EventEmitter, Output, AfterContentInit, AfterViewChecked, NgZone\r\n} from '@angular/core';\r\nimport { Subscription, fromEvent, interval, Observable, of, BehaviorSubject, Subject } from 'rxjs';\r\nimport { takeUntil, map, scan, switchMap, takeWhile, concat, debounceTime } from 'rxjs/operators';\r\n\r\nimport { TabService, TabConfig } from '../tabs.config';\r\nimport { TabsChangeEvent, TabsRemoveTabEvent } from '../tabs.events';\r\nimport { FarrisTabComponent } from '../tab/tab.component';\r\nimport { ToolbarConf,ToolbarContentsConf} from '../toolbar.config';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport { NgbDropdownMenu } from '../dropdown/dropdown';\r\n\r\n@Component({\r\n    selector: 'farris-tabs',\r\n    templateUrl: './tabs.component.html',\r\n    styleUrls: ['./tabs.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class FarrisTabsComponent implements OnInit, OnChanges, AfterViewInit,\r\n    OnDestroy, AfterContentInit, AfterContentChecked, AfterViewChecked {\r\n\r\n    @Input() tabType:'fill'|'pills'|''='';\r\n    // \r\n    @Input() fill = false;\r\n    // -\r\n    @Input() autoTitleWidth = false;\r\n    // \r\n    @Input() titleLength = 7;\r\n    searchInputVisible: boolean;\r\n    // tab \r\n    @Input() set position(value: string) {\r\n        this._position = value;\r\n        this.positionStates.next(value);\r\n    }\r\n    get position() {\r\n        return this._position;\r\n    }\r\n    // \r\n    @Input() showDropDown;\r\n    // ---\r\n    @Input() showTooltips;\r\n    // \r\n    @Input() scrollStep;\r\n    // ---\r\n    @Input() autoResize;\r\n    // ---\r\n    @Input() closeable: boolean;\r\n    // \r\n    // tslint:disable-next-line:no-input-rename\r\n    @Input('value') selectId: string;\r\n    // tabs\r\n    @Input() set width(value: any) {\r\n        this._width = this.resolveSize(value);\r\n        this.widthStates.next(this._width);\r\n    }\r\n    @Input() set height(value: any) {\r\n        this._height = this.resolveSize(value);\r\n        this.heightStates.next(this._height);\r\n    }\r\n    // \r\n    @Input() searchBoxVisible = true;\r\n    // -----\r\n    _headerHeight: string | number;\r\n    @Input('header-height')\r\n    get headerHeight() {\r\n        return this._headerHeight;\r\n    }\r\n    set headerHeight(headerHeight) {\r\n        this._headerHeight = this.resolveSize(headerHeight);\r\n    }\r\n\r\n    // flex  flex-----\r\n    @Input() contentDirection = 'column';\r\n    //   \r\n    @Input() set contentFill(value) {\r\n        this._contentFill = value;\r\n        this.contentFillStates.next(value);\r\n    }\r\n    @Input() clickThrottleTime = 350;\r\n    private clickItems = new Subject<any>();\r\n    private clickSubscription: Subscription;\r\n /**\r\n  * \r\n  */\r\n  private  _disableStatesDatas: Observable<Array<{ [key: string]: boolean }>> =\r\n    new Subject();\r\n  @Input()\r\n  set btnStates(values: Observable<Array<{ [key: string]: boolean }>>) {\r\n      if (values) {\r\n          if (\r\n              this._disableStatesDatas &&\r\n              this._disableStatesDatas.hasOwnProperty(\"unsubscribe\")\r\n          ) {\r\n              this._disableStatesDatas[\"unsubscribe\"]();\r\n          }           \r\n          this._disableStatesDatas = values;           \r\n          this.disableStateBind();\r\n      }\r\n  }\r\n  // key\r\n  private  _visibleDatas: Observable<Array<{ [key: string]: boolean }>> =\r\n       new Subject();\r\n   // \r\n   @Input()\r\n   set btnVisible(values: Observable<Array<{ [key: string]: boolean }>>) {\r\n       if (values) {\r\n           if (\r\n               this._visibleDatas &&\r\n               this._visibleDatas.hasOwnProperty(\"unsubscribe\")\r\n           ) {\r\n               this._visibleDatas[\"unsubscribe\"]();\r\n           }           \r\n           this._visibleDatas = values;           \r\n           this.visibleStateBind();\r\n       }\r\n   }\r\n\r\n    // \r\n    @Input()\r\n    get tabs(): any[] {\r\n        return this._tabs;\r\n    }\r\n    set tabs(value) {\r\n        this._tabs = value;\r\n    }\r\n\r\n    @Input()\r\n    get customClass(): string {\r\n        return this._customClass;\r\n    }\r\n    set customClass(customClass: string) {\r\n        if (this.customClass) {\r\n            this.customClass.split(' ').forEach((cssClass: string) => {\r\n                this.renderer.removeClass(this.el, cssClass);\r\n            });\r\n        }\r\n\r\n        this._customClass = customClass ? customClass.trim() : null;\r\n\r\n        if (this.customClass) {\r\n            this.customClass.split(' ').forEach((cssClass: string) => {\r\n                this.renderer.addClass(this.el, cssClass);\r\n            });\r\n        }\r\n    }\r\n    // ,\r\n    @Input() titleWidth = 0;\r\n    @ViewChild('leftNav') leftNav;\r\n    @ViewChild('rightNav') rightNav;\r\n    @ViewChild('tabContainer') tabContainer;\r\n    @ViewChild('toolbarContainer') toolbarContainer;\r\n    @ViewChild('dropDownButton') dropDownButton;\r\n    @ViewChild('tabParent') tabParent;\r\n    @ViewChild('btnPlaceholder') btnPlaceHolder;\r\n\r\n    /** tab  */\r\n    @Input() beforeSelect: (e: TabsChangeEvent) => Observable<boolean>;\r\n    @Output() tabChange = new EventEmitter<TabsChangeEvent>();\r\n    @Output() tabRemove = new EventEmitter<TabsRemoveTabEvent>();\r\n\r\n    get direction() {\r\n        switch (this.position) {\r\n            case 'top':\r\n                return 'column';\r\n            case 'bottom':\r\n                return 'column-reverse';\r\n            case 'left':\r\n                return 'row';\r\n            case 'right':\r\n                return 'row-reverse';\r\n        }\r\n    }\r\n\r\n    // \r\n    get tabDirection() {\r\n        if (this.position === 'top' || this.position === 'bottom') {\r\n            return 'row';\r\n        } else if (this.position === 'left' || this.position === 'right') {\r\n            return 'column';\r\n        }\r\n    }\r\n    // \r\n    contentFillStates = new BehaviorSubject<boolean>(false);\r\n    // ,\r\n    _contentFill: any;\r\n    // \r\n    widthStates = new BehaviorSubject<any>(false);\r\n    // tabs\r\n    _width: any;\r\n    // \r\n    heightStates = new BehaviorSubject<any>(false);\r\n    // tabs\r\n    _height: any;\r\n    // tabs\r\n    _position: any;\r\n    positionStates = new BehaviorSubject<string>('top');\r\n    menuItemsWidth = 'auto';\r\n    //maxDropdownH = 200; -----\r\n    //   -----\r\n    maxDropdownW = -1;\r\n    private _customClass = '';\r\n    // \r\n    private _tabs: FarrisTabComponent[] = [];\r\n\r\n    headerExtendConf: any;\r\n    // \r\n    toolbarConf: ToolbarConf = {\r\n        position: '',\r\n        contents: []\r\n    };\r\n    // \r\n    toolbarDpHidden = true;\r\n    // \r\n    inMoreButtonContents: any[] = [];\r\n    // \r\n    dropdownTabs = [];\r\n    // \r\n    hideButtons = true;\r\n    // \r\n    tabWidth: number;\r\n\r\n    // \r\n    hideDropDown = true;\r\n    // \r\n    disableLeft = false;\r\n    // \r\n    disableRight = false;\r\n    // \r\n    private el: HTMLElement;\r\n    // \r\n    subscription: Subscription[] = [];\r\n    // \r\n    disableRTooltip = true;\r\n    // \r\n    disableLTooltip = true;\r\n    // \r\n    leftTooltipTabs = [];\r\n    // \r\n    rightTooltipTabs = [];\r\n    // Tab\r\n    private _tabContainerEl: HTMLElement;\r\n    private maxTooltipLen = 5;\r\n    // Tab\r\n    activeId = '';\r\n    private ro: ResizeObserver = null;\r\n    // tab\r\n    searchTabText: string;\r\n\r\n    @ViewChild('ddm') ddm: NgbDropdownMenu;\r\n\r\n    private _ddmHandler: any = null;\r\n    //  \r\n    dpState = [false];\r\n    // toolbarvisible\r\n    private visibleRecord={};\r\n    private disableRecord={};\r\n    // \r\n    referEl = null;\r\n    trackByButton(index: number, btn: any): number { return btn.id; };\r\n\r\n\r\n    tabVisibleChanged = new Subject();\r\n\r\n    constructor(\r\n        private stService: TabService,\r\n        private elementRef: ElementRef,\r\n        private renderer: Renderer2,\r\n        private cdRef: ChangeDetectorRef,\r\n        private ngZone: NgZone\r\n    ) {\r\n        this.el = this.elementRef.nativeElement;\r\n        if (this.el.parentElement) {\r\n            this.referEl = this.el.parentElement;\r\n        }\r\n        this.verifyConfig();\r\n\r\n        this.subscription.push(this.tabVisibleChanged.subscribe((e: any) => {\r\n            this._reCalculateAll();\r\n            this._calculateToolbarDropdownIsShow();\r\n            this._calculateButtonsShow();\r\n        }));\r\n    }\r\n\r\n    /**  */\r\n    private verifyConfig() {\r\n        const config: TabConfig = this.stService.getConfig();\r\n        Object.assign(this, config);\r\n        this.scrollStep = parseInt(this.scrollStep + '', 10);\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        if (!this.beforeSelect) {\r\n            this.beforeSelect = () => of(true);\r\n        }\r\n        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))\r\n            .subscribe((btnInfo:ToolbarContentsConf) => {\r\n                    if(btnInfo.click&&typeof btnInfo.click=='function'){\r\n                        btnInfo.click();\r\n                    }\r\n            });\r\n\r\n\r\n        this._tabContainerEl = this.tabContainer.nativeElement;\r\n        this._createStream();\r\n        this.activeId = this.selectId;\r\n\r\n        if (this.ngZone) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                if (this.ro === null) {\r\n                    this.ro = new ResizeObserver((el) => {\r\n                        this._reCalculateAll();\r\n                        this._calculateToolbarDropdownIsShow();\r\n                        this._calculateButtonsShow();\r\n                    });\r\n\r\n                    this.ro.observe(this.el.parentElement);\r\n                }\r\n            });\r\n        }\r\n    }\r\n        /**\r\n         * \r\n         */\r\n    private visibleStateBind(){\r\n        this._visibleDatas.subscribe((data) => {\r\n            // \r\n            const idArray = Object.keys(data);\r\n            idArray.forEach((btnId) => {\r\n                this.visibleRecord[btnId]=data[btnId];\r\n            });  \r\n            if(this.toolbarConf&&this.toolbarConf.contents.length>0){\r\n                //             \r\n                this.changeState(data,\"visible\");\r\n                // \r\n                this._reCalculateAll();\r\n                this._calculateToolbarDropdownIsShow();\r\n                this._calculateButtonsShow();\r\n            }\r\n        });\r\n    }\r\n    private disableStateBind(){\r\n        this._disableStatesDatas.subscribe((data) => {\r\n            // \r\n            const idArray = Object.keys(data);\r\n            idArray.forEach((btnId) => {\r\n                this.disableRecord[btnId]=data[btnId];\r\n            });  \r\n            if(this.toolbarConf&&this.toolbarConf.contents.length>0){\r\n                //             \r\n                this.changeState(data,\"disable\");\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes['selectId']) {\r\n            this.selectTab(changes['selectId'].currentValue);\r\n        }\r\n    }\r\n\r\n    /*  */\r\n    ngAfterContentInit(): void { }\r\n    ngAfterContentChecked() {\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        // HostBinding, class\r\n        this.renderer.addClass(this.el, 'farris-tabs');\r\n        this.renderer.addClass(this.el, 'flex-column');\r\n        this.contentFillStates.subscribe(data => {\r\n            if (data) {\r\n                this.renderer.addClass(this.el, 'f-tabs-content-fill');\r\n            } else {\r\n                this.renderer.removeClass(this.el, 'f-tabs-content-fill');\r\n            }\r\n        });\r\n        this.widthStates.subscribe(data => {\r\n            if (data) {\r\n                this.renderer.setStyle(this.el, 'width', data);\r\n            }\r\n        });\r\n        this.heightStates.subscribe(data => {\r\n            if (data) {\r\n                this.renderer.setStyle(this.el, 'height', data);\r\n            }\r\n        });\r\n        this.positionStates.subscribe(data => {\r\n            this.renderer.removeClass(this.el, 'flex-row');\r\n            this.renderer.removeClass(this.el, 'flex-column');\r\n            this.renderer.removeClass(this.el, 'flex-row-reverse');\r\n            this.renderer.removeClass(this.el, 'flex-column-reverse');\r\n            if (data === 'left') {\r\n                this.renderer.addClass(this.el, 'flex-row');\r\n            }\r\n            if (data === 'top') {\r\n                this.renderer.addClass(this.el, 'flex-column');\r\n            }\r\n            if (data === 'right') {\r\n                this.renderer.addClass(this.el, 'flex-row-reverse');\r\n            }\r\n            if (data === 'bottom') {\r\n                this.renderer.addClass(this.el, 'flex-column-reverse');\r\n            }\r\n        });\r\n        // \r\n        this.getToolbarConf();\r\n        this._reCalculateAll();\r\n        this._setActive();\r\n        this._changeTitleStyle();\r\n        this._listenShowChanges();\r\n        const self = this;\r\n        // this.renderer.listen(document, 'keyup', function (e) {\r\n        //     if (self.searchInputVisible) {\r\n        //         console.log(e);\r\n        //     }\r\n        // });\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this._ddmHandler = this.renderer.listen(document, 'mousedown', (e: any) => {\r\n                if (!e.target.closest('.farris-tabs-header')) {\r\n                    if (this.el && this.el.querySelector('.dropdown-menu')) {\r\n                        if (this.ddm && this.ddm.dropdown) {\r\n                            this.ddm.dropdown.close();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ngAfterViewChecked(): void {\r\n\r\n    }\r\n    ngOnDestroy() {\r\n        //   \r\n        this.subscription.forEach(sub => {\r\n            sub.unsubscribe();\r\n        });\r\n        this.subscription = [];\r\n\r\n        if (this.ro) {\r\n            if (this.el.parentElement) {\r\n                this.ro.unobserve(this.el.parentElement);\r\n            }\r\n            this.ro = null;\r\n        }\r\n\r\n        if (this._ddmHandler) {\r\n            this._ddmHandler();\r\n            this._ddmHandler = null;\r\n        }\r\n        if (this.clickSubscription) {\r\n            this.clickSubscription.unsubscribe();\r\n        }\r\n        if (\r\n            this._visibleDatas &&\r\n            this._visibleDatas.hasOwnProperty(\"unsubscribe\")\r\n        ) {\r\n            this._visibleDatas[\"unsubscribe\"]();\r\n            this._visibleDatas = null;\r\n        }\r\n    }\r\n    clickHandler(btnInfo) {\r\n        if (!btnInfo) {\r\n            return;\r\n        }\r\n        if(btnInfo.hasOwnProperty('disable')&&btnInfo['disable']){\r\n            // \r\n            return;\r\n        }\r\n        this.clickItems.next(btnInfo);\r\n    }\r\n    // tab\r\n    openChange(e) {\r\n        this.searchInputVisible = e;\r\n        this.searchTabText = undefined;\r\n        this._reCalculateAll();\r\n        // \r\n        // \r\n        if (e) {\r\n            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';\r\n        } else {\r\n            this.menuItemsWidth = 'auto';\r\n        }\r\n\r\n    }\r\n    // tab\r\n    searchTab(e) {\r\n        this.stopBubble(e);\r\n        this._reCalculateAll();\r\n    }\r\n    // \r\n    stopBubble(e) {\r\n        if (e && e.stopPropagation) {\r\n            e.stopPropagation();\r\n        } else {\r\n            window.event.cancelBubble = true;\r\n        }\r\n    }\r\n    /**\r\n     * Ximena 23.08.30 ,\r\n     * Todo:\r\n     * 1btnVisible\r\n     * 2\r\n     * 3\r\n     * @param id \r\n     * @returns \r\n     */\r\n    getToolbarStateVisible(btnItem) {\r\n        let stateProp=\"visible\";\r\n        if (btnItem.hasOwnProperty(stateProp)) {\r\n            return btnItem[stateProp];\r\n        }\r\n        // \r\n        return true;\r\n    }\r\n    getToolbarStateDisable(btnItem) {\r\n        let stateProp=\"disable\";\r\n        if (btnItem.hasOwnProperty(stateProp)) {\r\n            return btnItem[stateProp];\r\n        }\r\n        // \r\n        return false;\r\n    }\r\n    /**\r\n     * \r\n     * @param id \r\n     * @param state \r\n     * @returns \r\n     */\r\n    getToolbarState(id: string, state: Observable<any> = this.btnStates) {\r\n        if (state) {\r\n            return state.pipe(\r\n                map((n: any) => {\r\n                    if (n[id] === undefined) {\r\n                        // console.warn(`ID${id} `);\r\n                        return false;\r\n                    }\r\n                    return n[id];\r\n                })\r\n            );\r\n        } else {\r\n            return of(true);\r\n        }\r\n    }\r\n    // \r\n    private _listenShowChanges() {\r\n        // \r\n        this.tabs.forEach(item => {\r\n            item.showStates.subscribe(data => {\r\n                let activeIdToken;\r\n                item._show = data;\r\n                if (data === false && item.id === this.activeId) {\r\n                    item._active = false;\r\n                    this.activeId = '';\r\n                    activeIdToken = false;\r\n                }\r\n                const tabs = this.tabs.filter(item => item._show === true);\r\n                const defaultTabId = tabs.length ? tabs[0].id : null;\r\n                // tab\r\n                if (defaultTabId && activeIdToken === false) {\r\n                    this.tabs.forEach((item, index) => {\r\n                        if (item.id === defaultTabId) {\r\n                            this.activeId = item.id;\r\n                            this.tabs[index]._active = true;\r\n                        }\r\n                    });\r\n                    this.getToolbarConf();\r\n                }\r\n                this.cdRef.detectChanges();\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Tab\r\n     * @param  tabId tab\r\n     */\r\n    selectTab(tabId: string) {\r\n        const selectedTab = this._getTabById(tabId);\r\n        this._selectTab(selectedTab.tab, selectedTab.index);\r\n    }\r\n    _cpSelectTabByIndex(ev: Event, id: string, ddm = null) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n        const targetEL = ev.target as any;\r\n        if (\r\n            targetEL.className.indexOf('st-drop-close') > -1 ||\r\n            targetEL.parentElement.className.indexOf('st-drop-close') > -1\r\n        ) {\r\n            //     \r\n            this.closeTab(id);\r\n        } else {\r\n            // \r\n            this.selectTab(id);\r\n        }\r\n        this.getToolbarConf();\r\n        this.cdRef.markForCheck();\r\n        this._reCalculateAll();\r\n        this._calculateToolbarDropdownIsShow();\r\n        this._calculateButtonsShow();\r\n\r\n        if (ddm) {\r\n            ddm.dropdown.close();\r\n        }\r\n\r\n        return false;\r\n    }\r\n    /**\r\n     * tabs tab\r\n     * @param index tabs\r\n     */\r\n    selectTabByIndex(index: number) {\r\n        if (index >= 0 && index < this.tabs.length) {\r\n            const selectTab = this.tabs[index];\r\n            this._selectTab(selectTab, index);\r\n        }\r\n    }\r\n    /* tab  tabid id */\r\n    private _selectTab(tab, index) {\r\n        if (tab && !tab.disabled && this.activeId !== tab.id) {\r\n\r\n            if (!this.beforeSelect) {\r\n                this.beforeSelect = () => of(true);\r\n            }\r\n\r\n            const tabsChangeEventParam = {\r\n                prevId: this.activeId,\r\n                nextId: tab.id\r\n            };\r\n            this.beforeSelect(tabsChangeEventParam).subscribe((e) => {\r\n                if (e) {\r\n                    this.activeId = tab.id;\r\n                    // tab  tab\r\n                    // let index = -1;\r\n                    this.tabs.forEach((item: FarrisTabComponent, i: number) => {\r\n                        item._active = false;\r\n                    });\r\n                    this.tabs[index]._active = true;\r\n\r\n                    this.getToolbarConf();\r\n                    // \r\n                    this.scrollTabIntoView(index);\r\n                    this.cdRef.detectChanges();\r\n\r\n                    this.tabChange.emit(tabsChangeEventParam);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    private _setActive() {\r\n        if (this.tabs.length) {\r\n            const tabs = this.tabs.filter(item => item._show === true);\r\n            const activeTab = this._getTabById(this.activeId).tab;\r\n            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;\r\n\r\n            // show=falsetab\r\n            if (tabs.length) {\r\n                if (this.activeId) {\r\n                    const targetTab = tabs.find(item => item.id === this.activeId);\r\n                    if (targetTab) {\r\n                        this.activeId = targetTab.id;\r\n                    }\r\n                } else {\r\n                    this.activeId = tabs[0].id;\r\n                }\r\n            } else {\r\n                this.activeId = null;\r\n            }\r\n            this.tabs.forEach(item => {\r\n                item._active = false;\r\n                if (item.id === this.activeId) {\r\n                    item._active = true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @param activeId tab\r\n     */\r\n    showTab(tabId: any, selectable = true) {\r\n        const len = this.tabs.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.tabs[i].id === tabId) {\r\n                this.tabs[i]._show = true;\r\n                if (selectable) {\r\n                    this.selectTab(tabId);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @param activeId tab\r\n     */\r\n    hideTab(activeId: any) {\r\n        const showTabs = this.tabs.filter(item => {\r\n            return item._show === true;\r\n        });\r\n        const len = showTabs.length - 1;\r\n        if (len < 0) {\r\n            return;\r\n        }\r\n        let index: number;\r\n        for (let i = 0; i <= len; i++) {\r\n            if (showTabs[i].id === activeId) {\r\n                showTabs[i]._show = false;\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        if (index === undefined) {\r\n            return;\r\n        } else if (index === len && len < 1) {\r\n            this.selectTab('');\r\n        } else if (index === len && len >= 1) {\r\n            this.selectTab(showTabs[len - 1].id);\r\n        } else {\r\n            this.selectTab(showTabs[index + 1].id);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param curTabs \r\n     * @param activeId \r\n     */\r\n    addTabs(curTabs: any[], index, setActiveId) {\r\n        if (curTabs.length > 0) {\r\n            this.tabs.splice(index, 0, ...curTabs);\r\n            // \r\n            this.tabs = this._unique(this.tabs);\r\n        }\r\n        if (setActiveId && this.activeId !== setActiveId) {\r\n            const filterTab = this._getTabById(setActiveId);\r\n            if (filterTab.index >= 0) {\r\n                this.selectTab(setActiveId);\r\n                this.activeId = setActiveId;\r\n                this.scrollTabIntoView(filterTab.index);\r\n            }\r\n        }\r\n        this.cdRef.detectChanges();\r\n        this._reCalculateAll();\r\n        this._changeTitleStyle();\r\n    }\r\n    /**\r\n     *   \r\n     *\r\n     */\r\n    private _unique(objArray) {\r\n        const hash = {};\r\n        objArray = objArray.reduce(function (item, next) {\r\n            if (hash[next.id]) {\r\n                hash[next.id] = '';\r\n            } else {\r\n                hash[next.id] = true && item.push(next);\r\n            }\r\n            return item;\r\n        }, []);\r\n        return objArray;\r\n    }\r\n    /* tabtab */\r\n    removeTabByIndex(index: number) {\r\n        const len = this.tabs.length - 1;\r\n        if (index < 0 || index > len) {\r\n            return;\r\n        }\r\n        const removeTab = this.tabs[index];\r\n        removeTab._active = false;\r\n        if (this.activeId === removeTab.id) {\r\n            // \r\n            if (len === 0) {\r\n                //  id\r\n                this.activeId = '';\r\n            } else if (index === len) {\r\n                //  \r\n                this.activeId = this.tabs[len - 1].id;\r\n                this.tabs[index - 1]._active = true;\r\n            } else {\r\n                //   \r\n                this.activeId = this.tabs[index + 1].id;\r\n                this.tabs[index + 1]._active = true;\r\n            }\r\n            this.tabs.splice(index, 1);\r\n            this.scrollTabIntoView(index);\r\n        } else {\r\n            this.tabs.splice(index, 1);\r\n        }\r\n        this.tabRemove.emit({\r\n            removeIndex: index,\r\n            removeId: removeTab.id,\r\n            activeId: this.activeId\r\n        });\r\n        this.cdRef.detectChanges();\r\n    }\r\n    /**\r\n     *   \r\n     * @param string\r\n     */\r\n    closeTab(activeId) {\r\n        const len = this.tabs.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const tab = this.tabs[i];\r\n            if (tab.id === activeId) {\r\n                this.removeTabByIndex(i);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    load() {\r\n        for (let i = 0; i < this.tabs.length; i++) {\r\n            if (this.tabs[i].id === this.activeId) {\r\n                this.tabs[i]._active = true;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * tabtitle,6\r\n     */\r\n    private _truncateTitle() {\r\n        this.tabs = this.tabs.map(item => {\r\n            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;\r\n            return item;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * tabtitle\r\n     */\r\n    private _changeTitleStyle() {\r\n        if (this.autoTitleWidth) {\r\n            return;\r\n        }\r\n        const $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');\r\n        for (var k = 0; k < $textEls.length; k++) {\r\n            let parentEl = $textEls[k].parentNode;\r\n            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {\r\n                this.tabs[k].titleOverflow = true;\r\n            } else {\r\n                this.tabs[k].titleOverflow = false;\r\n            }\r\n        }\r\n        //this.cdRef.detectChanges();\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private _createStream() {\r\n        [this.rightNav, this.leftNav].forEach((curBtn, index) => {\r\n            const direction = index ? -1 : 1;\r\n\r\n            const mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');\r\n            const mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');\r\n            const newMouseDown$ = mousedown$.pipe(\r\n                switchMap((event: MouseEvent) => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    const interval$ = of(0).pipe(\r\n                        // concat(interval(80)),\r\n                        takeUntil(mouseup$),\r\n                        scan((sum: number, num: number) => {\r\n                            return sum + this.scrollStep * direction;\r\n                        }, 0),\r\n                        takeWhile(num => {\r\n                            if (direction > 0) {\r\n                                return !this.disableRight;\r\n                            }\r\n                            return !this.disableLeft;\r\n                        }),\r\n                        map(v => {\r\n                            return { value: v, direction };\r\n                        })\r\n                    );\r\n                    return interval$;\r\n                })\r\n            );\r\n            const mousepressSub = newMouseDown$.subscribe(change => {\r\n                this._scrollTab(change.value, change.direction);\r\n            });\r\n            this.subscription.push(mousepressSub);\r\n        });\r\n\r\n        // if (this.autoResize) {\r\n        //     // windows resize\r\n        //     this.subscription.push(\r\n        //         fromEvent(window, 'resize')\r\n        //             .pipe(throttleTime(80))\r\n        //             .subscribe(e => {\r\n        //                 this.cdRef.detectChanges();\r\n        //             })\r\n        //     );\r\n        // }\r\n    }\r\n    /**\r\n     * \r\n     * @param dist_scroll \r\n     * @param direction \r\n     */\r\n    private _scrollTab(move, direction) {\r\n        const dist_scrollleft = this._tabContainerEl.scrollLeft + move;\r\n        const max_scroll_left =\r\n            this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;\r\n        // \r\n        if (direction > 0) {\r\n            this._tabContainerEl.scrollLeft = Math.min(\r\n                dist_scrollleft,\r\n                max_scroll_left\r\n            );\r\n        } else if (direction < 0) {\r\n            // \r\n            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);\r\n        }\r\n        this._reCalculateSides();\r\n        // this.cdRef.detectChanges();\r\n    }\r\n    /**\r\n     * \r\n     * index\r\n     */\r\n    scrollTabIntoView(index) {\r\n        if (!this._tabContainerEl || this.hideButtons) {\r\n            return;\r\n        }\r\n        const tabIndex = parseInt(index + '', 10);\r\n        let tabToScroll;\r\n\r\n        // first we find the tab element.\r\n        if (tabIndex >= 0) {\r\n            const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');\r\n            if (allTabs.length > tabIndex) {\r\n                tabToScroll = allTabs[tabIndex];\r\n            }\r\n        } else {\r\n            // scroll selected tab into view\r\n            const activeTab = this._tabContainerEl.querySelector('li.active');\r\n            if (activeTab) {\r\n                tabToScroll = activeTab;\r\n            }\r\n        }\r\n\r\n        if (tabToScroll) {\r\n            const tab_left = parseInt(\r\n                tabToScroll.getBoundingClientRect().left + '',\r\n                10\r\n            );\r\n            const tabs_left = parseInt(\r\n                this._tabContainerEl.getBoundingClientRect().left + '',\r\n                10\r\n            );\r\n            const rightPosition =\r\n                tab_left +\r\n                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -\r\n                tabs_left;\r\n\r\n            const leftPosition = tab_left - tabs_left - 10;\r\n            if (leftPosition < 0) {\r\n                this._scrollTab(leftPosition, -1);\r\n            } else if (rightPosition > this._tabContainerEl.offsetWidth) {\r\n                this._scrollTab(\r\n                    rightPosition - this._tabContainerEl.offsetWidth + 20,\r\n                    1\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * tabtab\r\n     * tab\r\n     */\r\n    private getToolbarConf() {\r\n        const tabConfig = this.tabs.filter(item => {\r\n            return item._active === true;\r\n        })[0];\r\n        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {\r\n            this.toolbarConf = null;\r\n        } else {\r\n            this.toolbarConf = tabConfig.toolbar;           \r\n        }        \r\n        // \r\n        this.changeState(this.visibleRecord,\"visible\");   \r\n        this.changeState(this.disableRecord,\"disable\");\r\n        // tab\r\n        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {\r\n            this.headerExtendConf = null;\r\n        } else {\r\n            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;\r\n        }\r\n        // \r\n        this.toolbarDpHidden = true;\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    private _calculateToolbarDropdownIsShow() {\r\n        let headerExtendEl: any;\r\n        let headerExtendElWidth = 0;\r\n        if (!this.toolbarContainer || !this.toolbarConf) {\r\n            return;\r\n        }\r\n        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;\r\n        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');\r\n        if (!divEl) {\r\n            return;\r\n        }\r\n        if (this.headerExtendConf) {\r\n            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');\r\n            this.renderer.removeStyle(headerExtendEl, 'overflow');\r\n            headerExtendElWidth = headerExtendEl.offsetWidth;\r\n        }\r\n        // \r\n        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {\r\n            this.toolbarDpHidden = false;\r\n        } else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {\r\n            // \r\n            this.toolbarDpHidden = false;\r\n        } else {\r\n            this.toolbarDpHidden = true;\r\n        }\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    private _calculateButtonsShow() {\r\n        let headerExtendEl: any;\r\n        let headerExtendElWidth = 0;\r\n        if (!this.toolbarContainer || !this.toolbarConf) {\r\n            return;\r\n        }\r\n        const toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;\r\n        let divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');\r\n        let btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;\r\n        let btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('.btn--cal');\r\n        if (!divEl || btnPlaceHolderBtns.length == 0) {\r\n            return;\r\n        }\r\n        // BuginContentheaderExtendConfinHead\r\n        if (this.headerExtendConf) {\r\n            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');\r\n            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;\r\n\r\n        }\r\n        const moreButton = btnPlaceHolderEl.parentElement.querySelector('.morebtn');\r\n        //       \r\n        let basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);\r\n        let basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;\r\n        let toolbarDropdownHidden = true;\r\n        let k = 0\r\n        // \r\n        if (btnPlaceHolderBtns.length == 1) {\r\n            if (btnPlaceHolderEl.offsetWidth > basicWidth) {\r\n                toolbarDropdownHidden = false;\r\n            } else {\r\n                k = 1;\r\n            }\r\n        } else {\r\n            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {\r\n                // ,\r\n                if (k == btnPlaceHolderBtns.length - 1) {\r\n                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {\r\n                        toolbarDropdownHidden = false;\r\n                        k = k - 1;\r\n                        break;\r\n                    }\r\n                } else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {\r\n                    toolbarDropdownHidden = false;\r\n                    k = k - 1;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.toolbarDpHidden = toolbarDropdownHidden;\r\n        let showBtns = divEl.querySelectorAll('.btn--cal');\r\n        for (let i = 0; i < k; i++) {\r\n            this.renderer.setStyle(showBtns[i], 'display', '');\r\n        }\r\n        for (let m = k; m < showBtns.length; m++) {\r\n            this.renderer.setStyle(showBtns[m], 'display', 'none');\r\n        }\r\n        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {\r\n            // \r\n            let filterShowBtns = this.toolbarConf.contents.filter((item) => this.getToolbarStateVisible(item));\r\n            // \r\n            this.inMoreButtonContents = filterShowBtns.filter(\r\n                (item, index) => {\r\n                    return index >= k;\r\n                }\r\n            );\r\n        }        \r\n        this.cdRef&&!this.cdRef['destroyed']&&this.cdRef.detectChanges(); \r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private _reCalculateAll() {\r\n        if (!this._tabContainerEl) {\r\n            return;\r\n        }\r\n\r\n        let tabParentWidth = this.tabParent.nativeElement.offsetWidth;\r\n        if (!this.hideButtons) {\r\n            const tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue(\"margin-right\"));\r\n            const tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue(\"margin-left\"));\r\n            tabParentWidth += tr + tl;\r\n        }\r\n\r\n        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;\r\n\r\n        this.hideDropDown = this.showDropDown ? this.hideButtons : true;\r\n        if (!this.hideButtons) {\r\n            if (!this.hideDropDown) {\r\n                this.dropdownTabs = [].concat(this.tabs);\r\n            }\r\n            if (this.searchTabText) {\r\n                this.dropdownTabs = this.dropdownTabs.filter(item => {\r\n                    return item['title'].indexOf(this.searchTabText) !== -1;\r\n                });\r\n            }\r\n            this._reCalculateSides();\r\n        }\r\n        this.dpState = [false];\r\n        this.cdRef.detectChanges();\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private _reCalulateTooltips() {\r\n        if (!this._tabContainerEl || this.hideButtons) {\r\n            return;\r\n        }\r\n        const t_right_tooltips = [];\r\n        const t_left_tooltips = [];\r\n        const allTabs = this._tabContainerEl.querySelectorAll('.nav-item');\r\n        const len = allTabs.length;\r\n        const hiddenTabs = this.tabs.filter(item => {\r\n            return item._show !== true;\r\n        })\r\n        const hiddenTabsLength = hiddenTabs.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const leftPosition =\r\n                allTabs[i].getBoundingClientRect().left -\r\n                this._tabContainerEl.getBoundingClientRect().left;\r\n            const rightPosition =\r\n                allTabs[i].getBoundingClientRect().width + leftPosition;\r\n            if (rightPosition > this._tabContainerEl.offsetWidth) {\r\n                t_right_tooltips.push(this.tabs[i]);\r\n            } else if (leftPosition < 0) {\r\n                t_left_tooltips.push(this.tabs[i]);\r\n            }\r\n        }\r\n\r\n        this.leftTooltipTabs = []\r\n            .concat(t_left_tooltips)\r\n            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));\r\n        this.rightTooltipTabs = []\r\n            .concat(t_right_tooltips)\r\n            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));\r\n        this.disableRTooltip = this.rightTooltipTabs.length < 1;\r\n        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private _reCalculateSides() {\r\n        this.disableRight =\r\n            this._tabContainerEl.scrollLeft >=\r\n            this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;\r\n        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;\r\n        this._reCalulateTooltips();\r\n    }\r\n    /**\r\n     * idTab\r\n     * @param id ID\r\n     */\r\n    private _getTabById(id: string) {\r\n        const indexWidthId = [];\r\n        const tabsWithId: FarrisTabComponent[] = this.tabs.filter(\r\n            (tab, index) => {\r\n                if (tab.id === id) {\r\n                    indexWidthId.push(index);\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n        );\r\n        return {\r\n            tab: tabsWithId.length ? tabsWithId[0] : null,\r\n            index: indexWidthId.length ? indexWidthId[0] : -1\r\n        };\r\n    }\r\n    /* stringnumber    */\r\n    resolveSize(size) {\r\n        const regex = /px|em|rem|pt|%/;\r\n        // \r\n        return regex.test(size)\r\n            ? `${parseInt(size, 10)}${size.match(regex)[0]}`\r\n            : `${size}px`;\r\n    }\r\n    /*\r\n      tab\r\n       */\r\n    // removeAllTab() {\r\n    //     this.tabs.splice(0, this.tabs.length);\r\n    // }\r\n    hasInHeadCl() {\r\n        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {\r\n            return true;\r\n        }\r\n        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n        /**\r\n     * \r\n     * @param values\r\n     */\r\n        private changeState(values, stateProp) {            \r\n            if(!this.toolbarConf||!this.toolbarConf.contents){\r\n                return;\r\n            }\r\n            const idArray = Object.keys(values);\r\n            this.toolbarConf.contents.forEach((item) => {\r\n                const findId = idArray.find((id) => id == item.id);\r\n                if (findId) {\r\n                    item[stateProp] = values[findId];\r\n                }\r\n                if(item['children']&&item['children'].length>0){\r\n                    // \r\n                    let dpChildren=item.children;\r\n                    dpChildren.forEach((item) => {\r\n                        const findId = idArray.find((id) => id == item.id);\r\n                        if (findId) {\r\n                            item[stateProp] = values[findId];\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            this.inMoreButtonContents.forEach((item) => {\r\n                const findId = idArray.find((id) => id == item.id);\r\n                if (findId) {\r\n                    item[stateProp] = values[findId];\r\n                }\r\n                if(item['children']&&item['children'].length>0){\r\n                    // \r\n                    let dpChildren=item.children;\r\n                    dpChildren.forEach((item) => {\r\n                        const findId = idArray.find((id) => id == item.id);\r\n                        if (findId) {\r\n                            item[stateProp] = values[findId];\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            this.dpState = [false];\r\n            this.cdRef&&!this.cdRef['destroyed']&&this.cdRef.detectChanges();\r\n        }\r\n}\r\n","import { Directive, TemplateRef, Input } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[farrisTabsExtend]',\r\n})\r\nexport class FarrisTabsExtendDirective {\r\n\r\n    @Input() extendCls: string;\r\n\r\n    constructor(\r\n        public templateRef: TemplateRef<any>\r\n    ) {\r\n\r\n    }\r\n\r\n}","import {\r\n    Component, Input, TemplateRef, ChangeDetectorRef, Compiler,\r\n    ComponentFactoryResolver, Renderer2, ElementRef,\r\n    ContentChild, OnInit, AfterViewInit, ViewContainerRef, Optional, Type,\r\n    NgModuleFactory,\r\n    AfterViewChecked\r\n} from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { FarrisTabsComponent } from '../tabs/tabs.component';\r\nimport { FarrisTabsExtendDirective } from './extend.directive';\r\n\r\n@Component({\r\n    selector: 'farris-tab',\r\n    templateUrl: './tab.component.html'\r\n})\r\nexport class FarrisTabComponent implements OnInit, AfterViewInit, AfterViewChecked {\r\n    // tabsflex  flex\r\n    // tslint:disable-next-line:no-inferrable-types\r\n    // \r\n    setIntervalTab: any;\r\n    \r\n    @Input('width') tabWidth: number = -1;\r\n    @Input() set show(value) {\r\n        if (this._show != value) {\r\n            this.showStates.next(value);\r\n            this._show = value;\r\n            this.scrollTabs.tabVisibleChanged.next({ tab: this, visible: value });\r\n        }\r\n    }\r\n    get show(){\r\n        return this._show;\r\n    }\r\n    @Input() asyncComponent: Type<any>;\r\n    @Input() asyncModule: NgModuleFactory<any>;\r\n    @Input() id: string;\r\n    // \r\n    @Input() titleCustomCls = '';\r\n    // \r\n    titleOverflow:false;\r\n    // tab \r\n    @Input() title: string;\r\n    // selected \r\n    // tslint:disable-next-line:no-inferrable-types\r\n    selected: boolean = false;\r\n    // disabled \r\n    @Input() disabled: boolean;\r\n    // \r\n    @Input() removeable: boolean;\r\n    @Input() toolbar: any;\r\n    // @Input() content: string | Type<any>;\r\n    // \r\n    @ContentChild('content') contentTempl: TemplateRef<any>;\r\n    @ContentChild(FarrisTabsExtendDirective) farrisTabsExtendDirective: any;\r\n    // appDiv: T;\r\n    showStates = new BehaviorSubject(true);\r\n\r\n    // \r\n    activeState = new BehaviorSubject(false);\r\n    private _activeForOld: any;\r\n    set _active(value: any) {\r\n        this._activeForOld = value;\r\n        this.activeState.next(value);\r\n    }\r\n    get _active() {\r\n        return this._activeForOld;\r\n    }\r\n    view: ViewContainerRef;\r\n    tempDirective: any;\r\n    popupFlag: boolean;\r\n    _show: boolean = true;\r\n    // \r\n    get active() {\r\n        return this._active;\r\n    }\r\n    headingRef: TemplateRef<any>;\r\n    compOrHtml: any;\r\n    constructor(private cp: Compiler, public componentFactoryResolver: ComponentFactoryResolver, private render: Renderer2,\r\n        private el: ElementRef, private cef: ChangeDetectorRef, @Optional() public scrollTabs: FarrisTabsComponent) {\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    ngOnInit() {\r\n        this.scrollTabs.tabs.push(this);\r\n        if (!this.scrollTabs.activeId) {\r\n            this.scrollTabs.tabs[0]._active = true;\r\n        } else {\r\n            this.scrollTabs.load();\r\n        }\r\n    }\r\n    ngAfterViewInit(): void {\r\n        // HostBinding, class\r\n        const nEl = this.el.nativeElement;\r\n        this.activeState.subscribe(data => {\r\n            this.render.addClass(nEl, 'farris-tabs-body');\r\n            if (data) {\r\n                this.render.addClass(nEl, 'f-tab-active');\r\n                this.render.removeClass(nEl, 'f-tab-d-none');\r\n            } else {\r\n                this.render.addClass(nEl, 'f-tab-d-none');\r\n                this.render.removeClass(nEl, 'f-tab-active');\r\n            }\r\n        });\r\n    }\r\n    ngAfterViewChecked() {\r\n\r\n    }\r\n    loadComponent() {\r\n\r\n    }\r\n\r\n}\r\n","import {\r\n    Directive, Input, ViewContainerRef, TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef, OnInit,\r\n    KeyValueDiffers, KeyValueDiffer, DoCheck\r\n} from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[tabTransclude]',\r\n})\r\nexport class TabTranscludeDirective implements OnInit, DoCheck {\r\n    _trancludeTempl: TemplateRef<any>;\r\n    setIntervalTemp: any;\r\n    private _differ: any;\r\n    @Input('tabTransclude')\r\n    get trancludeTempl() {\r\n        return this._trancludeTempl;\r\n    }\r\n    set trancludeTempl(templateRef: TemplateRef<any>) {\r\n        this._trancludeTempl = templateRef;\r\n        if (templateRef) {\r\n            this.viewRef.createEmbeddedView(templateRef);\r\n        }\r\n        // if (!this._differ && templateRef) {\r\n        //     this._differ = this._differs.find(templateRef).create();\r\n        // }\r\n    }\r\n    viewRef: ViewContainerRef;\r\n    constructor(viewRef: ViewContainerRef, private _differs: KeyValueDiffers) {\r\n        // setTimeout(() => {\r\n            this.viewRef = viewRef;\r\n        // }, 5000);\r\n\r\n        // this.cd.detectChanges();\r\n    }\r\n    ngOnInit() {\r\n        // this.setIntervalTemp = setInterval(() => {\r\n        //     if (this._trancludeTempl && this.viewRef) {\r\n        //         console.log('sa');\r\n        //         // this.viewRef = this.viewRef;\r\n        //         clearInterval(this.setIntervalTemp);\r\n        //     }\r\n        // }, 0);\r\n    }\r\n    ngDoCheck() {\r\n        // const CHANGE = this._differ.diff(this._trancludeTempl);\r\n        // if (CHANGE) {\r\n        //     this.viewRef.createEmbeddedView(this._trancludeTempl);\r\n        // }\r\n    }\r\n    // ng\r\n}\r\n","import { Directive, TemplateRef, ElementRef } from '@angular/core';\r\nimport { FarrisTabComponent } from './tab.component';\r\n@Directive({\r\n    selector: '[tabHead]'\r\n})\r\nexport class TabHeadDirective {\r\n    constructor(tabItem: FarrisTabComponent, el: ElementRef, template: TemplateRef<any>) {\r\n        tabItem.headingRef = template;\r\n    }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {PlacementArray} from '../util/positioning';\r\n\r\n\r\n/**\r\n * Configuration service for the NgbDropdown directive.\r\n * You can inject this service, typically in your root component, and customize the values of its properties in\r\n * order to provide default values for all the dropdowns used in the application.\r\n */\r\n@Injectable()\r\nexport class NgbDropdownConfig {\r\n  autoClose: boolean | 'outside' | 'inside' = true;\r\n  placement: PlacementArray = 'bottom-right';\r\n}\r\n","// previous version:\r\n// https://github.com/angular-ui/bootstrap/blob/07c31d0731f7cb068a1932b8e01d2312b796b4ec/src/position/position.js\r\nexport class Positioning {\r\n  private getAllStyles(element: HTMLElement) { return window.getComputedStyle(element); }\r\n\r\n  private getStyle(element: HTMLElement, prop: string): string { return this.getAllStyles(element)[prop]; }\r\n\r\n  private isStaticPositioned(element: HTMLElement): boolean {\r\n    return (this.getStyle(element, 'position') || 'static') === 'static';\r\n  }\r\n\r\n  private offsetParent(element: HTMLElement): HTMLElement {\r\n    let offsetParentEl = <HTMLElement>element.offsetParent || document.documentElement;\r\n\r\n    while (offsetParentEl && offsetParentEl !== document.documentElement && this.isStaticPositioned(offsetParentEl)) {\r\n      offsetParentEl = <HTMLElement>offsetParentEl.offsetParent;\r\n    }\r\n\r\n    return offsetParentEl || document.documentElement;\r\n  }\r\n\r\n  position(element: HTMLElement, round = true): ClientRect {\r\n    let elPosition: ClientRect;\r\n    let parentOffset: ClientRect = { width: 0, height: 0, top: 0, bottom: 0, left: 0, right: 0 };\r\n\r\n    if (this.getStyle(element, 'position') === 'fixed') {\r\n      elPosition = element.getBoundingClientRect();\r\n    } else {\r\n      const offsetParentEl = this.offsetParent(element);\r\n\r\n      elPosition = this.offset(element, false);\r\n\r\n      if (offsetParentEl !== document.documentElement) {\r\n        parentOffset = this.offset(offsetParentEl, false);\r\n      }\r\n\r\n      parentOffset.top += offsetParentEl.clientTop;\r\n      parentOffset.left += offsetParentEl.clientLeft;\r\n    }\r\n\r\n    elPosition.top -= parentOffset.top;\r\n    elPosition.bottom -= parentOffset.top;\r\n    elPosition.left -= parentOffset.left;\r\n    elPosition.right -= parentOffset.left;\r\n\r\n    if (round) {\r\n      elPosition.top = Math.round(elPosition.top);\r\n      elPosition.bottom = Math.round(elPosition.bottom);\r\n      elPosition.left = Math.round(elPosition.left);\r\n      elPosition.right = Math.round(elPosition.right);\r\n    }\r\n\r\n    return elPosition;\r\n  }\r\n\r\n  offset(element: HTMLElement, round = true): ClientRect {\r\n    const elBcr = element.getBoundingClientRect();\r\n    const viewportOffset = {\r\n      top: window.pageYOffset - document.documentElement.clientTop,\r\n      left: window.pageXOffset - document.documentElement.clientLeft\r\n    };\r\n\r\n    const elOffset = {\r\n      height: elBcr.height || element.offsetHeight,\r\n      width: elBcr.width || element.offsetWidth,\r\n      top: elBcr.top + viewportOffset.top,\r\n      bottom: elBcr.bottom + viewportOffset.top,\r\n      left: elBcr.left + viewportOffset.left,\r\n      right: elBcr.right + viewportOffset.left\r\n    };\r\n\r\n    if (round) {\r\n      elOffset.height = Math.round(elOffset.height);\r\n      elOffset.width = Math.round(elOffset.width);\r\n      elOffset.top = Math.round(elOffset.top);\r\n      elOffset.bottom = Math.round(elOffset.bottom);\r\n      elOffset.left = Math.round(elOffset.left);\r\n      elOffset.right = Math.round(elOffset.right);\r\n    }\r\n\r\n    return elOffset;\r\n  }\r\n\r\n  positionElements(hostElement: HTMLElement, targetElement: HTMLElement, placement: string, appendToBody?: boolean,referElement?:HTMLElement):\r\n    ClientRect {\r\n    const oldhostElPosition = appendToBody ? this.offset(hostElement, false) : this.position(hostElement, false);\r\n    let hostElPosition=this.getRectCompareReferElementAndHostElement(oldhostElPosition,referElement);\r\n    const targetElStyles = this.getAllStyles(targetElement);\r\n    const targetElBCR = targetElement.getBoundingClientRect();\r\n    const placementPrimary = placement.split('-')[0] || 'top';\r\n    const placementSecondary = placement.split('-')[1] || 'center';\r\n\r\n    const targetElPosition: ClientRect = {\r\n      'height': targetElBCR.height || targetElement.offsetHeight,\r\n      'width': targetElBCR.width || targetElement.offsetWidth,\r\n      'top': 0,\r\n      'bottom': targetElBCR.height || targetElement.offsetHeight,\r\n      'left': 0,\r\n      'right': targetElBCR.width || targetElement.offsetWidth\r\n    };\r\n\r\n    switch (placementPrimary) {\r\n      case 'top':\r\n        targetElPosition.top =\r\n          hostElPosition.top - (targetElement.offsetHeight + parseFloat(targetElStyles.marginBottom));\r\n        break;\r\n      case 'bottom':\r\n        targetElPosition.top = hostElPosition.top + hostElPosition.height;\r\n        break;\r\n      case 'left':\r\n        targetElPosition.left =\r\n          hostElPosition.left - (targetElement.offsetWidth + parseFloat(targetElStyles.marginRight));\r\n        break;\r\n      case 'right':\r\n        targetElPosition.left = hostElPosition.left + hostElPosition.width;\r\n        break;\r\n    }\r\n\r\n    switch (placementSecondary) {\r\n      case 'top':\r\n        targetElPosition.top = hostElPosition.top;\r\n        break;\r\n      case 'bottom':\r\n        targetElPosition.top = hostElPosition.top + hostElPosition.height - targetElement.offsetHeight;\r\n        break;\r\n      case 'left':\r\n        targetElPosition.left = hostElPosition.left;\r\n        break;\r\n      case 'right':\r\n        targetElPosition.left = hostElPosition.left + hostElPosition.width - targetElement.offsetWidth;\r\n        break;\r\n      case 'center':\r\n        if (placementPrimary === 'top' || placementPrimary === 'bottom') {\r\n          targetElPosition.left = hostElPosition.left + hostElPosition.width / 2 - targetElement.offsetWidth / 2;\r\n        } else {\r\n          targetElPosition.top = hostElPosition.top + hostElPosition.height / 2 - targetElement.offsetHeight / 2;\r\n        }\r\n        break;\r\n    }\r\n\r\n    targetElPosition.top = Math.round(targetElPosition.top);\r\n    targetElPosition.bottom = Math.round(targetElPosition.bottom);\r\n    targetElPosition.left = Math.round(targetElPosition.left);\r\n    targetElPosition.right = Math.round(targetElPosition.right);\r\n\r\n    return targetElPosition;\r\n  }\r\n  private getRectCompareReferElementAndHostElement(hostRect,referElement){\r\n    let hostElemClientRect={\r\n        left:hostRect.left,\r\n        bottom: hostRect.bottom,\r\n        height: hostRect.height,\r\n        right: hostRect.right,\r\n        top: hostRect.top,\r\n        width: hostRect.width\r\n    };\r\n    if(referElement){\r\n     let referRect= referElement.getBoundingClientRect();\r\n        if(referRect.left>hostRect.left){\r\n          hostElemClientRect.left=referRect.left;\r\n        }\r\n        if(referRect.right<hostRect.right){\r\n          hostElemClientRect.right=referRect.right;\r\n        }\r\n        hostElemClientRect.width=Math.min(referRect.width,hostRect.width,(hostElemClientRect.right-hostElemClientRect.left));    \r\n    }\r\n    return hostElemClientRect;\r\n  }\r\n  // get the availble placements of the target element in the viewport dependeing on the host element\r\n  getAvailablePlacements(hostElement: HTMLElement, targetElement: HTMLElement,referElement:HTMLElement): string[] {\r\n    const oldhostElemClientRect = hostElement.getBoundingClientRect();\r\n    let hostElemClientRect=this.getRectCompareReferElementAndHostElement(oldhostElemClientRect,referElement);\r\n\r\n    const availablePlacements: Array<string> = [];\r\n    const targetElemClientRect = targetElement.getBoundingClientRect();\r\n    const html = document.documentElement;\r\n    const windowHeight = window.innerHeight || html.clientHeight;\r\n    const windowWidth = window.innerWidth || html.clientWidth;\r\n    const hostElemClientRectHorCenter = hostElemClientRect.left + hostElemClientRect.width / 2;\r\n    const hostElemClientRectVerCenter = hostElemClientRect.top + hostElemClientRect.height / 2;\r\n\r\n    // left: check if target width can be placed between host left and viewport start and also height of target is\r\n    // inside viewport\r\n    if (targetElemClientRect.width < hostElemClientRect.left) {\r\n      // check for left only\r\n      if (hostElemClientRectVerCenter > targetElemClientRect.height / 2 &&\r\n        windowHeight - hostElemClientRectVerCenter > targetElemClientRect.height / 2) {\r\n        availablePlacements.splice(availablePlacements.length, 1, 'left');\r\n      }\r\n      // check for left-top and left-bottom\r\n      this.setSecondaryPlacementForLeftRight(hostElemClientRect, targetElemClientRect, 'left', availablePlacements);\r\n    }\r\n\r\n    // top: target height is less than host top\r\n    if (targetElemClientRect.height < hostElemClientRect.top) {\r\n      if (hostElemClientRectHorCenter > targetElemClientRect.width / 2 &&\r\n        windowWidth - hostElemClientRectHorCenter > targetElemClientRect.width / 2) {\r\n        availablePlacements.splice(availablePlacements.length, 1, 'top');\r\n      }\r\n      this.setSecondaryPlacementForTopBottom(hostElemClientRect, targetElemClientRect, 'top', availablePlacements);\r\n    }\r\n\r\n    // right: check if target width can be placed between host right and viewport end and also height of target is\r\n    // inside viewport\r\n    if (windowWidth - hostElemClientRect.right > targetElemClientRect.width) {\r\n      // check for right only\r\n      if (hostElemClientRectVerCenter > targetElemClientRect.height / 2 &&\r\n        windowHeight - hostElemClientRectVerCenter > targetElemClientRect.height / 2) {\r\n        availablePlacements.splice(availablePlacements.length, 1, 'right');\r\n      }\r\n      // check for right-top and right-bottom\r\n      this.setSecondaryPlacementForLeftRight(hostElemClientRect, targetElemClientRect, 'right', availablePlacements);\r\n    }\r\n\r\n    // bottom: check if there is enough space between host bottom and viewport end for target height\r\n    if (windowHeight - hostElemClientRect.bottom > targetElemClientRect.height) {\r\n      if (hostElemClientRectHorCenter > targetElemClientRect.width / 2 &&\r\n        windowWidth - hostElemClientRectHorCenter > targetElemClientRect.width / 2) {\r\n        availablePlacements.splice(availablePlacements.length, 1, 'bottom');\r\n      }\r\n      this.setSecondaryPlacementForTopBottom(hostElemClientRect, targetElemClientRect, 'bottom', availablePlacements);\r\n    }\r\n\r\n    return availablePlacements;\r\n  }\r\n\r\n  /**\r\n   * check if secondary placement for left and right are available i.e. left-top, left-bottom, right-top, right-bottom\r\n   * primaryplacement: left|right\r\n   * availablePlacementArr: array in which available placemets to be set\r\n   */\r\n  private setSecondaryPlacementForLeftRight(\r\n    hostElemClientRect: ClientRect, targetElemClientRect: ClientRect, primaryPlacement: string,\r\n    availablePlacementArr: Array<string>) {\r\n    const html = document.documentElement;\r\n    // check for left-bottom\r\n    if (targetElemClientRect.height <= hostElemClientRect.bottom) {\r\n      availablePlacementArr.splice(availablePlacementArr.length, 1, primaryPlacement + '-bottom');\r\n    }\r\n    if ((window.innerHeight || html.clientHeight) - hostElemClientRect.top >= targetElemClientRect.height) {\r\n      availablePlacementArr.splice(availablePlacementArr.length, 1, primaryPlacement + '-top');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check if secondary placement for top and bottom are available i.e. top-left, top-right, bottom-left, bottom-right\r\n   * primaryplacement: top|bottom\r\n   * availablePlacementArr: array in which available placemets to be set\r\n   */\r\n  private setSecondaryPlacementForTopBottom(\r\n    hostElemClientRect: ClientRect, targetElemClientRect: ClientRect, primaryPlacement: string,\r\n    availablePlacementArr: Array<string>) {\r\n    const html = document.documentElement;\r\n    // check for left-bottom\r\n    if ((window.innerWidth || html.clientWidth) - hostElemClientRect.left >= targetElemClientRect.width) {\r\n      availablePlacementArr.splice(availablePlacementArr.length, 1, primaryPlacement + '-left');\r\n    }\r\n    if (targetElemClientRect.width <= hostElemClientRect.right) {\r\n      availablePlacementArr.splice(availablePlacementArr.length, 1, primaryPlacement + '-right');\r\n    }\r\n  }\r\n}\r\n\r\nconst positionService = new Positioning();\r\n\r\n/*\r\n * Accept the placement array and applies the appropriate placement dependent on the viewport.\r\n * Returns the applied placement.\r\n * In case of auto placement, placements are selected in order\r\n *   'top', 'bottom', 'left', 'right',\r\n *   'top-left', 'top-right',\r\n *   'bottom-left', 'bottom-right',\r\n *   'left-top', 'left-bottom',\r\n *   'right-top', 'right-bottom'.\r\n * */\r\nexport function positionElements(\r\n  hostElement: HTMLElement, targetElement: HTMLElement, placement: string | Placement | PlacementArray,\r\n  appendToBody?: boolean,referElement?:HTMLElement): Placement {\r\n  const placementVals: Array<Placement> = Array.isArray(placement) ? placement : [placement as Placement];\r\n\r\n  // replace auto placement with other placements\r\n  let hasAuto = placementVals.findIndex(val => val === 'auto');\r\n  if (hasAuto >= 0) {\r\n    ['top', 'bottom', 'left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'left-top',\r\n      'left-bottom', 'right-top', 'right-bottom',\r\n    ].forEach(function (obj) {\r\n      if (placementVals.find(val => val.search('^' + obj) !== -1) == null) {\r\n        placementVals.splice(hasAuto++, 1, obj as Placement);\r\n      }\r\n    });\r\n  }\r\n\r\n  // coordinates where to position\r\n  let topVal = 0, leftVal = 0;\r\n  let appliedPlacement: Placement;\r\n  // get available placements\r\n  const availablePlacements = positionService.getAvailablePlacements(hostElement, targetElement,referElement);\r\n  // iterate over all the passed placements\r\n  for (const { item, index } of toItemIndexes(placementVals)) {\r\n    // check if passed placement is present in the available placement or otherwise apply the last placement in the\r\n    // passed placement list\r\n    if ((availablePlacements.find(val => val === item) != null) || (placementVals.length === index + 1)) {\r\n      appliedPlacement = <Placement>item;\r\n      const pos = positionService.positionElements(hostElement, targetElement, item, appendToBody,referElement);\r\n      topVal = pos.top;\r\n      leftVal = pos.left;\r\n      break;\r\n    }\r\n  }\r\n  targetElement.style.top = `${topVal}px`;\r\n  targetElement.style.left = `${leftVal}px`;\r\n  return appliedPlacement;\r\n}\r\n\r\n// function to get index and item of an array\r\nfunction toItemIndexes<T>(a: T[]) {\r\n  return a.map((item, index) => ({ item, index }));\r\n}\r\n\r\nexport type Placement = 'auto' | 'top' | 'bottom' | 'left' | 'right' | 'top-left' | 'top-right' | 'bottom-left' |\r\n  'bottom-right' | 'left-top' | 'left-bottom' | 'right-top' | 'right-bottom';\r\n\r\nexport type PlacementArray = Placement | Array<Placement>;\r\n","import {\r\n    forwardRef,\r\n    Inject,\r\n    Directive,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    ElementRef,\r\n    ContentChild,\r\n    NgZone,\r\n    Renderer2,\r\n    OnInit,\r\n    OnDestroy,\r\n} from \"@angular/core\";\r\nimport { NgbDropdownConfig } from \"./dropdown-config\";\r\nimport {\r\n    positionElements,\r\n    PlacementArray,\r\n    Placement,\r\n} from \"../util/positioning\";\r\nimport { OverLayHiddenService } from \"@farris/ui-common\";\r\n\r\n/**\r\n */\r\n@Directive({\r\n    selector: \"[ngbDropdownMenu]\",\r\n    host: {\r\n        \"[class.dropdown-menu]\": \"true\",\r\n        \"[class.show]\": \"dropdown.isOpen()\",\r\n        \"[attr.x-placement]\": \"placement\",\r\n    },\r\n    exportAs: \"DropdownMenu\",\r\n})\r\nexport class NgbDropdownMenu {\r\n    placement: Placement = \"bottom\";\r\n    isOpen = false;\r\n    private _triggerEl;\r\n\r\n    constructor(\r\n        @Inject(forwardRef(() => NgbDropdown)) public dropdown,\r\n        public _elementRef: ElementRef,\r\n        private _renderer: Renderer2\r\n    ) {}\r\n    /*\r\n     * ,\r\n     */\r\n    resetMenuElWidthOpen() {\r\n        var parentNode = this._elementRef.nativeElement.parentNode.parentNode;\r\n        var parentNodeW = parentNode\r\n            ? parentNode.getBoundingClientRect().width\r\n            : 0;\r\n        var menuW =\r\n            this._elementRef.nativeElement.getBoundingClientRect().width;\r\n        return Math.min(menuW, parentNodeW);\r\n    }\r\n    isEventFrom($event) {\r\n        return this._elementRef.nativeElement.contains($event.target);\r\n    }\r\n\r\n    position(triggerEl, placement) {\r\n        //\r\n        if (this._elementRef.nativeElement.getBoundingClientRect().width == 0) {\r\n            setTimeout(() => {\r\n                this.applyPlacement(\r\n                    positionElements(\r\n                        triggerEl,\r\n                        this._elementRef.nativeElement,\r\n                        placement\r\n                    )\r\n                );\r\n            }, 0);\r\n        } else {\r\n            this.applyPlacement(\r\n                positionElements(\r\n                    triggerEl,\r\n                    this._elementRef.nativeElement,\r\n                    placement\r\n                )\r\n            );\r\n        }\r\n    }\r\n\r\n    applyPlacement(_placement: Placement) {\r\n        // remove the current placement classes\r\n        this._renderer.removeClass(\r\n            this._elementRef.nativeElement.parentNode,\r\n            \"dropup\"\r\n        );\r\n        this._renderer.removeClass(\r\n            this._elementRef.nativeElement.parentNode,\r\n            \"dropdown\"\r\n        );\r\n        this.placement = _placement;\r\n        /**\r\n         * apply the new placement\r\n         * in case of top use up-arrow or down-arrow otherwise\r\n         */\r\n        if (_placement.search(\"^top\") !== -1) {\r\n            this._renderer.addClass(\r\n                this._elementRef.nativeElement.parentNode,\r\n                \"dropup\"\r\n            );\r\n        } else {\r\n            this._renderer.addClass(\r\n                this._elementRef.nativeElement.parentNode,\r\n                \"dropdown\"\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Marks an element to which dropdown menu will be anchored. This is a simple version\r\n * of the NgbDropdownToggle directive. It plays the same role as NgbDropdownToggle but\r\n * doesn't listen to click events to toggle dropdown menu thus enabling support for\r\n * events other than click.\r\n *\r\n * @since 1.1.0\r\n */\r\n@Directive({\r\n    selector: \"[ngbDropdownAnchor]\",\r\n    host: {\r\n        class: \"dropdown-toggle\",\r\n        \"aria-haspopup\": \"true\",\r\n        \"[attr.aria-expanded]\": \"dropdown.isOpen()\",\r\n    },\r\n})\r\nexport class NgbDropdownAnchor {\r\n    anchorEl;\r\n\r\n    constructor(\r\n        @Inject(forwardRef(() => NgbDropdown)) public dropdown,\r\n        private _elementRef: ElementRef\r\n    ) {\r\n        this.anchorEl = _elementRef.nativeElement;\r\n    }\r\n\r\n    isEventFrom($event) {\r\n        return this._elementRef.nativeElement.contains($event.target);\r\n    }\r\n}\r\n\r\n/**\r\n * Allows the dropdown to be toggled via click. This directive is optional: you can use NgbDropdownAnchor as an\r\n * alternative.\r\n */\r\n@Directive({\r\n    selector: \"[ngbDropdownToggle]\",\r\n    host: {\r\n        class: \"dropdown-toggle\",\r\n        \"aria-haspopup\": \"true\",\r\n        \"[attr.aria-expanded]\": \"dropdown.isOpen()\",\r\n        \"(click)\": \"toggleOpen($event)\",\r\n    },\r\n    providers: [\r\n        {\r\n            provide: NgbDropdownAnchor,\r\n            useExisting: forwardRef(() => NgbDropdownToggle),\r\n        },\r\n    ],\r\n})\r\nexport class NgbDropdownToggle extends NgbDropdownAnchor {\r\n    constructor(\r\n        @Inject(forwardRef(() => NgbDropdown)) dropdown,\r\n        elementRef: ElementRef\r\n    ) {\r\n        super(dropdown, elementRef);\r\n    }\r\n\r\n    toggleOpen($event?: any) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.dropdown.toggle();\r\n    }\r\n}\r\n\r\n/**\r\n * Transforms a node into a dropdown.\r\n */\r\n@Directive({\r\n    selector: \"[ngbDropdown]\",\r\n    exportAs: \"ngbDropdown\",\r\n    host: {\r\n        \"(keyup.esc)\": \"closeFromOutsideEsc()\",\r\n        // \"(document:click)\": \"closeFromClick($event)\",\r\n    },\r\n})\r\nexport class NgbDropdown implements OnInit, OnDestroy {\r\n    private _zoneSubscription: any;\r\n\r\n    @ContentChild(NgbDropdownMenu) private _menu: NgbDropdownMenu;\r\n\r\n    @ContentChild(NgbDropdownAnchor) private _anchor: NgbDropdownAnchor;\r\n\r\n    /**\r\n     * Indicates that dropdown should be closed when selecting one of dropdown items (click) or pressing ESC.\r\n     * When it is true (default) dropdowns are automatically closed on both outside and inside (menu) clicks.\r\n     * When it is false dropdowns are never automatically closed.\r\n     * When it is 'outside' dropdowns are automatically closed on outside clicks but not on menu clicks.\r\n     * When it is 'inside' dropdowns are automatically on menu clicks but not on outside clicks.\r\n     */\r\n    @Input() autoClose: boolean | \"outside\" | \"inside\";\r\n\r\n    /**\r\n     *  Defines whether or not the dropdown-menu is open initially.\r\n     */\r\n    @Input(\"open\") _open = false;\r\n\r\n    /**\r\n     * Placement of a popover accepts:\r\n     *    \"top\", \"top-left\", \"top-right\", \"bottom\", \"bottom-left\", \"bottom-right\",\r\n     *    \"left\", \"left-top\", \"left-bottom\", \"right\", \"right-top\", \"right-bottom\"\r\n     * and array of above values.\r\n     */\r\n    @Input() placement: PlacementArray = [\"auto\", \"bottom\"];\r\n\r\n    /**\r\n     *  An event fired when the dropdown is opened or closed.\r\n     *  Event's payload equals whether dropdown is open.\r\n     */\r\n    @Output() openChange = new EventEmitter();\r\n    private overLayService: OverLayHiddenService = null;\r\n    constructor(config: NgbDropdownConfig, ngZone: NgZone) {\r\n        this.placement = config.placement;\r\n        this.autoClose = config.autoClose;\r\n        // menu\r\n        this._zoneSubscription = ngZone.onStable.subscribe(() => {\r\n            this._positionMenu();\r\n        });\r\n\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this._menu) {\r\n            this._menu.applyPlacement(\r\n                Array.isArray(this.placement)\r\n                    ? this.placement[0]\r\n                    : (this.placement as Placement)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks if the dropdown menu is open or not.\r\n     */\r\n    isOpen(): boolean {\r\n        return this._open;\r\n    }\r\n\r\n    /**\r\n     * Opens the dropdown menu of a given navbar or tabbed navigation.\r\n     */\r\n    open(): void {\r\n        if (!this._open) {\r\n            this._open = true;\r\n            this._positionMenu();\r\n            this.openChange.emit(true);\r\n\r\n\r\n            this._menu._elementRef.nativeElement.classList.add('show');\r\n\r\n            // Panel\r\n            this.overLayService.registerMouseEvent(\r\n              this._menu._elementRef.nativeElement,\r\n              (e: MouseEvent) => {\r\n                    const tar = e.target as any;\r\n                    var classList = Array.from(tar.classList || []);\r\n\r\n\r\n                    if (this._menu._elementRef.nativeElement.contains(e.target)) {\r\n                        return;\r\n                    }\r\n\r\n                    if (\r\n                        classList.includes('morebtn')||\r\n                        classList.includes(\"dropdown-toggle\") ||\r\n                        tar.closest(\".dropdown-item\") ||\r\n                        classList.includes(\"dropdown-item\")\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    this.close();\r\n              }\r\n          );\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Closes the dropdown menu of a given navbar or tabbed navigation.\r\n     */\r\n    close(): void {\r\n        if (this._open) {\r\n            this._open = false;\r\n            this.openChange.emit(false);\r\n\r\n            this._menu._elementRef.nativeElement.classList.remove('show');\r\n            this.overLayService.destory(this._menu._elementRef.nativeElement);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggles the dropdown menu of a given navbar or tabbed navigation.\r\n     */\r\n    toggle(): void {\r\n        if (this.isOpen()) {\r\n            this.close();\r\n        } else {\r\n            this.open();\r\n        }\r\n    }\r\n\r\n    closeFromClick($event) {\r\n        if (\r\n            this.autoClose &&\r\n            $event.button !== 2 &&\r\n            !this._isEventFromToggle($event)\r\n        ) {\r\n            if (this.autoClose === true) {\r\n                this.close();\r\n            } else if (\r\n                this.autoClose === \"inside\" &&\r\n                this._isEventFromMenu($event)\r\n            ) {\r\n                this.close();\r\n            } else if (\r\n                this.autoClose === \"outside\" &&\r\n                !this._isEventFromMenu($event)\r\n            ) {\r\n                this.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    closeFromOutsideEsc() {\r\n        if (this.autoClose) {\r\n            this.close();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._zoneSubscription) this._zoneSubscription.unsubscribe();\r\n    }\r\n\r\n    private _isEventFromToggle($event) {\r\n        return this._anchor.isEventFrom($event);\r\n    }\r\n\r\n    private _isEventFromMenu($event) {\r\n        return this._menu ? this._menu.isEventFrom($event) : false;\r\n    }\r\n\r\n    private _positionMenu() {\r\n        if (this.isOpen() && this._menu) {\r\n            this._menu.position(this._anchor.anchorEl, this.placement);\r\n        }\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport {\r\n  NgbDropdown,\r\n  NgbDropdownAnchor,\r\n  NgbDropdownToggle,\r\n  NgbDropdownMenu\r\n} from './dropdown';\r\nimport { NgbDropdownConfig } from './dropdown-config';\r\n\r\nexport { NgbDropdown, NgbDropdownToggle, NgbDropdownMenu } from './dropdown';\r\nexport { NgbDropdownConfig } from './dropdown-config';\r\n\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n\r\nconst NGB_DROPDOWN_DIRECTIVES = [\r\n  NgbDropdown,\r\n  NgbDropdownAnchor,\r\n  NgbDropdownToggle,\r\n  NgbDropdownMenu\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    FarrisCommonModule\r\n  ],\r\n  declarations: NGB_DROPDOWN_DIRECTIVES,\r\n  exports: NGB_DROPDOWN_DIRECTIVES\r\n})\r\nexport class NgbDropdownModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return { ngModule: NgbDropdownModule, providers: [NgbDropdownConfig] };\r\n  }\r\n}\r\n","export class Trigger {\r\n  constructor(public open: string, public close?: string) {\r\n    if (!close) {\r\n      this.close = open;\r\n    }\r\n  }\r\n\r\n  isManual() { return this.open === 'manual' || this.close === 'manual'; }\r\n}\r\n\r\nconst DEFAULT_ALIASES = {\r\n  'hover': ['mouseenter', 'mouseleave']\r\n};\r\n\r\nexport function parseTriggers(triggers: string, aliases = DEFAULT_ALIASES): Trigger[] {\r\n  const trimmedTriggers = (triggers || '').trim();\r\n\r\n  if (trimmedTriggers.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const parsedTriggers = trimmedTriggers.split(/\\s+/).map(trigger => trigger.split(':')).map((triggerPair) => {\r\n    let alias = aliases[triggerPair[0]] || triggerPair;\r\n    return new Trigger(alias[0], alias[1]);\r\n  });\r\n\r\n  const manualTriggers = parsedTriggers.filter(triggerPair => triggerPair.isManual());\r\n\r\n  if (manualTriggers.length > 1) {\r\n    throw 'Triggers parse error: only one manual trigger is allowed';\r\n  }\r\n\r\n  if (manualTriggers.length === 1 && parsedTriggers.length > 1) {\r\n    throw 'Triggers parse error: manual trigger can\\'t be mixed with other triggers';\r\n  }\r\n\r\n  return parsedTriggers;\r\n}\r\n\r\nconst noopFn = () => {};\r\n\r\nexport function listenToTriggers(renderer: any, nativeElement: any, triggers: string, openFn, closeFn, toggleFn) {\r\n  const parsedTriggers = parseTriggers(triggers);\r\n  const listeners = [];\r\n\r\n  if (parsedTriggers.length === 1 && parsedTriggers[0].isManual()) {\r\n    return noopFn;\r\n  }\r\n\r\n  parsedTriggers.forEach((trigger: Trigger) => {\r\n    if (trigger.open === trigger.close) {\r\n      listeners.push(renderer.listen(nativeElement, trigger.open, toggleFn));\r\n    } else {\r\n      listeners.push(\r\n          renderer.listen(nativeElement, trigger.open, openFn), renderer.listen(nativeElement, trigger.close, closeFn));\r\n    }\r\n  });\r\n\r\n  return () => { listeners.forEach(unsubscribeFn => unsubscribeFn()); };\r\n}\r\n","import {\r\n  Injector,\r\n  TemplateRef,\r\n  ViewRef,\r\n  ViewContainerRef,\r\n  Renderer2,\r\n  ComponentRef,\r\n  ComponentFactoryResolver\r\n} from '@angular/core';\r\n\r\nexport class ContentRef {\r\n  constructor(public nodes: any[], public viewRef?: ViewRef, public componentRef?: ComponentRef<any>) {}\r\n}\r\n\r\nexport class PopupService<T> {\r\n  private _windowRef: ComponentRef<T>;\r\n  private _contentRef: ContentRef;\r\n\r\n  constructor(\r\n      private _type: any, private _injector: Injector, private _viewContainerRef: ViewContainerRef,\r\n      private _renderer: Renderer2, private _componentFactoryResolver: ComponentFactoryResolver) {}\r\n\r\n  open(content?: string | TemplateRef<any>, context?: any): ComponentRef<T> {\r\n    if (!this._windowRef) {\r\n      this._contentRef = this._getContentRef(content, context);\r\n      this._windowRef = this._viewContainerRef.createComponent(\r\n          this._componentFactoryResolver.resolveComponentFactory<T>(this._type), 0, this._injector,\r\n          this._contentRef.nodes);\r\n    }\r\n\r\n    return this._windowRef;\r\n  }\r\n\r\n  close() {\r\n    if (this._windowRef) {\r\n      this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView));\r\n      this._windowRef = null;\r\n\r\n      if (this._contentRef.viewRef) {\r\n        this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef));\r\n        this._contentRef = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getContentRef(content: string | TemplateRef<any>, context?: any): ContentRef {\r\n    if (!content) {\r\n      return new ContentRef([]);\r\n    } else if (content instanceof TemplateRef) {\r\n      const viewRef = this._viewContainerRef.createEmbeddedView(<TemplateRef<T>>content, context);\r\n      return new ContentRef([viewRef.rootNodes], viewRef);\r\n    } else {\r\n      return new ContentRef([[this._renderer.createText(`${content}`)]]);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { PlacementArray } from '../util/positioning';\r\n\r\n/**\r\n * Configuration service for the NgbTooltip directive.\r\n * You can inject this service, typically in your root component, and customize the values of its properties in\r\n * order to provide default values for all the tooltips used in the application.\r\n */\r\n@Injectable()\r\nexport class NgbTooltipConfig {\r\n  placement: PlacementArray = 'top';\r\n  triggers = 'hover';\r\n  container = 'body';\r\n  disableTooltip = false;\r\n}\r\n","import {\r\n  Component,\r\n  Directive,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  ChangeDetectionStrategy,\r\n  OnInit,\r\n  OnDestroy,\r\n  Injector,\r\n  Renderer2,\r\n  ComponentRef,\r\n  ElementRef,\r\n  TemplateRef,\r\n  ViewContainerRef,\r\n  ComponentFactoryResolver,\r\n  NgZone,\r\n  AfterViewInit,\r\n  HostBinding\r\n} from '@angular/core';\r\nimport { listenToTriggers } from '../util/triggers';\r\nimport { positionElements, Placement, PlacementArray } from '../util/positioning';\r\nimport { PopupService } from '../util/popup';\r\nimport { NgbTooltipConfig } from './tooltip-config';\r\n\r\nlet nextId = 0;\r\n\r\n@Component({\r\n  selector: 'ngb-tooltip-window',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  host: {\r\n    '[class]': '\"tooltip show bs-tooltip-\" + placement.split(\"-\")[0]+\" bs-tooltip-\" + placement',\r\n    'role': 'tooltip',\r\n    '[id]': 'id'\r\n  },\r\n  template: `<div class=\"arrow\"></div><div class=\"tooltip-inner\"><ng-content></ng-content></div>`,\r\n  styles: [`\r\n    :host.bs-tooltip-top .arrow, :host.bs-tooltip-bottom .arrow {\r\n      left: calc(50% - 0.4rem);\r\n    }\r\n\r\n    :host.bs-tooltip-top-left .arrow, :host.bs-tooltip-bottom-left .arrow {\r\n      left: 1em;\r\n    }\r\n\r\n    :host.bs-tooltip-top-right .arrow, :host.bs-tooltip-bottom-right .arrow {\r\n      left: auto;\r\n      right: 0.8rem;\r\n    }\r\n\r\n    :host.bs-tooltip-left .arrow, :host.bs-tooltip-right .arrow {\r\n      top: calc(50% - 0.4rem);\r\n    }\r\n\r\n    :host.bs-tooltip-left-top .arrow, :host.bs-tooltip-right-top .arrow {\r\n      top: 0.4rem;\r\n    }\r\n\r\n    :host.bs-tooltip-left-bottom .arrow, :host.bs-tooltip-right-bottom .arrow {\r\n      top: auto;\r\n      bottom: 0.4rem;\r\n    }\r\n  `]\r\n})\r\nexport class NgbTooltipWindow {\r\n  @Input() placement: Placement = 'top';\r\n  @Input() id: string;\r\n\r\n  constructor(private _element: ElementRef, private _renderer: Renderer2) { }\r\n\r\n  applyPlacement(_placement: Placement) {\r\n    // remove the current placement classes\r\n    this._renderer.removeClass(this._element.nativeElement, 'bs-tooltip-' + this.placement.toString().split('-')[0]);\r\n    this._renderer.removeClass(this._element.nativeElement, 'bs-tooltip-' + this.placement.toString());\r\n\r\n    // set the new placement classes\r\n    this.placement = _placement;\r\n\r\n    // apply the new placement\r\n    this._renderer.addClass(this._element.nativeElement, 'bs-tooltip-' + this.placement.toString().split('-')[0]);\r\n    this._renderer.addClass(this._element.nativeElement, 'bs-tooltip-' + this.placement.toString());\r\n  }\r\n}\r\n\r\n/**\r\n * A lightweight, extensible directive for fancy tooltip creation.\r\n */\r\n@Directive({ selector: '[ngbTooltip]', exportAs: 'ngbTooltip' })\r\nexport class NgbTooltip implements OnInit, OnDestroy {\r\n  /**\r\n    * Placement of a popover accepts:\r\n    *    \"top\", \"top-left\", \"top-right\", \"bottom\", \"bottom-left\", \"bottom-right\",\r\n    *    \"left\", \"left-top\", \"left-bottom\", \"right\", \"right-top\", \"right-bottom\"\r\n    * and array of above values.\r\n    */\r\n  @Input() placement: PlacementArray;\r\n  /**\r\n   * Specifies events that should trigger. Supports a space separated list of event names.\r\n   */\r\n  @Input() triggers: string;\r\n  /**\r\n   * A selector specifying the element the tooltip should be appended to.\r\n   * Currently only supports \"body\".\r\n   */\r\n  @Input() container='body';\r\n  /**\r\n   * A flag indicating if a given tooltip is disabled and should not be displayed.\r\n   *\r\n   * @since 1.1.0\r\n   */\r\n  @Input() disableTooltip: boolean;\r\n  /**\r\n   * Emits an event when the tooltip is shown\r\n   */\r\n  @Output() shown = new EventEmitter();\r\n  /**\r\n   * Emits an event when the tooltip is hidden\r\n   */\r\n  @Output() hidden = new EventEmitter();\r\n  @Input() referElement:HTMLElement;\r\n\r\n  private _ngbTooltip: string | TemplateRef<any>;\r\n  private _ngbTooltipWindowId = `ngb-tooltip-${nextId++}`;\r\n  private _popupService: PopupService<NgbTooltipWindow>;\r\n  private _windowRef: ComponentRef<NgbTooltipWindow>;\r\n  private _unregisterListenersFn;\r\n  private _zoneSubscription: any;\r\n\r\n  constructor(\r\n    private _elementRef: ElementRef, private _renderer: Renderer2, injector: Injector,\r\n    componentFactoryResolver: ComponentFactoryResolver, viewContainerRef: ViewContainerRef, config: NgbTooltipConfig,\r\n    ngZone: NgZone) {\r\n    this.placement = config.placement;\r\n    this.triggers = config.triggers;\r\n    this.container = config.container||'body';\r\n    this.disableTooltip = config.disableTooltip;\r\n    this._popupService = new PopupService<NgbTooltipWindow>(\r\n      NgbTooltipWindow, injector, viewContainerRef, _renderer, componentFactoryResolver);\r\n  \r\n      \r\n    this._zoneSubscription = ngZone.onStable.subscribe(() => {\r\n      if (this._windowRef) {\r\n        this._windowRef.instance.applyPlacement(\r\n          positionElements(\r\n            this._elementRef.nativeElement, this._windowRef.location.nativeElement, this.placement,\r\n            this.container === 'body',this.referElement));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Content to be displayed as tooltip. If falsy, the tooltip won't open.\r\n   */\r\n  @Input()\r\n  set ngbTooltip(value: string | TemplateRef<any>) {\r\n    this._ngbTooltip = value;\r\n    if (!value && this._windowRef) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  get ngbTooltip() { return this._ngbTooltip; }\r\n\r\n  /**\r\n   * Opens an elements tooltip. This is considered a manual triggering of the tooltip.\r\n   * The context is an optional value to be injected into the tooltip template when it is created.\r\n   */\r\n  open(context?: any) {\r\n    if (!this._windowRef && this._ngbTooltip && !this.disableTooltip) {\r\n      this._windowRef = this._popupService.open(this._ngbTooltip, context);\r\n      this._windowRef.instance.id = this._ngbTooltipWindowId;\r\n\r\n      this._renderer.setAttribute(this._elementRef.nativeElement, 'aria-describedby', this._ngbTooltipWindowId);\r\n\r\n      if (this.container === 'body') {\r\n        window.document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement);\r\n      }\r\n\r\n      this._windowRef.instance.placement = Array.isArray(this.placement) ? this.placement[0] : this.placement;\r\n\r\n      // apply styling to set basic css-classes on target element, before going for positioning\r\n      this._windowRef.changeDetectorRef.detectChanges();\r\n      this._windowRef.changeDetectorRef.markForCheck();\r\n\r\n      // position tooltip along the element\r\n      this._windowRef.instance.applyPlacement(\r\n        positionElements(\r\n          this._elementRef.nativeElement, this._windowRef.location.nativeElement, this.placement,\r\n          this.container === 'body',this.referElement));\r\n\r\n      this.shown.emit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes an elements tooltip. This is considered a manual triggering of the tooltip.\r\n   */\r\n  close(): void {\r\n    if (this._windowRef != null) {\r\n      this._renderer.removeAttribute(this._elementRef.nativeElement, 'aria-describedby');\r\n      this._popupService.close();\r\n      this._windowRef = null;\r\n      this.hidden.emit();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles an elements tooltip. This is considered a manual triggering of the tooltip.\r\n   */\r\n  toggle(): void {\r\n    if (this._windowRef) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns whether or not the tooltip is currently being shown\r\n   */\r\n  isOpen(): boolean { return this._windowRef != null; }\r\n\r\n  ngOnInit() {\r\n    this._unregisterListenersFn = listenToTriggers(\r\n      this._renderer, this._elementRef.nativeElement, this.triggers, this.open.bind(this), this.close.bind(this),\r\n      this.toggle.bind(this));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.close();\r\n    // This check is needed as it might happen that ngOnDestroy is called before ngOnInit\r\n    // under certain conditions, see: https://github.com/ng-bootstrap/ng-bootstrap/issues/2199\r\n    if (this._unregisterListenersFn) {\r\n      this._unregisterListenersFn();\r\n    }\r\n    this._zoneSubscription.unsubscribe();\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { NgbTooltip, NgbTooltipWindow } from './tooltip';\r\nimport { NgbTooltipConfig } from './tooltip-config';\r\n\r\nexport { NgbTooltipConfig } from './tooltip-config';\r\nexport { NgbTooltip } from './tooltip';\r\nexport { Placement } from '../util/positioning';\r\n\r\n@NgModule({\r\n  declarations: [NgbTooltip, NgbTooltipWindow],\r\n  exports: [NgbTooltip],\r\n  entryComponents: [NgbTooltipWindow]\r\n})\r\nexport class NgbTooltipModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: NgbTooltipModule,\r\n      providers: [NgbTooltipConfig]\r\n    };\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {FDropdownDirectiveTypeModule} from '@farris/ui-dropdown';\r\nimport { NgbDropdownModule } from './dropdown/dropdown.module';\r\nimport { NgbTooltipModule } from './tooltip/tooltip.module';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { FarrisTabsComponent } from './tabs/tabs.component';\r\nimport { TabConfig, TabService } from './tabs.config';\r\nimport { FarrisTabComponent } from './tab/tab.component';\r\nimport { TabTranscludeDirective } from './tab/tab.transclude.directive';\r\nimport { TabHeadDirective } from './tab/tab.headtemplate.directive';\r\nimport { TabHostDirective } from './tab/tabhost.directive';\r\nimport { FarrisTabsExtendDirective } from './tab/extend.directive';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        LocaleModule,\r\n        FormsModule,\r\n        NgbDropdownModule.forRoot(),\r\n        NgbTooltipModule.forRoot(),\r\n        FDropdownDirectiveTypeModule\r\n    ],\r\n    declarations: [FarrisTabsComponent, FarrisTabComponent,\r\n        TabTranscludeDirective, TabHeadDirective, FarrisTabsExtendDirective, TabHostDirective],\r\n    exports: [\r\n        FarrisTabsComponent,\r\n        FarrisTabComponent,\r\n        TabTranscludeDirective,\r\n        TabHeadDirective,\r\n        TabHostDirective,\r\n        FarrisTabsExtendDirective,\r\n        NgbDropdownModule,\r\n        NgbTooltipModule\r\n    ],\r\n    providers: [TabService]\r\n})\r\nexport class FarrisTabsModule {\r\n    static forRoot(config?: TabConfig): ModuleWithProviders {\r\n        return {\r\n            ngModule: FarrisTabsModule,\r\n            providers: [{ provide: TabConfig, useValue: config }]\r\n        };\r\n    }\r\n}\r\n"]}