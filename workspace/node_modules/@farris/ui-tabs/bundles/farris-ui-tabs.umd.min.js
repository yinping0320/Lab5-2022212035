!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("resize-observer-polyfill"),require("@farris/ui-common"),require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@farris/ui-dropdown"),require("@farris/ui-locale")):"function"==typeof define&&define.amd?define("@farris/ui-tabs",["exports","rxjs","rxjs/operators","resize-observer-polyfill","@farris/ui-common","@angular/core","@angular/common","@angular/forms","@farris/ui-dropdown","@farris/ui-locale"],e):e((t.farris=t.farris||{},t.farris["ui-tabs"]={}),t.rxjs,t.rxjs.operators,t.ResizeObserver,t.uiCommon,t.ng.core,t.ng.common,t.ng.forms,t.uiDropdown,t.uiLocale)}(this,function(t,a,l,n,i,c,e,o,r,s){"use strict";n=n&&n.hasOwnProperty("default")?n["default"]:n;var h=(p.decorators=[{type:c.Directive,args:[{selector:"[tabHost]"}]}],p.ctorParameters=function(){return[{type:c.ViewContainerRef}]},p);function p(t){this.viewContainerRef=t}var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(o)throw o.error}}return s}var f=function ct(){this.showDropDown=!0,this.showTooltips=!0,this.scrollStep=15,this.autoResize=!0,this.maxDropdownH=200,this.maxDropdownW=-1,this.maxTabW=100,this.maxTooltipLen=5},b=(g.prototype.getConfig=function(){return this.config},g.decorators=[{type:c.Injectable}],g.ctorParameters=function(){return[{type:f,decorators:[{type:c.Optional}]}]},g);function g(t){this.config=new f,t&&Object.assign(this.config,t)}var m=(Object.defineProperty(v.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.positionStates.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"width",{set:function(t){this._width=this.resolveSize(t),this.widthStates.next(this._width)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"height",{set:function(t){this._height=this.resolveSize(t),this.heightStates.next(this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"headerHeight",{get:function(){return this._headerHeight},set:function(t){this._headerHeight=this.resolveSize(t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"contentFill",{set:function(t){this._contentFill=t,this.contentFillStates.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"btnStates",{set:function(t){t&&(this._disableStatesDatas&&this._disableStatesDatas.hasOwnProperty("unsubscribe")&&this._disableStatesDatas.unsubscribe(),this._disableStatesDatas=t,this.disableStateBind())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"btnVisible",{set:function(t){t&&(this._visibleDatas&&this._visibleDatas.hasOwnProperty("unsubscribe")&&this._visibleDatas.unsubscribe(),this._visibleDatas=t,this.visibleStateBind())},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"tabs",{get:function(){return this._tabs},set:function(t){this._tabs=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"customClass",{get:function(){return this._customClass},set:function(t){var e=this;this.customClass&&this.customClass.split(" ").forEach(function(t){e.renderer.removeClass(e.el,t)}),this._customClass=t?t.trim():null,this.customClass&&this.customClass.split(" ").forEach(function(t){e.renderer.addClass(e.el,t)})},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"direction",{get:function(){switch(this.position){case"top":return"column";case"bottom":return"column-reverse";case"left":return"row";case"right":return"row-reverse"}},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"tabDirection",{get:function(){return"top"===this.position||"bottom"===this.position?"row":"left"===this.position||"right"===this.position?"column":void 0},enumerable:!0,configurable:!0}),v.prototype.trackByButton=function(t,e){return e.id},v.prototype.verifyConfig=function(){var t=this.stService.getConfig();Object.assign(this,t),this.scrollStep=parseInt(this.scrollStep+"",10)},v.prototype.ngOnInit=function(){var e=this;this.beforeSelect||(this.beforeSelect=function(){return a.of(!0)}),this.clickSubscription=this.clickItems.pipe(l.debounceTime(this.clickThrottleTime)).subscribe(function(t){t.click&&"function"==typeof t.click&&t.click()}),this._tabContainerEl=this.tabContainer.nativeElement,this._createStream(),this.activeId=this.selectId,this.ngZone&&this.ngZone.runOutsideAngular(function(){null===e.ro&&(e.ro=new n(function(t){e._reCalculateAll(),e._calculateToolbarDropdownIsShow(),e._calculateButtonsShow()}),e.ro.observe(e.el.parentElement))})},v.prototype.visibleStateBind=function(){var n=this;this._visibleDatas.subscribe(function(e){Object.keys(e).forEach(function(t){n.visibleRecord[t]=e[t]}),n.toolbarConf&&0<n.toolbarConf.contents.length&&(n.changeState(e,"visible"),n._reCalculateAll(),n._calculateToolbarDropdownIsShow(),n._calculateButtonsShow())})},v.prototype.disableStateBind=function(){var n=this;this._disableStatesDatas.subscribe(function(e){Object.keys(e).forEach(function(t){n.disableRecord[t]=e[t]}),n.toolbarConf&&0<n.toolbarConf.contents.length&&n.changeState(e,"disable")})},v.prototype.ngOnChanges=function(t){t.selectId&&this.selectTab(t.selectId.currentValue)},v.prototype.ngAfterContentInit=function(){},v.prototype.ngAfterContentChecked=function(){},v.prototype.ngAfterViewInit=function(){var e=this;this.renderer.addClass(this.el,"farris-tabs"),this.renderer.addClass(this.el,"flex-column"),this.contentFillStates.subscribe(function(t){t?e.renderer.addClass(e.el,"f-tabs-content-fill"):e.renderer.removeClass(e.el,"f-tabs-content-fill")}),this.widthStates.subscribe(function(t){t&&e.renderer.setStyle(e.el,"width",t)}),this.heightStates.subscribe(function(t){t&&e.renderer.setStyle(e.el,"height",t)}),this.positionStates.subscribe(function(t){e.renderer.removeClass(e.el,"flex-row"),e.renderer.removeClass(e.el,"flex-column"),e.renderer.removeClass(e.el,"flex-row-reverse"),e.renderer.removeClass(e.el,"flex-column-reverse"),"left"===t&&e.renderer.addClass(e.el,"flex-row"),"top"===t&&e.renderer.addClass(e.el,"flex-column"),"right"===t&&e.renderer.addClass(e.el,"flex-row-reverse"),"bottom"===t&&e.renderer.addClass(e.el,"flex-column-reverse")}),this.getToolbarConf(),this._reCalculateAll(),this._setActive(),this._changeTitleStyle(),this._listenShowChanges(),this.ngZone.runOutsideAngular(function(){e._ddmHandler=e.renderer.listen(document,"mousedown",function(t){t.target.closest(".farris-tabs-header")||e.el&&e.el.querySelector(".dropdown-menu")&&e.ddm&&e.ddm.dropdown&&e.ddm.dropdown.close()})})},v.prototype.ngAfterViewChecked=function(){},v.prototype.ngOnDestroy=function(){this.subscription.forEach(function(t){t.unsubscribe()}),this.subscription=[],this.ro&&(this.el.parentElement&&this.ro.unobserve(this.el.parentElement),this.ro=null),this._ddmHandler&&(this._ddmHandler(),this._ddmHandler=null),this.clickSubscription&&this.clickSubscription.unsubscribe(),this._visibleDatas&&this._visibleDatas.hasOwnProperty("unsubscribe")&&(this._visibleDatas.unsubscribe(),this._visibleDatas=null)},v.prototype.clickHandler=function(t){t&&(t.hasOwnProperty("disable")&&t.disable||this.clickItems.next(t))},v.prototype.openChange=function(t){this.searchInputVisible=t,this.searchTabText=undefined,this._reCalculateAll(),this.menuItemsWidth=t?this.ddm.resetMenuElWidthOpen()+"px":"auto"},v.prototype.searchTab=function(t){this.stopBubble(t),this._reCalculateAll()},v.prototype.stopBubble=function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0},v.prototype.getToolbarStateVisible=function(t){var e="visible";return!t.hasOwnProperty(e)||t[e]},v.prototype.getToolbarStateDisable=function(t){var e="disable";return!!t.hasOwnProperty(e)&&t[e]},v.prototype.getToolbarState=function(e,t){return void 0===t&&(t=this.btnStates),t?t.pipe(l.map(function(t){return t[e]!==undefined&&t[e]})):a.of(!0)},v.prototype._listenShowChanges=function(){var r=this;this.tabs.forEach(function(o){o.showStates.subscribe(function(t){var e;!1===(o._show=t)&&o.id===r.activeId&&(o._active=!1,r.activeId="",e=!1);var n=r.tabs.filter(function(t){return!0===t._show}),i=n.length?n[0].id:null;i&&!1===e&&(r.tabs.forEach(function(t,e){t.id===i&&(r.activeId=t.id,r.tabs[e]._active=!0)}),r.getToolbarConf()),r.cdRef.detectChanges()})})},v.prototype.selectTab=function(t){var e=this._getTabById(t);this._selectTab(e.tab,e.index)},v.prototype._cpSelectTabByIndex=function(t,e,n){void 0===n&&(n=null),t.preventDefault(),t.stopPropagation();var i=t.target;return-1<i.className.indexOf("st-drop-close")||-1<i.parentElement.className.indexOf("st-drop-close")?this.closeTab(e):this.selectTab(e),this.getToolbarConf(),this.cdRef.markForCheck(),this._reCalculateAll(),this._calculateToolbarDropdownIsShow(),this._calculateButtonsShow(),n&&n.dropdown.close(),!1},v.prototype.selectTabByIndex=function(t){if(0<=t&&t<this.tabs.length){var e=this.tabs[t];this._selectTab(e,t)}},v.prototype._selectTab=function(e,n){var i=this;if(e&&!e.disabled&&this.activeId!==e.id){this.beforeSelect||(this.beforeSelect=function(){return a.of(!0)});var o={prevId:this.activeId,nextId:e.id};this.beforeSelect(o).subscribe(function(t){t&&(i.activeId=e.id,i.tabs.forEach(function(t,e){t._active=!1}),i.tabs[n]._active=!0,i.getToolbarConf(),i.scrollTabIntoView(n),i.cdRef.detectChanges(),i.tabChange.emit(o))})}},v.prototype._setActive=function(){var e=this;if(this.tabs.length){var t=this.tabs.filter(function(t){return!0===t._show}),n=this._getTabById(this.activeId).tab;if(this.activeId=n?n.id:this.tabs.length?this.tabs[0].id:null,t.length)if(this.activeId){var i=t.find(function(t){return t.id===e.activeId});i&&(this.activeId=i.id)}else this.activeId=t[0].id;else this.activeId=null;this.tabs.forEach(function(t){t._active=!1,t.id===e.activeId&&(t._active=!0)})}},v.prototype.showTab=function(t,e){void 0===e&&(e=!0);for(var n=this.tabs.length,i=0;i<n;i++)if(this.tabs[i].id===t)return this.tabs[i]._show=!0,void(e&&this.selectTab(t))},v.prototype.hideTab=function(t){var e=this.tabs.filter(function(t){return!0===t._show}),n=e.length-1;if(!(n<0)){for(var i,o=0;o<=n;o++)if(e[o].id===t){e[o]._show=!1,i=o;break}i!==undefined&&(i===n&&n<1?this.selectTab(""):i===n&&1<=n?this.selectTab(e[n-1].id):this.selectTab(e[i+1].id))}},v.prototype.addTabs=function(t,e,n){var i;if(0<t.length&&((i=this.tabs).splice.apply(i,function r(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}([e,0],t)),this.tabs=this._unique(this.tabs)),n&&this.activeId!==n){var o=this._getTabById(n);0<=o.index&&(this.selectTab(n),this.activeId=n,this.scrollTabIntoView(o.index))}this.cdRef.detectChanges(),this._reCalculateAll(),this._changeTitleStyle()},v.prototype._unique=function(t){var n={};return t=t.reduce(function(t,e){return n[e.id]?n[e.id]="":n[e.id]=t.push(e),t},[])},v.prototype.removeTabByIndex=function(t){var e=this.tabs.length-1;if(!(t<0||e<t)){var n=this.tabs[t];n._active=!1,this.activeId===n.id?(0==e?this.activeId="":t===e?(this.activeId=this.tabs[e-1].id,this.tabs[t-1]._active=!0):(this.activeId=this.tabs[t+1].id,this.tabs[t+1]._active=!0),this.tabs.splice(t,1),this.scrollTabIntoView(t)):this.tabs.splice(t,1),this.tabRemove.emit({removeIndex:t,removeId:n.id,activeId:this.activeId}),this.cdRef.detectChanges()}},v.prototype.closeTab=function(t){for(var e=this.tabs.length,n=0;n<e;n++)if(this.tabs[n].id===t)return void this.removeTabByIndex(n)},v.prototype.load=function(){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].id===this.activeId)return void(this.tabs[t]._active=!0)},v.prototype._truncateTitle=function(){this.tabs=this.tabs.map(function(t){return t.title=6<t.title.length?t.title.substr(0,6):t.title,t})},v.prototype._changeTitleStyle=function(){if(!this.autoTitleWidth)for(var t=this._tabContainerEl.querySelectorAll(".st-tab-text"),e=0;e<t.length;e++){var n=t[e].parentNode;t[e].scrollWidth>n.offsetWidth?this.tabs[e].titleOverflow=!0:this.tabs[e].titleOverflow=!1}},v.prototype._createStream=function(){var s=this;[this.rightNav,this.leftNav].forEach(function(t,e){var n=e?-1:1,i=a.fromEvent(t.nativeElement,"mousedown"),o=a.fromEvent(t.nativeElement,"mouseup"),r=i.pipe(l.switchMap(function(t){return t.preventDefault(),t.stopPropagation(),a.of(0).pipe(l.takeUntil(o),l.scan(function(t,e){return t+s.scrollStep*n},0),l.takeWhile(function(t){return 0<n?!s.disableRight:!s.disableLeft}),l.map(function(t){return{value:t,direction:n}}))})).subscribe(function(t){s._scrollTab(t.value,t.direction)});s.subscription.push(r)})},v.prototype._scrollTab=function(t,e){var n=this._tabContainerEl.scrollLeft+t,i=this._tabContainerEl.scrollWidth-this._tabContainerEl.offsetWidth;0<e?this._tabContainerEl.scrollLeft=Math.min(n,i):e<0&&(this._tabContainerEl.scrollLeft=Math.max(n,0)),this._reCalculateSides()},v.prototype.scrollTabIntoView=function(t){if(this._tabContainerEl&&!this.hideButtons){var e,n=parseInt(t+"",10);if(0<=n){var i=this._tabContainerEl.querySelectorAll(".nav-item");i.length>n&&(e=i[n])}else{var o=this._tabContainerEl.querySelector("li.active");o&&(e=o)}if(e){var r=parseInt(e.getBoundingClientRect().left+"",10),s=parseInt(this._tabContainerEl.getBoundingClientRect().left+"",10),a=r+parseInt(e.getBoundingClientRect().width+"",10)-s,l=r-s-10;l<0?this._scrollTab(l,-1):a>this._tabContainerEl.offsetWidth&&this._scrollTab(a-this._tabContainerEl.offsetWidth+20,1)}}},v.prototype.getToolbarConf=function(){var t=this.tabs.filter(function(t){return!0===t._active})[0];t&&t.hasOwnProperty("toolbar")?this.toolbarConf=t.toolbar:this.toolbarConf=null,this.changeState(this.visibleRecord,"visible"),this.changeState(this.disableRecord,"disable"),t&&t.hasOwnProperty("farrisTabsExtendDirective")?this.headerExtendConf=t.farrisTabsExtendDirective:this.headerExtendConf=null,this.toolbarDpHidden=!0,this.cdRef.detectChanges()},v.prototype._calculateToolbarDropdownIsShow=function(){var t,e=0;if(this.toolbarContainer&&this.toolbarConf){var n=this.hasInHeadCl()?this.toolbarContainer.nativeElement:this.toolbarContainer.nativeElement.parentElement;n.querySelector(".farris-tabs-inline-flex")&&(this.headerExtendConf&&(t=n.querySelector(".farris-tabs-header-extend"),this.renderer.removeStyle(t,"overflow"),e=t.offsetWidth),!this.hasInHeadCl()&&this.btnPlaceHolder.nativeElement.offsetWidth>n.offsetWidth?this.toolbarDpHidden=!1:this.hasInHeadCl()&&this.btnPlaceHolder.nativeElement.offsetWidth>n.offsetWidth-e?this.toolbarDpHidden=!1:this.toolbarDpHidden=!0,this.cdRef.detectChanges())}},v.prototype._calculateButtonsShow=function(){var t,e=this,n=0;if(this.toolbarContainer&&this.toolbarConf){var i=this.hasInHeadCl()?this.toolbarContainer.nativeElement:this.toolbarContainer.nativeElement.parentElement,o=i.querySelector(".farris-tabs-inline-flex"),r=this.btnPlaceHolder.nativeElement,s=r.querySelectorAll(".btn--cal");if(o&&0!=s.length){this.headerExtendConf&&(t=i.querySelector(".farris-tabs-header-extend"),n=this.hasInHeadCl()?t.offsetWidth:0);var a=r.parentElement.querySelector(".morebtn"),l=parseInt(r.getBoundingClientRect().left),c=i.offsetWidth-a.offsetWidth-12-n,h=!0,p=0;if(1==s.length)r.offsetWidth>c?h=!1:p=1;else for(p=1;p<=s.length-1;p++)if(p==s.length-1){if(r.offsetWidth>c){h=!1,p-=1;break}}else if(parseInt(s[p].getBoundingClientRect().left)-l>c){h=!1,p-=1;break}this.toolbarDpHidden=h;for(var d=o.querySelectorAll(".btn--cal"),u=0;u<p;u++)this.renderer.setStyle(d[u],"display","");for(var f=p;f<d.length;f++)this.renderer.setStyle(d[f],"display","none");if(this.toolbarConf.contents&&this.toolbarConf.contents.length){var b=this.toolbarConf.contents.filter(function(t){return e.getToolbarStateVisible(t)});this.inMoreButtonContents=b.filter(function(t,e){return p<=e})}this.cdRef&&!this.cdRef.destroyed&&this.cdRef.detectChanges()}}},v.prototype._reCalculateAll=function(){var e=this;if(this._tabContainerEl){var t=this.tabParent.nativeElement.offsetWidth;this.hideButtons||(t+=parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"))+parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"))),this.hideButtons=this._tabContainerEl.scrollWidth<=t,this.hideDropDown=!this.showDropDown||this.hideButtons,this.hideButtons||(this.hideDropDown||(this.dropdownTabs=[].concat(this.tabs)),this.searchTabText&&(this.dropdownTabs=this.dropdownTabs.filter(function(t){return-1!==t.title.indexOf(e.searchTabText)})),this._reCalculateSides()),this.dpState=[!1],this.cdRef.detectChanges()}},v.prototype._reCalulateTooltips=function(){if(this._tabContainerEl&&!this.hideButtons){for(var t=[],e=[],n=this._tabContainerEl.querySelectorAll(".nav-item"),i=n.length,o=this.tabs.filter(function(t){return!0!==t._show}).length,r=0;r<i;r++){var s=n[r].getBoundingClientRect().left-this._tabContainerEl.getBoundingClientRect().left;n[r].getBoundingClientRect().width+s>this._tabContainerEl.offsetWidth?t.push(this.tabs[r]):s<0&&e.push(this.tabs[r])}this.leftTooltipTabs=[].concat(e).slice(Math.max(0,e.length-this.maxTooltipLen)),this.rightTooltipTabs=[].concat(t).slice(0,Math.min(this.maxTooltipLen,t.length)),this.disableRTooltip=this.rightTooltipTabs.length<1,this.disableLTooltip=this.leftTooltipTabs.length-o<1}},v.prototype._reCalculateSides=function(){this.disableRight=this._tabContainerEl.scrollLeft>=this._tabContainerEl.scrollWidth-this._tabContainerEl.offsetWidth,this.disableLeft=this._tabContainerEl.scrollLeft<=0,this._reCalulateTooltips()},v.prototype._getTabById=function(n){var i=[],t=this.tabs.filter(function(t,e){return t.id===n&&(i.push(e),!0)});return{tab:t.length?t[0]:null,index:i.length?i[0]:-1}},v.prototype.resolveSize=function(t){var e=/px|em|rem|pt|%/;return e.test(t)?""+parseInt(t,10)+t.match(e)[0]:t+"px"},v.prototype.hasInHeadCl=function(){return!!(this.toolbarConf&&this.toolbarConf.hasOwnProperty("position")&&this.toolbarConf.hasOwnProperty("contents")&&"inHead"===this.toolbarConf.position&&0<this.toolbarConf.contents.length)||!(!this.headerExtendConf||this.toolbarConf&&"inContent"===this.toolbarConf.position&&this.toolbarConf.contents.length)},v.prototype.changeState=function(n,i){if(this.toolbarConf&&this.toolbarConf.contents){var o=Object.keys(n);this.toolbarConf.contents.forEach(function(e){var t=o.find(function(t){return t==e.id});t&&(e[i]=n[t]),e.children&&0<e.children.length&&e.children.forEach(function(e){var t=o.find(function(t){return t==e.id});t&&(e[i]=n[t])})}),this.inMoreButtonContents.forEach(function(e){var t=o.find(function(t){return t==e.id});t&&(e[i]=n[t]),e.children&&0<e.children.length&&e.children.forEach(function(e){var t=o.find(function(t){return t==e.id});t&&(e[i]=n[t])})}),this.dpState=[!1],this.cdRef&&!this.cdRef.destroyed&&this.cdRef.detectChanges()}},v.decorators=[{type:c.Component,args:[{selector:"farris-tabs",template:'<div #tabHeader class="farris-tabs-header"\r\n    [class.farris-tabs-inHead]="hasInHeadCl()"\r\n    [class.farris-tabs-inContent]="!hasInHeadCl()"\r\n    [class.farris-tabs-nav-fill]="fill||tabType==\'fill\'"\r\n    [class.farris-tabs-nav-pills]="tabType==\'pills\'"\r\n    >\r\n    <div class="farris-tabs-title scroll-tabs"\r\n        [ngStyle]="{\'width\': hasInHeadCl() ? (titleWidth?titleWidth + \'%\':null) : null}">\r\n        <button type="button" (disabled)="disableLeft" class="btn sc-nav-btn px-1 sc-nav-lr"\r\n            [ngClass]="{\'d-none\':hideButtons}" #leftNav>\r\n        </button>\r\n        <div class="spacer f-utils-fill" #tabParent\r\n            [ngClass]="{\'spacer-sides\':!hideButtons&& hideDropDown,\'spacer-sides-dropdown\':!hideButtons&&!hideDropDown}"\r\n            style="width:100%;">\r\n            <ul class="nav farris-nav-tabs flex-nowrap" [class.nav-fill]="fill||tabType==\'fill\'"\r\n                [class.flex-row]="position===\'top\'||position===\'bottom\'"\r\n                [class.flex-column]="position===\'left\'||position===\'right\'" [class.nav-pills]="tabType==\'pills\'" #tabContainer>\r\n                <li class="nav-item" *ngFor="let tab of tabs;index as tabIndex"\r\n                    [ngClass]="{\'d-none\': tab._show !== true, \'f-state-active\': tab.id === activeId, \'f-state-disabled\': tab.disabled === true}"\r\n                    [ngStyle]="{\'width\':tab.tabWidth+\'px\'}">\r\n                    <a class="nav-link tabs-text-truncate" #anchor [class.active]="tab.id === activeId"\r\n                        [class.disabled]="tab.disabled" (click)="_cpSelectTabByIndex($event,tab.id)">\r\n                        <span class="st-tab-text" [class.farris-title-auto]="autoTitleWidth"\r\n                            [ngClass]="tab.titleCustomCls" [tabTransclude]="tab.headingRef"\r\n                            *ngIf="tab.headingRef"></span>\r\n                        <span class="st-tab-text" [ngbTooltip]="tab.title" [referElement]="tabContainer"\r\n                            [disableTooltip]="!tab.titleOverflow" [class.farris-title-auto]="autoTitleWidth"\r\n                            [class.farris-title-text-custom]="tab.titleOverflow"\r\n                            *ngIf="!tab.headingRef">{{tab.title}}</span>\r\n                        <span class="st-drop-close" *ngIf="tab.removeable">\r\n                            <i class="f-icon f-icon-close"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class="btn-group sc-nav-btn" ngbDropdown (openChange)="openChange($event)" >\r\n            <button type="button"  (disabled)="disableRight" class="btn sc-nav-rg" [ngClass]="{\'d-none\':hideButtons}"\r\n                #rightNav></button>\r\n            <button #dropDownButton class="btn dropdown-toggle-split " ngbDropdownToggle\r\n                [ngClass]="{\'d-none\':hideDropDown}">\r\n            </button>\r\n            <div class="dropdown-menu" style="max-width: 300px;" [class.tabs-pt28]="searchBoxVisible" ngbDropdownMenu #ddm="DropdownMenu">\r\n                <div (click)="stopBubble($event)" class=\'pb-1 tabs-li-absolute\' *ngIf="searchBoxVisible">\r\n                    <input type="text" class="form-control k-textbox" [(ngModel)]="searchTabText"\r\n                        (keyup)="searchTab($event)" />\r\n                    <span class="f-icon f-icon-page-title-query tabs-icon-search"></span>\r\n                </div>\r\n                <ul class="tab-dropdown-menu--items" [ngStyle]="{\'width\':menuItemsWidth}">\r\n                    <li class="dropdown-item text-truncate px-2" *ngFor="let tab of dropdownTabs;index as tabIndex"\r\n                        [ngClass]="{\'disabled\': tab.disabled, \'active\': tab.id === activeId, \'d-none\': tab._show !==true}"\r\n                        (click)="_cpSelectTabByIndex($event,tab.id, ddm)">\r\n                        <a class="dropdown-title" style="\r\n                            text-overflow: ellipsis;white-space: nowrap;word-break: break-word;width: 100%;">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class="farris-tabs-toolbar" *ngIf="toolbarConf || headerExtendConf">\r\n        <div class="farris-tabs-inline-flex" *ngIf="toolbarConf">\r\n            <ng-template ngFor let-btn [ngForOf]="toolbarConf.contents" let-i="index" [ngForTrackBy]="trackByButton">\r\n                <ng-container  *ngIf="getToolbarStateVisible(btn)">\r\n                    <ng-container *ngIf="!btn.children||btn.children.length==0">\r\n                        <button class="btn--cal" [attr.id]="btn.id" [ngClass]="btn.appearance.class"  [disabled]="getToolbarStateDisable(btn)"\r\n                        (click)="clickHandler(btn)"  [class.btn-icontext]="btn.icon&&btn.icon.trim()">\r\n                        <i class="f-icon" [ngClass]="btn.icon&&btn.icon.trim()" *ngIf="btn.icon&&btn.icon.trim()"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf="btn.children&&btn.children.length>0">\r\n                        <ng-container *ngTemplateOutlet="dropdownTmpl; context: { $implicit: btn }"></ng-container>\r\n                    </ng-container>  \r\n                </ng-container>              \r\n            </ng-template>\r\n        </div>\r\n         <ng-container *ngIf="!toolbarDpHidden&&inMoreButtonContents.length>0">\r\n            <div class="btn-group f-btn-ml sc-nav-btn" fDropdown #ddmore="fDropdown"  [forceState]="dpState"  [rectifyReference]="referEl" [autoRectify]="true">\r\n                    <button class="btn btn-secondary morebtn  dropdown-toggle" fDropdownToggle >{{\'tabs.more\' | locale}}</button>\r\n                    <ul class="dropdown-menu" fDropdownMenu id="more_menu">\r\n                        <ng-container *ngFor="let item of inMoreButtonContents">                                            \r\n                            <ng-container  *ngIf="getToolbarStateVisible(item)">\r\n                                <ng-container *ngIf="item.children&&item.children.length>0">\r\n                                    <ng-container *ngTemplateOutlet="dropdownSubTmpl;context: { $implicit: item}"></ng-container>\r\n                                </ng-container>\r\n                                <ng-container *ngIf="!item.children||item.children.length==0">\r\n                                    <li class="dropdown-item  f-rt-btn" id="{{ item.id }}" [class.disabled]="getToolbarStateDisable(item)"  (click)="clickHandler(item)">\r\n                                        {{ item.title }}\r\n                                    </li>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ul>\r\n            </div> \r\n        </ng-container>             \r\n        <div *ngIf="headerExtendConf && headerExtendConf.templateRef" class="farris-tabs-header-extend"\r\n        [class.margin-right-14]="toolbarConf && toolbarConf.contents.length"\r\n        [ngClass]="headerExtendConf && headerExtendConf.extendCls">\r\n        <template [ngTemplateOutlet]="headerExtendConf.templateRef"></template>\r\n    </div>\r\n    </div>\r\n    \x3c!--计算位置--\x3e\r\n    <div class="farris-tabs-btn-placeholder" *ngIf="toolbarConf">\r\n        <div class="btn-group"><button class="btn btn-secondary morebtn  dropdown-toggle">{{\'tabs.more\' | locale}}</button></div>        \r\n        <div class="btn-placeholder--content" #btnPlaceholder>\r\n            <ng-container *ngFor="let btn of toolbarConf.contents">\r\n                <ng-container  *ngIf="getToolbarStateVisible(btn)">                    \r\n                    <ng-container *ngIf="!btn.children||btn.children.length==0">\r\n                        <button class="btn--cal" [ngClass]="btn.appearance.class"  [class.btn-icontext]="btn.icon&&btn.icon.trim()">\r\n                        <i class="f-icon" [ngClass]="btn.icon&&btn.icon.trim()" *ngIf="btn.icon&&btn.icon.trim()"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf="btn.children&&btn.children.length>0">\r\n                        <div class="btn-group btn--cal" [ngClass]="btn.appearance?.dropdownCls" >\r\n                            <ng-container *ngIf="btn.split">\r\n                                <button type="button" class="btn" [ngClass]="btn.appearance?.class" [class.btn-icontext]="btn.icon&&btn.icon.trim()">\r\n                                    <i class="f-icon" [ngClass]="btn.icon&&btn.icon.trim()" *ngIf="btn.icon&&btn.icon.trim()"></i>{{ btn.title }}\r\n                                </button>\r\n                            <button class="btn dropdown-toggle dropdown-toggle-split" [ngClass]="btn.appearance?.class"></button>\r\n                            </ng-container>\r\n                            \x3c!--不启用下拉分开按钮--\x3e\r\n                            <ng-container *ngIf="!btn.split">\r\n                                <button type="button"  class="btn" [ngClass]="btn.appearance?.class + \' dropdown-toggle\'"  [class.btn-icontext]="btn.icon&&btn.icon.trim()">\r\n                                    <i class="f-icon" [ngClass]="btn.icon&&btn.icon.trim()" *ngIf="btn.icon&&btn.icon.trim()"></i>{{ btn.title }}\r\n                                </button>\r\n                                <i></i>\r\n                            </ng-container>\r\n                        </div>\r\n                    </ng-container>  \r\n                </ng-container> \r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!--第一层下拉--\x3e\r\n<ng-template #dropdownTmpl let-data>\r\n    <div class="btn-group btn--cal" id="{{ data.id }}" [ngClass]="data.appearance?.dropdownCls" fDropdown [rectifyReference]="referEl"  [autoRectify]="true">\r\n        <ng-container *ngIf="data.split">\r\n            <button type="button" class="btn"  (click)="clickHandler(data)" [ngClass]="data.appearance?.class" [class.disabled]="getToolbarStateDisable(data)" [class.btn-icontext]="data.icon&&data.icon.trim()">\r\n                <i class="f-icon" [ngClass]="data.icon&&data.icon.trim()" *ngIf="data.icon&&data.icon.trim()"></i>{{ data.title }}\r\n            </button>\r\n        <button class="btn dropdown-toggle dropdown-toggle-split" [ngClass]="data.appearance?.class" fDropdownToggle></button>\r\n        </ng-container>\r\n        \x3c!--不启用下拉分开按钮--\x3e\r\n        <ng-container *ngIf="!data.split">\r\n            <button type="button" fDropdownToggle class="btn" [ngClass]="data.appearance?.class + \' dropdown-toggle\'"\r\n                [dpDisabled]="getToolbarStateDisable(data)"  [class.btn-icontext]="data.icon&&data.icon.trim()"   (click)="clickHandler(data)">\r\n                <i class="f-icon" [ngClass]="data.icon&&data.icon.trim()" *ngIf="data.icon&&data.icon.trim()"></i>{{ data.title }}\r\n            </button>\r\n            <i></i>\r\n        </ng-container>\r\n        <ul class="dropdown-menu" fDropdownMenu id="{{ data.id }}_menu">\r\n            <ng-container *ngTemplateOutlet="dropMenuItem; context: { $implicit: data.children }"></ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>\r\n\x3c!--下拉子项--\x3e\r\n<ng-template #dropMenuItem let-data>\r\n    <ng-container *ngFor="let item of data">\r\n        <ng-container *ngIf="getToolbarStateVisible(item)">\r\n            <li class="dropdown-item" id="{{ item.id }}" [class.disabled]="getToolbarStateDisable(item)"  (click)="clickHandler(item)">\r\n                {{ item.title }}\r\n            </li>\r\n        </ng-container>\r\n    </ng-container>\r\n</ng-template>\r\n\x3c!--第二层下拉--\x3e\r\n<ng-template #dropdownSubTmpl let-subData>\r\n    <li class="dropdown-submenu" fDropdown [isSubDP]="true" [placement]="\'left-bottom\'" [autoRectify]="true" [rectifyReference]="referEl" id="{{ subData.id }}">\r\n        <ng-container *ngIf="subData.split">\r\n            <span class="dropdown-item" [class.disabled]="getToolbarStateDisable(subData)"  (click)="clickHandler(subData)">{{ subData.title }}</span>\r\n            <span class="dropdown-toggle dropdown-toggle-split" fDropdownToggle></span>\r\n        </ng-container>\r\n        <ng-container *ngIf="!subData.split">\r\n            <span class="dropdown-item  dropdown-toggle" [dpDisabled]="getToolbarStateDisable(subData)"  (click)="clickHandler(subData)" fDropdownToggle>{{ subData.title }}</span>\r\n        </ng-container>\r\n        <ul class="dropdown-menu" fDropdownMenu id="{{ subData.id }}_submenu">\r\n            <ng-container *ngTemplateOutlet="dropMenuItem; context: { $implicit: subData.children }"></ng-container>\r\n        </ul>\r\n    </li>\r\n</ng-template>\r\n<ng-content></ng-content>',changeDetection:c.ChangeDetectionStrategy.OnPush,encapsulation:c.ViewEncapsulation.None,styles:[".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;top:-30px;right:0;overflow:hidden;left:0;opacity:0;z-index:-90}.farris-tabs .farris-tabs-btn-placeholder .btn-placeholder--content{display:-webkit-inline-box;display:inline-flex;left:0;position:absolute}"]}]}],v.ctorParameters=function(){return[{type:b},{type:c.ElementRef},{type:c.Renderer2},{type:c.ChangeDetectorRef},{type:c.NgZone}]},v.propDecorators={tabType:[{type:c.Input}],fill:[{type:c.Input}],autoTitleWidth:[{type:c.Input}],titleLength:[{type:c.Input}],position:[{type:c.Input}],showDropDown:[{type:c.Input}],showTooltips:[{type:c.Input}],scrollStep:[{type:c.Input}],autoResize:[{type:c.Input}],closeable:[{type:c.Input}],selectId:[{type:c.Input,args:["value"]}],width:[{type:c.Input}],height:[{type:c.Input}],searchBoxVisible:[{type:c.Input}],headerHeight:[{type:c.Input,args:["header-height"]}],contentDirection:[{type:c.Input}],contentFill:[{type:c.Input}],clickThrottleTime:[{type:c.Input}],btnStates:[{type:c.Input}],btnVisible:[{type:c.Input}],tabs:[{type:c.Input}],customClass:[{type:c.Input}],titleWidth:[{type:c.Input}],leftNav:[{type:c.ViewChild,args:["leftNav"]}],rightNav:[{type:c.ViewChild,args:["rightNav"]}],tabContainer:[{type:c.ViewChild,args:["tabContainer"]}],toolbarContainer:[{type:c.ViewChild,args:["toolbarContainer"]}],dropDownButton:[{type:c.ViewChild,args:["dropDownButton"]}],tabParent:[{type:c.ViewChild,args:["tabParent"]}],btnPlaceHolder:[{type:c.ViewChild,args:["btnPlaceholder"]}],beforeSelect:[{type:c.Input}],tabChange:[{type:c.Output}],tabRemove:[{type:c.Output}],ddm:[{type:c.ViewChild,args:["ddm"]}]},v);function v(t,e,n,i,o){var r=this;this.stService=t,this.elementRef=e,this.renderer=n,this.cdRef=i,this.ngZone=o,this.tabType="",this.fill=!1,this.autoTitleWidth=!1,this.titleLength=7,this.searchBoxVisible=!0,this.contentDirection="column",this.clickThrottleTime=350,this.clickItems=new a.Subject,this._disableStatesDatas=new a.Subject,this._visibleDatas=new a.Subject,this.titleWidth=0,this.tabChange=new c.EventEmitter,this.tabRemove=new c.EventEmitter,this.contentFillStates=new a.BehaviorSubject(!1),this.widthStates=new a.BehaviorSubject(!1),this.heightStates=new a.BehaviorSubject(!1),this.positionStates=new a.BehaviorSubject("top"),this.menuItemsWidth="auto",this.maxDropdownW=-1,this._customClass="",this._tabs=[],this.toolbarConf={position:"",contents:[]},this.toolbarDpHidden=!0,this.inMoreButtonContents=[],this.dropdownTabs=[],this.hideButtons=!0,this.hideDropDown=!0,this.disableLeft=!1,this.disableRight=!1,this.subscription=[],this.disableRTooltip=!0,this.disableLTooltip=!0,this.leftTooltipTabs=[],this.rightTooltipTabs=[],this.maxTooltipLen=5,this.activeId="",this.ro=null,this._ddmHandler=null,this.dpState=[!1],this.visibleRecord={},this.disableRecord={},this.referEl=null,this.tabVisibleChanged=new a.Subject,this.el=this.elementRef.nativeElement,this.el.parentElement&&(this.referEl=this.el.parentElement),this.verifyConfig(),this.subscription.push(this.tabVisibleChanged.subscribe(function(t){r._reCalculateAll(),r._calculateToolbarDropdownIsShow(),r._calculateButtonsShow()}))}var y=(w.decorators=[{type:c.Directive,args:[{selector:"[farrisTabsExtend]"}]}],w.ctorParameters=function(){return[{type:c.TemplateRef}]},w.propDecorators={extendCls:[{type:c.Input}]},w);function w(t){this.templateRef=t}var C=(Object.defineProperty(_.prototype,"show",{get:function(){return this._show},set:function(t){this._show!=t&&(this.showStates.next(t),this._show=t,this.scrollTabs.tabVisibleChanged.next({tab:this,visible:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"_active",{get:function(){return this._activeForOld},set:function(t){this._activeForOld=t,this.activeState.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),_.prototype.ngOnInit=function(){this.scrollTabs.tabs.push(this),this.scrollTabs.activeId?this.scrollTabs.load():this.scrollTabs.tabs[0]._active=!0},_.prototype.ngAfterViewInit=function(){var e=this,n=this.el.nativeElement;this.activeState.subscribe(function(t){e.render.addClass(n,"farris-tabs-body"),t?(e.render.addClass(n,"f-tab-active"),e.render.removeClass(n,"f-tab-d-none")):(e.render.addClass(n,"f-tab-d-none"),e.render.removeClass(n,"f-tab-active"))})},_.prototype.ngAfterViewChecked=function(){},_.prototype.loadComponent=function(){},_.decorators=[{type:c.Component,args:[{selector:"farris-tab",template:'\x3c!-- 异步获取组件 --\x3e\r\n<ng-template [ngTemplateOutlet]="contentTempl"></ng-template>\r\n<ng-container>\r\n    <ng-container *ngComponentOutlet="asyncComponent;ngModuleFactory:asyncModule">\r\n    </ng-container>\r\n</ng-container>\r\n\r\n'}]}],_.ctorParameters=function(){return[{type:c.Compiler},{type:c.ComponentFactoryResolver},{type:c.Renderer2},{type:c.ElementRef},{type:c.ChangeDetectorRef},{type:m,decorators:[{type:c.Optional}]}]},_.propDecorators={tabWidth:[{type:c.Input,args:["width"]}],show:[{type:c.Input}],asyncComponent:[{type:c.Input}],asyncModule:[{type:c.Input}],id:[{type:c.Input}],titleCustomCls:[{type:c.Input}],title:[{type:c.Input}],disabled:[{type:c.Input}],removeable:[{type:c.Input}],toolbar:[{type:c.Input}],contentTempl:[{type:c.ContentChild,args:["content"]}],farrisTabsExtendDirective:[{type:c.ContentChild,args:[y]}]},_);function _(t,e,n,i,o,r){this.cp=t,this.componentFactoryResolver=e,this.render=n,this.el=i,this.cef=o,this.scrollTabs=r,this.tabWidth=-1,this.titleCustomCls="",this.selected=!1,this.showStates=new a.BehaviorSubject(!0),this.activeState=new a.BehaviorSubject(!1),this._show=!0}var T=(Object.defineProperty(x.prototype,"trancludeTempl",{get:function(){return this._trancludeTempl},set:function(t){(this._trancludeTempl=t)&&this.viewRef.createEmbeddedView(t)},enumerable:!0,configurable:!0}),x.prototype.ngOnInit=function(){},x.prototype.ngDoCheck=function(){},x.decorators=[{type:c.Directive,args:[{selector:"[tabTransclude]"}]}],x.ctorParameters=function(){return[{type:c.ViewContainerRef},{type:c.KeyValueDiffers}]},x.propDecorators={trancludeTempl:[{type:c.Input,args:["tabTransclude"]}]},x);function x(t,e){this._differs=e,this.viewRef=t}var I=(R.decorators=[{type:c.Directive,args:[{selector:"[tabHead]"}]}],R.ctorParameters=function(){return[{type:C},{type:c.ElementRef},{type:c.TemplateRef}]},R);function R(t,e,n){t.headingRef=n}var S=(E.decorators=[{type:c.Injectable}],E);function E(){this.autoClose=!0,this.placement="bottom-right"}function D(){}var O=new(D.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},D.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},D.prototype.isStaticPositioned=function(t){return"static"===(this.getStyle(t,"position")||"static")},D.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},D.prototype.position=function(t,e){var n;void 0===e&&(e=!0);var i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect();else{var o=this.offsetParent(t);n=this.offset(t,!1),o!==document.documentElement&&(i=this.offset(o,!1)),i.top+=o.clientTop,i.left+=o.clientLeft}return n.top-=i.top,n.bottom-=i.top,n.left-=i.left,n.right-=i.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n},D.prototype.offset=function(t,e){void 0===e&&(e=!0);var n=t.getBoundingClientRect(),i=window.pageYOffset-document.documentElement.clientTop,o=window.pageXOffset-document.documentElement.clientLeft,r={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+i,bottom:n.bottom+i,left:n.left+o,right:n.right+o};return e&&(r.height=Math.round(r.height),r.width=Math.round(r.width),r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r},D.prototype.positionElements=function(t,e,n,i,o){var r=i?this.offset(t,!1):this.position(t,!1),s=this.getRectCompareReferElementAndHostElement(r,o),a=this.getAllStyles(e),l=e.getBoundingClientRect(),c=n.split("-")[0]||"top",h=n.split("-")[1]||"center",p={height:l.height||e.offsetHeight,width:l.width||e.offsetWidth,top:0,bottom:l.height||e.offsetHeight,left:0,right:l.width||e.offsetWidth};switch(c){case"top":p.top=s.top-(e.offsetHeight+parseFloat(a.marginBottom));break;case"bottom":p.top=s.top+s.height;break;case"left":p.left=s.left-(e.offsetWidth+parseFloat(a.marginRight));break;case"right":p.left=s.left+s.width}switch(h){case"top":p.top=s.top;break;case"bottom":p.top=s.top+s.height-e.offsetHeight;break;case"left":p.left=s.left;break;case"right":p.left=s.left+s.width-e.offsetWidth;break;case"center":"top"===c||"bottom"===c?p.left=s.left+s.width/2-e.offsetWidth/2:p.top=s.top+s.height/2-e.offsetHeight/2}return p.top=Math.round(p.top),p.bottom=Math.round(p.bottom),p.left=Math.round(p.left),p.right=Math.round(p.right),p},D.prototype.getRectCompareReferElementAndHostElement=function(t,e){var n={left:t.left,bottom:t.bottom,height:t.height,right:t.right,top:t.top,width:t.width};if(e){var i=e.getBoundingClientRect();i.left>t.left&&(n.left=i.left),i.right<t.right&&(n.right=i.right),n.width=Math.min(i.width,t.width,n.right-n.left)}return n},D.prototype.getAvailablePlacements=function(t,e,n){var i=t.getBoundingClientRect(),o=this.getRectCompareReferElementAndHostElement(i,n),r=[],s=e.getBoundingClientRect(),a=document.documentElement,l=window.innerHeight||a.clientHeight,c=window.innerWidth||a.clientWidth,h=o.left+o.width/2,p=o.top+o.height/2;return s.width<o.left&&(p>s.height/2&&l-p>s.height/2&&r.splice(r.length,1,"left"),this.setSecondaryPlacementForLeftRight(o,s,"left",r)),s.height<o.top&&(h>s.width/2&&c-h>s.width/2&&r.splice(r.length,1,"top"),this.setSecondaryPlacementForTopBottom(o,s,"top",r)),c-o.right>s.width&&(p>s.height/2&&l-p>s.height/2&&r.splice(r.length,1,"right"),this.setSecondaryPlacementForLeftRight(o,s,"right",r)),l-o.bottom>s.height&&(h>s.width/2&&c-h>s.width/2&&r.splice(r.length,1,"bottom"),this.setSecondaryPlacementForTopBottom(o,s,"bottom",r)),r},D.prototype.setSecondaryPlacementForLeftRight=function(t,e,n,i){var o=document.documentElement;e.height<=t.bottom&&i.splice(i.length,1,n+"-bottom"),(window.innerHeight||o.clientHeight)-t.top>=e.height&&i.splice(i.length,1,n+"-top")},D.prototype.setSecondaryPlacementForTopBottom=function(t,e,n,i){var o=document.documentElement;(window.innerWidth||o.clientWidth)-t.left>=e.width&&i.splice(i.length,1,n+"-left"),e.width<=t.right&&i.splice(i.length,1,n+"-right")},D);function P(i,o,t,r,s){var e,n,a=Array.isArray(t)?t:[t],l=a.findIndex(function(t){return"auto"===t});0<=l&&["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].forEach(function(e){null==a.find(function(t){return-1!==t.search("^"+e)})&&a.splice(l++,1,e)});var c,h=0,p=0,d=O.getAvailablePlacements(i,o,s),u=function(e,t){if(null!=d.find(function(t){return t===e})||a.length===t+1){c=e;var n=O.positionElements(i,o,e,r,s);return h=n.top,p=n.left,"break"}};try{for(var f=function m(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(function v(t){return t.map(function(t,e){return{item:t,index:e}})}(a)),b=f.next();!b.done;b=f.next()){var g=b.value;if("break"===u(g.item,g.index))break}}catch(y){e={error:y}}finally{try{b&&!b.done&&(n=f["return"])&&n.call(f)}finally{if(e)throw e.error}}return o.style.top=h+"px",o.style.left=p+"px",c}var B=(k.prototype.resetMenuElWidthOpen=function(){var t=this._elementRef.nativeElement.parentNode.parentNode,e=t?t.getBoundingClientRect().width:0,n=this._elementRef.nativeElement.getBoundingClientRect().width;return Math.min(n,e)},k.prototype.isEventFrom=function(t){return this._elementRef.nativeElement.contains(t.target)},k.prototype.position=function(t,e){var n=this;0==this._elementRef.nativeElement.getBoundingClientRect().width?setTimeout(function(){n.applyPlacement(P(t,n._elementRef.nativeElement,e))},0):this.applyPlacement(P(t,this._elementRef.nativeElement,e))},k.prototype.applyPlacement=function(t){this._renderer.removeClass(this._elementRef.nativeElement.parentNode,"dropup"),this._renderer.removeClass(this._elementRef.nativeElement.parentNode,"dropdown"),-1!==(this.placement=t).search("^top")?this._renderer.addClass(this._elementRef.nativeElement.parentNode,"dropup"):this._renderer.addClass(this._elementRef.nativeElement.parentNode,"dropdown")},k.decorators=[{type:c.Directive,args:[{selector:"[ngbDropdownMenu]",host:{"[class.dropdown-menu]":"true","[class.show]":"dropdown.isOpen()","[attr.x-placement]":"placement"},exportAs:"DropdownMenu"}]}],k.ctorParameters=function(){return[{type:undefined,decorators:[{type:c.Inject,args:[c.forwardRef(function(){return A})]}]},{type:c.ElementRef},{type:c.Renderer2}]},k);function k(t,e,n){this.dropdown=t,this._elementRef=e,this._renderer=n,this.placement="bottom",this.isOpen=!1}var M=(H.prototype.isEventFrom=function(t){return this._elementRef.nativeElement.contains(t.target)},H.decorators=[{type:c.Directive,args:[{selector:"[ngbDropdownAnchor]",host:{"class":"dropdown-toggle","aria-haspopup":"true","[attr.aria-expanded]":"dropdown.isOpen()"}}]}],H.ctorParameters=function(){return[{type:undefined,decorators:[{type:c.Inject,args:[c.forwardRef(function(){return A})]}]},{type:c.ElementRef}]},H);function H(t,e){this.dropdown=t,this._elementRef=e,this.anchorEl=e.nativeElement}var W,F=(function ht(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(j,W=M),j.prototype.toggleOpen=function(t){t&&t.stopPropagation(),this.dropdown.toggle()},j.decorators=[{type:c.Directive,args:[{selector:"[ngbDropdownToggle]",host:{"class":"dropdown-toggle","aria-haspopup":"true","[attr.aria-expanded]":"dropdown.isOpen()","(click)":"toggleOpen($event)"},providers:[{provide:M,useExisting:c.forwardRef(function(){return j})}]}]}],j.ctorParameters=function(){return[{type:undefined,decorators:[{type:c.Inject,args:[c.forwardRef(function(){return A})]}]},{type:c.ElementRef}]},j);function j(t,e){return W.call(this,t,e)||this}var A=(V.prototype.ngOnInit=function(){this._menu&&this._menu.applyPlacement(Array.isArray(this.placement)?this.placement[0]:this.placement)},V.prototype.isOpen=function(){return this._open},V.prototype.open=function(){var i=this;this._open||(this._open=!0,this._positionMenu(),this.openChange.emit(!0),this._menu._elementRef.nativeElement.classList.add("show"),this.overLayService.registerMouseEvent(this._menu._elementRef.nativeElement,function(t){var e=t.target,n=Array.from(e.classList||[]);i._menu._elementRef.nativeElement.contains(t.target)||n.includes("morebtn")||n.includes("dropdown-toggle")||e.closest(".dropdown-item")||n.includes("dropdown-item")||i.close()}))},V.prototype.close=function(){this._open&&(this._open=!1,this.openChange.emit(!1),this._menu._elementRef.nativeElement.classList.remove("show"),this.overLayService.destory(this._menu._elementRef.nativeElement))},V.prototype.toggle=function(){this.isOpen()?this.close():this.open()},V.prototype.closeFromClick=function(t){this.autoClose&&2!==t.button&&!this._isEventFromToggle(t)&&(!0===this.autoClose?this.close():"inside"===this.autoClose&&this._isEventFromMenu(t)?this.close():"outside"!==this.autoClose||this._isEventFromMenu(t)||this.close())},V.prototype.closeFromOutsideEsc=function(){this.autoClose&&this.close()},V.prototype.ngOnDestroy=function(){this._zoneSubscription&&this._zoneSubscription.unsubscribe()},V.prototype._isEventFromToggle=function(t){return this._anchor.isEventFrom(t)},V.prototype._isEventFromMenu=function(t){return!!this._menu&&this._menu.isEventFrom(t)},V.prototype._positionMenu=function(){this.isOpen()&&this._menu&&this._menu.position(this._anchor.anchorEl,this.placement)},V.decorators=[{type:c.Directive,args:[{selector:"[ngbDropdown]",exportAs:"ngbDropdown",host:{"(keyup.esc)":"closeFromOutsideEsc()"}}]}],V.ctorParameters=function(){return[{type:S},{type:c.NgZone}]},V.propDecorators={_menu:[{type:c.ContentChild,args:[B]}],_anchor:[{type:c.ContentChild,args:[M]}],autoClose:[{type:c.Input}],_open:[{type:c.Input,args:["open"]}],placement:[{type:c.Input}],openChange:[{type:c.Output}]},V);function V(t,e){var n=this;this._open=!1,this.placement=["auto","bottom"],this.openChange=new c.EventEmitter,this.overLayService=null,this.placement=t.placement,this.autoClose=t.autoClose,this._zoneSubscription=e.onStable.subscribe(function(){n._positionMenu()}),this.overLayService=new i.OverLayHiddenService}var L=[A,M,F,B],N=(q.forRoot=function(){return{ngModule:q,providers:[S]}},q.decorators=[{type:c.NgModule,args:[{imports:[i.FarrisCommonModule],declarations:L,exports:L}]}],q);function q(){}var z=($.prototype.isManual=function(){return"manual"===this.open||"manual"===this.close},$);function $(t,e){this.open=t,(this.close=e)||(this.close=t)}var Z={hover:["mouseenter","mouseleave"]};var K=function(){};function U(e,n,t,i,o,r){var s=function l(t,n){void 0===n&&(n=Z);var e=(t||"").trim();if(0===e.length)return[];var i=e.split(/\s+/).map(function(t){return t.split(":")}).map(function(t){var e=n[t[0]]||t;return new z(e[0],e[1])}),o=i.filter(function(t){return t.isManual()});if(1<o.length)throw"Triggers parse error: only one manual trigger is allowed";if(1===o.length&&1<i.length)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(t),a=[];return 1===s.length&&s[0].isManual()?K:(s.forEach(function(t){t.open===t.close?a.push(e.listen(n,t.open,r)):a.push(e.listen(n,t.open,i),e.listen(n,t.close,o))}),function(){a.forEach(function(t){return t()})})}var X=function pt(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n},Y=(G.prototype.open=function(t,e){return this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),0,this._injector,this._contentRef.nodes)),this._windowRef},G.prototype.close=function(){this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,this._contentRef.viewRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef=null))},G.prototype._getContentRef=function(t,e){if(t){if(t instanceof c.TemplateRef){var n=this._viewContainerRef.createEmbeddedView(t,e);return new X([n.rootNodes],n)}return new X([[this._renderer.createText(""+t)]])}return new X([])},G);function G(t,e,n,i,o){this._type=t,this._injector=e,this._viewContainerRef=n,this._renderer=i,this._componentFactoryResolver=o}var J=(Q.decorators=[{type:c.Injectable}],Q);function Q(){this.placement="top",this.triggers="hover",this.container="body",this.disableTooltip=!1}var tt=0,et=(nt.prototype.applyPlacement=function(t){this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString()),this.placement=t,this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString())},nt.decorators=[{type:c.Component,args:[{selector:"ngb-tooltip-window",changeDetection:c.ChangeDetectionStrategy.OnPush,host:{"[class]":'"tooltip show bs-tooltip-" + placement.split("-")[0]+" bs-tooltip-" + placement',role:"tooltip","[id]":"id"},template:'<div class="arrow"></div><div class="tooltip-inner"><ng-content></ng-content></div>',styles:["\n    :host.bs-tooltip-top .arrow, :host.bs-tooltip-bottom .arrow {\n      left: calc(50% - 0.4rem);\n    }\n\n    :host.bs-tooltip-top-left .arrow, :host.bs-tooltip-bottom-left .arrow {\n      left: 1em;\n    }\n\n    :host.bs-tooltip-top-right .arrow, :host.bs-tooltip-bottom-right .arrow {\n      left: auto;\n      right: 0.8rem;\n    }\n\n    :host.bs-tooltip-left .arrow, :host.bs-tooltip-right .arrow {\n      top: calc(50% - 0.4rem);\n    }\n\n    :host.bs-tooltip-left-top .arrow, :host.bs-tooltip-right-top .arrow {\n      top: 0.4rem;\n    }\n\n    :host.bs-tooltip-left-bottom .arrow, :host.bs-tooltip-right-bottom .arrow {\n      top: auto;\n      bottom: 0.4rem;\n    }\n  "]}]}],nt.ctorParameters=function(){return[{type:c.ElementRef},{type:c.Renderer2}]},nt.propDecorators={placement:[{type:c.Input}],id:[{type:c.Input}]},nt);function nt(t,e){this._element=t,this._renderer=e,this.placement="top"}var it=(Object.defineProperty(ot.prototype,"ngbTooltip",{get:function(){return this._ngbTooltip},set:function(t){!(this._ngbTooltip=t)&&this._windowRef&&this.close()},enumerable:!0,configurable:!0}),ot.prototype.open=function(t){this._windowRef||!this._ngbTooltip||this.disableTooltip||(this._windowRef=this._popupService.open(this._ngbTooltip,t),this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&window.document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.instance.placement=Array.isArray(this.placement)?this.placement[0]:this.placement,this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._windowRef.instance.applyPlacement(P(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,this.referElement)),this.shown.emit())},ot.prototype.close=function(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit())},ot.prototype.toggle=function(){this._windowRef?this.close():this.open()},ot.prototype.isOpen=function(){return null!=this._windowRef},ot.prototype.ngOnInit=function(){this._unregisterListenersFn=U(this._renderer,this._elementRef.nativeElement,this.triggers,this.open.bind(this),this.close.bind(this),this.toggle.bind(this))},ot.prototype.ngOnDestroy=function(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()},ot.decorators=[{type:c.Directive,args:[{selector:"[ngbTooltip]",exportAs:"ngbTooltip"}]}],ot.ctorParameters=function(){return[{type:c.ElementRef},{type:c.Renderer2},{type:c.Injector},{type:c.ComponentFactoryResolver},{type:c.ViewContainerRef},{type:J},{type:c.NgZone}]},ot.propDecorators={placement:[{type:c.Input}],triggers:[{type:c.Input}],container:[{type:c.Input}],disableTooltip:[{type:c.Input}],shown:[{type:c.Output}],hidden:[{type:c.Output}],referElement:[{type:c.Input}],ngbTooltip:[{type:c.Input}]},ot);function ot(t,e,n,i,o,r,s){var a=this;this._elementRef=t,this._renderer=e,this.container="body",this.shown=new c.EventEmitter,this.hidden=new c.EventEmitter,this._ngbTooltipWindowId="ngb-tooltip-"+tt++,this.placement=r.placement,this.triggers=r.triggers,this.container=r.container||"body",this.disableTooltip=r.disableTooltip,this._popupService=new Y(et,n,o,e,i),this._zoneSubscription=s.onStable.subscribe(function(){a._windowRef&&a._windowRef.instance.applyPlacement(P(a._elementRef.nativeElement,a._windowRef.location.nativeElement,a.placement,"body"===a.container,a.referElement))})}var rt=(st.forRoot=function(){return{ngModule:st,providers:[J]}},st.decorators=[{type:c.NgModule,args:[{declarations:[it,et],exports:[it],entryComponents:[et]}]}],st);function st(){}var at=(lt.forRoot=function(t){return{ngModule:lt,providers:[{provide:f,useValue:t}]}},lt.decorators=[{type:c.NgModule,args:[{imports:[e.CommonModule,s.LocaleModule,o.FormsModule,N.forRoot(),rt.forRoot(),r.FDropdownDirectiveTypeModule],declarations:[m,C,T,I,y,h],exports:[m,C,T,I,h,y,N,rt],providers:[b]}]}],lt);function lt(){}t.TabHostDirective=h,t.FarrisTabComponent=C,t.TabTranscludeDirective=T,t.TabHeadDirective=I,t.NgbDropdownMenu=B,t.NgbDropdownAnchor=M,t.NgbDropdownToggle=F,t.NgbDropdown=A,t.NgbDropdownConfig=S,t.NgbDropdownModule=N,t.NgbTooltipConfig=J,t.NgbTooltip=it,t.NgbTooltipModule=rt,t.NgbTooltipWindow=et,t.FarrisTabsModule=at,t.FarrisTabsComponent=m,t.TabConfig=f,t.TabService=b,t.FarrisTabsExtendDirective=y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-tabs.umd.min.js.map