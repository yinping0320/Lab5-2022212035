/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ElementRef, Renderer2, ChangeDetectionStrategy, ChangeDetectorRef, ViewEncapsulation, ViewChild, EventEmitter, Output, NgZone } from '@angular/core';
import { fromEvent, Observable, of, BehaviorSubject, Subject } from 'rxjs';
import { takeUntil, map, scan, switchMap, takeWhile, debounceTime } from 'rxjs/operators';
import { TabService } from '../tabs.config';
import ResizeObserver from 'resize-observer-polyfill';
import { NgbDropdownMenu } from '../dropdown/dropdown';
var FarrisTabsComponent = /** @class */ (function () {
    function FarrisTabsComponent(stService, elementRef, renderer, cdRef, ngZone) {
        var _this = this;
        this.stService = stService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.tabType = '';
        // 支持标签页填充
        this.fill = false;
        // 支持标签页标题自适应宽度-
        this.autoTitleWidth = false;
        // 标题长度大于等于多少字符，启用渐变样式——属性废弃
        this.titleLength = 7;
        // 搜索框是否显示
        this.searchBoxVisible = true;
        // 内容是否是flex 容器 用于内部子元素flex-----未被使用
        this.contentDirection = 'column';
        this.clickThrottleTime = 350;
        this.clickItems = new Subject();
        /**
         * 因为生成器结构变更导致此处变更
         */
        this._disableStatesDatas = new Subject();
        // 按照之前的逻辑，如果没有找到key，就说明可见
        this._visibleDatas = new Subject();
        // 左侧所有标签的宽度和,百分比
        this.titleWidth = 0;
        this.tabChange = new EventEmitter();
        this.tabRemove = new EventEmitter();
        // 内容填充状态
        this.contentFillStates = new BehaviorSubject(false);
        // 宽度状态
        this.widthStates = new BehaviorSubject(false);
        // 高度状态
        this.heightStates = new BehaviorSubject(false);
        this.positionStates = new BehaviorSubject('top');
        this.menuItemsWidth = 'auto';
        //maxDropdownH = 200; -----未被使用
        // 下拉列表最大宽度： 非正值表明是不限制宽度 -----未被使用
        this.maxDropdownW = -1;
        this._customClass = '';
        // 标签存储列表
        this._tabs = [];
        // 工具条显示相关配置
        this.toolbarConf = {
            position: '',
            contents: []
        };
        // 工具条右侧小下拉框是否显示
        this.toolbarDpHidden = true;
        // 工具条“更多”里的按钮
        this.inMoreButtonContents = [];
        // 显示下拉数据
        this.dropdownTabs = [];
        // 隐藏左右滚动箭头按钮
        this.hideButtons = true;
        // 隐藏下拉
        this.hideDropDown = true;
        // 禁用左箭头
        this.disableLeft = false;
        // 禁用右箭头
        this.disableRight = false;
        // 记录事件流
        this.subscription = [];
        // 禁用右侧提示
        this.disableRTooltip = true;
        // 禁用左侧提示
        this.disableLTooltip = true;
        // 左侧提示数据
        this.leftTooltipTabs = [];
        // 右侧提示数据
        this.rightTooltipTabs = [];
        this.maxTooltipLen = 5;
        // 标记当前Tab标签
        this.activeId = '';
        this.ro = null;
        this._ddmHandler = null;
        // 当宽度改变时，强制收起下拉菜单 
        this.dpState = [false];
        // 在toolbar不存在的时候先记录visible变化的地方
        this.visibleRecord = {};
        this.disableRecord = {};
        // 下拉菜单的参照元素
        this.referEl = null;
        this.tabVisibleChanged = new Subject();
        this.el = this.elementRef.nativeElement;
        if (this.el.parentElement) {
            this.referEl = this.el.parentElement;
        }
        this.verifyConfig();
        this.subscription.push(this.tabVisibleChanged.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this._reCalculateAll();
            _this._calculateToolbarDropdownIsShow();
            _this._calculateButtonsShow();
        })));
    }
    Object.defineProperty(FarrisTabsComponent.prototype, "position", {
        get: /**
         * @return {?}
         */
        function () {
            return this._position;
        },
        // tab页位置 上下左右
        set: 
        // tab页位置 上下左右
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._position = value;
            this.positionStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "width", {
        // tabs宽度和高度
        set: 
        // tabs宽度和高度
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._width = this.resolveSize(value);
            this.widthStates.next(this._width);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "height", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._height = this.resolveSize(value);
            this.heightStates.next(this._height);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "headerHeight", {
        get: /**
         * @return {?}
         */
        function () {
            return this._headerHeight;
        },
        set: /**
         * @param {?} headerHeight
         * @return {?}
         */
        function (headerHeight) {
            this._headerHeight = this.resolveSize(headerHeight);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "contentFill", {
        // 内容是否填充  默认是不填充
        set: 
        // 内容是否填充  默认是不填充
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._contentFill = value;
            this.contentFillStates.next(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "btnStates", {
        set: /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                if (this._disableStatesDatas &&
                    this._disableStatesDatas.hasOwnProperty("unsubscribe")) {
                    this._disableStatesDatas["unsubscribe"]();
                }
                this._disableStatesDatas = values;
                this.disableStateBind();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "btnVisible", {
        // 是否可见的状态
        set: 
        // 是否可见的状态
        /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (values) {
                if (this._visibleDatas &&
                    this._visibleDatas.hasOwnProperty("unsubscribe")) {
                    this._visibleDatas["unsubscribe"]();
                }
                this._visibleDatas = values;
                this.visibleStateBind();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabs", {
        // 所有标签数据
        get: 
        // 所有标签数据
        /**
         * @return {?}
         */
        function () {
            return this._tabs;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._tabs = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "customClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this._customClass;
        },
        set: /**
         * @param {?} customClass
         * @return {?}
         */
        function (customClass) {
            var _this = this;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.removeClass(_this.el, cssClass);
                }));
            }
            this._customClass = customClass ? customClass.trim() : null;
            if (this.customClass) {
                this.customClass.split(' ').forEach((/**
                 * @param {?} cssClass
                 * @return {?}
                 */
                function (cssClass) {
                    _this.renderer.addClass(_this.el, cssClass);
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "direction", {
        get: /**
         * @return {?}
         */
        function () {
            switch (this.position) {
                case 'top':
                    return 'column';
                case 'bottom':
                    return 'column-reverse';
                case 'left':
                    return 'row';
                case 'right':
                    return 'row-reverse';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FarrisTabsComponent.prototype, "tabDirection", {
        // 无用，兼容
        get: 
        // 无用，兼容
        /**
         * @return {?}
         */
        function () {
            if (this.position === 'top' || this.position === 'bottom') {
                return 'row';
            }
            else if (this.position === 'left' || this.position === 'right') {
                return 'column';
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    FarrisTabsComponent.prototype.trackByButton = /**
     * @param {?} index
     * @param {?} btn
     * @return {?}
     */
    function (index, btn) { return btn.id; };
    ;
    /** 验证传递参数 */
    /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.verifyConfig = /**
     * 验证传递参数
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var config = this.stService.getConfig();
        Object.assign(this, config);
        this.scrollStep = parseInt(this.scrollStep + '', 10);
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.beforeSelect) {
            this.beforeSelect = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        this.clickSubscription = this.clickItems.pipe(debounceTime(this.clickThrottleTime))
            .subscribe((/**
         * @param {?} btnInfo
         * @return {?}
         */
        function (btnInfo) {
            if (btnInfo.click && typeof btnInfo.click == 'function') {
                btnInfo.click();
            }
        }));
        this._tabContainerEl = this.tabContainer.nativeElement;
        this._createStream();
        this.activeId = this.selectId;
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.ro === null) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        _this._reCalculateAll();
                        _this._calculateToolbarDropdownIsShow();
                        _this._calculateButtonsShow();
                    }));
                    _this.ro.observe(_this.el.parentElement);
                }
            }));
        }
    };
    /**
     * 解决按钮调整隐藏状态之后，下拉中能显示的按钮有多少
     */
    /**
     * 解决按钮调整隐藏状态之后，下拉中能显示的按钮有多少
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.visibleStateBind = /**
     * 解决按钮调整隐藏状态之后，下拉中能显示的按钮有多少
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this._visibleDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            // 解决切换时，按钮状态没被记录的问题
            /** @type {?} */
            var idArray = Object.keys(data);
            idArray.forEach((/**
             * @param {?} btnId
             * @return {?}
             */
            function (btnId) {
                _this.visibleRecord[btnId] = data[btnId];
            }));
            if (_this.toolbarConf && _this.toolbarConf.contents.length > 0) {
                // 调整按钮可见状态            
                _this.changeState(data, "visible");
                // 重新计算
                _this._reCalculateAll();
                _this._calculateToolbarDropdownIsShow();
                _this._calculateButtonsShow();
            }
        }));
    };
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.disableStateBind = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this._disableStatesDatas.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            // 解决切换时，按钮状态没被记录的问题
            /** @type {?} */
            var idArray = Object.keys(data);
            idArray.forEach((/**
             * @param {?} btnId
             * @return {?}
             */
            function (btnId) {
                _this.disableRecord[btnId] = data[btnId];
            }));
            if (_this.toolbarConf && _this.toolbarConf.contents.length > 0) {
                // 调整按钮可见状态            
                _this.changeState(data, "disable");
            }
        }));
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['selectId']) {
            this.selectTab(changes['selectId'].currentValue);
        }
    };
    /* 标签页内容初始化 */
    /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentInit = /* 标签页内容初始化 */
    /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterContentChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // 为了兼容弄旧表单，不兼容HostBinding, 通过追加class的方式实现
        this.renderer.addClass(this.el, 'farris-tabs');
        this.renderer.addClass(this.el, 'flex-column');
        this.contentFillStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.addClass(_this.el, 'f-tabs-content-fill');
            }
            else {
                _this.renderer.removeClass(_this.el, 'f-tabs-content-fill');
            }
        }));
        this.widthStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'width', data);
            }
        }));
        this.heightStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data) {
                _this.renderer.setStyle(_this.el, 'height', data);
            }
        }));
        this.positionStates.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.renderer.removeClass(_this.el, 'flex-row');
            _this.renderer.removeClass(_this.el, 'flex-column');
            _this.renderer.removeClass(_this.el, 'flex-row-reverse');
            _this.renderer.removeClass(_this.el, 'flex-column-reverse');
            if (data === 'left') {
                _this.renderer.addClass(_this.el, 'flex-row');
            }
            if (data === 'top') {
                _this.renderer.addClass(_this.el, 'flex-column');
            }
            if (data === 'right') {
                _this.renderer.addClass(_this.el, 'flex-row-reverse');
            }
            if (data === 'bottom') {
                _this.renderer.addClass(_this.el, 'flex-column-reverse');
            }
        }));
        // 兼容结束
        this.getToolbarConf();
        this._reCalculateAll();
        this._setActive();
        this._changeTitleStyle();
        this._listenShowChanges();
        /** @type {?} */
        var self = this;
        // this.renderer.listen(document, 'keyup', function (e) {
        //     if (self.searchInputVisible) {
        //         console.log(e);
        //     }
        // });
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this._ddmHandler = _this.renderer.listen(document, 'mousedown', (/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!e.target.closest('.farris-tabs-header')) {
                    if (_this.el && _this.el.querySelector('.dropdown-menu')) {
                        if (_this.ddm && _this.ddm.dropdown) {
                            _this.ddm.dropdown.close();
                        }
                    }
                }
            }));
        }));
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        // 组件销毁时  取消所有事件订阅
        this.subscription.forEach((/**
         * @param {?} sub
         * @return {?}
         */
        function (sub) {
            sub.unsubscribe();
        }));
        this.subscription = [];
        if (this.ro) {
            if (this.el.parentElement) {
                this.ro.unobserve(this.el.parentElement);
            }
            this.ro = null;
        }
        if (this._ddmHandler) {
            this._ddmHandler();
            this._ddmHandler = null;
        }
        if (this.clickSubscription) {
            this.clickSubscription.unsubscribe();
        }
        if (this._visibleDatas &&
            this._visibleDatas.hasOwnProperty("unsubscribe")) {
            this._visibleDatas["unsubscribe"]();
            this._visibleDatas = null;
        }
    };
    /**
     * @param {?} btnInfo
     * @return {?}
     */
    FarrisTabsComponent.prototype.clickHandler = /**
     * @param {?} btnInfo
     * @return {?}
     */
    function (btnInfo) {
        if (!btnInfo) {
            return;
        }
        if (btnInfo.hasOwnProperty('disable') && btnInfo['disable']) {
            // 如果禁用就不触发点击事件
            return;
        }
        this.clickItems.next(btnInfo);
    };
    // 更多tab的显示隐藏
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.openChange = 
    // 更多tab的显示隐藏
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.searchInputVisible = e;
        this.searchTabText = undefined;
        this._reCalculateAll();
        // 启用了搜索，需要判断下拉面板的值
        // 因为下拉面板可能存在遮挡的问题
        if (e) {
            this.menuItemsWidth = this.ddm.resetMenuElWidthOpen() + 'px';
        }
        else {
            this.menuItemsWidth = 'auto';
        }
    };
    // 搜索tab
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.searchTab = 
    // 搜索tab
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.stopBubble(e);
        this._reCalculateAll();
    };
    // 阻止冒泡
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    FarrisTabsComponent.prototype.stopBubble = 
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    };
    /**
     * Ximena 23.08.30 判断是否可见,独立出来
     * Todo:
     * 1、现在btnVisible每次的变更都是全量，是否需要记录每次变更，然后合并计算？
     * 2、现在判断是否可见的方法，是直接更新界面的，每个按钮上都绑定了这个方法，会有性能问题。应该改成处理在绑定的所有数据，然后更新界面。
     * 3、是否可见和禁用有同样的问题
     * @param id
     * @returns
     */
    /**
     * Ximena 23.08.30 判断是否可见,独立出来
     * Todo:
     * 1、现在btnVisible每次的变更都是全量，是否需要记录每次变更，然后合并计算？
     * 2、现在判断是否可见的方法，是直接更新界面的，每个按钮上都绑定了这个方法，会有性能问题。应该改成处理在绑定的所有数据，然后更新界面。
     * 3、是否可见和禁用有同样的问题
     * @param {?} btnItem
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarStateVisible = /**
     * Ximena 23.08.30 判断是否可见,独立出来
     * Todo:
     * 1、现在btnVisible每次的变更都是全量，是否需要记录每次变更，然后合并计算？
     * 2、现在判断是否可见的方法，是直接更新界面的，每个按钮上都绑定了这个方法，会有性能问题。应该改成处理在绑定的所有数据，然后更新界面。
     * 3、是否可见和禁用有同样的问题
     * @param {?} btnItem
     * @return {?}
     */
    function (btnItem) {
        /** @type {?} */
        var stateProp = "visible";
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        return true;
    };
    /**
     * @param {?} btnItem
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarStateDisable = /**
     * @param {?} btnItem
     * @return {?}
     */
    function (btnItem) {
        /** @type {?} */
        var stateProp = "disable";
        if (btnItem.hasOwnProperty(stateProp)) {
            return btnItem[stateProp];
        }
        // 不存在属性
        return false;
    };
    /**
     * 只处理是否禁用
     * @param id
     * @param state
     * @returns
     */
    /**
     * 只处理是否禁用
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarState = /**
     * 只处理是否禁用
     * @param {?} id
     * @param {?=} state
     * @return {?}
     */
    function (id, state) {
        if (state === void 0) { state = this.btnStates; }
        if (state) {
            return state.pipe(map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n[id] === undefined) {
                    // console.warn(`未找ID为：${id} 相关状态设置！`);
                    return false;
                }
                return n[id];
            })));
        }
        else {
            return of(true);
        }
    };
    // 监听子组件的隐藏显示属性
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._listenShowChanges = 
    // 监听子组件的隐藏显示属性
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 如果隐藏的组件是激活状态，先将其设置为常规
        this.tabs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.showStates.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                /** @type {?} */
                var activeIdToken;
                item._show = data;
                if (data === false && item.id === _this.activeId) {
                    item._active = false;
                    _this.activeId = '';
                    activeIdToken = false;
                }
                /** @type {?} */
                var tabs = _this.tabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item._show === true; }));
                /** @type {?} */
                var defaultTabId = tabs.length ? tabs[0].id : null;
                // 然后将显示状态下的第一个tab激活
                if (defaultTabId && activeIdToken === false) {
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item.id === defaultTabId) {
                            _this.activeId = item.id;
                            _this.tabs[index]._active = true;
                        }
                    }));
                    _this.getToolbarConf();
                }
                _this.cdRef.detectChanges();
            }));
        }));
    };
    /**
     * 选中Tab
     * @param  tabId tab标识
     */
    /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTab = /**
     * 选中Tab
     * @param {?} tabId tab标识
     * @return {?}
     */
    function (tabId) {
        /** @type {?} */
        var selectedTab = this._getTabById(tabId);
        this._selectTab(selectedTab.tab, selectedTab.index);
    };
    /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    FarrisTabsComponent.prototype._cpSelectTabByIndex = /**
     * @param {?} ev
     * @param {?} id
     * @param {?=} ddm
     * @return {?}
     */
    function (ev, id, ddm) {
        if (ddm === void 0) { ddm = null; }
        ev.preventDefault();
        ev.stopPropagation();
        /** @type {?} */
        var targetEL = (/** @type {?} */ (ev.target));
        if (targetEL.className.indexOf('st-drop-close') > -1 ||
            targetEL.parentElement.className.indexOf('st-drop-close') > -1) {
            // 阻止冒泡和捕获事件 点击删除标记 则执行删除标签方法  而不是选中标签
            this.closeTab(id);
        }
        else {
            // 阻止冒泡
            this.selectTab(id);
        }
        this.getToolbarConf();
        this.cdRef.markForCheck();
        this._reCalculateAll();
        this._calculateToolbarDropdownIsShow();
        this._calculateButtonsShow();
        if (ddm) {
            ddm.dropdown.close();
        }
        return false;
    };
    /**
     * 通过tabs的索引选择 tab
     * @param index tabs索引
     */
    /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    FarrisTabsComponent.prototype.selectTabByIndex = /**
     * 通过tabs的索引选择 tab
     * @param {?} index tabs索引
     * @return {?}
     */
    function (index) {
        if (index >= 0 && index < this.tabs.length) {
            /** @type {?} */
            var selectTab = this.tabs[index];
            this._selectTab(selectTab, index);
        }
    };
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype._selectTab = /* 选中tab时  暴露出选中tab的id 和其之后的id */
    /**
     * @private
     * @param {?} tab
     * @param {?} index
     * @return {?}
     */
    function (tab, index) {
        var _this = this;
        if (tab && !tab.disabled && this.activeId !== tab.id) {
            if (!this.beforeSelect) {
                this.beforeSelect = (/**
                 * @return {?}
                 */
                function () { return of(true); });
            }
            /** @type {?} */
            var tabsChangeEventParam_1 = {
                prevId: this.activeId,
                nextId: tab.id
            };
            this.beforeSelect(tabsChangeEventParam_1).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e) {
                    _this.activeId = tab.id;
                    // 首先不激活所有的tab页  然后激活当前tab页
                    // let index = -1;
                    _this.tabs.forEach((/**
                     * @param {?} item
                     * @param {?} i
                     * @return {?}
                     */
                    function (item, i) {
                        item._active = false;
                    }));
                    _this.tabs[index]._active = true;
                    _this.getToolbarConf();
                    // 滚动到可见区域内
                    _this.scrollTabIntoView(index);
                    _this.cdRef.detectChanges();
                    _this.tabChange.emit(tabsChangeEventParam_1);
                }
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._setActive = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.tabs.length) {
            /** @type {?} */
            var tabs = this.tabs.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item._show === true; }));
            /** @type {?} */
            var activeTab = this._getTabById(this.activeId).tab;
            this.activeId = activeTab ? activeTab.id : this.tabs.length ? this.tabs[0].id : null;
            // 过滤掉show=false（隐藏）的tab
            if (tabs.length) {
                if (this.activeId) {
                    /** @type {?} */
                    var targetTab = tabs.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) { return item.id === _this.activeId; }));
                    if (targetTab) {
                        this.activeId = targetTab.id;
                    }
                }
                else {
                    this.activeId = tabs[0].id;
                }
            }
            else {
                this.activeId = null;
            }
            this.tabs.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item._active = false;
                if (item.id === _this.activeId) {
                    item._active = true;
                }
            }));
        }
    };
    /**
     * @param activeId 显示某个tab
     */
    /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    FarrisTabsComponent.prototype.showTab = /**
     * @param {?} tabId
     * @param {?=} selectable
     * @return {?}
     */
    function (tabId, selectable) {
        if (selectable === void 0) { selectable = true; }
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            if (this.tabs[i].id === tabId) {
                this.tabs[i]._show = true;
                if (selectable) {
                    this.selectTab(tabId);
                }
                return;
            }
        }
    };
    /**
     * @param activeId 隐藏某个tab
     */
    /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    FarrisTabsComponent.prototype.hideTab = /**
     * @param {?} activeId 隐藏某个tab
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var showTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show === true;
        }));
        /** @type {?} */
        var len = showTabs.length - 1;
        if (len < 0) {
            return;
        }
        /** @type {?} */
        var index;
        for (var i = 0; i <= len; i++) {
            if (showTabs[i].id === activeId) {
                showTabs[i]._show = false;
                index = i;
                break;
            }
        }
        if (index === undefined) {
            return;
        }
        else if (index === len && len < 1) {
            this.selectTab('');
        }
        else if (index === len && len >= 1) {
            this.selectTab(showTabs[len - 1].id);
        }
        else {
            this.selectTab(showTabs[index + 1].id);
        }
    };
    /**
     * 添加标签
     * @param curTabs 数组或者对象
     * @param activeId 设置
     */
    /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    FarrisTabsComponent.prototype.addTabs = /**
     * 添加标签
     * @param {?} curTabs 数组或者对象
     * @param {?} index
     * @param {?} setActiveId
     * @return {?}
     */
    function (curTabs, index, setActiveId) {
        var _a;
        if (curTabs.length > 0) {
            (_a = this.tabs).splice.apply(_a, tslib_1.__spread([index, 0], curTabs));
            // 去重
            this.tabs = this._unique(this.tabs);
        }
        if (setActiveId && this.activeId !== setActiveId) {
            /** @type {?} */
            var filterTab = this._getTabById(setActiveId);
            if (filterTab.index >= 0) {
                this.selectTab(setActiveId);
                this.activeId = setActiveId;
                this.scrollTabIntoView(filterTab.index);
            }
        }
        this.cdRef.detectChanges();
        this._reCalculateAll();
        this._changeTitleStyle();
    };
    /**
     * 添加标签时  去重
     *
     */
    /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    FarrisTabsComponent.prototype._unique = /**
     * 添加标签时  去重
     *
     * @private
     * @param {?} objArray
     * @return {?}
     */
    function (objArray) {
        /** @type {?} */
        var hash = {};
        objArray = objArray.reduce((/**
         * @param {?} item
         * @param {?} next
         * @return {?}
         */
        function (item, next) {
            if (hash[next.id]) {
                hash[next.id] = '';
            }
            else {
                hash[next.id] = true && item.push(next);
            }
            return item;
        }), []);
        return objArray;
    };
    /* 通过tab列表的序列删除tab */
    /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.removeTabByIndex = /* 通过tab列表的序列删除tab */
    /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        /** @type {?} */
        var len = this.tabs.length - 1;
        if (index < 0 || index > len) {
            return;
        }
        /** @type {?} */
        var removeTab = this.tabs[index];
        removeTab._active = false;
        if (this.activeId === removeTab.id) {
            // 只有一个而且被删除
            if (len === 0) {
                // 如果所有标签均删除 激活id为空
                this.activeId = '';
            }
            else if (index === len) {
                // 如果删除的是最后一个标签 设置其前面的处于激活状态
                this.activeId = this.tabs[len - 1].id;
                this.tabs[index - 1]._active = true;
            }
            else {
                // 如果其他情况  设置其后面的处于激活状态
                this.activeId = this.tabs[index + 1].id;
                this.tabs[index + 1]._active = true;
            }
            this.tabs.splice(index, 1);
            this.scrollTabIntoView(index);
        }
        else {
            this.tabs.splice(index, 1);
        }
        this.tabRemove.emit({
            removeIndex: index,
            removeId: removeTab.id,
            activeId: this.activeId
        });
        this.cdRef.detectChanges();
    };
    /**
     * 关闭标签  跟删除标签不同
     * @param string
     */
    /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    FarrisTabsComponent.prototype.closeTab = /**
     * 关闭标签  跟删除标签不同
     * @param {?} activeId
     * @return {?}
     */
    function (activeId) {
        /** @type {?} */
        var len = this.tabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var tab = this.tabs[i];
            if (tab.id === activeId) {
                this.removeTabByIndex(i);
                return;
            }
        }
    };
    /**
     * 初始化
     */
    /**
     * 初始化
     * @return {?}
     */
    FarrisTabsComponent.prototype.load = /**
     * 初始化
     * @return {?}
     */
    function () {
        for (var i = 0; i < this.tabs.length; i++) {
            if (this.tabs[i].id === this.activeId) {
                this.tabs[i]._active = true;
                return;
            }
        }
    };
    /**
     * 截取tab中的title,超过6位，截断
     */
    /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._truncateTitle = /**
     * 截取tab中的title,超过6位，截断
     * @private
     * @return {?}
     */
    function () {
        this.tabs = this.tabs.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.title = item.title.length > 6 ? item.title.substr(0, 6) : item.title;
            return item;
        }));
    };
    /**
     * 替换tab中的title颜色
     */
    /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._changeTitleStyle = /**
     * 替换tab中的title颜色
     * @private
     * @return {?}
     */
    function () {
        if (this.autoTitleWidth) {
            return;
        }
        /** @type {?} */
        var $textEls = this._tabContainerEl.querySelectorAll('.st-tab-text');
        for (var k = 0; k < $textEls.length; k++) {
            /** @type {?} */
            var parentEl = $textEls[k].parentNode;
            if ($textEls[k].scrollWidth > parentEl['offsetWidth']) {
                this.tabs[k].titleOverflow = true;
            }
            else {
                this.tabs[k].titleOverflow = false;
            }
        }
        //this.cdRef.detectChanges();
    };
    /**
     * 创建流
     */
    /**
     * 创建流
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._createStream = /**
     * 创建流
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        [this.rightNav, this.leftNav].forEach((/**
         * @param {?} curBtn
         * @param {?} index
         * @return {?}
         */
        function (curBtn, index) {
            /** @type {?} */
            var direction = index ? -1 : 1;
            /** @type {?} */
            var mousedown$ = fromEvent(curBtn.nativeElement, 'mousedown');
            /** @type {?} */
            var mouseup$ = fromEvent(curBtn.nativeElement, 'mouseup');
            /** @type {?} */
            var newMouseDown$ = mousedown$.pipe(switchMap((/**
             * @param {?} event
             * @return {?}
             */
            function (event) {
                event.preventDefault();
                event.stopPropagation();
                /** @type {?} */
                var interval$ = of(0).pipe(
                // concat(interval(80)),
                takeUntil(mouseup$), scan((/**
                 * @param {?} sum
                 * @param {?} num
                 * @return {?}
                 */
                function (sum, num) {
                    return sum + _this.scrollStep * direction;
                }), 0), takeWhile((/**
                 * @param {?} num
                 * @return {?}
                 */
                function (num) {
                    if (direction > 0) {
                        return !_this.disableRight;
                    }
                    return !_this.disableLeft;
                })), map((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return { value: v, direction: direction };
                })));
                return interval$;
            })));
            /** @type {?} */
            var mousepressSub = newMouseDown$.subscribe((/**
             * @param {?} change
             * @return {?}
             */
            function (change) {
                _this._scrollTab(change.value, change.direction);
            }));
            _this.subscription.push(mousepressSub);
        }));
        // if (this.autoResize) {
        //     // 订阅windows resize事件
        //     this.subscription.push(
        //         fromEvent(window, 'resize')
        //             .pipe(throttleTime(80))
        //             .subscribe(e => {
        //                 this.cdRef.detectChanges();
        //             })
        //     );
        // }
    };
    /**
     * 按照方向，滚动到指定位置
     * @param dist_scroll 目标滚动
     * @param direction 方向
     */
    /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    FarrisTabsComponent.prototype._scrollTab = /**
     * 按照方向，滚动到指定位置
     * @private
     * @param {?} move
     * @param {?} direction 方向
     * @return {?}
     */
    function (move, direction) {
        /** @type {?} */
        var dist_scrollleft = this._tabContainerEl.scrollLeft + move;
        /** @type {?} */
        var max_scroll_left = this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        // 标签页左侧移动
        if (direction > 0) {
            this._tabContainerEl.scrollLeft = Math.min(dist_scrollleft, max_scroll_left);
        }
        else if (direction < 0) {
            // 标签页右侧移动
            this._tabContainerEl.scrollLeft = Math.max(dist_scrollleft, 0);
        }
        this._reCalculateSides();
        // this.cdRef.detectChanges();
    };
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     */
    /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    FarrisTabsComponent.prototype.scrollTabIntoView = /**
     * 指定当前滑动到可视区域——————————————未测试
     * index
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var tabIndex = parseInt(index + '', 10);
        /** @type {?} */
        var tabToScroll;
        // first we find the tab element.
        if (tabIndex >= 0) {
            /** @type {?} */
            var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
            if (allTabs.length > tabIndex) {
                tabToScroll = allTabs[tabIndex];
            }
        }
        else {
            // scroll selected tab into view
            /** @type {?} */
            var activeTab = this._tabContainerEl.querySelector('li.active');
            if (activeTab) {
                tabToScroll = activeTab;
            }
        }
        if (tabToScroll) {
            /** @type {?} */
            var tab_left = parseInt(tabToScroll.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var tabs_left = parseInt(this._tabContainerEl.getBoundingClientRect().left + '', 10);
            /** @type {?} */
            var rightPosition = tab_left +
                parseInt(tabToScroll.getBoundingClientRect().width + '', 10) -
                tabs_left;
            /** @type {?} */
            var leftPosition = tab_left - tabs_left - 10;
            if (leftPosition < 0) {
                this._scrollTab(leftPosition, -1);
            }
            else if (rightPosition > this._tabContainerEl.offsetWidth) {
                this._scrollTab(rightPosition - this._tabContainerEl.offsetWidth + 20, 1);
            }
        }
    };
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     */
    /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype.getToolbarConf = /**
     * 切换tab后，重新获取需要该tab下工具条按钮的配置信息以及隐藏更多按钮
     * 以及获取该tab下的头部扩展区域
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tabConfig = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._active === true;
        }))[0];
        if (!tabConfig || !tabConfig.hasOwnProperty('toolbar')) {
            this.toolbarConf = null;
        }
        else {
            this.toolbarConf = tabConfig.toolbar;
        }
        // 记录状态
        this.changeState(this.visibleRecord, "visible");
        this.changeState(this.disableRecord, "disable");
        // 获取该tab下的头部扩展区域
        if (!tabConfig || !tabConfig.hasOwnProperty('farrisTabsExtendDirective')) {
            this.headerExtendConf = null;
        }
        else {
            this.headerExtendConf = tabConfig.farrisTabsExtendDirective;
        }
        // 隐藏更多按钮
        this.toolbarDpHidden = true;
        this.cdRef.detectChanges();
    };
    /**
     * 计算工具栏是否显示下拉按钮
     */
    /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateToolbarDropdownIsShow = /**
     * 计算工具栏是否显示下拉按钮
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        if (!divEl) {
            return;
        }
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            this.renderer.removeStyle(headerExtendEl, 'overflow');
            headerExtendElWidth = headerExtendEl.offsetWidth;
        }
        // 按钮在内容区
        if (!this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth) {
            this.toolbarDpHidden = false;
        }
        else if (this.hasInHeadCl() && this.btnPlaceHolder.nativeElement.offsetWidth > toolbarContainer.offsetWidth - headerExtendElWidth) {
            // 按钮在头部工具栏
            this.toolbarDpHidden = false;
        }
        else {
            this.toolbarDpHidden = true;
        }
        this.cdRef.detectChanges();
    };
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     */
    /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._calculateButtonsShow = /**
     * 计算显示的按钮个数及更多中显示的按钮个数
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var headerExtendEl;
        /** @type {?} */
        var headerExtendElWidth = 0;
        if (!this.toolbarContainer || !this.toolbarConf) {
            return;
        }
        /** @type {?} */
        var toolbarContainer = this.hasInHeadCl() ? this.toolbarContainer.nativeElement : this.toolbarContainer.nativeElement.parentElement;
        /** @type {?} */
        var divEl = toolbarContainer.querySelector('.farris-tabs-inline-flex');
        /** @type {?} */
        var btnPlaceHolderEl = this.btnPlaceHolder.nativeElement;
        /** @type {?} */
        var btnPlaceHolderBtns = btnPlaceHolderEl.querySelectorAll('.btn--cal');
        if (!divEl || btnPlaceHolderBtns.length == 0) {
            return;
        }
        // 此处有个Bug，如果是inContent还是headerExtendConf的情况下，按钮的位置形如inHead
        if (this.headerExtendConf) {
            headerExtendEl = toolbarContainer.querySelector('.farris-tabs-header-extend');
            headerExtendElWidth = this.hasInHeadCl() ? headerExtendEl.offsetWidth : 0;
        }
        /** @type {?} */
        var moreButton = btnPlaceHolderEl.parentElement.querySelector('.morebtn');
        // 计算按钮的宽度      
        /** @type {?} */
        var basicStart = parseInt(btnPlaceHolderEl.getBoundingClientRect().left);
        /** @type {?} */
        var basicWidth = toolbarContainer.offsetWidth - moreButton.offsetWidth - 12 - headerExtendElWidth;
        /** @type {?} */
        var toolbarDropdownHidden = true;
        /** @type {?} */
        var k = 0
        // 只有一个按钮
        ;
        // 只有一个按钮
        if (btnPlaceHolderBtns.length == 1) {
            if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                toolbarDropdownHidden = false;
            }
            else {
                k = 1;
            }
        }
        else {
            for (k = 1; k <= btnPlaceHolderBtns.length - 1; k++) {
                // 如果内容超出,考虑到按钮之间的间距
                if (k == btnPlaceHolderBtns.length - 1) {
                    if (btnPlaceHolderEl.offsetWidth > basicWidth) {
                        toolbarDropdownHidden = false;
                        k = k - 1;
                        break;
                    }
                }
                else if (parseInt(btnPlaceHolderBtns[k].getBoundingClientRect().left) - basicStart > basicWidth) {
                    toolbarDropdownHidden = false;
                    k = k - 1;
                    break;
                }
            }
        }
        this.toolbarDpHidden = toolbarDropdownHidden;
        /** @type {?} */
        var showBtns = divEl.querySelectorAll('.btn--cal');
        for (var i = 0; i < k; i++) {
            this.renderer.setStyle(showBtns[i], 'display', '');
        }
        for (var m = k; m < showBtns.length; m++) {
            this.renderer.setStyle(showBtns[m], 'display', 'none');
        }
        if (this.toolbarConf.contents && this.toolbarConf.contents.length) {
            // 过滤显示按钮的个数
            /** @type {?} */
            var filterShowBtns = this.toolbarConf.contents.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return _this.getToolbarStateVisible(item); }));
            // 从显示按钮中过滤下拉按钮
            this.inMoreButtonContents = filterShowBtns.filter((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                return index >= k;
            }));
        }
        this.cdRef && !this.cdRef['destroyed'] && this.cdRef.detectChanges();
    };
    /**
     * 重新计算是否显示按钮和下拉
     */
    /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateAll = /**
     * 重新计算是否显示按钮和下拉
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this._tabContainerEl) {
            return;
        }
        /** @type {?} */
        var tabParentWidth = this.tabParent.nativeElement.offsetWidth;
        if (!this.hideButtons) {
            /** @type {?} */
            var tr = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-right"));
            /** @type {?} */
            var tl = parseInt(window.getComputedStyle(this.tabParent.nativeElement).getPropertyValue("margin-left"));
            tabParentWidth += tr + tl;
        }
        this.hideButtons = this._tabContainerEl.scrollWidth <= tabParentWidth;
        this.hideDropDown = this.showDropDown ? this.hideButtons : true;
        if (!this.hideButtons) {
            if (!this.hideDropDown) {
                this.dropdownTabs = [].concat(this.tabs);
            }
            if (this.searchTabText) {
                this.dropdownTabs = this.dropdownTabs.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    return item['title'].indexOf(_this.searchTabText) !== -1;
                }));
            }
            this._reCalculateSides();
        }
        this.dpState = [false];
        this.cdRef.detectChanges();
    };
    /**
     * 重新计算左右的提示文字
     */
    /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalulateTooltips = /**
     * 重新计算左右的提示文字
     * @private
     * @return {?}
     */
    function () {
        if (!this._tabContainerEl || this.hideButtons) {
            return;
        }
        /** @type {?} */
        var t_right_tooltips = [];
        /** @type {?} */
        var t_left_tooltips = [];
        /** @type {?} */
        var allTabs = this._tabContainerEl.querySelectorAll('.nav-item');
        /** @type {?} */
        var len = allTabs.length;
        /** @type {?} */
        var hiddenTabs = this.tabs.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item._show !== true;
        }));
        /** @type {?} */
        var hiddenTabsLength = hiddenTabs.length;
        for (var i = 0; i < len; i++) {
            /** @type {?} */
            var leftPosition = allTabs[i].getBoundingClientRect().left -
                this._tabContainerEl.getBoundingClientRect().left;
            /** @type {?} */
            var rightPosition = allTabs[i].getBoundingClientRect().width + leftPosition;
            if (rightPosition > this._tabContainerEl.offsetWidth) {
                t_right_tooltips.push(this.tabs[i]);
            }
            else if (leftPosition < 0) {
                t_left_tooltips.push(this.tabs[i]);
            }
        }
        this.leftTooltipTabs = []
            .concat(t_left_tooltips)
            .slice(Math.max(0, t_left_tooltips.length - this.maxTooltipLen));
        this.rightTooltipTabs = []
            .concat(t_right_tooltips)
            .slice(0, Math.min(this.maxTooltipLen, t_right_tooltips.length));
        this.disableRTooltip = this.rightTooltipTabs.length < 1;
        this.disableLTooltip = this.leftTooltipTabs.length - hiddenTabsLength < 1;
    };
    /**
     * 重新计算左右箭头状态
     */
    /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    FarrisTabsComponent.prototype._reCalculateSides = /**
     * 重新计算左右箭头状态
     * @private
     * @return {?}
     */
    function () {
        this.disableRight =
            this._tabContainerEl.scrollLeft >=
                this._tabContainerEl.scrollWidth - this._tabContainerEl.offsetWidth;
        this.disableLeft = this._tabContainerEl.scrollLeft <= 0;
        this._reCalulateTooltips();
    };
    /**
     * 通过id寻找Tab
     * @param id ID
     */
    /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    FarrisTabsComponent.prototype._getTabById = /**
     * 通过id寻找Tab
     * @private
     * @param {?} id ID
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var indexWidthId = [];
        /** @type {?} */
        var tabsWithId = this.tabs.filter((/**
         * @param {?} tab
         * @param {?} index
         * @return {?}
         */
        function (tab, index) {
            if (tab.id === id) {
                indexWidthId.push(index);
                return true;
            }
            else {
                return false;
            }
        }));
        return {
            tab: tabsWithId.length ? tabsWithId[0] : null,
            index: indexWidthId.length ? indexWidthId[0] : -1
        };
    };
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    FarrisTabsComponent.prototype.resolveSize = /*宽高类型是 string或者number 解析宽高  尺寸 */
    /**
     * @param {?} size
     * @return {?}
     */
    function (size) {
        /** @type {?} */
        var regex = /px|em|rem|pt|%/;
        // 说明是字符串
        return regex.test(size)
            ? "" + parseInt(size, 10) + size.match(regex)[0]
            : size + "px";
    };
    /*
      清空tab
       */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    FarrisTabsComponent.prototype.hasInHeadCl = /*
          清空tab
           */
    // removeAllTab() {
    //     this.tabs.splice(0, this.tabs.length);
    // }
    /**
     * @return {?}
     */
    function () {
        if (this.toolbarConf && this.toolbarConf.hasOwnProperty('position') && this.toolbarConf.hasOwnProperty('contents') && this.toolbarConf.position === 'inHead' && this.toolbarConf.contents.length > 0) {
            return true;
        }
        if (this.headerExtendConf && !(this.toolbarConf && this.toolbarConf.position === 'inContent' && this.toolbarConf.contents.length)) {
            return true;
        }
        return false;
    };
    /**
 * 改变可用状态
 * @param values
 */
    /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    FarrisTabsComponent.prototype.changeState = /**
     * 改变可用状态
     * @private
     * @param {?} values
     * @param {?} stateProp
     * @return {?}
     */
    function (values, stateProp) {
        if (!this.toolbarConf || !this.toolbarConf.contents) {
            return;
        }
        /** @type {?} */
        var idArray = Object.keys(values);
        this.toolbarConf.contents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id == item.id; }));
            if (findId) {
                item[stateProp] = values[findId];
            }
            if (item['children'] && item['children'].length > 0) {
                // 数据源只有一级的下拉
                /** @type {?} */
                var dpChildren = item.children;
                dpChildren.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    /** @type {?} */
                    var findId = idArray.find((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) { return id == item.id; }));
                    if (findId) {
                        item[stateProp] = values[findId];
                    }
                }));
            }
        }));
        this.inMoreButtonContents.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var findId = idArray.find((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id == item.id; }));
            if (findId) {
                item[stateProp] = values[findId];
            }
            if (item['children'] && item['children'].length > 0) {
                // 数据源只有一级的下拉
                /** @type {?} */
                var dpChildren = item.children;
                dpChildren.forEach((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    /** @type {?} */
                    var findId = idArray.find((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) { return id == item.id; }));
                    if (findId) {
                        item[stateProp] = values[findId];
                    }
                }));
            }
        }));
        this.dpState = [false];
        this.cdRef && !this.cdRef['destroyed'] && this.cdRef.detectChanges();
    };
    FarrisTabsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tabs',
                    template: "<div #tabHeader class=\"farris-tabs-header\"\r\n    [class.farris-tabs-inHead]=\"hasInHeadCl()\"\r\n    [class.farris-tabs-inContent]=\"!hasInHeadCl()\"\r\n    [class.farris-tabs-nav-fill]=\"fill||tabType=='fill'\"\r\n    [class.farris-tabs-nav-pills]=\"tabType=='pills'\"\r\n    >\r\n    <div class=\"farris-tabs-title scroll-tabs\"\r\n        [ngStyle]=\"{'width': hasInHeadCl() ? (titleWidth?titleWidth + '%':null) : null}\">\r\n        <button type=\"button\" (disabled)=\"disableLeft\" class=\"btn sc-nav-btn px-1 sc-nav-lr\"\r\n            [ngClass]=\"{'d-none':hideButtons}\" #leftNav>\r\n        </button>\r\n        <div class=\"spacer f-utils-fill\" #tabParent\r\n            [ngClass]=\"{'spacer-sides':!hideButtons&& hideDropDown,'spacer-sides-dropdown':!hideButtons&&!hideDropDown}\"\r\n            style=\"width:100%;\">\r\n            <ul class=\"nav farris-nav-tabs flex-nowrap\" [class.nav-fill]=\"fill||tabType=='fill'\"\r\n                [class.flex-row]=\"position==='top'||position==='bottom'\"\r\n                [class.flex-column]=\"position==='left'||position==='right'\" [class.nav-pills]=\"tabType=='pills'\" #tabContainer>\r\n                <li class=\"nav-item\" *ngFor=\"let tab of tabs;index as tabIndex\"\r\n                    [ngClass]=\"{'d-none': tab._show !== true, 'f-state-active': tab.id === activeId, 'f-state-disabled': tab.disabled === true}\"\r\n                    [ngStyle]=\"{'width':tab.tabWidth+'px'}\">\r\n                    <a class=\"nav-link tabs-text-truncate\" #anchor [class.active]=\"tab.id === activeId\"\r\n                        [class.disabled]=\"tab.disabled\" (click)=\"_cpSelectTabByIndex($event,tab.id)\">\r\n                        <span class=\"st-tab-text\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [ngClass]=\"tab.titleCustomCls\" [tabTransclude]=\"tab.headingRef\"\r\n                            *ngIf=\"tab.headingRef\"></span>\r\n                        <span class=\"st-tab-text\" [ngbTooltip]=\"tab.title\" [referElement]=\"tabContainer\"\r\n                            [disableTooltip]=\"!tab.titleOverflow\" [class.farris-title-auto]=\"autoTitleWidth\"\r\n                            [class.farris-title-text-custom]=\"tab.titleOverflow\"\r\n                            *ngIf=\"!tab.headingRef\">{{tab.title}}</span>\r\n                        <span class=\"st-drop-close\" *ngIf=\"tab.removeable\">\r\n                            <i class=\"f-icon f-icon-close\"></i>\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"btn-group sc-nav-btn\" ngbDropdown (openChange)=\"openChange($event)\" >\r\n            <button type=\"button\"  (disabled)=\"disableRight\" class=\"btn sc-nav-rg\" [ngClass]=\"{'d-none':hideButtons}\"\r\n                #rightNav></button>\r\n            <button #dropDownButton class=\"btn dropdown-toggle-split \" ngbDropdownToggle\r\n                [ngClass]=\"{'d-none':hideDropDown}\">\r\n            </button>\r\n            <div class=\"dropdown-menu\" style=\"max-width: 300px;\" [class.tabs-pt28]=\"searchBoxVisible\" ngbDropdownMenu #ddm=\"DropdownMenu\">\r\n                <div (click)=\"stopBubble($event)\" class='pb-1 tabs-li-absolute' *ngIf=\"searchBoxVisible\">\r\n                    <input type=\"text\" class=\"form-control k-textbox\" [(ngModel)]=\"searchTabText\"\r\n                        (keyup)=\"searchTab($event)\" />\r\n                    <span class=\"f-icon f-icon-page-title-query tabs-icon-search\"></span>\r\n                </div>\r\n                <ul class=\"tab-dropdown-menu--items\" [ngStyle]=\"{'width':menuItemsWidth}\">\r\n                    <li class=\"dropdown-item text-truncate px-2\" *ngFor=\"let tab of dropdownTabs;index as tabIndex\"\r\n                        [ngClass]=\"{'disabled': tab.disabled, 'active': tab.id === activeId, 'd-none': tab._show !==true}\"\r\n                        (click)=\"_cpSelectTabByIndex($event,tab.id, ddm)\">\r\n                        <a class=\"dropdown-title\" style=\"\r\n                            text-overflow: ellipsis;white-space: nowrap;word-break: break-word;width: 100%;\">{{tab.title}}</a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div #toolbarContainer class=\"farris-tabs-toolbar\" *ngIf=\"toolbarConf || headerExtendConf\">\r\n        <div class=\"farris-tabs-inline-flex\" *ngIf=\"toolbarConf\">\r\n            <ng-template ngFor let-btn [ngForOf]=\"toolbarConf.contents\" let-i=\"index\" [ngForTrackBy]=\"trackByButton\">\r\n                <ng-container  *ngIf=\"getToolbarStateVisible(btn)\">\r\n                    <ng-container *ngIf=\"!btn.children||btn.children.length==0\">\r\n                        <button class=\"btn--cal\" [attr.id]=\"btn.id\" [ngClass]=\"btn.appearance.class\"  [disabled]=\"getToolbarStateDisable(btn)\"\r\n                        (click)=\"clickHandler(btn)\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                        <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"btn.children&&btn.children.length>0\">\r\n                        <ng-container *ngTemplateOutlet=\"dropdownTmpl; context: { $implicit: btn }\"></ng-container>\r\n                    </ng-container>  \r\n                </ng-container>              \r\n            </ng-template>\r\n        </div>\r\n         <ng-container *ngIf=\"!toolbarDpHidden&&inMoreButtonContents.length>0\">\r\n            <div class=\"btn-group f-btn-ml sc-nav-btn\" fDropdown #ddmore=\"fDropdown\"  [forceState]=\"dpState\"  [rectifyReference]=\"referEl\" [autoRectify]=\"true\">\r\n                    <button class=\"btn btn-secondary morebtn  dropdown-toggle\" fDropdownToggle >{{'tabs.more' | locale}}</button>\r\n                    <ul class=\"dropdown-menu\" fDropdownMenu id=\"more_menu\">\r\n                        <ng-container *ngFor=\"let item of inMoreButtonContents\">                                            \r\n                            <ng-container  *ngIf=\"getToolbarStateVisible(item)\">\r\n                                <ng-container *ngIf=\"item.children&&item.children.length>0\">\r\n                                    <ng-container *ngTemplateOutlet=\"dropdownSubTmpl;context: { $implicit: item}\"></ng-container>\r\n                                </ng-container>\r\n                                <ng-container *ngIf=\"!item.children||item.children.length==0\">\r\n                                    <li class=\"dropdown-item  f-rt-btn\" id=\"{{ item.id }}\" [class.disabled]=\"getToolbarStateDisable(item)\"  (click)=\"clickHandler(item)\">\r\n                                        {{ item.title }}\r\n                                    </li>\r\n                                </ng-container>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ul>\r\n            </div> \r\n        </ng-container>             \r\n        <div *ngIf=\"headerExtendConf && headerExtendConf.templateRef\" class=\"farris-tabs-header-extend\"\r\n        [class.margin-right-14]=\"toolbarConf && toolbarConf.contents.length\"\r\n        [ngClass]=\"headerExtendConf && headerExtendConf.extendCls\">\r\n        <template [ngTemplateOutlet]=\"headerExtendConf.templateRef\"></template>\r\n    </div>\r\n    </div>\r\n    <!--\u8BA1\u7B97\u4F4D\u7F6E-->\r\n    <div class=\"farris-tabs-btn-placeholder\" *ngIf=\"toolbarConf\">\r\n        <div class=\"btn-group\"><button class=\"btn btn-secondary morebtn  dropdown-toggle\">{{'tabs.more' | locale}}</button></div>        \r\n        <div class=\"btn-placeholder--content\" #btnPlaceholder>\r\n            <ng-container *ngFor=\"let btn of toolbarConf.contents\">\r\n                <ng-container  *ngIf=\"getToolbarStateVisible(btn)\">                    \r\n                    <ng-container *ngIf=\"!btn.children||btn.children.length==0\">\r\n                        <button class=\"btn--cal\" [ngClass]=\"btn.appearance.class\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                        <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{btn.title}}\r\n                    </button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"btn.children&&btn.children.length>0\">\r\n                        <div class=\"btn-group btn--cal\" [ngClass]=\"btn.appearance?.dropdownCls\" >\r\n                            <ng-container *ngIf=\"btn.split\">\r\n                                <button type=\"button\" class=\"btn\" [ngClass]=\"btn.appearance?.class\" [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                                    <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{ btn.title }}\r\n                                </button>\r\n                            <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"btn.appearance?.class\"></button>\r\n                            </ng-container>\r\n                            <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n                            <ng-container *ngIf=\"!btn.split\">\r\n                                <button type=\"button\"  class=\"btn\" [ngClass]=\"btn.appearance?.class + ' dropdown-toggle'\"  [class.btn-icontext]=\"btn.icon&&btn.icon.trim()\">\r\n                                    <i class=\"f-icon\" [ngClass]=\"btn.icon&&btn.icon.trim()\" *ngIf=\"btn.icon&&btn.icon.trim()\"></i>{{ btn.title }}\r\n                                </button>\r\n                                <i></i>\r\n                            </ng-container>\r\n                        </div>\r\n                    </ng-container>  \r\n                </ng-container> \r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!--\u7B2C\u4E00\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownTmpl let-data>\r\n    <div class=\"btn-group btn--cal\" id=\"{{ data.id }}\" [ngClass]=\"data.appearance?.dropdownCls\" fDropdown [rectifyReference]=\"referEl\"  [autoRectify]=\"true\">\r\n        <ng-container *ngIf=\"data.split\">\r\n            <button type=\"button\" class=\"btn\"  (click)=\"clickHandler(data)\" [ngClass]=\"data.appearance?.class\" [class.disabled]=\"getToolbarStateDisable(data)\" [class.btn-icontext]=\"data.icon&&data.icon.trim()\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.title }}\r\n            </button>\r\n        <button class=\"btn dropdown-toggle dropdown-toggle-split\" [ngClass]=\"data.appearance?.class\" fDropdownToggle></button>\r\n        </ng-container>\r\n        <!--\u4E0D\u542F\u7528\u4E0B\u62C9\u5206\u5F00\u6309\u94AE-->\r\n        <ng-container *ngIf=\"!data.split\">\r\n            <button type=\"button\" fDropdownToggle class=\"btn\" [ngClass]=\"data.appearance?.class + ' dropdown-toggle'\"\r\n                [dpDisabled]=\"getToolbarStateDisable(data)\"  [class.btn-icontext]=\"data.icon&&data.icon.trim()\"   (click)=\"clickHandler(data)\">\r\n                <i class=\"f-icon\" [ngClass]=\"data.icon&&data.icon.trim()\" *ngIf=\"data.icon&&data.icon.trim()\"></i>{{ data.title }}\r\n            </button>\r\n            <i></i>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu id=\"{{ data.id }}_menu\">\r\n            <ng-container *ngTemplateOutlet=\"dropMenuItem; context: { $implicit: data.children }\"></ng-container>\r\n        </ul>\r\n    </div>\r\n</ng-template>\r\n<!--\u4E0B\u62C9\u5B50\u9879-->\r\n<ng-template #dropMenuItem let-data>\r\n    <ng-container *ngFor=\"let item of data\">\r\n        <ng-container *ngIf=\"getToolbarStateVisible(item)\">\r\n            <li class=\"dropdown-item\" id=\"{{ item.id }}\" [class.disabled]=\"getToolbarStateDisable(item)\"  (click)=\"clickHandler(item)\">\r\n                {{ item.title }}\r\n            </li>\r\n        </ng-container>\r\n    </ng-container>\r\n</ng-template>\r\n<!--\u7B2C\u4E8C\u5C42\u4E0B\u62C9-->\r\n<ng-template #dropdownSubTmpl let-subData>\r\n    <li class=\"dropdown-submenu\" fDropdown [isSubDP]=\"true\" [placement]=\"'left-bottom'\" [autoRectify]=\"true\" [rectifyReference]=\"referEl\" id=\"{{ subData.id }}\">\r\n        <ng-container *ngIf=\"subData.split\">\r\n            <span class=\"dropdown-item\" [class.disabled]=\"getToolbarStateDisable(subData)\"  (click)=\"clickHandler(subData)\">{{ subData.title }}</span>\r\n            <span class=\"dropdown-toggle dropdown-toggle-split\" fDropdownToggle></span>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!subData.split\">\r\n            <span class=\"dropdown-item  dropdown-toggle\" [dpDisabled]=\"getToolbarStateDisable(subData)\"  (click)=\"clickHandler(subData)\" fDropdownToggle>{{ subData.title }}</span>\r\n        </ng-container>\r\n        <ul class=\"dropdown-menu\" fDropdownMenu id=\"{{ subData.id }}_submenu\">\r\n            <ng-container *ngTemplateOutlet=\"dropMenuItem; context: { $implicit: subData.children }\"></ng-container>\r\n        </ul>\r\n    </li>\r\n</ng-template>\r\n<ng-content></ng-content>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    encapsulation: ViewEncapsulation.None,
                    styles: [".farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-title{width:41.6666667%}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-toolbar{-webkit-box-flex:1;flex:1;-webkit-box-align:center;align-items:center}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer.spacer-sides-dropdown{margin:0 60px 0 28px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .sc-nav-btn.dropdown{right:6px}.farris-tabs .margin-right-14{margin-right:14px}.farris-tabs .farris-tabs-header-extend{height:44px}.farris-tabs .farris-tabs-header .farris-tabs-title.scroll-tabs .spacer .farris-nav-tabs .nav-item .nav-link .farris-title-text{max-width:112px}.farris-tabs .tabs-pt28{padding:0}.farris-tabs .tab-dropdown-menu--items{max-height:200px;overflow:auto}.farris-tabs .tabs-li-absolute{padding:4px;margin:0;position:relative}.farris-tabs .tabs-icon-search{position:absolute;right:4px;top:50%;font-size:14px;padding:0 4px;width:auto;height:24px;color:rgba(0,0,0,.25);margin-top:-12px;line-height:20px}.farris-tabs .st-drop-close{line-height:1}.farris-tabs .dropdown-menu .dropdown-item .dropdown-title{overflow:hidden;display:inline-block;padding:0 5px}.farris-tabs .farris-tabs-header.farris-tabs-inHead .farris-tabs-inline-flex{overflow:hidden}.farris-tabs .farris-tabs-btn-placeholder{position:absolute;top:-30px;right:0;overflow:hidden;left:0;opacity:0;z-index:-90}.farris-tabs .farris-tabs-btn-placeholder .btn-placeholder--content{display:-webkit-inline-box;display:inline-flex;left:0;position:absolute}"]
                }] }
    ];
    /** @nocollapse */
    FarrisTabsComponent.ctorParameters = function () { return [
        { type: TabService },
        { type: ElementRef },
        { type: Renderer2 },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    FarrisTabsComponent.propDecorators = {
        tabType: [{ type: Input }],
        fill: [{ type: Input }],
        autoTitleWidth: [{ type: Input }],
        titleLength: [{ type: Input }],
        position: [{ type: Input }],
        showDropDown: [{ type: Input }],
        showTooltips: [{ type: Input }],
        scrollStep: [{ type: Input }],
        autoResize: [{ type: Input }],
        closeable: [{ type: Input }],
        selectId: [{ type: Input, args: ['value',] }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        searchBoxVisible: [{ type: Input }],
        headerHeight: [{ type: Input, args: ['header-height',] }],
        contentDirection: [{ type: Input }],
        contentFill: [{ type: Input }],
        clickThrottleTime: [{ type: Input }],
        btnStates: [{ type: Input }],
        btnVisible: [{ type: Input }],
        tabs: [{ type: Input }],
        customClass: [{ type: Input }],
        titleWidth: [{ type: Input }],
        leftNav: [{ type: ViewChild, args: ['leftNav',] }],
        rightNav: [{ type: ViewChild, args: ['rightNav',] }],
        tabContainer: [{ type: ViewChild, args: ['tabContainer',] }],
        toolbarContainer: [{ type: ViewChild, args: ['toolbarContainer',] }],
        dropDownButton: [{ type: ViewChild, args: ['dropDownButton',] }],
        tabParent: [{ type: ViewChild, args: ['tabParent',] }],
        btnPlaceHolder: [{ type: ViewChild, args: ['btnPlaceholder',] }],
        beforeSelect: [{ type: Input }],
        tabChange: [{ type: Output }],
        tabRemove: [{ type: Output }],
        ddm: [{ type: ViewChild, args: ['ddm',] }]
    };
    return FarrisTabsComponent;
}());
export { FarrisTabsComponent };
if (false) {
    /** @type {?} */
    FarrisTabsComponent.prototype.tabType;
    /** @type {?} */
    FarrisTabsComponent.prototype.fill;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoTitleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleLength;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchInputVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype.showDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.showTooltips;
    /** @type {?} */
    FarrisTabsComponent.prototype.scrollStep;
    /** @type {?} */
    FarrisTabsComponent.prototype.autoResize;
    /** @type {?} */
    FarrisTabsComponent.prototype.closeable;
    /** @type {?} */
    FarrisTabsComponent.prototype.selectId;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchBoxVisible;
    /** @type {?} */
    FarrisTabsComponent.prototype._headerHeight;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentDirection;
    /** @type {?} */
    FarrisTabsComponent.prototype.clickThrottleTime;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickItems;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.clickSubscription;
    /**
     * 因为生成器结构变更导致此处变更
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._disableStatesDatas;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._visibleDatas;
    /** @type {?} */
    FarrisTabsComponent.prototype.titleWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightNav;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarContainer;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropDownButton;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabParent;
    /** @type {?} */
    FarrisTabsComponent.prototype.btnPlaceHolder;
    /**
     * 选中tab 前事件
     * @type {?}
     */
    FarrisTabsComponent.prototype.beforeSelect;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabChange;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabRemove;
    /** @type {?} */
    FarrisTabsComponent.prototype.contentFillStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._contentFill;
    /** @type {?} */
    FarrisTabsComponent.prototype.widthStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._width;
    /** @type {?} */
    FarrisTabsComponent.prototype.heightStates;
    /** @type {?} */
    FarrisTabsComponent.prototype._height;
    /** @type {?} */
    FarrisTabsComponent.prototype._position;
    /** @type {?} */
    FarrisTabsComponent.prototype.positionStates;
    /** @type {?} */
    FarrisTabsComponent.prototype.menuItemsWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.maxDropdownW;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._customClass;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.headerExtendConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarConf;
    /** @type {?} */
    FarrisTabsComponent.prototype.toolbarDpHidden;
    /** @type {?} */
    FarrisTabsComponent.prototype.inMoreButtonContents;
    /** @type {?} */
    FarrisTabsComponent.prototype.dropdownTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideButtons;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabWidth;
    /** @type {?} */
    FarrisTabsComponent.prototype.hideDropDown;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLeft;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRight;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.el;
    /** @type {?} */
    FarrisTabsComponent.prototype.subscription;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableRTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.disableLTooltip;
    /** @type {?} */
    FarrisTabsComponent.prototype.leftTooltipTabs;
    /** @type {?} */
    FarrisTabsComponent.prototype.rightTooltipTabs;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._tabContainerEl;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.maxTooltipLen;
    /** @type {?} */
    FarrisTabsComponent.prototype.activeId;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ro;
    /** @type {?} */
    FarrisTabsComponent.prototype.searchTabText;
    /** @type {?} */
    FarrisTabsComponent.prototype.ddm;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype._ddmHandler;
    /** @type {?} */
    FarrisTabsComponent.prototype.dpState;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.visibleRecord;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.disableRecord;
    /** @type {?} */
    FarrisTabsComponent.prototype.referEl;
    /** @type {?} */
    FarrisTabsComponent.prototype.tabVisibleChanged;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.stService;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    FarrisTabsComponent.prototype.ngZone;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRhYnMvIiwic291cmNlcyI6WyJsaWIvdGFicy90YWJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLE9BQU8sRUFDSCxTQUFTLEVBQW9DLEtBQUssRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLHVCQUF1QixFQUNsRyxpQkFBaUIsRUFBRSxpQkFBaUIsRUFBaUIsU0FBUyxFQUM5RCxZQUFZLEVBQUUsTUFBTSxFQUFzQyxNQUFNLEVBQ25FLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBZ0IsU0FBUyxFQUFZLFVBQVUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuRyxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBVSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVsRyxPQUFPLEVBQUUsVUFBVSxFQUFhLE1BQU0sZ0JBQWdCLENBQUM7QUFJdkQsT0FBTyxjQUFjLE1BQU0sMEJBQTBCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXZEO0lBNFBJLDZCQUNZLFNBQXFCLEVBQ3JCLFVBQXNCLEVBQ3RCLFFBQW1CLEVBQ25CLEtBQXdCLEVBQ3hCLE1BQWM7UUFMMUIsaUJBa0JDO1FBakJXLGNBQVMsR0FBVCxTQUFTLENBQVk7UUFDckIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLFVBQUssR0FBTCxLQUFLLENBQW1CO1FBQ3hCLFdBQU0sR0FBTixNQUFNLENBQVE7UUF2UGpCLFlBQU8sR0FBbUIsRUFBRSxDQUFDOztRQUU3QixTQUFJLEdBQUcsS0FBSyxDQUFDOztRQUViLG1CQUFjLEdBQUcsS0FBSyxDQUFDOztRQUV2QixnQkFB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dUI7O0lBRXZCLDhDQUF1Qjs7SUFFdkIsOENBQXFCOztJQUVyQiwrQ0FBc0I7Ozs7O0lBRXRCLDhDQUFxQzs7Ozs7SUFDckMsNENBQTBCOztJQUUxQix1Q0FBYzs7Ozs7SUFDZCxpQ0FBa0M7O0lBRWxDLDRDQUFzQjs7SUFFdEIsa0NBQXVDOzs7OztJQUV2QywwQ0FBZ0M7O0lBRWhDLHNDQUFrQjs7Ozs7SUFFbEIsNENBQXlCOzs7OztJQUN6Qiw0Q0FBeUI7O0lBRXpCLHNDQUFlOztJQUlmLGdEQUFrQzs7Ozs7SUFHOUIsd0NBQTZCOzs7OztJQUM3Qix5Q0FBOEI7Ozs7O0lBQzlCLHVDQUEyQjs7Ozs7SUFDM0Isb0NBQWdDOzs7OztJQUNoQyxxQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgT25Jbml0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIElucHV0LCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsIFZpZXdFbmNhcHN1bGF0aW9uLCBBZnRlclZpZXdJbml0LCBWaWV3Q2hpbGQsIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50Q2hlY2tlZCxcclxuICAgIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBBZnRlckNvbnRlbnRJbml0LCBBZnRlclZpZXdDaGVja2VkLCBOZ1pvbmVcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBmcm9tRXZlbnQsIGludGVydmFsLCBPYnNlcnZhYmxlLCBvZiwgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCwgbWFwLCBzY2FuLCBzd2l0Y2hNYXAsIHRha2VXaGlsZSwgY29uY2F0LCBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBUYWJTZXJ2aWNlLCBUYWJDb25maWcgfSBmcm9tICcuLi90YWJzLmNvbmZpZyc7XHJcbmltcG9ydCB7IFRhYnNDaGFuZ2VFdmVudCwgVGFic1JlbW92ZVRhYkV2ZW50IH0gZnJvbSAnLi4vdGFicy5ldmVudHMnO1xyXG5pbXBvcnQgeyBGYXJyaXNUYWJDb21wb25lbnQgfSBmcm9tICcuLi90YWIvdGFiLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFRvb2xiYXJDb25mLFRvb2xiYXJDb250ZW50c0NvbmZ9IGZyb20gJy4uL3Rvb2xiYXIuY29uZmlnJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcbmltcG9ydCB7IE5nYkRyb3Bkb3duTWVudSB9IGZyb20gJy4uL2Ryb3Bkb3duL2Ryb3Bkb3duJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdGFicycsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vdGFicy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi90YWJzLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIEZhcnJpc1RhYnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgQWZ0ZXJWaWV3Q2hlY2tlZCB7XHJcblxyXG4gICAgQElucHV0KCkgdGFiVHlwZTonZmlsbCd8J3BpbGxzJ3wnJz0nJztcclxuICAgIC8vIOaUr+aMgeagh+etvumhteWhq+WFhVxyXG4gICAgQElucHV0KCkgZmlsbCA9IGZhbHNlO1xyXG4gICAgLy8g5pSv5oyB5qCH562+6aG15qCH6aKY6Ieq6YCC5bqU5a695bqmLVxyXG4gICAgQElucHV0KCkgYXV0b1RpdGxlV2lkdGggPSBmYWxzZTtcclxuICAgIC8vIOagh+mimOmVv+W6puWkp+S6juetieS6juWkmuWwkeWtl+espu+8jOWQr+eUqOa4kOWPmOagt+W8j+KAlOKAlOWxnuaAp+W6n+W8g1xyXG4gICAgQElucHV0KCkgdGl0bGVMZW5ndGggPSA3O1xyXG4gICAgc2VhcmNoSW5wdXRWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgLy8gdGFi6aG15L2N572uIOS4iuS4i+W3puWPs1xyXG4gICAgQElucHV0KCkgc2V0IHBvc2l0aW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25TdGF0ZXMubmV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgcG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgLy8g5piv5ZCm5ZCv55So5LiL5ouJ5qGGXHJcbiAgICBASW5wdXQoKSBzaG93RHJvcERvd247XHJcbiAgICAvLyDmmK/lkKblkK/nlKjmj5DnpLrkv6Hmga8tLS3mnKrooqvkvb/nlKhcclxuICAgIEBJbnB1dCgpIHNob3dUb29sdGlwcztcclxuICAgIC8vIOeCueWHu+aXtua7muWKqOatpemVv1xyXG4gICAgQElucHV0KCkgc2Nyb2xsU3RlcDtcclxuICAgIC8vIOaYr+WQpuiHquWKqOmHjeaWsOWuveW6pi0tLeacquiiq+S9v+eUqFxyXG4gICAgQElucHV0KCkgYXV0b1Jlc2l6ZTtcclxuICAgIC8vIOiuvue9ruWPr+WFs+mXreagh+etvumhtS0tLeacquiiq+S9v+eUqFxyXG4gICAgQElucHV0KCkgY2xvc2VhYmxlOiBib29sZWFuO1xyXG4gICAgLy8g6K6+572u5Y+v6YCJ5Lit5qCH562+6aG1XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5wdXQtcmVuYW1lXHJcbiAgICBASW5wdXQoJ3ZhbHVlJykgc2VsZWN0SWQ6IHN0cmluZztcclxuICAgIC8vIHRhYnPlrr3luqblkozpq5jluqZcclxuICAgIEBJbnB1dCgpIHNldCB3aWR0aCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fd2lkdGggPSB0aGlzLnJlc29sdmVTaXplKHZhbHVlKTtcclxuICAgICAgICB0aGlzLndpZHRoU3RhdGVzLm5leHQodGhpcy5fd2lkdGgpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGhlaWdodCh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5yZXNvbHZlU2l6ZSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHRTdGF0ZXMubmV4dCh0aGlzLl9oZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgLy8g5pCc57Si5qGG5piv5ZCm5pi+56S6XHJcbiAgICBASW5wdXQoKSBzZWFyY2hCb3hWaXNpYmxlID0gdHJ1ZTtcclxuICAgIC8vIOagh+etvumhtemrmOW6pi0tLS0t5pyq6KKr5L2/55SoXHJcbiAgICBfaGVhZGVySGVpZ2h0OiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgICBASW5wdXQoJ2hlYWRlci1oZWlnaHQnKVxyXG4gICAgZ2V0IGhlYWRlckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgc2V0IGhlYWRlckhlaWdodChoZWFkZXJIZWlnaHQpIHtcclxuICAgICAgICB0aGlzLl9oZWFkZXJIZWlnaHQgPSB0aGlzLnJlc29sdmVTaXplKGhlYWRlckhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5YaF5a655piv5ZCm5pivZmxleCDlrrnlmagg55So5LqO5YaF6YOo5a2Q5YWD57SgZmxleC0tLS0t5pyq6KKr5L2/55SoXHJcbiAgICBASW5wdXQoKSBjb250ZW50RGlyZWN0aW9uID0gJ2NvbHVtbic7XHJcbiAgICAvLyDlhoXlrrnmmK/lkKbloavlhYUgIOm7mOiupOaYr+S4jeWhq+WFhVxyXG4gICAgQElucHV0KCkgc2V0IGNvbnRlbnRGaWxsKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGVudEZpbGwgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxsU3RhdGVzLm5leHQodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgY2xpY2tUaHJvdHRsZVRpbWUgPSAzNTA7XHJcbiAgICBwcml2YXRlIGNsaWNrSXRlbXMgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICBwcml2YXRlIGNsaWNrU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAvKipcclxuICAqIOWboOS4uueUn+aIkOWZqOe7k+aehOWPmOabtOWvvOiHtOatpOWkhOWPmOabtFxyXG4gICovXHJcbiAgcHJpdmF0ZSAgX2Rpc2FibGVTdGF0ZXNEYXRhczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+ID1cclxuICAgIG5ldyBTdWJqZWN0KCk7XHJcbiAgQElucHV0KClcclxuICBzZXQgYnRuU3RhdGVzKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+KSB7XHJcbiAgICAgIGlmICh2YWx1ZXMpIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3RhdGVzRGF0YXMgJiZcclxuICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3RhdGVzRGF0YXMuaGFzT3duUHJvcGVydHkoXCJ1bnN1YnNjcmliZVwiKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRlc0RhdGFzW1widW5zdWJzY3JpYmVcIl0oKTtcclxuICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgdGhpcy5fZGlzYWJsZVN0YXRlc0RhdGFzID0gdmFsdWVzOyAgICAgICAgICAgXHJcbiAgICAgICAgICB0aGlzLmRpc2FibGVTdGF0ZUJpbmQoKTtcclxuICAgICAgfVxyXG4gIH1cclxuICAvLyDmjInnhafkuYvliY3nmoTpgLvovpHvvIzlpoLmnpzmsqHmnInmib7liLBrZXnvvIzlsLHor7TmmI7lj6/op4FcclxuICBwcml2YXRlICBfdmlzaWJsZURhdGFzOiBPYnNlcnZhYmxlPEFycmF5PHsgW2tleTogc3RyaW5nXTogYm9vbGVhbiB9Pj4gPVxyXG4gICAgICAgbmV3IFN1YmplY3QoKTtcclxuICAgLy8g5piv5ZCm5Y+v6KeB55qE54q25oCBXHJcbiAgIEBJbnB1dCgpXHJcbiAgIHNldCBidG5WaXNpYmxlKHZhbHVlczogT2JzZXJ2YWJsZTxBcnJheTx7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfT4+KSB7XHJcbiAgICAgICBpZiAodmFsdWVzKSB7XHJcbiAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgJiZcclxuICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzLmhhc093blByb3BlcnR5KFwidW5zdWJzY3JpYmVcIilcclxuICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZURhdGFzW1widW5zdWJzY3JpYmVcIl0oKTtcclxuICAgICAgICAgICB9ICAgICAgICAgICBcclxuICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgPSB2YWx1ZXM7ICAgICAgICAgICBcclxuICAgICAgICAgICB0aGlzLnZpc2libGVTdGF0ZUJpbmQoKTtcclxuICAgICAgIH1cclxuICAgfVxyXG5cclxuICAgIC8vIOaJgOacieagh+etvuaVsOaNrlxyXG4gICAgQElucHV0KClcclxuICAgIGdldCB0YWJzKCk6IGFueVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGFicztcclxuICAgIH1cclxuICAgIHNldCB0YWJzKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdGFicyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgY3VzdG9tQ2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tQ2xhc3M7XHJcbiAgICB9XHJcbiAgICBzZXQgY3VzdG9tQ2xhc3MoY3VzdG9tQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2xhc3Muc3BsaXQoJyAnKS5mb3JFYWNoKChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZWwsIGNzc0NsYXNzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jdXN0b21DbGFzcyA9IGN1c3RvbUNsYXNzID8gY3VzdG9tQ2xhc3MudHJpbSgpIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tQ2xhc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21DbGFzcy5zcGxpdCgnICcpLmZvckVhY2goKGNzc0NsYXNzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgY3NzQ2xhc3MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDlt6bkvqfmiYDmnInmoIfnrb7nmoTlrr3luqblkows55m+5YiG5q+UXHJcbiAgICBASW5wdXQoKSB0aXRsZVdpZHRoID0gMDtcclxuICAgIEBWaWV3Q2hpbGQoJ2xlZnROYXYnKSBsZWZ0TmF2O1xyXG4gICAgQFZpZXdDaGlsZCgncmlnaHROYXYnKSByaWdodE5hdjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYkNvbnRhaW5lcicpIHRhYkNvbnRhaW5lcjtcclxuICAgIEBWaWV3Q2hpbGQoJ3Rvb2xiYXJDb250YWluZXInKSB0b29sYmFyQ29udGFpbmVyO1xyXG4gICAgQFZpZXdDaGlsZCgnZHJvcERvd25CdXR0b24nKSBkcm9wRG93bkJ1dHRvbjtcclxuICAgIEBWaWV3Q2hpbGQoJ3RhYlBhcmVudCcpIHRhYlBhcmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ2J0blBsYWNlaG9sZGVyJykgYnRuUGxhY2VIb2xkZXI7XHJcblxyXG4gICAgLyoqIOmAieS4rXRhYiDliY3kuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdDogKGU6IFRhYnNDaGFuZ2VFdmVudCkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBPdXRwdXQoKSB0YWJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFRhYnNDaGFuZ2VFdmVudD4oKTtcclxuICAgIEBPdXRwdXQoKSB0YWJSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyPFRhYnNSZW1vdmVUYWJFdmVudD4oKTtcclxuXHJcbiAgICBnZXQgZGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4nO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdjb2x1bW4tcmV2ZXJzZSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdyb3cnO1xyXG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Jvdy1yZXZlcnNlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5peg55So77yM5YW85a65XHJcbiAgICBnZXQgdGFiRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJyB8fCB0aGlzLnBvc2l0aW9uID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3Jvdyc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvc2l0aW9uID09PSAnbGVmdCcgfHwgdGhpcy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2NvbHVtbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5YaF5a655aGr5YWF54q25oCBXHJcbiAgICBjb250ZW50RmlsbFN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xyXG4gICAgLy8g5YaF5a655piv5ZCm5aGr5YWFLOm7mOiupOS4jeWhq+WFhVxyXG4gICAgX2NvbnRlbnRGaWxsOiBhbnk7XHJcbiAgICAvLyDlrr3luqbnirbmgIFcclxuICAgIHdpZHRoU3RhdGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KGZhbHNlKTtcclxuICAgIC8vIHRhYnPlrr3luqZcclxuICAgIF93aWR0aDogYW55O1xyXG4gICAgLy8g6auY5bqm54q25oCBXHJcbiAgICBoZWlnaHRTdGF0ZXMgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oZmFsc2UpO1xyXG4gICAgLy8gdGFic+WuveW6plxyXG4gICAgX2hlaWdodDogYW55O1xyXG4gICAgLy8gdGFic+agh+mimOS9jee9rlxyXG4gICAgX3Bvc2l0aW9uOiBhbnk7XHJcbiAgICBwb3NpdGlvblN0YXRlcyA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPigndG9wJyk7XHJcbiAgICBtZW51SXRlbXNXaWR0aCA9ICdhdXRvJztcclxuICAgIC8vbWF4RHJvcGRvd25IID0gMjAwOyAtLS0tLeacquiiq+S9v+eUqFxyXG4gICAgLy8g5LiL5ouJ5YiX6KGo5pyA5aSn5a695bqm77yaIOmdnuato+WAvOihqOaYjuaYr+S4jemZkOWItuWuveW6piAtLS0tLeacquiiq+S9v+eUqFxyXG4gICAgbWF4RHJvcGRvd25XID0gLTE7XHJcbiAgICBwcml2YXRlIF9jdXN0b21DbGFzcyA9ICcnO1xyXG4gICAgLy8g5qCH562+5a2Y5YKo5YiX6KGoXHJcbiAgICBwcml2YXRlIF90YWJzOiBGYXJyaXNUYWJDb21wb25lbnRbXSA9IFtdO1xyXG5cclxuICAgIGhlYWRlckV4dGVuZENvbmY6IGFueTtcclxuICAgIC8vIOW3peWFt+adoeaYvuekuuebuOWFs+mFjee9rlxyXG4gICAgdG9vbGJhckNvbmY6IFRvb2xiYXJDb25mID0ge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnJyxcclxuICAgICAgICBjb250ZW50czogW11cclxuICAgIH07XHJcbiAgICAvLyDlt6XlhbfmnaHlj7PkvqflsI/kuIvmi4nmoYbmmK/lkKbmmL7npLpcclxuICAgIHRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAvLyDlt6XlhbfmnaHigJzmm7TlpJrigJ3ph4znmoTmjInpkq5cclxuICAgIGluTW9yZUJ1dHRvbkNvbnRlbnRzOiBhbnlbXSA9IFtdO1xyXG4gICAgLy8g5pi+56S65LiL5ouJ5pWw5o2uXHJcbiAgICBkcm9wZG93blRhYnMgPSBbXTtcclxuICAgIC8vIOmakOiXj+W3puWPs+a7muWKqOeureWktOaMiemSrlxyXG4gICAgaGlkZUJ1dHRvbnMgPSB0cnVlO1xyXG4gICAgLy8g5Y2V5Liq5qCH562+6aG15qCH6aKY55qE5a695bqmXHJcbiAgICB0YWJXaWR0aDogbnVtYmVyO1xyXG5cclxuICAgIC8vIOmakOiXj+S4i+aLiVxyXG4gICAgaGlkZURyb3BEb3duID0gdHJ1ZTtcclxuICAgIC8vIOemgeeUqOW3pueureWktFxyXG4gICAgZGlzYWJsZUxlZnQgPSBmYWxzZTtcclxuICAgIC8vIOemgeeUqOWPs+eureWktFxyXG4gICAgZGlzYWJsZVJpZ2h0ID0gZmFsc2U7XHJcbiAgICAvLyDlvZPliY3moLflvI9cclxuICAgIHByaXZhdGUgZWw6IEhUTUxFbGVtZW50O1xyXG4gICAgLy8g6K6w5b2V5LqL5Lu25rWBXHJcbiAgICBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgICAvLyDnpoHnlKjlj7Pkvqfmj5DnpLpcclxuICAgIGRpc2FibGVSVG9vbHRpcCA9IHRydWU7XHJcbiAgICAvLyDnpoHnlKjlt6bkvqfmj5DnpLpcclxuICAgIGRpc2FibGVMVG9vbHRpcCA9IHRydWU7XHJcbiAgICAvLyDlt6bkvqfmj5DnpLrmlbDmja5cclxuICAgIGxlZnRUb29sdGlwVGFicyA9IFtdO1xyXG4gICAgLy8g5Y+z5L6n5o+Q56S65pWw5o2uXHJcbiAgICByaWdodFRvb2x0aXBUYWJzID0gW107XHJcbiAgICAvLyDlhoXpg6jlpITnkIbmoIforrBUYWLmoIfnrb5cclxuICAgIHByaXZhdGUgX3RhYkNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbWF4VG9vbHRpcExlbiA9IDU7XHJcbiAgICAvLyDmoIforrDlvZPliY1UYWLmoIfnrb5cclxuICAgIGFjdGl2ZUlkID0gJyc7XHJcbiAgICBwcml2YXRlIHJvOiBSZXNpemVPYnNlcnZlciA9IG51bGw7XHJcbiAgICAvLyDmkJzntKJ0YWLmoYbnmoTlgLxcclxuICAgIHNlYXJjaFRhYlRleHQ6IHN0cmluZztcclxuXHJcbiAgICBAVmlld0NoaWxkKCdkZG0nKSBkZG06IE5nYkRyb3Bkb3duTWVudTtcclxuXHJcbiAgICBwcml2YXRlIF9kZG1IYW5kbGVyOiBhbnkgPSBudWxsO1xyXG4gICAgLy8g5b2T5a695bqm5pS55Y+Y5pe277yM5by65Yi25pS26LW35LiL5ouJ6I+c5Y2VIFxyXG4gICAgZHBTdGF0ZSA9IFtmYWxzZV07XHJcbiAgICAvLyDlnKh0b29sYmFy5LiN5a2Y5Zyo55qE5pe25YCZ5YWI6K6w5b2VdmlzaWJsZeWPmOWMlueahOWcsOaWuVxyXG4gICAgcHJpdmF0ZSB2aXNpYmxlUmVjb3JkPXt9O1xyXG4gICAgcHJpdmF0ZSBkaXNhYmxlUmVjb3JkPXt9O1xyXG4gICAgLy8g5LiL5ouJ6I+c5Y2V55qE5Y+C54Wn5YWD57SgXHJcbiAgICByZWZlckVsID0gbnVsbDtcclxuICAgIHRyYWNrQnlCdXR0b24oaW5kZXg6IG51bWJlciwgYnRuOiBhbnkpOiBudW1iZXIgeyByZXR1cm4gYnRuLmlkOyB9O1xyXG5cclxuXHJcbiAgICB0YWJWaXNpYmxlQ2hhbmdlZCA9IG5ldyBTdWJqZWN0KCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBzdFNlcnZpY2U6IFRhYlNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICBwcml2YXRlIGNkUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmVsID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZmVyRWwgPSB0aGlzLmVsLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmVyaWZ5Q29uZmlnKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2godGhpcy50YWJWaXNpYmxlQ2hhbmdlZC5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlQnV0dG9uc1Nob3coKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOmqjOivgeS8oOmAkuWPguaVsCAqL1xyXG4gICAgcHJpdmF0ZSB2ZXJpZnlDb25maWcoKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnOiBUYWJDb25maWcgPSB0aGlzLnN0U2VydmljZS5nZXRDb25maWcoKTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxTdGVwID0gcGFyc2VJbnQodGhpcy5zY3JvbGxTdGVwICsgJycsIDEwKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QgPSAoKSA9PiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbiA9IHRoaXMuY2xpY2tJdGVtcy5waXBlKGRlYm91bmNlVGltZSh0aGlzLmNsaWNrVGhyb3R0bGVUaW1lKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoYnRuSW5mbzpUb29sYmFyQ29udGVudHNDb25mKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYnRuSW5mby5jbGljayYmdHlwZW9mIGJ0bkluZm8uY2xpY2s9PSdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidG5JbmZvLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsID0gdGhpcy50YWJDb250YWluZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jcmVhdGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy5zZWxlY3RJZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmdab25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLmVsLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6Kej5Yaz5oyJ6ZKu6LCD5pW06ZqQ6JeP54q25oCB5LmL5ZCO77yM5LiL5ouJ5Lit6IO95pi+56S655qE5oyJ6ZKu5pyJ5aSa5bCRXHJcbiAgICAgICAgICovXHJcbiAgICBwcml2YXRlIHZpc2libGVTdGF0ZUJpbmQoKXtcclxuICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOino+WGs+WIh+aNouaXtu+8jOaMiemSrueKtuaAgeayoeiiq+iusOW9leeahOmXrumimFxyXG4gICAgICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXMoZGF0YSk7XHJcbiAgICAgICAgICAgIGlkQXJyYXkuZm9yRWFjaCgoYnRuSWQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlY29yZFtidG5JZF09ZGF0YVtidG5JZF07XHJcbiAgICAgICAgICAgIH0pOyAgXHJcbiAgICAgICAgICAgIGlmKHRoaXMudG9vbGJhckNvbmYmJnRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgLy8g6LCD5pW05oyJ6ZKu5Y+v6KeB54q25oCBICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEsXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8g6YeN5paw6K6h566XXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlVG9vbGJhckRyb3Bkb3duSXNTaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGRpc2FibGVTdGF0ZUJpbmQoKXtcclxuICAgICAgICB0aGlzLl9kaXNhYmxlU3RhdGVzRGF0YXMuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOino+WGs+WIh+aNouaXtu+8jOaMiemSrueKtuaAgeayoeiiq+iusOW9leeahOmXrumimFxyXG4gICAgICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXMoZGF0YSk7XHJcbiAgICAgICAgICAgIGlkQXJyYXkuZm9yRWFjaCgoYnRuSWQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZVJlY29yZFtidG5JZF09ZGF0YVtidG5JZF07XHJcbiAgICAgICAgICAgIH0pOyAgXHJcbiAgICAgICAgICAgIGlmKHRoaXMudG9vbGJhckNvbmYmJnRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgLy8g6LCD5pW05oyJ6ZKu5Y+v6KeB54q25oCBICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKGRhdGEsXCJkaXNhYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydzZWxlY3RJZCddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKGNoYW5nZXNbJ3NlbGVjdElkJ10uY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyog5qCH562+6aG15YaF5a655Yid5aeL5YyWICovXHJcbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7IH1cclxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIC8vIOS4uuS6huWFvOWuueW8hOaXp+ihqOWNle+8jOS4jeWFvOWuuUhvc3RCaW5kaW5nLCDpgJrov4fov73liqBjbGFzc+eahOaWueW8j+WunueOsFxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2ZhcnJpcy10YWJzJyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4nKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxsU3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbCwgJ2YtdGFicy1jb250ZW50LWZpbGwnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2YtdGFicy1jb250ZW50LWZpbGwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud2lkdGhTdGF0ZXMuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsLCAnd2lkdGgnLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0U3RhdGVzLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbCwgJ2hlaWdodCcsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbCwgJ2ZsZXgtcm93LXJldmVyc2UnKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4tcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWwsICdmbGV4LXJvdycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09PSAndG9wJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1yb3ctcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhID09PSAnYm90dG9tJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLCAnZmxleC1jb2x1bW4tcmV2ZXJzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5YW85a6557uT5p2fXHJcbiAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0QWN0aXZlKCk7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlVGl0bGVTdHlsZSgpO1xyXG4gICAgICAgIHRoaXMuX2xpc3RlblNob3dDaGFuZ2VzKCk7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChzZWxmLnNlYXJjaElucHV0VmlzaWJsZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kZG1IYW5kbGVyID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdtb3VzZWRvd24nLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5mYXJyaXMtdGFicy1oZWFkZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZWwucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZG0gJiYgdGhpcy5kZG0uZHJvcGRvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGRtLmRyb3Bkb3duLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG5cclxuICAgIH1cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIC8vIOe7hOS7tumUgOavgeaXtiAg5Y+W5raI5omA5pyJ5LqL5Lu26K6i6ZiFXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24uZm9yRWFjaChzdWIgPT4ge1xyXG4gICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ybykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2RkbUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGRtSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZG1IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jbGlja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVEYXRhcyAmJlxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMuaGFzT3duUHJvcGVydHkoXCJ1bnN1YnNjcmliZVwiKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXNbXCJ1bnN1YnNjcmliZVwiXSgpO1xyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsaWNrSGFuZGxlcihidG5JbmZvKSB7XHJcbiAgICAgICAgaWYgKCFidG5JbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoYnRuSW5mby5oYXNPd25Qcm9wZXJ0eSgnZGlzYWJsZScpJiZidG5JbmZvWydkaXNhYmxlJ10pe1xyXG4gICAgICAgICAgICAvLyDlpoLmnpznpoHnlKjlsLHkuI3op6blj5Hngrnlh7vkuovku7ZcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsaWNrSXRlbXMubmV4dChidG5JbmZvKTtcclxuICAgIH1cclxuICAgIC8vIOabtOWkmnRhYueahOaYvuekuumakOiXj1xyXG4gICAgb3BlbkNoYW5nZShlKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dFZpc2libGUgPSBlO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVGFiVGV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9yZUNhbGN1bGF0ZUFsbCgpO1xyXG4gICAgICAgIC8vIOWQr+eUqOS6huaQnOe0ou+8jOmcgOimgeWIpOaWreS4i+aLiemdouadv+eahOWAvFxyXG4gICAgICAgIC8vIOWboOS4uuS4i+aLiemdouadv+WPr+iDveWtmOWcqOmBruaMoeeahOmXrumimFxyXG4gICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zV2lkdGggPSB0aGlzLmRkbS5yZXNldE1lbnVFbFdpZHRoT3BlbigpICsgJ3B4JztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1dpZHRoID0gJ2F1dG8nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvLyDmkJzntKJ0YWJcclxuICAgIHNlYXJjaFRhYihlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlQWxsKCk7XHJcbiAgICB9XHJcbiAgICAvLyDpmLvmraLlhpLms6FcclxuICAgIHN0b3BCdWJibGUoZSkge1xyXG4gICAgICAgIGlmIChlICYmIGUuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBYaW1lbmEgMjMuMDguMzAg5Yik5pat5piv5ZCm5Y+v6KeBLOeLrOeri+WHuuadpVxyXG4gICAgICogVG9kbzpcclxuICAgICAqIDHjgIHnjrDlnKhidG5WaXNpYmxl5q+P5qyh55qE5Y+Y5pu06YO95piv5YWo6YeP77yM5piv5ZCm6ZyA6KaB6K6w5b2V5q+P5qyh5Y+Y5pu077yM54S25ZCO5ZCI5bm26K6h566X77yfXHJcbiAgICAgKiAy44CB546w5Zyo5Yik5pat5piv5ZCm5Y+v6KeB55qE5pa55rOV77yM5piv55u05o6l5pu05paw55WM6Z2i55qE77yM5q+P5Liq5oyJ6ZKu5LiK6YO957uR5a6a5LqG6L+Z5Liq5pa55rOV77yM5Lya5pyJ5oCn6IO96Zeu6aKY44CC5bqU6K+l5pS55oiQ5aSE55CG5Zyo57uR5a6a55qE5omA5pyJ5pWw5o2u77yM54S25ZCO5pu05paw55WM6Z2i44CCXHJcbiAgICAgKiAz44CB5piv5ZCm5Y+v6KeB5ZKM56aB55So5pyJ5ZCM5qC355qE6Zeu6aKYXHJcbiAgICAgKiBAcGFyYW0gaWQgXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgZ2V0VG9vbGJhclN0YXRlVmlzaWJsZShidG5JdGVtKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlUHJvcD1cInZpc2libGVcIjtcclxuICAgICAgICBpZiAoYnRuSXRlbS5oYXNPd25Qcm9wZXJ0eShzdGF0ZVByb3ApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG5JdGVtW3N0YXRlUHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS4jeWtmOWcqOWxnuaAp1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZ2V0VG9vbGJhclN0YXRlRGlzYWJsZShidG5JdGVtKSB7XHJcbiAgICAgICAgbGV0IHN0YXRlUHJvcD1cImRpc2FibGVcIjtcclxuICAgICAgICBpZiAoYnRuSXRlbS5oYXNPd25Qcm9wZXJ0eShzdGF0ZVByb3ApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG5JdGVtW3N0YXRlUHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOS4jeWtmOWcqOWxnuaAp1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Y+q5aSE55CG5piv5ZCm56aB55SoXHJcbiAgICAgKiBAcGFyYW0gaWQgXHJcbiAgICAgKiBAcGFyYW0gc3RhdGUgXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgZ2V0VG9vbGJhclN0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBPYnNlcnZhYmxlPGFueT4gPSB0aGlzLmJ0blN0YXRlcykge1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUucGlwZShcclxuICAgICAgICAgICAgICAgIG1hcCgobjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5baWRdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGDmnKrmib5JROS4uu+8miR7aWR9IOebuOWFs+eKtuaAgeiuvue9ru+8gWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuW2lkXTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOebkeWQrOWtkOe7hOS7tueahOmakOiXj+aYvuekuuWxnuaAp1xyXG4gICAgcHJpdmF0ZSBfbGlzdGVuU2hvd0NoYW5nZXMoKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c6ZqQ6JeP55qE57uE5Lu25piv5r+A5rS754q25oCB77yM5YWI5bCG5YW26K6+572u5Li65bi46KeEXHJcbiAgICAgICAgdGhpcy50YWJzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2hvd1N0YXRlcy5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlSWRUb2tlbjtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX3Nob3cgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlICYmIGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlSWRUb2tlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicy5maWx0ZXIoaXRlbSA9PiBpdGVtLl9zaG93ID09PSB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYWJJZCA9IHRhYnMubGVuZ3RoID8gdGFic1swXS5pZCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAvLyDnhLblkI7lsIbmmL7npLrnirbmgIHkuIvnmoTnrKzkuIDkuKp0YWLmv4DmtLtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VGFiSWQgJiYgYWN0aXZlSWRUb2tlbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGRlZmF1bHRUYWJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXhdLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK1UYWJcclxuICAgICAqIEBwYXJhbSAgdGFiSWQgdGFi5qCH6K+GXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdFRhYih0YWJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHRhYklkKTtcclxuICAgICAgICB0aGlzLl9zZWxlY3RUYWIoc2VsZWN0ZWRUYWIudGFiLCBzZWxlY3RlZFRhYi5pbmRleCk7XHJcbiAgICB9XHJcbiAgICBfY3BTZWxlY3RUYWJCeUluZGV4KGV2OiBFdmVudCwgaWQ6IHN0cmluZywgZGRtID0gbnVsbCkge1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0RUwgPSBldi50YXJnZXQgYXMgYW55O1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGFyZ2V0RUwuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xIHx8XHJcbiAgICAgICAgICAgIHRhcmdldEVMLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3N0LWRyb3AtY2xvc2UnKSA+IC0xXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIOmYu+atouWGkuazoeWSjOaNleiOt+S6i+S7tiDngrnlh7vliKDpmaTmoIforrAg5YiZ5omn6KGM5Yig6Zmk5qCH562+5pa55rOVICDogIzkuI3mmK/pgInkuK3moIfnrb5cclxuICAgICAgICAgICAgdGhpcy5jbG9zZVRhYihpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g6Zi75q2i5YaS5rOhXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRUb29sYmFyQ29uZigpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVUb29sYmFyRHJvcGRvd25Jc1Nob3coKTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVCdXR0b25zU2hvdygpO1xyXG5cclxuICAgICAgICBpZiAoZGRtKSB7XHJcbiAgICAgICAgICAgIGRkbS5kcm9wZG93bi5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4d0YWJz55qE57Si5byV6YCJ5oupIHRhYlxyXG4gICAgICogQHBhcmFtIGluZGV4IHRhYnPntKLlvJVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0VGFiQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnRhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFRhYiA9IHRoaXMudGFic1tpbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdFRhYihzZWxlY3RUYWIsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiDpgInkuK10YWLml7YgIOaatOmcsuWHuumAieS4rXRhYueahGlkIOWSjOWFtuS5i+WQjueahGlkICovXHJcbiAgICBwcml2YXRlIF9zZWxlY3RUYWIodGFiLCBpbmRleCkge1xyXG4gICAgICAgIGlmICh0YWIgJiYgIXRhYi5kaXNhYmxlZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSB0YWIuaWQpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0ID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnNDaGFuZ2VFdmVudFBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgcHJldklkOiB0aGlzLmFjdGl2ZUlkLFxyXG4gICAgICAgICAgICAgICAgbmV4dElkOiB0YWIuaWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVTZWxlY3QodGFic0NoYW5nZUV2ZW50UGFyYW0pLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmmluWFiOS4jea/gOa0u+aJgOacieeahHRhYumhtSAg54S25ZCO5r+A5rS75b2T5YmNdGFi6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW06IEZhcnJpc1RhYkNvbXBvbmVudCwgaTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFic1tpbmRleF0uX2FjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VG9vbGJhckNvbmYoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmu5rliqjliLDlj6/op4HljLrln5/lhoVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJDaGFuZ2UuZW1pdCh0YWJzQ2hhbmdlRXZlbnRQYXJhbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgX3NldEFjdGl2ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy50YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IGl0ZW0uX3Nob3cgPT09IHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHRoaXMuYWN0aXZlSWQpLnRhYjtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IGFjdGl2ZVRhYiA/IGFjdGl2ZVRhYi5pZCA6IHRoaXMudGFicy5sZW5ndGggPyB0aGlzLnRhYnNbMF0uaWQgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8g6L+H5ruk5o6Jc2hvdz1mYWxzZe+8iOmakOiXj++8ieeahHRhYlxyXG4gICAgICAgICAgICBpZiAodGFicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gdGFicy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5hY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFRhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGFyZ2V0VGFiLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9IHRhYnNbMF0uaWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMuYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3RpdmVJZCDmmL7npLrmn5DkuKp0YWJcclxuICAgICAqL1xyXG4gICAgc2hvd1RhYih0YWJJZDogYW55LCBzZWxlY3RhYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudGFicy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJzW2ldLmlkID09PSB0YWJJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9zaG93ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIodGFiSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aXZlSWQg6ZqQ6JeP5p+Q5LiqdGFiXHJcbiAgICAgKi9cclxuICAgIGhpZGVUYWIoYWN0aXZlSWQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHNob3dUYWJzID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX3Nob3cgPT09IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gc2hvd1RhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAobGVuIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzaG93VGFic1tpXS5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHNob3dUYWJzW2ldLl9zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuICYmIGxlbiA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxlbiAmJiBsZW4gPj0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzaG93VGFic1tsZW4gLSAxXS5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIoc2hvd1RhYnNbaW5kZXggKyAxXS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDmoIfnrb5cclxuICAgICAqIEBwYXJhbSBjdXJUYWJzIOaVsOe7hOaIluiAheWvueixoVxyXG4gICAgICogQHBhcmFtIGFjdGl2ZUlkIOiuvue9rlxyXG4gICAgICovXHJcbiAgICBhZGRUYWJzKGN1clRhYnM6IGFueVtdLCBpbmRleCwgc2V0QWN0aXZlSWQpIHtcclxuICAgICAgICBpZiAoY3VyVGFicy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFicy5zcGxpY2UoaW5kZXgsIDAsIC4uLmN1clRhYnMpO1xyXG4gICAgICAgICAgICAvLyDljrvph41cclxuICAgICAgICAgICAgdGhpcy50YWJzID0gdGhpcy5fdW5pcXVlKHRoaXMudGFicyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXRBY3RpdmVJZCAmJiB0aGlzLmFjdGl2ZUlkICE9PSBzZXRBY3RpdmVJZCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJUYWIgPSB0aGlzLl9nZXRUYWJCeUlkKHNldEFjdGl2ZUlkKTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlclRhYi5pbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRhYihzZXRBY3RpdmVJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gc2V0QWN0aXZlSWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRhYkludG9WaWV3KGZpbHRlclRhYi5pbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVDYWxjdWxhdGVBbGwoKTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VUaXRsZVN0eWxlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOagh+etvuaXtiAg5Y676YeNXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF91bmlxdWUob2JqQXJyYXkpIHtcclxuICAgICAgICBjb25zdCBoYXNoID0ge307XHJcbiAgICAgICAgb2JqQXJyYXkgPSBvYmpBcnJheS5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW0sIG5leHQpIHtcclxuICAgICAgICAgICAgaWYgKGhhc2hbbmV4dC5pZF0pIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhhc2hbbmV4dC5pZF0gPSB0cnVlICYmIGl0ZW0ucHVzaChuZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9LCBbXSk7XHJcbiAgICAgICAgcmV0dXJuIG9iakFycmF5O1xyXG4gICAgfVxyXG4gICAgLyog6YCa6L+HdGFi5YiX6KGo55qE5bqP5YiX5Yig6ZmkdGFiICovXHJcbiAgICByZW1vdmVUYWJCeUluZGV4KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID4gbGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVtb3ZlVGFiID0gdGhpcy50YWJzW2luZGV4XTtcclxuICAgICAgICByZW1vdmVUYWIuX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkID09PSByZW1vdmVUYWIuaWQpIHtcclxuICAgICAgICAgICAgLy8g5Y+q5pyJ5LiA5Liq6ICM5LiU6KKr5Yig6ZmkXHJcbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaJgOacieagh+etvuWdh+WIoOmZpCDmv4DmtLtpZOS4uuepulxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVJZCA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWIoOmZpOeahOaYr+acgOWQjuS4gOS4quagh+etviDorr7nva7lhbbliY3pnaLnmoTlpITkuo7mv4DmtLvnirbmgIFcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLnRhYnNbbGVuIC0gMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggLSAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWmguaenOWFtuS7luaDheWGtSAg6K6+572u5YW25ZCO6Z2i55qE5aSE5LqO5r+A5rS754q25oCBXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUlkID0gdGhpcy50YWJzW2luZGV4ICsgMV0uaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYnNbaW5kZXggKyAxXS5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYWJJbnRvVmlldyhpbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFiUmVtb3ZlLmVtaXQoe1xyXG4gICAgICAgICAgICByZW1vdmVJbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHJlbW92ZUlkOiByZW1vdmVUYWIuaWQsXHJcbiAgICAgICAgICAgIGFjdGl2ZUlkOiB0aGlzLmFjdGl2ZUlkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXreagh+etviAg6Lef5Yig6Zmk5qCH562+5LiN5ZCMXHJcbiAgICAgKiBAcGFyYW0gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIGNsb3NlVGFiKGFjdGl2ZUlkKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy50YWJzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYiA9IHRoaXMudGFic1tpXTtcclxuICAgICAgICAgICAgaWYgKHRhYi5pZCA9PT0gYWN0aXZlSWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFiQnlJbmRleChpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yid5aeL5YyWXHJcbiAgICAgKi9cclxuICAgIGxvYWQoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFic1tpXS5pZCA9PT0gdGhpcy5hY3RpdmVJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2ldLl9hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oiq5Y+WdGFi5Lit55qEdGl0bGUs6LaF6L+HNuS9je+8jOaIquaWrVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF90cnVuY2F0ZVRpdGxlKCkge1xyXG4gICAgICAgIHRoaXMudGFicyA9IHRoaXMudGFicy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlLmxlbmd0aCA+IDYgPyBpdGVtLnRpdGxlLnN1YnN0cigwLCA2KSA6IGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pu/5o2idGFi5Lit55qEdGl0bGXpopzoibJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY2hhbmdlVGl0bGVTdHlsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRvVGl0bGVXaWR0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0ICR0ZXh0RWxzID0gdGhpcy5fdGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnN0LXRhYi10ZXh0Jyk7XHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAkdGV4dEVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50RWwgPSAkdGV4dEVsc1trXS5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBpZiAoJHRleHRFbHNba10uc2Nyb2xsV2lkdGggPiBwYXJlbnRFbFsnb2Zmc2V0V2lkdGgnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJzW2tdLnRpdGxlT3ZlcmZsb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3RoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvlu7rmtYFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfY3JlYXRlU3RyZWFtKCkge1xyXG4gICAgICAgIFt0aGlzLnJpZ2h0TmF2LCB0aGlzLmxlZnROYXZdLmZvckVhY2goKGN1ckJ0biwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gaW5kZXggPyAtMSA6IDE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb3VzZWRvd24kID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2Vkb3duJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNldXAkID0gZnJvbUV2ZW50KGN1ckJ0bi5uYXRpdmVFbGVtZW50LCAnbW91c2V1cCcpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdNb3VzZURvd24kID0gbW91c2Vkb3duJC5waXBlKFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoTWFwKChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwkID0gb2YoMCkucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uY2F0KGludGVydmFsKDgwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VVbnRpbChtb3VzZXVwJCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oKHN1bTogbnVtYmVyLCBudW06IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIHRoaXMuc2Nyb2xsU3RlcCAqIGRpcmVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VXaGlsZShudW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuZGlzYWJsZVJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHYsIGRpcmVjdGlvbiB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsJDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdXNlcHJlc3NTdWIgPSBuZXdNb3VzZURvd24kLnN1YnNjcmliZShjaGFuZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVGFiKGNoYW5nZS52YWx1ZSwgY2hhbmdlLmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5wdXNoKG1vdXNlcHJlc3NTdWIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy5hdXRvUmVzaXplKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIOiuoumYhXdpbmRvd3MgcmVzaXpl5LqL5Lu2XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc3Vic2NyaXB0aW9uLnB1c2goXHJcbiAgICAgICAgLy8gICAgICAgICBmcm9tRXZlbnQod2luZG93LCAncmVzaXplJylcclxuICAgICAgICAvLyAgICAgICAgICAgICAucGlwZSh0aHJvdHRsZVRpbWUoODApKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zdWJzY3JpYmUoZSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gICAgICk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmjInnhafmlrnlkJHvvIzmu5rliqjliLDmjIflrprkvY3nva5cclxuICAgICAqIEBwYXJhbSBkaXN0X3Njcm9sbCDnm67moIfmu5rliqhcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24g5pa55ZCRXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3Njcm9sbFRhYihtb3ZlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBkaXN0X3Njcm9sbGxlZnQgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0ICsgbW92ZTtcclxuICAgICAgICBjb25zdCBtYXhfc2Nyb2xsX2xlZnQgPVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIC8vIOagh+etvumhteW3puS+p+enu+WKqFxyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbExlZnQgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIGRpc3Rfc2Nyb2xsbGVmdCxcclxuICAgICAgICAgICAgICAgIG1heF9zY3JvbGxfbGVmdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xyXG4gICAgICAgICAgICAvLyDmoIfnrb7pobXlj7Pkvqfnp7vliqhcclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KGRpc3Rfc2Nyb2xsbGVmdCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlU2lkZXMoKTtcclxuICAgICAgICAvLyB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5oyH5a6a5b2T5YmN5ruR5Yqo5Yiw5Y+v6KeG5Yy65Z+f4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU5pyq5rWL6K+VXHJcbiAgICAgKiBpbmRleFxyXG4gICAgICovXHJcbiAgICBzY3JvbGxUYWJJbnRvVmlldyhpbmRleCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwgfHwgdGhpcy5oaWRlQnV0dG9ucykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gcGFyc2VJbnQoaW5kZXggKyAnJywgMTApO1xyXG4gICAgICAgIGxldCB0YWJUb1Njcm9sbDtcclxuXHJcbiAgICAgICAgLy8gZmlyc3Qgd2UgZmluZCB0aGUgdGFiIGVsZW1lbnQuXHJcbiAgICAgICAgaWYgKHRhYkluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgY29uc3QgYWxsVGFicyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtaXRlbScpO1xyXG4gICAgICAgICAgICBpZiAoYWxsVGFicy5sZW5ndGggPiB0YWJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGFiVG9TY3JvbGwgPSBhbGxUYWJzW3RhYkluZGV4XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCBzZWxlY3RlZCB0YWIgaW50byB2aWV3XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2xpLmFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbCA9IGFjdGl2ZVRhYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhYlRvU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYl9sZWZ0ID0gcGFyc2VJbnQoXHJcbiAgICAgICAgICAgICAgICB0YWJUb1Njcm9sbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgJycsXHJcbiAgICAgICAgICAgICAgICAxMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJzX2xlZnQgPSBwYXJzZUludChcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyAnJyxcclxuICAgICAgICAgICAgICAgIDEwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UG9zaXRpb24gPVxyXG4gICAgICAgICAgICAgICAgdGFiX2xlZnQgK1xyXG4gICAgICAgICAgICAgICAgcGFyc2VJbnQodGFiVG9TY3JvbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAnJywgMTApIC1cclxuICAgICAgICAgICAgICAgIHRhYnNfbGVmdDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHRhYl9sZWZ0IC0gdGFic19sZWZ0IC0gMTA7XHJcbiAgICAgICAgICAgIGlmIChsZWZ0UG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIobGVmdFBvc2l0aW9uLCAtMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRQb3NpdGlvbiA+IHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUYWIoXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRQb3NpdGlvbiAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoICsgMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgMVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNonRhYuWQju+8jOmHjeaWsOiOt+WPlumcgOimgeivpXRhYuS4i+W3peWFt+adoeaMiemSrueahOmFjee9ruS/oeaBr+S7peWPiumakOiXj+abtOWkmuaMiemSrlxyXG4gICAgICog5Lul5Y+K6I635Y+W6K+ldGFi5LiL55qE5aS06YOo5omp5bGV5Yy65Z+fXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VG9vbGJhckNvbmYoKSB7XHJcbiAgICAgICAgY29uc3QgdGFiQ29uZmlnID0gdGhpcy50YWJzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uX2FjdGl2ZSA9PT0gdHJ1ZTtcclxuICAgICAgICB9KVswXTtcclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCd0b29sYmFyJykpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IG51bGw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZiA9IHRhYkNvbmZpZy50b29sYmFyOyAgICAgICAgICAgXHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgLy8g6K6w5b2V54q25oCBXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZSh0aGlzLnZpc2libGVSZWNvcmQsXCJ2aXNpYmxlXCIpOyAgIFxyXG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUodGhpcy5kaXNhYmxlUmVjb3JkLFwiZGlzYWJsZVwiKTtcclxuICAgICAgICAvLyDojrflj5bor6V0YWLkuIvnmoTlpLTpg6jmianlsZXljLrln59cclxuICAgICAgICBpZiAoIXRhYkNvbmZpZyB8fCAhdGFiQ29uZmlnLmhhc093blByb3BlcnR5KCdmYXJyaXNUYWJzRXh0ZW5kRGlyZWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJFeHRlbmRDb25mID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckV4dGVuZENvbmYgPSB0YWJDb25maWcuZmFycmlzVGFic0V4dGVuZERpcmVjdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6ZqQ6JeP5pu05aSa5oyJ6ZKuXHJcbiAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5bel5YW35qCP5piv5ZCm5pi+56S65LiL5ouJ5oyJ6ZKuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZVRvb2xiYXJEcm9wZG93bklzU2hvdygpIHtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWw6IGFueTtcclxuICAgICAgICBsZXQgaGVhZGVyRXh0ZW5kRWxXaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRvb2xiYXJDb250YWluZXIgfHwgIXRoaXMudG9vbGJhckNvbmYpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0b29sYmFyQ29udGFpbmVyID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gdGhpcy50b29sYmFyQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQgOiB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGxldCBkaXZFbCA9IHRvb2xiYXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZhcnJpcy10YWJzLWlubGluZS1mbGV4Jyk7XHJcbiAgICAgICAgaWYgKCFkaXZFbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlckV4dGVuZENvbmYpIHtcclxuICAgICAgICAgICAgaGVhZGVyRXh0ZW5kRWwgPSB0b29sYmFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdGFicy1oZWFkZXItZXh0ZW5kJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoaGVhZGVyRXh0ZW5kRWwsICdvdmVyZmxvdycpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOaMiemSruWcqOWGheWuueWMulxyXG4gICAgICAgIGlmICghdGhpcy5oYXNJbkhlYWRDbCgpICYmIHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCA+IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzSW5IZWFkQ2woKSAmJiB0aGlzLmJ0blBsYWNlSG9sZGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggPiB0b29sYmFyQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gaGVhZGVyRXh0ZW5kRWxXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyDmjInpkq7lnKjlpLTpg6jlt6XlhbfmoI9cclxuICAgICAgICAgICAgdGhpcy50b29sYmFyRHBIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5pi+56S655qE5oyJ6ZKu5Liq5pWw5Y+K5pu05aSa5Lit5pi+56S655qE5oyJ6ZKu5Liq5pWwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2NhbGN1bGF0ZUJ1dHRvbnNTaG93KCkge1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbDogYW55O1xyXG4gICAgICAgIGxldCBoZWFkZXJFeHRlbmRFbFdpZHRoID0gMDtcclxuICAgICAgICBpZiAoIXRoaXMudG9vbGJhckNvbnRhaW5lciB8fCAhdGhpcy50b29sYmFyQ29uZikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSB0aGlzLmhhc0luSGVhZENsKCkgPyB0aGlzLnRvb2xiYXJDb250YWluZXIubmF0aXZlRWxlbWVudCA6IHRoaXMudG9vbGJhckNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGRpdkVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaW5saW5lLWZsZXgnKTtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJFbCA9IHRoaXMuYnRuUGxhY2VIb2xkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgYnRuUGxhY2VIb2xkZXJCdG5zID0gYnRuUGxhY2VIb2xkZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLS1jYWwnKTtcclxuICAgICAgICBpZiAoIWRpdkVsIHx8IGJ0blBsYWNlSG9sZGVyQnRucy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOatpOWkhOacieS4qkJ1Z++8jOWmguaenOaYr2luQ29udGVudOi/mOaYr2hlYWRlckV4dGVuZENvbmbnmoTmg4XlhrXkuIvvvIzmjInpkq7nmoTkvY3nva7lvaLlpoJpbkhlYWRcclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJFeHRlbmRDb25mKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckV4dGVuZEVsID0gdG9vbGJhckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmFycmlzLXRhYnMtaGVhZGVyLWV4dGVuZCcpO1xyXG4gICAgICAgICAgICBoZWFkZXJFeHRlbmRFbFdpZHRoID0gdGhpcy5oYXNJbkhlYWRDbCgpID8gaGVhZGVyRXh0ZW5kRWwub2Zmc2V0V2lkdGggOiAwO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbW9yZUJ1dHRvbiA9IGJ0blBsYWNlSG9sZGVyRWwucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9yZWJ0bicpO1xyXG4gICAgICAgIC8vIOiuoeeul+aMiemSrueahOWuveW6piAgICAgIFxyXG4gICAgICAgIGxldCBiYXNpY1N0YXJ0ID0gcGFyc2VJbnQoYnRuUGxhY2VIb2xkZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KTtcclxuICAgICAgICBsZXQgYmFzaWNXaWR0aCA9IHRvb2xiYXJDb250YWluZXIub2Zmc2V0V2lkdGggLSBtb3JlQnV0dG9uLm9mZnNldFdpZHRoIC0gMTIgLSBoZWFkZXJFeHRlbmRFbFdpZHRoO1xyXG4gICAgICAgIGxldCB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIGxldCBrID0gMFxyXG4gICAgICAgIC8vIOWPquacieS4gOS4quaMiemSrlxyXG4gICAgICAgIGlmIChidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgaWYgKGJ0blBsYWNlSG9sZGVyRWwub2Zmc2V0V2lkdGggPiBiYXNpY1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGsgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChrID0gMTsgayA8PSBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoIC0gMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhoXlrrnotoXlh7os6ICD6JmR5Yiw5oyJ6ZKu5LmL6Ze055qE6Ze06LedXHJcbiAgICAgICAgICAgICAgICBpZiAoayA9PSBidG5QbGFjZUhvbGRlckJ0bnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChidG5QbGFjZUhvbGRlckVsLm9mZnNldFdpZHRoID4gYmFzaWNXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyRHJvcGRvd25IaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgayA9IGsgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGJ0blBsYWNlSG9sZGVyQnRuc1trXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSAtIGJhc2ljU3RhcnQgPiBiYXNpY1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJhckRyb3Bkb3duSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IGsgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRvb2xiYXJEcEhpZGRlbiA9IHRvb2xiYXJEcm9wZG93bkhpZGRlbjtcclxuICAgICAgICBsZXQgc2hvd0J0bnMgPSBkaXZFbC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLS1jYWwnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGs7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNob3dCdG5zW2ldLCAnZGlzcGxheScsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgbSA9IGs7IG0gPCBzaG93QnRucy5sZW5ndGg7IG0rKykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHNob3dCdG5zW21dLCAnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzICYmIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIOi/h+a7pOaYvuekuuaMiemSrueahOS4quaVsFxyXG4gICAgICAgICAgICBsZXQgZmlsdGVyU2hvd0J0bnMgPSB0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzLmZpbHRlcigoaXRlbSkgPT4gdGhpcy5nZXRUb29sYmFyU3RhdGVWaXNpYmxlKGl0ZW0pKTtcclxuICAgICAgICAgICAgLy8g5LuO5pi+56S65oyJ6ZKu5Lit6L+H5ruk5LiL5ouJ5oyJ6ZKuXHJcbiAgICAgICAgICAgIHRoaXMuaW5Nb3JlQnV0dG9uQ29udGVudHMgPSBmaWx0ZXJTaG93QnRucy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPj0gaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgICAgICB0aGlzLmNkUmVmJiYhdGhpcy5jZFJlZlsnZGVzdHJveWVkJ10mJnRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpOyBcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YeN5paw6K6h566X5piv5ZCm5pi+56S65oyJ6ZKu5ZKM5LiL5ouJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlQ2FsY3VsYXRlQWxsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fdGFiQ29udGFpbmVyRWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRhYlBhcmVudFdpZHRoID0gdGhpcy50YWJQYXJlbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICBpZiAoIXRoaXMuaGlkZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgdHIgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRhYlBhcmVudC5uYXRpdmVFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLXJpZ2h0XCIpKTtcclxuICAgICAgICAgICAgY29uc3QgdGwgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRhYlBhcmVudC5uYXRpdmVFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLWxlZnRcIikpO1xyXG4gICAgICAgICAgICB0YWJQYXJlbnRXaWR0aCArPSB0ciArIHRsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oaWRlQnV0dG9ucyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnNjcm9sbFdpZHRoIDw9IHRhYlBhcmVudFdpZHRoO1xyXG5cclxuICAgICAgICB0aGlzLmhpZGVEcm9wRG93biA9IHRoaXMuc2hvd0Ryb3BEb3duID8gdGhpcy5oaWRlQnV0dG9ucyA6IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhpZGVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5oaWRlRHJvcERvd24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJvcGRvd25UYWJzID0gW10uY29uY2F0KHRoaXMudGFicyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGFiVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93blRhYnMgPSB0aGlzLmRyb3Bkb3duVGFicy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bJ3RpdGxlJ10uaW5kZXhPZih0aGlzLnNlYXJjaFRhYlRleHQpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JlQ2FsY3VsYXRlU2lkZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kcFN0YXRlID0gW2ZhbHNlXTtcclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YeN5paw6K6h566X5bem5Y+z55qE5o+Q56S65paH5a2XXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlQ2FsdWxhdGVUb29sdGlwcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3RhYkNvbnRhaW5lckVsIHx8IHRoaXMuaGlkZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0X3JpZ2h0X3Rvb2x0aXBzID0gW107XHJcbiAgICAgICAgY29uc3QgdF9sZWZ0X3Rvb2x0aXBzID0gW107XHJcbiAgICAgICAgY29uc3QgYWxsVGFicyA9IHRoaXMuX3RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtaXRlbScpO1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IGFsbFRhYnMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGhpZGRlblRhYnMgPSB0aGlzLnRhYnMuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS5fc2hvdyAhPT0gdHJ1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGhpZGRlblRhYnNMZW5ndGggPSBoaWRkZW5UYWJzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICBhbGxUYWJzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICAgICAgY29uc3QgcmlnaHRQb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICBhbGxUYWJzW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgbGVmdFBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAocmlnaHRQb3NpdGlvbiA+IHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0X3JpZ2h0X3Rvb2x0aXBzLnB1c2godGhpcy50YWJzW2ldKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0UG9zaXRpb24gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0X2xlZnRfdG9vbHRpcHMucHVzaCh0aGlzLnRhYnNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxlZnRUb29sdGlwVGFicyA9IFtdXHJcbiAgICAgICAgICAgIC5jb25jYXQodF9sZWZ0X3Rvb2x0aXBzKVxyXG4gICAgICAgICAgICAuc2xpY2UoTWF0aC5tYXgoMCwgdF9sZWZ0X3Rvb2x0aXBzLmxlbmd0aCAtIHRoaXMubWF4VG9vbHRpcExlbikpO1xyXG4gICAgICAgIHRoaXMucmlnaHRUb29sdGlwVGFicyA9IFtdXHJcbiAgICAgICAgICAgIC5jb25jYXQodF9yaWdodF90b29sdGlwcylcclxuICAgICAgICAgICAgLnNsaWNlKDAsIE1hdGgubWluKHRoaXMubWF4VG9vbHRpcExlbiwgdF9yaWdodF90b29sdGlwcy5sZW5ndGgpKTtcclxuICAgICAgICB0aGlzLmRpc2FibGVSVG9vbHRpcCA9IHRoaXMucmlnaHRUb29sdGlwVGFicy5sZW5ndGggPCAxO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZUxUb29sdGlwID0gdGhpcy5sZWZ0VG9vbHRpcFRhYnMubGVuZ3RoIC0gaGlkZGVuVGFic0xlbmd0aCA8IDE7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmHjeaWsOiuoeeul+W3puWPs+eureWktOeKtuaAgVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9yZUNhbGN1bGF0ZVNpZGVzKCkge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZVJpZ2h0ID1cclxuICAgICAgICAgICAgdGhpcy5fdGFiQ29udGFpbmVyRWwuc2Nyb2xsTGVmdCA+PVxyXG4gICAgICAgICAgICB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxXaWR0aCAtIHRoaXMuX3RhYkNvbnRhaW5lckVsLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZUxlZnQgPSB0aGlzLl90YWJDb250YWluZXJFbC5zY3JvbGxMZWZ0IDw9IDA7XHJcbiAgICAgICAgdGhpcy5fcmVDYWx1bGF0ZVRvb2x0aXBzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmAmui/h2lk5a+75om+VGFiXHJcbiAgICAgKiBAcGFyYW0gaWQgSURcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfZ2V0VGFiQnlJZChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgaW5kZXhXaWR0aElkID0gW107XHJcbiAgICAgICAgY29uc3QgdGFic1dpdGhJZDogRmFycmlzVGFiQ29tcG9uZW50W10gPSB0aGlzLnRhYnMuZmlsdGVyKFxyXG4gICAgICAgICAgICAodGFiLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYi5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleFdpZHRoSWQucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGFiOiB0YWJzV2l0aElkLmxlbmd0aCA/IHRhYnNXaXRoSWRbMF0gOiBudWxsLFxyXG4gICAgICAgICAgICBpbmRleDogaW5kZXhXaWR0aElkLmxlbmd0aCA/IGluZGV4V2lkdGhJZFswXSA6IC0xXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8q5a696auY57G75Z6L5pivIHN0cmluZ+aIluiAhW51bWJlciDop6PmnpDlrr3pq5ggIOWwuuWvuCAqL1xyXG4gICAgcmVzb2x2ZVNpemUoc2l6ZSkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3B4fGVtfHJlbXxwdHwlLztcclxuICAgICAgICAvLyDor7TmmI7mmK/lrZfnrKbkuLJcclxuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChzaXplKVxyXG4gICAgICAgICAgICA/IGAke3BhcnNlSW50KHNpemUsIDEwKX0ke3NpemUubWF0Y2gocmVnZXgpWzBdfWBcclxuICAgICAgICAgICAgOiBgJHtzaXplfXB4YDtcclxuICAgIH1cclxuICAgIC8qXHJcbiAgICAgIOa4heepunRhYlxyXG4gICAgICAgKi9cclxuICAgIC8vIHJlbW92ZUFsbFRhYigpIHtcclxuICAgIC8vICAgICB0aGlzLnRhYnMuc3BsaWNlKDAsIHRoaXMudGFicy5sZW5ndGgpO1xyXG4gICAgLy8gfVxyXG4gICAgaGFzSW5IZWFkQ2woKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudG9vbGJhckNvbmYgJiYgdGhpcy50b29sYmFyQ29uZi5oYXNPd25Qcm9wZXJ0eSgncG9zaXRpb24nKSAmJiB0aGlzLnRvb2xiYXJDb25mLmhhc093blByb3BlcnR5KCdjb250ZW50cycpICYmIHRoaXMudG9vbGJhckNvbmYucG9zaXRpb24gPT09ICdpbkhlYWQnICYmIHRoaXMudG9vbGJhckNvbmYuY29udGVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyRXh0ZW5kQ29uZiAmJiAhKHRoaXMudG9vbGJhckNvbmYgJiYgdGhpcy50b29sYmFyQ29uZi5wb3NpdGlvbiA9PT0gJ2luQ29udGVudCcgJiYgdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgKiDmlLnlj5jlj6/nlKjnirbmgIFcclxuICAgICAqIEBwYXJhbSB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgY2hhbmdlU3RhdGUodmFsdWVzLCBzdGF0ZVByb3ApIHsgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIXRoaXMudG9vbGJhckNvbmZ8fCF0aGlzLnRvb2xiYXJDb25mLmNvbnRlbnRzKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBpZEFycmF5ID0gT2JqZWN0LmtleXModmFsdWVzKTtcclxuICAgICAgICAgICAgdGhpcy50b29sYmFyQ29uZi5jb250ZW50cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5kSWQgPSBpZEFycmF5LmZpbmQoKGlkKSA9PiBpZCA9PSBpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaW5kSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtW3N0YXRlUHJvcF0gPSB2YWx1ZXNbZmluZElkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGl0ZW1bJ2NoaWxkcmVuJ10mJml0ZW1bJ2NoaWxkcmVuJ10ubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaVsOaNrua6kOWPquacieS4gOe6p+eahOS4i+aLiVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcENoaWxkcmVuPWl0ZW0uY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgZHBDaGlsZHJlbi5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRJZCA9IGlkQXJyYXkuZmluZCgoaWQpID0+IGlkID09IGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtW3N0YXRlUHJvcF0gPSB2YWx1ZXNbZmluZElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbk1vcmVCdXR0b25Db250ZW50cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5kSWQgPSBpZEFycmF5LmZpbmQoKGlkKSA9PiBpZCA9PSBpdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaW5kSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtW3N0YXRlUHJvcF0gPSB2YWx1ZXNbZmluZElkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGl0ZW1bJ2NoaWxkcmVuJ10mJml0ZW1bJ2NoaWxkcmVuJ10ubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaVsOaNrua6kOWPquacieS4gOe6p+eahOS4i+aLiVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkcENoaWxkcmVuPWl0ZW0uY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgZHBDaGlsZHJlbi5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRJZCA9IGlkQXJyYXkuZmluZCgoaWQpID0+IGlkID09IGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtW3N0YXRlUHJvcF0gPSB2YWx1ZXNbZmluZElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5kcFN0YXRlID0gW2ZhbHNlXTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZiYmIXRoaXMuY2RSZWZbJ2Rlc3Ryb3llZCddJiZ0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbn1cclxuIl19