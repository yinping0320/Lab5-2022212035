{"version":3,"file":"farris-ui-treetable.js.map","sources":["ng://@farris/ui-treetable/lib/high-light.pipe.ts","ng://@farris/ui-treetable/lib/hotkeys.ts","ng://@farris/ui-treetable/lib/virtualized-loader.service.ts","ng://@farris/ui-treetable/lib/treetable.service.ts","ng://@farris/ui-treetable/lib/search.handle.ts","ng://@farris/ui-treetable/lib/treetable.component.ts","ng://@farris/ui-treetable/lib/find-input.component.ts","ng://@farris/ui-treetable/lib/nodes_pager/nodes-pager.component.ts","ng://@farris/ui-treetable/lib/nodes_pager/childs-loading.component.ts","ng://@farris/ui-treetable/lib/cell-tips.pipe.ts","ng://@farris/ui-treetable/lib/disable-node.pipe.ts","ng://@farris/ui-treetable/lib/treetable.module.ts"],"sourcesContent":["import { PipeTransform, Pipe, ElementRef } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\n\r\n@Pipe({ name: 'highlight' })\r\nexport class HighlightPipe implements PipeTransform {\r\n    constructor(public sanitizer: DomSanitizer, private el: ElementRef) {\r\n    }\r\n    transform(text: string, keyword, field = '', findField = ''): SafeHtml {\r\n        let needSearch = true;\r\n        if (field && findField) {\r\n            if (findField.indexOf(',') === -1) {\r\n                needSearch = field === findField;\r\n            } else {\r\n                needSearch = findField.split(',').some(n => n === field);\r\n            }\r\n        }\r\n\r\n        if (!needSearch) {\r\n            return text;\r\n        }\r\n\r\n        if (keyword && text) {\r\n            let pattern = keyword.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n            pattern = pattern.split(' ').filter((t) => {\r\n                return t.length > 0;\r\n            }).join('|');\r\n            const regex = new RegExp(pattern, 'gi');\r\n            return this.sanitizer.bypassSecurityTrustHtml(\r\n                // text.replace(regex, (match) => `<span class=\"search-highlight\">${match}</span>`)\r\n                this.replaceContent(text, regex, (match) => `<span class=\"search-highlight\">${match}</span>`)\r\n            );\r\n\r\n        } else {\r\n            return text;\r\n        }\r\n    }\r\n\r\n    parseHTML(html, context) {\r\n        const t = (context || document).createElement('template');\r\n        t.innerHTML = html;\r\n        return t.content.cloneNode(true);\r\n    }\r\n\r\n    private replaceContent(strMatch1, regex, match) {\r\n        const matchReg1 = />.*?\\</gi; // åæ¥åº><ä¹é´çåå®¹\r\n        const strs = strMatch1.match(matchReg1); // æ¿å°ææç¬¦åçé®å¼\r\n        if (strs && strs.length) {\r\n            for (const aa of strs) {\r\n                const rep_old = strs[aa]; // æ¿å°åå§ç¬¦åå­ç¬¦ä¸²\r\n                const rep_new = strs[aa].replace(regex, match); // æ¿æ¢æç®çå­ç¬¦ä¸²\r\n                const re2 = new RegExp(rep_old, 'g'); // å©ç¨åå§å­ç¬¦ä¸²çææ­£å\r\n                strMatch1 = strMatch1.replace(re2, rep_new); // å°ç¬¦åçåå§å­ç¬¦ä¸²æ¿æ¢ææ°å­ç¬¦ä¸²\r\n            }\r\n            return strMatch1;\r\n        } else {\r\n            return strMatch1.replace(regex, match);\r\n        }\r\n    }\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { Observable } from 'rxjs';\r\n\r\ninterface HotkeyOptions {\r\n    element: any;\r\n    description: string | undefined;\r\n    keys: string;\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class TTHotkeys {\r\n    hotkeys = new Map();\r\n    defaults: Partial<HotkeyOptions> = {\r\n        element: document\r\n    };\r\n\r\n    constructor(private eventManager: EventManager) {\r\n    }\r\n\r\n    addShortcut(options: Partial<HotkeyOptions>) {\r\n        const merged = { ...this.defaults, ...options };\r\n        if (merged.keys.indexOf('ctrl') > -1) {\r\n            merged.keys = merged.keys.replace('ctrl', 'control');\r\n        }\r\n        const event = `keydown.${merged.keys}`;\r\n\r\n        if (merged.description) {\r\n            this.hotkeys.set(merged.keys, merged.description);\r\n        }\r\n\r\n        return new Observable(observer => {\r\n            const handler = (e) => {\r\n                e.preventDefault();\r\n                observer.next(e);\r\n            };\r\n\r\n            const dispose = this.eventManager.addEventListener(merged.element, event, handler);\r\n\r\n            return () => {\r\n                dispose();\r\n                this.hotkeys.delete(merged.keys);\r\n            };\r\n        });\r\n    }\r\n\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-05-23 10:27:09\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-02 09:08:25\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { TreeTableComponent } from './treetable.component';\r\nimport { RowNode } from './types/treenode';\r\n\r\nexport class VirtualizedLoaderService {\r\n    constructor(private tt: TreeTableComponent) {}\r\n\r\n    getTableHeight() {\r\n        return this.tt.height;\r\n    }\r\n    getTableHeaderHeight() {\r\n        return this.tt.headerBox.nativeElement.getBoundingClientRect().height;\r\n    }\r\n    getTableBodyHeight() {\r\n        return this.tt.height - this.getTableHeaderHeight();\r\n    }\r\n    getTableWidth() {\r\n        return this.tt.width;\r\n    }\r\n\r\n    getRowHeight() {\r\n        return this.tt.rowHeight;\r\n    }\r\n\r\n\r\n    getRowNodes(scrollTop: number) {\r\n        let top = 0;\r\n        const rows = [];\r\n        let topHideHeight = 0;\r\n        let bottomHideHeight = 0;\r\n        \r\n\r\n        const rowNodes = this.tt.getCurrentAllRowNodes();\r\n\r\n        // const {rowNodes } = this.tt.state;\r\n        const rowHeight = this.getRowHeight();\r\n        const minTop = scrollTop;\r\n        const maxTop = minTop + this.getTableHeight() + rowHeight;\r\n        for (let i = 0; i < rowNodes.length; i++) {\r\n            const n: RowNode = rowNodes[i];\r\n            if ( !n.visible) {\r\n                continue;\r\n            }\r\n            top += rowHeight;\r\n            if (top + rowHeight < minTop) {\r\n                topHideHeight += rowHeight;\r\n                continue;\r\n            } else {\r\n                if (top > maxTop) {\r\n                    bottomHideHeight += rowHeight;\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            rows.push(n);\r\n        }\r\n\r\n        return {\r\n            data: rows,\r\n            topHideHeight,\r\n            bottomHideHeight\r\n        };\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { flatten } from 'lodash-es';\r\nimport { RowNode, TreeNode } from './types/treenode';\r\nimport { TreeTableColumn } from './types/treetable-column';\r\n\r\n@Injectable()\r\nexport class TreetableService {\r\n\r\n    private selectionSource = new Subject();\r\n    private dblClickSource = new Subject();\r\n    private changeCheckboxStatus = new Subject<RowNode>();\r\n    private removeNode = new Subject<RowNode>();\r\n    private insertNode = new Subject<TreeNode>();\r\n    private updateNode = new Subject<RowNode>();\r\n\r\n\r\n    selectionSource$: Observable<any> = this.selectionSource.asObservable();\r\n    dblClickSource$: Observable<any> = this.dblClickSource.asObservable();\r\n    changeCheckboxStatus$: Observable<RowNode> = this.changeCheckboxStatus.asObservable();\r\n    insertNode$: Observable<TreeNode> = this.insertNode.asObservable();\r\n    removeNode$: Observable<RowNode> = this.removeNode.asObservable();\r\n    updateNode$: Observable<RowNode> = this.updateNode.asObservable();\r\n\r\n    onSelectionChange(selected?: TreeNode[]) {\r\n        this.selectionSource.next(selected);\r\n    }\r\n\r\n    onDblClick(rowNode: RowNode) {\r\n        this.dblClickSource.next(rowNode);\r\n    }\r\n\r\n    onChangeCheckboxStatus(rowNode: RowNode) {\r\n        this.changeCheckboxStatus.next(rowNode);\r\n    }\r\n\r\n    onInsert(treeNode: TreeNode, parent?: TreeNode) {\r\n        this.insertNode.next(treeNode);\r\n    }\r\n\r\n    onRemove(rowNode: RowNode) {\r\n        this.removeNode.next(rowNode);\r\n    }\r\n\r\n    onUpdate(rowNode: RowNode) {\r\n        this.updateNode.next(rowNode);\r\n    }\r\n\r\n    columnIsVisible(col, tt) {\r\n        if (col.visible === undefined) {\r\n            return true;\r\n        }\r\n        if (typeof col.visible === 'function') {\r\n            return col.visible(tt);\r\n        }\r\n\r\n        return col.visible;\r\n    }\r\n\r\n    checkColumnsForGroupHeader(columns: any, tt: any) {\r\n        let _columns = [];\r\n        if (columns && columns.length) {\r\n            _columns = this.getDataColumns(columns);\r\n        }\r\n        return {\r\n            columns: _columns\r\n        };\r\n    }\r\n\r\n\r\n    private getDataFields(cols, length) {\r\n        let i = 0;\r\n        let j = 0;\r\n        cols.forEach(n => {\r\n            const colspan = n.colspan || 1;\r\n            if (i + colspan <= length) {\r\n                i += colspan;\r\n                j++;\r\n            }\r\n        });\r\n        return cols.splice(0, j);\r\n    }\r\n\r\n\r\n    private getDataColumns(cols) {\r\n        if (!cols || !cols.length) {\r\n            return [];\r\n        }\r\n\r\n        let fields = [];\r\n        for (let i = 0; i < cols.length; i++) {\r\n            let _cols = cols[i];\r\n            if (cols[i] && !cols[i].length) {\r\n                _cols = [...fields];\r\n                fields = [];\r\n            }\r\n            _cols.forEach(n => {\r\n                if (!n.field && n.colspan && n.colspan > 1) {\r\n\r\n                    if (n['halign']) {\r\n                        n.hAlign = n['halign'];\r\n                    }\r\n\r\n                    this.getDataFields(cols[i + 1], n.colspan).forEach(d => {\r\n                        if (!fields.includes(f => f.field === d.field)) {\r\n                            fields.push(d);\r\n                        }\r\n                    });\r\n                } else {\r\n                    if (!fields.includes(f => f.field === n.field)) {\r\n                        fields.push(n);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return fields.filter(n => !n.colspan || n.colspan === 1);\r\n    }\r\n}\r\n","import { extend } from 'lodash-es';\r\n/*\r\n * @Author: ç¯çç§æ(lucas huang)\r\n * @Date: 2018-12-18 13:38:51\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-15 15:13:56\r\n * @Company: Inspur\r\n * @Version: v0.0.1\r\n */\r\nimport { TreeTableComponent } from './treetable.component';\r\nimport { RowNode, TreeNode } from './types/treenode';\r\nimport { cloneDeep } from 'lodash-es';\r\nexport class SearchHandle {\r\n    allNodes = [];\r\n    constructor(private ttInstance: TreeTableComponent) {\r\n    }\r\n\r\n    // å·æ°æ¥è¯¢ç»æ\r\n    research(from: 'client'|'server' = 'client' ) {\r\n        const { field, value } = this.ttInstance.searchData;\r\n        this.allNodes = [];\r\n        this.search(field, value, from);\r\n    }\r\n\r\n\r\n\r\n    search(field: string, value: string, from: 'client'|'server' = 'client'): any {\r\n        if (!this.allNodes.length) {\r\n            this.allNodes = cloneDeep(this.ttInstance.state.rowNodes);\r\n        }\r\n        switch (from) {\r\n            case 'server':\r\n                this.searchOnServer(field, value);\r\n                break;\r\n            default:\r\n                if (value !== '' && value !== undefined && value !== null) {\r\n                    const values = this.searchOnClient(field, value, this.allNodes);\r\n                    this.ttInstance.state.searchRowNodes = null;\r\n                    this._updateSerializedValues(values);\r\n                } else {\r\n                    this.ttInstance.state.searched = false;\r\n                    this.ttInstance.updateSerializedValue();\r\n                }\r\n\r\n                this._refreshTree();\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _refreshTree() {\r\n        if (this.ttInstance.checkeds && this.ttInstance.checkeds.length) {\r\n            this.ttInstance.checkedNodes(this.ttInstance.checkeds.map(n => n.data[this.ttInstance.idField]));\r\n            this.ttInstance['updateNodeStatus']();\r\n            this.ttInstance.detectChanges();\r\n        } else {\r\n            if (this.ttInstance.serializedValue && this.ttInstance.serializedValue.length) {\r\n                this.ttInstance.resize();\r\n            }\r\n            this.ttInstance.detectChanges();\r\n            if (this.ttInstance.psRef) {\r\n                this.ttInstance.psRef.directiveRef.update();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _updateSerializedValues(visibleItems: RowNode[]) {\r\n        const pids = (visibleItems.map(n => [...n.parents, n.id]) as any).flat();\r\n        const pidArr = Array.from(new Set(pids));\r\n\r\n        const rowNodes =  this.allNodes.filter(n => pidArr.some(item=>item==n.id)).map(r => {\r\n            r.expanded = true;\r\n            this.ttInstance.updateNodeProperty(r.id, {expanded: true });\r\n            return r;\r\n        });\r\n\r\n        this.ttInstance.state.searched = true;\r\n        this.ttInstance.serializedValue = this.resetTreeData(null, rowNodes);\r\n        this.ttInstance.state.searchRowNodes = this.ttInstance.serializedValue;\r\n    }\r\n\r\n    findParent(item: TreeNode, allNodes: any[]) {\r\n        let res = [];\r\n        if (item && allNodes && allNodes.length) {\r\n            const p = allNodes.find(t1 => t1.id === item.data[this.ttInstance.idField]);\r\n            res.push(p);\r\n            if (p.parent) {\r\n                res = res.concat(this.findParent(p.parent, allNodes));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    private searchExpression(item: RowNode, value: string, fields: string[] = []) {\r\n        const _fields = fields.length ? fields : this.ttInstance.columns.map(c => c.field);\r\n        const results = _fields.map(f => {\r\n            const targetValue = this.getValue(f, item.node.data);\r\n            if (targetValue !== null && targetValue !== undefined) {\r\n                if (typeof targetValue === 'number') {\r\n                    return targetValue === parseFloat(value);\r\n                } else {\r\n                    return targetValue.toLowerCase().indexOf(value.toLowerCase()) > -1;\r\n                }\r\n            } else {\r\n                this.ttInstance.writeConsole(`ä¸å­å¨å ${f}`);\r\n            }\r\n        });\r\n\r\n        return results.reduce((flag, curr) => {\r\n            return flag || curr;\r\n        }, false);\r\n    }\r\n\r\n    private getValue(field, data) {\r\n        if (field) {\r\n            if (field.indexOf('.') > -1) {\r\n                try {\r\n                return field.split('.').reduce( (r, f) => {\r\n                    if (r) {\r\n                        return r[f];\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                }, data );\r\n            } catch {\r\n                this.ttInstance.writeConsole(`å­æ®µ ${field} ä¸å­å¨ã`)\r\n            }\r\n            } else {\r\n                return data[field];\r\n            }\r\n        }\r\n    }\r\n\r\n    getFindTextTotal(field: string, value: string, nodes: RowNode[]) {\r\n        let t = 0;\r\n        const getCount = (fields): any => {\r\n            let c = 0;\r\n            nodes.forEach(n => {\r\n                fields.forEach(f => {\r\n                    const targetValue = '' +   this.getValue(f, n.node.data);\r\n                    if (targetValue !== undefined) {\r\n                        if (targetValue.indexOf(value) > -1) {\r\n                            c++;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            return c;\r\n        };\r\n        let _fields = [field];\r\n        if (field === '*') {\r\n            _fields = this.ttInstance.columns.map(c => c.field);\r\n\r\n        } else if (field.indexOf(',') > -1) {\r\n            _fields = field.split(',').map(f => f.trim());\r\n        }\r\n\r\n        t = getCount(_fields);\r\n        return t;\r\n    }\r\n\r\n    searchOnClient(field: string, value: string, nodes: RowNode[]) {\r\n        let resultNodes: RowNode[] = [];\r\n        if (value === undefined || value === null) {\r\n            return [];\r\n        }\r\n        if (field === '*') {\r\n            resultNodes = nodes.filter(n => this.searchExpression(n, value));\r\n        } else if (field.indexOf(',') > -1) {\r\n            resultNodes = nodes.filter(n => this.searchExpression(n, value, field.split(',').map(f => f.trim())));\r\n        } else {\r\n            value = value.toLowerCase();\r\n            if (field.indexOf('.') === -1) {\r\n                resultNodes = nodes.filter(n => ('' + n.node.data[field]).toLowerCase().indexOf(value) > -1);\r\n            } else {\r\n                resultNodes = nodes.filter(n => ('' + this.getValue(field, n.node.data)).toLowerCase().indexOf(value) > -1);\r\n            }\r\n        }\r\n\r\n        return resultNodes;\r\n    }\r\n\r\n    searchWithConditions(conditons: {[key: string]: any}) {\r\n        if (!this.allNodes.length) {\r\n            this.allNodes = cloneDeep(this.ttInstance.state.rowNodes);\r\n        }\r\n        const fields = Object.keys(conditons);\r\n        if (!fields.length) {\r\n            this.ttInstance.state.searched = false;\r\n            this.ttInstance.updateSerializedValue();\r\n        } else {\r\n            const nodes = this.allNodes.filter(n => {\r\n                const results = fields.map(field => {\r\n                    const value = conditons[field];\r\n                    return this.searchExpression(n, value, [field])\r\n                });\r\n\r\n                // return results.reduce((flag, curr) => {\r\n                //     return flag && curr;\r\n                // }, false);\r\n                return results.every(n => n);\r\n            });\r\n            this.ttInstance.state.searchRowNodes = null;\r\n            this._updateSerializedValues(nodes);\r\n        }\r\n        this._refreshTree();\r\n    }\r\n\r\n    findParents(rowNodes, allNodes) {\r\n        let res = [];\r\n        rowNodes.forEach(item => {\r\n            res = res.concat(this.findParent(item.node, allNodes));\r\n        });\r\n\r\n        return Array.from(new Set(res));\r\n    }\r\n\r\n    private resetTreeData(parentNode: RowNode, visibleItems: RowNode[]) {\r\n        let res = [];\r\n        let arr = [];\r\n        if (parentNode === null) {\r\n            arr = visibleItems.filter(t2 => t2.parent === parentNode);\r\n        } else {\r\n            parentNode.node.expanded = true;\r\n            arr = visibleItems.filter(t2 => t2.parent && t2.parent.data[this.ttInstance.idField] === parentNode.id);\r\n            if (!arr.length) {\r\n                parentNode.node.children = [];\r\n            } else {\r\n                parentNode.node.children = arr.map( tn => tn.node );\r\n            }\r\n        }\r\n        arr.forEach( a => {\r\n            a.visible = true;\r\n            res.push(a);\r\n            res = res.concat(this.resetTreeData(a, visibleItems));\r\n        });\r\n        return cloneDeep(res);\r\n    }\r\n\r\n    private searchOnServer(field: string, value: string) {\r\n\r\n    }\r\n\r\n}\r\n","import { switchMap, takeUntil } from 'rxjs/operators';\r\n/*\r\n* @Author: ç¯çç§æ(lucas huang)\r\n * @Date: 2018-12-18 18:44:13\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-29 08:41:39\r\n * @Company: Inspur\r\n * @Version: v0.0.1\r\n */\r\n\r\nimport {\r\n    Component, OnInit, Input, TemplateRef, Directive,\r\n    ContentChildren, QueryList, AfterContentInit, OnDestroy,\r\n    HostListener, Output, EventEmitter, ElementRef, Injector,\r\n    ViewChild, Optional, Self, AfterViewInit, NgZone, Renderer2, ViewEncapsulation,\r\n    OnChanges, SimpleChanges, AfterViewChecked, ChangeDetectionStrategy, ChangeDetectorRef, DoCheck, HostBinding\r\n} from '@angular/core';\r\n\r\nimport { FarrisTemplateDirective, CommonUtils, IdService, FarrisComponentInstanceService, DebugService } from '@farris/ui-common';\r\nimport { ResizeService } from '@farris/ui-common/events';\r\nimport { ColumnFormatService, ColumnFormatter } from '@farris/ui-common/column';\r\nimport { InputGroupComponent } from '@farris/ui-input-group';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';\r\n\r\nimport { Subscription, Observable, of, BehaviorSubject, Subject, timer } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { cloneDeep, extend, remove } from 'lodash-es';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nimport { TreeTableColumn } from './types/treetable-column';\r\nimport { VirtualizedLoaderService } from './virtualized-loader.service';\r\nimport { TreeNode, RowNode, SelectEventArgs } from './types/treenode';\r\nimport { TreetableService } from './treetable.service';\r\nimport { SearchHandle } from './search.handle';\r\nimport { TTHotkeys } from './hotkeys';\r\nimport { PaginationInstance } from '@farris/ui-pagination';\r\nimport { FarrisContextMenuDirective } from '@farris/ui-context-menu';\r\n\r\n\r\n/** ååæ ¼ç¹äºä»¶åæ° */\r\nexport interface CellClickParam {\r\n    event: Event;\r\n    col: TreeTableColumn;\r\n    node: TreeNode;\r\n}\r\n/** èç¹é©éäºä»¶ */\r\nexport interface NodeCheckedParam {\r\n    originalEvent?: any;\r\n    node: TreeNode | TreeNode[];\r\n    nodes?: any[];\r\n    instance: TreeTableComponent;\r\n}\r\n\r\nexport interface NodeSelectedParam {\r\n    originalEvent?: Event;\r\n    node: TreeNode | TreeNode[];\r\n    type?: 'row' | 'checkbox';\r\n    index?: number;\r\n    parents?: any[];\r\n    instance: TreeTableComponent;\r\n}\r\n\r\nexport type IconFieldType = {\r\n    leaf?: string,\r\n    expand?: string,\r\n    collapse?: string\r\n} | string;\r\n\r\n\r\nconst NODES_PAGER_COLUMN_FIELD = '__nodespagerbar__';\r\n\r\n\r\n@Directive({\r\n    selector: 'tt-column, [tt-column]'\r\n})\r\nexport class TreeTableColumnDirective {\r\n    @Input() field: string;\r\n    @Input() title: string;\r\n    @Input() width?: number;\r\n    @Input() hAlign?: string;\r\n    @Input() align?: string;\r\n    @Input() formatter?: () => any | ColumnFormatter;\r\n}\r\n\r\n@Component({\r\n    selector: 'farris-treetable',\r\n    templateUrl: 'treetable.component.html',\r\n    styles: [`\r\n        .farris-treetable {\r\n            position: relative;\r\n        }\r\n        .resizable-column {\r\n            background-clip: padding-box;\r\n            position: relative;\r\n        }\r\n        .column-resizer {\r\n            display: block;\r\n            position: absolute!important;\r\n            top: 0;\r\n            right: 0;\r\n            margin: 0;\r\n            width: .5em;\r\n            height: 100%;\r\n            padding: 0;\r\n            cursor: col-resize;\r\n            border: 1px solid transparent;\r\n        }\r\n        .column-resizer-helper {\r\n            width: 1px;\r\n            position: absolute;\r\n            z-index: 10;\r\n            display: none;\r\n            border-right: 1px dashed #1890ff;\r\n        }\r\n\r\n        .farris-treetable-disabled .farris-treetable-body .table tr{\r\n            opacity: 0.4;\r\n            cursor: not-allowed;\r\n        }\r\n        .farris-treetable-disabled .table tr.farris-table-selectedrow{\r\n            opacity: 1;\r\n            cursor: default;\r\n        }\r\n\r\n        .custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after {\r\n            background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\");\r\n            background-color: #1890ff;\r\n        }\r\n        .unselectable-text {\r\n            -webkit-user-select: none;\r\n            -moz-user-select: none;\r\n            -o-user-select: none;\r\n            -ms-user-select: none;\r\n            user-select: none\r\n        }\r\n        .search-highlight {\r\n            background-color: #FFFF1F;\r\n        }\r\n        .search-highlight.active{\r\n            background-color: #FF901C;\r\n        }\r\n\r\n        .f-treetable--fixed-columns .ps__rail-x, .f-treetable--fixed-columns .ps__rail-y {\r\n            z-index: 18;\r\n        }\r\n    `],\r\n    exportAs: 'treeTable',\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TreeTableComponent implements OnInit, AfterContentInit, AfterViewInit, OnChanges, AfterViewChecked, OnDestroy {\r\n    id = '';\r\n    /** å®½åº¦ */\r\n    @Input() width = 500;\r\n    /** é«åº¦ */\r\n    @Input() height = 400;\r\n\r\n    @Input() showFilterBar = false;\r\n    /** æ¾ç¤ºè¿æ»¤è¡ */\r\n    @Input() enableFilterRow = false;\r\n    /** æ¾ç¤ºæ¥è¯¢å­æ®µ */\r\n    @Input() showSearchField = true;\r\n\r\n    @Input() headerHeight = 35;\r\n    /** è¡¨å¤´æè¡ */\r\n    @Input() headerWrap = false;\r\n    /** è¡é« */\r\n    @Input() rowHeight = 29;\r\n    /**\r\n     * åä¿¡æ¯\r\n     */\r\n    @Input() columns = [];\r\n    private _groupColumns = [];\r\n    @Input() set groupColumns(cols) {\r\n        this._groupColumns = cols || [];\r\n        const _columns = this.ttService.checkColumnsForGroupHeader(cols.map(cs => [...cs]), this).columns;\r\n        this.columns = _columns.filter(n => n.field);\r\n    }\r\n    get groupColumns() {\r\n        return this._groupColumns;\r\n    }\r\n    /** å¯ç¨å¤è¡¨å¤´ */\r\n    @Input() useGroupHeader = false;\r\n\r\n    @Input() fitColumns = true;\r\n    @Input() autoFitColumns = false;\r\n\r\n    @Input() searchFields: { label: string, value: string }[];\r\n\r\n    @Input() allColumnsTitle = 'ææå';\r\n    @Input() searchAnyField = true;\r\n\r\n    /** æ¾ç¤ºè¿æ¥çº¿ï¼é»è®¤ä¸º false */\r\n    @Input() showLines = false;\r\n    @Input() showLinesOnHover = false;\r\n    /**\r\n     * æ¯å¦å¯ç¨å¤éã é»è®¤ä¸ºåé\r\n     */\r\n    @Input() multiSelect = false;\r\n    @Input() singleSelect = true;\r\n    /** å¯ç¨å¤éåï¼æ¯å¦æ¾ç¤ºcheckbox */\r\n    @Input() showCheckbox = false;\r\n    /**\r\n     * ä¸»é®å­æ®µ\r\n     */\r\n    @Input() idField: string;\r\n\r\n    /** æ¾ç¤ºè¾¹æ¡çº¿ */\r\n    @Input() showBorder = true;\r\n\r\n    @Input() showCheckAll = true;\r\n\r\n    @Input() showHeader = true;\r\n    /** å¯ç¨æé©¬çº¿ */\r\n    @Input() striped = false;\r\n    /** å¯ç¨é¼ æ åè¿ææ */\r\n    @Input() hovered = true;\r\n    /** ç¦ç¨ã ç¦ç¨æ¶ä¸åè®¸éä¸­è¡ */\r\n    @Input() disabled = false;\r\n    /** ç¦å¡èç¹éä¸­ */\r\n    @Input() disabledRow: (param: { node: TreeNode, instance?: TreeTableComponent }) => boolean;\r\n\r\n    /** æ°æ®å è½½æ¹å¼; é»è®¤å¼ ä¸º all\r\n     * - all: å¨é¨å è½½\r\n     * - async: åå±å è½½\r\n     */\r\n    @Input() loadDataType: 'all' | 'async' = 'all';\r\n    /** åºå®è¡¨å¤´ */\r\n    @Input() fixedHeader = false;\r\n\r\n    /** å½å¤éæ¶ï¼éä¸­å½åè¡å¹¶é©é */\r\n    @Input() checkOnSelect = false;\r\n    /** å½å¤éæ¶ï¼é©éå¹¶éä¸­å½åè¡ */\r\n    @Input() selectOnCheck = false;\r\n    /**\r\n     * å¯ç¨å¤éæ¶ï¼æ­¤å±æ§ä¸ºtrue æ¶ï¼ä»å½åè¡éä¸­\r\n     */\r\n    @Input() onlySelectSelf = false;\r\n\r\n    /** å¯ç¨åå®½è°æ´ */\r\n    @Input() resizableColumns = true;\r\n    /** è®¾ç½®ä¸ºtrueæ¶èªéåºç¶å®¹çå°ºå¯¸ */\r\n    @Input() fit = false;\r\n\r\n    /** å¯ç¨çº§èéä¸­åè½ */\r\n    @Input() cascadeCheck = true;\r\n    /** åä¸çº§èéä¸­ */\r\n    @Input() cascadeDown = true;\r\n    /** åä¸çº§èéä¸­ */\r\n    @Input() cascadeUp = true;\r\n    /** ç©ºæ°æ®æ¶ï¼æ¾ç¤ºçæç¤ºææ¬ */\r\n    @Input() emptyMessage = 'ææ æ°æ®';\r\n    /** ç¼©è¿é´è·ï¼é»è®¤ä¸º 16px */\r\n    @Input() indentSpacing = 16;\r\n\r\n    /**\r\n     * åå»è¡éä¸­åï¼å¨æ¬¡ç¹å»ä¸ä¼è¢«åæ¶éä¸­ç¶æ;\r\n     */\r\n    @Input() keepSelect = true;\r\n    /** èæå è½½ */\r\n    @Input() virtualized = false;\r\n    /**\r\n     * ä»åè®¸éæ©å¶å­èç¹\r\n     * - default: åºç¨æå¡å¨ç«¯ä¼ åçè®¾ç½®ï¼å¦ææå¡å¨ç«¯æ²¡æè®¾ç½®ï¼åä¸ no ä¿æä¸è³ï¼\r\n     * - yes: å¦æå®¢æ·ç«¯è®¾ç½®ä¸º `yes`, æå¡å¨ç«¯çè®¾ç½®å¤±æï¼\r\n     * - no: åè®¸éæ©ææèç¹ï¼æå¡å¨ç«¯è®¾ç½®å¤±æ\r\n     */\r\n    @Input() onlySelectLeaf: boolean | 'default' | 'yes' | 'no' = 'default';\r\n\r\n    /** æ¾ç¤ºå¾æ  */\r\n    @Input() showIcon = false;\r\n    /** å¶å­èç¹å¾æ  */\r\n    @Input() leafIcon = 'file';\r\n    /** èç¹å±å¼å¾æ  */\r\n    @Input() expandIcon = 'folder-open';\r\n    /** èç¹æå å¾æ  */\r\n    @Input() collapseIcon = 'folder';\r\n\r\n    @Input() foldIcon = 'treetable-toggler';\r\n    @Input() unfoldIcon = 'extanded treetable-toggler';\r\n\r\n    /** å¯ç¨èç¹å¾æ ä»æ°æ®ä¸­è·åã é»è®¤ä¸º false */\r\n    @Input() useIconFromData = false;\r\n    /** å½æ°æ®æºä¸­iconæªè®¾ç½®æ¶ä½¿ç¨åç½®ICON. é»è®¤ä¸º true */\r\n    @Input() whenDataIconEmptyUseDefault = true;\r\n    /** ä»æ°æ®æºå­æ®µä¸­è·åå¾æ  */\r\n    @Input() iconField: IconFieldType = '';\r\n    /** å¾æ èªå®ä¹æ ·å¼ */\r\n    @Input() iconCls: string;\r\n\r\n    /** å¯ç¨è¿ç«¯æåº */\r\n    @Input() remoteSort = true;\r\n    /** æåºå­æ®µ */\r\n    @Input() sortName: string;\r\n    /** æåºæ¹å¼ asc | desc */\r\n    @Input() sortOrder: string;\r\n    /** åè®¸å¤åæåº */\r\n    @Input() multiSort: boolean;\r\n\r\n    @Input() beforeSortColumn: (field: string, order: string) => Observable<boolean>;\r\n\r\n    @Input() rowStyler: (treeNode: TreeNode, field?: string) => any;\r\n    @Input() cellStyler: (treeNode: TreeNode, field: string) => any;\r\n\r\n    /** å¯ç¨åç«¯ææ¬æ¥æ¾ */\r\n    @Input() enableFindText = false;\r\n    /** ææ¬æ¥è¯¢å­æ®µ, å¼ç¨ */\r\n    @Input() findField: string;\r\n    // æ åè¡¨é»è®¤å±å¼å±çº§ã -1ï¼ ä¸å±å¼ï¼ 0ï¼ å¨é¨å±å¼ï¼ >0:  å±å¼å°æå®çº§æ°ï¼\r\n    @Input() expandLevel = -1;\r\n\r\n    @Input() selectValue = '';\r\n    @Output() selectValueChange = new EventEmitter();\r\n    /** å¯ç¨åå»å±å¼èç¹ */\r\n    @Input() dblClickExpand = true;\r\n    @Input() useDblClick = true;\r\n\r\n    /** éä¸­èç¹IDæ°ç» */\r\n    @Input() selectValues = [];\r\n    @Output() selectValuesChange = new EventEmitter();\r\n    /** æ¯å¦ç¦æ­¢æè¡ï¼é»è®¤ä¸æè¡ */\r\n    @Input() nowrap = true;\r\n\r\n    @Input() checkValues = [];\r\n    @Output() checkValuesChange = new EventEmitter();\r\n\r\n\r\n    @Input() beforeNodeSelected: (e: any) => Observable<boolean>;\r\n    @Input() beforeNodeUnSelected: () => Observable<boolean>;\r\n\r\n    @Input() beforeNodeChecked: () => Observable<boolean>;\r\n    @Input() beforeNodeUnChecked: () => Observable<boolean>;\r\n\r\n    @Input() beforeCheckAll: (e?: any) => Observable<boolean>;\r\n    @Input() beforeUnCheckAll: (e?: any) => Observable<boolean>;\r\n\r\n    @Input() beforeClickNode: (e?: any) => Observable<boolean>;\r\n\r\n    /** åé¡µä¿¡æ¯ */\r\n    @Input() pagination = false;\r\n    /** åé¡µå è½½å­èç¹æ°æ® */\r\n    @Input() paginationForChildren = false;\r\n    /** åé¡µæ¡æ¾ç¤ºæ¨¡å¼ï¼ default, simple */\r\n    @Input() pagerViewMode = 'default';\r\n    /** å¯ç¨æå¡å¨ç«¯åé¡µ */\r\n    @Input() pagerOnServer = true;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageList = [10, 20, 30, 50, 100];\r\n    /** å½åé¡µç  */\r\n    @Input() pageIndex = 1;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageSize = 20;\r\n    /** åé¡µåºé«åº¦ */\r\n    @Input() pagerHeight = 56;\r\n    /** æ¾ç¤ºæ¯é¡µè®°å½æ° */\r\n    @Input() showPageList = false;\r\n    /** æ¾ç¤ºåé¡µä¿¡æ¯ */\r\n    @Input() showPageInfo = true;\r\n    /** æ¾ç¤ºé¡µç  */\r\n    @Input() showPageNumber = true;\r\n    /** æ¾ç¤ºé¡µç æå¤§æ°é */\r\n    @Input() pagerLabelSize = 7;\r\n    /** æ¾ç¤ºé¡µç è¾å¥æ¡ */\r\n    @Input() showGotoInput = false;\r\n    /** å­èç¹åé¡µæ¯å¦æ¾ç¤ºæ»è®°å½æ°ï¼é»è®¤ false */\r\n    @Input() showTotalForChildren = false;\r\n    /** æ»è®°å½æ° */\r\n    @Input() total = 0;\r\n\r\n\r\n    @Input() enableContextMenu = false;\r\n    @Input() contextMenuItems = [];\r\n    @Input() beforeShowContextMenu: (e: { [key: string]: any }) => Observable<{ show: boolean, menus: Array<any>}>;\r\n\r\n    @Output() pageSizeChanged = new EventEmitter();\r\n    @Output() pageChanged = new EventEmitter();\r\n\r\n    /** æåºå */\r\n    @Output() columnSorted = new EventEmitter();\r\n    /** éä¸­äºä»¶ */\r\n    @Output() nodeSelected: EventEmitter<NodeSelectedParam> = new EventEmitter();\r\n    /** åæ¶éä¸­äºä»¶ */\r\n    @Output() nodeUnSelect: EventEmitter<NodeSelectedParam> = new EventEmitter();\r\n\r\n    /** é©é */\r\n    @Output() nodeChecked: EventEmitter<NodeCheckedParam> = new EventEmitter();\r\n    /** åæ¶é©é */\r\n    @Output() nodeUnChecked: EventEmitter<NodeCheckedParam> = new EventEmitter();\r\n\r\n    /** å¨éäºä»¶ */\r\n    @Output() checkAll: EventEmitter<any> = new EventEmitter();\r\n    /** åæ¶å¨é */\r\n    @Output() unCheckAll: EventEmitter<any> = new EventEmitter();\r\n    /** æ¥è¯¢ */\r\n    @Output() search: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() dblClick: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() loadedData: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() expand: EventEmitter<TreeNode> = new EventEmitter();\r\n    @Output() collapse: EventEmitter<TreeNode> = new EventEmitter();\r\n\r\n    @Output() expandAllNodes: EventEmitter<any> = new EventEmitter();\r\n    @Output() collapseAllNodes: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() appendNew: EventEmitter<any> = new EventEmitter();\r\n    @Output() removed: EventEmitter<any> = new EventEmitter();\r\n    @Output() updated: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() clearSearchValue = new EventEmitter();\r\n    @Output() cellClick = new EventEmitter<CellClickParam>();\r\n    @Output() childsPageChanged = new EventEmitter();\r\n\r\n    @Output() searchValueChange = new EventEmitter<any>();\r\n\r\n    @Input() loadedTimer = 100;\r\n\r\n    serializedValue: RowNode[];\r\n\r\n    _data: TreeNode[] = [];\r\n    // loaddata æ¶ åè®¾ç½®ä¸ºç©ºæ°ç»ï¼\r\n    isLoadNewDataSetEmpty = false;\r\n    get data(): any[] {\r\n        return this._data;\r\n    }\r\n    @Input() set data(val: any[]) {\r\n        this._data = val;\r\n        this.updateSerializedValue();\r\n        if (!this.isLoadNewDataSetEmpty) {\r\n            this.initNodeStatus();\r\n        }\r\n        // autowidth æ¶ï¼è¡¨å¤´å®½åº¦ä¾æ®åå®¹å®½åº¦ä½åæ­¥å¤ç\r\n        this.setNewColumnsWidth();\r\n\r\n        this.loadDataSuccess();\r\n    }\r\n    /** æ ¹æ®åå®¹èªå¨å®½åº¦ï¼é»è®¤ false;\r\n     * æ­¤å±æ§å¼å¯åï¼èªå¨åå®½å¤±æ\r\n     */\r\n    @Input() autoWidth = false;\r\n\r\n    @ContentChildren(FarrisTemplateDirective) templates: QueryList<FarrisTemplateDirective>;\r\n    @ContentChildren(TreeTableColumnDirective) columnsRef: QueryList<TreeTableColumnDirective>;\r\n\r\n    @ViewChild('headerBox') headerBox: ElementRef;\r\n    @ViewChild('resizerHelper') resizerHelperVC: ElementRef;\r\n    @ViewChild('headerTable') headerTable: ElementRef;\r\n    @ViewChild('bodyTable') bodyTable: ElementRef;\r\n\r\n    @ViewChild('inputGroup') inputGroup: InputGroupComponent;\r\n    @ViewChild(PerfectScrollbarComponent) psRef?: PerfectScrollbarComponent;\r\n\r\n    private headerCheckboxCmp: TreeTableHeaderCheckboxComponent;\r\n    @ViewChild('allCheckbox') set allCheckbox(content: TreeTableHeaderCheckboxComponent) {\r\n        this.headerCheckboxCmp = content;\r\n    }\r\n\r\n    @ViewChild('nodespagerbar') nodesPagerBar: TemplateRef<any>;\r\n    @ViewChild(FarrisContextMenuDirective) ctxMenu: FarrisContextMenuDirective;\r\n    /**\r\n     * è¡¨å¤´æ¨¡æ¿\r\n     */\r\n    headerTemplate: TemplateRef<any>;\r\n\r\n    /**\r\n     * è¡¨ä½æ¨¡æ¿\r\n     */\r\n    bodyTemplate: TemplateRef<any>;\r\n\r\n    /** éä¸­é¡¹éå */\r\n    private _selections = [];\r\n    get selections(): TreeNode[] {\r\n        return this._selections;\r\n    }\r\n    set selections(vals: TreeNode[]) {\r\n        if (vals && vals.length) {\r\n            // è¿æ»¤ææ°æ®æºä¸­ä¸å­å¨èç¹\r\n            this._selections = vals.filter(tn => tn && this.findRowNode(tn.id));\r\n            const ids = this._selections.map(tn => tn.id);\r\n\r\n            if (ids.length !== this.selectValues.length ||\r\n                (ids.length === this.selectValues.length && this.difference(ids, this.selectValues).length)) {\r\n                this.selectValues = ids;\r\n                setTimeout(() => {\r\n                    this.selectValuesChange.emit(ids);\r\n                });\r\n            }\r\n        } else {\r\n            this._selections = [];\r\n            this.selectValues = [];\r\n            this.selectValuesChange.emit([]);\r\n\r\n        }\r\n    }\r\n    /**\r\n     * éä¸­é¡¹ç´¢å¼\r\n     */\r\n    selectRowIndex = -1;\r\n\r\n    /** éä¸­å½åè¡ */\r\n    private _selectedRow = null;\r\n    get selectedRow(): TreeNode {\r\n        return this._selectedRow;\r\n    }\r\n\r\n    set selectedRow(treeNode: TreeNode) {\r\n        this._selectedRow = treeNode;\r\n        if (treeNode) {\r\n            if (this.selectValue !== treeNode.id) {\r\n                this.selectValue = treeNode.id;\r\n                this.selectValueChange.emit(treeNode.id);\r\n            }\r\n        } else {\r\n            this.selectValue = null;\r\n            this.selectValueChange.emit(null);\r\n        }\r\n    }\r\n\r\n\r\n    /** é©éçè®°å½éå */\r\n    private _checkeds = [];\r\n    get checkeds(): TreeNode[] {\r\n        return this._checkeds;\r\n    }\r\n    set checkeds(treeNodes: TreeNode[]) {\r\n        if (treeNodes && treeNodes.length) {\r\n            this._checkeds = treeNodes.filter(tn => this.findRowNode(tn.id));\r\n            const ids = this._checkeds.map(tn => tn.id);\r\n            this.checkValues = this.checkValues || [];\r\n            if (ids.length !== this.checkValues.length ||  (ids.length === this.checkValues.length && this.difference(ids, this.checkValues).length)) {\r\n                this.checkValues = ids;\r\n                setTimeout(() => {\r\n                    this.checkValuesChange.emit(ids);\r\n                });\r\n            }\r\n        } else {\r\n            this._checkeds = [];\r\n            this.checkValues = [];\r\n            this.checkValuesChange.emit([]);\r\n        }\r\n    }\r\n\r\n    // æå¤å±DIV\r\n    containerElement: HTMLDivElement;\r\n\r\n    // è®°å½åæå¨åçä½ç½®\r\n    lastResizerHelperX: number;\r\n\r\n    searchData = { field: '*', value: '' };\r\n\r\n    scorllBodyHeight: number;\r\n\r\n    searchHandle: SearchHandle;\r\n    searchButtonText = '<i class=\"f-icon f-icon-search\"></i>';\r\n    /** æ¾ç¤ºæ¥è¯¢å·¥å·æ¡ */\r\n    showFindInput = false;\r\n\r\n    private isDataChanged = false;\r\n\r\n    scrollLoader: VirtualizedLoaderService;\r\n    topHideHeight = 0;\r\n    bottomHideHeight = 0;\r\n    state = {\r\n        searchRowNodes: null,\r\n        searched: false,\r\n        rowNodes: [],\r\n        scrollY: 0,\r\n        scrollX: 0\r\n    };\r\n\r\n    /** å¾æ¥è¯¢çææ¬ */\r\n    findValue = '';\r\n    /** ç»ææ»æ° */\r\n    findCount = 0;\r\n    /** å½åç´¢å¼ */\r\n    findCurrent = 0;\r\n    /** å­å¨ææ¬æ¥è¯¢ç»æ */\r\n    findResult = [];\r\n    private ro: ResizeObserver | null = null;\r\n    private findKeysHandler = null;\r\n    private _hotKeys: TTHotkeys = null;\r\n    localeService: LocaleService;\r\n    private idService: IdService;\r\n    private styleSheetId = 'treetable-style-';\r\n    private styleElement;\r\n\r\n    // è°æ´æ¨¡æ¿ï¼æ­¤å±æ§ä»ä¸ºå¸®å©ä¸­çæ ç»ä»¶\r\n    fast = false;\r\n\r\n    paginationOptions: PaginationInstance = {\r\n        id: 'Farris-TreeTable-Pagination_',\r\n        itemsPerPage: this.pageSize,\r\n        currentPage: this.pageIndex,\r\n        pageList: this.pageList,\r\n        totalItems: this.total,\r\n        remote: this.pagerOnServer\r\n    };\r\n\r\n    selectNodeChangedSubject = new BehaviorSubject(null);\r\n    private _UUID = '';\r\n    // æ¯å¦æåºå®å\r\n    fixedColumns = false;\r\n    private destroy$ = new Subject();\r\n    private farrisInstances: FarrisComponentInstanceService = null;\r\n    difference = (first: any[], second: any[]) => first.filter(item => !second.some(secondItem => secondItem == item));\r\n    private debugSer: DebugService = null;\r\n\r\n    private filterRowConditions = null;\r\n    constructor(\r\n        public ttService: TreetableService, public el: ElementRef,\r\n        public resizeSer: ResizeService, private renderer: Renderer2,\r\n        public utils: CommonUtils, public colFormatSer: ColumnFormatService,\r\n        private shortcuts: TTHotkeys, private cdRef: ChangeDetectorRef,\r\n        private ngZone: NgZone, private injector: Injector) {\r\n        this.searchHandle = new SearchHandle(this);\r\n        this.scrollLoader = new VirtualizedLoaderService(this);\r\n        if (this.injector) {\r\n            this._hotKeys = this.injector.get(TTHotkeys, null);\r\n            this.localeService = this.injector.get(LocaleService, null);\r\n            this.idService = this.injector.get(IdService, null);\r\n            this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);\r\n        }\r\n        if (this.idService) {\r\n            this._UUID = this.idService.uuid();\r\n            this.styleSheetId += this.idService.uuid();\r\n        } else {\r\n            this._UUID = ('' + Math.random()).slice(2);\r\n            this.styleSheetId += ('' + Math.random()).slice(2);\r\n        }\r\n\r\n        this.ttService = new TreetableService();\r\n\r\n        this.debugSer = this.injector.get(DebugService, null);\r\n\r\n        if (this.debugSer) {\r\n            this.debugSer.useDebugMode();\r\n        }\r\n    }\r\n\r\n    writeConsole(msg, type: 'info'|'log'|'warn'|'error' = 'warn') {\r\n        if (this.debugSer) {\r\n            this.debugSer[type](msg);\r\n        }\r\n    }\r\n\r\n    private checkOptons() {\r\n        // å¯ç¨æ°æ®æè¡åï¼èææ¸²æåè½å¤±æ\r\n        if (!this.nowrap) {\r\n            this.virtualized = false;\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.reSetSize();\r\n            this.setScorllBodyHeight();\r\n        });\r\n\r\n        if (this.multiSelect) {\r\n            this.singleSelect = false;\r\n        }\r\n\r\n        if (this.singleSelect && this.showCheckbox) {\r\n            this.checkOnSelect = true;\r\n            this.selectOnCheck = true;\r\n        }\r\n\r\n        if (!this.beforeSortColumn) {\r\n            this.beforeSortColumn = () => of(true);\r\n        }\r\n\r\n        if (this.fit) {\r\n            this.renderer.addClass(this.el.nativeElement, 'f-utils-fill-flex-column');\r\n            const parentEl = this.el.nativeElement.parentElement || this.el.nativeElement.parentNode;\r\n            if (parentEl) {\r\n                // this.renderer.addClass(parentEl, 'f-utils-fill');\r\n                this.renderer.setStyle(parentEl, 'overflow', 'hidden');\r\n            }\r\n        }\r\n\r\n        if (!this.beforeClickNode) {\r\n            this.beforeClickNode = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeCheckAll) {\r\n            this.beforeCheckAll = () => of(true);\r\n        }\r\n\r\n        if (!this.beforeUnCheckAll) {\r\n            this.beforeUnCheckAll = () => of(true);\r\n        }\r\n\r\n        if (this.autoWidth) {\r\n            this.fitColumns = false;\r\n            this.resizableColumns = false;\r\n        }\r\n\r\n        if (!this.disabledRow) {\r\n            this.disabledRow = () => false;\r\n        }\r\n\r\n        if (!this.searchAnyField && this.searchFields && this.searchFields.length) {\r\n            this.searchData.field = this.searchFields[0].label;\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.id = 'Treetable-' + this._UUID;\r\n        // åå»º stylesheet\r\n        this.styleElement = this.utils.createStyleSheet(this.styleSheetId);\r\n        this.checkColumnOption();\r\n\r\n        this.checkOptons();\r\n\r\n        if (this.ngZone) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                if (this.el.nativeElement.parentElement) {\r\n                    this.ro = new ResizeObserver((entries, observer) => {\r\n                        if (entries && entries[0]) {\r\n                            const { width, height } = entries[0].contentRect;\r\n                            const target =  entries[0].target;\r\n\r\n                            if (this.fit && target['offsetParent']) {\r\n                                this.resize({ width, height: this.showBorder? height - 2 : height });\r\n                            }\r\n                        }\r\n                        // è¡¨ååæ¢åï¼å¦ææéä¸­è¡ï¼åæ´æ°æ»å¨æ¡ä½ç½®\r\n                        this.scrollToCurrentNode();\r\n                    });\r\n                    this.ro.observe(this.el.nativeElement.parentElement);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.paginationOptions = this.initPaginationOptions();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.ro) {\r\n            if (this.el.nativeElement.parentElement) {\r\n                this.ro.unobserve(this.el.nativeElement.parentElement);\r\n            }\r\n            this.ro.disconnect();\r\n            this.ro = null;\r\n        }\r\n\r\n        if (this.findKeysHandler) {\r\n            this.findKeysHandler.unsubscribe();\r\n        }\r\n\r\n        this.utils.removeStyleSheet(this.styleSheetId);\r\n        this.styleElement = null;\r\n\r\n        if (this.farrisInstances) {\r\n            this.farrisInstances.destroy(this.el.nativeElement);\r\n        }\r\n\r\n        this.ttService = null;\r\n\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.data && !changes.data.isFirstChange()) {\r\n            this.isDataChanged = changes.data.currentValue !== changes.data.previousValue;\r\n        }\r\n\r\n        if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {\r\n            this.singleSelect = !changes.multiSelect.currentValue;\r\n            if (this.singleSelect && this.showCheckbox) {\r\n                this.selectOnCheck = true;\r\n                this.checkOnSelect = true;\r\n            }\r\n        }\r\n\r\n        if (changes.disabled && !changes.disabled.isFirstChange()) {\r\n            this.hovered = !changes.disabled.currentValue;\r\n        }\r\n\r\n        if (changes.enableFindText && !changes.enableFindText.isFirstChange()) {\r\n            this.setFindText(changes.enableFindText.currentValue);\r\n        }\r\n\r\n        if (changes.selectValue && !changes.selectValue.isFirstChange()) {\r\n            this.selectNode(changes.selectValue.currentValue);\r\n        }\r\n        if (changes.selectValues && !changes.selectValues.isFirstChange()) {\r\n            this.selectNodes(changes.selectValues.currentValue);\r\n        }\r\n        if (changes.checkValues && !changes.checkValues.isFirstChange()) {\r\n            this.checkedNodes(changes.checkValues.currentValue);\r\n        }\r\n\r\n        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {\r\n            this.paginationOptions = Object.assign(this.paginationOptions, {\r\n                currentPage: this.pageIndex\r\n            });\r\n        }\r\n\r\n        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {\r\n            this.paginationOptions = Object.assign(this.paginationOptions, {\r\n                itemsPerPage: this.pageSize\r\n            });\r\n        }\r\n\r\n        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {\r\n            this.paginationOptions = Object.assign(this.paginationOptions, {\r\n                pageList: this.pageList\r\n            });\r\n        }\r\n\r\n        if (changes.total !== undefined && !changes.total.isFirstChange()) {\r\n            this.paginationOptions = Object.assign(this.paginationOptions, {\r\n                totalItems: this.total\r\n            });\r\n        }\r\n\r\n        if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {\r\n            this.setTableWidth(this.allColumnsWidth());\r\n        }\r\n\r\n        if (changes.columns && !changes.columns.isFirstChange()) {\r\n            this.checkColumnOption();\r\n        }\r\n\r\n        if (changes.showBorder && !changes.showBorder.isFirstChange()) {\r\n            // this.reSetSize();\r\n        }\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        // if (this.isDataChanged) {\r\n        //     this.loadedData.emit();\r\n        //     this.isDataChanged = false;\r\n        // } else {\r\n        //     this.ngZone.runOutsideAngular(() => {\r\n        //         if (this.psRef) {\r\n        //             this.psRef.directiveRef.update();\r\n        //         }\r\n        //     });\r\n        // }\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        this.templates.forEach((item) => {\r\n            switch (item.getType()) {\r\n                case 'header':\r\n                    this.headerTemplate = item.template;\r\n                    break;\r\n                case 'body':\r\n                    this.bodyTemplate = item.template;\r\n                    break;\r\n            }\r\n        });\r\n\r\n        if (this.columnsRef.length) {\r\n            this.columns = this.ttc2columns(this.columnsRef);\r\n\r\n            this.columnsRef.changes.subscribe((d: any) => {\r\n                this.columns = this.ttc2columns(d);\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.containerElement = this.el.nativeElement.querySelector('.farris-treetable');\r\n     \r\n        this.registerShortcuts();\r\n\r\n        // autowidth æ¶ï¼è¡¨å¤´å®½åº¦ä¾æ®åå®¹å®½åº¦ä½åæ­¥å¤ç\r\n        this.setNewColumnsWidth();\r\n        this.setRightFixedColumnShadow();\r\n\r\n        if (this.el && this.farrisInstances) {\r\n            this.farrisInstances.add(this.el.nativeElement, this);\r\n        }\r\n\r\n        if (this.bodyTemplate) {\r\n            this.utils.appendCssRules([`#${this.id} .farris-treetable .farris-treetable-tbody td {padding: .25rem 0.75rem;}`], this.styleElement.sheet);\r\n        }\r\n\r\n        // å¼å®¹æ§çè®¾è®¡å¨        \r\n        if (this.fit && this.el.nativeElement.parentElement.nodeName !== 'DIV') {\r\n            if (this.el.nativeElement.parentElement.nodeName === 'APP-DG-TREE-GRID') {\r\n                const div = this.el.nativeElement.parentElement.closest('div');\r\n                if (div) {\r\n                    div.style.overflow = 'hidden';\r\n                }\r\n            }\r\n        }\r\n\r\n        this.loadDataSuccess();\r\n    }\r\n\r\n    private loadDataSuccess() {\r\n        timer(this.loadedTimer).pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(() => {\r\n            if (this.psRef && this.psRef.directiveRef) {\r\n                this.psRef.directiveRef.update();\r\n            }\r\n            this.loadedData.emit();\r\n        })\r\n    }\r\n\r\n\r\n    private setNewColumnsWidth() {\r\n        if (!this.autoWidth) {\r\n            return;\r\n        }\r\n        const newColWidth: any = {};\r\n        let headerCells = [];\r\n        let firstRowCells = [];\r\n        // let colgroups = [];\r\n        if (this.showHeader && this.headerTable) {\r\n            headerCells = Array.from<HTMLElement>(this.headerTable.nativeElement.querySelectorAll('th'));\r\n        }\r\n        if (this.serializedValue && this.serializedValue.length && this.bodyTable) {\r\n            firstRowCells = Array.from<HTMLElement>(this.bodyTable.nativeElement.querySelector('tr').querySelectorAll('td'));\r\n            // colgroups = this.bodyTable.nativeElement.querySelector('colgroup').querySelectorAll('col');\r\n        }\r\n\r\n        firstRowCells.forEach((td: any, index) => {\r\n            const fieldName = td.getAttribute('field');\r\n            let colWidth = td.getBoundingClientRect().width.toFixed(2);\r\n            newColWidth[fieldName] = colWidth;\r\n\r\n            const col = this.columns.find(c => c.field === fieldName);\r\n            if (col && col.width !== undefined) {\r\n                colWidth = colWidth > col.width ? colWidth : col.width;\r\n            }\r\n\r\n            td.style.minWidth = colWidth + 'px';\r\n            headerCells[index].style.width = colWidth + 'px';\r\n        });\r\n        const colWidthTotal = this.allColumnsWidth();\r\n        this.setTableWidth(colWidthTotal);\r\n    }\r\n\r\n    columnIsVisible(col) {\r\n        return this.ttService.columnIsVisible(col, this);\r\n    }\r\n\r\n\r\n    private columnCssName(n: any) {\r\n        return `#${this.id} .treetable-cell[field=\"${n.field}\"], #${this.id} .treetable-header-cell[field=\"${n.field}\"]:not(.group-header-cell)`;\r\n    }\r\n\r\n\r\n    private checkGroupColumns() {\r\n        var i = this.groupColumns.length - 1;\r\n        while(i >= 0) {\r\n            var ids = this.groupColumns[i].map(n => n.parentId);\r\n            ids = Array.from(new Set(ids));\r\n            ids.map(id => {\r\n                const childCols = this.groupColumns[i].filter(n => n.parentId == id).map(n => {\r\n                    const dataField = this.columns.find(c => c.id === n.id);\r\n                    return dataField || n;\r\n                });\r\n                return { \r\n                    id,\r\n                    width: childCols.reduce((r,c) => { return r+=c.width }, 0),\r\n                    left: childCols[0].left,\r\n                    right: childCols[childCols.length - 1].right || 0\r\n                };\r\n            }).forEach(p => {\r\n                if (i - 1 >= 0) {\r\n                    let pCol = this.groupColumns[i-1].find(pc => pc.id == p.id);\r\n                    const dataField = this.columns.find(c => c.id === p.id);\r\n                    pCol = dataField || pCol;\r\n\r\n                    pCol.width = p.width;\r\n                    if (pCol.fixed === 'left') {\r\n                        pCol.left = p.left;\r\n                    }\r\n                    if (pCol.fixed === 'right') {\r\n                        pCol.right = p.right;\r\n                    }\r\n                }\r\n            });\r\n            i--;\r\n        }\r\n    }\r\n\r\n    // æåºå®åçé¡ºåºæåº\r\n    private sortColumnsByFixed(updateColumns = true) {\r\n        const fixedLeft = this.columns.filter(n => n.fixed === 'left');\r\n        const fixedCenter = this.columns.filter(n => !n.fixed || n.fixed === 'center');\r\n        const fixedRight = this.columns.filter(n => n.fixed === 'right');\r\n\r\n        if (fixedLeft && fixedLeft.length) {\r\n            fixedLeft.forEach((n, index) => {\r\n                if (index) {\r\n                    n.left = fixedLeft.reduce((r, c, i)=> {\r\n                        if (i < index) {\r\n                            return r += c.width;\r\n                        } \r\n                        return r;\r\n                    }, 0)\r\n                } else {\r\n                    n.left = 0;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (fixedRight && fixedRight.length) {\r\n\r\n            let rightWidthTotal = fixedRight.reduce((r, c) => {\r\n                return r + c.width;\r\n            }, 0);\r\n\r\n            fixedRight.forEach((n, index) => {\r\n                rightWidthTotal -= n.width;\r\n                n.right = rightWidthTotal;\r\n            });\r\n        }\r\n\r\n\r\n\r\n        if (updateColumns) {\r\n            this.columns = fixedLeft.concat(fixedCenter).concat(fixedRight);\r\n        }\r\n    }\r\n\r\n    private checkColumnOption() {\r\n        const cssRules = [];\r\n\r\n        \r\n        // å¯ç¨åé¡µå è½½å­èç¹\r\n        if (this.paginationForChildren) {\r\n            const pagerBarCol: any = {\r\n                field: NODES_PAGER_COLUMN_FIELD,\r\n                width: 160,\r\n                title: '',\r\n                align: 'center',\r\n                template: this.nodesPagerBar,\r\n                rowspan: 1,\r\n            }\r\n\r\n            if (this.useGroupHeader) {\r\n                if (this.groupColumns[0][this.groupColumns[0].length - 1].fixed === 'right') {\r\n                    pagerBarCol.fixed = 'right';\r\n                }\r\n                pagerBarCol.rowspan = this.groupColumns.length;\r\n                this.groupColumns[0].push(pagerBarCol)\r\n            }\r\n\r\n            this.columns.push(pagerBarCol);\r\n        }\r\n\r\n\r\n        if (!this.fitColumns) {\r\n            this.sortColumnsByFixed();\r\n        }\r\n\r\n        this.columns.forEach((n, i) => {\r\n            if (n.visible === undefined) {\r\n                n.visible = true;\r\n            }\r\n\r\n            if (n['halign']) {\r\n                n.hAlign = n['halign'];\r\n            }\r\n\r\n            if (n.width === undefined) {\r\n                n.width = 100;\r\n            }\r\n\r\n            if (!n.id) {\r\n                n.id = 'treetable-header-' + (n.field || i);\r\n            }\r\n        });\r\n\r\n        const colWidthTotal = this.allColumnsWidth();\r\n        let fixedCols = 0;\r\n\r\n        const fixedRightColumns = this.columns.filter(n => n.fixed === 'right');\r\n        if (fixedRightColumns && fixedRightColumns.length) {\r\n            fixedRightColumns[0]['rightShadowCol'] = true;\r\n            fixedRightColumns[fixedRightColumns.length - 1]['lastColumn'] = true;\r\n        } else {\r\n            if (this.columns && this.columns.length) {\r\n                this.columns[this.columns.length - 1]['lastColumn'] = true;\r\n            }\r\n        }\r\n\r\n        const fixedLeftColumns = this.columns.filter(n => n.fixed === 'left');\r\n        if (fixedLeftColumns && fixedLeftColumns.length) {\r\n            fixedLeftColumns[fixedLeftColumns.length - 1]['leftShadowCol'] = true;\r\n        }\r\n\r\n        fixedCols = this.setCellWidthCss(colWidthTotal, fixedCols, cssRules);\r\n        this.setTableWidth(colWidthTotal);\r\n\r\n        this.fixedColumns = !!fixedCols;\r\n    }\r\n\r\n    private setCellWidthCss(colWidthTotal: any, fixedCols: number, cssRules: any[]) {\r\n\r\n\r\n        this.columns.forEach((n, index) => {\r\n            const isVisible = this.columnIsVisible(n);\r\n            const ruleName = this.columnCssName(n);\r\n\r\n            const cssRule = this.utils.getCssRule(ruleName, this.styleElement.sheet);\r\n            if (!cssRule) {\r\n                let stylecss = ruleName + ' { ';\r\n                stylecss += isVisible ? '' : 'display: none;';\r\n\r\n                if (this.fitColumns) {\r\n                    stylecss += `width: ${(n.width / colWidthTotal * 100).toFixed(2)}%;`;\r\n                } else {\r\n                    stylecss += `width: ${n.width}px;`;\r\n\r\n                    if (n.fixed) {\r\n                        if (n.fixed === 'left') {\r\n                            stylecss += `left: ${n.left}px`;\r\n                            fixedCols++;\r\n                        }\r\n\r\n                        if (n.fixed === 'right') {\r\n                            stylecss += `right: ${n.right}px`;\r\n                            fixedCols++;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                stylecss += '}';\r\n                cssRules.push(stylecss);\r\n            } else {\r\n                cssRule.style.display = isVisible ? '' : 'none';\r\n                if (this.fitColumns) {\r\n                    cssRule.style.width = `${(n.width / colWidthTotal * 100).toFixed(2)}%`;\r\n                } else {\r\n                    cssRule.style.width = `${n.width}px`;\r\n                    if (n.fixed) {\r\n                        if (n.fixed === 'left') {\r\n                            cssRule.style.left = `${n.left}px`;\r\n                        }\r\n\r\n                        if (n.fixed === 'right') {\r\n                            cssRule.style.right = `${n.right}px`;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        if (this.useGroupHeader) {\r\n            this.autoWidth = false;  // å¤è¡¨å¤´å¯ç¨åï¼èªå¨åå®½å¤±æ TFS 496088\r\n            this.checkGroupColumns();\r\n            var i = this.groupColumns.length - 2;\r\n            while (i >= 0) {\r\n                const groupHeaderColCsses = this.groupColumns[i].filter(col => !col.field).map(col => {\r\n                    let groupColCssName = `#${col.id}{ width: ${col.width}px`;\r\n\r\n                    if (col.fixed) {\r\n                        if (col.fixed === 'left') {\r\n                            groupColCssName += ';left:' + col.left + 'px';\r\n                        }\r\n\r\n                        if (col.fixed === 'right') {\r\n                            groupColCssName += ';right:' + col.right + 'px';\r\n                        }\r\n                    }\r\n\r\n                    return groupColCssName += '}';\r\n                });\r\n               \r\n                this.utils.appendCssRules2(groupHeaderColCsses, this.styleElement.sheet);\r\n                i--;\r\n            }\r\n        }\r\n\r\n\r\n        if (cssRules.length) {\r\n            this.utils.appendCssRules(cssRules, this.styleElement.sheet);\r\n        }\r\n        return fixedCols;\r\n    }\r\n\r\n    private setTableWidth(colWidthTotal: number) {\r\n        if (this.headerTable && this.bodyTable) {\r\n            if (!this.fitColumns && !this.autoFitColumns) {\r\n                this.headerTable.nativeElement.style.width = `${colWidthTotal}px`;\r\n                this.bodyTable.nativeElement.style.width = `${colWidthTotal}px`;\r\n            } else {\r\n                this.headerTable.nativeElement.style.width = '100%';\r\n                this.bodyTable.nativeElement.style.width = '100%';\r\n            }\r\n        }\r\n    }\r\n\r\n    private allColumnsWidth() {\r\n        return this.columns.reduce((r, c) => {\r\n            if (this.columnIsVisible(c)) {\r\n                return r + c.width;\r\n            } else {\r\n                return r;\r\n            }\r\n\r\n        }, 0);\r\n    }\r\n\r\n    onPageChange($event) {\r\n        this.pageChanged.emit($event);\r\n    }\r\n\r\n    onPageSizeChange($event) {\r\n        this.pageSizeChanged.emit($event);\r\n    }\r\n\r\n    updatePageInfo(pageInfo: { pageIndex?: number, pageSize?: number, total?: number, pageList?: number[] }) {\r\n        if (pageInfo && Object.keys(pageInfo).length) {\r\n\r\n            const obj: any = {};\r\n            if (pageInfo.total !== undefined) {\r\n                obj.totalItems = pageInfo.total;\r\n            }\r\n\r\n            if (pageInfo.pageIndex !== undefined) {\r\n                obj.currentPage = pageInfo.pageIndex;\r\n            }\r\n\r\n            if (pageInfo.pageSize !== undefined) {\r\n                obj.itemsPerPage = pageInfo.pageSize;\r\n            }\r\n\r\n            if (pageInfo.pageList !== undefined) {\r\n                obj.pageList = pageInfo.pageList;\r\n            }\r\n\r\n            this.paginationOptions = Object.assign(this.paginationOptions, obj);\r\n        }\r\n    }\r\n\r\n\r\n    private initPaginationOptions() {\r\n        return {\r\n            id: 'Farris-TreeTable-Pagination_' + this._UUID,\r\n            itemsPerPage: this.pageSize,\r\n            currentPage: this.pageIndex,\r\n            pageList: this.pageList,\r\n            totalItems: this.total,\r\n            remote: this.pagerOnServer\r\n        };\r\n    }\r\n\r\n    getNodeText(col: TreeTableColumn, rowdata, fast = false) {\r\n        if (col.isMultilingualField) {\r\n            const val = this.utils.getValue(col.field, rowdata);\r\n            if (this.localeService) {\r\n                const localeId = this.localeService.localeId || 'zh-CHS';\r\n                if (val && typeof val === 'object' && Object.keys(val).length > 0) {\r\n                    return val[localeId];\r\n                } else {\r\n                    return val;\r\n                }\r\n            }\r\n        } else {\r\n            return this.utils.getValue(col.field, rowdata, !fast);\r\n        }\r\n    }\r\n\r\n    private initNodeStatus() {\r\n        if (!this.singleSelect) {\r\n            if (this.checkValues && this.checkValues.length) {\r\n                this.checkedNodes(this.checkValues, false, false);\r\n            }\r\n            if (this.selectValues && this.selectValues.length && !this.onlySelectSelf) {\r\n                this.selectNodes(this.selectValues, false, false);\r\n            }\r\n        } else {\r\n            if (this.selectValue) {\r\n                this.selectNode(this.selectValue, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** æ³¨åå¿«æ·é® */\r\n    private registerShortcuts() {\r\n        if (this.showFilterBar && this._hotKeys) {\r\n            this._hotKeys.addShortcut({ keys: 'enter', element: this.inputGroup.textbox.nativeElement }).subscribe(() => {\r\n                this.onSearch();\r\n            });\r\n        }\r\n\r\n        this.setFindText(this.enableFindText);\r\n    }\r\n\r\n    private setFindText(enable = true) {\r\n        this.enableFindText = enable;\r\n        if (this.enableFindText && this._hotKeys) {\r\n            // æ¥è¯¢å·¥å·æ¡\r\n            this.findKeysHandler = this._hotKeys.addShortcut({ keys: 'control.shift.f' }).subscribe((e) => {\r\n                if (this.enableFindText) {\r\n                    this.showFindInput = true;\r\n                    this.detectChanges();\r\n                }\r\n            });\r\n        } else {\r\n            if (this.showFindInput) {\r\n                this.showFindInput = false;\r\n                this.cdRef.detectChanges();\r\n            }\r\n            if (this.findKeysHandler) {\r\n                this.findKeysHandler.unsubscribe();\r\n                this.findKeysHandler = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getCustomCls(rowNode: RowNode, field: string = '', clsType: 'row' | 'cell' = 'row') {\r\n        const cls = {};\r\n        let fn = this.rowStyler;\r\n        if (clsType === 'cell') {\r\n            fn = this.cellStyler;\r\n        }\r\n\r\n        if (fn) {\r\n            const rowCls = fn(rowNode.node, field);\r\n            if (rowCls) {\r\n                let arrcls = [];\r\n                if (typeof rowCls === 'string') {\r\n                    arrcls = [rowCls];\r\n                } else {\r\n                    if (Array.isArray(rowCls)) {\r\n                        arrcls = rowCls;\r\n                    }\r\n                }\r\n\r\n                if (arrcls.length) {\r\n                    const rowClsObj = {};\r\n                    arrcls.forEach(c => {\r\n                        rowClsObj['' + c] = true;\r\n                    });\r\n                    const _cls = { ...rowClsObj, ...cls };\r\n                    return _cls;\r\n                } else {\r\n                    return rowCls;\r\n                }\r\n            } else {\r\n                return cls;\r\n            }\r\n        } else {\r\n            return cls;\r\n        }\r\n    }\r\n\r\n    getRowCls(rowNode: RowNode, field?: string) {\r\n        return this.getCustomCls(rowNode, 'row');\r\n    }\r\n\r\n    getCellCls(rowNode: RowNode, field: string) {\r\n        return this.getCustomCls(rowNode, field, 'cell');\r\n    }\r\n\r\n    getRealColWidth(currentCol: TreeTableColumn) {\r\n        if (this.columns && this.columns.length && this.fitColumns) {\r\n            const colWidthTotal = this.columns.reduce((r, c) => {\r\n                return r + (this.columnIsVisible(c) && (r.field !== NODES_PAGER_COLUMN_FIELD  || r.fixedWidth)? c.width : 0);\r\n            }, 0);\r\n\r\n            if (this.columnIsVisible(currentCol)) {\r\n                if ( currentCol.field !== NODES_PAGER_COLUMN_FIELD &&  !currentCol.fixedWidth) {\r\n                    return (currentCol.width / colWidthTotal * 100).toFixed(2) + '%';\r\n                } else {\r\n                    return (currentCol.width || 120) + 'px';\r\n                }\r\n            } else {\r\n                return 0;\r\n            }\r\n        }\r\n        return currentCol.width + 'px';\r\n    }\r\n\r\n    @HostListener('window:resize')\r\n    onResized() {\r\n        this.resizeSer.windowResized();\r\n    }\r\n\r\n    private setRightFixedColumnShadow() {\r\n        if (this.psRef && this.psRef.directiveRef) {\r\n            const ps = (this.psRef.directiveRef as any).instance;\r\n            if (!ps) {\r\n                return;\r\n            }\r\n            const { containerWidth, scrollbarXLeft, contentWidth } = ps;\r\n            if (containerWidth + scrollbarXLeft < contentWidth) {\r\n\r\n                const fixedRightColumns = this.columns.filter(n => n.fixed === 'right');\r\n                const ruleName = `#${this.id}.f-treetable--fixed-columns`;\r\n                if (fixedRightColumns && fixedRightColumns.length) {\r\n                    const fixedRightCssRuleKey = `${ruleName} [r-tt-shadow-col]::before`;\r\n                    const rightCSSRule = `${fixedRightCssRuleKey}{\r\n                        box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\r\n                    }`;\r\n\r\n                    this.utils.appendCssRules([rightCSSRule], this.styleElement.sheet);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private setFixedColumnShadow(x, e) {\r\n        const fixedLeftColumns = this.columns.filter(n => n.fixed === 'left');\r\n        const fixedRightColumns = this.columns.filter(n => n.fixed === 'right');\r\n        const ruleName = `#${this.id}.f-treetable--fixed-columns`;\r\n        let fixedLeftCssRuleKey = '';\r\n        let fixedRightCssRuleKey = '';\r\n        let leftCSSRule = '';\r\n        let rightCSSRule = '';\r\n        if (fixedLeftColumns && fixedLeftColumns.length) {\r\n            const lastFixedLeftColumn = fixedLeftColumns[fixedLeftColumns.length - 1];\r\n            fixedLeftCssRuleKey = `${ruleName} [field=\"${lastFixedLeftColumn.field}\"]::after`;\r\n            leftCSSRule = `${fixedLeftCssRuleKey}{\r\n                box-shadow:#d9d9d9 12px 0px 8px -12px inset;\r\n            }`;\r\n        }\r\n\r\n        if (fixedRightColumns && fixedRightColumns.length) {\r\n            fixedRightCssRuleKey = `${ruleName} [r-tt-shadow-col]::before`;\r\n            rightCSSRule = `${fixedRightCssRuleKey}{\r\n                box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\r\n            }`;\r\n        }\r\n\r\n\r\n        if (x === 0) {\r\n            // ç§»é¤å·¦ä¾§åºå®åé´å½±æ ·å¼\r\n            if (fixedLeftCssRuleKey) {\r\n                this.utils.removeCssRule(fixedLeftCssRuleKey, this.styleElement.sheet);\r\n            }\r\n        } else if ((x + e.srcElement.offsetWidth).toFixed() == e.srcElement.scrollWidth) {\r\n            // ç§»é¤å³ååºå®åé´å½±æ ·å¼\r\n            if (fixedRightCssRuleKey) {\r\n                this.utils.removeCssRule(fixedRightCssRuleKey, this.styleElement.sheet);\r\n            }\r\n        } else {\r\n            // æ·»å å·¦å³åºå®åæ ·å¼\r\n            const arr = [];\r\n            if (leftCSSRule) {\r\n                arr.push(leftCSSRule);\r\n            }\r\n\r\n            if (rightCSSRule) {\r\n                arr.push(rightCSSRule);\r\n            }\r\n\r\n            this.utils.appendCssRules(arr, this.styleElement.sheet);\r\n        }\r\n    }\r\n\r\n    onScrollX(e: any) {\r\n        if (this.showHeader && this.headerBox) {\r\n            const x = e.srcElement.scrollLeft;\r\n            this.state.scrollX = x;\r\n            // this.renderer.setStyle(this.headerBox.nativeElement.querySelector('table'), 'transform', `translate3d(-${x}px, 0px, 0px)`);\r\n            this.headerBox.nativeElement.scrollLeft = x;\r\n\r\n            this.setFixedColumnShadow(x, e);\r\n        }\r\n    }\r\n\r\n    onScrollY(e: any) {\r\n        if (this.virtualized) {\r\n            const scrollTop = e.target.scrollTop;\r\n            this.renderData(scrollTop);\r\n        }\r\n    }\r\n\r\n    private renderData(scrolltop: number) {\r\n        const { data, topHideHeight, bottomHideHeight } = this.scrollLoader.getRowNodes(scrolltop);\r\n        this.state.scrollY = scrolltop;\r\n        this.serializedValue = data;\r\n        this.topHideHeight = topHideHeight;\r\n        this.bottomHideHeight = bottomHideHeight;\r\n\r\n        this.detectChanges();\r\n        this.setNewColumnsWidth();\r\n    }\r\n\r\n    onSearchValueChange($event) {\r\n        if (!$event) {\r\n            this.onClearSearchValue();\r\n        }\r\n\r\n        this.searchValueChange.emit(this.searchData);\r\n    }\r\n\r\n    onClearSearchValue() {\r\n        this.searchData.value = '';\r\n        this.state.searched = false;\r\n        this.clearSearchValue.emit();\r\n    }\r\n\r\n    onCellClick(event: Event, col: any, node: any) {\r\n        this.cellClick.emit({ event, col, node });\r\n    }\r\n\r\n    trackByFn(index, rowNode) {\r\n        return rowNode.id;\r\n    }\r\n    /**\r\n     * æ ¼å¼åæ°æ®\r\n     */\r\n    formatData(col: any, data: any, formatter: any) {\r\n        // const val = this.utils.getValue(field, data, true );\r\n        const val = this.getNodeText(col, data);\r\n        if (formatter && formatter.type === 'timeago') {\r\n            if (!formatter.options) {\r\n                formatter.options = { locale: this.localeService.localeId}\r\n            } else {\r\n                if (!formatter.options.locale) {\r\n                    formatter.options.locale = this.localeService.localeId;\r\n                }\r\n            }\r\n        }\r\n        return this.colFormatSer.format(val, data, formatter, {locale: this.localeService.localeId });\r\n    }\r\n\r\n    columnsChanged() {\r\n        this.checkColumnOption();\r\n        this.detectChanges();\r\n    }\r\n\r\n    private ttc2columns(list: QueryList<TreeTableColumnDirective>) {\r\n        return list.map((n: TreeTableColumnDirective) => {\r\n            return {\r\n                field: n.field,\r\n                title: n.title,\r\n                align: n.align,\r\n                hAlign: n.hAlign,\r\n                width: n.width,\r\n                formatter: n.formatter\r\n            };\r\n        });\r\n    }\r\n\r\n    private reSetSize() {\r\n        if (this.fit) {\r\n            const parentEl = this.el.nativeElement.parentNode;\r\n            this.setWidth(parentEl.offsetWidth)\r\n            this.height = parentEl.offsetHeight;\r\n\r\n            // å¦æå¨ä½¿ç¨æ¶ï¼ä¸ºç»ä»¶è®¾ç½®çé«åº¦ï¼åä»¥æ­¤å¼ä¸ºåï¼ä»æ¯æ åºå®å¼ ï¼ä¸æ¯æ ç¾åæ¯\r\n            if (this.el.nativeElement.style.height) {\r\n                let h = this.el.nativeElement.style.height;\r\n                if (h.indexOf('px') > -1) {\r\n                    h = parseInt(h.replace('px', ''), 10);\r\n                    if (h > 0) {\r\n                        this.height = h;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderVirtualRowNodes(nodePosY = null) {\r\n        if (this.virtualized) {\r\n            const scrollY = nodePosY !== null && nodePosY !== undefined ? nodePosY: this.state.scrollY;\r\n            const _rownodes = this.scrollLoader.getRowNodes(scrollY);\r\n            this.serializedValue = _rownodes.data;\r\n            this.topHideHeight = _rownodes.topHideHeight;\r\n            this.bottomHideHeight = _rownodes.bottomHideHeight;\r\n            this.detectChanges();\r\n\r\n            if (nodePosY !== null && nodePosY !== undefined) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    setTimeout(() => {\r\n                        this.psRef.directiveRef.elementRef.nativeElement.scrollTop = nodePosY;\r\n                    }, 20);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    updateSerializedValue(nodePosY: any = null) {\r\n        this.serializedValue = [];\r\n        this.searchHandle.allNodes = [];\r\n        this.state.rowNodes = [];\r\n\r\n        this.serializeNodes(null, this.data, 0, true);\r\n        if (this.virtualized && this.fixedHeader) {\r\n            this.renderVirtualRowNodes(nodePosY);\r\n        } else {\r\n            this.serializedValue = this.state.rowNodes;\r\n            this.detectChanges();\r\n            // if (emitChanges) {\r\n            // }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å°æ èç¹æ°æ®åºååä¸ºRowNode\r\n     * @param parent ç¶çº§èç¹\r\n     * @param nodes æ èç¹éå\r\n     * @param level çº§å«\r\n     * @param visible æ¯å¦å¯è§\r\n     */\r\n    serializeNodes(parent: TreeNode, nodes: TreeNode[], level: number, visible: boolean, parentIds?: any[]) {\r\n        if (nodes && nodes.length) {\r\n\r\n            if (!nodes[0].data) {\r\n                return;\r\n            }\r\n\r\n            nodes.forEach((node, index) => {\r\n                node.parent = parent;\r\n\r\n                if (!node.hasOwnProperty('selectable')) {\r\n                    node.selectable = true;\r\n                }\r\n\r\n                if (!node.hasOwnProperty('showIcon')) {\r\n                    node.showIcon = true;\r\n                }\r\n\r\n                if (this.onlySelectLeaf === 'yes' && node.selectable) {\r\n                    node.selectable = !!node.leaf;\r\n                }\r\n                const keyid = node.data[this.idField];\r\n                node.id = keyid;\r\n                const isSelected = this.findIndexInSelection(node) > -1;\r\n\r\n                const isChecked = this.findIndexInCheckeds(node) > -1;\r\n                const isLast = index === nodes.length - 1;\r\n                const isFirst = index === 0;\r\n                let parents = [];\r\n                let parentRn = null;\r\n                if (parent) {\r\n                    const parentID = parent.data[this.idField];\r\n                    const _parents = parentIds || [];\r\n                    parents = parents.concat(_parents.map(n => n));\r\n                    parents.push(parentID);\r\n                    parentRn = this.state.rowNodes.find(n => n.id === parent.id);\r\n                }\r\n\r\n                const rowNode: RowNode = {\r\n                    id: keyid,\r\n                    node,\r\n                    parent,\r\n                    level,\r\n                    visible: visible && (parent ? parent.expanded : true),\r\n                    isSelected,\r\n                    isChecked,\r\n                    parents,\r\n                    parentRowNode: parentRn,\r\n                    index: this.state.rowNodes.length,\r\n                    last: isLast,\r\n                    first: isFirst\r\n                };\r\n                // this.serializedValue.push(rowNode);\r\n                this.state.rowNodes.push(rowNode);\r\n                this.serializeNodes(node, node.children, level + 1, rowNode.visible, parents);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤æ­æå®çèç¹æ¯å¦è¢«éä¸­\r\n     * @param node æ èç¹\r\n     */\r\n    isSelected(node: TreeNode): boolean {\r\n        if (this.singleSelect) {\r\n            if (node && this.selectedRow) {\r\n                return node.data[this.idField] === this.selectedRow.data[this.idField];\r\n            }\r\n            return false;\r\n        } else {\r\n            if (this.selections && this.selections.length) {\r\n                return this.selections.findIndex(n => n.data[this.idField] === node.data[this.idField]) > -1;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    /** å¤æ­å½åèç¹çé©éç¶æ */\r\n    isChecked(node: TreeNode): boolean {\r\n        if (node && this.checkeds) {\r\n            if (this.checkeds instanceof Array) {\r\n                return this.checkeds.findIndex((v) => {\r\n                    return v.data[this.idField] === node.data[this.idField];\r\n                }) > -1;\r\n            }\r\n\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    private unSelectedCurrentRowEmit() {\r\n        const currSelected = this.selectedRow;\r\n        if (currSelected) {\r\n            this.nodeUnSelect.emit({ node: currSelected, type: 'row', instance: this });\r\n        }\r\n    }\r\n\r\n    private _singleSelectNode(e: SelectEventArgs) {\r\n\r\n        this.clearSelections();\r\n        this.selectedRow = e.rowNode.node;\r\n        this.selectRowIndex = e.rowIndex;\r\n        this.selections = [e.rowNode.node];\r\n        e.rowNode.isSelected = true;\r\n\r\n        if (this.showCheckbox) {\r\n            e.rowNode.isChecked = true;\r\n            this.clearCheckeds();\r\n            this.setCheckeds(e.rowNode);\r\n        }\r\n\r\n        const sp: NodeSelectedParam = {\r\n            originalEvent: e.originalEvent,\r\n            node: e.rowNode.node, type: 'row',\r\n            index: e.rowIndex,\r\n            parents: e.rowNode.parents,\r\n            instance: this\r\n        };\r\n        this.nodeSelected.emit(sp);\r\n    }\r\n\r\n    private _singleUnSelectNode(e: SelectEventArgs) {\r\n        this.selectedRow = null;\r\n        this.selectRowIndex = -1;\r\n        e.rowNode.isSelected = false;\r\n        e.rowNode.isChecked = false;\r\n        this.selections = [];\r\n\r\n        this.nodeUnSelect.emit({\r\n            originalEvent: e.originalEvent,\r\n            node: e.rowNode.node, type: 'row', parents: e.rowNode.parents,\r\n            instance: this\r\n        });\r\n    }\r\n\r\n    private __singleSelectNode(event: SelectEventArgs, selected = false) {\r\n        if (!selected) {\r\n            this.unSelectedCurrentRowEmit();\r\n            this._singleSelectNode(event);\r\n        } else {\r\n            if (!this.keepSelect) {\r\n                this._singleUnSelectNode(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    private __multiSelectNode(event: SelectEventArgs, selected) {\r\n        const rowNode = event.rowNode;\r\n        if (selected) {\r\n            this.unSelectedCurrentRowEmit();\r\n            this.singleSelectWhenMultiSelect(rowNode, true);\r\n            this.nodeSelected.emit({\r\n                originalEvent: event.originalEvent, node: rowNode.node,\r\n                type: 'row', index: event.rowIndex, parents: rowNode.parents,\r\n                instance: this\r\n            });\r\n        } else {\r\n            if (!this.keepSelect) {\r\n                this.singleSelectWhenMultiSelect(rowNode, false);\r\n                this.nodeUnSelect.emit({\r\n                    originalEvent: event.originalEvent, node: rowNode.node,\r\n                    type: 'row', index: event.rowIndex, parents: rowNode.parents,\r\n                    instance: this\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è¡åå»äºä»¶\r\n     */\r\n    handleRowClick(event: SelectEventArgs) {\r\n        const rowNode = event.rowNode;\r\n        rowNode.node['elementRef'] = event.originalEvent.target;\r\n        const selected = this.isSelected(rowNode.node);\r\n\r\n        if (this.singleSelect) {\r\n            this.__singleSelectNode(event, selected);\r\n        } else {\r\n            rowNode.indeterminate = false;\r\n            if (this.onlySelectSelf) {\r\n                this.__multiSelectNode(event, !selected);\r\n            } else {\r\n                rowNode.isSelected = !selected;\r\n                this.state.rowNodes.find(n => n.id === rowNode.id).isSelected = !selected;\r\n                this.setSelections(rowNode);\r\n\r\n                const rowSelectChangeParams: NodeSelectedParam = {\r\n                    originalEvent: event.originalEvent, node: rowNode.node,\r\n                    type: 'row', index: event.rowIndex, parents: rowNode.parents,\r\n                    instance: this\r\n                };\r\n\r\n                if (rowNode.isSelected) {\r\n                    this.nodeSelected.emit(rowSelectChangeParams);\r\n                } else {\r\n                    this.nodeUnSelect.emit(rowSelectChangeParams);\r\n                }\r\n\r\n\r\n                if (this.checkOnSelect) {\r\n                    rowNode.isChecked = !selected;\r\n                    this.state.rowNodes.find(n => n.id === rowNode.id).isChecked = !selected;\r\n                    this.setCheckeds(rowNode);\r\n                    const nodes = this.cascadeNodes(rowNode, rowNode.isChecked);\r\n                    this.ttService.onChangeCheckboxStatus(rowNode);\r\n\r\n                    if (rowNode.isChecked) {\r\n                        this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes, instance: this });\r\n                    } else {\r\n                        this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes, instance: this });\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            if (this.checkOnSelect) {\r\n                const ids = this.checkeds.map(tn => tn.id);\r\n                this.checkValues = ids;\r\n                this.checkValuesChange.emit(ids);\r\n            }\r\n        }\r\n\r\n        this.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * å¸¦æcheckbox çåé\r\n     * @param rowNode å½åèç¹\r\n     */\r\n    private singleSelectWhenMultiSelect(rowNode: RowNode, flag: boolean) {\r\n        if (this.checkOnSelect) {\r\n            rowNode.isChecked = flag;\r\n            this.cascadeNodes(rowNode, rowNode.isChecked);\r\n            this.setCheckeds(rowNode);\r\n\r\n            this.ttService.onChangeCheckboxStatus(rowNode);\r\n\r\n            if (rowNode.isChecked) {\r\n                this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });\r\n            } else {\r\n                this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });\r\n            }\r\n        }\r\n\r\n        this.clearSelections();\r\n\r\n        if (this.onlySelectSelf) {\r\n            this.selectedRow = rowNode.node;\r\n        }\r\n        rowNode.isSelected = flag;\r\n        this.setSelections(rowNode);\r\n    }\r\n\r\n    private selectWhenChecked(rowNode: RowNode, flag: boolean, event: any) {\r\n        if (rowNode.node.selectable) {\r\n            rowNode.isChecked = flag;\r\n        }\r\n        this.setCheckeds(rowNode, false);\r\n        if (this.selectOnCheck) {\r\n            if (this.onlySelectSelf) {\r\n                if (flag || (this.selectedRow && this.selectedRow.id === rowNode.id)) {\r\n                    this.clearSelections();\r\n                }\r\n            }\r\n\r\n            if (this.singleSelect && this.showCheckbox) {\r\n                this.clearCheckeds();\r\n            }\r\n            if (rowNode.node.selectable) {\r\n                rowNode.isSelected = flag;\r\n            }\r\n            this.setSelections(rowNode);\r\n\r\n            this.state.rowNodes.find(n => n.id === rowNode.id).isSelected = flag;\r\n\r\n            if (rowNode.isSelected) {\r\n                this.nodeSelected.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });\r\n            } else {\r\n                this.nodeUnSelect.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });\r\n            }\r\n        }\r\n    }\r\n\r\n    private isInArray(rowNode: RowNode, items: TreeNode[]) {\r\n        if (items && items.length === 0) {\r\n            return false;\r\n        }\r\n        return items.findIndex(i => i.data[this.idField] === rowNode.id) > -1;\r\n    }\r\n\r\n    private setSelections(rowNode: RowNode) {\r\n        if (rowNode.isSelected) {\r\n            if (!this.selections) {\r\n                this.selections = [];\r\n            }\r\n            if (!this.isInArray(rowNode, this.selections)) {\r\n                // this.selections = [...this.selections, rowNode.node];\r\n                this.selections.push(rowNode.node);\r\n            }\r\n        } else {\r\n            if (this.selections) {\r\n                const i = this.selections.findIndex((tn: TreeNode) => tn.data[this.idField] === rowNode.node.data[this.idField]);\r\n                if (i !== -1) {\r\n                    this.selections.splice(i, 1);\r\n                }\r\n                // this.selections = this.selections.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);\r\n            }\r\n        }\r\n    }\r\n\r\n    private setCheckeds(rowNode: RowNode, updated = true) {\r\n        if (rowNode.isChecked) {\r\n            if (!this.checkeds) {\r\n                this.checkeds = [];\r\n            }\r\n            if (!this.isInArray(rowNode, this.checkeds)) {\r\n                this.checkeds.push(rowNode.node);\r\n            }\r\n        } else {\r\n            if (this.checkeds) {\r\n                const i = this.checkeds.findIndex((tn: TreeNode) => tn.data[this.idField] === rowNode.node.data[this.idField]);\r\n                if (i !== -1) {\r\n                    this.checkeds.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (updated) {\r\n            this.checkeds = [ ...this.checkeds];\r\n        }\r\n    }\r\n\r\n    private getDiffrentData(data: TreeNode[]) {\r\n        if (data.length) {\r\n            const _nodes = [];\r\n            data.forEach(n => {\r\n                if (_nodes.findIndex(t => t.data[this.idField] === n.data[this.idField]) === -1) {\r\n                    _nodes.push(n);\r\n                }\r\n            });\r\n            return _nodes;\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    private cascadeCheckedNode(rowNode: RowNode, checked: boolean, sync = false): TreeNode[] {\r\n        const nodes: TreeNode[] = [];\r\n        if (rowNode.node.selectable) {\r\n            rowNode.isChecked = checked;\r\n        }\r\n        this.setCheckeds(rowNode, false);\r\n        if (this.selectOnCheck) {\r\n            if (sync) {\r\n                const status = this.isIndeterminate(rowNode) !== 2;\r\n                checked = status ? checked: false;\r\n            }\r\n\r\n            if (rowNode.node.selectable) {\r\n                rowNode.isSelected = checked;\r\n                this.setSelections(rowNode);\r\n            }\r\n        }\r\n        if (!this.isInArray(rowNode, nodes)) {\r\n            nodes.push(rowNode.node);\r\n        }\r\n        return nodes;\r\n    }\r\n\r\n    /**\r\n     * åä¸çº§èéä¸­\r\n     * @param node å½åèç¹\r\n     * @param checked éä¸­ç¶æ\r\n     * è¿ååå½±åçè¡\r\n     */\r\n    propagateSelectionDown(rowNode: RowNode, checked: boolean) {\r\n        let nodes = this.cascadeCheckedNode(rowNode, checked);\r\n        if (this.cascadeCheck && this.cascadeDown && rowNode.node.children && rowNode.node.children.length) {\r\n            rowNode.node.children.forEach((v, i) => {\r\n                const rn = this.state.rowNodes.find((row: RowNode) => row.id === v.data[this.idField]);\r\n                if (rn) {\r\n                    rn.indeterminate = false;\r\n                    if (rn.node.selectable) {\r\n                        rn.isChecked = checked;\r\n                    }\r\n                    nodes = nodes.concat(this.propagateSelectionDown(rn, checked));\r\n                    this.ttService.onChangeCheckboxStatus(rn);\r\n                }\r\n            });\r\n        }\r\n\r\n        return nodes;\r\n    }\r\n\r\n    /**\r\n     * åä¸çº§èéä¸­\r\n     */\r\n    propagateSelectionUp(rowNode: RowNode, checked: boolean) {\r\n        const nodes = this.cascadeCheckedNode(rowNode, checked);\r\n        if (this.cascadeCheck && this.cascadeUp && rowNode.node.parent) {\r\n            if (rowNode.parents && rowNode.parents.length) {\r\n                const rns: RowNode[] = [];\r\n                rowNode.parents.forEach((n, i) => {\r\n                    const rn = this.findRowNode(n);\r\n                    if (rn && rn.node.selectable) {\r\n                        // rn.isChecked = checked;\r\n                        const checkedNodes = this.cascadeCheckedNode(rn, checked, true);\r\n                        if (checkedNodes.length) {\r\n                            nodes.push(checkedNodes[0]);\r\n                        }\r\n                        rns.push(rn);\r\n                    }\r\n                });\r\n\r\n                rns.reverse().forEach(rn => {\r\n                    this.updateCheckboxStatus(rn);\r\n                });\r\n            }\r\n        }\r\n\r\n        return nodes;\r\n    }\r\n\r\n    // èç¹ç¶æï¼éä¸­ï¼å¾éï¼åæ­¥æ´æ°\r\n    private updateNodeStatus() {\r\n        if (this.state.searched) {\r\n            const rowNodes = this.state.searchRowNodes;\r\n            if (!rowNodes) {\r\n                return;\r\n            }\r\n            rowNodes.forEach(rn => {\r\n                const checkedItem: RowNode = this.state.rowNodes.find(n => n.id === rn.id);\r\n\r\n                const chked = checkedItem ? checkedItem.isChecked : false;\r\n                rn.indeterminate = false;\r\n                rn.isChecked = chked;\r\n\r\n                if (this.selectOnCheck) {\r\n                    if (checkedItem.isSelected != rn.isChecked) {\r\n                        checkedItem.isSelected = checkedItem.isChecked;\r\n                    }\r\n                    rn.isSelected = checkedItem.isSelected;\r\n                }\r\n            });\r\n        } else {\r\n            if (this.selectOnCheck) {\r\n                this.state.rowNodes.forEach(rn => {\r\n                    if (this.onlySelectSelf) {\r\n                        if (!this.selections || !this.selections.length ) {\r\n                            rn.isSelected = false;\r\n                        } else {\r\n                            if (this.selections[0].id === rn.id) {\r\n                                rn.isSelected = true;\r\n                            } else {\r\n                                rn.isSelected = false;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (rn.isSelected != rn.isChecked) {\r\n                            rn.isSelected = rn.isChecked;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * çº§èéæ©èç¹\r\n     * @param rowNode å½åèç¹\r\n     * @param checked æ¯å¦é©é\r\n     */\r\n    private cascadeNodes(rowNode: RowNode, checked: boolean) {\r\n        let checkedNodes = this.propagateSelectionDown(rowNode, checked);\r\n        checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));\r\n        checkedNodes = this.getDiffrentData(checkedNodes);\r\n\r\n        this.updateNodeStatus();\r\n\r\n        this.updateAllCheckboxStatus();\r\n\r\n        return checkedNodes.filter(n => {\r\n            return n.selectable;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * è¡Checkbox éä¸­ååäºä»¶\r\n     * @param event é¼ æ ç¹å»äºä»¶å¯¹è±¡\r\n     * @param rowNode å½åæ èç¹\r\n     */\r\n    toggleNodeWithCheckbox(event: Event, rowNode: RowNode, checked: boolean): any {\r\n        this.state.rowNodes.find(n => n.id === rowNode.id).isChecked = checked;\r\n        rowNode.indeterminate = false;\r\n\r\n        const data = this.cascadeNodes(rowNode, checked);\r\n\r\n        this.ttService.onChangeCheckboxStatus(rowNode);\r\n        if (checked) {\r\n            this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });\r\n        } else {\r\n            this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });\r\n        }\r\n\r\n        this.selectWhenChecked(rowNode, checked, event);\r\n\r\n        if (this.onlySelectSelf && checked) {\r\n            this.selectedRow = rowNode.node;\r\n        }\r\n\r\n        this.checkeds = [...this.checkeds];\r\n        this.detectChanges();\r\n        event.stopPropagation();\r\n    }\r\n\r\n    /**\r\n     * å¨é\r\n     * @param event é¼ æ äºä»¶å¯¹è±¡\r\n     * @param checked æ¯å¦éä¸­\r\n     */\r\n    toggleNodesWithCheckbox(event: Event, checked: boolean) {\r\n        if (checked) {\r\n            if (this.data && this.data.length) {\r\n                this.checkAllNodes({ originalEvent: event, checked, instance: this });\r\n            }\r\n        } else {\r\n            this.selections = null;\r\n            this.unCheckAllNodes({ originalEvent: event, checked, instance: this});\r\n        }\r\n\r\n        this.detectChanges();\r\n    }\r\n\r\n    /** æ´æ°å¨écheckbox çç¶æ */\r\n    private updateAllCheckboxStatus() {\r\n        if (this['checkall_CLICKED']) {\r\n            return;\r\n        }\r\n\r\n        const status = this.isIndeterminate();\r\n        if (this.showCheckAll && !this.singleSelect && this.showCheckbox) {\r\n            if (status !== undefined) {\r\n                if (this.headerCheckboxCmp) {\r\n                    this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = status === 2;\r\n                    this.headerCheckboxCmp.checked = status === 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** æ´æ°ç¶èç¹checkbox éä¸­ç¶æ */\r\n    private updateParentCheckboxStatus(rowNode: RowNode) {\r\n        const pNodes = [];\r\n        rowNode.parents.forEach(rnid => {\r\n            const rn = this.findRowNode(rnid);\r\n            if (rn) {\r\n                pNodes.push(rn);\r\n            }\r\n        });\r\n\r\n        pNodes.reverse().forEach(rn => {\r\n            this.updateCheckboxStatus(rn);\r\n        });\r\n    }\r\n    /** æ´æ°Nä¸ªç¶èç¹å¤éæ¡ä¸­çéä¸­ç¶æ */\r\n    private updateParentsCheckStatus(parentIds: any) {\r\n        let pids = [];\r\n        parentIds.forEach((ids: any) => {\r\n            pids = [...pids, ...ids];\r\n        });\r\n\r\n        pids = Array.from(new Set(pids));\r\n\r\n        const pRowNodes = this.findRowNodes(pids);\r\n\r\n        pRowNodes.sort((r, n) => {\r\n            return n.level - r.level;\r\n        }).forEach(rn => {\r\n            this.updateCheckboxStatus(rn);\r\n        });\r\n\r\n    }\r\n\r\n    /** æ´æ°èç¹ä¸­checkboxçç¶æ */\r\n    private updateCheckboxStatus(rowNode: RowNode) {\r\n        const status = this.isIndeterminate(rowNode);\r\n        if (status !== undefined && rowNode.node.selectable) {\r\n            rowNode.indeterminate = status === 2;\r\n            this.ttService.onChangeCheckboxStatus(rowNode);\r\n        }\r\n    }\r\n\r\n    /** å¤æ­æå®èç¹checkbox çç¶æ\r\n     * 0ï¼å¨ä¸éï¼ 1ï¼ å¨é¨éä¸­ï¼ 2ï¼æéä¸­çä¹ææ²¡éä¸­ç\r\n     */\r\n    private isIndeterminate(rowNode?: RowNode): any {\r\n        const status = this.getCheckboxStatus(rowNode);\r\n        if (status !== undefined) {\r\n            let checked = false;\r\n            if (status === 2) {\r\n                checked = false;\r\n            } else {\r\n                checked = !!status;\r\n            }\r\n            if (rowNode && rowNode.node.selectable) {\r\n                rowNode.isChecked = checked;\r\n                this.setCheckeds(rowNode, false);\r\n            }\r\n        }\r\n        return status;\r\n    }\r\n\r\n    /**\r\n     * è¿åç¶çº§èç¹checkbox çç¶æã0ï¼ä¸éä¸­ï¼ 1ï¼ éä¸­ï¼ 2ï¼ä¸ç¡®å®\r\n     * @param rowNode ç¶çº§èç¹ï¼ä¸ºç©ºæ¶è¿åå¨écheckbox çç¶æ\r\n     */\r\n    private getCheckboxStatus(rowNode?: RowNode) {\r\n        let uncheckedLength = 0;\r\n        let checkedLength = 0;\r\n        let len = 0;\r\n        let childNodes = [];\r\n        if (rowNode) {\r\n            childNodes = rowNode.node.children|| [];\r\n\r\n            if (!childNodes.filter(n => n.selectable).length) {\r\n                return rowNode.isChecked;\r\n            }\r\n\r\n        } else {\r\n            childNodes = this.state.rowNodes;\r\n        }\r\n        len = childNodes.length;\r\n\r\n        childNodes.forEach(n => {\r\n            let rn = n;\r\n            if (rowNode) {\r\n                rn = this.findRowNode(n.data[this.idField]);\r\n            }\r\n            if (rn && !rn.indeterminate) {\r\n                if (rn.isChecked) {\r\n                    checkedLength++;\r\n                } else {\r\n                    uncheckedLength++;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (len === 0) {\r\n            return undefined;\r\n        }\r\n        let flag = 0;\r\n        if (uncheckedLength === len) {\r\n            flag = 0;\r\n        } else {\r\n            if (checkedLength === len) {\r\n                flag = 1;\r\n            } else {\r\n                flag = 2;\r\n            }\r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    private findIndexIn(node: TreeNode, treeNodes: TreeNode[]) {\r\n        let index = -1;\r\n        if (treeNodes && treeNodes.length) {\r\n            index = treeNodes.findIndex((v, i) => {\r\n                return this.equals(v, node);\r\n            });\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    /**\r\n     * å¨éä¸­çéåä¸­æ¥æ¾æå®èç¹çç´¢å¼\r\n     * @param node æ èç¹\r\n     */\r\n    findIndexInCheckeds(node: TreeNode): number {\r\n        return this.findIndexIn(node, this.checkeds);\r\n    }\r\n\r\n    /**\r\n     * å¨éä¸­çéåä¸­æ¥æ¾æå®èç¹çç´¢å¼\r\n     * @param node æ èç¹\r\n     */\r\n    findIndexInSelection(node: TreeNode): number {\r\n        return this.findIndexIn(node, this.selections);\r\n    }\r\n\r\n    /** å¯¹æ¯ä¸¤ä¸ªèç¹æ¯å¦åä¸ä¸ªèç¹ */\r\n    equals(target: TreeNode, source: TreeNode): boolean {\r\n        return target.data[this.idField] === source.data[this.idField];\r\n    }\r\n\r\n    /**\r\n     * å±å¼ææèç¹\r\n     * @param rowNode å±å¼æ­¤èç¹ä¸çææèç¹ï¼å¦æä¸ºç©ºï¼åå±å¼ææèç¹\r\n     * @param deep è®¾ç½®ä¸ºtrue æ¶ï¼å½åèç¹ä¸çææå­èç¹å¨é¨å±å¼, é»è®¤ false\r\n     * @param childrenEmptyEmitExpand  å½æ²¡æå­èç¹æ¯å¦è§¦åå±å¼äºä»¶ï¼é»è®¤ä¸º true\r\n     */\r\n    toggleExpand(treeNode?: TreeNode, deep = false, childrenEmptyEmitExpand = true) {\r\n        if (treeNode) {\r\n            treeNode.expanded = !treeNode.expanded;\r\n            this.updateNodeProperty(treeNode.id, {expanded: treeNode.expanded});\r\n            this.toggleVisible(treeNode);\r\n\r\n            if (this.virtualized) {\r\n                if (treeNode.children && treeNode.children.length) {\r\n                    this.renderVirtualRowNodes();\r\n                }\r\n            }\r\n\r\n            if (treeNode.expanded) {\r\n                if (childrenEmptyEmitExpand || (treeNode.children && treeNode.children.length)) {\r\n                    this.expand.emit(treeNode);\r\n                } else {\r\n                    treeNode.expanded = !treeNode.expanded;\r\n                    return;\r\n                }\r\n            } else {\r\n                this.collapse.emit(treeNode);\r\n            }\r\n\r\n            if (deep) {\r\n                if (treeNode.children && treeNode.children.length) {\r\n                    treeNode.children.forEach((row, i) => {\r\n                        this.toggleExpand(row, deep, childrenEmptyEmitExpand);\r\n                    });\r\n                }\r\n            }\r\n        } else {\r\n\r\n            if (this.data && this.data.length) {\r\n                this.data.forEach((row: any) => {\r\n                    this.toggleExpand(row);\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        this.setNewColumnsWidth();\r\n\r\n    }\r\n\r\n    private toggleVisible(treeNode: TreeNode) {\r\n        const rowNode = this.findRowNode(treeNode.id);\r\n        if (rowNode) {\r\n            const rid = rowNode.id;\r\n            const setRowVisible = (rn, visible) => {\r\n                const pid = rn.parent.data[this.idField];\r\n                const rnParent = this.findRowNode(pid);\r\n                if (rnParent) {\r\n                    rn.visible = rnParent.visible && rnParent.node.expanded;\r\n                } else {\r\n                    rn.visible = visible;\r\n                }\r\n\r\n                const _r = this.serializedValue.find(n => n.id === rn.id);\r\n                if (_r) {\r\n                    _r.visible = rn.visible;\r\n                }\r\n            };\r\n\r\n            this.state.rowNodes.filter(rn => rn.parents.indexOf(rid) > -1).forEach(rn => {\r\n                setRowVisible(rn, treeNode.expanded);\r\n            });\r\n\r\n            \r\n            // #392512 \r\n            const rowNodes = this.getCurrentAllRowNodes();\r\n            if (rowNodes) {\r\n                rowNodes.filter(rn => rn.parents.indexOf(rid) > -1).forEach(rn => {\r\n                    setRowVisible(rn, treeNode.expanded);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /** å±å¼æå®èç¹\r\n     * emit: è§¦åå±å¼äºä»¶\r\n     * render: æ°æ®éæ°å è½½\r\n     */\r\n    expandNode(id: string, emit = true, render = true) {\r\n        if (id) {\r\n            const rowNode = this.findRowNode(id);\r\n            if (rowNode) {\r\n                rowNode.node.expanded = true;\r\n                this.toggleVisible(rowNode.node);\r\n\r\n                if (render) {\r\n                    if (this.virtualized) {\r\n                        if (rowNode.node.children && rowNode.node.children.length) {\r\n                            this.renderVirtualRowNodes();\r\n                        }\r\n                    } else {\r\n                        this.detectChanges();\r\n                    }\r\n                }\r\n\r\n                if (emit) {\r\n                    this.expand.emit(rowNode.node);\r\n                }\r\n\r\n                this.setNewColumnsWidth();\r\n\r\n            } else {\r\n                this.writeConsole('Con\\'t find tree node widh id:' + id, 'error');\r\n            }\r\n        }\r\n    }\r\n\r\n    /** å±å¼ææèç¹ */\r\n    expandAll() {\r\n        this.state.rowNodes = this.state.rowNodes.map((row: RowNode) => {\r\n            row.node.expanded = true;\r\n            row.visible = true;\r\n            return row;\r\n        });\r\n\r\n        if (this.virtualized) {\r\n            this.renderVirtualRowNodes();\r\n        } else {\r\n            this.serializedValue = this.state.rowNodes;\r\n        }\r\n        this.setNewColumnsWidth();\r\n        this.expandAllNodes.emit();\r\n        this.detectChanges();\r\n    }\r\n\r\n    expandNodes(id: string) {\r\n        // const rowNode = this.findRowNode(id);\r\n        // const rootNode = this.getRoot(id);\r\n        // if (rowNode) {\r\n        //     const treeNode = rowNode.node;\r\n        //     treeNode.expanded = true;\r\n        //     rowNode.visible = true;\r\n        //     const parents = rowNode.parents;\r\n\r\n        //     this.state.rowNodes.filter(n => n.parents.indexOf(rootNode.id) > -1).forEach(r => {\r\n        //         if (parents.indexOf(r.id) > -1) {\r\n        //             r.visible = true;\r\n        //             r.node.expanded = true;\r\n        //         }\r\n        //     });\r\n\r\n\r\n        //     this.detectChanges();\r\n        // }\r\n    }\r\n\r\n    /** å±å¼æå®èç¹ä¸çææèç¹ */\r\n    expandAllNodesBy(rowNode: any) {\r\n        if (rowNode) {\r\n            const treeNode = rowNode.node;\r\n            treeNode.expanded = true;\r\n            rowNode.visible = true;\r\n\r\n            this.state.rowNodes.filter(n => n.parents.indexOf(rowNode.id) > -1).forEach(r => {\r\n                r.visible = true;\r\n                r.node.expanded = true;\r\n            });\r\n\r\n            this.detectChanges();\r\n            this.setNewColumnsWidth();\r\n        }\r\n    }\r\n\r\n    /** æå æå®èç¹ */\r\n    collapseNode(id: string) {\r\n        if (id) {\r\n            const rowNode = this.findRowNode(id);\r\n            if (rowNode) {\r\n                rowNode.node.expanded = false;\r\n                this.toggleVisible(rowNode.node);\r\n                this.detectChanges();\r\n                this.setNewColumnsWidth();\r\n                this.collapse.emit(rowNode.node);\r\n            } else {\r\n                this.writeConsole('Con\\'t find tree node widh id:' + id, 'error');\r\n            }\r\n        }\r\n    }\r\n    /** æå ææèç¹ */\r\n    collapseAll() {\r\n        this.state.rowNodes = this.state.rowNodes.map((row: RowNode) => {\r\n            row.node.expanded = false;\r\n            row.visible = !row.parent;\r\n            return row;\r\n        });\r\n\r\n        if (this.virtualized) {\r\n            this.renderVirtualRowNodes(0);\r\n        } else {\r\n            this.serializedValue = this.state.rowNodes;\r\n        }\r\n\r\n\r\n        this.collapseAllNodes.emit();\r\n        this.detectChanges();\r\n        this.setNewColumnsWidth();\r\n    }\r\n\r\n    getContainerOffset() {\r\n        const rect = this.containerElement.getBoundingClientRect();\r\n        return {\r\n            left: rect.left + document.body.scrollLeft,\r\n            top: rect.top + document.body.scrollTop\r\n        };\r\n    }\r\n\r\n    onColumnResizeBegin(event) {\r\n        const containerLeft = Math.round(this.getContainerOffset().left);\r\n        this.lastResizerHelperX = (event.pageX - containerLeft + this.containerElement.scrollLeft);\r\n        event.preventDefault();\r\n    }\r\n\r\n    onColumnResize(event) {\r\n        if (this.resizableColumns) {\r\n            const containerLeft = this.getContainerOffset().left;\r\n            this.renderer.addClass(this.containerElement, 'ui-unselectable-text');\r\n            this.resizerHelperVC.nativeElement.style.height = this.containerElement.offsetHeight + 'px';\r\n            this.resizerHelperVC.nativeElement.style.top = 0 + 'px';\r\n            this.resizerHelperVC.nativeElement.style.left = (event.pageX - containerLeft) + 'px';\r\n\r\n            this.resizerHelperVC.nativeElement.style.display = 'block';\r\n        }\r\n    }\r\n\r\n    onColumnResizeEnd(event: any, column: any) {\r\n        if (!this.resizerHelperVC.nativeElement.offsetLeft) {\r\n            return;\r\n        }\r\n\r\n        // åç§»é\r\n        const delta = this.resizerHelperVC.nativeElement.offsetLeft - this.lastResizerHelperX;\r\n        // åå®½\r\n        const columnWidth = column.offsetWidth;\r\n        // æ°å®½åº¦\r\n        const newColumnWidth = columnWidth + delta;\r\n        // æå°å®½åº¦\r\n        const minWidth = column.style.minWidth || 15;\r\n\r\n        let resizeColumnIndex = -1;\r\n        if (column.id) {\r\n            resizeColumnIndex = this.columns.findIndex(n => n.id === column.id);\r\n        } else {\r\n            const colField = column.getAttribute('field');\r\n            if (colField) {\r\n                resizeColumnIndex = this.columns.findIndex(n => n.field === colField);\r\n            }\r\n        }\r\n\r\n\r\n        if (!this.fitColumns) {\r\n            this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);\r\n            this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);\r\n\r\n            if (this.columns[resizeColumnIndex]) {\r\n                this.columns[resizeColumnIndex].width = newColumnWidth;\r\n            }\r\n\r\n            this.sortColumnsByFixed(false);\r\n\r\n            this.setCellWidthCss(this.allColumnsWidth(), 0, []);\r\n\r\n            // this.setTableWidth(this.allColumnsWidth());\r\n\r\n            // // update css.\r\n            // const _colInfo = this.columns[resizeColumnIndex];\r\n            // if (_colInfo) {\r\n            //     const ruleName = this.columnCssName(_colInfo);\r\n            //     const stylecss = ruleName + '{width:' + newColumnWidth + 'px}';\r\n            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);\r\n            // }\r\n\r\n            // const nextColumn = this.columns[resizeColumnIndex + 1];\r\n            // if (nextColumn && nextColumn.fixed) {\r\n            //     const ruleName = this.columnCssName(nextColumn);\r\n            //     const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';\r\n            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);\r\n            // }\r\n\r\n        } else {\r\n            if (newColumnWidth > minWidth) {\r\n                let nextColumn = column.nextElementSibling;\r\n                while (!nextColumn.offsetParent) {\r\n                    nextColumn = nextColumn.nextElementSibling;\r\n                }\r\n\r\n                if (nextColumn) {\r\n                    const nextColumnWidth = nextColumn.offsetWidth - delta;\r\n                    const nextColumnMinWidth = nextColumn.style.minWidth || 15;\r\n\r\n                    if (newColumnWidth > 15 && nextColumnWidth > nextColumnMinWidth) {\r\n                        this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);\r\n                        this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.resizerHelperVC.nativeElement.style.display = 'none';\r\n        this.renderer.removeClass(this.containerElement, 'ui-unselectable-text');\r\n        this.psRef.directiveRef.update();\r\n    }\r\n\r\n    resizeColGroup(table, resizeColumnIndex, newColumnWidth, nextColumnWidth?: number) {\r\n        if (table) {\r\n            const colGroup = table.children[0].nodeName === 'COLGROUP' ? table.children[0] : null;\r\n\r\n            if (colGroup) {\r\n                const col = colGroup.children[resizeColumnIndex];\r\n                const nextCol = col.nextElementSibling;\r\n                col.style.width = newColumnWidth + 'px';\r\n\r\n\r\n                if (nextCol) {\r\n                    if (nextColumnWidth && this.fitColumns) {\r\n                        nextCol.style.width = nextColumnWidth + 'px';\r\n                    }\r\n                }\r\n            } else {\r\n                throw new Error('Scrollable tables require a colgroup to support resizable columns');\r\n            }\r\n        }\r\n    }\r\n\r\n    onSearch() {\r\n        this.state.searchRowNodes = null;\r\n        this.state.searched = !!this.searchData.value;\r\n        if (this.searchData.value) {\r\n            this.searchData.value = this.searchData.value.trim();\r\n        }\r\n        this.search.emit(this.searchData);\r\n    }\r\n\r\n    insert(node: TreeNode, parent?: TreeNode) {\r\n        if (parent) {\r\n            if (!parent.children) {\r\n                parent.children = [];\r\n            }\r\n            parent.children.push(node);\r\n\r\n            this.expandNode(parent.data[this.idField]);\r\n            this.appendNew.emit({ parent });\r\n        } else {\r\n            this.data.push(node);\r\n        }\r\n\r\n        this.updateSerializedValue();\r\n    }\r\n\r\n    append(data: { [key: string]: any }, parent?: TreeNode) {\r\n        if (data && data[this.idField]) {\r\n            this.insert({ data, id: data[this.idField] }, parent);\r\n        } else {\r\n            this.writeConsole('Please set id value.', 'warn');\r\n        }\r\n    }\r\n\r\n    private emitAppendNew(parent: TreeNode) {\r\n        if (this.virtualized) {\r\n            const nodePosY = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;\r\n            this.updateSerializedValue(nodePosY);\r\n        } else {\r\n            this.updateSerializedValue();\r\n        }\r\n\r\n    }\r\n\r\n    appendChildren(nodes: TreeNode[], parent: TreeNode, emit = true) {\r\n        if (nodes && nodes.length) {\r\n            if (parent) {\r\n                parent.children.push(...nodes);\r\n                this.emitAppendNew(parent);\r\n                if (emit) {\r\n                    this.appendNew.emit({ parent });\r\n                }\r\n            } else {\r\n                throw new Error('æªæ¾å°ç¶çº§èç¹');\r\n            }\r\n        } else {\r\n            this.updateSerializedValue();\r\n            this.writeConsole('æ·»å å­èç¹çæ°æ®ä¸ºç©º', 'warn');\r\n        }\r\n    }\r\n\r\n    loadChildren(nodes: TreeNode[], parent: TreeNode, emit = true) {\r\n        if (parent) {\r\n            parent.children = nodes || [];\r\n            this.emitAppendNew(parent);\r\n            if (emit) {\r\n                this.appendNew.emit({ parent });\r\n            }\r\n        }\r\n    }\r\n\r\n    remove(nodeId: string) {\r\n        if (nodeId) {\r\n            const rowNode = this.findRowNode(nodeId);\r\n            if (rowNode) {\r\n                // remove(this.state.rowNodes, (n) => {\r\n                //     return n.id === nodeId;\r\n                // });\r\n                if (this.selectValue === nodeId) {\r\n                    this.selectedRow = null;\r\n                    this.selectValue = null;\r\n                }\r\n\r\n                if (rowNode.parent) {\r\n                    remove(rowNode.parent.children, (n) => {\r\n                        return n.data[this.idField] === nodeId;\r\n                    });\r\n                } else {\r\n                    remove(this.state.rowNodes, (n) => {\r\n                        return n.id === nodeId;\r\n                    });\r\n\r\n                    this.data = this.data.filter(n => n.data[this.idField] !== nodeId);\r\n                }\r\n                this.updateSerializedValue();\r\n                this.detectChanges();\r\n                this.ttService.onRemove(rowNode);\r\n                this.removed.emit(rowNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    update(nodeId: string, data: { [key: string]: string }) {\r\n        if (nodeId && data) {\r\n            const rowNode = this.findRowNode(nodeId);\r\n            if (rowNode) {\r\n                rowNode.node.data = extend(rowNode.node.data, data);\r\n                this.detectChanges();\r\n                this.ttService.onUpdate(rowNode);\r\n                this.updated.emit(rowNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    updateNodeProperty(nodeid: string, property: { [key: string]: any } ) {\r\n        const rowNode = this.findRowNode(nodeid);\r\n        if (rowNode && property) {\r\n            Object.keys(property).forEach(k => {\r\n                rowNode.node[k] = property[k];\r\n            });\r\n        }\r\n    }\r\n\r\n    private setScorllBodyHeight() {\r\n        this.scorllBodyHeight = this.height;\r\n\r\n        if (this.showFilterBar) {\r\n            this.scorllBodyHeight = this.scorllBodyHeight - 46;\r\n        }\r\n\r\n        if(this.enableFilterRow) {\r\n            this.scorllBodyHeight = this.scorllBodyHeight - 36;\r\n        }\r\n\r\n        if (this.fixedHeader && this.showHeader) {\r\n            if (this.headerBox && (this.headerWrap || this.useGroupHeader)) {\r\n                const hh = this.headerBox.nativeElement.clientHeight;\r\n                this.scorllBodyHeight = this.scorllBodyHeight - hh;\r\n            } else {\r\n                // å®½æ¾çæ¶ï¼è¡¨å¤´é«åº¦å¢é«ï¼éè¦æå®éåå¾è¡¨å¤´é«åº¦\r\n                let _headerHeight = this.headerHeight;\r\n                const themesKey = localStorage.getItem('gsp_rtf_themSKey');\r\n                if (themesKey === 'loose' && this.headerBox) {\r\n                    _headerHeight = this.headerBox.nativeElement.getBoundingClientRect().height;\r\n                }\r\n                this.scorllBodyHeight = this.scorllBodyHeight - _headerHeight;\r\n            }\r\n        }\r\n\r\n        if (this.pagination) {\r\n            this.scorllBodyHeight = this.scorllBodyHeight - this.pagerHeight;\r\n        }\r\n\r\n\r\n\r\n        this.detectChanges();\r\n    }\r\n\r\n    private setWidth(w) {\r\n        this.width = w;\r\n    }\r\n\r\n    resize(size?: { width: number, height: number }) {\r\n        if (size) {\r\n            const w = parseInt('' + size.width, 10);\r\n            const h = parseInt('' + size.height, 10);\r\n\r\n            if (this.width === w && this.height === h) {\r\n                if (this.state.scrollY) {\r\n                    this.psRef.directiveRef.scrollToY(this.state.scrollY);\r\n                }\r\n\r\n                if (this.state.scrollX) {\r\n                    this.psRef.directiveRef.scrollToX(this.state.scrollX)\r\n                }\r\n\r\n                return;\r\n            }\r\n            this.setWidth(w);\r\n            this.height = h;\r\n        }\r\n        this.setScorllBodyHeight();\r\n        if (this.data && this.data.length) {\r\n            this.renderVirtualRowNodes();\r\n        }\r\n\r\n        // setTimeout(() => {\r\n        //     if (this.psRef) {\r\n        //         this.psRef.directiveRef.update();\r\n        //     }\r\n        // }, 100);\r\n    }\r\n\r\n    loadData(data: TreeNode[]) {\r\n        if (this.showLines) {\r\n            this.isLoadNewDataSetEmpty = true;\r\n            this.data = [];\r\n            this.isLoadNewDataSetEmpty = false;\r\n        }\r\n        this.data = data;\r\n    }\r\n\r\n    empty() {\r\n        this.data = [];\r\n    }\r\n\r\n    getCurrentAllRowNodes() {\r\n        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {\r\n            return this.state.searchRowNodes || this.state.rowNodes;\r\n        } else {\r\n            return this.state.rowNodes;\r\n        }\r\n    }\r\n\r\n    clearAll(detectChanges = true): TreeTableComponent {\r\n        this.state.rowNodes.filter(rn => rn.indeterminate).forEach(rn => {\r\n            rn.indeterminate = false;\r\n            this.ttService.onChangeCheckboxStatus(rn);\r\n        });\r\n\r\n        this.state.rowNodes = this.state.rowNodes.map((row: RowNode) => {\r\n            row.isChecked = false;\r\n            row.isSelected = false;\r\n            row.indeterminate = false;\r\n            return row;\r\n        });\r\n\r\n\r\n        // if (this.searchData && this.searchData.value) {\r\n        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {\r\n            this.serializedValue = this.state.searchRowNodes.map((row: RowNode) => {\r\n                row.isChecked = false;\r\n                row.isSelected = false;\r\n                row.indeterminate = false;\r\n                return row;\r\n            });\r\n        }\r\n\r\n        this.checkeds = [];\r\n        this.selections = [];\r\n        this.selectedRow = undefined;\r\n\r\n        if (this.showCheckAll && this.headerCheckboxCmp) {\r\n            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;\r\n            this.headerCheckboxCmp.checked = false;\r\n        }\r\n\r\n        if (detectChanges) {\r\n            this.detectChanges();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    detectChanges(): TreeTableComponent {\r\n        this.cdRef.markForCheck();\r\n        // tslint:disable-next-line:no-string-literal\r\n        if (!this.cdRef['destroyed']) {\r\n            this.cdRef.detectChanges();\r\n        }\r\n        return this;\r\n    }\r\n\r\n    clearCheckeds(): TreeTableComponent {\r\n        if (this.checkeds && this.checkeds.length) {\r\n            this.findRowNodes(this.checkeds.map(tn => tn.data[this.idField])).forEach(rn => {\r\n                rn.isChecked = false;\r\n            });\r\n        }\r\n\r\n        this.checkeds = [];\r\n\r\n        if (this.showCheckAll && this.headerCheckboxCmp) {\r\n            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;\r\n            this.headerCheckboxCmp.checked = false;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    clearSelections(): TreeTableComponent {\r\n\r\n        if (this.serializedValue && this.serializedValue.length) {\r\n            this.serializedValue.forEach(n => {\r\n                n.isSelected = false;\r\n            });\r\n        }\r\n\r\n        this.state.rowNodes.forEach(n => {\r\n            n.isSelected = false;\r\n        });\r\n\r\n        if (this.selections && this.selections.length) {\r\n            const nodeIds = this.selections.map(tn => tn.data[this.idField]);\r\n            this.findRowNodes(nodeIds).forEach(rn => {\r\n                rn.isSelected = false;\r\n                if (this.singleSelect) {\r\n                    rn.isChecked = false;\r\n                }\r\n            });\r\n        }\r\n\r\n        this.selections = undefined;\r\n        this.selectedRow = undefined;\r\n        return this;\r\n    }\r\n    /** éä¸­ç¬¬1ä¸ªå¯ä»¥éä¸­çèç¹ */\r\n    selectFirstNode() {\r\n        if (this.state.rowNodes && this.state.rowNodes.length) {\r\n            const firstCanSelectNode = this.state.rowNodes.find(n => n.node.selectable);\r\n            if (firstCanSelectNode) {\r\n                this.selectNode(firstCanSelectNode.id);\r\n            }\r\n        }\r\n    }\r\n\r\n    private scrollToCurrentRow(id: string) {\r\n        const trId = 'rownode-' + id;\r\n        // const trEle =    document.getElementById(trId);\r\n        const trEle = this.el.nativeElement.querySelector('#' + trId) || document.getElementById(trId);\r\n        if (trEle && trEle.closest('.farris-treetable') && trEle.closest('.farris-treetable').id === this.id) {\r\n            if (!this.isElementInViewport(trEle)) {\r\n                if (trEle.scrollIntoViewIfNeeded) {\r\n                    trEle.scrollIntoViewIfNeeded();\r\n                    return true;\r\n                }\r\n                const browserInfo = this.utils.getBrowserType();\r\n                if (browserInfo.ff && this.utils.getFFVer() < 58) {\r\n                    trEle.scrollIntoView();\r\n                } else {\r\n                    trEle.scrollIntoView({ block: 'nearest', inline: 'nearest' });\r\n                }\r\n            } else {\r\n                trEle.scrollIntoView({ block: 'nearest'});\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private isElementInViewport(el) {\r\n        const containerEl = this.el.nativeElement.querySelector('.farris-treetable-body');\r\n        if (!containerEl) {\r\n            return false;\r\n        }\r\n        const container = containerEl.getBoundingClientRect();\r\n        const viewPortHeight = container.height;\r\n        const offsetTop = el.offsetTop + this.topHideHeight;\r\n        const scrollTop = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;\r\n        const top = offsetTop - scrollTop;\r\n        return  top >= 0 && top <= viewPortHeight;\r\n    }\r\n\r\n    private _scrollToNode(nodeId: string) {\r\n        this.scrollToCurrentNode(nodeId);\r\n    }\r\n\r\n    scrollToCurrentNode(nodeid = '') {\r\n        let id = nodeid;\r\n        if (!nodeid && this.selectedRow) {\r\n            id = this.selectedRow.id;\r\n        }\r\n\r\n        if (id == null || id == undefined || id == '') {\r\n            return;\r\n        }\r\n\r\n        const result = this.scrollToCurrentRow(id);\r\n        if (!result) {\r\n            const rowNode = this.findRowNode(id);\r\n            const showRowsOnePager = Math.ceil(this.scorllBodyHeight / this.rowHeight ) + 1;\r\n            if (rowNode.parents && rowNode.parents.length) {\r\n                rowNode.parents.forEach(pid => {\r\n                    this.expandNode(pid, false, false);\r\n                });\r\n            } \r\n            const rowIndex = this.state.rowNodes.filter(n => n.visible).findIndex(n => n.id === id);\r\n            if (rowIndex < showRowsOnePager) {\r\n                if (this.virtualized) {\r\n                    this.renderData(0);\r\n                }\r\n                setTimeout(() => {\r\n                    this.scrollToCurrentRow(id);\r\n                });\r\n                return;\r\n            }\r\n            const top = rowIndex * this.rowHeight;\r\n\r\n            if (this.virtualized) {\r\n                this.renderData(top - this.rowHeight);\r\n\r\n                setTimeout(() => {\r\n                    this.scrollToCurrentRow(id);\r\n                    if (this.psRef && this.psRef.directiveRef) {\r\n                        this.psRef.directiveRef.elementRef.nativeElement.scrollTop += 1;\r\n                    }\r\n                }, 50);\r\n            } else {\r\n                this.scrollToY(top - this.rowHeight);\r\n                this.scrollToCurrentRow(id);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** éä¸­æå®ID çèç¹,\r\n     * detectChanges: è§¦åèå¼æ£æ¥ï¼é»è®¤ä¸º true\r\n     * gotocurrent: ä½¿ç¨éä¸­èç¹å¯è§ï¼é»è®¤ä¸º true\r\n     */\r\n    selectNode(id: string, detectChanges = true, gotocurrent = true): TreeTableComponent {\r\n        if (!id) {\r\n            return this;\r\n        }\r\n        let node = this.findRowNode(id);\r\n        const canSelect = node && node.node && node.node.selectable;\r\n        const emit = canSelect && (!this.selectedRow || (this.selectedRow && id !== this.selectedRow.id));\r\n\r\n        if (node && emit) {\r\n            node.isSelected = true;\r\n            if (this.singleSelect || this.onlySelectSelf) {\r\n                this.clearSelections();\r\n                node.isSelected = true;\r\n                this.selections = [node.node];\r\n                if (this.checkOnSelect && this.showCheckbox) {\r\n                    node.isChecked = true;\r\n                    if (this.multiSelect) {\r\n                        this.setCheckeds(node);\r\n                    } else {\r\n                        this.clearCheckeds();\r\n                        this.checkeds = [node.node];\r\n                    }\r\n\r\n                    if (this.cascadeCheck && this.cascadeUp) {\r\n                        this.updateParentCheckboxStatus(node);\r\n                    }\r\n                }\r\n            } else {\r\n                this.setSelections(node);\r\n            }\r\n\r\n            this.selectedRow = node.node;\r\n            this.selectNodeChangedSubject.next(id);\r\n            this.nodeSelected.emit({ node: node.node, instance: this });\r\n\r\n            if (this.serializedValue.find(n=>n.id == this.selectedRow.id)) {\r\n                this.serializedValue.find(n=>n.id == this.selectedRow.id).isSelected = true;\r\n            }\r\n\r\n            if (gotocurrent && this.fixedHeader) {\r\n                this.scrollToCurrentNode();\r\n            }\r\n            \r\n            if (detectChanges) {\r\n                this.detectChanges();\r\n            }\r\n        } else {\r\n            if (!node) {\r\n                this.selectedRow = null;\r\n                this.writeConsole(`æªæ¾å°IDä¸º ${id} çæ°æ®ï¼ï¼`)\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /** åæ¶éä¸­ */\r\n    unSelectNode(id: string, detectChanges = true) {\r\n        const rowNode = this.findRowNode(id);\r\n        if (rowNode) {\r\n            rowNode.isSelected = false;\r\n            if (this.singleSelect) {\r\n                this.clearSelections();\r\n                this.selectedRow = null;\r\n                rowNode.isChecked = false;\r\n                this.selections = [];\r\n            } else {\r\n                if (this.onlySelectSelf) {\r\n                    this.selections = [];\r\n                } else {\r\n                    this.setSelections(rowNode);\r\n                }\r\n            }\r\n\r\n            if (detectChanges) {\r\n                this.detectChanges();\r\n            }\r\n            this.nodeUnSelect.emit({ node: rowNode.node, instance: this });\r\n        } else {\r\n            this.writeConsole(`æªæ¾å°IDä¸º${id}çæ°æ®ï¼ï¼`);\r\n        }\r\n    }\r\n\r\n    /** éä¸­å¤è¡æ°æ® */\r\n    selectNodes(ids: string[], detectChanges = true, emitNodeSelected = false): TreeTableComponent {\r\n        if (ids && ids.length) {\r\n            const nodes = this.findRowNodes(ids).map(rn => {\r\n                rn.isSelected = true;\r\n                this.setSelections(rn);\r\n                return rn.node;\r\n            });\r\n\r\n            this.selections = [...this.selections];\r\n\r\n            if (detectChanges) {\r\n                this.detectChanges();\r\n            }\r\n\r\n            this.selectNodeChangedSubject.next(ids.join(','));\r\n            if (emitNodeSelected) {\r\n                this.nodeSelected.emit({ node: nodes, instance: this });\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /** åæ¶éä¸­ */\r\n    unSelectNodes(ids?: string[], emit = true) {\r\n        if (ids && ids.length) {\r\n            const rownodes = this.findRowNodes(ids);\r\n            if (rownodes && rownodes.length) {\r\n                rownodes.forEach(rn => {\r\n                    rn.isSelected = false;\r\n                    this.setSelections(rn);\r\n                });\r\n                this.selections = [...this.selections];\r\n                this.detectChanges();\r\n                if (emit) {\r\n                    this.nodeUnSelect.emit({ node: rownodes.map(r => r.node), instance: this });\r\n                }\r\n            }\r\n        } else {\r\n            this.clearSelections();\r\n            this.detectChanges();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * é©éæå®çèç¹\r\n     * @param updateParentCheckboxStatus: æ¯å¦æ´æ°ç¶çº§èç¹checkbox ç¶æ, é»è®¤ä¸º true\r\n     * @param detectChanges è§¦ååæ´æ£æµãé»è®¤ä¸º true\r\n     */\r\n    checkedNode(id: string, updateParentCheckboxStatus = true, detectChanges = true) {\r\n        if (this.isEnableMultiSelect()) {\r\n            const node = this.findRowNode(id);\r\n            if (node) {\r\n                node.isChecked = true;\r\n                if (!this.isChecked(node.node)) {\r\n                    this.setCheckeds(node, false);\r\n                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {\r\n                        this.updateParentCheckboxStatus(node);\r\n                    }\r\n                }\r\n                if (detectChanges) {\r\n                    this.detectChanges();\r\n                }\r\n                this.nodeChecked.emit({ originalEvent: null, node: node.node, instance: this });\r\n            } else {\r\n                this.writeConsole(`æªæ¾å°IDä¸º${id}çæ°æ®ï¼ï¼`);\r\n            }\r\n        }\r\n    }\r\n\r\n    unCheckedNode(id: string, updateParentCheckboxStatus = true, ) {\r\n        if (this.isEnableMultiSelect()) {\r\n            const rownode = this.findRowNode(id);\r\n\r\n            if (rownode) {\r\n                rownode.isChecked = false;\r\n                this.setCheckeds(rownode);\r\n                if (this.selectOnCheck) {\r\n                    rownode.isSelected = false;\r\n                    this.setSelections(rownode);\r\n                }\r\n                \r\n                if (this.selectedRow && this.selectedRow.id === id) {\r\n                    this.selectedRow = null;\r\n                }\r\n\r\n                if (this.singleSelect || !this.cascadeCheck) {\r\n                    this.updateNodeStatus();\r\n\r\n                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {\r\n                        this.updateParentCheckboxStatus(rownode);\r\n                    }\r\n\r\n                    if (this.checkValues) {\r\n                        this.checkValues = this.checkValues.filter(n => n !== id);\r\n                        this.checkValuesChange.emit(this.checkValues);\r\n                    }\r\n\r\n                    this.detectChanges();\r\n                    this.nodeUnChecked.emit({ node: rownode, instance: this });\r\n                } else {\r\n                    const unNodes = this.cascadeNodes(rownode, false);\r\n                    this.checkeds = [...this.checkeds];\r\n                    this.checkValuesChange.emit(this.checkValues);\r\n\r\n                    this.detectChanges();\r\n                    this.nodeUnChecked.emit({ node: rownode, nodes: unNodes, instance: this });\r\n                }\r\n\r\n\r\n            } else {\r\n                this.writeConsole(`æªæ¾å°IDä¸º${id}çæ°æ®ï¼ï¼`);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _checkedNodes(ids: string[], checked: boolean) {\r\n        const parentIDS = [];\r\n        const nodes = this.findRowNodes(ids).map(rn => {\r\n            parentIDS.push(rn.parents);\r\n            if (rn.node.selectable) {\r\n                rn.isChecked = checked;\r\n                this.setCheckeds(rn, false);\r\n            }\r\n            return rn.node;\r\n        });\r\n        this.checkeds = [...this.checkeds];\r\n        if (this.cascadeCheck && this.cascadeUp) {\r\n            // æ´æ°ç¶èç¹å¤æ¡çéä¸­ç¶æ\r\n            this.updateParentsCheckStatus(parentIDS);\r\n        }\r\n\r\n        return nodes;\r\n    }\r\n\r\n    /** æ¹ééä¸­èç¹\r\n     * @param ids: id éå\r\n     * @param detectChanges: boolean  é»è®¤ä¸º true ,æ¯å¦è§¦ååæ´æ£æµ\r\n     * closeCascade:  æ§è¡åæ¶é©éæ¶æ¯å¦å³é­çº§èåè½ãé»è®¤ä¸º false\r\n     *      è®¾ä¸ºtrueæ¶ï¼é©éå°ç¦ç¨çº§èçåè½ï¼ä»å¤çå½åèç¹çéä¸­ç¶æãæ§è¡å®æ¯åï¼æ¢å¤ååççº§èéé¡¹ã\r\n     */\r\n    checkedNodes(ids: any[], detectChanges = true, emit = true, closeCascade?: boolean) {\r\n        if (this.isEnableMultiSelect()) {\r\n            if (ids && ids.length) {\r\n\r\n                const _cascade = this.cascadeCheck;\r\n                if (closeCascade && _cascade) {\r\n                    this.cascadeCheck = false;\r\n                }\r\n\r\n                const nodes = this._checkedNodes(ids, true);\r\n\r\n                if (closeCascade && _cascade) {\r\n                    // æ¢å¤çº§è\r\n                    this.cascadeCheck = true;\r\n                }\r\n\r\n                this.updateAllCheckboxStatus();\r\n\r\n                if (detectChanges) {\r\n                    this.detectChanges();\r\n                }\r\n\r\n                if (emit) {\r\n                    this.nodeChecked.emit({ originalEvent: null, node: nodes, nodes, instance: this });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åæ¶éä¸­çèç¹.\r\n     * ids: æ è¯Id æ°ç»\r\n     * closeCascade: æ§è¡åæ¶é©éæ¶æ¯å¦å³é­çº§èåè½ãé»è®¤ä¸º false\r\n     *     è®¾ä¸ºtrueæ¶ï¼é©éå°ç¦ç¨çº§èçåè½ï¼ä»å¤çå½åèç¹çéä¸­ç¶æãæ§è¡å®æ¯åï¼æ¢å¤ååççº§èéé¡¹ã\r\n     * emit: æ¯å¦è§¦ååæ¶å¾éäºä»¶ãé»è®¤ä¸º true\r\n     */\r\n    unCheckedNodes(ids: string[], closeCascade?: boolean, emit = true) {\r\n        if (ids && ids.length) {\r\n            const _cascade = this.cascadeCheck;\r\n            if (closeCascade && _cascade) {\r\n                this.cascadeCheck = false;\r\n            }\r\n\r\n            const nodes = this._checkedNodes(ids, false);\r\n\r\n            if (closeCascade && _cascade) {\r\n                this.cascadeCheck = true;\r\n            }\r\n            this.detectChanges();\r\n            if (emit) {\r\n                this.nodeUnChecked.emit({ originalEvent: null, node: nodes, nodes, instance: this });\r\n            }\r\n        } else {\r\n            this.clearCheckeds();\r\n            this.detectChanges();\r\n        }\r\n    }\r\n\r\n    unCheckedAndSelected(ids: string[]) {\r\n        this.unCheckedNodes(ids, true, false);\r\n        this.unSelectNodes(ids, false);\r\n    }\r\n\r\n    findRowNode(id: string): RowNode {\r\n        if (id) {\r\n            if (this.state.rowNodes) {\r\n                return this.state.rowNodes.find(n => n.id === id);\r\n            }\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n\r\n    /** å°å¨ v0.2.x åºå¼ï¼è¯·ä½¿ç¨ findRowNode æ¹æ³ */\r\n    findNode(id: string): RowNode {\r\n        return this.findRowNode(id);\r\n    }\r\n\r\n    /**\r\n     * æ ¹æ®å½åèç¹IDï¼è·åé¡¶çº§ç¶èç¹\r\n     * @param id å½åèç¹ID\r\n     * @returns è¿åé¡¶çº§èç¹\r\n     */\r\n    getRoot(id: string) {\r\n        const rowNode = this.findRowNode(id);\r\n        if (rowNode) {\r\n            if (rowNode.parents && rowNode.parents.length) {\r\n                return this.findRowNode(rowNode.parents[0]);\r\n            }\r\n            return rowNode;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    findRowNodes(ids: string[]): RowNode[] {\r\n        return this.state.rowNodes.filter(rn => ids.indexOf(rn.id) > -1);\r\n    }\r\n\r\n    checkAllNodes(args?: any) {\r\n        let rowNodes = this.getCurrentAllRowNodes();\r\n        rowNodes = rowNodes.filter(n => (n.node.selectable || n.node.selectable === undefined));\r\n\r\n        this.checkeds = rowNodes.map(n => {\r\n            n.indeterminate = false;\r\n            this.ttService.onChangeCheckboxStatus(n);\r\n            if (n.node.selectable || n.node.selectable === undefined) {\r\n                n.isChecked = true;\r\n            }\r\n            return n.node;\r\n        });\r\n\r\n        if (this.selectOnCheck && !this.onlySelectSelf) {\r\n            this.selections = rowNodes.map(n => {\r\n                if (n.node.selectable || n.node.selectable === undefined) {\r\n                    n.isSelected = true;\r\n                }\r\n                return n.node;\r\n            });\r\n        }\r\n\r\n        if (this.state.searched) {\r\n            rowNodes.forEach(rn => {\r\n                const row = this.state.rowNodes.find(n => n.id === rn.id);\r\n                if (row) {\r\n                    row.isSelected = rn.isSelected;\r\n                    row.isChecked = rn.isChecked;\r\n                }\r\n            });\r\n        }\r\n\r\n        this.checkAll.emit(args);\r\n        this.updateAllCheckboxStatus();\r\n        this.detectChanges();\r\n    }\r\n\r\n    unCheckAllNodes(args?: any) {\r\n        this.clearAll();\r\n        this.unCheckAll.emit(args);\r\n        this.detectChanges();\r\n    }\r\n\r\n    private isEnableMultiSelect() {\r\n        if (this.singleSelect) {\r\n            if (!this.showCheckbox) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // ä»æ°æ®ä¸­è·åèç¹å¾æ \r\n    // iconField ä¸º object\r\n    //      å¦æ å±å¼å¾æ ä¸ºç©ºï¼æå å¾æ ä¸ä¸ºç©ºï¼æåä¹ï¼åå±å¼ä¸æå å¾æ ä¿æä¸è³ï¼\r\n    //      å¦æ å¶å­å¾æ ä¸ºç©ºï¼åä½¿ç¨ç»ä»¶é»è®¤çå¾æ \r\n    // iconField ä¸º å­ç¬¦ä¸²ï¼ åå¶å­ å±å¼ æå  å¾æ ä½¿ç¨åä¸ä¸ªã å¦æä¸ºç©ºï¼ åä½¿ç¨ç»ä»¶é»è®¤å¾æ \r\n    private getNodeIconFromData(tn: TreeNode) {\r\n        let leaf = null;\r\n        let expand = null;\r\n        let collapse = null;\r\n        if (this.useIconFromData) {\r\n            if (this.iconField) {\r\n                let _iconField = '';\r\n                if (typeof this.iconField === 'string') {\r\n                    _iconField = this.iconField;\r\n                    if (tn[_iconField]) {\r\n                        leaf = tn[_iconField];\r\n                    } else {\r\n                        leaf = this.utils.getValue(_iconField, tn.data);\r\n                    }\r\n\r\n                    expand = collapse = leaf;\r\n                } else {\r\n                    if (this.iconField.leaf) {\r\n                        leaf = this.utils.getValue(this.iconField.leaf, tn.data);\r\n                    }\r\n                    if (this.iconField.expand) {\r\n                        expand = this.utils.getValue(this.iconField.expand, tn.data);\r\n                    }\r\n                    if (this.iconField.collapse) {\r\n                        collapse = this.utils.getValue(this.iconField.collapse, tn.data);\r\n                    }\r\n\r\n                    if (expand && !collapse) {\r\n                        collapse = expand;\r\n                    }\r\n\r\n                    if (!expand && collapse) {\r\n                        expand = collapse;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            leaf, expand, collapse\r\n        };\r\n    }\r\n\r\n    getTreeIcon(treeNode: TreeNode) {\r\n        const tn = treeNode;\r\n        let leafIcon = this.leafIcon || 'file';\r\n        let expandIcon = this.expandIcon || 'folder-open';\r\n        let collapseIcon = this.collapseIcon || 'folder';\r\n        const loading = 'f-loading-round';\r\n\r\n        if (tn['showLoading']) {\r\n            return { [loading]: true };\r\n        }\r\n\r\n        if (tn.icon) {\r\n            leafIcon = tn.icon;\r\n        }\r\n\r\n        if (tn.expandedIcon) {\r\n            expandIcon = tn.expandedIcon;\r\n        }\r\n\r\n        if (tn.collapsedIcon) {\r\n            collapseIcon = tn.collapsedIcon;\r\n        }\r\n\r\n        if (this.useIconFromData) {\r\n            const { leaf, expand, collapse } = this.getNodeIconFromData(treeNode);\r\n            if (this.whenDataIconEmptyUseDefault) {\r\n                if (leaf) {\r\n                    leafIcon = leaf;\r\n                }\r\n                if (expand) {\r\n                    expandIcon = expand;\r\n                }\r\n                if (collapse) {\r\n                    collapseIcon = collapse;\r\n                }\r\n            } else {\r\n                leafIcon = leaf || '';\r\n                expandIcon = expand || '';\r\n                collapseIcon = collapse || '';\r\n            }\r\n        }\r\n\r\n\r\n        const collapsedExpression = (!tn.leaf || !!(tn.children && tn.children.length)) && !tn.expanded;\r\n        const expandedExpression = !!tn.expanded;\r\n        const leafExpression = tn.leaf === undefined ? (!tn.children || !tn.children.length) : tn.leaf;\r\n\r\n        const icons = {};\r\n\r\n        if (leafExpression && leafIcon) {\r\n            icons[leafIcon] = leafExpression;\r\n        } else {\r\n            if (tn.expanded && expandIcon) {\r\n                icons[expandIcon] = expandedExpression;\r\n            } else {\r\n                if (collapseIcon) {\r\n                    icons[collapseIcon] = collapsedExpression;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.iconCls) {\r\n            icons[this.iconCls] = true;\r\n        }\r\n\r\n        return icons;\r\n    }\r\n\r\n    private compare(a, b) {\r\n        if (typeof a === 'string') {\r\n            return a.localeCompare(b);\r\n        } else {\r\n            return a === b ? 0 : (a > b ? 1 : -1);\r\n        }\r\n    }\r\n    private _sort(r1, r2) {\r\n        let r = 0;\r\n        const sortFields = this.sortName.split(',');\r\n        const orders = this.sortOrder.split(',');\r\n\r\n        if (!this.sortName) {\r\n            return r;\r\n        }\r\n\r\n        for (let i = 0; i < sortFields.length; i++) {\r\n            const sn = sortFields[i];\r\n            const so = orders[i];\r\n\r\n            const col = this.columns.find(c => c.field === sn);\r\n\r\n            const orderby = col.sorter || this.compare;\r\n            let v1 = this.utils.getValue(sn, r1.data);\r\n            if (v1 === null || v1 === undefined) {\r\n                v1 = '';\r\n            }\r\n            let v2 = this.utils.getValue(sn, r2.data);\r\n            if (v2 === null || v2 === undefined) {\r\n                v2 = '';\r\n            }\r\n            r = orderby(v1, v2);\r\n            if (r !== 0) {\r\n                return r * (so === 'asc' ? 1 : -1);\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n\r\n    clientSort() {\r\n\r\n        if (!this.data || !this.data.length) {\r\n            return;\r\n        }\r\n\r\n        const sortedData = this.data.sort(this._sort.bind(this));\r\n\r\n        const sortChildNodes = (childNodes) => {\r\n            childNodes = childNodes.sort(this._sort.bind(this));\r\n            childNodes.forEach(n => {\r\n                if (n.children && n.children.length) {\r\n                    n.children = n.children.sort(this._sort.bind(this));\r\n                    sortChildNodes(n.children);\r\n                }\r\n            });\r\n            return childNodes;\r\n        };\r\n\r\n        sortedData.forEach(c => {\r\n            c.children = sortChildNodes(c.children);\r\n        });\r\n\r\n        this.loadData(sortedData);\r\n    }\r\n\r\n    onSortColumnClick($event, col) {\r\n        if (!col.sortable) {\r\n            return;\r\n        }\r\n        const sortName = this.sortName;\r\n        const sortOrder = this.sortOrder;\r\n        let sortFields = [];\r\n        let sortOrders = [];\r\n        if (sortName) {\r\n            sortFields = sortName.split(',');\r\n            sortOrders = sortOrder.split(',');\r\n        }\r\n\r\n        const colOrder = col.order || 'asc';\r\n        let newOrder = colOrder;\r\n        const i = sortFields.findIndex(n => n === col.field);\r\n        if (i >= 0) {\r\n            const _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';\r\n            newOrder = _order;\r\n            // if (this.multiSort && newOrder === 'asc') {\r\n            if (newOrder === 'asc') {\r\n                newOrder = undefined;\r\n                sortFields.splice(i, 1);\r\n                sortOrders.splice(i, 1);\r\n            } else {\r\n                sortOrders[i] = _order;\r\n            }\r\n\r\n        } else {\r\n            if (this.multiSort) {\r\n                sortFields.push(col.field);\r\n                sortOrders.push(colOrder);\r\n            } else {\r\n                sortFields = [col.field];\r\n                sortOrders = [colOrder];\r\n            }\r\n        }\r\n\r\n        col.order = newOrder;\r\n\r\n        this.sortName = sortFields.join(',');\r\n        this.sortOrder = sortOrders.join(',');\r\n\r\n        if (!this.multiSort) {\r\n\r\n            const updateFieldOrder = (cols: TreeTableColumn[]) => {\r\n                if (!cols || !cols.length) {\r\n                    return;\r\n                }\r\n                cols.forEach(c => {\r\n                    c.order = undefined;\r\n                    const k = sortFields.findIndex(f => f === c.field);\r\n                    if (k >= 0) {\r\n                        c.order = sortOrders[k];\r\n                    }\r\n                });\r\n            };\r\n\r\n            updateFieldOrder(this.columns);\r\n            this.cdRef.detectChanges();\r\n        }\r\n\r\n        this.beforeSortColumn(this.sortName, this.sortOrder).subscribe(() => {\r\n            if (this.remoteSort) {\r\n                // this.reload();\r\n            } else {\r\n                this.clientSort();\r\n            }\r\n\r\n            this.columnSorted.emit({ sortName: this.sortName, sortOrder: this.sortOrder });\r\n        });\r\n    }\r\n\r\n    /** æ¥è¯¢å·¥å·æ¡åç«¯å­ç¬¦æ¥è¯¢ */\r\n    findKeyWords($event) {\r\n        const searchValue = $event.value;\r\n        const field = $event.field;\r\n        this.findField = field;\r\n        if (searchValue && searchValue.length >= 2) {\r\n            this.findValue = searchValue;\r\n\r\n            if (!field) {\r\n                this.writeConsole('Please set a field for the FindField property.', 'warn');\r\n                return;\r\n            }\r\n\r\n            const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);\r\n\r\n            if (result && result.length) {\r\n                this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));\r\n                this.findCount = result.length;\r\n                this.findCurrent = 1;\r\n    \r\n                this._scrollToNode(result[0].id);\r\n\r\n                this.highLightKeywords();\r\n            } else {\r\n                this.findResult = [];\r\n                this.findCurrent = 0;\r\n                this.findCount = 0;\r\n            }\r\n        } else {\r\n            this.resetFindText();\r\n            this.cdRef.detectChanges();\r\n        }\r\n    }\r\n\r\n\r\n    nextFindValue(step) {\r\n        if (!this.findResult || !this.findResult.length) {\r\n            return;\r\n        }\r\n        const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));\r\n\r\n        if (this.findCurrent === this.findResult.length) {\r\n            this.findCurrent = 1;\r\n        } else {\r\n            if (step) {\r\n                this.findCurrent = this.findCurrent + step;\r\n                if (step === -1) {\r\n                    if (this.findCurrent <= 0) {\r\n                        this.findCurrent = 1;\r\n                    }\r\n                }\r\n            } else {\r\n                this.findCurrent++;\r\n            }\r\n        }\r\n\r\n        const active = this.el.nativeElement.querySelector('.search-highlight.active');\r\n\r\n        if (active) {\r\n            this.renderer.removeClass(active, 'active');\r\n        }\r\n\r\n        const _index = this.findCurrent - 1;\r\n        const nextRow = this.findResult[_index];\r\n        if (nextRow) {\r\n            this._scrollToNode(nextRow.id);\r\n\r\n            if (this.virtualized) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    if (this['HIGH_LIGHT_TIMER']) {\r\n                        clearTimeout(this['HIGH_LIGHT_TIMER']);\r\n                    }\r\n                    this['HIGH_LIGHT_TIMER'] = setTimeout(() => {\r\n                        const trId = 'rownode-' + nextRow.id;\r\n                        const tr = this.el.nativeElement.querySelector('#' + trId);\r\n                        if (tr) {\r\n                            const highLightDom = tr.querySelector('.search-highlight');\r\n                            if (highLightDom) {\r\n                                this.renderer.addClass(highLightDom, 'active');\r\n                            }\r\n                        }\r\n                    }, 100);\r\n                });\r\n            } else {\r\n                if (allHighLights[_index]) {\r\n                    this.renderer.addClass(allHighLights[_index], 'active');\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    /** æ¥è¯¢å·¥å·æ¡åç«¯å­ç¬¦æ¥è¯¢ */\r\n    /*\r\n    findKeyWords($event) {\r\n        const searchValue = $event.value;\r\n        const field = $event.field;\r\n        this.findField = field;\r\n        if (searchValue && searchValue.length >= 2) {\r\n            this.findValue = searchValue;\r\n\r\n            if (!field) {\r\n                this.writeConsole('Please set a field for the FindField property.', 'warn');\r\n                return;\r\n            }\r\n\r\n            const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);\r\n\r\n            if (result && result.length) {\r\n                this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));\r\n                const firstRowIndex = result[0].index;\r\n\r\n                this.findCount = result.length;\r\n\r\n                const parents = this.searchHandle.findParents(result, this.state.rowNodes);\r\n\r\n                this.findCurrent = 1;\r\n                [...parents, ...result].forEach((r: RowNode) => {\r\n                    this.expandNode(r.id);\r\n                });\r\n\r\n                let y = 0;\r\n                this.state.rowNodes.forEach((row: RowNode, index: number) => {\r\n                    if (row.visible && firstRowIndex > index) {\r\n                        y += this.rowHeight;\r\n                    }\r\n                });\r\n                if (this.psRef && this.psRef.directiveRef) {\r\n                    this.psRef.directiveRef.scrollToY(y - 30);\r\n                }\r\n\r\n                this.highLightKeywords();\r\n            } else {\r\n                this.findResult = [];\r\n                this.findCurrent = 0;\r\n                this.findCount = 0;\r\n            }\r\n        } else {\r\n            this.resetFindText();\r\n            this.cdRef.detectChanges();\r\n        }\r\n    }\r\n\r\n    nextFindValue(step) {\r\n        if (!this.findResult || !this.findResult.length) {\r\n            return;\r\n        }\r\n        const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));\r\n\r\n        if (this.findCurrent === this.findResult.length) {\r\n            this.findCurrent = 1;\r\n        } else {\r\n            if (step) {\r\n                this.findCurrent = this.findCurrent + step;\r\n                if (step === -1) {\r\n                    if (this.findCurrent <= 0) {\r\n                        this.findCurrent = 1;\r\n                    }\r\n                }\r\n            } else {\r\n                this.findCurrent++;\r\n            }\r\n        }\r\n\r\n        const active = this.el.nativeElement.querySelector('.search-highlight.active');\r\n\r\n        let _index = allHighLights.indexOf(active);\r\n\r\n        if (active) {\r\n            this.renderer.removeClass(active, 'active');\r\n        }\r\n\r\n        if (this.virtualized) {\r\n\r\n            _index += !step ? 1 : step;\r\n\r\n            if (allHighLights[_index]) {\r\n                this.renderer.addClass(allHighLights[_index], 'active');\r\n\r\n            } else {\r\n                // åæ»å¨æå®ä½ç½®\r\n                const nextRow = this.findResult[this.findCurrent - 1];\r\n                let y = 0;\r\n                this.state.rowNodes.forEach((row: RowNode, index: number) => {\r\n                    if (row.visible && nextRow.index > index) {\r\n                        y += this.rowHeight;\r\n                    }\r\n                });\r\n\r\n                if (this.psRef && this.psRef.directiveRef) {\r\n                    this.psRef.directiveRef.scrollToY(y - 30, 200);\r\n                }\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    setTimeout(() => {\r\n                        const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');\r\n                        this.renderer.addClass(keyWords[0], 'active');\r\n                    }, 100);\r\n                });\r\n            }\r\n        } else {\r\n            const currentEl: any = allHighLights[this.findCurrent - 1];\r\n            if (currentEl) {\r\n                this.renderer.addClass(currentEl, 'active');\r\n                if (this.psRef && this.psRef.directiveRef) {\r\n                    const sTop = currentEl.closest('td').offsetTop - 30;\r\n                    this.psRef.directiveRef.scrollToY(sTop, 200);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        this.cdRef.detectChanges();\r\n    }\r\n*/\r\n    closeFindPanel() {\r\n        this.showFindInput = false;\r\n        this.resetFindText();\r\n        this.cdRef.detectChanges();\r\n    }\r\n\r\n    private highLightKeywords() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                this.cdRef.detectChanges();\r\n                const allHighLights = this.el.nativeElement.querySelectorAll('.search-highlight');\r\n                if (!allHighLights.length) {\r\n                    return;\r\n                }\r\n                this.renderer.addClass(allHighLights[0], 'active');\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    private resetFindText() {\r\n        this.findValue = '';\r\n        this.findCurrent = 0;\r\n        this.findCount = 0;\r\n        this.findResult = [];\r\n    }\r\n\r\n  \r\n\r\n    scrollToY(y: number, animations = 200) {\r\n        this.state.scrollY = y || 0;\r\n        this.psRef.directiveRef.scrollToY(y, animations);\r\n    }\r\n\r\n    private showOrHideColumn(field: string | string[], isHide: boolean) {\r\n        if (Array.isArray(field)) {\r\n            this.columns.forEach(n => {\r\n                if (field.indexOf(n.field) > -1) {\r\n                    n.visible = !isHide;\r\n                }\r\n            });\r\n        } else {\r\n            this.columns.forEach(n => {\r\n                if (field === n.field) {\r\n                    n.visible = !isHide;\r\n                }\r\n            });\r\n        }\r\n\r\n        this.columnsChanged();\r\n    }\r\n\r\n    showColumn(field: string | string[]) {\r\n        this.showOrHideColumn(field, false);\r\n    }\r\n\r\n    hideColumn(field: string | string[]) {\r\n        this.showOrHideColumn(field, true);\r\n    }\r\n\r\n    showChildsLoading(parentNode: TreeNode) {\r\n        const colspan = this.columns.filter(n => n.visible !== false).length;\r\n        const data = { [this.idField]: 'æ­£å¨å è½½ä¸­....', __colspan__: colspan };\r\n        this.loadChildren([{ data, __childs_loading__: true }], parentNode, false);\r\n    }\r\n\r\n    onChildsPageChanged($event) {\r\n        this.childsPageChanged.emit($event);\r\n    }\r\n\r\n    private trId2DataId(tr) {\r\n        return tr.id.replace('rownode-', '');\r\n    }\r\n\r\n\r\n    // å¿«æ·é®\r\n    onKeydownEvent($event) {\r\n        if (!$event || !this.singleSelect || !this.data || !this.data.length) {\r\n            return;\r\n        }\r\n\r\n        const keys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];\r\n\r\n        if (!keys.includes($event.key) || $event.target.nodeName === 'INPUT') {\r\n            return;\r\n        }\r\n\r\n        $event.stopPropagation();\r\n        $event.preventDefault();\r\n        this.inputGroup.textbox.nativeElement.blur();\r\n        let newIdx;\r\n        const trs = Array.from(this.bodyTable.nativeElement.querySelectorAll('tr'));\r\n        const trCount = trs.length;\r\n        let selectedTrIndex = -1;\r\n\r\n        if (this.selectedRow) {\r\n            selectedTrIndex = trs.findIndex((n: any) => this.trId2DataId(n) === this.selectedRow.id);\r\n        }\r\n\r\n        if ($event.code === 'ArrowDown') {\r\n            newIdx = selectedTrIndex + 1;\r\n        } else if ($event.code === 'ArrowUp') {\r\n            if (selectedTrIndex !== -1) {\r\n                newIdx = selectedTrIndex - 1;\r\n            }\r\n        } else {\r\n            if (this.selectedRow && ($event.code === 'ArrowRight' || $event.code === 'ArrowLeft')) {\r\n                this.toggleExpand(this.selectedRow);\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (newIdx >= 0 && newIdx < trCount) {\r\n            const _tr = trs[newIdx] as any;\r\n            if (_tr) {\r\n                const id = this.trId2DataId(_tr);\r\n                this.selectNode(id);\r\n                _tr.scrollIntoView({ block: 'nearest' });\r\n            }\r\n        }\r\n    }\r\n\r\n    onBeforeShowContextMenu = (e: any) => {\r\n        // row_1_fixedleft  row_1  row_1_fixedright\r\n        const { contextMenuDom, event } = e;\r\n\r\n        let rowID = event.target.id;\r\n\r\n        if (contextMenuDom) {\r\n            rowID = this.trId2DataId(contextMenuDom);\r\n            const rowNode = this.findRowNode(rowID);\r\n\r\n            let go$ = of({show: true});\r\n            if (this.beforeShowContextMenu) {\r\n                go$ = this.beforeShowContextMenu({ data: rowNode, tree: this });\r\n            }\r\n\r\n            return go$.pipe(\r\n                switchMap((r: any) => {\r\n                    if (r.show) {\r\n\r\n                        if (r.menus) {\r\n                            this.contextMenuItems = r.menus;\r\n                            this.detectChanges();\r\n                        }\r\n\r\n                        const viewportW = contextMenuDom.closest('.farris-treetable').offsetWidth;\r\n                        const targetW = contextMenuDom.offsetWidth;\r\n\r\n                        const focusTargetWidth = viewportW > targetW ? targetW : viewportW;\r\n                        return of({ show: true, data: { data: rowNode, tree: this }, focusTargetWidth });\r\n                    } else {\r\n                        return of({ show: false });\r\n                    }\r\n                })\r\n            );\r\n        }\r\n        return of({ show: false });\r\n    }\r\n\r\n    /** æ ¹æ®ä¼ å¥çç¶çº§IDï¼è·åææå­çº§èç¹ */\r\n    getChildNodes(parentId: string): TreeNode[] {\r\n        let nodes = [];\r\n        if (parentId) {\r\n            const rowNode = this.findRowNode(parentId);\r\n            if (rowNode && rowNode.node.children && rowNode.node.children.length) {\r\n                rowNode.node.children.forEach((tn: TreeNode) => {\r\n                    if (tn.selectable) {\r\n                        nodes.push(tn);\r\n                    }\r\n                    nodes = nodes.concat(this.getChildNodes(tn.id));\r\n                });\r\n            }\r\n\r\n            return nodes;\r\n        }\r\n        return []\r\n    }\r\n\r\n    /** æ ¹æ®ä¼ å¥çèç¹IDï¼ è·åææç¶çº§èç¹ */\r\n    getParentNodes(id: string): RowNode[] {\r\n        let nodes = [];\r\n        if (id) {\r\n            const rowNode = this.findRowNode(id);\r\n            if (rowNode && rowNode.parents && rowNode.parents.length) {\r\n                rowNode.parents.forEach((n) => {\r\n                    const rn = this.findRowNode(n);\r\n                    if (rn && rn.node.selectable) {\r\n                        nodes.push(rn);\r\n                    }\r\n                })\r\n            }\r\n\r\n            return nodes;\r\n        }\r\n        return []\r\n    }\r\n\r\n    onFilterRowInput($event, col) {\r\n        this.filterRowConditions = this.filterRowConditions || {};\r\n        this.filterRowConditions[col.field] = $event.target.value;\r\n\r\n        Object.keys(this.filterRowConditions).forEach(n => {\r\n            if (this.filterRowConditions[n] === '' || this.filterRowConditions[n] == null) {\r\n                delete this.filterRowConditions[n];\r\n            }\r\n        });\r\n\r\n        if (this['FILTERCONDITIONS_CHANGED_TIMER']) {\r\n            clearTimeout(this['FILTERCONDITIONS_CHANGED_TIMER']);\r\n        }\r\n\r\n        this['FILTERCONDITIONS_CHANGED_TIMER'] = setTimeout(() => {\r\n            this.searchHandle.searchWithConditions(this.filterRowConditions);\r\n            this.setNewColumnsWidth();\r\n        }, 200);\r\n    }\r\n}\r\n\r\n\r\n@Component({\r\n    selector: '[treeTableBody]',\r\n    template: `\r\n        <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForOf]=\"tt.serializedValue\">\r\n            <ng-container *ngIf=\"serializedNode.visible\">\r\n                <ng-container\r\n                    *ngTemplateOutlet=\"template;\r\n                        context: {$implicit: serializedNode, node: serializedNode.node,\r\n                        rowData: serializedNode.node.data, rowIndex: rowIndex, columns: columns}\">\r\n                </ng-container>\r\n            </ng-container>\r\n        </ng-template>\r\n    `\r\n})\r\nexport class TTBodyComponent {\r\n    /**\r\n     * åéå\r\n     */\r\n    @Input() columns: any[];\r\n\r\n    /** è¡¨ä½æ¨¡æ¿ */\r\n    @Input() template: TemplateRef<any>;\r\n\r\n\r\n    constructor(public tt: TreeTableComponent) { }\r\n}\r\n\r\n// [style.marginLeft]=\"rowNode.level * 16 + 'px'\"\r\n\r\n/**\r\n * æ èç¹å±å¼æå \r\n */\r\n@Component({\r\n    selector: 'farris-treeTableToggler',\r\n    template: `\r\n    <a #toggler style=\"cursor: pointer\"\r\n            class=\"treenode-fold\" *ngIf=\"showLines\"\r\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\r\n            [style.display]=\"isShowTriangle ? '' : 'none'\"\r\n            (click)=\"onClick($event)\"></a>\r\n\r\n    <a #toggler style=\"cursor: pointer\"\r\n            class=\"treenode-fold\"  *ngIf=\"!showLines\"\r\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\r\n            [style.marginLeft.px]=\"rowNode.level * indentSpacing\"\r\n            [style.visibility]=\"isShowTriangle ? 'visible' : 'hidden'\"\r\n            (click)=\"onClick($event)\"></a>\r\n    <span class=\"tree-icon-line\" [style.display]=\"isShowTriangle && showLines? '' : 'none'\"></span>\r\n    <span [style.display]=\"(tt.showIcon && rowNode.node.showIcon) ? 'inline-block': 'none'\" class=\"treenode-icon\" [ngClass]=\"treeNodeIcon\"></span>\r\n\r\n    <tt-checkbox  [rowNode]=\"rowNode\" *ngIf=\"tt.showCheckbox\" [disabled]=\"disabled\" [checked]=\"rowNode.isChecked\" ></tt-checkbox>\r\n    `,\r\n    encapsulation: ViewEncapsulation.None,\r\n    exportAs: 'ttToggler'\r\n})\r\nexport class TreeTableTogglerComponent implements OnInit, AfterViewInit, OnDestroy, DoCheck, OnChanges, AfterViewChecked {\r\n    @HostBinding('class.f-cmp-treetable-toggler') cls = true;\r\n    /**\r\n     * æ èç¹\r\n     */\r\n    @Input() rowNode: RowNode;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() showLines = false;\r\n\r\n    @Input() indentSpacing = 16;\r\n\r\n    treeNodeIcon = {};\r\n    isShowTriangle = false;\r\n    noChilds = false;\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    get offsetWidth() {\r\n        return this.togglerEl.nativeElement.parentElement.offsetWidth;\r\n    }\r\n\r\n    @ViewChild('toggler') togglerEl: ElementRef;\r\n    constructor(public tt: TreeTableComponent, private ngzone: NgZone, private render: Renderer2) {\r\n    }\r\n    ngOnInit() {\r\n        this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);\r\n\r\n        this.isShowTriangle = this.showTriangle();\r\n        this.noChilds = this.hasChildren();\r\n        const expandSub = this.tt.expand.subscribe((node: TreeNode) => {\r\n            if (this.rowNode.id === node.data[this.tt.idField]) {\r\n                this.updateIcon(this.rowNode.node);\r\n                if (this.tt.psRef) {\r\n                    this.tt.psRef.directiveRef.update();\r\n                }\r\n                this.tt.detectChanges();\r\n            }\r\n        });\r\n\r\n        const collapseSub = this.tt.collapse.subscribe((node: TreeNode) => {\r\n            if (this.rowNode.id === node.data[this.tt.idField]) {\r\n                this.updateIcon(this.rowNode.node);\r\n                if (this.tt.psRef) {\r\n                    this.tt.psRef.directiveRef.update();\r\n                }\r\n                this.tt.detectChanges();\r\n            }\r\n        });\r\n\r\n        const addNewSub = this.tt.appendNew.subscribe((e: any) => {\r\n            if (e.parent) {\r\n                if (this.rowNode.id === e.parent.data[this.tt.idField]) {\r\n                    if (this.rowNode.node.leaf || this.rowNode.node.leaf === undefined) {\r\n                        this.rowNode.node.leaf = false;\r\n                    }\r\n                }\r\n\r\n                this.updateIcon(this.rowNode.node);\r\n            }\r\n        });\r\n\r\n        this.subscriptions = [expandSub, collapseSub, addNewSub];\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.showLines && !changes.showLines.isFirstChange()) {\r\n            if (this.showLines) {\r\n                this.render.setStyle(this.togglerEl.nativeElement, 'display', this.isShowTriangle ? '' : 'none');\r\n            } else {\r\n                this.render.removeStyle(this.togglerEl.nativeElement, 'display');\r\n            }\r\n            this.reSetLines();\r\n        }\r\n\r\n        if (changes.rowNode && !changes.rowNode.isFirstChange()) {\r\n            this.updateIcon(this.rowNode.node);\r\n\r\n            // if (changes.rowNode.currentValue.node.children) {\r\n            //     if (!!changes.rowNode.currentValue.node.children.length !== !!changes.rowNode.previousValue.node.children.length) {\r\n            //         this.reSetLines();\r\n            //     }\r\n            // }\r\n            if (this.tt.showLines) {\r\n                let currenChildrenLength = 0;\r\n                let previousChildrenLength = 0;\r\n                if (changes.rowNode.currentValue && changes.rowNode.currentValue.node.children ) {\r\n                    currenChildrenLength = changes.rowNode.currentValue.node.children.length;\r\n                }\r\n\r\n                if (changes.rowNode.previousValue && changes.rowNode.previousValue.node.children) {\r\n                    previousChildrenLength = changes.rowNode.previousValue.node.children.length;\r\n                }\r\n\r\n                if (currenChildrenLength != previousChildrenLength || (!currenChildrenLength && !previousChildrenLength)) {\r\n                    this.reSetLines();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!this.tt.bodyTemplate && this.showLines) {\r\n            setTimeout(() => {\r\n                this.reSetLines();\r\n            });\r\n        }\r\n    }\r\n\r\n    ngDoCheck() {\r\n        // this.isShowTriangle = this.showTriangle();\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        // if (this.tt && this.tt.data) {\r\n        //     this.reSetLines();\r\n        // }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.unAllSubscriptions();\r\n    }\r\n\r\n\r\n    private unAllSubscriptions() {\r\n        this.subscriptions.forEach(s => {\r\n            s.unsubscribe();\r\n        });\r\n        this.subscriptions = [];\r\n    }\r\n\r\n    hasChildren() {\r\n        const tn = this.rowNode.node;\r\n        return tn.leaf === false || this.rowNode.level !== 0 || (tn.children && tn.children.length > 0);\r\n    }\r\n\r\n    showTriangle(): boolean {\r\n        const tn = this.rowNode.node;\r\n\r\n        if (this.tt.loadDataType === 'all') {\r\n            return tn.leaf === false || (tn.children && tn.children.length > 0);\r\n        } else {\r\n            return tn.leaf === false;\r\n        }\r\n    }\r\n\r\n    reSetLines() {\r\n        if (this.togglerEl) {\r\n            const parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');\r\n            if (parentEl) {\r\n                const lineEls = parentEl.querySelectorAll('.treetable-lines');\r\n                for (let k = 0; k < lineEls.length; k++) {\r\n                    lineEls[k].remove();\r\n                }\r\n            }\r\n        }\r\n\r\n        this._renderLines();\r\n    }\r\n\r\n    private _renderLines() {\r\n        if (!this.tt.bodyTemplate) {\r\n            if (this.showLines) {\r\n                this.renderLines();\r\n            } else {\r\n                // this.noLineStyle();\r\n            }\r\n        } else {\r\n            /*\r\n            if (this.togglerEl) {\r\n                if (this.togglerEl.nativeElement.closest('tr')) {\r\n                    const tds = this.togglerEl.nativeElement.closest('tr').querySelectorAll('td');\r\n                    Array.from(tds).forEach(n => {\r\n                        this.render.setStyle(n, 'padding', '0.25rem 0.75rem');\r\n                    });\r\n                }\r\n            } */\r\n        }\r\n    }\r\n\r\n\r\n    private noLineStyle() {\r\n        // this.cls = false;\r\n        if (this.togglerEl) {\r\n            // this.render.setStyle(this.togglerEl.nativeElement, 'margin-left', `${this.rowNode.level * this.indentSpacing}px`);\r\n            this.render.setStyle(this.togglerEl.nativeElement, 'visibility', this.isShowTriangle ? 'visible' : 'hidden');\r\n            this.render.removeStyle(this.togglerEl.nativeElement, 'display');\r\n        }\r\n    }\r\n\r\n    private renderLines() {\r\n        const len = this.rowNode.level;\r\n        if ( !this.togglerEl) {\r\n            return;\r\n        }\r\n        const parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');\r\n\r\n        if (!parentEl) {\r\n            return;\r\n        }\r\n\r\n        const referEl = this.togglerEl.nativeElement.parentElement;\r\n\r\n        if (len === 0 && !this.showTriangle()) {\r\n            this.createLeafNodeLines(referEl, parentEl, true);\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            parentEl.insertBefore(this.newLineElement(), referEl);\r\n\r\n            const nearLine = this.newLineElement(false);\r\n            parentEl.insertBefore(nearLine, referEl);\r\n\r\n            const isLeaf = !this.showTriangle();\r\n            if (isLeaf && i === len - 1) {\r\n                this.createLeafNodeLines(referEl, parentEl);\r\n            }\r\n        }\r\n    }\r\n\r\n    private newLineElement(border = true) {\r\n        const newLineEl = this.render.createElement('div');\r\n        this.render.addClass(newLineEl, 'treetable-lines');\r\n\r\n        if (this.showLines) {\r\n            if (border) {\r\n                this.render.addClass(newLineEl, 'treetable-lines-border-color');\r\n            }\r\n        }\r\n        return newLineEl;\r\n    }\r\n\r\n    /**\r\n     * æé  â or â\r\n     */\r\n    private createLeafNodeLines(containerEl: HTMLElement, parentEl: Element, isTopNode = false) {\r\n        // â\r\n        // <div class=\"treetable-lines\" style=\"border-color: rgb(204, 204, 204);\"></div>\r\n        // <div class=\"treetable-lines treetable-lines-leaf\" style=\"border-color: transparent;\">\r\n        //     <div class=\"normal\"></div>\r\n        // </div>\r\n\r\n        // â\r\n        // <div class=\"treetable-lines\" style=\"border-color: transparent\"></div>\r\n        // <div class=\"treetable-lines treetable-lines-leaf\" style=\"border-color: transparent;\">\r\n        //     <div style=\"corner\"></div>\r\n        // </div>\r\n\r\n        const l1 = this.newLineElement();\r\n        const l2 = this.newLineElement(false);\r\n\r\n        this.render.addClass(l2, 'treetable-lines-leaf');\r\n        const dessert = this.render.createElement('div');\r\n\r\n        if (this.showLines) {\r\n            let cls = 'normal';\r\n            if (this.rowNode.last) {\r\n                cls = 'corner';\r\n                this.render.removeClass(l1, 'treetable-lines-border-color');\r\n            }\r\n            l2.appendChild(dessert);\r\n            this.render.addClass(dessert, cls);\r\n            this.render.addClass(dessert, 'treetable-lines-border-color');\r\n        }\r\n\r\n        parentEl.insertBefore(l1, containerEl);\r\n        parentEl.insertBefore(l2, containerEl);\r\n\r\n        if (isTopNode) {\r\n            this.render.setStyle(l2, 'marginRight', '3px');\r\n        }\r\n    }\r\n\r\n    private registerClickEvent() {\r\n        if (this.togglerEl) {\r\n            this.render.listen(this.togglerEl.nativeElement, 'click', this.onClick.bind(this));\r\n        }\r\n    }\r\n\r\n    onClick(event: Event) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n\r\n        if (this.rowNode.node['showLoading']) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.tt.disabled) {\r\n            this.tt.toggleExpand(this.rowNode.node);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private updateIcon(treeNode: TreeNode) {\r\n        this.isShowTriangle = this.showTriangle();\r\n        this.noChilds = this.hasChildren();\r\n        this.treeNodeIcon = this.tt.getTreeIcon(treeNode);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * éä¸­è¡ç»ä»¶\r\n */\r\n@Directive({\r\n    selector: '[selectRow]',\r\n    exportAs: 'row'\r\n})\r\nexport class TreeTableSelectRowDirective implements DoCheck, OnDestroy, OnInit, OnChanges {\r\n\r\n    @Input('selectRow') rowNode: RowNode;\r\n    @Input() rowIndex: number;\r\n\r\n    @Input() selectRowDisabled: boolean;\r\n\r\n    subscription: Subscription;\r\n\r\n    public prevent = false;\r\n    public timer: any;\r\n    @Input() delay = 0;\r\n\r\n    constructor(public tt: TreeTableComponent, private el: ElementRef, private render: Renderer2, private ngZone: NgZone) {\r\n        this.subscription = this.tt.selectNodeChangedSubject.subscribe((ids: string) => {\r\n            if (ids && this.rowNode) {\r\n                const idArr = ids.split(',');\r\n                if (idArr.indexOf(this.rowNode.id) > -1) {\r\n                    this.toggleClass();\r\n                    this.rowNode.node['elementRef'] = this.el;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnInit() {\r\n        // this.rowNode.node.selectable = !this.selectRowDisabled;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        // if (changes.selectRowDisabled && !changes.selectRowDisabled.isFirstChange()) {\r\n        //     this.rowNode.node.selectable = !changes.selectRowDisabled.currentValue;\r\n        // }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n            this.subscription = null;\r\n        }\r\n    }\r\n\r\n    ngDoCheck() {\r\n        if (this.tt.bodyTemplate) {\r\n            if (!this.tt.isSelected(this.rowNode.node)) {\r\n                this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');\r\n            }\r\n        }\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onclick(event: MouseEvent) {\r\n        if (this.isEnabled()) {\r\n            // this.rowClick(event);\r\n            if (this.delay !== 0) {\r\n                if (!this.prevent) {\r\n                    this.prevent = true;\r\n                    this.timer = setTimeout(() => {\r\n                        this.rowClick(event);\r\n                        this.prevent = false;\r\n                    }, this.delay);\r\n                }\r\n            } else {\r\n                this.rowClick(event);\r\n            }\r\n        }\r\n\r\n        // event.stopPropagation();\r\n    }\r\n\r\n    isEnabled() {\r\n        return !this.tt.disabled && this.selectRowDisabled !== true;\r\n    }\r\n\r\n    private rowClick(event: Event) {\r\n        event.stopPropagation();\r\n\r\n        this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event, type: 'row' }).subscribe((e: boolean) => {\r\n            if (!e) { return; }\r\n            this.tt.handleRowClick({\r\n                originalEvent: event,\r\n                rowNode: this.rowNode,\r\n                rowIndex: this.rowIndex\r\n            });\r\n\r\n            this.ngZone.runOutsideAngular(() => {\r\n                this.toggleClass();\r\n            });\r\n        });\r\n    }\r\n\r\n    toggleClass() {\r\n        if (!this.tt.bodyTemplate) {\r\n            if (this.tt.isSelected(this.rowNode.node)) {\r\n                if (this.tt.singleSelect) {\r\n                    this.tt.el.nativeElement.querySelectorAll('.farris-treetable-tbody>tr.farris-table-selectedrow').forEach(n => {\r\n                        this.render.removeClass(n, 'farris-table-selectedrow');\r\n                    });\r\n                }\r\n                this.render.addClass(this.el.nativeElement, 'farris-table-selectedrow');\r\n            } else {\r\n                if (!this.tt.keepSelect) {\r\n                    this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * è¡¨å¤´å¨éç»ä»¶\r\n */\r\n@Component({\r\n    selector: 'tt-header-checkbox',\r\n    template: `\r\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\" style=\"top: -2px;\">\r\n        <input type=\"checkbox\" #chkAll class=\"custom-control-input\"  [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class TreeTableHeaderCheckboxComponent implements OnInit {\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Output() checkedChange = new EventEmitter();\r\n\r\n    @ViewChild('chkAll') chkAll: ElementRef;\r\n\r\n    constructor(public tt: TreeTableComponent, public ttService: TreetableService) {\r\n    }\r\n\r\n    ngOnInit() { }\r\n\r\n    handleClick(event) {\r\n        if (!this.disabled && !this.tt.disabled) {\r\n            const beforeEvent = !this.checked ? this.tt.beforeCheckAll : this.tt.beforeUnCheckAll;\r\n            this.tt['checkall_CLICKED'] = true;\r\n            beforeEvent({ instance: this.tt, checked: !this.checked }).subscribe(e => {\r\n                // å¨éåè½\r\n                this.chkAll.nativeElement.indeterminate = false;\r\n                this.checked = !this.checked;\r\n                this.tt.toggleNodesWithCheckbox(event, this.checked);\r\n                setTimeout(() => {\r\n                    this.tt['checkall_CLICKED'] = false;\r\n                }, 50);\r\n            });\r\n        }\r\n        event.stopPropagation();\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * è¡¨ä½checkbox ç»ä»¶\r\n */\r\n@Component({\r\n    selector: 'tt-checkbox',\r\n    template: `\r\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\">\r\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\r\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\r\n    </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        :host {\r\n            vertical-align: middle;\r\n        }\r\n        :host .custom-checkbox {\r\n            opacity: 1;\r\n            float: none;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class TreeTableCheckboxComponent implements OnInit, OnDestroy {\r\n    @HostBinding('class.tree-toggler-checkbox') cls1 = true;\r\n    @Input() checked: boolean;\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() rowNode: RowNode;\r\n\r\n    @Output() checkedChange = new EventEmitter();\r\n\r\n    @ViewChild('chk') chk: ElementRef;\r\n    destroy$ = new Subject();\r\n    constructor(public tt: TreeTableComponent, public ttService: TreetableService) {\r\n        this.ttService = this.tt.ttService;\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n    ngOnInit() {\r\n        this.chk.nativeElement.indeterminate = this.rowNode.indeterminate || false;\r\n\r\n        this.ttService.changeCheckboxStatus$.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            map(n => {\r\n                if (n.id === this.rowNode.id) {\r\n                    return n;\r\n                }\r\n                return null;\r\n            })\r\n        ).subscribe(n => {\r\n            if (n) {\r\n                this.chk.nativeElement.indeterminate = n.indeterminate;\r\n                this.checked = n.isChecked;\r\n                this.chk.nativeElement.checked = this.checked;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    handleClick(event) {\r\n        event.stopPropagation();\r\n        if (!this.disabled) {\r\n            this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event, type: 'checkbox' }).subscribe((e: boolean) => {\r\n                if (!e) { return; }\r\n                this.checked = !this.checked;\r\n                if (this.tt.singleSelect) {\r\n                    this.tt.clearAll();\r\n                    if (this.checked) {\r\n                        this.tt.selectNode(this.rowNode.id, true);\r\n                    } else {\r\n                        this.tt.unSelectNode(this.rowNode.id, true);\r\n                    }\r\n                } else {\r\n                    this.tt.toggleNodeWithCheckbox(event, this.rowNode, this.checked);\r\n                }\r\n            });\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[dblclick]'\r\n})\r\nexport class DblClickRowDirective implements OnInit {\r\n    @Input('dblclick') enableDblClick = false;\r\n    @Input() dblclickNode: RowNode;\r\n\r\n    constructor(\r\n        public tt: TreeTableComponent, public el: ElementRef, public ttService: TreetableService,\r\n        @Optional() @Self() public selectRowDir: TreeTableSelectRowDirective) {\r\n            this.ttService = this.tt.ttService;\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (!this.enableDblClick) {\r\n            this.selectRowDir.delay = 0;\r\n        } else {\r\n            this.selectRowDir.delay = 200;   \r\n        }\r\n    }\r\n\r\n\r\n    @HostListener('dblclick', ['$event'])\r\n    ondblclick(event: Event) {\r\n        const prevEl = ( event.target as any).previousSibling;\r\n        if (prevEl && prevEl.type === 'checkbox') {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.tt.disabled) {\r\n            return false;\r\n        }\r\n\r\n        if (this.tt.multiSelect && this.dblclickNode) {\r\n            if (this.dblclickNode.node.leaf) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n\r\n        const clsName = event.target['className'];\r\n\r\n        let togglerTag = null;\r\n        if (clsName.indexOf('f-cmp-treetable-toggler') > -1) {\r\n            togglerTag = event.target['querySelector']('.treenode-fold');\r\n        } else {\r\n            if (event.target['className'].indexOf('treenode-fold') > -1) {\r\n                togglerTag = event.target as any;\r\n            }\r\n        }\r\n\r\n        if (togglerTag && togglerTag.style.visibility === 'visible') {\r\n            return false;\r\n        }\r\n\r\n        if (this.selectRowDir) {\r\n            this.selectRowDir.prevent = false;\r\n            clearTimeout(this.selectRowDir.timer);\r\n            if (this.selectRowDir.rowNode && this.enableDblClick) {\r\n                const rn = this.selectRowDir.rowNode;\r\n                if (rn.node.children && rn.node.children.length && !rn.node.leaf && this.tt.dblClickExpand) {\r\n                    this.tt.toggleExpand(rn.node);\r\n                }\r\n                this.tt.dblClick.emit(rn.node);\r\n            }\r\n        }\r\n\r\n        // event.stopPropagation();\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[customRowStyle]'\r\n})\r\nexport class CustomRowStyleDirective implements OnInit, OnChanges {\r\n    @Input('customRowStyle') rowNode: RowNode;\r\n    @Input('field') col: TreeTableColumn;\r\n\r\n    constructor(private injector: Injector, private ngZone: NgZone,\r\n        private el: ElementRef, private tt: TreeTableComponent,\r\n        public utils: CommonUtils, private render: Renderer2) {\r\n    }\r\n    ngOnInit() {\r\n        if (this.col && this.tt.fixedColumns && this.tt.fixedHeader && this.col.fixed) {\r\n            if (this.col.fixed === 'left' || this.col.fixed === 'right') {\r\n                this.setRowStyle();\r\n            }\r\n            return;\r\n        } else {\r\n            this.setRowStyle();\r\n        }\r\n    }\r\n\r\n    private setRowStyle() {\r\n        const fn = this.tt.rowStyler;\r\n        if (fn) {\r\n            const sty = fn(this.rowNode.node);\r\n            if (sty) {\r\n                if (typeof sty === 'object' && (sty.style || sty.cls)) {\r\n                    if (sty.style) {\r\n                        Object.keys(sty.style).forEach(s => {\r\n                            this.render.setStyle(this.el.nativeElement, s, sty.style[s]);\r\n                        });\r\n                    }\r\n\r\n                    if (sty.cls) {\r\n                        sty.cls.split(',').forEach(c => {\r\n                            this.render.addClass(this.el.nativeElement, c);\r\n                        });\r\n                    }\r\n\r\n                } else {\r\n                    if (Array.isArray(sty) || typeof sty === 'string') {\r\n                        const cls = this.tt.getRowCls(this.rowNode);\r\n                        if (cls && Object.keys(cls).length) {\r\n                            Object.keys(cls).forEach(c => {\r\n                                if (cls[c]) {\r\n                                    this.render.addClass(this.el.nativeElement, c);\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        Object.keys(sty).forEach(s => {\r\n                            this.render.setStyle(this.el.nativeElement, s, sty[s]);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowNode && !changes.rowNode.isFirstChange()) {\r\n            this.setRowStyle();\r\n        }\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[customCellStyle]'\r\n})\r\nexport class TTCustomCellStyleDirective implements OnInit, OnChanges {\r\n    @Input('customCellStyle') column: TreeTableColumn;\r\n    @Input() rowNode: RowNode;\r\n    @Input() rowIndex: any;\r\n\r\n    constructor(private injector: Injector, private ngZone: NgZone,\r\n        private el: ElementRef, private tt: TreeTableComponent,\r\n        public utils: CommonUtils, private render: Renderer2) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.tt && this.tt.getCellCls) {\r\n            this.setCellStyle();\r\n        }\r\n\r\n        if (!this.tt.showBorder && this.tt.columns.length === 1) {\r\n            this.render.setStyle(this.el.nativeElement, 'border-width', '0px');\r\n        }\r\n    }\r\n\r\n    private setCellStyle() {\r\n        const cellCls = this.tt.getCellCls(this.rowNode, this.column.field);\r\n        if (this.column && this.column.styler) {\r\n            if (cellCls && Object.keys(cellCls).length) {\r\n                Object.keys(cellCls).forEach(c => {\r\n                    if (cellCls[c]) {\r\n                        this.render.addClass(this.el.nativeElement, c);\r\n                    }\r\n                });\r\n            }\r\n\r\n            const rowData = this.rowNode.node.data;\r\n            const ccs = this.column.styler(this.utils.getValue(this.column.field, rowData), rowData, this.rowIndex, this.rowNode);\r\n            if (ccs) {\r\n                if (ccs.style || ccs.cls) {\r\n                    if (ccs.style) {\r\n                        Object.keys(ccs.style).forEach(s => {\r\n                            this.render.setStyle(this.el.nativeElement, s, ccs.style[s]);\r\n                        });\r\n                    }\r\n\r\n                    if (ccs.cls) {\r\n                        ccs.cls.split(',').forEach(c => {\r\n                            if (c[0] === '!') {\r\n                                this.render.removeClass(this.el.nativeElement, c.substring(1));\r\n                            } else {\r\n                                this.render.addClass(this.el.nativeElement, c);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            \r\n            let _sty = cellCls || {};\r\n            const rowStyle = this.tt.getRowCls(this.rowNode) || {};\r\n\r\n            const hasBackground = Object.keys(cellCls).find(n => {\r\n                return ['background', 'background-color', 'backgroundcolor'].indexOf(n.toLowerCase()) > -1;\r\n            });\r\n\r\n            let _rowStyles = rowStyle;\r\n            if (rowStyle.style) {\r\n                _rowStyles = rowStyle.style;\r\n            }\r\n\r\n            let _cellStyles = _sty;\r\n            if (_sty.style) {\r\n                _cellStyles = _sty.style;\r\n            }\r\n\r\n\r\n            if (hasBackground) {\r\n                _sty = Object.assign(_rowStyles, _cellStyles);\r\n            } else {\r\n                _sty = Object.assign(_cellStyles, _rowStyles);\r\n            }\r\n            \r\n            Object.keys(_sty).forEach(s => {\r\n                this.render.setStyle(this.el.nativeElement, s, _sty[s]);\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.rowNode && !changes.rowNode.isFirstChange()) {\r\n            this.setCellStyle();\r\n        }\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[resizable-column]'\r\n})\r\nexport class TTResizableColumnDirective implements AfterViewInit, OnDestroy, OnChanges {\r\n    @Input('resizable-column') enableResize = true;\r\n    resizer: HTMLSpanElement;\r\n    resizerMouseDownListener: any;\r\n    documentMouseMoveListener: any;\r\n    documentMouseUpListener: any;\r\n\r\n    constructor(\r\n        public tt: TreeTableComponent, public ngzone: NgZone,\r\n        public el: ElementRef, public render: Renderer2) {\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.isEnable()) {\r\n            this.render.addClass(this.el.nativeElement, 'resizable-column');\r\n\r\n            this.resizer = document.createElement('span');\r\n            this.resizer.className = 'column-resizer';\r\n            this.el.nativeElement.appendChild(this.resizer);\r\n\r\n            this.ngzone.runOutsideAngular(() => {\r\n                this.resizerMouseDownListener = this.onMouseDown.bind(this);\r\n                this.resizer.addEventListener('mousedown', this.resizerMouseDownListener);\r\n\r\n                this.el.nativeElement.addEventListener('mouseenter', this.onMouseEnter.bind(this));\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.enableResize && !changes.enableResize.isFirstChange()) {\r\n            if (!this.isEnable() && this.resizer) {\r\n                this.resizer.remove();\r\n            }\r\n        }\r\n    }\r\n\r\n    isEnable() {\r\n        return this.tt.resizableColumns && !this.tt.autoWidth && this.enableResize;\r\n    }\r\n\r\n    bindDocumentEvents() {\r\n        this.ngzone.runOutsideAngular(() => {\r\n            this.documentMouseMoveListener = this.onMouseMove.bind(this);\r\n            document.addEventListener('mousemove', this.documentMouseMoveListener);\r\n\r\n            this.documentMouseUpListener = this.onMouseUp.bind(this);\r\n            document.addEventListener('mouseup', this.documentMouseUpListener);\r\n        });\r\n    }\r\n\r\n    unbindDocumentEvents() {\r\n        if (this.documentMouseMoveListener) {\r\n            document.removeEventListener('mousemove', this.documentMouseMoveListener);\r\n            this.documentMouseMoveListener = null;\r\n        }\r\n\r\n        if (this.documentMouseUpListener) {\r\n            document.removeEventListener('mouseup', this.documentMouseUpListener);\r\n            this.documentMouseUpListener = null;\r\n        }\r\n    }\r\n\r\n    onMouseDown(event: Event) {\r\n        if (this.isEnable()) {\r\n            this.tt.onColumnResizeBegin(event);\r\n            this.bindDocumentEvents();\r\n        }\r\n    }\r\n\r\n    onMouseEnter() {\r\n    }\r\n\r\n    onMouseMove(event: Event) {\r\n        this.tt.onColumnResize(event);\r\n    }\r\n\r\n    onMouseUp(event: Event) {\r\n        this.tt.onColumnResizeEnd(event, this.el.nativeElement);\r\n        this.unbindDocumentEvents();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.resizerMouseDownListener) {\r\n            this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);\r\n        }\r\n\r\n        this.unbindDocumentEvents();\r\n    }\r\n\r\n}\r\n","import { debounceTime, map, auditTime, filter } from 'rxjs/operators';\r\nimport { Component, OnInit, EventEmitter, Output, ElementRef,\r\n    ViewChild, OnDestroy, NgZone, Injector, AfterViewInit, Input } from '@angular/core';\r\nimport { Subscription, fromEvent } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'find-input',\r\n    template: `\r\n        <div class=\"f-find-input\" style=\"\">\r\n            <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                    <select class=\"form-control\" [(ngModel)]=\"findField\">\r\n                        <option *ngFor=\"let col of columns\" value=\"{{col.field}}\">{{ col.title }}</option>\r\n                    </select>\r\n                </div>\r\n                <input #input type=\"text\" placeholder=\"è³å°2ä¸ªå­ç¬¦\" class=\"form-control\"\r\n                    (keydown.esc)=\"onClose($event)\" (keydown.enter)=\"onEnter($event, 0)\">\r\n                <div class=\"input-group-append\">\r\n                    <span class=\"input-group-text\">{{current}}/{{count}}</span>\r\n                    <button class=\"btn btn-outline-secondary\" type=\"button\" title=\"ä¸ä¸ä¸ª\"\r\n                        [disabled]=\"current === 0\" (click)=\"onEnter($event, -1)\">\r\n                        <span class=\"f-icon f-icon-arrow-chevron-up\"></span>\r\n                    </button>\r\n                    <button class=\"btn btn-outline-secondary\" type=\"button\" title=\"ä¸ä¸ä¸ª\"\r\n                    [disabled]=\"current === count\" (click)=\"onEnter($event, 1)\">\r\n                        <span class=\"f-icon f-icon-arrow-chevron-down\"></span>\r\n                    </button>\r\n                    <button class=\"btn btn-outline-secondary\" type=\"button\" title=\"å³é­\" (click)=\"onClose($event)\">\r\n                        <span class=\"f-icon f-icon-close\"></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        .f-find-input {\r\n            width: 300px; height: 40px; background: #fefefe; position: absolute; right: 0; z-index: 10; padding: 5px;\r\n            box-shadow: 0px 1px 7px 0px #bdbdbd;\r\n            border-radius: 6px;\r\n        }\r\n        .f-find-input .input-group-text { border-right: 1px solid #ccc; font-size: 10px }\r\n        .f-find-input .input-group-append { background: #fff; }\r\n        .f-find-input .input-group-append button { padding:1px 6px;}\r\n        .f-find-input .input-group-append button span{position: relative; top: 2px;}\r\n        `\r\n    ]\r\n})\r\nexport class FindInputComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    @Input() current = 0;\r\n    @Input() count = 0;\r\n    @Input() columns = [];\r\n\r\n    @Output() close = new EventEmitter();\r\n    @Output() valueChanged = new EventEmitter();\r\n    @Output() enterHandler = new EventEmitter();\r\n\r\n    @ViewChild('input') input: ElementRef;\r\n    findField = '';\r\n    private keyupEventSub: Subscription = null;\r\n\r\n    constructor(private el: ElementRef, private ngZone: NgZone, private injector: Injector) { }\r\n\r\n    ngOnInit() {\r\n        if (this.columns.length) {\r\n            this.columns = this.columns.filter(c => !c.formatter && c.field);\r\n            this.findField = this.columns[0].field;\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.keyupEventSub = fromEvent(this.input.nativeElement, 'keyup').pipe(\r\n                filter((e: any) => (e.switch || e.keyCode) !== 13),\r\n                debounceTime(200),\r\n                map((e: any) => e.target.value)\r\n            ).subscribe((v) => {\r\n                this.valueChanged.emit({value: v, field: this.findField});\r\n            });\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.input.nativeElement.focus();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.keyupEventSub) {\r\n            this.keyupEventSub.unsubscribe();\r\n        }\r\n        this.keyupEventSub = null;\r\n    }\r\n\r\n    onClose(event) {\r\n        this.close.emit();\r\n        return false;\r\n    }\r\n\r\n    onEnter($event, step) {\r\n        this.enterHandler.emit(step);\r\n        return false;\r\n    }\r\n\r\n}\r\n","import { TreeTableComponent } from './../treetable.component';\r\nimport { Component, Input, OnInit, Injector, ChangeDetectorRef, EventEmitter, Output, OnChanges, SimpleChanges, DoCheck, ViewChild, ElementRef } from '@angular/core';\r\nimport { TreeNode } from '../types/treenode';\r\nimport { filter } from 'rxjs/operators';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Component({\r\n    selector: 'nodes-pager',\r\n    templateUrl: './nodes-pager.component.html',\r\n    styles: [\r\n        `\r\n        .treetable-nodes-pagerbar { height: 22px; line-height: 22px; list-style: none}\r\n        .treetable-nodes-pagerbar li { float: left; box-sizing: border-box; }\r\n        .treetable-nodes-pagerbar .pager-btn {\r\n            width: 22px;\r\n            height: 22px;\r\n            text-align: center;\r\n            border: 1px solid #ccc;\r\n            background: rgb(248 249 250);\r\n            cursor: pointer;\r\n        }\r\n        .treetable-nodes-pagerbar .pager-btn:hover {\r\n            background: white;\r\n        }\r\n        .treetable-nodes-pagerbar .prev {}\r\n        .treetable-nodes-pagerbar .next {\r\n            border-left: 0;\r\n        }\r\n\r\n        .pager-btn.disabled{\r\n            color: rgb(204 204 204);\r\n            pointer-events: none;\r\n        }\r\n        .treetable-nodes-pagerbar .pageinfo {\r\n            margin-right: 5px;\r\n            padding-left: 0;\r\n            font-weight: 400;\r\n            padding-right: 5px;\r\n        }\r\n\r\n        .treetable-nodes-pagerbar .page-index {\r\n            border: 0;\r\n            background: transparent;\r\n            outline: none;\r\n            appearance: none;\r\n            padding-left: 5px;\r\n            min-width: 50px;\r\n            position: absolute;\r\n            height: 20px;\r\n            text-align: left;\r\n            opacity: 0;\r\n            left: 0;\r\n        }\r\n\r\n        .treetable-nodes-pagerbar .page-number-list {\r\n            height: 20px;\r\n            min-width: 30px;\r\n            max-width: 50px;\r\n            overflow: hidden;\r\n            text-align: center;\r\n            position: relative;\r\n            border-bottom: 1px solid #ced4da;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class TreetableNodesPagerComponent implements OnInit, OnChanges {\r\n    @Input() disabled = false;\r\n    @Input() context: any;\r\n    @ViewChild('pagerList') pagerListEl: ElementRef<any>;\r\n    @Output() pageChange = new EventEmitter();\r\n    @Input() showTotal = false;\r\n\r\n    showPager = new BehaviorSubject(false);\r\n    pagerInfo = null;\r\n\r\n    get pagers() {\r\n        const c = this.getPagerCount();\r\n        if (c) {\r\n            return new Array(c);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    constructor(private tt: TreeTableComponent,  private cd: ChangeDetectorRef, private injector: Injector) {\r\n        if (this.tt) {\r\n            this.tt.expand.pipe(\r\n                filter((node: any) => {\r\n                    return node.id === this.context.node.id && node.pagination && node.children.filter(n => !n.__childs_loading__).length;\r\n                })\r\n            ).subscribe(\r\n                (node: TreeNode) => {\r\n                    this.pagerInfo = {...node.pagination};\r\n                    this.showPager.next(true);\r\n                }\r\n            );\r\n\r\n            this.tt.appendNew.subscribe(\r\n                (e: any) => {\r\n                    const node = e.parent;\r\n                    if (node.id === this.context.node.id && node.pagination) {\r\n                        this.pagerInfo = {...node.pagination};\r\n                        this.showPager.next(true);\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.tt.collapse.subscribe(\r\n                (node: TreeNode) => {\r\n                    if (node.id === this.context.node.id) {\r\n                        this.showPager.next(false);\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.setPagerInfo();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.context && !changes.context.isFirstChange()) {\r\n            this.setPagerInfo();\r\n        }\r\n    }\r\n\r\n    private setPagerInfo() {\r\n        if (this.context) {\r\n            const { node } = this.context;\r\n            if (node && node.pagination) {\r\n                this.pagerInfo = { ...node.pagination };\r\n                this.showPager.next(\r\n                    node.expanded && node.pagination\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    getPagerCount() {\r\n        const { pageSize, total } = this.pagerInfo;\r\n        if (!total) {\r\n            return 0;\r\n        } else {\r\n            return Math.ceil(total / pageSize);\r\n        }\r\n    }\r\n\r\n    isFirstPager() {\r\n        return this.pagerInfo.pageIndex === 1;\r\n    }\r\n\r\n    isLastPager() {\r\n        return this.pagerInfo.pageIndex === this.getPagerCount();\r\n    }\r\n\r\n    /**\r\n     * Go to the previous page\r\n     */\r\n    previous($event: any) {\r\n        $event.stopPropagation();\r\n        this.setCurrent(this.pagerInfo.pageIndex - 1, this.pagerInfo.pageSize);\r\n    }\r\n\r\n    /**\r\n     * Go to the next page\r\n     */\r\n    next($event: any) {\r\n        $event.stopPropagation();\r\n        this.setCurrent(this.pagerInfo.pageIndex + 1, this.pagerInfo.pageSize);\r\n    }\r\n\r\n    setCurrent(page: number, pageSize?: number, $event?: any) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        this.pageChange.emit({ pageIndex: page, pageSize, node: this.context.node, context: this.context });\r\n    }\r\n\r\n    pagerChanged(newPageIndex: number) {\r\n        this.setCurrent(newPageIndex, this.pagerInfo.pageSize);\r\n    }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'childs-loading',\r\n    template: `\r\n    <div class=\"loading\">\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n    </div>\r\n    `,\r\n    styles: [\r\n        `\r\n        .loading{\r\n            width: 150px;\r\n            height: 10px;\r\n            margin: 0 auto;\r\n            margin-top:10px;\r\n            margin-bottom: 20px;\r\n        }\r\n        .loading span{\r\n            display: inline-block;\r\n            width: 10px;\r\n            height: 100%;\r\n            margin-right: 5px;\r\n            border-radius: 50%;\r\n            background: #59a1ff;\r\n            -webkit-animation: load 1.04s ease infinite;\r\n        }\r\n        .loading span:last-child{\r\n            margin-right: 0px;\r\n        }\r\n        @-webkit-keyframes load{\r\n            0%{\r\n                opacity: 1;\r\n                -webkit-transform: scale(1.3);\r\n            }\r\n            100%{\r\n                opacity: 0.2;\r\n                -webkit-transform: scale(.3);\r\n            }\r\n        }\r\n        .loading span:nth-child(1){\r\n            -webkit-animation-delay:0.13s;\r\n        }\r\n        .loading span:nth-child(2){\r\n            -webkit-animation-delay:0.26s;\r\n        }\r\n        .loading span:nth-child(3){\r\n            -webkit-animation-delay:0.39s;\r\n        }\r\n        .loading span:nth-child(4){\r\n            -webkit-animation-delay:0.52s;\r\n        }\r\n        .loading span:nth-child(5){\r\n            -webkit-animation-delay:0.65s;\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class ChildsLoadingComponent implements OnInit {\r\n    constructor() { }\r\n\r\n    ngOnInit(): void { }\r\n}\r\n","import { CommonUtils } from '@farris/ui-common';\r\nimport { TreeNode } from './types/treenode';\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeTableColumn } from './types/treetable-column';\r\n\r\n@Pipe({name: 'tipmsg'})\r\nexport class CellTipsPipe implements PipeTransform {\r\n    constructor(private commonUtils: CommonUtils) {}\r\n    transform(col: any, ...args: any[]): any {\r\n        if (col.showTips) {\r\n            return this.getCellTooltipContent(col, args[0]);\r\n        }\r\n        return  '';\r\n    }\r\n\r\n    private getCellTooltipContent(col: TreeTableColumn, tn: TreeNode) {\r\n        let txt = this.commonUtils.getValue(col.field, tn.data);\r\n\r\n        if (col.tipContent) {\r\n            if ( typeof col.tipContent === 'string') {\r\n                txt = col.tipContent;\r\n            } else if (typeof col.tipContent === 'function') {\r\n                txt = col.tipContent(txt, tn.data, col);\r\n            }\r\n        } else {\r\n            if (col.formatter) {\r\n                if (typeof col.formatter === 'object') {\r\n                    if (col.formatter.type === 'enum') {\r\n                        txt = this.commonUtils.getEnumTitleFromColumnOptions(txt, col.formatter.options);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return txt;\r\n    }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeNode } from './types/treenode';\r\n\r\n@Pipe({name: 'disablenode'})\r\nexport class DisableNodePipe implements PipeTransform {\r\n    transform(node: TreeNode, ...args: any[]): any {\r\n        const selectable = !node.selectable;\r\n        let selectable2 = false;\r\n        if (args && args.length) {\r\n            if (args[0]) {\r\n                selectable2 = args[0]({node});\r\n            }\r\n\r\n            if (args[1]) {  // æ è¡¨ç¦ç¨\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return selectable || selectable2;\r\n    }\r\n}","\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { DataColumnModule } from '@farris/ui-common/column';\r\nimport { ResizeService } from '@farris/ui-common/events';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { PaginationModule } from '@farris/ui-pagination';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { FarrisContextMenuModule } from '@farris/ui-context-menu';\r\n\r\nimport { HighlightPipe } from './high-light.pipe';\r\nimport { TTHotkeys } from './hotkeys';\r\nimport { TreeTableComponent, TTBodyComponent,\r\n    TreeTableTogglerComponent,\r\n    TreeTableSelectRowDirective,\r\n    TreeTableCheckboxComponent,\r\n    TreeTableHeaderCheckboxComponent,\r\n    DblClickRowDirective,\r\n    TTResizableColumnDirective,\r\n    TreeTableColumnDirective,\r\n    TTCustomCellStyleDirective,\r\n    CustomRowStyleDirective} from './treetable.component';\r\nimport { TreetableService } from './treetable.service';\r\nimport { FindInputComponent } from './find-input.component';\r\nimport { TreetableNodesPagerComponent } from './nodes_pager/nodes-pager.component';\r\nimport { ChildsLoadingComponent } from './nodes_pager/childs-loading.component';\r\nimport { CellTipsPipe } from './cell-tips.pipe';\r\nimport { DisableNodePipe } from './disable-node.pipe';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisCommonModule.forRoot(),\r\n        PerfectScrollbarModule,\r\n        InputGroupModule,\r\n        LocaleModule.forRoot(),\r\n        DataColumnModule.forRoot(),\r\n        PaginationModule,\r\n        FarrisContextMenuModule,\r\n        FarrisFormsModule\r\n    ],\r\n    declarations: [\r\n        TreeTableComponent,\r\n        TTBodyComponent,\r\n        TreeTableTogglerComponent,\r\n        TreeTableSelectRowDirective,\r\n        TreeTableCheckboxComponent,\r\n        TreeTableHeaderCheckboxComponent,\r\n        DblClickRowDirective,\r\n        TTResizableColumnDirective,\r\n        TreeTableColumnDirective,\r\n        TTCustomCellStyleDirective,\r\n        FindInputComponent,\r\n        HighlightPipe,\r\n        CustomRowStyleDirective,\r\n        TreetableNodesPagerComponent,\r\n        ChildsLoadingComponent,\r\n        CellTipsPipe,\r\n        DisableNodePipe\r\n    ],\r\n    exports: [\r\n        TreeTableComponent,\r\n        TTBodyComponent,\r\n        TreeTableTogglerComponent,\r\n        TreeTableSelectRowDirective,\r\n        TreeTableCheckboxComponent,\r\n        TreeTableHeaderCheckboxComponent,\r\n        DblClickRowDirective,\r\n        TTResizableColumnDirective,\r\n        FarrisCommonModule,\r\n        TTCustomCellStyleDirective,\r\n        TreeTableColumnDirective,\r\n        HighlightPipe,\r\n        CustomRowStyleDirective,\r\n        TreetableNodesPagerComponent,\r\n        ChildsLoadingComponent,\r\n        CellTipsPipe,\r\n        DisableNodePipe,\r\n        FarrisContextMenuModule\r\n    ],\r\n    providers: [\r\n        TreetableService,\r\n        ResizeService,\r\n        TTHotkeys\r\n    ]\r\n})\r\nexport class TreeTableModule {\r\n\r\n}\r\n"],"names":[],"mappings":"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"}
