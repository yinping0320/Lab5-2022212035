/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { switchMap, takeUntil } from 'rxjs/operators';
/*
* @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-12-18 18:44:13
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-29 08:41:39
 * @Company: Inspur
 * @Version: v0.0.1
 */
import { Component, Input, TemplateRef, Directive, ContentChildren, QueryList, HostListener, Output, EventEmitter, ElementRef, Injector, ViewChild, Optional, Self, NgZone, Renderer2, ViewEncapsulation, ChangeDetectionStrategy, ChangeDetectorRef, HostBinding } from '@angular/core';
import { FarrisTemplateDirective, CommonUtils, IdService, FarrisComponentInstanceService, DebugService } from '@farris/ui-common';
import { ResizeService } from '@farris/ui-common/events';
import { ColumnFormatService } from '@farris/ui-common/column';
import { InputGroupComponent } from '@farris/ui-input-group';
import { LocaleService } from '@farris/ui-locale';
import { PerfectScrollbarComponent } from '@farris/ui-perfect-scrollbar';
import { of, BehaviorSubject, Subject, timer } from 'rxjs';
import { map } from 'rxjs/operators';
import { extend, remove } from 'lodash-es';
import ResizeObserver from 'resize-observer-polyfill';
import { VirtualizedLoaderService } from './virtualized-loader.service';
import { TreetableService } from './treetable.service';
import { SearchHandle } from './search.handle';
import { TTHotkeys } from './hotkeys';
import { FarrisContextMenuDirective } from '@farris/ui-context-menu';
/**
 * 单元格点事件参数
 * @record
 */
export function CellClickParam() { }
if (false) {
    /** @type {?} */
    CellClickParam.prototype.event;
    /** @type {?} */
    CellClickParam.prototype.col;
    /** @type {?} */
    CellClickParam.prototype.node;
}
/**
 * 节点钩选事件
 * @record
 */
export function NodeCheckedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.originalEvent;
    /** @type {?} */
    NodeCheckedParam.prototype.node;
    /** @type {?|undefined} */
    NodeCheckedParam.prototype.nodes;
    /** @type {?} */
    NodeCheckedParam.prototype.instance;
}
/**
 * @record
 */
export function NodeSelectedParam() { }
if (false) {
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.originalEvent;
    /** @type {?} */
    NodeSelectedParam.prototype.node;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.type;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.index;
    /** @type {?|undefined} */
    NodeSelectedParam.prototype.parents;
    /** @type {?} */
    NodeSelectedParam.prototype.instance;
}
/** @type {?} */
var NODES_PAGER_COLUMN_FIELD = '__nodespagerbar__';
var TreeTableColumnDirective = /** @class */ (function () {
    function TreeTableColumnDirective() {
    }
    TreeTableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: 'tt-column, [tt-column]'
                },] }
    ];
    TreeTableColumnDirective.propDecorators = {
        field: [{ type: Input }],
        title: [{ type: Input }],
        width: [{ type: Input }],
        hAlign: [{ type: Input }],
        align: [{ type: Input }],
        formatter: [{ type: Input }]
    };
    return TreeTableColumnDirective;
}());
export { TreeTableColumnDirective };
if (false) {
    /** @type {?} */
    TreeTableColumnDirective.prototype.field;
    /** @type {?} */
    TreeTableColumnDirective.prototype.title;
    /** @type {?} */
    TreeTableColumnDirective.prototype.width;
    /** @type {?} */
    TreeTableColumnDirective.prototype.hAlign;
    /** @type {?} */
    TreeTableColumnDirective.prototype.align;
    /** @type {?} */
    TreeTableColumnDirective.prototype.formatter;
}
var TreeTableComponent = /** @class */ (function () {
    function TreeTableComponent(ttService, el, resizeSer, renderer, utils, colFormatSer, shortcuts, cdRef, ngZone, injector) {
        var _this = this;
        this.ttService = ttService;
        this.el = el;
        this.resizeSer = resizeSer;
        this.renderer = renderer;
        this.utils = utils;
        this.colFormatSer = colFormatSer;
        this.shortcuts = shortcuts;
        this.cdRef = cdRef;
        this.ngZone = ngZone;
        this.injector = injector;
        this.id = '';
        /**
         * 宽度
         */
        this.width = 500;
        /**
         * 高度
         */
        this.height = 400;
        this.showFilterBar = false;
        /**
         * 显示过滤行
         */
        this.enableFilterRow = false;
        /**
         * 显示查询字段
         */
        this.showSearchField = true;
        this.headerHeight = 35;
        /**
         * 表头折行
         */
        this.headerWrap = false;
        /**
         * 行高
         */
        this.rowHeight = 29;
        /**
         * 列信息
         */
        this.columns = [];
        this._groupColumns = [];
        /**
         * 启用多表头
         */
        this.useGroupHeader = false;
        this.fitColumns = true;
        this.autoFitColumns = false;
        this.allColumnsTitle = '所有列';
        this.searchAnyField = true;
        /**
         * 显示连接线，默认为 false
         */
        this.showLines = false;
        this.showLinesOnHover = false;
        /**
         * 是否启用多选。 默认为单选
         */
        this.multiSelect = false;
        this.singleSelect = true;
        /**
         * 启用多选后，是否显示checkbox
         */
        this.showCheckbox = false;
        /**
         * 显示边框线
         */
        this.showBorder = true;
        this.showCheckAll = true;
        this.showHeader = true;
        /**
         * 启用斑马线
         */
        this.striped = false;
        /**
         * 启用鼠标划过效果
         */
        this.hovered = true;
        /**
         * 禁用。 禁用时不允许选中行
         */
        this.disabled = false;
        /**
         * 数据加载方式; 默认值 为 all
         * - all: 全部加载
         * - async: 分层加载
         */
        this.loadDataType = 'all';
        /**
         * 固定表头
         */
        this.fixedHeader = false;
        /**
         * 当多选时，选中当前行并钩选
         */
        this.checkOnSelect = false;
        /**
         * 当多选时，钩选并选中当前行
         */
        this.selectOnCheck = false;
        /**
         * 启用多选时，此属性为true 时，仅当前行选中
         */
        this.onlySelectSelf = false;
        /**
         * 启用列宽调整
         */
        this.resizableColumns = true;
        /**
         * 设置为true时自适应父容的尺寸
         */
        this.fit = false;
        /**
         * 启用级联选中功能
         */
        this.cascadeCheck = true;
        /**
         * 向下级联选中
         */
        this.cascadeDown = true;
        /**
         * 向上级联选中
         */
        this.cascadeUp = true;
        /**
         * 空数据时，显示的提示文本
         */
        this.emptyMessage = '暂无数据';
        /**
         * 缩进间距，默认为 16px
         */
        this.indentSpacing = 16;
        /**
         * 单击行选中后，在次点击不会被取消选中状态;
         */
        this.keepSelect = true;
        /**
         * 虚拟加载
         */
        this.virtualized = false;
        /**
         * 仅允许选择叶子节点
         * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
         * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
         * - no: 允许选择所有节点；服务器端设置失效
         */
        this.onlySelectLeaf = 'default';
        /**
         * 显示图标
         */
        this.showIcon = false;
        /**
         * 叶子节点图标
         */
        this.leafIcon = 'file';
        /**
         * 节点展开图标
         */
        this.expandIcon = 'folder-open';
        /**
         * 节点折叠图标
         */
        this.collapseIcon = 'folder';
        this.foldIcon = 'treetable-toggler';
        this.unfoldIcon = 'extanded treetable-toggler';
        /**
         * 启用节点图标从数据中获取。 默认为 false
         */
        this.useIconFromData = false;
        /**
         * 当数据源中icon未设置时使用内置ICON. 默认为 true
         */
        this.whenDataIconEmptyUseDefault = true;
        /**
         * 从数据源字段中获取图标
         */
        this.iconField = '';
        /**
         * 启用远端排序
         */
        this.remoteSort = true;
        /**
         * 启用前端文本查找
         */
        this.enableFindText = false;
        // 树列表默认展开层级。 -1： 不展开； 0： 全部展开； >0:  展开到指定级数；
        this.expandLevel = -1;
        this.selectValue = '';
        this.selectValueChange = new EventEmitter();
        /**
         * 启用双击展开节点
         */
        this.dblClickExpand = true;
        this.useDblClick = true;
        /**
         * 选中节点ID数组
         */
        this.selectValues = [];
        this.selectValuesChange = new EventEmitter();
        /**
         * 是否禁止折行，默认不折行
         */
        this.nowrap = true;
        this.checkValues = [];
        this.checkValuesChange = new EventEmitter();
        /**
         * 分页信息
         */
        this.pagination = false;
        /**
         * 分页加载子节点数据
         */
        this.paginationForChildren = false;
        /**
         * 分页条显示模式， default, simple
         */
        this.pagerViewMode = 'default';
        /**
         * 启用服务器端分页
         */
        this.pagerOnServer = true;
        /**
         * 每页记录数
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 分页区高度
         */
        this.pagerHeight = 56;
        /**
         * 显示每页记录数
         */
        this.showPageList = false;
        /**
         * 显示分页信息
         */
        this.showPageInfo = true;
        /**
         * 显示页码
         */
        this.showPageNumber = true;
        /**
         * 显示页码最大数量
         */
        this.pagerLabelSize = 7;
        /**
         * 显示页码输入框
         */
        this.showGotoInput = false;
        /**
         * 子节点分页是否显示总记录数，默认 false
         */
        this.showTotalForChildren = false;
        /**
         * 总记录数
         */
        this.total = 0;
        this.enableContextMenu = false;
        this.contextMenuItems = [];
        this.pageSizeChanged = new EventEmitter();
        this.pageChanged = new EventEmitter();
        /**
         * 排序后
         */
        this.columnSorted = new EventEmitter();
        /**
         * 选中事件
         */
        this.nodeSelected = new EventEmitter();
        /**
         * 取消选中事件
         */
        this.nodeUnSelect = new EventEmitter();
        /**
         * 钩选
         */
        this.nodeChecked = new EventEmitter();
        /**
         * 取消钩选
         */
        this.nodeUnChecked = new EventEmitter();
        /**
         * 全选事件
         */
        this.checkAll = new EventEmitter();
        /**
         * 取消全选
         */
        this.unCheckAll = new EventEmitter();
        /**
         * 查询
         */
        this.search = new EventEmitter();
        this.dblClick = new EventEmitter();
        this.loadedData = new EventEmitter();
        this.expand = new EventEmitter();
        this.collapse = new EventEmitter();
        this.expandAllNodes = new EventEmitter();
        this.collapseAllNodes = new EventEmitter();
        this.appendNew = new EventEmitter();
        this.removed = new EventEmitter();
        this.updated = new EventEmitter();
        this.clearSearchValue = new EventEmitter();
        this.cellClick = new EventEmitter();
        this.childsPageChanged = new EventEmitter();
        this.searchValueChange = new EventEmitter();
        this.loadedTimer = 100;
        this._data = [];
        // loaddata 时 先设置为空数组，
        this.isLoadNewDataSetEmpty = false;
        /**
         * 根据内容自动宽度，默认 false;
         * 此属性开启后，自动列宽失效
         */
        this.autoWidth = false;
        /**
         * 选中项集合
         */
        this._selections = [];
        /**
         * 选中项索引
         */
        this.selectRowIndex = -1;
        /**
         * 选中当前行
         */
        this._selectedRow = null;
        /**
         * 钩选的记录集合
         */
        this._checkeds = [];
        this.searchData = { field: '*', value: '' };
        this.searchButtonText = '<i class="f-icon f-icon-search"></i>';
        /**
         * 显示查询工具条
         */
        this.showFindInput = false;
        this.isDataChanged = false;
        this.topHideHeight = 0;
        this.bottomHideHeight = 0;
        this.state = {
            searchRowNodes: null,
            searched: false,
            rowNodes: [],
            scrollY: 0,
            scrollX: 0
        };
        /**
         * 待查询的文本
         */
        this.findValue = '';
        /**
         * 结果总数
         */
        this.findCount = 0;
        /**
         * 当前索引
         */
        this.findCurrent = 0;
        /**
         * 存储文本查询结果
         */
        this.findResult = [];
        this.ro = null;
        this.findKeysHandler = null;
        this._hotKeys = null;
        this.styleSheetId = 'treetable-style-';
        // 调整模板，此属性仅为帮助中的树组件
        this.fast = false;
        this.paginationOptions = {
            id: 'Farris-TreeTable-Pagination_',
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
        this.selectNodeChangedSubject = new BehaviorSubject(null);
        this._UUID = '';
        // 是否有固定列
        this.fixedColumns = false;
        this.destroy$ = new Subject();
        this.farrisInstances = null;
        this.difference = (/**
         * @param {?} first
         * @param {?} second
         * @return {?}
         */
        function (first, second) { return first.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !second.some((/**
         * @param {?} secondItem
         * @return {?}
         */
        function (secondItem) { return secondItem == item; })); })); });
        this.debugSer = null;
        this.filterRowConditions = null;
        this.onBeforeShowContextMenu = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            // row_1_fixedleft  row_1  row_1_fixedright
            var contextMenuDom = e.contextMenuDom, event = e.event;
            /** @type {?} */
            var rowID = event.target.id;
            if (contextMenuDom) {
                rowID = _this.trId2DataId(contextMenuDom);
                /** @type {?} */
                var rowNode_1 = _this.findRowNode(rowID);
                /** @type {?} */
                var go$ = of({ show: true });
                if (_this.beforeShowContextMenu) {
                    go$ = _this.beforeShowContextMenu({ data: rowNode_1, tree: _this });
                }
                return go$.pipe(switchMap((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) {
                    if (r.show) {
                        if (r.menus) {
                            _this.contextMenuItems = r.menus;
                            _this.detectChanges();
                        }
                        /** @type {?} */
                        var viewportW = contextMenuDom.closest('.farris-treetable').offsetWidth;
                        /** @type {?} */
                        var targetW = contextMenuDom.offsetWidth;
                        /** @type {?} */
                        var focusTargetWidth = viewportW > targetW ? targetW : viewportW;
                        return of({ show: true, data: { data: rowNode_1, tree: _this }, focusTargetWidth: focusTargetWidth });
                    }
                    else {
                        return of({ show: false });
                    }
                })));
            }
            return of({ show: false });
        });
        this.searchHandle = new SearchHandle(this);
        this.scrollLoader = new VirtualizedLoaderService(this);
        if (this.injector) {
            this._hotKeys = this.injector.get(TTHotkeys, null);
            this.localeService = this.injector.get(LocaleService, null);
            this.idService = this.injector.get(IdService, null);
            this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        }
        if (this.idService) {
            this._UUID = this.idService.uuid();
            this.styleSheetId += this.idService.uuid();
        }
        else {
            this._UUID = ('' + Math.random()).slice(2);
            this.styleSheetId += ('' + Math.random()).slice(2);
        }
        this.ttService = new TreetableService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
    }
    Object.defineProperty(TreeTableComponent.prototype, "groupColumns", {
        get: /**
         * @return {?}
         */
        function () {
            return this._groupColumns;
        },
        set: /**
         * @param {?} cols
         * @return {?}
         */
        function (cols) {
            this._groupColumns = cols || [];
            /** @type {?} */
            var _columns = this.ttService.checkColumnsForGroupHeader(cols.map((/**
             * @param {?} cs
             * @return {?}
             */
            function (cs) { return tslib_1.__spread(cs); })), this).columns;
            this.columns = _columns.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.field; }));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "data", {
        get: /**
         * @return {?}
         */
        function () {
            return this._data;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._data = val;
            this.updateSerializedValue();
            if (!this.isLoadNewDataSetEmpty) {
                this.initNodeStatus();
            }
            // autowidth 时，表头宽度依据内容宽度作同步处理
            this.setNewColumnsWidth();
            this.loadDataSuccess();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "allCheckbox", {
        set: /**
         * @param {?} content
         * @return {?}
         */
        function (content) {
            this.headerCheckboxCmp = content;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selections;
        },
        set: /**
         * @param {?} vals
         * @return {?}
         */
        function (vals) {
            var _this = this;
            if (vals && vals.length) {
                // 过滤掉数据源中不存在节点
                this._selections = vals.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn && _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_1 = this._selections.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                if (ids_1.length !== this.selectValues.length ||
                    (ids_1.length === this.selectValues.length && this.difference(ids_1, this.selectValues).length)) {
                    this.selectValues = ids_1;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.selectValuesChange.emit(ids_1);
                    }));
                }
            }
            else {
                this._selections = [];
                this.selectValues = [];
                this.selectValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "selectedRow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedRow;
        },
        set: /**
         * @param {?} treeNode
         * @return {?}
         */
        function (treeNode) {
            this._selectedRow = treeNode;
            if (treeNode) {
                if (this.selectValue !== treeNode.id) {
                    this.selectValue = treeNode.id;
                    this.selectValueChange.emit(treeNode.id);
                }
            }
            else {
                this.selectValue = null;
                this.selectValueChange.emit(null);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TreeTableComponent.prototype, "checkeds", {
        get: /**
         * @return {?}
         */
        function () {
            return this._checkeds;
        },
        set: /**
         * @param {?} treeNodes
         * @return {?}
         */
        function (treeNodes) {
            var _this = this;
            if (treeNodes && treeNodes.length) {
                this._checkeds = treeNodes.filter((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return _this.findRowNode(tn.id); }));
                /** @type {?} */
                var ids_2 = this._checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                this.checkValues = this.checkValues || [];
                if (ids_2.length !== this.checkValues.length || (ids_2.length === this.checkValues.length && this.difference(ids_2, this.checkValues).length)) {
                    this.checkValues = ids_2;
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.checkValuesChange.emit(ids_2);
                    }));
                }
            }
            else {
                this._checkeds = [];
                this.checkValues = [];
                this.checkValuesChange.emit([]);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    TreeTableComponent.prototype.writeConsole = /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    function (msg, type) {
        if (type === void 0) { type = 'warn'; }
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkOptons = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        // 启用数据折行后，虚拟渲染功能失效
        if (!this.nowrap) {
            this.virtualized = false;
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.reSetSize();
            _this.setScorllBodyHeight();
        }));
        if (this.multiSelect) {
            this.singleSelect = false;
        }
        if (this.singleSelect && this.showCheckbox) {
            this.checkOnSelect = true;
            this.selectOnCheck = true;
        }
        if (!this.beforeSortColumn) {
            this.beforeSortColumn = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.fit) {
            this.renderer.addClass(this.el.nativeElement, 'f-utils-fill-flex-column');
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentElement || this.el.nativeElement.parentNode;
            if (parentEl) {
                // this.renderer.addClass(parentEl, 'f-utils-fill');
                this.renderer.setStyle(parentEl, 'overflow', 'hidden');
            }
        }
        if (!this.beforeClickNode) {
            this.beforeClickNode = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeCheckAll) {
            this.beforeCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeUnCheckAll) {
            this.beforeUnCheckAll = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (this.autoWidth) {
            this.fitColumns = false;
            this.resizableColumns = false;
        }
        if (!this.disabledRow) {
            this.disabledRow = (/**
             * @return {?}
             */
            function () { return false; });
        }
        if (!this.searchAnyField && this.searchFields && this.searchFields.length) {
            this.searchData.field = this.searchFields[0].label;
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.id = 'Treetable-' + this._UUID;
        // 创建 stylesheet
        this.styleElement = this.utils.createStyleSheet(this.styleSheetId);
        this.checkColumnOption();
        this.checkOptons();
        if (this.ngZone) {
            this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                if (_this.el.nativeElement.parentElement) {
                    _this.ro = new ResizeObserver((/**
                     * @param {?} entries
                     * @param {?} observer
                     * @return {?}
                     */
                    function (entries, observer) {
                        if (entries && entries[0]) {
                            var _a = entries[0].contentRect, width = _a.width, height = _a.height;
                            /** @type {?} */
                            var target = entries[0].target;
                            if (_this.fit && target['offsetParent']) {
                                _this.resize({ width: width, height: _this.showBorder ? height - 2 : height });
                            }
                        }
                        // 表单切换后，如果有选中行，则更新滚动条位置
                        _this.scrollToCurrentNode();
                    }));
                    _this.ro.observe(_this.el.nativeElement.parentElement);
                }
            }));
        }
        this.paginationOptions = this.initPaginationOptions();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.ro) {
            if (this.el.nativeElement.parentElement) {
                this.ro.unobserve(this.el.nativeElement.parentElement);
            }
            this.ro.disconnect();
            this.ro = null;
        }
        if (this.findKeysHandler) {
            this.findKeysHandler.unsubscribe();
        }
        this.utils.removeStyleSheet(this.styleSheetId);
        this.styleElement = null;
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        this.ttService = null;
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.data && !changes.data.isFirstChange()) {
            this.isDataChanged = changes.data.currentValue !== changes.data.previousValue;
        }
        if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {
            this.singleSelect = !changes.multiSelect.currentValue;
            if (this.singleSelect && this.showCheckbox) {
                this.selectOnCheck = true;
                this.checkOnSelect = true;
            }
        }
        if (changes.disabled && !changes.disabled.isFirstChange()) {
            this.hovered = !changes.disabled.currentValue;
        }
        if (changes.enableFindText && !changes.enableFindText.isFirstChange()) {
            this.setFindText(changes.enableFindText.currentValue);
        }
        if (changes.selectValue && !changes.selectValue.isFirstChange()) {
            this.selectNode(changes.selectValue.currentValue);
        }
        if (changes.selectValues && !changes.selectValues.isFirstChange()) {
            this.selectNodes(changes.selectValues.currentValue);
        }
        if (changes.checkValues && !changes.checkValues.isFirstChange()) {
            this.checkedNodes(changes.checkValues.currentValue);
        }
        if (changes.pageIndex !== undefined && !changes.pageIndex.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                currentPage: this.pageIndex
            });
        }
        if (changes.pageSize !== undefined && !changes.pageSize.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                itemsPerPage: this.pageSize
            });
        }
        if (changes.pageList !== undefined && !changes.pageList.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                pageList: this.pageList
            });
        }
        if (changes.total !== undefined && !changes.total.isFirstChange()) {
            this.paginationOptions = Object.assign(this.paginationOptions, {
                totalItems: this.total
            });
        }
        if (changes.fitColumns && !changes.fitColumns.isFirstChange()) {
            this.setTableWidth(this.allColumnsWidth());
        }
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.checkColumnOption();
        }
        if (changes.showBorder && !changes.showBorder.isFirstChange()) {
            // this.reSetSize();
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        // if (this.isDataChanged) {
        //     this.loadedData.emit();
        //     this.isDataChanged = false;
        // } else {
        //     this.ngZone.runOutsideAngular(() => {
        //         if (this.psRef) {
        //             this.psRef.directiveRef.update();
        //         }
        //     });
        // }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.templates.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            switch (item.getType()) {
                case 'header':
                    _this.headerTemplate = item.template;
                    break;
                case 'body':
                    _this.bodyTemplate = item.template;
                    break;
            }
        }));
        if (this.columnsRef.length) {
            this.columns = this.ttc2columns(this.columnsRef);
            this.columnsRef.changes.subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.columns = _this.ttc2columns(d);
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.containerElement = this.el.nativeElement.querySelector('.farris-treetable');
        this.registerShortcuts();
        // autowidth 时，表头宽度依据内容宽度作同步处理
        this.setNewColumnsWidth();
        this.setRightFixedColumnShadow();
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
        if (this.bodyTemplate) {
            this.utils.appendCssRules(["#" + this.id + " .farris-treetable .farris-treetable-tbody td {padding: .25rem 0.75rem;}"], this.styleElement.sheet);
        }
        // 兼容旧版设计器        
        if (this.fit && this.el.nativeElement.parentElement.nodeName !== 'DIV') {
            if (this.el.nativeElement.parentElement.nodeName === 'APP-DG-TREE-GRID') {
                /** @type {?} */
                var div = this.el.nativeElement.parentElement.closest('div');
                if (div) {
                    div.style.overflow = 'hidden';
                }
            }
        }
        this.loadDataSuccess();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.loadDataSuccess = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        timer(this.loadedTimer).pipe(takeUntil(this.destroy$)).subscribe((/**
         * @return {?}
         */
        function () {
            if (_this.psRef && _this.psRef.directiveRef) {
                _this.psRef.directiveRef.update();
            }
            _this.loadedData.emit();
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setNewColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.autoWidth) {
            return;
        }
        /** @type {?} */
        var newColWidth = {};
        /** @type {?} */
        var headerCells = [];
        /** @type {?} */
        var firstRowCells = [];
        // let colgroups = [];
        if (this.showHeader && this.headerTable) {
            headerCells = Array.from(this.headerTable.nativeElement.querySelectorAll('th'));
        }
        if (this.serializedValue && this.serializedValue.length && this.bodyTable) {
            firstRowCells = Array.from(this.bodyTable.nativeElement.querySelector('tr').querySelectorAll('td'));
            // colgroups = this.bodyTable.nativeElement.querySelector('colgroup').querySelectorAll('col');
        }
        firstRowCells.forEach((/**
         * @param {?} td
         * @param {?} index
         * @return {?}
         */
        function (td, index) {
            /** @type {?} */
            var fieldName = td.getAttribute('field');
            /** @type {?} */
            var colWidth = td.getBoundingClientRect().width.toFixed(2);
            newColWidth[fieldName] = colWidth;
            /** @type {?} */
            var col = _this.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === fieldName; }));
            if (col && col.width !== undefined) {
                colWidth = colWidth > col.width ? colWidth : col.width;
            }
            td.style.minWidth = colWidth + 'px';
            headerCells[index].style.width = colWidth + 'px';
        }));
        /** @type {?} */
        var colWidthTotal = this.allColumnsWidth();
        this.setTableWidth(colWidthTotal);
    };
    /**
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.columnIsVisible = /**
     * @param {?} col
     * @return {?}
     */
    function (col) {
        return this.ttService.columnIsVisible(col, this);
    };
    /**
     * @private
     * @param {?} n
     * @return {?}
     */
    TreeTableComponent.prototype.columnCssName = /**
     * @private
     * @param {?} n
     * @return {?}
     */
    function (n) {
        return "#" + this.id + " .treetable-cell[field=\"" + n.field + "\"], #" + this.id + " .treetable-header-cell[field=\"" + n.field + "\"]:not(.group-header-cell)";
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkGroupColumns = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var i = this.groupColumns.length - 1;
        while (i >= 0) {
            /** @type {?} */
            var ids = this.groupColumns[i].map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.parentId; }));
            ids = Array.from(new Set(ids));
            ids.map((/**
             * @param {?} id
             * @return {?}
             */
            function (id) {
                /** @type {?} */
                var childCols = _this.groupColumns[i].filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.parentId == id; })).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    /** @type {?} */
                    var dataField = _this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.id === n.id; }));
                    return dataField || n;
                }));
                return {
                    id: id,
                    width: childCols.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @return {?}
                     */
                    function (r, c) { return r += c.width; }), 0),
                    left: childCols[0].left,
                    right: childCols[childCols.length - 1].right || 0
                };
            })).forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if (i - 1 >= 0) {
                    /** @type {?} */
                    var pCol = _this.groupColumns[i - 1].find((/**
                     * @param {?} pc
                     * @return {?}
                     */
                    function (pc) { return pc.id == p.id; }));
                    /** @type {?} */
                    var dataField = _this.columns.find((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) { return c.id === p.id; }));
                    pCol = dataField || pCol;
                    pCol.width = p.width;
                    if (pCol.fixed === 'left') {
                        pCol.left = p.left;
                    }
                    if (pCol.fixed === 'right') {
                        pCol.right = p.right;
                    }
                }
            }));
            i--;
        }
    };
    // 按固定列的顺序排序
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    TreeTableComponent.prototype.sortColumnsByFixed = 
    // 按固定列的顺序排序
    /**
     * @private
     * @param {?=} updateColumns
     * @return {?}
     */
    function (updateColumns) {
        if (updateColumns === void 0) { updateColumns = true; }
        /** @type {?} */
        var fixedLeft = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedCenter = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return !n.fixed || n.fixed === 'center'; }));
        /** @type {?} */
        var fixedRight = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedLeft && fixedLeft.length) {
            fixedLeft.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                if (index) {
                    n.left = fixedLeft.reduce((/**
                     * @param {?} r
                     * @param {?} c
                     * @param {?} i
                     * @return {?}
                     */
                    function (r, c, i) {
                        if (i < index) {
                            return r += c.width;
                        }
                        return r;
                    }), 0);
                }
                else {
                    n.left = 0;
                }
            }));
        }
        if (fixedRight && fixedRight.length) {
            /** @type {?} */
            var rightWidthTotal_1 = fixedRight.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + c.width;
            }), 0);
            fixedRight.forEach((/**
             * @param {?} n
             * @param {?} index
             * @return {?}
             */
            function (n, index) {
                rightWidthTotal_1 -= n.width;
                n.right = rightWidthTotal_1;
            }));
        }
        if (updateColumns) {
            this.columns = fixedLeft.concat(fixedCenter).concat(fixedRight);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.checkColumnOption = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var cssRules = [];
        // 启用分页加载子节点
        if (this.paginationForChildren) {
            /** @type {?} */
            var pagerBarCol = {
                field: NODES_PAGER_COLUMN_FIELD,
                width: 160,
                title: '',
                align: 'center',
                template: this.nodesPagerBar,
                rowspan: 1,
            };
            if (this.useGroupHeader) {
                if (this.groupColumns[0][this.groupColumns[0].length - 1].fixed === 'right') {
                    pagerBarCol.fixed = 'right';
                }
                pagerBarCol.rowspan = this.groupColumns.length;
                this.groupColumns[0].push(pagerBarCol);
            }
            this.columns.push(pagerBarCol);
        }
        if (!this.fitColumns) {
            this.sortColumnsByFixed();
        }
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} i
         * @return {?}
         */
        function (n, i) {
            if (n.visible === undefined) {
                n.visible = true;
            }
            if (n['halign']) {
                n.hAlign = n['halign'];
            }
            if (n.width === undefined) {
                n.width = 100;
            }
            if (!n.id) {
                n.id = 'treetable-header-' + (n.field || i);
            }
        }));
        /** @type {?} */
        var colWidthTotal = this.allColumnsWidth();
        /** @type {?} */
        var fixedCols = 0;
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightColumns[0]['rightShadowCol'] = true;
            fixedRightColumns[fixedRightColumns.length - 1]['lastColumn'] = true;
        }
        else {
            if (this.columns && this.columns.length) {
                this.columns[this.columns.length - 1]['lastColumn'] = true;
            }
        }
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        if (fixedLeftColumns && fixedLeftColumns.length) {
            fixedLeftColumns[fixedLeftColumns.length - 1]['leftShadowCol'] = true;
        }
        fixedCols = this.setCellWidthCss(colWidthTotal, fixedCols, cssRules);
        this.setTableWidth(colWidthTotal);
        this.fixedColumns = !!fixedCols;
    };
    /**
     * @private
     * @param {?} colWidthTotal
     * @param {?} fixedCols
     * @param {?} cssRules
     * @return {?}
     */
    TreeTableComponent.prototype.setCellWidthCss = /**
     * @private
     * @param {?} colWidthTotal
     * @param {?} fixedCols
     * @param {?} cssRules
     * @return {?}
     */
    function (colWidthTotal, fixedCols, cssRules) {
        var _this = this;
        this.columns.forEach((/**
         * @param {?} n
         * @param {?} index
         * @return {?}
         */
        function (n, index) {
            /** @type {?} */
            var isVisible = _this.columnIsVisible(n);
            /** @type {?} */
            var ruleName = _this.columnCssName(n);
            /** @type {?} */
            var cssRule = _this.utils.getCssRule(ruleName, _this.styleElement.sheet);
            if (!cssRule) {
                /** @type {?} */
                var stylecss = ruleName + ' { ';
                stylecss += isVisible ? '' : 'display: none;';
                if (_this.fitColumns) {
                    stylecss += "width: " + (n.width / colWidthTotal * 100).toFixed(2) + "%;";
                }
                else {
                    stylecss += "width: " + n.width + "px;";
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            stylecss += "left: " + n.left + "px";
                            fixedCols++;
                        }
                        if (n.fixed === 'right') {
                            stylecss += "right: " + n.right + "px";
                            fixedCols++;
                        }
                    }
                }
                stylecss += '}';
                cssRules.push(stylecss);
            }
            else {
                cssRule.style.display = isVisible ? '' : 'none';
                if (_this.fitColumns) {
                    cssRule.style.width = (n.width / colWidthTotal * 100).toFixed(2) + "%";
                }
                else {
                    cssRule.style.width = n.width + "px";
                    if (n.fixed) {
                        if (n.fixed === 'left') {
                            cssRule.style.left = n.left + "px";
                        }
                        if (n.fixed === 'right') {
                            cssRule.style.right = n.right + "px";
                        }
                    }
                }
            }
        }));
        if (this.useGroupHeader) {
            this.autoWidth = false; // 多表头启用后，自动列宽失效 TFS 496088
            this.checkGroupColumns();
            /** @type {?} */
            var i = this.groupColumns.length - 2;
            while (i >= 0) {
                /** @type {?} */
                var groupHeaderColCsses = this.groupColumns[i].filter((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) { return !col.field; })).map((/**
                 * @param {?} col
                 * @return {?}
                 */
                function (col) {
                    /** @type {?} */
                    var groupColCssName = "#" + col.id + "{ width: " + col.width + "px";
                    if (col.fixed) {
                        if (col.fixed === 'left') {
                            groupColCssName += ';left:' + col.left + 'px';
                        }
                        if (col.fixed === 'right') {
                            groupColCssName += ';right:' + col.right + 'px';
                        }
                    }
                    return groupColCssName += '}';
                }));
                this.utils.appendCssRules2(groupHeaderColCsses, this.styleElement.sheet);
                i--;
            }
        }
        if (cssRules.length) {
            this.utils.appendCssRules(cssRules, this.styleElement.sheet);
        }
        return fixedCols;
    };
    /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    TreeTableComponent.prototype.setTableWidth = /**
     * @private
     * @param {?} colWidthTotal
     * @return {?}
     */
    function (colWidthTotal) {
        if (this.headerTable && this.bodyTable) {
            if (!this.fitColumns && !this.autoFitColumns) {
                this.headerTable.nativeElement.style.width = colWidthTotal + "px";
                this.bodyTable.nativeElement.style.width = colWidthTotal + "px";
            }
            else {
                this.headerTable.nativeElement.style.width = '100%';
                this.bodyTable.nativeElement.style.width = '100%';
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.allColumnsWidth = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return this.columns.reduce((/**
         * @param {?} r
         * @param {?} c
         * @return {?}
         */
        function (r, c) {
            if (_this.columnIsVisible(c)) {
                return r + c.width;
            }
            else {
                return r;
            }
        }), 0);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageChanged.emit($event);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onPageSizeChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.pageSizeChanged.emit($event);
    };
    /**
     * @param {?} pageInfo
     * @return {?}
     */
    TreeTableComponent.prototype.updatePageInfo = /**
     * @param {?} pageInfo
     * @return {?}
     */
    function (pageInfo) {
        if (pageInfo && Object.keys(pageInfo).length) {
            /** @type {?} */
            var obj = {};
            if (pageInfo.total !== undefined) {
                obj.totalItems = pageInfo.total;
            }
            if (pageInfo.pageIndex !== undefined) {
                obj.currentPage = pageInfo.pageIndex;
            }
            if (pageInfo.pageSize !== undefined) {
                obj.itemsPerPage = pageInfo.pageSize;
            }
            if (pageInfo.pageList !== undefined) {
                obj.pageList = pageInfo.pageList;
            }
            this.paginationOptions = Object.assign(this.paginationOptions, obj);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initPaginationOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            id: 'Farris-TreeTable-Pagination_' + this._UUID,
            itemsPerPage: this.pageSize,
            currentPage: this.pageIndex,
            pageList: this.pageList,
            totalItems: this.total,
            remote: this.pagerOnServer
        };
    };
    /**
     * @param {?} col
     * @param {?} rowdata
     * @param {?=} fast
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeText = /**
     * @param {?} col
     * @param {?} rowdata
     * @param {?=} fast
     * @return {?}
     */
    function (col, rowdata, fast) {
        if (fast === void 0) { fast = false; }
        if (col.isMultilingualField) {
            /** @type {?} */
            var val = this.utils.getValue(col.field, rowdata);
            if (this.localeService) {
                /** @type {?} */
                var localeId = this.localeService.localeId || 'zh-CHS';
                if (val && typeof val === 'object' && Object.keys(val).length > 0) {
                    return val[localeId];
                }
                else {
                    return val;
                }
            }
        }
        else {
            return this.utils.getValue(col.field, rowdata, !fast);
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.initNodeStatus = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.singleSelect) {
            if (this.checkValues && this.checkValues.length) {
                this.checkedNodes(this.checkValues, false, false);
            }
            if (this.selectValues && this.selectValues.length && !this.onlySelectSelf) {
                this.selectNodes(this.selectValues, false, false);
            }
        }
        else {
            if (this.selectValue) {
                this.selectNode(this.selectValue, false);
            }
        }
    };
    /** 注册快捷键 */
    /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.registerShortcuts = /**
     * 注册快捷键
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.showFilterBar && this._hotKeys) {
            this._hotKeys.addShortcut({ keys: 'enter', element: this.inputGroup.textbox.nativeElement }).subscribe((/**
             * @return {?}
             */
            function () {
                _this.onSearch();
            }));
        }
        this.setFindText(this.enableFindText);
    };
    /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    TreeTableComponent.prototype.setFindText = /**
     * @private
     * @param {?=} enable
     * @return {?}
     */
    function (enable) {
        var _this = this;
        if (enable === void 0) { enable = true; }
        this.enableFindText = enable;
        if (this.enableFindText && this._hotKeys) {
            // 查询工具条
            this.findKeysHandler = this._hotKeys.addShortcut({ keys: 'control.shift.f' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (_this.enableFindText) {
                    _this.showFindInput = true;
                    _this.detectChanges();
                }
            }));
        }
        else {
            if (this.showFindInput) {
                this.showFindInput = false;
                this.cdRef.detectChanges();
            }
            if (this.findKeysHandler) {
                this.findKeysHandler.unsubscribe();
                this.findKeysHandler = null;
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    TreeTableComponent.prototype.getCustomCls = /**
     * @private
     * @param {?} rowNode
     * @param {?=} field
     * @param {?=} clsType
     * @return {?}
     */
    function (rowNode, field, clsType) {
        if (field === void 0) { field = ''; }
        if (clsType === void 0) { clsType = 'row'; }
        /** @type {?} */
        var cls = {};
        /** @type {?} */
        var fn = this.rowStyler;
        if (clsType === 'cell') {
            fn = this.cellStyler;
        }
        if (fn) {
            /** @type {?} */
            var rowCls = fn(rowNode.node, field);
            if (rowCls) {
                /** @type {?} */
                var arrcls = [];
                if (typeof rowCls === 'string') {
                    arrcls = [rowCls];
                }
                else {
                    if (Array.isArray(rowCls)) {
                        arrcls = rowCls;
                    }
                }
                if (arrcls.length) {
                    /** @type {?} */
                    var rowClsObj_1 = {};
                    arrcls.forEach((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) {
                        rowClsObj_1['' + c] = true;
                    }));
                    /** @type {?} */
                    var _cls = tslib_1.__assign({}, rowClsObj_1, cls);
                    return _cls;
                }
                else {
                    return rowCls;
                }
            }
            else {
                return cls;
            }
        }
        else {
            return cls;
        }
    };
    /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    TreeTableComponent.prototype.getRowCls = /**
     * @param {?} rowNode
     * @param {?=} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, 'row');
    };
    /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.getCellCls = /**
     * @param {?} rowNode
     * @param {?} field
     * @return {?}
     */
    function (rowNode, field) {
        return this.getCustomCls(rowNode, field, 'cell');
    };
    /**
     * @param {?} currentCol
     * @return {?}
     */
    TreeTableComponent.prototype.getRealColWidth = /**
     * @param {?} currentCol
     * @return {?}
     */
    function (currentCol) {
        var _this = this;
        if (this.columns && this.columns.length && this.fitColumns) {
            /** @type {?} */
            var colWidthTotal = this.columns.reduce((/**
             * @param {?} r
             * @param {?} c
             * @return {?}
             */
            function (r, c) {
                return r + (_this.columnIsVisible(c) && (r.field !== NODES_PAGER_COLUMN_FIELD || r.fixedWidth) ? c.width : 0);
            }), 0);
            if (this.columnIsVisible(currentCol)) {
                if (currentCol.field !== NODES_PAGER_COLUMN_FIELD && !currentCol.fixedWidth) {
                    return (currentCol.width / colWidthTotal * 100).toFixed(2) + '%';
                }
                else {
                    return (currentCol.width || 120) + 'px';
                }
            }
            else {
                return 0;
            }
        }
        return currentCol.width + 'px';
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onResized = /**
     * @return {?}
     */
    function () {
        this.resizeSer.windowResized();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setRightFixedColumnShadow = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.psRef && this.psRef.directiveRef) {
            /** @type {?} */
            var ps = ((/** @type {?} */ (this.psRef.directiveRef))).instance;
            if (!ps) {
                return;
            }
            var containerWidth = ps.containerWidth, scrollbarXLeft = ps.scrollbarXLeft, contentWidth = ps.contentWidth;
            if (containerWidth + scrollbarXLeft < contentWidth) {
                /** @type {?} */
                var fixedRightColumns = this.columns.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.fixed === 'right'; }));
                /** @type {?} */
                var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
                if (fixedRightColumns && fixedRightColumns.length) {
                    /** @type {?} */
                    var fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
                    /** @type {?} */
                    var rightCSSRule = fixedRightCssRuleKey + "{\n                        box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n                    }";
                    this.utils.appendCssRules([rightCSSRule], this.styleElement.sheet);
                }
            }
        }
    };
    /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.setFixedColumnShadow = /**
     * @private
     * @param {?} x
     * @param {?} e
     * @return {?}
     */
    function (x, e) {
        /** @type {?} */
        var fixedLeftColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'left'; }));
        /** @type {?} */
        var fixedRightColumns = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.fixed === 'right'; }));
        /** @type {?} */
        var ruleName = "#" + this.id + ".f-treetable--fixed-columns";
        /** @type {?} */
        var fixedLeftCssRuleKey = '';
        /** @type {?} */
        var fixedRightCssRuleKey = '';
        /** @type {?} */
        var leftCSSRule = '';
        /** @type {?} */
        var rightCSSRule = '';
        if (fixedLeftColumns && fixedLeftColumns.length) {
            /** @type {?} */
            var lastFixedLeftColumn = fixedLeftColumns[fixedLeftColumns.length - 1];
            fixedLeftCssRuleKey = ruleName + " [field=\"" + lastFixedLeftColumn.field + "\"]::after";
            leftCSSRule = fixedLeftCssRuleKey + "{\n                box-shadow:#d9d9d9 12px 0px 8px -12px inset;\n            }";
        }
        if (fixedRightColumns && fixedRightColumns.length) {
            fixedRightCssRuleKey = ruleName + " [r-tt-shadow-col]::before";
            rightCSSRule = fixedRightCssRuleKey + "{\n                box-shadow:#d9d9d9 -12px 0px 8px -12px inset;\n            }";
        }
        if (x === 0) {
            // 移除左侧固定列阴影样式
            if (fixedLeftCssRuleKey) {
                this.utils.removeCssRule(fixedLeftCssRuleKey, this.styleElement.sheet);
            }
        }
        else if ((x + e.srcElement.offsetWidth).toFixed() == e.srcElement.scrollWidth) {
            // 移除右则固定列阴影样式
            if (fixedRightCssRuleKey) {
                this.utils.removeCssRule(fixedRightCssRuleKey, this.styleElement.sheet);
            }
        }
        else {
            // 添加左右固定列样式
            /** @type {?} */
            var arr = [];
            if (leftCSSRule) {
                arr.push(leftCSSRule);
            }
            if (rightCSSRule) {
                arr.push(rightCSSRule);
            }
            this.utils.appendCssRules(arr, this.styleElement.sheet);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollX = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.showHeader && this.headerBox) {
            /** @type {?} */
            var x = e.srcElement.scrollLeft;
            this.state.scrollX = x;
            // this.renderer.setStyle(this.headerBox.nativeElement.querySelector('table'), 'transform', `translate3d(-${x}px, 0px, 0px)`);
            this.headerBox.nativeElement.scrollLeft = x;
            this.setFixedColumnShadow(x, e);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype.onScrollY = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.virtualized) {
            /** @type {?} */
            var scrollTop = e.target.scrollTop;
            this.renderData(scrollTop);
        }
    };
    /**
     * @private
     * @param {?} scrolltop
     * @return {?}
     */
    TreeTableComponent.prototype.renderData = /**
     * @private
     * @param {?} scrolltop
     * @return {?}
     */
    function (scrolltop) {
        var _a = this.scrollLoader.getRowNodes(scrolltop), data = _a.data, topHideHeight = _a.topHideHeight, bottomHideHeight = _a.bottomHideHeight;
        this.state.scrollY = scrolltop;
        this.serializedValue = data;
        this.topHideHeight = topHideHeight;
        this.bottomHideHeight = bottomHideHeight;
        this.detectChanges();
        this.setNewColumnsWidth();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onSearchValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (!$event) {
            this.onClearSearchValue();
        }
        this.searchValueChange.emit(this.searchData);
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onClearSearchValue = /**
     * @return {?}
     */
    function () {
        this.searchData.value = '';
        this.state.searched = false;
        this.clearSearchValue.emit();
    };
    /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.onCellClick = /**
     * @param {?} event
     * @param {?} col
     * @param {?} node
     * @return {?}
     */
    function (event, col, node) {
        this.cellClick.emit({ event: event, col: col, node: node });
    };
    /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.trackByFn = /**
     * @param {?} index
     * @param {?} rowNode
     * @return {?}
     */
    function (index, rowNode) {
        return rowNode.id;
    };
    /**
     * 格式化数据
     */
    /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    TreeTableComponent.prototype.formatData = /**
     * 格式化数据
     * @param {?} col
     * @param {?} data
     * @param {?} formatter
     * @return {?}
     */
    function (col, data, formatter) {
        // const val = this.utils.getValue(field, data, true );
        /** @type {?} */
        var val = this.getNodeText(col, data);
        if (formatter && formatter.type === 'timeago') {
            if (!formatter.options) {
                formatter.options = { locale: this.localeService.localeId };
            }
            else {
                if (!formatter.options.locale) {
                    formatter.options.locale = this.localeService.localeId;
                }
            }
        }
        return this.colFormatSer.format(val, data, formatter, { locale: this.localeService.localeId });
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.columnsChanged = /**
     * @return {?}
     */
    function () {
        this.checkColumnOption();
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} list
     * @return {?}
     */
    TreeTableComponent.prototype.ttc2columns = /**
     * @private
     * @param {?} list
     * @return {?}
     */
    function (list) {
        return list.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return {
                field: n.field,
                title: n.title,
                align: n.align,
                hAlign: n.hAlign,
                width: n.width,
                formatter: n.formatter
            };
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.reSetSize = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.fit) {
            /** @type {?} */
            var parentEl = this.el.nativeElement.parentNode;
            this.setWidth(parentEl.offsetWidth);
            this.height = parentEl.offsetHeight;
            // 如果在使用时，为组件设置的高度，则以此值为准，仅支持 固定值 ，不支持 百分比
            if (this.el.nativeElement.style.height) {
                /** @type {?} */
                var h = this.el.nativeElement.style.height;
                if (h.indexOf('px') > -1) {
                    h = parseInt(h.replace('px', ''), 10);
                    if (h > 0) {
                        this.height = h;
                    }
                }
            }
        }
    };
    /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.renderVirtualRowNodes = /**
     * @private
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        var _this = this;
        if (nodePosY === void 0) { nodePosY = null; }
        if (this.virtualized) {
            /** @type {?} */
            var scrollY_1 = nodePosY !== null && nodePosY !== undefined ? nodePosY : this.state.scrollY;
            /** @type {?} */
            var _rownodes = this.scrollLoader.getRowNodes(scrollY_1);
            this.serializedValue = _rownodes.data;
            this.topHideHeight = _rownodes.topHideHeight;
            this.bottomHideHeight = _rownodes.bottomHideHeight;
            this.detectChanges();
            if (nodePosY !== null && nodePosY !== undefined) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.psRef.directiveRef.elementRef.nativeElement.scrollTop = nodePosY;
                    }), 20);
                }));
            }
        }
    };
    /**
     * @param {?=} nodePosY
     * @return {?}
     */
    TreeTableComponent.prototype.updateSerializedValue = /**
     * @param {?=} nodePosY
     * @return {?}
     */
    function (nodePosY) {
        if (nodePosY === void 0) { nodePosY = null; }
        this.serializedValue = [];
        this.searchHandle.allNodes = [];
        this.state.rowNodes = [];
        this.serializeNodes(null, this.data, 0, true);
        if (this.virtualized && this.fixedHeader) {
            this.renderVirtualRowNodes(nodePosY);
        }
        else {
            this.serializedValue = this.state.rowNodes;
            this.detectChanges();
            // if (emitChanges) {
            // }
        }
    };
    /**
     * 将树节点数据序列化为RowNode
     * @param parent 父级节点
     * @param nodes 树节点集合
     * @param level 级别
     * @param visible 是否可见
     */
    /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.serializeNodes = /**
     * 将树节点数据序列化为RowNode
     * @param {?} parent 父级节点
     * @param {?} nodes 树节点集合
     * @param {?} level 级别
     * @param {?} visible 是否可见
     * @param {?=} parentIds
     * @return {?}
     */
    function (parent, nodes, level, visible, parentIds) {
        var _this = this;
        if (nodes && nodes.length) {
            if (!nodes[0].data) {
                return;
            }
            nodes.forEach((/**
             * @param {?} node
             * @param {?} index
             * @return {?}
             */
            function (node, index) {
                node.parent = parent;
                if (!node.hasOwnProperty('selectable')) {
                    node.selectable = true;
                }
                if (!node.hasOwnProperty('showIcon')) {
                    node.showIcon = true;
                }
                if (_this.onlySelectLeaf === 'yes' && node.selectable) {
                    node.selectable = !!node.leaf;
                }
                /** @type {?} */
                var keyid = node.data[_this.idField];
                node.id = keyid;
                /** @type {?} */
                var isSelected = _this.findIndexInSelection(node) > -1;
                /** @type {?} */
                var isChecked = _this.findIndexInCheckeds(node) > -1;
                /** @type {?} */
                var isLast = index === nodes.length - 1;
                /** @type {?} */
                var isFirst = index === 0;
                /** @type {?} */
                var parents = [];
                /** @type {?} */
                var parentRn = null;
                if (parent) {
                    /** @type {?} */
                    var parentID = parent.data[_this.idField];
                    /** @type {?} */
                    var _parents = parentIds || [];
                    parents = parents.concat(_parents.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n; })));
                    parents.push(parentID);
                    parentRn = _this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === parent.id; }));
                }
                /** @type {?} */
                var rowNode = {
                    id: keyid,
                    node: node,
                    parent: parent,
                    level: level,
                    visible: visible && (parent ? parent.expanded : true),
                    isSelected: isSelected,
                    isChecked: isChecked,
                    parents: parents,
                    parentRowNode: parentRn,
                    index: _this.state.rowNodes.length,
                    last: isLast,
                    first: isFirst
                };
                // this.serializedValue.push(rowNode);
                _this.state.rowNodes.push(rowNode);
                _this.serializeNodes(node, node.children, level + 1, rowNode.visible, parents);
            }));
        }
    };
    /**
     * 判断指定的节点是否被选中
     * @param node 树节点
     */
    /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.isSelected = /**
     * 判断指定的节点是否被选中
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (this.singleSelect) {
            if (node && this.selectedRow) {
                return node.data[this.idField] === this.selectedRow.data[this.idField];
            }
            return false;
        }
        else {
            if (this.selections && this.selections.length) {
                return this.selections.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data[_this.idField] === node.data[_this.idField]; })) > -1;
            }
            return false;
        }
    };
    /** 判断当前节点的钩选状态 */
    /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    TreeTableComponent.prototype.isChecked = /**
     * 判断当前节点的钩选状态
     * @param {?} node
     * @return {?}
     */
    function (node) {
        var _this = this;
        if (node && this.checkeds) {
            if (this.checkeds instanceof Array) {
                return this.checkeds.findIndex((/**
                 * @param {?} v
                 * @return {?}
                 */
                function (v) {
                    return v.data[_this.idField] === node.data[_this.idField];
                })) > -1;
            }
            return false;
        }
        return false;
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectedCurrentRowEmit = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currSelected = this.selectedRow;
        if (currSelected) {
            this.nodeUnSelect.emit({ node: currSelected, type: 'row', instance: this });
        }
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.clearSelections();
        this.selectedRow = e.rowNode.node;
        this.selectRowIndex = e.rowIndex;
        this.selections = [e.rowNode.node];
        e.rowNode.isSelected = true;
        if (this.showCheckbox) {
            e.rowNode.isChecked = true;
            this.clearCheckeds();
            this.setCheckeds(e.rowNode);
        }
        /** @type {?} */
        var sp = {
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row',
            index: e.rowIndex,
            parents: e.rowNode.parents,
            instance: this
        };
        this.nodeSelected.emit(sp);
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    TreeTableComponent.prototype._singleUnSelectNode = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.selectedRow = null;
        this.selectRowIndex = -1;
        e.rowNode.isSelected = false;
        e.rowNode.isChecked = false;
        this.selections = [];
        this.nodeUnSelect.emit({
            originalEvent: e.originalEvent,
            node: e.rowNode.node, type: 'row', parents: e.rowNode.parents,
            instance: this
        });
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__singleSelectNode = /**
     * @private
     * @param {?} event
     * @param {?=} selected
     * @return {?}
     */
    function (event, selected) {
        if (selected === void 0) { selected = false; }
        if (!selected) {
            this.unSelectedCurrentRowEmit();
            this._singleSelectNode(event);
        }
        else {
            if (!this.keepSelect) {
                this._singleUnSelectNode(event);
            }
        }
    };
    /**
     * @private
     * @param {?} event
     * @param {?} selected
     * @return {?}
     */
    TreeTableComponent.prototype.__multiSelectNode = /**
     * @private
     * @param {?} event
     * @param {?} selected
     * @return {?}
     */
    function (event, selected) {
        /** @type {?} */
        var rowNode = event.rowNode;
        if (selected) {
            this.unSelectedCurrentRowEmit();
            this.singleSelectWhenMultiSelect(rowNode, true);
            this.nodeSelected.emit({
                originalEvent: event.originalEvent, node: rowNode.node,
                type: 'row', index: event.rowIndex, parents: rowNode.parents,
                instance: this
            });
        }
        else {
            if (!this.keepSelect) {
                this.singleSelectWhenMultiSelect(rowNode, false);
                this.nodeUnSelect.emit({
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                });
            }
        }
    };
    /**
     * 行单击事件
     */
    /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.handleRowClick = /**
     * 行单击事件
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var rowNode = event.rowNode;
        rowNode.node['elementRef'] = event.originalEvent.target;
        /** @type {?} */
        var selected = this.isSelected(rowNode.node);
        if (this.singleSelect) {
            this.__singleSelectNode(event, selected);
        }
        else {
            rowNode.indeterminate = false;
            if (this.onlySelectSelf) {
                this.__multiSelectNode(event, !selected);
            }
            else {
                rowNode.isSelected = !selected;
                this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rowNode.id; })).isSelected = !selected;
                this.setSelections(rowNode);
                /** @type {?} */
                var rowSelectChangeParams = {
                    originalEvent: event.originalEvent, node: rowNode.node,
                    type: 'row', index: event.rowIndex, parents: rowNode.parents,
                    instance: this
                };
                if (rowNode.isSelected) {
                    this.nodeSelected.emit(rowSelectChangeParams);
                }
                else {
                    this.nodeUnSelect.emit(rowSelectChangeParams);
                }
                if (this.checkOnSelect) {
                    rowNode.isChecked = !selected;
                    this.state.rowNodes.find((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.id === rowNode.id; })).isChecked = !selected;
                    this.setCheckeds(rowNode);
                    /** @type {?} */
                    var nodes = this.cascadeNodes(rowNode, rowNode.isChecked);
                    this.ttService.onChangeCheckboxStatus(rowNode);
                    if (rowNode.isChecked) {
                        this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                    else {
                        this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: nodes, instance: this });
                    }
                }
            }
            if (this.checkOnSelect) {
                /** @type {?} */
                var ids = this.checkeds.map((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.id; }));
                this.checkValues = ids;
                this.checkValuesChange.emit(ids);
            }
        }
        this.detectChanges();
    };
    /**
     * 带有checkbox 的单选
     * @param rowNode 当前节点
     */
    /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    TreeTableComponent.prototype.singleSelectWhenMultiSelect = /**
     * 带有checkbox 的单选
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} flag
     * @return {?}
     */
    function (rowNode, flag) {
        if (this.checkOnSelect) {
            rowNode.isChecked = flag;
            this.cascadeNodes(rowNode, rowNode.isChecked);
            this.setCheckeds(rowNode);
            this.ttService.onChangeCheckboxStatus(rowNode);
            if (rowNode.isChecked) {
                this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
            else {
                this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, instance: this });
            }
        }
        this.clearSelections();
        if (this.onlySelectSelf) {
            this.selectedRow = rowNode.node;
        }
        rowNode.isSelected = flag;
        this.setSelections(rowNode);
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.selectWhenChecked = /**
     * @private
     * @param {?} rowNode
     * @param {?} flag
     * @param {?} event
     * @return {?}
     */
    function (rowNode, flag, event) {
        if (rowNode.node.selectable) {
            rowNode.isChecked = flag;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (this.onlySelectSelf) {
                if (flag || (this.selectedRow && this.selectedRow.id === rowNode.id)) {
                    this.clearSelections();
                }
            }
            if (this.singleSelect && this.showCheckbox) {
                this.clearCheckeds();
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = flag;
            }
            this.setSelections(rowNode);
            this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === rowNode.id; })).isSelected = flag;
            if (rowNode.isSelected) {
                this.nodeSelected.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
            else {
                this.nodeUnSelect.emit({ originalEvent: event, node: rowNode.node, instance: this, type: 'checkbox' });
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    TreeTableComponent.prototype.isInArray = /**
     * @private
     * @param {?} rowNode
     * @param {?} items
     * @return {?}
     */
    function (rowNode, items) {
        var _this = this;
        if (items && items.length === 0) {
            return false;
        }
        return items.findIndex((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return i.data[_this.idField] === rowNode.id; })) > -1;
    };
    /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.setSelections = /**
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        if (rowNode.isSelected) {
            if (!this.selections) {
                this.selections = [];
            }
            if (!this.isInArray(rowNode, this.selections)) {
                // this.selections = [...this.selections, rowNode.node];
                this.selections.push(rowNode.node);
            }
        }
        else {
            if (this.selections) {
                /** @type {?} */
                var i = this.selections.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.selections.splice(i, 1);
                }
                // this.selections = this.selections.filter((tn: TreeNode) => tn.data[this.idField] !== rowNode.node.data[this.idField]);
            }
        }
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?=} updated
     * @return {?}
     */
    TreeTableComponent.prototype.setCheckeds = /**
     * @private
     * @param {?} rowNode
     * @param {?=} updated
     * @return {?}
     */
    function (rowNode, updated) {
        var _this = this;
        if (updated === void 0) { updated = true; }
        if (rowNode.isChecked) {
            if (!this.checkeds) {
                this.checkeds = [];
            }
            if (!this.isInArray(rowNode, this.checkeds)) {
                this.checkeds.push(rowNode.node);
            }
        }
        else {
            if (this.checkeds) {
                /** @type {?} */
                var i = this.checkeds.findIndex((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) { return tn.data[_this.idField] === rowNode.node.data[_this.idField]; }));
                if (i !== -1) {
                    this.checkeds.splice(i, 1);
                }
            }
        }
        if (updated) {
            this.checkeds = tslib_1.__spread(this.checkeds);
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.getDiffrentData = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        if (data.length) {
            /** @type {?} */
            var _nodes_1 = [];
            data.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_nodes_1.findIndex((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) { return t.data[_this.idField] === n.data[_this.idField]; })) === -1) {
                    _nodes_1.push(n);
                }
            }));
            return _nodes_1;
        }
        return data;
    };
    /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @param {?=} sync
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeCheckedNode = /**
     * @private
     * @param {?} rowNode
     * @param {?} checked
     * @param {?=} sync
     * @return {?}
     */
    function (rowNode, checked, sync) {
        if (sync === void 0) { sync = false; }
        /** @type {?} */
        var nodes = [];
        if (rowNode.node.selectable) {
            rowNode.isChecked = checked;
        }
        this.setCheckeds(rowNode, false);
        if (this.selectOnCheck) {
            if (sync) {
                /** @type {?} */
                var status_1 = this.isIndeterminate(rowNode) !== 2;
                checked = status_1 ? checked : false;
            }
            if (rowNode.node.selectable) {
                rowNode.isSelected = checked;
                this.setSelections(rowNode);
            }
        }
        if (!this.isInArray(rowNode, nodes)) {
            nodes.push(rowNode.node);
        }
        return nodes;
    };
    /**
     * 向下级联选中
     * @param node 当前节点
     * @param checked 选中状态
     * 返回受影响的行
     */
    /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionDown = /**
     * 向下级联选中
     * @param {?} rowNode
     * @param {?} checked 选中状态
     * 返回受影响的行
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeDown && rowNode.node.children && rowNode.node.children.length) {
            rowNode.node.children.forEach((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                /** @type {?} */
                var rn = _this.state.rowNodes.find((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) { return row.id === v.data[_this.idField]; }));
                if (rn) {
                    rn.indeterminate = false;
                    if (rn.node.selectable) {
                        rn.isChecked = checked;
                    }
                    nodes = nodes.concat(_this.propagateSelectionDown(rn, checked));
                    _this.ttService.onChangeCheckboxStatus(rn);
                }
            }));
        }
        return nodes;
    };
    /**
     * 向上级联选中
     */
    /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.propagateSelectionUp = /**
     * 向上级联选中
     * @param {?} rowNode
     * @param {?} checked
     * @return {?}
     */
    function (rowNode, checked) {
        var _this = this;
        /** @type {?} */
        var nodes = this.cascadeCheckedNode(rowNode, checked);
        if (this.cascadeCheck && this.cascadeUp && rowNode.node.parent) {
            if (rowNode.parents && rowNode.parents.length) {
                /** @type {?} */
                var rns_1 = [];
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @param {?} i
                 * @return {?}
                 */
                function (n, i) {
                    /** @type {?} */
                    var rn = _this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        // rn.isChecked = checked;
                        /** @type {?} */
                        var checkedNodes = _this.cascadeCheckedNode(rn, checked, true);
                        if (checkedNodes.length) {
                            nodes.push(checkedNodes[0]);
                        }
                        rns_1.push(rn);
                    }
                }));
                rns_1.reverse().forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    _this.updateCheckboxStatus(rn);
                }));
            }
        }
        return nodes;
    };
    // 节点状态（选中，勾选）同步更新
    // 节点状态（选中，勾选）同步更新
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.updateNodeStatus = 
    // 节点状态（选中，勾选）同步更新
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.state.searched) {
            /** @type {?} */
            var rowNodes = this.state.searchRowNodes;
            if (!rowNodes) {
                return;
            }
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                /** @type {?} */
                var checkedItem = _this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                /** @type {?} */
                var chked = checkedItem ? checkedItem.isChecked : false;
                rn.indeterminate = false;
                rn.isChecked = chked;
                if (_this.selectOnCheck) {
                    if (checkedItem.isSelected != rn.isChecked) {
                        checkedItem.isSelected = checkedItem.isChecked;
                    }
                    rn.isSelected = checkedItem.isSelected;
                }
            }));
        }
        else {
            if (this.selectOnCheck) {
                this.state.rowNodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    if (_this.onlySelectSelf) {
                        if (!_this.selections || !_this.selections.length) {
                            rn.isSelected = false;
                        }
                        else {
                            if (_this.selections[0].id === rn.id) {
                                rn.isSelected = true;
                            }
                            else {
                                rn.isSelected = false;
                            }
                        }
                    }
                    else {
                        if (rn.isSelected != rn.isChecked) {
                            rn.isSelected = rn.isChecked;
                        }
                    }
                }));
            }
        }
    };
    /**
     * 级联选择节点
     * @param rowNode 当前节点
     * @param checked 是否钩选
     */
    /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    TreeTableComponent.prototype.cascadeNodes = /**
     * 级联选择节点
     * @private
     * @param {?} rowNode 当前节点
     * @param {?} checked 是否钩选
     * @return {?}
     */
    function (rowNode, checked) {
        /** @type {?} */
        var checkedNodes = this.propagateSelectionDown(rowNode, checked);
        checkedNodes = checkedNodes.concat(this.propagateSelectionUp(rowNode, checked));
        checkedNodes = this.getDiffrentData(checkedNodes);
        this.updateNodeStatus();
        this.updateAllCheckboxStatus();
        return checkedNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            return n.selectable;
        }));
    };
    /**
     * 行Checkbox 选中变化事件
     * @param event 鼠标点击事件对象
     * @param rowNode 当前树节点
     */
    /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodeWithCheckbox = /**
     * 行Checkbox 选中变化事件
     * @param {?} event 鼠标点击事件对象
     * @param {?} rowNode 当前树节点
     * @param {?} checked
     * @return {?}
     */
    function (event, rowNode, checked) {
        this.state.rowNodes.find((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === rowNode.id; })).isChecked = checked;
        rowNode.indeterminate = false;
        /** @type {?} */
        var data = this.cascadeNodes(rowNode, checked);
        this.ttService.onChangeCheckboxStatus(rowNode);
        if (checked) {
            this.nodeChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        else {
            this.nodeUnChecked.emit({ originalEvent: event, node: rowNode.node, nodes: data, instance: this });
        }
        this.selectWhenChecked(rowNode, checked, event);
        if (this.onlySelectSelf && checked) {
            this.selectedRow = rowNode.node;
        }
        this.checkeds = tslib_1.__spread(this.checkeds);
        this.detectChanges();
        event.stopPropagation();
    };
    /**
     * 全选
     * @param event 鼠标事件对象
     * @param checked 是否选中
     */
    /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    TreeTableComponent.prototype.toggleNodesWithCheckbox = /**
     * 全选
     * @param {?} event 鼠标事件对象
     * @param {?} checked 是否选中
     * @return {?}
     */
    function (event, checked) {
        if (checked) {
            if (this.data && this.data.length) {
                this.checkAllNodes({ originalEvent: event, checked: checked, instance: this });
            }
        }
        else {
            this.selections = null;
            this.unCheckAllNodes({ originalEvent: event, checked: checked, instance: this });
        }
        this.detectChanges();
    };
    /** 更新全选checkbox 的状态 */
    /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.updateAllCheckboxStatus = /**
     * 更新全选checkbox 的状态
     * @private
     * @return {?}
     */
    function () {
        if (this['checkall_CLICKED']) {
            return;
        }
        /** @type {?} */
        var status = this.isIndeterminate();
        if (this.showCheckAll && !this.singleSelect && this.showCheckbox) {
            if (status !== undefined) {
                if (this.headerCheckboxCmp) {
                    this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = status === 2;
                    this.headerCheckboxCmp.checked = status === 1;
                }
            }
        }
    };
    /** 更新父节点checkbox 选中状态 */
    /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentCheckboxStatus = /**
     * 更新父节点checkbox 选中状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var pNodes = [];
        rowNode.parents.forEach((/**
         * @param {?} rnid
         * @return {?}
         */
        function (rnid) {
            /** @type {?} */
            var rn = _this.findRowNode(rnid);
            if (rn) {
                pNodes.push(rn);
            }
        }));
        pNodes.reverse().forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
    };
    /** 更新N个父节点复选框中的选中状态 */
    /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    TreeTableComponent.prototype.updateParentsCheckStatus = /**
     * 更新N个父节点复选框中的选中状态
     * @private
     * @param {?} parentIds
     * @return {?}
     */
    function (parentIds) {
        var _this = this;
        /** @type {?} */
        var pids = [];
        parentIds.forEach((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            pids = tslib_1.__spread(pids, ids);
        }));
        pids = Array.from(new Set(pids));
        /** @type {?} */
        var pRowNodes = this.findRowNodes(pids);
        pRowNodes.sort((/**
         * @param {?} r
         * @param {?} n
         * @return {?}
         */
        function (r, n) {
            return n.level - r.level;
        })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            _this.updateCheckboxStatus(rn);
        }));
    };
    /** 更新节点中checkbox的状态 */
    /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.updateCheckboxStatus = /**
     * 更新节点中checkbox的状态
     * @private
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.isIndeterminate(rowNode);
        if (status !== undefined && rowNode.node.selectable) {
            rowNode.indeterminate = status === 2;
            this.ttService.onChangeCheckboxStatus(rowNode);
        }
    };
    /** 判断指定节点checkbox 的状态
     * 0：全不选， 1： 全部选中， 2：有选中的也有没选中的
     */
    /**
     * 判断指定节点checkbox 的状态
     * 0：全不选， 1： 全部选中， 2：有选中的也有没选中的
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.isIndeterminate = /**
     * 判断指定节点checkbox 的状态
     * 0：全不选， 1： 全部选中， 2：有选中的也有没选中的
     * @private
     * @param {?=} rowNode
     * @return {?}
     */
    function (rowNode) {
        /** @type {?} */
        var status = this.getCheckboxStatus(rowNode);
        if (status !== undefined) {
            /** @type {?} */
            var checked = false;
            if (status === 2) {
                checked = false;
            }
            else {
                checked = !!status;
            }
            if (rowNode && rowNode.node.selectable) {
                rowNode.isChecked = checked;
                this.setCheckeds(rowNode, false);
            }
        }
        return status;
    };
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @param rowNode 父级节点；为空时返回全选checkbox 的状态
     */
    /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    TreeTableComponent.prototype.getCheckboxStatus = /**
     * 返回父级节点checkbox 的状态。0：不选中， 1： 选中， 2：不确定
     * @private
     * @param {?=} rowNode 父级节点；为空时返回全选checkbox 的状态
     * @return {?}
     */
    function (rowNode) {
        var _this = this;
        /** @type {?} */
        var uncheckedLength = 0;
        /** @type {?} */
        var checkedLength = 0;
        /** @type {?} */
        var len = 0;
        /** @type {?} */
        var childNodes = [];
        if (rowNode) {
            childNodes = rowNode.node.children || [];
            if (!childNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.selectable; })).length) {
                return rowNode.isChecked;
            }
        }
        else {
            childNodes = this.state.rowNodes;
        }
        len = childNodes.length;
        childNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            /** @type {?} */
            var rn = n;
            if (rowNode) {
                rn = _this.findRowNode(n.data[_this.idField]);
            }
            if (rn && !rn.indeterminate) {
                if (rn.isChecked) {
                    checkedLength++;
                }
                else {
                    uncheckedLength++;
                }
            }
        }));
        if (len === 0) {
            return undefined;
        }
        /** @type {?} */
        var flag = 0;
        if (uncheckedLength === len) {
            flag = 0;
        }
        else {
            if (checkedLength === len) {
                flag = 1;
            }
            else {
                flag = 2;
            }
        }
        return flag;
    };
    /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexIn = /**
     * @private
     * @param {?} node
     * @param {?} treeNodes
     * @return {?}
     */
    function (node, treeNodes) {
        var _this = this;
        /** @type {?} */
        var index = -1;
        if (treeNodes && treeNodes.length) {
            index = treeNodes.findIndex((/**
             * @param {?} v
             * @param {?} i
             * @return {?}
             */
            function (v, i) {
                return _this.equals(v, node);
            }));
        }
        return index;
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInCheckeds = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.checkeds);
    };
    /**
     * 在选中的集合中查找指定节点的索引
     * @param node 树节点
     */
    /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    TreeTableComponent.prototype.findIndexInSelection = /**
     * 在选中的集合中查找指定节点的索引
     * @param {?} node 树节点
     * @return {?}
     */
    function (node) {
        return this.findIndexIn(node, this.selections);
    };
    /** 对比两个节点是否同一个节点 */
    /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    TreeTableComponent.prototype.equals = /**
     * 对比两个节点是否同一个节点
     * @param {?} target
     * @param {?} source
     * @return {?}
     */
    function (target, source) {
        return target.data[this.idField] === source.data[this.idField];
    };
    /**
     * 展开所有节点
     * @param rowNode 展开此节点下的所有节点；如果为空，则展开所有节点
     * @param deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     */
    /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param {?=} childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     * @return {?}
     */
    TreeTableComponent.prototype.toggleExpand = /**
     * 展开所有节点
     * @param {?=} treeNode
     * @param {?=} deep 设置为true 时，当前节点下的所有子节点全部展开, 默认 false
     * @param {?=} childrenEmptyEmitExpand  当没有子节点是否触发展开事件，默认为 true
     * @return {?}
     */
    function (treeNode, deep, childrenEmptyEmitExpand) {
        var _this = this;
        if (deep === void 0) { deep = false; }
        if (childrenEmptyEmitExpand === void 0) { childrenEmptyEmitExpand = true; }
        if (treeNode) {
            treeNode.expanded = !treeNode.expanded;
            this.updateNodeProperty(treeNode.id, { expanded: treeNode.expanded });
            this.toggleVisible(treeNode);
            if (this.virtualized) {
                if (treeNode.children && treeNode.children.length) {
                    this.renderVirtualRowNodes();
                }
            }
            if (treeNode.expanded) {
                if (childrenEmptyEmitExpand || (treeNode.children && treeNode.children.length)) {
                    this.expand.emit(treeNode);
                }
                else {
                    treeNode.expanded = !treeNode.expanded;
                    return;
                }
            }
            else {
                this.collapse.emit(treeNode);
            }
            if (deep) {
                if (treeNode.children && treeNode.children.length) {
                    treeNode.children.forEach((/**
                     * @param {?} row
                     * @param {?} i
                     * @return {?}
                     */
                    function (row, i) {
                        _this.toggleExpand(row, deep, childrenEmptyEmitExpand);
                    }));
                }
            }
        }
        else {
            if (this.data && this.data.length) {
                this.data.forEach((/**
                 * @param {?} row
                 * @return {?}
                 */
                function (row) {
                    _this.toggleExpand(row);
                }));
            }
        }
        this.setNewColumnsWidth();
    };
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.toggleVisible = /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _this = this;
        /** @type {?} */
        var rowNode = this.findRowNode(treeNode.id);
        if (rowNode) {
            /** @type {?} */
            var rid_1 = rowNode.id;
            /** @type {?} */
            var setRowVisible_1 = (/**
             * @param {?} rn
             * @param {?} visible
             * @return {?}
             */
            function (rn, visible) {
                /** @type {?} */
                var pid = rn.parent.data[_this.idField];
                /** @type {?} */
                var rnParent = _this.findRowNode(pid);
                if (rnParent) {
                    rn.visible = rnParent.visible && rnParent.node.expanded;
                }
                else {
                    rn.visible = visible;
                }
                /** @type {?} */
                var _r = _this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                if (_r) {
                    _r.visible = rn.visible;
                }
            });
            this.state.rowNodes.filter((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) { return rn.parents.indexOf(rid_1) > -1; })).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                setRowVisible_1(rn, treeNode.expanded);
            }));
            // #392512 
            /** @type {?} */
            var rowNodes = this.getCurrentAllRowNodes();
            if (rowNodes) {
                rowNodes.filter((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) { return rn.parents.indexOf(rid_1) > -1; })).forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    setRowVisible_1(rn, treeNode.expanded);
                }));
            }
        }
    };
    /** 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     */
    /**
     * 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     * @param {?} id
     * @param {?=} emit
     * @param {?=} render
     * @return {?}
     */
    TreeTableComponent.prototype.expandNode = /**
     * 展开指定节点
     * emit: 触发展开事件
     * render: 数据重新加载
     * @param {?} id
     * @param {?=} emit
     * @param {?=} render
     * @return {?}
     */
    function (id, emit, render) {
        if (emit === void 0) { emit = true; }
        if (render === void 0) { render = true; }
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = true;
                this.toggleVisible(rowNode.node);
                if (render) {
                    if (this.virtualized) {
                        if (rowNode.node.children && rowNode.node.children.length) {
                            this.renderVirtualRowNodes();
                        }
                    }
                    else {
                        this.detectChanges();
                    }
                }
                if (emit) {
                    this.expand.emit(rowNode.node);
                }
                this.setNewColumnsWidth();
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    };
    /** 展开所有节点 */
    /**
     * 展开所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.expandAll = /**
     * 展开所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = true;
            row.visible = true;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes();
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.setNewColumnsWidth();
        this.expandAllNodes.emit();
        this.detectChanges();
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.expandNodes = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        // const rowNode = this.findRowNode(id);
        // const rootNode = this.getRoot(id);
        // if (rowNode) {
        //     const treeNode = rowNode.node;
        //     treeNode.expanded = true;
        //     rowNode.visible = true;
        //     const parents = rowNode.parents;
        //     this.state.rowNodes.filter(n => n.parents.indexOf(rootNode.id) > -1).forEach(r => {
        //         if (parents.indexOf(r.id) > -1) {
        //             r.visible = true;
        //             r.node.expanded = true;
        //         }
        //     });
        //     this.detectChanges();
        // }
    };
    /** 展开指定节点下的所有节点 */
    /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    TreeTableComponent.prototype.expandAllNodesBy = /**
     * 展开指定节点下的所有节点
     * @param {?} rowNode
     * @return {?}
     */
    function (rowNode) {
        if (rowNode) {
            /** @type {?} */
            var treeNode = rowNode.node;
            treeNode.expanded = true;
            rowNode.visible = true;
            this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.parents.indexOf(rowNode.id) > -1; })).forEach((/**
             * @param {?} r
             * @return {?}
             */
            function (r) {
                r.visible = true;
                r.node.expanded = true;
            }));
            this.detectChanges();
            this.setNewColumnsWidth();
        }
    };
    /** 折叠指定节点 */
    /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.collapseNode = /**
     * 折叠指定节点
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode) {
                rowNode.node.expanded = false;
                this.toggleVisible(rowNode.node);
                this.detectChanges();
                this.setNewColumnsWidth();
                this.collapse.emit(rowNode.node);
            }
            else {
                this.writeConsole('Con\'t find tree node widh id:' + id, 'error');
            }
        }
    };
    /** 折叠所有节点 */
    /**
     * 折叠所有节点
     * @return {?}
     */
    TreeTableComponent.prototype.collapseAll = /**
     * 折叠所有节点
     * @return {?}
     */
    function () {
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.node.expanded = false;
            row.visible = !row.parent;
            return row;
        }));
        if (this.virtualized) {
            this.renderVirtualRowNodes(0);
        }
        else {
            this.serializedValue = this.state.rowNodes;
        }
        this.collapseAllNodes.emit();
        this.detectChanges();
        this.setNewColumnsWidth();
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.getContainerOffset = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rect = this.containerElement.getBoundingClientRect();
        return {
            left: rect.left + document.body.scrollLeft,
            top: rect.top + document.body.scrollTop
        };
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeBegin = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var containerLeft = Math.round(this.getContainerOffset().left);
        this.lastResizerHelperX = (event.pageX - containerLeft + this.containerElement.scrollLeft);
        event.preventDefault();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResize = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.resizableColumns) {
            /** @type {?} */
            var containerLeft = this.getContainerOffset().left;
            this.renderer.addClass(this.containerElement, 'ui-unselectable-text');
            this.resizerHelperVC.nativeElement.style.height = this.containerElement.offsetHeight + 'px';
            this.resizerHelperVC.nativeElement.style.top = 0 + 'px';
            this.resizerHelperVC.nativeElement.style.left = (event.pageX - containerLeft) + 'px';
            this.resizerHelperVC.nativeElement.style.display = 'block';
        }
    };
    /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    TreeTableComponent.prototype.onColumnResizeEnd = /**
     * @param {?} event
     * @param {?} column
     * @return {?}
     */
    function (event, column) {
        if (!this.resizerHelperVC.nativeElement.offsetLeft) {
            return;
        }
        // 偏移量
        /** @type {?} */
        var delta = this.resizerHelperVC.nativeElement.offsetLeft - this.lastResizerHelperX;
        // 列宽
        /** @type {?} */
        var columnWidth = column.offsetWidth;
        // 新宽度
        /** @type {?} */
        var newColumnWidth = columnWidth + delta;
        // 最小宽度
        /** @type {?} */
        var minWidth = column.style.minWidth || 15;
        /** @type {?} */
        var resizeColumnIndex = -1;
        if (column.id) {
            resizeColumnIndex = this.columns.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === column.id; }));
        }
        else {
            /** @type {?} */
            var colField_1 = column.getAttribute('field');
            if (colField_1) {
                resizeColumnIndex = this.columns.findIndex((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.field === colField_1; }));
            }
        }
        if (!this.fitColumns) {
            this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, 0);
            if (this.columns[resizeColumnIndex]) {
                this.columns[resizeColumnIndex].width = newColumnWidth;
            }
            this.sortColumnsByFixed(false);
            this.setCellWidthCss(this.allColumnsWidth(), 0, []);
            // this.setTableWidth(this.allColumnsWidth());
            // // update css.
            // const _colInfo = this.columns[resizeColumnIndex];
            // if (_colInfo) {
            //     const ruleName = this.columnCssName(_colInfo);
            //     const stylecss = ruleName + '{width:' + newColumnWidth + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
            // const nextColumn = this.columns[resizeColumnIndex + 1];
            // if (nextColumn && nextColumn.fixed) {
            //     const ruleName = this.columnCssName(nextColumn);
            //     const stylecss = ruleName + '{' + nextColumn.fixed + ':' + nextColumn[nextColumn.fixed] + 'px}';
            //     this.utils.appendCssRules([stylecss], this.styleElement.sheet);
            // }
        }
        else {
            if (newColumnWidth > minWidth) {
                /** @type {?} */
                var nextColumn = column.nextElementSibling;
                while (!nextColumn.offsetParent) {
                    nextColumn = nextColumn.nextElementSibling;
                }
                if (nextColumn) {
                    /** @type {?} */
                    var nextColumnWidth = nextColumn.offsetWidth - delta;
                    /** @type {?} */
                    var nextColumnMinWidth = nextColumn.style.minWidth || 15;
                    if (newColumnWidth > 15 && nextColumnWidth > nextColumnMinWidth) {
                        this.resizeColGroup(this.headerTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                        this.resizeColGroup(this.bodyTable.nativeElement, resizeColumnIndex, newColumnWidth, nextColumnWidth);
                    }
                }
            }
        }
        this.resizerHelperVC.nativeElement.style.display = 'none';
        this.renderer.removeClass(this.containerElement, 'ui-unselectable-text');
        this.psRef.directiveRef.update();
    };
    /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    TreeTableComponent.prototype.resizeColGroup = /**
     * @param {?} table
     * @param {?} resizeColumnIndex
     * @param {?} newColumnWidth
     * @param {?=} nextColumnWidth
     * @return {?}
     */
    function (table, resizeColumnIndex, newColumnWidth, nextColumnWidth) {
        if (table) {
            /** @type {?} */
            var colGroup = table.children[0].nodeName === 'COLGROUP' ? table.children[0] : null;
            if (colGroup) {
                /** @type {?} */
                var col = colGroup.children[resizeColumnIndex];
                /** @type {?} */
                var nextCol = col.nextElementSibling;
                col.style.width = newColumnWidth + 'px';
                if (nextCol) {
                    if (nextColumnWidth && this.fitColumns) {
                        nextCol.style.width = nextColumnWidth + 'px';
                    }
                }
            }
            else {
                throw new Error('Scrollable tables require a colgroup to support resizable columns');
            }
        }
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.onSearch = /**
     * @return {?}
     */
    function () {
        this.state.searchRowNodes = null;
        this.state.searched = !!this.searchData.value;
        if (this.searchData.value) {
            this.searchData.value = this.searchData.value.trim();
        }
        this.search.emit(this.searchData);
    };
    /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.insert = /**
     * @param {?} node
     * @param {?=} parent
     * @return {?}
     */
    function (node, parent) {
        if (parent) {
            if (!parent.children) {
                parent.children = [];
            }
            parent.children.push(node);
            this.expandNode(parent.data[this.idField]);
            this.appendNew.emit({ parent: parent });
        }
        else {
            this.data.push(node);
        }
        this.updateSerializedValue();
    };
    /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    TreeTableComponent.prototype.append = /**
     * @param {?} data
     * @param {?=} parent
     * @return {?}
     */
    function (data, parent) {
        if (data && data[this.idField]) {
            this.insert({ data: data, id: data[this.idField] }, parent);
        }
        else {
            this.writeConsole('Please set id value.', 'warn');
        }
    };
    /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    TreeTableComponent.prototype.emitAppendNew = /**
     * @private
     * @param {?} parent
     * @return {?}
     */
    function (parent) {
        if (this.virtualized) {
            /** @type {?} */
            var nodePosY = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
            this.updateSerializedValue(nodePosY);
        }
        else {
            this.updateSerializedValue();
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.appendChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        var _a;
        if (nodes && nodes.length) {
            if (parent) {
                (_a = parent.children).push.apply(_a, tslib_1.__spread(nodes));
                this.emitAppendNew(parent);
                if (emit) {
                    this.appendNew.emit({ parent: parent });
                }
            }
            else {
                throw new Error('未找到父级节点');
            }
        }
        else {
            this.updateSerializedValue();
            this.writeConsole('添加子节点的数据为空', 'warn');
        }
    };
    /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.loadChildren = /**
     * @param {?} nodes
     * @param {?} parent
     * @param {?=} emit
     * @return {?}
     */
    function (nodes, parent, emit) {
        if (emit === void 0) { emit = true; }
        if (parent) {
            parent.children = nodes || [];
            this.emitAppendNew(parent);
            if (emit) {
                this.appendNew.emit({ parent: parent });
            }
        }
    };
    /**
     * @param {?} nodeId
     * @return {?}
     */
    TreeTableComponent.prototype.remove = /**
     * @param {?} nodeId
     * @return {?}
     */
    function (nodeId) {
        var _this = this;
        if (nodeId) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                // remove(this.state.rowNodes, (n) => {
                //     return n.id === nodeId;
                // });
                if (this.selectValue === nodeId) {
                    this.selectedRow = null;
                    this.selectValue = null;
                }
                if (rowNode.parent) {
                    remove(rowNode.parent.children, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.data[_this.idField] === nodeId;
                    }));
                }
                else {
                    remove(this.state.rowNodes, (/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        return n.id === nodeId;
                    }));
                    this.data = this.data.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return n.data[_this.idField] !== nodeId; }));
                }
                this.updateSerializedValue();
                this.detectChanges();
                this.ttService.onRemove(rowNode);
                this.removed.emit(rowNode);
            }
        }
    };
    /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.update = /**
     * @param {?} nodeId
     * @param {?} data
     * @return {?}
     */
    function (nodeId, data) {
        if (nodeId && data) {
            /** @type {?} */
            var rowNode = this.findRowNode(nodeId);
            if (rowNode) {
                rowNode.node.data = extend(rowNode.node.data, data);
                this.detectChanges();
                this.ttService.onUpdate(rowNode);
                this.updated.emit(rowNode);
            }
        }
    };
    /**
     * @param {?} nodeid
     * @param {?} property
     * @return {?}
     */
    TreeTableComponent.prototype.updateNodeProperty = /**
     * @param {?} nodeid
     * @param {?} property
     * @return {?}
     */
    function (nodeid, property) {
        /** @type {?} */
        var rowNode = this.findRowNode(nodeid);
        if (rowNode && property) {
            Object.keys(property).forEach((/**
             * @param {?} k
             * @return {?}
             */
            function (k) {
                rowNode.node[k] = property[k];
            }));
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.setScorllBodyHeight = /**
     * @private
     * @return {?}
     */
    function () {
        this.scorllBodyHeight = this.height;
        if (this.showFilterBar) {
            this.scorllBodyHeight = this.scorllBodyHeight - 46;
        }
        if (this.enableFilterRow) {
            this.scorllBodyHeight = this.scorllBodyHeight - 36;
        }
        if (this.fixedHeader && this.showHeader) {
            if (this.headerBox && (this.headerWrap || this.useGroupHeader)) {
                /** @type {?} */
                var hh = this.headerBox.nativeElement.clientHeight;
                this.scorllBodyHeight = this.scorllBodyHeight - hh;
            }
            else {
                // 宽松版时，表头高度增高，需要按实际取得表头高度
                /** @type {?} */
                var _headerHeight = this.headerHeight;
                /** @type {?} */
                var themesKey = localStorage.getItem('gsp_rtf_themSKey');
                if (themesKey === 'loose' && this.headerBox) {
                    _headerHeight = this.headerBox.nativeElement.getBoundingClientRect().height;
                }
                this.scorllBodyHeight = this.scorllBodyHeight - _headerHeight;
            }
        }
        if (this.pagination) {
            this.scorllBodyHeight = this.scorllBodyHeight - this.pagerHeight;
        }
        this.detectChanges();
    };
    /**
     * @private
     * @param {?} w
     * @return {?}
     */
    TreeTableComponent.prototype.setWidth = /**
     * @private
     * @param {?} w
     * @return {?}
     */
    function (w) {
        this.width = w;
    };
    /**
     * @param {?=} size
     * @return {?}
     */
    TreeTableComponent.prototype.resize = /**
     * @param {?=} size
     * @return {?}
     */
    function (size) {
        if (size) {
            /** @type {?} */
            var w = parseInt('' + size.width, 10);
            /** @type {?} */
            var h = parseInt('' + size.height, 10);
            if (this.width === w && this.height === h) {
                if (this.state.scrollY) {
                    this.psRef.directiveRef.scrollToY(this.state.scrollY);
                }
                if (this.state.scrollX) {
                    this.psRef.directiveRef.scrollToX(this.state.scrollX);
                }
                return;
            }
            this.setWidth(w);
            this.height = h;
        }
        this.setScorllBodyHeight();
        if (this.data && this.data.length) {
            this.renderVirtualRowNodes();
        }
        // setTimeout(() => {
        //     if (this.psRef) {
        //         this.psRef.directiveRef.update();
        //     }
        // }, 100);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    TreeTableComponent.prototype.loadData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.showLines) {
            this.isLoadNewDataSetEmpty = true;
            this.data = [];
            this.isLoadNewDataSetEmpty = false;
        }
        this.data = data;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.empty = /**
     * @return {?}
     */
    function () {
        this.data = [];
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.getCurrentAllRowNodes = /**
     * @return {?}
     */
    function () {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            return this.state.searchRowNodes || this.state.rowNodes;
        }
        else {
            return this.state.rowNodes;
        }
    };
    /**
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.clearAll = /**
     * @param {?=} detectChanges
     * @return {?}
     */
    function (detectChanges) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return rn.indeterminate; })).forEach((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            rn.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(rn);
        }));
        this.state.rowNodes = this.state.rowNodes.map((/**
         * @param {?} row
         * @return {?}
         */
        function (row) {
            row.isChecked = false;
            row.isSelected = false;
            row.indeterminate = false;
            return row;
        }));
        // if (this.searchData && this.searchData.value) {
        if (this.state.searched && this.state.searchRowNodes && this.state.searchRowNodes.length) {
            this.serializedValue = this.state.searchRowNodes.map((/**
             * @param {?} row
             * @return {?}
             */
            function (row) {
                row.isChecked = false;
                row.isSelected = false;
                row.indeterminate = false;
                return row;
            }));
        }
        this.checkeds = [];
        this.selections = [];
        this.selectedRow = undefined;
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        if (detectChanges) {
            this.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.detectChanges = /**
     * @return {?}
     */
    function () {
        this.cdRef.markForCheck();
        // tslint:disable-next-line:no-string-literal
        if (!this.cdRef['destroyed']) {
            this.cdRef.detectChanges();
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearCheckeds = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.checkeds && this.checkeds.length) {
            this.findRowNodes(this.checkeds.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }))).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isChecked = false;
            }));
        }
        this.checkeds = [];
        if (this.showCheckAll && this.headerCheckboxCmp) {
            this.headerCheckboxCmp.chkAll.nativeElement.indeterminate = false;
            this.headerCheckboxCmp.checked = false;
        }
        return this;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clearSelections = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.serializedValue && this.serializedValue.length) {
            this.serializedValue.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                n.isSelected = false;
            }));
        }
        this.state.rowNodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            n.isSelected = false;
        }));
        if (this.selections && this.selections.length) {
            /** @type {?} */
            var nodeIds = this.selections.map((/**
             * @param {?} tn
             * @return {?}
             */
            function (tn) { return tn.data[_this.idField]; }));
            this.findRowNodes(nodeIds).forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = false;
                if (_this.singleSelect) {
                    rn.isChecked = false;
                }
            }));
        }
        this.selections = undefined;
        this.selectedRow = undefined;
        return this;
    };
    /** 选中第1个可以选中的节点 */
    /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    TreeTableComponent.prototype.selectFirstNode = /**
     * 选中第1个可以选中的节点
     * @return {?}
     */
    function () {
        if (this.state.rowNodes && this.state.rowNodes.length) {
            /** @type {?} */
            var firstCanSelectNode = this.state.rowNodes.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.node.selectable; }));
            if (firstCanSelectNode) {
                this.selectNode(firstCanSelectNode.id);
            }
        }
    };
    /**
     * @private
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentRow = /**
     * @private
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var trId = 'rownode-' + id;
        // const trEle =    document.getElementById(trId);
        /** @type {?} */
        var trEle = this.el.nativeElement.querySelector('#' + trId) || document.getElementById(trId);
        if (trEle && trEle.closest('.farris-treetable') && trEle.closest('.farris-treetable').id === this.id) {
            if (!this.isElementInViewport(trEle)) {
                if (trEle.scrollIntoViewIfNeeded) {
                    trEle.scrollIntoViewIfNeeded();
                    return true;
                }
                /** @type {?} */
                var browserInfo = this.utils.getBrowserType();
                if (browserInfo.ff && this.utils.getFFVer() < 58) {
                    trEle.scrollIntoView();
                }
                else {
                    trEle.scrollIntoView({ block: 'nearest', inline: 'nearest' });
                }
            }
            else {
                trEle.scrollIntoView({ block: 'nearest' });
            }
            return true;
        }
        return false;
    };
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    TreeTableComponent.prototype.isElementInViewport = /**
     * @private
     * @param {?} el
     * @return {?}
     */
    function (el) {
        /** @type {?} */
        var containerEl = this.el.nativeElement.querySelector('.farris-treetable-body');
        if (!containerEl) {
            return false;
        }
        /** @type {?} */
        var container = containerEl.getBoundingClientRect();
        /** @type {?} */
        var viewPortHeight = container.height;
        /** @type {?} */
        var offsetTop = el.offsetTop + this.topHideHeight;
        /** @type {?} */
        var scrollTop = this.psRef.directiveRef.elementRef.nativeElement.scrollTop;
        /** @type {?} */
        var top = offsetTop - scrollTop;
        return top >= 0 && top <= viewPortHeight;
    };
    /**
     * @private
     * @param {?} nodeId
     * @return {?}
     */
    TreeTableComponent.prototype._scrollToNode = /**
     * @private
     * @param {?} nodeId
     * @return {?}
     */
    function (nodeId) {
        this.scrollToCurrentNode(nodeId);
    };
    /**
     * @param {?=} nodeid
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToCurrentNode = /**
     * @param {?=} nodeid
     * @return {?}
     */
    function (nodeid) {
        var _this = this;
        if (nodeid === void 0) { nodeid = ''; }
        /** @type {?} */
        var id = nodeid;
        if (!nodeid && this.selectedRow) {
            id = this.selectedRow.id;
        }
        if (id == null || id == undefined || id == '') {
            return;
        }
        /** @type {?} */
        var result = this.scrollToCurrentRow(id);
        if (!result) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            /** @type {?} */
            var showRowsOnePager = Math.ceil(this.scorllBodyHeight / this.rowHeight) + 1;
            if (rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} pid
                 * @return {?}
                 */
                function (pid) {
                    _this.expandNode(pid, false, false);
                }));
            }
            /** @type {?} */
            var rowIndex = this.state.rowNodes.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.visible; })).findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id === id; }));
            if (rowIndex < showRowsOnePager) {
                if (this.virtualized) {
                    this.renderData(0);
                }
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.scrollToCurrentRow(id);
                }));
                return;
            }
            /** @type {?} */
            var top_1 = rowIndex * this.rowHeight;
            if (this.virtualized) {
                this.renderData(top_1 - this.rowHeight);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.scrollToCurrentRow(id);
                    if (_this.psRef && _this.psRef.directiveRef) {
                        _this.psRef.directiveRef.elementRef.nativeElement.scrollTop += 1;
                    }
                }), 50);
            }
            else {
                this.scrollToY(top_1 - this.rowHeight);
                this.scrollToCurrentRow(id);
            }
        }
    };
    /** 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     */
    /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    TreeTableComponent.prototype.selectNode = /**
     * 选中指定ID 的节点,
     * detectChanges: 触发脏值检查，默认为 true
     * gotocurrent: 使用选中节点可见，默认为 true
     * @param {?} id
     * @param {?=} detectChanges
     * @param {?=} gotocurrent
     * @return {?}
     */
    function (id, detectChanges, gotocurrent) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        if (gotocurrent === void 0) { gotocurrent = true; }
        if (!id) {
            return this;
        }
        /** @type {?} */
        var node = this.findRowNode(id);
        /** @type {?} */
        var canSelect = node && node.node && node.node.selectable;
        /** @type {?} */
        var emit = canSelect && (!this.selectedRow || (this.selectedRow && id !== this.selectedRow.id));
        if (node && emit) {
            node.isSelected = true;
            if (this.singleSelect || this.onlySelectSelf) {
                this.clearSelections();
                node.isSelected = true;
                this.selections = [node.node];
                if (this.checkOnSelect && this.showCheckbox) {
                    node.isChecked = true;
                    if (this.multiSelect) {
                        this.setCheckeds(node);
                    }
                    else {
                        this.clearCheckeds();
                        this.checkeds = [node.node];
                    }
                    if (this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
            }
            else {
                this.setSelections(node);
            }
            this.selectedRow = node.node;
            this.selectNodeChangedSubject.next(id);
            this.nodeSelected.emit({ node: node.node, instance: this });
            if (this.serializedValue.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id == _this.selectedRow.id; }))) {
                this.serializedValue.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id == _this.selectedRow.id; })).isSelected = true;
            }
            if (gotocurrent && this.fixedHeader) {
                this.scrollToCurrentNode();
            }
            if (detectChanges) {
                this.detectChanges();
            }
        }
        else {
            if (!node) {
                this.selectedRow = null;
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A " + id + " \u7684\u6570\u636E\uFF01\uFF01");
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNode = /**
     * 取消选中
     * @param {?} id
     * @param {?=} detectChanges
     * @return {?}
     */
    function (id, detectChanges) {
        if (detectChanges === void 0) { detectChanges = true; }
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            rowNode.isSelected = false;
            if (this.singleSelect) {
                this.clearSelections();
                this.selectedRow = null;
                rowNode.isChecked = false;
                this.selections = [];
            }
            else {
                if (this.onlySelectSelf) {
                    this.selections = [];
                }
                else {
                    this.setSelections(rowNode);
                }
            }
            if (detectChanges) {
                this.detectChanges();
            }
            this.nodeUnSelect.emit({ node: rowNode.node, instance: this });
        }
        else {
            this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
        }
    };
    /** 选中多行数据 */
    /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    TreeTableComponent.prototype.selectNodes = /**
     * 选中多行数据
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emitNodeSelected
     * @return {?}
     */
    function (ids, detectChanges, emitNodeSelected) {
        var _this = this;
        if (detectChanges === void 0) { detectChanges = true; }
        if (emitNodeSelected === void 0) { emitNodeSelected = false; }
        if (ids && ids.length) {
            /** @type {?} */
            var nodes = this.findRowNodes(ids).map((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                rn.isSelected = true;
                _this.setSelections(rn);
                return rn.node;
            }));
            this.selections = tslib_1.__spread(this.selections);
            if (detectChanges) {
                this.detectChanges();
            }
            this.selectNodeChangedSubject.next(ids.join(','));
            if (emitNodeSelected) {
                this.nodeSelected.emit({ node: nodes, instance: this });
            }
        }
        return this;
    };
    /** 取消选中 */
    /**
     * 取消选中
     * @param {?=} ids
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.unSelectNodes = /**
     * 取消选中
     * @param {?=} ids
     * @param {?=} emit
     * @return {?}
     */
    function (ids, emit) {
        var _this = this;
        if (emit === void 0) { emit = true; }
        if (ids && ids.length) {
            /** @type {?} */
            var rownodes = this.findRowNodes(ids);
            if (rownodes && rownodes.length) {
                rownodes.forEach((/**
                 * @param {?} rn
                 * @return {?}
                 */
                function (rn) {
                    rn.isSelected = false;
                    _this.setSelections(rn);
                }));
                this.selections = tslib_1.__spread(this.selections);
                this.detectChanges();
                if (emit) {
                    this.nodeUnSelect.emit({ node: rownodes.map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        function (r) { return r.node; })), instance: this });
                }
            }
        }
        else {
            this.clearSelections();
            this.detectChanges();
        }
    };
    /**
     * 钩选指定的节点
     * @param updateParentCheckboxStatus: 是否更新父级节点checkbox 状态, 默认为 true
     * @param detectChanges 触发变更检测。默认为 true
     */
    /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNode = /**
     * 钩选指定的节点
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @param {?=} detectChanges 触发变更检测。默认为 true
     * @return {?}
     */
    function (id, updateParentCheckboxStatus, detectChanges) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (detectChanges === void 0) { detectChanges = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var node = this.findRowNode(id);
            if (node) {
                node.isChecked = true;
                if (!this.isChecked(node.node)) {
                    this.setCheckeds(node, false);
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(node);
                    }
                }
                if (detectChanges) {
                    this.detectChanges();
                }
                this.nodeChecked.emit({ originalEvent: null, node: node.node, instance: this });
            }
            else {
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
            }
        }
    };
    /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNode = /**
     * @param {?} id
     * @param {?=} updateParentCheckboxStatus
     * @return {?}
     */
    function (id, updateParentCheckboxStatus) {
        if (updateParentCheckboxStatus === void 0) { updateParentCheckboxStatus = true; }
        if (this.isEnableMultiSelect()) {
            /** @type {?} */
            var rownode = this.findRowNode(id);
            if (rownode) {
                rownode.isChecked = false;
                this.setCheckeds(rownode);
                if (this.selectOnCheck) {
                    rownode.isSelected = false;
                    this.setSelections(rownode);
                }
                if (this.selectedRow && this.selectedRow.id === id) {
                    this.selectedRow = null;
                }
                if (this.singleSelect || !this.cascadeCheck) {
                    this.updateNodeStatus();
                    if (updateParentCheckboxStatus && this.cascadeCheck && this.cascadeUp) {
                        this.updateParentCheckboxStatus(rownode);
                    }
                    if (this.checkValues) {
                        this.checkValues = this.checkValues.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n !== id; }));
                        this.checkValuesChange.emit(this.checkValues);
                    }
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, instance: this });
                }
                else {
                    /** @type {?} */
                    var unNodes = this.cascadeNodes(rownode, false);
                    this.checkeds = tslib_1.__spread(this.checkeds);
                    this.checkValuesChange.emit(this.checkValues);
                    this.detectChanges();
                    this.nodeUnChecked.emit({ node: rownode, nodes: unNodes, instance: this });
                }
            }
            else {
                this.writeConsole("\u672A\u627E\u5230ID\u4E3A" + id + "\u7684\u6570\u636E\uFF01\uFF01");
            }
        }
    };
    /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    TreeTableComponent.prototype._checkedNodes = /**
     * @private
     * @param {?} ids
     * @param {?} checked
     * @return {?}
     */
    function (ids, checked) {
        var _this = this;
        /** @type {?} */
        var parentIDS = [];
        /** @type {?} */
        var nodes = this.findRowNodes(ids).map((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) {
            parentIDS.push(rn.parents);
            if (rn.node.selectable) {
                rn.isChecked = checked;
                _this.setCheckeds(rn, false);
            }
            return rn.node;
        }));
        this.checkeds = tslib_1.__spread(this.checkeds);
        if (this.cascadeCheck && this.cascadeUp) {
            // 更新父节点复框的选中状态
            this.updateParentsCheckStatus(parentIDS);
        }
        return nodes;
    };
    /** 批量选中节点
     * @param ids: id 集合
     * @param detectChanges: boolean  默认为 true ,是否触发变更检测
     * closeCascade:  执行取消钩选时是否关闭级联功能。默认为 false
     *      设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     */
    /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    TreeTableComponent.prototype.checkedNodes = /**
     * 批量选中节点
     * @param {?} ids
     * @param {?=} detectChanges
     * @param {?=} emit
     * @param {?=} closeCascade
     * @return {?}
     */
    function (ids, detectChanges, emit, closeCascade) {
        if (detectChanges === void 0) { detectChanges = true; }
        if (emit === void 0) { emit = true; }
        if (this.isEnableMultiSelect()) {
            if (ids && ids.length) {
                /** @type {?} */
                var _cascade = this.cascadeCheck;
                if (closeCascade && _cascade) {
                    this.cascadeCheck = false;
                }
                /** @type {?} */
                var nodes = this._checkedNodes(ids, true);
                if (closeCascade && _cascade) {
                    // 恢复级联
                    this.cascadeCheck = true;
                }
                this.updateAllCheckboxStatus();
                if (detectChanges) {
                    this.detectChanges();
                }
                if (emit) {
                    this.nodeChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
                }
            }
        }
    };
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     */
    /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedNodes = /**
     * 取消选中的节点.
     * ids: 标识Id 数组
     * closeCascade: 执行取消钩选时是否关闭级联功能。默认为 false
     *     设为true时，钩选将禁用级联的功能，仅处理当前节点的选中状态。执行完毕后，恢复原先的级联选项。
     * emit: 是否触发取消勾选事件。默认为 true
     * @param {?} ids
     * @param {?=} closeCascade
     * @param {?=} emit
     * @return {?}
     */
    function (ids, closeCascade, emit) {
        if (emit === void 0) { emit = true; }
        if (ids && ids.length) {
            /** @type {?} */
            var _cascade = this.cascadeCheck;
            if (closeCascade && _cascade) {
                this.cascadeCheck = false;
            }
            /** @type {?} */
            var nodes = this._checkedNodes(ids, false);
            if (closeCascade && _cascade) {
                this.cascadeCheck = true;
            }
            this.detectChanges();
            if (emit) {
                this.nodeUnChecked.emit({ originalEvent: null, node: nodes, nodes: nodes, instance: this });
            }
        }
        else {
            this.clearCheckeds();
            this.detectChanges();
        }
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckedAndSelected = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        this.unCheckedNodes(ids, true, false);
        this.unSelectNodes(ids, false);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNode = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        if (id) {
            if (this.state.rowNodes) {
                return this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === id; }));
            }
        }
        return undefined;
    };
    /** 将在 v0.2.x 废弃；请使用 findRowNode 方法 */
    /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.findNode = /**
     * 将在 v0.2.x 废弃；请使用 findRowNode 方法
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.findRowNode(id);
    };
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param id 当前节点ID
     * @returns 返回顶级节点
     */
    /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    TreeTableComponent.prototype.getRoot = /**
     * 根据当前节点ID，获取顶级父节点
     * @param {?} id 当前节点ID
     * @return {?} 返回顶级节点
     */
    function (id) {
        /** @type {?} */
        var rowNode = this.findRowNode(id);
        if (rowNode) {
            if (rowNode.parents && rowNode.parents.length) {
                return this.findRowNode(rowNode.parents[0]);
            }
            return rowNode;
        }
        return null;
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    TreeTableComponent.prototype.findRowNodes = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        return this.state.rowNodes.filter((/**
         * @param {?} rn
         * @return {?}
         */
        function (rn) { return ids.indexOf(rn.id) > -1; }));
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.checkAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        var _this = this;
        /** @type {?} */
        var rowNodes = this.getCurrentAllRowNodes();
        rowNodes = rowNodes.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return (n.node.selectable || n.node.selectable === undefined); }));
        this.checkeds = rowNodes.map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            n.indeterminate = false;
            _this.ttService.onChangeCheckboxStatus(n);
            if (n.node.selectable || n.node.selectable === undefined) {
                n.isChecked = true;
            }
            return n.node;
        }));
        if (this.selectOnCheck && !this.onlySelectSelf) {
            this.selections = rowNodes.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.node.selectable || n.node.selectable === undefined) {
                    n.isSelected = true;
                }
                return n.node;
            }));
        }
        if (this.state.searched) {
            rowNodes.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                /** @type {?} */
                var row = _this.state.rowNodes.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.id === rn.id; }));
                if (row) {
                    row.isSelected = rn.isSelected;
                    row.isChecked = rn.isChecked;
                }
            }));
        }
        this.checkAll.emit(args);
        this.updateAllCheckboxStatus();
        this.detectChanges();
    };
    /**
     * @param {?=} args
     * @return {?}
     */
    TreeTableComponent.prototype.unCheckAllNodes = /**
     * @param {?=} args
     * @return {?}
     */
    function (args) {
        this.clearAll();
        this.unCheckAll.emit(args);
        this.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.isEnableMultiSelect = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.singleSelect) {
            if (!this.showCheckbox) {
                return false;
            }
            return true;
        }
        return true;
    };
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    TreeTableComponent.prototype.getNodeIconFromData = 
    // 从数据中获取节点图标
    // iconField 为 object
    //      如果 展开图标为空，折叠图标不为空，或反之，则展开与折叠图标保持一至；
    //      如果 叶子图标为空，则使用组件默认的图标
    // iconField 为 字符串： 则叶子 展开 折叠 图标使用同一个。 如果为空， 则使用组件默认图标
    /**
     * @private
     * @param {?} tn
     * @return {?}
     */
    function (tn) {
        /** @type {?} */
        var leaf = null;
        /** @type {?} */
        var expand = null;
        /** @type {?} */
        var collapse = null;
        if (this.useIconFromData) {
            if (this.iconField) {
                /** @type {?} */
                var _iconField = '';
                if (typeof this.iconField === 'string') {
                    _iconField = this.iconField;
                    if (tn[_iconField]) {
                        leaf = tn[_iconField];
                    }
                    else {
                        leaf = this.utils.getValue(_iconField, tn.data);
                    }
                    expand = collapse = leaf;
                }
                else {
                    if (this.iconField.leaf) {
                        leaf = this.utils.getValue(this.iconField.leaf, tn.data);
                    }
                    if (this.iconField.expand) {
                        expand = this.utils.getValue(this.iconField.expand, tn.data);
                    }
                    if (this.iconField.collapse) {
                        collapse = this.utils.getValue(this.iconField.collapse, tn.data);
                    }
                    if (expand && !collapse) {
                        collapse = expand;
                    }
                    if (!expand && collapse) {
                        expand = collapse;
                    }
                }
            }
        }
        return {
            leaf: leaf, expand: expand, collapse: collapse
        };
    };
    /**
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableComponent.prototype.getTreeIcon = /**
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        var _a;
        /** @type {?} */
        var tn = treeNode;
        /** @type {?} */
        var leafIcon = this.leafIcon || 'file';
        /** @type {?} */
        var expandIcon = this.expandIcon || 'folder-open';
        /** @type {?} */
        var collapseIcon = this.collapseIcon || 'folder';
        /** @type {?} */
        var loading = 'f-loading-round';
        if (tn['showLoading']) {
            return _a = {}, _a[loading] = true, _a;
        }
        if (tn.icon) {
            leafIcon = tn.icon;
        }
        if (tn.expandedIcon) {
            expandIcon = tn.expandedIcon;
        }
        if (tn.collapsedIcon) {
            collapseIcon = tn.collapsedIcon;
        }
        if (this.useIconFromData) {
            var _b = this.getNodeIconFromData(treeNode), leaf = _b.leaf, expand = _b.expand, collapse = _b.collapse;
            if (this.whenDataIconEmptyUseDefault) {
                if (leaf) {
                    leafIcon = leaf;
                }
                if (expand) {
                    expandIcon = expand;
                }
                if (collapse) {
                    collapseIcon = collapse;
                }
            }
            else {
                leafIcon = leaf || '';
                expandIcon = expand || '';
                collapseIcon = collapse || '';
            }
        }
        /** @type {?} */
        var collapsedExpression = (!tn.leaf || !!(tn.children && tn.children.length)) && !tn.expanded;
        /** @type {?} */
        var expandedExpression = !!tn.expanded;
        /** @type {?} */
        var leafExpression = tn.leaf === undefined ? (!tn.children || !tn.children.length) : tn.leaf;
        /** @type {?} */
        var icons = {};
        if (leafExpression && leafIcon) {
            icons[leafIcon] = leafExpression;
        }
        else {
            if (tn.expanded && expandIcon) {
                icons[expandIcon] = expandedExpression;
            }
            else {
                if (collapseIcon) {
                    icons[collapseIcon] = collapsedExpression;
                }
            }
        }
        if (this.iconCls) {
            icons[this.iconCls] = true;
        }
        return icons;
    };
    /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    TreeTableComponent.prototype.compare = /**
     * @private
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    function (a, b) {
        if (typeof a === 'string') {
            return a.localeCompare(b);
        }
        else {
            return a === b ? 0 : (a > b ? 1 : -1);
        }
    };
    /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    TreeTableComponent.prototype._sort = /**
     * @private
     * @param {?} r1
     * @param {?} r2
     * @return {?}
     */
    function (r1, r2) {
        /** @type {?} */
        var r = 0;
        /** @type {?} */
        var sortFields = this.sortName.split(',');
        /** @type {?} */
        var orders = this.sortOrder.split(',');
        if (!this.sortName) {
            return r;
        }
        var _loop_1 = function (i) {
            /** @type {?} */
            var sn = sortFields[i];
            /** @type {?} */
            var so = orders[i];
            /** @type {?} */
            var col = this_1.columns.find((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return c.field === sn; }));
            /** @type {?} */
            var orderby = col.sorter || this_1.compare;
            /** @type {?} */
            var v1 = this_1.utils.getValue(sn, r1.data);
            if (v1 === null || v1 === undefined) {
                v1 = '';
            }
            /** @type {?} */
            var v2 = this_1.utils.getValue(sn, r2.data);
            if (v2 === null || v2 === undefined) {
                v2 = '';
            }
            r = orderby(v1, v2);
            if (r !== 0) {
                return { value: r * (so === 'asc' ? 1 : -1) };
            }
        };
        var this_1 = this;
        for (var i = 0; i < sortFields.length; i++) {
            var state_1 = _loop_1(i);
            if (typeof state_1 === "object")
                return state_1.value;
        }
        return r;
    };
    /**
     * @return {?}
     */
    TreeTableComponent.prototype.clientSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.data || !this.data.length) {
            return;
        }
        /** @type {?} */
        var sortedData = this.data.sort(this._sort.bind(this));
        /** @type {?} */
        var sortChildNodes = (/**
         * @param {?} childNodes
         * @return {?}
         */
        function (childNodes) {
            childNodes = childNodes.sort(_this._sort.bind(_this));
            childNodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (n.children && n.children.length) {
                    n.children = n.children.sort(_this._sort.bind(_this));
                    sortChildNodes(n.children);
                }
            }));
            return childNodes;
        });
        sortedData.forEach((/**
         * @param {?} c
         * @return {?}
         */
        function (c) {
            c.children = sortChildNodes(c.children);
        }));
        this.loadData(sortedData);
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.onSortColumnClick = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        var _this = this;
        if (!col.sortable) {
            return;
        }
        /** @type {?} */
        var sortName = this.sortName;
        /** @type {?} */
        var sortOrder = this.sortOrder;
        /** @type {?} */
        var sortFields = [];
        /** @type {?} */
        var sortOrders = [];
        if (sortName) {
            sortFields = sortName.split(',');
            sortOrders = sortOrder.split(',');
        }
        /** @type {?} */
        var colOrder = col.order || 'asc';
        /** @type {?} */
        var newOrder = colOrder;
        /** @type {?} */
        var i = sortFields.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n === col.field; }));
        if (i >= 0) {
            /** @type {?} */
            var _order = sortOrders[i] === 'asc' ? 'desc' : 'asc';
            newOrder = _order;
            // if (this.multiSort && newOrder === 'asc') {
            if (newOrder === 'asc') {
                newOrder = undefined;
                sortFields.splice(i, 1);
                sortOrders.splice(i, 1);
            }
            else {
                sortOrders[i] = _order;
            }
        }
        else {
            if (this.multiSort) {
                sortFields.push(col.field);
                sortOrders.push(colOrder);
            }
            else {
                sortFields = [col.field];
                sortOrders = [colOrder];
            }
        }
        col.order = newOrder;
        this.sortName = sortFields.join(',');
        this.sortOrder = sortOrders.join(',');
        if (!this.multiSort) {
            /** @type {?} */
            var updateFieldOrder = (/**
             * @param {?} cols
             * @return {?}
             */
            function (cols) {
                if (!cols || !cols.length) {
                    return;
                }
                cols.forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    c.order = undefined;
                    /** @type {?} */
                    var k = sortFields.findIndex((/**
                     * @param {?} f
                     * @return {?}
                     */
                    function (f) { return f === c.field; }));
                    if (k >= 0) {
                        c.order = sortOrders[k];
                    }
                }));
            });
            updateFieldOrder(this.columns);
            this.cdRef.detectChanges();
        }
        this.beforeSortColumn(this.sortName, this.sortOrder).subscribe((/**
         * @return {?}
         */
        function () {
            if (_this.remoteSort) {
                // this.reload();
            }
            else {
                _this.clientSort();
            }
            _this.columnSorted.emit({ sortName: _this.sortName, sortOrder: _this.sortOrder });
        }));
    };
    /** 查询工具条前端字符查询 */
    /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.findKeyWords = /**
     * 查询工具条前端字符查询
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var searchValue = $event.value;
        /** @type {?} */
        var field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;
            if (!field) {
                this.writeConsole('Please set a field for the FindField property.', 'warn');
                return;
            }
            /** @type {?} */
            var result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
            if (result && result.length) {
                this.findResult = result.sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) { return a.index === b.index ? 0 : (a.index > b.index ? 1 : -1); }));
                this.findCount = result.length;
                this.findCurrent = 1;
                this._scrollToNode(result[0].id);
                this.highLightKeywords();
            }
            else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        }
        else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    };
    /**
     * @param {?} step
     * @return {?}
     */
    TreeTableComponent.prototype.nextFindValue = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        var _this = this;
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        /** @type {?} */
        var allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        }
        else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            }
            else {
                this.findCurrent++;
            }
        }
        /** @type {?} */
        var active = this.el.nativeElement.querySelector('.search-highlight.active');
        if (active) {
            this.renderer.removeClass(active, 'active');
        }
        /** @type {?} */
        var _index = this.findCurrent - 1;
        /** @type {?} */
        var nextRow = this.findResult[_index];
        if (nextRow) {
            this._scrollToNode(nextRow.id);
            if (this.virtualized) {
                this.ngZone.runOutsideAngular((/**
                 * @return {?}
                 */
                function () {
                    if (_this['HIGH_LIGHT_TIMER']) {
                        clearTimeout(_this['HIGH_LIGHT_TIMER']);
                    }
                    _this['HIGH_LIGHT_TIMER'] = setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        /** @type {?} */
                        var trId = 'rownode-' + nextRow.id;
                        /** @type {?} */
                        var tr = _this.el.nativeElement.querySelector('#' + trId);
                        if (tr) {
                            /** @type {?} */
                            var highLightDom = tr.querySelector('.search-highlight');
                            if (highLightDom) {
                                _this.renderer.addClass(highLightDom, 'active');
                            }
                        }
                    }), 100);
                }));
            }
            else {
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
                }
            }
        }
    };
    /** 查询工具条前端字符查询 */
    /*
    findKeyWords($event) {
        const searchValue = $event.value;
        const field = $event.field;
        this.findField = field;
        if (searchValue && searchValue.length >= 2) {
            this.findValue = searchValue;

            if (!field) {
                this.writeConsole('Please set a field for the FindField property.', 'warn');
                return;
            }

            const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);

            if (result && result.length) {
                this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                const firstRowIndex = result[0].index;

                this.findCount = result.length;

                const parents = this.searchHandle.findParents(result, this.state.rowNodes);

                this.findCurrent = 1;
                [...parents, ...result].forEach((r: RowNode) => {
                    this.expandNode(r.id);
                });

                let y = 0;
                this.state.rowNodes.forEach((row: RowNode, index: number) => {
                    if (row.visible && firstRowIndex > index) {
                        y += this.rowHeight;
                    }
                });
                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y - 30);
                }

                this.highLightKeywords();
            } else {
                this.findResult = [];
                this.findCurrent = 0;
                this.findCount = 0;
            }
        } else {
            this.resetFindText();
            this.cdRef.detectChanges();
        }
    }

    nextFindValue(step) {
        if (!this.findResult || !this.findResult.length) {
            return;
        }
        const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));

        if (this.findCurrent === this.findResult.length) {
            this.findCurrent = 1;
        } else {
            if (step) {
                this.findCurrent = this.findCurrent + step;
                if (step === -1) {
                    if (this.findCurrent <= 0) {
                        this.findCurrent = 1;
                    }
                }
            } else {
                this.findCurrent++;
            }
        }

        const active = this.el.nativeElement.querySelector('.search-highlight.active');

        let _index = allHighLights.indexOf(active);

        if (active) {
            this.renderer.removeClass(active, 'active');
        }

        if (this.virtualized) {

            _index += !step ? 1 : step;

            if (allHighLights[_index]) {
                this.renderer.addClass(allHighLights[_index], 'active');

            } else {
                // 先滚动指定位置
                const nextRow = this.findResult[this.findCurrent - 1];
                let y = 0;
                this.state.rowNodes.forEach((row: RowNode, index: number) => {
                    if (row.visible && nextRow.index > index) {
                        y += this.rowHeight;
                    }
                });

                if (this.psRef && this.psRef.directiveRef) {
                    this.psRef.directiveRef.scrollToY(y - 30, 200);
                }
                this.ngZone.runOutsideAngular(() => {
                    setTimeout(() => {
                        const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                        this.renderer.addClass(keyWords[0], 'active');
                    }, 100);
                });
            }
        } else {
            const currentEl: any = allHighLights[this.findCurrent - 1];
            if (currentEl) {
                this.renderer.addClass(currentEl, 'active');
                if (this.psRef && this.psRef.directiveRef) {
                    const sTop = currentEl.closest('td').offsetTop - 30;
                    this.psRef.directiveRef.scrollToY(sTop, 200);
                }
            }
        }


        this.cdRef.detectChanges();
    }
*/
    /**
     * 查询工具条前端字符查询
     * @return {?}
     */
    /*
        findKeyWords($event) {
            const searchValue = $event.value;
            const field = $event.field;
            this.findField = field;
            if (searchValue && searchValue.length >= 2) {
                this.findValue = searchValue;
    
                if (!field) {
                    this.writeConsole('Please set a field for the FindField property.', 'warn');
                    return;
                }
    
                const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
    
                if (result && result.length) {
                    this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                    const firstRowIndex = result[0].index;
    
                    this.findCount = result.length;
    
                    const parents = this.searchHandle.findParents(result, this.state.rowNodes);
    
                    this.findCurrent = 1;
                    [...parents, ...result].forEach((r: RowNode) => {
                        this.expandNode(r.id);
                    });
    
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && firstRowIndex > index) {
                            y += this.rowHeight;
                        }
                    });
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30);
                    }
    
                    this.highLightKeywords();
                } else {
                    this.findResult = [];
                    this.findCurrent = 0;
                    this.findCount = 0;
                }
            } else {
                this.resetFindText();
                this.cdRef.detectChanges();
            }
        }
    
        nextFindValue(step) {
            if (!this.findResult || !this.findResult.length) {
                return;
            }
            const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
    
            if (this.findCurrent === this.findResult.length) {
                this.findCurrent = 1;
            } else {
                if (step) {
                    this.findCurrent = this.findCurrent + step;
                    if (step === -1) {
                        if (this.findCurrent <= 0) {
                            this.findCurrent = 1;
                        }
                    }
                } else {
                    this.findCurrent++;
                }
            }
    
            const active = this.el.nativeElement.querySelector('.search-highlight.active');
    
            let _index = allHighLights.indexOf(active);
    
            if (active) {
                this.renderer.removeClass(active, 'active');
            }
    
            if (this.virtualized) {
    
                _index += !step ? 1 : step;
    
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
    
                } else {
                    // 先滚动指定位置
                    const nextRow = this.findResult[this.findCurrent - 1];
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && nextRow.index > index) {
                            y += this.rowHeight;
                        }
                    });
    
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30, 200);
                    }
                    this.ngZone.runOutsideAngular(() => {
                        setTimeout(() => {
                            const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                            this.renderer.addClass(keyWords[0], 'active');
                        }, 100);
                    });
                }
            } else {
                const currentEl: any = allHighLights[this.findCurrent - 1];
                if (currentEl) {
                    this.renderer.addClass(currentEl, 'active');
                    if (this.psRef && this.psRef.directiveRef) {
                        const sTop = currentEl.closest('td').offsetTop - 30;
                        this.psRef.directiveRef.scrollToY(sTop, 200);
                    }
                }
            }
    
    
            this.cdRef.detectChanges();
        }
    */
    TreeTableComponent.prototype.closeFindPanel = /**
     * 查询工具条前端字符查询
     * @return {?}
     */
    /*
        findKeyWords($event) {
            const searchValue = $event.value;
            const field = $event.field;
            this.findField = field;
            if (searchValue && searchValue.length >= 2) {
                this.findValue = searchValue;
    
                if (!field) {
                    this.writeConsole('Please set a field for the FindField property.', 'warn');
                    return;
                }
    
                const result = this.searchHandle.searchOnClient(field, searchValue, this.state.rowNodes);
    
                if (result && result.length) {
                    this.findResult = result.sort((a, b) => a.index === b.index ? 0 : (a.index > b.index ? 1 : -1));
                    const firstRowIndex = result[0].index;
    
                    this.findCount = result.length;
    
                    const parents = this.searchHandle.findParents(result, this.state.rowNodes);
    
                    this.findCurrent = 1;
                    [...parents, ...result].forEach((r: RowNode) => {
                        this.expandNode(r.id);
                    });
    
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && firstRowIndex > index) {
                            y += this.rowHeight;
                        }
                    });
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30);
                    }
    
                    this.highLightKeywords();
                } else {
                    this.findResult = [];
                    this.findCurrent = 0;
                    this.findCount = 0;
                }
            } else {
                this.resetFindText();
                this.cdRef.detectChanges();
            }
        }
    
        nextFindValue(step) {
            if (!this.findResult || !this.findResult.length) {
                return;
            }
            const allHighLights = Array.from(this.el.nativeElement.querySelectorAll('.search-highlight'));
    
            if (this.findCurrent === this.findResult.length) {
                this.findCurrent = 1;
            } else {
                if (step) {
                    this.findCurrent = this.findCurrent + step;
                    if (step === -1) {
                        if (this.findCurrent <= 0) {
                            this.findCurrent = 1;
                        }
                    }
                } else {
                    this.findCurrent++;
                }
            }
    
            const active = this.el.nativeElement.querySelector('.search-highlight.active');
    
            let _index = allHighLights.indexOf(active);
    
            if (active) {
                this.renderer.removeClass(active, 'active');
            }
    
            if (this.virtualized) {
    
                _index += !step ? 1 : step;
    
                if (allHighLights[_index]) {
                    this.renderer.addClass(allHighLights[_index], 'active');
    
                } else {
                    // 先滚动指定位置
                    const nextRow = this.findResult[this.findCurrent - 1];
                    let y = 0;
                    this.state.rowNodes.forEach((row: RowNode, index: number) => {
                        if (row.visible && nextRow.index > index) {
                            y += this.rowHeight;
                        }
                    });
    
                    if (this.psRef && this.psRef.directiveRef) {
                        this.psRef.directiveRef.scrollToY(y - 30, 200);
                    }
                    this.ngZone.runOutsideAngular(() => {
                        setTimeout(() => {
                            const keyWords = this.el.nativeElement.querySelectorAll('.search-highlight');
                            this.renderer.addClass(keyWords[0], 'active');
                        }, 100);
                    });
                }
            } else {
                const currentEl: any = allHighLights[this.findCurrent - 1];
                if (currentEl) {
                    this.renderer.addClass(currentEl, 'active');
                    if (this.psRef && this.psRef.directiveRef) {
                        const sTop = currentEl.closest('td').offsetTop - 30;
                        this.psRef.directiveRef.scrollToY(sTop, 200);
                    }
                }
            }
    
    
            this.cdRef.detectChanges();
        }
    */
    function () {
        this.showFindInput = false;
        this.resetFindText();
        this.cdRef.detectChanges();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.highLightKeywords = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.cdRef.detectChanges();
                /** @type {?} */
                var allHighLights = _this.el.nativeElement.querySelectorAll('.search-highlight');
                if (!allHighLights.length) {
                    return;
                }
                _this.renderer.addClass(allHighLights[0], 'active');
            }), 100);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableComponent.prototype.resetFindText = /**
     * @private
     * @return {?}
     */
    function () {
        this.findValue = '';
        this.findCurrent = 0;
        this.findCount = 0;
        this.findResult = [];
    };
    /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    TreeTableComponent.prototype.scrollToY = /**
     * @param {?} y
     * @param {?=} animations
     * @return {?}
     */
    function (y, animations) {
        if (animations === void 0) { animations = 200; }
        this.state.scrollY = y || 0;
        this.psRef.directiveRef.scrollToY(y, animations);
    };
    /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    TreeTableComponent.prototype.showOrHideColumn = /**
     * @private
     * @param {?} field
     * @param {?} isHide
     * @return {?}
     */
    function (field, isHide) {
        if (Array.isArray(field)) {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field.indexOf(n.field) > -1) {
                    n.visible = !isHide;
                }
            }));
        }
        else {
            this.columns.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (field === n.field) {
                    n.visible = !isHide;
                }
            }));
        }
        this.columnsChanged();
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.showColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, false);
    };
    /**
     * @param {?} field
     * @return {?}
     */
    TreeTableComponent.prototype.hideColumn = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.showOrHideColumn(field, true);
    };
    /**
     * @param {?} parentNode
     * @return {?}
     */
    TreeTableComponent.prototype.showChildsLoading = /**
     * @param {?} parentNode
     * @return {?}
     */
    function (parentNode) {
        var _a;
        /** @type {?} */
        var colspan = this.columns.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.visible !== false; })).length;
        /** @type {?} */
        var data = (_a = {}, _a[this.idField] = '正在加载中....', _a.__colspan__ = colspan, _a);
        this.loadChildren([{ data: data, __childs_loading__: true }], parentNode, false);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onChildsPageChanged = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.childsPageChanged.emit($event);
    };
    /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    TreeTableComponent.prototype.trId2DataId = /**
     * @private
     * @param {?} tr
     * @return {?}
     */
    function (tr) {
        return tr.id.replace('rownode-', '');
    };
    // 快捷键
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    TreeTableComponent.prototype.onKeydownEvent = 
    // 快捷键
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        if (!$event || !this.singleSelect || !this.data || !this.data.length) {
            return;
        }
        /** @type {?} */
        var keys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'];
        if (!keys.includes($event.key) || $event.target.nodeName === 'INPUT') {
            return;
        }
        $event.stopPropagation();
        $event.preventDefault();
        this.inputGroup.textbox.nativeElement.blur();
        /** @type {?} */
        var newIdx;
        /** @type {?} */
        var trs = Array.from(this.bodyTable.nativeElement.querySelectorAll('tr'));
        /** @type {?} */
        var trCount = trs.length;
        /** @type {?} */
        var selectedTrIndex = -1;
        if (this.selectedRow) {
            selectedTrIndex = trs.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this.trId2DataId(n) === _this.selectedRow.id; }));
        }
        if ($event.code === 'ArrowDown') {
            newIdx = selectedTrIndex + 1;
        }
        else if ($event.code === 'ArrowUp') {
            if (selectedTrIndex !== -1) {
                newIdx = selectedTrIndex - 1;
            }
        }
        else {
            if (this.selectedRow && ($event.code === 'ArrowRight' || $event.code === 'ArrowLeft')) {
                this.toggleExpand(this.selectedRow);
            }
            return;
        }
        if (newIdx >= 0 && newIdx < trCount) {
            /** @type {?} */
            var _tr = (/** @type {?} */ (trs[newIdx]));
            if (_tr) {
                /** @type {?} */
                var id = this.trId2DataId(_tr);
                this.selectNode(id);
                _tr.scrollIntoView({ block: 'nearest' });
            }
        }
    };
    /** 根据传入的父级ID，获取所有子级节点 */
    /**
     * 根据传入的父级ID，获取所有子级节点
     * @param {?} parentId
     * @return {?}
     */
    TreeTableComponent.prototype.getChildNodes = /**
     * 根据传入的父级ID，获取所有子级节点
     * @param {?} parentId
     * @return {?}
     */
    function (parentId) {
        var _this = this;
        /** @type {?} */
        var nodes = [];
        if (parentId) {
            /** @type {?} */
            var rowNode = this.findRowNode(parentId);
            if (rowNode && rowNode.node.children && rowNode.node.children.length) {
                rowNode.node.children.forEach((/**
                 * @param {?} tn
                 * @return {?}
                 */
                function (tn) {
                    if (tn.selectable) {
                        nodes.push(tn);
                    }
                    nodes = nodes.concat(_this.getChildNodes(tn.id));
                }));
            }
            return nodes;
        }
        return [];
    };
    /** 根据传入的节点ID， 获取所有父级节点 */
    /**
     * 根据传入的节点ID， 获取所有父级节点
     * @param {?} id
     * @return {?}
     */
    TreeTableComponent.prototype.getParentNodes = /**
     * 根据传入的节点ID， 获取所有父级节点
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        /** @type {?} */
        var nodes = [];
        if (id) {
            /** @type {?} */
            var rowNode = this.findRowNode(id);
            if (rowNode && rowNode.parents && rowNode.parents.length) {
                rowNode.parents.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    /** @type {?} */
                    var rn = _this.findRowNode(n);
                    if (rn && rn.node.selectable) {
                        nodes.push(rn);
                    }
                }));
            }
            return nodes;
        }
        return [];
    };
    /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    TreeTableComponent.prototype.onFilterRowInput = /**
     * @param {?} $event
     * @param {?} col
     * @return {?}
     */
    function ($event, col) {
        var _this = this;
        this.filterRowConditions = this.filterRowConditions || {};
        this.filterRowConditions[col.field] = $event.target.value;
        Object.keys(this.filterRowConditions).forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (_this.filterRowConditions[n] === '' || _this.filterRowConditions[n] == null) {
                delete _this.filterRowConditions[n];
            }
        }));
        if (this['FILTERCONDITIONS_CHANGED_TIMER']) {
            clearTimeout(this['FILTERCONDITIONS_CHANGED_TIMER']);
        }
        this['FILTERCONDITIONS_CHANGED_TIMER'] = setTimeout((/**
         * @return {?}
         */
        function () {
            _this.searchHandle.searchWithConditions(_this.filterRowConditions);
            _this.setNewColumnsWidth();
        }), 200);
    };
    TreeTableComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treetable',
                    template: "\r\n<div class=\"filter-row\" style=\"width: 100%;\" *ngIf=\"showFilterBar\">\r\n    <form style=\"display: flex; width: 100%;\">\r\n        <div class=\"search-fields\" style=\"padding-left:0; max-width: 180px;min-width: 140px;\" [style.display]=\"showSearchField ? '': 'none'\">\r\n            <select class=\"custom-select\" [(ngModel)]=\"searchData.field\" name=\"field\"  single-select [panelRef]=\"selectpanel\" [items]=\"searchFields\">\r\n                <!-- <option value=\"*\">{{allColumnsTitle}}</option>\r\n                <option *ngFor=\"let col of searchFields\" value=\"{{col.value}}\">{{ col.label }}</option> -->\r\n            </select>\r\n\r\n            <div #selectpanel class=\"single-select-panel f-area-hide\">\r\n                <ul class=\"dropdown-menu show\">\r\n                    <li class=\"dropdown-item\" [attr.value]=\"'*'\" [class.active]=\"searchData.field === '*'\" *ngIf=\"searchAnyField\">{{allColumnsTitle}}</li>\r\n                    <li class=\"dropdown-item\" *ngFor=\"let col of searchFields\" [attr.value]=\"col.value\" [class.active]=\"searchData.field === col.value\">{{ col.label }}</li>\r\n                </ul>\r\n            </div>\r\n\r\n\r\n        </div>\r\n        <div class=\"search-text flex-fill\" style=\"padding-right: 0px;\">\r\n            <input-group #inputGroup [groupText]=\"searchButtonText\" name=\"searchValue\" [(ngModel)]=\"searchData.value\"\r\n                (clear)=\"onClearSearchValue()\" (valueChange)=\"onSearchValueChange($event)\" (clickHandle)=\"onSearch()\"\r\n                (keydownHandle)=\"onKeydownEvent($event)\"></input-group>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n<ng-content select=\"tt-column\"></ng-content>\r\n\r\n<ng-template #tdcell let-col let-serializedNode=\"rowNode\" let-left=\"left\">\r\n\r\n    <ng-container *ngIf=\"enableFindText\">\r\n        <span *ngIf=\"!col.formatter\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data) | highlight: findValue: col.field :findField\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"!enableFindText\">\r\n        <span *ngIf=\"!col.formatter && !fast\" style=\"width: 100%;\"\r\n            [innerHTML]=\"getNodeText(col, serializedNode.node.data)\"></span>\r\n        <span *ngIf=\"!col.formatter && fast\" style=\"width: 100%;\"\r\n            [textContent]=\"getNodeText(col, serializedNode.node.data, true)\"></span>\r\n        <span *ngIf=\"col.formatter\" style=\"width: 100%;\" \r\n            [innerHTML]=\"formatData(col, serializedNode.node.data, col.formatter) | safe: 'html' \"></span>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<ng-template #tbodyrows>\r\n    <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForTrackBy]=\"trackByFn\" [ngForOf]=\"pagination ? (serializedValue | paginate: paginationOptions) : serializedValue\">\r\n        <tr *ngIf=\"serializedNode.visible\" #row=\"row\" \r\n            [attr.id]=\" 'rownode-' + serializedNode.id\" class=\"f-treetable-row\"\r\n            [selectRow]=\"serializedNode\" [rowIndex]=\"rowIndex\" [dblclick]=\"useDblClick\" [dblclickNode]=\"serializedNode\"\r\n            [selectRowDisabled]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [customRowStyle]=\"serializedNode\"\r\n            [class.f-treetable-disable-row]=\"serializedNode.node | disablenode: disabledRow\"\r\n            [class.farris-table-selectedrow]=\"serializedNode.isSelected\">\r\n\r\n            <td *ngIf=\"serializedNode.node.data['__colspan__']\"  [attr.colspan]=\" serializedNode.node.data['__colspan__'] || 0\">\r\n                <childs-loading></childs-loading>\r\n            </td>\r\n\r\n            <ng-container *ngIf=\"!serializedNode.node.data['__colspan__']\">\r\n                <td *ngFor=\"let col of columns; let i = index;\"\r\n                    [customCellStyle]=\"col\" [rowNode]=\"serializedNode\" [rowIndex]=\"rowIndex\"\r\n                    [style.textAlign]=\"col!.align || 'left'\" \r\n                    (click)=\"onCellClick($event, col, serializedNode.node)\"\r\n                    class=\"treetable-cell\" [attr.field]=\"col.field\"\r\n                    [attr.colspan]=\" serializedNode.node.data['__cellspan__'] || 0\"\r\n                    [attr.title]=\"col | tipmsg: serializedNode.node\"\r\n                    [class.f-treetable--fixed-left]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'left'\"\r\n                    [class.f-treetable--fixed-right]=\"fixedColumns && fixedHeader && col.fixed && col.fixed === 'right'\"\r\n                    [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n                    [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n                >\r\n\r\n                    <div class=\"treetable-cell-content d-flex align-items-center\">\r\n                        <farris-treeTableToggler style=\"float: left\"\r\n                            [showLines]=\"showLines\"\r\n                            [indentSpacing]=\"indentSpacing\"\r\n                            [disabled]=\"serializedNode.node | disablenode: disabledRow: disabled\"\r\n                            [rowNode]=\"serializedNode\" *ngIf=\"i == 0\"></farris-treeTableToggler>\r\n                        \r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"!col.componentType\">\r\n                            <ng-container *ngIf=\"!col.template && col.field\">\r\n                                <ng-container *ngTemplateOutlet=\"tdcell; context: {$implicit: col, node: serializedNode.node, rowNode: serializedNode, rowData: serializedNode.node.data  }\" ></ng-container>\r\n                            </ng-container>\r\n            \r\n                            <ng-container *ngIf=\"col.template\"\r\n                                [ngTemplateOutlet]=\"col.template\"\r\n                                [ngTemplateOutletContext]=\"{$implicit: { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }}\">\r\n                            </ng-container>\r\n                        </div>\r\n                        <div class=\"flex-grow-1 text\"  *ngIf=\"col.componentType\" [component-template]=\"col\" [ctx]=\" { column: col, node: serializedNode.node, rowNode: serializedNode, rowData:  serializedNode.node.data  }\">\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n            </ng-container>\r\n        </tr>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<ng-template #tbody>\r\n    <tbody class=\"farris-treetable-tbody\"\r\n        [farris-context-menus]=\"contextMenuItems\" [disabled]=\"!enableContextMenu\" \r\n        [activeDomName]=\"'tr'\" [beforeShowContextMenu]=\"onBeforeShowContextMenu\"\r\n        [menuClass]=\"'f-treetable-context-menu'\">\r\n        <ng-container *ngTemplateOutlet=\"tbodyrows\"></ng-container>\r\n    </tbody>\r\n</ng-template>\r\n\r\n<!--\u5355\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #headerCells let-cols let-firstRow=\"firstRow\">\r\n    <ng-template ngFor let-col [ngForOf]=\"cols\" let-i=\"index\" let-first=\"first\" let-last=\"last\">\r\n        <th [resizable-column]=\"(!col.lastColumn || !last) && (!col.colspan || col.colspan == 1)\" [style.textAlign]=\"col!.hAlign || 'left'\" #th \r\n            class=\"treetable-header-cell\"\r\n            [class.f-treetable--fixed-left]=\"fixedColumns && col.fixed && col.fixed === 'left'\"\r\n            [class.f-treetable--fixed-right]=\"fixedColumns && col.fixed && col.fixed === 'right'\"\r\n            [attr.field]=\"col.field || ''\"\r\n            [attr.r-tt-shadow-col]=\"col.rightShadowCol\"\r\n            [attr.l-tt-shadow-col]=\"col.leftShadowCol\"\r\n            [attr.colspan]=\"col.colspan\" \r\n            [attr.rowspan]=\"col.rowspan\"\r\n            [class.group-header-cell]=\"col.colspan && col.colspan > 1\"\r\n            [attr.id]=\"col.id\"\r\n            >\r\n      \r\n            <div class=\"d-flex\" style=\"line-height: 1.25em;\" [style.padding-right.px]=\"col.sortable ? 10: 0\">\r\n                <ng-container *ngIf=\"!singleSelect && showCheckAll && first && showCheckbox && !last && firstRow\">\r\n                    <tt-header-checkbox #allCheckbox></tt-header-checkbox>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"col.headTemplate&& !col.headerComponentType\"\r\n                    [ngTemplateOutlet]=\"col.headTemplate\"\r\n                    [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                </ng-container>\r\n                <ng-container *ngIf=\"!col.headTemplate && !col.headerComponentType\">\r\n                    <span style=\"overflow: hidden;width: 100%;\" *ngIf=\"!headerWrap\">{{ col.title }}</span>\r\n                    <span style=\"white-space: pre-wrap;width: 100%;\"  *ngIf=\"headerWrap\">{{ col.title }}</span>\r\n                </ng-container>\r\n\r\n                <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\"{ column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n\r\n\r\n                <ng-container *ngIf=\"col.sortable\">\r\n                    <span class=\"f-treetable-sort\"\r\n                        [class.f-treetable-sort-asc]=\"col.order === 'asc'\"\r\n                        [class.f-treetable-sort-desc]=\"col.order === 'desc'\"\r\n                        (click)=\"onSortColumnClick($event, col)\" *ngIf=\"col.order\"></span>\r\n                    <span class=\"f-treetable-sort\" (click)=\"onSortColumnClick($event, col)\" *ngIf=\"!col.order\"></span>\r\n                </ng-container>\r\n\r\n            </div>\r\n        </th>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<!--\u591A\u884C\u8868\u5934\u6A21\u677F-->\r\n<ng-template #groupHeader>\r\n    <tr *ngFor=\"let cols of groupColumns; first as isFirst\">\r\n        <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: cols, firstRow: isFirst}\"></ng-container>\r\n    </tr>\r\n</ng-template>\r\n\r\n\r\n<ng-template #scorllview>\r\n    <div class=\"farris-treetable fixed\" [attr.id]=\"id\" [class.f-treetable--fixed-columns]=\"fixedColumns\"\r\n        [class.farris-treetable-nowrap]=\"!nowrap\" [class.table-bordered]=\"showBorder\"\r\n        [ngClass]=\"{'farris-treetable-disabled': disabled}\"\r\n        [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" [style.width]=\"fit ? '100%': (width + 'px')\">\r\n        <div #headerBox class=\"farris-treetable-header\" *ngIf=\"showHeader && columns\" style=\"overflow: hidden; background-color: #f7f8fb\">\r\n            <table #headerTable class=\"table\" >\r\n                <colgroup *ngIf=\"!autoWidth\">\r\n                    <ng-container *ngFor=\"let col of columns\">\r\n                        <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                    </ng-container>\r\n                </colgroup>\r\n                <thead class=\"farris-treetable-thead\" [class.header-wrap]=\"headerWrap\">\r\n                    <ng-container *ngIf=\"!headerTemplate\">\r\n                        <tr *ngIf=\"!useGroupHeader; else groupHeader\">\r\n                            <ng-container *ngTemplateOutlet=\"headerCells; context: {$implicit: columns, firstRow: true}\"></ng-container>\r\n                        </tr>\r\n                        <tr *ngIf=\"enableFilterRow\">\r\n                            <th *ngFor=\"let col of columns\">\r\n                                <input autocomplete=\"off\" type=\"text\" class=\"form-control\" name=\"{{ col.field }}\" (input)=\"onFilterRowInput($event, col)\" />\r\n                            </th>\r\n                        </tr>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"headerTemplate\">\r\n                        <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n                    </ng-container>\r\n                </thead>\r\n            </table>\r\n            <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n            <find-input *ngIf=\"showFindInput\" [columns]=\"columns\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n                (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\" (enterHandler)=\"nextFindValue($event)\">\r\n            </find-input>\r\n\r\n        </div>\r\n\r\n        <div class=\"farris-treetable-body\">\r\n            <perfect-scrollbar #perfectScrollbar [config]=\"{minScrollbarLength: 15}\" (psScrollX)=\"onScrollX($event)\"\r\n                (psScrollY)=\"onScrollY($event)\" [style.height.px]=\"scorllBodyHeight\">\r\n                <div *ngIf=\"topHideHeight && virtualized\" [style.height.px]=\"topHideHeight\"> </div>\r\n                <table #bodyTable class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n                    [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n                    'h-100': (!serializedValue || !serializedValue.length) }\">\r\n                    <colgroup>\r\n                        <ng-container *ngFor=\"let col of columns\">\r\n                            <col *ngIf=\"columnIsVisible(col)\" [style.width]=\"getRealColWidth(col)\" />\r\n                        </ng-container>\r\n                    </colgroup>\r\n\r\n                    <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n                        <tbody class=\"farris-treetable-tbody\">\r\n                            <tr class=\"f-table-norecords-row\">\r\n                                <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                                    <div class=\"f-table-norecords-content\" >\r\n                                        {{ 'treetable.emptyMessage' | locale }}\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </ng-container>\r\n\r\n                    <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n                        <ng-container *ngIf=\"bodyTemplate\">\r\n                            <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\"></tbody>\r\n                        </ng-container>\r\n\r\n                        <ng-container #defaultBodyTemplate *ngIf=\"!bodyTemplate\">\r\n                            <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </table>\r\n                <div *ngIf=\"bottomHideHeight && virtualized\" [style.height.px]=\"bottomHideHeight\"> </div>\r\n            </perfect-scrollbar>\r\n        </div>\r\n\r\n        <!-- \u5206\u9875\u6761 -->\r\n        <div *ngIf=\"pagination\" #tablePager class=\"farris-table-pager\" [ngStyle]=\" { 'opacity': (disabled ? 0.6 : 1), 'pointer-events': (disabled? 'none': '')  }\">\r\n            <pagination-controls #pager [id]=\"paginationOptions?.id\"\r\n                [maxSize]=\"pagerLabelSize\" [directionLinks]=\"true\"\r\n                [autoHide]=\"false\" [responsive]=\"true\"\r\n                [previousLabel]=\"' '\" [nextLabel]=\"' '\"\r\n                [showPageInfo]=\"showPageInfo\" [showPageNumber]=\"showPageNumber\" [showPageList]=\"showPageList\"\r\n                (pageChange)=\"onPageChange($event)\" [showGotoInput]=\"showGotoInput\"\r\n                (pageSizeChange)=\"onPageSizeChange($event)\"\r\n                >\r\n\r\n                \r\n            </pagination-controls>\r\n        </div>\r\n\r\n        <div #resizerHelper class=\"column-resizer-helper\" *ngIf=\"resizableColumns\"></div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #nodespagerbar let-ctx>\r\n    <nodes-pager [context]=\"ctx\" [disabled]=\"disabled\" (pageChange)=\"onChildsPageChanged($event)\" [showTotal]=\"showTotalForChildren\"></nodes-pager>\r\n</ng-template>\r\n\r\n\r\n\r\n<div class=\"farris-treetable\" [class.table-bordered]=\"showBorder\" [attr.id]=\"id\"\r\n    [class.farris-treetable-showlines]=\"showLinesOnHover && showLines\" \r\n    [class.farris-treetable-nowrap]=\"!nowrap\"  *ngIf=\"!fixedHeader; else scorllview\">\r\n    <table class=\"table\" [style.tableLayout]=\"autoWidth? 'auto': 'fixed'\"\r\n        [ngClass]=\"{'table-striped': striped, 'table-hover': (hovered && serializedValue && serializedValue.length), 'f-table-norecords': (!serializedValue || !serializedValue.length),\r\n        'h-100': (!serializedValue || !serializedValue.length) }\">\r\n        <thead class=\"farris-treetable-thead\" *ngIf=\"showHeader\" [class.header-wrap]=\"headerWrap\">\r\n            <ng-container *ngIf=\"!headerTemplate && columns\">\r\n                <th *ngFor=\"let col of columns;let isFirst=first\" [style.textAlign]=\"col!.hAlign || 'left'\" class=\"treetable-header-cell\" [attr.field]=\"col.field\">\r\n                    <div class=\"d-flex\">\r\n                        <ng-container *ngIf=\"!singleSelect && showCheckAll && isFirst && showCheckbox\">\r\n                            <tt-header-checkbox #allCheckbox class=\"f-cmp-treetable-toggler\"></tt-header-checkbox>\r\n                        </ng-container>\r\n\r\n                        <ng-container *ngIf=\"!col.headTemplate && !col.headComponentType\">\r\n                            <div class=\"flex-grow-1 text\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\">{{col.title}}</div>\r\n                        </ng-container>\r\n        \r\n                        <ng-container *ngIf=\"col.headTemplate && !col.headComponentType\"\r\n                            [ngTemplateOutlet]=\"col.headTemplate\"\r\n                            [ngTemplateOutletContext]=\"{$implicit: { column: col}}\">\r\n                        </ng-container>\r\n                        <div class=\"flex-grow-1 text\" *ngIf=\"col.headerComponentType\" [component-template]=\"col\" [templateType]=\"'head'\" [ctx]=\" { column: col}\" [style.whiteSpace]=\"headerWrap ? 'pre-wrap': ''\"></div>\r\n                    </div>\r\n                </th>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"headerTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"headerTemplate; context: {$implicit: columns}\"></ng-container>\r\n            </ng-container>\r\n        </thead>\r\n        <ng-container *ngIf=\"serializedValue && serializedValue.length\">\r\n             <!-- \u5BA2\u6237\u7AEF\u67E5\u8BE2\u5B9A\u4F4D\u5DE5\u5177\u6761 -->\r\n             <find-input *ngIf=\"showFindInput\" [current]=\"findCurrent\" [count]=\"findCount\"\r\n             (valueChanged)=\"findKeyWords($event)\" (close)=\"closeFindPanel()\"  [columns]=\"columns\"\r\n             (enterHandler)=\"nextFindValue($event)\"></find-input>\r\n            <ng-container *ngIf=\"bodyTemplate\">\r\n                <tbody class=\"farris-treetable-tbody\" treeTableBody [columns]=\"columns\" [template]=\"bodyTemplate\">\r\n                </tbody>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!bodyTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"tbody\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!serializedValue || !serializedValue.length\">\r\n            <tbody class=\"farris-treetable-tbody\">\r\n                <tr class=\"f-table-norecords-row\" style=\"height: 200px\">\r\n                    <td [attr.align]=\"'center'\" class=\"farris-treetable-emptydata\" [attr.colspan]=\"columns.length\">\r\n                        <div class=\"f-table-norecords-content\" >\r\n                            {{ 'treetable.emptyMessage' | locale }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </ng-container>\r\n    </table>\r\n</div>\r\n\r\n",
                    exportAs: 'treeTable',
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["\n        .farris-treetable {\n            position: relative;\n        }\n        .resizable-column {\n            background-clip: padding-box;\n            position: relative;\n        }\n        .column-resizer {\n            display: block;\n            position: absolute!important;\n            top: 0;\n            right: 0;\n            margin: 0;\n            width: .5em;\n            height: 100%;\n            padding: 0;\n            cursor: col-resize;\n            border: 1px solid transparent;\n        }\n        .column-resizer-helper {\n            width: 1px;\n            position: absolute;\n            z-index: 10;\n            display: none;\n            border-right: 1px dashed #1890ff;\n        }\n\n        .farris-treetable-disabled .farris-treetable-body .table tr{\n            opacity: 0.4;\n            cursor: not-allowed;\n        }\n        .farris-treetable-disabled .table tr.farris-table-selectedrow{\n            opacity: 1;\n            cursor: default;\n        }\n\n        .custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after {\n            background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\");\n            background-color: #1890ff;\n        }\n        .unselectable-text {\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -o-user-select: none;\n            -ms-user-select: none;\n            user-select: none\n        }\n        .search-highlight {\n            background-color: #FFFF1F;\n        }\n        .search-highlight.active{\n            background-color: #FF901C;\n        }\n\n        .f-treetable--fixed-columns .ps__rail-x, .f-treetable--fixed-columns .ps__rail-y {\n            z-index: 18;\n        }\n    "]
                }] }
    ];
    /** @nocollapse */
    TreeTableComponent.ctorParameters = function () { return [
        { type: TreetableService },
        { type: ElementRef },
        { type: ResizeService },
        { type: Renderer2 },
        { type: CommonUtils },
        { type: ColumnFormatService },
        { type: TTHotkeys },
        { type: ChangeDetectorRef },
        { type: NgZone },
        { type: Injector }
    ]; };
    TreeTableComponent.propDecorators = {
        width: [{ type: Input }],
        height: [{ type: Input }],
        showFilterBar: [{ type: Input }],
        enableFilterRow: [{ type: Input }],
        showSearchField: [{ type: Input }],
        headerHeight: [{ type: Input }],
        headerWrap: [{ type: Input }],
        rowHeight: [{ type: Input }],
        columns: [{ type: Input }],
        groupColumns: [{ type: Input }],
        useGroupHeader: [{ type: Input }],
        fitColumns: [{ type: Input }],
        autoFitColumns: [{ type: Input }],
        searchFields: [{ type: Input }],
        allColumnsTitle: [{ type: Input }],
        searchAnyField: [{ type: Input }],
        showLines: [{ type: Input }],
        showLinesOnHover: [{ type: Input }],
        multiSelect: [{ type: Input }],
        singleSelect: [{ type: Input }],
        showCheckbox: [{ type: Input }],
        idField: [{ type: Input }],
        showBorder: [{ type: Input }],
        showCheckAll: [{ type: Input }],
        showHeader: [{ type: Input }],
        striped: [{ type: Input }],
        hovered: [{ type: Input }],
        disabled: [{ type: Input }],
        disabledRow: [{ type: Input }],
        loadDataType: [{ type: Input }],
        fixedHeader: [{ type: Input }],
        checkOnSelect: [{ type: Input }],
        selectOnCheck: [{ type: Input }],
        onlySelectSelf: [{ type: Input }],
        resizableColumns: [{ type: Input }],
        fit: [{ type: Input }],
        cascadeCheck: [{ type: Input }],
        cascadeDown: [{ type: Input }],
        cascadeUp: [{ type: Input }],
        emptyMessage: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        keepSelect: [{ type: Input }],
        virtualized: [{ type: Input }],
        onlySelectLeaf: [{ type: Input }],
        showIcon: [{ type: Input }],
        leafIcon: [{ type: Input }],
        expandIcon: [{ type: Input }],
        collapseIcon: [{ type: Input }],
        foldIcon: [{ type: Input }],
        unfoldIcon: [{ type: Input }],
        useIconFromData: [{ type: Input }],
        whenDataIconEmptyUseDefault: [{ type: Input }],
        iconField: [{ type: Input }],
        iconCls: [{ type: Input }],
        remoteSort: [{ type: Input }],
        sortName: [{ type: Input }],
        sortOrder: [{ type: Input }],
        multiSort: [{ type: Input }],
        beforeSortColumn: [{ type: Input }],
        rowStyler: [{ type: Input }],
        cellStyler: [{ type: Input }],
        enableFindText: [{ type: Input }],
        findField: [{ type: Input }],
        expandLevel: [{ type: Input }],
        selectValue: [{ type: Input }],
        selectValueChange: [{ type: Output }],
        dblClickExpand: [{ type: Input }],
        useDblClick: [{ type: Input }],
        selectValues: [{ type: Input }],
        selectValuesChange: [{ type: Output }],
        nowrap: [{ type: Input }],
        checkValues: [{ type: Input }],
        checkValuesChange: [{ type: Output }],
        beforeNodeSelected: [{ type: Input }],
        beforeNodeUnSelected: [{ type: Input }],
        beforeNodeChecked: [{ type: Input }],
        beforeNodeUnChecked: [{ type: Input }],
        beforeCheckAll: [{ type: Input }],
        beforeUnCheckAll: [{ type: Input }],
        beforeClickNode: [{ type: Input }],
        pagination: [{ type: Input }],
        paginationForChildren: [{ type: Input }],
        pagerViewMode: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        pageList: [{ type: Input }],
        pageIndex: [{ type: Input }],
        pageSize: [{ type: Input }],
        pagerHeight: [{ type: Input }],
        showPageList: [{ type: Input }],
        showPageInfo: [{ type: Input }],
        showPageNumber: [{ type: Input }],
        pagerLabelSize: [{ type: Input }],
        showGotoInput: [{ type: Input }],
        showTotalForChildren: [{ type: Input }],
        total: [{ type: Input }],
        enableContextMenu: [{ type: Input }],
        contextMenuItems: [{ type: Input }],
        beforeShowContextMenu: [{ type: Input }],
        pageSizeChanged: [{ type: Output }],
        pageChanged: [{ type: Output }],
        columnSorted: [{ type: Output }],
        nodeSelected: [{ type: Output }],
        nodeUnSelect: [{ type: Output }],
        nodeChecked: [{ type: Output }],
        nodeUnChecked: [{ type: Output }],
        checkAll: [{ type: Output }],
        unCheckAll: [{ type: Output }],
        search: [{ type: Output }],
        dblClick: [{ type: Output }],
        loadedData: [{ type: Output }],
        expand: [{ type: Output }],
        collapse: [{ type: Output }],
        expandAllNodes: [{ type: Output }],
        collapseAllNodes: [{ type: Output }],
        appendNew: [{ type: Output }],
        removed: [{ type: Output }],
        updated: [{ type: Output }],
        clearSearchValue: [{ type: Output }],
        cellClick: [{ type: Output }],
        childsPageChanged: [{ type: Output }],
        searchValueChange: [{ type: Output }],
        loadedTimer: [{ type: Input }],
        data: [{ type: Input }],
        autoWidth: [{ type: Input }],
        templates: [{ type: ContentChildren, args: [FarrisTemplateDirective,] }],
        columnsRef: [{ type: ContentChildren, args: [TreeTableColumnDirective,] }],
        headerBox: [{ type: ViewChild, args: ['headerBox',] }],
        resizerHelperVC: [{ type: ViewChild, args: ['resizerHelper',] }],
        headerTable: [{ type: ViewChild, args: ['headerTable',] }],
        bodyTable: [{ type: ViewChild, args: ['bodyTable',] }],
        inputGroup: [{ type: ViewChild, args: ['inputGroup',] }],
        psRef: [{ type: ViewChild, args: [PerfectScrollbarComponent,] }],
        allCheckbox: [{ type: ViewChild, args: ['allCheckbox',] }],
        nodesPagerBar: [{ type: ViewChild, args: ['nodespagerbar',] }],
        ctxMenu: [{ type: ViewChild, args: [FarrisContextMenuDirective,] }],
        onResized: [{ type: HostListener, args: ['window:resize',] }]
    };
    return TreeTableComponent;
}());
export { TreeTableComponent };
if (false) {
    /** @type {?} */
    TreeTableComponent.prototype.id;
    /**
     * 宽度
     * @type {?}
     */
    TreeTableComponent.prototype.width;
    /**
     * 高度
     * @type {?}
     */
    TreeTableComponent.prototype.height;
    /** @type {?} */
    TreeTableComponent.prototype.showFilterBar;
    /**
     * 显示过滤行
     * @type {?}
     */
    TreeTableComponent.prototype.enableFilterRow;
    /**
     * 显示查询字段
     * @type {?}
     */
    TreeTableComponent.prototype.showSearchField;
    /** @type {?} */
    TreeTableComponent.prototype.headerHeight;
    /**
     * 表头折行
     * @type {?}
     */
    TreeTableComponent.prototype.headerWrap;
    /**
     * 行高
     * @type {?}
     */
    TreeTableComponent.prototype.rowHeight;
    /**
     * 列信息
     * @type {?}
     */
    TreeTableComponent.prototype.columns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._groupColumns;
    /**
     * 启用多表头
     * @type {?}
     */
    TreeTableComponent.prototype.useGroupHeader;
    /** @type {?} */
    TreeTableComponent.prototype.fitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.autoFitColumns;
    /** @type {?} */
    TreeTableComponent.prototype.searchFields;
    /** @type {?} */
    TreeTableComponent.prototype.allColumnsTitle;
    /** @type {?} */
    TreeTableComponent.prototype.searchAnyField;
    /**
     * 显示连接线，默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.showLines;
    /** @type {?} */
    TreeTableComponent.prototype.showLinesOnHover;
    /**
     * 是否启用多选。 默认为单选
     * @type {?}
     */
    TreeTableComponent.prototype.multiSelect;
    /** @type {?} */
    TreeTableComponent.prototype.singleSelect;
    /**
     * 启用多选后，是否显示checkbox
     * @type {?}
     */
    TreeTableComponent.prototype.showCheckbox;
    /**
     * 主键字段
     * @type {?}
     */
    TreeTableComponent.prototype.idField;
    /**
     * 显示边框线
     * @type {?}
     */
    TreeTableComponent.prototype.showBorder;
    /** @type {?} */
    TreeTableComponent.prototype.showCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.showHeader;
    /**
     * 启用斑马线
     * @type {?}
     */
    TreeTableComponent.prototype.striped;
    /**
     * 启用鼠标划过效果
     * @type {?}
     */
    TreeTableComponent.prototype.hovered;
    /**
     * 禁用。 禁用时不允许选中行
     * @type {?}
     */
    TreeTableComponent.prototype.disabled;
    /**
     * 禁卡节点选中
     * @type {?}
     */
    TreeTableComponent.prototype.disabledRow;
    /**
     * 数据加载方式; 默认值 为 all
     * - all: 全部加载
     * - async: 分层加载
     * @type {?}
     */
    TreeTableComponent.prototype.loadDataType;
    /**
     * 固定表头
     * @type {?}
     */
    TreeTableComponent.prototype.fixedHeader;
    /**
     * 当多选时，选中当前行并钩选
     * @type {?}
     */
    TreeTableComponent.prototype.checkOnSelect;
    /**
     * 当多选时，钩选并选中当前行
     * @type {?}
     */
    TreeTableComponent.prototype.selectOnCheck;
    /**
     * 启用多选时，此属性为true 时，仅当前行选中
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectSelf;
    /**
     * 启用列宽调整
     * @type {?}
     */
    TreeTableComponent.prototype.resizableColumns;
    /**
     * 设置为true时自适应父容的尺寸
     * @type {?}
     */
    TreeTableComponent.prototype.fit;
    /**
     * 启用级联选中功能
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeCheck;
    /**
     * 向下级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeDown;
    /**
     * 向上级联选中
     * @type {?}
     */
    TreeTableComponent.prototype.cascadeUp;
    /**
     * 空数据时，显示的提示文本
     * @type {?}
     */
    TreeTableComponent.prototype.emptyMessage;
    /**
     * 缩进间距，默认为 16px
     * @type {?}
     */
    TreeTableComponent.prototype.indentSpacing;
    /**
     * 单击行选中后，在次点击不会被取消选中状态;
     * @type {?}
     */
    TreeTableComponent.prototype.keepSelect;
    /**
     * 虚拟加载
     * @type {?}
     */
    TreeTableComponent.prototype.virtualized;
    /**
     * 仅允许选择叶子节点
     * - default: 应用服务器端传回的设置，如果服务器端没有设置，则与 no 保持一至；
     * - yes: 如果客户端设置为 `yes`, 服务器端的设置失效；
     * - no: 允许选择所有节点；服务器端设置失效
     * @type {?}
     */
    TreeTableComponent.prototype.onlySelectLeaf;
    /**
     * 显示图标
     * @type {?}
     */
    TreeTableComponent.prototype.showIcon;
    /**
     * 叶子节点图标
     * @type {?}
     */
    TreeTableComponent.prototype.leafIcon;
    /**
     * 节点展开图标
     * @type {?}
     */
    TreeTableComponent.prototype.expandIcon;
    /**
     * 节点折叠图标
     * @type {?}
     */
    TreeTableComponent.prototype.collapseIcon;
    /** @type {?} */
    TreeTableComponent.prototype.foldIcon;
    /** @type {?} */
    TreeTableComponent.prototype.unfoldIcon;
    /**
     * 启用节点图标从数据中获取。 默认为 false
     * @type {?}
     */
    TreeTableComponent.prototype.useIconFromData;
    /**
     * 当数据源中icon未设置时使用内置ICON. 默认为 true
     * @type {?}
     */
    TreeTableComponent.prototype.whenDataIconEmptyUseDefault;
    /**
     * 从数据源字段中获取图标
     * @type {?}
     */
    TreeTableComponent.prototype.iconField;
    /**
     * 图标自定义样式
     * @type {?}
     */
    TreeTableComponent.prototype.iconCls;
    /**
     * 启用远端排序
     * @type {?}
     */
    TreeTableComponent.prototype.remoteSort;
    /**
     * 排序字段
     * @type {?}
     */
    TreeTableComponent.prototype.sortName;
    /**
     * 排序方式 asc | desc
     * @type {?}
     */
    TreeTableComponent.prototype.sortOrder;
    /**
     * 允许多列排序
     * @type {?}
     */
    TreeTableComponent.prototype.multiSort;
    /** @type {?} */
    TreeTableComponent.prototype.beforeSortColumn;
    /** @type {?} */
    TreeTableComponent.prototype.rowStyler;
    /** @type {?} */
    TreeTableComponent.prototype.cellStyler;
    /**
     * 启用前端文本查找
     * @type {?}
     */
    TreeTableComponent.prototype.enableFindText;
    /**
     * 文本查询字段, 弃用
     * @type {?}
     */
    TreeTableComponent.prototype.findField;
    /** @type {?} */
    TreeTableComponent.prototype.expandLevel;
    /** @type {?} */
    TreeTableComponent.prototype.selectValue;
    /** @type {?} */
    TreeTableComponent.prototype.selectValueChange;
    /**
     * 启用双击展开节点
     * @type {?}
     */
    TreeTableComponent.prototype.dblClickExpand;
    /** @type {?} */
    TreeTableComponent.prototype.useDblClick;
    /**
     * 选中节点ID数组
     * @type {?}
     */
    TreeTableComponent.prototype.selectValues;
    /** @type {?} */
    TreeTableComponent.prototype.selectValuesChange;
    /**
     * 是否禁止折行，默认不折行
     * @type {?}
     */
    TreeTableComponent.prototype.nowrap;
    /** @type {?} */
    TreeTableComponent.prototype.checkValues;
    /** @type {?} */
    TreeTableComponent.prototype.checkValuesChange;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnSelected;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeNodeUnChecked;
    /** @type {?} */
    TreeTableComponent.prototype.beforeCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeUnCheckAll;
    /** @type {?} */
    TreeTableComponent.prototype.beforeClickNode;
    /**
     * 分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.pagination;
    /**
     * 分页加载子节点数据
     * @type {?}
     */
    TreeTableComponent.prototype.paginationForChildren;
    /**
     * 分页条显示模式， default, simple
     * @type {?}
     */
    TreeTableComponent.prototype.pagerViewMode;
    /**
     * 启用服务器端分页
     * @type {?}
     */
    TreeTableComponent.prototype.pagerOnServer;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageList;
    /**
     * 当前页码
     * @type {?}
     */
    TreeTableComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.pageSize;
    /**
     * 分页区高度
     * @type {?}
     */
    TreeTableComponent.prototype.pagerHeight;
    /**
     * 显示每页记录数
     * @type {?}
     */
    TreeTableComponent.prototype.showPageList;
    /**
     * 显示分页信息
     * @type {?}
     */
    TreeTableComponent.prototype.showPageInfo;
    /**
     * 显示页码
     * @type {?}
     */
    TreeTableComponent.prototype.showPageNumber;
    /**
     * 显示页码最大数量
     * @type {?}
     */
    TreeTableComponent.prototype.pagerLabelSize;
    /**
     * 显示页码输入框
     * @type {?}
     */
    TreeTableComponent.prototype.showGotoInput;
    /**
     * 子节点分页是否显示总记录数，默认 false
     * @type {?}
     */
    TreeTableComponent.prototype.showTotalForChildren;
    /**
     * 总记录数
     * @type {?}
     */
    TreeTableComponent.prototype.total;
    /** @type {?} */
    TreeTableComponent.prototype.enableContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.contextMenuItems;
    /** @type {?} */
    TreeTableComponent.prototype.beforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.pageSizeChanged;
    /** @type {?} */
    TreeTableComponent.prototype.pageChanged;
    /**
     * 排序后
     * @type {?}
     */
    TreeTableComponent.prototype.columnSorted;
    /**
     * 选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeSelected;
    /**
     * 取消选中事件
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnSelect;
    /**
     * 钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeChecked;
    /**
     * 取消钩选
     * @type {?}
     */
    TreeTableComponent.prototype.nodeUnChecked;
    /**
     * 全选事件
     * @type {?}
     */
    TreeTableComponent.prototype.checkAll;
    /**
     * 取消全选
     * @type {?}
     */
    TreeTableComponent.prototype.unCheckAll;
    /**
     * 查询
     * @type {?}
     */
    TreeTableComponent.prototype.search;
    /** @type {?} */
    TreeTableComponent.prototype.dblClick;
    /** @type {?} */
    TreeTableComponent.prototype.loadedData;
    /** @type {?} */
    TreeTableComponent.prototype.expand;
    /** @type {?} */
    TreeTableComponent.prototype.collapse;
    /** @type {?} */
    TreeTableComponent.prototype.expandAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.collapseAllNodes;
    /** @type {?} */
    TreeTableComponent.prototype.appendNew;
    /** @type {?} */
    TreeTableComponent.prototype.removed;
    /** @type {?} */
    TreeTableComponent.prototype.updated;
    /** @type {?} */
    TreeTableComponent.prototype.clearSearchValue;
    /** @type {?} */
    TreeTableComponent.prototype.cellClick;
    /** @type {?} */
    TreeTableComponent.prototype.childsPageChanged;
    /** @type {?} */
    TreeTableComponent.prototype.searchValueChange;
    /** @type {?} */
    TreeTableComponent.prototype.loadedTimer;
    /** @type {?} */
    TreeTableComponent.prototype.serializedValue;
    /** @type {?} */
    TreeTableComponent.prototype._data;
    /** @type {?} */
    TreeTableComponent.prototype.isLoadNewDataSetEmpty;
    /**
     * 根据内容自动宽度，默认 false;
     * 此属性开启后，自动列宽失效
     * @type {?}
     */
    TreeTableComponent.prototype.autoWidth;
    /** @type {?} */
    TreeTableComponent.prototype.templates;
    /** @type {?} */
    TreeTableComponent.prototype.columnsRef;
    /** @type {?} */
    TreeTableComponent.prototype.headerBox;
    /** @type {?} */
    TreeTableComponent.prototype.resizerHelperVC;
    /** @type {?} */
    TreeTableComponent.prototype.headerTable;
    /** @type {?} */
    TreeTableComponent.prototype.bodyTable;
    /** @type {?} */
    TreeTableComponent.prototype.inputGroup;
    /** @type {?} */
    TreeTableComponent.prototype.psRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.headerCheckboxCmp;
    /** @type {?} */
    TreeTableComponent.prototype.nodesPagerBar;
    /** @type {?} */
    TreeTableComponent.prototype.ctxMenu;
    /**
     * 表头模板
     * @type {?}
     */
    TreeTableComponent.prototype.headerTemplate;
    /**
     * 表体模板
     * @type {?}
     */
    TreeTableComponent.prototype.bodyTemplate;
    /**
     * 选中项集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selections;
    /**
     * 选中项索引
     * @type {?}
     */
    TreeTableComponent.prototype.selectRowIndex;
    /**
     * 选中当前行
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._selectedRow;
    /**
     * 钩选的记录集合
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._checkeds;
    /** @type {?} */
    TreeTableComponent.prototype.containerElement;
    /** @type {?} */
    TreeTableComponent.prototype.lastResizerHelperX;
    /** @type {?} */
    TreeTableComponent.prototype.searchData;
    /** @type {?} */
    TreeTableComponent.prototype.scorllBodyHeight;
    /** @type {?} */
    TreeTableComponent.prototype.searchHandle;
    /** @type {?} */
    TreeTableComponent.prototype.searchButtonText;
    /**
     * 显示查询工具条
     * @type {?}
     */
    TreeTableComponent.prototype.showFindInput;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.isDataChanged;
    /** @type {?} */
    TreeTableComponent.prototype.scrollLoader;
    /** @type {?} */
    TreeTableComponent.prototype.topHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.bottomHideHeight;
    /** @type {?} */
    TreeTableComponent.prototype.state;
    /**
     * 待查询的文本
     * @type {?}
     */
    TreeTableComponent.prototype.findValue;
    /**
     * 结果总数
     * @type {?}
     */
    TreeTableComponent.prototype.findCount;
    /**
     * 当前索引
     * @type {?}
     */
    TreeTableComponent.prototype.findCurrent;
    /**
     * 存储文本查询结果
     * @type {?}
     */
    TreeTableComponent.prototype.findResult;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ro;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.findKeysHandler;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._hotKeys;
    /** @type {?} */
    TreeTableComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.idService;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleSheetId;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.styleElement;
    /** @type {?} */
    TreeTableComponent.prototype.fast;
    /** @type {?} */
    TreeTableComponent.prototype.paginationOptions;
    /** @type {?} */
    TreeTableComponent.prototype.selectNodeChangedSubject;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype._UUID;
    /** @type {?} */
    TreeTableComponent.prototype.fixedColumns;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.farrisInstances;
    /** @type {?} */
    TreeTableComponent.prototype.difference;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.debugSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.filterRowConditions;
    /** @type {?} */
    TreeTableComponent.prototype.onBeforeShowContextMenu;
    /** @type {?} */
    TreeTableComponent.prototype.ttService;
    /** @type {?} */
    TreeTableComponent.prototype.el;
    /** @type {?} */
    TreeTableComponent.prototype.resizeSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.renderer;
    /** @type {?} */
    TreeTableComponent.prototype.utils;
    /** @type {?} */
    TreeTableComponent.prototype.colFormatSer;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.shortcuts;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TreeTableComponent.prototype.injector;
}
var TTBodyComponent = /** @class */ (function () {
    function TTBodyComponent(tt) {
        this.tt = tt;
    }
    TTBodyComponent.decorators = [
        { type: Component, args: [{
                    selector: '[treeTableBody]',
                    template: "\n        <ng-template ngFor let-serializedNode let-rowIndex=\"index\" [ngForOf]=\"tt.serializedValue\">\n            <ng-container *ngIf=\"serializedNode.visible\">\n                <ng-container\n                    *ngTemplateOutlet=\"template;\n                        context: {$implicit: serializedNode, node: serializedNode.node,\n                        rowData: serializedNode.node.data, rowIndex: rowIndex, columns: columns}\">\n                </ng-container>\n            </ng-container>\n        </ng-template>\n    "
                }] }
    ];
    /** @nocollapse */
    TTBodyComponent.ctorParameters = function () { return [
        { type: TreeTableComponent }
    ]; };
    TTBodyComponent.propDecorators = {
        columns: [{ type: Input }],
        template: [{ type: Input }]
    };
    return TTBodyComponent;
}());
export { TTBodyComponent };
if (false) {
    /**
     * 列集合
     * @type {?}
     */
    TTBodyComponent.prototype.columns;
    /**
     * 表体模板
     * @type {?}
     */
    TTBodyComponent.prototype.template;
    /** @type {?} */
    TTBodyComponent.prototype.tt;
}
// [style.marginLeft]="rowNode.level * 16 + 'px'"
/**
 * 树节点展开折叠
 */
var TreeTableTogglerComponent = /** @class */ (function () {
    function TreeTableTogglerComponent(tt, ngzone, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.render = render;
        this.cls = true;
        this.showLines = false;
        this.indentSpacing = 16;
        this.treeNodeIcon = {};
        this.isShowTriangle = false;
        this.noChilds = false;
        this.subscriptions = [];
    }
    Object.defineProperty(TreeTableTogglerComponent.prototype, "offsetWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this.togglerEl.nativeElement.parentElement.offsetWidth;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.treeNodeIcon = this.tt.getTreeIcon(this.rowNode.node);
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        /** @type {?} */
        var expandSub = this.tt.expand.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                _this.updateIcon(_this.rowNode.node);
                if (_this.tt.psRef) {
                    _this.tt.psRef.directiveRef.update();
                }
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var collapseSub = this.tt.collapse.subscribe((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (_this.rowNode.id === node.data[_this.tt.idField]) {
                _this.updateIcon(_this.rowNode.node);
                if (_this.tt.psRef) {
                    _this.tt.psRef.directiveRef.update();
                }
                _this.tt.detectChanges();
            }
        }));
        /** @type {?} */
        var addNewSub = this.tt.appendNew.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (e.parent) {
                if (_this.rowNode.id === e.parent.data[_this.tt.idField]) {
                    if (_this.rowNode.node.leaf || _this.rowNode.node.leaf === undefined) {
                        _this.rowNode.node.leaf = false;
                    }
                }
                _this.updateIcon(_this.rowNode.node);
            }
        }));
        this.subscriptions = [expandSub, collapseSub, addNewSub];
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.showLines && !changes.showLines.isFirstChange()) {
            if (this.showLines) {
                this.render.setStyle(this.togglerEl.nativeElement, 'display', this.isShowTriangle ? '' : 'none');
            }
            else {
                this.render.removeStyle(this.togglerEl.nativeElement, 'display');
            }
            this.reSetLines();
        }
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.updateIcon(this.rowNode.node);
            // if (changes.rowNode.currentValue.node.children) {
            //     if (!!changes.rowNode.currentValue.node.children.length !== !!changes.rowNode.previousValue.node.children.length) {
            //         this.reSetLines();
            //     }
            // }
            if (this.tt.showLines) {
                /** @type {?} */
                var currenChildrenLength = 0;
                /** @type {?} */
                var previousChildrenLength = 0;
                if (changes.rowNode.currentValue && changes.rowNode.currentValue.node.children) {
                    currenChildrenLength = changes.rowNode.currentValue.node.children.length;
                }
                if (changes.rowNode.previousValue && changes.rowNode.previousValue.node.children) {
                    previousChildrenLength = changes.rowNode.previousValue.node.children.length;
                }
                if (currenChildrenLength != previousChildrenLength || (!currenChildrenLength && !previousChildrenLength)) {
                    this.reSetLines();
                }
            }
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate && this.showLines) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.reSetLines();
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        // this.isShowTriangle = this.showTriangle();
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        // if (this.tt && this.tt.data) {
        //     this.reSetLines();
        // }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.unAllSubscriptions();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.unAllSubscriptions = /**
     * @private
     * @return {?}
     */
    function () {
        this.subscriptions.forEach((/**
         * @param {?} s
         * @return {?}
         */
        function (s) {
            s.unsubscribe();
        }));
        this.subscriptions = [];
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.hasChildren = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        return tn.leaf === false || this.rowNode.level !== 0 || (tn.children && tn.children.length > 0);
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.showTriangle = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tn = this.rowNode.node;
        if (this.tt.loadDataType === 'all') {
            return tn.leaf === false || (tn.children && tn.children.length > 0);
        }
        else {
            return tn.leaf === false;
        }
    };
    /**
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.reSetLines = /**
     * @return {?}
     */
    function () {
        if (this.togglerEl) {
            /** @type {?} */
            var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
            if (parentEl) {
                /** @type {?} */
                var lineEls = parentEl.querySelectorAll('.treetable-lines');
                for (var k = 0; k < lineEls.length; k++) {
                    lineEls[k].remove();
                }
            }
        }
        this._renderLines();
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype._renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.tt.bodyTemplate) {
            if (this.showLines) {
                this.renderLines();
            }
            else {
                // this.noLineStyle();
            }
        }
        else {
            /*
            if (this.togglerEl) {
                if (this.togglerEl.nativeElement.closest('tr')) {
                    const tds = this.togglerEl.nativeElement.closest('tr').querySelectorAll('td');
                    Array.from(tds).forEach(n => {
                        this.render.setStyle(n, 'padding', '0.25rem 0.75rem');
                    });
                }
            } */
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.noLineStyle = /**
     * @private
     * @return {?}
     */
    function () {
        // this.cls = false;
        if (this.togglerEl) {
            // this.render.setStyle(this.togglerEl.nativeElement, 'margin-left', `${this.rowNode.level * this.indentSpacing}px`);
            this.render.setStyle(this.togglerEl.nativeElement, 'visibility', this.isShowTriangle ? 'visible' : 'hidden');
            this.render.removeStyle(this.togglerEl.nativeElement, 'display');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.renderLines = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var len = this.rowNode.level;
        if (!this.togglerEl) {
            return;
        }
        /** @type {?} */
        var parentEl = this.togglerEl.nativeElement.closest('.treetable-cell-content');
        if (!parentEl) {
            return;
        }
        /** @type {?} */
        var referEl = this.togglerEl.nativeElement.parentElement;
        if (len === 0 && !this.showTriangle()) {
            this.createLeafNodeLines(referEl, parentEl, true);
        }
        for (var i = 0; i < len; i++) {
            parentEl.insertBefore(this.newLineElement(), referEl);
            /** @type {?} */
            var nearLine = this.newLineElement(false);
            parentEl.insertBefore(nearLine, referEl);
            /** @type {?} */
            var isLeaf = !this.showTriangle();
            if (isLeaf && i === len - 1) {
                this.createLeafNodeLines(referEl, parentEl);
            }
        }
    };
    /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.newLineElement = /**
     * @private
     * @param {?=} border
     * @return {?}
     */
    function (border) {
        if (border === void 0) { border = true; }
        /** @type {?} */
        var newLineEl = this.render.createElement('div');
        this.render.addClass(newLineEl, 'treetable-lines');
        if (this.showLines) {
            if (border) {
                this.render.addClass(newLineEl, 'treetable-lines-border-color');
            }
        }
        return newLineEl;
    };
    /**
     * 构造 ∟ or ├
     */
    /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.createLeafNodeLines = /**
     * 构造 ∟ or ├
     * @private
     * @param {?} containerEl
     * @param {?} parentEl
     * @param {?=} isTopNode
     * @return {?}
     */
    function (containerEl, parentEl, isTopNode) {
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        if (isTopNode === void 0) { isTopNode = false; }
        // ├
        // <div class="treetable-lines" style="border-color: rgb(204, 204, 204);"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div class="normal"></div>
        // </div>
        // ∟
        // <div class="treetable-lines" style="border-color: transparent"></div>
        // <div class="treetable-lines treetable-lines-leaf" style="border-color: transparent;">
        //     <div style="corner"></div>
        // </div>
        /** @type {?} */
        var l1 = this.newLineElement();
        /** @type {?} */
        var l2 = this.newLineElement(false);
        this.render.addClass(l2, 'treetable-lines-leaf');
        /** @type {?} */
        var dessert = this.render.createElement('div');
        if (this.showLines) {
            /** @type {?} */
            var cls = 'normal';
            if (this.rowNode.last) {
                cls = 'corner';
                this.render.removeClass(l1, 'treetable-lines-border-color');
            }
            l2.appendChild(dessert);
            this.render.addClass(dessert, cls);
            this.render.addClass(dessert, 'treetable-lines-border-color');
        }
        parentEl.insertBefore(l1, containerEl);
        parentEl.insertBefore(l2, containerEl);
        if (isTopNode) {
            this.render.setStyle(l2, 'marginRight', '3px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.registerClickEvent = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.togglerEl) {
            this.render.listen(this.togglerEl.nativeElement, 'click', this.onClick.bind(this));
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.onClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
        event.preventDefault();
        if (this.rowNode.node['showLoading']) {
            return false;
        }
        if (!this.tt.disabled) {
            this.tt.toggleExpand(this.rowNode.node);
        }
        return false;
    };
    /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    TreeTableTogglerComponent.prototype.updateIcon = /**
     * @private
     * @param {?} treeNode
     * @return {?}
     */
    function (treeNode) {
        this.isShowTriangle = this.showTriangle();
        this.noChilds = this.hasChildren();
        this.treeNodeIcon = this.tt.getTreeIcon(treeNode);
    };
    TreeTableTogglerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-treeTableToggler',
                    template: "\n    <a #toggler style=\"cursor: pointer\"\n            class=\"treenode-fold\" *ngIf=\"showLines\"\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\n            [style.display]=\"isShowTriangle ? '' : 'none'\"\n            (click)=\"onClick($event)\"></a>\n\n    <a #toggler style=\"cursor: pointer\"\n            class=\"treenode-fold\"  *ngIf=\"!showLines\"\n            [ngClass]=\"rowNode.node.expanded ? tt.unfoldIcon : tt.foldIcon\"\n            [style.marginLeft.px]=\"rowNode.level * indentSpacing\"\n            [style.visibility]=\"isShowTriangle ? 'visible' : 'hidden'\"\n            (click)=\"onClick($event)\"></a>\n    <span class=\"tree-icon-line\" [style.display]=\"isShowTriangle && showLines? '' : 'none'\"></span>\n    <span [style.display]=\"(tt.showIcon && rowNode.node.showIcon) ? 'inline-block': 'none'\" class=\"treenode-icon\" [ngClass]=\"treeNodeIcon\"></span>\n\n    <tt-checkbox  [rowNode]=\"rowNode\" *ngIf=\"tt.showCheckbox\" [disabled]=\"disabled\" [checked]=\"rowNode.isChecked\" ></tt-checkbox>\n    ",
                    encapsulation: ViewEncapsulation.None,
                    exportAs: 'ttToggler'
                }] }
    ];
    /** @nocollapse */
    TreeTableTogglerComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    TreeTableTogglerComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ['class.f-cmp-treetable-toggler',] }],
        rowNode: [{ type: Input }],
        disabled: [{ type: Input }],
        showLines: [{ type: Input }],
        indentSpacing: [{ type: Input }],
        togglerEl: [{ type: ViewChild, args: ['toggler',] }]
    };
    return TreeTableTogglerComponent;
}());
export { TreeTableTogglerComponent };
if (false) {
    /** @type {?} */
    TreeTableTogglerComponent.prototype.cls;
    /**
     * 树节点
     * @type {?}
     */
    TreeTableTogglerComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.disabled;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.showLines;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.indentSpacing;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.treeNodeIcon;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.isShowTriangle;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.noChilds;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.subscriptions;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.togglerEl;
    /** @type {?} */
    TreeTableTogglerComponent.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.ngzone;
    /**
     * @type {?}
     * @private
     */
    TreeTableTogglerComponent.prototype.render;
}
/**
 * 选中行组件
 */
var TreeTableSelectRowDirective = /** @class */ (function () {
    function TreeTableSelectRowDirective(tt, el, render, ngZone) {
        var _this = this;
        this.tt = tt;
        this.el = el;
        this.render = render;
        this.ngZone = ngZone;
        this.prevent = false;
        this.delay = 0;
        this.subscription = this.tt.selectNodeChangedSubject.subscribe((/**
         * @param {?} ids
         * @return {?}
         */
        function (ids) {
            if (ids && _this.rowNode) {
                /** @type {?} */
                var idArr = ids.split(',');
                if (idArr.indexOf(_this.rowNode.id) > -1) {
                    _this.toggleClass();
                    _this.rowNode.node['elementRef'] = _this.el;
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.rowNode.node.selectable = !this.selectRowDisabled;
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        // if (changes.selectRowDisabled && !changes.selectRowDisabled.isFirstChange()) {
        //     this.rowNode.node.selectable = !changes.selectRowDisabled.currentValue;
        // }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        if (this.tt.bodyTemplate) {
            if (!this.tt.isSelected(this.rowNode.node)) {
                this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.onclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (this.isEnabled()) {
            // this.rowClick(event);
            if (this.delay !== 0) {
                if (!this.prevent) {
                    this.prevent = true;
                    this.timer = setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.rowClick(event);
                        _this.prevent = false;
                    }), this.delay);
                }
            }
            else {
                this.rowClick(event);
            }
        }
        // event.stopPropagation();
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.isEnabled = /**
     * @return {?}
     */
    function () {
        return !this.tt.disabled && this.selectRowDisabled !== true;
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.rowClick = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        event.stopPropagation();
        this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'row' }).subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            if (!e) {
                return;
            }
            _this.tt.handleRowClick({
                originalEvent: event,
                rowNode: _this.rowNode,
                rowIndex: _this.rowIndex
            });
            _this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.toggleClass();
            }));
        }));
    };
    /**
     * @return {?}
     */
    TreeTableSelectRowDirective.prototype.toggleClass = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.tt.bodyTemplate) {
            if (this.tt.isSelected(this.rowNode.node)) {
                if (this.tt.singleSelect) {
                    this.tt.el.nativeElement.querySelectorAll('.farris-treetable-tbody>tr.farris-table-selectedrow').forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        _this.render.removeClass(n, 'farris-table-selectedrow');
                    }));
                }
                this.render.addClass(this.el.nativeElement, 'farris-table-selectedrow');
            }
            else {
                if (!this.tt.keepSelect) {
                    this.render.removeClass(this.el.nativeElement, 'farris-table-selectedrow');
                }
            }
        }
    };
    TreeTableSelectRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[selectRow]',
                    exportAs: 'row'
                },] }
    ];
    /** @nocollapse */
    TreeTableSelectRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: Renderer2 },
        { type: NgZone }
    ]; };
    TreeTableSelectRowDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['selectRow',] }],
        rowIndex: [{ type: Input }],
        selectRowDisabled: [{ type: Input }],
        delay: [{ type: Input }],
        onclick: [{ type: HostListener, args: ['click', ['$event'],] }]
    };
    return TreeTableSelectRowDirective;
}());
export { TreeTableSelectRowDirective };
if (false) {
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowNode;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.rowIndex;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.selectRowDisabled;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.subscription;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.prevent;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.timer;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.delay;
    /** @type {?} */
    TreeTableSelectRowDirective.prototype.tt;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.render;
    /**
     * @type {?}
     * @private
     */
    TreeTableSelectRowDirective.prototype.ngZone;
}
/**
 * 表头全选组件
 */
var TreeTableHeaderCheckboxComponent = /** @class */ (function () {
    function TreeTableHeaderCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.checkedChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableHeaderCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (!this.disabled && !this.tt.disabled) {
            /** @type {?} */
            var beforeEvent = !this.checked ? this.tt.beforeCheckAll : this.tt.beforeUnCheckAll;
            this.tt['checkall_CLICKED'] = true;
            beforeEvent({ instance: this.tt, checked: !this.checked }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                // 全选功能
                _this.chkAll.nativeElement.indeterminate = false;
                _this.checked = !_this.checked;
                _this.tt.toggleNodesWithCheckbox(event, _this.checked);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.tt['checkall_CLICKED'] = false;
                }), 50);
            }));
        }
        event.stopPropagation();
        return false;
    };
    TreeTableHeaderCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-header-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\" style=\"top: -2px;\">\n        <input type=\"checkbox\" #chkAll class=\"custom-control-input\"  [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableHeaderCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableHeaderCheckboxComponent.propDecorators = {
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chkAll: [{ type: ViewChild, args: ['chkAll',] }]
    };
    return TreeTableHeaderCheckboxComponent;
}());
export { TreeTableHeaderCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.chkAll;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableHeaderCheckboxComponent.prototype.ttService;
}
/**
 * 表体checkbox 组件
 */
var TreeTableCheckboxComponent = /** @class */ (function () {
    function TreeTableCheckboxComponent(tt, ttService) {
        this.tt = tt;
        this.ttService = ttService;
        this.cls1 = true;
        this.checkedChange = new EventEmitter();
        this.destroy$ = new Subject();
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.chk.nativeElement.indeterminate = this.rowNode.indeterminate || false;
        this.ttService.changeCheckboxStatus$.pipe(takeUntil(this.destroy$)).pipe(map((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n.id === _this.rowNode.id) {
                return n;
            }
            return null;
        }))).subscribe((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            if (n) {
                _this.chk.nativeElement.indeterminate = n.indeterminate;
                _this.checked = n.isChecked;
                _this.chk.nativeElement.checked = _this.checked;
            }
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TreeTableCheckboxComponent.prototype.handleClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        event.stopPropagation();
        if (!this.disabled) {
            this.tt.beforeClickNode({ instance: this.tt, rowNode: this.rowNode, event: event, type: 'checkbox' }).subscribe((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (!e) {
                    return;
                }
                _this.checked = !_this.checked;
                if (_this.tt.singleSelect) {
                    _this.tt.clearAll();
                    if (_this.checked) {
                        _this.tt.selectNode(_this.rowNode.id, true);
                    }
                    else {
                        _this.tt.unSelectNode(_this.rowNode.id, true);
                    }
                }
                else {
                    _this.tt.toggleNodeWithCheckbox(event, _this.rowNode, _this.checked);
                }
            }));
        }
        return false;
    };
    TreeTableCheckboxComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tt-checkbox',
                    template: "\n    <div class=\"custom-control custom-checkbox  custom-control-inline tt-checkbox\">\n        <input type=\"checkbox\" #chk class=\"custom-control-input\" [disabled]=\"disabled\" [checked]=\"checked\">\n        <label class=\"custom-control-label\" (click)=\"handleClick($event)\"></label>\n    </div>\n    ",
                    styles: ["\n        :host {\n            vertical-align: middle;\n        }\n        :host .custom-checkbox {\n            opacity: 1;\n            float: none;\n        }\n        "]
                }] }
    ];
    /** @nocollapse */
    TreeTableCheckboxComponent.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: TreetableService }
    ]; };
    TreeTableCheckboxComponent.propDecorators = {
        cls1: [{ type: HostBinding, args: ['class.tree-toggler-checkbox',] }],
        checked: [{ type: Input }],
        disabled: [{ type: Input }],
        rowNode: [{ type: Input }],
        checkedChange: [{ type: Output }],
        chk: [{ type: ViewChild, args: ['chk',] }]
    };
    return TreeTableCheckboxComponent;
}());
export { TreeTableCheckboxComponent };
if (false) {
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.cls1;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checked;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.disabled;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.rowNode;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.checkedChange;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.chk;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.destroy$;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.tt;
    /** @type {?} */
    TreeTableCheckboxComponent.prototype.ttService;
}
var DblClickRowDirective = /** @class */ (function () {
    function DblClickRowDirective(tt, el, ttService, selectRowDir) {
        this.tt = tt;
        this.el = el;
        this.ttService = ttService;
        this.selectRowDir = selectRowDir;
        this.enableDblClick = false;
        this.ttService = this.tt.ttService;
    }
    /**
     * @return {?}
     */
    DblClickRowDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (!this.enableDblClick) {
            this.selectRowDir.delay = 0;
        }
        else {
            this.selectRowDir.delay = 200;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DblClickRowDirective.prototype.ondblclick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var prevEl = ((/** @type {?} */ (event.target))).previousSibling;
        if (prevEl && prevEl.type === 'checkbox') {
            return;
        }
        if (this.tt.disabled) {
            return false;
        }
        if (this.tt.multiSelect && this.dblclickNode) {
            if (this.dblclickNode.node.leaf) {
                return false;
            }
        }
        /** @type {?} */
        var clsName = event.target['className'];
        /** @type {?} */
        var togglerTag = null;
        if (clsName.indexOf('f-cmp-treetable-toggler') > -1) {
            togglerTag = event.target['querySelector']('.treenode-fold');
        }
        else {
            if (event.target['className'].indexOf('treenode-fold') > -1) {
                togglerTag = (/** @type {?} */ (event.target));
            }
        }
        if (togglerTag && togglerTag.style.visibility === 'visible') {
            return false;
        }
        if (this.selectRowDir) {
            this.selectRowDir.prevent = false;
            clearTimeout(this.selectRowDir.timer);
            if (this.selectRowDir.rowNode && this.enableDblClick) {
                /** @type {?} */
                var rn = this.selectRowDir.rowNode;
                if (rn.node.children && rn.node.children.length && !rn.node.leaf && this.tt.dblClickExpand) {
                    this.tt.toggleExpand(rn.node);
                }
                this.tt.dblClick.emit(rn.node);
            }
        }
        // event.stopPropagation();
    };
    DblClickRowDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[dblclick]'
                },] }
    ];
    /** @nocollapse */
    DblClickRowDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: ElementRef },
        { type: TreetableService },
        { type: TreeTableSelectRowDirective, decorators: [{ type: Optional }, { type: Self }] }
    ]; };
    DblClickRowDirective.propDecorators = {
        enableDblClick: [{ type: Input, args: ['dblclick',] }],
        dblclickNode: [{ type: Input }],
        ondblclick: [{ type: HostListener, args: ['dblclick', ['$event'],] }]
    };
    return DblClickRowDirective;
}());
export { DblClickRowDirective };
if (false) {
    /** @type {?} */
    DblClickRowDirective.prototype.enableDblClick;
    /** @type {?} */
    DblClickRowDirective.prototype.dblclickNode;
    /** @type {?} */
    DblClickRowDirective.prototype.tt;
    /** @type {?} */
    DblClickRowDirective.prototype.el;
    /** @type {?} */
    DblClickRowDirective.prototype.ttService;
    /** @type {?} */
    DblClickRowDirective.prototype.selectRowDir;
}
var CustomRowStyleDirective = /** @class */ (function () {
    function CustomRowStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.col && this.tt.fixedColumns && this.tt.fixedHeader && this.col.fixed) {
            if (this.col.fixed === 'left' || this.col.fixed === 'right') {
                this.setRowStyle();
            }
            return;
        }
        else {
            this.setRowStyle();
        }
    };
    /**
     * @private
     * @return {?}
     */
    CustomRowStyleDirective.prototype.setRowStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var fn = this.tt.rowStyler;
        if (fn) {
            /** @type {?} */
            var sty_1 = fn(this.rowNode.node);
            if (sty_1) {
                if (typeof sty_1 === 'object' && (sty_1.style || sty_1.cls)) {
                    if (sty_1.style) {
                        Object.keys(sty_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1.style[s]);
                        }));
                    }
                    if (sty_1.cls) {
                        sty_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            _this.render.addClass(_this.el.nativeElement, c);
                        }));
                    }
                }
                else {
                    if (Array.isArray(sty_1) || typeof sty_1 === 'string') {
                        /** @type {?} */
                        var cls_1 = this.tt.getRowCls(this.rowNode);
                        if (cls_1 && Object.keys(cls_1).length) {
                            Object.keys(cls_1).forEach((/**
                             * @param {?} c
                             * @return {?}
                             */
                            function (c) {
                                if (cls_1[c]) {
                                    _this.render.addClass(_this.el.nativeElement, c);
                                }
                            }));
                        }
                    }
                    else {
                        Object.keys(sty_1).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, sty_1[s]);
                        }));
                    }
                }
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    CustomRowStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setRowStyle();
        }
    };
    CustomRowStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customRowStyle]'
                },] }
    ];
    /** @nocollapse */
    CustomRowStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    CustomRowStyleDirective.propDecorators = {
        rowNode: [{ type: Input, args: ['customRowStyle',] }],
        col: [{ type: Input, args: ['field',] }]
    };
    return CustomRowStyleDirective;
}());
export { CustomRowStyleDirective };
if (false) {
    /** @type {?} */
    CustomRowStyleDirective.prototype.rowNode;
    /** @type {?} */
    CustomRowStyleDirective.prototype.col;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.tt;
    /** @type {?} */
    CustomRowStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    CustomRowStyleDirective.prototype.render;
}
var TTCustomCellStyleDirective = /** @class */ (function () {
    function TTCustomCellStyleDirective(injector, ngZone, el, tt, utils, render) {
        this.injector = injector;
        this.ngZone = ngZone;
        this.el = el;
        this.tt = tt;
        this.utils = utils;
        this.render = render;
    }
    /**
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.tt && this.tt.getCellCls) {
            this.setCellStyle();
        }
        if (!this.tt.showBorder && this.tt.columns.length === 1) {
            this.render.setStyle(this.el.nativeElement, 'border-width', '0px');
        }
    };
    /**
     * @private
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.setCellStyle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var cellCls = this.tt.getCellCls(this.rowNode, this.column.field);
        if (this.column && this.column.styler) {
            if (cellCls && Object.keys(cellCls).length) {
                Object.keys(cellCls).forEach((/**
                 * @param {?} c
                 * @return {?}
                 */
                function (c) {
                    if (cellCls[c]) {
                        _this.render.addClass(_this.el.nativeElement, c);
                    }
                }));
            }
            /** @type {?} */
            var rowData = this.rowNode.node.data;
            /** @type {?} */
            var ccs_1 = this.column.styler(this.utils.getValue(this.column.field, rowData), rowData, this.rowIndex, this.rowNode);
            if (ccs_1) {
                if (ccs_1.style || ccs_1.cls) {
                    if (ccs_1.style) {
                        Object.keys(ccs_1.style).forEach((/**
                         * @param {?} s
                         * @return {?}
                         */
                        function (s) {
                            _this.render.setStyle(_this.el.nativeElement, s, ccs_1.style[s]);
                        }));
                    }
                    if (ccs_1.cls) {
                        ccs_1.cls.split(',').forEach((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) {
                            if (c[0] === '!') {
                                _this.render.removeClass(_this.el.nativeElement, c.substring(1));
                            }
                            else {
                                _this.render.addClass(_this.el.nativeElement, c);
                            }
                        }));
                    }
                }
            }
        }
        else {
            /** @type {?} */
            var _sty_1 = cellCls || {};
            /** @type {?} */
            var rowStyle = this.tt.getRowCls(this.rowNode) || {};
            /** @type {?} */
            var hasBackground = Object.keys(cellCls).find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                return ['background', 'background-color', 'backgroundcolor'].indexOf(n.toLowerCase()) > -1;
            }));
            /** @type {?} */
            var _rowStyles = rowStyle;
            if (rowStyle.style) {
                _rowStyles = rowStyle.style;
            }
            /** @type {?} */
            var _cellStyles = _sty_1;
            if (_sty_1.style) {
                _cellStyles = _sty_1.style;
            }
            if (hasBackground) {
                _sty_1 = Object.assign(_rowStyles, _cellStyles);
            }
            else {
                _sty_1 = Object.assign(_cellStyles, _rowStyles);
            }
            Object.keys(_sty_1).forEach((/**
             * @param {?} s
             * @return {?}
             */
            function (s) {
                _this.render.setStyle(_this.el.nativeElement, s, _sty_1[s]);
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TTCustomCellStyleDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.rowNode && !changes.rowNode.isFirstChange()) {
            this.setCellStyle();
        }
    };
    TTCustomCellStyleDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[customCellStyle]'
                },] }
    ];
    /** @nocollapse */
    TTCustomCellStyleDirective.ctorParameters = function () { return [
        { type: Injector },
        { type: NgZone },
        { type: ElementRef },
        { type: TreeTableComponent },
        { type: CommonUtils },
        { type: Renderer2 }
    ]; };
    TTCustomCellStyleDirective.propDecorators = {
        column: [{ type: Input, args: ['customCellStyle',] }],
        rowNode: [{ type: Input }],
        rowIndex: [{ type: Input }]
    };
    return TTCustomCellStyleDirective;
}());
export { TTCustomCellStyleDirective };
if (false) {
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.column;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowNode;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.rowIndex;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.tt;
    /** @type {?} */
    TTCustomCellStyleDirective.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    TTCustomCellStyleDirective.prototype.render;
}
var TTResizableColumnDirective = /** @class */ (function () {
    function TTResizableColumnDirective(tt, ngzone, el, render) {
        this.tt = tt;
        this.ngzone = ngzone;
        this.el = el;
        this.render = render;
        this.enableResize = true;
    }
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.isEnable()) {
            this.render.addClass(this.el.nativeElement, 'resizable-column');
            this.resizer = document.createElement('span');
            this.resizer.className = 'column-resizer';
            this.el.nativeElement.appendChild(this.resizer);
            this.ngzone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.resizerMouseDownListener = _this.onMouseDown.bind(_this);
                _this.resizer.addEventListener('mousedown', _this.resizerMouseDownListener);
                _this.el.nativeElement.addEventListener('mouseenter', _this.onMouseEnter.bind(_this));
            }));
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.enableResize && !changes.enableResize.isFirstChange()) {
            if (!this.isEnable() && this.resizer) {
                this.resizer.remove();
            }
        }
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.isEnable = /**
     * @return {?}
     */
    function () {
        return this.tt.resizableColumns && !this.tt.autoWidth && this.enableResize;
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.bindDocumentEvents = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            _this.documentMouseMoveListener = _this.onMouseMove.bind(_this);
            document.addEventListener('mousemove', _this.documentMouseMoveListener);
            _this.documentMouseUpListener = _this.onMouseUp.bind(_this);
            document.addEventListener('mouseup', _this.documentMouseUpListener);
        }));
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.unbindDocumentEvents = /**
     * @return {?}
     */
    function () {
        if (this.documentMouseMoveListener) {
            document.removeEventListener('mousemove', this.documentMouseMoveListener);
            this.documentMouseMoveListener = null;
        }
        if (this.documentMouseUpListener) {
            document.removeEventListener('mouseup', this.documentMouseUpListener);
            this.documentMouseUpListener = null;
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseDown = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.isEnable()) {
            this.tt.onColumnResizeBegin(event);
            this.bindDocumentEvents();
        }
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseEnter = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseMove = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResize(event);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TTResizableColumnDirective.prototype.onMouseUp = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.tt.onColumnResizeEnd(event, this.el.nativeElement);
        this.unbindDocumentEvents();
    };
    /**
     * @return {?}
     */
    TTResizableColumnDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.resizerMouseDownListener) {
            this.resizer.removeEventListener('mousedown', this.resizerMouseDownListener);
        }
        this.unbindDocumentEvents();
    };
    TTResizableColumnDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[resizable-column]'
                },] }
    ];
    /** @nocollapse */
    TTResizableColumnDirective.ctorParameters = function () { return [
        { type: TreeTableComponent },
        { type: NgZone },
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TTResizableColumnDirective.propDecorators = {
        enableResize: [{ type: Input, args: ['resizable-column',] }]
    };
    return TTResizableColumnDirective;
}());
export { TTResizableColumnDirective };
if (false) {
    /** @type {?} */
    TTResizableColumnDirective.prototype.enableResize;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizer;
    /** @type {?} */
    TTResizableColumnDirective.prototype.resizerMouseDownListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseMoveListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.documentMouseUpListener;
    /** @type {?} */
    TTResizableColumnDirective.prototype.tt;
    /** @type {?} */
    TTResizableColumnDirective.prototype.ngzone;
    /** @type {?} */
    TTResizableColumnDirective.prototype.el;
    /** @type {?} */
    TTResizableColumnDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdHJlZXRhYmxlLyIsInNvdXJjZXMiOlsibGliL3RyZWV0YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7QUFVdEQsT0FBTyxFQUNILFNBQVMsRUFBVSxLQUFLLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFDaEQsZUFBZSxFQUFFLFNBQVMsRUFDMUIsWUFBWSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFDeEQsU0FBUyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQWlCLE1BQU0sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQ2xDLHVCQUF1QixFQUFFLGlCQUFpQixFQUFXLFdBQVcsRUFDL0csTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsOEJBQThCLEVBQUUsWUFBWSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEksT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxtQkFBbUIsRUFBbUIsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFekUsT0FBTyxFQUE0QixFQUFFLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDckYsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JDLE9BQU8sRUFBYSxN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QUNoQyxDQUFDOztnQkE1RkosU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxvQkFBb0I7aUJBQ2pDOzs7O2dCQVNrQixrQkFBa0I7Z0JBaDFKUyxNQUFNO2dCQURaLFVBQVU7Z0JBQ0ksU0FBUzs7OytCQXkwSjFELEtBQUssU0FBQyxrQkFBa0I7O0lBMEY3QixpQ0FBQztDQUFBLEFBOUZELElBOEZDO1NBM0ZZLDBCQUEwQjs7O0lBQ25DLGtEQUErQzs7SUFDL0MsNkNBQXlCOztJQUN6Qiw4REFBOEI7O0lBQzlCLCtEQUErQjs7SUFDL0IsNkRBQTZCOztJQUd6Qix3Q0FBNkI7O0lBQUUsNENBQXFCOztJQUNwRCx3Q0FBcUI7O0lBQUUsNENBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3dpdGNoTWFwLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbi8qXHJcbiogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOC0xMi0xOCAxODo0NDoxM1xyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0yOSAwODo0MTozOVxyXG4gKiBAQ29tcGFueTogSW5zcHVyXHJcbiAqIEBWZXJzaW9uOiB2MC4wLjFcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBUZW1wbGF0ZVJlZiwgRGlyZWN0aXZlLFxyXG4gICAgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIEFmdGVyQ29udGVudEluaXQsIE9uRGVzdHJveSxcclxuICAgIEhvc3RMaXN0ZW5lciwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEVsZW1lbnRSZWYsIEluamVjdG9yLFxyXG4gICAgVmlld0NoaWxkLCBPcHRpb25hbCwgU2VsZiwgQWZ0ZXJWaWV3SW5pdCwgTmdab25lLCBSZW5kZXJlcjIsIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG4gICAgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIERvQ2hlY2ssIEhvc3RCaW5kaW5nXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZSwgQ29tbW9uVXRpbHMsIElkU2VydmljZSwgRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlLCBEZWJ1Z1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcbmltcG9ydCB7IFJlc2l6ZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi9ldmVudHMnO1xyXG5pbXBvcnQgeyBDb2x1bW5Gb3JtYXRTZXJ2aWNlLCBDb2x1bW5Gb3JtYXR0ZXIgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi9jb2x1bW4nO1xyXG5pbXBvcnQgeyBJbnB1dEdyb3VwQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1pbnB1dC1ncm91cCc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IFBlcmZlY3RTY3JvbGxiYXJDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLXBlcmZlY3Qtc2Nyb2xsYmFyJztcclxuXHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgT2JzZXJ2YWJsZSwgb2YsIEJlaGF2aW9yU3ViamVjdCwgU3ViamVjdCwgdGltZXIgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBjbG9uZURlZXAsIGV4dGVuZCwgcmVtb3ZlIH0gZnJvbSAnbG9kYXNoLWVzJztcclxuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XHJcblxyXG5pbXBvcnQgeyBUcmVlVGFibGVDb2x1bW4gfSBmcm9tICcuL3R5cGVzL3RyZWV0YWJsZS1jb2x1bW4nO1xyXG5pbXBvcnQgeyBWaXJ0dWFsaXplZExvYWRlclNlcnZpY2UgfSBmcm9tICcuL3ZpcnR1YWxpemVkLWxvYWRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVHJlZU5vZGUsIFJvd05vZGUsIFNlbGVjdEV2ZW50QXJncyB9IGZyb20gJy4vdHlwZXMvdHJlZW5vZGUnO1xyXG5pbXBvcnQgeyBUcmVldGFibGVTZXJ2aWNlIH0gZnJvbSAnLi90cmVldGFibGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFNlYXJjaEhhbmRsZSB9IGZyb20gJy4vc2VhcmNoLmhhbmRsZSc7XHJcbmltcG9ydCB7IFRUSG90a2V5cyB9IGZyb20gJy4vaG90a2V5cyc7XHJcbmltcG9ydCB7IFBhZ2luYXRpb25JbnN0YW5jZSB9IGZyb20gJ0BmYXJyaXMvdWktcGFnaW5hdGlvbic7XHJcbmltcG9ydCB7IEZhcnJpc0NvbnRleHRNZW51RGlyZWN0aXZlIH0gZnJvbSAnQGZhcnJpcy91aS1jb250ZXh0LW1lbnUnO1xyXG5cclxuXHJcbi8qKiDljZXlhYPmoLzngrnkuovku7blj4LmlbAgKi9cclxuZXhwb3J0IGludGVyZmFjZSBDZWxsQ2xpY2tQYXJhbSB7XHJcbiAgICBldmVudDogRXZlbnQ7XHJcbiAgICBjb2w6IFRyZWVUYWJsZUNvbHVtbjtcclxuICAgIG5vZGU6IFRyZWVOb2RlO1xyXG59XHJcbi8qKiDoioLngrnpkqnpgInkuovku7YgKi9cclxuZXhwb3J0IGludGVyZmFjZSBOb2RlQ2hlY2tlZFBhcmFtIHtcclxuICAgIG9yaWdpbmFsRXZlbnQ/OiBhbnk7XHJcbiAgICBub2RlOiBUcmVlTm9kZSB8IFRyZWVOb2RlW107XHJcbiAgICBub2Rlcz86IGFueVtdO1xyXG4gICAgaW5zdGFuY2U6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOb2RlU2VsZWN0ZWRQYXJhbSB7XHJcbiAgICBvcmlnaW5hbEV2ZW50PzogRXZlbnQ7XHJcbiAgICBub2RlOiBUcmVlTm9kZSB8IFRyZWVOb2RlW107XHJcbiAgICB0eXBlPzogJ3JvdycgfCAnY2hlY2tib3gnO1xyXG4gICAgaW5kZXg/OiBudW1iZXI7XHJcbiAgICBwYXJlbnRzPzogYW55W107XHJcbiAgICBpbnN0YW5jZTogVHJlZVRhYmxlQ29tcG9uZW50O1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJY29uRmllbGRUeXBlID0ge1xyXG4gICAgbGVhZj86IHN0cmluZyxcclxuICAgIGV4cGFuZD86IHN0cmluZyxcclxuICAgIGNvbGxhcHNlPzogc3RyaW5nXHJcbn0gfCBzdHJpbmc7XHJcblxyXG5cclxuY29uc3QgTk9ERVNfUEFHRVJfQ09MVU1OX0ZJRUxEID0gJ19fbm9kZXNwYWdlcmJhcl9fJztcclxuXHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAndHQtY29sdW1uLCBbdHQtY29sdW1uXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZUNvbHVtbkRpcmVjdGl2ZSB7XHJcbiAgICBASW5wdXQoKSBmaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHdpZHRoPzogbnVtYmVyO1xyXG4gICAgQElucHV0KCkgaEFsaWduPzogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgYWxpZ24/OiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBmb3JtYXR0ZXI/OiAoKSA9PiBhbnkgfCBDb2x1bW5Gb3JtYXR0ZXI7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdHJlZXRhYmxlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAndHJlZXRhYmxlLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlczogW2BcclxuICAgICAgICAuZmFycmlzLXRyZWV0YWJsZSB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnJlc2l6YWJsZS1jb2x1bW4ge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jb2x1bW4tcmVzaXplciB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgIHJpZ2h0OiAwO1xyXG4gICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgIHdpZHRoOiAuNWVtO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgICAgIGN1cnNvcjogY29sLXJlc2l6ZTtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5jb2x1bW4tcmVzaXplci1oZWxwZXIge1xyXG4gICAgICAgICAgICB3aWR0aDogMXB4O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDEwO1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBkYXNoZWQgIzE4OTBmZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlLWRpc2FibGVkIC5mYXJyaXMtdHJlZXRhYmxlLWJvZHkgLnRhYmxlIHRye1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwLjQ7XHJcbiAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mYXJyaXMtdHJlZXRhYmxlLWRpc2FibGVkIC50YWJsZSB0ci5mYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3d7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1jb250cm9sLWlucHV0OmluZGV0ZXJtaW5hdGV+LmN1c3RvbS1jb250cm9sLWxhYmVsOjphZnRlciB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNCA0JyUzZSUzY3BhdGggc3Ryb2tlPSclMjNmZmYnIGQ9J00wIDJoNCcvJTNlJTNjL3N2ZyUzZVwiKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzE4OTBmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnVuc2VsZWN0YWJsZS10ZXh0IHtcclxuICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmVcclxuICAgICAgICB9XHJcbiAgICAgICAgLnNlYXJjaC1oaWdobGlnaHQge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRjFGO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuc2VhcmNoLWhpZ2hsaWdodC5hY3RpdmV7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRjkwMUM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnMgLnBzX19yYWlsLXgsIC5mLXRyZWV0YWJsZS0tZml4ZWQtY29sdW1ucyAucHNfX3JhaWwteSB7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDE4O1xyXG4gICAgICAgIH1cclxuICAgIGBdLFxyXG4gICAgZXhwb3J0QXM6ICd0cmVlVGFibGUnLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcclxuICAgIGlkID0gJyc7XHJcbiAgICAvKiog5a695bqmICovXHJcbiAgICBASW5wdXQoKSB3aWR0aCA9IDUwMDtcclxuICAgIC8qKiDpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIGhlaWdodCA9IDQwMDtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93RmlsdGVyQmFyID0gZmFsc2U7XHJcbiAgICAvKiog5pi+56S66L+H5ruk6KGMICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaWx0ZXJSb3cgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrmn6Xor6LlrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNob3dTZWFyY2hGaWVsZCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgaGVhZGVySGVpZ2h0ID0gMzU7XHJcbiAgICAvKiog6KGo5aS05oqY6KGMICovXHJcbiAgICBASW5wdXQoKSBoZWFkZXJXcmFwID0gZmFsc2U7XHJcbiAgICAvKiog6KGM6auYICovXHJcbiAgICBASW5wdXQoKSByb3dIZWlnaHQgPSAyOTtcclxuICAgIC8qKlxyXG4gICAgICog5YiX5L+h5oGvXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGNvbHVtbnMgPSBbXTtcclxuICAgIHByaXZhdGUgX2dyb3VwQ29sdW1ucyA9IFtdO1xyXG4gICAgQElucHV0KCkgc2V0IGdyb3VwQ29sdW1ucyhjb2xzKSB7XHJcbiAgICAgICAgdGhpcy5fZ3JvdXBDb2x1bW5zID0gY29scyB8fCBbXTtcclxuICAgICAgICBjb25zdCBfY29sdW1ucyA9IHRoaXMudHRTZXJ2aWNlLmNoZWNrQ29sdW1uc0Zvckdyb3VwSGVhZGVyKGNvbHMubWFwKGNzID0+IFsuLi5jc10pLCB0aGlzKS5jb2x1bW5zO1xyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IF9jb2x1bW5zLmZpbHRlcihuID0+IG4uZmllbGQpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGdyb3VwQ29sdW1ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBDb2x1bW5zO1xyXG4gICAgfVxyXG4gICAgLyoqIOWQr+eUqOWkmuihqOWktCAqL1xyXG4gICAgQElucHV0KCkgdXNlR3JvdXBIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICBASW5wdXQoKSBmaXRDb2x1bW5zID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGF1dG9GaXRDb2x1bW5zID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgc2VhcmNoRmllbGRzOiB7IGxhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfVtdO1xyXG5cclxuICAgIEBJbnB1dCgpIGFsbENvbHVtbnNUaXRsZSA9ICfmiYDmnInliJcnO1xyXG4gICAgQElucHV0KCkgc2VhcmNoQW55RmllbGQgPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmmL7npLrov57mjqXnur/vvIzpu5jorqTkuLogZmFsc2UgKi9cclxuICAgIEBJbnB1dCgpIHNob3dMaW5lcyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgc2hvd0xpbmVzT25Ib3ZlciA9IGZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKblkK/nlKjlpJrpgInjgIIg6buY6K6k5Li65Y2V6YCJXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG11bHRpU2VsZWN0ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBzaW5nbGVTZWxlY3QgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOWkmumAieWQju+8jOaYr+WQpuaYvuekumNoZWNrYm94ICovXHJcbiAgICBASW5wdXQoKSBzaG93Q2hlY2tib3ggPSBmYWxzZTtcclxuICAgIC8qKlxyXG4gICAgICog5Li76ZSu5a2X5q61XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGlkRmllbGQ6IHN0cmluZztcclxuXHJcbiAgICAvKiog5pi+56S66L655qGG57q/ICovXHJcbiAgICBASW5wdXQoKSBzaG93Qm9yZGVyID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93Q2hlY2tBbGwgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dIZWFkZXIgPSB0cnVlO1xyXG4gICAgLyoqIOWQr+eUqOaWkemprOe6vyAqL1xyXG4gICAgQElucHV0KCkgc3RyaXBlZCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOm8oOagh+WIkui/h+aViOaenCAqL1xyXG4gICAgQElucHV0KCkgaG92ZXJlZCA9IHRydWU7XHJcbiAgICAvKiog56aB55So44CCIOemgeeUqOaXtuS4jeWFgeiuuOmAieS4reihjCAqL1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIC8qKiDnpoHljaHoioLngrnpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGRpc2FibGVkUm93OiAocGFyYW06IHsgbm9kZTogVHJlZU5vZGUsIGluc3RhbmNlPzogVHJlZVRhYmxlQ29tcG9uZW50IH0pID0+IGJvb2xlYW47XHJcblxyXG4gICAgLyoqIOaVsOaNruWKoOi9veaWueW8jzsg6buY6K6k5YC8IOS4uiBhbGxcclxuICAgICAqIC0gYWxsOiDlhajpg6jliqDovb1cclxuICAgICAqIC0gYXN5bmM6IOWIhuWxguWKoOi9vVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBsb2FkRGF0YVR5cGU6ICdhbGwnIHwgJ2FzeW5jJyA9ICdhbGwnO1xyXG4gICAgLyoqIOWbuuWumuihqOWktCAqL1xyXG4gICAgQElucHV0KCkgZml4ZWRIZWFkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6YCJ5Lit5b2T5YmN6KGM5bm26ZKp6YCJICovXHJcbiAgICBASW5wdXQoKSBjaGVja09uU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAvKiog5b2T5aSa6YCJ5pe277yM6ZKp6YCJ5bm26YCJ5Lit5b2T5YmN6KGMICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RPbkNoZWNrID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOWkmumAieaXtu+8jOatpOWxnuaAp+S4unRydWUg5pe277yM5LuF5b2T5YmN6KGM6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG9ubHlTZWxlY3RTZWxmID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWIl+Wuveiwg+aVtCAqL1xyXG4gICAgQElucHV0KCkgcmVzaXphYmxlQ29sdW1ucyA9IHRydWU7XHJcbiAgICAvKiog6K6+572u5Li6dHJ1ZeaXtuiHqumAguW6lOeItuWuueeahOWwuuWvuCAqL1xyXG4gICAgQElucHV0KCkgZml0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOe6p+iBlOmAieS4reWKn+iDvSAqL1xyXG4gICAgQElucHV0KCkgY2FzY2FkZUNoZWNrID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIvnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVEb3duID0gdHJ1ZTtcclxuICAgIC8qKiDlkJHkuIrnuqfogZTpgInkuK0gKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVVcCA9IHRydWU7XHJcbiAgICAvKiog56m65pWw5o2u5pe277yM5pi+56S655qE5o+Q56S65paH5pysICovXHJcbiAgICBASW5wdXQoKSBlbXB0eU1lc3NhZ2UgPSAn5pqC5peg5pWw5o2uJztcclxuICAgIC8qKiDnvKnov5vpl7Tot53vvIzpu5jorqTkuLogMTZweCAqL1xyXG4gICAgQElucHV0KCkgaW5kZW50U3BhY2luZyA9IDE2O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V5Ye76KGM6YCJ5Lit5ZCO77yM5Zyo5qyh54K55Ye75LiN5Lya6KKr5Y+W5raI6YCJ5Lit54q25oCBO1xyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBrZWVwU2VsZWN0ID0gdHJ1ZTtcclxuICAgIC8qKiDomZrmi5/liqDovb0gKi9cclxuICAgIEBJbnB1dCgpIHZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOS7heWFgeiuuOmAieaLqeWPtuWtkOiKgueCuVxyXG4gICAgICogLSBkZWZhdWx0OiDlupTnlKjmnI3liqHlmajnq6/kvKDlm57nmoTorr7nva7vvIzlpoLmnpzmnI3liqHlmajnq6/msqHmnInorr7nva7vvIzliJnkuI4gbm8g5L+d5oyB5LiA6Iez77ybXHJcbiAgICAgKiAtIHllczog5aaC5p6c5a6i5oi356uv6K6+572u5Li6IGB5ZXNgLCDmnI3liqHlmajnq6/nmoTorr7nva7lpLHmlYjvvJtcclxuICAgICAqIC0gbm86IOWFgeiuuOmAieaLqeaJgOacieiKgueCue+8m+acjeWKoeWZqOerr+iuvue9ruWkseaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBvbmx5U2VsZWN0TGVhZjogYm9vbGVhbiB8ICdkZWZhdWx0JyB8ICd5ZXMnIHwgJ25vJyA9ICdkZWZhdWx0JztcclxuXHJcbiAgICAvKiog5pi+56S65Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBzaG93SWNvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWPtuWtkOiKgueCueWbvuaghyAqL1xyXG4gICAgQElucHV0KCkgbGVhZkljb24gPSAnZmlsZSc7XHJcbiAgICAvKiog6IqC54K55bGV5byA5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBleHBhbmRJY29uID0gJ2ZvbGRlci1vcGVuJztcclxuICAgIC8qKiDoioLngrnmipjlj6Dlm77moIcgKi9cclxuICAgIEBJbnB1dCgpIGNvbGxhcHNlSWNvbiA9ICdmb2xkZXInO1xyXG5cclxuICAgIEBJbnB1dCgpIGZvbGRJY29uID0gJ3RyZWV0YWJsZS10b2dnbGVyJztcclxuICAgIEBJbnB1dCgpIHVuZm9sZEljb24gPSAnZXh0YW5kZWQgdHJlZXRhYmxlLXRvZ2dsZXInO1xyXG5cclxuICAgIC8qKiDlkK/nlKjoioLngrnlm77moIfku47mlbDmja7kuK3ojrflj5bjgIIg6buY6K6k5Li6IGZhbHNlICovXHJcbiAgICBASW5wdXQoKSB1c2VJY29uRnJvbURhdGEgPSBmYWxzZTtcclxuICAgIC8qKiDlvZPmlbDmja7mupDkuK1pY29u5pyq6K6+572u5pe25L2/55So5YaF572uSUNPTi4g6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIHdoZW5EYXRhSWNvbkVtcHR5VXNlRGVmYXVsdCA9IHRydWU7XHJcbiAgICAvKiog5LuO5pWw5o2u5rqQ5a2X5q615Lit6I635Y+W5Zu+5qCHICovXHJcbiAgICBASW5wdXQoKSBpY29uRmllbGQ6IEljb25GaWVsZFR5cGUgPSAnJztcclxuICAgIC8qKiDlm77moIfoh6rlrprkuYnmoLflvI8gKi9cclxuICAgIEBJbnB1dCgpIGljb25DbHM6IHN0cmluZztcclxuXHJcbiAgICAvKiog5ZCv55So6L+c56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuICAgIC8qKiDmjpLluo/lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNvcnROYW1lOiBzdHJpbmc7XHJcbiAgICAvKiog5o6S5bqP5pa55byPIGFzYyB8IGRlc2MgKi9cclxuICAgIEBJbnB1dCgpIHNvcnRPcmRlcjogc3RyaW5nO1xyXG4gICAgLyoqIOWFgeiuuOWkmuWIl+aOkuW6jyAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlTb3J0OiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNvcnRDb2x1bW46IChmaWVsZDogc3RyaW5nLCBvcmRlcjogc3RyaW5nKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIHJvd1N0eWxlcjogKHRyZWVOb2RlOiBUcmVlTm9kZSwgZmllbGQ/OiBzdHJpbmcpID0+IGFueTtcclxuICAgIEBJbnB1dCgpIGNlbGxTdHlsZXI6ICh0cmVlTm9kZTogVHJlZU5vZGUsIGZpZWxkOiBzdHJpbmcpID0+IGFueTtcclxuXHJcbiAgICAvKiog5ZCv55So5YmN56uv5paH5pys5p+l5om+ICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIOaWh+acrOafpeivouWtl+autSwg5byD55SoICovXHJcbiAgICBASW5wdXQoKSBmaW5kRmllbGQ6IHN0cmluZztcclxuICAgIC8vIOagkeWIl+ihqOm7mOiupOWxleW8gOWxgue6p+OAgiAtMe+8miDkuI3lsZXlvIDvvJsgMO+8miDlhajpg6jlsZXlvIDvvJsgPjA6ICDlsZXlvIDliLDmjIflrprnuqfmlbDvvJtcclxuICAgIEBJbnB1dCgpIGV4cGFuZExldmVsID0gLTE7XHJcblxyXG4gICAgQElucHV0KCkgc2VsZWN0VmFsdWUgPSAnJztcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RWYWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlkK/nlKjlj4zlh7vlsZXlvIDoioLngrkgKi9cclxuICAgIEBJbnB1dCgpIGRibENsaWNrRXhwYW5kID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIHVzZURibENsaWNrID0gdHJ1ZTtcclxuXHJcbiAgICAvKiog6YCJ5Lit6IqC54K5SUTmlbDnu4QgKi9cclxuICAgIEBJbnB1dCgpIHNlbGVjdFZhbHVlcyA9IFtdO1xyXG4gICAgQE91dHB1dCgpIHNlbGVjdFZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmmK/lkKbnpoHmraLmipjooYzvvIzpu5jorqTkuI3mipjooYwgKi9cclxuICAgIEBJbnB1dCgpIG5vd3JhcCA9IHRydWU7XHJcblxyXG4gICAgQElucHV0KCkgY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgIEBPdXRwdXQoKSBjaGVja1ZhbHVlc0NoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVNlbGVjdGVkOiAoZTogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZVVuU2VsZWN0ZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgQElucHV0KCkgYmVmb3JlTm9kZUNoZWNrZWQ6ICgpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBASW5wdXQoKSBiZWZvcmVOb2RlVW5DaGVja2VkOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNoZWNrQWxsOiAoZT86IGFueSkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIEBJbnB1dCgpIGJlZm9yZVVuQ2hlY2tBbGw6IChlPzogYW55KSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsaWNrTm9kZTogKGU/OiBhbnkpID0+IE9ic2VydmFibGU8Ym9vbGVhbj47XHJcblxyXG4gICAgLyoqIOWIhumhteS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgLyoqIOWIhumhteWKoOi9veWtkOiKgueCueaVsOaNriAqL1xyXG4gICAgQElucHV0KCkgcGFnaW5hdGlvbkZvckNoaWxkcmVuID0gZmFsc2U7XHJcbiAgICAvKiog5YiG6aG15p2h5pi+56S65qih5byP77yMIGRlZmF1bHQsIHNpbXBsZSAqL1xyXG4gICAgQElucHV0KCkgcGFnZXJWaWV3TW9kZSA9ICdkZWZhdWx0JztcclxuICAgIC8qKiDlkK/nlKjmnI3liqHlmajnq6/liIbpobUgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VyT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZUxpc3QgPSBbMTAsIDIwLCAzMCwgNTAsIDEwMF07XHJcbiAgICAvKiog5b2T5YmN6aG156CBICovXHJcbiAgICBASW5wdXQoKSBwYWdlSW5kZXggPSAxO1xyXG4gICAgLyoqIOavj+mhteiusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgcGFnZVNpemUgPSAyMDtcclxuICAgIC8qKiDliIbpobXljLrpq5jluqYgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VySGVpZ2h0ID0gNTY7XHJcbiAgICAvKiog5pi+56S65q+P6aG16K6w5b2V5pWwICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZUxpc3QgPSBmYWxzZTtcclxuICAgIC8qKiDmmL7npLrliIbpobXkv6Hmga8gKi9cclxuICAgIEBJbnB1dCgpIHNob3dQYWdlSW5mbyA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CBICovXHJcbiAgICBASW5wdXQoKSBzaG93UGFnZU51bWJlciA9IHRydWU7XHJcbiAgICAvKiog5pi+56S66aG156CB5pyA5aSn5pWw6YePICovXHJcbiAgICBASW5wdXQoKSBwYWdlckxhYmVsU2l6ZSA9IDc7XHJcbiAgICAvKiog5pi+56S66aG156CB6L6T5YWl5qGGICovXHJcbiAgICBASW5wdXQoKSBzaG93R290b0lucHV0ID0gZmFsc2U7XHJcbiAgICAvKiog5a2Q6IqC54K55YiG6aG15piv5ZCm5pi+56S65oC76K6w5b2V5pWw77yM6buY6K6kIGZhbHNlICovXHJcbiAgICBASW5wdXQoKSBzaG93VG90YWxGb3JDaGlsZHJlbiA9IGZhbHNlO1xyXG4gICAgLyoqIOaAu+iusOW9leaVsCAqL1xyXG4gICAgQElucHV0KCkgdG90YWwgPSAwO1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVDb250ZXh0TWVudSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgY29udGV4dE1lbnVJdGVtcyA9IFtdO1xyXG4gICAgQElucHV0KCkgYmVmb3JlU2hvd0NvbnRleHRNZW51OiAoZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gT2JzZXJ2YWJsZTx7IHNob3c6IGJvb2xlYW4sIG1lbnVzOiBBcnJheTxhbnk+fT47XHJcblxyXG4gICAgQE91dHB1dCgpIHBhZ2VTaXplQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5o6S5bqP5ZCOICovXHJcbiAgICBAT3V0cHV0KCkgY29sdW1uU29ydGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOmAieS4reS6i+S7tiAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVTZWxlY3RlZDogRXZlbnRFbWl0dGVyPE5vZGVTZWxlY3RlZFBhcmFtPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDlj5bmtojpgInkuK3kuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBub2RlVW5TZWxlY3Q6IEV2ZW50RW1pdHRlcjxOb2RlU2VsZWN0ZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOmSqemAiSAqL1xyXG4gICAgQE91dHB1dCgpIG5vZGVDaGVja2VkOiBFdmVudEVtaXR0ZXI8Tm9kZUNoZWNrZWRQYXJhbT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5Y+W5raI6ZKp6YCJICovXHJcbiAgICBAT3V0cHV0KCkgbm9kZVVuQ2hlY2tlZDogRXZlbnRFbWl0dGVyPE5vZGVDaGVja2VkUGFyYW0+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qKiDlhajpgInkuovku7YgKi9cclxuICAgIEBPdXRwdXQoKSBjaGVja0FsbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5Y+W5raI5YWo6YCJICovXHJcbiAgICBAT3V0cHV0KCkgdW5DaGVja0FsbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5p+l6K+iICovXHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZGJsQ2xpY2s6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBsb2FkZWREYXRhOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgZXhwYW5kOiBFdmVudEVtaXR0ZXI8VHJlZU5vZGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGNvbGxhcHNlOiBFdmVudEVtaXR0ZXI8VHJlZU5vZGU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBleHBhbmRBbGxOb2RlczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY29sbGFwc2VBbGxOb2RlczogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGFwcGVuZE5ldzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVtb3ZlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgdXBkYXRlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGNsZWFyU2VhcmNoVmFsdWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2VsbENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxDZWxsQ2xpY2tQYXJhbT4oKTtcclxuICAgIEBPdXRwdXQoKSBjaGlsZHNQYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoVmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICBASW5wdXQoKSBsb2FkZWRUaW1lciA9IDEwMDtcclxuXHJcbiAgICBzZXJpYWxpemVkVmFsdWU6IFJvd05vZGVbXTtcclxuXHJcbiAgICBfZGF0YTogVHJlZU5vZGVbXSA9IFtdO1xyXG4gICAgLy8gbG9hZGRhdGEg5pe2IOWFiOiuvue9ruS4uuepuuaVsOe7hO+8jFxyXG4gICAgaXNMb2FkTmV3RGF0YVNldEVtcHR5ID0gZmFsc2U7XHJcbiAgICBnZXQgZGF0YSgpOiBhbnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZGF0YSh2YWw6IGFueVtdKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHZhbDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0xvYWROZXdEYXRhU2V0RW1wdHkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0Tm9kZVN0YXR1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhdXRvd2lkdGgg5pe277yM6KGo5aS05a695bqm5L6d5o2u5YaF5a655a695bqm5L2c5ZCM5q2l5aSE55CGXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YVN1Y2Nlc3MoKTtcclxuICAgIH1cclxuICAgIC8qKiDmoLnmja7lhoXlrrnoh6rliqjlrr3luqbvvIzpu5jorqQgZmFsc2U7XHJcbiAgICAgKiDmraTlsZ7mgKflvIDlkK/lkI7vvIzoh6rliqjliJflrr3lpLHmlYhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgYXV0b1dpZHRoID0gZmFsc2U7XHJcblxyXG4gICAgQENvbnRlbnRDaGlsZHJlbihGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZSkgdGVtcGxhdGVzOiBRdWVyeUxpc3Q8RmFycmlzVGVtcGxhdGVEaXJlY3RpdmU+O1xyXG4gICAgQENvbnRlbnRDaGlsZHJlbihUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmUpIGNvbHVtbnNSZWY6IFF1ZXJ5TGlzdDxUcmVlVGFibGVDb2x1bW5EaXJlY3RpdmU+O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2hlYWRlckJveCcpIGhlYWRlckJveDogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3Jlc2l6ZXJIZWxwZXInKSByZXNpemVySGVscGVyVkM6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdoZWFkZXJUYWJsZScpIGhlYWRlclRhYmxlOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnYm9keVRhYmxlJykgYm9keVRhYmxlOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0R3JvdXAnKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChQZXJmZWN0U2Nyb2xsYmFyQ29tcG9uZW50KSBwc1JlZj86IFBlcmZlY3RTY3JvbGxiYXJDb21wb25lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBoZWFkZXJDaGVja2JveENtcDogVHJlZVRhYmxlSGVhZGVyQ2hlY2tib3hDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdhbGxDaGVja2JveCcpIHNldCBhbGxDaGVja2JveChjb250ZW50OiBUcmVlVGFibGVIZWFkZXJDaGVja2JveENvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAgPSBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ25vZGVzcGFnZXJiYXInKSBub2Rlc1BhZ2VyQmFyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgQFZpZXdDaGlsZChGYXJyaXNDb250ZXh0TWVudURpcmVjdGl2ZSkgY3R4TWVudTogRmFycmlzQ29udGV4dE1lbnVEaXJlY3RpdmU7XHJcbiAgICAvKipcclxuICAgICAqIOihqOWktOaooeadv1xyXG4gICAgICovXHJcbiAgICBoZWFkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOihqOS9k+aooeadv1xyXG4gICAgICovXHJcbiAgICBib2R5VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgLyoqIOmAieS4remhuembhuWQiCAqL1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgZ2V0IHNlbGVjdGlvbnMoKTogVHJlZU5vZGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvbnM7XHJcbiAgICB9XHJcbiAgICBzZXQgc2VsZWN0aW9ucyh2YWxzOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgaWYgKHZhbHMgJiYgdmFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8g6L+H5ruk5o6J5pWw5o2u5rqQ5Lit5LiN5a2Y5Zyo6IqC54K5XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvbnMgPSB2YWxzLmZpbHRlcih0biA9PiB0biAmJiB0aGlzLmZpbmRSb3dOb2RlKHRuLmlkKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuX3NlbGVjdGlvbnMubWFwKHRuID0+IHRuLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoICE9PSB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgIChpZHMubGVuZ3RoID09PSB0aGlzLnNlbGVjdFZhbHVlcy5sZW5ndGggJiYgdGhpcy5kaWZmZXJlbmNlKGlkcywgdGhpcy5zZWxlY3RWYWx1ZXMpLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXNDaGFuZ2UuZW1pdChpZHMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzQ2hhbmdlLmVtaXQoW10pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmAieS4remhuee0ouW8lVxyXG4gICAgICovXHJcbiAgICBzZWxlY3RSb3dJbmRleCA9IC0xO1xyXG5cclxuICAgIC8qKiDpgInkuK3lvZPliY3ooYwgKi9cclxuICAgIHByaXZhdGUgX3NlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgIGdldCBzZWxlY3RlZFJvdygpOiBUcmVlTm9kZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkUm93O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWxlY3RlZFJvdyh0cmVlTm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZFJvdyA9IHRyZWVOb2RlO1xyXG4gICAgICAgIGlmICh0cmVlTm9kZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZSAhPT0gdHJlZU5vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSB0cmVlTm9kZS5pZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVDaGFuZ2UuZW1pdCh0cmVlTm9kZS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZUNoYW5nZS5lbWl0KG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqIOmSqemAieeahOiusOW9lembhuWQiCAqL1xyXG4gICAgcHJpdmF0ZSBfY2hlY2tlZHMgPSBbXTtcclxuICAgIGdldCBjaGVja2VkcygpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tlZHM7XHJcbiAgICB9XHJcbiAgICBzZXQgY2hlY2tlZHModHJlZU5vZGVzOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgaWYgKHRyZWVOb2RlcyAmJiB0cmVlTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrZWRzID0gdHJlZU5vZGVzLmZpbHRlcih0biA9PiB0aGlzLmZpbmRSb3dOb2RlKHRuLmlkKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuX2NoZWNrZWRzLm1hcCh0biA9PiB0bi5pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSB0aGlzLmNoZWNrVmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCAhPT0gdGhpcy5jaGVja1ZhbHVlcy5sZW5ndGggfHwgIChpZHMubGVuZ3RoID09PSB0aGlzLmNoZWNrVmFsdWVzLmxlbmd0aCAmJiB0aGlzLmRpZmZlcmVuY2UoaWRzLCB0aGlzLmNoZWNrVmFsdWVzKS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrZWRzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KFtdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pyA5aSW5bGCRElWXHJcbiAgICBjb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAvLyDorrDlvZXliJfmi5bliqjliY3nmoTkvY3nva5cclxuICAgIGxhc3RSZXNpemVySGVscGVyWDogbnVtYmVyO1xyXG5cclxuICAgIHNlYXJjaERhdGEgPSB7IGZpZWxkOiAnKicsIHZhbHVlOiAnJyB9O1xyXG5cclxuICAgIHNjb3JsbEJvZHlIZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgICBzZWFyY2hIYW5kbGU6IFNlYXJjaEhhbmRsZTtcclxuICAgIHNlYXJjaEJ1dHRvblRleHQgPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvaT4nO1xyXG4gICAgLyoqIOaYvuekuuafpeivouW3peWFt+adoSAqL1xyXG4gICAgc2hvd0ZpbmRJbnB1dCA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgaXNEYXRhQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIHNjcm9sbExvYWRlcjogVmlydHVhbGl6ZWRMb2FkZXJTZXJ2aWNlO1xyXG4gICAgdG9wSGlkZUhlaWdodCA9IDA7XHJcbiAgICBib3R0b21IaWRlSGVpZ2h0ID0gMDtcclxuICAgIHN0YXRlID0ge1xyXG4gICAgICAgIHNlYXJjaFJvd05vZGVzOiBudWxsLFxyXG4gICAgICAgIHNlYXJjaGVkOiBmYWxzZSxcclxuICAgICAgICByb3dOb2RlczogW10sXHJcbiAgICAgICAgc2Nyb2xsWTogMCxcclxuICAgICAgICBzY3JvbGxYOiAwXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiDlvoXmn6Xor6LnmoTmlofmnKwgKi9cclxuICAgIGZpbmRWYWx1ZSA9ICcnO1xyXG4gICAgLyoqIOe7k+aenOaAu+aVsCAqL1xyXG4gICAgZmluZENvdW50ID0gMDtcclxuICAgIC8qKiDlvZPliY3ntKLlvJUgKi9cclxuICAgIGZpbmRDdXJyZW50ID0gMDtcclxuICAgIC8qKiDlrZjlgqjmlofmnKzmn6Xor6Lnu5PmnpwgKi9cclxuICAgIGZpbmRSZXN1bHQgPSBbXTtcclxuICAgIHByaXZhdGUgcm86IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGZpbmRLZXlzSGFuZGxlciA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9ob3RLZXlzOiBUVEhvdGtleXMgPSBudWxsO1xyXG4gICAgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHByaXZhdGUgaWRTZXJ2aWNlOiBJZFNlcnZpY2U7XHJcbiAgICBwcml2YXRlIHN0eWxlU2hlZXRJZCA9ICd0cmVldGFibGUtc3R5bGUtJztcclxuICAgIHByaXZhdGUgc3R5bGVFbGVtZW50O1xyXG5cclxuICAgIC8vIOiwg+aVtOaooeadv++8jOatpOWxnuaAp+S7heS4uuW4ruWKqeS4reeahOagkee7hOS7tlxyXG4gICAgZmFzdCA9IGZhbHNlO1xyXG5cclxuICAgIHBhZ2luYXRpb25PcHRpb25zOiBQYWdpbmF0aW9uSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgaWQ6ICdGYXJyaXMtVHJlZVRhYmxlLVBhZ2luYXRpb25fJyxcclxuICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgIHBhZ2VMaXN0OiB0aGlzLnBhZ2VMaXN0LFxyXG4gICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgIH07XHJcblxyXG4gICAgc2VsZWN0Tm9kZUNoYW5nZWRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcclxuICAgIHByaXZhdGUgX1VVSUQgPSAnJztcclxuICAgIC8vIOaYr+WQpuacieWbuuWumuWIl1xyXG4gICAgZml4ZWRDb2x1bW5zID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHByaXZhdGUgZmFycmlzSW5zdGFuY2VzOiBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgZGlmZmVyZW5jZSA9IChmaXJzdDogYW55W10sIHNlY29uZDogYW55W10pID0+IGZpcnN0LmZpbHRlcihpdGVtID0+ICFzZWNvbmQuc29tZShzZWNvbmRJdGVtID0+IHNlY29uZEl0ZW0gPT0gaXRlbSkpO1xyXG4gICAgcHJpdmF0ZSBkZWJ1Z1NlcjogRGVidWdTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGZpbHRlclJvd0NvbmRpdGlvbnMgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIHR0U2VydmljZTogVHJlZXRhYmxlU2VydmljZSwgcHVibGljIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHB1YmxpYyByZXNpemVTZXI6IFJlc2l6ZVNlcnZpY2UsIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICBwdWJsaWMgdXRpbHM6IENvbW1vblV0aWxzLCBwdWJsaWMgY29sRm9ybWF0U2VyOiBDb2x1bW5Gb3JtYXRTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgc2hvcnRjdXRzOiBUVEhvdGtleXMsIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hIYW5kbGUgPSBuZXcgU2VhcmNoSGFuZGxlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsTG9hZGVyID0gbmV3IFZpcnR1YWxpemVkTG9hZGVyU2VydmljZSh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLl9ob3RLZXlzID0gdGhpcy5pbmplY3Rvci5nZXQoVFRIb3RrZXlzLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSwgbnVsbCk7XHJcbiAgICAgICAgICAgIHRoaXMuaWRTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoSWRTZXJ2aWNlLCBudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMgPSB0aGlzLmluamVjdG9yLmdldChGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pZFNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fVVVJRCA9IHRoaXMuaWRTZXJ2aWNlLnV1aWQoKTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZVNoZWV0SWQgKz0gdGhpcy5pZFNlcnZpY2UudXVpZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX1VVSUQgPSAoJycgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZVNoZWV0SWQgKz0gKCcnICsgTWF0aC5yYW5kb20oKSkuc2xpY2UoMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnR0U2VydmljZSA9IG5ldyBUcmVldGFibGVTZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdG9yLmdldChEZWJ1Z1NlcnZpY2UsIG51bGwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnU2VyLnVzZURlYnVnTW9kZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3cml0ZUNvbnNvbGUobXNnLCB0eXBlOiAnaW5mbyd8J2xvZyd8J3dhcm4nfCdlcnJvcicgPSAnd2FybicpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnU2VyW3R5cGVdKG1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2hlY2tPcHRvbnMoKSB7XHJcbiAgICAgICAgLy8g5ZCv55So5pWw5o2u5oqY6KGM5ZCO77yM6Jma5ouf5riy5p+T5Yqf6IO95aSx5pWIXHJcbiAgICAgICAgaWYgKCF0aGlzLm5vd3JhcCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpcnR1YWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZVNldFNpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTY29ybGxCb2R5SGVpZ2h0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm11bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja09uU2VsZWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RPbkNoZWNrID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTb3J0Q29sdW1uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU29ydENvbHVtbiA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZml0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnZi11dGlscy1maWxsLWZsZXgtY29sdW1uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQgfHwgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhwYXJlbnRFbCwgJ2YtdXRpbHMtZmlsbCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShwYXJlbnRFbCwgJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlQ2xpY2tOb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlQ2xpY2tOb2RlID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuYmVmb3JlQ2hlY2tBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVDaGVja0FsbCA9ICgpID0+IG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZVVuQ2hlY2tBbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVVbkNoZWNrQWxsID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5hdXRvV2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5maXRDb2x1bW5zID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXphYmxlQ29sdW1ucyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkUm93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRSb3cgPSAoKSA9PiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWFyY2hBbnlGaWVsZCAmJiB0aGlzLnNlYXJjaEZpZWxkcyAmJiB0aGlzLnNlYXJjaEZpZWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhLmZpZWxkID0gdGhpcy5zZWFyY2hGaWVsZHNbMF0ubGFiZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSAnVHJlZXRhYmxlLScgKyB0aGlzLl9VVUlEO1xyXG4gICAgICAgIC8vIOWIm+W7uiBzdHlsZXNoZWV0XHJcbiAgICAgICAgdGhpcy5zdHlsZUVsZW1lbnQgPSB0aGlzLnV0aWxzLmNyZWF0ZVN0eWxlU2hlZXQodGhpcy5zdHlsZVNoZWV0SWQpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGVja09wdG9ucygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uZ1pvbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJpZXMgJiYgZW50cmllc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gIGVudHJpZXNbMF0udGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpdCAmJiB0YXJnZXRbJ29mZnNldFBhcmVudCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoeyB3aWR0aCwgaGVpZ2h0OiB0aGlzLnNob3dCb3JkZXI/IGhlaWdodCAtIDIgOiBoZWlnaHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6KGo5Y2V5YiH5o2i5ZCO77yM5aaC5p6c5pyJ6YCJ5Lit6KGM77yM5YiZ5pu05paw5rua5Yqo5p2h5L2N572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Tm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm8ub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucm8pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvLnVub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yby5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluZEtleXNIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZEtleXNIYW5kbGVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZVN0eWxlU2hlZXQodGhpcy5zdHlsZVNoZWV0SWQpO1xyXG4gICAgICAgIHRoaXMuc3R5bGVFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmFycmlzSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFycmlzSW5zdGFuY2VzLmRlc3Ryb3kodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5kYXRhICYmICFjaGFuZ2VzLmRhdGEuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNEYXRhQ2hhbmdlZCA9IGNoYW5nZXMuZGF0YS5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMuZGF0YS5wcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMubXVsdGlTZWxlY3QgJiYgIWNoYW5nZXMubXVsdGlTZWxlY3QuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VsZWN0ID0gIWNoYW5nZXMubXVsdGlTZWxlY3QuY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0T25DaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrT25TZWxlY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5kaXNhYmxlZCAmJiAhY2hhbmdlcy5kaXNhYmxlZC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5ob3ZlcmVkID0gIWNoYW5nZXMuZGlzYWJsZWQuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlRmluZFRleHQgJiYgIWNoYW5nZXMuZW5hYmxlRmluZFRleHQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmluZFRleHQoY2hhbmdlcy5lbmFibGVGaW5kVGV4dC5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0VmFsdWUgJiYgIWNoYW5nZXMuc2VsZWN0VmFsdWUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZShjaGFuZ2VzLnNlbGVjdFZhbHVlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNlbGVjdFZhbHVlcyAmJiAhY2hhbmdlcy5zZWxlY3RWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZXMoY2hhbmdlcy5zZWxlY3RWYWx1ZXMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuY2hlY2tWYWx1ZXMgJiYgIWNoYW5nZXMuY2hlY2tWYWx1ZXMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZE5vZGVzKGNoYW5nZXMuY2hlY2tWYWx1ZXMuY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnBhZ2VJbmRleCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnBhZ2VJbmRleC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZVNpemUgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlU2l6ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLnBhZ2VTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucGFnZUxpc3QgIT09IHVuZGVmaW5lZCAmJiAhY2hhbmdlcy5wYWdlTGlzdC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3RcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy50b3RhbCAhPT0gdW5kZWZpbmVkICYmICFjaGFuZ2VzLnRvdGFsLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnBhZ2luYXRpb25PcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZml0Q29sdW1ucyAmJiAhY2hhbmdlcy5maXRDb2x1bW5zLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlV2lkdGgodGhpcy5hbGxDb2x1bW5zV2lkdGgoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy5jb2x1bW5zICYmICFjaGFuZ2VzLmNvbHVtbnMuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb2x1bW5PcHRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dCb3JkZXIgJiYgIWNoYW5nZXMuc2hvd0JvcmRlci5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5yZVNldFNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLmlzRGF0YUNoYW5nZWQpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sb2FkZWREYXRhLmVtaXQoKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5pc0RhdGFDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMucHNSZWYpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi51cGRhdGUoKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaXRlbS5nZXRUeXBlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hlYWRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJUZW1wbGF0ZSA9IGl0ZW0udGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdib2R5JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvZHlUZW1wbGF0ZSA9IGl0ZW0udGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uc1JlZi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy50dGMyY29sdW1ucyh0aGlzLmNvbHVtbnNSZWYpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zUmVmLmNoYW5nZXMuc3Vic2NyaWJlKChkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMudHRjMmNvbHVtbnMoZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXJyaXMtdHJlZXRhYmxlJyk7XHJcbiAgICAgXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclNob3J0Y3V0cygpO1xyXG5cclxuICAgICAgICAvLyBhdXRvd2lkdGgg5pe277yM6KGo5aS05a695bqm5L6d5o2u5YaF5a655a695bqm5L2c5ZCM5q2l5aSE55CGXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuICAgICAgICB0aGlzLnNldFJpZ2h0Rml4ZWRDb2x1bW5TaGFkb3coKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWwgJiYgdGhpcy5mYXJyaXNJbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5mYXJyaXNJbnN0YW5jZXMuYWRkKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlcyhbYCMke3RoaXMuaWR9IC5mYXJyaXMtdHJlZXRhYmxlIC5mYXJyaXMtdHJlZXRhYmxlLXRib2R5IHRkIHtwYWRkaW5nOiAuMjVyZW0gMC43NXJlbTt9YF0sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWFvOWuueaXp+eJiOiuvuiuoeWZqCAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuZml0ICYmIHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAnRElWJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQubm9kZU5hbWUgPT09ICdBUFAtREctVFJFRS1HUklEJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGl2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZERhdGFTdWNjZXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkRGF0YVN1Y2Nlc3MoKSB7XHJcbiAgICAgICAgdGltZXIodGhpcy5sb2FkZWRUaW1lcikucGlwZShcclxuICAgICAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXHJcbiAgICAgICAgKS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkZWREYXRhLmVtaXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHNldE5ld0NvbHVtbnNXaWR0aCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0b1dpZHRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3Q29sV2lkdGg6IGFueSA9IHt9O1xyXG4gICAgICAgIGxldCBoZWFkZXJDZWxscyA9IFtdO1xyXG4gICAgICAgIGxldCBmaXJzdFJvd0NlbGxzID0gW107XHJcbiAgICAgICAgLy8gbGV0IGNvbGdyb3VwcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dIZWFkZXIgJiYgdGhpcy5oZWFkZXJUYWJsZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJDZWxscyA9IEFycmF5LmZyb208SFRNTEVsZW1lbnQ+KHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VyaWFsaXplZFZhbHVlICYmIHRoaXMuc2VyaWFsaXplZFZhbHVlLmxlbmd0aCAmJiB0aGlzLmJvZHlUYWJsZSkge1xyXG4gICAgICAgICAgICBmaXJzdFJvd0NlbGxzID0gQXJyYXkuZnJvbTxIVE1MRWxlbWVudD4odGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0cicpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykpO1xyXG4gICAgICAgICAgICAvLyBjb2xncm91cHMgPSB0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NvbGdyb3VwJykucXVlcnlTZWxlY3RvckFsbCgnY29sJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaXJzdFJvd0NlbGxzLmZvckVhY2goKHRkOiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IHRkLmdldEF0dHJpYnV0ZSgnZmllbGQnKTtcclxuICAgICAgICAgICAgbGV0IGNvbFdpZHRoID0gdGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgudG9GaXhlZCgyKTtcclxuICAgICAgICAgICAgbmV3Q29sV2lkdGhbZmllbGROYW1lXSA9IGNvbFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmZpZWxkID09PSBmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoY29sICYmIGNvbC53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xXaWR0aCA9IGNvbFdpZHRoID4gY29sLndpZHRoID8gY29sV2lkdGggOiBjb2wud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRkLnN0eWxlLm1pbldpZHRoID0gY29sV2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICBoZWFkZXJDZWxsc1tpbmRleF0uc3R5bGUud2lkdGggPSBjb2xXaWR0aCArICdweCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY29sV2lkdGhUb3RhbCA9IHRoaXMuYWxsQ29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5zZXRUYWJsZVdpZHRoKGNvbFdpZHRoVG90YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbHVtbklzVmlzaWJsZShjb2wpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50dFNlcnZpY2UuY29sdW1uSXNWaXNpYmxlKGNvbCwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29sdW1uQ3NzTmFtZShuOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gYCMke3RoaXMuaWR9IC50cmVldGFibGUtY2VsbFtmaWVsZD1cIiR7bi5maWVsZH1cIl0sICMke3RoaXMuaWR9IC50cmVldGFibGUtaGVhZGVyLWNlbGxbZmllbGQ9XCIke24uZmllbGR9XCJdOm5vdCguZ3JvdXAtaGVhZGVyLWNlbGwpYDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0dyb3VwQ29sdW1ucygpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMuZ3JvdXBDb2x1bW5zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgd2hpbGUoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBpZHMgPSB0aGlzLmdyb3VwQ29sdW1uc1tpXS5tYXAobiA9PiBuLnBhcmVudElkKTtcclxuICAgICAgICAgICAgaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGlkcykpO1xyXG4gICAgICAgICAgICBpZHMubWFwKGlkID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29scyA9IHRoaXMuZ3JvdXBDb2x1bW5zW2ldLmZpbHRlcihuID0+IG4ucGFyZW50SWQgPT0gaWQpLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhRmllbGQgPSB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IG4uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhRmllbGQgfHwgbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNoaWxkQ29scy5yZWR1Y2UoKHIsYykgPT4geyByZXR1cm4gcis9Yy53aWR0aCB9LCAwKSxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBjaGlsZENvbHNbMF0ubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogY2hpbGRDb2xzW2NoaWxkQ29scy5sZW5ndGggLSAxXS5yaWdodCB8fCAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KS5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgLSAxID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcENvbCA9IHRoaXMuZ3JvdXBDb2x1bW5zW2ktMV0uZmluZChwYyA9PiBwYy5pZCA9PSBwLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhRmllbGQgPSB0aGlzLmNvbHVtbnMuZmluZChjID0+IGMuaWQgPT09IHAuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBDb2wgPSBkYXRhRmllbGQgfHwgcENvbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcENvbC53aWR0aCA9IHAud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBDb2wuZml4ZWQgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwQ29sLmxlZnQgPSBwLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwQ29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBDb2wucmlnaHQgPSBwLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGktLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5oyJ5Zu65a6a5YiX55qE6aG65bqP5o6S5bqPXHJcbiAgICBwcml2YXRlIHNvcnRDb2x1bW5zQnlGaXhlZCh1cGRhdGVDb2x1bW5zID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGZpeGVkTGVmdCA9IHRoaXMuY29sdW1ucy5maWx0ZXIobiA9PiBuLmZpeGVkID09PSAnbGVmdCcpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVkQ2VudGVyID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+ICFuLmZpeGVkIHx8IG4uZml4ZWQgPT09ICdjZW50ZXInKTtcclxuICAgICAgICBjb25zdCBmaXhlZFJpZ2h0ID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG5cclxuICAgICAgICBpZiAoZml4ZWRMZWZ0ICYmIGZpeGVkTGVmdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRMZWZ0LmZvckVhY2goKG4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLmxlZnQgPSBmaXhlZExlZnQucmVkdWNlKChyLCBjLCBpKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgKz0gYy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5sZWZ0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4ZWRSaWdodCAmJiBmaXhlZFJpZ2h0Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgbGV0IHJpZ2h0V2lkdGhUb3RhbCA9IGZpeGVkUmlnaHQucmVkdWNlKChyLCBjKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gciArIGMud2lkdGg7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgZml4ZWRSaWdodC5mb3JFYWNoKChuLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmlnaHRXaWR0aFRvdGFsIC09IG4ud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBuLnJpZ2h0ID0gcmlnaHRXaWR0aFRvdGFsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZUNvbHVtbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gZml4ZWRMZWZ0LmNvbmNhdChmaXhlZENlbnRlcikuY29uY2F0KGZpeGVkUmlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrQ29sdW1uT3B0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IGNzc1J1bGVzID0gW107XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOWQr+eUqOWIhumhteWKoOi9veWtkOiKgueCuVxyXG4gICAgICAgIGlmICh0aGlzLnBhZ2luYXRpb25Gb3JDaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjb25zdCBwYWdlckJhckNvbDogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IE5PREVTX1BBR0VSX0NPTFVNTl9GSUVMRCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxNjAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5ub2Rlc1BhZ2VyQmFyLFxyXG4gICAgICAgICAgICAgICAgcm93c3BhbjogMSxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlR3JvdXBIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwQ29sdW1uc1swXVt0aGlzLmdyb3VwQ29sdW1uc1swXS5sZW5ndGggLSAxXS5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VyQmFyQ29sLmZpeGVkID0gJ3JpZ2h0JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhZ2VyQmFyQ29sLnJvd3NwYW4gPSB0aGlzLmdyb3VwQ29sdW1ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwQ29sdW1uc1swXS5wdXNoKHBhZ2VyQmFyQ29sKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaChwYWdlckJhckNvbCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0Q29sdW1uc0J5Rml4ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuLnZpc2libGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG5bJ2hhbGlnbiddKSB7XHJcbiAgICAgICAgICAgICAgICBuLmhBbGlnbiA9IG5bJ2hhbGlnbiddO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobi53aWR0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuLndpZHRoID0gMTAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIW4uaWQpIHtcclxuICAgICAgICAgICAgICAgIG4uaWQgPSAndHJlZXRhYmxlLWhlYWRlci0nICsgKG4uZmllbGQgfHwgaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sV2lkdGhUb3RhbCA9IHRoaXMuYWxsQ29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgbGV0IGZpeGVkQ29scyA9IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG4gICAgICAgIGlmIChmaXhlZFJpZ2h0Q29sdW1ucyAmJiBmaXhlZFJpZ2h0Q29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZml4ZWRSaWdodENvbHVtbnNbMF1bJ3JpZ2h0U2hhZG93Q29sJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBmaXhlZFJpZ2h0Q29sdW1uc1tmaXhlZFJpZ2h0Q29sdW1ucy5sZW5ndGggLSAxXVsnbGFzdENvbHVtbiddID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5zICYmIHRoaXMuY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uc1t0aGlzLmNvbHVtbnMubGVuZ3RoIC0gMV1bJ2xhc3RDb2x1bW4nXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZpeGVkTGVmdENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ2xlZnQnKTtcclxuICAgICAgICBpZiAoZml4ZWRMZWZ0Q29sdW1ucyAmJiBmaXhlZExlZnRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmaXhlZExlZnRDb2x1bW5zW2ZpeGVkTGVmdENvbHVtbnMubGVuZ3RoIC0gMV1bJ2xlZnRTaGFkb3dDb2wnXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmaXhlZENvbHMgPSB0aGlzLnNldENlbGxXaWR0aENzcyhjb2xXaWR0aFRvdGFsLCBmaXhlZENvbHMsIGNzc1J1bGVzKTtcclxuICAgICAgICB0aGlzLnNldFRhYmxlV2lkdGgoY29sV2lkdGhUb3RhbCk7XHJcblxyXG4gICAgICAgIHRoaXMuZml4ZWRDb2x1bW5zID0gISFmaXhlZENvbHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDZWxsV2lkdGhDc3MoY29sV2lkdGhUb3RhbDogYW55LCBmaXhlZENvbHM6IG51bWJlciwgY3NzUnVsZXM6IGFueVtdKSB7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaCgobiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5jb2x1bW5Jc1Zpc2libGUobik7XHJcbiAgICAgICAgICAgIGNvbnN0IHJ1bGVOYW1lID0gdGhpcy5jb2x1bW5Dc3NOYW1lKG4pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3NzUnVsZSA9IHRoaXMudXRpbHMuZ2V0Q3NzUnVsZShydWxlTmFtZSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICBpZiAoIWNzc1J1bGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZWNzcyA9IHJ1bGVOYW1lICsgJyB7ICc7XHJcbiAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBpc1Zpc2libGUgPyAnJyA6ICdkaXNwbGF5OiBub25lOyc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlY3NzICs9IGB3aWR0aDogJHsobi53aWR0aCAvIGNvbFdpZHRoVG90YWwgKiAxMDApLnRvRml4ZWQoMil9JTtgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBgd2lkdGg6ICR7bi53aWR0aH1weDtgO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBgbGVmdDogJHtuLmxlZnR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRDb2xzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSBgcmlnaHQ6ICR7bi5yaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXhlZENvbHMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzdHlsZWNzcyArPSAnfSc7XHJcbiAgICAgICAgICAgICAgICBjc3NSdWxlcy5wdXNoKHN0eWxlY3NzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNzc1J1bGUuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/ICcnIDogJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNzc1J1bGUuc3R5bGUud2lkdGggPSBgJHsobi53aWR0aCAvIGNvbFdpZHRoVG90YWwgKiAxMDApLnRvRml4ZWQoMil9JWA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNzc1J1bGUuc3R5bGUud2lkdGggPSBgJHtuLndpZHRofXB4YDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3NSdWxlLnN0eWxlLmxlZnQgPSBgJHtuLmxlZnR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobi5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzUnVsZS5zdHlsZS5yaWdodCA9IGAke24ucmlnaHR9cHhgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VHcm91cEhlYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9XaWR0aCA9IGZhbHNlOyAgLy8g5aSa6KGo5aS05ZCv55So5ZCO77yM6Ieq5Yqo5YiX5a695aSx5pWIIFRGUyA0OTYwODhcclxuICAgICAgICAgICAgdGhpcy5jaGVja0dyb3VwQ29sdW1ucygpO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ3JvdXBDb2x1bW5zLmxlbmd0aCAtIDI7XHJcbiAgICAgICAgICAgIHdoaWxlIChpID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwSGVhZGVyQ29sQ3NzZXMgPSB0aGlzLmdyb3VwQ29sdW1uc1tpXS5maWx0ZXIoY29sID0+ICFjb2wuZmllbGQpLm1hcChjb2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBncm91cENvbENzc05hbWUgPSBgIyR7Y29sLmlkfXsgd2lkdGg6ICR7Y29sLndpZHRofXB4YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmZpeGVkID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29sQ3NzTmFtZSArPSAnO2xlZnQ6JyArIGNvbC5sZWZ0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbC5maXhlZCA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb2xDc3NOYW1lICs9ICc7cmlnaHQ6JyArIGNvbC5yaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBncm91cENvbENzc05hbWUgKz0gJ30nO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlscy5hcHBlbmRDc3NSdWxlczIoZ3JvdXBIZWFkZXJDb2xDc3NlcywgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKGNzc1J1bGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKGNzc1J1bGVzLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaXhlZENvbHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRUYWJsZVdpZHRoKGNvbFdpZHRoVG90YWw6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlclRhYmxlICYmIHRoaXMuYm9keVRhYmxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXRDb2x1bW5zICYmICF0aGlzLmF1dG9GaXRDb2x1bW5zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlclRhYmxlLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtjb2xXaWR0aFRvdGFsfXB4YDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtjb2xXaWR0aFRvdGFsfXB4YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyVGFibGUubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhbGxDb2x1bW5zV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5yZWR1Y2UoKHIsIGMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sdW1uSXNWaXNpYmxlKGMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gciArIGMud2lkdGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5wYWdlQ2hhbmdlZC5lbWl0KCRldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25QYWdlU2l6ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlZC5lbWl0KCRldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUGFnZUluZm8ocGFnZUluZm86IHsgcGFnZUluZGV4PzogbnVtYmVyLCBwYWdlU2l6ZT86IG51bWJlciwgdG90YWw/OiBudW1iZXIsIHBhZ2VMaXN0PzogbnVtYmVyW10gfSkge1xyXG4gICAgICAgIGlmIChwYWdlSW5mbyAmJiBPYmplY3Qua2V5cyhwYWdlSW5mbykubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAocGFnZUluZm8udG90YWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgb2JqLnRvdGFsSXRlbXMgPSBwYWdlSW5mby50b3RhbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VJbmZvLnBhZ2VJbmRleCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouY3VycmVudFBhZ2UgPSBwYWdlSW5mby5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlSW5mby5wYWdlU2l6ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmouaXRlbXNQZXJQYWdlID0gcGFnZUluZm8ucGFnZVNpemU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYWdlSW5mby5wYWdlTGlzdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBvYmoucGFnZUxpc3QgPSBwYWdlSW5mby5wYWdlTGlzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5wYWdpbmF0aW9uT3B0aW9ucywgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgaW5pdFBhZ2luYXRpb25PcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiAnRmFycmlzLVRyZWVUYWJsZS1QYWdpbmF0aW9uXycgKyB0aGlzLl9VVUlELFxyXG4gICAgICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmRleCxcclxuICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3QsXHJcbiAgICAgICAgICAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWwsXHJcbiAgICAgICAgICAgIHJlbW90ZTogdGhpcy5wYWdlck9uU2VydmVyXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROb2RlVGV4dChjb2w6IFRyZWVUYWJsZUNvbHVtbiwgcm93ZGF0YSwgZmFzdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKGNvbC5pc011bHRpbGluZ3VhbEZpZWxkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoY29sLmZpZWxkLCByb3dkYXRhKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxlU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxlSWQgPSB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQgfHwgJ3poLUNIUyc7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHZhbCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxbbG9jYWxlSWRdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUoY29sLmZpZWxkLCByb3dkYXRhLCAhZmFzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdE5vZGVTdGF0dXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja1ZhbHVlcyAmJiB0aGlzLmNoZWNrVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTm9kZXModGhpcy5jaGVja1ZhbHVlcywgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RWYWx1ZXMgJiYgdGhpcy5zZWxlY3RWYWx1ZXMubGVuZ3RoICYmICF0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVzKHRoaXMuc2VsZWN0VmFsdWVzLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZSh0aGlzLnNlbGVjdFZhbHVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOazqOWGjOW/q+aNt+mUriAqL1xyXG4gICAgcHJpdmF0ZSByZWdpc3RlclNob3J0Y3V0cygpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93RmlsdGVyQmFyICYmIHRoaXMuX2hvdEtleXMpIHtcclxuICAgICAgICAgICAgdGhpcy5faG90S2V5cy5hZGRTaG9ydGN1dCh7IGtleXM6ICdlbnRlcicsIGVsZW1lbnQ6IHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94Lm5hdGl2ZUVsZW1lbnQgfSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWFyY2goKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldEZpbmRUZXh0KHRoaXMuZW5hYmxlRmluZFRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0RmluZFRleHQoZW5hYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlRmluZFRleHQgPSBlbmFibGU7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRmluZFRleHQgJiYgdGhpcy5faG90S2V5cykge1xyXG4gICAgICAgICAgICAvLyDmn6Xor6Llt6XlhbfmnaFcclxuICAgICAgICAgICAgdGhpcy5maW5kS2V5c0hhbmRsZXIgPSB0aGlzLl9ob3RLZXlzLmFkZFNob3J0Y3V0KHsga2V5czogJ2NvbnRyb2wuc2hpZnQuZicgfSkuc3Vic2NyaWJlKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVGaW5kVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbmRJbnB1dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dGaW5kSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbmRJbnB1dCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZmluZEtleXNIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRLZXlzSGFuZGxlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kS2V5c0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q3VzdG9tQ2xzKHJvd05vZGU6IFJvd05vZGUsIGZpZWxkOiBzdHJpbmcgPSAnJywgY2xzVHlwZTogJ3JvdycgfCAnY2VsbCcgPSAncm93Jykge1xyXG4gICAgICAgIGNvbnN0IGNscyA9IHt9O1xyXG4gICAgICAgIGxldCBmbiA9IHRoaXMucm93U3R5bGVyO1xyXG4gICAgICAgIGlmIChjbHNUeXBlID09PSAnY2VsbCcpIHtcclxuICAgICAgICAgICAgZm4gPSB0aGlzLmNlbGxTdHlsZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZm4pIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93Q2xzID0gZm4ocm93Tm9kZS5ub2RlLCBmaWVsZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dDbHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBhcnJjbHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygcm93Q2xzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmNscyA9IFtyb3dDbHNdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyb3dDbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmNscyA9IHJvd0NscztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFycmNscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3dDbHNPYmogPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBhcnJjbHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Q2xzT2JqWycnICsgY10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9jbHMgPSB7IC4uLnJvd0Nsc09iaiwgLi4uY2xzIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jbHM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dDbHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNscztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Um93Q2xzKHJvd05vZGU6IFJvd05vZGUsIGZpZWxkPzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VzdG9tQ2xzKHJvd05vZGUsICdyb3cnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZWxsQ2xzKHJvd05vZGU6IFJvd05vZGUsIGZpZWxkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXN0b21DbHMocm93Tm9kZSwgZmllbGQsICdjZWxsJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVhbENvbFdpZHRoKGN1cnJlbnRDb2w6IFRyZWVUYWJsZUNvbHVtbikge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbHVtbnMgJiYgdGhpcy5jb2x1bW5zLmxlbmd0aCAmJiB0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sV2lkdGhUb3RhbCA9IHRoaXMuY29sdW1ucy5yZWR1Y2UoKHIsIGMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICsgKHRoaXMuY29sdW1uSXNWaXNpYmxlKGMpICYmIChyLmZpZWxkICE9PSBOT0RFU19QQUdFUl9DT0xVTU5fRklFTEQgIHx8IHIuZml4ZWRXaWR0aCk/IGMud2lkdGggOiAwKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2x1bW5Jc1Zpc2libGUoY3VycmVudENvbCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICggY3VycmVudENvbC5maWVsZCAhPT0gTk9ERVNfUEFHRVJfQ09MVU1OX0ZJRUxEICYmICAhY3VycmVudENvbC5maXhlZFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjdXJyZW50Q29sLndpZHRoIC8gY29sV2lkdGhUb3RhbCAqIDEwMCkudG9GaXhlZCgyKSArICclJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjdXJyZW50Q29sLndpZHRoIHx8IDEyMCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRDb2wud2lkdGggKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnKVxyXG4gICAgb25SZXNpemVkKCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplU2VyLndpbmRvd1Jlc2l6ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFJpZ2h0Rml4ZWRDb2x1bW5TaGFkb3coKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgcHMgPSAodGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYgYXMgYW55KS5pbnN0YW5jZTtcclxuICAgICAgICAgICAgaWYgKCFwcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY29udGFpbmVyV2lkdGgsIHNjcm9sbGJhclhMZWZ0LCBjb250ZW50V2lkdGggfSA9IHBzO1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyV2lkdGggKyBzY3JvbGxiYXJYTGVmdCA8IGNvbnRlbnRXaWR0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdyaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBgIyR7dGhpcy5pZH0uZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNgO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRDb2x1bW5zICYmIGZpeGVkUmlnaHRDb2x1bW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gYCR7cnVsZU5hbWV9IFtyLXR0LXNoYWRvdy1jb2xdOjpiZWZvcmVgO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q1NTUnVsZSA9IGAke2ZpeGVkUmlnaHRDc3NSdWxlS2V5fXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzojZDlkOWQ5IC0xMnB4IDBweCA4cHggLTEycHggaW5zZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoW3JpZ2h0Q1NTUnVsZV0sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldEZpeGVkQ29sdW1uU2hhZG93KHgsIGUpIHtcclxuICAgICAgICBjb25zdCBmaXhlZExlZnRDb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4uZml4ZWQgPT09ICdsZWZ0Jyk7XHJcbiAgICAgICAgY29uc3QgZml4ZWRSaWdodENvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKG4gPT4gbi5maXhlZCA9PT0gJ3JpZ2h0Jyk7XHJcbiAgICAgICAgY29uc3QgcnVsZU5hbWUgPSBgIyR7dGhpcy5pZH0uZi10cmVldGFibGUtLWZpeGVkLWNvbHVtbnNgO1xyXG4gICAgICAgIGxldCBmaXhlZExlZnRDc3NSdWxlS2V5ID0gJyc7XHJcbiAgICAgICAgbGV0IGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gJyc7XHJcbiAgICAgICAgbGV0IGxlZnRDU1NSdWxlID0gJyc7XHJcbiAgICAgICAgbGV0IHJpZ2h0Q1NTUnVsZSA9ICcnO1xyXG4gICAgICAgIGlmIChmaXhlZExlZnRDb2x1bW5zICYmIGZpeGVkTGVmdENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RGaXhlZExlZnRDb2x1bW4gPSBmaXhlZExlZnRDb2x1bW5zW2ZpeGVkTGVmdENvbHVtbnMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGZpeGVkTGVmdENzc1J1bGVLZXkgPSBgJHtydWxlTmFtZX0gW2ZpZWxkPVwiJHtsYXN0Rml4ZWRMZWZ0Q29sdW1uLmZpZWxkfVwiXTo6YWZ0ZXJgO1xyXG4gICAgICAgICAgICBsZWZ0Q1NTUnVsZSA9IGAke2ZpeGVkTGVmdENzc1J1bGVLZXl9e1xyXG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzojZDlkOWQ5IDEycHggMHB4IDhweCAtMTJweCBpbnNldDtcclxuICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4ZWRSaWdodENvbHVtbnMgJiYgZml4ZWRSaWdodENvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZpeGVkUmlnaHRDc3NSdWxlS2V5ID0gYCR7cnVsZU5hbWV9IFtyLXR0LXNoYWRvdy1jb2xdOjpiZWZvcmVgO1xyXG4gICAgICAgICAgICByaWdodENTU1J1bGUgPSBgJHtmaXhlZFJpZ2h0Q3NzUnVsZUtleX17XHJcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiNkOWQ5ZDkgLTEycHggMHB4IDhweCAtMTJweCBpbnNldDtcclxuICAgICAgICAgICAgfWA7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHggPT09IDApIHtcclxuICAgICAgICAgICAgLy8g56e76Zmk5bem5L6n5Zu65a6a5YiX6Zi05b2x5qC35byPXHJcbiAgICAgICAgICAgIGlmIChmaXhlZExlZnRDc3NSdWxlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZUNzc1J1bGUoZml4ZWRMZWZ0Q3NzUnVsZUtleSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgoeCArIGUuc3JjRWxlbWVudC5vZmZzZXRXaWR0aCkudG9GaXhlZCgpID09IGUuc3JjRWxlbWVudC5zY3JvbGxXaWR0aCkge1xyXG4gICAgICAgICAgICAvLyDnp7vpmaTlj7PliJnlm7rlrprliJfpmLTlvbHmoLflvI9cclxuICAgICAgICAgICAgaWYgKGZpeGVkUmlnaHRDc3NSdWxlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnJlbW92ZUNzc1J1bGUoZml4ZWRSaWdodENzc1J1bGVLZXksIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOa3u+WKoOW3puWPs+WbuuWumuWIl+agt+W8j1xyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgaWYgKGxlZnRDU1NSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChsZWZ0Q1NTUnVsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyaWdodENTU1J1bGUpIHtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKHJpZ2h0Q1NTUnVsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoYXJyLCB0aGlzLnN0eWxlRWxlbWVudC5zaGVldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2Nyb2xsWChlOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93SGVhZGVyICYmIHRoaXMuaGVhZGVyQm94KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBlLnNyY0VsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zY3JvbGxYID0geDtcclxuICAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmhlYWRlckJveC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyksICd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlM2QoLSR7eH1weCwgMHB4LCAwcHgpYCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQm94Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsTGVmdCA9IHg7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEZpeGVkQ29sdW1uU2hhZG93KHgsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblNjcm9sbFkoZTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gZS50YXJnZXQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckRhdGEoc2Nyb2xsVG9wKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJEYXRhKHNjcm9sbHRvcDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCB0b3BIaWRlSGVpZ2h0LCBib3R0b21IaWRlSGVpZ2h0IH0gPSB0aGlzLnNjcm9sbExvYWRlci5nZXRSb3dOb2RlcyhzY3JvbGx0b3ApO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2Nyb2xsWSA9IHNjcm9sbHRvcDtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy50b3BIaWRlSGVpZ2h0ID0gdG9wSGlkZUhlaWdodDtcclxuICAgICAgICB0aGlzLmJvdHRvbUhpZGVIZWlnaHQgPSBib3R0b21IaWRlSGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2VhcmNoVmFsdWVDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCEkZXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNsZWFyU2VhcmNoVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoVmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnNlYXJjaERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xlYXJTZWFyY2hWYWx1ZSgpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaERhdGEudmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnN0YXRlLnNlYXJjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaFZhbHVlLmVtaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNlbGxDbGljayhldmVudDogRXZlbnQsIGNvbDogYW55LCBub2RlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNlbGxDbGljay5lbWl0KHsgZXZlbnQsIGNvbCwgbm9kZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFja0J5Rm4oaW5kZXgsIHJvd05vZGUpIHtcclxuICAgICAgICByZXR1cm4gcm93Tm9kZS5pZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qC85byP5YyW5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIGZvcm1hdERhdGEoY29sOiBhbnksIGRhdGE6IGFueSwgZm9ybWF0dGVyOiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zdCB2YWwgPSB0aGlzLnV0aWxzLmdldFZhbHVlKGZpZWxkLCBkYXRhLCB0cnVlICk7XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXROb2RlVGV4dChjb2wsIGRhdGEpO1xyXG4gICAgICAgIGlmIChmb3JtYXR0ZXIgJiYgZm9ybWF0dGVyLnR5cGUgPT09ICd0aW1lYWdvJykge1xyXG4gICAgICAgICAgICBpZiAoIWZvcm1hdHRlci5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXIub3B0aW9ucyA9IHsgbG9jYWxlOiB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWR9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZvcm1hdHRlci5vcHRpb25zLmxvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlci5vcHRpb25zLmxvY2FsZSA9IHRoaXMubG9jYWxlU2VydmljZS5sb2NhbGVJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xGb3JtYXRTZXIuZm9ybWF0KHZhbCwgZGF0YSwgZm9ybWF0dGVyLCB7bG9jYWxlOiB0aGlzLmxvY2FsZVNlcnZpY2UubG9jYWxlSWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29sdW1uc0NoYW5nZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbHVtbk9wdGlvbigpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHRjMmNvbHVtbnMobGlzdDogUXVlcnlMaXN0PFRyZWVUYWJsZUNvbHVtbkRpcmVjdGl2ZT4pIHtcclxuICAgICAgICByZXR1cm4gbGlzdC5tYXAoKG46IFRyZWVUYWJsZUNvbHVtbkRpcmVjdGl2ZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGQ6IG4uZmllbGQsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogbi50aXRsZSxcclxuICAgICAgICAgICAgICAgIGFsaWduOiBuLmFsaWduLFxyXG4gICAgICAgICAgICAgICAgaEFsaWduOiBuLmhBbGlnbixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBuLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBuLmZvcm1hdHRlclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVTZXRTaXplKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZpdCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFdpZHRoKHBhcmVudEVsLm9mZnNldFdpZHRoKVxyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHBhcmVudEVsLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIC8vIOWmguaenOWcqOS9v+eUqOaXtu+8jOS4uue7hOS7tuiuvue9rueahOmrmOW6pu+8jOWImeS7peatpOWAvOS4uuWHhu+8jOS7heaUr+aMgSDlm7rlrprlgLwg77yM5LiN5pSv5oyBIOeZvuWIhuavlFxyXG4gICAgICAgICAgICBpZiAodGhpcy5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGggPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGguaW5kZXhPZigncHgnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IHBhcnNlSW50KGgucmVwbGFjZSgncHgnLCAnJyksIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclZpcnR1YWxSb3dOb2Rlcyhub2RlUG9zWSA9IG51bGwpIHtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxZID0gbm9kZVBvc1kgIT09IG51bGwgJiYgbm9kZVBvc1kgIT09IHVuZGVmaW5lZCA/IG5vZGVQb3NZOiB0aGlzLnN0YXRlLnNjcm9sbFk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9yb3dub2RlcyA9IHRoaXMuc2Nyb2xsTG9hZGVyLmdldFJvd05vZGVzKHNjcm9sbFkpO1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IF9yb3dub2Rlcy5kYXRhO1xyXG4gICAgICAgICAgICB0aGlzLnRvcEhpZGVIZWlnaHQgPSBfcm93bm9kZXMudG9wSGlkZUhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5ib3R0b21IaWRlSGVpZ2h0ID0gX3Jvd25vZGVzLmJvdHRvbUhpZGVIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5vZGVQb3NZICE9PSBudWxsICYmIG5vZGVQb3NZICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IG5vZGVQb3NZO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZShub2RlUG9zWTogYW55ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gW107XHJcbiAgICAgICAgdGhpcy5zZWFyY2hIYW5kbGUuYWxsTm9kZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplTm9kZXMobnVsbCwgdGhpcy5kYXRhLCAwLCB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKG5vZGVQb3NZKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAvLyBpZiAoZW1pdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuagkeiKgueCueaVsOaNruW6j+WIl+WMluS4ulJvd05vZGVcclxuICAgICAqIEBwYXJhbSBwYXJlbnQg54i257qn6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gbm9kZXMg5qCR6IqC54K56ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gbGV2ZWwg57qn5YirXHJcbiAgICAgKiBAcGFyYW0gdmlzaWJsZSDmmK/lkKblj6/op4FcclxuICAgICAqL1xyXG4gICAgc2VyaWFsaXplTm9kZXMocGFyZW50OiBUcmVlTm9kZSwgbm9kZXM6IFRyZWVOb2RlW10sIGxldmVsOiBudW1iZXIsIHZpc2libGU6IGJvb2xlYW4sIHBhcmVudElkcz86IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFub2Rlc1swXS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goKG5vZGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudCA9IHBhcmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaGFzT3duUHJvcGVydHkoJ3NlbGVjdGFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmhhc093blByb3BlcnR5KCdzaG93SWNvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zaG93SWNvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdExlYWYgPT09ICd5ZXMnICYmIG5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0YWJsZSA9ICEhbm9kZS5sZWFmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5aWQgPSBub2RlLmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgIG5vZGUuaWQgPSBrZXlpZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLmZpbmRJbmRleEluU2VsZWN0aW9uKG5vZGUpID4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNDaGVja2VkID0gdGhpcy5maW5kSW5kZXhJbkNoZWNrZWRzKG5vZGUpID4gLTE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0xhc3QgPSBpbmRleCA9PT0gbm9kZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSBpbmRleCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50Um4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudElEID0gcGFyZW50LmRhdGFbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBfcGFyZW50cyA9IHBhcmVudElkcyB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzID0gcGFyZW50cy5jb25jYXQoX3BhcmVudHMubWFwKG4gPT4gbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnRJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Um4gPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBwYXJlbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd05vZGU6IFJvd05vZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGtleWlkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHZpc2libGUgJiYgKHBhcmVudCA/IHBhcmVudC5leHBhbmRlZCA6IHRydWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDaGVja2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Um93Tm9kZTogcGFyZW50Um4sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuc3RhdGUucm93Tm9kZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3Q6IGlzTGFzdCxcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdDogaXNGaXJzdFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VyaWFsaXplZFZhbHVlLnB1c2gocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLnB1c2gocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZU5vZGVzKG5vZGUsIG5vZGUuY2hpbGRyZW4sIGxldmVsICsgMSwgcm93Tm9kZS52aXNpYmxlLCBwYXJlbnRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5oyH5a6a55qE6IqC54K55piv5ZCm6KKr6YCJ5LitXHJcbiAgICAgKiBAcGFyYW0gbm9kZSDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgaXNTZWxlY3RlZChub2RlOiBUcmVlTm9kZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZSAmJiB0aGlzLnNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHRoaXMuc2VsZWN0ZWRSb3cuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbnMuZmluZEluZGV4KG4gPT4gbi5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG5vZGUuZGF0YVt0aGlzLmlkRmllbGRdKSA+IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5Yik5pat5b2T5YmN6IqC54K555qE6ZKp6YCJ54q25oCBICovXHJcbiAgICBpc0NoZWNrZWQobm9kZTogVHJlZU5vZGUpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobm9kZSAmJiB0aGlzLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrZWRzIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrZWRzLmZpbmRJbmRleCgodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2LmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gbm9kZS5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICB9KSA+IC0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSB1blNlbGVjdGVkQ3VycmVudFJvd0VtaXQoKSB7XHJcbiAgICAgICAgY29uc3QgY3VyclNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJvdztcclxuICAgICAgICBpZiAoY3VyclNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoeyBub2RlOiBjdXJyU2VsZWN0ZWQsIHR5cGU6ICdyb3cnLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2luZ2xlU2VsZWN0Tm9kZShlOiBTZWxlY3RFdmVudEFyZ3MpIHtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gZS5yb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RSb3dJbmRleCA9IGUucm93SW5kZXg7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW2Uucm93Tm9kZS5ub2RlXTtcclxuICAgICAgICBlLnJvd05vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICBlLnJvd05vZGUuaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckNoZWNrZWRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMoZS5yb3dOb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNwOiBOb2RlU2VsZWN0ZWRQYXJhbSA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICAgICAgICBub2RlOiBlLnJvd05vZGUubm9kZSwgdHlwZTogJ3JvdycsXHJcbiAgICAgICAgICAgIGluZGV4OiBlLnJvd0luZGV4LFxyXG4gICAgICAgICAgICBwYXJlbnRzOiBlLnJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoc3ApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NpbmdsZVVuU2VsZWN0Tm9kZShlOiBTZWxlY3RFdmVudEFyZ3MpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbGVjdFJvd0luZGV4ID0gLTE7XHJcbiAgICAgICAgZS5yb3dOb2RlLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBlLnJvd05vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubm9kZVVuU2VsZWN0LmVtaXQoe1xyXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBlLm9yaWdpbmFsRXZlbnQsXHJcbiAgICAgICAgICAgIG5vZGU6IGUucm93Tm9kZS5ub2RlLCB0eXBlOiAncm93JywgcGFyZW50czogZS5yb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX3NpbmdsZVNlbGVjdE5vZGUoZXZlbnQ6IFNlbGVjdEV2ZW50QXJncywgc2VsZWN0ZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkQ3VycmVudFJvd0VtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2luZ2xlU2VsZWN0Tm9kZShldmVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmtlZXBTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NpbmdsZVVuU2VsZWN0Tm9kZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX211bHRpU2VsZWN0Tm9kZShldmVudDogU2VsZWN0RXZlbnRBcmdzLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSBldmVudC5yb3dOb2RlO1xyXG4gICAgICAgIGlmIChzZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuU2VsZWN0ZWRDdXJyZW50Um93RW1pdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlbGVjdFdoZW5NdWx0aVNlbGVjdChyb3dOb2RlLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudC5vcmlnaW5hbEV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAncm93JywgaW5kZXg6IGV2ZW50LnJvd0luZGV4LCBwYXJlbnRzOiByb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMua2VlcFNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQub3JpZ2luYWxFdmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyb3cnLCBpbmRleDogZXZlbnQucm93SW5kZXgsIHBhcmVudHM6IHJvd05vZGUucGFyZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDooYzljZXlh7vkuovku7ZcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUm93Q2xpY2soZXZlbnQ6IFNlbGVjdEV2ZW50QXJncykge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSBldmVudC5yb3dOb2RlO1xyXG4gICAgICAgIHJvd05vZGUubm9kZVsnZWxlbWVudFJlZiddID0gZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQ7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmlzU2VsZWN0ZWQocm93Tm9kZS5ub2RlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX19zaW5nbGVTZWxlY3ROb2RlKGV2ZW50LCBzZWxlY3RlZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fbXVsdGlTZWxlY3ROb2RlKGV2ZW50LCAhc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5pc1NlbGVjdGVkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNTZWxlY3RlZCA9ICFzZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dOb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dTZWxlY3RDaGFuZ2VQYXJhbXM6IE5vZGVTZWxlY3RlZFBhcmFtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50Lm9yaWdpbmFsRXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncm93JywgaW5kZXg6IGV2ZW50LnJvd0luZGV4LCBwYXJlbnRzOiByb3dOb2RlLnBhcmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXNcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQocm93U2VsZWN0Q2hhbmdlUGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdChyb3dTZWxlY3RDaGFuZ2VQYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSAhc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNDaGVja2VkID0gIXNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLmNhc2NhZGVOb2Rlcyhyb3dOb2RlLCByb3dOb2RlLmlzQ2hlY2tlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBub2RlOiByb3dOb2RlLm5vZGUsIG5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja09uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmNoZWNrZWRzLm1hcCh0biA9PiB0bi5pZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzID0gaWRzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KGlkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bim5pyJY2hlY2tib3gg55qE5Y2V6YCJXHJcbiAgICAgKiBAcGFyYW0gcm93Tm9kZSDlvZPliY3oioLngrlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaW5nbGVTZWxlY3RXaGVuTXVsdGlTZWxlY3Qocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5pc0NoZWNrZWQgPSBmbGFnO1xyXG4gICAgICAgICAgICB0aGlzLmNhc2NhZGVOb2Rlcyhyb3dOb2RlLCByb3dOb2RlLmlzQ2hlY2tlZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vbkNoYW5nZUNoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJvd05vZGUuaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBldmVudCwgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb25zKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSByb3dOb2RlLm5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0V2hlbkNoZWNrZWQocm93Tm9kZTogUm93Tm9kZSwgZmxhZzogYm9vbGVhbiwgZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGZsYWc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmbGFnIHx8ICh0aGlzLnNlbGVjdGVkUm93ICYmIHRoaXMuc2VsZWN0ZWRSb3cuaWQgPT09IHJvd05vZGUuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGZsYWc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJvd05vZGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm93Tm9kZS5pZCkuaXNTZWxlY3RlZCA9IGZsYWc7XHJcblxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTZWxlY3RlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMsIHR5cGU6ICdjaGVja2JveCcgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMsIHR5cGU6ICdjaGVja2JveCcgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0luQXJyYXkocm93Tm9kZTogUm93Tm9kZSwgaXRlbXM6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zLmZpbmRJbmRleChpID0+IGkuZGF0YVt0aGlzLmlkRmllbGRdID09PSByb3dOb2RlLmlkKSA+IC0xO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U2VsZWN0aW9ucyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgaWYgKHJvd05vZGUuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCB0aGlzLnNlbGVjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbnMgPSBbLi4udGhpcy5zZWxlY3Rpb25zLCByb3dOb2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnB1c2gocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnNlbGVjdGlvbnMuZmluZEluZGV4KCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25zID0gdGhpcy5zZWxlY3Rpb25zLmZpbHRlcigodG46IFRyZWVOb2RlKSA9PiB0bi5kYXRhW3RoaXMuaWRGaWVsZF0gIT09IHJvd05vZGUubm9kZS5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2hlY2tlZHMocm93Tm9kZTogUm93Tm9kZSwgdXBkYXRlZCA9IHRydWUpIHtcclxuICAgICAgICBpZiAocm93Tm9kZS5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCB0aGlzLmNoZWNrZWRzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2Vkcy5wdXNoKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuY2hlY2tlZHMuZmluZEluZGV4KCh0bjogVHJlZU5vZGUpID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSA9PT0gcm93Tm9kZS5ub2RlLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2VkcyA9IFsgLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RGlmZnJlbnREYXRhKGRhdGE6IFRyZWVOb2RlW10pIHtcclxuICAgICAgICBpZiAoZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgX25vZGVzID0gW107XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChfbm9kZXMuZmluZEluZGV4KHQgPT4gdC5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IG4uZGF0YVt0aGlzLmlkRmllbGRdKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBfbm9kZXMucHVzaChuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfbm9kZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNhc2NhZGVDaGVja2VkTm9kZShyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuLCBzeW5jID0gZmFsc2UpOiBUcmVlTm9kZVtdIHtcclxuICAgICAgICBjb25zdCBub2RlczogVHJlZU5vZGVbXSA9IFtdO1xyXG4gICAgICAgIGlmIChyb3dOb2RlLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgaWYgKHN5bmMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuaXNJbmRldGVybWluYXRlKHJvd05vZGUpICE9PSAyO1xyXG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9IHN0YXR1cyA/IGNoZWNrZWQ6IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNTZWxlY3RlZCA9IGNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW5BcnJheShyb3dOb2RlLCBub2RlcykpIHtcclxuICAgICAgICAgICAgbm9kZXMucHVzaChyb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlkJHkuIvnuqfogZTpgInkuK1cclxuICAgICAqIEBwYXJhbSBub2RlIOW9k+WJjeiKgueCuVxyXG4gICAgICogQHBhcmFtIGNoZWNrZWQg6YCJ5Lit54q25oCBXHJcbiAgICAgKiDov5Tlm57lj5flvbHlk43nmoTooYxcclxuICAgICAqL1xyXG4gICAgcHJvcGFnYXRlU2VsZWN0aW9uRG93bihyb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZURvd24gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuICYmIHJvd05vZGUubm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmZvckVhY2goKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJuID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKChyb3c6IFJvd05vZGUpID0+IHJvdy5pZCA9PT0gdi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMgPSBub2Rlcy5jb25jYXQodGhpcy5wcm9wYWdhdGVTZWxlY3Rpb25Eb3duKHJuLCBjaGVja2VkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZCR5LiK57qn6IGU6YCJ5LitXHJcbiAgICAgKi9cclxuICAgIHByb3BhZ2F0ZVNlbGVjdGlvblVwKHJvd05vZGU6IFJvd05vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuY2FzY2FkZUNoZWNrZWROb2RlKHJvd05vZGUsIGNoZWNrZWQpO1xyXG4gICAgICAgIGlmICh0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCAmJiByb3dOb2RlLm5vZGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm5zOiBSb3dOb2RlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKChuLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybiAmJiBybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZE5vZGVzID0gdGhpcy5jYXNjYWRlQ2hlY2tlZE5vZGUocm4sIGNoZWNrZWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZE5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChjaGVja2VkTm9kZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJucy5wdXNoKHJuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBybnMucmV2ZXJzZSgpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyDoioLngrnnirbmgIHvvIjpgInkuK3vvIzli77pgInvvInlkIzmraXmm7TmlrBcclxuICAgIHByaXZhdGUgdXBkYXRlTm9kZVN0YXR1cygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hlZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlcyA9IHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXM7XHJcbiAgICAgICAgICAgIGlmICghcm93Tm9kZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb3dOb2Rlcy5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRJdGVtOiBSb3dOb2RlID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gcm4uaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoa2VkID0gY2hlY2tlZEl0ZW0gPyBjaGVja2VkSXRlbS5pc0NoZWNrZWQgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJuLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJuLmlzQ2hlY2tlZCA9IGNoa2VkO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZEl0ZW0uaXNTZWxlY3RlZCAhPSBybi5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEl0ZW0uaXNTZWxlY3RlZCA9IGNoZWNrZWRJdGVtLmlzQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGNoZWNrZWRJdGVtLmlzU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdE9uQ2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25seVNlbGVjdFNlbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbnMgfHwgIXRoaXMuc2VsZWN0aW9ucy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25zWzBdLmlkID09PSBybi5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm4uaXNTZWxlY3RlZCAhPSBybi5pc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJuLmlzU2VsZWN0ZWQgPSBybi5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe6p+iBlOmAieaLqeiKgueCuVxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg5b2T5YmN6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gY2hlY2tlZCDmmK/lkKbpkqnpgIlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYXNjYWRlTm9kZXMocm93Tm9kZTogUm93Tm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBjaGVja2VkTm9kZXMgPSB0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvbkRvd24ocm93Tm9kZSwgY2hlY2tlZCk7XHJcbiAgICAgICAgY2hlY2tlZE5vZGVzID0gY2hlY2tlZE5vZGVzLmNvbmNhdCh0aGlzLnByb3BhZ2F0ZVNlbGVjdGlvblVwKHJvd05vZGUsIGNoZWNrZWQpKTtcclxuICAgICAgICBjaGVja2VkTm9kZXMgPSB0aGlzLmdldERpZmZyZW50RGF0YShjaGVja2VkTm9kZXMpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZU5vZGVTdGF0dXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2hlY2tlZE5vZGVzLmZpbHRlcihuID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG4uc2VsZWN0YWJsZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOihjENoZWNrYm94IOmAieS4reWPmOWMluS6i+S7tlxyXG4gICAgICogQHBhcmFtIGV2ZW50IOm8oOagh+eCueWHu+S6i+S7tuWvueixoVxyXG4gICAgICogQHBhcmFtIHJvd05vZGUg5b2T5YmN5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZU5vZGVXaXRoQ2hlY2tib3goZXZlbnQ6IEV2ZW50LCByb3dOb2RlOiBSb3dOb2RlLCBjaGVja2VkOiBib29sZWFuKTogYW55IHtcclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSByb3dOb2RlLmlkKS5pc0NoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jYXNjYWRlTm9kZXMocm93Tm9kZSwgY2hlY2tlZCk7XHJcblxyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uQ2hhbmdlQ2hlY2tib3hTdGF0dXMocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXM6IGRhdGEsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZVVuQ2hlY2tlZC5lbWl0KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIG5vZGU6IHJvd05vZGUubm9kZSwgbm9kZXM6IGRhdGEsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RXaGVuQ2hlY2tlZChyb3dOb2RlLCBjaGVja2VkLCBldmVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9ubHlTZWxlY3RTZWxmICYmIGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgIlcclxuICAgICAqIEBwYXJhbSBldmVudCDpvKDmoIfkuovku7blr7nosaFcclxuICAgICAqIEBwYXJhbSBjaGVja2VkIOaYr+WQpumAieS4rVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVOb2Rlc1dpdGhDaGVja2JveChldmVudDogRXZlbnQsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tBbGxOb2Rlcyh7IG9yaWdpbmFsRXZlbnQ6IGV2ZW50LCBjaGVja2VkLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudW5DaGVja0FsbE5vZGVzKHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIGNoZWNrZWQsIGluc3RhbmNlOiB0aGlzfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5pu05paw5YWo6YCJY2hlY2tib3gg55qE54q25oCBICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFsbENoZWNrYm94U3RhdHVzKCkge1xyXG4gICAgICAgIGlmICh0aGlzWydjaGVja2FsbF9DTElDS0VEJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUoKTtcclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tBbGwgJiYgIXRoaXMuc2luZ2xlU2VsZWN0ICYmIHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyQ2hlY2tib3hDbXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBzdGF0dXMgPT09IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGVja2VkID0gc3RhdHVzID09PSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDniLboioLngrljaGVja2JveCDpgInkuK3nirbmgIEgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMocm93Tm9kZTogUm93Tm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHBOb2RlcyA9IFtdO1xyXG4gICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKHJuaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBybiA9IHRoaXMuZmluZFJvd05vZGUocm5pZCk7XHJcbiAgICAgICAgICAgIGlmIChybikge1xyXG4gICAgICAgICAgICAgICAgcE5vZGVzLnB1c2gocm4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBOb2Rlcy5yZXZlcnNlKCkuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIOabtOaWsE7kuKrniLboioLngrnlpI3pgInmoYbkuK3nmoTpgInkuK3nirbmgIEgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlUGFyZW50c0NoZWNrU3RhdHVzKHBhcmVudElkczogYW55KSB7XHJcbiAgICAgICAgbGV0IHBpZHMgPSBbXTtcclxuICAgICAgICBwYXJlbnRJZHMuZm9yRWFjaCgoaWRzOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgcGlkcyA9IFsuLi5waWRzLCAuLi5pZHNdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwaWRzID0gQXJyYXkuZnJvbShuZXcgU2V0KHBpZHMpKTtcclxuXHJcbiAgICAgICAgY29uc3QgcFJvd05vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMocGlkcyk7XHJcblxyXG4gICAgICAgIHBSb3dOb2Rlcy5zb3J0KChyLCBuKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuLmxldmVsIC0gci5sZXZlbDtcclxuICAgICAgICB9KS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveFN0YXR1cyhybik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmm7TmlrDoioLngrnkuK1jaGVja2JveOeahOeKtuaAgSAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveFN0YXR1cyhyb3dOb2RlOiBSb3dOb2RlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gdGhpcy5pc0luZGV0ZXJtaW5hdGUocm93Tm9kZSk7XHJcbiAgICAgICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkICYmIHJvd05vZGUubm9kZS5zZWxlY3RhYmxlKSB7XHJcbiAgICAgICAgICAgIHJvd05vZGUuaW5kZXRlcm1pbmF0ZSA9IHN0YXR1cyA9PT0gMjtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhyb3dOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaMh+WumuiKgueCuWNoZWNrYm94IOeahOeKtuaAgVxyXG4gICAgICogMO+8muWFqOS4jemAie+8jCAx77yaIOWFqOmDqOmAieS4re+8jCAy77ya5pyJ6YCJ5Lit55qE5Lmf5pyJ5rKh6YCJ5Lit55qEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNJbmRldGVybWluYXRlKHJvd05vZGU/OiBSb3dOb2RlKTogYW55IHtcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldENoZWNrYm94U3RhdHVzKHJvd05vZGUpO1xyXG4gICAgICAgIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja2VkID0gISFzdGF0dXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJvd05vZGUgJiYgcm93Tm9kZS5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUuaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm93Tm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdGF0dXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDov5Tlm57niLbnuqfoioLngrljaGVja2JveCDnmoTnirbmgIHjgIIw77ya5LiN6YCJ5Lit77yMIDHvvJog6YCJ5Lit77yMIDLvvJrkuI3noa7lrppcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOeItue6p+iKgueCue+8m+S4uuepuuaXtui/lOWbnuWFqOmAiWNoZWNrYm94IOeahOeKtuaAgVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldENoZWNrYm94U3RhdHVzKHJvd05vZGU/OiBSb3dOb2RlKSB7XHJcbiAgICAgICAgbGV0IHVuY2hlY2tlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgbGV0IGNoZWNrZWRMZW5ndGggPSAwO1xyXG4gICAgICAgIGxldCBsZW4gPSAwO1xyXG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gW107XHJcbiAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IHJvd05vZGUubm9kZS5jaGlsZHJlbnx8IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjaGlsZE5vZGVzLmZpbHRlcihuID0+IG4uc2VsZWN0YWJsZSkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93Tm9kZS5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxlbiA9IGNoaWxkTm9kZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICBjaGlsZE5vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBybiA9IG47XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBybiA9IHRoaXMuZmluZFJvd05vZGUobi5kYXRhW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChybiAmJiAhcm4uaW5kZXRlcm1pbmF0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuLmlzQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRMZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkTGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZmxhZyA9IDA7XHJcbiAgICAgICAgaWYgKHVuY2hlY2tlZExlbmd0aCA9PT0gbGVuKSB7XHJcbiAgICAgICAgICAgIGZsYWcgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjaGVja2VkTGVuZ3RoID09PSBsZW4pIHtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmbGFnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZEluZGV4SW4obm9kZTogVHJlZU5vZGUsIHRyZWVOb2RlczogVHJlZU5vZGVbXSkge1xyXG4gICAgICAgIGxldCBpbmRleCA9IC0xO1xyXG4gICAgICAgIGlmICh0cmVlTm9kZXMgJiYgdHJlZU5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHRyZWVOb2Rlcy5maW5kSW5kZXgoKHYsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVxdWFscyh2LCBub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlnKjpgInkuK3nmoTpm4blkIjkuK3mn6Xmib7mjIflrproioLngrnnmoTntKLlvJVcclxuICAgICAqIEBwYXJhbSBub2RlIOagkeiKgueCuVxyXG4gICAgICovXHJcbiAgICBmaW5kSW5kZXhJbkNoZWNrZWRzKG5vZGU6IFRyZWVOb2RlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXhJbihub2RlLCB0aGlzLmNoZWNrZWRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWcqOmAieS4reeahOmbhuWQiOS4reafpeaJvuaMh+WumuiKgueCueeahOe0ouW8lVxyXG4gICAgICogQHBhcmFtIG5vZGUg5qCR6IqC54K5XHJcbiAgICAgKi9cclxuICAgIGZpbmRJbmRleEluU2VsZWN0aW9uKG5vZGU6IFRyZWVOb2RlKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kSW5kZXhJbihub2RlLCB0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlr7nmr5TkuKTkuKroioLngrnmmK/lkKblkIzkuIDkuKroioLngrkgKi9cclxuICAgIGVxdWFscyh0YXJnZXQ6IFRyZWVOb2RlLCBzb3VyY2U6IFRyZWVOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldC5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IHNvdXJjZS5kYXRhW3RoaXMuaWRGaWVsZF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsZXlvIDmiYDmnInoioLngrlcclxuICAgICAqIEBwYXJhbSByb3dOb2RlIOWxleW8gOatpOiKgueCueS4i+eahOaJgOacieiKgueCue+8m+WmguaenOS4uuepuu+8jOWImeWxleW8gOaJgOacieiKgueCuVxyXG4gICAgICogQHBhcmFtIGRlZXAg6K6+572u5Li6dHJ1ZSDml7bvvIzlvZPliY3oioLngrnkuIvnmoTmiYDmnInlrZDoioLngrnlhajpg6jlsZXlvIAsIOm7mOiupCBmYWxzZVxyXG4gICAgICogQHBhcmFtIGNoaWxkcmVuRW1wdHlFbWl0RXhwYW5kICDlvZPmsqHmnInlrZDoioLngrnmmK/lkKbop6blj5HlsZXlvIDkuovku7bvvIzpu5jorqTkuLogdHJ1ZVxyXG4gICAgICovXHJcbiAgICB0b2dnbGVFeHBhbmQodHJlZU5vZGU/OiBUcmVlTm9kZSwgZGVlcCA9IGZhbHNlLCBjaGlsZHJlbkVtcHR5RW1pdEV4cGFuZCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodHJlZU5vZGUpIHtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSAhdHJlZU5vZGUuZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTm9kZVByb3BlcnR5KHRyZWVOb2RlLmlkLCB7ZXhwYW5kZWQ6IHRyZWVOb2RlLmV4cGFuZGVkfSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSh0cmVlTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyZWVOb2RlLmNoaWxkcmVuICYmIHRyZWVOb2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0cmVlTm9kZS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuRW1wdHlFbWl0RXhwYW5kIHx8ICh0cmVlTm9kZS5jaGlsZHJlbiAmJiB0cmVlTm9kZS5jaGlsZHJlbi5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmQuZW1pdCh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVOb2RlLmV4cGFuZGVkID0gIXRyZWVOb2RlLmV4cGFuZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UuZW1pdCh0cmVlTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZWVwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJlZU5vZGUuY2hpbGRyZW4gJiYgdHJlZU5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4uZm9yRWFjaCgocm93LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5kKHJvdywgZGVlcCwgY2hpbGRyZW5FbXB0eUVtaXRFeHBhbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVFeHBhbmQocm93KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXROZXdDb2x1bW5zV2lkdGgoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKHRyZWVOb2RlLmlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCByaWQgPSByb3dOb2RlLmlkO1xyXG4gICAgICAgICAgICBjb25zdCBzZXRSb3dWaXNpYmxlID0gKHJuLCB2aXNpYmxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwaWQgPSBybi5wYXJlbnQuZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm5QYXJlbnQgPSB0aGlzLmZpbmRSb3dOb2RlKHBpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm5QYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBybi52aXNpYmxlID0gcm5QYXJlbnQudmlzaWJsZSAmJiByblBhcmVudC5ub2RlLmV4cGFuZGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBybi52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfciA9IHRoaXMuc2VyaWFsaXplZFZhbHVlLmZpbmQobiA9PiBuLmlkID09PSBybi5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBfci52aXNpYmxlID0gcm4udmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKHJuID0+IHJuLnBhcmVudHMuaW5kZXhPZihyaWQpID4gLTEpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0Um93VmlzaWJsZShybiwgdHJlZU5vZGUuZXhwYW5kZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAjMzkyNTEyIFxyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlcyA9IHRoaXMuZ2V0Q3VycmVudEFsbFJvd05vZGVzKCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2Rlcykge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZXMuZmlsdGVyKHJuID0+IHJuLnBhcmVudHMuaW5kZXhPZihyaWQpID4gLTEpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFJvd1Zpc2libGUocm4sIHRyZWVOb2RlLmV4cGFuZGVkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsZXlvIDmjIflrproioLngrlcclxuICAgICAqIGVtaXQ6IOinpuWPkeWxleW8gOS6i+S7tlxyXG4gICAgICogcmVuZGVyOiDmlbDmja7ph43mlrDliqDovb1cclxuICAgICAqL1xyXG4gICAgZXhwYW5kTm9kZShpZDogc3RyaW5nLCBlbWl0ID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChpZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHJvd05vZGUubm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dOb2RlLm5vZGUuY2hpbGRyZW4gJiYgcm93Tm9kZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaXJ0dWFsUm93Tm9kZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdDb25cXCd0IGZpbmQgdHJlZSBub2RlIHdpZGggaWQ6JyArIGlkLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5bGV5byA5omA5pyJ6IqC54K5ICovXHJcbiAgICBleHBhbmRBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2RlcyA9IHRoaXMuc3RhdGUucm93Tm9kZXMubWFwKChyb3c6IFJvd05vZGUpID0+IHtcclxuICAgICAgICAgICAgcm93Lm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3cudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnJvd05vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldE5ld0NvbHVtbnNXaWR0aCgpO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZXMuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZE5vZGVzKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgLy8gY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3QoaWQpO1xyXG4gICAgICAgIC8vIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHRyZWVOb2RlID0gcm93Tm9kZS5ub2RlO1xyXG4gICAgICAgIC8vICAgICB0cmVlTm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIHJvd05vZGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHBhcmVudHMgPSByb3dOb2RlLnBhcmVudHM7XHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4ucGFyZW50cy5pbmRleE9mKHJvb3ROb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHBhcmVudHMuaW5kZXhPZihyLmlkKSA+IC0xKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICByLm5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWxleW8gOaMh+WumuiKgueCueS4i+eahOaJgOacieiKgueCuSAqL1xyXG4gICAgZXhwYW5kQWxsTm9kZXNCeShyb3dOb2RlOiBhbnkpIHtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0cmVlTm9kZSA9IHJvd05vZGUubm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByb3dOb2RlLnZpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIobiA9PiBuLnBhcmVudHMuaW5kZXhPZihyb3dOb2RlLmlkKSA+IC0xKS5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHIubm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmipjlj6DmjIflrproioLngrkgKi9cclxuICAgIGNvbGxhcHNlTm9kZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZS5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKHJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlLmVtaXQocm93Tm9kZS5ub2RlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdDb25cXCd0IGZpbmQgdHJlZSBub2RlIHdpZGggaWQ6JyArIGlkLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmipjlj6DmiYDmnInoioLngrkgKi9cclxuICAgIGNvbGxhcHNlQWxsKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMgPSB0aGlzLnN0YXRlLnJvd05vZGVzLm1hcCgocm93OiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgIHJvdy5ub2RlLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvdy52aXNpYmxlID0gIXJvdy5wYXJlbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplZFZhbHVlID0gdGhpcy5zdGF0ZS5yb3dOb2RlcztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZXMuZW1pdCgpO1xyXG4gICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udGFpbmVyT2Zmc2V0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNvbnRhaW5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LFxyXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3BcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sdW1uUmVzaXplQmVnaW4oZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXJMZWZ0ID0gTWF0aC5yb3VuZCh0aGlzLmdldENvbnRhaW5lck9mZnNldCgpLmxlZnQpO1xyXG4gICAgICAgIHRoaXMubGFzdFJlc2l6ZXJIZWxwZXJYID0gKGV2ZW50LnBhZ2VYIC0gY29udGFpbmVyTGVmdCArIHRoaXMuY29udGFpbmVyRWxlbWVudC5zY3JvbGxMZWZ0KTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sdW1uUmVzaXplKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXphYmxlQ29sdW1ucykge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJMZWZ0ID0gdGhpcy5nZXRDb250YWluZXJPZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuY29udGFpbmVyRWxlbWVudCwgJ3VpLXVuc2VsZWN0YWJsZS10ZXh0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250YWluZXJFbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gMCArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQuc3R5bGUubGVmdCA9IChldmVudC5wYWdlWCAtIGNvbnRhaW5lckxlZnQpICsgJ3B4JztcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplckhlbHBlclZDLm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ29sdW1uUmVzaXplRW5kKGV2ZW50OiBhbnksIGNvbHVtbjogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50Lm9mZnNldExlZnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5YGP56e76YePXHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50Lm9mZnNldExlZnQgLSB0aGlzLmxhc3RSZXNpemVySGVscGVyWDtcclxuICAgICAgICAvLyDliJflrr1cclxuICAgICAgICBjb25zdCBjb2x1bW5XaWR0aCA9IGNvbHVtbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICAvLyDmlrDlrr3luqZcclxuICAgICAgICBjb25zdCBuZXdDb2x1bW5XaWR0aCA9IGNvbHVtbldpZHRoICsgZGVsdGE7XHJcbiAgICAgICAgLy8g5pyA5bCP5a695bqmXHJcbiAgICAgICAgY29uc3QgbWluV2lkdGggPSBjb2x1bW4uc3R5bGUubWluV2lkdGggfHwgMTU7XHJcblxyXG4gICAgICAgIGxldCByZXNpemVDb2x1bW5JbmRleCA9IC0xO1xyXG4gICAgICAgIGlmIChjb2x1bW4uaWQpIHtcclxuICAgICAgICAgICAgcmVzaXplQ29sdW1uSW5kZXggPSB0aGlzLmNvbHVtbnMuZmluZEluZGV4KG4gPT4gbi5pZCA9PT0gY29sdW1uLmlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xGaWVsZCA9IGNvbHVtbi5nZXRBdHRyaWJ1dGUoJ2ZpZWxkJyk7XHJcbiAgICAgICAgICAgIGlmIChjb2xGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzaXplQ29sdW1uSW5kZXggPSB0aGlzLmNvbHVtbnMuZmluZEluZGV4KG4gPT4gbi5maWVsZCA9PT0gY29sRmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZpdENvbHVtbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmhlYWRlclRhYmxlLm5hdGl2ZUVsZW1lbnQsIHJlc2l6ZUNvbHVtbkluZGV4LCBuZXdDb2x1bW5XaWR0aCwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplQ29sR3JvdXAodGhpcy5ib2R5VGFibGUubmF0aXZlRWxlbWVudCwgcmVzaXplQ29sdW1uSW5kZXgsIG5ld0NvbHVtbldpZHRoLCAwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbHVtbnNbcmVzaXplQ29sdW1uSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNbcmVzaXplQ29sdW1uSW5kZXhdLndpZHRoID0gbmV3Q29sdW1uV2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc29ydENvbHVtbnNCeUZpeGVkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VsbFdpZHRoQ3NzKHRoaXMuYWxsQ29sdW1uc1dpZHRoKCksIDAsIFtdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2V0VGFibGVXaWR0aCh0aGlzLmFsbENvbHVtbnNXaWR0aCgpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIC8vIHVwZGF0ZSBjc3MuXHJcbiAgICAgICAgICAgIC8vIGNvbnN0IF9jb2xJbmZvID0gdGhpcy5jb2x1bW5zW3Jlc2l6ZUNvbHVtbkluZGV4XTtcclxuICAgICAgICAgICAgLy8gaWYgKF9jb2xJbmZvKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBydWxlTmFtZSA9IHRoaXMuY29sdW1uQ3NzTmFtZShfY29sSW5mbyk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBzdHlsZWNzcyA9IHJ1bGVOYW1lICsgJ3t3aWR0aDonICsgbmV3Q29sdW1uV2lkdGggKyAncHh9JztcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMudXRpbHMuYXBwZW5kQ3NzUnVsZXMoW3N0eWxlY3NzXSwgdGhpcy5zdHlsZUVsZW1lbnQuc2hlZXQpO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAvLyBjb25zdCBuZXh0Q29sdW1uID0gdGhpcy5jb2x1bW5zW3Jlc2l6ZUNvbHVtbkluZGV4ICsgMV07XHJcbiAgICAgICAgICAgIC8vIGlmIChuZXh0Q29sdW1uICYmIG5leHRDb2x1bW4uZml4ZWQpIHtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHJ1bGVOYW1lID0gdGhpcy5jb2x1bW5Dc3NOYW1lKG5leHRDb2x1bW4pO1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3Qgc3R5bGVjc3MgPSBydWxlTmFtZSArICd7JyArIG5leHRDb2x1bW4uZml4ZWQgKyAnOicgKyBuZXh0Q29sdW1uW25leHRDb2x1bW4uZml4ZWRdICsgJ3B4fSc7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnV0aWxzLmFwcGVuZENzc1J1bGVzKFtzdHlsZWNzc10sIHRoaXMuc3R5bGVFbGVtZW50LnNoZWV0KTtcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobmV3Q29sdW1uV2lkdGggPiBtaW5XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRDb2x1bW4gPSBjb2x1bW4ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCFuZXh0Q29sdW1uLm9mZnNldFBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRDb2x1bW4gPSBuZXh0Q29sdW1uLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbHVtbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb2x1bW5XaWR0aCA9IG5leHRDb2x1bW4ub2Zmc2V0V2lkdGggLSBkZWx0YTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sdW1uTWluV2lkdGggPSBuZXh0Q29sdW1uLnN0eWxlLm1pbldpZHRoIHx8IDE1O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3Q29sdW1uV2lkdGggPiAxNSAmJiBuZXh0Q29sdW1uV2lkdGggPiBuZXh0Q29sdW1uTWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmhlYWRlclRhYmxlLm5hdGl2ZUVsZW1lbnQsIHJlc2l6ZUNvbHVtbkluZGV4LCBuZXdDb2x1bW5XaWR0aCwgbmV4dENvbHVtbldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVDb2xHcm91cCh0aGlzLmJvZHlUYWJsZS5uYXRpdmVFbGVtZW50LCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZXJIZWxwZXJWQy5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNvbnRhaW5lckVsZW1lbnQsICd1aS11bnNlbGVjdGFibGUtdGV4dCcpO1xyXG4gICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2l6ZUNvbEdyb3VwKHRhYmxlLCByZXNpemVDb2x1bW5JbmRleCwgbmV3Q29sdW1uV2lkdGgsIG5leHRDb2x1bW5XaWR0aD86IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0YWJsZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xHcm91cCA9IHRhYmxlLmNoaWxkcmVuWzBdLm5vZGVOYW1lID09PSAnQ09MR1JPVVAnID8gdGFibGUuY2hpbGRyZW5bMF0gOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2wgPSBjb2xHcm91cC5jaGlsZHJlbltyZXNpemVDb2x1bW5JbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sID0gY29sLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICAgICAgICAgIGNvbC5zdHlsZS53aWR0aCA9IG5ld0NvbHVtbldpZHRoICsgJ3B4JztcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dENvbHVtbldpZHRoICYmIHRoaXMuZml0Q29sdW1ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q29sLnN0eWxlLndpZHRoID0gbmV4dENvbHVtbldpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Njcm9sbGFibGUgdGFibGVzIHJlcXVpcmUgYSBjb2xncm91cCB0byBzdXBwb3J0IHJlc2l6YWJsZSBjb2x1bW5zJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25TZWFyY2goKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2RlcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWFyY2hlZCA9ICEhdGhpcy5zZWFyY2hEYXRhLnZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaERhdGEudmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhLnZhbHVlID0gdGhpcy5zZWFyY2hEYXRhLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWFyY2guZW1pdCh0aGlzLnNlYXJjaERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGluc2VydChub2RlOiBUcmVlTm9kZSwgcGFyZW50PzogVHJlZU5vZGUpIHtcclxuICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50LmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChub2RlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShwYXJlbnQuZGF0YVt0aGlzLmlkRmllbGRdKTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmROZXcuZW1pdCh7IHBhcmVudCB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEucHVzaChub2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlU2VyaWFsaXplZFZhbHVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwZW5kKGRhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0sIHBhcmVudD86IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YVt0aGlzLmlkRmllbGRdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0KHsgZGF0YSwgaWQ6IGRhdGFbdGhpcy5pZEZpZWxkXSB9LCBwYXJlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKCdQbGVhc2Ugc2V0IGlkIHZhbHVlLicsICd3YXJuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW1pdEFwcGVuZE5ldyhwYXJlbnQ6IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZVBvc1kgPSB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZShub2RlUG9zWSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZENoaWxkcmVuKG5vZGVzOiBUcmVlTm9kZVtdLCBwYXJlbnQ6IFRyZWVOb2RlLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2goLi4ubm9kZXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0QXBwZW5kTmV3KHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kTmV3LmVtaXQoeyBwYXJlbnQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+acquaJvuWIsOeItue6p+iKgueCuScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXJpYWxpemVkVmFsdWUoKTtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ+a3u+WKoOWtkOiKgueCueeahOaVsOaNruS4uuepuicsICd3YXJuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDaGlsZHJlbihub2RlczogVHJlZU5vZGVbXSwgcGFyZW50OiBUcmVlTm9kZSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbiA9IG5vZGVzIHx8IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXRBcHBlbmROZXcocGFyZW50KTtcclxuICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kTmV3LmVtaXQoeyBwYXJlbnQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKG5vZGVJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKG5vZGVJZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShub2RlSWQpO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlKHRoaXMuc3RhdGUucm93Tm9kZXMsIChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIG4uaWQgPT09IG5vZGVJZDtcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0VmFsdWUgPT09IG5vZGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZShyb3dOb2RlLnBhcmVudC5jaGlsZHJlbiwgKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZGF0YVt0aGlzLmlkRmllbGRdID09PSBub2RlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZSh0aGlzLnN0YXRlLnJvd05vZGVzLCAobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5pZCA9PT0gbm9kZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEuZmlsdGVyKG4gPT4gbi5kYXRhW3RoaXMuaWRGaWVsZF0gIT09IG5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlcmlhbGl6ZWRWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vblJlbW92ZShyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZC5lbWl0KHJvd05vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShub2RlSWQ6IHN0cmluZywgZGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSkge1xyXG4gICAgICAgIGlmIChub2RlSWQgJiYgZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShub2RlSWQpO1xyXG4gICAgICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcm93Tm9kZS5ub2RlLmRhdGEgPSBleHRlbmQocm93Tm9kZS5ub2RlLmRhdGEsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0U2VydmljZS5vblVwZGF0ZShyb3dOb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZC5lbWl0KHJvd05vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU5vZGVQcm9wZXJ0eShub2RlaWQ6IHN0cmluZywgcHJvcGVydHk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUobm9kZWlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSAmJiBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwcm9wZXJ0eSkuZm9yRWFjaChrID0+IHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUubm9kZVtrXSA9IHByb3BlcnR5W2tdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTY29ybGxCb2R5SGVpZ2h0KCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93RmlsdGVyQmFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmxsQm9keUhlaWdodCA9IHRoaXMuc2NvcmxsQm9keUhlaWdodCAtIDQ2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5lbmFibGVGaWx0ZXJSb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5zY29ybGxCb2R5SGVpZ2h0IC0gMzY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5maXhlZEhlYWRlciAmJiB0aGlzLnNob3dIZWFkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyQm94ICYmICh0aGlzLmhlYWRlcldyYXAgfHwgdGhpcy51c2VHcm91cEhlYWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhoID0gdGhpcy5oZWFkZXJCb3gubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLSBoaDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWuveadvueJiOaXtu+8jOihqOWktOmrmOW6puWinumrmO+8jOmcgOimgeaMieWunumZheWPluW+l+ihqOWktOmrmOW6plxyXG4gICAgICAgICAgICAgICAgbGV0IF9oZWFkZXJIZWlnaHQgPSB0aGlzLmhlYWRlckhlaWdodDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRoZW1lc0tleSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnc3BfcnRmX3RoZW1TS2V5Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhlbWVzS2V5ID09PSAnbG9vc2UnICYmIHRoaXMuaGVhZGVyQm94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hlYWRlckhlaWdodCA9IHRoaXMuaGVhZGVyQm94Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29ybGxCb2R5SGVpZ2h0ID0gdGhpcy5zY29ybGxCb2R5SGVpZ2h0IC0gX2hlYWRlckhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgPSB0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLSB0aGlzLnBhZ2VySGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFdpZHRoKHcpIHtcclxuICAgICAgICB0aGlzLndpZHRoID0gdztcclxuICAgIH1cclxuXHJcbiAgICByZXNpemUoc2l6ZT86IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSkge1xyXG4gICAgICAgIGlmIChzaXplKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHcgPSBwYXJzZUludCgnJyArIHNpemUud2lkdGgsIDEwKTtcclxuICAgICAgICAgICAgY29uc3QgaCA9IHBhcnNlSW50KCcnICsgc2l6ZS5oZWlnaHQsIDEwKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoID09PSB3ICYmIHRoaXMuaGVpZ2h0ID09PSBoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zY3JvbGxZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9ZKHRoaXMuc3RhdGUuc2Nyb2xsWSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2Nyb2xsWCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWCh0aGlzLnN0YXRlLnNjcm9sbFgpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0V2lkdGgodyk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTY29ybGxCb2R5SGVpZ2h0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVmlydHVhbFJvd05vZGVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMucHNSZWYpIHtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSwgMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YShkYXRhOiBUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkTmV3RGF0YVNldEVtcHR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkTmV3RGF0YVNldEVtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZW1wdHkoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudEFsbFJvd05vZGVzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaGVkICYmIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMgJiYgdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMgfHwgdGhpcy5zdGF0ZS5yb3dOb2RlcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2RlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJBbGwoZGV0ZWN0Q2hhbmdlcyA9IHRydWUpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIHRoaXMuc3RhdGUucm93Tm9kZXMuZmlsdGVyKHJuID0+IHJuLmluZGV0ZXJtaW5hdGUpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICBybi5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlLm9uQ2hhbmdlQ2hlY2tib3hTdGF0dXMocm4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzID0gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5tYXAoKHJvdzogUm93Tm9kZSkgPT4ge1xyXG4gICAgICAgICAgICByb3cuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvdy5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJvdy5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy5zZWFyY2hEYXRhICYmIHRoaXMuc2VhcmNoRGF0YS52YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaGVkICYmIHRoaXMuc3RhdGUuc2VhcmNoUm93Tm9kZXMgJiYgdGhpcy5zdGF0ZS5zZWFyY2hSb3dOb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSB0aGlzLnN0YXRlLnNlYXJjaFJvd05vZGVzLm1hcCgocm93OiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByb3cuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByb3cuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcm93LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNob3dDaGVja0FsbCAmJiB0aGlzLmhlYWRlckNoZWNrYm94Q21wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyQ2hlY2tib3hDbXAuY2hrQWxsLm5hdGl2ZUVsZW1lbnQuaW5kZXRlcm1pbmF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGV0ZWN0Q2hhbmdlcygpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgaWYgKCF0aGlzLmNkUmVmWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJDaGVja2VkcygpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmICh0aGlzLmNoZWNrZWRzICYmIHRoaXMuY2hlY2tlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZFJvd05vZGVzKHRoaXMuY2hlY2tlZHMubWFwKHRuID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSkpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93Q2hlY2tBbGwgJiYgdGhpcy5oZWFkZXJDaGVja2JveENtcCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlckNoZWNrYm94Q21wLmNoa0FsbC5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJDaGVja2JveENtcC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclNlbGVjdGlvbnMoKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VyaWFsaXplZFZhbHVlICYmIHRoaXMuc2VyaWFsaXplZFZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgbi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICBuLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucyAmJiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGVJZHMgPSB0aGlzLnNlbGVjdGlvbnMubWFwKHRuID0+IHRuLmRhdGFbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZFJvd05vZGVzKG5vZGVJZHMpLmZvckVhY2gocm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgcm4uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKiog6YCJ5Lit56ysMeS4quWPr+S7pemAieS4reeahOiKgueCuSAqL1xyXG4gICAgc2VsZWN0Rmlyc3ROb2RlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnJvd05vZGVzICYmIHRoaXMuc3RhdGUucm93Tm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2FuU2VsZWN0Tm9kZSA9IHRoaXMuc3RhdGUucm93Tm9kZXMuZmluZChuID0+IG4ubm9kZS5zZWxlY3RhYmxlKTtcclxuICAgICAgICAgICAgaWYgKGZpcnN0Q2FuU2VsZWN0Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKGZpcnN0Q2FuU2VsZWN0Tm9kZS5pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzY3JvbGxUb0N1cnJlbnRSb3coaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRySWQgPSAncm93bm9kZS0nICsgaWQ7XHJcbiAgICAgICAgLy8gY29uc3QgdHJFbGUgPSAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0cklkKTtcclxuICAgICAgICBjb25zdCB0ckVsZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRySWQpO1xyXG4gICAgICAgIGlmICh0ckVsZSAmJiB0ckVsZS5jbG9zZXN0KCcuZmFycmlzLXRyZWV0YWJsZScpICYmIHRyRWxlLmNsb3Nlc3QoJy5mYXJyaXMtdHJlZXRhYmxlJykuaWQgPT09IHRoaXMuaWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRWxlbWVudEluVmlld3BvcnQodHJFbGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJFbGUuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyRWxlLnNjcm9sbEludG9WaWV3SWZOZWVkZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJyb3dzZXJJbmZvID0gdGhpcy51dGlscy5nZXRCcm93c2VyVHlwZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJJbmZvLmZmICYmIHRoaXMudXRpbHMuZ2V0RkZWZXIoKSA8IDU4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJFbGUuc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJFbGUuc2Nyb2xsSW50b1ZpZXcoeyBibG9jazogJ25lYXJlc3QnLCBpbmxpbmU6ICduZWFyZXN0JyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyRWxlLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICduZWFyZXN0J30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0VsZW1lbnRJblZpZXdwb3J0KGVsKSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy10cmVldGFibGUtYm9keScpO1xyXG4gICAgICAgIGlmICghY29udGFpbmVyRWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCB2aWV3UG9ydEhlaWdodCA9IGNvbnRhaW5lci5oZWlnaHQ7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0VG9wID0gZWwub2Zmc2V0VG9wICsgdGhpcy50b3BIaWRlSGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgY29uc3QgdG9wID0gb2Zmc2V0VG9wIC0gc2Nyb2xsVG9wO1xyXG4gICAgICAgIHJldHVybiAgdG9wID49IDAgJiYgdG9wIDw9IHZpZXdQb3J0SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3Njcm9sbFRvTm9kZShub2RlSWQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Tm9kZShub2RlSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbFRvQ3VycmVudE5vZGUobm9kZWlkID0gJycpIHtcclxuICAgICAgICBsZXQgaWQgPSBub2RlaWQ7XHJcbiAgICAgICAgaWYgKCFub2RlaWQgJiYgdGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBpZCA9IHRoaXMuc2VsZWN0ZWRSb3cuaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaWQgPT0gbnVsbCB8fCBpZCA9PSB1bmRlZmluZWQgfHwgaWQgPT0gJycpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zY3JvbGxUb0N1cnJlbnRSb3coaWQpO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgY29uc3Qgc2hvd1Jvd3NPbmVQYWdlciA9IE1hdGguY2VpbCh0aGlzLnNjb3JsbEJvZHlIZWlnaHQgLyB0aGlzLnJvd0hlaWdodCApICsgMTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUucGFyZW50cyAmJiByb3dOb2RlLnBhcmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLnBhcmVudHMuZm9yRWFjaChwaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kTm9kZShwaWQsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbHRlcihuID0+IG4udmlzaWJsZSkuZmluZEluZGV4KG4gPT4gbi5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICBpZiAocm93SW5kZXggPCBzaG93Um93c09uZVBhZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHJvd0luZGV4ICogdGhpcy5yb3dIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhKHRvcCAtIHRoaXMucm93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudFJvdyhpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9ZKHRvcCAtIHRoaXMucm93SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9DdXJyZW50Um93KGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5Lit5oyH5a6aSUQg55qE6IqC54K5LFxyXG4gICAgICogZGV0ZWN0Q2hhbmdlczog6Kem5Y+R6ISP5YC85qOA5p+l77yM6buY6K6k5Li6IHRydWVcclxuICAgICAqIGdvdG9jdXJyZW50OiDkvb/nlKjpgInkuK3oioLngrnlj6/op4HvvIzpu5jorqTkuLogdHJ1ZVxyXG4gICAgICovXHJcbiAgICBzZWxlY3ROb2RlKGlkOiBzdHJpbmcsIGRldGVjdENoYW5nZXMgPSB0cnVlLCBnb3RvY3VycmVudCA9IHRydWUpOiBUcmVlVGFibGVDb21wb25lbnQge1xyXG4gICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICAgICAgY29uc3QgY2FuU2VsZWN0ID0gbm9kZSAmJiBub2RlLm5vZGUgJiYgbm9kZS5ub2RlLnNlbGVjdGFibGU7XHJcbiAgICAgICAgY29uc3QgZW1pdCA9IGNhblNlbGVjdCAmJiAoIXRoaXMuc2VsZWN0ZWRSb3cgfHwgKHRoaXMuc2VsZWN0ZWRSb3cgJiYgaWQgIT09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpKTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGUgJiYgZW1pdCkge1xyXG4gICAgICAgICAgICBub2RlLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgfHwgdGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbbm9kZS5ub2RlXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT25TZWxlY3QgJiYgdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkcyA9IFtub2RlLm5vZGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZVVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKG5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbm9kZS5ub2RlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE5vZGVDaGFuZ2VkU3ViamVjdC5uZXh0KGlkKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlU2VsZWN0ZWQuZW1pdCh7IG5vZGU6IG5vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXJpYWxpemVkVmFsdWUuZmluZChuPT5uLmlkID09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZS5maW5kKG49Pm4uaWQgPT0gdGhpcy5zZWxlY3RlZFJvdy5pZCkuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChnb3RvY3VycmVudCAmJiB0aGlzLmZpeGVkSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ3VycmVudE5vZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrmib7liLBJROS4uiAke2lkfSDnmoTmlbDmja7vvIHvvIFgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlj5bmtojpgInkuK0gKi9cclxuICAgIHVuU2VsZWN0Tm9kZShpZDogc3RyaW5nLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICBpZiAocm93Tm9kZSkge1xyXG4gICAgICAgICAgICByb3dOb2RlLmlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLmlzQ2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbmx5U2VsZWN0U2VsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbnMocm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vZGVVblNlbGVjdC5lbWl0KHsgbm9kZTogcm93Tm9kZS5ub2RlLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5pyq5om+5YiwSUTkuLoke2lkfeeahOaVsOaNru+8ge+8gWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog6YCJ5Lit5aSa6KGM5pWw5o2uICovXHJcbiAgICBzZWxlY3ROb2RlcyhpZHM6IHN0cmluZ1tdLCBkZXRlY3RDaGFuZ2VzID0gdHJ1ZSwgZW1pdE5vZGVTZWxlY3RlZCA9IGZhbHNlKTogVHJlZVRhYmxlQ29tcG9uZW50IHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLmZpbmRSb3dOb2RlcyhpZHMpLm1hcChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhybik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm4ubm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSBbLi4udGhpcy5zZWxlY3Rpb25zXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlQ2hhbmdlZFN1YmplY3QubmV4dChpZHMuam9pbignLCcpKTtcclxuICAgICAgICAgICAgaWYgKGVtaXROb2RlU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVNlbGVjdGVkLmVtaXQoeyBub2RlOiBub2RlcywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWPlua2iOmAieS4rSAqL1xyXG4gICAgdW5TZWxlY3ROb2RlcyhpZHM/OiBzdHJpbmdbXSwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93bm9kZXMgPSB0aGlzLmZpbmRSb3dOb2RlcyhpZHMpO1xyXG4gICAgICAgICAgICBpZiAocm93bm9kZXMgJiYgcm93bm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dub2Rlcy5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBybi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJuKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gWy4uLnRoaXMuc2VsZWN0aW9uc107XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlVW5TZWxlY3QuZW1pdCh7IG5vZGU6IHJvd25vZGVzLm1hcChyID0+IHIubm9kZSksIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6ZKp6YCJ5oyH5a6a55qE6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXM6IOaYr+WQpuabtOaWsOeItue6p+iKgueCuWNoZWNrYm94IOeKtuaAgSwg6buY6K6k5Li6IHRydWVcclxuICAgICAqIEBwYXJhbSBkZXRlY3RDaGFuZ2VzIOinpuWPkeWPmOabtOajgOa1i+OAgum7mOiupOS4uiB0cnVlXHJcbiAgICAgKi9cclxuICAgIGNoZWNrZWROb2RlKGlkOiBzdHJpbmcsIHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzID0gdHJ1ZSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZU11bHRpU2VsZWN0KCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5pc0NoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2hlY2tlZChub2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVja2Vkcyhub2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzICYmIHRoaXMuY2FzY2FkZUNoZWNrICYmIHRoaXMuY2FzY2FkZVVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRldGVjdENoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZUNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IG51bGwsIG5vZGU6IG5vZGUubm9kZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZShg5pyq5om+5YiwSUTkuLoke2lkfeeahOaVsOaNru+8ge+8gWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tlZE5vZGUoaWQ6IHN0cmluZywgdXBkYXRlUGFyZW50Q2hlY2tib3hTdGF0dXMgPSB0cnVlLCApIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZU11bHRpU2VsZWN0KCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm93bm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJvd25vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJvd25vZGUuaXNDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENoZWNrZWRzKHJvd25vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0T25DaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd25vZGUuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9ucyhyb3dub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3cgJiYgdGhpcy5zZWxlY3RlZFJvdy5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QgfHwgIXRoaXMuY2FzY2FkZUNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOb2RlU3RhdHVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVQYXJlbnRDaGVja2JveFN0YXR1cyAmJiB0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBhcmVudENoZWNrYm94U3RhdHVzKHJvd25vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoaXMuY2hlY2tWYWx1ZXMuZmlsdGVyKG4gPT4gbiAhPT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrVmFsdWVzQ2hhbmdlLmVtaXQodGhpcy5jaGVja1ZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG5vZGU6IHJvd25vZGUsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bk5vZGVzID0gdGhpcy5jYXNjYWRlTm9kZXMocm93bm9kZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZHMgPSBbLi4udGhpcy5jaGVja2Vkc107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlc0NoYW5nZS5lbWl0KHRoaXMuY2hlY2tWYWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG5vZGU6IHJvd25vZGUsIG5vZGVzOiB1bk5vZGVzLCBpbnN0YW5jZTogdGhpcyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOacquaJvuWIsElE5Li6JHtpZH3nmoTmlbDmja7vvIHvvIFgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja2VkTm9kZXMoaWRzOiBzdHJpbmdbXSwgY2hlY2tlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IHBhcmVudElEUyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5maW5kUm93Tm9kZXMoaWRzKS5tYXAocm4gPT4ge1xyXG4gICAgICAgICAgICBwYXJlbnRJRFMucHVzaChybi5wYXJlbnRzKTtcclxuICAgICAgICAgICAgaWYgKHJuLm5vZGUuc2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcm4uaXNDaGVja2VkID0gY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2hlY2tlZHMocm4sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcm4ubm9kZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gWy4uLnRoaXMuY2hlY2tlZHNdO1xyXG4gICAgICAgIGlmICh0aGlzLmNhc2NhZGVDaGVjayAmJiB0aGlzLmNhc2NhZGVVcCkge1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDniLboioLngrnlpI3moYbnmoTpgInkuK3nirbmgIFcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJlbnRzQ2hlY2tTdGF0dXMocGFyZW50SURTKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiog5om56YeP6YCJ5Lit6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gaWRzOiBpZCDpm4blkIhcclxuICAgICAqIEBwYXJhbSBkZXRlY3RDaGFuZ2VzOiBib29sZWFuICDpu5jorqTkuLogdHJ1ZSAs5piv5ZCm6Kem5Y+R5Y+Y5pu05qOA5rWLXHJcbiAgICAgKiBjbG9zZUNhc2NhZGU6ICDmiafooYzlj5bmtojpkqnpgInml7bmmK/lkKblhbPpl63nuqfogZTlip/og73jgILpu5jorqTkuLogZmFsc2VcclxuICAgICAqICAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICovXHJcbiAgICBjaGVja2VkTm9kZXMoaWRzOiBhbnlbXSwgZGV0ZWN0Q2hhbmdlcyA9IHRydWUsIGVtaXQgPSB0cnVlLCBjbG9zZUNhc2NhZGU/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVNdWx0aVNlbGVjdCgpKSB7XHJcbiAgICAgICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IF9jYXNjYWRlID0gdGhpcy5jYXNjYWRlQ2hlY2s7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuX2NoZWNrZWROb2RlcyhpZHMsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjbG9zZUNhc2NhZGUgJiYgX2Nhc2NhZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmgaLlpI3nuqfogZRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDaGVja2JveFN0YXR1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZXRlY3RDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVDaGVja2VkLmVtaXQoeyBvcmlnaW5hbEV2ZW50OiBudWxsLCBub2RlOiBub2Rlcywgbm9kZXMsIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+W5raI6YCJ5Lit55qE6IqC54K5LlxyXG4gICAgICogaWRzOiDmoIfor4ZJZCDmlbDnu4RcclxuICAgICAqIGNsb3NlQ2FzY2FkZTog5omn6KGM5Y+W5raI6ZKp6YCJ5pe25piv5ZCm5YWz6Zet57qn6IGU5Yqf6IO944CC6buY6K6k5Li6IGZhbHNlXHJcbiAgICAgKiAgICAg6K6+5Li6dHJ1ZeaXtu+8jOmSqemAieWwhuemgeeUqOe6p+iBlOeahOWKn+iDve+8jOS7heWkhOeQhuW9k+WJjeiKgueCueeahOmAieS4reeKtuaAgeOAguaJp+ihjOWujOavleWQju+8jOaBouWkjeWOn+WFiOeahOe6p+iBlOmAiemhueOAglxyXG4gICAgICogZW1pdDog5piv5ZCm6Kem5Y+R5Y+W5raI5Yu+6YCJ5LqL5Lu244CC6buY6K6k5Li6IHRydWVcclxuICAgICAqL1xyXG4gICAgdW5DaGVja2VkTm9kZXMoaWRzOiBzdHJpbmdbXSwgY2xvc2VDYXNjYWRlPzogYm9vbGVhbiwgZW1pdCA9IHRydWUpIHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgX2Nhc2NhZGUgPSB0aGlzLmNhc2NhZGVDaGVjaztcclxuICAgICAgICAgICAgaWYgKGNsb3NlQ2FzY2FkZSAmJiBfY2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXNjYWRlQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLl9jaGVja2VkTm9kZXMoaWRzLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2xvc2VDYXNjYWRlICYmIF9jYXNjYWRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhc2NhZGVDaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVVbkNoZWNrZWQuZW1pdCh7IG9yaWdpbmFsRXZlbnQ6IG51bGwsIG5vZGU6IG5vZGVzLCBub2RlcywgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQ2hlY2tlZHMoKTtcclxuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuQ2hlY2tlZEFuZFNlbGVjdGVkKGlkczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnVuQ2hlY2tlZE5vZGVzKGlkcywgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudW5TZWxlY3ROb2RlcyhpZHMsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kUm93Tm9kZShpZDogc3RyaW5nKTogUm93Tm9kZSB7XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnJvd05vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlsIblnKggdjAuMi54IOW6n+W8g++8m+ivt+S9v+eUqCBmaW5kUm93Tm9kZSDmlrnms5UgKi9cclxuICAgIGZpbmROb2RlKGlkOiBzdHJpbmcpOiBSb3dOb2RlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5kUm93Tm9kZShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lvZPliY3oioLngrlJRO+8jOiOt+WPlumhtue6p+eItuiKgueCuVxyXG4gICAgICogQHBhcmFtIGlkIOW9k+WJjeiKgueCuUlEXHJcbiAgICAgKiBAcmV0dXJucyDov5Tlm57pobbnuqfoioLngrlcclxuICAgICAqL1xyXG4gICAgZ2V0Um9vdChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgcm93Tm9kZSA9IHRoaXMuZmluZFJvd05vZGUoaWQpO1xyXG4gICAgICAgIGlmIChyb3dOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlLnBhcmVudHMgJiYgcm93Tm9kZS5wYXJlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZFJvd05vZGUocm93Tm9kZS5wYXJlbnRzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcm93Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZpbmRSb3dOb2RlcyhpZHM6IHN0cmluZ1tdKTogUm93Tm9kZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5yb3dOb2Rlcy5maWx0ZXIocm4gPT4gaWRzLmluZGV4T2Yocm4uaWQpID4gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQWxsTm9kZXMoYXJncz86IGFueSkge1xyXG4gICAgICAgIGxldCByb3dOb2RlcyA9IHRoaXMuZ2V0Q3VycmVudEFsbFJvd05vZGVzKCk7XHJcbiAgICAgICAgcm93Tm9kZXMgPSByb3dOb2Rlcy5maWx0ZXIobiA9PiAobi5ub2RlLnNlbGVjdGFibGUgfHwgbi5ub2RlLnNlbGVjdGFibGUgPT09IHVuZGVmaW5lZCkpO1xyXG5cclxuICAgICAgICB0aGlzLmNoZWNrZWRzID0gcm93Tm9kZXMubWFwKG4gPT4ge1xyXG4gICAgICAgICAgICBuLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy50dFNlcnZpY2Uub25DaGFuZ2VDaGVja2JveFN0YXR1cyhuKTtcclxuICAgICAgICAgICAgaWYgKG4ubm9kZS5zZWxlY3RhYmxlIHx8IG4ubm9kZS5zZWxlY3RhYmxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG4uaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbi5ub2RlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RPbkNoZWNrICYmICF0aGlzLm9ubHlTZWxlY3RTZWxmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHJvd05vZGVzLm1hcChuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChuLm5vZGUuc2VsZWN0YWJsZSB8fCBuLm5vZGUuc2VsZWN0YWJsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuLm5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoZWQpIHtcclxuICAgICAgICAgICAgcm93Tm9kZXMuZm9yRWFjaChybiA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSB0aGlzLnN0YXRlLnJvd05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBybi5pZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmlzU2VsZWN0ZWQgPSBybi5pc1NlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5pc0NoZWNrZWQgPSBybi5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0FsbC5lbWl0KGFyZ3MpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxsQ2hlY2tib3hTdGF0dXMoKTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICB1bkNoZWNrQWxsTm9kZXMoYXJncz86IGFueSkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJBbGwoKTtcclxuICAgICAgICB0aGlzLnVuQ2hlY2tBbGwuZW1pdChhcmdzKTtcclxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzRW5hYmxlTXVsdGlTZWxlY3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zaG93Q2hlY2tib3gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5LuO5pWw5o2u5Lit6I635Y+W6IqC54K55Zu+5qCHXHJcbiAgICAvLyBpY29uRmllbGQg5Li6IG9iamVjdFxyXG4gICAgLy8gICAgICDlpoLmnpwg5bGV5byA5Zu+5qCH5Li656m677yM5oqY5Y+g5Zu+5qCH5LiN5Li656m677yM5oiW5Y+N5LmL77yM5YiZ5bGV5byA5LiO5oqY5Y+g5Zu+5qCH5L+d5oyB5LiA6Iez77ybXHJcbiAgICAvLyAgICAgIOWmguaenCDlj7blrZDlm77moIfkuLrnqbrvvIzliJnkvb/nlKjnu4Tku7bpu5jorqTnmoTlm77moIdcclxuICAgIC8vIGljb25GaWVsZCDkuLog5a2X56ym5Liy77yaIOWImeWPtuWtkCDlsZXlvIAg5oqY5Y+gIOWbvuagh+S9v+eUqOWQjOS4gOS4quOAgiDlpoLmnpzkuLrnqbrvvIwg5YiZ5L2/55So57uE5Lu26buY6K6k5Zu+5qCHXHJcbiAgICBwcml2YXRlIGdldE5vZGVJY29uRnJvbURhdGEodG46IFRyZWVOb2RlKSB7XHJcbiAgICAgICAgbGV0IGxlYWYgPSBudWxsO1xyXG4gICAgICAgIGxldCBleHBhbmQgPSBudWxsO1xyXG4gICAgICAgIGxldCBjb2xsYXBzZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlSWNvbkZyb21EYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmljb25GaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IF9pY29uRmllbGQgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5pY29uRmllbGQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2ljb25GaWVsZCA9IHRoaXMuaWNvbkZpZWxkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0bltfaWNvbkZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gdG5bX2ljb25GaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoX2ljb25GaWVsZCwgdG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBleHBhbmQgPSBjb2xsYXBzZSA9IGxlYWY7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmljb25GaWVsZC5sZWFmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYWYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuaWNvbkZpZWxkLmxlYWYsIHRuLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pY29uRmllbGQuZXhwYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy5pY29uRmllbGQuZXhwYW5kLCB0bi5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaWNvbkZpZWxkLmNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlID0gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLmljb25GaWVsZC5jb2xsYXBzZSwgdG4uZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kICYmICFjb2xsYXBzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZSA9IGV4cGFuZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXhwYW5kICYmIGNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZCA9IGNvbGxhcHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlYWYsIGV4cGFuZCwgY29sbGFwc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRyZWVJY29uKHRyZWVOb2RlOiBUcmVlTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IHRuID0gdHJlZU5vZGU7XHJcbiAgICAgICAgbGV0IGxlYWZJY29uID0gdGhpcy5sZWFmSWNvbiB8fCAnZmlsZSc7XHJcbiAgICAgICAgbGV0IGV4cGFuZEljb24gPSB0aGlzLmV4cGFuZEljb24gfHwgJ2ZvbGRlci1vcGVuJztcclxuICAgICAgICBsZXQgY29sbGFwc2VJY29uID0gdGhpcy5jb2xsYXBzZUljb24gfHwgJ2ZvbGRlcic7XHJcbiAgICAgICAgY29uc3QgbG9hZGluZyA9ICdmLWxvYWRpbmctcm91bmQnO1xyXG5cclxuICAgICAgICBpZiAodG5bJ3Nob3dMb2FkaW5nJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgW2xvYWRpbmddOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uaWNvbikge1xyXG4gICAgICAgICAgICBsZWFmSWNvbiA9IHRuLmljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uZXhwYW5kZWRJY29uKSB7XHJcbiAgICAgICAgICAgIGV4cGFuZEljb24gPSB0bi5leHBhbmRlZEljb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG4uY29sbGFwc2VkSWNvbikge1xyXG4gICAgICAgICAgICBjb2xsYXBzZUljb24gPSB0bi5jb2xsYXBzZWRJY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlSWNvbkZyb21EYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhZiwgZXhwYW5kLCBjb2xsYXBzZSB9ID0gdGhpcy5nZXROb2RlSWNvbkZyb21EYXRhKHRyZWVOb2RlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2hlbkRhdGFJY29uRW1wdHlVc2VEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVhZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYWZJY29uID0gbGVhZjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBhbmRJY29uID0gZXhwYW5kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VJY29uID0gY29sbGFwc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZWFmSWNvbiA9IGxlYWYgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBleHBhbmRJY29uID0gZXhwYW5kIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgY29sbGFwc2VJY29uID0gY29sbGFwc2UgfHwgJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBjb25zdCBjb2xsYXBzZWRFeHByZXNzaW9uID0gKCF0bi5sZWFmIHx8ICEhKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCkpICYmICF0bi5leHBhbmRlZDtcclxuICAgICAgICBjb25zdCBleHBhbmRlZEV4cHJlc3Npb24gPSAhIXRuLmV4cGFuZGVkO1xyXG4gICAgICAgIGNvbnN0IGxlYWZFeHByZXNzaW9uID0gdG4ubGVhZiA9PT0gdW5kZWZpbmVkID8gKCF0bi5jaGlsZHJlbiB8fCAhdG4uY2hpbGRyZW4ubGVuZ3RoKSA6IHRuLmxlYWY7XHJcblxyXG4gICAgICAgIGNvbnN0IGljb25zID0ge307XHJcblxyXG4gICAgICAgIGlmIChsZWFmRXhwcmVzc2lvbiAmJiBsZWFmSWNvbikge1xyXG4gICAgICAgICAgICBpY29uc1tsZWFmSWNvbl0gPSBsZWFmRXhwcmVzc2lvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodG4uZXhwYW5kZWQgJiYgZXhwYW5kSWNvbikge1xyXG4gICAgICAgICAgICAgICAgaWNvbnNbZXhwYW5kSWNvbl0gPSBleHBhbmRlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2VJY29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbnNbY29sbGFwc2VJY29uXSA9IGNvbGxhcHNlZEV4cHJlc3Npb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25DbHMpIHtcclxuICAgICAgICAgICAgaWNvbnNbdGhpcy5pY29uQ2xzXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaWNvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wYXJlKGEsIGIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogKGEgPiBiID8gMSA6IC0xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9zb3J0KHIxLCByMikge1xyXG4gICAgICAgIGxldCByID0gMDtcclxuICAgICAgICBjb25zdCBzb3J0RmllbGRzID0gdGhpcy5zb3J0TmFtZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IHRoaXMuc29ydE9yZGVyLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zb3J0TmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydEZpZWxkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzbiA9IHNvcnRGaWVsZHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNvID0gb3JkZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2x1bW5zLmZpbmQoYyA9PiBjLmZpZWxkID09PSBzbik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcmRlcmJ5ID0gY29sLnNvcnRlciB8fCB0aGlzLmNvbXBhcmU7XHJcbiAgICAgICAgICAgIGxldCB2MSA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoc24sIHIxLmRhdGEpO1xyXG4gICAgICAgICAgICBpZiAodjEgPT09IG51bGwgfHwgdjEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdjEgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdjIgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHNuLCByMi5kYXRhKTtcclxuICAgICAgICAgICAgaWYgKHYyID09PSBudWxsIHx8IHYyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHYyID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgciA9IG9yZGVyYnkodjEsIHYyKTtcclxuICAgICAgICAgICAgaWYgKHIgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByICogKHNvID09PSAnYXNjJyA/IDEgOiAtMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcblxyXG4gICAgY2xpZW50U29ydCgpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEgfHwgIXRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc29ydGVkRGF0YSA9IHRoaXMuZGF0YS5zb3J0KHRoaXMuX3NvcnQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNvcnRDaGlsZE5vZGVzID0gKGNoaWxkTm9kZXMpID0+IHtcclxuICAgICAgICAgICAgY2hpbGROb2RlcyA9IGNoaWxkTm9kZXMuc29ydCh0aGlzLl9zb3J0LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBjaGlsZE5vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uY2hpbGRyZW4gPSBuLmNoaWxkcmVuLnNvcnQodGhpcy5fc29ydC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0Q2hpbGROb2RlcyhuLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZE5vZGVzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvcnRlZERhdGEuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgYy5jaGlsZHJlbiA9IHNvcnRDaGlsZE5vZGVzKGMuY2hpbGRyZW4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWREYXRhKHNvcnRlZERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU29ydENvbHVtbkNsaWNrKCRldmVudCwgY29sKSB7XHJcbiAgICAgICAgaWYgKCFjb2wuc29ydGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzb3J0TmFtZSA9IHRoaXMuc29ydE5hbWU7XHJcbiAgICAgICAgY29uc3Qgc29ydE9yZGVyID0gdGhpcy5zb3J0T3JkZXI7XHJcbiAgICAgICAgbGV0IHNvcnRGaWVsZHMgPSBbXTtcclxuICAgICAgICBsZXQgc29ydE9yZGVycyA9IFtdO1xyXG4gICAgICAgIGlmIChzb3J0TmFtZSkge1xyXG4gICAgICAgICAgICBzb3J0RmllbGRzID0gc29ydE5hbWUuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgc29ydE9yZGVycyA9IHNvcnRPcmRlci5zcGxpdCgnLCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY29sT3JkZXIgPSBjb2wub3JkZXIgfHwgJ2FzYyc7XHJcbiAgICAgICAgbGV0IG5ld09yZGVyID0gY29sT3JkZXI7XHJcbiAgICAgICAgY29uc3QgaSA9IHNvcnRGaWVsZHMuZmluZEluZGV4KG4gPT4gbiA9PT0gY29sLmZpZWxkKTtcclxuICAgICAgICBpZiAoaSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9vcmRlciA9IHNvcnRPcmRlcnNbaV0gPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIG5ld09yZGVyID0gX29yZGVyO1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5tdWx0aVNvcnQgJiYgbmV3T3JkZXIgPT09ICdhc2MnKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdPcmRlciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgICAgIG5ld09yZGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgc29ydEZpZWxkcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnNbaV0gPSBfb3JkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzLnB1c2goY29sLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlcnMucHVzaChjb2xPcmRlcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRzID0gW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXJzID0gW2NvbE9yZGVyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29sLm9yZGVyID0gbmV3T3JkZXI7XHJcblxyXG4gICAgICAgIHRoaXMuc29ydE5hbWUgPSBzb3J0RmllbGRzLmpvaW4oJywnKTtcclxuICAgICAgICB0aGlzLnNvcnRPcmRlciA9IHNvcnRPcmRlcnMuam9pbignLCcpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubXVsdGlTb3J0KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVGaWVsZE9yZGVyID0gKGNvbHM6IFRyZWVUYWJsZUNvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbHMgfHwgIWNvbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29scy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGMub3JkZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgayA9IHNvcnRGaWVsZHMuZmluZEluZGV4KGYgPT4gZiA9PT0gYy5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLm9yZGVyID0gc29ydE9yZGVyc1trXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkT3JkZXIodGhpcy5jb2x1bW5zKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJlZm9yZVNvcnRDb2x1bW4odGhpcy5zb3J0TmFtZSwgdGhpcy5zb3J0T3JkZXIpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZVNvcnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudFNvcnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5Tb3J0ZWQuZW1pdCh7IHNvcnROYW1lOiB0aGlzLnNvcnROYW1lLCBzb3J0T3JkZXI6IHRoaXMuc29ydE9yZGVyIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiDmn6Xor6Llt6XlhbfmnaHliY3nq6/lrZfnrKbmn6Xor6IgKi9cclxuICAgIGZpbmRLZXlXb3JkcygkZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZSA9ICRldmVudC52YWx1ZTtcclxuICAgICAgICBjb25zdCBmaWVsZCA9ICRldmVudC5maWVsZDtcclxuICAgICAgICB0aGlzLmZpbmRGaWVsZCA9IGZpZWxkO1xyXG4gICAgICAgIGlmIChzZWFyY2hWYWx1ZSAmJiBzZWFyY2hWYWx1ZS5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9IHNlYXJjaFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoJ1BsZWFzZSBzZXQgYSBmaWVsZCBmb3IgdGhlIEZpbmRGaWVsZCBwcm9wZXJ0eS4nLCAnd2FybicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNlYXJjaEhhbmRsZS5zZWFyY2hPbkNsaWVudChmaWVsZCwgc2VhcmNoVmFsdWUsIHRoaXMuc3RhdGUucm93Tm9kZXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSByZXN1bHQuc29ydCgoYSwgYikgPT4gYS5pbmRleCA9PT0gYi5pbmRleCA/IDAgOiAoYS5pbmRleCA+IGIuaW5kZXggPyAxIDogLTEpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZENvdW50ID0gcmVzdWx0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxUb05vZGUocmVzdWx0WzBdLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hMaWdodEtleXdvcmRzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldEZpbmRUZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgbmV4dEZpbmRWYWx1ZShzdGVwKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpbmRSZXN1bHQgfHwgIXRoaXMuZmluZFJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhbGxIaWdoTGlnaHRzID0gQXJyYXkuZnJvbSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaC1oaWdobGlnaHQnKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbmRDdXJyZW50ID09PSB0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzdGVwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gdGhpcy5maW5kQ3VycmVudCArIHN0ZXA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZEN1cnJlbnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaGlnaGxpZ2h0LmFjdGl2ZScpO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoYWN0aXZlLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfaW5kZXggPSB0aGlzLmZpbmRDdXJyZW50IC0gMTtcclxuICAgICAgICBjb25zdCBuZXh0Um93ID0gdGhpcy5maW5kUmVzdWx0W19pbmRleF07XHJcbiAgICAgICAgaWYgKG5leHRSb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVG9Ob2RlKG5leHRSb3cuaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1snSElHSF9MSUdIVF9USU1FUiddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzWydISUdIX0xJR0hUX1RJTUVSJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzWydISUdIX0xJR0hUX1RJTUVSJ10gPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJJZCA9ICdyb3dub2RlLScgKyBuZXh0Um93LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ciA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpZ2hMaWdodERvbSA9IHRyLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaExpZ2h0RG9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhoaWdoTGlnaHREb20sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbGxIaWdoTGlnaHRzW19pbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbX2luZGV4XSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5p+l6K+i5bel5YW35p2h5YmN56uv5a2X56ym5p+l6K+iICovXHJcbiAgICAvKlxyXG4gICAgZmluZEtleVdvcmRzKCRldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFZhbHVlID0gJGV2ZW50LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gJGV2ZW50LmZpZWxkO1xyXG4gICAgICAgIHRoaXMuZmluZEZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaFZhbHVlICYmIHNlYXJjaFZhbHVlLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluZFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgnUGxlYXNlIHNldCBhIGZpZWxkIGZvciB0aGUgRmluZEZpZWxkIHByb3BlcnR5LicsICd3YXJuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2VhcmNoSGFuZGxlLnNlYXJjaE9uQ2xpZW50KGZpZWxkLCBzZWFyY2hWYWx1ZSwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IHJlc3VsdC5zb3J0KChhLCBiKSA9PiBhLmluZGV4ID09PSBiLmluZGV4ID8gMCA6IChhLmluZGV4ID4gYi5pbmRleCA/IDEgOiAtMSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RSb3dJbmRleCA9IHJlc3VsdFswXS5pbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IHJlc3VsdC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuc2VhcmNoSGFuZGxlLmZpbmRQYXJlbnRzKHJlc3VsdCwgdGhpcy5zdGF0ZS5yb3dOb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDE7XHJcbiAgICAgICAgICAgICAgICBbLi4ucGFyZW50cywgLi4ucmVzdWx0XS5mb3JFYWNoKChyOiBSb3dOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmROb2RlKHIuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5yb3dOb2Rlcy5mb3JFYWNoKChyb3c6IFJvd05vZGUsIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnZpc2libGUgJiYgZmlyc3RSb3dJbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gdGhpcy5yb3dIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5IC0gMzApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaExpZ2h0S2V5d29yZHMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0RmluZFRleHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jZFJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5leHRGaW5kVmFsdWUoc3RlcCkge1xyXG4gICAgICAgIGlmICghdGhpcy5maW5kUmVzdWx0IHx8ICF0aGlzLmZpbmRSZXN1bHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IEFycmF5LmZyb20odGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0JykpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5maW5kQ3VycmVudCA9PT0gdGhpcy5maW5kUmVzdWx0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc3RlcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kQ3VycmVudCA9IHRoaXMuZmluZEN1cnJlbnQgKyBzdGVwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0ZXAgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZEN1cnJlbnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRDdXJyZW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWhpZ2hsaWdodC5hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgbGV0IF9pbmRleCA9IGFsbEhpZ2hMaWdodHMuaW5kZXhPZihhY3RpdmUpO1xyXG5cclxuICAgICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoYWN0aXZlLCAnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsaXplZCkge1xyXG5cclxuICAgICAgICAgICAgX2luZGV4ICs9ICFzdGVwID8gMSA6IHN0ZXA7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWxsSGlnaExpZ2h0c1tfaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGFsbEhpZ2hMaWdodHNbX2luZGV4XSwgJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOWFiOa7muWKqOaMh+WumuS9jee9rlxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJvdyA9IHRoaXMuZmluZFJlc3VsdFt0aGlzLmZpbmRDdXJyZW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnJvd05vZGVzLmZvckVhY2goKHJvdzogUm93Tm9kZSwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3cudmlzaWJsZSAmJiBuZXh0Um93LmluZGV4ID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeSArPSB0aGlzLnJvd0hlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wc1JlZiAmJiB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHNSZWYuZGlyZWN0aXZlUmVmLnNjcm9sbFRvWSh5IC0gMzAsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleVdvcmRzID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gtaGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3Moa2V5V29yZHNbMF0sICdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RWw6IGFueSA9IGFsbEhpZ2hMaWdodHNbdGhpcy5maW5kQ3VycmVudCAtIDFdO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGN1cnJlbnRFbCwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHNSZWYgJiYgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzVG9wID0gY3VycmVudEVsLmNsb3Nlc3QoJ3RkJykub2Zmc2V0VG9wIC0gMzA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wc1JlZi5kaXJlY3RpdmVSZWYuc2Nyb2xsVG9ZKHNUb3AsIDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNkUmVmLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuKi9cclxuICAgIGNsb3NlRmluZFBhbmVsKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0ZpbmRJbnB1dCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzZXRGaW5kVGV4dCgpO1xyXG4gICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlnaExpZ2h0S2V5d29yZHMoKSB7XHJcbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsSGlnaExpZ2h0cyA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoLWhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxIaWdoTGlnaHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoYWxsSGlnaExpZ2h0c1swXSwgJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzZXRGaW5kVGV4dCgpIHtcclxuICAgICAgICB0aGlzLmZpbmRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZmluZEN1cnJlbnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZmluZENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpbmRSZXN1bHQgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgXHJcblxyXG4gICAgc2Nyb2xsVG9ZKHk6IG51bWJlciwgYW5pbWF0aW9ucyA9IDIwMCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuc2Nyb2xsWSA9IHkgfHwgMDtcclxuICAgICAgICB0aGlzLnBzUmVmLmRpcmVjdGl2ZVJlZi5zY3JvbGxUb1koeSwgYW5pbWF0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93T3JIaWRlQ29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSwgaXNIaWRlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmluZGV4T2Yobi5maWVsZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4udmlzaWJsZSA9ICFpc0hpZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkID09PSBuLmZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi52aXNpYmxlID0gIWlzSGlkZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NvbHVtbihmaWVsZDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnNob3dPckhpZGVDb2x1bW4oZmllbGQsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQ29sdW1uKGZpZWxkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUNvbHVtbihmaWVsZCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NoaWxkc0xvYWRpbmcocGFyZW50Tm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICBjb25zdCBjb2xzcGFuID0gdGhpcy5jb2x1bW5zLmZpbHRlcihuID0+IG4udmlzaWJsZSAhPT0gZmFsc2UpLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBkYXRhID0geyBbdGhpcy5pZEZpZWxkXTogJ+ato+WcqOWKoOi9veS4rS4uLi4nLCBfX2NvbHNwYW5fXzogY29sc3BhbiB9O1xyXG4gICAgICAgIHRoaXMubG9hZENoaWxkcmVuKFt7IGRhdGEsIF9fY2hpbGRzX2xvYWRpbmdfXzogdHJ1ZSB9XSwgcGFyZW50Tm9kZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hpbGRzUGFnZUNoYW5nZWQoJGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHNQYWdlQ2hhbmdlZC5lbWl0KCRldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cklkMkRhdGFJZCh0cikge1xyXG4gICAgICAgIHJldHVybiB0ci5pZC5yZXBsYWNlKCdyb3dub2RlLScsICcnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g5b+r5o236ZSuXHJcbiAgICBvbktleWRvd25FdmVudCgkZXZlbnQpIHtcclxuICAgICAgICBpZiAoISRldmVudCB8fCAhdGhpcy5zaW5nbGVTZWxlY3QgfHwgIXRoaXMuZGF0YSB8fCAhdGhpcy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBrZXlzID0gWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCddO1xyXG5cclxuICAgICAgICBpZiAoIWtleXMuaW5jbHVkZXMoJGV2ZW50LmtleSkgfHwgJGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgbGV0IG5ld0lkeDtcclxuICAgICAgICBjb25zdCB0cnMgPSBBcnJheS5mcm9tKHRoaXMuYm9keVRhYmxlLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKSk7XHJcbiAgICAgICAgY29uc3QgdHJDb3VudCA9IHRycy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkVHJJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFRySW5kZXggPSB0cnMuZmluZEluZGV4KChuOiBhbnkpID0+IHRoaXMudHJJZDJEYXRhSWQobikgPT09IHRoaXMuc2VsZWN0ZWRSb3cuaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRldmVudC5jb2RlID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgICAgICAgICBuZXdJZHggPSBzZWxlY3RlZFRySW5kZXggKyAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoJGV2ZW50LmNvZGUgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUckluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbmV3SWR4ID0gc2VsZWN0ZWRUckluZGV4IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ICYmICgkZXZlbnQuY29kZSA9PT0gJ0Fycm93UmlnaHQnIHx8ICRldmVudC5jb2RlID09PSAnQXJyb3dMZWZ0JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5kKHRoaXMuc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmV3SWR4ID49IDAgJiYgbmV3SWR4IDwgdHJDb3VudCkge1xyXG4gICAgICAgICAgICBjb25zdCBfdHIgPSB0cnNbbmV3SWR4XSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGlmIChfdHIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy50cklkMkRhdGFJZChfdHIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3ROb2RlKGlkKTtcclxuICAgICAgICAgICAgICAgIF90ci5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnbmVhcmVzdCcgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25CZWZvcmVTaG93Q29udGV4dE1lbnUgPSAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gcm93XzFfZml4ZWRsZWZ0ICByb3dfMSAgcm93XzFfZml4ZWRyaWdodFxyXG4gICAgICAgIGNvbnN0IHsgY29udGV4dE1lbnVEb20sIGV2ZW50IH0gPSBlO1xyXG5cclxuICAgICAgICBsZXQgcm93SUQgPSBldmVudC50YXJnZXQuaWQ7XHJcblxyXG4gICAgICAgIGlmIChjb250ZXh0TWVudURvbSkge1xyXG4gICAgICAgICAgICByb3dJRCA9IHRoaXMudHJJZDJEYXRhSWQoY29udGV4dE1lbnVEb20pO1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShyb3dJRCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZ28kID0gb2Yoe3Nob3c6IHRydWV9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlU2hvd0NvbnRleHRNZW51KSB7XHJcbiAgICAgICAgICAgICAgICBnbyQgPSB0aGlzLmJlZm9yZVNob3dDb250ZXh0TWVudSh7IGRhdGE6IHJvd05vZGUsIHRyZWU6IHRoaXMgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnbyQucGlwZShcclxuICAgICAgICAgICAgICAgIHN3aXRjaE1hcCgocjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuc2hvdykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIubWVudXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVJdGVtcyA9IHIubWVudXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRXID0gY29udGV4dE1lbnVEb20uY2xvc2VzdCgnLmZhcnJpcy10cmVldGFibGUnKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VyA9IGNvbnRleHRNZW51RG9tLm9mZnNldFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9jdXNUYXJnZXRXaWR0aCA9IHZpZXdwb3J0VyA+IHRhcmdldFcgPyB0YXJnZXRXIDogdmlld3BvcnRXO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YoeyBzaG93OiB0cnVlLCBkYXRhOiB7IGRhdGE6IHJvd05vZGUsIHRyZWU6IHRoaXMgfSwgZm9jdXNUYXJnZXRXaWR0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2YoeyBzaG93OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2YoeyBzaG93OiBmYWxzZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiog5qC55o2u5Lyg5YWl55qE54i257qnSUTvvIzojrflj5bmiYDmnInlrZDnuqfoioLngrkgKi9cclxuICAgIGdldENoaWxkTm9kZXMocGFyZW50SWQ6IHN0cmluZyk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGxldCBub2RlcyA9IFtdO1xyXG4gICAgICAgIGlmIChwYXJlbnRJZCkge1xyXG4gICAgICAgICAgICBjb25zdCByb3dOb2RlID0gdGhpcy5maW5kUm93Tm9kZShwYXJlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChyb3dOb2RlICYmIHJvd05vZGUubm9kZS5jaGlsZHJlbiAmJiByb3dOb2RlLm5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByb3dOb2RlLm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgodG46IFRyZWVOb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRuLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaCh0bik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzID0gbm9kZXMuY29uY2F0KHRoaXMuZ2V0Q2hpbGROb2Rlcyh0bi5pZCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOagueaNruS8oOWFpeeahOiKgueCuUlE77yMIOiOt+WPluaJgOacieeItue6p+iKgueCuSAqL1xyXG4gICAgZ2V0UGFyZW50Tm9kZXMoaWQ6IHN0cmluZyk6IFJvd05vZGVbXSB7XHJcbiAgICAgICAgbGV0IG5vZGVzID0gW107XHJcbiAgICAgICAgaWYgKGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd05vZGUgPSB0aGlzLmZpbmRSb3dOb2RlKGlkKTtcclxuICAgICAgICAgICAgaWYgKHJvd05vZGUgJiYgcm93Tm9kZS5wYXJlbnRzICYmIHJvd05vZGUucGFyZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJvd05vZGUucGFyZW50cy5mb3JFYWNoKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLmZpbmRSb3dOb2RlKG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChybiAmJiBybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChybik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW11cclxuICAgIH1cclxuXHJcbiAgICBvbkZpbHRlclJvd0lucHV0KCRldmVudCwgY29sKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJSb3dDb25kaXRpb25zID0gdGhpcy5maWx0ZXJSb3dDb25kaXRpb25zIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuZmlsdGVyUm93Q29uZGl0aW9uc1tjb2wuZmllbGRdID0gJGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5maWx0ZXJSb3dDb25kaXRpb25zKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJSb3dDb25kaXRpb25zW25dID09PSAnJyB8fCB0aGlzLmZpbHRlclJvd0NvbmRpdGlvbnNbbl0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmlsdGVyUm93Q29uZGl0aW9uc1tuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpc1snRklMVEVSQ09ORElUSU9OU19DSEFOR0VEX1RJTUVSJ10pIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXNbJ0ZJTFRFUkNPTkRJVElPTlNfQ0hBTkdFRF9USU1FUiddKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXNbJ0ZJTFRFUkNPTkRJVElPTlNfQ0hBTkdFRF9USU1FUiddID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSGFuZGxlLnNlYXJjaFdpdGhDb25kaXRpb25zKHRoaXMuZmlsdGVyUm93Q29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TmV3Q29sdW1uc1dpZHRoKCk7XHJcbiAgICAgICAgfSwgMjAwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdbdHJlZVRhYmxlQm9keV0nLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgICAgICA8bmctdGVtcGxhdGUgbmdGb3IgbGV0LXNlcmlhbGl6ZWROb2RlIGxldC1yb3dJbmRleD1cImluZGV4XCIgW25nRm9yT2ZdPVwidHQuc2VyaWFsaXplZFZhbHVlXCI+XHJcbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzZXJpYWxpemVkTm9kZS52aXNpYmxlXCI+XHJcbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0ZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogeyRpbXBsaWNpdDogc2VyaWFsaXplZE5vZGUsIG5vZGU6IHNlcmlhbGl6ZWROb2RlLm5vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0RhdGE6IHNlcmlhbGl6ZWROb2RlLm5vZGUuZGF0YSwgcm93SW5kZXg6IHJvd0luZGV4LCBjb2x1bW5zOiBjb2x1bW5zfVwiPlxyXG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICBgXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUVEJvZHlDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiDliJfpm4blkIhcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgY29sdW1uczogYW55W107XHJcblxyXG4gICAgLyoqIOihqOS9k+aooeadvyAqL1xyXG4gICAgQElucHV0KCkgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50KSB7IH1cclxufVxyXG5cclxuLy8gW3N0eWxlLm1hcmdpbkxlZnRdPVwicm93Tm9kZS5sZXZlbCAqIDE2ICsgJ3B4J1wiXHJcblxyXG4vKipcclxuICog5qCR6IqC54K55bGV5byA5oqY5Y+gXHJcbiAqL1xyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLXRyZWVUYWJsZVRvZ2dsZXInLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgIDxhICN0b2dnbGVyIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJ0cmVlbm9kZS1mb2xkXCIgKm5nSWY9XCJzaG93TGluZXNcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJyb3dOb2RlLm5vZGUuZXhwYW5kZWQgPyB0dC51bmZvbGRJY29uIDogdHQuZm9sZEljb25cIlxyXG4gICAgICAgICAgICBbc3R5bGUuZGlzcGxheV09XCJpc1Nob3dUcmlhbmdsZSA/ICcnIDogJ25vbmUnXCJcclxuICAgICAgICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soJGV2ZW50KVwiPjwvYT5cclxuXHJcbiAgICA8YSAjdG9nZ2xlciBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiXHJcbiAgICAgICAgICAgIGNsYXNzPVwidHJlZW5vZGUtZm9sZFwiICAqbmdJZj1cIiFzaG93TGluZXNcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJyb3dOb2RlLm5vZGUuZXhwYW5kZWQgPyB0dC51bmZvbGRJY29uIDogdHQuZm9sZEljb25cIlxyXG4gICAgICAgICAgICBbc3R5bGUubWFyZ2luTGVmdC5weF09XCJyb3dOb2RlLmxldmVsICogaW5kZW50U3BhY2luZ1wiXHJcbiAgICAgICAgICAgIFtzdHlsZS52aXNpYmlsaXR5XT1cImlzU2hvd1RyaWFuZ2xlID8gJ3Zpc2libGUnIDogJ2hpZGRlbidcIlxyXG4gICAgICAgICAgICAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCI+PC9hPlxyXG4gICAgPHNwYW4gY2xhc3M9XCJ0cmVlLWljb24tbGluZVwiIFtzdHlsZS5kaXNwbGF5XT1cImlzU2hvd1RyaWFuZ2xlICYmIHNob3dMaW5lcz8gJycgOiAnbm9uZSdcIj48L3NwYW4+XHJcbiAgICA8c3BhbiBbc3R5bGUuZGlzcGxheV09XCIodHQuc2hvd0ljb24gJiYgcm93Tm9kZS5ub2RlLnNob3dJY29uKSA/ICdpbmxpbmUtYmxvY2snOiAnbm9uZSdcIiBjbGFzcz1cInRyZWVub2RlLWljb25cIiBbbmdDbGFzc109XCJ0cmVlTm9kZUljb25cIj48L3NwYW4+XHJcblxyXG4gICAgPHR0LWNoZWNrYm94ICBbcm93Tm9kZV09XCJyb3dOb2RlXCIgKm5nSWY9XCJ0dC5zaG93Q2hlY2tib3hcIiBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIiBbY2hlY2tlZF09XCJyb3dOb2RlLmlzQ2hlY2tlZFwiID48L3R0LWNoZWNrYm94PlxyXG4gICAgYCxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogJ3R0VG9nZ2xlcidcclxufSlcclxuZXhwb3J0IGNsYXNzIFRyZWVUYWJsZVRvZ2dsZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgRG9DaGVjaywgT25DaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkIHtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1jbXAtdHJlZXRhYmxlLXRvZ2dsZXInKSBjbHMgPSB0cnVlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmoJHoioLngrlcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgcm93Tm9kZTogUm93Tm9kZTtcclxuICAgIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dMaW5lcyA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGluZGVudFNwYWNpbmcgPSAxNjtcclxuXHJcbiAgICB0cmVlTm9kZUljb24gPSB7fTtcclxuICAgIGlzU2hvd1RyaWFuZ2xlID0gZmFsc2U7XHJcbiAgICBub0NoaWxkcyA9IGZhbHNlO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcblxyXG4gICAgZ2V0IG9mZnNldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZCgndG9nZ2xlcicpIHRvZ2dsZXJFbDogRWxlbWVudFJlZjtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwcml2YXRlIG5nem9uZTogTmdab25lLCBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcbiAgICB9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLnRyZWVOb2RlSWNvbiA9IHRoaXMudHQuZ2V0VHJlZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICB0aGlzLm5vQ2hpbGRzID0gdGhpcy5oYXNDaGlsZHJlbigpO1xyXG4gICAgICAgIGNvbnN0IGV4cGFuZFN1YiA9IHRoaXMudHQuZXhwYW5kLnN1YnNjcmliZSgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucm93Tm9kZS5pZCA9PT0gbm9kZS5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5wc1JlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50dC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sbGFwc2VTdWIgPSB0aGlzLnR0LmNvbGxhcHNlLnN1YnNjcmliZSgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucm93Tm9kZS5pZCA9PT0gbm9kZS5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50dC5wc1JlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQucHNSZWYuZGlyZWN0aXZlUmVmLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50dC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYWRkTmV3U3ViID0gdGhpcy50dC5hcHBlbmROZXcuc3Vic2NyaWJlKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmlkID09PSBlLnBhcmVudC5kYXRhW3RoaXMudHQuaWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLm5vZGUubGVhZiB8fCB0aGlzLnJvd05vZGUubm9kZS5sZWFmID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3dOb2RlLm5vZGUubGVhZiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtleHBhbmRTdWIsIGNvbGxhcHNlU3ViLCBhZGROZXdTdWJdO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0xpbmVzICYmICFjaGFuZ2VzLnNob3dMaW5lcy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScsIHRoaXMuaXNTaG93VHJpYW5nbGUgPyAnJyA6ICdub25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUljb24odGhpcy5yb3dOb2RlLm5vZGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCEhY2hhbmdlcy5yb3dOb2RlLmN1cnJlbnRWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gISFjaGFuZ2VzLnJvd05vZGUucHJldmlvdXNWYWx1ZS5ub2RlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR0LnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbkNoaWxkcmVuTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c0NoaWxkcmVuTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VzLnJvd05vZGUuY3VycmVudFZhbHVlICYmIGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbiApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5DaGlsZHJlbkxlbmd0aCA9IGNoYW5nZXMucm93Tm9kZS5jdXJyZW50VmFsdWUubm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZS5wcmV2aW91c1ZhbHVlICYmIGNoYW5nZXMucm93Tm9kZS5wcmV2aW91c1ZhbHVlLm5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NoaWxkcmVuTGVuZ3RoID0gY2hhbmdlcy5yb3dOb2RlLnByZXZpb3VzVmFsdWUubm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbkNoaWxkcmVuTGVuZ3RoICE9IHByZXZpb3VzQ2hpbGRyZW5MZW5ndGggfHwgKCFjdXJyZW5DaGlsZHJlbkxlbmd0aCAmJiAhcHJldmlvdXNDaGlsZHJlbkxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlU2V0TGluZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSAmJiB0aGlzLnNob3dMaW5lcykge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVTZXRMaW5lcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdEb0NoZWNrKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaXNTaG93VHJpYW5nbGUgPSB0aGlzLnNob3dUcmlhbmdsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgICAgICAvLyBpZiAodGhpcy50dCAmJiB0aGlzLnR0LmRhdGEpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5yZVNldExpbmVzKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMudW5BbGxTdWJzY3JpcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgdW5BbGxTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaGFzQ2hpbGRyZW4oKSB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgdGhpcy5yb3dOb2RlLmxldmVsICE9PSAwIHx8ICh0bi5jaGlsZHJlbiAmJiB0bi5jaGlsZHJlbi5sZW5ndGggPiAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93VHJpYW5nbGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdG4gPSB0aGlzLnJvd05vZGUubm9kZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQubG9hZERhdGFUeXBlID09PSAnYWxsJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdG4ubGVhZiA9PT0gZmFsc2UgfHwgKHRuLmNoaWxkcmVuICYmIHRuLmNoaWxkcmVuLmxlbmd0aCA+IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0bi5sZWFmID09PSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVTZXRMaW5lcygpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LmNsb3Nlc3QoJy50cmVldGFibGUtY2VsbC1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVscyA9IHBhcmVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmVldGFibGUtbGluZXMnKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbGluZUVscy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbHNba10ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlckxpbmVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVuZGVyTGluZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTGluZXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm9MaW5lU3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQuY2xvc2VzdCgndHInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRkcyA9IHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQuY2xvc2VzdCgndHInKS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20odGRzKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShuLCAncGFkZGluZycsICcwLjI1cmVtIDAuNzVyZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBub0xpbmVTdHlsZSgpIHtcclxuICAgICAgICAvLyB0aGlzLmNscyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnbWFyZ2luLWxlZnQnLCBgJHt0aGlzLnJvd05vZGUubGV2ZWwgKiB0aGlzLmluZGVudFNwYWNpbmd9cHhgKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudCwgJ3Zpc2liaWxpdHknLCB0aGlzLmlzU2hvd1RyaWFuZ2xlID8gJ3Zpc2libGUnIDogJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LCAnZGlzcGxheScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckxpbmVzKCkge1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMucm93Tm9kZS5sZXZlbDtcclxuICAgICAgICBpZiAoICF0aGlzLnRvZ2dsZXJFbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmVudEVsID0gdGhpcy50b2dnbGVyRWwubmF0aXZlRWxlbWVudC5jbG9zZXN0KCcudHJlZXRhYmxlLWNlbGwtY29udGVudCcpO1xyXG5cclxuICAgICAgICBpZiAoIXBhcmVudEVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZmVyRWwgPSB0aGlzLnRvZ2dsZXJFbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmIChsZW4gPT09IDAgJiYgIXRoaXMuc2hvd1RyaWFuZ2xlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgcGFyZW50RWwuaW5zZXJ0QmVmb3JlKHRoaXMubmV3TGluZUVsZW1lbnQoKSwgcmVmZXJFbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuZWFyTGluZSA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG4gICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobmVhckxpbmUsIHJlZmVyRWwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNMZWFmID0gIXRoaXMuc2hvd1RyaWFuZ2xlKCk7XHJcbiAgICAgICAgICAgIGlmIChpc0xlYWYgJiYgaSA9PT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVMZWFmTm9kZUxpbmVzKHJlZmVyRWwsIHBhcmVudEVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld0xpbmVFbGVtZW50KGJvcmRlciA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBuZXdMaW5lRWwgPSB0aGlzLnJlbmRlci5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhuZXdMaW5lRWwsICd0cmVldGFibGUtbGluZXMnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0xpbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChib3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKG5ld0xpbmVFbCwgJ3RyZWV0YWJsZS1saW5lcy1ib3JkZXItY29sb3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3TGluZUVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCgIOKInyBvciDilJxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVMZWFmTm9kZUxpbmVzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGFyZW50RWw6IEVsZW1lbnQsIGlzVG9wTm9kZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8g4pScXHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lc1wiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiByZ2IoMjA0LCAyMDQsIDIwNCk7XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIm5vcm1hbFwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICAvLyDiiJ9cclxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwidHJlZXRhYmxlLWxpbmVzXCIgc3R5bGU9XCJib3JkZXItY29sb3I6IHRyYW5zcGFyZW50XCI+PC9kaXY+XHJcbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cInRyZWV0YWJsZS1saW5lcyB0cmVldGFibGUtbGluZXMtbGVhZlwiIHN0eWxlPVwiYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cclxuICAgICAgICAvLyAgICAgPGRpdiBzdHlsZT1cImNvcm5lclwiPjwvZGl2PlxyXG4gICAgICAgIC8vIDwvZGl2PlxyXG5cclxuICAgICAgICBjb25zdCBsMSA9IHRoaXMubmV3TGluZUVsZW1lbnQoKTtcclxuICAgICAgICBjb25zdCBsMiA9IHRoaXMubmV3TGluZUVsZW1lbnQoZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyhsMiwgJ3RyZWV0YWJsZS1saW5lcy1sZWFmJyk7XHJcbiAgICAgICAgY29uc3QgZGVzc2VydCA9IHRoaXMucmVuZGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93TGluZXMpIHtcclxuICAgICAgICAgICAgbGV0IGNscyA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3dOb2RlLmxhc3QpIHtcclxuICAgICAgICAgICAgICAgIGNscyA9ICdjb3JuZXInO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3MobDEsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbDIuYXBwZW5kQ2hpbGQoZGVzc2VydCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsIGNscyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGRlc3NlcnQsICd0cmVldGFibGUtbGluZXMtYm9yZGVyLWNvbG9yJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDEsIGNvbnRhaW5lckVsKTtcclxuICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUobDIsIGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAgICAgaWYgKGlzVG9wTm9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShsMiwgJ21hcmdpblJpZ2h0JywgJzNweCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyQ2xpY2tFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVyRWwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIubGlzdGVuKHRoaXMudG9nZ2xlckVsLm5hdGl2ZUVsZW1lbnQsICdjbGljaycsIHRoaXMub25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljayhldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5yb3dOb2RlLm5vZGVbJ3Nob3dMb2FkaW5nJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHQudG9nZ2xlRXhwYW5kKHRoaXMucm93Tm9kZS5ub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlSWNvbih0cmVlTm9kZTogVHJlZU5vZGUpIHtcclxuICAgICAgICB0aGlzLmlzU2hvd1RyaWFuZ2xlID0gdGhpcy5zaG93VHJpYW5nbGUoKTtcclxuICAgICAgICB0aGlzLm5vQ2hpbGRzID0gdGhpcy5oYXNDaGlsZHJlbigpO1xyXG4gICAgICAgIHRoaXMudHJlZU5vZGVJY29uID0gdGhpcy50dC5nZXRUcmVlSWNvbih0cmVlTm9kZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6YCJ5Lit6KGM57uE5Lu2XHJcbiAqL1xyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW3NlbGVjdFJvd10nLFxyXG4gICAgZXhwb3J0QXM6ICdyb3cnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVTZWxlY3RSb3dEaXJlY3RpdmUgaW1wbGVtZW50cyBEb0NoZWNrLCBPbkRlc3Ryb3ksIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgICBASW5wdXQoJ3NlbGVjdFJvdycpIHJvd05vZGU6IFJvd05vZGU7XHJcbiAgICBASW5wdXQoKSByb3dJbmRleDogbnVtYmVyO1xyXG5cclxuICAgIEBJbnB1dCgpIHNlbGVjdFJvd0Rpc2FibGVkOiBib29sZWFuO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBwcmV2ZW50ID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgdGltZXI6IGFueTtcclxuICAgIEBJbnB1dCgpIGRlbGF5ID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy50dC5zZWxlY3ROb2RlQ2hhbmdlZFN1YmplY3Quc3Vic2NyaWJlKChpZHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaWRzICYmIHRoaXMucm93Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWRBcnIgPSBpZHMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZEFyci5pbmRleE9mKHRoaXMucm93Tm9kZS5pZCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd05vZGUubm9kZVsnZWxlbWVudFJlZiddID0gdGhpcy5lbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhdGhpcy5zZWxlY3RSb3dEaXNhYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgLy8gaWYgKGNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQgJiYgIWNoYW5nZXMuc2VsZWN0Um93RGlzYWJsZWQuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucm93Tm9kZS5ub2RlLnNlbGVjdGFibGUgPSAhY2hhbmdlcy5zZWxlY3RSb3dEaXNhYmxlZC5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nRG9DaGVjaygpIHtcclxuICAgICAgICBpZiAodGhpcy50dC5ib2R5VGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnR0LmlzU2VsZWN0ZWQodGhpcy5yb3dOb2RlLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXHJcbiAgICBvbmNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKCkpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5yb3dDbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvd0NsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvd0NsaWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNFbmFibGVkKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy50dC5kaXNhYmxlZCAmJiB0aGlzLnNlbGVjdFJvd0Rpc2FibGVkICE9PSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcm93Q2xpY2soZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIHRoaXMudHQuYmVmb3JlQ2xpY2tOb2RlKHsgaW5zdGFuY2U6IHRoaXMudHQsIHJvd05vZGU6IHRoaXMucm93Tm9kZSwgZXZlbnQsIHR5cGU6ICdyb3cnIH0pLnN1YnNjcmliZSgoZTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWUpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIHRoaXMudHQuaGFuZGxlUm93Q2xpY2soe1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnQsXHJcbiAgICAgICAgICAgICAgICByb3dOb2RlOiB0aGlzLnJvd05vZGUsXHJcbiAgICAgICAgICAgICAgICByb3dJbmRleDogdGhpcy5yb3dJbmRleFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQ2xhc3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQ2xhc3MoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LmJvZHlUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50dC5pc1NlbGVjdGVkKHRoaXMucm93Tm9kZS5ub2RlKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHQuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mYXJyaXMtdHJlZXRhYmxlLXRib2R5PnRyLmZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZUNsYXNzKG4sICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2ZhcnJpcy10YWJsZS1zZWxlY3RlZHJvdycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR0LmtlZXBTZWxlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmYXJyaXMtdGFibGUtc2VsZWN0ZWRyb3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOihqOWktOWFqOmAiee7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3R0LWhlYWRlci1jaGVja2JveCcsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiBjbGFzcz1cImN1c3RvbS1jb250cm9sIGN1c3RvbS1jaGVja2JveCAgY3VzdG9tLWNvbnRyb2wtaW5saW5lIHR0LWNoZWNrYm94XCIgc3R5bGU9XCJ0b3A6IC0ycHg7XCI+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICNjaGtBbGwgY2xhc3M9XCJjdXN0b20tY29udHJvbC1pbnB1dFwiICBbY2hlY2tlZF09XCJjaGVja2VkXCI+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wtbGFiZWxcIiAoY2xpY2spPVwiaGFuZGxlQ2xpY2soJGV2ZW50KVwiPjwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuICAgIGAsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgOmhvc3Qge1xyXG4gICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVIZWFkZXJDaGVja2JveENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASW5wdXQoKSBjaGVja2VkOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgQE91dHB1dCgpIGNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY2hrQWxsJykgY2hrQWxsOiBFbGVtZW50UmVmO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0dDogVHJlZVRhYmxlQ29tcG9uZW50LCBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7IH1cclxuXHJcbiAgICBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy50dC5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCBiZWZvcmVFdmVudCA9ICF0aGlzLmNoZWNrZWQgPyB0aGlzLnR0LmJlZm9yZUNoZWNrQWxsIDogdGhpcy50dC5iZWZvcmVVbkNoZWNrQWxsO1xyXG4gICAgICAgICAgICB0aGlzLnR0WydjaGVja2FsbF9DTElDS0VEJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBiZWZvcmVFdmVudCh7IGluc3RhbmNlOiB0aGlzLnR0LCBjaGVja2VkOiAhdGhpcy5jaGVja2VkIH0pLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOWFqOmAieWKn+iDvVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGtBbGwubmF0aXZlRWxlbWVudC5pbmRldGVybWluYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSAhdGhpcy5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVOb2Rlc1dpdGhDaGVja2JveChldmVudCwgdGhpcy5jaGVja2VkKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRbJ2NoZWNrYWxsX0NMSUNLRUQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOihqOS9k2NoZWNrYm94IOe7hOS7tlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ3R0LWNoZWNrYm94JyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiY3VzdG9tLWNvbnRyb2wgY3VzdG9tLWNoZWNrYm94ICBjdXN0b20tY29udHJvbC1pbmxpbmUgdHQtY2hlY2tib3hcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgI2NoayBjbGFzcz1cImN1c3RvbS1jb250cm9sLWlucHV0XCIgW2Rpc2FibGVkXT1cImRpc2FibGVkXCIgW2NoZWNrZWRdPVwiY2hlY2tlZFwiPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImN1c3RvbS1jb250cm9sLWxhYmVsXCIgKGNsaWNrKT1cImhhbmRsZUNsaWNrKCRldmVudClcIj48L2xhYmVsPlxyXG4gICAgPC9kaXY+XHJcbiAgICBgLFxyXG4gICAgc3R5bGVzOiBbXHJcbiAgICAgICAgYFxyXG4gICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgOmhvc3QgLmN1c3RvbS1jaGVja2JveCB7XHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgIGZsb2F0OiBub25lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBgXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDaGVja2JveENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MudHJlZS10b2dnbGVyLWNoZWNrYm94JykgY2xzMSA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBjaGVja2VkOiBib29sZWFuO1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgQElucHV0KCkgcm93Tm9kZTogUm93Tm9kZTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdjaGsnKSBjaGs6IEVsZW1lbnRSZWY7XHJcbiAgICBkZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHVibGljIHR0U2VydmljZTogVHJlZXRhYmxlU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMudHRTZXJ2aWNlID0gdGhpcy50dC50dFNlcnZpY2U7XHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLmNoay5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSB0aGlzLnJvd05vZGUuaW5kZXRlcm1pbmF0ZSB8fCBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy50dFNlcnZpY2UuY2hhbmdlQ2hlY2tib3hTdGF0dXMkLnBpcGUoXHJcbiAgICAgICAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxyXG4gICAgICAgICkucGlwZShcclxuICAgICAgICAgICAgbWFwKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG4uaWQgPT09IHRoaXMucm93Tm9kZS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5zdWJzY3JpYmUobiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoay5uYXRpdmVFbGVtZW50LmluZGV0ZXJtaW5hdGUgPSBuLmluZGV0ZXJtaW5hdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWQgPSBuLmlzQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hrLm5hdGl2ZUVsZW1lbnQuY2hlY2tlZCA9IHRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnR0LmJlZm9yZUNsaWNrTm9kZSh7IGluc3RhbmNlOiB0aGlzLnR0LCByb3dOb2RlOiB0aGlzLnJvd05vZGUsIGV2ZW50LCB0eXBlOiAnY2hlY2tib3gnIH0pLnN1YnNjcmliZSgoZTogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR0LnNpbmdsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQuY2xlYXJBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHQuc2VsZWN0Tm9kZSh0aGlzLnJvd05vZGUuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHQudW5TZWxlY3ROb2RlKHRoaXMucm93Tm9kZS5pZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LnRvZ2dsZU5vZGVXaXRoQ2hlY2tib3goZXZlbnQsIHRoaXMucm93Tm9kZSwgdGhpcy5jaGVja2VkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tkYmxjbGlja10nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEYmxDbGlja1Jvd0RpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBASW5wdXQoJ2RibGNsaWNrJykgZW5hYmxlRGJsQ2xpY2sgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIGRibGNsaWNrTm9kZTogUm93Tm9kZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHVibGljIGVsOiBFbGVtZW50UmVmLCBwdWJsaWMgdHRTZXJ2aWNlOiBUcmVldGFibGVTZXJ2aWNlLFxyXG4gICAgICAgIEBPcHRpb25hbCgpIEBTZWxmKCkgcHVibGljIHNlbGVjdFJvd0RpcjogVHJlZVRhYmxlU2VsZWN0Um93RGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHRTZXJ2aWNlID0gdGhpcy50dC50dFNlcnZpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZURibENsaWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93RGlyLmRlbGF5ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJvd0Rpci5kZWxheSA9IDIwMDsgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ2RibGNsaWNrJywgWyckZXZlbnQnXSlcclxuICAgIG9uZGJsY2xpY2soZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJldkVsID0gKCBldmVudC50YXJnZXQgYXMgYW55KS5wcmV2aW91c1NpYmxpbmc7XHJcbiAgICAgICAgaWYgKHByZXZFbCAmJiBwcmV2RWwudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHQubXVsdGlTZWxlY3QgJiYgdGhpcy5kYmxjbGlja05vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGJsY2xpY2tOb2RlLm5vZGUubGVhZikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgY2xzTmFtZSA9IGV2ZW50LnRhcmdldFsnY2xhc3NOYW1lJ107XHJcblxyXG4gICAgICAgIGxldCB0b2dnbGVyVGFnID0gbnVsbDtcclxuICAgICAgICBpZiAoY2xzTmFtZS5pbmRleE9mKCdmLWNtcC10cmVldGFibGUtdG9nZ2xlcicpID4gLTEpIHtcclxuICAgICAgICAgICAgdG9nZ2xlclRhZyA9IGV2ZW50LnRhcmdldFsncXVlcnlTZWxlY3RvciddKCcudHJlZW5vZGUtZm9sZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXRbJ2NsYXNzTmFtZSddLmluZGV4T2YoJ3RyZWVub2RlLWZvbGQnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVyVGFnID0gZXZlbnQudGFyZ2V0IGFzIGFueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRvZ2dsZXJUYWcgJiYgdG9nZ2xlclRhZy5zdHlsZS52aXNpYmlsaXR5ID09PSAndmlzaWJsZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0Um93RGlyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93RGlyLnByZXZlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2VsZWN0Um93RGlyLnRpbWVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0Um93RGlyLnJvd05vZGUgJiYgdGhpcy5lbmFibGVEYmxDbGljaykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm4gPSB0aGlzLnNlbGVjdFJvd0Rpci5yb3dOb2RlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJuLm5vZGUuY2hpbGRyZW4gJiYgcm4ubm9kZS5jaGlsZHJlbi5sZW5ndGggJiYgIXJuLm5vZGUubGVhZiAmJiB0aGlzLnR0LmRibENsaWNrRXhwYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC50b2dnbGVFeHBhbmQocm4ubm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0LmRibENsaWNrLmVtaXQocm4ubm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2N1c3RvbVJvd1N0eWxlXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIEN1c3RvbVJvd1N0eWxlRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gICAgQElucHV0KCdjdXN0b21Sb3dTdHlsZScpIHJvd05vZGU6IFJvd05vZGU7XHJcbiAgICBASW5wdXQoJ2ZpZWxkJykgY29sOiBUcmVlVGFibGVDb2x1bW47XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSB0dDogVHJlZVRhYmxlQ29tcG9uZW50LFxyXG4gICAgICAgIHB1YmxpYyB1dGlsczogQ29tbW9uVXRpbHMsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIpIHtcclxuICAgIH1cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbCAmJiB0aGlzLnR0LmZpeGVkQ29sdW1ucyAmJiB0aGlzLnR0LmZpeGVkSGVhZGVyICYmIHRoaXMuY29sLmZpeGVkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbC5maXhlZCA9PT0gJ2xlZnQnIHx8IHRoaXMuY29sLmZpeGVkID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Um93U3R5bGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRSb3dTdHlsZSgpIHtcclxuICAgICAgICBjb25zdCBmbiA9IHRoaXMudHQucm93U3R5bGVyO1xyXG4gICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICBjb25zdCBzdHkgPSBmbih0aGlzLnJvd05vZGUubm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChzdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5ID09PSAnb2JqZWN0JyAmJiAoc3R5LnN0eWxlIHx8IHN0eS5jbHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkuc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eS5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eS5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5LmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdHkpIHx8IHR5cGVvZiBzdHkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNscyA9IHRoaXMudHQuZ2V0Um93Q2xzKHRoaXMucm93Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbHMgJiYgT2JqZWN0LmtleXMoY2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNscykuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xzW2NdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdHkpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIHN0eVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFJvd1N0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICAgIHNlbGVjdG9yOiAnW2N1c3RvbUNlbGxTdHlsZV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUVEN1c3RvbUNlbGxTdHlsZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICAgIEBJbnB1dCgnY3VzdG9tQ2VsbFN0eWxlJykgY29sdW1uOiBUcmVlVGFibGVDb2x1bW47XHJcbiAgICBASW5wdXQoKSByb3dOb2RlOiBSb3dOb2RlO1xyXG4gICAgQElucHV0KCkgcm93SW5kZXg6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3RvciwgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIHR0OiBUcmVlVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgcHVibGljIHV0aWxzOiBDb21tb25VdGlscywgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMikge1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR0ICYmIHRoaXMudHQuZ2V0Q2VsbENscykge1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnR0LnNob3dCb3JkZXIgJiYgdGhpcy50dC5jb2x1bW5zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdib3JkZXItd2lkdGgnLCAnMHB4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2VsbFN0eWxlKCkge1xyXG4gICAgICAgIGNvbnN0IGNlbGxDbHMgPSB0aGlzLnR0LmdldENlbGxDbHModGhpcy5yb3dOb2RlLCB0aGlzLmNvbHVtbi5maWVsZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uICYmIHRoaXMuY29sdW1uLnN0eWxlcikge1xyXG4gICAgICAgICAgICBpZiAoY2VsbENscyAmJiBPYmplY3Qua2V5cyhjZWxsQ2xzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNlbGxDbHMpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDbHNbY10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgcm93RGF0YSA9IHRoaXMucm93Tm9kZS5ub2RlLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNjcyA9IHRoaXMuY29sdW1uLnN0eWxlcih0aGlzLnV0aWxzLmdldFZhbHVlKHRoaXMuY29sdW1uLmZpZWxkLCByb3dEYXRhKSwgcm93RGF0YSwgdGhpcy5yb3dJbmRleCwgdGhpcy5yb3dOb2RlKTtcclxuICAgICAgICAgICAgaWYgKGNjcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSB8fCBjY3MuY2xzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjY3Muc3R5bGUpLmZvckVhY2gocyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHMsIGNjcy5zdHlsZVtzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNjcy5jbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2NzLmNscy5zcGxpdCgnLCcpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1swXSA9PT0gJyEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCBjLnN1YnN0cmluZygxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgX3N0eSA9IGNlbGxDbHMgfHwge307XHJcbiAgICAgICAgICAgIGNvbnN0IHJvd1N0eWxlID0gdGhpcy50dC5nZXRSb3dDbHModGhpcy5yb3dOb2RlKSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0JhY2tncm91bmQgPSBPYmplY3Qua2V5cyhjZWxsQ2xzKS5maW5kKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnYmFja2dyb3VuZCcsICdiYWNrZ3JvdW5kLWNvbG9yJywgJ2JhY2tncm91bmRjb2xvciddLmluZGV4T2Yobi50b0xvd2VyQ2FzZSgpKSA+IC0xO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBfcm93U3R5bGVzID0gcm93U3R5bGU7XHJcbiAgICAgICAgICAgIGlmIChyb3dTdHlsZS5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgX3Jvd1N0eWxlcyA9IHJvd1N0eWxlLnN0eWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgX2NlbGxTdHlsZXMgPSBfc3R5O1xyXG4gICAgICAgICAgICBpZiAoX3N0eS5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgX2NlbGxTdHlsZXMgPSBfc3R5LnN0eWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGhhc0JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIF9zdHkgPSBPYmplY3QuYXNzaWduKF9yb3dTdHlsZXMsIF9jZWxsU3R5bGVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9zdHkgPSBPYmplY3QuYXNzaWduKF9jZWxsU3R5bGVzLCBfcm93U3R5bGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoX3N0eSkuZm9yRWFjaChzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgcywgX3N0eVtzXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMucm93Tm9kZSAmJiAhY2hhbmdlcy5yb3dOb2RlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENlbGxTdHlsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tyZXNpemFibGUtY29sdW1uXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIFRUUmVzaXphYmxlQ29sdW1uRGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkNoYW5nZXMge1xyXG4gICAgQElucHV0KCdyZXNpemFibGUtY29sdW1uJykgZW5hYmxlUmVzaXplID0gdHJ1ZTtcclxuICAgIHJlc2l6ZXI6IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lcjogYW55O1xyXG4gICAgZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lcjogYW55O1xyXG4gICAgZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXI6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwdWJsaWMgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudCwgcHVibGljIG5nem9uZTogTmdab25lLFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIHJlbmRlcjogUmVuZGVyZXIyKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ3Jlc2l6YWJsZS1jb2x1bW4nKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVyLmNsYXNzTmFtZSA9ICdjb2x1bW4tcmVzaXplcic7XHJcbiAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlc2l6ZXIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5uZ3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVyTW91c2VEb3duTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5yZXNpemVyTW91c2VEb3duTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZW5hYmxlUmVzaXplICYmICFjaGFuZ2VzLmVuYWJsZVJlc2l6ZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRW5hYmxlKCkgJiYgdGhpcy5yZXNpemVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNFbmFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHQucmVzaXphYmxlQ29sdW1ucyAmJiAhdGhpcy50dC5hdXRvV2lkdGggJiYgdGhpcy5lbmFibGVSZXNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZERvY3VtZW50RXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmRvY3VtZW50TW91c2VNb3ZlTGlzdGVuZXIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lciA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmRvY3VtZW50TW91c2VVcExpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1bmJpbmREb2N1bWVudEV2ZW50cygpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudE1vdXNlTW92ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZU1vdmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5kb2N1bWVudE1vdXNlVXBMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZVVwTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRG93bihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHQub25Db2x1bW5SZXNpemVCZWdpbihldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uTW91c2VFbnRlcigpIHtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlTW92ZShldmVudDogRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnR0Lm9uQ29sdW1uUmVzaXplKGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlVXAoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50dC5vbkNvbHVtblJlc2l6ZUVuZChldmVudCwgdGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplck1vdXNlRG93bkxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLnJlc2l6ZXJNb3VzZURvd25MaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVuYmluZERvY3VtZW50RXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==