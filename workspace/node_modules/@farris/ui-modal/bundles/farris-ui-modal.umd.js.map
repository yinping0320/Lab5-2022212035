{"version":3,"file":"farris-ui-modal.umd.js.map","sources":["ng://@farris/ui-modal/lib/bs-modal-ref.service.ts","ng://@farris/ui-modal/lib/modal-options.class.ts","ng://@farris/ui-modal/lib/modal-backdrop.component.ts","node_modules/tslib/tslib.es6.js","ng://@farris/ui-modal/lib/modal-button.directive.ts","ng://@farris/ui-modal/lib/modal-container.component.ts","ng://@farris/ui-modal/lib/bs-modal.service.ts","ng://@farris/ui-modal/lib/modal-backdrop.options.ts","ng://@farris/ui-modal/lib/modal.directive.ts","ng://@farris/ui-modal/lib/modal.module.ts"],"sourcesContent":["import { ModalButtonDirective } from './modal-button.directive';\r\nimport { Injectable, ComponentRef, QueryList } from '@angular/core';\r\nimport { ModalContainerComponent } from './modal-container.component';\r\n\r\n@Injectable()\r\nexport class BsModalRef {\r\n  /**\r\n   * Reference to a component inside the modal. Null if modal's been created with TemplateRef\r\n   */\r\n  content?: any | null;\r\n\r\n  /**\r\n   * Hides the modal\r\n   */\r\n  close: (e?: any) => void = Function;\r\n\r\n  dialog?: ComponentRef<ModalContainerComponent> | null;\r\n\r\n  buttons?: QueryList<ModalButtonDirective>;\r\n}\r\n","import { Injectable, TemplateRef, EventEmitter } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ModalOptions {\r\n    /**\r\n     *  Includes a modal-backdrop element. Alternatively,\r\n     *  specify static for a backdrop which doesn't close the modal on click.\r\n     */\r\n    backdrop?: boolean | 'static';\r\n    /**\r\n     * Closes the modal when escape key is pressed.\r\n     */\r\n    keyboard?: boolean;\r\n\r\n    focus?: boolean;\r\n    /**\r\n     * Shows the modal when initialized.\r\n     */\r\n    show?: boolean;\r\n    /**\r\n     * Ignore the backdrop click\r\n     */\r\n    ignoreBackdropClick?: boolean;\r\n    /**\r\n     * Css class for opened modal\r\n     */\r\n    class?: string;\r\n    /**\r\n     * Toggle animation\r\n     */\r\n    animated?: boolean;\r\n    /**\r\n     * Modal data\r\n     */\r\n    initialState?: object;\r\n    /**\r\n     * çªå£æ é¢\r\n     */\r\n    title: string;\r\n    /** æ é¢åå¾æ  */\r\n    iconCls?: string;\r\n\r\n    /** æ¾ç¤ºå¤´é¨ */\r\n    showHeader?: boolean;\r\n\r\n    /**\r\n     * æ¾ç¤ºå³é­æé®\r\n     */\r\n    showCloseButton?: boolean;\r\n    /**\r\n     * æ¾ç¤ºæå¤§åæé®\r\n     */\r\n    showMaxButton?: boolean;\r\n    /**\r\n     * æ¾ç¤ºæå°åæé®\r\n     */\r\n    showMinButton?: boolean;\r\n\r\n    /**\r\n     * çªå£å®½åº¦\r\n     */\r\n    width?: number;\r\n    /**\r\n     * çªå£é«åº¦\r\n     */\r\n    height?: number;\r\n\r\n    minWidth?: number;\r\n    minHeight?: number;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    /** çªå£æ é¢æ é«åº¦ */\r\n    dialogHeaderHeight?: number;\r\n    /** çªå£æé®åºé«åº¦ */\r\n    dialogFooterHeight?: number;\r\n\r\n    dialogFooterStyles?: any;\r\n\r\n    /**\r\n     * æ¾ç¤ºæé®åº\r\n     */\r\n    showButtons?: boolean;\r\n    /** æé®å¯¹é½æ¹å¼ */\r\n    buttonAlign?: string;\r\n\r\n    /** æé®åè¡¨æ¨¡æ¿ */\r\n    buttons?: TemplateRef<any> | DialogButton[];\r\n\r\n    /** å¯ç¨ææ½åè½ */\r\n    draggable?: boolean;\r\n\r\n    /** å¯ç¨è°æ´å°ºå¯¸å¤§å° */\r\n    resizable?: boolean;\r\n\r\n    /** æ¯å¦å¯ç¨æ»å¨æ¡ */\r\n    enableScroll?: boolean;\r\n\r\n    beforeOpen?: () => Observable<boolean>;\r\n    beforeClose?: (modalRef: any, args?: any) => Observable<boolean>;\r\n    opened?: ( p?: {[key: string]: any }) => void;\r\n    closed?: (isCloseButtonClick: boolean | any, args?: any) => void;\r\n    okText?: string;\r\n    cancelText?: string;\r\n    /** å¼¹çªç±»åï¼defaultï¼å¼¹åºç»ä»¶ãæ¨¡æ¿ç­ï¼iframe,å¼¹åºiframe; ngFactory, å¼¹åºngFactory; */\r\n    dialogType?: string;\r\n    // çªå£éåºåå®¹èªå¨\r\n    fitContent?: boolean;\r\n    // çªå£åå®¹åºåæ¯å¦èªå¨ååºå¼\r\n    areaResponse?: boolean;\r\n    // å¼å¸¸æç¤º\r\n    exception?: {\r\n        date: string,\r\n        message: string\r\n    };\r\n   // æ¯å¦éæ¨¡æ\r\n   modeless?:boolean\r\n}\r\n\r\nexport interface DialogButton {\r\n    text: string;\r\n    cls?: string;\r\n    iconCls?: string;\r\n    disable?: boolean;\r\n    defaultFocus?: boolean;\r\n    handle?: (e) => any;\r\n    display?: boolean;\r\n    tipsEnable?: boolean;\r\n    tipsText?: string | ((e?: any) => string);\r\n}\r\n\r\nexport const modalConfigDefaults: ModalOptions = {\r\n    backdrop: 'static',\r\n    keyboard: true,\r\n    focus: true,\r\n    show: false,\r\n    ignoreBackdropClick: true,\r\n    class: '',\r\n    animated: true,\r\n    initialState: {},\r\n    width: 400,\r\n    height: 350,\r\n    minHeight: null,\r\n    minWidth: null,\r\n    maxHeight: null,\r\n    maxWidth: null,\r\n    title: 'Title is here.',\r\n    showCloseButton: true,\r\n    showMaxButton: true,\r\n    showButtons: true,\r\n    buttonAlign: 'center',\r\n    draggable: true,\r\n    resizable: true,\r\n    enableScroll: true,\r\n    beforeOpen: () => of(true),\r\n    beforeClose: () => of(true),\r\n    okText: 'ç¡®å®',\r\n    cancelText: 'åæ¶',\r\n    dialogHeaderHeight: 38,\r\n    dialogFooterHeight: 50,\r\n    dialogType: 'default',\r\n    showHeader: true,\r\n    fitContent: false,\r\n    areaResponse: false\r\n};\r\n\r\nexport const CLASS_NAME: any = {\r\n    SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\r\n    BACKDROP: 'modal-backdrop',\r\n    OPEN: 'modal-open',\r\n    FADE: 'fade',\r\n    IN: 'in', // bs3\r\n    SHOW: 'show' // bs4\r\n};\r\n\r\nexport const SELECTOR: any = {\r\n    DIALOG: '.modal-dialog',\r\n    DATA_TOGGLE: '[data-toggle=\"modal\"]',\r\n    DATA_DISMISS: '[data-dismiss=\"modal\"]',\r\n    FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\r\n};\r\n\r\nexport const TRANSITION_DURATIONS: any = {\r\n    MODAL: 300,\r\n    BACKDROP: 150\r\n};\r\n\r\nexport const DISMISS_REASONS = {\r\n    BACKRDOP: 'backdrop-click',\r\n    ESC: 'esc'\r\n};\r\n","import { Component, ElementRef, OnInit, Renderer2 } from '@angular/core';\r\nimport { CLASS_NAME } from './modal-options.class';\r\nimport { Utils, isBs3 } from '@farris/ui-modal/utils';\r\n\r\n/** This component will be added as background layout for modals if enabled */\r\n@Component({\r\n    selector: 'bs-modal-backdrop',\r\n    template: ' ',\r\n    host: { class: CLASS_NAME.BACKDROP }\r\n})\r\nexport class ModalBackdropComponent implements OnInit {\r\n    get isAnimated(): boolean {\r\n        return this._isAnimated;\r\n    }\r\n\r\n    set isAnimated(value: boolean) {\r\n        this._isAnimated = value;\r\n        // this.renderer.setElementClass(this.element.nativeElement, `${ClassName.FADE}`, value);\r\n    }\r\n\r\n    get isShown(): boolean {\r\n        return this._isShown;\r\n    }\r\n\r\n    set isShown(value: boolean) {\r\n        this._isShown = value;\r\n        if (value) {\r\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\r\n        } else {\r\n            this.renderer.removeClass(this.element.nativeElement, `${CLASS_NAME.IN}`);\r\n        }\r\n        if (!isBs3()) {\r\n            if (value) {\r\n                this.renderer.addClass(\r\n                    this.element.nativeElement,\r\n                    `${CLASS_NAME.SHOW}`\r\n                );\r\n            } else {\r\n                this.renderer.removeClass(\r\n                    this.element.nativeElement,\r\n                    `${CLASS_NAME.SHOW}`\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    element: ElementRef;\r\n    renderer: Renderer2;\r\n\r\n    protected _isAnimated: boolean;\r\n    protected _isShown = false;\r\n\r\n    constructor(element: ElementRef, renderer: Renderer2) {\r\n        this.element = element;\r\n        this.renderer = renderer;\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.isAnimated) {\r\n            this.renderer.addClass(this.element.nativeElement, `${CLASS_NAME.FADE}`);\r\n            Utils.reflow(this.element.nativeElement);\r\n        }\r\n        this.isShown = true;\r\n    }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Directive, Injector, ElementRef, Input } from '@angular/core';\r\n\r\n@Directive({ selector: '[modal-button]' })\r\nexport class ModalButtonDirective {\r\n    @Input() visable = true;\r\n    constructor(private injector: Injector, private el: ElementRef) { }\r\n\r\n    setDisabled(disable: boolean) {\r\n        this.el.nativeElement.disabled = disable;\r\n    }\r\n\r\n    show() {\r\n        this.visable = true;\r\n    }\r\n\r\n    hide() {\r\n        this.visable = false;\r\n    }\r\n}\r\n","import {\r\n    Component, ElementRef, HostListener, OnDestroy,\r\n    OnInit, Renderer2, ViewChild, Output,\r\n    EventEmitter, TemplateRef, AfterViewInit, Input,\r\n    NgZone,\r\n    ViewChildren,\r\n    QueryList,\r\n    HostBinding\r\n} from '@angular/core';\r\nimport { AngularDraggableDirective } from '@farris/ui-draggable';\r\nimport { DomSanitizer, SafeResourceUrl } from \"@angular/platform-browser\";\r\nimport {\r\n    CLASS_NAME, DISMISS_REASONS,\r\n    ModalOptions, TRANSITION_DURATIONS\r\n} from './modal-options.class';\r\nimport { BsModalService } from './bs-modal.service';\r\nimport { isBs3 } from '@farris/ui-modal/utils';\r\nimport { ModalButtonDirective } from './modal-button.directive';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\nimport { debounceTime, delay } from 'rxjs/operators';\r\n\r\n@Component({\r\n    selector: 'modal-container',\r\n    template: `\r\n    <div [attr.id]=\"modalID\"\r\n\r\n        [ngDraggable]=\"config.draggable\"\r\n        [ngResizable]=\"config.resizable\"\r\n        [rzMinWidth]=\"config.minWidth\"\r\n        [rzMaxWidth]=\"config.maxWidth\"\r\n        [rzMinHeight]=\"config.minHeight\"\r\n        [rzMaxHeight]=\"config.maxHeight\"\r\n        rzHandles=\"all\" [handle]=\"config.showHeader ? header:dragEl\"\r\n        (stopped)=\"dropdown($event)\"\r\n        (rzStop)=\"resizeStop($event)\"\r\n        [inBounds]=\"true\" [bounds]=\"boundsElement\" [rzContainment]=\"boundsElement\" [isFixed]=\"isModeless\"\r\n        [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\" role=\"document\"\r\n        [style.width]=\"config.width + 'px'\" [style.height]=\"config.fitContent?'auto':(config.height + 'px')\"\r\n        style=\"position: absolute;top: 50%;left: 50%;\">\r\n        <div class=\"modal-content\" [ngClass]=\"{'modal-content--has-header':config.showHeader}\">\r\n            <div #header class=\"modal-header\" [style.display]=\"config.showHeader ? '': 'none'\">\r\n                <div class=\"modal-title\">\r\n                    <span *ngIf=\"config.iconCls\" [class]=\"config.iconCls\" style=\"margin-right: 8px\"></span>\r\n                    <span class=\"modal-title-label\">{{ config.title }}</span>\r\n                </div>\r\n                <div class=\"actions\">\r\n                    <ul>\r\n                        <li *ngIf=\"config.showMinButton\" class=\"f-btn-icon f-bare\">\r\n                            <span class=\"f-icon modal_minimize\"></span></li>\r\n                        <li *ngIf=\"config.showMaxButton\" (click)=\"changeDialogSize()\" class=\"f-btn-icon f-bare\">\r\n                            <span class=\"f-icon modal_maximize\" [class.modalrevert]=\"isMax\"></span>\r\n                        </li>\r\n                        <li *ngIf=\"config.showCloseButton\" (click)=\"close($event, true)\" class=\"f-btn-icon f-bare\">\r\n                             <span class=\"f-icon modal_close\"></span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        <div #dragEl class=\"f-utils-absolute-all\" style=\"height:10px;z-index: 1;\" [style.display]=\"config.showHeader ? 'none': ''\"></div>\r\n            <div class=\"modal-body\" [class.f-utils-flex-column]=\"dialogType === 'iframe'\"   [f-area-response]=\"config.areaResponse\">\r\n                <perfect-scrollbar [config]=\"{}\" [disabled]=\"!config.enableScroll||config.fitContent\"  *ngIf=\"!dialogType || dialogType === 'default'\">\r\n                    <ng-content ></ng-content>\r\n                </perfect-scrollbar>\r\n                <iframe *ngIf=\"dialogType === 'iframe'\" class=\"f-utils-fill\" width=\"100%\" frameborder=\"0\" [src]=\"iframeSrc\"></iframe>\r\n            </div>\r\n\r\n            <div [style.textAlign]=\"config.buttonAlign\" class=\"modal-footer\" [ngStyle]=\"buildFooterStyles()\" *ngIf=\"config.showButtons && config.buttons\">\r\n                <ng-container [ngTemplateOutlet]=\"useButtonsTemplate() ? config.buttons : defaultButtonRef\"></ng-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <ng-template #defaultButtonRef>\r\n\r\n        <ng-container *ngFor=\"let btn of config.buttons; last as isLast\">\r\n            <button type=\"button\" modal-button  *ngIf=\"btn.display === undefined && btn.tipsEnable === undefined\"\r\n                [class]=\"btn.cls\"\r\n                (click)=\"btn.handle && btn.handle($event) \">\r\n                <span [class]=\"btn.iconCls\" *ngIf=\"btn.iconCls\"></span> {{ btn.text }}\r\n            </button>\r\n\r\n            <button type=\"button\" modal-button  *ngIf=\"btn.display !== undefined || btn.tipsEnable !== undefined\"\r\n                [class]=\"btn.cls\"\r\n                (click)=\"btn.handle && btn.handle($event) \" \r\n                [style.display]=\"(btn.display === true || btn.display === undefined) ? '' : 'none'\"\r\n                [farrisTooltip]=\"btn?.tipsEnable\" [placement]=\"'top'\" [delay]=\"500\" [content]=\"btn?.tipsText\">\r\n                <span [class]=\"btn.iconCls\" *ngIf=\"btn.iconCls\"></span> {{ btn.text }}\r\n            </button>\r\n\r\n        </ng-container>\r\n\r\n    </ng-template>\r\n  `,\r\n    host: {\r\n        class: 'modal farris-modal',\r\n        role: 'dialog',\r\n        tabindex: '-1',\r\n        '[attr.aria-modal]': 'true'\r\n    }\r\n})\r\nexport class ModalContainerComponent implements OnInit, OnDestroy, AfterViewInit {\r\n    config: ModalOptions;\r\n    isShown = false;\r\n    level: number;\r\n    isAnimated: boolean;\r\n    bsModalService: BsModalService;\r\n    dialogType: string;\r\n    iframeSrc: SafeResourceUrl;\r\n    // æ¯å¦éæ¨¡æçªå£\r\n    isModeless=false;\r\n    @Input()\r\n    public set iframe(value: string) {\r\n        if (this.sanitizer) {\r\n            this.iframeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(value);\r\n        }\r\n    }\r\n    private isModalHiding = false;\r\n    private originalWidth: number;  // è®°å½åå§çå®½åº¦\r\n    private originalHeight: number; // è®°å½åå§çé«åº¦\r\n\r\n    private prevWidth: number; // è®°å½ä¸æ¬¡çå®½åº¦\r\n    private prevHeight: number; // è®°å½ä¸æ¬¡çé«åº¦\r\n    isMax = false;\r\n\r\n    @ViewChild(AngularDraggableDirective) draggbar: AngularDraggableDirective;\r\n    @ViewChild('header') modalHeader: ElementRef;\r\n    boundsElement: HTMLElement;\r\n\r\n    @Output() closed = new EventEmitter();\r\n    @Output() opened = new EventEmitter();\r\n    @Output() resized = new EventEmitter();\r\n\r\n    @HostBinding('id') modalID = `MODALID_${Date.now().toPrecision()}`;\r\n\r\n    @ViewChildren(ModalButtonDirective) buttons: QueryList<ModalButtonDirective>;\r\n\r\n    dlgHeaderLineHeight: any;\r\n    private _windowResizeToMax = false;\r\n    private windowResize$: Subscription = null;\r\n    constructor(\r\n        options: ModalOptions,\r\n        protected el: ElementRef,\r\n        private _renderer: Renderer2,\r\n        private sanitizer: DomSanitizer\r\n    ) {\r\n        this.config = Object.assign({}, options);\r\n        if (!this.config.buttons) {\r\n            this.config.buttons = [\r\n                {\r\n                    text: 'åæ¶',\r\n                    cls: 'btn btn-light',\r\n                    iconCls: 'k-icon k-i-close',\r\n                    handle: () => {\r\n                        this.close();\r\n                    }\r\n                },\r\n                {\r\n                    text: 'ç¡®å®',\r\n                    cls: 'btn btn-primary',\r\n                    iconCls: 'k-icon k-i-check',\r\n                    handle: () => { alert('å¥½(ï½¡ï½¥âï½¥)ï¾ï¾å¨å!!'); }\r\n                }\r\n            ];\r\n        }\r\n        this.setIsModeless();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if(this.isModeless){\r\n            // å¦ææ¯éæ¨¡æçªå£\r\n            this.boundsElement=null;\r\n            this._renderer.addClass(this.el.nativeElement, 'f-modal-is-modeless');\r\n        }else{\r\n            this.boundsElement = this.el.nativeElement;\r\n        }       \r\n        if (this.config.fitContent) {\r\n            this._renderer.addClass(this.el.nativeElement, 'f-modal-fitContent');\r\n        }\r\n\r\n        if (this.isAnimated) {\r\n            this._renderer.addClass(this.el.nativeElement, CLASS_NAME.FADE);\r\n        }\r\n        // this.ngZone.runOutsideAngular(() => {\r\n        setTimeout(() => {\r\n            this.isShown = true;           \r\n            this._renderer.addClass(\r\n                this.el.nativeElement,\r\n                isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW\r\n            );\r\n            if(this.isModeless){\r\n                this._renderer.setStyle(this.el.nativeElement, 'position', 'static');\r\n            }\r\n            this._renderer.setStyle(this.el.nativeElement, 'display', 'block');\r\n            if (this.config.fitContent && this.el.nativeElement.className.indexOf('f-modal-fitContent-scroll') > -1) {\r\n                this.el.nativeElement.scrollTop = 0;\r\n            }\r\n\r\n            if (document && document.body) {\r\n                const modalLen = this.bsModalService.getModalsCount();\r\n                if (modalLen === 1) {\r\n                    this.bsModalService.checkScrollbar();\r\n                    this.bsModalService.setScrollbar();\r\n                }\r\n                if (!document.body.classList.contains(CLASS_NAME.OPEN)) {\r\n                    this._renderer.addClass(document.body, CLASS_NAME.OPEN);\r\n                }\r\n            }\r\n            this.opened.emit({ modal: this });\r\n        }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\r\n        // });\r\n\r\n        if (this.el.nativeElement) {\r\n            this.el.nativeElement.focus();\r\n        }\r\n\r\n        this.dlgHeaderLineHeight = this.getDialogHeaderLineHeight() + 'px';\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        // Called after ngAfterContentInit when the component's view has been initialized. Applies to components only.\r\n        // Add 'implements AfterViewInit' to the class.\r\n        this._renderer.setStyle(this.el.nativeElement, 'display', 'block');\r\n        // å¦æåå®¹éåºå®½åº¦\r\n        if (this.config.fitContent) {\r\n            let initElRect = this.el.nativeElement.getBoundingClientRect();\r\n            let initBodySize = this.getContainerSize();\r\n            if (initElRect.height < initBodySize.height + 30) {\r\n                this._renderer.addClass(this.el.nativeElement, 'f-modal-fitContent-scroll');\r\n            }\r\n        }\r\n\r\n        this.originalHeight = this.config.height;\r\n        this.originalWidth = this.config.width;\r\n\r\n        this.windowResize$ = fromEvent(window, 'resize').pipe(\r\n            debounceTime(50)\r\n        ).subscribe((e: any) => {\r\n            const winWidth =  window.innerWidth -20;\r\n            const winHeight = window.innerHeight - 20;\r\n\r\n            if (this.config.width <= winWidth && this.config.height <= winHeight) {\r\n                if (this._windowResizeToMax) {\r\n                    this.revertDialog();\r\n                    this._windowResizeToMax = false;\r\n                } else {\r\n                    if (this.isMax) {    \r\n                        this.maxDialog(false);\r\n                    }\r\n                }\r\n            } else {\r\n                if (!this.isMax) {\r\n                    this._windowResizeToMax = true;\r\n                    this.maxDialog();\r\n                } else {\r\n                    this.maxDialog(false);\r\n                }\r\n            }\r\n\r\n            this.toCenter();\r\n            this.moveTo(0, 0);\r\n        });\r\n\r\n    }\r\n\r\n    private getDlgElement() {\r\n        return this.el.nativeElement.querySelector('.modal-dialog');\r\n    }\r\n\r\n    private getDialogHeaderLineHeight() {\r\n        if (this.config.showHeader) {\r\n            const modalHeaderStyles = window.getComputedStyle(this.modalHeader.nativeElement);\r\n            const paddingTop = parseInt(modalHeaderStyles.paddingTop.replace('px', ''), 10);\r\n            const paddingBottom = parseInt(modalHeaderStyles.paddingBottom.replace('px', ''), 10);\r\n            return this.config.dialogHeaderHeight - paddingTop - paddingBottom;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    // è·ååå®¹åºåçå°ºå¯¸\r\n    getContainerSize() {\r\n        const bodyTarget = this.el.nativeElement.querySelector('.modal-body');\r\n        const height = bodyTarget.offsetHeight;\r\n        const width = bodyTarget.offsetWidth;\r\n        return { width, height };\r\n    }\r\n\r\n    buildFooterStyles() {\r\n        let styles = {};\r\n\r\n        if (this.config.dialogFooterStyles) {\r\n            styles = Object.assign({}, styles, this.config.dialogFooterStyles);\r\n        }\r\n\r\n        return styles;\r\n    }\r\n\r\n    useButtonsTemplate() {\r\n        return this.config.buttons instanceof TemplateRef;\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick(event: MouseEvent) {\r\n        const tag = event.target as any;\r\n\r\n        // if (tag.localName === 'label') {\r\n        //     if (tag.className) {\r\n        //         const clsList = tag.className.split(' ');\r\n        //         if (\r\n        //             clsList.indexOf('k-radio-label') > -1 ||\r\n        //             clsList.indexOf('k-checkbox-label') > -1 ||\r\n        //             clsList.indexOf('custom-control-label') > -1\r\n        //         ) {\r\n        //             return;\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        // if (tag.localName === 'input' && (tag.type === 'checkbox' || tag.type === 'radio' || tag.type === 'file')) {\r\n        //     return;\r\n        // }\r\n\r\n        if (this.config.ignoreBackdropClick || this.config.backdrop === 'static' || event.target !== this.el.nativeElement ) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n\r\n        this.bsModalService.setDismissReason(DISMISS_REASONS.BACKRDOP);\r\n        this.close();\r\n    }\r\n\r\n    @HostListener('window:keydown.esc', ['$event'])\r\n    onEsc(event: any): void {\r\n        if (!this.isShown) {\r\n            return;\r\n        }\r\n\r\n        if (event.keyCode === 27) {\r\n            event.preventDefault();\r\n        }\r\n        /**ä»æåä¸ä¸ªçªå£å¼å§å³é­ */\r\n        if (\r\n            this.config.keyboard &&\r\n            this.level === this.bsModalService.getModalsCount()\r\n        ) {\r\n            this.bsModalService.setDismissReason(DISMISS_REASONS.ESC);\r\n            this.close(event);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.isShown) {\r\n            this.close();\r\n        }\r\n\r\n        if (this.windowResize$) {\r\n            this.windowResize$.unsubscribe();\r\n            this.windowResize$ = null;\r\n        }\r\n    }\r\n\r\n    close(e?: MouseEvent, isCloseButton = false): void {\r\n        if (e && e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        if (this.isModalHiding || !this.isShown) {\r\n            return;\r\n        }\r\n\r\n        this.config.beforeClose(this, { event: e }).subscribe(r => {\r\n            if (!r) {\r\n                return false;\r\n            }\r\n            // æ´æ°æå¡ä¸­éæ¨¡æçªå£çä¸ªæ°\r\n            this.bsModalService.closeUpdateModelessCountByModal(this.isModeless);\r\n            this.isModalHiding = true;\r\n            this._renderer.removeClass(\r\n                this.el.nativeElement,\r\n                isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW\r\n            );\r\n            setTimeout(() => {\r\n                this.isShown = false;\r\n                this.bsModalService.hide(this.level);\r\n                this.isModalHiding = false;\r\n\r\n                if (document && document.body &&  !document.querySelectorAll('.farris-modal.show').length) {\r\n                    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\r\n                }\r\n\r\n                if (this.config.closed) {\r\n                    this.config.closed(isCloseButton, { modalRef: this, event: e });\r\n                }\r\n                this.closed.emit(this.level);\r\n            }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\r\n            // });\r\n        });\r\n    }\r\n\r\n    toCenter() {\r\n        const marginLeft = Number.parseInt('' + -this.config.width / 2);\r\n        const marginTop = Number.parseInt('' + -this.config.height / 2);\r\n\r\n        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n        const contentEl = this.el.nativeElement.querySelector('.modal-body');\r\n\r\n        // this._renderer.setStyle(dialogEl, 'margin-left', marginLeft);\r\n        // this._renderer.setStyle(dialogEl, 'margin-top', marginTop);\r\n\r\n        this._renderer.setStyle(dialogEl, 'left', `${window.innerWidth / 2 + marginLeft}px`);\r\n        this._renderer.setStyle(dialogEl, 'top',  `${window.innerHeight / 2 + marginTop}px`);\r\n\r\n        let contentHeight = this.config.height - 38;\r\n        if (this.config.showButtons) {\r\n            contentHeight = contentHeight - 50;\r\n        }\r\n        if (!this.config.fitContent) {\r\n            this._renderer.setStyle(\r\n                contentEl,\r\n                'height',\r\n                contentHeight + 'px'\r\n            );\r\n        }\r\n        this._renderer.setStyle(contentEl, 'overflow', 'hidden');\r\n        this._renderer.setStyle(dialogEl, 'transform', `translate3d(0px, 0px, 0px)`);\r\n\r\n        setTimeout(() => {\r\n            const container = this.getContainerSize();\r\n            const { width: containerWidth, height: containerHeight } = container;\r\n            this.resized.emit({ width: this.config.width, height: this.config.height,  containerWidth,  containerHeight });\r\n        });\r\n    }\r\n\r\n    moveTo(x: number, y: number) {\r\n        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n        this._renderer.setStyle(dialogEl, 'transform', `translate3d(${x}px, ${y}px, 0px)`);\r\n        // this._renderer.setStyle(dialogEl, 'top', '50%');\r\n        // this._renderer.setStyle(dialogEl, 'left', '50%');\r\n\r\n        // const marginLeft = Number.parseInt('' + -this.config.width / 2);\r\n        // const marginTop = Number.parseInt('' + -this.config.height / 2);\r\n        // this._renderer.setStyle(dialogEl, 'left', `${window.innerWidth / 2 + marginLeft}px`);\r\n        // this._renderer.setStyle(dialogEl, 'top',  `${window.innerHeight / 2 + marginTop}px`);\r\n\r\n\r\n        this.draggbar.position = { x, y };\r\n        this.draggbar.resetPosition();\r\n    }\r\n\r\n    maxDialog(rememberPrevSize = true) {\r\n        if (rememberPrevSize) {\r\n            this.prevWidth = this.config.width;\r\n            this.prevHeight = this.config.height;\r\n        }\r\n        // this.config.width = (document.scrollingElement?document.scrollingElement:document.documentElement)['clientWidth'] - 20;\r\n        // this.config.height = (document.scrollingElement?document.scrollingElement:document.documentElement)['clientHeight'] - 20;\r\n\r\n        this.config.width = window.innerWidth - 20;\r\n        this.config.height = window.innerHeight - 20;\r\n\r\n        this.config.draggable = false;\r\n        this.config.resizable = false;\r\n        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n        this._renderer.addClass(dialogEl, 'model-dialog-maximize');\r\n        this._renderer.setStyle(dialogEl, 'top', '50%');\r\n        this._renderer.setStyle(dialogEl, 'left', '50%');\r\n        this.isMax = true;\r\n        this.toCenter();\r\n        this.moveTo(0, 0);\r\n    }\r\n\r\n    resize(width: number, height: number) {\r\n        if (width) {\r\n            this.config.width = width;\r\n        }\r\n\r\n        if (height) {\r\n            this.config.height = height;\r\n        }\r\n\r\n        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n        this._renderer.removeClass(dialogEl, 'model-dialog-maximize');\r\n        this.toCenter();\r\n        this.draggbar.resetPosition();\r\n    }\r\n\r\n    dropdown(el: any) {\r\n        // const rect = el.getBoundingClientRect();\r\n        // this._renderer.removeStyle(el, 'margin-top');\r\n        // this._renderer.removeStyle(el, 'margin-left');\r\n        // this._renderer.setStyle(el, 'top', `${rect.top}px`);\r\n        // this._renderer.setStyle(el, 'left', `${rect.left}px`);\r\n\r\n        // this._renderer.removeStyle(el, 'transform');\r\n        // this._renderer.removeStyle(el, '-webkit-transform');\r\n        // this._renderer.removeStyle(el, '-ms-transform');\r\n        // this._renderer.removeStyle(el, '-moz-transform');\r\n        // this._renderer.removeStyle(el, '-o-transform');\r\n    }\r\n\r\n    revertDialog() {\r\n        this.isMax = false;\r\n\r\n        const ww = window.innerWidth - 20;\r\n        const wh = window.innerHeight - 20\r\n\r\n        this.config.width = this.prevWidth == ww ? this.originalWidth : this.prevWidth;\r\n        this.config.height = this.prevHeight == wh ? this.originalHeight : this.prevHeight;\r\n       \r\n        if (this.config.width > ww) {\r\n            this.config.width = ww;\r\n        }\r\n\r\n        if (this.config.height > wh) {\r\n            this.config.height = wh;\r\n        }\r\n\r\n\r\n        this.config.draggable = true;\r\n        this.config.resizable = true;\r\n        const dialogEl = this.el.nativeElement.querySelector('.modal-dialog');\r\n        this._renderer.removeClass(dialogEl, 'model-dialog-maximize');\r\n        this.toCenter();\r\n        this.draggbar.resetPosition();\r\n    }\r\n\r\n    changeDialogSize() {\r\n        if (this.isMax) {\r\n            this.revertDialog();\r\n        } else {\r\n            this.maxDialog();\r\n        }\r\n        this._windowResizeToMax = false;\r\n    }\r\n\r\n    resizeStop(opts: any) {\r\n        // console.log('resizeStop');\r\n        this.config.width = opts.size.width;\r\n        this.config.height = opts.size.height;\r\n        const container = this.getContainerSize();\r\n        const { width: containerWidth, height: containerHeight } = container;\r\n        this.resized.emit({ ...opts.size, ...{ containerWidth, containerHeight } });\r\n    }\r\n    /**\r\n     * æ¯å¦éæ¨¡æ\r\n     * @returns \r\n     */\r\n    setIsModeless(){        \r\n        if(this.config.hasOwnProperty('modeless')){\r\n            this.isModeless= this.config['modeless'];\r\n        }else{\r\n            this.isModeless=false;\r\n        }\r\n    }\r\n    updateDialogZindex(zIndex){\r\n        if(this.isModeless){\r\n            let modalEl=this.el.nativeElement;\r\n            const dialogEl = modalEl.querySelector('.modal-dialog');\r\n            this._renderer.setStyle(dialogEl, 'position', 'fixed');\r\n            this._renderer.setStyle(dialogEl, 'zIndex', zIndex?zIndex:modalEl.style.zIndex );\r\n        }\r\n    }\r\n}\r\n","import {\r\n    ComponentRef, Injectable, TemplateRef,\r\n    EventEmitter, Renderer2, RendererFactory2, NgZone\r\n} from '@angular/core';\r\n\r\n\r\nimport { ModalBackdropComponent } from './modal-backdrop.component';\r\nimport { ModalContainerComponent } from './modal-container.component';\r\nimport {\r\n    CLASS_NAME,\r\n    modalConfigDefaults,\r\n    ModalOptions,\r\n    TRANSITION_DURATIONS\r\n} from './modal-options.class';\r\nimport { BsModalRef } from './bs-modal-ref.service';\r\nimport { Utils } from '@farris/ui-modal/utils';\r\nimport { ComponentLoaderFactory, ComponentLoader } from '@farris/ui-modal/component-loader';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n\r\n@Injectable()\r\nexport class BsModalService {\r\n    version = '0.0.6';\r\n    config: ModalOptions = modalConfigDefaults;\r\n\r\n    onShow: EventEmitter<any> = new EventEmitter();\r\n    onShown: EventEmitter<any> = new EventEmitter();\r\n    onHide: EventEmitter<any> = new EventEmitter();\r\n    onHidden: EventEmitter<any> = new EventEmitter();\r\n\r\n    protected isBodyOverflowing = false;\r\n    protected originalBodyPadding = 0;\r\n\r\n    protected scrollbarWidth = 0;\r\n\r\n    protected backdropRef: ComponentRef<ModalBackdropComponent>;\r\n    private _backdropLoader: ComponentLoader<ModalBackdropComponent>;\r\n    // æ è®°æ¨¡æåéæ¨¡æçªå£çæ»ä¸ªæ°\r\n    private modalsCount = 0;\r\n    private lastDismissReason = '';\r\n\r\n    private loaders: ComponentLoader<ModalContainerComponent>[] = [];\r\n\r\n    private _renderer: Renderer2;\r\n\r\n    private _documentMouseDownHandler = null;\r\n    private commonUtils: CommonUtils = null;\r\n    // æ è®°éæ¨¡æçªå£ä¸ªæ°\r\n    private modellessCount=0;\r\n\r\n    constructor(rendererFactory: RendererFactory2, private clf: ComponentLoaderFactory, public ngZone: NgZone) {\r\n\r\n        this._renderer = rendererFactory.createRenderer(null, null);\r\n\r\n        this._backdropLoader = this.clf.createLoader<ModalBackdropComponent>(\r\n            null,\r\n            null,\r\n            this._renderer\r\n        );\r\n\r\n        this.commonUtils = new CommonUtils();\r\n    }\r\n\r\n    private clearDocumentEvents() {\r\n        if (this._documentMouseDownHandler) {\r\n            document.body.removeEventListener('mousedown', this._documentMouseDownHandler);\r\n        }\r\n        this._documentMouseDownHandler = null;\r\n    }\r\n\r\n    /** Shows a modal */\r\n    show(content: string | TemplateRef<any> | any, config?: ModalOptions): BsModalRef {\r\n        this.modalsCount++;\r\n        this._createLoaders();\r\n        this.config = Object.assign({}, modalConfigDefaults, config);\r\n\r\n        this.checkDialogSize();\r\n        if(this.isModeless()){            \r\n            this.modellessCount++;\r\n        } else{\r\n            this._showBackdrop();\r\n        }      \r\n        this.lastDismissReason = null;\r\n\r\n        const modal = this._showModal(content);\r\n        return modal;\r\n    }\r\n    private isModeless(){\r\n        if(this.config.hasOwnProperty('modeless')){\r\n            return this.config['modeless'];\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hide(level: number) {\r\n        if (this.modalsCount-this.modellessCount === 1) {\r\n            this._hideBackdrop();\r\n            this.resetScrollbar();\r\n        }\r\n        this.modalsCount = this.modalsCount >= 1 ? this.modalsCount - 1 : 0;\r\n        // this.ngZone.runOutsideAngular(() => {\r\n        //     setTimeout(() => {\r\n            // this._hideModal(level);\r\n            // this.removeLoaders(level);\r\n\r\n        //     }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\r\n        // });\r\n        this._hideModal(level);\r\n        this.removeLoaders(level);\r\n\r\n        this.clearDocumentEvents();\r\n    }\r\n\r\n    _showBackdrop(): void {\r\n        const isBackdropEnabled =\r\n            this.config.backdrop || this.config.backdrop === 'static';\r\n        const isBackdropInDOM =\r\n            !this.backdropRef || !this.backdropRef.instance.isShown;\r\n        /**\r\n         * æ­¤å¤åéå®æ¯è§£å³ãå¼¹åºå¤ä¸ªæ¨¡æçªå£æ¶ï¼å ä¸ºé®ç½©å±çå å ï¼å¯¼è´èæ¯å¾é»ãçé®é¢\r\n         */\r\n        if (this.modalsCount-this.modellessCount === 1) {\r\n            this.removeBackdrop();\r\n\r\n            if (isBackdropEnabled && isBackdropInDOM) {\r\n                this._backdropLoader\r\n                    .attach(ModalBackdropComponent)\r\n                    .to('body')\r\n                    .show({ isAnimated: this.config.animated });\r\n                this.backdropRef = this._backdropLoader._componentRef;\r\n            }\r\n        }\r\n    }\r\n\r\n    _hideBackdrop(): void {\r\n        if (!this.backdropRef) {\r\n            return;\r\n        }\r\n        this.backdropRef.instance.isShown = false;\r\n        const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\r\n        this.ngZone.runOutsideAngular(() => {\r\n            setTimeout(() => this.removeBackdrop(), duration);\r\n        });\r\n    }\r\n\r\n    private updateZindex(_modal) {\r\n        const maxZindex = this.commonUtils.getFloatingLayerIndex();\r\n        // éæ¨¡æä¸zIndexçè®¾ç½®\r\n        _modal.dialog.instance.updateDialogZindex(maxZindex);\r\n        _modal.dialog.location.nativeElement.style.zIndex = maxZindex;\r\n    }\r\n\r\n    _showModal(content: any): BsModalRef {\r\n        const modalLoader = this.loaders[this.loaders.length - 1];\r\n        const bsModalRef = new BsModalRef();\r\n\r\n        const modalContainerRef = modalLoader\r\n            .provide({ provide: ModalOptions, useValue: this.config })\r\n            .provide({ provide: BsModalRef, useValue: bsModalRef })\r\n            .attach(ModalContainerComponent)\r\n            .to('body')\r\n            .show({ content, isAnimated: this.config.animated,\r\n                initialState: this.config.initialState,\r\n                bsModalService: this\r\n            });\r\n        modalContainerRef.instance.level = this.getModalsCount();\r\n        modalContainerRef.instance.dialogType = this.config.dialogType;\r\n        modalContainerRef.instance.iframe = '';\r\n        if (this.config.dialogType === 'iframe') {\r\n            modalContainerRef.instance.iframe = content;\r\n        }\r\n        bsModalRef.close = (e) => {\r\n            modalContainerRef.instance.close(e);\r\n            this.clearDocumentEvents();\r\n        };\r\n\r\n\r\n        // å¦ææ¯æ¶æ¯ç±»åçï¼åºç°æ»å¨æ¡å°±ä¸ååºå¨ç»äº\r\n        if (!this.config.fitContent) {\r\n            modalContainerRef.instance.toCenter();\r\n            this.ngZone.runOutsideAngular(() => {\r\n                document.body.addEventListener('mousedown', this._documentMouseDownHandler = (e) => {this._onMouseDown(e,modalContainerRef.instance.isModeless)});\r\n            });\r\n        }\r\n        bsModalRef.content = modalLoader.getInnerComponent() || null;\r\n\r\n        bsModalRef.dialog = modalContainerRef;\r\n        bsModalRef.buttons = modalContainerRef.instance.buttons;\r\n\r\n        modalContainerRef.instance['modalRef'] = bsModalRef;\r\n\r\n        if (this.config.opened) {\r\n            this.config.opened({ instance: bsModalRef });\r\n        }\r\n\r\n        this.updateZindex(bsModalRef);\r\n\r\n        return bsModalRef;\r\n    }\r\n    /**\r\n     * å¢å åæ°ï¼è§£å³ï¼å¨å½åæ¨¡æçªå£ååå¼¹åºéæ¨¡æåå¼¹åºDialogæ¶ï¼ç¹å»å¤å±\r\n     * @param e \r\n     * @param curModalisModeless \r\n     * @returns \r\n     */\r\n    _onMouseDown(e: any,curModalisModeless=null) {\r\n        if(curModalisModeless){\r\n            var modalDialogEl=e.target.classList.contains('modal-dialog')?e.target:null;\r\n            modalDialogEl=modalDialogEl?modalDialogEl:e.target.closest('.modal-dialog');\r\n            if(modalDialogEl){\r\n                const maxZindex = this.commonUtils.getFloatingLayerIndex();\r\n                modalDialogEl.style.zIndex = maxZindex;\r\n                modalDialogEl.parentElement.style.zIndex = maxZindex;\r\n            }\r\n            return false;\r\n        }else{\r\n            if (e.target.localName === 'modal-container' || e.target.classList.contains('farris-modal')) {\r\n          \r\n                this._renderer.addClass(e.target, 'animated');\r\n                this._renderer.addClass(e.target, 'shake');\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    setTimeout(() => {\r\n                        this._renderer.removeClass(e.target, 'animated');\r\n                        this._renderer.removeClass(e.target, 'shake');\r\n                    }, 650);\r\n                });\r\n                return false;\r\n            }\r\n           \r\n        }        \r\n    }\r\n\r\n    _hideModal(level: number): void {\r\n        const modalLoader = this.loaders[level - 1];\r\n        if (modalLoader) {\r\n            modalLoader.hide();\r\n        }\r\n    }\r\n\r\n    getModalsCount(): number {\r\n        return this.modalsCount;\r\n    }\r\n\r\n    getCurrentModalContainer() {\r\n        return this.loaders[this.getModalsCount() - 1];\r\n    }\r\n\r\n    setDismissReason(reason: string) {\r\n        this.lastDismissReason = reason;\r\n    }\r\n\r\n    removeBackdrop(): void {\r\n        this._backdropLoader.hide();\r\n        this.backdropRef = null;\r\n    }\r\n\r\n    /** AFTER PR MERGE MODAL.COMPONENT WILL BE USING THIS CODE */\r\n    /** Scroll bar tricks */\r\n    /** @internal */\r\n    checkScrollbar(): void {\r\n        this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\r\n        this.scrollbarWidth = this.getScrollbarWidth();\r\n    }\r\n\r\n    setScrollbar(): void {\r\n        if (!document) {\r\n            return;\r\n        }\r\n\r\n        this.originalBodyPadding = parseInt(\r\n            window\r\n                .getComputedStyle(document.body)\r\n                .getPropertyValue('padding-right') || '0',\r\n            10\r\n        );\r\n\r\n        if (this.isBodyOverflowing) {\r\n            document.body.style.paddingRight = `${this.originalBodyPadding +\r\n                this.scrollbarWidth}px`;\r\n        }\r\n    }\r\n\r\n    private resetScrollbar(): void {\r\n        document.body.style.paddingRight = `${this.originalBodyPadding}px`;\r\n    }\r\n\r\n    // thx d.walsh\r\n    private getScrollbarWidth(): number {\r\n        const scrollDiv = this._renderer.createElement('div');\r\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\r\n        this._renderer.appendChild(document.body, scrollDiv);\r\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n        this._renderer.removeChild(document.body, scrollDiv);\r\n\r\n        return scrollbarWidth;\r\n    }\r\n\r\n    private _createLoaders(): void {\r\n        const loader = this.clf.createLoader<ModalContainerComponent>(\r\n            null,\r\n            null,\r\n            this._renderer\r\n        );\r\n        this.copyEvent(loader.onBeforeShow, this.onShow);\r\n        this.copyEvent(loader.onShown, this.onShown);\r\n        this.copyEvent(loader.onBeforeHide, this.onHide);\r\n        this.copyEvent(loader.onHidden, this.onHidden);\r\n        this.loaders.push(loader);\r\n    }\r\n\r\n    private removeLoaders(level: number): void {\r\n        this.loaders.splice(level - 1, 1);\r\n        this.loaders.forEach(\r\n            (loader: ComponentLoader<ModalContainerComponent>, i: number) => {\r\n                loader.instance.level = i + 1;\r\n            }\r\n        );\r\n    }\r\n\r\n    private copyEvent(from: EventEmitter<any>, to: EventEmitter<any>) {\r\n        from.subscribe(() => {\r\n            to.emit(this.lastDismissReason);\r\n        });\r\n    }\r\n\r\n    private checkDialogSize() {\r\n        const newSize = Utils.checkDialogSize(this.config.width, this.config.height);\r\n        if (this.config.width !== newSize.width) {\r\n            this.config.width = newSize.width - 20;\r\n        }\r\n\r\n        if (this.config.height !== newSize.height) {\r\n            this.config.height = newSize.height - 20;\r\n        }\r\n    }\r\n    closeUpdateModelessCountByModal(curIsModeless){\r\n        if(curIsModeless){\r\n            this.modellessCount=this.modellessCount-1>0?this.modellessCount-1:0;\r\n        }\r\n    }\r\n}\r\n","export class ModalBackdropOptions {\r\n  animate = true;\r\n\r\n  constructor(options: ModalBackdropOptions) {\r\n    Object.assign(this, options);\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Optional } from '@angular/core';\r\n/* tslint:disable:max-file-line-count */\r\n// todo: should we support enforce focus in?\r\n// todo: in original bs there are was a way to prevent modal from showing\r\n// todo: original modal had resize events\r\n\r\nimport {\r\n    ComponentRef, Directive, ElementRef, EventEmitter, HostListener, Input,\r\n    OnDestroy, OnInit, Output, Renderer2, ViewContainerRef, NgZone\r\n} from '@angular/core';\r\n\r\nimport { document, window, isBs3, Utils } from '@farris/ui-modal/utils';\r\n\r\nimport { ModalBackdropComponent } from './modal-backdrop.component';\r\nimport { CLASS_NAME, DISMISS_REASONS, modalConfigDefaults, ModalOptions } from './modal-options.class';\r\nimport { ComponentLoader, ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n\r\nconst TRANSITION_DURATION = 300;\r\nconst BACKDROP_TRANSITION_DURATION = 150;\r\n\r\n/** Mark any code with directive to show it's content in modal */\r\n@Directive({\r\n    selector: '[bsModal]',\r\n    exportAs: 'bs-modal'\r\n})\r\nexport class ModalDirective implements OnDestroy, OnInit {\r\n    /** allows to set modal configuration via element property */\r\n    @Input()\r\n    set config(conf: ModalOptions) {\r\n        this._config = this.getConfig(conf);\r\n    }\r\n\r\n    get config(): ModalOptions {\r\n        return this._config;\r\n    }\r\n\r\n    /** This event fires immediately when the `show` instance method is called. */\r\n    @Output() onShow: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\r\n    /** This event is fired when the modal has been made visible to the user\r\n     * (will wait for CSS transitions to complete)\r\n     */\r\n    @Output()\r\n    onShown: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\r\n    /** This event is fired immediately when\r\n     * the hide instance method has been called.\r\n     */\r\n    @Output() onHide: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\r\n    /** This event is fired when the modal has finished being\r\n     * hidden from the user (will wait for CSS transitions to complete).\r\n     */\r\n    @Output() onHidden: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\r\n\r\n    /** This field contains last dismiss reason.\r\n     * Possible values: `backdrop-click`, `esc` and `null`\r\n     * (if modal was closed by direct call of `.hide()`).\r\n     */\r\n    dismissReason: string;\r\n\r\n    get isShown(): boolean {\r\n        return this._isShown;\r\n    }\r\n\r\n    protected _config: ModalOptions;\r\n    protected _isShown = false;\r\n\r\n    protected isBodyOverflowing = false;\r\n    protected originalBodyPadding = 0;\r\n    protected scrollbarWidth = 0;\r\n\r\n    protected timerHideModal: any = 0;\r\n    protected timerRmBackDrop: any = 0;\r\n\r\n    // reference to backdrop component\r\n    backdrop: ComponentRef<ModalBackdropComponent>;\r\n    private _backdrop: ComponentLoader<ModalBackdropComponent>;\r\n\r\n    private isNested = false;\r\n    private commonUtils: CommonUtils = null;\r\n    constructor(\r\n        private _element: ElementRef,\r\n        _viewContainerRef: ViewContainerRef,\r\n        private _renderer: Renderer2,\r\n        clf: ComponentLoaderFactory,\r\n        private ngZone: NgZone,\r\n        @Optional() public cd: ChangeDetectorRef) {\r\n        this._backdrop = clf.createLoader<ModalBackdropComponent>(\r\n            _element,\r\n            _viewContainerRef,\r\n            _renderer\r\n        );\r\n\r\n        this.commonUtils = new  CommonUtils();\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick(event: MouseEvent) {\r\n        const tag = event.target as any;\r\n\r\n        // if (tag.localName === 'label') {\r\n        //     if (tag.className) {\r\n        //         const clsList = tag.className.split(' ');\r\n        //         if (\r\n        //             clsList.indexOf('k-radio-label') > -1 ||\r\n        //             clsList.indexOf('k-checkbox-label') > -1 ||\r\n        //             clsList.indexOf('custom-control-label') > -1\r\n        //         ) {\r\n        //             return;\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        // if (tag.localName === 'input' && (tag.type === 'checkbox' || tag.type === 'radio' || tag.type === 'file')) {\r\n        //     return;\r\n        // }\r\n\r\n        if (\r\n            this.config.ignoreBackdropClick ||\r\n            this.config.backdrop === 'static' ||\r\n            event.target !== this._element.nativeElement\r\n        ) {\r\n            event.stopPropagation();\r\n            return;\r\n        }\r\n        this.dismissReason = DISMISS_REASONS.BACKRDOP;\r\n        this.hide(event);\r\n    }\r\n\r\n    // todo: consider preventing default and stopping propagation\r\n    @HostListener('keydown.esc', ['$event'])\r\n    onEsc(event: any): void {\r\n        if (!this._isShown) {\r\n            return;\r\n        }\r\n\r\n        if (event.keyCode === 27) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (this.config.keyboard) {\r\n            this.dismissReason = DISMISS_REASONS.ESC;\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): any {\r\n        this.config = void 0;\r\n        if (this._isShown) {\r\n            this._isShown = false;\r\n            this.hideModal();\r\n            this._backdrop.dispose();\r\n        }\r\n    }\r\n\r\n    ngOnInit(): any {\r\n        this._config = this._config || this.getConfig();\r\n        // this.ngZone.runOutsideAngular(() => {\r\n        setTimeout(() => {\r\n            if (this._config.show) {\r\n                this.show();\r\n            }\r\n        }, 0);\r\n        // });\r\n    }\r\n\r\n    /* Public methods */\r\n\r\n    /** Allows to manually toggle modal visibility */\r\n    toggle(): void {\r\n        return this._isShown ? this.hide() : this.show();\r\n    }\r\n\r\n    /** Allows to manually open modal */\r\n    show(): void {\r\n        this.dismissReason = null;\r\n        this.onShow.emit(this);\r\n        if (this._isShown) {\r\n            return;\r\n        }\r\n        clearTimeout(this.timerHideModal);\r\n        clearTimeout(this.timerRmBackDrop);\r\n\r\n        const maxZindex = this.commonUtils.getFloatingLayerIndex();\r\n        this._element.nativeElement.style.zIndex = maxZindex;\r\n\r\n\r\n        this._isShown = true;\r\n\r\n        this.checkScrollbar();\r\n        this.setScrollbar();\r\n\r\n        if (document && document.body) {\r\n            if (document.body.classList.contains(CLASS_NAME.OPEN)) {\r\n                this.isNested = true;\r\n            } else {\r\n                this._renderer.addClass(document.body, CLASS_NAME.OPEN);\r\n            }\r\n        }\r\n\r\n        this.showBackdrop(() => {\r\n            this.showElement();\r\n        });\r\n    }\r\n\r\n    /** Allows to manually close modal */\r\n    hide(event?: Event): void {\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        this.onHide.emit(this);\r\n\r\n        // todo: add an option to prevent hiding\r\n        if (!this._isShown) {\r\n            return;\r\n        }\r\n\r\n        clearTimeout(this.timerHideModal);\r\n        clearTimeout(this.timerRmBackDrop);\r\n\r\n        this._isShown = false;\r\n        this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\r\n        this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\r\n        // if (!isBs3()) {\r\n        // }\r\n        // this._addClassIn = false;\r\n\r\n        if (this._config.animated) {\r\n            this.timerHideModal = setTimeout(\r\n                () => this.hideModal(),\r\n                TRANSITION_DURATION\r\n            );\r\n        } else {\r\n            this.hideModal();\r\n        }\r\n    }\r\n\r\n    /** Private methods @internal */\r\n    protected getConfig(config?: ModalOptions): ModalOptions {\r\n        return Object.assign({}, modalConfigDefaults, config);\r\n    }\r\n\r\n    /**\r\n     *  Show dialog\r\n     *  @internal\r\n     */\r\n    protected showElement(): void {\r\n        // todo: replace this with component loader usage\r\n        if (\r\n            !this._element.nativeElement.parentNode ||\r\n            this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE\r\n        ) {\r\n            // don't move modals dom position\r\n            if (document && document.body) {\r\n                document.body.appendChild(this._element.nativeElement);\r\n            }\r\n        }\r\n\r\n        this._renderer.setAttribute(\r\n            this._element.nativeElement,\r\n            'aria-hidden',\r\n            'false'\r\n        );\r\n        this._renderer.setAttribute(\r\n            this._element.nativeElement,\r\n            'aria-modal',\r\n            'true'\r\n        );\r\n        this._renderer.setStyle(\r\n            this._element.nativeElement,\r\n            'display',\r\n            'block'\r\n        );\r\n        this._renderer.setProperty(\r\n            this._element.nativeElement,\r\n            'scrollTop',\r\n            0\r\n        );\r\n\r\n        if (this._config.animated) {\r\n            Utils.reflow(this._element.nativeElement);\r\n        }\r\n\r\n        // this._addClassIn = true;\r\n        this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\r\n        this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\r\n        // if (!isBs3()) {\r\n        // }\r\n\r\n        const transitionComplete = () => {\r\n            if (this._config.focus) {\r\n                this._element.nativeElement.focus();\r\n            }\r\n            this.onShown.emit(this);\r\n        };\r\n\r\n        if (this._config.animated) {\r\n            // this.ngZone.runOutsideAngular(() => {\r\n                setTimeout(transitionComplete, TRANSITION_DURATION);\r\n            // });\r\n        } else {\r\n            transitionComplete();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    protected hideModal(): void {\r\n        this._renderer.setAttribute(\r\n            this._element.nativeElement,\r\n            'aria-hidden',\r\n            'true'\r\n        );\r\n        this._renderer.setStyle(\r\n            this._element.nativeElement,\r\n            'display',\r\n            'none'\r\n        );\r\n        this.showBackdrop(() => {\r\n            if (!this.isNested) {\r\n                if (document && document.body && !document.querySelectorAll('.farris-modal.show').length) {\r\n                    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\r\n                }\r\n                this.resetScrollbar();\r\n            }\r\n            this.resetAdjustments();\r\n            this.focusOtherModal();\r\n            this.onHidden.emit(this);\r\n        });\r\n    }\r\n\r\n    // todo: original show was calling a callback when done, but we can use\r\n    // promise\r\n    /** @internal */\r\n    protected showBackdrop(callback?: Function): void {\r\n        if (\r\n            this._isShown &&\r\n            this.config.backdrop &&\r\n            (!this.backdrop || !this.backdrop.instance.isShown)\r\n        ) {\r\n            this.removeBackdrop();\r\n            this._backdrop\r\n                .attach(ModalBackdropComponent)\r\n                .to('body')\r\n                .show({ isAnimated: this._config.animated });\r\n            this.backdrop = this._backdrop._componentRef;\r\n\r\n            if (!callback) {\r\n                return;\r\n            }\r\n\r\n            if (!this._config.animated) {\r\n                callback();\r\n\r\n                return;\r\n            }\r\n            // this.ngZone.runOutsideAngular(() => {\r\n                setTimeout(callback, BACKDROP_TRANSITION_DURATION);\r\n            // })\r\n        } else if (!this._isShown && this.backdrop) {\r\n            this.backdrop.instance.isShown = false;\r\n\r\n            const callbackRemove = () => {\r\n                this.removeBackdrop();\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            };\r\n\r\n            if (this.backdrop.instance.isAnimated) {\r\n                // this.ngZone.runOutsideAngular(() => {\r\n                    this.timerRmBackDrop = setTimeout(\r\n                        callbackRemove,\r\n                        BACKDROP_TRANSITION_DURATION\r\n                    );\r\n                // });\r\n            } else {\r\n                callbackRemove();\r\n            }\r\n        } else if (callback) {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    protected removeBackdrop(): void {\r\n        this._backdrop.hide();\r\n    }\r\n\r\n    /** Events tricks */\r\n\r\n    // no need for it\r\n    // protected setEscapeEvent():void {\r\n    //   if (this._isShown && this._config.keyboard) {\r\n    //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\r\n    //       if (event.which === 27) {\r\n    //         this.hide()\r\n    //       }\r\n    //     })\r\n    //\r\n    //   } else if (!this._isShown) {\r\n    //     $(this._element).off(Event.KEYDOWN_DISMISS)\r\n    //   }\r\n    // }\r\n\r\n    // protected setResizeEvent():void {\r\n    // console.log(this.renderer.listenGlobal('', Event.RESIZE));\r\n    // if (this._isShown) {\r\n    //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\r\n    // } else {\r\n    //   $(window).off(Event.RESIZE)\r\n    // }\r\n    // }\r\n\r\n    protected focusOtherModal() {\r\n        if (this._element.nativeElement.parentElement == null) return;\r\n        const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\r\n        if (!otherOpenedModals.length) {\r\n            return;\r\n        }\r\n        otherOpenedModals[otherOpenedModals.length - 1].focus();\r\n    }\r\n\r\n    /** @internal */\r\n    protected resetAdjustments(): void {\r\n        this._renderer.setStyle(\r\n            this._element.nativeElement,\r\n            'paddingLeft',\r\n            ''\r\n        );\r\n        this._renderer.setStyle(\r\n            this._element.nativeElement,\r\n            'paddingRight',\r\n            ''\r\n        );\r\n    }\r\n\r\n    /** Scroll bar tricks */\r\n    /** @internal */\r\n    protected checkScrollbar(): void {\r\n        this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\r\n        this.scrollbarWidth = this.getScrollbarWidth();\r\n    }\r\n\r\n    protected setScrollbar(): void {\r\n        if (!document) {\r\n            return;\r\n        }\r\n\r\n        this.originalBodyPadding = parseInt(\r\n            window\r\n                .getComputedStyle(document.body)\r\n                .getPropertyValue('padding-right') || 0,\r\n            10\r\n        );\r\n\r\n        if (this.isBodyOverflowing) {\r\n            document.body.style.paddingRight = `${this.originalBodyPadding +\r\n                this.scrollbarWidth}px`;\r\n        }\r\n    }\r\n\r\n    protected resetScrollbar(): void {\r\n        document.body.style.paddingRight = this.originalBodyPadding + 'px';\r\n    }\r\n\r\n    // thx d.walsh\r\n    protected getScrollbarWidth(): number {\r\n        const scrollDiv = this._renderer.createElement('div');\r\n        this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\r\n        this._renderer.appendChild(document.body, scrollDiv);\r\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n        this._renderer.removeChild(document.body, scrollDiv);\r\n\r\n        return scrollbarWidth;\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\n\r\nimport { ModalBackdropComponent } from './modal-backdrop.component';\r\nimport { ModalDirective } from './modal.directive';\r\nimport { ModalContainerComponent } from './modal-container.component';\r\nimport { BsModalService } from './bs-modal.service';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\nimport { ComponentLoaderFactory } from '@farris/ui-modal/component-loader';\r\nimport { ModalButtonDirective } from './modal-button.directive';\r\nimport{FAreaResponseModule} from '@farris/ui-area-response';\r\nimport { FarrisTooltipModule } from '@farris/ui-tooltip';\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        PerfectScrollbarModule,\r\n        AngularDraggableModule,\r\n        FAreaResponseModule,\r\n        FarrisTooltipModule\r\n    ],\r\n    declarations: [\r\n        ModalDirective,\r\n        ModalBackdropComponent,\r\n        ModalContainerComponent,\r\n        ModalButtonDirective\r\n    ],\r\n    exports: [\r\n        ModalBackdropComponent, ModalDirective\r\n    ],\r\n    entryComponents: [ModalBackdropComponent, ModalContainerComponent]\r\n})\r\nexport class ModalModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: ModalModule,\r\n            providers: [\r\n                ComponentLoaderFactory,\r\n                BsModalService,\r\n                PositioningService\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["Injectable","of","isBs3","Utils","Component","ElementRef","Renderer2","Directive","Injector","Input","EventEmitter","fromEvent","debounceTime","TemplateRef","DomSanitizer","ViewChild","AngularDraggableDirective","Output","HostBinding","ViewChildren","HostListener","CommonUtils","RendererFactory2","ComponentLoaderFactory","NgZone","document","window","ViewContainerRef","ChangeDetectorRef","Optional","PositioningService","NgModule","CommonModule","PerfectScrollbarModule","AngularDraggableModule","FAreaResponseModule","FarrisTooltipModule"],"mappings":"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"}
