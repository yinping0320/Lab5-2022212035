{"version":3,"sources":["ng://@farris/ui-modal/component-loader/bs-component-ref.class.ts","node_modules/tslib/tslib.es6.js","ng://@farris/ui-modal/component-loader/content-ref.class.ts","ng://@farris/ui-modal/component-loader/component-loader.class.ts","ng://@farris/ui-modal/component-loader/component-loader.factory.ts"],"names":["BsComponentRef","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","ContentRef","nodes","viewRef","componentRef","this","Object","defineProperty","ComponentLoader","prototype","_isHiding","_componentRef","attach","compType","_componentFactory","_componentFactoryResolver","resolveComponentFactory","to","container","position","opts","attachment","_elementRef","provide","provider","_providers","show","_subscribePositioning","_innerComponent","onBeforeShow","emit","_contentRef","_getContentRef","content","context","initialState","injector","ReflectiveInjector","resolveAndCreate","_injector","create","_applicationRef","attachView","hostView","instance","assign","ElementRef","nativeElement","appendChild","location","document","querySelector","parentElement","changeDetectorRef","markForCheck","detectChanges","onShown","hasOwnProperty","_posService","element","target","appendToBody","_registerOutsideClick","hide","onBeforeHide","componentEl","parentNode","removeChild","destroy","_viewContainerRef","remove","indexOf","_removeGlobalListener","onHidden","toggle","isShown","dispose","_unsubscribePositioning","_unregisterListenersFn","listen","listenOpts","_this","triggers","_listenOpts","outsideClick","registerHide","listenToTriggersV2","_renderer","_globalListener","attachInline","vRef","template","_inlineViewRef","createEmbeddedView","target_1","_ngZone","runOutsideAngular","setTimeout","registerOutsideClick","targets","getInnerComponent","_zoneSubscription","self","onStable","subscribe","unsubscribe","TemplateRef","_viewRef","rootNodes","ComponentRef","createText","contentCmptFactory","modalContentInjector","__spread","arguments","length","concat","EventEmitter","Function","ComponentLoaderFactory","createLoader","Injectable","ComponentFactoryResolver","NgZone","Injector","PositioningService","ApplicationRef"],"mappings":"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","sourcesContent":["import { TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\nexport class BsComponentRef<T> {\r\n  templateRef: TemplateRef<T>;\r\n  viewContainer: ViewContainerRef;\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\r\n * @copyright Valor Software\r\n * @copyright Angular ng-bootstrap team\r\n */\r\n\r\nimport { ComponentRef, ViewRef } from '@angular/core';\r\n\r\nexport class ContentRef {\r\n  nodes: any[];\r\n  viewRef?: ViewRef;\r\n  componentRef?: ComponentRef<any>;\r\n\r\n  constructor(\r\n    nodes: any[],\r\n    viewRef?: ViewRef,\r\n    componentRef?: ComponentRef<any>\r\n  ) {\r\n    this.nodes = nodes;\r\n    this.viewRef = viewRef;\r\n    this.componentRef = componentRef;\r\n  }\r\n}\r\n","// tslint:disable:max-file-line-count\r\n// todo: add delay support\r\n// todo: merge events onShow, onShown, etc...\r\n// todo: add global positioning configuration?\r\nimport {\r\n    ApplicationRef,\r\n    ComponentFactory,\r\n    ComponentFactoryResolver,\r\n    ComponentRef,\r\n    ElementRef,\r\n    EmbeddedViewRef,\r\n    EventEmitter,\r\n    Injector,\r\n    NgZone,\r\n    Provider,\r\n    ReflectiveInjector,\r\n    Renderer2,\r\n    TemplateRef,\r\n    Type,\r\n    ViewContainerRef\r\n} from '@angular/core';\r\nimport { PositioningOptions, PositioningService } from '@farris/ui-modal/positioning';\r\nimport { listenToTriggersV2, registerOutsideClick } from '@farris/ui-modal/utils';\r\nimport { ContentRef } from './content-ref.class';\r\nimport { ListenOptions } from './listen-options.model';\r\n\r\nexport class ComponentLoader<T> {\r\n    onBeforeShow: EventEmitter<any> = new EventEmitter();\r\n    onShown: EventEmitter<any> = new EventEmitter();\r\n    onBeforeHide: EventEmitter<any> = new EventEmitter();\r\n    onHidden: EventEmitter<any> = new EventEmitter();\r\n\r\n    instance: T;\r\n    _componentRef: ComponentRef<T>;\r\n    _inlineViewRef: EmbeddedViewRef<T>;\r\n\r\n    private _providers: Provider[] = [];\r\n    private _componentFactory: ComponentFactory<T>;\r\n    private _zoneSubscription: any;\r\n    private _contentRef: ContentRef;\r\n    private _innerComponent: ComponentRef<T>;\r\n\r\n    private _unregisterListenersFn: Function;\r\n\r\n    get isShown(): boolean {\r\n        if (this._isHiding) {\r\n            return false;\r\n        }\r\n\r\n        return !!this._componentRef;\r\n    }\r\n\r\n    private _isHiding = false;\r\n\r\n    /**\r\n     * Placement of a component. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n     */\r\n    private attachment: string;\r\n\r\n    /**\r\n     * A selector specifying the element the popover should be appended to.\r\n     * Currently only supports \"body\".\r\n     */\r\n    private container: string | ElementRef | any;\r\n\r\n    /**\r\n     * Specifies events that should trigger. Supports a space separated list of\r\n     * event names.\r\n     */\r\n    private triggers: string;\r\n\r\n    private _listenOpts: ListenOptions = {};\r\n    private _globalListener = Function.prototype;\r\n\r\n    /**\r\n     * Do not use this directly, it should be instanced via\r\n     * `ComponentLoadFactory.attach`\r\n     * @internal\r\n     */\r\n    // tslint:disable-next-line\r\n    public constructor(\r\n        private _viewContainerRef: ViewContainerRef,\r\n        private _renderer: Renderer2,\r\n        private _elementRef: ElementRef,\r\n        private _injector: Injector,\r\n        private _componentFactoryResolver: ComponentFactoryResolver,\r\n        private _ngZone: NgZone,\r\n        private _applicationRef: ApplicationRef,\r\n        private _posService: PositioningService\r\n    ) { }\r\n\r\n    attach(compType: Type<T>): ComponentLoader<T> {\r\n        this._componentFactory = this._componentFactoryResolver\r\n            .resolveComponentFactory<T>(compType);\r\n\r\n        return this;\r\n    }\r\n\r\n    // todo: add behaviour: to target element, `body`, custom element\r\n    to(container?: string): ComponentLoader<T> {\r\n        this.container = container || this.container;\r\n\r\n        return this;\r\n    }\r\n\r\n    position(opts?: PositioningOptions): ComponentLoader<T> {\r\n        this.attachment = opts.attachment || this.attachment;\r\n        this._elementRef = (opts.target as ElementRef) || this._elementRef;\r\n\r\n        return this;\r\n    }\r\n\r\n    provide(provider: Provider): ComponentLoader<T> {\r\n        this._providers.push(provider);\r\n\r\n        return this;\r\n    }\r\n\r\n    // todo: appendChild to element or document.querySelector(this.container)\r\n\r\n    show(opts: {\r\n        content?: string | TemplateRef<any> | ComponentRef<any>;\r\n        context?: any;\r\n        initialState?: any;\r\n        [key: string]: any;\r\n    } = {}\r\n    ): ComponentRef<T> {\r\n\r\n        this._subscribePositioning();\r\n        this._innerComponent = null;\r\n\r\n        if (!this._componentRef) {\r\n            this.onBeforeShow.emit();\r\n            this._contentRef = this._getContentRef(opts.content, opts.context, opts.initialState);\r\n            const injector = ReflectiveInjector.resolveAndCreate(this._providers, this._injector);\r\n\r\n            this._componentRef = this._componentFactory.create(injector, this._contentRef.nodes);\r\n            this._applicationRef.attachView(this._componentRef.hostView);\r\n            // this._componentRef = this._viewContainerRef\r\n            //   .createComponent(this._componentFactory, 0, injector, this._contentRef.nodes);\r\n            this.instance = this._componentRef.instance;\r\n\r\n            Object.assign(this._componentRef.instance, opts);\r\n\r\n            if (this.container instanceof ElementRef) {\r\n                this.container.nativeElement.appendChild(\r\n                    this._componentRef.location.nativeElement\r\n                );\r\n            }\r\n\r\n            if (this.container === 'body' && typeof document !== 'undefined') {\r\n                document\r\n                    .querySelector(this.container as string)\r\n                    .appendChild(this._componentRef.location.nativeElement);\r\n            }\r\n\r\n            if (\r\n                !this.container &&\r\n                this._elementRef &&\r\n                this._elementRef.nativeElement.parentElement\r\n            ) {\r\n                this._elementRef.nativeElement.parentElement.appendChild(\r\n                    this._componentRef.location.nativeElement\r\n                );\r\n            }\r\n\r\n            // we need to manually invoke change detection since events registered\r\n            // via\r\n            // Renderer::listen() are not picked up by change detection with the\r\n            // OnPush strategy\r\n            if (this._contentRef.componentRef) {\r\n                this._innerComponent = this._contentRef.componentRef.instance;\r\n                this._contentRef.componentRef.changeDetectorRef.markForCheck();\r\n                this._contentRef.componentRef.changeDetectorRef.detectChanges();\r\n            }\r\n            this._componentRef.changeDetectorRef.markForCheck();\r\n            this._componentRef.changeDetectorRef.detectChanges();\r\n            this.onShown.emit(this._componentRef.instance);\r\n            if(opts.hasOwnProperty('showType')&&opts['showType']=='popover'){\r\n                this._posService.position({\r\n                    element: this._componentRef.location,\r\n                    target: this._elementRef,\r\n                    attachment: this.attachment,\r\n                    appendToBody: this.container === 'body'\r\n                });\r\n            }\r\n        }\r\n\r\n        this._registerOutsideClick();\r\n\r\n        return this._componentRef;\r\n    }\r\n\r\n    hide(): ComponentLoader<T> {\r\n        if (!this._componentRef) {\r\n            return this;\r\n        }\r\n\r\n        this.onBeforeHide.emit(this._componentRef.instance);\r\n\r\n        const componentEl = this._componentRef.location.nativeElement;\r\n        if (componentEl && componentEl.parentNode) {\r\n            componentEl.parentNode.removeChild(componentEl);\r\n        }\r\n        if (this._contentRef.componentRef) {\r\n            this._contentRef.componentRef.destroy();\r\n        }\r\n        this._componentRef.destroy();\r\n        if (this._viewContainerRef && this._contentRef.viewRef) {\r\n            this._viewContainerRef.remove(\r\n                this._viewContainerRef.indexOf(this._contentRef.viewRef)\r\n            );\r\n        }\r\n        if (this._contentRef.viewRef) {\r\n            this._contentRef.viewRef.destroy();\r\n        }\r\n        // this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._componentRef.hostView));\r\n        //\r\n        // if (this._contentRef.viewRef && this._viewContainerRef.indexOf(this._contentRef.viewRef) !== -1) {\r\n        //   this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef));\r\n        // }\r\n\r\n        this._contentRef = null;\r\n        this._componentRef = null;\r\n        this._removeGlobalListener();\r\n\r\n        this.onHidden.emit();\r\n\r\n        return this;\r\n    }\r\n\r\n    toggle(): void {\r\n        if (this.isShown) {\r\n            this.hide();\r\n\r\n            return;\r\n        }\r\n\r\n        this.show();\r\n    }\r\n\r\n    dispose(): void {\r\n        if (this.isShown) {\r\n            this.hide();\r\n        }\r\n\r\n        this._unsubscribePositioning();\r\n\r\n        if (this._unregisterListenersFn) {\r\n            this._unregisterListenersFn();\r\n        }\r\n    }\r\n\r\n    listen(listenOpts: ListenOptions): ComponentLoader<T> {\r\n        this.triggers = listenOpts.triggers || this.triggers;\r\n        this._listenOpts.outsideClick = listenOpts.outsideClick;\r\n        listenOpts.target = listenOpts.target || this._elementRef.nativeElement;\r\n\r\n        const hide = (this._listenOpts.hide = () =>\r\n            listenOpts.hide ? listenOpts.hide() : void this.hide());\r\n        const show = (this._listenOpts.show = (registerHide: Function) => {\r\n            listenOpts.show ? listenOpts.show(registerHide) : this.show(registerHide);\r\n            registerHide();\r\n        });\r\n\r\n        const toggle = (registerHide: Function) => {\r\n            this.isShown ? hide() : show(registerHide);\r\n        };\r\n\r\n        this._unregisterListenersFn = listenToTriggersV2(this._renderer, {\r\n            target: listenOpts.target,\r\n            triggers: listenOpts.triggers,\r\n            show,\r\n            hide,\r\n            toggle\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    _removeGlobalListener() {\r\n        if (this._globalListener) {\r\n            this._globalListener();\r\n            this._globalListener = null;\r\n        }\r\n    }\r\n\r\n    attachInline(\r\n        vRef: ViewContainerRef,\r\n        template: TemplateRef<any>\r\n    ): ComponentLoader<T> {\r\n        this._inlineViewRef = vRef.createEmbeddedView(template);\r\n\r\n        return this;\r\n    }\r\n\r\n    _registerOutsideClick(): void {\r\n        if (!this._componentRef || !this._componentRef.location) {\r\n            return;\r\n        }\r\n        // why: should run after first event bubble\r\n        if (this._listenOpts.outsideClick) {\r\n            const target = this._componentRef.location.nativeElement;\r\n            this._ngZone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this._globalListener = registerOutsideClick(this._renderer, {\r\n                        targets: [target, this._elementRef.nativeElement],\r\n                        outsideClick: this._listenOpts.outsideClick,\r\n                        hide: () => this._listenOpts.hide()\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    getInnerComponent(): ComponentRef<T> {\r\n        return this._innerComponent;\r\n    }\r\n\r\n    private _subscribePositioning(): void {\r\n        if (this._zoneSubscription || !this.attachment) {\r\n            return;\r\n        }\r\n        let self=this;\r\n        this._zoneSubscription = this._ngZone.onStable.subscribe(() => {\r\n            if (!self._componentRef) {\r\n                return;\r\n            }\r\n            self._posService.position({\r\n                element: self._componentRef.location,\r\n                target: self._elementRef,\r\n                attachment: self.attachment,\r\n                appendToBody: self.container === 'body'\r\n            });\r\n        });\r\n    }\r\n\r\n    private _unsubscribePositioning(): void {\r\n        if (!this._zoneSubscription) {\r\n            return;\r\n        }\r\n        this._zoneSubscription.unsubscribe();\r\n        this._zoneSubscription = null;\r\n    }\r\n\r\n    private _getContentRef(\r\n        content: string | TemplateRef<any> | any,\r\n        context?: any,\r\n        initialState?: any\r\n    ): ContentRef {\r\n        if (!content) {\r\n            return new ContentRef([]);\r\n        }\r\n\r\n        if (content instanceof TemplateRef) {\r\n            if (this._viewContainerRef) {\r\n                const _viewRef = this._viewContainerRef\r\n                    .createEmbeddedView<TemplateRef<T>>(content, context);\r\n                _viewRef.markForCheck();\r\n\r\n                return new ContentRef([_viewRef.rootNodes], _viewRef);\r\n            }\r\n            const viewRef = content.createEmbeddedView({});\r\n            this._applicationRef.attachView(viewRef);\r\n\r\n            return new ContentRef([viewRef.rootNodes], viewRef);\r\n        }\r\n\r\n        if (content instanceof ComponentRef) {\r\n            Object.assign(content.instance, initialState);\r\n            this._applicationRef.attachView(content.hostView);\r\n\r\n            return new ContentRef(\r\n                [[content.location.nativeElement]],\r\n                content.hostView,\r\n                content\r\n            );\r\n        }\r\n\r\n        if (typeof content === 'function') {\r\n            const contentCmptFactory = this._componentFactoryResolver.resolveComponentFactory(\r\n                content\r\n            );\r\n            const modalContentInjector = ReflectiveInjector.resolveAndCreate(\r\n                [...this._providers],\r\n                this._injector\r\n            );\r\n            const componentRef = contentCmptFactory.create(modalContentInjector);\r\n            Object.assign(componentRef.instance, initialState);\r\n            this._applicationRef.attachView(componentRef.hostView);\r\n\r\n            return new ContentRef(\r\n                [[componentRef.location.nativeElement]],\r\n                componentRef.hostView,\r\n                componentRef\r\n            );\r\n        }\r\n\r\n        return new ContentRef([[this._renderer.createText(`${content}`)]]);\r\n    }\r\n}\r\n","import {\r\n  ApplicationRef, ComponentFactoryResolver, ElementRef, Injectable, Injector,\r\n  NgZone, Renderer2, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader } from './component-loader.class';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\n\r\n@Injectable()\r\nexport class ComponentLoaderFactory {\r\n  constructor(private _componentFactoryResolver: ComponentFactoryResolver,\r\n              private _ngZone: NgZone,\r\n              private _injector: Injector,\r\n              private _posService: PositioningService,\r\n              private _applicationRef: ApplicationRef) {}\r\n\r\n  /**\r\n   *\r\n   * @param _elementRef\r\n   * @param _viewContainerRef\r\n   * @param _renderer\r\n   */\r\n  createLoader<T>(_elementRef: ElementRef,\r\n                  _viewContainerRef: ViewContainerRef,\r\n                  _renderer: Renderer2): ComponentLoader<T> {\r\n    return new ComponentLoader<T>(\r\n      _viewContainerRef,\r\n      _renderer,\r\n      _elementRef,\r\n      this._injector,\r\n      this._componentFactoryResolver,\r\n      this._ngZone,\r\n      this._applicationRef,\r\n      this._posService\r\n    );\r\n  }\r\n}\r\n"]}