{"version":3,"file":"farris-ui-modal-component-loader.umd.js.map","sources":["ng://@farris/ui-modal/component-loader/bs-component-ref.class.ts","node_modules/tslib/tslib.es6.js","ng://@farris/ui-modal/component-loader/content-ref.class.ts","ng://@farris/ui-modal/component-loader/component-loader.class.ts","ng://@farris/ui-modal/component-loader/component-loader.factory.ts"],"sourcesContent":["import { TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\nexport class BsComponentRef<T> {\r\n  templateRef: TemplateRef<T>;\r\n  viewContainer: ViewContainerRef;\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\r\n * @copyright Valor Software\r\n * @copyright Angular ng-bootstrap team\r\n */\r\n\r\nimport { ComponentRef, ViewRef } from '@angular/core';\r\n\r\nexport class ContentRef {\r\n  nodes: any[];\r\n  viewRef?: ViewRef;\r\n  componentRef?: ComponentRef<any>;\r\n\r\n  constructor(\r\n    nodes: any[],\r\n    viewRef?: ViewRef,\r\n    componentRef?: ComponentRef<any>\r\n  ) {\r\n    this.nodes = nodes;\r\n    this.viewRef = viewRef;\r\n    this.componentRef = componentRef;\r\n  }\r\n}\r\n","// tslint:disable:max-file-line-count\r\n// todo: add delay support\r\n// todo: merge events onShow, onShown, etc...\r\n// todo: add global positioning configuration?\r\nimport {\r\n    ApplicationRef,\r\n    ComponentFactory,\r\n    ComponentFactoryResolver,\r\n    ComponentRef,\r\n    ElementRef,\r\n    EmbeddedViewRef,\r\n    EventEmitter,\r\n    Injector,\r\n    NgZone,\r\n    Provider,\r\n    ReflectiveInjector,\r\n    Renderer2,\r\n    TemplateRef,\r\n    Type,\r\n    ViewContainerRef\r\n} from '@angular/core';\r\nimport { PositioningOptions, PositioningService } from '@farris/ui-modal/positioning';\r\nimport { listenToTriggersV2, registerOutsideClick } from '@farris/ui-modal/utils';\r\nimport { ContentRef } from './content-ref.class';\r\nimport { ListenOptions } from './listen-options.model';\r\n\r\nexport class ComponentLoader<T> {\r\n    onBeforeShow: EventEmitter<any> = new EventEmitter();\r\n    onShown: EventEmitter<any> = new EventEmitter();\r\n    onBeforeHide: EventEmitter<any> = new EventEmitter();\r\n    onHidden: EventEmitter<any> = new EventEmitter();\r\n\r\n    instance: T;\r\n    _componentRef: ComponentRef<T>;\r\n    _inlineViewRef: EmbeddedViewRef<T>;\r\n\r\n    private _providers: Provider[] = [];\r\n    private _componentFactory: ComponentFactory<T>;\r\n    private _zoneSubscription: any;\r\n    private _contentRef: ContentRef;\r\n    private _innerComponent: ComponentRef<T>;\r\n\r\n    private _unregisterListenersFn: Function;\r\n\r\n    get isShown(): boolean {\r\n        if (this._isHiding) {\r\n            return false;\r\n        }\r\n\r\n        return !!this._componentRef;\r\n    }\r\n\r\n    private _isHiding = false;\r\n\r\n    /**\r\n     * Placement of a component. Accepts: \"top\", \"bottom\", \"left\", \"right\"\r\n     */\r\n    private attachment: string;\r\n\r\n    /**\r\n     * A selector specifying the element the popover should be appended to.\r\n     * Currently only supports \"body\".\r\n     */\r\n    private container: string | ElementRef | any;\r\n\r\n    /**\r\n     * Specifies events that should trigger. Supports a space separated list of\r\n     * event names.\r\n     */\r\n    private triggers: string;\r\n\r\n    private _listenOpts: ListenOptions = {};\r\n    private _globalListener = Function.prototype;\r\n\r\n    /**\r\n     * Do not use this directly, it should be instanced via\r\n     * `ComponentLoadFactory.attach`\r\n     * @internal\r\n     */\r\n    // tslint:disable-next-line\r\n    public constructor(\r\n        private _viewContainerRef: ViewContainerRef,\r\n        private _renderer: Renderer2,\r\n        private _elementRef: ElementRef,\r\n        private _injector: Injector,\r\n        private _componentFactoryResolver: ComponentFactoryResolver,\r\n        private _ngZone: NgZone,\r\n        private _applicationRef: ApplicationRef,\r\n        private _posService: PositioningService\r\n    ) { }\r\n\r\n    attach(compType: Type<T>): ComponentLoader<T> {\r\n        this._componentFactory = this._componentFactoryResolver\r\n            .resolveComponentFactory<T>(compType);\r\n\r\n        return this;\r\n    }\r\n\r\n    // todo: add behaviour: to target element, `body`, custom element\r\n    to(container?: string): ComponentLoader<T> {\r\n        this.container = container || this.container;\r\n\r\n        return this;\r\n    }\r\n\r\n    position(opts?: PositioningOptions): ComponentLoader<T> {\r\n        this.attachment = opts.attachment || this.attachment;\r\n        this._elementRef = (opts.target as ElementRef) || this._elementRef;\r\n\r\n        return this;\r\n    }\r\n\r\n    provide(provider: Provider): ComponentLoader<T> {\r\n        this._providers.push(provider);\r\n\r\n        return this;\r\n    }\r\n\r\n    // todo: appendChild to element or document.querySelector(this.container)\r\n\r\n    show(opts: {\r\n        content?: string | TemplateRef<any> | ComponentRef<any>;\r\n        context?: any;\r\n        initialState?: any;\r\n        [key: string]: any;\r\n    } = {}\r\n    ): ComponentRef<T> {\r\n\r\n        this._subscribePositioning();\r\n        this._innerComponent = null;\r\n\r\n        if (!this._componentRef) {\r\n            this.onBeforeShow.emit();\r\n            this._contentRef = this._getContentRef(opts.content, opts.context, opts.initialState);\r\n            const injector = ReflectiveInjector.resolveAndCreate(this._providers, this._injector);\r\n\r\n            this._componentRef = this._componentFactory.create(injector, this._contentRef.nodes);\r\n            this._applicationRef.attachView(this._componentRef.hostView);\r\n            // this._componentRef = this._viewContainerRef\r\n            //   .createComponent(this._componentFactory, 0, injector, this._contentRef.nodes);\r\n            this.instance = this._componentRef.instance;\r\n\r\n            Object.assign(this._componentRef.instance, opts);\r\n\r\n            if (this.container instanceof ElementRef) {\r\n                this.container.nativeElement.appendChild(\r\n                    this._componentRef.location.nativeElement\r\n                );\r\n            }\r\n\r\n            if (this.container === 'body' && typeof document !== 'undefined') {\r\n                document\r\n                    .querySelector(this.container as string)\r\n                    .appendChild(this._componentRef.location.nativeElement);\r\n            }\r\n\r\n            if (\r\n                !this.container &&\r\n                this._elementRef &&\r\n                this._elementRef.nativeElement.parentElement\r\n            ) {\r\n                this._elementRef.nativeElement.parentElement.appendChild(\r\n                    this._componentRef.location.nativeElement\r\n                );\r\n            }\r\n\r\n            // we need to manually invoke change detection since events registered\r\n            // via\r\n            // Renderer::listen() are not picked up by change detection with the\r\n            // OnPush strategy\r\n            if (this._contentRef.componentRef) {\r\n                this._innerComponent = this._contentRef.componentRef.instance;\r\n                this._contentRef.componentRef.changeDetectorRef.markForCheck();\r\n                this._contentRef.componentRef.changeDetectorRef.detectChanges();\r\n            }\r\n            this._componentRef.changeDetectorRef.markForCheck();\r\n            this._componentRef.changeDetectorRef.detectChanges();\r\n            this.onShown.emit(this._componentRef.instance);\r\n            if(opts.hasOwnProperty('showType')&&opts['showType']=='popover'){\r\n                this._posService.position({\r\n                    element: this._componentRef.location,\r\n                    target: this._elementRef,\r\n                    attachment: this.attachment,\r\n                    appendToBody: this.container === 'body'\r\n                });\r\n            }\r\n        }\r\n\r\n        this._registerOutsideClick();\r\n\r\n        return this._componentRef;\r\n    }\r\n\r\n    hide(): ComponentLoader<T> {\r\n        if (!this._componentRef) {\r\n            return this;\r\n        }\r\n\r\n        this.onBeforeHide.emit(this._componentRef.instance);\r\n\r\n        const componentEl = this._componentRef.location.nativeElement;\r\n        if (componentEl && componentEl.parentNode) {\r\n            componentEl.parentNode.removeChild(componentEl);\r\n        }\r\n        if (this._contentRef.componentRef) {\r\n            this._contentRef.componentRef.destroy();\r\n        }\r\n        this._componentRef.destroy();\r\n        if (this._viewContainerRef && this._contentRef.viewRef) {\r\n            this._viewContainerRef.remove(\r\n                this._viewContainerRef.indexOf(this._contentRef.viewRef)\r\n            );\r\n        }\r\n        if (this._contentRef.viewRef) {\r\n            this._contentRef.viewRef.destroy();\r\n        }\r\n        // this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._componentRef.hostView));\r\n        //\r\n        // if (this._contentRef.viewRef && this._viewContainerRef.indexOf(this._contentRef.viewRef) !== -1) {\r\n        //   this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef));\r\n        // }\r\n\r\n        this._contentRef = null;\r\n        this._componentRef = null;\r\n        this._removeGlobalListener();\r\n\r\n        this.onHidden.emit();\r\n\r\n        return this;\r\n    }\r\n\r\n    toggle(): void {\r\n        if (this.isShown) {\r\n            this.hide();\r\n\r\n            return;\r\n        }\r\n\r\n        this.show();\r\n    }\r\n\r\n    dispose(): void {\r\n        if (this.isShown) {\r\n            this.hide();\r\n        }\r\n\r\n        this._unsubscribePositioning();\r\n\r\n        if (this._unregisterListenersFn) {\r\n            this._unregisterListenersFn();\r\n        }\r\n    }\r\n\r\n    listen(listenOpts: ListenOptions): ComponentLoader<T> {\r\n        this.triggers = listenOpts.triggers || this.triggers;\r\n        this._listenOpts.outsideClick = listenOpts.outsideClick;\r\n        listenOpts.target = listenOpts.target || this._elementRef.nativeElement;\r\n\r\n        const hide = (this._listenOpts.hide = () =>\r\n            listenOpts.hide ? listenOpts.hide() : void this.hide());\r\n        const show = (this._listenOpts.show = (registerHide: Function) => {\r\n            listenOpts.show ? listenOpts.show(registerHide) : this.show(registerHide);\r\n            registerHide();\r\n        });\r\n\r\n        const toggle = (registerHide: Function) => {\r\n            this.isShown ? hide() : show(registerHide);\r\n        };\r\n\r\n        this._unregisterListenersFn = listenToTriggersV2(this._renderer, {\r\n            target: listenOpts.target,\r\n            triggers: listenOpts.triggers,\r\n            show,\r\n            hide,\r\n            toggle\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    _removeGlobalListener() {\r\n        if (this._globalListener) {\r\n            this._globalListener();\r\n            this._globalListener = null;\r\n        }\r\n    }\r\n\r\n    attachInline(\r\n        vRef: ViewContainerRef,\r\n        template: TemplateRef<any>\r\n    ): ComponentLoader<T> {\r\n        this._inlineViewRef = vRef.createEmbeddedView(template);\r\n\r\n        return this;\r\n    }\r\n\r\n    _registerOutsideClick(): void {\r\n        if (!this._componentRef || !this._componentRef.location) {\r\n            return;\r\n        }\r\n        // why: should run after first event bubble\r\n        if (this._listenOpts.outsideClick) {\r\n            const target = this._componentRef.location.nativeElement;\r\n            this._ngZone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this._globalListener = registerOutsideClick(this._renderer, {\r\n                        targets: [target, this._elementRef.nativeElement],\r\n                        outsideClick: this._listenOpts.outsideClick,\r\n                        hide: () => this._listenOpts.hide()\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    getInnerComponent(): ComponentRef<T> {\r\n        return this._innerComponent;\r\n    }\r\n\r\n    private _subscribePositioning(): void {\r\n        if (this._zoneSubscription || !this.attachment) {\r\n            return;\r\n        }\r\n        let self=this;\r\n        this._zoneSubscription = this._ngZone.onStable.subscribe(() => {\r\n            if (!self._componentRef) {\r\n                return;\r\n            }\r\n            self._posService.position({\r\n                element: self._componentRef.location,\r\n                target: self._elementRef,\r\n                attachment: self.attachment,\r\n                appendToBody: self.container === 'body'\r\n            });\r\n        });\r\n    }\r\n\r\n    private _unsubscribePositioning(): void {\r\n        if (!this._zoneSubscription) {\r\n            return;\r\n        }\r\n        this._zoneSubscription.unsubscribe();\r\n        this._zoneSubscription = null;\r\n    }\r\n\r\n    private _getContentRef(\r\n        content: string | TemplateRef<any> | any,\r\n        context?: any,\r\n        initialState?: any\r\n    ): ContentRef {\r\n        if (!content) {\r\n            return new ContentRef([]);\r\n        }\r\n\r\n        if (content instanceof TemplateRef) {\r\n            if (this._viewContainerRef) {\r\n                const _viewRef = this._viewContainerRef\r\n                    .createEmbeddedView<TemplateRef<T>>(content, context);\r\n                _viewRef.markForCheck();\r\n\r\n                return new ContentRef([_viewRef.rootNodes], _viewRef);\r\n            }\r\n            const viewRef = content.createEmbeddedView({});\r\n            this._applicationRef.attachView(viewRef);\r\n\r\n            return new ContentRef([viewRef.rootNodes], viewRef);\r\n        }\r\n\r\n        if (content instanceof ComponentRef) {\r\n            Object.assign(content.instance, initialState);\r\n            this._applicationRef.attachView(content.hostView);\r\n\r\n            return new ContentRef(\r\n                [[content.location.nativeElement]],\r\n                content.hostView,\r\n                content\r\n            );\r\n        }\r\n\r\n        if (typeof content === 'function') {\r\n            const contentCmptFactory = this._componentFactoryResolver.resolveComponentFactory(\r\n                content\r\n            );\r\n            const modalContentInjector = ReflectiveInjector.resolveAndCreate(\r\n                [...this._providers],\r\n                this._injector\r\n            );\r\n            const componentRef = contentCmptFactory.create(modalContentInjector);\r\n            Object.assign(componentRef.instance, initialState);\r\n            this._applicationRef.attachView(componentRef.hostView);\r\n\r\n            return new ContentRef(\r\n                [[componentRef.location.nativeElement]],\r\n                componentRef.hostView,\r\n                componentRef\r\n            );\r\n        }\r\n\r\n        return new ContentRef([[this._renderer.createText(`${content}`)]]);\r\n    }\r\n}\r\n","import {\r\n  ApplicationRef, ComponentFactoryResolver, ElementRef, Injectable, Injector,\r\n  NgZone, Renderer2, ViewContainerRef\r\n} from '@angular/core';\r\nimport { ComponentLoader } from './component-loader.class';\r\nimport { PositioningService } from '@farris/ui-modal/positioning';\r\n\r\n@Injectable()\r\nexport class ComponentLoaderFactory {\r\n  constructor(private _componentFactoryResolver: ComponentFactoryResolver,\r\n              private _ngZone: NgZone,\r\n              private _injector: Injector,\r\n              private _posService: PositioningService,\r\n              private _applicationRef: ApplicationRef) {}\r\n\r\n  /**\r\n   *\r\n   * @param _elementRef\r\n   * @param _viewContainerRef\r\n   * @param _renderer\r\n   */\r\n  createLoader<T>(_elementRef: ElementRef,\r\n                  _viewContainerRef: ViewContainerRef,\r\n                  _renderer: Renderer2): ComponentLoader<T> {\r\n    return new ComponentLoader<T>(\r\n      _viewContainerRef,\r\n      _renderer,\r\n      _elementRef,\r\n      this._injector,\r\n      this._componentFactoryResolver,\r\n      this._ngZone,\r\n      this._applicationRef,\r\n      this._posService\r\n    );\r\n  }\r\n}\r\n"],"names":["EventEmitter","ReflectiveInjector","ElementRef","listenToTriggersV2","registerOutsideClick","TemplateRef","ComponentRef","Injectable","ComponentFactoryResolver","NgZone","Injector","PositioningService","ApplicationRef"],"mappings":"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"}
