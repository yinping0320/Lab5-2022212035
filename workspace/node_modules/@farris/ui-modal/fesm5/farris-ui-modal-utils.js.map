{"version":3,"file":"farris-ui-modal-utils.js.map","sources":["ng://@farris/ui-modal/utils/facade/browser.ts","ng://@farris/ui-modal/utils/theme-provider.ts","ng://@farris/ui-modal/utils/trigger.class.ts","ng://@farris/ui-modal/utils/utils.class.ts","ng://@farris/ui-modal/utils/triggers.ts"],"sourcesContent":["/*tslint:disable */\r\n/**\r\n * @license\r\n * Copyright Google Inc. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n/**\r\n * JS version of browser APIs. This library can only run in the browser.\r\n */\r\nvar win = (typeof window !== 'undefined' && window) || <any>{};\r\n\r\nexport { win as window };\r\nexport var document = win.document;\r\nexport var location = win.location;\r\nexport var gc = win['gc'] ? () => win['gc']() : (): any => null;\r\nexport var performance = win['performance'] ? win['performance'] : null;\r\nexport const Event = win['Event'];\r\nexport const MouseEvent = win['MouseEvent'];\r\nexport const KeyboardEvent = win['KeyboardEvent'];\r\nexport const EventTarget = win['EventTarget'];\r\nexport const History = win['History'];\r\nexport const Location = win['Location'];\r\nexport const EventListener = win['EventListener'];\r\n","import { window } from './facade/browser';\r\n\r\nlet guessedVersion: 'bs3' | 'bs4';\r\n\r\nfunction _guessBsVersion(): 'bs3' | 'bs4' {\r\n  if (typeof document === 'undefined') {\r\n    return null;\r\n  }\r\n  const spanEl = document.createElement('span');\r\n  spanEl.innerText = 'test bs version';\r\n  document.body.appendChild(spanEl);\r\n  spanEl.classList.add('d-none');\r\n  const rect = spanEl.getBoundingClientRect();\r\n  document.body.removeChild(spanEl);\r\n  if (!rect) {\r\n    return 'bs3';\r\n  }\r\n\r\n  return rect.top === 0 ? 'bs4' : 'bs3';\r\n}\r\n\r\nexport function setTheme(theme: 'bs3' | 'bs4'): void {\r\n  guessedVersion = theme;\r\n}\r\n\r\n// todo: in ngx-bootstrap, bs4 will became a default one\r\nexport function isBs3(): boolean {\r\n  if (typeof window === 'undefined') {\r\n    return true;\r\n  }\r\n\r\n  if (typeof window.__theme === 'undefined') {\r\n    if (guessedVersion) {\r\n      return guessedVersion === 'bs3';\r\n    }\r\n    guessedVersion = _guessBsVersion();\r\n\r\n    return guessedVersion === 'bs3';\r\n  }\r\n\r\n  return window.__theme !== 'bs4';\r\n}\r\n","/**\r\n * @copyright Valor Software\r\n * @copyright Angular ng-bootstrap team\r\n */\r\n\r\nexport class Trigger {\r\n  open: string;\r\n  close?: string;\r\n\r\n  constructor(open: string, close?: string) {\r\n    this.open = open;\r\n    this.close = close || open;\r\n  }\r\n\r\n  isManual(): boolean {\r\n    return this.open === 'manual' || this.close === 'manual';\r\n  }\r\n}\r\n","import { window } from './facade/browser';\r\n\r\nexport class Utils {\r\n    static reflow(element: any): void {\r\n        ((bs: any): void => bs)(element.offsetHeight);\r\n    }\r\n\r\n    // source: https://github.com/jquery/jquery/blob/master/src/css/var/getStyles.js\r\n    static getStyles(elem: any): any {\r\n        // Support: IE <=11 only, Firefox <=30 (#15098, #14150)\r\n        // IE throws on elements created in popups\r\n        // FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\r\n        let view = elem.ownerDocument.defaultView;\r\n\r\n        if (!view || !view.opener) {\r\n            view = window;\r\n        }\r\n\r\n        return view.getComputedStyle(elem);\r\n    }\r\n\r\n    static checkDialogSize(width: number, height: number) {\r\n\r\n        // å¯è§åºåå°ºå¯¸\r\n        const winSize = {\r\n            width: document.body.offsetWidth,\r\n            height: window.innerHeight\r\n        };\r\n\r\n        if (winSize.width < width) {\r\n            width = winSize.width;\r\n        }\r\n\r\n        if (winSize.height < height) {\r\n            height = winSize.height;\r\n        }\r\n\r\n        return  {\r\n            width,\r\n            height\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @copyright Valor Software\r\n * @copyright Angular ng-bootstrap team\r\n */\r\nimport { Renderer2 } from \"@angular/core\";\r\nimport { Trigger } from \"./trigger.class\";\r\n\r\nexport type BsEventCallback = (event?: any) => boolean | void;\r\n\r\nexport interface ListenOptions {\r\n    target?: HTMLElement;\r\n    targets?: HTMLElement[];\r\n    triggers?: string;\r\n    outsideClick?: boolean;\r\n    show?: BsEventCallback;\r\n    hide?: BsEventCallback;\r\n    toggle?: BsEventCallback;\r\n}\r\n\r\nconst DEFAULT_ALIASES = {\r\n    hover: [\"mouseenter\", \"mouseleave\"],\r\n    focus: [\"focusin\", \"focusout\"],\r\n};\r\n\r\nexport function parseTriggers(\r\n    triggers: string,\r\n    aliases: any = DEFAULT_ALIASES\r\n): Trigger[] {\r\n    const trimmedTriggers = (triggers || \"\").trim();\r\n\r\n    if (trimmedTriggers.length === 0) {\r\n        return [];\r\n    }\r\n\r\n    const parsedTriggers = trimmedTriggers\r\n        .split(/\\s+/)\r\n        .map((trigger: string) => trigger.split(\":\"))\r\n        .map((triggerPair: string[]) => {\r\n            const alias = aliases[triggerPair[0]] || triggerPair;\r\n\r\n            return new Trigger(alias[0], alias[1]);\r\n        });\r\n\r\n    const manualTriggers = parsedTriggers.filter((triggerPair: Trigger) =>\r\n        triggerPair.isManual()\r\n    );\r\n\r\n    if (manualTriggers.length > 1) {\r\n        throw new Error(\r\n            \"Triggers parse error: only one manual trigger is allowed\"\r\n        );\r\n    }\r\n\r\n    if (manualTriggers.length === 1 && parsedTriggers.length > 1) {\r\n        throw new Error(\r\n            \"Triggers parse error: manual trigger can't be mixed with other triggers\"\r\n        );\r\n    }\r\n\r\n    return parsedTriggers;\r\n}\r\n\r\nexport function listenToTriggers(\r\n    renderer: Renderer2,\r\n    target: any,\r\n    triggers: string,\r\n    showFn: BsEventCallback,\r\n    hideFn: BsEventCallback,\r\n    toggleFn: BsEventCallback\r\n): Function {\r\n    const parsedTriggers = parseTriggers(triggers);\r\n    const listeners: any[] = [];\r\n\r\n    if (parsedTriggers.length === 1 && parsedTriggers[0].isManual()) {\r\n        return Function.prototype;\r\n    }\r\n\r\n    parsedTriggers.forEach((trigger: Trigger) => {\r\n        if (trigger.open === trigger.close) {\r\n            listeners.push(renderer.listen(target, trigger.open, toggleFn));\r\n\r\n            return;\r\n        }\r\n\r\n        listeners.push(\r\n            renderer.listen(target, trigger.open, showFn),\r\n            renderer.listen(target, trigger.close, hideFn)\r\n        );\r\n    });\r\n\r\n    return () => {\r\n        listeners.forEach((unsubscribeFn: Function) => unsubscribeFn());\r\n    };\r\n}\r\n\r\nexport function listenToTriggersV2(\r\n    renderer: Renderer2,\r\n    options: ListenOptions\r\n): Function {\r\n    const parsedTriggers = parseTriggers(options.triggers);\r\n    const target = options.target;\r\n    // do nothing\r\n    if (parsedTriggers.length === 1 && parsedTriggers[0].isManual()) {\r\n        return Function.prototype;\r\n    }\r\n\r\n    // all listeners\r\n    const listeners: any[] = [];\r\n\r\n    // lazy listeners registration\r\n    const _registerHide: Function[] = [];\r\n    const registerHide = () => {\r\n        // add hide listeners to unregister array\r\n        _registerHide.forEach((fn: Function) => listeners.push(fn()));\r\n        // register hide events only once\r\n        _registerHide.length = 0;\r\n    };\r\n\r\n    // register open\\close\\toggle listeners\r\n    parsedTriggers.forEach((trigger: Trigger) => {\r\n        const useToggle = trigger.open === trigger.close;\r\n        const showFn = useToggle ? options.toggle : options.show;\r\n\r\n        if (!useToggle) {\r\n            _registerHide.push(() =>\r\n                renderer.listen(target, trigger.close, options.hide)\r\n            );\r\n        }\r\n\r\n        listeners.push(\r\n            renderer.listen(target, trigger.open, () => showFn(registerHide))\r\n        );\r\n    });\r\n\r\n    return () => {\r\n        listeners.forEach((unsubscribeFn: Function) => unsubscribeFn());\r\n    };\r\n}\r\n\r\nexport function registerOutsideClick(\r\n    renderer: Renderer2,\r\n    options: ListenOptions\r\n) {\r\n    if (!options.outsideClick) {\r\n        return Function.prototype;\r\n    }\r\n\r\n    return renderer.listen(\"document\", \"click\", (event: any) => {\r\n        if (options.target && options.target.contains(event.target)) {\r\n            return;\r\n        }\r\n        if (\r\n            options.targets &&\r\n            options.targets.some((target) => target.contains(event.target))\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        options.hide();\r\n    });\r\n}\r\n"],"names":["document","window"],"mappings":"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"}
