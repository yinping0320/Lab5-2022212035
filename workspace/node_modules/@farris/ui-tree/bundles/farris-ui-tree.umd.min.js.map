{"version":3,"sources":["ng://@farris/ui-tree/lib/tree.component.ts","ng://@farris/ui-tree/lib/show-title.directive.ts","ng://@farris/ui-tree/lib/tree.module.ts"],"names":["TreeComponent","prototype","ngOnInit","onMouseEnter","$event","this","appendText","querySelector","style","display","onMouseLeave","onClickAppendBtn","appendBtnClick","emit","stopPropagation","Component","args","selector","template","CommonUtils","ViewChild","TreeTableComponent","Input","Output","utils","showTips","width","height","showFilterBar","singleSelect","showCheckbox","showIcon","showBorder","disabled","loadDataType","checkOnSelect","selectOnCheck","onlySelectSelf","fit","cascadeCheck","cascadeDown","cascadeUp","emptyMessage","keepSelect","virtualized","onlySelectLeaf","leafIcon","expandIcon","collapseIcon","remoteSort","data","EventEmitter","nodeSelected","nodeUnSelect","nodeChecked","nodeUnChecked","search","dblClick","loadedData","ShowTitleDirective","ngAfterViewInit","enableTips","el","nativeElement","title","innerText","Directive","ElementRef","Injector","injector","TreeModule","NgModule","declarations","imports","FarrisCommonModule","forRoot","TreeTableModule","exports"],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, ViewChild, Directive, ElementRef, Injector } from '@angular/core';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { FarrisTemplateDirective, CommonUtils, } from '@farris/ui-common';\r\n@Component({\r\n    selector: 'farris-tree',\r\n    template: `\r\n        <farris-treetable #t2\r\n            [width]=\"width\"\r\n            [height]=\"height\"\r\n            [data]=\"data\"\r\n            [idField]=\"idField\"\r\n            [singleSelect]=\"singleSelect\"\r\n            [showCheckbox]=\"showCheckbox\"\r\n            [showIcon]=\"showIcon\"\r\n            [showFilterBar]=\"false\"\r\n            [showBorder]=\"showBorder\"\r\n            [disabled]=\"disabled\"\r\n            [loadDataType]=\"loadDataType\"\r\n            [checkOnSelect]=\"checkOnSelect\"\r\n            [selectOnCheck]=\"selectOnCheck\"\r\n            [onlySelectSelf]=\"onlySelectSelf\"\r\n            [fit]=\"fit\"\r\n            [cascadeCheck]=\"cascadeCheck\"\r\n            [cascadeDown]=\"cascadeDown\"\r\n            [cascadeUp]=\"cascadeUp\"\r\n            [emptyMessage]=\"emptyMessage\"\r\n            [keepSelect]=\"keepSelect\"\r\n            [virtualized]=\"virtualized\"\r\n            [onlySelectLeaf]=\"onlySelectLeaf\"\r\n            [leafIcon]=\"leafIcon\"\r\n            [expandIcon]=\"expandIcon\"\r\n            [collapseIcon]=\"collapseIcon\"\r\n            [remoteSort]=\"remoteSort\"\r\n            [sortName]=\"displayText\"\r\n            [sortOrder]=\"sortOrder\"\r\n            [multiSort]=\"false\"\r\n            (nodeSelected)=\"nodeSelected.emit($event)\"\r\n            (nodeUnSelect)=\"nodeUnSelect.emit($event)\"\r\n            (nodeChecked)=\"nodeChecked.emit($event)\"\r\n            (nodeUnChecked)=\"nodeUnChecked.emit($event)\"\r\n            (search)=\"search.emit($event)\"\r\n            (dblClick)=\"dblClick.emit($event)\"\r\n            (loadedData)=\"loadedData.emit($event)\"\r\n        >\r\n            <ng-template farrisTemplate=\"body\" let-rowNode let-treeNode=\"node\" let-rowData=\"rowData\">\r\n                <tr\r\n                    #row=\"row\"\r\n                    [selectRow]=\"rowNode\"\r\n                    [dblclick]=\"true\"\r\n                    (mouseenter)=\"onMouseEnter($event)\"\r\n                    (mouseleave)=\"onMouseLeave($event)\"\r\n                    class=\"farris-table-selectedrow\"\r\n                >\r\n                    <td style=\"border: 0\" [style.color]=\"row.selectRowDisabled ? '#a6a6a6' : '#333'\">\r\n                        <farris-treeTableToggler [rowNode]=\"rowNode\"></farris-treeTableToggler>\r\n                        <span [show-title]=\"showTips\"\r\n                            [innerHTML]=\"(utils || t2.utils).getValue(displayText, rowData, true) | safe: 'html'\"></span>\r\n\r\n                        <span\r\n                            class=\"rbtn\"\r\n                            style=\" float: right; width: 40px; display:none; cursor: pointer\"\r\n                            (click)=\"onClickAppendBtn($event)\"\r\n                            >{{ appendText }}</span\r\n                        >\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n        </farris-treetable>\r\n    `\r\n})\r\nexport class TreeComponent implements OnInit {\r\n\r\n    @ViewChild(TreeTableComponent) treeTable: TreeTableComponent;\r\n\r\n    @Input() showTips = true;\r\n\r\n    /** å®½åº¦ */\r\n    @Input() width = 500;\r\n    /** é«åº¦ */\r\n    @Input() height = 400;\r\n\r\n    @Input() showFilterBar = false;\r\n    /** æ¯å¦å¯ç¨å¤é */\r\n    @Input() singleSelect = true;\r\n    /** å¯ç¨å¤éåï¼æ¯å¦æ¾ç¤ºcheckbox */\r\n    @Input() showCheckbox = true;\r\n    /** ä¸»é®å­æ®µ */\r\n    @Input() idField: string;\r\n    /** ææ¬å­æ®µ */\r\n    @Input() displayText: string;\r\n    /** æ¾ç¤ºå¾æ  */\r\n    @Input() showIcon = false;\r\n    /** æ¾ç¤ºè¾¹æ¡çº¿ */\r\n    @Input() showBorder = false;\r\n    /** ç¦ç¨ã ç¦ç¨æ¶ä¸åè®¸éä¸­è¡ */\r\n    @Input() disabled = false;\r\n    /** æ°æ®å è½½æ¹å¼\r\n     * - all: å¨é¨å è½½\r\n     * - async: åå±å è½½\r\n     */\r\n    @Input() loadDataType: 'all' | 'async' = 'all';\r\n\r\n    /** å½å¤éæ¶ï¼éä¸­å½åè¡å¹¶é©é */\r\n    @Input() checkOnSelect = false;\r\n    /** å½å¤éæ¶ï¼é©éå¹¶éä¸­å½åè¡ */\r\n    @Input() selectOnCheck = false;\r\n    /**\r\n     * å¯ç¨å¤éæ¶ï¼æ­¤å±æ§ä¸ºtrue æ¶ï¼ä»å½åè¡éä¸­\r\n     */\r\n    @Input() onlySelectSelf = false;\r\n\r\n    /** è®¾ç½®ä¸ºtrueæ¶èªéåºç¶å®¹çå°ºå¯¸ */\r\n    @Input() fit = false;\r\n\r\n    /** å¯ç¨çº§èéä¸­åè½ */\r\n    @Input() cascadeCheck = true;\r\n    /** åä¸çº§èéä¸­ */\r\n    @Input() cascadeDown = true;\r\n    /** åä¸çº§èéä¸­ */\r\n    @Input() cascadeUp = true;\r\n    /** ç©ºæ°æ®æ¶ï¼æ¾ç¤ºçæç¤ºææ¬ */\r\n    @Input() emptyMessage = 'ææ æ°æ®';\r\n\r\n    /**\r\n     * åå»è¡éä¸­åï¼å¨æ¬¡ç¹å»ä¸ä¼è¢«åæ¶éä¸­ç¶æ;\r\n     */\r\n    @Input() keepSelect = true;\r\n    /** èæå è½½ */\r\n    @Input() virtualized = false;\r\n    /**\r\n     * ä»åè®¸éæ©å¶å­èç¹\r\n     * - default: åºç¨æå¡å¨ç«¯ä¼ åçè®¾ç½®ï¼å¦ææå¡å¨ç«¯æ²¡æè®¾ç½®ï¼åä¸ no ä¿æä¸è³ï¼\r\n     * - yes: å¦æå®¢æ·ç«¯è®¾ç½®ä¸º `yes`, æå¡å¨ç«¯çè®¾ç½®å¤±æï¼\r\n     * - no: åè®¸éæ©ææèç¹ï¼æå¡å¨ç«¯è®¾ç½®å¤±æ\r\n     */\r\n    @Input() onlySelectLeaf: boolean | 'default' | 'yes' | 'no' = 'default';\r\n\r\n    /** å¶å­èç¹å¾æ  */\r\n    @Input() leafIcon = 'file';\r\n    /** èç¹å±å¼å¾æ  */\r\n    @Input() expandIcon = 'folder-open';\r\n    /** èç¹æå å¾æ  */\r\n    @Input() collapseIcon = 'folder';\r\n\r\n    /** å¯ç¨è¿ç«¯æåº */\r\n    @Input() remoteSort = true;\r\n    /** æåºæ¹å¼ asc | desc */\r\n    @Input() sortOrder: string;\r\n\r\n    @Input() data: TreeNode[] = [];\r\n    /** éå æé®TXT */\r\n    @Input() appendText = '';\r\n\r\n    /** éå æé®ç¹å»äºä»¶ */\r\n    @Output() appendBtnClick: EventEmitter<any> = new EventEmitter();\r\n\r\n    /** éä¸­äºä»¶ */\r\n    @Output() nodeSelected: EventEmitter<any> = new EventEmitter();\r\n    /** åæ¶éä¸­äºä»¶ */\r\n    @Output() nodeUnSelect: EventEmitter<any> = new EventEmitter();\r\n\r\n    /** é©é */\r\n    @Output() nodeChecked: EventEmitter<any> = new EventEmitter();\r\n    /** åæ¶é©é */\r\n    @Output() nodeUnChecked: EventEmitter<any> = new EventEmitter();\r\n    /** æ¥è¯¢ */\r\n    @Output() search: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() dblClick: EventEmitter<any> = new EventEmitter();\r\n    @Output() loadedData: EventEmitter<any> = new EventEmitter();\r\n    constructor( public utils: CommonUtils) {}\r\n\r\n    ngOnInit() {}\r\n\r\n    onMouseEnter($event: MouseEvent) {\r\n        if (this.appendText) {\r\n            ($event.target as any).querySelector('.rbtn').style.display = 'inline-block';\r\n        }\r\n    }\r\n\r\n    onMouseLeave($event: MouseEvent) {\r\n        if (this.appendText) {\r\n            ($event.target as any).querySelector('.rbtn').style.display = 'none';\r\n        }\r\n    }\r\n\r\n    onClickAppendBtn($event: MouseEvent) {\r\n        this.appendBtnClick.emit();\r\n        $event.stopPropagation();\r\n    }\r\n}\r\n\r\n","import { Directive, Input, OnInit, ElementRef, Injector, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[show-title]'\r\n})\r\nexport class ShowTitleDirective implements OnInit, AfterViewInit {\r\n    @Input('show-title') enableTips;\r\n\r\n    constructor(private el: ElementRef, private injector: Injector) {}\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.enableTips) {\r\n            this.el.nativeElement.title = this.el.nativeElement.innerText;\r\n        }\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TreeComponent } from './tree.component';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { ShowTitleDirective } from './show-title.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TreeComponent,\r\n    ShowTitleDirective\r\n  ],\r\n  imports: [\r\n    FarrisCommonModule.forRoot(),\r\n    TreeTableModule\r\n  ],\r\n  exports: [TreeComponent, ShowTitleDirective]\r\n})\r\nexport class TreeModule { }\r\n"]}