!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@farris/ui-draggable")):"function"==typeof define&&define.amd?define("@farris/ui-layout",["exports","@angular/core","@angular/common","@farris/ui-draggable"],t):t((e.farris=e.farris||{},e.farris["ui-layout"]={}),e.ng.core,e.ng.common,e.uiDraggable)}(this,function(e,r,t,n){"use strict";var i=(s.prototype.ngOnInit=function(){this.init()},s.prototype.ngAfterContentInit=function(){var n=this;this.checkPanels(),this.panels.forEach(function(e){if(e.split){var t="";switch(e.region){case"north":t="marginTop";break;case"south":t="marginBottom";break;case"west":t="marginLeft";break;case"east":t="marginRight"}n.render2.setStyle(n.getPanel("center").el.nativeElement,t,"5px")}}),this.ngZone.runOutsideAngular(function(){setTimeout(function(){return n.setPanelMaxSize()})})},s.prototype.init=function(){"h"===this.direction?this.myclass+=" flex-row":this.myclass+=" flex-column",this.fill?this.isInLayoutPanel()?(this.myclass+=" flex-fill",this.render2.addClass(this.el.nativeElement.parentElement,"d-flex")):this.myclass+=" layout-fill":(this.width&&this.render2.setStyle(this.el.nativeElement,"width",this.width+"px"),this.height&&this.render2.setStyle(this.el.nativeElement,"height",this.height+"px"))},s.prototype.getLayoutSize=function(){return{width:this.el.nativeElement.clientWidth,height:this.el.nativeElement.clientHeight}},s.prototype.setPanelMaxSize=function(){var a=this,l=this.getLayoutSize();this.panels.forEach(function(e){if("center"!==e.region){var t=e.minWidth||100,n=e.minHeight||100;if("west"===e.region&&l.width){var i=a.getPanel("east");e.maxWidth=i?l.width-i.width-t:l.width-t}if("east"===e.region&&l.width){var r=a.getPanel("west");e.maxWidth=r?l.width-r.width-t:l.width-t}if("north"===e.region&&l.height){var s=a.getPanel("south");e.maxHeight=s?l.height-s.height-n:l.height-n}if("south"===e.region&&l.height){var o=a.getPanel("north");e.maxHeight=o?l.height-o.height-n:l.height-n}}})},s.prototype.getPanel=function(t){return this.panels.find(function(e){return e.region===t})},s.prototype.checkPanels=function(){if(this.panels&&this.panels.length){var e=this.panels.map(function(e){return e.region});if(this.unique(e).length!==e.length)throw new Error("layout 布局容器中具有重复的panel。");if("h"===this.direction){if(e.find(function(e){return"north"===e||"south"===e}))throw new Error("水平方向排列时，只能包含 east 或者 west")}else if(e.find(function(e){return"west"===e||"east"===e}))throw new Error("水平方向排列时，只能包含 north 或者 south");return!0}return!0},s.prototype.unique=function(e){var t=new Set(e);return Array.from(t)},s.prototype.isInLayoutPanel=function(){return!!this.el.nativeElement.parentElement.attributes["layout-panel"]},s.decorators=[{type:r.Component,args:[{selector:"farrisui-layout,farris-layout,layout",template:"<ng-container *ngIf=\"direction==='v'\">\r\n    <ng-content select=\"[region='north']\"></ng-content>\r\n</ng-container>\r\n<ng-container *ngIf=\"direction==='h'\">\r\n    <ng-content select=\"[region='west']\"></ng-content>\r\n</ng-container>\r\n\r\n\r\n<ng-content></ng-content>\r\n\r\n<ng-container  *ngIf=\"direction==='v'\">\r\n    <ng-content select=\"[region='south']\"></ng-content>\r\n</ng-container>\r\n<ng-container *ngIf=\"direction==='h'\">\r\n    <ng-content select=\"[region='east']\"></ng-content>\r\n</ng-container>",encapsulation:r.ViewEncapsulation.Emulated,styles:["\n        :host.layout-fill {position: absolute; top: 0; right: 0;bottom: 0;left: 0;}\n        "]}]}],s.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:r.Injector}]},s.propDecorators={width:[{type:r.Input}],height:[{type:r.Input}],showBorder:[{type:r.Input}],direction:[{type:r.Input}],fill:[{type:r.Input}],myclass:[{type:r.HostBinding,args:["class"]}]},s);function s(e,t,n){this.el=e,this.render2=t,this.injector=n,this.showBorder=!0,this.direction="h",this.fill=!1,this.myclass="d-flex",this.panels=[],this.ngZone=this.injector.get(r.NgZone)}var o=(Object.defineProperty(a.prototype,"split",{get:function(){return this._resizable},set:function(e){this._resizable=e},enumerable:!0,configurable:!0}),a.prototype.setStyles=function(){var i=this;setTimeout(function(){var e,t,n=i.el.nativeElement.getBoundingClientRect();i.height&&(t=i.height,i.render2.setStyle(i.el.nativeElement,"height",t+"px"),i.render2.setStyle(i.panel.nativeElement,"height",t+"px")),i.width&&(e=i.width,n.width>i.width&&(e=n.width,i.width=e),i.render2.setStyle(i.el.nativeElement,"width",e+"px"),i.render2.setStyle(i.panel.nativeElement,"width",e+"px"),i.resetFlex())})},a.prototype.getrzHandler=function(){if(this.region){var e="";switch(this.region){case"west":e="e";break;case"east":e="w";break;case"north":e="s";break;case"south":e="n"}this.rzHandler=e}else this.rzHandler=""},a.prototype.isCenterPanel=function(){return"center"===this.region},a.prototype.ngOnChanges=function(e){e.width&&!e.width.isFirstChange()&&this.setStyles()},a.prototype.getBsClass=function(){return Array.from(this.el.nativeElement.classList).find(function(e){return-1<e.indexOf("col-")})},a.prototype.hasBsClass=function(){return this.getBsClass()!==undefined},a.prototype.initSize=function(){this.setStyles(),this.region&&("west"!==this.region&&"east"!==this.region||this.render2.setStyle(this.panel.nativeElement,"height","100%"))},a.prototype.initClass=function(){this.isCenterPanel()&&(this.render2.addClass(this.panel.nativeElement,"auto"==this.overflow?"flex-fill":"f-utils-fill"),this.el.nativeElement.parentElement.attributes["layout-panel"]&&this.render2.addClass(this.el.nativeElement.parentElement,"d-flex"),this.render2.addClass(this.el.nativeElement,"d-flex"),this.render2.addClass(this.el.nativeElement,"f-utils-fill")),this.showBorder&&this.render2.addClass(this.panel.nativeElement,"layout-border")},a.prototype.ngOnInit=function(){this.initSize(),this.initClass(),this.getrzHandler(),this.bsColClass=this.getBsClass(),this.layout.panels.push(this)},a.prototype.onResizeStart=function(e){this.resetFlex()},a.prototype.resetFlex=function(){"west"!==this.region&&"east"!==this.region||(this.render2.setStyle(this.el.nativeElement,"flex","none"),this.render2.setStyle(this.el.nativeElement,"max-width","none"))},a.prototype.resize=function(e){this.setStyles(),this.onResized({size:e})},a.prototype.onReizing=function(e){this.updatePanelSize(e),this.resizing.emit({target:this,size:e.size})},a.prototype.updatePanelSize=function(e){"south"===this.region&&this.render2.setStyle(this.panel.nativeElement,"top",0),"east"===this.region&&this.render2.setStyle(this.panel.nativeElement,"left",0),"south"!==this.region&&"north"!==this.region||this.render2.setStyle(this.el.nativeElement,"height",e.size.height+"px"),"west"!==this.region&&"east"!==this.region||this.render2.setStyle(this.el.nativeElement,"width",e.size.width+"px")},a.prototype.onResized=function(e){"south"!==this.region&&"north"!==this.region||(this.height=e.size.height),"west"!==this.region&&"east"!==this.region||(this.width=e.size.width),this.updatePanelSize(e),this.layout.setPanelMaxSize(),this.resized.emit(e.size),this.layout.getPanel("center").resized.emit(e.size)},a.decorators=[{type:r.Component,args:[{selector:"layout-panel",template:'\n        <div #panel #ngResizable class="layout-panel"\n            [ngResizable]="split" [attr.region]="region"\n            [rzHandles]="rzHandler"\n            [rzMinWidth]="minWidth"\n            [rzMaxWidth]="maxWidth"\n            [rzMinHeight]="minHeight"\n            [rzMaxHeight]="maxHeight"\n            (rzResizing)="onReizing($event)"\n            (rzStop) = "onResized($event)"\n            (rzStart) ="onResizeStart($event)" >\n\n            <layout-panel-title *ngIf="title" [title]="title"></layout-panel-title>\n\n            <ng-content></ng-content>\n        <div>\n    ',styles:[".layout-border{border:1px solid #f2f2f2}.layout-panel{background:#fff}.ng-resizeable-bar{position:relative}.ng-resizable-w>.ng-resizeable-bar{right:1px;height:100%;width:5px}.ng-resizable-e>.ng-resizeable-bar{left:3px;height:100%;width:5px}.ng-resizable-s>.ng-resizeable-bar{top:3px;width:100%;height:5px}.ng-resizable-n>.ng-resizeable-bar{bottom:0;width:100%;height:5px}.ng-resizable-handle:hover>.ng-resizeable-bar{background-color:#bababa}.ng-resizable-handle:active>.ng-resizeable-bar{background-color:#5b5b5b}:host{padding:0}"]}]}],a.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:i},{type:r.NgZone}]},a.propDecorators={region:[{type:r.Input}],height:[{type:r.Input}],width:[{type:r.Input}],minHeight:[{type:r.Input}],minWidth:[{type:r.Input}],maxHeight:[{type:r.Input}],maxWidth:[{type:r.Input}],title:[{type:r.Input}],iconCls:[{type:r.Input}],overflow:[{type:r.Input}],split:[{type:r.Input}],showBorder:[{type:r.Input}],resizing:[{type:r.Output}],resized:[{type:r.Output}],panel:[{type:r.ViewChild,args:["panel"]}],ngResizable:[{type:r.ViewChild,args:[n.AngularResizableDirective]}]},a);function a(e,t,n,i){this.el=e,this.render2=t,this.layout=n,this.ngZone=i,this.minHeight=100,this.minWidth=100,this.title="",this.iconCls="",this.overflow="auto",this._resizable=!0,this.bsColClass="",this.showBorder=!0,this.resizing=new r.EventEmitter,this.resized=new r.EventEmitter}var l=(h.decorators=[{type:r.Component,args:[{selector:"layout-panel-title",template:'\n        <div class="d-flex flex-row" style="height: 28px; line-height: 28px">\n            <div class="layout-panel-title">\n                <span *ngIf="iconCls" [class]="iconCls"></span>\n                {{ title }}\n            </div>\n            <div class="layout-panel-title-tools flex-fill">\n\n            </div>\n        </div>\n    '}]}],h.propDecorators={title:[{type:r.Input}],iconCls:[{type:r.Input}]},h);function h(){this.title="",this.iconCls=""}var p=(g.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,n.AngularDraggableModule],declarations:[i,o,l],exports:[i,n.AngularDraggableModule,o],providers:[]}]}],g);function g(){}e.FarrisLayoutModule=p,e.LayoutComponent=i,e.LayoutPanelComponent=o,e.LayoutPanelTitleComponent=l,e.LayoutModule=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-layout.umd.min.js.map