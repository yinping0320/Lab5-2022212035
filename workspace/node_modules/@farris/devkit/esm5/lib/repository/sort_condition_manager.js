/**
 * 排序条件管理
 */
var SortConditionManager = /** @class */ (function () {
    function SortConditionManager() {
        this.sorts = new Map();
    }
    /**
     * 根据bingdingPath获取排序规则
     * @param bindingPath bindingPath
     * @param directionConverter converter
     */
    SortConditionManager.prototype.getConditionsByBindingPath = function (bindingPath, directionConverter) {
        var conditions = this.sorts.get(bindingPath) || [];
        if (conditions.length < 1) {
            return conditions;
        }
        if (typeof directionConverter === 'function') {
            conditions = conditions.map(function (condition) {
                var sortType = directionConverter(condition.SortType);
                return { SortField: condition.SortField, SortType: sortType };
            });
        }
        return conditions;
    };
    /**
     * 增加排序条件
     * @param bindingPath 绑定路径
     * @param field 排序字段
     * @param direction 排序方向 asc|desc
     */
    SortConditionManager.prototype.addCondition = function (bindingPath, field, direction) {
        // 取消排序
        if (!field || !direction) {
            this.sorts.delete(bindingPath);
            return;
        }
        var isBindingPathExist = this.sorts.has(bindingPath);
        var condition = { SortField: field, SortType: direction };
        if (!isBindingPathExist) {
            this.sorts.set(bindingPath, [condition]);
        }
        else {
            var bindingPathSortConditions = this.sorts.get(bindingPath) || [];
            // new condition will override the previous condition
            var conditionIndex = bindingPathSortConditions.findIndex(function (item) { return item.SortField === field; });
            if (conditionIndex !== -1) {
                bindingPathSortConditions[conditionIndex] = condition;
            }
            else {
                bindingPathSortConditions.push(condition);
            }
        }
    };
    SortConditionManager.prototype.removeCondition = function (bindingPath, field) {
        throw new Error('not implement!');
    };
    /**
     * 批量增加排序条件
     * @param bindingPath bindingPath
     * @param fields fields , seprated by comma
     * @param directions directions , seprated by comma
     * @description set conditions and overwrite all conditions which has the same bindingPath
     */
    SortConditionManager.prototype.setConditions = function (bindingPath, fields, directions) {
        // 取消排序
        if (!fields || !directions) {
            this.sorts.delete(bindingPath);
            return;
        }
        var filedsArray = fields.split(',').filter(function (item) { return item; });
        var directionsArray = directions.split(',').filter(function (item) { return item; });
        if (filedsArray.length !== directionsArray.length) {
            throw new Error('arguments error,fields and direction are not match.');
        }
        var conditions = [];
        filedsArray.forEach(function (field, index) {
            var condition = { SortField: field, SortType: directionsArray[index] };
            conditions.push(condition);
        });
        this.sorts.set(bindingPath, conditions);
    };
    /**
     * 清空所有排序条件
     */
    SortConditionManager.prototype.clear = function () {
        this.sorts.clear();
    };
    return SortConditionManager;
}());
export { SortConditionManager };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydF9jb25kaXRpb25fbWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL3JlcG9zaXRvcnkvc29ydF9jb25kaXRpb25fbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUNIO0lBV0U7UUFDRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxFQUFzQixDQUFDO0lBQzdDLENBQUM7SUFDRDs7OztPQUlHO0lBQ0kseURBQTBCLEdBQWpDLFVBQWtDLFdBQW1CLEVBQUUsa0JBQXVEO1FBQzVHLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNuRCxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pCLE9BQU8sVUFBVSxDQUFDO1NBQ25CO1FBQ0QsSUFBSSxPQUFPLGtCQUFrQixLQUFLLFVBQVUsRUFBRTtZQUM1QyxVQUFVLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFBLFNBQVM7Z0JBQ25DLElBQU0sUUFBUSxHQUFHLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDeEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsQ0FBQztZQUNoRSxDQUFDLENBQUMsQ0FBQztTQUNKO1FBQ0QsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztJQUNEOzs7OztPQUtHO0lBQ0ksMkNBQVksR0FBbkIsVUFBb0IsV0FBbUIsRUFBRSxLQUFhLEVBQUUsU0FBaUI7UUFDdkUsT0FBTztRQUNQLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDL0IsT0FBTztTQUNSO1FBQ0QsSUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN2RCxJQUFNLFNBQVMsR0FBRyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxDQUFDO1FBQzVELElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUN2QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFDO2FBQU07WUFDTCxJQUFNLHlCQUF5QixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNwRSxxREFBcUQ7WUFDckQsSUFBTSxjQUFjLEdBQUcseUJBQXlCLENBQUMsU0FBUyxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxDQUFDLFNBQVMsS0FBSyxLQUFLLEVBQXhCLENBQXdCLENBQUMsQ0FBQztZQUM3RixJQUFJLGNBQWMsS0FBSyxDQUFDLENBQUMsRUFBRTtnQkFDekIseUJBQXlCLENBQUMsY0FBYyxDQUFDLEdBQUcsU0FBUyxDQUFDO2FBQ3ZEO2lCQUFNO2dCQUNMLHlCQUF5QixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUMzQztTQUNGO0lBQ0gsQ0FBQztJQUNNLDhDQUFlLEdBQXRCLFVBQXVCLFdBQW1CLEVBQUUsS0FBYTtRQUN2RCxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUNEOzs7Ozs7T0FNRztJQUNJLDRDQUFhLEdBQXBCLFVBQXFCLFdBQW1CLEVBQUUsTUFBYyxFQUFFLFVBQWtCO1FBQzFFLE9BQU87UUFDUCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQy9CLE9BQU87U0FDUjtRQUNELElBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxFQUFKLENBQUksQ0FBQyxDQUFDO1FBQzNELElBQU0sZUFBZSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsSUFBSSxFQUFKLENBQUksQ0FBQyxDQUFDO1FBQ25FLElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxlQUFlLENBQUMsTUFBTSxFQUFFO1lBQ2pELE1BQU0sSUFBSSxLQUFLLENBQUMscURBQXFELENBQUMsQ0FBQztTQUN4RTtRQUNELElBQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUN0QixXQUFXLENBQUMsT0FBTyxDQUFDLFVBQUMsS0FBYSxFQUFFLEtBQWE7WUFDL0MsSUFBTSxTQUFTLEdBQUcsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxlQUFlLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUN6RSxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFDRDs7T0FFRztJQUNJLG9DQUFLLEdBQVo7UUFDRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFFSCwyQkFBQztBQUFELENBQUMsQUE5RkQsSUE4RkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5o6S5bqP5p2h5Lu2566h55CGXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU29ydENvbmRpdGlvbk1hbmFnZXIge1xyXG4gIC8qKlxyXG4gICAqIOaOkuW6j+adoeS7tumbhuWQiFxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIOaOkuW6j+adoeS7tuaVsOaNrue7k+aehOaPj+i/sO+8mlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiBrZXk6IGJpbmRpbmdQYXRoXHJcbiAgICogdmFsdWU6IEFycmF5PHtmaWVsZDpcIm5hbWV8ZXRjXCIsZGlyZWN0aW9uOlwiYXNjfGRlc2NcIn0+XHJcbiAgICogYGBgXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzb3J0czogTWFwPHN0cmluZywgQXJyYXk8YW55Pj47XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnNvcnRzID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PGFueT4+KCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOagueaNrmJpbmdkaW5nUGF0aOiOt+WPluaOkuW6j+inhOWImVxyXG4gICAqIEBwYXJhbSBiaW5kaW5nUGF0aCBiaW5kaW5nUGF0aFxyXG4gICAqIEBwYXJhbSBkaXJlY3Rpb25Db252ZXJ0ZXIgY29udmVydGVyXHJcbiAgICovXHJcbiAgcHVibGljIGdldENvbmRpdGlvbnNCeUJpbmRpbmdQYXRoKGJpbmRpbmdQYXRoOiBzdHJpbmcsIGRpcmVjdGlvbkNvbnZlcnRlcj86IChkaXJlY3Rpb246ICdhc2MnIHwgJ2Rlc2MnKSA9PiBhbnkpIHtcclxuICAgIGxldCBjb25kaXRpb25zID0gdGhpcy5zb3J0cy5nZXQoYmluZGluZ1BhdGgpIHx8IFtdO1xyXG4gICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm4gY29uZGl0aW9ucztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZGlyZWN0aW9uQ29udmVydGVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNvbmRpdGlvbnMgPSBjb25kaXRpb25zLm1hcChjb25kaXRpb24gPT4ge1xyXG4gICAgICAgIGNvbnN0IHNvcnRUeXBlID0gZGlyZWN0aW9uQ29udmVydGVyKGNvbmRpdGlvbi5Tb3J0VHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIHsgU29ydEZpZWxkOiBjb25kaXRpb24uU29ydEZpZWxkLCBTb3J0VHlwZTogc29ydFR5cGUgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29uZGl0aW9ucztcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5aKe5Yqg5o6S5bqP5p2h5Lu2XHJcbiAgICogQHBhcmFtIGJpbmRpbmdQYXRoIOe7keWumui3r+W+hFxyXG4gICAqIEBwYXJhbSBmaWVsZCDmjpLluo/lrZfmrrVcclxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIOaOkuW6j+aWueWQkSBhc2N8ZGVzY1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhZGRDb25kaXRpb24oYmluZGluZ1BhdGg6IHN0cmluZywgZmllbGQ6IHN0cmluZywgZGlyZWN0aW9uOiBzdHJpbmcpIHtcclxuICAgIC8vIOWPlua2iOaOkuW6j1xyXG4gICAgaWYgKCFmaWVsZCB8fCAhZGlyZWN0aW9uKSB7XHJcbiAgICAgIHRoaXMuc29ydHMuZGVsZXRlKGJpbmRpbmdQYXRoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNCaW5kaW5nUGF0aEV4aXN0ID0gdGhpcy5zb3J0cy5oYXMoYmluZGluZ1BhdGgpO1xyXG4gICAgY29uc3QgY29uZGl0aW9uID0geyBTb3J0RmllbGQ6IGZpZWxkLCBTb3J0VHlwZTogZGlyZWN0aW9uIH07XHJcbiAgICBpZiAoIWlzQmluZGluZ1BhdGhFeGlzdCkge1xyXG4gICAgICB0aGlzLnNvcnRzLnNldChiaW5kaW5nUGF0aCwgW2NvbmRpdGlvbl0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgYmluZGluZ1BhdGhTb3J0Q29uZGl0aW9ucyA9IHRoaXMuc29ydHMuZ2V0KGJpbmRpbmdQYXRoKSB8fCBbXTtcclxuICAgICAgLy8gbmV3IGNvbmRpdGlvbiB3aWxsIG92ZXJyaWRlIHRoZSBwcmV2aW91cyBjb25kaXRpb25cclxuICAgICAgY29uc3QgY29uZGl0aW9uSW5kZXggPSBiaW5kaW5nUGF0aFNvcnRDb25kaXRpb25zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uU29ydEZpZWxkID09PSBmaWVsZCk7XHJcbiAgICAgIGlmIChjb25kaXRpb25JbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBiaW5kaW5nUGF0aFNvcnRDb25kaXRpb25zW2NvbmRpdGlvbkluZGV4XSA9IGNvbmRpdGlvbjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBiaW5kaW5nUGF0aFNvcnRDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBwdWJsaWMgcmVtb3ZlQ29uZGl0aW9uKGJpbmRpbmdQYXRoOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudCEnKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5om56YeP5aKe5Yqg5o6S5bqP5p2h5Lu2XHJcbiAgICogQHBhcmFtIGJpbmRpbmdQYXRoIGJpbmRpbmdQYXRoXHJcbiAgICogQHBhcmFtIGZpZWxkcyBmaWVsZHMgLCBzZXByYXRlZCBieSBjb21tYVxyXG4gICAqIEBwYXJhbSBkaXJlY3Rpb25zIGRpcmVjdGlvbnMgLCBzZXByYXRlZCBieSBjb21tYVxyXG4gICAqIEBkZXNjcmlwdGlvbiBzZXQgY29uZGl0aW9ucyBhbmQgb3ZlcndyaXRlIGFsbCBjb25kaXRpb25zIHdoaWNoIGhhcyB0aGUgc2FtZSBiaW5kaW5nUGF0aFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRDb25kaXRpb25zKGJpbmRpbmdQYXRoOiBzdHJpbmcsIGZpZWxkczogc3RyaW5nLCBkaXJlY3Rpb25zOiBzdHJpbmcpIHtcclxuICAgIC8vIOWPlua2iOaOkuW6j1xyXG4gICAgaWYgKCFmaWVsZHMgfHwgIWRpcmVjdGlvbnMpIHtcclxuICAgICAgdGhpcy5zb3J0cy5kZWxldGUoYmluZGluZ1BhdGgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBmaWxlZHNBcnJheSA9IGZpZWxkcy5zcGxpdCgnLCcpLmZpbHRlcihpdGVtID0+IGl0ZW0pO1xyXG4gICAgY29uc3QgZGlyZWN0aW9uc0FycmF5ID0gZGlyZWN0aW9ucy5zcGxpdCgnLCcpLmZpbHRlcihpdGVtID0+IGl0ZW0pO1xyXG4gICAgaWYgKGZpbGVkc0FycmF5Lmxlbmd0aCAhPT0gZGlyZWN0aW9uc0FycmF5Lmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FyZ3VtZW50cyBlcnJvcixmaWVsZHMgYW5kIGRpcmVjdGlvbiBhcmUgbm90IG1hdGNoLicpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xyXG4gICAgZmlsZWRzQXJyYXkuZm9yRWFjaCgoZmllbGQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICBjb25zdCBjb25kaXRpb24gPSB7IFNvcnRGaWVsZDogZmllbGQsIFNvcnRUeXBlOiBkaXJlY3Rpb25zQXJyYXlbaW5kZXhdIH07XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChjb25kaXRpb24pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNvcnRzLnNldChiaW5kaW5nUGF0aCwgY29uZGl0aW9ucyk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOa4heepuuaJgOacieaOkuW6j+adoeS7tlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhcigpIHtcclxuICAgIHRoaXMuc29ydHMuY2xlYXIoKTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==