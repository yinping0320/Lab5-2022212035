import * as tslib_1 from "tslib";
import { Injector, Injectable, Optional, SkipSelf, InjectFlags } from '@angular/core';
import { Repository } from '../repository/index';
import { BindingData } from '../binding-data/index';
import { UIState, PARAM_TYPE_TRANSFORM_TOKEN } from '../ui-state/index';
import { Form } from '../form/index';
import { StateMachine } from '../state-machine/index';
import { ViewModel } from '../view-model/index';
import { CommandBus, CommandHandlerExtenderRegistry, CommandHandlerFactory, CommandHandlerRegistry } from '../command/index';
import { Context } from '../context/index';
import { AppContext } from '../app/index';
import { RouterParamService } from '../misc/index';
import { FRAME_ID, NAMESPACE } from './tokens';
import { ChangeType } from '../binding-data/index';
import { EventBus } from '../event-bus-new/index';
import { EXCEPTION_HANDLER } from '../exception/tokens';
import { EntityUtil } from '../binding-data/entity_util';
import { TranslateToken } from '../i18n/translate_token';
import { VariableParseService } from '../variable/variable_parse_service';
import { TranslateService } from '../i18n/translate_service';
import { UserSettingsToken } from '../i18n/tokens';
import { UserSettingsService } from '../i18n/user_settings_service';
import { ExpressionEngineImpl } from '../expression/expression_engine_impl';
import { ExpressionManager } from '../expression/expression_manager';
import { ExpressionResult } from '../expression/expression_result';
import { ExpressionResultFactory } from '../expression/expression_result_factory';
import { CommandVariableParser, DataVariableParser, FrameIdVariableParser, StateMachineVariableParser, UIStateVariableParser } from '../variable';
import { CHANGE_SET_POLICY_TOKEN, RunMode, ENABLE_SERVER_SIDE_CHANGE_DETECTION_TOKEN, DestroyOpportunity } from '../core';
import { Subject } from 'rxjs';
import { ComponentRefManager } from './component_ref_manager';
/**
 * 组件上下文
 * @description
 * # 上下文
 * ## Overview
 *
 * 每个组件（FrameComponent）都有自己的上下文（FrameContext）,通过上下文可以获取控制器的所有属性，如常用的`frameId`、`BindingData`、`Repository`、`ViewModel`、`StateMachine`、 * `UIState`等。上下文在内存中呈树形结构，依附于FrameComponent。结构如下：
 *
 * ![image-20210806204755378](https://open.inspuronline.com/iGIX/assets/cloudplus/igix_2110/farris/devkit/guide/images/image-20210806204755378.png)
 *
 * 从上图我们可以看出每个上下文都有自己的`ViewModel`、`UIState`，那么如何确定一个命令在执行时用的是哪个上下文呢？其实无论命令在哪个地方被调用，上下文都是命令所在的组件的上下文。即，如果 * 命令挂载到了`detail-form-component`的视图模型，但命令最终被`root-component`上的按钮调用了，其上下文仍然是`detail-from-component`组件的上下文。之所以出现这种现象和Angular的依赖注 * 入密不可分，由于Angular在查找`provider`的时候总是从自己的组件开始向上找，如果在组件内部找到了则不再继续查找，如果找不到则会继续向上，如果查找到最上级依然找不到就会报`No provider  * for xx`错误。
 *
 * 既然如此，如果我们在`detail-form-component`中想要获取`root-component`中定义的变量（UIState）该如何做呢？答案是切换上下文，可以通过以下方式实现：
 *
 * ```typescript
 * // 方法1
 * const rootFrameContext = this.frameContext.root;
 * // 方法2
 * const rootFrameContext = this.frameContext.appContext.frameContextManager.getFrameContextById('root-component');
 * ```
 *
 * 通常在编写`Web构件`时先引入FrameContext，如：
 *
 * ```javascript
 * import {FrameContext,BindingData,Repository} from '@farris/devkit';
 *
 * constructor(private frameContext:FrameContext){}
 *
 * public method(){
 *     const bindingData: BindingData = this.frameContext.bindingData;
 *     const repository: Repository = this.frameContext.repository;
 * }
 * ```
 *
 * > `FrameContext`称为`ViewModelContext`更合适，可以理解为`MVVM`架构中`VM`的上下文。
 *
 * 控制器中亦存在`ViewModel`的概念。和`MVVM`架构中的的VM一致，所以也可以从`VM`访问常用的属性。如：
 *
 * ```typescript
 * import {BindingData,Repository,ViewModel} from '@farris/devkit';
 *
 * constructor(private viewModel:ViewModel){}
 *
 * public method(){
 *     const bindingData: BindingData = this.viewModel.bindingData;
 *     const repository: Repository = this.viewModel.repository;
 * }
 * ```
 *
 *
 *
 * ## 常用操作
 *
 * ### 获取当前上下文所属的组件
 *
 * ```typescript
 * this.frameContext.frameComponent;
 * ```
 *
 * ### 获取当前上下文的根上下文
 *
 * ```typescript
 * this.frameContext.root;
 * ```
 *
 * ### 获取当前上下文的appContext
 *
 * ```typescript
 * this.frameContext.appContext;
 * ```
 *
 * ### 获取指定frameId的上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContextById('data-grid-component');
 * ```
 *
 * ### 获取表单所有上下文
 *
 * ```typescript
 * this.frameContext.appContext.frameContextManager.getFrameContexts();
 * ```
 *
 *
 *
 * ## 常用属性
 *
 * ### BindingData
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F绑定数据.md))
 *
 * ### Repository
 *
 * [参考]([浪潮企业云开放平台 (inspuronline.com)](https://open.inspuronline.com/iGIX/#/document/mddoc/igix-2103%2Ffarris%2Fdevkit%2Fguide%2F仓库.md))
 *
 * ### ViewModel
 *
 * 控制器中ViewMode同MVVM架构中的VM，和FrameContext类似，可以通过ViewModel拿到FrameContext，同样的也可以通过FrameContext拿到ViewModel。
 *
 * ### namespace
 *
 * 命名空间，主要在组合表单场景用到，每一个表单都有自己的命名空间，被组合进来的表单其命名空间是相同的，如A表单组合了B表单，则B表单具有相同的命名空间，命名空间主要用于表单隔离。
 *
 * ### root
 *
 * 获取整个表单的根上下文
 *
 * ### uiState
 *
 * 获取当前组件的变量
 *
 * ### frameId
 *
 * 上下文标识。
 */
var FrameContext = /** @class */ (function (_super) {
    tslib_1.__extends(FrameContext, _super);
    /**
     * 构造函数
     * @param injector 注入器
     */
    function FrameContext(injector, parent) {
        var _this = _super.call(this) || this;
        _this.injector = injector;
        _this.typeName = 'FrameContext';
        _this.isDestoried = false;
        _this.isDisposed = false;
        _this.metadata = {
            identify: '',
            namespace: '',
            commands: null,
            form: null,
            formControls: null,
            subForms: null,
            stateMachine: null,
            uiStates: null,
            bindingTo: ''
        };
        /**
         * 组件引用管理
         */
        _this.componentRefManager = new ComponentRefManager();
        /**
         * 启用后端变更检测
         */
        _this.enableServerSideChangeDetection = false;
        // 在解析模式下，通过依赖注入获取不到AppContext时，返回null，在子类中进行赋值。
        _this.appContext = injector.get(AppContext);
        _this.destorySignal = new Subject();
        // 确定父子关系
        // 必须对appContext进行判断，原因如下：
        // 1、否则会导致动态路由表单中，被路由的表单的RootFrameContext变成主表单的RootFrameContext；
        // 2、进而导致从RootFrameContext上拿VO变量拿不到。
        if (!parent || parent.appContext !== _this.appContext) { // 取消 appContext 的判断
            _this.parent = null;
            _this.root = _this;
        }
        else {
            _this.parent = parent;
            _this.root = parent.root;
        }
        _this.frameId = injector.get(FRAME_ID);
        if (_this.appContext.contextMetadataManager.exsit(_this.frameId)) {
            _this.metadata = _this.appContext.contextMetadataManager.getContextMetadataByName(_this.frameId);
        }
        _this.namespace = injector.get(NAMESPACE, null);
        _this.bindingData = _this.injector.get(BindingData, new BindingData());
        if (!_this.appContext.useIsoluteEventBus || (_this.appContext.useIsoluteEventBus && !_this.appContext.isoluteEventBus)) {
            _this.eventBus = _this.injector.get(EventBus, null, InjectFlags.Optional);
        }
        else {
            _this.eventBus = _this.appContext.isoluteEventBus;
        }
        _this.form = _this.injector.get(Form, new Form());
        _this.repository = _this.injector.get(Repository, _this.appContext.repository);
        // 获取变更集策略，默认只提交合法的变更
        var changeSetPolicy = _this.injector.get(CHANGE_SET_POLICY_TOKEN, 'valid');
        if (_this.repository) {
            _this.repository.entityCollection.changeSetPolicy = changeSetPolicy;
        }
        _this.enableServerSideChangeDetection = _this.injector.get(ENABLE_SERVER_SIDE_CHANGE_DETECTION_TOKEN, false);
        _this.uiState = _this.injector.get(UIState, new UIState());
        var defaultViewModel = new ViewModel();
        defaultViewModel.setMetadata(_this.metadata);
        _this.viewModel = _this.injector.get(ViewModel, defaultViewModel);
        _this.variableParseService = injector.get(VariableParseService, new VariableParseService([
            new FrameIdVariableParser(),
            new DataVariableParser(),
            new UIStateVariableParser(),
            new StateMachineVariableParser(),
            new CommandVariableParser()
        ]));
        // 注入exceptionHandler
        _this.exceptionHandler = injector.get(EXCEPTION_HANDLER, null, InjectFlags.Optional);
        // 初始化多语服务
        var translate = injector.get(TranslateToken, null);
        _this.translate = translate;
        TranslateService.setTranslate(translate);
        // 初始化用户配置
        var userSettings = injector.get(UserSettingsToken, null);
        UserSettingsService.setUserSettings(userSettings);
        _this.initializeRepository();
        _this.appContext.regFrameContext(_this);
        _this.registerAppContextDestroyEvent();
        return _this;
    }
    FrameContext.prototype.dispose = function (options) {
        var _this = this;
        if (this.isDisposed) {
            return;
        }
        this.isDestoried = true;
        this.isDisposed = true;
        if (this.destorySignal) {
            this.destorySignal.next();
            this.destorySignal.complete();
        }
        if (this.appContext) {
            this.appContext.frameContextManager.unregFrameContext(this);
            this.appContext.frameComponentRefresher.unregFrameContext(this);
        }
        if (this.appContext && this.isRootFrameContext() === true) {
            var viewModelNames = this['viewModelNames'];
            if (viewModelNames && Array.isArray(viewModelNames)) {
                viewModelNames.forEach(function (name) {
                    _this[name] = null;
                });
            }
            this.appContext.unregisterFromManager();
        }
        if (this.bindingData) {
            this.bindingData.dispose();
            // this.bindingData = null;
        }
        if (this.viewModel) {
            this.viewModel.dispose();
        }
        if (this.form) {
            this.form.dispose();
            this.form = null;
        }
        if (this.commandBus) {
            this.commandBus.dispose();
            this.commandBus = null;
        }
        TranslateService.dispose();
        // this.root = null;
        // this.parent = null;
        // this.uiState = null;
        this.frameComponent = null;
        this.repository = null;
        // this.stateMachine = null;
        // this.appContext = null;
        this.exceptionHandler = null;
        this.expressionManager = null;
        this.expressionEngineImpl = null;
        this.variableParseService = null;
        this.eventBus = null;
        this.translate = null;
        this.injector = null;
        this.expressionResult = null;
        UserSettingsService.setUserSettings(null);
    };
    FrameContext.prototype.ngOnDestroy = function () {
        this.dispose();
    };
    /**
     * 通过组件标识获取对应的组件实例
     * @param id 组件标识
     * @returns
     */
    FrameContext.prototype.getComponentById = function (id) {
        var components = this.componentRefManager.get(id);
        if (components && components.length > 0) {
            var component = components[0];
            return component;
        }
        return null;
    };
    /**
     * 获取指定标识的所有组件
     * @param id 组件标识
     */
    FrameContext.prototype.getComponentsById = function (id) {
        return this.componentRefManager.get(id);
    };
    FrameContext.prototype.bindInjector = function (componentInjector) {
        this.injector = componentInjector;
    };
    // #region 初始化
    /**
     * 初始化
     * @todo:
     * 1、CommandHandler中的服务可能会注入Context，所以CommandHandler创建时必须已经存在ComponentContext
     * 2、ViewModel的buildCommands中会使用CommandBus，为了保证顺序，将ViewModel的创建也放在init中。
     */
    FrameContext.prototype.init = function (frameComponent) {
        this.frameComponent = frameComponent;
        this.initializeBindingData();
        this.initializeStateMachine();
        this.initializeUiState();
        this.initializeForm();
        this.initializeCommandBus();
        this.initializeViewModel();
        this.registerExceptionHandler();
        this.initExpression();
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    };
    FrameContext.prototype.initExpression = function () {
        this.expressionEngineImpl = this.injector.get(ExpressionEngineImpl, null);
        this.expressionManager = this.injector.get(ExpressionManager, null);
        var expressionResultFactory = this.injector.get(ExpressionResultFactory, null);
        this.expressionResult = this.injector.get(ExpressionResult, null);
    };
    /**
     * 订阅异常消息
     */
    FrameContext.prototype.registerExceptionHandler = function () {
        var _this = this;
        // tslint:disable: no-string-literal
        var formAppContext = this.getFormAppContext();
        var applicationId = formAppContext.ApplicationId;
        window[window.location.href] = applicationId;
        if (this.exceptionHandler !== null) {
            var applicationContext = window[applicationId] = window[applicationId] || {};
            if (this.eventBus !== null && this.isRootFrameContext()) {
                applicationContext.isExceptionHandlerExist = true;
                this.exceptionHandler.setContext(this.appContext);
                this.eventBus.on('Exception', '', 'onException', formAppContext, function (error) {
                    if (_this.isDestoried === true) {
                        return;
                    }
                    if (error && error.error) {
                        try {
                            error.error.__frame_context__ = _this;
                        }
                        catch (_a) { }
                    }
                    _this.exceptionHandler.handle(error);
                });
            }
            this.destorySignal.subscribe(function () {
                _this.eventBus.off('Exception', '', 'onException', formAppContext);
            });
        }
    };
    FrameContext.prototype.registerAppContextDestroyEvent = function () {
        var _this = this;
        if (this.appContext && this.appContext.destorySignal) {
            this.appContext.destorySignal.subscribe(function (options) {
                if (_this.stateMachine) {
                    // 仅当菜单关闭时销毁
                    if (!(options && options.opportunity === DestroyOpportunity.AppContextDestroy)) {
                        _this.stateMachine.dispose();
                        _this.stateMachine = null;
                    }
                }
                if (_this.repository) {
                    _this.repository.dispose();
                }
            });
        }
    };
    /**
     * 获取表单appcontext，即最上层appcontext
     */
    FrameContext.prototype.getFormAppContext = function () {
        return this.appContext;
    };
    /**
     * 获取frameId
     * @description 获取完整的FrameId，在非普通表单中该值等于frameId，在组合表单中该值为namespace_frameId
     */
    FrameContext.prototype.getFrameId = function (relativeFrameId) {
        if (!relativeFrameId) {
            return this.frameId;
        }
        if (this.namespace && this.namespace.length > 0) {
            return this.namespace + "_" + relativeFrameId;
        }
        else {
            return relativeFrameId;
        }
    };
    /**
     * 初始化Repository
     */
    FrameContext.prototype.initializeRepository = function () {
        this.repository.setPaginationConfig(this.repository.paginationInfo);
    };
    FrameContext.prototype.initializeForm = function () {
        // 设置Form语言服务
        // this.form.setTranslateService(translateService);
        // 初始化Form，提取FormControl定义，添加FormControl
        // this.form.init(this.bindingData, this.metadata.bindingTo, this);
        // Form
        this.form = this.injector.get(Form, null);
        if (this.form) {
            // 设置Form语言服务
            this.form.setTranslateService(this.injector.get(TranslateToken, null));
            // 初始化Form，提取FormControl定义，添加FormControl
            var bindingPath = this.viewModel.bindingPath || this.metadata.bindingTo;
            this.form.init(this.bindingData, bindingPath, this);
        }
    };
    FrameContext.prototype.initializeStateMachine = function () {
        // StateMachine 状态机需要在绑定数据之后加载
        this.stateMachine = this.injector.get(StateMachine, null);
        if (this.stateMachine) {
            this.stateMachine.initialize(this, this.variableParseService);
        }
    };
    FrameContext.prototype.initializeCommandBus = function () {
        var handlerRegistry = this.injector.get(CommandHandlerRegistry, new CommandHandlerRegistry(this.metadata.commandHandlers));
        var extendsRegistry = this.injector.get(CommandHandlerExtenderRegistry, new CommandHandlerExtenderRegistry(this.metadata.commandHandlerExtends));
        var commandHandlerFactory = new CommandHandlerFactory(handlerRegistry, extendsRegistry, this, this.variableParseService);
        this.commandBus = new CommandBus(commandHandlerFactory);
    };
    /**
     * 初始化ViewModel
     * @todo
     * 1、需要按照一定的顺序进行初始化，否则依赖无法正确处理；
     * 2、暂时使用init解决Context和其他部分的循环依赖问题，待优化；
     */
    FrameContext.prototype.initializeViewModel = function () {
        if (!this.metadata.bindingTo) {
            this.metadata.bindingTo = this.viewModel.bindingPath;
        }
        this.viewModel.init(this);
        this.regViewModel(this.viewModel);
    };
    /**
     * 初始化BindingData
     * @summary
     * 老表单：repositoryName为空，复制当前Repository里的数据；
     * 新表单：repositoryName有值，引用全局BindingData里的数据；
     */
    FrameContext.prototype.initializeBindingData = function () {
        var _this = this;
        var repositoryName = this.repository.name;
        var isRunAtHighSpeedMode = this.appContext.runMode === RunMode.highSpeed;
        if (repositoryName && isRunAtHighSpeedMode) {
            var repositoryBindingData = this.appContext.bindingDataManager.getBindingDataByName(repositoryName);
            this.bindingData.initByBindingList(repositoryBindingData.list, this.viewModel.bindingPath);
            this.bindingData.pagingInfo = repositoryBindingData.pagingInfo;
            this.bindingData.setDataTypeInfo(this.repository.entityTypeInfo);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
        }
        else {
            this.bindingData.initByRepository(this.repository, this.viewModel.bindingPath);
            EntityUtil.watchReposiroty(this.repository, this.bindingData);
            this.bindingData.changes.subscribe(function (change) {
                if (change.type === ChangeType.GlobalSelectionChanged) {
                    _this.appContext.handleSelectChange(change, _this);
                }
            });
        }
    };
    /**
     * 初始化UIState
     * 合并路由参数到UIState中
     */
    FrameContext.prototype.initializeUiState = function () {
        var _this = this;
        var isInFramework = window.location.href.indexOf('platform') > -1;
        var paramTypeTransform = this.injector.get(PARAM_TYPE_TRANSFORM_TOKEN, false);
        // 获取UIState
        this.uiState = this.injector.get(UIState, null);
        if (!this.uiState) {
            return;
        }
        this.uiState.paramTypeTransform = paramTypeTransform;
        this.uiState.initialize(this);
        // 获取路由参数
        var url = (this.appContext && this.appContext.router && this.appContext.router.url) || '';
        var routerParamService = new RouterParamService();
        var routerParams = routerParamService.getParams(url);
        // 在UIState为路由参数创建属性
        Object.keys(routerParams).forEach(function (propName) {
            Object.defineProperty(_this.uiState, propName, {
                get: function () {
                    return routerParams[propName];
                }
            });
        });
    };
    /**
     * 注册子ViewModel
     * @todo
     * 1、propName写死了
     */
    FrameContext.prototype.regViewModel = function (viewModel) {
        if (this.appContext && this.appContext.viewModelManager.exsit(viewModel.name) === false) {
            this.appContext.viewModelManager.register(viewModel.name, viewModel);
        }
        var className = viewModel.constructor.name;
        var parentContext = this.parent;
        var parentViewModel = null;
        if (parentContext && parentContext.viewModel) {
            parentViewModel = parentContext.viewModel;
        }
        if (!parentViewModel) {
            return;
        }
        // 优先使用生成器生成的name
        var childViewModels = parentViewModel['childViewModels'];
        var viewModelName = null;
        if (childViewModels) {
            var name_1 = viewModel.constructor.name;
            viewModelName = childViewModels[viewModel.name] || childViewModels[name_1];
        }
        else if (className.length === 1) {
            var classNameTokens = viewModel.name.split('-').map(function (nameToken, index) {
                if (index > 0 && nameToken.length) {
                    var pasicalName = nameToken.charAt(0).toLocaleUpperCase() + nameToken.substr(1, nameToken.length - 1);
                    return pasicalName;
                }
                else if (index === 0 && nameToken.length) {
                    var camelName = nameToken.charAt(0).toLocaleLowerCase() + nameToken.substr(1, nameToken.length - 1);
                    return camelName;
                }
                return nameToken;
            });
            viewModelName = classNameTokens.join('');
        }
        else if (viewModel["relateChildName"]) {
            // 增加该参数的目的  是为了解析表单可以进行和生成型相同的层级结构
            viewModelName = viewModel["relateChildName"];
        }
        // 兼容产品部老表单的写法，如果需要vm name统一，应按照此规则
        if (!viewModelName) {
            viewModelName = className[0].toLowerCase() + className.substring(1, className.length);
        }
        parentViewModel['viewModelNames'] = parentViewModel['viewModelNames'] || [];
        parentViewModel[viewModelName] = viewModel;
        parentViewModel['viewModelNames'].push(viewModelName);
        viewModel.bindToParent(parentViewModel);
    };
    // #endregion
    /**
     * 检查是否为根FrameContext
     * @summary
     * 检查该FrameContext是不是所在AppContext中的根FrameContext
     */
    FrameContext.prototype.isRootFrameContext = function () {
        return this.parent === null || (this.appContext.runMode === RunMode.highSpeed && this.getVirtualRootFrameContext().frameComponent['isDialogRootComponent'] === true);
    };
    /**
     * 通过namespace获取当前表单的root-framecontext(非整个表单)
     * @description
     * 如果为组合表单，其当前表单的root-framecontext为单个表单的framecontext，而非整个表单的framecontext
     */
    FrameContext.prototype.getVirtualRootFrameContext = function () {
        var formFrameContext = this;
        var parent = this.parent;
        while (parent) {
            // 兼容没有重新编译的表单，如果判断parent.namespace存在会导致获取不到root-framecontext
            if (parent.namespace === this.namespace) {
                formFrameContext = parent;
                parent = parent.parent;
            }
            else {
                break;
            }
        }
        return formFrameContext;
    };
    FrameContext.prototype.getContextById = function (identify) {
        return this.appContext.getContextById(identify);
    };
    FrameContext.prototype.getViewModel = function (viewModelName) {
        var renderAppContext = this.appContext;
        if (renderAppContext) {
            return renderAppContext.viewModelManager.getViewModelByName(viewModelName);
        }
        return null;
    };
    FrameContext.prototype.attachViewComponent = function (viewComponent) {
        this.frameComponent = viewComponent;
        this.appContext.frameComponentRefresher.regFrameComponent(this.frameId, this.frameComponent);
    };
    FrameContext.prototype.invoke = function (actionPath, $event) {
        var actionBindingPath = actionPath.split('.');
        var actionName = actionBindingPath[actionBindingPath.length - 1];
        var bindingViewModel = actionBindingPath.length === 1 ? this.viewModel :
            this.getViewModel(actionBindingPath[actionBindingPath.length - 2]);
        if (!bindingViewModel) {
            alert("\u672A\u5339\u914D\u5230'" + actionPath + "'\u547D\u4EE4\u7684\u89C6\u56FE\u6A21\u578B\uFF0C\u8BF7\u68C0\u67E5\u4E8B\u4EF6\u662F\u5426\u914D\u7F6E\u6B63\u786E\u3002");
        }
        return bindingViewModel[actionName]($event);
    };
    FrameContext.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    FrameContext.ctorParameters = function () { return [
        { type: Injector },
        { type: FrameContext, decorators: [{ type: Optional }, { type: SkipSelf }] }
    ]; };
    return FrameContext;
}(Context));
export { FrameContext };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVfY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2ZyYW1lL2ZyYW1lX2NvbnRleHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBR2pHLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsVUFBVSxFQUFFLDhCQUE4QixFQUFFLHFCQUFxQixFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDN0gsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQy9DLE9BQU8sRUFBVSxVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFHbEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFVBQVUsRUFB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aUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDckIsS0FBSyxDQUFDLDhCQUFRLFVBQVUsOEhBQXVCLENBQUMsQ0FBQztTQUNsRDtRQUNELE9BQU8sZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUMsQ0FBQzs7Z0JBOWtCRixVQUFVOzs7O2dCQTdKRixRQUFRO2dCQXNTd0QsWUFBWSx1QkFBM0MsUUFBUSxZQUFJLFFBQVE7O0lBc2M5RCxtQkFBQztDQUFBLEFBL2tCRCxDQUNrQyxPQUFPLEdBOGtCeEM7U0E5a0JZLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RvciwgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIFNraXBTZWxmLCBJbmplY3RGbGFncywgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uL2VudGl0eS9pbmRleCc7XHJcbmltcG9ydCB7IFJlcG9zaXRvcnkgfSBmcm9tICcuLi9yZXBvc2l0b3J5L2luZGV4JztcclxuaW1wb3J0IHsgQmluZGluZ0RhdGEgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvaW5kZXgnO1xyXG5pbXBvcnQgeyBVSVN0YXRlLCBQQVJBTV9UWVBFX1RSQU5TRk9STV9UT0tFTiB9IGZyb20gJy4uL3VpLXN0YXRlL2luZGV4JztcclxuaW1wb3J0IHsgRm9ybSB9IGZyb20gJy4uL2Zvcm0vaW5kZXgnO1xyXG5pbXBvcnQgeyBTdGF0ZU1hY2hpbmUgfSBmcm9tICcuLi9zdGF0ZS1tYWNoaW5lL2luZGV4JztcclxuaW1wb3J0IHsgVmlld01vZGVsIH0gZnJvbSAnLi4vdmlldy1tb2RlbC9pbmRleCc7XHJcbmltcG9ydCB7IENvbW1hbmRCdXMsIENvbW1hbmRIYW5kbGVyRXh0ZW5kZXJSZWdpc3RyeSwgQ29tbWFuZEhhbmRsZXJGYWN0b3J5LCBDb21tYW5kSGFuZGxlclJlZ2lzdHJ5IH0gZnJvbSAnLi4vY29tbWFuZC9pbmRleCc7XHJcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0L2luZGV4JztcclxuaW1wb3J0IHsgQXBwQ29udGV4dCB9IGZyb20gJy4uL2FwcC9pbmRleCc7XHJcbmltcG9ydCB7IFJvdXRlclBhcmFtU2VydmljZSB9IGZyb20gJy4uL21pc2MvaW5kZXgnO1xyXG5pbXBvcnQgeyBGUkFNRV9JRCwgTkFNRVNQQUNFIH0gZnJvbSAnLi90b2tlbnMnO1xyXG5pbXBvcnQgeyBDaGFuZ2UsIENoYW5nZVR5cGUgfSBmcm9tICcuLi9iaW5kaW5nLWRhdGEvaW5kZXgnO1xyXG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL2V2ZW50LWJ1cy1uZXcvaW5kZXgnO1xyXG5pbXBvcnQgeyBGcmFtZUNvbXBvbmVudCB9IGZyb20gJy4vZnJhbWVfY29tcG9uZW50JztcclxuaW1wb3J0IHsgSUV4Y2VwdGlvbkhhbmRsZXIgfSBmcm9tICcuLi9leGNlcHRpb24vdHlwZXMnO1xyXG5pbXBvcnQgeyBFWENFUFRJT05fSEFORExFUiB9IGZyb20gJy4uL2V4Y2VwdGlvbi90b2tlbnMnO1xyXG5pbXBvcnQgeyBFbnRpdHlVdGlsIH0gZnJvbSAnLi4vYmluZGluZy1kYXRhL2VudGl0eV91dGlsJztcclxuaW1wb3J0IHsgVHJhbnNsYXRlVG9rZW4gfSBmcm9tICcuLi9pMThuL3RyYW5zbGF0ZV90b2tlbic7XHJcbmltcG9ydCB7IFZhcmlhYmxlUGFyc2VTZXJ2aWNlIH0gZnJvbSAnLi4vdmFyaWFibGUvdmFyaWFibGVfcGFyc2Vfc2VydmljZSc7XHJcbmltcG9ydCB7IElDb250ZXh0TWV0YWRhdGEgfSBmcm9tICcuLi9hcHAvYXBwX21ldGFkYXRhJztcclxuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJy4uL2kxOG4vdHJhbnNsYXRlX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGUgfSBmcm9tICcuLi9pMThuJztcclxuaW1wb3J0IHsgVXNlclNldHRpbmdzIH0gZnJvbSAnLi4vaTE4bi90eXBlcyc7XHJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc1Rva2VuIH0gZnJvbSAnLi4vaTE4bi90b2tlbnMnO1xyXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3NTZXJ2aWNlIH0gZnJvbSAnLi4vaTE4bi91c2VyX3NldHRpbmdzX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uRW5naW5lSW1wbCB9IGZyb20gJy4uL2V4cHJlc3Npb24vZXhwcmVzc2lvbl9lbmdpbmVfaW1wbCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25NYW5hZ2VyIH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX21hbmFnZXInO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uUmVzdWx0IH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX3Jlc3VsdCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25SZXN1bHRGYWN0b3J5IH0gZnJvbSAnLi4vZXhwcmVzc2lvbi9leHByZXNzaW9uX3Jlc3VsdF9mYWN0b3J5JztcclxuaW1wb3J0IHtcclxuICBDb21tYW5kVmFyaWFibGVQYXJzZXIsIERhdGFWYXJpYWJsZVBhcnNlciwgRnJhbWVJZFZhcmlhYmxlUGFyc2VyLFxyXG4gIFN0YXRlTWFjaGluZVZhcmlhYmxlUGFyc2VyLCBVSVN0YXRlVmFyaWFibGVQYXJzZXJcclxufSBmcm9tICcuLi92YXJpYWJsZSc7XHJcbmltcG9ydCB7IENoYW5nZVNldFBvbGljeSwgQ0hBTkdFX1NFVF9QT0xJQ1lfVE9LRU4sIFJ1bk1vZGUsIEVOQUJMRV9TRVJWRVJfU0lERV9DSEFOR0VfREVURUNUSU9OX1RPS0VOLERlc3Ryb3lPcHBvcnR1bml0eSB9IGZyb20gJy4uL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29yZS9pbmRleCc7XHJcbmltcG9ydCB7IENvbXBvbmVudFJlZk1hbmFnZXIgfSBmcm9tICcuL2NvbXBvbmVudF9yZWZfbWFuYWdlcic7XHJcblxyXG5cclxuLyoqXHJcbiAqIOe7hOS7tuS4iuS4i+aWh1xyXG4gKiBAZGVzY3JpcHRpb24gXHJcbiAqICMg5LiK5LiL5paHXHJcbiAqICMjIE92ZXJ2aWV3XHJcbiAqIFxyXG4gKiDmr4/kuKrnu4Tku7bvvIhGcmFtZUNvbXBvbmVudO+8iemDveacieiHquW3seeahOS4iuS4i+aWh++8iEZyYW1lQ29udGV4dO+8iSzpgJrov4fkuIrkuIvmloflj6/ku6Xojrflj5bmjqfliLblmajnmoTmiYDmnInlsZ7mgKfvvIzlpoLluLjnlKjnmoRgZnJhbWVJZGDjgIFgQmluZGluZ0RhdGFg44CBYFJlcG9zaXRvcnlg44CBYFZpZXdNb2RlbGDjgIFgU3RhdGVNYWNoaW5lYOOAgSAqIGBVSVN0YXRlYOetieOAguS4iuS4i+aWh+WcqOWGheWtmOS4reWRiOagkeW9oue7k+aehO+8jOS+nemZhOS6jkZyYW1lQ29tcG9uZW5044CC57uT5p6E5aaC5LiL77yaXHJcbiAqIFxyXG4gKiAhW2ltYWdlLTIwMjEwODA2MjA0NzU1Mzc4XShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYL2Fzc2V0cy9jbG91ZHBsdXMvaWdpeF8yMTEwL2ZhcnJpcy9kZXZraXQvZ3VpZGUvaW1hZ2VzL2ltYWdlLTIwMjEwODA2MjA0NzU1Mzc4LnBuZylcclxuICogXHJcbiAqIOS7juS4iuWbvuaIkeS7rOWPr+S7peeci+WHuuavj+S4quS4iuS4i+aWh+mDveacieiHquW3seeahGBWaWV3TW9kZWxg44CBYFVJU3RhdGVg77yM6YKj5LmI5aaC5L2V56Gu5a6a5LiA5Liq5ZG95Luk5Zyo5omn6KGM5pe255So55qE5piv5ZOq5Liq5LiK5LiL5paH5ZGi77yf5YW25a6e5peg6K665ZG95Luk5Zyo5ZOq5Liq5Zyw5pa56KKr6LCD55So77yM5LiK5LiL5paH6YO95piv5ZG95Luk5omA5Zyo55qE57uE5Lu255qE5LiK5LiL5paH44CC5Y2z77yM5aaC5p6cICog5ZG95Luk5oyC6L295Yiw5LqGYGRldGFpbC1mb3JtLWNvbXBvbmVudGDnmoTop4blm77mqKHlnovvvIzkvYblkb3ku6TmnIDnu4jooqtgcm9vdC1jb21wb25lbnRg5LiK55qE5oyJ6ZKu6LCD55So5LqG77yM5YW25LiK5LiL5paH5LuN54S25pivYGRldGFpbC1mcm9tLWNvbXBvbmVudGDnu4Tku7bnmoTkuIrkuIvmlofjgILkuYvmiYDku6Xlh7rnjrDov5nnp43njrDosaHlkoxBbmd1bGFy55qE5L6d6LWW5rOoICog5YWl5a+G5LiN5Y+v5YiG77yM55Sx5LqOQW5ndWxhcuWcqOafpeaJvmBwcm92aWRlcmDnmoTml7blgJnmgLvmmK/ku47oh6rlt7HnmoTnu4Tku7blvIDlp4vlkJHkuIrmib7vvIzlpoLmnpzlnKjnu4Tku7blhoXpg6jmib7liLDkuobliJnkuI3lho3nu6fnu63mn6Xmib7vvIzlpoLmnpzmib7kuI3liLDliJnkvJrnu6fnu63lkJHkuIrvvIzlpoLmnpzmn6Xmib7liLDmnIDkuIrnuqfkvp3nhLbmib7kuI3liLDlsLHkvJrmiqVgTm8gcHJvdmlkZXIgICogZm9yIHh4YOmUmeivr+OAglxyXG4gKiBcclxuICog5pei54S25aaC5q2k77yM5aaC5p6c5oiR5Lus5ZyoYGRldGFpbC1mb3JtLWNvbXBvbmVudGDkuK3mg7PopoHojrflj5Zgcm9vdC1jb21wb25lbnRg5Lit5a6a5LmJ55qE5Y+Y6YeP77yIVUlTdGF0Ze+8ieivpeWmguS9leWBmuWRou+8n+etlOahiOaYr+WIh+aNouS4iuS4i+aWh++8jOWPr+S7pemAmui/h+S7peS4i+aWueW8j+WunueOsO+8mlxyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiAvLyDmlrnms5UxXHJcbiAqIGNvbnN0IHJvb3RGcmFtZUNvbnRleHQgPSB0aGlzLmZyYW1lQ29udGV4dC5yb290O1xyXG4gKiAvLyDmlrnms5UyXHJcbiAqIGNvbnN0IHJvb3RGcmFtZUNvbnRleHQgPSB0aGlzLmZyYW1lQ29udGV4dC5hcHBDb250ZXh0LmZyYW1lQ29udGV4dE1hbmFnZXIuZ2V0RnJhbWVDb250ZXh0QnlJZCgncm9vdC1jb21wb25lbnQnKTtcclxuICogYGBgXHJcbiAqIFxyXG4gKiDpgJrluLjlnKjnvJblhplgV2Vi5p6E5Lu2YOaXtuWFiOW8leWFpUZyYW1lQ29udGV4dO+8jOWmgu+8mlxyXG4gKiBcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBpbXBvcnQge0ZyYW1lQ29udGV4dCxCaW5kaW5nRGF0YSxSZXBvc2l0b3J5fSBmcm9tICdAZmFycmlzL2RldmtpdCc7XHJcbiAqIFxyXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIGZyYW1lQ29udGV4dDpGcmFtZUNvbnRleHQpe31cclxuICogXHJcbiAqIHB1YmxpYyBtZXRob2QoKXtcclxuICogICAgIGNvbnN0IGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YSA9IHRoaXMuZnJhbWVDb250ZXh0LmJpbmRpbmdEYXRhO1xyXG4gKiAgICAgY29uc3QgcmVwb3NpdG9yeTogUmVwb3NpdG9yeSA9IHRoaXMuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqIFxyXG4gKiA+IGBGcmFtZUNvbnRleHRg56ew5Li6YFZpZXdNb2RlbENvbnRleHRg5pu05ZCI6YCC77yM5Y+v5Lul55CG6Kej5Li6YE1WVk1g5p625p6E5LitYFZNYOeahOS4iuS4i+aWh+OAglxyXG4gKiBcclxuICog5o6n5Yi25Zmo5Lit5Lqm5a2Y5ZyoYFZpZXdNb2RlbGDnmoTmpoLlv7XjgILlkoxgTVZWTWDmnrbmnoTkuK3nmoTnmoRWTeS4gOiHtO+8jOaJgOS7peS5n+WPr+S7peS7jmBWTWDorr/pl67luLjnlKjnmoTlsZ7mgKfjgILlpoLvvJpcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogaW1wb3J0IHtCaW5kaW5nRGF0YSxSZXBvc2l0b3J5LFZpZXdNb2RlbH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG4gKiBcclxuICogY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3TW9kZWw6Vmlld01vZGVsKXt9XHJcbiAqIFxyXG4gKiBwdWJsaWMgbWV0aG9kKCl7XHJcbiAqICAgICBjb25zdCBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEgPSB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nRGF0YTtcclxuICogICAgIGNvbnN0IHJlcG9zaXRvcnk6IFJlcG9zaXRvcnkgPSB0aGlzLnZpZXdNb2RlbC5yZXBvc2l0b3J5O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKiAjIyDluLjnlKjmk43kvZxcclxuICogXHJcbiAqICMjIyDojrflj5blvZPliY3kuIrkuIvmlofmiYDlsZ7nmoTnu4Tku7ZcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogdGhpcy5mcmFtZUNvbnRleHQuZnJhbWVDb21wb25lbnQ7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIOiOt+WPluW9k+WJjeS4iuS4i+aWh+eahOagueS4iuS4i+aWh1xyXG4gKiBcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiB0aGlzLmZyYW1lQ29udGV4dC5yb290O1xyXG4gKiBgYGBcclxuICogXHJcbiAqICMjIyDojrflj5blvZPliY3kuIrkuIvmlofnmoRhcHBDb250ZXh0XHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmFwcENvbnRleHQ7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogIyMjIOiOt+WPluaMh+WummZyYW1lSWTnmoTkuIrkuIvmlodcclxuICogXHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogdGhpcy5mcmFtZUNvbnRleHQuYXBwQ29udGV4dC5mcmFtZUNvbnRleHRNYW5hZ2VyLmdldEZyYW1lQ29udGV4dEJ5SWQoJ2RhdGEtZ3JpZC1jb21wb25lbnQnKTtcclxuICogYGBgXHJcbiAqIFxyXG4gKiAjIyMg6I635Y+W6KGo5Y2V5omA5pyJ5LiK5LiL5paHXHJcbiAqIFxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIHRoaXMuZnJhbWVDb250ZXh0LmFwcENvbnRleHQuZnJhbWVDb250ZXh0TWFuYWdlci5nZXRGcmFtZUNvbnRleHRzKCk7XHJcbiAqIGBgYFxyXG4gKiBcclxuICogXHJcbiAqIFxyXG4gKiAjIyDluLjnlKjlsZ7mgKdcclxuICogXHJcbiAqICMjIyBCaW5kaW5nRGF0YSBcclxuICogXHJcbiAqIFvlj4LogINdKFvmtarmva7kvIHkuJrkupHlvIDmlL7lubPlj7AgKGluc3B1cm9ubGluZS5jb20pXShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYLyMvZG9jdW1lbnQvbWRkb2MvaWdpeC0yMTAzJTJGZmFycmlzJTJGZGV2a2l0JTJGZ3VpZGUlMkbnu5HlrprmlbDmja4ubWQpKVxyXG4gKiBcclxuICogIyMjIFJlcG9zaXRvcnlcclxuICogXHJcbiAqIFvlj4LogINdKFvmtarmva7kvIHkuJrkupHlvIDmlL7lubPlj7AgKGluc3B1cm9ubGluZS5jb20pXShodHRwczovL29wZW4uaW5zcHVyb25saW5lLmNvbS9pR0lYLyMvZG9jdW1lbnQvbWRkb2MvaWdpeC0yMTAzJTJGZmFycmlzJTJGZGV2a2l0JTJGZ3VpZGUlMkbku5PlupMubWQpKVxyXG4gKiBcclxuICogIyMjIFZpZXdNb2RlbFxyXG4gKiBcclxuICog5o6n5Yi25Zmo5LitVmlld01vZGXlkIxNVlZN5p625p6E5Lit55qEVk3vvIzlkoxGcmFtZUNvbnRleHTnsbvkvLzvvIzlj6/ku6XpgJrov4dWaWV3TW9kZWzmi7/liLBGcmFtZUNvbnRleHTvvIzlkIzmoLfnmoTkuZ/lj6/ku6XpgJrov4dGcmFtZUNvbnRleHTmi7/liLBWaWV3TW9kZWzjgIJcclxuICogXHJcbiAqICMjIyBuYW1lc3BhY2VcclxuICogXHJcbiAqIOWRveWQjeepuumXtO+8jOS4u+imgeWcqOe7hOWQiOihqOWNleWcuuaZr+eUqOWIsO+8jOavj+S4gOS4quihqOWNlemDveacieiHquW3seeahOWRveWQjeepuumXtO+8jOiiq+e7hOWQiOi/m+adpeeahOihqOWNleWFtuWRveWQjeepuumXtOaYr+ebuOWQjOeahO+8jOWmgkHooajljZXnu4TlkIjkuoZC6KGo5Y2V77yM5YiZQuihqOWNleWFt+acieebuOWQjOeahOWRveWQjeepuumXtO+8jOWRveWQjeepuumXtOS4u+imgeeUqOS6juihqOWNlemalOemu+OAglxyXG4gKiBcclxuICogIyMjIHJvb3RcclxuICogXHJcbiAqIOiOt+WPluaVtOS4quihqOWNleeahOagueS4iuS4i+aWh1xyXG4gKiBcclxuICogIyMjIHVpU3RhdGVcclxuICogXHJcbiAqIOiOt+WPluW9k+WJjee7hOS7tueahOWPmOmHj1xyXG4gKiBcclxuICogIyMjIGZyYW1lSWRcclxuICogXHJcbiAqIOS4iuS4i+aWh+agh+ivhuOAglxyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRnJhbWVDb250ZXh0IGV4dGVuZHMgQ29udGV4dCBpbXBsZW1lbnRzIElEaXNwb3NhYmxlLCBPbkRlc3Ryb3kge1xyXG5cclxuICBwdWJsaWMgdHlwZU5hbWUgPSAnRnJhbWVDb250ZXh0JztcclxuXHJcbiAgcHJvdGVjdGVkIGlzRGVzdG9yaWVkID0gZmFsc2U7XHJcbiAgcHVibGljIGlzRGlzcG9zZWQgPSBmYWxzZTtcclxuICAvKipcclxuICAgKiBpZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBmcmFtZUlkOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWFpeWZqFxyXG4gICAqL1xyXG4gIC8vIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3I7XHJcblxyXG4gIC8qKlxyXG4gICAqIOW6lOeUqOS4iuS4i+aWh1xyXG4gICAqL1xyXG4gIHB1YmxpYyBhcHBDb250ZXh0OiBBcHBDb250ZXh0O1xyXG5cclxuICAvKipcclxuICAgKiDmoLnnu4Tku7bkuIrkuIvmlodcclxuICAgKi9cclxuICBwdWJsaWMgcm9vdDogRnJhbWVDb250ZXh0O1xyXG5cclxuICAvKipcclxuICAgKiDniLZWaWV3TW9kZWxcclxuICAgKi9cclxuICBwdWJsaWMgcGFyZW50OiBGcmFtZUNvbnRleHQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQjuS7o+iKgueCuVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjaGlsZHJlbjogTWFwPHN0cmluZywgRnJhbWVDb250ZXh0PjtcclxuXHJcbiAgLyoqXHJcbiAgICog5a6e5L2T5LuT5bqTXHJcbiAgICovXHJcbiAgcHVibGljIHJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8RW50aXR5PjtcclxuXHJcbiAgLyoqXHJcbiAgICog5ZG95Luk5oC757q/XHJcbiAgICovXHJcbiAgcHVibGljIGNvbW1hbmRCdXM6IENvbW1hbmRCdXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIOS6i+S7tuaAu+e6v1xyXG4gICAqL1xyXG4gIHB1YmxpYyBldmVudEJ1czogRXZlbnRCdXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIOinhuWbvuaooeWei1xyXG4gICAqL1xyXG4gIHB1YmxpYyB2aWV3TW9kZWw6IFZpZXdNb2RlbDtcclxuXHJcbiAgLyoqXHJcbiAgICog5pWw5o2u57uR5a6aXHJcbiAgICovXHJcbiAgcHVibGljIGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YTtcclxuXHJcbiAgLyoqXHJcbiAgICogVUnnirbmgIFcclxuICAgKi9cclxuICBwdWJsaWMgdWlTdGF0ZTogVUlTdGF0ZTtcclxuXHJcbiAgLyoqXHJcbiAgICog54q25oCB5py6XHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRlTWFjaGluZTogU3RhdGVNYWNoaW5lO1xyXG5cclxuICAvKipcclxuICAgKiDooajljZVcclxuICAgKi9cclxuICBwdWJsaWMgZm9ybTogRm9ybTtcclxuXHJcbiAgLyoqXHJcbiAgICog5omA5bGe57uE5Lu2XHJcbiAgICovXHJcbiAgcHVibGljIGZyYW1lQ29tcG9uZW50OiBGcmFtZUNvbXBvbmVudDtcclxuXHJcbiAgLyoqXHJcbiAgICog5byC5bi45aSE55CGXHJcbiAgICovXHJcbiAgcHVibGljIGV4Y2VwdGlvbkhhbmRsZXI6IElFeGNlcHRpb25IYW5kbGVyO1xyXG5cclxuICAvKipcclxuICAgKiDooajljZXlkb3lkI3nqbrpl7RcclxuICAgKi9cclxuICBwdWJsaWMgbmFtZXNwYWNlOiBzdHJpbmc7XHJcblxyXG4gIHB1YmxpYyB2YXJpYWJsZVBhcnNlU2VydmljZTogVmFyaWFibGVQYXJzZVNlcnZpY2U7XHJcblxyXG4gIHB1YmxpYyBtZXRhZGF0YTogSUNvbnRleHRNZXRhZGF0YSA9IHtcclxuICAgIGlkZW50aWZ5OiAnJyxcclxuICAgIG5hbWVzcGFjZTogJycsXHJcbiAgICBjb21tYW5kczogbnVsbCxcclxuICAgIGZvcm06IG51bGwsXHJcbiAgICBmb3JtQ29udHJvbHM6IG51bGwsXHJcbiAgICBzdWJGb3JtczogbnVsbCxcclxuICAgIHN0YXRlTWFjaGluZTogbnVsbCxcclxuICAgIHVpU3RhdGVzOiBudWxsLFxyXG4gICAgYmluZGluZ1RvOiAnJ1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIOaaguWBnOS6i+S7tuaKm+WHulxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXNwZW5kOiBib29sZWFuO1xyXG4gIHB1YmxpYyBleHByZXNzaW9uRW5naW5lSW1wbDogRXhwcmVzc2lvbkVuZ2luZUltcGw7XHJcbiAgcHVibGljIGV4cHJlc3Npb25NYW5hZ2VyOiBFeHByZXNzaW9uTWFuYWdlcjtcclxuICBwdWJsaWMgZXhwcmVzc2lvblJlc3VsdDogRXhwcmVzc2lvblJlc3VsdDtcclxuICAvKipcclxuICAgKiDntKLlvJUo5LuOMOW8gOWniylcclxuICAgKi9cclxuICBwdWJsaWMgaW5kZXg6IG51bWJlcjtcclxuICAvKipcclxuICAgKiDlpJror61cclxuICAgKi9cclxuICBwdWJsaWMgdHJhbnNsYXRlOiBUcmFuc2xhdGU7XHJcbiAgLyoqXHJcbiAgICog5LiK5LiL5paH6ZSA5q+B5rWBXHJcbiAgICovXHJcbiAgcHVibGljIGRlc3RvcnlTaWduYWw6IFN1YmplY3Q8YW55PjtcclxuICAvKipcclxuICAgKiDnu4Tku7blvJXnlKjnrqHnkIZcclxuICAgKi9cclxuICBwdWJsaWMgY29tcG9uZW50UmVmTWFuYWdlcjogQ29tcG9uZW50UmVmTWFuYWdlciA9IG5ldyBDb21wb25lbnRSZWZNYW5hZ2VyKCk7XHJcbiAgLyoqXHJcbiAgICog5ZCv55So5ZCO56uv5Y+Y5pu05qOA5rWLXHJcbiAgICovXHJcbiAgcHVibGljIGVuYWJsZVNlcnZlclNpZGVDaGFuZ2VEZXRlY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKiBAcGFyYW0gaW5qZWN0b3Ig5rOo5YWl5ZmoXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IocHVibGljIGluamVjdG9yOiBJbmplY3RvciwgQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBGcmFtZUNvbnRleHQpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLyDlnKjop6PmnpDmqKHlvI/kuIvvvIzpgJrov4fkvp3otZbms6jlhaXojrflj5bkuI3liLBBcHBDb250ZXh05pe277yM6L+U5ZuebnVsbO+8jOWcqOWtkOexu+S4rei/m+ihjOi1i+WAvOOAglxyXG4gICAgdGhpcy5hcHBDb250ZXh0ID0gaW5qZWN0b3IuZ2V0KEFwcENvbnRleHQpO1xyXG4gICAgdGhpcy5kZXN0b3J5U2lnbmFsID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgLy8g56Gu5a6a54i25a2Q5YWz57O7XHJcbiAgICAvLyDlv4Xpobvlr7lhcHBDb250ZXh06L+b6KGM5Yik5pat77yM5Y6f5Zug5aaC5LiL77yaXHJcbiAgICAvLyAx44CB5ZCm5YiZ5Lya5a+86Ie05Yqo5oCB6Lev55Sx6KGo5Y2V5Lit77yM6KKr6Lev55Sx55qE6KGo5Y2V55qEUm9vdEZyYW1lQ29udGV4dOWPmOaIkOS4u+ihqOWNleeahFJvb3RGcmFtZUNvbnRleHTvvJtcclxuICAgIC8vIDLjgIHov5vogIzlr7zoh7Tku45Sb290RnJhbWVDb250ZXh05LiK5ou/Vk/lj5jph4/mi7/kuI3liLDjgIJcclxuICAgIGlmICghcGFyZW50IHx8IHBhcmVudC5hcHBDb250ZXh0ICE9PSB0aGlzLmFwcENvbnRleHQpIHsgLy8g5Y+W5raIIGFwcENvbnRleHQg55qE5Yik5patXHJcbiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgICAgdGhpcy5yb290ID0gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xyXG4gICAgICB0aGlzLnJvb3QgPSBwYXJlbnQucm9vdDtcclxuICAgIH1cclxuICAgIHRoaXMuZnJhbWVJZCA9IGluamVjdG9yLmdldDxzdHJpbmc+KEZSQU1FX0lEKTtcclxuICAgIGlmICh0aGlzLmFwcENvbnRleHQuY29udGV4dE1ldGFkYXRhTWFuYWdlci5leHNpdCh0aGlzLmZyYW1lSWQpKSB7XHJcbiAgICAgIHRoaXMubWV0YWRhdGEgPSB0aGlzLmFwcENvbnRleHQuY29udGV4dE1ldGFkYXRhTWFuYWdlci5nZXRDb250ZXh0TWV0YWRhdGFCeU5hbWUodGhpcy5mcmFtZUlkKTtcclxuICAgIH1cclxuICAgIHRoaXMubmFtZXNwYWNlID0gaW5qZWN0b3IuZ2V0KE5BTUVTUEFDRSwgbnVsbCk7XHJcbiAgICB0aGlzLmJpbmRpbmdEYXRhID0gdGhpcy5pbmplY3Rvci5nZXQ8QmluZGluZ0RhdGE+KEJpbmRpbmdEYXRhLCBuZXcgQmluZGluZ0RhdGEoKSk7XHJcbiAgICBpZiAoIXRoaXMuYXBwQ29udGV4dC51c2VJc29sdXRlRXZlbnRCdXMgfHwgKHRoaXMuYXBwQ29udGV4dC51c2VJc29sdXRlRXZlbnRCdXMgJiYgIXRoaXMuYXBwQ29udGV4dC5pc29sdXRlRXZlbnRCdXMpKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRCdXMgPSB0aGlzLmluamVjdG9yLmdldChFdmVudEJ1cywgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5ldmVudEJ1cyA9IHRoaXMuYXBwQ29udGV4dC5pc29sdXRlRXZlbnRCdXM7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZvcm0gPSB0aGlzLmluamVjdG9yLmdldDxGb3JtPihGb3JtLCBuZXcgRm9ybSgpKTtcclxuICAgIHRoaXMucmVwb3NpdG9yeSA9IHRoaXMuaW5qZWN0b3IuZ2V0KFJlcG9zaXRvcnksIHRoaXMuYXBwQ29udGV4dC5yZXBvc2l0b3J5KTtcclxuICAgIC8vIOiOt+WPluWPmOabtOmbhuetlueVpe+8jOm7mOiupOWPquaPkOS6pOWQiOazleeahOWPmOabtFxyXG4gICAgY29uc3QgY2hhbmdlU2V0UG9saWN5ID0gdGhpcy5pbmplY3Rvci5nZXQ8Q2hhbmdlU2V0UG9saWN5PihDSEFOR0VfU0VUX1BPTElDWV9UT0tFTiwgJ3ZhbGlkJyk7XHJcbiAgICBpZiAodGhpcy5yZXBvc2l0b3J5KSB7XHJcbiAgICAgIHRoaXMucmVwb3NpdG9yeS5lbnRpdHlDb2xsZWN0aW9uLmNoYW5nZVNldFBvbGljeSA9IGNoYW5nZVNldFBvbGljeTtcclxuICAgIH1cclxuICAgIHRoaXMuZW5hYmxlU2VydmVyU2lkZUNoYW5nZURldGVjdGlvbiA9IHRoaXMuaW5qZWN0b3IuZ2V0PGJvb2xlYW4+KEVOQUJMRV9TRVJWRVJfU0lERV9DSEFOR0VfREVURUNUSU9OX1RPS0VOLCBmYWxzZSk7XHJcbiAgICB0aGlzLnVpU3RhdGUgPSB0aGlzLmluamVjdG9yLmdldDxVSVN0YXRlPihVSVN0YXRlLCBuZXcgVUlTdGF0ZSgpKTtcclxuICAgIGNvbnN0IGRlZmF1bHRWaWV3TW9kZWwgPSBuZXcgVmlld01vZGVsKCk7XHJcbiAgICBkZWZhdWx0Vmlld01vZGVsLnNldE1ldGFkYXRhKHRoaXMubWV0YWRhdGEpO1xyXG4gICAgdGhpcy52aWV3TW9kZWwgPSB0aGlzLmluamVjdG9yLmdldDxWaWV3TW9kZWw+KFZpZXdNb2RlbCwgZGVmYXVsdFZpZXdNb2RlbCk7XHJcbiAgICB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlID0gaW5qZWN0b3IuZ2V0PFZhcmlhYmxlUGFyc2VTZXJ2aWNlPihWYXJpYWJsZVBhcnNlU2VydmljZSwgbmV3IFZhcmlhYmxlUGFyc2VTZXJ2aWNlKFtcclxuICAgICAgbmV3IEZyYW1lSWRWYXJpYWJsZVBhcnNlcigpLFxyXG4gICAgICBuZXcgRGF0YVZhcmlhYmxlUGFyc2VyKCksXHJcbiAgICAgIG5ldyBVSVN0YXRlVmFyaWFibGVQYXJzZXIoKSxcclxuICAgICAgbmV3IFN0YXRlTWFjaGluZVZhcmlhYmxlUGFyc2VyKCksXHJcbiAgICAgIG5ldyBDb21tYW5kVmFyaWFibGVQYXJzZXIoKVxyXG4gICAgXSkpO1xyXG4gICAgLy8g5rOo5YWlZXhjZXB0aW9uSGFuZGxlclxyXG4gICAgdGhpcy5leGNlcHRpb25IYW5kbGVyID0gaW5qZWN0b3IuZ2V0PElFeGNlcHRpb25IYW5kbGVyPihFWENFUFRJT05fSEFORExFUiwgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgLy8g5Yid5aeL5YyW5aSa6K+t5pyN5YqhXHJcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBpbmplY3Rvci5nZXQ8VHJhbnNsYXRlPihUcmFuc2xhdGVUb2tlbiwgbnVsbCk7XHJcbiAgICB0aGlzLnRyYW5zbGF0ZSA9IHRyYW5zbGF0ZTtcclxuICAgIFRyYW5zbGF0ZVNlcnZpY2Uuc2V0VHJhbnNsYXRlKHRyYW5zbGF0ZSk7XHJcbiAgICAvLyDliJ3lp4vljJbnlKjmiLfphY3nva5cclxuICAgIGNvbnN0IHVzZXJTZXR0aW5ncyA9IGluamVjdG9yLmdldDxVc2VyU2V0dGluZ3M+KFVzZXJTZXR0aW5nc1Rva2VuLCBudWxsKTtcclxuICAgIFVzZXJTZXR0aW5nc1NlcnZpY2Uuc2V0VXNlclNldHRpbmdzKHVzZXJTZXR0aW5ncyk7XHJcbiAgICB0aGlzLmluaXRpYWxpemVSZXBvc2l0b3J5KCk7XHJcbiAgICB0aGlzLmFwcENvbnRleHQucmVnRnJhbWVDb250ZXh0KHRoaXMpO1xyXG4gICAgdGhpcy5yZWdpc3RlckFwcENvbnRleHREZXN0cm95RXZlbnQoKTtcclxuICB9XHJcbiAgZGlzcG9zZShvcHRpb25zPzogYW55KTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuaXNEZXN0b3JpZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLmRlc3RvcnlTaWduYWwpIHtcclxuICAgICAgdGhpcy5kZXN0b3J5U2lnbmFsLm5leHQoKTtcclxuICAgICAgdGhpcy5kZXN0b3J5U2lnbmFsLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuYXBwQ29udGV4dC5mcmFtZUNvbnRleHRNYW5hZ2VyLnVucmVnRnJhbWVDb250ZXh0KHRoaXMpO1xyXG4gICAgICB0aGlzLmFwcENvbnRleHQuZnJhbWVDb21wb25lbnRSZWZyZXNoZXIudW5yZWdGcmFtZUNvbnRleHQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hcHBDb250ZXh0ICYmIHRoaXMuaXNSb290RnJhbWVDb250ZXh0KCkgPT09IHRydWUpIHtcclxuICAgICAgY29uc3Qgdmlld01vZGVsTmFtZXMgPSB0aGlzWyd2aWV3TW9kZWxOYW1lcyddO1xyXG4gICAgICBpZiAodmlld01vZGVsTmFtZXMgJiYgQXJyYXkuaXNBcnJheSh2aWV3TW9kZWxOYW1lcykpIHtcclxuICAgICAgICB2aWV3TW9kZWxOYW1lcy5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgdGhpc1tuYW1lXSA9IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5hcHBDb250ZXh0LnVucmVnaXN0ZXJGcm9tTWFuYWdlcigpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5kaXNwb3NlKCk7XHJcbiAgICAgIC8vIHRoaXMuYmluZGluZ0RhdGEgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudmlld01vZGVsKSB7XHJcbiAgICAgIHRoaXMudmlld01vZGVsLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZvcm0pIHtcclxuICAgICAgdGhpcy5mb3JtLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5mb3JtID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbW1hbmRCdXMpIHtcclxuICAgICAgdGhpcy5jb21tYW5kQnVzLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5jb21tYW5kQnVzID0gbnVsbDtcclxuICAgIH1cclxuICAgIFRyYW5zbGF0ZVNlcnZpY2UuZGlzcG9zZSgpO1xyXG4gICAgLy8gdGhpcy5yb290ID0gbnVsbDtcclxuICAgIC8vIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgIC8vIHRoaXMudWlTdGF0ZSA9IG51bGw7XHJcbiAgICB0aGlzLmZyYW1lQ29tcG9uZW50ID0gbnVsbDtcclxuICAgIHRoaXMucmVwb3NpdG9yeSA9IG51bGw7XHJcbiAgICAvLyB0aGlzLnN0YXRlTWFjaGluZSA9IG51bGw7XHJcbiAgICAvLyB0aGlzLmFwcENvbnRleHQgPSBudWxsO1xyXG4gICAgdGhpcy5leGNlcHRpb25IYW5kbGVyID0gbnVsbDtcclxuICAgIHRoaXMuZXhwcmVzc2lvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5leHByZXNzaW9uRW5naW5lSW1wbCA9IG51bGw7XHJcbiAgICB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIHRoaXMuZXZlbnRCdXMgPSBudWxsO1xyXG4gICAgdGhpcy50cmFuc2xhdGUgPSBudWxsO1xyXG4gICAgdGhpcy5pbmplY3RvciA9IG51bGw7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZXN1bHQgPSBudWxsO1xyXG4gICAgVXNlclNldHRpbmdzU2VydmljZS5zZXRVc2VyU2V0dGluZ3MobnVsbCk7XHJcbiAgfVxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlKCk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmAmui/h+e7hOS7tuagh+ivhuiOt+WPluWvueW6lOeahOe7hOS7tuWunuS+i1xyXG4gICAqIEBwYXJhbSBpZCDnu4Tku7bmoIfor4ZcclxuICAgKiBAcmV0dXJucyBcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q29tcG9uZW50QnlJZDxUPihpZDogc3RyaW5nKTogVCB7XHJcbiAgICBjb25zdCBjb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRSZWZNYW5hZ2VyLmdldChpZCk7XHJcbiAgICBpZiAoY29tcG9uZW50cyAmJiBjb21wb25lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50c1swXSBhcyBUO1xyXG4gICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaMh+Wumuagh+ivhueahOaJgOaciee7hOS7tlxyXG4gICAqIEBwYXJhbSBpZCDnu4Tku7bmoIfor4ZcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q29tcG9uZW50c0J5SWQ8VD4oaWQ6IHN0cmluZyk6IFRbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRSZWZNYW5hZ2VyLmdldChpZCkgYXMgVFtdO1xyXG4gIH1cclxuICBiaW5kSW5qZWN0b3IoY29tcG9uZW50SW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICB0aGlzLmluamVjdG9yID0gY29tcG9uZW50SW5qZWN0b3I7XHJcbiAgfVxyXG5cclxuICAvLyAjcmVnaW9uIOWIneWni+WMllxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZcclxuICAgKiBAdG9kbzpcclxuICAgKiAx44CBQ29tbWFuZEhhbmRsZXLkuK3nmoTmnI3liqHlj6/og73kvJrms6jlhaVDb250ZXh077yM5omA5LulQ29tbWFuZEhhbmRsZXLliJvlu7rml7blv4Xpobvlt7Lnu4/lrZjlnKhDb21wb25lbnRDb250ZXh0XHJcbiAgICogMuOAgVZpZXdNb2RlbOeahGJ1aWxkQ29tbWFuZHPkuK3kvJrkvb/nlKhDb21tYW5kQnVz77yM5Li65LqG5L+d6K+B6aG65bqP77yM5bCGVmlld01vZGVs55qE5Yib5bu65Lmf5pS+5ZyoaW5pdOS4reOAglxyXG4gICAqL1xyXG4gIHB1YmxpYyBpbml0KGZyYW1lQ29tcG9uZW50OiBGcmFtZUNvbXBvbmVudCkge1xyXG4gICAgdGhpcy5mcmFtZUNvbXBvbmVudCA9IGZyYW1lQ29tcG9uZW50O1xyXG4gICAgdGhpcy5pbml0aWFsaXplQmluZGluZ0RhdGEoKTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlTWFjaGluZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplVWlTdGF0ZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplRm9ybSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplQ29tbWFuZEJ1cygpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplVmlld01vZGVsKCk7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRXhjZXB0aW9uSGFuZGxlcigpO1xyXG4gICAgdGhpcy5pbml0RXhwcmVzc2lvbigpO1xyXG4gICAgdGhpcy5hcHBDb250ZXh0LmZyYW1lQ29tcG9uZW50UmVmcmVzaGVyLnJlZ0ZyYW1lQ29tcG9uZW50KHRoaXMuZnJhbWVJZCwgdGhpcy5mcmFtZUNvbXBvbmVudCk7XHJcbiAgfVxyXG4gIHB1YmxpYyBpbml0RXhwcmVzc2lvbigpIHtcclxuICAgIHRoaXMuZXhwcmVzc2lvbkVuZ2luZUltcGwgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uRW5naW5lSW1wbD4oRXhwcmVzc2lvbkVuZ2luZUltcGwsIG51bGwpO1xyXG4gICAgdGhpcy5leHByZXNzaW9uTWFuYWdlciA9IHRoaXMuaW5qZWN0b3IuZ2V0PEV4cHJlc3Npb25NYW5hZ2VyPihFeHByZXNzaW9uTWFuYWdlciwgbnVsbCk7XHJcbiAgICBjb25zdCBleHByZXNzaW9uUmVzdWx0RmFjdG9yeSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEV4cHJlc3Npb25SZXN1bHRGYWN0b3J5PihFeHByZXNzaW9uUmVzdWx0RmFjdG9yeSwgbnVsbCk7XHJcbiAgICB0aGlzLmV4cHJlc3Npb25SZXN1bHQgPSB0aGlzLmluamVjdG9yLmdldDxFeHByZXNzaW9uUmVzdWx0PihFeHByZXNzaW9uUmVzdWx0LCBudWxsKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6K6i6ZiF5byC5bi45raI5oGvXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHJlZ2lzdGVyRXhjZXB0aW9uSGFuZGxlcigpIHtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlOiBuby1zdHJpbmctbGl0ZXJhbFxyXG4gICAgY29uc3QgZm9ybUFwcENvbnRleHQgPSB0aGlzLmdldEZvcm1BcHBDb250ZXh0KCk7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvbklkID0gZm9ybUFwcENvbnRleHQuQXBwbGljYXRpb25JZDtcclxuICAgIHdpbmRvd1t3aW5kb3cubG9jYXRpb24uaHJlZl0gPSBhcHBsaWNhdGlvbklkO1xyXG4gICAgaWYgKHRoaXMuZXhjZXB0aW9uSGFuZGxlciAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBhcHBsaWNhdGlvbkNvbnRleHQgPSB3aW5kb3dbYXBwbGljYXRpb25JZF0gPSB3aW5kb3dbYXBwbGljYXRpb25JZF0gfHwge307XHJcbiAgICAgIGlmICh0aGlzLmV2ZW50QnVzICE9PSBudWxsICYmIHRoaXMuaXNSb290RnJhbWVDb250ZXh0KCkpIHtcclxuICAgICAgICBhcHBsaWNhdGlvbkNvbnRleHQuaXNFeGNlcHRpb25IYW5kbGVyRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlci5zZXRDb250ZXh0KHRoaXMuYXBwQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignRXhjZXB0aW9uJywgJycsICdvbkV4Y2VwdGlvbicsIGZvcm1BcHBDb250ZXh0LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLmlzRGVzdG9yaWVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5lcnJvcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGVycm9yLmVycm9yLl9fZnJhbWVfY29udGV4dF9fID0gdGhpcztcclxuICAgICAgICAgICAgfSBjYXRjaCB7IH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZXhjZXB0aW9uSGFuZGxlci5oYW5kbGUoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGVzdG9yeVNpZ25hbC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub2ZmKCdFeGNlcHRpb24nLCAnJywgJ29uRXhjZXB0aW9uJywgZm9ybUFwcENvbnRleHQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcHJvdGVjdGVkIHJlZ2lzdGVyQXBwQ29udGV4dERlc3Ryb3lFdmVudCgpIHtcclxuICAgIGlmICh0aGlzLmFwcENvbnRleHQgJiYgdGhpcy5hcHBDb250ZXh0LmRlc3RvcnlTaWduYWwpIHtcclxuICAgICAgdGhpcy5hcHBDb250ZXh0LmRlc3RvcnlTaWduYWwuc3Vic2NyaWJlKChvcHRpb25zOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZU1hY2hpbmUpIHtcclxuICAgICAgICAgIC8vIOS7heW9k+iPnOWNleWFs+mXreaXtumUgOavgVxyXG4gICAgICAgICAgaWYgKCEob3B0aW9ucyAmJiBvcHRpb25zLm9wcG9ydHVuaXR5ID09PSBEZXN0cm95T3Bwb3J0dW5pdHkuQXBwQ29udGV4dERlc3Ryb3kpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVNYWNoaW5lLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZU1hY2hpbmUgPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICB0aGlzLnJlcG9zaXRvcnkuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluihqOWNlWFwcGNvbnRleHTvvIzljbPmnIDkuIrlsYJhcHBjb250ZXh0XHJcbiAgICovXHJcbiAgcHVibGljIGdldEZvcm1BcHBDb250ZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYXBwQ29udGV4dDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+WZnJhbWVJZFxyXG4gICAqIEBkZXNjcmlwdGlvbiDojrflj5blrozmlbTnmoRGcmFtZUlk77yM5Zyo6Z2e5pmu6YCa6KGo5Y2V5Lit6K+l5YC8562J5LqOZnJhbWVJZO+8jOWcqOe7hOWQiOihqOWNleS4reivpeWAvOS4um5hbWVzcGFjZV9mcmFtZUlkXHJcbiAgICovXHJcbiAgcHVibGljIGdldEZyYW1lSWQocmVsYXRpdmVGcmFtZUlkOiBzdHJpbmcpIHtcclxuICAgIGlmICghcmVsYXRpdmVGcmFtZUlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZyYW1lSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5uYW1lc3BhY2UgJiYgdGhpcy5uYW1lc3BhY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXR1cm4gYCR7dGhpcy5uYW1lc3BhY2V9XyR7cmVsYXRpdmVGcmFtZUlkfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVsYXRpdmVGcmFtZUlkO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZSZXBvc2l0b3J5XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplUmVwb3NpdG9yeSgpIHtcclxuXHJcbiAgICB0aGlzLnJlcG9zaXRvcnkuc2V0UGFnaW5hdGlvbkNvbmZpZyh0aGlzLnJlcG9zaXRvcnkucGFnaW5hdGlvbkluZm8pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplRm9ybSgpIHtcclxuICAgIC8vIOiuvue9rkZvcm3or63oqIDmnI3liqFcclxuICAgIC8vIHRoaXMuZm9ybS5zZXRUcmFuc2xhdGVTZXJ2aWNlKHRyYW5zbGF0ZVNlcnZpY2UpO1xyXG4gICAgLy8g5Yid5aeL5YyWRm9ybe+8jOaPkOWPlkZvcm1Db250cm9s5a6a5LmJ77yM5re75YqgRm9ybUNvbnRyb2xcclxuICAgIC8vIHRoaXMuZm9ybS5pbml0KHRoaXMuYmluZGluZ0RhdGEsIHRoaXMubWV0YWRhdGEuYmluZGluZ1RvLCB0aGlzKTtcclxuICAgIC8vIEZvcm1cclxuICAgIHRoaXMuZm9ybSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEZvcm0+KEZvcm0sIG51bGwpO1xyXG4gICAgaWYgKHRoaXMuZm9ybSkge1xyXG4gICAgICAvLyDorr7nva5Gb3Jt6K+t6KiA5pyN5YqhXHJcbiAgICAgIHRoaXMuZm9ybS5zZXRUcmFuc2xhdGVTZXJ2aWNlKHRoaXMuaW5qZWN0b3IuZ2V0KFRyYW5zbGF0ZVRva2VuLCBudWxsKSk7XHJcbiAgICAgIC8vIOWIneWni+WMlkZvcm3vvIzmj5Dlj5ZGb3JtQ29udHJvbOWumuS5ie+8jOa3u+WKoEZvcm1Db250cm9sXHJcbiAgICAgIGNvbnN0IGJpbmRpbmdQYXRoID0gdGhpcy52aWV3TW9kZWwuYmluZGluZ1BhdGggfHwgdGhpcy5tZXRhZGF0YS5iaW5kaW5nVG87XHJcbiAgICAgIHRoaXMuZm9ybS5pbml0KHRoaXMuYmluZGluZ0RhdGEsIGJpbmRpbmdQYXRoLCB0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXRlTWFjaGluZSgpIHtcclxuICAgIC8vIFN0YXRlTWFjaGluZSDnirbmgIHmnLrpnIDopoHlnKjnu5HlrprmlbDmja7kuYvlkI7liqDovb1cclxuICAgIHRoaXMuc3RhdGVNYWNoaW5lID0gdGhpcy5pbmplY3Rvci5nZXQ8U3RhdGVNYWNoaW5lPihTdGF0ZU1hY2hpbmUsIG51bGwpO1xyXG4gICAgaWYgKHRoaXMuc3RhdGVNYWNoaW5lKSB7XHJcbiAgICAgIHRoaXMuc3RhdGVNYWNoaW5lLmluaXRpYWxpemUodGhpcywgdGhpcy52YXJpYWJsZVBhcnNlU2VydmljZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRpYWxpemVDb21tYW5kQnVzKCkge1xyXG4gICAgY29uc3QgaGFuZGxlclJlZ2lzdHJ5ID0gdGhpcy5pbmplY3Rvci5nZXQ8Q29tbWFuZEhhbmRsZXJSZWdpc3RyeT4oQ29tbWFuZEhhbmRsZXJSZWdpc3RyeSxcclxuICAgICAgbmV3IENvbW1hbmRIYW5kbGVyUmVnaXN0cnkodGhpcy5tZXRhZGF0YS5jb21tYW5kSGFuZGxlcnMpKTtcclxuICAgIGNvbnN0IGV4dGVuZHNSZWdpc3RyeSA9IHRoaXMuaW5qZWN0b3IuZ2V0PENvbW1hbmRIYW5kbGVyRXh0ZW5kZXJSZWdpc3RyeT4oQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5LFxyXG4gICAgICBuZXcgQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5KHRoaXMubWV0YWRhdGEuY29tbWFuZEhhbmRsZXJFeHRlbmRzKSk7XHJcbiAgICBjb25zdCBjb21tYW5kSGFuZGxlckZhY3RvcnkgPSBuZXcgQ29tbWFuZEhhbmRsZXJGYWN0b3J5KGhhbmRsZXJSZWdpc3RyeSwgZXh0ZW5kc1JlZ2lzdHJ5LCB0aGlzLCB0aGlzLnZhcmlhYmxlUGFyc2VTZXJ2aWNlKTtcclxuICAgIHRoaXMuY29tbWFuZEJ1cyA9IG5ldyBDb21tYW5kQnVzKGNvbW1hbmRIYW5kbGVyRmFjdG9yeSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJ3lp4vljJZWaWV3TW9kZWxcclxuICAgKiBAdG9kb1xyXG4gICAqIDHjgIHpnIDopoHmjInnhafkuIDlrprnmoTpobrluo/ov5vooYzliJ3lp4vljJbvvIzlkKbliJnkvp3otZbml6Dms5XmraPnoa7lpITnkIbvvJtcclxuICAgKiAy44CB5pqC5pe25L2/55SoaW5pdOino+WGs0NvbnRleHTlkozlhbbku5bpg6jliIbnmoTlvqrnjq/kvp3otZbpl67popjvvIzlvoXkvJjljJbvvJtcclxuICAgKi9cclxuICBwcml2YXRlIGluaXRpYWxpemVWaWV3TW9kZWwoKSB7XHJcbiAgICBpZiAoIXRoaXMubWV0YWRhdGEuYmluZGluZ1RvKSB7XHJcbiAgICAgIHRoaXMubWV0YWRhdGEuYmluZGluZ1RvID0gdGhpcy52aWV3TW9kZWwuYmluZGluZ1BhdGg7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpZXdNb2RlbC5pbml0KHRoaXMpO1xyXG4gICAgdGhpcy5yZWdWaWV3TW9kZWwodGhpcy52aWV3TW9kZWwpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMlkJpbmRpbmdEYXRhXHJcbiAgICogQHN1bW1hcnlcclxuICAgKiDogIHooajljZXvvJpyZXBvc2l0b3J5TmFtZeS4uuepuu+8jOWkjeWItuW9k+WJjVJlcG9zaXRvcnnph4znmoTmlbDmja7vvJtcclxuICAgKiDmlrDooajljZXvvJpyZXBvc2l0b3J5TmFtZeacieWAvO+8jOW8leeUqOWFqOWxgEJpbmRpbmdEYXRh6YeM55qE5pWw5o2u77ybXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplQmluZGluZ0RhdGEoKSB7XHJcbiAgICBjb25zdCByZXBvc2l0b3J5TmFtZSA9IHRoaXMucmVwb3NpdG9yeS5uYW1lO1xyXG4gICAgY29uc3QgaXNSdW5BdEhpZ2hTcGVlZE1vZGUgPSB0aGlzLmFwcENvbnRleHQucnVuTW9kZSA9PT0gUnVuTW9kZS5oaWdoU3BlZWQ7XHJcbiAgICBpZiAocmVwb3NpdG9yeU5hbWUgJiYgaXNSdW5BdEhpZ2hTcGVlZE1vZGUpIHtcclxuICAgICAgY29uc3QgcmVwb3NpdG9yeUJpbmRpbmdEYXRhID0gdGhpcy5hcHBDb250ZXh0LmJpbmRpbmdEYXRhTWFuYWdlci5nZXRCaW5kaW5nRGF0YUJ5TmFtZShyZXBvc2l0b3J5TmFtZSk7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuaW5pdEJ5QmluZGluZ0xpc3QocmVwb3NpdG9yeUJpbmRpbmdEYXRhLmxpc3QsIHRoaXMudmlld01vZGVsLmJpbmRpbmdQYXRoKTtcclxuICAgICAgdGhpcy5iaW5kaW5nRGF0YS5wYWdpbmdJbmZvID0gcmVwb3NpdG9yeUJpbmRpbmdEYXRhLnBhZ2luZ0luZm87XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuc2V0RGF0YVR5cGVJbmZvKHRoaXMucmVwb3NpdG9yeS5lbnRpdHlUeXBlSW5mbyk7XHJcbiAgICAgIEVudGl0eVV0aWwud2F0Y2hSZXBvc2lyb3R5KHRoaXMucmVwb3NpdG9yeSwgdGhpcy5iaW5kaW5nRGF0YSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJpbmRpbmdEYXRhLmluaXRCeVJlcG9zaXRvcnkodGhpcy5yZXBvc2l0b3J5LCB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nUGF0aCk7XHJcbiAgICAgIEVudGl0eVV0aWwud2F0Y2hSZXBvc2lyb3R5KHRoaXMucmVwb3NpdG9yeSwgdGhpcy5iaW5kaW5nRGF0YSk7XHJcbiAgICAgIHRoaXMuYmluZGluZ0RhdGEuY2hhbmdlcy5zdWJzY3JpYmUoKGNoYW5nZTogQ2hhbmdlKSA9PiB7XHJcbiAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkdsb2JhbFNlbGVjdGlvbkNoYW5nZWQpIHtcclxuICAgICAgICAgIHRoaXMuYXBwQ29udGV4dC5oYW5kbGVTZWxlY3RDaGFuZ2UoY2hhbmdlLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMllVJU3RhdGVcclxuICAgKiDlkIjlubbot6/nlLHlj4LmlbDliLBVSVN0YXRl5LitXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplVWlTdGF0ZSgpIHtcclxuICAgIGNvbnN0IGlzSW5GcmFtZXdvcmsgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdwbGF0Zm9ybScpID4gLTE7XHJcbiAgICBjb25zdCBwYXJhbVR5cGVUcmFuc2Zvcm0gPSB0aGlzLmluamVjdG9yLmdldDxib29sZWFuPihQQVJBTV9UWVBFX1RSQU5TRk9STV9UT0tFTiwgZmFsc2UpO1xyXG4gICAgLy8g6I635Y+WVUlTdGF0ZVxyXG4gICAgdGhpcy51aVN0YXRlID0gdGhpcy5pbmplY3Rvci5nZXQ8VUlTdGF0ZT4oVUlTdGF0ZSwgbnVsbCk7XHJcbiAgICBpZiAoIXRoaXMudWlTdGF0ZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnVpU3RhdGUucGFyYW1UeXBlVHJhbnNmb3JtID0gcGFyYW1UeXBlVHJhbnNmb3JtO1xyXG4gICAgdGhpcy51aVN0YXRlLmluaXRpYWxpemUodGhpcyk7XHJcbiAgICAvLyDojrflj5bot6/nlLHlj4LmlbBcclxuICAgIGNvbnN0IHVybCA9ICh0aGlzLmFwcENvbnRleHQgJiYgdGhpcy5hcHBDb250ZXh0LnJvdXRlciAmJiB0aGlzLmFwcENvbnRleHQucm91dGVyLnVybCkgfHwgJyc7XHJcbiAgICBjb25zdCByb3V0ZXJQYXJhbVNlcnZpY2UgPSBuZXcgUm91dGVyUGFyYW1TZXJ2aWNlKCk7XHJcbiAgICBjb25zdCByb3V0ZXJQYXJhbXMgPSByb3V0ZXJQYXJhbVNlcnZpY2UuZ2V0UGFyYW1zKHVybCk7XHJcblxyXG4gICAgLy8g5ZyoVUlTdGF0ZeS4uui3r+eUseWPguaVsOWIm+W7uuWxnuaAp1xyXG4gICAgT2JqZWN0LmtleXMocm91dGVyUGFyYW1zKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLnVpU3RhdGUsIHByb3BOYW1lLCB7XHJcbiAgICAgICAgZ2V0OiAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gcm91dGVyUGFyYW1zW3Byb3BOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDms6jlhozlrZBWaWV3TW9kZWxcclxuICAgKiBAdG9kb1xyXG4gICAqIDHjgIFwcm9wTmFtZeWGmeatu+S6hlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWdWaWV3TW9kZWwodmlld01vZGVsOiBWaWV3TW9kZWwpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmFwcENvbnRleHQgJiYgdGhpcy5hcHBDb250ZXh0LnZpZXdNb2RlbE1hbmFnZXIuZXhzaXQodmlld01vZGVsLm5hbWUpID09PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLmFwcENvbnRleHQudmlld01vZGVsTWFuYWdlci5yZWdpc3Rlcih2aWV3TW9kZWwubmFtZSwgdmlld01vZGVsKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHZpZXdNb2RlbC5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgY29uc3QgcGFyZW50Q29udGV4dCA9IHRoaXMucGFyZW50O1xyXG4gICAgbGV0IHBhcmVudFZpZXdNb2RlbCA9IG51bGw7XHJcbiAgICBpZiAocGFyZW50Q29udGV4dCAmJiBwYXJlbnRDb250ZXh0LnZpZXdNb2RlbCkge1xyXG4gICAgICBwYXJlbnRWaWV3TW9kZWwgPSBwYXJlbnRDb250ZXh0LnZpZXdNb2RlbDtcclxuICAgIH1cclxuICAgIGlmICghcGFyZW50Vmlld01vZGVsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIOS8mOWFiOS9v+eUqOeUn+aIkOWZqOeUn+aIkOeahG5hbWVcclxuICAgIGNvbnN0IGNoaWxkVmlld01vZGVscyA9IHBhcmVudFZpZXdNb2RlbFsnY2hpbGRWaWV3TW9kZWxzJ107XHJcbiAgICBsZXQgdmlld01vZGVsTmFtZSA9IG51bGw7XHJcbiAgICBpZiAoY2hpbGRWaWV3TW9kZWxzKSB7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSB2aWV3TW9kZWwuY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgdmlld01vZGVsTmFtZSA9IGNoaWxkVmlld01vZGVsc1t2aWV3TW9kZWwubmFtZV0gfHwgY2hpbGRWaWV3TW9kZWxzW25hbWVdO1xyXG4gICAgfSBlbHNlIGlmIChjbGFzc05hbWUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZVRva2VucyA9IHZpZXdNb2RlbC5uYW1lLnNwbGl0KCctJykubWFwKChuYW1lVG9rZW4sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBuYW1lVG9rZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXNpY2FsTmFtZSA9IG5hbWVUb2tlbi5jaGFyQXQoMCkudG9Mb2NhbGVVcHBlckNhc2UoKSArIG5hbWVUb2tlbi5zdWJzdHIoMSwgbmFtZVRva2VuLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgcmV0dXJuIHBhc2ljYWxOYW1lO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IDAgJiYgbmFtZVRva2VuLmxlbmd0aCkge1xyXG4gICAgICAgICAgY29uc3QgY2FtZWxOYW1lID0gbmFtZVRva2VuLmNoYXJBdCgwKS50b0xvY2FsZUxvd2VyQ2FzZSgpICsgbmFtZVRva2VuLnN1YnN0cigxLCBuYW1lVG9rZW4ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICByZXR1cm4gY2FtZWxOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmFtZVRva2VuO1xyXG4gICAgICB9KTtcclxuICAgICAgdmlld01vZGVsTmFtZSA9IGNsYXNzTmFtZVRva2Vucy5qb2luKCcnKTtcclxuICAgIH0gZWxzZSBpZiAodmlld01vZGVsW1wicmVsYXRlQ2hpbGROYW1lXCJdKSB7XHJcbiAgICAgIC8vIOWinuWKoOivpeWPguaVsOeahOebrueahCAg5piv5Li65LqG6Kej5p6Q6KGo5Y2V5Y+v5Lul6L+b6KGM5ZKM55Sf5oiQ5Z6L55u45ZCM55qE5bGC57qn57uT5p6EXHJcbiAgICAgIHZpZXdNb2RlbE5hbWUgPSB2aWV3TW9kZWxbXCJyZWxhdGVDaGlsZE5hbWVcIl07XHJcbiAgICB9XHJcbiAgICAvLyDlhbzlrrnkuqflk4Hpg6jogIHooajljZXnmoTlhpnms5XvvIzlpoLmnpzpnIDopoF2bSBuYW1l57uf5LiA77yM5bqU5oyJ54Wn5q2k6KeE5YiZXHJcbiAgICBpZiAoIXZpZXdNb2RlbE5hbWUpIHtcclxuICAgICAgdmlld01vZGVsTmFtZSA9IGNsYXNzTmFtZVswXS50b0xvd2VyQ2FzZSgpICsgY2xhc3NOYW1lLnN1YnN0cmluZygxLCBjbGFzc05hbWUubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIHBhcmVudFZpZXdNb2RlbFsndmlld01vZGVsTmFtZXMnXSA9IHBhcmVudFZpZXdNb2RlbFsndmlld01vZGVsTmFtZXMnXSB8fCBbXTtcclxuICAgIHBhcmVudFZpZXdNb2RlbFt2aWV3TW9kZWxOYW1lXSA9IHZpZXdNb2RlbDtcclxuICAgIHBhcmVudFZpZXdNb2RlbFsndmlld01vZGVsTmFtZXMnXS5wdXNoKHZpZXdNb2RlbE5hbWUpO1xyXG4gICAgdmlld01vZGVsLmJpbmRUb1BhcmVudChwYXJlbnRWaWV3TW9kZWwpO1xyXG4gIH1cclxuXHJcbiAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbkuLrmoLlGcmFtZUNvbnRleHRcclxuICAgKiBAc3VtbWFyeVxyXG4gICAqIOajgOafpeivpUZyYW1lQ29udGV4dOaYr+S4jeaYr+aJgOWcqEFwcENvbnRleHTkuK3nmoTmoLlGcmFtZUNvbnRleHRcclxuICAgKi9cclxuICBwdWJsaWMgaXNSb290RnJhbWVDb250ZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFyZW50ID09PSBudWxsIHx8ICh0aGlzLmFwcENvbnRleHQucnVuTW9kZSA9PT0gUnVuTW9kZS5oaWdoU3BlZWQgJiYgdGhpcy5nZXRWaXJ0dWFsUm9vdEZyYW1lQ29udGV4dCgpLmZyYW1lQ29tcG9uZW50Wydpc0RpYWxvZ1Jvb3RDb21wb25lbnQnXSA9PT0gdHJ1ZSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmAmui/h25hbWVzcGFjZeiOt+WPluW9k+WJjeihqOWNleeahHJvb3QtZnJhbWVjb250ZXh0KOmdnuaVtOS4quihqOWNlSlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiDlpoLmnpzkuLrnu4TlkIjooajljZXvvIzlhbblvZPliY3ooajljZXnmoRyb290LWZyYW1lY29udGV4dOS4uuWNleS4quihqOWNleeahGZyYW1lY29udGV4dO+8jOiAjOmdnuaVtOS4quihqOWNleeahGZyYW1lY29udGV4dFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRWaXJ0dWFsUm9vdEZyYW1lQ29udGV4dCgpIHtcclxuICAgIGxldCBmb3JtRnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQgPSB0aGlzO1xyXG4gICAgbGV0IHBhcmVudCA9IHRoaXMucGFyZW50O1xyXG4gICAgd2hpbGUgKHBhcmVudCkge1xyXG4gICAgICAvLyDlhbzlrrnmsqHmnInph43mlrDnvJbor5HnmoTooajljZXvvIzlpoLmnpzliKTmlq1wYXJlbnQubmFtZXNwYWNl5a2Y5Zyo5Lya5a+86Ie06I635Y+W5LiN5Yiwcm9vdC1mcmFtZWNvbnRleHRcclxuICAgICAgaWYgKHBhcmVudC5uYW1lc3BhY2UgPT09IHRoaXMubmFtZXNwYWNlKSB7XHJcbiAgICAgICAgZm9ybUZyYW1lQ29udGV4dCA9IHBhcmVudDtcclxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybUZyYW1lQ29udGV4dDtcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgZ2V0Q29udGV4dEJ5SWQoaWRlbnRpZnk6IHN0cmluZyk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5hcHBDb250ZXh0LmdldENvbnRleHRCeUlkKGlkZW50aWZ5KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRWaWV3TW9kZWwodmlld01vZGVsTmFtZTogc3RyaW5nKTogVmlld01vZGVsIHtcclxuICAgIGNvbnN0IHJlbmRlckFwcENvbnRleHQgPSB0aGlzLmFwcENvbnRleHQ7XHJcbiAgICBpZiAocmVuZGVyQXBwQ29udGV4dCkge1xyXG4gICAgICByZXR1cm4gcmVuZGVyQXBwQ29udGV4dC52aWV3TW9kZWxNYW5hZ2VyLmdldFZpZXdNb2RlbEJ5TmFtZSh2aWV3TW9kZWxOYW1lKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGF0dGFjaFZpZXdDb21wb25lbnQodmlld0NvbXBvbmVudDogRnJhbWVDb21wb25lbnQpIHtcclxuICAgIHRoaXMuZnJhbWVDb21wb25lbnQgPSB2aWV3Q29tcG9uZW50O1xyXG4gICAgdGhpcy5hcHBDb250ZXh0LmZyYW1lQ29tcG9uZW50UmVmcmVzaGVyLnJlZ0ZyYW1lQ29tcG9uZW50KHRoaXMuZnJhbWVJZCwgdGhpcy5mcmFtZUNvbXBvbmVudCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaW52b2tlKGFjdGlvblBhdGg6IHN0cmluZywgJGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IGFjdGlvbkJpbmRpbmdQYXRoID0gYWN0aW9uUGF0aC5zcGxpdCgnLicpO1xyXG4gICAgY29uc3QgYWN0aW9uTmFtZSA9IGFjdGlvbkJpbmRpbmdQYXRoW2FjdGlvbkJpbmRpbmdQYXRoLmxlbmd0aCAtIDFdO1xyXG4gICAgY29uc3QgYmluZGluZ1ZpZXdNb2RlbCA9IGFjdGlvbkJpbmRpbmdQYXRoLmxlbmd0aCA9PT0gMSA/IHRoaXMudmlld01vZGVsIDpcclxuICAgICAgdGhpcy5nZXRWaWV3TW9kZWwoYWN0aW9uQmluZGluZ1BhdGhbYWN0aW9uQmluZGluZ1BhdGgubGVuZ3RoIC0gMl0pO1xyXG4gICAgaWYgKCFiaW5kaW5nVmlld01vZGVsKSB7XHJcbiAgICAgIGFsZXJ0KGDmnKrljLnphY3liLAnJHthY3Rpb25QYXRofSflkb3ku6TnmoTop4blm77mqKHlnovvvIzor7fmo4Dmn6Xkuovku7bmmK/lkKbphY3nva7mraPnoa7jgIJgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBiaW5kaW5nVmlld01vZGVsW2FjdGlvbk5hbWVdKCRldmVudCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==