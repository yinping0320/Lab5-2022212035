import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { filter } from 'rxjs/operators';
/**
 * 框架事件总线
 */
var FrameEventBus = /** @class */ (function () {
    function FrameEventBus() {
        /**
         * 事件流
         */
        this.events = new Subject();
    }
    /**
     * 注册事件处理
     */
    FrameEventBus.prototype.on = function (eventType, eventHandler, frameId) {
        this.events.pipe(filter(function (event) {
            if (event.type !== eventType) {
                return false;
            }
            return !event.frameIds || event.frameIds.indexOf(frameId) > -1;
        })).subscribe(eventHandler);
    };
    /**
     * 取消事件处理
     */
    FrameEventBus.prototype.off = function (eventType, frameId) {
        throw new Error('暂不实现');
    };
    /**
     * 触发事件
     */
    FrameEventBus.prototype.trigger = function (eventType, eventData, frameIds) {
        var event = {
            type: eventType,
            data: eventData,
            frameIds: frameIds
        };
        this.events.next(event);
    };
    FrameEventBus.decorators = [
        { type: Injectable }
    ];
    return FrameEventBus;
}());
export { FrameEventBus };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVfZXZlbnRfYnVzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvZnJhbWUvZnJhbWVfZXZlbnRfYnVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFJeEM7O0dBRUc7QUFDSDtJQUFBO1FBUUU7O1dBRUc7UUFDSSxXQUFNLEdBQXdCLElBQUksT0FBTyxFQUFjLENBQUM7SUFpQ2pFLENBQUM7SUE5QkM7O09BRUc7SUFDSCwwQkFBRSxHQUFGLFVBQUcsU0FBaUIsRUFBRSxZQUFpQixFQUFFLE9BQWU7UUFDdEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsS0FBaUI7WUFDeEMsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBRTtnQkFDNUIsT0FBTyxLQUFLLENBQUM7YUFDZDtZQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILDJCQUFHLEdBQUgsVUFBSSxTQUFpQixFQUFFLE9BQWU7UUFDcEMsTUFBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7O09BRUc7SUFDSCwrQkFBTyxHQUFQLFVBQVEsU0FBaUIsRUFBRSxTQUFlLEVBQUUsUUFBbUI7UUFDN0QsSUFBTSxLQUFLLEdBQWU7WUFDeEIsSUFBSSxFQUFFLFNBQVM7WUFDZixJQUFJLEVBQUUsU0FBUztZQUNmLFFBQVEsRUFBRSxRQUFRO1NBQ25CLENBQUM7UUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDOztnQkEzQ0YsVUFBVTs7SUE0Q1gsb0JBQUM7Q0FBQSxBQTVDRCxJQTRDQztBQUVELE9BQU8sRUFBRSxhQUFhLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IEZyYW1lRXZlbnQgfSBmcm9tICcuL2ZyYW1lX2V2ZW50JztcclxuXHJcblxyXG4vKipcclxuICog5qGG5p625LqL5Lu25oC757q/XHJcbiAqL1xyXG5ASW5qZWN0YWJsZSgpXHJcbmNsYXNzIEZyYW1lRXZlbnRCdXMge1xyXG5cclxuICAvKipcclxuICAgKiBAdG9kbyDmmoLkuI3lrp7njrDlr7norqLpmIXnmoTms6jplIBcclxuICAgKi9cclxuICBwcml2YXRlIHN1YnNjcmlwdGlvbnM6IGFueTtcclxuXHJcbiAgLyoqXHJcbiAgICog5LqL5Lu25rWBXHJcbiAgICovXHJcbiAgcHVibGljIGV2ZW50czogU3ViamVjdDxGcmFtZUV2ZW50PiA9IG5ldyBTdWJqZWN0PEZyYW1lRXZlbnQ+KCk7XHJcblxyXG5cclxuICAvKipcclxuICAgKiDms6jlhozkuovku7blpITnkIZcclxuICAgKi9cclxuICBvbihldmVudFR5cGU6IHN0cmluZywgZXZlbnRIYW5kbGVyOiBhbnksIGZyYW1lSWQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5ldmVudHMucGlwZShmaWx0ZXIoKGV2ZW50OiBGcmFtZUV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50eXBlICE9PSBldmVudFR5cGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICFldmVudC5mcmFtZUlkcyB8fCBldmVudC5mcmFtZUlkcy5pbmRleE9mKGZyYW1lSWQpID4gLTE7XHJcbiAgICB9KSkuc3Vic2NyaWJlKGV2ZW50SGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlj5bmtojkuovku7blpITnkIZcclxuICAgKi9cclxuICBvZmYoZXZlbnRUeXBlOiBzdHJpbmcsIGZyYW1lSWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCfmmoLkuI3lrp7njrAnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOinpuWPkeS6i+S7tlxyXG4gICAqL1xyXG4gIHRyaWdnZXIoZXZlbnRUeXBlOiBzdHJpbmcsIGV2ZW50RGF0YT86IGFueSwgZnJhbWVJZHM/OiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgZXZlbnQ6IEZyYW1lRXZlbnQgPSB7XHJcbiAgICAgIHR5cGU6IGV2ZW50VHlwZSxcclxuICAgICAgZGF0YTogZXZlbnREYXRhLFxyXG4gICAgICBmcmFtZUlkczogZnJhbWVJZHNcclxuICAgIH07XHJcbiAgICB0aGlzLmV2ZW50cy5uZXh0KGV2ZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEZyYW1lRXZlbnRCdXMgfTtcclxuIl19