import { CacheObject } from "./cache_object";
var CacheContainer = /** @class */ (function () {
    function CacheContainer(provider) {
        this.provider = provider;
        this.provider = provider;
    }
    CacheContainer.prototype.get = function (key) {
        var cacheObject = this.provider.get(key);
        if (!cacheObject) {
            return undefined;
        }
        var isExpired = this.isCacheObjectExpired(cacheObject);
        return isExpired ? undefined : cacheObject.content;
    };
    CacheContainer.prototype.set = function (key, value, ttl) {
        var cacheObject = new CacheObject(key, value, ttl || 0);
        this.provider.set(cacheObject);
    };
    CacheContainer.prototype.isCacheObjectExpired = function (cacheObject) {
        if (typeof cacheObject.ttl === 'number') {
            return Date.now().valueOf() > cacheObject.createAt.valueOf() + cacheObject.ttl;
        }
        else {
            return Date.now() > cacheObject.ttl.valueOf();
        }
    };
    return CacheContainer;
}());
export { CacheContainer };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FjaGVfY29udGFpbmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY2FjaGUvY29yZS9jYWNoZV9jb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTdDO0lBQ0Usd0JBQXNCLFFBQTJCO1FBQTNCLGFBQVEsR0FBUixRQUFRLENBQW1CO1FBQy9DLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzNCLENBQUM7SUFDTSw0QkFBRyxHQUFWLFVBQVcsR0FBUTtRQUNqQixJQUFNLFdBQVcsR0FBb0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUQsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNoQixPQUFPLFNBQVMsQ0FBQztTQUNsQjtRQUNELElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RCxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDO0lBQ3JELENBQUM7SUFDTSw0QkFBRyxHQUFWLFVBQVcsR0FBUSxFQUFFLEtBQVEsRUFBRSxHQUFTO1FBQ3RDLElBQU0sV0FBVyxHQUFvQixJQUFJLFdBQVcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBQ08sNkNBQW9CLEdBQTVCLFVBQTZCLFdBQTRCO1FBQ3ZELElBQUksT0FBTyxXQUFXLENBQUMsR0FBRyxLQUFLLFFBQVEsRUFBRTtZQUN2QyxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUM7U0FDaEY7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDL0M7SUFDSCxDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQUFDLEFBdkJELElBdUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNhY2hlT2JqZWN0LCBJQ2FjaGVQcm92aWRlciwgS2V5LCBUVEwgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgQ2FjaGVPYmplY3QgfSBmcm9tIFwiLi9jYWNoZV9vYmplY3RcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYWNoZUNvbnRhaW5lcjxUPntcclxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyPFQ+KSB7XHJcbiAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXQoa2V5OiBLZXkpOiBUIHtcclxuICAgIGNvbnN0IGNhY2hlT2JqZWN0OiBJQ2FjaGVPYmplY3Q8VD4gPSB0aGlzLnByb3ZpZGVyLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWNoZU9iamVjdCkge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNFeHBpcmVkID0gdGhpcy5pc0NhY2hlT2JqZWN0RXhwaXJlZChjYWNoZU9iamVjdCk7XHJcbiAgICByZXR1cm4gaXNFeHBpcmVkID8gdW5kZWZpbmVkIDogY2FjaGVPYmplY3QuY29udGVudDtcclxuICB9XHJcbiAgcHVibGljIHNldChrZXk6IEtleSwgdmFsdWU6IFQsIHR0bD86IFRUTCkge1xyXG4gICAgY29uc3QgY2FjaGVPYmplY3Q6IElDYWNoZU9iamVjdDxUPiA9IG5ldyBDYWNoZU9iamVjdChrZXksIHZhbHVlLCB0dGwgfHwgMCk7XHJcbiAgICB0aGlzLnByb3ZpZGVyLnNldChjYWNoZU9iamVjdCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgaXNDYWNoZU9iamVjdEV4cGlyZWQoY2FjaGVPYmplY3Q6IElDYWNoZU9iamVjdDxUPikge1xyXG4gICAgaWYgKHR5cGVvZiBjYWNoZU9iamVjdC50dGwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIHJldHVybiBEYXRlLm5vdygpLnZhbHVlT2YoKSA+IGNhY2hlT2JqZWN0LmNyZWF0ZUF0LnZhbHVlT2YoKSArIGNhY2hlT2JqZWN0LnR0bDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBEYXRlLm5vdygpID4gY2FjaGVPYmplY3QudHRsLnZhbHVlT2YoKTtcclxuICAgIH1cclxuICB9XHJcbn0iXX0=