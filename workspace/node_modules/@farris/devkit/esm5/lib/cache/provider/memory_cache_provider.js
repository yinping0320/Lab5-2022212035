import { CacheKeyCompare } from "../types";
var MemoryCacheProvider = /** @class */ (function () {
    function MemoryCacheProvider(cacheKeyCompare) {
        this.store = new Array();
        this.cacheKeyCompare = cacheKeyCompare || new CacheKeyCompare();
    }
    MemoryCacheProvider.prototype.has = function (key) {
        var _this = this;
        if (this.store.length < 1) {
            return false;
        }
        var index = this.store.findIndex(function (item) { return item && _this.cacheKeyCompare.compare(key, item.key); });
        return index !== -1;
    };
    MemoryCacheProvider.prototype.length = function () {
        return this.store.length;
    };
    MemoryCacheProvider.prototype.set = function (value) {
        this.store.push(value);
    };
    MemoryCacheProvider.prototype.get = function (key) {
        var _this = this;
        if (this.store.length < 1) {
            return undefined;
        }
        return this.store.find(function (item) { return _this.cacheKeyCompare.compare(key, item.key); });
    };
    MemoryCacheProvider.prototype.delete = function (key) {
        var _this = this;
        if (this.store.length < 1) {
            return;
        }
        var index = this.store.findIndex(function (item) { return item && _this.cacheKeyCompare.compare(key, item.key); });
        this.store.splice(index, 1);
    };
    MemoryCacheProvider.prototype.clear = function () {
        this.store.length = 0;
    };
    MemoryCacheProvider.prototype.keys = function () {
        return this.store.keys();
    };
    MemoryCacheProvider.prototype.values = function () {
        return this.store.values();
    };
    return MemoryCacheProvider;
}());
export { MemoryCacheProvider };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVtb3J5X2NhY2hlX3Byb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY2FjaGUvcHJvdmlkZXIvbWVtb3J5X2NhY2hlX3Byb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQXVELE1BQU0sVUFBVSxDQUFDO0FBRWhHO0lBSUUsNkJBQVksZUFBa0M7UUFDNUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssRUFBbUIsQ0FBQztRQUMxQyxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsSUFBSSxJQUFJLGVBQWUsRUFBRSxDQUFDO0lBQ2xFLENBQUM7SUFDTSxpQ0FBRyxHQUFWLFVBQVcsR0FBUTtRQUFuQixpQkFNQztRQUxDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFDRCxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxVQUFDLElBQXFCLElBQUssT0FBQSxJQUFJLElBQUksS0FBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBbkQsQ0FBbUQsQ0FBQyxDQUFDO1FBQ25ILE9BQU8sS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFDTSxvQ0FBTSxHQUFiO1FBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUMzQixDQUFDO0lBQ00saUNBQUcsR0FBVixVQUFXLEtBQXNCO1FBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFDTSxpQ0FBRyxHQUFWLFVBQVcsR0FBUTtRQUFuQixpQkFLQztRQUpDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3pCLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBQ0QsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFDLElBQXFCLElBQUssT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUEzQyxDQUEyQyxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUNNLG9DQUFNLEdBQWIsVUFBYyxHQUFRO1FBQXRCLGlCQU1DO1FBTEMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDekIsT0FBTztTQUNSO1FBQ0QsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsVUFBQyxJQUFxQixJQUFLLE9BQUEsSUFBSSxJQUFJLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQW5ELENBQW1ELENBQUMsQ0FBQztRQUNuSCxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUNNLG1DQUFLLEdBQVo7UUFDRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUNNLGtDQUFJLEdBQVg7UUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUNNLG9DQUFNLEdBQWI7UUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0FBQyxBQTNDRCxJQTJDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhY2hlS2V5Q29tcGFyZSwgSUNhY2hlS2V5Q29tcGFyZSwgSUNhY2hlT2JqZWN0LCBJQ2FjaGVQcm92aWRlciwgS2V5IH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVtb3J5Q2FjaGVQcm92aWRlcjxUPiBpbXBsZW1lbnRzIElDYWNoZVByb3ZpZGVyPFQ+IHtcclxuICBwcm90ZWN0ZWQgc3RvcmU6IEFycmF5PElDYWNoZU9iamVjdDxUPj47XHJcbiAgcHJvdGVjdGVkIGNhY2hlS2V5Q29tcGFyZTogSUNhY2hlS2V5Q29tcGFyZTtcclxuXHJcbiAgY29uc3RydWN0b3IoY2FjaGVLZXlDb21wYXJlPzogSUNhY2hlS2V5Q29tcGFyZSkge1xyXG4gICAgdGhpcy5zdG9yZSA9IG5ldyBBcnJheTxJQ2FjaGVPYmplY3Q8VD4+KCk7XHJcbiAgICB0aGlzLmNhY2hlS2V5Q29tcGFyZSA9IGNhY2hlS2V5Q29tcGFyZSB8fCBuZXcgQ2FjaGVLZXlDb21wYXJlKCk7XHJcbiAgfVxyXG4gIHB1YmxpYyBoYXMoa2V5OiBLZXkpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLnN0b3JlLmxlbmd0aCA8IDEpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnN0b3JlLmZpbmRJbmRleCgoaXRlbTogSUNhY2hlT2JqZWN0PFQ+KSA9PiBpdGVtICYmIHRoaXMuY2FjaGVLZXlDb21wYXJlLmNvbXBhcmUoa2V5LCBpdGVtLmtleSkpO1xyXG4gICAgcmV0dXJuIGluZGV4ICE9PSAtMTtcclxuICB9XHJcbiAgcHVibGljIGxlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RvcmUubGVuZ3RoO1xyXG4gIH1cclxuICBwdWJsaWMgc2V0KHZhbHVlOiBJQ2FjaGVPYmplY3Q8VD4pIHtcclxuICAgIHRoaXMuc3RvcmUucHVzaCh2YWx1ZSk7XHJcbiAgfVxyXG4gIHB1YmxpYyBnZXQoa2V5OiBLZXkpOiBJQ2FjaGVPYmplY3Q8VD4ge1xyXG4gICAgaWYgKHRoaXMuc3RvcmUubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZmluZCgoaXRlbTogSUNhY2hlT2JqZWN0PFQ+KSA9PiB0aGlzLmNhY2hlS2V5Q29tcGFyZS5jb21wYXJlKGtleSwgaXRlbS5rZXkpKTtcclxuICB9XHJcbiAgcHVibGljIGRlbGV0ZShrZXk6IEtleSkge1xyXG4gICAgaWYgKHRoaXMuc3RvcmUubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc3RvcmUuZmluZEluZGV4KChpdGVtOiBJQ2FjaGVPYmplY3Q8VD4pID0+IGl0ZW0gJiYgdGhpcy5jYWNoZUtleUNvbXBhcmUuY29tcGFyZShrZXksIGl0ZW0ua2V5KSk7XHJcbiAgICB0aGlzLnN0b3JlLnNwbGljZShpbmRleCwgMSk7XHJcbiAgfVxyXG4gIHB1YmxpYyBjbGVhcigpIHtcclxuICAgIHRoaXMuc3RvcmUubGVuZ3RoID0gMDtcclxuICB9XHJcbiAgcHVibGljIGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxLZXk+IHtcclxuICAgIHJldHVybiB0aGlzLnN0b3JlLmtleXMoKTtcclxuICB9XHJcbiAgcHVibGljIHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPElDYWNoZU9iamVjdDxUPj4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RvcmUudmFsdWVzKCk7XHJcbiAgfVxyXG59Il19