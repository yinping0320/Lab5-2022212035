/*
 * StateMachine变量解析
 * @Author: Witt
 * @Date: 2018-12-04 17:09:42
 * @Last Modified by: Witt
 * @Last Modified time: 2019-10-30 11:07:10
 */
// import { AppContext } from '../app/index';
// import { FrameContext } from '../frame/index';
// import { CommandContext } from '../command/index';
/**
 * 解析辅助工具类
 */
var ParseUtil = /** @class */ (function () {
    function ParseUtil() {
    }
    /**
     * 获取应用上下文
     */
    ParseUtil.getAppContext = function (context) {
        if (context.typeName === 'CommandContext') {
            return context.frameContext.appContext;
        }
        else if (context.appContext) {
            return context.appContext;
        }
        else if (context.typeName === 'AppContext') {
            return context;
        }
        else {
            throw new Error('上下文中找不到AppContext，请检查！');
        }
    };
    /**
     * 获取当前Frame的Context
     */
    ParseUtil.getFrameContext = function (context) {
        if (context.typeName === 'CommandContext') {
            return context.frameContext;
        }
        else if (context.typeName === 'FrameContext') {
            return context;
        }
        else {
            throw new Error('上下文中找不到FrameContext，请检查！');
        }
    };
    /**
     * 获取根Frame的Context
     */
    ParseUtil.getRootFrameContext = function (context) {
        var frameContext = this.getFrameContext(context);
        return frameContext.root;
    };
    /**
     * 根据frameId获取FrameContext
     */
    ParseUtil.getFrameContextById = function (context, frameId) {
        var appContext = this.getAppContext(context);
        return appContext.frameContextManager.getFrameContextById(frameId);
    };
    return ParseUtil;
}());
export { ParseUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VfdXRpbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL3ZhcmlhYmxlL3BhcnNlX3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztHQU1HO0FBRUgsNkNBQTZDO0FBQzdDLGlEQUFpRDtBQUNqRCxxREFBcUQ7QUFFckQ7O0dBRUc7QUFDSDtJQUFBO0lBOENBLENBQUM7SUE1Q0M7O09BRUc7SUFDSSx1QkFBYSxHQUFwQixVQUFxQixPQUFZO1FBQy9CLElBQUksT0FBTyxDQUFDLFFBQVEsS0FBSyxnQkFBZ0IsRUFBRTtZQUN6QyxPQUFPLE9BQU8sQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1NBQ3hDO2FBQU0sSUFBSSxPQUFPLENBQUMsVUFBVSxFQUFFO1lBQzdCLE9BQU8sT0FBTyxDQUFDLFVBQVUsQ0FBQztTQUMzQjthQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsS0FBSyxZQUFZLEVBQUU7WUFDNUMsT0FBTyxPQUFPLENBQUM7U0FDaEI7YUFBTTtZQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUMzQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLHlCQUFlLEdBQXRCLFVBQXVCLE9BQVk7UUFDakMsSUFBSSxPQUFPLENBQUMsUUFBUSxLQUFLLGdCQUFnQixFQUFFO1lBQ3pDLE9BQU8sT0FBTyxDQUFDLFlBQVksQ0FBQztTQUM3QjthQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsS0FBSyxjQUFjLEVBQUU7WUFDOUMsT0FBTyxPQUFPLENBQUM7U0FDaEI7YUFBTTtZQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztTQUM3QztJQUVILENBQUM7SUFFRDs7T0FFRztJQUNJLDZCQUFtQixHQUExQixVQUEyQixPQUFZO1FBQ3JDLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkQsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7T0FFRztJQUNJLDZCQUFtQixHQUExQixVQUEyQixPQUFZLEVBQUUsT0FBZTtRQUN0RCxJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9DLE9BQU8sVUFBVSxDQUFDLG1CQUFtQixDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFDSCxnQkFBQztBQUFELENBQUMsQUE5Q0QsSUE4Q0M7QUFFRCxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBTdGF0ZU1hY2hpbmXlj5jph4/op6PmnpBcclxuICogQEF1dGhvcjogV2l0dFxyXG4gKiBARGF0ZTogMjAxOC0xMi0wNCAxNzowOTo0MlxyXG4gKiBATGFzdCBNb2RpZmllZCBieTogV2l0dFxyXG4gKiBATGFzdCBNb2RpZmllZCB0aW1lOiAyMDE5LTEwLTMwIDExOjA3OjEwXHJcbiAqL1xyXG5cclxuLy8gaW1wb3J0IHsgQXBwQ29udGV4dCB9IGZyb20gJy4uL2FwcC9pbmRleCc7XHJcbi8vIGltcG9ydCB7IEZyYW1lQ29udGV4dCB9IGZyb20gJy4uL2ZyYW1lL2luZGV4JztcclxuLy8gaW1wb3J0IHsgQ29tbWFuZENvbnRleHQgfSBmcm9tICcuLi9jb21tYW5kL2luZGV4JztcclxuXHJcbi8qKlxyXG4gKiDop6PmnpDovoXliqnlt6XlhbfnsbtcclxuICovXHJcbmNsYXNzIFBhcnNlVXRpbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW6lOeUqOS4iuS4i+aWh1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRBcHBDb250ZXh0KGNvbnRleHQ6IGFueSk6IGFueSB7XHJcbiAgICBpZiAoY29udGV4dC50eXBlTmFtZSA9PT0gJ0NvbW1hbmRDb250ZXh0Jykge1xyXG4gICAgICByZXR1cm4gY29udGV4dC5mcmFtZUNvbnRleHQuYXBwQ29udGV4dDtcclxuICAgIH0gZWxzZSBpZiAoY29udGV4dC5hcHBDb250ZXh0KSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0LmFwcENvbnRleHQ7XHJcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQudHlwZU5hbWUgPT09ICdBcHBDb250ZXh0Jykge1xyXG4gICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign5LiK5LiL5paH5Lit5om+5LiN5YiwQXBwQ29udGV4dO+8jOivt+ajgOafpe+8gScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmNRnJhbWXnmoRDb250ZXh0XHJcbiAgICovXHJcbiAgc3RhdGljIGdldEZyYW1lQ29udGV4dChjb250ZXh0OiBhbnkpIHtcclxuICAgIGlmIChjb250ZXh0LnR5cGVOYW1lID09PSAnQ29tbWFuZENvbnRleHQnKSB7XHJcbiAgICAgIHJldHVybiBjb250ZXh0LmZyYW1lQ29udGV4dDtcclxuICAgIH0gZWxzZSBpZiAoY29udGV4dC50eXBlTmFtZSA9PT0gJ0ZyYW1lQ29udGV4dCcpIHtcclxuICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S4iuS4i+aWh+S4reaJvuS4jeWIsEZyYW1lQ29udGV4dO+8jOivt+ajgOafpe+8gScpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaguUZyYW1l55qEQ29udGV4dFxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRSb290RnJhbWVDb250ZXh0KGNvbnRleHQ6IGFueSk6IGFueSB7XHJcbiAgICBjb25zdCBmcmFtZUNvbnRleHQgPSB0aGlzLmdldEZyYW1lQ29udGV4dChjb250ZXh0KTtcclxuICAgIHJldHVybiBmcmFtZUNvbnRleHQucm9vdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOagueaNrmZyYW1lSWTojrflj5ZGcmFtZUNvbnRleHRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RnJhbWVDb250ZXh0QnlJZChjb250ZXh0OiBhbnksIGZyYW1lSWQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICBjb25zdCBhcHBDb250ZXh0ID0gdGhpcy5nZXRBcHBDb250ZXh0KGNvbnRleHQpO1xyXG4gICAgcmV0dXJuIGFwcENvbnRleHQuZnJhbWVDb250ZXh0TWFuYWdlci5nZXRGcmFtZUNvbnRleHRCeUlkKGZyYW1lSWQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGFyc2VVdGlsIH07XHJcbiJdfQ==