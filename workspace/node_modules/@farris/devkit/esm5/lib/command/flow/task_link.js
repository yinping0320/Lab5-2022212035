import { VariableParseService } from '../../variable/index';
/**
 * 任务链接
 */
var TaskLink = /** @class */ (function () {
    /**
     * 构造函数
     */
    function TaskLink(from, to, condition) {
        this.from = from;
        this.to = to;
        this.condition = condition;
    }
    /**
     * 是否能够
     */
    TaskLink.prototype.canLink = function (context) {
        var type = typeof this.condition;
        var canLink;
        switch (type) {
            case 'boolean':
                canLink = this.condition;
                break;
            case 'function':
                canLink = this.condition(context);
                break;
            case 'string':
                var parseService = context && context.frameContext && context.frameContext.injector && context.frameContext.injector.get(VariableParseService);
                canLink = parseService && parseService.evaluate(this.condition, context);
                break;
            default:
                canLink = false;
                break;
        }
        return canLink;
    };
    return TaskLink;
}());
export { TaskLink };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza19saW5rLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY29tbWFuZC9mbG93L3Rhc2tfbGluay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQVU1RDs7R0FFRztBQUNIO0lBb0JFOztPQUVHO0lBQ0gsa0JBQVksSUFBWSxFQUFFLEVBQVUsRUFBRSxTQUFzQztRQUMxRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNJLDBCQUFPLEdBQWQsVUFBZSxPQUF1QjtRQUNwQyxJQUFNLElBQUksR0FBRyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDbkMsSUFBSSxPQUFPLENBQUM7UUFDWixRQUFRLElBQUksRUFBRTtZQUNaLEtBQUssU0FBUztnQkFDWixPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQW9CLENBQUM7Z0JBQ3BDLE1BQU07WUFDUixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxHQUFjLElBQUksQ0FBQyxTQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU07WUFDUixLQUFLLFFBQVE7Z0JBQ1gsSUFBTSxZQUFZLEdBQUcsT0FBTyxJQUFJLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUF1QixvQkFBb0IsQ0FBQyxDQUFDO2dCQUN2SyxPQUFPLEdBQUcsWUFBWSxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQW1CLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25GLE1BQU07WUFDUjtnQkFDRSxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNoQixNQUFNO1NBQ1Q7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBQ0gsZUFBQztBQUFELENBQUMsQUFwREQsSUFvREM7QUFFRCxPQUFPLEVBQVksUUFBUSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFZhcmlhYmxlUGFyc2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vdmFyaWFibGUvaW5kZXgnO1xyXG5pbXBvcnQgeyBDb21tYW5kQ29udGV4dCB9IGZyb20gJy4uL2NvbW1hbmRfY29udGV4dCc7XHJcblxyXG4vKipcclxuICog5Lu75Yqh5Ye95pWwXHJcbiAqIEBwYXJhbXMgcmVzdWx0IOS4iuS4gOatpeaJp+ihjOe7k+aenFxyXG4gKiBAcGFyYW1zIGNvbnRleHQg5omn6KGM5LiK5LiL5paHXHJcbiAqL1xyXG50eXBlIExpbmtGdW5jID0gKGNvbnRleHQ6IENvbW1hbmRDb250ZXh0KSA9PiBib29sZWFuO1xyXG5cclxuLyoqXHJcbiAqIOS7u+WKoemTvuaOpVxyXG4gKi9cclxuY2xhc3MgVGFza0xpbmsge1xyXG5cclxuICAvKipcclxuICAgKiDmupDku7vliqFcclxuICAgKi9cclxuICBmcm9tOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOebruagh+S7u+WKoVxyXG4gICAqL1xyXG4gIHRvOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJp+ihjOadoeS7tlxyXG4gICAqIDHjgIHooajovr7lvI/vvJtcclxuICAgKiAy44CB5biD5bCU5YC877ybXHJcbiAgICogM+OAgeWHveaVsFxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbjogc3RyaW5nIHwgYm9vbGVhbiB8IExpbmtGdW5jO1xyXG5cclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcsIGNvbmRpdGlvbjogc3RyaW5nIHwgYm9vbGVhbiB8IExpbmtGdW5jKSB7XHJcbiAgICB0aGlzLmZyb20gPSBmcm9tO1xyXG4gICAgdGhpcy50byA9IHRvO1xyXG4gICAgdGhpcy5jb25kaXRpb24gPSBjb25kaXRpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKbog73lpJ9cclxuICAgKi9cclxuICBwdWJsaWMgY2FuTGluayhjb250ZXh0OiBDb21tYW5kQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiB0aGlzLmNvbmRpdGlvbjtcclxuICAgIGxldCBjYW5MaW5rO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxyXG4gICAgICAgIGNhbkxpbmsgPSB0aGlzLmNvbmRpdGlvbiBhcyBib29sZWFuO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmdW5jdGlvbic6XHJcbiAgICAgICAgY2FuTGluayA9ICg8TGlua0Z1bmM+dGhpcy5jb25kaXRpb24pKGNvbnRleHQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgIGNvbnN0IHBhcnNlU2VydmljZSA9IGNvbnRleHQgJiYgY29udGV4dC5mcmFtZUNvbnRleHQgJiYgY29udGV4dC5mcmFtZUNvbnRleHQuaW5qZWN0b3IgJiYgY29udGV4dC5mcmFtZUNvbnRleHQuaW5qZWN0b3IuZ2V0PFZhcmlhYmxlUGFyc2VTZXJ2aWNlPihWYXJpYWJsZVBhcnNlU2VydmljZSk7XHJcbiAgICAgICAgY2FuTGluayA9IHBhcnNlU2VydmljZSAmJiBwYXJzZVNlcnZpY2UuZXZhbHVhdGUodGhpcy5jb25kaXRpb24gYXMgc3RyaW5nLCBjb250ZXh0KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjYW5MaW5rID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2FuTGluaztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IExpbmtGdW5jLCBUYXNrTGluayB9O1xyXG4iXX0=