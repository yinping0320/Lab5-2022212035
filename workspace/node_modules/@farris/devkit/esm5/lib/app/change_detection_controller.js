/**
 * 变更检测控制器
 */
var ChangeDetectionController = /** @class */ (function () {
    /**
     * 构造函数
     */
    function ChangeDetectionController(frameContextManager) {
        this.frameContextManager = frameContextManager;
    }
    Object.defineProperty(ChangeDetectionController.prototype, "frameContexts", {
        /**
         * 所有的FrameContext数组
         */
        get: function () {
            return this.frameContextManager.getFrameContexts();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 将所有的FrameComponent重新加入到变更检测树
     * @todo
     * 1、该方法仅供数据源变更产生大量变更时优化性能使用；
     * 2、加setTimeout来保证数据变更流完成之后，再执行变更检测，目前父对象是通过subscribe监听子对象变化，导致产生异步；
     * 3、应该从根本上解决该问题，而不是setTimeout。
     */
    ChangeDetectionController.prototype.reattach = function () {
        var _this = this;
        setTimeout(function () {
            _this.frameContexts.forEach(function (frameContext) {
                frameContext.frameComponent.reattach();
                frameContext.frameComponent.detectChanges();
            });
        });
    };
    /**
     * 将所有的FrameComponent脱离变更检测树
     */
    ChangeDetectionController.prototype.detach = function () {
        this.frameContexts.forEach(function (frameContext) {
            frameContext.frameComponent.detach();
        });
    };
    return ChangeDetectionController;
}());
export { ChangeDetectionController };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhbmdlX2RldGVjdGlvbl9jb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvYXBwL2NoYW5nZV9kZXRlY3Rpb25fY29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTs7R0FFRztBQUNIO0lBU0U7O09BRUc7SUFDSCxtQ0FBb0IsbUJBQXdDO1FBQXhDLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7SUFDNUQsQ0FBQztJQVJELHNCQUFZLG9EQUFhO1FBSHpCOztXQUVHO2FBQ0g7WUFDRSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ3JELENBQUM7OztPQUFBO0lBUUQ7Ozs7OztPQU1HO0lBQ0ksNENBQVEsR0FBZjtRQUFBLGlCQU9DO1FBTkMsVUFBVSxDQUFDO1lBQ1QsS0FBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsVUFBQyxZQUEwQjtnQkFDcEQsWUFBWSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDdkMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUM5QyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ksMENBQU0sR0FBYjtRQUNFLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFVBQUMsWUFBMEI7WUFDcEQsWUFBWSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDSCxnQ0FBQztBQUFELENBQUMsQUF2Q0QsSUF1Q0M7QUFFRCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZyYW1lQ29udGV4dCB9IGZyb20gJy4uL2ZyYW1lL2luZGV4JztcclxuaW1wb3J0IHsgRnJhbWVDb250ZXh0TWFuYWdlciB9IGZyb20gJy4vZnJhbWVfY29udGV4X21hbmFnZXInO1xyXG5cclxuLyoqXHJcbiAqIOWPmOabtOajgOa1i+aOp+WItuWZqFxyXG4gKi9cclxuY2xhc3MgQ2hhbmdlRGV0ZWN0aW9uQ29udHJvbGxlciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJgOacieeahEZyYW1lQ29udGV4dOaVsOe7hFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0IGZyYW1lQ29udGV4dHMoKTogRnJhbWVDb250ZXh0W10ge1xyXG4gICAgcmV0dXJuIHRoaXMuZnJhbWVDb250ZXh0TWFuYWdlci5nZXRGcmFtZUNvbnRleHRzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmnoTpgKDlh73mlbBcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZyYW1lQ29udGV4dE1hbmFnZXI6IEZyYW1lQ29udGV4dE1hbmFnZXIpIHtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhuaJgOacieeahEZyYW1lQ29tcG9uZW506YeN5paw5Yqg5YWl5Yiw5Y+Y5pu05qOA5rWL5qCRXHJcbiAgICogQHRvZG9cclxuICAgKiAx44CB6K+l5pa55rOV5LuF5L6b5pWw5o2u5rqQ5Y+Y5pu05Lqn55Sf5aSn6YeP5Y+Y5pu05pe25LyY5YyW5oCn6IO95L2/55So77ybXHJcbiAgICogMuOAgeWKoHNldFRpbWVvdXTmnaXkv53or4HmlbDmja7lj5jmm7TmtYHlrozmiJDkuYvlkI7vvIzlho3miafooYzlj5jmm7Tmo4DmtYvvvIznm67liY3niLblr7nosaHmmK/pgJrov4dzdWJzY3JpYmXnm5HlkKzlrZDlr7nosaHlj5jljJbvvIzlr7zoh7TkuqfnlJ/lvILmraXvvJtcclxuICAgKiAz44CB5bqU6K+l5LuO5qC55pys5LiK6Kej5Yaz6K+l6Zeu6aKY77yM6ICM5LiN5pivc2V0VGltZW91dOOAglxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWF0dGFjaCgpOiB2b2lkIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmZyYW1lQ29udGV4dHMuZm9yRWFjaCgoZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQpID0+IHtcclxuICAgICAgICBmcmFtZUNvbnRleHQuZnJhbWVDb21wb25lbnQucmVhdHRhY2goKTtcclxuICAgICAgICBmcmFtZUNvbnRleHQuZnJhbWVDb21wb25lbnQuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5bCG5omA5pyJ55qERnJhbWVDb21wb25lbnTohLHnprvlj5jmm7Tmo4DmtYvmoJFcclxuICAgKi9cclxuICBwdWJsaWMgZGV0YWNoKCk6IHZvaWQge1xyXG4gICAgdGhpcy5mcmFtZUNvbnRleHRzLmZvckVhY2goKGZyYW1lQ29udGV4dDogRnJhbWVDb250ZXh0KSA9PiB7XHJcbiAgICAgIGZyYW1lQ29udGV4dC5mcmFtZUNvbXBvbmVudC5kZXRhY2goKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uQ29udHJvbGxlciB9O1xyXG4iXX0=