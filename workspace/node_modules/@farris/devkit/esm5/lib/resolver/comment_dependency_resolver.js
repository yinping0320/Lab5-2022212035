import * as tslib_1 from "tslib";
import { Injectable } from "@angular/core";
/**
 * 用户自定义参数解析器
 */
var CommentDependencyResolver = /** @class */ (function () {
    function CommentDependencyResolver() {
    }
    CommentDependencyResolver.prototype.resolve = function (expr) {
        var dependencies = [];
        if (!expr || expr.length < 1) {
            return dependencies;
        }
        var defineRegex = /\/\*\*\s*__define__\((.*)\)\s*\*\//;
        var defineMatchArray = expr.match(defineRegex);
        if (defineMatchArray && defineMatchArray.length === 2) {
            var defineString = defineMatchArray[1].trim();
            var defineObject = null;
            try {
                defineObject = JSON.parse(defineString);
            }
            catch (e) {
                console.warn("\u81EA\u5B9A\u4E49\u4F9D\u8D56\u89E3\u6790\u5931\u8D25\uFF1A" + defineString);
            }
            if (defineObject && defineObject.hasOwnProperty('deps') && Array.isArray(defineObject['deps'])) {
                dependencies.push.apply(dependencies, tslib_1.__spread(defineObject['deps']));
            }
        }
        return dependencies;
    };
    CommentDependencyResolver.decorators = [
        { type: Injectable }
    ];
    return CommentDependencyResolver;
}());
export { CommentDependencyResolver };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWVudF9kZXBlbmRlbmN5X3Jlc29sdmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvcmVzb2x2ZXIvY29tbWVudF9kZXBlbmRlbmN5X3Jlc29sdmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDOztHQUVHO0FBQ0g7SUFBQTtJQXFCQSxDQUFDO0lBbkJRLDJDQUFPLEdBQWQsVUFBZSxJQUFZO1FBQ3pCLElBQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzVCLE9BQU8sWUFBWSxDQUFDO1NBQ3JCO1FBQ0QsSUFBTSxXQUFXLEdBQUcsb0NBQW9DLENBQUM7UUFDekQsSUFBTSxnQkFBZ0IsR0FBcUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuRSxJQUFJLGdCQUFnQixJQUFJLGdCQUFnQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDckQsSUFBTSxZQUFZLEdBQVcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDeEQsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDO1lBQ3hCLElBQUk7Z0JBQ0YsWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDekM7WUFBQyxPQUFPLENBQUMsRUFBRTtnQkFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLGlFQUFhLFlBQWMsQ0FBQyxDQUFDO2FBQUU7WUFDMUQsSUFBSSxZQUFZLElBQUksWUFBWSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFO2dCQUM5RixZQUFZLENBQUMsSUFBSSxPQUFqQixZQUFZLG1CQUFTLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRTthQUM1QztTQUNGO1FBQ0QsT0FBTyxZQUFZLENBQUM7SUFDdEIsQ0FBQzs7Z0JBcEJGLFVBQVU7O0lBcUJYLGdDQUFDO0NBQUEsQUFyQkQsSUFxQkM7U0FwQlkseUJBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IElSZXNvbHZlciB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbi8qKlxyXG4gKiDnlKjmiLfoh6rlrprkuYnlj4LmlbDop6PmnpDlmahcclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIENvbW1lbnREZXBlbmRlbmN5UmVzb2x2ZXIgaW1wbGVtZW50cyBJUmVzb2x2ZXIge1xyXG4gIHB1YmxpYyByZXNvbHZlKGV4cHI6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IFtdO1xyXG4gICAgaWYgKCFleHByIHx8IGV4cHIubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmaW5lUmVnZXggPSAvXFwvXFwqXFwqXFxzKl9fZGVmaW5lX19cXCgoLiopXFwpXFxzKlxcKlxcLy87XHJcbiAgICBjb25zdCBkZWZpbmVNYXRjaEFycmF5OiBSZWdFeHBNYXRjaEFycmF5ID0gZXhwci5tYXRjaChkZWZpbmVSZWdleCk7XHJcbiAgICBpZiAoZGVmaW5lTWF0Y2hBcnJheSAmJiBkZWZpbmVNYXRjaEFycmF5Lmxlbmd0aCA9PT0gMikge1xyXG4gICAgICBjb25zdCBkZWZpbmVTdHJpbmc6IHN0cmluZyA9IGRlZmluZU1hdGNoQXJyYXlbMV0udHJpbSgpO1xyXG4gICAgICBsZXQgZGVmaW5lT2JqZWN0ID0gbnVsbDtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBkZWZpbmVPYmplY3QgPSBKU09OLnBhcnNlKGRlZmluZVN0cmluZyk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS53YXJuKGDoh6rlrprkuYnkvp3otZbop6PmnpDlpLHotKXvvJoke2RlZmluZVN0cmluZ31gKTsgfVxyXG4gICAgICBpZiAoZGVmaW5lT2JqZWN0ICYmIGRlZmluZU9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnZGVwcycpICYmIEFycmF5LmlzQXJyYXkoZGVmaW5lT2JqZWN0WydkZXBzJ10pKSB7XHJcbiAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goLi4uZGVmaW5lT2JqZWN0WydkZXBzJ10pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xyXG4gIH1cclxufSJdfQ==