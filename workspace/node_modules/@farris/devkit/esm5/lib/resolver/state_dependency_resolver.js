var CONTEXT_FUNCTIONS = ['GetContextParameter', 'GetSessionValue'];
var StateDependencyResolver = /** @class */ (function () {
    function StateDependencyResolver() {
    }
    StateDependencyResolver.prototype.resolve = function (expr) {
        var deps = [];
        var regex = new RegExp("DefaultFunction\\.(" + CONTEXT_FUNCTIONS.join('|') + ")\\s*\\([^\\r\\n\\)]*\\)", 'g');
        var contextFunctions = expr.match(regex);
        if (contextFunctions && contextFunctions.length > 0) {
            // todo: 使用正则匹配时可能会因为参数中有逗号导致问题，后续使用ast解析
            var argumentsRegex_1 = /\(([^\r\n\)]*)\)/;
            contextFunctions.forEach(function (groupFunction) {
                var argumentMatchResult = groupFunction.match(argumentsRegex_1);
                if (argumentMatchResult.length === 2) {
                    var argument = argumentMatchResult[1].trim().replace(/\"/g, '');
                    var dep = ['STATE~'];
                    dep.push(argument);
                    deps.push(dep.join('/'));
                }
            });
        }
        return deps;
    };
    return StateDependencyResolver;
}());
export { StateDependencyResolver };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGVfZGVwZW5kZW5jeV9yZXNvbHZlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL3Jlc29sdmVyL3N0YXRlX2RlcGVuZGVuY3lfcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLHFCQUFxQixFQUFFLGlCQUFpQixDQUFDLENBQUM7QUFDckU7SUFBQTtJQW9CQSxDQUFDO0lBbkJRLHlDQUFPLEdBQWQsVUFBZSxJQUFZO1FBQ3pCLElBQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFNLEtBQUssR0FBRyxJQUFJLE1BQU0sQ0FBQyx3QkFBc0IsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyw2QkFBMEIsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMzRyxJQUFNLGdCQUFnQixHQUFxQixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdELElBQUksZ0JBQWdCLElBQUksZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNuRCx5Q0FBeUM7WUFDekMsSUFBTSxnQkFBYyxHQUFHLGtCQUFrQixDQUFDO1lBQzFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxVQUFDLGFBQXFCO2dCQUM3QyxJQUFNLG1CQUFtQixHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsZ0JBQWMsQ0FBQyxDQUFDO2dCQUNoRSxJQUFJLG1CQUFtQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7b0JBQ3BDLElBQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2pFLElBQU0sR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ3ZCLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2lCQUMxQjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFDSCw4QkFBQztBQUFELENBQUMsQUFwQkQsSUFvQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJUmVzb2x2ZXIgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5jb25zdCBDT05URVhUX0ZVTkNUSU9OUyA9IFsnR2V0Q29udGV4dFBhcmFtZXRlcicsICdHZXRTZXNzaW9uVmFsdWUnXTtcclxuZXhwb3J0IGNsYXNzIFN0YXRlRGVwZW5kZW5jeVJlc29sdmVyIGltcGxlbWVudHMgSVJlc29sdmVyIHtcclxuICBwdWJsaWMgcmVzb2x2ZShleHByOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBkZXBzID0gW107XHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYERlZmF1bHRGdW5jdGlvblxcXFwuKCR7Q09OVEVYVF9GVU5DVElPTlMuam9pbignfCcpfSlcXFxccypcXFxcKFteXFxcXHJcXFxcblxcXFwpXSpcXFxcKWAsICdnJyk7XHJcbiAgICBjb25zdCBjb250ZXh0RnVuY3Rpb25zOiBSZWdFeHBNYXRjaEFycmF5ID0gZXhwci5tYXRjaChyZWdleCk7XHJcbiAgICBpZiAoY29udGV4dEZ1bmN0aW9ucyAmJiBjb250ZXh0RnVuY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgLy8gdG9kbzog5L2/55So5q2j5YiZ5Yy56YWN5pe25Y+v6IO95Lya5Zug5Li65Y+C5pWw5Lit5pyJ6YCX5Y+35a+86Ie06Zeu6aKY77yM5ZCO57ut5L2/55SoYXN06Kej5p6QXHJcbiAgICAgIGNvbnN0IGFyZ3VtZW50c1JlZ2V4ID0gL1xcKChbXlxcclxcblxcKV0qKVxcKS87XHJcbiAgICAgIGNvbnRleHRGdW5jdGlvbnMuZm9yRWFjaCgoZ3JvdXBGdW5jdGlvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXJndW1lbnRNYXRjaFJlc3VsdCA9IGdyb3VwRnVuY3Rpb24ubWF0Y2goYXJndW1lbnRzUmVnZXgpO1xyXG4gICAgICAgIGlmIChhcmd1bWVudE1hdGNoUmVzdWx0Lmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgY29uc3QgYXJndW1lbnQgPSBhcmd1bWVudE1hdGNoUmVzdWx0WzFdLnRyaW0oKS5yZXBsYWNlKC9cXFwiL2csJycpO1xyXG4gICAgICAgICAgY29uc3QgZGVwID0gWydTVEFURX4nXTtcclxuICAgICAgICAgIGRlcC5wdXNoKGFyZ3VtZW50KTtcclxuICAgICAgICAgIGRlcHMucHVzaChkZXAuam9pbignLycpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlcHM7XHJcbiAgfVxyXG59Il19