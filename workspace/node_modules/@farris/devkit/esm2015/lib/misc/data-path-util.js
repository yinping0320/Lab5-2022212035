import { BindingPropertyType, PropertyUtil } from '../binding-data/index';
/**
 * 路径处理工具类（处理/PathNode1/PathNode2/...格式的路径）
 */
class DataPathUtil {
    /**
     * 转换成BindingData可识别的路径
     */
    static convertToBindingPathArray(path) {
        const bindingPathArray = path.split('/').filter((part) => {
            return part !== '';
        });
        return bindingPathArray;
    }
    /**
     * 转换为Entity可识别的路径
     * 根：[]
     * 主表：['id:xxx', 'name'],
     * 关联：['id:xxx', 'deptInfo', 'id:xxx', 'name']
     * UDT: ['id:xxx', 'updateInfo', ':', 'createdOn']
     * 从表：['id:xxx', 'edus', 'id:xxx', 'name'],
     * 从从表：['id:xxx', 'edus', 'id:xxx', 'grades', 'id:xxx', 'name']
     */
    static convertToEntityPathArray(path, bindingData) {
        const bindingPathArray = this.convertToBindingPathArray(path);
        const entityPathArray = [];
        if (bindingPathArray.length === 0) {
            return entityPathArray;
        }
        // 根节点
        let currentBindingObject = bindingData.list.currentItem;
        entityPathArray.push(this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
        bindingPathArray.forEach((propName) => {
            const propInfo = PropertyUtil.getPropertyByName(currentBindingObject.properties, propName);
            switch (propInfo.type) {
                case BindingPropertyType.Plain:
                    entityPathArray.push(propName);
                    break;
                case BindingPropertyType.Object:
                    currentBindingObject = currentBindingObject[propName];
                    entityPathArray.push(propName);
                    entityPathArray.push(this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
                    break;
                case BindingPropertyType.List:
                    const currentBindingList = currentBindingObject[propName];
                    currentBindingObject = currentBindingList.currentItem;
                    entityPathArray.push(propName);
                    entityPathArray.push(this.createPrimaryKeyPath(currentBindingObject.primaryKey, currentBindingObject.primaryKeyValue));
                    break;
                default:
                    break;
            }
        });
        return entityPathArray;
    }
    /**
     * 转换为RestUrl里的路径
     *
     * 返回结果：
     * 主表（/）：/
     * 从表（/jiwtEdus）：/xxx/jiwtEdus
     * 从从表（/jiwtEdus/jiwtGrades）： /xxx/jiwtEdus/xxx/jiwtGrades
     */
    static convertToRestUrl(path, bindingData) {
        const bindingPathArray = this.convertToBindingPathArray(path);
        const restPathArray = [];
        let currentBindingObject = bindingData.list.currentItem;
        restPathArray.push(currentBindingObject.primaryKeyValue);
        bindingPathArray.forEach((propName) => {
            const propInfo = PropertyUtil.getPropertyByName(currentBindingObject.properties, propName);
            if (propInfo.type !== BindingPropertyType.List) {
                throw new Error(`${propInfo.name}不是子表对应的属性`);
            }
            const currentBindingList = currentBindingObject[propName];
            currentBindingObject = currentBindingList.currentItem;
            restPathArray.push(propName);
            restPathArray.push(currentBindingObject.primaryKeyValue);
        });
        // 移除最后一个主键
        restPathArray.pop();
        return '/' + restPathArray.join('/');
    }
    /**
     * 获取叶子节点的Path
     */
    static getLeafPath(path) {
        const pathArray = DataPathUtil.convertToBindingPathArray(path);
        return pathArray.pop();
    }
    /**
     * 获取父路径
     */
    static getParentPath(path) {
        const pathArray = DataPathUtil.convertToBindingPathArray(path);
        pathArray.pop();
        return '/' + pathArray.join('/');
    }
    /**
     * 创建路径中的主键部分
     */
    static createPrimaryKeyPath(primaryKey, primaryKeyValue) {
        return `${primaryKey}:${primaryKeyValue}`;
    }
}
export { DataPathUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1wYXRoLXV0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2RldmtpdC8iLCJzb3VyY2VzIjpbImxpYi9taXNjL2RhdGEtcGF0aC11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZSxtQkFBbUIsRUFBRSxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN2Rjs7R0FFRztBQUNILE1BQU0sWUFBWTtJQUVoQjs7T0FFRztJQUNJLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxJQUFZO1FBQ2xELE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFZLEVBQUUsRUFBRTtZQUMvRCxPQUFPLElBQUksS0FBSyxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLGdCQUFnQixDQUFDO0lBQzFCLENBQUM7SUFFRDs7Ozs7Ozs7T0FRRztJQUNJLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxJQUFZLEVBQUUsV0FBd0I7UUFDM0UsTUFBTSxnQkFBZ0IsR0FBYSxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsTUFBTSxlQUFlLEdBQWEsRUFBRSxDQUFDO1FBRXJDLElBQUksZ0JBQWdCLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNqQyxPQUFPLGVBQWUsQ0FBQztTQUN4QjtRQUVELE1BQU07UUFDTixJQUFJLG9CQUFvQixHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3hELGVBQWUsQ0FBQyxJQUFJLENBQ2xCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLEVBQUUsb0JBQW9CLENBQUMsZUFBZSxDQUFDLENBQ2pHLENBQUM7UUFFRixnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFnQixFQUFFLEVBQUU7WUFDNUMsTUFBTSxRQUFRLEdBQUcsWUFBWSxD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SSxDQUFDLENBQUM7UUFDL0QsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLE9BQU8sR0FBRyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVEOztPQUVHO0lBQ0ssTUFBTSxDQUFDLG9CQUFvQixDQUFDLFVBQWtCLEVBQUUsZUFBdUI7UUFDN0UsT0FBTyxHQUFHLFVBQVUsSUFBSSxlQUFlLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsWUFBWSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCaW5kaW5nRGF0YSwgQmluZGluZ1Byb3BlcnR5VHlwZSwgUHJvcGVydHlVdGlsIH0gZnJvbSAnLi4vYmluZGluZy1kYXRhL2luZGV4JztcclxuLyoqXHJcbiAqIOi3r+W+hOWkhOeQhuW3peWFt+exu++8iOWkhOeQhi9QYXRoTm9kZTEvUGF0aE5vZGUyLy4uLuagvOW8j+eahOi3r+W+hO+8iVxyXG4gKi9cclxuY2xhc3MgRGF0YVBhdGhVdGlsIHtcclxuXHJcbiAgLyoqXHJcbiAgICog6L2s5o2i5oiQQmluZGluZ0RhdGHlj6/or4bliKvnmoTot6/lvoRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbnZlcnRUb0JpbmRpbmdQYXRoQXJyYXkocGF0aDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gICAgY29uc3QgYmluZGluZ1BhdGhBcnJheSA9IHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKHBhcnQ6IHN0cmluZykgPT4ge1xyXG4gICAgICByZXR1cm4gcGFydCAhPT0gJyc7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBiaW5kaW5nUGF0aEFycmF5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L2s5o2i5Li6RW50aXR55Y+v6K+G5Yir55qE6Lev5b6EXHJcbiAgICog5qC577yaW11cclxuICAgKiDkuLvooajvvJpbJ2lkOnh4eCcsICduYW1lJ10sXHJcbiAgICog5YWz6IGU77yaWydpZDp4eHgnLCAnZGVwdEluZm8nLCAnaWQ6eHh4JywgJ25hbWUnXVxyXG4gICAqIFVEVDogWydpZDp4eHgnLCAndXBkYXRlSW5mbycsICc6JywgJ2NyZWF0ZWRPbiddXHJcbiAgICog5LuO6KGo77yaWydpZDp4eHgnLCAnZWR1cycsICdpZDp4eHgnLCAnbmFtZSddLFxyXG4gICAqIOS7juS7juihqO+8mlsnaWQ6eHh4JywgJ2VkdXMnLCAnaWQ6eHh4JywgJ2dyYWRlcycsICdpZDp4eHgnLCAnbmFtZSddXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjb252ZXJ0VG9FbnRpdHlQYXRoQXJyYXkocGF0aDogc3RyaW5nLCBiaW5kaW5nRGF0YTogQmluZGluZ0RhdGEpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBiaW5kaW5nUGF0aEFycmF5OiBzdHJpbmdbXSA9IHRoaXMuY29udmVydFRvQmluZGluZ1BhdGhBcnJheShwYXRoKTtcclxuICAgIGNvbnN0IGVudGl0eVBhdGhBcnJheTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBpZiAoYmluZGluZ1BhdGhBcnJheS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIGVudGl0eVBhdGhBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmoLnoioLngrlcclxuICAgIGxldCBjdXJyZW50QmluZGluZ09iamVjdCA9IGJpbmRpbmdEYXRhLmxpc3QuY3VycmVudEl0ZW07XHJcbiAgICBlbnRpdHlQYXRoQXJyYXkucHVzaChcclxuICAgICAgdGhpcy5jcmVhdGVQcmltYXJ5S2V5UGF0aChjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5LCBjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5VmFsdWUpXHJcbiAgICApO1xyXG5cclxuICAgIGJpbmRpbmdQYXRoQXJyYXkuZm9yRWFjaCgocHJvcE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBwcm9wSW5mbyA9IFByb3BlcnR5VXRpbC5nZXRQcm9wZXJ0eUJ5TmFtZShjdXJyZW50QmluZGluZ09iamVjdC5wcm9wZXJ0aWVzLCBwcm9wTmFtZSk7XHJcbiAgICAgIHN3aXRjaCAocHJvcEluZm8udHlwZSkge1xyXG4gICAgICAgIGNhc2UgQmluZGluZ1Byb3BlcnR5VHlwZS5QbGFpbjpcclxuICAgICAgICAgIGVudGl0eVBhdGhBcnJheS5wdXNoKHByb3BOYW1lKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQmluZGluZ1Byb3BlcnR5VHlwZS5PYmplY3Q6XHJcbiAgICAgICAgICBjdXJyZW50QmluZGluZ09iamVjdCA9IGN1cnJlbnRCaW5kaW5nT2JqZWN0W3Byb3BOYW1lXTtcclxuICAgICAgICAgIGVudGl0eVBhdGhBcnJheS5wdXNoKHByb3BOYW1lKTtcclxuICAgICAgICAgIGVudGl0eVBhdGhBcnJheS5wdXNoKFxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVByaW1hcnlLZXlQYXRoKGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByaW1hcnlLZXksIGN1cnJlbnRCaW5kaW5nT2JqZWN0LnByaW1hcnlLZXlWYWx1ZSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJpbmRpbmdQcm9wZXJ0eVR5cGUuTGlzdDpcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRCaW5kaW5nTGlzdCA9IGN1cnJlbnRCaW5kaW5nT2JqZWN0W3Byb3BOYW1lXTtcclxuICAgICAgICAgIGN1cnJlbnRCaW5kaW5nT2JqZWN0ID0gY3VycmVudEJpbmRpbmdMaXN0LmN1cnJlbnRJdGVtO1xyXG4gICAgICAgICAgZW50aXR5UGF0aEFycmF5LnB1c2gocHJvcE5hbWUpO1xyXG4gICAgICAgICAgZW50aXR5UGF0aEFycmF5LnB1c2goXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJpbWFyeUtleVBhdGgoY3VycmVudEJpbmRpbmdPYmplY3QucHJpbWFyeUtleSwgY3VycmVudEJpbmRpbmdPYmplY3QucHJpbWFyeUtleVZhbHVlKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZW50aXR5UGF0aEFycmF5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6L2s5o2i5Li6UmVzdFVybOmHjOeahOi3r+W+hFxyXG4gICAqXHJcbiAgICog6L+U5Zue57uT5p6c77yaXHJcbiAgICog5Li76KGo77yIL++8ie+8mi9cclxuICAgKiDku47ooajvvIgvaml3dEVkdXPvvInvvJoveHh4L2ppd3RFZHVzXHJcbiAgICog5LuO5LuO6KGo77yIL2ppd3RFZHVzL2ppd3RHcmFkZXPvvInvvJogL3h4eC9qaXd0RWR1cy94eHgvaml3dEdyYWRlc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY29udmVydFRvUmVzdFVybChwYXRoOiBzdHJpbmcsIGJpbmRpbmdEYXRhOiBCaW5kaW5nRGF0YSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBiaW5kaW5nUGF0aEFycmF5OiBzdHJpbmdbXSA9IHRoaXMuY29udmVydFRvQmluZGluZ1BhdGhBcnJheShwYXRoKTtcclxuICAgIGNvbnN0IHJlc3RQYXRoQXJyYXk6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgbGV0IGN1cnJlbnRCaW5kaW5nT2JqZWN0ID0gYmluZGluZ0RhdGEubGlzdC5jdXJyZW50SXRlbTtcclxuICAgIHJlc3RQYXRoQXJyYXkucHVzaChjdXJyZW50QmluZGluZ09iamVjdC5wcmltYXJ5S2V5VmFsdWUpO1xyXG5cclxuICAgIGJpbmRpbmdQYXRoQXJyYXkuZm9yRWFjaCgocHJvcE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBwcm9wSW5mbyA9IFByb3BlcnR5VXRpbC5nZXRQcm9wZXJ0eUJ5TmFtZShjdXJyZW50QmluZGluZ09iamVjdC5wcm9wZXJ0aWVzLCBwcm9wTmFtZSk7XHJcbiAgICAgIGlmIChwcm9wSW5mby50eXBlICE9PSBCaW5kaW5nUHJvcGVydHlUeXBlLkxpc3QpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJvcEluZm8ubmFtZX3kuI3mmK/lrZDooajlr7nlupTnmoTlsZ7mgKdgKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjdXJyZW50QmluZGluZ0xpc3QgPSBjdXJyZW50QmluZGluZ09iamVjdFtwcm9wTmFtZV07XHJcbiAgICAgIGN1cnJlbnRCaW5kaW5nT2JqZWN0ID0gY3VycmVudEJpbmRpbmdMaXN0LmN1cnJlbnRJdGVtO1xyXG4gICAgICByZXN0UGF0aEFycmF5LnB1c2gocHJvcE5hbWUpO1xyXG4gICAgICByZXN0UGF0aEFycmF5LnB1c2goY3VycmVudEJpbmRpbmdPYmplY3QucHJpbWFyeUtleVZhbHVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOenu+mZpOacgOWQjuS4gOS4quS4u+mUrlxyXG4gICAgcmVzdFBhdGhBcnJheS5wb3AoKTtcclxuICAgIHJldHVybiAnLycgKyByZXN0UGF0aEFycmF5LmpvaW4oJy8nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWPtuWtkOiKgueCueeahFBhdGhcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldExlYWZQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBwYXRoQXJyYXkgPSBEYXRhUGF0aFV0aWwuY29udmVydFRvQmluZGluZ1BhdGhBcnJheShwYXRoKTtcclxuICAgIHJldHVybiBwYXRoQXJyYXkucG9wKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bniLbot6/lvoRcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGdldFBhcmVudFBhdGgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHBhdGhBcnJheSA9IERhdGFQYXRoVXRpbC5jb252ZXJ0VG9CaW5kaW5nUGF0aEFycmF5KHBhdGgpO1xyXG4gICAgcGF0aEFycmF5LnBvcCgpO1xyXG4gICAgcmV0dXJuICcvJyArIHBhdGhBcnJheS5qb2luKCcvJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7rot6/lvoTkuK3nmoTkuLvplK7pg6jliIZcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBjcmVhdGVQcmltYXJ5S2V5UGF0aChwcmltYXJ5S2V5OiBzdHJpbmcsIHByaW1hcnlLZXlWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gYCR7cHJpbWFyeUtleX06JHtwcmltYXJ5S2V5VmFsdWV9YDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IERhdGFQYXRoVXRpbCB9O1xyXG4iXX0=