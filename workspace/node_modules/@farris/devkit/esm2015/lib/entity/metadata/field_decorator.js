import { makePropDecorator } from '../../metadata/index';
function isPlainObject(value) {
    if (!(typeof value === 'object' && value !== null) || Object.prototype.toString.call({}) !== '[object Object]') {
        return false;
    }
    if (Object.getPrototypeOf(value) === null) {
        return true;
    }
    let proto = value;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }
    return Object.getPrototypeOf(value) === proto;
}
/**
 * --------------------------------------------------------------------------------
 * NgField
 * --------------------------------------------------------------------------------
 */
/** 实体属性注解器名称 */
export const NG_FIELD = 'NgField';
function makeNgFieldDecorator(options) {
    let metadata = {
        primary: false,
        foreign: false
    };
    if (options) {
        const paramType = typeof options;
        switch (paramType) {
            case 'boolean':
                metadata.primary = Boolean(options);
                break;
            case 'string':
                metadata.dataField = String(options);
                break;
            case 'object':
                metadata = Object.assign(metadata, options);
                break;
        }
    }
    return metadata;
}
/**
 * 实体属性注解
 *
 * ### 使用示例
 * ```
 * export class UserEntity extends Entity {
 *      @NgField({
 *          primary: true,
 *          dataField: 'id',
 *          ...
 *      })
 *      userid: string;
 *      userName: string;
 * }
 * ```
 */
export const NgField = makePropDecorator(NG_FIELD, makeNgFieldDecorator);
/**
 * --------------------------------------------------------------------------------
 * NgField
 * --------------------------------------------------------------------------------
 */
/** NgList 注解器名称 */
export const NG_LIST = 'NgList';
function makeNgListDecorator(options) {
    if (isPlainObject(options)) {
        return options;
    }
    const type = typeof options;
    if (type === 'string') {
        return {
            dataField: options
        };
    }
    if (type === 'function') {
        return {
            type: options
        };
    }
}
/**
 * 实体属性注解
 * ### 使用示例
 * ```
 * export class UserEntity extends Entity {
 *      @NgField({
 *          primary: true,
 *          dataField: 'id',
 *          ...
 *      })
 *      userid: string;
 *      userName: string;
 *      @NgList({
 *          dataField: 'roles',
 *          formType: Role
 *      })
 *      Roles: EntityList<Role>
 * }
 * ```
 */
export const NgList = makePropDecorator(NG_LIST, makeNgListDecorator);
/**
 * --------------------------------------------------------------------------------
 * NgObject
 * --------------------------------------------------------------------------------
 */
/** NgObject 实体属性注解器名称 */
export const NG_OBJECT = 'NgObject';
function makeNgObjectDecorator(options) {
    if (isPlainObject(options)) {
        return options;
    }
    const type = typeof options;
    if (type === 'string') {
        return {
            dataField: options
        };
    }
    if (type === 'function') {
        return {
            type: options
        };
    }
}
/**
 * 实体属性注解
 * ### 使用示例
 *
 * ```
 *  export class UserEntity entends Entity {
 *      @NgField(true)  // 设置为主键
 *      id: string;
 *      @NgField('name')  // 设置数据映射字段为 name
 *      userName: string;
 *
 *      depid: string;
 *
 *      @NgObject(Department)  // 设置引用类型为 Department 实体类
 *      epartment: Department;
 *  }
 * ```
 */
export const NgObject = makePropDecorator(NG_OBJECT, makeNgObjectDecorator);
/**
 * --------------------------------------------------------------------------------
 * NgDynamicProperty
 * --------------------------------------------------------------------------------
 */
/** NgObject 实体属性注解器名称 */
export const NG_Dynamic = 'NgDynamic';
function makeNgDynamicDecorator(options) {
    if (isPlainObject(options)) {
        return options;
    }
    const type = typeof options;
    if (type === 'string') {
        return {
            dataField: options
        };
    }
    if (type === 'function') {
        return {
            type: options
        };
    }
}
/**
 * 实体属性注解
 * ### 使用示例
 *
 * ```
 *  export class UserEntity entends Entity {
 *      @NgField(true)  // 设置为主键
 *      id: string;
 *      @NgField('name')  // 设置数据映射字段为 name
 *      userName: string;
 *
 *      depid: string;
 *
 *      @NgDynamic(Department)  // 设置引用类型为 Department 实体类
 *      epartment: Department;
 *  }
 * ```
 */
export const NgDynamic = makePropDecorator(NG_Dynamic, makeNgDynamicDecorator);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmllbGRfZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvZW50aXR5L21ldGFkYXRhL2ZpZWxkX2RlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUl6RCxTQUFTLGFBQWEsQ0FBQyxLQUFLO0lBQzFCLElBQUksQ0FBQyxDQUFDLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUssSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLGlCQUFpQixFQUFFO1FBQzlHLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFDRCxJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3pDLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDbEIsT0FBTyxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksRUFBRTtRQUM1QyxLQUFLLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUN0QztJQUNELE9BQU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLENBQUM7QUFDaEQsQ0FBQztBQW1DRDs7OztHQUlHO0FBRUgsZ0JBQWdCO0FBQ2hCLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUM7QUE0RGxDLFNBQVMsb0JBQW9CLENBQUMsT0FBNEM7SUFDeEUsSUFBSSxRQUFRLEdBQW9CO1FBQzlCLE9BQU8sRUFBRSxLQUFLO1FBQ2QsT0FBTyxFQUFFLEtBQUs7S0FDZixDQUFDO0lBRUYsSUFBSSxPQUFPLEVBQUU7UUFDWCxNQUFNLFNBQVMsR0FBRyxPQUFPLE9BQU8sQ0FB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eyBtYWtlUHJvcERlY29yYXRvciB9IGZyb20gJy4uLy4uL21ldGFkYXRhL2luZGV4JztcclxuaW1wb3J0IHsgQ2xhc3NUeXBlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0ZVJ1bGUgfSBmcm9tICcuLi92YWxpZGF0b3IvaW5kZXgnO1xyXG5cclxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSk6IGJvb2xlYW4ge1xyXG4gIGlmICghKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh7fSkgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBudWxsKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgbGV0IHByb3RvID0gdmFsdWU7XHJcbiAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcclxuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcclxuICB9XHJcbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSkgPT09IHByb3RvO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5nUHJvcGVydHkge1xyXG5cclxuICAvKipcclxuICAgKiDmlbDmja7lrZfmrrXlkI1cclxuICAgKiBAc3VtbWFyeVxyXG4gICAqIOacjeWKoeWZqOerr+i/lOWbnueahOaVsOaNruS4re+8jOivpeWxnuaAp+WvueW6lOeahGtleeOAglxyXG4gICAqL1xyXG4gIGRhdGFGaWVsZD86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog5Y6f5aeL5a2X5q615ZCN56ew77yI6K+35Yu/5L2/55So77yM5b6F5Yig6Zmk77yJXHJcbiAgICovXHJcbiAgb3JpZ2luYWxEYXRhRmllbGQ/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOWOn+Wni+Wtl+auteexu+Wei++8iOivt+WLv+S9v+eUqO+8jOW+heWIoOmZpO+8iVxyXG4gICAqL1xyXG4gIG9yaWdpbmFsRGF0YUZpZWxkVHlwZT86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICog5bGe5oCn57G75Z6LXHJcbiAgICovXHJcbiAgdHlwZT86IGFueTtcclxuXHJcbiAgLyoqXHJcbiAgICog5Y6f5aeL5a2X5q61XHJcbiAgICogQGRlc2NyaXB0aW9uIOWvueW6lOWIsHNjaGVtZeeahHBhdGjlsZ7mgKdcclxuICAgKi9cclxuICBwYXRoPzogc3RyaW5nO1xyXG5cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBOZ0ZpZWxkXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqL1xyXG5cclxuLyoqIOWunuS9k+WxnuaAp+azqOino+WZqOWQjeensCAqL1xyXG5leHBvcnQgY29uc3QgTkdfRklFTEQgPSAnTmdGaWVsZCc7XHJcblxyXG4vKiog5a6e5L2T5bGe5oCn5YWD5pWw5o2u6YCJ6aG5ICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmdGaWVsZFByb3BlcnR5IGV4dGVuZHMgTmdQcm9wZXJ0eSB7XHJcblxyXG4gIC8qKiDlsZ7mgKflkI3np7AgKi9cclxuICBwcm9wZXJ0eT86IHN0cmluZztcclxuXHJcbiAgLyoqIOWtl+auteWQjeensCAqL1xyXG4gIGRhdGFGaWVsZD86IHN0cmluZztcclxuXHJcbiAgLyoqIOWOn+Wni+Wtl+auteWQjeensCAqL1xyXG4gIG9yaWdpbmFsRGF0YUZpZWxkPzogc3RyaW5nO1xyXG5cclxuICAvKiog5Y6f5aeL5a2X5q6157G75Z6LICovXHJcbiAgb3JpZ2luYWxEYXRhRmllbGRUeXBlPzogc3RyaW5nO1xyXG5cclxuICAvKiog5piv5ZCm5Li65Li76ZSuICovXHJcbiAgcHJpbWFyeT86IGJvb2xlYW47XHJcblxyXG4gIC8qKiDmmK/lkKbkuLrlpJbplK4gKi9cclxuICBmb3JlaWduPzogYm9vbGVhbjtcclxuXHJcbiAgLyoqIOm7mOiupOWAvCAqL1xyXG4gIGRlZmF1bHRWYWx1ZT86IGFueTtcclxuXHJcbiAgLyoqIOmqjOivgeinhOWImSAqL1xyXG4gIHZhbGlkUnVsZXM/OiBWYWxpZGF0ZVJ1bGVbXTtcclxuXHJcbiAgLyoqIOWIneWni+WAvO+8jOeUqOS6juWtl+autea4heepuuWQjiAqL1xyXG4gIGluaXRWYWx1ZT86IGFueTtcclxuXHJcbiAgLyoqIOWQr+eUqOWkmuivreW9leWFpSAqL1xyXG4gIGVuYWJsZU11bHRpTGFuZ0lucHV0PzogYm9vbGVhbjtcclxuICAvKipcclxuICAgKiDlkK/nlKjml7bljLpcclxuICAgKi9cclxuICBlbmFibGVUaW1lWm9uZT86IGJvb2xlYW47XHJcbiAgLyoqXHJcbiAgICog5Y6f5aeL5a2X5q61XHJcbiAgICogQGRlc2NyaXB0aW9uIOWvueW6lOWIsHNjaGVtZeeahHBhdGjlsZ7mgKdcclxuICAgKi9cclxuICBwYXRoPzogc3RyaW5nO1xyXG59XHJcblxyXG4vKiog5a6e5L2T5bGe5oCn5rOo6Kej5ZmoICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmdGaWVsZFByb3BlcnR5RGVjb3JhdG9yIHtcclxuICAvKipcclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0gb2JqIOWPguaVsG9iaueahOWAvOexu+Wei+WPr+S7peS4uiBOZ0ZpZWxkUHJvcGVydHnjgIFzdHJpbmfjgIFDbGFzc1R5cGVcclxuICAgKlxyXG4gICAqIOW9k+S4unN0cmluZyDml7bvvIzliJnorr7lhbbmmKDlsITlrZfmrrXvvJtcclxuICAgKlxyXG4gICAqIOW9k+S4ukNsYXNzVHlwZeaXtu+8jOWImeiuvue9rumbhuWQiOS4reeahOiusOW9leexu+Wei1xyXG4gICAqL1xyXG4gIChvYmo6IE5nRmllbGRQcm9wZXJ0eSB8IHN0cmluZyB8IENsYXNzVHlwZSk6IGFueTtcclxuICAob2JqPzogTmdGaWVsZFByb3BlcnR5IHwgc3RyaW5nIHwgYm9vbGVhbik6IGFueTtcclxuICBuZXcob2JqPzogTmdGaWVsZFByb3BlcnR5IHwgc3RyaW5nIHwgYm9vbGVhbik6IGFueTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU5nRmllbGREZWNvcmF0b3Iob3B0aW9ucz86IE5nRmllbGRQcm9wZXJ0eSB8IHN0cmluZyB8IGJvb2xlYW4pOiBhbnkge1xyXG4gIGxldCBtZXRhZGF0YTogTmdGaWVsZFByb3BlcnR5ID0ge1xyXG4gICAgcHJpbWFyeTogZmFsc2UsXHJcbiAgICBmb3JlaWduOiBmYWxzZVxyXG4gIH07XHJcblxyXG4gIGlmIChvcHRpb25zKSB7XHJcbiAgICBjb25zdCBwYXJhbVR5cGUgPSB0eXBlb2Ygb3B0aW9ucztcclxuICAgIHN3aXRjaCAocGFyYW1UeXBlKSB7XHJcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxyXG4gICAgICAgIG1ldGFkYXRhLnByaW1hcnkgPSBCb29sZWFuKG9wdGlvbnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgIG1ldGFkYXRhLmRhdGFGaWVsZCA9IFN0cmluZyhvcHRpb25zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICBtZXRhZGF0YSA9IE9iamVjdC5hc3NpZ24obWV0YWRhdGEsIG9wdGlvbnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbWV0YWRhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlrp7kvZPlsZ7mgKfms6jop6NcclxuICpcclxuICogIyMjIOS9v+eUqOekuuS+i1xyXG4gKiBgYGBcclxuICogZXhwb3J0IGNsYXNzIFVzZXJFbnRpdHkgZXh0ZW5kcyBFbnRpdHkge1xyXG4gKiAgICAgIEBOZ0ZpZWxkKHtcclxuICogICAgICAgICAgcHJpbWFyeTogdHJ1ZSxcclxuICogICAgICAgICAgZGF0YUZpZWxkOiAnaWQnLFxyXG4gKiAgICAgICAgICAuLi5cclxuICogICAgICB9KVxyXG4gKiAgICAgIHVzZXJpZDogc3RyaW5nO1xyXG4gKiAgICAgIHVzZXJOYW1lOiBzdHJpbmc7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTmdGaWVsZDogTmdGaWVsZFByb3BlcnR5RGVjb3JhdG9yID0gbWFrZVByb3BEZWNvcmF0b3IoTkdfRklFTEQsIG1ha2VOZ0ZpZWxkRGVjb3JhdG9yKTtcclxuXHJcblxyXG4vKipcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogTmdGaWVsZFxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKi9cclxuXHJcbi8qKiBOZ0xpc3Qg5rOo6Kej5Zmo5ZCN56ewICovXHJcbmV4cG9ydCBjb25zdCBOR19MSVNUID0gJ05nTGlzdCc7XHJcblxyXG4vKipcclxuICog6ZuG5ZCI57G75Z6L5YWD5pWw5o2u6YCJ6aG5XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5nTGlzdFByb3BlcnR5IGV4dGVuZHMgTmdQcm9wZXJ0eSB7XHJcbiAgLyoqIOihqOWQjSAqL1xyXG4gIHRhYmxlTmFtZT86IHN0cmluZztcclxuICAvKiog5a2X5q615ZCN56ewICovXHJcbiAgZGF0YUZpZWxkPzogc3RyaW5nO1xyXG4gIC8qKiDljp/lp4vlrZfmrrXlkI3np7AgKi9cclxuICBvcmlnaW5hbERhdGFGaWVsZD86IHN0cmluZztcclxuICAvKiog5a6e5L2T57G75Z6LICovXHJcbiAgdHlwZT86IGFueTtcclxuICAvKipcclxuICAgKiDljp/lp4vlrZfmrrVcclxuICAgKiBAZGVzY3JpcHRpb24g5a+55bqU5Yiwc2NoZW1l55qEcGF0aOWxnuaAp1xyXG4gICAqL1xyXG4gIHBhdGg/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKiDpm4blkIjnsbvlnovms6jop6PlmaggKi9cclxuZXhwb3J0IGludGVyZmFjZSBOZ0xpc3RQcm9wZXJ0eURlY29yYXRvciB7XHJcbiAgLyoqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIG9iaiDlj4LmlbBvYmrnmoTlgLznsbvlnovlj6/ku6XkuLogTmdMaXN0UHJvcGVydHnjgIFzdHJpbmfjgIFDbGFzc1R5cGVcclxuICAgKlxyXG4gICAqIOW9k+S4unN0cmluZyDml7bvvIzliJnorr7lhbbmmKDlsITlrZfmrrXvvJtcclxuICAgKlxyXG4gICAqIOW9k+S4ukNsYXNzVHlwZeaXtu+8jOWImeiuvue9rumbhuWQiOS4reeahOiusOW9leexu+Wei1xyXG4gICAqL1xyXG4gIChvYmo6IE5nTGlzdFByb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55O1xyXG4gIG5ldyhvYmo6IE5nTGlzdFByb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55O1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTmdMaXN0RGVjb3JhdG9yKG9wdGlvbnM6IE5nTGlzdFByb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55IHtcclxuICBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zKSkge1xyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0eXBlID0gdHlwZW9mIG9wdGlvbnM7XHJcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhRmllbGQ6IG9wdGlvbnNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogb3B0aW9uc1xyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlrp7kvZPlsZ7mgKfms6jop6NcclxuICogIyMjIOS9v+eUqOekuuS+i1xyXG4gKiBgYGBcclxuICogZXhwb3J0IGNsYXNzIFVzZXJFbnRpdHkgZXh0ZW5kcyBFbnRpdHkge1xyXG4gKiAgICAgIEBOZ0ZpZWxkKHtcclxuICogICAgICAgICAgcHJpbWFyeTogdHJ1ZSxcclxuICogICAgICAgICAgZGF0YUZpZWxkOiAnaWQnLFxyXG4gKiAgICAgICAgICAuLi5cclxuICogICAgICB9KVxyXG4gKiAgICAgIHVzZXJpZDogc3RyaW5nO1xyXG4gKiAgICAgIHVzZXJOYW1lOiBzdHJpbmc7XHJcbiAqICAgICAgQE5nTGlzdCh7XHJcbiAqICAgICAgICAgIGRhdGFGaWVsZDogJ3JvbGVzJyxcclxuICogICAgICAgICAgZm9ybVR5cGU6IFJvbGVcclxuICogICAgICB9KVxyXG4gKiAgICAgIFJvbGVzOiBFbnRpdHlMaXN0PFJvbGU+XHJcbiAqIH1cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTmdMaXN0OiBOZ0xpc3RQcm9wZXJ0eURlY29yYXRvciA9IG1ha2VQcm9wRGVjb3JhdG9yKE5HX0xJU1QsIG1ha2VOZ0xpc3REZWNvcmF0b3IpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBOZ09iamVjdFxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKi9cclxuXHJcbi8qKiBOZ09iamVjdCDlrp7kvZPlsZ7mgKfms6jop6PlmajlkI3np7AgKi9cclxuZXhwb3J0IGNvbnN0IE5HX09CSkVDVCA9ICdOZ09iamVjdCc7XHJcblxyXG4vKipcclxuICog5byV55So57G75Z6L5YWD5pWw5o2u6YCJ6aG5XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5nT2JqZWN0UHJvcGVydHkgZXh0ZW5kcyBOZ1Byb3BlcnR5IHtcclxuICAvKiog5pig5bCE5a2X5q61ICovXHJcbiAgZGF0YUZpZWxkPzogc3RyaW5nO1xyXG4gIC8qKiDljp/lp4vlrZfmrrXlkI3np7AgKi9cclxuICBvcmlnaW5hbERhdGFGaWVsZD86IHN0cmluZztcclxuICAvKiog6KGo5ZCNICovXHJcbiAgdGFibGVOYW1lPzogc3RyaW5nO1xyXG4gIC8qKiDlvJXnlKjlrp7kvZPnsbvlnosgKi9cclxuICB0eXBlPzogQ2xhc3NUeXBlO1xyXG4gIC8qKiDmoJHliIbnuqfnsbvlnosgcGF0aHxwYXJlbnQgKi9cclxuICBoaWVyYXJjaHlUeXBlPzogc3RyaW5nO1xyXG4gIC8qKlxyXG4gICAqIOWOn+Wni+Wtl+autVxyXG4gICAqIEBkZXNjcmlwdGlvbiDlr7nlupTliLBzY2hlbWXnmoRwYXRo5bGe5oCnXHJcbiAgICovXHJcbiAgcGF0aD86IHN0cmluZztcclxufVxyXG5cclxuLyoqIOW8leeUqOexu+Wei+azqOino+WZqCAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5nT2JqZWN0UHJvcGVydHlEZWNvcmF0b3Ige1xyXG4gIC8qKlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSBvYmog5Y+C5pWwb2Jq55qE5YC857G75Z6L5Y+v5Lul5Li6IE5nT2JqZWN0UHJvcGVydHnjgIFzdHJpbmfjgIFDbGFzc1R5cGVcclxuICAgKlxyXG4gICAqIOW9k+S4unN0cmluZyDml7bvvIzliJnorr7lhbbmmKDlsITlrZfmrrXvvJtcclxuICAgKlxyXG4gICAqIOW9k+S4ukNsYXNzVHlwZeaXtu+8jOWImeiuvue9rumbhuWQiOS4reeahOiusOW9leexu+Wei1xyXG4gICAqL1xyXG4gIChvYmo6IE5nT2JqZWN0UHJvcGVydHkgfCBzdHJpbmcgfCBDbGFzc1R5cGUpOiBhbnk7XHJcbiAgbmV3KG9iajogTmdPYmplY3RQcm9wZXJ0eSB8IHN0cmluZyB8IENsYXNzVHlwZSk6IGFueTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU5nT2JqZWN0RGVjb3JhdG9yKG9wdGlvbnM6IE5nT2JqZWN0UHJvcGVydHkgfCBzdHJpbmcgfCBDbGFzc1R5cGUpOiBhbnkge1xyXG4gIGlmIChpc1BsYWluT2JqZWN0KG9wdGlvbnMpKSB7XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGNvbnN0IHR5cGUgPSB0eXBlb2Ygb3B0aW9ucztcclxuICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGFGaWVsZDogb3B0aW9uc1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBvcHRpb25zXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWunuS9k+WxnuaAp+azqOino1xyXG4gKiAjIyMg5L2/55So56S65L6LXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiAgZXhwb3J0IGNsYXNzIFVzZXJFbnRpdHkgZW50ZW5kcyBFbnRpdHkge1xyXG4gKiAgICAgIEBOZ0ZpZWxkKHRydWUpICAvLyDorr7nva7kuLrkuLvplK5cclxuICogICAgICBpZDogc3RyaW5nO1xyXG4gKiAgICAgIEBOZ0ZpZWxkKCduYW1lJykgIC8vIOiuvue9ruaVsOaNruaYoOWwhOWtl+auteS4uiBuYW1lXHJcbiAqICAgICAgdXNlck5hbWU6IHN0cmluZztcclxuICpcclxuICogICAgICBkZXBpZDogc3RyaW5nO1xyXG4gKlxyXG4gKiAgICAgIEBOZ09iamVjdChEZXBhcnRtZW50KSAgLy8g6K6+572u5byV55So57G75Z6L5Li6IERlcGFydG1lbnQg5a6e5L2T57G7XHJcbiAqICAgICAgZXBhcnRtZW50OiBEZXBhcnRtZW50O1xyXG4gKiAgfVxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCBOZ09iamVjdDogTmdPYmplY3RQcm9wZXJ0eURlY29yYXRvciA9IG1ha2VQcm9wRGVjb3JhdG9yKE5HX09CSkVDVCwgbWFrZU5nT2JqZWN0RGVjb3JhdG9yKTtcclxuXHJcblxyXG4vKipcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogTmdEeW5hbWljUHJvcGVydHlcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICovXHJcblxyXG4vKiogTmdPYmplY3Qg5a6e5L2T5bGe5oCn5rOo6Kej5Zmo5ZCN56ewICovXHJcbmV4cG9ydCBjb25zdCBOR19EeW5hbWljID0gJ05nRHluYW1pYyc7XHJcblxyXG4vKipcclxuICog5byV55So57G75Z6L5YWD5pWw5o2u6YCJ6aG5XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE5nRHluYW1pY1Byb3BlcnR5IGV4dGVuZHMgTmdQcm9wZXJ0eSB7XHJcbiAgLyoqIOaYoOWwhOWtl+autSAqL1xyXG4gIGRhdGFGaWVsZD86IHN0cmluZztcclxuICAvKiog5Y6f5aeL5a2X5q615ZCN56ewICovXHJcbiAgb3JpZ2luYWxEYXRhRmllbGQ/OiBzdHJpbmc7XHJcbiAgLyoqIOihqOWQjSAqL1xyXG4gIHRhYmxlTmFtZT86IHN0cmluZztcclxuICAvKiog5byV55So5a6e5L2T57G75Z6LICovXHJcbiAgdHlwZT86IENsYXNzVHlwZTtcclxuICAvKipcclxuICAgKiDljp/lp4vlrZfmrrVcclxuICAgKiBAZGVzY3JpcHRpb24g5a+55bqU5Yiwc2NoZW1l55qEcGF0aOWxnuaAp1xyXG4gICAqL1xyXG4gIHBhdGg/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKiDlvJXnlKjnsbvlnovms6jop6PlmaggKi9cclxuZXhwb3J0IGludGVyZmFjZSBOZ0R5bmFtaWNQcm9wZXJ0eURlY29yYXRvciB7XHJcbiAgLyoqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIG9iaiDlj4LmlbBvYmrnmoTlgLznsbvlnovlj6/ku6XkuLogTmdEeW5hbWljUHJvcGVydHnjgIFzdHJpbmfjgIFDbGFzc1R5cGVcclxuICAgKlxyXG4gICAqIOW9k+S4unN0cmluZyDml7bvvIzliJnorr7lhbbmmKDlsITlrZfmrrXvvJtcclxuICAgKlxyXG4gICAqIOW9k+S4ukNsYXNzVHlwZeaXtu+8jOWImeiuvue9rumbhuWQiOS4reeahOiusOW9leexu+Wei1xyXG4gICAqL1xyXG4gIChvYmo6IE5nRHluYW1pY1Byb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55O1xyXG4gIG5ldyhvYmo6IE5nRHluYW1pY1Byb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55O1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTmdEeW5hbWljRGVjb3JhdG9yKG9wdGlvbnM6IE5nRHluYW1pY1Byb3BlcnR5IHwgc3RyaW5nIHwgQ2xhc3NUeXBlKTogYW55IHtcclxuICBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zKSkge1xyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0eXBlID0gdHlwZW9mIG9wdGlvbnM7XHJcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhRmllbGQ6IG9wdGlvbnNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogb3B0aW9uc1xyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlrp7kvZPlsZ7mgKfms6jop6NcclxuICogIyMjIOS9v+eUqOekuuS+i1xyXG4gKlxyXG4gKiBgYGBcclxuICogIGV4cG9ydCBjbGFzcyBVc2VyRW50aXR5IGVudGVuZHMgRW50aXR5IHtcclxuICogICAgICBATmdGaWVsZCh0cnVlKSAgLy8g6K6+572u5Li65Li76ZSuXHJcbiAqICAgICAgaWQ6IHN0cmluZztcclxuICogICAgICBATmdGaWVsZCgnbmFtZScpICAvLyDorr7nva7mlbDmja7mmKDlsITlrZfmrrXkuLogbmFtZVxyXG4gKiAgICAgIHVzZXJOYW1lOiBzdHJpbmc7XHJcbiAqXHJcbiAqICAgICAgZGVwaWQ6IHN0cmluZztcclxuICpcclxuICogICAgICBATmdEeW5hbWljKERlcGFydG1lbnQpICAvLyDorr7nva7lvJXnlKjnsbvlnovkuLogRGVwYXJ0bWVudCDlrp7kvZPnsbtcclxuICogICAgICBlcGFydG1lbnQ6IERlcGFydG1lbnQ7XHJcbiAqICB9XHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE5nRHluYW1pYzogTmdEeW5hbWljUHJvcGVydHlEZWNvcmF0b3IgPSBtYWtlUHJvcERlY29yYXRvcihOR19EeW5hbWljLCBtYWtlTmdEeW5hbWljRGVjb3JhdG9yKTtcclxuIl19