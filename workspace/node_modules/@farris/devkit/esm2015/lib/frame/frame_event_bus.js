import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import { filter } from 'rxjs/operators';
/**
 * 框架事件总线
 */
class FrameEventBus {
    constructor() {
        /**
         * 事件流
         */
        this.events = new Subject();
    }
    /**
     * 注册事件处理
     */
    on(eventType, eventHandler, frameId) {
        this.events.pipe(filter((event) => {
            if (event.type !== eventType) {
                return false;
            }
            return !event.frameIds || event.frameIds.indexOf(frameId) > -1;
        })).subscribe(eventHandler);
    }
    /**
     * 取消事件处理
     */
    off(eventType, frameId) {
        throw new Error('暂不实现');
    }
    /**
     * 触发事件
     */
    trigger(eventType, eventData, frameIds) {
        const event = {
            type: eventType,
            data: eventData,
            frameIds: frameIds
        };
        this.events.next(event);
    }
}
FrameEventBus.decorators = [
    { type: Injectable }
];
export { FrameEventBus };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJhbWVfZXZlbnRfYnVzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kZXZraXQvIiwic291cmNlcyI6WyJsaWIvZnJhbWUvZnJhbWVfZXZlbnRfYnVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFJeEM7O0dBRUc7QUFDSCxNQUNNLGFBQWE7SUFEbkI7UUFRRTs7V0FFRztRQUNJLFdBQU0sR0FBd0IsSUFBSSxPQUFPLEVBQWMsQ0FBQztJQWlDakUsQ0FBQztJQTlCQzs7T0FFRztJQUNILEVBQUUsQ0FBQyxTQUFpQixFQUFFLFlBQWlCLEVBQUUsT0FBZTtRQUN0RCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFpQixFQUFFLEVBQUU7WUFDNUMsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBRTtnQkFDNUIsT0FBTyxLQUFLLENBQUM7YUFDZDtZQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRDs7T0FFRztJQUNILEdBQUcsQ0FBQyxTQUFpQixFQUFFLE9BQWU7UUFDcEMsTUFBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxPQUFPLENBQUMsU0FBaUIsRUFBRSxTQUFlLEVBQUUsUUFBbUI7UUFDN0QsTUFBTSxLQUFLLEdBQWU7WUFDeEIsSUFBSSxFQUFFLFNBQVM7WUFDZixJQUFJLEVBQUUsU0FBUztZQUNmLFFBQVEsRUFBRSxRQUFRO1NBQ25CLENBQUM7UUFDRixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDOzs7WUEzQ0YsVUFBVTs7QUE4Q1gsT0FBTyxFQUFFLGFBQWEsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgRnJhbWVFdmVudCB9IGZyb20gJy4vZnJhbWVfZXZlbnQnO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDmoYbmnrbkuovku7bmgLvnur9cclxuICovXHJcbkBJbmplY3RhYmxlKClcclxuY2xhc3MgRnJhbWVFdmVudEJ1cyB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0b2RvIOaaguS4jeWunueOsOWvueiuoumYheeahOazqOmUgFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uczogYW55O1xyXG5cclxuICAvKipcclxuICAgKiDkuovku7bmtYFcclxuICAgKi9cclxuICBwdWJsaWMgZXZlbnRzOiBTdWJqZWN0PEZyYW1lRXZlbnQ+ID0gbmV3IFN1YmplY3Q8RnJhbWVFdmVudD4oKTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIOazqOWGjOS6i+S7tuWkhOeQhlxyXG4gICAqL1xyXG4gIG9uKGV2ZW50VHlwZTogc3RyaW5nLCBldmVudEhhbmRsZXI6IGFueSwgZnJhbWVJZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmV2ZW50cy5waXBlKGZpbHRlcigoZXZlbnQ6IEZyYW1lRXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnR5cGUgIT09IGV2ZW50VHlwZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gIWV2ZW50LmZyYW1lSWRzIHx8IGV2ZW50LmZyYW1lSWRzLmluZGV4T2YoZnJhbWVJZCkgPiAtMTtcclxuICAgIH0pKS5zdWJzY3JpYmUoZXZlbnRIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPlua2iOS6i+S7tuWkhOeQhlxyXG4gICAqL1xyXG4gIG9mZihldmVudFR5cGU6IHN0cmluZywgZnJhbWVJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+aaguS4jeWunueOsCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6Kem5Y+R5LqL5Lu2XHJcbiAgICovXHJcbiAgdHJpZ2dlcihldmVudFR5cGU6IHN0cmluZywgZXZlbnREYXRhPzogYW55LCBmcmFtZUlkcz86IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBldmVudDogRnJhbWVFdmVudCA9IHtcclxuICAgICAgdHlwZTogZXZlbnRUeXBlLFxyXG4gICAgICBkYXRhOiBldmVudERhdGEsXHJcbiAgICAgIGZyYW1lSWRzOiBmcmFtZUlkc1xyXG4gICAgfTtcclxuICAgIHRoaXMuZXZlbnRzLm5leHQoZXZlbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRnJhbWVFdmVudEJ1cyB9O1xyXG4iXX0=