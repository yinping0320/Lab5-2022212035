
function angularaot(options) {

  const globalReplacement = {
    '(\\.\\.\/)+node_modules\/': '',
    '(\\.\\.\/)+@': '@',
    '(\\.\\.\/)+ui': '@farris/ui',
    // '(\\.\\.\/)': '',
    '/dist/es2015/index': '',
    '/dist/es2015/': '/',
    'ngfactory.js':'ngfactory',
    '(\\.\\.\/)+kendo-angular':'@progress/kendo-angular'
    // '(..\/)+node_modules\/@progress': '@progress',
    // '(..\/)+node_modules\/@farris': '@farris'
  };

  const replacement = {
    // "@farris/ui-common/farris-ui-common.ngfactory": "@farris/farris-ui-common.ngfactory",
    // "@farris/ui-common/column/farris-ui-common-column.ngfactory": "@farris/farris-ui-common-column.ngfactory",
    // "@farris/ui-common/date/farris-ui-common-date.ngfactory": "@farris/farris-ui-common-date.ngfactory",
    // "@farris/ui-common/number/farris-ui-common-number.ngfactory": "@farris/farris-ui-common-number.ngfactory",
    // "@farris/ui-datagrid/farris-ui-datagrid.ngfactory": "@farris/farris-ui-datagrid.ngfactory",
    // "@farris/ui-datatable/farris-ui-datatable.ngfactory": "@farris/farris-ui-datatable.ngfactory",
    // "@farris/ui-datepicker/farris-ui-datepicker.ngfactory": "@farris/farris-ui-datepicker.ngfactory",
    // "@farris/ui-dialog/farris-ui-dialog.ngfactory": "@farris/farris-ui-dialog.ngfactory",
    // "@farris/ui-draggable/farris-ui-draggable.ngfactory": "@farris/farris-ui-draggable.ngfactory",
    // "@farris/ui-dropdown/farris-ui-dropdown.ngfactory": "@farris/farris-ui-dropdown.ngfactory",
    // "@farris/ui-field-group/farris-ui-field-group.ngfactory": "@farris/farris-ui-field-group.ngfactory",
    // "@farris/ui-filter-editor/farris-ui-filter-editor.ngfactory": "@farris/farris-ui-filter-editor.ngfactory",
    // "@farris/ui-flex-layout/farris-ui-flex-layout.ngfactory": "@farris/farris-ui-flex-layout.ngfactory",
    // "@farris/ui-forms/farris-ui-forms.ngfactory": "@farris/farris-ui-forms.ngfactory",
    // "@farris/ui-forms/validation-message/farris-ui-forms-validation-message.ngfactory": "@farris/farris-ui-forms-validation-message.ngfactory",
    // "@farris/ui-input-group/farris-ui-input-group.ngfactory": "@farris/farris-ui-input-group.ngfactory",
    // "@farris/ui-language-textbox/farris-ui-language-textbox.ngfactory": "@farris/farris-ui-language-textbox.ngfactory",
    // "@farris/ui-layout/farris-ui-layout.ngfactory": "@farris/farris-ui-layout.ngfactory",
    // "@farris/ui-loading/farris-ui-loading.ngfactory": "@farris/farris-ui-loading.ngfactory",
    // "@farris/ui-lookup/farris-ui-lookup.ngfactory": "@farris/farris-ui-lookup.ngfactory",
    // "@farris/ui-messager/farris-ui-messager.ngfactory": "@farris/farris-ui-messager.ngfactory",
    // "@farris/ui-modal/farris-ui-modal.ngfactory": "@farris/farris-ui-modal.ngfactory",
    // "@farris/ui-multi-select/farris-ui-multi-select.ngfactory": "@farris/farris-ui-multi-select.ngfactory",
    // "@farris/ui-notify/farris-ui-notify.ngfactory": "@farris/farris-ui-notify.ngfactory",
    // "@farris/ui-pagination/farris-ui-pagination.ngfactory": "@farris/farris-ui-pagination.ngfactory",
    // "@farris/ui-panel/farris-ui-panel.ngfactory": "@farris/farris-ui-panel.ngfactory",
    // "@farris/ui-perfect-scrollbar/farris-ui-perfect-scrollbar.ngfactory": "@farris/farris-ui-perfect-scrollbar.ngfactory",
    // "@farris/ui-popover/farris-ui-popover.ngfactory": "@farris/farris-ui-popover.ngfactory",
    // "@farris/ui-progress-step/farris-ui-progress-step.ngfactory": "@farris/farris-ui-progress-step.ngfactory",
    // "@farris/ui-response-toolbar/farris-ui-response-toolbar.ngfactory": "@farris/farris-ui-response-toolbar.ngfactory",
    // "@farris/ui-responsive/farris-ui-responsive.ngfactory": "@farris/farris-ui-responsive.ngfactory",
    // "@farris/ui-section/farris-ui-section.ngfactory": "@farris/farris-ui-section.ngfactory",
    // "@farris/ui-shortcuts/farris-ui-shortcuts.ngfactory": "@farris/farris-ui-shortcuts.ngfactory",
    // "@farris/ui-sidebar/farris-ui-sidebar.ngfactory": "@farris/farris-ui-sidebar.ngfactory",
    // "@farris/ui-sort-editor/farris-ui-sort-editor.ngfactory": "@farris/farris-sort-editor.ngfactory",
    // "@farris/ui-tabs/farris-ui-tabs.ngfactory": "@farris/farris-tabs.ngfactory",
    // "@farris/ui-tag/farris-ui-tag.ngfactory": "@farris/farris-tag.ngfactory",
    // "@farris/ui-time-spinner/farris-ui-time-spinner.ngfactory": "@farris/farris-time-spinner.ngfactory",
    // "@farris/ui-treetable/farris-ui-treetable.ngfactory": "@farris/farris-ui-treetable.ngfactory",
    // "@farris/ui-wizard/farris-ui-wizard.ngfactory": "@farris/farris-ui-wizard.ngfactory",
    // "@farris/component-querycondition/farris-component-querycondition.ngfactory": "@farris/farris-component-querycondition.ngfactory"
  }

  return {
    name: 'angularaot',
    generateBundle: function (outputOptions, outputBundle) {
      if (outputOptions.format === 'system') {
        for (const bundleName in outputBundle) {
          const outputChunk = outputBundle[bundleName];
          let code = outputChunk.code;

          for (const globalKey in globalReplacement) {
            if (globalReplacement.hasOwnProperty(globalKey)) {
              const replaceReg = new RegExp(globalKey, 'g');
              code = code.replace(replaceReg, globalReplacement[globalKey]);
            }
          }

          for (const key in replacement) {
            if (replacement.hasOwnProperty(key)) {
              code = code.replace(key, replacement[key]);
            }
          }
          outputChunk.code = code;
        }
      }
    }
  };

};
exports.angularaot = angularaot;
