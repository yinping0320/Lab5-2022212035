/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/upload/f-file-upload.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, ViewChild, EventEmitter, Output, ContentChild, ElementRef, } from "@angular/core";
import { FFileSelectDirective, FFileDropDirective, FFileUploadDirective, } from "../../directive/index";
import { FFileUtils } from "../../utils/index";
import { FFileUploadAPIService, FFileUploaderService, } from "../../service/index";
import { NotifyService } from "@farris/ui-notify";
import { Observable, Subject } from "rxjs";
import { trigger, style, state, animate, transition } from "@angular/animations";
import { NgZone } from "@angular/core";
var FFileUploadComponent = /** @class */ (function () {
    function FFileUploadComponent(uploadAPISer, fileUploaderSer, notifyService, ngZone) {
        var _this = this;
        this.uploadAPISer = uploadAPISer;
        this.fileUploaderSer = fileUploaderSer;
        this.notifyService = notifyService;
        this.ngZone = ngZone;
        this.cls = true;
        // 启用图片预览
        this.enableImagePreview = true;
        // 启用立即上传
        this.uploadImmediately = false;
        // 上传完成后隐藏
        this.uploadedThenHide = true;
        // 禁用状态
        this.disabled = false;
        /**
         * 启用分块上传
         */
        this.enableSliceUpload = true;
        /**
         * 分块上传每片大小，单位：M, 默认 1M/块
         */
        this.chunkSize = 1;
        this.tVisible = true;
        // 需要重置,通过不断的赋值来改变
        this.needReset = new Subject();
        // 启用拖拽
        this.enableDrop = false;
        this.dropText = "可将文件拖拽此处";
        // 启用选择文件按钮
        this.enableSelect = true;
        this.selectText = "点击上传";
        // 启用多选
        this.multiple = true;
        // 已经上传文件
        this.uploadedCount = 0;
        // 宽度阈值，当宽度超过760时候，没有附件上传时，宽度是固定值，有附件上传时，有最大宽度值
        this.widthThreshold = 760;
        // 上传和删除对外抛出的事件
        this.fUploadDoneEvent = new EventEmitter();
        this.fUploadRemovedEvent = new EventEmitter();
        // 允许上传的文件类型
        this.allowedContentTypes = "*";
        // 默认不限制附件上传个数
        this.maxUploads = 0;
        // 单位KB，默认是12M
        this.maxFileSize = "12MB";
        this.selfUploadOpts = {};
        // 控制是否显示追加附件的面板
        this.showAppendPanel = false;
        // 显示loading
        this.showLoading = false;
        this.settings = {
            disabled: this.disabled,
            visible: this.visible,
        };
        this.files = [];
        this.uploadSelectInput = new EventEmitter();
        this.uploadDragInput = new EventEmitter();
        // 重置
        this.needReset.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.reset();
        }));
        FFileUtils.getLocalState(this.notifyService.localeService);
    }
    Object.defineProperty(FFileUploadComponent.prototype, "visibleState", {
        // 不可见
        get: 
        // 不可见
        /**
         * @return {?}
         */
        function () {
            return !this.visible;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "selfDirectiveDefine", {
        // 自定义样式
        get: 
        // 自定义样式
        /**
         * @return {?}
         */
        function () {
            if (this.fFileUploadDir) {
                return true;
            }
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "uploading", {
        get: /**
         * @return {?}
         */
        function () {
            return this.files.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "visible", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tVisible;
        },
        // 是否可见
        set: 
        // 是否可见
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.tVisible = value;
            if (!value) {
                this.reset();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "options", {
        get: /**
         * @return {?}
         */
        function () {
            return this.selfUploadOpts;
        },
        // 上传配置项
        set: 
        // 上传配置项
        /**
         * @param {?} uploadOpts
         * @return {?}
         */
        function (uploadOpts) {
            if (uploadOpts) {
                if (uploadOpts.hasOwnProperty("allowedContentTypes")) {
                    this.allowedContentTypes = uploadOpts.allowedContentTypes.join(",");
                    this.allowedContentTypes =
                        this.allowedContentTypes == "" ? "*" : this.allowedContentTypes;
                }
                if (uploadOpts.hasOwnProperty("maxUploads")) {
                    this.maxUploads = uploadOpts.maxUploads;
                }
                if (uploadOpts.hasOwnProperty("maxFileSize")) {
                    this.maxFileSize = FFileUtils.humanizeBytes(1024 * 1024 * uploadOpts.maxFileSize);
                }
                this.selfUploadOpts = Object.assign(this.selfUploadOpts, uploadOpts);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileUploadComponent.prototype, "extendServerConfig", {
        /**
         * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置
         */
        set: /**
         * 每个组可以设置特殊服务参数，来覆盖默认的统一模块级配置
         * @param {?} config
         * @return {?}
         */
        function (config) {
            if (config) {
                this.fileUploaderSer.setExtendServerConfig(config);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FFileUploadComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // 模板的情况下只能是立即上传
        if (this.fFileUploadDir) {
            this.uploadImmediately = true;
        }
        this.computeWidthThreshold();
    };
    /**
     * 视图初始化后
     */
    /**
     * 视图初始化后
     * @return {?}
     */
    FFileUploadComponent.prototype.ngAfterViewInit = /**
     * 视图初始化后
     * @return {?}
     */
    function () { };
    /**
     * 触发绑定
     */
    /**
     * 触发绑定
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.triggerFileSelect = /**
     * 触发绑定
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        ev && ev.stopPropagation();
        // 禁用时
        if (this.disabled) {
            return false;
        }
        this.fileUpload.elementRef.nativeElement.click();
    };
    /**
     * 选择附件按钮，处理抛出事件
     * @param output
     */
    /**
     * 选择附件按钮，处理抛出事件
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.selectUploadOutput = /**
     * 选择附件按钮，处理抛出事件
     * @param {?} output
     * @return {?}
     */
    function (output) {
        this.uploadOutputHandler(output);
    };
    /**
     * 拖拽区域处理抛出事件
     * @param output
     */
    /**
     * 拖拽区域处理抛出事件
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.dropUploadOutput = /**
     * 拖拽区域处理抛出事件
     * @param {?} output
     * @return {?}
     */
    function (output) {
        if (this.enableSelect) {
            return;
        }
        // 暂不处理拖拽的事件
        if (output.type !== "dragOver" &&
            output.type !== "dragOut" &&
            output.type !== "drop") {
            this.uploadOutputHandler(output);
        }
    };
    /**
     * allAddedToQueue 选中文件追加到队列
     * @param output
     */
    /**
     * allAddedToQueue 选中文件追加到队列
     * @private
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.uploadOutputHandler = /**
     * allAddedToQueue 选中文件追加到队列
     * @private
     * @param {?} output
     * @return {?}
     */
    function (output) {
        // 显示追加面板
        if (this.showAppendPanel) {
            this.showAppendPanel = false;
        }
        if (output.type === "addedToQueue" && typeof output.file !== "undefined") {
            this.files.push({ type: output.type, file: output.file });
            // 如果启用立即上传
            if (this.uploadImmediately) {
                this.showLoading = true;
                this.startUpload(output.file);
            }
        }
        else if (output.type === "start") {
            // 开始上传
            this.updateFilesState(output, "");
        }
        else if (output.type == "done") {
            // 上传完成
            this.updateFilesState(output, "done");
            this.fUploadDoneEvent.emit(FFileUtils.changeUploadFileToFileExtend(output.files));
            this.hideAfterLoaded(output);
            // 隐藏正在加载
            if (this.uploadImmediately &&
                this.showLoading &&
                this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
        else if (output.type === "cancelled" ||
            output.type === "removed" ||
            output.type == "error") {
            // 删除或者移除文件
            this.files = this.files.filter((/**
             * @param {?} fileOutput
             * @return {?}
             */
            function (fileOutput) {
                return (output.files.findIndex((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return fileOutput.file.id == item.id; })) < 0);
            }));
            // 隐藏正在加载
            if (this.uploadImmediately &&
                this.showLoading &&
                this.allFileUploaded()) {
                this.showLoading = false;
            }
            this.showNotify(output);
        }
        else if (output.type === "rejected" &&
            typeof output.file !== "undefined") {
            // 上传被拒绝
            this.showNotify(output);
            // 隐藏正在加载
            if (this.uploadImmediately &&
                this.showLoading &&
                this.allFileUploaded()) {
                this.showLoading = false;
            }
        }
    };
    /**
     * @private
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.showNotify = /**
     * @private
     * @param {?} output
     * @return {?}
     */
    function (output) {
        /** @type {?} */
        var notifyType = "warning";
        if (output.type == "cancelled" || output.type == "removed") {
            notifyType = "success";
        }
        /** @type {?} */
        var message = output.hasOwnProperty("message") ? output["message"] : "";
        this.notifyService[notifyType]((/** @type {?} */ ({
            msg: message,
            timeout: 3000,
        })));
    };
    // 判断是否所有文件都已上传
    // 判断是否所有文件都已上传
    /**
     * @private
     * @return {?}
     */
    FFileUploadComponent.prototype.allFileUploaded = 
    // 判断是否所有文件都已上传
    /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var findNotDoneIndex = this.files.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var doneTypes = ["done", "cancelled", "removed"];
            /** @type {?} */
            var findTypeIndex = doneTypes.findIndex((/**
             * @param {?} type
             * @return {?}
             */
            function (type) {
                return type == item.type;
            }));
            return findTypeIndex == -1;
        }));
        return findNotDoneIndex == -1 ? true : false;
    };
    /**
     * 更新附件的状态
     * @param output
     * @param eventType
     */
    /**
     * 更新附件的状态
     * @private
     * @param {?} output
     * @param {?} eventType
     * @return {?}
     */
    FFileUploadComponent.prototype.updateFilesState = /**
     * 更新附件的状态
     * @private
     * @param {?} output
     * @param {?} eventType
     * @return {?}
     */
    function (output, eventType) {
        var _this = this;
        /** @type {?} */
        var startFiles = [];
        if (output.hasOwnProperty("files") && output.files.length > 0) {
            // 此处更新界面可能有性能问题
            startFiles = output.files;
        }
        else if (typeof output.file !== "undefined") {
            startFiles = [output.file];
        }
        eventType = eventType ? eventType : output.type;
        startFiles.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            /** @type {?} */
            var index = _this.files.findIndex((/**
             * @param {?} fileOutput
             * @return {?}
             */
            function (fileOutput) {
                return typeof item !== "undefined" && fileOutput.file.id === item.id;
            }));
            // 变更状态
            if (index > -1) {
                _this.files[index] = { type: eventType, file: item };
            }
        }));
    };
    /**单个文件上传 */
    /**
     * 单个文件上传
     * @param {?} file
     * @return {?}
     */
    FFileUploadComponent.prototype.startUpload = /**
     * 单个文件上传
     * @param {?} file
     * @return {?}
     */
    function (file) {
        /**
         * Todo:后续可以从上传区块上取内容进行扩展
         * @type {?}
         */
        var event = this.uploadAPISer.getAssignAPI("upload", {
            file: file,
            type: this.enableSliceUpload ? 'sliceUpload' : 'upload',
            data: this.extendDatas,
            chunkSize: this.chunkSize
        });
        this.inputUploadEventEmit(event);
    };
    /**
     * 上传所有
     */
    /**
     * 上传所有
     * @return {?}
     */
    FFileUploadComponent.prototype.startUploadAll = /**
     * 上传所有
     * @return {?}
     */
    function () {
        /**
         *  Todo：后续，如果每个数据不一样，此处的数据得重新归集
         * @type {?}
         */
        var event = this.uploadAPISer.getAssignAPI("uploadAll", {
            type: this.enableSliceUpload ? 'sliceUpload' : "uploadAll",
            files: [],
            data: this.extendDatas,
            chunkSize: this.chunkSize
        });
        this.inputUploadEventEmit(event);
    };
    /**
     * 已上传隐藏属性
     */
    /**
     * 已上传隐藏属性
     * @param {?} output
     * @return {?}
     */
    FFileUploadComponent.prototype.hideAfterLoaded = /**
     * 已上传隐藏属性
     * @param {?} output
     * @return {?}
     */
    function (output) {
        var _this = this;
        //上传完成后删除
        if (this.uploadedThenHide) {
            // this.ngZone.runOutsideAngular(() => {
            setTimeout((/**
             * @return {?}
             */
            function () {
                // 删除或者移除文件
                /** @type {?} */
                var ids = output.files.map((/**
                 * @param {?} fileItem
                 * @return {?}
                 */
                function (fileItem) { return fileItem.id; }));
                _this.files = _this.files.filter((/**
                 * @param {?} fileOutput
                 * @return {?}
                 */
                function (fileOutput) {
                    /** @type {?} */
                    var tIndex = ids.findIndex((/**
                     * @param {?} tId
                     * @return {?}
                     */
                    function (tId) { return tId == fileOutput.file.id; }));
                    return tIndex > -1 ? false : true;
                }));
                /** @type {?} */
                var event = _this.uploadAPISer.getAssignAPI("hide", {
                    type: "hide",
                    id: ids.join(","),
                });
                _this.inputUploadEventEmit(event);
            }), 1000);
            // });
        }
    };
    /**
     * 取消上传
     */
    /**
     * 取消上传
     * @param {?} id
     * @return {?}
     */
    FFileUploadComponent.prototype.cancelUpload = /**
     * 取消上传
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI("cancel", {
            id: id,
            type: "cancel",
        });
        this.inputUploadEventEmit(event);
    };
    /**
     * 删除已上传文件
     */
    /**
     * 删除已上传文件
     * @return {?}
     */
    FFileUploadComponent.prototype.removelAllUpload = /**
     * 删除已上传文件
     * @return {?}
     */
    function () {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI("removeAll", {
            type: "removeAll",
            files: [],
        });
        this.inputUploadEventEmit(event);
    };
    /**
     * 删除已上传文件
     */
    /**
     * 删除已上传文件
     * @param {?} id
     * @return {?}
     */
    FFileUploadComponent.prototype.removeFile = /**
     * 删除已上传文件
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var event = this.uploadAPISer.getAssignAPI("remove", {
            id: id,
            type: "remove",
        });
        this.inputUploadEventEmit(event);
    };
    /** */
    /**
     *
     * @param bytes
     */
    /** */
    /**
     *
     * @param {?} bytes
     * @return {?}
     */
    FFileUploadComponent.prototype.formateBytes = /** */
    /**
     *
     * @param {?} bytes
     * @return {?}
     */
    function (bytes) {
        return FFileUtils.humanizeBytes(bytes);
    };
    /**
     * 判断是图片
     * @param type
     */
    /**
     * 判断是图片
     * @param {?} type
     * @return {?}
     */
    FFileUploadComponent.prototype.isImage = /**
     * 判断是图片
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type.indexOf("image") > -1;
    };
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     */
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     * @return {?}
     */
    FFileUploadComponent.prototype.judgeContentTypeLimit = 
    // inProgress(progress) {
    //   console.log('进入inProgress');
    //   if (progress.data.percentage == 100) {
    //     return 'done'
    //   }
    //   if (progress.data.percentage == 0) {
    //     return 'uploadi';
    //   }
    //   return 'progress';
    // }
    /**
     * 是否判断有类型限制
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tTypes = this.allowedContentTypes.split(",");
        /** @type {?} */
        var hasAllIndex = tTypes.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item == "*";
        }));
        return hasAllIndex == -1;
    };
    /**
     * 判断是否有文件大小的限制
     */
    /**
     * 判断是否有文件大小的限制
     * @return {?}
     */
    FFileUploadComponent.prototype.judegeFileSizeLimit = /**
     * 判断是否有文件大小的限制
     * @return {?}
     */
    function () {
        return this.maxFileSize != "0 Byte";
    };
    /**
     * 追加
     */
    /**
     * 追加
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.appendNewFiles = /**
     * 追加
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        //启用拖拽
        if (this.enableDrop) {
            this.showAppendPanel = true;
        }
        else {
            ev && ev.stopPropagation();
            this.triggerFileSelect(ev);
        }
    };
    /**
     * 关闭追加面板
     */
    /**
     * 关闭追加面板
     * @return {?}
     */
    FFileUploadComponent.prototype.closeAppendPanel = /**
     * 关闭追加面板
     * @return {?}
     */
    function () {
        this.showAppendPanel = false;
    };
    /**
     * 统一触发 附件选择和拖拽附件的事件
     * @param ev
     */
    /**
     * 统一触发 附件选择和拖拽附件的事件
     * @private
     * @param {?} ev
     * @return {?}
     */
    FFileUploadComponent.prototype.inputUploadEventEmit = /**
     * 统一触发 附件选择和拖拽附件的事件
     * @private
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        // 如果文件上传启用
        if (this.enableSelect) {
            this.uploadSelectInput.emit(ev);
        }
        else {
            this.uploadDragInput.emit(ev);
        }
    };
    // 重置方法
    // 重置方法
    /**
     * @return {?}
     */
    FFileUploadComponent.prototype.reset = 
    // 重置方法
    /**
     * @return {?}
     */
    function () {
        this.files = [];
        // 如果文件上传启用
        if (this.enableSelect) {
            this.fileUpload && this.fileUpload.reset();
        }
        else {
            this.fileDropUpload && this.fileDropUpload.reset();
        }
        this.computeWidthThreshold();
    };
    /**
     * 计算阈值
     */
    /**
     * 计算阈值
     * @private
     * @return {?}
     */
    FFileUploadComponent.prototype.computeWidthThreshold = /**
     * 计算阈值
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        //
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var self = _this;
            setTimeout((/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var tNeedComputedCls = false;
                if (self.fFileUploadDir || !self.visible) {
                    tNeedComputedCls = false;
                }
                // 计算元素
                /** @type {?} */
                var assistEl = self.fFileUploadAssist
                    ? self.fFileUploadAssist.nativeElement
                    : null;
                if (assistEl) {
                    assistEl.parentElement.classList["add"]("ffileupload-default");
                }
                return;
                // // 超过阈值
                // if (assistEl && assistEl.getBoundingClientRect().width > self.widthThreshold) {
                //   tNeedComputedCls = true;
                // } else {
                //   tNeedComputedCls = false;
                // }
                // if (assistEl) {
                //   let actionFun = tNeedComputedCls ? 'add' : 'remove';
                //   assistEl.parentElement.classList[actionFun]('ffileupload-default');
                // }
            }), 0);
        }));
    };
    FFileUploadComponent.decorators = [
        { type: Component, args: [{
                    selector: "f-file-upload",
                    template: "<div class=\"ffileupload--assist\" #uploadAssist></div>\r\n<ng-container *ngIf=\"visible\">    \r\n    <ng-container *ngIf=\"enableSelect\">\r\n        <input type=\"file\" class=\"ffileupload--browser\" [disabled]=\"disabled\" FFileSelect [options]=\"options\"\r\n            (uploadOutput)=\"selectUploadOutput($event)\" [uploadInput]=\"uploadSelectInput\" [multiple]=\"multiple\"\r\n            [accept]=\"allowedContentTypes\"  [uploadedCount]=\"uploadedCount\">\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!fFileUploadDir\">\r\n        <ng-container *ngIf=\"enableDrop\">\r\n            <div class=\"ffileupload--drop-wrapper\"\r\n                [ngClass]=\"{'drop-wrapper--append':files.length>0,'drop-wrapper--append-show':showAppendPanel}\">\r\n                <div class=\"action-wrapper--is-upload drop-wrapper--header\" [ngClass]=\"showAppendPanel?'':'d-none'\">\r\n                    <div class=\"action-wrapper--header-left\">\r\n                        <button type=\"button\" class=\"btn btn-link mr-2\" (click)=\"closeAppendPanel()\">{{ 'upload.back' | upLocale }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"drop-wrapper--drop-area\" FFileDrop [options]=\"options\"\r\n                    (uploadOutput)=\"dropUploadOutput($event)\" [uploadInput]=\"uploadDragInput\" [disabled]=\"disabled\" [uploadedCount]=\"uploadedCount\">\r\n\r\n                    <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\" (click)=\"triggerFileSelect($event)\">\r\n                        <i class=\"f-icon f-icon-upload_big\"></i>\r\n                    </button>\r\n                    <div class=\"drop-wrapper--action\" *ngIf=\"!disabled\">\r\n                        <label class=\"drop-wrapper--action-label\">\r\n                            {{dropText | upLocaleDefault:'\u53EF\u5C06\u6587\u4EF6\u62D6\u62FD\u6B64\u5904':'upload.drop' }}\r\n                        </label> {{ 'upload.orText' | upLocale }} <button type=\"button\" class=\"drop-wrapper--action-select\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">{{selectText|upLocaleDefault:'\u70B9\u51FB\u4E0A\u4F20':'upload.select'}}</button>\r\n                    </div>\r\n                    <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"files.length>0\">\r\n                <ng-container *ngTemplateOutlet=\"afterSelectHeader\"></ng-container>\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!enableDrop&&enableSelect\">\r\n            <div class=\"ffileupload--action-wrapper\" [ngClass]=\"{'select-wrapper--append':files.length>0}\">\r\n                <ng-container *ngIf=\"files.length==0;else afterSelectHeader\">\r\n                    <div class=\"action-wrapper--before-upload\">\r\n                        <button type=\"button\" class=\"btn-upload-icon\" [disabled]=\"disabled\"\r\n                            (click)=\"triggerFileSelect($event)\">\r\n                            <i class=\"f-icon f-icon-upload_big\"></i>\r\n                        </button>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n        </ng-container>\r\n    </ng-container>\r\n    <div *ngIf=\"fFileUploadDir&&fFileUploadDir.templateRef\" (click)=\"triggerFileSelect($event)\">\r\n        <ng-container [ngTemplateOutlet]=\"fFileUploadDir.templateRef\" [ngTemplateOutletContext]=\"{'disabled':disabled,'settings':settings,'uploadedCount':uploadedCount}\"></ng-container>\r\n    </div>\r\n    <!--\u5F53\u9009\u4E2D\u6587\u4EF6\u4E4B\u540E\u9690\u85CF-->\r\n    <ng-container *ngIf=\"!fFileUploadDir&&!enableDrop&&enableSelect&&files.length==0\">\r\n        <ng-container *ngTemplateOutlet=\"beforeUploadSupportInfo\"></ng-container>\r\n    </ng-container>\r\n    <!-- <div class=\"ffileupload--common-action\" *ngIf=\"files.length>0\">\r\n    <span class=\"common-action--info\">\u5171<span class=\"text-info mx-1\">{{files.length}}</span>\u4E2A\u6587\u4EF6</span>\r\n   <button type=\"button\" class=\"btn btn-link\" *ngIf=\"!uploadImmediately\">\u4E0A\u4F20\u6240\u6709</button>\r\n</div> -->\r\n    <ul class=\"ffileupload--list\" *ngIf=\"!uploadImmediately\">\r\n        <ng-container *ngFor=\"let fileItem of files\">\r\n            <!-- <ng-container *ngIf=\"!uploadImmediately||fileItem.type!='done'\"> -->\r\n            <li class=\"ffileupload--item\" [@hideUploaded]=\"uploadImmediately&&fileItem.type=='done'?'hide':''\">\r\n                <fieldset class=\"ffileupload--file-wrapper\">\r\n                    <legend>{{fileItem['file'].id}}</legend>\r\n                    <input type=\"hidden\" name=\"ffileupload\" [value]=\"fileItem['file'].nativeFile.name\" />\r\n                    <div class=\"ffileupload--file\"\r\n                        [ngClass]=\"isImage(fileItem['file'].type)?'ffileupload--file-imgpreview':'ffileupload--file-panel'\">\r\n                        <div class=\"ffileupload--action\">\r\n                            <div class=\"ffileupload--action-basic\">\r\n                                <div class=\"action-basic--info\">\r\n                                    <div class=\"action-basic--info-title\" [title]=\"fileItem['file'].nativeFile.name\">{{fileItem['file'].nativeFile.name}}</div>\r\n                                    <div class=\"action-basic--info-byte\">{{formateBytes(fileItem['file'].size)}}</div>\r\n                                </div>\r\n                                <ng-container [ngSwitch]=\"fileItem.type\">\r\n                                    <ng-container *ngSwitchCase=\"'done'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>{{ 'upload.hasUploaded' | upLocale }}</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn action-btn--done\" [title]=\"'upload.hasUploaded' | upLocale\"><i\r\n                                                    class=\"f-icon f-icon-checkmark\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\" [title]=\"'upload.delText' | upLocale\"\r\n                                                (click)=\"removeFile(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchCase=\"'start'\">\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>{{ 'upload.uploading' | upLocale }}</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\"><i\r\n                                                    class=\"ffile-spin f-icon f-icon-refresh\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                    <ng-container *ngSwitchDefault>\r\n                                        <div class=\"action-basic--state\">\r\n                                            <span>{{ 'upload.waitUpload' | upLocale }}</span>\r\n                                        </div>\r\n                                        <div class=\"action-basic--action\">\r\n                                            <span class=\"action-basic--action-btn uploadpreview-btn--primary\" [title]=\"'upload.upload' | upLocale\"\r\n                                                (click)=\"startUpload(fileItem['file'])\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_upload\"></i></span>\r\n                                            <span class=\"action-basic--action-btn\"  [title]=\"'upload.remove' | upLocale\"\r\n                                                (click)=\"cancelUpload(fileItem['file'].id)\"><i\r\n                                                    class=\"f-icon f-icon-enclosure_delete\"></i></span>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"enableImagePreview&&isImage(fileItem['file'].type)\">\r\n                            <f-file-view-image [file]=\"fileItem['file'].nativeFile\"></f-file-view-image>\r\n                        </ng-container>\r\n                    </div>\r\n                </fieldset>\r\n            </li>\r\n            <!-- </ng-container> -->\r\n        </ng-container>\r\n    </ul>\r\n    <div class=\"ffile-load-wrapper\" *ngIf=\"showLoading\">\r\n        <div class=\"loader\"></div>\r\n    </div>\r\n</ng-container>\r\n<ng-template #afterSelectHeader>\r\n    <div class=\"action-wrapper--is-upload\">\r\n        <div class=\"action-wrapper--header-title\"><span class=\"common-action--info\">{{ 'upload.waitUpload' | upLocale }}<span\r\n                    class=\"mx-1\">{{files.length}}</span>{{ 'upload.numFile' | upLocale }}</span></div>\r\n        <div class=\"action-wrapper--header-right\">\r\n            <button type=\"button\" class=\"btn btn-secondary btn-icontext\" (click)=\"appendNewFiles($event)\">\r\n                <span class=\"f-icon f-icon-add\"></span>{{ 'upload.upload' | upLocale }}\r\n            </button>\r\n        </div>\r\n        <div class=\"action-wrapper--header-left\">\r\n            <button type=\"button\" class=\"btn btn-primary  mr-2\" (click)=\"startUploadAll()\">{{ 'upload.mutilUpload' | upLocale }}</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"removelAllUpload()\">{{ 'upload.cancelUpload' | upLocale }}</button>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n<ng-template #beforeUploadSupportInfo>\r\n    <div class=\"ffileupload--support-info\">\r\n        <ul class=\"support-info--wrapper\">\r\n            <li *ngIf=\"judgeContentTypeLimit()\">\r\n                <span>{{'uploadAndPreview.supportType' | upLocale }}\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{allowedContentTypes}}</span>\r\n            </li>\r\n            <li *ngIf=\"judegeFileSizeLimit()\">\r\n                <span>{{'uploadAndPreview.maxSize' | upLocale }}\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{maxFileSize}}</span>\r\n            </li>\r\n            <li *ngIf=\"maxUploads>0\">\r\n                <span>{{'uploadAndPreview.maxFileCount' | upLocale }}\uFF1A</span>\r\n                <span class=\"support-info--item-detail\">{{'uploadAndPreview.maxCountShow' | upLocale}}</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</ng-template>",
                    providers: [FFileUploaderService],
                    animations: [
                        trigger("hideUploaded", [
                            state("show", style({ opacity: 1, height: "*" })),
                            state("hide", style({ opacity: 0, height: 0 })),
                            // transition('* => void', [
                            //   style({ opacity: 1}),
                            //   animate(200, style({ opacity: 0}))
                            // ])
                            transition("* => hide", animate("0.5s")),
                        ]),
                    ],
                    styles: [":host{position:relative;display:block;padding:10px;background:#fafcfd;max-width:100%;max-height:100%;outline:0;border:1px dashed #d8dfed;border-radius:3px;font-size:13px;-webkit-transition:height .2s linear;transition:height .2s linear}:host.ffileupload-unvisible{display:none!important}:host.ffileupload-selfdefine{background:0 0;border:none;padding:0}.ffileupload--browser{position:absolute;margin:0;padding:0;left:1em;top:-9000px;width:calc(100% - 2em);opacity:0;font-size:0}:host.ffileupload-default{width:435px}:host.ffileupload-uploading{width:654px}.ffileupload--assist{width:100%;height:0;opacity:0}.drop-wrapper--drop-area{text-align:center;padding:10px 0 0}.drop-wrapper--action{padding:10px 16px 6px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;color:#6a6f79;-webkit-box-pack:center;justify-content:center}.drop-wrapper--drop-area .ffileupload--support-info{padding-top:0}.drop-wrapper--action-label{margin:0}.drop-wrapper--action-select{color:#1e5fb3;margin:0;padding:0 4px;box-shadow:none;outline:0;background:0 0;border:none}.ffileupload--action{cursor:pointer}.drop-wrapper--header{margin-bottom:.5rem!important}.drop-wrapper--append{position:absolute;top:0;left:0;right:0;z-index:100;height:0;background:rgba(250,250,250,.9);border-radius:1rem;overflow:hidden;-webkit-transition:height .2s linear;transition:height .2s linear}.drop-wrapper--append-show{padding:10px;height:210px}.action-wrapper--before-upload{padding:.5rem;text-align:center}.ffileupload--action-wrapper .btn-upload-icon,.ffileupload--drop-wrapper .btn-upload-icon{border:none;outline:0;box-shadow:none;color:#ccd5e1;background:0 0;margin:0 auto .5rem 0;cursor:pointer;padding:0}.ffileupload--action-wrapper .btn-upload-icon:disabled,.ffileupload--drop-wrapper .btn-upload-icon:disabled{cursor:default;opacity:.4}.ffileupload--action-wrapper .btn-upload-icon:hover,.ffileupload--drop-wrapper .btn-upload-icon:hover{color:#1e5fb3}.ffileupload--action-wrapper .btn-upload-icon:disabled:hover,.ffileupload--drop-wrapper .btn-upload-icon:disabled:hover{color:#ccd5e1}.btn-upload-icon .f-icon{font-size:36px;height:36px}.action-wrapper--is-upload{padding:4px 10px 16px;text-align:center;font-size:14px;margin:0 -10px;clear:both;overflow:hidden;position:relative}.action-wrapper--header-title{float:left}.action-wrapper--header-right{text-align:right;float:right;position:relative;z-index:100}.action-wrapper--header-left{float:left;position:relative;z-index:100}.ffileupload--item{margin:0 .625rem .625rem 0;list-style:none;width:100%;max-width:308px}.ffileupload--support-info{padding:0 .5rem .5rem;line-height:1.6;color:#b4bccc;text-align:center}.support-info--wrapper{padding:0;margin:0 auto}.support-info--wrapper li{padding:0;margin:0 4px 0 0;list-style:none;display:inline-block;word-break:break-all}.ffileupload--file-wrapper{border:none;margin:0;padding:0;min-width:0;height:100%;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;position:relative}.ffileupload--file-wrapper>legend{position:absolute;overflow:hidden;height:1px;width:1px;padding:0;border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);white-space:nowrap}.ffileupload--file{position:static;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;color:#2d2f33;border-radius:3px;overflow:hidden;background:#fff;border:1px solid #e5e8ed;box-shadow:0 2px 4px 0 rgba(220,227,237,.53);max-height:200px;height:100%;box-sizing:content-box}.f-file-view-image{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;width:100%;pointer-events:none;will-change:transform,opacity;border-radius:1rem;min-height:6rem}.ffileupload--action-basic{display:-webkit-box;display:flex;padding:6px 10px;-webkit-box-align:center;align-items:center;min-height:66px}.ffileupload--list{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap;margin-right:-.625rem}.action-basic--info{-webkit-box-flex:1;flex:1 1 auto;white-space:nowrap;overflow:hidden}.action-basic--state{background:#e6f8f9;position:absolute;right:0;top:0;font-size:12px;color:#62c8ca;height:28px;min-width:56px;border-radius:0 0 0 50px/0 0 0 28px;text-align:right;line-height:24px;padding:0 6px 0 0}.action-basic--info-title{margin:0 0 4px;text-overflow:ellipsis;overflow:hidden}.action-basic--info-byte{color:rgba(45,47,51,.45)}.action-basic--action-btn{text-align:center;background:#c7d4ee;height:18px;width:18px;border-radius:9px;display:inline-block;line-height:18px;-webkit-transition:box-shadow .25s ease-in;transition:box-shadow .25s ease-in}.action-basic--action-btn:hover{box-shadow:0 0 0 .125em rgba(43,135,255,.2);background:#2b87ff}.action-btn--done{background:#51bd78!important;color:#fff}.action-basic--action-btn .f-icon{color:#fff;font-size:12px}.ffileupload--file-panel .ffileupload--action{width:100%}.action-basic--action{position:absolute;right:12px;bottom:14px}.action-basic--action-btn+.action-basic--action-btn{margin-left:12px}.ffileupload--common-action{border-top:1px solid #eaeaea;text-align:center;font-size:14px;margin:0 -10px;padding:4px}.common-action--info{margin:0 16px 0 0;display:inline-block}.common-action--info span{font-size:17px;font-weight:600}.ffileupload--file-imgpreview .ffileupload--action-basic{width:100%;height:100%;position:absolute;z-index:80;background:rgba(255,255,255,.8)}.ffile-spin{-webkit-animation:2s linear infinite fa-spin;animation:2s linear infinite ffile-spin}@-webkit-keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes ffile-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.ffile-load-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;background:rgba(255,255,255,.4)}.ffile-load-wrapper .loader,.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{background:#2a87ff;-webkit-animation:1s ease-in-out infinite ffile-load-spin;animation:1s ease-in-out infinite ffile-load-spin;width:2px;height:6px}.ffile-load-wrapper .loader{color:#2a87ff;text-indent:-200em;margin:0 auto;position:relative;font-size:12px;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.ffile-load-wrapper .loader:after,.ffile-load-wrapper .loader:before{position:absolute;top:0;content:''}.ffile-load-wrapper .loader:before{left:-6px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.ffile-load-wrapper .loader:after{left:6px}.ffileupload-default-size{width:432px}@-webkit-keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}@keyframes ffile-load-spin{0%,100%,80%{box-shadow:0 0;height:10px}40%{box-shadow:0 -6px;height:18px}}"]
                }] }
    ];
    /** @nocollapse */
    FFileUploadComponent.ctorParameters = function () { return [
        { type: FFileUploadAPIService },
        { type: FFileUploaderService },
        { type: NotifyService },
        { type: NgZone }
    ]; };
    FFileUploadComponent.propDecorators = {
        cls: [{ type: HostBinding, args: ["class.ffileupload",] }],
        visibleState: [{ type: HostBinding, args: ["class.ffileupload-unvisible",] }],
        selfDirectiveDefine: [{ type: HostBinding, args: ["class.ffileupload-selfdefine",] }],
        uploading: [{ type: HostBinding, args: ["class.ffileupload-uploading",] }],
        fFileUploadAssist: [{ type: ViewChild, args: ["uploadAssist",] }],
        fFileUploadDir: [{ type: ContentChild, args: [FFileUploadDirective,] }],
        fileUpload: [{ type: ViewChild, args: [FFileSelectDirective,] }],
        fileDropUpload: [{ type: ViewChild, args: [FFileDropDirective,] }],
        enableImagePreview: [{ type: Input }],
        uploadImmediately: [{ type: Input }],
        uploadedThenHide: [{ type: Input }],
        disabled: [{ type: Input }],
        enableSliceUpload: [{ type: Input }],
        chunkSize: [{ type: Input }],
        visible: [{ type: Input }],
        needReset: [{ type: Input }],
        enableDrop: [{ type: Input }],
        dropText: [{ type: Input }],
        enableSelect: [{ type: Input }],
        selectText: [{ type: Input }],
        multiple: [{ type: Input }],
        uploadedCount: [{ type: Input }],
        extendDatas: [{ type: Input }],
        widthThreshold: [{ type: Input }],
        fUploadDoneEvent: [{ type: Output }],
        fUploadRemovedEvent: [{ type: Output }],
        options: [{ type: Input }],
        extendServerConfig: [{ type: Input }]
    };
    return FFileUploadComponent;
}());
export { FFileUploadComponent };
if (false) {
    /** @type {?} */
    FFileUploadComponent.prototype.cls;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadAssist;
    /** @type {?} */
    FFileUploadComponent.prototype.fFileUploadDir;
    /** @type {?} */
    FFileUploadComponent.prototype.fileUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.fileDropUpload;
    /** @type {?} */
    FFileUploadComponent.prototype.enableImagePreview;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadImmediately;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedThenHide;
    /** @type {?} */
    FFileUploadComponent.prototype.disabled;
    /**
     * 启用分块上传
     * @type {?}
     */
    FFileUploadComponent.prototype.enableSliceUpload;
    /**
     * 分块上传每片大小，单位：M, 默认 1M/块
     * @type {?}
     */
    FFileUploadComponent.prototype.chunkSize;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.tVisible;
    /** @type {?} */
    FFileUploadComponent.prototype.needReset;
    /** @type {?} */
    FFileUploadComponent.prototype.enableDrop;
    /** @type {?} */
    FFileUploadComponent.prototype.dropText;
    /** @type {?} */
    FFileUploadComponent.prototype.enableSelect;
    /** @type {?} */
    FFileUploadComponent.prototype.selectText;
    /** @type {?} */
    FFileUploadComponent.prototype.multiple;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadedCount;
    /** @type {?} */
    FFileUploadComponent.prototype.extendDatas;
    /** @type {?} */
    FFileUploadComponent.prototype.widthThreshold;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadDoneEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.fUploadRemovedEvent;
    /** @type {?} */
    FFileUploadComponent.prototype.allowedContentTypes;
    /** @type {?} */
    FFileUploadComponent.prototype.maxUploads;
    /** @type {?} */
    FFileUploadComponent.prototype.maxFileSize;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.selfUploadOpts;
    /** @type {?} */
    FFileUploadComponent.prototype.files;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadSelectInput;
    /** @type {?} */
    FFileUploadComponent.prototype.uploadDragInput;
    /** @type {?} */
    FFileUploadComponent.prototype.showAppendPanel;
    /** @type {?} */
    FFileUploadComponent.prototype.showLoading;
    /** @type {?} */
    FFileUploadComponent.prototype.settings;
    /** @type {?} */
    FFileUploadComponent.prototype.localInfo;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.uploadAPISer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.fileUploaderSer;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    FFileUploadComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZi1maWxlLXVwbG9hZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3VwbG9hZC9mLWZpbGUtdXBsb2FkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBRVQsS0FBSyxFQUNMLFdBQVcsRUFDWCxTQUFTLEVBQ1QsWUFBWSxFQUNaLE1BQU0sRUFDTixZQUFZLEVBQ1osVUFBVSxHQUViLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCxvQkFBb0IsRUFDcEIsa0JBQWtCLEVBQ2xCLG9CQUFvQixHQUN2QixNQUFNLHVCQUF1QixDQUFDO0FBUy9CLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQ0gscUJBQXFCLEVBQ3JCLG9CQUFvQixHQUN2QixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSxhQUFhLEVBQWlCLE1BQU0sbUJBQW1CLENBQUM7QUFDakUsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFM0MsT0FBTyxFQUFFLE9BQU8sRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBQyxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUM3RSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR3ZDO0lBa0pJLDhCQUNZLFlBQW1DLEVBQ25DLGVBQXFDLEVBQ3JDLGFBQTRCLEVBQzVCLE1BQWM7UUFKMUIsaUJBY0M7UUFiVyxpQkFBWSxHQUFaLFlBQVksQ0FBdUI7UUFDbkMsb0JBQWUsR0FBZixlQUFlLENBQXNCO1FBQ3JDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFwSVEsUUFBRyxHQUFHLElBQUksQ0FBQzs7UUF3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QUs7O0lBc1pWLDJCQUFDO0NBQUEsQUFqaEJELElBaWhCQztTQWhnQlksb0JBQW9COzs7SUFDN0IsbUNBQTZDOztJQWlCN0MsaURBQXlEOztJQUV6RCw4Q0FBd0Q7O0lBRXhELDBDQUFrRTs7SUFDbEUsOENBQWtFOztJQUVsRSxrREFBbUM7O0lBRW5DLGlEQUFtQzs7SUFFbkMsZ0RBQWlDOztJQUVqQyx3Q0FBMEI7Ozs7O0lBRTFCLGlEQUFrQzs7Ozs7SUFFbEMseUNBQXVCOzs7OztJQUV2Qix3Q0FBd0I7O0lBYXhCLHlDQUFvRDs7SUFFcEQsMENBQTRCOztJQUM1Qix3Q0FBK0I7O0lBRS9CLDRDQUE2Qjs7SUFDN0IsMENBQTZCOztJQUU3Qix3Q0FBeUI7O0lBRXpCLDZDQUEyQjs7SUFFM0IsMkNBR0U7O0lBRUYsOENBQThCOztJQUU5QixnREFBcUU7O0lBQ3JFLG1EQUF3RTs7SUFHeEUsbURBQTBCOztJQUUxQiwwQ0FBZTs7SUFFZiwyQ0FBcUI7Ozs7O0lBRXJCLDhDQUE2Qzs7SUFrQzdDLHFDQUFzQjs7SUFFdEIsaURBQTZDOztJQUU3QywrQ0FBMkM7O0lBRTNDLCtDQUF3Qjs7SUFFeEIsMkNBQW9COztJQUVwQix3Q0FHRTs7SUFFRix5Q0FBUzs7Ozs7SUFFTCw0Q0FBMkM7Ozs7O0lBQzNDLCtDQUE2Qzs7Ozs7SUFDN0MsNkNBQW9DOzs7OztJQUNwQyxzQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBIb3N0QmluZGluZyxcclxuICAgIFZpZXdDaGlsZCxcclxuICAgIEV2ZW50RW1pdHRlcixcclxuICAgIE91dHB1dCxcclxuICAgIENvbnRlbnRDaGlsZCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBBZnRlclZpZXdJbml0LFxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7XHJcbiAgICBGRmlsZVNlbGVjdERpcmVjdGl2ZSxcclxuICAgIEZGaWxlRHJvcERpcmVjdGl2ZSxcclxuICAgIEZGaWxlVXBsb2FkRGlyZWN0aXZlLFxyXG59IGZyb20gXCIuLi8uLi9kaXJlY3RpdmUvaW5kZXhcIjtcclxuaW1wb3J0IHtcclxuICAgIFVwbG9hZE91dHB1dCxcclxuICAgIFVwbG9hZElucHV0LFxyXG4gICAgVXBsb2FkRmlsZSxcclxuICAgIFVwbG9hZGVyT3B0aW9ucyxcclxuICAgIEZVcGxvYWRGaWxlRXh0ZW5kLFxyXG4gICAgRG9jTWV0YVByb3BlcnR5LFxyXG59IGZyb20gXCIuLi8uLi9tb2RlbC9pbmRleFwiO1xyXG5pbXBvcnQgeyBGRmlsZVV0aWxzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4XCI7XHJcbmltcG9ydCB7XHJcbiAgICBGRmlsZVVwbG9hZEFQSVNlcnZpY2UsXHJcbiAgICBGRmlsZVVwbG9hZGVyU2VydmljZSxcclxufSBmcm9tIFwiLi4vLi4vc2VydmljZS9pbmRleFwiO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlLCBOb3RpZnlPcHRpb25zIH0gZnJvbSBcIkBmYXJyaXMvdWktbm90aWZ5XCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xyXG5cclxuaW1wb3J0IHsgdHJpZ2dlcixzdHlsZSxzdGF0ZSxhbmltYXRlLHRyYW5zaXRpb24gfSBmcm9tIFwiQGFuZ3VsYXIvYW5pbWF0aW9uc1wiO1xyXG5pbXBvcnQgeyBOZ1pvbmUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9jYWxlXCI7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiBcImYtZmlsZS11cGxvYWRcIixcclxuICAgIHRlbXBsYXRlVXJsOiBcIi4vZi1maWxlLXVwbG9hZC5jb21wb25lbnQuaHRtbFwiLFxyXG4gICAgc3R5bGVVcmxzOiBbXCIuL2YtZmlsZS11cGxvYWQuY29tcG9uZW50LmNzc1wiXSxcclxuICAgIHByb3ZpZGVyczogW0ZGaWxlVXBsb2FkZXJTZXJ2aWNlXSxcclxuICAgIGFuaW1hdGlvbnM6IFtcclxuICAgICAgICB0cmlnZ2VyKFwiaGlkZVVwbG9hZGVkXCIsIFtcclxuICAgICAgICAgICAgc3RhdGUoXCJzaG93XCIsIHN0eWxlKHsgb3BhY2l0eTogMSwgaGVpZ2h0OiBcIipcIiB9KSksXHJcbiAgICAgICAgICAgIHN0YXRlKFwiaGlkZVwiLCBzdHlsZSh7IG9wYWNpdHk6IDAsIGhlaWdodDogMCB9KSksXHJcbiAgICAgICAgICAgIC8vIHRyYW5zaXRpb24oJyogPT4gdm9pZCcsIFtcclxuICAgICAgICAgICAgLy8gICBzdHlsZSh7IG9wYWNpdHk6IDF9KSxcclxuICAgICAgICAgICAgLy8gICBhbmltYXRlKDIwMCwgc3R5bGUoeyBvcGFjaXR5OiAwfSkpXHJcbiAgICAgICAgICAgIC8vIF0pXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24oXCIqID0+IGhpZGVcIiwgYW5pbWF0ZShcIjAuNXNcIikpLFxyXG4gICAgICAgIF0pLFxyXG4gICAgXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIEZGaWxlVXBsb2FkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICAgIEBIb3N0QmluZGluZyhcImNsYXNzLmZmaWxldXBsb2FkXCIpIGNscyA9IHRydWU7XHJcbiAgICAvLyDkuI3lj6/op4FcclxuICAgIEBIb3N0QmluZGluZyhcImNsYXNzLmZmaWxldXBsb2FkLXVudmlzaWJsZVwiKSBnZXQgdmlzaWJsZVN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy52aXNpYmxlO1xyXG4gICAgfVxyXG4gICAgLy8g6Ieq5a6a5LmJ5qC35byPXHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mZmlsZXVwbG9hZC1zZWxmZGVmaW5lXCIpIGdldCBzZWxmRGlyZWN0aXZlRGVmaW5lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZGaWxlVXBsb2FkRGlyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBASG9zdEJpbmRpbmcoXCJjbGFzcy5mZmlsZXVwbG9hZC11cGxvYWRpbmdcIikgZ2V0IHVwbG9hZGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWxlcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS4jeiDveWcqENvbnN0cnVjdOmHjOi/veWKoGVsXHJcbiAgICBAVmlld0NoaWxkKFwidXBsb2FkQXNzaXN0XCIpIGZGaWxlVXBsb2FkQXNzaXN0OiBFbGVtZW50UmVmO1xyXG4gICAgLy8g6Ieq5a6a5LmJ5oyH5LukXHJcbiAgICBAQ29udGVudENoaWxkKEZGaWxlVXBsb2FkRGlyZWN0aXZlKSBmRmlsZVVwbG9hZERpcjogYW55O1xyXG4gICAgLy9cclxuICAgIEBWaWV3Q2hpbGQoRkZpbGVTZWxlY3REaXJlY3RpdmUpIGZpbGVVcGxvYWQ6IEZGaWxlU2VsZWN0RGlyZWN0aXZlO1xyXG4gICAgQFZpZXdDaGlsZChGRmlsZURyb3BEaXJlY3RpdmUpIGZpbGVEcm9wVXBsb2FkOiBGRmlsZURyb3BEaXJlY3RpdmU7XHJcbiAgICAvLyDlkK/nlKjlm77niYfpooTop4hcclxuICAgIEBJbnB1dCgpIGVuYWJsZUltYWdlUHJldmlldyA9IHRydWU7XHJcbiAgICAvLyDlkK/nlKjnq4vljbPkuIrkvKBcclxuICAgIEBJbnB1dCgpIHVwbG9hZEltbWVkaWF0ZWx5ID0gZmFsc2U7XHJcbiAgICAvLyDkuIrkvKDlrozmiJDlkI7pmpDol49cclxuICAgIEBJbnB1dCgpIHVwbG9hZGVkVGhlbkhpZGUgPSB0cnVlO1xyXG4gICAgLy8g56aB55So54q25oCBXHJcbiAgICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOWIhuWdl+S4iuS8oCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlU2xpY2VVcGxvYWQgPSB0cnVlO1xyXG4gICAgLyoqIOWIhuWdl+S4iuS8oOavj+eJh+Wkp+Wwj++8jOWNleS9je+8mk0sIOm7mOiupCAxTS/lnZcgKi9cclxuICAgIEBJbnB1dCgpIGNodW5rU2l6ZSA9IDE7XHJcblxyXG4gICAgcHJpdmF0ZSB0VmlzaWJsZSA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKblj6/op4FcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdmlzaWJsZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudFZpc2libGUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdmlzaWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50VmlzaWJsZTtcclxuICAgIH1cclxuICAgIC8vIOmcgOimgemHjee9rizpgJrov4fkuI3mlq3nmoTotYvlgLzmnaXmlLnlj5hcclxuICAgIEBJbnB1dCgpIG5lZWRSZXNldDogT2JzZXJ2YWJsZTxhbnk+ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIC8vIOWQr+eUqOaLluaLvVxyXG4gICAgQElucHV0KCkgZW5hYmxlRHJvcCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZHJvcFRleHQgPSBcIuWPr+WwhuaWh+S7tuaLluaLveatpOWkhFwiO1xyXG4gICAgLy8g5ZCv55So6YCJ5oup5paH5Lu25oyJ6ZKuXHJcbiAgICBASW5wdXQoKSBlbmFibGVTZWxlY3QgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgc2VsZWN0VGV4dCA9IFwi54K55Ye75LiK5LygXCI7XHJcbiAgICAvLyDlkK/nlKjlpJrpgIlcclxuICAgIEBJbnB1dCgpIG11bHRpcGxlID0gdHJ1ZTtcclxuICAgIC8vIOW3sue7j+S4iuS8oOaWh+S7tlxyXG4gICAgQElucHV0KCkgdXBsb2FkZWRDb3VudCA9IDA7XHJcbiAgICAvLyDlhazlhbHnmoTmianlsZXmlbDmja5cclxuICAgIEBJbnB1dCgpIGV4dGVuZERhdGFzOiB7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gICAgICAgIGV4dFByb3BlcnR5PzogRG9jTWV0YVByb3BlcnR5IHwgbnVsbDsgLy9cclxuICAgIH07XHJcbiAgICAvLyDlrr3luqbpmIjlgLzvvIzlvZPlrr3luqbotoXov4c3NjDml7blgJnvvIzmsqHmnInpmYTku7bkuIrkvKDml7bvvIzlrr3luqbmmK/lm7rlrprlgLzvvIzmnInpmYTku7bkuIrkvKDml7bvvIzmnInmnIDlpKflrr3luqblgLxcclxuICAgIEBJbnB1dCgpIHdpZHRoVGhyZXNob2xkID0gNzYwO1xyXG4gICAgLy8g5LiK5Lyg5ZKM5Yig6Zmk5a+55aSW5oqb5Ye655qE5LqL5Lu2XHJcbiAgICBAT3V0cHV0KCkgZlVwbG9hZERvbmVFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8RlVwbG9hZEZpbGVFeHRlbmRbXT4oKTtcclxuICAgIEBPdXRwdXQoKSBmVXBsb2FkUmVtb3ZlZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxGVXBsb2FkRmlsZUV4dGVuZFtdPigpO1xyXG5cclxuICAgIC8vIOWFgeiuuOS4iuS8oOeahOaWh+S7tuexu+Wei1xyXG4gICAgYWxsb3dlZENvbnRlbnRUeXBlcyA9IFwiKlwiO1xyXG4gICAgLy8g6buY6K6k5LiN6ZmQ5Yi26ZmE5Lu25LiK5Lyg5Liq5pWwXHJcbiAgICBtYXhVcGxvYWRzID0gMDtcclxuICAgIC8vIOWNleS9jUtC77yM6buY6K6k5pivMTJNXHJcbiAgICBtYXhGaWxlU2l6ZSA9IFwiMTJNQlwiO1xyXG5cclxuICAgIHByaXZhdGUgc2VsZlVwbG9hZE9wdHM6IFVwbG9hZGVyT3B0aW9ucyA9IHt9O1xyXG4gICAgLy8g5LiK5Lyg6YWN572u6aG5XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IG9wdGlvbnModXBsb2FkT3B0czogVXBsb2FkZXJPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKHVwbG9hZE9wdHMpIHtcclxuICAgICAgICAgICAgaWYgKHVwbG9hZE9wdHMuaGFzT3duUHJvcGVydHkoXCJhbGxvd2VkQ29udGVudFR5cGVzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRDb250ZW50VHlwZXMgPSB1cGxvYWRPcHRzLmFsbG93ZWRDb250ZW50VHlwZXMuam9pbihcIixcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRDb250ZW50VHlwZXMgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZENvbnRlbnRUeXBlcyA9PSBcIlwiID8gXCIqXCIgOiB0aGlzLmFsbG93ZWRDb250ZW50VHlwZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVwbG9hZE9wdHMuaGFzT3duUHJvcGVydHkoXCJtYXhVcGxvYWRzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heFVwbG9hZHMgPSB1cGxvYWRPcHRzLm1heFVwbG9hZHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVwbG9hZE9wdHMuaGFzT3duUHJvcGVydHkoXCJtYXhGaWxlU2l6ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhGaWxlU2l6ZSA9IEZGaWxlVXRpbHMuaHVtYW5pemVCeXRlcyhcclxuICAgICAgICAgICAgICAgICAgICAxMDI0ICogMTAyNCAqIHVwbG9hZE9wdHMubWF4RmlsZVNpemVcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxmVXBsb2FkT3B0cyA9IE9iamVjdC5hc3NpZ24odGhpcy5zZWxmVXBsb2FkT3B0cywgdXBsb2FkT3B0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZlVwbG9hZE9wdHM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOavj+S4que7hOWPr+S7peiuvue9rueJueauiuacjeWKoeWPguaVsO+8jOadpeimhueblum7mOiupOeahOe7n+S4gOaooeWdl+e6p+mFjee9rlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGV4dGVuZFNlcnZlckNvbmZpZyhjb25maWc6IGFueSkge1xyXG4gICAgICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICAgICAgdGhpcy5maWxlVXBsb2FkZXJTZXIuc2V0RXh0ZW5kU2VydmVyQ29uZmlnKGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g6K6w5b2V5paH5Lu25Liq5pWwXHJcbiAgICBmaWxlczogVXBsb2FkT3V0cHV0W107XHJcbiAgICAvLyDmoIforrDpgJrov4fpgInmi6nmjInpkq7lpITnkIbnmoTkuovku7ZcclxuICAgIHVwbG9hZFNlbGVjdElucHV0OiBFdmVudEVtaXR0ZXI8VXBsb2FkSW5wdXQ+O1xyXG4gICAgLy8g5qCH6K6w6YCa6L+H5ouW5ou95aSE55CG55qE5LqL5Lu2XHJcbiAgICB1cGxvYWREcmFnSW5wdXQ6IEV2ZW50RW1pdHRlcjxVcGxvYWRJbnB1dD47XHJcbiAgICAvLyDmjqfliLbmmK/lkKbmmL7npLrov73liqDpmYTku7bnmoTpnaLmnb9cclxuICAgIHNob3dBcHBlbmRQYW5lbCA9IGZhbHNlO1xyXG4gICAgLy8g5pi+56S6bG9hZGluZ1xyXG4gICAgc2hvd0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBzZXR0aW5ncyA9IHtcclxuICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLnZpc2libGUsXHJcbiAgICB9O1xyXG4gICAgLy8g5aSa6K+t6KiA5L+h5oGvXHJcbiAgICBsb2NhbEluZm9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgdXBsb2FkQVBJU2VyOiBGRmlsZVVwbG9hZEFQSVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBmaWxlVXBsb2FkZXJTZXI6IEZGaWxlVXBsb2FkZXJTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIG5nWm9uZTogTmdab25lXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmZpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy51cGxvYWRTZWxlY3RJbnB1dCA9IG5ldyBFdmVudEVtaXR0ZXI8VXBsb2FkSW5wdXQ+KCk7XHJcbiAgICAgICAgdGhpcy51cGxvYWREcmFnSW5wdXQgPSBuZXcgRXZlbnRFbWl0dGVyPFVwbG9hZElucHV0PigpO1xyXG4gICAgICAgIC8vIOmHjee9rlxyXG4gICAgICAgIHRoaXMubmVlZFJlc2V0LnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRkZpbGVVdGlscy5nZXRMb2NhbFN0YXRlKHRoaXMubm90aWZ5U2VydmljZS5sb2NhbGVTZXJ2aWNlKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIOaooeadv+eahOaDheWGteS4i+WPquiDveaYr+eri+WNs+S4iuS8oFxyXG4gICAgICAgIGlmICh0aGlzLmZGaWxlVXBsb2FkRGlyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSW1tZWRpYXRlbHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXB1dGVXaWR0aFRocmVzaG9sZCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDop4blm77liJ3lp4vljJblkI5cclxuICAgICAqL1xyXG4gICAgbmdBZnRlclZpZXdJbml0KCkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIOinpuWPkee7keWumlxyXG4gICAgICovXHJcbiAgICB0cmlnZ2VyRmlsZVNlbGVjdChldikge1xyXG4gICAgICAgIGV2ICYmIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIC8vIOemgeeUqOaXtlxyXG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maWxlVXBsb2FkLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGljaygpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInmi6npmYTku7bmjInpkq7vvIzlpITnkIbmipvlh7rkuovku7ZcclxuICAgICAqIEBwYXJhbSBvdXRwdXRcclxuICAgICAqL1xyXG4gICAgc2VsZWN0VXBsb2FkT3V0cHV0KG91dHB1dDogVXBsb2FkT3V0cHV0KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51cGxvYWRPdXRwdXRIYW5kbGVyKG91dHB1dCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaLluaLveWMuuWfn+WkhOeQhuaKm+WHuuS6i+S7tlxyXG4gICAgICogQHBhcmFtIG91dHB1dFxyXG4gICAgICovXHJcbiAgICBkcm9wVXBsb2FkT3V0cHV0KG91dHB1dDogVXBsb2FkT3V0cHV0KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5pqC5LiN5aSE55CG5ouW5ou955qE5LqL5Lu2XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBvdXRwdXQudHlwZSAhPT0gXCJkcmFnT3ZlclwiICYmXHJcbiAgICAgICAgICAgIG91dHB1dC50eXBlICE9PSBcImRyYWdPdXRcIiAmJlxyXG4gICAgICAgICAgICBvdXRwdXQudHlwZSAhPT0gXCJkcm9wXCJcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy51cGxvYWRPdXRwdXRIYW5kbGVyKG91dHB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBhbGxBZGRlZFRvUXVldWUg6YCJ5Lit5paH5Lu26L+95Yqg5Yiw6Zif5YiXXHJcbiAgICAgKiBAcGFyYW0gb3V0cHV0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBsb2FkT3V0cHV0SGFuZGxlcihvdXRwdXQ6IFVwbG9hZE91dHB1dCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOaYvuekuui/veWKoOmdouadv1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dBcHBlbmRQYW5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dBcHBlbmRQYW5lbCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG91dHB1dC50eXBlID09PSBcImFkZGVkVG9RdWV1ZVwiICYmIHR5cGVvZiBvdXRwdXQuZmlsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVzLnB1c2goeyB0eXBlOiBvdXRwdXQudHlwZSwgZmlsZTogb3V0cHV0LmZpbGUgfSk7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOWQr+eUqOeri+WNs+S4iuS8oFxyXG4gICAgICAgICAgICBpZiAodGhpcy51cGxvYWRJbW1lZGlhdGVseSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VXBsb2FkKG91dHB1dC5maWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09IFwic3RhcnRcIikge1xyXG4gICAgICAgICAgICAvLyDlvIDlp4vkuIrkvKBcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWxlc1N0YXRlKG91dHB1dCwgXCJcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvdXRwdXQudHlwZSA9PSBcImRvbmVcIikge1xyXG4gICAgICAgICAgICAvLyDkuIrkvKDlrozmiJBcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWxlc1N0YXRlKG91dHB1dCwgXCJkb25lXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmZVcGxvYWREb25lRXZlbnQuZW1pdChcclxuICAgICAgICAgICAgICAgIEZGaWxlVXRpbHMuY2hhbmdlVXBsb2FkRmlsZVRvRmlsZUV4dGVuZChvdXRwdXQuZmlsZXMpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUFmdGVyTG9hZGVkKG91dHB1dCk7XHJcbiAgICAgICAgICAgIC8vIOmakOiXj+ato+WcqOWKoOi9vVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEltbWVkaWF0ZWx5ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbEZpbGVVcGxvYWRlZCgpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgb3V0cHV0LnR5cGUgPT09IFwiY2FuY2VsbGVkXCIgfHxcclxuICAgICAgICAgICAgb3V0cHV0LnR5cGUgPT09IFwicmVtb3ZlZFwiIHx8XHJcbiAgICAgICAgICAgIG91dHB1dC50eXBlID09IFwiZXJyb3JcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICAvLyDliKDpmaTmiJbogIXnp7vpmaTmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5maWxlcyA9IHRoaXMuZmlsZXMuZmlsdGVyKChmaWxlT3V0cHV0OiBVcGxvYWRPdXRwdXQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmZpbGVzLmZpbmRJbmRleCgoaXRlbSkgPT4gZmlsZU91dHB1dC5maWxlLmlkID09IGl0ZW0uaWQpIDwgMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIOmakOiXj+ato+WcqOWKoOi9vVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZEltbWVkaWF0ZWx5ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbEZpbGVVcGxvYWRlZCgpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05vdGlmeShvdXRwdXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIG91dHB1dC50eXBlID09PSBcInJlamVjdGVkXCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIG91dHB1dC5maWxlICE9PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIC8vIOS4iuS8oOiiq+aLkue7nVxyXG4gICAgICAgICAgICB0aGlzLnNob3dOb3RpZnkob3V0cHV0KTtcclxuICAgICAgICAgICAgLy8g6ZqQ6JeP5q2j5Zyo5Yqg6L29XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkSW1tZWRpYXRlbHkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsRmlsZVVwbG9hZGVkKClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93Tm90aWZ5KG91dHB1dCkge1xyXG4gICAgICAgIGxldCBub3RpZnlUeXBlID0gXCJ3YXJuaW5nXCI7XHJcbiAgICAgICAgaWYgKG91dHB1dC50eXBlID09IFwiY2FuY2VsbGVkXCIgfHwgb3V0cHV0LnR5cGUgPT0gXCJyZW1vdmVkXCIpIHtcclxuICAgICAgICAgICAgbm90aWZ5VHlwZSA9IFwic3VjY2Vzc1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWVzc2FnZSA9IG91dHB1dC5oYXNPd25Qcm9wZXJ0eShcIm1lc3NhZ2VcIikgPyBvdXRwdXRbXCJtZXNzYWdlXCJdIDogXCJcIjtcclxuICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Vbbm90aWZ5VHlwZV0oPE5vdGlmeU9wdGlvbnM+e1xyXG4gICAgICAgICAgICBtc2c6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyDliKTmlq3mmK/lkKbmiYDmnInmlofku7bpg73lt7LkuIrkvKBcclxuICAgIHByaXZhdGUgYWxsRmlsZVVwbG9hZGVkKCkge1xyXG4gICAgICAgIGxldCBmaW5kTm90RG9uZUluZGV4ID0gdGhpcy5maWxlcy5maW5kSW5kZXgoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgbGV0IGRvbmVUeXBlcyA9IFtcImRvbmVcIiwgXCJjYW5jZWxsZWRcIiwgXCJyZW1vdmVkXCJdO1xyXG4gICAgICAgICAgICBsZXQgZmluZFR5cGVJbmRleCA9IGRvbmVUeXBlcy5maW5kSW5kZXgoKHR5cGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlID09IGl0ZW0udHlwZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5kVHlwZUluZGV4ID09IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmaW5kTm90RG9uZUluZGV4ID09IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDpmYTku7bnmoTnirbmgIFcclxuICAgICAqIEBwYXJhbSBvdXRwdXRcclxuICAgICAqIEBwYXJhbSBldmVudFR5cGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVGaWxlc1N0YXRlKG91dHB1dDogVXBsb2FkT3V0cHV0LCBldmVudFR5cGUpIHtcclxuICAgICAgICBsZXQgc3RhcnRGaWxlcyA9IFtdO1xyXG4gICAgICAgIGlmIChvdXRwdXQuaGFzT3duUHJvcGVydHkoXCJmaWxlc1wiKSAmJiBvdXRwdXQuZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyDmraTlpITmm7TmlrDnlYzpnaLlj6/og73mnInmgKfog73pl67pophcclxuICAgICAgICAgICAgc3RhcnRGaWxlcyA9IG91dHB1dC5maWxlcztcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvdXRwdXQuZmlsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBzdGFydEZpbGVzID0gW291dHB1dC5maWxlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlID8gZXZlbnRUeXBlIDogb3V0cHV0LnR5cGU7XHJcbiAgICAgICAgc3RhcnRGaWxlcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbGVzLmZpbmRJbmRleChcclxuICAgICAgICAgICAgICAgIChmaWxlT3V0cHV0KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBpdGVtICE9PSBcInVuZGVmaW5lZFwiICYmIGZpbGVPdXRwdXQuZmlsZS5pZCA9PT0gaXRlbS5pZFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAvLyDlj5jmm7TnirbmgIFcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZXNbaW5kZXhdID0geyB0eXBlOiBldmVudFR5cGUsIGZpbGU6IGl0ZW0gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuWNleS4quaWh+S7tuS4iuS8oCAqL1xyXG4gICAgc3RhcnRVcGxvYWQoZmlsZTogVXBsb2FkRmlsZSk6IHZvaWQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRvZG865ZCO57ut5Y+v5Lul5LuO5LiK5Lyg5Yy65Z2X5LiK5Y+W5YaF5a656L+b6KGM5omp5bGVXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKFwidXBsb2FkXCIsIHtcclxuICAgICAgICAgICAgZmlsZTogZmlsZSxcclxuICAgICAgICAgICAgdHlwZTogdGhpcy5lbmFibGVTbGljZVVwbG9hZCA/ICdzbGljZVVwbG9hZCc6ICd1cGxvYWQnLFxyXG4gICAgICAgICAgICBkYXRhOiB0aGlzLmV4dGVuZERhdGFzLFxyXG4gICAgICAgICAgICBjaHVua1NpemU6IHRoaXMuY2h1bmtTaXplXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOS4iuS8oOaJgOaciVxyXG4gICAgICovXHJcbiAgICBzdGFydFVwbG9hZEFsbCgpOiB2b2lkIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgVG9kb++8muWQjue7re+8jOWmguaenOavj+S4quaVsOaNruS4jeS4gOagt++8jOatpOWkhOeahOaVsOaNruW+l+mHjeaWsOW9kumbhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSShcInVwbG9hZEFsbFwiLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IHRoaXMuZW5hYmxlU2xpY2VVcGxvYWQgPyAnc2xpY2VVcGxvYWQnOiBcInVwbG9hZEFsbFwiLFxyXG4gICAgICAgICAgICBmaWxlczogW10sXHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuZXh0ZW5kRGF0YXMsXHJcbiAgICAgICAgICAgIGNodW5rU2l6ZTogdGhpcy5jaHVua1NpemVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmlucHV0VXBsb2FkRXZlbnRFbWl0KGV2ZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5bey5LiK5Lyg6ZqQ6JeP5bGe5oCnXHJcbiAgICAgKi9cclxuICAgIGhpZGVBZnRlckxvYWRlZChvdXRwdXQ6IFVwbG9hZE91dHB1dCk6IHZvaWQge1xyXG4gICAgICAgIC8v5LiK5Lyg5a6M5oiQ5ZCO5Yig6ZmkXHJcbiAgICAgICAgaWYgKHRoaXMudXBsb2FkZWRUaGVuSGlkZSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8g5Yig6Zmk5oiW6ICF56e76Zmk5paH5Lu2XHJcbiAgICAgICAgICAgICAgICBsZXQgaWRzID0gb3V0cHV0LmZpbGVzLm1hcCgoZmlsZUl0ZW0pID0+IGZpbGVJdGVtLmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZXMgPSB0aGlzLmZpbGVzLmZpbHRlcigoZmlsZU91dHB1dDogVXBsb2FkT3V0cHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRJbmRleCA9IGlkcy5maW5kSW5kZXgoKHRJZCkgPT4gdElkID09IGZpbGVPdXRwdXQuZmlsZS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRJbmRleCA+IC0xID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKFwiaGlkZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJoaWRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkcy5qb2luKFwiLFwiKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFVwbG9hZEV2ZW50RW1pdChldmVudCk7XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWPlua2iOS4iuS8oFxyXG4gICAgICovXHJcbiAgICBjYW5jZWxVcGxvYWQoaWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50OiBVcGxvYWRJbnB1dCA9IHRoaXMudXBsb2FkQVBJU2VyLmdldEFzc2lnbkFQSShcImNhbmNlbFwiLCB7XHJcbiAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgdHlwZTogXCJjYW5jZWxcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmlucHV0VXBsb2FkRXZlbnRFbWl0KGV2ZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk5bey5LiK5Lyg5paH5Lu2XHJcbiAgICAgKi9cclxuICAgIHJlbW92ZWxBbGxVcGxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKFwicmVtb3ZlQWxsXCIsIHtcclxuICAgICAgICAgICAgdHlwZTogXCJyZW1vdmVBbGxcIixcclxuICAgICAgICAgICAgZmlsZXM6IFtdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKDpmaTlt7LkuIrkvKDmlofku7ZcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlRmlsZShpZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQ6IFVwbG9hZElucHV0ID0gdGhpcy51cGxvYWRBUElTZXIuZ2V0QXNzaWduQVBJKFwicmVtb3ZlXCIsIHtcclxuICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICB0eXBlOiBcInJlbW92ZVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRVcGxvYWRFdmVudEVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqICovXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYnl0ZXNcclxuICAgICAqL1xyXG4gICAgZm9ybWF0ZUJ5dGVzKGJ5dGVzKSB7XHJcbiAgICAgICAgcmV0dXJuIEZGaWxlVXRpbHMuaHVtYW5pemVCeXRlcyhieXRlcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WbvueJh1xyXG4gICAgICogQHBhcmFtIHR5cGVcclxuICAgICAqL1xyXG4gICAgaXNJbWFnZSh0eXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUuaW5kZXhPZihcImltYWdlXCIpID4gLTE7XHJcbiAgICB9XHJcbiAgICAvLyBpblByb2dyZXNzKHByb2dyZXNzKSB7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKCfov5vlhaVpblByb2dyZXNzJyk7XHJcbiAgICAvLyAgIGlmIChwcm9ncmVzcy5kYXRhLnBlcmNlbnRhZ2UgPT0gMTAwKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuICdkb25lJ1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGlmIChwcm9ncmVzcy5kYXRhLnBlcmNlbnRhZ2UgPT0gMCkge1xyXG4gICAgLy8gICAgIHJldHVybiAndXBsb2FkaSc7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgcmV0dXJuICdwcm9ncmVzcyc7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKbliKTmlq3mnInnsbvlnovpmZDliLZcclxuICAgICAqL1xyXG4gICAganVkZ2VDb250ZW50VHlwZUxpbWl0KCkge1xyXG4gICAgICAgIGxldCB0VHlwZXMgPSB0aGlzLmFsbG93ZWRDb250ZW50VHlwZXMuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGxldCBoYXNBbGxJbmRleCA9IHRUeXBlcy5maW5kSW5kZXgoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT0gXCIqXCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGhhc0FsbEluZGV4ID09IC0xO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKbmnInmlofku7blpKflsI/nmoTpmZDliLZcclxuICAgICAqL1xyXG4gICAganVkZWdlRmlsZVNpemVMaW1pdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXhGaWxlU2l6ZSAhPSBcIjAgQnl0ZVwiO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDov73liqBcclxuICAgICAqL1xyXG4gICAgYXBwZW5kTmV3RmlsZXMoZXYpIHtcclxuICAgICAgICAvL+WQr+eUqOaLluaLvVxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZURyb3ApIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93QXBwZW5kUGFuZWwgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV2ICYmIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWxlU2VsZWN0KGV2KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXrei/veWKoOmdouadv1xyXG4gICAgICovXHJcbiAgICBjbG9zZUFwcGVuZFBhbmVsKCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0FwcGVuZFBhbmVsID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOe7n+S4gOinpuWPkSDpmYTku7bpgInmi6nlkozmi5bmi73pmYTku7bnmoTkuovku7ZcclxuICAgICAqIEBwYXJhbSBldlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlucHV0VXBsb2FkRXZlbnRFbWl0KGV2OiBVcGxvYWRJbnB1dCkge1xyXG4gICAgICAgIC8vIOWmguaenOaWh+S7tuS4iuS8oOWQr+eUqFxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwbG9hZFNlbGVjdElucHV0LmVtaXQoZXYpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkRHJhZ0lucHV0LmVtaXQoZXYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOmHjee9ruaWueazlVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5maWxlcyA9IFtdO1xyXG4gICAgICAgIC8vIOWmguaenOaWh+S7tuS4iuS8oOWQr+eUqFxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVNlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVVcGxvYWQgJiYgdGhpcy5maWxlVXBsb2FkLnJlc2V0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5maWxlRHJvcFVwbG9hZCAmJiB0aGlzLmZpbGVEcm9wVXBsb2FkLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHV0ZVdpZHRoVGhyZXNob2xkKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+mYiOWAvFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbXB1dGVXaWR0aFRocmVzaG9sZCgpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0TmVlZENvbXB1dGVkQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5mRmlsZVVwbG9hZERpciB8fCAhc2VsZi52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdE5lZWRDb21wdXRlZENscyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6K6h566X5YWD57SgXHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzaXN0RWwgPSBzZWxmLmZGaWxlVXBsb2FkQXNzaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmZGaWxlVXBsb2FkQXNzaXN0Lm5hdGl2ZUVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFzc2lzdEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaXN0RWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3RbXCJhZGRcIl0oXCJmZmlsZXVwbG9hZC1kZWZhdWx0XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAvLyDotoXov4fpmIjlgLxcclxuICAgICAgICAgICAgICAgIC8vIGlmIChhc3Npc3RFbCAmJiBhc3Npc3RFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IHNlbGYud2lkdGhUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgdE5lZWRDb21wdXRlZENscyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gICB0TmVlZENvbXB1dGVkQ2xzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoYXNzaXN0RWwpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgbGV0IGFjdGlvbkZ1biA9IHROZWVkQ29tcHV0ZWRDbHMgPyAnYWRkJyA6ICdyZW1vdmUnO1xyXG4gICAgICAgICAgICAgICAgLy8gICBhc3Npc3RFbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdFthY3Rpb25GdW5dKCdmZmlsZXVwbG9hZC1kZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==