/**
 * @fileoverview added by tsickle
 * Generated from: lib/directive/f-file-select.directive.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, EventEmitter, Input, Output } from '@angular/core';
import { FFileUploaderService } from '../service/f-file-uploader.service';
var FFileSelectDirective = /** @class */ (function () {
    function FFileSelectDirective(elementRef, upload) {
        var _this = this;
        this.elementRef = elementRef;
        this.upload = upload;
        this.tDisabled = false;
        this.changeListener = null;
        this.onChange = (/**
         * @return {?}
         */
        function () {
            if (_this.el.files) {
                _this.upload.handleFiles(_this.el.files);
                _this.el.value = null;
            }
        });
        this.uploadOutput = new EventEmitter();
        this.el = this.elementRef.nativeElement;
    }
    Object.defineProperty(FFileSelectDirective.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tDisabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.tDisabled !== value) {
                this.tDisabled = value;
                if (value) {
                    this.unbindEvent();
                }
                else {
                    this.bindEvent();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FFileSelectDirective.prototype, "options", {
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                this.upload.setOptions(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    ;
    Object.defineProperty(FFileSelectDirective.prototype, "uploadedCount", {
        // 已上传
        set: 
        // 已上传
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.upload.setOptions({ 'uploadedCount': value });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    FFileSelectDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this._sub = [];
        // 对外抛出事件
        this._sub.push(this.upload.serviceEvents.subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.uploadOutput.emit(event);
        })));
        // 对内的事件
        if (this.uploadInput instanceof EventEmitter) {
            this._sub.push(this.upload.initInputEvents(this.uploadInput));
        }
        if (!this.disabled) {
            this.bindEvent();
        }
    };
    /**
     * @private
     * @return {?}
     */
    FFileSelectDirective.prototype.bindEvent = /**
     * @private
     * @return {?}
     */
    function () {
        this.changeListener = this.onChange.bind(this);
        this.el.addEventListener('change', this.changeListener);
    };
    /**
     * @private
     * @return {?}
     */
    FFileSelectDirective.prototype.unbindEvent = /**
     * @private
     * @return {?}
     */
    function () {
        this.changeListener = null;
        this.el.removeEventListener('change', this.changeListener);
    };
    /**
     * @return {?}
     */
    FFileSelectDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.el) {
            this._sub.forEach((/**
             * @param {?} sub
             * @return {?}
             */
            function (sub) { return sub.unsubscribe(); }));
        }
    };
    /**
     * 重置
     */
    /**
     * 重置
     * @return {?}
     */
    FFileSelectDirective.prototype.reset = /**
     * 重置
     * @return {?}
     */
    function () {
        // if (this.el) {
        //   //this._sub.forEach(sub => sub.unsubscribe());
        //   //this._sub=[];
        //   this.upload.reset();
        // }    
        this.upload.reset();
    };
    FFileSelectDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[FFileSelect]'
                },] }
    ];
    /** @nocollapse */
    FFileSelectDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: FFileUploaderService }
    ]; };
    FFileSelectDirective.propDecorators = {
        disabled: [{ type: Input }],
        options: [{ type: Input }],
        uploadedCount: [{ type: Input }],
        uploadInput: [{ type: Input }],
        uploadOutput: [{ type: Output }]
    };
    return FFileSelectDirective;
}());
export { FFileSelectDirective };
if (false) {
    /**
     * @type {?}
     * @private
     */
    FFileSelectDirective.prototype.tDisabled;
    /** @type {?} */
    FFileSelectDirective.prototype.uploadInput;
    /** @type {?} */
    FFileSelectDirective.prototype.uploadOutput;
    /** @type {?} */
    FFileSelectDirective.prototype.el;
    /**
     * @type {?}
     * @private
     */
    FFileSelectDirective.prototype._sub;
    /**
     * @type {?}
     * @private
     */
    FFileSelectDirective.prototype.changeListener;
    /** @type {?} */
    FFileSelectDirective.prototype.onChange;
    /** @type {?} */
    FFileSelectDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FFileSelectDirective.prototype.upload;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZi1maWxlLXNlbGVjdC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZC8iLCJzb3VyY2VzIjpbImxpYi9kaXJlY3RpdmUvZi1maWxlLXNlbGVjdC5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBcUIsTUFBTSxlQUFlLENBQUM7QUFFdEcsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFHMUU7SUFzQ0UsOEJBQW1CLFVBQXNCLEVBQVUsTUFBNEI7UUFBL0UsaUJBR0M7UUFIa0IsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQXNCO1FBbEN2RSxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBZ0NsQixtQkFBYyxHQUFRLElBQUksQ0FBQztRQXNDbkMsYUFBUTs7O1FBQUc7WUFDVCxJQUFJLEtBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO2dCQUNqQixLQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN2QyxLQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBQyxJQUFJLENBQUM7YUFDcEI7UUFDSCxDQUFDLEVBQUE7UUF4Q0MsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLFlBQVksRUFBZ0IsQ0FBQztRQUNyRCxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO0lBQzFDLENBQUM7SUFwQ0Qsc0JBQ0ksMENBQVE7Ozs7UUFVWjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDOzs7OztRQWJELFVBQ2EsS0FBYztZQUN6QixJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssS0FBSyxFQUFF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Q3JCLG9DQUE2Qjs7Ozs7SUFDN0IsOENBQW1DOztJQXNDbkMsd0NBS0M7O0lBekNXLDBDQUE2Qjs7Ozs7SUFBRSxzQ0FBb0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgT25Jbml0LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVXBsb2FkT3V0cHV0LCBVcGxvYWRlck9wdGlvbnMgfSBmcm9tICcuLi9tb2RlbC9mLWZpbGUtdXBsb2FkLm1vZGVsJztcclxuaW1wb3J0IHsgRkZpbGVVcGxvYWRlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2YtZmlsZS11cGxvYWRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tGRmlsZVNlbGVjdF0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGRmlsZVNlbGVjdERpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuICBwcml2YXRlIHREaXNhYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGRpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy50RGlzYWJsZWQgIT09IHZhbHVlKSB7XHJcbiAgICAgIHRoaXMudERpc2FibGVkID0gdmFsdWU7XHJcbiAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudW5iaW5kRXZlbnQoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmJpbmRFdmVudCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnREaXNhYmxlZDtcclxuICB9XHJcbiAgQElucHV0KClcclxuICBzZXQgb3B0aW9ucyh2YWx1ZTogVXBsb2FkZXJPcHRpb25zKSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgdGhpcy51cGxvYWQuc2V0T3B0aW9ucyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuICAgLy8g5bey5LiK5LygXHJcbiAgIEBJbnB1dCgpXHJcbiAgIHNldCB1cGxvYWRlZENvdW50KHZhbHVlKXtcclxuICAgICAgIHRoaXMudXBsb2FkLnNldE9wdGlvbnMoeyd1cGxvYWRlZENvdW50Jzp2YWx1ZX0pO1xyXG4gICB9XHJcbiAgQElucHV0KCkgdXBsb2FkSW5wdXQ6IEV2ZW50RW1pdHRlcjxhbnk+O1xyXG4gIEBPdXRwdXQoKSB1cGxvYWRPdXRwdXQ6IEV2ZW50RW1pdHRlcjxVcGxvYWRPdXRwdXQ+O1xyXG5cclxuICAvL3VwbG9hZDogRkZpbGVVcGxvYWRlclNlcnZpY2U7XHJcbiAgZWw6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBfc3ViOiBTdWJzY3JpcHRpb25bXTtcclxuICBwcml2YXRlIGNoYW5nZUxpc3RlbmVyOiBhbnkgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSB1cGxvYWQ6IEZGaWxlVXBsb2FkZXJTZXJ2aWNlKSB7XHJcbiAgICB0aGlzLnVwbG9hZE91dHB1dCA9IG5ldyBFdmVudEVtaXR0ZXI8VXBsb2FkT3V0cHV0PigpO1xyXG4gICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLl9zdWIgPSBbXTtcclxuICAgIC8vIOWvueWkluaKm+WHuuS6i+S7tlxyXG4gICAgdGhpcy5fc3ViLnB1c2goXHJcbiAgICAgIHRoaXMudXBsb2FkLnNlcnZpY2VFdmVudHMuc3Vic2NyaWJlKChldmVudDogVXBsb2FkT3V0cHV0KSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGxvYWRPdXRwdXQuZW1pdChldmVudCk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gICAgLy8g5a+55YaF55qE5LqL5Lu2XHJcbiAgICBpZiAodGhpcy51cGxvYWRJbnB1dCBpbnN0YW5jZW9mIEV2ZW50RW1pdHRlcikge1xyXG4gICAgICB0aGlzLl9zdWIucHVzaCh0aGlzLnVwbG9hZC5pbml0SW5wdXRFdmVudHModGhpcy51cGxvYWRJbnB1dCkpO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMuYmluZEV2ZW50KCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByaXZhdGUgYmluZEV2ZW50KCkge1xyXG4gICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5jaGFuZ2VMaXN0ZW5lcik7XHJcbiAgfVxyXG4gIHByaXZhdGUgdW5iaW5kRXZlbnQoKSB7XHJcbiAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5jaGFuZ2VMaXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLmVsKSB7XHJcbiAgICAgIHRoaXMuX3N1Yi5mb3JFYWNoKHN1YiA9PiBzdWIudW5zdWJzY3JpYmUoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLmVsLmZpbGVzKSB7XHJcbiAgICAgIHRoaXMudXBsb2FkLmhhbmRsZUZpbGVzKHRoaXMuZWwuZmlsZXMpO1xyXG4gICAgICB0aGlzLmVsLnZhbHVlPW51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmHjee9rlxyXG4gICAqL1xyXG4gIHJlc2V0KCl7XHJcbiAgICAvLyBpZiAodGhpcy5lbCkge1xyXG4gICAgLy8gICAvL3RoaXMuX3N1Yi5mb3JFYWNoKHN1YiA9PiBzdWIudW5zdWJzY3JpYmUoKSk7XHJcbiAgICAvLyAgIC8vdGhpcy5fc3ViPVtdO1xyXG4gICAgLy8gICB0aGlzLnVwbG9hZC5yZXNldCgpO1xyXG4gICAgLy8gfSAgICBcclxuICAgIHRoaXMudXBsb2FkLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==