/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, ViewChild, Output, EventEmitter, forwardRef, HostListener, NgZone } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
var TimeSpinnerComponent = /** @class */ (function () {
    function TimeSpinnerComponent(ngZone) {
        this.ngZone = ngZone;
        this.placeHolder = '请选择时间';
        this.format = 'hh:mm:ss';
        this.hourStep = 1;
        this.minuteStep = 1;
        this.secondStep = 1;
        this.separator = ':';
        this.change = new EventEmitter();
        this.onBlur = new EventEmitter();
        this.focus = new EventEmitter();
        this._disabledSeconds = false;
        this._disabled = false;
        this._readonly = false;
        this._editable = true;
        this._use12Hours = false;
        this.start = 0;
        this.end = 2;
        this.onTouchedCallback = (/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { });
        this.onChangeCallback = (/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { });
        this.selObj = window.getSelection();
    }
    Object.defineProperty(TimeSpinnerComponent.prototype, "disabled", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabled;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._disabled = v !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeSpinnerComponent.prototype, "readonly", {
        get: /**
         * @return {?}
         */
        function () {
            return this._readonly;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._readonly = v !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeSpinnerComponent.prototype, "editable", {
        get: /**
         * @return {?}
         */
        function () {
            return this._editable;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._editable = v === true || v === '';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeSpinnerComponent.prototype, "use12Hours", {
        get: /**
         * @return {?}
         */
        function () {
            return this._use12Hours;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._use12Hours = v !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeSpinnerComponent.prototype, "disabledSeconds", {
        get: /**
         * @return {?}
         */
        function () {
            return this._disabledSeconds;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            this._disabledSeconds = v !== false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeSpinnerComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            if (v === '')
                return;
            /** @type {?} */
            var time = this.parseTime(v);
            if (!time)
                return;
            /** @type {?} */
            var maxTime = this.parseTime(this.max);
            /** @type {?} */
            var minTime = this.parseTime(this.min);
            if (minTime && minTime > time) {
                time = minTime;
            }
            if (maxTime && maxTime < time) {
                time = maxTime;
            }
            /** @type {?} */
            var tt = [
                this.formatTime(time.getHours()),
                this.formatTime(time.getMinutes())
            ];
            if (!this.disabledSeconds) {
                tt.push(this.formatTime(time.getSeconds()));
            }
            /** @type {?} */
            var newValue = tt.join(this.separator);
            if (this.use12Hours) {
                /** @type {?} */
                var hour = Number(newValue.substr(0, 2));
                if (hour >= 12) {
                    newValue =
                        this.formatTime(hour - 12) + newValue.substr(2) + ' PM';
                }
                else {
                    newValue = newValue + ' AM';
                }
            }
            if (this._value !== newValue) {
                this.change.emit({ newValue: newValue, oldValue: this._value });
            }
            this.onChangeCallback(newValue);
            this.onTouchedCallback(newValue);
            this._value = newValue;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.onClick = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var cursor = this.input.nativeElement.selectionStart;
        if (this.use12Hours) {
            if (cursor <= 2) {
                this.start = 0;
                this.end = 2;
            }
            else if (cursor > 2 && cursor <= 5) {
                this.start = 3;
                this.end = 5;
            }
            else if (cursor > 5 && cursor <= 8) {
                this.start = 6;
                this.end = 8;
            }
            else {
                this.start = 9;
                this.end = 11;
            }
        }
        else {
            if (cursor <= 2) {
                this.start = 0;
                this.end = 2;
            }
            else if (cursor > 2 && cursor <= 5) {
                this.start = 3;
                this.end = 5;
            }
            else {
                this.start = 6;
                this.end = 8;
            }
        }
        this.input.nativeElement.setSelectionRange(this.start, this.end);
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.blur = /**
     * @return {?}
     */
    function () {
        this.value = this.input.nativeElement.value;
        this.onBlur.emit();
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.onFocus = /**
     * @return {?}
     */
    function () {
        this.focus.emit();
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.up = /**
     * @return {?}
     */
    function () {
        this.compute('up');
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.down = /**
     * @return {?}
     */
    function () {
        this.compute('down');
    };
    /**
     * @param {?} type
     * @return {?}
     */
    TimeSpinnerComponent.prototype.compute = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        //if (isNaN(this.selObj.toString())) return
        if (this.disabled)
            return;
        /** @type {?} */
        var step;
        /** @type {?} */
        var newValue;
        /** @type {?} */
        var tempMax = this.start < 2 ? 24 : 60;
        if (this.start === 0) {
            step = this.hourStep;
        }
        else if (this.start === 3) {
            step = this.minuteStep;
        }
        else {
            step = this.secondStep;
        }
        step = Number(step);
        if (this.use12Hours && isNaN(this.selObj.toString())) {
            if (this.selObj.toString() === 'PM') {
                this.value = this.value.substr(0, this.value.length - 2) + 'AM';
            }
            else {
                this.value = this.value.substr(0, this.value.length - 2) + 'PM';
            }
        }
        else {
            if (type === 'up') {
                newValue = this.formatTime(Number(this.selObj.toString()) + step);
            }
            else {
                newValue = this.formatTime(Number(this.selObj.toString()) - step);
            }
            if (Number(newValue) >= tempMax) {
                newValue = this.formatTime(0);
            }
            if (Number(newValue) < 0) {
                newValue = this.formatTime(tempMax + newValue);
            }
            this.value =
                this.value.substring(0, this.start) +
                    newValue +
                    this.value.substring(this.end, this.value.length);
        }
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.input.nativeElement.focus();
                _this.input.nativeElement.setSelectionRange(_this.start, _this.end);
            }), 0);
        }));
    };
    /**
     * @param {?} value
     * @return {?}
     */
    TimeSpinnerComponent.prototype.formatTime = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value < 0)
            return value;
        return (value < 10 ? '0' : '') + value;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    TimeSpinnerComponent.prototype.parseTime = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (!value) {
            return;
        }
        /** @type {?} */
        var separators = value.split(this.separator);
        if (this.use12Hours) {
            if (separators[separators.length - 1].indexOf('PM') > 0) {
                separators[0] = Number(separators[0]) + 12 + '';
                separators[separators.length - 1] = separators[separators.length - 1].substr(0, 2);
            }
            if (separators[separators.length - 1].indexOf('AM') > 0) {
                separators[separators.length - 1] = separators[separators.length - 1].substr(0, 2);
            }
        }
        for (var i = 0; i < separators.length; i++) {
            if (isNaN(separators[i])) {
                return null;
            }
        }
        while (separators.length < 3) {
            separators.push(0);
        }
        return new Date(1900, 0, 0, separators[0], separators[1], separators[2]);
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.clearDate = /**
     * @return {?}
     */
    function () {
        if (!this.disabled) {
            this.change.emit({ newValue: '', oldValue: this._value });
            this._value = '';
            this.onChangeCallback('');
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeSpinnerComponent.prototype.onMouseEnter = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.input.nativeElement.value &&
            !this.readonly &&
            !this.disabled) {
            event.target.querySelector('.input-group-clear').style.display = '';
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    TimeSpinnerComponent.prototype.onMouseLeave = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!this.readonly && !this.disabled) {
            event.target.querySelector('.input-group-clear').style.display =
                'none';
        }
    };
    /**
     * @return {?}
     */
    TimeSpinnerComponent.prototype.onChange = /**
     * @return {?}
     */
    function () {
        this.onChangeCallback(this.value);
    };
    /**
     * @param {?} val
     * @return {?}
     */
    TimeSpinnerComponent.prototype.writeValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (val) {
            this.value = val;
        }
        else {
            this.value = '0';
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TimeSpinnerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChangeCallback = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    TimeSpinnerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouchedCallback = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    TimeSpinnerComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) { };
    TimeSpinnerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-time-spinner',
                    template: "\n        <div\n            class=\"input-group\"\n            [ngClass]=\"{\n                'f-state-disabled': disabled,\n                'f-state-readonly': readonly && !disabled,\n                'f-state-editable': editable && !disabled && !readonly\n            }\"\n        >\n            <input\n                type=\"text\"\n                autocomplete=\"off\"\n                class=\"form-control\"\n                [(ngModel)]=\"_value\"\n                #input\n                (click)=\"onClick()\"\n                (blur)=\"blur()\"\n                (focus)=\"onFocus()\"\n                [placeholder]=\"disabled||readonly||!editable?'':placeHolder\"\n                [readonly]=\"readonly || !editable\"\n                [disabled]=\"disabled\"\n                (change)=\"onChange()\"\n            />\n            <div\n                class=\"input-group-append input-group-clear\"\n                *ngIf=\"!readonly && !disabled\"\n                style=\"display: none\"\n            >\n                <button\n                    type=\"button\"\n                    class=\"btn btn-secondary\"\n                    style=\"box-shadow: none; padding: 0 5px\"\n                    (click)=\"clearDate()\"\n                >\n                    <i\n                        class=\"k-icon k-clear-value k-i-close \"\n                        style=\"font-size: 0.8rem\"\n                    ></i>\n                </button>\n            </div>\n            <div\n                class=\"input-group-append btn-group\"\n                *ngIf=\"!readonly && !disabled\"\n            >\n                <button\n                    class=\"btn btn-secondary half-btn\"\n                    style=\"box-shadow: none; padding: 0 5px\"\n                    (click)=\"up()\"\n                >\n                    <span class=\"icon k-i-arrow-chevron-up\"></span>\n                </button>\n                <button\n                    class=\"btn btn-secondary half-btn\"\n                    style=\"box-shadow: none; padding: 0 5px\"\n                    (click)=\"down()\"\n                >\n                    <span\n                        class=\"icon k-i-arrow-chevron-down\"\n                        style=\"transform: translateX(1px);\"\n                    ></span>\n                </button>\n            </div>\n        </div>\n    ",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return TimeSpinnerComponent; })),
                            multi: true
                        }
                    ],
                    styles: ["\n            .btn-group {\n                height: 1.50003rem;\n                flex-direction: column;\n            }\n            .half-btn {\n                height: 50%;\n                display: flex;\n            }\n            .icon {\n                flex: 1;\n                line-height: 1;\n            }\n        "]
                }] }
    ];
    /** @nocollapse */
    TimeSpinnerComponent.ctorParameters = function () { return [
        { type: NgZone }
    ]; };
    TimeSpinnerComponent.propDecorators = {
        input: [{ type: ViewChild, args: ['input',] }],
        disabled: [{ type: Input }],
        readonly: [{ type: Input }],
        editable: [{ type: Input }],
        use12Hours: [{ type: Input }],
        placeHolder: [{ type: Input }],
        format: [{ type: Input }],
        hourStep: [{ type: Input }],
        minuteStep: [{ type: Input }],
        secondStep: [{ type: Input }],
        max: [{ type: Input }],
        min: [{ type: Input }],
        disabledSeconds: [{ type: Input }],
        separator: [{ type: Input }],
        value: [{ type: Input }],
        change: [{ type: Output }],
        onBlur: [{ type: Output }],
        focus: [{ type: Output }],
        onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
        onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
    };
    return TimeSpinnerComponent;
}());
export { TimeSpinnerComponent };
if (false) {
    /** @type {?} */
    TimeSpinnerComponent.prototype.input;
    /** @type {?} */
    TimeSpinnerComponent.prototype.placeHolder;
    /** @type {?} */
    TimeSpinnerComponent.prototype.format;
    /** @type {?} */
    TimeSpinnerComponent.prototype.hourStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.minuteStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.secondStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.max;
    /** @type {?} */
    TimeSpinnerComponent.prototype.min;
    /** @type {?} */
    TimeSpinnerComponent.prototype.separator;
    /** @type {?} */
    TimeSpinnerComponent.prototype.change;
    /** @type {?} */
    TimeSpinnerComponent.prototype.onBlur;
    /** @type {?} */
    TimeSpinnerComponent.prototype.focus;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._disabledSeconds;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._readonly;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._editable;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._use12Hours;
    /** @type {?} */
    TimeSpinnerComponent.prototype._value;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.selObj;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.start;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.end;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1zcGlubmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdGltZS1zcGlubmVyLyIsInNvdXJjZXMiOlsibGliL3RpbWUtc3Bpbm5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsS0FBSyxFQUNMLFVBQVUsRUFDVixTQUFTLEVBQ1QsTUFBTSxFQUNOLFlBQVksRUFDWixVQUFVLEVBQ1YsWUFBWSxFQUNaLE1BQU0sRUFDVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekU7SUF3TkksOEJBQW9CLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBNUZsQyxnQkFBVyxHQUFXLE9BQU8sQ0FBQztRQUc5QixXQUFNLEdBQVcsVUFBVSxDQUFDO1FBRzVCLGFBQVEsR0FBVyxDQUFDLENBQUM7UUFHckIsZUFBVSxHQUFXLENBQUMsQ0FBQztRQUd2QixlQUFVLEdBQVcsQ0FBQyxDQUFDO1FBaUJ2QixjQUFTLEdBQVcsR0FBRyxDQUFDO1FBOEN4QixXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVqQyxXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUU1QixVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVuQixxQkFBZ0IsR0FBWSxLQUFLLENBQUM7UUFDbEMsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGNBQVMsR0FBWSxJQUFJLENBQUM7UUFDMUIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFHN0IsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQixRQUFHLEdBQVcsQ0FBQyxDQUFDO1FBQ2hCLHNCQUFpQjs7OztRQUFHLFVBQUMsR0FBUSxJQUFPLENBQUMsRUFBQztRQUN0QyxxQkFBZ0I7Ozs7UUFBRyxV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UUwsS0FBSzt5QkFHTCxLQUFLOzJCQUdMLEtBQUs7NkJBR0wsS0FBSzs2QkFHTCxLQUFLO3NCQUdMLEtBQUs7c0JBR0wsS0FBSztrQ0FHTCxLQUFLOzRCQVFMLEtBQUs7d0JBR0wsS0FBSzt5QkEyQ0wsTUFBTTt5QkFFTixNQUFNO3dCQUVOLE1BQU07K0JBK0pOLFlBQVksU0FBQyxZQUFZLEVBQUUsQ0FBQyxRQUFRLENBQUM7K0JBVXJDLFlBQVksU0FBQyxZQUFZLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0lBdUIxQywyQkFBQztDQUFBLEFBMVlELElBMFlDO1NBaFRZLG9CQUFvQjs7O0lBQzdCLHFDQUNrQjs7SUErQmxCLDJDQUM4Qjs7SUFFOUIsc0NBQzRCOztJQUU1Qix3Q0FDcUI7O0lBRXJCLDBDQUN1Qjs7SUFFdkIsMENBQ3VCOztJQUV2QixtQ0FDWTs7SUFFWixtQ0FDWTs7SUFVWix5Q0FDd0I7O0lBNkN4QixzQ0FDaUM7O0lBQ2pDLHNDQUM0Qjs7SUFDNUIscUNBQzJCOzs7OztJQUUzQixnREFBMEM7Ozs7O0lBQzFDLHlDQUFtQzs7Ozs7SUFDbkMseUNBQW1DOzs7OztJQUNuQyx5Q0FBa0M7Ozs7O0lBQ2xDLDJDQUFxQzs7SUFDckMsc0NBQWU7Ozs7O0lBQ2Ysc0NBQW9COzs7OztJQUNwQixxQ0FBMEI7Ozs7O0lBQzFCLG1DQUF3Qjs7Ozs7SUFDeEIsaURBQThDOzs7OztJQUM5QyxnREFBNkM7Ozs7O0lBQ2pDLHNDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBJbnB1dCxcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbiAgICBPdXRwdXQsXHJcbiAgICBFdmVudEVtaXR0ZXIsXHJcbiAgICBmb3J3YXJkUmVmLFxyXG4gICAgSG9zdExpc3RlbmVyLFxyXG4gICAgTmdab25lXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10aW1lLXNwaW5uZXInLFxyXG4gICAgdGVtcGxhdGU6IGBcclxuICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtZ3JvdXBcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7XHJcbiAgICAgICAgICAgICAgICAnZi1zdGF0ZS1kaXNhYmxlZCc6IGRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgJ2Ytc3RhdGUtcmVhZG9ubHknOiByZWFkb25seSAmJiAhZGlzYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAnZi1zdGF0ZS1lZGl0YWJsZSc6IGVkaXRhYmxlICYmICFkaXNhYmxlZCAmJiAhcmVhZG9ubHlcclxuICAgICAgICAgICAgfVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cIl92YWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAjaW5wdXRcclxuICAgICAgICAgICAgICAgIChjbGljayk9XCJvbkNsaWNrKClcIlxyXG4gICAgICAgICAgICAgICAgKGJsdXIpPVwiYmx1cigpXCJcclxuICAgICAgICAgICAgICAgIChmb2N1cyk9XCJvbkZvY3VzKClcIlxyXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cImRpc2FibGVkfHxyZWFkb25seXx8IWVkaXRhYmxlPycnOnBsYWNlSG9sZGVyXCJcclxuICAgICAgICAgICAgICAgIFtyZWFkb25seV09XCJyZWFkb25seSB8fCAhZWRpdGFibGVcIlxyXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcclxuICAgICAgICAgICAgICAgIChjaGFuZ2UpPVwib25DaGFuZ2UoKVwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYXBwZW5kIGlucHV0LWdyb3VwLWNsZWFyXCJcclxuICAgICAgICAgICAgICAgICpuZ0lmPVwiIXJlYWRvbmx5ICYmICFkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJib3gtc2hhZG93OiBub25lOyBwYWRkaW5nOiAwIDVweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cImNsZWFyRGF0ZSgpXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImstaWNvbiBrLWNsZWFyLXZhbHVlIGstaS1jbG9zZSBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImZvbnQtc2l6ZTogMC44cmVtXCJcclxuICAgICAgICAgICAgICAgICAgICA+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LWdyb3VwLWFwcGVuZCBidG4tZ3JvdXBcIlxyXG4gICAgICAgICAgICAgICAgKm5nSWY9XCIhcmVhZG9ubHkgJiYgIWRpc2FibGVkXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgaGFsZi1idG5cIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiYm94LXNoYWRvdzogbm9uZTsgcGFkZGluZzogMCA1cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJ1cCgpXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb24gay1pLWFycm93LWNoZXZyb24tdXBcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5IGhhbGYtYnRuXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImJveC1zaGFkb3c6IG5vbmU7IHBhZGRpbmc6IDAgNXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiZG93bigpXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImljb24gay1pLWFycm93LWNoZXZyb24tZG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwidHJhbnNmb3JtOiB0cmFuc2xhdGVYKDFweCk7XCJcclxuICAgICAgICAgICAgICAgICAgICA+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICAgICAgLmJ0bi1ncm91cCB7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEuNTAwMDNyZW07XHJcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5oYWxmLWJ0biB7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwJTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmljb24ge1xyXG4gICAgICAgICAgICAgICAgZmxleDogMTtcclxuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYFxyXG4gICAgXSxcclxuICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRpbWVTcGlubmVyQ29tcG9uZW50KSxcclxuICAgICAgICAgICAgbXVsdGk6IHRydWVcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUaW1lU3Bpbm5lckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0JylcclxuICAgIGlucHV0OiBFbGVtZW50UmVmO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgZGlzYWJsZWQodjogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gdiAhPT0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgZGlzYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCByZWFkb25seSh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fcmVhZG9ubHkgPSB2ICE9PSBmYWxzZTtcclxuICAgIH1cclxuICAgIGdldCByZWFkb25seSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVhZG9ubHk7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGVkaXRhYmxlKHY6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX2VkaXRhYmxlID0gdiA9PT0gdHJ1ZSB8fCB2ID09PSAnJztcclxuICAgIH1cclxuICAgIGdldCBlZGl0YWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWRpdGFibGU7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHVzZTEySG91cnModjogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3VzZTEySG91cnMgPSB2ICE9PSBmYWxzZTtcclxuICAgIH1cclxuICAgIGdldCB1c2UxMkhvdXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2UxMkhvdXJzO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBwbGFjZUhvbGRlcjogc3RyaW5nID0gJ+ivt+mAieaLqeaXtumXtCc7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIGZvcm1hdDogc3RyaW5nID0gJ2hoOm1tOnNzJztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgaG91clN0ZXA6IG51bWJlciA9IDE7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIG1pbnV0ZVN0ZXA6IG51bWJlciA9IDE7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNlY29uZFN0ZXA6IG51bWJlciA9IDE7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIG1heDogc3RyaW5nO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBtaW46IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRpc2FibGVkU2Vjb25kcyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZWRTZWNvbmRzID0gdiAhPT0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgZGlzYWJsZWRTZWNvbmRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZFNlY29uZHM7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNlcGFyYXRvcjogc3RyaW5nID0gJzonO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdmFsdWUodjogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHYgPT09ICcnKSByZXR1cm47XHJcbiAgICAgICAgbGV0IHRpbWUgPSB0aGlzLnBhcnNlVGltZSh2KTtcclxuICAgICAgICBpZiAoIXRpbWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4VGltZSA9IHRoaXMucGFyc2VUaW1lKHRoaXMubWF4KTtcclxuICAgICAgICBjb25zdCBtaW5UaW1lID0gdGhpcy5wYXJzZVRpbWUodGhpcy5taW4pO1xyXG4gICAgICAgIGlmIChtaW5UaW1lICYmIG1pblRpbWUgPiB0aW1lKSB7XHJcbiAgICAgICAgICAgIHRpbWUgPSBtaW5UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF4VGltZSAmJiBtYXhUaW1lIDwgdGltZSkge1xyXG4gICAgICAgICAgICB0aW1lID0gbWF4VGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHR0ID0gW1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1hdFRpbWUodGltZS5nZXRIb3VycygpKSxcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRUaW1lKHRpbWUuZ2V0TWludXRlcygpKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkU2Vjb25kcykge1xyXG4gICAgICAgICAgICB0dC5wdXNoKHRoaXMuZm9ybWF0VGltZSh0aW1lLmdldFNlY29uZHMoKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0gdHQuam9pbih0aGlzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlMTJIb3Vycykge1xyXG4gICAgICAgICAgICBsZXQgaG91ciA9IE51bWJlcihuZXdWYWx1ZS5zdWJzdHIoMCwgMikpO1xyXG4gICAgICAgICAgICBpZiAoaG91ciA+PSAxMikge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0VGltZShob3VyIC0gMTIpICsgbmV3VmFsdWUuc3Vic3RyKDIpICsgJyBQTSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlICsgJyBBTSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3ZhbHVlICE9PSBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZS5lbWl0KHsgbmV3VmFsdWUsIG9sZFZhbHVlOiB0aGlzLl92YWx1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKG5ld1ZhbHVlKTtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrKG5ld1ZhbHVlKTtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBAT3V0cHV0KClcclxuICAgIGNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpXHJcbiAgICBvbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KClcclxuICAgIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIHByaXZhdGUgX2Rpc2FibGVkU2Vjb25kczogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX3JlYWRvbmx5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9lZGl0YWJsZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIF91c2UxMkhvdXJzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBfdmFsdWU6IHN0cmluZztcclxuICAgIHByaXZhdGUgc2VsT2JqOiBhbnk7XHJcbiAgICBwcml2YXRlIHN0YXJ0OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBlbmQ6IG51bWJlciA9IDI7XHJcbiAgICBwcml2YXRlIG9uVG91Y2hlZENhbGxiYWNrID0gKG9iajogYW55KSA9PiB7IH07XHJcbiAgICBwcml2YXRlIG9uQ2hhbmdlQ2FsbGJhY2sgPSAob2JqOiBhbnkpID0+IHsgfTtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHtcclxuICAgICAgICB0aGlzLnNlbE9iaiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNsaWNrKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlMTJIb3Vycykge1xyXG4gICAgICAgICAgICBpZiAoY3Vyc29yIDw9IDIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnNvciA+IDIgJiYgY3Vyc29yIDw9IDUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSA1O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnNvciA+IDUgJiYgY3Vyc29yIDw9IDgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSA2O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSA4O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IDk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IDExO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGN1cnNvciA8PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gMjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJzb3IgPiAyICYmIGN1cnNvciA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gMztcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gNTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSA2O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSA4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XHJcbiAgICB9XHJcbiAgICBibHVyKCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgdGhpcy5vbkJsdXIuZW1pdCgpO1xyXG4gICAgfVxyXG4gICAgb25Gb2N1cygpIHtcclxuICAgICAgICB0aGlzLmZvY3VzLmVtaXQoKTtcclxuICAgIH1cclxuICAgIHVwKCkge1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZSgndXAnKTtcclxuICAgIH1cclxuICAgIGRvd24oKSB7XHJcbiAgICAgICAgdGhpcy5jb21wdXRlKCdkb3duJyk7XHJcbiAgICB9XHJcbiAgICBjb21wdXRlKHR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIC8vaWYgKGlzTmFOKHRoaXMuc2VsT2JqLnRvU3RyaW5nKCkpKSByZXR1cm5cclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBzdGVwOiBudW1iZXIsIG5ld1ZhbHVlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IHRlbXBNYXggPSB0aGlzLnN0YXJ0IDwgMiA/IDI0IDogNjA7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnQgPT09IDApIHtcclxuICAgICAgICAgICAgc3RlcCA9IHRoaXMuaG91clN0ZXA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXJ0ID09PSAzKSB7XHJcbiAgICAgICAgICAgIHN0ZXAgPSB0aGlzLm1pbnV0ZVN0ZXA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RlcCA9IHRoaXMuc2Vjb25kU3RlcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RlcCA9IE51bWJlcihzdGVwKTtcclxuICAgICAgICBpZiAodGhpcy51c2UxMkhvdXJzICYmIGlzTmFOKHRoaXMuc2VsT2JqLnRvU3RyaW5nKCkpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbE9iai50b1N0cmluZygpID09PSAnUE0nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHIoMCwgdGhpcy52YWx1ZS5sZW5ndGggLSAyKSArICdBTSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHIoMCwgdGhpcy52YWx1ZS5sZW5ndGggLSAyKSArICdQTSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3VwJykge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLmZvcm1hdFRpbWUoXHJcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuc2VsT2JqLnRvU3RyaW5nKCkpICsgc3RlcFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5mb3JtYXRUaW1lKFxyXG4gICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLnNlbE9iai50b1N0cmluZygpKSAtIHN0ZXBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKE51bWJlcihuZXdWYWx1ZSkgPj0gdGVtcE1heCkge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLmZvcm1hdFRpbWUoMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIobmV3VmFsdWUpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLmZvcm1hdFRpbWUodGVtcE1heCArIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID1cclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuc3Vic3RyaW5nKDAsIHRoaXMuc3RhcnQpICtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlICtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuc3Vic3RyaW5nKHRoaXMuZW5kLCB0aGlzLnZhbHVlLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZm9ybWF0VGltZSh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA8IDApIHJldHVybiB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gKHZhbHVlIDwgMTAgPyAnMCcgOiAnJykgKyB2YWx1ZTtcclxuICAgIH1cclxuICAgIHBhcnNlVGltZSh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZXBhcmF0b3JzOiBhbnlbXSA9IHZhbHVlLnNwbGl0KHRoaXMuc2VwYXJhdG9yKTtcclxuICAgICAgICBpZiAodGhpcy51c2UxMkhvdXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXBhcmF0b3JzW3NlcGFyYXRvcnMubGVuZ3RoIC0gMV0uaW5kZXhPZignUE0nKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcnNbMF0gPSBOdW1iZXIoc2VwYXJhdG9yc1swXSkgKyAxMiArICcnO1xyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yc1tzZXBhcmF0b3JzLmxlbmd0aCAtIDFdID0gc2VwYXJhdG9yc1tcclxuICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3JzLmxlbmd0aCAtIDFcclxuICAgICAgICAgICAgICAgIF0uc3Vic3RyKDAsIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZXBhcmF0b3JzW3NlcGFyYXRvcnMubGVuZ3RoIC0gMV0uaW5kZXhPZignQU0nKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcnNbc2VwYXJhdG9ycy5sZW5ndGggLSAxXSA9IHNlcGFyYXRvcnNbXHJcbiAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9ycy5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgICAgICBdLnN1YnN0cigwLCAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcGFyYXRvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKHNlcGFyYXRvcnNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2hpbGUgKHNlcGFyYXRvcnMubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICBzZXBhcmF0b3JzLnB1c2goMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoXHJcbiAgICAgICAgICAgIDE5MDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHNlcGFyYXRvcnNbMF0sXHJcbiAgICAgICAgICAgIHNlcGFyYXRvcnNbMV0sXHJcbiAgICAgICAgICAgIHNlcGFyYXRvcnNbMl1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgY2xlYXJEYXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZS5lbWl0KHsgbmV3VmFsdWU6ICcnLCBvbGRWYWx1ZTogdGhpcy5fdmFsdWUgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjaygnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQEhvc3RMaXN0ZW5lcignbW91c2VlbnRlcicsIFsnJGV2ZW50J10pIG9uTW91c2VFbnRlcihldmVudCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlICYmXHJcbiAgICAgICAgICAgICF0aGlzLnJlYWRvbmx5ICYmXHJcbiAgICAgICAgICAgICF0aGlzLmRpc2FibGVkXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtZ3JvdXAtY2xlYXInKS5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBbJyRldmVudCddKSBvbk1vdXNlTGVhdmUoZXZlbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1jbGVhcicpLnN0eWxlLmRpc3BsYXkgPVxyXG4gICAgICAgICAgICAgICAgJ25vbmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayh0aGlzLnZhbHVlKTtcclxuICAgIH1cclxuICAgIHdyaXRlVmFsdWUodmFsOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9ICcwJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBmbjtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gZm47XHJcbiAgICB9XHJcbiAgICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7IH1cclxufVxyXG4iXX0=