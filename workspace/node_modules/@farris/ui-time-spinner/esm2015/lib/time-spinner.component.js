/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, ViewChild, Output, EventEmitter, forwardRef, HostListener, NgZone } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
export class TimeSpinnerComponent {
    /**
     * @param {?} ngZone
     */
    constructor(ngZone) {
        this.ngZone = ngZone;
        this.placeHolder = '请选择时间';
        this.format = 'hh:mm:ss';
        this.hourStep = 1;
        this.minuteStep = 1;
        this.secondStep = 1;
        this.separator = ':';
        this.change = new EventEmitter();
        this.onBlur = new EventEmitter();
        this.focus = new EventEmitter();
        this._disabledSeconds = false;
        this._disabled = false;
        this._readonly = false;
        this._editable = true;
        this._use12Hours = false;
        this.start = 0;
        this.end = 2;
        this.onTouchedCallback = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
        this.onChangeCallback = (/**
         * @param {?} obj
         * @return {?}
         */
        (obj) => { });
        this.selObj = window.getSelection();
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set disabled(v) {
        this._disabled = v !== false;
    }
    /**
     * @return {?}
     */
    get disabled() {
        return this._disabled;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set readonly(v) {
        this._readonly = v !== false;
    }
    /**
     * @return {?}
     */
    get readonly() {
        return this._readonly;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set editable(v) {
        this._editable = v === true || v === '';
    }
    /**
     * @return {?}
     */
    get editable() {
        return this._editable;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set use12Hours(v) {
        this._use12Hours = v !== false;
    }
    /**
     * @return {?}
     */
    get use12Hours() {
        return this._use12Hours;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set disabledSeconds(v) {
        this._disabledSeconds = v !== false;
    }
    /**
     * @return {?}
     */
    get disabledSeconds() {
        return this._disabledSeconds;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        if (v === '')
            return;
        /** @type {?} */
        let time = this.parseTime(v);
        if (!time)
            return;
        /** @type {?} */
        const maxTime = this.parseTime(this.max);
        /** @type {?} */
        const minTime = this.parseTime(this.min);
        if (minTime && minTime > time) {
            time = minTime;
        }
        if (maxTime && maxTime < time) {
            time = maxTime;
        }
        /** @type {?} */
        let tt = [
            this.formatTime(time.getHours()),
            this.formatTime(time.getMinutes())
        ];
        if (!this.disabledSeconds) {
            tt.push(this.formatTime(time.getSeconds()));
        }
        /** @type {?} */
        let newValue = tt.join(this.separator);
        if (this.use12Hours) {
            /** @type {?} */
            let hour = Number(newValue.substr(0, 2));
            if (hour >= 12) {
                newValue =
                    this.formatTime(hour - 12) + newValue.substr(2) + ' PM';
            }
            else {
                newValue = newValue + ' AM';
            }
        }
        if (this._value !== newValue) {
            this.change.emit({ newValue, oldValue: this._value });
        }
        this.onChangeCallback(newValue);
        this.onTouchedCallback(newValue);
        this._value = newValue;
    }
    /**
     * @return {?}
     */
    get value() {
        return this._value;
    }
    /**
     * @return {?}
     */
    onClick() {
        /** @type {?} */
        const cursor = this.input.nativeElement.selectionStart;
        if (this.use12Hours) {
            if (cursor <= 2) {
                this.start = 0;
                this.end = 2;
            }
            else if (cursor > 2 && cursor <= 5) {
                this.start = 3;
                this.end = 5;
            }
            else if (cursor > 5 && cursor <= 8) {
                this.start = 6;
                this.end = 8;
            }
            else {
                this.start = 9;
                this.end = 11;
            }
        }
        else {
            if (cursor <= 2) {
                this.start = 0;
                this.end = 2;
            }
            else if (cursor > 2 && cursor <= 5) {
                this.start = 3;
                this.end = 5;
            }
            else {
                this.start = 6;
                this.end = 8;
            }
        }
        this.input.nativeElement.setSelectionRange(this.start, this.end);
    }
    /**
     * @return {?}
     */
    blur() {
        this.value = this.input.nativeElement.value;
        this.onBlur.emit();
    }
    /**
     * @return {?}
     */
    onFocus() {
        this.focus.emit();
    }
    /**
     * @return {?}
     */
    up() {
        this.compute('up');
    }
    /**
     * @return {?}
     */
    down() {
        this.compute('down');
    }
    /**
     * @param {?} type
     * @return {?}
     */
    compute(type) {
        //if (isNaN(this.selObj.toString())) return
        if (this.disabled)
            return;
        /** @type {?} */
        let step;
        /** @type {?} */
        let newValue;
        /** @type {?} */
        let tempMax = this.start < 2 ? 24 : 60;
        if (this.start === 0) {
            step = this.hourStep;
        }
        else if (this.start === 3) {
            step = this.minuteStep;
        }
        else {
            step = this.secondStep;
        }
        step = Number(step);
        if (this.use12Hours && isNaN(this.selObj.toString())) {
            if (this.selObj.toString() === 'PM') {
                this.value = this.value.substr(0, this.value.length - 2) + 'AM';
            }
            else {
                this.value = this.value.substr(0, this.value.length - 2) + 'PM';
            }
        }
        else {
            if (type === 'up') {
                newValue = this.formatTime(Number(this.selObj.toString()) + step);
            }
            else {
                newValue = this.formatTime(Number(this.selObj.toString()) - step);
            }
            if (Number(newValue) >= tempMax) {
                newValue = this.formatTime(0);
            }
            if (Number(newValue) < 0) {
                newValue = this.formatTime(tempMax + newValue);
            }
            this.value =
                this.value.substring(0, this.start) +
                    newValue +
                    this.value.substring(this.end, this.value.length);
        }
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.input.nativeElement.focus();
                this.input.nativeElement.setSelectionRange(this.start, this.end);
            }), 0);
        }));
    }
    /**
     * @param {?} value
     * @return {?}
     */
    formatTime(value) {
        if (value < 0)
            return value;
        return (value < 10 ? '0' : '') + value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    parseTime(value) {
        if (!value) {
            return;
        }
        /** @type {?} */
        const separators = value.split(this.separator);
        if (this.use12Hours) {
            if (separators[separators.length - 1].indexOf('PM') > 0) {
                separators[0] = Number(separators[0]) + 12 + '';
                separators[separators.length - 1] = separators[separators.length - 1].substr(0, 2);
            }
            if (separators[separators.length - 1].indexOf('AM') > 0) {
                separators[separators.length - 1] = separators[separators.length - 1].substr(0, 2);
            }
        }
        for (let i = 0; i < separators.length; i++) {
            if (isNaN(separators[i])) {
                return null;
            }
        }
        while (separators.length < 3) {
            separators.push(0);
        }
        return new Date(1900, 0, 0, separators[0], separators[1], separators[2]);
    }
    /**
     * @return {?}
     */
    clearDate() {
        if (!this.disabled) {
            this.change.emit({ newValue: '', oldValue: this._value });
            this._value = '';
            this.onChangeCallback('');
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        if (this.input.nativeElement.value &&
            !this.readonly &&
            !this.disabled) {
            event.target.querySelector('.input-group-clear').style.display = '';
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseLeave(event) {
        if (!this.readonly && !this.disabled) {
            event.target.querySelector('.input-group-clear').style.display =
                'none';
        }
    }
    /**
     * @return {?}
     */
    onChange() {
        this.onChangeCallback(this.value);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        if (val) {
            this.value = val;
        }
        else {
            this.value = '0';
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onChangeCallback = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onTouchedCallback = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) { }
}
TimeSpinnerComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-time-spinner',
                template: `
        <div
            class="input-group"
            [ngClass]="{
                'f-state-disabled': disabled,
                'f-state-readonly': readonly && !disabled,
                'f-state-editable': editable && !disabled && !readonly
            }"
        >
            <input
                type="text"
                autocomplete="off"
                class="form-control"
                [(ngModel)]="_value"
                #input
                (click)="onClick()"
                (blur)="blur()"
                (focus)="onFocus()"
                [placeholder]="disabled||readonly||!editable?'':placeHolder"
                [readonly]="readonly || !editable"
                [disabled]="disabled"
                (change)="onChange()"
            />
            <div
                class="input-group-append input-group-clear"
                *ngIf="!readonly && !disabled"
                style="display: none"
            >
                <button
                    type="button"
                    class="btn btn-secondary"
                    style="box-shadow: none; padding: 0 5px"
                    (click)="clearDate()"
                >
                    <i
                        class="k-icon k-clear-value k-i-close "
                        style="font-size: 0.8rem"
                    ></i>
                </button>
            </div>
            <div
                class="input-group-append btn-group"
                *ngIf="!readonly && !disabled"
            >
                <button
                    class="btn btn-secondary half-btn"
                    style="box-shadow: none; padding: 0 5px"
                    (click)="up()"
                >
                    <span class="icon k-i-arrow-chevron-up"></span>
                </button>
                <button
                    class="btn btn-secondary half-btn"
                    style="box-shadow: none; padding: 0 5px"
                    (click)="down()"
                >
                    <span
                        class="icon k-i-arrow-chevron-down"
                        style="transform: translateX(1px);"
                    ></span>
                </button>
            </div>
        </div>
    `,
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => TimeSpinnerComponent)),
                        multi: true
                    }
                ],
                styles: [`
            .btn-group {
                height: 1.50003rem;
                flex-direction: column;
            }
            .half-btn {
                height: 50%;
                display: flex;
            }
            .icon {
                flex: 1;
                line-height: 1;
            }
        `]
            }] }
];
/** @nocollapse */
TimeSpinnerComponent.ctorParameters = () => [
    { type: NgZone }
];
TimeSpinnerComponent.propDecorators = {
    input: [{ type: ViewChild, args: ['input',] }],
    disabled: [{ type: Input }],
    readonly: [{ type: Input }],
    editable: [{ type: Input }],
    use12Hours: [{ type: Input }],
    placeHolder: [{ type: Input }],
    format: [{ type: Input }],
    hourStep: [{ type: Input }],
    minuteStep: [{ type: Input }],
    secondStep: [{ type: Input }],
    max: [{ type: Input }],
    min: [{ type: Input }],
    disabledSeconds: [{ type: Input }],
    separator: [{ type: Input }],
    value: [{ type: Input }],
    change: [{ type: Output }],
    onBlur: [{ type: Output }],
    focus: [{ type: Output }],
    onMouseEnter: [{ type: HostListener, args: ['mouseenter', ['$event'],] }],
    onMouseLeave: [{ type: HostListener, args: ['mouseleave', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    TimeSpinnerComponent.prototype.input;
    /** @type {?} */
    TimeSpinnerComponent.prototype.placeHolder;
    /** @type {?} */
    TimeSpinnerComponent.prototype.format;
    /** @type {?} */
    TimeSpinnerComponent.prototype.hourStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.minuteStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.secondStep;
    /** @type {?} */
    TimeSpinnerComponent.prototype.max;
    /** @type {?} */
    TimeSpinnerComponent.prototype.min;
    /** @type {?} */
    TimeSpinnerComponent.prototype.separator;
    /** @type {?} */
    TimeSpinnerComponent.prototype.change;
    /** @type {?} */
    TimeSpinnerComponent.prototype.onBlur;
    /** @type {?} */
    TimeSpinnerComponent.prototype.focus;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._disabledSeconds;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._readonly;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._editable;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype._use12Hours;
    /** @type {?} */
    TimeSpinnerComponent.prototype._value;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.selObj;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.start;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.end;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.onTouchedCallback;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.onChangeCallback;
    /**
     * @type {?}
     * @private
     */
    TimeSpinnerComponent.prototype.ngZone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1zcGlubmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdGltZS1zcGlubmVyLyIsInNvdXJjZXMiOlsibGliL3RpbWUtc3Bpbm5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQ1QsS0FBSyxFQUNMLFVBQVUsRUFDVixTQUFTLEVBQ1QsTUFBTSxFQUNOLFlBQVksRUFDWixVQUFVLEVBQ1YsWUFBWSxFQUNaLE1BQU0sRUFDVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUEyRnpFLE1BQU0sT0FBTyxvQkFBb0I7Ozs7SUE4SDdCLFlBQW9CLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBNUZsQyxnQkFBVyxHQUFXLE9BQU8sQ0FBQztRQUc5QixXQUFNLEdBQVcsVUFBVSxDQUFDO1FBRzVCLGFBQVEsR0FBVyxDQUFDLENBQUM7UUFHckIsZUFBVSxHQUFXLENBQUMsQ0FBQztRQUd2QixlQUFVLEdBQVcsQ0FBQyxDQUFDO1FBaUJ2QixjQUFTLEdBQVcsR0FBRyxDQUFDO1FBOEN4QixXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVqQyxXQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUU1QixVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVuQixxQkFBZ0IsR0FBWSxLQUFLLENBQUM7UUFDbEMsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGNBQVMsR0FBWSxJQUFJLENBQUM7UUFDMUIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFHN0IsVUFBSyxHQUFXLENBQUMsQ0FBQztRQUNsQixRQUFHLEdBQVcsQ0FBQyxDQUFDO1FBQ2hCLHNCQUFpQjs7OztRQUFHLENBQUMsR0FBUSxFQUFFLEVBQUUsR0FBRyxD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Szt3QkFRTCxLQUFLO29CQUdMLEtBQUs7cUJBMkNMLE1BQU07cUJBRU4sTUFBTTtvQkFFTixNQUFNOzJCQStKTixZQUFZLFNBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDOzJCQVVyQyxZQUFZLFNBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDOzs7O0lBeFJ0QyxxQ0FDa0I7O0lBK0JsQiwyQ0FDOEI7O0lBRTlCLHNDQUM0Qjs7SUFFNUIsd0NBQ3FCOztJQUVyQiwwQ0FDdUI7O0lBRXZCLDBDQUN1Qjs7SUFFdkIsbUNBQ1k7O0lBRVosbUNBQ1k7O0lBVVoseUNBQ3dCOztJQTZDeEIsc0NBQ2lDOztJQUNqQyxzQ0FDNEI7O0lBQzVCLHFDQUMyQjs7Ozs7SUFFM0IsZ0RBQTBDOzs7OztJQUMxQyx5Q0FBbUM7Ozs7O0lBQ25DLHlDQUFtQzs7Ozs7SUFDbkMseUNBQWtDOzs7OztJQUNsQywyQ0FBcUM7O0lBQ3JDLHNDQUFlOzs7OztJQUNmLHNDQUFvQjs7Ozs7SUFDcEIscUNBQTBCOzs7OztJQUMxQixtQ0FBd0I7Ozs7O0lBQ3hCLGlEQUE4Qzs7Ozs7SUFDOUMsZ0RBQTZDOzs7OztJQUNqQyxzQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LFxyXG4gICAgSW5wdXQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgVmlld0NoaWxkLFxyXG4gICAgT3V0cHV0LFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgZm9yd2FyZFJlZixcclxuICAgIEhvc3RMaXN0ZW5lcixcclxuICAgIE5nWm9uZVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtdGltZS1zcGlubmVyJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzcz1cImlucHV0LWdyb3VwXCJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwie1xyXG4gICAgICAgICAgICAgICAgJ2Ytc3RhdGUtZGlzYWJsZWQnOiBkaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgICdmLXN0YXRlLXJlYWRvbmx5JzogcmVhZG9ubHkgJiYgIWRpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgJ2Ytc3RhdGUtZWRpdGFibGUnOiBlZGl0YWJsZSAmJiAhZGlzYWJsZWQgJiYgIXJlYWRvbmx5XHJcbiAgICAgICAgICAgIH1cIlxyXG4gICAgICAgID5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJfdmFsdWVcIlxyXG4gICAgICAgICAgICAgICAgI2lucHV0XHJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwib25DbGljaygpXCJcclxuICAgICAgICAgICAgICAgIChibHVyKT1cImJsdXIoKVwiXHJcbiAgICAgICAgICAgICAgICAoZm9jdXMpPVwib25Gb2N1cygpXCJcclxuICAgICAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJkaXNhYmxlZHx8cmVhZG9ubHl8fCFlZGl0YWJsZT8nJzpwbGFjZUhvbGRlclwiXHJcbiAgICAgICAgICAgICAgICBbcmVhZG9ubHldPVwicmVhZG9ubHkgfHwgIWVkaXRhYmxlXCJcclxuICAgICAgICAgICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICAoY2hhbmdlKT1cIm9uQ2hhbmdlKClcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0LWdyb3VwLWFwcGVuZCBpbnB1dC1ncm91cC1jbGVhclwiXHJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIiFyZWFkb25seSAmJiAhZGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBub25lXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiYm94LXNoYWRvdzogbm9uZTsgcGFkZGluZzogMCA1cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJjbGVhckRhdGUoKVwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJrLWljb24gay1jbGVhci12YWx1ZSBrLWktY2xvc2UgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJmb250LXNpemU6IDAuOHJlbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPjwvaT5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmQgYnRuLWdyb3VwXCJcclxuICAgICAgICAgICAgICAgICpuZ0lmPVwiIXJlYWRvbmx5ICYmICFkaXNhYmxlZFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5IGhhbGYtYnRuXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImJveC1zaGFkb3c6IG5vbmU7IHBhZGRpbmc6IDAgNXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwidXAoKVwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uIGstaS1hcnJvdy1jaGV2cm9uLXVwXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBoYWxmLWJ0blwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJib3gtc2hhZG93OiBub25lOyBwYWRkaW5nOiAwIDVweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cImRvd24oKVwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJpY29uIGstaS1hcnJvdy1jaGV2cm9uLWRvd25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cInRyYW5zZm9ybTogdHJhbnNsYXRlWCgxcHgpO1wiXHJcbiAgICAgICAgICAgICAgICAgICAgPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGAsXHJcbiAgICBzdHlsZXM6IFtcclxuICAgICAgICBgXHJcbiAgICAgICAgICAgIC5idG4tZ3JvdXAge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxLjUwMDAzcmVtO1xyXG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuaGFsZi1idG4ge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCU7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5pY29uIHtcclxuICAgICAgICAgICAgICAgIGZsZXg6IDE7XHJcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGBcclxuICAgIF0sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUaW1lU3Bpbm5lckNvbXBvbmVudCksXHJcbiAgICAgICAgICAgIG11bHRpOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGltZVNwaW5uZXJDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dCcpXHJcbiAgICBpbnB1dDogRWxlbWVudFJlZjtcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGRpc2FibGVkKHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IHYgIT09IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRpc2FibGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcclxuICAgIH1cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgcmVhZG9ubHkodjogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX3JlYWRvbmx5ID0gdiAhPT0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVhZG9ubHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWRvbmx5O1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlZGl0YWJsZSh2OiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9lZGl0YWJsZSA9IHYgPT09IHRydWUgfHwgdiA9PT0gJyc7XHJcbiAgICB9XHJcbiAgICBnZXQgZWRpdGFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VkaXRhYmxlO1xyXG4gICAgfVxyXG4gICAgQElucHV0KClcclxuICAgIHNldCB1c2UxMkhvdXJzKHY6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl91c2UxMkhvdXJzID0gdiAhPT0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlMTJIb3VycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlMTJIb3VycztcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgcGxhY2VIb2xkZXI6IHN0cmluZyA9ICfor7fpgInmi6nml7bpl7QnO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBmb3JtYXQ6IHN0cmluZyA9ICdoaDptbTpzcyc7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIGhvdXJTdGVwOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBtaW51dGVTdGVwOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZWNvbmRTdGVwOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBtYXg6IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgbWluOiBzdHJpbmc7XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBkaXNhYmxlZFNlY29uZHModjogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVkU2Vjb25kcyA9IHYgIT09IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRpc2FibGVkU2Vjb25kcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWRTZWNvbmRzO1xyXG4gICAgfVxyXG5cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXBhcmF0b3I6IHN0cmluZyA9ICc6JztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHZhbHVlKHY6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2ID09PSAnJykgcmV0dXJuO1xyXG4gICAgICAgIGxldCB0aW1lID0gdGhpcy5wYXJzZVRpbWUodik7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFRpbWUgPSB0aGlzLnBhcnNlVGltZSh0aGlzLm1heCk7XHJcbiAgICAgICAgY29uc3QgbWluVGltZSA9IHRoaXMucGFyc2VUaW1lKHRoaXMubWluKTtcclxuICAgICAgICBpZiAobWluVGltZSAmJiBtaW5UaW1lID4gdGltZSkge1xyXG4gICAgICAgICAgICB0aW1lID0gbWluVGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1heFRpbWUgJiYgbWF4VGltZSA8IHRpbWUpIHtcclxuICAgICAgICAgICAgdGltZSA9IG1heFRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0dCA9IFtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXRUaW1lKHRpbWUuZ2V0SG91cnMoKSksXHJcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0VGltZSh0aW1lLmdldE1pbnV0ZXMoKSlcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNhYmxlZFNlY29uZHMpIHtcclxuICAgICAgICAgICAgdHQucHVzaCh0aGlzLmZvcm1hdFRpbWUodGltZS5nZXRTZWNvbmRzKCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IHR0LmpvaW4odGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgIGlmICh0aGlzLnVzZTEySG91cnMpIHtcclxuICAgICAgICAgICAgbGV0IGhvdXIgPSBOdW1iZXIobmV3VmFsdWUuc3Vic3RyKDAsIDIpKTtcclxuICAgICAgICAgICAgaWYgKGhvdXIgPj0gMTIpIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdFRpbWUoaG91ciAtIDEyKSArIG5ld1ZhbHVlLnN1YnN0cigyKSArICcgUE0nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSArICcgQU0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl92YWx1ZSAhPT0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdCh7IG5ld1ZhbHVlLCBvbGRWYWx1ZTogdGhpcy5fdmFsdWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayhuZXdWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayhuZXdWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgQE91dHB1dCgpXHJcbiAgICBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKVxyXG4gICAgb25CbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpXHJcbiAgICBmb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBwcml2YXRlIF9kaXNhYmxlZFNlY29uZHM6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9yZWFkb25seTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfZWRpdGFibGU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfdXNlMTJIb3VyczogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgX3ZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHNlbE9iajogYW55O1xyXG4gICAgcHJpdmF0ZSBzdGFydDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgZW5kOiBudW1iZXIgPSAyO1xyXG4gICAgcHJpdmF0ZSBvblRvdWNoZWRDYWxsYmFjayA9IChvYmo6IGFueSkgPT4geyB9O1xyXG4gICAgcHJpdmF0ZSBvbkNoYW5nZUNhbGxiYWNrID0gKG9iajogYW55KSA9PiB7IH07XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XHJcbiAgICAgICAgdGhpcy5zZWxPYmogPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljaygpIHtcclxuICAgICAgICBjb25zdCBjdXJzb3IgPSB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZTEySG91cnMpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnNvciA8PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gMjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJzb3IgPiAyICYmIGN1cnNvciA8PSA1KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gMztcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gNTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJzb3IgPiA1ICYmIGN1cnNvciA8PSA4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gNjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gODtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSA5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAxMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJzb3IgPD0gMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IDI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3Vyc29yID4gMiAmJiBjdXJzb3IgPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IDM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gNjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gODtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xyXG4gICAgfVxyXG4gICAgYmx1cigpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIHRoaXMub25CbHVyLmVtaXQoKTtcclxuICAgIH1cclxuICAgIG9uRm9jdXMoKSB7XHJcbiAgICAgICAgdGhpcy5mb2N1cy5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICB1cCgpIHtcclxuICAgICAgICB0aGlzLmNvbXB1dGUoJ3VwJyk7XHJcbiAgICB9XHJcbiAgICBkb3duKCkge1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZSgnZG93bicpO1xyXG4gICAgfVxyXG4gICAgY29tcHV0ZSh0eXBlOiBzdHJpbmcpIHtcclxuICAgICAgICAvL2lmIChpc05hTih0aGlzLnNlbE9iai50b1N0cmluZygpKSkgcmV0dXJuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBsZXQgc3RlcDogbnVtYmVyLCBuZXdWYWx1ZTogc3RyaW5nO1xyXG4gICAgICAgIGxldCB0ZW1wTWF4ID0gdGhpcy5zdGFydCA8IDIgPyAyNCA6IDYwO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHN0ZXAgPSB0aGlzLmhvdXJTdGVwO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGFydCA9PT0gMykge1xyXG4gICAgICAgICAgICBzdGVwID0gdGhpcy5taW51dGVTdGVwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0ZXAgPSB0aGlzLnNlY29uZFN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0ZXAgPSBOdW1iZXIoc3RlcCk7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlMTJIb3VycyAmJiBpc05hTih0aGlzLnNlbE9iai50b1N0cmluZygpKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxPYmoudG9TdHJpbmcoKSA9PT0gJ1BNJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyKDAsIHRoaXMudmFsdWUubGVuZ3RoIC0gMikgKyAnQU0nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUuc3Vic3RyKDAsIHRoaXMudmFsdWUubGVuZ3RoIC0gMikgKyAnUE0nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd1cCcpIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5mb3JtYXRUaW1lKFxyXG4gICAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLnNlbE9iai50b1N0cmluZygpKSArIHN0ZXBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMuZm9ybWF0VGltZShcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5zZWxPYmoudG9TdHJpbmcoKSkgLSBzdGVwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIobmV3VmFsdWUpID49IHRlbXBNYXgpIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5mb3JtYXRUaW1lKDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoTnVtYmVyKG5ld1ZhbHVlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5mb3JtYXRUaW1lKHRlbXBNYXggKyBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnN1YnN0cmluZygwLCB0aGlzLnN0YXJ0KSArXHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSArXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnN1YnN0cmluZyh0aGlzLmVuZCwgdGhpcy52YWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xyXG4gICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZvcm1hdFRpbWUodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgPCAwKSByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuICh2YWx1ZSA8IDEwID8gJzAnIDogJycpICsgdmFsdWU7XHJcbiAgICB9XHJcbiAgICBwYXJzZVRpbWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yczogYW55W10gPSB2YWx1ZS5zcGxpdCh0aGlzLnNlcGFyYXRvcik7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlMTJIb3Vycykge1xyXG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9yc1tzZXBhcmF0b3JzLmxlbmd0aCAtIDFdLmluZGV4T2YoJ1BNJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3JzWzBdID0gTnVtYmVyKHNlcGFyYXRvcnNbMF0pICsgMTIgKyAnJztcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcnNbc2VwYXJhdG9ycy5sZW5ndGggLSAxXSA9IHNlcGFyYXRvcnNbXHJcbiAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9ycy5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgICAgICBdLnN1YnN0cigwLCAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9yc1tzZXBhcmF0b3JzLmxlbmd0aCAtIDFdLmluZGV4T2YoJ0FNJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3JzW3NlcGFyYXRvcnMubGVuZ3RoIC0gMV0gPSBzZXBhcmF0b3JzW1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvcnMubGVuZ3RoIC0gMVxyXG4gICAgICAgICAgICAgICAgXS5zdWJzdHIoMCwgMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXBhcmF0b3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihzZXBhcmF0b3JzW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoaWxlIChzZXBhcmF0b3JzLmxlbmd0aCA8IDMpIHtcclxuICAgICAgICAgICAgc2VwYXJhdG9ycy5wdXNoKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAxOTAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICBzZXBhcmF0b3JzWzBdLFxyXG4gICAgICAgICAgICBzZXBhcmF0b3JzWzFdLFxyXG4gICAgICAgICAgICBzZXBhcmF0b3JzWzJdXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIGNsZWFyRGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2UuZW1pdCh7IG5ld1ZhbHVlOiAnJywgb2xkVmFsdWU6IHRoaXMuX3ZhbHVlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soJycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEBIb3N0TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBbJyRldmVudCddKSBvbk1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5yZWFkb25seSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5kaXNhYmxlZFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcignLmlucHV0LWdyb3VwLWNsZWFyJykuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWxlYXZlJywgWyckZXZlbnQnXSkgb25Nb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtZ3JvdXAtY2xlYXInKS5zdHlsZS5kaXNwbGF5ID1cclxuICAgICAgICAgICAgICAgICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkNoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICB3cml0ZVZhbHVlKHZhbDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSAnMCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrID0gZm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vblRvdWNoZWRDYWxsYmFjayA9IGZuO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQgeyB9XHJcbn1cclxuIl19