/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { cloneDeep } from 'lodash-es';
/*
* @Author: 疯狂秀才(lucas huang)
* @Date: 2018-10-27 10:55:02
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-10-16 14:14:14
* @Company: Inspur
* @Version: v0.0.1
*/
import { Component, Input, ViewChild, Output, EventEmitter, TemplateRef, ContentChildren, QueryList, Injector, ChangeDetectorRef, ElementRef, Renderer2 } from '@angular/core';
import { MessagerService } from '@farris/ui-messager';
import { TreeTableComponent } from '@farris/ui-treetable';
import { CommonUtils, FarrisTemplateDirective } from '@farris/ui-common';
import { LocaleService } from '@farris/ui-locale';
var MultiSelectComponent = /** @class */ (function () {
    function MultiSelectComponent(mesagerSer, injector, cd) {
        this.mesagerSer = mesagerSer;
        this.injector = injector;
        this.cd = cd;
        this.allTreeNodes = [];
        this._ds = [];
        this.displayType = 'List';
        /**
         * 显示右侧上移下移按钮
         */
        this.enableTargetSort = true;
        this.height = 445;
        this.fit = true;
        this.noDataMoveMessage = '请选择要移动的数据。';
        /**
         * 树结构时，是否显示级联选择控制选项
         */
        this.showCascadeControl = false;
        this.leftTitle = '未选择';
        this.rightTitle = '已选择';
        this.enableSearch = true;
        /**
         * 目标数据源显示checkbox 允许多选
         */
        this.showCheckbox = false;
        /**
         * 右侧已选启用重置，在启用复选框时，是否显示重置按钮，即取消右侧所有勾选项，默认为 false
         */
        this.enableReset = false;
        /**
         * 启用折行
         */
        this.wordWrap = false;
        /**
         * 启用多条记录一起移动；默认 false
         */
        this.enableMoveMore = false;
        /**
         * 查询时对value字段进行查询，默认为 true; false时仅查询文本字段
         */
        this.searchValueField = true;
        this.dataChange = new EventEmitter();
        this.selected = new EventEmitter();
        this.unSelected = new EventEmitter();
        this.selectedIdChange = new EventEmitter();
        this.beforeMove = new EventEmitter();
        this.afterMove = new EventEmitter();
        this.sortMove = new EventEmitter();
        // 左侧选中的数据 { [keyVal]: obj, [keyVal]: obj ... }
        this._leftCheckeds = {};
        // 右侧数据
        this._rightData = [];
        this.canCheckLength = 0;
        this.leftCount = 0;
        this._searchValue = '';
        // 级联选择控制选项
        this.enableCascase = true;
        this.updateTimer1 = null;
        this.updateTimer2 = null;
        this.rightSelectedItem = null;
        this.rightActiveIndex = -1;
        this.trackByItems = (/**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
        function (index, item) {
            return index;
        });
        if (!Object.values) {
            Object.values = (/**
             * @param {?} obj
             * @return {?}
             */
            function (obj) {
                return Object.keys(obj).map((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    return obj[e];
                }));
            });
        }
        this.el = this.injector.get(ElementRef);
        this.render = this.injector.get(Renderer2);
        this.localeService = this.injector.get(LocaleService);
        this.commonUtils = this.injector.get(CommonUtils, null);
    }
    Object.defineProperty(MultiSelectComponent.prototype, "dataSource", {
        get: /**
         * @return {?}
         */
        function () {
            return this._ds;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            var _this_1 = this;
            val = val || [];
            this._ds = val;
            if (!this.searchValue) {
                if (val.length) {
                    if (val[0].toJSON) {
                        this.copyDataSource = val.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n.toJSON(); }));
                    }
                    else {
                        this.copyDataSource = cloneDeep(val);
                    }
                }
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this_1.initRightData(_this_1.selectedId, false);
                }));
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultiSelectComponent.prototype, "selections", {
        get: /**
         * @return {?}
         */
        function () {
            return this._rightData;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._rightData = val.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n !== undefined && n !== null; }));
            this.cd.detectChanges();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultiSelectComponent.prototype, "searchValue", {
        get: /**
         * @return {?}
         */
        function () {
            return this._searchValue;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this_1 = this;
            this._searchValue = value;
            // this.copyDataSource = [...this.dataSource];
            if (value === undefined || value === null || value === '') {
                /** @type {?} */
                var leftCheckitems_1 = tslib_1.__assign({}, this._leftCheckeds);
                if (this.displayType === 'Tree') {
                    this.tt.selections.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        leftCheckitems_1[n.id] = n.data;
                    }));
                }
                this.dataSource = this.copyDataSource;
                if (this.displayType === 'Tree') {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        /** @type {?} */
                        var ids = Object.keys(leftCheckitems_1);
                        if (ids && ids.length) {
                            _this_1.tt.checkedNodes(ids);
                        }
                    }));
                }
                else {
                    this._leftCheckeds = tslib_1.__assign({}, leftCheckitems_1);
                }
                return;
            }
            if (this.displayType === 'Tree') {
                // const newDataSource = this.getTreeDataBySearch(this._searchValue, this.allTreeNodes);
                this.tt.searchHandle.search(this.textField + "," + this.valueField, this._searchValue);
            }
            else {
                this.dataSource = this.getListDataBySearch(this._searchValue, this.copyDataSource);
            }
            if (this.updateTimer1) {
                clearTimeout(this.updateTimer1);
            }
            this.updateTimer1 = setTimeout((/**
             * @return {?}
             */
            function () {
                _this_1.canCheckLength = _this_1.getCanCheckLength();
            }));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.copyDataSource = this.dataSource ? [...this.dataSource] : [];
        this.emptyData = this.localeService.getValue('multiSelect.emptyData') || '暂无数据';
        this.initRightData(this.selectedId);
        this.moveItem();
        if (!this.showCheckbox && this.enableMoveMore) {
            this.showCheckbox = true;
        }
    };
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var elt = this.el.nativeElement;
        this.render.addClass(elt, 'row');
        this.render.addClass(elt, 'f-multi-select');
        if (this.fit === true) {
            this.render.addClass(elt, 'f-utils-fill');
            this.render.setStyle(elt, 'height', '100%');
        }
        else {
            if (!!this.height) {
                this.render.setStyle(elt, 'height', this.height + 'px');
            }
        }
        this.noDataMoveMessage =
            this.noDataMoveMessage === '请选择要移动的数据。' ? this.localeService.getValue('multiSelect.noDataMoveMessage') : this.noDataMoveMessage;
        if (this.tt && this.selectedId) {
            this.tt.checkedNodes(this.selectedId);
        }
    };
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.templates.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            switch (item.getType()) {
                case 'text':
                    _this_1.displayTemplate = item.template;
                    break;
            }
        }));
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    MultiSelectComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.dataSource && !changes.dataSource.isFirstChange()) {
            this._leftCheckeds = {};
            this._rightData = [];
        }
        if (changes.selectedId && !changes.selectedId.isFirstChange()) {
            /** @type {?} */
            var cv = changes.selectedId.currentValue || [];
            /** @type {?} */
            var pv = changes.selectedId.previousValue || [];
            // 当设置选中的ID 为空时，执行清空右侧数据
            if (!cv.length) {
                this.clearSelections();
                // TFS 611928
                this.canCheckLength = this.getCanCheckLength();
                return;
            }
            if (cv.length != pv.length || JSON.stringify(cv) !== JSON.stringify(pv)) {
                this.initRightData(changes.selectedId.currentValue);
            }
        }
    };
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.getCanCheckLength = /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        /** @type {?} */
        var n = 0;
        /** @type {?} */
        var total = 0;
        if (this.isTree()) {
            this.tt.serializedValue.forEach((/**
             * @param {?} rn
             * @return {?}
             */
            function (rn) {
                if (rn.node.selectable) {
                    if (_this_1.canChecked(rn.node)) {
                        n++;
                    }
                }
            }));
            total = this.tt.serializedValue.length;
        }
        else {
            this.dataSource.forEach((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (_this_1.canChecked(d)) {
                    n++;
                }
            }));
            total = this.dataSource.length;
        }
        this.leftCount = total;
        return n;
    };
    /**
     * 获取搜索的数据，List结构
     * @param value 搜索的字符
     * @param data 数据
     */
    /**
     * 获取搜索的数据，List结构
     * @private
     * @param {?} value 搜索的字符
     * @param {?} data 数据
     * @return {?}
     */
    MultiSelectComponent.prototype.getListDataBySearch = /**
     * 获取搜索的数据，List结构
     * @private
     * @param {?} value 搜索的字符
     * @param {?} data 数据
     * @return {?}
     */
    function (value, data) {
        var _this_1 = this;
        /** @type {?} */
        var result = [];
        value = '' + value;
        if (data instanceof Array) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var txt = '';
                /** @type {?} */
                var val = '';
                if (_this_1.textField) {
                    txt = '' + _this_1.getText(item);
                }
                if (_this_1.valueField) {
                    val = '' + _this_1.getValue(item);
                }
                /** @type {?} */
                var textCompare = (/**
                 * @return {?}
                 */
                function () {
                    return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;
                });
                /** @type {?} */
                var valueCompare = (/**
                 * @return {?}
                 */
                function () {
                    return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;
                });
                if (_this_1.searchValueField) {
                    if (_this_1.textField && _this_1.valueField) {
                        if (textCompare() || valueCompare()) {
                            result.push(item);
                        }
                    }
                    else if (_this_1.textField && !_this_1.valueField) {
                        if (textCompare()) {
                            result.push(item);
                        }
                    }
                    else if (!_this_1.textField && _this_1.valueField) {
                        if (valueCompare()) {
                            result.push(item);
                        }
                    }
                }
                else {
                    if (textCompare()) {
                        result.push(item);
                    }
                }
            }));
        }
        return result;
    };
    /**
     * 获取包含value值得节点
     */
    // private getTreeDataByRecursive(value: string, data: any[], newData: any[]) {
    //     value = '' + value;
    //     data.forEach(item => {
    //         let txt = '';
    //         let val = '';
    //         if (this.textField) {
    //             txt = '' + this.getText(item.data);
    //         }
    //         if (this.valueField) {
    //             val = '' + this.getValue(item.data);
    //         }
    //         const textCompare = () => {
    //             return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         const valueCompare = () => {
    //             return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         if (this.textField && this.valueField) {
    //             if (textCompare() || valueCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (this.textField && !this.valueField) {
    //             if (textCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (!this.textField && this.valueField) {
    //             if (valueCompare()) {
    //                 newData.push(item);
    //             }
    //         }
    //         if (item.children && item.children.length) {
    //             this.getTreeDataByRecursive(value, item.children, newData);
    //         }
    //     });
    // }
    /**
     * 获取根节点
     */
    // private getTreeRootNode(data: any[], rootData: any[]) {
    //     data.forEach(item => {
    //         if (item.parent === null) {
    //             rootData.push(item);
    //         } else {
    //             this.getTreeRootNode(new Array(item.parent), rootData);
    //         }
    //     });
    // }
    /**
     * 获取搜索的数据，Tree结构
     * @param value 搜索的字符
     * @param data 数据
     */
    // private getTreeDataBySearch(value: string, data: any[]): any[] {
    //     const rootNodes = [];
    //     const nodes = [];
    //     const finalRes = [];
    //     const uniqueId = [];
    //     // 获取包含value值得节点
    //     this.getTreeDataByRecursive(value, data, nodes);
    //     // 获取根节点
    //     this.getTreeRootNode(nodes, rootNodes);
    //     // 去重
    //     rootNodes.forEach(node => {
    //         if (!uniqueId.some(item => item == node.id)) {
    //             finalRes.push(node);
    //             uniqueId.push(node.id);
    //         }
    //     });
    //     return finalRes;
    // }
    /**
         * 获取包含value值得节点
         */
    // private getTreeDataByRecursive(value: string, data: any[], newData: any[]) {
    //     value = '' + value;
    //     data.forEach(item => {
    //         let txt = '';
    //         let val = '';
    //         if (this.textField) {
    //             txt = '' + this.getText(item.data);
    //         }
    //         if (this.valueField) {
    //             val = '' + this.getValue(item.data);
    //         }
    //         const textCompare = () => {
    //             return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         const valueCompare = () => {
    //             return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         if (this.textField && this.valueField) {
    //             if (textCompare() || valueCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (this.textField && !this.valueField) {
    //             if (textCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (!this.textField && this.valueField) {
    //             if (valueCompare()) {
    //                 newData.push(item);
    //             }
    //         }
    //         if (item.children && item.children.length) {
    //             this.getTreeDataByRecursive(value, item.children, newData);
    //         }
    //     });
    // }
    /**
         * 获取根节点
         */
    // private getTreeRootNode(data: any[], rootData: any[]) {
    //     data.forEach(item => {
    //         if (item.parent === null) {
    //             rootData.push(item);
    //         } else {
    //             this.getTreeRootNode(new Array(item.parent), rootData);
    //         }
    //     });
    // }
    /**
     * 获取搜索的数据，Tree结构
     * @private
     * @param {?} ids
     * @param {?=} clearRight
     * @return {?}
     */
    // private getTreeDataBySearch(value: string, data: any[]): any[] {
    //     const rootNodes = [];
    //     const nodes = [];
    //     const finalRes = [];
    //     const uniqueId = [];
    //     // 获取包含value值得节点
    //     this.getTreeDataByRecursive(value, data, nodes);
    //     // 获取根节点
    //     this.getTreeRootNode(nodes, rootNodes);
    //     // 去重
    //     rootNodes.forEach(node => {
    //         if (!uniqueId.some(item => item == node.id)) {
    //             finalRes.push(node);
    //             uniqueId.push(node.id);
    //         }
    //     });
    //     return finalRes;
    // }
    MultiSelectComponent.prototype.initRightData = /**
         * 获取包含value值得节点
         */
    // private getTreeDataByRecursive(value: string, data: any[], newData: any[]) {
    //     value = '' + value;
    //     data.forEach(item => {
    //         let txt = '';
    //         let val = '';
    //         if (this.textField) {
    //             txt = '' + this.getText(item.data);
    //         }
    //         if (this.valueField) {
    //             val = '' + this.getValue(item.data);
    //         }
    //         const textCompare = () => {
    //             return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         const valueCompare = () => {
    //             return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;
    //         }
    //         if (this.textField && this.valueField) {
    //             if (textCompare() || valueCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (this.textField && !this.valueField) {
    //             if (textCompare()) {
    //                 newData.push(item);
    //             }
    //         } else if (!this.textField && this.valueField) {
    //             if (valueCompare()) {
    //                 newData.push(item);
    //             }
    //         }
    //         if (item.children && item.children.length) {
    //             this.getTreeDataByRecursive(value, item.children, newData);
    //         }
    //     });
    // }
    /**
         * 获取根节点
         */
    // private getTreeRootNode(data: any[], rootData: any[]) {
    //     data.forEach(item => {
    //         if (item.parent === null) {
    //             rootData.push(item);
    //         } else {
    //             this.getTreeRootNode(new Array(item.parent), rootData);
    //         }
    //     });
    // }
    /**
     * 获取搜索的数据，Tree结构
     * @private
     * @param {?} ids
     * @param {?=} clearRight
     * @return {?}
     */
    // private getTreeDataBySearch(value: string, data: any[]): any[] {
    //     const rootNodes = [];
    //     const nodes = [];
    //     const finalRes = [];
    //     const uniqueId = [];
    //     // 获取包含value值得节点
    //     this.getTreeDataByRecursive(value, data, nodes);
    //     // 获取根节点
    //     this.getTreeRootNode(nodes, rootNodes);
    //     // 去重
    //     rootNodes.forEach(node => {
    //         if (!uniqueId.some(item => item == node.id)) {
    //             finalRes.push(node);
    //             uniqueId.push(node.id);
    //         }
    //     });
    //     return finalRes;
    // }
    function (ids, clearRight) {
        var _this_1 = this;
        if (clearRight === void 0) { clearRight = true; }
        /** @type {?} */
        var dataSource = [];
        if (!ids || !ids.length) {
            ids = this.selections.map((/**
             * @param {?} i
             * @return {?}
             */
            function (i) {
                return i[_this_1.idField];
            }));
        }
        if (ids && ids.length) {
            if (this.isTree()) {
                this.convertTreeDataToPlainData(this.copyDataSource, dataSource);
                this._rightData = this.getTreeSelectionsById(ids, dataSource);
            }
            else {
                this._rightData = this.getListSelectionsById(ids, this.copyDataSource);
            }
        }
        else {
            if (clearRight) {
                this.moveAllToLeft();
            }
        }
        this.checkLeftData(ids);
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    MultiSelectComponent.prototype.checkLeftData = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this_1 = this;
        if (ids && ids.length) {
            /** @type {?} */
            var checkeds = tslib_1.__assign({}, this._leftCheckeds);
            this._leftCheckeds = ids.reduce((/**
             * @param {?} r
             * @param {?} id
             * @return {?}
             */
            function (r, id) {
                r[id] = _this_1._rightData.find((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n[_this_1.idField] == id; }));
                return r;
            }), {});
            for (var k in this._leftCheckeds) {
                if (!this._leftCheckeds[k]) {
                    delete this._leftCheckeds[k];
                }
            }
            this._leftCheckeds = Object.assign({}, checkeds, this._leftCheckeds);
        }
        this.updateAllTreeNodes(ids);
    };
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    MultiSelectComponent.prototype.updateAllTreeNodes = /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        var _this_1 = this;
        if (this.updateTimer2) {
            clearTimeout(this.updateTimer2);
        }
        this.updateTimer2 = setTimeout((/**
         * @return {?}
         */
        function () {
            _this_1.canCheckLength = _this_1.getCanCheckLength();
            if (_this_1.tt) {
                if (ids && ids.length) {
                    _this_1.tt.checkedNodes(ids, true, false, true);
                }
                _this_1.allTreeNodes = cloneDeep(_this_1.tt.state.rowNodes.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.node; })));
            }
        }));
    };
    /**
     * @param ids 选中数据的id
     * @param dataSource 原始数据
     */
    /**
     * @private
     * @param {?} ids 选中数据的id
     * @param {?} dataSource 原始数据
     * @return {?}
     */
    MultiSelectComponent.prototype.getListSelectionsById = /**
     * @private
     * @param {?} ids 选中数据的id
     * @param {?} dataSource 原始数据
     * @return {?}
     */
    function (ids, dataSource) {
        var _this_1 = this;
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var _this = this;
        if ((typeof ids === 'string' && !!ids) || typeof ids === 'number') {
            /** @type {?} */
            var reusltObj = dataSource.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item[_this.idField] === ids;
            }));
            if (reusltObj) {
                result.push(reusltObj);
            }
        }
        else if (Array.isArray(ids)) {
            if (Array.isArray(dataSource)) {
                result = ids.map((/**
                 * @param {?} id
                 * @return {?}
                 */
                function (id) { return dataSource.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item[_this_1.idField] === id; })); })).filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n; }));
            }
            else {
                result = [];
            }
        }
        else {
            result = [];
        }
        return result;
    };
    /**
     *
     * @param ids 选中数据的id
     * @param dataSource 原始数据
     */
    /**
     *
     * @private
     * @param {?} ids 选中数据的id
     * @param {?} dataSource 原始数据
     * @return {?}
     */
    MultiSelectComponent.prototype.getTreeSelectionsById = /**
     *
     * @private
     * @param {?} ids 选中数据的id
     * @param {?} dataSource 原始数据
     * @return {?}
     */
    function (ids, dataSource) {
        var _this_1 = this;
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var _this = this;
        if ((typeof ids === 'string' && !!ids) || typeof ids === 'number') {
            /** @type {?} */
            var reusltObj = dataSource.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item.data[_this.idField] === ids;
            }));
            if (reusltObj && reusltObj.data) {
                result.push(reusltObj.data);
            }
        }
        else if (Array.isArray(ids)) {
            if (Array.isArray(dataSource)) {
                result = ids.map((/**
                 * @param {?} id
                 * @return {?}
                 */
                function (id) {
                    return dataSource.find((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) { return item.data[_this_1.idField] === id; }));
                })).filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n; })).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data; }));
            }
            else {
                result = [];
            }
        }
        else {
            result = [];
        }
        return result;
    };
    /**
     * 判断是否选中
     * @param data 要验证的数据
     * @param direction 验证的数据所在的位置 L: 左侧，R: 右侧
     */
    /**
     * 判断是否选中
     * @param {?} data 要验证的数据
     * @param {?} direction 验证的数据所在的位置 L: 左侧，R: 右侧
     * @return {?}
     */
    MultiSelectComponent.prototype.isChecked = /**
     * 判断是否选中
     * @param {?} data 要验证的数据
     * @param {?} direction 验证的数据所在的位置 L: 左侧，R: 右侧
     * @return {?}
     */
    function (data, direction) {
        /** @type {?} */
        var keyVal = data[this.idField];
        if (direction === 'L') {
            return (this._leftCheckeds && this._leftCheckeds[keyVal] !== undefined); // || !this.canChecked(data);
        }
        else {
            if (this._rightCheckeds) {
                return this._rightCheckeds[keyVal] !== undefined;
            }
            else {
                return false;
            }
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    MultiSelectComponent.prototype.canChecked = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        var _this_1 = this;
        /** @type {?} */
        var data = item;
        if (this.isTree()) {
            data = item.data;
            if (item.selectable !== undefined && !item.selectable) {
                return false;
            }
        }
        if (!this.selections || this.selections.length === 0) {
            return true;
        }
        return this.selections.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        function (c) { return c && c[_this_1.idField] === data[_this_1.idField]; })) === -1;
    };
    /**
     * @param {?} ids
     * @return {?}
     */
    MultiSelectComponent.prototype.onCheckValueChange = /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
    };
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.isTree = /**
     * @return {?}
     */
    function () {
        return this.displayType === 'Tree';
    };
    /**
     * @param {?} data
     * @return {?}
     */
    MultiSelectComponent.prototype.leftDataChecked = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this_1 = this;
        if (data && data.length) {
            data.forEach((/**
             * @param {?} node
             * @return {?}
             */
            function (node) {
                /** @type {?} */
                var d = node;
                if (_this_1.isTree()) {
                    d = node.data;
                }
                if (_this_1.canChecked(node)) {
                    if (_this_1.isChecked(d, 'L')) {
                        delete _this_1._leftCheckeds[d[_this_1.idField]];
                    }
                    else {
                        if (!_this_1._leftCheckeds) {
                            _this_1._leftCheckeds = {};
                        }
                        _this_1._leftCheckeds[d[_this_1.idField]] = d;
                    }
                }
            }));
        }
    };
    /**
     * @param {?} dir
     * @return {?}
     */
    MultiSelectComponent.prototype.hasCheckeds = /**
     * @param {?} dir
     * @return {?}
     */
    function (dir) {
        if (dir === 'L') {
            if (this.isTree()) {
                return this.tt.checkeds && this.tt.checkeds.length || (this.tt.selections && this.tt.selections.length);
            }
            if (this._leftCheckeds) {
                return Object.keys(this._leftCheckeds).length > 0;
            }
            else {
                return false;
            }
        }
        else {
            if (this._rightCheckeds) {
                return Object.keys(this._rightCheckeds).length > 0;
            }
            else {
                return false;
            }
        }
    };
    /**
     * @param {?} item
     * @param {?=} emit
     * @return {?}
     */
    MultiSelectComponent.prototype.rightDataChecked = /**
     * @param {?} item
     * @param {?=} emit
     * @return {?}
     */
    function (item, emit) {
        if (emit === void 0) { emit = true; }
        /** @type {?} */
        var isCheck = this.isChecked(item, 'R');
        if (isCheck) {
            if (this.showCheckbox) {
                delete this._rightCheckeds[item[this.idField]];
            }
            else {
                this._rightCheckeds = {};
            }
            this.rightSelectedItem = null;
            this.unSelected.emit({ data: item });
            return;
        }
        else {
            if (this.showCheckbox) {
                this._rightCheckeds = this._rightCheckeds || {};
            }
            else {
                this._rightCheckeds = {};
            }
            this.rightSelectedItem = item;
            this._rightCheckeds[item[this.idField]] = item;
        }
        this.cd.detectChanges();
        this.selected.emit({ selected: !isCheck, data: item });
    };
    /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    MultiSelectComponent.prototype.selectItem = /**
     * @param {?} id
     * @param {?=} emit
     * @return {?}
     */
    function (id, emit) {
        var _this_1 = this;
        if (emit === void 0) { emit = true; }
        if (this.selections && this.selections.length) {
            /** @type {?} */
            var item = this.selections.find((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this_1.idField] === id; }));
            if (item) {
                this.rightDataChecked(item, emit);
            }
        }
    };
    /**
     * @param {?=} emit
     * @return {?}
     */
    MultiSelectComponent.prototype.clearSelections = /**
     * @param {?=} emit
     * @return {?}
     */
    function (emit) {
        if (emit === void 0) { emit = false; }
        this._rightCheckeds = {};
        this._leftCheckeds = {};
        this._rightData = [];
        this.selectedId = [];
        if (this.isTree() && this.tt) {
            /** @type {?} */
            var _chkids_1 = this.tt.checkeds.map((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n.id; }));
            this.tt.clearAll();
            this.tt.state.rowNodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                if (_chkids_1.find((/**
                 * @param {?} i
                 * @return {?}
                 */
                function (i) { return i == n.id; }))) {
                    n.node.selectable = true;
                }
            }));
        }
        if (emit) {
            this.selectedIdChange.emit([]);
        }
    };
    /**
     * 将树结构数据转换为扁平数组
     * @param nodes 树节点数组
     * @param r 新的空数组
     */
    /**
     * 将树结构数据转换为扁平数组
     * @private
     * @param {?} nodes 树节点数组
     * @param {?=} r 新的空数组
     * @return {?}
     */
    MultiSelectComponent.prototype.convertTreeDataToPlainData = /**
     * 将树结构数据转换为扁平数组
     * @private
     * @param {?} nodes 树节点数组
     * @param {?=} r 新的空数组
     * @return {?}
     */
    function (nodes, r) {
        var _this_1 = this;
        if (r === void 0) { r = []; }
        if (nodes) {
            nodes.forEach((/**
             * @param {?} n
             * @return {?}
             */
            function (n) {
                r.push(n);
                if (n.children) {
                    _this_1.convertTreeDataToPlainData(n.children, r);
                }
            }));
        }
        return r;
    };
    //#region 左右移动
    //#region 左右移动
    /**
     * @private
     * @return {?}
     */
    MultiSelectComponent.prototype.moveItem = 
    //#region 左右移动
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        this.beforeMove.subscribe((/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) {
            /** @type {?} */
            var items = obj.items;
            /** @type {?} */
            var direction = 1;
            switch (obj.target) {
                case 'right':
                    Object.keys(items).forEach((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) {
                        if (!_this_1._rightData.find((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[_this_1.idField].toString() === id; }))) {
                            _this_1._rightData.push(items[id]);
                        }
                    }));
                    _this_1._rightData = tslib_1.__spread(_this_1._rightData);
                    if (_this_1.isTree()) {
                        _this_1.tt.clearAll();
                    }
                    direction = 1;
                    break;
                case 'rightAll':
                    items.forEach((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        if (_this_1._rightData.findIndex((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[_this_1.idField] === data[_this_1.idField]; })) === -1) {
                            _this_1._rightData.push(data);
                        }
                    }));
                    if (_this_1.isTree()) {
                        _this_1.tt.clearAll();
                    }
                    direction = 1;
                    break;
                case 'left':
                    /** @type {?} */
                    var ids_1 = Object.keys(items);
                    _this_1._rightData = _this_1._rightData.filter((/**
                     * @param {?} v
                     * @return {?}
                     */
                    function (v) {
                        return ids_1.indexOf('' + v[_this_1.idField]) === -1;
                    }));
                    _this_1._rightCheckeds = {};
                    ids_1.forEach((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) {
                        delete _this_1._leftCheckeds[id];
                    }));
                    if (_this_1.rightSelectedItem) {
                        if (ids_1.indexOf('' + _this_1.rightSelectedItem[_this_1.idField]) > -1) {
                            _this_1.rightSelectedItem = null;
                        }
                    }
                    direction = -1;
                    if (_this_1.isTree()) {
                        _this_1.tt.findRowNodes(ids_1).forEach((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            n.node.selectable = true;
                        }));
                        _this_1.tt.unCheckedNodes(ids_1, true);
                    }
                    break;
                case 'leftAll':
                    _this_1._rightCheckeds = {};
                    _this_1.rightSelectedItem = null;
                    _this_1._rightData = [];
                    direction = -1;
                    _this_1._leftCheckeds = {};
                    if (_this_1.isTree() && _this_1.tt) {
                        _this_1.tt.clearAll();
                        /** @type {?} */
                        var _ids = items.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n[_this_1.idField]; }));
                        _this_1.tt.findRowNodes(_ids).forEach((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) {
                            n.node.selectable = true;
                        }));
                    }
                    break;
            }
            _this_1.selectionsChange();
            _this_1.changeSelectIds(direction);
            _this_1.afterMove.emit(Object.values(items));
        }));
    };
    /** 右移 */
    /**
     * 右移
     * @param {?=} moveData
     * @return {?}
     */
    MultiSelectComponent.prototype.moveToRight = /**
     * 右移
     * @param {?=} moveData
     * @return {?}
     */
    function (moveData) {
        var _this_1 = this;
        var _a;
        if (moveData) {
            this.beforeMove.emit({ items: (_a = {}, _a[moveData[this.idField]] = moveData, _a), target: 'right' });
        }
        else {
            if (this.hasCheckeds('L')) {
                if (this.isTree()) {
                    this._leftCheckeds = {};
                    if (!this.tt.checkeds.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) { return _this_1._rightData.findIndex((/**
                     * @param {?} r
                     * @return {?}
                     */
                    function (r) { return r.id === n.id; })) === -1; })).length) {
                        this.mesagerSer.warning(this.noDataMoveMessage);
                        return;
                    }
                    this.tt.checkeds.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        _this_1._leftCheckeds[n.data[_this_1.idField]] = n.data;
                    }));
                    this.tt.selections.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        _this_1._leftCheckeds[n.id] = n.data;
                    }));
                }
                else {
                    /** @type {?} */
                    var newCheckeds = Object.keys(this._leftCheckeds).filter((/**
                     * @param {?} id
                     * @return {?}
                     */
                    function (id) {
                        return _this_1._rightData.findIndex((/**
                         * @param {?} n
                         * @return {?}
                         */
                        function (n) { return n.id === id; })) === -1;
                    }));
                    if (!newCheckeds.length) {
                        this.mesagerSer.warning(this.noDataMoveMessage);
                        return;
                    }
                }
                this.beforeMove.emit({ items: this._leftCheckeds, target: 'right' });
            }
            else {
                this.mesagerSer.warning(this.noDataMoveMessage);
            }
        }
    };
    /** 全部右移 */
    /**
     * 全部右移
     * @return {?}
     */
    MultiSelectComponent.prototype.moveAllToRight = /**
     * 全部右移
     * @return {?}
     */
    function () {
        if (this.searchValue === '') {
            this._rightData = [];
        }
        if (this.displayType === 'List') {
            /** @type {?} */
            var items = this.dataSource;
            // if (this.searchValue && this._leftCheckeds) {
            //     const checkids = Object.keys(this._leftCheckeds);
            //     if (checkids.length) {
            //         checkids.forEach(id => {
            //             if (!items.find(n => n[this.idField] === id)) {
            //                 items.push(this._leftCheckeds[id]);
            //             }
            //         });
            //     }
            // }
            this.beforeMove.emit({ items: items, target: 'rightAll' });
        }
        else {
            if (!this.searchValue) {
                /** @type {?} */
                var _dataSource = [];
                this.convertTreeDataToPlainData(this.dataSource, _dataSource);
                _dataSource = _dataSource.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.selectable && (n.visible || n.visible === undefined); })).map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.data; }));
                this.beforeMove.emit({ items: _dataSource, target: 'rightAll' });
            }
            else {
                /** @type {?} */
                var _dataSource = this.tt.serializedValue.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n.node.data; }));
                this.beforeMove.emit({ items: _dataSource, target: 'rightAll' });
            }
        }
    };
    /** 左移 */
    /**
     * 左移
     * @param {?=} moveData
     * @return {?}
     */
    MultiSelectComponent.prototype.moveToLeft = /**
     * 左移
     * @param {?=} moveData
     * @return {?}
     */
    function (moveData) {
        var _a;
        if (moveData) {
            this.beforeMove.emit({ items: (_a = {}, _a[moveData[this.idField]] = moveData, _a), target: 'left' });
        }
        else {
            if (this.hasCheckeds('R')) {
                this.beforeMove.emit({ items: this._rightCheckeds, target: 'left' });
            }
            else {
                this.mesagerSer.warning(this.noDataMoveMessage);
            }
        }
    };
    /** 全部左移 */
    /**
     * 全部左移
     * @return {?}
     */
    MultiSelectComponent.prototype.moveAllToLeft = /**
     * 全部左移
     * @return {?}
     */
    function () {
        this.beforeMove.emit({ items: this._rightData, target: 'leftAll' });
    };
    //#endregion
    //#region 上下移动显示列顺序
    //#endregion
    //#region 上下移动显示列顺序
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype._getSelectInfo = 
    //#endregion
    //#region 上下移动显示列顺序
    /**
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this.rightSelectedItem) {
            // const key = Object.keys(this._rightCheckeds)[0];
            /** @type {?} */
            var key_1 = this.rightSelectedItem[this.idField];
            /** @type {?} */
            var index = this._rightData.findIndex((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return '' + c[_this_1.idField] == key_1; }));
            return {
                key: key_1, index: index
            };
        }
        return null;
    };
    /** 置顶 */
    /**
     * 置顶
     * @return {?}
     */
    MultiSelectComponent.prototype.moveTop = /**
     * 置顶
     * @return {?}
     */
    function () {
        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {
            this.moveMore('top');
            return;
        }
        /** @type {?} */
        var obj = this._getSelectInfo();
        if (obj) {
            this._rightData.unshift(this._rightData[obj.index]);
            this._rightData.splice(obj.index + 1, 1);
            this.selectionsChange();
            this.changeSelectIds(0);
        }
        else {
            this.mesagerSer.warning(this.noDataMoveMessage);
        }
    };
    /** 上移 */
    /**
     * 上移
     * @return {?}
     */
    MultiSelectComponent.prototype.moveUp = /**
     * 上移
     * @return {?}
     */
    function () {
        var _a;
        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {
            this.moveMore2('up');
            return;
        }
        /** @type {?} */
        var obj = this._getSelectInfo();
        if (obj) {
            /** @type {?} */
            var index = obj.index;
            if (index !== 0) {
                /** @type {?} */
                var tempArr = this._rightData.splice(index, 1);
                (_a = this._rightData).splice.apply(_a, tslib_1.__spread([index - 1, 0], tempArr));
            }
            this.selectionsChange();
            this.changeSelectIds(0);
        }
        else {
            this.mesagerSer.warning(this.noDataMoveMessage);
        }
    };
    /** 下移 */
    /**
     * 下移
     * @return {?}
     */
    MultiSelectComponent.prototype.moveDown = /**
     * 下移
     * @return {?}
     */
    function () {
        var _a;
        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {
            this.moveMore2('down');
            return;
        }
        /** @type {?} */
        var obj = this._getSelectInfo();
        if (obj) {
            /** @type {?} */
            var len = this._rightData.length;
            /** @type {?} */
            var index = obj.index;
            if (index === 0 || index !== len - 1) {
                /** @type {?} */
                var tempArr = this._rightData.splice(index, 1);
                (_a = this._rightData).splice.apply(_a, tslib_1.__spread([index + 1, 0], tempArr));
            }
            this.selectionsChange();
            this.changeSelectIds(0);
        }
        else {
            this.mesagerSer.warning(this.noDataMoveMessage);
        }
    };
    /** 置底 */
    /**
     * 置底
     * @return {?}
     */
    MultiSelectComponent.prototype.moveBottom = /**
     * 置底
     * @return {?}
     */
    function () {
        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {
            this.moveMore('bottom');
            return;
        }
        /** @type {?} */
        var obj = this._getSelectInfo();
        if (obj) {
            this._rightData.push(this._rightData[obj.index]);
            this._rightData.splice(obj.index, 1);
            this.selectionsChange();
            this.changeSelectIds(0);
        }
        else {
            this.mesagerSer.warning(this.noDataMoveMessage);
        }
    };
    /**
     * 触发选择中id
     * @param number 1代表左侧数据右移，-1,代表数据左移，0代表上移下移
     */
    /**
     * 触发选择中id
     * @private
     * @param {?} number 1代表左侧数据右移，-1,代表数据左移，0代表上移下移
     * @return {?}
     */
    MultiSelectComponent.prototype.changeSelectIds = /**
     * 触发选择中id
     * @private
     * @param {?} number 1代表左侧数据右移，-1,代表数据左移，0代表上移下移
     * @return {?}
     */
    function (number) {
        var _this_1 = this;
        /** @type {?} */
        var ids = this._rightData.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            return item[_this_1.idField];
        }));
        if (number === 0) {
            if (typeof this.selectedId === 'string') {
                this.selectedId = ids.join(',');
            }
            else if (Array.isArray(this.selectedId)) {
                this.selectedId = ids;
            }
            this.selectedIdChange.emit(this.selectedId);
            /** @type {?} */
            var rightActiveDom = this.el.nativeElement.querySelector('.f-multi-select-list-group--right li.active');
            if (rightActiveDom) {
                if (rightActiveDom.scrollIntoViewIfNeeded) {
                    rightActiveDom.scrollIntoViewIfNeeded();
                }
                else {
                    rightActiveDom.scrollIntoView();
                }
            }
            return;
        }
        if (!this.selectedId) {
            this.selectedId = [];
        }
        if (number === 1 || number === -1) {
            if (!ids.length) {
                this.selectedId = [];
            }
            else {
                this.selectedId = ids;
            }
            if (this.isTree()) {
                if (ids && ids.length) {
                    this.tt.checkedNodes(ids, true, false, true);
                }
            }
        }
        this.canCheckLength = this.getCanCheckLength();
        this.selectedIdChange.emit(this.selectedId);
    };
    //#endregion
    //#endregion
    /**
     * @private
     * @return {?}
     */
    MultiSelectComponent.prototype.selectionsChange = 
    //#endregion
    /**
     * @private
     * @return {?}
     */
    function () {
        this.dataChange.emit(this._rightData);
        this.cd.detectChanges();
    };
    /**
     * @param {?} item
     * @param {?=} textField
     * @return {?}
     */
    MultiSelectComponent.prototype.getText = /**
     * @param {?} item
     * @param {?=} textField
     * @return {?}
     */
    function (item, textField) {
        if (textField === void 0) { textField = this.textField; }
        if (item) {
            if (this.commonUtils && this.commonUtils.getValue && textField) {
                return this.commonUtils.getValue(textField, item);
            }
            else {
                return item[textField];
            }
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} item
     * @param {?=} valueField
     * @return {?}
     */
    MultiSelectComponent.prototype.getValue = /**
     * @param {?} item
     * @param {?=} valueField
     * @return {?}
     */
    function (item, valueField) {
        if (valueField === void 0) { valueField = this.valueField; }
        if (item) {
            if (this.commonUtils && this.commonUtils.getValue && valueField) {
                return this.commonUtils.getValue(valueField, item);
            }
            else {
                return item[valueField];
            }
        }
        else {
            return '';
        }
    };
    //#region  右侧同时移动多条记录
    /** 从右侧数据源中获取选中的记录 */
    //#region  右侧同时移动多条记录
    /**
     * 从右侧数据源中获取选中的记录
     * @private
     * @return {?}
     */
    MultiSelectComponent.prototype.getCheckedItemsFromDataSource = 
    //#region  右侧同时移动多条记录
    /**
     * 从右侧数据源中获取选中的记录
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        if (this._rightData && this._rightData.length) {
            return this._rightData.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return _this_1._rightCheckeds[n[_this_1.idField]]; }));
        }
        return [];
    };
    /**
     * @private
     * @return {?}
     */
    MultiSelectComponent.prototype.getCheckedFirstIndexAndLastIndex = /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        /** @type {?} */
        var _chkItems = this.getCheckedItemsFromDataSource();
        if (_chkItems && _chkItems.length) {
            /** @type {?} */
            var first_1 = _chkItems[0];
            /** @type {?} */
            var last_1 = _chkItems[_chkItems.length - 1];
            /** @type {?} */
            var firstIndex = this._rightData.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this_1.idField] == first_1[_this_1.idField]; }));
            /** @type {?} */
            var lastIndex = this._rightData.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this_1.idField] == first_1[last_1.idField]; }));
            return { first: firstIndex, last: lastIndex };
        }
        return { first: -1, last: -1 };
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    MultiSelectComponent.prototype.moveMore = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this_1 = this;
        if (this._rightCheckeds && Object.keys(this._rightCheckeds).length) {
            /** @type {?} */
            var _chkItems_1 = this.getCheckedItemsFromDataSource();
            /** @type {?} */
            var items = this._rightData.filter((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return !_chkItems_1.find((/**
             * @param {?} r
             * @return {?}
             */
            function (r) { return r[_this_1.idField] == n[_this_1.idField]; })); }));
            if (type === 'top') {
                items.splice.apply(items, tslib_1.__spread([0, 0], _chkItems_1));
            }
            else if (type === 'bottom') {
                items.push.apply(items, tslib_1.__spread(_chkItems_1));
            }
            this._rightData = tslib_1.__spread(items);
            this.updateActiveIndex();
            this.selectionsChange();
            this.changeSelectIds(0);
        }
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    MultiSelectComponent.prototype.moveMore2 = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this_1 = this;
        var _a = this.getCheckedFirstIndexAndLastIndex(), first = _a.first, last = _a.last;
        /** @type {?} */
        var _chkItems = this.getCheckedItemsFromDataSource();
        // 获取排除已选中的记录
        /** @type {?} */
        var items = this._rightData.filter((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return !_chkItems.find((/**
         * @param {?} r
         * @return {?}
         */
        function (r) { return r[_this_1.idField] == n[_this_1.idField]; })); }));
        if (type === 'up') {
            /** @type {?} */
            var tarIndex = first - 1;
            if (tarIndex < 0) {
                this.moveMore('top');
                return;
            }
            else {
                items.splice.apply(items, tslib_1.__spread([tarIndex, 0], _chkItems));
            }
        }
        else if (type === 'down') {
            /** @type {?} */
            var downIdx = first + 1;
            if (downIdx >= this._rightData.length) {
                this.moveMore('bottom');
                return;
            }
            else {
                items.splice.apply(items, tslib_1.__spread([downIdx, 0], _chkItems));
            }
        }
        this._rightData = tslib_1.__spread(items);
        this.updateActiveIndex();
        this.selectionsChange();
        this.changeSelectIds(0);
    };
    /**
     * @private
     * @return {?}
     */
    MultiSelectComponent.prototype.updateActiveIndex = /**
     * @private
     * @return {?}
     */
    function () {
        var _this_1 = this;
        /** @type {?} */
        var idx = -1;
        if (this.rightSelectedItem) {
            idx = this._rightData.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            function (n) { return n[_this_1.idField] === _this_1.rightSelectedItem[_this_1.idField]; }));
        }
        this.rightActiveIndex = idx;
    };
    /**
     * @param {?} $event
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    MultiSelectComponent.prototype.rightDataClicked = /**
     * @param {?} $event
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    function ($event, item, index) {
        var _this_1 = this;
        /** @type {?} */
        var isCtrlKey = $event.ctrlKey;
        /** @type {?} */
        var isShiftKey = $event.shiftKey;
        this.rightSelectedItem = item;
        /** @type {?} */
        var target = $event.target;
        /** @type {?} */
        var ul = target.closest('ul');
        if (isShiftKey) {
            if (ul) {
                ul.style.userSelect = 'none';
            }
        }
        if (!isCtrlKey && !isShiftKey) {
            this.rightActiveIndex = index;
            /** @type {?} */
            var isCheckboxClicked = target.className.indexOf('custom-checkbox') > -1 || target.closest('.custom-checkbox');
            if (isCheckboxClicked) {
                if (this._rightCheckeds && this._rightCheckeds[item[this.idField]]) {
                    this.rightSelectedItem = null;
                    delete this._rightCheckeds[item[this.idField]];
                }
                else {
                    this._rightCheckeds = this._rightCheckeds || {};
                    this._rightCheckeds[item[this.idField]] = item;
                }
            }
            else {
                this.clearRightCheckeds();
                this._rightCheckeds = this._rightCheckeds || {};
                this._rightCheckeds[item[this.idField]] = item;
            }
        }
        else {
            /** @type {?} */
            var setCheckItems = (/**
             * @param {?=} isAdd
             * @return {?}
             */
            function (isAdd) {
                if (isAdd === void 0) { isAdd = true; }
                /** @type {?} */
                var focusIndex = _this_1.rightActiveIndex;
                if (focusIndex === -1) {
                    focusIndex = 0;
                }
                /** @type {?} */
                var endIndex = index;
                /** @type {?} */
                var start = focusIndex;
                /** @type {?} */
                var end = endIndex;
                if (focusIndex > endIndex) {
                    start = endIndex;
                    end = focusIndex;
                }
                /** @type {?} */
                var selectItems = tslib_1.__spread(_this_1._rightData).splice(start, end - start + 1);
                if (!isAdd) {
                    _this_1._rightCheckeds = [];
                }
                selectItems.forEach((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) {
                    _this_1._rightCheckeds[n[_this_1.idField]] = n;
                }));
            });
            if (isCtrlKey) {
                if (this._rightCheckeds[item[this.idField]]) {
                    delete this._rightCheckeds[item[this.idField]];
                    this.rightSelectedItem = null;
                }
                else {
                    this._rightCheckeds[item[this.idField]] = item;
                }
                if (isShiftKey) {
                    setCheckItems();
                }
                this.rightActiveIndex = index;
            }
            else if (isShiftKey) {
                setCheckItems(isCtrlKey);
            }
        }
        if (ul) {
            ul.style.userSelect = 'none';
        }
    };
    /**
     * @param {?} $event
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    MultiSelectComponent.prototype.onRightItemClick = /**
     * @param {?} $event
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    function ($event, item, index) {
        if (this.enableMoveMore) {
            this.rightDataClicked($event, item, index);
        }
        else {
            this.rightDataChecked(item);
        }
    };
    //#endregion
    //#endregion
    /**
     * @return {?}
     */
    MultiSelectComponent.prototype.clearRightCheckeds = 
    //#endregion
    /**
     * @return {?}
     */
    function () {
        this._rightCheckeds = {};
        this.cd.detectChanges();
    };
    MultiSelectComponent.decorators = [
        { type: Component, args: [{
                    selector: 'multi-select',
                    template: "<div class=\"f-utils-fill f-multi-select-list d-flex flex-column\">\r\n    <div class=\"f-utils-flex-column f-multi-select-list-content f-utils-fill\">\r\n        <legend class=\"f-multi-select-list-title\">\r\n            {{leftTitle === '\u672A\u9009\u62E9' ? ('multiSelect.leftTitle'|locale) : leftTitle}} ( {{ canCheckLength }} / {{ leftCount }} )\r\n            <span *ngIf=\"displayType === 'Tree' && showCascadeControl\" style=\"display: flex; align-items: center;\">\r\n                <input type=\"checkbox\" style=\"margin-right:2px\" [(ngModel)]=\"enableCascase\" id=\"fms_chkenablecascade\"><label for=\"fms_chkenablecascade\" style=\"margin:0\">\u7EA7\u8054\u9009\u62E9</label>\r\n            </span>\r\n            <ng-content select=\".left-title\"></ng-content>\r\n        </legend>\r\n        <div class=\"input-group\" *ngIf=\"enableSearch\" style=\"margin: 5px; width: auto\">\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchValue\" placeholder=\"{{ 'multiSelect.filterPlaceholder' | locale }}\" />\r\n            <div class=\"input-group-append\" style=\"background: transparent;display: flex;align-items: center;padding: 0 5px;\">\r\n                <span class=\"f-icon f-icon-search\" *ngIf=\"!searchValue\" ></span>\r\n                <span class=\"f-icon f-icon-close\" style=\"cursor: pointer;\" *ngIf=\"searchValue\" (click)=\"searchValue = '';\"></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"container columns-box f-utils-fill\" [class.pl-2]=\"displayType !== 'List'\">\r\n            <perfect-scrollbar [config]=\"{}\">\r\n                <ng-container *ngIf=\"displayType === 'List'; else tree\">\r\n                    <ul class=\"f-multi-select-list-group multi-select-list-group-flush f-multi-select-list-group--left\" [class.f-multi-select-norecords]=\"!dataSource || !dataSource.length\">\r\n                        <ng-template [ngIf]=\"dataSource && dataSource.length\">\r\n                            <li class=\"f-multi-select-list-group-item\" (click)=\"leftDataChecked([data])\"\r\n                                *ngFor=\"let data of dataSource;trackBy: trackByItems\" [ngClass]=\"{'f-state-disabled':!canChecked(data),'active':isChecked(data, 'L')}\">\r\n                                <div class=\"custom-control custom-checkbox  custom-control-inline\">\r\n                                    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"isChecked(data, 'L')\"\r\n                                        [disabled]=\"!canChecked(data)\">\r\n                                    <label class=\"custom-control-label\" [style.white-space]=\"wordWrap ? 'break-spaces': 'nowrap'\" [style.word-wrap]=\"wordWrap? 'break-word': 'normal'\">\r\n                                        <display-text [template]=\"displayTemplate\" [data]=\"data\"></display-text>\r\n                                    </label>\r\n                                </div>\r\n                            </li>\r\n                        </ng-template>\r\n                        <ng-template [ngIf]=\"!dataSource || !dataSource.length\">\r\n                            <li class=\"f-multi-select-norecords-content\"> {{emptyData}} </li>\r\n                        </ng-template>\r\n                    </ul>\r\n                </ng-container>\r\n\r\n                <ng-template #tree>\r\n                    <farris-treetable #tt [data]=\"dataSource\" [idField]=\"idField\" [striped]=\"false\" [cascadeCheck]=\"enableCascase\" [cascadeDown]=\"enableCascase\" [cascadeUp]=\"enableCascase\"\r\n                        [singleSelect]=\"false\" [showIcon]=\"false\" [showFilterBar]=\"false\" [showCheckbox]=\"true\"\r\n                        [selectOnCheck]=\"true\" [checkOnSelect]=\"true\" [showBorder]=\"false\" (checkValuesChange)=\"onCheckValueChange($event)\">\r\n                        <ng-template farrisTemplate=\"body\" let-rowNode let-treeNode=\"node\" let-rowData=\"rowData\">\r\n                            <tr #row=\"row\" [selectRow]=\"rowNode\" [dblclick]=\"true\"\r\n                                [selectRowDisabled]=\"!canChecked(treeNode)\" [attr.id]=\"rowNode.id\">\r\n                                <td style=\"border: 0; line-height: 26px;padding: 0px\" [style.color]=\"row.selectRowDisabled? '#a6a6a6': '#333'\">\r\n                                    <farris-treeTableToggler [disabled]=\"!canChecked(treeNode)\" [rowNode]=\"rowNode\">\r\n                                    </farris-treeTableToggler>\r\n                                    <display-text [template]=\"displayTemplate\" [data]=\"rowData\"></display-text>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-template>\r\n                    </farris-treetable>\r\n                </ng-template>\r\n            </perfect-scrollbar>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"f-multi-select-list-btns\" [class.col-2]=\"!enableTargetSort\">\r\n \r\n    <button [title]=\"'multiSelect.allShiftRight' | locale\" class=\"btn btn-secondary f-btn-icon \" type=\"button\"\r\n        (click)=\"moveAllToRight()\">\r\n        <span class=\"f-icon f-icon-arrow-seek-right\"></span>\r\n    </button>\r\n    <button [title]=\"'multiSelect.shiftRight' | locale\" class=\"btn btn-secondary f-btn-icon right-all\" type=\"button\"\r\n    (click)=\"moveToRight()\">\r\n    <span class=\"f-icon f-icon-arrow-chevron-right\"></span>\r\n</button>\r\n    <button [title]=\"'multiSelect.shiftLeft' | locale\" class=\"btn btn-secondary f-btn-icon\" type=\"button\"\r\n        (click)=\"moveToLeft()\">\r\n        <span class=\"f-icon f-icon-arrow-chevron-left\"></span>\r\n    </button>\r\n    <button [title]=\"'multiSelect.allShiftLeft' | locale\" class=\"btn btn-secondary f-btn-icon\" type=\"button\"\r\n        (click)=\"moveAllToLeft()\">\r\n        <span class=\"f-icon f-icon-arrow-seek-left\"></span>\r\n    </button>\r\n</div>\r\n<div class=\"f-utils-fill f-multi-select-list d-flex flex-column\">\r\n    <div class=\"f-utils-flex-column f-multi-select-list-content f-utils-fill\">\r\n        <legend class=\"f-multi-select-list-title\">\r\n            {{rightTitle === '\u5DF2\u9009\u62E9' ? ('multiSelect.rightTitle'|locale) : rightTitle}} ({{selections && selections.length}})\r\n\r\n            <div *ngIf=\"enableReset && showCheckbox\">\r\n                <button class=\"btn btn-link\" title=\"\u53D6\u6D88\u6240\u6709\u52FE\u9009\" (click)=\"clearRightCheckeds()\">\u91CD\u7F6E</button>\r\n            </div>\r\n            <ng-content select=\".right-title\"></ng-content>\r\n        </legend>\r\n        <div class=\"container columns-box f-utils-fill\">\r\n            <perfect-scrollbar [config]=\"{}\">\r\n                <ul class=\"f-multi-select-list-group multi-select-list-group-flush f-multi-select-list-group--right\">\r\n                    <li class=\"f-multi-select-list-group-item\" *ngFor=\"let data of selections;trackBy: trackByItems; index as i\"\r\n                        (click)=\"onRightItemClick($event, data, i)\"  [ngClass]=\"{'item--show-checkbox':showCheckbox && data['showCheckbox'] !== false}\"\r\n                        [class.active]=\"!enableMoveMore ?rightSelectedItem && rightSelectedItem[this.idField] === data[idField] : (_rightCheckeds? !!_rightCheckeds[data[idField]] : false)\"\r\n                        [ngStyle]=\"wordWrap ? { overflow: 'hidden',textOverflow: 'ellipsis'} : null\">\r\n                        <ng-container *ngIf=\"showCheckbox && data['showCheckbox'] !== false\">\r\n                            <div class=\"custom-control custom-checkbox f-checkradio-single\">\r\n                               <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"isChecked(data, 'R')\">\r\n                               <label class=\"custom-control-label\"></label>\r\n                            </div>  \r\n                        </ng-container>\r\n                        <display-text [template]=\"displayTemplate\" [data]=\"data\" [side]=\"'R'\" \r\n                            [style.word-wrap]=\"wordWrap? 'break-word': 'normal'\"\r\n                            [style.white-space]=\"wordWrap ? 'break-spaces': 'nowrap'\" ></display-text>\r\n                    </li>\r\n                </ul>\r\n            </perfect-scrollbar>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"f-multi-select-list-btns\" *ngIf=\"enableTargetSort\">\r\n    <button [title]=\"'multiSelect.top' | locale\" class=\"btn btn-secondary f-btn-icon\" type=\"button\" (click)=\"moveTop()\">\r\n        <span class=\"f-icon f-icon-roofing\"></span>\r\n    </button>\r\n    <button [title]=\"'multiSelect.shiftUp' | locale\" class=\"btn btn-secondary f-btn-icon right-all\" type=\"button\"\r\n        (click)=\"moveUp()\">\r\n        <span class=\"f-icon f-icon-arrow-chevron-up\"></span>\r\n    </button>\r\n    <button [title]=\"'multiSelect.shiftDown' | locale\" class=\"btn btn-secondary f-btn-icon\" type=\"button\"\r\n        (click)=\"moveDown()\">\r\n        <span class=\"f-icon f-icon-arrow-chevron-down\"></span>\r\n    </button>\r\n    <button [title]=\"'multiSelect.bottom' | locale\" class=\"btn btn-secondary f-btn-icon\" type=\"button\"\r\n        (click)=\"moveBottom()\">\r\n        <span class=\"f-icon f-icon-bottomsetting\"></span>\r\n    </button>\r\n</div>",
                    styles: [".f-multi-select-list .search{position:relative}.f-multi-select-list .search .form-control{line-height:1.875;height:1.875;outline:0}.f-multi-select-list .f-table-norecords-content{margin:-10.0625rem 0 0 -.225rem}"]
                }] }
    ];
    /** @nocollapse */
    MultiSelectComponent.ctorParameters = function () { return [
        { type: MessagerService },
        { type: Injector },
        { type: ChangeDetectorRef }
    ]; };
    MultiSelectComponent.propDecorators = {
        dataSource: [{ type: Input }],
        displayType: [{ type: Input }],
        enableTargetSort: [{ type: Input }],
        idField: [{ type: Input }],
        textField: [{ type: Input }],
        valueField: [{ type: Input }],
        height: [{ type: Input }],
        fit: [{ type: Input }],
        noDataMoveMessage: [{ type: Input }],
        showCascadeControl: [{ type: Input }],
        leftTitle: [{ type: Input }],
        rightTitle: [{ type: Input }],
        selectedId: [{ type: Input }],
        enableSearch: [{ type: Input }],
        showCheckbox: [{ type: Input }],
        enableReset: [{ type: Input }],
        wordWrap: [{ type: Input }],
        enableMoveMore: [{ type: Input }],
        searchValueField: [{ type: Input }],
        dataChange: [{ type: Output }],
        selected: [{ type: Output }],
        unSelected: [{ type: Output }],
        selectedIdChange: [{ type: Output }],
        beforeMove: [{ type: Output }],
        afterMove: [{ type: Output }],
        sortMove: [{ type: Output }],
        templates: [{ type: ContentChildren, args: [FarrisTemplateDirective,] }],
        tt: [{ type: ViewChild, args: ['tt',] }]
    };
    return MultiSelectComponent;
}());
export { MultiSelectComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.allTreeNodes;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype._ds;
    /** @type {?} */
    MultiSelectComponent.prototype.displayType;
    /**
     * 显示右侧上移下移按钮
     * @type {?}
     */
    MultiSelectComponent.prototype.enableTargetSort;
    /** @type {?} */
    MultiSelectComponent.prototype.idField;
    /** @type {?} */
    MultiSelectComponent.prototype.textField;
    /** @type {?} */
    MultiSelectComponent.prototype.valueField;
    /** @type {?} */
    MultiSelectComponent.prototype.height;
    /** @type {?} */
    MultiSelectComponent.prototype.fit;
    /** @type {?} */
    MultiSelectComponent.prototype.noDataMoveMessage;
    /**
     * 树结构时，是否显示级联选择控制选项
     * @type {?}
     */
    MultiSelectComponent.prototype.showCascadeControl;
    /** @type {?} */
    MultiSelectComponent.prototype.leftTitle;
    /** @type {?} */
    MultiSelectComponent.prototype.rightTitle;
    /** @type {?} */
    MultiSelectComponent.prototype.selectedId;
    /** @type {?} */
    MultiSelectComponent.prototype.enableSearch;
    /**
     * 目标数据源显示checkbox 允许多选
     * @type {?}
     */
    MultiSelectComponent.prototype.showCheckbox;
    /**
     * 右侧已选启用重置，在启用复选框时，是否显示重置按钮，即取消右侧所有勾选项，默认为 false
     * @type {?}
     */
    MultiSelectComponent.prototype.enableReset;
    /**
     * 启用折行
     * @type {?}
     */
    MultiSelectComponent.prototype.wordWrap;
    /**
     * 启用多条记录一起移动；默认 false
     * @type {?}
     */
    MultiSelectComponent.prototype.enableMoveMore;
    /**
     * 查询时对value字段进行查询，默认为 true; false时仅查询文本字段
     * @type {?}
     */
    MultiSelectComponent.prototype.searchValueField;
    /** @type {?} */
    MultiSelectComponent.prototype.dataChange;
    /** @type {?} */
    MultiSelectComponent.prototype.selected;
    /** @type {?} */
    MultiSelectComponent.prototype.unSelected;
    /** @type {?} */
    MultiSelectComponent.prototype.selectedIdChange;
    /** @type {?} */
    MultiSelectComponent.prototype.beforeMove;
    /** @type {?} */
    MultiSelectComponent.prototype.afterMove;
    /** @type {?} */
    MultiSelectComponent.prototype.sortMove;
    /** @type {?} */
    MultiSelectComponent.prototype.templates;
    /** @type {?} */
    MultiSelectComponent.prototype.tt;
    /** @type {?} */
    MultiSelectComponent.prototype._rightCheckeds;
    /** @type {?} */
    MultiSelectComponent.prototype._leftCheckeds;
    /** @type {?} */
    MultiSelectComponent.prototype._rightData;
    /** @type {?} */
    MultiSelectComponent.prototype.canCheckLength;
    /** @type {?} */
    MultiSelectComponent.prototype.leftCount;
    /** @type {?} */
    MultiSelectComponent.prototype._searchValue;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.copyDataSource;
    /** @type {?} */
    MultiSelectComponent.prototype.treeDataLength;
    /** @type {?} */
    MultiSelectComponent.prototype.displayTemplate;
    /** @type {?} */
    MultiSelectComponent.prototype.emptyData;
    /** @type {?} */
    MultiSelectComponent.prototype.el;
    /** @type {?} */
    MultiSelectComponent.prototype.render;
    /** @type {?} */
    MultiSelectComponent.prototype.localeService;
    /** @type {?} */
    MultiSelectComponent.prototype.commonUtils;
    /** @type {?} */
    MultiSelectComponent.prototype.enableCascase;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.updateTimer1;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.updateTimer2;
    /** @type {?} */
    MultiSelectComponent.prototype.rightSelectedItem;
    /** @type {?} */
    MultiSelectComponent.prototype.rightActiveIndex;
    /** @type {?} */
    MultiSelectComponent.prototype.trackByItems;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.mesagerSer;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    MultiSelectComponent.prototype.cd;
}
var DisplayTextComponent = /** @class */ (function () {
    function DisplayTextComponent(ms) {
        this.ms = ms;
        this.side = 'L';
    }
    /**
     * @return {?}
     */
    DisplayTextComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // console.log(this.data);
    };
    /**
     * @param {?} item
     * @return {?}
     */
    DisplayTextComponent.prototype._getText = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return this.ms.getText(item);
    };
    DisplayTextComponent.decorators = [
        { type: Component, args: [{
                    selector: 'display-text',
                    template: "\n        <ng-container *ngIf=\"template\" >\n            <ng-container\n                *ngTemplateOutlet=\"template; context: {$implicit: data,instance: ms, side: side, selected: ms.isChecked(data, 'R') }\">\n            </ng-container>\n        </ng-container>\n        <ng-container *ngIf=\"!template\">{{_getText(data)}}</ng-container>\n    "
                }] }
    ];
    /** @nocollapse */
    DisplayTextComponent.ctorParameters = function () { return [
        { type: MultiSelectComponent }
    ]; };
    DisplayTextComponent.propDecorators = {
        template: [{ type: Input }],
        data: [{ type: Input }],
        side: [{ type: Input }]
    };
    return DisplayTextComponent;
}());
export { DisplayTextComponent };
if (false) {
    /** @type {?} */
    DisplayTextComponent.prototype.template;
    /** @type {?} */
    DisplayTextComponent.prototype.data;
    /** @type {?} */
    DisplayTextComponent.prototype.side;
    /** @type {?} */
    DisplayTextComponent.prototype.ms;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGktc2VsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbXVsdGktc2VsZWN0LyIsInNvdXJjZXMiOlsibGliL211bHRpLXNlbGVjdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sV0FBVyxDQUFDOzs7Ozs7Ozs7QUFVdEMsT0FBTyxFQUNILFNBQVMsRUFBVSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQ3pELFdBQVcsRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUNiLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUMvRSxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGtCQUFrQixFQUFZLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFdBQVcsRUFBRSx1QkFBdUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRDtJQXNLSSw4QkFBb0IsVUFBMkIsRUFBVSxRQUFrQixFQUFVLEVBQXFCO1FBQXRGLGVBQVUsR0FBVixVQUFVLENBQWlCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUFVLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBNUpsRyxpQkFBWSxHQUFHLEVBQUUsQ0FBQztRQUNsQixRQUFHLEdBQVEsRUFBRSxDQUFDO1FBc0JiLGdCQUFXLEdBQW9CLE1BQU0sQ0FBQzs7OztRQUV0QyxxQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFPeEIsV0FBTSxHQUFHLEdBQUcsQ0FBQztRQUNiLFFBQUcsR0FBRyxJQUFJLENBQUM7UUFDWCxzQkFBaUIsR0FBRyxZQUFZLENBQUM7Ozs7UUFFakMsdUJBQWtCLEdBQUcsS0FBSyxDQUFD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TCxLQUFLOztJQVdWLDJCQUFDO0NBQUEsQUF6QkQsSUF5QkM7U0FkWSxvQkFBb0I7OztJQUM3Qix3Q0FBb0M7O0lBQ3BDLG9DQUFtQjs7SUFDbkIsb0NBQW9COztJQUVSLGtDQUErQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbi8qXHJcbiogQEF1dGhvcjog55av54uC56eA5omNKGx1Y2FzIGh1YW5nKVxyXG4qIEBEYXRlOiAyMDE4LTEwLTI3IDEwOjU1OjAyXHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDE5LTEwLTE2IDE0OjE0OjE0XHJcbiogQENvbXBhbnk6IEluc3B1clxyXG4qIEBWZXJzaW9uOiB2MC4wLjFcclxuKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsXHJcbiAgICBUZW1wbGF0ZVJlZiwgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0luaXQsXHJcbiAgICBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEluamVjdG9yLCBDaGFuZ2VEZXRlY3RvclJlZiwgRWxlbWVudFJlZiwgUmVuZGVyZXIyXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBUcmVlVGFibGVDb21wb25lbnQsIFRyZWVOb2RlIH0gZnJvbSAnQGZhcnJpcy91aS10cmVldGFibGUnO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgRmFycmlzVGVtcGxhdGVEaXJlY3RpdmUgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbXVsdGktc2VsZWN0JyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9tdWx0aS1zZWxlY3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbXHJcbiAgICAgICAgJy4vbXVsdGktc2VsZWN0LmNzcydcclxuICAgIF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBNdWx0aVNlbGVjdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0IHtcclxuXHJcbiAgICBwcml2YXRlIGFsbFRyZWVOb2RlcyA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfZHM6IGFueSA9IFtdO1xyXG4gICAgZ2V0IGRhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGRhdGFTb3VyY2UodmFsOiBhbnkpIHtcclxuICAgICAgICB2YWwgPSB2YWwgIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuX2RzID0gdmFsO1xyXG4gICAgICAgIGlmICghdGhpcy5zZWFyY2hWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbFswXS50b0pTT04pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlEYXRhU291cmNlID0gdmFsLm1hcChuID0+IG4udG9KU09OKCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlEYXRhU291cmNlID0gY2xvbmVEZWVwKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0UmlnaHREYXRhKHRoaXMuc2VsZWN0ZWRJZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KCkgZGlzcGxheVR5cGU6ICdMaXN0JyB8ICdUcmVlJyA9ICdMaXN0JztcclxuICAgIC8qKiDmmL7npLrlj7PkvqfkuIrnp7vkuIvnp7vmjInpkq4gKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRhcmdldFNvcnQgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIGlkRmllbGQ6IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKSB0ZXh0RmllbGQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHZhbHVlRmllbGQ6IHN0cmluZztcclxuXHJcbiAgICBASW5wdXQoKSBoZWlnaHQgPSA0NDU7XHJcbiAgICBASW5wdXQoKSBmaXQgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgbm9EYXRhTW92ZU1lc3NhZ2UgPSAn6K+36YCJ5oup6KaB56e75Yqo55qE5pWw5o2u44CCJztcclxuICAgIC8qKiDmoJHnu5PmnoTml7bvvIzmmK/lkKbmmL7npLrnuqfogZTpgInmi6nmjqfliLbpgInpobkgKi9cclxuICAgIEBJbnB1dCgpIHNob3dDYXNjYWRlQ29udHJvbCA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGxlZnRUaXRsZSA9ICfmnKrpgInmi6knO1xyXG4gICAgQElucHV0KCkgcmlnaHRUaXRsZSA9ICflt7LpgInmi6knO1xyXG4gICAgQElucHV0KCkgc2VsZWN0ZWRJZDogYW55O1xyXG4gICAgQElucHV0KCkgZW5hYmxlU2VhcmNoID0gdHJ1ZTtcclxuICAgIC8qKiDnm67moIfmlbDmja7mupDmmL7npLpjaGVja2JveCDlhYHorrjlpJrpgIkgKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja2JveCA9IGZhbHNlO1xyXG4gICAgLyoqIOWPs+S+p+W3sumAieWQr+eUqOmHjee9ru+8jOWcqOWQr+eUqOWkjemAieahhuaXtu+8jOaYr+WQpuaYvuekuumHjee9ruaMiemSru+8jOWNs+WPlua2iOWPs+S+p+aJgOacieWLvumAiemhue+8jOm7mOiupOS4uiBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlUmVzZXQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5ZCv55So5oqY6KGMICovXHJcbiAgICBASW5wdXQoKSB3b3JkV3JhcCA9IGZhbHNlO1xyXG4gICAgLyoqIOWQr+eUqOWkmuadoeiusOW9leS4gOi1t+enu+WKqO+8m+m7mOiupCBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlTW92ZU1vcmUgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5p+l6K+i5pe25a+5dmFsdWXlrZfmrrXov5vooYzmn6Xor6LvvIzpu5jorqTkuLogdHJ1ZTsgZmFsc2Xml7bku4Xmn6Xor6LmlofmnKzlrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHNlYXJjaFZhbHVlRmllbGQgPSB0cnVlO1xyXG4gICBcclxuXHJcbiAgICBAT3V0cHV0KCkgZGF0YUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBzZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSB1blNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHNlbGVjdGVkSWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgQE91dHB1dCgpIGJlZm9yZU1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgYWZ0ZXJNb3ZlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBzb3J0TW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAQ29udGVudENoaWxkcmVuKEZhcnJpc1RlbXBsYXRlRGlyZWN0aXZlKSB0ZW1wbGF0ZXM6IFF1ZXJ5TGlzdDxGYXJyaXNUZW1wbGF0ZURpcmVjdGl2ZT47XHJcbiAgICBAVmlld0NoaWxkKCd0dCcpIHR0OiBUcmVlVGFibGVDb21wb25lbnQ7XHJcblxyXG5cclxuICAgIC8vIOWPs+S+p+mAieS4reeahOaVsOaNriB7IFtrZXlWYWxdOiBvYmosIFtrZXlWYWxdOiBvYmogLi4uIH1cclxuICAgIF9yaWdodENoZWNrZWRzOiBhbnk7XHJcbiAgICAvLyDlt6bkvqfpgInkuK3nmoTmlbDmja4geyBba2V5VmFsXTogb2JqLCBba2V5VmFsXTogb2JqIC4uLiB9XHJcbiAgICBfbGVmdENoZWNrZWRzOiBhbnkgPSB7fTtcclxuXHJcbiAgICAvLyDlj7PkvqfmlbDmja5cclxuICAgIF9yaWdodERhdGEgPSBbXTtcclxuICAgIGdldCBzZWxlY3Rpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yaWdodERhdGE7XHJcbiAgICB9XHJcbiAgICBzZXQgc2VsZWN0aW9ucyh2YWw6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX3JpZ2h0RGF0YSA9IHZhbC5maWx0ZXIobiA9PiBuICE9PSB1bmRlZmluZWQgJiYgbiAhPT0gbnVsbCk7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2VhcmNoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlYXJjaFZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHNlYXJjaFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9zZWFyY2hWYWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAvLyB0aGlzLmNvcHlEYXRhU291cmNlID0gWy4uLnRoaXMuZGF0YVNvdXJjZV07XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICBsZXQgbGVmdENoZWNraXRlbXMgPSB7Li4udGhpcy5fbGVmdENoZWNrZWRzfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSAnVHJlZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHQuc2VsZWN0aW9ucy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRDaGVja2l0ZW1zW24uaWRdID0gbi5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlID0gdGhpcy5jb3B5RGF0YVNvdXJjZTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gJ1RyZWUnKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHMgPSBPYmplY3Qua2V5cyhsZWZ0Q2hlY2tpdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHQuY2hlY2tlZE5vZGVzKGlkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0gey4uLmxlZnRDaGVja2l0ZW1zfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VHlwZSA9PT0gJ1RyZWUnKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IG5ld0RhdGFTb3VyY2UgPSB0aGlzLmdldFRyZWVEYXRhQnlTZWFyY2godGhpcy5fc2VhcmNoVmFsdWUsIHRoaXMuYWxsVHJlZU5vZGVzKTtcclxuICAgICAgICAgICAgdGhpcy50dC5zZWFyY2hIYW5kbGUuc2VhcmNoKGAke3RoaXMudGV4dEZpZWxkfSwke3RoaXMudmFsdWVGaWVsZH1gLCB0aGlzLl9zZWFyY2hWYWx1ZSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlID0gdGhpcy5nZXRMaXN0RGF0YUJ5U2VhcmNoKHRoaXMuX3NlYXJjaFZhbHVlLCB0aGlzLmNvcHlEYXRhU291cmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVRpbWVyMSkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVUaW1lcjEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyMSA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhbkNoZWNrTGVuZ3RoID0gdGhpcy5nZXRDYW5DaGVja0xlbmd0aCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbkNoZWNrTGVuZ3RoID0gMDtcclxuICAgIGxlZnRDb3VudCA9IDA7XHJcbiAgICBfc2VhcmNoVmFsdWUgPSAnJztcclxuICAgIC8vIOWkjeWItuS4gOS7veaVsOaNrua6kFxyXG4gICAgcHJpdmF0ZSBjb3B5RGF0YVNvdXJjZTogYW55O1xyXG4gICAgLy8g5qCR5b2i57uT5p6E55qE5pWw5o2ubGVuZ3RoXHJcbiAgICB0cmVlRGF0YUxlbmd0aDogbnVtYmVyO1xyXG4gICAgZGlzcGxheVRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuXHJcbiAgICBlbXB0eURhdGE7XHJcbiAgICBlbDogRWxlbWVudFJlZjtcclxuICAgIHJlbmRlcjogUmVuZGVyZXIyO1xyXG4gICAgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIGNvbW1vblV0aWxzOiBDb21tb25VdGlscztcclxuICAgIC8vIOe6p+iBlOmAieaLqeaOp+WItumAiemhuVxyXG4gICAgZW5hYmxlQ2FzY2FzZSA9IHRydWU7XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVUaW1lcjEgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVUaW1lcjIgPSBudWxsO1xyXG5cclxuICAgIHJpZ2h0U2VsZWN0ZWRJdGVtID0gbnVsbDtcclxuICAgIHJpZ2h0QWN0aXZlSW5kZXggPSAtMTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc2FnZXJTZXI6IE1lc3NhZ2VyU2VydmljZSwgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XHJcbiAgICAgICAgaWYgKCFPYmplY3QudmFsdWVzKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWwgPSB0aGlzLmluamVjdG9yLmdldDxFbGVtZW50UmVmPihFbGVtZW50UmVmKTtcclxuICAgICAgICB0aGlzLnJlbmRlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KFJlbmRlcmVyMik7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29tbW9uVXRpbHMgPSB0aGlzLmluamVjdG9yLmdldChDb21tb25VdGlscywgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5jb3B5RGF0YVNvdXJjZSA9IHRoaXMuZGF0YVNvdXJjZSA/IFsuLi50aGlzLmRhdGFTb3VyY2VdIDogW107XHJcbiAgICAgICAgdGhpcy5lbXB0eURhdGEgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ211bHRpU2VsZWN0LmVtcHR5RGF0YScpIHx8ICfmmoLml6DmlbDmja4nO1xyXG4gICAgICAgIHRoaXMuaW5pdFJpZ2h0RGF0YSh0aGlzLnNlbGVjdGVkSWQpO1xyXG4gICAgICAgIHRoaXMubW92ZUl0ZW0oKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3dDaGVja2JveCAmJiB0aGlzLmVuYWJsZU1vdmVNb3JlKXtcclxuICAgICAgICAgICAgdGhpcy5zaG93Q2hlY2tib3ggPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgY29uc3QgZWx0ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGVsdCwgJ3JvdycpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGVsdCwgJ2YtbXVsdGktc2VsZWN0Jyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZml0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKGVsdCwgJ2YtdXRpbHMtZmlsbCcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShlbHQsICdoZWlnaHQnLCAnMTAwJScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghIXRoaXMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShlbHQsICdoZWlnaHQnLCB0aGlzLmhlaWdodCArICdweCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5vRGF0YU1vdmVNZXNzYWdlID1cclxuICAgICAgICAgICAgdGhpcy5ub0RhdGFNb3ZlTWVzc2FnZSA9PT0gJ+ivt+mAieaLqeimgeenu+WKqOeahOaVsOaNruOAgicgPyB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ211bHRpU2VsZWN0Lm5vRGF0YU1vdmVNZXNzYWdlJykgOiB0aGlzLm5vRGF0YU1vdmVNZXNzYWdlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50dCAmJiB0aGlzLnNlbGVjdGVkSWQpIHtcclxuICAgICAgICAgICAgdGhpcy50dC5jaGVja2VkTm9kZXModGhpcy5zZWxlY3RlZElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoIChpdGVtLmdldFR5cGUoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGVtcGxhdGUgPSBpdGVtLnRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmRhdGFTb3VyY2UgJiYgIWNoYW5nZXMuZGF0YVNvdXJjZS5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0RGF0YSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2VsZWN0ZWRJZCAmJiAhY2hhbmdlcy5zZWxlY3RlZElkLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdiA9IGNoYW5nZXMuc2VsZWN0ZWRJZC5jdXJyZW50VmFsdWUgfHwgW107XHJcbiAgICAgICAgICAgIGNvbnN0IHB2ID0gY2hhbmdlcy5zZWxlY3RlZElkLnByZXZpb3VzVmFsdWUgfHwgW107XHJcblxyXG5cclxuICAgICAgICAgICAgLy8g5b2T6K6+572u6YCJ5Lit55qESUQg5Li656m65pe277yM5omn6KGM5riF56m65Y+z5L6n5pWw5o2uXHJcbiAgICAgICAgICAgIGlmICghY3YubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgLy8gVEZTIDYxMTkyOFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5DaGVja0xlbmd0aCA9IHRoaXMuZ2V0Q2FuQ2hlY2tMZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGN2Lmxlbmd0aCAhPSBwdi5sZW5ndGggfHwgSlNPTi5zdHJpbmdpZnkoY3YpICE9PSBKU09OLnN0cmluZ2lmeShwdikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFJpZ2h0RGF0YShjaGFuZ2VzLnNlbGVjdGVkSWQuY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYW5DaGVja0xlbmd0aCgpIHtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcclxuICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnR0LnNlcmlhbGl6ZWRWYWx1ZS5mb3JFYWNoKHJuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChybi5ub2RlLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5DaGVja2VkKHJuLm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4rKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0b3RhbCA9IHRoaXMudHQuc2VyaWFsaXplZFZhbHVlLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UuZm9yRWFjaChkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbkNoZWNrZWQoZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0b3RhbCA9IHRoaXMuZGF0YVNvdXJjZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGVmdENvdW50ID0gdG90YWw7XHJcbiAgICAgICAgcmV0dXJuIG47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bmkJzntKLnmoTmlbDmja7vvIxMaXN057uT5p6EXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUg5pCc57Si55qE5a2X56ymXHJcbiAgICAgKiBAcGFyYW0gZGF0YSDmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRMaXN0RGF0YUJ5U2VhcmNoKHZhbHVlOiBzdHJpbmcsIGRhdGE6IGFueVtdKTogYW55W10ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHZhbHVlID0gJycgKyB2YWx1ZTtcclxuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdHh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dEZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHh0ID0gJycgKyB0aGlzLmdldFRleHQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9ICcnICsgdGhpcy5nZXRWYWx1ZShpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0Q29tcGFyZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWx1ZS50b0xvd2VyQ2FzZSgpKSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVDb21wYXJlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbHVlLnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoVmFsdWVGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHRGaWVsZCAmJiB0aGlzLnZhbHVlRmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRDb21wYXJlKCkgfHwgdmFsdWVDb21wYXJlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRleHRGaWVsZCAmJiAhdGhpcy52YWx1ZUZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Q29tcGFyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudGV4dEZpZWxkICYmIHRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVDb21wYXJlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dENvbXBhcmUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5YyF5ZCrdmFsdWXlgLzlvpfoioLngrlcclxuICAgICAqL1xyXG4gICAgLy8gcHJpdmF0ZSBnZXRUcmVlRGF0YUJ5UmVjdXJzaXZlKHZhbHVlOiBzdHJpbmcsIGRhdGE6IGFueVtdLCBuZXdEYXRhOiBhbnlbXSkge1xyXG4gICAgLy8gICAgIHZhbHVlID0gJycgKyB2YWx1ZTtcclxuXHJcbiAgICAvLyAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cclxuICAgIC8vICAgICAgICAgbGV0IHR4dCA9ICcnO1xyXG4gICAgLy8gICAgICAgICBsZXQgdmFsID0gJyc7XHJcblxyXG4gICAgLy8gICAgICAgICBpZiAodGhpcy50ZXh0RmllbGQpIHtcclxuICAgIC8vICAgICAgICAgICAgIHR4dCA9ICcnICsgdGhpcy5nZXRUZXh0KGl0ZW0uZGF0YSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuXHJcbiAgICAvLyAgICAgICAgIGlmICh0aGlzLnZhbHVlRmllbGQpIHtcclxuICAgIC8vICAgICAgICAgICAgIHZhbCA9ICcnICsgdGhpcy5nZXRWYWx1ZShpdGVtLmRhdGEpO1xyXG4gICAgLy8gICAgICAgICB9XHJcblxyXG4gICAgLy8gICAgICAgICBjb25zdCB0ZXh0Q29tcGFyZSA9ICgpID0+IHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybiB0eHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbHVlLnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcclxuICAgIC8vICAgICAgICAgfVxyXG5cclxuICAgIC8vICAgICAgICAgY29uc3QgdmFsdWVDb21wYXJlID0gKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHZhbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSkgIT09IC0xO1xyXG4gICAgLy8gICAgICAgICB9XHJcblxyXG5cclxuICAgIC8vICAgICAgICAgaWYgKHRoaXMudGV4dEZpZWxkICYmIHRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHRleHRDb21wYXJlKCkgfHwgdmFsdWVDb21wYXJlKCkpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBuZXdEYXRhLnB1c2goaXRlbSk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZXh0RmllbGQgJiYgIXRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHRleHRDb21wYXJlKCkpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBuZXdEYXRhLnB1c2goaXRlbSk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMudGV4dEZpZWxkICYmIHRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHZhbHVlQ29tcGFyZSgpKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgbmV3RGF0YS5wdXNoKGl0ZW0pO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmdldFRyZWVEYXRhQnlSZWN1cnNpdmUodmFsdWUsIGl0ZW0uY2hpbGRyZW4sIG5ld0RhdGEpO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluagueiKgueCuVxyXG4gICAgICovXHJcbiAgICAvLyBwcml2YXRlIGdldFRyZWVSb290Tm9kZShkYXRhOiBhbnlbXSwgcm9vdERhdGE6IGFueVtdKSB7XHJcbiAgICAvLyAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgLy8gICAgICAgICBpZiAoaXRlbS5wYXJlbnQgPT09IG51bGwpIHtcclxuICAgIC8vICAgICAgICAgICAgIHJvb3REYXRhLnB1c2goaXRlbSk7XHJcbiAgICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmdldFRyZWVSb290Tm9kZShuZXcgQXJyYXkoaXRlbS5wYXJlbnQpLCByb290RGF0YSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaQnOe0oueahOaVsOaNru+8jFRyZWXnu5PmnoRcclxuICAgICAqIEBwYXJhbSB2YWx1ZSDmkJzntKLnmoTlrZfnrKZcclxuICAgICAqIEBwYXJhbSBkYXRhIOaVsOaNrlxyXG4gICAgICovXHJcbiAgICAvLyBwcml2YXRlIGdldFRyZWVEYXRhQnlTZWFyY2godmFsdWU6IHN0cmluZywgZGF0YTogYW55W10pOiBhbnlbXSB7XHJcbiAgICAvLyAgICAgY29uc3Qgcm9vdE5vZGVzID0gW107XHJcbiAgICAvLyAgICAgY29uc3Qgbm9kZXMgPSBbXTtcclxuICAgIC8vICAgICBjb25zdCBmaW5hbFJlcyA9IFtdO1xyXG4gICAgLy8gICAgIGNvbnN0IHVuaXF1ZUlkID0gW107XHJcbiAgICAvLyAgICAgLy8g6I635Y+W5YyF5ZCrdmFsdWXlgLzlvpfoioLngrlcclxuICAgIC8vICAgICB0aGlzLmdldFRyZWVEYXRhQnlSZWN1cnNpdmUodmFsdWUsIGRhdGEsIG5vZGVzKTtcclxuICAgIC8vICAgICAvLyDojrflj5bmoLnoioLngrlcclxuICAgIC8vICAgICB0aGlzLmdldFRyZWVSb290Tm9kZShub2Rlcywgcm9vdE5vZGVzKTtcclxuICAgIC8vICAgICAvLyDljrvph41cclxuICAgIC8vICAgICByb290Tm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgIC8vICAgICAgICAgaWYgKCF1bmlxdWVJZC5zb21lKGl0ZW0gPT4gaXRlbSA9PSBub2RlLmlkKSkge1xyXG4gICAgLy8gICAgICAgICAgICAgZmluYWxSZXMucHVzaChub2RlKTtcclxuICAgIC8vICAgICAgICAgICAgIHVuaXF1ZUlkLnB1c2gobm9kZS5pZCk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vICAgICByZXR1cm4gZmluYWxSZXM7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0UmlnaHREYXRhKGlkcywgY2xlYXJSaWdodCA9IHRydWUpIHtcclxuICAgICAgICBsZXQgZGF0YVNvdXJjZTogYW55ID0gW107XHJcblxyXG4gICAgICAgIGlmICghaWRzIHx8ICFpZHMubGVuZ3RoICkge1xyXG4gICAgICAgICAgICBpZHMgPSB0aGlzLnNlbGVjdGlvbnMubWFwKGkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlbdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcblxyXG4gICAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VHJlZURhdGFUb1BsYWluRGF0YSh0aGlzLmNvcHlEYXRhU291cmNlLCBkYXRhU291cmNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0RGF0YSA9IHRoaXMuZ2V0VHJlZVNlbGVjdGlvbnNCeUlkKGlkcywgZGF0YVNvdXJjZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yaWdodERhdGEgPSB0aGlzLmdldExpc3RTZWxlY3Rpb25zQnlJZChpZHMsIHRoaXMuY29weURhdGFTb3VyY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoY2xlYXJSaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlQWxsVG9MZWZ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hlY2tMZWZ0RGF0YShpZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrTGVmdERhdGEoaWRzOiBhbnkpIHtcclxuICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tlZHMgPSB7Li4udGhpcy5fbGVmdENoZWNrZWRzfTtcclxuICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0gaWRzLnJlZHVjZSgociwgaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJbaWRdID0gdGhpcy5fcmlnaHREYXRhLmZpbmQobiA9PiBuW3RoaXMuaWRGaWVsZF0gPT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy5fbGVmdENoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xlZnRDaGVja2Vkc1trXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9sZWZ0Q2hlY2tlZHNba107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2xlZnRDaGVja2VkcyA9IE9iamVjdC5hc3NpZ24oe30sIGNoZWNrZWRzLCB0aGlzLl9sZWZ0Q2hlY2tlZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBbGxUcmVlTm9kZXMoaWRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUFsbFRyZWVOb2RlcyhpZHMpIHtcclxuICAgICAgICBpZiAodGhpcy51cGRhdGVUaW1lcjIpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlVGltZXIyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZXIyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuQ2hlY2tMZW5ndGggPSB0aGlzLmdldENhbkNoZWNrTGVuZ3RoKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnR0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNoZWNrZWROb2RlcyhpZHMsIHRydWUsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsVHJlZU5vZGVzID0gY2xvbmVEZWVwKHRoaXMudHQuc3RhdGUucm93Tm9kZXMubWFwKG4gPT4gbi5ub2RlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZHMg6YCJ5Lit5pWw5o2u55qEaWRcclxuICAgICAqIEBwYXJhbSBkYXRhU291cmNlIOWOn+Wni+aVsOaNrlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldExpc3RTZWxlY3Rpb25zQnlJZChpZHM6IGFueSwgZGF0YVNvdXJjZTogYW55KSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoKHR5cGVvZiBpZHMgPT09ICdzdHJpbmcnICYmICEhaWRzKSB8fCB0eXBlb2YgaWRzID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBjb25zdCByZXVzbHRPYmogPSBkYXRhU291cmNlLmZpbmQoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVtfdGhpcy5pZEZpZWxkXSA9PT0gaWRzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJldXNsdE9iaikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmV1c2x0T2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpZHMpKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFTb3VyY2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpZHMubWFwKGlkID0+IGRhdGFTb3VyY2UuZmluZChpdGVtID0+IGl0ZW1bdGhpcy5pZEZpZWxkXSA9PT0gaWQpKS5maWx0ZXIobiA9PiBuKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkcyDpgInkuK3mlbDmja7nmoRpZFxyXG4gICAgICogQHBhcmFtIGRhdGFTb3VyY2Ug5Y6f5aeL5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VHJlZVNlbGVjdGlvbnNCeUlkKGlkczogYW55LCBkYXRhU291cmNlOiBhbnkpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICgodHlwZW9mIGlkcyA9PT0gJ3N0cmluZycgJiYgISFpZHMpIHx8IHR5cGVvZiBpZHMgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJldXNsdE9iaiA9IGRhdGFTb3VyY2UuZmluZChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmRhdGFbX3RoaXMuaWRGaWVsZF0gPT09IGlkcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXVzbHRPYmogJiYgcmV1c2x0T2JqLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJldXNsdE9iai5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpZHMpKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFTb3VyY2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpZHMubWFwKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVNvdXJjZS5maW5kKGl0ZW0gPT4gaXRlbS5kYXRhW3RoaXMuaWRGaWVsZF0gPT09IGlkKTtcclxuICAgICAgICAgICAgICAgIH0pLmZpbHRlcihuID0+IG4pLm1hcChuID0+IG4uZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mmK/lkKbpgInkuK1cclxuICAgICAqIEBwYXJhbSBkYXRhIOimgemqjOivgeeahOaVsOaNrlxyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiDpqozor4HnmoTmlbDmja7miYDlnKjnmoTkvY3nva4gTDog5bem5L6n77yMUjog5Y+z5L6nXHJcbiAgICAgKi9cclxuICAgIGlzQ2hlY2tlZChkYXRhOiBhbnksIGRpcmVjdGlvbjogJ0wnIHwgJ1InKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qga2V5VmFsID0gZGF0YVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdMJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX2xlZnRDaGVja2VkcyAmJiB0aGlzLl9sZWZ0Q2hlY2tlZHNba2V5VmFsXSAhPT0gdW5kZWZpbmVkKTsgLy8gfHwgIXRoaXMuY2FuQ2hlY2tlZChkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaHRDaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JpZ2h0Q2hlY2tlZHNba2V5VmFsXSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbkNoZWNrZWQoaXRlbTogYW55KSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBpdGVtO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICBkYXRhID0gaXRlbS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0uc2VsZWN0YWJsZSAhPT0gdW5kZWZpbmVkICYmICFpdGVtLnNlbGVjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbnMgfHwgdGhpcy5zZWxlY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9ucy5maW5kSW5kZXgoYyA9PiBjICYmIGNbdGhpcy5pZEZpZWxkXSA9PT0gZGF0YVt0aGlzLmlkRmllbGRdKSA9PT0gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGVja1ZhbHVlQ2hhbmdlKGlkczogc3RyaW5nW10pIHtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBpc1RyZWUoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5VHlwZSA9PT0gJ1RyZWUnO1xyXG4gICAgfVxyXG5cclxuICAgIGxlZnREYXRhQ2hlY2tlZChkYXRhOiBhbnlbXSkge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkID0gbm9kZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZCA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbkNoZWNrZWQobm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NoZWNrZWQoZCwgJ0wnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbGVmdENoZWNrZWRzW2RbdGhpcy5pZEZpZWxkXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9sZWZ0Q2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xlZnRDaGVja2VkcyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xlZnRDaGVja2Vkc1tkW3RoaXMuaWRGaWVsZF1dID0gZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYXNDaGVja2VkcyhkaXI6ICdMJyB8ICdSJykge1xyXG4gICAgICAgIGlmIChkaXIgPT09ICdMJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHQuY2hlY2tlZHMgJiYgdGhpcy50dC5jaGVja2Vkcy5sZW5ndGggfHwgKCB0aGlzLnR0LnNlbGVjdGlvbnMgJiYgdGhpcy50dC5zZWxlY3Rpb25zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9sZWZ0Q2hlY2tlZHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9sZWZ0Q2hlY2tlZHMpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaHRDaGVja2Vkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3JpZ2h0Q2hlY2tlZHMpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmlnaHREYXRhQ2hlY2tlZChpdGVtLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGlzQ2hlY2sgPSB0aGlzLmlzQ2hlY2tlZChpdGVtLCAnUicpO1xyXG4gICAgICAgIGlmIChpc0NoZWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dDaGVja2JveCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3JpZ2h0Q2hlY2tlZHNbaXRlbVt0aGlzLmlkRmllbGRdXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0U2VsZWN0ZWRJdGVtID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy51blNlbGVjdGVkLmVtaXQoe2RhdGE6aXRlbX0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0NoZWNrYm94KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzID0gdGhpcy5fcmlnaHRDaGVja2VkcyB8fCB7fTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0U2VsZWN0ZWRJdGVtID0gaXRlbTtcclxuICAgICAgICAgICAgdGhpcy5fcmlnaHRDaGVja2Vkc1tpdGVtW3RoaXMuaWRGaWVsZF1dID0gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZC5lbWl0KHsgc2VsZWN0ZWQ6ICFpc0NoZWNrLCBkYXRhOiBpdGVtIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdEl0ZW0oaWQsIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9ucyAmJiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnNlbGVjdGlvbnMuZmluZChuID0+IG5bdGhpcy5pZEZpZWxkXSA9PT0gaWQpO1xyXG4gICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodERhdGFDaGVja2VkKGl0ZW0sIGVtaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyU2VsZWN0aW9ucyhlbWl0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzID0ge307XHJcbiAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmlnaHREYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZElkID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkgJiYgdGhpcy50dCkge1xyXG4gICAgICAgICAgICBjb25zdCBfY2hraWRzID0gdGhpcy50dC5jaGVja2Vkcy5tYXAobiA9PiBuLmlkKTtcclxuICAgICAgICAgICAgdGhpcy50dC5jbGVhckFsbCgpO1xyXG4gICAgICAgICAgICB0aGlzLnR0LnN0YXRlLnJvd05vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Noa2lkcy5maW5kKGkgPT4gaSA9PSBuLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4ubm9kZS5zZWxlY3RhYmxlID0gIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVtaXQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZElkQ2hhbmdlLmVtaXQoW10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuagkee7k+aehOaVsOaNrui9rOaNouS4uuaJgeW5s+aVsOe7hFxyXG4gICAgICogQHBhcmFtIG5vZGVzIOagkeiKgueCueaVsOe7hFxyXG4gICAgICogQHBhcmFtIHIg5paw55qE56m65pWw57uEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29udmVydFRyZWVEYXRhVG9QbGFpbkRhdGEobm9kZXM6IFRyZWVOb2RlW10sIHI6IGFueVtdID0gW10pIHtcclxuICAgICAgICBpZiAobm9kZXMpIHtcclxuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgIHIucHVzaChuKTtcclxuICAgICAgICAgICAgICAgIGlmIChuLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VHJlZURhdGFUb1BsYWluRGF0YShuLmNoaWxkcmVuLCByKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24g5bem5Y+z56e75YqoXHJcblxyXG4gICAgcHJpdmF0ZSBtb3ZlSXRlbSgpIHtcclxuICAgICAgICB0aGlzLmJlZm9yZU1vdmUuc3Vic2NyaWJlKChvYmo6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG9iai5pdGVtcztcclxuICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgICAgIHN3aXRjaCAob2JqLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGl0ZW1zKS5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9yaWdodERhdGEuZmluZChuID0+IG5bdGhpcy5pZEZpZWxkXS50b1N0cmluZygpID09PSBpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0RGF0YS5wdXNoKGl0ZW1zW2lkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yaWdodERhdGEgPSBbLi4udGhpcy5fcmlnaHREYXRhXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodEFsbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JpZ2h0RGF0YS5maW5kSW5kZXgobiA9PiBuW3RoaXMuaWRGaWVsZF0gPT09IGRhdGFbdGhpcy5pZEZpZWxkXSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yaWdodERhdGEucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHQuY2xlYXJBbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gT2JqZWN0LmtleXMoaXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0RGF0YSA9IHRoaXMuX3JpZ2h0RGF0YS5maWx0ZXIodiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHMuaW5kZXhPZignJyArIHZbdGhpcy5pZEZpZWxkXSkgPT09IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBpZHMuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9sZWZ0Q2hlY2tlZHNbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodFNlbGVjdGVkSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRzLmluZGV4T2YoJycgKyB0aGlzLnJpZ2h0U2VsZWN0ZWRJdGVtW3RoaXMuaWRGaWVsZF0pID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRTZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5maW5kUm93Tm9kZXMoaWRzKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5ub2RlLnNlbGVjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dC51bkNoZWNrZWROb2RlcyhpZHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0QWxsJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodFNlbGVjdGVkSXRlbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmlnaHREYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkgJiYgdGhpcy50dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9pZHMgPSBpdGVtcy5tYXAobiA9PiBuW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmZpbmRSb3dOb2RlcyhfaWRzKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5ub2RlLnNlbGVjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNlbGVjdElkcyhkaXJlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hZnRlck1vdmUuZW1pdChPYmplY3QudmFsdWVzKGl0ZW1zKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKiDlj7Pnp7sgKi9cclxuICAgIG1vdmVUb1JpZ2h0KG1vdmVEYXRhPzogYW55KSB7XHJcblxyXG4gICAgICAgIGlmIChtb3ZlRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZU1vdmUuZW1pdCh7IGl0ZW1zOiB7IFttb3ZlRGF0YVt0aGlzLmlkRmllbGRdXTogbW92ZURhdGEgfSwgdGFyZ2V0OiAncmlnaHQnIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NoZWNrZWRzKCdMJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50dC5jaGVja2Vkcy5maWx0ZXIobiA9PiB0aGlzLl9yaWdodERhdGEuZmluZEluZGV4KHIgPT4gci5pZCA9PT0gbi5pZCkgPT09IC0xICkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzYWdlclNlci53YXJuaW5nKHRoaXMubm9EYXRhTW92ZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47ICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHQuY2hlY2tlZHMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGVmdENoZWNrZWRzW24uZGF0YVt0aGlzLmlkRmllbGRdXSA9IG4uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dC5zZWxlY3Rpb25zLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xlZnRDaGVja2Vkc1tuLmlkXSA9IG4uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrZWRzID0gT2JqZWN0LmtleXModGhpcy5fbGVmdENoZWNrZWRzKS5maWx0ZXIoaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmlnaHREYXRhLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGlkKSA9PT0gLTFcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0NoZWNrZWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc2FnZXJTZXIud2FybmluZyh0aGlzLm5vRGF0YU1vdmVNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZU1vdmUuZW1pdCh7IGl0ZW1zOiB0aGlzLl9sZWZ0Q2hlY2tlZHMsIHRhcmdldDogJ3JpZ2h0JyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzYWdlclNlci53YXJuaW5nKHRoaXMubm9EYXRhTW92ZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlhajpg6jlj7Pnp7sgKi9cclxuICAgIG1vdmVBbGxUb1JpZ2h0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaFZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLl9yaWdodERhdGEgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09ICdMaXN0Jykge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuZGF0YVNvdXJjZTtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuc2VhcmNoVmFsdWUgJiYgdGhpcy5fbGVmdENoZWNrZWRzKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBjaGVja2lkcyA9IE9iamVjdC5rZXlzKHRoaXMuX2xlZnRDaGVja2Vkcyk7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoY2hlY2tpZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY2hlY2tpZHMuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGlmICghaXRlbXMuZmluZChuID0+IG5bdGhpcy5pZEZpZWxkXSA9PT0gaWQpKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKHRoaXMuX2xlZnRDaGVja2Vkc1tpZF0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVNb3ZlLmVtaXQoeyBpdGVtcyAsIHRhcmdldDogJ3JpZ2h0QWxsJyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VhcmNoVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBfZGF0YVNvdXJjZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VHJlZURhdGFUb1BsYWluRGF0YSh0aGlzLmRhdGFTb3VyY2UsIF9kYXRhU291cmNlKTtcclxuICAgICAgICAgICAgICAgIF9kYXRhU291cmNlID0gX2RhdGFTb3VyY2UuZmlsdGVyKG4gPT4gbi5zZWxlY3RhYmxlICYmIChuLnZpc2libGUgfHwgbi52aXNpYmxlID09PSB1bmRlZmluZWQpKS5tYXAobiA9PiBuLmRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlTW92ZS5lbWl0KHsgaXRlbXM6IF9kYXRhU291cmNlLCB0YXJnZXQ6ICdyaWdodEFsbCcgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfZGF0YVNvdXJjZSA9IHRoaXMudHQuc2VyaWFsaXplZFZhbHVlLm1hcChuID0+IG4ubm9kZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlTW92ZS5lbWl0KHsgaXRlbXM6IF9kYXRhU291cmNlLCB0YXJnZXQ6ICdyaWdodEFsbCcgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlt6bnp7sgKi9cclxuICAgIG1vdmVUb0xlZnQobW92ZURhdGE/OiBhbnkpIHtcclxuXHJcbiAgICAgICAgaWYgKG1vdmVEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlTW92ZS5lbWl0KHsgaXRlbXM6IHsgW21vdmVEYXRhW3RoaXMuaWRGaWVsZF1dOiBtb3ZlRGF0YSB9LCB0YXJnZXQ6ICdsZWZ0JyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNDaGVja2VkcygnUicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZm9yZU1vdmUuZW1pdCh7IGl0ZW1zOiB0aGlzLl9yaWdodENoZWNrZWRzLCB0YXJnZXQ6ICdsZWZ0JyB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzYWdlclNlci53YXJuaW5nKHRoaXMubm9EYXRhTW92ZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDlhajpg6jlt6bnp7sgKi9cclxuICAgIG1vdmVBbGxUb0xlZnQoKSB7XHJcbiAgICAgICAgdGhpcy5iZWZvcmVNb3ZlLmVtaXQoeyBpdGVtczogdGhpcy5fcmlnaHREYXRhLCB0YXJnZXQ6ICdsZWZ0QWxsJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24g5LiK5LiL56e75Yqo5pi+56S65YiX6aG65bqPXHJcblxyXG4gICAgX2dldFNlbGVjdEluZm8oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmlnaHRTZWxlY3RlZEl0ZW0pIHtcclxuICAgICAgICAgICAgLy8gY29uc3Qga2V5ID0gT2JqZWN0LmtleXModGhpcy5fcmlnaHRDaGVja2VkcylbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMucmlnaHRTZWxlY3RlZEl0ZW1bdGhpcy5pZEZpZWxkXTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9yaWdodERhdGEuZmluZEluZGV4KGMgPT4gJycgKyBjW3RoaXMuaWRGaWVsZF0gPT0gIGtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBrZXksIGluZGV4XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiDnva7pobYgKi9cclxuICAgIG1vdmVUb3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlTW92ZU1vcmUgJiYgdGhpcy5fcmlnaHRDaGVja2VkcyAmJiBPYmplY3Qua2V5cyh0aGlzLl9yaWdodENoZWNrZWRzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlTW9yZSgndG9wJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5fZ2V0U2VsZWN0SW5mbygpO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5fcmlnaHREYXRhLnVuc2hpZnQodGhpcy5fcmlnaHREYXRhW29iai5pbmRleF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9yaWdodERhdGEuc3BsaWNlKG9iai5pbmRleCArIDEsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3RJZHMoMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNhZ2VyU2VyLndhcm5pbmcodGhpcy5ub0RhdGFNb3ZlTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiDkuIrnp7sgKi9cclxuICAgIG1vdmVVcCgpIHtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZU1vdmVNb3JlICYmIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgJiYgT2JqZWN0LmtleXModGhpcy5fcmlnaHRDaGVja2VkcykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZU1vcmUyKCd1cCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLl9nZXRTZWxlY3RJbmZvKCk7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG9iai5pbmRleDtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQXJyID0gdGhpcy5fcmlnaHREYXRhLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yaWdodERhdGEuc3BsaWNlKGluZGV4IC0gMSwgMCwgLi4udGVtcEFycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0SWRzKDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzYWdlclNlci53YXJuaW5nKHRoaXMubm9EYXRhTW92ZU1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiog5LiL56e7ICovXHJcbiAgICBtb3ZlRG93bigpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVNb3ZlTW9yZSAmJiB0aGlzLl9yaWdodENoZWNrZWRzICYmIE9iamVjdC5rZXlzKHRoaXMuX3JpZ2h0Q2hlY2tlZHMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVNb3JlMignZG93bicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLl9nZXRTZWxlY3RJbmZvKCk7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0aGlzLl9yaWdodERhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG9iai5pbmRleDtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwIHx8IGluZGV4ICE9PSBsZW4gLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQXJyID0gdGhpcy5fcmlnaHREYXRhLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yaWdodERhdGEuc3BsaWNlKGluZGV4ICsgMSwgMCwgLi4udGVtcEFycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0SWRzKDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1lc2FnZXJTZXIud2FybmluZyh0aGlzLm5vRGF0YU1vdmVNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOe9ruW6lSAqL1xyXG4gICAgbW92ZUJvdHRvbSgpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVNb3ZlTW9yZSAmJiB0aGlzLl9yaWdodENoZWNrZWRzICYmIE9iamVjdC5rZXlzKHRoaXMuX3JpZ2h0Q2hlY2tlZHMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVNb3JlKCdib3R0b20nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLl9nZXRTZWxlY3RJbmZvKCk7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLl9yaWdodERhdGEucHVzaCh0aGlzLl9yaWdodERhdGFbb2JqLmluZGV4XSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0RGF0YS5zcGxpY2Uob2JqLmluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0SWRzKDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzYWdlclNlci53YXJuaW5nKHRoaXMubm9EYXRhTW92ZU1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6Kem5Y+R6YCJ5oup5LitaWRcclxuICAgICAqIEBwYXJhbSBudW1iZXIgMeS7o+ihqOW3puS+p+aVsOaNruWPs+enu++8jC0xLOS7o+ihqOaVsOaNruW3puenu++8jDDku6PooajkuIrnp7vkuIvnp7tcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGFuZ2VTZWxlY3RJZHMobnVtYmVyOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLl9yaWdodERhdGEubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbVt0aGlzLmlkRmllbGRdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAobnVtYmVyID09PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zZWxlY3RlZElkID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZElkID0gaWRzLmpvaW4oJywnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0ZWRJZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZCA9IGlkcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSWRDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkSWQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmlnaHRBY3RpdmVEb20gPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmYtbXVsdGktc2VsZWN0LWxpc3QtZ3JvdXAtLXJpZ2h0IGxpLmFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAocmlnaHRBY3RpdmVEb20pIHtcclxuICAgICAgICAgICAgICAgIGlmIChyaWdodEFjdGl2ZURvbS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRBY3RpdmVEb20uc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByaWdodEFjdGl2ZURvbS5zY3JvbGxJbnRvVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZCA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG51bWJlciA9PT0gMSB8fCBudW1iZXIgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGlmICghaWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZElkID0gW107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSWQgPSBpZHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVHJlZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRzICYmIGlkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0LmNoZWNrZWROb2RlcyhpZHMsIHRydWUsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbkNoZWNrTGVuZ3RoID0gdGhpcy5nZXRDYW5DaGVja0xlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJZENoYW5nZS5lbWl0KHRoaXMuc2VsZWN0ZWRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBzZWxlY3Rpb25zQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YUNoYW5nZS5lbWl0KHRoaXMuX3JpZ2h0RGF0YSk7XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGV4dChpdGVtLCB0ZXh0RmllbGQgPSB0aGlzLnRleHRGaWVsZCkge1xyXG4gICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbW1vblV0aWxzICYmIHRoaXMuY29tbW9uVXRpbHMuZ2V0VmFsdWUgJiYgdGV4dEZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tb25VdGlscy5nZXRWYWx1ZSh0ZXh0RmllbGQsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdGV4dEZpZWxkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoaXRlbSwgdmFsdWVGaWVsZCA9IHRoaXMudmFsdWVGaWVsZCkge1xyXG4gICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbW1vblV0aWxzICYmIHRoaXMuY29tbW9uVXRpbHMuZ2V0VmFsdWUgJiYgdmFsdWVGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbW9uVXRpbHMuZ2V0VmFsdWUodmFsdWVGaWVsZCwgaXRlbSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVt2YWx1ZUZpZWxkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJhY2tCeUl0ZW1zID0gKGluZGV4LCBpdGVtKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gIOWPs+S+p+WQjOaXtuenu+WKqOWkmuadoeiusOW9lVxyXG5cclxuICAgIC8qKiDku47lj7PkvqfmlbDmja7mupDkuK3ojrflj5bpgInkuK3nmoTorrDlvZUgKi9cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tlZEl0ZW1zRnJvbURhdGFTb3VyY2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JpZ2h0RGF0YSAmJiB0aGlzLl9yaWdodERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yaWdodERhdGEuZmlsdGVyKG4gPT4gdGhpcy5fcmlnaHRDaGVja2Vkc1tuW3RoaXMuaWRGaWVsZF1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2hlY2tlZEZpcnN0SW5kZXhBbmRMYXN0SW5kZXgoKSB7XHJcbiAgICAgICAgY29uc3QgX2Noa0l0ZW1zID0gdGhpcy5nZXRDaGVja2VkSXRlbXNGcm9tRGF0YVNvdXJjZSgpO1xyXG4gICAgICAgIGlmIChfY2hrSXRlbXMgJiYgX2Noa0l0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdCA9IF9jaGtJdGVtc1swXTtcclxuICAgICAgICAgICAgY29uc3QgbGFzdCA9IF9jaGtJdGVtc1tfY2hrSXRlbXMubGVuZ3RoIC0gMV07XHJcblxyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IHRoaXMuX3JpZ2h0RGF0YS5maW5kSW5kZXgobiA9PiBuW3RoaXMuaWRGaWVsZF0gPT0gZmlyc3RbdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RJbmRleCA9IHRoaXMuX3JpZ2h0RGF0YS5maW5kSW5kZXgobiA9PiBuW3RoaXMuaWRGaWVsZF0gPT0gZmlyc3RbbGFzdC5pZEZpZWxkXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge2ZpcnN0OiBmaXJzdEluZGV4LCBsYXN0OiBsYXN0SW5kZXh9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgZmlyc3Q6IC0xLCBsYXN0OiAtMX07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtb3ZlTW9yZSh0eXBlOiAndG9wJ3wnYm90dG9tJykge1xyXG4gICAgICAgIGlmICh0aGlzLl9yaWdodENoZWNrZWRzICYmIE9iamVjdC5rZXlzKHRoaXMuX3JpZ2h0Q2hlY2tlZHMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBfY2hrSXRlbXMgPSB0aGlzLmdldENoZWNrZWRJdGVtc0Zyb21EYXRhU291cmNlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5fcmlnaHREYXRhLmZpbHRlcihuID0+ICFfY2hrSXRlbXMuZmluZChyID0+IHJbdGhpcy5pZEZpZWxkXSA9PSBuW3RoaXMuaWRGaWVsZF0pICk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAndG9wJykge1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuc3BsaWNlKDAsIDAsIC4uLl9jaGtJdGVtcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goLi4uX2Noa0l0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmlnaHREYXRhID0gWy4uLml0ZW1zXTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVJbmRleCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3RJZHMoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbW92ZU1vcmUyKHR5cGU6ICd1cCd8ICdkb3duJykge1xyXG4gICAgICAgIGNvbnN0IHsgZmlyc3QsIGxhc3QgfSA9IHRoaXMuZ2V0Q2hlY2tlZEZpcnN0SW5kZXhBbmRMYXN0SW5kZXgoKTtcclxuICAgICAgICBjb25zdCBfY2hrSXRlbXMgPSB0aGlzLmdldENoZWNrZWRJdGVtc0Zyb21EYXRhU291cmNlKCk7XHJcbiAgICAgICAgLy8g6I635Y+W5o6S6Zmk5bey6YCJ5Lit55qE6K6w5b2VXHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLl9yaWdodERhdGEuZmlsdGVyKG4gPT4gIV9jaGtJdGVtcy5maW5kKHIgPT4gclt0aGlzLmlkRmllbGRdID09IG5bdGhpcy5pZEZpZWxkXSkgKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICd1cCcpIHtcclxuICAgICAgICAgICAgbGV0IHRhckluZGV4ID0gZmlyc3QgLSAxO1xyXG4gICAgICAgICAgICBpZiAodGFySW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVNb3JlKCd0b3AnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnNwbGljZSh0YXJJbmRleCwgMCwgLi4uX2Noa0l0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgICAgIGxldCBkb3duSWR4ID0gZmlyc3QgKyAxO1xyXG4gICAgICAgICAgICBpZiAoZG93bklkeCA+PSB0aGlzLl9yaWdodERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVNb3JlKCdib3R0b20nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zLnNwbGljZShkb3duSWR4LCAwLCAuLi5fY2hrSXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JpZ2h0RGF0YSA9IFsuLi5pdGVtc107XHJcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVJbmRleCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlU2VsZWN0SWRzKDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQWN0aXZlSW5kZXgoKSB7XHJcbiAgICAgICAgbGV0IGlkeCA9IC0xO1xyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0U2VsZWN0ZWRJdGVtKSB7XHJcbiAgICAgICAgICAgIGlkeCA9IHRoaXMuX3JpZ2h0RGF0YS5maW5kSW5kZXgobiA9PiBuW3RoaXMuaWRGaWVsZF0gPT09IHRoaXMucmlnaHRTZWxlY3RlZEl0ZW1bdGhpcy5pZEZpZWxkXSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmlnaHRBY3RpdmVJbmRleCA9IGlkeDtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHJpZ2h0RGF0YUNsaWNrZWQoJGV2ZW50OiBNb3VzZUV2ZW50LCBpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBpc0N0cmxLZXkgPSAkZXZlbnQuY3RybEtleTtcclxuICAgICAgICBjb25zdCBpc1NoaWZ0S2V5ID0gJGV2ZW50LnNoaWZ0S2V5O1xyXG4gICAgICAgIHRoaXMucmlnaHRTZWxlY3RlZEl0ZW0gPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldDogYW55ID0gJGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICAgICAgY29uc3QgdWwgPSB0YXJnZXQuY2xvc2VzdCgndWwnKTtcclxuICAgICAgICBpZiAoaXNTaGlmdEtleSkge1xyXG4gICAgICAgICAgICBpZiAodWwpIHtcclxuICAgICAgICAgICAgICAgIHVsLnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghaXNDdHJsS2V5ICYmICFpc1NoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHRBY3RpdmVJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBjb25zdCBpc0NoZWNrYm94Q2xpY2tlZCA9IHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignY3VzdG9tLWNoZWNrYm94JykgPiAtMSB8fCB0YXJnZXQuY2xvc2VzdCgnLmN1c3RvbS1jaGVja2JveCcpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoaXNDaGVja2JveENsaWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yaWdodENoZWNrZWRzICYmIHRoaXMuX3JpZ2h0Q2hlY2tlZHNbaXRlbVt0aGlzLmlkRmllbGRdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRTZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9yaWdodENoZWNrZWRzW2l0ZW1bdGhpcy5pZEZpZWxkXV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgPSB0aGlzLl9yaWdodENoZWNrZWRzIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHNbaXRlbVt0aGlzLmlkRmllbGRdXSA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUmlnaHRDaGVja2VkcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmlnaHRDaGVja2VkcyA9IHRoaXMuX3JpZ2h0Q2hlY2tlZHMgfHwge307XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzW2l0ZW1bdGhpcy5pZEZpZWxkXV0gPSBpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNldENoZWNrSXRlbXMgPSAoaXNBZGQgPSB0cnVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm9jdXNJbmRleCA9IHRoaXMucmlnaHRBY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIGlmIChmb2N1c0luZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBmb2N1c0luZGV4O1xyXG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGVuZEluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmb2N1c0luZGV4ID4gZW5kSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGVuZEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGZvY3VzSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0SXRlbXMgPSBbLi4udGhpcy5fcmlnaHREYXRhXS5zcGxpY2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0FkZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RJdGVtcy5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JpZ2h0Q2hlY2tlZHNbblt0aGlzLmlkRmllbGRdXSA9IG47XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChpc0N0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9yaWdodENoZWNrZWRzW2l0ZW1bdGhpcy5pZEZpZWxkXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fcmlnaHRDaGVja2Vkc1tpdGVtW3RoaXMuaWRGaWVsZF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHRTZWxlY3RlZEl0ZW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzW2l0ZW1bdGhpcy5pZEZpZWxkXV0gPSBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc1NoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q2hlY2tJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodEFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNTaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgc2V0Q2hlY2tJdGVtcyhpc0N0cmxLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodWwpIHtcclxuICAgICAgICAgICAgdWwuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25SaWdodEl0ZW1DbGljaygkZXZlbnQsIGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlTW92ZU1vcmUpIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodERhdGFDbGlja2VkKCRldmVudCwgaXRlbSwgaW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnaHREYXRhQ2hlY2tlZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIGNsZWFyUmlnaHRDaGVja2VkcygpIHtcclxuICAgICAgICB0aGlzLl9yaWdodENoZWNrZWRzID0ge307XHJcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZGlzcGxheS10ZXh0JyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInRlbXBsYXRlXCIgPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cInRlbXBsYXRlOyBjb250ZXh0OiB7JGltcGxpY2l0OiBkYXRhLGluc3RhbmNlOiBtcywgc2lkZTogc2lkZSwgc2VsZWN0ZWQ6IG1zLmlzQ2hlY2tlZChkYXRhLCAnUicpIH1cIj5cclxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiF0ZW1wbGF0ZVwiPnt7X2dldFRleHQoZGF0YSl9fTwvbmctY29udGFpbmVyPlxyXG4gICAgYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlzcGxheVRleHRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gICAgQElucHV0KCkgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgICBASW5wdXQoKSBkYXRhOiBhbnk7XHJcbiAgICBASW5wdXQoKSBzaWRlID0gJ0wnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBtczogTXVsdGlTZWxlY3RDb21wb25lbnQpIHsgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRleHQoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1zLmdldFRleHQoaXRlbSk7XHJcbiAgICB9XHJcbn1cclxuIl19