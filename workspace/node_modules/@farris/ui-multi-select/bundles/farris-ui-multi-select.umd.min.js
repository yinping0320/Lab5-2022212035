!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash-es"),require("@angular/core"),require("@angular/common"),require("@farris/ui-locale"),require("@farris/ui-perfect-scrollbar"),require("@farris/ui-treetable"),require("@farris/ui-common"),require("@angular/forms"),require("@farris/ui-messager")):"function"==typeof define&&define.amd?define("@farris/ui-multi-select",["exports","lodash-es","@angular/core","@angular/common","@farris/ui-locale","@farris/ui-perfect-scrollbar","@farris/ui-treetable","@farris/ui-common","@angular/forms","@farris/ui-messager"],t):t((e.farris=e.farris||{},e.farris["ui-multi-select"]={}),e.lodashEs,e.ng.core,e.ng.common,e.uiLocale,e.uiPerfectScrollbar,e.uiTreetable,e.uiCommon,e.ng.forms,e.uiMessager)}(this,function(e,i,s,t,n,r,a,l,o,c){"use strict";var h=function(){return(h=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function d(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var s,n,r=i.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(s=r.next()).done;)a.push(s.value)}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var f=(Object.defineProperty(g.prototype,"dataSource",{get:function(){return this._ds},set:function(e){var t=this;e=e||[],this._ds=e,this.searchValue||(e.length&&(e[0].toJSON?this.copyDataSource=e.map(function(e){return e.toJSON()}):this.copyDataSource=i.cloneDeep(e)),setTimeout(function(){t.initRightData(t.selectedId,!1)}))},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selections",{get:function(){return this._rightData},set:function(e){this._rightData=e.filter(function(e){return e!==undefined&&null!==e}),this.cd.detectChanges()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"searchValue",{get:function(){return this._searchValue},set:function(e){var t=this;if((this._searchValue=e)===undefined||null===e||""===e){var i=h({},this._leftCheckeds);return"Tree"===this.displayType&&this.tt.selections.forEach(function(e){i[e.id]=e.data}),this.dataSource=this.copyDataSource,void("Tree"===this.displayType?setTimeout(function(){var e=Object.keys(i);e&&e.length&&t.tt.checkedNodes(e)}):this._leftCheckeds=h({},i))}"Tree"===this.displayType?this.tt.searchHandle.search(this.textField+","+this.valueField,this._searchValue):this.dataSource=this.getListDataBySearch(this._searchValue,this.copyDataSource),this.updateTimer1&&clearTimeout(this.updateTimer1),this.updateTimer1=setTimeout(function(){t.canCheckLength=t.getCanCheckLength()})},enumerable:!0,configurable:!0}),g.prototype.ngOnInit=function(){this.emptyData=this.localeService.getValue("multiSelect.emptyData")||"暂无数据",this.initRightData(this.selectedId),this.moveItem(),!this.showCheckbox&&this.enableMoveMore&&(this.showCheckbox=!0)},g.prototype.ngAfterViewInit=function(){var e=this.el.nativeElement;this.render.addClass(e,"row"),this.render.addClass(e,"f-multi-select"),!0===this.fit?(this.render.addClass(e,"f-utils-fill"),this.render.setStyle(e,"height","100%")):this.height&&this.render.setStyle(e,"height",this.height+"px"),this.noDataMoveMessage="请选择要移动的数据。"===this.noDataMoveMessage?this.localeService.getValue("multiSelect.noDataMoveMessage"):this.noDataMoveMessage,this.tt&&this.selectedId&&this.tt.checkedNodes(this.selectedId)},g.prototype.ngAfterContentInit=function(){var t=this;this.templates.forEach(function(e){switch(e.getType()){case"text":t.displayTemplate=e.template}})},g.prototype.ngOnChanges=function(e){if(e.dataSource&&!e.dataSource.isFirstChange()&&(this._leftCheckeds={},this._rightData=[]),e.selectedId&&!e.selectedId.isFirstChange()){var t=e.selectedId.currentValue||[],i=e.selectedId.previousValue||[];if(!t.length)return this.clearSelections(),void(this.canCheckLength=this.getCanCheckLength());t.length==i.length&&JSON.stringify(t)===JSON.stringify(i)||this.initRightData(e.selectedId.currentValue)}},g.prototype.getCanCheckLength=function(){var t=this,i=0,e=0;return e=this.isTree()?(this.tt.serializedValue.forEach(function(e){e.node.selectable&&t.canChecked(e.node)&&i++}),this.tt.serializedValue.length):(this.dataSource.forEach(function(e){t.canChecked(e)&&i++}),this.dataSource.length),this.leftCount=e,i},g.prototype.getListDataBySearch=function(r,e){var a=this,l=[];return r=""+r,e instanceof Array&&e.forEach(function(e){var t="",i="";a.textField&&(t=""+a.getText(e)),a.valueField&&(i=""+a.getValue(e));var s=function(){return-1!==t.toLowerCase().indexOf(r.toLowerCase())},n=function(){return-1!==i.toLowerCase().indexOf(r.toLowerCase())};a.searchValueField?a.textField&&a.valueField?(s()||n())&&l.push(e):a.textField&&!a.valueField?s()&&l.push(e):!a.textField&&a.valueField&&n()&&l.push(e):s()&&l.push(e)}),l},g.prototype.initRightData=function(e,t){var i=this;void 0===t&&(t=!0);var s=[];e&&e.length||(e=this.selections.map(function(e){return e[i.idField]})),e&&e.length?this.isTree()?(this.convertTreeDataToPlainData(this.copyDataSource,s),this._rightData=this.getTreeSelectionsById(e,s)):this._rightData=this.getListSelectionsById(e,this.copyDataSource):t&&this.moveAllToLeft(),this.checkLeftData(e)},g.prototype.checkLeftData=function(e){var i=this;if(e&&e.length){var t=h({},this._leftCheckeds);for(var s in this._leftCheckeds=e.reduce(function(e,t){return e[t]=i._rightData.find(function(e){return e[i.idField]==t}),e},{}),this._leftCheckeds)this._leftCheckeds[s]||delete this._leftCheckeds[s];this._leftCheckeds=Object.assign({},t,this._leftCheckeds)}this.updateAllTreeNodes(e)},g.prototype.updateAllTreeNodes=function(e){var t=this;this.updateTimer2&&clearTimeout(this.updateTimer2),this.updateTimer2=setTimeout(function(){t.canCheckLength=t.getCanCheckLength(),t.tt&&(e&&e.length&&t.tt.checkedNodes(e,!0,!1,!0),t.allTreeNodes=i.cloneDeep(t.tt.state.rowNodes.map(function(e){return e.node})))})},g.prototype.getListSelectionsById=function(t,e){var i=this,s=[],n=this;if("string"==typeof t&&t||"number"==typeof t){var r=e.find(function(e){return e[n.idField]===t});r&&s.push(r)}else s=Array.isArray(t)&&Array.isArray(e)?t.map(function(t){return e.find(function(e){return e[i.idField]===t})}).filter(function(e){return e}):[];return s},g.prototype.getTreeSelectionsById=function(t,e){var i=this,s=[],n=this;if("string"==typeof t&&t||"number"==typeof t){var r=e.find(function(e){return e.data[n.idField]===t});r&&r.data&&s.push(r.data)}else s=Array.isArray(t)&&Array.isArray(e)?t.map(function(t){return e.find(function(e){return e.data[i.idField]===t})}).filter(function(e){return e}).map(function(e){return e.data}):[];return s},g.prototype.isChecked=function(e,t){var i=e[this.idField];return"L"===t?this._leftCheckeds&&this._leftCheckeds[i]!==undefined:!!this._rightCheckeds&&this._rightCheckeds[i]!==undefined},g.prototype.canChecked=function(e){var t=this,i=e;return!(this.isTree()&&(i=e.data,e.selectable!==undefined&&!e.selectable)||this.selections&&0!==this.selections.length&&-1!==this.selections.findIndex(function(e){return e&&e[t.idField]===i[t.idField]}))},g.prototype.onCheckValueChange=function(e){},g.prototype.isTree=function(){return"Tree"===this.displayType},g.prototype.leftDataChecked=function(e){var i=this;e&&e.length&&e.forEach(function(e){var t=e;i.isTree()&&(t=e.data),i.canChecked(e)&&(i.isChecked(t,"L")?delete i._leftCheckeds[t[i.idField]]:(i._leftCheckeds||(i._leftCheckeds={}),i._leftCheckeds[t[i.idField]]=t))})},g.prototype.hasCheckeds=function(e){return"L"===e?this.isTree()?this.tt.checkeds&&this.tt.checkeds.length||this.tt.selections&&this.tt.selections.length:!!this._leftCheckeds&&0<Object.keys(this._leftCheckeds).length:!!this._rightCheckeds&&0<Object.keys(this._rightCheckeds).length},g.prototype.rightDataChecked=function(e,t){void 0===t&&(t=!0);var i=this.isChecked(e,"R");if(i)return this.showCheckbox?delete this._rightCheckeds[e[this.idField]]:this._rightCheckeds={},this.rightSelectedItem=null,void this.unSelected.emit({data:e});this.showCheckbox?this._rightCheckeds=this._rightCheckeds||{}:this._rightCheckeds={},this.rightSelectedItem=e,this._rightCheckeds[e[this.idField]]=e,this.cd.detectChanges(),this.selected.emit({selected:!i,data:e})},g.prototype.selectItem=function(t,e){var i=this;if(void 0===e&&(e=!0),this.selections&&this.selections.length){var s=this.selections.find(function(e){return e[i.idField]===t});s&&this.rightDataChecked(s,e)}},g.prototype.clearSelections=function(e){if(void 0===e&&(e=!1),this._rightCheckeds={},this._leftCheckeds={},this._rightData=[],this.selectedId=[],this.isTree()&&this.tt){var i=this.tt.checkeds.map(function(e){return e.id});this.tt.clearAll(),this.tt.state.rowNodes.forEach(function(t){i.find(function(e){return e==t.id})&&(t.node.selectable=!0)})}e&&this.selectedIdChange.emit([])},g.prototype.convertTreeDataToPlainData=function(e,t){var i=this;return void 0===t&&(t=[]),e&&e.forEach(function(e){t.push(e),e.children&&i.convertTreeDataToPlainData(e.children,t)}),t},g.prototype.moveItem=function(){var r=this;this.beforeMove.subscribe(function(e){var i=e.items,t=1;switch(e.target){case"right":Object.keys(i).forEach(function(t){r._rightData.find(function(e){return e[r.idField].toString()===t})||r._rightData.push(i[t])}),r._rightData=u(r._rightData),r.isTree()&&r.tt.clearAll(),t=1;break;case"rightAll":i.forEach(function(t){-1===r._rightData.findIndex(function(e){return e[r.idField]===t[r.idField]})&&r._rightData.push(t)}),r.isTree()&&r.tt.clearAll(),t=1;break;case"left":var s=Object.keys(i);r._rightData=r._rightData.filter(function(e){return-1===s.indexOf(""+e[r.idField])}),r._rightCheckeds={},s.forEach(function(e){delete r._leftCheckeds[e]}),r.rightSelectedItem&&-1<s.indexOf(""+r.rightSelectedItem[r.idField])&&(r.rightSelectedItem=null),t=-1,r.isTree()&&(r.tt.findRowNodes(s).forEach(function(e){e.node.selectable=!0}),r.tt.unCheckedNodes(s,!0));break;case"leftAll":if(r._rightCheckeds={},r.rightSelectedItem=null,r._rightData=[],t=-1,r._leftCheckeds={},r.isTree()&&r.tt){r.tt.clearAll();var n=i.map(function(e){return e[r.idField]});r.tt.findRowNodes(n).forEach(function(e){e.node.selectable=!0})}}r.selectionsChange(),r.changeSelectIds(t),r.afterMove.emit(Object.values(i))})},g.prototype.moveToRight=function(e){var t,i=this;if(e)this.beforeMove.emit({items:(t={},t[e[this.idField]]=e,t),target:"right"});else if(this.hasCheckeds("L")){if(this.isTree()){if(this._leftCheckeds={},!this.tt.checkeds.filter(function(t){return-1===i._rightData.findIndex(function(e){return e.id===t.id})}).length)return void this.mesagerSer.warning(this.noDataMoveMessage);this.tt.checkeds.forEach(function(e){i._leftCheckeds[e.data[i.idField]]=e.data}),this.tt.selections.forEach(function(e){i._leftCheckeds[e.id]=e.data})}else if(!Object.keys(this._leftCheckeds).filter(function(t){return-1===i._rightData.findIndex(function(e){return e.id===t})}).length)return void this.mesagerSer.warning(this.noDataMoveMessage);this.beforeMove.emit({items:this._leftCheckeds,target:"right"})}else this.mesagerSer.warning(this.noDataMoveMessage)},g.prototype.moveAllToRight=function(){if(""===this.searchValue&&(this._rightData=[]),"List"===this.displayType){var e=this.dataSource;this.beforeMove.emit({items:e,target:"rightAll"})}else if(this.searchValue)t=this.tt.serializedValue.map(function(e){return e.node.data}),this.beforeMove.emit({items:t,target:"rightAll"});else{var t=[];this.convertTreeDataToPlainData(this.dataSource,t),t=t.filter(function(e){return e.selectable&&(e.visible||e.visible===undefined)}).map(function(e){return e.data}),this.beforeMove.emit({items:t,target:"rightAll"})}},g.prototype.moveToLeft=function(e){var t;e?this.beforeMove.emit({items:(t={},t[e[this.idField]]=e,t),target:"left"}):this.hasCheckeds("R")?this.beforeMove.emit({items:this._rightCheckeds,target:"left"}):this.mesagerSer.warning(this.noDataMoveMessage)},g.prototype.moveAllToLeft=function(){this.beforeMove.emit({items:this._rightData,target:"leftAll"})},g.prototype._getSelectInfo=function(){var t=this;if(this.rightSelectedItem){var i=this.rightSelectedItem[this.idField],e=this._rightData.findIndex(function(e){return""+e[t.idField]==i});return{key:i,index:e}}return null},g.prototype.moveTop=function(){if(this.enableMoveMore&&this._rightCheckeds&&Object.keys(this._rightCheckeds).length)this.moveMore("top");else{var e=this._getSelectInfo();e?(this._rightData.unshift(this._rightData[e.index]),this._rightData.splice(e.index+1,1),this.selectionsChange(),this.changeSelectIds(0)):this.mesagerSer.warning(this.noDataMoveMessage)}},g.prototype.moveUp=function(){var e;if(this.enableMoveMore&&this._rightCheckeds&&Object.keys(this._rightCheckeds).length)this.moveMore2("up");else{var t=this._getSelectInfo();if(t){var i=t.index;if(0!==i){var s=this._rightData.splice(i,1);(e=this._rightData).splice.apply(e,u([i-1,0],s))}this.selectionsChange(),this.changeSelectIds(0)}else this.mesagerSer.warning(this.noDataMoveMessage)}},g.prototype.moveDown=function(){var e;if(this.enableMoveMore&&this._rightCheckeds&&Object.keys(this._rightCheckeds).length)this.moveMore2("down");else{var t=this._getSelectInfo();if(t){var i=this._rightData.length,s=t.index;if(0===s||s!==i-1){var n=this._rightData.splice(s,1);(e=this._rightData).splice.apply(e,u([s+1,0],n))}this.selectionsChange(),this.changeSelectIds(0)}else this.mesagerSer.warning(this.noDataMoveMessage)}},g.prototype.moveBottom=function(){if(this.enableMoveMore&&this._rightCheckeds&&Object.keys(this._rightCheckeds).length)this.moveMore("bottom");else{var e=this._getSelectInfo();e?(this._rightData.push(this._rightData[e.index]),this._rightData.splice(e.index,1),this.selectionsChange(),this.changeSelectIds(0)):this.mesagerSer.warning(this.noDataMoveMessage)}},g.prototype.changeSelectIds=function(e){var t=this,i=this._rightData.map(function(e){return e[t.idField]});if(0!==e)this.selectedId||(this.selectedId=[]),1!==e&&-1!==e||(i.length?this.selectedId=i:this.selectedId=[],this.isTree()&&i&&i.length&&this.tt.checkedNodes(i,!0,!1,!0)),this.canCheckLength=this.getCanCheckLength(),this.selectedIdChange.emit(this.selectedId);else{"string"==typeof this.selectedId?this.selectedId=i.join(","):Array.isArray(this.selectedId)&&(this.selectedId=i),this.selectedIdChange.emit(this.selectedId);var s=this.el.nativeElement.querySelector(".f-multi-select-list-group--right li.active");s&&(s.scrollIntoViewIfNeeded?s.scrollIntoViewIfNeeded():s.scrollIntoView())}},g.prototype.selectionsChange=function(){this.dataChange.emit(this._rightData),this.cd.detectChanges()},g.prototype.getText=function(e,t){return void 0===t&&(t=this.textField),e?this.commonUtils&&this.commonUtils.getValue&&t?this.commonUtils.getValue(t,e):e[t]:""},g.prototype.getValue=function(e,t){return void 0===t&&(t=this.valueField),e?this.commonUtils&&this.commonUtils.getValue&&t?this.commonUtils.getValue(t,e):e[t]:""},g.prototype.getCheckedItemsFromDataSource=function(){var t=this;return this._rightData&&this._rightData.length?this._rightData.filter(function(e){return t._rightCheckeds[e[t.idField]]}):[]},g.prototype.getCheckedFirstIndexAndLastIndex=function(){var t=this,e=this.getCheckedItemsFromDataSource();if(e&&e.length){var i=e[0],s=e[e.length-1];return{first:this._rightData.findIndex(function(e){return e[t.idField]==i[t.idField]}),last:this._rightData.findIndex(function(e){return e[t.idField]==i[s.idField]})}}return{first:-1,last:-1}},g.prototype.moveMore=function(e){var i=this;if(this._rightCheckeds&&Object.keys(this._rightCheckeds).length){var s=this.getCheckedItemsFromDataSource(),t=this._rightData.filter(function(t){return!s.find(function(e){return e[i.idField]==t[i.idField]})});"top"===e?t.splice.apply(t,u([0,0],s)):"bottom"===e&&t.push.apply(t,u(s)),this._rightData=u(t),this.updateActiveIndex(),this.selectionsChange(),this.changeSelectIds(0)}},g.prototype.moveMore2=function(e){var i=this,t=this.getCheckedFirstIndexAndLastIndex(),s=t.first,n=(t.last,this.getCheckedItemsFromDataSource()),r=this._rightData.filter(function(t){return!n.find(function(e){return e[i.idField]==t[i.idField]})});if("up"===e){var a=s-1;if(a<0)return void this.moveMore("top");r.splice.apply(r,u([a,0],n))}else if("down"===e){var l=s+1;if(l>=this._rightData.length)return void this.moveMore("bottom");r.splice.apply(r,u([l,0],n))}this._rightData=u(r),this.updateActiveIndex(),this.selectionsChange(),this.changeSelectIds(0)},g.prototype.updateActiveIndex=function(){var t=this,e=-1;this.rightSelectedItem&&(e=this._rightData.findIndex(function(e){return e[t.idField]===t.rightSelectedItem[t.idField]})),this.rightActiveIndex=e},g.prototype.rightDataClicked=function(e,t,r){var a=this,i=e.ctrlKey,s=e.shiftKey;this.rightSelectedItem=t;var n=e.target,l=n.closest("ul");if(s&&l&&(l.style.userSelect="none"),i||s){var o=function(e){void 0===e&&(e=!0);var t=a.rightActiveIndex;-1===t&&(t=0);var i=t,s=r;r<t&&(i=r,s=t);var n=u(a._rightData).splice(i,s-i+1);e||(a._rightCheckeds=[]),n.forEach(function(e){a._rightCheckeds[e[a.idField]]=e})};i?(this._rightCheckeds[t[this.idField]]?(delete this._rightCheckeds[t[this.idField]],this.rightSelectedItem=null):this._rightCheckeds[t[this.idField]]=t,s&&o(),this.rightActiveIndex=r):s&&o(i)}else this.rightActiveIndex=r,-1<n.className.indexOf("custom-checkbox")||n.closest(".custom-checkbox")?this._rightCheckeds&&this._rightCheckeds[t[this.idField]]?(this.rightSelectedItem=null,delete this._rightCheckeds[t[this.idField]]):(this._rightCheckeds=this._rightCheckeds||{},this._rightCheckeds[t[this.idField]]=t):(this.clearRightCheckeds(),this._rightCheckeds=this._rightCheckeds||{},this._rightCheckeds[t[this.idField]]=t);l&&(l.style.userSelect="none")},g.prototype.onRightItemClick=function(e,t,i){this.enableMoveMore?this.rightDataClicked(e,t,i):this.rightDataChecked(t)},g.prototype.clearRightCheckeds=function(){this._rightCheckeds={},this.cd.detectChanges()},g.decorators=[{type:s.Component,args:[{selector:"multi-select",template:'<div class="f-utils-fill f-multi-select-list d-flex flex-column">\r\n    <div class="f-utils-flex-column f-multi-select-list-content f-utils-fill">\r\n        <legend class="f-multi-select-list-title">\r\n            {{leftTitle === \'未选择\' ? (\'multiSelect.leftTitle\'|locale) : leftTitle}} ( {{ canCheckLength }} / {{ leftCount }} )\r\n            <span *ngIf="displayType === \'Tree\' && showCascadeControl" style="display: flex; align-items: center;">\r\n                <input type="checkbox" style="margin-right:2px" [(ngModel)]="enableCascase" id="fms_chkenablecascade"><label for="fms_chkenablecascade" style="margin:0">级联选择</label>\r\n            </span>\r\n            <ng-content select=".left-title"></ng-content>\r\n        </legend>\r\n        <div class="input-group" *ngIf="enableSearch" style="margin: 5px; width: auto">\r\n            <input type="text" class="form-control" [(ngModel)]="searchValue" placeholder="{{ \'multiSelect.filterPlaceholder\' | locale }}" />\r\n            <div class="input-group-append" style="background: transparent;display: flex;align-items: center;padding: 0 5px;">\r\n                <span class="f-icon f-icon-search" *ngIf="!searchValue" ></span>\r\n                <span class="f-icon f-icon-close" style="cursor: pointer;" *ngIf="searchValue" (click)="searchValue = \'\';"></span>\r\n            </div>\r\n        </div>\r\n        <div class="container columns-box f-utils-fill" [class.pl-2]="displayType !== \'List\'">\r\n            <perfect-scrollbar [config]="{}">\r\n                <ng-container *ngIf="displayType === \'List\'; else tree">\r\n                    <ul class="f-multi-select-list-group multi-select-list-group-flush f-multi-select-list-group--left" [class.f-multi-select-norecords]="!dataSource || !dataSource.length">\r\n                        <ng-template [ngIf]="dataSource && dataSource.length">\r\n                            <li class="f-multi-select-list-group-item" (click)="leftDataChecked([data])"\r\n                                *ngFor="let data of dataSource;trackBy: trackByItems" [ngClass]="{\'f-state-disabled\':!canChecked(data),\'active\':isChecked(data, \'L\')}">\r\n                                <div class="custom-control custom-checkbox  custom-control-inline">\r\n                                    <input type="checkbox" class="custom-control-input" [checked]="isChecked(data, \'L\')"\r\n                                        [disabled]="!canChecked(data)">\r\n                                    <label class="custom-control-label" [style.white-space]="wordWrap ? \'break-spaces\': \'nowrap\'" [style.word-wrap]="wordWrap? \'break-word\': \'normal\'">\r\n                                        <display-text [template]="displayTemplate" [data]="data"></display-text>\r\n                                    </label>\r\n                                </div>\r\n                            </li>\r\n                        </ng-template>\r\n                        <ng-template [ngIf]="!dataSource || !dataSource.length">\r\n                            <li class="f-multi-select-norecords-content"> {{emptyData}} </li>\r\n                        </ng-template>\r\n                    </ul>\r\n                </ng-container>\r\n\r\n                <ng-template #tree>\r\n                    <farris-treetable #tt [data]="dataSource" [idField]="idField" [striped]="false" [cascadeCheck]="enableCascase" [cascadeDown]="enableCascase" [cascadeUp]="enableCascase"\r\n                        [singleSelect]="false" [showIcon]="false" [showFilterBar]="false" [showCheckbox]="true"\r\n                        [selectOnCheck]="true" [checkOnSelect]="true" [showBorder]="false" (checkValuesChange)="onCheckValueChange($event)">\r\n                        <ng-template farrisTemplate="body" let-rowNode let-treeNode="node" let-rowData="rowData">\r\n                            <tr #row="row" [selectRow]="rowNode" [dblclick]="true"\r\n                                [selectRowDisabled]="!canChecked(treeNode)" [attr.id]="rowNode.id">\r\n                                <td style="border: 0; line-height: 26px;padding: 0px" [style.color]="row.selectRowDisabled? \'#a6a6a6\': \'#333\'">\r\n                                    <farris-treeTableToggler [disabled]="!canChecked(treeNode)" [rowNode]="rowNode">\r\n                                    </farris-treeTableToggler>\r\n                                    <display-text [template]="displayTemplate" [data]="rowData"></display-text>\r\n                                </td>\r\n                            </tr>\r\n                        </ng-template>\r\n                    </farris-treetable>\r\n                </ng-template>\r\n            </perfect-scrollbar>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="f-multi-select-list-btns" [class.col-2]="!enableTargetSort">\r\n \r\n    <button [title]="\'multiSelect.allShiftRight\' | locale" class="btn btn-secondary f-btn-icon " type="button"\r\n        (click)="moveAllToRight()">\r\n        <span class="f-icon f-icon-arrow-seek-right"></span>\r\n    </button>\r\n    <button [title]="\'multiSelect.shiftRight\' | locale" class="btn btn-secondary f-btn-icon right-all" type="button"\r\n    (click)="moveToRight()">\r\n    <span class="f-icon f-icon-arrow-chevron-right"></span>\r\n</button>\r\n    <button [title]="\'multiSelect.shiftLeft\' | locale" class="btn btn-secondary f-btn-icon" type="button"\r\n        (click)="moveToLeft()">\r\n        <span class="f-icon f-icon-arrow-chevron-left"></span>\r\n    </button>\r\n    <button [title]="\'multiSelect.allShiftLeft\' | locale" class="btn btn-secondary f-btn-icon" type="button"\r\n        (click)="moveAllToLeft()">\r\n        <span class="f-icon f-icon-arrow-seek-left"></span>\r\n    </button>\r\n</div>\r\n<div class="f-utils-fill f-multi-select-list d-flex flex-column">\r\n    <div class="f-utils-flex-column f-multi-select-list-content f-utils-fill">\r\n        <legend class="f-multi-select-list-title">\r\n            {{rightTitle === \'已选择\' ? (\'multiSelect.rightTitle\'|locale) : rightTitle}} ({{selections && selections.length}})\r\n\r\n            <div *ngIf="enableReset && showCheckbox">\r\n                <button class="btn btn-link" title="取消所有勾选" (click)="clearRightCheckeds()">重置</button>\r\n            </div>\r\n            <ng-content select=".right-title"></ng-content>\r\n        </legend>\r\n        <div class="container columns-box f-utils-fill">\r\n            <perfect-scrollbar [config]="{}">\r\n                <ul class="f-multi-select-list-group multi-select-list-group-flush f-multi-select-list-group--right">\r\n                    <li class="f-multi-select-list-group-item" *ngFor="let data of selections;trackBy: trackByItems; index as i"\r\n                        (click)="onRightItemClick($event, data, i)"  [ngClass]="{\'item--show-checkbox\':showCheckbox && data[\'showCheckbox\'] !== false}"\r\n                        [class.active]="!enableMoveMore ?rightSelectedItem && rightSelectedItem[this.idField] === data[idField] : (_rightCheckeds? !!_rightCheckeds[data[idField]] : false)"\r\n                        [ngStyle]="wordWrap ? { overflow: \'hidden\',textOverflow: \'ellipsis\'} : null">\r\n                        <ng-container *ngIf="showCheckbox && data[\'showCheckbox\'] !== false">\r\n                            <div class="custom-control custom-checkbox f-checkradio-single">\r\n                               <input type="checkbox" class="custom-control-input" [checked]="isChecked(data, \'R\')">\r\n                               <label class="custom-control-label"></label>\r\n                            </div>  \r\n                        </ng-container>\r\n                        <display-text [template]="displayTemplate" [data]="data" [side]="\'R\'" \r\n                            [style.word-wrap]="wordWrap? \'break-word\': \'normal\'"\r\n                            [style.white-space]="wordWrap ? \'break-spaces\': \'nowrap\'" ></display-text>\r\n                    </li>\r\n                </ul>\r\n            </perfect-scrollbar>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="f-multi-select-list-btns" *ngIf="enableTargetSort">\r\n    <button [title]="\'multiSelect.top\' | locale" class="btn btn-secondary f-btn-icon" type="button" (click)="moveTop()">\r\n        <span class="f-icon f-icon-roofing"></span>\r\n    </button>\r\n    <button [title]="\'multiSelect.shiftUp\' | locale" class="btn btn-secondary f-btn-icon right-all" type="button"\r\n        (click)="moveUp()">\r\n        <span class="f-icon f-icon-arrow-chevron-up"></span>\r\n    </button>\r\n    <button [title]="\'multiSelect.shiftDown\' | locale" class="btn btn-secondary f-btn-icon" type="button"\r\n        (click)="moveDown()">\r\n        <span class="f-icon f-icon-arrow-chevron-down"></span>\r\n    </button>\r\n    <button [title]="\'multiSelect.bottom\' | locale" class="btn btn-secondary f-btn-icon" type="button"\r\n        (click)="moveBottom()">\r\n        <span class="f-icon f-icon-bottomsetting"></span>\r\n    </button>\r\n</div>',styles:[".f-multi-select-list .search{position:relative}.f-multi-select-list .search .form-control{line-height:1.875;height:1.875;outline:0}.f-multi-select-list .f-table-norecords-content{margin:-10.0625rem 0 0 -.225rem}"]}]}],g.ctorParameters=function(){return[{type:c.MessagerService},{type:s.Injector},{type:s.ChangeDetectorRef}]},g.propDecorators={dataSource:[{type:s.Input}],displayType:[{type:s.Input}],enableTargetSort:[{type:s.Input}],idField:[{type:s.Input}],textField:[{type:s.Input}],valueField:[{type:s.Input}],height:[{type:s.Input}],fit:[{type:s.Input}],noDataMoveMessage:[{type:s.Input}],showCascadeControl:[{type:s.Input}],leftTitle:[{type:s.Input}],rightTitle:[{type:s.Input}],selectedId:[{type:s.Input}],enableSearch:[{type:s.Input}],showCheckbox:[{type:s.Input}],enableReset:[{type:s.Input}],wordWrap:[{type:s.Input}],enableMoveMore:[{type:s.Input}],searchValueField:[{type:s.Input}],dataChange:[{type:s.Output}],selected:[{type:s.Output}],unSelected:[{type:s.Output}],selectedIdChange:[{type:s.Output}],beforeMove:[{type:s.Output}],afterMove:[{type:s.Output}],sortMove:[{type:s.Output}],templates:[{type:s.ContentChildren,args:[l.FarrisTemplateDirective]}],tt:[{type:s.ViewChild,args:["tt"]}]},g);function g(e,t,i){this.mesagerSer=e,this.injector=t,this.cd=i,this.allTreeNodes=[],this._ds=[],this.displayType="List",this.enableTargetSort=!0,this.height=445,this.fit=!0,this.noDataMoveMessage="请选择要移动的数据。",this.showCascadeControl=!1,this.leftTitle="未选择",this.rightTitle="已选择",this.enableSearch=!0,this.showCheckbox=!1,this.enableReset=!1,this.wordWrap=!1,this.enableMoveMore=!1,this.searchValueField=!0,this.dataChange=new s.EventEmitter,this.selected=new s.EventEmitter,this.unSelected=new s.EventEmitter,this.selectedIdChange=new s.EventEmitter,this.beforeMove=new s.EventEmitter,this.afterMove=new s.EventEmitter,this.sortMove=new s.EventEmitter,this._leftCheckeds={},this._rightData=[],this.canCheckLength=0,this.leftCount=0,this._searchValue="",this.enableCascase=!0,this.updateTimer1=null,this.updateTimer2=null,this.rightSelectedItem=null,this.rightActiveIndex=-1,this.trackByItems=function(e,t){return e},Object.values||(Object.values=function(t){return Object.keys(t).map(function(e){return t[e]})}),this.el=this.injector.get(s.ElementRef),this.render=this.injector.get(s.Renderer2),this.localeService=this.injector.get(n.LocaleService),this.commonUtils=this.injector.get(l.CommonUtils,null)}var p=(m.prototype.ngOnInit=function(){},m.prototype._getText=function(e){return this.ms.getText(e)},m.decorators=[{type:s.Component,args:[{selector:"display-text",template:'\n        <ng-container *ngIf="template" >\n            <ng-container\n                *ngTemplateOutlet="template; context: {$implicit: data,instance: ms, side: side, selected: ms.isChecked(data, \'R\') }">\n            </ng-container>\n        </ng-container>\n        <ng-container *ngIf="!template">{{_getText(data)}}</ng-container>\n    '}]}],m.ctorParameters=function(){return[{type:f}]},m.propDecorators={template:[{type:s.Input}],data:[{type:s.Input}],side:[{type:s.Input}]},m);function m(e){this.ms=e,this.side="L"}var v=(y.decorators=[{type:s.NgModule,args:[{imports:[t.CommonModule,r.PerfectScrollbarModule,l.FarrisCommonModule,a.TreeTableModule,n.LocaleModule,o.FormsModule,c.MessagerModule.forRoot()],declarations:[f,p],exports:[f,p,l.FarrisCommonModule],providers:[]}]}],y);function y(){}e.MultiSelectComponent=f,e.DisplayTextComponent=p,e.MultiSelectModule=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-multi-select.umd.min.js.map