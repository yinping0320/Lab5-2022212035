{"version":3,"file":"farris-ui-multi-select.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-multi-select/lib/multi-select.component.ts","ng://@farris/ui-multi-select/lib/multi-select.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { cloneDeep } from 'lodash-es';\r\n/*\r\n* @Author: ç¯çç§æ(lucas huang)\r\n* @Date: 2018-10-27 10:55:02\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-10-16 14:14:14\r\n* @Company: Inspur\r\n* @Version: v0.0.1\r\n*/\r\n\r\nimport {\r\n    Component, OnInit, Input, ViewChild, Output, EventEmitter,\r\n    TemplateRef, ContentChildren, QueryList, AfterContentInit, AfterViewInit,\r\n    OnChanges, SimpleChanges, Injector, ChangeDetectorRef, ElementRef, Renderer2\r\n} from '@angular/core';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { TreeTableComponent, TreeNode } from '@farris/ui-treetable';\r\nimport { CommonUtils, FarrisTemplateDirective } from '@farris/ui-common';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Component({\r\n    selector: 'multi-select',\r\n    templateUrl: './multi-select.component.html',\r\n    styleUrls: [\r\n        './multi-select.css'\r\n    ]\r\n})\r\n\r\nexport class MultiSelectComponent implements OnInit, OnChanges, AfterViewInit, AfterContentInit {\r\n\r\n    private allTreeNodes = [];\r\n    private _ds: any = [];\r\n    get dataSource() {\r\n        return this._ds;\r\n    }\r\n    @Input() set dataSource(val: any) {\r\n        val = val  || [];\r\n        this._ds = val;\r\n        if (!this.searchValue) {\r\n            if (val.length) {\r\n                if (val[0].toJSON) {\r\n                    this.copyDataSource = val.map(n => n.toJSON());\r\n                } else {\r\n                    this.copyDataSource = cloneDeep(val);\r\n                }\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.initRightData(this.selectedId, false);\r\n            });\r\n        }\r\n    }\r\n\r\n    @Input() displayType: 'List' | 'Tree' = 'List';\r\n    /** æ¾ç¤ºå³ä¾§ä¸ç§»ä¸ç§»æé® */\r\n    @Input() enableTargetSort = true;\r\n\r\n    @Input() idField: string;\r\n\r\n    @Input() textField: string;\r\n    @Input() valueField: string;\r\n\r\n    @Input() height = 445;\r\n    @Input() fit = true;\r\n    @Input() noDataMoveMessage = 'è¯·éæ©è¦ç§»å¨çæ°æ®ã';\r\n    /** æ ç»ææ¶ï¼æ¯å¦æ¾ç¤ºçº§èéæ©æ§å¶éé¡¹ */\r\n    @Input() showCascadeControl = false;\r\n\r\n    @Input() leftTitle = 'æªéæ©';\r\n    @Input() rightTitle = 'å·²éæ©';\r\n    @Input() selectedId: any;\r\n    @Input() enableSearch = true;\r\n    /** ç®æ æ°æ®æºæ¾ç¤ºcheckbox åè®¸å¤é */\r\n    @Input() showCheckbox = false;\r\n    /** å³ä¾§å·²éå¯ç¨éç½®ï¼å¨å¯ç¨å¤éæ¡æ¶ï¼æ¯å¦æ¾ç¤ºéç½®æé®ï¼å³åæ¶å³ä¾§ææå¾éé¡¹ï¼é»è®¤ä¸º false */\r\n    @Input() enableReset = false;\r\n\r\n    /** å¯ç¨æè¡ */\r\n    @Input() wordWrap = false;\r\n    /** å¯ç¨å¤æ¡è®°å½ä¸èµ·ç§»å¨ï¼é»è®¤ false */\r\n    @Input() enableMoveMore = false;\r\n\r\n    /** æ¥è¯¢æ¶å¯¹valueå­æ®µè¿è¡æ¥è¯¢ï¼é»è®¤ä¸º true; falseæ¶ä»æ¥è¯¢ææ¬å­æ®µ */\r\n    @Input() searchValueField = true;\r\n   \r\n\r\n    @Output() dataChange = new EventEmitter();\r\n    @Output() selected = new EventEmitter();\r\n    @Output() unSelected = new EventEmitter();\r\n    @Output() selectedIdChange = new EventEmitter();\r\n\r\n    @Output() beforeMove = new EventEmitter();\r\n    @Output() afterMove = new EventEmitter();\r\n\r\n    @Output() sortMove = new EventEmitter();\r\n\r\n    @ContentChildren(FarrisTemplateDirective) templates: QueryList<FarrisTemplateDirective>;\r\n    @ViewChild('tt') tt: TreeTableComponent;\r\n\r\n\r\n    // å³ä¾§éä¸­çæ°æ® { [keyVal]: obj, [keyVal]: obj ... }\r\n    _rightCheckeds: any;\r\n    // å·¦ä¾§éä¸­çæ°æ® { [keyVal]: obj, [keyVal]: obj ... }\r\n    _leftCheckeds: any = {};\r\n\r\n    // å³ä¾§æ°æ®\r\n    _rightData = [];\r\n    get selections() {\r\n        return this._rightData;\r\n    }\r\n    set selections(val: any) {\r\n        this._rightData = val.filter(n => n !== undefined && n !== null);\r\n        this.cd.detectChanges();\r\n    }\r\n    get searchValue() {\r\n        return this._searchValue;\r\n    }\r\n    set searchValue(value: string) {\r\n        this._searchValue = value;\r\n\r\n        // this.copyDataSource = [...this.dataSource];\r\n\r\n        if (value === undefined || value === null || value === '') {\r\n            let leftCheckitems = {...this._leftCheckeds};\r\n\r\n            if (this.displayType === 'Tree') {\r\n                this.tt.selections.forEach(n => {\r\n                    leftCheckitems[n.id] = n.data;\r\n                });\r\n            }\r\n            this.dataSource = this.copyDataSource;\r\n\r\n\r\n            if (this.displayType === 'Tree') {\r\n                setTimeout(() => {\r\n                    const ids = Object.keys(leftCheckitems);\r\n                    if (ids && ids.length) {\r\n                        this.tt.checkedNodes(ids);\r\n                    }\r\n                });\r\n            } else  {\r\n                this._leftCheckeds = {...leftCheckitems};\r\n            }\r\n            \r\n            return;\r\n        }\r\n        if (this.displayType === 'Tree') {\r\n            // const newDataSource = this.getTreeDataBySearch(this._searchValue, this.allTreeNodes);\r\n            this.tt.searchHandle.search(`${this.textField},${this.valueField}`, this._searchValue)\r\n            \r\n        } else {\r\n            this.dataSource = this.getListDataBySearch(this._searchValue, this.copyDataSource);\r\n        }\r\n\r\n        if (this.updateTimer1) {\r\n            clearTimeout(this.updateTimer1);\r\n        }\r\n        this.updateTimer1 = setTimeout(() => {\r\n            this.canCheckLength = this.getCanCheckLength();\r\n        });\r\n    }\r\n\r\n    canCheckLength = 0;\r\n    leftCount = 0;\r\n    _searchValue = '';\r\n    // å¤å¶ä¸ä»½æ°æ®æº\r\n    private copyDataSource: any;\r\n    // æ å½¢ç»æçæ°æ®length\r\n    treeDataLength: number;\r\n    displayTemplate: TemplateRef<any>;\r\n\r\n\r\n    emptyData;\r\n    el: ElementRef;\r\n    render: Renderer2;\r\n    localeService: LocaleService;\r\n    commonUtils: CommonUtils;\r\n    // çº§èéæ©æ§å¶éé¡¹\r\n    enableCascase = true;\r\n\r\n    private updateTimer1 = null;\r\n    private updateTimer2 = null;\r\n\r\n    rightSelectedItem = null;\r\n    rightActiveIndex = -1;\r\n\r\n    constructor(private mesagerSer: MessagerService, private injector: Injector, private cd: ChangeDetectorRef) {\r\n        if (!Object.values) {\r\n            Object.values = function (obj) {\r\n                return Object.keys(obj).map(function (e) {\r\n                    return obj[e];\r\n                });\r\n            };\r\n        }\r\n        this.el = this.injector.get<ElementRef>(ElementRef);\r\n        this.render = this.injector.get(Renderer2);\r\n        this.localeService = this.injector.get(LocaleService);\r\n\r\n        this.commonUtils = this.injector.get(CommonUtils, null);\r\n    }\r\n\r\n    ngOnInit() {\r\n        // this.copyDataSource = this.dataSource ? [...this.dataSource] : [];\r\n        this.emptyData = this.localeService.getValue('multiSelect.emptyData') || 'ææ æ°æ®';\r\n        this.initRightData(this.selectedId);\r\n        this.moveItem();\r\n\r\n        if (!this.showCheckbox && this.enableMoveMore){\r\n            this.showCheckbox = true;\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        const elt = this.el.nativeElement;\r\n        this.render.addClass(elt, 'row');\r\n        this.render.addClass(elt, 'f-multi-select');\r\n        if (this.fit === true) {\r\n            this.render.addClass(elt, 'f-utils-fill');\r\n            this.render.setStyle(elt, 'height', '100%');\r\n        } else {\r\n            if (!!this.height) {\r\n                this.render.setStyle(elt, 'height', this.height + 'px');\r\n            }\r\n        }\r\n\r\n        this.noDataMoveMessage =\r\n            this.noDataMoveMessage === 'è¯·éæ©è¦ç§»å¨çæ°æ®ã' ? this.localeService.getValue('multiSelect.noDataMoveMessage') : this.noDataMoveMessage;\r\n\r\n        if (this.tt && this.selectedId) {\r\n            this.tt.checkedNodes(this.selectedId);\r\n        }\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        this.templates.forEach((item) => {\r\n            switch (item.getType()) {\r\n                case 'text':\r\n                    this.displayTemplate = item.template;\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.dataSource && !changes.dataSource.isFirstChange()) {\r\n            this._leftCheckeds = {};\r\n            this._rightData = [];\r\n        }\r\n\r\n        if (changes.selectedId && !changes.selectedId.isFirstChange()) {\r\n            const cv = changes.selectedId.currentValue || [];\r\n            const pv = changes.selectedId.previousValue || [];\r\n\r\n\r\n            // å½è®¾ç½®éä¸­çID ä¸ºç©ºæ¶ï¼æ§è¡æ¸ç©ºå³ä¾§æ°æ®\r\n            if (!cv.length) {\r\n                this.clearSelections();\r\n                // TFS 611928\r\n                this.canCheckLength = this.getCanCheckLength();\r\n                return;\r\n            }\r\n\r\n            if (cv.length != pv.length || JSON.stringify(cv) !== JSON.stringify(pv)) {\r\n                this.initRightData(changes.selectedId.currentValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    getCanCheckLength() {\r\n        let n = 0;\r\n        let total = 0;\r\n        if (this.isTree()) {\r\n            this.tt.serializedValue.forEach(rn => {\r\n                if (rn.node.selectable) {\r\n                    if (this.canChecked(rn.node)) {\r\n                        n++;\r\n                    }\r\n                }\r\n            });\r\n            total = this.tt.serializedValue.length;\r\n        } else {\r\n            this.dataSource.forEach(d => {\r\n                if (this.canChecked(d)) {\r\n                    n++;\r\n                }\r\n            });\r\n            total = this.dataSource.length;\r\n        }\r\n        this.leftCount = total;\r\n        return n;\r\n    }\r\n\r\n    /**\r\n     * è·åæç´¢çæ°æ®ï¼Listç»æ\r\n     * @param value æç´¢çå­ç¬¦\r\n     * @param data æ°æ®\r\n     */\r\n    private getListDataBySearch(value: string, data: any[]): any[] {\r\n        const result = [];\r\n        value = '' + value;\r\n        if (data instanceof Array) {\r\n            data.forEach(item => {\r\n\r\n                let txt = '';\r\n                let val = '';\r\n\r\n                if (this.textField) {\r\n                    txt = '' + this.getText(item);\r\n                }\r\n\r\n                if (this.valueField) {\r\n                    val = '' + this.getValue(item);\r\n                }\r\n\r\n                const textCompare = () => {\r\n                    return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n                }\r\n\r\n                const valueCompare = () => {\r\n                    return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n                }\r\n\r\n\r\n                if (this.searchValueField) {\r\n                    if (this.textField && this.valueField) {\r\n                        if (textCompare() || valueCompare()) {\r\n                            result.push(item);\r\n                        }\r\n                    } else if (this.textField && !this.valueField) {\r\n                        if (textCompare()) {\r\n                            result.push(item);\r\n                        }\r\n                    } else if (!this.textField && this.valueField) {\r\n                        if (valueCompare()) {\r\n                            result.push(item);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (textCompare()) {\r\n                        result.push(item);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * è·ååå«valueå¼å¾èç¹\r\n     */\r\n    // private getTreeDataByRecursive(value: string, data: any[], newData: any[]) {\r\n    //     value = '' + value;\r\n\r\n    //     data.forEach(item => {\r\n\r\n    //         let txt = '';\r\n    //         let val = '';\r\n\r\n    //         if (this.textField) {\r\n    //             txt = '' + this.getText(item.data);\r\n    //         }\r\n\r\n    //         if (this.valueField) {\r\n    //             val = '' + this.getValue(item.data);\r\n    //         }\r\n\r\n    //         const textCompare = () => {\r\n    //             return txt.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n    //         }\r\n\r\n    //         const valueCompare = () => {\r\n    //             return val.toLowerCase().indexOf(value.toLowerCase()) !== -1;\r\n    //         }\r\n\r\n\r\n    //         if (this.textField && this.valueField) {\r\n    //             if (textCompare() || valueCompare()) {\r\n    //                 newData.push(item);\r\n    //             }\r\n    //         } else if (this.textField && !this.valueField) {\r\n    //             if (textCompare()) {\r\n    //                 newData.push(item);\r\n    //             }\r\n    //         } else if (!this.textField && this.valueField) {\r\n    //             if (valueCompare()) {\r\n    //                 newData.push(item);\r\n    //             }\r\n    //         }\r\n    //         if (item.children && item.children.length) {\r\n    //             this.getTreeDataByRecursive(value, item.children, newData);\r\n    //         }\r\n    //     });\r\n    // }\r\n    /**\r\n     * è·åæ ¹èç¹\r\n     */\r\n    // private getTreeRootNode(data: any[], rootData: any[]) {\r\n    //     data.forEach(item => {\r\n    //         if (item.parent === null) {\r\n    //             rootData.push(item);\r\n    //         } else {\r\n    //             this.getTreeRootNode(new Array(item.parent), rootData);\r\n    //         }\r\n    //     });\r\n    // }\r\n\r\n    /**\r\n     * è·åæç´¢çæ°æ®ï¼Treeç»æ\r\n     * @param value æç´¢çå­ç¬¦\r\n     * @param data æ°æ®\r\n     */\r\n    // private getTreeDataBySearch(value: string, data: any[]): any[] {\r\n    //     const rootNodes = [];\r\n    //     const nodes = [];\r\n    //     const finalRes = [];\r\n    //     const uniqueId = [];\r\n    //     // è·ååå«valueå¼å¾èç¹\r\n    //     this.getTreeDataByRecursive(value, data, nodes);\r\n    //     // è·åæ ¹èç¹\r\n    //     this.getTreeRootNode(nodes, rootNodes);\r\n    //     // å»é\r\n    //     rootNodes.forEach(node => {\r\n    //         if (!uniqueId.some(item => item == node.id)) {\r\n    //             finalRes.push(node);\r\n    //             uniqueId.push(node.id);\r\n    //         }\r\n    //     });\r\n    //     return finalRes;\r\n    // }\r\n\r\n    private initRightData(ids, clearRight = true) {\r\n        let dataSource: any = [];\r\n\r\n        if (!ids || !ids.length ) {\r\n            ids = this.selections.map(i => {\r\n                return i[this.idField];\r\n            });\r\n        }\r\n    \r\n\r\n        if (ids && ids.length) {\r\n            if (this.isTree()) {\r\n                this.convertTreeDataToPlainData(this.copyDataSource, dataSource);\r\n                this._rightData = this.getTreeSelectionsById(ids, dataSource);\r\n            } else {\r\n                this._rightData = this.getListSelectionsById(ids, this.copyDataSource);\r\n            }\r\n          \r\n        } else {\r\n            if (clearRight) {\r\n                this.moveAllToLeft();\r\n            }\r\n        }\r\n\r\n        this.checkLeftData(ids);\r\n    }\r\n\r\n    checkLeftData(ids: any) {\r\n        if (ids && ids.length) {\r\n            const checkeds = {...this._leftCheckeds};\r\n            this._leftCheckeds = ids.reduce((r, id) => {\r\n                r[id] = this._rightData.find(n => n[this.idField] == id);\r\n                return r;\r\n            }, {});\r\n\r\n            for (let k in this._leftCheckeds) {\r\n                if (!this._leftCheckeds[k]) {\r\n                    delete this._leftCheckeds[k];\r\n                }\r\n            }\r\n\r\n            this._leftCheckeds = Object.assign({}, checkeds, this._leftCheckeds);\r\n        }\r\n\r\n        this.updateAllTreeNodes(ids);\r\n    }\r\n\r\n    private updateAllTreeNodes(ids) {\r\n        if (this.updateTimer2) {\r\n            clearTimeout(this.updateTimer2);\r\n        }\r\n\r\n        this.updateTimer2 = setTimeout(() => {\r\n            this.canCheckLength = this.getCanCheckLength();\r\n            if (this.tt) {\r\n                if (ids && ids.length) {\r\n                    this.tt.checkedNodes(ids, true, false, true);\r\n                }\r\n                this.allTreeNodes = cloneDeep(this.tt.state.rowNodes.map(n => n.node));\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param ids éä¸­æ°æ®çid\r\n     * @param dataSource åå§æ°æ®\r\n     */\r\n    private getListSelectionsById(ids: any, dataSource: any) {\r\n        let result = [];\r\n        const _this = this;\r\n        if ((typeof ids === 'string' && !!ids) || typeof ids === 'number') {\r\n            const reusltObj = dataSource.find(item => {\r\n                return item[_this.idField] === ids;\r\n            });\r\n            if (reusltObj) {\r\n                result.push(reusltObj);\r\n            }\r\n        } else if (Array.isArray(ids)) {\r\n            if (Array.isArray(dataSource)) {\r\n                result = ids.map(id => dataSource.find(item => item[this.idField] === id)).filter(n => n);\r\n            } else {\r\n                result = [];\r\n            }\r\n        } else {\r\n            result = [];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param ids éä¸­æ°æ®çid\r\n     * @param dataSource åå§æ°æ®\r\n     */\r\n    private getTreeSelectionsById(ids: any, dataSource: any) {\r\n        let result = [];\r\n        const _this = this;\r\n        if ((typeof ids === 'string' && !!ids) || typeof ids === 'number') {\r\n            const reusltObj = dataSource.find(item => {\r\n                return item.data[_this.idField] === ids;\r\n            });\r\n            if (reusltObj && reusltObj.data) {\r\n                result.push(reusltObj.data);\r\n            }\r\n        } else if (Array.isArray(ids)) {\r\n            if (Array.isArray(dataSource)) {\r\n                result = ids.map(id => {\r\n                    return dataSource.find(item => item.data[this.idField] === id);\r\n                }).filter(n => n).map(n => n.data);\r\n            } else {\r\n                result = [];\r\n            }\r\n        } else {\r\n            result = [];\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * å¤æ­æ¯å¦éä¸­\r\n     * @param data è¦éªè¯çæ°æ®\r\n     * @param direction éªè¯çæ°æ®æå¨çä½ç½® L: å·¦ä¾§ï¼R: å³ä¾§\r\n     */\r\n    isChecked(data: any, direction: 'L' | 'R'): boolean {\r\n        const keyVal = data[this.idField];\r\n        if (direction === 'L') {\r\n            return (this._leftCheckeds && this._leftCheckeds[keyVal] !== undefined); // || !this.canChecked(data);\r\n        } else {\r\n            if (this._rightCheckeds) {\r\n                return this._rightCheckeds[keyVal] !== undefined;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    canChecked(item: any) {\r\n        let data = item;\r\n\r\n        if (this.isTree()) {\r\n            data = item.data;\r\n\r\n            if (item.selectable !== undefined && !item.selectable) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (!this.selections || this.selections.length === 0) {\r\n            return true;\r\n        }\r\n        return this.selections.findIndex(c => c && c[this.idField] === data[this.idField]) === -1;\r\n    }\r\n\r\n    onCheckValueChange(ids: string[]) {\r\n        \r\n    }\r\n\r\n    isTree(): any {\r\n        return this.displayType === 'Tree';\r\n    }\r\n\r\n    leftDataChecked(data: any[]) {\r\n        if (data && data.length) {\r\n            data.forEach(node => {\r\n                let d = node;\r\n                if (this.isTree()) {\r\n                    d = node.data;\r\n                }\r\n                if (this.canChecked(node)) {\r\n                    if (this.isChecked(d, 'L')) {\r\n                        delete this._leftCheckeds[d[this.idField]];\r\n                    } else {\r\n                        if (!this._leftCheckeds) {\r\n                            this._leftCheckeds = {};\r\n                        }\r\n                        this._leftCheckeds[d[this.idField]] = d;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    hasCheckeds(dir: 'L' | 'R') {\r\n        if (dir === 'L') {\r\n            if (this.isTree()) {\r\n                return this.tt.checkeds && this.tt.checkeds.length || ( this.tt.selections && this.tt.selections.length);\r\n            }\r\n\r\n            if (this._leftCheckeds) {\r\n                return Object.keys(this._leftCheckeds).length > 0;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            if (this._rightCheckeds) {\r\n                return Object.keys(this._rightCheckeds).length > 0;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    rightDataChecked(item, emit = true) {\r\n        const isCheck = this.isChecked(item, 'R');\r\n        if (isCheck) {\r\n            if (this.showCheckbox) {\r\n                delete this._rightCheckeds[item[this.idField]];\r\n            } else {\r\n                this._rightCheckeds = {};\r\n            }\r\n            this.rightSelectedItem = null;\r\n            this.unSelected.emit({data:item});\r\n            return;\r\n        } else {\r\n            if (this.showCheckbox) {\r\n                this._rightCheckeds = this._rightCheckeds || {};\r\n            } else {\r\n                this._rightCheckeds = {};\r\n            }\r\n            this.rightSelectedItem = item;\r\n            this._rightCheckeds[item[this.idField]] = item;\r\n        }\r\n        this.cd.detectChanges();\r\n        this.selected.emit({ selected: !isCheck, data: item });\r\n    }\r\n\r\n    selectItem(id, emit = true) {\r\n        if (this.selections && this.selections.length) {\r\n            const item = this.selections.find(n => n[this.idField] === id);\r\n            if (item) {\r\n                this.rightDataChecked(item, emit);\r\n            }\r\n        }\r\n    }\r\n\r\n    clearSelections(emit = false) {\r\n        this._rightCheckeds = {};\r\n        this._leftCheckeds = {};\r\n        this._rightData = [];\r\n        this.selectedId = [];\r\n        if (this.isTree() && this.tt) {\r\n            const _chkids = this.tt.checkeds.map(n => n.id);\r\n            this.tt.clearAll();\r\n            this.tt.state.rowNodes.forEach(n => {\r\n                if (_chkids.find(i => i == n.id)) {\r\n                    n.node.selectable =  true;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (emit) {\r\n            this.selectedIdChange.emit([]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å°æ ç»ææ°æ®è½¬æ¢ä¸ºæå¹³æ°ç»\r\n     * @param nodes æ èç¹æ°ç»\r\n     * @param r æ°çç©ºæ°ç»\r\n     */\r\n    private convertTreeDataToPlainData(nodes: TreeNode[], r: any[] = []) {\r\n        if (nodes) {\r\n            nodes.forEach(n => {\r\n                r.push(n);\r\n                if (n.children) {\r\n                    this.convertTreeDataToPlainData(n.children, r);\r\n                }\r\n            });\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    //#region å·¦å³ç§»å¨\r\n\r\n    private moveItem() {\r\n        this.beforeMove.subscribe((obj: any) => {\r\n            const items = obj.items;\r\n            let direction = 1;\r\n            switch (obj.target) {\r\n                case 'right':\r\n                    Object.keys(items).forEach(id => {\r\n                        if (!this._rightData.find(n => n[this.idField].toString() === id)) {\r\n                            this._rightData.push(items[id]);\r\n                        }\r\n                    });\r\n                    this._rightData = [...this._rightData];\r\n                    if (this.isTree()) {\r\n                        this.tt.clearAll();\r\n                    }\r\n                    direction = 1;\r\n                    break;\r\n                case 'rightAll':\r\n                    items.forEach(data => {\r\n                        if (this._rightData.findIndex(n => n[this.idField] === data[this.idField]) === -1) {\r\n                            this._rightData.push(data);\r\n                        }\r\n                    });\r\n                    if (this.isTree()) {\r\n                        this.tt.clearAll();\r\n                    }\r\n\r\n                    direction = 1;\r\n                    break;\r\n                case 'left':\r\n                    let ids = Object.keys(items);\r\n                    this._rightData = this._rightData.filter(v => {\r\n                        return ids.indexOf('' + v[this.idField]) === -1;\r\n                    });\r\n                    this._rightCheckeds = {};\r\n                    ids.forEach(id => {\r\n                        delete this._leftCheckeds[id];\r\n                    });\r\n\r\n                    if (this.rightSelectedItem) {\r\n                        if (ids.indexOf('' + this.rightSelectedItem[this.idField]) > -1) {\r\n                            this.rightSelectedItem = null;\r\n                        }\r\n                    }\r\n\r\n                    direction = -1;\r\n\r\n                    if (this.isTree()) {\r\n                        this.tt.findRowNodes(ids).forEach(n => {\r\n                            n.node.selectable = true;\r\n                        });\r\n                        this.tt.unCheckedNodes(ids, true);\r\n                    }\r\n\r\n                    break;\r\n                case 'leftAll':\r\n                    this._rightCheckeds = {};\r\n                    this.rightSelectedItem = null;\r\n                    this._rightData = [];\r\n                    direction = -1;\r\n                    this._leftCheckeds = {};\r\n                    if (this.isTree() && this.tt) {\r\n                        this.tt.clearAll();\r\n                        const _ids = items.map(n => n[this.idField]);\r\n                        this.tt.findRowNodes(_ids).forEach(n => {\r\n                            n.node.selectable = true;\r\n                        });\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            this.selectionsChange();\r\n            this.changeSelectIds(direction);\r\n\r\n            this.afterMove.emit(Object.values(items));\r\n        });\r\n    }\r\n\r\n\r\n    /** å³ç§» */\r\n    moveToRight(moveData?: any) {\r\n\r\n        if (moveData) {\r\n            this.beforeMove.emit({ items: { [moveData[this.idField]]: moveData }, target: 'right' });\r\n        } else {\r\n            if (this.hasCheckeds('L')) {\r\n                if (this.isTree()) {\r\n                    this._leftCheckeds = {};\r\n\r\n                    if (!this.tt.checkeds.filter(n => this._rightData.findIndex(r => r.id === n.id) === -1 ).length) {\r\n                        this.mesagerSer.warning(this.noDataMoveMessage);\r\n                        return;        \r\n                    }\r\n\r\n                    this.tt.checkeds.forEach(n => {\r\n                        this._leftCheckeds[n.data[this.idField]] = n.data;\r\n                    });\r\n\r\n                    this.tt.selections.forEach(n => {\r\n                        this._leftCheckeds[n.id] = n.data;\r\n                    });\r\n\r\n                } else {\r\n                    const newCheckeds = Object.keys(this._leftCheckeds).filter(id => {\r\n                        return this._rightData.findIndex(n => n.id === id) === -1\r\n                    });\r\n                    if (!newCheckeds.length) {\r\n                        this.mesagerSer.warning(this.noDataMoveMessage);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                this.beforeMove.emit({ items: this._leftCheckeds, target: 'right' });\r\n            } else {\r\n                this.mesagerSer.warning(this.noDataMoveMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** å¨é¨å³ç§» */\r\n    moveAllToRight() {\r\n        if (this.searchValue === '') {\r\n            this._rightData = [];\r\n        }\r\n        if (this.displayType === 'List') {\r\n            const items = this.dataSource;\r\n            // if (this.searchValue && this._leftCheckeds) {\r\n            //     const checkids = Object.keys(this._leftCheckeds);\r\n            //     if (checkids.length) {\r\n            //         checkids.forEach(id => {\r\n            //             if (!items.find(n => n[this.idField] === id)) {\r\n            //                 items.push(this._leftCheckeds[id]);\r\n            //             }\r\n            //         });\r\n            //     }\r\n            // }\r\n            this.beforeMove.emit({ items , target: 'rightAll' });\r\n        } else {\r\n            if (!this.searchValue) {\r\n                let _dataSource = [];\r\n                this.convertTreeDataToPlainData(this.dataSource, _dataSource);\r\n                _dataSource = _dataSource.filter(n => n.selectable && (n.visible || n.visible === undefined)).map(n => n.data);\r\n\r\n                this.beforeMove.emit({ items: _dataSource, target: 'rightAll' });\r\n            } else {\r\n                const _dataSource = this.tt.serializedValue.map(n => n.node.data);\r\n                this.beforeMove.emit({ items: _dataSource, target: 'rightAll' });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /** å·¦ç§» */\r\n    moveToLeft(moveData?: any) {\r\n\r\n        if (moveData) {\r\n            this.beforeMove.emit({ items: { [moveData[this.idField]]: moveData }, target: 'left' });\r\n        } else {\r\n            if (this.hasCheckeds('R')) {\r\n                this.beforeMove.emit({ items: this._rightCheckeds, target: 'left' });\r\n            } else {\r\n                this.mesagerSer.warning(this.noDataMoveMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** å¨é¨å·¦ç§» */\r\n    moveAllToLeft() {\r\n        this.beforeMove.emit({ items: this._rightData, target: 'leftAll' });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region ä¸ä¸ç§»å¨æ¾ç¤ºåé¡ºåº\r\n\r\n    _getSelectInfo() {\r\n        if (this.rightSelectedItem) {\r\n            // const key = Object.keys(this._rightCheckeds)[0];\r\n            const key = this.rightSelectedItem[this.idField];\r\n            const index = this._rightData.findIndex(c => '' + c[this.idField] ==  key);\r\n            return {\r\n                key, index\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n    /** ç½®é¡¶ */\r\n    moveTop() {\r\n        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {\r\n            this.moveMore('top');\r\n            return;\r\n        }\r\n        const obj = this._getSelectInfo();\r\n        if (obj) {\r\n            this._rightData.unshift(this._rightData[obj.index]);\r\n            this._rightData.splice(obj.index + 1, 1);\r\n            this.selectionsChange();\r\n            this.changeSelectIds(0);\r\n        } else {\r\n            this.mesagerSer.warning(this.noDataMoveMessage);\r\n        }\r\n    }\r\n\r\n    /** ä¸ç§» */\r\n    moveUp() {\r\n\r\n\r\n        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {\r\n            this.moveMore2('up');\r\n            return;\r\n        }\r\n\r\n        const obj = this._getSelectInfo();\r\n        if (obj) {\r\n            const index = obj.index;\r\n            if (index !== 0) {\r\n                const tempArr = this._rightData.splice(index, 1);\r\n                this._rightData.splice(index - 1, 0, ...tempArr);\r\n            }\r\n            this.selectionsChange();\r\n            this.changeSelectIds(0);\r\n        } else {\r\n            this.mesagerSer.warning(this.noDataMoveMessage);\r\n        }\r\n    }\r\n\r\n    /** ä¸ç§» */\r\n    moveDown() {\r\n        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {\r\n            this.moveMore2('down');\r\n            return;\r\n        }\r\n\r\n        const obj = this._getSelectInfo();\r\n        if (obj) {\r\n            const len = this._rightData.length;\r\n            const index = obj.index;\r\n            if (index === 0 || index !== len - 1) {\r\n                const tempArr = this._rightData.splice(index, 1);\r\n                this._rightData.splice(index + 1, 0, ...tempArr);\r\n            }\r\n            this.selectionsChange();\r\n            this.changeSelectIds(0);\r\n\r\n        } else {\r\n            this.mesagerSer.warning(this.noDataMoveMessage);\r\n        }\r\n    }\r\n\r\n    /** ç½®åº */\r\n    moveBottom() {\r\n        if (this.enableMoveMore && this._rightCheckeds && Object.keys(this._rightCheckeds).length) {\r\n            this.moveMore('bottom');\r\n            return;\r\n        }\r\n        const obj = this._getSelectInfo();\r\n        if (obj) {\r\n            this._rightData.push(this._rightData[obj.index]);\r\n            this._rightData.splice(obj.index, 1);\r\n            this.selectionsChange();\r\n            this.changeSelectIds(0);\r\n        } else {\r\n            this.mesagerSer.warning(this.noDataMoveMessage);\r\n        }\r\n    }\r\n    /**\r\n     * è§¦åéæ©ä¸­id\r\n     * @param number 1ä»£è¡¨å·¦ä¾§æ°æ®å³ç§»ï¼-1,ä»£è¡¨æ°æ®å·¦ç§»ï¼0ä»£è¡¨ä¸ç§»ä¸ç§»\r\n     */\r\n    private changeSelectIds(number: number) {\r\n        const ids = this._rightData.map(item => {\r\n            return item[this.idField];\r\n        });\r\n\r\n        if (number === 0) {\r\n            if (typeof this.selectedId === 'string') {\r\n                this.selectedId = ids.join(',');\r\n            } else if (Array.isArray(this.selectedId)) {\r\n                this.selectedId = ids;\r\n            }\r\n            this.selectedIdChange.emit(this.selectedId);\r\n\r\n            const rightActiveDom = this.el.nativeElement.querySelector('.f-multi-select-list-group--right li.active');\r\n            if (rightActiveDom) {\r\n                if (rightActiveDom.scrollIntoViewIfNeeded) {\r\n                    rightActiveDom.scrollIntoViewIfNeeded();\r\n                } else {\r\n                    rightActiveDom.scrollIntoView();\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (!this.selectedId) {\r\n            this.selectedId = [];\r\n        }\r\n\r\n        if (number === 1 || number === -1) {\r\n            if (!ids.length) {\r\n                this.selectedId = [];\r\n            } else {\r\n                this.selectedId = ids;\r\n            }\r\n\r\n            if (this.isTree()) {\r\n                if (ids && ids.length) {\r\n                    this.tt.checkedNodes(ids, true, false, true);\r\n                }\r\n            }\r\n        }\r\n        this.canCheckLength = this.getCanCheckLength();\r\n        this.selectedIdChange.emit(this.selectedId);\r\n    }\r\n\r\n    //#endregion\r\n\r\n    private selectionsChange() {\r\n        this.dataChange.emit(this._rightData);\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    getText(item, textField = this.textField) {\r\n        if (item) {\r\n            if (this.commonUtils && this.commonUtils.getValue && textField) {\r\n                return this.commonUtils.getValue(textField, item);\r\n            } else {\r\n                return item[textField];\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    getValue(item, valueField = this.valueField) {\r\n        if (item) {\r\n            if (this.commonUtils && this.commonUtils.getValue && valueField) {\r\n                return this.commonUtils.getValue(valueField, item);\r\n            } else {\r\n                return item[valueField];\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    trackByItems = (index, item) => {\r\n        return index;\r\n    }\r\n\r\n\r\n    //#region  å³ä¾§åæ¶ç§»å¨å¤æ¡è®°å½\r\n\r\n    /** ä»å³ä¾§æ°æ®æºä¸­è·åéä¸­çè®°å½ */\r\n    private getCheckedItemsFromDataSource() {\r\n        if (this._rightData && this._rightData.length) {\r\n            return this._rightData.filter(n => this._rightCheckeds[n[this.idField]]);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    private getCheckedFirstIndexAndLastIndex() {\r\n        const _chkItems = this.getCheckedItemsFromDataSource();\r\n        if (_chkItems && _chkItems.length) {\r\n            const first = _chkItems[0];\r\n            const last = _chkItems[_chkItems.length - 1];\r\n\r\n\r\n            const firstIndex = this._rightData.findIndex(n => n[this.idField] == first[this.idField]);\r\n            const lastIndex = this._rightData.findIndex(n => n[this.idField] == first[last.idField]);\r\n\r\n            return {first: firstIndex, last: lastIndex};\r\n        }\r\n\r\n        return { first: -1, last: -1};\r\n    }\r\n\r\n    private moveMore(type: 'top'|'bottom') {\r\n        if (this._rightCheckeds && Object.keys(this._rightCheckeds).length) {\r\n            const _chkItems = this.getCheckedItemsFromDataSource();\r\n            const items = this._rightData.filter(n => !_chkItems.find(r => r[this.idField] == n[this.idField]) );\r\n            if (type === 'top') {\r\n                items.splice(0, 0, ..._chkItems);\r\n            } else if (type === 'bottom') {\r\n                items.push(..._chkItems);\r\n            }\r\n\r\n            this._rightData = [...items];\r\n            this.updateActiveIndex();\r\n            this.selectionsChange();\r\n            this.changeSelectIds(0);\r\n        }\r\n    }\r\n\r\n    private moveMore2(type: 'up'| 'down') {\r\n        const { first, last } = this.getCheckedFirstIndexAndLastIndex();\r\n        const _chkItems = this.getCheckedItemsFromDataSource();\r\n        // è·åæé¤å·²éä¸­çè®°å½\r\n        const items = this._rightData.filter(n => !_chkItems.find(r => r[this.idField] == n[this.idField]) );\r\n\r\n        if (type === 'up') {\r\n            let tarIndex = first - 1;\r\n            if (tarIndex < 0) {\r\n                this.moveMore('top');\r\n                return;\r\n            } else {\r\n                items.splice(tarIndex, 0, ..._chkItems);\r\n            }\r\n        } else if (type === 'down') {\r\n            let downIdx = first + 1;\r\n            if (downIdx >= this._rightData.length) {\r\n                this.moveMore('bottom');\r\n                return;\r\n            } else {\r\n                items.splice(downIdx, 0, ..._chkItems);\r\n            }\r\n        }\r\n        this._rightData = [...items];\r\n        this.updateActiveIndex();\r\n        this.selectionsChange();\r\n        this.changeSelectIds(0);\r\n    }\r\n\r\n    private updateActiveIndex() {\r\n        let idx = -1;\r\n        if (this.rightSelectedItem) {\r\n            idx = this._rightData.findIndex(n => n[this.idField] === this.rightSelectedItem[this.idField])\r\n        }\r\n\r\n        this.rightActiveIndex = idx;\r\n    }\r\n\r\n    \r\n    rightDataClicked($event: MouseEvent, item: any, index: number) {\r\n        const isCtrlKey = $event.ctrlKey;\r\n        const isShiftKey = $event.shiftKey;\r\n        this.rightSelectedItem = item;\r\n        const target: any = $event.target;\r\n\r\n        const ul = target.closest('ul');\r\n        if (isShiftKey) {\r\n            if (ul) {\r\n                ul.style.userSelect = 'none';\r\n            }\r\n        }\r\n\r\n        if (!isCtrlKey && !isShiftKey) {\r\n            this.rightActiveIndex = index;\r\n            const isCheckboxClicked = target.className.indexOf('custom-checkbox') > -1 || target.closest('.custom-checkbox');\r\n\r\n\r\n\r\n            if (isCheckboxClicked) {\r\n                if (this._rightCheckeds && this._rightCheckeds[item[this.idField]]) {\r\n                    this.rightSelectedItem = null;\r\n                    delete this._rightCheckeds[item[this.idField]];\r\n                } else {\r\n                    this._rightCheckeds = this._rightCheckeds || {};\r\n                    this._rightCheckeds[item[this.idField]] = item;\r\n                }\r\n            } else {\r\n                this.clearRightCheckeds();\r\n                this._rightCheckeds = this._rightCheckeds || {};\r\n                this._rightCheckeds[item[this.idField]] = item;\r\n            }\r\n        } else {\r\n\r\n            const setCheckItems = (isAdd = true) => {\r\n                let focusIndex = this.rightActiveIndex;\r\n                if (focusIndex === -1) {\r\n                    focusIndex = 0;\r\n                }\r\n\r\n                const endIndex = index;\r\n                let start = focusIndex;\r\n                let end = endIndex;\r\n\r\n                if (focusIndex > endIndex) {\r\n                    start = endIndex;\r\n                    end = focusIndex;\r\n                }\r\n\r\n                const selectItems = [...this._rightData].splice(start, end - start + 1);\r\n\r\n                if (!isAdd) {\r\n                    this._rightCheckeds = [];\r\n                }\r\n\r\n                selectItems.forEach(n => {\r\n                    this._rightCheckeds[n[this.idField]] = n;\r\n                });\r\n            }\r\n\r\n\r\n            if (isCtrlKey) {\r\n                if (this._rightCheckeds[item[this.idField]]) {\r\n                    delete this._rightCheckeds[item[this.idField]];\r\n                    this.rightSelectedItem = null;\r\n                } else {\r\n                    this._rightCheckeds[item[this.idField]] = item;\r\n                }\r\n\r\n                if (isShiftKey) {\r\n                    setCheckItems();\r\n                }\r\n                this.rightActiveIndex = index;\r\n            } else if (isShiftKey) {\r\n                setCheckItems(isCtrlKey);\r\n            }\r\n        }\r\n\r\n        if (ul) {\r\n            ul.style.userSelect = 'none';\r\n        }\r\n    }\r\n\r\n    onRightItemClick($event, item, index) {\r\n        if (this.enableMoveMore) {\r\n            this.rightDataClicked($event, item, index);\r\n        } else {\r\n            this.rightDataChecked(item);\r\n        }\r\n    }\r\n\r\n\r\n    //#endregion\r\n\r\n    clearRightCheckeds() {\r\n        this._rightCheckeds = {};\r\n        this.cd.detectChanges();\r\n    }\r\n}\r\n\r\n\r\n@Component({\r\n    selector: 'display-text',\r\n    template: `\r\n        <ng-container *ngIf=\"template\" >\r\n            <ng-container\r\n                *ngTemplateOutlet=\"template; context: {$implicit: data,instance: ms, side: side, selected: ms.isChecked(data, 'R') }\">\r\n            </ng-container>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!template\">{{_getText(data)}}</ng-container>\r\n    `\r\n})\r\nexport class DisplayTextComponent implements OnInit {\r\n    @Input() template: TemplateRef<any>;\r\n    @Input() data: any;\r\n    @Input() side = 'L';\r\n\r\n    constructor(public ms: MultiSelectComponent) { }\r\n\r\n    ngOnInit() {\r\n        // console.log(this.data);\r\n    }\r\n\r\n    _getText(item) {\r\n        return this.ms.getText(item);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\nimport { PerfectScrollbarModule } from '@farris/ui-perfect-scrollbar';\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MultiSelectComponent, DisplayTextComponent } from './multi-select.component';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        PerfectScrollbarModule,\r\n        FarrisCommonModule,\r\n        TreeTableModule,\r\n        LocaleModule,\r\n        FormsModule,\r\n        MessagerModule.forRoot()\r\n    ],\r\n    declarations: [MultiSelectComponent, DisplayTextComponent],\r\n    exports: [\r\n        MultiSelectComponent,\r\n        DisplayTextComponent,\r\n        FarrisCommonModule\r\n    ],\r\n    providers: [],\r\n})\r\nexport class MultiSelectModule { }\r\n"],"names":["EventEmitter","ElementRef","Renderer2","LocaleService","CommonUtils","cloneDeep","tslib_1.__spread","Component","MessagerService","Injector","ChangeDetectorRef","Input","Output","ContentChildren","FarrisTemplateDirective","ViewChild","NgModule","CommonModule","PerfectScrollbarModule","FarrisCommonModule","TreeTableModule","LocaleModule","FormsModule","MessagerModule"],"mappings":"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"}
