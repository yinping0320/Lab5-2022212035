/**
 * @fileoverview added by tsickle
 * Generated from: lib/scroll-area.directive.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef } from '@angular/core';
import { fromEvent } from 'rxjs';
import { debounceTime } from 'rxjs/operators';
var FEScrollAreaDirective = /** @class */ (function () {
    function FEScrollAreaDirective(el) {
        this.el = el;
        // 记录滚动的值
        this.scrollAreaTop = 0;
        // 记录值
        this.threshold = 0;
    }
    /**
     * @return {?}
     */
    FEScrollAreaDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.bindScrollEvent();
    };
    /**
     * @return {?}
     */
    FEScrollAreaDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.scrollSub.unsubscribe();
        this.scrollSub = null;
    };
    // 追加关联
    // 追加关联
    /**
     * @param {?} cInstance
     * @return {?}
     */
    FEScrollAreaDirective.prototype.addCollapseInstance = 
    // 追加关联
    /**
     * @param {?} cInstance
     * @return {?}
     */
    function (cInstance) {
        this.relatedCollapseInstance = cInstance;
    };
    // 绑定事件
    // 绑定事件
    /**
     * @return {?}
     */
    FEScrollAreaDirective.prototype.bindScrollEvent = 
    // 绑定事件
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.scrollSub = fromEvent(this.el.nativeElement, 'scroll').pipe(debounceTime(20)).subscribe((/**
         * @return {?}
         */
        function () {
            //判断滚动的方向
            _this.scrollDirection();
        }));
    };
    /**
     * @return {?}
     */
    FEScrollAreaDirective.prototype.scrollDirection = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var afterScrollTop = this.el.nativeElement.scrollTop;
        /** @type {?} */
        var delta = afterScrollTop - this.scrollAreaTop;
        // 没有变化
        if (delta === 0)
            return false;
        this.scrollAreaTop = afterScrollTop;
        this.judgeThreshold(delta > 0 ? "down" : "up");
    };
    /**
     * @private
     * @param {?} direction
     * @return {?}
     */
    FEScrollAreaDirective.prototype.judgeThreshold = /**
     * @private
     * @param {?} direction
     * @return {?}
     */
    function (direction) {
        this.relatedCollapseInstance.updateHeight(this.scrollAreaTop, direction);
    };
    FEScrollAreaDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[fe-scroll-area]'
                },] }
    ];
    /** @nocollapse */
    FEScrollAreaDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    return FEScrollAreaDirective;
}());
export { FEScrollAreaDirective };
if (false) {
    /**
     * @type {?}
     * @private
     */
    FEScrollAreaDirective.prototype.scrollSub;
    /**
     * @type {?}
     * @private
     */
    FEScrollAreaDirective.prototype.relatedCollapseInstance;
    /**
     * @type {?}
     * @private
     */
    FEScrollAreaDirective.prototype.scrollAreaTop;
    /**
     * @type {?}
     * @private
     */
    FEScrollAreaDirective.prototype.threshold;
    /**
     * @type {?}
     * @private
     */
    FEScrollAreaDirective.prototype.el;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsLWFyZWEuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9leHRlbmQtc2Nyb2xsLWNvbGxhcHNpYmxlLWFyZWEvIiwic291cmNlcyI6WyJsaWIvc2Nyb2xsLWFyZWEuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBQ3pFLE9BQU8sRUFBRSxTQUFTLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQy9DLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUU5QztJQVlFLCtCQUFvQixFQUFjO1FBQWQsT0FBRSxHQUFGLEVBQUUsQ0FBWTs7UUFIMUIsa0JBQWEsR0FBRyxDQUFDLENBQUM7O1FBRWxCLGNBQVMsR0FBRyxDQUFDLENBQUM7SUFHdEIsQ0FBQzs7OztJQUNELHdDQUFROzs7SUFBUjtRQUNFLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDOzs7O0lBQ0QsMkNBQVc7OztJQUFYO1FBQ0UsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUN4QixDQUFDO0lBRUQsT0FBTzs7Ozs7O0lBQ1AsbURBQW1COzs7Ozs7SUFBbkIsVUFBb0IsU0FBUztRQUMzQixJQUFJLENBQUMsdUJBQXVCLEdBQUcsU0FBUyxDQUFDO0lBQzNDLENBQUM7SUFDRCxPQUFPOzs7OztJQUNQLCtDQUFlOzs7OztJQUFmO1FBQUEsaUJBS0M7UUFKQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUzs7O1FBQUM7WUFDM0YsU0FBUztZQUNULEtBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN6QixDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7SUFFRCwrQ0FBZTs7O0lBQWY7O1lBQ00sY0FBYyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLFNBQVM7O1lBQ2hELEtBQUssR0FBRyxjQUFjLEdBQUcsSUFBSSxDQUFDLGFBQWE7UUFDL0MsT0FBTztRQUNQLElBQUksS0FBSyxLQUFLLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUM5QixJQUFJLENBQUMsYUFBYSxHQUFHLGNBQWMsQ0FBQztRQUNwQyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakQsQ0FBQzs7Ozs7O0lBRU8sOENBQWM7Ozs7O0lBQXRCLFVBQXVCLFNBQVM7UUFDOUIsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRTNFLENBQUM7O2dCQS9DRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGtCQUFrQjtpQkFDN0I7Ozs7Z0JBTm1CLFVBQVU7O0lBb0Q5Qiw0QkFBQztDQUFBLEFBaERELElBZ0RDO1NBN0NZLHFCQUFxQjs7Ozs7O0lBRWhDLDBDQUFnQzs7Ozs7SUFFaEMsd0RBQWdDOzs7OztJQUVoQyw4Q0FBMEI7Ozs7O0lBRTFCLDBDQUFzQjs7Ozs7SUFDVixtQ0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIE9uSW5pdCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBmcm9tRXZlbnQsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgYW5pbWF0aW9uRnJhbWUgfSBmcm9tICdyeGpzL2ludGVybmFsL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZSc7XG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbZmUtc2Nyb2xsLWFyZWFdJ1xufSlcbmV4cG9ydCBjbGFzcyBGRVNjcm9sbEFyZWFEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIC8vIOiusOW9lea7muWKqOS6i+S7tlxuICBwcml2YXRlIHNjcm9sbFN1YjogU3Vic2NyaXB0aW9uO1xuICAvLyDmoIforrDlhbPogZRcbiAgcHJpdmF0ZSByZWxhdGVkQ29sbGFwc2VJbnN0YW5jZTtcbiAgLy8g6K6w5b2V5rua5Yqo55qE5YC8XG4gIHByaXZhdGUgc2Nyb2xsQXJlYVRvcCA9IDA7XG4gIC8vIOiusOW9leWAvFxuICBwcml2YXRlIHRocmVzaG9sZCA9IDA7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYpIHtcblxuICB9XG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuYmluZFNjcm9sbEV2ZW50KCk7XG4gIH1cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5zY3JvbGxTdWIudW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnNjcm9sbFN1YiA9IG51bGw7XG4gIH1cblxuICAvLyDov73liqDlhbPogZRcbiAgYWRkQ29sbGFwc2VJbnN0YW5jZShjSW5zdGFuY2UpIHtcbiAgICB0aGlzLnJlbGF0ZWRDb2xsYXBzZUluc3RhbmNlID0gY0luc3RhbmNlO1xuICB9XG4gIC8vIOe7keWumuS6i+S7tlxuICBiaW5kU2Nyb2xsRXZlbnQoKSB7XG4gICAgdGhpcy5zY3JvbGxTdWIgPSBmcm9tRXZlbnQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnc2Nyb2xsJykucGlwZShkZWJvdW5jZVRpbWUoMjApKS5zdWJzY3JpYmUoKCk6IHZvaWQgPT4ge1xuICAgICAgLy/liKTmlq3mu5rliqjnmoTmlrnlkJFcbiAgICAgIHRoaXMuc2Nyb2xsRGlyZWN0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBzY3JvbGxEaXJlY3Rpb24oKSB7XG4gICAgbGV0IGFmdGVyU2Nyb2xsVG9wID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBsZXQgZGVsdGEgPSBhZnRlclNjcm9sbFRvcCAtIHRoaXMuc2Nyb2xsQXJlYVRvcDtcbiAgICAvLyDmsqHmnInlj5jljJZcbiAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybiBmYWxzZTtcbiAgICB0aGlzLnNjcm9sbEFyZWFUb3AgPSBhZnRlclNjcm9sbFRvcDtcbiAgICB0aGlzLmp1ZGdlVGhyZXNob2xkKGRlbHRhID4gMCA/IFwiZG93blwiIDogXCJ1cFwiKTtcbiAgfVxuXG4gIHByaXZhdGUganVkZ2VUaHJlc2hvbGQoZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5yZWxhdGVkQ29sbGFwc2VJbnN0YW5jZS51cGRhdGVIZWlnaHQodGhpcy5zY3JvbGxBcmVhVG9wLCBkaXJlY3Rpb24pO1xuXG4gIH1cbn1cbiJdfQ==