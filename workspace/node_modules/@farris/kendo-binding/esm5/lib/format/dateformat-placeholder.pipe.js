import { Pipe } from '@angular/core';
import { ViewModel, DateUtil } from '@farris/devkit';
var DateFormatPlaceholderPipe = /** @class */ (function () {
    function DateFormatPlaceholderPipe(viewModel) {
        this.viewModel = viewModel;
    }
    DateFormatPlaceholderPipe.prototype.transform = function (format, controlName) {
        if (!this.viewModel.form || !this.viewModel.form.get(controlName)) {
            return {
                year: '年',
                month: '月',
                day: '日'
            };
        }
        var value = this.viewModel.form.get(controlName).value;
        var dateStr = value;
        if (dateStr) {
            dateStr = value.toISOString();
        }
        if ((DateUtil.isEmptyDateString(dateStr) === true) && format === 'yyyy年MM月dd日') {
            return {
                year: ' ',
                month: ' ',
                day: ' '
            };
        }
        return {
            year: '年',
            month: '月',
            day: '日'
        };
    };
    DateFormatPlaceholderPipe.decorators = [
        { type: Pipe, args: [{ name: 'dateFormatPlaceholder' },] }
    ];
    /** @nocollapse */
    DateFormatPlaceholderPipe.ctorParameters = function () { return [
        { type: ViewModel }
    ]; };
    return DateFormatPlaceholderPipe;
}());
export { DateFormatPlaceholderPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZWZvcm1hdC1wbGFjZWhvbGRlci5waXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9rZW5kby1iaW5kaW5nLyIsInNvdXJjZXMiOlsibGliL2Zvcm1hdC9kYXRlZm9ybWF0LXBsYWNlaG9sZGVyLnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyRDtJQUVJLG1DQUFvQixTQUFvQjtRQUFwQixjQUFTLEdBQVQsU0FBUyxDQUFXO0lBRXhDLENBQUM7SUFDRCw2Q0FBUyxHQUFULFVBQVUsTUFBYyxFQUFFLFdBQW1CO1FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUMvRCxPQUFPO2dCQUNILElBQUksRUFBRSxHQUFHO2dCQUNULEtBQUssRUFBRSxHQUFHO2dCQUNWLEdBQUcsRUFBRSxHQUFHO2FBQ1gsQ0FBQztTQUNMO1FBQ0QsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUN6RCxJQUFJLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxPQUFPLEVBQUU7WUFDVCxPQUFPLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ2pDO1FBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxNQUFNLEtBQUssYUFBYSxFQUFFO1lBQzVFLE9BQU87Z0JBQ0gsSUFBSSxFQUFFLEdBQUc7Z0JBQ1QsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsR0FBRyxFQUFFLEdBQUc7YUFDWCxDQUFDO1NBQ0w7UUFDRCxPQUFPO1lBQ0gsSUFBSSxFQUFFLEdBQUc7WUFDVCxLQUFLLEVBQUUsR0FBRztZQUNWLEdBQUcsRUFBRSxHQUFHO1NBQ1gsQ0FBQztJQUNOLENBQUM7O2dCQTlCSixJQUFJLFNBQUMsRUFBRSxJQUFJLEVBQUUsdUJBQXVCLEVBQUU7Ozs7Z0JBRDlCLFNBQVM7O0lBZ0NsQixnQ0FBQztDQUFBLEFBL0JELElBK0JDO1NBOUJZLHlCQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVmlld01vZGVsLCBEYXRlVXRpbCB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuQFBpcGUoeyBuYW1lOiAnZGF0ZUZvcm1hdFBsYWNlaG9sZGVyJyB9KVxyXG5leHBvcnQgY2xhc3MgRGF0ZUZvcm1hdFBsYWNlaG9sZGVyUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3TW9kZWw6IFZpZXdNb2RlbCkge1xyXG5cclxuICAgIH1cclxuICAgIHRyYW5zZm9ybShmb3JtYXQ6IHN0cmluZywgY29udHJvbE5hbWU6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnZpZXdNb2RlbC5mb3JtIHx8ICF0aGlzLnZpZXdNb2RlbC5mb3JtLmdldChjb250cm9sTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6ICflubQnLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICfmnIgnLFxyXG4gICAgICAgICAgICAgICAgZGF5OiAn5pelJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlld01vZGVsLmZvcm0uZ2V0KGNvbnRyb2xOYW1lKS52YWx1ZTtcclxuICAgICAgICBsZXQgZGF0ZVN0ciA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChkYXRlU3RyKSB7XHJcbiAgICAgICAgICAgIGRhdGVTdHIgPSB2YWx1ZS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKERhdGVVdGlsLmlzRW1wdHlEYXRlU3RyaW5nKGRhdGVTdHIpID09PSB0cnVlKSAmJiBmb3JtYXQgPT09ICd5eXl55bm0TU3mnIhkZOaXpScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHllYXI6ICcgJyxcclxuICAgICAgICAgICAgICAgIG1vbnRoOiAnICcsXHJcbiAgICAgICAgICAgICAgICBkYXk6ICcgJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB5ZWFyOiAn5bm0JyxcclxuICAgICAgICAgICAgbW9udGg6ICfmnIgnLFxyXG4gICAgICAgICAgICBkYXk6ICfml6UnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iXX0=