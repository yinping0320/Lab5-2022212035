import { Pipe } from '@angular/core';
import { ViewModel, DateUtil } from '@farris/devkit';
export class DateFormatPlaceholderPipe {
    constructor(viewModel) {
        this.viewModel = viewModel;
    }
    transform(format, controlName) {
        if (!this.viewModel.form || !this.viewModel.form.get(controlName)) {
            return {
                year: '年',
                month: '月',
                day: '日'
            };
        }
        const value = this.viewModel.form.get(controlName).value;
        let dateStr = value;
        if (dateStr) {
            dateStr = value.toISOString();
        }
        if ((DateUtil.isEmptyDateString(dateStr) === true) && format === 'yyyy年MM月dd日') {
            return {
                year: ' ',
                month: ' ',
                day: ' '
            };
        }
        return {
            year: '年',
            month: '月',
            day: '日'
        };
    }
}
DateFormatPlaceholderPipe.decorators = [
    { type: Pipe, args: [{ name: 'dateFormatPlaceholder' },] }
];
/** @nocollapse */
DateFormatPlaceholderPipe.ctorParameters = () => [
    { type: ViewModel }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZWZvcm1hdC1wbGFjZWhvbGRlci5waXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9rZW5kby1iaW5kaW5nLyIsInNvdXJjZXMiOlsibGliL2Zvcm1hdC9kYXRlZm9ybWF0LXBsYWNlaG9sZGVyLnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDcEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyRCxNQUFNLE9BQU8seUJBQXlCO0lBQ2xDLFlBQW9CLFNBQW9CO1FBQXBCLGNBQVMsR0FBVCxTQUFTLENBQVc7SUFFeEMsQ0FBQztJQUNELFNBQVMsQ0FBQyxNQUFjLEVBQUUsV0FBbUI7UUFDekMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQy9ELE9BQU87Z0JBQ0gsSUFBSSxFQUFFLEdBQUc7Z0JBQ1QsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsR0FBRyxFQUFFLEdBQUc7YUFDWCxDQUFDO1NBQ0w7UUFDRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ3pELElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLE9BQU8sRUFBRTtZQUNULE9BQU8sR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDakM7UUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLE1BQU0sS0FBSyxhQUFhLEVBQUU7WUFDNUUsT0FBTztnQkFDSCxJQUFJLEVBQUUsR0FBRztnQkFDVCxLQUFLLEVBQUUsR0FBRztnQkFDVixHQUFHLEVBQUUsR0FBRzthQUNYLENBQUM7U0FDTDtRQUNELE9BQU87WUFDSCxJQUFJLEVBQUUsR0FBRztZQUNULEtBQUssRUFBRSxHQUFHO1lBQ1YsR0FBRyxFQUFFLEdBQUc7U0FDWCxDQUFDO0lBQ04sQ0FBQzs7O1lBOUJKLElBQUksU0FBQyxFQUFFLElBQUksRUFBRSx1QkFBdUIsRUFBRTs7OztZQUQ5QixTQUFTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBWaWV3TW9kZWwsIERhdGVVdGlsIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5AUGlwZSh7IG5hbWU6ICdkYXRlRm9ybWF0UGxhY2Vob2xkZXInIH0pXHJcbmV4cG9ydCBjbGFzcyBEYXRlRm9ybWF0UGxhY2Vob2xkZXJQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZpZXdNb2RlbDogVmlld01vZGVsKSB7XHJcblxyXG4gICAgfVxyXG4gICAgdHJhbnNmb3JtKGZvcm1hdDogc3RyaW5nLCBjb250cm9sTmFtZTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBpZiAoIXRoaXMudmlld01vZGVsLmZvcm0gfHwgIXRoaXMudmlld01vZGVsLmZvcm0uZ2V0KGNvbnRyb2xOYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogJ+W5tCcsXHJcbiAgICAgICAgICAgICAgICBtb250aDogJ+aciCcsXHJcbiAgICAgICAgICAgICAgICBkYXk6ICfml6UnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3TW9kZWwuZm9ybS5nZXQoY29udHJvbE5hbWUpLnZhbHVlO1xyXG4gICAgICAgIGxldCBkYXRlU3RyID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKGRhdGVTdHIpIHtcclxuICAgICAgICAgICAgZGF0ZVN0ciA9IHZhbHVlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoRGF0ZVV0aWwuaXNFbXB0eURhdGVTdHJpbmcoZGF0ZVN0cikgPT09IHRydWUpICYmIGZvcm1hdCA9PT0gJ3l5eXnlubRNTeaciGRk5pelJykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgeWVhcjogJyAnLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICcgJyxcclxuICAgICAgICAgICAgICAgIGRheTogJyAnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHllYXI6ICflubQnLFxyXG4gICAgICAgICAgICBtb250aDogJ+aciCcsXHJcbiAgICAgICAgICAgIGRheTogJ+aXpSdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiJdfQ==