import { Directive, Inject, Injector } from "@angular/core";
import { UserSettingsToken } from "@farris/devkit";
import { FarrisDatepickerComponent } from '@farris/ui-datepicker';
export class FarrisDateLocalizationDirective {
    constructor(injector, userSettings, componentRef) {
        this.injector = injector;
        this.userSettings = userSettings;
        this.componentRef = componentRef;
    }
    ngOnInit() {
        this.localize();
    }
    localize() {
        if (this.userSettings && this.componentRef) {
            const { dateFormat = null, timeFormat = null } = this.userSettings;
            if (dateFormat === null && timeFormat === null) {
                return;
            }
            if (timeFormat && timeFormat && this.componentRef.showTime === true) {
                this.componentRef.dateFormat = `${dateFormat} ${timeFormat}`;
                this.componentRef.dateOpts.dateFormat = `${dateFormat} ${timeFormat}`;
                this.componentRef.updateValue(this.componentRef.value);
            }
            else if (dateFormat) {
                this.componentRef.dateFormat = `${dateFormat}`;
                this.componentRef.dateOpts.dateFormat = `${dateFormat}`;
                this.componentRef.updateValue(this.componentRef.value);
            }
        }
    }
}
FarrisDateLocalizationDirective.decorators = [
    { type: Directive, args: [{
                selector: '[farris-date-localization]'
            },] }
];
/** @nocollapse */
FarrisDateLocalizationDirective.ctorParameters = () => [
    { type: Injector },
    { type: undefined, decorators: [{ type: Inject, args: [UserSettingsToken,] }] },
    { type: FarrisDatepickerComponent }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFycmlzX2RhdGVfbG9jYWxpemF0aW9uLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMva2VuZG8tYmluZGluZy8iLCJzb3VyY2VzIjpbImxpYi9kaXJlY3RpdmVzL2xvY2FsaXphdGlvbi9mYXJyaXNfZGF0ZV9sb2NhbGl6YXRpb24uZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNwRSxPQUFPLEVBQWdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDakUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFJbEUsTUFBTSxPQUFPLCtCQUErQjtJQUMxQyxZQUFvQixRQUFrQixFQUFxQyxZQUEwQixFQUFVLFlBQXVDO1FBQWxJLGFBQVEsR0FBUixRQUFRLENBQVU7UUFBcUMsaUJBQVksR0FBWixZQUFZLENBQWM7UUFBVSxpQkFBWSxHQUFaLFlBQVksQ0FBMkI7SUFFdEosQ0FBQztJQUNELFFBQVE7UUFDTixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNPLFFBQVE7UUFDZCxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUMxQyxNQUFNLEVBQUUsVUFBVSxHQUFHLElBQUksRUFBRSxVQUFVLEdBQUcsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztZQUNuRSxJQUFJLFVBQVUsS0FBSyxJQUFJLElBQUksVUFBVSxLQUFLLElBQUksRUFBRTtnQkFDOUMsT0FBTzthQUNSO1lBQ0QsSUFBSSxVQUFVLElBQUksVUFBVSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxLQUFLLElBQUksRUFBRTtnQkFDbkUsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLEdBQUcsR0FBRyxVQUFVLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQzdELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxHQUFHLFVBQVUsSUFBSSxVQUFVLEVBQUUsQ0FBQztnQkFDdEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN4RDtpQkFBTSxJQUFJLFVBQVUsRUFBRTtnQkFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLEdBQUcsR0FBRyxVQUFVLEVBQUUsQ0FBQztnQkFDL0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLEdBQUcsVUFBVSxFQUFFLENBQUM7Z0JBQ3hELElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDeEQ7U0FDRjtJQUNILENBQUM7OztZQTFCRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLDRCQUE0QjthQUN2Qzs7OztZQUwyQixRQUFROzRDQU9PLE1BQU0sU0FBQyxpQkFBaUI7WUFMMUQseUJBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbmplY3QsIEluamVjdG9yLCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3MsIFVzZXJTZXR0aW5nc1Rva2VuIH0gZnJvbSBcIkBmYXJyaXMvZGV2a2l0XCI7XHJcbmltcG9ydCB7IEZhcnJpc0RhdGVwaWNrZXJDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGVwaWNrZXInO1xyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tmYXJyaXMtZGF0ZS1sb2NhbGl6YXRpb25dJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzRGF0ZUxvY2FsaXphdGlvbkRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIEBJbmplY3QoVXNlclNldHRpbmdzVG9rZW4pIHByaXZhdGUgdXNlclNldHRpbmdzOiBVc2VyU2V0dGluZ3MsIHByaXZhdGUgY29tcG9uZW50UmVmOiBGYXJyaXNEYXRlcGlja2VyQ29tcG9uZW50KSB7XHJcblxyXG4gIH1cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMubG9jYWxpemUoKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBsb2NhbGl6ZSgpIHtcclxuICAgIGlmICh0aGlzLnVzZXJTZXR0aW5ncyAmJiB0aGlzLmNvbXBvbmVudFJlZikge1xyXG4gICAgICBjb25zdCB7IGRhdGVGb3JtYXQgPSBudWxsLCB0aW1lRm9ybWF0ID0gbnVsbCB9ID0gdGhpcy51c2VyU2V0dGluZ3M7XHJcbiAgICAgIGlmIChkYXRlRm9ybWF0ID09PSBudWxsICYmIHRpbWVGb3JtYXQgPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRpbWVGb3JtYXQgJiYgdGltZUZvcm1hdCAmJiB0aGlzLmNvbXBvbmVudFJlZi5zaG93VGltZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmRhdGVGb3JtYXQgPSBgJHtkYXRlRm9ybWF0fSAke3RpbWVGb3JtYXR9YDtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5kYXRlT3B0cy5kYXRlRm9ybWF0ID0gYCR7ZGF0ZUZvcm1hdH0gJHt0aW1lRm9ybWF0fWA7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYudXBkYXRlVmFsdWUodGhpcy5jb21wb25lbnRSZWYudmFsdWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGVGb3JtYXQpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5kYXRlRm9ybWF0ID0gYCR7ZGF0ZUZvcm1hdH1gO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmRhdGVPcHRzLmRhdGVGb3JtYXQgPSBgJHtkYXRlRm9ybWF0fWA7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRSZWYudXBkYXRlVmFsdWUodGhpcy5jb21wb25lbnRSZWYudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59Il19