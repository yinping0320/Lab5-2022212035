/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, EventEmitter, Injector, Input, Output } from '@angular/core';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { LocaleService } from '@farris/ui-locale';
var SearchFieldFlexibleDateComponent = /** @class */ (function () {
    function SearchFieldFlexibleDateComponent(localeService, injector, cd) {
        this.localeService = localeService;
        this.injector = injector;
        this.cd = cd;
        this.valueChange = new EventEmitter();
        // 是否为区间日期
        this.single = true;
        this.dateFormat = '';
        this.showTime = false;
        this.value = '';
        this.beginValue = '';
        this.endValue = '';
        this.showType = '1';
        this.placeholder = '';
        this.endPlaceHolder = '';
        this.beginPlaceHolder = '';
        this.activedDateTagId = '';
        this.activedDayTagId = '';
        this.dateTags = [];
        this.dayTags = [];
        this.dateHelp = null;
        this.dateHelp = this.injector.get(DateTimeHelperService, new DateTimeHelperService());
    }
    /**
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.dateTags = [
            {
                id: 'tag1',
                text: this.localeService.getValue('filterPanel.last1Month')
            },
            {
                id: 'tag2',
                text: this.localeService.getValue('filterPanel.last3Month')
            },
            {
                id: 'tag3',
                text: this.localeService.getValue('filterPanel.last6Month')
            }
        ];
        this.dayTags = [
            {
                id: 'yesterday',
                text: this.localeService.getValue('filterPanel.yesterday')
            },
            {
                id: 'today',
                text: this.localeService.getValue('filterPanel.today')
            }
        ];
        if (this.field.control) {
            var _a = this.field.control, showTime = _a.showTime, showType = _a.showType, single = _a.single;
            if (this.field.value) {
                var _b = this.field.value, value = _b.value, begin = _b.begin, end = _b.end;
                this.value = value,
                    this.beginValue = begin;
                this.endValue = end;
            }
            this.showTime = showTime;
            this.showType = showType;
            this.single = single;
            /** @type {?} */
            var itemDateFormat = this.field.control.dateFormat;
            if (this.showTime && itemDateFormat) {
                if (itemDateFormat.length > 0 && itemDateFormat.indexOf('HH:mm') == -1) {
                    itemDateFormat = itemDateFormat + ' HH:mm:ss';
                }
            }
            else {
                itemDateFormat = this.showTime ? 'yyyy-MM-dd HH:mm:ss' : (this.showType == '2' ? 'yyyy-MM' : (this.showType == '3' ? 'yyyy' : 'yyyy-MM-dd'));
            }
            this.dateFormat = itemDateFormat;
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.onDateChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.valueChange.emit({ field: this.field.code, value: { value: this.value, single: true } });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.beginValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.valueChange.emit({ field: this.field.code, value: { begin: this.beginValue, end: this.endValue, single: false } });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.endValueChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.valueChange.emit({ field: this.field.code, value: { begin: this.beginValue, end: this.endValue, single: false } });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.onSingleChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.single = !$event;
        this.valueChange.emit({ field: this.field.code, value: { value: this.value, begin: this.beginValue, end: this.endValue, single: this.single } });
        this.cd.detectChanges();
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.clickTag = /**
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        this.activedDateTagId = tag.id;
        /** @type {?} */
        var tagDate;
        if (tag.id == 'tag1') {
            tagDate = this.getLastNumMonth(1, this.showTime, this.showType);
        }
        else if (tag.id == 'tag2') {
            tagDate = this.getLastNumMonth(3, this.showTime, this.showType);
        }
        else if (tag.id == 'tag3') {
            tagDate = this.getLastNumMonth(6, this.showTime, this.showType);
        }
        this.beginValue = tagDate['startTime'];
        this.endValue = tagDate['endTime'];
        this.valueChange.emit({ field: this.field.code, value: { value: this.value, begin: this.beginValue, end: this.endValue, single: this.single } });
        this.cd.detectChanges();
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.clickDayTag = /**
     * @param {?} tag
     * @return {?}
     */
    function (tag) {
        this.activedDayTagId = tag.id;
        /** @type {?} */
        var dayTag = this.getToday(this.activedDayTagId, this.showTime);
        this.value = dayTag;
        this.valueChange.emit({ field: this.field.code, value: { value: this.value, single: true } });
    };
    /**
     * @private
     * @param {?} num
     * @param {?} showtime
     * @param {?} type
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.getLastNumMonth = /**
     * @private
     * @param {?} num
     * @param {?} showtime
     * @param {?} type
     * @return {?}
     */
    function (num, showtime, type) {
        /** @type {?} */
        var now = new Date();
        /** @type {?} */
        var year = now.getFullYear();
        /** @type {?} */
        var month = now.getMonth() + 1;
        //0-11表示1-12月
        /** @type {?} */
        var day = now.getDate();
        /** @type {?} */
        var hour = now.getHours();
        /** @type {?} */
        var min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()
            : new Date().getMinutes();
        /** @type {?} */
        var sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()
            : new Date().getSeconds();
        /** @type {?} */
        var dateObj = {};
        /** @type {?} */
        var time = hour + ':' + min + ':' + sec;
        // dateObj['endTime'] = year + '-' + month + '-' + day;
        /** @type {?} */
        var endMonth = month < 10 ? '0' + month : month;
        /** @type {?} */
        var endDay = day < 10 ? '0' + day : day;
        if (type == '2') {
            dateObj['endTime'] = year + '-' + endMonth;
        }
        else if (type == '3') {
            dateObj['endTime'] = year;
        }
        else {
            dateObj['endTime'] = year + '-' + endMonth + '-' + endDay;
        }
        /** @type {?} */
        var nowMonthDay = new Date(year, month, 0).getDate();
        //当前月的总天数
        /** @type {?} */
        var dYear;
        /** @type {?} */
        var dMouth;
        /** @type {?} */
        var dDay;
        if (month - num <= 0) { //如果是1、2、3月，年数往前推一年
            //如果是1、2、3月，年数往前推一年
            /** @type {?} */
            var lastMonthDay = new Date((year - 1), (12 - (num - month)), 0).getDate();
            if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
                // dateObj['startTime'] = (year - 1) + '-' + (12 - (num - month)) + '-' + lastMonthDay;
                dYear = year - 1;
                dMouth = 12 - (num - month);
                dDay = lastMonthDay;
            }
            else {
                dYear = year - 1;
                dMouth = 12 - (num - month);
                dDay = day;
                // dateObj['startTime']= (year - 1) + '-' + (12 - (num - month)) + '-' + day;
            }
        }
        else {
            /** @type {?} */
            var lastMonthDay = new Date(year, (month - num), 0).getDate();
            if (lastMonthDay < day) { //3个月前所在月的总天数小于现在的天日期
                if (day < nowMonthDay) { //当前天日期小于当前月总天数,2月份比较特殊的月份
                    // dateObj['startTime'] = year + '-' + (month - num) + '-' + (lastMonthDay - (nowMonthDay - day));
                    dYear = year;
                    dMouth = month - num;
                    dDay = lastMonthDay - (nowMonthDay - day);
                }
                else {
                    dYear = year;
                    dMouth = month - num;
                    dDay = lastMonthDay;
                    // dateObj['startTime'] = year + '-' + (month - num) + '-' + lastMonthDay;
                }
            }
            else {
                dYear = year;
                dMouth = month - num;
                dDay = day;
                // dateObj['startTime'] = year + '-' + (month - num) + '-' + day;
            }
        }
        dMouth = dMouth < 10 ? '0' + dMouth : dMouth;
        dDay = dDay < 10 ? '0' + dDay : dDay;
        if (type == '2') {
            dateObj['startTime'] = dYear + '-' + dMouth;
        }
        else if (type == '3') {
            dateObj['startTime'] = dYear;
        }
        else {
            dateObj['startTime'] = dYear + '-' + dMouth + '-' + dDay;
        }
        if (showtime) {
            dateObj['endTime'] = dateObj['endTime'] + ' ' + time;
            dateObj['startTime'] = dateObj['startTime'] + ' ' + time;
        }
        return dateObj;
    };
    /**
     * @private
     * @param {?=} dayTags
     * @param {?=} showtime
     * @return {?}
     */
    SearchFieldFlexibleDateComponent.prototype.getToday = /**
     * @private
     * @param {?=} dayTags
     * @param {?=} showtime
     * @return {?}
     */
    function (dayTags, showtime) {
        if (dayTags === void 0) { dayTags = 'today'; }
        /** @type {?} */
        var now = new Date();
        if (dayTags == 'today') {
            return this.dateHelp.formatTo(now, this.dateFormat);
        }
        else if (dayTags == 'yesterday') {
            return this.dateHelp.formatTo(this.dateHelp.subDays(now, 1), this.dateFormat);
        }
        /*
        let year = now.getFullYear();
        let month = now.getMonth() + 1;//0-11表示1-12月
        let day = now.getDate();
        let hour = now.getHours();
        let min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()
            :new Date().getMinutes();
        let sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()
            :new Date().getSeconds();
        const time = hour + ':' + min + ':' + sec;
        let yesterday = new Date();
        yesterday.setTime(now.getTime()-24*60*60*1000);
        let yesterdayObj = yesterday.getFullYear()+"-" + (yesterday.getMonth()+1) + "-" + yesterday.getDate();
        let dateObj = year + '-' + month + '-' + day;
        if(showtime){
            dateObj = dateObj + ' ' + time;
            yesterdayObj = yesterdayObj + ' ' + time;
        }
        if(dayTags == 'today') return dateObj;
        else if (dayTags == 'yesterday') return yesterdayObj;

        */
    };
    SearchFieldFlexibleDateComponent.decorators = [
        { type: Component, args: [{
                    selector: 'search-filed-editor-date',
                    template: "\r\n<div class=\"f-panel-filter-tip\">\r\n    <span class=\"panel-filter-tip-text\">{{ 'filterPanel.intervalFilter' | locale }}</span>\r\n    <farris-switch size=\"small\" [checked]=\"!single\" (valueChange)=\"onSingleChange($event)\"></farris-switch>\r\n</div>\r\n\r\n<div class=\"f-panel-filter-content\">\r\n    <ng-container *ngIf=\"single; else elseTemplate\">\r\n        <ng-container *ngIf=\"showTime; else singleDefaultdate\">\r\n            <farris-datepicker [(ngModel)]=\"value\" [editable]=\"false\" [returnFormat]=\"'yyyy-MM-dd HH:mm:ss'\" [dateFormat]=\"dateFormat\"\r\n             (valueChange)=\"onDateChange($event)\" [placeholder]=\"placeholder\" [showTime]=\"showTime\" #datepicker></farris-datepicker>\r\n        </ng-container>\r\n        <ng-template #singleDefaultdate>\r\n            <farris-datepicker [(ngModel)]=\"value\" [editable]=\"false\" [returnFormat]=\"showType == '2'? 'yyyy-MM': (showType == '3'? 'yyyy':'yyyy-MM-dd')\" \r\n            [dateFormat]=\"dateFormat\" (valueChange)=\"onDateChange($event)\" [placeholder]=\"placeholder\" [showType]=\"showType\" #datepicker></farris-datepicker>\r\n        </ng-template>\r\n    </ng-container>\r\n    <ng-template #elseTemplate>\r\n        <div class=\"d-flex align-items-center\">\r\n            <ng-container *ngIf=\"showTime;else startDefaultdate\">\r\n                <farris-datepicker [(ngModel)]=\"beginValue\" [editable]=\"false\" [returnFormat]=\"'yyyy-MM-dd HH:mm:ss'\" [dateFormat]=\"dateFormat\"\r\n                 (valueChange)=\"beginValueChange($event)\" [placeholder]=\"beginPlaceHolder\" [showTime]=\"showTime\" [maxDate]=\"endValue\" #datepicker></farris-datepicker>\r\n            </ng-container>\r\n            <ng-template #startDefaultdate>\r\n                <farris-datepicker [(ngModel)]=\"beginValue\" [editable]=\"false\" \r\n                [returnFormat]=\"showType == '2'? 'yyyy-MM': (showType == '3'? 'yyyy':'yyyy-MM-dd')\" [dateFormat]=\"dateFormat\" \r\n                (valueChange)=\"beginValueChange($event)\" [placeholder]=\"beginPlaceHolder\" [showType]=\"showType\" [maxDate]=\"endValue\" #datepicker></farris-datepicker>\r\n            </ng-template>\r\n            <span class=\"f-icon f-icon-orientation-arrow mx-2\"></span>\r\n            <ng-container *ngIf=\"showTime;else endDefaultdate\">\r\n                <farris-datepicker [(ngModel)]=\"endValue\" [editable]=\"false\" [returnFormat]=\"'yyyy-MM-dd HH:mm:ss'\" \r\n                [dateFormat]=\"dateFormat\" (valueChange)=\"endValueChange($event)\" [placeholder]=\"endPlaceHolder\" [showTime]=\"showTime\" [minDate]=\"beginValue\" #datepicker></farris-datepicker>\r\n            </ng-container>\r\n            <ng-template #endDefaultdate>\r\n                <farris-datepicker [(ngModel)]=\"endValue\" [editable]=\"false\" \r\n                [returnFormat]=\"showType == '2'? 'yyyy-MM': (showType == '3'? 'yyyy':'yyyy-MM-dd')\" \r\n                [dateFormat]=\"dateFormat\" (valueChange)=\"endValueChange($event)\" [placeholder]=\"endPlaceHolder\" [showType]=\"showType\" [minDate]=\"beginValue\" #datepicker></farris-datepicker>\r\n            </ng-template>\r\n        </div>\r\n    </ng-template>\r\n\r\n</div>\r\n<div class=\"f-filter-panel-date-tags\" *ngIf=\"!single && showType !== '3'\">\r\n    <div class=\"panel-date-tag\" *ngFor=\"let tag of dateTags\" (click)=\"clickTag(tag)\" \r\n    [ngClass]=\"{'active': tag.id == activedDateTagId}\">\r\n        {{tag.text}}\r\n    </div>\r\n</div>\r\n\r\n<div class=\"f-filter-panel-date-tags\" *ngIf=\"single && showType !== '3' && showType !== '2'\">\r\n    <div class=\"panel-date-tag\" *ngFor=\"let day of dayTags\" (click)=\"clickDayTag(day)\" [ngClass]=\"{'active': day.id == activedDayTagId}\">\r\n        {{day.text}}\r\n    </div>\r\n</div>"
                }] }
    ];
    /** @nocollapse */
    SearchFieldFlexibleDateComponent.ctorParameters = function () { return [
        { type: LocaleService },
        { type: Injector },
        { type: ChangeDetectorRef }
    ]; };
    SearchFieldFlexibleDateComponent.propDecorators = {
        field: [{ type: Input }],
        valueChange: [{ type: Output }]
    };
    return SearchFieldFlexibleDateComponent;
}());
export { SearchFieldFlexibleDateComponent };
if (false) {
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.field;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.valueChange;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.single;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.dateFormat;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.showTime;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.value;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.beginValue;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.endValue;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.showType;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.placeholder;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.endPlaceHolder;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.beginPlaceHolder;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.activedDateTagId;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.activedDayTagId;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.dateTags;
    /** @type {?} */
    SearchFieldFlexibleDateComponent.prototype.dayTags;
    /**
     * @type {?}
     * @private
     */
    SearchFieldFlexibleDateComponent.prototype.dateHelp;
    /**
     * @type {?}
     * @private
     */
    SearchFieldFlexibleDateComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    SearchFieldFlexibleDateComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    SearchFieldFlexibleDateComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmxleGlibGUtZGF0ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXNlYXJjaC1ib3gvIiwic291cmNlcyI6WyJsaWIvc2VhcmNoLWZpZWxkcy9lZGl0b3JzL2RhdGUvZmxleGlibGUtZGF0ZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVHLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRDtJQTRCSSwwQ0FBb0IsYUFBNEIsRUFBVSxRQUFrQixFQUFVLEVBQXFCO1FBQXZGLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUFVLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBcEJqRyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7O1FBRTNDLFdBQU0sR0FBRyxJQUFJLENBQUM7UUFDZCxlQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFDaEIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLGFBQVEsR0FBRyxHQUFHLENBQUM7UUFDZixnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQUNqQixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUNwQixxQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFFdEIscUJBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLG9CQUFlLEdBQUcsRUFBRSxDQUFDO1FBRXJCLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDZCxZQUFPLEdBQUcsRUFBRSxDQUFD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O1VBcUJFO0lBRU4sQ0FBQzs7Z0JBN09KLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsMEJBQTBCO29CQUNwQyx5dEhBQTJDO2lCQUM5Qzs7OztnQkFMUSxhQUFhO2dCQUYrQixRQUFRO2dCQUFwRCxpQkFBaUI7Ozt3QkFXckIsS0FBSzs4QkFDTCxNQUFNOztJQXNPWCx1Q0FBQztDQUFBLEFBOU9ELElBOE9DO1NBek9ZLGdDQUFnQzs7O0lBRXpDLGlEQUFlOztJQUNmLHVEQUEyQzs7SUFFM0Msa0RBQWM7O0lBQ2Qsc0RBQWdCOztJQUNoQixvREFBaUI7O0lBQ2pCLGlEQUFXOztJQUNYLHNEQUFnQjs7SUFDaEIsb0RBQWM7O0lBQ2Qsb0RBQWU7O0lBQ2YsdURBQWlCOztJQUNqQiwwREFBb0I7O0lBQ3BCLDREQUFzQjs7SUFFdEIsNERBQXNCOztJQUN0QiwyREFBcUI7O0lBRXJCLG9EQUFjOztJQUNkLG1EQUFhOzs7OztJQUViLG9EQUErQzs7Ozs7SUFDbkMseURBQW9DOzs7OztJQUFFLG9EQUEwQjs7Ozs7SUFBRSw4Q0FBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEluamVjdG9yLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZGF0ZSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnc2VhcmNoLWZpbGVkLWVkaXRvci1kYXRlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnZmxleGlibGUtZGF0ZS5jb21wb25lbnQuaHRtbCdcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWFyY2hGaWVsZEZsZXhpYmxlRGF0ZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgQElucHV0KCkgZmllbGQ7XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDmmK/lkKbkuLrljLrpl7Tml6XmnJ9cclxuICAgIHNpbmdsZSA9IHRydWU7XHJcbiAgICBkYXRlRm9ybWF0ID0gJyc7XHJcbiAgICBzaG93VGltZSA9IGZhbHNlO1xyXG4gICAgdmFsdWUgPSAnJztcclxuICAgIGJlZ2luVmFsdWUgPSAnJztcclxuICAgIGVuZFZhbHVlID0gJyc7XHJcbiAgICBzaG93VHlwZSA9ICcxJztcclxuICAgIHBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBlbmRQbGFjZUhvbGRlciA9ICcnO1xyXG4gICAgYmVnaW5QbGFjZUhvbGRlciA9ICcnO1xyXG5cclxuICAgIGFjdGl2ZWREYXRlVGFnSWQgPSAnJztcclxuICAgIGFjdGl2ZWREYXlUYWdJZCA9ICcnO1xyXG5cclxuICAgIGRhdGVUYWdzID0gW107XHJcbiAgICBkYXlUYWdzID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBkYXRlSGVscDogRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZSwgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XHJcbiAgICAgICAgdGhpcy5kYXRlSGVscCA9IHRoaXMuaW5qZWN0b3IuZ2V0KERhdGVUaW1lSGVscGVyU2VydmljZSwgbmV3IERhdGVUaW1lSGVscGVyU2VydmljZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRhdGVUYWdzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ3RhZzEnLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdmaWx0ZXJQYW5lbC5sYXN0MU1vbnRoJylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICd0YWcyJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZmlsdGVyUGFuZWwubGFzdDNNb250aCcpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkOiAndGFnMycsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2ZpbHRlclBhbmVsLmxhc3Q2TW9udGgnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmRheVRhZ3MgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkOiAneWVzdGVyZGF5JyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZmlsdGVyUGFuZWwueWVzdGVyZGF5JylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICd0b2RheScsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2ZpbHRlclBhbmVsLnRvZGF5JylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5maWVsZC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2hvd1RpbWUsIHNob3dUeXBlLCBzaW5nbGUgfSA9IHRoaXMuZmllbGQuY29udHJvbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGQudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGJlZ2luLCBlbmQgfSA9IHRoaXMuZmllbGQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWUgPSBiZWdpbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSBlbmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNob3dUaW1lID0gc2hvd1RpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1R5cGUgPSBzaG93VHlwZTtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGUgPSBzaW5nbGU7XHJcblxyXG4gICAgICAgICAgICBsZXQgaXRlbURhdGVGb3JtYXQgPSB0aGlzLmZpZWxkLmNvbnRyb2wuZGF0ZUZvcm1hdDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1RpbWUgJiYgaXRlbURhdGVGb3JtYXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtRGF0ZUZvcm1hdC5sZW5ndGggPiAwICYmIGl0ZW1EYXRlRm9ybWF0LmluZGV4T2YoJ0hIOm1tJykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtRGF0ZUZvcm1hdCA9IGl0ZW1EYXRlRm9ybWF0ICsgJyBISDptbTpzcyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtRGF0ZUZvcm1hdCA9IHRoaXMuc2hvd1RpbWUgPyAneXl5eS1NTS1kZCBISDptbTpzcycgOiAodGhpcy5zaG93VHlwZSA9PSAnMicgPyAneXl5eS1NTScgOiAodGhpcy5zaG93VHlwZSA9PSAnMycgPyAneXl5eScgOiAneXl5eS1NTS1kZCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSBpdGVtRGF0ZUZvcm1hdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25EYXRlQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh7ICBmaWVsZDogdGhpcy5maWVsZC5jb2RlLCB2YWx1ZToge3ZhbHVlOiB0aGlzLnZhbHVlLCBzaW5nbGU6IHRydWV9fSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmVnaW5WYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoeyAgZmllbGQ6IHRoaXMuZmllbGQuY29kZSx2YWx1ZTogeyBiZWdpbjogdGhpcy5iZWdpblZhbHVlLCBlbmQ6IHRoaXMuZW5kVmFsdWUsIHNpbmdsZTogZmFsc2V9fSk7XHJcbiAgICB9XHJcbiAgICBlbmRWYWx1ZUNoYW5nZSgkZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoeyAgZmllbGQ6IHRoaXMuZmllbGQuY29kZSwgdmFsdWU6IHsgYmVnaW46IHRoaXMuYmVnaW5WYWx1ZSwgZW5kOiB0aGlzLmVuZFZhbHVlLCBzaW5nbGU6IGZhbHNlfX0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU2luZ2xlQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIHRoaXMuc2luZ2xlID0gISRldmVudDtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoeyAgZmllbGQ6IHRoaXMuZmllbGQuY29kZSx2YWx1ZToge3ZhbHVlOiB0aGlzLnZhbHVlLCAgYmVnaW46IHRoaXMuYmVnaW5WYWx1ZSwgZW5kOiB0aGlzLmVuZFZhbHVlLCBzaW5nbGU6IHRoaXMuc2luZ2xlfX0pO1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrVGFnKHRhZykge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlZERhdGVUYWdJZCA9IHRhZy5pZDtcclxuICAgICAgICBsZXQgdGFnRGF0ZTtcclxuICAgICAgICBpZiAodGFnLmlkID09ICd0YWcxJykge1xyXG4gICAgICAgICAgICB0YWdEYXRlID0gdGhpcy5nZXRMYXN0TnVtTW9udGgoMSwgdGhpcy5zaG93VGltZSwgdGhpcy5zaG93VHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRhZy5pZCA9PSAndGFnMicpIHtcclxuICAgICAgICAgICAgdGFnRGF0ZSA9IHRoaXMuZ2V0TGFzdE51bU1vbnRoKDMsIHRoaXMuc2hvd1RpbWUsIHRoaXMuc2hvd1R5cGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0YWcuaWQgPT0gJ3RhZzMnKSB7XHJcbiAgICAgICAgICAgIHRhZ0RhdGUgPSB0aGlzLmdldExhc3ROdW1Nb250aCg2LCB0aGlzLnNob3dUaW1lLCB0aGlzLnNob3dUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iZWdpblZhbHVlID0gdGFnRGF0ZVsnc3RhcnRUaW1lJ107XHJcbiAgICAgICAgdGhpcy5lbmRWYWx1ZSA9IHRhZ0RhdGVbJ2VuZFRpbWUnXTtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoeyAgZmllbGQ6IHRoaXMuZmllbGQuY29kZSx2YWx1ZToge3ZhbHVlOiB0aGlzLnZhbHVlLCAgYmVnaW46IHRoaXMuYmVnaW5WYWx1ZSwgZW5kOiB0aGlzLmVuZFZhbHVlLCBzaW5nbGU6IHRoaXMuc2luZ2xlfX0pO1xyXG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsaWNrRGF5VGFnKHRhZykge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlZERheVRhZ0lkID0gdGFnLmlkO1xyXG4gICAgICAgIGxldCBkYXlUYWcgPSB0aGlzLmdldFRvZGF5KHRoaXMuYWN0aXZlZERheVRhZ0lkLCB0aGlzLnNob3dUaW1lKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gZGF5VGFnO1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh7ICBmaWVsZDogdGhpcy5maWVsZC5jb2RlLCB2YWx1ZToge3ZhbHVlOiB0aGlzLnZhbHVlLCBzaW5nbGU6IHRydWV9fSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMYXN0TnVtTW9udGgobnVtOm51bWJlcixzaG93dGltZSx0eXBlOnN0cmluZykge1xyXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGxldCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgbGV0IG1vbnRoID0gbm93LmdldE1vbnRoKCkgKyAxOy8vMC0xMeihqOekujEtMTLmnIhcclxuICAgICAgICBsZXQgZGF5ID0gbm93LmdldERhdGUoKTtcclxuICAgICAgICBsZXQgaG91ciA9IG5vdy5nZXRIb3VycygpO1xyXG4gICAgICAgIGxldCBtaW4gPSBub3cuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgICAgICA6bmV3IERhdGUoKS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICBsZXQgc2VjID0gbmV3IERhdGUoKS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIG5ldyBEYXRlKCkuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgIDpuZXcgRGF0ZSgpLmdldFNlY29uZHMoKTtcclxuICAgICAgICBsZXQgZGF0ZU9iaiA9IHt9O1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBob3VyICsgJzonICsgbWluICsgJzonICsgc2VjO1xyXG4gICAgICAgIC8vIGRhdGVPYmpbJ2VuZFRpbWUnXSA9IHllYXIgKyAnLScgKyBtb250aCArICctJyArIGRheTtcclxuICAgICAgICBsZXQgZW5kTW9udGggPSBtb250aCA8IDEwID8gJzAnICttb250aCA6IG1vbnRoO1xyXG4gICAgICAgIGxldCBlbmREYXkgPSBkYXkgPCAxMCA/ICcwJyArZGF5IDogZGF5O1xyXG4gICAgICAgIGlmKHR5cGUgPT0gJzInKXtcclxuICAgICAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhciArICctJyArIGVuZE1vbnRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gJzMnKXtcclxuICAgICAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgZGF0ZU9ialsnZW5kVGltZSddID0geWVhciArICctJyArIGVuZE1vbnRoICsgJy0nICsgZW5kRGF5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAgIGxldCBub3dNb250aERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7ICAgIC8v5b2T5YmN5pyI55qE5oC75aSp5pWwXHJcbiAgICAgICAgbGV0IGRZZWFyLGRNb3V0aCxkRGF5O1xyXG4gICAgICAgIGlmKG1vbnRoIC0gbnVtIDw9IDApeyAvL+WmguaenOaYrzHjgIEy44CBM+aciO+8jOW5tOaVsOW+gOWJjeaOqOS4gOW5tFxyXG4gICAgICAgICAgICBsZXQgbGFzdE1vbnRoRGF5ID0gbmV3IERhdGUoKHllYXIgLSAxKSwgKDEyIC0gKG51bSAtIG1vbnRoKSksIDApLmdldERhdGUoKTsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWwXHJcbiAgICAgICAgICAgIGlmKGxhc3RNb250aERheSA8IGRheSl7ICAgIC8vM+S4quaciOWJjeaJgOWcqOaciOeahOaAu+WkqeaVsOWwj+S6jueOsOWcqOeahOWkqeaXpeacn1xyXG4gICAgICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSAoeWVhciAtIDEpICsgJy0nICsgKDEyIC0gKG51bSAtIG1vbnRoKSkgKyAnLScgKyBsYXN0TW9udGhEYXk7XHJcbiAgICAgICAgICAgICAgICBkWWVhciA9IHllYXIgLSAxO1xyXG4gICAgICAgICAgICAgICAgZE1vdXRoID0gMTIgLSAobnVtIC0gbW9udGgpO1xyXG4gICAgICAgICAgICAgICAgZERheSA9IGxhc3RNb250aERheTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBkWWVhciA9IHllYXIgLSAxO1xyXG4gICAgICAgICAgICAgICAgZE1vdXRoID0gMTIgLSAobnVtIC0gbW9udGgpO1xyXG4gICAgICAgICAgICAgICAgZERheSA9IGRheTtcclxuICAgICAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddPSAoeWVhciAtIDEpICsgJy0nICsgKDEyIC0gKG51bSAtIG1vbnRoKSkgKyAnLScgKyBkYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbGV0IGxhc3RNb250aERheSA9IG5ldyBEYXRlKHllYXIsIChtb250aCAtIG51bSksIDApLmdldERhdGUoKTsgICAgLy8z5Liq5pyI5YmN5omA5Zyo5pyI55qE5oC75aSp5pWwXHJcbiAgICAgICAgICAgIGlmKGxhc3RNb250aERheSA8IGRheSl7ICAgIC8vM+S4quaciOWJjeaJgOWcqOaciOeahOaAu+WkqeaVsOWwj+S6jueOsOWcqOeahOWkqeaXpeacn1xyXG4gICAgICAgICAgICAgICAgaWYoZGF5IDwgbm93TW9udGhEYXkpeyAgICAgICAgLy/lvZPliY3lpKnml6XmnJ/lsI/kuo7lvZPliY3mnIjmgLvlpKnmlbAsMuaciOS7veavlOi+g+eJueauiueahOaciOS7vVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGVPYmpbJ3N0YXJ0VGltZSddID0geWVhciArICctJyArIChtb250aCAtIG51bSkgKyAnLScgKyAobGFzdE1vbnRoRGF5IC0gKG5vd01vbnRoRGF5IC0gZGF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZFllYXIgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIGRNb3V0aCA9IG1vbnRoIC0gbnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGREYXkgPSBsYXN0TW9udGhEYXkgLSAobm93TW9udGhEYXkgLSBkYXkpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZFllYXIgPSB5ZWFyO1xyXG4gICAgICAgICAgICAgICAgICAgIGRNb3V0aCA9IG1vbnRoIC0gbnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGREYXkgPSBsYXN0TW9udGhEYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSB5ZWFyICsgJy0nICsgKG1vbnRoIC0gbnVtKSArICctJyArIGxhc3RNb250aERheTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBkWWVhciA9IHllYXI7XHJcbiAgICAgICAgICAgICAgICBkTW91dGggPSBtb250aCAtIG51bTtcclxuICAgICAgICAgICAgICAgIGREYXkgPSBkYXk7XHJcbiAgICAgICAgICAgICAgICAvLyBkYXRlT2JqWydzdGFydFRpbWUnXSA9IHllYXIgKyAnLScgKyAobW9udGggLSBudW0pICsgJy0nICsgZGF5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRNb3V0aCA9IGRNb3V0aCA8IDEwID8gJzAnICtkTW91dGggOiBkTW91dGg7XHJcbiAgICAgICAgZERheSA9IGREYXkgPCAxMCA/ICcwJyArZERheSA6IGREYXk7XHJcbiAgICAgICAgaWYodHlwZSA9PSAnMicpe1xyXG4gICAgICAgICAgICBkYXRlT2JqWydzdGFydFRpbWUnXSA9IGRZZWFyICsgJy0nICsgZE1vdXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gJzMnKXtcclxuICAgICAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkWWVhcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgZGF0ZU9ialsnc3RhcnRUaW1lJ10gPSBkWWVhciArICctJyArIGRNb3V0aCArICctJyArIGREYXk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYoc2hvd3RpbWUpe1xyXG4gICAgICAgICAgICBkYXRlT2JqWydlbmRUaW1lJ10gPSBkYXRlT2JqWydlbmRUaW1lJ10gKyAnICcgKyB0aW1lO1xyXG4gICAgICAgICAgICBkYXRlT2JqWydzdGFydFRpbWUnXSA9IGRhdGVPYmpbJ3N0YXJ0VGltZSddICsgJyAnICsgdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGVPYmo7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByaXZhdGUgZ2V0VG9kYXkoZGF5VGFncyA9ICd0b2RheScsc2hvd3RpbWUpe1xyXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICBpZihkYXlUYWdzID09ICd0b2RheScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZUhlbHAuZm9ybWF0VG8obm93LCB0aGlzLmRhdGVGb3JtYXQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF5VGFncyA9PSAneWVzdGVyZGF5Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlSGVscC5mb3JtYXRUbyh0aGlzLmRhdGVIZWxwLnN1YkRheXMobm93LCAxKSwgdGhpcy5kYXRlRm9ybWF0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgbGV0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBsZXQgbW9udGggPSBub3cuZ2V0TW9udGgoKSArIDE7Ly8wLTEx6KGo56S6MS0xMuaciFxyXG4gICAgICAgIGxldCBkYXkgPSBub3cuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGxldCBob3VyID0gbm93LmdldEhvdXJzKCk7XHJcbiAgICAgICAgbGV0IG1pbiA9IG5vdy5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIG5ldyBEYXRlKCkuZ2V0TWludXRlcygpXHJcbiAgICAgICAgICAgIDpuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBsZXQgc2VjID0gbmV3IERhdGUoKS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIG5ldyBEYXRlKCkuZ2V0U2Vjb25kcygpXHJcbiAgICAgICAgICAgIDpuZXcgRGF0ZSgpLmdldFNlY29uZHMoKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gaG91ciArICc6JyArIG1pbiArICc6JyArIHNlYztcclxuICAgICAgICBsZXQgeWVzdGVyZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICB5ZXN0ZXJkYXkuc2V0VGltZShub3cuZ2V0VGltZSgpLTI0KjYwKjYwKjEwMDApO1xyXG4gICAgICAgIGxldCB5ZXN0ZXJkYXlPYmogPSB5ZXN0ZXJkYXkuZ2V0RnVsbFllYXIoKStcIi1cIiArICh5ZXN0ZXJkYXkuZ2V0TW9udGgoKSsxKSArIFwiLVwiICsgeWVzdGVyZGF5LmdldERhdGUoKTtcclxuICAgICAgICBsZXQgZGF0ZU9iaiA9IHllYXIgKyAnLScgKyBtb250aCArICctJyArIGRheTtcclxuICAgICAgICBpZihzaG93dGltZSl7XHJcbiAgICAgICAgICAgIGRhdGVPYmogPSBkYXRlT2JqICsgJyAnICsgdGltZTtcclxuICAgICAgICAgICAgeWVzdGVyZGF5T2JqID0geWVzdGVyZGF5T2JqICsgJyAnICsgdGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZGF5VGFncyA9PSAndG9kYXknKSByZXR1cm4gZGF0ZU9iajtcclxuICAgICAgICBlbHNlIGlmIChkYXlUYWdzID09ICd5ZXN0ZXJkYXknKSByZXR1cm4geWVzdGVyZGF5T2JqO1xyXG5cclxuICAgICAgICAqL1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59Il19