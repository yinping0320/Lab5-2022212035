{"version":3,"file":"farris-ui-search-box.js.map","sources":["ng://@farris/ui-search-box/lib/search-box.service.ts","ng://@farris/ui-search-box/lib/search-box.locale.ts","ng://@farris/ui-search-box/lib/search-box-base.ts","ng://@farris/ui-search-box/lib/search-box.component.ts","ng://@farris/ui-search-box/lib/search-fields/search-field-panel.component.ts","ng://@farris/ui-search-box/lib/search-fields/search-fields.component.ts","ng://@farris/ui-search-box/lib/search-fields/search-filed.directive.ts","ng://@farris/ui-search-box/lib/search-panel/search-panel.component.ts","ng://@farris/ui-search-box/lib/search-panel/search-panel.directive.ts","ng://@farris/ui-search-box/lib/search-panel/search-words.pipe.ts","ng://@farris/ui-search-box/lib/search-fields/editors/date/flexible-date.component.ts","ng://@farris/ui-search-box/lib/search-fields/editors/number/flexible-number.component.ts","ng://@farris/ui-search-box/lib/search-fields/editors/enum/search-editor-enum.component.ts","ng://@farris/ui-search-box/lib/search-fields/editors/boolean/search-editor-boolean.component.ts","ng://@farris/ui-search-box/lib/search-fields/can-clear-condition.pipe.ts","ng://@farris/ui-search-box/lib/search-box.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class SearchBoxService {\r\n\r\n  constructor() { }\r\n}\r\n","/** åè®¾ç½®ç¸å³å¤è¯­èµæº */\r\nexport const SEARCH_BOX_LOCALE = {\r\n    en: {\r\n        'searchbox': {\r\n            enterKeywords: 'Please enter keywords',\r\n            tips: 'Space can be used to represent \"or\" in input, and enter to search.',\r\n            contain: 'contain',\r\n            clear: 'Clear all conditions.',\r\n            cancel: 'Cancel',\r\n            ok: 'Ok',\r\n            removeFilter: 'Delete Condition',\r\n            anyFields: 'All',\r\n            relation: {\r\n                and: 'AND',\r\n                or: 'OR'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHS': {\r\n        'searchbox': {\r\n            enterKeywords: 'è¯·è¾å¥å³é®å­',\r\n            tips: 'è¾å¥ä¸­å¯ç¨ç©ºæ ¼ä»£è¡¨âæâï¼åè½¦å¯æç´¢',\r\n            contain: 'åå«',\r\n            clear: 'æ¸é¤ç­é',\r\n            cancel: 'åæ¶',\r\n            ok: 'ç¡®å®',\r\n            removeFilter: 'å é¤æ¡ä»¶',\r\n            anyFields: 'å¨é¨',\r\n            relation: {\r\n                and: 'å¹¶',\r\n                or: 'æ'\r\n            }\r\n        }\r\n    },\r\n    'zh-CHT': {\r\n        searchbox: {\r\n            enterKeywords: 'è«è¼¸å¥ééµå­',\r\n            tips: 'è¼¸å¥ä¸­å¯ç¨ç©ºæ ¼ä»£è¡¨âæâï¼åè»å¯æç´¢',\r\n            contain: 'åå«',\r\n            clear: 'æ¸é¤ç¯©é¸',\r\n            cancel: 'åæ¶',\r\n            ok: 'ç¢ºå®',\r\n            removeFilter: 'åªé¤æ¢ä»¶',\r\n            anyFields: 'å¨é¨',\r\n            relation: {\r\n                and: 'ä¸¦',\r\n                or: 'æ'\r\n            }\r\n        }\r\n    }\r\n}","import { ChangeDetectorRef, Directive, ElementRef, Injector, Optional, Renderer2 } from '@angular/core';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { LocaleService } from '@farris/ui-locale';\r\nimport { SEARCH_BOX_LOCALE } from './search-box.locale';\r\n\r\nexport class SearchBoxBase {\r\n\r\n    public commonUtils: CommonUtils = null;\r\n    public render: Renderer2;\r\n    public localeSer: LocaleService\r\n    constructor(public el: ElementRef, protected injector: Injector, @Optional() public overLayService: OverLayHiddenService, protected cd: ChangeDetectorRef) {\r\n        this.render = this.injector.get(Renderer2);\r\n\r\n        if (!overLayService) {\r\n            this.overLayService = new OverLayHiddenService();\r\n        }\r\n        this.localeSer = this.injector.get(LocaleService, null);\r\n        this.commonUtils = this.injector.get(CommonUtils, null);\r\n        \r\n        if (this.localeSer) {\r\n            this.localeSer.setLocaleData(SEARCH_BOX_LOCALE);\r\n        }\r\n    }\r\n\r\n    \r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, HostBinding, HostListener, Injector, Input, OnChanges, OnDestroy, OnInit, Optional, Output, Renderer2, SimpleChanges, ViewChild, ViewEncapsulation } from \"@angular/core\";\r\nimport { CommonUtils, OverLayHiddenService } from \"@farris/ui-common\";\r\nimport { InputGroupComponent } from \"@farris/ui-input-group\";\r\nimport { Compare, FilterCondition, FilterRelation } from \"@farris/ui-common/types\";\r\nimport { DisplayText, SearchField, SearchFieldValue } from \"./search-box.types\";\r\nimport { flatten } from 'lodash-es';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { BehaviorSubject, of } from \"rxjs\";\r\nimport { SearchBoxBase } from \"./search-box-base\";\r\n\r\n\r\nexport const SEARCH_BOX_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => SearchBoxComponent),\r\n    multi: true\r\n};\r\n@Component({\r\n    selector: \"farris-search-box\",\r\n    templateUrl: './search-box.component.html',\r\n    encapsulation: ViewEncapsulation.None,\r\n    providers: [\r\n        SEARCH_BOX_VALUE_ACCESSOR\r\n    ]\r\n})\r\nexport class SearchBoxComponent extends SearchBoxBase implements OnInit, OnChanges, ControlValueAccessor, AfterViewInit, OnDestroy {\r\n\r\n    @Input() fields: Array<SearchField> = [];\r\n    @Input() maxSearchFields = 5;\r\n    @Input() condition: Array<FilterCondition> = [];\r\n\r\n    /** å¯ç¨ ä»»æå­æ®µ */\r\n    @Input() useAnyField = true;\r\n    \r\n\r\n    @ViewChild('searchbox') container: ElementRef;\r\n    @ViewChild('tagInput') input: InputGroupComponent;\r\n\r\n\r\n    @ViewChild('searchbox2') shadowBox: ElementRef;\r\n    @ViewChild('tagInput2') input2: InputGroupComponent;\r\n\r\n\r\n    @Output() conditionChange = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n    @Output() escHandler = new EventEmitter();\r\n    /** å¯ç¨æ¼æµ®ï¼false: åå®¹ä¼æé«å®¹å¨ï¼ trueï¼åºå®é«åº¦26pxï¼ç¹å»ææ»è¿æ¶ï¼æ¾ç¤ºå®æ´åå®¹ï¼å¤±å»ç¦ç¹åï¼è¿ååºå®ç¶æ */\r\n    enableFloat = true;\r\n\r\n    displayTextList: Array<DisplayText> = [];\r\n    filterConditions: Array<SearchFieldValue> = [];\r\n\r\n    hiddenItemsCount$ = new BehaviorSubject(0);\r\n\r\n    constructor(el: ElementRef, injector: Injector, @Optional() overLayService: OverLayHiddenService, cd: ChangeDetectorRef) {\r\n       super(el, injector, overLayService, cd);\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        setTimeout(() => {\r\n            this.moveShadowToBody();\r\n        });\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.overLayService) {\r\n            this.overLayService.destory(this.shadowBox.nativeElement);\r\n            this.overLayService = null;\r\n        }\r\n\r\n        if (this.shadowBox) {\r\n            this.shadowBox.nativeElement.remove();\r\n        }\r\n\r\n        if (this['REMOVE_ITEM_TIMER']) {\r\n            clearTimeout(this['REMOVE_ITEM_TIMER']);\r\n            this['REMOVE_ITEM_TIMER'] = null;\r\n        }\r\n    }\r\n\r\n    onBlur($event) {\r\n        if (this.enableFloat) {\r\n            if (!this.input2.value) {\r\n                this.toggleShadowBox(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    onInputClick($event) {\r\n        if (this.enableFloat) {\r\n            this.toggleShadowBox();\r\n        }\r\n    }\r\n\r\n\r\n    onModelChange = (arr: any) => { };\r\n    onModelTouched = (arr: any) => { };\r\n\r\n    private filterChanged() {\r\n        const conditions = this.filterConditions.filter(n => n.code !== '*').map(\r\n            (n, i) => {\r\n                if (n.value.trim().indexOf(' ') > -1) {\r\n                    const searchKeys = Array.from(new Set(n.value.trim().split(' ').filter(n => n.trim())));\r\n                    return searchKeys.map((s, j) => {\r\n                        return {\r\n                            filterField: n.code,\r\n                            value: s,\r\n                            lbracket: j == 0? '(':  '',\r\n                            rbracket: j == searchKeys.length - 1 ? ')' : '',\r\n                            relation: j == searchKeys.length - 1 ? 1 : 2,\r\n                            compare: 6,\r\n                        }\r\n                    });\r\n                }\r\n                return {\r\n                    filterField: n.code,\r\n                    value: n.value,\r\n                    lbracket: '',\r\n                    rbracket: '',\r\n                    relation: i == this.filterConditions.length -1 ? 0 : 1,\r\n                    compare: 6,\r\n                }\r\n            }\r\n        );\r\n\r\n        let _conditions = [];\r\n        _conditions = this.expandStarFieldToAllFields().concat(flatten(conditions));\r\n        if (conditions && conditions.length) {\r\n            _conditions[_conditions.length - 1].relation = 0;\r\n        }\r\n        this.onModelChange(this.filterConditions);\r\n        this.onModelTouched(this.filterConditions);\r\n\r\n\r\n        if (!_conditions.length) {\r\n            this.conditionChange.emit(this.filterConditions);\r\n        } else {\r\n            this.conditionChange.emit(_conditions);\r\n        }\r\n    }\r\n\r\n    expandStarFieldToAllFields() {\r\n        const item = this.filterConditions.find(n => n.code === '*');\r\n        if (!item) {\r\n            return [];\r\n        }\r\n        const searchKeys = Array.from(new Set(item.value.trim().split(' ').filter(n => n.trim())));\r\n        const conditions = this.fields.filter(n => n.code !== '*').map((n: SearchField, i) => {\r\n            return searchKeys.map((s, j) => {\r\n                return {\r\n                    filterField: n.code,\r\n                    value: s,\r\n                    lbracket: '',\r\n                    rbracket: '',\r\n                    relation: FilterRelation.Or,\r\n                    compare: Compare.Like,\r\n                }\r\n            });\r\n        });\r\n\r\n        let _conditions = [];\r\n        if (conditions && conditions.length) {\r\n            _conditions = flatten(conditions)\r\n            _conditions[0].lbracket = '('\r\n            _conditions[_conditions.length - 1].rbracket = ')'\r\n            _conditions[_conditions.length - 1].relation = this.filterConditions.filter(n => n.code !=='*').length ? 1 : 0;\r\n        }\r\n\r\n        return _conditions;\r\n    }\r\n\r\n    private initDislayText(emit = true) {\r\n        const relationStr = this.localeSer.getValue('searchbox.relation.or');\r\n        this.displayTextList = this.filterConditions.map((t: any) => {\r\n            const n = {...t};\r\n            // .map(n => `â${n}â`)\r\n            const values =  n.value.trim().split(' ').filter(n => n.trim());\r\n            n.dislayText = n.name + 'ï¼' + values.join(` ${ relationStr } `);\r\n            n.displayHtml = n.name + 'ï¼' + values.join(`<span class=\"text-muted font-italic mx-1 or\">${relationStr}</span>`);\r\n            return n;\r\n        });\r\n\r\n        setTimeout(() => {\r\n            if (this.enableFloat) {\r\n                this.setHiddenCount();\r\n            }\r\n        });\r\n        this.cd.detectChanges();\r\n        if (emit) {\r\n            this.filterChanged();\r\n        }\r\n    }\r\n\r\n    select(searchData: any) {\r\n        const condition = this.filterConditions.find(n => n.code === searchData.code);\r\n        if (condition) {\r\n            condition.value = condition.value.trim() + ' ' + searchData.value;\r\n        } else {\r\n            this.filterConditions.push(searchData);\r\n        }\r\n        this.initDislayText();\r\n\r\n        this.input.value = '';\r\n    }\r\n\r\n    remove(field: string) {\r\n        this.filterConditions = this.filterConditions.filter(n => n.code !== field)\r\n        this.initDislayText(false);\r\n\r\n        this._emitFilterChanged();\r\n    }\r\n\r\n    private _emitFilterChanged() {\r\n        if (this['REMOVE_ITEM_TIMER']) {\r\n            clearTimeout(this['REMOVE_ITEM_TIMER']);\r\n        }\r\n\r\n        this['REMOVE_ITEM_TIMER'] = setTimeout(() => {\r\n            this.filterChanged();\r\n        }, 180);\r\n    }\r\n\r\n    onRemoveItem($event, item) {\r\n        $event.stopPropagation();\r\n        this.filterConditions = this.filterConditions.filter(n => n.code !== item.code);\r\n        this.initDislayText();\r\n        \r\n    }\r\n\r\n    clearConditions(emit = true) {\r\n        this.input.value = '';\r\n        this.displayTextList = [];\r\n        this.filterConditions = [];\r\n        this.setHiddenCount();\r\n        if (emit) {\r\n            this.conditionChange.emit([]);\r\n            this.clear.emit();\r\n        }\r\n    }\r\n\r\n    onSubmit($event) {\r\n        $event.stopPropagation();\r\n        this.input.value = '';\r\n        this.toggleShadowBox(false);\r\n        this._emitFilterChanged();\r\n    }\r\n\r\n    writeValue(obj: any): void {\r\n        let arr = obj;\r\n        if (!Array.isArray(obj)) {\r\n            arr = [];\r\n        }\r\n\r\n        this.filterConditions = arr;\r\n        this.initDislayText();\r\n    }\r\n\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n\r\n    setValue(arr: Array<SearchFieldValue>, emit = true) {\r\n        this.filterConditions = arr;\r\n        this.initDislayText(emit);\r\n    }\r\n\r\n    updateShadowBoxPosition({top, left, width} = {top: null, left: null, width: null}) {\r\n        if (!top && !left && !width) {\r\n            const e = this.el.nativeElement.getBoundingClientRect();\r\n            top = e.top;\r\n            left = e.left;\r\n            width = e.width;\r\n        }\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'left', left + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'top', top + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'width', width + 'px');\r\n\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'zIndex', this.commonUtils.getFloatingLayerIndex());\r\n    }\r\n\r\n    private moveShadowToBody() {\r\n        if (!this.enableFloat) {\r\n            return;\r\n        }\r\n        this.updateShadowBoxPosition();\r\n        document.body.append(this.shadowBox.nativeElement);\r\n\r\n        this.overLayService.registerMouseEvent(this.shadowBox.nativeElement, (e) => {\r\n            if (e.target && e.target.className.indexOf('search-box_delete-keys') > -1) {\r\n                return;\r\n            }\r\n\r\n            if (e.target === this.input2.textbox.nativeElement || !this.shadowBox || this.shadowBox.nativeElement.contains(e.target) || \r\n            e.target['closest']('.f-search-box-panel')) {\r\n                return;\r\n            }\r\n\r\n            this.toggleShadowBox(false);\r\n        });\r\n\r\n    }\r\n\r\n    toggleShadowBox(show = true) {\r\n        if (!this.enableFloat || ((!this.fields || !this.fields.length) && !this.useAnyField)) {\r\n            return;\r\n        }\r\n        if (show) {\r\n            this.updateShadowBoxPosition();\r\n            this.render.removeStyle(this.shadowBox.nativeElement, 'display');\r\n            this.container.nativeElement.style.visibility = 'hidden';\r\n            this.input2.focus();\r\n        } else {\r\n            this.container.nativeElement.style.visibility = 'visible';\r\n            this.render.setStyle(this.shadowBox.nativeElement, 'display', 'none');\r\n        }\r\n    }\r\n\r\n    onShadowBoxClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        if (this.enableFloat) {\r\n            this.input2.focus();\r\n        }\r\n    }\r\n\r\n    onResized($event) {\r\n        if (this.enableFloat) {\r\n            this.updateShadowBoxPosition($event);\r\n            setTimeout(() => {\r\n                this.setHiddenCount();\r\n                this.cd.detectChanges();\r\n            });\r\n        }\r\n    }\r\n\r\n    private setHiddenCount() {\r\n        let len = 0;\r\n        if (!this.displayTextList || !this.displayTextList.length) {\r\n            this.hiddenItemsCount$.next(len);\r\n            return;\r\n        }\r\n        const items = Array.from(this.container.nativeElement.querySelectorAll('span.search-tag-item'));\r\n        if (items && items.length) {\r\n            len = items.map((n: any) => {\r\n                return n.offsetTop;\r\n            }).filter(n => n > 20).length\r\n        }\r\n        this.hiddenItemsCount$.next(len);\r\n    }\r\n\r\n    onEsc($event) {\r\n        this.escHandler.emit($event);\r\n    }\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener, Injector, Input, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'farris-search-field-panel',\r\n    templateUrl: './search-field-panel.component.html'\r\n})\r\n\r\nexport class SearchFieldPanelComponent implements OnInit {\r\n\r\n    @Input() fieldOptions;\r\n\r\n    @ViewChild('btnSubmit') btnSubmit: ElementRef;\r\n\r\n    @Output() filterChange = new EventEmitter();\r\n    @Output() remove = new EventEmitter();\r\n\r\n    conditions = null;\r\n    elRef: ElementRef;\r\n    constructor(private injecotr: Injector, private cd: ChangeDetectorRef) {\r\n        this.elRef = this.injecotr.get(ElementRef, null);\r\n    }\r\n\r\n    ngOnInit() { }\r\n\r\n    onSearchValueChange($event) {\r\n        this.conditions = $event;\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onSubmitCondition($event) {\r\n        this.fieldOptions.value = this.conditions.value;\r\n        if (!this.fieldOptions.value.single) {\r\n            this.fieldOptions.value.value = null;\r\n        } else {\r\n            delete this.fieldOptions.value.begin;\r\n            delete this.fieldOptions.value.end;\r\n        }\r\n        this.filterChange.emit(this.conditions);\r\n    }\r\n\r\n    onRemoveSearchField($event: MouseEvent) {\r\n        this.remove.emit(this.fieldOptions);\r\n    }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, HostBinding, HostListener, \r\n    Injector, Input, OnChanges, OnDestroy, OnInit, Optional, Output, Renderer2, SimpleChanges, ViewChild, ViewEncapsulation } from \"@angular/core\";\r\nimport { OverLayHiddenService } from \"@farris/ui-common\";\r\nimport { Compare, FilterCondition, FilterRelation } from \"@farris/ui-common/types\";\r\nimport { DisplayText, SearchField, SearchFieldValue } from \"../search-box.types\";\r\nimport { flatten } from 'lodash-es';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { BehaviorSubject, of, Subject } from \"rxjs\";\r\nimport { SearchBoxBase } from \"../search-box-base\";\r\nimport { DateTimeHelperService } from \"@farris/ui-common/date\";\r\n\r\nexport const SEARCH_BOX_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => SearchFieldsComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-search-fields',\r\n    templateUrl: 'search-fields.component.html',\r\n    // styleUrls: [\r\n    //     `../searchbox-panel.scss`\r\n    // ],\r\n    encapsulation: ViewEncapsulation.None,\r\n    providers: [\r\n        SEARCH_BOX_VALUE_ACCESSOR\r\n    ]\r\n})\r\nexport class SearchFieldsComponent extends SearchBoxBase implements OnInit, OnChanges, ControlValueAccessor, AfterViewInit, OnDestroy {\r\n    @Input() fields: Array<SearchFieldValue> = [];\r\n    @Input() maxSearchFields = 5;\r\n    @Input() condition: Array<FilterCondition> = [];\r\n    /** å¤å­æ®µæ¥è¯¢ */\r\n    @Input() multi = true;\r\n    \r\n    @ViewChild('searchbox') container: ElementRef;\r\n    @ViewChild('searchbox2') shadowBox: ElementRef;\r\n    @ViewChild('tagContainer') tagContainerRef: ElementRef;\r\n\r\n    @Output() conditionChange = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n    /** å¯ç¨æ¼æµ®ï¼false: åå®¹ä¼æé«å®¹å¨ï¼ trueï¼åºå®é«åº¦26pxï¼ç¹å»ææ»è¿æ¶ï¼æ¾ç¤ºå®æ´åå®¹ï¼å¤±å»ç¦ç¹åï¼è¿ååºå®ç¶æ */\r\n    enableFloat = true;\r\n\r\n    displayTextList: Array<DisplayText> = [];\r\n    // filterConditions: Array<SearchFieldValue> = [];\r\n\r\n    moreStatus$ = new BehaviorSubject(false);\r\n\r\n    hideShadowbox = new Subject();\r\n\r\n    get hasFilter() {\r\n        return this.displayTextList && this.displayTextList.length ? this.displayTextList.filter((n: any) => n.hasFilter).length : false;\r\n    }\r\n\r\n    private showShadowBox = false;\r\n\r\n    constructor(el: ElementRef, injector: Injector, @Optional() overLayService: OverLayHiddenService, cd: ChangeDetectorRef, private dateHelp: DateTimeHelperService) {\r\n        super(el, injector, overLayService, cd);\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n        this.initDislayText(!!this.fields.filter((n: any) => n.value).length);\r\n\r\n        this.overLayService.registerMouseEvent(this.el.nativeElement, (e: any) => {\r\n            if (this.shadowBox && this.showShadowBox) {\r\n                if (this.shadowBox.nativeElement.contains(e.target)) {\r\n                    return;\r\n                }\r\n                if (e.target.closest('.f-search-field-container')) {\r\n                    return;\r\n                }\r\n\r\n                if (e.target.closest('.date-overlay-container') || e.target.className.indexOf('date-overlay-container') > -1) {\r\n                    return;\r\n                }\r\n\r\n                this.toggleShadowBox(false);\r\n                this.hideShadowbox.next(e);\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        setTimeout(() => {\r\n            this.moveShadowToBody();\r\n        });\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n       \r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.overLayService) {\r\n            this.overLayService = null;\r\n        }\r\n\r\n        if (this.shadowBox) {\r\n            this.shadowBox.nativeElement.remove();\r\n        }\r\n    }\r\n\r\n\r\n    onModelChange = (arr: any) => { };\r\n    onModelTouched = (arr: any) => { };\r\n\r\n    private filterChanged() {\r\n        const conditions = this.fields.filter((n: any) => n.value).map((n: any) => {\r\n            const { value, begin, end } = n.value;\r\n\r\n            if (value != null && value !== undefined && n.control.single) {\r\n                if (n.control.controltype === 'datetime') {\r\n                    return [{\r\n                        filterField: n.code,\r\n                        value,\r\n                        lbracket: '(',\r\n                        rbracket:  '',\r\n                        relation: FilterRelation.And,\r\n                        compare: Compare.GreaterOrEqual\r\n                    },\r\n                    {\r\n                        filterField: n.code,\r\n                        value: this.dateHelp.formatTo(this.dateHelp.addDays(new Date(value), 1), n.control.dateFormat),\r\n                        lbracket: '',\r\n                        rbracket:  ')',\r\n                        relation: FilterRelation.And,\r\n                        compare: Compare.Less\r\n                    }]\r\n                } else if (n.control.controltype === 'enum' && Array.isArray(value)) {\r\n                    return value.map((e, i) => {\r\n                        return {\r\n                            filterField: n.code,\r\n                            value: e,\r\n                            lbracket: i?'': '(',\r\n                            rbracket:  i == value.length -1 ? ')' : '',\r\n                            relation: i == value.length -1 ? FilterRelation.And: FilterRelation.Or,\r\n                            compare: Compare.Equal\r\n                        }\r\n                    });\r\n                }\r\n                return {\r\n                    filterField: n.code,\r\n                    value: Array.isArray(value) ? value.join(',') : value,\r\n                    lbracket: '',\r\n                    rbracket:  '',\r\n                    relation: FilterRelation.And,\r\n                    compare: Array.isArray(value) ?  Compare.In: Compare.Equal\r\n                }\r\n            } else {\r\n                if (begin !== '' && begin!=null && begin != undefined && end !=='' && end !=null && end != undefined) {\r\n                    return [\r\n                        {\r\n                            filterField: n.code,\r\n                            value: begin,\r\n                            lbracket: '(',\r\n                            rbracket:  '',\r\n                            relation: FilterRelation.And,\r\n                            compare: Compare.GreaterOrEqual\r\n                        },\r\n                        {\r\n                            filterField: n.code,\r\n                            value: end,\r\n                            lbracket: '',\r\n                            rbracket:  ')',\r\n                            relation: FilterRelation.And,\r\n                            compare: Compare.LessOrEqual\r\n                        }\r\n                    ]\r\n                } else {\r\n                    if (begin !== '' && begin!=null && begin != undefined) {\r\n                        return {\r\n                            filterField: n.code,\r\n                            value: begin,\r\n                            lbracket: '',\r\n                            rbracket:  '',\r\n                            relation: FilterRelation.And,\r\n                            compare: Compare.GreaterOrEqual\r\n                        }\r\n                    }\r\n\r\n                    if (end !=='' && end !=null && end != undefined) {\r\n                        return {\r\n                            filterField: n.code,\r\n                            value: end,\r\n                            lbracket: '',\r\n                            rbracket:  '',\r\n                            relation: FilterRelation.And,\r\n                            compare: Compare.LessOrEqual\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            }\r\n        }).filter(n => n);\r\n\r\n        let _conditions: Array<FilterCondition> = [];\r\n        if (conditions && conditions.length) {\r\n            _conditions = flatten(conditions)\r\n            _conditions[_conditions.length - 1].relation = FilterRelation.Empty;\r\n        }\r\n        this.onModelChange(this.fields);\r\n        this.onModelTouched(this.fields);\r\n        this.conditionChange.emit(_conditions);\r\n    }\r\n\r\n    setConditions(condition: any) {\r\n        const field: any = this.fields.find(n => n.code === condition.field);\r\n        field.value = condition.value;\r\n        field.control.single = condition.value.single;\r\n\r\n        this.initDislayText();\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n\r\n    private initDislayText(emit = true) {\r\n        this.displayTextList = this.fields.map((t: any) => {\r\n            const n = {...t};\r\n            n.dislayText = n.name;\r\n            n.hasFilter = false;\r\n            if (n.value) {\r\n                const {value, begin, end} =  n.value;\r\n                let val = value;\r\n\r\n                if (t.control && t.control.enumValues && t.control.enumValues.length) {\r\n                    if (!Array.isArray(val)) {\r\n                        val = [val];\r\n                    }\r\n                    val = val.map(n => {\r\n                        const d = t.control.enumValues.find(e => e.value === n);\r\n                        if (d) {\r\n                            return d.name;\r\n                        }\r\n                        return n;\r\n                    }).join(',');\r\n                } else {\r\n                    if (begin !== null && begin !== undefined) {\r\n                        val = begin;\r\n                    }\r\n                    if (end !== null && end !== undefined) {\r\n                        if (val != null) {\r\n                            val += '~' + end;\r\n                        } else {\r\n                            val = end;\r\n                        }\r\n                    }\r\n                }\r\n                n.dislayText += 'ï¼' + val;\r\n                n.hasFilter = true;\r\n            }\r\n            return n;\r\n        });\r\n\r\n        this.setMoreStatus();\r\n        \r\n        if (emit) {\r\n            this.filterChanged();\r\n        }\r\n    }\r\n\r\n    remove(field: string) {\r\n        const searchField = this.fields.find(n => n.code === field);\r\n        if (searchField) {\r\n            searchField.value = null;\r\n            this.initDislayText();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onRemoveItem($event, item) {\r\n        if (item.value!== null && item.value != undefined && item.value !== '') {\r\n            $event.stopPropagation();\r\n            this.remove(item.code);\r\n        }\r\n    }\r\n\r\n    clearConditions(emit = true) {\r\n        this.fields.forEach(n => n.value = null);\r\n        this.initDislayText(emit);\r\n        if (emit) {\r\n            this.clear.emit();\r\n        }\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    writeValue(obj: any): void {\r\n        let arr = obj;\r\n        if (!Array.isArray(obj)) {\r\n            arr = [];\r\n        }\r\n\r\n        this.fields = arr;\r\n        this.initDislayText();\r\n    }\r\n\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n\r\n    setValue(arr: Array<SearchFieldValue>) {\r\n        // this.filterConditions = arr;\r\n        // this.initDislayText();\r\n    }\r\n\r\n    updateShadowBoxPosition({top, left, width} = {top: null, left: null, width: null}) {\r\n        if (!top && !left && !width) {\r\n            const e = this.el.nativeElement.getBoundingClientRect();\r\n            top = e.top;\r\n            left = e.left;\r\n            width = e.width;\r\n        }\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'left', left + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'top', top + 'px');\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'width', width + 'px');\r\n\r\n        this.render.setStyle(this.shadowBox.nativeElement, 'zIndex', this.commonUtils.getFloatingLayerIndex());\r\n    }\r\n\r\n    private moveShadowToBody() {\r\n        if (!this.enableFloat) {\r\n            return;\r\n        }\r\n\r\n        this.updateShadowBoxPosition()\r\n        document.body.append(this.shadowBox.nativeElement);\r\n    }\r\n\r\n    toggleShadowBox(show = true, el = null) {\r\n        if (!this.enableFloat) {\r\n            return;\r\n        }\r\n\r\n        if (el && el.clientHeight <= 30) {\r\n            return;\r\n        }\r\n\r\n        this.showShadowBox = show;\r\n        if (show) {\r\n            this.updateShadowBoxPosition();\r\n            this.render.removeStyle(this.shadowBox.nativeElement, 'display');\r\n            this.container.nativeElement.style.visibility = 'hidden';\r\n            this.render.addClass(this.shadowBox.nativeElement, 'active');\r\n        } else {\r\n            this.container.nativeElement.style.visibility = 'visible';\r\n            this.render.setStyle(this.shadowBox.nativeElement, 'display', 'none');\r\n            this.render.removeClass(this.shadowBox.nativeElement, 'active');\r\n        }\r\n    }\r\n\r\n\r\n    onResized($event) {\r\n        if (this.enableFloat) {\r\n            this.updateShadowBoxPosition($event);\r\n            this.setMoreStatus();\r\n        }\r\n    }\r\n\r\n    private setMoreStatus() {\r\n        if (this.enableFloat) {\r\n            setTimeout(() => {\r\n                const r = this.tagContainerRef.nativeElement.clientHeight > 30;\r\n                this.moreStatus$.next(r);\r\n                this.cd.detectChanges();\r\n            });\r\n        }\r\n    }\r\n}","import { AfterViewInit, ApplicationRef, ComponentFactoryResolver, Directive, ElementRef, HostListener, Injector, Input, NgZone, OnDestroy, OnInit, Renderer2 } from '@angular/core';\r\nimport { debounceTime } from 'rxjs/operators';\r\nimport { SearchFieldValue } from '../search-box.types';\r\nimport { SearchFieldPanelComponent } from './search-field-panel.component';\r\nimport { SearchFieldsComponent } from './search-fields.component';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n\r\n@Directive({ selector: '[search-field]' })\r\nexport class SearchFieldDirective implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n    @Input('search-field') field: SearchFieldValue;\r\n\r\n\r\n    private panelElement: HTMLElement;\r\n    private winResizeHandle = null;\r\n    private docKeydownEventHandle = null;\r\n    private commonUtils = null;\r\n\r\n    constructor(private injector: Injector, private elRef: ElementRef,\r\n        private ngzone: NgZone, private render: Renderer2, \r\n        private cfr: ComponentFactoryResolver, private searchFieldsRef: SearchFieldsComponent, private _applicationRef: ApplicationRef) {\r\n            this.commonUtils = this.injector.get(CommonUtils, new CommonUtils())\r\n        }\r\n\r\n\r\n    ngOnInit(): void {\r\n        if (this.searchFieldsRef) {\r\n            this.searchFieldsRef.hideShadowbox.subscribe((e: any) => {\r\n                this.removeFieldPanel();\r\n            });\r\n        }\r\n\r\n        this.winResizeHandle = this.render.listen(window, 'resize', () => {\r\n            this.removeFieldPanel();            \r\n        })\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        \r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.removeFieldPanel();\r\n\r\n        if (this.winResizeHandle) {\r\n            this.winResizeHandle();\r\n        }\r\n    }\r\n\r\n    @HostListener('mousedown', ['$event'])\r\n    onMouseDown($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onFieldClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        if (!this.panelElement) {\r\n            this.createFieldPanel();\r\n        } else {\r\n            this.removeFieldPanel();\r\n        }\r\n    }\r\n\r\n    private removeFieldPanel() {\r\n        if (this.panelElement) {\r\n            this.panelElement.remove();\r\n            this.panelElement = null;\r\n\r\n            this.searchFieldsRef.overLayService.destory(this.elRef.nativeElement);\r\n\r\n            this.render.removeClass(this.elRef.nativeElement, 'selected');\r\n        }\r\n\r\n        if (this.docKeydownEventHandle) {\r\n            this.docKeydownEventHandle();\r\n            this.docKeydownEventHandle = null;\r\n        }\r\n    }\r\n\r\n    private registerKeyboardEvent(enterFn?: () => void) {\r\n        if (this.commonUtils) {\r\n            return this.commonUtils.regBodyKeydownEvent(enterFn, () => {this.removeFieldPanel();});\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private createFieldPanel() {\r\n        this.panelElement = document.createElement('div');\r\n        this.panelElement.classList.add('overlay-pane','f-filter-panel', 'f-area-hide', 'f-search-field-container');\r\n        const zindex  = '' + this.searchFieldsRef.commonUtils.getFloatingLayerIndex();\r\n        this.panelElement.style.zIndex = zindex;\r\n        \r\n        document.body.appendChild(this.panelElement);\r\n        this.setPanelPosition();\r\n\r\n        const fieldPanelRef = this.cfr.resolveComponentFactory(SearchFieldPanelComponent);\r\n        const _fieldPanelIns = fieldPanelRef.create(this.injector);\r\n        this._applicationRef.attachView(_fieldPanelIns.hostView);\r\n        \r\n        _fieldPanelIns.instance.fieldOptions = this.field;\r\n        _fieldPanelIns.instance.conditions = { field: this.field.code, value: this.field.value }\r\n\r\n        this.panelElement.appendChild(_fieldPanelIns.location.nativeElement);\r\n        this.panelElement.classList.add('f-area-show');\r\n\r\n        _fieldPanelIns.instance.filterChange.pipe(\r\n            debounceTime(100)\r\n        ).subscribe((e: any) => {\r\n            // æ°çæ¥è¯¢æ¡ä»¶\r\n            // console.log(e);\r\n            this.searchFieldsRef.setConditions(e);\r\n        })\r\n\r\n        _fieldPanelIns.instance.remove.subscribe(e => {\r\n            this.searchFieldsRef.remove(e.code);\r\n        });\r\n\r\n        _fieldPanelIns.changeDetectorRef.detectChanges();\r\n\r\n        this.searchFieldsRef.overLayService.registerMouseEvent(this.elRef.nativeElement, (e: any) => {\r\n            if (this.elRef.nativeElement.contains(e.target)) {\r\n                return;\r\n            }\r\n\r\n            if (e.target.closest('.f-search-field-container')) {\r\n                if (e.target.nodeName === 'BUTTON' && e.target.className.indexOf('close-field-panel') > -1) {\r\n                    this.removeFieldPanel();\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (e.target.closest('.date-overlay-container') || e.target.className.indexOf('date-overlay-container') > -1) {\r\n                return;\r\n            }\r\n\r\n            this.removeFieldPanel();\r\n        });\r\n\r\n\r\n        this.render.addClass(this.elRef.nativeElement, 'selected');\r\n\r\n        // å¤ç ESCãENTER\r\n        this.docKeydownEventHandle = this.registerKeyboardEvent(() => \r\n        {\r\n            const btnok = _fieldPanelIns.instance.btnSubmit;\r\n            if (btnok && !btnok.nativeElement.disabled ) {\r\n                btnok.nativeElement.click();\r\n                this.removeFieldPanel();\r\n            }        \r\n        });\r\n    }\r\n\r\n    private setPanelPosition(updateTopPosition = true) {\r\n        if (this.panelElement) {\r\n            const { width, left, top, height } = this.getPanelSize();\r\n            this.panelElement.style.width = `${width}px`;\r\n            // this.panelElement.style.maxHeight = `${height}px`;\r\n            if (updateTopPosition) {\r\n                this.panelElement.style.top = `${top}px`;\r\n            }\r\n            this.panelElement.style.left = `${left}px`;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    private getInputSizeInfo() {\r\n        return this.elRef.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n    private getPanelSize() {\r\n        const width = 380;\r\n        let { top, left, height } = this.getInputSizeInfo();\r\n        const bottom = window.innerHeight - height - top;\r\n        let panelHeight = 190;\r\n        const h = top > bottom ? top : bottom;\r\n        if (bottom > panelHeight) {\r\n            top = top + height;\r\n            // é¢æ¿ç±ä¸åä¸å±å¼\r\n            this.panelElement.style.transformOrigin = '100% top';\r\n        } else {\r\n            if (top > bottom) {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                    top = 10;\r\n                } else {\r\n                    top = top - parseInt('' + panelHeight, 10) - 5;\r\n                }\r\n\r\n                // é¢æ¿ç±ä¸åä¸å±å¼\r\n                this.panelElement.style.transformOrigin = '100% bottom';\r\n\r\n            } else {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                }\r\n                top = top + height;\r\n            }\r\n        }\r\n\r\n        if (window.innerWidth - left < width) {\r\n            left = left + width - width;\r\n        }\r\n\r\n        return { width, top, height: panelHeight, left };\r\n    }\r\n}","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, HostListener, Injector, Input, OnInit, Output, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { SearchField } from '../search-box.types';\r\n\r\n@Component({\r\n    selector: 'search-panel',\r\n    templateUrl: './search-panel.component.html',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class SearchPanelComponent implements OnInit {\r\n\r\n    @Input() fields: Array<SearchField> = [];\r\n    @Input() maxItems = 5;\r\n    @Input() searchKeyWord = '';\r\n\r\n    @Output() itemClick = new EventEmitter();\r\n    @Output() closepanel = new EventEmitter();\r\n    @Output() mouseDown = new EventEmitter();\r\n\r\n    @ViewChild('itemsContainer') itemsContainer: ElementRef<any>;\r\n\r\n    activeIndex = -1;\r\n\r\n    constructor(private injector: Injector, private cdr: ChangeDetectorRef) { }\r\n\r\n    @HostListener('mousedown', ['$event'])\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n    }\r\n\r\n    ngOnInit() { }\r\n\r\n    loadData(items: any) {\r\n        this.fields = items;\r\n\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    onFieldItemClick($event, item) {\r\n        $event.preventDefault();\r\n        this.itemClick.emit({data: item, evnet: $event});\r\n    }\r\n\r\n    setActiveItem(index: number) {\r\n        this.activeIndex = index;\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    setValue(val) {\r\n        this.searchKeyWord = val;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    onClosePanel($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.closepanel.emit();\r\n    }\r\n\r\n    onMouseDown($event: MouseEvent) {\r\n        $event.preventDefault();\r\n        $event.stopPropagation();\r\n\r\n        this.mouseDown.emit($event);\r\n    }\r\n}","import { AfterViewInit, ComponentFactoryResolver, ComponentRef, Directive, ElementRef, EventEmitter, forwardRef, \r\n    HostListener, Injector, Input, NgZone, OnDestroy, OnInit, Optional, Output, Renderer2 } from '@angular/core';\r\nimport { reqAnimFrame } from '@farris/ui-common';\r\nimport { InputGroupComponent } from '@farris/ui-input-group';\r\nimport { from, fromEvent, Observable } from 'rxjs';\r\nimport { debounceTime, filter, map } from 'rxjs/operators';\r\nimport { SearchBoxComponent } from '../search-box.component';\r\nimport { SearchField } from '../search-box.types';\r\nimport { trim } from 'lodash-es';\r\nimport { SearchPanelComponent } from './search-panel.component';\r\n\r\n@Directive({ selector: '[search-box-panel]'})\r\nexport class SearchPanelDirective implements OnInit, AfterViewInit, OnDestroy {\r\n    @Input('search-box-panel') fields: Array<SearchField>;\r\n    @Input() maxFields = 5;\r\n\r\n    /** å¯ç¨ ä»»æå­æ®µ */\r\n    @Input() useAnyField = true;\r\n\r\n    @Output() escHandler = new EventEmitter();\r\n\r\n    private panelElement: HTMLElement;\r\n    private searchPanelRef: ComponentRef<SearchPanelComponent>;\r\n\r\n    private maxPanelItems = 10;\r\n    private minPanelWidth = 270;\r\n\r\n    constructor(private injector: Injector, \r\n        private ngzone: NgZone,\r\n        private render: Renderer2, \r\n        private inputRef: InputGroupComponent,\r\n        private searchBoxRef: SearchBoxComponent,\r\n        private cfr: ComponentFactoryResolver) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        \r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if ((!this.fields || !this.fields.length) && !this.useAnyField) {\r\n            return;\r\n        }\r\n\r\n        this.inputRef.inputClick.subscribe((e: MouseEvent) => {\r\n            e.stopPropagation();\r\n        });\r\n\r\n        this.inputRef.valueChange.pipe(\r\n            debounceTime(50)\r\n        ).subscribe((val: string) => {\r\n           \r\n            if (trim(val)) {\r\n                // å¼ååæ¾ç¤ºæ¥è¯¢é¢æ¿\r\n                if (!this.panelElement) {\r\n                    this.createDataPanel();\r\n                    this.searchPanelRef.instance.setActiveItem(0);\r\n                }\r\n\r\n                this.searchPanelRef.instance.setValue(val);\r\n            } else {\r\n                if (this.panelElement) {\r\n                    this.hide();\r\n                }\r\n            }\r\n            \r\n        });\r\n\r\n        this.searchBoxRef.clear.subscribe(() => {\r\n            this.hide();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.searchBoxRef.overLayService.destory(this.searchBoxRef.el.nativeElement);\r\n    }\r\n\r\n    private removePanelElement() {\r\n        document.body.removeChild(this.panelElement);\r\n        this.panelElement = null;\r\n\r\n        if (this.searchPanelRef) {\r\n            this.searchPanelRef.destroy();\r\n            this.searchPanelRef = null;\r\n        }\r\n    }\r\n\r\n\r\n    hide(e?: any) {\r\n        reqAnimFrame(() => {\r\n            this.inputRef.value = '';\r\n            if (this.panelElement) {\r\n                if (e && ( e.type === 'mousewheel' || e.type === 'wheel')) {\r\n                    this.removePanelElement();\r\n                } else {\r\n                    this.panelElement.classList.remove('f-area-show');\r\n                    setTimeout(() => {\r\n                        this.removePanelElement();\r\n                    },120);\r\n                }\r\n                \r\n                this.searchBoxRef.overLayService.destory(this.searchBoxRef.el.nativeElement);\r\n            }\r\n        });\r\n    }\r\n\r\n    private setPanelPosition(updateTopPosition = true) {\r\n        if (this.panelElement) {\r\n            const { maxWidth, left, top, height } = this.getPanelSize();\r\n            this.panelElement.style.minWidth = `${this.minPanelWidth}px`;\r\n            this.panelElement.style.maxWidth = `${maxWidth}px`;\r\n            this.panelElement.style.maxHeight = `${height}px`;\r\n            if (updateTopPosition) {\r\n                this.panelElement.style.top = `${top}px`;\r\n            }\r\n            this.panelElement.style.left = `${left}px`;\r\n        }\r\n    }\r\n\r\n    private createDataPanel() {\r\n        this.panelElement = document.createElement('div');\r\n        this.panelElement.classList.add('overlay-pane', 'f-search-box-panel', 'f-area-hide');\r\n        const zindex  = '' + this.searchBoxRef.commonUtils.getFloatingLayerIndex();\r\n        document.body.appendChild(this.panelElement);\r\n        this.setPanelPosition();\r\n        this.panelElement.style.zIndex = zindex;\r\n\r\n\r\n        this.panelElement.style.overflow = 'hidden';\r\n        \r\n        // åå»ºæ°æ®å±ç¤ºç»ä»¶\r\n        const cmpFact = this.cfr.resolveComponentFactory(SearchPanelComponent);\r\n        this.searchPanelRef = cmpFact.create(this.injector);\r\n\r\n        if (this.useAnyField && !this.fields.find(n => n.code === '*')) {\r\n            const anyfieldsName = this.searchBoxRef.localeSer.getValue('searchbox.anyFields')\r\n            this.fields.splice(0,0, { code: '*', name: anyfieldsName });\r\n        }\r\n\r\n        this.searchPanelRef.instance.fields = this.fields;\r\n\r\n        this.panelElement.appendChild(this.searchPanelRef.location.nativeElement);\r\n\r\n        this.searchPanelRef.changeDetectorRef.detectChanges();\r\n\r\n        this.searchPanelRef.instance.searchKeyWord = this.inputRef.value;\r\n        \r\n\r\n        this.searchPanelRef.instance.itemClick.subscribe((e: any) => {\r\n            const { data } = e;\r\n            this.selectItem(data);\r\n        });\r\n\r\n        this.searchPanelRef.instance.closepanel.subscribe(() => {\r\n            this.hide();\r\n        });\r\n\r\n        // æ³¨åé¼ æ æ»è½®ï¼ç¹å»äºä»¶ï¼ç¨äºéèPanel\r\n        this.searchBoxRef.overLayService.registerMouseEvent(this.searchBoxRef.el.nativeElement, (e: MouseEvent) => {\r\n            if (!this.panelElement || e.target['closest']('.f-search-box-panel')) {\r\n                return;\r\n            }\r\n\r\n            if(this.inputRef && this.inputRef.textbox.nativeElement === e.target) {\r\n                return false;\r\n            }\r\n\r\n            // è¾å¥æ¡åæææ¬æ¶ï¼å¦æä¸åè®¸å³é­å¼¹åºé¢æ¿ï¼å¯æ¾å¼\r\n            // if (this.inputRef.value) {\r\n            //     return;\r\n            // }\r\n\r\n            this.hide(e);\r\n        });\r\n\r\n\r\n        if ( this.searchPanelRef.instance.fields.length + 1 < this.maxPanelItems) {\r\n            let newHeight = this.searchPanelRef.instance.itemsContainer.nativeElement.querySelector('ul').offsetHeight + 40;\r\n\r\n            this.searchPanelRef.instance.itemsContainer.nativeElement.style.height = `${newHeight}px`;\r\n            if (this.panelElement) {\r\n                if (this.panelElement.style.transformOrigin.indexOf('bottom') > -1) {\r\n                    this.panelElement.style.top = `${this.getInputSizeInfo().top - newHeight - 5}px` ;\r\n                }\r\n                this.panelElement.style.height = 'auto';\r\n            }\r\n        } else {\r\n            this.searchPanelRef.instance.itemsContainer.nativeElement.style.height = '100%';\r\n            if (this.panelElement) {\r\n                this.render.removeStyle(this.panelElement, 'height');\r\n            }\r\n        }\r\n\r\n        this.panelElement.classList.add('f-area-show');\r\n    }\r\n\r\n    private selectItem(data: any) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        this.searchBoxRef.select({...data, value: this.inputRef.value});\r\n        this.hide();\r\n\r\n        this.inputRef.focus();\r\n    }\r\n\r\n\r\n    private calculationPanelHeight() {\r\n        return this.maxPanelItems * 30 + 15;\r\n    }\r\n\r\n    private getInputSizeInfo() {\r\n        const el = this.searchBoxRef.enableFloat ? this.searchBoxRef.shadowBox: this.searchBoxRef.container;\r\n        return el.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n    private getPanelSize() {\r\n        let { width, height, top, left } = this.getInputSizeInfo();\r\n        const bottom = window.innerHeight - height - top;\r\n        let panelHeight = this.calculationPanelHeight();\r\n\r\n        const h = top > bottom ? top : bottom;\r\n        if (bottom > panelHeight) {\r\n            top = top + height;\r\n            // é¢æ¿ç±ä¸åä¸å±å¼\r\n            this.panelElement.style.transformOrigin = '100% top';\r\n        } else {\r\n            if (top > bottom) {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                    top = 10;\r\n                } else {\r\n                    top = top - parseInt('' + panelHeight, 10) - 5;\r\n                }\r\n\r\n                // é¢æ¿ç±ä¸åä¸å±å¼\r\n                this.panelElement.style.transformOrigin = '100% bottom';\r\n\r\n            } else {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                }\r\n                top = top + height;\r\n            }\r\n        }\r\n\r\n        let _width =  width < this.minPanelWidth? this.minPanelWidth: width;\r\n        if (window.innerWidth - left < _width) {\r\n            left = left + width - _width;\r\n        }\r\n\r\n        return { width: _width, top, height: panelHeight, left, maxWidth: Math.floor(window.innerWidth - left - 10) };\r\n    }\r\n\r\n\r\n    @HostListener('keydown', ['$event'])\r\n    registerKeyboardEvent($event: KeyboardEvent) {\r\n        const rows = this.fields;\r\n        if ($event.code === 'ArrowUp' || $event.code === 'ArrowDown') {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n\r\n            if (this.searchPanelRef) {\r\n                const idx = this.searchPanelRef.instance.activeIndex;\r\n                const setActiveItem = (index) => {\r\n                    this.searchPanelRef.instance.setActiveItem(index);\r\n                };\r\n\r\n                if ($event.code === 'ArrowUp') {  // up\r\n                    if (idx > -1) {\r\n                        let prevIdx = idx - 1;\r\n                        if (prevIdx < 0) {\r\n                            prevIdx = rows.length - 1;\r\n                        }\r\n                        setActiveItem(prevIdx);\r\n                    } else {\r\n                        setActiveItem(rows.length - 1);\r\n                    }\r\n                }\r\n                if ($event.code === 'ArrowDown') { // down\r\n                    let nextIdx = idx + 1;\r\n                    if (nextIdx >= rows.length) {\r\n                        nextIdx = 0;\r\n                    }\r\n\r\n                    setActiveItem(nextIdx);\r\n                }\r\n            }\r\n        }\r\n\r\n        if ($event.code === 'Backspace') {\r\n            if (!this.inputRef.value) {\r\n                if (this.searchBoxRef.displayTextList &&  this.searchBoxRef.displayTextList.length) {\r\n                    $event.preventDefault();\r\n                    $event.stopPropagation();\r\n                    const removeItem = this.searchBoxRef.displayTextList[this.searchBoxRef.displayTextList.length -1];\r\n                    if (removeItem) {\r\n                        this.searchBoxRef.remove(removeItem.code);\r\n                        if (this.searchPanelRef) {\r\n                            this.searchPanelRef.changeDetectorRef.detectChanges();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if($event.key === 'Enter') {\r\n            if (rows && rows.length && this.panelElement) {\r\n                const idx = this.searchPanelRef.instance.activeIndex;\r\n                const data = rows[idx];\r\n                this.selectItem(data);\r\n            } else {\r\n                this.searchBoxRef.onSubmit($event);\r\n            }\r\n        }\r\n\r\n        if($event.key === 'Escape') {\r\n            if (this.panelElement) {\r\n                this.hide();\r\n            } else {\r\n                this.escHandler.emit();\r\n            }\r\n        }\r\n    }\r\n}","import { Injector, Pipe, PipeTransform } from '@angular/core';\r\nimport { SearchBoxComponent } from '../search-box.component';\r\n\r\n@Pipe({\r\n    name: 'searchwords'\r\n})\r\n\r\nexport class SearchWordPipe implements PipeTransform {\r\n\r\n    constructor(private injector: Injector,  private searchBoxRef: SearchBoxComponent,) {}\r\n\r\n    transform(value: any, ...args: any[]): any {\r\n        if (value !== undefined && value !== null) {\r\n            const relationStr = this.searchBoxRef.localeSer.getValue('searchbox.relation.or');\r\n            const arr = value.trim().split(' ').filter(n => n.trim());\r\n            return arr.map((n, i) => {\r\n                return n  +  (i === arr.length -1 ? '' : '<span class=\"text-muted\" style=\"margin: 0 5px;\"> '+ relationStr +' </span>');\r\n            }).join('');\r\n        }\r\n\r\n        return '';\r\n    }\r\n}","import { ChangeDetectorRef, Component, EventEmitter, Injector, Input, OnInit, Output } from '@angular/core';\r\nimport { DateTimeHelperService } from '@farris/ui-common/date';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Component({\r\n    selector: 'search-filed-editor-date',\r\n    templateUrl: 'flexible-date.component.html'\r\n})\r\n\r\nexport class SearchFieldFlexibleDateComponent implements OnInit {\r\n\r\n    @Input() field;\r\n    @Output() valueChange = new EventEmitter();\r\n    // æ¯å¦ä¸ºåºé´æ¥æ\r\n    single = true;\r\n    dateFormat = '';\r\n    showTime = false;\r\n    value = '';\r\n    beginValue = '';\r\n    endValue = '';\r\n    showType = '1';\r\n    placeholder = '';\r\n    endPlaceHolder = '';\r\n    beginPlaceHolder = '';\r\n\r\n    activedDateTagId = '';\r\n    activedDayTagId = '';\r\n\r\n    dateTags = [];\r\n    dayTags = [];\r\n\r\n    private dateHelp: DateTimeHelperService = null;\r\n    constructor(private localeService: LocaleService, private injector: Injector, private cd: ChangeDetectorRef) {\r\n        this.dateHelp = this.injector.get(DateTimeHelperService, new DateTimeHelperService());\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.dateTags = [\r\n            {\r\n                id: 'tag1',\r\n                text: this.localeService.getValue('filterPanel.last1Month')\r\n            },\r\n            {\r\n                id: 'tag2',\r\n                text: this.localeService.getValue('filterPanel.last3Month')\r\n            },\r\n            {\r\n                id: 'tag3',\r\n                text: this.localeService.getValue('filterPanel.last6Month')\r\n            }\r\n        ];\r\n        this.dayTags = [\r\n            {\r\n                id: 'yesterday',\r\n                text: this.localeService.getValue('filterPanel.yesterday')\r\n            },\r\n            {\r\n                id: 'today',\r\n                text: this.localeService.getValue('filterPanel.today')\r\n            }\r\n        ];\r\n\r\n\r\n        if (this.field.control) {\r\n            const { showTime, showType, single } = this.field.control;\r\n            if (this.field.value) {\r\n                const { value, begin, end } = this.field.value;\r\n                this.value = value,\r\n                this.beginValue = begin;\r\n                this.endValue = end;\r\n            }\r\n    \r\n            this.showTime = showTime;\r\n            this.showType = showType;\r\n            this.single = single;\r\n\r\n            let itemDateFormat = this.field.control.dateFormat;\r\n            if (this.showTime && itemDateFormat) {\r\n                if (itemDateFormat.length > 0 && itemDateFormat.indexOf('HH:mm') == -1) {\r\n                    itemDateFormat = itemDateFormat + ' HH:mm:ss';\r\n                }\r\n            } else {\r\n                itemDateFormat = this.showTime ? 'yyyy-MM-dd HH:mm:ss' : (this.showType == '2' ? 'yyyy-MM' : (this.showType == '3' ? 'yyyy' : 'yyyy-MM-dd'));\r\n            }\r\n            this.dateFormat = itemDateFormat;\r\n        }\r\n    }\r\n\r\n    onDateChange($event) {\r\n        this.valueChange.emit({  field: this.field.code, value: {value: this.value, single: true}});\r\n    }\r\n\r\n    beginValueChange($event) {\r\n        this.valueChange.emit({  field: this.field.code,value: { begin: this.beginValue, end: this.endValue, single: false}});\r\n    }\r\n    endValueChange($event) {\r\n        this.valueChange.emit({  field: this.field.code, value: { begin: this.beginValue, end: this.endValue, single: false}});\r\n    }\r\n\r\n    onSingleChange($event) {\r\n        this.single = !$event;\r\n        this.valueChange.emit({  field: this.field.code,value: {value: this.value,  begin: this.beginValue, end: this.endValue, single: this.single}});\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    clickTag(tag) {\r\n        this.activedDateTagId = tag.id;\r\n        let tagDate;\r\n        if (tag.id == 'tag1') {\r\n            tagDate = this.getLastNumMonth(1, this.showTime, this.showType);\r\n        }\r\n        else if (tag.id == 'tag2') {\r\n            tagDate = this.getLastNumMonth(3, this.showTime, this.showType);\r\n        }\r\n        else if (tag.id == 'tag3') {\r\n            tagDate = this.getLastNumMonth(6, this.showTime, this.showType);\r\n        }\r\n        this.beginValue = tagDate['startTime'];\r\n        this.endValue = tagDate['endTime'];\r\n        this.valueChange.emit({  field: this.field.code,value: {value: this.value,  begin: this.beginValue, end: this.endValue, single: this.single}});\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    clickDayTag(tag) {\r\n        this.activedDayTagId = tag.id;\r\n        let dayTag = this.getToday(this.activedDayTagId, this.showTime);\r\n        this.value = dayTag;\r\n        this.valueChange.emit({  field: this.field.code, value: {value: this.value, single: true}});\r\n    }\r\n\r\n    private getLastNumMonth(num:number,showtime,type:string) {\r\n        let now = new Date();\r\n        let year = now.getFullYear();\r\n        let month = now.getMonth() + 1;//0-11è¡¨ç¤º1-12æ\r\n        let day = now.getDate();\r\n        let hour = now.getHours();\r\n        let min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()\r\n            :new Date().getMinutes();\r\n          let sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()\r\n            :new Date().getSeconds();\r\n        let dateObj = {};\r\n        const time = hour + ':' + min + ':' + sec;\r\n        // dateObj['endTime'] = year + '-' + month + '-' + day;\r\n        let endMonth = month < 10 ? '0' +month : month;\r\n        let endDay = day < 10 ? '0' +day : day;\r\n        if(type == '2'){\r\n            dateObj['endTime'] = year + '-' + endMonth;\r\n        }\r\n        else if(type == '3'){\r\n            dateObj['endTime'] = year;\r\n        }\r\n        else{\r\n            dateObj['endTime'] = year + '-' + endMonth + '-' + endDay;\r\n        }\r\n          let nowMonthDay = new Date(year, month, 0).getDate();    //å½åæçæ»å¤©æ°\r\n        let dYear,dMouth,dDay;\r\n        if(month - num <= 0){ //å¦ææ¯1ã2ã3æï¼å¹´æ°å¾åæ¨ä¸å¹´\r\n            let lastMonthDay = new Date((year - 1), (12 - (num - month)), 0).getDate();    //3ä¸ªæåæå¨æçæ»å¤©æ°\r\n            if(lastMonthDay < day){    //3ä¸ªæåæå¨æçæ»å¤©æ°å°äºç°å¨çå¤©æ¥æ\r\n                // dateObj['startTime'] = (year - 1) + '-' + (12 - (num - month)) + '-' + lastMonthDay;\r\n                dYear = year - 1;\r\n                dMouth = 12 - (num - month);\r\n                dDay = lastMonthDay;\r\n            }else{\r\n                dYear = year - 1;\r\n                dMouth = 12 - (num - month);\r\n                dDay = day;\r\n                // dateObj['startTime']= (year - 1) + '-' + (12 - (num - month)) + '-' + day;\r\n            }\r\n        }else{\r\n            let lastMonthDay = new Date(year, (month - num), 0).getDate();    //3ä¸ªæåæå¨æçæ»å¤©æ°\r\n            if(lastMonthDay < day){    //3ä¸ªæåæå¨æçæ»å¤©æ°å°äºç°å¨çå¤©æ¥æ\r\n                if(day < nowMonthDay){        //å½åå¤©æ¥æå°äºå½åææ»å¤©æ°,2æä»½æ¯è¾ç¹æ®çæä»½\r\n                    // dateObj['startTime'] = year + '-' + (month - num) + '-' + (lastMonthDay - (nowMonthDay - day));\r\n                    dYear = year;\r\n                    dMouth = month - num;\r\n                    dDay = lastMonthDay - (nowMonthDay - day);\r\n                }else{\r\n                    dYear = year;\r\n                    dMouth = month - num;\r\n                    dDay = lastMonthDay;\r\n                    // dateObj['startTime'] = year + '-' + (month - num) + '-' + lastMonthDay;\r\n                }\r\n            }else{\r\n                dYear = year;\r\n                dMouth = month - num;\r\n                dDay = day;\r\n                // dateObj['startTime'] = year + '-' + (month - num) + '-' + day;\r\n            }\r\n        }\r\n        dMouth = dMouth < 10 ? '0' +dMouth : dMouth;\r\n        dDay = dDay < 10 ? '0' +dDay : dDay;\r\n        if(type == '2'){\r\n            dateObj['startTime'] = dYear + '-' + dMouth;\r\n        }\r\n        else if(type == '3'){\r\n            dateObj['startTime'] = dYear;\r\n        }\r\n        else{\r\n            dateObj['startTime'] = dYear + '-' + dMouth + '-' + dDay;\r\n        }\r\n    \r\n        if(showtime){\r\n            dateObj['endTime'] = dateObj['endTime'] + ' ' + time;\r\n            dateObj['startTime'] = dateObj['startTime'] + ' ' + time;\r\n        }\r\n        return dateObj;\r\n    }\r\n    \r\n    private getToday(dayTags = 'today',showtime){\r\n        let now = new Date();\r\n\r\n        if(dayTags == 'today') {\r\n            return this.dateHelp.formatTo(now, this.dateFormat);\r\n        } else if (dayTags == 'yesterday') {\r\n            return this.dateHelp.formatTo(this.dateHelp.subDays(now, 1), this.dateFormat);\r\n        }\r\n\r\n        /*\r\n        let year = now.getFullYear();\r\n        let month = now.getMonth() + 1;//0-11è¡¨ç¤º1-12æ\r\n        let day = now.getDate();\r\n        let hour = now.getHours();\r\n        let min = now.getMinutes() < 10 ? '0' + new Date().getMinutes()\r\n            :new Date().getMinutes();\r\n        let sec = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds()\r\n            :new Date().getSeconds();\r\n        const time = hour + ':' + min + ':' + sec;\r\n        let yesterday = new Date();\r\n        yesterday.setTime(now.getTime()-24*60*60*1000);\r\n        let yesterdayObj = yesterday.getFullYear()+\"-\" + (yesterday.getMonth()+1) + \"-\" + yesterday.getDate();\r\n        let dateObj = year + '-' + month + '-' + day;\r\n        if(showtime){\r\n            dateObj = dateObj + ' ' + time;\r\n            yesterdayObj = yesterdayObj + ' ' + time;\r\n        }\r\n        if(dayTags == 'today') return dateObj;\r\n        else if (dayTags == 'yesterday') return yesterdayObj;\r\n\r\n        */\r\n        \r\n    }\r\n}","import { EventEmitter, Component, Input, OnInit, Injector, ChangeDetectorRef, Output} from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'search-filed-editor-number',\r\n    templateUrl: './flexible-number.component.html'\r\n})\r\n\r\nexport class SearchFieldFlexibleNumberComponent implements OnInit {\r\n\r\n    @Input() field;\r\n    @Output() valueChange = new EventEmitter();\r\n    // æ¯å¦ä¸ºåºé´æ¥æ\r\n    single = true;\r\n    value;\r\n    precision;\r\n    bigNumber;\r\n    placeholder;\r\n    beginValue;\r\n    endValue;\r\n    beginPlaceHolder;\r\n    endPlaceHolder;\r\n    max: number;\r\n    min: number;\r\n\r\n    constructor(private injecotr: Injector, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit() {\r\n        this.single = this.field.control.single;\r\n        if (this.field) {\r\n            if (this.field.value) {\r\n                const { value, begin, end } = this.field.value;\r\n                this.value = value;\r\n                this.beginValue = begin;\r\n                this.endValue = end;\r\n            }\r\n\r\n            this.bigNumber = this.field.control.bigNumber;\r\n\r\n            this.precision = this.field.control.precision || 0;\r\n\r\n            if (!this.bigNumber) {\r\n                this.min = -2147483648;\r\n                this.max = 2147483647;\r\n            }\r\n        }\r\n    }\r\n\r\n    onSingleValueChange($event) {\r\n        this.single = !$event;\r\n        this.valueChange.emit({  field: this.field.code,value: { value: this.value, end: this.endValue, begin: this.beginValue, single: this.single} });\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    onValueChange($event) {\r\n        this.valueChange.emit({  field: this.field.code,value: { value:$event, single: true} });\r\n    }\r\n\r\n    onBeginValueChange($event){\r\n        this.valueChange.emit({  field: this.field.code, value: { begin: $event, end: this.endValue, single: false } });\r\n    }\r\n\r\n    onEndValueChange($event) {\r\n        this.valueChange.emit({  field: this.field.code,value: { begin: this.beginValue, end: $event, single: false } });\r\n    }\r\n\r\n}","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, OnInit, Output, ViewChild } from \"@angular/core\";\r\nimport { cloneDeep } from 'lodash-es';\r\n@Component({\r\n    selector: \"search-filed-editor-enum\",\r\n    templateUrl: \"./search-editor-enum.component.html\",\r\n})\r\nexport class SearchFieldEnumEditorComponent implements OnInit {\r\n    checkedAll: boolean = false;\r\n    @Input() boolcheck: boolean = false;\r\n    _item: any;\r\n    @Input()\r\n    get field() {\r\n        return this._item;\r\n    }\r\n    set field(data) {\r\n        this._item = cloneDeep(data);\r\n        this.getDataSource();\r\n        //this.checkValue = this._item.value.getOriginalValue();\r\n        if (!this._item.hasOwnProperty(\"value\")) {\r\n            this._item.value = { value: [] };\r\n        }\r\n\r\n        if (this._item.hasOwnProperty(\"value\") && this._item.value) {\r\n            this.checkValue = this._item.value.value;\r\n        } else {\r\n            this._item.value = { value: [] };\r\n        }\r\n        // if (this.boolcheck) {\r\n        //     if (this.checkValue.length) {\r\n        //         this.boolchecked = this.checkValue[0];\r\n        //         if (this.boolchecked) this.boolCheckState = \"checked\";\r\n        //         else this.boolCheckState = \"unchecked\";\r\n        //     } else this.boolCheckState = \"indeterminate\";\r\n        // }\r\n        if (this._item.value.value.length == 0){\r\n            this.checkedAll = false;\r\n        }else if (this._item.control[\"enumValues\"] && this._item.value.value.length == this._item.control[\"enumValues\"].length) {\r\n            this.checkedAll = true;\r\n        }\r\n        this.setSubmitChange();\r\n    }\r\n\r\n    @Output() valueChange = new EventEmitter();\r\n\r\n\r\n    checkValue: any[];\r\n    // indeterminate: boolean = true;\r\n    // boolchecked: boolean;\r\n    // boolCheckState: string = \"indeterminate\";\r\n\r\n    checkboxDataSource: Array<any> = new Array<any>();\r\n\r\n    @ViewChild('checkAllEl') checkAllElRef: ElementRef;\r\n\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit(): void { }\r\n\r\n    getDataSource() {\r\n        if (this.field && this._item.control) {\r\n            let checkboxList = this._item.control;\r\n            this.checkboxDataSource = Array<any>();\r\n            if (checkboxList.enumValues && checkboxList.enumValues.length > 0) {\r\n                checkboxList.enumValues.forEach((element) => {\r\n                    this.checkboxDataSource.push(Object.assign({}, element));\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    onSearch(event) {\r\n        let checkboxValue = [];\r\n        if (event) {\r\n            // let checkboxList = event.split(',');\r\n            let checkboxList = event;\r\n            if (checkboxList && checkboxList.length) {\r\n                checkboxValue = checkboxList;\r\n            }\r\n            this._item.value.value = checkboxValue;\r\n        } else {\r\n            this._item.value.value = \"\";\r\n        }\r\n        if (checkboxValue.length < this._item.control[\"enumValues\"].length) {\r\n            this.checkedAll = false;\r\n            // this.checkAllElRef.nativeElement.indeterminate = !!checkboxValue.length;\r\n            // if (!checkboxValue.length) {\r\n            //     this.checkedAll = false;    \r\n            // }\r\n        } else if ( checkboxValue.length == this._item.control[\"enumValues\"].length){\r\n            this.checkedAll = true;\r\n            // this.checkAllElRef.nativeElement.indeterminate = false;\r\n        }\r\n        this.cd.detectChanges();\r\n        this.getValueText();\r\n        this.setSubmitChange();\r\n        this.valueChange.emit({  field: this.field.code,value: {value: checkboxValue, single: true} });\r\n    }\r\n\r\n    getValueText() {\r\n        const enumValue = this._item.control.enumValues;\r\n        const value = this._item.value.value;\r\n        if (enumValue && enumValue.length && value && value.length) {\r\n            let texts = [];\r\n            for (let i = 0; i <= value.length; i++) {\r\n                const enums = enumValue.find((val) => {\r\n                    return val[\"value\"] == value[i];\r\n                });\r\n                if (enums) {\r\n                    texts.push(enums[\"name\"]);\r\n                }\r\n            }\r\n            this._item.valueText = texts.join(\",\");\r\n        }\r\n    }\r\n\r\n    setSubmitChange() {\r\n        const val = this._item.value;\r\n        if (\r\n            Object.keys(val).length < 0 ||\r\n            Object.keys(val.value).length === 0\r\n        ) {\r\n            // this.submitChange.emit(false);\r\n        } else {\r\n            // this.submitChange.emit(true);\r\n        }\r\n    }\r\n\r\n    onCheckAll(event) {\r\n        // this.checkAllElRef.nativeElement.indeterminate = false;\r\n        this.checkedAll = !this.checkedAll;\r\n        if (this.checkedAll) {\r\n            this.setCheckedAll();\r\n        } else {\r\n            this._item.value.value = [];\r\n            this._item.valueText = \"\";\r\n            this.checkValue = [];\r\n        }\r\n\r\n        this.getValueText();\r\n        this.setSubmitChange();\r\n\r\n        this.cd.detectChanges();\r\n\r\n        this.valueChange.emit({ field: this.field.code, value: {value: this.checkValue, single: true} });\r\n    }\r\n\r\n    private setCheckedAll() {\r\n        const enumValue = this._item.control.enumValues;\r\n        if (enumValue && enumValue.length) {\r\n            let checkboxValue = [];\r\n            //checkboxTexts = [];\r\n            for (let i = 0; i < enumValue.length; i++) {\r\n                checkboxValue.push(enumValue[i][\"value\"]);\r\n                //checkboxTexts.push(enumValue[i]['name'])\r\n            }\r\n            this._item.value.value = checkboxValue;\r\n            this.checkValue = this._item.value.value;\r\n            //this._item.valueText = checkboxTexts.join(',');\r\n\r\n            this.cd.detectChanges();\r\n        }\r\n    }\r\n\r\n}\r\n","import { EventEmitter, ChangeDetectorRef, Component, ElementRef, Injector, Input, OnInit, Output, AfterViewInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'search-field-editor-bool',\r\n    templateUrl: './search-editor-boolean.component.html'\r\n})\r\nexport class SearchFieldEditorBooleanComponent implements OnInit, AfterViewInit {\r\n\r\n    @Input() field: any;\r\n\r\n    radioDataSource = [];\r\n    selectedValue = undefined;\r\n\r\n    @Output() valueChange = new EventEmitter();\r\n    private _radioElements = [];\r\n\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef, private el: ElementRef) { }\r\n\r\n    ngOnInit() {\r\n        if (this.field) {\r\n            if (this.field.control) {\r\n                this.radioDataSource = this.field.control.enumValues || [];\r\n            }\r\n\r\n            if (this.field.value) {\r\n                this.selectedValue = this.field.value.value;\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.selectedValue !== null && this.selectedValue !== undefined) {\r\n            this._radioElements = Array.from(this.el.nativeElement.querySelectorAll('input'));\r\n            const radioEl = this._radioElements.find(n => n.value == this.selectedValue);\r\n            if (radioEl) {\r\n                radioEl.checked = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    onRadioClicked($event, value) {\r\n        this.selectedValue = value;\r\n        const radioInputRel = $event.target.querySelector('input');\r\n        // radioInputRel && radioInputRel.setAttribute('checked', true);\r\n        if (radioInputRel) {\r\n            this.clearChecked();\r\n            radioInputRel.checked = true;\r\n            this.cd.detectChanges();\r\n        }\r\n\r\n        this.valueChange.emit({ field: this.field.code,  value: {value: this.selectedValue, single: true} });\r\n    }\r\n\r\n    private clearChecked() {\r\n        if (!this._radioElements || !this._radioElements.length) {\r\n            this._radioElements = Array.from(this.el.nativeElement.querySelectorAll('input'));\r\n        }\r\n        this._radioElements.forEach((r: any) => {\r\n            // r.removeAttribute('checked');\r\n            r.checked = false;\r\n        });\r\n    }\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'canclear'\r\n})\r\nexport class SearchFieldCanClearPipe implements PipeTransform {\r\n\r\n    private isNil = (val: any) => val === null  || val === undefined || val === '' || (Array.isArray(val) && !val.length);\r\n\r\n    transform(val: any, ...args: any[]): any {\r\n        let canClear = false;\r\n        if (val) {\r\n            const { value, begin, end, single } = val;\r\n\r\n            if (!this.isNil(single)) {\r\n                if (!single) {\r\n                    canClear = !this.isNil(begin) || !this.isNil(end);\r\n                } else {\r\n                    canClear = !this.isNil(value);\r\n                }\r\n            } else {\r\n                canClear = !this.isNil(value);\r\n            }\r\n        }\r\n\r\n        return !canClear;\r\n    }\r\n}","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { FarrisCommonModule }           from '@farris/ui-common';\r\nimport { InputGroupModule }             from '@farris/ui-input-group';\r\nimport { LocaleModule }                 from '@farris/ui-locale';\r\nimport { FarrisDatePickerModule }       from '@farris/ui-datepicker';\r\nimport { SwitchModule }                 from '@farris/ui-switch';\r\nimport { NumberSpinnerModule }          from '@farris/ui-number-spinner';\r\nimport { FarrisFormsModule }            from '@farris/ui-forms';\r\nimport { DateHelperModule }             from \"@farris/ui-common/date\";\r\n\r\nimport { SearchBoxComponent } from './search-box.component';\r\nimport { SearchFieldPanelComponent } from './search-fields/search-field-panel.component';\r\nimport { SearchFieldsComponent } from './search-fields/search-fields.component';\r\nimport { SearchFieldDirective } from './search-fields/search-filed.directive';\r\nimport { SearchPanelComponent } from './search-panel/search-panel.component';\r\nimport { SearchPanelDirective } from './search-panel/search-panel.directive';\r\nimport { SearchWordPipe } from './search-panel/search-words.pipe';\r\n\r\nimport { SearchFieldFlexibleDateComponent }     from './search-fields/editors/date/flexible-date.component';\r\nimport { SearchFieldFlexibleNumberComponent }   from './search-fields/editors/number/flexible-number.component';\r\nimport { SearchFieldEnumEditorComponent }       from './search-fields/editors/enum/search-editor-enum.component';\r\nimport { SearchFieldEditorBooleanComponent }    from './search-fields/editors/boolean/search-editor-boolean.component';\r\nimport { SearchFieldCanClearPipe } from './search-fields/can-clear-condition.pipe';\r\n@NgModule({\r\n    declarations: [\r\n        SearchBoxComponent,\r\n        SearchPanelComponent,\r\n        SearchPanelDirective,\r\n        SearchWordPipe,\r\n        SearchFieldsComponent,\r\n        SearchFieldDirective,\r\n        SearchFieldPanelComponent,\r\n        SearchFieldFlexibleDateComponent,\r\n        SearchFieldFlexibleNumberComponent,\r\n        SearchFieldEnumEditorComponent,\r\n        SearchFieldEditorBooleanComponent,\r\n        SearchFieldCanClearPipe\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisCommonModule.forRoot(),\r\n        InputGroupModule,\r\n        LocaleModule.forRoot(),\r\n        FarrisDatePickerModule,\r\n        SwitchModule,\r\n        NumberSpinnerModule,\r\n        FarrisFormsModule,\r\n        DateHelperModule.forRoot()\r\n    ],\r\n    entryComponents: [\r\n        SearchPanelComponent,\r\n        SearchFieldPanelComponent\r\n    ],\r\n    exports: [\r\n        SearchBoxComponent,\r\n        SearchPanelComponent,\r\n        SearchPanelDirective,\r\n        SearchWordPipe,\r\n        SearchFieldsComponent,\r\n        SearchFieldDirective,\r\n        SearchFieldPanelComponent,\r\n        SearchFieldFlexibleDateComponent,\r\n        SearchFieldFlexibleNumberComponent,\r\n        SearchFieldEnumEditorComponent,\r\n        SearchFieldEditorBooleanComponent\r\n    ]\r\n})\r\nexport class SearchBoxModule { }\r\n"],"names":["SEARCH_BOX_VALUE_ACCESSOR"],"mappings":"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"}
