/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Output, EventEmitter, Input, ViewChild, TemplateRef, Injector, Renderer2, ElementRef, ChangeDetectorRef } from '@angular/core';
import { DatagridComponent } from '@farris/ui-datagrid';
import { NotifyService } from '@farris/ui-notify';
/**
 * @record
 */
export function EnumData() { }
if (false) {
    /** @type {?} */
    EnumData.prototype.id;
    /** @type {?} */
    EnumData.prototype.value;
    /** @type {?} */
    EnumData.prototype.name;
}
var IdeEnumEditorComponent = /** @class */ (function () {
    function IdeEnumEditorComponent(notifyService, injector, render, el, cd) {
        this.notifyService = notifyService;
        this.injector = injector;
        this.render = render;
        this.el = el;
        this.cd = cd;
        this.closeModal = new EventEmitter();
        // 模态框确定后关闭，并传递参数
        this.submitModal = new EventEmitter();
        // 枚举数组
        this.editorParams = {};
        this.valueChange = new EventEmitter();
        this.modalConfig = {
            title: '枚举编辑器',
            width: 900,
            height: 500,
            showButtons: true
        };
        this.columns = [];
    }
    /**
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.columns = [
            { field: 'name', title: '名称', width: 100, template: this.nameTemp },
            { field: 'value', title: '值', width: 100, template: this.valueTemp },
            { title: '操作', width: 100, template: this.activeTemp, halign: 'center', align: 'center' }
        ];
        if (!this.value || this.value.length === 0) {
            this.value = [];
        }
        else {
            this.value = this.value.map((/**
             * @param {?} n
             * @param {?} i
             * @return {?}
             */
            function (n, i) {
                return tslib_1.__assign({ id: i + 1 }, n);
            }));
        }
        this.render.addClass(this.el.nativeElement, 'f-utils-absolute-all');
        this.render.addClass(this.el.nativeElement, 'f-utils-flex-column');
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
    };
    /**
     * @private
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.map2EnumData = /**
     * @private
     * @return {?}
     */
    function () {
        return this.value.map((/**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            return {
                name: v.name,
                value: v.value
            };
        }));
    };
    /**
     * @private
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.changeEmit = /**
     * @private
     * @return {?}
     */
    function () {
        this.cd.detectChanges();
        this.valueChange.emit(this.value);
    };
    /**
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.clickCancel = /**
     * @return {?}
     */
    function () {
        this.closeModal.emit();
    };
    /**
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.clickConfirm = /**
     * @return {?}
     */
    function () {
        if (!this.checkBeforeSave()) {
            return;
        }
        /** @type {?} */
        var enumData = this.map2EnumData();
        this.submitModal.emit({ value: enumData });
    };
    /**
     * 保存前检查
     */
    /**
     * 保存前检查
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.checkBeforeSave = /**
     * 保存前检查
     * @return {?}
     */
    function () {
        var e_1, _a;
        /** @type {?} */
        var msg = {
            type: 'warning',
            title: '系统提示',
            msg: '请添加枚举值。',
            timeout: 3000
        };
        // ① 空
        if (!this.value || this.value.length === 0) {
            this.notifyService.warning(msg);
            return false;
        }
        try {
            // ② 非空，则校验每个的键值是否为空；
            for (var _b = tslib_1.__values(this.value), _c = _b.next(); !_c.done; _c = _b.next()) {
                var item = _c.value;
                if (!item.name || !item.value) {
                    msg.msg = '枚举值和枚举名称均不允许为空。';
                    this.notifyService.warning(msg);
                    return false;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // ③ 键不允许重复；
        /** @type {?} */
        var enumKeys = this.value.map((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e.value; }));
        /** @type {?} */
        var keySet = new Set(enumKeys);
        /** @type {?} */
        var exclusiveKeys = Array.from(keySet);
        if (enumKeys.length !== exclusiveKeys.length) {
            msg.msg = '枚举值不允许重复。';
            return false;
        }
        // ③ 值不允许重复；
        /** @type {?} */
        var enumNames = this.value.map((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e.name; }));
        /** @type {?} */
        var nameSet = new Set(enumNames);
        /** @type {?} */
        var exclusiveNames = Array.from(nameSet);
        if (enumNames.length !== exclusiveNames.length) {
            msg.msg = '枚举名称不允许重复。';
            this.notifyService.warning(msg);
            return false;
        }
        return true;
    };
    /**
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.add = /**
     * @return {?}
     */
    function () {
        this.value = tslib_1.__spread(this.value, [{ id: (this.value.length + 1), name: '', value: '' }]);
        this.changeEmit();
    };
    /**
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.remove = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var rows = this.dg.checkeds;
        if (rows && rows.length) {
            this.value = this.value.filter((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                return rows.findIndex((/**
                 * @param {?} r
                 * @return {?}
                 */
                function (r) { return r.id === v.id; })) === -1;
            }));
            this.changeEmit();
        }
        else {
            this.notifyService.warning('请钩选要删除的数据！');
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.deleteItem = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        this.value = this.value.filter((/**
         * @param {?} v
         * @return {?}
         */
        function (v) {
            return v.id !== id;
        }));
        this.changeEmit();
    };
    /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.moveTop = /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    function ($event, id, index) {
        $event.stopPropagation();
        /** @type {?} */
        var i = this.value.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === id; }));
        // const i = index;
        this.value.unshift(this.value[i]);
        this.value.splice(i + 1, 1);
        this.value = tslib_1.__spread(this.value);
        this.changeEmit();
        return false;
    };
    /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.moveBottom = /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    function ($event, id, index) {
        $event.stopPropagation();
        /** @type {?} */
        var i = this.value.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === id; }));
        // const i = index;
        this.value.push(this.value[i]);
        this.value.splice(i, 1);
        this.value = tslib_1.__spread(this.value);
        this.changeEmit();
        return false;
    };
    /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.moveUp = /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    function ($event, id, index) {
        var _a;
        $event.stopPropagation();
        /** @type {?} */
        var i = this.value.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === id; }));
        // const i = index;
        if (i !== 0) {
            /** @type {?} */
            var tempArr = this.value.splice(i, 1);
            (_a = this.value).splice.apply(_a, tslib_1.__spread([i - 1, 0], tempArr));
            this.value = tslib_1.__spread(this.value);
            this.changeEmit();
        }
        return false;
    };
    /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    IdeEnumEditorComponent.prototype.moveDown = /**
     * @param {?} $event
     * @param {?} id
     * @param {?} index
     * @return {?}
     */
    function ($event, id, index) {
        var _a;
        $event.stopPropagation();
        /** @type {?} */
        var len = this.value.length;
        /** @type {?} */
        var i = this.value.findIndex((/**
         * @param {?} n
         * @return {?}
         */
        function (n) { return n.id === id; }));
        // const i = index;
        if (i !== len - 1) {
            /** @type {?} */
            var tempArr = this.value.splice(i, 1);
            (_a = this.value).splice.apply(_a, tslib_1.__spread([i + 1, 0], tempArr));
            this.value = tslib_1.__spread(this.value);
            this.changeEmit();
        }
        return false;
    };
    IdeEnumEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ide-enum-editor',
                    template: "\n    <div class=\"border-bottom mb-1 py-1\">\n        <button class=\"btn btn-primary mr-1 ml-2\" (click)=\"add()\"> \u65B0\u589E</button>\n        <button class=\"btn btn-default mr-1\" (click)=\"remove()\">\u5220\u9664</button>\n    </div>\n    <div class=\"d-flex flex-column flex-fill\">\n        <farris-datagrid #dg [idField]=\"'id'\"\n            [columns]=\"columns\" [sizeType]=\"'md'\" [showAllCheckbox]=\"true\"\n            [striped]=\"false\" [showCheckbox]=\"true\" [multiSelect]=\"true\"\n            [data]=\"value\" [fit]=\"true\" [fitColumns]=\"true\"\n            [showBorder]=\"true\" [pagination]=\"false\"\n            [selectOnCheck]=\"false\" [checkOnSelect]=\"false\"\n        ></farris-datagrid>\n\n        <ng-template #nameTemp let-ctx>\n            <div class=\"f-datagrid-cell-formgroup farris-group-auto\">\n                <input type=\"text\" class=\"form-control\" name=\"name\" [(ngModel)]=\"ctx.rowData['name']\">\n            </div>\n        </ng-template>\n        <ng-template #valueTemp let-ctx>\n            <div class=\"f-datagrid-cell-formgroup farris-group-auto\">\n                <input type=\"text\" class=\"form-control\" [(ngModel)]=\"ctx.rowData['value']\" name=\"value\">\n            </div>\n        </ng-template>\n\n        <ng-template #activeTemp let-ctx>\n            <button type=\"button\" class=\"btn btn-warning  mr-1\" (click)=\"deleteItem(ctx.rowData.id)\">\u5220\u9664</button>\n            <button class=\"btn btn-info mr-1\" style=\"padding: 2px 5px\" (click)=\"moveTop($event, ctx.rowData.id, ctx.rowIndex)\" title=\"\u7F6E\u9876\">\n                <span class=\"f-icon f-icon-roofing\"></span>\n            </button>\n            <button class=\"btn btn-info mr-1\" style=\"padding: 2px 5px\" (click)=\"moveUp($event, ctx.rowData.id, ctx.rowIndex)\" title=\"\u4E0A\u79FB\">\n                <span class=\"f-icon f-icon-arrow-chevron-up\"></span>\n            </button>\n            <button class=\"btn btn-info mr-1\"  style=\"padding: 2px 5px\" (click)=\"moveDown($event, ctx.rowData.id, ctx.rowIndex)\" title=\"\u4E0B\u79FB\">\n                <span class=\"f-icon f-icon-arrow-chevron-down\"></span>\n            </button>\n            <button class=\"btn btn-info mr-1\" style=\"padding: 2px 5px\" (click)=\"moveBottom($event, ctx.rowData.id, ctx.rowIndex)\" title=\"\u7F6E\u5E95\">\n                <span class=\"f-icon f-icon-bottomsetting\"></span>\n            </button>\n        </ng-template>\n\n    </div>\n    <ng-template #enumFooter>\n        <div class=\"btns\">\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm px-3\" (click)=\"clickCancel()\" > \u53D6\u6D88 </button>\n            &nbsp;&nbsp;\n            <button  type=\"button\"  class=\"btn btn-outline-primary btn-sm px-3\" (click)=\"clickConfirm()\" > \u786E\u5B9A </button>\n        </div>\n    </ng-template>\n    "
                }] }
    ];
    /** @nocollapse */
    IdeEnumEditorComponent.ctorParameters = function () { return [
        { type: NotifyService },
        { type: Injector },
        { type: Renderer2 },
        { type: ElementRef },
        { type: ChangeDetectorRef }
    ]; };
    IdeEnumEditorComponent.propDecorators = {
        closeModal: [{ type: Output }],
        submitModal: [{ type: Output }],
        value: [{ type: Input }],
        editorParams: [{ type: Input }],
        modalFooter: [{ type: ViewChild, args: ['enumFooter',] }],
        dg: [{ type: ViewChild, args: ['dg',] }],
        nameTemp: [{ type: ViewChild, args: ['nameTemp',] }],
        valueTemp: [{ type: ViewChild, args: ['valueTemp',] }],
        activeTemp: [{ type: ViewChild, args: ['activeTemp',] }],
        valueChange: [{ type: Output }]
    };
    return IdeEnumEditorComponent;
}());
export { IdeEnumEditorComponent };
if (false) {
    /** @type {?} */
    IdeEnumEditorComponent.prototype.closeModal;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.submitModal;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.value;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.editorParams;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.modalFooter;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.dg;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.nameTemp;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.valueTemp;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.activeTemp;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.valueChange;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.modalConfig;
    /** @type {?} */
    IdeEnumEditorComponent.prototype.columns;
    /**
     * @type {?}
     * @private
     */
    IdeEnumEditorComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    IdeEnumEditorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    IdeEnumEditorComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    IdeEnumEditorComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    IdeEnumEditorComponent.prototype.cd;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlLWVudW0tZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvaWRlLWVudW0tZWRpdG9yLyIsInNvdXJjZXMiOlsibGliL2lkZS1lbnVtLWVkaXRvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQTRCLFFBQVEsRUFBZSxTQUFTLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2xNLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQzs7OztBQUdsRCw4QkFJQzs7O0lBSEcsc0JBQVE7O0lBQ1IseUJBQWM7O0lBQ2Qsd0JBQWE7O0FBR2pCO0lBK0VJLGdDQUNZLGFBQTRCLEVBQzVCLFFBQWtCLEVBQ2xCLE1BQWlCLEVBQ2pCLEVBQWMsRUFDZCxFQUFxQjtRQUpyQixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFDakIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBN0J2QixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7UUFFckMsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOztRQUV2QyxpQkFBWSxHQUFRLEVBQUUsQ0FBQztRQVN0QixnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFM0MsZ0JBQVcsR0FBRztZQUNWLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFLEdBQUc7WUFDVixNQUFNLEVBQUUsR0FBRztZQUNYLFdBQVcsRUFBRSxJQUFJO1NBQ3BCLENBQUM7UUFFRixZ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IE9uSW5pdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIElucHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMsIEluamVjdG9yLCBIb3N0QmluZGluZywgUmVuZGVyZXIyLCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3RvclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBFbnVtRGF0YSB7XG4gICAgaWQ6IGFueTtcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbn1cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdpZGUtZW51bS1lZGl0b3InLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImJvcmRlci1ib3R0b20gbWItMSBweS0xXCI+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgbXItMSBtbC0yXCIgKGNsaWNrKT1cImFkZCgpXCI+IOaWsOWinjwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IG1yLTFcIiAoY2xpY2spPVwicmVtb3ZlKClcIj7liKDpmaQ8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGZsZXgtY29sdW1uIGZsZXgtZmlsbFwiPlxuICAgICAgICA8ZmFycmlzLWRhdGFncmlkICNkZyBbaWRGaWVsZF09XCInaWQnXCJcbiAgICAgICAgICAgIFtjb2x1bW5zXT1cImNvbHVtbnNcIiBbc2l6ZVR5cGVdPVwiJ21kJ1wiIFtzaG93QWxsQ2hlY2tib3hdPVwidHJ1ZVwiXG4gICAgICAgICAgICBbc3RyaXBlZF09XCJmYWxzZVwiIFtzaG93Q2hlY2tib3hdPVwidHJ1ZVwiIFttdWx0aVNlbGVjdF09XCJ0cnVlXCJcbiAgICAgICAgICAgIFtkYXRhXT1cInZhbHVlXCIgW2ZpdF09XCJ0cnVlXCIgW2ZpdENvbHVtbnNdPVwidHJ1ZVwiXG4gICAgICAgICAgICBbc2hvd0JvcmRlcl09XCJ0cnVlXCIgW3BhZ2luYXRpb25dPVwiZmFsc2VcIlxuICAgICAgICAgICAgW3NlbGVjdE9uQ2hlY2tdPVwiZmFsc2VcIiBbY2hlY2tPblNlbGVjdF09XCJmYWxzZVwiXG4gICAgICAgID48L2ZhcnJpcy1kYXRhZ3JpZD5cblxuICAgICAgICA8bmctdGVtcGxhdGUgI25hbWVUZW1wIGxldC1jdHg+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZi1kYXRhZ3JpZC1jZWxsLWZvcm1ncm91cCBmYXJyaXMtZ3JvdXAtYXV0b1wiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgbmFtZT1cIm5hbWVcIiBbKG5nTW9kZWwpXT1cImN0eC5yb3dEYXRhWyduYW1lJ11cIj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8bmctdGVtcGxhdGUgI3ZhbHVlVGVtcCBsZXQtY3R4PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImYtZGF0YWdyaWQtY2VsbC1mb3JtZ3JvdXAgZmFycmlzLWdyb3VwLWF1dG9cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIFsobmdNb2RlbCldPVwiY3R4LnJvd0RhdGFbJ3ZhbHVlJ11cIiBuYW1lPVwidmFsdWVcIj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICAgIDxuZy10ZW1wbGF0ZSAjYWN0aXZlVGVtcCBsZXQtY3R4PlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmcgIG1yLTFcIiAoY2xpY2spPVwiZGVsZXRlSXRlbShjdHgucm93RGF0YS5pZClcIj7liKDpmaQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWluZm8gbXItMVwiIHN0eWxlPVwicGFkZGluZzogMnB4IDVweFwiIChjbGljayk9XCJtb3ZlVG9wKCRldmVudCwgY3R4LnJvd0RhdGEuaWQsIGN0eC5yb3dJbmRleClcIiB0aXRsZT1cIue9rumhtlwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1yb29maW5nXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIG1yLTFcIiBzdHlsZT1cInBhZGRpbmc6IDJweCA1cHhcIiAoY2xpY2spPVwibW92ZVVwKCRldmVudCwgY3R4LnJvd0RhdGEuaWQsIGN0eC5yb3dJbmRleClcIiB0aXRsZT1cIuS4iuenu1wiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1hcnJvdy1jaGV2cm9uLXVwXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIG1yLTFcIiAgc3R5bGU9XCJwYWRkaW5nOiAycHggNXB4XCIgKGNsaWNrKT1cIm1vdmVEb3duKCRldmVudCwgY3R4LnJvd0RhdGEuaWQsIGN0eC5yb3dJbmRleClcIiB0aXRsZT1cIuS4i+enu1wiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1hcnJvdy1jaGV2cm9uLWRvd25cIj48L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWluZm8gbXItMVwiIHN0eWxlPVwicGFkZGluZzogMnB4IDVweFwiIChjbGljayk9XCJtb3ZlQm90dG9tKCRldmVudCwgY3R4LnJvd0RhdGEuaWQsIGN0eC5yb3dJbmRleClcIiB0aXRsZT1cIue9ruW6lVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZi1pY29uIGYtaWNvbi1ib3R0b21zZXR0aW5nXCI+PC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICA8L2Rpdj5cbiAgICA8bmctdGVtcGxhdGUgI2VudW1Gb290ZXI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJidG5zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1zZWNvbmRhcnkgYnRuLXNtIHB4LTNcIiAoY2xpY2spPVwiY2xpY2tDYW5jZWwoKVwiID4g5Y+W5raIIDwvYnV0dG9uPlxuICAgICAgICAgICAgJm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICA8YnV0dG9uICB0eXBlPVwiYnV0dG9uXCIgIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnkgYnRuLXNtIHB4LTNcIiAoY2xpY2spPVwiY2xpY2tDb25maXJtKClcIiA+IOehruWumiA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgICBgLFxuICAgIHN0eWxlczogW11cbn0pXG5leHBvcnQgY2xhc3MgSWRlRW51bUVkaXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIC8vIOaooeaAgeahhuehruWumuWQjuWFs+mXre+8jOW5tuS8oOmAkuWPguaVsFxuICAgIEBPdXRwdXQoKSBzdWJtaXRNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIEBJbnB1dCgpIHZhbHVlOiBFbnVtRGF0YVtdOyAvLyDmnprkuL7mlbDnu4RcbiAgICBASW5wdXQoKSBlZGl0b3JQYXJhbXM6IGFueSA9IHt9O1xuXG4gICAgQFZpZXdDaGlsZCgnZW51bUZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gICAgQFZpZXdDaGlsZCgnZGcnKSBkZzogRGF0YWdyaWRDb21wb25lbnQ7XG4gICAgQFZpZXdDaGlsZCgnbmFtZVRlbXAnKSBuYW1lVGVtcDogVGVtcGxhdGVSZWY8YW55PjtcbiAgICBAVmlld0NoaWxkKCd2YWx1ZVRlbXAnKSB2YWx1ZVRlbXA6IFRlbXBsYXRlUmVmPGFueT47XG4gICAgQFZpZXdDaGlsZCgnYWN0aXZlVGVtcCcpIGFjdGl2ZVRlbXA6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBtb2RhbENvbmZpZyA9IHtcbiAgICAgICAgdGl0bGU6ICfmnprkuL7nvJbovpHlmagnLFxuICAgICAgICB3aWR0aDogOTAwLFxuICAgICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgICAgc2hvd0J1dHRvbnM6IHRydWVcbiAgICB9O1xuXG4gICAgY29sdW1ucyA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmXG4gICAgKSB7IH1cblxuICAgIG5nT25Jbml0KCkge1xuXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IFtcbiAgICAgICAgICAgIHsgZmllbGQ6ICduYW1lJywgdGl0bGU6ICflkI3np7AnLCB3aWR0aDogMTAwLCB0ZW1wbGF0ZTogdGhpcy5uYW1lVGVtcCB9LFxuICAgICAgICAgICAgeyBmaWVsZDogJ3ZhbHVlJywgdGl0bGU6ICflgLwnLCB3aWR0aDogMTAwLCB0ZW1wbGF0ZTogdGhpcy52YWx1ZVRlbXAgfSxcbiAgICAgICAgICAgIHsgdGl0bGU6ICfmk43kvZwnLCB3aWR0aDogMTAwLCB0ZW1wbGF0ZTogdGhpcy5hY3RpdmVUZW1wLCBoYWxpZ246ICdjZW50ZXInLCBhbGlnbjogJ2NlbnRlcicgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGlmICghdGhpcy52YWx1ZSB8fCB0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUubWFwKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGkgKyAxLFxuICAgICAgICAgICAgICAgICAgICAuLi5uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmLXV0aWxzLWFic29sdXRlLWFsbCcpO1xuICAgICAgICB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsICdmLXV0aWxzLWZsZXgtY29sdW1uJyk7XG5cbiAgICB9XG5cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcDJFbnVtRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUubWFwKHYgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB2Lm5hbWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHYudmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2hhbmdlRW1pdCgpIHtcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcbiAgICB9XG5cbiAgICBjbGlja0NhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcbiAgICB9XG5cbiAgICBjbGlja0NvbmZpcm0oKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGVja0JlZm9yZVNhdmUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVudW1EYXRhID0gdGhpcy5tYXAyRW51bURhdGEoKTtcbiAgICAgICAgdGhpcy5zdWJtaXRNb2RhbC5lbWl0KHsgdmFsdWU6IGVudW1EYXRhIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS/neWtmOWJjeajgOafpVxuICAgICAqL1xuICAgIGNoZWNrQmVmb3JlU2F2ZSgpOiBib29sZWFuIHtcblxuICAgICAgICBjb25zdCBtc2cgPSB7XG4gICAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgICB0aXRsZTogJ+ezu+e7n+aPkOekuicsXG4gICAgICAgICAgICBtc2c6ICfor7fmt7vliqDmnprkuL7lgLzjgIInLFxuICAgICAgICAgICAgdGltZW91dDogMzAwMFxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLy8g4pGgIOepulxuICAgICAgICBpZiAoIXRoaXMudmFsdWUgfHwgdGhpcy52YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8g4pGhIOmdnuepuu+8jOWImeagoemqjOavj+S4queahOmUruWAvOaYr+WQpuS4uuepuu+8m1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFpdGVtLm5hbWUgfHwgIWl0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBtc2cubXNnID0gJ+aemuS4vuWAvOWSjOaemuS4vuWQjeensOWdh+S4jeWFgeiuuOS4uuepuuOAgic7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcobXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8g4pGiIOmUruS4jeWFgeiuuOmHjeWkje+8m1xuICAgICAgICBjb25zdCBlbnVtS2V5cyA9IHRoaXMudmFsdWUubWFwKGUgPT4gZS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGtleVNldCA9IG5ldyBTZXQoZW51bUtleXMpO1xuICAgICAgICBjb25zdCBleGNsdXNpdmVLZXlzID0gQXJyYXkuZnJvbShrZXlTZXQpO1xuICAgICAgICBpZiAoZW51bUtleXMubGVuZ3RoICE9PSBleGNsdXNpdmVLZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgbXNnLm1zZyA9ICfmnprkuL7lgLzkuI3lhYHorrjph43lpI3jgIInO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g4pGiIOWAvOS4jeWFgeiuuOmHjeWkje+8m1xuICAgICAgICBjb25zdCBlbnVtTmFtZXMgPSB0aGlzLnZhbHVlLm1hcChlID0+IGUubmFtZSk7XG4gICAgICAgIGNvbnN0IG5hbWVTZXQgPSBuZXcgU2V0KGVudW1OYW1lcyk7XG4gICAgICAgIGNvbnN0IGV4Y2x1c2l2ZU5hbWVzID0gQXJyYXkuZnJvbShuYW1lU2V0KTtcbiAgICAgICAgaWYgKGVudW1OYW1lcy5sZW5ndGggIT09IGV4Y2x1c2l2ZU5hbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgbXNnLm1zZyA9ICAn5p6a5Li+5ZCN56ew5LiN5YWB6K646YeN5aSN44CCJztcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuICAgIGFkZCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFsgLi4udGhpcy52YWx1ZSwgeyAgaWQ6ICh0aGlzLnZhbHVlLmxlbmd0aCArIDEpLCBuYW1lOiAnJywgdmFsdWU6ICcnICB9IF07XG4gICAgICAgIHRoaXMuY2hhbmdlRW1pdCgpO1xuICAgIH1cblxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMuZGcuY2hlY2tlZHM7XG4gICAgICAgIGlmIChyb3dzICYmIHJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5maWx0ZXIoIHYgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3dzLmZpbmRJbmRleChyID0+IHIuaWQgPT09IHYuaWQpID09PSAtMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VFbWl0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Uud2FybmluZygn6K+36ZKp6YCJ6KaB5Yig6Zmk55qE5pWw5o2u77yBJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWxldGVJdGVtKGlkKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLmZpbHRlciggdiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdi5pZCAhPT0gaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXQoKTtcbiAgICB9XG5cbiAgICBtb3ZlVG9wKCRldmVudDogTW91c2VFdmVudCwgaWQsIGluZGV4KSB7XG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWUuZmluZEluZGV4KG4gPT4gbi5pZCA9PT0gaWQpO1xuICAgICAgICAvLyBjb25zdCBpID0gaW5kZXg7XG4gICAgICAgIHRoaXMudmFsdWUudW5zaGlmdCh0aGlzLnZhbHVlW2ldKTtcbiAgICAgICAgdGhpcy52YWx1ZS5zcGxpY2UoaSArIDEsIDEpO1xuXG4gICAgICAgIHRoaXMudmFsdWUgPSBbLi4udGhpcy52YWx1ZV07XG4gICAgICAgIHRoaXMuY2hhbmdlRW1pdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbW92ZUJvdHRvbSgkZXZlbnQsIGlkLCBpbmRleCkge1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGlkKTtcbiAgICAgICAgLy8gY29uc3QgaSA9IGluZGV4O1xuICAgICAgICB0aGlzLnZhbHVlLnB1c2godGhpcy52YWx1ZVtpXSk7XG4gICAgICAgIHRoaXMudmFsdWUuc3BsaWNlKGksIDEpO1xuICAgICAgICB0aGlzLnZhbHVlID0gWy4uLnRoaXMudmFsdWVdO1xuICAgICAgICB0aGlzLmNoYW5nZUVtaXQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG1vdmVVcCgkZXZlbnQsIGlkLCBpbmRleCkge1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlLmZpbmRJbmRleChuID0+IG4uaWQgPT09IGlkKTtcbiAgICAgICAgLy8gY29uc3QgaSA9IGluZGV4O1xuICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgdGVtcEFyciA9IHRoaXMudmFsdWUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZS5zcGxpY2UoaSAtIDEsIDAsIC4uLnRlbXBBcnIpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFsuLi50aGlzLnZhbHVlXTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRW1pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBtb3ZlRG93bigkZXZlbnQsIGlkLCBpbmRleCkge1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgICBjb25zdCBpID0gdGhpcy52YWx1ZS5maW5kSW5kZXgobiA9PiBuLmlkID09PSBpZCk7XG4gICAgICAgIC8vIGNvbnN0IGkgPSBpbmRleDtcbiAgICAgICAgaWYgKGkgIT09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBBcnIgPSB0aGlzLnZhbHVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUuc3BsaWNlKGkgKyAxLCAwLCAuLi50ZW1wQXJyKTtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBbLi4udGhpcy52YWx1ZV07XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIl19