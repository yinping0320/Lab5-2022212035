import { ExpressionUtil } from '../utils/expression_util';
import { ENTITY_TEMPLATE } from './types';
export class EntityDependencyResolver {
    constructor(viewModelContext) {
        this.viewModelContext = viewModelContext;
        this.repository = this.viewModelContext.repository;
        this.entityTypeInfo = this.repository.entityTypeInfo;
    }
    /**
     * 解析用户表达式中的实体依赖
     * @param expr 用户配置的完整表达式
     * @returns
     */
    resolve(expr) {
        const groupFunctionDependencies = ExpressionUtil.getGroupFunctionDependency(expr, this.repository.entityTypeInfo);
        const entityDependencies = this.getEntityDependency(expr);
        // 去除错误的到子表的依赖
        if (groupFunctionDependencies && groupFunctionDependencies.length > 0 && entityDependencies && entityDependencies.length > 0) {
            groupFunctionDependencies.forEach((dep) => {
                const index = entityDependencies.findIndex(item => dep.startsWith(item));
                if (index !== -1) {
                    entityDependencies.splice(index, 1);
                }
            });
        }
        // 去重
        const merged = [...groupFunctionDependencies, ...entityDependencies];
        const deps = [...new Set(merged)];
        return deps;
    }
    /**
     * 获取合法的实体属性表达式
     * @param entityPropertyExpression 实体属性表达式
     * @returns
     */
    getValidEntityPropertyExpression(entityPropertyExpression) {
        const propPaths = entityPropertyExpression.split('.');
        let propInfo = null;
        try {
            propInfo = this.entityTypeInfo.getPropInfoByPath(propPaths);
        }
        catch (e) { }
        if (!propInfo) {
            if (propPaths.length > 1) {
                propPaths.pop();
                return this.getValidEntityPropertyExpression(propPaths.join('.'));
            }
            else {
                return null;
            }
        }
        else {
            return entityPropertyExpression.split('.');
        }
    }
    /**
     * 获取所有实体依赖
     * @param expr 表达式字符串
     * @returns
     */
    getEntityDependency(expr) {
        const deps = [];
        if (this.entityTypeInfo) {
            // 使用正则匹配出所有实体
            const regex = new RegExp(`[\\'\\"]?\\s*(${this.entityTypeInfo.entityInfo.nodeCode}|${this.entityTypeInfo.entityInfo.originalCode})[\\.\\[\\]a-zA-Z0-9_]+\\s*[\\'\\"]?`, 'g');
            const entityPropertyExpressions = expr.match(regex);
            if (Array.isArray(entityPropertyExpressions) && entityPropertyExpressions.length > 0) {
                // 解析出所有实体相关的字符串，以主实体名字开头，包含主实体属性或子表
                entityPropertyExpressions.forEach((item) => {
                    if (item.indexOf('.') === -1) {
                        console.warn(`无效的实体表达式:${item}`);
                        return;
                    }
                    // 去空格
                    item = item.trim().replace(/\"/g, '');
                    const paths = ExpressionUtil.convertToNodeCode(item, this.repository.entityTypeInfo);
                    item = paths.join('.');
                    // 截去主实体及点
                    item = item.substr(item.indexOf('.') + 1);
                    const dep = this.getValidEntityPropertyExpression(item);
                    if (dep && Array.isArray(dep) && dep.length > 0) {
                        // 此处必须加上主实体的名字来区分依赖的是实体还是其他类型的数据
                        dep.splice(0, 0, ENTITY_TEMPLATE);
                        deps.push(dep.join('/'));
                    }
                });
            }
        }
        else {
            console.warn(`获取实体类型信息失败，请重新编译改表单。`);
        }
        return deps;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5X2RlcGVuZGVuY3lfcmVzb2x2ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1kZXZraXQvIiwic291cmNlcyI6WyJsaWIvZXhwcmVzc2lvbi9yZXNvbHZlci9lbnRpdHlfZGVwZW5kZW5jeV9yZXNvbHZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGVBQWUsRUFBOEIsTUFBTSxTQUFTLENBQUM7QUFJdEUsTUFBTSxPQUFPLHdCQUF3QjtJQU1uQyxZQUFvQixnQkFBa0M7UUFBbEMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNwRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUM7UUFDbkQsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQztJQUN2RCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLE9BQU8sQ0FBQyxJQUFZO1FBQ3pCLE1BQU0seUJBQXlCLEdBQUcsY0FBYyxDQUFDLDBCQUEwQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2xILE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFELGNBQWM7UUFDZCxJQUFJLHlCQUF5QixJQUFJLHlCQUF5QixDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUM1SCx5QkFBeUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFXLEVBQUUsRUFBRTtnQkFDaEQsTUFBTSxLQUFLLEdBQUcsa0JBQWtCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENB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SSxHQUFHLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTt3QkFDL0MsaUNBQWlDO3dCQUNqQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsZUFBZSxDQUFDLENBQUM7d0JBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3FCQUMxQjtnQkFDSCxDQUFDLENBQUMsQ0FBQzthQUNKO1NBQ0Y7YUFBTTtZQUNMLE9BQU8sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUN0QztRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUVGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVR5cGVJbmZvIH0gZnJvbSAnLi4vLi4vZW50aXR5L2luZGV4JztcbmltcG9ydCB7IFJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9yZXBvc2l0b3J5L2luZGV4JztcbmltcG9ydCB7IEV4cHJlc3Npb25VdGlsIH0gZnJvbSAnLi4vdXRpbHMvZXhwcmVzc2lvbl91dGlsJztcbmltcG9ydCB7IEVOVElUWV9URU1QTEFURSwgR1JPVVBfRlVOQ1RJT05TLCBJUmVzb2x2ZXIgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFZpZXdNb2RlbENvbnRleHQgfSBmcm9tICcuLi8uLi92aWV3LW1vZGVsL2luZGV4JztcblxuXG5leHBvcnQgY2xhc3MgRW50aXR5RGVwZW5kZW5jeVJlc29sdmVyIGltcGxlbWVudHMgSVJlc29sdmVyIHtcblxuICBwcml2YXRlIHJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8YW55PjtcblxuICBwcml2YXRlIGVudGl0eVR5cGVJbmZvOiBEYXRhVHlwZUluZm87XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB2aWV3TW9kZWxDb250ZXh0OiBWaWV3TW9kZWxDb250ZXh0KSB7XG4gICAgdGhpcy5yZXBvc2l0b3J5ID0gdGhpcy52aWV3TW9kZWxDb250ZXh0LnJlcG9zaXRvcnk7XG4gICAgdGhpcy5lbnRpdHlUeXBlSW5mbyA9IHRoaXMucmVwb3NpdG9yeS5lbnRpdHlUeXBlSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiDop6PmnpDnlKjmiLfooajovr7lvI/kuK3nmoTlrp7kvZPkvp3otZZcbiAgICogQHBhcmFtIGV4cHIg55So5oi36YWN572u55qE5a6M5pW06KGo6L6+5byPXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgcHVibGljIHJlc29sdmUoZXhwcjogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGdyb3VwRnVuY3Rpb25EZXBlbmRlbmNpZXMgPSBFeHByZXNzaW9uVXRpbC5nZXRHcm91cEZ1bmN0aW9uRGVwZW5kZW5jeShleHByLCB0aGlzLnJlcG9zaXRvcnkuZW50aXR5VHlwZUluZm8pO1xuICAgIGNvbnN0IGVudGl0eURlcGVuZGVuY2llcyA9IHRoaXMuZ2V0RW50aXR5RGVwZW5kZW5jeShleHByKTtcbiAgICAvLyDljrvpmaTplJnor6/nmoTliLDlrZDooajnmoTkvp3otZZcbiAgICBpZiAoZ3JvdXBGdW5jdGlvbkRlcGVuZGVuY2llcyAmJiBncm91cEZ1bmN0aW9uRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgJiYgZW50aXR5RGVwZW5kZW5jaWVzICYmIGVudGl0eURlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICBncm91cEZ1bmN0aW9uRGVwZW5kZW5jaWVzLmZvckVhY2goKGRlcDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZW50aXR5RGVwZW5kZW5jaWVzLmZpbmRJbmRleChpdGVtID0+IGRlcC5zdGFydHNXaXRoKGl0ZW0pKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGVudGl0eURlcGVuZGVuY2llcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8g5Y676YeNXG4gICAgY29uc3QgbWVyZ2VkID0gWy4uLmdyb3VwRnVuY3Rpb25EZXBlbmRlbmNpZXMsIC4uLmVudGl0eURlcGVuZGVuY2llc107XG4gICAgY29uc3QgZGVwcyA9IFsuLi5uZXcgU2V0KG1lcmdlZCldO1xuICAgIHJldHVybiBkZXBzO1xuICB9XG4gIC8qKlxuICAgKiDojrflj5blkIjms5XnmoTlrp7kvZPlsZ7mgKfooajovr7lvI9cbiAgICogQHBhcmFtIGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbiDlrp7kvZPlsZ7mgKfooajovr7lvI9cbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwcml2YXRlIGdldFZhbGlkRW50aXR5UHJvcGVydHlFeHByZXNzaW9uKGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbjogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHByb3BQYXRocyA9IGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbi5zcGxpdCgnLicpO1xuICAgIGxldCBwcm9wSW5mbyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb3BJbmZvID0gdGhpcy5lbnRpdHlUeXBlSW5mby5nZXRQcm9wSW5mb0J5UGF0aChwcm9wUGF0aHMpO1xuICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgIGlmICghcHJvcEluZm8pIHtcbiAgICAgIGlmIChwcm9wUGF0aHMubGVuZ3RoID4gMSkge1xuICAgICAgICBwcm9wUGF0aHMucG9wKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbGlkRW50aXR5UHJvcGVydHlFeHByZXNzaW9uKHByb3BQYXRocy5qb2luKCcuJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb24uc3BsaXQoJy4nKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIOiOt+WPluaJgOacieWunuS9k+S+nei1llxuICAgKiBAcGFyYW0gZXhwciDooajovr7lvI/lrZfnrKbkuLJcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwcml2YXRlIGdldEVudGl0eURlcGVuZGVuY3koZXhwcjogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGRlcHMgPSBbXTtcbiAgICBpZiAodGhpcy5lbnRpdHlUeXBlSW5mbykge1xuICAgICAgLy8g5L2/55So5q2j5YiZ5Yy56YWN5Ye65omA5pyJ5a6e5L2TXG4gICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFtcXFxcJ1xcXFxcIl0/XFxcXHMqKCR7dGhpcy5lbnRpdHlUeXBlSW5mby5lbnRpdHlJbmZvLm5vZGVDb2RlfXwke3RoaXMuZW50aXR5VHlwZUluZm8uZW50aXR5SW5mby5vcmlnaW5hbENvZGV9KVtcXFxcLlxcXFxbXFxcXF1hLXpBLVowLTlfXStcXFxccypbXFxcXCdcXFxcXCJdP2AsICdnJyk7XG4gICAgICBjb25zdCBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zOiBSZWdFeHBNYXRjaEFycmF5ID0gZXhwci5tYXRjaChyZWdleCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zKSAmJiBlbnRpdHlQcm9wZXJ0eUV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8g6Kej5p6Q5Ye65omA5pyJ5a6e5L2T55u45YWz55qE5a2X56ym5Liy77yM5Lul5Li75a6e5L2T5ZCN5a2X5byA5aS077yM5YyF5ZCr5Li75a6e5L2T5bGe5oCn5oiW5a2Q6KGoXG4gICAgICAgIGVudGl0eVByb3BlcnR5RXhwcmVzc2lvbnMuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgaWYgKGl0ZW0uaW5kZXhPZignLicpID09PSAtMSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGDml6DmlYjnmoTlrp7kvZPooajovr7lvI86JHtpdGVtfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDljrvnqbrmoLxcbiAgICAgICAgICBpdGVtID0gaXRlbS50cmltKCkucmVwbGFjZSgvXFxcIi9nLCAnJyk7XG4gICAgICAgICAgY29uc3QgcGF0aHMgPSBFeHByZXNzaW9uVXRpbC5jb252ZXJ0VG9Ob2RlQ29kZShpdGVtLCB0aGlzLnJlcG9zaXRvcnkuZW50aXR5VHlwZUluZm8pO1xuICAgICAgICAgIGl0ZW0gPSBwYXRocy5qb2luKCcuJyk7XG4gICAgICAgICAgLy8g5oiq5Y675Li75a6e5L2T5Y+K54K5XG4gICAgICAgICAgaXRlbSA9IGl0ZW0uc3Vic3RyKGl0ZW0uaW5kZXhPZignLicpICsgMSk7XG4gICAgICAgICAgY29uc3QgZGVwID0gdGhpcy5nZXRWYWxpZEVudGl0eVByb3BlcnR5RXhwcmVzc2lvbihpdGVtKTtcbiAgICAgICAgICBpZiAoZGVwICYmIEFycmF5LmlzQXJyYXkoZGVwKSAmJiBkZXAubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8g5q2k5aSE5b+F6aG75Yqg5LiK5Li75a6e5L2T55qE5ZCN5a2X5p2l5Yy65YiG5L6d6LWW55qE5piv5a6e5L2T6L+Y5piv5YW25LuW57G75Z6L55qE5pWw5o2uXG4gICAgICAgICAgICBkZXAuc3BsaWNlKDAsIDAsIEVOVElUWV9URU1QTEFURSk7XG4gICAgICAgICAgICBkZXBzLnB1c2goZGVwLmpvaW4oJy8nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKGDojrflj5blrp7kvZPnsbvlnovkv6Hmga/lpLHotKXvvIzor7fph43mlrDnvJbor5HmlLnooajljZXjgIJgKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlcHM7XG4gIH1cblxufSJdfQ==