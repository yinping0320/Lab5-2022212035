/**
 * 用户自定义参数解析器
 */
export class CommentDependencyResolver {
    resolve(expr) {
        const dependencies = [];
        if (!expr || expr.length < 1) {
            return dependencies;
        }
        const defineRegex = /\/\*\*\s*__define__\((.*)\)\s*\*\//;
        const defineMatchArray = expr.match(defineRegex);
        if (defineMatchArray && defineMatchArray.length === 2) {
            const defineString = defineMatchArray[1].trim();
            let defineObject = null;
            try {
                defineObject = JSON.parse(defineString);
            }
            catch (e) {
                console.warn(`自定义依赖解析失败：${defineString}`);
            }
            if (defineObject && defineObject.hasOwnProperty('deps') && Array.isArray(defineObject['deps'])) {
                dependencies.push(...defineObject['deps']);
            }
        }
        return dependencies;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWVudF9kZXBlbmRlbmN5X3Jlc29sdmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2V4cHJlc3Npb24vcmVzb2x2ZXIvY29tbWVudF9kZXBlbmRlbmN5X3Jlc29sdmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBOztHQUVHO0FBQ0gsTUFBTSxPQUFPLHlCQUF5QjtJQUU3QixPQUFPLENBQUMsSUFBWTtRQUN6QixNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUM1QixPQUFPLFlBQVksQ0FBQztTQUNyQjtRQUNELE1BQU0sV0FBVyxHQUFHLG9DQUFvQyxDQUFDO1FBQ3pELE1BQU0sZ0JBQWdCLEdBQXFCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbkUsSUFBSSxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3JELE1BQU0sWUFBWSxHQUFXLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3hELElBQUksWUFBWSxHQUFHLElBQUksQ0FBQztZQUN4QixJQUFJO2dCQUNGLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQ3pDO1lBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLFlBQVksRUFBRSxDQUFDLENBQUM7YUFBRTtZQUMxRCxJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUU7Z0JBQzlGLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzthQUM1QztTQUNGO1FBQ0QsT0FBTyxZQUFZLENBQUM7SUFDdEIsQ0FBQztDQUVGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVJlc29sdmVyIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuLyoqXG4gKiDnlKjmiLfoh6rlrprkuYnlj4LmlbDop6PmnpDlmahcbiAqL1xuZXhwb3J0IGNsYXNzIENvbW1lbnREZXBlbmRlbmN5UmVzb2x2ZXIgaW1wbGVtZW50cyBJUmVzb2x2ZXIge1xuXG4gIHB1YmxpYyByZXNvbHZlKGV4cHI6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBbXTtcbiAgICBpZiAoIWV4cHIgfHwgZXhwci5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gZGVwZW5kZW5jaWVzO1xuICAgIH1cbiAgICBjb25zdCBkZWZpbmVSZWdleCA9IC9cXC9cXCpcXCpcXHMqX19kZWZpbmVfX1xcKCguKilcXClcXHMqXFwqXFwvLztcbiAgICBjb25zdCBkZWZpbmVNYXRjaEFycmF5OiBSZWdFeHBNYXRjaEFycmF5ID0gZXhwci5tYXRjaChkZWZpbmVSZWdleCk7XG4gICAgaWYgKGRlZmluZU1hdGNoQXJyYXkgJiYgZGVmaW5lTWF0Y2hBcnJheS5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGRlZmluZVN0cmluZzogc3RyaW5nID0gZGVmaW5lTWF0Y2hBcnJheVsxXS50cmltKCk7XG4gICAgICBsZXQgZGVmaW5lT2JqZWN0ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRlZmluZU9iamVjdCA9IEpTT04ucGFyc2UoZGVmaW5lU3RyaW5nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS53YXJuKGDoh6rlrprkuYnkvp3otZbop6PmnpDlpLHotKXvvJoke2RlZmluZVN0cmluZ31gKTsgfVxuICAgICAgaWYgKGRlZmluZU9iamVjdCAmJiBkZWZpbmVPYmplY3QuaGFzT3duUHJvcGVydHkoJ2RlcHMnKSAmJiBBcnJheS5pc0FycmF5KGRlZmluZU9iamVjdFsnZGVwcyddKSkge1xuICAgICAgICBkZXBlbmRlbmNpZXMucHVzaCguLi5kZWZpbmVPYmplY3RbJ2RlcHMnXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XG4gIH1cblxufSJdfQ==