/* eslint-disable no-case-declarations */
import { VariableParseService } from '../../variable/index';
/**
 * 任务链接
 */
class TaskLink {
    /**
     * 构造函数
     */
    constructor(from, to, condition) {
        this.from = from;
        this.to = to;
        this.condition = condition;
    }
    /**
     * 是否能够
     */
    canLink(context) {
        const type = typeof this.condition;
        let canLink;
        switch (type) {
            case 'boolean':
                canLink = this.condition;
                break;
            case 'function':
                canLink = this.condition(context);
                break;
            case 'string':
                const parseService = context.viewModelContext.injector.get(VariableParseService);
                canLink = parseService.evaluate(this.condition, context);
                break;
            default:
                canLink = false;
                break;
        }
        return canLink;
    }
}
export { TaskLink };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza19saW5rLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2NvbW1hbmQvZmxvdy90YXNrX2xpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUNBQXlDO0FBQ3pDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBVzVEOztHQUVHO0FBQ0gsTUFBTSxRQUFRO0lBb0JaOztPQUVHO0lBQ0gsWUFBWSxJQUFZLEVBQUUsRUFBVSxFQUFFLFNBQXFDO1FBQ3pFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxFQUFFLEdBQUssRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVEOztPQUVHO0lBQ0ksT0FBTyxDQUFDLE9BQXVCO1FBQ3BDLE1BQU0sSUFBSSxHQUFHLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUNuQyxJQUFJLE9BQU8sQ0FBQztRQUNaLFFBQVEsSUFBSSxFQUFFO1lBQ1osS0FBSyxTQUFTO2dCQUNaLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBb0IsQ0FBQztnQkFDcEMsTUFBTTtZQUNSLEtBQUssVUFBVTtnQkFDYixPQUFPLEdBQUksSUFBSSxDQUFDLFNBQXNCLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2hELE1BQU07WUFDUixLQUFLLFFBQVE7Z0JBQ1gsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQztnQkFDakYsT0FBTyxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQW1CLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25FLE1BQU07WUFDUjtnQkFDRSxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNoQixNQUFNO1NBQ1Q7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQVksUUFBUSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jYXNlLWRlY2xhcmF0aW9ucyAqL1xuaW1wb3J0IHsgVmFyaWFibGVQYXJzZVNlcnZpY2UgfSBmcm9tICcuLi8uLi92YXJpYWJsZS9pbmRleCc7XG5pbXBvcnQgeyBDb21tYW5kQ29udGV4dCB9IGZyb20gJy4uL2NvbW1hbmRfY29udGV4dCc7XG5pbXBvcnQgeyBJbmplY3RvciB9IGZyb20gJy4uLy4uL2NvcmUvaW5kZXgnO1xuXG4vKipcbiAqIOS7u+WKoeWHveaVsFxuICogQHBhcmFtcyByZXN1bHQg5LiK5LiA5q2l5omn6KGM57uT5p6cXG4gKiBAcGFyYW1zIGNvbnRleHQg5omn6KGM5LiK5LiL5paHXG4gKi9cbnR5cGUgTGlua0Z1bmMgPSAoY29udGV4dDogQ29tbWFuZENvbnRleHQpID0+IGJvb2xlYW47XG5cbi8qKlxuICog5Lu75Yqh6ZO+5o6lXG4gKi9cbmNsYXNzIFRhc2tMaW5rIHtcblxuICAvKipcbiAgICog5rqQ5Lu75YqhXG4gICAqL1xuICBmcm9tOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIOebruagh+S7u+WKoVxuICAgKi9cbiAgdG86IHN0cmluZztcblxuICAvKipcbiAgICog5omn6KGM5p2h5Lu2XG4gICAqIDHjgIHooajovr7lvI/vvJtcbiAgICogMuOAgeW4g+WwlOWAvO+8m1xuICAgKiAz44CB5Ye95pWwXG4gICAqL1xuICBjb25kaXRpb246IHN0cmluZyB8IGJvb2xlYW58IExpbmtGdW5jO1xuXG4gIC8qKlxuICAgKiDmnoTpgKDlh73mlbBcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZyb206IHN0cmluZywgdG86IHN0cmluZywgY29uZGl0aW9uOiBzdHJpbmcgfCBib29sZWFufCBMaW5rRnVuYykge1xuICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgdGhpcy50byAgID0gdG87XG4gICAgdGhpcy5jb25kaXRpb24gPSBjb25kaXRpb247XG4gIH1cblxuICAvKipcbiAgICog5piv5ZCm6IO95aSfXG4gICAqL1xuICBwdWJsaWMgY2FuTGluayhjb250ZXh0OiBDb21tYW5kQ29udGV4dCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgdGhpcy5jb25kaXRpb247XG4gICAgbGV0IGNhbkxpbms7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgY2FuTGluayA9IHRoaXMuY29uZGl0aW9uIGFzIGJvb2xlYW47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICBjYW5MaW5rID0gKHRoaXMuY29uZGl0aW9uIGFzIExpbmtGdW5jKShjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBjb25zdCBwYXJzZVNlcnZpY2UgPSBjb250ZXh0LnZpZXdNb2RlbENvbnRleHQuaW5qZWN0b3IuZ2V0KFZhcmlhYmxlUGFyc2VTZXJ2aWNlKTtcbiAgICAgICAgY2FuTGluayA9IHBhcnNlU2VydmljZS5ldmFsdWF0ZSh0aGlzLmNvbmRpdGlvbiBhcyBzdHJpbmcsIGNvbnRleHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNhbkxpbmsgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBjYW5MaW5rO1xuICB9XG59XG5cbmV4cG9ydCB7IExpbmtGdW5jLCBUYXNrTGluayB9O1xuIl19