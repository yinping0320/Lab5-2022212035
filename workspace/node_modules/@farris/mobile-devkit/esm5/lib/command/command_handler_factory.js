/**
 * 命令处理器工厂相关定义
 * @author Witt<jiwt@inspur.com>
 */
/**
 * 命令处理器工厂
 */
var CommandHandlerFactory = /** @class */ (function () {
    /**
     * 构造函数
     * @param handlerRegistry  命令处理注册器
     * @param extenderRegistry 命令处理扩展注册器
     */
    function CommandHandlerFactory(handlerRegistry, extenderRegistry, viewModelContext) {
        this.handlerRegistry = handlerRegistry;
        this.extenderRegistry = extenderRegistry;
        this.viewModelContext = viewModelContext;
    }
    /**
     * 创建命令处理器
     * @param   commandName 命令名称
     * @returns 对应的命令处理器实例
     */
    CommandHandlerFactory.prototype.create = function (commandName) {
        var rawHandler = this.handlerRegistry.get(commandName);
        rawHandler.init(this.viewModelContext);
        var extenders = this.extenderRegistry.get(commandName);
        // 遍历extenders，依次对handler进行扩展
        return extenders.reduce(function (handler, extender) {
            return extender.extend(handler);
        }, rawHandler);
    };
    return CommandHandlerFactory;
}());
export { CommandHandlerFactory };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZF9oYW5kbGVyX2ZhY3RvcnkuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1kZXZraXQvIiwic291cmNlcyI6WyJsaWIvY29tbWFuZC9jb21tYW5kX2hhbmRsZXJfZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7QUFRSDs7R0FFRztBQUNIO0lBQ0U7Ozs7T0FJRztJQUNILCtCQUNVLGVBQXVDLEVBQ3ZDLGdCQUFnRCxFQUNoRCxnQkFBa0M7UUFGbEMsb0JBQWUsR0FBZixlQUFlLENBQXdCO1FBQ3ZDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBZ0M7UUFDaEQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtJQUU1QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLHNDQUFNLEdBQWIsVUFBYyxXQUFtQjtRQUMvQixJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RCxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3ZDLElBQU0sU0FBUyxHQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFMUQsNkJBQTZCO1FBQzdCLE9BQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFDLE9BQXVCLEVBQUUsUUFBZ0M7WUFDaEYsT0FBTyxRQUFRLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNqQixDQUFDO0lBRUgsNEJBQUM7QUFBRCxDQUFDLEFBN0JELElBNkJDO0FBRUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWRveS7pOWkhOeQhuWZqOW3peWOguebuOWFs+WumuS5iVxuICogQGF1dGhvciBXaXR0PGppd3RAaW5zcHVyLmNvbT5cbiAqL1xuXG5pbXBvcnQgeyBWaWV3TW9kZWxDb250ZXh0IH0gZnJvbSAnLi4vdmlldy1tb2RlbC9pbmRleCc7XG5pbXBvcnQgeyBDb21tYW5kSGFuZGxlciB9IGZyb20gJy4vY29tbWFuZF9oYW5kbGVyJztcbmltcG9ydCB7IENvbW1hbmRIYW5kbGVyUmVnaXN0cnkgfSBmcm9tICcuL2NvbW1hbmRfaGFuZGxlcl9yZWdpc3RyeSc7XG5pbXBvcnQgeyBDb21tYW5kSGFuZGxlckV4dGVuZGVyIH0gZnJvbSAnLi9jb21tYW5kX2hhbmRsZXJfZXh0ZW5kZXInO1xuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5IH0gZnJvbSAnLi9jb21tYW5kX2hhbmRsZXJfZXh0ZW5kZXJfcmVnaXN0cnknO1xuXG4vKipcbiAqIOWRveS7pOWkhOeQhuWZqOW3peWOglxuICovXG5jbGFzcyBDb21tYW5kSGFuZGxlckZhY3Rvcnkge1xuICAvKipcbiAgICog5p6E6YCg5Ye95pWwXG4gICAqIEBwYXJhbSBoYW5kbGVyUmVnaXN0cnkgIOWRveS7pOWkhOeQhuazqOWGjOWZqFxuICAgKiBAcGFyYW0gZXh0ZW5kZXJSZWdpc3RyeSDlkb3ku6TlpITnkIbmianlsZXms6jlhozlmahcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaGFuZGxlclJlZ2lzdHJ5OiBDb21tYW5kSGFuZGxlclJlZ2lzdHJ5LFxuICAgIHByaXZhdGUgZXh0ZW5kZXJSZWdpc3RyeTogQ29tbWFuZEhhbmRsZXJFeHRlbmRlclJlZ2lzdHJ5LFxuICAgIHByaXZhdGUgdmlld01vZGVsQ29udGV4dDogVmlld01vZGVsQ29udGV4dFxuICApIHtcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rlkb3ku6TlpITnkIblmahcbiAgICogQHBhcmFtICAgY29tbWFuZE5hbWUg5ZG95Luk5ZCN56ewXG4gICAqIEByZXR1cm5zIOWvueW6lOeahOWRveS7pOWkhOeQhuWZqOWunuS+i1xuICAgKi9cbiAgcHVibGljIGNyZWF0ZShjb21tYW5kTmFtZTogc3RyaW5nKTogQ29tbWFuZEhhbmRsZXIge1xuICAgIGNvbnN0IHJhd0hhbmRsZXIgPSB0aGlzLmhhbmRsZXJSZWdpc3RyeS5nZXQoY29tbWFuZE5hbWUpO1xuICAgIHJhd0hhbmRsZXIuaW5pdCh0aGlzLnZpZXdNb2RlbENvbnRleHQpO1xuICAgIGNvbnN0IGV4dGVuZGVycyAgPSB0aGlzLmV4dGVuZGVyUmVnaXN0cnkuZ2V0KGNvbW1hbmROYW1lKTtcblxuICAgIC8vIOmBjeWOhmV4dGVuZGVyc++8jOS+neasoeWvuWhhbmRsZXLov5vooYzmianlsZVcbiAgICByZXR1cm4gZXh0ZW5kZXJzLnJlZHVjZSgoaGFuZGxlcjogQ29tbWFuZEhhbmRsZXIsIGV4dGVuZGVyOiBDb21tYW5kSGFuZGxlckV4dGVuZGVyKSA9PiB7XG4gICAgICByZXR1cm4gZXh0ZW5kZXIuZXh0ZW5kKGhhbmRsZXIpO1xuICAgIH0sIHJhd0hhbmRsZXIpO1xuICB9XG5cbn1cblxuZXhwb3J0IHsgQ29tbWFuZEhhbmRsZXJGYWN0b3J5IH07XG4iXX0=