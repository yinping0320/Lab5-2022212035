/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, Renderer2, NgZone, Input } from '@angular/core';
var FInputTipsDirective = /** @class */ (function () {
    function FInputTipsDirective(el, ngzone, render) {
        this.el = el;
        this.ngzone = ngzone;
        this.render = render;
        this.cloneEl = null;
        this.tipsText = "";
        this._enableTips = true;
    }
    Object.defineProperty(FInputTipsDirective.prototype, "enableTips", {
        get: /**
         * @return {?}
         */
        function () {
            return this._enableTips;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this._enableTips !== value) {
                this._enableTips = value;
                this.changeEventBind();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @return {?}
     */
    FInputTipsDirective.prototype.createCloneEl = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.el.nativeElement) {
            return;
        }
        /** @type {?} */
        var global = {
            cloneCSSProperties: [
                'line-height', 'letter-spacing',
                'font-size', 'font-family', 'font-style', 'font-weight', 'border',
                'padding', 'height'
            ]
        };
        /** @type {?} */
        var el$ = window.getComputedStyle(this.el.nativeElement);
        this.cloneEl = this.render.createElement('span');
        this.cloneEl['innerText'] = el$['value'];
        global.cloneCSSProperties.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            _this.cloneEl.style[item] = el$.getPropertyValue(item);
        }));
        this.render.addClass(this.cloneEl, 'f-dir-hidden-el');
        this.render.appendChild(document.body, this.cloneEl);
    };
    /**
     * @return {?}
     */
    FInputTipsDirective.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.changeEventBind();
    };
    /**
     * @return {?}
     */
    FInputTipsDirective.prototype.changeEventBind = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.enableTips) {
            this.ngzone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                _this.mouseEnterListener = _this.onMouseEnterHandler.bind(_this);
                _this.el.nativeElement.addEventListener('mouseenter', _this.mouseEnterListener);
                _this.mouseLeaveListener = _this.onMouseLeaveHandler.bind(_this);
                _this.el.nativeElement.addEventListener('mouseleave', _this.mouseLeaveListener);
            }));
        }
        else {
            if (this.mouseEnterListener) {
                this.el.nativeElement.removeEventListener('mouseenter', this.mouseEnterListener);
                this.mouseEnterListener = null;
                this.el.nativeElement.removeEventListener('mouseleave', this.mouseLeaveListener);
                this.mouseLeaveListener = null;
            }
        }
    };
    /**
     * @return {?}
     */
    FInputTipsDirective.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.cloneEl) {
            this.render.removeChild(document.body, this.cloneEl);
        }
    };
    /**
     * @return {?}
     */
    FInputTipsDirective.prototype.onMouseEnterHandler = /**
     * @return {?}
     */
    function () {
        this.changeTitle();
    };
    /**
     * @return {?}
     */
    FInputTipsDirective.prototype.onMouseLeaveHandler = /**
     * @return {?}
     */
    function () {
        // 移除提示
        this.render.setAttribute(this.el.nativeElement, 'title', '');
    };
    /**
     * @private
     * @return {?}
     */
    FInputTipsDirective.prototype.changeTitle = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.cloneEl) {
            this.createCloneEl();
        }
        this.tipsText = this.el.nativeElement['value'];
        this.cloneEl['innerText'] = this.tipsText;
        this.ngzone.runOutsideAngular((/**
         * @return {?}
         */
        function () {
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.cloneEl.getBoundingClientRect().width > _this.el.nativeElement.getBoundingClientRect().width) {
                    _this.render.setAttribute(_this.el.nativeElement, "title", _this.tipsText);
                }
                else {
                    _this.onMouseLeaveHandler();
                }
            }), 0);
        }));
    };
    FInputTipsDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[f-input-tips]'
                },] }
    ];
    /** @nocollapse */
    FInputTipsDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: NgZone },
        { type: Renderer2 }
    ]; };
    FInputTipsDirective.propDecorators = {
        enableTips: [{ type: Input, args: ['f-input-tips',] }]
    };
    return FInputTipsDirective;
}());
export { FInputTipsDirective };
if (false) {
    /**
     * @type {?}
     * @private
     */
    FInputTipsDirective.prototype.cloneEl;
    /**
     * @type {?}
     * @private
     */
    FInputTipsDirective.prototype.tipsText;
    /** @type {?} */
    FInputTipsDirective.prototype.mouseEnterListener;
    /** @type {?} */
    FInputTipsDirective.prototype.mouseLeaveListener;
    /**
     * @type {?}
     * @private
     */
    FInputTipsDirective.prototype._enableTips;
    /**
     * @type {?}
     * @private
     */
    FInputTipsDirective.prototype.el;
    /** @type {?} */
    FInputTipsDirective.prototype.ngzone;
    /**
     * @type {?}
     * @private
     */
    FInputTipsDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRUaXBzLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktdG9vbHRpcC8iLCJzb3VyY2VzIjpbImxpYi9pbnB1dFRpcHMuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQWdCLE1BQU0sRUFBYSxLQUFLLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBRXhIO0lBcUJJLDZCQUFvQixFQUFjLEVBQVMsTUFBYyxFQUFVLE1BQWlCO1FBQWhFLE9BQUUsR0FBRixFQUFFLENBQVk7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQWpCNUUsWUFBTyxHQUFHLElBQUksQ0FBQztRQUNmLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFJZCxnQkFBVyxHQUFHLElBQUksQ0FBQztJQWEzQixDQUFDO0lBWkQsc0JBQ0ksMkNBQVU7Ozs7UUFNZDtZQUNJLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUM1QixDQUFDOzs7OztRQVRELFVBQ2UsS0FBSztZQUNoQixJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssS0FBSyxFQUFFO2dCQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztnQkFDekIsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQzFCO1FBQ0wsQ0FBQzs7O09BQUE7Ozs7O0lBUU8sMkNBQWE7Ozs7SUFBckI7UUFBQSxpQkFpQkM7UUFoQkcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFO1lBQUUsT0FBTztTQUFFOztZQUNqQyxNQUFNLEdBQUc7WUFDWCxrQkFBa0IsRUFBRTtnQkFDaEIsYUFBYSxFQUFFLGdCQUFnQjtnQkFDL0IsV0FBVyxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLFFBQVE7Z0JBQ2pFLFNBQVMsRUFBRSxRQUFRO2FBQ3RCO1NB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LEVBQUUsQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQzFDLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCOzs7UUFBQztZQUMxQixVQUFVOzs7WUFBQztnQkFDUCxJQUFJLEtBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLEVBQUU7b0JBQ2xHLEtBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLE9BQU8sRUFBRSxLQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzNFO3FCQUFNO29CQUNILEtBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2lCQUM5QjtZQUNMLENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztRQUNWLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7Z0JBM0ZKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsZ0JBQWdCO2lCQUM3Qjs7OztnQkFKbUIsVUFBVTtnQkFBMkIsTUFBTTtnQkFBL0IsU0FBUzs7OzZCQVlwQyxLQUFLLFNBQUMsY0FBYzs7SUFrRnpCLDBCQUFDO0NBQUEsQUE1RkQsSUE0RkM7U0F6RlksbUJBQW1COzs7Ozs7SUFDNUIsc0NBQXVCOzs7OztJQUN2Qix1Q0FBc0I7O0lBQ3RCLGlEQUF3Qjs7SUFFeEIsaURBQXdCOzs7OztJQUN4QiwwQ0FBMkI7Ozs7O0lBWWYsaUNBQXNCOztJQUFFLHFDQUFxQjs7Ozs7SUFBRSxxQ0FBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgSG9zdExpc3RlbmVyLCBOZ1pvbmUsIE9uRGVzdHJveSwgSW5wdXQsIEFmdGVyVmlld0luaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbZi1pbnB1dC10aXBzXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIEZJbnB1dFRpcHNEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQge1xyXG4gICAgcHJpdmF0ZSBjbG9uZUVsID0gbnVsbDtcclxuICAgIHByaXZhdGUgdGlwc1RleHQgPSBcIlwiO1xyXG4gICAgbW91c2VFbnRlckxpc3RlbmVyOiBhbnk7XHJcbiAgICAvLyDlpoLmnpzmmK/kuI3mmK/nlKjpu5jorqTnmoRUaXRsZe+8jOatpOWxnuaAp+ebuOWFs+eahOWKn+iDveWPr+S7peenu+mZpFxyXG4gICAgbW91c2VMZWF2ZUxpc3RlbmVyOiBhbnk7XHJcbiAgICBwcml2YXRlIF9lbmFibGVUaXBzID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgnZi1pbnB1dC10aXBzJylcclxuICAgIHNldCBlbmFibGVUaXBzKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VuYWJsZVRpcHMgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZVRpcHMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VFdmVudEJpbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZW5hYmxlVGlwcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlVGlwcztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwdWJsaWMgbmd6b25lOiBOZ1pvbmUsIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUNsb25lRWwoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgY29uc3QgZ2xvYmFsID0ge1xyXG4gICAgICAgICAgICBjbG9uZUNTU1Byb3BlcnRpZXM6IFtcclxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCcsICdsZXR0ZXItc3BhY2luZycsXHJcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJywgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc3R5bGUnLCAnZm9udC13ZWlnaHQnLCAnYm9yZGVyJyxcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nJywgJ2hlaWdodCdcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZWwkID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmNsb25lRWwgPSB0aGlzLnJlbmRlci5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgdGhpcy5jbG9uZUVsWydpbm5lclRleHQnXSA9IGVsJFsndmFsdWUnXTtcclxuICAgICAgICBnbG9iYWwuY2xvbmVDU1NQcm9wZXJ0aWVzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvbmVFbC5zdHlsZVtpdGVtXSA9IGVsJC5nZXRQcm9wZXJ0eVZhbHVlKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuY2xvbmVFbCwgJ2YtZGlyLWhpZGRlbi1lbCcpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmJvZHksIHRoaXMuY2xvbmVFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRXZlbnRCaW5kKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNoYW5nZUV2ZW50QmluZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVUaXBzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW91c2VFbnRlckxpc3RlbmVyID0gdGhpcy5vbk1vdXNlRW50ZXJIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMubW91c2VFbnRlckxpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW91c2VMZWF2ZUxpc3RlbmVyID0gdGhpcy5vbk1vdXNlTGVhdmVIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMubW91c2VMZWF2ZUxpc3RlbmVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW91c2VFbnRlckxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMubW91c2VFbnRlckxpc3RlbmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW91c2VFbnRlckxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5tb3VzZUxlYXZlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZUxlYXZlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xvbmVFbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVDaGlsZChkb2N1bWVudC5ib2R5LCB0aGlzLmNsb25lRWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uTW91c2VFbnRlckhhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUaXRsZSgpO1xyXG4gICAgfVxyXG4gICAgb25Nb3VzZUxlYXZlSGFuZGxlcigpIHtcclxuICAgICAgICAvLyDnp7vpmaTmj5DnpLpcclxuICAgICAgICB0aGlzLnJlbmRlci5zZXRBdHRyaWJ1dGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAndGl0bGUnLCAnJyk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNoYW5nZVRpdGxlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jbG9uZUVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2xvbmVFbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpcHNUZXh0ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50Wyd2YWx1ZSddO1xyXG4gICAgICAgIHRoaXMuY2xvbmVFbFsnaW5uZXJUZXh0J10gPSB0aGlzLnRpcHNUZXh0O1xyXG4gICAgICAgIHRoaXMubmd6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9uZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID4gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0QXR0cmlidXRlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgXCJ0aXRsZVwiLCB0aGlzLnRpcHNUZXh0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlTGVhdmVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==