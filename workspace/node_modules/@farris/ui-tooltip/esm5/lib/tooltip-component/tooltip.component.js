/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, TemplateRef, ElementRef, ViewChild, ViewContainerRef, ViewEncapsulation, Renderer2 } from '@angular/core';
var TooltipComponent = /** @class */ (function () {
    function TooltipComponent(el, render) {
        this.el = el;
        this.render = render;
        this.zIndex = "1070";
        this.contentIsString = true;
        this._tipWidth = '';
        this._tipCls = '';
        /* 位置 */
        this.placement = 'top';
        this.rectifyPlacement = 'top';
        this.rectifyGutter = 20;
        /* 位置样式 */
        this.positionStyle = {};
    }
    Object.defineProperty(TooltipComponent.prototype, "content", {
        get: /**
         * @return {?}
         */
        function () {
            return this.nfContent;
        },
        /* 普通文本内容 */
        set: /* 普通文本内容 */
        /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value instanceof TemplateRef) {
                this.contentIsString = false;
                this.contentViewf.createEmbeddedView(value);
            }
            else {
                this.contentIsString = true;
                this.nfContent = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipWidth;
        },
        /**因为表单生成没有排除factory,不能使用模板 */
        set: /**
         * 因为表单生成没有排除factory,不能使用模板
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipWidth) {
                if (value) {
                    this.render.setStyle(this.innerNode.nativeElement, 'width', value);
                    this.render.setStyle(this.innerNode.nativeElement, 'max-width', 'none');
                }
                else {
                    this.render.removeStyle(this.innerNode.nativeElement, 'width');
                    this.render.removeStyle(this.innerNode.nativeElement, 'max-width');
                }
                this._tipWidth = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TooltipComponent.prototype, "tipCls", {
        get: /**
         * @return {?}
         */
        function () {
            return this._tipCls;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value != this._tipCls) {
                //移除旧样式
                this._tipCls && this.render.removeClass(this.el.nativeElement, this._tipCls);
                //追加新样式
                value && this.render.addClass(this.el.nativeElement, value);
                this._tipCls = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    TooltipComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this.hostBoundingClientRect) {
            this.judgeWidth();
            this.autoRectifyDirection();
            this.calculatePosition(this.hostBoundingClientRect);
        }
    };
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     */
    /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    TooltipComponent.prototype.judgeWidth = /**
     * 规则判断默认样式下出现滚动条，尺寸从默认变成大号
     * @return {?}
     */
    function () {
        if (this.innerNode.nativeElement.scrollHeight > this.innerNode.nativeElement.clientHeight) {
            this.render.addClass(this.innerNode.nativeElement, 'tooltip-inner-lg');
        }
    };
    // 自动纠正方向
    // 自动纠正方向
    /**
     * @private
     * @return {?}
     */
    TooltipComponent.prototype.autoRectifyDirection = 
    // 自动纠正方向
    /**
     * @private
     * @return {?}
     */
    function () {
        // 标记默认值
        this.rectifyPlacement = this.placement;
        // 整个提示位置
        /** @type {?} */
        var tooltipSize = this.tooltipNode.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var arrowSize = this.arrowNode.nativeElement.getBoundingClientRect();
        /*不考虑，提示框太大的情况,只考虑一次转换位置，
        太复杂的场景，实际项目中不会出现，简化处理此问题
        if(this.referenceBoundingRect.width>tooltipSize){
        }*/
        switch (this.placement) {
            case 'top':
            case 'top-left':
            case 'top-right':
                if (Math.abs(this.hostBoundingClientRect.top - this.referenceBoundingRect.top) < tooltipSize.height + arrowSize.height) {
                    // 高度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('top', 'bottom');
                }
                break;
            case 'bottom':
            case 'bottom-left':
            case 'bottom-right':
                if (Math.abs(this.hostBoundingClientRect.bottom - this.referenceBoundingRect.bottom) < tooltipSize.height + arrowSize.height) {
                    // 高度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('bottom', 'top');
                }
                break;
            case 'right':
            case 'right-top':
            case 'right-bottom':
                if (Math.abs(this.hostBoundingClientRect.right - this.referenceBoundingRect.right) < tooltipSize.width + arrowSize.width) {
                    // 宽度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('right', 'left');
                }
                break;
            case 'left':
            case 'left-top':
            case 'left-bottom':
                if (Math.abs(this.hostBoundingClientRect.left - this.referenceBoundingRect.left) < tooltipSize.width + arrowSize.width) {
                    // 宽度放不开，转向
                    this.rectifyPlacement = this.rectifyPlacement.replace('left', 'right');
                }
                break;
        }
        if (this.rectifyPlacement != this.placement) {
            this.tooltipNode.nativeElement.classList.remove('bs-tooltip-' + this.offsetDirection(this.placement));
            this.tooltipNode.nativeElement.classList.add('bs-tooltip-' + this.offsetDirection(this.rectifyPlacement));
        }
    };
    /**
     * 判断是否超出边界
     */
    /**
     * 判断是否超出边界
     * @private
     * @param {?} rect
     * @param {?} value
     * @return {?}
     */
    TooltipComponent.prototype.isOverBounding = /**
     * 判断是否超出边界
     * @private
     * @param {?} rect
     * @param {?} value
     * @return {?}
     */
    function (rect, value) {
        /** @type {?} */
        var isOver = false;
        /** @type {?} */
        var newValue = 0;
        switch (rect) {
            case 'left':
                if (value <= this.referenceBoundingRect.left) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.left + this.rectifyGutter;
                }
                break;
            case 'right':
                if (value >= this.referenceBoundingRect.right) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.right - this.rectifyGutter;
                }
                break;
            case 'top':
                if (value <= this.referenceBoundingRect.top) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.top + this.rectifyGutter;
                }
                break;
            case 'bottom':
                if (value >= this.referenceBoundingRect.bottom) {
                    isOver = true;
                    newValue = this.referenceBoundingRect.bottom - this.rectifyGutter;
                }
                break;
        }
        return { isOver: isOver, newValue: newValue };
    };
    /**
     * @private
     * @param {?} datas
     * @param {?=} specialEl
     * @return {?}
     */
    TooltipComponent.prototype.containsEl = /**
     * @private
     * @param {?} datas
     * @param {?=} specialEl
     * @return {?}
     */
    function (datas, specialEl) {
        if (specialEl === void 0) { specialEl = ''; }
        if (!specialEl) {
            specialEl = this.rectifyPlacement;
        }
        for (var i = 0; i < datas.length; i++) {
            if (datas[i] == specialEl)
                return true;
        }
        return false;
    };
    /* 计算tooltip最新位置 */
    /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    TooltipComponent.prototype.calculatePosition = /* 计算tooltip最新位置 */
    /**
     * @param {?} hostPosition
     * @return {?}
     */
    function (hostPosition) {
        /** @type {?} */
        var top = 0;
        /** @type {?} */
        var left = 0;
        /** @type {?} */
        var right = 0;
        /** @type {?} */
        var bottom = 0;
        // 整个提示位置
        /** @type {?} */
        var tooltipSize = this.tooltipNode.nativeElement.getBoundingClientRect();
        /** @type {?} */
        var arrowSize = this.arrowNode.nativeElement.getBoundingClientRect();
        switch (this.rectifyPlacement) {
            case 'top':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
                right = left + tooltipSize.width;
                break;
            case 'left':
                top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
                left = hostPosition.left - tooltipSize.width - 2;
                break;
            case 'right':
                top = hostPosition.top + (hostPosition.height - tooltipSize.height) / 2;
                left = hostPosition.right + 2;
                break;
            case 'bottom':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.left + (hostPosition.width - tooltipSize.width) / 2;
                right = left + tooltipSize.width;
                break;
            case 'top-left':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.left;
                right = left + tooltipSize.width;
                break;
            case 'top-right':
                top = hostPosition.top - tooltipSize.height - 2;
                left = hostPosition.right - tooltipSize.width;
                right = hostPosition.right;
                break;
            case 'right-top':
                top = hostPosition.top;
                left = hostPosition.right + 2;
                this.arrowNode.nativeElement.style.top = '10%';
                break;
            case 'right-bottom':
                top = hostPosition.bottom - tooltipSize.height;
                left = hostPosition.right + 2;
                this.arrowNode.nativeElement.style.bottom = '10%';
                break;
            case 'bottom-left':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.left;
                right = left + tooltipSize.width;
                break;
            case 'bottom-right':
                top = hostPosition.bottom + arrowSize.height + 2;
                left = hostPosition.right - tooltipSize.width;
                right = hostPosition.right;
                break;
            case 'left-top':
                top = hostPosition.top;
                left = hostPosition.left - tooltipSize.width - 2;
                this.arrowNode.nativeElement.style.top = '10%';
                break;
            case 'left-bottom':
                top = hostPosition.bottom - tooltipSize.height;
                left = hostPosition.left - tooltipSize.width - 2;
                this.arrowNode.nativeElement.style.bottom = '10%';
        }
        /** @type {?} */
        var overResult;
        /** @type {?} */
        var arrowLeft = 0;
        /** @type {?} */
        var arrowTop = 0;
        switch (this.rectifyPlacement) {
            case 'top':
            case 'top-left':
            case 'top-right':
            case 'bottom':
            case 'bottom-left':
            case 'bottom-right':
                overResult = this.isOverBounding('left', left);
                if (overResult.isOver) {
                    left = overResult.newValue;
                }
                else {
                    overResult = this.isOverBounding('right', right);
                    if (overResult.isOver) {
                        left = overResult.newValue - tooltipSize.width;
                    }
                }
                arrowLeft = left - hostPosition.left - hostPosition.width * 0.5 + arrowSize.width * 0.5;
                if (this.rectifyPlacement.indexOf('-left') > 0) {
                    arrowLeft += hostPosition.width * 0.4;
                }
                else if (this.rectifyPlacement.indexOf('-right') > 0) {
                    arrowLeft -= hostPosition.width * 0.4;
                }
                this.arrowNode.nativeElement.style.left = Math.abs(arrowLeft) + 'px';
                break;
            default:
                overResult = this.isOverBounding('top', top);
                if (overResult.isOver) {
                    top = overResult.newValue;
                }
                else {
                    overResult = this.isOverBounding('bottom', bottom);
                    if (overResult.isOver) {
                        top = overResult.newValue - tooltipSize.height;
                    }
                }
                arrowTop = top - hostPosition.top - hostPosition.height * 0.5 + arrowSize.height * 0.5;
                ;
                if (this.rectifyPlacement.indexOf('-top') > 0) {
                    arrowTop += hostPosition.height * 0.4;
                }
                else if (this.rectifyPlacement.indexOf('-bottom') > 0) {
                    arrowTop -= hostPosition.height * 0.4;
                }
                this.arrowNode.nativeElement.style.top = Math.abs(arrowTop) + 'px';
        }
        this.tooltipNode.nativeElement.style.top = top + 'px';
        this.tooltipNode.nativeElement.style.left = left + 'px';
    };
    /*
    *12个位置名解析
    * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
    */
    /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @param {?=} tplacement
     * @return {?}
     */
    TooltipComponent.prototype.offsetDirection = /*
        *12个位置名解析
        * 因表单生成没有排除factory,而且使用了[class],只能在此处变更
        */
    /**
     * @param {?=} tplacement
     * @return {?}
     */
    function (tplacement) {
        if (tplacement === void 0) { tplacement = ''; }
        if (!tplacement) {
            tplacement = this.placement;
        }
        if (tplacement.indexOf('-') !== -1) {
            /** @type {?} */
            var index = tplacement.indexOf('-');
            return tplacement.substring(0, index);
        }
        return tplacement;
    };
    TooltipComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-tooltip',
                    template: "<div #tooltipEle [class]=\"('bs-tooltip-'+offsetDirection())+' tooltip show'\" [style.zIndex]=\"zIndex\">\r\n    <div #arrowEle class=\"arrow\"></div>\r\n    <div #innerEle class=\"tooltip-inner\">\r\n        <div #contentViewf class=\"tooltip-tmpl\">\r\n            <div *ngIf=\"contentIsString\" class=\"tooltip-text\" [innerHtml]=\"nfContent|tooltipHtml\"></div>\r\n            <ng-container *ngIf=\"!contentIsString\"> {{nfContent}}</ng-container>\r\n        </div>       \r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".bs-tooltip-bottom .arrow,.bs-tooltip-top .arrow{left:50%}.bs-tooltip-left .arrow,.bs-tooltip-right .arrow{top:25%}"]
                }] }
    ];
    /** @nocollapse */
    TooltipComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    TooltipComponent.propDecorators = {
        contentViewf: [{ type: ViewChild, args: ['contentViewf', { read: ViewContainerRef },] }],
        tooltipNode: [{ type: ViewChild, args: ['tooltipEle', { read: ElementRef },] }],
        arrowNode: [{ type: ViewChild, args: ['arrowEle', { read: ElementRef },] }],
        innerNode: [{ type: ViewChild, args: ['innerEle', { read: ElementRef },] }],
        zIndex: [{ type: Input }],
        content: [{ type: Input }],
        tipWidth: [{ type: Input }],
        tipCls: [{ type: Input }],
        placement: [{ type: Input }]
    };
    return TooltipComponent;
}());
export { TooltipComponent };
if (false) {
    /** @type {?} */
    TooltipComponent.prototype.contentViewf;
    /** @type {?} */
    TooltipComponent.prototype.tooltipNode;
    /** @type {?} */
    TooltipComponent.prototype.arrowNode;
    /** @type {?} */
    TooltipComponent.prototype.innerNode;
    /** @type {?} */
    TooltipComponent.prototype.zIndex;
    /** @type {?} */
    TooltipComponent.prototype.contentIsString;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipWidth;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype._tipCls;
    /** @type {?} */
    TooltipComponent.prototype.placement;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.rectifyPlacement;
    /** @type {?} */
    TooltipComponent.prototype.hostBoundingClientRect;
    /** @type {?} */
    TooltipComponent.prototype.referenceBoundingRect;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.rectifyGutter;
    /** @type {?} */
    TooltipComponent.prototype.nfContent;
    /** @type {?} */
    TooltipComponent.prototype.positionStyle;
    /** @type {?} */
    TooltipComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    TooltipComponent.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9vbHRpcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL3VpLXRvb2x0aXAvIiwic291cmNlcyI6WyJsaWIvdG9vbHRpcC1jb21wb25lbnQvdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQ3pDLFNBQVMsRUFBRSxnQkFBZ0IsRUFBZSxpQkFBaUIsRUFBaUIsU0FBUyxFQUN4RixNQUFNLGVBQWUsQ0FBQztBQUV2QjtJQThFSSwwQkFDVyxFQUFjLEVBQ2IsTUFBaUI7UUFEbEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNiLFdBQU0sR0FBTixNQUFNLENBQVc7UUFqRXBCLFdBQU0sR0FBRyxNQUFNLENBQUM7UUFFekIsb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFlZixjQUFTLEdBQUcsRUFBRSxDQUFDO1FBa0JmLFlBQU8sR0FBRyxFQUFFLENBQUM7O1FBZVosY0FBUyxHQUFHLEtBQUssQ0FBQztRQUNuQixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFLekIsa0JBQWEsR0FBRyxFQUFFLENBQUM7O1FBSzNCLGtCQUFhLEdBQUcsRUFBRSxDQUFDO0lBTW5CLENBQUM7SUEvREQsc0JBQ0kscUNBQU87Ozs7UUFTWDtZQUNJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUMxQixDQUFDO1FBYkQsWUFBWTs7Ozs7O1FBQ1osVUFDWSxLQUFnQztZQUN4QyxJQUFJLEtBQUssWUFBWSxXQUFXLEVBQUU7Z0JBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO2dCQUM3QixJQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQy9DO2lCQUFNO2dCQUNILElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO2dCQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQzth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LGtDQUF5Qjs7SUFFekIsMkNBQXVCOzs7OztJQWV2QixxQ0FBdUI7Ozs7O0lBa0J2QixtQ0FBcUI7O0lBZXJCLHFDQUEyQjs7Ozs7SUFDM0IsNENBQWlDOztJQUVqQyxrREFBNEI7O0lBRTVCLGlEQUEyQjs7Ozs7SUFDM0IseUNBQTJCOztJQUUzQixxQ0FBcUM7O0lBR3JDLHlDQUFtQjs7SUFHZiw4QkFBcUI7Ozs7O0lBQ3JCLGtDQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIElucHV0LCBUZW1wbGF0ZVJlZiwgRWxlbWVudFJlZiwgT25Jbml0LFxyXG4gICAgVmlld0NoaWxkLCBWaWV3Q29udGFpbmVyUmVmLCBIb3N0QmluZGluZywgVmlld0VuY2Fwc3VsYXRpb24sIFNpbXBsZUNoYW5nZXMsIFJlbmRlcmVyMiwgTmdab25lXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFmdGVyVmlld0luaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy10b29sdGlwJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi90b29sdGlwLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3Rvb2x0aXAuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sdGlwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdjb250ZW50Vmlld2YnLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY29udGVudFZpZXdmOiBWaWV3Q29udGFpbmVyUmVmO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3Rvb2x0aXBFbGUnLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgdG9vbHRpcE5vZGU6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdhcnJvd0VsZScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBhcnJvd05vZGU6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdpbm5lckVsZScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBpbm5lck5vZGU6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQElucHV0KCkgekluZGV4ID0gXCIxMDcwXCI7XHJcblxyXG4gICAgY29udGVudElzU3RyaW5nID0gdHJ1ZTtcclxuICAgIC8qIOaZrumAmuaWh+acrOWGheWuuSAqL1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBjb250ZW50KHZhbHVlOiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxhbnk+KSB7XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50SXNTdHJpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50Vmlld2YuY3JlYXRlRW1iZWRkZWRWaWV3KHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRJc1N0cmluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubmZDb250ZW50ID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRlbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmZDb250ZW50O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfdGlwV2lkdGggPSAnJztcclxuICAgIC8qKuWboOS4uuihqOWNleeUn+aIkOayoeacieaOkumZpGZhY3Rvcnks5LiN6IO95L2/55So5qih5p2/ICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IHRpcFdpZHRoKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9IHRoaXMuX3RpcFdpZHRoKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ3dpZHRoJywgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGhpcy5pbm5lck5vZGUubmF0aXZlRWxlbWVudCwgJ21heC13aWR0aCcsICdub25lJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlci5yZW1vdmVTdHlsZSh0aGlzLmlubmVyTm9kZS5uYXRpdmVFbGVtZW50LCAnd2lkdGgnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLnJlbW92ZVN0eWxlKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQsICdtYXgtd2lkdGgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl90aXBXaWR0aCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB0aXBXaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGlwV2lkdGg7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF90aXBDbHMgPSAnJztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgdGlwQ2xzKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9IHRoaXMuX3RpcENscykge1xyXG4gICAgICAgICAgICAvL+enu+mZpOaXp+agt+W8j1xyXG4gICAgICAgICAgICB0aGlzLl90aXBDbHMgJiYgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3ModGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzLl90aXBDbHMpO1xyXG4gICAgICAgICAgICAvL+i/veWKoOaWsOagt+W8j1xyXG4gICAgICAgICAgICB2YWx1ZSAmJiB0aGlzLnJlbmRlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5fdGlwQ2xzID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHRpcENscygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGlwQ2xzO1xyXG4gICAgfVxyXG4gICAgLyog5L2N572uICovXHJcbiAgICBASW5wdXQoKSBwbGFjZW1lbnQgPSAndG9wJztcclxuICAgIHByaXZhdGUgcmVjdGlmeVBsYWNlbWVudCA9ICd0b3AnO1xyXG4gICAgLy8g566t5aS05L2N572u5Y+C54WnXHJcbiAgICBob3N0Qm91bmRpbmdDbGllbnRSZWN0OiBhbnk7XHJcbiAgICAvLyDovrnnlYzkvY3nva7lj4LnhadcclxuICAgIHJlZmVyZW5jZUJvdW5kaW5nUmVjdDogYW55O1xyXG4gICAgcHJpdmF0ZSByZWN0aWZ5R3V0dGVyID0gMjA7XHJcblxyXG4gICAgbmZDb250ZW50OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjxhbnk+O1xyXG5cclxuICAgIC8qIOS9jee9ruagt+W8jyAqL1xyXG4gICAgcG9zaXRpb25TdHlsZSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwcml2YXRlIHJlbmRlcjogUmVuZGVyZXIyXHJcbiAgICApIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgIH1cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuanVkZ2VXaWR0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9SZWN0aWZ5RGlyZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUG9zaXRpb24odGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOinhOWImeWIpOaWrem7mOiupOagt+W8j+S4i+WHuueOsOa7muWKqOadoe+8jOWwuuWvuOS7jum7mOiupOWPmOaIkOWkp+WPt1xyXG4gICAgICovXHJcbiAgICBqdWRnZVdpZHRoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlubmVyTm9kZS5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodCA+IHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLmFkZENsYXNzKHRoaXMuaW5uZXJOb2RlLm5hdGl2ZUVsZW1lbnQsICd0b29sdGlwLWlubmVyLWxnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g6Ieq5Yqo57qg5q2j5pa55ZCRXHJcbiAgICBwcml2YXRlIGF1dG9SZWN0aWZ5RGlyZWN0aW9uKCkge1xyXG4gICAgICAgIC8vIOagh+iusOm7mOiupOWAvFxyXG4gICAgICAgIHRoaXMucmVjdGlmeVBsYWNlbWVudCA9IHRoaXMucGxhY2VtZW50O1xyXG4gICAgICAgIC8vIOaVtOS4quaPkOekuuS9jee9rlxyXG4gICAgICAgIGNvbnN0IHRvb2x0aXBTaXplID0gdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGFycm93U2l6ZSA9IHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgLyrkuI3ogIPomZHvvIzmj5DnpLrmoYblpKrlpKfnmoTmg4XlhrUs5Y+q6ICD6JmR5LiA5qyh6L2s5o2i5L2N572u77yMXHJcbiAgICAgICAg5aSq5aSN5p2C55qE5Zy65pmv77yM5a6e6ZmF6aG555uu5Lit5LiN5Lya5Ye6546w77yM566A5YyW5aSE55CG5q2k6Zeu6aKYXHJcbiAgICAgICAgaWYodGhpcy5yZWZlcmVuY2VCb3VuZGluZ1JlY3Qud2lkdGg+dG9vbHRpcFNpemUpe1xyXG4gICAgICAgIH0qL1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5wbGFjZW1lbnQpIHtcclxuICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgY2FzZSAndG9wLWxlZnQnOlxyXG4gICAgICAgICAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuaG9zdEJvdW5kaW5nQ2xpZW50UmVjdC50b3AgLSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC50b3ApIDwgdG9vbHRpcFNpemUuaGVpZ2h0ICsgYXJyb3dTaXplLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmrmOW6puaUvuS4jeW8gO+8jOi9rOWQkVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjdGlmeVBsYWNlbWVudCA9IHRoaXMucmVjdGlmeVBsYWNlbWVudC5yZXBsYWNlKCd0b3AnLCAnYm90dG9tJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tLWxlZnQnOlxyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuaG9zdEJvdW5kaW5nQ2xpZW50UmVjdC5ib3R0b20gLSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5ib3R0b20pIDwgdG9vbHRpcFNpemUuaGVpZ2h0ICsgYXJyb3dTaXplLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmrmOW6puaUvuS4jeW8gO+8jOi9rOWQkVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjdGlmeVBsYWNlbWVudCA9IHRoaXMucmVjdGlmeVBsYWNlbWVudC5yZXBsYWNlKCdib3R0b20nLCAndG9wJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICBjYXNlICdyaWdodC10b3AnOlxyXG4gICAgICAgICAgICBjYXNlICdyaWdodC1ib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuaG9zdEJvdW5kaW5nQ2xpZW50UmVjdC5yaWdodCAtIHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnJpZ2h0KSA8IHRvb2x0aXBTaXplLndpZHRoICsgYXJyb3dTaXplLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5a695bqm5pS+5LiN5byA77yM6L2s5ZCRXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50LnJlcGxhY2UoJ3JpZ2h0JywgJ2xlZnQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgY2FzZSAnbGVmdC10b3AnOlxyXG4gICAgICAgICAgICBjYXNlICdsZWZ0LWJvdHRvbSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5ob3N0Qm91bmRpbmdDbGllbnRSZWN0LmxlZnQgLSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5sZWZ0KSA8IHRvb2x0aXBTaXplLndpZHRoICsgYXJyb3dTaXplLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5a695bqm5pS+5LiN5byA77yM6L2s5ZCRXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0aWZ5UGxhY2VtZW50ID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50LnJlcGxhY2UoJ2xlZnQnLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVjdGlmeVBsYWNlbWVudCAhPSB0aGlzLnBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBOb2RlLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYnMtdG9vbHRpcC0nICsgdGhpcy5vZmZzZXREaXJlY3Rpb24odGhpcy5wbGFjZW1lbnQpKTtcclxuICAgICAgICAgICAgdGhpcy50b29sdGlwTm9kZS5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JzLXRvb2x0aXAtJyArIHRoaXMub2Zmc2V0RGlyZWN0aW9uKHRoaXMucmVjdGlmeVBsYWNlbWVudCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5piv5ZCm6LaF5Ye66L6555WMXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNPdmVyQm91bmRpbmcocmVjdCwgdmFsdWUpIHtcclxuICAgICAgICBsZXQgaXNPdmVyID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0gMDtcclxuICAgICAgICBzd2l0Y2ggKHJlY3QpIHtcclxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPD0gdGhpcy5yZWZlcmVuY2VCb3VuZGluZ1JlY3QubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5sZWZ0ICsgdGhpcy5yZWN0aWZ5R3V0dGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+PSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5yaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5yaWdodCAtIHRoaXMucmVjdGlmeUd1dHRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIDw9IHRoaXMucmVmZXJlbmNlQm91bmRpbmdSZWN0LnRvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC50b3AgKyB0aGlzLnJlY3RpZnlHdXR0ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+PSB0aGlzLnJlZmVyZW5jZUJvdW5kaW5nUmVjdC5ib3R0b20pIHtcclxuICAgICAgICAgICAgICAgICAgICBpc092ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5yZWZlcmVuY2VCb3VuZGluZ1JlY3QuYm90dG9tIC0gdGhpcy5yZWN0aWZ5R3V0dGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGlzT3ZlciwgbmV3VmFsdWUgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnRhaW5zRWwoZGF0YXMsIHNwZWNpYWxFbCA9ICcnKSB7XHJcbiAgICAgICAgaWYgKCFzcGVjaWFsRWwpIHtcclxuICAgICAgICAgICAgc3BlY2lhbEVsID0gdGhpcy5yZWN0aWZ5UGxhY2VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhc1tpXSA9PSBzcGVjaWFsRWwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIOiuoeeul3Rvb2x0aXDmnIDmlrDkvY3nva4gKi9cclxuICAgIGNhbGN1bGF0ZVBvc2l0aW9uKGhvc3RQb3NpdGlvbjogYW55KSB7XHJcbiAgICAgICAgbGV0IHRvcCA9IDA7XHJcbiAgICAgICAgbGV0IGxlZnQgPSAwO1xyXG4gICAgICAgIGxldCByaWdodCA9IDA7XHJcbiAgICAgICAgbGV0IGJvdHRvbSA9IDA7XHJcbiAgICAgICAgLy8g5pW05Liq5o+Q56S65L2N572uXHJcbiAgICAgICAgY29uc3QgdG9vbHRpcFNpemUgPSB0aGlzLnRvb2x0aXBOb2RlLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgYXJyb3dTaXplID0gdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnJlY3RpZnlQbGFjZW1lbnQpIHtcclxuICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi50b3AgLSB0b29sdGlwU2l6ZS5oZWlnaHQgLSAyO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0ICsgKGhvc3RQb3NpdGlvbi53aWR0aCAtIHRvb2x0aXBTaXplLndpZHRoKSAvIDI7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGxlZnQgKyB0b29sdGlwU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcclxuICAgICAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi50b3AgKyAoaG9zdFBvc2l0aW9uLmhlaWdodCAtIHRvb2x0aXBTaXplLmhlaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5sZWZ0IC0gdG9vbHRpcFNpemUud2lkdGggLSAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi50b3AgKyAoaG9zdFBvc2l0aW9uLmhlaWdodCAtIHRvb2x0aXBTaXplLmhlaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCArIDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcclxuICAgICAgICAgICAgICAgIHRvcCA9IGhvc3RQb3NpdGlvbi5ib3R0b20gKyBhcnJvd1NpemUuaGVpZ2h0ICsgMjtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCArIChob3N0UG9zaXRpb24ud2lkdGggLSB0b29sdGlwU2l6ZS53aWR0aCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQgPSBsZWZ0ICsgdG9vbHRpcFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG9wLWxlZnQnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCAtIHRvb2x0aXBTaXplLmhlaWdodCAtIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGxlZnQgKyB0b29sdGlwU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcCAtIHRvb2x0aXBTaXplLmhlaWdodCAtIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLnJpZ2h0IC0gdG9vbHRpcFNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGhvc3RQb3NpdGlvbi5yaWdodDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyaWdodC10b3AnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcDtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ucmlnaHQgKyAyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAnMTAlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyaWdodC1ib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSAtIHRvb2x0aXBTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ucmlnaHQgKyAyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd05vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5ib3R0b20gPSAnMTAlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tbGVmdCc6XHJcbiAgICAgICAgICAgICAgICB0b3AgPSBob3N0UG9zaXRpb24uYm90dG9tICsgYXJyb3dTaXplLmhlaWdodCArIDI7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gaG9zdFBvc2l0aW9uLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICByaWdodCA9IGxlZnQgKyB0b29sdGlwU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSArIGFycm93U2l6ZS5oZWlnaHQgKyAyO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGhvc3RQb3NpdGlvbi5yaWdodCAtIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgcmlnaHQgPSBob3N0UG9zaXRpb24ucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGVmdC10b3AnOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLnRvcDtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCAtIHRvb2x0aXBTaXplLndpZHRoIC0gMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gJzEwJSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbGVmdC1ib3R0b20nOlxyXG4gICAgICAgICAgICAgICAgdG9wID0gaG9zdFBvc2l0aW9uLmJvdHRvbSAtIHRvb2x0aXBTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBob3N0UG9zaXRpb24ubGVmdCAtIHRvb2x0aXBTaXplLndpZHRoIC0gMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzEwJSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBvdmVyUmVzdWx0O1xyXG4gICAgICAgIGxldCBhcnJvd0xlZnQgPSAwO1xyXG4gICAgICAgIGxldCBhcnJvd1RvcCA9IDBcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucmVjdGlmeVBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AnOlxyXG4gICAgICAgICAgICBjYXNlICd0b3AtbGVmdCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3RvcC1yaWdodCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgICAgICAgICAgIG92ZXJSZXN1bHQgPSB0aGlzLmlzT3ZlckJvdW5kaW5nKCdsZWZ0JywgbGVmdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlclJlc3VsdC5pc092ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gb3ZlclJlc3VsdC5uZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlclJlc3VsdCA9IHRoaXMuaXNPdmVyQm91bmRpbmcoJ3JpZ2h0JywgcmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyUmVzdWx0LmlzT3Zlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gb3ZlclJlc3VsdC5uZXdWYWx1ZSAtIHRvb2x0aXBTaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFycm93TGVmdCA9IGxlZnQgLSBob3N0UG9zaXRpb24ubGVmdCAtIGhvc3RQb3NpdGlvbi53aWR0aCAqIDAuNSArIGFycm93U2l6ZS53aWR0aCAqIDAuNTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY3RpZnlQbGFjZW1lbnQuaW5kZXhPZignLWxlZnQnKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJvd0xlZnQgKz0gaG9zdFBvc2l0aW9uLndpZHRoICogMC40O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlY3RpZnlQbGFjZW1lbnQuaW5kZXhPZignLXJpZ2h0JykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dMZWZ0IC09IGhvc3RQb3NpdGlvbi53aWR0aCAqIDAuNDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dOb2RlLm5hdGl2ZUVsZW1lbnQuc3R5bGUubGVmdCA9IE1hdGguYWJzKGFycm93TGVmdCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBvdmVyUmVzdWx0ID0gdGhpcy5pc092ZXJCb3VuZGluZygndG9wJywgdG9wKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlclJlc3VsdC5pc092ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3AgPSBvdmVyUmVzdWx0Lm5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyUmVzdWx0ID0gdGhpcy5pc092ZXJCb3VuZGluZygnYm90dG9tJywgYm90dG9tKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlclJlc3VsdC5pc092ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gb3ZlclJlc3VsdC5uZXdWYWx1ZSAtIHRvb2x0aXBTaXplLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcnJvd1RvcCA9IHRvcCAtIGhvc3RQb3NpdGlvbi50b3AgLSBob3N0UG9zaXRpb24uaGVpZ2h0ICogMC41ICsgYXJyb3dTaXplLmhlaWdodCAqIDAuNTs7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWN0aWZ5UGxhY2VtZW50LmluZGV4T2YoJy10b3AnKSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJvd1RvcCArPSBob3N0UG9zaXRpb24uaGVpZ2h0ICogMC40O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlY3RpZnlQbGFjZW1lbnQuaW5kZXhPZignLWJvdHRvbScpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93VG9wIC09IGhvc3RQb3NpdGlvbi5oZWlnaHQgKiAwLjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93Tm9kZS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IE1hdGguYWJzKGFycm93VG9wKSArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG9vbHRpcE5vZGUubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xyXG4gICAgICAgIHRoaXMudG9vbHRpcE5vZGUubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qIFxyXG4gICAgKjEy5Liq5L2N572u5ZCN6Kej5p6QIFxyXG4gICAgKiDlm6DooajljZXnlJ/miJDmsqHmnInmjpLpmaRmYWN0b3J5LOiAjOS4lOS9v+eUqOS6hltjbGFzc10s5Y+q6IO95Zyo5q2k5aSE5Y+Y5pu0XHJcbiAgICAqL1xyXG4gICAgb2Zmc2V0RGlyZWN0aW9uKHRwbGFjZW1lbnQgPSAnJykge1xyXG4gICAgICAgIGlmICghdHBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICB0cGxhY2VtZW50ID0gdGhpcy5wbGFjZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0cGxhY2VtZW50LmluZGV4T2YoJy0nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0cGxhY2VtZW50LmluZGV4T2YoJy0nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRwbGFjZW1lbnQuc3Vic3RyaW5nKDAsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRwbGFjZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuIl19