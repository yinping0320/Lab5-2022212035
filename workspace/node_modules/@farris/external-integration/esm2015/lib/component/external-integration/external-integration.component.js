/**
 * @fileoverview added by tsickle
 * Generated from: lib/component/external-integration/external-integration.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, ElementRef, EventEmitter, forwardRef, Injector, Input, Optional, Output, ViewChild, ViewContainerRef } from "@angular/core";
import { DialogComponent } from "@farris/ui-dialog";
import { VariableParseService, ViewModel } from "@farris/devkit";
import { ExternalIntegrationService } from "./external-integration-service";
import { NgControl, NG_VALUE_ACCESSOR } from "@angular/forms";
import { Observable, of } from "rxjs";
import { ListViewComponent } from "@farris/ui-list-view";
export class ExternalIntegrationComponent {
    /**
     * @param {?} vm
     * @param {?} el
     * @param {?} extIntgrtnSrvc
     * @param {?} variableParseService
     * @param {?} resolver
     * @param {?} inj
     */
    constructor(vm, el, extIntgrtnSrvc, variableParseService, resolver, inj) {
        this.vm = vm;
        this.el = el;
        this.extIntgrtnSrvc = extIntgrtnSrvc;
        this.variableParseService = variableParseService;
        this.resolver = resolver;
        this.inj = inj;
        /**
         * 模态框宽
         */
        this.width = 960;
        /**
         * 模态框高
         */
        this.height = 577;
        this.fieldText = "";
        this.placeholder = "请选择";
        // 是否只读
        this.readonly = false;
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 10, right: 10 };
        /**
         * 指令回填sap数据
         */
        this.selectSapData = new EventEmitter();
        this.afterOnblur = new EventEmitter();
        /**
         * 多表数据集合
         */
        this.tableData = [];
        /**
         * 模态框导航栏当前选中项
         */
        this.currentLink = {};
        /**
         * 模态框确定按钮是否可用
         */
        this.ensureFlag = true;
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px"
        };
        this.beforeClose = (/**
         * @return {?}
         */
        () => {
            this.tableData = [];
            this.ensureFlag = true;
            this.sendSapData();
            return of(true);
        });
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) { }
    /**
     * @return {?}
     */
    fieldTextChange() {
        /** @type {?} */
        const pathArr = this.getBindingPathArray();
        this.vm.bindingData.setValue(pathArr.concat(this.ngControl.name), this.fieldText, true, true);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() { }
    /**
     * @return {?}
     */
    ngOnDestroy() { }
    /**
     * @param {?} obj
     * @return {?}
     */
    writeValue(obj) {
        this.fieldText = obj;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) { }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) { }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) { }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.ngControl = this.inj.get(NgControl);
        // 卡片绑定onblur事件，表格再grid-external-integration中绑定onblur事件
        if (this.mappingType != "grid") {
            this.input.nativeElement.onblur = (/**
             * @return {?}
             */
            () => {
                this.callSapService();
            });
        }
        this.extIntgrtnSrvc.sapData.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            this.sapDataHandle(data);
        }));
    }
    /**
     * 打开模态框
     * @return {?}
     */
    showDialog() {
        this.farrisListView.listClick.emit({
            data: [this.tableData[0]],
            index: 0,
            checkChangeEvent: false
        });
        this.farrisListView.clickItem = this.tableData[0];
        this.dialog.show();
        return false;
    }
    /**
     * 调用sap外部服务，出参在ngOninit监听
     * @return {?}
     */
    callSapService() {
        this.fieldTextChange();
        this.extIntgrtnSrvc.queryExtIntegrationService(this.externalParams, this.serviceCode);
    }
    /**
     * 处理sap出参
     * @param {?} data sap出参
     * @return {?}
     */
    sapDataHandle(data) {
        if (!data) {
            return;
        }
        /** @type {?} */
        let tableNameList = Object.keys(data);
        /** @type {?} */
        let mapTableList = this.getTableListFromMapFields();
        // 取交集
        tableNameList = tableNameList.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return mapTableList.indexOf(item) != -1;
        }));
        // 多表场景
        if (tableNameList.length > 1) {
            // 校验是否弹出模态框
            /** @type {?} */
            let openDialogFlag = this.checkMultiTableData(data, tableNameList);
            if (openDialogFlag == "open") {
                // 组装模态框数据
                this.assembleTableData(data);
                this.showDialog();
            }
            else if (openDialogFlag == "backfill") {
                // 多表，每个表只有一条数据
                /** @type {?} */
                let backfillData = {};
                tableNameList.forEach((/**
                 * @param {?} tableName
                 * @return {?}
                 */
                tableName => {
                    Object.assign(backfillData, this.assembleSapData(tableName, data[tableName][0]));
                }));
                this.sendSapData(backfillData);
            }
            else {
                // 多表无数据
                this.sendSapData();
            }
        }
        else if (tableNameList.length == 1) {
            /** @type {?} */
            let tableName = tableNameList[0];
            /** @type {?} */
            let sapDataLength = (data[tableName] || []).length;
            if (sapDataLength > 0) {
                if (sapDataLength == 1) {
                    // 一个表只有一条数据
                    /** @type {?} */
                    let sapData = this.assembleSapData(tableName, data[tableName][0]);
                    this.sendSapData(sapData);
                }
                else if (sapDataLength > 1) {
                    // 一个表有多条数据
                    this.assembleTableData(data);
                    this.showDialog();
                    return;
                }
            }
        }
        else {
            // 处理查询异常，editor没有endPending
            this.sendSapData();
        }
    }
    /**
     * @param {?} data
     * @param {?} tableNameList
     * @return {?}
     */
    checkMultiTableData(data, tableNameList) {
        /** @type {?} */
        let openDialogFlag = "";
        for (let index = 0; index < tableNameList.length; index++) {
            /** @type {?} */
            let tableName = tableNameList[index];
            if (data[tableName].length > 1) {
                openDialogFlag = "open";
                break;
            }
            else if (data[tableName].length == 0 && openDialogFlag != "backfill") {
                openDialogFlag = "none";
                continue;
            }
            openDialogFlag = "backfill";
        }
        return openDialogFlag;
    }
    /**
     * 组装模态框数据
     * @param {?} data sap出参
     * @return {?}
     */
    assembleTableData(data) {
        /** @type {?} */
        let tableNameList = Object.keys(data);
        /** @type {?} */
        let mapTableList = this.getTableListFromMapFields();
        // 取交集
        mapTableList = mapTableList.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            return tableNameList.indexOf(item) != -1;
        }));
        if (mapTableList.length > 0) {
            // 遍历sap映射表，组装表及对应数据
            mapTableList.forEach((/**
             * @param {?} mapTable
             * @return {?}
             */
            mapTable => {
                // 组装模态框中单表数据
                /** @type {?} */
                let tableInfo = this.assembleTableInfo(mapTable, data);
                if (tableInfo &&
                    Object.keys(tableInfo).length > 0 &&
                    (tableInfo.data || []).length > 0) {
                    this.tableData.push(tableInfo);
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    getTableListFromMapFields() {
        // 获取需要回填的表
        /** @type {?} */
        let mapKeyList = Object.keys(this.myField);
        // 定义sap映射表集合
        /** @type {?} */
        let mapTableList = [];
        (mapKeyList || []).forEach((/**
         * @param {?} mapKey
         * @return {?}
         */
        mapKey => {
            // 在映射关系中获取sap出参中的表集合
            mapTableList.push(mapKey.split(".")[0]);
        }));
        // 去重
        mapTableList = Array.from(new Set(mapTableList));
        return mapTableList;
    }
    /**
     * 组装模态框中单表数据
     * @param {?} mapTable 表名
     * @param {?} data sap出参
     * @return {?} 模态框单表数据对象
     */
    assembleTableInfo(mapTable, data) {
        // 模态框单表数据对象
        /** @type {?} */
        let tableInfo = {};
        // 表头集合
        /** @type {?} */
        let tableColumnList = [];
        // 遍历sap出参表信息，获取表头中文、表名
        (this.extTableSchemas || []).forEach((/**
         * @param {?} tableSchema
         * @return {?}
         */
        tableSchema => {
            if (tableSchema.code == mapTable) {
                tableInfo.name = tableSchema.name;
                // 模拟主键，保证farris-grid组件【单选】功能正常
                /** @type {?} */
                let idColumn = {};
                idColumn.field = "id";
                idColumn.title = "序号";
                tableColumnList.push(idColumn);
                // 组装表头
                tableSchema.columns.forEach((/**
                 * @param {?} column
                 * @return {?}
                 */
                column => {
                    /** @type {?} */
                    let tableColumn = {};
                    tableColumn.field = column.code;
                    tableColumn.title = column.name;
                    tableColumnList.push(tableColumn);
                }));
                tableInfo.columns = tableColumnList;
                tableInfo.code = mapTable;
                // 给表数据增加模拟主键
                (data[mapTable] || []).forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                (item, index) => {
                    item["id"] = index + 1;
                }));
                tableInfo.data = data[mapTable];
            }
        }));
        return tableInfo;
    }
    /**
     * 导航栏点击事件
     * @param {?} event 导航栏信息
     * @return {?}
     */
    listClick(event) {
        /** @type {?} */
        let clickData = event.data;
        if (event.data.disable) {
            return false;
        }
        else {
            if (typeof this.currentLink["data"] !== "undefined") {
                if (clickData[0].code === this.currentLink["data"][0].code) {
                    return false;
                }
                else {
                    this.currentLink = event;
                }
            }
            else {
                this.currentLink = event;
            }
        }
    }
    /**
     * 模态框，确定，取消按钮
     * @param {?} flag ensure:确定按钮，cancel：取消按钮
     * @return {?}
     */
    confirm(flag) {
        // 点击确定按钮
        if (flag == "ensure") {
            /** @type {?} */
            let sapData = {};
            // 遍历模态框表数据，组装回填数据
            for (let index = 0; index < this.tableData.length; index++) {
                /** @type {?} */
                let tableInfo = this.tableData[index];
                Object.assign(sapData, this.assembleSapData(tableInfo.code, tableInfo.selectedData.data));
            }
            this.sendSapData(sapData);
        }
        // 清空模态框数据
        this.tableData = [];
        // 关闭模态框
        this.dialog.close();
    }
    /**
     * 选中一行事件
     * @param {?} selectedRow 选中行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    selectRowChange(selectedRow, tableName) {
        this.tableData.forEach((/**
         * @param {?} tableInfo
         * @return {?}
         */
        tableInfo => {
            if (tableInfo.code == tableName) {
                tableInfo.selectedData = selectedRow;
            }
        }));
        this.setEnsureButtonFlag();
    }
    /**
     * 取消一行事件
     * @param {?} selectedRow 被取消行数据
     * @param {?} tableName 当前表格对应表名
     * @return {?}
     */
    unSelect(selectedRow, tableName) {
        this.tableData.forEach((/**
         * @param {?} tableInfo
         * @return {?}
         */
        tableInfo => {
            if (tableInfo.code == tableName) {
                tableInfo.selectedData = null;
                tableInfo.selectedValue = "";
            }
        }));
        selectedRow = null;
        this.setEnsureButtonFlag();
    }
    /**
     * 设置模态框确定按钮是否可用
     * @return {?}
     */
    setEnsureButtonFlag() {
        /** @type {?} */
        let flag = false;
        for (let index = 0; index < this.tableData.length; index++) {
            /** @type {?} */
            let tableInfo = this.tableData[index];
            if (!tableInfo.selectedData) {
                flag = true;
                break;
            }
        }
        this.ensureFlag = flag;
    }
    /**
     * 组装sap回填数据
     * @param {?} tableName 表名
     * @param {?} tableData 表数据
     * @return {?} (表名.表字段名:表数据):Object
     */
    assembleSapData(tableName, tableData) {
        if (!tableName || !tableData) {
            return;
        }
        // sap回填数据
        /** @type {?} */
        let sapData = {};
        // 表字段名集合
        /** @type {?} */
        let tableDataItemKeys = Object.keys(tableData);
        for (let index = 0; index < tableDataItemKeys.length; index++) {
            /** @type {?} */
            let itemKey = tableDataItemKeys[index];
            // sap回填数据key= 表名.表字段名
            /** @type {?} */
            let key = tableName + "." + itemKey;
            sapData[key] = tableData[itemKey];
        }
        return sapData;
    }
    /**
     * 回填sap数据
     * @private
     * @param {?=} sapData 将要回填的sap数据
     * @return {?}
     */
    sendSapData(sapData) {
        if (sapData) {
            this.selectSapData.emit(sapData);
        }
        // 子表关闭editor状态
        if (this.mappingType == "grid") {
            this.afterOnblur.emit();
        }
    }
    /**
     * @private
     * @return {?}
     */
    getBindingPathArray() {
        /** @type {?} */
        const path = this.vm.bindingPath;
        if (path) {
            return path.split("/").filter((/**
             * @param {?} n
             * @return {?}
             */
            n => n !== ""));
        }
        return [];
    }
}
ExternalIntegrationComponent.decorators = [
    { type: Component, args: [{
                selector: "web-external-integration",
                template: "<input [(ngModel)]=\"fieldText\" #input  class=\"form-control\" input-end-edit [readonly]=\"false\"\r\n  tabindex=\"0\" maxlength=\"36\" />\r\n\r\n<farris-dialog #dialog [title]=\"'\u9009\u62E9\u6570\u636E'\" [beforeClose]=\"beforeClose\"  [width]=\"1000\" [height]=\"834\" [showButtons]=\"true\" [showMaxButton]=\"true\"\r\n  [showCloseButton]=\"true\" [enableScroll]=\"false\" [dialogHeaderHeight]=\"50\" [buttons]=\"defaultButtonRef\">\r\n  <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\">\r\n    <div class=\"listnav-example-wrapper\">\r\n      <div class=\"example-side-nav\">\r\n        <farris-list-nav  [listNavWidth]=\"240\" (listClick)=\"listClick($event)\">\r\n          <ng-template listNavContent>\r\n            <farris-list-view #farrisListView [showEmpty]=\"true\" [data]=\"tableData\" [activeIndex]=\"3\" listidName=\"code\" (listClick)=\"listClick($event)\">\r\n              <ng-template #navView listTemplate let-item=\"item\" let-selected=\"selectedItem\">\r\n                <div class=\"f-template-listnav-row\">\r\n                  <!-- routerLinkActive=\"active\" -->\r\n                  <a class=\"list-nav-link\" [ngStyle]=\"{'pointer-events': item.disable ?'none' : '','width':240 +'px'}\"\r\n                     [title]=\"item.name\">\r\n                    <span class=\"nav-item-name\">\r\n                      {{ item.name }}\r\n                    </span>\r\n                  </a>\r\n                </div>\r\n              </ng-template>\r\n            </farris-list-view>\r\n          </ng-template>\r\n\r\n          <!-- <ng-template listNavFooter>\r\n                \u5E95\u90E8\u90E8\u5206\r\n            </ng-template> -->\r\n\r\n        </farris-list-nav>\r\n      </div>\r\n      <div class=\"example-content\" >\r\n        <ng-container #girdView *ngFor=\"let item of tableData;let i = index\">\r\n          <div style=\"height:100%\" [hidden]=\"! (currentLink && item.code == ((currentLink['data'] || [])[0] || {})['code'])\" >\r\n            <farris-datagrid \r\n              [autoFitColumns]=\"true\" \r\n              [columns]=\"item.columns\" \r\n              [data]=\"item.data\" \r\n              [fitColumns]=\"true\"\r\n              [fit]=\"true\" \r\n              [showBorder]=\"true\" \r\n              [(selectValue)]=\"item.selectedValue\"\r\n              [keepSelect]=\"false\"\r\n              [pagination]=\"false\"\r\n              (selectChanged)=\"selectRowChange($event, item.code)\"\r\n              (unSelect)=\"unSelect(null, item.code)\">\r\n            </farris-datagrid>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #defaultButtonRef>\r\n  <button #okbtn type=\"button\" [disabled]=\"ensureFlag\" (click)=\"confirm('ensure')\"  class=\"btn btn-primary btn-lg\">\r\n    {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n  </button>\r\n  <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"confirm('cancel')\" [disabled]=\"false\">\r\n    {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n  </button>\r\n</ng-template>",
                providers: [
                    ExternalIntegrationService,
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => ExternalIntegrationComponent)),
                        multi: true
                    }
                ],
                styles: [".listnav-example-wrapper{background-color:#e7ebef;display:flex;height:100%}.listnav-example-wrapper .example-side-nav{flex:0 0 auto}.listnav-example-wrapper .example-content{flex:1 1 0;width:726px;overflow-y:auto;padding:10px 10px 10px 4px}.listnav-example-wrapper .example-content .listnav-content{height:100%;width:100%;background-color:#fff}.listnav-example-wrapper .example-content.example-content-right{padding:10px 4px 10px 10px}"]
            }] }
];
/** @nocollapse */
ExternalIntegrationComponent.ctorParameters = () => [
    { type: ViewModel, decorators: [{ type: Optional }] },
    { type: ElementRef },
    { type: ExternalIntegrationService },
    { type: VariableParseService },
    { type: ComponentFactoryResolver },
    { type: Injector }
];
ExternalIntegrationComponent.propDecorators = {
    width: [{ type: Input }],
    height: [{ type: Input }],
    serviceCode: [{ type: Input, args: ["serviceCode",] }],
    externalParams: [{ type: Input, args: ["externalParams",] }],
    mappingType: [{ type: Input, args: ["mappingType",] }],
    myField: [{ type: Input, args: ["mapFields",] }],
    fieldText: [{ type: Input }],
    extTableSchemas: [{ type: Input, args: ["extTableSchemas",] }],
    placeholder: [{ type: Input }],
    readonly: [{ type: Input }],
    beforeSapSrvc: [{ type: Input }],
    customData: [{ type: Input }],
    selectSapData: [{ type: Output }],
    afterOnblur: [{ type: Output }],
    dialog: [{ type: ViewChild, args: ["dialog",] }],
    input: [{ type: ViewChild, args: ["input",] }],
    girdView: [{ type: ViewChild, args: ["girdView", { read: ViewContainerRef },] }],
    farrisListView: [{ type: ViewChild, args: ["farrisListView",] }]
};
if (false) {
    /**
     * 模态框宽
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.width;
    /**
     * 模态框高
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.height;
    /**
     * 服务名
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.serviceCode;
    /**
     * 外部服务请求入参,表达式
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.externalParams;
    /**
     * form:主表回填形式,grid：子表回填形式
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.mappingType;
    /**
     * 映射关系
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.myField;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.fieldText;
    /**
     * sap出参表信息描述
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.extTableSchemas;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.placeholder;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.readonly;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.beforeSapSrvc;
    /**
     * 内容中留白边距
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.containerMargin;
    /**
     * 自定义数据
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.customData;
    /**
     * 指令回填sap数据
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.selectSapData;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.afterOnblur;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.dialog;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.input;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.girdView;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.farrisListView;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.componentRef;
    /**
     * 多表数据集合
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.tableData;
    /**
     * 模态框导航栏当前选中项
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.currentLink;
    /**
     * 模态框确定按钮是否可用
     * @type {?}
     */
    ExternalIntegrationComponent.prototype.ensureFlag;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.ngControl;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.containerStyle;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.beforeClose;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.vm;
    /** @type {?} */
    ExternalIntegrationComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.extIntgrtnSrvc;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.variableParseService;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ExternalIntegrationComponent.prototype.inj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXh0ZXJuYWwtaW50ZWdyYXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9leHRlcm5hbC1pbnRlZ3JhdGlvbi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnQvZXh0ZXJuYWwtaW50ZWdyYXRpb24vZXh0ZXJuYWwtaW50ZWdyYXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUVMLFNBQVMsRUFDVCx3QkFBd0IsRUFFeEIsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsUUFBUSxFQUNSLEtBQUssRUFJTCxRQUFRLEVBQ1IsTUFBTSxFQUVOLFNBQVMsRUFDVCxnQkFBZ0IsRUFDakIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUU1RSxPQUFPLEVBRUwsU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGdCQUFnQixDQUFDO0FBRXhCLE9BQU8sRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3RDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBZXpELE1BQU0sT0FBTyw0QkFBNEI7Ozs7Ozs7OztJQXFEdkMsWUFDc0IsRUFBYSxFQUMxQixFQUFjLEVBQ2IsY0FBMEMsRUFDMUMsb0JBQTBDLEVBQzFDLFFBQWtDLEVBQ2xDLEdBQWE7UUFMRCxPQUFFLEdBQUYsRUFBRSxDQUFXO1FBQzFCLE9BQUUsR0FBRixFQUFFLENBQVk7UUFDYixtQkFBYyxHQUFkLGNBQWMsQ0FBNEI7UUFDMUMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQyxhQUFRLEdBQVIsUUFBUSxDQUEw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Ozs7SUFDbEQsZ0RBQTBDOzs7OztJQUMxQywyQ0FBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICBDb21wb25lbnRSZWYsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgZm9yd2FyZFJlZixcclxuICBJbmplY3RvcixcclxuICBJbnB1dCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdCxcclxuICBPcHRpb25hbCxcclxuICBPdXRwdXQsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0NvbnRhaW5lclJlZlxyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRpYWxvZ1wiO1xyXG5pbXBvcnQgeyBWYXJpYWJsZVBhcnNlU2VydmljZSwgVmlld01vZGVsIH0gZnJvbSBcIkBmYXJyaXMvZGV2a2l0XCI7XHJcbmltcG9ydCB7IEV4dGVybmFsSW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSBcIi4vZXh0ZXJuYWwtaW50ZWdyYXRpb24tc2VydmljZVwiO1xyXG5pbXBvcnQgeyBEYXRhZ3JpZENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRhdGFncmlkXCI7XHJcbmltcG9ydCB7XHJcbiAgQ29udHJvbFZhbHVlQWNjZXNzb3IsXHJcbiAgTmdDb250cm9sLFxyXG4gIE5HX1ZBTFVFX0FDQ0VTU09SXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XHJcbmltcG9ydCB7IFRhYmxlQ29sdW1uLCBUYWJsZUluZm8gfSBmcm9tIFwiLi9leHRlcm5hbC1pbnRlZ3JhdGlvbi1kaXNwbGF5dHlwZVwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7IExpc3RWaWV3Q29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktbGlzdC12aWV3XCI7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogXCJ3ZWItZXh0ZXJuYWwtaW50ZWdyYXRpb25cIixcclxuICB0ZW1wbGF0ZVVybDogXCIuL2V4dGVybmFsLWludGVncmF0aW9uLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgc3R5bGVVcmxzOiBbXCIuL2V4dGVybmFsLWludGVncmF0aW9uLmNvbXBvbmVudC5zY3NzXCJdLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgRXh0ZXJuYWxJbnRlZ3JhdGlvblNlcnZpY2UsXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBFeHRlcm5hbEludGVncmF0aW9uQ29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWVcclxuICAgIH1cclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBFeHRlcm5hbEludGVncmF0aW9uQ29tcG9uZW50XHJcbiAgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcbiAgLyoqIOaooeaAgeahhuWuvSAqL1xyXG4gIEBJbnB1dCgpIHdpZHRoOiBudW1iZXIgPSA5NjA7XHJcbiAgLyoqIOaooeaAgeahhumrmCAqL1xyXG4gIEBJbnB1dCgpIGhlaWdodDogbnVtYmVyID0gNTc3O1xyXG4gIC8qKiDmnI3liqHlkI0gKi9cclxuICBASW5wdXQoXCJzZXJ2aWNlQ29kZVwiKSBzZXJ2aWNlQ29kZTogc3RyaW5nO1xyXG4gIC8qKiDlpJbpg6jmnI3liqHor7fmsYLlhaXlj4Is6KGo6L6+5byPICovXHJcbiAgQElucHV0KFwiZXh0ZXJuYWxQYXJhbXNcIikgZXh0ZXJuYWxQYXJhbXM6IGFueTtcclxuICAvKiogZm9ybTrkuLvooajlm57loavlvaLlvI8sZ3JpZO+8muWtkOihqOWbnuWhq+W9ouW8jyAqL1xyXG4gIEBJbnB1dChcIm1hcHBpbmdUeXBlXCIpIG1hcHBpbmdUeXBlOiBzdHJpbmc7XHJcbiAgLyoqIOaYoOWwhOWFs+ezuyAqL1xyXG4gIEBJbnB1dChcIm1hcEZpZWxkc1wiKSBteUZpZWxkOiBhbnk7XHJcbiAgQElucHV0KCkgZmllbGRUZXh0OiBzdHJpbmcgPSBcIlwiO1xyXG4gIC8qKiBzYXDlh7rlj4Looajkv6Hmga/mj4/ov7AgKi9cclxuICBASW5wdXQoXCJleHRUYWJsZVNjaGVtYXNcIikgZXh0VGFibGVTY2hlbWFzOiBhbnk7XHJcblxyXG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gXCLor7fpgInmi6lcIjtcclxuICAvLyDmmK/lkKblj6ror7tcclxuICBASW5wdXQoKSByZWFkb25seSA9IGZhbHNlO1xyXG4gIC8vIOivt+axguWJjeS6i+S7tlxyXG4gIEBJbnB1dCgpIGJlZm9yZVNhcFNydmM6IE9ic2VydmFibGU8YW55PjtcclxuXHJcbiAgLyoqIOWGheWuueS4reeVmeeZvei+uei3nSAqL1xyXG4gIGNvbnRhaW5lck1hcmdpbiA9IHsgdG9wOiAwLCBib3R0b206IDUsIGxlZnQ6IDEwLCByaWdodDogMTAgfTtcclxuICAvKiog6Ieq5a6a5LmJ5pWw5o2uICovXHJcbiAgQElucHV0KCkgY3VzdG9tRGF0YTogYW55O1xyXG4gIC8qKiDmjIfku6Tlm57loatzYXDmlbDmja4gKi9cclxuICBAT3V0cHV0KCkgc2VsZWN0U2FwRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAT3V0cHV0KCkgYWZ0ZXJPbmJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQFZpZXdDaGlsZChcImRpYWxvZ1wiKSBkaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKFwiaW5wdXRcIikgaW5wdXQ6IEVsZW1lbnRSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKFwiZ2lyZFZpZXdcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pIGdpcmRWaWV3OiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gIEBWaWV3Q2hpbGQoXCJmYXJyaXNMaXN0Vmlld1wiKSBmYXJyaXNMaXN0VmlldzogTGlzdFZpZXdDb21wb25lbnQ7XHJcbiAgY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8RGF0YWdyaWRDb21wb25lbnQ+O1xyXG5cclxuICAvKiog5aSa6KGo5pWw5o2u6ZuG5ZCIICovXHJcbiAgdGFibGVEYXRhOiBUYWJsZUluZm9bXSA9IFtdO1xyXG4gIC8qKiDmqKHmgIHmoYblr7zoiKrmoI/lvZPliY3pgInkuK3pobkgKi9cclxuICBjdXJyZW50TGluazogYW55ID0ge307XHJcbiAgLyoqIOaooeaAgeahhuehruWumuaMiemSruaYr+WQpuWPr+eUqCAqL1xyXG4gIGVuc3VyZUZsYWc6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICBuZ0NvbnRyb2w6IE5nQ29udHJvbDtcclxuXHJcbiAgY29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICBtYXJnaW5MZWZ0OiB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0ICsgXCJweFwiLFxyXG4gICAgbWFyZ2luUmlnaHQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0ICsgXCJweFwiLFxyXG4gICAgbWFyZ2luVG9wOiB0aGlzLmNvbnRhaW5lck1hcmdpbi50b3AgKyBcInB4XCIsXHJcbiAgICBtYXJnaW5Cb3R0b206IHRoaXMuY29udGFpbmVyTWFyZ2luLmJvdHRvbSArIFwicHhcIlxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSB2bTogVmlld01vZGVsLFxyXG4gICAgcHVibGljIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSBleHRJbnRncnRuU3J2YzogRXh0ZXJuYWxJbnRlZ3JhdGlvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHZhcmlhYmxlUGFyc2VTZXJ2aWNlOiBWYXJpYWJsZVBhcnNlU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qOiBJbmplY3RvclxyXG4gICkge31cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge31cclxuXHJcbiAgZmllbGRUZXh0Q2hhbmdlKCkge1xyXG4gICAgY29uc3QgcGF0aEFyciA9IHRoaXMuZ2V0QmluZGluZ1BhdGhBcnJheSgpO1xyXG4gICAgdGhpcy52bS5iaW5kaW5nRGF0YS5zZXRWYWx1ZShcclxuICAgICAgcGF0aEFyci5jb25jYXQodGhpcy5uZ0NvbnRyb2wubmFtZSksXHJcbiAgICAgIHRoaXMuZmllbGRUZXh0LFxyXG4gICAgICB0cnVlLFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge31cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHt9XHJcbiAgd3JpdGVWYWx1ZShvYmo6IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5maWVsZFRleHQgPSBvYmo7XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge31cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7fVxyXG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHt9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5uZ0NvbnRyb2wgPSB0aGlzLmluai5nZXQoTmdDb250cm9sKTtcclxuICAgIC8vIOWNoeeJh+e7keWumm9uYmx1cuS6i+S7tu+8jOihqOagvOWGjWdyaWQtZXh0ZXJuYWwtaW50ZWdyYXRpb27kuK3nu5HlrppvbmJsdXLkuovku7ZcclxuICAgIGlmICh0aGlzLm1hcHBpbmdUeXBlICE9IFwiZ3JpZFwiKSB7XHJcbiAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5vbmJsdXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jYWxsU2FwU2VydmljZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXh0SW50Z3J0blNydmMuc2FwRGF0YS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLnNhcERhdGFIYW5kbGUoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+W8gOaooeaAgeahhlxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgc2hvd0RpYWxvZygpOiBhbnkge1xyXG4gICAgdGhpcy5mYXJyaXNMaXN0Vmlldy5saXN0Q2xpY2suZW1pdCh7XHJcbiAgICAgIGRhdGE6IFt0aGlzLnRhYmxlRGF0YVswXV0sXHJcbiAgICAgIGluZGV4OiAwLFxyXG4gICAgICBjaGVja0NoYW5nZUV2ZW50OiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZhcnJpc0xpc3RWaWV3LmNsaWNrSXRlbSA9IHRoaXMudGFibGVEYXRhWzBdO1xyXG4gICAgdGhpcy5kaWFsb2cuc2hvdygpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LCD55Soc2Fw5aSW6YOo5pyN5Yqh77yM5Ye65Y+C5ZyobmdPbmluaXTnm5HlkKxcclxuICAgKi9cclxuICBjYWxsU2FwU2VydmljZSgpIHtcclxuICAgIHRoaXMuZmllbGRUZXh0Q2hhbmdlKCk7XHJcbiAgICB0aGlzLmV4dEludGdydG5TcnZjLnF1ZXJ5RXh0SW50ZWdyYXRpb25TZXJ2aWNlKFxyXG4gICAgICB0aGlzLmV4dGVybmFsUGFyYW1zLFxyXG4gICAgICB0aGlzLnNlcnZpY2VDb2RlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5aSE55CGc2Fw5Ye65Y+CXHJcbiAgICogQHBhcmFtIGRhdGEgc2Fw5Ye65Y+CXHJcbiAgICovXHJcbiAgc2FwRGF0YUhhbmRsZShkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHRhYmxlTmFtZUxpc3QgPSBPYmplY3Qua2V5cyhkYXRhKTtcclxuICAgIGxldCBtYXBUYWJsZUxpc3QgPSB0aGlzLmdldFRhYmxlTGlzdEZyb21NYXBGaWVsZHMoKTtcclxuICAgIC8vIOWPluS6pOmbhlxyXG4gICAgdGFibGVOYW1lTGlzdCA9IHRhYmxlTmFtZUxpc3QuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICByZXR1cm4gbWFwVGFibGVMaXN0LmluZGV4T2YoaXRlbSkgIT0gLTE7XHJcbiAgICB9KTtcclxuICAgIC8vIOWkmuihqOWcuuaZr1xyXG4gICAgaWYgKHRhYmxlTmFtZUxpc3QubGVuZ3RoID4gMSkge1xyXG4gICAgICAvLyDmoKHpqozmmK/lkKblvLnlh7rmqKHmgIHmoYZcclxuICAgICAgbGV0IG9wZW5EaWFsb2dGbGFnID0gdGhpcy5jaGVja011bHRpVGFibGVEYXRhKGRhdGEsIHRhYmxlTmFtZUxpc3QpO1xyXG4gICAgICBpZiAob3BlbkRpYWxvZ0ZsYWcgPT0gXCJvcGVuXCIpIHtcclxuICAgICAgICAvLyDnu4Too4XmqKHmgIHmoYbmlbDmja5cclxuICAgICAgICB0aGlzLmFzc2VtYmxlVGFibGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuc2hvd0RpYWxvZygpO1xyXG4gICAgICB9IGVsc2UgaWYgKG9wZW5EaWFsb2dGbGFnID09IFwiYmFja2ZpbGxcIikge1xyXG4gICAgICAgIC8vIOWkmuihqO+8jOavj+S4quihqOWPquacieS4gOadoeaVsOaNrlxyXG4gICAgICAgIGxldCBiYWNrZmlsbERhdGE6IGFueSA9IHt9O1xyXG4gICAgICAgIHRhYmxlTmFtZUxpc3QuZm9yRWFjaCh0YWJsZU5hbWUgPT4ge1xyXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgICAgYmFja2ZpbGxEYXRhLFxyXG4gICAgICAgICAgICB0aGlzLmFzc2VtYmxlU2FwRGF0YSh0YWJsZU5hbWUsIGRhdGFbdGFibGVOYW1lXVswXSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZW5kU2FwRGF0YShiYWNrZmlsbERhdGEpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIOWkmuihqOaXoOaVsOaNrlxyXG4gICAgICAgIHRoaXMuc2VuZFNhcERhdGEoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0YWJsZU5hbWVMaXN0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgIGxldCB0YWJsZU5hbWUgPSB0YWJsZU5hbWVMaXN0WzBdO1xyXG4gICAgICBsZXQgc2FwRGF0YUxlbmd0aCA9IChkYXRhW3RhYmxlTmFtZV0gfHwgW10pLmxlbmd0aDtcclxuICAgICAgaWYgKHNhcERhdGFMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaWYgKHNhcERhdGFMZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgLy8g5LiA5Liq6KGo5Y+q5pyJ5LiA5p2h5pWw5o2uXHJcbiAgICAgICAgICBsZXQgc2FwRGF0YSA9IHRoaXMuYXNzZW1ibGVTYXBEYXRhKHRhYmxlTmFtZSwgZGF0YVt0YWJsZU5hbWVdWzBdKTtcclxuICAgICAgICAgIHRoaXMuc2VuZFNhcERhdGEoc2FwRGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzYXBEYXRhTGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgLy8g5LiA5Liq6KGo5pyJ5aSa5p2h5pWw5o2uXHJcbiAgICAgICAgICB0aGlzLmFzc2VtYmxlVGFibGVEYXRhKGRhdGEpO1xyXG4gICAgICAgICAgdGhpcy5zaG93RGlhbG9nKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDlpITnkIbmn6Xor6LlvILluLjvvIxlZGl0b3LmsqHmnIllbmRQZW5kaW5nXHJcbiAgICAgIHRoaXMuc2VuZFNhcERhdGEoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrTXVsdGlUYWJsZURhdGEoZGF0YSwgdGFibGVOYW1lTGlzdCkge1xyXG4gICAgbGV0IG9wZW5EaWFsb2dGbGFnID0gXCJcIjtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YWJsZU5hbWVMaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBsZXQgdGFibGVOYW1lID0gdGFibGVOYW1lTGlzdFtpbmRleF07XHJcbiAgICAgIGlmIChkYXRhW3RhYmxlTmFtZV0ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIG9wZW5EaWFsb2dGbGFnID0gXCJvcGVuXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YVt0YWJsZU5hbWVdLmxlbmd0aCA9PSAwICYmIG9wZW5EaWFsb2dGbGFnICE9IFwiYmFja2ZpbGxcIikge1xyXG4gICAgICAgIG9wZW5EaWFsb2dGbGFnID0gXCJub25lXCI7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgb3BlbkRpYWxvZ0ZsYWcgPSBcImJhY2tmaWxsXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3BlbkRpYWxvZ0ZsYWc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu4Too4XmqKHmgIHmoYbmlbDmja5cclxuICAgKiBAcGFyYW0gZGF0YSBzYXDlh7rlj4JcclxuICAgKi9cclxuICBhc3NlbWJsZVRhYmxlRGF0YShkYXRhKSB7XHJcbiAgICBsZXQgdGFibGVOYW1lTGlzdCA9IE9iamVjdC5rZXlzKGRhdGEpO1xyXG4gICAgbGV0IG1hcFRhYmxlTGlzdCA9IHRoaXMuZ2V0VGFibGVMaXN0RnJvbU1hcEZpZWxkcygpO1xyXG4gICAgLy8g5Y+W5Lqk6ZuGXHJcbiAgICBtYXBUYWJsZUxpc3QgPSBtYXBUYWJsZUxpc3QuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICByZXR1cm4gdGFibGVOYW1lTGlzdC5pbmRleE9mKGl0ZW0pICE9IC0xO1xyXG4gICAgfSk7XHJcbiAgICBpZiAobWFwVGFibGVMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgLy8g6YGN5Y6Gc2Fw5pig5bCE6KGo77yM57uE6KOF6KGo5Y+K5a+55bqU5pWw5o2uXHJcbiAgICAgIG1hcFRhYmxlTGlzdC5mb3JFYWNoKG1hcFRhYmxlID0+IHtcclxuICAgICAgICAvLyDnu4Too4XmqKHmgIHmoYbkuK3ljZXooajmlbDmja5cclxuICAgICAgICBsZXQgdGFibGVJbmZvID0gdGhpcy5hc3NlbWJsZVRhYmxlSW5mbyhtYXBUYWJsZSwgZGF0YSk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGFibGVJbmZvICYmXHJcbiAgICAgICAgICBPYmplY3Qua2V5cyh0YWJsZUluZm8pLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICh0YWJsZUluZm8uZGF0YSB8fCBbXSkubGVuZ3RoID4gMFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaCh0YWJsZUluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRUYWJsZUxpc3RGcm9tTWFwRmllbGRzKCkge1xyXG4gICAgLy8g6I635Y+W6ZyA6KaB5Zue5aGr55qE6KGoXHJcbiAgICBsZXQgbWFwS2V5TGlzdCA9IE9iamVjdC5rZXlzKHRoaXMubXlGaWVsZCk7XHJcbiAgICAvLyDlrprkuYlzYXDmmKDlsITooajpm4blkIhcclxuICAgIGxldCBtYXBUYWJsZUxpc3QgPSBbXTtcclxuICAgIChtYXBLZXlMaXN0IHx8IFtdKS5mb3JFYWNoKG1hcEtleSA9PiB7XHJcbiAgICAgIC8vIOWcqOaYoOWwhOWFs+ezu+S4reiOt+WPlnNhcOWHuuWPguS4reeahOihqOmbhuWQiFxyXG4gICAgICBtYXBUYWJsZUxpc3QucHVzaChtYXBLZXkuc3BsaXQoXCIuXCIpWzBdKTtcclxuICAgIH0pO1xyXG4gICAgLy8g5Y676YeNXHJcbiAgICBtYXBUYWJsZUxpc3QgPSBBcnJheS5mcm9tKG5ldyBTZXQobWFwVGFibGVMaXN0KSk7XHJcbiAgICByZXR1cm4gbWFwVGFibGVMaXN0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog57uE6KOF5qih5oCB5qGG5Lit5Y2V6KGo5pWw5o2uXHJcbiAgICogQHBhcmFtIG1hcFRhYmxlIOihqOWQjVxyXG4gICAqIEBwYXJhbSBkYXRhIHNhcOWHuuWPglxyXG4gICAqIEByZXR1cm5zIOaooeaAgeahhuWNleihqOaVsOaNruWvueixoVxyXG4gICAqL1xyXG4gIGFzc2VtYmxlVGFibGVJbmZvKG1hcFRhYmxlLCBkYXRhKSB7XHJcbiAgICAvLyDmqKHmgIHmoYbljZXooajmlbDmja7lr7nosaFcclxuICAgIGxldCB0YWJsZUluZm86IFRhYmxlSW5mbyA9IHtcclxuXHJcbiAgICB9O1xyXG4gICAgLy8g6KGo5aS06ZuG5ZCIXHJcbiAgICBsZXQgdGFibGVDb2x1bW5MaXN0ID0gW107XHJcbiAgICAvLyDpgY3ljoZzYXDlh7rlj4Looajkv6Hmga/vvIzojrflj5booajlpLTkuK3mlofjgIHooajlkI1cclxuICAgICh0aGlzLmV4dFRhYmxlU2NoZW1hcyB8fCBbXSkuZm9yRWFjaCh0YWJsZVNjaGVtYSA9PiB7XHJcbiAgICAgIGlmICh0YWJsZVNjaGVtYS5jb2RlID09IG1hcFRhYmxlKSB7XHJcbiAgICAgICAgdGFibGVJbmZvLm5hbWUgPSB0YWJsZVNjaGVtYS5uYW1lO1xyXG4gICAgICAgIC8vIOaooeaLn+S4u+mUru+8jOS/neivgWZhcnJpcy1ncmlk57uE5Lu244CQ5Y2V6YCJ44CR5Yqf6IO95q2j5bi4XHJcbiAgICAgICAgbGV0IGlkQ29sdW1uOiBUYWJsZUNvbHVtbiA9IHt9O1xyXG4gICAgICAgIGlkQ29sdW1uLmZpZWxkID0gXCJpZFwiO1xyXG4gICAgICAgIGlkQ29sdW1uLnRpdGxlID0gXCLluo/lj7dcIjtcclxuICAgICAgICB0YWJsZUNvbHVtbkxpc3QucHVzaChpZENvbHVtbik7XHJcbiAgICAgICAgLy8g57uE6KOF6KGo5aS0XHJcbiAgICAgICAgdGFibGVTY2hlbWEuY29sdW1ucy5mb3JFYWNoKGNvbHVtbiA9PiB7XHJcbiAgICAgICAgICBsZXQgdGFibGVDb2x1bW46IFRhYmxlQ29sdW1uID0ge307XHJcbiAgICAgICAgICB0YWJsZUNvbHVtbi5maWVsZCA9IGNvbHVtbi5jb2RlO1xyXG4gICAgICAgICAgdGFibGVDb2x1bW4udGl0bGUgPSBjb2x1bW4ubmFtZTtcclxuICAgICAgICAgIHRhYmxlQ29sdW1uTGlzdC5wdXNoKHRhYmxlQ29sdW1uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0YWJsZUluZm8uY29sdW1ucyA9IHRhYmxlQ29sdW1uTGlzdDtcclxuICAgICAgICB0YWJsZUluZm8uY29kZSA9IG1hcFRhYmxlO1xyXG4gICAgICAgIC8vIOe7meihqOaVsOaNruWinuWKoOaooeaLn+S4u+mUrlxyXG4gICAgICAgIChkYXRhW21hcFRhYmxlXSB8fCBbXSkuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgIGl0ZW1bXCJpZFwiXSA9IGluZGV4ICsgMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0YWJsZUluZm8uZGF0YSA9IGRhdGFbbWFwVGFibGVdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0YWJsZUluZm87XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlr7zoiKrmoI/ngrnlh7vkuovku7ZcclxuICAgKiBAcGFyYW0gZXZlbnQg5a+86Iiq5qCP5L+h5oGvXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBsaXN0Q2xpY2soZXZlbnQpIHtcclxuICAgIGxldCBjbGlja0RhdGEgPSBldmVudC5kYXRhO1xyXG4gICAgaWYgKGV2ZW50LmRhdGEuZGlzYWJsZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudExpbmtbXCJkYXRhXCJdICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgaWYgKGNsaWNrRGF0YVswXS5jb2RlID09PSB0aGlzLmN1cnJlbnRMaW5rW1wiZGF0YVwiXVswXS5jb2RlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY3VycmVudExpbmsgPSBldmVudDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGluayA9IGV2ZW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmqKHmgIHmoYbvvIznoa7lrprvvIzlj5bmtojmjInpkq5cclxuICAgKiBAcGFyYW0gZmxhZyBlbnN1cmU656Gu5a6a5oyJ6ZKu77yMY2FuY2Vs77ya5Y+W5raI5oyJ6ZKuXHJcbiAgICovXHJcblxyXG4gIGNvbmZpcm0oZmxhZykge1xyXG4gICAgLy8g54K55Ye756Gu5a6a5oyJ6ZKuXHJcbiAgICBpZiAoZmxhZyA9PSBcImVuc3VyZVwiKSB7XHJcbiAgICAgIGxldCBzYXBEYXRhOiBhbnkgPSB7fTtcclxuICAgICAgLy8g6YGN5Y6G5qih5oCB5qGG6KGo5pWw5o2u77yM57uE6KOF5Zue5aGr5pWw5o2uXHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnRhYmxlRGF0YS5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBsZXQgdGFibGVJbmZvID0gdGhpcy50YWJsZURhdGFbaW5kZXhdO1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oXHJcbiAgICAgICAgICBzYXBEYXRhLFxyXG4gICAgICAgICAgdGhpcy5hc3NlbWJsZVNhcERhdGEodGFibGVJbmZvLmNvZGUsIHRhYmxlSW5mby5zZWxlY3RlZERhdGEuZGF0YSlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2VuZFNhcERhdGEoc2FwRGF0YSk7XHJcbiAgICB9XHJcbiAgICAvLyDmuIXnqbrmqKHmgIHmoYbmlbDmja5cclxuICAgIHRoaXMudGFibGVEYXRhID0gW107XHJcbiAgICAvLyDlhbPpl63mqKHmgIHmoYZcclxuICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBiZWZvcmVDbG9zZSA9ICgpID0+IHtcclxuICAgIHRoaXMudGFibGVEYXRhID0gW107XHJcbiAgICB0aGlzLmVuc3VyZUZsYWcgPSB0cnVlO1xyXG4gICAgdGhpcy5zZW5kU2FwRGF0YSgpO1xyXG4gICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIOmAieS4reS4gOihjOS6i+S7tlxyXG4gICAqIEBwYXJhbSBzZWxlY3RlZFJvdyDpgInkuK3ooYzmlbDmja5cclxuICAgKiBAcGFyYW0gdGFibGVOYW1lIOW9k+WJjeihqOagvOWvueW6lOihqOWQjVxyXG4gICAqL1xyXG4gIHNlbGVjdFJvd0NoYW5nZShzZWxlY3RlZFJvdywgdGFibGVOYW1lKSB7XHJcbiAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKHRhYmxlSW5mbyA9PiB7XHJcbiAgICAgIGlmICh0YWJsZUluZm8uY29kZSA9PSB0YWJsZU5hbWUpIHtcclxuICAgICAgICB0YWJsZUluZm8uc2VsZWN0ZWREYXRhID0gc2VsZWN0ZWRSb3c7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZXRFbnN1cmVCdXR0b25GbGFnKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlj5bmtojkuIDooYzkuovku7ZcclxuICAgKiBAcGFyYW0gc2VsZWN0ZWRSb3cg6KKr5Y+W5raI6KGM5pWw5o2uXHJcbiAgICogQHBhcmFtIHRhYmxlTmFtZSDlvZPliY3ooajmoLzlr7nlupTooajlkI1cclxuICAgKi9cclxuICB1blNlbGVjdChzZWxlY3RlZFJvdywgdGFibGVOYW1lKSB7XHJcbiAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKHRhYmxlSW5mbyA9PiB7XHJcbiAgICAgIGlmICh0YWJsZUluZm8uY29kZSA9PSB0YWJsZU5hbWUpIHtcclxuICAgICAgICB0YWJsZUluZm8uc2VsZWN0ZWREYXRhID0gbnVsbDtcclxuICAgICAgICB0YWJsZUluZm8uc2VsZWN0ZWRWYWx1ZSA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgdGhpcy5zZXRFbnN1cmVCdXR0b25GbGFnKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7mqKHmgIHmoYbnoa7lrprmjInpkq7mmK/lkKblj6/nlKhcclxuICAgKi9cclxuICBzZXRFbnN1cmVCdXR0b25GbGFnKCkge1xyXG4gICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnRhYmxlRGF0YS5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgbGV0IHRhYmxlSW5mbyA9IHRoaXMudGFibGVEYXRhW2luZGV4XTtcclxuICAgICAgaWYgKCF0YWJsZUluZm8uc2VsZWN0ZWREYXRhKSB7XHJcbiAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZW5zdXJlRmxhZyA9IGZsYWc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDnu4Too4VzYXDlm57loavmlbDmja5cclxuICAgKiBAcGFyYW0gdGFibGVOYW1lIOihqOWQjVxyXG4gICAqIEBwYXJhbSB0YWJsZURhdGEg6KGo5pWw5o2uXHJcbiAgICogQHJldHVybnMgKOihqOWQjS7ooajlrZfmrrXlkI066KGo5pWw5o2uKTpPYmplY3RcclxuICAgKi9cclxuICBhc3NlbWJsZVNhcERhdGEodGFibGVOYW1lLCB0YWJsZURhdGEpIHtcclxuICAgIGlmICghdGFibGVOYW1lIHx8ICF0YWJsZURhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gc2Fw5Zue5aGr5pWw5o2uXHJcbiAgICBsZXQgc2FwRGF0YTogYW55ID0ge307XHJcbiAgICAvLyDooajlrZfmrrXlkI3pm4blkIhcclxuICAgIGxldCB0YWJsZURhdGFJdGVtS2V5cyA9IE9iamVjdC5rZXlzKHRhYmxlRGF0YSk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGFibGVEYXRhSXRlbUtleXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGxldCBpdGVtS2V5ID0gdGFibGVEYXRhSXRlbUtleXNbaW5kZXhdO1xyXG4gICAgICAvLyBzYXDlm57loavmlbDmja5rZXk9IOihqOWQjS7ooajlrZfmrrXlkI1cclxuICAgICAgbGV0IGtleSA9IHRhYmxlTmFtZSArIFwiLlwiICsgaXRlbUtleTtcclxuICAgICAgc2FwRGF0YVtrZXldID0gdGFibGVEYXRhW2l0ZW1LZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNhcERhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlm57loatzYXDmlbDmja5cclxuICAgKiBAcGFyYW0gc2FwRGF0YSDlsIbopoHlm57loavnmoRzYXDmlbDmja5cclxuICAgKi9cclxuICBwcml2YXRlIHNlbmRTYXBEYXRhKHNhcERhdGE/KSB7XHJcbiAgICBpZiAoc2FwRGF0YSkge1xyXG4gICAgICB0aGlzLnNlbGVjdFNhcERhdGEuZW1pdChzYXBEYXRhKTtcclxuICAgIH1cclxuICAgIC8vIOWtkOihqOWFs+mXrWVkaXRvcueKtuaAgVxyXG4gICAgaWYgKHRoaXMubWFwcGluZ1R5cGUgPT0gXCJncmlkXCIpIHtcclxuICAgICAgdGhpcy5hZnRlck9uYmx1ci5lbWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEJpbmRpbmdQYXRoQXJyYXkoKTogYW55W10ge1xyXG4gICAgY29uc3QgcGF0aCA9IHRoaXMudm0uYmluZGluZ1BhdGg7XHJcbiAgICBpZiAocGF0aCkge1xyXG4gICAgICByZXR1cm4gcGF0aC5zcGxpdChcIi9cIikuZmlsdGVyKG4gPT4gbiAhPT0gXCJcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcbiJdfQ==