!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/common"),require("@farris/ui-progress-step"),require("@angular/core")):"function"==typeof define&&define.amd?define("@farris/ui-wizard",["exports","rxjs","@angular/common","@farris/ui-progress-step","@angular/core"],t):t((e.farris=e.farris||{},e.farris["ui-wizard"]={}),e.rxjs,e.ng.common,e.uiProgressStep,e.ng.core)}(this,function(e,r,t,a,i){"use strict";var n={Finish:0,Cancel:1,Prev:2,Next:3,StepChange:4,ChangeIndex:5};n[n.Finish]="Finish",n[n.Cancel]="Cancel",n[n.Prev]="Prev",n[n.Next]="Next",n[n.StepChange]="StepChange",n[n.ChangeIndex]="ChangeIndex";var s=function T(e,t,r){this.state=e,this.fromPageId=t,this.toPageId=r},o=(p.prototype.updatePageFill=function(e){this.pageFill=e},p.prototype.getPageFill=function(){return this.pageFill},p.prototype.updateWizardState=function(e,t,r){var a="";switch(e){case n.Prev:a=this.getPrePageId(t);break;case n.Next:a=this.getNextPageId(t);break;case n.StepChange:a=r||t;break;case n.ChangeIndex:a=""!==r?r:t;break;default:a=t}a&&(this.currentPageId=a,this.wizardState.next(new s(e,t,a)))},p.prototype.getWizardState=function(){return this.wizardState},p.prototype.getWizardData=function(){return this.wizardData},p.prototype.setWizardData=function(e){this.wizardData.next(e)},p.prototype.setPageData=function(e,t){var r=t||this.currentPageId;this.wizardPagesData[r]=e},p.prototype.getPageData=function(e){return this.wizardPagesData.hasOwnProperty(e)?this.wizardPagesData[e]:{}},p.prototype.updateProgressData=function(e){this.progressData.next(e)},p.prototype.getProgressData=function(){return this.progressData},p.prototype.updateCurrentPageId=function(e){this.currentPageId=e},p.prototype.getCurrentPageId=function(){return this.currentPageId},p.prototype.getPrePageId=function(e){var t;t=e||this.currentPageId;var r=this.getIndexByPageId(t);return r<=0?"":this.onlyProgressData.stepMessages[r-1].id},p.prototype.getNextPageId=function(e){var t=this.onlyProgressData.stepMessages.length,r=this.getIndexByPageId(e);return r==t-1?"":this.onlyProgressData.stepMessages[r+1].id},p.prototype.isLastPage=function(e){var t=this.onlyProgressData.length;return this.onlyProgressData.stepMessages[t-1].id==e},p.prototype.isCurrentPage=function(e){var t=this.onlyProgressData.activeIndex;return!(t<0)&&this.onlyProgressData.stepMessages[t].id==e},p.prototype.isFirstPage=function(e){return!(this.onlyProgressData.activeIndex<0)&&this.onlyProgressData.stepMessages[0].id==e},p.prototype.getIndexByPageId=function(t){if(this.onlyProgressData&&this.onlyProgressData.hasOwnProperty("stepMessages"))return this.onlyProgressData.stepMessages.findIndex(function(e){return e.id==t})},p.prototype.nextStep=function(){this.updateWizardState(n.Next,this.currentPageId)},p.prototype.prevStep=function(){this.updateWizardState(n.Prev,this.currentPageId)},p.prototype.finishWizard=function(){this.updateWizardState(n.Finish,this.currentPageId)},p.prototype.cancelWizard=function(){this.updateWizardState(n.Cancel,this.currentPageId)},p.prototype.setActiveIndex=function(e){var t;if(this.onlyProgressData&&this.onlyProgressData.hasOwnProperty("stepMessages")){var r=0<=e&&e<this.onlyProgressData.stepMessages.length?e:0;t=this.onlyProgressData.stepMessages[r].id}this.updateWizardState(n.ChangeIndex,this.currentPageId,t),this.changeActiveIndex.next(e)},p.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],p.ctorParameters=function(){return[]},p.ngInjectableDef=i.defineInjectable({factory:function(){return new p},token:p,providedIn:"root"}),p);function p(){var t=this;this.wizardData=new r.Subject,this.wizardPagesData={},this.pageFill=!0,this.onlyProgressData=null,this.progressData=new r.Subject,this.wizardState=new r.Subject,this.changeActiveIndex=new r.Subject,this.progressData.subscribe(function(e){t.onlyProgressData=e})}var d=(g.prototype.setPageId=function(e){this.tPageId=e},g.prototype.getPageId=function(){return this.tPageId},g.decorators=[{type:i.Injectable}],g.ctorParameters=function(){return[]},g);function g(){this.activeState=new r.Subject,this.tPageId=""}var c=(l.decorators=[{type:i.Directive,args:[{selector:"[wizardHeader]"}]}],l.ctorParameters=function(){return[{type:i.TemplateRef}]},l);function l(e){this.template=e}var f=(h.decorators=[{type:i.Directive,args:[{selector:"[wizardStep]"}]}],h.ctorParameters=function(){return[{type:i.TemplateRef}]},h);function h(e){this.template=e}var u=(Object.defineProperty(P.prototype,"wizardFill",{get:function(){return this.fill},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"currentPageId",{get:function(){return this._currentPageId},set:function(e){e&&this._currentPageId==e||this.setActivePage(e)},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"progressData",{get:function(){return this.tProgressData},set:function(t){var r=this;setTimeout(function(){if(t){if(t&&t.stepMessages&&t.stepMessages.length)if(t.activeIndex&&0<=t.activeIndex){t.activeIndex>t.stepMessages.length&&(t.activeIndex=0);var e=t.stepMessages[t.activeIndex];e&&(r.cachedPageId=e.id)}else r.cachedPageId=t.stepMessages[0].id;r.tProgressData=t,r.doAfterProgressData()}})},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"subStepData",{get:function(){return this._subStepData},set:function(e){this._subStepData=e},enumerable:!0,configurable:!0}),P.prototype.ngOnInit=function(){var r=this;this.wizardState.subscribe(function(e){r.changeWizardState(e)}),this.wizardSer.updatePageFill(this.fill),this.wizardSer.changeActiveIndex.subscribe(function(e){var t=0<=e&&e<r.progressData.stepMessages.length?e:0;r.progressData=Object.assign({},r.progressData,{activeIndex:t})})},P.prototype.ngAfterContentInit=function(){var r=this;setTimeout(function(){if("None"===r.stepPosition){if(r.pages.length&&(r.pages.forEach(function(t){if(r.defaultProgressData.stepMessages.find(function(e){return e.id===t.pageId}))return!1;var e={id:t.pageId};r.defaultProgressData.stepMessages.push(e)}),r.currentPageId)){var e=r.defaultProgressData.stepMessages.findIndex(function(e){return e.id===r.currentPageId});0<=e&&(r.defaultProgressData.activeIndex=e)}r.tProgressData=r.defaultProgressData,r.doAfterProgressData()}else r.setActivePage(r.currentPageId),r.setProgressDataDisable(r.currentProgressIndex)})},P.prototype.changeWizardState=function(e){switch(e.state){case n.Prev:this.progressStep.prevStep(),this.currentPageId=e.toPageId;break;case n.Next:this.progressStep.nextStep(),this.currentPageId=e.toPageId,this.cachedPageId=e.toPageId;break;case n.StepChange:this.progressStep.goStep(this.wizardSer.getIndexByPageId(e.toPageId)),this.currentPageId=e.toPageId}this.currentProgressIndex=this.progressStep.getCurrentStepIndex(),this.setProgressDataDisable(this.currentProgressIndex),this.stateChange.emit(e)},P.prototype.addPage=function(e){this.pages.push(e)},P.prototype.stepClick=function(e){e.step.clickDisable||this._currentPageId==e.step.id||this.wizardSer.updateWizardState(n.StepChange,this._currentPageId,e.step.id)},P.prototype.setProgressDataDisable=function(r){var a=this;this.tProgressData&&this.tProgressData.stepMessages&&this.tProgressData.stepMessages.length&&(this.cachedPageId&&(this.cachedCurrentPageIndex=this.tProgressData.stepMessages.findIndex(function(e){return e.id===a.cachedPageId})),this.storedIndex&&0<=this.cachedCurrentPageIndex?this.tProgressData.stepMessages.forEach(function(e,t){t<=a.cachedCurrentPageIndex?e.clickDisable=!1:e.clickDisable=!0}):this.tProgressData.stepMessages.forEach(function(e,t){e.clickDisable=!(t<=r)}),this.wizardSer.updateProgressData(this.tProgressData))},P.prototype.setActivePage=function(t){!this.pages[0]||this.pages[0].getPageId()?(this.pages&&this.pages.length&&(t?(this.pages.forEach(function(e){e.getPageId()===t?e.setPageActive(!0):e.setPageActive(!1)}),this._currentPageId=t):(this.pages.forEach(function(e){e.setPageActive(!1)}),this.pages[0].setPageActive(!0),this._currentPageId=this.pages[0].getPageId())),this.wizardSer.updateCurrentPageId(this._currentPageId)):this._currentPageId=t},P.prototype.getWizardPositionClass=function(){var e="";switch(this.stepPosition){case"Top":e="f-component-wizard-step-top";break;case"HeaderRight":e="f-component-wizard-step-headerright";break;case"PageLeft":e="f-component-wizard-step-pageleft";break;case"None":e="f-component-wizard-step-none";break;default:e=""}return e},P.prototype.isWizardPosition=function(e){return this.stepPosition==e},P.prototype.doAfterProgressData=function(){if(this.wizardSer.updateProgressData(this.tProgressData),this.tProgressData){var e=this.tProgressData.activeIndex?this.tProgressData.activeIndex:0;this.currentProgressIndex=0<=e&&e<this.tProgressData.stepMessages.length?e:0,this.tProgressData.stepMessages&&this.tProgressData.stepMessages.length&&this.setActivePage(this.tProgressData.stepMessages[this.currentProgressIndex].id),this.setProgressDataDisable(this.currentProgressIndex)}},P.prototype.setWizardData=function(e){this.wizardSer.setWizardData(e)},P.decorators=[{type:i.Component,args:[{selector:"farris-wizard",template:'<div class="f-wizard" [ngClass]="getWizardPositionClass()">\r\n    <ng-container *ngIf="isWizardPosition(\'Top\')">\r\n        <ng-container [ngTemplateOutlet]="wizardStepTemplate"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf="isWizardPosition(\'None\')">\r\n        <div class="d-none">\r\n            <ng-container [ngTemplateOutlet]="wizardStepTemplate"></ng-container>\r\n        </div>\r\n    </ng-container>\r\n\r\n    <div class="f-wizard-header" #wizardHeader *ngIf="HeaderTemplate || isWizardPosition(\'HeaderRight\')">\r\n        <ng-container [ngTemplateOutlet]="HeaderTemplate"></ng-container>\r\n        <ng-container *ngIf="isWizardPosition(\'HeaderRight\')">\r\n            <ng-container\r\n                [ngTemplateOutlet]="wizardStepTemplate"\r\n            ></ng-container>\r\n        </ng-container>\r\n    </div>\r\n\r\n    <div class="f-wizard-content" #wizardContent>\r\n        <ng-container *ngIf="isWizardPosition(\'PageLeft\')">\r\n            <ng-container\r\n                [ngTemplateOutlet]="wizardStepTemplate"\r\n            ></ng-container>\r\n        </ng-container>\r\n        <div class="f-wizard-pages">\r\n            <ng-content select="wizard-page"></ng-content>\r\n        </div>\r\n    </div>\r\n</div>\r\n<ng-template #wizardStepTemplate>\r\n    <div class="f-wizard-step" [ngClass]="stepCls">\r\n        <farris-progress-step\r\n            #progressStep\r\n            [stepData]="tProgressData"\r\n            [direction]="direction"\r\n            [subStepData]="subStepData"\r\n            [storedIndexState]="storedIndexState"\r\n            (stepClick)="stepClick($event)"\r\n            [clickable]="stepClickable"\r\n        >\r\n            <ng-container *ngIf="StepTemplate">\r\n                <ng-template\r\n                    progressStepItem\r\n                    let-step="step"\r\n                    let-i="index"\r\n                    let-length="length"\r\n                    let-activeIndex="activeIndex"\r\n                    let-direction="direction"\r\n                >\r\n                    <ng-container\r\n                        [ngTemplateOutlet]="StepTemplate"\r\n                        [ngTemplateOutletContext]="{\r\n                            step: step,\r\n                            index: i,\r\n                            length: length,\r\n                            activeIndex: activeIndex,\r\n                            direction: direction\r\n                        }"\r\n                    ></ng-container>\r\n                </ng-template>\r\n            </ng-container>\r\n        </farris-progress-step>\r\n    </div>\r\n</ng-template>\r\n',styles:[":host.f-component-wizard{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-height:100px}:host.f-component-wizard.f-component-wizard-fill{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;height:100%}:host.f-component-wizard.f-component-wizard-fill .f-wizard{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-y:hidden}:host.f-component-wizard.f-component-wizard-fill .f-wizard .f-wizard-header{flex-shrink:0}:host.f-component-wizard.f-component-wizard-fill .f-wizard .f-wizard-content{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow:hidden}:host.f-component-wizard.f-component-wizard-fill .f-wizard .f-wizard-content .f-wizard-pages{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow:hidden}:host.f-component-wizard .f-wizard{position:relative}:host.f-component-wizard .f-wizard.f-component-wizard-step-pageleft .f-wizard-content{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}:host.f-component-wizard .f-wizard.f-component-wizard-step-pageleft .f-wizard-step{min-width:165px;padding:18px 24px;box-shadow:0 2px 4px 0 rgba(0,0,0,.1);overflow:auto}:host.f-component-wizard .f-wizard.f-component-wizard-step-headerright .f-wizard-header{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}:host.f-component-wizard .f-wizard.f-component-wizard-step-headerright .f-wizard-header .f-wizard-step{-webkit-box-flex:1;flex:1 1 auto;text-align:right}"]}]}],P.ctorParameters=function(){return[{type:o}]},P.propDecorators={stepClickable:[{type:i.Input}],stepCls:[{type:i.Input}],direction:[{type:i.Input,args:["stepDirection"]}],stepPosition:[{type:i.Input,args:["stepPosition"]}],wizardFill:[{type:i.HostBinding,args:["class.f-component-wizard-fill"]}],basicClass:[{type:i.HostBinding,args:["class.f-component-wizard"]}],HeaderTemplate:[{type:i.ContentChild,args:[c,{read:i.TemplateRef}]}],StepTemplate:[{type:i.ContentChild,args:[f,{read:i.TemplateRef}]}],progressStep:[{type:i.ViewChild,args:["progressStep"]}],fill:[{type:i.Input}],storedIndex:[{type:i.Input}],storedIndexState:[{type:i.Input}],currentPageId:[{type:i.Input}],progressData:[{type:i.Input}],subStepData:[{type:i.Input}],stateChange:[{type:i.Output}]},P);function P(e){this.wizardSer=e,this.stepClickable=!1,this.stepCls="",this.direction="vertical",this.stepPosition="None",this.basicClass=!0,this.fill=!0,this.storedIndex=!1,this.storedIndexState=!1,this._currentPageId="",this.pages=[],this.currentProgressIndex=0,this.defaultProgressData={activeIndex:0,stepMessages:[]},this.stateChange=new i.EventEmitter,this.wizardState=this.wizardSer.getWizardState()}var w=(Object.defineProperty(x.prototype,"activeCls",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e,this.pageId&&this.doAfterActive()},enumerable:!0,configurable:!0}),x.prototype.ngOnInit=function(){this.pageSer.setPageId(this.pageId)},x.prototype.ngAfterContentInit=function(){this.doAfterActive()},x.prototype.getPageId=function(){return this.pageId},x.prototype.setPageActive=function(e){this.active!==e&&(this.active=e)},x.prototype.doAfterActive=function(){this.pageSelected.emit({pageId:this.pageId,state:this.active}),this.pageSer.activeState.next({pageId:this.pageId,state:this.active})},x.decorators=[{type:i.Component,args:[{selector:"wizard-page",template:"<ng-content></ng-content>",providers:[d],styles:[":host.f-component-wizard-page{display:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;position:relative}:host.f-component-wizard-page.active{display:-webkit-box;display:flex}"]}]}],x.ctorParameters=function(){return[{type:u},{type:d}]},x.propDecorators={pageId:[{type:i.Input}],addClass:[{type:i.HostBinding,args:["class.f-component-wizard-page"]}],activeCls:[{type:i.HostBinding,args:["class.active"]}],active:[{type:i.Input}],pageSelected:[{type:i.Output}]},x);function x(e,t){this.pageSer=t,this.pageId="",this.addClass=!0,this._active=!1,this.pageSelected=new i.EventEmitter,this.wizardSet=e,this.wizardSet.addPage(this)}var I=(m.decorators=[{type:i.Directive,args:[{selector:"[wizardPageHeader]"}]}],m.ctorParameters=function(){return[{type:i.TemplateRef}]},m);function m(e){this.template=e}var z=(y.decorators=[{type:i.Directive,args:[{selector:"[wizardPageContent]"}]}],y.ctorParameters=function(){return[{type:i.TemplateRef}]},y);function y(e){this.template=e}var b=(v.decorators=[{type:i.Directive,args:[{selector:"[wizardPageFooter]"}]}],v.ctorParameters=function(){return[{type:i.TemplateRef}]},v);function v(e){this.template=e}var D=(Object.defineProperty(S.prototype,"fill",{get:function(){return this.wizardSer.getPageFill()},enumerable:!0,configurable:!0}),S.prototype.ngOnInit=function(){this.pageId=this.pageSer.getPageId()},S.prototype.getPageId=function(){return this.pageId},S.prototype.getPrevPageId=function(){return this.wizardSer.getPrePageId(this.pageId)},S.prototype.getWizardData=function(){return this.wizardSer.getWizardData()},S.prototype.getPageData=function(e){return void 0===e&&(e=this.pageId),this.wizardSer.getPageData(e)},S.prototype.setPageData=function(e,t){void 0===t&&(t=this.pageId),this.wizardSer.setPageData(e,t)},S.prototype.nextStep=function(){this.wizardSer.updateWizardState(n.Next,this.pageId)},S.prototype.prevStep=function(){this.wizardSer.updateWizardState(n.Prev,this.pageId)},S.prototype.finishWizard=function(){this.wizardSer.updateWizardState(n.Finish,this.pageId)},S.prototype.cancelWizard=function(){this.wizardSer.updateWizardState(n.Cancel,this.pageId)},S.decorators=[{type:i.Component,args:[{selector:"wizard-page-detail",template:'<div class="f-component-wizard-page-detail-header" *ngIf="pageHeaderTemplate">\r\n    <ng-container [ngTemplateOutlet]="pageHeaderTemplate"></ng-container>\r\n</div>\r\n\x3c!-- <div class="page-message">\r\n                <ng-container [ngTemplateOutlet]="pageMessageTemplate"></ng-container>\r\n        </div> --\x3e\r\n<div class="f-component-wizard-page-detail-content" *ngIf="pageContentTemplate">\r\n    <ng-container [ngTemplateOutlet]="pageContentTemplate"></ng-container>\r\n</div>\r\n<div class="f-component-wizard-page-detail-content" *ngIf="!pageContentTemplate">\r\n    <ng-content></ng-content>\r\n</div>\r\n<div class="f-component-wizard-page-detail-footer" *ngIf="pageFooterTemplate">\r\n    <ng-container [ngTemplateOutlet]="pageFooterTemplate"></ng-container>\r\n</div>\r\n',styles:[":host.f-component-wizard-page-detail-fill{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}:host.f-component-wizard-page-detail-fill .f-component-wizard-page-detail-footer,:host.f-component-wizard-page-detail-fill .f-component-wizard-page-detail-headeer{flex-shrink:0}:host.f-component-wizard-page-detail-fill .f-component-wizard-page-detail-content{-webkit-box-flex:1;flex-grow:1;flex-shrink:1;flex-basis:0;overflow:auto}:host.f-component-wizard-page-detail-fill .f-component-wizard-page-detail-footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end}"]}]}],S.ctorParameters=function(){return[{type:o},{type:d,decorators:[{type:i.Optional}]}]},S.propDecorators={cls:[{type:i.HostBinding,args:["class.f-component-wizard-page-detail"]}],fill:[{type:i.HostBinding,args:["class.f-component-wizard-page-detail-fill"]}],pageHeaderTemplate:[{type:i.ContentChild,args:[I,{read:i.TemplateRef}]}],pageContentTemplate:[{type:i.ContentChild,args:[z,{read:i.TemplateRef}]}],pageFooterTemplate:[{type:i.ContentChild,args:[b,{read:i.TemplateRef}]}],pagedetailSelected:[{type:i.Output}]},S);function S(e,t){var r=this;this.wizardSer=e,this.pageSer=t,this.cls=!0,this.pageId="",this.pagedetailSelected=new i.EventEmitter,this.pageSer||(this.pageSer=new d),this.pageSer.activeState.subscribe(function(e){e.state&&r.pagedetailSelected.emit(e)})}var C=(k.decorators=[{type:i.NgModule,args:[{declarations:[u,c,f,w,D,f,I,z,b],imports:[t.CommonModule,a.ProgressStepModule],exports:[u,c,f,w,D,f,I,z,b],providers:[o]}]}],k);function k(){}e.WizardService=o,e.PageService=d,e.WizardEventType=n,e.WizardEvent=s,e.WizardHeaderTemplateDirective=c,e.WizardStepTemplateDirective=f,e.WizardComponent=u,e.WizardModule=C,e.FarrisWizardPageComponent=w,e.wizardPageHeaderTemplateDirective=I,e.wizardPageContentTemplateDirective=z,e.wizardPageFooterTemplateDirective=b,e.FarrisPageDetailComponent=D,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-ui-wizard.umd.min.js.map