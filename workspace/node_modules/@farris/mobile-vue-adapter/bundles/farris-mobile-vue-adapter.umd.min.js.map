{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@farris/mobile-vue-adapter/lib/recompute.ts","ng://@farris/mobile-vue-adapter/lib/binding-states.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/listview-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/lookup-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/attachment-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/filter-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/tab-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/search-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/checkbox-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/map-extender.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/component-extender-factory.ts","ng://@farris/mobile-vue-adapter/lib/component-extenders/component-extender-manager.ts","ng://@farris/mobile-vue-adapter/lib/utils/get-data-by-path.ts","ng://@farris/mobile-vue-adapter/lib/utils/attachment-util.ts","ng://@farris/mobile-vue-adapter/lib/utils/event-util.ts","ng://@farris/mobile-vue-adapter/lib/utils/uuid.ts","ng://@farris/mobile-vue-adapter/lib/utils/format-uitl.ts","ng://@farris/mobile-vue-adapter/lib/devkit.plugin.ts","ng://@farris/mobile-vue-adapter/lib/binding-states-mapper.ts","ng://@farris/mobile-vue-adapter/lib/attachment/wechat-take-photo.service.ts","ng://@farris/mobile-vue-adapter/lib/attachment/attachment.service.ts","ng://@farris/mobile-vue-adapter/lib/attachment/cloud-plus-take-photo.service.ts","ng://@farris/mobile-vue-adapter/lib/attachment/attachment-children.service.ts","ng://@farris/mobile-vue-adapter/lib/attachment/upload-attachment.service.ts","ng://@farris/mobile-vue-adapter/lib/lookup-mapping.service.ts","ng://@farris/mobile-vue-adapter/lib/map/cloud-plus-map-operation.ts","ng://@farris/mobile-vue-adapter/lib/map/map.service.ts","ng://@farris/mobile-vue-adapter/lib/map/cloud-plus-map.service.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-listview-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-lookup-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-filter-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-tab-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-search-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-reflesh-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-checkbox-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/bind-attachment-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/directives/map-directives/bind-map-extender.directive.ts","ng://@farris/mobile-vue-adapter/lib/binding-value-converters/date-converter.ts","ng://@farris/mobile-vue-adapter/lib/binding-value-converters/array-converter.ts","ng://@farris/mobile-vue-adapter/lib/attachment/attachment-filter.ts","ng://@farris/mobile-vue-adapter/lib/app-creator.ts","ng://@farris/mobile-vue-adapter/lib/map/map-filter.ts","ng://@farris/mobile-vue-adapter/lib/binding-commands-mapper.ts","ng://@farris/mobile-vue-adapter/lib/providers-mapper.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","recomputable","fn","propName","reactiveObj","reactive","stateVersion","$__recomputables","recompute","vm","$forceUpdate","console","log","BindingStates","vueInstance","viewModel","$getViewModel","viewModelContext","context","subscriptionsMap","Map","getEntityListData","_this","has","subscription","bindingData","changes","subscribe","change","set","getList","toJSON","getCurrentEntityData","getObject","getUIState","uiState","getForm","type","form","getFieldErrorByPath","path","subscriptionV","data","index","$children","findIndex","item","$attrs","id","stateName","getStateMachine","stateMachine","stateChange","renderStates","ListviewExtender","listviewInstance","extend","self","appContext","eventBus","setPropertyValue","loadMoreFinished","refreshLoading","loadMoreLoading","$on","selectedData","selectedId","setCurrentId","selectedItems","getSelectDataList","selectedIds","map","selectedItem","repository","setPaginationInfo","pageIndex","triggerEvent","paginationInfo","dispose","$off","unsubscribe","LookupExtender","lookupInstance","AttachmentExtender","attachmentInstance","FilterExtender","filterInstance","filters","FilterConditions","TabExtender","tabInstance","currentTab","currentName","window","reflushOriginGoback","name","SearchExtender","searchInstance","CheckboxExtender","checkboxInstance","$parent","listCheckStart","checkboxFlag","listCheckAllCancel","listCheckAll","MapExtender","mapInstance","lnglat","lng","lat","lngPath","latPath","setValue","getBindingPathArray","concat","split","bindingPath","filter","ComponentExtenderFactory","componentInstance","componentType","componentExtenderInstance","ComponentExtenderManager","extenderMap","extenderFactory","getExtender","get","extender","getDataByPath","fields","reduce","total","mergeString","str","str1","min","res","substring","getToken","array","Math","floor","str2","str3","randomArray","random","ceil","splice","timeStamp","round","Date","getTime","switchStr","officeUrl","doc","docx","xls","xlsx","ppt","pptx","pdf","txt","jpg","jpeg","png","getAttachmentUrl","attachmentId","rootId","extensionName","keys","find","url","toLowerCase","EventUtil","toHandlerKey","capitalize","camelize","replace","_","c","toUpperCase","charAt","slice","uuid","toString","formatUtils","enum","options","EnumUtil","format","date","DateUtil","dateOperation","number","NumberUtil","string","StringUtil","bool","BoolUtil","DevkitPlugin","install","app","config","globalProperties","eventName","eventHandler","vnodeProps","vnode","props","eventHandlerKey","oldEventHandler","$event","$app","$viewModel","$bindingStates","$componentExtenderManager","$createApp","appOptions","Error","historyBackService","HistoryBackService","init","proxyBack","App","addEventListener","event","commandOptions","injector","commandName","JSON","parse","command","commands","origin","source","viewModelContextManager","getContextById","viewModelId","pipe","parent","postMessage","bind","$getApp","currentCmp","$createViewModel","viewModelOptions","existedViewModelContext","parentViewModel","createViewModel","RouterService","mappingToUIState","routerState","queryParams","clearCachedDataForCard","currentId","clearCachedDataForList","entityCollection","clear","$initComponentExtenderManager","$getComponentExtenderManager","extenderManager","$bindComponentExtenders","refs","$refs","values","forEach","$bindComponentExtender","$__component_extended","$unbindComponentExtenders","$unbindComponentExtender","$initPage","pageTitle","$changeDocumentTitle","$initUistate","title","document","$formatUtils","listaviewState","searchState","keyword","filterState","filterData","tabState","mapEntityListData","mapCurrentEntityData","mapUIState","mapForm","WeChatTakePhoto","takePhotoAttachment","takeShortVideo","selectFile","downloadAttachment","AttachmentService","collectFile","Subject","takePhoto","param","takePhotoIns","selectAttachment","selectAttachments","playShortVideo","getSysInfo","CloudPlusTakePhoto","jsBrigdeService","JsBridgeService","takeVideo","result","processVideo","processPic","selectPictureFromAlbum","processFile","downloadFile","ccworkPlayShortVideo","imgHeader","file","File","content","dataItem","fileHeaders","mp4","mov","fileTypes","suffix","lastIndexOf","base64","base64value","videoName","_super","WeChatAttachment","tslib_1.__extends","CloudPlusAttachment","UploadAttachmentService","befRepository","upload","originFiles","uploadInfo","apiProxy","requestList","ele","docInfo","fileContent","indexOf","fileName","metadataId","formId","parentDirName","mode","params","body","request","HttpMethods","POST","forkJoin","previewPdf","metadataIdList","storageType","filePath","stringify","encodeURIComponent","previewDoc","mergeMap","pages","getAttachmentPath","LookupMappingService","mapFields","helpData","mappingFields","helpFields","idIndex","includes","__spread","that","f","val","h","getValue","join","pathArr","ff","getFieldValue","fieldPath","fieldPathArray","a","CloudPlusMapOperation","location$","getCurrentLoc","ccworkGetLocation","alert","assembleMarkers","locationCallback","loc","position","Number","visible","draggable","MapService","getCurrentLocation","locationInstance","getMapMarkers","setMapMarkers","CloudPlusMapService","bindListviewExtenderDir","mounted","el","binding","oldVnode","unmounted","bindLookupExtenderDir","bindFilterExtenderDir","bindTabExtenderDir","bindSearchExtenderDir","children","bindRefleshExtenderDir","bindCheckboxExtenderDir","bindAttachmentExtenderDir","bindMapExtenderDir","DateConverter","convertFrom","convertTo","isEmptyDateString","StringArrayConverter","separator","AppCreator","createApp","rootComponent","use","createDirective","directiveName","directiveOptions","directive","rawData","field","isComponentAdapter","everyData","size","createTime","fileSize","fileCreateTime","currentEntityData","extraStates","mappedBindingStates","entityListData","methodNames","mappedCommandMethods","methodName","eventParams","lookupDataService","BefLookupDataService","lookupMappingService","attachmentService","LookupHttpService","LookupMappingFn","uploadAttachmentService","mapService"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { reactive } from 'vue';\r\n\r\n/**\r\n * 包装计算数据getter方法\r\n */\r\nfunction recomputable(fn: any, propName: any) {\r\n  const reactiveObj = reactive({\r\n    stateVersion: 0\r\n  });\r\n\r\n  return function () {\r\n    const self = this;\r\n    if (!self.$__recomputables) {\r\n      self.$__recomputables = {};\r\n    }\r\n\r\n    if (!self.$__recomputables[propName]) {\r\n      self.$__recomputables[propName] = reactiveObj;\r\n    }\r\n    const stateVersion = reactiveObj.stateVersion;\r\n    return fn.call(self);\r\n  };\r\n}\r\n\r\n/**\r\n * 触发计算属性重新计算\r\n */\r\nfunction recompute(vm: any, propName: string) {\r\n  if (!vm.$__recomputables || !vm.$__recomputables[propName]) {\r\n    return;\r\n  }\r\n\r\n  vm.$__recomputables[propName].stateVersion++;\r\n  try {\r\n    vm.$forceUpdate();\r\n  } catch (error) {\r\n    console.log('$forceUpdate',error)\r\n  }\r\n}\r\n\r\nexport { recomputable, recompute };\r\n","import { Subscription } from 'rxjs';\r\nimport { ViewModel, ViewModelContext, Change } from '@farris/mobile-devkit';\r\nimport { recompute } from './recompute';\r\n\r\n/**\r\n * 绑定状态\r\n */\r\nclass BindingStates {\r\n\r\n  /**\r\n   * Vue实例\r\n   */\r\n  private vueInstance: any;\r\n\r\n  /**\r\n   * Vue实例的ViewModelContext\r\n   */\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * 订阅集合\r\n   */\r\n  private subscriptionsMap: Map<string, Subscription>;\r\n\r\n  /**\r\n   * 构造函数\r\n   * @param viewModelContext ViewModel上下文\r\n   */\r\n  constructor(vueInstance: any) {\r\n    this.vueInstance = vueInstance;\r\n    const viewModel = this.vueInstance.$getViewModel() as ViewModel;\r\n    this.viewModelContext = viewModel.context;\r\n    this.subscriptionsMap = new Map<string, Subscription>();\r\n  }\r\n\r\n  /**\r\n   * 映射实体列表数据\r\n   */\r\n  public getEntityListData() {\r\n    const stateName = 'entityListData';\r\n    if (this.subscriptionsMap.has(stateName) === false) {\r\n      const subscription = this.viewModelContext.bindingData.changes.subscribe((change: Change) => {\r\n        recompute(this.vueInstance, stateName);\r\n      });\r\n      this.subscriptionsMap.set(stateName, subscription);\r\n    }\r\n    return this.viewModelContext.bindingData.getList().toJSON();\r\n  }\r\n\r\n  /**\r\n   * 映射当前实体数据\r\n   */\r\n  public getCurrentEntityData() {\r\n    const stateName = 'currentEntityData';\r\n    if (this.subscriptionsMap.has(stateName) === false) {\r\n      const subscription = this.viewModelContext.bindingData.changes.subscribe((change: Change) => {\r\n        recompute(this.vueInstance, stateName);\r\n      });\r\n      this.subscriptionsMap.set(stateName, subscription);\r\n    }\r\n    return this.viewModelContext.bindingData.getObject().toJSON();\r\n  }\r\n\r\n  /**\r\n   * 映射UIState数据\r\n   */\r\n  public getUIState() {\r\n    const stateName = 'uiState';\r\n    if (this.subscriptionsMap.has(stateName) === false) {\r\n      const subscription = this.viewModelContext.uiState.changes.subscribe(() => {\r\n        recompute(this.vueInstance, stateName);\r\n      });\r\n      this.subscriptionsMap.set(stateName, subscription);\r\n    }\r\n    return this.viewModelContext.uiState;\r\n  }\r\n\r\n  /**\r\n   * 映射表单\r\n   */\r\n  public getForm() {\r\n    const stateName = 'form';\r\n    if (this.subscriptionsMap.has(stateName) === false) {\r\n      const subscription = this.viewModelContext.bindingData.changes.subscribe((change: Change) => {\r\n        if (change && change.type === \"ValueChanged\") {\r\n          this.viewModelContext.form.getFieldErrorByPath(change.path)\r\n        }\r\n        recompute(this.vueInstance, stateName);\r\n      });\r\n      const subscriptionV = this.viewModelContext.form.changes.subscribe((data) => {\r\n        if (data && data.type === 'validateFieldsFinished') {\r\n          recompute(this.vueInstance, stateName);\r\n        } else if (data && data.type === 'singleHanded') {\r\n          const index = this.vueInstance.$children.findIndex((item) => { return item.$attrs.id === `form_${data.value}` })\r\n          this.vueInstance.$children[index].$forceUpdate();\r\n        }\r\n      });\r\n      this.subscriptionsMap.set(stateName, subscription);\r\n      this.subscriptionsMap.set(stateName + 'V', subscriptionV);\r\n    }\r\n    return this.vueInstance.$getViewModel().form;\r\n  }\r\n\r\n  /**\r\n   * 映射状态机\r\n   */\r\n  public getStateMachine() {\r\n    const stateName = 'stateMachine';\r\n    if (this.subscriptionsMap.has(stateName) === false) {\r\n      const subscription = this.viewModelContext.stateMachine.stateChange.subscribe((change: any) => {\r\n        recompute(this.vueInstance, stateName);\r\n      });\r\n      this.subscriptionsMap.set(stateName, subscription);\r\n    }\r\n\r\n    return this.viewModelContext.stateMachine.renderStates;\r\n  }\r\n}\r\n\r\nexport { BindingStates };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass ListviewExtender implements ComponentExtender {\r\n\r\n  private listviewInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(listviewInstance: any, viewModelContext: any) {\r\n    this.listviewInstance = listviewInstance;\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 扩展组件\r\n   */\r\n  extend() {\r\n    const self = this;\r\n    this.viewModelContext.appContext.eventBus.subscribe(`${this.viewModelContext.id}-listview-extend`, (value) => {\r\n      if (value.type === 'listviewFinished') {\r\n        this.viewModelContext.uiState.setPropertyValue('listaviewState', { ...this.viewModelContext.uiState['listaviewState'], loadMoreFinished: true });\r\n      }\r\n      if (value.type === 'listviewUnFinished') {\r\n        this.viewModelContext.uiState.setPropertyValue('listaviewState', { ...this.viewModelContext.uiState['listaviewState'], loadMoreFinished: false });\r\n      }\r\n      if (value.type === 'loadDataFinished') {\r\n        this.viewModelContext.uiState.setPropertyValue('listaviewState', { ...this.viewModelContext.uiState['listaviewState'], refreshLoading: false, loadMoreLoading: false });\r\n      }\r\n    })\r\n    // 当前行\r\n    this.listviewInstance.$on('selectChange', (selectedData) => {\r\n      const selectedId = selectedData.data.id;\r\n      self.viewModelContext.bindingData.getList().setCurrentId(selectedId, true, true);\r\n    });\r\n\r\n    // 批量选择\r\n    this.listviewInstance.$on('itemClick', () => {\r\n      const selectedItems = self.listviewInstance.getSelectDataList();\r\n      let selectedIds = [];\r\n      if (selectedItems && selectedItems.length > 0) {\r\n        selectedIds = selectedItems.map((selectedItem) => {\r\n          return selectedItem.id;\r\n        });\r\n      }\r\n      self.viewModelContext.uiState.setPropertyValue('selectedIds', selectedIds);\r\n    });\r\n\r\n\r\n    // 监听下拉刷新组件\r\n    this.listviewInstance.$on('refresh', () => {\r\n      self.viewModelContext.repository.setPaginationInfo({\r\n        pageIndex: 1\r\n      })\r\n      self.viewModelContext.uiState.setPropertyValue('listaviewState', { ...self.viewModelContext.uiState['listaviewState'], refreshLoading: true, loadMoreLoading: true })\r\n      self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n    });\r\n\r\n    // 监听是否走查询\r\n    this.listviewInstance.$on('load', () => {\r\n      const loading = self.viewModelContext.uiState['listaviewState']['loadMoreLoading'];\r\n      if (!loading) {\r\n        self.viewModelContext.uiState.setPropertyValue('listaviewState', { ...self.viewModelContext.uiState['listaviewState'], loadMoreLoading: true });\r\n        let pageIndex = self.viewModelContext.repository.paginationInfo && self.viewModelContext.repository.paginationInfo.pageIndex;\r\n        if (!pageIndex) {\r\n          pageIndex = 0;\r\n        }\r\n        self.viewModelContext.repository.setPaginationInfo({\r\n          pageIndex: pageIndex += 1\r\n        })\r\n        self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 清理状态\r\n   */\r\n  dispose() {\r\n    this.listviewInstance.$off('selectChange');\r\n    this.listviewInstance.$off('itemClick');\r\n    this.listviewInstance.$off('load');\r\n    this.viewModelContext.appContext.eventBus.unsubscribe(`${this.viewModelContext.id}-listview-extend`);\r\n  }\r\n\r\n}\r\n\r\nexport { ListviewExtender }","import { ComponentExtender } from './component-extender';\r\nimport { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { BefLookupDataService } from '@farris/mobile-bef';\r\nimport { LookupMappingService } from '../lookup-mapping.service';\r\n\r\n/**\r\n * 帮助控件扩展\r\n */\r\nclass LookupExtender implements ComponentExtender {\r\n\r\n  private lookupInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(listviewInstance: any, viewModelContext: any) {\r\n    this.lookupInstance = listviewInstance;\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  extend() {\r\n  }\r\n\r\n  dispose() {\r\n    console.log('Lookup disposed...');\r\n  }\r\n\r\n}\r\n\r\nexport { LookupExtender }","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass AttachmentExtender implements ComponentExtender {\r\n\r\n    private attachmentInstance: any;\r\n\r\n    private viewModelContext: ViewModelContext;\r\n\r\n    constructor(attachmentInstance: any, viewModelContext: any) {\r\n        this.attachmentInstance = attachmentInstance;\r\n        this.viewModelContext = viewModelContext;\r\n    }\r\n\r\n    /**\r\n     * 扩展组件\r\n     */\r\n    extend() {\r\n        const self = this;\r\n        // 当前行\r\n        this.attachmentInstance.$on('beforeSelect', (selectedData) => {\r\n            const selectedId = selectedData.id;\r\n            self.viewModelContext.bindingData.getList().setCurrentId(selectedId, true, false);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 清理状态\r\n     */\r\n    dispose() {\r\n        this.attachmentInstance.$off('beforeSelect');\r\n    }\r\n\r\n}\r\n\r\nexport { AttachmentExtender };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass FilterExtender implements ComponentExtender {\r\n\r\n  private filterInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(filterInstance: any, viewModelContext: any) {\r\n    this.filterInstance = filterInstance;\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 扩展组件\r\n   */\r\n  extend() {\r\n    const self = this;\r\n    // 清空uistate的筛选条件\r\n    this.filterInstance.$on('clear', () => {\r\n      self.viewModelContext.uiState.setPropertyValue('filterState', { filters: null });\r\n    });\r\n\r\n    // 给uistate的赋值筛选条件\r\n    // this.filterInstance.$on('change', (data) => {\r\n    //   //self.viewModelContext.uiState.setPropertyValue('filterState', { filters: data.FilterConditions });\r\n    // });\r\n\r\n\r\n    // 给uistate的赋值筛选条件\r\n    this.filterInstance.$on('search', (data) => {\r\n      self.viewModelContext.repository.setPaginationInfo({\r\n        pageIndex: 1\r\n      })\r\n      self.viewModelContext.uiState.setPropertyValue('filterState', { filters: data.FilterConditions });\r\n      self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n    });\r\n\r\n    // 监听确定时间出发查询\r\n    this.filterInstance.$on('confirm', (data) => {\r\n      self.viewModelContext.repository.setPaginationInfo({\r\n        pageIndex: 1\r\n      })\r\n      self.viewModelContext.uiState.setPropertyValue('filterState', { filters: data.FilterConditions });\r\n      self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 清理状态\r\n   */\r\n  dispose() {\r\n    this.filterInstance.$off('clear');\r\n    this.filterInstance.$off('change');\r\n    this.filterInstance.$off('confirm');\r\n  }\r\n\r\n}\r\n\r\nexport { FilterExtender }","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass TabExtender implements ComponentExtender {\r\n\r\n  private tabInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(tabInstance: any, viewModelContext: any) {\r\n    this.tabInstance = tabInstance;\r\n    this.viewModelContext = viewModelContext;\r\n    this.viewModelContext.uiState.setPropertyValue('tabState', { currentTab: tabInstance.currentName });\r\n  }\r\n\r\n  /**\r\n   * 扩展组件\r\n   */\r\n  extend() {\r\n    const self = this;\r\n    // 给uistate的赋值当前tab页\r\n    this.tabInstance.$on('change', (data) => {\r\n      window['MOBILE_ORIGIN_BACK'] && window['MOBILE_ORIGIN_BACK'].reflushOriginGoback();\r\n      if(data.name !== self.viewModelContext.uiState['tabState']['currentTab']){\r\n        self.viewModelContext.uiState.setPropertyValue('tabState', { currentTab: data.name });\r\n        self.viewModelContext.repository.setPaginationInfo({ pageIndex: 1 })\r\n        self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 清理状态\r\n   */\r\n  dispose() {\r\n    this.tabInstance.$off('change');\r\n  }\r\n\r\n}\r\n\r\nexport { TabExtender }","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass SearchExtender implements ComponentExtender {\r\n\r\n  private searchInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(searchInstance: any, viewModelContext: any) {\r\n    this.searchInstance = searchInstance;\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 扩展组件\r\n   */\r\n  extend() {\r\n    const self = this;\r\n    // 监听搜索组件\r\n    this.searchInstance.$on('cancel', (data) => {\r\n      //  清空走查询\r\n      self.viewModelContext.repository.setPaginationInfo({\r\n        pageIndex: 1\r\n      })\r\n      self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n    });\r\n    this.searchInstance.$on('search', (data) => {\r\n        // 如果是确定类型，即走查询\r\n        self.viewModelContext.repository.setPaginationInfo({\r\n          pageIndex: 1\r\n        })\r\n        self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' })\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 清理状态\r\n   */\r\n  dispose() {\r\n    this.searchInstance.$off('cancel');\r\n    this.searchInstance.$off('search');\r\n  }\r\n\r\n}\r\n\r\nexport { SearchExtender }","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass CheckboxExtender implements ComponentExtender {\r\n\r\n  private checkboxInstance: any;\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(checkboxInstance: any, viewModelContext: any) {\r\n    this.checkboxInstance = checkboxInstance;\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 扩展组件\r\n   */\r\n  extend() {\r\n    const self = this;\r\n    // 当按钮被加载调用父组件让其出现多选框\r\n    this.checkboxInstance.$parent.listCheckStart();\r\n    this.checkboxInstance.$on('click', () => {\r\n      console.log(\"click\");\r\n      // 监听全选\r\n      if (self.checkboxInstance.$parent.checkboxFlag) {\r\n        self.checkboxInstance.$parent.listCheckAllCancel();\r\n      } else {\r\n        self.checkboxInstance.$parent.listCheckAll();\r\n      }\r\n      self.checkboxInstance.$parent.checkboxFlag = !self.checkboxInstance.$parent.checkboxFlag;\r\n      const selectedItems = self.checkboxInstance.$parent.getSelectDataList();\r\n      let selectedIds = [];\r\n      if (selectedItems && selectedItems.length > 0) {\r\n        selectedIds = selectedItems.map((selectedItem) => {\r\n          return selectedItem.id;\r\n        });\r\n      }\r\n      self.viewModelContext.uiState.setPropertyValue('selectedIds', selectedIds);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 清理状态\r\n   */\r\n  dispose() {\r\n    this.checkboxInstance.$off('click');\r\n  }\r\n\r\n}\r\n\r\nexport { CheckboxExtender }","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\n\r\n/**\r\n * 列表组件扩展\r\n */\r\nclass MapExtender implements ComponentExtender {\r\n\r\n    private mapInstance: any;\r\n\r\n    private viewModelContext: ViewModelContext;\r\n\r\n    constructor(mapInstance: any, viewModelContext: any) {\r\n        this.mapInstance = mapInstance;\r\n        this.viewModelContext = viewModelContext;\r\n    }\r\n\r\n    /**\r\n     * 扩展组件\r\n     */\r\n    extend() {\r\n        const self = this;\r\n        // 当前行\r\n        this.mapInstance.$on('markMap', (selectedData) => {\r\n            // 获取经纬度\r\n            const lnglat = selectedData.lnglat;\r\n            const lng = lnglat.lng;\r\n            const lat = lnglat.lat;\r\n            // 获取经纬度路径\r\n            const lngPath = this.mapInstance.lngPath;\r\n            const latPath = this.mapInstance.latPath;\r\n            // this.mapInstance.center = [lng, lat];\r\n            // 赋值经纬度\r\n            this.viewModelContext.bindingData.setValue(\r\n                this.getBindingPathArray().concat(lngPath.split('/')),\r\n                lng,\r\n                true,\r\n                true);\r\n            this.viewModelContext.bindingData.setValue(\r\n                this.getBindingPathArray().concat(latPath.split('/')),\r\n                lat,\r\n                true,\r\n                true\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 清理状态\r\n     */\r\n    dispose() {\r\n        this.mapInstance.$off('markMap');\r\n    }\r\n\r\n    private getBindingPathArray(): any[] {\r\n        const path = this.viewModelContext.bindingData.bindingPath;\r\n        if (path) {\r\n            return path.split('/').filter((n) => n !== '');\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nexport { MapExtender };\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\nimport { ListviewExtender } from './listview-extender';\r\nimport { LookupExtender } from './lookup-extender';\r\nimport { FilterExtender } from './filter-extender';\r\nimport { TabExtender } from './tab-extender';\r\nimport { RefleshExtender } from './reflesh-extender';\r\nimport { SearchExtender } from './search-extender';\r\nimport { CheckboxExtender } from './checkbox-extender';\r\nimport { AttachmentExtender } from './attachment-extender';\r\nimport { MapExtender } from './map-extender';\r\n\r\n/**\r\n * 组件适配器工厂\r\n */\r\nclass ComponentExtenderFactory {\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 创建适配器\r\n   */\r\n  public create(componentInstance: any, componentType: string): ComponentExtender {\r\n    let componentExtenderInstance: ComponentExtender;\r\n    switch (componentType) {\r\n      case 'fm-listview':\r\n        componentExtenderInstance = new ListviewExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'Lookup':\r\n        componentExtenderInstance = new LookupExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'fm-filter':\r\n        componentExtenderInstance = new FilterExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'fm-tabs':\r\n        componentExtenderInstance = new TabExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'van-search':\r\n        componentExtenderInstance = new SearchExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'Checkbox':\r\n        componentExtenderInstance = new CheckboxExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'fm-attachment':\r\n        componentExtenderInstance = new AttachmentExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      case 'Map':\r\n        componentExtenderInstance = new MapExtender(componentInstance, this.viewModelContext);\r\n        break;\r\n      default:\r\n        componentExtenderInstance = null;\r\n    }\r\n\r\n    return componentExtenderInstance;\r\n  }\r\n\r\n}\r\n\r\nexport { ComponentExtenderFactory };","import { ViewModel, ViewModelContext } from '@farris/mobile-devkit';\r\nimport { ComponentExtender } from './component-extender';\r\nimport { ComponentExtenderFactory } from './component-extender-factory';\r\n\r\n/**\r\n * 扩展管理器\r\n */\r\nclass ComponentExtenderManager {\r\n\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  /**\r\n   * 组件扩展器集合\r\n   */\r\n  private extenderMap: Map<any, ComponentExtender>;\r\n\r\n  /**\r\n   * 扩展器工厂\r\n   */\r\n  private extenderFactory: ComponentExtenderFactory;\r\n\r\n  /**\r\n   * 构造函数\r\n   */\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n    this.extenderMap = new Map<any, ComponentExtender>();\r\n    this.extenderFactory = new ComponentExtenderFactory(viewModelContext);\r\n  }\r\n\r\n  /**\r\n   * 获取扩展\r\n   */\r\n  public getExtender(componentInstance: any, componentType: string) {\r\n    if (this.extenderMap.has(componentInstance)) {\r\n      return this.extenderMap.get(componentInstance);\r\n    }\r\n\r\n    const extender = this.extenderFactory.create(componentInstance, componentType);\r\n    this.extenderMap.set(componentInstance, extender);\r\n\r\n    return extender;\r\n  }\r\n}\r\nexport { ComponentExtenderManager };\r\n","\r\nconst getDataByPath = (data: any, fields: string[]) => {\r\n    if (!data[fields[0]]) {\r\n        return;\r\n    }\r\n    return fields.reduce((total: any, next: any) => {\r\n        return total[next];\r\n    }, data);\r\n};\r\nexport { getDataByPath };\r\n\r\n","const mergeString = (str, str1) => {\r\n    let min = str.length < str1.length ? str.length : str1.length;\r\n    let res = \"\";\r\n    let i = 0;\r\n    for (i = 0; i < min; i++) {\r\n        res += str.substring(i, i + 1);\r\n        res += str1.substring(i, i + 1);\r\n    }\r\n    res += str.length < str1.length ? str1.substring(i) : str.substring(i);\r\n    return res;\r\n}\r\n\r\nconst getToken = (str) => {\r\n    let array = [1, 2, 3];\r\n    if (str.length > 24) { str = str.substring(0, 24); }\r\n    let length = Math.floor(str.length / 3);\r\n    let str1 = str.substring(0, length);\r\n    let str2 = str.substring(length, 2 * length);\r\n    let str3 = str.substring(2 * length, 3 * length);\r\n    let randomArray = [];\r\n    var random = Math.ceil(Math.random() * 3);\r\n    randomArray.push(array[random - 1]);\r\n    array.splice(random - 1, 1);\r\n    random = Math.ceil(Math.random() * 2);\r\n    randomArray.push(array[random - 1]);\r\n    array.splice(random - 1, 1);\r\n    randomArray.push(array[0]);\r\n    let timeStamp = Math.round(new Date().getTime() / 1000) + \"\";\r\n    return timeStamp.substring(0, 5) + \"times\" + randomArray[0] + \"\"\r\n        + randomArray[1] + \"\" + randomArray[2] + switchStr(str1, str2, str3, randomArray[0])\r\n        + switchStr(str1, str2, str3, randomArray[1]) +\r\n        switchStr(str1, str2, str3, randomArray[2]) + \"times\" + timeStamp.substring(5);\r\n};\r\n\r\nconst switchStr = (str1, str2, str3, i) => {\r\n    switch (i) {\r\n        case 1: return str1;\r\n        case 2: return str2;\r\n        case 3: return str3;\r\n    }\r\n};\r\n\r\nconst officeUrl = {\r\n    doc: '/platform/common/web/assets/fm-attachment/word.png',\r\n    docx: '/platform/common/web/assets/fm-attachment/word.png',\r\n    xls: '/platform/common/web/assets/fm-attachment/excel.png',\r\n    xlsx: '/platform/common/web/assets/fm-attachment/excel.png',\r\n    ppt: '/platform/common/web/assets/fm-attachment/ppt.png',\r\n    pptx: '/platform/common/web/assets/fm-attachment/ppt.png',\r\n    pdf: '/platform/common/web/assets/fm-attachment/pdf.png',\r\n    txt: '/platform/common/web/assets/fm-attachment/txt.png',\r\n    jpg: '/platform/common/web/assets/fm-attachment/img.png',\r\n    jpeg: '/platform/common/web/assets/fm-attachment/img.png',\r\n    png: '/platform/common/web/assets/fm-attachment/img.png'\r\n};\r\nconst getAttachmentUrl = (attachmentId: string, rootId: string, extensionName: string) => {\r\n    const officeUrlKey = Object.keys(officeUrl).find(url => url === extensionName.toLowerCase());\r\n    if (!officeUrlKey) {\r\n        return `/api/runtime/dfs/v1.0/doc/filecontent?metadataid=${attachmentId}&rootid=${rootId}&token=${getToken(mergeString(attachmentId, rootId))}`;\r\n    }\r\n    return officeUrl[extensionName.toLowerCase()];\r\n};\r\n\r\n\r\n\r\nexport { getAttachmentUrl, getToken, mergeString };\r\n","class EventUtil {\r\n\r\n  public static toHandlerKey(str: string) {\r\n    if (str) {\r\n      return `on${this.capitalize(str)}`;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public static camelize(str: string): string {\r\n    const camelizeRE = /-(\\w)/g\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''))\r\n  }\r\n\r\n  public static capitalize(str: string) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n\r\n}\r\n\r\nexport { EventUtil };\r\n","export const uuid = () => {\r\n    let d = new Date().getTime();\r\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        const r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n};","import { StringUtil, NumberUtil, BoolUtil, EnumUtil, DateUtil, } from '@farris/mobile-devkit'\r\n\r\nexport default {\r\n    /**\r\n     * 枚举格式化\r\n     */\r\n    enum: function (value, options) {\r\n        return EnumUtil.format(value, options);\r\n    },\r\n\r\n    /**\r\n     * 日期格式化\r\n     */\r\n    date: function (value, options) {\r\n        return DateUtil.format(value, options);\r\n    },\r\n    \r\n    /**\r\n    * 日期操作\r\n    */\r\n    dateOperation: function (value, options) {\r\n        return DateUtil.dateOperation(value, options);\r\n    },\r\n\r\n    /**\r\n     * 数字格式化\r\n     */\r\n    number: function (value, options) {\r\n        return NumberUtil.format(value, options);\r\n    },\r\n\r\n    /**\r\n     * 字符串格式化\r\n     * \r\n     */\r\n    string: function (value, options) {\r\n        return StringUtil.format(value, options);\r\n    },\r\n\r\n    /**\r\n     * 布尔值格式化\r\n     */\r\n    bool: function (value, options) {\r\n        return BoolUtil.format(value, options);\r\n    },\r\n}\r\n\r\n","import { App } from '@farris/mobile-devkit';\r\nimport { BindingStates } from './binding-states';\r\nimport { ComponentExtenderManager } from './component-extenders/index';\r\nimport { EventUtil } from './utils/index';\r\nimport formatUtils from './utils/format-uitl'\r\nimport { RouterService, HistoryBackService } from '@farris/mobile-command-services';\r\n\r\n\r\nconst DevkitPlugin = {\r\n\r\n  install: function (app: any, options: any) {\r\n\r\n    /**\r\n     * 注册事件\r\n     * @todo：暂时强制绑定，暂时无法根据特性灵活区分\r\n     */\r\n    app.config.globalProperties.$on = function (eventName: string, eventHandler: any) {\r\n      const vnodeProps = this._.vnode.props;\r\n      const eventHandlerKey = EventUtil.toHandlerKey(eventName);\r\n      const oldEventHandler = vnodeProps[eventHandlerKey];\r\n      if (oldEventHandler) {\r\n        vnodeProps[eventHandlerKey] = function ($event) {\r\n          eventHandler($event);\r\n          oldEventHandler($event);\r\n        }\r\n      } else {\r\n        vnodeProps[eventHandlerKey] = eventHandler;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * 清空事件注册\r\n     * @todo：暂时强制清空\r\n     */\r\n    app.config.globalProperties.$off = function (eventName: string) {\r\n      const vnodeProps = this._.vnode.props;\r\n      const eventHandlerKey = EventUtil.toHandlerKey(eventName);\r\n      vnodeProps[eventHandlerKey] = null;\r\n    }\r\n\r\n    /**\r\n     * 组件的App实例\r\n     */\r\n    app.config.globalProperties.$app = null;\r\n\r\n    /**\r\n     * 组件的ViewModel实例\r\n     */\r\n    app.config.globalProperties.$viewModel = null;\r\n\r\n    /**\r\n     * 绑定状态\r\n     */\r\n    app.config.globalProperties.$bindingStates = null;\r\n\r\n    /**\r\n     * 绑定状态\r\n     */\r\n    app.config.globalProperties.$componentExtenderManager = null;\r\n\r\n    /**\r\n     * 组件App工厂方法\r\n     */\r\n    app.config.globalProperties.$createApp = function (appOptions) {\r\n      if (this.$app) {\r\n        throw new Error('App已经存在');\r\n      }\r\n\r\n      const historyBackService = new HistoryBackService();\r\n\r\n      historyBackService.init();\r\n      \r\n      historyBackService.proxyBack();\r\n\r\n      this.$app = new App(appOptions);\r\n      function receiveMessage(event) {\r\n        const commandOptions = this.$app.context.injector.get('DECLARATIONS_TOKEN');\r\n        var messageData = JSON.parse(event.data);\r\n        const commandName = messageData.data.command;\r\n        const command = commandOptions.commands[commandName];\r\n        var origin = event.origin;\r\n        var source = event.source;\r\n        const viewModelContext = this.$app.context.viewModelContextManager.getContextById(command.viewModelId)\r\n        if (!!viewModelContext) {\r\n          const methodResult$ = viewModelContext.viewModel[command.command]();\r\n          methodResult$.pipe(\r\n            () => { },\r\n            () => { },\r\n            () => {\r\n              window.parent && window.parent.postMessage('success', event.origin);\r\n            }\r\n          )\r\n        }\r\n      }\r\n      if (!window['IsDddedMessageEventListener']) {\r\n        window.addEventListener(\"message\", receiveMessage.bind(this), false)\r\n        window['IsDddedMessageEventListener'] = true;\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 获取AppContext\r\n     */\r\n    app.config.globalProperties.$getApp = function () {\r\n      let app = this.$app;\r\n      let currentCmp = this;\r\n      while (!app && currentCmp.$parent) {\r\n        currentCmp = currentCmp.$parent;\r\n        app = currentCmp.$app;\r\n      }\r\n      return app;\r\n    };\r\n\r\n    /**\r\n     * 组件ViewModel工厂方法\r\n     */\r\n    app.config.globalProperties.$createViewModel = function (viewModelOptions) {\r\n      this.$app = this.$getApp();\r\n      if (!this.$app) {\r\n        throw new Error('请先创建App');\r\n      }\r\n\r\n      // 如果viewModel已经存在，则使用已有的\r\n      const viewModelId = viewModelOptions.id;\r\n      if (viewModelId) {\r\n        const existedViewModelContext = this.$app.context.viewModelContextManager.getContextById(viewModelId);\r\n        if (existedViewModelContext) {\r\n          this.$viewModel = existedViewModelContext.viewModel;\r\n        }\r\n      }\r\n\r\n      // 如果viewModel不存在，则创建新的viewModel，并建立父子关系\r\n      if (!this.$viewModel) {\r\n        const parentViewModel = this.$getViewModel();\r\n        if (!viewModelOptions.parent) {\r\n          viewModelOptions.parent = parentViewModel;\r\n        }\r\n        this.$viewModel = this.$app.createViewModel(viewModelOptions);\r\n      }\r\n\r\n      // 设置绑定状态\r\n      this.$bindingStates = new BindingStates(this);\r\n\r\n      // 映射路由状态\r\n      const routerService = this.$viewModel.injector.get(RouterService);\r\n      routerService.mappingToUIState();\r\n\r\n      // 根据路由参数清理卡片缓存数据\r\n      if (this.$viewModel && this.$viewModel.uiState && this.$viewModel.uiState.routerState && this.$viewModel.uiState.routerState.queryParams && this.$viewModel.uiState.routerState.queryParams.clearCachedDataForCard) {\r\n        //清一下bingdingdate上的东西\r\n        this.$viewModel.context.bindingData.getList().currentId = null;\r\n      }\r\n\r\n      // 根据路由参数清理列表缓存数据\r\n      if (this.$viewModel && this.$viewModel.uiState && this.$viewModel.uiState.routerState && this.$viewModel.uiState.routerState.queryParams && this.$viewModel.uiState.routerState.queryParams.clearCachedDataForList) {\r\n        //清一下bingdingdate上的东西\r\n        this.$viewModel.repository.entityCollection.clear();\r\n      }\r\n\r\n\r\n    };\r\n\r\n    /**\r\n     * 获取ViewModel\r\n     */\r\n    app.config.globalProperties.$getViewModel = function () {\r\n      let currentCmp = this;\r\n      let viewModel = currentCmp.$viewModel;\r\n      while (!viewModel && currentCmp.$parent) {\r\n        currentCmp = currentCmp.$parent;\r\n        viewModel = currentCmp.$viewModel;\r\n      }\r\n      return viewModel;\r\n    };\r\n\r\n    /**\r\n     * 初始化组件扩展管理\r\n     */\r\n    app.config.globalProperties.$initComponentExtenderManager = function () {\r\n      const viewModel = this.$getViewModel();\r\n      this.$componentExtenderManager = new ComponentExtenderManager(viewModel.context);\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * 获取组件扩展管理器\r\n     */\r\n    app.config.globalProperties.$getComponentExtenderManager = function () {\r\n      let currentCmp = this;\r\n      let extenderManager = currentCmp.$componentExtenderManager;\r\n      while (!extenderManager && currentCmp.$parent) {\r\n        currentCmp = currentCmp.$parent;\r\n        extenderManager = currentCmp.$componentExtenderManager;\r\n      }\r\n      return extenderManager;\r\n    };\r\n\r\n    app.config.globalProperties.$bindComponentExtenders = function (refs: any) {\r\n      if (!this.$refs) {\r\n        return;\r\n      }\r\n      const componentInstances = Object.values(this.$refs);\r\n      componentInstances.forEach((componentInstance: any) => {\r\n        const componentType = componentInstance._.type.name;\r\n        this.$bindComponentExtender(componentInstance, componentType);\r\n      });\r\n    };\r\n\r\n    /**\r\n     * 绑定组件扩展器\r\n     */\r\n    app.config.globalProperties.$bindComponentExtender = function (componentInstance, componentType) {\r\n      if (componentInstance.$__component_extended === true) {\r\n        return;\r\n      }\r\n\r\n      const extenderManager = this.$getComponentExtenderManager();\r\n      const extender = extenderManager.getExtender(componentInstance, componentType);\r\n      if (extender) {\r\n        extender.extend();\r\n        componentInstance.$__component_extended === true\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 清理所有组件扩展器\r\n     * @param refs \r\n     */\r\n    app.config.globalProperties.$unbindComponentExtenders = function (refs: any) {\r\n      if (!this.$refs) {\r\n        return;\r\n      }\r\n      const componentInstances = Object.values(this.$refs);\r\n      componentInstances.forEach((componentInstance: any) => {\r\n        this.$unbindComponentExtender(componentInstance);\r\n      });\r\n    };\r\n\r\n    /**\r\n     * 清理组件扩展器状态\r\n     */\r\n    app.config.globalProperties.$unbindComponentExtender = function (componentInstance) {\r\n      const extenderManager = this.$getComponentExtenderManager();\r\n      const extender = extenderManager.getExtender(componentInstance);\r\n      if (extender) {\r\n        extender.dispose();\r\n      }\r\n    };\r\n\r\n    app.config.globalProperties.$initPage = function (viewModelOptions) {\r\n      this.$createViewModel(viewModelOptions);\r\n      this.$initComponentExtenderManager();\r\n      this.$viewModel.uiState.pageTitle && this.$changeDocumentTitle(this.$viewModel.uiState.pageTitle);\r\n      this.$initUistate();\r\n    };\r\n\r\n    app.config.globalProperties.$changeDocumentTitle = function (title: string) {\r\n      document.title = title || document.title\r\n    }\r\n\r\n    /**\r\n     * VUE上格式化工具类\r\n     */\r\n    app.config.globalProperties.$formatUtils = formatUtils;\r\n\r\n    /**\r\n     * 初始化uistate上记录的状态\r\n     */\r\n    app.config.globalProperties.$initUistate = function () {\r\n      this.$viewModel.uiState.listaviewState = { refreshLoading: false, loadMoreLoading: false, loadMoreFinished: false };\r\n      this.$viewModel.uiState.searchState = { keyword: '' };\r\n      this.$viewModel.uiState.filterState = { filters: '', filterData: '' };\r\n      this.$viewModel.uiState.tabState = { currentTab: '' };\r\n    };\r\n\r\n  }\r\n};\r\n\r\nexport { DevkitPlugin };\r\n","import { recomputable } from './recompute';\r\n\r\nfunction mapEntityListData() {\r\n  return recomputable(function() {\r\n    return this.$bindingStates.getEntityListData();\r\n  }, 'entityListData');\r\n}\r\n\r\nfunction mapCurrentEntityData() {\r\n  return recomputable(function() {\r\n    return this.$bindingStates.getCurrentEntityData();\r\n  }, 'currentEntityData');\r\n}\r\n\r\nfunction mapUIState() {\r\n  return recomputable(function() {\r\n    return this.$bindingStates.getUIState();\r\n  }, 'uiState');\r\n}\r\n\r\nfunction mapForm() {\r\n  return recomputable(function() {\r\n    return this.$bindingStates.getForm();\r\n  }, 'form');\r\n}\r\n\r\nfunction mapStateMachine() {\r\n  return recomputable(function() {\r\n    return this.$bindingStates.getStateMachine();\r\n  }, 'stateMachine');\r\n}\r\n\r\nfunction mapBindingStates(extraStates?: any) {\r\n  const mappedBindingStates = {\r\n    entityListData: mapEntityListData(),\r\n    currentEntityData: mapCurrentEntityData(),\r\n    uiState: mapUIState(),\r\n    form: mapForm(),\r\n    stateMachine: mapStateMachine()\r\n  };\r\n\r\n  const allMappedStates = Object.assign({}, mappedBindingStates, extraStates);\r\n  return allMappedStates;\r\n}\r\n\r\nexport { mapBindingStates, mapEntityListData, mapCurrentEntityData, mapUIState, mapForm };\r\n","import { Subject } from 'rxjs';\r\nimport { TakePhoto } from './take-photo.interface';\r\nexport class WeChatTakePhoto implements TakePhoto {\r\n    getSysInfo: () => any;\r\n    playShortVideo: (value?: any) => void;\r\n    selectAttachments: (value?: any) => Subject<any>;\r\n    // public selectAttachments() { }\r\n    public takePhotoAttachment() {\r\n        // 微信拍照\r\n    }\r\n\r\n    takeShortVideo() {\r\n\r\n    }\r\n    selectFile() {\r\n\r\n    }\r\n    downloadAttachment() {\r\n\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { TakePhoto } from './take-photo.interface';\r\nexport abstract class AttachmentService {\r\n    public takePhotoIns: TakePhoto;\r\n    public collectFile = new Subject();\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * 拍照\r\n     * @param param 拍照参数\r\n     */\r\n    public takePhoto(param?: any) {\r\n        this.takePhotoIns.takePhotoAttachment(param);\r\n    }\r\n\r\n    /**\r\n     * 选择文件\r\n     * @param param 选择文件参数\r\n     */\r\n    public selectAttachment(param: any) {\r\n        this.takePhotoIns.selectAttachments(param);\r\n    }\r\n\r\n    /**\r\n     * 拍摄短视频\r\n     * @param param 拍摄短视频参数\r\n     */\r\n    public takeShortVideo(param: any) {\r\n        this.takePhotoIns.takeShortVideo(param);\r\n    }\r\n\r\n    /**\r\n     * 播放短视频\r\n     * @param param 播放短视频参数\r\n     */\r\n    public playShortVideo(param: any) {\r\n        this.takePhotoIns.playShortVideo(param);\r\n    }\r\n\r\n    public selectFile(param: any) {\r\n        this.takePhotoIns.selectFile(param);\r\n    }\r\n    public downloadAttachment(param: any) {\r\n        this.takePhotoIns.downloadAttachment(param);\r\n    }\r\n\r\n    public getSysInfo(){\r\n        return this.takePhotoIns.getSysInfo();\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { TakePhoto } from './take-photo.interface';\r\nimport { JsBridgeService } from '@farris/mobile-command-services';\r\nimport { uuid } from '../utils';\r\nexport class CloudPlusTakePhoto implements TakePhoto {\r\n    private jsBrigdeService: JsBridgeService;\r\n    constructor(private collectFile: Subject<any>) {\r\n        this.jsBrigdeService = new JsBridgeService()\r\n    }\r\n    public takeShortVideo(param: any) {\r\n        this.jsBrigdeService.takeVideo(param).subscribe(result => {\r\n            const data = this.processVideo(result);\r\n            this.collectFile.next(data);\r\n        });\r\n    }\r\n\r\n    public takePhotoAttachment(param: any) {\r\n        this.jsBrigdeService.takePhoto(param).subscribe(result => {\r\n            const data = this.processPic(result);\r\n            this.collectFile.next(data);\r\n        });\r\n    }\r\n\r\n    public selectAttachments(param: any) {\r\n        this.jsBrigdeService.selectPictureFromAlbum(param).subscribe(result => {\r\n            const data = this.processPic(result);\r\n            this.collectFile.next(data);\r\n        });\r\n    }\r\n\r\n    public selectFile(param: any) {\r\n        this.jsBrigdeService.selectFile(param).subscribe(res => {\r\n            const data = this.processFile(res);\r\n            this.collectFile.next(data);\r\n        });\r\n    }\r\n\r\n    public downloadAttachment(options: any) {\r\n        return this.jsBrigdeService.downloadFile(options);\r\n    }\r\n\r\n    public getSysInfo() {\r\n        return this.jsBrigdeService.getSysInfo();\r\n    }\r\n\r\n    /**\r\n     * 调起当前设备 播放短视频\r\n     * @param path 视频路径\r\n     */\r\n    public playShortVideo(path: string) {\r\n        window['iCityBridge'].ccworkPlayShortVideo({ path }, (res) => {\r\n            const result = res.result;\r\n            const data = this.processVideo(result);\r\n            this.collectFile.next(data);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 预处理图片\r\n     */\r\n    processPic(result: string[]) {\r\n        const imgHeader = 'data:image/jpeg;base64,';\r\n        const imgType = 'image/png';\r\n        if (typeof result === 'string') {\r\n            // ios takephoto\r\n            return {\r\n                file: new File([], `image_${uuid().substring(0, 6)}.png`, { type: imgType }),\r\n                content: `${imgHeader}${result}`\r\n            };\r\n        }\r\n        return result.map((dataItem: any) => {\r\n            // andriod selectPic\r\n            if (typeof dataItem === 'string') {\r\n                return {\r\n                    file: new File([], `image_${uuid().substring(0, 6)}.png`, { type: imgType }),\r\n                    content: `${imgHeader}${dataItem}`\r\n                };\r\n            }\r\n            // ios selectPic\r\n            return {\r\n                file: new File([], `image_${uuid().substring(0, 6)}.png`, { type: imgType }),\r\n                content: `${imgHeader}${dataItem.content}`\r\n            };\r\n        });\r\n    }\r\n\r\n    processFile(result: any[]) {\r\n        const fileHeaders = {\r\n            'jpg': 'data:image/jpeg;base64,',\r\n            'png': 'data:image/jpeg;base64,',\r\n            'doc': 'data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,',\r\n            'docx': 'data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,',\r\n            'xls': 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,',\r\n            'xlsx': 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,',\r\n            'ppt': 'data:application/vnd.ms-powerpoint;base64,',\r\n            'pptx': 'data:application/vnd.ms-powerpoint;base64,',\r\n            'txt': 'data:text/plain;base64,',\r\n            'pdf': 'data:application/pdf;base64,',\r\n            'mp4': 'data:video/mp4;base64,',\r\n            'mov': 'data:video/mp4;base64,'\r\n        };\r\n        const fileTypes = {\r\n            'jpg': 'image/png',\r\n            'png': 'image/png',\r\n            'doc': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n            'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n            'xls': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n            'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n            'ppt': 'application/vnd.ms-powerpoint',\r\n            'pptx': 'application/vnd.ms-powerpoint',\r\n            'txt': 'text/plain',\r\n            'pdf': 'application/pdf',\r\n            'mp4': 'video/mp4',\r\n            'mov': 'video/mp4'\r\n        };\r\n        return result.map((dataItem: any) => {\r\n            const suffix = dataItem.name.substring(dataItem.name.lastIndexOf('.') + 1);\r\n            return {\r\n                file: new File([], dataItem.name, { type: fileTypes[suffix.toLowerCase()] }),\r\n                content: `${fileHeaders[suffix.toLowerCase()]}${dataItem.base64}`\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 预处理视频\r\n     * @param result\r\n     */\r\n    processVideo(result: any) {\r\n        const url = result.value;\r\n        const base64value = result.base64value;\r\n        const videoHeader = 'data:video/mp4;base64,';\r\n        const videoType = 'video/mp4';\r\n        const videoName = url.substring(url.lastIndexOf('/') + 1) + '.mp4';\r\n        return {\r\n            file: new File([], videoName, { type: videoType }),\r\n            content: `${videoHeader}${base64value}`,\r\n            type: videoType,\r\n            url,\r\n            name: url.substring(url.lastIndexOf('/') + 1) + '.mp4'\r\n        };\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { WeChatTakePhoto } from './wechat-take-photo.service';\r\nimport { AttachmentService } from './attachment.service';\r\nimport { CloudPlusTakePhoto } from './cloud-plus-take-photo.service';\r\n\r\nexport class WeChatAttachment extends AttachmentService {\r\n    constructor() {\r\n        super();\r\n        this.takePhotoIns = new WeChatTakePhoto();\r\n    }\r\n}\r\n\r\nexport class CloudPlusAttachment extends AttachmentService {\r\n    constructor() {\r\n        super();\r\n        this.takePhotoIns = new CloudPlusTakePhoto(this.collectFile);\r\n    }\r\n}\r\n","import { BefRepository } from '@farris/mobile-bef';\r\nimport { HttpMethods } from '@farris/mobile-devkit';\r\nimport { Observable, forkJoin } from 'rxjs';\r\nimport { filter, map, mergeMap, tap } from 'rxjs/operators';\r\nimport { getToken, mergeString } from '../utils';\r\n\r\nexport class UploadAttachmentService {\r\n    constructor(private befRepository: BefRepository<any>) {\r\n\r\n    }\r\n\r\n    /**\r\n     * 缓存附件\r\n     * @param originFiles\r\n     * @param uploadInfo\r\n     */\r\n    upload(originFiles: any[], uploadInfo: any) {\r\n        const apiProxy = this.befRepository.apiProxy;\r\n        const uploadUrl = `/api/runtime/dfs/v1.0/formdoc`;\r\n        const parametersArr = originFiles.map(ele => {\r\n            return {\r\n                docInfo: {\r\n                    fileContent: ele.content.substring(\r\n                        ele.content.indexOf(',') + 1\r\n                    ),\r\n                    fileName: ele.file.name,\r\n                    index: 0,\r\n                    total: 1,\r\n                    metadataId: ele.id\r\n                },\r\n                formId: uploadInfo.parentDirName,\r\n                mode: 1,\r\n                rootId: uploadInfo.rootId || 'default-root'\r\n            };\r\n        });\r\n        const requestList = parametersArr.map(ele => {\r\n            const params = { body: ele };\r\n            return apiProxy.request(HttpMethods.POST, uploadUrl, params, true);\r\n        });\r\n        return forkJoin(requestList);\r\n    }\r\n\r\n    /**\r\n     * 预览附件pdf\r\n     * @param fileType\r\n     * @param rootId\r\n     * @param metadataIdList\r\n     */\r\n    previewPdf(rootId: string, metadataIdList: string[]) {\r\n        const baseUrl = '/platform/runtime/dfs/web/pdfjs/viewer.html?file=';\r\n        const apiProxy = this.befRepository.apiProxy;\r\n        const fileListUrl = '/api/runtime/dfs/v1.0/fileviewer/filelist';\r\n        const params = {\r\n            storageType: 2, filePath: JSON.stringify({\r\n                rootId,\r\n                metadataIdList\r\n            })\r\n        };\r\n        const body = { body: params };\r\n        // 预览\r\n        return apiProxy.request(HttpMethods.POST, fileListUrl, body).pipe(\r\n            map(res => baseUrl + encodeURIComponent(res[0].filePath))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 预览office txt文档\r\n     * @param rootId\r\n     * @param metadataIdList\r\n     */\r\n    previewDoc(rootId: string, metadataIdList: string[]) {\r\n        const apiProxy = this.befRepository.apiProxy;\r\n        const fileListUrl = '/api/runtime/dfs/v1.0/fileviewer/filelist';\r\n        const loadDocUrl = '/api/runtime/dfs/v1.0/docviewer/loaddocument';\r\n        const params = {\r\n            storageType: 2, filePath: JSON.stringify({\r\n                rootId,\r\n                metadataIdList\r\n            })\r\n        };\r\n        const body = { body: params };\r\n        // 根据文件类型 调用不同的预览接口\r\n        return apiProxy.request(HttpMethods.POST, fileListUrl, body)\r\n            .pipe(\r\n                mergeMap(res => apiProxy.request(HttpMethods.POST, loadDocUrl, { body: { filePath: res[0].filePath } })),\r\n                map(res => res.pages)\r\n            );\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取图片url\r\n     * @param attachmentId  附件id\r\n     * @param rootId 根目录id\r\n     * @returns \r\n     */\r\n    getAttachmentPath(attachmentId: string, rootId: string) {\r\n        return `/api/runtime/dfs/v1.0/doc/filecontent?metadataid=${attachmentId}&rootid=${rootId}&token=${getToken(mergeString(attachmentId, rootId))}`;\r\n    }\r\n}\r\n","import { ViewModelContext } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 帮助映射服务\r\n */\r\nexport class LookupMappingService {\r\n  private viewModelContext: ViewModelContext;\r\n\r\n  constructor(viewModelContext: ViewModelContext) {\r\n    this.viewModelContext = viewModelContext;\r\n  }\r\n\r\n  /**\r\n   * 映射字段\r\n   * @summary\r\n   * mapFields格式形如：\r\n   * {\r\n   *    id: \"assoField.assoField\",\r\n   *    code: \"assoField.assoField_Code\",\r\n   *    name: \"assoField.assoField_Name\"\r\n   * }\r\n   */\r\n  mapFields(helpData: any, mappingFields: any) {\r\n    console.log(helpData);\r\n    if (!mappingFields) {\r\n      return;\r\n    }\r\n\r\n    let helpFields = Object.keys(mappingFields);\r\n    const idIndex = helpFields.findIndex((item) => item === 'id');\r\n    if (helpFields.includes('id') && idIndex !== 0) {\r\n      helpFields.splice(idIndex, 1);\r\n      helpFields = ['id', ...helpFields];\r\n    }\r\n    const that = this;\r\n    helpFields.forEach((f: any) => {\r\n\r\n      // 1、获取字段值\r\n      // 如果helpData有选中值，则获取帮助数据源里对应你字段的值；\r\n      // 如果helpData没有值（清空场景），则返回一个空字符串\r\n      let val: any = '';\r\n      if (helpData) {\r\n        if (helpData instanceof Array) {\r\n          val = helpData\r\n            .map((h: any) => {\r\n              return this.getValue(f, h);\r\n            })\r\n            .join(',');\r\n        } else {\r\n          val = that.getValue(f, helpData);\r\n        }\r\n      }\r\n\r\n      // 2、设置字段值\r\n      // 如果helpData不存在（清空场景），获取BindingData里对应字段的值，如果是数值，则设置0，其他设置上一步中的空字符串；\r\n      // 如果helpData存在：直接设置上一步中获取的值。\r\n      const pathArr = that.getBindingPathArray();\r\n      mappingFields[f].split(',').forEach((ff: any) => {\r\n        if (!helpData) {\r\n        } else {\r\n          that.viewModelContext.bindingData.setValue(\r\n            pathArr.concat(ff.split('.')),\r\n            val,\r\n            true,\r\n            true\r\n          );\r\n        }\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * 获取字段值\r\n   */\r\n  public getFieldValue(fieldPath: string) {\r\n    const bindingPathArray = this.getBindingPathArray();\r\n    const fieldPathArray = bindingPathArray.concat(fieldPath.split('.'));\r\n    return this.viewModelContext.bindingData.getValue(fieldPathArray);\r\n  }\r\n\r\n  private getValue(f: string, data: any) {\r\n    let val = '';\r\n    if (f.indexOf('.') === -1) {\r\n      val = data[f];\r\n    } else {\r\n      val = f.split('.').reduce((a, b) => {\r\n        return a[b];\r\n      }, data);\r\n    }\r\n    return val;\r\n  }\r\n\r\n  private getBindingPathArray(): any[] {\r\n    const path = this.viewModelContext.bindingData.bindingPath;\r\n    if (path) {\r\n      return path.split('/').filter((n) => n !== '');\r\n    }\r\n    return [];\r\n  }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { MarkerLocation } from './location.interface';\r\nimport { MapOperation } from './map-operation.interface';\r\nexport class CloudPlusMapOperation implements MapOperation {\r\n\r\n    constructor(private location$: Subject<any>) {\r\n    }\r\n    /**\r\n     * 云上协同  调用获取当前位置接口\r\n     */\r\n    getCurrentLoc() {\r\n        // 具体实现\r\n        if (window['iCityBridge']) {\r\n            const iCityBridge = window['iCityBridge'];\r\n            iCityBridge.ccworkGetLocation((result: any) => {\r\n                alert(JSON.stringify(result));\r\n                // 结果预处理\r\n\r\n                // 发布位置结果\r\n                this.location$.next(this.assembleMarkers(result));\r\n            });\r\n        }\r\n    }\r\n\r\n    // 获取定位回调\r\n    private locationCallback(result?: any) {\r\n        alert(JSON.stringify(result));\r\n        // 结果预处理\r\n\r\n        // 发布位置结果\r\n        this.location$.next(this.assembleMarkers(result));\r\n    }\r\n\r\n\r\n    /**\r\n     * 组装坐标结果\r\n     * @param res 结果\r\n     */\r\n    private assembleMarkers(res) {\r\n        const loc: MarkerLocation = res.result;\r\n        return [{ position: [Number(loc.lng), Number(loc.lat)], visible: true, draggable: true }];\r\n    }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { MapOperation } from './map-operation.interface';\r\n\r\nexport abstract class MapService {\r\n    // 地图操作接口\r\n    public locationInstance: MapOperation;\r\n\r\n    public location$ = new Subject();\r\n    /**\r\n     * 获取当前位置\r\n     */\r\n    getCurrentLocation() {\r\n        this.locationInstance.getCurrentLoc();\r\n    }\r\n\r\n    /**\r\n     * 获取坐标集合\r\n     */\r\n    getMapMarkers() {\r\n        return this.location$;\r\n    }\r\n\r\n    setMapMarkers() {\r\n        // this.locationInstance.location$.subscribe((res) => {\r\n        //     this.markers.next(res);\r\n        // });\r\n    }\r\n}\r\n","import { CloudPlusMapOperation } from './cloud-plus-map-operation';\r\nimport { MapService } from './map.service';\r\n\r\nexport class CloudPlusMapService extends MapService {\r\n    constructor() {\r\n        super();\r\n        this.locationInstance = new CloudPlusMapOperation(this.location$);\r\n    }\r\n}\r\n\r\n\r\n","const bindListviewExtenderDir = {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    console.log(componentInstance);\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Listview');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindListviewExtenderDir };\r\n","const bindLookupExtenderDir = {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Lookup');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindLookupExtenderDir };\r\n","const bindFilterExtenderDir = {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Filter');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindFilterExtenderDir };\r\n\r\n","const bindTabExtenderDir = {\r\n\r\n  mounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Tab');\r\n  },\r\n\r\n  unmounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindTabExtenderDir };\r\n\r\n","\r\nconst bindSearchExtenderDir = {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.children[0].children[0].componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Search');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.children[0].children[0].componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindSearchExtenderDir };\r\n\r\n","\r\nconst bindRefleshExtenderDir =  {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Reflesh');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindRefleshExtenderDir };\r\n\r\n","const bindCheckboxExtenderDir =  {\r\n\r\n  mounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Checkbox');\r\n  },\r\n\r\n  unmounted: function(el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindCheckboxExtenderDir };\r\n\r\n","const bindAttachmentExtenderDir = {\r\n\r\n  mounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Attachment');\r\n  },\r\n\r\n  unmounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindAttachmentExtenderDir };\r\n\r\n","const bindMapExtenderDir = {\r\n\r\n  mounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    const value = binding.value;\r\n    componentInstance.lngPath = value.lngPath;\r\n    componentInstance.latPath = value.latPath;\r\n    componentInstance.$bindComponentExtender(componentInstance, 'Map');\r\n  },\r\n\r\n  // update: function (el, binding, vnode, oldVnode) {\r\n    //     const newValue = binding.value;\r\n    //     const componentInstance = vnode.componentInstance as any;\r\n    //     // 监听响应式变化\r\n    //     componentInstance.resizeEnable = newValue.resizeEnable;\r\n    //     // 是否可以拖动\r\n    //     componentInstance.dragEnable = newValue.dragEnable;\r\n    //     // 初始化缩放大小\r\n    //     componentInstance.zoom = newValue.zoom;\r\n    //     componentInstance.zoomEnable = newValue.zoomEnable;\r\n    //     // 地图中心点经纬度\r\n    //     componentInstance.center = newValue.center;\r\n    //     console.log(el);\r\n    //     console.log(binding);\r\n    //     console.log(vnode);\r\n    //     console.log(oldVnode);\r\n    // },\r\n\r\n  unmounted: function (el, binding, vnode, oldVnode) {\r\n    const componentInstance = vnode.componentInstance as any;\r\n    componentInstance.$unbindComponentExtender(componentInstance);\r\n  }\r\n};\r\n\r\nexport { bindMapExtenderDir };\r\n\r\n","import { BindingValueConverter, DateUtil } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 日期转换器\r\n */\r\nclass DateConverter implements BindingValueConverter {\r\n\r\n  /**\r\n   * 构造函数\r\n   * @param format 日期格式\r\n   */\r\n  constructor(private format: string) {\r\n  }\r\n\r\n  /**\r\n   * 控件值（Date对象）=>数据源（字符串）\r\n   */\r\n  convertFrom(value: Date): string {\r\n    if (!value) {\r\n      return '0001-01-01T00:00:00';\r\n    }\r\n\r\n    const format = this.format ? this.format : 'yyyy-MM-dd HH:mm:ss';\r\n    return DateUtil.format(value, format);\r\n  }\r\n\r\n  /**\r\n   * 数据源（字符串）=> 控件值（Date对象）\r\n   */\r\n  convertTo(value: string): Date {\r\n    if (DateUtil.isEmptyDateString(value) === true) {\r\n      return null;\r\n    }\r\n    return DateUtil.parse(value);\r\n  }\r\n\r\n}\r\nexport { DateConverter };\r\n","import { BindingValueConverter } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 字符串数组转换器\r\n */\r\nclass StringArrayConverter implements BindingValueConverter {\r\n\r\n  constructor(private separator: string = ',') {\r\n  }\r\n\r\n  /**\r\n   * 控件值（字符串数组）=>数据源（字符串）\r\n   */\r\n  convertFrom(value: string[]): string {\r\n    return value.join(this.separator);\r\n  }\r\n\r\n  /**\r\n   * 数据源（字符串）=> 控件值（字符串数组）\r\n   */\r\n  convertTo(value: string): string[] {\r\n    return value.split(this.separator);\r\n  }\r\n}\r\n\r\nexport { StringArrayConverter };\r\n","\r\n\r\nimport { getDataByPath, getAttachmentUrl } from '../utils';\r\nexport const filterData = (rawData: any, field: string, rootId: string, isComponentAdapter = true) => {\r\n    const splitFiled = field.split('/');\r\n    const fields = splitFiled.filter(ele => ele);\r\n\r\n    if (!isComponentAdapter) {\r\n        // 单条数据\r\n        const data = getDataByPath(rawData, fields);\r\n        let url = '/platform/common/web/assets/imgs/no-pic.png';\r\n        // 附件不存在\r\n        if (!data || !data.attachmentId) {\r\n            return url;\r\n        }\r\n        // 附件存在\r\n        const extensionName = data.fileName.substring(data.fileName.lastIndexOf('.') + 1);\r\n        url = getAttachmentUrl(data.attachmentId, rootId, extensionName);\r\n        return url;\r\n    }\r\n    const transformData = rawData.map(everyData => {\r\n        const data = getDataByPath(everyData, fields);\r\n        let url = '/platform/common/web/assets/imgs/no-pic.png';\r\n        if (!data || !data.attachmentId) {\r\n            return {\r\n                url,\r\n                id: everyData.id,\r\n                attachmentId: data.attachmentId,\r\n                name: '',\r\n                size: 0,\r\n                createTime: ''\r\n            };\r\n        }\r\n        const extensionName = data.fileName.substring(data.fileName.lastIndexOf('.') + 1);\r\n        url = getAttachmentUrl(data.attachmentId, rootId, extensionName);\r\n        return {\r\n            url,\r\n            id: everyData.id,\r\n            attachmentId: data.attachmentId,\r\n            name: data.fileName,\r\n            size: data.fileSize,\r\n            createTime: data.fileCreateTime\r\n        };\r\n    });\r\n    return transformData;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { createApp } from 'vue'\r\nimport { DevkitPlugin } from './devkit.plugin';\r\nimport {\r\n  bindListviewExtenderDir,\r\n  bindLookupExtenderDir,\r\n  bindFilterExtenderDir,\r\n  bindSearchExtenderDir,\r\n  bindRefleshExtenderDir,\r\n  bindTabExtenderDir,\r\n  bindCheckboxExtenderDir,\r\n  bindAttachmentExtenderDir,\r\n  bindMapExtenderDir\r\n} from './directives/index';\r\n\r\n\r\nclass AppCreator {\r\n\r\n  /**\r\n   * Vue应用\r\n   */\r\n  public static app: any = null;\r\n  \r\n  /**\r\n   * 创建Vue应用\r\n   */\r\n  public static createApp(rootComponent: any): any {\r\n    this.app = createApp(rootComponent);\r\n\r\n    // 注册内置插件\r\n    this.app.use(DevkitPlugin);\r\n    \r\n    // 注册指令\r\n    // this.createDirective('bind-listview-extender', bindListviewExtenderDir);\r\n    // this.createDirective('bind-lookup-extender', bindLookupExtenderDir);\r\n    // this.createDirective('bind-filter-extender', bindFilterExtenderDir);\r\n    // this.createDirective('bind-serach-extender', bindSearchExtenderDir);\r\n    // this.createDirective('bind-refresh-extender', bindRefleshExtenderDir);\r\n    // this.createDirective('bind-tab-extender', bindTabExtenderDir);\r\n    // this.createDirective('bind-checkbox-extender', bindCheckboxExtenderDir);\r\n    // this.createDirective('bind-attachment-extender', bindAttachmentExtenderDir);\r\n    // this.createDirective('bind-map-extender', bindMapExtenderDir);\r\n\r\n    return this.app;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  public static createDirective(directiveName: string, directiveOptions): any {\r\n    this.app.directive(directiveName, directiveOptions);\r\n  }\r\n\r\n}\r\n\r\nexport { AppCreator };\r\n\r\n","\r\nimport { getDataByPath } from '../utils';\r\nexport const filterMapData = (currentEntityData: any, lng: string, lat: string) => {\r\n\r\n    // 经度\r\n    const lngData = getDataByPath(currentEntityData, lng.split('/'));\r\n    // 纬度\r\n    const latData = getDataByPath(currentEntityData, lat.split('/'));\r\n    return [{ position: [lngData || 117.12212, latData || 35.3243] }];\r\n};\r\n\r\n\r\n\r\n","import { ViewModel } from '@farris/mobile-devkit';\r\n\r\n/**\r\n * 映射命令方法\r\n */\r\nfunction mapCommandMethods(methodNames: any) {\r\n\r\n  const mappedCommandMethods = {};\r\n  methodNames.forEach((methodName: string) => {\r\n    mappedCommandMethods[methodName] = function (eventParams: any) {\r\n      return this.$viewModel[methodName](eventParams);\r\n    };\r\n  });\r\n\r\n  return mappedCommandMethods;\r\n}\r\n\r\nexport { mapCommandMethods }","import { BefLookupDataService, BefRepository } from '@farris/mobile-bef';\r\nimport { CloudPlusAttachment } from './attachment/attachment-children.service';\r\nimport { AttachmentService } from './attachment/attachment.service';\r\nimport { UploadAttachmentService } from './attachment/upload-attachment.service';\r\nimport { LookupMappingService } from './lookup-mapping.service';\r\nimport { CloudPlusMapService } from './map/cloud-plus-map.service';\r\nimport { MapService } from './map/map.service';\r\n\r\n/**\r\n * 映射Providers\r\n */\r\nfunction mapProviders() {\r\n  return function provide() {\r\n    const viewModel = this.$getViewModel();\r\n    const lookupDataService = new BefLookupDataService(viewModel.context);\r\n    const lookupMappingService = new LookupMappingService(viewModel.context);\r\n    // 云上协同附件服务\r\n    const attachmentService: AttachmentService = new CloudPlusAttachment();\r\n    // caf提供附件上传和预览接口调用\r\n    const uploadAttachmentService: UploadAttachmentService =\r\n      new UploadAttachmentService(viewModel.context.repository as BefRepository<any>);\r\n    // 云上协同地图服务\r\n    const mapService: MapService = new CloudPlusMapService();\r\n    const providers = {\r\n      LookupHttpService: lookupDataService,\r\n      LookupMappingFn: lookupMappingService,\r\n      uploadAttachmentService,\r\n      attachmentService,\r\n      mapService\r\n    };\r\n    return providers;\r\n  };\r\n}\r\n\r\nexport { mapProviders }"]}