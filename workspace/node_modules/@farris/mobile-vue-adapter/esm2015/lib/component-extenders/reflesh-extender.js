/**
 * @fileoverview added by tsickle
 * Generated from: lib/component-extenders/reflesh-extender.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * 列表组件扩展
 */
class RefleshExtender {
    /**
     * @param {?} refleshInstance
     * @param {?} viewModelContext
     */
    constructor(refleshInstance, viewModelContext) {
        this.refleshInstance = refleshInstance;
        this.viewModelContext = viewModelContext;
    }
    /**
     * 扩展组件
     * @return {?}
     */
    extend() {
        /** @type {?} */
        const self = this;
        // 监听下拉刷新组件
        this.refleshInstance.$on('input', (/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                self.viewModelContext.repository.setPaginationInfo({
                    pageIndex: 1
                });
                self.viewModelContext.uiState.setPropertyValue('listaviewState', Object.assign({}, self.viewModelContext.uiState['listaviewState'], { loadMoreLoading: true }));
                self.viewModelContext.appContext.eventBus.triggerEvent({ type: 'LoadData' });
            }
            self.viewModelContext.appContext.eventBus.subscribe(`${this.viewModelContext.id}-reflesh-extend`, (/**
             * @param {?} value
             * @return {?}
             */
            (value) => {
                if (value.type === 'loadDataFinished') {
                    self.viewModelContext.uiState.setPropertyValue('listaviewState', Object.assign({}, self.viewModelContext.uiState['listaviewState'], { refreshLoading: false, loadMoreLoading: false }));
                }
            }));
        }));
    }
    /**
     * 清理状态
     * @return {?}
     */
    dispose() {
        this.refleshInstance.$off('input');
        this.viewModelContext.appContext.eventBus.unsubscribe(`${this.viewModelContext.id}-reflesh-extend`);
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    RefleshExtender.prototype.refleshInstance;
    /**
     * @type {?}
     * @private
     */
    RefleshExtender.prototype.viewModelContext;
}
export { RefleshExtender };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVmbGVzaC1leHRlbmRlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvbW9iaWxlLXZ1ZS1hZGFwdGVyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudC1leHRlbmRlcnMvcmVmbGVzaC1leHRlbmRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU1BLE1BQU0sZUFBZTs7Ozs7SUFNbkIsWUFBWSxlQUFvQixFQUFFLGdCQUFxQjtRQUNyRCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFDM0MsQ0FBQzs7Ozs7SUFLRCxNQUFNOztjQUNFLElBQUksR0FBRyxJQUFJO1FBQ2pCLFdBQVc7UUFDWCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxPQUFPOzs7O1FBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUN6QyxJQUFJLElBQUksRUFBRTtnQkFDUixJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDO29CQUNqRCxTQUFTLEVBQUUsQ0FBQztpQkFDYixDQUFDLENBQUE7Z0JBQ0YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0Isb0JBQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFFLGVBQWUsRUFBRSxJQUFJLElBQUcsQ0FBQTtnQkFDL0ksSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUE7YUFDN0U7WUFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxpQkFBaUI7Ozs7WUFBQyxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUN6RyxJQUFJLEtBQUssQ0FBQyxJQUFJLEtBQUssa0JBQWtCLEVBQUU7b0JBQ3JDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLG9CQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLGVBQWUsRUFBRSxLQUFLLElBQUcsQ0FBQztpQkFDeks7WUFDSCxDQUFDLEVBQUMsQ0FBQTtRQUNKLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUFLRCxPQUFPO1FBQ0wsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUN0RyxDQUFDO0NBRUY7Ozs7OztJQXZDQywwQ0FBNkI7Ozs7O0lBRTdCLDJDQUEyQzs7QUF1QzdDLE9BQU8sRUFBRSxlQUFlLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZpZXdNb2RlbENvbnRleHQgfSBmcm9tICdAZmFycmlzL21vYmlsZS1kZXZraXQnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRFeHRlbmRlciB9IGZyb20gJy4vY29tcG9uZW50LWV4dGVuZGVyJztcclxuXHJcbi8qKlxyXG4gKiDliJfooajnu4Tku7bmianlsZVcclxuICovXHJcbmNsYXNzIFJlZmxlc2hFeHRlbmRlciBpbXBsZW1lbnRzIENvbXBvbmVudEV4dGVuZGVyIHtcclxuXHJcbiAgcHJpdmF0ZSByZWZsZXNoSW5zdGFuY2U6IGFueTtcclxuXHJcbiAgcHJpdmF0ZSB2aWV3TW9kZWxDb250ZXh0OiBWaWV3TW9kZWxDb250ZXh0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihyZWZsZXNoSW5zdGFuY2U6IGFueSwgdmlld01vZGVsQ29udGV4dDogYW55KSB7XHJcbiAgICB0aGlzLnJlZmxlc2hJbnN0YW5jZSA9IHJlZmxlc2hJbnN0YW5jZTtcclxuICAgIHRoaXMudmlld01vZGVsQ29udGV4dCA9IHZpZXdNb2RlbENvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmianlsZXnu4Tku7ZcclxuICAgKi9cclxuICBleHRlbmQoKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIC8vIOebkeWQrOS4i+aLieWIt+aWsOe7hOS7tlxyXG4gICAgdGhpcy5yZWZsZXNoSW5zdGFuY2UuJG9uKCdpbnB1dCcsIChkYXRhKSA9PiB7XHJcbiAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgc2VsZi52aWV3TW9kZWxDb250ZXh0LnJlcG9zaXRvcnkuc2V0UGFnaW5hdGlvbkluZm8oe1xyXG4gICAgICAgICAgcGFnZUluZGV4OiAxXHJcbiAgICAgICAgfSlcclxuICAgICAgICBzZWxmLnZpZXdNb2RlbENvbnRleHQudWlTdGF0ZS5zZXRQcm9wZXJ0eVZhbHVlKCdsaXN0YXZpZXdTdGF0ZScsIHsgLi4uc2VsZi52aWV3TW9kZWxDb250ZXh0LnVpU3RhdGVbJ2xpc3Rhdmlld1N0YXRlJ10sIGxvYWRNb3JlTG9hZGluZzogdHJ1ZSB9KVxyXG4gICAgICAgIHNlbGYudmlld01vZGVsQ29udGV4dC5hcHBDb250ZXh0LmV2ZW50QnVzLnRyaWdnZXJFdmVudCh7IHR5cGU6ICdMb2FkRGF0YScgfSlcclxuICAgICAgfVxyXG4gICAgICBzZWxmLnZpZXdNb2RlbENvbnRleHQuYXBwQ29udGV4dC5ldmVudEJ1cy5zdWJzY3JpYmUoYCR7dGhpcy52aWV3TW9kZWxDb250ZXh0LmlkfS1yZWZsZXNoLWV4dGVuZGAsKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdsb2FkRGF0YUZpbmlzaGVkJykge1xyXG4gICAgICAgICAgc2VsZi52aWV3TW9kZWxDb250ZXh0LnVpU3RhdGUuc2V0UHJvcGVydHlWYWx1ZSgnbGlzdGF2aWV3U3RhdGUnLCB7IC4uLnNlbGYudmlld01vZGVsQ29udGV4dC51aVN0YXRlWydsaXN0YXZpZXdTdGF0ZSddLCByZWZyZXNoTG9hZGluZzogZmFsc2UsIGxvYWRNb3JlTG9hZGluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXnkIbnirbmgIFcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5yZWZsZXNoSW5zdGFuY2UuJG9mZignaW5wdXQnKTtcclxuICAgIHRoaXMudmlld01vZGVsQ29udGV4dC5hcHBDb250ZXh0LmV2ZW50QnVzLnVuc3Vic2NyaWJlKGAke3RoaXMudmlld01vZGVsQ29udGV4dC5pZH0tcmVmbGVzaC1leHRlbmRgKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBSZWZsZXNoRXh0ZW5kZXIgfSJdfQ==