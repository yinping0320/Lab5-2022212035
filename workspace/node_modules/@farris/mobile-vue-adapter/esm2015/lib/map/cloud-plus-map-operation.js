/**
 * @fileoverview added by tsickle
 * Generated from: lib/map/cloud-plus-map-operation.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
export class CloudPlusMapOperation {
    /**
     * @param {?} location$
     */
    constructor(location$) {
        this.location$ = location$;
    }
    /**
     * 云上协同  调用获取当前位置接口
     * @return {?}
     */
    getCurrentLoc() {
        // 具体实现
        if (window['iCityBridge']) {
            /** @type {?} */
            const iCityBridge = window['iCityBridge'];
            iCityBridge.ccworkGetLocation((/**
             * @param {?} result
             * @return {?}
             */
            (result) => {
                alert(JSON.stringify(result));
                // 结果预处理
                // 发布位置结果
                this.location$.next(this.assembleMarkers(result));
            }));
        }
    }
    // 获取定位回调
    /**
     * @private
     * @param {?=} result
     * @return {?}
     */
    locationCallback(result) {
        alert(JSON.stringify(result));
        // 结果预处理
        // 发布位置结果
        this.location$.next(this.assembleMarkers(result));
    }
    /**
     * 组装坐标结果
     * @private
     * @param {?} res 结果
     * @return {?}
     */
    assembleMarkers(res) {
        /** @type {?} */
        const loc = res.result;
        return [{ position: [Number(loc.lng), Number(loc.lat)], visible: true, draggable: true }];
    }
}
if (false) {
    /**
     * @type {?}
     * @private
     */
    CloudPlusMapOperation.prototype.location$;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWQtcGx1cy1tYXAtb3BlcmF0aW9uLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtdnVlLWFkYXB0ZXIvIiwic291cmNlcyI6WyJsaWIvbWFwL2Nsb3VkLXBsdXMtbWFwLW9wZXJhdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUdBLE1BQU0sT0FBTyxxQkFBcUI7Ozs7SUFFOUIsWUFBb0IsU0FBdUI7UUFBdkIsY0FBUyxHQUFULFNBQVMsQ0FBYztJQUMzQyxDQUFDOzs7OztJQUlELGFBQWE7UUFDVCxPQUFPO1FBQ1AsSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7O2tCQUNqQixXQUFXLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQztZQUN6QyxXQUFXLENBQUMsaUJBQWlCOzs7O1lBQUMsQ0FBQyxNQUFXLEVBQUUsRUFBRTtnQkFDMUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDOUIsUUFBUTtnQkFFUixTQUFTO2dCQUNULElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN0RCxDQUFDLEVBQUMsQ0FBQztTQUNOO0lBQ0wsQ0FBQzs7Ozs7OztJQUdPLGdCQUFnQixDQUFDLE1BQVk7UUFDakMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5QixRQUFRO1FBRVIsU0FBUztRQUNULElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDOzs7Ozs7O0lBT08sZUFBZSxDQUFDLEdBQUc7O2NBQ2pCLEdBQUcsR0FBbUIsR0FBRyxDQUFDLE1BQU07UUFDdEMsT0FBTyxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUM5RixDQUFDO0NBQ0o7Ozs7OztJQXJDZSwwQ0FBK0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IE1hcmtlckxvY2F0aW9uIH0gZnJvbSAnLi9sb2NhdGlvbi5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBNYXBPcGVyYXRpb24gfSBmcm9tICcuL21hcC1vcGVyYXRpb24uaW50ZXJmYWNlJztcclxuZXhwb3J0IGNsYXNzIENsb3VkUGx1c01hcE9wZXJhdGlvbiBpbXBsZW1lbnRzIE1hcE9wZXJhdGlvbiB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBsb2NhdGlvbiQ6IFN1YmplY3Q8YW55Pikge1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkupHkuIrljY/lkIwgIOiwg+eUqOiOt+WPluW9k+WJjeS9jee9ruaOpeWPo1xyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50TG9jKCkge1xyXG4gICAgICAgIC8vIOWFt+S9k+WunueOsFxyXG4gICAgICAgIGlmICh3aW5kb3dbJ2lDaXR5QnJpZGdlJ10pIHtcclxuICAgICAgICAgICAgY29uc3QgaUNpdHlCcmlkZ2UgPSB3aW5kb3dbJ2lDaXR5QnJpZGdlJ107XHJcbiAgICAgICAgICAgIGlDaXR5QnJpZGdlLmNjd29ya0dldExvY2F0aW9uKChyZXN1bHQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XHJcbiAgICAgICAgICAgICAgICAvLyDnu5PmnpzpooTlpITnkIZcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlj5HluIPkvY3nva7nu5PmnpxcclxuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24kLm5leHQodGhpcy5hc3NlbWJsZU1hcmtlcnMocmVzdWx0KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5blrprkvY3lm57osINcclxuICAgIHByaXZhdGUgbG9jYXRpb25DYWxsYmFjayhyZXN1bHQ/OiBhbnkpIHtcclxuICAgICAgICBhbGVydChKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcclxuICAgICAgICAvLyDnu5PmnpzpooTlpITnkIZcclxuXHJcbiAgICAgICAgLy8g5Y+R5biD5L2N572u57uT5p6cXHJcbiAgICAgICAgdGhpcy5sb2NhdGlvbiQubmV4dCh0aGlzLmFzc2VtYmxlTWFya2VycyhyZXN1bHQpKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu4Too4XlnZDmoIfnu5PmnpxcclxuICAgICAqIEBwYXJhbSByZXMg57uT5p6cXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXNzZW1ibGVNYXJrZXJzKHJlcykge1xyXG4gICAgICAgIGNvbnN0IGxvYzogTWFya2VyTG9jYXRpb24gPSByZXMucmVzdWx0O1xyXG4gICAgICAgIHJldHVybiBbeyBwb3NpdGlvbjogW051bWJlcihsb2MubG5nKSwgTnVtYmVyKGxvYy5sYXQpXSwgdmlzaWJsZTogdHJ1ZSwgZHJhZ2dhYmxlOiB0cnVlIH1dO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==