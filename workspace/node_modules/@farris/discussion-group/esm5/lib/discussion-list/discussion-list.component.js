/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, ViewEncapsulation } from '@angular/core';
import { PaginationControlsComponent } from '@farris/ui-pagination';
import { DiscussionListService } from './discussion-list.service';
var DiscussionListComponent = /** @class */ (function () {
    function DiscussionListComponent(discussionListService) {
        this.discussionListService = discussionListService;
        // @Input() personnelsPrimaryKey: string = 'userId';
        this.personnelsDisplayKey = 'userName';
        this.pagerOnServer = true;
        /* *是否支持分页 */
        this.supportPaging = true;
        /**  总页数 */
        // @Input() pageSize:number;
        /**
         * 当前页码
         */
        this.pageIndex = 1;
        /**  每页显示条数选项 */
        // private _pageList = [10,20,30,50];
        // get pageList() {
        //     return this._pageList;
        // }
        // @Input() set pageList(val) {
        //     this._pageList = val;
        //     if (this.pager) {
        //         this.pager.setPageList(val);
        //     }
        // }
        /**
         * 总条数
         */
        this._total = 0;
        /**
         * 每页显示个数
         */
        this._pageSize = 10;
        /**  总条数 */
        // @Input() total = 0;
        /**
         * 评论数据
         */
        this.innerDiscussionData = [];
        this._discussionData = [];
        this.replyMessage = new EventEmitter();
        // 分页事件
        this.pageChanged = new EventEmitter();
        this.pageSizeChanged = new EventEmitter();
        /**
         * 附件预览
         */
        this.filePreview = new EventEmitter();
        /**
         * 附件下载
         */
        this.fileDownload = new EventEmitter();
        this.labels = {
            previousLabel: ' ',
            nextLabel: ' '
        };
        this.directionLinks = true;
        this.maxSize = 7;
        this.responsive = true;
        this.autoHide = false;
    }
    Object.defineProperty(DiscussionListComponent.prototype, "total", {
        get: /**
         * @return {?}
         */
        function () {
            return this._total;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._total = val;
            // this.paginationOptions.totalItems = val;
            this.initPaginationOptions();
            // if(val){
            //   this.initPaginationOptions();
            // }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionListComponent.prototype, "pageSize", {
        get: /**
         * @return {?}
         */
        function () {
            return this._pageSize;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._pageSize = val;
            // this.paginationOptions.itemsPerPage = val;
            this.initPaginationOptions();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionListComponent.prototype, "discussionData", {
        get: /**
         * @return {?}
         */
        function () {
            return this._discussionData;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._discussionData = val;
                this.innerDiscussionData = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DiscussionListComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // this.paginationOptions = {
        //   id: 'Farris-discussion-Pagination',
        //   itemsPerPage: this.pageSize,
        //   currentPage: this.pageIndex,
        //   // pageList: this.pageList,
        //   totalItems: this.total
        // };
        this.initPaginationOptions();
        /** 监听指令得到的数据 */
        this.discussionListService.getData().subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (data && !_this._discussionData.length) {
                _this.innerDiscussionData = data;
            }
        }));
    };
    /**
     * @return {?}
     */
    DiscussionListComponent.prototype.initPaginationOptions = /**
     * @return {?}
     */
    function () {
        this.paginationOptions = {
            id: 'Farris-discussion-Pagination',
            itemsPerPage: this._pageSize,
            currentPage: this.pageIndex,
            pageList: [10, 20, 30, 50, 100],
            totalItems: this._total,
            remote: this.pagerOnServer
        };
    };
    /** 点击回复留言 */
    /**
     * 点击回复留言
     * @param {?} item
     * @return {?}
     */
    DiscussionListComponent.prototype.reply = /**
     * 点击回复留言
     * @param {?} item
     * @return {?}
     */
    function (item) {
        this.replyMessage.emit(item);
    };
    /** 页码变化 */
    /**
     * 页码变化
     * @param {?} page
     * @return {?}
     */
    DiscussionListComponent.prototype.onPageChange = /**
     * 页码变化
     * @param {?} page
     * @return {?}
     */
    function (page) {
        if (this.pageIndex !== page.pageIndex) {
            this.pageIndex = page.pageIndex;
            this.paginationOptions.currentPage = page.pageIndex;
            this.pageChanged.emit({ pageInfo: page });
        }
    };
    /** 每页显示条数变化 */
    /**
     * 每页显示条数变化
     * @param {?} pageSize
     * @return {?}
     */
    DiscussionListComponent.prototype.onPageSizeChange = /**
     * 每页显示条数变化
     * @param {?} pageSize
     * @return {?}
     */
    function (pageSize) {
        if (this.pageSize !== pageSize && this.total) {
            this.paginationOptions.itemsPerPage = pageSize;
            this.pageSize = pageSize;
            /** @type {?} */
            var total = this.total;
            /** @type {?} */
            var pageLength = Math.floor(total / pageSize);
            if (total % pageSize > 0) {
                pageLength += 1;
            }
            if (pageLength && this.pageIndex > pageLength) {
                this.pageIndex = pageLength;
                this.paginationOptions.currentPage = this.pageIndex;
            }
            this.pageSizeChanged.emit({ pageInfo: { pageIndex: this.pageIndex, pageSize: pageSize } });
        }
    };
    /** 附件预览 */
    /**
     * 附件预览
     * @param {?} info
     * @return {?}
     */
    DiscussionListComponent.prototype.filePreviewEventHandler = /**
     * 附件预览
     * @param {?} info
     * @return {?}
     */
    function (info) {
        this.filePreview.emit(info);
    };
    /** 附件下载 */
    /**
     * 附件下载
     * @param {?} info
     * @return {?}
     */
    DiscussionListComponent.prototype.fileDownloadEventHandler = /**
     * 附件下载
     * @param {?} info
     * @return {?}
     */
    function (info) {
        this.fileDownload.emit(info);
    };
    /** 占位头像文字 */
    /**
     * 占位头像文字
     * @param {?} item
     * @return {?}
     */
    DiscussionListComponent.prototype.getAvatar = /**
     * 占位头像文字
     * @param {?} item
     * @return {?}
     */
    function (item) {
        if (item && item[this.personnelsDisplayKey]) {
            /** @type {?} */
            var str = item[this.personnelsDisplayKey];
            return str.substring(str.length - 2, str.length);
        }
        else {
            return '';
        }
    };
    DiscussionListComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-list',
                    template: "<div class=\"f-discussion-group-content\">\r\n    <div class=\"f-discussion-group-content-item\" *ngFor=\"let item of (supportPaging ? (innerDiscussionData | paginate: paginationOptions) : innerDiscussionData)\">\r\n        <div class=\"discussion-item-avatar\">\r\n            <img [src]=\"item.imgData\" alt=\"\" class=\"discussion-item-avatar-img\" *ngIf=\"item.imgData\">\r\n            <div class=\"discussion-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n        </div>\r\n        <div class=\"discussion-item-inner\">\r\n            <div class=\"discussion-item-username\">\r\n                {{item[personnelsDisplayKey]}}\r\n            </div>\r\n            <div class=\"discussion-item-text\">\r\n                <span class=\"discussion-item-text-message\" [innerHTML]=\"item.text | safeHtml\"></span>\r\n                <!-- <span class=\"discussion-item-text-about\" *ngIf=\"item.messageAbout\">@{{item.messageAbout}}</span> -->\r\n            </div>\r\n            <div class=\"discussion-item-text-reply\" *ngIf=\"item.parentData\">\r\n                <span class=\"discussion-item-text-reply-title\">\r\n                    {{ 'discussionGroup.reply' | locale }}\r\n                    <span class=\"discussion-item-text-reply-name\">{{item.parentData[personnelsDisplayKey]}}</span>\uFF1A\r\n                </span>\r\n                <span class=\"discussion-item-text-reply-content\" [innerHTML]=\"item.parentData.text | safeHtml\">\r\n                </span>\r\n            </div>\r\n            <!-- \u9644\u4EF6\u5217\u8868 <div class=\"discussion-item-files\" *ngIf=\"item.attachFiles && item.attachFiles.length\">\r\n                <f-file-preview class=\"d-flex flex-wrap\" [itemCls]=\"'demo-view-item'\" [fileInfos]=\"item.attachFiles\"\r\n                    (filePreviewEvent)=\"filePreviewEventHandler($event)\" (fileDownloadEvent)=\"fileDownloadEventHandler($event)\"\r\n                    #filePreview>\r\n                    <ng-template filePreviewListTypeTemplate let-data let-readonly=\"readonly\">\r\n                        <div class=\"ffilepreview--item-detail\">\r\n                            <div class=\"ffilepreview--item-icon\">\r\n                                <span class=\"ffilepreview--filetype-icon\" [ngClass]=\"filePreview.getFileTypeClassName(data.name)\"></span>\r\n                            </div>\r\n                            <div class=\"ffilepreview--item-content\">\r\n                                <a class=\"item-content--title\" [title]=\"data.name\"\r\n                                    (click)=\"filePreview.filePreviewHandler($event,data)\">{{data.name}}</a>\r\n                                <div class=\"item-content--toolbar f-text-light\">\r\n                                    <button class=\"btn btn-link\" (click)=\"filePreview.filePreviewHandler($event,data)\">\r\n                                    <span class=\"f-icon f-icon-preview\"></span>\u9884\u89C8\r\n                                    </button>\r\n                                    <button class=\"btn btn-link\" (click)=\"filePreview.fileDownloadHandler($event,data)\">\r\n                                    <span class=\"f-icon f-icon-download\"></span>\u4E0B\u8F7D\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n                </f-file-preview>\r\n            </div> -->\r\n            <div class=\"discussion-item-footer\">\r\n                <div class=\"discussion-item-time\">\r\n                    <span class=\"discussion-item-time-text\">{{item.commentDate | dateformat:'yyyy-MM-dd HH:mm'}}</span>\r\n                </div>\r\n                <div class=\"discussion-item-btns\">\r\n                    <span class=\"discussion-item-btns-start\" (click)=\"reply(item)\">\r\n                        <span class=\"f-icon f-icon-message\"></span>\r\n                        <span class=\"discussion-item-btns-start-text\">\r\n                            {{ 'discussionGroup.reply' | locale }}\r\n                        </span>\r\n                    </span>\r\n                    <!-- <span class=\"discussion-item-btns-new\">\r\n                        <span class=\"f-icon f-icon-star-outline\"></span>\r\n                    </span> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"f-discussion-group-footer\" *ngIf=\"supportPaging\">\r\n        <pagination-controls #pager \r\n            [id]=\"paginationOptions.id\" \r\n            [maxSize]=\"maxSize\" \r\n            [directionLinks]=\"directionLinks\"\r\n            [autoHide]=\"autoHide\" \r\n            [responsive]=\"responsive\" \r\n            [previousLabel]=\"labels.previousLabel\"\r\n            [nextLabel]=\"labels.nextLabel\"\r\n            (pageChange)=\"onPageChange($event)\"\r\n            (pageSizeChange)=\"onPageSizeChange($event)\"\r\n            [showPageList]=\"false\"\r\n        >\r\n        </pagination-controls>\r\n    </div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".f-discussion-group-content-item{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;margin-bottom:14px}.f-discussion-group-content-item .discussion-item-avatar{width:32px;height:32px;margin-right:10px;overflow:hidden;cursor:pointer;flex-shrink:0}.f-discussion-group-content-item .discussion-item-avatar-img{display:block;width:32px;height:32px;border-radius:50%}.f-discussion-group-content-item .discussion-item-avatar-tip{width:32px;height:32px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-group-content-item .discussion-item-inner{flex-shrink:1;-webkit-box-flex:1;flex-grow:1;flex-basis:0;padding-bottom:14px;border-bottom:1px solid #e3e3e3;overflow:hidden}.f-discussion-group-content-item .discussion-item-inner .discussion-item-username{margin-bottom:4px;font-size:16px;color:rgba(0,0,0,.85)}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text{font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text .discussion-item-text-message{word-break:break-all}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text-reply{margin-top:11px;padding:6px 8px;font-size:0;background:#f5f5f5;border-radius:2px}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text-reply-content,.f-discussion-group-content-item .discussion-item-inner .discussion-item-text-reply-title{font-size:14px;color:rgba(0,0,0,.75);line-height:20px}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text-reply-title .discussion-item-text-reply-name{color:#3487e3}.f-discussion-group-content-item .discussion-item-inner .discussion-item-text-reply-content{word-break:break-all}.f-discussion-group-content-item .discussion-item-inner .discussion-item-files{margin-top:11px}.f-discussion-group-content-item .discussion-item-inner .discussion-item-files .ffilepreview--filetype-icon{width:40px;height:40px}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer{margin-top:10px;padding-right:20px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-time{font-size:14px;color:#b1b6c2}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;position:relative;cursor:pointer}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start .f-icon{color:rgba(0,0,0,.45);font-size:16px}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start .f-icon::before{vertical-align:bottom}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start .discussion-item-btns-start-text{margin-left:14px;font-size:14px;color:rgba(0,0,0,.45)}.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start:hover .discussion-item-btns-start-text,.f-discussion-group-content-item .discussion-item-inner .discussion-item-footer .discussion-item-btns .discussion-item-btns-start:hover .f-icon{color:#3487e3}.f-discussion-group-content-item:last-child .discussion-item-inner{border-bottom:none}"]
                }] }
    ];
    /** @nocollapse */
    DiscussionListComponent.ctorParameters = function () { return [
        { type: DiscussionListService }
    ]; };
    DiscussionListComponent.propDecorators = {
        personnelsDisplayKey: [{ type: Input }],
        pagerOnServer: [{ type: Input }],
        supportPaging: [{ type: Input }],
        pageIndex: [{ type: Input }],
        total: [{ type: Input }],
        pageSize: [{ type: Input }],
        discussionData: [{ type: Input }],
        replyMessage: [{ type: Output }],
        pageChanged: [{ type: Output }],
        pageSizeChanged: [{ type: Output }],
        filePreview: [{ type: Output }],
        fileDownload: [{ type: Output }],
        pager: [{ type: ViewChild, args: ['pager',] }]
    };
    return DiscussionListComponent;
}());
export { DiscussionListComponent };
if (false) {
    /** @type {?} */
    DiscussionListComponent.prototype.personnelsDisplayKey;
    /** @type {?} */
    DiscussionListComponent.prototype.pagerOnServer;
    /** @type {?} */
    DiscussionListComponent.prototype.supportPaging;
    /**
     * 当前页码
     * @type {?}
     */
    DiscussionListComponent.prototype.pageIndex;
    /**
     * 总条数
     * @type {?}
     * @private
     */
    DiscussionListComponent.prototype._total;
    /**
     * 每页显示个数
     * @type {?}
     * @private
     */
    DiscussionListComponent.prototype._pageSize;
    /**
     * 评论数据
     * @type {?}
     */
    DiscussionListComponent.prototype.innerDiscussionData;
    /** @type {?} */
    DiscussionListComponent.prototype._discussionData;
    /** @type {?} */
    DiscussionListComponent.prototype.replyMessage;
    /** @type {?} */
    DiscussionListComponent.prototype.pageChanged;
    /** @type {?} */
    DiscussionListComponent.prototype.pageSizeChanged;
    /**
     * 附件预览
     * @type {?}
     */
    DiscussionListComponent.prototype.filePreview;
    /**
     * 附件下载
     * @type {?}
     */
    DiscussionListComponent.prototype.fileDownload;
    /** @type {?} */
    DiscussionListComponent.prototype.labels;
    /** @type {?} */
    DiscussionListComponent.prototype.directionLinks;
    /** @type {?} */
    DiscussionListComponent.prototype.maxSize;
    /** @type {?} */
    DiscussionListComponent.prototype.responsive;
    /** @type {?} */
    DiscussionListComponent.prototype.autoHide;
    /** @type {?} */
    DiscussionListComponent.prototype.paginationOptions;
    /** @type {?} */
    DiscussionListComponent.prototype.pager;
    /**
     * @type {?}
     * @private
     */
    DiscussionListComponent.prototype.discussionListService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvZGlzY3Vzc2lvbi1ncm91cC8iLCJzb3VyY2VzIjpbImxpYi9kaXNjdXNzaW9uLWxpc3QvZGlzY3Vzc2lvbi1saXN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDN0csT0FBTyxFQUFFLDJCQUEyQixFQUFzQixNQUFNLHVCQUF1QixDQUFDO0FBQ3hGLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRWxFO0lBcUZJLGlDQUFvQixxQkFBNEM7UUFBNUMsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1Qjs7UUE3RXZELHlCQUFvQixHQUFHLFVBQVUsQ0FBQztRQUNsQyxrQkFBYSxHQUFHLElBQUksQ0FBQzs7UUFFckIsa0JBQWEsR0FBRyxJQUFJLENBQUM7Ozs7OztRQUlyQixjQUFTLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7UUFhZixXQUFNLEdBQUcsQ0FBQyxDQUFDOzs7O1FBYVgsY0FBUyxHQUFHLEVBQUUsQ0FBQzs7Ozs7O1FBWXZCLHdCQUFtQixHQUFHLEVBQUUsQ0FBQztRQUN6QixvQkFBZSxHQUFHLEVBQUUsQ0FBQztRQVdYLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFFbEMsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2pDLG9CQUFlLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7OztRQUdyQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7Ozs7UUFFakMsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3JDLFdBQU0sR0FBUTtZQUNqQixhQUFhLEVBQUUsR0FBRztZ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bnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBQYWdpbmF0aW9uQ29udHJvbHNDb21wb25lbnQsIFBhZ2luYXRpb25JbnN0YW5jZSB9IGZyb20gJ0BmYXJyaXMvdWktcGFnaW5hdGlvbic7XHJcbmltcG9ydCB7IERpc2N1c3Npb25MaXN0U2VydmljZSB9IGZyb20gJy4vZGlzY3Vzc2lvbi1saXN0LnNlcnZpY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1kaXNjdXNzaW9uLWxpc3QnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Rpc2N1c3Npb24tbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9kaXNjdXNzaW9uLWxpc3QuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIERpc2N1c3Npb25MaXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIC8vIEBJbnB1dCgpIHBlcnNvbm5lbHNQcmltYXJ5S2V5OiBzdHJpbmcgPSAndXNlcklkJztcclxuICAgIEBJbnB1dCgpIHBlcnNvbm5lbHNEaXNwbGF5S2V5ID0gJ3VzZXJOYW1lJztcclxuICAgIEBJbnB1dCgpIHBhZ2VyT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyogKuaYr+WQpuaUr+aMgeWIhumhtSAqL1xyXG4gICAgQElucHV0KCkgc3VwcG9ydFBhZ2luZyA9IHRydWU7XHJcbiAgICAvKiogIOaAu+mhteaVsCAqL1xyXG4gICAgLy8gQElucHV0KCkgcGFnZVNpemU6bnVtYmVyO1xyXG4gICAgLyoqICDlvZPliY3pobXnoIEgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VJbmRleCA9IDE7XHJcbiAgICAvKiogIOavj+mhteaYvuekuuadoeaVsOmAiemhuSAqL1xyXG4gICAgLy8gcHJpdmF0ZSBfcGFnZUxpc3QgPSBbMTAsMjAsMzAsNTBdO1xyXG4gICAgLy8gZ2V0IHBhZ2VMaXN0KCkge1xyXG4gICAgLy8gICAgIHJldHVybiB0aGlzLl9wYWdlTGlzdDtcclxuICAgIC8vIH1cclxuICAgIC8vIEBJbnB1dCgpIHNldCBwYWdlTGlzdCh2YWwpIHtcclxuICAgIC8vICAgICB0aGlzLl9wYWdlTGlzdCA9IHZhbDtcclxuICAgIC8vICAgICBpZiAodGhpcy5wYWdlcikge1xyXG4gICAgLy8gICAgICAgICB0aGlzLnBhZ2VyLnNldFBhZ2VMaXN0KHZhbCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG4gICAgLyoqICDmgLvmnaHmlbAgKi9cclxuICAgIHByaXZhdGUgX3RvdGFsID0gMDtcclxuICAgIGdldCB0b3RhbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG90YWw7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgdG90YWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdG90YWwgPSB2YWw7XHJcbiAgICAgICAgLy8gdGhpcy5wYWdpbmF0aW9uT3B0aW9ucy50b3RhbEl0ZW1zID0gdmFsO1xyXG4gICAgICAgIHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICAgICAgLy8gaWYodmFsKXtcclxuICAgICAgICAvLyAgIHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgLyoqICDmr4/pobXmmL7npLrkuKrmlbAgKi9cclxuICAgIHByaXZhdGUgX3BhZ2VTaXplID0gMTA7XHJcbiAgICBnZXQgcGFnZVNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VTaXplO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IHBhZ2VTaXplKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3BhZ2VTaXplID0gdmFsO1xyXG4gICAgICAgIC8vIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaXRlbXNQZXJQYWdlID0gdmFsO1xyXG4gICAgICAgIHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgICAvKiogIOaAu+adoeaVsCAqL1xyXG4gICAgLy8gQElucHV0KCkgdG90YWwgPSAwO1xyXG4gICAgLyoqICDor4TorrrmlbDmja4gKi9cclxuICAgIGlubmVyRGlzY3Vzc2lvbkRhdGEgPSBbXTtcclxuICAgIF9kaXNjdXNzaW9uRGF0YSA9IFtdO1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBkaXNjdXNzaW9uRGF0YSh2YWwpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2N1c3Npb25EYXRhID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyRGlzY3Vzc2lvbkRhdGEgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGRpc2N1c3Npb25EYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNjdXNzaW9uRGF0YTtcclxuICAgIH1cclxuICAgIEBPdXRwdXQoKSByZXBseU1lc3NhZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvLyDliIbpobXkuovku7ZcclxuICAgIEBPdXRwdXQoKSBwYWdlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBwYWdlU2l6ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gICAgLyoqIOmZhOS7tumihOiniCAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVQcmV2aWV3ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOmZhOS7tuS4i+i9vSAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVEb3dubG9hZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIHB1YmxpYyBsYWJlbHM6IGFueSA9IHtcclxuICAgICAgICBwcmV2aW91c0xhYmVsOiAnICcsXHJcbiAgICAgICAgbmV4dExhYmVsOiAnICdcclxuICAgIH07XHJcbiAgICBwdWJsaWMgZGlyZWN0aW9uTGlua3MgPSB0cnVlO1xyXG4gICAgcHVibGljIG1heFNpemUgPSA3O1xyXG4gICAgcHVibGljIHJlc3BvbnNpdmUgPSB0cnVlO1xyXG4gICAgcHVibGljIGF1dG9IaWRlID0gZmFsc2U7XHJcbiAgICBwYWdpbmF0aW9uT3B0aW9uczogUGFnaW5hdGlvbkluc3RhbmNlO1xyXG4gICAgQFZpZXdDaGlsZCgncGFnZXInKSBwYWdlcjogUGFnaW5hdGlvbkNvbnRyb2xzQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGlzY3Vzc2lvbkxpc3RTZXJ2aWNlOiBEaXNjdXNzaW9uTGlzdFNlcnZpY2UpIHsgfVxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHtcclxuICAgICAgICAvLyAgIGlkOiAnRmFycmlzLWRpc2N1c3Npb24tUGFnaW5hdGlvbicsXHJcbiAgICAgICAgLy8gICBpdGVtc1BlclBhZ2U6IHRoaXMucGFnZVNpemUsXHJcbiAgICAgICAgLy8gICBjdXJyZW50UGFnZTogdGhpcy5wYWdlSW5kZXgsXHJcbiAgICAgICAgLy8gICAvLyBwYWdlTGlzdDogdGhpcy5wYWdlTGlzdCxcclxuICAgICAgICAvLyAgIHRvdGFsSXRlbXM6IHRoaXMudG90YWxcclxuICAgICAgICAvLyB9O1xyXG4gICAgICAgIHRoaXMuaW5pdFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICAgICAgLyoqIOebkeWQrOaMh+S7pOW+l+WIsOeahOaVsOaNriAqL1xyXG4gICAgICAgIHRoaXMuZGlzY3Vzc2lvbkxpc3RTZXJ2aWNlLmdldERhdGEoKS5zdWJzY3JpYmUoKGRhdGE6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiAhdGhpcy5fZGlzY3Vzc2lvbkRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlubmVyRGlzY3Vzc2lvbkRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpbml0UGFnaW5hdGlvbk9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaWQ6ICdGYXJyaXMtZGlzY3Vzc2lvbi1QYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiB0aGlzLl9wYWdlU2l6ZSxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlTGlzdDogWzEwLCAyMCwgMzAsIDUwLCAxMDBdLFxyXG4gICAgICAgICAgICB0b3RhbEl0ZW1zOiB0aGlzLl90b3RhbCxcclxuICAgICAgICAgICAgcmVtb3RlOiB0aGlzLnBhZ2VyT25TZXJ2ZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqIOeCueWHu+WbnuWkjeeVmeiogCAqL1xyXG4gICAgcmVwbHkoaXRlbSkge1xyXG4gICAgICAgIHRoaXMucmVwbHlNZXNzYWdlLmVtaXQoaXRlbSk7XHJcbiAgICB9XHJcbiAgICAvKiog6aG156CB5Y+Y5YyWICovXHJcbiAgICBvblBhZ2VDaGFuZ2UocGFnZTogeyBwYWdlSW5kZXg6IG51bWJlciwgcGFnZVNpemU6IG51bWJlciB9KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFnZUluZGV4ICE9PSBwYWdlLnBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2UucGFnZUluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gcGFnZS5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZUNoYW5nZWQuZW1pdCh7IHBhZ2VJbmZvOiBwYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiDmr4/pobXmmL7npLrmnaHmlbDlj5jljJYgKi9cclxuICAgIG9uUGFnZVNpemVDaGFuZ2UocGFnZVNpemU6IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VTaXplICE9PSBwYWdlU2l6ZSAmJiB0aGlzLnRvdGFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbk9wdGlvbnMuaXRlbXNQZXJQYWdlID0gcGFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy50b3RhbDtcclxuICAgICAgICAgICAgbGV0IHBhZ2VMZW5ndGggPSBNYXRoLmZsb29yKHRvdGFsIC8gcGFnZVNpemUpO1xyXG4gICAgICAgICAgICBpZiAodG90YWwgJSBwYWdlU2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VMZW5ndGggKz0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhZ2VMZW5ndGggJiYgdGhpcy5wYWdlSW5kZXggPiBwYWdlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmRleCA9IHBhZ2VMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLmN1cnJlbnRQYWdlID0gdGhpcy5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFnZVNpemVDaGFuZ2VkLmVtaXQoeyBwYWdlSW5mbzogeyBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LCBwYWdlU2l6ZTogcGFnZVNpemUgfSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog6ZmE5Lu26aKE6KeIICovXHJcbiAgICBmaWxlUHJldmlld0V2ZW50SGFuZGxlcihpbmZvKSB7XHJcbiAgICAgICAgdGhpcy5maWxlUHJldmlldy5lbWl0KGluZm8pO1xyXG4gICAgfVxyXG4gICAgLyoqIOmZhOS7tuS4i+i9vSAqL1xyXG4gICAgZmlsZURvd25sb2FkRXZlbnRIYW5kbGVyKGluZm8pIHtcclxuICAgICAgICB0aGlzLmZpbGVEb3dubG9hZC5lbWl0KGluZm8pO1xyXG4gICAgfVxyXG4gICAgLyoqIOWNoOS9jeWktOWDj+aWh+WtlyAqL1xyXG4gICAgZ2V0QXZhdGFyKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtW3RoaXMucGVyc29ubmVsc0Rpc3BsYXlLZXldKSB7XHJcbiAgICAgICAgICAgIGxldCBzdHIgPSBpdGVtW3RoaXMucGVyc29ubmVsc0Rpc3BsYXlLZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gMiwgc3RyLmxlbmd0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=