/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
var DiscussionListService = /** @class */ (function () {
    function DiscussionListService() {
        this.resultDiscussion = new BehaviorSubject(null);
    }
    ;
    /**
     * @param {?} data
     * @return {?}
     */
    DiscussionListService.prototype.resetData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var results = [];
        if (data && data.commentIds && data.commentIds.length) {
            data.commentIds.forEach((/**
             * @param {?} commentId
             * @return {?}
             */
            function (commentId) {
                /** @type {?} */
                var item = data['comments'].find((/**
                 * @param {?} comment
                 * @return {?}
                 */
                function (comment) {
                    return comment["id"] === commentId;
                }));
                if (item) {
                    /** @type {?} */
                    var id = item["id"];
                    /** @type {?} */
                    var userId = item["userId"];
                    /** @type {?} */
                    var userName = item['user']["name"];
                    /** @type {?} */
                    var 
                    //  imgData = item['user']["imgData"],
                    imgData = item['user'].hasOwnProperty('imgData') ? item['user']["imgData"] : '';
                    /** @type {?} */
                    var commentDate = item["commentDate"];
                    /** @type {?} */
                    var 
                    //  commentDate = this.dataFormate(item["commentDate"]),
                    text = item["text"];
                    /** @type {?} */
                    var attachFiles = item.hasOwnProperty('attachFiles') ? item["attachFiles"] : [];
                    /** @type {?} */
                    var parentData = void 0;
                    if (item.hasOwnProperty('parentId')) {
                        /** @type {?} */
                        var parentItem = data['comments'].find((/**
                         * @param {?} i
                         * @return {?}
                         */
                        function (i) {
                            return i.id === item.parentId;
                        }));
                        if (parentItem) {
                            /** @type {?} */
                            var parid = parentItem["id"];
                            /** @type {?} */
                            var paruserId = parentItem["userId"];
                            /** @type {?} */
                            var paruserName = parentItem['user']["name"];
                            /** @type {?} */
                            var 
                            // parimgData = parentItem['user']["imgData"],
                            parimgData = parentItem['user'].hasOwnProperty('imgData') ? parentItem['user']["imgData"] : '';
                            /** @type {?} */
                            var parcommentDate = parentItem["commentDate"];
                            /** @type {?} */
                            var partext = parentItem["text"];
                            /** @type {?} */
                            var parattachFiles = parentItem.hasOwnProperty('attachFiles') ? parentItem["attachFiles"] : [];
                            parentData = {
                                id: parid,
                                userId: paruserId,
                                userName: paruserName,
                                imgData: parimgData,
                                commentDate: parcommentDate,
                                text: partext,
                                attachFiles: parattachFiles
                            };
                        }
                    }
                    /** @type {?} */
                    var thisData = {
                        id: id,
                        userId: userId,
                        userName: userName,
                        imgData: imgData,
                        commentDate: commentDate,
                        text: text,
                        attachFiles: attachFiles,
                        parentData: parentData
                    };
                    results.push(thisData);
                }
                else {
                    return;
                }
            }));
        }
        // this.resultDiscussion = results;
        this.resultDiscussion.next(results);
    };
    /**
     * @return {?}
     */
    DiscussionListService.prototype.getData = /**
     * @return {?}
     */
    function () {
        return this.resultDiscussion;
    };
    DiscussionListService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    DiscussionListService.ctorParameters = function () { return []; };
    return DiscussionListService;
}());
export { DiscussionListService };
if (false) {
    /** @type {?} */
    DiscussionListService.prototype.resultDiscussion;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1saXN0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2Rpc2N1c3Npb24tZ3JvdXAvIiwic291cmNlcyI6WyJsaWIvZGlzY3Vzc2lvbi1saXN0L2Rpc2N1c3Npb24tbGlzdC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBVSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0M7SUFLSTtRQUZBLHFCQUFnQixHQUF5QixJQUFJLGVBQWUsQ0FBTSxJQUFJLENBQUMsQ0FBQztJQUV4RCxDQUFDO0lBRnVELENBQUM7Ozs7O0lBSXpFLHlDQUFTOzs7O0lBQVQsVUFBVSxJQUFJOztZQUNOLE9BQU8sR0FBRyxFQUFFO1FBQ2hCLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDbkQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxTQUFTOztvQkFDdkIsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJOzs7O2dCQUFDLFVBQUMsT0FBTztvQkFDdkMsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFBO2dCQUN0QyxDQUFDLEVBQUM7Z0JBQ0YsSUFBSSxJQUFJLEVBQUU7O3dCQUNGLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDOzt3QkFDZixNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7d0JBQ3ZCLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDOzs7b0JBQy9CLHNDQUFzQztvQkFDdEMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs7d0JBQy9FLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDOzs7b0JBQ2pDLHdEQUF3RDtvQkFDeEQsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7O3dCQUNuQixXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFOzt3QkFDM0UsVUFBVSxTQUFBO29CQUNkLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsRUFBRTs7NEJBQzdCLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSTs7Ozt3QkFBQyxVQUFBLENBQUM7NEJBQ3BDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDO3dCQUNsQyxDQUFDLEVBQUM7d0JBQ0YsSUFBSSxVQUFVLEVBQUU7O2dDQUNSLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDOztnQ0FDeEIsU0FBUyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7O2dDQUNoQyxXQUFXLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQzs7OzRCQUN4Qyw4Q0FBOEM7NEJBQzlDLFVBQVUsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7O2dDQUM5RixjQUFjLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQzs7Z0NBQzFDLE9BQU8sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDOztnQ0FDNUIsY0FBYyxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs0QkFDOUYsVUFBVSxHQUFHO2dDQUNULEVBQUUsRUFBRSxLQUFLO2dDQUNULE1BQU0sRUFBRSxTQUFTO2dDQUNqQixRQUFRLEVBQUUsV0FBVztnQ0FDckIsT0FBTyxFQUFFLFVBQVU7Z0NBQ25CLFdBQVcsRUFBRSxjQUFjO2dDQUMzQixJQUFJLEVBQUUsT0FBTztnQ0FDYixXQUFXLEVBQUUsY0FBYzs2QkFDOUIsQ0FBQTt5QkFDSjtxQkFDSjs7d0JBQ0csUUFBUSxHQUFxQjt3QkFDN0IsRUFBRSxJQUFBO3dCQUNGLE1BQU0sUUFBQTt3QkFDTixRQUFRLFVBQUE7d0JBQ1IsT0FBTyxTQUFBO3dCQUNQLFdBQVcsYUFBQTt3QkFDWCxJQUFJLE1BQUE7d0JBQ0osV0FBVyxhQUFBO3dCQUNYLFVBQVUsWUFBQTtxQkFDYjtvQkFDRCxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUMxQjtxQkFDSTtvQkFDRCxPQUFPO2lCQUNWO1lBQ0wsQ0FBQyxFQUFDLENBQUM7U0FDTjtRQUNELG1DQUFtQztRQUNuQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7Ozs7SUFDRCx1Q0FBTzs7O0lBQVA7UUFDSSxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDOztnQkF2RUosVUFBVTs7OztJQXdFWCw0QkFBQztDQUFBLEFBeEVELElBd0VDO1NBdkVZLHFCQUFxQjs7O0lBRTlCLGlEQUF3RSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgZGlzY3Vzc2lvbkNvbmZpZyB9IGZyb20gJy4vZGlzY3Vzc2lvbkxpc3QuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgU3ViamVjdCxCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIERpc2N1c3Npb25MaXN0U2VydmljZSB7XHJcblxyXG4gICAgcmVzdWx0RGlzY3Vzc2lvbjogQmVoYXZpb3JTdWJqZWN0PGFueT4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4obnVsbCk7O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgcmVzZXREYXRhKGRhdGEpIHtcclxuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29tbWVudElkcyAmJiBkYXRhLmNvbW1lbnRJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEuY29tbWVudElkcy5mb3JFYWNoKGNvbW1lbnRJZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YVsnY29tbWVudHMnXS5maW5kKChjb21tZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRbXCJpZFwiXSA9PT0gY29tbWVudElkXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBpdGVtW1wiaWRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZCA9IGl0ZW1bXCJ1c2VySWRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lID0gaXRlbVsndXNlciddW1wibmFtZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGltZ0RhdGEgPSBpdGVtWyd1c2VyJ11bXCJpbWdEYXRhXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhID0gaXRlbVsndXNlciddLmhhc093blByb3BlcnR5KCdpbWdEYXRhJykgPyBpdGVtWyd1c2VyJ11bXCJpbWdEYXRhXCJdIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnREYXRlID0gaXRlbVtcImNvbW1lbnREYXRlXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgY29tbWVudERhdGUgPSB0aGlzLmRhdGFGb3JtYXRlKGl0ZW1bXCJjb21tZW50RGF0ZVwiXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBpdGVtW1widGV4dFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoRmlsZXMgPSBpdGVtLmhhc093blByb3BlcnR5KCdhdHRhY2hGaWxlcycpID8gaXRlbVtcImF0dGFjaEZpbGVzXCJdIDogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3BhcmVudElkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudEl0ZW0gPSBkYXRhWydjb21tZW50cyddLmZpbmQoaSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5pZCA9PT0gaXRlbS5wYXJlbnRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJpZCA9IHBhcmVudEl0ZW1bXCJpZFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ1c2VySWQgPSBwYXJlbnRJdGVtW1widXNlcklkXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnVzZXJOYW1lID0gcGFyZW50SXRlbVsndXNlciddW1wibmFtZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXJpbWdEYXRhID0gcGFyZW50SXRlbVsndXNlciddW1wiaW1nRGF0YVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJpbWdEYXRhID0gcGFyZW50SXRlbVsndXNlciddLmhhc093blByb3BlcnR5KCdpbWdEYXRhJykgPyBwYXJlbnRJdGVtWyd1c2VyJ11bXCJpbWdEYXRhXCJdIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyY29tbWVudERhdGUgPSBwYXJlbnRJdGVtW1wiY29tbWVudERhdGVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGV4dCA9IHBhcmVudEl0ZW1bXCJ0ZXh0XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmF0dGFjaEZpbGVzID0gcGFyZW50SXRlbS5oYXNPd25Qcm9wZXJ0eSgnYXR0YWNoRmlsZXMnKSA/IHBhcmVudEl0ZW1bXCJhdHRhY2hGaWxlc1wiXSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcGFyaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBwYXJ1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck5hbWU6IHBhcnVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0RhdGE6IHBhcmltZ0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudERhdGU6IHBhcmNvbW1lbnREYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBhcnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoRmlsZXM6IHBhcmF0dGFjaEZpbGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoaXNEYXRhOiBkaXNjdXNzaW9uQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaEZpbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godGhpc0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5yZXN1bHREaXNjdXNzaW9uID0gcmVzdWx0cztcclxuICAgICAgICB0aGlzLnJlc3VsdERpc2N1c3Npb24ubmV4dChyZXN1bHRzKTtcclxuICAgIH1cclxuICAgIGdldERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0RGlzY3Vzc2lvbjtcclxuICAgIH1cclxufVxyXG4iXX0=