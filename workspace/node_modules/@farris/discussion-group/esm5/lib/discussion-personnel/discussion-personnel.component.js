/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Renderer2, NgZone, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { of, forkJoin, Subject } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { LocaleService } from '@farris/ui-locale';
import { LoadingService } from '@farris/ui-loading';
import { debounceTime } from 'rxjs/operators';
import { WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';
var DiscussionPersonnelComponent = /** @class */ (function () {
    function DiscussionPersonnelComponent(renderer, elementRef, ngZone, http, cd, injector) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.http = http;
        this.cd = cd;
        this.injector = injector;
        // 操作列表或者分组所需要的主键字段
        this.listIdField = "id";
        // 列表中显示的字段
        this.listDisplayText = "userName";
        // 分层获取组织的链接
        // 使用方式 /api/runtime/sys/v1.0/sysOrgs?param={"parentId":"afa5ee9b-f9ba-2927-f9ce-2a30369267e9"}
        this.urlGetOrgByLayer = "/api/runtime/sys/v1.0/sysOrgs";
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        this.openDialog = new EventEmitter();
        this.ougUsers = new EventEmitter();
        this.loadingInstance = null;
        // 右侧项
        this.selections = [];
        this.selectedSections = [];
        this.selectedUsers = [];
        // 最重要显示的人员信息
        this.finalText = '';
        this.sectionDataTree = [];
        this.sectionDataTiled = [];
        this.currentSectionData = [];
        this.currentSection = {};
        this.currentSectionPerson = {};
        this.currentSectionId = '';
        this.sectionCrumbs = [];
        this.pageSize = 20;
        this.showSearchList = false;
        this.crumbsEllipsis = false;
        this.searchUserList = {};
        this.selectEmployee = "选择员工";
        this.placeholder = "请输入员工姓名搜索";
        this.allOrg = "全部组织";
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        // 标记请求
        this.recordGetUserSubscribe = null;
        // 查询变化
        this.searchTextChangeSubject = new Subject();
        this.errorText = '';
        this.perfixStr = '';
        this.localeService = this.injector.get(LocaleService);
        this.loadingSer = this.injector.get(LoadingService);
        if (WEBAPI_PREFIX_TOKEN) {
            this.perfixStr = this.injector.get(WEBAPI_PREFIX_TOKEN, '');
        }
    }
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // let sectionDataTrees = this.initsectionData(this.sectionData,'');
        this.allOrg = this.localeService.getValue('discussionGroup.allOrg');
        /** @type {?} */
        var sectionDataTrees = this.initSectionData(this.sectionData, '');
        // this.sectionSort(sectionDataTrees);
        // if(sectionDataTrees.length>1){
        /** @type {?} */
        var sectionParent = [
            {
                data: {
                    id: 'discussionParent',
                    code: 'parent',
                    name: this.allOrg,
                    layer: 0,
                    parentId: "",
                    sortOrder: 1,
                    path: "",
                },
                children: [],
                personnels: {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                },
                parent: null,
                parents: [],
                parentsArr: [],
                checked: false
            }
        ];
        sectionParent[0].children = sectionDataTrees;
        sectionParent[0].children.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
        this.initSectionTree(sectionParent[0].children);
        this.sectionDataTree = sectionParent;
        // }
        // else{
        //     this.sectionDataTree = sectionDataTrees;
        // }
        //console.log(this.sectionDataTree);
        if (this.sectionDataTree && this.sectionDataTree.length) {
            // 如果有组织树的数据，打平成数组数据
            this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);
        }
        /**
         * 当前界面上的组织节点完整树数据
         * {
         *    checked:false,组织是否选中
         *    children:[],组织的子部门
         *    data:{ 来自于从服务器端返回的数据结构
         *      id:组织id,
         *      code:组织code,
         *      name:组织名称
         *      layer:组织层级
         *      parentId:父节点
         *      ....
         *      },
         *    parents:[],父节点Id
         *    parentsArr:[{id:'组织节点Id',name:'组织节点名称'}],
         *    personnels:{
         *          count:0,
         *          pageCount:,
         *          users:[] 用户信息
         *      }
         * }
         *
         */
        this.currentSection = this.sectionDataTree[0];
        // 面包屑数据[{id:'组织节点Id',name:'组织节点名称'}]
        this.sectionCrumbs = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children[0]['parentsArr'] : [];
        // 当前界面上的组织列表数据
        this.currentSectionData = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children : [];
        // 当前界面上的组织隶属的组织的数据Id
        this.currentSectionId = this.sectionDataTree[0].data.id;
        // 绑定当人员获取回数据时，执行的操作
        this.getPersonnel(this.currentSectionId, 0).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            if (d.hasOwnProperty("users")) {
                _this.sectionDataTree[0].personnels = d;
                _this.currentSectionPerson = _this.sectionDataTree[0].personnels;
                // console.log('cur',this.currentSectionPerson);
            }
        }));
        this.selectEmployee = this.localeService.getValue('discussionGroup.selectEmployee');
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
        // console.log(this.sectionDataTiled);
        // 窗口打开时再调用也可以 this.dialogOpend();
    };
    /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionTree = /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    function (data, parentId, parentName) {
        var _this = this;
        if (parentId === void 0) { parentId = "discussionParent"; }
        if (parentName === void 0) { parentName = this.allOrg; }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var par = {
                    id: parentId,
                    name: parentName
                };
                item.parentsArr.unshift(par);
                item.parents.unshift(parentId);
                if (item.children.length) {
                    _this.initSectionTree(item.children);
                }
            }));
        }
    };
    /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     */
    /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @param {?=} presetParent
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initSectionData = /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @param {?=} presetParent
     * @return {?}
     */
    function (data, parentId, parentIdField, idField, presetParent) {
        if (parentIdField === void 0) { parentIdField = 'parentId'; }
        if (idField === void 0) { idField = 'id'; }
        if (presetParent === void 0) { presetParent = null; }
        /** @type {?} */
        var nodes = new Map();
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var unattached = [];
        if (presetParent) {
            nodes.set(presetParent.data.id, presetParent);
        }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var node = {
                    data: item,
                    children: [],
                    personnels: {},
                    parent: null,
                    parents: [],
                    parentsArr: [],
                    checked: false
                };
                /** @type {?} */
                var id = item[idField];
                nodes.set(id, node);
                /** @type {?} */
                var PID = item[parentIdField];
                // 初始
                if (PID === parentId || PID === null) {
                    result.push(node);
                }
                else {
                    /** @type {?} */
                    var parent_1 = nodes.get(PID);
                    // console.log(parent);
                    if (parent_1) {
                        /** @type {?} */
                        var par = {
                            id: PID,
                            name: parent_1.data.name
                        };
                        node['parent'] = PID;
                        node['parents'] = tslib_1.__spread(parent_1.parents, [PID]);
                        node['parentsArr'] = tslib_1.__spread(parent_1.parentsArr, [par]);
                        parent_1.children.push(node);
                        parent_1.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                    else {
                        unattached.push(node);
                    }
                }
            }));
            if (unattached.length) {
                unattached.forEach((/**
                 * @param {?} unItem
                 * @return {?}
                 */
                function (unItem) {
                    /** @type {?} */
                    var pid = unItem.data[parentIdField];
                    /** @type {?} */
                    var parent = nodes.get(pid);
                    if (parent) {
                        // 构造数据
                        unItem['parent'] = pid;
                        unItem['parents'] = tslib_1.__spread(parent.parents, [pid]);
                        unItem['parentsArr'] = tslib_1.__spread(parent.parentsArr, [{
                                id: pid,
                                name: parent.data.name
                            }]);
                        parent.children.push(unItem);
                        parent.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        function (a, b) { return a.data['sortOrder'] - b.data['sortOrder']; }));
                    }
                }));
            }
        }
        return result;
    };
    /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param nodes
     */
    /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param {?} nodes
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.tileSectionData = /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param {?} nodes
     * @return {?}
     */
    function (nodes) {
        /** @type {?} */
        var r = [];
        this.getAllNodes(nodes, r);
        return r;
    };
    /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param nodes
     * @param r
     */
    /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getAllNodes = /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    function (nodes, r) {
        var _this = this;
        nodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        function (n) {
            r.push(n);
            if (n.children.length) {
                _this.getAllNodes(n.children, r);
            }
        }));
    };
    /**
     * 点击下级
     * @param section
     */
    /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.sectionNext = /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        // 构造组织节点下面的人员信息，如果没有人员信息，就构造结构，然后发请求获取人员信息
        this.showOrHideLoading(true);
        forkJoin([this.getOrgByLayerHttp(section), this.getPersonByUrlHttp(section)])
            .subscribe((/**
         * @param {?} orgAndPersonDatas
         * @return {?}
         */
        function (orgAndPersonDatas) {
            _this.showOrHideLoading(false);
            // 获取组织数据
            /** @type {?} */
            var getOrgData = orgAndPersonDatas[0];
            if (getOrgData !== false) {
                // 从服务器端真实返回数据,直接在方法内更新section的结构
                _this.initSectionData(getOrgData, '', 'parentId', 'id', section);
                // 输入所有组织树的数据，看section变更是否更新
                // 更新数据
                _this.sectionDataTiled = _this.tileSectionData(_this.sectionDataTree);
            }
            // 获取人员数据
            /** @type {?} */
            var getPersonData = orgAndPersonDatas[1];
            if (getPersonData !== false) {
                // 构造数据
                section.personnels = {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                };
                if (getPersonData.hasOwnProperty("users")) {
                    section.personnels.count = getPersonData['count'];
                    section.personnels.pageCount = getPersonData['pageCount'];
                    section.personnels.pageIndex = getPersonData['pageIndex'];
                    section.personnels.pageSize = getPersonData['pageSize'];
                    section.personnels.totalCount = getPersonData['totalCount'];
                    section.personnels['users'] = tslib_1.__spread(section.personnels['users'], getPersonData['users']);
                }
                else {
                    section['noPersonnel'] = true;
                }
            }
            _this.getNextData(section);
        }));
    };
    /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param section
     */
    /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getNextData = /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if ((section.children && section.children.length) || (JSON.stringify(section.personnels) !== '{}')) {
            // 如果当前组织节点有下级数据
            /** @type {?} */
            var sec = this.getSectionById(section.data.id);
            if (sec) {
                // 判断当前组织节点，是否勾选全选
                /** @type {?} */
                var secChecked_1 = sec['checked'];
                sec['disabled'] = secChecked_1 ? true : false;
                if (!sec['indeterminate']) {
                    // 当前组织的下一级组织都勾选
                    if (sec.children && sec.children.length) {
                        sec.children.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) {
                            item['checked'] = secChecked_1;
                            item['indeterminate'] = false;
                            // item['disabled'] = sec['disabled'];
                        }));
                    }
                    ;
                    // 如果有人员，当前人员都勾选
                    if (section.personnels['users'] && section.personnels['users'].length) {
                        section.personnels['users'].forEach((/**
                         * @param {?} user
                         * @return {?}
                         */
                        function (user) {
                            user['checked'] = secChecked_1;
                            user['indeterminate'] = false;
                            // user['disabled'] = sec['disabled'];
                        }));
                    }
                }
            }
            /** @type {?} */
            var secParent = {
                id: sec.data.id,
                name: sec.data.name
            };
            // 当前组织的父节点与当前组织节点数据合并
            /** @type {?} */
            var secCrumbs = tslib_1.__spread(sec['parentsArr'], [secParent]);
            // 如果当前组织有子节点，获取子节点的父数组，否则，按照上面数据合并获取
            this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : secCrumbs;
            // 新的组织节点是当前组织的子节点
            this.currentSectionData = sec.children.length ? sec.children : [];
            // 记录当前组织节点
            this.currentSection = sec;
            // 记录当前组织节点的数据
            this.currentSectionId = sec.data.id;
            // 当前组织下对应的人员信息
            this.currentSectionPerson = sec.personnels;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.initCrumbsList();
            }), 0);
            // console.log(this.currentSection);
            this.cd.detectChanges();
        }
        else {
            this.currentSectionPerson = [];
        }
    };
    /**
     * 获取人员接口定义
     * @param ougId
     * @param pageIndex
     * @param pageSize
     */
    /**
     * 获取人员接口定义
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getPersonnel = /**
     * 获取人员接口定义
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (ougId, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        // let data = {};
        if (this.orgUrl) {
            /** @type {?} */
            var url = "" + this.perfixStr + this.orgUrl + "?orgId=" + ougId + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            // if(ougId == 'langchao'){
            //     return this.http.get('assets/data/discussionPerson.json');
            // }
            // else if(ougId == 'guoji'){
            //     return this.http.get('assets/data/discussionPerson2.json');
            // }
            // else if(ougId == 'yanfa'){
            //     return this.http.get('assets/data/discussionPerson3.json');
            // }
            // else{
            //     return of(true);
            // }
        }
        else {
            return of(false);
        }
        // return data;
    };
    /**
     * 分层获取数据
     */
    /**
     * 分层获取数据
     * @private
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getOrgByLayerHttp = /**
     * 分层获取数据
     * @private
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (!section.data['isDetail'] && (!section.children || section.children.length == 0)) {
            //不是叶子节点，但是子为空
            if (this.urlGetOrgByLayer) {
                /** @type {?} */
                var url = "" + this.perfixStr + this.urlGetOrgByLayer + "?param={\"parentId\":\"" + section.data.id + "\"}";
                return this.http.get(url);
            }
        }
        // 处理过的数据
        return of(false);
    };
    /**
     * 获取人员
     * @param section
     */
    /**
     * 获取人员
     * @private
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getPersonByUrlHttp = /**
     * 获取人员
     * @private
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (JSON.stringify(section.personnels) === '{}' && !section.hasOwnProperty('noPersonnel')) {
            return this.getPersonnel(section.data.id, 0);
        }
        return of(false);
    };
    /**
     * @param {?} id
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSectionById = /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        /** @type {?} */
        var section = this.sectionDataTiled.find((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            return sec.data.id == id;
        }));
        return section;
    };
    /**
     * 点击面包屑
     * @param crumbs
     */
    /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsClick = /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    function (crumbs) {
        var _this = this;
        if (crumbs.id == this.currentSectionId)
            return;
        /** @type {?} */
        var sec = this.getSectionById(crumbs.id);
        this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : [];
        this.currentSectionData = sec.children.length ? sec.children : [];
        this.currentSectionId = sec.data.id;
        this.currentSectionPerson = sec.personnels;
        this.currentSection = sec;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.initCrumbsList();
        }), 0);
    };
    /**
     * 部门或人员状态变化
     * @param event
     * @param section
     */
    /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClick = /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    function (event, section, type) {
        var _this = this;
        if (this.currentSection.disabled)
            return;
        event.stopPropagation();
        section.checked = !section.checked;
        section['indeterminate'] = false;
        this.setSectionDataChecked();
        if (section.checked) {
            /** @type {?} */
            var selectedData = {
                parent: this.currentSection,
                data: section
            };
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    return;
                }
                else {
                    this.selectedUsers.push(selectedData);
                }
            }
            else if (type == 'section') {
                this.addSection(section);
            }
        }
        else {
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    this.selectedUsers.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    function (item, index) {
                        if (item['data'][_this.listIdField] === section[_this.listIdField]) {
                            _this.selectedUsers.splice(index, 1);
                        }
                    }));
                }
            }
            else if (type == 'section') {
                this.removeSection(section);
            }
        }
        // console.log(this.selectedUsers,this.selectedSections);
    };
    /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleSearchClick = /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    function (event, user) {
        var _this = this;
        event.stopPropagation();
        user.checked = !user.checked;
        if (user.checked) {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                return;
            }
            else {
                /** @type {?} */
                var selectedData = {
                    parent: null,
                    data: user
                };
                this.selectedUsers.push(selectedData);
            }
        }
        else {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                this.selectedUsers.forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                function (item, index) {
                    if (item['data'][_this.listIdField] === user[_this.listIdField]) {
                        _this.selectedUsers.splice(index, 1);
                    }
                }));
            }
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setSectionDataChecked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var curChecked = false;
        /** @type {?} */
        var sec = this.currentSection;
        /** @type {?} */
        var secArray = [];
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            secArray = secArray.concat(sec.children, sec.personnels['users']);
            /** @type {?} */
            var secCheckedList = secArray.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('checked') && item['checked']) {
                    return item;
                }
            }));
            /** @type {?} */
            var secIndeList = sec.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                if (item.hasOwnProperty('indeterminate') && item['indeterminate']) {
                    return item;
                }
            }));
            this.currentSection['indeterminate'] = (secIndeList && secIndeList.length) ? true : false;
            if (secCheckedList && secCheckedList.length) {
                if (secCheckedList.length == secArray.length && sec.personnels.pageIndex >= sec.personnels.pageCount - 1) {
                    curChecked = true;
                }
                else {
                    this.currentSection['indeterminate'] = true;
                }
            }
            else {
                curChecked = false;
            }
            this.currentSection['checked'] = curChecked;
            // console.log(this.currentSection);
        }
        if (this.currentSection.parents.length > 0 && this.currentSection['indeterminate']) {
            this.currentSection.parents.forEach((/**
             * @param {?} par
             * @return {?}
             */
            function (par) {
                /** @type {?} */
                var parSec = _this.getSectionById(par);
                if (parSec) {
                    parSec['indeterminate'] = _this.currentSection['indeterminate'];
                }
            }));
        }
    };
    /**
     * @param {?=} status
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.setChildDisabledStatus = /**
     * @param {?=} status
     * @return {?}
     */
    function (status) {
        if (status === void 0) { status = true; }
        /** @type {?} */
        var sec = this.currentSection;
        // sec['disabled'] = status;
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            sec.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['disabled'] = status;
            }));
            // sec['childDisabled'] = status;
            sec.personnels['users'].forEach((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                user['disabled'] = status;
            }));
        }
    };
    /**
     * 人员查看更多
     */
    /**
     * 人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreData = /**
     * 人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.currentSectionId) {
            /** @type {?} */
            var sec_1 = this.getSectionById(this.currentSectionId);
            if (sec_1) {
                this.getPersonnel(this.currentSectionId, sec_1.personnels.pageIndex + 1).subscribe((/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) {
                    if (d.hasOwnProperty("users")) {
                        sec_1.personnels.pageIndex = d['pageIndex'];
                        sec_1.personnels['users'] = tslib_1.__spread(sec_1.personnels['users'], d['users']);
                        if (sec_1.personnels['users'].length) {
                            if (sec_1['checked']) {
                                sec_1.personnels['users'].forEach((/**
                                 * @param {?} user
                                 * @return {?}
                                 */
                                function (user) {
                                    user['checked'] = sec_1['checked'];
                                }));
                            }
                        }
                        // this.setSectionDataChecked();
                    }
                    _this.cd.detectChanges();
                }));
            }
        }
    };
    /**
     * 全选
     * @param event
     */
    /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.handleClickAll = /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.currentSection.disabled)
            return;
        if (this.currentSection) {
            this.currentSection['checked'] = !this.currentSection['checked'];
            this.currentSection['indeterminate'] = false;
            /** @type {?} */
            var curChecked_1 = this.currentSection['checked'];
            this.currentSection.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item['checked'] = curChecked_1;
            }));
            if (JSON.stringify(this.currentSection.personnels) != '{}' && this.currentSection['personnels']['users'].length) {
                this.currentSection['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = curChecked_1;
                }));
            }
            if (curChecked_1) {
                this.addSection(this.currentSection);
            }
            else {
                this.removeSection(this.currentSection);
            }
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.addSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            return;
        }
        else {
            this.selectedSections.push(section);
        }
    };
    /**
     * @param {?} section
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.removeSection = /**
     * @param {?} section
     * @return {?}
     */
    function (section) {
        var _this = this;
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            this.selectedSections.forEach((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                if (item['data'][_this.listIdField] === section['data'][_this.listIdField]) {
                    _this.selectedSections.splice(index, 1);
                }
            }));
        }
    };
    /**
     * 搜索用户
     */
    /**
     * 搜索用户
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.searchUser = /**
     * 搜索用户
     * @return {?}
     */
    function () {
        if (this.searchText) {
            this.showSearchList = true;
            this.searchTextChangeSubject.next(this.searchText);
        }
        else {
            this.showSearchList = false;
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.clearSearch = /**
     * @return {?}
     */
    function () {
        this.showSearchList = false;
        this.searchText = '';
        this.errorText = '';
        // 取消挂起的请求
        if (this.recordGetUserSubscribe) {
            this.recordGetUserSubscribe.unsubscribe();
            this.recordGetUserSubscribe = null;
        }
        // 清除遮罩
        this.showOrHideLoading(false);
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.dialogOpend = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.showOrHideLoading(false);
        this.searchTextChangeSubject = new Subject();
        this.searchTextChangeSubject.pipe(debounceTime(200)).subscribe((/**
         * @param {?} tsearchText
         * @return {?}
         */
        function (tsearchText) {
            _this.errorText = '';
            _this.showOrHideLoading(true);
            // 记录
            _this.recordGetUserSubscribe = _this.getSearchData(tsearchText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                _this.showOrHideLoading(false);
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList = d;
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                // 处理失败
                if (error && error.statusText) {
                    _this.errorText = error.statusText;
                }
                else {
                    _this.errorText = '出现异常';
                }
                _this.showOrHideLoading(false);
            }));
        }));
    };
    /**
     * 搜索人员查看更多
     */
    /**
     * 搜索人员查看更多
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getMoreSearchData = /**
     * 搜索人员查看更多
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.searchText && this.personSearchUrl) {
            this.getSearchData(this.searchText, this.searchUserList.pageIndex + 1).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchUserList.pageIndex = d['pageIndex'];
                    _this.searchUserList['users'] = tslib_1.__spread(_this.searchUserList['users'], d['users']);
                }
            }));
        }
    };
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.getSearchData = /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (text, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        if (this.personSearchUrl) {
            /** @type {?} */
            var url = "" + this.perfixStr + this.personSearchUrl + "?param=" + text + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    };
    /**
     * 选中人员或组织删除
     * @param data
     * @param type
     */
    /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.selectionRemove = /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    function (data, type) {
        var _this = this;
        if (!data)
            return;
        if (type == 'user') {
            /** @type {?} */
            var index = this.selectedUsers.findIndex((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                return user.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedUsers.splice(index, 1);
            }
            data.data['checked'] = false;
        }
        else if (type == 'section') {
            /** @type {?} */
            var index = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedSections.splice(index, 1);
            }
            data['checked'] = false;
        }
        /** @type {?} */
        var dataParent = null;
        if (type == 'section') {
            dataParent = this.getSectionById(data.parent);
        }
        else if (type == 'user') {
            // bugNum:480649
            if (data['parent']) {
                dataParent = this.getSectionById(data.parent.data.id);
            }
        }
        if (dataParent && type == 'user') {
            // bugNum:480651
            // 如果删除的是用户并且还有父级别
            /** @type {?} */
            var delParentIndex = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                return item.data.id == dataParent.data.id;
            }));
            if (delParentIndex > -1) {
                return;
            }
        }
        if (dataParent) {
            dataParent['checked'] = false;
            if ((dataParent.children && dataParent.children.length) || (dataParent.personnels.users && dataParent.personnels.users.length)) {
                /** @type {?} */
                var childrens = dataParent.children.filter((/**
                 * @param {?} child
                 * @return {?}
                 */
                function (child) {
                    return child['checked'];
                }));
                /** @type {?} */
                var users = dataParent.personnels.users.filter((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    return user['checked'];
                }));
                if ((childrens && childrens.length) || (users && users.length)) {
                    dataParent['indeterminate'] = true;
                }
                else {
                    dataParent['indeterminate'] = false;
                }
                if (dataParent.parents.length > 0) {
                    dataParent.parents.forEach((/**
                     * @param {?} par
                     * @return {?}
                     */
                    function (par) {
                        /** @type {?} */
                        var parSec = _this.getSectionById(par);
                        if ((parSec.children && parSec.children.length) || (parSec.personnels.users && parSec.personnels.users.length)) {
                            /** @type {?} */
                            var parchildrens = parSec.children.filter((/**
                             * @param {?} child
                             * @return {?}
                             */
                            function (child) {
                                return child['checked'];
                            }));
                            /** @type {?} */
                            var parusers = parSec.personnels.users.filter((/**
                             * @param {?} user
                             * @return {?}
                             */
                            function (user) {
                                return user['checked'];
                            }));
                            if ((parchildrens && parchildrens.length) || (parusers && parusers.length)) {
                                parSec['indeterminate'] = true;
                            }
                            else {
                                if (dataParent['indeterminate']) {
                                    parSec['indeterminate'] = dataParent['indeterminate'];
                                }
                                else {
                                    parSec['indeterminate'] = false;
                                }
                            }
                        }
                    }));
                }
            }
        }
    };
    /**
     * 删除右侧全部数据
     */
    /**
     * 删除右侧全部数据
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.moveAllToLeft = /**
     * 删除右侧全部数据
     * @return {?}
     */
    function () {
        this.selectedUsers.forEach((/**
         * @param {?} user
         * @return {?}
         */
        function (user) {
            user.data['checked'] = false;
        }));
        this.selectedSections.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item['checked'] = false;
        }));
        this.sectionDataTiled.forEach((/**
         * @param {?} sec
         * @return {?}
         */
        function (sec) {
            sec['indeterminate'] = false;
            sec['checked'] = false;
            sec['disabled'] = false;
            if (JSON.stringify(sec.personnels) != '{}' && sec['personnels']['users'].length) {
                sec['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                function (user) {
                    user['checked'] = false;
                }));
            }
        }));
        this.selectedUsers = [];
        this.selectedSections = [];
        this.cd.markForCheck();
    };
    /**
     *
     * @param numberType 0：取消；1：确定
     */
    /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.returnResult = /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    function (numberType) {
        this.finalText = '';
        if (numberType) {
            // console.log(this.selectedUsers,this.selectedSections);
            this.selectionsChange.emit({
                info: 'confirm',
                data: {
                    users: this.selectedUsers,
                    section: this.selectedSections
                }
            });
            // this.selections.forEach(item => {
            //     this.finalText += item[this.listDisplayText] + '；';
            // })
        }
        else {
            this.selectionsChange.emit({
                info: 'cancel',
                data: {
                    users: [],
                    section: []
                }
            });
        }
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
        this.personnelDialog.close();
    };
    /**
     *  面包屑列表显示
     */
    /**
     *  面包屑列表显示
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.initCrumbsList = /**
     *  面包屑列表显示
     * @return {?}
     */
    function () {
        /** @type {?} */
        var crumbsListWidth = this.crumbsList.nativeElement.offsetWidth - 30;
        /** @type {?} */
        var crumbsListItems = this.crumbsList.nativeElement.children;
        /** @type {?} */
        var crumbsListItemWidth = 0;
        if (crumbsListItems && crumbsListItems.length) {
            for (var i = crumbsListItems.length - 1; i >= 0; i--) {
                this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                /** @type {?} */
                var width = crumbsListItems[i].offsetWidth;
                crumbsListItemWidth += width;
                if (crumbsListItemWidth >= crumbsListWidth) {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'none');
                }
                else {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                }
            }
        }
        ;
        if (crumbsListItemWidth >= crumbsListWidth) {
            this.crumbsEllipsis = true;
        }
        else {
            this.crumbsEllipsis = false;
        }
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.crumbsMore = /**
     * @return {?}
     */
    function () {
        if (this.sectionCrumbs && this.sectionCrumbs.length) {
            this.crumbsClick(this.sectionCrumbs[0]);
        }
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[field]; })) ? true : false;
    };
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype._isSelectedInArray = /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    function (value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item['data'][field]; })) ? true : false;
    };
    /**
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.closeDialog = /**
     * @return {?}
     */
    function () {
        this.moveAllToLeft();
        this.clearSearch();
        this.searchUser();
    };
    /**
     * 显示或隐藏正在加载
     * @param showOrHide ：true为显示，hide为隐藏
     */
    /**
     * 显示或隐藏正在加载
     * @private
     * @param {?} showOrHide ：true为显示，hide为隐藏
     * @return {?}
     */
    DiscussionPersonnelComponent.prototype.showOrHideLoading = /**
     * 显示或隐藏正在加载
     * @private
     * @param {?} showOrHide ：true为显示，hide为隐藏
     * @return {?}
     */
    function (showOrHide) {
        if (!this.discussionContent || !this.loadingSer) {
            return;
        }
        if (showOrHide) {
            // 打开
            if (!this.loadingInstance) {
                this.loadingInstance = this.loadingSer.show({ delay: 500, container: this.discussionContent, type: 1, message: '全力加载中...' });
            }
        }
        else if (this.loadingInstance) {
            // 关闭
            this.loadingSer.close(this.loadingInstance.id);
            this.loadingInstance = null;
        }
    };
    DiscussionPersonnelComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-personnel',
                    template: "<div class=\"farris-discussion-personnel-wrapper\">\r\n    <button class=\"btn btn-link\" (click)=\"personnelDialog.show()\">{{ 'discussionGroup.advancedQuery' | locale }}</button>\r\n</div>\r\n<ng-template #buttonRef>\r\n    <div class=\"farris-input-wrap mr-auto f-utils-overflow-hidden\" *ngIf=\"errorText\" [title]=\"errorText\">\r\n        <div class=\"farris-feedback f-state-invalid position-static text-ellipse\"\r\n            style=\" white-space: nowrap;text-overflow: ellipsis;overflow: hidden;\">\r\n            <span class=\"f-icon f-icon-message_warning f-feedback-icon mr-2\"></span>{{errorText}}\r\n        </div>\r\n    </div>\r\n    <button class=\"btn btn-secondary\" (click)=\"returnResult(0)\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n    <button class=\"btn btn-primary\" (click)=\"returnResult(1)\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n</ng-template>\r\n<farris-dialog #personnelDialog [buttons]=\"buttonRef\" [width]=\"690\" [height]=\"520\" [resizable]=\"false\" [title]=\"selectEmployee\" (opened)=\"dialogOpend()\" (closed)=\"closeDialog()\">\r\n    <div class=\"f-discussion-dialog-content\" #discussionContent>\r\n        <div class=\"f-discussion-dialog-content-left col-6 d-flex flex-column\">\r\n            <div class=\"f-discussion-personnel-search\">\r\n                <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"searchText\" (clear)=\"clearSearch()\" (valueChange)=\"searchUser()\" (enterHandle)=\"searchUser()\" (clickHandle)=\"searchUser()\"></input-group>\r\n            </div>\r\n            <div class=\"f-discussion-tab-content f-utils-fill d-flex flex-column\" >\r\n                <div class=\"f-discussion-personnel-content f-utils-fill d-flex flex-column\" [ngClass]=\"{'f-discussion-personnel-content-hide': showSearchList}\">\r\n                    <div class=\"f-discussion-personnel-crumbs d-flex\">\r\n                        <ul class=\"crumbs-list d-flex\" #crumbsList [ngClass]=\"{'crumbs-list-padding': crumbsEllipsis}\" *ngIf=\"sectionCrumbs && sectionCrumbs.length\">\r\n                            <li class=\"crumbs-list-item\" *ngFor=\"let crumbs of sectionCrumbs;let first = first;let last = last;\" (click)=\"crumbsClick(crumbs)\"  \r\n                            [ngClass]=\"{'crumbs-list-item-disabled': !(first || !last)}\">\r\n                                <!-- bugNum\uFF1A449399 -->\r\n                                <span class=\"crumbs-text\" [title]=\"crumbs.name\">{{crumbs.name}}</span>\r\n                                <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\" *ngIf=\"first || !last\"></span>\r\n                            </li>\r\n                        </ul>\r\n                        <div class=\"crumbs-list-ellipsis crumbs-list-item\" *ngIf=\"crumbsEllipsis\" (click)=\"crumbsMore()\">\r\n                            <span class=\"crumbs-text\">...</span>\r\n                            <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-discussion-section-content f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <ul class=\"f-discussion-section-list\">\r\n                                <!-- <li class=\"section-list-item\" *ngIf=\"currentSectionData.length || currentSectionPerson.users.length\" (click)=\"handleClickAll($event)\">\r\n                                    <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"currentSection.checked\" [disabled]=\"currentSection.disabled\" [indeterminate]=\"currentSection.indeterminate\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\">\r\n                                        \u5168\u9009\r\n                                    </div>\r\n                                </li> -->\r\n                                <li class=\"section-list-item\" *ngFor=\"let section of currentSectionData\">\r\n                                    <div class=\"custom-control custom-checkbox custom-control-inline section-list-item-checkbox\" (click)=\"handleClick($event,section,'section')\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"section.checked\" [indeterminate]=\"section.indeterminate\" [disabled]=\"currentSection.disabled\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\" [attr.data-orgid]=\"section.data.id\" [title]=\"section.data.name\" (click)=\"handleClick($event,section,'section')\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-next\" (click)=\"sectionNext(section)\">\r\n                                        {{ 'discussionGroup.next' | locale }}\r\n                                    </div>\r\n                                </li>\r\n                                <ng-container *ngIf=\"currentSectionPerson\">\r\n                                    <li class=\"section-list-item person-list-item\" *ngFor=\"let person of currentSectionPerson.users\" (click)=\"handleClick($event,person,'user')\">\r\n                                        <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                            <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"person.checked\" [disabled]=\"currentSection.disabled\">\r\n                                            <label class=\"custom-control-label\"></label>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-img\">\r\n                                            <img [src]=\"person.imgData\" alt=\"\" *ngIf=\"person.imgData\">\r\n                                            <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!person.imgData\" [innerHTML]=\"person | avatarHtml\"></div>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-content f-utils-fill\">\r\n                                            <div class=\"section-list-item-name\" [title]=\"person.name\">\r\n                                                {{person.name}}\r\n                                            </div>\r\n                                            <div class=\"section-list-item-tip\">\r\n                                                <!-- {{person.email}} -->\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">{{sectionCrumbs[sectionCrumbs.length - 2].name}}</span>\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">/</span>\r\n                                                <span>{{sectionCrumbs[sectionCrumbs.length - 1].name}}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- \u4EBA\u5458\u5217\u8868 -->\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\" *ngIf=\"currentSectionPerson['users'] && currentSectionPerson['users'].length\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"currentSectionPerson.pageIndex < currentSectionPerson.pageCount-1\" (click)=\"getMoreData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                        <!-- <span class=\"section-page-end section-page-text\"  *ngIf=\"currentSectionPerson.pageIndex >= currentSectionPerson.pageCount-1\">\u52A0\u8F7D\u5B8C\u6210</span> -->\r\n                                    </div>\r\n                                </ng-container>\r\n                            </ul>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!currentSectionData.length &&(currentSectionPerson.users && !currentSectionPerson.users.length)\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-personnel-search-list f-utils-fill\" [hidden]=\"!showSearchList\">\r\n                    <perfect-scrollbar>\r\n                        <ul class=\"f-discussion-section-list\" *ngIf=\"searchUserList && searchUserList.users && searchUserList.users.length\">\r\n                            <li class=\"section-list-item person-list-item\" *ngFor=\"let user of searchUserList.users\" (click)=\"handleSearchClick($event,user)\">\r\n                                <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"user.checked\">\r\n                                    <label class=\"custom-control-label\"></label>\r\n                                </div>\r\n                                <div class=\"person-list-item-img\">\r\n                                    <img [src]=\"user.imgData\" alt=\"\" *ngIf=\"user.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.imgData\" [innerHTML]=\"user | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"person-list-item-content f-utils-fill\">\r\n                                    <div class=\"section-list-item-name\" [title]=\"user.name\">\r\n                                        {{user.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-tip\">\r\n                                        <span [innerHTML]=\"user | getOrgText:sectionData\"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                            <div class=\"f-discussion-person-list-page\">\r\n                                <span class=\"section-page-more section-page-text\" *ngIf=\"searchUserList.pageIndex < searchUserList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                            </div>\r\n                        </ul>\r\n                        <div class=\"f-discussion-section-list-empty\" *ngIf=\"!searchUserList.users || !searchUserList.users.length\">\r\n                            <span class=\"f-icon f-icon-top_my\"></span>\r\n                            <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                        </div>\r\n                    </perfect-scrollbar>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-dialog-content-right f-utils-fill d-flex flex-column\">\r\n            <div class=\"f-discussion-selected-personnel f-utils-fill d-flex flex-column\">\r\n                <div class=\"f-discussion-selected-personnel-header\">\r\n                    <div class=\"f-discussion-selected-personnel-header-text\">\r\n                        <span>{{ 'discussionGroup.selected' | locale }}</span>(<span>{{ 'discussionGroup.people' | locale }}</span><span>{{selectedUsers.length}}</span><span>{{ 'discussionGroup.per' | locale }}</span>\uFF0C<span>{{ 'discussionGroup.section' | locale }}</span><span>{{selectedSections.length}}</span><span>{{ 'discussionGroup.pcs' | locale }}</span>)\r\n                    </div>\r\n                    <div class=\"f-discussion-selected-personnel-header-btn\" (click)=\"moveAllToLeft()\">\r\n                        <button class=\"btn btn-link\">{{ 'discussionGroup.emptySelected' | locale }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-selected-personnel-content f-utils-fill d-flex flex-column\">\r\n                    <div class=\"f-discussion-selected-list f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let user of selectedUsers\">\r\n                                <div class=\"f-discussion-personnel-item-avatar\">\r\n                                    <img [src]=\"user.data.imgData\" alt=\"\" *ngIf=\"user.data.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.data.imgData\" [innerHTML]=\"user.data | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{user.data.name}}\r\n                                    </div>\r\n                                    <div class=\"f-discussion-selected-item-tip\" *ngIf=\"user.parent\">\r\n                                        <span *ngIf=\"user.parent.parentsArr.length>=1\">{{user.parent.parentsArr[user.parent.parentsArr.length - 1].name}}</span>\r\n                                            <span *ngIf=\"user.parent.parentsArr.length>=1\">/</span>\r\n                                            <span>{{user.parent.data.name}}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(user,'user')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let section of selectedSections\">\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(section,'section')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!selectedUsers.length && !selectedSections.length\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyRight' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</farris-dialog>\r\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DiscussionPersonnelComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: NgZone },
        { type: HttpClient },
        { type: ChangeDetectorRef },
        { type: Injector }
    ]; };
    DiscussionPersonnelComponent.propDecorators = {
        listIdField: [{ type: Input }],
        listDisplayText: [{ type: Input }],
        sectionData: [{ type: Input }],
        orgUrl: [{ type: Input }],
        personSearchUrl: [{ type: Input }],
        urlGetOrgByLayer: [{ type: Input }],
        personnelDialog: [{ type: ViewChild, args: ['personnelDialog',] }],
        selectionsChange: [{ type: Output }],
        lineDataChange: [{ type: Output }],
        openDialog: [{ type: Output }],
        ougUsers: [{ type: Output }],
        crumbsList: [{ type: ViewChild, args: ['crumbsList',] }],
        discussionContent: [{ type: ViewChild, args: ['discussionContent',] }]
    };
    return DiscussionPersonnelComponent;
}());
export { DiscussionPersonnelComponent };
if (false) {
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listIdField;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listDisplayText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.urlGetOrgByLayer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personnelDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.openDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.ougUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.discussionContent;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingInstance;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedSections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.finalText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTree;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTiled;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSection;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionPerson;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionId;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionCrumbs;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsEllipsis;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchUserList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectEmployee;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.allOrg;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingSer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.recordGetUserSubscribe;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.searchTextChangeSubject;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.errorText;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.perfixStr;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1wZXJzb25uZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tcGVyc29ubmVsL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBZSxNQUFNLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUM3SyxPQUFPLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBZ0IsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzNELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUV4RDtJQW1FSSxzQ0FDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixNQUFjLEVBQ2QsSUFBZ0IsRUFDaEIsRUFBcUIsRUFDckIsUUFBa0I7UUFMbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQVU7O1FBakVyQixnQkFBVyxHQUFXLElBQUksQ0FBQzs7UUFFM0Isb0JBQWUsR0FBVyxV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Ozs7OztJQUN4QixxREFBcUM7Ozs7O0lBQ3JDLGtEQUFtQzs7SUFDbkMsaURBQXlEOzs7OztJQUV6RCw4REFBaUQ7Ozs7O0lBRWpELCtEQUFnRDs7SUFDaEQsaURBQWE7Ozs7O0lBQ2IsaURBQXFCOzs7OztJQUVqQixnREFBMkI7Ozs7O0lBQzNCLGtEQUE4Qjs7Ozs7SUFDOUIsOENBQXNCOzs7OztJQUN0Qiw0Q0FBd0I7Ozs7O0lBQ3hCLDBDQUE2Qjs7Ozs7SUFDN0IsZ0RBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiwgTmdab25lLCBIb3N0QmluZGluZywgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3RvciwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgb2YsIGZvcmtKb2luLCBTdWJzY3JpcHRpb24sIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgTG9hZGluZ1NlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFdFQkFQSV9QUkVGSVhfVE9LRU4gfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLWRpc2N1c3Npb24tcGVyc29ubmVsJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnLi9kaXNjdXNzaW9uLXBlcnNvbm5lbC5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlzY3Vzc2lvblBlcnNvbm5lbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gICAgLy8g5pON5L2c5YiX6KGo5oiW6ICF5YiG57uE5omA6ZyA6KaB55qE5Li76ZSu5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0SWRGaWVsZDogc3RyaW5nID0gXCJpZFwiO1xyXG4gICAgLy8g5YiX6KGo5Lit5pi+56S655qE5a2X5q61XHJcbiAgICBASW5wdXQoKSBsaXN0RGlzcGxheVRleHQ6IHN0cmluZyA9IFwidXNlck5hbWVcIjtcclxuICAgIEBJbnB1dCgpIHNlY3Rpb25EYXRhOiBhbnlbXTtcclxuICAgIC8vIOiOt+WPluS6uuWRmOmTvuaOpVxyXG4gICAgQElucHV0KCkgb3JnVXJsOiBzdHJpbmc7XHJcbiAgICAvLyDkurrlkZjmn6Xor6Lpk77mjqVcclxuICAgIEBJbnB1dCgpIHBlcnNvblNlYXJjaFVybDogc3RyaW5nO1xyXG4gICAgLy8g5YiG5bGC6I635Y+W57uE57uH55qE6ZO+5o6lXHJcbiAgICAvLyDkvb/nlKjmlrnlvI8gL2FwaS9ydW50aW1lL3N5cy92MS4wL3N5c09yZ3M/cGFyYW09e1wicGFyZW50SWRcIjpcImFmYTVlZTliLWY5YmEtMjkyNy1mOWNlLTJhMzAzNjkyNjdlOVwifVxyXG4gICAgQElucHV0KCkgdXJsR2V0T3JnQnlMYXllcjogc3RyaW5nID0gXCIvYXBpL3J1bnRpbWUvc3lzL3YxLjAvc3lzT3Jnc1wiO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3BlcnNvbm5lbERpYWxvZycpIHBlcnNvbm5lbERpYWxvZztcclxuICAgIC8vIOaWsOW7uui/mOaYr+e7tOaKpOiHquWumuS5ieinkuiJslxyXG4gICAgLy8gQE91dHB1dCgpIGN1c3RvbUdyb3VwQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDlr7nlpJbmmrTpnLLmlbDmja5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDpgInkuK3nmoTooYxcclxuICAgIEBPdXRwdXQoKSBsaW5lRGF0YUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIG9wZW5EaWFsb2cgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBvdWdVc2VycyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NydW1ic0xpc3QnKSBjcnVtYnNMaXN0OiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnZGlzY3Vzc2lvbkNvbnRlbnQnKSBkaXNjdXNzaW9uQ29udGVudDogRWxlbWVudFJlZjtcclxuICAgIHByaXZhdGUgbG9hZGluZ0luc3RhbmNlID0gbnVsbDtcclxuICAgIC8vIOWPs+S+p+mhuVxyXG4gICAgc2VsZWN0aW9uczogYW55W10gPSBbXTtcclxuICAgIHNlbGVjdGVkU2VjdGlvbnM6IGFueVtdID0gW107XHJcbiAgICBzZWxlY3RlZFVzZXJzOiBhbnlbXSA9IFtdO1xyXG4gICAgLy8g5pCc57Si5paH5pysXHJcbiAgICBzZWFyY2hUZXh0OiBzdHJpbmdcclxuICAgIC8vIOacgOmHjeimgeaYvuekuueahOS6uuWRmOS/oeaBr1xyXG4gICAgZmluYWxUZXh0OiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICBzZWN0aW9uRGF0YVRyZWU6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIHNlY3Rpb25EYXRhVGlsZWQ6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIGN1cnJlbnRTZWN0aW9uRGF0YTogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgY3VycmVudFNlY3Rpb246IGFueSA9IHt9O1xyXG4gICAgY3VycmVudFNlY3Rpb25QZXJzb246IGFueSA9IHt9O1xyXG4gICAgY3VycmVudFNlY3Rpb25JZDogc3RyaW5nID0gJyc7XHJcbiAgICBzZWN0aW9uQ3J1bWJzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICBwYWdlU2l6ZTogbnVtYmVyID0gMjA7XHJcblxyXG4gICAgc2hvd1NlYXJjaExpc3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGNydW1ic0VsbGlwc2lzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBzZWFyY2hVc2VyTGlzdDogYW55ID0ge307XHJcblxyXG4gICAgc2VsZWN0RW1wbG95ZWU6IHN0cmluZyA9IFwi6YCJ5oup5ZGY5belXCI7XHJcbiAgICBwbGFjZWhvbGRlcjogc3RyaW5nID0gXCLor7fovpPlhaXlkZjlt6Xlp5PlkI3mkJzntKJcIjtcclxuICAgIGFsbE9yZzogc3RyaW5nID0gXCLlhajpg6jnu4Tnu4dcIjtcclxuICAgIHByaXZhdGUgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcjogTG9hZGluZ1NlcnZpY2U7XHJcbiAgICBncm91cEljb24gPSAnPHNwYW4gY2xhc3M9XCJmLWljb24gZi1pY29uLXNlYXJjaFwiPjwvc3Bhbj4nO1xyXG4gICAgLy8g5qCH6K6w6K+35rGCXHJcbiAgICBwcml2YXRlIHJlY29yZEdldFVzZXJTdWJzY3JpYmU6U3Vic2NyaXB0aW9uPW51bGw7XHJcbiAgICAvLyDmn6Xor6Llj5jljJZcclxuICAgIHByaXZhdGUgc2VhcmNoVGV4dENoYW5nZVN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgZXJyb3JUZXh0PScnO1xyXG4gICAgcHJpdmF0ZSBwZXJmaXhTdHI9Jyc7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXIgPSB0aGlzLmluamVjdG9yLmdldChMb2FkaW5nU2VydmljZSk7XHJcbiAgICAgICAgaWYoV0VCQVBJX1BSRUZJWF9UT0tFTil7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZml4U3RyPSB0aGlzLmluamVjdG9yLmdldChXRUJBUElfUFJFRklYX1RPS0VOLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCkge1xyXG4gICAgICAgIC8vIGxldCBzZWN0aW9uRGF0YVRyZWVzID0gdGhpcy5pbml0c2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YSwnJyk7XHJcbiAgICAgICAgdGhpcy5hbGxPcmcgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5hbGxPcmcnKTtcclxuICAgICAgICBsZXQgc2VjdGlvbkRhdGFUcmVlcyA9IHRoaXMuaW5pdFNlY3Rpb25EYXRhKHRoaXMuc2VjdGlvbkRhdGEsICcnKTtcclxuICAgICAgICAvLyB0aGlzLnNlY3Rpb25Tb3J0KHNlY3Rpb25EYXRhVHJlZXMpO1xyXG4gICAgICAgIC8vIGlmKHNlY3Rpb25EYXRhVHJlZXMubGVuZ3RoPjEpe1xyXG4gICAgICAgIGxldCBzZWN0aW9uUGFyZW50ID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdkaXNjdXNzaW9uUGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAncGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFsbE9yZyxcclxuICAgICAgICAgICAgICAgICAgICBsYXllcjogMCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBzb3J0T3JkZXI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogXCJcIixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgICAgICBwZXJzb25uZWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50c0FycjogW10sXHJcbiAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBzZWN0aW9uUGFyZW50WzBdLmNoaWxkcmVuID0gc2VjdGlvbkRhdGFUcmVlcztcclxuICAgICAgICBzZWN0aW9uUGFyZW50WzBdLmNoaWxkcmVuLnNvcnQoKGEsIGIpOiBudW1iZXIgPT4gYS5kYXRhWydzb3J0T3JkZXInXSAtIGIuZGF0YVsnc29ydE9yZGVyJ10pO1xyXG4gICAgICAgIHRoaXMuaW5pdFNlY3Rpb25UcmVlKHNlY3Rpb25QYXJlbnRbMF0uY2hpbGRyZW4pO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlID0gc2VjdGlvblBhcmVudDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZWN0aW9uRGF0YVRyZWUgPSBzZWN0aW9uRGF0YVRyZWVzO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2VjdGlvbkRhdGFUcmVlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkRhdGFUcmVlICYmIHRoaXMuc2VjdGlvbkRhdGFUcmVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmnInnu4Tnu4fmoJHnmoTmlbDmja7vvIzmiZPlubPmiJDmlbDnu4TmlbDmja5cclxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRpbGVkID0gdGhpcy50aWxlU2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YVRyZWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlvZPliY3nlYzpnaLkuIrnmoTnu4Tnu4foioLngrnlrozmlbTmoJHmlbDmja5cclxuICAgICAgICAgKiB7XHJcbiAgICAgICAgICogICAgY2hlY2tlZDpmYWxzZSznu4Tnu4fmmK/lkKbpgInkuK1cclxuICAgICAgICAgKiAgICBjaGlsZHJlbjpbXSznu4Tnu4fnmoTlrZDpg6jpl6hcclxuICAgICAgICAgKiAgICBkYXRhOnsg5p2l6Ieq5LqO5LuO5pyN5Yqh5Zmo56uv6L+U5Zue55qE5pWw5o2u57uT5p6EXHJcbiAgICAgICAgICogICAgICBpZDrnu4Tnu4dpZCxcclxuICAgICAgICAgKiAgICAgIGNvZGU657uE57uHY29kZSxcclxuICAgICAgICAgKiAgICAgIG5hbWU657uE57uH5ZCN56ewXHJcbiAgICAgICAgICogICAgICBsYXllcjrnu4Tnu4flsYLnuqdcclxuICAgICAgICAgKiAgICAgIHBhcmVudElkOueItuiKgueCuVxyXG4gICAgICAgICAqICAgICAgLi4uLlxyXG4gICAgICAgICAqICAgICAgfSxcclxuICAgICAgICAgKiAgICBwYXJlbnRzOltdLOeItuiKgueCuUlkXHJcbiAgICAgICAgICogICAgcGFyZW50c0Fycjpbe2lkOifnu4Tnu4foioLngrlJZCcsbmFtZTon57uE57uH6IqC54K55ZCN56ewJ31dLFxyXG4gICAgICAgICAqICAgIHBlcnNvbm5lbHM6e1xyXG4gICAgICAgICAqICAgICAgICAgIGNvdW50OjAsXHJcbiAgICAgICAgICogICAgICAgICAgcGFnZUNvdW50OixcclxuICAgICAgICAgKiAgICAgICAgICB1c2VyczpbXSDnlKjmiLfkv6Hmga9cclxuICAgICAgICAgKiAgICAgIH1cclxuICAgICAgICAgKiB9XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbiA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdO1xyXG4gICAgICAgIC8vIOmdouWMheWxkeaVsOaNrlt7aWQ6J+e7hOe7h+iKgueCuUlkJyxuYW1lOifnu4Tnu4foioLngrnlkI3np7AnfV1cclxuICAgICAgICB0aGlzLnNlY3Rpb25DcnVtYnMgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlblswXVsncGFyZW50c0FyciddIDogW107XHJcbiAgICAgICAgLy8g5b2T5YmN55WM6Z2i5LiK55qE57uE57uH5YiX6KGo5pWw5o2uXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbkRhdGEgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5jaGlsZHJlbiA6IFtdO1xyXG4gICAgICAgIC8vIOW9k+WJjeeVjOmdouS4iueahOe7hOe7h+matuWxnueahOe7hOe7h+eahOaVsOaNrklkXHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbklkID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0uZGF0YS5pZDtcclxuICAgICAgICAvLyDnu5HlrprlvZPkurrlkZjojrflj5blm57mlbDmja7ml7bvvIzmiafooYznmoTmk43kvZxcclxuICAgICAgICB0aGlzLmdldFBlcnNvbm5lbCh0aGlzLmN1cnJlbnRTZWN0aW9uSWQsIDApLnN1YnNjcmliZSgoZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHMgPSBkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VyJyx0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdEVtcGxveWVlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuc2VsZWN0RW1wbG95ZWUnKTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAucGxhY2Vob2xkZXInKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25EYXRhVGlsZWQpO1xyXG4gICAgICAgIC8vIOeql+WPo+aJk+W8gOaXtuWGjeiwg+eUqOS5n+WPr+S7pSB0aGlzLmRpYWxvZ09wZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFNlY3Rpb25UcmVlKGRhdGEsIHBhcmVudElkID0gXCJkaXNjdXNzaW9uUGFyZW50XCIsIHBhcmVudE5hbWUgPSB0aGlzLmFsbE9yZykge1xyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcmVudElkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcmVudE5hbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpdGVtLnBhcmVudHNBcnIudW5zaGlmdChwYXIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5wYXJlbnRzLnVuc2hpZnQocGFyZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0U2VjdGlvblRyZWUoaXRlbS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluWIhue7hOaVsOaNrlxyXG4gICAgICog5Lyg6YCS6L+H5p2l55qE5pWw5o2u5piv5YiX6KGo77yM6ZyA6KaB6L2s5o2i5oiQ5qCR55qE5bGC57qn57uT5p6EXHJcbiAgICAgKi9cclxuICAgIGluaXRTZWN0aW9uRGF0YShkYXRhLCBwYXJlbnRJZCwgcGFyZW50SWRGaWVsZCA9ICdwYXJlbnRJZCcsIGlkRmllbGQgPSAnaWQnLCBwcmVzZXRQYXJlbnQgPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgICAgICAgY29uc3QgdW5hdHRhY2hlZCA9IFtdO1xyXG4gICAgICAgIGlmIChwcmVzZXRQYXJlbnQpIHtcclxuICAgICAgICAgICAgbm9kZXMuc2V0KHByZXNldFBhcmVudC5kYXRhLmlkLCBwcmVzZXRQYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcnNvbm5lbHM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzQXJyOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gaXRlbVtpZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgIG5vZGVzLnNldChpZCwgbm9kZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBQSUQgPSBpdGVtW3BhcmVudElkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgLy8g5Yid5aeLXHJcbiAgICAgICAgICAgICAgICBpZiAoUElEID09PSBwYXJlbnRJZCB8fCBQSUQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZXMuZ2V0KFBJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogUElELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFyZW50LmRhdGEubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWydwYXJlbnQnXSA9IFBJRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVsncGFyZW50cyddID0gWy4uLnBhcmVudC5wYXJlbnRzLCBQSURdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWydwYXJlbnRzQXJyJ10gPSBbLi4ucGFyZW50LnBhcmVudHNBcnIsIHBhcl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4uc29ydCgoYSwgYik6IG51bWJlciA9PiBhLmRhdGFbJ3NvcnRPcmRlciddIC0gYi5kYXRhWydzb3J0T3JkZXInXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5hdHRhY2hlZC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh1bmF0dGFjaGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdW5hdHRhY2hlZC5mb3JFYWNoKHVuSXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGlkID0gdW5JdGVtLmRhdGFbcGFyZW50SWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gbm9kZXMuZ2V0KHBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmnoTpgKDmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5JdGVtWydwYXJlbnQnXSA9IHBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5JdGVtWydwYXJlbnRzJ10gPSBbLi4ucGFyZW50LnBhcmVudHMsIHBpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuSXRlbVsncGFyZW50c0FyciddID0gWy4uLnBhcmVudC5wYXJlbnRzQXJyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFyZW50LmRhdGEubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKHVuSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5zb3J0KChhLCBiKTogbnVtYmVyID0+IGEuZGF0YVsnc29ydE9yZGVyJ10gLSBiLmRhdGFbJ3NvcnRPcmRlciddKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmiYDmnIlub2Rlc+eahOWtkOiKgueCuei9rOWMluaIkOaVsOe7hO+8jOW5tui/lOWbnuaVsOe7hFxyXG4gICAgICogQHBhcmFtIG5vZGVzIFxyXG4gICAgICovXHJcbiAgICB0aWxlU2VjdGlvbkRhdGEobm9kZXMpIHtcclxuICAgICAgICBsZXQgciA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsTm9kZXMobm9kZXMsIHIpO1xyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmiYDmnIlub2Rlc+eahOWtkOiKgueCuei9rOWMluaIkOaVsOe7hO+8jOW5tui3n+aWsOaVsOe7hHJcclxuICAgICAqIEBwYXJhbSBub2RlcyBcclxuICAgICAqIEBwYXJhbSByIFxyXG4gICAgICovXHJcbiAgICBnZXRBbGxOb2Rlcyhub2Rlcywgcikge1xyXG4gICAgICAgIG5vZGVzLmZvckVhY2gobiA9PiB7XHJcbiAgICAgICAgICAgIHIucHVzaChuKTtcclxuICAgICAgICAgICAgaWYgKG4uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEFsbE5vZGVzKG4uY2hpbGRyZW4sIHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LiL57qnXHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgc2VjdGlvbk5leHQoc2VjdGlvbikge1xyXG4gICAgICAgIC8vIOaehOmAoOe7hOe7h+iKgueCueS4i+mdoueahOS6uuWRmOS/oeaBr++8jOWmguaenOayoeacieS6uuWRmOS/oeaBr++8jOWwseaehOmAoOe7k+aehO+8jOeEtuWQjuWPkeivt+axguiOt+WPluS6uuWRmOS/oeaBr1xyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgZm9ya0pvaW4oW3RoaXMuZ2V0T3JnQnlMYXllckh0dHAoc2VjdGlvbiksIHRoaXMuZ2V0UGVyc29uQnlVcmxIdHRwKHNlY3Rpb24pXSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZShvcmdBbmRQZXJzb25EYXRhcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dPckhpZGVMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8vIOiOt+WPlue7hOe7h+aVsOaNrlxyXG4gICAgICAgICAgICAgICAgbGV0IGdldE9yZ0RhdGEgPSBvcmdBbmRQZXJzb25EYXRhc1swXTtcclxuICAgICAgICAgICAgICAgIGlmIChnZXRPcmdEYXRhICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS7juacjeWKoeWZqOerr+ecn+Wunui/lOWbnuaVsOaNriznm7TmjqXlnKjmlrnms5XlhoXmm7TmlrBzZWN0aW9u55qE57uT5p6EXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0U2VjdGlvbkRhdGEoZ2V0T3JnRGF0YSwgJycsICdwYXJlbnRJZCcsICdpZCcsIHNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOi+k+WFpeaJgOaciee7hOe7h+agkeeahOaVsOaNru+8jOeci3NlY3Rpb27lj5jmm7TmmK/lkKbmm7TmlrBcclxuICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25EYXRhVGlsZWQgPSB0aGlzLnRpbGVTZWN0aW9uRGF0YSh0aGlzLnNlY3Rpb25EYXRhVHJlZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W5Lq65ZGY5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBsZXQgZ2V0UGVyc29uRGF0YSA9IG9yZ0FuZFBlcnNvbkRhdGFzWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldFBlcnNvbkRhdGEgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5p6E6YCg5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyczogW11cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRQZXJzb25EYXRhLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLmNvdW50ID0gZ2V0UGVyc29uRGF0YVsnY291bnQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnBhZ2VDb3VudCA9IGdldFBlcnNvbkRhdGFbJ3BhZ2VDb3VudCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMucGFnZUluZGV4ID0gZ2V0UGVyc29uRGF0YVsncGFnZUluZGV4J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy5wYWdlU2l6ZSA9IGdldFBlcnNvbkRhdGFbJ3BhZ2VTaXplJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy50b3RhbENvdW50ID0gZ2V0UGVyc29uRGF0YVsndG90YWxDb3VudCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10gPSBbLi4uc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddLCAuLi5nZXRQZXJzb25EYXRhWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25bJ25vUGVyc29ubmVsJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TmV4dERhdGEoc2VjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiL57qn5pWw5o2uXHJcbiAgICAgKiDngrnlh7vnmoTnu4Tnu4flr7nlupTnmoTmmK/vvJrlvZPliY3nu4Tnu4foioLngrlcclxuICAgICAqIEBwYXJhbSBzZWN0aW9uIFxyXG4gICAgICovXHJcbiAgICBnZXROZXh0RGF0YShzZWN0aW9uKSB7XHJcblxyXG4gICAgICAgIGlmICgoc2VjdGlvbi5jaGlsZHJlbiAmJiBzZWN0aW9uLmNoaWxkcmVuLmxlbmd0aCkgfHwgKEpTT04uc3RyaW5naWZ5KHNlY3Rpb24ucGVyc29ubmVscykgIT09ICd7fScpKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee7hOe7h+iKgueCueacieS4i+e6p+aVsOaNrlxyXG4gICAgICAgICAgICBjb25zdCBzZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHNlY3Rpb24uZGF0YS5pZCk7XHJcbiAgICAgICAgICAgIGlmIChzZWMpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWIpOaWreW9k+WJjee7hOe7h+iKgueCue+8jOaYr+WQpuWLvumAieWFqOmAiVxyXG4gICAgICAgICAgICAgICAgbGV0IHNlY0NoZWNrZWQgPSBzZWNbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgIHNlY1snZGlzYWJsZWQnXSA9IHNlY0NoZWNrZWQgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlY1snaW5kZXRlcm1pbmF0ZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5b2T5YmN57uE57uH55qE5LiL5LiA57qn57uE57uH6YO95Yu+6YCJXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYy5jaGlsZHJlbiAmJiBzZWMuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gc2VjQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlbVsnZGlzYWJsZWQnXSA9IHNlY1snZGlzYWJsZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnInkurrlkZjvvIzlvZPliY3kurrlkZjpg73li77pgIlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddICYmIHNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBzZWNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VyWydkaXNhYmxlZCddID0gc2VjWydkaXNhYmxlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHNlY1BhcmVudCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzZWMuZGF0YS5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNlYy5kYXRhLm5hbWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8g5b2T5YmN57uE57uH55qE54i26IqC54K55LiO5b2T5YmN57uE57uH6IqC54K55pWw5o2u5ZCI5bm2XHJcbiAgICAgICAgICAgIGxldCBzZWNDcnVtYnMgPSBbLi4uc2VjWydwYXJlbnRzQXJyJ10sIHNlY1BhcmVudF07XHJcbiAgICAgICAgICAgIC8vIOWmguaenOW9k+WJjee7hOe7h+acieWtkOiKgueCue+8jOiOt+WPluWtkOiKgueCueeahOeItuaVsOe7hO+8jOWQpuWIme+8jOaMieeFp+S4iumdouaVsOaNruWQiOW5tuiOt+WPllxyXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25DcnVtYnMgPSBzZWMuY2hpbGRyZW4ubGVuZ3RoID8gc2VjLmNoaWxkcmVuWzBdWydwYXJlbnRzQXJyJ10gOiBzZWNDcnVtYnM7XHJcbiAgICAgICAgICAgIC8vIOaWsOeahOe7hOe7h+iKgueCueaYr+W9k+WJjee7hOe7h+eahOWtkOiKgueCuVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uRGF0YSA9IHNlYy5jaGlsZHJlbi5sZW5ndGggPyBzZWMuY2hpbGRyZW4gOiBbXTtcclxuICAgICAgICAgICAgLy8g6K6w5b2V5b2T5YmN57uE57uH6IqC54K5XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24gPSBzZWM7XHJcbiAgICAgICAgICAgIC8vIOiusOW9leW9k+WJjee7hOe7h+iKgueCueeahOaVsOaNrlxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uSWQgPSBzZWMuZGF0YS5pZDtcclxuICAgICAgICAgICAgLy8g5b2T5YmN57uE57uH5LiL5a+55bqU55qE5Lq65ZGY5L+h5oGvXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24gPSBzZWMucGVyc29ubmVscztcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRDcnVtYnNMaXN0KCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkurrlkZjmjqXlj6PlrprkuYlcclxuICAgICAqIEBwYXJhbSBvdWdJZCBcclxuICAgICAqIEBwYXJhbSBwYWdlSW5kZXggXHJcbiAgICAgKiBAcGFyYW0gcGFnZVNpemUgXHJcbiAgICAgKi9cclxuICAgIGdldFBlcnNvbm5lbChvdWdJZDogc3RyaW5nLCBwYWdlSW5kZXg6IG51bWJlciwgcGFnZVNpemU6IG51bWJlciA9IHRoaXMucGFnZVNpemUpIHtcclxuICAgICAgICAvLyBsZXQgZGF0YSA9IHt9O1xyXG4gICAgICAgIGlmICh0aGlzLm9yZ1VybCkge1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnBlcmZpeFN0cn0ke3RoaXMub3JnVXJsfT9vcmdJZD0ke291Z0lkfSZwYWdlU2l6ZT0ke3BhZ2VTaXplfSZwYWdlSW5kZXg9JHtwYWdlSW5kZXh9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICAgICAgLy8gaWYob3VnSWQgPT0gJ2xhbmdjaGFvJyl7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvZGlzY3Vzc2lvblBlcnNvbi5qc29uJyk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gZWxzZSBpZihvdWdJZCA9PSAnZ3VvamknKXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uMi5qc29uJyk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gZWxzZSBpZihvdWdJZCA9PSAneWFuZmEnKXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uMy5qc29uJyk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliIblsYLojrflj5bmlbDmja5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRPcmdCeUxheWVySHR0cChzZWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKCFzZWN0aW9uLmRhdGFbJ2lzRGV0YWlsJ10gJiYgKCFzZWN0aW9uLmNoaWxkcmVuIHx8IHNlY3Rpb24uY2hpbGRyZW4ubGVuZ3RoID09IDApKSB7XHJcbiAgICAgICAgICAgIC8v5LiN5piv5Y+25a2Q6IqC54K577yM5L2G5piv5a2Q5Li656m6XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnVybEdldE9yZ0J5TGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCB1cmwgPSBgJHt0aGlzLnBlcmZpeFN0cn0ke3RoaXMudXJsR2V0T3JnQnlMYXllcn0/cGFyYW09e1wicGFyZW50SWRcIjpcIiR7c2VjdGlvbi5kYXRhLmlkfVwifWA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWkhOeQhui/h+eahOaVsOaNrlxyXG4gICAgICAgIHJldHVybiBvZihmYWxzZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS6uuWRmFxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0UGVyc29uQnlVcmxIdHRwKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoc2VjdGlvbi5wZXJzb25uZWxzKSA9PT0gJ3t9JyAmJiAhc2VjdGlvbi5oYXNPd25Qcm9wZXJ0eSgnbm9QZXJzb25uZWwnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQZXJzb25uZWwoc2VjdGlvbi5kYXRhLmlkLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWN0aW9uQnlJZChpZCkge1xyXG4gICAgICAgIGxldCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uRGF0YVRpbGVkLmZpbmQoc2VjID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlYy5kYXRhLmlkID09IGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBzZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vpnaLljIXlsZFcclxuICAgICAqIEBwYXJhbSBjcnVtYnMgXHJcbiAgICAgKi9cclxuICAgIGNydW1ic0NsaWNrKGNydW1icykge1xyXG4gICAgICAgIGlmIChjcnVtYnMuaWQgPT0gdGhpcy5jdXJyZW50U2VjdGlvbklkKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2VjID0gdGhpcy5nZXRTZWN0aW9uQnlJZChjcnVtYnMuaWQpO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNydW1icyA9IHNlYy5jaGlsZHJlbi5sZW5ndGggPyBzZWMuY2hpbGRyZW5bMF1bJ3BhcmVudHNBcnInXSA6IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25EYXRhID0gc2VjLmNoaWxkcmVuLmxlbmd0aCA/IHNlYy5jaGlsZHJlbiA6IFtdO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JZCA9IHNlYy5kYXRhLmlkO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24gPSBzZWMucGVyc29ubmVscztcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gc2VjO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRDcnVtYnNMaXN0KCk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmDqOmXqOaIluS6uuWRmOeKtuaAgeWPmOWMllxyXG4gICAgICogQHBhcmFtIGV2ZW50IFxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUNsaWNrKGV2ZW50LCBzZWN0aW9uLCB0eXBlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlY3Rpb24uZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBzZWN0aW9uLmNoZWNrZWQgPSAhc2VjdGlvbi5jaGVja2VkO1xyXG4gICAgICAgIHNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbkRhdGFDaGVja2VkKCk7XHJcbiAgICAgICAgaWYgKHNlY3Rpb24uY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLmN1cnJlbnRTZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogc2VjdGlvblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnB1c2goc2VsZWN0ZWREYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTZWN0aW9uKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAndXNlcicpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHNlY3Rpb25bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAnc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VjdGlvbihzZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkVXNlcnMsdGhpcy5zZWxlY3RlZFNlY3Rpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVTZWFyY2hDbGljayhldmVudCwgdXNlcikge1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHVzZXIuY2hlY2tlZCA9ICF1c2VyLmNoZWNrZWQ7XHJcbiAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNTZWxlY3RlZEluQXJyYXkodXNlclt0aGlzLmxpc3RJZEZpZWxkXSwgdGhpcy5saXN0SWRGaWVsZCwgdGhpcy5zZWxlY3RlZFVzZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdXNlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5wdXNoKHNlbGVjdGVkRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheSh1c2VyW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdID09PSB1c2VyW3RoaXMubGlzdElkRmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFNlY3Rpb25EYXRhQ2hlY2tlZCgpIHtcclxuICAgICAgICBsZXQgY3VyQ2hlY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBzZWMgPSB0aGlzLmN1cnJlbnRTZWN0aW9uO1xyXG4gICAgICAgIGxldCBzZWNBcnJheTogYW55ID0gW107XHJcbiAgICAgICAgaWYgKHNlYy5jaGlsZHJlbiB8fCAoc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gJiYgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBzZWNBcnJheSA9IHNlY0FycmF5LmNvbmNhdChzZWMuY2hpbGRyZW4sIHNlYy5wZXJzb25uZWxzWyd1c2VycyddKTtcclxuICAgICAgICAgICAgbGV0IHNlY0NoZWNrZWRMaXN0ID0gc2VjQXJyYXkuZmlsdGVyKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ2NoZWNrZWQnKSAmJiBpdGVtWydjaGVja2VkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCBzZWNJbmRlTGlzdCA9IHNlYy5jaGlsZHJlbi5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgnaW5kZXRlcm1pbmF0ZScpICYmIGl0ZW1bJ2luZGV0ZXJtaW5hdGUnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uWydpbmRldGVybWluYXRlJ10gPSAoc2VjSW5kZUxpc3QgJiYgc2VjSW5kZUxpc3QubGVuZ3RoKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHNlY0NoZWNrZWRMaXN0ICYmIHNlY0NoZWNrZWRMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY0NoZWNrZWRMaXN0Lmxlbmd0aCA9PSBzZWNBcnJheS5sZW5ndGggJiYgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ID49IHNlYy5wZXJzb25uZWxzLnBhZ2VDb3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJDaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50U2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbi5wYXJlbnRzLmxlbmd0aCA+IDAgJiYgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24ucGFyZW50cy5mb3JFYWNoKHBhciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJTZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHBhcik7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyU2VjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSB0aGlzLmN1cnJlbnRTZWN0aW9uWydpbmRldGVybWluYXRlJ107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDaGlsZERpc2FibGVkU3RhdHVzKHN0YXR1czogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBsZXQgc2VjID0gdGhpcy5jdXJyZW50U2VjdGlvbjtcclxuICAgICAgICAvLyBzZWNbJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgaWYgKHNlYy5jaGlsZHJlbiB8fCAoc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gJiYgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBzZWMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1bJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBzZWNbJ2NoaWxkRGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJbJ2Rpc2FibGVkJ10gPSBzdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS6uuWRmOafpeeci+abtOWkmlxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlRGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbklkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQodGhpcy5jdXJyZW50U2VjdGlvbklkKTtcclxuICAgICAgICAgICAgaWYgKHNlYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQZXJzb25uZWwodGhpcy5jdXJyZW50U2VjdGlvbklkLCBzZWMucGVyc29ubmVscy5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoKGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHMucGFnZUluZGV4ID0gZFsncGFnZUluZGV4J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYy5wZXJzb25uZWxzWyd1c2VycyddID0gWy4uLnNlYy5wZXJzb25uZWxzWyd1c2VycyddLCAuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlYy5wZXJzb25uZWxzWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY1snY2hlY2tlZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gc2VjWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTZWN0aW9uRGF0YUNoZWNrZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajpgIlcclxuICAgICAqIEBwYXJhbSBldmVudCBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2tBbGwoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbi5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXSA9ICF0aGlzLmN1cnJlbnRTZWN0aW9uWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgY3VyQ2hlY2tlZCA9IHRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbi5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJlbnRTZWN0aW9uLnBlcnNvbm5lbHMpICE9ICd7fScgJiYgdGhpcy5jdXJyZW50U2VjdGlvblsncGVyc29ubmVscyddWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsncGVyc29ubmVscyddWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gY3VyQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjdXJDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlY3Rpb24odGhpcy5jdXJyZW50U2VjdGlvbilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VjdGlvbih0aGlzLmN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRTZWN0aW9uKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5faXNTZWxlY3RlZEluQXJyYXkoc2VjdGlvblsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkU2VjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlbW92ZVNlY3Rpb24oc2VjdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbVsnZGF0YSddW3RoaXMubGlzdElkRmllbGRdID09PSBzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si55So5oi3XHJcbiAgICAgKi9cclxuICAgIHNlYXJjaFVzZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hUZXh0Q2hhbmdlU3ViamVjdC5uZXh0KHRoaXMuc2VhcmNoVGV4dCk7ICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaExpc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhclNlYXJjaCgpe1xyXG4gICAgICAgIHRoaXMuc2hvd1NlYXJjaExpc3Q9ZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5lcnJvclRleHQ9Jyc7XHJcbiAgICAgICAgLy8g5Y+W5raI5oyC6LW355qE6K+35rGCXHJcbiAgICAgICAgaWYodGhpcy5yZWNvcmRHZXRVc2VyU3Vic2NyaWJlKXtcclxuICAgICAgICAgICAgdGhpcy5yZWNvcmRHZXRVc2VyU3Vic2NyaWJlLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVjb3JkR2V0VXNlclN1YnNjcmliZT1udWxsO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIC8vIOa4hemZpOmBrue9qVxyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZGlhbG9nT3BlbmQoKXtcclxuICAgICAgICB0aGlzLnNob3dPckhpZGVMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRleHRDaGFuZ2VTdWJqZWN0PW5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0Q2hhbmdlU3ViamVjdC5waXBlKGRlYm91bmNlVGltZSgyMDApKS5zdWJzY3JpYmUoKHRzZWFyY2hUZXh0OnN0cmluZyk9PntcclxuICAgICAgICAgICAgdGhpcy5lcnJvclRleHQ9Jyc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIOiusOW9lVxyXG4gICAgICAgICAgICB0aGlzLnJlY29yZEdldFVzZXJTdWJzY3JpYmU9dGhpcy5nZXRTZWFyY2hEYXRhKHRzZWFyY2hUZXh0LCAwKS5zdWJzY3JpYmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dPckhpZGVMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJMaXN0ID0gZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxlcnJvcj0+e1xyXG4gICAgICAgICAgICAgICAgLy8g5aSE55CG5aSx6LSlXHJcbiAgICAgICAgICAgICAgICBpZihlcnJvciYmZXJyb3Iuc3RhdHVzVGV4dCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvclRleHQ9ZXJyb3Iuc3RhdHVzVGV4dDtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JUZXh0PSflh7rnjrDlvILluLgnO1xyXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLkurrlkZjmn6XnnIvmm7TlpJpcclxuICAgICAqL1xyXG4gICAgZ2V0TW9yZVNlYXJjaERhdGEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCAmJiB0aGlzLnBlcnNvblNlYXJjaFVybCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldFNlYXJjaERhdGEodGhpcy5zZWFyY2hUZXh0LCB0aGlzLnNlYXJjaFVzZXJMaXN0LnBhZ2VJbmRleCArIDEpLnN1YnNjcmliZShkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJMaXN0LnBhZ2VJbmRleCA9IGRbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoVXNlckxpc3RbJ3VzZXJzJ10gPSBbLi4udGhpcy5zZWFyY2hVc2VyTGlzdFsndXNlcnMnXSwgLi4uZFsndXNlcnMnXV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWFyY2hEYXRhKHRleHQ6IHN0cmluZywgcGFnZUluZGV4OiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIgPSB0aGlzLnBhZ2VTaXplKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVyc29uU2VhcmNoVXJsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMucGVyZml4U3RyfSR7dGhpcy5wZXJzb25TZWFyY2hVcmx9P3BhcmFtPSR7dGV4dH0mcGFnZVNpemU9JHtwYWdlU2l6ZX0mcGFnZUluZGV4PSR7cGFnZUluZGV4fWA7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgInkuK3kurrlkZjmiJbnu4Tnu4fliKDpmaRcclxuICAgICAqIEBwYXJhbSBkYXRhIFxyXG4gICAgICogQHBhcmFtIHR5cGUgXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGlvblJlbW92ZShkYXRhOiBhbnksIHR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0eXBlID09ICd1c2VyJykge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNlbGVjdGVkVXNlcnMuZmluZEluZGV4KHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXIuZGF0YS5pZCA9PSBkYXRhLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YS5kYXRhWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAnc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5zZWxlY3RlZFNlY3Rpb25zLmZpbmRJbmRleChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmRhdGEuaWQgPT0gZGF0YS5kYXRhLmlkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGFbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGF0YVBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ3NlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGRhdGFQYXJlbnQgPSB0aGlzLmdldFNlY3Rpb25CeUlkKGRhdGEucGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAndXNlcicpIHtcclxuICAgICAgICAgICAgLy8gYnVnTnVtOjQ4MDY0OVxyXG4gICAgICAgICAgICBpZihkYXRhWydwYXJlbnQnXSl7XHJcbiAgICAgICAgICAgICAgICBkYXRhUGFyZW50ID0gdGhpcy5nZXRTZWN0aW9uQnlJZChkYXRhLnBhcmVudC5kYXRhLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhUGFyZW50JiZ0eXBlPT0ndXNlcicpe1xyXG4gICAgICAgICAgICAvLyBidWdOdW06NDgwNjUxXHJcbiAgICAgICAgICAgIC8vIOWmguaenOWIoOmZpOeahOaYr+eUqOaIt+W5tuS4lOi/mOacieeItue6p+WIq1xyXG4gICAgICAgICAgICBsZXQgZGVsUGFyZW50SW5kZXggPSB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YS5pZCA9PSBkYXRhUGFyZW50LmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZihkZWxQYXJlbnRJbmRleD4tMSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGFQYXJlbnQpIHtcclxuICAgICAgICAgICAgZGF0YVBhcmVudFsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICgoZGF0YVBhcmVudC5jaGlsZHJlbiAmJiBkYXRhUGFyZW50LmNoaWxkcmVuLmxlbmd0aCkgfHwgKGRhdGFQYXJlbnQucGVyc29ubmVscy51c2VycyAmJiBkYXRhUGFyZW50LnBlcnNvbm5lbHMudXNlcnMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVucyA9IGRhdGFQYXJlbnQuY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJzID0gZGF0YVBhcmVudC5wZXJzb25uZWxzLnVzZXJzLmZpbHRlcih1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlclsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmICgoY2hpbGRyZW5zICYmIGNoaWxkcmVucy5sZW5ndGgpIHx8ICh1c2VycyAmJiB1c2Vycy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVBhcmVudFsnaW5kZXRlcm1pbmF0ZSddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFQYXJlbnQucGFyZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVBhcmVudC5wYXJlbnRzLmZvckVhY2gocGFyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyU2VjID0gdGhpcy5nZXRTZWN0aW9uQnlJZChwYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBhclNlYy5jaGlsZHJlbiAmJiBwYXJTZWMuY2hpbGRyZW4ubGVuZ3RoKSB8fCAocGFyU2VjLnBlcnNvbm5lbHMudXNlcnMgJiYgcGFyU2VjLnBlcnNvbm5lbHMudXNlcnMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmNoaWxkcmVucyA9IHBhclNlYy5jaGlsZHJlbi5maWx0ZXIoY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZFsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFydXNlcnMgPSBwYXJTZWMucGVyc29ubmVscy51c2Vycy5maWx0ZXIodXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcmNoaWxkcmVucyAmJiBwYXJjaGlsZHJlbnMubGVuZ3RoKSB8fCAocGFydXNlcnMgJiYgcGFydXNlcnMubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhUGFyZW50WydpbmRldGVybWluYXRlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSBkYXRhUGFyZW50WydpbmRldGVybWluYXRlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJTZWNbJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliKDpmaTlj7Pkvqflhajpg6jmlbDmja5cclxuICAgICAqL1xyXG4gICAgbW92ZUFsbFRvTGVmdCgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgdXNlci5kYXRhWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRpbGVkLmZvckVhY2goc2VjID0+IHtcclxuICAgICAgICAgICAgc2VjWydpbmRldGVybWluYXRlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VjWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VjWydkaXNhYmxlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShzZWMucGVyc29ubmVscykgIT0gJ3t9JyAmJiBzZWNbJ3BlcnNvbm5lbHMnXVsndXNlcnMnXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHNlY1sncGVyc29ubmVscyddWyd1c2VycyddLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVc2VycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBudW1iZXJUeXBlIDDvvJrlj5bmtojvvJsx77ya56Gu5a6aXHJcbiAgICAgKi9cclxuICAgIHJldHVyblJlc3VsdChudW1iZXJUeXBlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmZpbmFsVGV4dCA9ICcnO1xyXG4gICAgICAgIGlmIChudW1iZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRVc2Vycyx0aGlzLnNlbGVjdGVkU2VjdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICBpbmZvOiAnY29uZmlybScsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnM6IHRoaXMuc2VsZWN0ZWRVc2VycyxcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiB0aGlzLnNlbGVjdGVkU2VjdGlvbnNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5maW5hbFRleHQgKz0gaXRlbVt0aGlzLmxpc3REaXNwbGF5VGV4dF0gKyAn77ybJztcclxuICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICAgICAgICBpbmZvOiAnY2FuY2VsJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogW11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZUFsbFRvTGVmdCgpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVGV4dCA9ICcnO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVXNlcigpO1xyXG4gICAgICAgIHRoaXMucGVyc29ubmVsRGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqICDpnaLljIXlsZHliJfooajmmL7npLpcclxuICAgICAqL1xyXG4gICAgaW5pdENydW1ic0xpc3QoKSB7XHJcbiAgICAgICAgY29uc3QgY3J1bWJzTGlzdFdpZHRoID0gdGhpcy5jcnVtYnNMaXN0Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggLSAzMDtcclxuICAgICAgICBjb25zdCBjcnVtYnNMaXN0SXRlbXMgPSB0aGlzLmNydW1ic0xpc3QubmF0aXZlRWxlbWVudC5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgbGV0IGNydW1ic0xpc3RJdGVtV2lkdGggPSAwO1xyXG4gICAgICAgIGlmIChjcnVtYnNMaXN0SXRlbXMgJiYgY3J1bWJzTGlzdEl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY3J1bWJzTGlzdEl0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjcnVtYnNMaXN0SXRlbXNbaV0sICdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IGNydW1ic0xpc3RJdGVtc1tpXS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNydW1ic0xpc3RJdGVtV2lkdGggKz0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3J1bWJzTGlzdEl0ZW1XaWR0aCA+PSBjcnVtYnNMaXN0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNydW1ic0xpc3RJdGVtc1tpXSwgJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShjcnVtYnNMaXN0SXRlbXNbaV0sICdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGNydW1ic0xpc3RJdGVtV2lkdGggPj0gY3J1bWJzTGlzdFdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3J1bWJzRWxsaXBzaXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jcnVtYnNFbGxpcHNpcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcnVtYnNNb3JlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlY3Rpb25DcnVtYnMgJiYgdGhpcy5zZWN0aW9uQ3J1bWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNydW1ic0NsaWNrKHRoaXMuc2VjdGlvbkNydW1ic1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9pc0luQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bZmllbGRdKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfaXNTZWxlY3RlZEluQXJyYXkodmFsdWU6IHN0cmluZywgZmllbGQ6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZCB8fCAhdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliY0y5Liq5Y+C5pWw5b+F5aGrJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5maW5kKGl0ZW0gPT4gdmFsdWUgPT09IGl0ZW1bJ2RhdGEnXVtmaWVsZF0pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgICAgIHRoaXMubW92ZUFsbFRvTGVmdCgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFVzZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5pi+56S65oiW6ZqQ6JeP5q2j5Zyo5Yqg6L29XHJcbiAgICAgKiBAcGFyYW0gc2hvd09ySGlkZSDvvJp0cnVl5Li65pi+56S677yMaGlkZeS4uumakOiXj1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dPckhpZGVMb2FkaW5nKHNob3dPckhpZGUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzY3Vzc2lvbkNvbnRlbnQgfHwgIXRoaXMubG9hZGluZ1Nlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93T3JIaWRlKSB7XHJcbiAgICAgICAgICAgIC8vIOaJk+W8gFxyXG4gICAgICAgICAgICBpZighdGhpcy5sb2FkaW5nSW5zdGFuY2Upe1xyXG4gICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0luc3RhbmNlID0gdGhpcy5sb2FkaW5nU2VyLnNob3coeyBkZWxheTogNTAwLCBjb250YWluZXI6IHRoaXMuZGlzY3Vzc2lvbkNvbnRlbnQsIHR5cGU6IDEsIG1lc3NhZ2U6ICflhajlipvliqDovb3kuK0uLi4nIH0pO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5sb2FkaW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgLy8g5YWz6ZetXHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1Nlci5jbG9zZSh0aGlzLmxvYWRpbmdJbnN0YW5jZS5pZCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luc3RhbmNlPW51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSJdfQ==