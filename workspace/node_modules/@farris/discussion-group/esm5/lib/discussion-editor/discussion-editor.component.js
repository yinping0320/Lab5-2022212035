/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, ViewChild, ElementRef, Renderer2, Output, EventEmitter, ViewEncapsulation, ChangeDetectorRef, Injector } from '@angular/core';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { MsgInfo } from './discussion-editor.interface';
import { HttpClient } from '@angular/common/http';
import { of } from 'rxjs';
var DiscussionEditorComponent = /** @class */ (function () {
    function DiscussionEditorComponent(renderer, elementRef, cd, notifyService, injector, http) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.cd = cd;
        this.notifyService = notifyService;
        this.injector = injector;
        this.http = http;
        this.personnelsPrimaryKey = 'id';
        this.personnelsDisplayKey = 'name';
        this.replyPersonnelsDisplayKey = 'userName';
        // @Input() personnels: Array<any> = [];
        // @Input() permissionList: Array<any> = [
        //     { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
        //     { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        // ];
        this.cancelVisible = true;
        this.editHeight = 130;
        this.type = 'user';
        // 人事弹窗列表数据
        this._personnels = [];
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        // 对外
        this.valueChange = new EventEmitter();
        /**
         * 附件预览
         */
        this.filePreview = new EventEmitter();
        /**
         * 附件删除
         */
        this.fileRemove = new EventEmitter();
        this.fileUploadDone = new EventEmitter();
        this.personnelSearch = new EventEmitter();
        this.getOugUsers = new EventEmitter();
        // @ViewChild('searchInput') searchInput;
        // 审批意见
        this.textValue = '';
        // 暂存人员信息
        this.tempPersonnelsValue = '';
        // 暂存部门
        this.tempSectionValue = '';
        // 搜索人事管理弹窗
        this.personModalVisible = false;
        // 选择要发送的人员列表
        this.selectedPersonnels = [];
        // 选择要发送的部门
        this.selectedSection = [];
        // 暂存人员信息，用于搜索
        this.copyPersonnels = [];
        this.innerPersonnels = [];
        this.relativeVisible = false;
        //上传附件是否显示
        this.attachFilesModalVisible = false;
        this.pageSize = 20;
        this.searchPersonnelList = {};
        this.showSearchList = false;
        this.permissionList = [];
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        this.localeService = this.injector.get(LocaleService);
    }
    Object.defineProperty(DiscussionEditorComponent.prototype, "personnels", {
        get: /**
         * @return {?}
         */
        function () {
            return this._personnels;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._personnels = val;
                this.innerPersonnels = this._personnels;
                this.copyPersonnels = this._personnels;
                // this.copyPersonnels = this._personnels;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionEditorComponent.prototype, "replyUser", {
        get: /**
         * @return {?}
         */
        function () {
            return this._replyUser;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._replyUser = val;
                if (this._replyUser['id']) {
                    this.editorFocus();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DiscussionEditorComponent.prototype, "attachFiles", {
        get: /**
         * @return {?}
         */
        function () {
            return this._attachFiles;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val) {
                this._attachFiles = val;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var self = this;
        this.renderer.listen(document, 'click', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            self.personModalVisible = false;
            self.relativeVisible = false;
        }));
        // this.copyPersonnels = this.personnels;
        this.el = this.elementRef.nativeElement;
        this.permissionList = [
            { value: 'ALL', text: this.localeService.getValue('discussionGroup.all') },
            { value: 'RELATED', text: this.localeService.getValue('discussionGroup.related') }
        ];
        this.permission = this.permissionList[0];
        this.options = { maxUploads: 3, maxFileSize: 10240, allowedContentTypes: ['.jpg', '.pdf'] };
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
    };
    /**
     * 单个附件上传完成
     * @param ev
     */
    /**
     * 单个附件上传完成
     * @param {?} ev
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fUploadDoneHandler = /**
     * 单个附件上传完成
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        this.fileUploadDone.emit(ev);
    };
    /**
     * 上传附件中单个附件删除完成
     * @param ev
     */
    /**
     * 上传附件中单个附件删除完成
     * @param {?} ev
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fUploadRemovedHandler = /**
     * 上传附件中单个附件删除完成
     * @param {?} ev
     * @return {?}
     */
    function (ev) {
        // console.log('fUploadRemovedHandler');
        // console.log(ev);
    };
    /**附件列表中预览 */
    /**
     * 附件列表中预览
     * @param {?} info
     * @return {?}
     */
    DiscussionEditorComponent.prototype.filePreviewEventHandler = /**
     * 附件列表中预览
     * @param {?} info
     * @return {?}
     */
    function (info) {
        this.filePreview.emit(info);
    };
    /**附件列表中删除 */
    /**
     * 附件列表中删除
     * @param {?} file
     * @return {?}
     */
    DiscussionEditorComponent.prototype.fileRemoveEventHandler = /**
     * 附件列表中删除
     * @param {?} file
     * @return {?}
     */
    function (file) {
        this.fileRemove.emit(file);
    };
    // 文本框失去焦点触发
    // 文本框失去焦点触发
    /**
     * @param {?=} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.setTextValue = 
    // 文本框失去焦点触发
    /**
     * @param {?=} e
     * @return {?}
     */
    function (e) {
        if (e === void 0) { e = null; }
        if (e) {
            // console.log(e.target.innerHTML);
            this.tempTextValue = e.target.innerHTML;
            this.textValue = this.tempTextValue;
        }
        // if (this.tempTextValue) {
        //     this.textValue = this.tempTextValue
        // }
        if (this.tempPersonnelsValue) {
            this.textValue += this.tempPersonnelsValue;
        }
        if (this.tempSectionValue) {
            this.textValue += this.tempSectionValue;
        }
        this.tempTextValue = '';
        this.tempPersonnelsValue = '';
        this.tempSectionValue = '';
    };
    // 监听键盘事件, 主要是用于删除@人
    // 监听键盘事件, 主要是用于删除@人
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.listenEditorValueChange = 
    // 监听键盘事件, 主要是用于删除@人
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.tempTextValue = e.target.innerHTML;
        /** @type {?} */
        var children = e.target.children;
        /** @type {?} */
        var childrenId = [];
        for (var i = 0; i < children.length; i++) {
            childrenId.push(children[i].id);
        }
        this.selectedPersonnels.forEach((/**
         * @param {?} personnel
         * @param {?} index
         * @return {?}
         */
        function (personnel, index) {
            if (!childrenId.includes(personnel[_this.personnelsPrimaryKey])) {
                _this.selectedPersonnels.splice(index, 1);
            }
        }));
        this.selectedSection.forEach((/**
         * @param {?} section
         * @param {?} index
         * @return {?}
         */
        function (section, index) {
            if (!childrenId.includes(section[_this.personnelsPrimaryKey])) {
                _this.selectedSection.splice(index, 1);
            }
        }));
        if (!this.tempTextValue) {
            this.tempTextValue = '';
        }
    };
    /**
     * 搜索人员
     */
    /**
     * 搜索人员
     * @return {?}
     */
    DiscussionEditorComponent.prototype.serachPersonnel = /**
     * 搜索人员
     * @return {?}
     */
    function () {
        var _this = this;
        // if (this.personnelText) {
        //     this.innerPersonnels = this.copyPersonnels.filter(item => {
        //         if(item[this.personnelsDisplayKey]){
        //             return item[this.personnelsDisplayKey].indexOf(this.personnelText) !== -1;
        //         }
        //     })
        // }
        // else {
        //     this.innerPersonnels = this.copyPersonnels;
        // }
        if (this.personnelText) {
            this.showSearchList = true;
            this.getSearchData(this.personnelText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            function (d) {
                if (d.hasOwnProperty("users")) {
                    _this.searchPersonnelList = d;
                    _this.setPersonModalPosition();
                }
            }));
        }
        else {
            this.showSearchList = false;
        }
        // this.searchInput.nativeElement.blur();
        //暂时注释掉服务器端查询
        // this.personnelSearch.emit(this.personnelText);
    };
    /**
     * 搜索下一页
     */
    /**
     * 搜索下一页
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getMoreSearchData = /**
     * 搜索下一页
     * @return {?}
     */
    function () {
        var _this = this;
        this.getSearchData(this.personnelText, this.searchPersonnelList.pageIndex + 1).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        function (d) {
            if (d.hasOwnProperty("users")) {
                _this.searchPersonnelList.pageIndex = d['pageIndex'];
                _this.searchPersonnelList['users'] = tslib_1.__spread(_this.searchPersonnelList['users'], d['users']);
            }
        }));
    };
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getSearchData = /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    function (text, pageIndex, pageSize) {
        if (pageSize === void 0) { pageSize = this.pageSize; }
        if (this.personSearchUrl) {
            /** @type {?} */
            var url = this.personSearchUrl + "?param=" + text + "&pageSize=" + pageSize + "&pageIndex=" + pageIndex;
            //console.log(url);
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    DiscussionEditorComponent.prototype.personnelChecked = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        item.active = !item.active;
        this.innerPersonnels = this.innerPersonnels.map((/**
         * @param {?} o
         * @return {?}
         */
        function (o) { return (tslib_1.__assign({}, o)); }));
        this.cd.markForCheck();
        this.appendPersonnels();
    };
    // 增加@人员
    // 增加@人员
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnels = 
    // 增加@人员
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var selectedList = [];
        if (!this.showSearchList) {
            selectedList = this.innerPersonnels.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active === true; }));
        }
        else {
            selectedList = this.searchPersonnelList['users'].filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active === true; }));
        }
        if (selectedList.length) {
            this.appendPersonnel(selectedList);
        }
        this.resetPersonnels();
        this.setTextValue();
        this.personModalVisible = false;
    };
    //高级搜索人员添加
    //高级搜索人员添加
    /**
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnelsList = 
    //高级搜索人员添加
    /**
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        if (listData.length) {
            this.appendPersonnel(listData, true);
        }
        this.setTextValue();
    };
    //循环增加人员
    //循环增加人员
    /**
     * @param {?} listData
     * @param {?=} external
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendPersonnel = 
    //循环增加人员
    /**
     * @param {?} listData
     * @param {?=} external
     * @return {?}
     */
    function (listData, external) {
        var _this = this;
        if (external === void 0) { external = false; }
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (_this.selectedPersonnels.length && _this._isInArray(item[_this.personnelsPrimaryKey], _this.personnelsPrimaryKey, _this.selectedPersonnels)) {
                return;
            }
            else {
                //if (!external) {
                _this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[_this.personnelsPrimaryKey] + '" userid="' + item[_this.personnelsPrimaryKey] + '">@' + item[_this.personnelsDisplayKey] + '</a>&nbsp;';
                // }
                // else {
                //     this.tempPersonnelsValue += '<a name="personnel" contenteditable="false" class="at-user" id="' + item[this.personnelsPrimaryKey] + '" userid="' + item[this.personnelsPrimaryKey] + '">@' + item[this.replyPersonnelsDisplayKey] + '</a>';
                // }
                _this.selectedPersonnels.push(item);
            }
        }));
    };
    /**
     * 添加部门
     * @param listData
     */
    /**
     * 添加部门
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendSectionList = /**
     * 添加部门
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        if (listData.length) {
            this.appendSection(listData);
        }
        this.setTextValue();
    };
    /**
     * @param {?} listData
     * @return {?}
     */
    DiscussionEditorComponent.prototype.appendSection = /**
     * @param {?} listData
     * @return {?}
     */
    function (listData) {
        var _this = this;
        listData.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (_this.selectedSection.length && _this._isInArray(item[_this.personnelsPrimaryKey], _this.personnelsPrimaryKey, _this.selectedSection)) {
                return;
            }
            else {
                _this.tempSectionValue += '<a name="org" contenteditable="false" class="at-org" id="' + item[_this.personnelsPrimaryKey] + '" orgid="' + item[_this.personnelsPrimaryKey] + '">@' + item['name'] + '</a>&nbsp;';
                _this.selectedSection.push(item);
            }
        }));
    };
    // 判断是否在数组
    // 判断是否在数组
    /**
     * @private
     * @param {?} value
     * @param {?} fieldInArray
     * @param {?} array
     * @return {?}
     */
    DiscussionEditorComponent.prototype._isInArray = 
    // 判断是否在数组
    /**
     * @private
     * @param {?} value
     * @param {?} fieldInArray
     * @param {?} array
     * @return {?}
     */
    function (value, fieldInArray, array) {
        if (!value || !fieldInArray) {
            return false;
        }
        return array.findIndex((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return value === item[fieldInArray]; })) === -1 ? false : true;
    };
    /**
     * 关闭人事管理弹窗
     */
    /**
     * 关闭人事管理弹窗
     * @return {?}
     */
    DiscussionEditorComponent.prototype.resetPersonnels = /**
     * 关闭人事管理弹窗
     * @return {?}
     */
    function () {
        this.showSearchList = false;
        this.personModalVisible = false;
        this.innerPersonnels = this.copyPersonnels;
        if (this.innerPersonnels.length) {
            this.innerPersonnels.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.active = false; }));
        }
        this.personnelText = '';
        // this.stopBubble(e);
    };
    /**
     * 打开人员管理
     * @param e 事件
     */
    /**
     * 打开人员管理
     * @param {?} e 事件
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalPerson = /**
     * 打开人员管理
     * @param {?} e 事件
     * @return {?}
     */
    function (e) {
        var _this = this;
        this.personModalVisible = !this.personModalVisible;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (_this.personModalVisible) {
                _this.setPersonModalPosition();
            }
        }), 0);
        // this.getPersonnelList();
        this.stopBubble(e);
    };
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.setPersonModalPosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var winH = window.innerHeight;
        /** @type {?} */
        var ModalBottom = this.personModal.nativeElement.getBoundingClientRect().bottom;
        if (winH < ModalBottom) {
            this.personModal.nativeElement.scrollIntoView(false);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalPermission = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.relativeVisible = !this.relativeVisible;
        this.stopBubble(e);
    };
    /**
     * 打开上传附件
     */
    /**
     * 打开上传附件
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.openModalFile = /**
     * 打开上传附件
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.attachFilesModalVisible = !this.attachFilesModalVisible;
        this.stopBubble(e);
    };
    // 阻止冒泡
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    DiscussionEditorComponent.prototype.stopBubble = 
    // 阻止冒泡
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e.stopPropagation) {
            e.stopPropagation();
        }
        else {
            window.event.cancelBubble = true;
        }
    };
    /**
     * 提交评语
     */
    /**
     * 提交评语
     * @return {?}
     */
    DiscussionEditorComponent.prototype.submitApproval = /**
     * 提交评语
     * @return {?}
     */
    function () {
        if (!this.textValue) {
            /** @type {?} */
            var notEmptyText = this.localeService.getValue('discussionGroup.notEmpty');
            if (notEmptyText) {
                this.notifyService.error(notEmptyText);
            }
            return;
        }
        /** @type {?} */
        var editAttachFiles = [];
        if (this.attachFiles && this.attachFiles.length) {
            this.attachFiles.forEach((/**
             * @param {?} file
             * @return {?}
             */
            function (file) {
                /** @type {?} */
                var id = file['id'];
                /** @type {?} */
                var name = file['name'];
                /** @type {?} */
                var size = file['size'];
                /** @type {?} */
                var metadataId = file['extend']['metadataId'];
                /** @type {?} */
                var attachFile = {
                    id: id,
                    name: name,
                    size: size,
                    metadataId: metadataId
                };
                editAttachFiles.push(attachFile);
            }));
        }
        this.valueChange.emit({
            msgInfo: MsgInfo.Confirm,
            text: this.textValue,
            mailTos: this.selectedPersonnels,
            mailToSections: this.selectedSection,
            visibility: this.permission.value,
            parentId: (this.replyUser && this.replyUser.hasOwnProperty('id')) ? this.replyUser.id : null,
            attachFiles: editAttachFiles.length ? editAttachFiles : null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    };
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.cancel = /**
     * @return {?}
     */
    function () {
        this.valueChange.emit({
            msgInfo: MsgInfo.Cancel,
            text: null,
            mailTos: [],
            mailToSections: [],
            visibility: null,
            parentId: null,
            attachFiles: null
        });
        this.textValue = '';
        this.selectedPersonnels = [];
        this.selectedSection = [];
        this.attachFiles = [];
        this.replyUser = {};
    };
    /**修改查看权限 */
    /**
     * 修改查看权限
     * @param {?} value
     * @return {?}
     */
    DiscussionEditorComponent.prototype.changePermission = /**
     * 修改查看权限
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.permission = this.permissionList.find((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.value === value; }));
        this.relativeVisible = false;
    };
    //获得焦点
    //获得焦点
    /**
     * @return {?}
     */
    DiscussionEditorComponent.prototype.editorFocus = 
    //获得焦点
    /**
     * @return {?}
     */
    function () {
        this.editor.nativeElement.focus();
    };
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     */
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.selectionsChangePar = 
    // customGroupChangePar(event){
    //     this.customGroupChange.emit(event);
    // }
    /**
     * 高级人员点确认
     * @param {?} event
     * @return {?}
     */
    function (event) {
        //this.resetPersonnels();
        if (event.data.users.length) {
            /** @type {?} */
            var userList_1 = [];
            event.data.users.forEach((/**
             * @param {?} user
             * @return {?}
             */
            function (user) {
                userList_1.push(user.data);
            }));
            this.appendPersonnelsList(userList_1);
        }
        if (event.data.section.length) {
            /** @type {?} */
            var sectionList_1 = [];
            event.data.section.forEach((/**
             * @param {?} sec
             * @return {?}
             */
            function (sec) {
                sectionList_1.push(sec.data);
            }));
            this.appendSectionList(sectionList_1);
        }
        this.selectionsChange.emit(event);
    };
    /**高级人员中选中某行 */
    /**
     * 高级人员中选中某行
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.lineDataChangePar = /**
     * 高级人员中选中某行
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.lineDataChange.emit(event);
    };
    /**获得占位头像 */
    /**
     * 获得占位头像
     * @param {?} item
     * @return {?}
     */
    DiscussionEditorComponent.prototype.getAvatar = /**
     * 获得占位头像
     * @param {?} item
     * @return {?}
     */
    function (item) {
        if (item && item[this.personnelsDisplayKey]) {
            /** @type {?} */
            var str = item[this.personnelsDisplayKey];
            return str.substring(str.length - 2, str.length);
        }
        else {
            return '';
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DiscussionEditorComponent.prototype.ougUsers = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.getOugUsers.emit(event);
    };
    DiscussionEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-discussion-editor',
                    template: "<div class=\"farris-discussion-group-reply-tip\" *ngIf=\"replyUser && replyUser.id\">\r\n    {{ 'discussionGroup.reply' | locale }} &nbsp;\r\n    <span class=\"farris-discussion-group-reply-tip-name\">\r\n        {{replyUser[replyPersonnelsDisplayKey]}}\r\n    </span>\r\n    \uFF1A\r\n</div>\r\n<div class=\"f-discussion-group-edit\">\r\n    <div class=\"f-discussion-group-edit-container\" [ngStyle]=\"{'height': editHeight + 'px'}\">\r\n        <div class=\"textarea-editor\" #editor (keyup)=\"listenEditorValueChange($event)\" (blur)=\"setTextValue($event)\"\r\n            contenteditable=\"true\" [innerHTML]=\"textValue | safeHtml\"></div>\r\n    </div>\r\n    <!-- \u9644\u4EF6\u90E8\u5206 <div class=\"f-discussion-group-edit-files\" *ngIf=\"attachFiles && attachFiles.length\">\r\n        <f-file-preview class=\"d-flex flex-wrap\" [itemCls]=\"'demo-view-item'\" [fileInfos]=\"attachFiles\"\r\n            (filePreviewEvent)=\"filePreviewEventHandler($event)\" (fileRemoveEvent)=\"fileRemoveEventHandler($event)\"\r\n            #filePreview>\r\n            <ng-template filePreviewListTypeTemplate let-data let-readonly=\"readonly\">\r\n                <div class=\"ffilepreview--item-detail\">\r\n                    <div class=\"ffilepreview--item-icon\">\r\n                        <span class=\"ffilepreview--filetype-icon\" [ngClass]=\"filePreview.getFileTypeClassName(data.name)\"></span>\r\n                    </div>\r\n                    <div class=\"ffilepreview--item-content\">\r\n                        <a class=\"item-content--title\" [title]=\"data.name\"\r\n                            (click)=\"filePreview.filePreviewHandler($event,data)\">{{data.name}}</a>\r\n                        <div class=\"item-content--toolbar f-text-light\">\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.filePreviewHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-preview\"></span>\u9884\u89C8\r\n                            </button>\r\n                            <button class=\"btn btn-link\" (click)=\"filePreview.fileRemoveHandler($event,data)\">\r\n                                <span class=\"f-icon f-icon-delete\"></span>\u5220\u9664\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n        </f-file-preview>\r\n    </div> -->\r\n    <div class=\"f-discussion-group-edit-footer\">\r\n        <div class=\"f-discussion-group-edit-toolbar\">\r\n            <!-- <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-file\" (click)=\"openModalFile($event)\">\r\n                <div class=\"toolbar-item-text\">\r\n                    <span class=\"toolbar-icon f-icon f-icon-attachment\"></span>\r\n                    <span class=\"toolbar-text\">\u9644\u4EF6</span>\r\n                </div>\r\n            </div> -->\r\n            <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-about\">\r\n                <div class=\"toolbar-item-text\" (click)=\"openModalPerson($event)\">\r\n                    <span class=\"toolbar-icon\">@</span>\r\n                    <span class=\"toolbar-text\">{{ 'discussionGroup.colleague' | locale }}</span>\r\n                </div>\r\n                <div class=\"f-discussion-group-about-dropdown\" *ngIf=\"personModalVisible\" (click)=\"stopBubble($event)\" #personModal>\r\n                    <div class=\"f-discussion-group-about-search\">\r\n                        <!-- bugNum:480647 -->\r\n                        <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"personnelText\" (enterHandle)=\"serachPersonnel()\" (clickHandle)=\"serachPersonnel()\" (valueChange)=\"serachPersonnel()\" (clear)=\"serachPersonnel()\"></input-group>\r\n                    </div>\r\n                    <div class=\"f-discussion-group-about-content\">\r\n                        <div class=\"f-discussion-group-about-used\" [hidden]=\"showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"innerPersonnels.length\">\r\n                                    <li *ngFor=\"let item of innerPersonnels\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <div class=\"about-list-detail-subtext\">{{item.email}}</div>\r\n                                        </div>\r\n                                    </li>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"!innerPersonnels.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item about-dropdown-list-item-empty\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>        \r\n                        </div>\r\n                        <div class=\"f-discussion-group-about-searchlist\" [hidden]=\"!showSearchList\">\r\n                            <ul class=\"f-discussion-group-about-dropdown-list\">\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && searchPersonnelList.users.length\">\r\n                                    <li *ngFor=\"let item of searchPersonnelList['users']\" (click)=\"item.active = !item.active\" class=\"d-flex f-discussion-group-about-dropdown-list-item\"\r\n                                        [class.active]=\"item.active\">\r\n                                        <span class=\"f-icon f-icon-check\"></span>\r\n                                        <img [src]=\"item.imgData\" class=\"about-list-item-avatar\" *ngIf=\"item.imgData\"/>\r\n                                        <div class=\"about-list-item-avatar-tip\" *ngIf=\"!item.imgData\" [innerHTML]=\"getAvatar(item)\"></div>\r\n                                        <div class=\"f-discussion-group-about-dropdown-list-detail f-utils-fill\">\r\n                                            <div class=\"about-list-detail-text\">{{item[personnelsDisplayKey]}}</div>\r\n                                            <!-- <div class=\"about-list-detail-subtext\">{{item.email}}</div> -->\r\n                                            <div class=\"about-list-detail-subtext\">\r\n                                                <span [innerHTML]=\"item | getOrgText:sectionData\"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"searchPersonnelList.pageIndex < searchPersonnelList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <ng-template [ngIf]=\"searchPersonnelList && searchPersonnelList.users && !searchPersonnelList.users.length\">\r\n                                    <li class=\"f-discussion-group-about-dropdown-list-item\">{{ 'discussionGroup.emptyMessage' | locale }}</li>\r\n                                </ng-template>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-about-list-btns d-flex\">\r\n                        <div class=\"f-about-list-btns-left\">\r\n                            <farris-discussion-personnel \r\n                            [sectionData]=\"sectionData\"\r\n                            [orgUrl]=\"orgUrl\"\r\n                            [personSearchUrl]=\"personSearchUrl\"\r\n                            (selectionsChange)=\"selectionsChangePar($event)\"\r\n                            (lineDataChange)=\"lineDataChangePar($event)\"\r\n                            (ougUsers)=\"ougUsers($event)\"\r\n                            ></farris-discussion-personnel>\r\n                        </div>\r\n                        <div class=\"f-about-list-btns-right\">\r\n                            <button class=\"btn btn-secondary\" (click)=\"resetPersonnels()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n                            <button class=\"btn btn-primary\" (click)=\"appendPersonnels()\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- \u6682\u65F6\u6CE8\u91CA20210407 -->\r\n            <!-- <div class=\"f-discussion-group-edit-toolbar-item f-discussion-group-edit-toolbar-dropdown\">\r\n                <div class=\"toolbar-dropdown-text\" (click)=\"openModalPermission($event)\">\r\n                    <span class=\"toolbar-text\">{{permission.text}}</span>\r\n                    <span class=\"f-icon f-icon-collapse toolbar-icon\"></span>\r\n                </div>\r\n                <div class=\"toolbar-dropdown-list dropdownlist\" *ngIf=\"relativeVisible\">\r\n                    <ul *ngIf=\"permissionList && permissionList.length\">\r\n                        <li *ngFor=\"let item of permissionList\" class=\"dropdown-item\" [class.active]=\"permission?.value === item.value\"\r\n                            (click)=\"changePermission(item.value)\">{{item.text}}</li>\r\n                    </ul>\r\n                </div>\r\n            </div> -->\r\n        </div>\r\n        <div class=\"f-discussion-group-edit-btns\">\r\n            <button class=\"btn btn-link f-discussion-cancel\" *ngIf=\"cancelVisible\" (click)=\"cancel()\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n            <button class=\"btn btn-primary\" (click)=\"submitApproval()\">{{ 'discussionGroup.submit' | locale }}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- <div class=\"f-discussion-group-file-upload\" [hidden]=\"!attachFilesModalVisible\">\r\n    <f-file-upload\r\n        (fUploadDoneEvent)=\"fUploadDoneHandler($event)\"\r\n        (fUploadRemovedEvent)=\"fUploadRemovedHandler($event)\">\r\n    </f-file-upload>\r\n</div> -->",
                    encapsulation: ViewEncapsulation.None,
                    styles: [":host{display:block}.f-discussion-group-edit{border:1px solid #dcdcdc;background:#fff}.f-discussion-group-edit .f-discussion-group-edit-container{width:100%;position:relative}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor{width:100%;height:100%;padding:8px;margin:0 auto;outline:0;overflow-y:auto;word-break:break-all;white-space:normal;resize:none}.f-discussion-group-edit .f-discussion-group-edit-container .textarea-editor a{color:#3487e3}.f-discussion-group-edit .f-discussion-group-edit-footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;flex-wrap:wrap;-webkit-box-pack:justify;justify-content:space-between;padding:10px 14px;background:#f7f7f7}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;flex-wrap:wrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item{cursor:pointer;color:rgba(0,0,0,.65)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-item-text{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;line-height:22px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-text{margin-left:2px;font-size:14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-item .toolbar-icon{color:#667580;font-size:16px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-file{margin-right:12px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about{position:relative;margin-right:32px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown{position:absolute;top:calc(100% + 6px);left:0;width:300px;padding-top:16px;z-index:999;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list{max-height:282px;margin-top:10px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar{width:7px;height:7px;background-color:#8e8e8e}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-track{border-radius:0;background-color:#fff;border:0;background-clip:padding-box;border-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list::-webkit-scrollbar-thumb{border-radius:3px;background-color:#dbdbdb;border:0;background-clip:content-box;opacity:.6;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail{margin-left:6px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-text{line-height:20px;font-size:12px;color:#0a131a;margin:0 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-discussion-group-about-dropdown-list-detail .about-list-detail-subtext{font-size:12px;color:#8f9ca6;line-height:20px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check{border:1px solid #d8d9d9;color:#fff;font-size:15px;border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .f-icon-check::before{content:''}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check{border:none;background:#4c91ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.active .f-icon-check::before{content:'\\e118'}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar{display:block;width:30px;height:30px;margin-left:6px;border-radius:50%;overflow:hidden}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item .about-list-item-avatar-tip{width:32px;height:32px;margin-left:6px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty{cursor:default}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-dropdown-list-item.about-dropdown-list-item-empty:hover{background:#fff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-discussion-group-about-search{padding:0 14px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns{-webkit-box-pack:justify;justify-content:space-between;background:#faf9f9;border-top:1px solid #efefef;padding:10px 15px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn{margin-right:10px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-about .f-discussion-group-about-dropdown .f-about-list-btns .btn:last-child{margin-right:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown{position:relative}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-text{cursor:pointer}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-icon{color:rgba(0,0,0,.25)}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-text{margin-left:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list{position:absolute;left:0;top:calc(100% + 6px);z-index:999;padding:2px 0;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul{max-width:220px;overflow-y:auto}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li{font:14px/28px Microsoft yahei;padding:0 15px 0 10px;word-break:keep-all}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-toolbar .f-discussion-group-edit-toolbar-dropdown .toolbar-dropdown-list ul li:hover{background:#e6f7ff}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns{flex-shrink:0}.f-discussion-group-edit .f-discussion-group-edit-footer .f-discussion-group-edit-btns .f-discussion-cancel{margin-right:12px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-edit .f-discussion-group-edit-files{padding:10px 14px 0}.f-discussion-group-edit .f-discussion-group-edit-files .ffilepreview--filetype-icon{width:32px;height:32px}.farris-discussion-group-reply-tip{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;margin-bottom:10px;font-size:14px;color:rgba(0,0,0,.75)}.f-discussion-group-file-upload{margin-top:10px}.f-discussion-dialog-content{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;height:100%;padding:14px;overflow:hidden}.f-discussion-dialog-content-left{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:600px;height:100%;padding:0}.f-discussion-dialog-content-left .f-discussion-personnel-search{flex-shrink:0;position:relative;margin-bottom:7px}.f-discussion-dialog-content-left .f-discussion-tab-content{border:1px solid #dcdcdc;border-radius:2px;padding:12px 0 7px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs{flex-shrink:0;position:relative;width:100%;height:32px;padding:0 12px;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list{width:100%;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item{display:-webkit-box;display:flex;flex-wrap:nowrap;flex-shrink:0;-webkit-box-align:center;align-items:center;line-height:20px;font-size:14px;color:rgba(0,0,0,.85);cursor:pointer}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item .crumbs-text{padding:0 2px;text-overflow:ellipsis;max-width:80px;max-height:20px;white-space:nowrap;overflow:hidden}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item:first-child .crumbs-text{padding-left:0}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-item.crumbs-list-item-disabled{color:rgba(0,0,0,.55)}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-ellipsis{-webkit-box-align:center;align-items:center;position:absolute;left:12px;top:0;width:30px;height:32px;line-height:32px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content .f-discussion-personnel-crumbs .crumbs-list-padding{padding-left:30px}.f-discussion-dialog-content-left .f-discussion-tab-content .f-discussion-personnel-content.f-discussion-personnel-content-hide{display:none!important}.f-discussion-dialog-content-right{height:100%;margin-left:14px;padding:0;border:1px solid #dcdcdc;border-radius:2px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:36px;padding:0 14px;background:#fafafa}.f-discussion-dialog-content-right .f-discussion-selected-personnel-header-text{font-size:14px;line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content{padding:8px 0}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;padding:6px 12px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text{line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-text .f-discussion-selected-name{font-size:14px;color:rgba(0,0,0,.85)}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item-remove{visibility:hidden;color:#388fff;cursor:pointer}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover{background:#f3fbff}.f-discussion-dialog-content-right .f-discussion-selected-personnel-content .f-discussion-selected-list .f-discussion-selected-item:hover .f-discussion-selected-item-remove{visibility:visible}.f-discussion-dialog-content .f-discussion-selected-item-remove{visibility:hidden}.f-discussion-dialog-content .f-discussion-personnel-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:3px 14px 3px 3px;cursor:pointer}.f-discussion-dialog-content .f-discussion-personnel-item-avatar{flex-shrink:0;width:36px;height:36px;margin-right:5px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-personnel-item-avatar img{display:block;width:100%}.f-discussion-dialog-content .f-discussion-personnel-item-text{flex-shrink:1;-webkit-box-flex:1;flex-grow:1;flex-basis:0;padding-right:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-name{line-height:20px;font-size:12px;color:#0a131a}.f-discussion-dialog-content .f-discussion-personnel-item-text .f-discussion-personnel-mail{line-height:20px;font-size:12px;color:#8f9ca6}.f-discussion-dialog-content .f-discussion-personnel-item-remove{display:none}.f-discussion-dialog-content .f-discussion-personnel-item:hover{background:#f3fbff}.f-discussion-dialog-content .f-discussion-personnel-item:hover .f-discussion-personnel-item-remove{display:block}.f-discussion-dialog-content .f-discussion-personnel-item.active{background:#def1ff}.f-discussion-dialog-content .f-discussion-personnel-item.selected{background:#fff;cursor:not-allowed}.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-mail,.f-discussion-dialog-content .f-discussion-personnel-item.selected .f-discussion-personnel-name{color:#c1c1c1}.f-discussion-dialog-content .f-discussion-personnel-empty{padding:3px 14px;list-style:none;-webkit-box-align:center;align-items:center}.f-discussion-dialog-content .f-discussion-section-list-empty{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100%}.f-discussion-dialog-content .f-discussion-section-list-empty .f-icon{margin-bottom:8px;font-size:26px;color:#e2e6f0}.f-discussion-dialog-content .f-discussion-section-list-empty .section-list-empty-text{font-size:13px;color:rgba(0,0,0,.25)}.f-discussion-dialog-content .f-discussion-personnel-item-tip{width:36px;height:36px;font-size:12px;color:#fff;text-align:center;line-height:32px;border-radius:50%;background-color:#4796ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;height:32px;padding:0 12px;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:32px}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next{flex-shrink:0;position:relative;padding-left:20px;padding-right:10px;line-height:20px;font-size:12px;color:#388fff;cursor:pointer}.f-discussion-dialog-content .f-discussion-section-list .section-list-item-next::before{position:absolute;left:0;top:50%;width:1px;height:12px;margin-top:-6px;background:#d9d9d9;content:''}.f-discussion-dialog-content .f-discussion-section-list .section-list-item:hover{background:#f3f8ff}.f-discussion-dialog-content .f-discussion-section-list .section-list-item .section-list-item-checkbox.custom-control.custom-checkbox{margin-right:0;padding:0;margin-bottom:0}.f-discussion-dialog-content .f-discussion-section-list .person-list-item{height:auto;padding-top:7px;padding-bottom:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img{flex-shrink:0;width:36px;height:36px;border-radius:50%;overflow:hidden}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-img img{display:block;width:100%;height:100%}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content{padding-left:6px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-name{font-size:14px;color:rgba(0,0,0,.85);line-height:20px}.f-discussion-dialog-content .f-discussion-section-list .person-list-item-content .section-list-item-tip{font-size:12px;color:rgba(0,0,0,.35);line-height:20px}.f-discussion-person-list-page{padding:10px 0;text-align:center;cursor:pointer}.f-discussion-person-list-page .section-page-text{font-size:14px;color:rgba(0,0,0,.55)}.f-discussion-person-list-page:hover .section-page-text{color:rgba(0,0,0,.85)}"]
                }] }
    ];
    /** @nocollapse */
    DiscussionEditorComponent.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: NotifyService },
        { type: Injector },
        { type: HttpClient }
    ]; };
    DiscussionEditorComponent.propDecorators = {
        personnelsPrimaryKey: [{ type: Input }],
        personnelsDisplayKey: [{ type: Input }],
        replyPersonnelsDisplayKey: [{ type: Input }],
        cancelVisible: [{ type: Input }],
        editHeight: [{ type: Input }],
        type: [{ type: Input }],
        orgUrl: [{ type: Input }],
        personSearchUrl: [{ type: Input }],
        treeIdField: [{ type: Input }],
        treeDisplayText: [{ type: Input }],
        sectionData: [{ type: Input }],
        personnels: [{ type: Input }],
        replyUser: [{ type: Input }],
        attachFiles: [{ type: Input }],
        selectionsChange: [{ type: Output }],
        lineDataChange: [{ type: Output }],
        valueChange: [{ type: Output }],
        filePreview: [{ type: Output }],
        fileRemove: [{ type: Output }],
        fileUploadDone: [{ type: Output }],
        personnelSearch: [{ type: Output }],
        getOugUsers: [{ type: Output }],
        editor: [{ type: ViewChild, args: ['editor',] }],
        personModal: [{ type: ViewChild, args: ['personModal',] }]
    };
    return DiscussionEditorComponent;
}());
export { DiscussionEditorComponent };
if (false) {
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsPrimaryKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.replyPersonnelsDisplayKey;
    /** @type {?} */
    DiscussionEditorComponent.prototype.cancelVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editHeight;
    /** @type {?} */
    DiscussionEditorComponent.prototype.type;
    /** @type {?} */
    DiscussionEditorComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeIdField;
    /** @type {?} */
    DiscussionEditorComponent.prototype.treeDisplayText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionEditorComponent.prototype.options;
    /** @type {?} */
    DiscussionEditorComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionEditorComponent.prototype.sectiontreeData;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._personnels;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype._replyUser;
    /** @type {?} */
    DiscussionEditorComponent.prototype._attachFiles;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionEditorComponent.prototype.valueChange;
    /**
     * 附件预览
     * @type {?}
     */
    DiscussionEditorComponent.prototype.filePreview;
    /**
     * 附件删除
     * @type {?}
     */
    DiscussionEditorComponent.prototype.fileRemove;
    /** @type {?} */
    DiscussionEditorComponent.prototype.fileUploadDone;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelSearch;
    /** @type {?} */
    DiscussionEditorComponent.prototype.getOugUsers;
    /** @type {?} */
    DiscussionEditorComponent.prototype.editor;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModal;
    /** @type {?} */
    DiscussionEditorComponent.prototype.textValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempTextValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempPersonnelsValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.tempSectionValue;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.selectedSection;
    /** @type {?} */
    DiscussionEditorComponent.prototype.personnelText;
    /** @type {?} */
    DiscussionEditorComponent.prototype.copyPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.innerPersonnels;
    /** @type {?} */
    DiscussionEditorComponent.prototype.el;
    /** @type {?} */
    DiscussionEditorComponent.prototype.token;
    /** @type {?} */
    DiscussionEditorComponent.prototype.relativeVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permission;
    /** @type {?} */
    DiscussionEditorComponent.prototype.attachFilesModalVisible;
    /** @type {?} */
    DiscussionEditorComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionEditorComponent.prototype.searchPersonnelList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.permissionList;
    /** @type {?} */
    DiscussionEditorComponent.prototype.localeService;
    /** @type {?} */
    DiscussionEditorComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    DiscussionEditorComponent.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1lZGl0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tZWRpdG9yL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRWpLLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFlLE9BQU8sRUFBa0IsTUFBTSwrQkFBK0IsQ0FBQztBQUNyRixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUxQjtJQTJISSxtQ0FDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixFQUFxQixFQUNyQixhQUE0QixFQUM1QixRQUFrQixFQUNsQixJQUFnQjtRQUxoQixhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBMUhuQix5QkFBb0IsR0FBVyxJQUFJLENBQUM7UUFDcEMseUJBQW9CLEdBQVcsTUFBTSxDQUFDO1FBQ3RDLDhCQUF5QixHQUFXLFVBQVUsQ0FBQzs7Ozs7O1FBTS9DLGtCQUFhLEdBQVksSUFBSSxDQUFD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QUEyQzs7Ozs7SUFFM0MsK0NBQTBDOztJQUMxQyxtREFBOEM7O0lBQzlDLG9EQUErQzs7SUFDL0MsZ0RBQTJDOztJQUMzQywyQ0FBNEI7O0lBQzVCLGdEQUFzQzs7SUFHdEMsOENBQXVCOztJQUV2QixrREFBc0I7O0lBRXRCLHdEQUFpQzs7SUFFakMscURBQThCOztJQUU5Qix1REFBMkI7O0lBRTNCLHVEQUFvQzs7SUFFcEMsb0RBQWlDOztJQUVqQyxrREFBYzs7SUFFZCxtREFBZ0M7O0lBQ2hDLG9EQUFpQzs7SUFDakMsdUNBQWU7O0lBRWYsMENBQWU7O0lBQ2Ysb0RBQWlDOztJQUNqQywrQ0FBZ0I7O0lBRWhCLDREQUFnQzs7SUFDaEMsNkNBQXFCOztJQUNyQix3REFBNkI7O0lBQzdCLG1EQUErQjs7SUFDL0IsbURBQWdDOztJQUNoQyxrREFBNkI7O0lBQzdCLDhDQUF5RDs7Ozs7SUFFckQsNkNBQTJCOzs7OztJQUMzQiwrQ0FBOEI7Ozs7O0lBQzlCLHVDQUE2Qjs7Ozs7SUFDN0Isa0RBQW9DOzs7OztJQUNwQyw2Q0FBMEI7Ozs7O0lBQzFCLHlDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3RW5jYXBzdWxhdGlvbiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFVwbG9hZGVyT3B0aW9ucywgRlVwbG9hZEZpbGVFeHRlbmQgfSBmcm9tICdAZmFycmlzL2V4dGVuZC1maWxlLXVwbG9hZCc7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IFZhbHVlQ29uZmlnLCBNc2dJbmZvLCBlZGl0QXR0YWNoRmlsZSB9IGZyb20gJy4vZGlzY3Vzc2lvbi1lZGl0b3IuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGlzY3Vzc2lvbi1lZGl0b3InLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2Rpc2N1c3Npb24tZWRpdG9yLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEaXNjdXNzaW9uRWRpdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICAgIEBJbnB1dCgpIHBlcnNvbm5lbHNQcmltYXJ5S2V5OiBzdHJpbmcgPSAnaWQnO1xyXG4gICAgQElucHV0KCkgcGVyc29ubmVsc0Rpc3BsYXlLZXk6IHN0cmluZyA9ICduYW1lJztcclxuICAgIEBJbnB1dCgpIHJlcGx5UGVyc29ubmVsc0Rpc3BsYXlLZXk6IHN0cmluZyA9ICd1c2VyTmFtZSc7XHJcbiAgICAvLyBASW5wdXQoKSBwZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICAvLyBASW5wdXQoKSBwZXJtaXNzaW9uTGlzdDogQXJyYXk8YW55PiA9IFtcclxuICAgIC8vICAgICB7IHZhbHVlOiAnQUxMJywgdGV4dDogdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAuYWxsJykgfSxcclxuICAgIC8vICAgICB7IHZhbHVlOiAnUkVMQVRFRCcsIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLnJlbGF0ZWQnKSB9XHJcbiAgICAvLyBdO1xyXG4gICAgQElucHV0KCkgY2FuY2VsVmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBASW5wdXQoKSBlZGl0SGVpZ2h0OiBudW1iZXIgPSAxMzA7XHJcblxyXG4gICAgQElucHV0KCkgdHlwZTogc3RyaW5nID0gJ3VzZXInO1xyXG4gICAgQElucHV0KCkgb3JnVXJsOnN0cmluZztcclxuICAgIEBJbnB1dCgpIHBlcnNvblNlYXJjaFVybDpzdHJpbmc7XHJcbiAgICAvLyDpnIDopoHnmoTmoJHmlbDmja5cclxuICAgIC8vIEBJbnB1dCgpIHRyZWVEYXRhOiBhbnlbXTtcclxuICAgIC8vIOW3puS+p+agkeeahOS4u+mUruWtl+autVxyXG4gICAgQElucHV0KCkgdHJlZUlkRmllbGQ6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHRyZWVEaXNwbGF5VGV4dDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgc2VjdGlvbkRhdGE6YW55W107XHJcbiAgICAvLyDnlKjmiLfop5LoibJcclxuICAgIC8vIEBJbnB1dCgpIGdyb3VwTGlzdDogYW55W10gPSBbXTtcclxuXHJcbiAgICBvcHRpb25zOiBVcGxvYWRlck9wdGlvbnM7XHJcbiAgICBwbGFjZWhvbGRlcjpzdHJpbmc7XHJcbiAgICBzZWN0aW9udHJlZURhdGE6QXJyYXk8YW55PjtcclxuICAgIC8vIOS6uuS6i+W8ueeql+WIl+ihqOaVsOaNrlxyXG4gICAgcHJpdmF0ZSBfcGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG5cclxuICAgIGdldCBwZXJzb25uZWxzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzb25uZWxzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IHBlcnNvbm5lbHModmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9wZXJzb25uZWxzID0gdmFsO1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyUGVyc29ubmVscyA9IHRoaXMuX3BlcnNvbm5lbHM7XHJcbiAgICAgICAgICAgIHRoaXMuY29weVBlcnNvbm5lbHMgPSB0aGlzLl9wZXJzb25uZWxzO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNvcHlQZXJzb25uZWxzID0gdGhpcy5fcGVyc29ubmVscztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5Lq65LqL5by556qX5YiX6KGo5pWw5o2uXHJcbiAgICBwcml2YXRlIF9yZXBseVVzZXI7XHJcblxyXG4gICAgZ2V0IHJlcGx5VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVwbHlVc2VyO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IHJlcGx5VXNlcih2YWwpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcGx5VXNlciA9IHZhbDtcclxuICAgICAgICAgICAgaWYodGhpcy5fcmVwbHlVc2VyWydpZCddKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yRm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfYXR0YWNoRmlsZXM6IEZVcGxvYWRGaWxlRXh0ZW5kW107XHJcbiAgICBnZXQgYXR0YWNoRmlsZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F0dGFjaEZpbGVzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgc2V0IGF0dGFjaEZpbGVzKHZhbCkge1xyXG4gICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoRmlsZXMgPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOaWsOW7uui/mOaYr+e7tOaKpOiHquWumuS5ieinkuiJslxyXG4gICAgLy8gQE91dHB1dCgpIGN1c3RvbUdyb3VwQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDlr7nlpJbmmrTpnLLmlbDmja5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3Rpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICAvLyDpgInkuK3nmoTooYxcclxuICAgIEBPdXRwdXQoKSBsaW5lRGF0YUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgLy8g5a+55aSWXHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFZhbHVlQ29uZmlnPigpO1xyXG4gICAgLyoqIOmZhOS7tumihOiniCAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVQcmV2aWV3ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOmZhOS7tuWIoOmZpCAqL1xyXG4gICAgQE91dHB1dCgpIGZpbGVSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgZmlsZVVwbG9hZERvbmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcGVyc29ubmVsU2VhcmNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGdldE91Z1VzZXJzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQFZpZXdDaGlsZCgnZWRpdG9yJykgZWRpdG9yO1xyXG4gICAgQFZpZXdDaGlsZCgncGVyc29uTW9kYWwnKSBwZXJzb25Nb2RhbDtcclxuICAgIC8vIEBWaWV3Q2hpbGQoJ3NlYXJjaElucHV0Jykgc2VhcmNoSW5wdXQ7XHJcbiAgICAvLyDlrqHmibnmhI/op4FcclxuICAgIHRleHRWYWx1ZTogc3RyaW5nID0gJyc7XHJcbiAgICAvLyDmmoLlrZjmlofmnKzmoYbnmoTovpPlhaXvvIzop6PlhrPnhKbngrnpl67pophcclxuICAgIHRlbXBUZXh0VmFsdWU6IHN0cmluZztcclxuICAgIC8vIOaaguWtmOS6uuWRmOS/oeaBr1xyXG4gICAgdGVtcFBlcnNvbm5lbHNWYWx1ZTogc3RyaW5nID0gJyc7XHJcbiAgICAvLyDmmoLlrZjpg6jpl6hcclxuICAgIHRlbXBTZWN0aW9uVmFsdWU6IHN0cmluZyA9ICcnO1xyXG4gICAgLy8g5pCc57Si5Lq65LqL566h55CG5by556qXXHJcbiAgICBwZXJzb25Nb2RhbFZpc2libGUgPSBmYWxzZTtcclxuICAgIC8vIOmAieaLqeimgeWPkemAgeeahOS6uuWRmOWIl+ihqFxyXG4gICAgc2VsZWN0ZWRQZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICAvLyDpgInmi6nopoHlj5HpgIHnmoTpg6jpl6hcclxuICAgIHNlbGVjdGVkU2VjdGlvbjogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgLy8g5pCc57Si5paH5pys5qGG5Lit57uR5a6a55qE5YC8XHJcbiAgICBwZXJzb25uZWxUZXh0O1xyXG4gICAgLy8g5pqC5a2Y5Lq65ZGY5L+h5oGv77yM55So5LqO5pCc57SiXHJcbiAgICBjb3B5UGVyc29ubmVsczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgaW5uZXJQZXJzb25uZWxzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICBlbDogRWxlbWVudFJlZjtcclxuICAgIC8vIOmBv+WFjemHjeWkjei+k+WFpeeahHRva2VuXHJcbiAgICB0b2tlbjogYm9vbGVhbjtcclxuICAgIHJlbGF0aXZlVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcGVybWlzc2lvbjogYW55O1xyXG4gICAgLy/kuIrkvKDpmYTku7bmmK/lkKbmmL7npLpcclxuICAgIGF0dGFjaEZpbGVzTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICBwYWdlU2l6ZTpudW1iZXIgPSAyMDtcclxuICAgIHNlYXJjaFBlcnNvbm5lbExpc3Q6YW55ID0ge307XHJcbiAgICBzaG93U2VhcmNoTGlzdDpib29sZWFuID0gZmFsc2U7XHJcbiAgICBwZXJtaXNzaW9uTGlzdDogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgbG9jYWxlU2VydmljZTogTG9jYWxlU2VydmljZTtcclxuICAgIGdyb3VwSWNvbiA9ICc8c3BhbiBjbGFzcz1cImYtaWNvbiBmLWljb24tc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgICAgIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXHJcbiAgICApIHsgXHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oZG9jdW1lbnQsICdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBzZWxmLnBlcnNvbk1vZGFsVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWxmLnJlbGF0aXZlVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRoaXMuY29weVBlcnNvbm5lbHMgPSB0aGlzLnBlcnNvbm5lbHM7XHJcbiAgICAgICAgdGhpcy5lbCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbkxpc3QgPSBbXHJcbiAgICAgICAgICAgIHsgdmFsdWU6ICdBTEwnLCB0ZXh0OiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5hbGwnKSB9LFxyXG4gICAgICAgICAgICB7IHZhbHVlOiAnUkVMQVRFRCcsIHRleHQ6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLnJlbGF0ZWQnKSB9XHJcbiAgICAgICAgXVxyXG4gICAgICAgIHRoaXMucGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbkxpc3RbMF07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyBtYXhVcGxvYWRzOiAzLCBtYXhGaWxlU2l6ZTogMTAyNDAsIGFsbG93ZWRDb250ZW50VHlwZXM6IFsnLmpwZycsICcucGRmJ10gfTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAucGxhY2Vob2xkZXInKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleS4qumZhOS7tuS4iuS8oOWujOaIkFxyXG4gICAgICogQHBhcmFtIGV2IFxyXG4gICAgICovXHJcbiAgICBmVXBsb2FkRG9uZUhhbmRsZXIoZXYpIHtcclxuICAgICAgICB0aGlzLmZpbGVVcGxvYWREb25lLmVtaXQoZXYpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDkuIrkvKDpmYTku7bkuK3ljZXkuKrpmYTku7bliKDpmaTlrozmiJBcclxuICAgICAqIEBwYXJhbSBldiBcclxuICAgICAqL1xyXG4gICAgZlVwbG9hZFJlbW92ZWRIYW5kbGVyKGV2KSB7XHJcbiAgICAgICAvLyBjb25zb2xlLmxvZygnZlVwbG9hZFJlbW92ZWRIYW5kbGVyJyk7XHJcbiAgICAgICAvLyBjb25zb2xlLmxvZyhldik7XHJcbiAgICB9XHJcbiAgICAvKirpmYTku7bliJfooajkuK3pooTop4ggKi9cclxuICAgIGZpbGVQcmV2aWV3RXZlbnRIYW5kbGVyKGluZm8pIHtcclxuICAgICAgICB0aGlzLmZpbGVQcmV2aWV3LmVtaXQoaW5mbyk7XHJcbiAgICB9XHJcbiAgICAvKirpmYTku7bliJfooajkuK3liKDpmaQgKi9cclxuICAgIGZpbGVSZW1vdmVFdmVudEhhbmRsZXIoZmlsZSkge1xyXG4gICAgICAgIHRoaXMuZmlsZVJlbW92ZS5lbWl0KGZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaWh+acrOahhuWkseWOu+eEpueCueinpuWPkVxyXG4gICAgc2V0VGV4dFZhbHVlKGUgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgdGhpcy50ZW1wVGV4dFZhbHVlID0gZS50YXJnZXQuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSA9IHRoaXMudGVtcFRleHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgKHRoaXMudGVtcFRleHRWYWx1ZSkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnRleHRWYWx1ZSA9IHRoaXMudGVtcFRleHRWYWx1ZVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAodGhpcy50ZW1wUGVyc29ubmVsc1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFZhbHVlICs9IHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy50ZW1wU2VjdGlvblZhbHVlKXtcclxuICAgICAgICAgICAgdGhpcy50ZXh0VmFsdWUgKz0gdGhpcy50ZW1wU2VjdGlvblZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnRlbXBQZXJzb25uZWxzVmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnRlbXBTZWN0aW9uVmFsdWUgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICAvLyDnm5HlkKzplK7nm5jkuovku7YsIOS4u+imgeaYr+eUqOS6juWIoOmZpEDkurpcclxuICAgIGxpc3RlbkVkaXRvclZhbHVlQ2hhbmdlKGUpIHtcclxuICAgICAgICB0aGlzLnRlbXBUZXh0VmFsdWUgPSBlLnRhcmdldC5pbm5lckhUTUw7XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBlLnRhcmdldC5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbklkID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjaGlsZHJlbklkLnB1c2goY2hpbGRyZW5baV0uaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5mb3JFYWNoKChwZXJzb25uZWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW5JZC5pbmNsdWRlcyhwZXJzb25uZWxbdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb24uZm9yRWFjaCgoc2VjdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbklkLmluY2x1ZGVzKHNlY3Rpb25bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRlbXBUZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50ZW1wVGV4dFZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pCc57Si5Lq65ZGYXHJcbiAgICAgKi9cclxuICAgIHNlcmFjaFBlcnNvbm5lbCgpIHtcclxuICAgICAgICAvLyBpZiAodGhpcy5wZXJzb25uZWxUZXh0KSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzID0gdGhpcy5jb3B5UGVyc29ubmVscy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZihpdGVtW3RoaXMucGVyc29ubmVsc0Rpc3BsYXlLZXldKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gaXRlbVt0aGlzLnBlcnNvbm5lbHNEaXNwbGF5S2V5XS5pbmRleE9mKHRoaXMucGVyc29ubmVsVGV4dCkgIT09IC0xO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmNvcHlQZXJzb25uZWxzO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZih0aGlzLnBlcnNvbm5lbFRleHQpe1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTZWFyY2hMaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hEYXRhKHRoaXMucGVyc29ubmVsVGV4dCwwKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICAgICAgaWYoZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJzXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFBlcnNvbm5lbExpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGVyc29uTW9kYWxQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnNlYXJjaElucHV0Lm5hdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgICAgIC8v5pqC5pe25rOo6YeK5o6J5pyN5Yqh5Zmo56uv5p+l6K+iXHJcbiAgICAgICAgLy8gdGhpcy5wZXJzb25uZWxTZWFyY2guZW1pdCh0aGlzLnBlcnNvbm5lbFRleHQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLkuIvkuIDpobVcclxuICAgICAqL1xyXG4gICAgZ2V0TW9yZVNlYXJjaERhdGEoKXtcclxuICAgICAgICB0aGlzLmdldFNlYXJjaERhdGEodGhpcy5wZXJzb25uZWxUZXh0LHRoaXMuc2VhcmNoUGVyc29ubmVsTGlzdC5wYWdlSW5kZXggKyAxKS5zdWJzY3JpYmUoZD0+e1xyXG4gICAgICAgICAgICBpZihkLmhhc093blByb3BlcnR5KFwidXNlcnNcIikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0LnBhZ2VJbmRleCA9IGRbJ3BhZ2VJbmRleCddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0Wyd1c2VycyddID0gWy4uLnRoaXMuc2VhcmNoUGVyc29ubmVsTGlzdFsndXNlcnMnXSwuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaERhdGEodGV4dDpzdHJpbmcscGFnZUluZGV4Om51bWJlcixwYWdlU2l6ZTpudW1iZXIgPSB0aGlzLnBhZ2VTaXplKXtcclxuICAgICAgICBpZih0aGlzLnBlcnNvblNlYXJjaFVybCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMucGVyc29uU2VhcmNoVXJsfT9wYXJhbT0ke3RleHR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgICAgIC8vcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwZXJzb25uZWxDaGVja2VkKGl0ZW0pe1xyXG4gICAgICAgIGl0ZW0uYWN0aXZlID0gIWl0ZW0uYWN0aXZlO1xyXG4gICAgICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzID0gdGhpcy5pbm5lclBlcnNvbm5lbHMubWFwKG8gPT4gKHsgLi4ubyB9KSk7XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB0aGlzLmFwcGVuZFBlcnNvbm5lbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlop7liqBA5Lq65ZGYXHJcbiAgICBhcHBlbmRQZXJzb25uZWxzKCkge1xyXG4gICAgICAgIGxldCBzZWxlY3RlZExpc3QgPSBbXTtcclxuICAgICAgICBpZighdGhpcy5zaG93U2VhcmNoTGlzdCl7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkTGlzdCA9IHRoaXMuaW5uZXJQZXJzb25uZWxzLmZpbHRlcihpdGVtID0+IGl0ZW0uYWN0aXZlID09PSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZWN0ZWRMaXN0ID0gdGhpcy5zZWFyY2hQZXJzb25uZWxMaXN0Wyd1c2VycyddLmZpbHRlcihpdGVtID0+IGl0ZW0uYWN0aXZlID09PSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRQZXJzb25uZWwoc2VsZWN0ZWRMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldFBlcnNvbm5lbHMoKTtcclxuICAgICAgICB0aGlzLnNldFRleHRWYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucGVyc29uTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvL+mrmOe6p+aQnOe0ouS6uuWRmOa3u+WKoFxyXG4gICAgYXBwZW5kUGVyc29ubmVsc0xpc3QobGlzdERhdGEpIHtcclxuICAgICAgICBpZiAobGlzdERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUGVyc29ubmVsKGxpc3REYXRhLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGV4dFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgICAvL+W+queOr+WinuWKoOS6uuWRmFxyXG4gICAgYXBwZW5kUGVyc29ubmVsKGxpc3REYXRhLCBleHRlcm5hbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGlzdERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzLmxlbmd0aCAmJiB0aGlzLl9pc0luQXJyYXkoaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSwgdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleSwgdGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2lmICghZXh0ZXJuYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcFBlcnNvbm5lbHNWYWx1ZSArPSAnPGEgbmFtZT1cInBlcnNvbm5lbFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIgY2xhc3M9XCJhdC11c2VyXCIgaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIiB1c2VyaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIj5AJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV0gKyAnPC9hPiZuYnNwOyc7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnRlbXBQZXJzb25uZWxzVmFsdWUgKz0gJzxhIG5hbWU9XCJwZXJzb25uZWxcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIGNsYXNzPVwiYXQtdXNlclwiIGlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCIgdXNlcmlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCI+QCcgKyBpdGVtW3RoaXMucmVwbHlQZXJzb25uZWxzRGlzcGxheUtleV0gKyAnPC9hPic7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGVyc29ubmVscy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg6YOo6ZeoXHJcbiAgICAgKiBAcGFyYW0gbGlzdERhdGEgXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZFNlY3Rpb25MaXN0KGxpc3REYXRhKXtcclxuICAgICAgICBpZihsaXN0RGF0YS5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZFNlY3Rpb24obGlzdERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFRleHRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZFNlY3Rpb24obGlzdERhdGEsKSB7XHJcbiAgICAgICAgbGlzdERhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTZWN0aW9uLmxlbmd0aCAmJiB0aGlzLl9pc0luQXJyYXkoaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSwgdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleSwgdGhpcy5zZWxlY3RlZFNlY3Rpb24pKSB7cmV0dXJuO30gXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wU2VjdGlvblZhbHVlICs9ICc8YSBuYW1lPVwib3JnXCIgY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIiBjbGFzcz1cImF0LW9yZ1wiIGlkPVwiJyArIGl0ZW1bdGhpcy5wZXJzb25uZWxzUHJpbWFyeUtleV0gKyAnXCIgb3JnaWQ9XCInICsgaXRlbVt0aGlzLnBlcnNvbm5lbHNQcmltYXJ5S2V5XSArICdcIj5AJyArIGl0ZW1bJ25hbWUnXSArICc8L2E+Jm5ic3A7JztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9uLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDliKTmlq3mmK/lkKblnKjmlbDnu4RcclxuICAgIHByaXZhdGUgX2lzSW5BcnJheSh2YWx1ZTogYW55LCBmaWVsZEluQXJyYXk6IHN0cmluZywgYXJyYXk6IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCAhZmllbGRJbkFycmF5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbmRJbmRleChpdGVtID0+IHZhbHVlID09PSBpdGVtW2ZpZWxkSW5BcnJheV0pID09PSAtMSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFs+mXreS6uuS6i+euoeeQhuW8ueeql1xyXG4gICAgICovXHJcbiAgICByZXNldFBlcnNvbm5lbHMoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGVyc29uTW9kYWxWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbm5lclBlcnNvbm5lbHMgPSB0aGlzLmNvcHlQZXJzb25uZWxzO1xyXG4gICAgICAgIGlmKHRoaXMuaW5uZXJQZXJzb25uZWxzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHRoaXMuaW5uZXJQZXJzb25uZWxzLmZvckVhY2goaXRlbSA9PiBpdGVtLmFjdGl2ZSA9IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZXJzb25uZWxUZXh0ID0gJyc7XHJcbiAgICAgICAgLy8gdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5omT5byA5Lq65ZGY566h55CGXHJcbiAgICAgKiBAcGFyYW0gZSDkuovku7ZcclxuICAgICAqL1xyXG4gICAgb3Blbk1vZGFsUGVyc29uKGUpIHtcclxuICAgICAgICB0aGlzLnBlcnNvbk1vZGFsVmlzaWJsZSA9ICF0aGlzLnBlcnNvbk1vZGFsVmlzaWJsZTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy5wZXJzb25Nb2RhbFZpc2libGUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQZXJzb25Nb2RhbFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAwKTtcclxuICAgICAgICAvLyB0aGlzLmdldFBlcnNvbm5lbExpc3QoKTtcclxuICAgICAgICB0aGlzLnN0b3BCdWJibGUoZSk7XHJcbiAgICB9XHJcbiAgICBzZXRQZXJzb25Nb2RhbFBvc2l0aW9uKCl7XHJcbiAgICAgICAgbGV0IHdpbkggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgbGV0IE1vZGFsQm90dG9tID0gdGhpcy5wZXJzb25Nb2RhbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcclxuICAgICAgICBpZih3aW5IIDwgTW9kYWxCb3R0b20pe1xyXG4gICAgICAgICAgICB0aGlzLnBlcnNvbk1vZGFsLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW5Nb2RhbFBlcm1pc3Npb24oZSkge1xyXG4gICAgICAgIHRoaXMucmVsYXRpdmVWaXNpYmxlID0gIXRoaXMucmVsYXRpdmVWaXNpYmxlO1xyXG4gICAgICAgIHRoaXMuc3RvcEJ1YmJsZShlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJk+W8gOS4iuS8oOmZhOS7tlxyXG4gICAgICovXHJcbiAgICBvcGVuTW9kYWxGaWxlKGUpIHtcclxuICAgICAgICB0aGlzLmF0dGFjaEZpbGVzTW9kYWxWaXNpYmxlID0gIXRoaXMuYXR0YWNoRmlsZXNNb2RhbFZpc2libGU7XHJcbiAgICAgICAgdGhpcy5zdG9wQnViYmxlKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmYu+atouWGkuazoVxyXG4gICAgc3RvcEJ1YmJsZShlKSB7XHJcbiAgICAgICAgaWYgKGUgJiYgZS5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmj5DkuqTor4Tor61cclxuICAgICAqL1xyXG4gICAgc3VibWl0QXBwcm92YWwoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRleHRWYWx1ZSkge1xyXG4gICAgICAgICAgICBsZXQgbm90RW1wdHlUZXh0ID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdkaXNjdXNzaW9uR3JvdXAubm90RW1wdHknKTtcclxuICAgICAgICAgICAgaWYobm90RW1wdHlUZXh0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcihub3RFbXB0eVRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVkaXRBdHRhY2hGaWxlczogZWRpdEF0dGFjaEZpbGVbXSA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmF0dGFjaEZpbGVzICYmIHRoaXMuYXR0YWNoRmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoRmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9IGZpbGVbJ2lkJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGZpbGVbJ25hbWUnXSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplID0gZmlsZVsnc2l6ZSddLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhSWQgPSBmaWxlWydleHRlbmQnXVsnbWV0YWRhdGFJZCddO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF0dGFjaEZpbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhSWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVkaXRBdHRhY2hGaWxlcy5wdXNoKGF0dGFjaEZpbGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoe1xyXG4gICAgICAgICAgICBtc2dJbmZvOiBNc2dJbmZvLkNvbmZpcm0sXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dFZhbHVlLFxyXG4gICAgICAgICAgICBtYWlsVG9zOiB0aGlzLnNlbGVjdGVkUGVyc29ubmVscyxcclxuICAgICAgICAgICAgbWFpbFRvU2VjdGlvbnM6IHRoaXMuc2VsZWN0ZWRTZWN0aW9uLFxyXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiB0aGlzLnBlcm1pc3Npb24udmFsdWUsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiAodGhpcy5yZXBseVVzZXIgJiYgdGhpcy5yZXBseVVzZXIuaGFzT3duUHJvcGVydHkoJ2lkJykpID8gdGhpcy5yZXBseVVzZXIuaWQgOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRhY2hGaWxlczogZWRpdEF0dGFjaEZpbGVzLmxlbmd0aCA/IGVkaXRBdHRhY2hGaWxlcyA6IG51bGxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRleHRWYWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQZXJzb25uZWxzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb24gPSBbXTtcclxuICAgICAgICB0aGlzLmF0dGFjaEZpbGVzID0gW107XHJcbiAgICAgICAgdGhpcy5yZXBseVVzZXIgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgbXNnSW5mbzogTXNnSW5mby5DYW5jZWwsXHJcbiAgICAgICAgICAgIHRleHQ6IG51bGwsXHJcbiAgICAgICAgICAgIG1haWxUb3M6IFtdLFxyXG4gICAgICAgICAgICBtYWlsVG9TZWN0aW9uczogW10sXHJcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IG51bGwsXHJcbiAgICAgICAgICAgIHBhcmVudElkOiBudWxsLFxyXG4gICAgICAgICAgICBhdHRhY2hGaWxlczogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGV4dFZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFBlcnNvbm5lbHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoRmlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlcGx5VXNlciA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoq5L+u5pS55p+l55yL5p2D6ZmQICovXHJcbiAgICBjaGFuZ2VQZXJtaXNzaW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB0aGlzLnBlcm1pc3Npb25MaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5yZWxhdGl2ZVZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8v6I635b6X54Sm54K5XHJcbiAgICBlZGl0b3JGb2N1cygpIHtcclxuICAgICAgICB0aGlzLmVkaXRvci5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICAvLyBjdXN0b21Hcm91cENoYW5nZVBhcihldmVudCl7XHJcbiAgICAvLyAgICAgdGhpcy5jdXN0b21Hcm91cENoYW5nZS5lbWl0KGV2ZW50KTtcclxuICAgIC8vIH1cclxuICAgIC8qKlxyXG4gICAgICog6auY57qn5Lq65ZGY54K556Gu6K6kXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGlvbnNDaGFuZ2VQYXIoZXZlbnQpIHtcclxuICAgICAgICAvL3RoaXMucmVzZXRQZXJzb25uZWxzKCk7XHJcbiAgICAgICAgaWYoZXZlbnQuZGF0YS51c2Vycy5sZW5ndGgpe1xyXG4gICAgICAgICAgICBsZXQgdXNlckxpc3QgPSBbXTtcclxuICAgICAgICAgICAgZXZlbnQuZGF0YS51c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXNlckxpc3QucHVzaCh1c2VyLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRQZXJzb25uZWxzTGlzdCh1c2VyTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGV2ZW50LmRhdGEuc2VjdGlvbi5sZW5ndGgpe1xyXG4gICAgICAgICAgICBsZXQgc2VjdGlvbkxpc3QgPSBbXTtcclxuICAgICAgICAgICAgZXZlbnQuZGF0YS5zZWN0aW9uLmZvckVhY2goc2VjID0+IHtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25MaXN0LnB1c2goc2VjLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRTZWN0aW9uTGlzdChzZWN0aW9uTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KGV2ZW50KTtcclxuICAgIH1cclxuICAgIC8qKumrmOe6p+S6uuWRmOS4remAieS4reafkOihjCAqL1xyXG4gICAgbGluZURhdGFDaGFuZ2VQYXIoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmxpbmVEYXRhQ2hhbmdlLmVtaXQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgLyoq6I635b6X5Y2g5L2N5aS05YOPICovXHJcbiAgICBnZXRBdmF0YXIoaXRlbSkge1xyXG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV0pIHtcclxuICAgICAgICAgICAgbGV0IHN0ciA9IGl0ZW1bdGhpcy5wZXJzb25uZWxzRGlzcGxheUtleV07XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSAyLCBzdHIubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3VnVXNlcnMoZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuZ2V0T3VnVXNlcnMuZW1pdChldmVudCk7XHJcbiAgICB9XHJcbn0iXX0=