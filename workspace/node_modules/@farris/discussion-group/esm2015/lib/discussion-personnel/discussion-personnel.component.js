/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Renderer2, NgZone, Output, EventEmitter, ChangeDetectorRef, Injector } from '@angular/core';
import { of, forkJoin, Subject } from 'rxjs';
import { HttpClient } from '@angular/common/http';
import { LocaleService } from '@farris/ui-locale';
import { LoadingService } from '@farris/ui-loading';
import { debounceTime } from 'rxjs/operators';
import { WEBAPI_PREFIX_TOKEN } from '@farris/ui-common';
export class DiscussionPersonnelComponent {
    /**
     * @param {?} renderer
     * @param {?} elementRef
     * @param {?} ngZone
     * @param {?} http
     * @param {?} cd
     * @param {?} injector
     */
    constructor(renderer, elementRef, ngZone, http, cd, injector) {
        this.renderer = renderer;
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.http = http;
        this.cd = cd;
        this.injector = injector;
        // 操作列表或者分组所需要的主键字段
        this.listIdField = "id";
        // 列表中显示的字段
        this.listDisplayText = "userName";
        // 分层获取组织的链接
        // 使用方式 /api/runtime/sys/v1.0/sysOrgs?param={"parentId":"afa5ee9b-f9ba-2927-f9ce-2a30369267e9"}
        this.urlGetOrgByLayer = "/api/runtime/sys/v1.0/sysOrgs";
        // 新建还是维护自定义角色
        // @Output() customGroupChange = new EventEmitter<any>();
        // 对外暴露数据
        this.selectionsChange = new EventEmitter();
        // 选中的行
        this.lineDataChange = new EventEmitter();
        this.openDialog = new EventEmitter();
        this.ougUsers = new EventEmitter();
        this.loadingInstance = null;
        // 右侧项
        this.selections = [];
        this.selectedSections = [];
        this.selectedUsers = [];
        // 最重要显示的人员信息
        this.finalText = '';
        this.sectionDataTree = [];
        this.sectionDataTiled = [];
        this.currentSectionData = [];
        this.currentSection = {};
        this.currentSectionPerson = {};
        this.currentSectionId = '';
        this.sectionCrumbs = [];
        this.pageSize = 20;
        this.showSearchList = false;
        this.crumbsEllipsis = false;
        this.searchUserList = {};
        this.selectEmployee = "选择员工";
        this.placeholder = "请输入员工姓名搜索";
        this.allOrg = "全部组织";
        this.groupIcon = '<span class="f-icon f-icon-search"></span>';
        // 标记请求
        this.recordGetUserSubscribe = null;
        // 查询变化
        this.searchTextChangeSubject = new Subject();
        this.errorText = '';
        this.perfixStr = '';
        this.localeService = this.injector.get(LocaleService);
        this.loadingSer = this.injector.get(LoadingService);
        if (WEBAPI_PREFIX_TOKEN) {
            this.perfixStr = this.injector.get(WEBAPI_PREFIX_TOKEN, '');
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // let sectionDataTrees = this.initsectionData(this.sectionData,'');
        this.allOrg = this.localeService.getValue('discussionGroup.allOrg');
        /** @type {?} */
        let sectionDataTrees = this.initSectionData(this.sectionData, '');
        // this.sectionSort(sectionDataTrees);
        // if(sectionDataTrees.length>1){
        /** @type {?} */
        let sectionParent = [
            {
                data: {
                    id: 'discussionParent',
                    code: 'parent',
                    name: this.allOrg,
                    layer: 0,
                    parentId: "",
                    sortOrder: 1,
                    path: "",
                },
                children: [],
                personnels: {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                },
                parent: null,
                parents: [],
                parentsArr: [],
                checked: false
            }
        ];
        sectionParent[0].children = sectionDataTrees;
        sectionParent[0].children.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => a.data['sortOrder'] - b.data['sortOrder']));
        this.initSectionTree(sectionParent[0].children);
        this.sectionDataTree = sectionParent;
        // }
        // else{
        //     this.sectionDataTree = sectionDataTrees;
        // }
        //console.log(this.sectionDataTree);
        if (this.sectionDataTree && this.sectionDataTree.length) {
            // 如果有组织树的数据，打平成数组数据
            this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);
        }
        /**
         * 当前界面上的组织节点完整树数据
         * {
         *    checked:false,组织是否选中
         *    children:[],组织的子部门
         *    data:{ 来自于从服务器端返回的数据结构
         *      id:组织id,
         *      code:组织code,
         *      name:组织名称
         *      layer:组织层级
         *      parentId:父节点
         *      ....
         *      },
         *    parents:[],父节点Id
         *    parentsArr:[{id:'组织节点Id',name:'组织节点名称'}],
         *    personnels:{
         *          count:0,
         *          pageCount:,
         *          users:[] 用户信息
         *      }
         * }
         *
         */
        this.currentSection = this.sectionDataTree[0];
        // 面包屑数据[{id:'组织节点Id',name:'组织节点名称'}]
        this.sectionCrumbs = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children[0]['parentsArr'] : [];
        // 当前界面上的组织列表数据
        this.currentSectionData = this.sectionDataTree[0].children.length ? this.sectionDataTree[0].children : [];
        // 当前界面上的组织隶属的组织的数据Id
        this.currentSectionId = this.sectionDataTree[0].data.id;
        // 绑定当人员获取回数据时，执行的操作
        this.getPersonnel(this.currentSectionId, 0).subscribe((/**
         * @param {?} d
         * @return {?}
         */
        (d) => {
            if (d.hasOwnProperty("users")) {
                this.sectionDataTree[0].personnels = d;
                this.currentSectionPerson = this.sectionDataTree[0].personnels;
                // console.log('cur',this.currentSectionPerson);
            }
        }));
        this.selectEmployee = this.localeService.getValue('discussionGroup.selectEmployee');
        this.placeholder = this.localeService.getValue('discussionGroup.placeholder');
        // console.log(this.sectionDataTiled);
        // 窗口打开时再调用也可以 this.dialogOpend();
    }
    /**
     * @param {?} data
     * @param {?=} parentId
     * @param {?=} parentName
     * @return {?}
     */
    initSectionTree(data, parentId = "discussionParent", parentName = this.allOrg) {
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                /** @type {?} */
                let par = {
                    id: parentId,
                    name: parentName
                };
                item.parentsArr.unshift(par);
                item.parents.unshift(parentId);
                if (item.children.length) {
                    this.initSectionTree(item.children);
                }
            }));
        }
    }
    /**
     * 初始化分组数据
     * 传递过来的数据是列表，需要转换成树的层级结构
     * @param {?} data
     * @param {?} parentId
     * @param {?=} parentIdField
     * @param {?=} idField
     * @param {?=} presetParent
     * @return {?}
     */
    initSectionData(data, parentId, parentIdField = 'parentId', idField = 'id', presetParent = null) {
        /** @type {?} */
        const nodes = new Map();
        /** @type {?} */
        const result = [];
        /** @type {?} */
        const unattached = [];
        if (presetParent) {
            nodes.set(presetParent.data.id, presetParent);
        }
        if (data && data.length) {
            data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                /** @type {?} */
                const node = {
                    data: item,
                    children: [],
                    personnels: {},
                    parent: null,
                    parents: [],
                    parentsArr: [],
                    checked: false
                };
                /** @type {?} */
                const id = item[idField];
                nodes.set(id, node);
                /** @type {?} */
                const PID = item[parentIdField];
                // 初始
                if (PID === parentId || PID === null) {
                    result.push(node);
                }
                else {
                    /** @type {?} */
                    const parent = nodes.get(PID);
                    // console.log(parent);
                    if (parent) {
                        /** @type {?} */
                        let par = {
                            id: PID,
                            name: parent.data.name
                        };
                        node['parent'] = PID;
                        node['parents'] = [...parent.parents, PID];
                        node['parentsArr'] = [...parent.parentsArr, par];
                        parent.children.push(node);
                        parent.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        (a, b) => a.data['sortOrder'] - b.data['sortOrder']));
                    }
                    else {
                        unattached.push(node);
                    }
                }
            }));
            if (unattached.length) {
                unattached.forEach((/**
                 * @param {?} unItem
                 * @return {?}
                 */
                unItem => {
                    /** @type {?} */
                    const pid = unItem.data[parentIdField];
                    /** @type {?} */
                    const parent = nodes.get(pid);
                    if (parent) {
                        // 构造数据
                        unItem['parent'] = pid;
                        unItem['parents'] = [...parent.parents, pid];
                        unItem['parentsArr'] = [...parent.parentsArr, {
                                id: pid,
                                name: parent.data.name
                            }];
                        parent.children.push(unItem);
                        parent.children.sort((/**
                         * @param {?} a
                         * @param {?} b
                         * @return {?}
                         */
                        (a, b) => a.data['sortOrder'] - b.data['sortOrder']));
                    }
                }));
            }
        }
        return result;
    }
    /**
     * 所有nodes的子节点转化成数组，并返回数组
     * @param {?} nodes
     * @return {?}
     */
    tileSectionData(nodes) {
        /** @type {?} */
        let r = [];
        this.getAllNodes(nodes, r);
        return r;
    }
    /**
     * 所有nodes的子节点转化成数组，并跟新数组r
     * @param {?} nodes
     * @param {?} r
     * @return {?}
     */
    getAllNodes(nodes, r) {
        nodes.forEach((/**
         * @param {?} n
         * @return {?}
         */
        n => {
            r.push(n);
            if (n.children.length) {
                this.getAllNodes(n.children, r);
            }
        }));
    }
    /**
     * 点击下级
     * @param {?} section
     * @return {?}
     */
    sectionNext(section) {
        // 构造组织节点下面的人员信息，如果没有人员信息，就构造结构，然后发请求获取人员信息
        this.showOrHideLoading(true);
        forkJoin([this.getOrgByLayerHttp(section), this.getPersonByUrlHttp(section)])
            .subscribe((/**
         * @param {?} orgAndPersonDatas
         * @return {?}
         */
        orgAndPersonDatas => {
            this.showOrHideLoading(false);
            // 获取组织数据
            /** @type {?} */
            let getOrgData = orgAndPersonDatas[0];
            if (getOrgData !== false) {
                // 从服务器端真实返回数据,直接在方法内更新section的结构
                this.initSectionData(getOrgData, '', 'parentId', 'id', section);
                // 输入所有组织树的数据，看section变更是否更新
                // 更新数据
                this.sectionDataTiled = this.tileSectionData(this.sectionDataTree);
            }
            // 获取人员数据
            /** @type {?} */
            let getPersonData = orgAndPersonDatas[1];
            if (getPersonData !== false) {
                // 构造数据
                section.personnels = {
                    count: 0,
                    pageCount: 0,
                    pageIndex: 1,
                    pageSize: 0,
                    totalCount: 0,
                    users: []
                };
                if (getPersonData.hasOwnProperty("users")) {
                    section.personnels.count = getPersonData['count'];
                    section.personnels.pageCount = getPersonData['pageCount'];
                    section.personnels.pageIndex = getPersonData['pageIndex'];
                    section.personnels.pageSize = getPersonData['pageSize'];
                    section.personnels.totalCount = getPersonData['totalCount'];
                    section.personnels['users'] = [...section.personnels['users'], ...getPersonData['users']];
                }
                else {
                    section['noPersonnel'] = true;
                }
            }
            this.getNextData(section);
        }));
    }
    /**
     * 获取下级数据
     * 点击的组织对应的是：当前组织节点
     * @param {?} section
     * @return {?}
     */
    getNextData(section) {
        if ((section.children && section.children.length) || (JSON.stringify(section.personnels) !== '{}')) {
            // 如果当前组织节点有下级数据
            /** @type {?} */
            const sec = this.getSectionById(section.data.id);
            if (sec) {
                // 判断当前组织节点，是否勾选全选
                /** @type {?} */
                let secChecked = sec['checked'];
                sec['disabled'] = secChecked ? true : false;
                if (!sec['indeterminate']) {
                    // 当前组织的下一级组织都勾选
                    if (sec.children && sec.children.length) {
                        sec.children.forEach((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            item['checked'] = secChecked;
                            item['indeterminate'] = false;
                            // item['disabled'] = sec['disabled'];
                        }));
                    }
                    ;
                    // 如果有人员，当前人员都勾选
                    if (section.personnels['users'] && section.personnels['users'].length) {
                        section.personnels['users'].forEach((/**
                         * @param {?} user
                         * @return {?}
                         */
                        user => {
                            user['checked'] = secChecked;
                            user['indeterminate'] = false;
                            // user['disabled'] = sec['disabled'];
                        }));
                    }
                }
            }
            /** @type {?} */
            let secParent = {
                id: sec.data.id,
                name: sec.data.name
            };
            // 当前组织的父节点与当前组织节点数据合并
            /** @type {?} */
            let secCrumbs = [...sec['parentsArr'], secParent];
            // 如果当前组织有子节点，获取子节点的父数组，否则，按照上面数据合并获取
            this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : secCrumbs;
            // 新的组织节点是当前组织的子节点
            this.currentSectionData = sec.children.length ? sec.children : [];
            // 记录当前组织节点
            this.currentSection = sec;
            // 记录当前组织节点的数据
            this.currentSectionId = sec.data.id;
            // 当前组织下对应的人员信息
            this.currentSectionPerson = sec.personnels;
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.initCrumbsList();
            }), 0);
            // console.log(this.currentSection);
            this.cd.detectChanges();
        }
        else {
            this.currentSectionPerson = [];
        }
    }
    /**
     * 获取人员接口定义
     * @param {?} ougId
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    getPersonnel(ougId, pageIndex, pageSize = this.pageSize) {
        // let data = {};
        if (this.orgUrl) {
            /** @type {?} */
            const url = `${this.perfixStr}${this.orgUrl}?orgId=${ougId}&pageSize=${pageSize}&pageIndex=${pageIndex}`;
            return this.http.get(url);
            // if(ougId == 'langchao'){
            //     return this.http.get('assets/data/discussionPerson.json');
            // }
            // else if(ougId == 'guoji'){
            //     return this.http.get('assets/data/discussionPerson2.json');
            // }
            // else if(ougId == 'yanfa'){
            //     return this.http.get('assets/data/discussionPerson3.json');
            // }
            // else{
            //     return of(true);
            // }
        }
        else {
            return of(false);
        }
        // return data;
    }
    /**
     * 分层获取数据
     * @private
     * @param {?} section
     * @return {?}
     */
    getOrgByLayerHttp(section) {
        if (!section.data['isDetail'] && (!section.children || section.children.length == 0)) {
            //不是叶子节点，但是子为空
            if (this.urlGetOrgByLayer) {
                /** @type {?} */
                let url = `${this.perfixStr}${this.urlGetOrgByLayer}?param={"parentId":"${section.data.id}"}`;
                return this.http.get(url);
            }
        }
        // 处理过的数据
        return of(false);
    }
    /**
     * 获取人员
     * @private
     * @param {?} section
     * @return {?}
     */
    getPersonByUrlHttp(section) {
        if (JSON.stringify(section.personnels) === '{}' && !section.hasOwnProperty('noPersonnel')) {
            return this.getPersonnel(section.data.id, 0);
        }
        return of(false);
    }
    /**
     * @param {?} id
     * @return {?}
     */
    getSectionById(id) {
        /** @type {?} */
        let section = this.sectionDataTiled.find((/**
         * @param {?} sec
         * @return {?}
         */
        sec => {
            return sec.data.id == id;
        }));
        return section;
    }
    /**
     * 点击面包屑
     * @param {?} crumbs
     * @return {?}
     */
    crumbsClick(crumbs) {
        if (crumbs.id == this.currentSectionId)
            return;
        /** @type {?} */
        const sec = this.getSectionById(crumbs.id);
        this.sectionCrumbs = sec.children.length ? sec.children[0]['parentsArr'] : [];
        this.currentSectionData = sec.children.length ? sec.children : [];
        this.currentSectionId = sec.data.id;
        this.currentSectionPerson = sec.personnels;
        this.currentSection = sec;
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.initCrumbsList();
        }), 0);
    }
    /**
     * 部门或人员状态变化
     * @param {?} event
     * @param {?} section
     * @param {?} type
     * @return {?}
     */
    handleClick(event, section, type) {
        if (this.currentSection.disabled)
            return;
        event.stopPropagation();
        section.checked = !section.checked;
        section['indeterminate'] = false;
        this.setSectionDataChecked();
        if (section.checked) {
            /** @type {?} */
            let selectedData = {
                parent: this.currentSection,
                data: section
            };
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    return;
                }
                else {
                    this.selectedUsers.push(selectedData);
                }
            }
            else if (type == 'section') {
                this.addSection(section);
            }
        }
        else {
            if (type == 'user') {
                if (this._isSelectedInArray(section[this.listIdField], this.listIdField, this.selectedUsers)) {
                    this.selectedUsers.forEach((/**
                     * @param {?} item
                     * @param {?} index
                     * @return {?}
                     */
                    (item, index) => {
                        if (item['data'][this.listIdField] === section[this.listIdField]) {
                            this.selectedUsers.splice(index, 1);
                        }
                    }));
                }
            }
            else if (type == 'section') {
                this.removeSection(section);
            }
        }
        // console.log(this.selectedUsers,this.selectedSections);
    }
    /**
     * @param {?} event
     * @param {?} user
     * @return {?}
     */
    handleSearchClick(event, user) {
        event.stopPropagation();
        user.checked = !user.checked;
        if (user.checked) {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                return;
            }
            else {
                /** @type {?} */
                let selectedData = {
                    parent: null,
                    data: user
                };
                this.selectedUsers.push(selectedData);
            }
        }
        else {
            if (this._isSelectedInArray(user[this.listIdField], this.listIdField, this.selectedUsers)) {
                this.selectedUsers.forEach((/**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */
                (item, index) => {
                    if (item['data'][this.listIdField] === user[this.listIdField]) {
                        this.selectedUsers.splice(index, 1);
                    }
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    setSectionDataChecked() {
        /** @type {?} */
        let curChecked = false;
        /** @type {?} */
        let sec = this.currentSection;
        /** @type {?} */
        let secArray = [];
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            secArray = secArray.concat(sec.children, sec.personnels['users']);
            /** @type {?} */
            let secCheckedList = secArray.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (item.hasOwnProperty('checked') && item['checked']) {
                    return item;
                }
            }));
            /** @type {?} */
            let secIndeList = sec.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (item.hasOwnProperty('indeterminate') && item['indeterminate']) {
                    return item;
                }
            }));
            this.currentSection['indeterminate'] = (secIndeList && secIndeList.length) ? true : false;
            if (secCheckedList && secCheckedList.length) {
                if (secCheckedList.length == secArray.length && sec.personnels.pageIndex >= sec.personnels.pageCount - 1) {
                    curChecked = true;
                }
                else {
                    this.currentSection['indeterminate'] = true;
                }
            }
            else {
                curChecked = false;
            }
            this.currentSection['checked'] = curChecked;
            // console.log(this.currentSection);
        }
        if (this.currentSection.parents.length > 0 && this.currentSection['indeterminate']) {
            this.currentSection.parents.forEach((/**
             * @param {?} par
             * @return {?}
             */
            par => {
                /** @type {?} */
                const parSec = this.getSectionById(par);
                if (parSec) {
                    parSec['indeterminate'] = this.currentSection['indeterminate'];
                }
            }));
        }
    }
    /**
     * @param {?=} status
     * @return {?}
     */
    setChildDisabledStatus(status = true) {
        /** @type {?} */
        let sec = this.currentSection;
        // sec['disabled'] = status;
        if (sec.children || (sec.personnels['users'] && sec.personnels['users'].length)) {
            sec.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item['disabled'] = status;
            }));
            // sec['childDisabled'] = status;
            sec.personnels['users'].forEach((/**
             * @param {?} user
             * @return {?}
             */
            user => {
                user['disabled'] = status;
            }));
        }
    }
    /**
     * 人员查看更多
     * @return {?}
     */
    getMoreData() {
        if (this.currentSectionId) {
            /** @type {?} */
            const sec = this.getSectionById(this.currentSectionId);
            if (sec) {
                this.getPersonnel(this.currentSectionId, sec.personnels.pageIndex + 1).subscribe((/**
                 * @param {?} d
                 * @return {?}
                 */
                (d) => {
                    if (d.hasOwnProperty("users")) {
                        sec.personnels.pageIndex = d['pageIndex'];
                        sec.personnels['users'] = [...sec.personnels['users'], ...d['users']];
                        if (sec.personnels['users'].length) {
                            if (sec['checked']) {
                                sec.personnels['users'].forEach((/**
                                 * @param {?} user
                                 * @return {?}
                                 */
                                user => {
                                    user['checked'] = sec['checked'];
                                }));
                            }
                        }
                        // this.setSectionDataChecked();
                    }
                    this.cd.detectChanges();
                }));
            }
        }
    }
    /**
     * 全选
     * @param {?} event
     * @return {?}
     */
    handleClickAll(event) {
        if (this.currentSection.disabled)
            return;
        if (this.currentSection) {
            this.currentSection['checked'] = !this.currentSection['checked'];
            this.currentSection['indeterminate'] = false;
            /** @type {?} */
            let curChecked = this.currentSection['checked'];
            this.currentSection.children.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                item['checked'] = curChecked;
            }));
            if (JSON.stringify(this.currentSection.personnels) != '{}' && this.currentSection['personnels']['users'].length) {
                this.currentSection['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                user => {
                    user['checked'] = curChecked;
                }));
            }
            if (curChecked) {
                this.addSection(this.currentSection);
            }
            else {
                this.removeSection(this.currentSection);
            }
        }
    }
    /**
     * @param {?} section
     * @return {?}
     */
    addSection(section) {
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            return;
        }
        else {
            this.selectedSections.push(section);
        }
    }
    /**
     * @param {?} section
     * @return {?}
     */
    removeSection(section) {
        if (this._isSelectedInArray(section['data'][this.listIdField], this.listIdField, this.selectedSections)) {
            this.selectedSections.forEach((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            (item, index) => {
                if (item['data'][this.listIdField] === section['data'][this.listIdField]) {
                    this.selectedSections.splice(index, 1);
                }
            }));
        }
    }
    /**
     * 搜索用户
     * @return {?}
     */
    searchUser() {
        if (this.searchText) {
            this.showSearchList = true;
            this.searchTextChangeSubject.next(this.searchText);
        }
        else {
            this.showSearchList = false;
        }
    }
    /**
     * @return {?}
     */
    clearSearch() {
        this.showSearchList = false;
        this.searchText = '';
        this.errorText = '';
        // 取消挂起的请求
        if (this.recordGetUserSubscribe) {
            this.recordGetUserSubscribe.unsubscribe();
            this.recordGetUserSubscribe = null;
        }
        // 清除遮罩
        this.showOrHideLoading(false);
    }
    /**
     * @return {?}
     */
    dialogOpend() {
        this.showOrHideLoading(false);
        this.searchTextChangeSubject = new Subject();
        this.searchTextChangeSubject.pipe(debounceTime(200)).subscribe((/**
         * @param {?} tsearchText
         * @return {?}
         */
        (tsearchText) => {
            this.errorText = '';
            this.showOrHideLoading(true);
            // 记录
            this.recordGetUserSubscribe = this.getSearchData(tsearchText, 0).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            d => {
                this.showOrHideLoading(false);
                if (d.hasOwnProperty("users")) {
                    this.searchUserList = d;
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                // 处理失败
                if (error && error.statusText) {
                    this.errorText = error.statusText;
                }
                else {
                    this.errorText = '出现异常';
                }
                this.showOrHideLoading(false);
            }));
        }));
    }
    /**
     * 搜索人员查看更多
     * @return {?}
     */
    getMoreSearchData() {
        if (this.searchText && this.personSearchUrl) {
            this.getSearchData(this.searchText, this.searchUserList.pageIndex + 1).subscribe((/**
             * @param {?} d
             * @return {?}
             */
            d => {
                if (d.hasOwnProperty("users")) {
                    this.searchUserList.pageIndex = d['pageIndex'];
                    this.searchUserList['users'] = [...this.searchUserList['users'], ...d['users']];
                }
            }));
        }
    }
    /**
     * @param {?} text
     * @param {?} pageIndex
     * @param {?=} pageSize
     * @return {?}
     */
    getSearchData(text, pageIndex, pageSize = this.pageSize) {
        if (this.personSearchUrl) {
            /** @type {?} */
            const url = `${this.perfixStr}${this.personSearchUrl}?param=${text}&pageSize=${pageSize}&pageIndex=${pageIndex}`;
            return this.http.get(url);
            //return this.http.get('assets/data/discussionPerson3.json');
        }
        else {
            return of(true);
        }
    }
    /**
     * 选中人员或组织删除
     * @param {?} data
     * @param {?} type
     * @return {?}
     */
    selectionRemove(data, type) {
        if (!data)
            return;
        if (type == 'user') {
            /** @type {?} */
            let index = this.selectedUsers.findIndex((/**
             * @param {?} user
             * @return {?}
             */
            user => {
                return user.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedUsers.splice(index, 1);
            }
            data.data['checked'] = false;
        }
        else if (type == 'section') {
            /** @type {?} */
            let index = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                return item.data.id == data.data.id;
            }));
            if (index >= 0) {
                this.selectedSections.splice(index, 1);
            }
            data['checked'] = false;
        }
        /** @type {?} */
        let dataParent = null;
        if (type == 'section') {
            dataParent = this.getSectionById(data.parent);
        }
        else if (type == 'user') {
            // bugNum:480649
            if (data['parent']) {
                dataParent = this.getSectionById(data.parent.data.id);
            }
        }
        if (dataParent && type == 'user') {
            // bugNum:480651
            // 如果删除的是用户并且还有父级别
            /** @type {?} */
            let delParentIndex = this.selectedSections.findIndex((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                return item.data.id == dataParent.data.id;
            }));
            if (delParentIndex > -1) {
                return;
            }
        }
        if (dataParent) {
            dataParent['checked'] = false;
            if ((dataParent.children && dataParent.children.length) || (dataParent.personnels.users && dataParent.personnels.users.length)) {
                /** @type {?} */
                let childrens = dataParent.children.filter((/**
                 * @param {?} child
                 * @return {?}
                 */
                child => {
                    return child['checked'];
                }));
                /** @type {?} */
                let users = dataParent.personnels.users.filter((/**
                 * @param {?} user
                 * @return {?}
                 */
                user => {
                    return user['checked'];
                }));
                if ((childrens && childrens.length) || (users && users.length)) {
                    dataParent['indeterminate'] = true;
                }
                else {
                    dataParent['indeterminate'] = false;
                }
                if (dataParent.parents.length > 0) {
                    dataParent.parents.forEach((/**
                     * @param {?} par
                     * @return {?}
                     */
                    par => {
                        /** @type {?} */
                        const parSec = this.getSectionById(par);
                        if ((parSec.children && parSec.children.length) || (parSec.personnels.users && parSec.personnels.users.length)) {
                            /** @type {?} */
                            let parchildrens = parSec.children.filter((/**
                             * @param {?} child
                             * @return {?}
                             */
                            child => {
                                return child['checked'];
                            }));
                            /** @type {?} */
                            let parusers = parSec.personnels.users.filter((/**
                             * @param {?} user
                             * @return {?}
                             */
                            user => {
                                return user['checked'];
                            }));
                            if ((parchildrens && parchildrens.length) || (parusers && parusers.length)) {
                                parSec['indeterminate'] = true;
                            }
                            else {
                                if (dataParent['indeterminate']) {
                                    parSec['indeterminate'] = dataParent['indeterminate'];
                                }
                                else {
                                    parSec['indeterminate'] = false;
                                }
                            }
                        }
                    }));
                }
            }
        }
    }
    /**
     * 删除右侧全部数据
     * @return {?}
     */
    moveAllToLeft() {
        this.selectedUsers.forEach((/**
         * @param {?} user
         * @return {?}
         */
        user => {
            user.data['checked'] = false;
        }));
        this.selectedSections.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            item['checked'] = false;
        }));
        this.sectionDataTiled.forEach((/**
         * @param {?} sec
         * @return {?}
         */
        sec => {
            sec['indeterminate'] = false;
            sec['checked'] = false;
            sec['disabled'] = false;
            if (JSON.stringify(sec.personnels) != '{}' && sec['personnels']['users'].length) {
                sec['personnels']['users'].forEach((/**
                 * @param {?} user
                 * @return {?}
                 */
                user => {
                    user['checked'] = false;
                }));
            }
        }));
        this.selectedUsers = [];
        this.selectedSections = [];
        this.cd.markForCheck();
    }
    /**
     *
     * @param {?} numberType 0：取消；1：确定
     * @return {?}
     */
    returnResult(numberType) {
        this.finalText = '';
        if (numberType) {
            // console.log(this.selectedUsers,this.selectedSections);
            this.selectionsChange.emit({
                info: 'confirm',
                data: {
                    users: this.selectedUsers,
                    section: this.selectedSections
                }
            });
            // this.selections.forEach(item => {
            //     this.finalText += item[this.listDisplayText] + '；';
            // })
        }
        else {
            this.selectionsChange.emit({
                info: 'cancel',
                data: {
                    users: [],
                    section: []
                }
            });
        }
        this.moveAllToLeft();
        this.searchText = '';
        this.searchUser();
        this.personnelDialog.close();
    }
    /**
     *  面包屑列表显示
     * @return {?}
     */
    initCrumbsList() {
        /** @type {?} */
        const crumbsListWidth = this.crumbsList.nativeElement.offsetWidth - 30;
        /** @type {?} */
        const crumbsListItems = this.crumbsList.nativeElement.children;
        /** @type {?} */
        let crumbsListItemWidth = 0;
        if (crumbsListItems && crumbsListItems.length) {
            for (let i = crumbsListItems.length - 1; i >= 0; i--) {
                this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                /** @type {?} */
                let width = crumbsListItems[i].offsetWidth;
                crumbsListItemWidth += width;
                if (crumbsListItemWidth >= crumbsListWidth) {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'none');
                }
                else {
                    this.renderer.setStyle(crumbsListItems[i], 'display', 'flex');
                }
            }
        }
        ;
        if (crumbsListItemWidth >= crumbsListWidth) {
            this.crumbsEllipsis = true;
        }
        else {
            this.crumbsEllipsis = false;
        }
    }
    /**
     * @return {?}
     */
    crumbsMore() {
        if (this.sectionCrumbs && this.sectionCrumbs.length) {
            this.crumbsClick(this.sectionCrumbs[0]);
        }
    }
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    _isInArray(value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item[field])) ? true : false;
    }
    /**
     * @param {?} value
     * @param {?} field
     * @param {?} array
     * @return {?}
     */
    _isSelectedInArray(value, field, array) {
        if (!field || !value) {
            throw new Error('前2个参数必填');
        }
        return array.find((/**
         * @param {?} item
         * @return {?}
         */
        item => value === item['data'][field])) ? true : false;
    }
    /**
     * @return {?}
     */
    closeDialog() {
        this.moveAllToLeft();
        this.clearSearch();
        this.searchUser();
    }
    /**
     * 显示或隐藏正在加载
     * @private
     * @param {?} showOrHide ：true为显示，hide为隐藏
     * @return {?}
     */
    showOrHideLoading(showOrHide) {
        if (!this.discussionContent || !this.loadingSer) {
            return;
        }
        if (showOrHide) {
            // 打开
            if (!this.loadingInstance) {
                this.loadingInstance = this.loadingSer.show({ delay: 500, container: this.discussionContent, type: 1, message: '全力加载中...' });
            }
        }
        else if (this.loadingInstance) {
            // 关闭
            this.loadingSer.close(this.loadingInstance.id);
            this.loadingInstance = null;
        }
    }
}
DiscussionPersonnelComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-discussion-personnel',
                template: "<div class=\"farris-discussion-personnel-wrapper\">\r\n    <button class=\"btn btn-link\" (click)=\"personnelDialog.show()\">{{ 'discussionGroup.advancedQuery' | locale }}</button>\r\n</div>\r\n<ng-template #buttonRef>\r\n    <div class=\"farris-input-wrap mr-auto f-utils-overflow-hidden\" *ngIf=\"errorText\" [title]=\"errorText\">\r\n        <div class=\"farris-feedback f-state-invalid position-static text-ellipse\"\r\n            style=\" white-space: nowrap;text-overflow: ellipsis;overflow: hidden;\">\r\n            <span class=\"f-icon f-icon-message_warning f-feedback-icon mr-2\"></span>{{errorText}}\r\n        </div>\r\n    </div>\r\n    <button class=\"btn btn-secondary\" (click)=\"returnResult(0)\">{{ 'discussionGroup.cancel' | locale }}</button>\r\n    <button class=\"btn btn-primary\" (click)=\"returnResult(1)\">{{ 'discussionGroup.confirm' | locale }}</button>\r\n</ng-template>\r\n<farris-dialog #personnelDialog [buttons]=\"buttonRef\" [width]=\"690\" [height]=\"520\" [resizable]=\"false\" [title]=\"selectEmployee\" (opened)=\"dialogOpend()\" (closed)=\"closeDialog()\">\r\n    <div class=\"f-discussion-dialog-content\" #discussionContent>\r\n        <div class=\"f-discussion-dialog-content-left col-6 d-flex flex-column\">\r\n            <div class=\"f-discussion-personnel-search\">\r\n                <input-group [placeholder]=\"placeholder\" [groupText]=\"groupIcon\" [(ngModel)]=\"searchText\" (clear)=\"clearSearch()\" (valueChange)=\"searchUser()\" (enterHandle)=\"searchUser()\" (clickHandle)=\"searchUser()\"></input-group>\r\n            </div>\r\n            <div class=\"f-discussion-tab-content f-utils-fill d-flex flex-column\" >\r\n                <div class=\"f-discussion-personnel-content f-utils-fill d-flex flex-column\" [ngClass]=\"{'f-discussion-personnel-content-hide': showSearchList}\">\r\n                    <div class=\"f-discussion-personnel-crumbs d-flex\">\r\n                        <ul class=\"crumbs-list d-flex\" #crumbsList [ngClass]=\"{'crumbs-list-padding': crumbsEllipsis}\" *ngIf=\"sectionCrumbs && sectionCrumbs.length\">\r\n                            <li class=\"crumbs-list-item\" *ngFor=\"let crumbs of sectionCrumbs;let first = first;let last = last;\" (click)=\"crumbsClick(crumbs)\"  \r\n                            [ngClass]=\"{'crumbs-list-item-disabled': !(first || !last)}\">\r\n                                <!-- bugNum\uFF1A449399 -->\r\n                                <span class=\"crumbs-text\" [title]=\"crumbs.name\">{{crumbs.name}}</span>\r\n                                <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\" *ngIf=\"first || !last\"></span>\r\n                            </li>\r\n                        </ul>\r\n                        <div class=\"crumbs-list-ellipsis crumbs-list-item\" *ngIf=\"crumbsEllipsis\" (click)=\"crumbsMore()\">\r\n                            <span class=\"crumbs-text\">...</span>\r\n                            <span class=\"crumbs-arrow f-icon f-icon-arrow-chevron-right\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"f-discussion-section-content f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <ul class=\"f-discussion-section-list\">\r\n                                <!-- <li class=\"section-list-item\" *ngIf=\"currentSectionData.length || currentSectionPerson.users.length\" (click)=\"handleClickAll($event)\">\r\n                                    <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"currentSection.checked\" [disabled]=\"currentSection.disabled\" [indeterminate]=\"currentSection.indeterminate\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\">\r\n                                        \u5168\u9009\r\n                                    </div>\r\n                                </li> -->\r\n                                <li class=\"section-list-item\" *ngFor=\"let section of currentSectionData\">\r\n                                    <div class=\"custom-control custom-checkbox custom-control-inline section-list-item-checkbox\" (click)=\"handleClick($event,section,'section')\">\r\n                                        <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"section.checked\" [indeterminate]=\"section.indeterminate\" [disabled]=\"currentSection.disabled\">\r\n                                        <label class=\"custom-control-label\"></label>\r\n                                    </div>\r\n                                    <div class=\"section-list-item-name f-utils-fill\" [attr.data-orgid]=\"section.data.id\" [title]=\"section.data.name\" (click)=\"handleClick($event,section,'section')\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-next\" (click)=\"sectionNext(section)\">\r\n                                        {{ 'discussionGroup.next' | locale }}\r\n                                    </div>\r\n                                </li>\r\n                                <ng-container *ngIf=\"currentSectionPerson\">\r\n                                    <li class=\"section-list-item person-list-item\" *ngFor=\"let person of currentSectionPerson.users\" (click)=\"handleClick($event,person,'user')\">\r\n                                        <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                            <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"person.checked\" [disabled]=\"currentSection.disabled\">\r\n                                            <label class=\"custom-control-label\"></label>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-img\">\r\n                                            <img [src]=\"person.imgData\" alt=\"\" *ngIf=\"person.imgData\">\r\n                                            <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!person.imgData\" [innerHTML]=\"person | avatarHtml\"></div>\r\n                                        </div>\r\n                                        <div class=\"person-list-item-content f-utils-fill\">\r\n                                            <div class=\"section-list-item-name\" [title]=\"person.name\">\r\n                                                {{person.name}}\r\n                                            </div>\r\n                                            <div class=\"section-list-item-tip\">\r\n                                                <!-- {{person.email}} -->\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">{{sectionCrumbs[sectionCrumbs.length - 2].name}}</span>\r\n                                                <span *ngIf=\"sectionCrumbs.length>=2\">/</span>\r\n                                                <span>{{sectionCrumbs[sectionCrumbs.length - 1].name}}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <!-- \u4EBA\u5458\u5217\u8868 -->\r\n                                    </li>\r\n                                    <div class=\"f-discussion-person-list-page\" *ngIf=\"currentSectionPerson['users'] && currentSectionPerson['users'].length\">\r\n                                        <span class=\"section-page-more section-page-text\" *ngIf=\"currentSectionPerson.pageIndex < currentSectionPerson.pageCount-1\" (click)=\"getMoreData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                                        <!-- <span class=\"section-page-end section-page-text\"  *ngIf=\"currentSectionPerson.pageIndex >= currentSectionPerson.pageCount-1\">\u52A0\u8F7D\u5B8C\u6210</span> -->\r\n                                    </div>\r\n                                </ng-container>\r\n                            </ul>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!currentSectionData.length &&(currentSectionPerson.users && !currentSectionPerson.users.length)\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-personnel-search-list f-utils-fill\" [hidden]=\"!showSearchList\">\r\n                    <perfect-scrollbar>\r\n                        <ul class=\"f-discussion-section-list\" *ngIf=\"searchUserList && searchUserList.users && searchUserList.users.length\">\r\n                            <li class=\"section-list-item person-list-item\" *ngFor=\"let user of searchUserList.users\" (click)=\"handleSearchClick($event,user)\">\r\n                                <div class=\"custom-control custom-checkbox  custom-control-inline section-list-item-checkbox\">\r\n                                    <input type=\"checkbox\" class=\"custom-control-input\" [checked]=\"user.checked\">\r\n                                    <label class=\"custom-control-label\"></label>\r\n                                </div>\r\n                                <div class=\"person-list-item-img\">\r\n                                    <img [src]=\"user.imgData\" alt=\"\" *ngIf=\"user.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.imgData\" [innerHTML]=\"user | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"person-list-item-content f-utils-fill\">\r\n                                    <div class=\"section-list-item-name\" [title]=\"user.name\">\r\n                                        {{user.name}}\r\n                                    </div>\r\n                                    <div class=\"section-list-item-tip\">\r\n                                        <span [innerHTML]=\"user | getOrgText:sectionData\"></span>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                            <div class=\"f-discussion-person-list-page\">\r\n                                <span class=\"section-page-more section-page-text\" *ngIf=\"searchUserList.pageIndex < searchUserList.pageCount-1\" (click)=\"getMoreSearchData()\">{{ 'discussionGroup.viewMore' | locale }}</span>\r\n                            </div>\r\n                        </ul>\r\n                        <div class=\"f-discussion-section-list-empty\" *ngIf=\"!searchUserList.users || !searchUserList.users.length\">\r\n                            <span class=\"f-icon f-icon-top_my\"></span>\r\n                            <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyList' | locale }}</span>\r\n                        </div>\r\n                    </perfect-scrollbar>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-discussion-dialog-content-right f-utils-fill d-flex flex-column\">\r\n            <div class=\"f-discussion-selected-personnel f-utils-fill d-flex flex-column\">\r\n                <div class=\"f-discussion-selected-personnel-header\">\r\n                    <div class=\"f-discussion-selected-personnel-header-text\">\r\n                        <span>{{ 'discussionGroup.selected' | locale }}</span>(<span>{{ 'discussionGroup.people' | locale }}</span><span>{{selectedUsers.length}}</span><span>{{ 'discussionGroup.per' | locale }}</span>\uFF0C<span>{{ 'discussionGroup.section' | locale }}</span><span>{{selectedSections.length}}</span><span>{{ 'discussionGroup.pcs' | locale }}</span>)\r\n                    </div>\r\n                    <div class=\"f-discussion-selected-personnel-header-btn\" (click)=\"moveAllToLeft()\">\r\n                        <button class=\"btn btn-link\">{{ 'discussionGroup.emptySelected' | locale }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"f-discussion-selected-personnel-content f-utils-fill d-flex flex-column\">\r\n                    <div class=\"f-discussion-selected-list f-utils-fill\">\r\n                        <perfect-scrollbar>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let user of selectedUsers\">\r\n                                <div class=\"f-discussion-personnel-item-avatar\">\r\n                                    <img [src]=\"user.data.imgData\" alt=\"\" *ngIf=\"user.data.imgData\">\r\n                                    <div class=\"f-discussion-personnel-item-tip\" *ngIf=\"!user.data.imgData\" [innerHTML]=\"user.data | avatarHtml\"></div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{user.data.name}}\r\n                                    </div>\r\n                                    <div class=\"f-discussion-selected-item-tip\" *ngIf=\"user.parent\">\r\n                                        <span *ngIf=\"user.parent.parentsArr.length>=1\">{{user.parent.parentsArr[user.parent.parentsArr.length - 1].name}}</span>\r\n                                            <span *ngIf=\"user.parent.parentsArr.length>=1\">/</span>\r\n                                            <span>{{user.parent.data.name}}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(user,'user')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-selected-item\" *ngFor=\"let section of selectedSections\">\r\n                                <div class=\"f-discussion-selected-item-text f-utils-fill\">\r\n                                    <div class=\"f-discussion-selected-name\">\r\n                                        {{section.data.name}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"f-discussion-selected-item-remove\" (click)=\"selectionRemove(section,'section')\">\r\n                                    <span class=\"f-icon f-icon-close-outline\"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"f-discussion-section-list-empty\" *ngIf=\"!selectedUsers.length && !selectedSections.length\">\r\n                                <span class=\"f-icon f-icon-top_my\"></span>\r\n                                <span class=\"section-list-empty-text\">{{ 'discussionGroup.emptyRight' | locale }}</span>\r\n                            </div>\r\n                        </perfect-scrollbar>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</farris-dialog>\r\n",
                styles: [""]
            }] }
];
/** @nocollapse */
DiscussionPersonnelComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: NgZone },
    { type: HttpClient },
    { type: ChangeDetectorRef },
    { type: Injector }
];
DiscussionPersonnelComponent.propDecorators = {
    listIdField: [{ type: Input }],
    listDisplayText: [{ type: Input }],
    sectionData: [{ type: Input }],
    orgUrl: [{ type: Input }],
    personSearchUrl: [{ type: Input }],
    urlGetOrgByLayer: [{ type: Input }],
    personnelDialog: [{ type: ViewChild, args: ['personnelDialog',] }],
    selectionsChange: [{ type: Output }],
    lineDataChange: [{ type: Output }],
    openDialog: [{ type: Output }],
    ougUsers: [{ type: Output }],
    crumbsList: [{ type: ViewChild, args: ['crumbsList',] }],
    discussionContent: [{ type: ViewChild, args: ['discussionContent',] }]
};
if (false) {
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listIdField;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.listDisplayText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.orgUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personSearchUrl;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.urlGetOrgByLayer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.personnelDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectionsChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.lineDataChange;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.openDialog;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.ougUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.discussionContent;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingInstance;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedSections;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectedUsers;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.finalText;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTree;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionDataTiled;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionData;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSection;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionPerson;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.currentSectionId;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.sectionCrumbs;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.pageSize;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.showSearchList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.crumbsEllipsis;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.searchUserList;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.selectEmployee;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.placeholder;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.allOrg;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.loadingSer;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.groupIcon;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.recordGetUserSubscribe;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.searchTextChangeSubject;
    /** @type {?} */
    DiscussionPersonnelComponent.prototype.errorText;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.perfixStr;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.cd;
    /**
     * @type {?}
     * @private
     */
    DiscussionPersonnelComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1wZXJzb25uZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9kaXNjdXNzaW9uLWdyb3VwLyIsInNvdXJjZXMiOlsibGliL2Rpc2N1c3Npb24tcGVyc29ubmVsL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFlLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsUUFBUSxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQzdLLE9BQU8sRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFnQixPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBT3hELE1BQU0sT0FBTyw0QkFBNEI7Ozs7Ozs7OztJQThEckMsWUFDWSxRQUFtQixFQUNuQixVQUFzQixFQUN0QixNQUFjLEVBQ2QsSUFBZ0IsRUFDaEIsRUFBcUIsRUFDckIsUUFBa0I7UUFMbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUNuQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGFBQVEsR0FBUixRQUFRLENBQVU7O1FBakVyQixnQkFBVyxHQUFXLElBQUks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QStCOztJQUUvQixrREFBdUI7O0lBQ3ZCLHdEQUE2Qjs7SUFDN0IscURBQTBCOztJQUUxQixrREFBa0I7O0lBRWxCLGlEQUF1Qjs7SUFFdkIsdURBQWlDOztJQUNqQyx3REFBa0M7O0lBQ2xDLDBEQUFvQzs7SUFDcEMsc0RBQXlCOztJQUN6Qiw0REFBK0I7O0lBQy9CLHdEQUE4Qjs7SUFDOUIscURBQStCOztJQUMvQixnREFBc0I7O0lBRXRCLHNEQUFnQzs7SUFDaEMsc0RBQWdDOztJQUNoQyxzREFBeUI7O0lBRXpCLHNEQUFnQzs7SUFDaEMsbURBQWtDOztJQUNsQyw4Q0FBd0I7Ozs7O0lBQ3hCLHFEQUFxQzs7Ozs7SUFDckMsa0RBQW1DOztJQUNuQyxpREFBeUQ7Ozs7O0lBRXpELDhEQUFpRDs7Ozs7SUFFakQsK0RBQWdEOztJQUNoRCxpREFBYTs7Ozs7SUFDYixpREFBcUI7Ozs7O0lBRWpCLGdEQUEyQjs7Ozs7SUFDM0Isa0RBQThCOzs7OztJQUM5Qiw4Q0FBc0I7Ozs7O0lBQ3RCLDRDQUF3Qjs7Ozs7SUFDeEIsMENBQTZCOzs7OztJQUM3QixnREFBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgUmVuZGVyZXIyLCBOZ1pvbmUsIEhvc3RCaW5kaW5nLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdG9yLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBvZiwgZm9ya0pvaW4sIFN1YnNjcmlwdGlvbiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZyc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgV0VCQVBJX1BSRUZJWF9UT0tFTiB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtZGlzY3Vzc2lvbi1wZXJzb25uZWwnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2Rpc2N1c3Npb24tcGVyc29ubmVsLmNvbXBvbmVudC5zY3NzJ10sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEaXNjdXNzaW9uUGVyc29ubmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgICAvLyDmk43kvZzliJfooajmiJbogIXliIbnu4TmiYDpnIDopoHnmoTkuLvplK7lrZfmrrVcclxuICAgIEBJbnB1dCgpIGxpc3RJZEZpZWxkOiBzdHJpbmcgPSBcImlkXCI7XHJcbiAgICAvLyDliJfooajkuK3mmL7npLrnmoTlrZfmrrVcclxuICAgIEBJbnB1dCgpIGxpc3REaXNwbGF5VGV4dDogc3RyaW5nID0gXCJ1c2VyTmFtZVwiO1xyXG4gICAgQElucHV0KCkgc2VjdGlvbkRhdGE6IGFueVtdO1xyXG4gICAgLy8g6I635Y+W5Lq65ZGY6ZO+5o6lXHJcbiAgICBASW5wdXQoKSBvcmdVcmw6IHN0cmluZztcclxuICAgIC8vIOS6uuWRmOafpeivoumTvuaOpVxyXG4gICAgQElucHV0KCkgcGVyc29uU2VhcmNoVXJsOiBzdHJpbmc7XHJcbiAgICAvLyDliIblsYLojrflj5bnu4Tnu4fnmoTpk77mjqVcclxuICAgIC8vIOS9v+eUqOaWueW8jyAvYXBpL3J1bnRpbWUvc3lzL3YxLjAvc3lzT3Jncz9wYXJhbT17XCJwYXJlbnRJZFwiOlwiYWZhNWVlOWItZjliYS0yOTI3LWY5Y2UtMmEzMDM2OTI2N2U5XCJ9XHJcbiAgICBASW5wdXQoKSB1cmxHZXRPcmdCeUxheWVyOiBzdHJpbmcgPSBcIi9hcGkvcnVudGltZS9zeXMvdjEuMC9zeXNPcmdzXCI7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgncGVyc29ubmVsRGlhbG9nJykgcGVyc29ubmVsRGlhbG9nO1xyXG4gICAgLy8g5paw5bu66L+Y5piv57u05oqk6Ieq5a6a5LmJ6KeS6ImyXHJcbiAgICAvLyBAT3V0cHV0KCkgY3VzdG9tR3JvdXBDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOWvueWkluaatOmcsuaVsOaNrlxyXG4gICAgQE91dHB1dCgpIHNlbGVjdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIC8vIOmAieS4reeahOihjFxyXG4gICAgQE91dHB1dCgpIGxpbmVEYXRhQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgb3BlbkRpYWxvZyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gICAgQE91dHB1dCgpIG91Z1VzZXJzID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgQFZpZXdDaGlsZCgnY3J1bWJzTGlzdCcpIGNydW1ic0xpc3Q6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdkaXNjdXNzaW9uQ29udGVudCcpIGRpc2N1c3Npb25Db250ZW50OiBFbGVtZW50UmVmO1xyXG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5zdGFuY2UgPSBudWxsO1xyXG4gICAgLy8g5Y+z5L6n6aG5XHJcbiAgICBzZWxlY3Rpb25zOiBhbnlbXSA9IFtdO1xyXG4gICAgc2VsZWN0ZWRTZWN0aW9uczogYW55W10gPSBbXTtcclxuICAgIHNlbGVjdGVkVXNlcnM6IGFueVtdID0gW107XHJcbiAgICAvLyDmkJzntKLmlofmnKxcclxuICAgIHNlYXJjaFRleHQ6IHN0cmluZ1xyXG4gICAgLy8g5pyA6YeN6KaB5pi+56S655qE5Lq65ZGY5L+h5oGvXHJcbiAgICBmaW5hbFRleHQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIHNlY3Rpb25EYXRhVHJlZTogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgc2VjdGlvbkRhdGFUaWxlZDogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgY3VycmVudFNlY3Rpb25EYXRhOiBBcnJheTxhbnk+ID0gW107XHJcbiAgICBjdXJyZW50U2VjdGlvbjogYW55ID0ge307XHJcbiAgICBjdXJyZW50U2VjdGlvblBlcnNvbjogYW55ID0ge307XHJcbiAgICBjdXJyZW50U2VjdGlvbklkOiBzdHJpbmcgPSAnJztcclxuICAgIHNlY3Rpb25DcnVtYnM6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIHBhZ2VTaXplOiBudW1iZXIgPSAyMDtcclxuXHJcbiAgICBzaG93U2VhcmNoTGlzdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgY3J1bWJzRWxsaXBzaXM6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHNlYXJjaFVzZXJMaXN0OiBhbnkgPSB7fTtcclxuXHJcbiAgICBzZWxlY3RFbXBsb3llZTogc3RyaW5nID0gXCLpgInmi6nlkZjlt6VcIjtcclxuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSBcIuivt+i+k+WFpeWRmOW3peWnk+WQjeaQnOe0olwiO1xyXG4gICAgYWxsT3JnOiBzdHJpbmcgPSBcIuWFqOmDqOe7hOe7h1wiO1xyXG4gICAgcHJpdmF0ZSBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBsb2FkaW5nU2VyOiBMb2FkaW5nU2VydmljZTtcclxuICAgIGdyb3VwSWNvbiA9ICc8c3BhbiBjbGFzcz1cImYtaWNvbiBmLWljb24tc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgICAvLyDmoIforrDor7fmsYJcclxuICAgIHByaXZhdGUgcmVjb3JkR2V0VXNlclN1YnNjcmliZTpTdWJzY3JpcHRpb249bnVsbDtcclxuICAgIC8vIOafpeivouWPmOWMllxyXG4gICAgcHJpdmF0ZSBzZWFyY2hUZXh0Q2hhbmdlU3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBlcnJvclRleHQ9Jyc7XHJcbiAgICBwcml2YXRlIHBlcmZpeFN0cj0nJztcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXHJcbiAgICAgICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3JcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubG9jYWxlU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvY2FsZVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlciA9IHRoaXMuaW5qZWN0b3IuZ2V0KExvYWRpbmdTZXJ2aWNlKTtcclxuICAgICAgICBpZihXRUJBUElfUFJFRklYX1RPS0VOKXtcclxuICAgICAgICAgICAgdGhpcy5wZXJmaXhTdHI9IHRoaXMuaW5qZWN0b3IuZ2V0KFdFQkFQSV9QUkVGSVhfVE9LRU4sICcnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy8gbGV0IHNlY3Rpb25EYXRhVHJlZXMgPSB0aGlzLmluaXRzZWN0aW9uRGF0YSh0aGlzLnNlY3Rpb25EYXRhLCcnKTtcclxuICAgICAgICB0aGlzLmFsbE9yZyA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZGlzY3Vzc2lvbkdyb3VwLmFsbE9yZycpO1xyXG4gICAgICAgIGxldCBzZWN0aW9uRGF0YVRyZWVzID0gdGhpcy5pbml0U2VjdGlvbkRhdGEodGhpcy5zZWN0aW9uRGF0YSwgJycpO1xyXG4gICAgICAgIC8vIHRoaXMuc2VjdGlvblNvcnQoc2VjdGlvbkRhdGFUcmVlcyk7XHJcbiAgICAgICAgLy8gaWYoc2VjdGlvbkRhdGFUcmVlcy5sZW5ndGg+MSl7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25QYXJlbnQgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogJ2Rpc2N1c3Npb25QYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6ICdwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuYWxsT3JnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudElkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRPcmRlcjogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICAgICAgICAgIHBlcnNvbm5lbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZUluZGV4OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcnM6IFtdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50czogW10sXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRzQXJyOiBbXSxcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICAgIHNlY3Rpb25QYXJlbnRbMF0uY2hpbGRyZW4gPSBzZWN0aW9uRGF0YVRyZWVzO1xyXG4gICAgICAgIHNlY3Rpb25QYXJlbnRbMF0uY2hpbGRyZW4uc29ydCgoYSwgYik6IG51bWJlciA9PiBhLmRhdGFbJ3NvcnRPcmRlciddIC0gYi5kYXRhWydzb3J0T3JkZXInXSk7XHJcbiAgICAgICAgdGhpcy5pbml0U2VjdGlvblRyZWUoc2VjdGlvblBhcmVudFswXS5jaGlsZHJlbik7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRyZWUgPSBzZWN0aW9uUGFyZW50O1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBlbHNle1xyXG4gICAgICAgIC8vICAgICB0aGlzLnNlY3Rpb25EYXRhVHJlZSA9IHNlY3Rpb25EYXRhVHJlZXM7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zZWN0aW9uRGF0YVRyZWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWN0aW9uRGF0YVRyZWUgJiYgdGhpcy5zZWN0aW9uRGF0YVRyZWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaciee7hOe7h+agkeeahOaVsOaNru+8jOaJk+W5s+aIkOaVsOe7hOaVsOaNrlxyXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25EYXRhVGlsZWQgPSB0aGlzLnRpbGVTZWN0aW9uRGF0YSh0aGlzLnNlY3Rpb25EYXRhVHJlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOW9k+WJjeeVjOmdouS4iueahOe7hOe7h+iKgueCueWujOaVtOagkeaVsOaNrlxyXG4gICAgICAgICAqIHtcclxuICAgICAgICAgKiAgICBjaGVja2VkOmZhbHNlLOe7hOe7h+aYr+WQpumAieS4rVxyXG4gICAgICAgICAqICAgIGNoaWxkcmVuOltdLOe7hOe7h+eahOWtkOmDqOmXqFxyXG4gICAgICAgICAqICAgIGRhdGE6eyDmnaXoh6rkuo7ku47mnI3liqHlmajnq6/ov5Tlm57nmoTmlbDmja7nu5PmnoRcclxuICAgICAgICAgKiAgICAgIGlkOue7hOe7h2lkLFxyXG4gICAgICAgICAqICAgICAgY29kZTrnu4Tnu4djb2RlLFxyXG4gICAgICAgICAqICAgICAgbmFtZTrnu4Tnu4flkI3np7BcclxuICAgICAgICAgKiAgICAgIGxheWVyOue7hOe7h+Wxgue6p1xyXG4gICAgICAgICAqICAgICAgcGFyZW50SWQ654i26IqC54K5XHJcbiAgICAgICAgICogICAgICAuLi4uXHJcbiAgICAgICAgICogICAgICB9LFxyXG4gICAgICAgICAqICAgIHBhcmVudHM6W10s54i26IqC54K5SWRcclxuICAgICAgICAgKiAgICBwYXJlbnRzQXJyOlt7aWQ6J+e7hOe7h+iKgueCuUlkJyxuYW1lOifnu4Tnu4foioLngrnlkI3np7AnfV0sXHJcbiAgICAgICAgICogICAgcGVyc29ubmVsczp7XHJcbiAgICAgICAgICogICAgICAgICAgY291bnQ6MCxcclxuICAgICAgICAgKiAgICAgICAgICBwYWdlQ291bnQ6LFxyXG4gICAgICAgICAqICAgICAgICAgIHVzZXJzOltdIOeUqOaIt+S/oeaBr1xyXG4gICAgICAgICAqICAgICAgfVxyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF07XHJcbiAgICAgICAgLy8g6Z2i5YyF5bGR5pWw5o2uW3tpZDon57uE57uH6IqC54K5SWQnLG5hbWU6J+e7hOe7h+iKgueCueWQjeensCd9XVxyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNydW1icyA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLmNoaWxkcmVuLmxlbmd0aCA/IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLmNoaWxkcmVuWzBdWydwYXJlbnRzQXJyJ10gOiBbXTtcclxuICAgICAgICAvLyDlvZPliY3nlYzpnaLkuIrnmoTnu4Tnu4fliJfooajmlbDmja5cclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uRGF0YSA9IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLmNoaWxkcmVuLmxlbmd0aCA/IHRoaXMuc2VjdGlvbkRhdGFUcmVlWzBdLmNoaWxkcmVuIDogW107XHJcbiAgICAgICAgLy8g5b2T5YmN55WM6Z2i5LiK55qE57uE57uH6Zq25bGe55qE57uE57uH55qE5pWw5o2uSWRcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uSWQgPSB0aGlzLnNlY3Rpb25EYXRhVHJlZVswXS5kYXRhLmlkO1xyXG4gICAgICAgIC8vIOe7keWumuW9k+S6uuWRmOiOt+WPluWbnuaVsOaNruaXtu+8jOaJp+ihjOeahOaTjeS9nFxyXG4gICAgICAgIHRoaXMuZ2V0UGVyc29ubmVsKHRoaXMuY3VycmVudFNlY3Rpb25JZCwgMCkuc3Vic2NyaWJlKChkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0ucGVyc29ubmVscyA9IGQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uUGVyc29uID0gdGhpcy5zZWN0aW9uRGF0YVRyZWVbMF0ucGVyc29ubmVscztcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXInLHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0RW1wbG95ZWUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5zZWxlY3RFbXBsb3llZScpO1xyXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2Rpc2N1c3Npb25Hcm91cC5wbGFjZWhvbGRlcicpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VjdGlvbkRhdGFUaWxlZCk7XHJcbiAgICAgICAgLy8g56qX5Y+j5omT5byA5pe25YaN6LCD55So5Lmf5Y+v5LulIHRoaXMuZGlhbG9nT3BlbmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0U2VjdGlvblRyZWUoZGF0YSwgcGFyZW50SWQgPSBcImRpc2N1c3Npb25QYXJlbnRcIiwgcGFyZW50TmFtZSA9IHRoaXMuYWxsT3JnKSB7XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogcGFyZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFyZW50TmFtZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGl0ZW0ucGFyZW50c0Fyci51bnNoaWZ0KHBhcik7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnBhcmVudHMudW5zaGlmdChwYXJlbnRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTZWN0aW9uVHJlZShpdGVtLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yid5aeL5YyW5YiG57uE5pWw5o2uXHJcbiAgICAgKiDkvKDpgJLov4fmnaXnmoTmlbDmja7mmK/liJfooajvvIzpnIDopoHovazmjaLmiJDmoJHnmoTlsYLnuqfnu5PmnoRcclxuICAgICAqL1xyXG4gICAgaW5pdFNlY3Rpb25EYXRhKGRhdGEsIHBhcmVudElkLCBwYXJlbnRJZEZpZWxkID0gJ3BhcmVudElkJywgaWRGaWVsZCA9ICdpZCcsIHByZXNldFBhcmVudCA9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBub2RlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCB1bmF0dGFjaGVkID0gW107XHJcbiAgICAgICAgaWYgKHByZXNldFBhcmVudCkge1xyXG4gICAgICAgICAgICBub2Rlcy5zZXQocHJlc2V0UGFyZW50LmRhdGEuaWQsIHByZXNldFBhcmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyc29ubmVsczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHNBcnI6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBpdGVtW2lkRmllbGRdO1xyXG4gICAgICAgICAgICAgICAgbm9kZXMuc2V0KGlkLCBub2RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFBJRCA9IGl0ZW1bcGFyZW50SWRGaWVsZF07XHJcbiAgICAgICAgICAgICAgICAvLyDliJ3lp4tcclxuICAgICAgICAgICAgICAgIGlmIChQSUQgPT09IHBhcmVudElkIHx8IFBJRCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2Rlcy5nZXQoUElEKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBQSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJlbnQuZGF0YS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbJ3BhcmVudCddID0gUElEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlWydwYXJlbnRzJ10gPSBbLi4ucGFyZW50LnBhcmVudHMsIFBJRF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbJ3BhcmVudHNBcnInXSA9IFsuLi5wYXJlbnQucGFyZW50c0FyciwgcGFyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5zb3J0KChhLCBiKTogbnVtYmVyID0+IGEuZGF0YVsnc29ydE9yZGVyJ10gLSBiLmRhdGFbJ3NvcnRPcmRlciddKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmF0dGFjaGVkLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHVuYXR0YWNoZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB1bmF0dGFjaGVkLmZvckVhY2godW5JdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaWQgPSB1bkl0ZW0uZGF0YVtwYXJlbnRJZEZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2Rlcy5nZXQocGlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaehOmAoOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bkl0ZW1bJ3BhcmVudCddID0gcGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bkl0ZW1bJ3BhcmVudHMnXSA9IFsuLi5wYXJlbnQucGFyZW50cywgcGlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5JdGVtWydwYXJlbnRzQXJyJ10gPSBbLi4ucGFyZW50LnBhcmVudHNBcnIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJlbnQuZGF0YS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2godW5JdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnNvcnQoKGEsIGIpOiBudW1iZXIgPT4gYS5kYXRhWydzb3J0T3JkZXInXSAtIGIuZGF0YVsnc29ydE9yZGVyJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaJgOaciW5vZGVz55qE5a2Q6IqC54K56L2s5YyW5oiQ5pWw57uE77yM5bm26L+U5Zue5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gbm9kZXMgXHJcbiAgICAgKi9cclxuICAgIHRpbGVTZWN0aW9uRGF0YShub2Rlcykge1xyXG4gICAgICAgIGxldCByID0gW107XHJcbiAgICAgICAgdGhpcy5nZXRBbGxOb2Rlcyhub2Rlcywgcik7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaJgOaciW5vZGVz55qE5a2Q6IqC54K56L2s5YyW5oiQ5pWw57uE77yM5bm26Lef5paw5pWw57uEclxyXG4gICAgICogQHBhcmFtIG5vZGVzIFxyXG4gICAgICogQHBhcmFtIHIgXHJcbiAgICAgKi9cclxuICAgIGdldEFsbE5vZGVzKG5vZGVzLCByKSB7XHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgci5wdXNoKG4pO1xyXG4gICAgICAgICAgICBpZiAobi5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QWxsTm9kZXMobi5jaGlsZHJlbiwgcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vkuIvnuqdcclxuICAgICAqIEBwYXJhbSBzZWN0aW9uIFxyXG4gICAgICovXHJcbiAgICBzZWN0aW9uTmV4dChzZWN0aW9uKSB7XHJcbiAgICAgICAgLy8g5p6E6YCg57uE57uH6IqC54K55LiL6Z2i55qE5Lq65ZGY5L+h5oGv77yM5aaC5p6c5rKh5pyJ5Lq65ZGY5L+h5oGv77yM5bCx5p6E6YCg57uT5p6E77yM54S25ZCO5Y+R6K+35rGC6I635Y+W5Lq65ZGY5L+h5oGvXHJcbiAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBmb3JrSm9pbihbdGhpcy5nZXRPcmdCeUxheWVySHR0cChzZWN0aW9uKSwgdGhpcy5nZXRQZXJzb25CeVVybEh0dHAoc2VjdGlvbildKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKG9yZ0FuZFBlcnNvbkRhdGFzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W57uE57uH5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBsZXQgZ2V0T3JnRGF0YSA9IG9yZ0FuZFBlcnNvbkRhdGFzWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldE9yZ0RhdGEgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuO5pyN5Yqh5Zmo56uv55yf5a6e6L+U5Zue5pWw5o2uLOebtOaOpeWcqOaWueazleWGheabtOaWsHNlY3Rpb27nmoTnu5PmnoRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTZWN0aW9uRGF0YShnZXRPcmdEYXRhLCAnJywgJ3BhcmVudElkJywgJ2lkJywgc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6L6T5YWl5omA5pyJ57uE57uH5qCR55qE5pWw5o2u77yM55yLc2VjdGlvbuWPmOabtOaYr+WQpuabtOaWsFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGFUaWxlZCA9IHRoaXMudGlsZVNlY3Rpb25EYXRhKHRoaXMuc2VjdGlvbkRhdGFUcmVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDojrflj5bkurrlkZjmlbDmja5cclxuICAgICAgICAgICAgICAgIGxldCBnZXRQZXJzb25EYXRhID0gb3JnQW5kUGVyc29uRGF0YXNbMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0UGVyc29uRGF0YSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmnoTpgKDmlbDmja5cclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldFBlcnNvbkRhdGEuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMuY291bnQgPSBnZXRQZXJzb25EYXRhWydjb3VudCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHMucGFnZUNvdW50ID0gZ2V0UGVyc29uRGF0YVsncGFnZUNvdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVscy5wYWdlSW5kZXggPSBnZXRQZXJzb25EYXRhWydwYWdlSW5kZXgnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnBhZ2VTaXplID0gZ2V0UGVyc29uRGF0YVsncGFnZVNpemUnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wZXJzb25uZWxzLnRvdGFsQ291bnQgPSBnZXRQZXJzb25EYXRhWyd0b3RhbENvdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGVyc29ubmVsc1sndXNlcnMnXSA9IFsuLi5zZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10sIC4uLmdldFBlcnNvbkRhdGFbJ3VzZXJzJ11dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblsnbm9QZXJzb25uZWwnXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXROZXh0RGF0YShzZWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bkuIvnuqfmlbDmja5cclxuICAgICAqIOeCueWHu+eahOe7hOe7h+WvueW6lOeahOaYr++8muW9k+WJjee7hOe7h+iKgueCuVxyXG4gICAgICogQHBhcmFtIHNlY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIGdldE5leHREYXRhKHNlY3Rpb24pIHtcclxuXHJcbiAgICAgICAgaWYgKChzZWN0aW9uLmNoaWxkcmVuICYmIHNlY3Rpb24uY2hpbGRyZW4ubGVuZ3RoKSB8fCAoSlNPTi5zdHJpbmdpZnkoc2VjdGlvbi5wZXJzb25uZWxzKSAhPT0gJ3t9JykpIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN57uE57uH6IqC54K55pyJ5LiL57qn5pWw5o2uXHJcbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoc2VjdGlvbi5kYXRhLmlkKTtcclxuICAgICAgICAgICAgaWYgKHNlYykge1xyXG4gICAgICAgICAgICAgICAgLy8g5Yik5pat5b2T5YmN57uE57uH6IqC54K577yM5piv5ZCm5Yu+6YCJ5YWo6YCJXHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjQ2hlY2tlZCA9IHNlY1snY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgc2VjWydkaXNhYmxlZCddID0gc2VjQ2hlY2tlZCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICghc2VjWydpbmRldGVybWluYXRlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlvZPliY3nu4Tnu4fnmoTkuIvkuIDnuqfnu4Tnu4fpg73li77pgIlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjLmNoaWxkcmVuICYmIHNlYy5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSBzZWNDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVtWydkaXNhYmxlZCddID0gc2VjWydkaXNhYmxlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOacieS6uuWRmO+8jOW9k+WJjeS6uuWRmOmDveWLvumAiVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10gJiYgc2VjdGlvbi5wZXJzb25uZWxzWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBlcnNvbm5lbHNbJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJbJ2NoZWNrZWQnXSA9IHNlY0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyWydpbmRldGVybWluYXRlJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXJbJ2Rpc2FibGVkJ10gPSBzZWNbJ2Rpc2FibGVkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgc2VjUGFyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHNlYy5kYXRhLmlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogc2VjLmRhdGEubmFtZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyDlvZPliY3nu4Tnu4fnmoTniLboioLngrnkuI7lvZPliY3nu4Tnu4foioLngrnmlbDmja7lkIjlubZcclxuICAgICAgICAgICAgbGV0IHNlY0NydW1icyA9IFsuLi5zZWNbJ3BhcmVudHNBcnInXSwgc2VjUGFyZW50XTtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN57uE57uH5pyJ5a2Q6IqC54K577yM6I635Y+W5a2Q6IqC54K555qE54i25pWw57uE77yM5ZCm5YiZ77yM5oyJ54Wn5LiK6Z2i5pWw5o2u5ZCI5bm26I635Y+WXHJcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbkNydW1icyA9IHNlYy5jaGlsZHJlbi5sZW5ndGggPyBzZWMuY2hpbGRyZW5bMF1bJ3BhcmVudHNBcnInXSA6IHNlY0NydW1icztcclxuICAgICAgICAgICAgLy8g5paw55qE57uE57uH6IqC54K55piv5b2T5YmN57uE57uH55qE5a2Q6IqC54K5XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25EYXRhID0gc2VjLmNoaWxkcmVuLmxlbmd0aCA/IHNlYy5jaGlsZHJlbiA6IFtdO1xyXG4gICAgICAgICAgICAvLyDorrDlvZXlvZPliY3nu4Tnu4foioLngrlcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbiA9IHNlYztcclxuICAgICAgICAgICAgLy8g6K6w5b2V5b2T5YmN57uE57uH6IqC54K555qE5pWw5o2uXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JZCA9IHNlYy5kYXRhLmlkO1xyXG4gICAgICAgICAgICAvLyDlvZPliY3nu4Tnu4fkuIvlr7nlupTnmoTkurrlkZjkv6Hmga9cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IHNlYy5wZXJzb25uZWxzO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdENydW1ic0xpc3QoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25QZXJzb24gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS6uuWRmOaOpeWPo+WumuS5iVxyXG4gICAgICogQHBhcmFtIG91Z0lkIFxyXG4gICAgICogQHBhcmFtIHBhZ2VJbmRleCBcclxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSBcclxuICAgICAqL1xyXG4gICAgZ2V0UGVyc29ubmVsKG91Z0lkOiBzdHJpbmcsIHBhZ2VJbmRleDogbnVtYmVyLCBwYWdlU2l6ZTogbnVtYmVyID0gdGhpcy5wYWdlU2l6ZSkge1xyXG4gICAgICAgIC8vIGxldCBkYXRhID0ge307XHJcbiAgICAgICAgaWYgKHRoaXMub3JnVXJsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMucGVyZml4U3RyfSR7dGhpcy5vcmdVcmx9P29yZ0lkPSR7b3VnSWR9JnBhZ2VTaXplPSR7cGFnZVNpemV9JnBhZ2VJbmRleD0ke3BhZ2VJbmRleH1gO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpO1xyXG4gICAgICAgICAgICAvLyBpZihvdWdJZCA9PSAnbGFuZ2NoYW8nKXtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9kaXNjdXNzaW9uUGVyc29uLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICdndW9qaScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24yLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNlIGlmKG91Z0lkID09ICd5YW5mYScpe1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJ2Fzc2V0cy9kYXRhL2Rpc2N1c3Npb25QZXJzb24zLmpzb24nKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBlbHNle1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gb2YoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIhuWxguiOt+WPluaVsOaNrlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE9yZ0J5TGF5ZXJIdHRwKHNlY3Rpb24pIHtcclxuICAgICAgICBpZiAoIXNlY3Rpb24uZGF0YVsnaXNEZXRhaWwnXSAmJiAoIXNlY3Rpb24uY2hpbGRyZW4gfHwgc2VjdGlvbi5jaGlsZHJlbi5sZW5ndGggPT0gMCkpIHtcclxuICAgICAgICAgICAgLy/kuI3mmK/lj7blrZDoioLngrnvvIzkvYbmmK/lrZDkuLrnqbpcclxuICAgICAgICAgICAgaWYgKHRoaXMudXJsR2V0T3JnQnlMYXllcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVybCA9IGAke3RoaXMucGVyZml4U3RyfSR7dGhpcy51cmxHZXRPcmdCeUxheWVyfT9wYXJhbT17XCJwYXJlbnRJZFwiOlwiJHtzZWN0aW9uLmRhdGEuaWR9XCJ9YDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5aSE55CG6L+H55qE5pWw5o2uXHJcbiAgICAgICAgcmV0dXJuIG9mKGZhbHNlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5Lq65ZGYXHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRQZXJzb25CeVVybEh0dHAoc2VjdGlvbikge1xyXG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShzZWN0aW9uLnBlcnNvbm5lbHMpID09PSAne30nICYmICFzZWN0aW9uLmhhc093blByb3BlcnR5KCdub1BlcnNvbm5lbCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBlcnNvbm5lbChzZWN0aW9uLmRhdGEuaWQsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2YoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlY3Rpb25CeUlkKGlkKSB7XHJcbiAgICAgICAgbGV0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25EYXRhVGlsZWQuZmluZChzZWMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VjLmRhdGEuaWQgPT0gaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHNlY3Rpb247XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+mdouWMheWxkVxyXG4gICAgICogQHBhcmFtIGNydW1icyBcclxuICAgICAqL1xyXG4gICAgY3J1bWJzQ2xpY2soY3J1bWJzKSB7XHJcbiAgICAgICAgaWYgKGNydW1icy5pZCA9PSB0aGlzLmN1cnJlbnRTZWN0aW9uSWQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBzZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKGNydW1icy5pZCk7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ3J1bWJzID0gc2VjLmNoaWxkcmVuLmxlbmd0aCA/IHNlYy5jaGlsZHJlblswXVsncGFyZW50c0FyciddIDogW107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbkRhdGEgPSBzZWMuY2hpbGRyZW4ubGVuZ3RoID8gc2VjLmNoaWxkcmVuIDogW107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbklkID0gc2VjLmRhdGEuaWQ7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblBlcnNvbiA9IHNlYy5wZXJzb25uZWxzO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24gPSBzZWM7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdENydW1ic0xpc3QoKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6YOo6Zeo5oiW5Lq65ZGY54q25oCB5Y+Y5YyWXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgXHJcbiAgICAgKiBAcGFyYW0gc2VjdGlvbiBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQsIHNlY3Rpb24sIHR5cGUpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbi5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHNlY3Rpb24uY2hlY2tlZCA9ICFzZWN0aW9uLmNoZWNrZWQ7XHJcbiAgICAgICAgc2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZXRTZWN0aW9uRGF0YUNoZWNrZWQoKTtcclxuICAgICAgICBpZiAoc2VjdGlvbi5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHRoaXMuY3VycmVudFNlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBzZWN0aW9uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09ICd1c2VyJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWRJbkFycmF5KHNlY3Rpb25bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRVc2VycykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMucHVzaChzZWxlY3RlZERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gJ3NlY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFNlY3Rpb24oc2VjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09ICd1c2VyJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWRJbkFycmF5KHNlY3Rpb25bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRVc2VycykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bJ2RhdGEnXVt0aGlzLmxpc3RJZEZpZWxkXSA9PT0gc2VjdGlvblt0aGlzLmxpc3RJZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICdzZWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWN0aW9uKHNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRVc2Vycyx0aGlzLnNlbGVjdGVkU2VjdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNlYXJjaENsaWNrKGV2ZW50LCB1c2VyKSB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdXNlci5jaGVja2VkID0gIXVzZXIuY2hlY2tlZDtcclxuICAgICAgICBpZiAodXNlci5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheSh1c2VyW3RoaXMubGlzdElkRmllbGRdLCB0aGlzLmxpc3RJZEZpZWxkLCB0aGlzLnNlbGVjdGVkVXNlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1c2VyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnB1c2goc2VsZWN0ZWREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWRJbkFycmF5KHVzZXJbdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRVc2VycykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHVzZXJbdGhpcy5saXN0SWRGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2VjdGlvbkRhdGFDaGVja2VkKCkge1xyXG4gICAgICAgIGxldCBjdXJDaGVja2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHNlYyA9IHRoaXMuY3VycmVudFNlY3Rpb247XHJcbiAgICAgICAgbGV0IHNlY0FycmF5OiBhbnkgPSBbXTtcclxuICAgICAgICBpZiAoc2VjLmNoaWxkcmVuIHx8IChzZWMucGVyc29ubmVsc1sndXNlcnMnXSAmJiBzZWMucGVyc29ubmVsc1sndXNlcnMnXS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHNlY0FycmF5ID0gc2VjQXJyYXkuY29uY2F0KHNlYy5jaGlsZHJlbiwgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10pO1xyXG4gICAgICAgICAgICBsZXQgc2VjQ2hlY2tlZExpc3QgPSBzZWNBcnJheS5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgnY2hlY2tlZCcpICYmIGl0ZW1bJ2NoZWNrZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHNlY0luZGVMaXN0ID0gc2VjLmNoaWxkcmVuLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdpbmRldGVybWluYXRlJykgJiYgaXRlbVsnaW5kZXRlcm1pbmF0ZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXSA9IChzZWNJbmRlTGlzdCAmJiBzZWNJbmRlTGlzdC5sZW5ndGgpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoc2VjQ2hlY2tlZExpc3QgJiYgc2VjQ2hlY2tlZExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjQ2hlY2tlZExpc3QubGVuZ3RoID09IHNlY0FycmF5Lmxlbmd0aCAmJiBzZWMucGVyc29ubmVscy5wYWdlSW5kZXggPj0gc2VjLnBlcnNvbm5lbHMucGFnZUNvdW50IC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1ckNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uWydjaGVja2VkJ10gPSBjdXJDaGVja2VkO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRTZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uLnBhcmVudHMubGVuZ3RoID4gMCAmJiB0aGlzLmN1cnJlbnRTZWN0aW9uWydpbmRldGVybWluYXRlJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbi5wYXJlbnRzLmZvckVhY2gocGFyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhclNlYyA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQocGFyKTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJTZWMpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJTZWNbJ2luZGV0ZXJtaW5hdGUnXSA9IHRoaXMuY3VycmVudFNlY3Rpb25bJ2luZGV0ZXJtaW5hdGUnXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENoaWxkRGlzYWJsZWRTdGF0dXMoc3RhdHVzOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBzZWMgPSB0aGlzLmN1cnJlbnRTZWN0aW9uO1xyXG4gICAgICAgIC8vIHNlY1snZGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICBpZiAoc2VjLmNoaWxkcmVuIHx8IChzZWMucGVyc29ubmVsc1sndXNlcnMnXSAmJiBzZWMucGVyc29ubmVsc1sndXNlcnMnXS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIHNlYy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbVsnZGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHNlY1snY2hpbGREaXNhYmxlZCddID0gc3RhdHVzO1xyXG4gICAgICAgICAgICBzZWMucGVyc29ubmVsc1sndXNlcnMnXS5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXNlclsnZGlzYWJsZWQnXSA9IHN0YXR1cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Lq65ZGY5p+l55yL5pu05aSaXHJcbiAgICAgKi9cclxuICAgIGdldE1vcmVEYXRhKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uSWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjID0gdGhpcy5nZXRTZWN0aW9uQnlJZCh0aGlzLmN1cnJlbnRTZWN0aW9uSWQpO1xyXG4gICAgICAgICAgICBpZiAoc2VjKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFBlcnNvbm5lbCh0aGlzLmN1cnJlbnRTZWN0aW9uSWQsIHNlYy5wZXJzb25uZWxzLnBhZ2VJbmRleCArIDEpLnN1YnNjcmliZSgoZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWMucGVyc29ubmVscy5wYWdlSW5kZXggPSBkWydwYWdlSW5kZXgnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10gPSBbLi4uc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10sIC4uLmRbJ3VzZXJzJ11dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VjLnBlcnNvbm5lbHNbJ3VzZXJzJ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VjWydjaGVja2VkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWMucGVyc29ubmVsc1sndXNlcnMnXS5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBzZWNbJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldFNlY3Rpb25EYXRhQ2hlY2tlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWFqOmAiVxyXG4gICAgICogQHBhcmFtIGV2ZW50IFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDbGlja0FsbChldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddID0gIXRoaXMuY3VycmVudFNlY3Rpb25bJ2NoZWNrZWQnXTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvblsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBjdXJDaGVja2VkID0gdGhpcy5jdXJyZW50U2VjdGlvblsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSBjdXJDaGVja2VkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMuY3VycmVudFNlY3Rpb24ucGVyc29ubmVscykgIT0gJ3t9JyAmJiB0aGlzLmN1cnJlbnRTZWN0aW9uWydwZXJzb25uZWxzJ11bJ3VzZXJzJ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uWydwZXJzb25uZWxzJ11bJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBjdXJDaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1ckNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VjdGlvbih0aGlzLmN1cnJlbnRTZWN0aW9uKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWN0aW9uKHRoaXMuY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFNlY3Rpb24oc2VjdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkSW5BcnJheShzZWN0aW9uWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0sIHRoaXMubGlzdElkRmllbGQsIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLnB1c2goc2VjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlU2VjdGlvbihzZWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWRJbkFycmF5KHNlY3Rpb25bJ2RhdGEnXVt0aGlzLmxpc3RJZEZpZWxkXSwgdGhpcy5saXN0SWRGaWVsZCwgdGhpcy5zZWxlY3RlZFNlY3Rpb25zKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtWydkYXRhJ11bdGhpcy5saXN0SWRGaWVsZF0gPT09IHNlY3Rpb25bJ2RhdGEnXVt0aGlzLmxpc3RJZEZpZWxkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmkJzntKLnlKjmiLdcclxuICAgICAqL1xyXG4gICAgc2VhcmNoVXNlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWFyY2hUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaExpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFRleHRDaGFuZ2VTdWJqZWN0Lm5leHQodGhpcy5zZWFyY2hUZXh0KTsgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFyU2VhcmNoKCl7XHJcbiAgICAgICAgdGhpcy5zaG93U2VhcmNoTGlzdD1mYWxzZTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSAnJztcclxuICAgICAgICB0aGlzLmVycm9yVGV4dD0nJztcclxuICAgICAgICAvLyDlj5bmtojmjILotbfnmoTor7fmsYJcclxuICAgICAgICBpZih0aGlzLnJlY29yZEdldFVzZXJTdWJzY3JpYmUpe1xyXG4gICAgICAgICAgICB0aGlzLnJlY29yZEdldFVzZXJTdWJzY3JpYmUudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWNvcmRHZXRVc2VyU3Vic2NyaWJlPW51bGw7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgLy8g5riF6Zmk6YGu572pXHJcbiAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBkaWFsb2dPcGVuZCgpe1xyXG4gICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVGV4dENoYW5nZVN1YmplY3Q9bmV3IFN1YmplY3QoKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRleHRDaGFuZ2VTdWJqZWN0LnBpcGUoZGVib3VuY2VUaW1lKDIwMCkpLnN1YnNjcmliZSgodHNlYXJjaFRleHQ6c3RyaW5nKT0+e1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yVGV4dD0nJztcclxuICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgLy8g6K6w5b2VXHJcbiAgICAgICAgICAgIHRoaXMucmVjb3JkR2V0VXNlclN1YnNjcmliZT10aGlzLmdldFNlYXJjaERhdGEodHNlYXJjaFRleHQsIDApLnN1YnNjcmliZShkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd09ySGlkZUxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoVXNlckxpc3QgPSBkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LGVycm9yPT57XHJcbiAgICAgICAgICAgICAgICAvLyDlpITnkIblpLHotKVcclxuICAgICAgICAgICAgICAgIGlmKGVycm9yJiZlcnJvci5zdGF0dXNUZXh0KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yVGV4dD1lcnJvci5zdGF0dXNUZXh0O1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvclRleHQ9J+WHuueOsOW8guW4uCc7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaQnOe0ouS6uuWRmOafpeeci+abtOWkmlxyXG4gICAgICovXHJcbiAgICBnZXRNb3JlU2VhcmNoRGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICYmIHRoaXMucGVyc29uU2VhcmNoVXJsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2VhcmNoRGF0YSh0aGlzLnNlYXJjaFRleHQsIHRoaXMuc2VhcmNoVXNlckxpc3QucGFnZUluZGV4ICsgMSkuc3Vic2NyaWJlKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGQuaGFzT3duUHJvcGVydHkoXCJ1c2Vyc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoVXNlckxpc3QucGFnZUluZGV4ID0gZFsncGFnZUluZGV4J107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hVc2VyTGlzdFsndXNlcnMnXSA9IFsuLi50aGlzLnNlYXJjaFVzZXJMaXN0Wyd1c2VycyddLCAuLi5kWyd1c2VycyddXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFNlYXJjaERhdGEodGV4dDogc3RyaW5nLCBwYWdlSW5kZXg6IG51bWJlciwgcGFnZVNpemU6IG51bWJlciA9IHRoaXMucGFnZVNpemUpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzb25TZWFyY2hVcmwpIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5wZXJmaXhTdHJ9JHt0aGlzLnBlcnNvblNlYXJjaFVybH0/cGFyYW09JHt0ZXh0fSZwYWdlU2l6ZT0ke3BhZ2VTaXplfSZwYWdlSW5kZXg9JHtwYWdlSW5kZXh9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodXJsKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvZGlzY3Vzc2lvblBlcnNvbjMuanNvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmAieS4reS6uuWRmOaIlue7hOe7h+WIoOmZpFxyXG4gICAgICogQHBhcmFtIGRhdGEgXHJcbiAgICAgKiBAcGFyYW0gdHlwZSBcclxuICAgICAqL1xyXG4gICAgc2VsZWN0aW9uUmVtb3ZlKGRhdGE6IGFueSwgdHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ3VzZXInKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRVc2Vycy5maW5kSW5kZXgodXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlci5kYXRhLmlkID09IGRhdGEuZGF0YS5pZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRhLmRhdGFbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICdzZWN0aW9uJykge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnNlbGVjdGVkU2VjdGlvbnMuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YS5pZCA9PSBkYXRhLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0YVsnY2hlY2tlZCddID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhUGFyZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZSA9PSAnc2VjdGlvbicpIHtcclxuICAgICAgICAgICAgZGF0YVBhcmVudCA9IHRoaXMuZ2V0U2VjdGlvbkJ5SWQoZGF0YS5wYXJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlID09ICd1c2VyJykge1xyXG4gICAgICAgICAgICAvLyBidWdOdW06NDgwNjQ5XHJcbiAgICAgICAgICAgIGlmKGRhdGFbJ3BhcmVudCddKXtcclxuICAgICAgICAgICAgICAgIGRhdGFQYXJlbnQgPSB0aGlzLmdldFNlY3Rpb25CeUlkKGRhdGEucGFyZW50LmRhdGEuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGRhdGFQYXJlbnQmJnR5cGU9PSd1c2VyJyl7XHJcbiAgICAgICAgICAgIC8vIGJ1Z051bTo0ODA2NTFcclxuICAgICAgICAgICAgLy8g5aaC5p6c5Yig6Zmk55qE5piv55So5oi35bm25LiU6L+Y5pyJ54i257qn5YirXHJcbiAgICAgICAgICAgIGxldCBkZWxQYXJlbnRJbmRleCA9IHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5maW5kSW5kZXgoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5kYXRhLmlkID09IGRhdGFQYXJlbnQuZGF0YS5pZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmKGRlbFBhcmVudEluZGV4Pi0xKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGF0YVBhcmVudCkge1xyXG4gICAgICAgICAgICBkYXRhUGFyZW50WydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKChkYXRhUGFyZW50LmNoaWxkcmVuICYmIGRhdGFQYXJlbnQuY2hpbGRyZW4ubGVuZ3RoKSB8fCAoZGF0YVBhcmVudC5wZXJzb25uZWxzLnVzZXJzICYmIGRhdGFQYXJlbnQucGVyc29ubmVscy51c2Vycy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW5zID0gZGF0YVBhcmVudC5jaGlsZHJlbi5maWx0ZXIoY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZFsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdXNlcnMgPSBkYXRhUGFyZW50LnBlcnNvbm5lbHMudXNlcnMuZmlsdGVyKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgaWYgKChjaGlsZHJlbnMgJiYgY2hpbGRyZW5zLmxlbmd0aCkgfHwgKHVzZXJzICYmIHVzZXJzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhUGFyZW50WydpbmRldGVybWluYXRlJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVBhcmVudFsnaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVBhcmVudC5wYXJlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhUGFyZW50LnBhcmVudHMuZm9yRWFjaChwYXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJTZWMgPSB0aGlzLmdldFNlY3Rpb25CeUlkKHBhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGFyU2VjLmNoaWxkcmVuICYmIHBhclNlYy5jaGlsZHJlbi5sZW5ndGgpIHx8IChwYXJTZWMucGVyc29ubmVscy51c2VycyAmJiBwYXJTZWMucGVyc29ubmVscy51c2Vycy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyY2hpbGRyZW5zID0gcGFyU2VjLmNoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkWydjaGVja2VkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJ1c2VycyA9IHBhclNlYy5wZXJzb25uZWxzLnVzZXJzLmZpbHRlcih1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlclsnY2hlY2tlZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocGFyY2hpbGRyZW5zICYmIHBhcmNoaWxkcmVucy5sZW5ndGgpIHx8IChwYXJ1c2VycyAmJiBwYXJ1c2Vycy5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyU2VjWydpbmRldGVybWluYXRlJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJTZWNbJ2luZGV0ZXJtaW5hdGUnXSA9IGRhdGFQYXJlbnRbJ2luZGV0ZXJtaW5hdGUnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhclNlY1snaW5kZXRlcm1pbmF0ZSddID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIoOmZpOWPs+S+p+WFqOmDqOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBtb3ZlQWxsVG9MZWZ0KCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVc2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICB1c2VyLmRhdGFbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9ucy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlY3Rpb25EYXRhVGlsZWQuZm9yRWFjaChzZWMgPT4ge1xyXG4gICAgICAgICAgICBzZWNbJ2luZGV0ZXJtaW5hdGUnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWNbJ2NoZWNrZWQnXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWNbJ2Rpc2FibGVkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHNlYy5wZXJzb25uZWxzKSAhPSAne30nICYmIHNlY1sncGVyc29ubmVscyddWyd1c2VycyddLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2VjWydwZXJzb25uZWxzJ11bJ3VzZXJzJ10uZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyWydjaGVja2VkJ10gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVzZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNlY3Rpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG51bWJlclR5cGUgMO+8muWPlua2iO+8mzHvvJrnoa7lrppcclxuICAgICAqL1xyXG4gICAgcmV0dXJuUmVzdWx0KG51bWJlclR5cGU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZmluYWxUZXh0ID0gJyc7XHJcbiAgICAgICAgaWYgKG51bWJlclR5cGUpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFVzZXJzLHRoaXMuc2VsZWN0ZWRTZWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgICAgIGluZm86ICdjb25maXJtJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyczogdGhpcy5zZWxlY3RlZFVzZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IHRoaXMuc2VsZWN0ZWRTZWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmZpbmFsVGV4dCArPSBpdGVtW3RoaXMubGlzdERpc3BsYXlUZXh0XSArICfvvJsnO1xyXG4gICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgICAgICAgIGluZm86ICdjYW5jZWwnLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uOiBbXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb3ZlQWxsVG9MZWZ0KCk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzb25uZWxEaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogIOmdouWMheWxkeWIl+ihqOaYvuekulxyXG4gICAgICovXHJcbiAgICBpbml0Q3J1bWJzTGlzdCgpIHtcclxuICAgICAgICBjb25zdCBjcnVtYnNMaXN0V2lkdGggPSB0aGlzLmNydW1ic0xpc3QubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCAtIDMwO1xyXG4gICAgICAgIGNvbnN0IGNydW1ic0xpc3RJdGVtcyA9IHRoaXMuY3J1bWJzTGlzdC5uYXRpdmVFbGVtZW50LmNoaWxkcmVuO1xyXG5cclxuICAgICAgICBsZXQgY3J1bWJzTGlzdEl0ZW1XaWR0aCA9IDA7XHJcbiAgICAgICAgaWYgKGNydW1ic0xpc3RJdGVtcyAmJiBjcnVtYnNMaXN0SXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjcnVtYnNMaXN0SXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNydW1ic0xpc3RJdGVtc1tpXSwgJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gY3J1bWJzTGlzdEl0ZW1zW2ldLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY3J1bWJzTGlzdEl0ZW1XaWR0aCArPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIGlmIChjcnVtYnNMaXN0SXRlbVdpZHRoID49IGNydW1ic0xpc3RXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY3J1bWJzTGlzdEl0ZW1zW2ldLCAnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGNydW1ic0xpc3RJdGVtc1tpXSwgJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoY3J1bWJzTGlzdEl0ZW1XaWR0aCA+PSBjcnVtYnNMaXN0V2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5jcnVtYnNFbGxpcHNpcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNydW1ic0VsbGlwc2lzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNydW1ic01vcmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VjdGlvbkNydW1icyAmJiB0aGlzLnNlY3Rpb25DcnVtYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3J1bWJzQ2xpY2sodGhpcy5zZWN0aW9uQ3J1bWJzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2lzSW5BcnJheSh2YWx1ZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCBhcnJheTogYW55W10pIHtcclxuICAgICAgICBpZiAoIWZpZWxkIHx8ICF2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WJjTLkuKrlj4LmlbDlv4XloasnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbmQoaXRlbSA9PiB2YWx1ZSA9PT0gaXRlbVtmaWVsZF0pID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9pc1NlbGVjdGVkSW5BcnJheSh2YWx1ZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCBhcnJheTogYW55W10pIHtcclxuICAgICAgICBpZiAoIWZpZWxkIHx8ICF2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WJjTLkuKrlj4LmlbDlv4XloasnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LmZpbmQoaXRlbSA9PiB2YWx1ZSA9PT0gaXRlbVsnZGF0YSddW2ZpZWxkXSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICAgICAgdGhpcy5tb3ZlQWxsVG9MZWZ0KCk7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVXNlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmmL7npLrmiJbpmpDol4/mraPlnKjliqDovb1cclxuICAgICAqIEBwYXJhbSBzaG93T3JIaWRlIO+8mnRydWXkuLrmmL7npLrvvIxoaWRl5Li66ZqQ6JePXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd09ySGlkZUxvYWRpbmcoc2hvd09ySGlkZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5kaXNjdXNzaW9uQ29udGVudCB8fCAhdGhpcy5sb2FkaW5nU2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNob3dPckhpZGUpIHtcclxuICAgICAgICAgICAgLy8g5omT5byAXHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmxvYWRpbmdJbnN0YW5jZSl7XHJcbiAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5zdGFuY2UgPSB0aGlzLmxvYWRpbmdTZXIuc2hvdyh7IGRlbGF5OiA1MDAsIGNvbnRhaW5lcjogdGhpcy5kaXNjdXNzaW9uQ29udGVudCwgdHlwZTogMSwgbWVzc2FnZTogJ+WFqOWKm+WKoOi9veS4rS4uLicgfSk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxvYWRpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAvLyDlhbPpl61cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nU2VyLmNsb3NlKHRoaXMubG9hZGluZ0luc3RhbmNlLmlkKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5zdGFuY2U9bnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59Il19