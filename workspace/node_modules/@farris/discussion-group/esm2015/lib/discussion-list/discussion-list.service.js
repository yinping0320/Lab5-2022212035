/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
export class DiscussionListService {
    constructor() {
        this.resultDiscussion = new BehaviorSubject(null);
    }
    ;
    /**
     * @param {?} data
     * @return {?}
     */
    resetData(data) {
        /** @type {?} */
        let results = [];
        if (data && data.commentIds && data.commentIds.length) {
            data.commentIds.forEach((/**
             * @param {?} commentId
             * @return {?}
             */
            commentId => {
                /** @type {?} */
                const item = data['comments'].find((/**
                 * @param {?} comment
                 * @return {?}
                 */
                (comment) => {
                    return comment["id"] === commentId;
                }));
                if (item) {
                    /** @type {?} */
                    let id = item["id"];
                    /** @type {?} */
                    let userId = item["userId"];
                    /** @type {?} */
                    let userName = item['user']["name"];
                    /** @type {?} */
                    let 
                    //  imgData = item['user']["imgData"],
                    imgData = item['user'].hasOwnProperty('imgData') ? item['user']["imgData"] : '';
                    /** @type {?} */
                    let commentDate = item["commentDate"];
                    /** @type {?} */
                    let 
                    //  commentDate = this.dataFormate(item["commentDate"]),
                    text = item["text"];
                    /** @type {?} */
                    let attachFiles = item.hasOwnProperty('attachFiles') ? item["attachFiles"] : [];
                    /** @type {?} */
                    let parentData;
                    if (item.hasOwnProperty('parentId')) {
                        /** @type {?} */
                        let parentItem = data['comments'].find((/**
                         * @param {?} i
                         * @return {?}
                         */
                        i => {
                            return i.id === item.parentId;
                        }));
                        if (parentItem) {
                            /** @type {?} */
                            let parid = parentItem["id"];
                            /** @type {?} */
                            let paruserId = parentItem["userId"];
                            /** @type {?} */
                            let paruserName = parentItem['user']["name"];
                            /** @type {?} */
                            let 
                            // parimgData = parentItem['user']["imgData"],
                            parimgData = parentItem['user'].hasOwnProperty('imgData') ? parentItem['user']["imgData"] : '';
                            /** @type {?} */
                            let parcommentDate = parentItem["commentDate"];
                            /** @type {?} */
                            let partext = parentItem["text"];
                            /** @type {?} */
                            let parattachFiles = parentItem.hasOwnProperty('attachFiles') ? parentItem["attachFiles"] : [];
                            parentData = {
                                id: parid,
                                userId: paruserId,
                                userName: paruserName,
                                imgData: parimgData,
                                commentDate: parcommentDate,
                                text: partext,
                                attachFiles: parattachFiles
                            };
                        }
                    }
                    /** @type {?} */
                    let thisData = {
                        id,
                        userId,
                        userName,
                        imgData,
                        commentDate,
                        text,
                        attachFiles,
                        parentData
                    };
                    results.push(thisData);
                }
                else {
                    return;
                }
            }));
        }
        // this.resultDiscussion = results;
        this.resultDiscussion.next(results);
    }
    /**
     * @return {?}
     */
    getData() {
        return this.resultDiscussion;
    }
}
DiscussionListService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
DiscussionListService.ctorParameters = () => [];
if (false) {
    /** @type {?} */
    DiscussionListService.prototype.resultDiscussion;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3Vzc2lvbi1saXN0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2Rpc2N1c3Npb24tZ3JvdXAvIiwic291cmNlcyI6WyJsaWIvZGlzY3Vzc2lvbi1saXN0L2Rpc2N1c3Npb24tbGlzdC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBVSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFHL0MsTUFBTSxPQUFPLHFCQUFxQjtJQUk5QjtRQUZBLHFCQUFnQixHQUF5QixJQUFJLGVBQWUsQ0FBTSxJQUFJLENBQUMsQ0FBQztJQUV4RCxDQUFDO0lBRnVELENBQUM7Ozs7O0lBSXpFLFNBQVMsQ0FBQyxJQUFJOztZQUNOLE9BQU8sR0FBRyxFQUFFO1FBQ2hCLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDbkQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7O1lBQUMsU0FBUyxDQUFDLEVBQUU7O3NCQUMxQixJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUk7Ozs7Z0JBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDM0MsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssU0FBUyxDQUFBO2dCQUN0QyxDQUFDLEVBQUM7Z0JBQ0YsSUFBSSxJQUFJLEVBQUU7O3dCQUNGLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDOzt3QkFDZixNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7d0JBQ3ZCLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDOzs7b0JBQy9CLHNDQUFzQztvQkFDdEMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs7d0JBQy9FLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDOzs7b0JBQ2pDLHdEQUF3RDtvQkFDeEQsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7O3dCQUNuQixXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFOzt3QkFDM0UsVUFBVTtvQkFDZCxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLEVBQUU7OzRCQUM3QixVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUk7Ozs7d0JBQUMsQ0FBQyxDQUFDLEVBQUU7NEJBQ3ZDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDO3dCQUNsQyxDQUFDLEVBQUM7d0JBQ0YsSUFBSSxVQUFVLEVBQUU7O2dDQUNSLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDOztnQ0FDeEIsU0FBUyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7O2dDQUNoQyxXQUFXLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQzs7OzRCQUN4Qyw4Q0FBOEM7NEJBQzlDLFVBQVUsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7O2dDQUM5RixjQUFjLEdBQUcsVUFBVSxDQUFDLGFBQWEsQ0FBQzs7Z0NBQzFDLE9BQU8sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDOztnQ0FDNUIsY0FBYyxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs0QkFDOUYsVUFBVSxHQUFHO2dDQUNULEVBQUUsRUFBRSxLQUFLO2dDQUNULE1BQU0sRUFBRSxTQUFTO2dDQUNqQixRQUFRLEVBQUUsV0FBVztnQ0FDckIsT0FBTyxFQUFFLFVBQVU7Z0NBQ25CLFdBQVcsRUFBRSxjQUFjO2dDQUMzQixJQUFJLEVBQUUsT0FBTztnQ0FDYixXQUFXLEVBQUUsY0FBYzs2QkFDOUIsQ0FBQTt5QkFDSjtxQkFDSjs7d0JBQ0csUUFBUSxHQUFxQjt3QkFDN0IsRUFBRTt3QkFDRixNQUFNO3dCQUNOLFFBQVE7d0JBQ1IsT0FBTzt3QkFDUCxXQUFXO3dCQUNYLElBQUk7d0JBQ0osV0FBVzt3QkFDWCxVQUFVO3FCQUNiO29CQUNELE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQzFCO3FCQUNJO29CQUNELE9BQU87aUJBQ1Y7WUFDTCxDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDeEMsQ0FBQzs7OztJQUNELE9BQU87UUFDSCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDOzs7WUF2RUosVUFBVTs7Ozs7O0lBR1AsaURBQXdFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBkaXNjdXNzaW9uQ29uZmlnIH0gZnJvbSAnLi9kaXNjdXNzaW9uTGlzdC5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRGlzY3Vzc2lvbkxpc3RTZXJ2aWNlIHtcclxuXHJcbiAgICByZXN1bHREaXNjdXNzaW9uOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihudWxsKTs7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuXHJcbiAgICByZXNldERhdGEoZGF0YSkge1xyXG4gICAgICAgIGxldCByZXN1bHRzID0gW107XHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb21tZW50SWRzICYmIGRhdGEuY29tbWVudElkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGF0YS5jb21tZW50SWRzLmZvckVhY2goY29tbWVudElkID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkYXRhWydjb21tZW50cyddLmZpbmQoKGNvbW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tbWVudFtcImlkXCJdID09PSBjb21tZW50SWRcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpZCA9IGl0ZW1bXCJpZFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkID0gaXRlbVtcInVzZXJJZFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlck5hbWUgPSBpdGVtWyd1c2VyJ11bXCJuYW1lXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgaW1nRGF0YSA9IGl0ZW1bJ3VzZXInXVtcImltZ0RhdGFcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ0RhdGEgPSBpdGVtWyd1c2VyJ10uaGFzT3duUHJvcGVydHkoJ2ltZ0RhdGEnKSA/IGl0ZW1bJ3VzZXInXVtcImltZ0RhdGFcIl0gOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudERhdGUgPSBpdGVtW1wiY29tbWVudERhdGVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICBjb21tZW50RGF0ZSA9IHRoaXMuZGF0YUZvcm1hdGUoaXRlbVtcImNvbW1lbnREYXRlXCJdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGl0ZW1bXCJ0ZXh0XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hGaWxlcyA9IGl0ZW0uaGFzT3duUHJvcGVydHkoJ2F0dGFjaEZpbGVzJykgPyBpdGVtW1wiYXR0YWNoRmlsZXNcIl0gOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5oYXNPd25Qcm9wZXJ0eSgncGFyZW50SWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50SXRlbSA9IGRhdGFbJ2NvbW1lbnRzJ10uZmluZChpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmlkID09PSBpdGVtLnBhcmVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmlkID0gcGFyZW50SXRlbVtcImlkXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnVzZXJJZCA9IHBhcmVudEl0ZW1bXCJ1c2VySWRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydXNlck5hbWUgPSBwYXJlbnRJdGVtWyd1c2VyJ11bXCJuYW1lXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmltZ0RhdGEgPSBwYXJlbnRJdGVtWyd1c2VyJ11bXCJpbWdEYXRhXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmltZ0RhdGEgPSBwYXJlbnRJdGVtWyd1c2VyJ10uaGFzT3duUHJvcGVydHkoJ2ltZ0RhdGEnKSA/IHBhcmVudEl0ZW1bJ3VzZXInXVtcImltZ0RhdGFcIl0gOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJjb21tZW50RGF0ZSA9IHBhcmVudEl0ZW1bXCJjb21tZW50RGF0ZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0ZXh0ID0gcGFyZW50SXRlbVtcInRleHRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYXR0YWNoRmlsZXMgPSBwYXJlbnRJdGVtLmhhc093blByb3BlcnR5KCdhdHRhY2hGaWxlcycpID8gcGFyZW50SXRlbVtcImF0dGFjaEZpbGVzXCJdIDogW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXJpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHBhcnVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZTogcGFydXNlck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YTogcGFyaW1nRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50RGF0ZTogcGFyY29tbWVudERhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hGaWxlczogcGFyYXR0YWNoRmlsZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc0RhdGE6IGRpc2N1c3Npb25Db25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50RGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoRmlsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudERhdGFcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnJlc3VsdERpc2N1c3Npb24gPSByZXN1bHRzO1xyXG4gICAgICAgIHRoaXMucmVzdWx0RGlzY3Vzc2lvbi5uZXh0KHJlc3VsdHMpO1xyXG4gICAgfVxyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHREaXNjdXNzaW9uO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==