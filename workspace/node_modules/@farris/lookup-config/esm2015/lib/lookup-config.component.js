/**
 * @fileoverview added by tsickle
 * Generated from: lib/lookup-config.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, Injector, Input, ViewChild } from '@angular/core';
import { BsModalService } from '@farris/ui-modal';
import { LookupConfigMetaDataComponent } from './components/lookup-config-metadata.component';
import { FilterGridComponent } from '@farris/ui-filter-editor';
import { FilterRelation, Compare, ExpressValueType } from '@farris/ui-common/types';
import { ConfigService } from './config.service';
import { HttpClient } from '@angular/common/http';
import { NotifyService } from '@farris/ui-notify';
import { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';
import { LocaleService } from '@farris/ui-locale';
import { SelectHelpTextFieldComponent } from './components/select-help-text-field/select-help-text-field.component';
export class LookupConfigComponent {
    /**
     * @param {?} cfr
     * @param {?} injector
     * @param {?} modalService
     * @param {?} configService
     * @param {?} http
     * @param {?} notifyService
     * @param {?} GSPService
     */
    constructor(cfr, injector, modalService, configService, http, notifyService, GSPService) {
        this.cfr = cfr;
        this.injector = injector;
        this.modalService = modalService;
        this.configService = configService;
        this.http = http;
        this.notifyService = notifyService;
        this.GSPService = GSPService;
        this.groupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.metaDataName = ''; //元数据显示name
        this.metaDataTextFieldCloumns = [];
        this.isDeisgnerEnv = false;
        this.readonly = false;
        this.filterConditions = []; //筛选初始值
        //筛选初始值
        this.filterColumns = []; //筛选项
        //提交的数据
        this.lookupConfigData = {
            configId: '',
            code: '',
            name: '',
            filter: [],
            // metadata:{}
            helpId: '',
            textField: '',
            loadDataType: '' //加载方式
        };
        this.configCode = '';
        this.configName = '';
        //帮助数据
        this.configData = {};
        this.placeholder = '选择表单元数据';
        this.selectTitle = '帮助元数据选择';
        this.fileNamePlaceholder = '选择帮助文本字段';
        this.selectFileNameTitle = '文本字段选择器';
        this.isTreeList = false;
        this.typeNumValues = [
            {
                value: "default",
                name: "默认"
            },
            {
                value: "loadall",
                name: "全部加载"
            },
            {
                value: "layerload",
                name: "分层加载"
            }
        ];
        this.localeService = this.injector.get(LocaleService);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /**
         * 运行时根据configid获取元数据信息
         */
        // if(!this.isDeisgnerEnv && this.configId !== '' && typeof(this.configId) != "undefined"){
        //   this.GSPService.GetMetadataRT(this.configId).subscribe((data: any) => {
        //   //this.http.get('assets/data/lookupconfig.json').subscribe((data: any) => {
        //     if(data && data.content){
        //       const metadataObject = JSON.parse(data.content); 
        //       const metadataSchema = metadataObject.schema.main;
        //       if (!metadataSchema || !metadataSchema.entities || metadataSchema.entities.length === 0) {
        //           return;
        //       }
        //       const metadatamainTable = metadataSchema.entities[0];
        //       if (metadatamainTable.type && metadatamainTable.type.fields) {
        //           this.getPlainFields(metadatamainTable.type.fields);
        //       }
        //     }
        //   },
        //   error => {
        //     if(error.message){
        //       this.notifyService.error(error.message);
        //     }
        //   }
        //   )
        // }
        /**
         * 根据configid获取回显数据
         */
        if (this.configId !== '' && typeof (this.configId) != "undefined") {
            this.configService.getHelpConfig(this.configId).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data) {
                    this.configData = data;
                    this.configCode = data.code;
                    this.configName = data.name;
                    this.metaDataName = data.helpName;
                    this.lookupConfigData.helpId = data.helpId;
                    /** @type {?} */
                    const queryParams = JSON.parse(data.queryParam);
                    if (queryParams['filter'] && queryParams['filter']['filterConditions'] && queryParams['filter']['filterConditions'].length) {
                        this.filterConditions = queryParams['filter']['filterConditions'];
                    }
                    if (queryParams['loadTreeDataType']) {
                        this.loadDataType = queryParams['loadTreeDataType'];
                    }
                    if (queryParams['textField']) {
                        this.metaDataTextFieldValue = queryParams['textField'];
                    }
                    if (!this.isDeisgnerEnv && typeof (data.helpId) != "undefined") {
                        this.getMetadataRT(data.helpId);
                    }
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                if (error.message) {
                    this.notifyService.error(error.message);
                }
            }));
        }
        this.placeholder = this.localeService.getValue('lookupConfig.placeholder');
        this.selectTitle = this.localeService.getValue('lookupConfig.selectTitle');
        this.fileNamePlaceholder = this.localeService.getValue('lookupConfig.fileNamePlaceholder');
        this.selectFileNameTitle = this.localeService.getValue('lookupConfig.selectFileNameTitle');
        this.typeNumValues = [
            {
                value: "default",
                name: this.localeService.getValue('lookupConfig.loadTypeList.default')
            },
            {
                value: "loadall",
                name: this.localeService.getValue('lookupConfig.loadTypeList.all')
            },
            {
                value: "layerload",
                name: this.localeService.getValue('lookupConfig.loadTypeList.layer')
            }
        ];
    }
    /**
     * 运行时根据configid获取元数据信息
     * @param {?} helpId
     * @return {?}
     */
    getMetadataRT(helpId) {
        this.GSPService.GetMetadataRT(helpId).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            //this.http.get('assets/data/lookupconfig.json').subscribe((data: any) => {
            //console.log(data);
            this.metaDataTextFieldCloumns = [];
            if (data && data.content) {
                /** @type {?} */
                const metadataObject = JSON.parse(data.content);
                this.metaData = metadataObject;
                this.isTreeList = (metadataObject.displayType.toLowerCase() === 'treelist');
                /** @type {?} */
                const metadataSchema = metadataObject.schema.main;
                if (!metadataSchema || !metadataSchema.entities || metadataSchema.entities.length === 0) {
                    return;
                }
                /** @type {?} */
                const metadatamainTable = metadataSchema.entities[0];
                if (metadatamainTable.type && metadatamainTable.type.fields) {
                    this.getPlainFields(metadatamainTable.type.fields);
                    this.getTextField(metadatamainTable.type.fields);
                    if (this.metaDataTextFieldCloumns && this.metaDataTextFieldCloumns.length) {
                        /** @type {?} */
                        let textField = this.metaDataTextFieldCloumns.find((/**
                         * @param {?} item
                         * @return {?}
                         */
                        item => {
                            return item.value.toLowerCase() == this.metaDataTextFieldValue.toLowerCase();
                        }));
                        this.metaDataTextField = textField ? textField.label : '';
                    }
                }
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            if (error.message) {
                this.notifyService.error(error.message);
            }
        }));
    }
    /**
     * @param {?} fields
     * @return {?}
     */
    getTextField(fields) {
        fields.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            this.metaDataTextFieldCloumns.push({
                label: element.name,
                value: element.path
            });
            if (element.type && element.type.fields && element.type.fields.length > 0) {
                this.getTextField(element.type.fields);
            }
        }));
    }
    /**
     * 获取元数据弹窗
     * @return {?}
     */
    getMetadata() {
        /** @type {?} */
        const metaDataFac = this.cfr.resolveComponentFactory(LookupConfigMetaDataComponent);
        /** @type {?} */
        const metaDataRef = metaDataFac.create(this.injector);
        metaDataRef.instance.metadataPath = this.metadataPath;
        // metaDataRef.instance.isDeisgnerEnv = this.isDeisgnerEnv;
        this.metadataDialog = this.modalService.show(metaDataRef, {
            title: this.selectTitle,
            width: 940,
            height: 600,
            showButtons: false,
            showMaxButton: false
        });
        metaDataRef.instance.selectedMeta.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        ($event) => {
            if (!$event || !$event.metadata) {
                return;
            }
            this.metedataInit($event);
            this.closeMetadataDlg();
        }));
        metaDataRef.instance.closeModal.subscribe((/**
         * @return {?}
         */
        () => {
            //测试
            //this.metedataInit(1);
            this.closeMetadataDlg();
        }));
    }
    /**
     * 供服务使用的获取提交数据
     * @return {?}
     */
    getdata() {
        //this.lookupConfigData.filter = this.fg.conditions;
        /** @type {?} */
        let conditions = this.fg.conditions.filter((/**
         * @param {?} c
         * @return {?}
         */
        c => c.filterField));
        this.lookupConfigData.filter = conditions;
        this.lookupConfigData.configId = this.configId;
        this.lookupConfigData.code = this.configCode;
        this.lookupConfigData.name = this.configName;
        this.lookupConfigData.textField = this.metaDataTextFieldValue;
        this.lookupConfigData.loadDataType = this.loadDataType;
        return this.lookupConfigData;
    }
    /**
     * 关闭弹窗
     * @return {?}
     */
    closeMetadataDlg() {
        if (this.metadataDialog) {
            this.metadataDialog.close();
        }
    }
    /**
     * 获取帮助schema字段
     * @param {?} schema schema
     * @return {?}
     */
    getHelpFields(schema) {
        if (!schema || !schema.entities || schema.entities.length === 0) {
            return;
        }
        /** @type {?} */
        const mainTable = schema.entities[0];
        if (mainTable.type && mainTable.type.fields) {
            this.getPlainFields(mainTable.type.fields);
        }
    }
    /**
     * @param {?} fields
     * @return {?}
     */
    getPlainFields(fields) {
        this.filterColumns = [];
        fields.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            this.filterColumns = this.filterColumns.concat({
                label: element.name,
                value: element.path
            });
            // 关联表字段 / UDT字段
            if (element.type && element.type.fields && element.type.fields.length > 0) {
                this.getPlainFields(element.type.fields);
            }
        }));
    }
    /**
     * 帮助元数据中存储的relation等字段需要转成枚举值
     * @private
     * @param {?} conditions
     * @return {?}
     */
    adaptHelpConditions(conditions) {
        if (!conditions || !conditions.length) {
            return [];
        }
        conditions.forEach((/**
         * @param {?} cd
         * @return {?}
         */
        cd => {
            if (typeof (cd.relation) !== 'number') {
                cd.relation = (/** @type {?} */ (FilterRelation[cd.relation]));
            }
            if (typeof (cd.compare) !== 'number') {
                cd.compare = (/** @type {?} */ (Compare[cd.compare]));
            }
            if (typeof (cd.expresstype) !== 'number') {
                if (ExpressValueType) {
                    cd.expresstype = (/** @type {?} */ (ExpressValueType[cd.expresstype]));
                }
                else {
                    cd.expresstype = cd.expresstype === 'Value' ? 0 : 1;
                }
            }
        }));
        return conditions;
    }
    /**
     * 元数据信息初始化
     * @param {?} event
     * @return {?}
     */
    metedataInit(event) {
        /** @type {?} */
        const helpObject = JSON.parse(event.metadata.content);
        this.metaData = helpObject;
        this.filterConditions = this.adaptHelpConditions(helpObject.dataSource.conditions);
        this.getHelpFields(helpObject.schema.main);
        if (event.metadata.name) {
            this.metaDataName = event.metadata.name;
        }
        this.metaDataTextField = helpObject.textFieldName;
        this.metaDataTextFieldValue = helpObject.textField;
        this.isTreeList = (helpObject.displayType.toLowerCase() === 'treelist');
        //this.loadDataType = helpObject['dataSource']['treeInfo']['loadDataType'];
        /** @type {?} */
        let metedataLoadDataType = helpObject['dataSource']['treeInfo']['loadDataType'];
        if (metedataLoadDataType == 'all')
            this.loadDataType = 'loadall';
        else if (metedataLoadDataType == 'async')
            this.loadDataType = 'layerload';
        this.lookupConfigData.helpId = event.metadata.id;
        //模拟数据获取
        // let event2: any;
        // this.http.get('assets/data/lookupconfig2.json').subscribe((data: any) => {
        //   event2 = data;
        //   const helpObject = JSON.parse(event2.metadata.content);
        //   this.metaData = helpObject;
        //   this.filterConditions = this.adaptHelpConditions(helpObject.dataSource.conditions);
        //   this.getHelpFields(helpObject.schema.main);
        //   if (event2.metadata.fileName) {
        //     this.metaDataName = event2.metadata.fileName;
        //   }
        //   this.metaDataTextField = helpObject.textField
        //   this.isTreeList = (helpObject.displayType.toLowerCase() === 'treelist')
        //   this.loadDataType = helpObject['dataSource']['treeInfo']['loadDataType'];
        //   this.lookupConfigData.helpId = event2.metadata.id;
        //   console.log(helpObject);
        // }
        // );
    }
    /**
     * 帮助文本字段弹窗
     * @return {?}
     */
    getTextFieldName() {
        /** @type {?} */
        const fileNameDataFac = this.cfr.resolveComponentFactory(SelectHelpTextFieldComponent);
        /** @type {?} */
        const fileNameDataRef = fileNameDataFac.create(this.injector);
        if (!this.metaData)
            return;
        fileNameDataRef.instance.helpId = this.metaData.id;
        fileNameDataRef.instance.value = this.metaDataTextFieldValue;
        fileNameDataRef.instance.schemaData = this.metaData.schema.main;
        this.textFieldDialog = this.modalService.show(fileNameDataRef, {
            title: this.selectFileNameTitle,
            width: 900,
            height: 600,
            showButtons: true,
            buttons: fileNameDataRef.instance.modalFooter
        });
        fileNameDataRef.instance.submitModal.subscribe((/**
         * @param {?} $event
         * @return {?}
         */
        ($event) => {
            if ($event.value) {
                //this.metaDataTextField = $event.value;
                this.metaDataTextField = $event.name;
                this.metaDataTextFieldValue = $event.value;
                this.lookupConfigData.textField = this.metaDataTextFieldValue;
            }
            this.closeTextFieldDlg();
        }));
        fileNameDataRef.instance.closeModal.subscribe((/**
         * @return {?}
         */
        () => {
            this.closeTextFieldDlg();
        }));
    }
    /**
     * @return {?}
     */
    closeTextFieldDlg() {
        if (this.textFieldDialog) {
            this.textFieldDialog.close();
        }
    }
}
LookupConfigComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-lookup-config',
                template: "<div class=\"f-lookup-config-wrapper\">\r\n    <div class=\"f-lookup-config-inner farris-overflow-y-auto\">\r\n        <div class=\"f-lookup-config-item\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.code' | locale:'\u7F16\u53F7' }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-input-wrapper\">\r\n                    <input-group [(ngModel)]=\"configCode\" [readonly]=\"readonly\"></input-group>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-lookup-config-item\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.name' | locale:'\u540D\u79F0' }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-input-wrapper\">\r\n                    <input-group [(ngModel)]=\"configName\" [readonly]=\"readonly\"></input-group>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-lookup-config-item\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.select' | locale:'\u9009\u62E9\u5E2E\u52A9\u5143\u6570\u636E' }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-input-wrapper\">\r\n                    <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon\"\r\n                        [enableClear]=\"false\" (clickHandle)=\"getMetadata()\" [ngModel]=\"metaDataName\"\r\n                        [placeholder]=\"placeholder\" [readonly]=\"readonly\"></input-group>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-lookup-config-item\" *ngIf=\"isTreeList\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.loadTypeTitle' | locale:'\u9009\u62E9\u52A0\u8F7D\u65B9\u5F0F' }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-input-wrapper\">\r\n                    <farris-combo-list\r\n                        [(ngModel)]=\"loadDataType\"\r\n                        [idField]=\"'value'\"\r\n                        [textField]=\"'name'\"\r\n                        [data]=\"typeNumValues\"\r\n                    ></farris-combo-list>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-lookup-config-item\" *ngIf=\"metaDataName || metaDataTextField\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.textFieldLable' | locale:'\u5E2E\u52A9\u6587\u672C\u5B57\u6BB5' }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-input-wrapper\">\r\n                    <input-group [editable]=\"false\" [customCls]=\"'custom-cls'\" [groupText]=\"groupIcon\"\r\n                        [enableClear]=\"false\" (clickHandle)=\"getTextFieldName()\" [ngModel]=\"metaDataTextField\"\r\n                        [placeholder]=\"placeholder\" [readonly]=\"readonly\"></input-group>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"f-lookup-config-item\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">{{ 'lookupConfig.filter' | locale }}</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-filter-wrapper\">\r\n                    <filter-grid #fg [conditions]=\"filterConditions\" [columns]=\"filterColumns\"></filter-grid>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- <button class=\"btn btn-primary\" (click)=\"getdata()\">\u83B7\u53D6</button> -->\r\n        <!-- <div class=\"f-lookup-config-item\">\r\n            <div class=\"config-item-title\">\r\n                <span class=\"config-item-title-text\">\u6743\u9650\u53C2\u6570</span>\r\n            </div>\r\n            <div class=\"config-item-content\">\r\n                <div class=\"config-item-permission-wrapper farris-form farris-form-controls-inline\">\r\n                    <div class=\"permission-input-item farris-group-wrap f-form-lable-auto\">\r\n                        <div class=\"form-group farris-form-group\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\">\u4E1A\u52A1\u5BF9\u8C61</span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <farris-lookup-grid\r\n                                    #lookup\r\n                                ></farris-lookup-grid>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"permission-input-item farris-group-wrap f-form-lable-auto\">\r\n                        <div class=\"form-group farris-form-group\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\">\u4E1A\u52A1\u64CD\u4F5C</span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <input class=\"form-control\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"permission-input-item farris-group-wrap f-form-lable-auto\">\r\n                        <div class=\"form-group farris-form-group\">\r\n                            <label class=\"col-form-label\">\r\n                                <span class=\"farris-label-text\">\u6388\u6743\u5BF9\u8C61</span>\r\n                            </label>\r\n                            <div class=\"farris-input-wrap\">\r\n                                <input class=\"form-control\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div> -->\r\n    </div>\r\n</div>",
                styles: [".f-lookup-config-wrapper .f-lookup-config-inner{padding:14px}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item{padding-bottom:16px}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item .config-item-title{margin-bottom:10px;font-size:16px;color:rgba(0,0,0,.85);font-weight:500}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item .config-item-title .f-icon{margin-right:4px;font-size:16px}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item .config-item-content{padding-left:16px}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item .config-item-content .config-item-input-wrapper{max-width:360px}.f-lookup-config-wrapper .f-lookup-config-inner .f-lookup-config-item .config-item-content .config-item-filter-wrapper{padding-top:10px}"]
            }] }
];
/** @nocollapse */
LookupConfigComponent.ctorParameters = () => [
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: BsModalService },
    { type: ConfigService },
    { type: HttpClient },
    { type: NotifyService },
    { type: GSPMetadataRTService }
];
LookupConfigComponent.propDecorators = {
    configId: [{ type: Input }],
    metadataPath: [{ type: Input }],
    isDeisgnerEnv: [{ type: Input }],
    readonly: [{ type: Input }],
    fg: [{ type: ViewChild, args: ['fg',] }]
};
if (false) {
    /** @type {?} */
    LookupConfigComponent.prototype.groupIcon;
    /** @type {?} */
    LookupConfigComponent.prototype.metaDataName;
    /** @type {?} */
    LookupConfigComponent.prototype.metaDataTextField;
    /** @type {?} */
    LookupConfigComponent.prototype.metaDataTextFieldValue;
    /** @type {?} */
    LookupConfigComponent.prototype.metaDataTextFieldCloumns;
    /** @type {?} */
    LookupConfigComponent.prototype.metaData;
    /** @type {?} */
    LookupConfigComponent.prototype.configId;
    /** @type {?} */
    LookupConfigComponent.prototype.metadataPath;
    /** @type {?} */
    LookupConfigComponent.prototype.isDeisgnerEnv;
    /** @type {?} */
    LookupConfigComponent.prototype.readonly;
    /** @type {?} */
    LookupConfigComponent.prototype.fg;
    /** @type {?} */
    LookupConfigComponent.prototype.filterConditions;
    /** @type {?} */
    LookupConfigComponent.prototype.filterColumns;
    /** @type {?} */
    LookupConfigComponent.prototype.metadataDialog;
    /** @type {?} */
    LookupConfigComponent.prototype.textFieldDialog;
    /** @type {?} */
    LookupConfigComponent.prototype.lookupConfigData;
    /** @type {?} */
    LookupConfigComponent.prototype.configCode;
    /** @type {?} */
    LookupConfigComponent.prototype.configName;
    /** @type {?} */
    LookupConfigComponent.prototype.configData;
    /** @type {?} */
    LookupConfigComponent.prototype.localeService;
    /** @type {?} */
    LookupConfigComponent.prototype.placeholder;
    /** @type {?} */
    LookupConfigComponent.prototype.selectTitle;
    /** @type {?} */
    LookupConfigComponent.prototype.fileNamePlaceholder;
    /** @type {?} */
    LookupConfigComponent.prototype.selectFileNameTitle;
    /** @type {?} */
    LookupConfigComponent.prototype.isTreeList;
    /** @type {?} */
    LookupConfigComponent.prototype.loadDataType;
    /** @type {?} */
    LookupConfigComponent.prototype.typeNumValues;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.cfr;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.configService;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    LookupConfigComponent.prototype.GSPService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWNvbmZpZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2xvb2t1cC1jb25maWcvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWNvbmZpZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFVLHdCQUF3QixFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQXdCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5SCxPQUFPLEVBQUUsY0FBYyxFQUFjLE1BQU0sa0JBQWtCLENBQUM7QUFDOUQsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDOUYsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDL0QsT0FBTyxFQUFFLGNBQWMsRUFBbUIsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDckcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHNFQUFzRSxDQUFDO0FBT3BILE1BQU0sT0FBTyxxQkFBcUI7Ozs7Ozs7Ozs7SUF5RGhDLFlBQ1UsR0FBNkIsRUFDN0IsUUFBa0IsRUFDbEIsWUFBNEIsRUFDNUIsYUFBNEIsRUFDNUIsSUFBZ0IsRUFDaEIsYUFBNEIsRUFDNUIsVUFBZ0M7UUFOaEMsUUFBRyxHQUFILEdBQUcsQ0FBMEI7UUFDN0IsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixpQkFBWSxHQUFa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QUFDO2dCQUNULFFBQVEsRUFBRSxzQkFBc0I7Z0JBQ2hDLHMxTUFBNkM7O2FBRTlDOzs7O1lBaEIyQix3QkFBd0I7WUFBRSxRQUFRO1lBQ3JELGNBQWM7WUFJZCxhQUFhO1lBQ2IsVUFBVTtZQUNWLGFBQWE7WUFDYixvQkFBb0I7Ozt1QkFpQjFCLEtBQUs7MkJBQ0wsS0FBSzs0QkFDTCxLQUFLO3VCQUNMLEtBQUs7aUJBRUwsU0FBUyxTQUFDLElBQUk7Ozs7SUFYZiwwQ0FBbUQ7O0lBQ25ELDZDQUFrQjs7SUFDbEIsa0RBQWtCOztJQUNsQix1REFBdUI7O0lBQ3ZCLHlEQUE4Qjs7SUFDOUIseUNBQVM7O0lBQ1QseUNBQWtCOztJQUNsQiw2Q0FBc0I7O0lBQ3RCLDhDQUF3Qzs7SUFDeEMseUNBQW1DOztJQUVuQyxtQ0FBd0M7O0lBRXhDLGlEQUFzQjs7SUFDdEIsOENBQW1COztJQUNuQiwrQ0FBMkI7O0lBQzNCLGdEQUE0Qjs7SUFFNUIsaURBU0M7O0lBRUQsMkNBQXdCOztJQUN4QiwyQ0FBd0I7O0lBRXhCLDJDQUFnQjs7SUFDaEIsOENBQTZCOztJQUM3Qiw0Q0FBZ0M7O0lBQ2hDLDRDQUFnQzs7SUFDaEMsb0RBQXlDOztJQUN6QyxvREFBd0M7O0lBQ3hDLDJDQUE0Qjs7SUFDNUIsNkNBQXFCOztJQUNyQiw4Q0FhRTs7Ozs7SUFHQSxvQ0FBcUM7Ozs7O0lBQ3JDLHlDQUEwQjs7Ozs7SUFDMUIsNkNBQW9DOzs7OztJQUNwQyw4Q0FBb0M7Ozs7O0lBQ3BDLHFDQUF3Qjs7Ozs7SUFDeEIsOENBQW9DOzs7OztJQUNwQywyQ0FBd0MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3IsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlLCBCc01vZGFsUmVmIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IExvb2t1cENvbmZpZ01ldGFEYXRhQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2xvb2t1cC1jb25maWctbWV0YWRhdGEuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRmlsdGVyR3JpZENvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZmlsdGVyLWVkaXRvcic7XHJcbmltcG9ydCB7IEZpbHRlclJlbGF0aW9uLCBGaWx0ZXJDb25kaXRpb24sIENvbXBhcmUsIEV4cHJlc3NWYWx1ZVR5cGUgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi90eXBlcyc7XHJcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL2NvbmZpZy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgR1NQTWV0YWRhdGFSVFNlcnZpY2UgfSBmcm9tICdAZ3NwLWxjbS9tZXRhZGF0YXJ0LXNlbGVjdG9yJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgU2VsZWN0SGVscFRleHRGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9zZWxlY3QtaGVscC10ZXh0LWZpZWxkL3NlbGVjdC1oZWxwLXRleHQtZmllbGQuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmFycmlzLWxvb2t1cC1jb25maWcnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9sb29rdXAtY29uZmlnLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9sb29rdXAtY29uZmlnLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIExvb2t1cENvbmZpZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIGdyb3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcbiAgbWV0YURhdGFOYW1lID0gJyc7Ly/lhYPmlbDmja7mmL7npLpuYW1lXHJcbiAgbWV0YURhdGFUZXh0RmllbGQ7Ly/luK7liqnmlofmnKzlrZfmrrVcclxuICBtZXRhRGF0YVRleHRGaWVsZFZhbHVlO1xyXG4gIG1ldGFEYXRhVGV4dEZpZWxkQ2xvdW1ucyA9IFtdO1xyXG4gIG1ldGFEYXRhO1xyXG4gIEBJbnB1dCgpIGNvbmZpZ0lkO1xyXG4gIEBJbnB1dCgpIG1ldGFkYXRhUGF0aDtcclxuICBASW5wdXQoKSBpc0RlaXNnbmVyRW52OiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCkgcmVhZG9ubHk6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnZmcnKSBmZzogRmlsdGVyR3JpZENvbXBvbmVudFxyXG5cclxuICBmaWx0ZXJDb25kaXRpb25zID0gW107IC8v562b6YCJ5Yid5aeL5YC8XHJcbiAgZmlsdGVyQ29sdW1ucyA9IFtdOyAvL+etm+mAiemhuVxyXG4gIG1ldGFkYXRhRGlhbG9nOiBCc01vZGFsUmVmO1xyXG4gIHRleHRGaWVsZERpYWxvZzogQnNNb2RhbFJlZjtcclxuICAvL+aPkOS6pOeahOaVsOaNrlxyXG4gIGxvb2t1cENvbmZpZ0RhdGEgPSB7XHJcbiAgICBjb25maWdJZDogJycsXHJcbiAgICBjb2RlOiAnJyxcclxuICAgIG5hbWU6ICcnLFxyXG4gICAgZmlsdGVyOiBbXSxcclxuICAgIC8vIG1ldGFkYXRhOnt9XHJcbiAgICBoZWxwSWQ6ICcnLFxyXG4gICAgdGV4dEZpZWxkOiAnJyxcclxuICAgIGxvYWREYXRhVHlwZTonJy8v5Yqg6L295pa55byPXHJcbiAgfVxyXG5cclxuICBjb25maWdDb2RlOiBzdHJpbmcgPSAnJztcclxuICBjb25maWdOYW1lOiBzdHJpbmcgPSAnJztcclxuICAvL+W4ruWKqeaVsOaNrlxyXG4gIGNvbmZpZ0RhdGEgPSB7fTtcclxuICBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAn6YCJ5oup6KGo5Y2V5YWD5pWw5o2uJztcclxuICBzZWxlY3RUaXRsZTogc3RyaW5nID0gJ+W4ruWKqeWFg+aVsOaNrumAieaLqSc7XHJcbiAgZmlsZU5hbWVQbGFjZWhvbGRlcjogc3RyaW5nID0gJ+mAieaLqeW4ruWKqeaWh+acrOWtl+autSc7XHJcbiAgc2VsZWN0RmlsZU5hbWVUaXRsZTogc3RyaW5nID0gJ+aWh+acrOWtl+autemAieaLqeWZqCc7XHJcbiAgaXNUcmVlTGlzdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGxvYWREYXRhVHlwZTogc3RyaW5nO1xyXG4gIHR5cGVOdW1WYWx1ZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlOiBcImRlZmF1bHRcIixcclxuICAgICAgbmFtZTogXCLpu5jorqRcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdmFsdWU6IFwibG9hZGFsbFwiLFxyXG4gICAgICBuYW1lOiBcIuWFqOmDqOWKoOi9vVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB2YWx1ZTogXCJsYXllcmxvYWRcIixcclxuICAgICAgbmFtZTogXCLliIblsYLliqDovb1cIlxyXG4gICAgfVxyXG4gIF07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBjZnI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgcHJpdmF0ZSBub3RpZnlTZXJ2aWNlOiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBHU1BTZXJ2aWNlOiBHU1BNZXRhZGF0YVJUU2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIC8qKlxyXG4gICAgICog6L+Q6KGM5pe25qC55o2uY29uZmlnaWTojrflj5blhYPmlbDmja7kv6Hmga9cclxuICAgICAqL1xyXG4gICAgLy8gaWYoIXRoaXMuaXNEZWlzZ25lckVudiAmJiB0aGlzLmNvbmZpZ0lkICE9PSAnJyAmJiB0eXBlb2YodGhpcy5jb25maWdJZCkgIT0gXCJ1bmRlZmluZWRcIil7XHJcbiAgICAvLyAgIHRoaXMuR1NQU2VydmljZS5HZXRNZXRhZGF0YVJUKHRoaXMuY29uZmlnSWQpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAvLyAgIC8vdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvbG9va3VwY29uZmlnLmpzb24nKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgLy8gICAgIGlmKGRhdGEgJiYgZGF0YS5jb250ZW50KXtcclxuICAgIC8vICAgICAgIGNvbnN0IG1ldGFkYXRhT2JqZWN0ID0gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnQpOyBcclxuICAgIC8vICAgICAgIGNvbnN0IG1ldGFkYXRhU2NoZW1hID0gbWV0YWRhdGFPYmplY3Quc2NoZW1hLm1haW47XHJcbiAgICAvLyAgICAgICBpZiAoIW1ldGFkYXRhU2NoZW1hIHx8ICFtZXRhZGF0YVNjaGVtYS5lbnRpdGllcyB8fCBtZXRhZGF0YVNjaGVtYS5lbnRpdGllcy5sZW5ndGggPT09IDApIHtcclxuICAgIC8vICAgICAgICAgICByZXR1cm47XHJcbiAgICAvLyAgICAgICB9XHJcbiAgICAvLyAgICAgICBjb25zdCBtZXRhZGF0YW1haW5UYWJsZSA9IG1ldGFkYXRhU2NoZW1hLmVudGl0aWVzWzBdO1xyXG4gICAgLy8gICAgICAgaWYgKG1ldGFkYXRhbWFpblRhYmxlLnR5cGUgJiYgbWV0YWRhdGFtYWluVGFibGUudHlwZS5maWVsZHMpIHtcclxuICAgIC8vICAgICAgICAgICB0aGlzLmdldFBsYWluRmllbGRzKG1ldGFkYXRhbWFpblRhYmxlLnR5cGUuZmllbGRzKTtcclxuICAgIC8vICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyAgIGVycm9yID0+IHtcclxuICAgIC8vICAgICBpZihlcnJvci5tZXNzYWdlKXtcclxuICAgIC8vICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgKVxyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5jb25maWdpZOiOt+WPluWbnuaYvuaVsOaNrlxyXG4gICAgICovXHJcbiAgICBpZiAodGhpcy5jb25maWdJZCAhPT0gJycgJiYgdHlwZW9mICh0aGlzLmNvbmZpZ0lkKSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgIHRoaXMuY29uZmlnU2VydmljZS5nZXRIZWxwQ29uZmlnKHRoaXMuY29uZmlnSWQpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlnRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpZ0NvZGUgPSBkYXRhLmNvZGU7XHJcbiAgICAgICAgICB0aGlzLmNvbmZpZ05hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICB0aGlzLm1ldGFEYXRhTmFtZSA9IGRhdGEuaGVscE5hbWU7XHJcbiAgICAgICAgICB0aGlzLmxvb2t1cENvbmZpZ0RhdGEuaGVscElkID0gZGF0YS5oZWxwSWQ7XHJcbiAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IEpTT04ucGFyc2UoZGF0YS5xdWVyeVBhcmFtKTtcclxuICAgICAgICAgIGlmIChxdWVyeVBhcmFtc1snZmlsdGVyJ10gJiYgcXVlcnlQYXJhbXNbJ2ZpbHRlciddWydmaWx0ZXJDb25kaXRpb25zJ10gJiYgcXVlcnlQYXJhbXNbJ2ZpbHRlciddWydmaWx0ZXJDb25kaXRpb25zJ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQ29uZGl0aW9ucyA9IHF1ZXJ5UGFyYW1zWydmaWx0ZXInXVsnZmlsdGVyQ29uZGl0aW9ucyddO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYocXVlcnlQYXJhbXNbJ2xvYWRUcmVlRGF0YVR5cGUnXSl7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERhdGFUeXBlID0gcXVlcnlQYXJhbXNbJ2xvYWRUcmVlRGF0YVR5cGUnXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKHF1ZXJ5UGFyYW1zWyd0ZXh0RmllbGQnXSl7XHJcbiAgICAgICAgICAgIHRoaXMubWV0YURhdGFUZXh0RmllbGRWYWx1ZSA9IHF1ZXJ5UGFyYW1zWyd0ZXh0RmllbGQnXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghdGhpcy5pc0RlaXNnbmVyRW52ICYmIHR5cGVvZiAoZGF0YS5oZWxwSWQpICE9IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRNZXRhZGF0YVJUKGRhdGEuaGVscElkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgICAgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXBDb25maWcucGxhY2Vob2xkZXInKTtcclxuICAgIHRoaXMuc2VsZWN0VGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cENvbmZpZy5zZWxlY3RUaXRsZScpO1xyXG4gICAgdGhpcy5maWxlTmFtZVBsYWNlaG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXBDb25maWcuZmlsZU5hbWVQbGFjZWhvbGRlcicpO1xyXG4gICAgdGhpcy5zZWxlY3RGaWxlTmFtZVRpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXBDb25maWcuc2VsZWN0RmlsZU5hbWVUaXRsZScpO1xyXG4gICAgdGhpcy50eXBlTnVtVmFsdWVzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6IFwiZGVmYXVsdFwiLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwQ29uZmlnLmxvYWRUeXBlTGlzdC5kZWZhdWx0JylcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBcImxvYWRhbGxcIixcclxuICAgICAgICBuYW1lOiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cENvbmZpZy5sb2FkVHlwZUxpc3QuYWxsJylcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBcImxheWVybG9hZFwiLFxyXG4gICAgICAgIG5hbWU6IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwQ29uZmlnLmxvYWRUeXBlTGlzdC5sYXllcicpXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9XHJcbiAgLyoqXHJcbiAgICog6L+Q6KGM5pe25qC55o2uY29uZmlnaWTojrflj5blhYPmlbDmja7kv6Hmga9cclxuICAgKi9cclxuICBnZXRNZXRhZGF0YVJUKGhlbHBJZCkge1xyXG4gICAgdGhpcy5HU1BTZXJ2aWNlLkdldE1ldGFkYXRhUlQoaGVscElkKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgLy90aGlzLmh0dHAuZ2V0KCdhc3NldHMvZGF0YS9sb29rdXBjb25maWcuanNvbicpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgIHRoaXMubWV0YURhdGFUZXh0RmllbGRDbG91bW5zID0gW107XHJcbiAgICAgIGlmIChkYXRhICYmIGRhdGEuY29udGVudCkge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhT2JqZWN0ID0gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMubWV0YURhdGEgPSBtZXRhZGF0YU9iamVjdDtcclxuICAgICAgICB0aGlzLmlzVHJlZUxpc3QgPSAobWV0YWRhdGFPYmplY3QuZGlzcGxheVR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3RyZWVsaXN0JylcclxuICAgICAgICBjb25zdCBtZXRhZGF0YVNjaGVtYSA9IG1ldGFkYXRhT2JqZWN0LnNjaGVtYS5tYWluO1xyXG4gICAgICAgIGlmICghbWV0YWRhdGFTY2hlbWEgfHwgIW1ldGFkYXRhU2NoZW1hLmVudGl0aWVzIHx8IG1ldGFkYXRhU2NoZW1hLmVudGl0aWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtZXRhZGF0YW1haW5UYWJsZSA9IG1ldGFkYXRhU2NoZW1hLmVudGl0aWVzWzBdO1xyXG4gICAgICAgIGlmIChtZXRhZGF0YW1haW5UYWJsZS50eXBlICYmIG1ldGFkYXRhbWFpblRhYmxlLnR5cGUuZmllbGRzKSB7XHJcbiAgICAgICAgICB0aGlzLmdldFBsYWluRmllbGRzKG1ldGFkYXRhbWFpblRhYmxlLnR5cGUuZmllbGRzKTtcclxuICAgICAgICAgIHRoaXMuZ2V0VGV4dEZpZWxkKG1ldGFkYXRhbWFpblRhYmxlLnR5cGUuZmllbGRzKTtcclxuICAgICAgICAgIGlmKHRoaXMubWV0YURhdGFUZXh0RmllbGRDbG91bW5zICYmIHRoaXMubWV0YURhdGFUZXh0RmllbGRDbG91bW5zLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0RmllbGQgPSB0aGlzLm1ldGFEYXRhVGV4dEZpZWxkQ2xvdW1ucy5maW5kKGl0ZW09PntcclxuICAgICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZS50b0xvd2VyQ2FzZSgpID09IHRoaXMubWV0YURhdGFUZXh0RmllbGRWYWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLm1ldGFEYXRhVGV4dEZpZWxkID0gdGV4dEZpZWxkPyB0ZXh0RmllbGQubGFiZWw6Jyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgICBlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcblxyXG4gIGdldFRleHRGaWVsZChmaWVsZHMpe1xyXG4gICAgZmllbGRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIHRoaXMubWV0YURhdGFUZXh0RmllbGRDbG91bW5zLnB1c2goXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGFiZWw6IGVsZW1lbnQubmFtZSxcclxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LnBhdGhcclxuICAgICAgICB9KTtcclxuICAgICAgaWYgKGVsZW1lbnQudHlwZSAmJiBlbGVtZW50LnR5cGUuZmllbGRzICYmIGVsZW1lbnQudHlwZS5maWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZ2V0VGV4dEZpZWxkKGVsZW1lbnQudHlwZS5maWVsZHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog6I635Y+W5YWD5pWw5o2u5by556qXXHJcbiAgICovXHJcbiAgZ2V0TWV0YWRhdGEoKSB7XHJcbiAgICBjb25zdCBtZXRhRGF0YUZhYyA9IHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KExvb2t1cENvbmZpZ01ldGFEYXRhQ29tcG9uZW50KTtcclxuICAgIGNvbnN0IG1ldGFEYXRhUmVmID0gbWV0YURhdGFGYWMuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgbWV0YURhdGFSZWYuaW5zdGFuY2UubWV0YWRhdGFQYXRoID0gdGhpcy5tZXRhZGF0YVBhdGg7XHJcbiAgICAvLyBtZXRhRGF0YVJlZi5pbnN0YW5jZS5pc0RlaXNnbmVyRW52ID0gdGhpcy5pc0RlaXNnbmVyRW52O1xyXG5cclxuICAgIHRoaXMubWV0YWRhdGFEaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KG1ldGFEYXRhUmVmLCB7XHJcbiAgICAgIHRpdGxlOiB0aGlzLnNlbGVjdFRpdGxlLFxyXG4gICAgICB3aWR0aDogOTQwLFxyXG4gICAgICBoZWlnaHQ6IDYwMCxcclxuICAgICAgc2hvd0J1dHRvbnM6IGZhbHNlLFxyXG4gICAgICBzaG93TWF4QnV0dG9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgbWV0YURhdGFSZWYuaW5zdGFuY2Uuc2VsZWN0ZWRNZXRhLnN1YnNjcmliZSgoJGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmICghJGV2ZW50IHx8ICEkZXZlbnQubWV0YWRhdGEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5tZXRlZGF0YUluaXQoJGV2ZW50KTtcclxuICAgICAgdGhpcy5jbG9zZU1ldGFkYXRhRGxnKCk7XHJcbiAgICB9KTtcclxuICAgIG1ldGFEYXRhUmVmLmluc3RhbmNlLmNsb3NlTW9kYWwuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgLy/mtYvor5VcclxuICAgICAgLy90aGlzLm1ldGVkYXRhSW5pdCgxKTtcclxuICAgICAgdGhpcy5jbG9zZU1ldGFkYXRhRGxnKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOS+m+acjeWKoeS9v+eUqOeahOiOt+WPluaPkOS6pOaVsOaNrlxyXG4gICAqL1xyXG4gIGdldGRhdGEoKSB7XHJcbiAgICAvL3RoaXMubG9va3VwQ29uZmlnRGF0YS5maWx0ZXIgPSB0aGlzLmZnLmNvbmRpdGlvbnM7XHJcbiAgICBsZXQgY29uZGl0aW9ucyA9IHRoaXMuZmcuY29uZGl0aW9ucy5maWx0ZXIoYyA9PiBjLmZpbHRlckZpZWxkKTtcclxuICAgIHRoaXMubG9va3VwQ29uZmlnRGF0YS5maWx0ZXIgPSBjb25kaXRpb25zO1xyXG4gICAgdGhpcy5sb29rdXBDb25maWdEYXRhLmNvbmZpZ0lkID0gdGhpcy5jb25maWdJZDtcclxuICAgIHRoaXMubG9va3VwQ29uZmlnRGF0YS5jb2RlID0gdGhpcy5jb25maWdDb2RlO1xyXG4gICAgdGhpcy5sb29rdXBDb25maWdEYXRhLm5hbWUgPSB0aGlzLmNvbmZpZ05hbWU7XHJcbiAgICB0aGlzLmxvb2t1cENvbmZpZ0RhdGEudGV4dEZpZWxkID0gdGhpcy5tZXRhRGF0YVRleHRGaWVsZFZhbHVlO1xyXG4gICAgdGhpcy5sb29rdXBDb25maWdEYXRhLmxvYWREYXRhVHlwZSA9IHRoaXMubG9hZERhdGFUeXBlO1xyXG4gICAgcmV0dXJuIHRoaXMubG9va3VwQ29uZmlnRGF0YTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICog5YWz6Zet5by556qXXHJcbiAgICovXHJcbiAgY2xvc2VNZXRhZGF0YURsZygpIHtcclxuICAgIGlmICh0aGlzLm1ldGFkYXRhRGlhbG9nKSB7XHJcbiAgICAgIHRoaXMubWV0YWRhdGFEaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAgICog6I635Y+W5biu5Yqpc2NoZW1h5a2X5q61XHJcbiAgICAgKiBAcGFyYW0gc2NoZW1hIHNjaGVtYVxyXG4gICAgICovXHJcbiAgZ2V0SGVscEZpZWxkcyhzY2hlbWEpIHtcclxuICAgIGlmICghc2NoZW1hIHx8ICFzY2hlbWEuZW50aXRpZXMgfHwgc2NoZW1hLmVudGl0aWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYWluVGFibGUgPSBzY2hlbWEuZW50aXRpZXNbMF07XHJcblxyXG4gICAgaWYgKG1haW5UYWJsZS50eXBlICYmIG1haW5UYWJsZS50eXBlLmZpZWxkcykge1xyXG4gICAgICB0aGlzLmdldFBsYWluRmllbGRzKG1haW5UYWJsZS50eXBlLmZpZWxkcyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgZ2V0UGxhaW5GaWVsZHMoZmllbGRzKSB7XHJcbiAgICB0aGlzLmZpbHRlckNvbHVtbnMgPSBbXTtcclxuICAgIGZpZWxkcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICB0aGlzLmZpbHRlckNvbHVtbnMgPSB0aGlzLmZpbHRlckNvbHVtbnMuY29uY2F0KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGxhYmVsOiBlbGVtZW50Lm5hbWUsXHJcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5wYXRoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDlhbPogZTooajlrZfmrrUgLyBVRFTlrZfmrrVcclxuICAgICAgaWYgKGVsZW1lbnQudHlwZSAmJiBlbGVtZW50LnR5cGUuZmllbGRzICYmIGVsZW1lbnQudHlwZS5maWVsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuZ2V0UGxhaW5GaWVsZHMoZWxlbWVudC50eXBlLmZpZWxkcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDluK7liqnlhYPmlbDmja7kuK3lrZjlgqjnmoRyZWxhdGlvbuetieWtl+autemcgOimgei9rOaIkOaemuS4vuWAvFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYWRhcHRIZWxwQ29uZGl0aW9ucyhjb25kaXRpb25zKSB7XHJcblxyXG4gICAgaWYgKCFjb25kaXRpb25zIHx8ICFjb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBjb25kaXRpb25zLmZvckVhY2goY2QgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIChjZC5yZWxhdGlvbikgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgY2QucmVsYXRpb24gPSBGaWx0ZXJSZWxhdGlvbltjZC5yZWxhdGlvbl0gYXMgYW55O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgKGNkLmNvbXBhcmUpICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgIGNkLmNvbXBhcmUgPSBDb21wYXJlW2NkLmNvbXBhcmVdIGFzIGFueTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIChjZC5leHByZXNzdHlwZSkgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgaWYgKEV4cHJlc3NWYWx1ZVR5cGUpIHtcclxuICAgICAgICAgIGNkLmV4cHJlc3N0eXBlID0gRXhwcmVzc1ZhbHVlVHlwZVtjZC5leHByZXNzdHlwZV0gYXMgYW55O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjZC5leHByZXNzdHlwZSA9IGNkLmV4cHJlc3N0eXBlID09PSAnVmFsdWUnID8gMCA6IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBjb25kaXRpb25zO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDlhYPmlbDmja7kv6Hmga/liJ3lp4vljJZcclxuICAgKiBAcGFyYW0gZXZlbnQgXHJcbiAgICovXHJcbiAgbWV0ZWRhdGFJbml0KGV2ZW50KSB7XHJcbiAgICBjb25zdCBoZWxwT2JqZWN0ID0gSlNPTi5wYXJzZShldmVudC5tZXRhZGF0YS5jb250ZW50KTtcclxuICAgIHRoaXMubWV0YURhdGEgPSBoZWxwT2JqZWN0O1xyXG4gICAgdGhpcy5maWx0ZXJDb25kaXRpb25zID0gdGhpcy5hZGFwdEhlbHBDb25kaXRpb25zKGhlbHBPYmplY3QuZGF0YVNvdXJjZS5jb25kaXRpb25zKTtcclxuICAgIHRoaXMuZ2V0SGVscEZpZWxkcyhoZWxwT2JqZWN0LnNjaGVtYS5tYWluKTtcclxuICAgIGlmIChldmVudC5tZXRhZGF0YS5uYW1lKSB7XHJcbiAgICAgIHRoaXMubWV0YURhdGFOYW1lID0gZXZlbnQubWV0YWRhdGEubmFtZTtcclxuICAgIH1cclxuICAgIHRoaXMubWV0YURhdGFUZXh0RmllbGQgPSBoZWxwT2JqZWN0LnRleHRGaWVsZE5hbWU7XHJcbiAgICB0aGlzLm1ldGFEYXRhVGV4dEZpZWxkVmFsdWUgPSBoZWxwT2JqZWN0LnRleHRGaWVsZDtcclxuICAgIHRoaXMuaXNUcmVlTGlzdCA9IChoZWxwT2JqZWN0LmRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICd0cmVlbGlzdCcpXHJcbiAgICAvL3RoaXMubG9hZERhdGFUeXBlID0gaGVscE9iamVjdFsnZGF0YVNvdXJjZSddWyd0cmVlSW5mbyddWydsb2FkRGF0YVR5cGUnXTtcclxuICAgIGxldCBtZXRlZGF0YUxvYWREYXRhVHlwZSA9IGhlbHBPYmplY3RbJ2RhdGFTb3VyY2UnXVsndHJlZUluZm8nXVsnbG9hZERhdGFUeXBlJ107XHJcbiAgICBpZihtZXRlZGF0YUxvYWREYXRhVHlwZSA9PSAnYWxsJykgdGhpcy5sb2FkRGF0YVR5cGUgPSAnbG9hZGFsbCc7XHJcbiAgICBlbHNlIGlmKG1ldGVkYXRhTG9hZERhdGFUeXBlID09ICdhc3luYycpIHRoaXMubG9hZERhdGFUeXBlID0gJ2xheWVybG9hZCc7XHJcbiAgICB0aGlzLmxvb2t1cENvbmZpZ0RhdGEuaGVscElkID0gZXZlbnQubWV0YWRhdGEuaWQ7XHJcbiAgICAvL+aooeaLn+aVsOaNruiOt+WPllxyXG4gICAgLy8gbGV0IGV2ZW50MjogYW55O1xyXG4gICAgLy8gdGhpcy5odHRwLmdldCgnYXNzZXRzL2RhdGEvbG9va3VwY29uZmlnMi5qc29uJykuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgIC8vICAgZXZlbnQyID0gZGF0YTtcclxuICAgIC8vICAgY29uc3QgaGVscE9iamVjdCA9IEpTT04ucGFyc2UoZXZlbnQyLm1ldGFkYXRhLmNvbnRlbnQpO1xyXG4gICAgLy8gICB0aGlzLm1ldGFEYXRhID0gaGVscE9iamVjdDtcclxuICAgIC8vICAgdGhpcy5maWx0ZXJDb25kaXRpb25zID0gdGhpcy5hZGFwdEhlbHBDb25kaXRpb25zKGhlbHBPYmplY3QuZGF0YVNvdXJjZS5jb25kaXRpb25zKTtcclxuICAgIC8vICAgdGhpcy5nZXRIZWxwRmllbGRzKGhlbHBPYmplY3Quc2NoZW1hLm1haW4pO1xyXG4gICAgLy8gICBpZiAoZXZlbnQyLm1ldGFkYXRhLmZpbGVOYW1lKSB7XHJcbiAgICAvLyAgICAgdGhpcy5tZXRhRGF0YU5hbWUgPSBldmVudDIubWV0YWRhdGEuZmlsZU5hbWU7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhpcy5tZXRhRGF0YVRleHRGaWVsZCA9IGhlbHBPYmplY3QudGV4dEZpZWxkXHJcbiAgICAvLyAgIHRoaXMuaXNUcmVlTGlzdCA9IChoZWxwT2JqZWN0LmRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICd0cmVlbGlzdCcpXHJcbiAgICAvLyAgIHRoaXMubG9hZERhdGFUeXBlID0gaGVscE9iamVjdFsnZGF0YVNvdXJjZSddWyd0cmVlSW5mbyddWydsb2FkRGF0YVR5cGUnXTtcclxuICAgIC8vICAgdGhpcy5sb29rdXBDb25maWdEYXRhLmhlbHBJZCA9IGV2ZW50Mi5tZXRhZGF0YS5pZDtcclxuICAgIC8vICAgY29uc29sZS5sb2coaGVscE9iamVjdCk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyApO1xyXG5cclxuICB9XHJcbiAgLyoqXHJcbiAgICog5biu5Yqp5paH5pys5a2X5q615by556qXXHJcbiAgICovXHJcbiAgZ2V0VGV4dEZpZWxkTmFtZSgpIHtcclxuICAgIGNvbnN0IGZpbGVOYW1lRGF0YUZhYyA9IHRoaXMuY2ZyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFNlbGVjdEhlbHBUZXh0RmllbGRDb21wb25lbnQpO1xyXG4gICAgY29uc3QgZmlsZU5hbWVEYXRhUmVmID0gZmlsZU5hbWVEYXRhRmFjLmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIGlmKCF0aGlzLm1ldGFEYXRhKSByZXR1cm47XHJcbiAgICBmaWxlTmFtZURhdGFSZWYuaW5zdGFuY2UuaGVscElkID0gdGhpcy5tZXRhRGF0YS5pZDtcclxuICAgIGZpbGVOYW1lRGF0YVJlZi5pbnN0YW5jZS52YWx1ZSA9IHRoaXMubWV0YURhdGFUZXh0RmllbGRWYWx1ZTtcclxuICAgIGZpbGVOYW1lRGF0YVJlZi5pbnN0YW5jZS5zY2hlbWFEYXRhID0gdGhpcy5tZXRhRGF0YS5zY2hlbWEubWFpbjtcclxuICAgIHRoaXMudGV4dEZpZWxkRGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyhmaWxlTmFtZURhdGFSZWYsIHtcclxuICAgICAgdGl0bGU6IHRoaXMuc2VsZWN0RmlsZU5hbWVUaXRsZSxcclxuICAgICAgd2lkdGg6IDkwMCxcclxuICAgICAgaGVpZ2h0OiA2MDAsXHJcbiAgICAgIHNob3dCdXR0b25zOiB0cnVlLFxyXG4gICAgICBidXR0b25zOiBmaWxlTmFtZURhdGFSZWYuaW5zdGFuY2UubW9kYWxGb290ZXJcclxuICAgIH0pO1xyXG5cclxuICAgIGZpbGVOYW1lRGF0YVJlZi5pbnN0YW5jZS5zdWJtaXRNb2RhbC5zdWJzY3JpYmUoKCRldmVudCkgPT4ge1xyXG4gICAgICBpZiAoJGV2ZW50LnZhbHVlKSB7XHJcbiAgICAgICAgLy90aGlzLm1ldGFEYXRhVGV4dEZpZWxkID0gJGV2ZW50LnZhbHVlO1xyXG4gICAgICAgIHRoaXMubWV0YURhdGFUZXh0RmllbGQgPSAkZXZlbnQubmFtZTtcclxuICAgICAgICB0aGlzLm1ldGFEYXRhVGV4dEZpZWxkVmFsdWUgPSAkZXZlbnQudmFsdWU7XHJcbiAgICAgICAgdGhpcy5sb29rdXBDb25maWdEYXRhLnRleHRGaWVsZCA9IHRoaXMubWV0YURhdGFUZXh0RmllbGRWYWx1ZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNsb3NlVGV4dEZpZWxkRGxnKCk7XHJcbiAgICB9KTtcclxuICAgIGZpbGVOYW1lRGF0YVJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2VUZXh0RmllbGREbGcoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VUZXh0RmllbGREbGcoKSB7XHJcbiAgICBpZiAodGhpcy50ZXh0RmllbGREaWFsb2cpIHtcclxuICAgICAgdGhpcy50ZXh0RmllbGREaWFsb2cuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdfQ==