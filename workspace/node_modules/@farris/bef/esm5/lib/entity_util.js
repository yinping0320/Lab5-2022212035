/**
 * @fileoverview added by tsickle
 * Generated from: lib/entity_util.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: Witt
 * @Date: 2018-10-19 15:36:21
 * @Last Modified by: Witt
 * @Last Modified time: 2019-04-30 15:41:45
 */
import { FieldMetadataUtil } from '@farris/devkit';
var EntityUtil = /** @class */ (function () {
    function EntityUtil() {
    }
    /**
     * 查找属性的类型
     * @param entityType 实体类型
     * @param targetPropName 属性名称
     * @return 属性信息，包含属性类型（NgField、NgObject、NgList, NgDynamic）和属性对应的实体类型（当NgField类型时为null）
     */
    /**
     * 查找属性的类型
     * @param {?} entityType 实体类型
     * @param {?} targetPropName 属性名称
     * @return {?} 属性信息，包含属性类型（NgField、NgObject、NgList, NgDynamic）和属性对应的实体类型（当NgField类型时为null）
     */
    EntityUtil.getPropInfo = /**
     * 查找属性的类型
     * @param {?} entityType 实体类型
     * @param {?} targetPropName 属性名称
     * @return {?} 属性信息，包含属性类型（NgField、NgObject、NgList, NgDynamic）和属性对应的实体类型（当NgField类型时为null）
     */
    function (entityType, targetPropName) {
        /** @type {?} */
        var propType;
        /** @type {?} */
        var propEntityType;
        /** @type {?} */
        var propMetadata;
        // NgField
        /** @type {?} */
        var ngFieldProperties = FieldMetadataUtil.getNgFields(entityType);
        Object.keys(ngFieldProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                propType = 'NgField';
                propEntityType = null;
                propMetadata = ngFieldProperties[propName];
            }
        }));
        // NgObject
        /** @type {?} */
        var ngObjectProperties = FieldMetadataUtil.getNgObjects(entityType);
        Object.keys(ngObjectProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                propType = 'NgObject';
                propEntityType = ngObjectProperties[propName].type;
                propMetadata = ngObjectProperties[propName];
            }
        }));
        // NgList
        /** @type {?} */
        var ngListProperties = FieldMetadataUtil.getNgList(entityType);
        Object.keys(ngListProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                propType = 'NgList';
                propEntityType = ngListProperties[propName].type;
                propMetadata = ngListProperties[propName];
            }
        }));
        /** @type {?} */
        var ngDynamicProperties = FieldMetadataUtil.getNgDynamic(entityType);
        Object.keys(ngDynamicProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                propType = 'NgDynamic';
                propEntityType = ngDynamicProperties[propName].type;
                propMetadata = ngDynamicProperties[propName];
            }
        }));
        return { propType: propType, propEntityType: propEntityType, propMetadata: propMetadata };
    };
    /**
     * 获取实体的主键名
     * @param entityType 实体类型
     */
    /**
     * 获取实体的主键名
     * @param {?} entityType 实体类型
     * @return {?}
     */
    EntityUtil.getPrimaryKey = /**
     * 获取实体的主键名
     * @param {?} entityType 实体类型
     * @return {?}
     */
    function (entityType) {
        /** @type {?} */
        var primaryNgFiledProp = FieldMetadataUtil.getPrimaryFieldMetadata(entityType);
        if (primaryNgFiledProp) {
            return primaryNgFiledProp.dataField;
        }
        else {
            return '';
        }
    };
    /**
     * 是否为对象属性
     */
    /**
     * 是否为对象属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    EntityUtil.isObjectProp = /**
     * 是否为对象属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    function (entityType, targetPropName) {
        /** @type {?} */
        var isObjectProp = false;
        /** @type {?} */
        var ngObjectProperties = FieldMetadataUtil.getNgObjects(entityType);
        Object.keys(ngObjectProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                isObjectProp = true;
            }
        }));
        return isObjectProp;
    };
    /**
     * 检查是否是动态列属性
     */
    /**
     * 检查是否是动态列属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    EntityUtil.isDynamicProp = /**
     * 检查是否是动态列属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    function (entityType, targetPropName) {
        /** @type {?} */
        var isDynamicProp = false;
        /** @type {?} */
        var ngDynamicProperties = FieldMetadataUtil.getNgDynamic(entityType);
        Object.keys(ngDynamicProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        function (propName) {
            if (propName === targetPropName) {
                isDynamicProp = true;
            }
        }));
        return isDynamicProp;
    };
    /**
     * 为实体增加initialData属性
     * @param entity 实体实例
     * @param initialData 默认值对象
     */
    /**
     * 为实体增加initialData属性
     * @param {?} entity 实体实例
     * @param {?} initialData 默认值对象
     * @return {?}
     */
    EntityUtil.appendInitialData = /**
     * 为实体增加initialData属性
     * @param {?} entity 实体实例
     * @param {?} initialData 默认值对象
     * @return {?}
     */
    function (entity, initialData) {
        /** @type {?} */
        var data = Object.assign({}, initialData);
        delete data.id;
        delete data.parentID;
        entity['initialData'] = data;
    };
    return EntityUtil;
}());
export { EntityUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5X3V0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL2JlZi8iLCJzb3VyY2VzIjpbImxpYi9lbnRpdHlfdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU1BLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRW5EO0lBQUE7SUE0R0EsQ0FBQztJQTNHQzs7Ozs7T0FLRzs7Ozs7OztJQUNJLHNCQUFXOzs7Ozs7SUFBbEIsVUFBbUIsVUFBZSxFQUFFLGNBQXNCOztZQUVwRCxRQUFnQjs7WUFDaEIsY0FBbUI7O1lBQ25CLFlBQWlCOzs7WUFHZixpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDO1FBQ25FLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQyxRQUFnQjtZQUN0RCxJQUFJLFFBQVEsS0FBSyxjQUFjLEVBQUU7Z0JBQy9CLFFBQVEsR0FBRyxTQUFTLENBQUM7Z0JBQ3JCLGNBQWMsR0FBRyxJQUFJLENBQUM7Z0JBQ3RCLFlBQVksR0FBRyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM1QztRQUNILENBQUMsRUFBQyxDQUFDOzs7WUFHRyxrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3JFLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQyxRQUFnQjtZQUN2RCxJQUFJLFFBQVEsS0FBSyxjQUFjLEVBQUU7Z0JBQy9CLFFBQVEsR0FBRyxVQUFVLENBQUM7Z0JBQ3RCLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ25ELFlBQVksR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM3QztRQUNILENBQUMsRUFBQyxDQUFDOzs7WUFHRyxnQkFBZ0IsR0FBRyxp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dGVudCI6WyIvKlxyXG4gKiBAQXV0aG9yOiBXaXR0XHJcbiAqIEBEYXRlOiAyMDE4LTEwLTE5IDE1OjM2OjIxXHJcbiAqIEBMYXN0IE1vZGlmaWVkIGJ5OiBXaXR0XHJcbiAqIEBMYXN0IE1vZGlmaWVkIHRpbWU6IDIwMTktMDQtMzAgMTU6NDE6NDVcclxuICovXHJcbmltcG9ydCB7IEZpZWxkTWV0YWRhdGFVdGlsIH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5cclxuY2xhc3MgRW50aXR5VXRpbCB7XHJcbiAgLyoqXHJcbiAgICog5p+l5om+5bGe5oCn55qE57G75Z6LXHJcbiAgICogQHBhcmFtIGVudGl0eVR5cGUg5a6e5L2T57G75Z6LXHJcbiAgICogQHBhcmFtIHRhcmdldFByb3BOYW1lIOWxnuaAp+WQjeensFxyXG4gICAqIEByZXR1cm4g5bGe5oCn5L+h5oGv77yM5YyF5ZCr5bGe5oCn57G75Z6L77yITmdGaWVsZOOAgU5nT2JqZWN044CBTmdMaXN0LCBOZ0R5bmFtaWPvvInlkozlsZ7mgKflr7nlupTnmoTlrp7kvZPnsbvlnovvvIjlvZNOZ0ZpZWxk57G75Z6L5pe25Li6bnVsbO+8iVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRQcm9wSW5mbyhlbnRpdHlUeXBlOiBhbnksIHRhcmdldFByb3BOYW1lOiBzdHJpbmcpOiB7IHByb3BUeXBlOiBzdHJpbmcsIHByb3BFbnRpdHlUeXBlOiBhbnksIHByb3BNZXRhZGF0YTogYW55fSB7XHJcblxyXG4gICAgbGV0IHByb3BUeXBlOiBzdHJpbmc7XHJcbiAgICBsZXQgcHJvcEVudGl0eVR5cGU6IGFueTtcclxuICAgIGxldCBwcm9wTWV0YWRhdGE6IGFueTtcclxuXHJcbiAgICAvLyBOZ0ZpZWxkXHJcbiAgICBjb25zdCBuZ0ZpZWxkUHJvcGVydGllcyA9IEZpZWxkTWV0YWRhdGFVdGlsLmdldE5nRmllbGRzKGVudGl0eVR5cGUpO1xyXG4gICAgT2JqZWN0LmtleXMobmdGaWVsZFByb3BlcnRpZXMpLmZvckVhY2goKHByb3BOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKHByb3BOYW1lID09PSB0YXJnZXRQcm9wTmFtZSkge1xyXG4gICAgICAgIHByb3BUeXBlID0gJ05nRmllbGQnO1xyXG4gICAgICAgIHByb3BFbnRpdHlUeXBlID0gbnVsbDtcclxuICAgICAgICBwcm9wTWV0YWRhdGEgPSBuZ0ZpZWxkUHJvcGVydGllc1twcm9wTmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE5nT2JqZWN0XHJcbiAgICBjb25zdCBuZ09iamVjdFByb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ09iamVjdHMoZW50aXR5VHlwZSk7XHJcbiAgICBPYmplY3Qua2V5cyhuZ09iamVjdFByb3BlcnRpZXMpLmZvckVhY2goKHByb3BOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKHByb3BOYW1lID09PSB0YXJnZXRQcm9wTmFtZSkge1xyXG4gICAgICAgIHByb3BUeXBlID0gJ05nT2JqZWN0JztcclxuICAgICAgICBwcm9wRW50aXR5VHlwZSA9IG5nT2JqZWN0UHJvcGVydGllc1twcm9wTmFtZV0udHlwZTtcclxuICAgICAgICBwcm9wTWV0YWRhdGEgPSBuZ09iamVjdFByb3BlcnRpZXNbcHJvcE5hbWVdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBOZ0xpc3RcclxuICAgIGNvbnN0IG5nTGlzdFByb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ0xpc3QoZW50aXR5VHlwZSk7XHJcbiAgICBPYmplY3Qua2V5cyhuZ0xpc3RQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBwcm9wVHlwZSA9ICdOZ0xpc3QnO1xyXG4gICAgICAgIHByb3BFbnRpdHlUeXBlID0gbmdMaXN0UHJvcGVydGllc1twcm9wTmFtZV0udHlwZTtcclxuICAgICAgICBwcm9wTWV0YWRhdGEgPSBuZ0xpc3RQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbmdEeW5hbWljUHJvcGVydGllcyA9IEZpZWxkTWV0YWRhdGFVdGlsLmdldE5nRHluYW1pYyhlbnRpdHlUeXBlKTtcclxuICAgIE9iamVjdC5rZXlzKG5nRHluYW1pY1Byb3BlcnRpZXMpLmZvckVhY2goKHByb3BOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKHByb3BOYW1lID09PSB0YXJnZXRQcm9wTmFtZSkge1xyXG4gICAgICAgIHByb3BUeXBlID0gJ05nRHluYW1pYyc7XHJcbiAgICAgICAgcHJvcEVudGl0eVR5cGUgPSBuZ0R5bmFtaWNQcm9wZXJ0aWVzW3Byb3BOYW1lXS50eXBlO1xyXG4gICAgICAgIHByb3BNZXRhZGF0YSA9IG5nRHluYW1pY1Byb3BlcnRpZXNbcHJvcE5hbWVdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4geyBwcm9wVHlwZSwgcHJvcEVudGl0eVR5cGUsIHByb3BNZXRhZGF0YSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5a6e5L2T55qE5Li76ZSu5ZCNXHJcbiAgICogQHBhcmFtIGVudGl0eVR5cGUg5a6e5L2T57G75Z6LXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFByaW1hcnlLZXkoZW50aXR5VHlwZTogYW55KSB7XHJcbiAgICBjb25zdCBwcmltYXJ5TmdGaWxlZFByb3AgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXRQcmltYXJ5RmllbGRNZXRhZGF0YShlbnRpdHlUeXBlKTtcclxuICAgIGlmIChwcmltYXJ5TmdGaWxlZFByb3ApIHtcclxuICAgICAgcmV0dXJuIHByaW1hcnlOZ0ZpbGVkUHJvcC5kYXRhRmllbGQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmmK/lkKbkuLrlr7nosaHlsZ7mgKdcclxuICAgKi9cclxuICBzdGF0aWMgaXNPYmplY3RQcm9wKGVudGl0eVR5cGU6IGFueSwgdGFyZ2V0UHJvcE5hbWU6IHN0cmluZywgKSB7XHJcbiAgICBsZXQgaXNPYmplY3RQcm9wID0gZmFsc2U7XHJcbiAgICBjb25zdCBuZ09iamVjdFByb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ09iamVjdHMoZW50aXR5VHlwZSk7XHJcbiAgICBPYmplY3Qua2V5cyhuZ09iamVjdFByb3BlcnRpZXMpLmZvckVhY2goKHByb3BOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgaWYgKHByb3BOYW1lID09PSB0YXJnZXRQcm9wTmFtZSkge1xyXG4gICAgICAgIGlzT2JqZWN0UHJvcCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlzT2JqZWN0UHJvcDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOajgOafpeaYr+WQpuaYr+WKqOaAgeWIl+WxnuaAp1xyXG4gICAqL1xyXG4gIHN0YXRpYyBpc0R5bmFtaWNQcm9wKGVudGl0eVR5cGU6IGFueSwgdGFyZ2V0UHJvcE5hbWU6IHN0cmluZykge1xyXG4gICAgbGV0IGlzRHluYW1pY1Byb3AgPSBmYWxzZTtcclxuICAgIGNvbnN0IG5nRHluYW1pY1Byb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ0R5bmFtaWMoZW50aXR5VHlwZSk7XHJcbiAgICBPYmplY3Qua2V5cyhuZ0R5bmFtaWNQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBpc0R5bmFtaWNQcm9wID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaXNEeW5hbWljUHJvcDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4uuWunuS9k+WinuWKoGluaXRpYWxEYXRh5bGe5oCnXHJcbiAgICogQHBhcmFtIGVudGl0eSDlrp7kvZPlrp7kvotcclxuICAgKiBAcGFyYW0gaW5pdGlhbERhdGEg6buY6K6k5YC85a+56LGhXHJcbiAgICovXHJcbiAgc3RhdGljIGFwcGVuZEluaXRpYWxEYXRhIChlbnRpdHksIGluaXRpYWxEYXRhKSB7XHJcbiAgICBjb25zdCBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgaW5pdGlhbERhdGEpO1xyXG4gICAgZGVsZXRlIGRhdGEuaWQ7XHJcbiAgICBkZWxldGUgZGF0YS5wYXJlbnRJRDtcclxuICAgIGVudGl0eVsnaW5pdGlhbERhdGEnXSA9IGRhdGE7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgRW50aXR5VXRpbCB9O1xyXG4iXX0=