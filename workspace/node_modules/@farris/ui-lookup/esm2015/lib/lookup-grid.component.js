/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(lucas huang)
 * @Date: 2018-11-23 11:23:12
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-10-20 20:18:26
 * @Company: Inspur
 * @Version: v0.3.x
 */
import { Component, Input, ViewChild, EventEmitter, Injector, ComponentFactoryResolver, Output, ChangeDetectorRef, ViewEncapsulation, ViewContainerRef, forwardRef, ElementRef, NgZone, Renderer2, } from "@angular/core";
import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { of, Subject } from "rxjs";
import { LocaleService } from "@farris/ui-locale";
import { MessagerService } from "@farris/ui-messager";
import { LoadingService } from "@farris/ui-loading";
import { DataTableComponent } from "@farris/ui-datatable";
import { TreeTableComponent } from "@farris/ui-treetable";
import { LayoutComponent, LayoutPanelComponent } from "@farris/ui-layout";
import { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from "@farris/ui-common";
import { ShortcutsService } from "@farris/ui-shortcuts";
import { InputGroupComponent } from "@farris/ui-input-group";
import { NotifyService } from "@farris/ui-notify";
import { FAVORITE_FIELD_NAME, INPUT_GROUP_ICON, LookupGridDisplayType, QuickSelectDefaultOptions, SearchBarMode, } from "./lookup-displaytype";
import { LookupComponent } from "./lookup.component";
import { lookupGridDefaults, displayInfoDefault } from "./lookup-grid-options";
import { ServerSideToken } from "./http/ILookupHttpService";
import { LookupDefaultMapping } from "./lookup-defaut-mapping";
import { LookupUtils } from "./utils";
import { PersonalConfigService } from "./lookup-presonalConfig.service";
import { UtilService, TreeNodeHelper, FavoriteHelper, SelectionManager, DataTableEventManager, TreeTableEventManager, MultiSelectionManager, LookupHttpManager, LookupComponentManager, LookupDialogManager, onTextChanged, LookupSelectionService, } from "./services";
import { map, switchMap } from "rxjs/operators";
import { EventManager } from "@angular/platform-browser";
import { cloneDeep } from "lodash-es";
import { SingleSelectDirective } from "@farris/ui-forms";
/** @type {?} */
export const LOOKUPGRID_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    () => LookupGridComponent)),
    multi: true,
};
export class LookupGridComponent extends LookupComponent {
    /**
     * @param {?} injector
     * @param {?} cfr
     * @param {?} el
     * @param {?} utils
     * @param {?} defaultMapping
     * @param {?} changeDetector
     * @param {?} shortcuts
     * @param {?} lookupUtils
     * @param {?} zone
     * @param {?} render2
     */
    constructor(injector, cfr, el, utils, defaultMapping, changeDetector, shortcuts, lookupUtils, zone, render2) {
        super(injector, el, changeDetector);
        this.injector = injector;
        this.cfr = cfr;
        this.el = el;
        this.utils = utils;
        this.defaultMapping = defaultMapping;
        this.changeDetector = changeDetector;
        this.shortcuts = shortcuts;
        this.lookupUtils = lookupUtils;
        this.zone = zone;
        this.render2 = render2;
        this.groupIcon = INPUT_GROUP_ICON;
        this._displayType = "";
        /**
         * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
         */
        this.customDisplayType = false;
        this.viewType = "text";
        /**
         * 启用清空按钮
         */
        this.enableClear = true;
        /**
         * 服务器端排序
         */
        this.remoteSort = true;
        /**
         * 树表显示全选复选框。 默认不显示
         */
        this.showCheckAll = false;
        /**
         * 是否启用多选
         */
        this.singleSelect = true;
        /**
         * 多选分隔符, 默认为 ,
         */
        this.multipleChoiceSeparator = ",";
        /**
         * 可以为元数据ID、webapiURL
         */
        this.uri = '';
        /**
         * BE REST RUI
         * - 此处设置后 uri 失效
         */
        this.beUri = "";
        /**
         * 显示过滤工具条; 默认 true
         */
        this.showFilterBar = true;
        /**
         * 是否启用分页
         */
        this.pagination = true;
        /**
         * 当前页索引，从 1开始
         */
        this.pageIndex = 1;
        /**
         * 每页记录数
         */
        this.pageSize = 20;
        /**
         * 可用分页记录数列表
         */
        this.pageList = [10, 20, 30, 50, 100];
        /**
         * 总记录数
         */
        this.total = 0;
        /** 可拖动列 */
        // @Input() resizableColumns = true;
        /**
         * 显示列信息, 默认为 []
         */
        this.columns = [];
        /**
         * 帮助查询是否为远端查询
         */
        this.remoteSearch = true;
        /**
         * 文本变化后，进行服务器端查询
         */
        this.searchOnServer = true;
        /**
         * 不进行服务器查询，有啥算啥
         */
        this.nosearch = false;
        /**
         * 启用任意输入后，值通过输入时触发
         */
        this.clearMappings = new EventEmitter();
        // 收藏列表
        this.favoriteItems = [];
        /**
         * 是否启用级联选择控制选项
         */
        this.enableCascade = false;
        /**
         * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
         */
        this.cascadeStatus = "enable";
        /**
         * 分别级联选项的启用状态，默认全部启用
         */
        this.cascadeItems = {
            enable: true,
            up: true,
            down: true,
            disable: true
        };
        /**
         * 显示级联控制
         */
        this.showCascadeControl = true;
        this.placeholder = "";
        /**
         * 显示已选记录列表。 默认为 false 不显示
         */
        this.showSelected = false;
        /**
         * 应用收藏夹
         */
        this.useFavorite = false;
        /**
         * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
         */
        this.favoriteDataFrom = "remote";
        /**
         * 使用提示,快捷选择
         */
        this.useTip = false;
        /**
         * 记录窗口大小
         */
        this.isRecordSize = false;
        /**
         * 是否启用选中value值对应的行数据，默认 true
         */
        this.enableToSelect = true;
        this.enableFindText = false;
        /**
         * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
         */
        this.expandLevel = -1;
        this.navTreeTableOptions = {};
        this.treeTableOptions = {};
        this.dataTableOptions = {};
        this.defaultTreeTableOptions = {
            maxLevel: 9,
            enableContextMenu: false,
            contextMenuItems: [],
        };
        /**
         * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
         */
        this.loadTreeDataType = "default";
        /**
         * 窗口打开后立即加载数据，默认为 true
         */
        this.loadDataWhenOpen = true;
        /**
         * 导航列表，树列表在帮助打开后选中的数据;
         * 设置后，`selectFirstInNav` 失效！
         */
        this.navSelectedIds = "";
        /**
         * 导航帮助，选中第1条数据，默认为 false;
         * 注意：当`navSelectedIds`不为空时，此属性失效。
         */
        this.selectFirstInNav = false;
        /**
         * 启用构造完整树过滤
         */
        this.enableFullTree = true;
        /**
         * 显示文本自定义函数
         */
        this.displayFormatter = undefined;
        /**
         * 显示文本字段集合，以 英文 逗号隔开
         */
        this.displayFields = "";
        this.displayTextSeparator = "_";
        /**
         * 帮助元数据ID，不为空时调用指定的URI
         * /api/runtime/bcc/v1.0/help/data/{helpId}
         */
        this.helpId = "";
        /**
         * 文本对齐方式； left | center | right; 默认 left
         */
        this.textAlign = "left";
        /**
         * 鼠标滑过输入框时显示输入框内的文本信息
         */
        this.enableTitle = true;
        this.useExtendInfo = false;
        this.extInfoFields = "";
        this.extendInfo = "";
        /**
         * IDE 设计器自定义格式化 2103
         */
        this.customFormatter = null;
        this.customNavFormatter = null;
        /**
         * 自定义确定事件
         */
        this.okHandler = null;
        /**
         * 自定义取消事件
         */
        this.cancelHandler = null;
        this.tagboxHeight = "auto";
        /**
         * 启用获取所有子级数据的功能,仅支持分级码
         */
        this.enableGetAllChildNodes = true;
        this.shortcutKey = {
            /**
             * 打开帮助窗口
             */
            open: "ArrowRight",
            /**
             * 确认选择数据
             */
            confirm: "Enter",
            /**
             * 搜索框焦点
             */
            searchFocus: "F3",
            /**
             * 选中上一条
             */
            moveUp: "ArrowUp",
            /**
             * 选中下一条
             */
            moveDown: "ArrowDown",
            /**
             * 展开节点
             */
            expand: "ArrowRight",
            /**
             * 折叠节点
             */
            collapse: "ArrowLeft",
            /**
             * 下一页
             */
            nextPager: "PageDown",
            /**
             * 上一页
             */
            prevPager: "PageUp",
        };
        /**
         * 快捷选择相关配置项，默认为 null, 即不启用此功能
         */
        this.quickSelect = null;
        /**
         * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
         */
        this.treeToList = false;
        this.navTreeToList = false;
        /**
         * 带导航的帮助中，是否显示左侧导航部分。默认 true
         */
        this.showNavigation = true;
        /**
         * 是否启用新布局
         * - 默认 false
         */
        this.useNewLayout = false;
        /**
         * 启用多字段查询 默认为 false
         * - 启用此特性后，useNewLayout 自动启用
         */
        this.enableMultiFieldSearch = false;
        /**
         * 搜索工具条显示模式， both: 全部显示；onlyfield: 仅显示字段；onlyinput: 仅显示搜索输入框。默认 both
         */
        this.searchBarMode = SearchBarMode.both;
        /**
         * 允许查询的字段，仅启用多字段查询时有效，多个字段以 “,” 隔开；
         *  - nav 左侧导航字段；main 主数据字段;
         *  - 默认为 null, 即从所有显示列中自动提取
         */
        this.allowQueryFields = null;
        this.labels = {
            /**
             * 数据列表
             */
            dataTab: '',
            /**
             * 收藏夹
             */
            favTab: '',
            /**
             * 取消已选
             */
            clearAllSelected: '',
            /**
             * 已选记录面板中 删除已选
             */
            delSelected: ''
        };
        /**
         * 允许任意字段进行查询； 默认 true
         */
        this.searchAnyField = true;
        this.selectedData = new EventEmitter();
        this.clear = new EventEmitter();
        /**
         * 未启用多字段查询时触发
         */
        this.search = new EventEmitter();
        /**
         * 启用多字段查询时触发
         */
        this.query = new EventEmitter();
        // 帮助文本框中值变化事件
        this.valueChanged = new EventEmitter();
        this.loadSuccess = new EventEmitter();
        this.pagerChanged = new EventEmitter();
        this.expandTreeNode = new EventEmitter();
        this.textChanged = new EventEmitter();
        this.checkedChange = new EventEmitter();
        this.tagRemoved = new EventEmitter();
        /**
         * 内容中留白边距
         */
        this.containerMargin = { top: 0, bottom: 5, left: 14, right: 14 };
        this.containerStyle = {};
        this._gridOptions = lookupGridDefaults;
        // 导航帮助左则宽度
        this.leftPanelWidth = 320;
        // 导航帮助窗口最小宽度
        this.navLookupDialogMinWidth = 960;
        this.navigationFilter = null;
        this.subscriptions = [];
        this.isTextChange = false;
        this.isTabChanged = false;
        this.displayInfo = Object.assign({}, displayInfoDefault);
        this.tabChangeSubscription = null;
        // 暂存行点击数据  用于收藏
        this.personalConf = {};
        this.favoriteColumns = [];
        /**
         * 临时查询参数
         */
        this._searchState = null;
        this.allData = [];
        this.allColumnsTitle = "所有列";
        this.mustWriteSomething = "请输入关键字后查询。";
        this.mustChoosAdatarow = "请选择一条记录！";
        this.addFavoriteSuccess = "收藏成功。";
        this.delFavoriteSuccess = "移除收藏成功。";
        /**
         * 使用内置的查询方法, 默认 false
         */
        this.useInsideSearchHandler = false;
        this.searching = false;
        /**
         * 临时存储查询结果集
         */
        this._searchResult = null;
        this.lookupinitializationSubject = new Subject();
        /**
         * 多选时，选中的数据
         */
        this.currentSelectedItems = of([]);
        /**
         * 已选数据列信息
         */
        this.selectedColumns = [];
        this.activeTab = "datalist";
        this.favHelper = null;
        this.ttEventMgr = null;
        this.multiSelMgr = null;
        this.httpMgr = null;
        this.lookupCmpMgr = null;
        this.dialogMgr = null;
        this.selectionMgr = null;
        this.dtEventMgr = null;
        this.lookupSelectionSer = null;
        this.controlId = "";
        this.savingFaoriteData = false;
        this.isReady = false;
        this.showTagboxClearButton = false;
        this.hasError = false;
        this.cascadeStatusItems = [
            { valeu: 'enable', label: '' },
            { valeu: 'up', label: '' },
            { valeu: 'down', label: '' },
            { valeu: 'disable', label: '' }
        ];
        this.isGetAllChidlNodes = false;
        /**
         * 选中记录ID，自定义帮助取数时使用
         */
        this.selectedIds = [];
        this.lookupSearchInputEvent = null;
        this.farrisInstances = null;
        /**
         * 用户初始设置
         */
        this._userSettings = {};
        this._treeInfo_ = null;
        /**
         * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
         */
        this.dialogContentHeight = 0;
        /**
         * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
         */
        this.includeSubordinates = false;
        this.includeSubordinates$ = new Subject();
        this.includeSubordinates$$ = null;
        this.debugSer = null;
        this.createInstance();
        this.currentSelectedItems = this.lookupSelectionSer.selected$;
        this.eventManager = this.injector.get(EventManager);
        this.farrisInstances = this.injector.get(FarrisComponentInstanceService, null);
        this.overLayService = new OverLayHiddenService();
        this.debugSer = this.injector.get(DebugService, null);
        if (this.debugSer) {
            this.debugSer.useDebugMode();
        }
        this.lookupSelectionSer.selectionChanged$.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (this.selectedDtRef) {
                if (!e.selected) {
                    this.selectedDtRef.unCheckRows(e.data);
                }
            }
        }));
        this.initLabels();
    }
    /**
     * @return {?}
     */
    get displayType() {
        return this._displayType;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set displayType(val) {
        if (val) {
            /** @type {?} */
            const types = Object.values(LookupGridDisplayType);
            /** @type {?} */
            const i = types.findIndex((/**
             * @param {?} n
             * @return {?}
             */
            (n) => n === val.toUpperCase()));
            if (i > -1) {
                /** @type {?} */
                const keys = Object.keys(LookupGridDisplayType);
                this._displayType = LookupGridDisplayType[keys[i]];
            }
        }
        else {
            this._displayType = val;
        }
    }
    /**
     * @return {?}
     */
    get gridOptions() {
        if (this.useFavorite &&
            this.columns &&
            this.columns.length > 0 &&
            !this.columns.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => item.field === FAVORITE_FIELD_NAME))) {
            this.columns.push({
                field: FAVORITE_FIELD_NAME,
                title: "",
                width: 40,
                align: "center",
                fixed: 'right',
                // fixedWidth: true,
                formatter: this.favHelper.favoriteColumnFormatter,
            });
        }
        this._gridOptions = Object.assign(this._gridOptions, {
            singleSelect: this.singleSelect,
            idField: this.idField,
            uri: this.uri,
            showFilterBar: this.enableMultiFieldSearch ? false : this.showFilterBar,
            pagination: this.pagination,
            pageIndex: this.pageIndex,
            pageSize: this.pageSize,
            pageList: this.pageList,
            total: this.total,
            items: this.items,
            columns: this.columns,
            resizableColumns: true,
            fixedHeader: true,
            hover: true,
            treeInfo: this.treeInfo,
            searchAnyField: this.searchAnyField
        });
        return this._gridOptions;
    }
    /**
     * @param {?} opts
     * @return {?}
     */
    set gridOptions(opts) {
        this._gridOptions = Object.assign({}, this._gridOptions, opts);
        // this.selectedColumns = this.multiSelMgr.initSelectedColumns();
    }
    /**
     * @return {?}
     */
    get selections() {
        /** @type {?} */
        const selectItems = this.lookupSelectionSer.getSelections();
        if (this.singleSelect) {
            return selectItems[0];
        }
        else {
            return selectItems;
        }
    }
    /**
     * @return {?}
     */
    get usePersionalConf() {
        return this.useFavorite || this.useTip || this.isRecordSize;
    }
    /**
     * @return {?}
     */
    get displayTextList() {
        if (this.displayText) {
            return this.displayText.split(this.multipleChoiceSeparator);
        }
        return [];
    }
    /**
     * @return {?}
     */
    get userInitialConfig() {
        return this._userSettings;
    }
    /**
     * @private
     * @return {?}
     */
    initLabels() {
        if (!this.labels) {
            this.labels = {
                /**
                 * 数据列表
                 */
                dataTab: '',
                /**
                 * 收藏夹
                 */
                favTab: '',
                /**
                 * 取消已选
                 */
                clearAllSelected: '',
                /**
                 * 已选记录面板中 删除已选
                 */
                delSelected: ''
            };
        }
        if (!this.labels.clearAllSelected) {
            this.labels.clearAllSelected = this.localService.getValue('lookup.selectedInfo.clear');
        }
        if (!this.labels.favTab) {
            this.labels.favTab = this.localService.getValue('lookup.favorites');
        }
        if (!this.labels.dataTab) {
            this.labels.dataTab = this.localService.getValue('lookup.datalist');
        }
    }
    /**
     * @param {?} msg
     * @param {?=} type
     * @return {?}
     */
    writeConsole(msg, type = 'warn') {
        if (this.debugSer) {
            this.debugSer[type](msg);
        }
    }
    /**
     * @return {?}
     */
    getFilterBarHeight() {
        return (this.showFilterBar && this.enableMultiFieldSearch ? 42 : 0);
    }
    /**
     * @param {?=} isDouble
     * @return {?}
     */
    getSpaceWidth(isDouble = false) {
        return (!this.enableMultiFieldSearch ? 28 : 48) + (isDouble ? (this.enableMultiFieldSearch ? 5 : 7) : 0);
    }
    /**
     * @private
     * @return {?}
     */
    cacheUserConfig() {
        this._userSettings._title = this.title;
        this.displayInfo.title = this.title;
        this._userSettings._columns = this.deepClone(this.columns || []);
        this._userSettings.getColumns = (/**
         * @return {?}
         */
        () => {
            return this._userSettings._columns;
        });
        this._userSettings.reset = (/**
         * @return {?}
         */
        () => {
            this.title = this._userSettings._title;
            this.displayInfo.title = this.title;
            this.columns = this._userSettings.getColumns();
        });
    }
    /**
     * @private
     * @param {?} obj
     * @return {?}
     */
    deepClone(obj) {
        if (obj === null) {
            return null;
        }
        /** @type {?} */
        const clone = Object.assign({}, obj);
        Object.keys(clone).forEach((/**
         * @param {?} key
         * @return {?}
         */
        (key) => (clone[key] =
            typeof obj[key] === "object"
                ? this.deepClone(obj[key])
                : obj[key])));
        if (Array.isArray(obj)) {
            clone.length = obj.length;
            return Array.from(clone);
        }
        return clone;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.cacheUserConfig();
        if (!this.loadTreeDataType) {
            this.loadTreeDataType = "default";
        }
        this.checkGridOptions();
        this.displayInfo.title = this.title;
        /** 传递上下文 */
        if (this.http) {
            this.http.context = this.context;
        }
        this.allColumnsTitle = this.localService.getValue("lookup.allColumns");
        this.mustWriteSomething = this.localService.getValue("lookup.mustWriteSomething");
        this.mustChoosAdatarow = this.localService.getValue("lookup.mustChoosAdatarow");
        this.addFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.addFav") ||
                this.addFavoriteSuccess;
        this.delFavoriteSuccess =
            this.localService.getValue("lookup.favoriteInfo.cancelFav") ||
                this.delFavoriteSuccess;
        this.dialogMgr.onDialogCreated();
        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;
        if (this.quickSelect) {
            this.quickSelect = Object.assign({}, QuickSelectDefaultOptions, this.quickSelect || {});
        }
        this.setContainerMargin();
    }
    /**
     * 内容中留白边距
     * @return {?}
     */
    setContainerMargin() {
        /** @type {?} */
        const mrn = !this.enableMultiFieldSearch ? 14 : 24;
        /** @type {?} */
        const mb = !this.enableMultiFieldSearch ? 5 : 0;
        this.containerMargin = { top: 0, bottom: mb, left: mrn, right: mrn };
        if (this.enableMultiFieldSearch) {
            this.useNewLayout = true;
        }
        this.containerStyle = {
            marginLeft: this.containerMargin.left + "px",
            marginRight: this.containerMargin.right + "px",
            marginTop: this.containerMargin.top + "px",
            marginBottom: this.containerMargin.bottom + "px",
        };
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.subscriptions.forEach((/**
         * @param {?} n
         * @return {?}
         */
        (n) => {
            if (n) {
                n.unsubscribe();
                n = null;
            }
        }));
        if (this.selectionMgr) {
            this.selectionMgr.destroy();
        }
        this.subscriptions = [];
        if (this.farrisInstances) {
            this.farrisInstances.destroy(this.el.nativeElement);
        }
        if (this.lookupSearchInputEvent) {
            this.lookupSearchInputEvent();
        }
        this.lookupUtils.destroy();
        this.overLayService.destory(this.el.nativeElement);
        this.overLayService = null;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes.columns && !changes.columns.isFirstChange()) {
            this.cacheUserConfig();
        }
        if (changes.enableMultiFieldSearch && !changes.enableMultiFieldSearch.isFirstChange()) {
            this.setContainerMargin();
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (!this.quickSelect || !this.quickSelect.enable) {
            this.lookupSearchInputEvent = onTextChanged.bind(this)();
        }
        // 初始化个性化配置
        if (this.usePersionalConf) {
            this.favHelper.initPersonalInfo();
        }
        if (this.useExtendInfo) {
            /** @type {?} */
            const jsonData = this.selectionMgr.getBindingData();
            this.updateExtendInfo(jsonData, false);
        }
        if (this.viewType === "text") {
            // this.shortcuts.add({
            //     key: 'F2',
            //     target: this.inputGroup.textbox.nativeElement,
            //     command: () => {
            //         this.showDialog();
            //     }
            // });
            this.render2.listen(this.inputGroup.textbox.nativeElement, "keydown.F2", this.showDialog.bind(this));
        }
        else {
            this.registerMouseEventForTagView();
            if (this.tagboxHeight) {
                /** @type {?} */
                const el = this.tagbox.nativeElement.querySelector(".multi-more");
                /** @type {?} */
                let tbh = this.tagboxHeight;
                if (tbh !== "auto") {
                    tbh += "px";
                    if (this.maxTagboxHeight) {
                        this.render2.setStyle(el, "maxHeight", `${this.maxTagboxHeight}px`);
                    }
                }
                this.render2.setStyle(el, "height", tbh);
            }
        }
        if (this.el && this.farrisInstances) {
            this.farrisInstances.add(this.el.nativeElement, this);
        }
    }
    /**
     * @private
     * @return {?}
     */
    createInstance() {
        this.http = this.injector.get(ServerSideToken, null);
        this.messagerService = this.injector.get(MessagerService);
        this.loadingService = this.injector.get(LoadingService);
        this.notifyService = this.injector.get(NotifyService, null);
        this.personalConfigService = this.injector.get(PersonalConfigService, null);
        this.lookupSelectionSer = new LookupSelectionService(this);
        this.utilService = new UtilService(this);
        this.localService = this.injector.get(LocaleService);
        this.treeNodeHelper = new TreeNodeHelper(this);
        this.favHelper = new FavoriteHelper(this);
        this.ttEventMgr = new TreeTableEventManager(this);
        this.multiSelMgr = new MultiSelectionManager(this);
        this.httpMgr = new LookupHttpManager(this);
        this.lookupCmpMgr = new LookupComponentManager(this);
        this.dialogMgr = new LookupDialogManager(this);
        this.selectionMgr = new SelectionManager(this);
        this.dtEventMgr = new DataTableEventManager(this);
    }
    /**
     * @return {?}
     */
    showDialog() {
        if (this.disabled || this.readonly) {
            return false;
        }
        this.selectionMgr.initDisplayValue();
        this.dictPickingSubscription = this.dictPicking({
            instance: this,
        }).subscribe((/**
         * @param {?} pr
         * @return {?}
         */
        (pr) => {
            this.dialogMgr.canOpenDialog(pr);
        }));
        return false;
    }
    /**
     * 判断是否为双列表帮助
     * @return {?}
     */
    isDoublleList() {
        return ((this.displayType === LookupGridDisplayType.NavList ||
            this.displayType === LookupGridDisplayType.NavTreeList ||
            this.displayType === LookupGridDisplayType.NavListTree) && this.showNavigation);
    }
    /**
     * 判断是否显示为树帮助
     * @return {?}
     */
    isTree() {
        /** @type {?} */
        const dtyp = this.displayType.toUpperCase();
        return (dtyp === LookupGridDisplayType.TreeList || dtyp === LookupGridDisplayType.NavListTree);
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onResized(e) {
        this.resizeCmp(e.size);
        this.resized.emit(e.size);
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onResizing(pos) {
        this.resizing.emit(pos.size);
        this.resizeCmp(pos.size);
        if (this.isDoublleList() && this.leftComponentRef) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
    }
    /**
     * @param {?} pos
     * @return {?}
     */
    onMaxDialog(pos) {
        this.resizeCmp(pos.size);
        if (this.leftPanel) {
            this.leftComponentRef.instance.resize({
                width: this.leftPanel.width,
                height: this.dialogMgr.getHeight(),
            });
        }
        // tfs 543132 
        // this.dialogHeight = pos.size.height;
        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();
        this.dialogMaxed.emit(pos.size);
    }
    /**
     * @param {?=} size
     * @return {?}
     */
    resizeCmp(size) {
        if (!this.componentRef || !this.componentRef.instance) {
            return;
        }
        if (!size) {
            size = this.dialog.size;
        }
        /** @type {?} */
        const _size = {
            width: size.width -
                this.containerMargin.left -
                this.containerMargin.right,
            height: 0
        };
        if (this.useFavorite && this.favoritesComponentRef && this.activeTab == 'favorite') {
            _size.height = this.lookupCmpMgr.getCmpHeight(true);
            this.favoritesComponentRef.instance.resize(_size);
        }
        else {
            _size.height = this.lookupCmpMgr.getCmpHeight();
            if (this.isDoublleList()) {
                _size.width = size.width - this.leftPanel.width - this.getSpaceWidth(true);
            }
            this.componentRef.instance.resize(_size);
        }
        if (this.isRecordSize) {
            this.personalConf.size = this.dialog.size;
            this.personalConfigService.updatePersonalConfig({
                size: this.dialog.size,
            });
        }
        if (this.isDoublleList() && this.layoutRef) {
            this.layoutRef.setPanelMaxSize();
        }
    }
    /**
     * @private
     * @return {?}
     */
    checkGridOptions() {
        if (!this.gridOptions.idField) {
            this.writeConsole("未设置主键字段 idField");
        }
        if (!this.beforeSelectData) {
            this.beforeSelectData = (/**
             * @return {?}
             */
            () => {
                return of(true);
            });
        }
        /** @type {?} */
        const ctxMenuLanguages = this.localService.getValue("lookup.contextMenu");
        this.treeTableOptions = Object.assign({ language: ctxMenuLanguages }, this.defaultTreeTableOptions, this.treeTableOptions || {});
    }
    /**
     * @return {?}
     */
    getComponentType() {
        if (!this.displayType) {
            this.displayType = "LIST";
        }
        switch (this.displayType) {
            case LookupGridDisplayType.List:
            case LookupGridDisplayType.NavList:
            case LookupGridDisplayType.NavTreeList:
                return DataTableComponent;
            case LookupGridDisplayType.TreeList:
            case LookupGridDisplayType.NavListTree:
                return TreeTableComponent;
        }
    }
    /**
     * @param {?=} msg
     * @return {?}
     */
    showLoading(msg = "") {
        if (this.dialog && this.dialog.modalContent && !this.loading) {
            /** @type {?} */
            const opts = {
                container: this.dialog.modalContent,
                delay: 200,
            };
            if (msg) {
                opts["message"] = msg;
            }
            this.loading = this.loadingService.show(opts);
        }
        else {
            this.loading = this.loadingService.show();
        }
    }
    /**
     * @return {?}
     */
    closeLoading() {
        if (this.loading) {
            this.loading.close();
            this.loading = null;
        }
        this.loadingService.clearAll();
    }
    /**
     * @param {?} resdata
     * @return {?}
     */
    getSearchColumns(resdata) {
        /** @type {?} */
        const cols = resdata.columns || this.columns;
        if (resdata.searchFields) {
            return resdata.searchFields.map((/**
             * @param {?} sf
             * @return {?}
             */
            (sf) => {
                /** @type {?} */
                const c = cols.find((/**
                 * @param {?} col
                 * @return {?}
                 */
                (col) => col.field.toLowerCase() === sf.value.toLowerCase()));
                if (c) {
                    sf.label = c.title;
                }
                return sf;
            }));
        }
        else if (cols) {
            return cols
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            (c) => c.searchField))
                .map((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                return {
                    label: col.title,
                    value: col.field,
                };
            }));
        }
        return [];
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    initOptions(resData) {
        /** @type {?} */
        let obser = of(true);
        this.gridOptions.searchFields = this.getSearchColumns(resData);
        if (resData) {
            // 如果组件中未设置显示列，则使用服务器端返回的设置； 否则将使用组件中配置的展示列
            if ((!this.columns || !this.columns.length) &&
                resData.columns &&
                resData.columns.length) {
                this.columns = resData.columns;
            }
            this.initColumnWidth(this.columns);
            this.setLookupTitleText(resData);
            if (this.isDoublleList() &&
                this.dialogWidth < this.navLookupDialogMinWidth &&
                !this.isRecordSize) {
                this.dialogWidth = this.navLookupDialogMinWidth;
                this.dialog.reSize({ width: this.dialogWidth });
            }
            if (!this.customDisplayType) {
                // this.displayType = resData.displayType || this.displayType || 'LIST';
                // if (this.treeToList) {
                //     this.displayType = this.isDoublleList() ? ' NAVLIST ': 'LIST';
                // }
                this.changeDetector.detectChanges();
                this.lookupCmpMgr.createComponentWithServerData(resData);
            }
            if (this.isDoublleList() && resData.navigation && !this.leftComponentRef) {
                this.navigationOptions = resData.navigation;
                this.navigationOptions.hover = true;
                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);
                this.initColumnWidth(this.navigationOptions.columns, 'nav');
                // update columns formatter
                if (this.customNavFormatter) {
                    this.navigationOptions.columns.forEach((/**
                     * @param {?} col
                     * @return {?}
                     */
                    (col) => {
                        if (this.customNavFormatter[col.field]) {
                            col.formatter = this.customNavFormatter[col.field];
                        }
                    }));
                    this.navigationOptions["rowStyler"] =
                        this.customNavFormatter.rowStyler;
                    this.navigationOptions["cellStyler"] =
                        this.customNavFormatter.cellStyler;
                }
                // 20210926 树导航帮助中 左侧树支持分层加载
                if (this.displayType === LookupGridDisplayType.NavTreeList) {
                    /** @type {?} */
                    let _nav_treeinfo_loadtype = this.navigationOptions.treeInfo.loadDataType;
                    if (this.loadTreeDataType !== "default") {
                        _nav_treeinfo_loadtype =
                            this.loadTreeDataType === "loadall"
                                ? "all"
                                : "async";
                    }
                    this.navigationOptions.treeInfo.loadDataType =
                        _nav_treeinfo_loadtype;
                }
                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
            }
        }
        else {
            this.lookupCmpMgr.createContent(this.gridOptions);
            this.lookupCmpMgr.createFavoriteComponent();
        }
        if (this.isTextChange) {
            this.componentRef.instance.searchData.value = this.displayText;
        }
        else {
            if (this._searchState && this._searchState.value) {
                this.componentRef.instance.searchData.value = this._searchState.value;
            }
        }
        // update columns formatter
        if (this.customFormatter) {
            this.columns.forEach((/**
             * @param {?} col
             * @return {?}
             */
            (col) => {
                if (this.customFormatter[col.field]) {
                    col.formatter = this.customFormatter[col.field];
                }
            }));
            if (this.customFormatter.rowStyler) {
                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;
            }
            if (this.customFormatter.cellStyler) {
                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;
            }
        }
        else {
            if (resData.customStyles) {
                const { row: rowStylers, cell: cellStylers } = resData.customStyles;
                /** @type {?} */
                const filterFn = (/**
                 * @param {?} n
                 * @param {?} data
                 * @return {?}
                 */
                (n, data) => {
                    /** @type {?} */
                    const d = this.utils.getValue(n.field, data);
                    if (typeof d === 'boolean') {
                        if (n.value == '0' || n.value == '1' || n.value == 'true' || n.value == 'false') {
                            return d === (n.value == '0' || n.value == 'false') ? false : true;
                        }
                        return d === !!n.value;
                    }
                    return d === n.value;
                });
                if (rowStylers) {
                    this.componentRef.instance.rowStyler = (/**
                     * @param {?} __0
                     * @return {?}
                     */
                    ({ data }) => {
                        /** @type {?} */
                        const styleItem = rowStylers.find((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => {
                            return filterFn(n, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
                if (cellStylers) {
                    this.componentRef.instance.cellStyler = (/**
                     * @param {?} e
                     * @param {?} field
                     * @return {?}
                     */
                    (e, field) => {
                        const { data } = e;
                        /** @type {?} */
                        const styleItem = cellStylers.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        n => n.field === field)).find((/**
                         * @param {?} t
                         * @return {?}
                         */
                        t => {
                            return filterFn(t, data);
                        }));
                        if (styleItem) {
                            return styleItem.styles;
                        }
                        return null;
                    });
                }
            }
        }
        // this.changeDetector.detectChanges();
        return obser;
    }
    /**
     * 设置帮助窗口标题
     * @private
     * @param {?} resData
     * @return {?}
     */
    setLookupTitleText(resData) {
        if (resData.displayInfo) {
            this.displayInfo = resData.displayInfo;
        }
        // 如果自定义标题，将以此标题为准。否则加载服务器端返回的数据
        if (this.title && this.title !== "此处显示帮助标题") {
            this.displayInfo.title = this.title;
        }
        if (this.displayInfo && resData.title) {
            if (!this.displayInfo.title) {
                this.displayInfo.title = resData.title;
            }
        }
    }
    /**
     * @private
     * @return {?}
     */
    showGetAllChildrenCheckbox() {
        if (this.isTree() && this.treeInfo) {
            this.enableGetAllChildNodes =
                this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode";
        }
        else {
            this.enableGetAllChildNodes = false;
        }
    }
    /**
     * @return {?}
     */
    initData() {
        /** @type {?} */
        const observer = {
            next: (/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                if (data === false) {
                    if (!this.columns || !this.columns.length) {
                        this.closeLoading();
                        this.closeDialog();
                        if (!this.messagerService.modals || !this.messagerService.modals.length) {
                            this.notifyService.error({ msg: this.localService.getValue('lookup.configError'), timeout: 3000 });
                        }
                        return;
                    }
                }
                // 服务器端发生错误，返回NULL 时，直接关闭窗口
                if (data === null) {
                    this.isShow = false;
                    if (this.dialog) {
                        this.dialog.close();
                    }
                    return;
                }
                this.initOptions(data).subscribe((/**
                 * @return {?}
                 */
                () => {
                    this.selectedColumns = this.multiSelMgr.initSelectedColumns();
                    // this.favoriteColumns = this.favHelper.getFavoriteColumns();
                    if (this.usePersionalConf) {
                        if (!this.personalConfigService.getPersonalData()) {
                            this.personalConfigService.savePersonalConfig(this.personalConf);
                        }
                    }
                    if (!this.isTabChanged) {
                        this.lookupSelectionSer.loadSelections(data.selectedItems || []);
                    }
                    if (this.isDoublleList()) {
                        // 导航帮助时，设置左侧选中数据时，不加载主数据列表。
                        if (this.navSelectedIds || this.selectFirstInNav) {
                            this.loadDataWhenOpen = false;
                        }
                    }
                    if (data['activeTab'] && !this.isTabChanged) {
                        this.activeTab = 'datalist';
                        if (this.personalConf && this.personalConf.tabIndex !== this.activeTab) {
                            this.personalConf.tabIndex = this.activeTab;
                        }
                    }
                    this.loadData(data);
                    if (this.isTree()) {
                        if (this.activeTab === "datalist") {
                            /** @type {?} */
                            const tt = (/** @type {?} */ (this.componentRef.instance));
                            if (tt.searchData.value && this.items && this.items.length) {
                                if (this.items[0].children && this.items[0].children.length) {
                                    tt.toggleExpand(this.items[0], true, false);
                                }
                            }
                        }
                        this.showGetAllChildrenCheckbox();
                    }
                    this.isTextChange = false;
                    this._searchResult = null; // 清空临时查询 结果
                    this.closeLoading();
                    // this.isReady$.next(true);
                    this.isReady = true;
                    this.changeDetector.detectChanges();
                    this.lookupinitializationSubject.next();
                    if (this.layoutRef) {
                        this.layoutRef.setPanelMaxSize();
                    }
                }));
            }),
            error: (/**
             * @param {?} err
             * @return {?}
             */
            (err) => {
                // this.isReady$.next(true);
                this.closeLoading();
                this._searchResult = null; // 清空临时查询 结果
                this.isTextChange = false;
                this.hasError = true;
                this.changeDetector.detectChanges();
                if (typeof err === "string") {
                    this.messagerService.error(err);
                }
                else {
                    if (err) {
                        if (err.Message) {
                            this.messagerService.error(err.Message);
                        }
                        else {
                            if (err.error) {
                                this.messagerService.exception(err.error);
                            }
                            else {
                                this.messagerService.error("应用服务器错误,请联系系统管理员！");
                            }
                        }
                    }
                }
            }),
        };
        /** @type {?} */
        let p = {
            pageInfo: {
                pageSize: this.pageSize || 20,
                pageIndex: 1,
            },
        };
        /** @type {?} */
        let t = "all";
        if (this.isTextChange) {
            this._searchState = {
                field: "*",
                value: this.displayText
            };
        }
        // 分层加载支持设置展开层级
        if (this.isTree() || this.displayType === LookupGridDisplayType.NavTreeList) {
            if (this.expandLevel > -1) {
                p['expandLevel'] = this.expandLevel;
            }
        }
        if (this._searchState && this._searchState.value) {
            p['search'] = this._searchState;
            t = 'search';
            // if (this.conditions && !this.conditions.length && this.enableMultiFieldSearch) {
            //     this.conditions = [{
            //         "filterField": this.textField,
            //         "value": this._searchState.value,
            //         "lbracket": "",
            //         "rbracket": "",
            //         "relation": 0,
            //         "compare": 6
            //     }];
            // }
        }
        if (!this.isTabChanged && this.enableToSelect) {
            /** @type {?} */
            const vals = this.selectionMgr.getSelectedIds();
            if (vals && vals.length) {
                p["selectedInfo"] = {
                    selected: true,
                    selectedIds: vals,
                };
            }
            else {
                if (this["selectedIds"]) {
                    p["selectedInfo"] = {
                        selected: true,
                        selectedIds: this["selectedIds"],
                    };
                }
            }
        }
        this.showLoading();
        this.hasError = false;
        this.httpMgr.lookupRequest(p, t).pipe(map((/**
         * @param {?} restData
         * @return {?}
         */
        (restData) => {
            if (restData) {
                restData.selectedItems = restData["selectedData"] || [];
            }
            else {
                if (restData && typeof restData === "object") {
                    restData.selectedItems = [];
                }
            }
            return restData === null ? false : restData;
        })), switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            if (this.beforeLoadData) {
                return this.beforeLoadData({ instance: this, res });
            }
            return of(res);
        }))).subscribe(observer);
    }
    /**
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadData(resData, rebindEvent = true) {
        if (this.activeTab === "datalist") {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            switch (this.displayType) {
                case LookupGridDisplayType.NavList:
                case LookupGridDisplayType.NavTreeList:
                case LookupGridDisplayType.List:
                    this.loadDataTableData(resData);
                    if (rebindEvent) {
                        this.dtEventMgr.bindDataTableEvent();
                    }
                    break;
                case LookupGridDisplayType.TreeList:
                case LookupGridDisplayType.NavListTree:
                    this.loadTreeTableData(resData, rebindEvent);
                    break;
            }
        }
        else if (this.activeTab === "favorite") {
            this.loadFavData(resData);
        }
        // 选中数据
        this.selectionMgr.selectCurrentValue();
    }
    /**
     * @private
     * @param {?} result
     * @return {?}
     */
    loadFavData(result) {
        // 加载收藏数据
        if (this.useFavorite) {
            if (this.isTree()) {
                this.setTreeInfo(result);
                /** @type {?} */
                const treeNodes = this.favHelper.initFavoriteTreeData(result.items);
                /** @type {?} */
                const treeData = this.treeNodeHelper
                    .flatTreeNodes(treeNodes)
                    .map((/**
                 * @param {?} n
                 * @return {?}
                 */
                (n) => {
                    n.data["_addtional_"] = n["addtional"];
                    return n.data;
                }));
                this.lookupSelectionSer.initFavoriteItems(treeData);
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    this.favoritesComponentRef.instance.scrollToY(1);
                }));
            }
            else {
                this.lookupSelectionSer.initFavoriteItems(result.items);
            }
            this.favHelper.loadFavoritesData(result);
        }
    }
    /**
     * @param {?=} resData
     * @return {?}
     */
    loadDataTableData(resData) {
        if (resData) {
            if (this.useFavorite && !this.isTree()) {
                this.favHelper.updateFavoritesStatus(resData.items);
            }
            if (this.gridOptions) {
                if (resData && resData.columns && resData.columns.length) {
                    if (!this.gridOptions.columns ||
                        !this.gridOptions.columns.length) {
                        this.columns = resData.columns;
                    }
                }
                this.items = resData.items;
                this.total = resData.total || resData.items.length;
                if (resData.searchFields) {
                    this.gridOptions.searchFields = this.getSearchColumns(resData);
                }
                if (resData.pageInfo) {
                    if (resData.pageInfo.pageList &&
                        (!this.pageList || !this.pageList.length)) {
                        this.pageList = resData.pageInfo.pageList;
                    }
                    this.pagination = resData.pageInfo.enablePager;
                    this.pageIndex = resData.pageInfo.pageIndex;
                    this.pageSize = resData.pageInfo.pageSize;
                }
                else {
                    this.pagination = false;
                }
            }
            else {
                this.gridOptions = (/** @type {?} */ (resData));
            }
        }
        this.updateDataTable(this.gridOptions);
    }
    /**
     * @private
     * @param {?} opts
     * @return {?}
     */
    updateDataTable(opts) {
        if (opts) {
            /** @type {?} */
            const dt = (/** @type {?} */ (this.componentRef.instance));
            if (!dt.columns || dt.columns.length === 0) {
                dt.columns = this.gridOptions.columns;
            }
            dt.allColumnsTitle = this.allColumnsTitle;
            dt.searchFields = opts.searchFields;
            dt.pagination = opts.pagination;
            dt.pageList = this.pageList;
            dt.remoteSort = this.remoteSort;
            dt.striped = this.enableMultiFieldSearch;
            if (this.loadDataWhenOpen) {
                dt.loadData({
                    pageSize: opts.pageSize,
                    pageIndex: this.gridOptions.pageIndex,
                    total: this.gridOptions.total,
                    data: this.gridOptions.items,
                });
                dt.cd.markForCheck();
            }
            this.loadSuccess.emit();
        }
    }
    /**
     * @private
     * @param {?} resData
     * @return {?}
     */
    setTreeInfo(resData) {
        if (!resData) {
            return;
        }
        /** @type {?} */
        let _treeInfo = null;
        if (resData.treeInfo) {
            /** @type {?} */
            const onlySelectLeaf = resData.treeInfo.onlySelectLeaf;
            /** @type {?} */
            let _osl = "no";
            if (onlySelectLeaf !== undefined) {
                _osl = onlySelectLeaf ? "yes" : "no";
            }
            _treeInfo = Object.assign({}, resData.treeInfo, { onlySelectLeaf: _osl });
        }
        /** @type {?} */
        const treeInfo = this.gridOptions.treeInfo;
        if (treeInfo) {
            if (treeInfo.onlySelectLeaf === undefined ||
                treeInfo.onlySelectLeaf === null) {
                treeInfo.onlySelectLeaf = "no";
            }
            if (typeof treeInfo.onlySelectLeaf === "boolean") {
                treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? "yes" : "no";
            }
            // 20210902
            if (this.loadTreeDataType === "default") {
                treeInfo.loadDataType = _treeInfo.loadDataType;
            }
            else {
                treeInfo.loadDataType = this.loadTreeDataType === "loadall" ? "all" : "async";
                _treeInfo.loadDataType = treeInfo.loadDataType;
            }
            if (treeInfo.onlySelectLeaf !== "default") {
                _treeInfo = Object.assign(_treeInfo, treeInfo);
            }
        }
        else {
            if (this.loadTreeDataType !== "default") {
                _treeInfo.loadDataType = this.loadTreeDataType === "loadall" ? "all" : "async";
            }
        }
        this.treeInfo = _treeInfo;
    }
    /**
     * @private
     * @param {?=} resData
     * @param {?=} rebindEvent
     * @return {?}
     */
    loadTreeTableData(resData, rebindEvent = true) {
        /** @type {?} */
        const items = resData ? resData.items : this.gridOptions.items;
        this.items = items;
        if (resData) {
            this.setTreeInfo(resData);
            /** @type {?} */
            const treeInfo = this.gridOptions.treeInfo;
            if (!treeInfo["treeDataIsInit"]) {
                if (treeInfo.layerType.toLowerCase() === "pathcode") {
                    this.items = this.lookupUtils.makeTree(this.items, treeInfo);
                }
                else {
                    this.items = this.lookupUtils.makeTreeWithParentID(this.items, "", treeInfo.dataField ? `${treeInfo.dataField}.${treeInfo.parentField}` : treeInfo.parentField, this.idField);
                }
            }
        }
        if (this.componentRef.instance instanceof TreeTableComponent) {
            /** @type {?} */
            const tt = (/** @type {?} */ (this.componentRef.instance));
            if (this.treeInfo) {
                tt.loadDataType = this.treeInfo.loadDataType;
            }
            if (!this.columns || !this.columns.length) {
                tt.columns = resData.columns || [];
                this.gridOptions.columns = tt.columns;
            }
            /** @type {?} */
            const isLoadAllTreeData = (/**
             * @return {?}
             */
            () => {
                if (this.loadTreeDataType === "default") {
                    return tt.loadDataType === "all";
                }
                else {
                    return this.loadTreeDataType === "loadall";
                }
            });
            if (rebindEvent) {
                this.ttEventMgr.bindTreetableEvent();
            }
            /** @type {?} */
            const isLoadAll = isLoadAllTreeData();
            /** 完整树节点检查 By Lucas 20200302 */
            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);
            tt.keepSelect = true;
            if (this.useFavorite) {
                this.favHelper.updateFavoritesStatus(this.items);
            }
            if (this.loadDataWhenOpen) {
                tt.loadData(this.items);
            }
            tt.resize();
        }
    }
    /**
     * 在构完整树中，有部分节点因为条件被过滤，为显示完整树，
     * 这些节点在运行时是不允许被选中的, 返回新的节点数组
     * By Lucas 20200302
     * @param {?} nodes
     * @param {?=} isAllTreeData
     * @return {?}
     */
    checkNodeCanBeSelect(nodes, isAllTreeData = false) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.hasOwnProperty("addtional")) {
                    node.selectable = !node["addtional"];
                }
                if (node.children && node.children.length) {
                    this.checkNodeCanBeSelect(node.children, isAllTreeData);
                }
                else {
                    if (isAllTreeData && (!this._searchState || !this._searchState.value)) {
                        node.leaf = true;
                    }
                }
                return node;
            }));
        }
        return nodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onChanges(val) {
        if (!val) {
            this.onClear();
        }
        else {
            this.displayText = val;
            this.isTextChange = this.originalText !== this.displayText;
            if (this.nosearch) {
                this.setModelValue(val);
                this.clearMappings.emit({ instance: this, value: val, });
            }
            this.onModelTouched(val);
            this.valueChanged.emit(val);
            this.textChanged.emit(val);
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    onClear(emit = true) {
        this.isTextChange = false;
        this.displayText = "";
        this.displayValue = "";
        this.originalText = "";
        this.extendInfo = "";
        this.setModelValue("");
        if (this.mappingFn) {
            this.mappingFn(null, this.mapFields);
        }
        else {
            if (this.mapFields) {
                /** @type {?} */
                const bindingData = this.selectionMgr.getBindingData();
                if (bindingData) {
                    this.defaultMapping.lookupFieldMap(null, this.mapFields, bindingData);
                }
            }
        }
        this.multiSelMgr.clear();
        if (emit) {
            this.clear.emit();
        }
    }
    /**
     * @param {?=} emit
     * @return {?}
     */
    clearValue(emit = true) {
        this.onClear(emit);
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    selectItem(rowData) {
        /** @type {?} */
        let selectedRow = null;
        if (rowData) {
            selectedRow = rowData;
        }
        else {
            selectedRow = this.selections;
            if (!selectedRow) {
                selectedRow = null;
            }
            else {
                if (Array.isArray(selectedRow) && !selectedRow.length) {
                    selectedRow = null;
                }
            }
        }
        this._searchState = {
            field: '*',
            value: ''
        };
        // 如果定义了自定义处理确定事件，则由自定义事件处理后面的逻辑
        if (this.okHandler) {
            this.okHandler({ data: selectedRow, instance: this });
        }
        else {
            if (this.beforeSelectData) {
                /** @type {?} */
                const bsdResult = this.beforeSelectData({
                    instance: this,
                    data: selectedRow,
                });
                if (bsdResult && bsdResult.subscribe) {
                    bsdResult.subscribe((/**
                     * @param {?} e
                     * @return {?}
                     */
                    (e) => {
                        this._beforeSelectDataCallBack(e, selectedRow);
                    }));
                }
                else {
                    this.writeConsole('帮助数据选中前事件未返回值或返回类型非Observable, 请检查', 'error');
                }
            }
            else {
                this._beforeSelectDataCallBack(true, selectedRow);
            }
        }
    }
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    getPathCode(data, treeInfo = null) {
        return this.lookupUtils.getPathCode(data, treeInfo || this.treeInfo);
    }
    /**
     * @param {?} data
     * @param {?=} treeInfo
     * @return {?}
     */
    getLayerData(data, treeInfo = null) {
        return this.lookupUtils.getLayerData(data, treeInfo || this.treeInfo);
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getParentPathCode(rows) {
        /** @type {?} */
        const maxBy = (/**
         * @param {?} arr
         * @param {?} fn
         * @return {?}
         */
        (arr, fn) => Math.max(...arr.map(typeof fn === "function" ? fn : (/**
         * @param {?} val
         * @return {?}
         */
        (val) => val[fn]))));
        // const { dataField, pathField, layerField } = this.treeInfo;
        /** @type {?} */
        const maxLayer = maxBy(rows, (/**
         * @param {?} x
         * @return {?}
         */
        (x) => this.getLayerData(x)));
        for (let i = 1; i <= maxLayer; i++) {
            /** @type {?} */
            const _rows = rows.filter((/**
             * @param {?} n
             * @return {?}
             */
            (n) => this.getLayerData(n) === i));
            if (_rows && _rows.length && _rows.length < rows.length) {
                _rows.forEach((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    /** @type {?} */
                    const patchCode = this.getPathCode(r);
                    /** @type {?} */
                    const _rows2 = rows.filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        /** @type {?} */
                        var _pc = this.getPathCode(n);
                        return _pc !== patchCode && _pc.indexOf(patchCode) === 0;
                    }));
                    if (_rows2 && _rows2.length) {
                        rows = rows.filter((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => this.getPathCode(n) !== patchCode));
                    }
                }));
            }
        }
        return rows;
    }
    /**
     * @private
     * @param {?} e
     * @param {?} selectedRow
     * @return {?}
     */
    _beforeSelectDataCallBack(e, selectedRow) {
        /** @type {?} */
        let canSelect = e;
        /** @type {?} */
        let message = "";
        if (typeof e === "boolean") {
            canSelect = e;
        }
        else {
            if (typeof e === "object") {
                canSelect = e.canSelect;
                message = e.message;
            }
            else {
                canSelect = false;
            }
        }
        if (!selectedRow) {
            message = this.mustChoosAdatarow;
            canSelect = false;
        }
        if (canSelect) {
            /** @type {?} */
            let selectedRows$ = of(selectedRow);
            // 多选 树帮助 异步加载 分级码 开启同步选择 或包含下级
            if (!this.singleSelect && this.enableCascade && this.isTree()) {
                if (this.treeInfo.loadDataType !== "all" && this.treeInfo.layerType === "pathcode" && this.isGetAllChidlNodes) {
                    /** @type {?} */
                    let parentsIds = this.getParentPathCode(selectedRow);
                    if (parentsIds && parentsIds.length) {
                        parentsIds = parentsIds.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => this.getPathCode(n)));
                        this.showLoading();
                        selectedRows$ = this.httpMgr
                            .getData({ parentsIds }, "allChildren")
                            .pipe(map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            /** @type {?} */
                            const items = r.items
                                ? r.items.map((/**
                                 * @param {?} d
                                 * @return {?}
                                 */
                                (d) => d.data))
                                : [];
                            /** @type {?} */
                            const allitems = [...selectedRow, ...items];
                            /** @type {?} */
                            let ids = allitems.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => n[this.idField]));
                            ids = Array.from(new Set(ids));
                            return ids.map((/**
                             * @param {?} n
                             * @return {?}
                             */
                            (n) => allitems.find((/**
                             * @param {?} a
                             * @return {?}
                             */
                            (a) => a[this.idField] === n))));
                        })));
                    }
                }
            }
            selectedRows$.subscribe((/**
             * @param {?} rows
             * @return {?}
             */
            (rows) => {
                this.closeLoading();
                if (this.isGetAllChidlNodes) {
                    this.lookupSelectionSer.loadSelections(rows);
                }
                this.updateControlValue(rows);
                if (!this.useTip || !rows) {
                    return;
                }
                if (this.useTip) {
                    this.personalConfigService.updateQueckSelected(rows, this.localService.localeId);
                }
            }));
        }
        else {
            if (message) {
                if (this.notifyService) {
                    this.notifyService.warning(message);
                }
                else {
                    this.messagerService.warning(message, "", true, (/**
                     * @return {?}
                     */
                    () => {
                        this.dialog.el.nativeElement.click();
                    }));
                }
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateControlValue(selectedRow) {
        if (selectedRow) {
            this.setDisplayText(selectedRow);
            if (this.mappingFn) {
                this.mappingFn(selectedRow, this.mapFields, this.bindingData);
            }
            else {
                if (this.mapFields && this.bindingData) {
                    this.defaultMapping.lookupFieldMap(selectedRow, this.mapFields, this.bindingData);
                }
            }
            this.setModelValue(this.displayText);
            if (this["inDatagrid"] && selectedRow) {
                /** @type {?} */
                const selectItems = Array.isArray(selectedRow)
                    ? selectedRow
                    : [selectedRow];
                this.updateBindData(selectItems);
            }
            this.selectedData.emit(selectedRow);
            this.runDictPickedEvent(selectedRow);
            this.isTextChange = false;
        }
        else {
            if (document.activeElement) {
                ((/** @type {?} */ (document.activeElement))).blur();
            }
            this.messagerService.warning(this.mustChoosAdatarow);
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    updateBindData(selectedRow) {
        if (!this.mapFields) {
            return;
        }
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData) {
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = selectedRow
                            .map((/**
                         * @param {?} r
                         * @return {?}
                         */
                        (r) => {
                            return this.utils.getValue(helpField, r);
                        }))
                            .join(this.multipleChoiceSeparator);
                        this.utils.setValue(bindingData, formField, val);
                    }));
                }));
            }
            // if (bindingData.setValue) {
            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;
            //     let pathArr: string[] = [];
            //     if (bindingPath) {
            //         pathArr = bindingPath.split('/').filter(n => n !== '');
            //     }
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const fieldPaths = pathArr.concat(formField.split('.'));
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);
            //         });
            //     });
            // }
        }
        else {
            // if (this.bindingData) {
            //     helpFields.forEach((helpField: any) => {
            //         this.mapFields[helpField].split(',').forEach((formField: any) => {
            //             const val = selectedRow.map(r => {
            //                 return this.utils.getValue(formField, r);
            //             }).join(this.multipleChoiceSeparator);
            //             this.utils.setValue(this.bindingData, formField, val);
            //         });
            //     });
            // }
        }
    }
    /**
     * @private
     * @param {?=} isHelpData
     * @return {?}
     */
    getExtendInfoFields(isHelpData = true) {
        if (!this.extInfoFields) {
            this.writeConsole(`未设置扩展字段。`);
            return [];
        }
        /** @type {?} */
        const tipFieldArr = this.extInfoFields.split(",");
        if (isHelpData) {
            /** @type {?} */
            let extendInfoFields = [];
            extendInfoFields = tipFieldArr.map((/**
             * @param {?} tf
             * @return {?}
             */
            (tf) => {
                /** @type {?} */
                const mapKey = Object.keys(this.mapFields).find((/**
                 * @param {?} k
                 * @return {?}
                 */
                (k) => {
                    return this.mapFields[k] === tf;
                }));
                if (mapKey) {
                    return mapKey;
                }
                else {
                    this.writeConsole(`在帮助映射字段中未找到${tf}`);
                    return "";
                }
            }));
            return extendInfoFields;
        }
        return tipFieldArr;
    }
    /**
     * @return {?}
     */
    onUpdateExtendInfo() {
        /** @type {?} */
        const jsonData = this.selectionMgr.getBindingData();
        this.updateExtendInfo(jsonData, false);
    }
    // 选中帮助数据后，更新扩展信息
    /**
     * @private
     * @param {?} data
     * @param {?=} isHelpData
     * @return {?}
     */
    updateExtendInfo(data, isHelpData = true) {
        if (data) {
            if (this.extInfoFormatter) {
                if (Array.isArray(data)) {
                    /** @type {?} */
                    const tipString = data.map((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => {
                        return this.getExtendInfoText(n);
                    }));
                    this.extendInfo = tipString.join("，");
                }
                else {
                    this.extendInfo = this.getExtendInfoText(data);
                }
            }
            else {
                /** @type {?} */
                const extendInfoFields = this.getExtendInfoFields(isHelpData);
                if (extendInfoFields && extendInfoFields.length) {
                    if (Array.isArray(data)) {
                        /** @type {?} */
                        const tipString = data.map((/**
                         * @param {?} n
                         * @return {?}
                         */
                        (n) => {
                            return this.getExtendInfoText(n, extendInfoFields);
                        }));
                        this.extendInfo = tipString.join("，");
                    }
                    else {
                        this.extendInfo = this.getExtendInfoText(data, extendInfoFields);
                    }
                }
            }
        }
    }
    /**
     * @private
     * @param {?} itemData
     * @param {?=} fields
     * @return {?}
     */
    getExtendInfoText(itemData, fields = null) {
        if (typeof this.extInfoFormatter === "function") {
            return this.extInfoFormatter({
                bindingData: itemData,
                instance: this,
            });
        }
        else {
            /** @type {?} */
            const tipString = [];
            /** @type {?} */
            const tipValues = fields.map((/**
             * @param {?} t
             * @return {?}
             */
            (t) => {
                /** @type {?} */
                const tfv = this.utils.getValue(t, itemData);
                tipString.push(tfv);
                return { [t]: tfv };
            }));
            return tipString.join(" ");
        }
    }
    /**
     * @private
     * @param {?} rows
     * @return {?}
     */
    getDisplayText(rows) {
        /** @type {?} */
        const df = this.displayFields
            ? this.displayFields.split(",")
            : [this.textField];
        /** @type {?} */
        const txtArr = rows.map((/**
         * @param {?} r
         * @return {?}
         */
        (r) => {
            /** @type {?} */
            const t = [];
            df.forEach((/**
             * @param {?} n
             * @return {?}
             */
            (n) => {
                t.push(this.utils.getValue(n, r));
            }));
            return t.join(this.displayTextSeparator);
        }));
        if (this.gridOptions.singleSelect) {
            return txtArr.join("");
        }
        else {
            if (this.displayFields) {
                return txtArr.map((/**
                 * @param {?} t
                 * @return {?}
                 */
                (t) => "[" + t + "]")).join(this.multipleChoiceSeparator);
            }
            else {
                return txtArr.join(this.multipleChoiceSeparator);
            }
        }
    }
    /**
     * @private
     * @param {?} selectedRow
     * @return {?}
     */
    setDisplayText(selectedRow) {
        this.originalText = this.displayText;
        if (this.gridOptions.singleSelect) {
            if (this.displayFormatter) {
                this.displayText = this.utils.getValue(this.textField, selectedRow);
                if (!this.isTree()) {
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], {
                        lookup: this,
                        datatable: (/** @type {?} */ (this.componentRef
                            .instance)),
                    });
                }
                else {
                    /** @type {?} */
                    const tt = (/** @type {?} */ (this.componentRef.instance));
                    this.displayText = this.displayFormatter(this.displayText, [selectedRow], { lookup: this, tree: tt });
                }
            }
            else {
                this.displayText = this.getDisplayText([selectedRow]);
            }
            this.displayValue = selectedRow[this.valueField || this.idField];
        }
        else {
            if (selectedRow.length) {
                if (this.displayFormatter) {
                    this.displayText = selectedRow
                        .map((/**
                     * @param {?} r
                     * @return {?}
                     */
                    (r) => {
                        return this.utils.getValue(this.textField, r);
                    }))
                        .join(this.multipleChoiceSeparator);
                    if (!this.isTree()) {
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, {
                            lookup: this,
                            datatable: (/** @type {?} */ (this.componentRef
                                .instance)),
                        });
                    }
                    else {
                        /** @type {?} */
                        const tt = (/** @type {?} */ (this.componentRef
                            .instance));
                        this.displayText = this.displayFormatter(this.displayText, selectedRow, { lookup: this, tree: tt });
                    }
                }
                else {
                    this.displayText = this.getDisplayText(selectedRow);
                }
                this.displayValue = selectedRow
                    .map((/**
                 * @param {?} r
                 * @return {?}
                 */
                (r) => {
                    return this.utils.getValue(this.valueField || this.idField, r);
                }))
                    .join(this.multipleChoiceSeparator);
            }
        }
        this.originalText = this.displayText;
    }
    /**
     * @param {?} rowData
     * @return {?}
     */
    runDictPickedEvent(rowData) {
        if (this.dictPicked) {
            if (this.okButton) {
                this.okButton.nativeElement.disabled = true;
            }
            this.dictPickedSubscription = this.dictPicked(rowData).subscribe((/**
             * @param {?} v
             * @return {?}
             */
            (v) => {
                if (this.okButton) {
                    this.okButton.nativeElement.disabled = false;
                }
                if (typeof v === "boolean") {
                    if (v) {
                        this.closeDialog(rowData);
                    }
                }
                else if (typeof v === "object" &&
                    v.closeDialog !== undefined &&
                    !v.closeDialog) {
                    if (v.message) {
                        this.messagerService.warning(v.message);
                    }
                    else {
                        this.closeDialog(rowData);
                    }
                }
                else {
                    this.closeDialog(rowData);
                }
            }));
        }
        else {
            this.closeDialog(rowData);
        }
    }
    /**
     * @private
     * @return {?}
     */
    focusToInput() {
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                if (this.inputGroup && this.inputGroup.textbox) {
                    this.inputGroup.textbox.nativeElement.focus();
                }
            }));
        }));
    }
    /**
     * @param {?=} rowData
     * @return {?}
     */
    closeDialog(rowData = null) {
        if (this.dialog) {
            this.dialog.close();
        }
        if (rowData) {
            this.multiSelMgr.save(rowData);
        }
        // this.isShow = false;
        this.focusToInput();
    }
    /**
     * @return {?}
     */
    cancelSelect() {
        this.closeDialog();
        this.isTextChange = false;
        if (!this.nosearch) {
            this.displayText = this.originalText;
            this.setModelValue(this.displayText);
        }
        if (this.cancelHandler) {
            this.cancelHandler(this);
        }
    }
    /**
     * @param {?} v
     * @return {?}
     */
    setModelValue(v) {
        if (this.onModelChange) {
            this.onModelChange(v);
            this.valueChanged.emit(v);
        }
    }
    // 数据列表，收藏， 已选数据 tab 页切换
    /**
     * @param {?} e
     * @return {?}
     */
    onTabChange(e) {
        this.activeTab = e.tabIndex;
        this.personalConf.tabIndex = this.activeTab;
        /** @type {?} */
        const _firstChange = this.isTabChanged;
        this.isTabChanged = true;
        this.personalConfigService.updatePersonalConfig({
            tabIndex: e.tabIndex,
        });
        if (this.activeTab === "datalist") {
            if (this.isDoublleList() && !this.leftComponentRef) {
                if (this.navigationOptions) {
                    this.lookupCmpMgr.createLeftComponent(this.navigationOptions);
                }
                else {
                    this.initData();
                    return;
                }
            }
            if (!this.items || !this.items.length) {
                this.initData();
            }
            else {
                if (!_firstChange) {
                    if (this.isTree()) {
                        this.loadTreeTableData();
                    }
                    else {
                        this.loadDataTableData();
                        this.dtEventMgr.bindDataTableEvent();
                    }
                }
                // this.selectionMgr.selectCurrentValue();
            }
            this.showGetAllChildrenCheckbox();
        }
        else {
            if (this.activeTab === "favorite") {
                if (this.isTree()) {
                    this.initData();
                }
                else {
                    if (!this.favoriteItems ||
                        !this.favoriteItems.length ||
                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length) {
                        this.initData();
                    }
                    else if (!_firstChange) {
                        this.favHelper._loadFavoriteData(this.favoriteItems);
                        // this.selectionMgr.selectCurrentValue();
                    }
                    //  else {
                    //     this.selectionMgr.selectCurrentValue();
                    // }
                }
            }
        }
        this.changeDetector.detectChanges();
        setTimeout((/**
         * @return {?}
         */
        () => {
            this.resizeCmp();
            if (this.isTree()) {
                /** @type {?} */
                const y = this.componentRef.instance.state.scrollY;
                this.componentRef.instance.scrollToY(y, 0);
                if (this.enableCascade) {
                    this.ttEventMgr.cascadeValueChanged(this.cascadeStatus);
                }
            }
            if (this.isDoublleList() && this.displayType === LookupGridDisplayType.NavTreeList && !this.navTreeToList) {
                this.leftComponentRef.instance.updateScrollPosition();
            }
            this.selectionMgr.selectCurrentValue();
        }));
    }
    //#region  Tag View ----------------------------------------------------------------------
    /**
     * @private
     * @return {?}
     */
    registerMouseEventForTagView() {
        if (this.enableClear) {
            this.tagbox.nativeElement.addEventListener("mouseenter", this.onTagboxMouseEnter.bind(this));
            this.tagbox.nativeElement.addEventListener("mouseleave", this.onTagboxMouseLeave.bind(this));
        }
    }
    /**
     * @private
     * @param {?} event
     * @param {?=} isShow
     * @return {?}
     */
    toggleClearIcon(event, isShow = false) {
        /** @type {?} */
        const str = isShow ? "" : "none";
        /** @type {?} */
        const clearIcon = event.target.querySelector(".input-group-clear");
        if (clearIcon) {
            clearIcon.style.display = str;
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseEnter(event) {
        if (this.displayText && this.enableClear) {
            if (!this.readonly && !this.disabled) {
                this.showTagboxClearButton = true;
            }
        }
        if (this.showTagboxClearButton) {
            this.toggleClearIcon(event, true);
        }
    }
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    onTagboxMouseLeave(event) {
        this.toggleClearIcon(event);
    }
    /**
     * @param {?} $event
     * @param {?} txt
     * @return {?}
     */
    onRemoveSelectItem($event, txt) {
        $event.stopPropagation();
        /** @type {?} */
        const textArray = Array.from(this.displayTextList);
        /** @type {?} */
        const removedIndex = this.displayTextList.indexOf(txt);
        textArray.splice(removedIndex, 1);
        this.displayText = textArray.join(this.multipleChoiceSeparator);
        this.originalText = this.displayText;
        this.setModelValue(this.displayText);
        if (this.displayValue) {
            /** @type {?} */
            const vals = this.displayValue.split(this.multipleChoiceSeparator);
            vals.splice(removedIndex, 1);
            this.displayValue = vals.join(this.multipleChoiceSeparator);
        }
        if (this.mapFields) {
            this.updateOtherFieldDataWhenTagremoved(removedIndex);
        }
        this.tagRemoved.emit({ removedIndex, instance: this });
    }
    /**
     * @private
     * @param {?} removedIndex
     * @return {?}
     */
    updateOtherFieldDataWhenTagremoved(removedIndex) {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        /** @type {?} */
        const textFieldIndex = helpFields.indexOf(this.textField);
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split("/").filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    (n) => n !== ""));
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const fieldPaths = pathArr.concat(formField.split("."));
                        /** @type {?} */
                        const val = bindingData.getValue(fieldPaths);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        bindingData.setValue(pathArr.concat(fieldPaths), newVal, true, true);
                    }));
                }));
            }
        }
        else {
            if (this.bindingData) {
                if (textFieldIndex > -1) {
                    helpFields.splice(textFieldIndex, 1);
                }
                helpFields.forEach((/**
                 * @param {?} helpField
                 * @return {?}
                 */
                (helpField) => {
                    this.mapFields[helpField]
                        .split(",")
                        .forEach((/**
                     * @param {?} formField
                     * @return {?}
                     */
                    (formField) => {
                        /** @type {?} */
                        const val = this.utils.getValue(formField, this.bindingData);
                        /** @type {?} */
                        const valArr = val.split(this.multipleChoiceSeparator);
                        valArr.splice(removedIndex, 1);
                        /** @type {?} */
                        const newVal = valArr.join(this.multipleChoiceSeparator);
                        this.utils.setValue(this.bindingData, formField, newVal);
                    }));
                }));
            }
        }
    }
    //#endregion
    /**
     * @param {?} $event
     * @return {?}
     */
    onAllChildNodesClick($event) {
        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    onIncludeSubordinatesChange(val) {
        this.includeSubordinates = val;
        this.includeSubordinates$.next(val);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onTagContainerClick($event) {
        $event.stopPropagation();
        if (this.tagInput) {
            this.tagInput.focus();
            this.tagInput.textbox.nativeElement.click();
        }
    }
    /**
     * @param {?} nodes
     * @return {?}
     */
    expandFirstNode(nodes) {
        if (nodes && nodes.length) {
            return nodes.map((/**
             * @param {?} node
             * @return {?}
             */
            (node) => {
                if (node.children && node.children.length) {
                    node.expanded = true;
                    this.expandFirstNode(node.children);
                }
                return node;
            }));
        }
        return nodes;
    }
    ;
    // 用于组织个性化数据key
    /**
     * @return {?}
     */
    getLookupBindingFields() {
        if (this.ngControl) {
            if (this.ngControl.name) {
                return this.ngControl.name;
            }
            else {
                if (this.mapFields && this.mapFields.length) {
                    return Object.keys(this.mapFields).map((/**
                     * @param {?} k
                     * @return {?}
                     */
                    k => {
                        return this.mapFields[k];
                    })).join('_');
                }
                else {
                    return this.textField;
                }
            }
        }
        else {
            return '';
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onConditionsChange($event) {
        if (this.isTree()) {
            this.ttEventMgr.conditionsChange($event);
        }
        else {
            this.dtEventMgr.conditionsChange($event);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    clearSelected($event) {
        if ($event) {
            $event.stopPropagation();
        }
        /** @type {?} */
        const msg = this.localService.getValue('lookup.selectedInfo.confirm');
        this.messagerService.confirm(msg || '您确认要取消所有已选中的记录吗？').subscribe((/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            if (e) {
                this.multiSelMgr.clear();
                if (this.selectedDtRef) {
                    this.selectedDtRef.clearSelections();
                }
            }
        }));
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onDeleteSelectedItem($event) {
        if ($event) {
            $event.stopPropagation();
        }
        if (this.selectedDtRef.selections && this.selectedDtRef.selections.length) {
            /** @type {?} */
            const unCheckeIds = this.selectedDtRef.selections.map((/**
             * @param {?} n
             * @return {?}
             */
            n => n[this.idField]));
            this.multiSelMgr.deleteSelectedItems(this.selectedDtRef.selections);
            this.selectedDtRef.unCheckRows(unCheckeIds);
        }
        else {
            this.notifyService.warning('请勾选要删除的记录！');
        }
    }
    /**
     * @param {?} columns
     * @param {?=} typ
     * @return {?}
     */
    initColumnWidth(columns, typ = 'data') {
        if (this.personalConf && this.personalConf.colSizeInfo && this.personalConf.colSizeInfo.data) {
            /** @type {?} */
            const fieldsizeData = this.personalConf.colSizeInfo[typ];
            if (fieldsizeData) {
                /** @type {?} */
                const fields = Object.keys(fieldsizeData);
                if (fields && fields.length) {
                    columns.forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => {
                        if (fieldsizeData[n.field]) {
                            n.width = fieldsizeData[n.field];
                        }
                    }));
                }
            }
        }
    }
}
LookupGridComponent.decorators = [
    { type: Component, args: [{
                selector: "farris-lookup-grid",
                template: "<!--\r\n * @Author: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @Date: 2019-06-16 13:44:59\r\n * @LastEditors: \u75AF\u72C2\u79C0\u624D(Lucas Huang)\r\n * @LastEditTime: 2019-11-18 08:47:32\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n -->\r\n\r\n <input-group #inputgroup\r\n    *ngIf=\"viewType === 'text'\"\r\n    [groupText]=\"groupIcon\"\r\n    [lookup-tip]= \"useTip\"\r\n    [(ngModel)]=\"displayText\"\r\n    [disabled]=\"disabled\"\r\n    [readonly]=\"readonly\"\r\n    [editable]=\"editable\"\r\n    [customCls]=\"'lookupbox'\"\r\n    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n    [enableClear]=\"enableClear\"\r\n    [useExtendInfo]=\"useExtendInfo\"\r\n    [extendInfo]=\"extendInfo\"\r\n    [maxLength]=\"maxLength\"\r\n    (updateExtendInfo)=\"onUpdateExtendInfo()\"\r\n    [textAlign]=\"textAlign\"\r\n    [value]=\"displayText\"\r\n    (valueChange)=\"onChanges($event)\"\r\n    (clickHandle)=\"showDialog()\"\r\n    (clear)=\"onClear()\"\r\n    [quick-select]=\"quickSelect\"\r\n></input-group>\r\n\r\n<!--Tag style-->\r\n<div #tagbox class=\"input-group\" [class.f-state-disabled]=\"disabled\" [class.f-state-readonly]=\"readonly\" *ngIf=\"viewType === 'tag'\" [attr.title]=\"displayText\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\" style=\"height: auto; min-height: 24px;\">\r\n        <div class=\"multi--content d-flex flex-row\" style=\"width: 100%;flex-wrap: wrap;\" #tagContainer (click)=\"onTagContainerClick($event)\">\r\n            <span class=\"multi--item\" *ngFor=\"let txt of displayTextList; let index\" title=\"\" style=\"cursor: default;padding: 0 5px;\r\n            background: #ebf7fe;\r\n            border: 1px solid #cfedff;\r\n            position: relative;\r\n            padding-right: 20px;\r\n            margin-right: 3px;margin-top: 1px;height:18px; float: left;\">\r\n                {{txt}}\r\n                <i class=\"f-icon f-icon-close\" *ngIf=\"!readonly && !disabled\" style=\"cursor: pointer;position:absolute; right: 2px\" (click)=\"onRemoveSelectItem($event, txt)\"></i>\r\n            </span>\r\n\r\n            <span *ngIf=\"quickSelect && quickSelect.enable && !readonly && !disabled\" style=\"flex: 1;position: relative;min-width: 100px;height: 18px;margin: 0;padding: 0;float: left;overflow: hidden;\">\r\n                <!-- <input type=\"text\" style=\"border: 0;outline: none;width: 100px;\" #tagInput> -->\r\n                <input-group #tagInput style=\"position: absolute; top: 0px; height: 20px;align-items: center;display: flex;left: -8px; width: 100%\"\r\n                    [placeholder]=\"'lookup.placeholder' | locale: '\u8BF7\u9009\u62E9': placeholder\"\r\n                    [quick-select]=\"quickSelect\"  [enableClear]=\"false\" [noborder]=\"true\"\r\n                ></input-group>\r\n            </span>\r\n        </div>\r\n        <!-- <div class=\"multi--more\" *ngIf=\"selections && selections.length\">\r\n            <i class=\"f-icon multi--more-icon\"></i><span class=\"multi--more-text\">{{selections.length}}</span>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"input-group-append\" style=\"position: relative;\" title=\"\" >\r\n        <span class=\"input-group-text input-group-clear\" style=\"display: none; padding: 0px 4px;position: absolute;right: 22px;height: 100%;\" (click)=\"onClear()\">\r\n            <i class=\"f-icon modal_close\"></i>\r\n        </span>\r\n        <span class=\"input-group-text\" (click)=\"showDialog()\">\r\n            <span class=\"f-icon f-icon-lookup\"></span>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n\r\n<farris-dialog\r\n    #dialog\r\n    *ngIf=\"isShow\"\r\n    [draggable]=\"draggable\"\r\n    [resizable]=\"resizable\"\r\n    [title]=\"displayInfo.title\"\r\n    [beforeOpen]=\"beforeOpen\"\r\n    [beforeClose]=\"beforeClose\"\r\n    [(width)]=\"dialogWidth\"\r\n    [(height)]=\"dialogHeight\"\r\n    [showButtons]=\"showButtons\"\r\n    [showMaxButton]=\"showMaxButton\"\r\n    [showCloseButton]=\"true\"\r\n    [buttons]=\"buttonsRef || defaultButtonRef\"\r\n    [buttonAlign]=\"buttonAlign\"\r\n    [enableScroll]=\"false\"\r\n    [dialogHeaderHeight]=\"50\"\r\n    (maxed)=\"onMaxDialog($event)\"\r\n    (resized)=\"onResized($event)\"\r\n    (resizing)=\"onResizing($event)\"\r\n    [showHeader] = \"!useNewLayout\"\r\n    class=\"farris-lookup-dialog\"\r\n    [class.lookup-advanced]=\"useNewLayout\"\r\n    [minWidth]=\"550\"\r\n    [minHeight]=\"480\"\r\n>\r\n\r\n    <div [ngStyle]=\"containerStyle\" style=\"height: 100%;\" >\r\n        <lookup-tabs (tabChange)=\"onTabChange($event)\" [enableFav]=\"useFavorite\" [activeTab]=\"activeTab\" \r\n            [visible]=\"isReady\" [dialogTitle]=\"displayInfo.title\" [layout]=\"useNewLayout ? 'advanced': 'default'\"\r\n           >\r\n            <div datalist class=\"d-flex f-utils-absolute-all flex-column\">   \r\n                <layout [direction]=\"'h'\" [fill]=\"true\" *ngIf=\"isDoublleList()\" #layout>\r\n                    <layout-panel #leftPanel [width]=\"leftPanelWidth\" region=\"west\" [minWidth]=\"200\" [showBorder]=\"false\" [overflow]=\"'hidden'\">\r\n                        <ng-container #leftContainer></ng-container>\r\n                    </layout-panel>\r\n                    <layout-panel region=\"center\" [showBorder]=\"false\" [overflow]=\"'hidden'\" [minWidth]=\"200\">\r\n                        <div class=\"lookup-filter-bar\" lookup-filter-bar *ngIf=\"enableMultiFieldSearch && showFilterBar\" [viewType]=\"searchBarMode\"\r\n                            (conditionsChange)=\"onConditionsChange($event)\" [searchAnyField]=\"searchAnyField\" [columns]=\"columns\" [searchFields]=\"gridOptions?.searchFields\"></div>\r\n                        <ng-container #centerContainer></ng-container>\r\n                    </layout-panel>\r\n                </layout>\r\n                <div class=\"lookup-filter-bar\" lookup-filter-bar *ngIf=\"!isDoublleList() && enableMultiFieldSearch && showFilterBar\" [viewType]=\"searchBarMode\"\r\n                    [columns]=\"columns\" (conditionsChange)=\"onConditionsChange($event)\" [searchAnyField]=\"searchAnyField\"  [searchFields]=\"gridOptions?.searchFields\"></div>\r\n                <ng-container *ngIf=\"!isDoublleList()\" #contentContainer></ng-container>\r\n            </div>\r\n            <div favorites  class=\"d-flex f-utils-all h-100\" *ngIf=\"useFavorite\"> \r\n                <ng-container #favoritesContainer></ng-container>\r\n            </div>\r\n        </lookup-tabs>\r\n\r\n    </div>\r\n</farris-dialog>\r\n\r\n<ng-template #selectedPagerExtendTemplate let-dtref>\r\n    <button class=\"btn btn-link btn-sm p-0 pl-1 mr-3\" \r\n        *ngIf=\"dtref?.selections && dtref?.selections.length\" (click)=\"onDeleteSelectedItem($event)\">\r\n        {{ 'lookup.selectedInfo.remove' | locale | replaceX: dtref?.selections.length}}\r\n    </button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #defaultButtonRef>\r\n    <!-- \u5DF2\u9009\u8BB0\u5F55\u6D6E\u5C42 -->\r\n    <div class=\"lookup-selected-panel fade hide d-none\" #selectedpanel  *ngIf=\"showSelected\">\r\n        <div class=\"arrow\" [style.left.px]=\"displayType==='NAVTREELIST' && activeTab === 'datalist' && showNavigation ? 123: 38\"></div>\r\n        <div class=\"overlay\" style=\"top: 0px;\"></div>\r\n        <div class=\"content lookup-datalist\" #panelContent>\r\n\r\n            <farris-datatable #multiSelectDT \r\n                [idField]=\"idField\"\r\n                [bordered]=\"false\"\r\n                [width]=\"panelContent.offsetWidth - 28\"\r\n                [columns]=\"selectedColumns\"\r\n                [data]=\"currentSelectedItems | async\"\r\n                (cellClick)=\"multiSelMgr?.onSelectedTableCellClick($event)\"\r\n                [singleSelect]=\"false\"\r\n                [striped]=\"true\"\r\n                [pagination]=\"true\"\r\n                [pageSize]=\"20\"\r\n                [pagerOnServer]=\"false\"\r\n                [pagerViewMode]=\"'simple'\"\r\n                [showPageInfo]=\"false\" \r\n                [showPageNumber]=\"false\" \r\n                [showPageList]=\"false\"\r\n                [remoteSort]=\"false\"\r\n                [total]=\"(currentSelectedItems | async)?.length\"\r\n                [pagerExtendTemplate]=\"selectedPagerExtendTemplate\"\r\n                [autoFitColumns]=\"true\"\r\n            >\r\n        </farris-datatable>\r\n\r\n        </div>\r\n        <div class=\"overlay\" style=\"bottom: 0px;\"></div>\r\n    </div>\r\n\r\n\r\n   \r\n<!--\u4EE5\u4E0B\u4E3A\u6309\u94AE\u533A\u57DF-->\r\n\r\n    <div class=\"f-utils-fill d-flex flex-row m-0\" style=\"text-align: left; align-items: center;height: 30px\" *ngIf=\"isReady\">\r\n        <!--\u5DE6\u4FA7\u5BFC\u822A\u6811 \u5305\u542B\u4E0B\u7EA7-->\r\n        <div class=\"d-flex mr-2\" *ngIf=\"displayType==='NAVTREELIST' && activeTab === 'datalist' && showNavigation\">\r\n            <div class=\"custom-control custom-checkbox custom-control-inline m-0 p-0\">\r\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup-nav_get-all-child-nodes\" [ngModel]=\"includeSubordinates\" (ngModelChange)=\"onIncludeSubordinatesChange($event)\">\r\n                <label class=\"custom-control-label btn-link lookup-checkbox-label\" for=\"farris-lookup-nav_get-all-child-nodes\" style=\"padding-left: 18px;\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</label>\r\n            </div>\r\n        </div>\r\n\r\n        <ng-container *ngIf=\" !singleSelect\">\r\n\r\n            <!--\u5DF2\u9009\u8BB0\u5F55-->\r\n            <div class=\"lookup-selected-bar d-flex\" *ngIf=\"showSelected\" \r\n                [style.pointerEvents]=\"(currentSelectedItems | async)?.length ? 'auto': 'none'\" \r\n                [style.opacity]=\"(currentSelectedItems | async)?.length ? 1: 0.4\"\r\n                lookup-selected [count]=\" (currentSelectedItems | async)?.length\"\r\n                [selectedPanel]=\"selectedpanel\" [dataTableRef]=\"selectedDtRef\"\r\n                [class.mr-2]=\"!((currentSelectedItems | async)?.length)\"\r\n                [innerHTML]=\"'lookup.selectedInfo.total' | locale | replaceX: (currentSelectedItems | async)?.length\">\r\n            </div>\r\n            <button class=\"btn btn-link btn-sm p-0 pl-1 mr-3 lookup-clear-selected-items\" \r\n                *ngIf=\"showSelected && (currentSelectedItems | async)?.length\" (click)=\"clearSelected($event)\">\r\n                {{labels.clearAllSelected}}\r\n            </button>\r\n\r\n            <!--\u6811\u8868\u5E2E\u52A9\u7EA7\u8054\u63A7\u5236-->\r\n            <select *ngIf=\"showCascadeControl && enableCascade && displayType==='TREELIST'\" class=\"form-control\" style=\"width: auto; display: inline-block\" (ngModelChange)=\"ttEventMgr?.cascadeValueChanged($event)\" \r\n            [ngModel]=\"cascadeStatus\" name=\"cascadeStatus\" single-select #cascadeSelect=\"singleSelect\" [panelRef]=\"selectpanel\" [width]=\"110\" [position]=\"'above'\">\r\n                <!-- <option value=\"enable\" *ngIf=\"cascadeItems ? cascadeItems.enable : true\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</option>\r\n                <option value=\"up\" *ngIf=\"cascadeItems ? cascadeItems.up : true\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</option>\r\n                <option value=\"down\" *ngIf=\"cascadeItems ? cascadeItems.down : true\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</option>\r\n                <option value=\"disable\" *ngIf=\"cascadeItems ? cascadeItems.disable : true\">{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</option> -->\r\n            </select>\r\n            <div #selectpanel class=\"single-select-panel f-area-hide\" [style.left]=\"showSelected ? (currentSelectedItems | async)?.length ? '164px': '92px': 'auto'\">\r\n                <ul class=\"dropdown-menu show\">\r\n                    <li class=\"dropdown-item\" [class.active]=\"cascadeStatus === 'enable'\" value=\"enable\" *ngIf=\"cascadeItems ? cascadeItems.enable : true\">{{ 'lookup.cascade.enable' | locale: '\u540C\u6B65\u9009\u62E9' }}</li>\r\n                    <li class=\"dropdown-item\" [class.active]=\"cascadeStatus === 'up'\" value=\"up\" *ngIf=\"cascadeItems ? cascadeItems.up : true\">{{ 'lookup.cascade.up' | locale: '\u5305\u542B\u4E0A\u7EA7' }}</li>\r\n                    <li class=\"dropdown-item\" [class.active]=\"cascadeStatus === 'down'\" value=\"down\" *ngIf=\"cascadeItems ? cascadeItems.down : true\">{{ 'lookup.cascade.down' | locale: '\u5305\u542B\u4E0B\u7EA7' }}</li>\r\n                    <li class=\"dropdown-item\" [class.active]=\"cascadeStatus === 'disable'\" value=\"disable\" *ngIf=\"cascadeItems ? cascadeItems.disable : true\">{{ 'lookup.cascade.disable' | locale: '\u4EC5\u9009\u62E9\u81EA\u8EAB' }}</li>\r\n                </ul>\r\n            </div>\r\n\r\n            <!--\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E-->\r\n            <div class=\"f-utils-fill custom-control custom-checkbox custom-control-inline m-0 p-0 ml-2\" *ngIf=\"enableGetAllChildNodes && enableCascade && displayType==='TREELIST'\">\r\n                <input class=\"custom-control-input\" type=\"checkbox\" id=\"farris-lookup_get-all-child-nodes\">\r\n                <label class=\"custom-control-label btn-link lookup-checkbox-label\" for=\"farris-lookup_get-all-child-nodes\" \r\n                    style=\"padding-left: 18px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;\" title=\"{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}\"\r\n                    (click)=\"onAllChildNodesClick($event)\">{{'lookup.getAllChilds'|locale: '\u83B7\u53D6\u6240\u6709\u5B50\u7EA7\u6570\u636E'}}</label>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\" (click)=\"cancelSelect()\" [disabled]=\"!(isReady || hasError)\" >\r\n        {{ 'lookup.cancelText' | locale: '\u53D6\u6D88' }}\r\n    </button>\r\n    <button #okbtn type=\"button\" [disabled]=\"!isReady\" class=\"btn btn-primary btn-lg\" >\r\n        {{ 'lookup.okText' | locale: '\u786E\u5B9A' }}\r\n    </button>\r\n   \r\n    \r\n</ng-template>\r\n",
                providers: [
                    LOOKUPGRID_VALUE_ACCESSOR,
                    ShortcutsService,
                    LookupDefaultMapping,
                    LookupUtils,
                    PersonalConfigService,
                ],
                encapsulation: ViewEncapsulation.None,
                exportAs: "lookup",
                styles: [".input-group{flex-wrap:nowrap}.ng-dirty.ng-invalid>input-group>.lookupbox{border-color:#ff0303}.lookup-clear{cursor:pointer;background:#fff!important}.lookup-clear:hover{background:#e9ecef!important}.f-lookup-favorite{cursor:pointer;color:#ff9800}.f-lookup-unfavorite{cursor:pointer;color:#dd2438}.lookup-tip{position:absolute;min-width:200px;max-height:400px;padding:.25rem 0;z-index:7777;background:#fff;box-shadow:0 2px 8px 0 rgba(0,0,0,.15);border-radius:2px}.lookup-tip .lookup-tip-header{font-weight:700;padding:.25rem .475rem;border-radius:0}.lookup-tip ul{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;padding-left:0;margin-bottom:0}.lookup-tip ul li{position:relative;display:block;width:100%;margin-bottom:-1px;padding:.25rem .875rem;color:rgba(0,0,0,.85);background-color:#fff;cursor:pointer}.lookup-tip ul li:hover{background-color:#e6f7ff}.f-lookup_quick-panel{height:100%;z-index:10001;position:absolute;overflow:auto;background:#fff;margin-top:.25rem;box-shadow:0 2px 8px 0 #dedede;border-radius:3px}.f-lookup_quick-panel .list{margin:0 6px}.f-lookup_quick-panel .list-group-item{padding:0 8px;border:0;margin-bottom:0;word-break:break-all;min-height:30px}.f-lookup_quick-panel .more{height:50px;text-align:center;line-height:50px}.f-lookup_quick-panel .norecord{height:100%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;font-size:16px;color:#bec6db}"]
            }] }
];
/** @nocollapse */
LookupGridComponent.ctorParameters = () => [
    { type: Injector },
    { type: ComponentFactoryResolver },
    { type: ElementRef },
    { type: CommonUtils },
    { type: LookupDefaultMapping },
    { type: ChangeDetectorRef },
    { type: ShortcutsService },
    { type: LookupUtils },
    { type: NgZone },
    { type: Renderer2 }
];
LookupGridComponent.propDecorators = {
    customDisplayType: [{ type: Input }],
    viewType: [{ type: Input }],
    displayType: [{ type: Input }],
    enableClear: [{ type: Input }],
    remoteSort: [{ type: Input }],
    condition: [{ type: Input }],
    conditions: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    singleSelect: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    idField: [{ type: Input }],
    uri: [{ type: Input }],
    beUri: [{ type: Input }],
    showFilterBar: [{ type: Input }],
    pagination: [{ type: Input }],
    pageIndex: [{ type: Input }],
    pageSize: [{ type: Input }],
    pageList: [{ type: Input }],
    total: [{ type: Input }],
    columns: [{ type: Input }],
    remoteSearch: [{ type: Input }],
    searchOnServer: [{ type: Input }],
    nosearch: [{ type: Input }],
    clearMappings: [{ type: Output }],
    maxLength: [{ type: Input }],
    mappingFn: [{ type: Input }],
    items: [{ type: Input }],
    favoriteItems: [{ type: Input }],
    customData: [{ type: Input }],
    bindingData: [{ type: Input }],
    treeInfo: [{ type: Input }],
    enableCascade: [{ type: Input }],
    cascadeStatus: [{ type: Input }],
    cascadeItems: [{ type: Input }],
    showCascadeControl: [{ type: Input }],
    placeholder: [{ type: Input }],
    showSelected: [{ type: Input }],
    useFavorite: [{ type: Input }],
    favoriteDataFrom: [{ type: Input }],
    useTip: [{ type: Input }],
    isRecordSize: [{ type: Input }],
    userId: [{ type: Input }],
    enableToSelect: [{ type: Input }],
    enableFindText: [{ type: Input }],
    expandLevel: [{ type: Input }],
    navTreeTableOptions: [{ type: Input }],
    treeTableOptions: [{ type: Input }],
    dataTableOptions: [{ type: Input }],
    loadTreeDataType: [{ type: Input }],
    loadDataWhenOpen: [{ type: Input }],
    navSelectedIds: [{ type: Input }],
    selectFirstInNav: [{ type: Input }],
    enableFullTree: [{ type: Input }],
    displayFormatter: [{ type: Input }],
    displayFields: [{ type: Input }],
    displayTextSeparator: [{ type: Input }],
    helpId: [{ type: Input }],
    textAlign: [{ type: Input }],
    enableTitle: [{ type: Input }],
    useExtendInfo: [{ type: Input }],
    extInfoFields: [{ type: Input }],
    extInfoFormatter: [{ type: Input }],
    extendInfo: [{ type: Input }],
    customFormatter: [{ type: Input }],
    customNavFormatter: [{ type: Input }],
    okHandler: [{ type: Input }],
    cancelHandler: [{ type: Input }],
    tagboxHeight: [{ type: Input }],
    maxTagboxHeight: [{ type: Input }],
    enableGetAllChildNodes: [{ type: Input }],
    shortcutKey: [{ type: Input }],
    quickSelect: [{ type: Input }],
    treeToList: [{ type: Input }],
    navTreeToList: [{ type: Input }],
    showNavigation: [{ type: Input }],
    beforeSelectData: [{ type: Input }],
    beforeLoadData: [{ type: Input }],
    useNewLayout: [{ type: Input }],
    enableMultiFieldSearch: [{ type: Input }],
    searchBarMode: [{ type: Input }],
    allowQueryFields: [{ type: Input }],
    labels: [{ type: Input }],
    searchAnyField: [{ type: Input }],
    selectedData: [{ type: Output }],
    clear: [{ type: Output }],
    search: [{ type: Output }],
    query: [{ type: Output }],
    valueChanged: [{ type: Output }],
    loadSuccess: [{ type: Output }],
    pagerChanged: [{ type: Output }],
    expandTreeNode: [{ type: Output }],
    textChanged: [{ type: Output }],
    checkedChange: [{ type: Output }],
    tagRemoved: [{ type: Output }],
    gridOptions: [{ type: Input }],
    contentContainer: [{ type: ViewChild, args: ["contentContainer", { read: ViewContainerRef },] }],
    favoritesContainer: [{ type: ViewChild, args: ["favoritesContainer", { read: ViewContainerRef },] }],
    leftContainer: [{ type: ViewChild, args: ["leftContainer", { read: ViewContainerRef },] }],
    centerContainer: [{ type: ViewChild, args: ["centerContainer", { read: ViewContainerRef },] }],
    selectedDtRef: [{ type: ViewChild, args: ["multiSelectDT",] }],
    inputGroup: [{ type: ViewChild, args: ["inputgroup",] }],
    leftPanel: [{ type: ViewChild, args: ["leftPanel",] }],
    tagbox: [{ type: ViewChild, args: ["tagbox",] }],
    okButton: [{ type: ViewChild, args: ["okbtn",] }],
    tagInput: [{ type: ViewChild, args: ["tagInput",] }],
    selectedpanel: [{ type: ViewChild, args: ['selectedpanel',] }],
    cascadeSelect: [{ type: ViewChild, args: ['cascadeSelect',] }],
    layoutRef: [{ type: ViewChild, args: ['layout',] }]
};
if (false) {
    /** @type {?} */
    LookupGridComponent.prototype.groupIcon;
    /** @type {?} */
    LookupGridComponent.prototype._displayType;
    /**
     * 使用表单设计器中的显示类型。否则使用元数据设置的显示类型。 默认：false
     * @type {?}
     */
    LookupGridComponent.prototype.customDisplayType;
    /** @type {?} */
    LookupGridComponent.prototype.viewType;
    /**
     * 启用清空按钮
     * @type {?}
     */
    LookupGridComponent.prototype.enableClear;
    /**
     * 服务器端排序
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSort;
    /** @type {?} */
    LookupGridComponent.prototype.condition;
    /** @type {?} */
    LookupGridComponent.prototype.conditions;
    /**
     * 树表显示全选复选框。 默认不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showCheckAll;
    /**
     * 是否启用多选
     * @type {?}
     */
    LookupGridComponent.prototype.singleSelect;
    /**
     * 多选分隔符, 默认为 ,
     * @type {?}
     */
    LookupGridComponent.prototype.multipleChoiceSeparator;
    /**
     * 主键字段
     * @type {?}
     */
    LookupGridComponent.prototype.idField;
    /**
     * 可以为元数据ID、webapiURL
     * @type {?}
     */
    LookupGridComponent.prototype.uri;
    /**
     * BE REST RUI
     * - 此处设置后 uri 失效
     * @type {?}
     */
    LookupGridComponent.prototype.beUri;
    /**
     * 显示过滤工具条; 默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.showFilterBar;
    /**
     * 是否启用分页
     * @type {?}
     */
    LookupGridComponent.prototype.pagination;
    /**
     * 当前页索引，从 1开始
     * @type {?}
     */
    LookupGridComponent.prototype.pageIndex;
    /**
     * 每页记录数
     * @type {?}
     */
    LookupGridComponent.prototype.pageSize;
    /**
     * 可用分页记录数列表
     * @type {?}
     */
    LookupGridComponent.prototype.pageList;
    /**
     * 总记录数
     * @type {?}
     */
    LookupGridComponent.prototype.total;
    /**
     * 显示列信息, 默认为 []
     * @type {?}
     */
    LookupGridComponent.prototype.columns;
    /**
     * 帮助查询是否为远端查询
     * @type {?}
     */
    LookupGridComponent.prototype.remoteSearch;
    /**
     * 文本变化后，进行服务器端查询
     * @type {?}
     */
    LookupGridComponent.prototype.searchOnServer;
    /**
     * 不进行服务器查询，有啥算啥
     * @type {?}
     */
    LookupGridComponent.prototype.nosearch;
    /**
     * 启用任意输入后，值通过输入时触发
     * @type {?}
     */
    LookupGridComponent.prototype.clearMappings;
    /**
     * 允许输入的字符最大长度。
     * 任意输入时，此属性有效
     * @type {?}
     */
    LookupGridComponent.prototype.maxLength;
    /** @type {?} */
    LookupGridComponent.prototype.mappingFn;
    /**
     * 数据列表
     * @type {?}
     */
    LookupGridComponent.prototype.items;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteItems;
    /**
     * 自定义数据
     * @type {?}
     */
    LookupGridComponent.prototype.customData;
    /**
     * 绑定值所在的对象
     * @type {?}
     */
    LookupGridComponent.prototype.bindingData;
    /** @type {?} */
    LookupGridComponent.prototype.treeInfo;
    /**
     * 是否启用级联选择控制选项
     * @type {?}
     */
    LookupGridComponent.prototype.enableCascade;
    /**
     * 级联控制默认值： enable: 同步选择, up：包含上级, down：包含下级, disable：仅选择自身
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeStatus;
    /**
     * 分别级联选项的启用状态，默认全部启用
     * @type {?}
     */
    LookupGridComponent.prototype.cascadeItems;
    /**
     * 显示级联控制
     * @type {?}
     */
    LookupGridComponent.prototype.showCascadeControl;
    /** @type {?} */
    LookupGridComponent.prototype.placeholder;
    /**
     * 显示已选记录列表。 默认为 false 不显示
     * @type {?}
     */
    LookupGridComponent.prototype.showSelected;
    /**
     * 应用收藏夹
     * @type {?}
     */
    LookupGridComponent.prototype.useFavorite;
    /**
     * 收藏数据来自于： locale: 本地存储， remote: 服务器端存储
     * @type {?}
     */
    LookupGridComponent.prototype.favoriteDataFrom;
    /**
     * 使用提示,快捷选择
     * @type {?}
     */
    LookupGridComponent.prototype.useTip;
    /**
     * 记录窗口大小
     * @type {?}
     */
    LookupGridComponent.prototype.isRecordSize;
    /**
     * 快速选择
     * @type {?}
     */
    LookupGridComponent.prototype.userId;
    /**
     * 是否启用选中value值对应的行数据，默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.enableToSelect;
    /** @type {?} */
    LookupGridComponent.prototype.enableFindText;
    /**
     * -1: 不展开； 0: 全部展开；>0: 展开到指定级数
     * @type {?}
     */
    LookupGridComponent.prototype.expandLevel;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.treeTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.dataTableOptions;
    /** @type {?} */
    LookupGridComponent.prototype.defaultTreeTableOptions;
    /**
     * 树形帮助数据加载方式： default: 内置取数； loadall: 加载所有 layerload：分层加载
     * @type {?}
     */
    LookupGridComponent.prototype.loadTreeDataType;
    /**
     * 窗口打开后立即加载数据，默认为 true
     * @type {?}
     */
    LookupGridComponent.prototype.loadDataWhenOpen;
    /**
     * 导航列表，树列表在帮助打开后选中的数据;
     * 设置后，`selectFirstInNav` 失效！
     * @type {?}
     */
    LookupGridComponent.prototype.navSelectedIds;
    /**
     * 导航帮助，选中第1条数据，默认为 false;
     * 注意：当`navSelectedIds`不为空时，此属性失效。
     * @type {?}
     */
    LookupGridComponent.prototype.selectFirstInNav;
    /**
     * 启用构造完整树过滤
     * @type {?}
     */
    LookupGridComponent.prototype.enableFullTree;
    /**
     * 显示文本自定义函数
     * @type {?}
     */
    LookupGridComponent.prototype.displayFormatter;
    /**
     * 显示文本字段集合，以 英文 逗号隔开
     * @type {?}
     */
    LookupGridComponent.prototype.displayFields;
    /** @type {?} */
    LookupGridComponent.prototype.displayTextSeparator;
    /**
     * 帮助元数据ID，不为空时调用指定的URI
     * /api/runtime/bcc/v1.0/help/data/{helpId}
     * @type {?}
     */
    LookupGridComponent.prototype.helpId;
    /**
     * 文本对齐方式； left | center | right; 默认 left
     * @type {?}
     */
    LookupGridComponent.prototype.textAlign;
    /**
     * 鼠标滑过输入框时显示输入框内的文本信息
     * @type {?}
     */
    LookupGridComponent.prototype.enableTitle;
    /** @type {?} */
    LookupGridComponent.prototype.useExtendInfo;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFields;
    /** @type {?} */
    LookupGridComponent.prototype.extInfoFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.extendInfo;
    /**
     * IDE 设计器自定义格式化 2103
     * @type {?}
     */
    LookupGridComponent.prototype.customFormatter;
    /** @type {?} */
    LookupGridComponent.prototype.customNavFormatter;
    /**
     * 自定义确定事件
     * @type {?}
     */
    LookupGridComponent.prototype.okHandler;
    /**
     * 自定义取消事件
     * @type {?}
     */
    LookupGridComponent.prototype.cancelHandler;
    /** @type {?} */
    LookupGridComponent.prototype.tagboxHeight;
    /** @type {?} */
    LookupGridComponent.prototype.maxTagboxHeight;
    /**
     * 启用获取所有子级数据的功能,仅支持分级码
     * @type {?}
     */
    LookupGridComponent.prototype.enableGetAllChildNodes;
    /** @type {?} */
    LookupGridComponent.prototype.shortcutKey;
    /**
     * 快捷选择相关配置项，默认为 null, 即不启用此功能
     * @type {?}
     */
    LookupGridComponent.prototype.quickSelect;
    /**
     * 树形帮助 是否使用树形结构数据。默认为 true, 当为 false 时，服务器端无须构造树形结构，按普通列表输出
     * @type {?}
     */
    LookupGridComponent.prototype.treeToList;
    /** @type {?} */
    LookupGridComponent.prototype.navTreeToList;
    /**
     * 带导航的帮助中，是否显示左侧导航部分。默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.showNavigation;
    /**
     * 数据选择后，值映射前触发
     * 返回 Observable
     *      canSelect: <boolean>  是否允许选择
     *      message: <string> 不允许选择时的提示信息
     * @type {?}
     */
    LookupGridComponent.prototype.beforeSelectData;
    /** @type {?} */
    LookupGridComponent.prototype.beforeLoadData;
    /**
     * 是否启用新布局
     * - 默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.useNewLayout;
    /**
     * 启用多字段查询 默认为 false
     * - 启用此特性后，useNewLayout 自动启用
     * @type {?}
     */
    LookupGridComponent.prototype.enableMultiFieldSearch;
    /**
     * 搜索工具条显示模式， both: 全部显示；onlyfield: 仅显示字段；onlyinput: 仅显示搜索输入框。默认 both
     * @type {?}
     */
    LookupGridComponent.prototype.searchBarMode;
    /**
     * 允许查询的字段，仅启用多字段查询时有效，多个字段以 “,” 隔开；
     *  - nav 左侧导航字段；main 主数据字段;
     *  - 默认为 null, 即从所有显示列中自动提取
     * @type {?}
     */
    LookupGridComponent.prototype.allowQueryFields;
    /** @type {?} */
    LookupGridComponent.prototype.labels;
    /**
     * 允许任意字段进行查询； 默认 true
     * @type {?}
     */
    LookupGridComponent.prototype.searchAnyField;
    /** @type {?} */
    LookupGridComponent.prototype.selectedData;
    /** @type {?} */
    LookupGridComponent.prototype.clear;
    /**
     * 未启用多字段查询时触发
     * @type {?}
     */
    LookupGridComponent.prototype.search;
    /**
     * 启用多字段查询时触发
     * @type {?}
     */
    LookupGridComponent.prototype.query;
    /** @type {?} */
    LookupGridComponent.prototype.valueChanged;
    /** @type {?} */
    LookupGridComponent.prototype.loadSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.pagerChanged;
    /** @type {?} */
    LookupGridComponent.prototype.expandTreeNode;
    /** @type {?} */
    LookupGridComponent.prototype.textChanged;
    /** @type {?} */
    LookupGridComponent.prototype.checkedChange;
    /** @type {?} */
    LookupGridComponent.prototype.tagRemoved;
    /**
     * 内容中留白边距
     * @type {?}
     */
    LookupGridComponent.prototype.containerMargin;
    /** @type {?} */
    LookupGridComponent.prototype.containerStyle;
    /** @type {?} */
    LookupGridComponent.prototype._gridOptions;
    /** @type {?} */
    LookupGridComponent.prototype.contentContainer;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesContainer;
    /** @type {?} */
    LookupGridComponent.prototype.leftContainer;
    /** @type {?} */
    LookupGridComponent.prototype.centerContainer;
    /** @type {?} */
    LookupGridComponent.prototype.selectedDtRef;
    /** @type {?} */
    LookupGridComponent.prototype.inputGroup;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanel;
    /** @type {?} */
    LookupGridComponent.prototype.tagbox;
    /** @type {?} */
    LookupGridComponent.prototype.okButton;
    /** @type {?} */
    LookupGridComponent.prototype.tagInput;
    /** @type {?} */
    LookupGridComponent.prototype.selectedpanel;
    /** @type {?} */
    LookupGridComponent.prototype.cascadeSelect;
    /** @type {?} */
    LookupGridComponent.prototype.layoutRef;
    /** @type {?} */
    LookupGridComponent.prototype.componentRef;
    /** @type {?} */
    LookupGridComponent.prototype.leftComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.favoritesComponentRef;
    /** @type {?} */
    LookupGridComponent.prototype.http;
    /** @type {?} */
    LookupGridComponent.prototype.messagerService;
    /** @type {?} */
    LookupGridComponent.prototype.loadingService;
    /** @type {?} */
    LookupGridComponent.prototype.loading;
    /** @type {?} */
    LookupGridComponent.prototype.navigationOptions;
    /** @type {?} */
    LookupGridComponent.prototype.leftPanelWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navLookupDialogMinWidth;
    /** @type {?} */
    LookupGridComponent.prototype.navigationFilter;
    /** @type {?} */
    LookupGridComponent.prototype.subscriptions;
    /** @type {?} */
    LookupGridComponent.prototype.dialogOpenedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.dialogClosedSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.isTextChange;
    /** @type {?} */
    LookupGridComponent.prototype.isTabChanged;
    /** @type {?} */
    LookupGridComponent.prototype.displayInfo;
    /** @type {?} */
    LookupGridComponent.prototype.tabChangeSubscription;
    /** @type {?} */
    LookupGridComponent.prototype.personalConf;
    /** @type {?} */
    LookupGridComponent.prototype.favoriteColumns;
    /**
     * 临时查询参数
     * @type {?}
     */
    LookupGridComponent.prototype._searchState;
    /** @type {?} */
    LookupGridComponent.prototype.allData;
    /** @type {?} */
    LookupGridComponent.prototype.personalConfigService;
    /** @type {?} */
    LookupGridComponent.prototype.utilService;
    /** @type {?} */
    LookupGridComponent.prototype.treeNodeHelper;
    /** @type {?} */
    LookupGridComponent.prototype.localService;
    /** @type {?} */
    LookupGridComponent.prototype.notifyService;
    /** @type {?} */
    LookupGridComponent.prototype.allColumnsTitle;
    /** @type {?} */
    LookupGridComponent.prototype.mustWriteSomething;
    /** @type {?} */
    LookupGridComponent.prototype.mustChoosAdatarow;
    /** @type {?} */
    LookupGridComponent.prototype.addFavoriteSuccess;
    /** @type {?} */
    LookupGridComponent.prototype.delFavoriteSuccess;
    /**
     * 使用内置的查询方法, 默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.useInsideSearchHandler;
    /** @type {?} */
    LookupGridComponent.prototype.searching;
    /**
     * 临时存储查询结果集
     * @type {?}
     */
    LookupGridComponent.prototype._searchResult;
    /** @type {?} */
    LookupGridComponent.prototype.lookupinitializationSubject;
    /**
     * 多选时，选中的数据
     * @type {?}
     */
    LookupGridComponent.prototype.currentSelectedItems;
    /**
     * 已选数据列信息
     * @type {?}
     */
    LookupGridComponent.prototype.selectedColumns;
    /** @type {?} */
    LookupGridComponent.prototype.activeTab;
    /** @type {?} */
    LookupGridComponent.prototype.favHelper;
    /** @type {?} */
    LookupGridComponent.prototype.ttEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.multiSelMgr;
    /** @type {?} */
    LookupGridComponent.prototype.httpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupCmpMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dialogMgr;
    /** @type {?} */
    LookupGridComponent.prototype.selectionMgr;
    /** @type {?} */
    LookupGridComponent.prototype.dtEventMgr;
    /** @type {?} */
    LookupGridComponent.prototype.lookupSelectionSer;
    /** @type {?} */
    LookupGridComponent.prototype.controlId;
    /** @type {?} */
    LookupGridComponent.prototype.savingFaoriteData;
    /** @type {?} */
    LookupGridComponent.prototype.isReady;
    /** @type {?} */
    LookupGridComponent.prototype.showTagboxClearButton;
    /** @type {?} */
    LookupGridComponent.prototype.hasError;
    /** @type {?} */
    LookupGridComponent.prototype.cascadeStatusItems;
    /** @type {?} */
    LookupGridComponent.prototype.isGetAllChidlNodes;
    /** @type {?} */
    LookupGridComponent.prototype.eventManager;
    /**
     * 选中记录ID，自定义帮助取数时使用
     * @type {?}
     */
    LookupGridComponent.prototype.selectedIds;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.lookupSearchInputEvent;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.farrisInstances;
    /**
     * 用户初始设置
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype._userSettings;
    /** @type {?} */
    LookupGridComponent.prototype._treeInfo_;
    /**
     * dialog 内容区域高度。 弹窗总高度 - 头部高度 - 脚部高度 - （启用收藏 TAB头高度）
     * @type {?}
     */
    LookupGridComponent.prototype.dialogContentHeight;
    /**
     * 左树右列表， 左树点击节点查询时是否包括下级节点的数据，默认 false
     * @type {?}
     */
    LookupGridComponent.prototype.includeSubordinates;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$;
    /** @type {?} */
    LookupGridComponent.prototype.includeSubordinates$$;
    /** @type {?} */
    LookupGridComponent.prototype.overLayService;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.debugSer;
    /** @type {?} */
    LookupGridComponent.prototype.injector;
    /** @type {?} */
    LookupGridComponent.prototype.cfr;
    /** @type {?} */
    LookupGridComponent.prototype.el;
    /** @type {?} */
    LookupGridComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.defaultMapping;
    /** @type {?} */
    LookupGridComponent.prototype.changeDetector;
    /** @type {?} */
    LookupGridComponent.prototype.shortcuts;
    /** @type {?} */
    LookupGridComponent.prototype.lookupUtils;
    /**
     * @type {?}
     * @private
     */
    LookupGridComponent.prototype.zone;
    /** @type {?} */
    LookupGridComponent.prototype.render2;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1sb29rdXAvIiwic291cmNlcyI6WyJsaWIvbG9va3VwLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQVNBLE9BQU8sRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFDbkMsWUFBWSxFQUFRLFFBQVEsRUFBQyx3QkFBd0IsRUFDckQsTUFBTSxFQUFDLGlCQUFpQixFQUFDLGlCQUFpQixFQUFlLGdCQUFnQixFQUN6RSxVQUFVLEVBQW1CLFVBQVUsRUFBQyxNQUFNLEVBQUMsU0FBUyxHQUF5QixNQUFNLGVBQWUsQ0FBQztBQUV2RyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQTRCLEVBQUUsRUFBRSxPQUFPLEVBQW1CLE1BQU0sTUFBTSxDQUFDO0FBRTlFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdEQsT0FBTyxFQUFFLGNBQWMsRUFBb0IsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQUUsa0JBQWtCLEVBQVksTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsZUFBZSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDMUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsOEJBQThCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVwSCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVB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QXNDOztJQUVsQyx1Q0FBeUI7O0lBQ3pCLGtDQUFvQzs7SUFDcEMsaUNBQXFCOztJQUNyQixvQ0FBeUI7Ozs7O0lBQ3pCLDZDQUE0Qzs7SUFDNUMsNkNBQXdDOztJQUN4Qyx3Q0FBa0M7O0lBQ2xDLDBDQUErQjs7Ozs7SUFDL0IsbUNBQW9COztJQUNwQixzQ0FBeUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBAQXV0aG9yOiDnlq/ni4Lnp4DmiY0obHVjYXMgaHVhbmcpXHJcbiAqIEBEYXRlOiAyMDE4LTExLTIzIDExOjIzOjEyXHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEwLTIwIDIwOjE4OjI2XHJcbiAqIEBDb21wYW55OiBJbnNwdXJcclxuICogQFZlcnNpb246IHYwLjMueFxyXG4gKi9cclxuXHJcbmltcG9ydCB7Q29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsXHJcbkV2ZW50RW1pdHRlcixPbkluaXQsSW5qZWN0b3IsQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG5PdXRwdXQsQ2hhbmdlRGV0ZWN0b3JSZWYsVmlld0VuY2Fwc3VsYXRpb24sQWZ0ZXJWaWV3SW5pdCxWaWV3Q29udGFpbmVyUmVmLFxyXG5mb3J3YXJkUmVmLENvbXBvbmVudFJlZixUeXBlLEVsZW1lbnRSZWYsTmdab25lLFJlbmRlcmVyMixPbkRlc3Ryb3ksSG9zdExpc3RlbmVyLH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuXHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgb2YsIFN1YmplY3QsIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XHJcblxyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktbG9jYWxlXCI7XHJcbmltcG9ydCB7IElSZXNpemVFdmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWRyYWdnYWJsZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1tZXNzYWdlclwiO1xyXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSwgTG9hZGluZ0NvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWxvYWRpbmdcIjtcclxuaW1wb3J0IHsgRGF0YVRhYmxlQ29tcG9uZW50IH0gZnJvbSBcIkBmYXJyaXMvdWktZGF0YXRhYmxlXCI7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCwgVHJlZU5vZGUgfSBmcm9tIFwiQGZhcnJpcy91aS10cmVldGFibGVcIjtcclxuaW1wb3J0IHsgTGF5b3V0Q29tcG9uZW50LCBMYXlvdXRQYW5lbENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWxheW91dFwiO1xyXG5pbXBvcnQgeyBDb21tb25VdGlscywgRGVidWdTZXJ2aWNlLCBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsIE92ZXJMYXlIaWRkZW5TZXJ2aWNlIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uXCI7XHJcbmltcG9ydCB7IEVudGl0eUZpbHRlciwgRmlsdGVyQ29uZGl0aW9uIH0gZnJvbSBcIkBmYXJyaXMvdWktY29tbW9uL3R5cGVzXCI7XHJcbmltcG9ydCB7IFNob3J0Y3V0c1NlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1zaG9ydGN1dHNcIjtcclxuaW1wb3J0IHsgSW5wdXRHcm91cENvbXBvbmVudCB9IGZyb20gXCJAZmFycmlzL3VpLWlucHV0LWdyb3VwXCI7XHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tIFwiQGZhcnJpcy91aS1ub3RpZnlcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBGQVZPUklURV9GSUVMRF9OQU1FLFxyXG4gICAgSU5QVVRfR1JPVVBfSUNPTixcclxuICAgIExvb2t1cEdyaWREaXNwbGF5VHlwZSxcclxuICAgIEV4dEluZm9Gb3JtYXR0ZXIsXHJcbiAgICBDdXN0b21EYXRhRm9ybWF0dGVyLFxyXG4gICAgUXVpY2tTZWxlY3RPcHRpb24sXHJcbiAgICBRdWlja1NlbGVjdERlZmF1bHRPcHRpb25zLFxyXG4gICAgU2VhcmNoQmFyTW9kZSxcclxufSBmcm9tIFwiLi9sb29rdXAtZGlzcGxheXR5cGVcIjtcclxuaW1wb3J0IHsgTG9va3VwQ29tcG9uZW50IH0gZnJvbSBcIi4vbG9va3VwLmNvbXBvbmVudFwiO1xyXG5pbXBvcnQge1xyXG4gICAgTG9va3VwR3JpZE9wdGlvbnMsXHJcbiAgICBsb29rdXBHcmlkRGVmYXVsdHMsXHJcbiAgICBMb29rdXBHcmlkUmVzdWx0LFxyXG4gICAgTmF2aWdhdGlvbk9wdGlvbnMsXHJcbiAgICBEaXNwbGF5SW5mbyxcclxuICAgIGRpc3BsYXlJbmZvRGVmYXVsdCxcclxuICAgIFBpY2tpbmdSZXN1bHQsXHJcbiAgICBUcmVlSW5mbyxcclxuICAgIExPQURfREFUQV9UWVBFLFxyXG4gICAgT05MWV9TRUxFQ1RfTEVBRixcclxuICAgIFBlcnNvbmFsQ29uZmlnfSBmcm9tIFwiLi9sb29rdXAtZ3JpZC1vcHRpb25zXCI7XHJcbmltcG9ydCB7IElMb29rdXBIdHRwU2VydmljZSwgU2VydmVyU2lkZVRva2VuIH0gZnJvbSBcIi4vaHR0cC9JTG9va3VwSHR0cFNlcnZpY2VcIjtcclxuaW1wb3J0IHsgTmF2aWdhdGlvbkZpbHRlciB9IGZyb20gXCIuL2h0dHAvUmVtb3RlUGFyYW1zXCI7XHJcbmltcG9ydCB7IExvb2t1cExlZnRDb21wb25lbnQgfSBmcm9tIFwiLi9sb29rdXAtbGVmdC5jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgTG9va3VwRGVmYXVsdE1hcHBpbmcgfSBmcm9tIFwiLi9sb29rdXAtZGVmYXV0LW1hcHBpbmdcIjtcclxuaW1wb3J0IHsgTG9va3VwVXRpbHMgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBQZXJzb25hbENvbmZpZ1NlcnZpY2UgfSBmcm9tIFwiLi9sb29rdXAtcHJlc29uYWxDb25maWcuc2VydmljZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgVXRpbFNlcnZpY2UsXHJcbiAgICBUcmVlTm9kZUhlbHBlcixcclxuICAgIEZhdm9yaXRlSGVscGVyLFxyXG4gICAgU2VsZWN0aW9uTWFuYWdlcixcclxuICAgIERhdGFUYWJsZUV2ZW50TWFuYWdlcixcclxuICAgIFRyZWVUYWJsZUV2ZW50TWFuYWdlcixcclxuICAgIE11bHRpU2VsZWN0aW9uTWFuYWdlcixcclxuICAgIExvb2t1cEh0dHBNYW5hZ2VyLFxyXG4gICAgTG9va3VwQ29tcG9uZW50TWFuYWdlcixcclxuICAgIExvb2t1cERpYWxvZ01hbmFnZXIsXHJcbiAgICBvblRleHRDaGFuZ2VkLFxyXG4gICAgTG9va3VwU2VsZWN0aW9uU2VydmljZSxcclxufSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAsIHN3aXRjaE1hcCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xyXG5cclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjtcclxuaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSBcImxvZGFzaC1lc1wiO1xyXG5pbXBvcnQgeyBTaW5nbGVTZWxlY3REaXJlY3RpdmUgfSBmcm9tIFwiQGZhcnJpcy91aS1mb3Jtc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IExPT0tVUEdSSURfVkFMVUVfQUNDRVNTT1I6IGFueSA9IHtcclxuICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTG9va3VwR3JpZENvbXBvbmVudCksXHJcbiAgICBtdWx0aTogdHJ1ZSxcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6IFwiZmFycmlzLWxvb2t1cC1ncmlkXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogXCIuL2xvb2t1cC1ncmlkLmNvbXBvbmVudC5odG1sXCIsXHJcbiAgICBzdHlsZVVybHM6IFtcIi4vbG9va3VwLWdyaWQuY29tcG9uZW50LnNjc3NcIl0sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBMT09LVVBHUklEX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgIFNob3J0Y3V0c1NlcnZpY2UsXHJcbiAgICAgICAgTG9va3VwRGVmYXVsdE1hcHBpbmcsXHJcbiAgICAgICAgTG9va3VwVXRpbHMsXHJcbiAgICAgICAgUGVyc29uYWxDb25maWdTZXJ2aWNlLFxyXG4gICAgXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBleHBvcnRBczogXCJsb29rdXBcIlxyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9va3VwR3JpZENvbXBvbmVudFxyXG4gICAgZXh0ZW5kcyBMb29rdXBDb21wb25lbnRcclxuICAgIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveVxyXG57XHJcbiAgICBncm91cEljb24gPSBJTlBVVF9HUk9VUF9JQ09OO1xyXG4gICAgX2Rpc3BsYXlUeXBlID0gXCJcIjtcclxuXHJcbiAgICAvKiog5L2/55So6KGo5Y2V6K6+6K6h5Zmo5Lit55qE5pi+56S657G75Z6L44CC5ZCm5YiZ5L2/55So5YWD5pWw5o2u6K6+572u55qE5pi+56S657G75Z6L44CCIOm7mOiupO+8mmZhbHNlICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21EaXNwbGF5VHlwZSA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgdmlld1R5cGU6IFwidGV4dFwiIHwgXCJ0YWdcIiA9IFwidGV4dFwiO1xyXG4gICAgQElucHV0KClcclxuICAgIGdldCBkaXNwbGF5VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheVR5cGU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGlzcGxheVR5cGUodmFsOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGVzID0gT2JqZWN0LnZhbHVlcyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpID0gdHlwZXMuZmluZEluZGV4KChuKSA9PiBuID09PSB2YWwudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhMb29rdXBHcmlkRGlzcGxheVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGxheVR5cGUgPSBMb29rdXBHcmlkRGlzcGxheVR5cGVba2V5c1tpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwbGF5VHlwZSA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiog5ZCv55So5riF56m65oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVDbGVhciA9IHRydWU7XHJcbiAgICAvKiog5pyN5Yqh5Zmo56uv5o6S5bqPICovXHJcbiAgICBASW5wdXQoKSByZW1vdGVTb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBjb25kaXRpb246IEVudGl0eUZpbHRlcjtcclxuICAgIEBJbnB1dCgpIGNvbmRpdGlvbnM6IEFycmF5PEZpbHRlckNvbmRpdGlvbj47XHJcblxyXG4gICAgLyoqIOagkeihqOaYvuekuuWFqOmAieWkjemAieahhuOAgiDpu5jorqTkuI3mmL7npLogKi9cclxuICAgIEBJbnB1dCgpIHNob3dDaGVja0FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDmmK/lkKblkK/nlKjlpJrpgIkgKi9cclxuICAgIEBJbnB1dCgpIHNpbmdsZVNlbGVjdCA9IHRydWU7XHJcbiAgICAvKiog5aSa6YCJ5YiG6ZqU56ymLCDpu5jorqTkuLogLCAqL1xyXG4gICAgQElucHV0KCkgbXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IgPSBcIixcIjtcclxuICAgIC8qKiDkuLvplK7lrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIGlkRmllbGQ/OiBzdHJpbmc7XHJcbiAgICAvKiog5Y+v5Lul5Li65YWD5pWw5o2uSUTjgIF3ZWJhcGlVUkwgKi9cclxuICAgIEBJbnB1dCgpIHVyaT86IHN0cmluZyA9ICcnO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCRSBSRVNUIFJVSVxyXG4gICAgICogLSDmraTlpITorr7nva7lkI4gdXJpIOWkseaViFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBiZVVyaSA9IFwiXCI7XHJcbiAgICAvKipcclxuICAgICAqIOaYvuekuui/h+a7pOW3peWFt+adoTsg6buY6K6kIHRydWVcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgc2hvd0ZpbHRlckJhciA9IHRydWU7XHJcbiAgICAvKiog5piv5ZCm5ZCv55So5YiG6aG1ICovXHJcbiAgICBASW5wdXQoKSBwYWdpbmF0aW9uID0gdHJ1ZTtcclxuICAgIC8qKiDlvZPliY3pobXntKLlvJXvvIzku44gMeW8gOWniyAqL1xyXG4gICAgQElucHV0KCkgcGFnZUluZGV4ID0gMTtcclxuICAgIC8qKiDmr4/pobXorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHBhZ2VTaXplID0gMjA7XHJcbiAgICAvKiog5Y+v55So5YiG6aG16K6w5b2V5pWw5YiX6KGoICovXHJcbiAgICBASW5wdXQoKSBwYWdlTGlzdCA9IFsxMCwgMjAsIDMwLCA1MCwgMTAwXTtcclxuICAgIC8qKiDmgLvorrDlvZXmlbAgKi9cclxuICAgIEBJbnB1dCgpIHRvdGFsID0gMDtcclxuICAgIC8qKiDlj6/mi5bliqjliJcgKi9cclxuICAgIC8vIEBJbnB1dCgpIHJlc2l6YWJsZUNvbHVtbnMgPSB0cnVlO1xyXG4gICAgLyoqIOaYvuekuuWIl+S/oeaBrywg6buY6K6k5Li6IFtdICovXHJcbiAgICBASW5wdXQoKSBjb2x1bW5zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIC8qKiDluK7liqnmn6Xor6LmmK/lkKbkuLrov5znq6/mn6Xor6IgKi9cclxuICAgIEBJbnB1dCgpIHJlbW90ZVNlYXJjaCA9IHRydWU7XHJcblxyXG4gICAgLyoqIOaWh+acrOWPmOWMluWQju+8jOi/m+ihjOacjeWKoeWZqOerr+afpeivoiAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoT25TZXJ2ZXIgPSB0cnVlO1xyXG4gICAgLyoqIOS4jei/m+ihjOacjeWKoeWZqOafpeivou+8jOacieWVpeeul+WVpSAqL1xyXG4gICAgQElucHV0KCkgbm9zZWFyY2ggPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWQr+eUqOS7u+aEj+i+k+WFpeWQju+8jOWAvOmAmui/h+i+k+WFpeaXtuinpuWPkVxyXG4gICAgICovXHJcbiAgICBAT3V0cHV0KCkgY2xlYXJNYXBwaW5ncyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFgeiuuOi+k+WFpeeahOWtl+espuacgOWkp+mVv+W6puOAglxyXG4gICAgICog5Lu75oSP6L6T5YWl5pe277yM5q2k5bGe5oCn5pyJ5pWIXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIG1heExlbmd0aDtcclxuXHJcbiAgICBASW5wdXQoKSBtYXBwaW5nRm46IChyb3dEYXRhLCBtYXBGaWVsZHMsIGJpbmRpbmdEYXRhPzogYW55KSA9PiB2b2lkO1xyXG4gICAgLyoqIOaVsOaNruWIl+ihqCAqL1xyXG4gICAgQElucHV0KCkgaXRlbXM6IGFueTtcclxuICAgIC8vIOaUtuiXj+WIl+ihqFxyXG4gICAgQElucHV0KCkgZmF2b3JpdGVJdGVtczogYW55W10gPSBbXTtcclxuICAgIC8qKiDoh6rlrprkuYnmlbDmja4gKi9cclxuICAgIEBJbnB1dCgpIGN1c3RvbURhdGE6IGFueTtcclxuXHJcbiAgICAvKiog57uR5a6a5YC85omA5Zyo55qE5a+56LGhICovXHJcbiAgICBASW5wdXQoKSBiaW5kaW5nRGF0YToge307XHJcblxyXG4gICAgQElucHV0KCkgdHJlZUluZm86IFRyZWVJbmZvO1xyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOe6p+iBlOmAieaLqeaOp+WItumAiemhuSAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlQ2FzY2FkZSA9IGZhbHNlO1xyXG4gICAgLyoqIOe6p+iBlOaOp+WItum7mOiupOWAvO+8miBlbmFibGU6IOWQjOatpemAieaLqSwgdXDvvJrljIXlkKvkuIrnuqcsIGRvd27vvJrljIXlkKvkuIvnuqcsIGRpc2FibGXvvJrku4XpgInmi6noh6rouqsgKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVTdGF0dXM6IFwiZW5hYmxlXCIgfCBcInVwXCIgfCBcImRvd25cIiB8IFwiZGlzYWJsZVwiID0gXCJlbmFibGVcIjtcclxuICAgIC8qKiDliIbliKvnuqfogZTpgInpobnnmoTlkK/nlKjnirbmgIHvvIzpu5jorqTlhajpg6jlkK/nlKggKi9cclxuICAgIEBJbnB1dCgpIGNhc2NhZGVJdGVtcyA9IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdXA6IHRydWUsIFxyXG4gICAgICAgIGRvd246IHRydWUsXHJcbiAgICAgICAgZGlzYWJsZTogdHJ1ZVxyXG4gICAgfVxyXG4gICAgLyoqIOaYvuekuue6p+iBlOaOp+WItiAqL1xyXG4gICAgQElucHV0KCkgc2hvd0Nhc2NhZGVDb250cm9sID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBwbGFjZWhvbGRlciA9IFwiXCI7XHJcblxyXG4gICAgLyoqIOaYvuekuuW3sumAieiusOW9leWIl+ihqOOAgiDpu5jorqTkuLogZmFsc2Ug5LiN5pi+56S6ICovXHJcbiAgICBASW5wdXQoKSBzaG93U2VsZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiog5bqU55So5pS26JeP5aS5ICovXHJcbiAgICBASW5wdXQoKSB1c2VGYXZvcml0ZSA9IGZhbHNlO1xyXG4gICAgLyoqIOaUtuiXj+aVsOaNruadpeiHquS6ju+8miBsb2NhbGU6IOacrOWcsOWtmOWCqO+8jCByZW1vdGU6IOacjeWKoeWZqOerr+WtmOWCqCAqL1xyXG4gICAgQElucHV0KCkgZmF2b3JpdGVEYXRhRnJvbTogXCJsb2NhbGVcIiB8IFwicmVtb3RlXCIgPSBcInJlbW90ZVwiO1xyXG4gICAgLyoqIOS9v+eUqOaPkOekuizlv6vmjbfpgInmi6kgKi9cclxuICAgIEBJbnB1dCgpIHVzZVRpcCA9IGZhbHNlO1xyXG4gICAgLyoqIOiusOW9leeql+WPo+Wkp+WwjyAqL1xyXG4gICAgQElucHV0KCkgaXNSZWNvcmRTaXplID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOW/q+mAn+mAieaLqSAqL1xyXG4gICAgQElucHV0KCkgdXNlcklkOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIOaYr+WQpuWQr+eUqOmAieS4rXZhbHVl5YC85a+55bqU55qE6KGM5pWw5o2u77yM6buY6K6kIHRydWUgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZVRvU2VsZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICBASW5wdXQoKSBlbmFibGVGaW5kVGV4dCA9IGZhbHNlO1xyXG4gICAgLyoqIC0xOiDkuI3lsZXlvIDvvJsgMDog5YWo6YOo5bGV5byA77ybPjA6IOWxleW8gOWIsOaMh+Wumue6p+aVsCAqL1xyXG4gICAgQElucHV0KCkgZXhwYW5kTGV2ZWwgPSAtMTtcclxuXHJcbiAgICBASW5wdXQoKSBuYXZUcmVlVGFibGVPcHRpb25zOiBhbnkgPSB7fTtcclxuICAgIEBJbnB1dCgpIHRyZWVUYWJsZU9wdGlvbnM6IGFueSA9IHt9O1xyXG4gICAgQElucHV0KCkgZGF0YVRhYmxlT3B0aW9uczogYW55ID0ge307XHJcblxyXG5cclxuICAgIGRlZmF1bHRUcmVlVGFibGVPcHRpb25zID0ge1xyXG4gICAgICAgIG1heExldmVsOiA5LFxyXG4gICAgICAgIGVuYWJsZUNvbnRleHRNZW51OiBmYWxzZSxcclxuICAgICAgICBjb250ZXh0TWVudUl0ZW1zOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgLyoqIOagkeW9ouW4ruWKqeaVsOaNruWKoOi9veaWueW8j++8miBkZWZhdWx0OiDlhoXnva7lj5bmlbDvvJsgbG9hZGFsbDog5Yqg6L295omA5pyJIGxheWVybG9hZO+8muWIhuWxguWKoOi9vSAqL1xyXG4gICAgQElucHV0KCkgbG9hZFRyZWVEYXRhVHlwZTogXCJkZWZhdWx0XCIgfCBcImxvYWRhbGxcIiB8IFwibGF5ZXJsb2FkXCIgPSBcImRlZmF1bHRcIjtcclxuXHJcbiAgICAvKiog56qX5Y+j5omT5byA5ZCO56uL5Y2z5Yqg6L295pWw5o2u77yM6buY6K6k5Li6IHRydWUgKi9cclxuICAgIEBJbnB1dCgpIGxvYWREYXRhV2hlbk9wZW4gPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a+86Iiq5YiX6KGo77yM5qCR5YiX6KGo5Zyo5biu5Yqp5omT5byA5ZCO6YCJ5Lit55qE5pWw5o2uO1xyXG4gICAgICog6K6+572u5ZCO77yMYHNlbGVjdEZpcnN0SW5OYXZgIOWkseaViO+8gVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBuYXZTZWxlY3RlZElkcyA9IFwiXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7zoiKrluK7liqnvvIzpgInkuK3nrKwx5p2h5pWw5o2u77yM6buY6K6k5Li6IGZhbHNlO1xyXG4gICAgICog5rOo5oSP77ya5b2TYG5hdlNlbGVjdGVkSWRzYOS4jeS4uuepuuaXtu+8jOatpOWxnuaAp+WkseaViOOAglxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzZWxlY3RGaXJzdEluTmF2ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOaehOmAoOWujOaVtOagkei/h+a7pCAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlRnVsbFRyZWUgPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmmL7npLrmlofmnKzoh6rlrprkuYnlh73mlbAgKi9cclxuICAgIEBJbnB1dCgpIGRpc3BsYXlGb3JtYXR0ZXI6IChcclxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxyXG4gICAgICAgIGRhdGE6IGFueSxcclxuICAgICAgICBpbnN0YW5jZTogYW55XHJcbiAgICApID0+IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIC8qKiDmmL7npLrmlofmnKzlrZfmrrXpm4blkIjvvIzku6Ug6Iux5paHIOmAl+WPt+malOW8gCAqL1xyXG4gICAgQElucHV0KCkgZGlzcGxheUZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBkaXNwbGF5VGV4dFNlcGFyYXRvciA9IFwiX1wiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5biu5Yqp5YWD5pWw5o2uSUTvvIzkuI3kuLrnqbrml7bosIPnlKjmjIflrprnmoRVUklcclxuICAgICAqIC9hcGkvcnVudGltZS9iY2MvdjEuMC9oZWxwL2RhdGEve2hlbHBJZH1cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaGVscElkID0gXCJcIjtcclxuICAgIC8qKiDmlofmnKzlr7npvZDmlrnlvI/vvJsgbGVmdCB8IGNlbnRlciB8IHJpZ2h0OyDpu5jorqQgbGVmdCAqL1xyXG4gICAgQElucHV0KCkgdGV4dEFsaWduID0gXCJsZWZ0XCI7XHJcblxyXG4gICAgLyoqIOm8oOagh+a7kei/h+i+k+WFpeahhuaXtuaYvuekuui+k+WFpeahhuWGheeahOaWh+acrOS/oeaBryAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlVGl0bGUgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgdXNlRXh0ZW5kSW5mbyA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZXh0SW5mb0ZpZWxkcyA9IFwiXCI7XHJcbiAgICBASW5wdXQoKSBleHRJbmZvRm9ybWF0dGVyOiBFeHRJbmZvRm9ybWF0dGVyO1xyXG4gICAgQElucHV0KCkgZXh0ZW5kSW5mbyA9IFwiXCI7XHJcbiAgICAvKiogSURFIOiuvuiuoeWZqOiHquWumuS5ieagvOW8j+WMliAyMTAzICovXHJcbiAgICBASW5wdXQoKSBjdXN0b21Gb3JtYXR0ZXI6IEN1c3RvbURhdGFGb3JtYXR0ZXIgPSBudWxsO1xyXG4gICAgQElucHV0KCkgY3VzdG9tTmF2Rm9ybWF0dGVyOiBDdXN0b21EYXRhRm9ybWF0dGVyID0gbnVsbDtcclxuXHJcbiAgICAvKiog6Ieq5a6a5LmJ56Gu5a6a5LqL5Lu2ICovXHJcbiAgICBASW5wdXQoKSBva0hhbmRsZXIgPSBudWxsO1xyXG4gICAgLyoqIOiHquWumuS5ieWPlua2iOS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgY2FuY2VsSGFuZGxlciA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KCkgdGFnYm94SGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICBASW5wdXQoKSBtYXhUYWdib3hIZWlnaHQ7XHJcblxyXG4gICAgLyoqIOWQr+eUqOiOt+WPluaJgOacieWtkOe6p+aVsOaNrueahOWKn+iDvSzku4XmlK/mjIHliIbnuqfnoIEgKi9cclxuICAgIEBJbnB1dCgpIGVuYWJsZUdldEFsbENoaWxkTm9kZXMgPSB0cnVlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3J0Y3V0S2V5ID0ge1xyXG4gICAgICAgIC8qKiDmiZPlvIDluK7liqnnqpflj6MgKi9cclxuICAgICAgICBvcGVuOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog56Gu6K6k6YCJ5oup5pWw5o2uICovXHJcbiAgICAgICAgY29uZmlybTogXCJFbnRlclwiLFxyXG4gICAgICAgIC8qKiDmkJzntKLmoYbnhKbngrkgKi9cclxuICAgICAgICBzZWFyY2hGb2N1czogXCJGM1wiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIrkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlVXA6IFwiQXJyb3dVcFwiLFxyXG4gICAgICAgIC8qKiDpgInkuK3kuIvkuIDmnaEgKi9cclxuICAgICAgICBtb3ZlRG93bjogXCJBcnJvd0Rvd25cIixcclxuICAgICAgICAvKiog5bGV5byA6IqC54K5ICovXHJcbiAgICAgICAgZXhwYW5kOiBcIkFycm93UmlnaHRcIixcclxuICAgICAgICAvKiog5oqY5Y+g6IqC54K5ICovXHJcbiAgICAgICAgY29sbGFwc2U6IFwiQXJyb3dMZWZ0XCIsXHJcbiAgICAgICAgLyoqIOS4i+S4gOmhtSAqL1xyXG4gICAgICAgIG5leHRQYWdlcjogXCJQYWdlRG93blwiLFxyXG4gICAgICAgIC8qKiDkuIrkuIDpobUgKi9cclxuICAgICAgICBwcmV2UGFnZXI6IFwiUGFnZVVwXCIsXHJcbiAgICB9O1xyXG4gICAgLyoqIOW/q+aNt+mAieaLqeebuOWFs+mFjee9rumhue+8jOm7mOiupOS4uiBudWxsLCDljbPkuI3lkK/nlKjmraTlip/og70gKi9cclxuICAgIEBJbnB1dCgpIHF1aWNrU2VsZWN0OiBRdWlja1NlbGVjdE9wdGlvbiA9IG51bGw7XHJcblxyXG4gICAgLyoqIOagkeW9ouW4ruWKqSDmmK/lkKbkvb/nlKjmoJHlvaLnu5PmnoTmlbDmja7jgILpu5jorqTkuLogdHJ1ZSwg5b2T5Li6IGZhbHNlIOaXtu+8jOacjeWKoeWZqOerr+aXoOmhu+aehOmAoOagkeW9oue7k+aehO+8jOaMieaZrumAmuWIl+ihqOi+k+WHuiAqL1xyXG4gICAgQElucHV0KCkgdHJlZVRvTGlzdCA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgbmF2VHJlZVRvTGlzdCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiDluKblr7zoiKrnmoTluK7liqnkuK3vvIzmmK/lkKbmmL7npLrlt6bkvqflr7zoiKrpg6jliIbjgILpu5jorqQgdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgc2hvd05hdmlnYXRpb24gPSB0cnVlO1xyXG5cclxuICAgIC8qKiDmlbDmja7pgInmi6nlkI7vvIzlgLzmmKDlsITliY3op6blj5FcclxuICAgICAqIOi/lOWbniBPYnNlcnZhYmxlXHJcbiAgICAgKiAgICAgIGNhblNlbGVjdDogPGJvb2xlYW4+ICDmmK/lkKblhYHorrjpgInmi6lcclxuICAgICAqICAgICAgbWVzc2FnZTogPHN0cmluZz4g5LiN5YWB6K646YCJ5oup5pe255qE5o+Q56S65L+h5oGvXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZVNlbGVjdERhdGE6IChwOiB7XHJcbiAgICAgICAgaW5zdGFuY2U6IGFueTtcclxuICAgICAgICBkYXRhOiBhbnk7XHJcbiAgICB9KSA9PiBPYnNlcnZhYmxlPHsgY2FuU2VsZWN0OiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfSB8IGJvb2xlYW4+O1xyXG5cclxuICAgIEBJbnB1dCgpIGJlZm9yZUxvYWREYXRhOiAocDogeyBpbnN0YW5jZTogYW55LCByZXM6IExvb2t1cEdyaWRSZXN1bHQgfSkgPT4gT2JzZXJ2YWJsZTxMb29rdXBHcmlkUmVzdWx0PjtcclxuXHJcbiAgICAvKiog5piv5ZCm5ZCv55So5paw5biD5bGAXHJcbiAgICAgKiAtIOm7mOiupCBmYWxzZSAqL1xyXG4gICAgQElucHV0KCkgdXNlTmV3TGF5b3V0ID0gZmFsc2U7XHJcblxyXG4gICAgLyoqIOWQr+eUqOWkmuWtl+auteafpeivoiDpu5jorqTkuLogZmFsc2VcclxuICAgICAqIC0g5ZCv55So5q2k54m55oCn5ZCO77yMdXNlTmV3TGF5b3V0IOiHquWKqOWQr+eUqFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVNdWx0aUZpZWxkU2VhcmNoID0gZmFsc2U7XHJcbiAgICAvKiog5pCc57Si5bel5YW35p2h5pi+56S65qih5byP77yMIGJvdGg6IOWFqOmDqOaYvuekuu+8m29ubHlmaWVsZDog5LuF5pi+56S65a2X5q6177ybb25seWlucHV0OiDku4XmmL7npLrmkJzntKLovpPlhaXmoYbjgILpu5jorqQgYm90aCAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoQmFyTW9kZTogU2VhcmNoQmFyTW9kZSA9IFNlYXJjaEJhck1vZGUuYm90aDtcclxuICAgIC8qKiDlhYHorrjmn6Xor6LnmoTlrZfmrrXvvIzku4XlkK/nlKjlpJrlrZfmrrXmn6Xor6Lml7bmnInmlYjvvIzlpJrkuKrlrZfmrrXku6Ug4oCcLOKAnSDpmpTlvIDvvJsgIFxyXG4gICAgICogIC0gbmF2IOW3puS+p+WvvOiIquWtl+aute+8m21haW4g5Li75pWw5o2u5a2X5q61O1xyXG4gICAgICogIC0g6buY6K6k5Li6IG51bGwsIOWNs+S7juaJgOacieaYvuekuuWIl+S4reiHquWKqOaPkOWPllxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBhbGxvd1F1ZXJ5RmllbGRzOnsgbmF2Pzogc3RyaW5nLCBtYWluOiBzdHJpbmcgfSA9IG51bGw7XHJcblxyXG4gICAgQElucHV0KCkgbGFiZWxzID0ge1xyXG4gICAgICAgIC8qKiDmlbDmja7liJfooagqL1xyXG4gICAgICAgIGRhdGFUYWI6ICcnLFxyXG4gICAgICAgIC8qKiDmlLbol4/lpLkgKi9cclxuICAgICAgICBmYXZUYWI6JycsXHJcbiAgICAgICAgLyoqIOWPlua2iOW3sumAiSAqL1xyXG4gICAgICAgIGNsZWFyQWxsU2VsZWN0ZWQ6ICcnLFxyXG4gICAgICAgIC8qKiDlt7LpgInorrDlvZXpnaLmnb/kuK0g5Yig6Zmk5bey6YCJICovXHJcbiAgICAgICAgZGVsU2VsZWN0ZWQ6ICcnXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWFgeiuuOS7u+aEj+Wtl+autei/m+ihjOafpeivou+8myDpu5jorqQgdHJ1ZSAqL1xyXG4gICAgQElucHV0KCkgc2VhcmNoQW55RmllbGQgPSB0cnVlO1xyXG5cclxuICAgIEBPdXRwdXQoKSBzZWxlY3RlZERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgY2xlYXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICAvKiog5pyq5ZCv55So5aSa5a2X5q615p+l6K+i5pe26Kem5Y+RICovXHJcbiAgICBAT3V0cHV0KCkgc2VhcmNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOWQr+eUqOWkmuWtl+auteafpeivouaXtuinpuWPkSAqL1xyXG4gICAgQE91dHB1dCgpIHF1ZXJ5ICA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8vIOW4ruWKqeaWh+acrOahhuS4reWAvOWPmOWMluS6i+S7tlxyXG4gICAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSBsb2FkU3VjY2VzcyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgcGFnZXJDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBleHBhbmRUcmVlTm9kZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIEBPdXRwdXQoKSB0ZXh0Q2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2hlY2tlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8e1xyXG4gICAgICAgIGRhdGE6IGFueTtcclxuICAgICAgICBpc0NoZWNrOiBib29sZWFuO1xyXG4gICAgfT4oKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgdGFnUmVtb3ZlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvKiog5YaF5a655Lit55WZ55m96L656LedICovXHJcbiAgICBjb250YWluZXJNYXJnaW4gPSB7IHRvcDogMCwgYm90dG9tOiA1LCBsZWZ0OiAgMTQsIHJpZ2h0OiAxNCB9O1xyXG4gICAgY29udGFpbmVyU3R5bGUgPSB7XHJcbiAgICB9O1xyXG5cclxuICAgIF9ncmlkT3B0aW9uczogTG9va3VwR3JpZE9wdGlvbnMgPSBsb29rdXBHcmlkRGVmYXVsdHM7XHJcblxyXG4gICAgZ2V0IGdyaWRPcHRpb25zKCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy51c2VGYXZvcml0ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgJiZcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgIXRoaXMuY29sdW1ucy5maW5kKChpdGVtKSA9PiBpdGVtLmZpZWxkID09PSBGQVZPUklURV9GSUVMRF9OQU1FKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogRkFWT1JJVEVfRklFTERfTkFNRSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDQwLFxyXG4gICAgICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICBmaXhlZDogJ3JpZ2h0JyxcclxuICAgICAgICAgICAgICAgIC8vIGZpeGVkV2lkdGg6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IHRoaXMuZmF2SGVscGVyLmZhdm9yaXRlQ29sdW1uRm9ybWF0dGVyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuX2dyaWRPcHRpb25zLCB7XHJcbiAgICAgICAgICAgIHNpbmdsZVNlbGVjdDogdGhpcy5zaW5nbGVTZWxlY3QsXHJcbiAgICAgICAgICAgIGlkRmllbGQ6IHRoaXMuaWRGaWVsZCxcclxuICAgICAgICAgICAgdXJpOiB0aGlzLnVyaSxcclxuICAgICAgICAgICAgc2hvd0ZpbHRlckJhcjogIHRoaXMuZW5hYmxlTXVsdGlGaWVsZFNlYXJjaD8gZmFsc2U6IHRoaXMuc2hvd0ZpbHRlckJhcixcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjogdGhpcy5wYWdpbmF0aW9uLFxyXG4gICAgICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSxcclxuICAgICAgICAgICAgcGFnZUxpc3Q6IHRoaXMucGFnZUxpc3QsXHJcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLnRvdGFsLFxyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pdGVtcyxcclxuICAgICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zLFxyXG4gICAgICAgICAgICByZXNpemFibGVDb2x1bW5zOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXhlZEhlYWRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgaG92ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHRyZWVJbmZvOiB0aGlzLnRyZWVJbmZvLFxyXG4gICAgICAgICAgICBzZWFyY2hBbnlGaWVsZDogdGhpcy5zZWFyY2hBbnlGaWVsZFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBzZXQgZ3JpZE9wdGlvbnMob3B0cykge1xyXG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZ3JpZE9wdGlvbnMsIG9wdHMpO1xyXG4gICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRDb2x1bW5zID0gdGhpcy5tdWx0aVNlbE1nci5pbml0U2VsZWN0ZWRDb2x1bW5zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQFZpZXdDaGlsZChcImNvbnRlbnRDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjb250ZW50Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xyXG4gICAgQFZpZXdDaGlsZChcImZhdm9yaXRlc0NvbnRhaW5lclwiLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSlcclxuICAgIGZhdm9yaXRlc0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJsZWZ0Q29udGFpbmVyXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxyXG4gICAgbGVmdENvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuICAgIEBWaWV3Q2hpbGQoXCJjZW50ZXJDb250YWluZXJcIiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0pXHJcbiAgICBjZW50ZXJDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICBAVmlld0NoaWxkKFwibXVsdGlTZWxlY3REVFwiKSBzZWxlY3RlZER0UmVmOiBEYXRhVGFibGVDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKFwiaW5wdXRncm91cFwiKSBpbnB1dEdyb3VwOiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcImxlZnRQYW5lbFwiKSBsZWZ0UGFuZWw6IExheW91dFBhbmVsQ29tcG9uZW50O1xyXG4gICAgQFZpZXdDaGlsZChcInRhZ2JveFwiKSB0YWdib3g6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgQFZpZXdDaGlsZChcIm9rYnRuXCIpIG9rQnV0dG9uOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZChcInRhZ0lucHV0XCIpIHRhZ0lucHV0OiBJbnB1dEdyb3VwQ29tcG9uZW50O1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ3NlbGVjdGVkcGFuZWwnKSBzZWxlY3RlZHBhbmVsOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnY2FzY2FkZVNlbGVjdCcpIGNhc2NhZGVTZWxlY3Q6IFNpbmdsZVNlbGVjdERpcmVjdGl2ZTtcclxuICAgIEBWaWV3Q2hpbGQoJ2xheW91dCcpIGxheW91dFJlZjogTGF5b3V0Q29tcG9uZW50O1xyXG5cclxuICAgIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT47XHJcbiAgICBsZWZ0Q29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8TG9va3VwTGVmdENvbXBvbmVudD47XHJcbiAgICBmYXZvcml0ZXNDb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxhbnk+O1xyXG5cclxuICAgIHB1YmxpYyBodHRwOiBJTG9va3VwSHR0cFNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbWVzc2FnZXJTZXJ2aWNlOiBNZXNzYWdlclNlcnZpY2U7XHJcbiAgICBwdWJsaWMgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlO1xyXG4gICAgbG9hZGluZzogTG9hZGluZ0NvbXBvbmVudDtcclxuICAgIC8vIGRhdGFGaWVsZE1hcHM6IGFueTtcclxuICAgIG5hdmlnYXRpb25PcHRpb25zOiBOYXZpZ2F0aW9uT3B0aW9ucztcclxuXHJcbiAgICAvLyDlr7zoiKrluK7liqnlt6bliJnlrr3luqZcclxuICAgIGxlZnRQYW5lbFdpZHRoID0gMzIwO1xyXG4gICAgLy8g5a+86Iiq5biu5Yqp56qX5Y+j5pyA5bCP5a695bqmXHJcbiAgICBuYXZMb29rdXBEaWFsb2dNaW5XaWR0aCA9IDk2MDtcclxuXHJcbiAgICBuYXZpZ2F0aW9uRmlsdGVyOiBOYXZpZ2F0aW9uRmlsdGVyID0gbnVsbDtcclxuXHJcbiAgICBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xyXG4gICAgZGlhbG9nT3BlbmVkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBkaWFsb2dDbG9zZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBpc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgIGlzVGFiQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgIGRpc3BsYXlJbmZvOiBEaXNwbGF5SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGRpc3BsYXlJbmZvRGVmYXVsdCk7XHJcblxyXG4gICAgdGFiQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIC8vIOaaguWtmOihjOeCueWHu+aVsOaNriAg55So5LqO5pS26JePXHJcbiAgICBwZXJzb25hbENvbmY6IFBlcnNvbmFsQ29uZmlnID0ge307XHJcbiAgICBmYXZvcml0ZUNvbHVtbnM6IGFueVtdID0gW107XHJcbiAgICAvKiog5Li05pe25p+l6K+i5Y+C5pWwICovXHJcbiAgICBfc2VhcmNoU3RhdGUgPSBudWxsO1xyXG4gICAgYWxsRGF0YTogYW55ID0gW107XHJcbiAgICBnZXQgc2VsZWN0aW9ucygpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmdldFNlbGVjdGlvbnMoKTtcclxuICAgICAgICBpZiAodGhpcy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdEl0ZW1zWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RJdGVtcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlUGVyc2lvbmFsQ29uZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51c2VGYXZvcml0ZSB8fCB0aGlzLnVzZVRpcCB8fCB0aGlzLmlzUmVjb3JkU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGlzcGxheVRleHRMaXN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlUZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlUZXh0LnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcnNvbmFsQ29uZmlnU2VydmljZTogUGVyc29uYWxDb25maWdTZXJ2aWNlO1xyXG4gICAgcHVibGljIHV0aWxTZXJ2aWNlOiBVdGlsU2VydmljZTtcclxuICAgIHB1YmxpYyB0cmVlTm9kZUhlbHBlcjogVHJlZU5vZGVIZWxwZXI7XHJcbiAgICBwdWJsaWMgbG9jYWxTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlO1xyXG4gICAgcHVibGljIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2U7XHJcbiAgICBhbGxDb2x1bW5zVGl0bGUgPSBcIuaJgOacieWIl1wiO1xyXG4gICAgbXVzdFdyaXRlU29tZXRoaW5nID0gXCLor7fovpPlhaXlhbPplK7lrZflkI7mn6Xor6LjgIJcIjtcclxuICAgIG11c3RDaG9vc0FkYXRhcm93ID0gXCLor7fpgInmi6nkuIDmnaHorrDlvZXvvIFcIjtcclxuICAgIGFkZEZhdm9yaXRlU3VjY2VzcyA9IFwi5pS26JeP5oiQ5Yqf44CCXCI7XHJcbiAgICBkZWxGYXZvcml0ZVN1Y2Nlc3MgPSBcIuenu+mZpOaUtuiXj+aIkOWKn+OAglwiO1xyXG5cclxuICAgIC8qKiDkvb/nlKjlhoXnva7nmoTmn6Xor6Lmlrnms5UsIOm7mOiupCBmYWxzZSAqL1xyXG4gICAgdXNlSW5zaWRlU2VhcmNoSGFuZGxlciA9IGZhbHNlO1xyXG4gICAgc2VhcmNoaW5nID0gZmFsc2U7XHJcbiAgICAvKiog5Li05pe25a2Y5YKo5p+l6K+i57uT5p6c6ZuGICovXHJcbiAgICBfc2VhcmNoUmVzdWx0ID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xyXG5cclxuICAgIC8qKiDlpJrpgInml7bvvIzpgInkuK3nmoTmlbDmja4gKi9cclxuICAgIGN1cnJlbnRTZWxlY3RlZEl0ZW1zOiBPYnNlcnZhYmxlPGFueT4gPSBvZihbXSk7XHJcbiAgICAvKiog5bey6YCJ5pWw5o2u5YiX5L+h5oGvICovXHJcbiAgICBzZWxlY3RlZENvbHVtbnMgPSBbXTtcclxuICAgIGFjdGl2ZVRhYjogc3RyaW5nIHwgXCJkYXRhbGlzdFwiIHwgXCJmYXZvcml0ZVwiIHwgXCJzZWxlY3RlZFwiID0gXCJkYXRhbGlzdFwiO1xyXG5cclxuICAgIGZhdkhlbHBlcjogRmF2b3JpdGVIZWxwZXIgPSBudWxsO1xyXG4gICAgdHRFdmVudE1ncjogVHJlZVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIG11bHRpU2VsTWdyOiBNdWx0aVNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgaHR0cE1ncjogTG9va3VwSHR0cE1hbmFnZXIgPSBudWxsO1xyXG4gICAgbG9va3VwQ21wTWdyOiBMb29rdXBDb21wb25lbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgIGRpYWxvZ01ncjogTG9va3VwRGlhbG9nTWFuYWdlciA9IG51bGw7XHJcbiAgICBzZWxlY3Rpb25NZ3I6IFNlbGVjdGlvbk1hbmFnZXIgPSBudWxsO1xyXG4gICAgZHRFdmVudE1ncjogRGF0YVRhYmxlRXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICBsb29rdXBTZWxlY3Rpb25TZXI6IExvb2t1cFNlbGVjdGlvblNlcnZpY2UgPSBudWxsO1xyXG5cclxuICAgIGNvbnRyb2xJZCA9IFwiXCI7XHJcbiAgICBzYXZpbmdGYW9yaXRlRGF0YSA9IGZhbHNlO1xyXG4gICAgaXNSZWFkeSA9IGZhbHNlO1xyXG4gICAgc2hvd1RhZ2JveENsZWFyQnV0dG9uID0gZmFsc2U7XHJcbiAgICBoYXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgIGNhc2NhZGVTdGF0dXNJdGVtcyA9IFtcclxuICAgICAgICB7IHZhbGV1OiAnZW5hYmxlJywgbGFiZWw6ICcnIH0sXHJcbiAgICAgICAgeyB2YWxldTogJ3VwJywgbGFiZWw6ICcnIH0sXHJcbiAgICAgICAgeyB2YWxldTogJ2Rvd24nLCBsYWJlbDogJycgfSxcclxuICAgICAgICB7IHZhbGV1OiAnZGlzYWJsZScsIGxhYmVsOiAnJyB9XHJcbiAgICBdXHJcblxyXG4gICAgaXNHZXRBbGxDaGlkbE5vZGVzID0gZmFsc2U7XHJcbiAgICBldmVudE1hbmFnZXI6IEV2ZW50TWFuYWdlcjtcclxuICAgIC8qKiDpgInkuK3orrDlvZVJRO+8jOiHquWumuS5ieW4ruWKqeWPluaVsOaXtuS9v+eUqCAqL1xyXG4gICAgc2VsZWN0ZWRJZHMgPSBbXTtcclxuICAgIHByaXZhdGUgbG9va3VwU2VhcmNoSW5wdXRFdmVudCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGZhcnJpc0luc3RhbmNlczogRmFycmlzQ29tcG9uZW50SW5zdGFuY2VTZXJ2aWNlID0gbnVsbDtcclxuICAgIC8qKiDnlKjmiLfliJ3lp4vorr7nva4gKi9cclxuICAgIHByaXZhdGUgX3VzZXJTZXR0aW5nczogYW55ID0ge307XHJcblxyXG4gICAgZ2V0IHVzZXJJbml0aWFsQ29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyU2V0dGluZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgX3RyZWVJbmZvXyA9IG51bGw7XHJcblxyXG4gICAgLyoqIGRpYWxvZyDlhoXlrrnljLrln5/pq5jluqbjgIIg5by556qX5oC76auY5bqmIC0g5aS06YOo6auY5bqmIC0g6ISa6YOo6auY5bqmIC0g77yI5ZCv55So5pS26JePIFRBQuWktOmrmOW6pu+8iSAqL1xyXG4gICAgZGlhbG9nQ29udGVudEhlaWdodCA9IDA7XHJcbiAgICAvKiog5bem5qCR5Y+z5YiX6KGo77yMIOW3puagkeeCueWHu+iKgueCueafpeivouaXtuaYr+WQpuWMheaLrOS4i+e6p+iKgueCueeahOaVsOaNru+8jOm7mOiupCBmYWxzZSAqL1xyXG4gICAgaW5jbHVkZVN1Ym9yZGluYXRlcyA9IGZhbHNlO1xyXG4gICAgaW5jbHVkZVN1Ym9yZGluYXRlcyQgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgaW5jbHVkZVN1Ym9yZGluYXRlcyQkOiBTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgb3ZlckxheVNlcnZpY2U6IE92ZXJMYXlIaWRkZW5TZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBkZWJ1Z1NlcjogRGVidWdTZXJ2aWNlID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICAgICAgcHVibGljIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHB1YmxpYyBlbDogRWxlbWVudFJlZixcclxuICAgICAgICBwdWJsaWMgdXRpbHM6IENvbW1vblV0aWxzLFxyXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdE1hcHBpbmc6IExvb2t1cERlZmF1bHRNYXBwaW5nLFxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHVibGljIHNob3J0Y3V0czogU2hvcnRjdXRzU2VydmljZSxcclxuICAgICAgICBwdWJsaWMgbG9va3VwVXRpbHM6IExvb2t1cFV0aWxzLFxyXG4gICAgICAgIHByaXZhdGUgem9uZTogTmdab25lLFxyXG4gICAgICAgIHB1YmxpYyByZW5kZXIyOiBSZW5kZXJlcjJcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKGluamVjdG9yLCBlbCwgY2hhbmdlRGV0ZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3RlZEl0ZW1zID0gdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIuc2VsZWN0ZWQkO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5pbmplY3Rvci5nZXQoRXZlbnRNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcyA9IHRoaXMuaW5qZWN0b3IuZ2V0KFxyXG4gICAgICAgICAgICBGYXJyaXNDb21wb25lbnRJbnN0YW5jZVNlcnZpY2UsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLm92ZXJMYXlTZXJ2aWNlID0gbmV3IE92ZXJMYXlIaWRkZW5TZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVidWdTZXIgPSB0aGlzLmluamVjdG9yLmdldChEZWJ1Z1NlcnZpY2UsIG51bGwpO1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVnU2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdTZXIudXNlRGVidWdNb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5zZWxlY3Rpb25DaGFuZ2VkJC5zdWJzY3JpYmUoKGU6IHtkYXRhOiBBcnJheTxhbnk+LCBzZWxlY3RlZDogYm9vbGVhbn0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREdFJlZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZER0UmVmLnVuQ2hlY2tSb3dzKGUuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0TGFiZWxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0TGFiZWxzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sYWJlbHMpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAvKiog5pWw5o2u5YiX6KGoKi9cclxuICAgICAgICAgICAgICAgIGRhdGFUYWI6ICcnLFxyXG4gICAgICAgICAgICAgICAgLyoqIOaUtuiXj+WkuSAqL1xyXG4gICAgICAgICAgICAgICAgZmF2VGFiOicnLFxyXG4gICAgICAgICAgICAgICAgLyoqIOWPlua2iOW3sumAiSAqL1xyXG4gICAgICAgICAgICAgICAgY2xlYXJBbGxTZWxlY3RlZDogJycsXHJcbiAgICAgICAgICAgICAgICAvKiog5bey6YCJ6K6w5b2V6Z2i5p2/5LitIOWIoOmZpOW3sumAiSAqL1xyXG4gICAgICAgICAgICAgICAgZGVsU2VsZWN0ZWQ6ICcnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxhYmVscy5jbGVhckFsbFNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxzLmNsZWFyQWxsU2VsZWN0ZWQgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZSgnbG9va3VwLnNlbGVjdGVkSW5mby5jbGVhcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxhYmVscy5mYXZUYWIpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbHMuZmF2VGFiID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cC5mYXZvcml0ZXMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5sYWJlbHMuZGF0YVRhYikge1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVscy5kYXRhVGFiID0gdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoJ2xvb2t1cC5kYXRhbGlzdCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3cml0ZUNvbnNvbGUobXNnLCB0eXBlOiAnaW5mbyd8J2xvZyd8J3dhcm4nfCdlcnJvcicgPSAnd2FybicpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1Nlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnU2VyW3R5cGVdKG1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEZpbHRlckJhckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc2hvd0ZpbHRlckJhciAmJiB0aGlzLmVuYWJsZU11bHRpRmllbGRTZWFyY2ggPyA0MiA6IDApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwYWNlV2lkdGgoaXNEb3VibGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZW5hYmxlTXVsdGlGaWVsZFNlYXJjaCA/IDI4IDogNDgpICsgKGlzRG91YmxlID8gKCB0aGlzLmVuYWJsZU11bHRpRmllbGRTZWFyY2g/IDU6IDcpIDogMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWNoZVVzZXJDb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl90aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgdGhpcy5fdXNlclNldHRpbmdzLl9jb2x1bW5zID0gdGhpcy5kZWVwQ2xvbmUodGhpcy5jb2x1bW5zIHx8IFtdKTtcclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MuZ2V0Q29sdW1ucyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJTZXR0aW5ncy5fY29sdW1ucztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl91c2VyU2V0dGluZ3MucmVzZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGUgPSB0aGlzLl91c2VyU2V0dGluZ3MuX3RpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvLnRpdGxlID0gdGhpcy50aXRsZTtcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5fdXNlclNldHRpbmdzLmdldENvbHVtbnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVlcENsb25lKG9iaikge1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcclxuICAgICAgICBPYmplY3Qua2V5cyhjbG9uZSkuZm9yRWFjaChcclxuICAgICAgICAgICAgKGtleSkgPT5cclxuICAgICAgICAgICAgICAgIChjbG9uZVtrZXldID1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqW2tleV0gPT09IFwib2JqZWN0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmRlZXBDbG9uZShvYmpba2V5XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvYmpba2V5XSlcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgICAgICAgICAgY2xvbmUubGVuZ3RoID0gb2JqLmxlbmd0aDtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY2xvbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgc3VwZXIubmdPbkluaXQoKTtcclxuICAgICAgICB0aGlzLmNhY2hlVXNlckNvbmZpZygpO1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkVHJlZURhdGFUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja0dyaWRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgLyoqIOS8oOmAkuS4iuS4i+aWhyAqL1xyXG4gICAgICAgIGlmICh0aGlzLmh0dHApIHtcclxuICAgICAgICAgICAgdGhpcy5odHRwLmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFsbENvbHVtbnNUaXRsZSA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKFwibG9va3VwLmFsbENvbHVtbnNcIik7XHJcbiAgICAgICAgdGhpcy5tdXN0V3JpdGVTb21ldGhpbmcgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdFdyaXRlU29tZXRoaW5nXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMubXVzdENob29zQWRhdGFyb3cgPSB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcclxuICAgICAgICAgICAgXCJsb29rdXAubXVzdENob29zQWRhdGFyb3dcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5hZGRGYXZvcml0ZVN1Y2Nlc3MgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5mYXZvcml0ZUluZm8uYWRkRmF2XCIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRmF2b3JpdGVTdWNjZXNzO1xyXG4gICAgICAgIHRoaXMuZGVsRmF2b3JpdGVTdWNjZXNzID1cclxuICAgICAgICAgICAgdGhpcy5sb2NhbFNlcnZpY2UuZ2V0VmFsdWUoXCJsb29rdXAuZmF2b3JpdGVJbmZvLmNhbmNlbEZhdlwiKSB8fFxyXG4gICAgICAgICAgICB0aGlzLmRlbEZhdm9yaXRlU3VjY2VzcztcclxuXHJcbiAgICAgICAgdGhpcy5kaWFsb2dNZ3Iub25EaWFsb2dDcmVhdGVkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyZWVJbmZvXyA9IHRoaXMudHJlZUluZm8gPyBjbG9uZURlZXAodGhpcy50cmVlSW5mbykgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5xdWlja1NlbGVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1aWNrU2VsZWN0ID0gT2JqZWN0LmFzc2lnbih7fSwgUXVpY2tTZWxlY3REZWZhdWx0T3B0aW9ucywgdGhpcy5xdWlja1NlbGVjdCB8fCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Q29udGFpbmVyTWFyZ2luKCk7XHJcbiAgICB9XHJcbiAgICAvKiog5YaF5a655Lit55WZ55m96L656LedICovXHJcbiAgICBzZXRDb250YWluZXJNYXJnaW4oKSB7XHJcbiAgICAgICAgY29uc3QgbXJuID0gIXRoaXMuZW5hYmxlTXVsdGlGaWVsZFNlYXJjaCA/IDE0IDogMjQ7XHJcbiAgICAgICAgY29uc3QgbWIgPSAgIXRoaXMuZW5hYmxlTXVsdGlGaWVsZFNlYXJjaCA/IDUgOiAwO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luID0geyB0b3A6IDAsIGJvdHRvbTogbWIsIGxlZnQ6IG1ybiwgcmlnaHQ6IG1ybiB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZU11bHRpRmllbGRTZWFyY2gpIHtcclxuICAgICAgICAgICAgdGhpcy51c2VOZXdMYXlvdXQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZSA9IHtcclxuICAgICAgICAgICAgbWFyZ2luTGVmdDogdGhpcy5jb250YWluZXJNYXJnaW4ubGVmdCArIFwicHhcIixcclxuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0ICsgXCJweFwiLFxyXG4gICAgICAgICAgICBtYXJnaW5Ub3A6IHRoaXMuY29udGFpbmVyTWFyZ2luLnRvcCArIFwicHhcIixcclxuICAgICAgICAgICAgbWFyZ2luQm90dG9tOiB0aGlzLmNvbnRhaW5lck1hcmdpbi5ib3R0b20gKyBcInB4XCIsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuKSB7XHJcbiAgICAgICAgICAgICAgICBuLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICBuID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25NZ3IpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25NZ3IuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZhcnJpc0luc3RhbmNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcy5kZXN0cm95KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5sb29rdXBTZWFyY2hJbnB1dEV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwU2VhcmNoSW5wdXRFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvb2t1cFV0aWxzLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZS5kZXN0b3J5KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5vdmVyTGF5U2VydmljZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmNvbHVtbnMgJiYgIWNoYW5nZXMuY29sdW1ucy5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVVzZXJDb25maWcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLmVuYWJsZU11bHRpRmllbGRTZWFyY2ggJiYgIWNoYW5nZXMuZW5hYmxlTXVsdGlGaWVsZFNlYXJjaC5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDb250YWluZXJNYXJnaW4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMucXVpY2tTZWxlY3QgfHwgIXRoaXMucXVpY2tTZWxlY3QuZW5hYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwU2VhcmNoSW5wdXRFdmVudCA9IG9uVGV4dENoYW5nZWQuYmluZCh0aGlzKSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW5Liq5oCn5YyW6YWN572uXHJcbiAgICAgICAgaWYgKHRoaXMudXNlUGVyc2lvbmFsQ29uZikge1xyXG4gICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5pbml0UGVyc29uYWxJbmZvKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VFeHRlbmRJbmZvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0QmluZGluZ0RhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRlbmRJbmZvKGpzb25EYXRhLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gXCJ0ZXh0XCIpIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5zaG9ydGN1dHMuYWRkKHtcclxuICAgICAgICAgICAgLy8gICAgIGtleTogJ0YyJyxcclxuICAgICAgICAgICAgLy8gICAgIHRhcmdldDogdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudCxcclxuICAgICAgICAgICAgLy8gICAgIGNvbW1hbmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnNob3dEaWFsb2coKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyMi5saXN0ZW4oXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0R3JvdXAudGV4dGJveC5uYXRpdmVFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgXCJrZXlkb3duLkYyXCIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEaWFsb2cuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJNb3VzZUV2ZW50Rm9yVGFnVmlldygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudGFnYm94SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdib3gubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm11bHRpLW1vcmVcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGJoID0gdGhpcy50YWdib3hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGJoICE9PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRiaCArPSBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFRhZ2JveEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcjIuc2V0U3R5bGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4SGVpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm1heFRhZ2JveEhlaWdodH1weGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIyLnNldFN0eWxlKGVsLCBcImhlaWdodFwiLCB0YmgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5lbCAmJiB0aGlzLmZhcnJpc0luc3RhbmNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmZhcnJpc0luc3RhbmNlcy5hZGQodGhpcy5lbC5uYXRpdmVFbGVtZW50LCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmh0dHAgPSB0aGlzLmluamVjdG9yLmdldChTZXJ2ZXJTaWRlVG9rZW4sIG51bGwpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9hZGluZ1NlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMubm90aWZ5U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5vdGlmeVNlcnZpY2UsIG51bGwpO1xyXG5cclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KFxyXG4gICAgICAgICAgICBQZXJzb25hbENvbmZpZ1NlcnZpY2UsXHJcbiAgICAgICAgICAgIG51bGxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlciA9IG5ldyBMb29rdXBTZWxlY3Rpb25TZXJ2aWNlKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnV0aWxTZXJ2aWNlID0gbmV3IFV0aWxTZXJ2aWNlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy50cmVlTm9kZUhlbHBlciA9IG5ldyBUcmVlTm9kZUhlbHBlcih0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5mYXZIZWxwZXIgPSBuZXcgRmF2b3JpdGVIZWxwZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy50dEV2ZW50TWdyID0gbmV3IFRyZWVUYWJsZUV2ZW50TWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLm11bHRpU2VsTWdyID0gbmV3IE11bHRpU2VsZWN0aW9uTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmh0dHBNZ3IgPSBuZXcgTG9va3VwSHR0cE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IgPSBuZXcgTG9va3VwQ29tcG9uZW50TWFuYWdlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmRpYWxvZ01nciA9IG5ldyBMb29rdXBEaWFsb2dNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyID0gbmV3IFNlbGVjdGlvbk1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kdEV2ZW50TWdyID0gbmV3IERhdGFUYWJsZUV2ZW50TWFuYWdlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93RGlhbG9nKCk6IGFueSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5yZWFkb25seSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGlvbk1nci5pbml0RGlzcGxheVZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5kaWN0UGlja2luZ1N1YnNjcmlwdGlvbiA9IHRoaXMuZGljdFBpY2tpbmcoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpcyxcclxuICAgICAgICB9KS5zdWJzY3JpYmUoKHByOiBQaWNraW5nUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nTWdyLmNhbk9wZW5EaWFsb2cocHIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOWIpOaWreaYr+WQpuS4uuWPjOWIl+ihqOW4ruWKqSAqL1xyXG4gICAgaXNEb3VibGxlTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICggdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3QgfHxcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0IHx8XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVR5cGUgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZMaXN0VHJlZSkgJiYgdGhpcy5zaG93TmF2aWdhdGlvblxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICAvKiog5Yik5pat5piv5ZCm5pi+56S65Li65qCR5biu5YqpICovXHJcbiAgICBpc1RyZWUoKSB7XHJcbiAgICAgICAgY29uc3QgZHR5cCA9IHRoaXMuZGlzcGxheVR5cGUudG9VcHBlckNhc2UoKVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIGR0eXAgPT09IExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdCB8fCBkdHlwID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdFRyZWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplZChlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChlLnNpemUpO1xyXG4gICAgICAgIHRoaXMucmVzaXplZC5lbWl0KGUuc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemluZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXppbmcuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDbXAocG9zLnNpemUpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiB0aGlzLmxlZnRDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZSh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5sZWZ0UGFuZWwud2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGlhbG9nTWdyLmdldEhlaWdodCgpLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25NYXhEaWFsb2cocG9zOiBJUmVzaXplRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNtcChwb3Muc2l6ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdFBhbmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdENvbXBvbmVudFJlZi5pbnN0YW5jZS5yZXNpemUoe1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubGVmdFBhbmVsLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRpYWxvZ01nci5nZXRIZWlnaHQoKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRmcyA1NDMxMzIgXHJcbiAgICAgICAgLy8gdGhpcy5kaWFsb2dIZWlnaHQgPSBwb3Muc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dDb250ZW50SGVpZ2h0ID0gdGhpcy5kaWFsb2dNZ3IucmVzZXREaWFsb2dDb250ZW50SGVpZ2h0KCk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dNYXhlZC5lbWl0KHBvcy5zaXplKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVDbXAoc2l6ZT86IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5jb21wb25lbnRSZWYgfHwgIXRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2l6ZSkge1xyXG4gICAgICAgICAgICBzaXplID0gdGhpcy5kaWFsb2cuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgX3NpemUgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOlxyXG4gICAgICAgICAgICAgICAgc2l6ZS53aWR0aCAtXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck1hcmdpbi5sZWZ0IC1cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyTWFyZ2luLnJpZ2h0LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZiAmJiB0aGlzLmFjdGl2ZVRhYiA9PSAnZmF2b3JpdGUnKSB7XHJcbiAgICAgICAgICAgIF9zaXplLmhlaWdodCA9IHRoaXMubG9va3VwQ21wTWdyLmdldENtcEhlaWdodCh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnRSZWYuaW5zdGFuY2UucmVzaXplKF9zaXplKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfc2l6ZS5oZWlnaHQgPSB0aGlzLmxvb2t1cENtcE1nci5nZXRDbXBIZWlnaHQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICBfc2l6ZS53aWR0aCA9IHNpemUud2lkdGggLSB0aGlzLmxlZnRQYW5lbC53aWR0aCAtIHRoaXMuZ2V0U3BhY2VXaWR0aCh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnJlc2l6ZShfc2l6ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1JlY29yZFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmYuc2l6ZSA9IHRoaXMuZGlhbG9nLnNpemU7XHJcbiAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVBlcnNvbmFsQ29uZmlnKHtcclxuICAgICAgICAgICAgICAgIHNpemU6IHRoaXMuZGlhbG9nLnNpemUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb3VibGxlTGlzdCgpICYmIHRoaXMubGF5b3V0UmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5b3V0UmVmLnNldFBhbmVsTWF4U2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoZWNrR3JpZE9wdGlvbnMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmdyaWRPcHRpb25zLmlkRmllbGQpIHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoXCLmnKrorr7nva7kuLvplK7lrZfmrrUgaWRGaWVsZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVTZWxlY3REYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2VsZWN0RGF0YSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvZih0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGN0eE1lbnVMYW5ndWFnZXMgPVxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU2VydmljZS5nZXRWYWx1ZShcImxvb2t1cC5jb250ZXh0TWVudVwiKTtcclxuXHJcbiAgICAgICAgdGhpcy50cmVlVGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgICAgeyBsYW5ndWFnZTogY3R4TWVudUxhbmd1YWdlcyB9LFxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRUcmVlVGFibGVPcHRpb25zLFxyXG4gICAgICAgICAgICB0aGlzLnRyZWVUYWJsZU9wdGlvbnMgfHwge31cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbXBvbmVudFR5cGUoKTogVHlwZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VHlwZSA9IFwiTElTVFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5UcmVlTGlzdDpcclxuICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdFRyZWU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZyhtc2cgPSBcIlwiKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nICYmIHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCAmJiAhdGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuZGlhbG9nLm1vZGFsQ29udGVudCxcclxuICAgICAgICAgICAgICAgIGRlbGF5OiAyMDAsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRzW1wibWVzc2FnZVwiXSA9IG1zZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbG9zZUxvYWRpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWFyY2hDb2x1bW5zKHJlc2RhdGE6IGFueSk6IHtsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nfVtdIHtcclxuICAgICAgICBjb25zdCBjb2xzID0gcmVzZGF0YS5jb2x1bW5zIHx8IHRoaXMuY29sdW1ucztcclxuICAgICAgICBpZiAocmVzZGF0YS5zZWFyY2hGaWVsZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc2RhdGEuc2VhcmNoRmllbGRzLm1hcCgoc2YpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2xzLmZpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvbCkgPT4gY29sLmZpZWxkLnRvTG93ZXJDYXNlKCkgPT09IHNmLnZhbHVlLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNmLmxhYmVsID0gYy50aXRsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBzZjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb2xzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb2xzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChjKSA9PiBjLnNlYXJjaEZpZWxkKVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNvbC50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbC5maWVsZCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRPcHRpb25zKHJlc0RhdGE6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBsZXQgb2JzZXIgPSBvZih0cnVlKTtcclxuICAgICAgICB0aGlzLmdyaWRPcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyhyZXNEYXRhKTtcclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpznu4Tku7bkuK3mnKrorr7nva7mmL7npLrliJfvvIzliJnkvb/nlKjmnI3liqHlmajnq6/ov5Tlm57nmoTorr7nva7vvJsg5ZCm5YiZ5bCG5L2/55So57uE5Lu25Lit6YWN572u55qE5bGV56S65YiXXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSAmJlxyXG4gICAgICAgICAgICAgICAgcmVzRGF0YS5jb2x1bW5zICYmXHJcbiAgICAgICAgICAgICAgICByZXNEYXRhLmNvbHVtbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gcmVzRGF0YS5jb2x1bW5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRDb2x1bW5XaWR0aCh0aGlzLmNvbHVtbnMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRMb29rdXBUaXRsZVRleHQocmVzRGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRG91YmxsZUxpc3QoKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA8IHRoaXMubmF2TG9va3VwRGlhbG9nTWluV2lkdGggJiZcclxuICAgICAgICAgICAgICAgICF0aGlzLmlzUmVjb3JkU2l6ZVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSB0aGlzLm5hdkxvb2t1cERpYWxvZ01pbldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cucmVTaXplKHsgd2lkdGg6IHRoaXMuZGlhbG9nV2lkdGggfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXN0b21EaXNwbGF5VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kaXNwbGF5VHlwZSA9IHJlc0RhdGEuZGlzcGxheVR5cGUgfHwgdGhpcy5kaXNwbGF5VHlwZSB8fCAnTElTVCc7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy50cmVlVG9MaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5kaXNwbGF5VHlwZSA9IHRoaXMuaXNEb3VibGxlTGlzdCgpID8gJyBOQVZMSVNUICc6ICdMSVNUJztcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlQ29tcG9uZW50V2l0aFNlcnZlckRhdGEocmVzRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgcmVzRGF0YS5uYXZpZ2F0aW9uICYmICF0aGlzLmxlZnRDb21wb25lbnRSZWYpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMgPSByZXNEYXRhLm5hdmlnYXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLmhvdmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMuc2VhcmNoRmllbGRzID0gdGhpcy5nZXRTZWFyY2hDb2x1bW5zKHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0Q29sdW1uV2lkdGgodGhpcy5uYXZpZ2F0aW9uT3B0aW9ucy5jb2x1bW5zLCAnbmF2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNvbHVtbnMgZm9ybWF0dGVyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLmNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbU5hdkZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wuZm9ybWF0dGVyID0gdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXJbY29sLmZpZWxkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zW1wicm93U3R5bGVyXCJdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnNbXCJjZWxsU3R5bGVyXCJdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21OYXZGb3JtYXR0ZXIuY2VsbFN0eWxlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIDIwMjEwOTI2IOagkeWvvOiIquW4ruWKqeS4rSDlt6bkvqfmoJHmlK/mjIHliIblsYLliqDovb1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgX25hdl90cmVlaW5mb19sb2FkdHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvbk9wdGlvbnMudHJlZUluZm8ubG9hZERhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgIT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uYXZfdHJlZWluZm9fbG9hZHR5cGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImxvYWRhbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJhbGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJhc3luY1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zLnRyZWVJbmZvLmxvYWREYXRhVHlwZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uYXZfdHJlZWluZm9fbG9hZHR5cGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb2JzZXIgPSB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVMZWZ0Q29tcG9uZW50KHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlQ29udGVudCh0aGlzLmdyaWRPcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBDbXBNZ3IuY3JlYXRlRmF2b3JpdGVDb21wb25lbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVGV4dENoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zZWFyY2hEYXRhLnZhbHVlID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2VhcmNoU3RhdGUgJiYgdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNlYXJjaERhdGEudmFsdWUgPSB0aGlzLl9zZWFyY2hTdGF0ZS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGNvbHVtbnMgZm9ybWF0dGVyXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUZvcm1hdHRlcltjb2wuZmllbGRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLmZvcm1hdHRlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyW2NvbC5maWVsZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRm9ybWF0dGVyLnJvd1N0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uucm93U3R5bGVyID0gdGhpcy5jdXN0b21Gb3JtYXR0ZXIucm93U3R5bGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21Gb3JtYXR0ZXIuY2VsbFN0eWxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY2VsbFN0eWxlciA9IHRoaXMuY3VzdG9tRm9ybWF0dGVyLmNlbGxTdHlsZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocmVzRGF0YS5jdXN0b21TdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcm93OiByb3dTdHlsZXJzLCBjZWxsOiBjZWxsU3R5bGVycyB9ID0gcmVzRGF0YS5jdXN0b21TdHlsZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyRm4gPSAobiwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB0aGlzLnV0aWxzLmdldFZhbHVlKG4uZmllbGQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLnZhbHVlID09ICcwJyB8fCBuLnZhbHVlID09ICcxJyB8fCBuLnZhbHVlID09ICd0cnVlJyB8fCBuLnZhbHVlID09ICdmYWxzZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkID09PSAobi52YWx1ZSA9PSAnMCcgfHwgbi52YWx1ZSA9PSAnZmFsc2UnKSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZCA9PT0gISFuLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZCA9PT0gbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocm93U3R5bGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnJvd1N0eWxlciA9ICh7IGRhdGEgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZUl0ZW0gPSByb3dTdHlsZXJzLmZpbmQobiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyRm4obiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGVJdGVtLnN0eWxlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjZWxsU3R5bGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNlbGxTdHlsZXIgPSAoZSwgZmllbGQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZUl0ZW0gPSBjZWxsU3R5bGVycy5maWx0ZXIobiA9PiBuLmZpZWxkID09PSBmaWVsZCkuZmluZCh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGbih0LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGVJdGVtLnN0eWxlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgcmV0dXJuIG9ic2VyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5biu5Yqp56qX5Y+j5qCH6aKYXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0TG9va3VwVGl0bGVUZXh0KHJlc0RhdGE6IExvb2t1cEdyaWRSZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzRGF0YS5kaXNwbGF5SW5mbykge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbmZvID0gcmVzRGF0YS5kaXNwbGF5SW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWmguaenOiHquWumuS5ieagh+mimO+8jOWwhuS7peatpOagh+mimOS4uuWHhuOAguWQpuWImeWKoOi9veacjeWKoeWZqOerr+i/lOWbnueahOaVsOaNrlxyXG4gICAgICAgIGlmICh0aGlzLnRpdGxlICYmIHRoaXMudGl0bGUgIT09IFwi5q2k5aSE5pi+56S65biu5Yqp5qCH6aKYXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5SW5mbyAmJiByZXNEYXRhLnRpdGxlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNwbGF5SW5mby50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5SW5mby50aXRsZSA9IHJlc0RhdGEudGl0bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSAmJiB0aGlzLnRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVJbmZvLmxvYWREYXRhVHlwZSAhPT0gXCJhbGxcIiAmJiB0aGlzLnRyZWVJbmZvLmxheWVyVHlwZSA9PT0gXCJwYXRoY29kZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlR2V0QWxsQ2hpbGROb2RlcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0RGF0YSgpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IChkYXRhOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbHVtbnMgfHwgIXRoaXMuY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubWVzc2FnZXJTZXJ2aWNlLm1vZGFscyB8fCAhdGhpcy5tZXNzYWdlclNlcnZpY2UubW9kYWxzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmVycm9yKHttc2c6IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAuY29uZmlnRXJyb3InKSAsIHRpbWVvdXQ6IDMwMDB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOacjeWKoeWZqOerr+WPkeeUn+mUmeivr++8jOi/lOWbnk5VTEwg5pe277yM55u05o6l5YWz6Zet56qX5Y+jXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdE9wdGlvbnMoZGF0YSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1ucyA9IHRoaXMubXVsdGlTZWxNZ3IuaW5pdFNlbGVjdGVkQ29sdW1ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZmF2b3JpdGVDb2x1bW5zID0gdGhpcy5mYXZIZWxwZXIuZ2V0RmF2b3JpdGVDb2x1bW5zKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVBlcnNpb25hbENvbmYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS5nZXRQZXJzb25hbERhdGEoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzb25hbENvbmZpZ1NlcnZpY2Uuc2F2ZVBlcnNvbmFsQ29uZmlnKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25mXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RhYkNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBTZWxlY3Rpb25TZXIubG9hZFNlbGVjdGlvbnMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdGVkSXRlbXMgfHwgW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlr7zoiKrluK7liqnml7bvvIzorr7nva7lt6bkvqfpgInkuK3mlbDmja7ml7bvvIzkuI3liqDovb3kuLvmlbDmja7liJfooajjgIJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2U2VsZWN0ZWRJZHMgfHwgdGhpcy5zZWxlY3RGaXJzdEluTmF2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhV2hlbk9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2FjdGl2ZVRhYiddICYmICF0aGlzLmlzVGFiQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9ICdkYXRhbGlzdCc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZXJzb25hbENvbmYgJiYgdGhpcy5wZXJzb25hbENvbmYudGFiSW5kZXggIT09IHRoaXMuYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZi50YWJJbmRleCA9IHRoaXMuYWN0aXZlVGFiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImRhdGFsaXN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR0LnNlYXJjaERhdGEudmFsdWUgJiYgdGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLml0ZW1zWzBdLmNoaWxkcmVuICYmIHRoaXMuaXRlbXNbMF0uY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR0LnRvZ2dsZUV4cGFuZCh0aGlzLml0ZW1zWzBdLCB0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0dldEFsbENoaWxkcmVuQ2hlY2tib3goKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUmVzdWx0ID0gbnVsbDsgLy8g5riF56m65Li05pe25p+l6K+iIOe7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5pc1JlYWR5JC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rdXBpbml0aWFsaXphdGlvblN1YmplY3QubmV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXlvdXRSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXlvdXRSZWYuc2V0UGFuZWxNYXhTaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiAoZXJyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuaXNSZWFkeSQubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hSZXN1bHQgPSBudWxsOyAvLyDmuIXnqbrkuLTml7bmn6Xor6Ig57uT5p6cXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVGV4dENoYW5nZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVyciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5NZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS5lcnJvcihlcnIuTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuZXhjZXB0aW9uKGVyci5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXJTZXJ2aWNlLmVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIuW6lOeUqOacjeWKoeWZqOmUmeivryzor7fogZTns7vns7vnu5/nrqHnkIblkZjvvIFcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHA6IGFueSA9IHtcclxuICAgICAgICAgICAgcGFnZUluZm86IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplIHx8IDIwLFxyXG4gICAgICAgICAgICAgICAgcGFnZUluZGV4OiAxLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHQ6IExPQURfREFUQV9UWVBFID0gXCJhbGxcIjtcclxuICAgICAgICBpZiAodGhpcy5pc1RleHRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoU3RhdGUgPSB7IFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IFwiKlwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuZGlzcGxheVRleHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5YiG5bGC5Yqg6L295pSv5oyB6K6+572u5bGV5byA5bGC57qnXHJcbiAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkgfHwgdGhpcy5kaXNwbGF5VHlwZSA9PT0gTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdlRyZWVMaXN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4cGFuZExldmVsID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHBbJ2V4cGFuZExldmVsJ10gPSB0aGlzLmV4cGFuZExldmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2VhcmNoU3RhdGUgJiYgdGhpcy5fc2VhcmNoU3RhdGUudmFsdWUpIHtcclxuICAgICAgICAgICAgcFsnc2VhcmNoJ10gPSB0aGlzLl9zZWFyY2hTdGF0ZTtcclxuICAgICAgICAgICAgdCA9ICdzZWFyY2gnO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuY29uZGl0aW9ucyAmJiAhdGhpcy5jb25kaXRpb25zLmxlbmd0aCAmJiB0aGlzLmVuYWJsZU11bHRpRmllbGRTZWFyY2gpIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuY29uZGl0aW9ucyA9IFt7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgXCJmaWx0ZXJGaWVsZFwiOiB0aGlzLnRleHRGaWVsZCxcclxuICAgICAgICAgICAgLy8gICAgICAgICBcInZhbHVlXCI6IHRoaXMuX3NlYXJjaFN0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIFwibGJyYWNrZXRcIjogXCJcIixcclxuICAgICAgICAgICAgLy8gICAgICAgICBcInJicmFja2V0XCI6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgXCJyZWxhdGlvblwiOiAwLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIFwiY29tcGFyZVwiOiA2XHJcbiAgICAgICAgICAgIC8vICAgICB9XTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5pc1RhYkNoYW5nZWQgJiYgdGhpcy5lbmFibGVUb1NlbGVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxzID0gdGhpcy5zZWxlY3Rpb25NZ3IuZ2V0U2VsZWN0ZWRJZHMoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHMgJiYgdmFscy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHBbXCJzZWxlY3RlZEluZm9cIl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJZHM6IHZhbHMsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbXCJzZWxlY3RlZElkc1wiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBbXCJzZWxlY3RlZEluZm9cIl0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkczogdGhpc1tcInNlbGVjdGVkSWRzXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XHJcbiAgICAgICBcclxuICAgICAgICB0aGlzLmh0dHBNZ3IubG9va3VwUmVxdWVzdChwLCB0KS5waXBlKFxyXG4gICAgICAgICAgICBtYXAoKHJlc3REYXRhOiBMb29rdXBHcmlkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN0RGF0YS5zZWxlY3RlZEl0ZW1zID0gcmVzdERhdGFbXCJzZWxlY3RlZERhdGFcIl0gfHwgW107XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN0RGF0YSAmJiB0eXBlb2YgcmVzdERhdGEgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdERhdGEuc2VsZWN0ZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0RGF0YSA9PT0gbnVsbCA/IGZhbHNlIDogcmVzdERhdGE7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBzd2l0Y2hNYXAoKHJlczogTG9va3VwR3JpZFJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVmb3JlTG9hZERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVMb2FkRGF0YSh7aW5zdGFuY2U6IHRoaXMsIHJlc30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0LCByZWJpbmRFdmVudCA9IHRydWUpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51c2VGYXZvcml0ZSAmJiAhdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYXZIZWxwZXIudXBkYXRlRmF2b3JpdGVzU3RhdHVzKHJlc0RhdGEuaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZGlzcGxheVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLk5hdkxpc3Q6XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvb2t1cEdyaWREaXNwbGF5VHlwZS5OYXZUcmVlTGlzdDpcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLkxpc3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVRhYmxlRGF0YShyZXNEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmViaW5kRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kdEV2ZW50TWdyLmJpbmREYXRhVGFibGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9va3VwR3JpZERpc3BsYXlUeXBlLlRyZWVMaXN0OlxyXG4gICAgICAgICAgICAgICAgY2FzZSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2TGlzdFRyZWU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZVRhYmxlRGF0YShyZXNEYXRhLCByZWJpbmRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImZhdm9yaXRlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkRmF2RGF0YShyZXNEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmAieS4reaVsOaNrlxyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZEZhdkRhdGEocmVzdWx0OiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgLy8g5Yqg6L295pS26JeP5pWw5o2uXHJcbiAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJlZUluZm8ocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVOb2RlcyA9IHRoaXMuZmF2SGVscGVyLmluaXRGYXZvcml0ZVRyZWVEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtc1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyZWVEYXRhID0gdGhpcy50cmVlTm9kZUhlbHBlclxyXG4gICAgICAgICAgICAgICAgICAgIC5mbGF0VHJlZU5vZGVzKHRyZWVOb2RlcylcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uZGF0YVtcIl9hZGR0aW9uYWxfXCJdID0gbltcImFkZHRpb25hbFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHRyZWVEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlc0NvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwU2VsZWN0aW9uU2VyLmluaXRGYXZvcml0ZUl0ZW1zKHJlc3VsdC5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLmxvYWRGYXZvcml0ZXNEYXRhKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWREYXRhVGFibGVEYXRhKHJlc0RhdGE/OiBMb29rdXBHcmlkUmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHJlc0RhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUgJiYgIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyhyZXNEYXRhLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc0RhdGEgJiYgcmVzRGF0YS5jb2x1bW5zICYmIHJlc0RhdGEuY29sdW1ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmdyaWRPcHRpb25zLmNvbHVtbnMgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuZ3JpZE9wdGlvbnMuY29sdW1ucy5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gcmVzRGF0YS5jb2x1bW5zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzRGF0YS5pdGVtcztcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXNEYXRhLnRvdGFsIHx8IHJlc0RhdGEuaXRlbXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKCByZXNEYXRhLnNlYXJjaEZpZWxkcyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyaWRPcHRpb25zLnNlYXJjaEZpZWxkcyA9IHRoaXMuZ2V0U2VhcmNoQ29sdW1ucyhyZXNEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZXNEYXRhLnBhZ2VJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VMaXN0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICghdGhpcy5wYWdlTGlzdCB8fCAhdGhpcy5wYWdlTGlzdC5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUxpc3QgPSByZXNEYXRhLnBhZ2VJbmZvLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRpb24gPSByZXNEYXRhLnBhZ2VJbmZvLmVuYWJsZVBhZ2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluZGV4ID0gcmVzRGF0YS5wYWdlSW5mby5wYWdlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2l6ZSA9IHJlc0RhdGEucGFnZUluZm8ucGFnZVNpemU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucyA9IHJlc0RhdGEgYXMgTG9va3VwR3JpZE9wdGlvbnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVRhYmxlKHRoaXMuZ3JpZE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlRGF0YVRhYmxlKG9wdHM6IGFueSkge1xyXG4gICAgICAgIGlmIChvcHRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgRGF0YVRhYmxlQ29tcG9uZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkdC5jb2x1bW5zIHx8IGR0LmNvbHVtbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkdC5jb2x1bW5zID0gdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGR0LmFsbENvbHVtbnNUaXRsZSA9IHRoaXMuYWxsQ29sdW1uc1RpdGxlO1xyXG4gICAgICAgICAgICBkdC5zZWFyY2hGaWVsZHMgPSBvcHRzLnNlYXJjaEZpZWxkcztcclxuICAgICAgICAgICAgZHQucGFnaW5hdGlvbiA9IG9wdHMucGFnaW5hdGlvbjtcclxuICAgICAgICAgICAgZHQucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0O1xyXG4gICAgICAgICAgICBkdC5yZW1vdGVTb3J0ID0gdGhpcy5yZW1vdGVTb3J0O1xyXG4gICAgICAgICAgICBkdC5zdHJpcGVkID0gdGhpcy5lbmFibGVNdWx0aUZpZWxkU2VhcmNoO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgZHQubG9hZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBvcHRzLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VJbmRleDogdGhpcy5ncmlkT3B0aW9ucy5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRoaXMuZ3JpZE9wdGlvbnMudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ncmlkT3B0aW9ucy5pdGVtcyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZHQuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkU3VjY2Vzcy5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0VHJlZUluZm8ocmVzRGF0YSkge1xyXG4gICAgICAgIGlmICghcmVzRGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX3RyZWVJbmZvID0gbnVsbDtcclxuICAgICAgICBpZiAocmVzRGF0YS50cmVlSW5mbykge1xyXG4gICAgICAgICAgICBjb25zdCBvbmx5U2VsZWN0TGVhZiA9IHJlc0RhdGEudHJlZUluZm8ub25seVNlbGVjdExlYWY7XHJcbiAgICAgICAgICAgIGxldCBfb3NsOiBPTkxZX1NFTEVDVF9MRUFGID0gXCJub1wiO1xyXG4gICAgICAgICAgICBpZiAob25seVNlbGVjdExlYWYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX29zbCA9IG9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdHJlZUluZm8gPSB7IC4uLnJlc0RhdGEudHJlZUluZm8sIG9ubHlTZWxlY3RMZWFmOiBfb3NsIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0cmVlSW5mbyA9IHRoaXMuZ3JpZE9wdGlvbnMudHJlZUluZm87XHJcbiAgICAgICAgaWYgKHRyZWVJbmZvKSB7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID09PSBudWxsXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPSBcIm5vXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHJlZUluZm8ub25seVNlbGVjdExlYWYgPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICB0cmVlSW5mby5vbmx5U2VsZWN0TGVhZiA9IHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmID8gXCJ5ZXNcIiA6IFwibm9cIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMjAyMTA5MDJcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZFRyZWVEYXRhVHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgICAgICAgICAgICAgIHRyZWVJbmZvLmxvYWREYXRhVHlwZSA9IF90cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cmVlSW5mby5sb2FkRGF0YVR5cGUgPSB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiID8gXCJhbGxcIiA6IFwiYXN5bmNcIjtcclxuICAgICAgICAgICAgICAgIF90cmVlSW5mby5sb2FkRGF0YVR5cGUgPSB0cmVlSW5mby5sb2FkRGF0YVR5cGVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRyZWVJbmZvLm9ubHlTZWxlY3RMZWFmICE9PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgX3RyZWVJbmZvID0gT2JqZWN0LmFzc2lnbihfdHJlZUluZm8sIHRyZWVJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvYWRUcmVlRGF0YVR5cGUgIT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBfdHJlZUluZm8ubG9hZERhdGFUeXBlID0gdGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImxvYWRhbGxcIiA/IFwiYWxsXCIgOiBcImFzeW5jXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHJlZUluZm8gPSBfdHJlZUluZm87XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkVHJlZVRhYmxlRGF0YShyZXNEYXRhPzogTG9va3VwR3JpZFJlc3VsdCwgcmViaW5kRXZlbnQgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSByZXNEYXRhID8gcmVzRGF0YS5pdGVtcyA6IHRoaXMuZ3JpZE9wdGlvbnMuaXRlbXM7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG5cclxuICAgICAgICBpZiAocmVzRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRyZWVJbmZvKHJlc0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdHJlZUluZm8gPSB0aGlzLmdyaWRPcHRpb25zLnRyZWVJbmZvO1xyXG4gICAgICAgICAgICBpZiAoIXRyZWVJbmZvW1widHJlZURhdGFJc0luaXRcIl0pIHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmVlSW5mby5sYXllclR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJwYXRoY29kZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMubG9va3VwVXRpbHMubWFrZVRyZWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMubG9va3VwVXRpbHMubWFrZVRyZWVXaXRoUGFyZW50SUQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWVJbmZvLmRhdGFGaWVsZCA/IGAke3RyZWVJbmZvLmRhdGFGaWVsZH0uJHt0cmVlSW5mby5wYXJlbnRGaWVsZH1gOiB0cmVlSW5mby5wYXJlbnRGaWVsZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pZEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlIGluc3RhbmNlb2YgVHJlZVRhYmxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmVlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGFUeXBlID0gdGhpcy50cmVlSW5mby5sb2FkRGF0YVR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW5zIHx8ICF0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0dC5jb2x1bW5zID0gcmVzRGF0YS5jb2x1bW5zIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5zID0gdHQuY29sdW1ucztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsVHJlZURhdGEgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkVHJlZURhdGFUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0dC5sb2FkRGF0YVR5cGUgPT09IFwiYWxsXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRUcmVlRGF0YVR5cGUgPT09IFwibG9hZGFsbFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYmluZEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuYmluZFRyZWV0YWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNMb2FkQWxsID0gaXNMb2FkQWxsVHJlZURhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIC8qKiDlrozmlbTmoJHoioLngrnmo4Dmn6UgQnkgTHVjYXMgMjAyMDAzMDIgKi9cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmNoZWNrTm9kZUNhbkJlU2VsZWN0KHRoaXMuaXRlbXMsIGlzTG9hZEFsbCk7XHJcbiAgICAgICAgICAgIHR0LmtlZXBTZWxlY3QgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudXNlRmF2b3JpdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmF2SGVscGVyLnVwZGF0ZUZhdm9yaXRlc1N0YXR1cyh0aGlzLml0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZERhdGFXaGVuT3Blbikge1xyXG4gICAgICAgICAgICAgICAgdHQubG9hZERhdGEodGhpcy5pdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHQucmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zyo5p6E5a6M5pW05qCR5Lit77yM5pyJ6YOo5YiG6IqC54K55Zug5Li65p2h5Lu26KKr6L+H5ruk77yM5Li65pi+56S65a6M5pW05qCR77yMXHJcbiAgICAgKiDov5nkupvoioLngrnlnKjov5DooYzml7bmmK/kuI3lhYHorrjooqvpgInkuK3nmoQsIOi/lOWbnuaWsOeahOiKgueCueaVsOe7hFxyXG4gICAgICogQnkgTHVjYXMgMjAyMDAzMDJcclxuICAgICAqL1xyXG4gICAgY2hlY2tOb2RlQ2FuQmVTZWxlY3Qobm9kZXMsIGlzQWxsVHJlZURhdGEgPSBmYWxzZSk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmhhc093blByb3BlcnR5KFwiYWRkdGlvbmFsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zZWxlY3RhYmxlID0gIW5vZGVbXCJhZGR0aW9uYWxcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrTm9kZUNhbkJlU2VsZWN0KG5vZGUuY2hpbGRyZW4sIGlzQWxsVHJlZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbGxUcmVlRGF0YSAmJiAoIXRoaXMuX3NlYXJjaFN0YXRlIHx8ICF0aGlzLl9zZWFyY2hTdGF0ZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5sZWFmID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2VzKHZhbCkge1xyXG4gICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGVhcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB2YWw7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gdGhpcy5vcmlnaW5hbFRleHQgIT09IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vc2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1vZGVsVmFsdWUodmFsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJNYXBwaW5ncy5lbWl0KHsgaW5zdGFuY2U6IHRoaXMsIHZhbHVlOiB2YWwsIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkLmVtaXQodmFsKTtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q2hhbmdlZC5lbWl0KHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBvbkNsZWFyKGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5pc1RleHRDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gXCJcIjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKFwiXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLm1hcHBpbmdGbikge1xyXG4gICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihudWxsLCB0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMuc2VsZWN0aW9uTWdyLmdldEJpbmRpbmdEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcEZpZWxkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubXVsdGlTZWxNZ3IuY2xlYXIoKTtcclxuICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyLmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJWYWx1ZShlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMub25DbGVhcihlbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RJdGVtKHJvd0RhdGE/OiBhbnkpIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgIGlmIChyb3dEYXRhKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gcm93RGF0YTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJvdyA9IHRoaXMuc2VsZWN0aW9ucztcclxuXHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdGVkUm93KSAmJiAhc2VsZWN0ZWRSb3cubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9zZWFyY2hTdGF0ZSA9IHsgXHJcbiAgICAgICAgICAgIGZpZWxkOiAnKicsXHJcbiAgICAgICAgICAgIHZhbHVlOiAnJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5a6a5LmJ5LqG6Ieq5a6a5LmJ5aSE55CG56Gu5a6a5LqL5Lu277yM5YiZ55Sx6Ieq5a6a5LmJ5LqL5Lu25aSE55CG5ZCO6Z2i55qE6YC76L6RXHJcbiAgICAgICAgaWYgKHRoaXMub2tIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tIYW5kbGVyKHsgZGF0YTogc2VsZWN0ZWRSb3csIGluc3RhbmNlOiB0aGlzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVNlbGVjdERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJzZFJlc3VsdCA9IHRoaXMuYmVmb3JlU2VsZWN0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogc2VsZWN0ZWRSb3csXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChic2RSZXN1bHQgJiYgYnNkUmVzdWx0LnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJzZFJlc3VsdC5zdWJzY3JpYmUoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3REYXRhQ2FsbEJhY2soZSwgc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlQ29uc29sZSgn5biu5Yqp5pWw5o2u6YCJ5Lit5YmN5LqL5Lu25pyq6L+U5Zue5YC85oiW6L+U5Zue57G75Z6L6Z2eT2JzZXJ2YWJsZSwg6K+35qOA5p+lJywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iZWZvcmVTZWxlY3REYXRhQ2FsbEJhY2sodHJ1ZSwgc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFBhdGhDb2RlKGRhdGEsIHRyZWVJbmZvID0gbnVsbCkge1xyXG4gICAgICAgcmV0dXJuIHRoaXMubG9va3VwVXRpbHMuZ2V0UGF0aENvZGUoZGF0YSwgdHJlZUluZm8gfHwgdGhpcy50cmVlSW5mbyk7XHJcbiAgICB9XHJcbiAgICBnZXRMYXllckRhdGEoZGF0YSwgdHJlZUluZm8gPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwVXRpbHMuZ2V0TGF5ZXJEYXRhKGRhdGEsIHRyZWVJbmZvIHx8IHRoaXMudHJlZUluZm8pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGdldFBhcmVudFBhdGhDb2RlKHJvd3MpIHtcclxuICAgICAgICBjb25zdCBtYXhCeSA9IChhcnIsIGZuKSA9PlxyXG4gICAgICAgICAgICBNYXRoLm1heChcclxuICAgICAgICAgICAgICAgIC4uLmFyci5tYXAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIgPyBmbiA6ICh2YWwpID0+IHZhbFtmbl0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIGNvbnN0IHsgZGF0YUZpZWxkLCBwYXRoRmllbGQsIGxheWVyRmllbGQgfSA9IHRoaXMudHJlZUluZm87XHJcbiAgICAgICAgY29uc3QgbWF4TGF5ZXIgPSBtYXhCeShyb3dzLCAoeCkgPT4gdGhpcy5nZXRMYXllckRhdGEoeCkpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtYXhMYXllcjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9yb3dzID0gcm93cy5maWx0ZXIoKG4pID0+IHRoaXMuZ2V0TGF5ZXJEYXRhKG4pID09PSBpKTtcclxuICAgICAgICAgICAgaWYgKF9yb3dzICYmIF9yb3dzLmxlbmd0aCAmJiBfcm93cy5sZW5ndGggPCByb3dzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgX3Jvd3MuZm9yRWFjaCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoQ29kZSA9IHRoaXMuZ2V0UGF0aENvZGUocik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX3Jvd3MyID0gcm93cy5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3BjID0gdGhpcy5nZXRQYXRoQ29kZShuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcGMgIT09IHBhdGNoQ29kZSAmJiBfcGMuaW5kZXhPZihwYXRjaENvZGUpID09PSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3Jvd3MyICYmIF9yb3dzMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cyA9IHJvd3MuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4pID0+IHRoaXMuZ2V0UGF0aENvZGUobikgIT09IHBhdGNoQ29kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcm93cztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9iZWZvcmVTZWxlY3REYXRhQ2FsbEJhY2soZSwgc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICBsZXQgY2FuU2VsZWN0ID0gZTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICBjYW5TZWxlY3QgPSBlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgY2FuU2VsZWN0ID0gZS5jYW5TZWxlY3Q7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZS5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FuU2VsZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMubXVzdENob29zQWRhdGFyb3c7XHJcbiAgICAgICAgICAgIGNhblNlbGVjdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNhblNlbGVjdCkge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRSb3dzJCA9IG9mKHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgLy8g5aSa6YCJIOagkeW4ruWKqSDlvILmraXliqDovb0g5YiG57qn56CBIOW8gOWQr+WQjOatpemAieaLqSDmiJbljIXlkKvkuIvnuqdcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnNpbmdsZVNlbGVjdCAmJiB0aGlzLmVuYWJsZUNhc2NhZGUgJiYgdGhpcy5pc1RyZWUoKSApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyZWVJbmZvLmxvYWREYXRhVHlwZSAhPT0gXCJhbGxcIiAmJiB0aGlzLnRyZWVJbmZvLmxheWVyVHlwZSA9PT0gXCJwYXRoY29kZVwiICYmIHRoaXMuaXNHZXRBbGxDaGlkbE5vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudHNJZHMgPSB0aGlzLmdldFBhcmVudFBhdGhDb2RlKHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50c0lkcyAmJiBwYXJlbnRzSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzSWRzID0gcGFyZW50c0lkcy5tYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobikgPT4gdGhpcy5nZXRQYXRoQ29kZShuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cyQgPSB0aGlzLmh0dHBNZ3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXREYXRhKHsgcGFyZW50c0lkcyB9LCBcImFsbENoaWxkcmVuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGlwZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAoKHI6IExvb2t1cEdyaWRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSByLml0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHIuaXRlbXMubWFwKChkKSA9PiBkLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxpdGVtcyA9IFsuLi5zZWxlY3RlZFJvdywgLi4uaXRlbXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gYWxsaXRlbXMubWFwKChuKSA9PiBuW3RoaXMuaWRGaWVsZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaWRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHMubWFwKChuKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsaXRlbXMuZmluZCgoYSkgPT4gYVt0aGlzLmlkRmllbGRdID09PSBuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZWN0ZWRSb3dzJC5zdWJzY3JpYmUoKHJvd3MpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0dldEFsbENoaWRsTm9kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFNlbGVjdGlvblNlci5sb2FkU2VsZWN0aW9ucyhyb3dzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFZhbHVlKHJvd3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZVRpcCB8fCAhcm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVRpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlLnVwZGF0ZVF1ZWNrU2VsZWN0ZWQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTZXJ2aWNlLmxvY2FsZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVNlcnZpY2Uud2FybmluZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyhtZXNzYWdlLCBcIlwiLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmVsLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNvbnRyb2xWYWx1ZShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFJvdykge1xyXG4gICAgICAgICAgICB0aGlzLnNldERpc3BsYXlUZXh0KHNlbGVjdGVkUm93KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwcGluZ0ZuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcHBpbmdGbihzZWxlY3RlZFJvdywgdGhpcy5tYXBGaWVsZHMsIHRoaXMuYmluZGluZ0RhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwRmllbGRzICYmIHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRNYXBwaW5nLmxvb2t1cEZpZWxkTWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBGaWVsZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmRpc3BsYXlUZXh0KTtcclxuICAgICAgICAgICAgaWYgKHRoaXNbXCJpbkRhdGFncmlkXCJdICYmIHNlbGVjdGVkUm93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RJdGVtcyA9IEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRSb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgIDogW3NlbGVjdGVkUm93XTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQmluZERhdGEoc2VsZWN0SXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhLmVtaXQoc2VsZWN0ZWRSb3cpO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bkRpY3RQaWNrZWRFdmVudChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIChkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxCdXR0b25FbGVtZW50KS5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2Uud2FybmluZyh0aGlzLm11c3RDaG9vc0FkYXRhcm93KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVCaW5kRGF0YShzZWxlY3RlZFJvdykge1xyXG4gICAgICAgIGlmICghdGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChiaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShoZWxwRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKGJpbmRpbmdEYXRhLCBmb3JtRmllbGQsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgYmluZGluZ1BhdGggPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ1BhdGg7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgcGF0aEFycjogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgLy8gICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHBhdGhBcnIgPSBiaW5kaW5nUGF0aC5zcGxpdCgnLycpLmZpbHRlcihuID0+IG4gIT09ICcnKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICAgICBoZWxwRmllbGRzLmZvckVhY2goKGhlbHBGaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tYXBGaWVsZHNbaGVscEZpZWxkXS5zcGxpdCgnLCcpLmZvckVhY2goKGZvcm1GaWVsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChmb3JtRmllbGQuc3BsaXQoJy4nKSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHNlbGVjdGVkUm93Lm1hcChyID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnV0aWxzLmdldFZhbHVlKGZvcm1GaWVsZCwgcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0pLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGJpbmRpbmdEYXRhLnNldFZhbHVlKHBhdGhBcnIuY29uY2F0KGZpZWxkUGF0aHMpLCB2YWwsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5iaW5kaW5nRGF0YSkge1xyXG4gICAgICAgICAgICAvLyAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF0uc3BsaXQoJywnKS5mb3JFYWNoKChmb3JtRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zdCB2YWwgPSBzZWxlY3RlZFJvdy5tYXAociA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZShmb3JtRmllbGQsIHIpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9KS5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKHRoaXMuYmluZGluZ0RhdGEsIGZvcm1GaWVsZCwgdmFsKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5leHRJbmZvRmllbGRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVDb25zb2xlKGDmnKrorr7nva7mianlsZXlrZfmrrXjgIJgKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aXBGaWVsZEFyciA9IHRoaXMuZXh0SW5mb0ZpZWxkcy5zcGxpdChcIixcIik7XHJcblxyXG4gICAgICAgIGlmIChpc0hlbHBEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBleHRlbmRJbmZvRmllbGRzID0gW107XHJcbiAgICAgICAgICAgIGV4dGVuZEluZm9GaWVsZHMgPSB0aXBGaWVsZEFyci5tYXAoKHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBLZXkgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcykuZmluZCgoaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXSA9PT0gdGY7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcEtleTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUNvbnNvbGUoYOWcqOW4ruWKqeaYoOWwhOWtl+auteS4reacquaJvuWIsCR7dGZ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kSW5mb0ZpZWxkcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aXBGaWVsZEFycjtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZUV4dGVuZEluZm8oKSB7XHJcbiAgICAgICAgY29uc3QganNvbkRhdGEgPSB0aGlzLnNlbGVjdGlvbk1nci5nZXRCaW5kaW5nRGF0YSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRXh0ZW5kSW5mbyhqc29uRGF0YSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmAieS4reW4ruWKqeaVsOaNruWQju+8jOabtOaWsOaJqeWxleS/oeaBr1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVFeHRlbmRJbmZvKGRhdGE6IGFueSwgaXNIZWxwRGF0YSA9IHRydWUpIHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5leHRJbmZvRm9ybWF0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IGRhdGEubWFwKChuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IHRpcFN0cmluZy5qb2luKFwi77yMXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZEluZm8gPSB0aGlzLmdldEV4dGVuZEluZm9UZXh0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5kSW5mb0ZpZWxkcyA9IHRoaXMuZ2V0RXh0ZW5kSW5mb0ZpZWxkcyhpc0hlbHBEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHRlbmRJbmZvRmllbGRzICYmIGV4dGVuZEluZm9GaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlwU3RyaW5nID0gZGF0YS5tYXAoKG4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEV4dGVuZEluZm9UZXh0KG4sIGV4dGVuZEluZm9GaWVsZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGlwU3RyaW5nLmpvaW4oXCLvvIxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbmRJbmZvID0gdGhpcy5nZXRFeHRlbmRJbmZvVGV4dChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmRJbmZvRmllbGRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RXh0ZW5kSW5mb1RleHQoaXRlbURhdGEsIGZpZWxkcyA9IG51bGwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZXh0SW5mb0Zvcm1hdHRlciA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dEluZm9Gb3JtYXR0ZXIoe1xyXG4gICAgICAgICAgICAgICAgYmluZGluZ0RhdGE6IGl0ZW1EYXRhLFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2U6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpcFN0cmluZyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0aXBWYWx1ZXMgPSBmaWVsZHMubWFwKCh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZnYgPSB0aGlzLnV0aWxzLmdldFZhbHVlKHQsIGl0ZW1EYXRhKTtcclxuICAgICAgICAgICAgICAgIHRpcFN0cmluZy5wdXNoKHRmdik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBbdF06IHRmdiB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRpcFN0cmluZy5qb2luKFwiIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaXNwbGF5VGV4dChyb3dzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBkZiA9IHRoaXMuZGlzcGxheUZpZWxkc1xyXG4gICAgICAgICAgICA/IHRoaXMuZGlzcGxheUZpZWxkcy5zcGxpdChcIixcIilcclxuICAgICAgICAgICAgOiBbdGhpcy50ZXh0RmllbGRdO1xyXG4gICAgICAgIGNvbnN0IHR4dEFyciA9IHJvd3MubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcclxuICAgICAgICAgICAgZGYuZm9yRWFjaCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdC5wdXNoKHRoaXMudXRpbHMuZ2V0VmFsdWUobiwgcikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHQuam9pbih0aGlzLmRpc3BsYXlUZXh0U2VwYXJhdG9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ3JpZE9wdGlvbnMuc2luZ2xlU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eHRBcnIuam9pbihcIlwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5RmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLm1hcCgodCkgPT4gXCJbXCIgKyB0ICsgXCJdXCIpLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHh0QXJyLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFRleHQgPSB0aGlzLmRpc3BsYXlUZXh0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ncmlkT3B0aW9ucy5zaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0RmllbGQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNUcmVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbc2VsZWN0ZWRSb3ddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhdGFibGU6IHRoaXMuY29tcG9uZW50UmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc3RhbmNlIGFzIERhdGFUYWJsZUNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UgYXMgVHJlZVRhYmxlQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmRpc3BsYXlGb3JtYXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtzZWxlY3RlZFJvd10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9va3VwOiB0aGlzLCB0cmVlOiB0dCB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KFtzZWxlY3RlZFJvd10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gc2VsZWN0ZWRSb3dbdGhpcy52YWx1ZUZpZWxkIHx8IHRoaXMuaWRGaWVsZF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkUm93Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcGxheUZvcm1hdHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51dGlscy5nZXRWYWx1ZSh0aGlzLnRleHRGaWVsZCwgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5kaXNwbGF5Rm9ybWF0dGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhdGFibGU6IHRoaXMuY29tcG9uZW50UmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnN0YW5jZSBhcyBEYXRhVGFibGVDb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHQgPSB0aGlzLmNvbXBvbmVudFJlZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmluc3RhbmNlIGFzIFRyZWVUYWJsZUNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IHRoaXMuZGlzcGxheUZvcm1hdHRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgbG9va3VwOiB0aGlzLCB0cmVlOiB0dCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gdGhpcy5nZXREaXNwbGF5VGV4dChzZWxlY3RlZFJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBzZWxlY3RlZFJvd1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXRpbHMuZ2V0VmFsdWUodGhpcy52YWx1ZUZpZWxkIHx8IHRoaXMuaWRGaWVsZCwgcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcnVuRGljdFBpY2tlZEV2ZW50KHJvd0RhdGE6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpY3RQaWNrZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2tCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2tCdXR0b24ubmF0aXZlRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kaWN0UGlja2VkKHJvd0RhdGEpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICh2OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5va0J1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9rQnV0dG9uLm5hdGl2ZUVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYuY2xvc2VEaWFsb2cgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdi5jbG9zZURpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VyU2VydmljZS53YXJuaW5nKHYubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKHJvd0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZyhyb3dEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb2N1c1RvSW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnB1dEdyb3VwICYmIHRoaXMuaW5wdXRHcm91cC50ZXh0Ym94KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEdyb3VwLnRleHRib3gubmF0aXZlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZyhyb3dEYXRhID0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocm93RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLm11bHRpU2VsTWdyLnNhdmUocm93RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mb2N1c1RvSW5wdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxTZWxlY3QoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIHRoaXMuaXNUZXh0Q2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLm5vc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0aGlzLm9yaWdpbmFsVGV4dDtcclxuICAgICAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGVsVmFsdWUodikge1xyXG4gICAgICAgIGlmICh0aGlzLm9uTW9kZWxDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHYpO1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZC5lbWl0KHYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDmlbDmja7liJfooajvvIzmlLbol4/vvIwg5bey6YCJ5pWw5o2uIHRhYiDpobXliIfmjaJcclxuICAgIG9uVGFiQ2hhbmdlKGU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gZS50YWJJbmRleDtcclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZi50YWJJbmRleCA9IHRoaXMuYWN0aXZlVGFiO1xyXG4gICAgICAgIGNvbnN0IF9maXJzdENoYW5nZSA9IHRoaXMuaXNUYWJDaGFuZ2VkO1xyXG4gICAgICAgIHRoaXMuaXNUYWJDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnBlcnNvbmFsQ29uZmlnU2VydmljZS51cGRhdGVQZXJzb25hbENvbmZpZyh7XHJcbiAgICAgICAgICAgIHRhYkluZGV4OiBlLnRhYkluZGV4LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZGF0YWxpc3RcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0RvdWJsbGVMaXN0KCkgJiYgIXRoaXMubGVmdENvbXBvbmVudFJlZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvbk9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cENtcE1nci5jcmVhdGVMZWZ0Q29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25PcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1zIHx8ICF0aGlzLml0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfZmlyc3RDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUcmVlVGFibGVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YVRhYmxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR0RXZlbnRNZ3IuYmluZERhdGFUYWJsZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3Rpb25NZ3Iuc2VsZWN0Q3VycmVudFZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93R2V0QWxsQ2hpbGRyZW5DaGVja2JveCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRhYiA9PT0gXCJmYXZvcml0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5mYXZvcml0ZUl0ZW1zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmZhdm9yaXRlSXRlbXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVJdGVtcy5sZW5ndGggIT09IHRoaXMuZmF2SGVscGVyLmdldEZhdm9yaXRJZHMoKS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIV9maXJzdENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZhdkhlbHBlci5fbG9hZEZhdm9yaXRlRGF0YSh0aGlzLmZhdm9yaXRlSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNlbGVjdGlvbk1nci5zZWxlY3RDdXJyZW50VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNtcCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RyZWUoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnN0YXRlLnNjcm9sbFk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zY3JvbGxUb1koeSwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ2FzY2FkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRFdmVudE1nci5jYXNjYWRlVmFsdWVDaGFuZ2VkKHRoaXMuY2FzY2FkZVN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRG91YmxsZUxpc3QoKSAmJiB0aGlzLmRpc3BsYXlUeXBlID09PSBMb29rdXBHcmlkRGlzcGxheVR5cGUuTmF2VHJlZUxpc3QgJiYgIXRoaXMubmF2VHJlZVRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0Q29tcG9uZW50UmVmLmluc3RhbmNlLnVwZGF0ZVNjcm9sbFBvc2l0aW9uKCk7IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uTWdyLnNlbGVjdEN1cnJlbnRWYWx1ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiAgVGFnIFZpZXcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1vdXNlRXZlbnRGb3JUYWdWaWV3KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnYm94Lm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgICAgIFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2JveE1vdXNlRW50ZXIuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2JveC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICBcIm1vdXNlbGVhdmVcIixcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdib3hNb3VzZUxlYXZlLmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVDbGVhckljb24oZXZlbnQ6IGFueSwgaXNTaG93ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHIgPSBpc1Nob3cgPyBcIlwiIDogXCJub25lXCI7XHJcbiAgICAgICAgY29uc3QgY2xlYXJJY29uID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuaW5wdXQtZ3JvdXAtY2xlYXJcIik7XHJcbiAgICAgICAgaWYgKGNsZWFySWNvbikge1xyXG4gICAgICAgICAgICBjbGVhckljb24uc3R5bGUuZGlzcGxheSA9IHN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblRhZ2JveE1vdXNlRW50ZXIoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGV4dCAmJiB0aGlzLmVuYWJsZUNsZWFyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VGFnYm94Q2xlYXJCdXR0b24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWdib3hDbGVhckJ1dHRvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUNsZWFySWNvbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25UYWdib3hNb3VzZUxlYXZlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVDbGVhckljb24oZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVtb3ZlU2VsZWN0SXRlbSgkZXZlbnQsIHR4dCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCB0ZXh0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuZGlzcGxheVRleHRMaXN0KTtcclxuICAgICAgICBjb25zdCByZW1vdmVkSW5kZXggPSB0aGlzLmRpc3BsYXlUZXh0TGlzdC5pbmRleE9mKHR4dCk7XHJcbiAgICAgICAgdGV4dEFycmF5LnNwbGljZShyZW1vdmVkSW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVRleHQgPSB0ZXh0QXJyYXkuam9pbih0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRoaXMuZGlzcGxheVRleHQ7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuZGlzcGxheVRleHQpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLmRpc3BsYXlWYWx1ZS5zcGxpdCh0aGlzLm11bHRpcGxlQ2hvaWNlU2VwYXJhdG9yKTtcclxuICAgICAgICAgICAgdmFscy5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSB2YWxzLmpvaW4odGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7IHJlbW92ZWRJbmRleCwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVPdGhlckZpZWxkRGF0YVdoZW5UYWdyZW1vdmVkKHJlbW92ZWRJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IGhlbHBGaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcEZpZWxkcyk7XHJcbiAgICAgICAgY29uc3QgdGV4dEZpZWxkSW5kZXggPSBoZWxwRmllbGRzLmluZGV4T2YodGhpcy50ZXh0RmllbGQpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUgJiZcclxuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtICYmXHJcbiAgICAgICAgICAgIHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBiaW5kaW5nRGF0YSA9IHRoaXMubmdDb250cm9sLmZvcm1EaXJlY3RpdmUuZm9ybS5iaW5kaW5nRGF0YTtcclxuICAgICAgICAgICAgaWYgKGJpbmRpbmdEYXRhLnNldFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nUGF0aCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhBcnI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1BhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoQXJyID0gYmluZGluZ1BhdGguc3BsaXQoXCIvXCIpLmZpbHRlcigobikgPT4gbiAhPT0gXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aHMgPSBwYXRoQXJyLmNvbmNhdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRmllbGQuc3BsaXQoXCIuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gYmluZGluZ0RhdGEuZ2V0VmFsdWUoZmllbGRQYXRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nRGF0YS5zZXRWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoQXJyLmNvbmNhdChmaWVsZFBhdGhzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYmluZGluZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0RmllbGRJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVscEZpZWxkcy5zcGxpY2UodGV4dEZpZWxkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGVscEZpZWxkcy5mb3JFYWNoKChoZWxwRmllbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwRmllbGRzW2hlbHBGaWVsZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoZm9ybUZpZWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudXRpbHMuZ2V0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbEFyci5zcGxpY2UocmVtb3ZlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHZhbEFyci5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLnNldFZhbHVlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZGluZ0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybUZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIG9uQWxsQ2hpbGROb2Rlc0NsaWNrKCRldmVudDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5pc0dldEFsbENoaWRsTm9kZXMgPSAhdGhpcy5pc0dldEFsbENoaWRsTm9kZXM7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbmNsdWRlU3Vib3JkaW5hdGVzQ2hhbmdlKHZhbCkge1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZVN1Ym9yZGluYXRlcyA9IHZhbDtcclxuICAgICAgICB0aGlzLmluY2x1ZGVTdWJvcmRpbmF0ZXMkLm5leHQodmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBvblRhZ0NvbnRhaW5lckNsaWNrKCRldmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy50YWdJbnB1dCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ0lucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFnSW5wdXQudGV4dGJveC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZEZpcnN0Tm9kZShub2Rlcyk6IFRyZWVOb2RlW10ge1xyXG4gICAgICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZTogVHJlZU5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRGaXJzdE5vZGUobm9kZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgIH07XHJcblxyXG4gICAgLy8g55So5LqO57uE57uH5Liq5oCn5YyW5pWw5o2ua2V5XHJcbiAgICBnZXRMb29rdXBCaW5kaW5nRmllbGRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm5nQ29udHJvbCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZ0NvbnRyb2wubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmdDb250cm9sLm5hbWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXBGaWVsZHMgJiYgdGhpcy5tYXBGaWVsZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKS5tYXAoayA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcEZpZWxkc1trXTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCdfJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRGaWVsZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Db25kaXRpb25zQ2hhbmdlKCRldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVHJlZSgpICkge1xyXG4gICAgICAgICAgICB0aGlzLnR0RXZlbnRNZ3IuY29uZGl0aW9uc0NoYW5nZSgkZXZlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHRFdmVudE1nci5jb25kaXRpb25zQ2hhbmdlKCRldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyU2VsZWN0ZWQoJGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgaWYoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1zZyA9IHRoaXMubG9jYWxTZXJ2aWNlLmdldFZhbHVlKCdsb29rdXAuc2VsZWN0ZWRJbmZvLmNvbmZpcm0nKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlclNlcnZpY2UuY29uZmlybShtc2cgfHwgJ+aCqOehruiupOimgeWPlua2iOaJgOacieW3sumAieS4reeahOiusOW9leWQl++8nycpLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tdWx0aVNlbE1nci5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREdFJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREdFJlZi5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlbGV0ZVNlbGVjdGVkSXRlbSgkZXZlbnQ6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBpZigkZXZlbnQpIHtcclxuICAgICAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREdFJlZi5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0ZWREdFJlZi5zZWxlY3Rpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB1bkNoZWNrZUlkcyA9IHRoaXMuc2VsZWN0ZWREdFJlZi5zZWxlY3Rpb25zLm1hcChuID0+IG5bdGhpcy5pZEZpZWxkXSk7XHJcbiAgICAgICAgICAgIHRoaXMubXVsdGlTZWxNZ3IuZGVsZXRlU2VsZWN0ZWRJdGVtcyh0aGlzLnNlbGVjdGVkRHRSZWYuc2VsZWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREdFJlZi51bkNoZWNrUm93cyh1bkNoZWNrZUlkcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcoJ+ivt+WLvumAieimgeWIoOmZpOeahOiusOW9le+8gScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0Q29sdW1uV2lkdGgoY29sdW1uczogYW55LCB0eXA6ICdkYXRhJ3wnbmF2J3wnZmF2J3wnc2VsJyA9ICdkYXRhJykge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcnNvbmFsQ29uZiAmJiB0aGlzLnBlcnNvbmFsQ29uZi5jb2xTaXplSW5mbyAmJiB0aGlzLnBlcnNvbmFsQ29uZi5jb2xTaXplSW5mby5kYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkc2l6ZURhdGEgPSB0aGlzLnBlcnNvbmFsQ29uZi5jb2xTaXplSW5mb1t0eXBdO1xyXG4gICAgICAgICAgICBpZihmaWVsZHNpemVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyhmaWVsZHNpemVEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZHMgJiYgZmllbGRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnMuZm9yRWFjaChuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc2l6ZURhdGFbbi5maWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ud2lkdGggPSBmaWVsZHNpemVEYXRhW24uZmllbGRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=