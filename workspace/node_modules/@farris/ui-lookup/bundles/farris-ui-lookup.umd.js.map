{"version":3,"file":"farris-ui-lookup.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-lookup/lib/lookup-displaytype.ts","ng://@farris/ui-lookup/lib/lookup.component.ts","ng://@farris/ui-lookup/lib/lookup-grid-options.ts","ng://@farris/ui-lookup/lib/http/ILookupHttpService.ts","ng://@farris/ui-lookup/lib/lookup-defaut-mapping.ts","ng://@farris/ui-lookup/lib/utils.ts","ng://@farris/ui-lookup/lib/lookup-presonalConfig.service.ts","ng://@farris/ui-lookup/lib/services/util.service.ts","ng://@farris/ui-lookup/lib/services/treenode.helper.ts","ng://@farris/ui-lookup/lib/services/favorite-helper.ts","ng://@farris/ui-lookup/lib/services/selection-manager.ts","ng://@farris/ui-lookup/lib/services/bind-datatable-event.ts","ng://@farris/ui-lookup/lib/services/on-text-change.ts","ng://@farris/ui-lookup/lib/services/bind-treetable-event.ts","ng://@farris/ui-lookup/lib/services/multi-selection.manager.ts","ng://@farris/ui-lookup/lib/services/http-manager.ts","ng://@farris/ui-lookup/lib/lookup-left.component.ts","ng://@farris/ui-lookup/lib/services/lookup-component.manager.ts","ng://@farris/ui-lookup/lib/services/dialog-mangager.ts","ng://@farris/ui-lookup/lib/services/lookup-selection.service.ts","ng://@farris/ui-lookup/lib/lookup-grid.component.ts","ng://@farris/ui-lookup/lib/lookup-tabs.component.ts","ng://@farris/ui-lookup/lib/lookup-tip.directive.ts","ng://@farris/ui-lookup/lib/quick-select/quick-select-panel.component.ts","ng://@farris/ui-lookup/lib/quick-select/lookup-quick-select.directive.ts","ng://@farris/ui-lookup/lib/advanced-layout/lookup-advanced-layout.component.ts","ng://@farris/ui-lookup/lib/advanced-layout/lookup-filter-bar.component.ts","ng://@farris/ui-lookup/lib/selected-list/lookup-selected.directive.ts","ng://@farris/ui-lookup/lib/lookup.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { DataFormatter } from '@farris/ui-common/column';\r\n\r\n/** æ¶èåå­æ®µåç§° */\r\nexport const FAVORITE_FIELD_NAME = '__favorite__';\r\nexport const INPUT_GROUP_ICON = '<i class=\"f-icon f-icon-lookup\"></i>';\r\n\r\n// è·åç»ä»¶å®ä¾çç±»å\r\nexport type ComponentInstanceType = 'datatable'| 'treetable' | 'fav' | 'selected' | 'leftTree' | 'leftDataTable';\r\n\r\nexport enum LookupGridDisplayType {\r\n    List = 'LIST',\r\n    TreeList = 'TREELIST',\r\n    NavList = 'NAVLIST',\r\n    NavTreeList = 'NAVTREELIST',\r\n    NavListTree = 'NAVLISTTREE'\r\n}\r\n\r\n/** æ¶èç¸å³å¾æ  */\r\nexport enum FavoriteIcon {\r\n    /** å·²æ¶è */\r\n    yes = '<span class=\"f-icon f-icon-star f-lookup-favorite\" style=\"font-size:12px\" ></span>',\r\n    /** æªæ¶è */\r\n    no = '<span class=\"f-icon f-icon-star-outline f-lookup-favorite\" style=\"font-size:12px\"></span>',\r\n    /** ç§»é¤æ¶è */\r\n    delete = '<span class=\"f-icon f-icon-star f-lookup-unfavorite\" style=\"font-size:12px\"></span>',\r\n    /** ç§»é¤å·²éè®°å½ */\r\n    remove = '<span class=\"f-icon f-icon-minus-circle\" style=\"font-size:12px; color: #dd2438;cursor: pointer\"></span>'\r\n}\r\n\r\n/** æ¶èç¸å³å¨ä½ */\r\nexport enum FavoriteAction {\r\n    /** æ·»å æ¶è */\r\n    add = 'append item to favorite.',\r\n    /** ç§»é¤æ¶è */\r\n    delete = 'remove favorite.'\r\n}\r\n\r\nexport interface ExtInfoFormatterParam {\r\n    [key: string]: any;\r\n    bindingData?: any;\r\n    instance?: any;\r\n}\r\n\r\nexport type ExtInfoFormatterFn = (param: ExtInfoFormatterParam) => string;\r\nexport type ExtInfoFormatter = string | ExtInfoFormatterFn;\r\n\r\nexport interface CustomDataFormatter {\r\n    /** æ°æ®æ ¼å¼å */\r\n    [fieldName: string]: DataFormatter ;\r\n    /** è¡æ ·å¼ */\r\n    rowStyler?: (e: { data: any }) => {[key: string]: any};\r\n    /** ååæ ¼æ ·å¼ */\r\n    cellStyler?: (e: { data: any }, field: string) => {[key: string]: any};\r\n}\r\n\r\nexport interface QuickSelectOption {\r\n    /** æ¯å¦å¯ç¨ */\r\n    enable?: boolean;\r\n    /** æ¾ç¤ºtop è®°å½æ°ï¼é»è®¤ 10 */\r\n    showItemsCount?: number;\r\n    /** æ¾ç¤ºææ¬å­æ®µ */\r\n    textField?: string;\r\n    /** èªå®ä¹æ ¼å¼å */\r\n    formatter?: (data: any) => string;\r\n    \r\n    footerHeight?: number;\r\n    /** æ¾ç¤ºæç´¢æ´æ° æé® */\r\n    showMore?: boolean;\r\n    /** æå°å®½åº¦, é»è®¤ 200px */\r\n    minWidth?: number;\r\n    /** å¯ç¨åéé®ç§»é¤éä¸­é¡¹ï¼é»è®¤ä¸º false */\r\n    enableBackspace?: boolean;\r\n}\r\n\r\nexport const QuickSelectDefaultOptions: QuickSelectOption = {\r\n    enable: false,\r\n    showMore: true,\r\n    showItemsCount: 10,\r\n    footerHeight: 0,\r\n    minWidth: 200,\r\n    enableBackspace: false\r\n}\r\n\r\n/**\r\n * - both: å¨é¨æ¾ç¤º\r\n * - onlyfield: ä»æ¾ç¤ºå­æ®µ\r\n * - onlyinput: ä»æ¾ç¤ºæç´¢è¾å¥æ¡ */\r\nexport enum SearchBarMode {\r\n    /** æ¾ç¤ºå­æ®µæ¥è¯¢ä¸æç´¢è¾å¥æ¡ */\r\n    both = 'both',\r\n    /** ä»æ¾ç¤ºå­æ®µ */\r\n    onlyinput = 'onlyinput',\r\n    /** ä»æ¾ç¤ºæç´¢è¾å¥æ¡ */\r\n    onlyfield = 'onlyfield'\r\n}","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-08-15 15:24:24\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-11-30 14:01:34\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { Subscription, Observable, of, Subject } from 'rxjs';\r\nimport {\r\n    Component, Input, Output, EventEmitter, TemplateRef,\r\n    ViewChild, Injector, forwardRef, OnInit, ElementRef, ChangeDetectorRef,\r\n    AfterViewChecked, HostBinding, NgZone, OnDestroy\r\n} from '@angular/core';\r\nimport {\r\n    NG_VALUE_ACCESSOR,\r\n    ControlValueAccessor,\r\n    NgControl\r\n} from '@angular/forms';\r\n\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { IResizeEvent } from '@farris/ui-draggable';\r\n\r\nimport { PickingResult, PickedResult } from './lookup-grid-options';\r\n\r\nexport const LOOKUPINPUT_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => LookupComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'farris-lookup',\r\n    template: `\r\n        <div\r\n            class=\"lookupbox input-group\"\r\n            [ngClass]=\"{\r\n                'f-state-disabled': disabled,\r\n                'f-state-readonly': readonly,\r\n                'f-state-editable': !editable\r\n            }\"\r\n        >\r\n            <input\r\n                class=\"form-control\"\r\n                [value]=\"displayText\"\r\n                [disabled]=\"disabled\"\r\n                [readonly]=\"!editable || readonly\"\r\n            />\r\n            <div class=\"input-group-append\">\r\n                <span class=\"f-select input-group-text\" (click)=\"showDialog()\">\r\n                    <i class=\"f-icon f-icon-lookup\"></i>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <farris-dialog\r\n            #dialog\r\n            *ngIf=\"isShow\"\r\n            [title]=\"title\"\r\n            [beforeOpen]=\"beforeOpen\"\r\n            [beforeClose]=\"beforeClose\"\r\n            [width]=\"dialogWidth\"\r\n            [height]=\"dialogHeight\"\r\n            [showButtons]=\"showButtons\"\r\n            [showMaxButton]=\"showMaxButton\"\r\n            [buttons]=\"buttonsRef || defaultButtonRef\"\r\n            [buttonAlign]=\"buttonAlign\"\r\n            (maxed)=\"onMaxDialog($event)\"\r\n            (resized)=\"onResized($event)\"\r\n            (resizing)=\"onResizing($event)\"\r\n        >\r\n            <ng-content></ng-content>\r\n\r\n            <ng-template #defaultButtonRef>\r\n                <div style=\"width: 100%;\">\r\n                    <button\r\n                        class=\"btn btn-secondary btn-lg\"\r\n                        (click)=\"closeDialog()\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button class=\"btn btn-primary btn-lg\">Ok</button>\r\n                </div>\r\n            </ng-template>\r\n        </farris-dialog>\r\n    `,\r\n    styles: [\r\n        `\r\n            .input-group {\r\n                flex-wrap: nowrap;\r\n            }\r\n            :host-context(.ng-invalid) .form-control {\r\n                border-color: #ff0303;\r\n            }\r\n        `\r\n    ],\r\n    providers: [LOOKUPINPUT_VALUE_ACCESSOR]\r\n})\r\nexport class LookupComponent\r\n    implements OnInit, ControlValueAccessor, AfterViewChecked, OnDestroy {\r\n    @HostBinding('class') hostCls = 'f-cmp-inputgroup';\r\n\r\n    /** çªå£å®½åº¦ */\r\n    @Input() dialogWidth: number;\r\n    /** çªå£é«åº¦ */\r\n    @Input() dialogHeight: number;\r\n    /** çªå£æ é¢ãé»è®¤å¼ï¼æ­¤å¤æ¾ç¤ºå¸®å©æ é¢ */\r\n    @Input() title = '';\r\n    /** æé®å¯¹é½æ¹å¼ */\r\n    @Input() buttonAlign = 'right';\r\n    /** æé®æ¨¡æ¿ */\r\n    @Input() buttonsRef: TemplateRef<any>;\r\n    /** æ¯å¦æ¾ç¤ºæé® */\r\n    @Input() showButtons = true;\r\n    /** æ¾ç¤ºå³é­æé® */\r\n    @Input() showCloseButton = true;\r\n    /** æ¾ç¤ºæå¤§åæé® */\r\n    @Input() showMaxButton = true;\r\n    /** åè®¸ææ½å°ºå¯¸ */\r\n    @Input() resizable = true;\r\n    /** åè®¸æå¨çªå£ */\r\n    @Input() draggable = true;\r\n    /** ç¦ç¨ */\r\n    @Input() disabled = false;\r\n    /** åè®¸ç¼è¾ææ¬æ¡ */\r\n    @Input() editable = true;\r\n    /** åªè¯» */\r\n    @Input() readonly = false;\r\n    /** å­æ®µæ å°, { å¸®å©æ°æ®å­æ®µï¼è¡¨åå­æ®µ } */\r\n    @Input() mapFields: { [sourceField: string]: string };\r\n    /** å¼å­æ®µ */\r\n    @Input() valueField: string;\r\n    /** ææ¬å­æ®µ */\r\n    @Input() textField: string;\r\n    @Input() displayText = '';\r\n\r\n    /** è¿è¡æ¶ä¸ä¸æèªå®ä¹å¯¹è±¡ */\r\n    @Input() context: any;\r\n\r\n    /** çªå£æå¼åäºä»¶ */\r\n    @Input() beforeOpen: () => Observable<boolean>;\r\n    /** çªå£å³é­åäºä»¶ */\r\n    @Input() beforeClose: () => Observable<boolean>;\r\n    /** å¸®å©åäºä»¶ */\r\n    @Input() dictPicking: (emptyObj?: {}) => Observable<PickingResult>;\r\n    dictPickingSubscription: Subscription;\r\n    /** å¸®å©åäºä»¶ */\r\n    @Input() dictPicked: (rowData: any) => Observable<PickedResult>;\r\n    dictPickedSubscription: Subscription;\r\n\r\n    /** çªå£æå¼å */\r\n    @Output() dialogOpened = new EventEmitter();\r\n    /** çªå£å³é­å */\r\n    @Output() dialogClosed = new EventEmitter();\r\n    /** çªå£æå¤§å */\r\n    @Output() dialogMaxed = new EventEmitter();\r\n    /** ææ½æ¹åçªå£å°ºå¯¸è¿è¡æ¶ */\r\n    @Output() resizing = new EventEmitter();\r\n    /** ææ½æ¹åçªå£å°ºå¯¸ç»æ */\r\n    @Output() resized = new EventEmitter();\r\n    /** å¸®å©çªå£é»è®¤å°ºå¯¸ */\r\n    private defaultDialogSize = { width: 550, height: 570 };\r\n\r\n    dialogCreated = new Subject<DialogComponent>();\r\n    dialogCreatedSubscription: Subscription;\r\n    dialog: DialogComponent;\r\n    @ViewChild('dialog') set content(content: DialogComponent) {\r\n        if (this.dialog !== content) {\r\n            this.dialog = content;\r\n            if (content) {\r\n                this.dialogCreated.next(this.dialog);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _isShow = false;\r\n    get isShow() {\r\n        return this._isShow;\r\n    }\r\n    set isShow(val) {\r\n        this._isShow = val;\r\n        if (!this.changeDetector['destroyed']) {\r\n            this.changeDetector.detectChanges();\r\n        }\r\n    }\r\n\r\n    ngControl: any;\r\n\r\n    displayValue = '';\r\n    originalText = '';\r\n\r\n    get invalid() {\r\n        return this.ngControl.valid;\r\n    }\r\n\r\n    private ngZone: NgZone;\r\n\r\n    onModelChange = (obj: any) => { };\r\n    onModelTouched = (val: any) => { };\r\n    constructor(\r\n        public injector: Injector,\r\n        public el: ElementRef,\r\n        public changeDetector?: ChangeDetectorRef\r\n    ) {\r\n        this.ngZone = this.injector.get(NgZone);\r\n        // if (!this.personalConfigService) {\r\n        //     const idServ = this.injector.get(IdService);\r\n        //     this.personalConfigService = new PersonalConfigService(idServ);\r\n        // }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.initEvents();\r\n        this.ngControl = this.injector.get(NgControl, null);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.lookupUnsubscribe();\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        if (this.dialog) {\r\n            this.dialog.closed.subscribe(() => {\r\n                this.isShow = false;\r\n                this.dialog = null;\r\n            });\r\n        }\r\n    }\r\n\r\n    initEvents() {\r\n        if (!this.dictPicking) {\r\n            this.dictPicking = () => of({ showDialog: true });\r\n        }\r\n        if (!this.dictPicked) {\r\n            this.dictPicked = () => of({ closeDialog: true });\r\n        }\r\n        if (!this.beforeOpen) {\r\n            this.beforeOpen = () => of(true);\r\n        }\r\n        if (!this.beforeClose) {\r\n            this.beforeClose = () => of(true);\r\n        }\r\n\r\n        if (!this.dialogHeight) {\r\n            this.dialogHeight = this.defaultDialogSize.height;\r\n        }\r\n\r\n        if (!this.dialogWidth) {\r\n            this.dialogWidth = this.defaultDialogSize.width;\r\n        }\r\n    }\r\n\r\n    showDialog(): any {\r\n        if (this.disabled || this.readonly) {\r\n            return false;\r\n        }\r\n        this.dictPicking().subscribe((val: PickingResult) => {\r\n            if (val.showDialog === false) {\r\n                return;\r\n            }\r\n\r\n            this.isShow = true;\r\n            // this.changeDetector.detectChanges();\r\n            this.ngZone.runOutsideAngular(() => {\r\n                setTimeout(() => this.dialog.show());\r\n            });\r\n        });\r\n\r\n        return false;\r\n    }\r\n\r\n    closeDialog() {\r\n        this.isShow = false;\r\n        if (this.dialog) {\r\n            this.dialog.close();\r\n        }\r\n    }\r\n\r\n\r\n    private lookupUnsubscribe() {\r\n        if (this.dictPickedSubscription) {\r\n            this.dictPickedSubscription.unsubscribe();\r\n        }\r\n        if (this.dictPickingSubscription) {\r\n            this.dictPickingSubscription.unsubscribe();\r\n        }\r\n        if (this.dialogCreatedSubscription) {\r\n            this.dialogCreatedSubscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n    onResizing(pos: IResizeEvent) {\r\n        this.resizing.emit(pos.size);\r\n    }\r\n    onResized(pos: IResizeEvent) {\r\n        this.resized.emit(pos.size);\r\n    }\r\n    onMaxDialog(pos: IResizeEvent) {\r\n        this.dialogMaxed.emit(pos.size);\r\n    }\r\n\r\n    writeValue(obj: any): void {\r\n        if (obj) {\r\n            this.displayText = obj;\r\n            this.displayValue = obj;\r\n            this.originalText = this.displayText;\r\n        } else {\r\n            this.displayText = '';\r\n            this.displayValue = '';\r\n            this.originalText = '';\r\n        }\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onModelChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-07-10 11:44:49\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-25 18:10:54\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { DataColumn } from '@farris/ui-common/column';\r\n\r\nexport type ONLY_SELECT_LEAF = 'default' | 'yes' | 'no';\r\nexport type LOAD_DATA_TYPE = 'all' | 'fav' | 'list' | 'nav' | 'search' | 'children'\r\n                            | 'textchange' | 'sort' | 'navsearch' | 'selected' | 'allChildren' | 'navAllChildren';\r\n\r\nexport interface TreeInfo {\r\n    /** æ°æ®å è½½æ¹å¼ï¼ all, async */\r\n    loadDataType?: 'all' | 'async';\r\n    /** åå±æ¹å¼ï¼ pathcode, parentId */\r\n    layerType?: string;\r\n    /** æ°æ®ä¸­å¸¦æåçº§ä¿¡æ¯çå­æ®µ */\r\n    dataField?: string;\r\n    /** ç¶IDå­æ®µ */\r\n    parentField?: string;\r\n    /** åçº§ç å­æ®µ */\r\n    pathField?: string;\r\n    /** çº§æ°å­æ®µ */\r\n    layerField?: string;\r\n    /** æ¯å¦æç»å­æ®µ */\r\n    isDetailField?: string;\r\n    /**\r\n     * åªåè®¸éæ©å¶å­èç¹\r\n     * - default: åºç¨æå¡å¨ç«¯è®¾ç½®ï¼å¦æå¡å¨æªè®¾ç½®ï¼åè½å  `no`\r\n     * - `yes`: æå¡å¨ç«¯è®¾ç½®å¤±æãä»åè®¸éæ©å¶å­èç¹ã\r\n     * - `no`:  æå¡å¨ç«¯è®¾ç½®å¤±æãææèç¹åå¯éæ©ã\r\n     */\r\n    onlySelectLeaf?: boolean | ONLY_SELECT_LEAF;\r\n    /** æ ç»ææ°æ®æ¯å¦å·²åå§åå®æ */\r\n    treeDataIsInit?: boolean;\r\n}\r\n\r\nexport interface CustomStyleData {\r\n    field: string, \r\n    value: string, comparator?: string, \r\n    styles: { [key: string]: any }\r\n}\r\n\r\nexport interface LookupGridResult {\r\n    /** åä¿¡æ¯ */\r\n    columns?: DataColumn[];\r\n    /** æ°æ®åè¡¨ */\r\n    items?: any[];\r\n    /** æ¥è¯¢å­æ®µ */\r\n    searchFields?: { label: string, value: string }[];\r\n    /** åé¡µä¿¡æ¯ */\r\n    pageInfo?: { pageIndex: number, pageSize: number, pageList?: number[], enablePager: boolean };\r\n    /** æ»è®°å½æ° */\r\n    total?: number;\r\n    /** åºå¼ */\r\n    mapFields?: { desgine: string, runtime: string }[];\r\n    /** æ åçº§ä¿¡æ¯ */\r\n    treeInfo?: TreeInfo;\r\n    displayType?: string;\r\n    displayInfo?: DisplayInfo;\r\n    title?: string;\r\n    navigation?: NavigationOptions;\r\n    valueField?: string;\r\n    textField?: string;\r\n    idField?: string;\r\n    /** å·²éæ©æ°æ®åè¡¨ */\r\n    selectedItems?: any;\r\n    /** æ¶èæ°æ® */\r\n    favoriteItems?: any[];\r\n    /** èªå®ä¹è¡æ ·å¼ */\r\n    customStyles?: {\r\n        row?: Array<CustomStyleData>,\r\n        cell?:Array<CustomStyleData>\r\n    }\r\n}\r\n\r\n/** ä¸ªæ§åæ°æ® */\r\nexport interface PersonalConfig {\r\n    tabIndex?: string;\r\n    favorite?: {\r\n        [lang: string]: any[];\r\n    };\r\n    quickSelected?: {\r\n        [lang: string]: any[];\r\n    };\r\n    size?: any;\r\n    selections?: any;\r\n    cascadeStatus?: string;\r\n    colSizeInfo?: {data: { [field: string]: number }, nav: {[field: string]: number}, fav: {[field: string]: number}};\r\n    [key: string]: any;\r\n}\r\n\r\nexport interface NavigationOptions extends LookupGridResult {\r\n    [key: string]: any;\r\n    displayType: 'List' | 'TreeList';\r\n    width: number;\r\n    idField?: string;\r\n    relations?: { groupField: string, helpField: string }[];\r\n    hover?: boolean;\r\n}\r\n\r\nexport interface LookupGridOptions extends LookupGridResult {\r\n    singleSelect?: boolean;\r\n    idField?: string;\r\n    uri?: string; // å¯ä»¥ä¸ºåæ°æ®IDãwebapi å°å\r\n    showFilterBar?: boolean;\r\n    pagination?: boolean;\r\n    pageIndex?: number;\r\n    pageSize?: number;\r\n    pageList?: number[];\r\n    total?: number;\r\n    width?: number;\r\n    height?: number;\r\n    hover?: boolean;\r\n}\r\n\r\nexport class DisplayInfo {\r\n    title?: string;\r\n    favorites?: string;\r\n    okText?: string;\r\n    cancelText?: string;\r\n    allColumns?: string;\r\n}\r\n\r\nexport const lookupGridDefaults: LookupGridOptions = {\r\n    singleSelect: true,\r\n    showFilterBar: true,\r\n    pagination: true,\r\n    pageIndex: 1,\r\n    pageSize: 10,\r\n    pageList: [10, 20, 30, 50, 100]\r\n};\r\n\r\nexport const displayInfoDefault = {\r\n    title: 'æ­¤å¤æ¾ç¤ºæ é¢',\r\n    favorites: 'æ¶èå¤¹',\r\n    okText: 'ç¡®å®',\r\n    cancelText: 'åæ¶',\r\n    allColumns: 'ææå'\r\n};\r\n\r\n/** å¸®å©åäºä»¶è¿åç±»å */\r\nexport interface PickingResult {\r\n    /** true: ç»§ç»­æå¼å¸®å©ï¼false: ä¸æå¼å¸®å©çªå£ */\r\n    showDialog: boolean;\r\n    /** æºå¸¦çä¸äºèªå®ä¹æ°æ®ï¼ç±ä¸å¡å¨æå¡å¨ç«¯å¸®å©åäºä»¶ä¸­å¤ç */\r\n    data?: any;\r\n    message?: any;\r\n}\r\n\r\nexport interface PickedResult {\r\n    closeDialog: boolean;\r\n    message?: any;\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2019-05-23 10:27:07\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-08-15 14:11:43\r\n * @QQ: 1055818239\r\n * @Version: v0.0.1\r\n */\r\nimport { InjectionToken } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { LOOKUP_HTTP_PARAMS } from './RemoteParams';\r\nimport { LookupGridResult } from '../lookup-grid-options';\r\n\r\nexport interface ILookupHttpService {\r\n    context?: any;\r\n    /**\r\n     * æ ¹æ®æå®çå¸®å©åæ°æ®IDåç¸å³åæ°è·åæ°æ®\r\n     * @param uri å¸®å©åæ°æ®ID or Rest API\r\n     * @param data æå¡å¨ç«¯æ¥æ¶åæ° key/value\r\n     */\r\n    getData(uri: string, params?: LOOKUP_HTTP_PARAMS): Observable<LookupGridResult>;\r\n}\r\nexport const ServerSideToken = new InjectionToken<ILookupHttpService>('Lookup Grid HTTP service');\r\n","import { Injectable } from '@angular/core';\r\nimport { trim } from 'lodash-es';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n\r\n@Injectable()\r\nexport class LookupDefaultMapping {\r\n\r\n    constructor(private utils: CommonUtils) {}\r\n\r\n    lookupFieldMap = (helpData, mapFields, dataObj) => {\r\n        if (mapFields) {\r\n            const helpFields = Object.keys(mapFields);\r\n            helpFields.forEach( (f: any) => {\r\n                let val = '';\r\n                if (helpData) {\r\n                    if (helpData instanceof Array) {\r\n                        val = helpData.map( (h: any) => {\r\n                            return this.utils.getValue(f, h);\r\n                        }).join(',');\r\n                    } else {\r\n                        val = this.utils.getValue(f, helpData);\r\n                    }\r\n\r\n                }\r\n\r\n                mapFields[f].split(',').forEach( (ff: any) => {\r\n                    const field = trim(ff);\r\n                    this.utils.setValue(dataObj, field, val);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { CommonUtils, RuntimeStateService } from '@farris/ui-common';\r\nimport { FilterRelation, FilterCondition, Compare, EntityFilter } from '@farris/ui-common/types';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { TreeInfo } from './lookup-grid-options';\r\n\r\n@Injectable()\r\nexport class LookupUtils {\r\n\r\n    constructor(private utils: CommonUtils, private rts: RuntimeStateService, private ngZone: NgZone) { }\r\n\r\n    setActiveLookupInstance(lookupIns: any) {\r\n        if (this.rts) {\r\n            this.rts.setLookupInstance(lookupIns);\r\n        }\r\n    }\r\n\r\n\r\n    destroy() {\r\n        this.rts.destroy();\r\n    }\r\n\r\n    pendingStart() {\r\n        if (this.rts) {\r\n            this.rts.updateFormState({\r\n                lookup: {\r\n                    pending: true\r\n                }\r\n            });\r\n\r\n            // ç¦ç¨é¡µé¢çææé¼ æ äºä»¶\r\n            document.body.style['pointer-events'] = 'none';\r\n        }\r\n    }\r\n\r\n    pendingEnd() {\r\n        if (this.rts) {\r\n            this.rts.updateFormState({\r\n                lookup: {\r\n                    pending: false\r\n                }\r\n            });\r\n\r\n            // æ¿æ´»é¼ æ äºä»¶\r\n            document.body.style['pointer-events'] = '';\r\n        }\r\n    }\r\n\r\n    getPathCode(data, treeInfo = null) {\r\n        const { dataField, pathField } =  treeInfo ;\r\n        if (dataField) {\r\n            return data[dataField][pathField];\r\n        } else {\r\n            return this.utils.getValue(pathField, data);\r\n        }\r\n    }\r\n    getLayerData(data, treeInfo = null ) {\r\n        const { dataField, layerField } = treeInfo;\r\n        if (dataField) {\r\n            return data[dataField][layerField];\r\n        } else {\r\n            return this.utils.getValue(layerField, data);\r\n        }\r\n    }\r\n\r\n\r\n    private createFilterCondition(field: string, value: string) {\r\n        return {\r\n            filterField: field,\r\n            value,\r\n            lbracket: '',\r\n            rbracket: '',\r\n            relation: FilterRelation.Or,\r\n            compare: Compare.Like\r\n        };\r\n    }\r\n\r\n    mergeCondition(condition: EntityFilter, fields: string[], searchData: { field: string, value: string }) {\r\n        if (!condition) {\r\n            condition = {\r\n                pagination: {\r\n                    pageIndex: 1,\r\n                    pageSize: 20\r\n                },\r\n                filterConditions: [],\r\n                sortConditions: []\r\n            };\r\n        } else {\r\n            condition = cloneDeep(condition);\r\n        }\r\n\r\n        const { field = '*', value = '' } = { ...searchData };\r\n\r\n        if (value) {\r\n            if (field === '*') {\r\n                if (fields && fields.length) {\r\n                    const searchConditions: FilterCondition[] = fields.map((f: string) => {\r\n                        return this.createFilterCondition(f, value);\r\n                    });\r\n\r\n                    if (searchConditions.length) {\r\n                        searchConditions[0].lbracket = '(';\r\n                        const lastSearchConditions = searchConditions[searchConditions.length - 1];\r\n                        lastSearchConditions.rbracket = ')';\r\n                        lastSearchConditions.relation = FilterRelation.Empty;\r\n                    }\r\n\r\n                    if (condition.filterConditions && condition.filterConditions.length) {\r\n                        condition.filterConditions[condition.filterConditions.length - 1].relation = FilterRelation.And;\r\n                        condition.filterConditions = condition.filterConditions.concat(searchConditions);\r\n                    } else {\r\n                        condition.filterConditions = searchConditions;\r\n                    }\r\n                }\r\n            } else {\r\n                const searchCondition = this.createFilterCondition(field, value);\r\n                searchCondition.relation = FilterRelation.Empty;\r\n                if (condition.filterConditions && condition.filterConditions.length) {\r\n                    condition.filterConditions[condition.filterConditions.length - 1].relation = FilterRelation.And;\r\n                    condition.filterConditions.push(searchCondition);\r\n                } else {\r\n                    condition.filterConditions = [searchCondition];\r\n                }\r\n            }\r\n        }\r\n\r\n        return condition;\r\n    }\r\n\r\n    private canSelectable(n: any) {\r\n        if (n.hasOwnProperty('farris_selectable')) {\r\n            return !!n['farris_selectable'];\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /** å°æ°æ®è½¬æ å½¢ç»æ */\r\n    makeTreeWithParentID(data: any[], parentId, parentIdField = 'parentId', idField = 'id') {\r\n        const nodes = new Map<string, any>();\r\n        const result = [];\r\n        const unattached = [];\r\n        data.forEach(t => {\r\n            const node = {\r\n                data: t,\r\n                children: [],\r\n                selectable: this.canSelectable(t),\r\n                parent: null,\r\n                parents: []\r\n            };\r\n            const id = t[idField];\r\n            nodes.set(id, node);\r\n            const PID = this.utils.getValue(parentIdField, t);\r\n            if (PID === parentId) {\r\n                result.push(node);\r\n            } else {\r\n                const parent = nodes.get(PID);\r\n                if (parent) {\r\n                    node.parent = PID;\r\n                    node.parents = [...parent.parents, PID];\r\n                    parent.children.push(node);\r\n                } else {\r\n                    unattached.push(node);\r\n                }\r\n            }\r\n        });\r\n\r\n        unattached.forEach(n => {\r\n            const pid = this.utils.getValue(parentIdField, n.data);\r\n            const parent = nodes.get(pid);\r\n            if (parent) {\r\n                n.parent = pid;\r\n                n.parents = [...parent.parents, pid];\r\n                parent.children.push(n);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    makeTree(data, treeInfo: TreeInfo) {\r\n        // const treeInfoField = treeInfo.dataField;\r\n        // const layerField = treeInfo.layerField;\r\n        // const pathField = treeInfo.pathField;\r\n\r\n        const nodes = new Map<string, any>();\r\n        const result = [];\r\n        const unattached = [];\r\n        data.forEach(t => {\r\n            const node = {\r\n                data: t,\r\n                children: [],\r\n                selectable: this.canSelectable(t)\r\n            };\r\n            const pathCode = this.getPathCode(t, treeInfo);\r\n            nodes.set(pathCode, node);\r\n\r\n            if (this.getLayerData(t, treeInfo) === 1) {\r\n                result.push(node);\r\n            } else {\r\n                const parentPathCode = pathCode.substr(0, pathCode.length - 4);\r\n                const parent = nodes.get(parentPathCode);\r\n                if (parent) {\r\n                    parent.children.push(node);\r\n                } else {\r\n                    unattached.push(node);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        unattached.forEach(n => {\r\n            // const pathCode = n.data[treeInfoField][pathField];\r\n            const pathCode = this.getPathCode(n.data, treeInfo);\r\n            const parent = nodes.get(pathCode.substr(0, pathCode.length - 4));\r\n            if (parent) {\r\n                parent.children.push(n);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { IdService } from '@farris/ui-common';\r\nimport { Subject } from 'rxjs';\r\nimport { PersonalConfig } from './lookup-grid-options';\r\n\r\n\r\n@Injectable()\r\nexport class PersonalConfigService {\r\n    // ä¸ªæ§åéç½®\r\n    personalConf: PersonalConfig;\r\n\r\n    selectItemObser$ = new Subject();\r\n\r\n    displayType = 'LIST';\r\n\r\n    singleSelect = true;\r\n    idField: string;\r\n    textField: string;\r\n    mapFields: any;\r\n\r\n    // ä¸ªæ§åéç½®KEY\r\n    private _key = '';\r\n    _newKey = '';\r\n    get personalConfigKey() {\r\n        return this._key;\r\n    }\r\n    set personalConfigKey(val) {\r\n        if (val) {\r\n            this._key = this.buildKey(val);\r\n            if (this.controlID) {\r\n                this._newKey = this.buildKey(this.controlID + '_' + val);\r\n            } else {\r\n                this._newKey = this._key;\r\n            }\r\n        } else {\r\n            this._newKey = this.buildKey(this.controlID);\r\n        }\r\n    }\r\n\r\n    // ç»ä»¶ID\r\n    controlID = '';\r\n\r\n    constructor(private idService: IdService) {}\r\n\r\n    private buildKey(str) {\r\n        let prefix = '';\r\n        if (location.hash) {\r\n            const pathArr = location.hash.split('?');\r\n            prefix = pathArr ? pathArr[0] : '';\r\n        } else {\r\n            const pathArr  = location.pathname.split('/');\r\n            prefix = pathArr ? pathArr[pathArr.length - 1] : '';\r\n        }\r\n        return this.idService.encrypt(prefix + str);\r\n    }\r\n\r\n    initPersonalConf(obj) {\r\n        Object.assign(this, obj);\r\n    }\r\n\r\n    getPersonalData(key?: string): PersonalConfig {\r\n        if (key) {\r\n            this._key = key;\r\n        }\r\n\r\n        if (this.personalConfigKey) {\r\n            const conf = localStorage.getItem(this.personalConfigKey);\r\n\r\n            if (conf && conf !== 'undefined' && conf !== 'null') {\r\n                this.personalConf = conf ? JSON.parse(conf) : {};\r\n                this._updatePersonalConfig(this.personalConf);\r\n\r\n                if (this.controlID) {\r\n                    if (this._key !== this._newKey) {\r\n                        localStorage.removeItem(this._key);\r\n                    }\r\n                    this.savePersonalConfig(this.personalConf);\r\n                }\r\n\r\n                return this.personalConf;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getQuickSelected(localeId?: string): any {\r\n        const d = this.getPersonalData();\r\n        const qs =  d ? d.quickSelected : null;\r\n\r\n        if (localeId) {\r\n            if (qs) {\r\n                const items = qs[localeId];\r\n                if (items && items.length) {\r\n                    return items;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        return qs;\r\n    }\r\n\r\n    getDialogSize() {\r\n        const d = this.getPersonalData();\r\n        return d ? d.size : null;\r\n    }\r\n\r\n    updatePersonalConfig(cfg: Partial<PersonalConfig>) {\r\n        const data = Object.assign(this.personalConf || {}, cfg);\r\n        this.savePersonalConfig(data);\r\n    }\r\n\r\n    savePersonalConfig(data: PersonalConfig) {\r\n        if (this._newKey) {\r\n            let _data = localStorage.getItem(this._newKey) as any;\r\n            if (_data) {\r\n                _data = JSON.parse(_data) as PersonalConfig;\r\n\r\n                if (_data.favorite) {\r\n                    if (!data.favorite) {\r\n                        data.favorite = _data.favorite;\r\n                    } else {\r\n                        Object.keys(_data.favorite).forEach((lang) => {\r\n                            data.favorite[lang] = data.favorite[lang] || [];\r\n                            if (_data.favorite[lang]) {\r\n                                const arr = Array.from(new Set([...data.favorite[lang], ..._data.favorite[lang]]));\r\n                                data.favorite[lang] = arr;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            localStorage.setItem(this._newKey, JSON.stringify(data));\r\n            this.personalConf = data;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getActiveTabIndex(tabName?: string) {\r\n        const d = this.getPersonalData();\r\n        if (!tabName) {\r\n            return d && d.tabIndex ? d.tabIndex  : 'datalist';\r\n        }\r\n        return tabName;\r\n    }\r\n\r\n    updateQueckSelected(selectedRow: any, localeId: string) {\r\n        const quickItems = this.getQuickSelected(localeId);\r\n\r\n        if (quickItems && quickItems.length) {\r\n            const selectedIndex = [];\r\n            quickItems.forEach((element, index) => {\r\n                if (this.singleSelect) {\r\n                    if (element && selectedRow && element[this.idField] === selectedRow[this.idField]) {\r\n                        selectedIndex.push(index);\r\n                    }\r\n                } else {\r\n                    if (selectedRow) {\r\n                        selectedRow.forEach(item => {\r\n                            if (element && element[this.idField] === item[this.idField]) {\r\n                                selectedIndex.push(index);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            selectedIndex.forEach(index => {\r\n                quickItems[index] = null;\r\n            });\r\n\r\n            this.personalConf.quickSelected[localeId] =\r\n                this.personalConf.quickSelected[localeId].filter(v => v !== null);\r\n            if (this.singleSelect) {\r\n                this.personalConf.quickSelected[localeId].unshift(selectedRow);\r\n            } else {\r\n                if (selectedRow) {\r\n                    selectedRow.forEach(element => {\r\n                        this.personalConf.quickSelected[localeId].unshift(element);\r\n                    });\r\n                }\r\n            }\r\n            this.personalConf.quickSelected[localeId].length =\r\n                this.personalConf.quickSelected[localeId].length > 5 ?\r\n                    5 : this.personalConf.quickSelected[localeId].length;\r\n        } else {\r\n            const _qs = this.personalConf.quickSelected || {};\r\n            let newData;\r\n            if (this.singleSelect) {\r\n                newData = Object.assign(_qs, { [localeId]: [selectedRow] });\r\n            } else {\r\n                selectedRow.length = selectedRow.length > 5 ? 5 : selectedRow.length;\r\n                newData = Object.assign(_qs, { [localeId]: selectedRow });\r\n            }\r\n            this.personalConf.quickSelected = newData;\r\n        }\r\n\r\n        this.savePersonalConfig(this.personalConf);\r\n    }\r\n\r\n    /**\r\n     *  æ´æ°æ°æ®ç»æï¼ç°æä¸ªæ§åæ°æ®åè½¬ä¸º ä¸­æç¯å¢ä¸æ°æ®ï¼\r\n     */\r\n    _updatePersonalConfig(per: PersonalConfig) {\r\n        if (per) {\r\n            let flag = false;\r\n            // æ´æ°æ¶èæ°æ®\r\n            if (per.favorite && Array.isArray(per.favorite)) {\r\n                per.favorite = { 'zh-CHS': [...per.favorite] };\r\n                delete per.favorite;\r\n\r\n                flag = true;\r\n            }\r\n            // æ´æ°å¿«æ·å½å¥æ°æ®\r\n            if (per.selected) {\r\n                if (Array.isArray(per.selected)) {\r\n                    per.quickSelected = { 'zh-CHS': [...per.selected] };\r\n                }\r\n                delete per.selected;\r\n                flag = true;\r\n            }\r\n\r\n            if (flag) {\r\n                this.savePersonalConfig(per);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n","import { LookupGridComponent } from '../lookup-grid.component';\r\nimport { LookupGridDisplayType } from '../lookup-displaytype';\r\nimport { TreeTableComponent, TreeNode } from '@farris/ui-treetable';\r\n\r\nexport class UtilService {\r\n\r\n    constructor(public instance: LookupGridComponent) {}\r\n\r\n\r\n}\r\n","import { TreeNode } from '@farris/ui-treetable';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { TreeInfo } from '../lookup-grid-options';\r\n\r\nexport class TreeNodeHelper {\r\n    treeInfo: TreeInfo;\r\n    flatAllNodes = [];\r\n    constructor(private instance: LookupGridComponent) { }\r\n\r\n    getTreeInfo(treeNode: TreeNode) {\r\n        if (treeNode.data[this.treeInfo.dataField]) {\r\n            return treeNode.data[this.treeInfo.dataField];\r\n        }\r\n\r\n        const data = treeNode.data;\r\n        if (data && this.treeInfo.dataField) {\r\n\r\n            const treeInfoDataField = this.treeInfo.dataField.toLowerCase();\r\n            const dataField = Object.keys(treeNode.data).find(n => {\r\n                return n.toLowerCase() === treeInfoDataField;\r\n            });\r\n            if (dataField) {\r\n                return data[dataField];\r\n            } else {\r\n                this.instance.writeConsole(`æªæ¾å°æ å½¢ä¿¡æ¯æ°æ®å­æ®µã${this.treeInfo.dataField}ã`, 'error');\r\n            }\r\n        } else {\r\n            this.instance.writeConsole(`æªæ¾å°æ å½¢ä¿¡æ¯æ°æ®å­æ®µã${this.treeInfo.dataField}ã`, 'error');\r\n        }\r\n    }\r\n\r\n    getTreeNodeLayer(treeNode: TreeNode) {\r\n        return this.getTreeInfo(treeNode)[this.treeInfo.layerField];\r\n    }\r\n    /** æ´æ°èç¹çå±å¼ç¶æã æ ¹æ®ç»ä»¶ä¸­ expandLevel çå¼å³å®\r\n     * -1ï¼ä¸å±å¼ï¼0ï¼å¨é¨å±å¼ï¼>0 å±å¼å°æå®çº§æ°\r\n     */\r\n    updateTreeNodeExpanded(treeNodes: TreeNode[], treeInfo: TreeInfo = null) {\r\n        if (treeInfo) {\r\n            this.treeInfo = treeInfo;\r\n        } else {\r\n            this.treeInfo = this.instance.treeInfo;\r\n        }\r\n        const expandLevel = this.instance.expandLevel;\r\n        if (expandLevel === -1) {\r\n            return;\r\n        }\r\n        if (!this.flatAllNodes.length) {\r\n            this.flatAllNodes = this.treeData2Flat(null, treeNodes, 0, []);\r\n        }\r\n\r\n        treeNodes.forEach((tn: TreeNode) => {\r\n            tn.expanded = this.shoudExpand(expandLevel, this.getTreeNodeLayer(tn));\r\n            if (this.isSelectNodeParent(tn)) {\r\n                tn.expanded = true;\r\n            }\r\n            if (tn.children && tn.children.length) {\r\n                this.updateTreeNodeExpanded(tn.children, treeInfo);\r\n            } else {\r\n                tn.leaf = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    private treeData2Flat(parent, nodes, level, parentIds) {\r\n        const idField = this.instance.idField;\r\n        let arr = [];\r\n        if (nodes && nodes.length) {\r\n\r\n            nodes.forEach((node, index) => {\r\n                // node.parent = parent;\r\n\r\n                let parents = [];\r\n                if (parent) {\r\n                    const parentID = parent.data[idField];\r\n                    const _parents = parentIds || [];\r\n                    parents = parents.concat(_parents.map(n => n));\r\n                    parents.push(parentID);\r\n                }\r\n                const rowNode = {\r\n                    id: node.data[idField],\r\n                    node,\r\n                    level,\r\n                    parents,\r\n                };\r\n                arr.push(rowNode);\r\n                arr = arr.concat(this.treeData2Flat(node, node.children, level + 1, parents));\r\n            });\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    private shoudExpand(expandLevel: number, nodeLayer: number) {\r\n        if (expandLevel === -1) {\r\n            // -1 ä¸ºä¸å±å¼\r\n            return false;\r\n        } else if (expandLevel === 0) {\r\n            // 0 ä¸ºå¨é¨å±å¼\r\n            return true;\r\n        } else {\r\n            // æ²¡æå¯ç¨åå±å è½½ï¼éè¿å±å¼å±çº§ç¡®å®æ¯å¦å±å¼è¯¥èç¹\r\n            return nodeLayer <= expandLevel;\r\n        }\r\n    }\r\n\r\n    private isSelectNodeParent(treeNode) {\r\n        if (this.instance.navSelectedIds) {\r\n            const allParentIds: string[] = this.flatAllNodes.find(f => f.id === this.instance.navSelectedIds).parents;\r\n            if (allParentIds && allParentIds.length) {\r\n                return allParentIds.includes(treeNode.id);\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getLeafNode(treeNode: TreeNode) {\r\n        if (treeNode && (!treeNode.children || !treeNode.children.length)) {\r\n            return treeNode;\r\n        } else {\r\n            if (treeNode.children.length === 1) {\r\n                return this.getLeafNode(treeNode.children[0]);\r\n            } else {\r\n                return treeNode.children;\r\n            }\r\n        }\r\n    }\r\n\r\n    flatTreeNodes(items, result = []) {\r\n        items = items || [];\r\n        return  items.reduce((c, n) => {\r\n            c.push(n);\r\n            if (n.children && n.children.length) {\r\n                this.flatTreeNodes(n.children, c);\r\n            }\r\n            return c;\r\n        }, result);\r\n    }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { UserFavoriteData } from '../http/RemoteParams';\r\nimport { FavoriteAction, FavoriteIcon, FAVORITE_FIELD_NAME, LookupGridDisplayType } from '../lookup-displaytype';\r\nimport { LookupGridResult } from '../lookup-grid-options';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { LookupSelectionService } from './lookup-selection.service';\r\n\r\nexport class FavoriteHelper {\r\n\r\n    private lookupSelectionSer: LookupSelectionService;\r\n\r\n    constructor(private instance: LookupGridComponent) {\r\n        this.lookupSelectionSer = this.instance.lookupSelectionSer;\r\n    }\r\n\r\n    getFavoriteColumns(): any[] {\r\n        const columns = this.instance.gridOptions.columns.map(item => {\r\n            const rtn = Object.assign({}, item);\r\n            if (item.field === FAVORITE_FIELD_NAME) {\r\n                rtn.formatter = () => FavoriteIcon.delete;\r\n            }\r\n            return rtn;\r\n        });\r\n\r\n        this.instance.initColumnWidth(columns, 'fav');\r\n        return columns;\r\n    }\r\n\r\n    favoriteColumnFormatter = (v: any, data: any  ) => {\r\n        const f =  v ? FavoriteIcon.yes : FavoriteIcon.no;\r\n        if (this.instance.isTree()) {\r\n            const id = data[this.instance.idField];\r\n            if (id) {\r\n                const tt = this.instance.componentRef.instance as TreeTableComponent;\r\n                const rn = tt.findRowNode(id);\r\n                if (rn) {\r\n                    if (rn.node.selectable) {\r\n                        return f;\r\n                    } else {\r\n                        return '';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return f;\r\n    }\r\n\r\n    initPersonalInfo() {\r\n        if (this.instance.personalConfigService) {\r\n            const controlID = this.instance.el.nativeElement.id || this.instance.controlId;\r\n            if (!controlID) {\r\n                this.instance.writeConsole('LookupGrid - æªè®¾ç½®ç»ä»¶id, æ¶èåè½å°ä¸è½æ­£å¸¸ï¼è¯·è®¾ç½®ç»ä»¶id.');\r\n            }\r\n            const pcstr = this.instance.getLookupBindingFields();\r\n            this.instance.personalConfigService.controlID = controlID;\r\n            this.instance.personalConfigService.personalConfigKey = pcstr;\r\n\r\n            const conf = {\r\n                displayType: this.instance.displayType,\r\n                singleSelect: this.instance.singleSelect,\r\n                idField: this.instance.idField,\r\n                textField: this.instance.textField,\r\n                mapFields: Object.assign({}, this.instance.mapFields || {})\r\n            };\r\n\r\n            this.instance.personalConfigService.initPersonalConf(conf);\r\n\r\n            // ä¸ªæ§åéç½®çè®¢éäºä»¶å¤ç\r\n            this.listenPersonalConfigHandler();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * çå¬æ¶èTABé¡µä¸­ç¸å³äºä»¶ï¼\r\n     * æ°æ®éä¸­ï¼åæ¶éä¸­ï¼ç§»é¤æ¶èï¼åå»äºä»¶\r\n     */\r\n    initFavoriteComponentEvent(cmpRef: ComponentRef<any>) {\r\n        switch (this.instance.displayType) {\r\n            case LookupGridDisplayType.NavList:\r\n            case LookupGridDisplayType.NavTreeList:\r\n            case LookupGridDisplayType.List: {\r\n                const fdt = cmpRef.instance as DataTableComponent;\r\n                fdt.remoteSort = false;\r\n                fdt.selectedRow.subscribe(e => {\r\n                    if (this.instance.singleSelect) {\r\n                        this.lookupSelectionSer.clearSelections();\r\n                    }\r\n                    this.lookupSelectionSer.updateSelections(e.data);\r\n                });\r\n                fdt.unSelectRow.subscribe(e => {\r\n                    this.lookupSelectionSer.unSelect(e.data[this.instance.idField]);\r\n                });\r\n\r\n                if (!fdt.singleSelect) {\r\n                    fdt.checkAll.subscribe(e => {\r\n                        this.lookupSelectionSer.updateSelections(fdt.data, e);\r\n                    });\r\n                }\r\n\r\n                fdt.cellClick.subscribe((e: any) => {\r\n                    if (e.col.field === FAVORITE_FIELD_NAME) {\r\n                        e.event.stopPropagation();\r\n                        // tslint:disable-next-line: no-string-literal\r\n                        const classList = e.event.target['classList'];\r\n                        if (classList.contains('f-lookup-unfavorite')) {\r\n                            if (this.instance.items) {\r\n                                this.instance.items.forEach(item => {\r\n                                    if (item[this.instance.idField] === e.row[this.instance.idField]) {\r\n                                        item[FAVORITE_FIELD_NAME] = false;\r\n                                    }\r\n                                });\r\n\r\n                                const dt = this.instance.componentRef.instance as DataTableComponent;\r\n                                if (dt) {\r\n                                    dt.loadData({\r\n                                        pageSize: this.instance.gridOptions.pageSize,\r\n                                        pageIndex: this.instance.gridOptions.pageIndex,\r\n                                        total: this.instance.gridOptions.total,\r\n                                        data: this.instance.gridOptions.items\r\n                                    });\r\n                                }\r\n                            }\r\n\r\n                            this.instance.favoriteItems =\r\n                                this.instance.favoriteItems.filter(n => n[this.instance.idField] !== e.row[this.instance.idField]);\r\n\r\n                            this.lookupSelectionSer.updateFavoriteData(e.row, FavoriteAction.delete);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // åå»äºä»¶\r\n                fdt.rowDblClick.subscribe((rowData: any) => {\r\n                    if (this.instance.gridOptions.singleSelect) {\r\n                        this.instance.selectItem(rowData);\r\n                    }\r\n                });\r\n                break;\r\n            }\r\n            case LookupGridDisplayType.TreeList: {\r\n                if (cmpRef) {\r\n                    const ftt = cmpRef.instance as TreeTableComponent;\r\n                    ftt.remoteSort = false;\r\n                    ftt.nodeSelected.subscribe(e => {\r\n                        if (this.instance.singleSelect) {\r\n                            this.lookupSelectionSer.clearSelections();\r\n                        }\r\n                        this.lookupSelectionSer.updateSelections(e.node.data);\r\n                    });\r\n                    ftt.nodeUnChecked.subscribe(e => {\r\n                        if (e.nodes && e.nodes.length) {\r\n                            this.instance.multiSelMgr.remove(e.nodes.map(n => n.id));\r\n                        } else if (e && e.node && e.node.data && e.node.data.id) {\r\n                            // const tt = this.instance.componentRef.instance as TreeTableComponent;\r\n                            // tt.unSelectNode(e.node.data.id);\r\n                            this.lookupSelectionSer.unSelect(e.node.data.id);\r\n                        }\r\n                    });\r\n\r\n                    ftt.nodeChecked.subscribe( e => {\r\n                        if (!this.instance.singleSelect) {\r\n                            if (e.nodes && e.nodes.length) {\r\n                                this.instance.multiSelMgr.updateSelections(e.nodes.map(n => n.data));\r\n                            } else {\r\n                                if (Array.isArray(e.node)) {\r\n                                    this.instance.multiSelMgr.updateSelections(e.node.map(n => n.data));\r\n                                } else {\r\n                                    this.instance.multiSelMgr.updateSelections([e.node.data]);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    ftt.cellClick.subscribe(row => {\r\n                        if (row.col.field === FAVORITE_FIELD_NAME) {\r\n                            row.event.stopPropagation();\r\n                            const classList = row.event.target['classList'];\r\n                            if (classList.contains('f-lookup-unfavorite')) {\r\n                                const _this = this.instance;\r\n                                (function every(items) {\r\n                                    if (!items) {\r\n                                        return;\r\n                                    }\r\n                                    let hasFinish = false;\r\n                                    items.forEach(item => {\r\n                                        if (hasFinish) {\r\n                                            return;\r\n                                        }\r\n                                        if (item.data[_this.idField] === row.node[_this.idField]) {\r\n                                            item.data[FAVORITE_FIELD_NAME] = false;\r\n                                            hasFinish = true;\r\n                                        } else if (item.children && item.children.length > 0) {\r\n                                            every(item.children);\r\n                                        }\r\n                                    });\r\n                                })(this.instance.items);\r\n                                const tt = this.instance.componentRef.instance as TreeTableComponent;\r\n                                tt.loadData(this.instance.items);\r\n\r\n                                this.lookupSelectionSer.updateFavoriteData(row.node.data, FavoriteAction.delete);\r\n                            }\r\n                        }\r\n                    });\r\n                    ftt.dblClick.subscribe((treeNode: TreeNode) => {\r\n                        if (this.instance.gridOptions.singleSelect && treeNode.selectable) {\r\n                            if (this.instance.okButton) {\r\n                                this.instance.okButton.nativeElement.click();\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    ftt.checkAll.subscribe( e => {\r\n                        const data = e.instance.checkeds.map(n => n.data);\r\n                        this.instance.multiSelMgr.updateSelections(data);\r\n                        this.instance.checkedChange.emit({ data, isCheck: true  });\r\n                    });\r\n                    ftt.unCheckAll.subscribe(() => {\r\n                        // this.instance.multiSelMgr.clear();\r\n                        const nodeItems = ftt.state.rowNodes.map(n => n.node.data);\r\n                        this.lookupSelectionSer.updateSelections(nodeItems, false);\r\n                        this.instance.checkedChange.emit({ data: [], isCheck: false  });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private getFavoritData() {\r\n        if (this.instance.personalConf) {\r\n            const favData = this.instance.personalConf.favorite;\r\n            const _data = (favData && favData[this.instance.localService.localeId]) ? favData[this.instance.localService.localeId] : [];\r\n            return _data;\r\n        }\r\n        return [];\r\n    }\r\n\r\n    getFavoritIds() {\r\n        return this.getFavoritData();\r\n    }\r\n\r\n    _loadFavoriteData(data = null) {\r\n        const fdt = this.instance.favoritesComponentRef.instance as DataTableComponent;\r\n        this.loadFavoriteDatatable(fdt, data);\r\n        fdt.cd.markForCheck();\r\n        this.instance.closeLoading();\r\n    }\r\n\r\n    // å è½½æ¶ègridæ°æ®\r\n    loadFavoritesData(res = null) {\r\n        const favIds = this.getFavoritIds();\r\n        switch (this.instance.displayType) {\r\n            case LookupGridDisplayType.NavList:\r\n            case LookupGridDisplayType.NavTreeList:\r\n            case LookupGridDisplayType.List: {\r\n                const fdt = this.instance.favoritesComponentRef.instance as DataTableComponent;\r\n                if (this.instance.favoriteDataFrom === 'locale') {\r\n                    if (res) {\r\n                        this._loadFavoriteData(res.items);\r\n                    } else {\r\n                        // this.instance.httpMgr.getFavoriteData(favIds).subscribe(resData => {\r\n                        //     if (resData) {\r\n                        //         this._loadFavoriteData(resData.items);\r\n                        //     }\r\n                        //     this.instance.closeLoading();\r\n                        // });\r\n                    }\r\n                } else {\r\n                    const favData = this.getFavoritData();\r\n                    this.loadFavoriteDatatable(fdt, res ? res.items : favData);\r\n                }\r\n                break;\r\n            }\r\n            case LookupGridDisplayType.TreeList: {\r\n                if (this.instance.favoritesComponentRef && this.instance.favoritesComponentRef.instance instanceof TreeTableComponent) {\r\n                    const ftt = this.instance.favoritesComponentRef.instance as TreeTableComponent;\r\n                    this.bindFavTreetable(ftt);\r\n\r\n                    if (this.instance.favoriteDataFrom === 'locale') {\r\n                        if (res) {\r\n                            this.loadFavoriteForTreeTable(res.items || [], ftt);\r\n                        } else {\r\n                            // this.instance.httpMgr.getFavoriteData(favIds).subscribe(resData => {\r\n                            //     if (resData) {\r\n                            //         const items = resData.items;\r\n                            //         this.loadFavoriteForTreeTable(items, ftt);\r\n                            //     }\r\n                            //     this.instance.closeLoading();\r\n                            // });\r\n                        }\r\n                    } else {\r\n                        if (res) {\r\n                            this.loadFavoriteForTreeTable(res.items, ftt);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private loadFavoriteDatatable(fdt: DataTableComponent, data?: any) {\r\n        if (data !== undefined) {\r\n            this.instance.favoriteItems = data;\r\n        }\r\n\r\n        if (fdt.columns && !fdt.columns.length) {\r\n            fdt.columns = this.instance.favoriteColumns;\r\n        }\r\n\r\n        fdt.loadData({\r\n            total: 0,\r\n            pageSize: 20,\r\n            pageIndex: 1,\r\n            data: this.instance.favoriteItems\r\n        });\r\n\r\n\r\n        this.instance.selectionMgr.selectCurrentValue();\r\n        fdt.cd.detectChanges();\r\n    }\r\n\r\n\r\n    private bindFavTreetable(ftt: TreeTableComponent) {\r\n        ftt.allColumnsTitle = this.instance.allColumnsTitle;\r\n        ftt.idField = this.instance.idField;\r\n\r\n        const columns = this.instance.gridOptions.columns.map(item => {\r\n            const rtn: any = { ...item };\r\n            if (item.field === FAVORITE_FIELD_NAME) {\r\n                rtn.formatter = (v: any, data: any): any => {\r\n                    const favids = this.getFavoritIds();\r\n                    if (favids && favids.length) {\r\n                        const index = favids.findIndex(el => el === data[this.instance.idField]);\r\n                        if (index >= 0) {\r\n                            return FavoriteIcon.delete;\r\n                        }\r\n                    }\r\n                    return '';\r\n                };\r\n            }\r\n            return rtn;\r\n        });\r\n        this.instance.initColumnWidth(columns, 'fav');\r\n        this.instance.favoriteColumns = columns;\r\n        ftt.columns = columns;\r\n\r\n\r\n        if (this.instance.gridOptions.treeInfo) {\r\n            ftt.onlySelectLeaf = this.instance.gridOptions.treeInfo.onlySelectLeaf;\r\n        }\r\n\r\n        if (!ftt.singleSelect) {\r\n            ftt.checkOnSelect = true;\r\n            ftt.selectOnCheck = true;\r\n            ftt.showCheckbox = true;\r\n\r\n            // å¯ç¨å¤éåï¼åæ¶å¯ç¨çº§èéæ©\r\n            if (this.instance.enableCascade) {\r\n                this.instance.ttEventMgr.cascadeValueChanged(this.instance.cascadeStatus);\r\n            } else {\r\n                ftt.cascadeCheck = false;\r\n                ftt.cascadeDown = false;\r\n                ftt.cascadeUp = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkNodeIsLeaf(nodes: any ) {\r\n        if (nodes && nodes.length) {\r\n            return nodes.map((node: TreeNode) => {\r\n                if (node.hasOwnProperty(\"addtional\")) {\r\n                    node.selectable = !node[\"addtional\"];\r\n                }\r\n    \r\n                if (node.children && node.children.length) {\r\n                    this.checkNodeIsLeaf(node.children);\r\n                } else {\r\n                    node.leaf = true;\r\n                }\r\n    \r\n                return node;\r\n            });\r\n        }\r\n        return nodes;\r\n    }\r\n\r\n    initFavoriteTreeData(items) {\r\n        const treeInfo = this.instance.gridOptions.treeInfo;\r\n\r\n        if (treeInfo && !treeInfo['treeDataIsInit']) {\r\n            if (treeInfo.layerType.toLowerCase() === 'pathcode') {\r\n                items = this.instance.lookupUtils.makeTree(items, treeInfo);\r\n            } else {\r\n                items = this.instance.lookupUtils.makeTreeWithParentID(\r\n                    items,\r\n                    '',\r\n                    treeInfo.dataField ? `${treeInfo.dataField}.${treeInfo.parentField}`: treeInfo.parentField,\r\n                    this.instance.idField\r\n                );\r\n            }\r\n        }\r\n\r\n        // return this.instance.checkNodeCanBeSelect(items, true);\r\n        return this.checkNodeIsLeaf(items);\r\n    }\r\n\r\n    loadFavoriteForTreeTable(items, ftt: any) {\r\n        items = this.initFavoriteTreeData(items);\r\n        this.instance.favoriteItems = items;\r\n        ftt.loadData(items);\r\n        ftt.expandAll();\r\n        this.instance.selectionMgr.selectCurrentValue();\r\n\r\n        return items;\r\n    }\r\n\r\n    // æ´æ°åè¡¨ä¸­çæ¶èæ°æ®æ è¯\r\n    updateFavoritesStatus(data: any[]) {\r\n\r\n        if (!data || !this.instance.useFavorite) {\r\n            return;\r\n        }\r\n\r\n        const favIds = this.getFavoritIds();\r\n\r\n        if (favIds && favIds.length) {\r\n            // å¤çæ°æ®åè¡¨ä¸­çæ¶èæ°æ®æ è¯\r\n            if (this.instance.displayType !== LookupGridDisplayType.TreeList) {\r\n                data.map(item => {\r\n                    if (favIds && favIds.length && favIds.find(v => v === item[this.instance.idField])) {\r\n                        item[FAVORITE_FIELD_NAME] = true;\r\n                    }\r\n                });\r\n            } else {\r\n                const _this = this.instance;\r\n                (function each(_data) {\r\n                    _data.forEach(item => {\r\n                        if (favIds && favIds.length && favIds.find(v => v === item.data[_this.idField])) {\r\n                            item.data[FAVORITE_FIELD_NAME] = true;\r\n                        }\r\n                        if (item.children && item.children.length > 0) {\r\n                            each(item.children);\r\n                        }\r\n                    });\r\n                })(data);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private _updateFavorites(value: any, action, data) {\r\n        const localeID = this.instance.localService.localeId;\r\n        this.instance.personalConf.favorite = this.instance.personalConf.favorite || {};\r\n        const items = value.filter(n => !n['_addtional_']);\r\n        const newVal = items.map(n => n[this.instance.idField]).filter(n => n !== null && n !== undefined);\r\n\r\n        const favItems = this.instance.personalConf.favorite[localeID] || [];\r\n        this.instance.personalConf.favorite[localeID] = Array.from(new Set([...favItems , ...newVal]));\r\n\r\n        if (action === FavoriteAction.delete && data) {\r\n            this.instance.personalConf.favorite[localeID] = this.instance.personalConf.favorite[localeID].filter(n => n !== data[this.instance.idField]);\r\n        }\r\n\r\n        return this.instance.personalConf.favorite[localeID];\r\n    }\r\n\r\n    // æ¶èæ°æ®ç®¡ç\r\n    private listenPersonalConfigHandler() {\r\n        this.lookupSelectionSer.favoriteItems$.subscribe(n => {\r\n            if (!this.instance.favoritesComponentRef) {\r\n                return;\r\n            }\r\n\r\n            const { items, action, data } = n;\r\n            const favids = this._updateFavorites(items, action, data);\r\n\r\n            this.instance.httpMgr.submitFavoriteData(action);\r\n\r\n            if (this.instance.displayType === LookupGridDisplayType.List || this.instance.displayType.includes('NAV')) {\r\n                const dt = this.instance.favoritesComponentRef.instance as DataTableComponent;\r\n                this.loadFavoriteDatatable(dt, items);\r\n            } else if (this.instance.displayType === LookupGridDisplayType.TreeList) {\r\n                const ftt = this.instance.favoritesComponentRef.instance as TreeTableComponent;\r\n                // const favids = items.map(d => d.id);\r\n                this.instance.showLoading();\r\n                this.instance.httpMgr.getData({ favoriteIds: favids }, 'fav').subscribe(resData => {\r\n                    if (resData) {\r\n                        const _items = resData.items;\r\n                        this.loadFavoriteForTreeTable(_items, ftt);\r\n                    } else {\r\n                        this.instance.favoriteItems = [];\r\n                        ftt.loadData([]);\r\n                    }\r\n                    this.instance.closeLoading();\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","import { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\n\r\n\r\nexport class SelectionManager {\r\n    constructor(private ins: LookupGridComponent) {\r\n\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    getBindingData() {\r\n        let jsonData = this.ins.bindingData;\r\n        if (\r\n            this.ins.ngControl &&\r\n            this.ins.ngControl.formDirective &&\r\n            this.ins.ngControl.formDirective.form &&\r\n            this.ins.ngControl.formDirective.form.bindingData\r\n        ) {\r\n            const bindingData = this.ins.ngControl.formDirective.form.bindingData;\r\n            jsonData = bindingData;\r\n\r\n            if (bindingData.getObject) {\r\n                jsonData = bindingData.getObject().toJSON();\r\n            }\r\n        }\r\n        return jsonData;\r\n    }\r\n\r\n    initDisplayValue() {\r\n        const jsonData = this.getBindingData();\r\n        if (jsonData && this.ins.mapFields) {\r\n            const idField = this.ins.idField;\r\n            let targetField = this.ins.mapFields[idField];\r\n\r\n            if (targetField) {\r\n                if (targetField.indexOf(',') > -1 ) {\r\n                    targetField = targetField.split(',')[0];\r\n                }\r\n\r\n                const val = this.ins.utils.getValue(targetField, jsonData);\r\n                if (val) {\r\n                    this.ins.displayValue = val;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private _clearSelections() {\r\n        const { cmpRefInstance: t } = this.getDataCmpInstance();\r\n        if (t) {\r\n            if (this.ins.isTree()) {\r\n                // æ è¡¨\r\n                t.clearAll(false);\r\n                if (!t.cdRef.destroyed) {\r\n                    t.cdRef.detectChanges();\r\n                }\r\n            } else {\r\n                // åè¡¨\r\n                t.dtBody.selectedRowIndex = -1;\r\n                t.dtBody.selections = undefined;\r\n                if (!t.cd.destroyed) {\r\n                    t.cd.detectChanges();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¸®å©çªå£æå¼åï¼æ ¹æ® displayValue éä¸­æ°æ®\r\n     */\r\n    selectCurrentValue(selectedIds = []) {\r\n\r\n        if (!this.ins.enableToSelect) {\r\n            return;\r\n        }\r\n\r\n\r\n        const { cmpRefInstance: t, items } = this.getDataCmpInstance();\r\n        if (!t || !items || !items.length) {\r\n            return;\r\n        }\r\n\r\n        this._clearSelections();\r\n\r\n        if (!selectedIds || !selectedIds.length) {\r\n            const selectedRows = this.ins.lookupSelectionSer.getSelections();\r\n            if (selectedRows.length) {\r\n                selectedIds = selectedRows.map(n => n[this.ins.idField]);\r\n            }\r\n        }\r\n\r\n        // const _ids = this.getSelectedIds();\r\n        // selectedIds = selectedIds.concat(_ids);\r\n        // selectedIds = Array.from(new Set(selectedIds));\r\n\r\n        if (selectedIds && selectedIds.length) {\r\n            if (this.ins.isTree()) {\r\n                // æ è¡¨\r\n                this.selected4Treetable(t, selectedIds);\r\n                if (!t.cdRef.destroyed) {\r\n                    t.cdRef.detectChanges();\r\n                }\r\n            } else {\r\n                // åè¡¨\r\n                this.selected4Datatable(t, items, selectedIds);\r\n                if (!t.cd.destroyed) {\r\n                    t.cd.detectChanges();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getDataCmpInstance() {\r\n        let ref = null;\r\n        let items = null;\r\n        if (this.ins.activeTab === 'datalist') {\r\n            if (this.ins.isTree()) {\r\n                ref = this.ins.lookupCmpMgr.getComponentInstance('treetable');\r\n                items = (ref as TreeTableComponent).serializedValue;\r\n            } else {\r\n                items = this.ins.items;\r\n                ref = this.ins.lookupCmpMgr.getComponentInstance();\r\n            }\r\n        } else if (this.ins.activeTab === 'favorite') {\r\n            ref = this.ins.lookupCmpMgr.getComponentInstance('fav');\r\n            items = this.ins.favoriteItems;\r\n        }\r\n        return { cmpRefInstance: ref, items };\r\n    }\r\n\r\n    private selected4Datatable(t: any, items: any, values: any) {\r\n        if (this.ins.singleSelect) {\r\n            items.forEach((item, index) => {\r\n                if (item[this.ins.idField] === values[0]) {\r\n                    if (!t.dtBody.isSelected(item)) {\r\n                        t.dtBody.selectedRowIndex = -1;\r\n                        t.dtBody.selectedRow('', index, item);\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            // const values = this.getSelectedIds();\r\n            values.forEach(id => {\r\n                const r = items.find(n => n[this.ins.idField] == id);\r\n                if (r) {\r\n                    t.checkRow(id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private selected4Treetable(t: any, valueArr: any) {\r\n        if (this.ins.singleSelect) {\r\n            t.selectNode(valueArr[0], false, false);\r\n        } else {\r\n            // const valueArr = this.getSelectedIds();\r\n            t.checkedNodes(valueArr, false, false, true);\r\n            t.selectNodes(valueArr);\r\n        }\r\n    }\r\n\r\n    getSelectedIds() {\r\n        let values = [];\r\n        const s = this.ins.multipleChoiceSeparator; // å¤éåéç¬¦\r\n        if (!this.ins.singleSelect && this.ins.displayValue && ('' + this.ins.displayValue).indexOf(s) > -1) {\r\n            values = this.ins.displayValue.split(s);\r\n        } else {\r\n            if (this.ins.displayValue !== null && this.ins.displayValue !== '' && this.ins.displayValue !== undefined) {\r\n                values = [this.ins.displayValue];\r\n            }\r\n        }\r\n\r\n        // // å¯ç¨æ¾ç¤ºå¤éåè¡¨\r\n        // if (this.ins.showSelected) {\r\n        //     const rows = this.ins.lookupSelectionSer.getSelections();\r\n        //     if (rows && rows.length) {\r\n        //         values = rows.map(n => n[this.ins.idField]);\r\n        //     }\r\n        // }\r\n\r\n        return values;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { DataTableComponent } from '@farris/ui-datatable';\r\nimport { of } from 'rxjs';\r\nimport { catchError, take, tap } from 'rxjs/operators';\r\nimport { FavoriteAction, FAVORITE_FIELD_NAME } from '../lookup-displaytype';\r\nimport { LookupGridResult } from '../lookup-grid-options';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { LookupSelectionService } from './lookup-selection.service';\r\n\r\nexport class DataTableEventManager {\r\n\r\n    private lookupSelectionSer: LookupSelectionService;\r\n\r\n    private _sortState = null;\r\n\r\n    constructor(private ins: LookupGridComponent) {\r\n        this.lookupSelectionSer = this.ins.lookupSelectionSer;\r\n    }\r\n\r\n    conditionsChange(conditions) {\r\n        this.ins.conditions = conditions;\r\n        if (conditions && conditions.length === 1 && conditions[0].code == '*') {\r\n            this.ins.conditions = [];\r\n            this.onSearch({ field: '*', value: conditions[0].value });    \r\n        } else {\r\n            this.onSearch();\r\n        }\r\n    }\r\n\r\n    onSearch($event: { field: string; value: string } = { field: '*', value: '' }) {\r\n        if ($event && $event.field !== '*' && !$event.value) {\r\n            this.ins.messagerService.warning(this.ins.mustWriteSomething);\r\n            return;\r\n        }\r\n\r\n        const p = {\r\n            pageInfo: { pageIndex: 1, pageSize: this.ins.gridOptions.pageSize },\r\n            search: $event\r\n        };\r\n\r\n        if (this._sortState) {\r\n            const {sortName, sortOrder} = this._sortState;\r\n            if (sortName) {\r\n                p['sortName'] = sortName;\r\n                p['sortOrder'] = sortOrder;\r\n            }\r\n        }\r\n\r\n        if (this.ins.uri) {\r\n            if (!this.ins.searching) {\r\n                this.ins.searching = true;\r\n\r\n                if (this.ins['navNodePathCode']) {\r\n                    p['navNodePathCode'] = this.ins['navNodePathCode'];\r\n                }\r\n\r\n                this.ins.httpMgr.getData(p, 'list').pipe(\r\n                    catchError(err => {\r\n                        this.ins.searching = false;\r\n                        return of({ \"_ERROR_\": err });\r\n                    }),\r\n                    tap(() => {\r\n                        this.ins.searching = false;\r\n                    })\r\n                ).subscribe(\r\n                    data => {\r\n                        this.ins.searching = false;\r\n                        this.ins.closeLoading();\r\n                        if (!data['_ERROR_']) {\r\n                            this._loadData(data);\r\n                        } else {\r\n                            throw new Error(data['_ERROR_']);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else {\r\n            if (this.ins.enableMultiFieldSearch) {\r\n                this.ins.query.emit({ conditions: this.ins.conditions, instance: this.ins })\r\n            } else {\r\n                this.ins.search.emit(p);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _loadData(data: LookupGridResult) {\r\n        const self = this.ins;\r\n        self.closeLoading();\r\n        self.favHelper.updateFavoritesStatus(data.items);\r\n        self.loadDataTableData(data);\r\n        // éä¸­æ°æ®\r\n        this.ins.selectionMgr.selectCurrentValue();\r\n    }\r\n\r\n    bindDataTableEvent() {\r\n        const self = this.ins;\r\n        const dt = self.componentRef.instance as DataTableComponent;\r\n\r\n     \r\n        dt.selectedRow.subscribe((e: any) => {\r\n            if (this.ins.singleSelect) {\r\n                this.lookupSelectionSer.clearSelections();\r\n            }\r\n            this.ins.checkedChange.emit({ data: [e.data], isCheck: true });\r\n            this.lookupSelectionSer.updateSelections([e.data]);\r\n            dt.cd.detectChanges();\r\n        });\r\n    \r\n\r\n        dt.unSelectRow.subscribe(e => {\r\n            this.lookupSelectionSer.unSelect(e.data[self.idField]);\r\n            this.ins.checkedChange.emit({ data: [e.data], isCheck: false });\r\n        });\r\n\r\n        dt.checkAll.subscribe((e: boolean) => {\r\n            this.lookupSelectionSer.updateSelections(dt.data, e);\r\n            this.ins.checkedChange.emit({ data: dt.data, isCheck: e });\r\n        });\r\n\r\n        dt.pageChanged.subscribe((e: any) => {\r\n            if (self.uri) {\r\n                self.httpMgr.getData(e, 'list').subscribe((data: LookupGridResult) => {\r\n                    this._loadData(data);\r\n                });\r\n            } else {\r\n                self.pagerChanged.emit(self.httpMgr.buildQueryParams(e, 'list'));\r\n            }\r\n        });\r\n\r\n        dt.pageSizeChanged.subscribe(e => {\r\n            if (self.uri) {\r\n                self.httpMgr.getData(e, 'list').subscribe(\r\n                    data => {\r\n                        this._loadData(data);\r\n                    },\r\n                    err => {\r\n                        self.closeLoading();\r\n                    }\r\n                );\r\n            } else {\r\n                self.pagerChanged.emit(self.httpMgr.buildQueryParams(e, 'list'));\r\n            }\r\n        });\r\n\r\n        dt.search.subscribe((e: any) => {\r\n            // if (JSON.stringify(self._searchState || {}) !== JSON.stringify(e || {})) {\r\n            //     this.ins.searching = false;\r\n            // }\r\n            self._searchState = {...(e || {})};\r\n            this.onSearch(e);\r\n        });\r\n\r\n        dt.searchValueChange.subscribe((e: any) => {\r\n            if (e && e.value) {\r\n                self._searchState = {...e};\r\n            } else {\r\n                self._searchState = null;\r\n            }\r\n        });\r\n\r\n        // åå»äºä»¶\r\n        dt.rowDblClick.subscribe((rowData: any) => {\r\n            if (self.gridOptions.singleSelect) {\r\n                // this.lookupSelectionSer.updateSelections([rowData]);\r\n                self.selectItem(rowData);\r\n            }\r\n        });\r\n\r\n        // æ¶èäºä»¶\r\n        if(!dt.cellClick.observers.length) {\r\n            dt.cellClick.subscribe((e: any) => {\r\n                if (e.col.field === FAVORITE_FIELD_NAME) {\r\n                    const classList = e.event.target['classList'];\r\n                    if (classList.contains('f-lookup-favorite')) {\r\n                        e.event.stopPropagation();\r\n                        self.items.forEach(item => {\r\n                            const id = self.utils.getValue(self.idField, item);\r\n                            if (id === self.utils.getValue(self.idField, e.row)) {\r\n                                item[FAVORITE_FIELD_NAME] = !item[FAVORITE_FIELD_NAME];\r\n                            }\r\n                        });\r\n                        dt.loadData({\r\n                            pageSize: self.gridOptions.pageSize,\r\n                            pageIndex: self.gridOptions.pageIndex,\r\n                            total: self.gridOptions.total,\r\n                            data: self.gridOptions.items\r\n                        });\r\n\r\n                        // æ´æ°æ¶èæ°æ®\r\n                        const faction = e.row[FAVORITE_FIELD_NAME] ? FavoriteAction.add : FavoriteAction.delete;\r\n\r\n                        if (faction ===  FavoriteAction.add) {\r\n                            this.ins.favoriteItems = [...this.ins.favoriteItems, e.row];\r\n                        } else {\r\n                            this.ins.favoriteItems = this.ins.favoriteItems.filter(n => {\r\n                                return self.utils.getValue(self.idField, n) !== self.utils.getValue(self.idField, e.row);\r\n                            });\r\n                        }\r\n\r\n                        this.lookupSelectionSer.updateFavoriteData(e.row, faction);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        dt.columnSorted.subscribe((sort: { sortName: string; sortOrder: any }) => {\r\n\r\n            this._sortState = sort;\r\n\r\n            if (!this.ins.remoteSort) {\r\n                return;\r\n            }\r\n\r\n            const { sortName, sortOrder } = { ...sort };\r\n\r\n            const col = this.ins.columns.find(n => n.field === sortName);\r\n\r\n            const _sortName = col ? col.fieldPath ? col.fieldPath : col.field : sortName;\r\n\r\n            const param = {\r\n                sortName: _sortName,\r\n                sortOrder,\r\n                search: self._searchState,\r\n                pageInfo: {\r\n                    pageSize: self.pageSize,\r\n                    pageIndex: 1\r\n                }\r\n            };\r\n\r\n            self.httpMgr.getData(param, 'search').subscribe(d => {\r\n                self.loadDataTableData(d);\r\n                self.closeLoading();\r\n                // éä¸­æ°æ® TFS 615008\r\n                this.ins.selectionMgr.selectCurrentValue();\r\n            });\r\n        });\r\n\r\n        dt.clearSearchValue.subscribe(() => {\r\n            self._searchState = null;\r\n            this.onSearch();\r\n        });\r\n\r\n        dt.cellStyler = (val: any) => {\r\n            const { field } = val;\r\n            if (field === FAVORITE_FIELD_NAME) {\r\n                return {\r\n                    'text-overflow': 'unset'\r\n                };\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\n","import { EMPTY, of } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { LookupGridResult, PickingResult } from '../lookup-grid-options';\r\n\r\n\r\n\r\n /** æ£æ¥å¸®å©è¾å¥æ¡å¼åååè¿åçæ¥è¯¢ç»æ */\r\nfunction checkSearchResult(data = null) {\r\n    if (this.searchOnServer) {\r\n        // this._searchResult = data;\r\n        // this.showDialog();\r\n        this.isShow = true;\r\n    } else {\r\n        if (data === false) {\r\n            this.cancelSelect();\r\n        } else {\r\n            this.setModelValue(this.displayText);\r\n            this.runDictPickedEvent(null);\r\n        }\r\n    }\r\n}\r\n\r\nexport function onTextChanged() {\r\n\r\n    const self = this;\r\n\r\n    const isPending = () => {\r\n        return this.lookupUtils.rts.getFormState('lookup.pending');\r\n    };\r\n\r\n    const searchData = (e) => {\r\n\r\n        if (this.isShow) {\r\n            return;\r\n        }\r\n\r\n        if (this.isTextChange && this.displayText && (!this.nosearch || e.originalEvent) && !isPending()) {\r\n            this.lookupUtils.pendingStart();\r\n\r\n            this.dictPickingSubscription = this.dictPicking({\r\n                instance: this\r\n            }).pipe(\r\n                switchMap((pr: PickingResult) => {\r\n                    let o = true;\r\n                    if (pr === undefined || pr === null) {\r\n                        o = true;\r\n                    }\r\n\r\n                    if (typeof pr === 'boolean') {\r\n                        o = pr;\r\n                    }\r\n\r\n                    if (typeof pr === 'object') {\r\n                        if (pr.showDialog === undefined) {\r\n                            o = true;\r\n                        } else {\r\n                            o = pr.showDialog;\r\n                        }\r\n\r\n                        if (pr.data) {\r\n                            /** ä¿å­å¸®å©åä¼ éçæ°æ® */\r\n                            this.customData = pr.data;\r\n                        }\r\n                    }\r\n\r\n                    if (o) {\r\n                        return this.httpMgr.getData(\r\n                            {\r\n                                search: {\r\n                                    field: '*',\r\n                                    value: this.displayText,\r\n                                    type: 'equal'\r\n                                }\r\n                            },\r\n                            'search'\r\n                        );\r\n                    } else {\r\n                        return of({ SHOWDIALOG: o, MESSAGE:  pr.message || '' });\r\n                    }\r\n                })\r\n            ).subscribe(\r\n                (data: any) => {\r\n                    this.closeLoading();\r\n                    this.lookupUtils.pendingEnd();\r\n                    if (data.hasOwnProperty('SHOWDIALOG')) {\r\n                        if (data.SHOWDIALOG && data.MESSAGE) {\r\n                            this.notifyService.warning(data.MESSAGE);\r\n                        }\r\n\r\n                        return;\r\n                    }\r\n\r\n                    if (data.items && data.items.length === 1 && (!data.items[0].children || !data.items[0].children.length)) {\r\n                        let rowdata = data.items[0];\r\n                        if (this.isTree()) {\r\n                            const leafNode = this.treeNodeHelper.getLeafNode(rowdata);\r\n\r\n                            let isOnlySelectLeaf = false;\r\n\r\n                            if (!this.treeInfo) {\r\n                                this.setTreeInfo(data);\r\n                            }\r\n\r\n                            if (typeof this.treeInfo.onlySelectLeaf === 'boolean' ) {\r\n                                isOnlySelectLeaf = this.treeInfo.onlySelectLeaf;\r\n                            } else if (typeof this.treeInfo.onlySelectLeaf === 'string') {\r\n                                if (this.treeInfo.onlySelectLeaf === 'yes') {\r\n                                    isOnlySelectLeaf = true;\r\n                                } else if (this.treeInfo.onlySelectLeaf === 'no') {\r\n                                    isOnlySelectLeaf = false;\r\n                                } else {\r\n                                    if (this.treeInfo.onlySelectLeaf === 'default') {\r\n                                        isOnlySelectLeaf = data.treeInfo.onlySelectLeaf;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            if (isOnlySelectLeaf && !leafNode.leaf) {\r\n                                // this.displayText = '';\r\n                                checkSearchResult.bind(self, data)();\r\n                                return;\r\n                            }\r\n                            \r\n\r\n                            if (Array.isArray(leafNode)) {\r\n                                checkSearchResult.bind(self, data)();\r\n                                return;\r\n                            } else {\r\n                                rowdata = leafNode.data;\r\n                            }\r\n                        }\r\n                        if (!this.singleSelect) {\r\n                            rowdata = [ rowdata ];\r\n                        }\r\n                        this.selectItem(rowdata);\r\n\r\n                        this.dialogClosed.emit();\r\n                    } else {\r\n                        checkSearchResult.bind(self, data)();\r\n                    }\r\n                }, (err: any) => {\r\n                    this.closeLoading();\r\n                    this.lookupUtils.pendingEnd();\r\n                    this.messagerService.error(err ? err.Message : err);\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    let inputBlurHandler = null;\r\n\r\n    if (this.inputGroup && this.inputGroup.textbox && !this.nosearch) {\r\n        this.lookupUtils.setActiveLookupInstance(this);\r\n        inputBlurHandler = this.render2.listen(this.inputGroup.textbox.nativeElement, 'blur', searchData );\r\n    }\r\n\r\n    if (this.inputGroup) {\r\n        this.inputGroup.enterHandle.subscribe( searchData);\r\n\r\n        this.inputGroup.keydownHandle.subscribe((e: any) => {\r\n            let canOpen = false;\r\n            if (e.code === 'ArrowRight') {\r\n\r\n                if (this.quickSelect && !this.quickSelect.enable) {\r\n                    this.writeConsole('å¯ç¨å¿«æ·éæ©åï¼å³æ¹åé®ç¦ç¨æå¼å¸®å©', 'warn');\r\n                    return;\r\n                }\r\n\r\n                if (this.editable) {\r\n                    canOpen = !e.target.value || e.target.selectionStart === e.target.value.length;\r\n                } else {\r\n                    canOpen = true;\r\n                }\r\n            } else {\r\n                canOpen = e.code === this.shortcutKey.open;\r\n            }\r\n            if (canOpen) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                this.showDialog();\r\n            }\r\n        });\r\n    }\r\n\r\n    return inputBlurHandler;\r\n\r\n}\r\n","import { TreeTableComponent, TreeNode } from '@farris/ui-treetable';\r\nimport { FavoriteAction, FAVORITE_FIELD_NAME } from '../lookup-displaytype';\r\nimport { LOAD_DATA_TYPE, LookupGridResult } from '../lookup-grid-options';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { Observable, of, Subject } from 'rxjs';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { take, tap, catchError } from 'rxjs/operators';\r\nimport { LookupSelectionService } from './lookup-selection.service';\r\nimport { FilterCondition } from '@farris/ui-common/types';\r\n\r\n\r\nexport class TreeTableEventManager {\r\n    private lookupSelectionSer: LookupSelectionService;\r\n    private _sortState = null;\r\n        /**\r\n     * æ è¯å½åæ°æ®æ¯å¦æ¥è¯¢ç»æ\r\n     */\r\n    private IS_SEARCH_RESULT = false;\r\n\r\n\r\n    constructor(private ins: LookupGridComponent) {\r\n        this.lookupSelectionSer = this.ins.lookupSelectionSer;\r\n    }\r\n\r\n    conditionsChange(conditions) {\r\n        this.ins.conditions = conditions;\r\n        if (this.ins.uri) {\r\n            if (conditions && conditions.length === 1 && conditions[0].code == '*') {\r\n                this.ins.conditions = [];\r\n                return this.searchTreeData({ field: '*', value: conditions[0].value });    \r\n            }\r\n            return this.searchTreeData({ field: '*', value: '' });\r\n        } else {\r\n            this.ins.query.emit({ conditions, instance: this.ins });\r\n        }\r\n    }\r\n\r\n    searchTreeData(search: { field: string; value: string }) {\r\n        const tt = this.ins.componentRef.instance as TreeTableComponent;\r\n        // å¤æ­uri ååºsearch.emit();\r\n        if (this.ins.searching) {\r\n            return;\r\n        } else {\r\n            this.ins.searching = true;\r\n        }\r\n\r\n        this.ins.showLoading();\r\n        if (tt&& tt.psRef && tt.psRef.directiveRef) {\r\n            tt.psRef.directiveRef.scrollToTop(0);\r\n        }\r\n        return this.ins.httpMgr.getData({ search, sortName: tt.sortName, sortOrder: tt.sortOrder }, 'search').pipe(\r\n            tap(() => {\r\n                this.ins.searching = false;\r\n            }),\r\n            catchError((err) => {\r\n                this.ins.searching = false;\r\n                return of(err);\r\n            })\r\n        ).subscribe(resData => {\r\n            this.ins.closeLoading();\r\n            if (resData) {\r\n                // this.ins.items = resData.items;\r\n                tt.clearAll();\r\n\r\n                const treeInfo = this.ins.gridOptions.treeInfo;\r\n                if (!treeInfo['treeDataIsInit']) {\r\n                    if (treeInfo.layerType.toLowerCase() === 'pathcode') {\r\n                        this.ins.items = this.ins.lookupUtils.makeTree(this.ins.items, treeInfo);\r\n                    } else {\r\n                        this.ins.items = this.ins.lookupUtils.makeTreeWithParentID(\r\n                            this.ins.items,\r\n                            '',\r\n                            treeInfo.dataField ? `${treeInfo.dataField}.${treeInfo.parentField}` : treeInfo.parentField,\r\n                            this.ins.idField\r\n                        );\r\n                    }\r\n                }\r\n\r\n\r\n                const checkNodes = (nodes): TreeNode[] => {\r\n                    if (nodes && nodes.length) {\r\n                        return nodes.map((node: TreeNode) => {\r\n                            if (node.hasOwnProperty('addtional')) {\r\n                                node.selectable = !node['addtional'];\r\n                            }\r\n\r\n                            if (node.children && node.children.length) {\r\n                                checkNodes(node.children);\r\n                            } else {\r\n                                if (this._isLoadAllTreeData(tt) && (!search || search.value === '' || search.value === undefined)) {\r\n                                    node.leaf = true;\r\n                                }\r\n                            }\r\n                            return node;\r\n                        });\r\n                    }\r\n                    return nodes;\r\n                };\r\n\r\n                const _nodes = checkNodes(resData.items);\r\n                if (_nodes && _nodes.length && _nodes[0].children && _nodes[0].children.length) {\r\n                    _nodes[0].expanded = true;\r\n                    _nodes[0].children = this.ins.expandFirstNode(_nodes[0].children);\r\n                }\r\n                this.ins.items = _nodes;\r\n\r\n\r\n                // å è½½æ¶èæ°æ®\r\n                if (this.ins.useFavorite) {\r\n                    // æ´æ°æ°æ®çæ¶èç¶æ\r\n                    this.ins.favHelper.updateFavoritesStatus(this.ins.items);\r\n                }\r\n\r\n                tt.loadData(this.ins.items);\r\n                // // å±å¼æ¥è¯¢ç»æã\r\n                // if (search.value && this.ins.items.length) {\r\n                //     tt.toggleExpand(this.ins.items[0], true);\r\n                // }\r\n                tt.resize();\r\n\r\n                this.IS_SEARCH_RESULT = true;\r\n\r\n                this.ins.selectionMgr.selectCurrentValue();\r\n            }\r\n\r\n            this.ins.search.emit(search);\r\n        });\r\n    }\r\n\r\n    private getChildren(\r\n        parentPath,\r\n        parentLayer,\r\n        searchData: { searchField: string; searchValue: string }\r\n    ): Observable<any> {\r\n        const uri = this.ins.gridOptions.uri;\r\n        const search = { parentLayer, category: 'children', ...searchData };\r\n        if (this.ins.treeInfo.layerType === 'parentId') {\r\n            search['parentId'] = parentPath;\r\n        } else {\r\n            search['parentPath'] = parentPath;\r\n        }\r\n        \r\n        const param: any = {\r\n            searchValue: '',\r\n            customData: this.ins.customData,\r\n            enableFullTree: this.ins.enableFullTree,\r\n            loadTreeDataType: this.ins.loadTreeDataType\r\n        };\r\n        \r\n        const tt = this.ins.componentRef.instance as TreeTableComponent;\r\n        if (tt && tt.sortName) {\r\n            Object.assign(search, {\r\n                sortName: tt.sortName,\r\n                sortOrder: tt.sortOrder\r\n            });\r\n           \r\n        }\r\n\r\n        if (this.IS_SEARCH_RESULT) {\r\n            param.enableFullTree = false;\r\n            param.loadTreeDataType = 'layerload';\r\n\r\n            if (this.ins.treeInfo.layerType === 'parentId') {\r\n                // æ å½¢å¸®å©æ¥è¯¢åï¼å±å¼èç¹æ¶å°ç¸å³æ¥è¯¢åæ°ä¼ éå°åç«¯ 2022-09-13\r\n                search.searchValue = '';\r\n                search.searchField = '*';\r\n            }\r\n            // param.searchValue = JSON.stringify(search);\r\n        }\r\n\r\n        param.searchValue = JSON.stringify(search);\r\n\r\n        if (this.ins.helpId) {\r\n            param['helpId'] = this.ins.helpId;\r\n        }\r\n       \r\n\r\n        if (this.ins.conditions && this.ins.conditions.length) {\r\n            param.searchConditions = cloneDeep(this.ins.conditions);\r\n        }\r\n       \r\n        return this.ins.http.getData(uri, param);\r\n    }\r\n\r\n\r\n    private _isLoadAllTreeData = (tt) => {\r\n        if (this.ins.loadTreeDataType === 'default') {\r\n            return tt.loadDataType === 'all';\r\n        } else {\r\n            return this.ins.loadTreeDataType === 'loadall';\r\n        }\r\n    };\r\n\r\n    private _isAsyncLoadTreeData = (tt) => {\r\n        if (this.ins.loadTreeDataType === 'default') {\r\n            return tt.loadDataType === 'async';\r\n        } else {\r\n            return this.ins.loadTreeDataType === 'layerload';\r\n        }\r\n    };\r\n\r\n\r\n    bindTreetableEvent() {\r\n        const tt = this.ins.componentRef.instance as TreeTableComponent;\r\n        const _searchTreeData = (searchparam: any) => {\r\n            if (this.ins.remoteSearch) {\r\n                this.ins._searchState = searchparam;\r\n                this.searchTreeData(searchparam);\r\n            } else {\r\n                if (this.ins.useInsideSearchHandler) {\r\n                    tt.searchHandle.search(searchparam.field, searchparam.value, 'client');\r\n                } else {\r\n                    this.ins.search.emit(searchparam);\r\n                }\r\n            }\r\n        };\r\n\r\n        const isLoadAllTreeData = () => {\r\n            return this._isLoadAllTreeData(tt);\r\n        };\r\n\r\n        const isAsyncLoadTreeData = () => {\r\n            return this._isAsyncLoadTreeData(tt);\r\n        };\r\n\r\n        tt.dblClickExpand = !this.ins.singleSelect; // ç¦ç¨åå»å±å¼èç¹\r\n        tt.allColumnsTitle = this.ins.allColumnsTitle; // this.displayInfo.allColumns;\r\n        tt.idField = this.ins.idField;\r\n        tt.columns = this.ins.columns;\r\n        tt.searchFields = this.ins.gridOptions.searchFields;\r\n        if (this.ins.treeInfo) {\r\n            tt.loadDataType = this.ins.treeInfo.loadDataType;\r\n            tt.virtualized = true;\r\n            if (!this.ins.isTextChange) {\r\n                this.ins.allData = cloneDeep(this.ins.items);\r\n            } else {\r\n                this.ins.allData = [];\r\n            }\r\n        }\r\n\r\n        if (this.ins.gridOptions.treeInfo) {\r\n            tt.onlySelectLeaf = this.ins.gridOptions.treeInfo.onlySelectLeaf;\r\n            tt.loadDataType = this.ins.gridOptions.treeInfo.loadDataType;\r\n        }\r\n\r\n        if (!tt.singleSelect) {\r\n            tt.checkOnSelect = true;\r\n            tt.selectOnCheck = true;\r\n            tt.showCheckbox = true;\r\n            tt.showCheckAll =  this.ins.showCheckAll;\r\n            // å¯ç¨å¤éåï¼åæ¶å¯ç¨çº§èéæ©\r\n            if (this.ins.enableCascade) {\r\n                this.cascadeValueChanged(this.ins.cascadeStatus);\r\n            } else {\r\n                tt.cascadeCheck = false;\r\n                tt.cascadeDown = false;\r\n                tt.cascadeUp = false;\r\n            }\r\n        }\r\n\r\n        tt.enableFindText = this.ins.enableFindText;\r\n        // tt.findField = this.textField;\r\n        tt.nodeSelected.subscribe((e: any) => {\r\n            // if (this.ins.favoritesComponentRef && this.ins.singleSelect) {\r\n            //     const ftt = this.ins.favoritesComponentRef.instance as TreeTableComponent;\r\n            //     ftt.clearSelections();\r\n            // }\r\n            if (this.ins.singleSelect) {\r\n                this.lookupSelectionSer.clearSelections();\r\n            }\r\n            this.lookupSelectionSer.updateSelections([e.node.data]);\r\n            this.ins.checkedChange.emit({ data: [e.node.data] , isCheck: true  });\r\n        });\r\n\r\n        tt.nodeChecked.subscribe( e => {\r\n            if (!this.ins.singleSelect) {\r\n                let data = null;\r\n                if (e.nodes && e.nodes.length) {\r\n                    data = e.nodes.map(n => n.data);\r\n                } else {\r\n                    if (Array.isArray(e.node)) {\r\n                        data = e.node.map(n => n.data);\r\n                    } else {\r\n                        data = [e.node.data];\r\n                    }\r\n                }\r\n                this.ins.multiSelMgr.updateSelections(data);\r\n                this.ins.checkedChange.emit({ data, isCheck: true  });\r\n            }\r\n        });\r\n\r\n        tt.nodeUnChecked.subscribe((e: any) => {\r\n            if (e && e.node) {\r\n                let nodeData = null;\r\n                if (e.node.data) {\r\n                    nodeData = e.node.data;\r\n                } else {\r\n                    if (e.node.node && e.node.node.data) {\r\n                        nodeData = e.node.node.data;\r\n                    }\r\n                }\r\n\r\n                if (!nodeData) {\r\n                    return;\r\n                }\r\n\r\n                if (!this.ins.singleSelect) {\r\n                    this.ins.multiSelMgr.remove(e.node.id);\r\n\r\n                    // åå±å è½½ï¼å¤éï¼åå«ä¸çº§æ¶ï¼åæ¶å¾é éè¦å°å½åèç¹çææå­çº§æ°æ®ä¹è¦åæ¶éæ©ï¼å³ä»å·²éè®°å½ä¸­ç§»é¤\r\n                    if (tt.loadDataType !== 'all' && this.ins.treeInfo.layerType === 'pathcode' && this.ins.enableCascade &&\r\n                        (this.ins.cascadeStatus === 'enable' || this.ins.cascadeStatus === 'down')) {\r\n                        if (e.node.children && e.node.children.length) {\r\n                            const nodes = e.node.children.map(n => n.data);\r\n                            this.ins.lookupSelectionSer.updateSelections(nodes, false);\r\n                        } else {\r\n                            const pathcode = this.ins.getPathCode(nodeData, this.ins.treeInfo)\r\n                            this.ins.lookupSelectionSer.unselectByPathcode(pathcode);\r\n                        }\r\n                    }\r\n\r\n                    if (e.nodes && e.nodes.length) {\r\n                        this.ins.multiSelMgr.remove(e.nodes.map(n => n.id));\r\n                        this.ins.checkedChange.emit({ data: e.nodes.map(n => n.data), isCheck: false });\r\n                    } else {\r\n                        this.ins.checkedChange.emit({ data: [nodeData], isCheck: false });\r\n                    }\r\n                } else {\r\n                    const ftt = this.ins.favoritesComponentRef && (this.ins.favoritesComponentRef.instance as TreeTableComponent);\r\n                    if (ftt && ftt.findRowNode(e.node.id)) {\r\n                        ftt.unSelectNode(e.node.id);\r\n                    }\r\n\r\n                    this.ins.checkedChange.emit({ data: [nodeData], isCheck: false });\r\n                }\r\n            }\r\n        });\r\n\r\n        tt.checkAll.subscribe( e => {\r\n            const data = e.instance.checkeds.map(n => n.data);\r\n            this.ins.multiSelMgr.updateSelections(data);\r\n            this.ins.checkedChange.emit({ data, isCheck: true  });\r\n        });\r\n        tt.unCheckAll.subscribe(() => {\r\n            this.ins.multiSelMgr.clear();\r\n            this.ins.checkedChange.emit({ data: [], isCheck: false  });\r\n        });\r\n\r\n        tt.search.subscribe(searchparam => {\r\n            if (searchparam.field !== '*' && !searchparam.value) {\r\n                this.ins.messagerService.warning(this.ins.mustWriteSomething);\r\n            } else {\r\n                searchparam.value = searchparam.value.trim();\r\n                _searchTreeData(searchparam);\r\n            }\r\n        });\r\n        if (!tt.cellClick.observers.length) {\r\n            tt.cellClick.subscribe((e: any) => {\r\n                if (e.col.field === FAVORITE_FIELD_NAME) {\r\n                    e.event.stopPropagation();\r\n                    // tslint:disable-next-line: no-string-literal\r\n                    const classList = e.event.target['classList'];\r\n                    if (classList.contains('f-lookup-favorite')) {\r\n                        // classList.toggle('f-icon-star');\r\n                        // classList.toggle('f-icon-star-outline');\r\n                        const _this = this.ins;\r\n\r\n                        (function each(arr) {\r\n                            if (arr) {\r\n                                arr.forEach(item => {\r\n                                    const id = _this.utils.getValue(_this.idField, item.data);\r\n                                    if (id === e.node.id) {\r\n                                        item.data[FAVORITE_FIELD_NAME] = !item.data[FAVORITE_FIELD_NAME];\r\n                                        return true;\r\n                                    } else if (item.children && item.children.length > 0) {\r\n                                        return each(item.children);\r\n                                    } else {\r\n                                        return false;\r\n                                    }\r\n                                });\r\n                            }\r\n                        })(this.ins.items);\r\n                        tt.loadData(this.ins.items);\r\n\r\n                        // æ´æ°æ¶èæ°æ®\r\n                        this.lookupSelectionSer.updateFavoriteData( e.node.data,\r\n                            e.node.data[FAVORITE_FIELD_NAME] ? FavoriteAction.add : FavoriteAction.delete);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        tt.dblClick.subscribe((treeNode: TreeNode) => {\r\n            if (this.ins.gridOptions.singleSelect && treeNode.selectable) {\r\n                if (this.ins.okButton) {\r\n                    // this.lookupSelectionSer.select(treeNode.data);\r\n                    // this.ins.okButton.nativeElement.click();\r\n                    this.ins.selectItem(treeNode.data);\r\n                }\r\n            }\r\n        });\r\n        const loadAllData = isLoadAllTreeData();\r\n        tt.columnSorted.subscribe((sort: { sortName: string; sortOrder: any; }) => {\r\n            this._sortState = sort;\r\n            if (isLoadAllTreeData()) {\r\n                tt.clientSort();\r\n            } else {\r\n                const { sortName, sortOrder } = { ...sort };\r\n\r\n                const col = this.ins.columns.find(n => n.field === sortName);\r\n                const _sortName = col ? col.fieldPath ? col.fieldPath : col.field : sortName;\r\n\r\n                const param = Object.assign({ sortName: _sortName, sortOrder }, { search: this.ins._searchState });\r\n\r\n                let reqTyp: LOAD_DATA_TYPE = 'all';\r\n                if (this.ins._searchState && this.ins._searchState.value) {\r\n                    reqTyp = 'search';\r\n                }\r\n\r\n                this.ins.httpMgr.getData(param, reqTyp).subscribe(d => {\r\n                    this.ins.closeLoading();\r\n                    tt.clearAll();\r\n                    const items = this.ins.checkNodeCanBeSelect(d.items, false);\r\n                    if (this.ins.useFavorite) {\r\n                        this.ins.favHelper.updateFavoritesStatus(items);\r\n                    }\r\n                    this.ins.items = items;\r\n                    tt.loadData(items);\r\n                    tt.resize();\r\n                    this.ins.selectionMgr.selectCurrentValue();\r\n                });\r\n            }\r\n        });\r\n\r\n        tt.clearSearchValue.subscribe(() => {\r\n            if (tt&& tt.psRef && tt.psRef.directiveRef) {\r\n                tt.psRef.directiveRef.scrollToTop(0);\r\n            }\r\n\r\n            this.ins._searchState = null;\r\n            this.IS_SEARCH_RESULT = false;\r\n            let _items = [];\r\n            if (this.ins.allData && this.ins.allData.length) {\r\n                _items = this.ins.checkNodeCanBeSelect(this.ins.allData, loadAllData);\r\n            }\r\n            if (!_items || !_items.length) {\r\n                _searchTreeData({ field: '*', value: '' });\r\n            } else {\r\n                this.ins.items = _items;\r\n                this.ins.favHelper.updateFavoritesStatus(this.ins.items);\r\n                tt.loadData(_items);\r\n                this.ins.selectionMgr.selectCurrentValue();\r\n            }\r\n        });\r\n\r\n        tt.expand.subscribe((tn: TreeNode) => {\r\n            if (tn.leaf ||  tn['showLoading']) {\r\n                return;\r\n            }\r\n            if (!tn.children || !tn.children.length) {\r\n                const treeInfo = this.ins.gridOptions.treeInfo;\r\n                if (isAsyncLoadTreeData() || this.IS_SEARCH_RESULT ) {\r\n                    let parentPath = '';\r\n                    let parentLayer = -1;\r\n                    const { field = '*', value = '' } = {\r\n                        ...tt.searchData\r\n                    };\r\n\r\n                    tn['showLoading'] = true;\r\n                    tt.detectChanges();\r\n                    if (treeInfo.layerType === 'parentId') {\r\n                        // ç¶IDå è½½æ¹å¼\r\n                        parentPath = tn['id'];\r\n                    } else {\r\n                        const treeInfoField = treeInfo.dataField;\r\n                        if (treeInfoField) {\r\n                            // parentPath = tn.data[treeInfoField][treeInfo.pathField];\r\n                            parentPath = this.ins.getPathCode(tn.data, treeInfo);\r\n                            // parentLayer = tn.data[treeInfoField][treeInfo.layerField];\r\n                            parentLayer = this.ins.getLayerData(tn.data, treeInfo);\r\n                        } else {\r\n                            this.ins.writeConsole('æªæ¾å°åçº§ä¿¡æ¯ã');\r\n                        }\r\n                    }\r\n\r\n                    if (!this.ins.uri) {\r\n                        tn['showLoading'] = false;\r\n                        this.ins.expandTreeNode.emit({\r\n                            instance: tt, node: tn,\r\n                            parentIdOrPath: parentPath, parentLayer, search: { value, field }\r\n                        });\r\n\r\n                        return;\r\n                    }\r\n\r\n                    this.ins.showLoading();\r\n\r\n                    this.getChildren(parentPath, parentLayer, {\r\n                        searchField: field === '*' ? '*' : field,\r\n                        searchValue: value\r\n                    }).subscribe(data => {\r\n                        this.ins.closeLoading();\r\n                        if (tt) {\r\n                            if (tn && data.items && data.items.length) {\r\n                                if (this.ins.useFavorite) {\r\n                                    // æ´æ°å­èç¹æ¶èç¶æ\r\n                                    this.ins.favHelper.updateFavoritesStatus(data.items);\r\n                                }\r\n\r\n                                const nodes = this.ins.checkNodeCanBeSelect(data.items, false);\r\n\r\n                                tt.appendChildren(nodes, tn);\r\n\r\n                                if (tt.loadDataType !== 'all' && !this.ins.singleSelect && this.ins.isGetAllChidlNodes &&\r\n                                    (this.ins.cascadeStatus === 'enable' || this.ins.cascadeStatus === 'down') ) {\r\n                                    const rn = tt.findRowNode(tn.id);\r\n                                    tt.propagateSelectionDown(rn, rn.isChecked);\r\n\r\n                                    // æ´æ°éä¸­è®°å½ç¼å­\r\n                                    const _items = data.items.filter(n => !n.addtional);\r\n                                    if (_items && _items.length) {\r\n                                        this.ins.lookupSelectionSer.updateSelections(_items.map(n => n.data), rn.isChecked);\r\n                                    }\r\n                                }\r\n                            }\r\n                            tn['showLoading'] = false;\r\n                            tt.detectChanges();\r\n                            tt.psRef.directiveRef.update();\r\n                            this.ins.selectionMgr.selectCurrentValue();\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                if (!this.ins.singleSelect && this.ins.enableCascade &&\r\n                        (this.ins.cascadeStatus === 'enable' || this.ins.cascadeStatus === 'down') && this.ins.isGetAllChidlNodes ) {\r\n                    const rn = tt.findRowNode(tn.id);\r\n                    tt.propagateSelectionDown(rn, rn.isChecked);\r\n                    const selectItems = tn.children.filter(n => n.selectable).map(n => n.data);\r\n                    this.ins.lookupSelectionSer.updateSelections(selectItems, rn.isChecked);\r\n                }\r\n                // this.ins.selectionMgr.selectCurrentValue();\r\n            }\r\n        });\r\n\r\n        if (loadAllData && this.ins.items) {\r\n            this.ins.treeNodeHelper.updateTreeNodeExpanded(this.ins.items);\r\n        }\r\n        return loadAllData;\r\n    }\r\n\r\n    cascadeValueChanged($event) {\r\n        const val = $event;\r\n        // const tt = this.ins.componentRef.instance as TreeTableComponent;\r\n        const instanceTyp = this.ins.activeTab === 'datalist' ? 'treetable' : 'fav';\r\n        const tt = this.ins.lookupCmpMgr.getComponentInstance(instanceTyp) as TreeTableComponent;\r\n\r\n        if (!tt) {\r\n            return;\r\n        }\r\n\r\n        switch (val) {\r\n            case 'enable':\r\n                tt.cascadeCheck = true;\r\n                tt.cascadeDown = true;\r\n                tt.cascadeUp = true;\r\n                break;\r\n            case 'disable':\r\n                tt.cascadeCheck = false;\r\n                tt.cascadeDown = false;\r\n                tt.cascadeUp = false;\r\n                break;\r\n            case 'up':\r\n                tt.cascadeCheck = true;\r\n                tt.cascadeUp = true;\r\n                tt.cascadeDown = false;\r\n                break;\r\n            case 'down':\r\n                tt.cascadeCheck = true;\r\n                tt.cascadeDown = true;\r\n                tt.cascadeUp = false;\r\n                break;\r\n            default:\r\n                tt.cascadeCheck = true;\r\n                tt.cascadeDown = true;\r\n                tt.cascadeUp = true;\r\n                break;\r\n        }\r\n\r\n        this.ins.cascadeStatus = val || 'enable';\r\n        this.ins.personalConf.cascadeStatus = val || 'enable';\r\n    }\r\n\r\n}\r\n","import { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { FavoriteIcon, FAVORITE_FIELD_NAME } from '../lookup-displaytype';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\n\r\nexport class MultiSelectionManager {\r\n    constructor(private ins: LookupGridComponent) {}\r\n\r\n    onSelectedTableCellClick(e: any) {\r\n        if (e.col.field === FAVORITE_FIELD_NAME) {\r\n            e.event.stopPropagation();\r\n            const classList = e.event.target['classList'];\r\n            if (classList.contains('f-lookup-unfavorite') || classList.contains('f-icon-minus-circle')) {\r\n                const rid =  e.row[this.ins.idField];\r\n                this.ins.lookupSelectionSer.unSelect(rid);\r\n                // åæ¶éä¸­ ä¸»åè¡¨ æ¶èåè¡¨ ä¸­çæ°æ®\r\n                if (this.ins.isTree()) {\r\n                    const tt = this.ins.lookupCmpMgr.getComponentInstance('treetable') as TreeTableComponent;\r\n                    tt.unCheckedNode(rid);\r\n                    tt.unSelectNode(rid);\r\n\r\n                    if (this.ins.useFavorite) {\r\n                        const _tt = this.ins.lookupCmpMgr.getComponentInstance('fav') as TreeTableComponent;\r\n                        if (_tt && _tt.data && _tt.data.length && _tt.findRowNode(rid)) {\r\n                            _tt.unCheckedNode(rid);\r\n                            _tt.unSelectNode(rid);\r\n                        }\r\n                    }\r\n                } else {\r\n                    const dt = this.ins.lookupCmpMgr.getComponentInstance() as DataTableComponent;\r\n                    dt.unCheckRow(rid);\r\n                    if (this.ins.useFavorite) {\r\n                        const _dt = this.ins.lookupCmpMgr.getComponentInstance('fav') as DataTableComponent;\r\n                        if (_dt && _dt.data && _dt.data.length) {\r\n                            _dt.unCheckRow(rid);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** åå§åå·²éæ°æ®åä¿¡æ¯ */\r\n    initSelectedColumns() {\r\n        let selectedColumns = [];\r\n        if (this.ins.showSelected && !this.ins.singleSelect) {\r\n            selectedColumns = cloneDeep(this.ins.gridOptions.columns);\r\n            const favcol = selectedColumns.find(n => n.field === FAVORITE_FIELD_NAME);\r\n            if (favcol) {\r\n                favcol.formatter = () => {\r\n                    return FavoriteIcon.remove;\r\n                };\r\n            } else {\r\n                selectedColumns = selectedColumns.concat([\r\n                    { field: FAVORITE_FIELD_NAME, width: 80, formatter: () => {\r\n                            return FavoriteIcon.remove;\r\n                        }\r\n                    }\r\n                ]);\r\n            }\r\n            this.ins.initColumnWidth(selectedColumns, 'sel');\r\n        }\r\n\r\n        return selectedColumns;\r\n    }\r\n\r\n    updateSelections(data) {\r\n        if (Array.isArray(data)) {\r\n            this.ins.lookupSelectionSer.updateSelections(data, true);\r\n        } else {\r\n            this.ins.lookupSelectionSer.select(data);\r\n        }\r\n    }\r\n\r\n    remove(id: any) {\r\n        if (id) {\r\n            this.ins.lookupSelectionSer.unSelect(id);\r\n        }\r\n    }\r\n\r\n    deleteSelectedItems(data: any) {\r\n        if (!data || !data.length) {return;}\r\n        this.ins.lookupSelectionSer.updateSelections(data, false);\r\n\r\n        if (!this.ins.isShow) {return;}\r\n        const ids = data.map(n => n[this.ins.idField]);\r\n        if (this.ins.isTree()) {\r\n            const tt = this.ins.lookupCmpMgr.getComponentInstance('treetable') as TreeTableComponent;\r\n            tt&& tt.unCheckedAndSelected(ids);\r\n\r\n            if (this.ins.useFavorite) {\r\n                const _tt = this.ins.lookupCmpMgr.getComponentInstance('fav') as TreeTableComponent;\r\n                _tt && _tt.unCheckedNodes(ids, true, false);\r\n            }\r\n\r\n        } else {\r\n            const dt = this.ins.lookupCmpMgr.getComponentInstance() as DataTableComponent;\r\n            dt && dt.unCheckRows(ids);\r\n            if (this.ins.useFavorite) {\r\n                const _dt = this.ins.lookupCmpMgr.getComponentInstance('fav') as DataTableComponent;\r\n                _dt && _dt.unCheckRows(ids);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    clear() {\r\n        this.ins.lookupSelectionSer.clearSelections();\r\n\r\n        if (!this.ins.isShow) {return;}\r\n\r\n        if (this.ins.isTree()) {\r\n            const tt = this.ins.lookupCmpMgr.getComponentInstance('treetable') as TreeTableComponent;\r\n            tt&&tt.clearAll();\r\n\r\n            if (this.ins.useFavorite) {\r\n                const _tt = this.ins.lookupCmpMgr.getComponentInstance('fav') as TreeTableComponent;\r\n                _tt&&_tt.clearAll();\r\n            }\r\n\r\n        } else {\r\n            const dt = this.ins.lookupCmpMgr.getComponentInstance() as DataTableComponent;\r\n            dt&&dt.clearSelections();\r\n            if (this.ins.useFavorite) {\r\n                const _dt = this.ins.lookupCmpMgr.getComponentInstance('fav') as DataTableComponent;\r\n                _dt&&_dt.clearSelections();\r\n            }\r\n        }\r\n    }\r\n\r\n    save(rows: any) {\r\n        if (this.ins.showSelected) {\r\n            this.ins.personalConf.selections = rows;\r\n            this.ins.personalConfigService.savePersonalConfig(this.ins.personalConf);\r\n        }\r\n    }\r\n\r\n    loadData() {\r\n        let items = this.ins.personalConf ? (this.ins.personalConf.selections || []) : [];\r\n        if (!items.length) {\r\n            items = this.ins.lookupSelectionSer.getSelections();\r\n        }\r\n        this.ins.lookupSelectionSer.loadSelections(items);\r\n    }\r\n}\r\n","import { RemoteParams, SearchParam, UserFavoriteData } from '../http/RemoteParams';\r\nimport { LOAD_DATA_TYPE } from '../lookup-grid-options';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { FavoriteAction, FAVORITE_FIELD_NAME, LookupGridDisplayType } from '../lookup-displaytype';\r\nimport { Observable, of, forkJoin } from 'rxjs';\r\nimport { map, switchMap, tap, debounceTime } from 'rxjs/operators';\r\n\r\n// å¸®å©é»è®¤ä¸ªæ§åæ°æ®\r\nconst DefaultUserConfig = {\r\n    tabIndex: 'datalist',\r\n    favorite: null,\r\n    size: null\r\n};\r\nexport class LookupHttpManager {\r\n    // æ¯æ¬¡å¸®å©æå¼åï¼æ´æ°æ­¤å¼ï¼åä¸ºä¸ªæ§åæ°æ®çåå§å¼ï¼\r\n    // å³é­çªå£æ¶ï¼ä¸æ­¤è¿è¡å¯¹æ¯ãå¦æä¸æ ·ï¼åä¸ä¿å­ï¼\r\n    private _originalPersonalConfig = DefaultUserConfig;\r\n\r\n    constructor(private ins: LookupGridComponent) { }\r\n\r\n    private disablePagination() {\r\n        return {\r\n            pageIndex: 1,\r\n            pageSize: 500\r\n        };\r\n    }\r\n\r\n    /** æé æ¥è¯¢åæ° */\r\n    buildQueryParams(event?: any, type: LOAD_DATA_TYPE = 'all') {\r\n        const params: RemoteParams = {};\r\n\r\n        if (event.navConditions && event.navConditions.length) {\r\n            if (event.navConditions && event.navConditions.length === 1 && event.navConditions[0].code == '*') {\r\n                event.search = { field: '*', value: event.navConditions[0].value};\r\n            } else {\r\n                params.navSearchConditions = event.navConditions;\r\n            }\r\n        }\r\n\r\n        if (this.ins.conditions && this.ins.conditions.length && type !== 'fav') {\r\n            params.searchConditions = cloneDeep(this.ins.conditions);\r\n        }\r\n\r\n        const searchParam: SearchParam = { category: type };\r\n\r\n        if (type !== 'fav') {\r\n            if (this.ins.isDoublleList() && this.ins.navigationFilter && type !== 'all') {\r\n                if (this.ins.navigationFilter.idValue && type !== 'textchange') {\r\n                    params.relationFilter = [...this.ins.navigationFilter.idValue];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (event) {\r\n            if (type === 'fav' || type === 'selected') {\r\n                event.pageInfo = this.disablePagination();\r\n            }\r\n\r\n            if (event.pageInfo) {\r\n                params.pageIndex = event.pageInfo.pageIndex;\r\n                params.pageSize = event.pageInfo.pageSize;\r\n            }\r\n\r\n            if (event.search) {\r\n                let sfield = event.search.field;\r\n                if (sfield && sfield === '*') {\r\n                    sfield = '*';\r\n                }\r\n\r\n                if (event.search.value) {\r\n                    event.search.value = event.search.value.trim();\r\n                }\r\n\r\n                searchParam.searchField = sfield;\r\n                searchParam.searchValue = event.search.value;\r\n                searchParam.searchType =  event.search.type || 'like';\r\n\r\n                if (event.search.value === '' && searchParam.category === 'search' && (!params.searchConditions && !params.navSearchConditions)) {\r\n                    searchParam.category = 'all';\r\n                }\r\n            }\r\n\r\n            if (event.sortName) {\r\n                searchParam.sortName = event.sortName;\r\n            }\r\n            if (event.sortOrder) {\r\n                searchParam.sortOrder = event.sortOrder;\r\n            }\r\n\r\n            // åå±å è½½æ¯æè®¾ç½®å±å¼å±çº§\r\n            if (!isNaN(Number(event.expandLevel)) && this.ins.isTree()) {\r\n                // åç«¯ -1 ä¸å±å¼   0 å¨å±å¼\r\n                // åç«¯  0 ä¸å±å¼  -1 å¨å±å¼\r\n                if (event.expandLevel) {\r\n                    if (event.expandLevel === -1) {\r\n                        event.expandLevel = 0;\r\n                    }\r\n                } else {\r\n                    event.expandLevel = -1;\r\n                }\r\n                searchParam['layerNum'] = event.expandLevel;\r\n            }\r\n        }\r\n\r\n        if (type === 'fav' && event.favoriteIds) {\r\n            searchParam.favoriteIds = event.favoriteIds;\r\n        }\r\n\r\n        if (this.ins.isTree() || this.ins.displayType === LookupGridDisplayType.NavTreeList) {\r\n            params.enableFullTree = this.ins.enableFullTree;\r\n        }\r\n\r\n        params.treeToList = this.ins.treeToList;\r\n        params.navTreeToList = this.ins.navTreeToList;\r\n\r\n        // æ¥è¯¢æ¶ä¸æé å®æ´æ \r\n        if (type === 'textchange') {\r\n            params.enableFullTree = false;\r\n        }\r\n\r\n        if (type === 'selected') {\r\n            searchParam.category = 'fav';\r\n            params.enableFullTree = false;\r\n            searchParam.favoriteIds = event.favoriteIds;\r\n        }\r\n\r\n        params.searchValue = JSON.stringify(searchParam);\r\n        params.loadTreeDataType = this.ins.loadTreeDataType;\r\n\r\n        params.customData = this.ins.customData;\r\n\r\n        if (this.ins.helpId) {\r\n            params.helpId = this.ins.helpId;\r\n        }\r\n\r\n        if (event.selectedInfo) {\r\n            params.selectedInfo = event.selectedInfo;\r\n        }\r\n\r\n        if (event.navNodePathCode !== undefined) {\r\n            params.navPathCode = event.navNodePathCode;\r\n        } else {\r\n            if (type === 'navAllChildren') {\r\n                if (this.ins.includeSubordinates && this.ins['navNodePathCode']) {\r\n                    params.navPathCode = this.ins['navNodePathCode'];\r\n                }\r\n            }\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n\r\n    getData(event?: any, type: LOAD_DATA_TYPE = 'all'): Observable<any> {\r\n        const uri = this.ins.gridOptions.uri;\r\n\r\n        if (this.ins.isDoublleList() &&  this.ins.navigationFilter && this.ins.navigationFilter.idValue && type !== 'fav') {\r\n            if (this.ins.includeSubordinates && this.ins.navigationOptions.treeInfo.loadDataType === 'async') {\r\n                type = 'navAllChildren';\r\n            } else {\r\n                type = 'list';\r\n            }\r\n        }\r\n\r\n        const params = this.buildQueryParams(event, type);\r\n\r\n        if (uri || this.ins.beUri) {\r\n            if (this.ins.beUri && this.ins.columns && this.ins.columns.length) {\r\n                const allSearchFields = this.ins.columns.map(col => col.searchField).filter(f => f);\r\n                if (!params.condition) {\r\n                    params.condition = {};\r\n                }\r\n\r\n                if (!this.ins.isTree() && this.ins.pagination) {\r\n                    const { pageSize = this.ins.pageSize || 20, pageIndex } = { ...params };\r\n                    params.condition.pagination = { pageSize, pageIndex };\r\n                } else {\r\n                    params.condition.pagination = { isUsePagination: false };\r\n                }\r\n                const searchParam = JSON.parse(params.searchValue);\r\n                if (searchParam.searchValue) {\r\n                    params.condition = this.ins.lookupUtils.mergeCondition(params.condition, allSearchFields, {\r\n                        field: searchParam.searchField,\r\n                        value: searchParam.searchValue\r\n                    });\r\n                }\r\n            }\r\n\r\n            const _uri = this.ins.beUri || uri;\r\n\r\n            if (this.ins.http) {\r\n                this.ins.http.context = this.ins.context;\r\n            }\r\n            if (this.ins._searchResult) {\r\n                return of(this.ins._searchResult);\r\n            }\r\n\r\n            if (type !== 'allChildren') {\r\n                return this.ins.http.getData(_uri, params);\r\n            } else {\r\n                const params1 = {\r\n                    searchValue: JSON.stringify({ category: type }),\r\n                    parentsIds: event.parentsIds,\r\n                    customData: params.customData,\r\n                    helpId: params.helpId\r\n                };\r\n                return this.ins.http.getData(_uri, params1);\r\n            }\r\n        } else {\r\n            return of(false);\r\n        }\r\n    }\r\n\r\n    // getFavoriteData(params) {\r\n    //     return this.getData(params, 'fav');\r\n    // }\r\n\r\n    getSelecedItems(selIds: any[]) {\r\n        return this.getData({ favoriteIds: selIds }, 'selected');\r\n    }\r\n\r\n    getPersonalConfig() {\r\n        const defaultConf = cloneDeep(DefaultUserConfig);\r\n        \r\n        // if (this.ins.customData) {\r\n        //     const wrapKeyData = JSON.stringify({ key: this.ins.customData });\r\n        //     const configKeyString = this.ins.getLookupBindingFields() + wrapKeyData;\r\n        //     this.ins.personalConfigService.personalConfigKey = configKeyString;\r\n        // }\r\n        const key = this.ins.personalConfigService._newKey;\r\n\r\n        let _conf = this.ins.personalConfigService.getPersonalData(key);\r\n\r\n        if (!_conf || !Object.keys(_conf).length) {\r\n            _conf = defaultConf;\r\n        }\r\n        const req = of(_conf);\r\n\r\n        if (this.ins.favoriteDataFrom === 'locale' || this.ins.isTabChanged) {\r\n            return req;\r\n        }\r\n\r\n        if (this.ins.http && this.ins.http['getUserSettings']) {\r\n            return this.ins.http['getUserSettings'](key).pipe(\r\n                tap((r: any) => { // TFS 611953\r\n                    if (r && r.textValue) {\r\n                        localStorage.setItem(key, r.textValue);\r\n                    } else {\r\n                        localStorage.setItem(key, JSON.stringify(defaultConf));\r\n                    }\r\n                }),\r\n                map((ucs: any) => {\r\n                    if (ucs) {\r\n                        return ucs.textValue ? JSON.parse(ucs.textValue) : defaultConf;\r\n                    }\r\n                    return defaultConf;\r\n                })\r\n            );\r\n        } else {\r\n            return req;\r\n        }\r\n    }\r\n\r\n    lookupRequest(event?: any, type: LOAD_DATA_TYPE = 'all', isQuickSelect = false) {\r\n        if (!this.ins.usePersionalConf || isQuickSelect) {\r\n            return this.getData(event, type);\r\n        }\r\n\r\n        const req = this.getPersonalConfig();\r\n\r\n        return req.pipe(\r\n            tap((c: any) => {\r\n                this.ins.personalConf = c;\r\n                this.ins.personalConfigService.savePersonalConfig(c);\r\n                if (!this.ins.isTabChanged) {\r\n                    this._originalPersonalConfig = cloneDeep(c);\r\n                }\r\n            }),\r\n            switchMap((c: any) => {\r\n                const { tabIndex, favorite, size, cascadeStatus } = c;\r\n\r\n                if (!this.ins.isTabChanged) {\r\n                    this.ins.activeTab = tabIndex || 'datalist';\r\n                }\r\n\r\n                if (size) {\r\n                    this.ins.dialogWidth = size.width;\r\n                    this.ins.dialogHeight = size.height;\r\n\r\n                    if (!this.ins.isTabChanged) {\r\n                        this.ins.dialog.reSize({ width: size.width, height: size.height });\r\n                    }\r\n                }\r\n\r\n\r\n                if ( this.ins.cascadeStatus) {\r\n                    if (cascadeStatus && this.ins.enableCascade && this.ins.showCascadeControl) {\r\n                        this.ins.cascadeStatus = cascadeStatus;\r\n                    }\r\n\r\n                    if (this.ins.cascadeItems) {\r\n                        const keys = ['enable', 'up', 'down', 'disable'];\r\n                        keys.forEach(n => {\r\n                            if (this.ins.cascadeItems[n] === undefined) {\r\n                                this.ins.cascadeItems[n] = true;\r\n                            }\r\n                        });\r\n\r\n                        if (!this.ins.cascadeItems[this.ins.cascadeStatus] ) {\r\n                            const keys = Object.keys(this.ins.cascadeItems).map(n => {\r\n                                return this.ins.cascadeItems[n] ? n: '';\r\n                            }).filter(n => n);\r\n                            this.ins.cascadeStatus = keys[0] as any;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.ins.activeTab === 'datalist') {\r\n                    return this.getData(event, type);\r\n                } else if (this.ins.activeTab === 'favorite') {\r\n                    const favIds = favorite ? favorite[this.ins.localService.localeId] : [];\r\n                    if ((!favIds || !favIds.length) && !this.ins.isTabChanged) {\r\n                        return this.getData(event, 'all').pipe(\r\n                            map(r => {\r\n                                if (r && !r.items) {\r\n                                    r.items = [];\r\n                                }\r\n                                r.activeTab = 'datalist';\r\n                                return r;\r\n                            })\r\n                        );\r\n                    }\r\n\r\n                    // const _fids = favIds.filter(n => n);\r\n                    event.favoriteIds = favIds;\r\n                    event.search = null;\r\n                    return this.getData(event, 'fav').pipe(\r\n                        switchMap(r => {\r\n                            const items = r ? r.items || [] : [];\r\n                            // å å¥æ°æ®æéåï¼æ²¡æè¿åæ°æ®ä¸ç¬¬1æ¬¡æå¼çªå£ï¼éæå¨ç¹å»æ¶èæ ç­¾æ¶\r\n                            if (!items.length && !this.ins.isTabChanged) {\r\n                                return this.getData(event, 'all').pipe(\r\n                                    map(a => {\r\n                                        if (a && !a.items) {\r\n                                            a.items = [];\r\n                                        }\r\n        \r\n                                        a.activeTab = 'datalist';\r\n                                        return a;\r\n                                    })\r\n                                );\r\n                            } else {\r\n                                return of(r);\r\n                            }\r\n                        })\r\n                    );\r\n                } else if (this.ins.activeTab === 'selected') {\r\n                    const selIds = this.ins.displayValue ? this.ins.displayValue.split(',') : [];\r\n                    const _sids = selIds.filter(n => n);\r\n                    return this.getSelecedItems(_sids);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    // ä¿å­ä¸ªæ§åæ°æ®\r\n    submitFavoriteData(action: any | FavoriteAction) {\r\n\r\n        // ä¿å­åå®½åº¦\r\n        this.ins.personalConf.colSizeInfo = this.getColumnSizeInfo();\r\n\r\n        // å¦ææ°æ®ä¸é»è®¤çæ°æ®ä¸è³åä¸ä¿å­ã\r\n        if (JSON.stringify(this.ins.personalConf) === JSON.stringify(this._originalPersonalConfig)) {\r\n            return;\r\n        }\r\n\r\n        let msg = '';\r\n        if (action === FavoriteAction.add) {\r\n            msg = this.ins.addFavoriteSuccess;\r\n        } else if (action === FavoriteAction.delete) {\r\n            msg = this.ins.delFavoriteSuccess;\r\n        }\r\n        // æ´æ°æ¬å°ç¼å­\r\n        localStorage.setItem(this.ins.personalConfigService._newKey, JSON.stringify(this.ins.personalConf));\r\n        this.ins.personalConfigService.savePersonalConfig(this.ins.personalConf || {});\r\n\r\n        if (this.ins.favoriteDataFrom !== 'locale') {\r\n            this._originalPersonalConfig = cloneDeep(this.ins.personalConf);\r\n\r\n            const configData: UserFavoriteData = {\r\n                configkey1: this.ins.personalConfigService.personalConfigKey,\r\n                configkey2: '',\r\n                configkey3: '',\r\n                textvalue: JSON.stringify(this.ins.personalConf)\r\n            };\r\n\r\n            if (this.ins.http && this.ins.http['saveUserSettings']) {\r\n                this.ins.savingFaoriteData = true;\r\n                this.ins.showLoading();\r\n                return this.ins.http['saveUserSettings'](configData).subscribe((r) => {\r\n                    this.ins.savingFaoriteData = false;\r\n                    this.ins.closeLoading();\r\n                    if (msg) {\r\n                        this.ins.notifyService.success(msg);\r\n                    }\r\n                });\r\n            } else {\r\n                if (msg) {\r\n                    this.ins.notifyService.success(msg);\r\n                }\r\n            }\r\n        } else {\r\n            if (msg) {\r\n                this.ins.notifyService.success(msg);\r\n            }\r\n        }\r\n    }\r\n\r\n    private getColumnSizeInfo() {\r\n        const colSizeInfo = {data: {}, nav: {}, fav: {}, sel: {}};\r\n        colSizeInfo.data = this.ins.columns.filter((c) => c.field !== FAVORITE_FIELD_NAME).reduce((r, n) => {\r\n            r[n.field] = n.width;\r\n            return r;\r\n        }, {});\r\n\r\n        if (this.ins.favoriteColumns && this.ins.favoriteColumns.length) {\r\n            colSizeInfo.fav = this.ins.favoriteColumns.filter((c) => c.field !== FAVORITE_FIELD_NAME).reduce((r, n) => {\r\n                r[n.field] = n.width;\r\n                return r;\r\n            }, {});\r\n        }\r\n\r\n        if (this.ins.navigationOptions && this.ins.navigationOptions.columns && this.ins.navigationOptions.columns.length) {\r\n            colSizeInfo.nav = this.ins.navigationOptions.columns.filter((c) => c.field !== FAVORITE_FIELD_NAME).reduce((r, n) => {\r\n                r[n.field] = n.width;\r\n                return r;\r\n            }, {});\r\n        }\r\n\r\n        if (this.ins.selectedColumns && this.ins.selectedColumns.length && this.ins.showSelected) {\r\n            colSizeInfo.sel = this.ins.selectedColumns.filter((c) => c.field !== FAVORITE_FIELD_NAME).reduce((r, n) => {\r\n                r[n.field] = n.width;\r\n                return r;\r\n            }, {});\r\n        }\r\n        \r\n        return colSizeInfo;\r\n    }\r\n\r\n}\r\n","/*\r\n* @Author: ç¯çç§æ(Lucas Huang)\r\n* @Date: 2018-12-14 14:40:48\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-25 18:10:29\r\n* @Company: Inspur\r\n* @Version: v0.0.1\r\n*/\r\n\r\nimport { Component, OnInit, ViewChild, ViewContainerRef, EventEmitter, Output,\r\n    ComponentFactoryResolver, ComponentRef, ChangeDetectorRef, Injector, ReflectiveInjector, OnDestroy\r\n} from '@angular/core';\r\nimport { Observable, of, Subscription } from 'rxjs';\r\n\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\n\r\nimport { LOAD_DATA_TYPE, LookupGridOptions, LookupGridResult } from './lookup-grid-options';\r\nimport { LookupGridComponent } from './lookup-grid.component';\r\nimport { filter, switchMap } from 'rxjs/operators';\r\nimport { FilterCondition } from '@farris/ui-common/types';\r\n\r\n@Component({\r\n    selector: 'lookup-left',\r\n    templateUrl: './lookup-left.component.html'\r\n})\r\n\r\nexport class LookupLeftComponent implements OnInit, OnDestroy {\r\n\r\n    cmpRef: ComponentRef<any>;\r\n    navOptions: LookupGridOptions;\r\n    lookupCmp: LookupGridComponent;\r\n\r\n    navConditions: Array<FilterCondition> = [];\r\n\r\n\r\n    @ViewChild('container', {read: ViewContainerRef}) cmpContainer: ViewContainerRef;\r\n    @Output() selected = new EventEmitter<{ data: any, node?: any}>();\r\n    @Output() unselected = new EventEmitter();\r\n    @Output() search = new EventEmitter<{ field: string, value: string }>();\r\n    @Output() pageChanged = new EventEmitter<{ pageInfo: {pageIndex: number, pageSize: number}, search: {field: string, value: string} }>();\r\n\r\n    private _searchState = null;\r\n    private _sortState = null;\r\n    private allData = null;\r\n    constructor(private cfr: ComponentFactoryResolver, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit() {\r\n        if (this.lookupCmp && this.isTreeList()) {\r\n            this.lookupCmp.includeSubordinates$$ = this.lookupCmp.includeSubordinates$.subscribe((val: boolean) => {\r\n                if (this.cmpRef) {\r\n                    const tt = this.cmpRef.instance as TreeTableComponent;\r\n                    if (tt.selectedRow) {\r\n                        this.selected.emit({ data: tt.selectedRow.data, node: tt.selectedRow });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this._searchState = null;\r\n        this._sortState = null;\r\n    }\r\n\r\n    updateScrollPosition() {\r\n        if (this.isTreeList()) {\r\n            const tt = this.cmpRef.instance as TreeTableComponent;\r\n            if (tt && tt.state.scrollY != tt.psRef.directiveRef.elementRef.nativeElement.scrolltop) {\r\n                tt.psRef.directiveRef.scrollToY(tt.state.scrollY);\r\n            }\r\n        }\r\n    }\r\n\r\n    createComponent(): Observable<any> {\r\n        let dtFac = null;\r\n        if (!this.isTreeList()) {\r\n            dtFac = this.cfr.resolveComponentFactory(DataTableComponent);\r\n        } else {\r\n            this.navOptions['fitColumns'] = false;\r\n            this.navOptions['autoFitColumns'] = true;\r\n            dtFac = this.cfr.resolveComponentFactory(TreeTableComponent);\r\n        }\r\n        this.navOptions['keepSelect'] = false;\r\n        // å·¦ä¾§æ¥è¯¢è¿æ»¤æ¡ï¼éèæï¼\r\n        this.navOptions['showFilterBar'] = this.lookupCmp.enableMultiFieldSearch? false: this.lookupCmp.showFilterBar;\r\n\r\n        this.navOptions.width = this.lookupCmp.leftPanelWidth;\r\n\r\n        this.cmpRef = this.cmpContainer.createComponent(dtFac);\r\n\r\n        if (!this.isTreeList()) {\r\n            this.navOptions.width -= 2;\r\n            this.navOptions['fill'] = true;\r\n            this.cmpRef.instance.maxSize = 5;\r\n            this.cmpRef.instance.fill = true;\r\n            this.cmpRef.instance.autoFitColumns = true;\r\n        } else {\r\n            this.navOptions['fit'] = true;\r\n        }\r\n        // this.cmpRef.instance.fit = true;\r\n\r\n        if (this.navOptions.pageInfo) {\r\n            if (this.navOptions.pageInfo.pageList) {\r\n                this.navOptions.pageList = this.navOptions.pageInfo.pageList;\r\n            }\r\n            this.navOptions.pagination = this.navOptions.pageInfo.enablePager;\r\n            this.navOptions.pageIndex = this.navOptions.pageInfo.pageIndex;\r\n            this.navOptions.pageSize = this.navOptions.pageInfo.pageSize;\r\n        } else {\r\n            this.navOptions.pagination = false;\r\n        }\r\n\r\n        Object.assign(this.cmpRef.instance, this.navOptions);\r\n\r\n        this.loadData();\r\n        return of(this.cmpRef);\r\n    }\r\n\r\n    update() {\r\n        this.cd.detectChanges();\r\n    }\r\n\r\n    resize(size?: {width: number, height: number}) {\r\n        if (size) {\r\n            const { width, height } = size;\r\n            const _width = width - 2;\r\n            this.navOptions.width = _width;\r\n            this.navOptions.height = height;\r\n\r\n            const _height = height -  this.lookupCmp.getFilterBarHeight();\r\n            this.cmpRef.instance.resize({ width: _width, height: _height });\r\n        }\r\n    }\r\n\r\n    isTreeList() {\r\n        return this.navOptions.displayType.toLowerCase() === 'treelist' && !this.lookupCmp.navTreeToList;\r\n    }\r\n\r\n    private selectLeftDataTableRow(items: any, dt: DataTableComponent) {\r\n        if (items && items.length) {\r\n            let item = null;\r\n            if (this.lookupCmp.navSelectedIds) {\r\n                item = items.find(n => n[dt.idField] == this.lookupCmp.navSelectedIds);\r\n            } else {\r\n                if (this.lookupCmp.selectFirstInNav) {\r\n                    item = items[0];\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                dt.dtBody.selectedRowIndex = -1;\r\n                dt.dtBody.selectedRow('', 0, item);\r\n            }\r\n        }\r\n    }\r\n\r\n    private closeLoading() {\r\n        this.lookupCmp.closeLoading();\r\n    }\r\n\r\n    private initDataTable(dt: DataTableComponent) {\r\n        dt.loadData({\r\n            pageSize: this.navOptions.pageSize,\r\n            pageIndex: this.navOptions.pageIndex,\r\n            total: this.navOptions.total,\r\n            data: this.navOptions.items,\r\n        });\r\n\r\n        const {width, height} = this.navOptions;\r\n        // dt.resize({ width: 320, height: this.navOptions.height});\r\n        dt.resize({ width, height: height -  this.lookupCmp.getFilterBarHeight() });\r\n        // è¡éä¸­\r\n        dt.selectedRow.subscribe(d => {\r\n            this.selected.emit({ data: d.data });\r\n        });\r\n\r\n        dt.unSelectRow.subscribe(d => {\r\n            this.selected.emit(null);\r\n        });\r\n\r\n        const loadTableData = {\r\n            next: (data: LookupGridResult) => {\r\n                this.closeLoading();\r\n                dataTableReLoad(data);\r\n                const {width, height} = this.navOptions;\r\n                this.cmpRef.instance.resize({ width, height: height -  this.lookupCmp.getFilterBarHeight() });\r\n            },\r\n            error: (err) => {\r\n                this.closeLoading();\r\n            }\r\n        };\r\n\r\n        // æ¥è¯¢\r\n        dt.search.subscribe( searchData => {\r\n            const p: any = { pageInfo: { pageIndex: 1, pageSize: this.navOptions.pageSize }, search: '',navConditions: this.navConditions };\r\n\r\n            this._searchState = searchData;\r\n            this.search.emit(searchData);\r\n            p.search = searchData;\r\n            p.pageInfo.pageSize = dt.pageSize;\r\n            this.lookupCmp.navigationFilter = null;\r\n\r\n            if (this._sortState && this._sortState.sortName) {\r\n                p['sortName'] = this._sortState.sortName;\r\n                p['sortOrder'] = this._sortState.sortOrder;\r\n            } else {\r\n                delete p['sortName'];\r\n                delete p['sortOrder'];\r\n            }\r\n\r\n            this.lookupCmp.httpMgr.getData(p, 'navsearch').pipe(\r\n                filter(n => n)\r\n            ).subscribe(loadTableData);\r\n        });\r\n\r\n        const dataTableReLoad = (data) => {\r\n            dt.loadData({\r\n                pageSize: data.pageInfo.pageSize,\r\n                pageIndex: data.pageInfo.pageIndex,\r\n                total: data.total,\r\n                data: data.items,\r\n            });\r\n\r\n            this.selectLeftDataTableRow(data.items, dt);\r\n            dt.cd.markForCheck();\r\n        };\r\n\r\n        // åé¡µ\r\n        dt.pageChanged.subscribe(d => {\r\n            this.pageChanged.emit(d);\r\n            this.lookupCmp.navigationFilter = null;\r\n            d.navConditions = this.navConditions || [];\r\n            this.lookupCmp.httpMgr.getData(d, 'navsearch').subscribe(loadTableData);\r\n        });\r\n\r\n        dt.pageSizeChanged.subscribe((e) => {\r\n            this.lookupCmp.navigationFilter = null;\r\n            e.navConditions = this.navConditions || [];\r\n            this.lookupCmp.httpMgr.getData(e, 'navsearch').subscribe(loadTableData);\r\n        });\r\n\r\n        dt.columnSorted.subscribe( (sort: {sortName: string, sortOrder: any}) => {\r\n            const { sortName, sortOrder } = {...sort};\r\n            this._sortState = sort;\r\n            this.lookupCmp.navigationFilter = null;\r\n            const param = { \r\n                sortName,\r\n                sortOrder,\r\n                search: this._searchState,  \r\n                pageInfo: {\r\n                    pageSize: dt.pageSize,\r\n                    pageIndex: 1\r\n                },\r\n                navConditions: this.navConditions || []\r\n            };\r\n            this.lookupCmp.httpMgr.getData(param, 'navsearch').subscribe(loadTableData);\r\n        });\r\n\r\n        dt.clearSearchValue.subscribe( () => {\r\n            this._searchState = null;\r\n            dt.search.emit(null);\r\n        });\r\n\r\n        this.selectLeftDataTableRow(this.navOptions.items, dt);\r\n    }\r\n\r\n    private buildParams(params: {}): {[key: string]:any} {\r\n        const p: any = { \r\n            ...params, \r\n            treeToList: this.lookupCmp.treeToList, \r\n            navTreeToList: this.lookupCmp.navTreeToList,\r\n            navConditions: this.navConditions || []\r\n        };\r\n\r\n        return p;\r\n    }\r\n\r\n    private initTreeTable(tt: TreeTableComponent) {\r\n        tt.virtualized = true;\r\n        tt.fast = true;\r\n        tt.nodeSelected.subscribe(d => {\r\n            this.selected.emit({data: d.node.data, node: d.node});\r\n        });\r\n\r\n        tt.nodeUnSelect.subscribe(d => {\r\n            this.selected.emit(null);\r\n        });\r\n\r\n        tt.fixedHeader = true;\r\n\r\n        if (this.navOptions.treeInfo.loadDataType === 'all') { // åå±å è½½ä¸æ¯æåæ°æ¶éç½®å±å¼å±çº§\r\n            this.lookupCmp.treeNodeHelper.updateTreeNodeExpanded(this.navOptions.items, this.navOptions.treeInfo);\r\n        }\r\n\r\n        tt.loadDataType = this.navOptions.treeInfo.loadDataType;\r\n        // æ£æ¥å®æ´æ è¿æ»¤æ¡ä»¶ By Lucas 20200302\r\n        this.navOptions.items = this.lookupCmp.checkNodeCanBeSelect(this.navOptions.items, this.navOptions.treeInfo.loadDataType === 'all');\r\n        tt.loadData(this.navOptions.items);\r\n\r\n        if (this.lookupCmp.navSelectedIds) {\r\n            tt.selectNode(this.lookupCmp.navSelectedIds);\r\n        } else if (this.lookupCmp.selectFirstInNav) {\r\n            tt.selectFirstNode();\r\n        }\r\n\r\n        this.allData = this.navOptions.items;\r\n\r\n        const loadTreeData = {\r\n            next: (resData: any) => {\r\n                this.closeLoading();\r\n                tt.psRef.directiveRef.scrollToTop(0);\r\n                tt.clearAll();\r\n                const items = this.lookupCmp.checkNodeCanBeSelect(resData.items, this.navOptions.treeInfo.loadDataType === 'all' && (!this._searchState || !this._searchState.value));\r\n\r\n                if (items && items.length && items[0].children && items[0].children.length) {\r\n                    items[0].expanded = true;\r\n                    items[0].children = this.lookupCmp.expandFirstNode(items[0].children);\r\n                }\r\n\r\n                tt.loadData(items);\r\n                tt.resize();\r\n                this.selected.emit(null);\r\n            },\r\n            error: (err) => {\r\n                this.closeLoading();\r\n            }\r\n        };\r\n\r\n\r\n        tt.search.subscribe(search => {\r\n            this._searchState = search;\r\n            this.lookupCmp.navigationFilter = null;\r\n            const p = this.buildParams({ search });\r\n          \r\n            if (this._sortState && this._sortState.sortName) {\r\n                p['sortName'] = this._sortState.sortName;\r\n                p['sortOrder'] = this._sortState.sortOrder;\r\n            }\r\n            this.lookupCmp.httpMgr.getData(p, 'navsearch').subscribe(loadTreeData);\r\n        });\r\n\r\n        tt.columnSorted.subscribe( (sort: {sortName: string, sortOrder: any}) => {\r\n            this.lookupCmp.navigationFilter = null;\r\n            if (tt.loadDataType === 'all') {\r\n                tt.clientSort();\r\n            } else {\r\n                let { sortName, sortOrder } = {...sort};\r\n\r\n                const sortCol: any = this.navOptions.columns.find(n => n.field === sortName);\r\n                if (sortCol) {\r\n                    sortName = sortCol['fieldPath'];\r\n                }\r\n\r\n                this._sortState = { sortName, sortOrder };\r\n                // const param = Object.assign({ sortName, sortOrder }, this._searchState);\r\n                const param = this.buildParams({ sortName, sortOrder, search: this._searchState });\r\n                let requestType: LOAD_DATA_TYPE = 'nav';\r\n                if ((this._searchState && this._searchState.value) || (param && param.navConditions && param.navConditions.length)) {\r\n                    requestType = 'navsearch';\r\n                }\r\n\r\n\r\n                this.lookupCmp.httpMgr.getData(param, requestType).subscribe(loadTreeData);\r\n            }\r\n        });\r\n\r\n        tt.clearSearchValue.subscribe( () => {\r\n            this._searchState = null;\r\n            if (!this._sortState || !this._sortState.sortName) {\r\n                tt.loadData(this.allData);\r\n                if (!tt.selectedRow) {\r\n                    this.selected.emit(null);\r\n                }\r\n            } else {\r\n                const p = this.buildParams({});\r\n                this.lookupCmp.navigationFilter = null;\r\n                if (this._sortState && this._sortState.sortName) {\r\n                    p['sortName'] = this._sortState.sortName;\r\n                    p['sortOrder'] = this._sortState.sortOrder;\r\n                }\r\n                this.lookupCmp.httpMgr.getData(p, 'nav').subscribe(loadTreeData);\r\n            }\r\n        });\r\n\r\n\r\n        tt.expand.subscribe((tn: any) => {\r\n            this.onNodeExpanded(tn, tt);\r\n        });\r\n    }\r\n\r\n\r\n    private onNodeExpanded(tn: any, tt) {\r\n        if (tn.leaf) {\r\n            return;\r\n        }\r\n        if (!tn.children || !tn.children.length) {\r\n            const treeInfo = this.navOptions.treeInfo;\r\n            if (this.navOptions.treeInfo.loadDataType === 'async') {\r\n                let parentPath = '';\r\n                let parentLayer = -1;\r\n                const { field = '*', value = '' } = {\r\n                    ...tt.searchData\r\n                };\r\n\r\n                tn['showLoading'] = true;\r\n                tt.detectChanges();\r\n                if (treeInfo.layerType === 'parentId') {\r\n                    // ç¶IDå è½½æ¹å¼\r\n                    parentPath = tn['id'];\r\n                } else {\r\n                    const treeInfoField = treeInfo.dataField;\r\n                    if (treeInfoField) {\r\n                        // parentPath = tn.data[treeInfoField][treeInfo.pathField];\r\n                        // parentLayer = tn.data[treeInfoField][treeInfo.layerField];\r\n                        parentPath = this.lookupCmp.getPathCode(tn.data, treeInfo);\r\n                        parentLayer= this.lookupCmp.getLayerData(tn.data, treeInfo);\r\n                    } else {\r\n                        console.log('æªæ¾å°åçº§ä¿¡æ¯ã');\r\n                    }\r\n                }\r\n\r\n                if (!this.lookupCmp.uri) {\r\n                    this.lookupCmp.expandTreeNode.emit({\r\n                        instance: tt, node: tn,\r\n                        parentIdOrPath: parentPath, parentLayer, search: { value, field }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                this.getChildren(\r\n                    parentPath, parentLayer, {searchField: field === '*' ? '*' : field, searchValue: value}, tt\r\n                ).pipe(\r\n                    switchMap((data: any) => {\r\n                        if (data && data.items && data.items.length) {\r\n                            return of(data);\r\n                        } else {\r\n                            return this.getChildren(parentPath, parentLayer, { searchField: '*', searchValue: ''  }, tt, true);\r\n                        }\r\n                    })\r\n                ).subscribe(data => {\r\n                    if (tt) {\r\n                        if (tn && data.items && data.items.length) {\r\n                            tt.appendChildren(data.items, tn);\r\n                        }\r\n                        tn['showLoading'] = false;\r\n                        tt.detectChanges();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private getChildren( parentPath, parentLayer, searchData: { searchField: string; searchValue: string }, tt, all = false ): Observable<any> {\r\n        const uri = this.lookupCmp.gridOptions.uri;\r\n        const search = { parentLayer, category: 'navchildren', ...searchData };\r\n        if (this.navOptions.treeInfo.layerType === 'parentId') {\r\n            search['parentId'] = parentPath;\r\n        } else {\r\n            search['parentPath'] = parentPath;\r\n        }\r\n\r\n        const param: any = this.buildParams({\r\n            searchValue: JSON.stringify(search),\r\n            customData: this.lookupCmp.customData,\r\n            enableFullTree: false,\r\n            loadTreeDataType: 'layerload',\r\n        });\r\n\r\n        if (this.lookupCmp.helpId) {\r\n            param['helpId'] = this.lookupCmp.helpId;\r\n        }\r\n\r\n        if (tt && tt.sortName) {\r\n            let sortName = tt.sortName;\r\n            const sortCol: any = this.navOptions.columns.find(n => n.field === tt.sortName);\r\n            if (sortCol) {\r\n                sortName = sortCol['fieldPath'];\r\n            }\r\n\r\n            search['sortName'] = sortName;\r\n            search['sortOrder'] = tt.sortOrder;\r\n            param.searchValue = JSON.stringify(search);\r\n        }\r\n\r\n        if (this.navConditions && this.navConditions.length && !all) {\r\n            param.navSearchConditions = this.navConditions;\r\n        }\r\n        delete param.navConditions;\r\n        return this.lookupCmp.http.getData(uri , param);\r\n    }\r\n\r\n\r\n    loadData() {\r\n        this.cmpRef.instance.allColumnsTitle = this.lookupCmp.allColumnsTitle;\r\n        if (!this.isTreeList()) {\r\n            const dt = this.cmpRef.instance as DataTableComponent;\r\n            this.initDataTable(dt);\r\n        } else {\r\n            const tt = this.cmpRef.instance as TreeTableComponent;\r\n            this.initTreeTable(tt);\r\n        }\r\n    }\r\n\r\n    onConditionsChange($event) {\r\n        this.navConditions = $event;\r\n        if (this.isTreeList()) {\r\n            const tt = this.cmpRef.instance as TreeTableComponent;\r\n            tt.search.emit();\r\n        } else {\r\n            const dt = this.cmpRef.instance as DataTableComponent;\r\n            dt.search.emit();\r\n        }\r\n    }\r\n}\r\n","import { ComponentRef } from '@angular/core';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { TreeNode, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { of } from 'rxjs';\r\nimport { debounceTime, switchMap } from 'rxjs/operators';\r\nimport { ComponentInstanceType, LookupGridDisplayType } from '../lookup-displaytype';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { LookupLeftComponent } from '../lookup-left.component';\r\n\r\n\r\nexport class LookupComponentManager {\r\n    constructor(private ins: LookupGridComponent) {}\r\n\r\n    getComponentInstance(type: ComponentInstanceType = 'datatable') {\r\n        if (!this.ins.componentRef || !this.ins.componentRef.instance) {\r\n            return null;\r\n        }\r\n\r\n        if (type === 'selected') {\r\n            return this.ins.selectedDtRef;\r\n        }\r\n\r\n        let ins = this.ins.componentRef.instance;\r\n\r\n        if (type === 'leftDataTable' || type === 'leftTree') {\r\n            const leftRef = this.ins.leftComponentRef;\r\n            if (!leftRef || !leftRef.instance || !leftRef.instance.cmpRef || !leftRef.instance.cmpRef.instance) {\r\n                return null;\r\n            }\r\n            ins = this.ins.leftComponentRef.instance.cmpRef.instance;\r\n        }\r\n\r\n        if (type === 'fav') {\r\n            ins = this.ins.favoritesComponentRef.instance;\r\n        }\r\n\r\n        switch (type) {\r\n            case 'leftDataTable':\r\n            case 'fav':\r\n            case 'datatable':\r\n                return ins as DataTableComponent;\r\n            case 'leftTree':\r\n            case 'treetable':\r\n                return ins as TreeTableComponent;\r\n            default:\r\n                if (this.ins.isTree()) {\r\n                    return ins as TreeTableComponent;\r\n                }\r\n                return ins as DataTableComponent;\r\n        }\r\n    }\r\n\r\n    createComponentWithServerData(data: any) {\r\n        if (this.ins.componentRef) {\r\n            return;\r\n        }\r\n        this.ins.idField = data.idField || this.ins.idField;\r\n        this.ins.textField = data.textField || this.ins.textField;\r\n        this.ins.valueField = data.valueField || this.ins.valueField;\r\n\r\n        this.ins.displayType = (data && data.displayType) || this.ins.displayType || 'LIST';\r\n\r\n        const dtyp = this.ins.displayType.toUpperCase();\r\n\r\n        if (this.ins.isDoublleList()) {\r\n            if (this.ins.navTreeToList && dtyp === LookupGridDisplayType.NavTreeList) {\r\n                this.ins.displayType = LookupGridDisplayType.NavList;\r\n            }\r\n\r\n            if (this.ins.treeToList) {\r\n                if (dtyp ===  LookupGridDisplayType.NavListTree) {\r\n                    this.ins.displayType = LookupGridDisplayType.NavList;\r\n                }\r\n            }\r\n\r\n        } else {\r\n            if (this.ins.treeToList) {\r\n                if (dtyp === LookupGridDisplayType.TreeList) {\r\n                    this.ins.displayType = 'LIST';\r\n                } else {\r\n                    if (dtyp ===  LookupGridDisplayType.NavListTree) {\r\n                        this.ins.displayType = LookupGridDisplayType.NavList;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n \r\n\r\n        \r\n\r\n        if (this.ins.isDoublleList() && this.ins.navTreeToList) {\r\n            if (dtyp === LookupGridDisplayType.NavTreeList) {\r\n                this.ins.displayType = LookupGridDisplayType.NavList;\r\n            }\r\n        }\r\n\r\n        this.ins.changeDetector.detectChanges();\r\n\r\n        this.ins.componentRef = this.createContent(this.ins.gridOptions);\r\n        this.createFavoriteComponent();\r\n\r\n        this.resizeComponent();\r\n    }\r\n\r\n\r\n    createFavoriteComponent() {\r\n        if (this.ins.useFavorite && !this.ins.favoritesComponentRef) {\r\n            this.ins.favoriteColumns = this.ins.favHelper.getFavoriteColumns();\r\n\r\n            const favoritesOptions = Object.assign({}, this.ins.gridOptions, {\r\n                showFilterBar: false,\r\n                pagination: false,\r\n                columns: this.ins.favoriteColumns || []\r\n            });\r\n            this.ins.favoritesComponentRef = this.createFavoritesContent(favoritesOptions);\r\n\r\n            this.resizeComponent('fav');\r\n        }\r\n    }\r\n\r\n\r\n    private reloadTreeDataForExpand(expandLevel) {\r\n        const uri = this.ins.gridOptions.uri;\r\n        const tt = this.ins.componentRef.instance as TreeTableComponent;\r\n        const { field = '*', value = '' } = {\r\n            ...tt.searchData\r\n        };\r\n        const search = { category: 'all', searchValue: value, searchField: field, layerNum: expandLevel };\r\n\r\n\r\n        const param = {\r\n            searchValue: JSON.stringify(search),\r\n            customData: this.ins.customData,\r\n            enableFullTree: this.ins.enableFullTree,\r\n            loadTreeDataType: this.ins.loadTreeDataType\r\n        };\r\n\r\n\r\n        if (this.ins.helpId) {\r\n            param['helpId'] = this.ins.helpId;\r\n        }\r\n\r\n        if (tt && tt.sortName) {\r\n            Object.assign(param, {\r\n                sortName: tt.sortName,\r\n                sortOrder: tt.sortOrder\r\n            });\r\n        }\r\n        this.ins.showLoading();\r\n        return this.ins.http.getData(uri, param).subscribe((data: any) => {\r\n            this.ins.closeLoading();\r\n            const nodes = this.ins.checkNodeCanBeSelect(data.items, expandLevel === -1);\r\n            this.ins.items = nodes;\r\n            tt.loadData(nodes);\r\n            tt.psRef.directiveRef.scrollToTop(0);\r\n        });\r\n    }\r\n\r\n    private setTreeNodeExpandBy(nodes: TreeNode[], level) {\r\n        if (!nodes || !nodes.length) {\r\n            return;\r\n        }\r\n        nodes.forEach((n: TreeNode) => {\r\n            const layer = n.data[this.ins.treeInfo.dataField].layer;\r\n\r\n            const expandLayer = layer + level - 1;\r\n\r\n            n.expanded = layer <= expandLayer ? true : n.expanded;\r\n            if (n.children && n.children.length && layer + 1 <= expandLayer) {\r\n                this.setTreeNodeExpandBy(n.children, level);\r\n            }\r\n        });\r\n    }\r\n\r\n    // å¯ç¨æ å¸®å©å³é®èååè½\r\n    private useContextMenuForTree(cmpRef: ComponentRef<any>) {\r\n        const { maxLevel, enableContextMenu, language } = this.ins.treeTableOptions;\r\n        if (enableContextMenu && maxLevel) {\r\n            const levelMenus = [];\r\n            for (let i = 1; i <= maxLevel; i++) {\r\n                const title = language['expand' + i];\r\n                levelMenus.push({ id: 30 + 1, code: i, title, handle: (t) => {\r\n                    // åéè¯·æ±è·åæ°æ®\r\n                    const level = t.menu.code;\r\n                    if (isLoadAllTreeData() ) {\r\n                        this.setTreeNodeExpandBy(this.ins.items, level);\r\n                        cmpRef.instance.updateSerializedValue();\r\n                    } else {\r\n                        const { dataField, layerField } = this.ins.treeInfo;\r\n                        const firstNodeData = (this.ins.items || [])[0];\r\n                        if (firstNodeData && firstNodeData.data) {\r\n                            const minLayer = this.ins.utils.getValue(`${dataField}.${layerField}`, firstNodeData.data);\r\n                            let _level = minLayer + level - 1;\r\n                            this.reloadTreeDataForExpand(_level);\r\n                        }\r\n                    }\r\n                } });\r\n            }\r\n\r\n            const isLoadAllTreeData = () => {\r\n                if (this.ins.loadTreeDataType === 'default') {\r\n                    return cmpRef.instance.loadDataType === 'all';\r\n                } else {\r\n                    return this.ins.loadTreeDataType === 'loadall';\r\n                }\r\n            };\r\n\r\n            const contextMenus = [\r\n                {\r\n                    id:6, code: 'checkchildnodes', title: 'å¾éä¸çº§æ°æ®',\r\n                    visible: (e) => {\r\n                        // console.log(e);\r\n                        return !e.data.node.selectable && !this.ins.singleSelect && e.data.node.children && e.data.node.children.length\r\n                    },\r\n                    handle: (t) => {\r\n                        if (cmpRef) {\r\n                            const nodeIds = cmpRef.instance.getChildNodes(t.data.id).filter(n => n.selectable).map(n => n[this.ins.idField]);\r\n                            // const nodeIds = t.data.node.children.map(n => n[this.ins.idField]);\r\n                            cmpRef.instance.checkedNodes(nodeIds);\r\n                            cmpRef.instance.selectNodes(nodeIds);\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    id:5, code: 'uncheckchildnodes', title: 'åæ¶å¾éä¸çº§æ°æ®',\r\n                    visible: (e) => {\r\n                        // console.log(e);\r\n                        return !e.data.node.selectable && !this.ins.singleSelect && e.data.node.children && e.data.node.children.length\r\n                    },\r\n                    handle: (t) => {\r\n                        if (cmpRef) {\r\n                            // const nodeIds = t.data.node.children.map(n => n[this.ins.idField]);\r\n                            const nodeIds = cmpRef.instance.getChildNodes(t.data.id).filter(n => n.selectable).map(n => n[this.ins.idField]);\r\n                            cmpRef.instance.unCheckedNodes(nodeIds);\r\n                            cmpRef.instance.unSelectNodes(nodeIds);\r\n                        }\r\n                    }\r\n                },\r\n                '-',\r\n                {\r\n                    id: 1, code: 'expandall', title: language.expandall, handle: (t) => {\r\n                        if (cmpRef && isLoadAllTreeData()) {\r\n                            cmpRef.instance.expandAll();\r\n                        } else {\r\n                            // åéè¯·æ±è·åæ°æ®\r\n                            this.reloadTreeDataForExpand(-1);\r\n                        }\r\n                    }\r\n                },\r\n                { id: 2, code: 'collapseall', title: language.collapseall, handle: (t) => {\r\n                    if (cmpRef) {\r\n                        cmpRef.instance.collapseAll();\r\n                    }\r\n                } },\r\n                '-',\r\n                {\r\n                    id: 3, title: language.expandByLayer,\r\n                    children: levelMenus\r\n                }\r\n            ];\r\n            this.ins.treeTableOptions.contextMenuItems = contextMenus;\r\n\r\n            cmpRef.instance.beforeShowContextMenu = () => {\r\n                return of({show: !cmpRef.instance.state.searched});\r\n            };\r\n        }\r\n    }\r\n\r\n    getCmpHeight(isFav = false) {\r\n        return this.ins.dialogMgr.getHeight() - (isFav ? 10 :this.ins.getFilterBarHeight());\r\n    }\r\n\r\n    createContent(opts: any): ComponentRef<any> {\r\n\r\n        if (this.ins.componentRef) {\r\n            return;\r\n        }\r\n\r\n        const type = this.ins.getComponentType();\r\n\r\n        const cmpFac = this.ins.cfr.resolveComponentFactory(type);\r\n        let cmpRef: ComponentRef<any> = null;\r\n        if (this.ins.isDoublleList()) {\r\n            cmpRef = this.ins.centerContainer.createComponent(cmpFac);\r\n        } else {\r\n            cmpRef = this.ins.contentContainer.createComponent(cmpFac);\r\n        }\r\n\r\n        if (this.ins.isTree()) {\r\n            opts.fit = true;\r\n            opts.pagination = false;\r\n\r\n            opts.fast = true;\r\n            opts.fitColumns = false;\r\n            \r\n            this.useContextMenuForTree(cmpRef);\r\n        } else {\r\n            opts.fill = true;\r\n        }\r\n        opts.autoFitColumns = true;\r\n\r\n        const ttOpts = this.ins.treeTableOptions || {};\r\n        Object.assign(cmpRef.instance, opts, { allColumnsTitle: this.ins.allColumnsTitle, ...ttOpts });\r\n\r\n        this.ins.componentRef = cmpRef;\r\n        this.resizeComponent();\r\n        return cmpRef;\r\n    }\r\n\r\n    // åå»ºæ¶èCMP\r\n    createFavoritesContent(opts: any): ComponentRef<any> {\r\n        const type = this.ins.getComponentType();\r\n        \r\n        const cmpFac = this.ins.cfr.resolveComponentFactory(type);\r\n        let cmpRef = null;\r\n        cmpRef = this.ins.favoritesContainer.createComponent(cmpFac);\r\n        \r\n        if (this.ins.isTree()) {\r\n            opts.fit = true;\r\n            opts.pagination = false;\r\n        } else {\r\n            opts.fill = true;\r\n        }\r\n        opts.autoFitColumns = true;\r\n\r\n        Object.assign(cmpRef.instance, opts, {\r\n            width: this.ins.dialog.size.width - this.ins.getSpaceWidth(),\r\n            height: this.ins.dialogMgr.getHeight()\r\n        });\r\n\r\n\r\n        // è®¢éæ¶èå¤¹åè¡¨ä¸­ç»ä»¶çç¸å³äºä»¶\r\n        this.ins.favHelper.initFavoriteComponentEvent(cmpRef);\r\n\r\n        return cmpRef;\r\n    }\r\n\r\n    resizeComponent(type: ComponentInstanceType = 'datatable') {\r\n        const size = {\r\n            width: this.ins.dialog.size.width - this.ins.getSpaceWidth(),\r\n            height: this.getCmpHeight(type == 'fav') \r\n        };\r\n\r\n        if (this.ins.isDoublleList() && (type === 'datatable' || type === 'treetable')) {\r\n            size.width = this.ins.dialog.size.width - this.ins.leftPanelWidth - this.ins.getSpaceWidth(true);\r\n        }\r\n\r\n        this.getComponentInstance(type).resize(size);\r\n    }\r\n\r\n    private getChildNodes(node: TreeNode) {\r\n        const nodes: any = [];\r\n        if (node.selectable || node.selectable === undefined) {\r\n            nodes.push(node);\r\n        }\r\n        if (node.children && node.children.length) {\r\n            node.children.forEach(n => {\r\n                nodes.push(...this.getChildNodes(n));\r\n            })\r\n        }\r\n\r\n        return nodes;\r\n    }\r\n\r\n    /** åå»ºå·¦ä¾§ç»ä»¶ */\r\n    createLeftComponent(ops: any) {\r\n        let dtFac = null;\r\n        if (this.ins.isDoublleList()) {\r\n            dtFac = this.ins.cfr.resolveComponentFactory(LookupLeftComponent);\r\n        }\r\n        this.ins.leftComponentRef = this.ins.leftContainer.createComponent(dtFac);\r\n        ops.height = this.ins.dialogMgr.getHeight();\r\n\r\n        if (this.ins.dialogWidth < this.ins.navLookupDialogMinWidth) {\r\n            this.ins.dialogWidth = this.ins.navLookupDialogMinWidth;\r\n            this.ins.dialog.reSize({ width: this.ins.dialogWidth });\r\n            this.ins.resizeCmp({ width: this.ins.dialog.size.width });\r\n        }\r\n\r\n        if (ops.width !== this.ins.leftPanel.width) {\r\n            // é»è®¤ 1 : 2\r\n            this.ins.leftPanel.resize({\r\n                width: this.ins.leftPanel.width,\r\n                height: ops.height\r\n            });\r\n            this.ins.resizeCmp({ width: this.ins.dialog.size.width });\r\n        }\r\n\r\n        // this.resizeComponent();\r\n\r\n        this.ins.leftComponentRef.instance.lookupCmp = this.ins;\r\n        this.ins.leftComponentRef.instance.navOptions = ops;\r\n\r\n\r\n        this.ins.leftComponentRef.instance.selected\r\n            .pipe(\r\n                debounceTime(100),\r\n                switchMap((d: any) => {\r\n                    if (d && d.data) {\r\n                        this.ins.navigationFilter = {\r\n                            selected: d.data,\r\n                            idValue: this.getNavigationFilter(d.data),\r\n                            searchField: '',\r\n                            searchValue: ''\r\n                        };\r\n                    } else {\r\n                        this.ins.navigationFilter = undefined;\r\n                    }\r\n                    // å è½½å³ä¾§æ°æ®\r\n                    const p = {\r\n                        pageInfo: {\r\n                            pageIndex: 1, // tfs 638840\r\n                            pageSize: this.ins.gridOptions.pageSize\r\n                        }\r\n                    };\r\n\r\n                    if (this.ins.includeSubordinates && d && d.node && ops.treeInfo) {\r\n                        const {layerType, pathField, loadDataType, dataField} = ops.treeInfo\r\n                        if (loadDataType === 'all') {\r\n                            const rowDatas = this.getChildNodes(d.node).map(n => n.data);\r\n                            this.ins.navigationFilter.idValue = this.getNavigationFilter(rowDatas);\r\n                        } else {\r\n                            if (layerType == 'pathcode') {\r\n                                // p['navNodePathCode'] = d.data[dataField][pathField];\r\n                                p['navNodePathCode'] = this.ins.getPathCode(d.data, ops.treeInfo);\r\n                                this.ins['navNodePathCode'] = p['navNodePathCode'];\r\n                            }\r\n                        }\r\n                    } else  {\r\n                        this.ins['navNodePathCode'] = '';\r\n                    }\r\n\r\n                    const dataCmpRef = this.getComponentInstance();\r\n                    const { sortName, sortOrder } = dataCmpRef;\r\n                    Object.assign(p, { search: this.ins._searchState, sortName, sortOrder });\r\n                    return this.ins.httpMgr.getData(p, 'list');\r\n                })\r\n            )\r\n            .subscribe(res => {\r\n                this.ins.closeLoading();\r\n                this.ins.loadDataWhenOpen = true;\r\n\r\n                // if (this.ins.useFavorite && !this.ins.isTree()) {\r\n                //     this.ins.favHelper.updateFavoritesStatus(res.items);\r\n                // }\r\n                // this.ins.loadDataTableData(res);\r\n                \r\n                this.ins.loadData(res, false);\r\n\r\n                setTimeout(() => {\r\n                    // éä¸­æ°æ®\r\n                    this.ins.selectionMgr.selectCurrentValue();\r\n                    this.ins.changeDetector.detectChanges();\r\n                });\r\n            });\r\n\r\n        return this.ins.leftComponentRef.instance.createComponent();\r\n    }\r\n\r\n    // è·åå³èæ°æ®, å³ä¾§æ°æ®ä¸­ å³èåå­æ®µçå¼\r\n    private getNavigationFilter(navRow: any) {\r\n        if (this.ins.navigationOptions.relations && this.ins.navigationOptions.relations.length) {\r\n            const result = [];\r\n            this.ins.navigationOptions.relations.forEach(r => {\r\n                const k = r.groupField;\r\n                const dField = r.helpField;\r\n                const rf: any = { fieldName: dField, fieldValue: '' };\r\n\r\n                if (Array.isArray(navRow)) {\r\n                    const vals = navRow.map(n => {\r\n                        return k.split('.').reduce((o, c) => {\r\n                            return o[c];\r\n                        }, n);\r\n                    });\r\n                    rf.fieldValue = vals.join(',');\r\n                } else {\r\n                    rf.fieldValue = k.split('.').reduce((o, c) => {\r\n                        return o[c];\r\n                    }, navRow);\r\n                }\r\n\r\n                result.push(rf);\r\n            });\r\n            return result;\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import { RendererStyleFlags2 } from '@angular/core';\r\nimport { fromEvent, of, race, Subscription } from 'rxjs';\r\nimport { buffer, bufferCount, debounceTime, filter, first, map, repeat } from 'rxjs/operators';\r\nimport { PickingResult } from '../lookup-grid-options';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\n\r\nexport class LookupDialogManager {\r\n\r\n    private lookupInit: Subscription = null;\r\n    private _loadDataWhenOpen = true;\r\n    private _navSelectedId = '';\r\n    private _selectFirstInNav = false;\r\n    private dialogClosedSubscription: Subscription = null;\r\n    private dialogOpenedSubscription: Subscription = null;\r\n    \r\n    private keyDownHandler = null;\r\n    private _okbtnclick$: Subscription = null;\r\n\r\n    constructor(private ins: LookupGridComponent) { }\r\n\r\n    private unsubscribes(){\r\n        if (this.lookupInit) {\r\n            this.lookupInit.unsubscribe();\r\n            this.lookupInit = null;\r\n        }\r\n\r\n        if (this.dialogClosedSubscription) {\r\n            this.dialogClosedSubscription.unsubscribe();\r\n            this.dialogClosedSubscription = null;\r\n        }\r\n\r\n        if (this.dialogOpenedSubscription) {\r\n            this.dialogOpenedSubscription.unsubscribe();\r\n            this.dialogOpenedSubscription = null;\r\n        }\r\n\r\n    }\r\n    // å¸®å©çªå£å³é­ååä¸äºæ¸çå·¥ä½\r\n    dialogClosed() {\r\n        if (this.ins.displayText !== this.ins.originalText && !this.ins.nosearch) {\r\n            this.ins.displayText = this.ins.originalText;\r\n            this.ins.setModelValue(this.ins.displayText);\r\n        }\r\n        if (this.ins.componentRef) {\r\n            this.ins.componentRef.destroy();\r\n            this.ins.componentRef = null;\r\n        }\r\n\r\n        if (this.ins.favoritesComponentRef) {\r\n            this.ins.favoritesComponentRef.destroy();\r\n            this.ins.favoritesComponentRef = null;\r\n        }\r\n\r\n        if (this.ins.contentContainer) {\r\n            this.ins.contentContainer.clear();\r\n        }\r\n\r\n        if (this.ins.centerContainer) {\r\n            this.ins.centerContainer.clear();\r\n        }\r\n\r\n        if (this.ins.leftComponentRef) {\r\n            this.ins.leftComponentRef.destroy();\r\n            this.ins.leftComponentRef = null;\r\n        }\r\n\r\n        if (this.ins.leftContainer) {\r\n            this.ins.leftContainer.clear();\r\n        }\r\n\r\n\r\n        this.ins.isShow = false;\r\n        this.ins.isTextChange = false;\r\n        if (this.ins.dialog) {\r\n            this.ins.content = null;\r\n        }\r\n\r\n        this.ins.navigationFilter = null;\r\n\r\n        this.ins.lookupUtils.pendingEnd();\r\n\r\n        if (this.ins.helpId) {\r\n            this.ins.displayType = '';\r\n        }\r\n\r\n\r\n        this.unsubscribes();\r\n\r\n        // this.ins.items = [];\r\n        this.ins.favoriteItems = [];\r\n        this.ins.lookupSelectionSer.initFavoriteItems([]);\r\n\r\n        this.ins.isTabChanged = false;\r\n\r\n        if (this.ins.uri) {\r\n            this.ins.items = [];\r\n        }\r\n        this.ins._searchState = null;\r\n\r\n\r\n        this.ins.pageIndex = 1;\r\n\r\n        this.ins.loadDataWhenOpen = this._loadDataWhenOpen;\r\n        this.ins.navSelectedIds = this._navSelectedId;\r\n        this.ins.selectFirstInNav = this._selectFirstInNav;\r\n\r\n        this.ins.isGetAllChidlNodes = false;\r\n\r\n        this.ins.enableGetAllChildNodes = true;\r\n\r\n        // ä¿å­ä¸ªæ§åæ°æ®\r\n        if (this.ins.usePersionalConf && this.ins.favoriteDataFrom !== 'locale') {\r\n            this.ins.httpMgr.submitFavoriteData('dialog closed event.');\r\n        }\r\n\r\n        if (this.keyDownHandler) {\r\n            this.keyDownHandler();\r\n            this.keyDownHandler = null;\r\n        }\r\n        if (this.ins.inputGroup) {\r\n            this.ins.inputGroup.focus();\r\n        }\r\n\r\n        this.ins.userInitialConfig.reset();\r\n\r\n        this.ins.treeInfo = this.ins._treeInfo_;\r\n\r\n        this.ins.lookupUtils.destroy();\r\n        this.ins.dialogClosed.emit();\r\n\r\n        if (this.ins.includeSubordinates$$) {\r\n            this.ins.includeSubordinates$$.unsubscribe();\r\n            this.ins.includeSubordinates$$ = null;\r\n        }\r\n\r\n        this.ins.conditions = [];\r\n        \r\n\r\n        this.ins.searching = false;\r\n\r\n        if (this.ins.dtEventMgr) {\r\n            this.ins.dtEventMgr['_sortState'] = null;\r\n        }\r\n\r\n        if (this.ins.ttEventMgr) {\r\n            this.ins.ttEventMgr['_sortState'] = null;\r\n        }\r\n\r\n        if (this._okbtnclick$) {\r\n            this._okbtnclick$.unsubscribe();\r\n            this._okbtnclick$ = null;\r\n        }\r\n    }\r\n\r\n    onDialogCreated() {\r\n        this._loadDataWhenOpen = this.ins.loadDataWhenOpen;\r\n        this._navSelectedId = this.ins.navSelectedIds;\r\n        this._selectFirstInNav = this.ins.selectFirstInNav;\r\n\r\n        this.ins.dialogCreatedSubscription = this.ins.dialogCreated.subscribe(dlg => {\r\n            if (dlg) {\r\n                this.ins.setContainerMargin();\r\n                if (this.ins.dialogOpenedSubscription) {\r\n                    this.ins.dialogOpenedSubscription.unsubscribe();\r\n                }\r\n                if (this.ins.dialogClosedSubscription) {\r\n                    this.ins.dialogClosedSubscription.unsubscribe();\r\n                }\r\n                this.registerDialogEvent();\r\n                if (this.ins.isRecordSize) {\r\n                    const dlgSize = this.ins.personalConfigService.getDialogSize();\r\n                    if (dlgSize) {\r\n                        const { width, height } = dlgSize;\r\n                        this.ins.dialogWidth = width ? width : this.ins.dialogWidth;\r\n                        this.ins.dialogHeight = height ? height : this.ins.dialogHeight;\r\n\r\n                        // 20200908 æ´æ°ç°çªå£çå°ºå¯¸ by Lucas\r\n                        dlg.width = this.ins.dialogWidth;\r\n                        dlg.height = this.ins.dialogHeight;\r\n                    }\r\n                }\r\n                dlg.show();\r\n            }\r\n        });\r\n\r\n        this.ins.subscriptions.push(this.ins.dialogCreatedSubscription);\r\n    }\r\n\r\n    checkDictPickingResult(pr: PickingResult | any) {\r\n        let o = true;\r\n        if (pr === undefined || pr === null || pr === '') {\r\n            o = true;\r\n        }\r\n\r\n        if (typeof pr === 'boolean') {\r\n            o = pr;\r\n        }\r\n\r\n        let customData, selectedIds, message;\r\n        customData = this.ins.customData;\r\n        selectedIds = this.ins.selectedIds;\r\n\r\n        if (typeof pr === 'object') {\r\n            if (pr.showDialog === undefined) {\r\n                o = true;\r\n            } else {\r\n                o = pr.showDialog;\r\n            }\r\n\r\n            if (pr.hasOwnProperty('data')) {\r\n                /** ä¿å­å¸®å©åä¼ éçæ°æ® */\r\n                customData = pr.data;\r\n            }\r\n            selectedIds = pr.selectedIds || null;\r\n\r\n            if (pr.message) {\r\n                message = pr.message;\r\n            }\r\n        }\r\n\r\n        return { show: o, customData, selectedIds, message };\r\n    }\r\n\r\n    canOpenDialog(pr: PickingResult | any) {\r\n        const {show, customData, selectedIds, message} = this.checkDictPickingResult(pr);\r\n        this.ins.customData = customData;\r\n        this.ins.selectedIds = selectedIds || null;\r\n        if (message) {\r\n            this.ins.notifyService.warning(message);\r\n        }\r\n\r\n        this.ins.isReady = false;\r\n        this.ins.isShow = show;\r\n    }\r\n\r\n    getHeight() {\r\n        return this.ins.dialog.size.contentHeight -\r\n                this.ins.containerMargin.bottom -\r\n                this.ins.containerMargin.top -\r\n                (!this.ins.useNewLayout ? (this.ins.useFavorite ? 40 :  0) : 56);\r\n            \r\n    }\r\n\r\n\r\n    private getMainGridSize() {\r\n        if (this.ins.isDoublleList()) {\r\n            return {\r\n                width: this.ins.dialog.size.width - this.ins.leftPanel.width - 27,\r\n                height: this.getHeight()\r\n            };\r\n        }\r\n\r\n        return {\r\n            width: this.ins.dialog.size.width - this.ins.containerMargin.left - this.ins.containerMargin.right,\r\n            height: this.getHeight()\r\n        };\r\n    }\r\n\r\n    resetDialogContentHeight() {\r\n        const { header: hHeight, footer: fHeight } = this.ins.dialog.size;\r\n        return this.ins.dialogHeight - hHeight - fHeight -  this.ins.containerMargin.bottom - this.ins.containerMargin.top;\r\n    }\r\n\r\n\r\n    private registerOkBtnEvent() {\r\n        if (this.ins.okButton) {\r\n            const doubleClickDuration = 250;\r\n            const leftClick$ = fromEvent(this.ins.okButton.nativeElement, 'click').pipe(filter((event: any) => event.button === 0));\r\n            const debounce$ = leftClick$.pipe(debounceTime(doubleClickDuration));\r\n            const clickLimit$ = leftClick$.pipe(bufferCount(2));\r\n            const bufferGate$ = race(debounce$, clickLimit$)\r\n            .pipe(\r\n              // We are only interested in the first event. After that\r\n              // we want to restart.\r\n              first(),\r\n              repeat(),\r\n            );\r\n\r\n            this._okbtnclick$ = leftClick$.pipe(\r\n                buffer(bufferGate$),\r\n                // Here we map the buffered events into the length of the buffer\r\n                // If the user clicked once, the buffer is 1. If he clicked twice it is 2\r\n                map(clicks => clicks.length)\r\n            ).subscribe(clicks => {\r\n                this.ins.selectItem();\r\n            });\r\n        }\r\n    }\r\n\r\n    /** æ³¨åå¼¹åºçªå£çäºä»¶ */\r\n    private registerDialogEvent() {\r\n        this.dialogOpenedSubscription = this.ins.dialog.opened.subscribe(() => {\r\n\r\n            this.ins.dialogContentHeight = this.resetDialogContentHeight();\r\n\r\n            this.ins.gridOptions = Object.assign(this.ins.gridOptions, this.getMainGridSize());\r\n            this.ins.dialog.el.nativeElement.querySelector('.ps-content').style.height = '100%';\r\n\r\n            if (this.ins.displayType && this.ins.customDisplayType) {\r\n                this.ins.componentRef = this.ins.lookupCmpMgr.createContent(this.ins.gridOptions);\r\n                this.ins.lookupCmpMgr.createFavoriteComponent();\r\n            }\r\n\r\n            this.ins.initData();\r\n\r\n            // ä¿®æ¹å¸®å©çªå£çç¶æ\r\n            this.ins.lookupUtils.pendingEnd();\r\n            this.ins.dialogOpened.emit();\r\n\r\n            // æ³¨åç¡®å®æé®ç¹å»äºä»¶\r\n            this.registerOkBtnEvent();\r\n\r\n        });\r\n\r\n        this.lookupInit = this.ins.lookupinitializationSubject.subscribe(() => {\r\n            this.ins.loadDataWhenOpen = true;\r\n            // æ³¨åå¿«æ·é®\r\n            this.registerShortcutKey();\r\n            // çå¬å·¦ä¾§å°ºå¯¸ååäºä»¶\r\n            if (this.ins.leftPanel) {\r\n                if (!this.ins.leftPanel.resizing.observers.length) {\r\n                    const leftPanelResize$ = this.ins.leftPanel.resizing.pipe(\r\n                        debounceTime(50)\r\n                    ).subscribe((s: any) => {\r\n                        const size = {\r\n                            width: this.ins.dialog.size.width - s.size.width - this.ins.getSpaceWidth(true),\r\n                            height: this.getHeight() - this.ins.getFilterBarHeight()\r\n                        }\r\n                        this.ins.componentRef.instance.resize(size);\r\n                        this.ins.leftComponentRef.instance.resize(s.size);\r\n                    });\r\n\r\n                    this.ins.subscriptions.push(leftPanelResize$);\r\n                }\r\n                if (this.ins.isDoublleList() && this.ins.leftComponentRef) {\r\n                    this.ins.leftComponentRef.instance.updateScrollPosition();\r\n                }\r\n            }\r\n\r\n            if (this.ins.cascadeSelect) {\r\n                const {selectEl, panelRef } = this.ins.cascadeSelect;\r\n                this.ins.cascadeSelect.beforeShow = () => {\r\n                    if (selectEl && panelRef) {\r\n                        panelRef.style.left = `${selectEl.offsetLeft}px`;\r\n                        if (this.ins.localService.localeId.toLocaleLowerCase() == 'en') {\r\n                            panelRef.style.width = 'auto';\r\n                            panelRef.style.maxWidth = '200px'\r\n                        }\r\n                        return of(true);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.dialogClosedSubscription = this.ins.dialog.closed.subscribe(() => {\r\n            // è¾å¥æ¡åååï¼å¼¹åºçªå£æªéæ©æ°æ®å³é­çªå£æ¶ï¼è¿ååå§å¼\r\n            this.ins.dialogMgr.dialogClosed();\r\n        });\r\n\r\n        // this.ins.subscriptions.push(this.ins.dialogClosedSubscription);\r\n    }\r\n\r\n    private registerShortcutKey() {\r\n        // åè½¦ï¼ä¸ç¡®å®æé®å¤çé»è¾ä¸è³ã\r\n        const dlgContainerDom = this.ins.dialog.el.nativeElement.querySelector('.farris-modal');\r\n\r\n        if (dlgContainerDom && this.ins.shortcutKey && !this.keyDownHandler) {\r\n            this.keyDownHandler = this.ins.eventManager.addEventListener(dlgContainerDom, 'keydown', (e: KeyboardEvent) => {\r\n                e.stopPropagation();\r\n                const { moveUp, moveDown, searchFocus, confirm, nextPager, prevPager, expand, collapse } = this.ins.shortcutKey;\r\n                const arrowKey = [moveUp, moveDown, expand, collapse];\r\n                if (arrowKey.includes(e.code)) {\r\n                    this.ins.componentRef.instance.onKeydownEvent(e);\r\n                } else if (e.key === confirm) {\r\n                    if (e.target['nodeName'] === 'INPUT' && !e.ctrlKey) {\r\n                        return;\r\n                    }\r\n                    this.ins.okButton.nativeElement.click();\r\n                } else if (e.code === searchFocus) { // å¸®å©çªå£æ¥è¯¢è¾å¥æ¡ç¦ç¹\r\n                    e.preventDefault();\r\n                    this.ins.componentRef.instance.inputGroup.focus();\r\n                } else if (!this.ins.isTree() && (e.code === nextPager || e.code === prevPager )) {  // åé¡µ\r\n                    const isNextPager = e.code === nextPager;\r\n                    this.paginationKeyDownHandler(isNextPager);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private paginationKeyDownHandler(next = true) {\r\n        const datatableRef = this.ins.componentRef.instance;\r\n        const {pageIndex, pageSize, total} = datatableRef;\r\n        const pagerCount = Math.ceil(total / pageSize);\r\n\r\n        let newPageNum = pageIndex;\r\n        if (next) {\r\n            newPageNum = newPageNum + 1;\r\n        } else {\r\n            newPageNum = newPageNum - 1;\r\n        }\r\n\r\n        if (newPageNum > pagerCount || newPageNum < 1) {\r\n            newPageNum = pageIndex;\r\n        }\r\n\r\n        this.ins.componentRef.instance.onPageChange({ pageSize, pageIndex: newPageNum });\r\n    }\r\n\r\n}\r\n\r\n","import { Observable, of, BehaviorSubject, Subject } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { FavoriteAction } from '../lookup-displaytype';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\n\r\nexport interface SelectionState {\r\n    selecteditems: any[];\r\n    favoriteItems: any[];\r\n    quickItems: any[];\r\n}\r\n\r\nexport class LookupSelectionService {\r\n\r\n    private state: SelectionState = {\r\n        selecteditems: [],\r\n        favoriteItems: [],\r\n        quickItems: []\r\n    };\r\n\r\n    state$: BehaviorSubject<SelectionState> = new BehaviorSubject(this.state);\r\n\r\n    selected$: Observable<any[]> = this.state$.pipe(\r\n        switchMap(n => of(n.selecteditems))\r\n    );\r\n\r\n    favoriteItems$: BehaviorSubject<any> = new BehaviorSubject({items: this.state.favoriteItems, action: null });\r\n\r\n    quickItems$: Observable<any[]> = this.state$.pipe(\r\n        switchMap(n => of(n.quickItems))\r\n    );\r\n\r\n    selectionChanged$ = new Subject();\r\n\r\n    private get idField() {\r\n        return this.ins.idField;\r\n    }\r\n\r\n    constructor(private ins: LookupGridComponent) {\r\n    }\r\n\r\n    initFavoriteItems(items: any[]) {\r\n        this.state.favoriteItems = items || [];\r\n    }\r\n\r\n\r\n    //#region æ¶èæ°æ®\r\n\r\n    updateFavoriteData(data: any, action: FavoriteAction) {\r\n\r\n        if (this.ins.savingFaoriteData) {\r\n            return;\r\n        }\r\n\r\n        if (action === FavoriteAction.add) {\r\n            this.state.favoriteItems = this.state.favoriteItems.concat([data]);\r\n        } else {\r\n            this.state.favoriteItems = this.state.favoriteItems.filter(n => n[this.idField] !== data[this.idField]);\r\n        }\r\n\r\n        this.favoriteItems$.next({ items: this.state.favoriteItems, action, data });\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region å¤éæ°æ®\r\n\r\n    loadSelections( data: []) {\r\n        this.state.selecteditems = [...data];\r\n        this.state$.next(this.state);\r\n    }\r\n\r\n    getSelections() {\r\n        return [...this.state.selecteditems];\r\n    }\r\n\r\n    select(item: any) {\r\n        if (item) {\r\n            this.state.selecteditems = [...this.state.selecteditems, item];\r\n            this.state$.next(this.state);\r\n\r\n            this.selectionChanged$.next({ data: [item[this.idField]], selected: true });\r\n        }\r\n    }\r\n\r\n    unselectByPathcode(pathcode: string) {\r\n        const ids = [];\r\n        this.state.selecteditems = this.state.selecteditems.filter(n => {\r\n            const _pathcode = this.ins.getPathCode(n, this.ins.treeInfo);\r\n            const r = _pathcode && _pathcode.indexOf(pathcode) !== 0;\r\n            if (!r) {\r\n                ids.push(n[this.idField]);\r\n            }\r\n            return r;\r\n        });\r\n\r\n        this.selectionChanged$.next({ data: ids, selected: false });\r\n\r\n    }\r\n\r\n    updateSelections(data: any, checked = true) {\r\n\r\n        if (!Array.isArray(data)) {\r\n            data = [data];\r\n        }\r\n\r\n        const items = [ ...data ];\r\n        const idField = this.idField;\r\n        const ids = items.map(n => n[idField]);\r\n        if (checked) {\r\n            if (this.state.selecteditems && !this.state.selecteditems.length) {\r\n                this.state.selecteditems = items;\r\n            } else {\r\n                ids.forEach((n, i) => {\r\n                    if (!this.state.selecteditems.find(r => r[idField] == n)) {\r\n                        this.state.selecteditems.push(items[i]);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            if (data) {\r\n                this.state.selecteditems = this.state.selecteditems.filter(n => {\r\n                    return ids.indexOf(n[idField]) === -1;\r\n                });\r\n            }\r\n        }\r\n\r\n        this.state$.next(this.state);\r\n        this.selectionChanged$.next({ data: ids, selected: checked });\r\n    }\r\n\r\n    unSelect(id: any) {\r\n        if (id) {\r\n            if (Array.isArray(id)) {\r\n                this.state.selecteditems = this.state.selecteditems.filter(n => {\r\n                    return id.indexOf(n[this.idField]) === -1;\r\n                });\r\n                this.selectionChanged$.next({ data: id, selected: false });\r\n            } else {\r\n                this.state.selecteditems = this.state.selecteditems.filter(n => n[this.idField] != id);\r\n                this.selectionChanged$.next({ data: [id], selected: false });\r\n            }\r\n\r\n            this.state$.next(this.state);\r\n        }\r\n    }\r\n\r\n    clearSelections() {\r\n        this.state.selecteditems = [];\r\n        this.state$.next(this.state);\r\n    }\r\n\r\n    //#endregion\r\n\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(lucas huang)\r\n * @Date: 2018-11-23 11:23:12\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2020-10-20 20:18:26\r\n * @Company: Inspur\r\n * @Version: v0.3.x\r\n */\r\n\r\nimport {Component, Input, ViewChild, OnChanges, SimpleChanges,\r\nEventEmitter,OnInit,Injector,ComponentFactoryResolver,\r\nOutput,ChangeDetectorRef,ViewEncapsulation,AfterViewInit,ViewContainerRef,\r\nforwardRef,ComponentRef,Type,ElementRef,NgZone,Renderer2,OnDestroy,HostListener,} from \"@angular/core\";\r\n\r\nimport { NG_VALUE_ACCESSOR } from \"@angular/forms\";\r\nimport { Observable, Subscription, of, Subject, BehaviorSubject } from \"rxjs\";\r\n\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport { IResizeEvent } from \"@farris/ui-draggable\";\r\nimport { MessagerService } from \"@farris/ui-messager\";\r\nimport { LoadingService, LoadingComponent } from \"@farris/ui-loading\";\r\nimport { DataTableComponent } from \"@farris/ui-datatable\";\r\nimport { TreeTableComponent, TreeNode } from \"@farris/ui-treetable\";\r\nimport { LayoutComponent, LayoutPanelComponent } from \"@farris/ui-layout\";\r\nimport { CommonUtils, DebugService, FarrisComponentInstanceService, OverLayHiddenService } from \"@farris/ui-common\";\r\nimport { EntityFilter, FilterCondition } from \"@farris/ui-common/types\";\r\nimport { ShortcutsService } from \"@farris/ui-shortcuts\";\r\nimport { InputGroupComponent } from \"@farris/ui-input-group\";\r\nimport { NotifyService } from \"@farris/ui-notify\";\r\n\r\nimport {\r\n    FAVORITE_FIELD_NAME,\r\n    INPUT_GROUP_ICON,\r\n    LookupGridDisplayType,\r\n    ExtInfoFormatter,\r\n    CustomDataFormatter,\r\n    QuickSelectOption,\r\n    QuickSelectDefaultOptions,\r\n    SearchBarMode,\r\n} from \"./lookup-displaytype\";\r\nimport { LookupComponent } from \"./lookup.component\";\r\nimport {\r\n    LookupGridOptions,\r\n    lookupGridDefaults,\r\n    LookupGridResult,\r\n    NavigationOptions,\r\n    DisplayInfo,\r\n    displayInfoDefault,\r\n    PickingResult,\r\n    TreeInfo,\r\n    LOAD_DATA_TYPE,\r\n    ONLY_SELECT_LEAF,\r\n    PersonalConfig} from \"./lookup-grid-options\";\r\nimport { ILookupHttpService, ServerSideToken } from \"./http/ILookupHttpService\";\r\nimport { NavigationFilter } from \"./http/RemoteParams\";\r\nimport { LookupLeftComponent } from \"./lookup-left.component\";\r\nimport { LookupDefaultMapping } from \"./lookup-defaut-mapping\";\r\nimport { LookupUtils } from \"./utils\";\r\nimport { PersonalConfigService } from \"./lookup-presonalConfig.service\";\r\nimport {\r\n    UtilService,\r\n    TreeNodeHelper,\r\n    FavoriteHelper,\r\n    SelectionManager,\r\n    DataTableEventManager,\r\n    TreeTableEventManager,\r\n    MultiSelectionManager,\r\n    LookupHttpManager,\r\n    LookupComponentManager,\r\n    LookupDialogManager,\r\n    onTextChanged,\r\n    LookupSelectionService,\r\n} from \"./services\";\r\nimport { catchError, map, switchMap } from \"rxjs/operators\";\r\n\r\nimport { EventManager } from \"@angular/platform-browser\";\r\nimport { cloneDeep } from \"lodash-es\";\r\nimport { SingleSelectDirective } from \"@farris/ui-forms\";\r\n\r\nexport const LOOKUPGRID_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => LookupGridComponent),\r\n    multi: true,\r\n};\r\n\r\n@Component({\r\n    selector: \"farris-lookup-grid\",\r\n    templateUrl: \"./lookup-grid.component.html\",\r\n    styleUrls: [\"./lookup-grid.component.scss\"],\r\n    providers: [\r\n        LOOKUPGRID_VALUE_ACCESSOR,\r\n        ShortcutsService,\r\n        LookupDefaultMapping,\r\n        LookupUtils,\r\n        PersonalConfigService,\r\n    ],\r\n    encapsulation: ViewEncapsulation.None,\r\n    exportAs: \"lookup\"\r\n})\r\nexport class LookupGridComponent\r\n    extends LookupComponent\r\n    implements OnInit, AfterViewInit, OnChanges, OnDestroy\r\n{\r\n    groupIcon = INPUT_GROUP_ICON;\r\n    _displayType = \"\";\r\n\r\n    /** ä½¿ç¨è¡¨åè®¾è®¡å¨ä¸­çæ¾ç¤ºç±»åãå¦åä½¿ç¨åæ°æ®è®¾ç½®çæ¾ç¤ºç±»åã é»è®¤ï¼false */\r\n    @Input() customDisplayType = false;\r\n    @Input() viewType: \"text\" | \"tag\" = \"text\";\r\n    @Input()\r\n    get displayType() {\r\n        return this._displayType;\r\n    }\r\n    set displayType(val: string) {\r\n        if (val) {\r\n            const types = Object.values(LookupGridDisplayType);\r\n            const i = types.findIndex((n) => n === val.toUpperCase());\r\n            if (i > -1) {\r\n                const keys = Object.keys(LookupGridDisplayType);\r\n                this._displayType = LookupGridDisplayType[keys[i]];\r\n            }\r\n        } else {\r\n            this._displayType = val;\r\n        }\r\n    }\r\n    /** å¯ç¨æ¸ç©ºæé® */\r\n    @Input() enableClear = true;\r\n    /** æå¡å¨ç«¯æåº */\r\n    @Input() remoteSort = true;\r\n\r\n    @Input() condition: EntityFilter;\r\n    @Input() conditions: Array<FilterCondition>;\r\n\r\n    /** æ è¡¨æ¾ç¤ºå¨éå¤éæ¡ã é»è®¤ä¸æ¾ç¤º */\r\n    @Input() showCheckAll = false;\r\n\r\n    /** æ¯å¦å¯ç¨å¤é */\r\n    @Input() singleSelect = true;\r\n    /** å¤éåéç¬¦, é»è®¤ä¸º , */\r\n    @Input() multipleChoiceSeparator = \",\";\r\n    /** ä¸»é®å­æ®µ */\r\n    @Input() idField?: string;\r\n    /** å¯ä»¥ä¸ºåæ°æ®IDãwebapiURL */\r\n    @Input() uri?: string = '';\r\n    /**\r\n     * BE REST RUI\r\n     * - æ­¤å¤è®¾ç½®å uri å¤±æ\r\n     */\r\n    @Input() beUri = \"\";\r\n    /**\r\n     * æ¾ç¤ºè¿æ»¤å·¥å·æ¡; é»è®¤ true\r\n     */\r\n    @Input() showFilterBar = true;\r\n    /** æ¯å¦å¯ç¨åé¡µ */\r\n    @Input() pagination = true;\r\n    /** å½åé¡µç´¢å¼ï¼ä» 1å¼å§ */\r\n    @Input() pageIndex = 1;\r\n    /** æ¯é¡µè®°å½æ° */\r\n    @Input() pageSize = 20;\r\n    /** å¯ç¨åé¡µè®°å½æ°åè¡¨ */\r\n    @Input() pageList = [10, 20, 30, 50, 100];\r\n    /** æ»è®°å½æ° */\r\n    @Input() total = 0;\r\n    /** å¯æå¨å */\r\n    // @Input() resizableColumns = true;\r\n    /** æ¾ç¤ºåä¿¡æ¯, é»è®¤ä¸º [] */\r\n    @Input() columns: any[] = [];\r\n\r\n    /** å¸®å©æ¥è¯¢æ¯å¦ä¸ºè¿ç«¯æ¥è¯¢ */\r\n    @Input() remoteSearch = true;\r\n\r\n    /** ææ¬åååï¼è¿è¡æå¡å¨ç«¯æ¥è¯¢ */\r\n    @Input() searchOnServer = true;\r\n    /** ä¸è¿è¡æå¡å¨æ¥è¯¢ï¼æå¥ç®å¥ */\r\n    @Input() nosearch = false;\r\n\r\n    /**\r\n     * å¯ç¨ä»»æè¾å¥åï¼å¼éè¿è¾å¥æ¶è§¦å\r\n     */\r\n    @Output() clearMappings = new EventEmitter();\r\n\r\n    /**\r\n     * åè®¸è¾å¥çå­ç¬¦æå¤§é¿åº¦ã\r\n     * ä»»æè¾å¥æ¶ï¼æ­¤å±æ§ææ\r\n     */\r\n    @Input() maxLength;\r\n\r\n    @Input() mappingFn: (rowData, mapFields, bindingData?: any) => void;\r\n    /** æ°æ®åè¡¨ */\r\n    @Input() items: any;\r\n    // æ¶èåè¡¨\r\n    @Input() favoriteItems: any[] = [];\r\n    /** èªå®ä¹æ°æ® */\r\n    @Input() customData: any;\r\n\r\n    /** ç»å®å¼æå¨çå¯¹è±¡ */\r\n    @Input() bindingData: {};\r\n\r\n    @Input() treeInfo: TreeInfo;\r\n    /** æ¯å¦å¯ç¨çº§èéæ©æ§å¶éé¡¹ */\r\n    @Input() enableCascade = false;\r\n    /** çº§èæ§å¶é»è®¤å¼ï¼ enable: åæ­¥éæ©, upï¼åå«ä¸çº§, downï¼åå«ä¸çº§, disableï¼ä»éæ©èªèº« */\r\n    @Input() cascadeStatus: \"enable\" | \"up\" | \"down\" | \"disable\" = \"enable\";\r\n    /** åå«çº§èéé¡¹çå¯ç¨ç¶æï¼é»è®¤å¨é¨å¯ç¨ */\r\n    @Input() cascadeItems = {\r\n        enable: true,\r\n        up: true, \r\n        down: true,\r\n        disable: true\r\n    }\r\n    /** æ¾ç¤ºçº§èæ§å¶ */\r\n    @Input() showCascadeControl = true;\r\n\r\n    @Input() placeholder = \"\";\r\n\r\n    /** æ¾ç¤ºå·²éè®°å½åè¡¨ã é»è®¤ä¸º false ä¸æ¾ç¤º */\r\n    @Input() showSelected = false;\r\n\r\n    /** åºç¨æ¶èå¤¹ */\r\n    @Input() useFavorite = false;\r\n    /** æ¶èæ°æ®æ¥èªäºï¼ locale: æ¬å°å­å¨ï¼ remote: æå¡å¨ç«¯å­å¨ */\r\n    @Input() favoriteDataFrom: \"locale\" | \"remote\" = \"remote\";\r\n    /** ä½¿ç¨æç¤º,å¿«æ·éæ© */\r\n    @Input() useTip = false;\r\n    /** è®°å½çªå£å¤§å° */\r\n    @Input() isRecordSize = false;\r\n\r\n    /** å¿«ééæ© */\r\n    @Input() userId: string;\r\n\r\n    /** æ¯å¦å¯ç¨éä¸­valueå¼å¯¹åºçè¡æ°æ®ï¼é»è®¤ true */\r\n    @Input() enableToSelect = true;\r\n\r\n    @Input() enableFindText = false;\r\n    /** -1: ä¸å±å¼ï¼ 0: å¨é¨å±å¼ï¼>0: å±å¼å°æå®çº§æ° */\r\n    @Input() expandLevel = -1;\r\n\r\n    @Input() navTreeTableOptions: any = {};\r\n    @Input() treeTableOptions: any = {};\r\n    @Input() dataTableOptions: any = {};\r\n\r\n\r\n    defaultTreeTableOptions = {\r\n        maxLevel: 9,\r\n        enableContextMenu: false,\r\n        contextMenuItems: [],\r\n    };\r\n\r\n    /** æ å½¢å¸®å©æ°æ®å è½½æ¹å¼ï¼ default: åç½®åæ°ï¼ loadall: å è½½ææ layerloadï¼åå±å è½½ */\r\n    @Input() loadTreeDataType: \"default\" | \"loadall\" | \"layerload\" = \"default\";\r\n\r\n    /** çªå£æå¼åç«å³å è½½æ°æ®ï¼é»è®¤ä¸º true */\r\n    @Input() loadDataWhenOpen = true;\r\n\r\n    /**\r\n     * å¯¼èªåè¡¨ï¼æ åè¡¨å¨å¸®å©æå¼åéä¸­çæ°æ®;\r\n     * è®¾ç½®åï¼`selectFirstInNav` å¤±æï¼\r\n     */\r\n    @Input() navSelectedIds = \"\";\r\n\r\n    /**\r\n     * å¯¼èªå¸®å©ï¼éä¸­ç¬¬1æ¡æ°æ®ï¼é»è®¤ä¸º false;\r\n     * æ³¨æï¼å½`navSelectedIds`ä¸ä¸ºç©ºæ¶ï¼æ­¤å±æ§å¤±æã\r\n     */\r\n    @Input() selectFirstInNav = false;\r\n\r\n    /** å¯ç¨æé å®æ´æ è¿æ»¤ */\r\n    @Input() enableFullTree = true;\r\n\r\n    /** æ¾ç¤ºææ¬èªå®ä¹å½æ° */\r\n    @Input() displayFormatter: (\r\n        value: string,\r\n        data: any,\r\n        instance: any\r\n    ) => string = undefined;\r\n    /** æ¾ç¤ºææ¬å­æ®µéåï¼ä»¥ è±æ éå·éå¼ */\r\n    @Input() displayFields = \"\";\r\n    @Input() displayTextSeparator = \"_\";\r\n\r\n    /**\r\n     * å¸®å©åæ°æ®IDï¼ä¸ä¸ºç©ºæ¶è°ç¨æå®çURI\r\n     * /api/runtime/bcc/v1.0/help/data/{helpId}\r\n     */\r\n    @Input() helpId = \"\";\r\n    /** ææ¬å¯¹é½æ¹å¼ï¼ left | center | right; é»è®¤ left */\r\n    @Input() textAlign = \"left\";\r\n\r\n    /** é¼ æ æ»è¿è¾å¥æ¡æ¶æ¾ç¤ºè¾å¥æ¡åçææ¬ä¿¡æ¯ */\r\n    @Input() enableTitle = true;\r\n    @Input() useExtendInfo = false;\r\n    @Input() extInfoFields = \"\";\r\n    @Input() extInfoFormatter: ExtInfoFormatter;\r\n    @Input() extendInfo = \"\";\r\n    /** IDE è®¾è®¡å¨èªå®ä¹æ ¼å¼å 2103 */\r\n    @Input() customFormatter: CustomDataFormatter = null;\r\n    @Input() customNavFormatter: CustomDataFormatter = null;\r\n\r\n    /** èªå®ä¹ç¡®å®äºä»¶ */\r\n    @Input() okHandler = null;\r\n    /** èªå®ä¹åæ¶äºä»¶ */\r\n    @Input() cancelHandler = null;\r\n\r\n    @Input() tagboxHeight = \"auto\";\r\n    @Input() maxTagboxHeight;\r\n\r\n    /** å¯ç¨è·åææå­çº§æ°æ®çåè½,ä»æ¯æåçº§ç  */\r\n    @Input() enableGetAllChildNodes = true;\r\n\r\n    @Input() shortcutKey = {\r\n        /** æå¼å¸®å©çªå£ */\r\n        open: \"ArrowRight\",\r\n        /** ç¡®è®¤éæ©æ°æ® */\r\n        confirm: \"Enter\",\r\n        /** æç´¢æ¡ç¦ç¹ */\r\n        searchFocus: \"F3\",\r\n        /** éä¸­ä¸ä¸æ¡ */\r\n        moveUp: \"ArrowUp\",\r\n        /** éä¸­ä¸ä¸æ¡ */\r\n        moveDown: \"ArrowDown\",\r\n        /** å±å¼èç¹ */\r\n        expand: \"ArrowRight\",\r\n        /** æå èç¹ */\r\n        collapse: \"ArrowLeft\",\r\n        /** ä¸ä¸é¡µ */\r\n        nextPager: \"PageDown\",\r\n        /** ä¸ä¸é¡µ */\r\n        prevPager: \"PageUp\",\r\n    };\r\n    /** å¿«æ·éæ©ç¸å³éç½®é¡¹ï¼é»è®¤ä¸º null, å³ä¸å¯ç¨æ­¤åè½ */\r\n    @Input() quickSelect: QuickSelectOption = null;\r\n\r\n    /** æ å½¢å¸®å© æ¯å¦ä½¿ç¨æ å½¢ç»ææ°æ®ãé»è®¤ä¸º true, å½ä¸º false æ¶ï¼æå¡å¨ç«¯æ é¡»æé æ å½¢ç»æï¼ææ®éåè¡¨è¾åº */\r\n    @Input() treeToList = false;\r\n    @Input() navTreeToList = false;\r\n\r\n    /** å¸¦å¯¼èªçå¸®å©ä¸­ï¼æ¯å¦æ¾ç¤ºå·¦ä¾§å¯¼èªé¨åãé»è®¤ true */\r\n    @Input() showNavigation = true;\r\n\r\n    /** æ°æ®éæ©åï¼å¼æ å°åè§¦å\r\n     * è¿å Observable\r\n     *      canSelect: <boolean>  æ¯å¦åè®¸éæ©\r\n     *      message: <string> ä¸åè®¸éæ©æ¶çæç¤ºä¿¡æ¯\r\n     */\r\n    @Input() beforeSelectData: (p: {\r\n        instance: any;\r\n        data: any;\r\n    }) => Observable<{ canSelect: boolean; message: string } | boolean>;\r\n\r\n    @Input() beforeLoadData: (p: { instance: any, res: LookupGridResult }) => Observable<LookupGridResult>;\r\n\r\n    /** æ¯å¦å¯ç¨æ°å¸å±\r\n     * - é»è®¤ false */\r\n    @Input() useNewLayout = false;\r\n\r\n    /** å¯ç¨å¤å­æ®µæ¥è¯¢ é»è®¤ä¸º false\r\n     * - å¯ç¨æ­¤ç¹æ§åï¼useNewLayout èªå¨å¯ç¨\r\n     */\r\n    @Input() enableMultiFieldSearch = false;\r\n    /** æç´¢å·¥å·æ¡æ¾ç¤ºæ¨¡å¼ï¼ both: å¨é¨æ¾ç¤ºï¼onlyfield: ä»æ¾ç¤ºå­æ®µï¼onlyinput: ä»æ¾ç¤ºæç´¢è¾å¥æ¡ãé»è®¤ both */\r\n    @Input() searchBarMode: SearchBarMode = SearchBarMode.both;\r\n    /** åè®¸æ¥è¯¢çå­æ®µï¼ä»å¯ç¨å¤å­æ®µæ¥è¯¢æ¶ææï¼å¤ä¸ªå­æ®µä»¥ â,â éå¼ï¼  \r\n     *  - nav å·¦ä¾§å¯¼èªå­æ®µï¼main ä¸»æ°æ®å­æ®µ;\r\n     *  - é»è®¤ä¸º null, å³ä»æææ¾ç¤ºåä¸­èªå¨æå\r\n     */\r\n    @Input() allowQueryFields:{ nav?: string, main: string } = null;\r\n\r\n    @Input() labels = {\r\n        /** æ°æ®åè¡¨*/\r\n        dataTab: '',\r\n        /** æ¶èå¤¹ */\r\n        favTab:'',\r\n        /** åæ¶å·²é */\r\n        clearAllSelected: '',\r\n        /** å·²éè®°å½é¢æ¿ä¸­ å é¤å·²é */\r\n        delSelected: ''\r\n    }\r\n\r\n    /** åè®¸ä»»æå­æ®µè¿è¡æ¥è¯¢ï¼ é»è®¤ true */\r\n    @Input() searchAnyField = true;\r\n\r\n    @Output() selectedData = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n    /** æªå¯ç¨å¤å­æ®µæ¥è¯¢æ¶è§¦å */\r\n    @Output() search = new EventEmitter();\r\n    /** å¯ç¨å¤å­æ®µæ¥è¯¢æ¶è§¦å */\r\n    @Output() query  = new EventEmitter();\r\n    // å¸®å©ææ¬æ¡ä¸­å¼ååäºä»¶\r\n    @Output() valueChanged = new EventEmitter();\r\n    @Output() loadSuccess = new EventEmitter();\r\n\r\n    @Output() pagerChanged = new EventEmitter();\r\n\r\n    @Output() expandTreeNode = new EventEmitter();\r\n    @Output() textChanged = new EventEmitter();\r\n\r\n    @Output() checkedChange = new EventEmitter<{\r\n        data: any;\r\n        isCheck: boolean;\r\n    }>();\r\n\r\n    @Output() tagRemoved = new EventEmitter();\r\n\r\n    /** åå®¹ä¸­çç½è¾¹è· */\r\n    containerMargin = { top: 0, bottom: 5, left:  14, right: 14 };\r\n    containerStyle = {\r\n    };\r\n\r\n    _gridOptions: LookupGridOptions = lookupGridDefaults;\r\n\r\n    get gridOptions() {\r\n        if (\r\n            this.useFavorite &&\r\n            this.columns &&\r\n            this.columns.length > 0 &&\r\n            !this.columns.find((item) => item.field === FAVORITE_FIELD_NAME)\r\n        ) {\r\n            this.columns.push({\r\n                field: FAVORITE_FIELD_NAME,\r\n                title: \"\",\r\n                width: 40,\r\n                align: \"center\",\r\n                fixed: 'right',\r\n                // fixedWidth: true,\r\n                formatter: this.favHelper.favoriteColumnFormatter,\r\n            });\r\n        }\r\n        this._gridOptions = Object.assign(this._gridOptions, {\r\n            singleSelect: this.singleSelect,\r\n            idField: this.idField,\r\n            uri: this.uri,\r\n            showFilterBar:  this.enableMultiFieldSearch? false: this.showFilterBar,\r\n            pagination: this.pagination,\r\n            pageIndex: this.pageIndex,\r\n            pageSize: this.pageSize,\r\n            pageList: this.pageList,\r\n            total: this.total,\r\n            items: this.items,\r\n            columns: this.columns,\r\n            resizableColumns: true,\r\n            fixedHeader: true,\r\n            hover: true,\r\n            treeInfo: this.treeInfo,\r\n            searchAnyField: this.searchAnyField\r\n        });\r\n\r\n        return this._gridOptions;\r\n    }\r\n    @Input() set gridOptions(opts) {\r\n        this._gridOptions = Object.assign({}, this._gridOptions, opts);\r\n        // this.selectedColumns = this.multiSelMgr.initSelectedColumns();\r\n    }\r\n\r\n    @ViewChild(\"contentContainer\", { read: ViewContainerRef })\r\n    contentContainer: ViewContainerRef;\r\n    @ViewChild(\"favoritesContainer\", { read: ViewContainerRef })\r\n    favoritesContainer: ViewContainerRef;\r\n    @ViewChild(\"leftContainer\", { read: ViewContainerRef })\r\n    leftContainer: ViewContainerRef;\r\n    @ViewChild(\"centerContainer\", { read: ViewContainerRef })\r\n    centerContainer: ViewContainerRef;\r\n    @ViewChild(\"multiSelectDT\") selectedDtRef: DataTableComponent;\r\n    @ViewChild(\"inputgroup\") inputGroup: InputGroupComponent;\r\n    @ViewChild(\"leftPanel\") leftPanel: LayoutPanelComponent;\r\n    @ViewChild(\"tagbox\") tagbox: ElementRef;\r\n\r\n    @ViewChild(\"okbtn\") okButton: ElementRef;\r\n    @ViewChild(\"tagInput\") tagInput: InputGroupComponent;\r\n\r\n    @ViewChild('selectedpanel') selectedpanel: ElementRef;\r\n    @ViewChild('cascadeSelect') cascadeSelect: SingleSelectDirective;\r\n    @ViewChild('layout') layoutRef: LayoutComponent;\r\n\r\n    componentRef: ComponentRef<any>;\r\n    leftComponentRef: ComponentRef<LookupLeftComponent>;\r\n    favoritesComponentRef: ComponentRef<any>;\r\n\r\n    public http: ILookupHttpService;\r\n    public messagerService: MessagerService;\r\n    public loadingService: LoadingService;\r\n    loading: LoadingComponent;\r\n    // dataFieldMaps: any;\r\n    navigationOptions: NavigationOptions;\r\n\r\n    // å¯¼èªå¸®å©å·¦åå®½åº¦\r\n    leftPanelWidth = 320;\r\n    // å¯¼èªå¸®å©çªå£æå°å®½åº¦\r\n    navLookupDialogMinWidth = 960;\r\n\r\n    navigationFilter: NavigationFilter = null;\r\n\r\n    subscriptions: Subscription[] = [];\r\n    dialogOpenedSubscription: Subscription;\r\n    dialogClosedSubscription: Subscription;\r\n\r\n    isTextChange = false;\r\n    isTabChanged = false;\r\n\r\n    displayInfo: DisplayInfo = Object.assign({}, displayInfoDefault);\r\n\r\n    tabChangeSubscription = null;\r\n    // æå­è¡ç¹å»æ°æ®  ç¨äºæ¶è\r\n    personalConf: PersonalConfig = {};\r\n    favoriteColumns: any[] = [];\r\n    /** ä¸´æ¶æ¥è¯¢åæ° */\r\n    _searchState = null;\r\n    allData: any = [];\r\n    get selections() {\r\n        const selectItems = this.lookupSelectionSer.getSelections();\r\n        if (this.singleSelect) {\r\n            return selectItems[0];\r\n        } else {\r\n            return selectItems;\r\n        }\r\n    }\r\n    get usePersionalConf() {\r\n        return this.useFavorite || this.useTip || this.isRecordSize;\r\n    }\r\n\r\n    get displayTextList() {\r\n        if (this.displayText) {\r\n            return this.displayText.split(this.multipleChoiceSeparator);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    public personalConfigService: PersonalConfigService;\r\n    public utilService: UtilService;\r\n    public treeNodeHelper: TreeNodeHelper;\r\n    public localService: LocaleService;\r\n    public notifyService: NotifyService;\r\n    allColumnsTitle = \"ææå\";\r\n    mustWriteSomething = \"è¯·è¾å¥å³é®å­åæ¥è¯¢ã\";\r\n    mustChoosAdatarow = \"è¯·éæ©ä¸æ¡è®°å½ï¼\";\r\n    addFavoriteSuccess = \"æ¶èæåã\";\r\n    delFavoriteSuccess = \"ç§»é¤æ¶èæåã\";\r\n\r\n    /** ä½¿ç¨åç½®çæ¥è¯¢æ¹æ³, é»è®¤ false */\r\n    useInsideSearchHandler = false;\r\n    searching = false;\r\n    /** ä¸´æ¶å­å¨æ¥è¯¢ç»æé */\r\n    _searchResult = null;\r\n\r\n    lookupinitializationSubject = new Subject();\r\n\r\n    /** å¤éæ¶ï¼éä¸­çæ°æ® */\r\n    currentSelectedItems: Observable<any> = of([]);\r\n    /** å·²éæ°æ®åä¿¡æ¯ */\r\n    selectedColumns = [];\r\n    activeTab: string | \"datalist\" | \"favorite\" | \"selected\" = \"datalist\";\r\n\r\n    favHelper: FavoriteHelper = null;\r\n    ttEventMgr: TreeTableEventManager = null;\r\n    multiSelMgr: MultiSelectionManager = null;\r\n    httpMgr: LookupHttpManager = null;\r\n    lookupCmpMgr: LookupComponentManager = null;\r\n    dialogMgr: LookupDialogManager = null;\r\n    selectionMgr: SelectionManager = null;\r\n    dtEventMgr: DataTableEventManager = null;\r\n\r\n    lookupSelectionSer: LookupSelectionService = null;\r\n\r\n    controlId = \"\";\r\n    savingFaoriteData = false;\r\n    isReady = false;\r\n    showTagboxClearButton = false;\r\n    hasError = false;\r\n\r\n    cascadeStatusItems = [\r\n        { valeu: 'enable', label: '' },\r\n        { valeu: 'up', label: '' },\r\n        { valeu: 'down', label: '' },\r\n        { valeu: 'disable', label: '' }\r\n    ]\r\n\r\n    isGetAllChidlNodes = false;\r\n    eventManager: EventManager;\r\n    /** éä¸­è®°å½IDï¼èªå®ä¹å¸®å©åæ°æ¶ä½¿ç¨ */\r\n    selectedIds = [];\r\n    private lookupSearchInputEvent = null;\r\n    private farrisInstances: FarrisComponentInstanceService = null;\r\n    /** ç¨æ·åå§è®¾ç½® */\r\n    private _userSettings: any = {};\r\n\r\n    get userInitialConfig() {\r\n        return this._userSettings;\r\n    }\r\n\r\n    _treeInfo_ = null;\r\n\r\n    /** dialog åå®¹åºåé«åº¦ã å¼¹çªæ»é«åº¦ - å¤´é¨é«åº¦ - èé¨é«åº¦ - ï¼å¯ç¨æ¶è TABå¤´é«åº¦ï¼ */\r\n    dialogContentHeight = 0;\r\n    /** å·¦æ å³åè¡¨ï¼ å·¦æ ç¹å»èç¹æ¥è¯¢æ¶æ¯å¦åæ¬ä¸çº§èç¹çæ°æ®ï¼é»è®¤ false */\r\n    includeSubordinates = false;\r\n    includeSubordinates$ = new Subject();\r\n    includeSubordinates$$: Subscription = null;\r\n    overLayService: OverLayHiddenService;\r\n    private debugSer: DebugService = null;\r\n    constructor(\r\n        public injector: Injector,\r\n        public cfr: ComponentFactoryResolver,\r\n        public el: ElementRef,\r\n        public utils: CommonUtils,\r\n        private defaultMapping: LookupDefaultMapping,\r\n        public changeDetector: ChangeDetectorRef,\r\n        public shortcuts: ShortcutsService,\r\n        public lookupUtils: LookupUtils,\r\n        private zone: NgZone,\r\n        public render2: Renderer2\r\n    ) {\r\n        super(injector, el, changeDetector);\r\n        this.createInstance();\r\n        this.currentSelectedItems = this.lookupSelectionSer.selected$;\r\n        this.eventManager = this.injector.get(EventManager);\r\n        this.farrisInstances = this.injector.get(\r\n            FarrisComponentInstanceService,\r\n            null\r\n        );\r\n\r\n        this.overLayService = new OverLayHiddenService();\r\n\r\n        this.debugSer = this.injector.get(DebugService, null);\r\n        if (this.debugSer) {\r\n            this.debugSer.useDebugMode();\r\n        }\r\n\r\n        this.lookupSelectionSer.selectionChanged$.subscribe((e: {data: Array<any>, selected: boolean}) => {\r\n            if (this.selectedDtRef) {\r\n                if (!e.selected) {\r\n                    this.selectedDtRef.unCheckRows(e.data);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.initLabels();\r\n    }\r\n\r\n    private initLabels() {\r\n        if (!this.labels) {\r\n            this.labels = {\r\n                /** æ°æ®åè¡¨*/\r\n                dataTab: '',\r\n                /** æ¶èå¤¹ */\r\n                favTab:'',\r\n                /** åæ¶å·²é */\r\n                clearAllSelected: '',\r\n                /** å·²éè®°å½é¢æ¿ä¸­ å é¤å·²é */\r\n                delSelected: ''\r\n            }\r\n        }\r\n        if (!this.labels.clearAllSelected) {\r\n            this.labels.clearAllSelected = this.localService.getValue('lookup.selectedInfo.clear');\r\n        }\r\n\r\n        if (!this.labels.favTab) {\r\n            this.labels.favTab = this.localService.getValue('lookup.favorites');\r\n        }\r\n\r\n        if (!this.labels.dataTab) {\r\n            this.labels.dataTab = this.localService.getValue('lookup.datalist');\r\n        }\r\n    }\r\n\r\n    writeConsole(msg, type: 'info'|'log'|'warn'|'error' = 'warn') {\r\n        if (this.debugSer) {\r\n            this.debugSer[type](msg);\r\n        }\r\n    }\r\n\r\n    getFilterBarHeight() {\r\n        return (this.showFilterBar && this.enableMultiFieldSearch ? 42 : 0);\r\n    }\r\n\r\n    getSpaceWidth(isDouble = false) {\r\n        return (!this.enableMultiFieldSearch ? 28 : 48) + (isDouble ? ( this.enableMultiFieldSearch? 5: 7) : 0);\r\n    }\r\n\r\n    private cacheUserConfig() {\r\n        this._userSettings._title = this.title;\r\n        this.displayInfo.title = this.title;\r\n        this._userSettings._columns = this.deepClone(this.columns || []);\r\n        this._userSettings.getColumns = () => {\r\n            return this._userSettings._columns;\r\n        };\r\n\r\n        this._userSettings.reset = () => {\r\n            this.title = this._userSettings._title;\r\n            this.displayInfo.title = this.title;\r\n            this.columns = this._userSettings.getColumns();\r\n        };\r\n    }\r\n\r\n    private deepClone(obj) {\r\n        if (obj === null) {\r\n            return null;\r\n        }\r\n        const clone = Object.assign({}, obj);\r\n        Object.keys(clone).forEach(\r\n            (key) =>\r\n                (clone[key] =\r\n                    typeof obj[key] === \"object\"\r\n                        ? this.deepClone(obj[key])\r\n                        : obj[key])\r\n        );\r\n        if (Array.isArray(obj)) {\r\n            clone.length = obj.length;\r\n            return Array.from(clone);\r\n        }\r\n        return clone;\r\n    }\r\n\r\n    ngOnInit() {\r\n        super.ngOnInit();\r\n        this.cacheUserConfig();\r\n        if (!this.loadTreeDataType) {\r\n            this.loadTreeDataType = \"default\";\r\n        }\r\n\r\n        this.checkGridOptions();\r\n        this.displayInfo.title = this.title;\r\n        /** ä¼ éä¸ä¸æ */\r\n        if (this.http) {\r\n            this.http.context = this.context;\r\n        }\r\n\r\n        this.allColumnsTitle = this.localService.getValue(\"lookup.allColumns\");\r\n        this.mustWriteSomething = this.localService.getValue(\r\n            \"lookup.mustWriteSomething\"\r\n        );\r\n        this.mustChoosAdatarow = this.localService.getValue(\r\n            \"lookup.mustChoosAdatarow\"\r\n        );\r\n        this.addFavoriteSuccess =\r\n            this.localService.getValue(\"lookup.favoriteInfo.addFav\") ||\r\n            this.addFavoriteSuccess;\r\n        this.delFavoriteSuccess =\r\n            this.localService.getValue(\"lookup.favoriteInfo.cancelFav\") ||\r\n            this.delFavoriteSuccess;\r\n\r\n        this.dialogMgr.onDialogCreated();\r\n\r\n        this._treeInfo_ = this.treeInfo ? cloneDeep(this.treeInfo) : null;\r\n\r\n        if (this.quickSelect) {\r\n            this.quickSelect = Object.assign({}, QuickSelectDefaultOptions, this.quickSelect || {});\r\n        }\r\n        this.setContainerMargin();\r\n    }\r\n    /** åå®¹ä¸­çç½è¾¹è· */\r\n    setContainerMargin() {\r\n        const mrn = !this.enableMultiFieldSearch ? 14 : 24;\r\n        const mb =  !this.enableMultiFieldSearch ? 5 : 0;\r\n        this.containerMargin = { top: 0, bottom: mb, left: mrn, right: mrn };\r\n        \r\n        if (this.enableMultiFieldSearch) {\r\n            this.useNewLayout = true;\r\n        }\r\n\r\n        this.containerStyle = {\r\n            marginLeft: this.containerMargin.left + \"px\",\r\n            marginRight: this.containerMargin.right + \"px\",\r\n            marginTop: this.containerMargin.top + \"px\",\r\n            marginBottom: this.containerMargin.bottom + \"px\",\r\n        };\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        super.ngOnDestroy();\r\n        this.subscriptions.forEach((n) => {\r\n            if (n) {\r\n                n.unsubscribe();\r\n                n = null;\r\n            }\r\n        });\r\n\r\n        if (this.selectionMgr) {\r\n            this.selectionMgr.destroy();\r\n        }\r\n\r\n        this.subscriptions = [];\r\n\r\n        if (this.farrisInstances) {\r\n            this.farrisInstances.destroy(this.el.nativeElement);\r\n        }\r\n\r\n        if (this.lookupSearchInputEvent) {\r\n            this.lookupSearchInputEvent();\r\n        }\r\n        this.lookupUtils.destroy();\r\n\r\n        this.overLayService.destory(this.el.nativeElement);\r\n        this.overLayService = null;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.columns && !changes.columns.isFirstChange()) {\r\n            this.cacheUserConfig();\r\n        }\r\n\r\n        if (changes.enableMultiFieldSearch && !changes.enableMultiFieldSearch.isFirstChange()) {\r\n            this.setContainerMargin();\r\n        }\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!this.quickSelect || !this.quickSelect.enable) {\r\n            this.lookupSearchInputEvent = onTextChanged.bind(this)();\r\n        }\r\n\r\n        // åå§åä¸ªæ§åéç½®\r\n        if (this.usePersionalConf) {\r\n            this.favHelper.initPersonalInfo();\r\n        }\r\n\r\n        if (this.useExtendInfo) {\r\n            const jsonData = this.selectionMgr.getBindingData();\r\n            this.updateExtendInfo(jsonData, false);\r\n        }\r\n\r\n        if (this.viewType === \"text\") {\r\n            // this.shortcuts.add({\r\n            //     key: 'F2',\r\n            //     target: this.inputGroup.textbox.nativeElement,\r\n            //     command: () => {\r\n            //         this.showDialog();\r\n            //     }\r\n            // });\r\n            this.render2.listen(\r\n                this.inputGroup.textbox.nativeElement,\r\n                \"keydown.F2\",\r\n                this.showDialog.bind(this)\r\n            );\r\n        } else {\r\n            this.registerMouseEventForTagView();\r\n\r\n            if (this.tagboxHeight) {\r\n                const el =\r\n                    this.tagbox.nativeElement.querySelector(\".multi-more\");\r\n                let tbh = this.tagboxHeight;\r\n                if (tbh !== \"auto\") {\r\n                    tbh += \"px\";\r\n\r\n                    if (this.maxTagboxHeight) {\r\n                        this.render2.setStyle(\r\n                            el,\r\n                            \"maxHeight\",\r\n                            `${this.maxTagboxHeight}px`\r\n                        );\r\n                    }\r\n                }\r\n\r\n                this.render2.setStyle(el, \"height\", tbh);\r\n            }\r\n        }\r\n\r\n        if (this.el && this.farrisInstances) {\r\n            this.farrisInstances.add(this.el.nativeElement, this);\r\n        }\r\n    }\r\n\r\n    private createInstance() {\r\n        this.http = this.injector.get(ServerSideToken, null);\r\n        this.messagerService = this.injector.get(MessagerService);\r\n        this.loadingService = this.injector.get(LoadingService);\r\n        this.notifyService = this.injector.get(NotifyService, null);\r\n\r\n        this.personalConfigService = this.injector.get(\r\n            PersonalConfigService,\r\n            null\r\n        );\r\n\r\n        this.lookupSelectionSer = new LookupSelectionService(this);\r\n\r\n        this.utilService = new UtilService(this);\r\n        this.localService = this.injector.get(LocaleService);\r\n        this.treeNodeHelper = new TreeNodeHelper(this);\r\n\r\n        this.favHelper = new FavoriteHelper(this);\r\n        this.ttEventMgr = new TreeTableEventManager(this);\r\n        this.multiSelMgr = new MultiSelectionManager(this);\r\n        this.httpMgr = new LookupHttpManager(this);\r\n        this.lookupCmpMgr = new LookupComponentManager(this);\r\n        this.dialogMgr = new LookupDialogManager(this);\r\n        this.selectionMgr = new SelectionManager(this);\r\n        this.dtEventMgr = new DataTableEventManager(this);\r\n    }\r\n\r\n    showDialog(): any {\r\n        if (this.disabled || this.readonly) {\r\n            return false;\r\n        }\r\n\r\n        this.selectionMgr.initDisplayValue();\r\n        this.dictPickingSubscription = this.dictPicking({\r\n            instance: this,\r\n        }).subscribe((pr: PickingResult) => {\r\n            this.dialogMgr.canOpenDialog(pr);\r\n        });\r\n\r\n        return false;\r\n    }\r\n\r\n    /** å¤æ­æ¯å¦ä¸ºååè¡¨å¸®å© */\r\n    isDoublleList() {\r\n        return (\r\n           ( this.displayType === LookupGridDisplayType.NavList ||\r\n            this.displayType === LookupGridDisplayType.NavTreeList ||\r\n            this.displayType === LookupGridDisplayType.NavListTree) && this.showNavigation\r\n        );\r\n    }\r\n    /** å¤æ­æ¯å¦æ¾ç¤ºä¸ºæ å¸®å© */\r\n    isTree() {\r\n        const dtyp = this.displayType.toUpperCase()\r\n        return (\r\n            dtyp === LookupGridDisplayType.TreeList || dtyp === LookupGridDisplayType.NavListTree\r\n        );\r\n    }\r\n\r\n    onResized(e: any) {\r\n        this.resizeCmp(e.size);\r\n        this.resized.emit(e.size);\r\n    }\r\n\r\n    onResizing(pos: IResizeEvent) {\r\n        this.resizing.emit(pos.size);\r\n        this.resizeCmp(pos.size);\r\n        if (this.isDoublleList() && this.leftComponentRef) {\r\n            this.leftComponentRef.instance.resize({\r\n                width: this.leftPanel.width,\r\n                height: this.dialogMgr.getHeight(),\r\n            });\r\n        }\r\n    }\r\n\r\n    onMaxDialog(pos: IResizeEvent) {\r\n        this.resizeCmp(pos.size);\r\n        if (this.leftPanel) {\r\n            this.leftComponentRef.instance.resize({\r\n                width: this.leftPanel.width,\r\n                height: this.dialogMgr.getHeight(),\r\n            });\r\n        }\r\n        // tfs 543132 \r\n        // this.dialogHeight = pos.size.height;\r\n        this.dialogContentHeight = this.dialogMgr.resetDialogContentHeight();\r\n        this.dialogMaxed.emit(pos.size);\r\n    }\r\n\r\n    resizeCmp(size?: any) {\r\n        if (!this.componentRef || !this.componentRef.instance) {\r\n            return;\r\n        }\r\n\r\n        if (!size) {\r\n            size = this.dialog.size;\r\n        }\r\n        const _size = {\r\n            width:\r\n                size.width -\r\n                this.containerMargin.left -\r\n                this.containerMargin.right,\r\n            height: 0\r\n        };\r\n\r\n        if (this.useFavorite && this.favoritesComponentRef && this.activeTab == 'favorite') {\r\n            _size.height = this.lookupCmpMgr.getCmpHeight(true);\r\n            this.favoritesComponentRef.instance.resize(_size);\r\n        } else {\r\n            _size.height = this.lookupCmpMgr.getCmpHeight();\r\n            if (this.isDoublleList()) {\r\n                _size.width = size.width - this.leftPanel.width - this.getSpaceWidth(true);\r\n            }\r\n    \r\n            this.componentRef.instance.resize(_size);\r\n        }\r\n\r\n        if (this.isRecordSize) {\r\n            this.personalConf.size = this.dialog.size;\r\n            this.personalConfigService.updatePersonalConfig({\r\n                size: this.dialog.size,\r\n            });\r\n        }\r\n\r\n        if (this.isDoublleList() && this.layoutRef) {\r\n            this.layoutRef.setPanelMaxSize();\r\n        }\r\n    }\r\n\r\n    private checkGridOptions() {\r\n        if (!this.gridOptions.idField) {\r\n            this.writeConsole(\"æªè®¾ç½®ä¸»é®å­æ®µ idField\");\r\n        }\r\n\r\n        if (!this.beforeSelectData) {\r\n            this.beforeSelectData = () => {\r\n                return of(true);\r\n            };\r\n        }\r\n\r\n        const ctxMenuLanguages =\r\n            this.localService.getValue(\"lookup.contextMenu\");\r\n\r\n        this.treeTableOptions = Object.assign(\r\n            { language: ctxMenuLanguages },\r\n            this.defaultTreeTableOptions,\r\n            this.treeTableOptions || {}\r\n        );\r\n    }\r\n\r\n    getComponentType(): Type<any> {\r\n        if (!this.displayType) {\r\n            this.displayType = \"LIST\";\r\n        }\r\n        switch (this.displayType) {\r\n            case LookupGridDisplayType.List:\r\n            case LookupGridDisplayType.NavList:\r\n            case LookupGridDisplayType.NavTreeList:\r\n                return DataTableComponent;\r\n            case LookupGridDisplayType.TreeList:\r\n            case LookupGridDisplayType.NavListTree:\r\n                return TreeTableComponent;\r\n        }\r\n    }\r\n\r\n    showLoading(msg = \"\") {\r\n        if (this.dialog && this.dialog.modalContent && !this.loading) {\r\n            const opts = {\r\n                container: this.dialog.modalContent,\r\n                delay: 200,\r\n            };\r\n\r\n            if (msg) {\r\n                opts[\"message\"] = msg;\r\n            }\r\n\r\n            this.loading = this.loadingService.show(opts);\r\n        } else {\r\n            this.loading = this.loadingService.show();\r\n        }\r\n    }\r\n\r\n    closeLoading() {\r\n        if (this.loading) {\r\n            this.loading.close();\r\n            this.loading = null;\r\n        }\r\n\r\n        this.loadingService.clearAll();\r\n    }\r\n\r\n    getSearchColumns(resdata: any): {label: string, value: string}[] {\r\n        const cols = resdata.columns || this.columns;\r\n        if (resdata.searchFields) {\r\n            return resdata.searchFields.map((sf) => {\r\n                const c = cols.find(\r\n                    (col) => col.field.toLowerCase() === sf.value.toLowerCase()\r\n                );\r\n                if (c) {\r\n                    sf.label = c.title;\r\n                }\r\n                return sf;\r\n            });\r\n        } else if (cols) {\r\n            return cols\r\n                .filter((c) => c.searchField)\r\n                .map((col) => {\r\n                    return {\r\n                        label: col.title,\r\n                        value: col.field,\r\n                    };\r\n                });\r\n        }\r\n        return [];\r\n    }\r\n\r\n    private initOptions(resData: LookupGridResult) {\r\n        let obser = of(true);\r\n        this.gridOptions.searchFields = this.getSearchColumns(resData);\r\n        if (resData) {\r\n            // å¦æç»ä»¶ä¸­æªè®¾ç½®æ¾ç¤ºåï¼åä½¿ç¨æå¡å¨ç«¯è¿åçè®¾ç½®ï¼ å¦åå°ä½¿ç¨ç»ä»¶ä¸­éç½®çå±ç¤ºå\r\n            if (\r\n                (!this.columns || !this.columns.length) &&\r\n                resData.columns &&\r\n                resData.columns.length\r\n            ) {\r\n                this.columns = resData.columns;\r\n            }\r\n\r\n            this.initColumnWidth(this.columns);\r\n\r\n            this.setLookupTitleText(resData);\r\n\r\n            if (\r\n                this.isDoublleList() &&\r\n                this.dialogWidth < this.navLookupDialogMinWidth &&\r\n                !this.isRecordSize\r\n            ) {\r\n                this.dialogWidth = this.navLookupDialogMinWidth;\r\n                this.dialog.reSize({ width: this.dialogWidth });\r\n            }\r\n\r\n            if (!this.customDisplayType) {\r\n                // this.displayType = resData.displayType || this.displayType || 'LIST';\r\n                // if (this.treeToList) {\r\n                //     this.displayType = this.isDoublleList() ? ' NAVLIST ': 'LIST';\r\n                // }\r\n                this.changeDetector.detectChanges();\r\n                this.lookupCmpMgr.createComponentWithServerData(resData);\r\n            }\r\n\r\n            if ( this.isDoublleList() && resData.navigation && !this.leftComponentRef) {\r\n                this.navigationOptions = resData.navigation;\r\n                this.navigationOptions.hover = true;\r\n                this.navigationOptions.searchFields = this.getSearchColumns(this.navigationOptions);\r\n                this.initColumnWidth(this.navigationOptions.columns, 'nav');\r\n\r\n                // update columns formatter\r\n                if (this.customNavFormatter) {\r\n                    this.navigationOptions.columns.forEach((col) => {\r\n                        if (this.customNavFormatter[col.field]) {\r\n                            col.formatter = this.customNavFormatter[col.field];\r\n                        }\r\n                    });\r\n\r\n                    this.navigationOptions[\"rowStyler\"] =\r\n                        this.customNavFormatter.rowStyler;\r\n                    this.navigationOptions[\"cellStyler\"] =\r\n                        this.customNavFormatter.cellStyler;\r\n                }\r\n                // 20210926 æ å¯¼èªå¸®å©ä¸­ å·¦ä¾§æ æ¯æåå±å è½½\r\n                if (this.displayType === LookupGridDisplayType.NavTreeList) {\r\n                    let _nav_treeinfo_loadtype =\r\n                        this.navigationOptions.treeInfo.loadDataType;\r\n                    if (this.loadTreeDataType !== \"default\") {\r\n                        _nav_treeinfo_loadtype =\r\n                            this.loadTreeDataType === \"loadall\"\r\n                                ? \"all\"\r\n                                : \"async\";\r\n                    }\r\n                    this.navigationOptions.treeInfo.loadDataType =\r\n                        _nav_treeinfo_loadtype;\r\n                }\r\n\r\n                obser = this.lookupCmpMgr.createLeftComponent(this.navigationOptions);\r\n            }\r\n        } else {\r\n            this.lookupCmpMgr.createContent(this.gridOptions);\r\n            this.lookupCmpMgr.createFavoriteComponent();\r\n        }\r\n\r\n        if (this.isTextChange) {\r\n            this.componentRef.instance.searchData.value = this.displayText;\r\n        } else {\r\n            if (this._searchState && this._searchState.value) {\r\n                this.componentRef.instance.searchData.value = this._searchState.value;\r\n            }\r\n        }\r\n\r\n        // update columns formatter\r\n        if (this.customFormatter) {\r\n            this.columns.forEach((col) => {\r\n                if (this.customFormatter[col.field]) {\r\n                    col.formatter = this.customFormatter[col.field];\r\n                }\r\n            });\r\n\r\n            if (this.customFormatter.rowStyler) {\r\n                this.componentRef.instance.rowStyler = this.customFormatter.rowStyler;\r\n            }\r\n\r\n            if (this.customFormatter.cellStyler) {\r\n                this.componentRef.instance.cellStyler = this.customFormatter.cellStyler;\r\n            }\r\n        } else {\r\n            if (resData.customStyles) {\r\n                const { row: rowStylers, cell: cellStylers } = resData.customStyles;\r\n\r\n                const filterFn = (n, data) => {\r\n                    const d = this.utils.getValue(n.field, data);\r\n                    if (typeof d === 'boolean') {\r\n                        if (n.value == '0' || n.value == '1' || n.value == 'true' || n.value == 'false') {\r\n                            return d === (n.value == '0' || n.value == 'false') ? false : true;\r\n                        }\r\n                        return d === !!n.value;\r\n                    }\r\n                    return d === n.value;\r\n                }\r\n\r\n                if (rowStylers) {\r\n                    this.componentRef.instance.rowStyler = ({ data }) => {\r\n                        const styleItem = rowStylers.find(n => {\r\n                            return filterFn(n, data);\r\n                        });\r\n                        if (styleItem) {\r\n                            return styleItem.styles;\r\n                        }\r\n\r\n                        return null;\r\n                    }\r\n                }\r\n\r\n                if (cellStylers) {\r\n                    this.componentRef.instance.cellStyler = (e, field) => {\r\n                        const { data } = e;\r\n                        const styleItem = cellStylers.filter(n => n.field === field).find(t => {\r\n                            return filterFn(t, data);\r\n                        });\r\n\r\n                        if (styleItem) {\r\n                            return styleItem.styles;\r\n                        }\r\n\r\n                        return null;\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        // this.changeDetector.detectChanges();\r\n        return obser;\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®å¸®å©çªå£æ é¢\r\n     */\r\n    private setLookupTitleText(resData: LookupGridResult) {\r\n        if (resData.displayInfo) {\r\n            this.displayInfo = resData.displayInfo;\r\n        }\r\n\r\n        // å¦æèªå®ä¹æ é¢ï¼å°ä»¥æ­¤æ é¢ä¸ºåãå¦åå è½½æå¡å¨ç«¯è¿åçæ°æ®\r\n        if (this.title && this.title !== \"æ­¤å¤æ¾ç¤ºå¸®å©æ é¢\") {\r\n            this.displayInfo.title = this.title;\r\n        }\r\n\r\n        if (this.displayInfo && resData.title) {\r\n            if (!this.displayInfo.title) {\r\n                this.displayInfo.title = resData.title;\r\n            }\r\n        }\r\n    }\r\n\r\n    private showGetAllChildrenCheckbox() {\r\n        if (this.isTree() && this.treeInfo) {\r\n            this.enableGetAllChildNodes =\r\n                this.treeInfo.loadDataType !== \"all\" && this.treeInfo.layerType === \"pathcode\";\r\n        } else {\r\n            this.enableGetAllChildNodes = false;\r\n        }\r\n    }\r\n\r\n    initData() {\r\n\r\n        const observer = {\r\n            next: (data: LookupGridResult) => {\r\n\r\n                if (data === false) {\r\n                    if (!this.columns || !this.columns.length) {\r\n                        this.closeLoading();\r\n                        this.closeDialog();\r\n                        if (!this.messagerService.modals || !this.messagerService.modals.length) {\r\n                            this.notifyService.error({msg: this.localService.getValue('lookup.configError') , timeout: 3000});\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // æå¡å¨ç«¯åçéè¯¯ï¼è¿åNULL æ¶ï¼ç´æ¥å³é­çªå£\r\n                if (data === null) {\r\n                    this.isShow = false;\r\n                    if (this.dialog) {\r\n                        this.dialog.close();\r\n                    }\r\n                    return;\r\n                }\r\n                this.initOptions(data).subscribe(() => {\r\n                    this.selectedColumns = this.multiSelMgr.initSelectedColumns();\r\n                    // this.favoriteColumns = this.favHelper.getFavoriteColumns();\r\n\r\n                    if (this.usePersionalConf) {\r\n                        if (!this.personalConfigService.getPersonalData()) {\r\n                            this.personalConfigService.savePersonalConfig(\r\n                                this.personalConf\r\n                            );\r\n                        }\r\n                    }\r\n                    if (!this.isTabChanged) {\r\n                        this.lookupSelectionSer.loadSelections(\r\n                            data.selectedItems || []\r\n                        );\r\n                    }\r\n\r\n                    if (this.isDoublleList()) {\r\n                        // å¯¼èªå¸®å©æ¶ï¼è®¾ç½®å·¦ä¾§éä¸­æ°æ®æ¶ï¼ä¸å è½½ä¸»æ°æ®åè¡¨ã\r\n                        if (this.navSelectedIds || this.selectFirstInNav) {\r\n                            this.loadDataWhenOpen = false;\r\n                        }\r\n                    }\r\n\r\n                    if (data['activeTab'] && !this.isTabChanged) {\r\n                        this.activeTab = 'datalist';\r\n\r\n                        if (this.personalConf && this.personalConf.tabIndex !== this.activeTab) {\r\n                            this.personalConf.tabIndex = this.activeTab;\r\n                        }\r\n\r\n                    }\r\n\r\n                    this.loadData(data);\r\n\r\n                    if (this.isTree()) {\r\n                        if (this.activeTab === \"datalist\") {\r\n                            const tt = this.componentRef.instance as TreeTableComponent;\r\n                            if (tt.searchData.value && this.items && this.items.length) {\r\n                                if (this.items[0].children && this.items[0].children.length) {\r\n                                    tt.toggleExpand(this.items[0], true, false);\r\n                                }\r\n                            }\r\n                        }\r\n                        this.showGetAllChildrenCheckbox();\r\n\r\n                    }\r\n                    this.isTextChange = false;\r\n                    this._searchResult = null; // æ¸ç©ºä¸´æ¶æ¥è¯¢ ç»æ\r\n                    this.closeLoading();\r\n                    // this.isReady$.next(true);\r\n                    this.isReady = true;\r\n                    this.changeDetector.detectChanges();\r\n                    this.lookupinitializationSubject.next();\r\n\r\n                    if (this.layoutRef) {\r\n                        this.layoutRef.setPanelMaxSize();\r\n                    }\r\n                });\r\n            },\r\n            error: (err: any) => {\r\n                // this.isReady$.next(true);\r\n                this.closeLoading();\r\n                this._searchResult = null; // æ¸ç©ºä¸´æ¶æ¥è¯¢ ç»æ\r\n                this.isTextChange = false;\r\n\r\n                this.hasError = true;\r\n                this.changeDetector.detectChanges();\r\n                if (typeof err === \"string\") {\r\n                    this.messagerService.error(err);\r\n                } else {\r\n                    if (err) {\r\n                        if (err.Message) {\r\n                            this.messagerService.error(err.Message);\r\n                        } else {\r\n                            if (err.error) {\r\n                                this.messagerService.exception(err.error);\r\n                            } else {\r\n                                this.messagerService.error(\r\n                                    \"åºç¨æå¡å¨éè¯¯,è¯·èç³»ç³»ç»ç®¡çåï¼\"\r\n                                );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n        };\r\n\r\n        let p: any = {\r\n            pageInfo: {\r\n                pageSize: this.pageSize || 20,\r\n                pageIndex: 1,\r\n            },\r\n        };\r\n        let t: LOAD_DATA_TYPE = \"all\";\r\n        if (this.isTextChange) {\r\n            this._searchState = { \r\n                field: \"*\",\r\n                value: this.displayText\r\n            }\r\n        }\r\n\r\n        // åå±å è½½æ¯æè®¾ç½®å±å¼å±çº§\r\n        if (this.isTree() || this.displayType === LookupGridDisplayType.NavTreeList) {\r\n            if (this.expandLevel > -1) {\r\n                p['expandLevel'] = this.expandLevel;\r\n            }\r\n        }\r\n\r\n        if (this._searchState && this._searchState.value) {\r\n            p['search'] = this._searchState;\r\n            t = 'search';\r\n\r\n            // if (this.conditions && !this.conditions.length && this.enableMultiFieldSearch) {\r\n            //     this.conditions = [{\r\n            //         \"filterField\": this.textField,\r\n            //         \"value\": this._searchState.value,\r\n            //         \"lbracket\": \"\",\r\n            //         \"rbracket\": \"\",\r\n            //         \"relation\": 0,\r\n            //         \"compare\": 6\r\n            //     }];\r\n            // }\r\n        }\r\n\r\n\r\n        if (!this.isTabChanged && this.enableToSelect) {\r\n            const vals = this.selectionMgr.getSelectedIds();\r\n            if (vals && vals.length) {\r\n                p[\"selectedInfo\"] = {\r\n                    selected: true,\r\n                    selectedIds: vals,\r\n                };\r\n            } else {\r\n                if (this[\"selectedIds\"]) {\r\n                    p[\"selectedInfo\"] = {\r\n                        selected: true,\r\n                        selectedIds: this[\"selectedIds\"],\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        this.showLoading();\r\n        this.hasError = false;\r\n       \r\n        this.httpMgr.lookupRequest(p, t).pipe(\r\n            map((restData: LookupGridResult) => {\r\n                if (restData) {\r\n                    restData.selectedItems = restData[\"selectedData\"] || [];\r\n                } else {\r\n                    if (restData && typeof restData === \"object\") {\r\n                        restData.selectedItems = [];\r\n                    }\r\n                }\r\n                return restData === null ? false : restData;\r\n            }),\r\n            switchMap((res: LookupGridResult) => {\r\n                if (this.beforeLoadData) {\r\n                    return this.beforeLoadData({instance: this, res});\r\n                }\r\n                return of(res);\r\n            })\r\n        ).subscribe(observer);\r\n    }\r\n\r\n    loadData(resData?: LookupGridResult, rebindEvent = true) {\r\n        if (this.activeTab === \"datalist\") {\r\n            if (this.useFavorite && !this.isTree()) {\r\n                this.favHelper.updateFavoritesStatus(resData.items);\r\n            }\r\n\r\n            switch (this.displayType) {\r\n                case LookupGridDisplayType.NavList:\r\n                case LookupGridDisplayType.NavTreeList:\r\n                case LookupGridDisplayType.List:\r\n                    this.loadDataTableData(resData);\r\n                    if (rebindEvent) {\r\n                        this.dtEventMgr.bindDataTableEvent();\r\n                    }\r\n                    break;\r\n                case LookupGridDisplayType.TreeList:\r\n                case LookupGridDisplayType.NavListTree:\r\n                    this.loadTreeTableData(resData, rebindEvent);\r\n                    break;\r\n            }\r\n        } else if (this.activeTab === \"favorite\") {\r\n            this.loadFavData(resData);\r\n        }\r\n\r\n        // éä¸­æ°æ®\r\n        this.selectionMgr.selectCurrentValue();\r\n    }\r\n\r\n    private loadFavData(result: LookupGridResult) {\r\n        // å è½½æ¶èæ°æ®\r\n        if (this.useFavorite) {\r\n            if (this.isTree()) {\r\n                this.setTreeInfo(result);\r\n                const treeNodes = this.favHelper.initFavoriteTreeData(\r\n                    result.items\r\n                );\r\n                const treeData = this.treeNodeHelper\r\n                    .flatTreeNodes(treeNodes)\r\n                    .map((n) => {\r\n                        n.data[\"_addtional_\"] = n[\"addtional\"];\r\n                        return n.data;\r\n                    });\r\n                this.lookupSelectionSer.initFavoriteItems(treeData);\r\n\r\n                setTimeout(() => {\r\n                    this.favoritesComponentRef.instance.scrollToY(1);\r\n                });\r\n            } else {\r\n                this.lookupSelectionSer.initFavoriteItems(result.items);\r\n            }\r\n\r\n            this.favHelper.loadFavoritesData(result);\r\n        }\r\n    }\r\n\r\n    loadDataTableData(resData?: LookupGridResult) {\r\n        if (resData) {\r\n            if (this.useFavorite && !this.isTree()) {\r\n                this.favHelper.updateFavoritesStatus(resData.items);\r\n            }\r\n            if (this.gridOptions) {\r\n                if (resData && resData.columns && resData.columns.length) {\r\n                    if (\r\n                        !this.gridOptions.columns ||\r\n                        !this.gridOptions.columns.length\r\n                    ) {\r\n                        this.columns = resData.columns;\r\n                    }\r\n                }\r\n\r\n                this.items = resData.items;\r\n                this.total = resData.total || resData.items.length;\r\n                if ( resData.searchFields ) {\r\n                    this.gridOptions.searchFields = this.getSearchColumns(resData);\r\n                }\r\n                if (resData.pageInfo) {\r\n                    if (\r\n                        resData.pageInfo.pageList &&\r\n                        (!this.pageList || !this.pageList.length)\r\n                    ) {\r\n                        this.pageList = resData.pageInfo.pageList;\r\n                    }\r\n                    this.pagination = resData.pageInfo.enablePager;\r\n                    this.pageIndex = resData.pageInfo.pageIndex;\r\n                    this.pageSize = resData.pageInfo.pageSize;\r\n                } else {\r\n                    this.pagination = false;\r\n                }\r\n            } else {\r\n                this.gridOptions = resData as LookupGridOptions;\r\n            }\r\n        }\r\n\r\n        this.updateDataTable(this.gridOptions);\r\n    }\r\n\r\n    private updateDataTable(opts: any) {\r\n        if (opts) {\r\n            const dt = this.componentRef.instance as DataTableComponent;\r\n\r\n            if (!dt.columns || dt.columns.length === 0) {\r\n                dt.columns = this.gridOptions.columns;\r\n            }\r\n            dt.allColumnsTitle = this.allColumnsTitle;\r\n            dt.searchFields = opts.searchFields;\r\n            dt.pagination = opts.pagination;\r\n            dt.pageList = this.pageList;\r\n            dt.remoteSort = this.remoteSort;\r\n            dt.striped = this.enableMultiFieldSearch;\r\n\r\n            if (this.loadDataWhenOpen) {\r\n                dt.loadData({\r\n                    pageSize: opts.pageSize,\r\n                    pageIndex: this.gridOptions.pageIndex,\r\n                    total: this.gridOptions.total,\r\n                    data: this.gridOptions.items,\r\n                });\r\n                dt.cd.markForCheck();\r\n            }\r\n            this.loadSuccess.emit();\r\n        }\r\n    }\r\n\r\n    private setTreeInfo(resData) {\r\n        if (!resData) {\r\n            return;\r\n        }\r\n\r\n        let _treeInfo = null;\r\n        if (resData.treeInfo) {\r\n            const onlySelectLeaf = resData.treeInfo.onlySelectLeaf;\r\n            let _osl: ONLY_SELECT_LEAF = \"no\";\r\n            if (onlySelectLeaf !== undefined) {\r\n                _osl = onlySelectLeaf ? \"yes\" : \"no\";\r\n            }\r\n            _treeInfo = { ...resData.treeInfo, onlySelectLeaf: _osl };\r\n        }\r\n\r\n        const treeInfo = this.gridOptions.treeInfo;\r\n        if (treeInfo) {\r\n            if (\r\n                treeInfo.onlySelectLeaf === undefined ||\r\n                treeInfo.onlySelectLeaf === null\r\n            ) {\r\n                treeInfo.onlySelectLeaf = \"no\";\r\n            }\r\n\r\n            if (typeof treeInfo.onlySelectLeaf === \"boolean\") {\r\n                treeInfo.onlySelectLeaf = treeInfo.onlySelectLeaf ? \"yes\" : \"no\";\r\n            }\r\n\r\n            // 20210902\r\n            if (this.loadTreeDataType === \"default\") {\r\n                treeInfo.loadDataType = _treeInfo.loadDataType;\r\n            } else {\r\n                treeInfo.loadDataType = this.loadTreeDataType === \"loadall\" ? \"all\" : \"async\";\r\n                _treeInfo.loadDataType = treeInfo.loadDataType\r\n            }\r\n\r\n            if (treeInfo.onlySelectLeaf !== \"default\") {\r\n                _treeInfo = Object.assign(_treeInfo, treeInfo);\r\n            }\r\n        } else {\r\n            if (this.loadTreeDataType !== \"default\") {\r\n                _treeInfo.loadDataType = this.loadTreeDataType === \"loadall\" ? \"all\" : \"async\";\r\n            }\r\n        }\r\n\r\n        this.treeInfo = _treeInfo;\r\n    }\r\n\r\n    private loadTreeTableData(resData?: LookupGridResult, rebindEvent = true) {\r\n        const items = resData ? resData.items : this.gridOptions.items;\r\n        this.items = items;\r\n\r\n        if (resData) {\r\n            this.setTreeInfo(resData);\r\n\r\n            const treeInfo = this.gridOptions.treeInfo;\r\n            if (!treeInfo[\"treeDataIsInit\"]) {\r\n                if (treeInfo.layerType.toLowerCase() === \"pathcode\") {\r\n                    this.items = this.lookupUtils.makeTree(\r\n                        this.items,\r\n                        treeInfo\r\n                    );\r\n                } else {\r\n                    this.items = this.lookupUtils.makeTreeWithParentID(\r\n                        this.items,\r\n                        \"\",\r\n                        treeInfo.dataField ? `${treeInfo.dataField}.${treeInfo.parentField}`: treeInfo.parentField,\r\n                        this.idField\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.componentRef.instance instanceof TreeTableComponent) {\r\n            const tt = this.componentRef.instance as TreeTableComponent;\r\n            if (this.treeInfo) {\r\n                tt.loadDataType = this.treeInfo.loadDataType;\r\n            }\r\n\r\n            if (!this.columns || !this.columns.length) {\r\n                tt.columns = resData.columns || [];\r\n                this.gridOptions.columns = tt.columns;\r\n            }\r\n\r\n            const isLoadAllTreeData = () => {\r\n                if (this.loadTreeDataType === \"default\") {\r\n                    return tt.loadDataType === \"all\";\r\n                } else {\r\n                    return this.loadTreeDataType === \"loadall\";\r\n                }\r\n            };\r\n\r\n            if (rebindEvent) {\r\n                this.ttEventMgr.bindTreetableEvent();\r\n            }\r\n            const isLoadAll = isLoadAllTreeData();\r\n\r\n            /** å®æ´æ èç¹æ£æ¥ By Lucas 20200302 */\r\n            \r\n            this.items = this.checkNodeCanBeSelect(this.items, isLoadAll);\r\n            tt.keepSelect = true;\r\n\r\n            if (this.useFavorite) {\r\n                this.favHelper.updateFavoritesStatus(this.items);\r\n            }\r\n\r\n            if (this.loadDataWhenOpen) {\r\n                tt.loadData(this.items);\r\n            }\r\n            tt.resize();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¨æå®æ´æ ä¸­ï¼æé¨åèç¹å ä¸ºæ¡ä»¶è¢«è¿æ»¤ï¼ä¸ºæ¾ç¤ºå®æ´æ ï¼\r\n     * è¿äºèç¹å¨è¿è¡æ¶æ¯ä¸åè®¸è¢«éä¸­ç, è¿åæ°çèç¹æ°ç»\r\n     * By Lucas 20200302\r\n     */\r\n    checkNodeCanBeSelect(nodes, isAllTreeData = false): TreeNode[] {\r\n        if (nodes && nodes.length) {\r\n            return nodes.map((node: TreeNode) => {\r\n                if (node.hasOwnProperty(\"addtional\")) {\r\n                    node.selectable = !node[\"addtional\"];\r\n                }\r\n\r\n                if (node.children && node.children.length) {\r\n                    this.checkNodeCanBeSelect(node.children, isAllTreeData);\r\n                } else {\r\n                    if (isAllTreeData && (!this._searchState || !this._searchState.value)) {\r\n                        node.leaf = true;\r\n                    }\r\n                }\r\n\r\n                return node;\r\n            });\r\n        }\r\n        return nodes;\r\n    }\r\n\r\n    onChanges(val) {\r\n        if (!val) {\r\n            this.onClear();\r\n        } else {\r\n            this.displayText = val;\r\n            this.isTextChange = this.originalText !== this.displayText;\r\n            if (this.nosearch) {\r\n                this.setModelValue(val);\r\n                this.clearMappings.emit({ instance: this, value: val, });\r\n            }\r\n\r\n            this.onModelTouched(val);\r\n            this.valueChanged.emit(val);\r\n            this.textChanged.emit(val);\r\n        }\r\n    }\r\n\r\n\r\n    onClear(emit = true) {\r\n        this.isTextChange = false;\r\n        this.displayText = \"\";\r\n        this.displayValue = \"\";\r\n        this.originalText = \"\";\r\n        this.extendInfo = \"\";\r\n        this.setModelValue(\"\");\r\n        if (this.mappingFn) {\r\n            this.mappingFn(null, this.mapFields);\r\n        } else {\r\n            if (this.mapFields) {\r\n                const bindingData = this.selectionMgr.getBindingData();\r\n                if (bindingData) {\r\n                    this.defaultMapping.lookupFieldMap(\r\n                        null,\r\n                        this.mapFields,\r\n                        bindingData\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        this.multiSelMgr.clear();\r\n        if (emit) {\r\n            this.clear.emit();\r\n        }\r\n    }\r\n\r\n    clearValue(emit = true) {\r\n        this.onClear(emit);\r\n    }\r\n\r\n    selectItem(rowData?: any) {\r\n        let selectedRow = null;\r\n        if (rowData) {\r\n            selectedRow = rowData;\r\n        } else {\r\n            selectedRow = this.selections;\r\n\r\n            if (!selectedRow) {\r\n                selectedRow = null;\r\n            } else {\r\n                if (Array.isArray(selectedRow) && !selectedRow.length) {\r\n                    selectedRow = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        this._searchState = { \r\n            field: '*',\r\n            value: ''\r\n        }\r\n\r\n        // å¦æå®ä¹äºèªå®ä¹å¤çç¡®å®äºä»¶ï¼åç±èªå®ä¹äºä»¶å¤çåé¢çé»è¾\r\n        if (this.okHandler) {\r\n            this.okHandler({ data: selectedRow, instance: this });\r\n        } else {\r\n            if (this.beforeSelectData) {\r\n                const bsdResult = this.beforeSelectData({\r\n                    instance: this,\r\n                    data: selectedRow,\r\n                });\r\n                if (bsdResult && bsdResult.subscribe) {\r\n                    bsdResult.subscribe((e: any) => {\r\n                        this._beforeSelectDataCallBack(e, selectedRow);\r\n                    });\r\n                } else {\r\n                    this.writeConsole('å¸®å©æ°æ®éä¸­åäºä»¶æªè¿åå¼æè¿åç±»åéObservable, è¯·æ£æ¥', 'error');\r\n                }\r\n            } else {\r\n                this._beforeSelectDataCallBack(true, selectedRow);\r\n            }\r\n        }\r\n    }\r\n\r\n    getPathCode(data, treeInfo = null) {\r\n       return this.lookupUtils.getPathCode(data, treeInfo || this.treeInfo);\r\n    }\r\n    getLayerData(data, treeInfo = null) {\r\n        return this.lookupUtils.getLayerData(data, treeInfo || this.treeInfo);\r\n    }\r\n\r\n\r\n    private getParentPathCode(rows) {\r\n        const maxBy = (arr, fn) =>\r\n            Math.max(\r\n                ...arr.map(typeof fn === \"function\" ? fn : (val) => val[fn])\r\n            );\r\n\r\n        // const { dataField, pathField, layerField } = this.treeInfo;\r\n        const maxLayer = maxBy(rows, (x) => this.getLayerData(x));\r\n\r\n        for (let i = 1; i <= maxLayer; i++) {\r\n            const _rows = rows.filter((n) => this.getLayerData(n) === i);\r\n            if (_rows && _rows.length && _rows.length < rows.length) {\r\n                _rows.forEach((r) => {\r\n                    const patchCode = this.getPathCode(r);\r\n                    const _rows2 = rows.filter(\r\n                        (n) => {\r\n                            var _pc = this.getPathCode(n);\r\n                            return _pc !== patchCode && _pc.indexOf(patchCode) === 0;\r\n                        }\r\n                    );\r\n                    if (_rows2 && _rows2.length) {\r\n                        rows = rows.filter(\r\n                            (n) => this.getPathCode(n) !== patchCode\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        return rows;\r\n    }\r\n\r\n    private _beforeSelectDataCallBack(e, selectedRow) {\r\n        let canSelect = e;\r\n        let message = \"\";\r\n        if (typeof e === \"boolean\") {\r\n            canSelect = e;\r\n        } else {\r\n            if (typeof e === \"object\") {\r\n                canSelect = e.canSelect;\r\n                message = e.message;\r\n            } else {\r\n                canSelect = false;\r\n            }\r\n        }\r\n\r\n        if (!selectedRow) {\r\n            message = this.mustChoosAdatarow;\r\n            canSelect = false;\r\n        }\r\n\r\n        if (canSelect) {\r\n            let selectedRows$ = of(selectedRow);\r\n            // å¤é æ å¸®å© å¼æ­¥å è½½ åçº§ç  å¼å¯åæ­¥éæ© æåå«ä¸çº§\r\n            if (!this.singleSelect && this.enableCascade && this.isTree() ) {\r\n                if (this.treeInfo.loadDataType !== \"all\" && this.treeInfo.layerType === \"pathcode\" && this.isGetAllChidlNodes) {\r\n                    let parentsIds = this.getParentPathCode(selectedRow);\r\n                    if (parentsIds && parentsIds.length) {\r\n                        parentsIds = parentsIds.map(\r\n                            (n) => this.getPathCode(n)\r\n                        );\r\n                        this.showLoading();\r\n                        selectedRows$ = this.httpMgr\r\n                            .getData({ parentsIds }, \"allChildren\")\r\n                            .pipe(\r\n                                map((r: LookupGridResult) => {\r\n                                    const items = r.items\r\n                                        ? r.items.map((d) => d.data)\r\n                                        : [];\r\n                                    const allitems = [...selectedRow, ...items];\r\n                                    let ids = allitems.map((n) => n[this.idField]);\r\n                                    ids = Array.from(new Set(ids));\r\n                                    return ids.map((n) =>\r\n                                        allitems.find((a) => a[this.idField] === n)\r\n                                    );\r\n                                })\r\n                            );\r\n                    }\r\n                }\r\n            }\r\n\r\n            selectedRows$.subscribe((rows) => {\r\n                this.closeLoading();\r\n                if (this.isGetAllChidlNodes) {\r\n                    this.lookupSelectionSer.loadSelections(rows);\r\n                }\r\n                this.updateControlValue(rows);\r\n                if (!this.useTip || !rows) {\r\n                    return;\r\n                }\r\n                if (this.useTip) {\r\n                    this.personalConfigService.updateQueckSelected(\r\n                        rows,\r\n                        this.localService.localeId\r\n                    );\r\n                }\r\n            });\r\n        } else {\r\n            if (message) {\r\n                if (this.notifyService) {\r\n                    this.notifyService.warning(message);\r\n                } else {\r\n                    this.messagerService.warning(message, \"\", true, () => {\r\n                        this.dialog.el.nativeElement.click();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateControlValue(selectedRow) {\r\n        if (selectedRow) {\r\n            this.setDisplayText(selectedRow);\r\n            if (this.mappingFn) {\r\n                this.mappingFn(selectedRow, this.mapFields, this.bindingData);\r\n            } else {\r\n                if (this.mapFields && this.bindingData) {\r\n                    this.defaultMapping.lookupFieldMap(\r\n                        selectedRow,\r\n                        this.mapFields,\r\n                        this.bindingData\r\n                    );\r\n                }\r\n            }\r\n            this.setModelValue(this.displayText);\r\n            if (this[\"inDatagrid\"] && selectedRow) {\r\n                const selectItems = Array.isArray(selectedRow)\r\n                    ? selectedRow\r\n                    : [selectedRow];\r\n                this.updateBindData(selectItems);\r\n            }\r\n            this.selectedData.emit(selectedRow);\r\n            this.runDictPickedEvent(selectedRow);\r\n            this.isTextChange = false;\r\n        } else {\r\n            if (document.activeElement) {\r\n                (document.activeElement as HTMLButtonElement).blur();\r\n            }\r\n            this.messagerService.warning(this.mustChoosAdatarow);\r\n        }\r\n    }\r\n\r\n    private updateBindData(selectedRow) {\r\n        if (!this.mapFields) {\r\n            return;\r\n        }\r\n\r\n        const helpFields = Object.keys(this.mapFields);\r\n        if (\r\n            this.ngControl &&\r\n            this.ngControl.formDirective &&\r\n            this.ngControl.formDirective.form &&\r\n            this.ngControl.formDirective.form.bindingData\r\n        ) {\r\n            const bindingData = this.ngControl.formDirective.form.bindingData;\r\n\r\n            if (bindingData) {\r\n                helpFields.forEach((helpField: any) => {\r\n                    this.mapFields[helpField]\r\n                        .split(\",\")\r\n                        .forEach((formField: any) => {\r\n                            const val = selectedRow\r\n                                .map((r) => {\r\n                                    return this.utils.getValue(helpField, r);\r\n                                })\r\n                                .join(this.multipleChoiceSeparator);\r\n                            this.utils.setValue(bindingData, formField, val);\r\n                        });\r\n                });\r\n            }\r\n\r\n            // if (bindingData.setValue) {\r\n            //     const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n            //     let pathArr: string[] = [];\r\n            //     if (bindingPath) {\r\n            //         pathArr = bindingPath.split('/').filter(n => n !== '');\r\n            //     }\r\n\r\n            //     helpFields.forEach((helpField: any) => {\r\n            //         this.mapFields[helpField].split(',').forEach((formField: any) => {\r\n            //             const fieldPaths = pathArr.concat(formField.split('.'));\r\n            //             const val = selectedRow.map(r => {\r\n            //                 return this.utils.getValue(formField, r);\r\n            //             }).join(this.multipleChoiceSeparator);\r\n            //             bindingData.setValue(pathArr.concat(fieldPaths), val, true, true);\r\n            //         });\r\n            //     });\r\n            // }\r\n        } else {\r\n            // if (this.bindingData) {\r\n            //     helpFields.forEach((helpField: any) => {\r\n            //         this.mapFields[helpField].split(',').forEach((formField: any) => {\r\n            //             const val = selectedRow.map(r => {\r\n            //                 return this.utils.getValue(formField, r);\r\n            //             }).join(this.multipleChoiceSeparator);\r\n            //             this.utils.setValue(this.bindingData, formField, val);\r\n            //         });\r\n            //     });\r\n            // }\r\n        }\r\n    }\r\n\r\n    private getExtendInfoFields(isHelpData = true) {\r\n        if (!this.extInfoFields) {\r\n            this.writeConsole(`æªè®¾ç½®æ©å±å­æ®µã`);\r\n            return [];\r\n        }\r\n        const tipFieldArr = this.extInfoFields.split(\",\");\r\n\r\n        if (isHelpData) {\r\n            let extendInfoFields = [];\r\n            extendInfoFields = tipFieldArr.map((tf) => {\r\n                const mapKey = Object.keys(this.mapFields).find((k) => {\r\n                    return this.mapFields[k] === tf;\r\n                });\r\n\r\n                if (mapKey) {\r\n                    return mapKey;\r\n                } else {\r\n                    this.writeConsole(`å¨å¸®å©æ å°å­æ®µä¸­æªæ¾å°${tf}`);\r\n                    return \"\";\r\n                }\r\n            });\r\n            return extendInfoFields;\r\n        }\r\n\r\n        return tipFieldArr;\r\n    }\r\n\r\n    onUpdateExtendInfo() {\r\n        const jsonData = this.selectionMgr.getBindingData();\r\n        this.updateExtendInfo(jsonData, false);\r\n    }\r\n\r\n    // éä¸­å¸®å©æ°æ®åï¼æ´æ°æ©å±ä¿¡æ¯\r\n    private updateExtendInfo(data: any, isHelpData = true) {\r\n        if (data) {\r\n            if (this.extInfoFormatter) {\r\n                if (Array.isArray(data)) {\r\n                    const tipString = data.map((n) => {\r\n                        return this.getExtendInfoText(n);\r\n                    });\r\n                    this.extendInfo = tipString.join(\"ï¼\");\r\n                } else {\r\n                    this.extendInfo = this.getExtendInfoText(data);\r\n                }\r\n            } else {\r\n                const extendInfoFields = this.getExtendInfoFields(isHelpData);\r\n                if (extendInfoFields && extendInfoFields.length) {\r\n                    if (Array.isArray(data)) {\r\n                        const tipString = data.map((n) => {\r\n                            return this.getExtendInfoText(n, extendInfoFields);\r\n                        });\r\n                        this.extendInfo = tipString.join(\"ï¼\");\r\n                    } else {\r\n                        this.extendInfo = this.getExtendInfoText(\r\n                            data,\r\n                            extendInfoFields\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getExtendInfoText(itemData, fields = null) {\r\n        if (typeof this.extInfoFormatter === \"function\") {\r\n            return this.extInfoFormatter({\r\n                bindingData: itemData,\r\n                instance: this,\r\n            });\r\n        } else {\r\n            const tipString = [];\r\n            const tipValues = fields.map((t) => {\r\n                const tfv = this.utils.getValue(t, itemData);\r\n                tipString.push(tfv);\r\n                return { [t]: tfv };\r\n            });\r\n            return tipString.join(\" \");\r\n        }\r\n    }\r\n\r\n    private getDisplayText(rows: any) {\r\n        const df = this.displayFields\r\n            ? this.displayFields.split(\",\")\r\n            : [this.textField];\r\n        const txtArr = rows.map((r) => {\r\n            const t = [];\r\n            df.forEach((n) => {\r\n                t.push(this.utils.getValue(n, r));\r\n            });\r\n            return t.join(this.displayTextSeparator);\r\n        });\r\n\r\n        if (this.gridOptions.singleSelect) {\r\n            return txtArr.join(\"\");\r\n        } else {\r\n            if (this.displayFields) {\r\n                return txtArr.map((t) => \"[\" + t + \"]\").join(this.multipleChoiceSeparator);\r\n            } else {\r\n                return txtArr.join(this.multipleChoiceSeparator);\r\n            }\r\n        }\r\n    }\r\n\r\n    private setDisplayText(selectedRow: any) {\r\n        this.originalText = this.displayText;\r\n\r\n        if (this.gridOptions.singleSelect) {\r\n            if (this.displayFormatter) {\r\n                this.displayText = this.utils.getValue(\r\n                    this.textField,\r\n                    selectedRow\r\n                );\r\n                if (!this.isTree()) {\r\n                    this.displayText = this.displayFormatter(\r\n                        this.displayText,\r\n                        [selectedRow],\r\n                        {\r\n                            lookup: this,\r\n                            datatable: this.componentRef\r\n                                .instance as DataTableComponent,\r\n                        }\r\n                    );\r\n                } else {\r\n                    const tt = this.componentRef.instance as TreeTableComponent;\r\n                    this.displayText = this.displayFormatter(\r\n                        this.displayText,\r\n                        [selectedRow],\r\n                        { lookup: this, tree: tt }\r\n                    );\r\n                }\r\n            } else {\r\n                this.displayText = this.getDisplayText([selectedRow]);\r\n            }\r\n            this.displayValue = selectedRow[this.valueField || this.idField];\r\n        } else {\r\n            if (selectedRow.length) {\r\n                if (this.displayFormatter) {\r\n                    this.displayText = selectedRow\r\n                        .map((r) => {\r\n                            return this.utils.getValue(this.textField, r);\r\n                        })\r\n                        .join(this.multipleChoiceSeparator);\r\n                    if (!this.isTree()) {\r\n                        this.displayText = this.displayFormatter(\r\n                            this.displayText,\r\n                            selectedRow,\r\n                            {\r\n                                lookup: this,\r\n                                datatable: this.componentRef\r\n                                    .instance as DataTableComponent,\r\n                            }\r\n                        );\r\n                    } else {\r\n                        const tt = this.componentRef\r\n                            .instance as TreeTableComponent;\r\n                        this.displayText = this.displayFormatter(\r\n                            this.displayText,\r\n                            selectedRow,\r\n                            { lookup: this, tree: tt }\r\n                        );\r\n                    }\r\n                } else {\r\n                    this.displayText = this.getDisplayText(selectedRow);\r\n                }\r\n\r\n                this.displayValue = selectedRow\r\n                    .map((r) => {\r\n                        return this.utils.getValue(this.valueField || this.idField, r);\r\n                    })\r\n                    .join(this.multipleChoiceSeparator);\r\n            }\r\n        }\r\n        this.originalText = this.displayText;\r\n    }\r\n\r\n    runDictPickedEvent(rowData: any) {\r\n        if (this.dictPicked) {\r\n            if (this.okButton) {\r\n                this.okButton.nativeElement.disabled = true;\r\n            }\r\n            this.dictPickedSubscription = this.dictPicked(rowData).subscribe(\r\n                (v: any) => {\r\n                    if (this.okButton) {\r\n                        this.okButton.nativeElement.disabled = false;\r\n                    }\r\n                    if (typeof v === \"boolean\") {\r\n                        if (v) {\r\n                            this.closeDialog(rowData);\r\n                        }\r\n                    } else if (\r\n                        typeof v === \"object\" &&\r\n                        v.closeDialog !== undefined &&\r\n                        !v.closeDialog\r\n                    ) {\r\n                        if (v.message) {\r\n                            this.messagerService.warning(v.message);\r\n                        } else {\r\n                            this.closeDialog(rowData);\r\n                        }\r\n                    } else {\r\n                        this.closeDialog(rowData);\r\n                    }\r\n                }\r\n            );\r\n        } else {\r\n            this.closeDialog(rowData);\r\n        }\r\n    }\r\n\r\n    private focusToInput(): void {\r\n        this.zone.runOutsideAngular(() => {\r\n            setTimeout(() => {\r\n                if (this.inputGroup && this.inputGroup.textbox) {\r\n                    this.inputGroup.textbox.nativeElement.focus();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    closeDialog(rowData = null) {\r\n        if (this.dialog) {\r\n            this.dialog.close();\r\n        }\r\n        \r\n        if (rowData) {\r\n            this.multiSelMgr.save(rowData);\r\n        }\r\n        \r\n        // this.isShow = false;\r\n        this.focusToInput();\r\n    }\r\n\r\n    cancelSelect() {\r\n        this.closeDialog();\r\n        this.isTextChange = false;\r\n        if (!this.nosearch) {\r\n            this.displayText = this.originalText;\r\n            this.setModelValue(this.displayText);\r\n        }\r\n\r\n        if (this.cancelHandler) {\r\n            this.cancelHandler(this);\r\n        }\r\n    }\r\n\r\n    setModelValue(v) {\r\n        if (this.onModelChange) {\r\n            this.onModelChange(v);\r\n            this.valueChanged.emit(v);\r\n        }\r\n    }\r\n\r\n    // æ°æ®åè¡¨ï¼æ¶èï¼ å·²éæ°æ® tab é¡µåæ¢\r\n    onTabChange(e: any) {\r\n        this.activeTab = e.tabIndex;\r\n        this.personalConf.tabIndex = this.activeTab;\r\n        const _firstChange = this.isTabChanged;\r\n        this.isTabChanged = true;\r\n        this.personalConfigService.updatePersonalConfig({\r\n            tabIndex: e.tabIndex,\r\n        });\r\n\r\n        if (this.activeTab === \"datalist\") {\r\n            if (this.isDoublleList() && !this.leftComponentRef) {\r\n                if (this.navigationOptions) {\r\n                    this.lookupCmpMgr.createLeftComponent(\r\n                        this.navigationOptions\r\n                    );\r\n                } else {\r\n                    this.initData();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!this.items || !this.items.length) {\r\n                this.initData();\r\n            } else {\r\n                if (!_firstChange) {\r\n                    if (this.isTree()) {\r\n                        this.loadTreeTableData();\r\n                    } else {\r\n                        this.loadDataTableData();\r\n                        this.dtEventMgr.bindDataTableEvent();\r\n                    }\r\n                }\r\n                // this.selectionMgr.selectCurrentValue();\r\n            }\r\n            this.showGetAllChildrenCheckbox();\r\n        } else {\r\n            if (this.activeTab === \"favorite\") {\r\n                if (this.isTree()) {\r\n                    this.initData();\r\n                } else {\r\n                    if (\r\n                        !this.favoriteItems ||\r\n                        !this.favoriteItems.length ||\r\n                        this.favoriteItems.length !== this.favHelper.getFavoritIds().length\r\n                    ) {\r\n                        this.initData();\r\n                    } else if (!_firstChange) {\r\n                        this.favHelper._loadFavoriteData(this.favoriteItems);\r\n                        // this.selectionMgr.selectCurrentValue();\r\n                    }\r\n                    //  else {\r\n                    //     this.selectionMgr.selectCurrentValue();\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.changeDetector.detectChanges();\r\n        setTimeout(() => {\r\n            this.resizeCmp();\r\n            if (this.isTree()) {\r\n                const y = this.componentRef.instance.state.scrollY;\r\n                this.componentRef.instance.scrollToY(y, 0);\r\n\r\n                if (this.enableCascade) {\r\n                    this.ttEventMgr.cascadeValueChanged(this.cascadeStatus);\r\n                }\r\n            }\r\n\r\n            if (this.isDoublleList() && this.displayType === LookupGridDisplayType.NavTreeList && !this.navTreeToList) {\r\n                this.leftComponentRef.instance.updateScrollPosition(); \r\n            }\r\n            this.selectionMgr.selectCurrentValue();\r\n        });\r\n    }\r\n\r\n    //#region  Tag View ----------------------------------------------------------------------\r\n    private registerMouseEventForTagView() {\r\n        if (this.enableClear) {\r\n            this.tagbox.nativeElement.addEventListener(\r\n                \"mouseenter\",\r\n                this.onTagboxMouseEnter.bind(this)\r\n            );\r\n            this.tagbox.nativeElement.addEventListener(\r\n                \"mouseleave\",\r\n                this.onTagboxMouseLeave.bind(this)\r\n            );\r\n        }\r\n    }\r\n\r\n    private toggleClearIcon(event: any, isShow = false) {\r\n        const str = isShow ? \"\" : \"none\";\r\n        const clearIcon = event.target.querySelector(\".input-group-clear\");\r\n        if (clearIcon) {\r\n            clearIcon.style.display = str;\r\n        }\r\n    }\r\n\r\n    private onTagboxMouseEnter(event) {\r\n        if (this.displayText && this.enableClear) {\r\n            if (!this.readonly && !this.disabled) {\r\n                this.showTagboxClearButton = true;\r\n            }\r\n        }\r\n        if (this.showTagboxClearButton) {\r\n            this.toggleClearIcon(event, true);\r\n        }\r\n    }\r\n\r\n    private onTagboxMouseLeave(event) {\r\n        this.toggleClearIcon(event);\r\n    }\r\n\r\n    onRemoveSelectItem($event, txt) {\r\n        $event.stopPropagation();\r\n        const textArray = Array.from(this.displayTextList);\r\n        const removedIndex = this.displayTextList.indexOf(txt);\r\n        textArray.splice(removedIndex, 1);\r\n        this.displayText = textArray.join(this.multipleChoiceSeparator);\r\n        this.originalText = this.displayText;\r\n        this.setModelValue(this.displayText);\r\n\r\n\r\n        if (this.displayValue) {\r\n            const vals = this.displayValue.split(this.multipleChoiceSeparator);\r\n            vals.splice(removedIndex, 1);\r\n            this.displayValue = vals.join(this.multipleChoiceSeparator);\r\n        }\r\n\r\n        if (this.mapFields) {\r\n            this.updateOtherFieldDataWhenTagremoved(removedIndex);\r\n        }\r\n\r\n        this.tagRemoved.emit({ removedIndex, instance: this });\r\n    }\r\n\r\n    private updateOtherFieldDataWhenTagremoved(removedIndex) {\r\n        const helpFields = Object.keys(this.mapFields);\r\n        const textFieldIndex = helpFields.indexOf(this.textField);\r\n\r\n        if (\r\n            this.ngControl &&\r\n            this.ngControl.formDirective &&\r\n            this.ngControl.formDirective.form &&\r\n            this.ngControl.formDirective.form.bindingData\r\n        ) {\r\n            const bindingData = this.ngControl.formDirective.form.bindingData;\r\n            if (bindingData.setValue) {\r\n                const bindingPath =\r\n                    this.ngControl.formDirective.form.bindingPath;\r\n                let pathArr: string[] = [];\r\n                if (bindingPath) {\r\n                    pathArr = bindingPath.split(\"/\").filter((n) => n !== \"\");\r\n                }\r\n\r\n                helpFields.forEach((helpField: any) => {\r\n                    this.mapFields[helpField]\r\n                        .split(\",\")\r\n                        .forEach((formField: any) => {\r\n                            const fieldPaths = pathArr.concat(\r\n                                formField.split(\".\")\r\n                            );\r\n                            const val = bindingData.getValue(fieldPaths);\r\n                            const valArr = val.split(\r\n                                this.multipleChoiceSeparator\r\n                            );\r\n                            valArr.splice(removedIndex, 1);\r\n                            const newVal = valArr.join(\r\n                                this.multipleChoiceSeparator\r\n                            );\r\n                            bindingData.setValue(\r\n                                pathArr.concat(fieldPaths),\r\n                                newVal,\r\n                                true,\r\n                                true\r\n                            );\r\n                        });\r\n                });\r\n            }\r\n        } else {\r\n            if (this.bindingData) {\r\n                if (textFieldIndex > -1) {\r\n                    helpFields.splice(textFieldIndex, 1);\r\n                }\r\n                helpFields.forEach((helpField: any) => {\r\n                    this.mapFields[helpField]\r\n                        .split(\",\")\r\n                        .forEach((formField: any) => {\r\n                            const val = this.utils.getValue(\r\n                                formField,\r\n                                this.bindingData\r\n                            );\r\n                            const valArr = val.split(\r\n                                this.multipleChoiceSeparator\r\n                            );\r\n                            valArr.splice(removedIndex, 1);\r\n                            const newVal = valArr.join(\r\n                                this.multipleChoiceSeparator\r\n                            );\r\n                            this.utils.setValue(\r\n                                this.bindingData,\r\n                                formField,\r\n                                newVal\r\n                            );\r\n                        });\r\n                });\r\n            }\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    onAllChildNodesClick($event: any) {\r\n        this.isGetAllChidlNodes = !this.isGetAllChidlNodes;\r\n    }\r\n\r\n    onIncludeSubordinatesChange(val) {\r\n        this.includeSubordinates = val;\r\n        this.includeSubordinates$.next(val);\r\n    }\r\n\r\n    onTagContainerClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        if (this.tagInput) {\r\n            this.tagInput.focus();\r\n            this.tagInput.textbox.nativeElement.click();\r\n        }\r\n    }\r\n\r\n    expandFirstNode(nodes): TreeNode[] {\r\n        if (nodes && nodes.length) {\r\n            return nodes.map((node: TreeNode) => {\r\n                if (node.children && node.children.length) {\r\n                    node.expanded = true;\r\n                    this.expandFirstNode(node.children);\r\n                }\r\n                return node;\r\n            });\r\n        }\r\n        return nodes;\r\n    };\r\n\r\n    // ç¨äºç»ç»ä¸ªæ§åæ°æ®key\r\n    getLookupBindingFields() {\r\n        if (this.ngControl) {\r\n            if (this.ngControl.name) {\r\n                return this.ngControl.name;\r\n            } else {\r\n                if (this.mapFields && this.mapFields.length) {\r\n                    return Object.keys(this.mapFields).map(k => {\r\n                        return this.mapFields[k];\r\n                    }).join('_');\r\n                } else {\r\n                    return this.textField;\r\n                }\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    onConditionsChange($event) {\r\n        if (this.isTree() ) {\r\n            this.ttEventMgr.conditionsChange($event);\r\n        } else {\r\n            this.dtEventMgr.conditionsChange($event);\r\n        }\r\n    }\r\n\r\n    clearSelected($event: MouseEvent) {\r\n        if($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        const msg = this.localService.getValue('lookup.selectedInfo.confirm');\r\n\r\n        this.messagerService.confirm(msg || 'æ¨ç¡®è®¤è¦åæ¶ææå·²éä¸­çè®°å½åï¼').subscribe((e) => {\r\n            if (e) {\r\n                this.multiSelMgr.clear();\r\n                if (this.selectedDtRef) {\r\n                    this.selectedDtRef.clearSelections();\r\n                } \r\n            }\r\n        });\r\n    }\r\n\r\n    onDeleteSelectedItem($event: MouseEvent) {\r\n        if($event) {\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        if (this.selectedDtRef.selections && this.selectedDtRef.selections.length) {\r\n            const unCheckeIds = this.selectedDtRef.selections.map(n => n[this.idField]);\r\n            this.multiSelMgr.deleteSelectedItems(this.selectedDtRef.selections);\r\n            this.selectedDtRef.unCheckRows(unCheckeIds);\r\n        } else {\r\n            this.notifyService.warning('è¯·å¾éè¦å é¤çè®°å½ï¼');\r\n        }\r\n    }\r\n\r\n    initColumnWidth(columns: any, typ: 'data'|'nav'|'fav'|'sel' = 'data') {\r\n        if (this.personalConf && this.personalConf.colSizeInfo && this.personalConf.colSizeInfo.data) {\r\n            const fieldsizeData = this.personalConf.colSizeInfo[typ];\r\n            if(fieldsizeData) {\r\n                const fields = Object.keys(fieldsizeData);\r\n                if (fields && fields.length) {\r\n                    columns.forEach(n => {\r\n                        if (fieldsizeData[n.field]) {\r\n                            n.width = fieldsizeData[n.field];\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import {\r\n    Component, OnInit, ElementRef, AfterViewInit, OnChanges,\r\n    Output, EventEmitter, ViewChild, Injector, Renderer2, Input, SimpleChanges, ViewEncapsulation\r\n} from '@angular/core';\r\nimport { trigger, state, style, transition, animate } from '@angular/animations';\r\nimport { PersonalConfigService } from './lookup-presonalConfig.service';\r\nimport { LookupGridComponent } from './lookup-grid.component';\r\n\r\n@Component({\r\n    selector: 'lookup-tabs',\r\n    templateUrl: './lookup-tabs.component.html',\r\n    styleUrls: ['./lookup-tabs.component.scss'],\r\n    animations: [\r\n        trigger('flyInOut', [\r\n            transition(':enter', [style({ opacity: 0 }), animate('.3s', style({ opacity: 1 }))]),\r\n            transition(':leave', [animate('.3s', style({ opacity: 0 }))])\r\n        ])\r\n    ]\r\n})\r\nexport class LookupTabsComponent implements OnInit, OnChanges, AfterViewInit {\r\n\r\n    @Input() enableFav = false;\r\n    @Input() activeTab = 'datalist';\r\n    @Input() visible = false;\r\n\r\n    @Input() layout = 'default';\r\n    @Input() dialogTitle = '';\r\n\r\n    @Output() tabChange = new EventEmitter<any>();\r\n\r\n    @ViewChild('inkBar') inkBarRef: ElementRef;\r\n    @ViewChild('dataListNav') dataListNavRef: ElementRef;\r\n    @ViewChild('favoriteNav') favoriteNavRef: ElementRef;\r\n    @ViewChild('selectedNav') selectedNavRef: ElementRef;\r\n    @ViewChild('advanceLayout') advanceLayoutRef: ElementRef;\r\n\r\n    public personalConfigService: PersonalConfigService;\r\n\r\n    private render: Renderer2 = null;\r\n    private el: ElementRef = null;\r\n    lookupIns = null;\r\n    constructor(public injector: Injector) {\r\n        this.personalConfigService = this.injector.get(PersonalConfigService, null);\r\n        this.render = this.injector.get(Renderer2);\r\n        this.el = this.injector.get(ElementRef);\r\n        this.lookupIns = this.injector.get(LookupGridComponent, null);\r\n        if (!this.lookupIns.labels) {\r\n            this.lookupIns.initLabels();\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (changes.activeTab && !changes.activeTab.isFirstChange()) {\r\n            this.initInkBarPos(changes.activeTab.currentValue);\r\n            \r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(() => {\r\n            this.initInkBarPos(this.activeTab);\r\n        }, 300);\r\n    }\r\n\r\n    navClickHandle(e: Event, v: string) {\r\n        e.stopPropagation();\r\n        if (this.activeTab !== v) {\r\n            this.activeTab = v;\r\n            this.tabChange.emit({ event: e, tabIndex: v });\r\n            this.initInkBarPos(v);\r\n            \r\n        }\r\n    }\r\n\r\n    initInkBarPos(which: string) {\r\n\r\n        if (this.layout !== 'default') {\r\n            return;\r\n        }\r\n\r\n        if (!this.enableFav) {\r\n            return;\r\n        }\r\n\r\n        let width = this.dataListNavRef.nativeElement.offsetWidth;\r\n        let left = 0;\r\n        if (which !== 'datalist') {\r\n            left = this.dataListNavRef.nativeElement.offsetWidth;\r\n        }\r\n        if (which === 'favorite') {\r\n            width = this.favoriteNavRef.nativeElement.offsetWidth;\r\n        } else if (which === 'selected') {\r\n            if (this.favoriteNavRef) {\r\n                left += this.favoriteNavRef.nativeElement.offsetWidth;\r\n            }\r\n\r\n            if (this.selectedNavRef) {\r\n                width = this.selectedNavRef.nativeElement.offsetWidth;\r\n            } else {\r\n                this.activeTab = 'datalist';\r\n            }\r\n        }\r\n\r\n        this.inkBarRef.nativeElement.style = `width: ${width}px; transform: translate3d(${left}px, 0px, 0px);`;\r\n    }\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","import { Directive, OnInit, AfterViewInit, Renderer2, Injector, Input} from '@angular/core';\r\nimport { InputGroupComponent } from '@farris/ui-input-group';\r\nimport { PersonalConfigService } from './lookup-presonalConfig.service';\r\nimport { delay } from 'rxjs/operators';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n@Directive({\r\n    selector: '[lookup-tip]'\r\n})\r\nexport class LookupTipDirective implements OnInit, AfterViewInit {\r\n    @Input('lookup-tip') enableTip = false;\r\n    private tipPanel: Element;\r\n    private leaveEvent: any;\r\n    private enterEvent: any;\r\n    private clickEvent: any;\r\n    private isInTipPanel = false;\r\n    private selected: any[];\r\n    private personalConfigService: PersonalConfigService;\r\n    public localService: LocaleService;\r\n    private tipText = 'æ¨è¦æ¾çæ¯ä¸æ¯è¿äºï¼';\r\n    constructor(\r\n        private inputRef: InputGroupComponent,\r\n        private renderer: Renderer2,\r\n        public injector: Injector\r\n    ) {\r\n        this.personalConfigService = this.injector.get(PersonalConfigService, null);\r\n        this.localService = this.injector.get(LocaleService);\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.tipText = this.localService.getValue('lookup.tipText');\r\n        this.enableTip = false; // å æ°æ®æéé®é¢ï¼æ­¤åè½æå±è½ tfs: 403924\r\n        if (this.enableTip) {\r\n            this.inputRef.iconMouseEnter.subscribe(e => {\r\n                this.creatPanel();\r\n            });\r\n            this.inputRef.iconMouseLeave.pipe(delay(200)).subscribe(e => {\r\n                if (!this.isInTipPanel) {\r\n                    this.removePanel();\r\n                }\r\n            });\r\n            this.inputRef.clickHandle.subscribe(e => {\r\n                this.removePanel();\r\n            });\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void { }\r\n\r\n    // è·åå¿«æ·è¾å¥æ°æ®\r\n    private getQuickSelectedByLocaleId() {\r\n        const localeid = this.localService.localeId;\r\n        const personalConf = this.personalConfigService.getPersonalData();\r\n        if (personalConf && personalConf.quickSelected) {\r\n            const items = personalConf.quickSelected[localeid];\r\n            if (items && items.length) {\r\n                return items;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    creatPanel() {\r\n        this.selected = this.getQuickSelectedByLocaleId();\r\n        if (this.tipPanel || !this.selected || (this.selected && this.selected.length === 0)) {\r\n            return;\r\n        }\r\n        const pos = this.setPosition();\r\n        const ul = this.renderer.createElement('ul');\r\n        const path = this.personalConfigService.textField.split('.');\r\n        this.selected.forEach((item, index) => {\r\n            const li = this.renderer.createElement('li');\r\n            li.innerHTML = this.find(item, this.personalConfigService.textField);\r\n            this.renderer.setProperty(li, 'id', index);\r\n            this.renderer.appendChild(ul, li);\r\n        });\r\n        const header = this.renderer.createElement('div');\r\n        this.renderer.addClass(header, 'lookup-tip-header');\r\n        header.innerHTML = this.tipText;\r\n        this.tipPanel = this.renderer.createElement('div');\r\n        this.renderer.appendChild(this.tipPanel, header);\r\n        this.renderer.appendChild(this.tipPanel, ul);\r\n        this.renderer.addClass(this.tipPanel, 'lookup-tip');\r\n        this.renderer.setStyle(this.tipPanel, 'top', pos.top);\r\n        this.renderer.setStyle(this.tipPanel, 'left', pos.left);\r\n        this.renderer.setStyle(this.tipPanel, 'width', pos.width);\r\n        this.renderer.appendChild(document.body, this.tipPanel);\r\n        this.leaveEvent = this.renderer.listen(this.tipPanel, 'mouseleave', () => {\r\n            this.removePanel();\r\n        });\r\n        this.enterEvent = this.renderer.listen(this.tipPanel, 'mouseenter', () => {\r\n            this.isInTipPanel = true;\r\n        });\r\n        this.clickEvent = this.renderer.listen(this.tipPanel, 'click', (e) => {\r\n            if (e.target.nodeName === 'LI') {\r\n                this.selectItem(e.target.id);\r\n            }\r\n        });\r\n    }\r\n\r\n    removePanel() {\r\n        if (document.body.contains(this.tipPanel)) {\r\n            this.renderer.removeChild(document.body, this.tipPanel);\r\n            this.tipPanel = null;\r\n            this.isInTipPanel = false;\r\n            this.leaveEvent();\r\n            this.enterEvent();\r\n            this.clickEvent();\r\n        }\r\n    }\r\n\r\n    setPosition() {\r\n        const { left, top, width, height } = this.inputRef.inputGroup.nativeElement.getBoundingClientRect();\r\n        return {\r\n            left: left + 'px',\r\n            top: top + height + 'px',\r\n            width: width + 'px'\r\n        };\r\n    }\r\n\r\n    selectItem(val) {\r\n        const item = this.selected.find((el, index) => Number(val) === index);\r\n        this.removePanel();\r\n        if (this.personalConfigService.singleSelect) {\r\n            this.personalConfigService.selectItemObser$.next(item);\r\n        } else {\r\n            this.personalConfigService.selectItemObser$.next([item]);\r\n        }\r\n    }\r\n\r\n    find(obj, keys) {\r\n        const keyArr = keys.split('.');\r\n        const key = keyArr[0];\r\n        const target = obj[key];\r\n        if (target instanceof Object) {\r\n            keyArr.shift();\r\n            return this.find(target, keyArr.join('.'));\r\n        } else {\r\n            return target;\r\n        }\r\n    }\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, HostListener, Injector, Input, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'lookup-quick-select-panel',\r\n    templateUrl: './quick-select-panel.component.html'\r\n})\r\n\r\nexport class LookupQuickSelectPanelComponent implements OnInit {\r\n\r\n    @Input() showMore = true;\r\n    @Input() data: Array<any> = [];\r\n    @Input() textField: string = '';\r\n    @Input() formatter: (rowObj: any) => string;\r\n    @Input() maxItems = 10;\r\n\r\n    @Output() moreClcik = new EventEmitter();\r\n    @Output() itemClick = new EventEmitter();\r\n\r\n    @ViewChild('itemsContainer') itemsContainer: ElementRef<any>;\r\n\r\n    activeIndex = -1;\r\n\r\n    constructor(private injector: Injector, private cdr: ChangeDetectorRef) { }\r\n\r\n    @HostListener('mousedown', ['$event'])\r\n    onClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n    }\r\n\r\n    ngOnInit() { }\r\n\r\n    loadData(items: any) {\r\n        this.data = items;\r\n\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    onMoreClick($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.moreClcik.emit($event);\r\n    }\r\n\r\n    formatData(rowObj: any) {\r\n        return this.formatter(rowObj);\r\n    }\r\n\r\n    onItemClick($event, item) {\r\n        this.itemClick.emit({data: item, evnet: $event});\r\n    }\r\n\r\n    setActiveItem(index: number) {\r\n        this.activeIndex = index;\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n}","import { AfterViewInit, ComponentFactoryResolver, ComponentRef, Directive, ElementRef, HostListener, Injector, Input, NgZone, OnDestroy, OnInit, Optional, Renderer2 } from '@angular/core';\r\nimport { reqAnimFrame } from '@farris/ui-common';\r\nimport { InputGroupComponent } from '@farris/ui-input-group';\r\nimport { from, fromEvent, Observable } from 'rxjs';\r\nimport { debounceTime, filter, map } from 'rxjs/operators';\r\n\r\nimport { LookupGridDisplayType, QuickSelectOption } from '../lookup-displaytype';\r\nimport { DisplayInfo, LOAD_DATA_TYPE, LookupGridResult, PickingResult } from '../lookup-grid-options';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { LookupQuickSelectPanelComponent } from './quick-select-panel.component';\r\n\r\n@Directive({ selector: '[quick-select]'})\r\nexport class LookupQuickSelectDirective implements OnInit, AfterViewInit, OnDestroy {\r\n    @Input('quick-select') options: QuickSelectOption;\r\n    private panelElement: HTMLElement;\r\n    private cmpRef: ComponentRef<LookupQuickSelectPanelComponent>;\r\n\r\n    private data = [];\r\n\r\n    constructor(private injector: Injector, private ngzone: NgZone, private render: Renderer2, private inputRef: InputGroupComponent, private lookupRef: LookupGridComponent,\r\n        private cfr: ComponentFactoryResolver) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        \r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.options && this.options.enable) {\r\n            this.inputRef.inputClick.subscribe((e: MouseEvent) => {\r\n                e.stopPropagation();\r\n                if (!this.panelElement) {\r\n                    // æ§è¡å¸®å©å\r\n                    this.lookupRef.dictPicking({\r\n                        instance: this,\r\n                    }).subscribe((pr: PickingResult) => {\r\n                        if (this.lookupRef.displayType === LookupGridDisplayType.TreeList || (!this.lookupRef.singleSelect && this.lookupRef.viewType === 'text')) {\r\n                            return;\r\n                        }\r\n                        const { show, customData, message } = this.lookupRef.dialogMgr.checkDictPickingResult(pr);\r\n                        this.lookupRef.customData = customData;\r\n                        if (show) {\r\n                            this.createDataPanel();\r\n                        } else {\r\n                            if (message) {\r\n                                this.lookupRef.notifyService.warning(message);\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n\r\n            this.inputRef.valueChange.pipe(\r\n                debounceTime(200)\r\n            ).subscribe((val: string) => {\r\n                this.lookupRef.dictPicking({instance: this}).subscribe((pr: PickingResult) => {\r\n                    if (this.lookupRef.displayType === LookupGridDisplayType.TreeList || (!this.lookupRef.singleSelect && this.lookupRef.viewType === 'text')) {\r\n                        return;\r\n                    }\r\n                    const { show, customData, message } = this.lookupRef.dialogMgr.checkDictPickingResult(pr);\r\n                    this.lookupRef.customData = customData;\r\n                    if (!this.panelElement) {\r\n                        this.createDataPanel();\r\n                    } else {\r\n                        this.panelElement.style.overflow = 'hidden';\r\n                        this.setPanelPosition(false);\r\n                        this.loadData();\r\n                    }\r\n                })\r\n            });\r\n\r\n            this.inputRef.keydownHandle.pipe(\r\n                filter((event: KeyboardEvent) => {\r\n                    return event.key === 'Escape' || event.key === 'Tab' ||  event.key === 'F2';\r\n                })\r\n            ).subscribe((e) => {\r\n                this.hide(e);\r\n            });\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.lookupRef.overLayService.destory(this.lookupRef.el.nativeElement);\r\n    }\r\n\r\n    private removePanelElement() {\r\n        document.body.removeChild(this.panelElement);\r\n        this.panelElement = null;\r\n    }\r\n\r\n    private clearSearchValue() {\r\n        this.lookupRef._searchState = { \r\n            field: '*', //\"*\",\r\n            value: ''\r\n        }\r\n    }\r\n\r\n    hide(e?: any, isMoreClick = false) {\r\n        reqAnimFrame(() => {\r\n            if (this.panelElement) {\r\n                if (e && ( e.type === 'mousewheel' || e.type === 'wheel')) {\r\n                    this.removePanelElement();\r\n                } else {\r\n                    this.panelElement.classList.remove('f-area-show');\r\n                    setTimeout(() => {\r\n                        this.removePanelElement();\r\n                    },120);\r\n                }\r\n\r\n                if (!this.lookupRef) {\r\n                    return;\r\n                }\r\n\r\n                \r\n                // tfs 579056\r\n                if (this.lookupRef.overLayService) {\r\n                    this.lookupRef.overLayService.destory(this.lookupRef.el.nativeElement);\r\n                }\r\n\r\n                if (isMoreClick) {\r\n                    return;       \r\n                }\r\n\r\n                if (this.lookupRef.tagInput) {\r\n                    // this.lookupRef.tagInput.value = '';\r\n                    this.inputRef.value = '';\r\n                    this.clearSearchValue();\r\n                }\r\n\r\n                if (e && (e.key === 'F2' || this.lookupRef.el.nativeElement.contains(e.target))) {\r\n                    if (this.data && this.data.length) {\r\n                        return;\r\n                    } else {\r\n                        this.clearSearchValue();\r\n                    }\r\n                }\r\n\r\n                if (!this.lookupRef.nosearch && this.lookupRef.displayText !== this.lookupRef.originalText) {\r\n                    this.lookupRef.onChanges(this.lookupRef.originalText)\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private setPanelPosition(updateTopPosition = true) {\r\n        if (this.panelElement) {\r\n            const { width, left, top, height } = this.getPanelSize();\r\n            this.panelElement.style.width = `${width}px`;\r\n            this.panelElement.style.maxHeight = `${height}px`;\r\n            if (updateTopPosition) {\r\n                this.panelElement.style.top = `${top}px`;\r\n            }\r\n            this.panelElement.style.left = `${left}px`;\r\n            this.panelElement.style.zIndex = '10001';\r\n        }\r\n    }\r\n\r\n    private createDataPanel() {\r\n        \r\n        if (this.lookupRef.changeDetector['destroyed']) {\r\n            this.panelElement && this.removePanelElement();\r\n            return;\r\n        }\r\n\r\n        this.panelElement = document.createElement('div');\r\n        this.panelElement.classList.add('overlay-pane', 'f-lookup_quick-panel', 'f-area-hide');\r\n\r\n        document.body.appendChild(this.panelElement);\r\n        this.setPanelPosition();\r\n\r\n        this.panelElement.style.overflow = 'hidden';\r\n        // this.panelElement.style.height = 'auto';\r\n        \r\n        // åå»ºæ°æ®å±ç¤ºç»ä»¶\r\n        const cmpFact = this.cfr.resolveComponentFactory(LookupQuickSelectPanelComponent);\r\n        this.cmpRef = cmpFact.create(this.injector);\r\n        \r\n        this.cmpRef.instance.showMore = this.options.showMore;\r\n        this.cmpRef.instance.textField = this.lookupRef.textField;\r\n        this.cmpRef.instance.formatter = this.options.formatter;\r\n        this.cmpRef.instance.maxItems = this.options.showItemsCount;\r\n\r\n        // cmpRef.location.nativeElement.classList.add('farris-main-area');\r\n        this.panelElement.appendChild(this.cmpRef.location.nativeElement);\r\n\r\n        this.lookupRef.selectionMgr.initDisplayValue();\r\n        \r\n        this.cmpRef.changeDetectorRef.detectChanges();\r\n\r\n        // more clicked æå¼å¸®å©çªå£\r\n        this.cmpRef.instance.moreClcik.subscribe((e) => {\r\n            this.hide(e, true);\r\n            this.lookupRef.showDialog();\r\n        });\r\n\r\n        this.cmpRef.instance.itemClick.subscribe((e: any) => {\r\n            const { data } = e;\r\n            this.selectItem(data);\r\n        });\r\n\r\n\r\n        // æ³¨åé¼ æ æ»è½®ï¼ç¹å»äºä»¶ï¼ç¨äºéèPanel\r\n        this.lookupRef.overLayService.registerMouseEvent(this.lookupRef.el.nativeElement, (e: MouseEvent) => {\r\n            if (!this.panelElement || e.target['closest']('.f-lookup_quick-panel')) {\r\n                return;\r\n            }\r\n            \r\n            if(this.lookupRef.inputGroup && this.lookupRef.inputGroup.textbox.nativeElement === e.target) {\r\n                return false;\r\n            }\r\n\r\n            if(this.lookupRef.tagInput && this.lookupRef.tagInput.textbox.nativeElement === e.target) {\r\n                return false;\r\n            }\r\n\r\n            if (this.cmpRef) {\r\n                this.cmpRef.destroy();\r\n                this.cmpRef = null;\r\n            }\r\n\r\n            this.clearSearchValue();\r\n\r\n            this.hide(e);\r\n        });\r\n\r\n        this.panelElement.classList.add('f-area-show');\r\n\r\n        this.loadData();\r\n    }\r\n\r\n    private selectItem(data: any) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n\r\n        if (this.lookupRef.viewType === 'tag') {\r\n            const isSelect = this.lookupRef.selections.find(n => n[this.lookupRef.idField] === data[this.lookupRef.idField]);\r\n            if (!isSelect) {\r\n                const selectItems: any = [...this.lookupRef.selections, data];\r\n                this.lookupRef.selectItem(selectItems);\r\n                this.lookupRef.lookupSelectionSer.loadSelections(selectItems);\r\n            }\r\n        } else {\r\n            this.lookupRef.selectItem(data);\r\n        }\r\n        this.hide();\r\n    }\r\n\r\n\r\n    private calculationPanelHeight() {\r\n        return this.options.showItemsCount * 30 + (this.options.showMore ? 50: 0) + (this.options.footerHeight||0) + 5;\r\n    }\r\n\r\n    private getInputSizeInfo() {\r\n        const el: any = this.lookupRef.viewType === 'text' ? this.inputRef.inputGroup : this.lookupRef.tagbox;\r\n        return el.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n    private getPanelSize() {\r\n        let { width, height, top, left } = this.getInputSizeInfo();\r\n        const bottom = window.innerHeight - height - top;\r\n        let panelHeight = this.calculationPanelHeight();\r\n\r\n        const h = top > bottom ? top : bottom;\r\n        if (bottom > panelHeight) {\r\n            top = top + height;\r\n            // é¢æ¿ç±ä¸åä¸å±å¼\r\n            this.panelElement.style.transformOrigin = '100% top';\r\n        } else {\r\n            if (top > bottom) {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                    top = 10;\r\n                } else {\r\n                    top = top - parseInt('' + panelHeight, 10) - 5;\r\n                }\r\n\r\n                // é¢æ¿ç±ä¸åä¸å±å¼\r\n                this.panelElement.style.transformOrigin = '100% bottom';\r\n\r\n            } else {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                }\r\n                top = top + height;\r\n            }\r\n        }\r\n\r\n        const minWidth = this.options.minWidth || 200;\r\n        let _width =  width < minWidth? minWidth: width;\r\n        if (window.innerWidth - left < _width) {\r\n            left = left + width - _width;\r\n        }\r\n\r\n        return { width: _width, top, height: panelHeight, left };\r\n    }\r\n\r\n    private getData(): Observable<Array<any>> {\r\n        let p: any = {\r\n            pageInfo: {\r\n                pageSize: this.options.showItemsCount,\r\n                pageIndex: 1,\r\n            },\r\n        };\r\n        let t: LOAD_DATA_TYPE = \"all\";\r\n        if (this.lookupRef.isTextChange) {\r\n            this.lookupRef._searchState = { \r\n                field: this.lookupRef.textField, //\"*\",\r\n                value: this.lookupRef.displayText\r\n            }\r\n            p['search'] = this.lookupRef._searchState;\r\n            t = 'search';\r\n        } else {\r\n            this.lookupRef._searchState = null;\r\n        }\r\n\r\n        if (this.lookupRef.viewType === 'tag') {\r\n            if (this.lookupRef.tagInput.value !== '') {\r\n                this.lookupRef._searchState = { \r\n                    field: this.lookupRef.textField, //\"*\",\r\n                    value: this.lookupRef.tagInput.value\r\n                }\r\n                p['search'] = this.lookupRef._searchState;\r\n                t = 'search';\r\n            } else {\r\n                this.lookupRef._searchState = null;\r\n            }\r\n\r\n            const vals = this.lookupRef.selectionMgr.getSelectedIds();\r\n            if (vals && vals.length) {\r\n                p[\"selectedInfo\"] = {\r\n                    selected: true,\r\n                    selectedIds: vals,\r\n                };\r\n            }\r\n        }\r\n\r\n\r\n        return this.lookupRef.httpMgr.lookupRequest(p, t, true).pipe(\r\n            map((restData: LookupGridResult) => {\r\n                let _items = this.lookupRef.items || [];\r\n                if (restData) {\r\n                    if (this.lookupRef.viewType === 'tag') {\r\n                        this.lookupRef.lookupSelectionSer.loadSelections(\r\n                            restData[\"selectedData\"] || []\r\n                        );\r\n                    }\r\n                    _items = restData.items || [];\r\n\r\n                    if (restData.displayType.toLowerCase().indexOf('treelist') > -1 && _items.length && _items[0].data) {\r\n                        _items = _items.map(n => n.data);\r\n                    }\r\n    \r\n                    // return _items.slice(0, this.options.showItemsCount);\r\n\r\n                } else {\r\n                    if (this.lookupRef.displayText && this.lookupRef.isTextChange) {\r\n                        if (restData.displayType.toLowerCase().indexOf('treelist') > -1 && _items.length && _items[0].data) {\r\n                            _items = _items.map(n => n.data);\r\n                        }\r\n\r\n                        const items = _items.filter(n => {\r\n                            return n[this.lookupRef.textField].indexOf(this.lookupRef.displayText) > -1;\r\n                        }).slice(0, this.options.showItemsCount);\r\n                        _items = items;\r\n\r\n                        // return _items.slice(0, this.options.showItemsCount);\r\n                    }\r\n                }\r\n\r\n                return _items.slice(0, this.options.showItemsCount);\r\n            })\r\n        );\r\n    }\r\n\r\n    private loadData() {\r\n        const loadingRef = this.lookupRef.loadingService.show({container: this.panelElement});\r\n        this.getData().subscribe((data: any) => {\r\n            loadingRef.close();\r\n            if (this.cmpRef && this.cmpRef.instance) {\r\n                this.cmpRef.instance.loadData(data);\r\n                if (data.length < this.options.showItemsCount) {\r\n                    // let newHeight = data.length * 30 + (this.options.showMore ? 50: 0) + (this.options.footerHeight||0) + 5;\r\n                    this.data = data;\r\n\r\n                    let newHeight = this.cmpRef.instance.itemsContainer.nativeElement.querySelector('ul').offsetHeight + 10;\r\n\r\n                    if (!data || !data.length) {\r\n                        newHeight = 55;\r\n                    }\r\n\r\n                    this.cmpRef.instance.itemsContainer.nativeElement.style.height = `${newHeight}px`;\r\n                    if (this.panelElement) {\r\n                        if (this.panelElement.style.transformOrigin.indexOf('bottom') > -1) {\r\n                            this.panelElement.style.top = `${this.getInputSizeInfo().top - newHeight - 5}px` ;\r\n                        }\r\n                        this.panelElement.style.height = 'auto';\r\n                    }\r\n                } else {\r\n                    this.setPanelPosition();\r\n                    this.cmpRef.instance.itemsContainer.nativeElement.style.height = '100%';\r\n                    if (this.panelElement) {\r\n                        this.render.removeStyle(this.panelElement, 'height');\r\n                    }\r\n                }\r\n\r\n                if ((this.lookupRef.isTextChange || (this.lookupRef.tagInput && this.lookupRef.tagInput.value !== '') ||  \r\n                    (this.lookupRef.inputGroup && this.lookupRef.inputGroup.value !== '' && this.lookupRef.isTextChange)) && data && data.length) {\r\n                    this.cmpRef.instance.setActiveItem(0);\r\n                }\r\n\r\n                this.panelElement.style.overflow = 'auto';\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    @HostListener('keydown', ['$event'])\r\n    registerKeyboardEvent($event: KeyboardEvent) {\r\n\r\n        if (!this.lookupRef.singleSelect && this.lookupRef.viewType !== 'tag')  {\r\n            return;\r\n        }\r\n\r\n        let rows= [];\r\n        if (this.cmpRef) {\r\n            rows = this.cmpRef.instance.data;\r\n        }\r\n\r\n        if (!rows || !rows.length) {\r\n            return;\r\n        }\r\n\r\n        if ($event.code === 'ArrowUp' || $event.code === 'ArrowDown') {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n        }\r\n\r\n\r\n        if ($event.code === 'Backspace' && this.lookupRef.viewType === 'tag' &&\r\n            this.lookupRef.selections && this.lookupRef.selections.length &&\r\n            this.lookupRef.tagInput && !this.lookupRef.tagInput.value && this.lookupRef.quickSelect.enableBackspace) {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n            const newdata = this.lookupRef.selections.slice(0, this.lookupRef.selections.length - 1);\r\n            if (!newdata || !newdata.length) {\r\n                this.lookupRef.clearValue(true);\r\n            } else {\r\n                this.lookupRef.selectItem(newdata);\r\n            }\r\n            this.lookupRef.lookupSelectionSer.loadSelections(newdata);\r\n            this.setPanelPosition();\r\n            return;\r\n        }\r\n\r\n\r\n        const idx = this.cmpRef.instance.activeIndex;\r\n        let activeIndex = idx;\r\n\r\n        const setActiveItem = (index) => {\r\n            activeIndex = index;\r\n            this.cmpRef.instance.setActiveItem(index);\r\n        };\r\n\r\n        if ($event.code === 'ArrowUp') {  // up\r\n            if (idx > -1) {\r\n                let prevIdx = idx - 1;\r\n                if (prevIdx < 0) {\r\n                    prevIdx = rows.length - 1;\r\n                }\r\n                setActiveItem(prevIdx);\r\n            } else {\r\n                setActiveItem(rows.length - 1);\r\n            }\r\n        }\r\n        if ($event.code === 'ArrowDown') { // down\r\n            let nextIdx = idx + 1;\r\n            if (nextIdx >= rows.length) {\r\n                nextIdx = 0;\r\n            }\r\n\r\n            setActiveItem(nextIdx);\r\n        }\r\n\r\n        if($event.key === 'Enter') {\r\n            if (rows && rows.length && this.panelElement) {\r\n                const data = rows[idx];\r\n                this.selectItem(data);\r\n            } else {\r\n                this.inputRef.inputClick.emit($event);\r\n            }\r\n        }\r\n    }\r\n}","import { EventEmitter, AfterViewInit, Component, ElementRef, Injector, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, Renderer2, SimpleChanges, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\n\r\n@Component({\r\n    selector: 'lookup-advanced-layout',\r\n    templateUrl: 'lookup-advanced-layout.component.html',\r\n    // styleUrls: ['./advanced-layout.scss'],\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\n\r\nexport class LookupAdvancedLayoutComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\r\n\r\n    @Input() title = 'å¸®å©éæ©å¨'\r\n    @Input() activeTab = 'datalist';\r\n    @Input() enableFav: boolean;\r\n\r\n    @Input() dataTab = 'æ°æ®åè¡¨';\r\n    @Input() favTab = 'æ¶èå¤¹'\r\n\r\n    @Output() tabChanged = new EventEmitter();\r\n    @Output() close = new EventEmitter();\r\n\r\n    @ViewChild('header') headerRel: ElementRef;\r\n    @ViewChild('activetab') activetabRef:ElementRef;\r\n\r\n    dialogRef: DialogComponent;\r\n    constructor(public elRef: ElementRef, private injector: Injector, private zone: NgZone, private render2: Renderer2) {\r\n        this.dialogRef = this.injector.get(DialogComponent, null);\r\n    }\r\n\r\n    ngOnInit() {\r\n        \r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        \r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.activeTab && !changes.activeTab.isFirstChange()) {\r\n            this.setCurrentTab();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.dialogRef) {\r\n            this.dialogRef.dragHandle = this.headerRel.nativeElement;\r\n        }\r\n\r\n        this.setCurrentTab();\r\n    }\r\n\r\n    private setCurrentTab() {\r\n        if (this.activetabRef) {\r\n            this.render2.setStyle(this.activetabRef.nativeElement, 'transform', `translate3d(${this.activeTab == 'datalist' ? 0: 84}px, 0px, 0px)`);\r\n        }\r\n    }\r\n\r\n    changeTabs($event, tabstr) {\r\n        this.activeTab = tabstr;\r\n        this.setCurrentTab();\r\n        this.tabChanged.emit({ tab: tabstr, $event });\r\n    }\r\n\r\n    closeDialog($event) {\r\n        if (this.dialogRef) {\r\n            $event.stopPropagation();\r\n            this.dialogRef.close();\r\n        }\r\n    }\r\n\r\n    changeDialogSize($event: MouseEvent) {\r\n        if (this.dialogRef) {\r\n            $event.stopPropagation();\r\n            this.dialogRef.changeDialogSize();\r\n        }\r\n    }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, EventEmitter, Injector, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { SearchBoxComponent, SearchFieldsComponent } from '@farris/ui-search-box';\r\nimport { LookupGridComponent } from '../lookup-grid.component';\r\nimport { SearchBarMode } from '../lookup-displaytype';\r\n\r\n@Component({\r\n    selector: '[lookup-filter-bar]',\r\n    template: `\r\n    <div class=\"d-flex flex-row\">\r\n        <farris-search-fields #searchfields [fields]=\"filterFields\" class=\"mr-2 f-utils-fill\"  \r\n        *ngIf=\"filterFields && filterFields.length && (viewType == 'both' || viewType=== 'onlyfield')\" \r\n        (conditionChange)=\"onConditionChange($event, false)\"></farris-search-fields>\r\n\r\n        <div style=\"min-width:40%;\" class=\"d-flex flex-row\" [class.w-100]=\"!filterFields || !filterFields.length\" [style.maxWidth]=\"filterFields && filterFields.length?'70%': '100%'\">\r\n            <farris-search-box #searchbox [fields]=\"fields\" [useAnyField]=\"searchAnyField\"\r\n            (conditionChange)=\"onConditionChange($event, true)\" class=\"f-cmp-inputgroup f-utils-fill\" \r\n            *ngIf=\"(viewType == 'both' || viewType=== 'onlyinput')\" (escHandler)=\"onEsc($event)\"></farris-search-box>\r\n            <span class=\"f-icon f-icon-remove clear-search-fields\" \r\n                [ngStyle]=\"((textConditions && textConditions.length) || (fieldConditons && fieldConditons.length)) ? { }: {opacity: '0.3',pointerEvents: 'none'}\"\r\n                (click)=\"onClearConditions($event)\" title=\"{{ 'lookup.clearAllConditions' | locale }}\" style=\"min-width:28px;border: 0;\"></span>\r\n        </div>\r\n    </div>\r\n    `\r\n})\r\n\r\nexport class LookupFilterBarComponent implements OnInit, OnChanges, AfterViewInit {\r\n\r\n    fields = [];\r\n    filterFields = [];\r\n    @Input() searchAnyField = true;\r\n    @Input() columns = [];\r\n    @Input() viewType: SearchBarMode = SearchBarMode.both;\r\n    @Input() isNav = false;\r\n\r\n    @Input() searchFields = [];\r\n\r\n    @Output() conditionsChange = new EventEmitter();\r\n\r\n    @ViewChild('searchbox') searchboxRef: SearchBoxComponent;\r\n    @ViewChild('searchfields') searchfieldsRef: SearchFieldsComponent;\r\n\r\n    textConditions = [];\r\n    fieldConditons = [];\r\n    \r\n\r\n    dialogRef: DialogComponent;\r\n    private el: ElementRef;\r\n    constructor(private injector: Injector, private cd: ChangeDetectorRef, private lookIns: LookupGridComponent) {\r\n        this.dialogRef = this.injector.get(DialogComponent, null);\r\n        this.el = this.injector.get(ElementRef);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.searchFields = this.searchFields || [];\r\n        this.convertColumnsToSearchFields();\r\n\r\n        if(this.dialogRef && this.searchboxRef) {\r\n            this.dialogRef.moving.subscribe(() => {\r\n                this.searchboxRef.updateShadowBoxPosition();\r\n            })\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        if (changes.columns && !changes.columns.isFirstChange()) {\r\n            this.convertColumnsToSearchFields();\r\n            setTimeout(() => {\r\n                this.initSearchValue();\r\n            }, 100)\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n    }\r\n\r\n    private initSearchValue() {\r\n        if (this.lookIns._searchState && !this.isNav && this.searchboxRef) {\r\n            const { field, value} = this.lookIns._searchState;\r\n            if (field === '*' && value != '' && value !== null && value!== undefined) {\r\n                const alltitle = this.lookIns.localService.getValue('lookup.anyFields')\r\n                const _conditions = [{ code: '*', name: alltitle, value }];\r\n                this.searchboxRef.setValue(_conditions, false);\r\n                this.textConditions = this.searchboxRef.expandStarFieldToAllFields();\r\n            }\r\n        }\r\n    }\r\n\r\n    private converColumnToFilterField(n: any) {\r\n        const t: any = {};\r\n        t.id = n.field;\r\n        t.labelCode = n.field;\r\n        t.code = n.fieldPath;\r\n        t.name = n.title;\r\n        const options = n.formatter ? n.formatter.options : null;\r\n        // æ°å­\r\n        if (n.fieldType === 'NumericType') {\r\n            const _options = {...(options || {})};\r\n            n.precision = n.precision || 0;\r\n            _options.precision = _options.precision || 0;\r\n            if (n.precision != _options.precision) {\r\n                _options.precision = n.precision;\r\n            }\r\n\r\n            t.control = Object.assign({ \r\n                \"controltype\": \"number\", \r\n                \"bigNumber\": false, \r\n                \"placeHolder\": 'è¯·è¾å¥æ°å­', \r\n                single: true \r\n            }, _options);\r\n            t.beginPlaceHolder = \"å¼å§æ°å¼\";\r\n            t.endPlaceHolder = \"ç»ææ°å¼\";\r\n        }\r\n        // æä¸¾\r\n        if (n.fieldType === 'EnumType') {\r\n            t.control = {\r\n                \"controltype\": \"enum\",\r\n                \"enumValues\": n.formatter.options.data,\r\n                single: true\r\n            };\r\n        }\r\n\r\n        // å¸å°\r\n        if (n.fieldType === 'BooleanType') {\r\n            let trueText = options ? options.trueText || 'True' : 'True';\r\n\r\n            let falseText = options ? options.falseText || 'False' : 'False';\r\n            t.control = {\r\n                controltype: 'dropdown',\r\n                enumValues: [\r\n                    { value: 1, name: trueText },\r\n                    { value: 0, name: falseText },\r\n                ],\r\n                single: true\r\n            };\r\n        }\r\n\r\n        // æ¥æ\r\n        if (n.fieldType === \"DateType\" || n.fieldType === 'DateTimeType') {\r\n\r\n            let dateFormat = 'yyyy-MM-dd';\r\n            let showTime = false;\r\n            let showType = '1';\r\n            if (options) {\r\n                if (options.format) {\r\n                    dateFormat = options.format;\r\n                }\r\n            }\r\n            if (n.fieldType === 'DateTimeType') {\r\n                showTime = true;\r\n            }\r\n            if (dateFormat === 'yyyy') {\r\n                showType = '2';\r\n            }\r\n            if (dateFormat === 'yyyy-MM') {\r\n                showType = '3';\r\n            }\r\n            t.control = {\r\n                \"controltype\": \"datetime\",\r\n                \"placeholder\": \"è¯·éæ©æ¥æ\",\r\n                single: true,\r\n                dateFormat,\r\n                showTime,\r\n                showType\r\n            };\r\n        }\r\n        return t;\r\n    }\r\n\r\n    private convertColumnsToSearchFields() {\r\n        if (this.columns && this.columns.length) {\r\n            this.fields = this.columns.filter(n => n.fieldType && (n.fieldType === 'StringType' || n.fieldType === 'TextType')).map(n => {\r\n                return {\r\n                    code: n.fieldPath,\r\n                    name: n.title\r\n                };\r\n            });\r\n\r\n            if (!this.fields.length && this.searchFields.length) {\r\n                this.fields = this.searchFields.map(n => {\r\n                    return {\r\n                        code: n.value,\r\n                        name: n.label\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (this.viewType === 'both' || this.viewType === 'onlyfield') {\r\n                this.filterFields = this.columns.filter(n => n.fieldType && n.fieldType !== 'StringType' && n.fieldType !== 'TextType' && n.field).map(n => {\r\n                    return this.converColumnToFilterField(n);\r\n                });\r\n            }\r\n\r\n            if (this.lookIns && this.lookIns.allowQueryFields) {\r\n                const { nav, main } = this.lookIns.allowQueryFields;\r\n                let queryFields = main;\r\n                if (this.isNav) {\r\n                    queryFields = nav;\r\n                }\r\n\r\n                if (queryFields) {\r\n                    const _queryFields = queryFields.split(',');\r\n                    this.fields = this.fields.filter(n => _queryFields.findIndex(f => f === n.code) > -1);\r\n                    this.filterFields = this.filterFields.filter(n => _queryFields.findIndex((f: any) => f === n.code) > -1);\r\n                }\r\n            }\r\n\r\n            this.cd.markForCheck();\r\n        }\r\n    }\r\n\r\n    onConditionChange($event, isString = true) {\r\n        if (isString) {\r\n            this.textConditions = $event;\r\n        } else {\r\n            this.fieldConditons = $event;\r\n        }\r\n\r\n        this.textConditions = this.textConditions || [];\r\n        const _conditions$ =  this.fieldConditons.concat([]);\r\n        if (this.fieldConditons && this.fieldConditons.length && this.textConditions.length) {\r\n            _conditions$[0].lbracket =  this.fieldConditons[0].lbracket + '(';\r\n            _conditions$[_conditions$.length - 1].relation = 1;\r\n            _conditions$[_conditions$.length - 1].rbracket =  _conditions$[_conditions$.length - 1].rbracket + ')';\r\n        }\r\n        \r\n        const _conditions = _conditions$.concat(this.textConditions);\r\n        this.conditionsChange.emit(_conditions);\r\n    }\r\n\r\n    onClearConditions($event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        this.textConditions = [];\r\n        this.fieldConditons = [];\r\n\r\n\r\n        if (this.searchboxRef) {\r\n            this.searchboxRef.clearConditions(false);\r\n        }\r\n\r\n        if (this.searchfieldsRef) {\r\n            this.filterFields.forEach(n => {\r\n                n.value = null;\r\n            });\r\n            this.searchfieldsRef.clearConditions(false);\r\n        }\r\n\r\n        this.cd.detectChanges();\r\n        this.conditionsChange.emit([]);\r\n    }\r\n\r\n    onEsc($event) {\r\n        this.lookIns.closeLoading();\r\n        this.lookIns.closeDialog();\r\n    }\r\n}","import { AfterViewInit, Directive, ElementRef, Injector, Input, NgZone, OnDestroy, OnInit, Renderer2 } from '@angular/core';\r\nimport { CommonUtils, OverLayHiddenService } from '@farris/ui-common';\r\nimport { DataTableComponent } from '@farris/ui-datatable';\r\nimport { NotifyService } from '@farris/ui-notify';\r\n\r\n@Directive({ selector: '[lookup-selected]' })\r\nexport class LookupSelectedDirective implements OnInit, AfterViewInit, OnDestroy{\r\n\r\n    @Input() selectedPanel: ElementRef;\r\n    @Input() dataTableRef: DataTableComponent;\r\n    @Input() count = 0;\r\n\r\n    private overlaySer: OverLayHiddenService;\r\n    private panelMouseEvent = null;\r\n    private notifySer: NotifyService = null;\r\n    private commonUtils = null;\r\n    private panelEscHandler = null;\r\n\r\n    constructor(private injector: Injector, private elRef: ElementRef, private render: Renderer2, private ngZone: NgZone) {\r\n        this.overlaySer = new OverLayHiddenService();\r\n        this.notifySer = this.injector.get(NotifyService, null);\r\n        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils())\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        \r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        setTimeout(() => {\r\n            this.bindingEvents();\r\n        });\r\n\r\n        this.panelMouseEvent =  this.overlaySer.registerMouseEvent(this.elRef.nativeElement, (e: any) => {\r\n            if (this.selectedPanel.nativeElement.contains(e.target)  || this.elRef.nativeElement.contains(e.target) || \r\n            e.target.classList.contains('lookup-clear-selected-items') || e.target.closest('.farris-messager')) {\r\n                return;\r\n            }\r\n\r\n            this.showPanel(false);\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this.panelMouseEvent) {\r\n            this.panelMouseEvent();\r\n            this.panelMouseEvent = null;\r\n        }\r\n    }\r\n\r\n    private showPanel(show = true) {\r\n        const panel = this.selectedPanel.nativeElement;\r\n        if (!show) {\r\n            this.render.removeClass(panel, 'show');\r\n            this.render.addClass(panel, 'd-none');\r\n            if (this.panelEscHandler) {\r\n                this.panelEscHandler();\r\n                this.panelEscHandler = null;\r\n            }\r\n\r\n        } else {\r\n            this.render.addClass(panel, 'show');\r\n            this.render.removeClass(panel, 'd-none');\r\n            // æ³¨åESC\r\n            if (this.commonUtils) {\r\n                this.panelEscHandler = this.commonUtils.regBodyKeydownEvent(null, () => this.showPanel(false));\r\n            }\r\n        }\r\n    }\r\n\r\n    private bindingEvents() {\r\n        if (!this.selectedPanel) {\r\n            return;\r\n        }\r\n        this.ngZone.runOutsideAngular(() => {\r\n            const panel = this.selectedPanel.nativeElement;\r\n            \r\n            this.render.listen(this.elRef.nativeElement, 'click', () => {\r\n                if (this.selectedPanel && this.count) {\r\n                    if (panel.classList.contains('show')) {\r\n                        this.showPanel(false);\r\n                    } else {\r\n                        this.showPanel();\r\n                        const selectedTableContainer = panel.querySelector('.farris-datatable-container');\r\n                        const selectedTableBody = panel.querySelector('.farris-table-scorllable-body');\r\n                        this.render.removeStyle(selectedTableContainer, 'height');\r\n                        this.render.removeStyle(selectedTableBody, 'height');\r\n                      \r\n                        this.dataTableRef.resize({height: panel.offsetHeight - 28, width: panel.offsetWidth - 28});\r\n\r\n                        this.render.setStyle(selectedTableBody, 'height', this.dataTableRef.tableHeight + 'px');\r\n                        this.render.setStyle(selectedTableBody, 'height', this.dataTableRef.scorllableBodyHeight + 'px');\r\n                        \r\n                        this.dataTableRef.dtBody.checkBodyHeightWhenEmptyData();\r\n                    }\r\n                } else {\r\n                    if (this.notifySer) {\r\n                        this.notifySer.warning('å½åè¿æ²¡æéæ©æ°æ®ã');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n}","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @Date: 2018-12-04 10:43:42\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @LastEditTime: 2019-09-26 13:33:30\r\n * @Company: Inspur\r\n * @Version: v0.0.1\r\n */\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { LayoutModule } from '@farris/ui-layout';\r\nimport { LocaleModule} from '@farris/ui-locale';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { MessagerModule } from '@farris/ui-messager';\r\nimport { DataTableModule, DataTableComponent } from '@farris/ui-datatable';\r\nimport { TreeTableModule, TreeTableComponent } from '@farris/ui-treetable';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { NotifyModule } from '@farris/ui-notify';\r\nimport { FarrisContextMenuModule } from '@farris/ui-context-menu';\r\nimport { FarrisFormsModule } from '@farris/ui-forms';\r\n\r\nimport { LookupGridComponent } from './lookup-grid.component';\r\nimport { LookupComponent } from './lookup.component';\r\nimport { LookupLeftComponent } from './lookup-left.component';\r\nimport { LookupTabsComponent } from './lookup-tabs.component';\r\nimport { LookupTipDirective } from './lookup-tip.directive';\r\n\r\nimport { LookupQuickSelectPanelComponent } from './quick-select/quick-select-panel.component';\r\nimport { LookupQuickSelectDirective } from './quick-select/lookup-quick-select.directive';\r\nimport { LookupAdvancedLayoutComponent } from './advanced-layout/lookup-advanced-layout.component';\r\nimport { SearchBoxModule } from '@farris/ui-search-box';\r\nimport { LookupFilterBarComponent } from './advanced-layout/lookup-filter-bar.component';\r\nimport { LookupSelectedDirective } from './selected-list/lookup-selected.directive';\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisCommonModule.forRoot(),\r\n        FarrisDialogModule.forRoot(),\r\n        MessagerModule.forRoot(),\r\n        NotifyModule.forRoot(),\r\n        LoadingModule.forRoot({delay: 1000}),\r\n        InputGroupModule,\r\n        LayoutModule,\r\n        DataTableModule,\r\n        TreeTableModule,\r\n        FarrisContextMenuModule,\r\n        LocaleModule.forRoot(),\r\n        SearchBoxModule,\r\n        FarrisFormsModule\r\n    ],\r\n    exports: [\r\n        LookupGridComponent, \r\n        LookupComponent,\r\n        LookupAdvancedLayoutComponent\r\n    ],\r\n    declarations: [\r\n        LookupGridComponent,\r\n        LookupComponent,\r\n        LookupLeftComponent,\r\n        LookupTabsComponent,\r\n        LookupTipDirective,\r\n        LookupQuickSelectPanelComponent,\r\n        LookupQuickSelectDirective,\r\n        LookupAdvancedLayoutComponent,\r\n        LookupFilterBarComponent,\r\n        LookupSelectedDirective\r\n    ],\r\n    providers: [],\r\n    entryComponents: [\r\n        DataTableComponent, \r\n        TreeTableComponent, \r\n        LookupLeftComponent,\r\n        LookupTabsComponent,\r\n        LookupQuickSelectPanelComponent,\r\n        LookupAdvancedLayoutComponent,\r\n        LookupFilterBarComponent\r\n    ]\r\n})\r\nexport class LookupModule {}\r\n"],"names":["NG_VALUE_ACCESSOR","forwardRef","EventEmitter","Subject","NgZone","NgControl","of","Component","Injector","ElementRef","ChangeDetectorRef","HostBinding","Input","Output","ViewChild","InjectionToken","trim","Injectable","CommonUtils","FilterRelation","Compare","cloneDeep","RuntimeStateService","IdService","TreeTableComponent","catchError","tap","switchMap","map","DataTableComponent","filter","ComponentFactoryResolver","ViewContainerRef","debounceTime","fromEvent","bufferCount","race","first","repeat","buffer","BehaviorSubject","tslib_1.__extends","EventManager","FarrisComponentInstanceService","OverLayHiddenService","DebugService","types","MessagerService","LoadingService","NotifyService","LocaleService","ShortcutsService","ViewEncapsulation","Renderer2","trigger","transition","style","animate","delay","Directive","InputGroupComponent","HostListener","reqAnimFrame","DialogComponent","NgModule","CommonModule","FormsModule","FarrisCommonModule","FarrisDialogModule","MessagerModule","NotifyModule","LoadingModule","InputGroupModule","LayoutModule","DataTableModule","TreeTableModule","FarrisContextMenuModule","LocaleModule","SearchBoxModule","FarrisFormsModule"],"mappings":"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"}
