/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-15 15:24:24
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2019-11-30 14:01:34
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { of, Subject } from 'rxjs';
import { Component, Input, Output, EventEmitter, TemplateRef, ViewChild, Injector, forwardRef, ElementRef, ChangeDetectorRef, HostBinding, NgZone } from '@angular/core';
import { NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { DialogComponent } from '@farris/ui-dialog';
/** @type {?} */
export var LOOKUPINPUT_VALUE_ACCESSOR = {
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef((/**
     * @return {?}
     */
    function () { return LookupComponent; })),
    multi: true
};
var LookupComponent = /** @class */ (function () {
    function LookupComponent(injector, el, changeDetector) {
        this.injector = injector;
        this.el = el;
        this.changeDetector = changeDetector;
        this.hostCls = 'f-cmp-inputgroup';
        /**
         * 窗口标题。默认值：此处显示帮助标题
         */
        this.title = '';
        /**
         * 按钮对齐方式
         */
        this.buttonAlign = 'right';
        /**
         * 是否显示按钮
         */
        this.showButtons = true;
        /**
         * 显示关闭按钮
         */
        this.showCloseButton = true;
        /**
         * 显示最大化按钮
         */
        this.showMaxButton = true;
        /**
         * 允许拖拽尺寸
         */
        this.resizable = true;
        /**
         * 允许拖动窗口
         */
        this.draggable = true;
        /**
         * 禁用
         */
        this.disabled = false;
        /**
         * 允许编辑文本框
         */
        this.editable = true;
        /**
         * 只读
         */
        this.readonly = false;
        this.displayText = '';
        /**
         * 窗口打开后
         */
        this.dialogOpened = new EventEmitter();
        /**
         * 窗口关闭后
         */
        this.dialogClosed = new EventEmitter();
        /**
         * 窗口最大化
         */
        this.dialogMaxed = new EventEmitter();
        /**
         * 拖拽改变窗口尺寸进行时
         */
        this.resizing = new EventEmitter();
        /**
         * 拖拽改变窗口尺寸结束
         */
        this.resized = new EventEmitter();
        /**
         * 帮助窗口默认尺寸
         */
        this.defaultDialogSize = { width: 550, height: 570 };
        this.dialogCreated = new Subject();
        this._isShow = false;
        this.displayValue = '';
        this.originalText = '';
        this.onModelChange = (/**
         * @param {?} obj
         * @return {?}
         */
        function (obj) { });
        this.onModelTouched = (/**
         * @param {?} val
         * @return {?}
         */
        function (val) { });
        this.ngZone = this.injector.get(NgZone);
        // if (!this.personalConfigService) {
        //     const idServ = this.injector.get(IdService);
        //     this.personalConfigService = new PersonalConfigService(idServ);
        // }
    }
    Object.defineProperty(LookupComponent.prototype, "content", {
        set: /**
         * @param {?} content
         * @return {?}
         */
        function (content) {
            if (this.dialog !== content) {
                this.dialog = content;
                if (content) {
                    this.dialogCreated.next(this.dialog);
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupComponent.prototype, "isShow", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isShow;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._isShow = val;
            if (!this.changeDetector['destroyed']) {
                this.changeDetector.detectChanges();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LookupComponent.prototype, "invalid", {
        get: /**
         * @return {?}
         */
        function () {
            return this.ngControl.valid;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    LookupComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.initEvents();
        this.ngControl = this.injector.get(NgControl, null);
    };
    /**
     * @return {?}
     */
    LookupComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.lookupUnsubscribe();
    };
    /**
     * @return {?}
     */
    LookupComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.dialog) {
            this.dialog.closed.subscribe((/**
             * @return {?}
             */
            function () {
                _this.isShow = false;
                _this.dialog = null;
            }));
        }
    };
    /**
     * @return {?}
     */
    LookupComponent.prototype.initEvents = /**
     * @return {?}
     */
    function () {
        if (!this.dictPicking) {
            this.dictPicking = (/**
             * @return {?}
             */
            function () { return of({ showDialog: true }); });
        }
        if (!this.dictPicked) {
            this.dictPicked = (/**
             * @return {?}
             */
            function () { return of({ closeDialog: true }); });
        }
        if (!this.beforeOpen) {
            this.beforeOpen = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.beforeClose) {
            this.beforeClose = (/**
             * @return {?}
             */
            function () { return of(true); });
        }
        if (!this.dialogHeight) {
            this.dialogHeight = this.defaultDialogSize.height;
        }
        if (!this.dialogWidth) {
            this.dialogWidth = this.defaultDialogSize.width;
        }
    };
    /**
     * @return {?}
     */
    LookupComponent.prototype.showDialog = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled || this.readonly) {
            return false;
        }
        this.dictPicking().subscribe((/**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            if (val.showDialog === false) {
                return;
            }
            _this.isShow = true;
            // this.changeDetector.detectChanges();
            _this.ngZone.runOutsideAngular((/**
             * @return {?}
             */
            function () {
                setTimeout((/**
                 * @return {?}
                 */
                function () { return _this.dialog.show(); }));
            }));
        }));
        return false;
    };
    /**
     * @return {?}
     */
    LookupComponent.prototype.closeDialog = /**
     * @return {?}
     */
    function () {
        this.isShow = false;
        if (this.dialog) {
            this.dialog.close();
        }
    };
    /**
     * @private
     * @return {?}
     */
    LookupComponent.prototype.lookupUnsubscribe = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.dictPickedSubscription) {
            this.dictPickedSubscription.unsubscribe();
        }
        if (this.dictPickingSubscription) {
            this.dictPickingSubscription.unsubscribe();
        }
        if (this.dialogCreatedSubscription) {
            this.dialogCreatedSubscription.unsubscribe();
        }
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupComponent.prototype.onResizing = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resizing.emit(pos.size);
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupComponent.prototype.onResized = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.resized.emit(pos.size);
    };
    /**
     * @param {?} pos
     * @return {?}
     */
    LookupComponent.prototype.onMaxDialog = /**
     * @param {?} pos
     * @return {?}
     */
    function (pos) {
        this.dialogMaxed.emit(pos.size);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    LookupComponent.prototype.writeValue = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        if (obj) {
            this.displayText = obj;
            this.displayValue = obj;
            this.originalText = this.displayText;
        }
        else {
            this.displayText = '';
            this.displayValue = '';
            this.originalText = '';
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    LookupComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    LookupComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onModelTouched = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    LookupComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    LookupComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-lookup',
                    template: "\n        <div\n            class=\"lookupbox input-group\"\n            [ngClass]=\"{\n                'f-state-disabled': disabled,\n                'f-state-readonly': readonly,\n                'f-state-editable': !editable\n            }\"\n        >\n            <input\n                class=\"form-control\"\n                [value]=\"displayText\"\n                [disabled]=\"disabled\"\n                [readonly]=\"!editable || readonly\"\n            />\n            <div class=\"input-group-append\">\n                <span class=\"f-select input-group-text\" (click)=\"showDialog()\">\n                    <i class=\"f-icon f-icon-lookup\"></i>\n                </span>\n            </div>\n        </div>\n        <farris-dialog\n            #dialog\n            *ngIf=\"isShow\"\n            [title]=\"title\"\n            [beforeOpen]=\"beforeOpen\"\n            [beforeClose]=\"beforeClose\"\n            [width]=\"dialogWidth\"\n            [height]=\"dialogHeight\"\n            [showButtons]=\"showButtons\"\n            [showMaxButton]=\"showMaxButton\"\n            [buttons]=\"buttonsRef || defaultButtonRef\"\n            [buttonAlign]=\"buttonAlign\"\n            (maxed)=\"onMaxDialog($event)\"\n            (resized)=\"onResized($event)\"\n            (resizing)=\"onResizing($event)\"\n        >\n            <ng-content></ng-content>\n\n            <ng-template #defaultButtonRef>\n                <div style=\"width: 100%;\">\n                    <button\n                        class=\"btn btn-secondary btn-lg\"\n                        (click)=\"closeDialog()\"\n                    >\n                        Cancel\n                    </button>\n                    <button class=\"btn btn-primary btn-lg\">Ok</button>\n                </div>\n            </ng-template>\n        </farris-dialog>\n    ",
                    providers: [LOOKUPINPUT_VALUE_ACCESSOR],
                    styles: ["\n            .input-group {\n                flex-wrap: nowrap;\n            }\n            :host-context(.ng-invalid) .form-control {\n                border-color: #ff0303;\n            }\n        "]
                }] }
    ];
    /** @nocollapse */
    LookupComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ElementRef },
        { type: ChangeDetectorRef }
    ]; };
    LookupComponent.propDecorators = {
        hostCls: [{ type: HostBinding, args: ['class',] }],
        dialogWidth: [{ type: Input }],
        dialogHeight: [{ type: Input }],
        title: [{ type: Input }],
        buttonAlign: [{ type: Input }],
        buttonsRef: [{ type: Input }],
        showButtons: [{ type: Input }],
        showCloseButton: [{ type: Input }],
        showMaxButton: [{ type: Input }],
        resizable: [{ type: Input }],
        draggable: [{ type: Input }],
        disabled: [{ type: Input }],
        editable: [{ type: Input }],
        readonly: [{ type: Input }],
        mapFields: [{ type: Input }],
        valueField: [{ type: Input }],
        textField: [{ type: Input }],
        displayText: [{ type: Input }],
        context: [{ type: Input }],
        beforeOpen: [{ type: Input }],
        beforeClose: [{ type: Input }],
        dictPicking: [{ type: Input }],
        dictPicked: [{ type: Input }],
        dialogOpened: [{ type: Output }],
        dialogClosed: [{ type: Output }],
        dialogMaxed: [{ type: Output }],
        resizing: [{ type: Output }],
        resized: [{ type: Output }],
        content: [{ type: ViewChild, args: ['dialog',] }]
    };
    return LookupComponent;
}());
export { LookupComponent };
if (false) {
    /** @type {?} */
    LookupComponent.prototype.hostCls;
    /**
     * 窗口宽度
     * @type {?}
     */
    LookupComponent.prototype.dialogWidth;
    /**
     * 窗口高度
     * @type {?}
     */
    LookupComponent.prototype.dialogHeight;
    /**
     * 窗口标题。默认值：此处显示帮助标题
     * @type {?}
     */
    LookupComponent.prototype.title;
    /**
     * 按钮对齐方式
     * @type {?}
     */
    LookupComponent.prototype.buttonAlign;
    /**
     * 按钮模板
     * @type {?}
     */
    LookupComponent.prototype.buttonsRef;
    /**
     * 是否显示按钮
     * @type {?}
     */
    LookupComponent.prototype.showButtons;
    /**
     * 显示关闭按钮
     * @type {?}
     */
    LookupComponent.prototype.showCloseButton;
    /**
     * 显示最大化按钮
     * @type {?}
     */
    LookupComponent.prototype.showMaxButton;
    /**
     * 允许拖拽尺寸
     * @type {?}
     */
    LookupComponent.prototype.resizable;
    /**
     * 允许拖动窗口
     * @type {?}
     */
    LookupComponent.prototype.draggable;
    /**
     * 禁用
     * @type {?}
     */
    LookupComponent.prototype.disabled;
    /**
     * 允许编辑文本框
     * @type {?}
     */
    LookupComponent.prototype.editable;
    /**
     * 只读
     * @type {?}
     */
    LookupComponent.prototype.readonly;
    /**
     * 字段映射, { 帮助数据字段：表单字段 }
     * @type {?}
     */
    LookupComponent.prototype.mapFields;
    /**
     * 值字段
     * @type {?}
     */
    LookupComponent.prototype.valueField;
    /**
     * 文本字段
     * @type {?}
     */
    LookupComponent.prototype.textField;
    /** @type {?} */
    LookupComponent.prototype.displayText;
    /**
     * 运行时上下文自定义对象
     * @type {?}
     */
    LookupComponent.prototype.context;
    /**
     * 窗口打开前事件
     * @type {?}
     */
    LookupComponent.prototype.beforeOpen;
    /**
     * 窗口关闭前事件
     * @type {?}
     */
    LookupComponent.prototype.beforeClose;
    /**
     * 帮助前事件
     * @type {?}
     */
    LookupComponent.prototype.dictPicking;
    /** @type {?} */
    LookupComponent.prototype.dictPickingSubscription;
    /**
     * 帮助后事件
     * @type {?}
     */
    LookupComponent.prototype.dictPicked;
    /** @type {?} */
    LookupComponent.prototype.dictPickedSubscription;
    /**
     * 窗口打开后
     * @type {?}
     */
    LookupComponent.prototype.dialogOpened;
    /**
     * 窗口关闭后
     * @type {?}
     */
    LookupComponent.prototype.dialogClosed;
    /**
     * 窗口最大化
     * @type {?}
     */
    LookupComponent.prototype.dialogMaxed;
    /**
     * 拖拽改变窗口尺寸进行时
     * @type {?}
     */
    LookupComponent.prototype.resizing;
    /**
     * 拖拽改变窗口尺寸结束
     * @type {?}
     */
    LookupComponent.prototype.resized;
    /**
     * 帮助窗口默认尺寸
     * @type {?}
     * @private
     */
    LookupComponent.prototype.defaultDialogSize;
    /** @type {?} */
    LookupComponent.prototype.dialogCreated;
    /** @type {?} */
    LookupComponent.prototype.dialogCreatedSubscription;
    /** @type {?} */
    LookupComponent.prototype.dialog;
    /**
     * @type {?}
     * @private
     */
    LookupComponent.prototype._isShow;
    /** @type {?} */
    LookupComponent.prototype.ngControl;
    /** @type {?} */
    LookupComponent.prototype.displayValue;
    /** @type {?} */
    LookupComponent.prototype.originalText;
    /**
     * @type {?}
     * @private
     */
    LookupComponent.prototype.ngZone;
    /** @type {?} */
    LookupComponent.prototype.onModelChange;
    /** @type {?} */
    LookupComponent.prototype.onModelTouched;
    /** @type {?} */
    LookupComponent.prototype.injector;
    /** @type {?} */
    LookupComponent.prototype.el;
    /** @type {?} */
    LookupComponent.prototype.changeDetector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9va3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbG9va3VwLyIsInNvdXJjZXMiOlsibGliL2xvb2t1cC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBUUEsT0FBTyxFQUE0QixFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzdELE9BQU8sRUFDSCxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUNuRCxTQUFTLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBVSxVQUFVLEVBQUUsaUJBQWlCLEVBQ3BELFdBQVcsRUFBRSxNQUFNLEVBQ3hDLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDSCxpQkFBaUIsRUFFakIsU0FBUyxFQUNaLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEIsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDOztBQUtwRCxNQUFNLEtBQU8sMEJBQTBCLEdBQVE7SUFDM0MsT0FBTyxFQUFFLGlCQUFpQjtJQUMxQixXQUFXLEVBQUUsVUFBVTs7O0lBQUMsY0FBTSxPQUFBLGVBQWUsRUFBZixDQUFlLEVBQUM7SUFDOUMsS0FBSyxFQUFFLElBQUk7Q0FDZDtBQUVEO0lBdUtJLHlCQUNXLFFBQWtCLEVBQ2xCLEVBQWMsRUFDZCxjQUFrQztRQUZsQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLE9BQUUsR0FBRixFQUFFLENBQVk7UUFDZCxtQkFBYyxHQUFkLGNBQWMsQ0FBb0I7UUF0R3ZCLFlBQU8sR0FBRyxrQkFBa0IsQ0FBQzs7OztRQU8xQyxVQUFLLEdBQUcsRUFBRSxDQUFDOzs7O1FBRVgsZ0JBQVcsR0FBRyxPQUFPLENBQUM7Ozs7UUFJdEIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7Ozs7UUFFbkIsb0JBQWUsR0FBRyxJQUFJLENBQUM7Ozs7UUFFdkIsa0JBQWEsR0FBRyxJQUFJLENBQUM7Ozs7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LHVDQUFrQjs7SUFDbEIsdUNBQWtCOzs7OztJQU1sQixpQ0FBdUI7O0lBRXZCLHdDQUFrQzs7SUFDbEMseUNBQW1DOztJQUUvQixtQ0FBeUI7O0lBQ3pCLDZCQUFxQjs7SUFDckIseUNBQXlDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQEF1dGhvcjog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBARGF0ZTogMjAxOS0wOC0xNSAxNToyNDoyNFxyXG4gKiBATGFzdEVkaXRvcnM6IOeWr+eLguengOaJjShMdWNhcyBIdWFuZylcclxuICogQExhc3RFZGl0VGltZTogMjAxOS0xMS0zMCAxNDowMTozNFxyXG4gKiBAUVE6IDEwNTU4MTgyMzlcclxuICogQFZlcnNpb246IHYwLjAuMVxyXG4gKi9cclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBPYnNlcnZhYmxlLCBvZiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFRlbXBsYXRlUmVmLFxyXG4gICAgVmlld0NoaWxkLCBJbmplY3RvciwgZm9yd2FyZFJlZiwgT25Jbml0LCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIEFmdGVyVmlld0NoZWNrZWQsIEhvc3RCaW5kaW5nLCBOZ1pvbmUsIE9uRGVzdHJveVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1xyXG4gICAgTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICBDb250cm9sVmFsdWVBY2Nlc3NvcixcclxuICAgIE5nQ29udHJvbFxyXG59IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktZGlhbG9nJztcclxuaW1wb3J0IHsgSVJlc2l6ZUV2ZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kcmFnZ2FibGUnO1xyXG5cclxuaW1wb3J0IHsgUGlja2luZ1Jlc3VsdCwgUGlja2VkUmVzdWx0IH0gZnJvbSAnLi9sb29rdXAtZ3JpZC1vcHRpb25zJztcclxuXHJcbmV4cG9ydCBjb25zdCBMT09LVVBJTlBVVF9WQUxVRV9BQ0NFU1NPUjogYW55ID0ge1xyXG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBMb29rdXBDb21wb25lbnQpLFxyXG4gICAgbXVsdGk6IHRydWVcclxufTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtbG9va3VwJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzcz1cImxvb2t1cGJveCBpbnB1dC1ncm91cFwiXHJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cIntcclxuICAgICAgICAgICAgICAgICdmLXN0YXRlLWRpc2FibGVkJzogZGlzYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAnZi1zdGF0ZS1yZWFkb25seSc6IHJlYWRvbmx5LFxyXG4gICAgICAgICAgICAgICAgJ2Ytc3RhdGUtZWRpdGFibGUnOiAhZWRpdGFibGVcclxuICAgICAgICAgICAgfVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJkaXNwbGF5VGV4dFwiXHJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cIiFlZGl0YWJsZSB8fCByZWFkb25seVwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmRcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZi1zZWxlY3QgaW5wdXQtZ3JvdXAtdGV4dFwiIChjbGljayk9XCJzaG93RGlhbG9nKClcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZmFycmlzLWRpYWxvZ1xyXG4gICAgICAgICAgICAjZGlhbG9nXHJcbiAgICAgICAgICAgICpuZ0lmPVwiaXNTaG93XCJcclxuICAgICAgICAgICAgW3RpdGxlXT1cInRpdGxlXCJcclxuICAgICAgICAgICAgW2JlZm9yZU9wZW5dPVwiYmVmb3JlT3BlblwiXHJcbiAgICAgICAgICAgIFtiZWZvcmVDbG9zZV09XCJiZWZvcmVDbG9zZVwiXHJcbiAgICAgICAgICAgIFt3aWR0aF09XCJkaWFsb2dXaWR0aFwiXHJcbiAgICAgICAgICAgIFtoZWlnaHRdPVwiZGlhbG9nSGVpZ2h0XCJcclxuICAgICAgICAgICAgW3Nob3dCdXR0b25zXT1cInNob3dCdXR0b25zXCJcclxuICAgICAgICAgICAgW3Nob3dNYXhCdXR0b25dPVwic2hvd01heEJ1dHRvblwiXHJcbiAgICAgICAgICAgIFtidXR0b25zXT1cImJ1dHRvbnNSZWYgfHwgZGVmYXVsdEJ1dHRvblJlZlwiXHJcbiAgICAgICAgICAgIFtidXR0b25BbGlnbl09XCJidXR0b25BbGlnblwiXHJcbiAgICAgICAgICAgIChtYXhlZCk9XCJvbk1heERpYWxvZygkZXZlbnQpXCJcclxuICAgICAgICAgICAgKHJlc2l6ZWQpPVwib25SZXNpemVkKCRldmVudClcIlxyXG4gICAgICAgICAgICAocmVzaXppbmcpPVwib25SZXNpemluZygkZXZlbnQpXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuXHJcbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdEJ1dHRvblJlZj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLWxnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cImNsb3NlRGlhbG9nKClcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tbGdcIj5PazwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgICAgPC9mYXJyaXMtZGlhbG9nPlxyXG4gICAgYCxcclxuICAgIHN0eWxlczogW1xyXG4gICAgICAgIGBcclxuICAgICAgICAgICAgLmlucHV0LWdyb3VwIHtcclxuICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDpob3N0LWNvbnRleHQoLm5nLWludmFsaWQpIC5mb3JtLWNvbnRyb2wge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmYwMzAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYFxyXG4gICAgXSxcclxuICAgIHByb3ZpZGVyczogW0xPT0tVUElOUFVUX1ZBTFVFX0FDQ0VTU09SXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTG9va3VwQ29tcG9uZW50XHJcbiAgICBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XHJcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzJykgaG9zdENscyA9ICdmLWNtcC1pbnB1dGdyb3VwJztcclxuXHJcbiAgICAvKiog56qX5Y+j5a695bqmICovXHJcbiAgICBASW5wdXQoKSBkaWFsb2dXaWR0aDogbnVtYmVyO1xyXG4gICAgLyoqIOeql+WPo+mrmOW6piAqL1xyXG4gICAgQElucHV0KCkgZGlhbG9nSGVpZ2h0OiBudW1iZXI7XHJcbiAgICAvKiog56qX5Y+j5qCH6aKY44CC6buY6K6k5YC877ya5q2k5aSE5pi+56S65biu5Yqp5qCH6aKYICovXHJcbiAgICBASW5wdXQoKSB0aXRsZSA9ICcnO1xyXG4gICAgLyoqIOaMiemSruWvuem9kOaWueW8jyAqL1xyXG4gICAgQElucHV0KCkgYnV0dG9uQWxpZ24gPSAncmlnaHQnO1xyXG4gICAgLyoqIOaMiemSruaooeadvyAqL1xyXG4gICAgQElucHV0KCkgYnV0dG9uc1JlZjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAgIC8qKiDmmK/lkKbmmL7npLrmjInpkq4gKi9cclxuICAgIEBJbnB1dCgpIHNob3dCdXR0b25zID0gdHJ1ZTtcclxuICAgIC8qKiDmmL7npLrlhbPpl63mjInpkq4gKi9cclxuICAgIEBJbnB1dCgpIHNob3dDbG9zZUJ1dHRvbiA9IHRydWU7XHJcbiAgICAvKiog5pi+56S65pyA5aSn5YyW5oyJ6ZKuICovXHJcbiAgICBASW5wdXQoKSBzaG93TWF4QnV0dG9uID0gdHJ1ZTtcclxuICAgIC8qKiDlhYHorrjmi5bmi73lsLrlr7ggKi9cclxuICAgIEBJbnB1dCgpIHJlc2l6YWJsZSA9IHRydWU7XHJcbiAgICAvKiog5YWB6K645ouW5Yqo56qX5Y+jICovXHJcbiAgICBASW5wdXQoKSBkcmFnZ2FibGUgPSB0cnVlO1xyXG4gICAgLyoqIOemgeeUqCAqL1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIC8qKiDlhYHorrjnvJbovpHmlofmnKzmoYYgKi9cclxuICAgIEBJbnB1dCgpIGVkaXRhYmxlID0gdHJ1ZTtcclxuICAgIC8qKiDlj6ror7sgKi9cclxuICAgIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICAvKiog5a2X5q615pig5bCELCB7IOW4ruWKqeaVsOaNruWtl+aute+8muihqOWNleWtl+autSB9ICovXHJcbiAgICBASW5wdXQoKSBtYXBGaWVsZHM6IHsgW3NvdXJjZUZpZWxkOiBzdHJpbmddOiBzdHJpbmcgfTtcclxuICAgIC8qKiDlgLzlrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHZhbHVlRmllbGQ6IHN0cmluZztcclxuICAgIC8qKiDmlofmnKzlrZfmrrUgKi9cclxuICAgIEBJbnB1dCgpIHRleHRGaWVsZDogc3RyaW5nO1xyXG4gICAgQElucHV0KCkgZGlzcGxheVRleHQgPSAnJztcclxuXHJcbiAgICAvKiog6L+Q6KGM5pe25LiK5LiL5paH6Ieq5a6a5LmJ5a+56LGhICovXHJcbiAgICBASW5wdXQoKSBjb250ZXh0OiBhbnk7XHJcblxyXG4gICAgLyoqIOeql+WPo+aJk+W8gOWJjeS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgYmVmb3JlT3BlbjogKCkgPT4gT2JzZXJ2YWJsZTxib29sZWFuPjtcclxuICAgIC8qKiDnqpflj6PlhbPpl63liY3kuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGJlZm9yZUNsb3NlOiAoKSA9PiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xyXG4gICAgLyoqIOW4ruWKqeWJjeS6i+S7tiAqL1xyXG4gICAgQElucHV0KCkgZGljdFBpY2tpbmc6IChlbXB0eU9iaj86IHt9KSA9PiBPYnNlcnZhYmxlPFBpY2tpbmdSZXN1bHQ+O1xyXG4gICAgZGljdFBpY2tpbmdTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICAgIC8qKiDluK7liqnlkI7kuovku7YgKi9cclxuICAgIEBJbnB1dCgpIGRpY3RQaWNrZWQ6IChyb3dEYXRhOiBhbnkpID0+IE9ic2VydmFibGU8UGlja2VkUmVzdWx0PjtcclxuICAgIGRpY3RQaWNrZWRTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKiog56qX5Y+j5omT5byA5ZCOICovXHJcbiAgICBAT3V0cHV0KCkgZGlhbG9nT3BlbmVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOeql+WPo+WFs+mXreWQjiAqL1xyXG4gICAgQE91dHB1dCgpIGRpYWxvZ0Nsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDnqpflj6PmnIDlpKfljJYgKi9cclxuICAgIEBPdXRwdXQoKSBkaWFsb2dNYXhlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmi5bmi73mlLnlj5jnqpflj6PlsLrlr7jov5vooYzml7YgKi9cclxuICAgIEBPdXRwdXQoKSByZXNpemluZyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIC8qKiDmi5bmi73mlLnlj5jnqpflj6PlsLrlr7jnu5PmnZ8gKi9cclxuICAgIEBPdXRwdXQoKSByZXNpemVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgLyoqIOW4ruWKqeeql+WPo+m7mOiupOWwuuWvuCAqL1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0RGlhbG9nU2l6ZSA9IHsgd2lkdGg6IDU1MCwgaGVpZ2h0OiA1NzAgfTtcclxuXHJcbiAgICBkaWFsb2dDcmVhdGVkID0gbmV3IFN1YmplY3Q8RGlhbG9nQ29tcG9uZW50PigpO1xyXG4gICAgZGlhbG9nQ3JlYXRlZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gICAgZGlhbG9nOiBEaWFsb2dDb21wb25lbnQ7XHJcbiAgICBAVmlld0NoaWxkKCdkaWFsb2cnKSBzZXQgY29udGVudChjb250ZW50OiBEaWFsb2dDb21wb25lbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cgIT09IGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBjb250ZW50O1xyXG4gICAgICAgICAgICBpZiAoY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dDcmVhdGVkLm5leHQodGhpcy5kaWFsb2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2lzU2hvdyA9IGZhbHNlO1xyXG4gICAgZ2V0IGlzU2hvdygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNTaG93O1xyXG4gICAgfVxyXG4gICAgc2V0IGlzU2hvdyh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc1Nob3cgPSB2YWw7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNoYW5nZURldGVjdG9yWydkZXN0cm95ZWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdDb250cm9sOiBhbnk7XHJcblxyXG4gICAgZGlzcGxheVZhbHVlID0gJyc7XHJcbiAgICBvcmlnaW5hbFRleHQgPSAnJztcclxuXHJcbiAgICBnZXQgaW52YWxpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZ0NvbnRyb2wudmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZTtcclxuXHJcbiAgICBvbk1vZGVsQ2hhbmdlID0gKG9iajogYW55KSA9PiB7IH07XHJcbiAgICBvbk1vZGVsVG91Y2hlZCA9ICh2YWw6IGFueSkgPT4geyB9O1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwdWJsaWMgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHVibGljIGNoYW5nZURldGVjdG9yPzogQ2hhbmdlRGV0ZWN0b3JSZWZcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubmdab25lID0gdGhpcy5pbmplY3Rvci5nZXQoTmdab25lKTtcclxuICAgICAgICAvLyBpZiAoIXRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IGlkU2VydiA9IHRoaXMuaW5qZWN0b3IuZ2V0KElkU2VydmljZSk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMucGVyc29uYWxDb25maWdTZXJ2aWNlID0gbmV3IFBlcnNvbmFsQ29uZmlnU2VydmljZShpZFNlcnYpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluaXRFdmVudHMoKTtcclxuICAgICAgICB0aGlzLm5nQ29udHJvbCA9IHRoaXMuaW5qZWN0b3IuZ2V0KE5nQ29udHJvbCwgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5sb29rdXBVbnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2VkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEV2ZW50cygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGljdFBpY2tpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2luZyA9ICgpID0+IG9mKHsgc2hvd0RpYWxvZzogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpY3RQaWNrZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2VkID0gKCkgPT4gb2YoeyBjbG9zZURpYWxvZzogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZU9wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5iZWZvcmVPcGVuID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5iZWZvcmVDbG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZUNsb3NlID0gKCkgPT4gb2YodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gdGhpcy5kZWZhdWx0RGlhbG9nU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlhbG9nV2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9IHRoaXMuZGVmYXVsdERpYWxvZ1NpemUud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3dEaWFsb2coKTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaWN0UGlja2luZygpLnN1YnNjcmliZSgodmFsOiBQaWNraW5nUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWwuc2hvd0RpYWxvZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmRpYWxvZy5zaG93KCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGxvb2t1cFVuc3Vic2NyaWJlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRpY3RQaWNrZWRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5kaWN0UGlja2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpY3RQaWNraW5nU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGljdFBpY2tpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nQ3JlYXRlZFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ0NyZWF0ZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25SZXNpemluZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzaXppbmcuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICB9XHJcbiAgICBvblJlc2l6ZWQocG9zOiBJUmVzaXplRXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZWQuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICB9XHJcbiAgICBvbk1heERpYWxvZyhwb3M6IElSZXNpemVFdmVudCkge1xyXG4gICAgICAgIHRoaXMuZGlhbG9nTWF4ZWQuZW1pdChwb3Muc2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVWYWx1ZShvYmo6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGV4dCA9IG9iajtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSBvYmo7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5kaXNwbGF5VGV4dDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZCA9IGZuO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==