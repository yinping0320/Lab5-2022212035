(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common/http'), require('@angular/common'), require('@angular/forms'), require('@farris/ui-input-group'), require('@farris/ui-treetable'), require('@farris/ui-dialog'), require('@farris/ui-tabs'), require('@farris/ui-perfect-scrollbar'), require('@farris/ui-avatar'), require('rxjs/operators'), require('@farris/ui-notify'), require('rxjs'), require('@farris/ui-messager'), require('@farris/ui-loading'), require('@angular/core'), require('@farris/ui-common'), require('@farris/ui-datagrid'), require('lodash-es'), require('@farris/ui-locale'), require('@farris/ui-language-textbox'), require('@farris/ui-datagrid-editors')) :
    typeof define === 'function' && define.amd ? define('@farris/ui-organization-selector', ['exports', '@angular/common/http', '@angular/common', '@angular/forms', '@farris/ui-input-group', '@farris/ui-treetable', '@farris/ui-dialog', '@farris/ui-tabs', '@farris/ui-perfect-scrollbar', '@farris/ui-avatar', 'rxjs/operators', '@farris/ui-notify', 'rxjs', '@farris/ui-messager', '@farris/ui-loading', '@angular/core', '@farris/ui-common', '@farris/ui-datagrid', 'lodash-es', '@farris/ui-locale', '@farris/ui-language-textbox', '@farris/ui-datagrid-editors'], factory) :
    (factory((global.farris = global.farris || {}, global.farris['ui-organization-selector'] = {}),global.ng.common.http,global.ng.common,global.ng.forms,global.uiInputGroup,global.uiTreetable,global.uiDialog,global.uiTabs,global.uiPerfectScrollbar,global.uiAvatar,global.rxjs.operators,global.uiNotify,global.rxjs,global.uiMessager,global.uiLoading,global.ng.core,global.uiCommon,global.uiDatagrid,global._,global.uiLocale,global.uiLanguageTextbox,global.uiDatagridEditors));
}(this, (function (exports,http,common,forms,uiInputGroup,uiTreetable,uiDialog,uiTabs,uiPerfectScrollbar,uiAvatar,operators,uiNotify,rxjs,uiMessager,uiLoading,core,uiCommon,uiDatagrid,_,uiLocale,uiLanguageTextbox,uiDatagridEditors) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/api.service.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ApiService = /** @class */ (function () {
        function ApiService(http$$1) {
            this.http = http$$1;
        }
        /**
          * 获取行政组织或系统用户
          * @returns observable
          */
        /**
         * 获取行政组织或系统用户
         * @param {?} param
         * @return {?} observable
         */
        ApiService.prototype.getOrganization = /**
         * 获取行政组织或系统用户
         * @param {?} param
         * @return {?} observable
         */
            function (param) {
                /** @type {?} */
                var options = {
                    headers: new http.HttpHeaders({
                        'Content-Type': 'application/json',
                    }),
                };
                return this.http.post(this.absUrl + '/org', param, options);
            };
        /**
         * @param {?} absOrgType
         * @return {?}
         */
        ApiService.prototype.getOrgGroups = /**
         * @param {?} absOrgType
         * @return {?}
         */
            function (absOrgType) {
                /** @type {?} */
                var options = {
                    headers: new http.HttpHeaders({
                        'Content-Type': 'application/json',
                    }),
                };
                return this.http.get(this.groupApiUrl + '/' + absOrgType, options);
            };
        /**
         * @param {?} groupId
         * @param {?} absOrgType
         * @return {?}
         */
        ApiService.prototype.getGroupMembers = /**
         * @param {?} groupId
         * @param {?} absOrgType
         * @return {?}
         */
            function (groupId, absOrgType) {
                /** @type {?} */
                var options = {
                    headers: new http.HttpHeaders({
                        'Content-Type': 'application/json',
                    }),
                };
                if (!groupId) {
                    return rxjs.of(null);
                }
                /** @type {?} */
                var url = this.groupApiUrl + '/' + groupId + '/absOrgType/' + absOrgType;
                return this.http.get(url, options);
            };
        /**
         * @param {?} groupInfo
         * @return {?}
         */
        ApiService.prototype.saveGroup = /**
         * @param {?} groupInfo
         * @return {?}
         */
            function (groupInfo) {
                /** @type {?} */
                var options = {
                    headers: new http.HttpHeaders({
                        'Content-Type': 'application/json',
                    }),
                };
                return this.http.post(this.groupApiUrl, groupInfo, options);
            };
        ApiService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ApiService.ctorParameters = function () {
            return [
                { type: http.HttpClient }
            ];
        };
        return ApiService;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/favorites.tool.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FavoritesTool = /** @class */ (function () {
        function FavoritesTool(http$$1) {
            this.http = http$$1;
            this.absOrgType = 'System_organization';
            this.busNum = 'common';
            this.idField = 'userId';
            this.favoritesList = [];
            this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
            this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
            this.subject = new rxjs.Subject();
        }
        /**
         * 操作最近联系人或收藏夹
         * @param param any
         * @returns observable
         */
        /**
         * 操作最近联系人或收藏夹
         * @param {?} actionToken
         * @param {?} param any
         * @return {?} observable
         */
        FavoritesTool.prototype.curdRecentContactsOrFavorites = /**
         * 操作最近联系人或收藏夹
         * @param {?} actionToken
         * @param {?} param any
         * @return {?} observable
         */
            function (actionToken, param) {
                /** @type {?} */
                var url = this.absRfQueryUrl;
                if (actionToken === 'modify') {
                    url = this.absRfModifyUrl;
                }
                /** @type {?} */
                var options = {
                    headers: new http.HttpHeaders({
                        'Content-Type': 'application/json',
                    })
                };
                return this.http.post(url, param, options);
            };
        Object.defineProperty(FavoritesTool.prototype, "favoritesSubject", {
            get: /**
             * @return {?}
             */ function () {
                return this.subject.asObservable();
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} value
         * @return {?}
         */
        FavoritesTool.prototype.setFavoritesList = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                this.subject.next(value);
            };
        /**
         * 获取收藏夹中人员列表
         */
        /**
         * 获取收藏夹中人员列表
         * @return {?}
         */
        FavoritesTool.prototype.getFavoritesList = /**
         * 获取收藏夹中人员列表
         * @return {?}
         */
            function () {
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    bizId: this.busNum,
                    objectValue: 'CollectOrg'
                };
                return this.curdRecentContactsOrFavorites('query', param);
            };
        /**
         * 加入或取消收藏
         * @param e 鼠标事件
         * @param id 标识
         * @returns Observable
         */
        /**
         * 加入或取消收藏
         * @param {?} e 鼠标事件
         * @param {?} object
         * @return {?} Observable
         */
        FavoritesTool.prototype.toggleFavorites = /**
         * 加入或取消收藏
         * @param {?} e 鼠标事件
         * @param {?} object
         * @return {?} Observable
         */
            function (e, object) {
                var _this = this;
                /** @type {?} */
                var id = object[this.idField];
                /** @type {?} */
                var action = 'add';
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    bizId: this.busNum,
                    objectValue: 'CollectOrg'
                };
                if (this.favoritesList.findIndex(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item[_this.idField] === id; })) !== -1) {
                    param.deleteList = [id];
                    action = 'delete';
                }
                else {
                    param.addList = [id];
                }
                this.curdRecentContactsOrFavorites('modify', param).subscribe(( /**
                 * @return {?}
                 */function () {
                    if (action === 'add') {
                        /** @type {?} */
                        var index = _this.favoritesList.findIndex(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.idField] === id; }));
                        if (index === -1) {
                            _this.favoritesList.push(object);
                        }
                    }
                    else {
                        _this.favoritesList = _this.favoritesList.filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.idField] !== id; }));
                    }
                    _this.setFavoritesList(_this.favoritesList);
                }));
                e.cancelBubble = true;
                e.stopPropagation();
            };
        /**
         * 清空我的收藏
         */
        /**
         * 清空我的收藏
         * @return {?}
         */
        FavoritesTool.prototype.clearFavoritesList = /**
         * 清空我的收藏
         * @return {?}
         */
            function () {
                var _this = this;
                if (!this.favoritesList.length) {
                    this.setFavoritesList(this.favoritesList);
                    return;
                }
                /** @type {?} */
                var ids = this.favoritesList.map(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item[_this.idField]; }));
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    bizId: this.busNum,
                    objectValue: 'CollectOrg',
                    addList: [],
                    deleteList: ids
                };
                this.curdRecentContactsOrFavorites('modify', param).subscribe(( /**
                 * @param {?} val
                 * @return {?}
                 */function (val) {
                    _this.favoritesList = [];
                    _this.setFavoritesList(_this.favoritesList);
                }));
            };
        FavoritesTool.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        FavoritesTool.ctorParameters = function () {
            return [
                { type: http.HttpClient }
            ];
        };
        return FavoritesTool;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/state.mgr.tool.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StateMgrTool = /** @class */ (function () {
        function StateMgrTool(http$$1) {
            this.http = http$$1;
            this.slSubject = new rxjs.Subject();
        }
        Object.defineProperty(StateMgrTool.prototype, "selectionsSubject", {
            get: /**
             * @return {?}
             */ function () {
                return this.slSubject.asObservable();
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} value
         * @param {?} changeType
         * @param {?=} from
         * @return {?}
         */
        StateMgrTool.prototype.emitSelections = /**
         * @param {?} value
         * @param {?} changeType
         * @param {?=} from
         * @return {?}
         */
            function (value, changeType, from) {
                if (from === void 0) {
                    from = 'other';
                }
                this.slSubject.next({
                    value: value,
                    changeType: changeType,
                    from: from
                });
            };
        StateMgrTool.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        StateMgrTool.ctorParameters = function () {
            return [
                { type: http.HttpClient }
            ];
        };
        return StateMgrTool;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/common.tool.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CommonUtil = /** @class */ (function () {
        function CommonUtil() {
        }
        /**
         * @return {?}
         */
        CommonUtil.newGuid = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var res = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, ( /**
                 * @param {?} c
                 * @return {?}
                 */function (c) {
                    // tslint:disable-next-line:no-bitwise
                    /** @type {?} */
                    var r = Math.random() * 16 | 0;
                    /** @type {?} */
                    var v = c === 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                }));
                return res;
            };
        /**
         * 判断是否在内
         * @param value value
         * @param field field
         * @param array array
         * @returns 位置索引
         */
        /**
         * 判断是否在内
         * @param {?} value value
         * @param {?} field field
         * @param {?} array array
         * @return {?} 位置索引
         */
        CommonUtil.findIndex = /**
         * 判断是否在内
         * @param {?} value value
         * @param {?} field field
         * @param {?} array array
         * @return {?} 位置索引
         */
            function (value, field, array) {
                if (!field || !value) {
                    throw new Error('前2个参数必填');
                }
                return array.findIndex(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return value === item[field]; }));
            };
        return CommonUtil;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/index.type.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ChangeType = {
        Append: "Append",
        Remove: "Remove",
        ValueChanged: "ValueChanged",
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: utils/locale.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var ORGANIZATION_SELECTOR_LOCALE = {
        "zh-CHS": {
            organizationSelector: {
                selection: {
                    selectionDialogTitle: '组织选择',
                    organization: '组织架构',
                    group: '我的群组',
                    favorites: '我的收藏',
                    placeHolder: '请选择',
                    searchPlaceHolder: '请输入编号或名称搜索',
                    confirm: '确定',
                    cancel: '取消',
                    firstSelectionText: '已选',
                    lastSelectionText: ' 个',
                    clear: '清空已选'
                },
                tabCommon: {
                    firstCheckAllText: '全选（',
                    lastCheckAllText: '）',
                    noOrgData: '暂无数据',
                    more: '更多',
                    noMore: '暂无已选组织'
                },
                organization: {
                    orgCode: '组织编号',
                    orgName: '组织名称',
                    favorite: '收藏'
                },
                group: {
                    newGroupName: '群组名称',
                    newGroupNote: '群组备注',
                    newGroupPlaceHolder: '请输入',
                    publicGroup: '公共群组',
                    privateGroup: '个人群组',
                    appendMembers: '添加组织',
                    items: '个组织',
                    saveGroup: '保存为群组',
                    editGroup: '编辑群组',
                    checkAll: '全选'
                },
                searchPage: {
                    firstResultText: '搜索结果（',
                    lastResultText: '）',
                    close: '关闭'
                },
                successMessage: {
                    saveGroup: '群组保存成功！',
                    editGroup: '修改群组信息成功！',
                    deleteGroup: '删除群组成功！',
                    appendOrganization: '添加组织成功！',
                    deleteOrganization: '删除组织成功！',
                },
                errorMessage: {
                    mapFields: '字段映射中未添加组织唯一标识。',
                    multiSelect: '单选模式只允许选中一条数据，请检查！',
                    limit: '群组内暂不支持保存超过1000个组织，请修改。',
                    saveGroup: '群组保存失败！',
                    editGroup: '修改群组信息失败！',
                    deleteGroup: '删除群组失败！',
                    getGroup: '获取群组数据失败！',
                    saveOrganization: '群组内组织保存失败！',
                    appendOrganization: '添加组织失败！',
                    deleteOrganization: '删除组织失败！',
                    getOrganization: '获取群组内组织数据失败！'
                },
                confirmMessage: {
                    deleteGroup: '是否删除群组：',
                    deleteOrganization: '是否删除组织：',
                    mark: '？'
                }
            }
        },
        "zh-CHT": {
            organizationSelector: {
                selection: {
                    selectionDialogTitle: '組織選擇',
                    organization: '組織架構',
                    group: '我的群組',
                    favorites: '我的收藏',
                    placeHolder: '請選擇',
                    searchPlaceHolder: '請輸入編號或名稱搜索',
                    confirm: '確定',
                    cancel: '取消',
                    firstSelectionText: '已選',
                    lastSelectionText: ' 個',
                    clear: '清空已選'
                },
                tabCommon: {
                    firstCheckAllText: '全選（',
                    lastCheckAllText: '）',
                    noOrgData: '暫無數據',
                    more: '更多',
                    noMore: '暫無已選組織'
                },
                organization: {
                    orgCode: '組織編號',
                    orgName: '組織名稱',
                    favorite: '收藏'
                },
                group: {
                    newGroupName: '群組名稱',
                    newGroupNote: '群組備注',
                    newGroupPlaceHolder: '請輸入',
                    publicGroup: '公共群組',
                    privateGroup: '個人群組',
                    appendMembers: '添加組織',
                    items: '個組織',
                    saveGroup: '保存爲群組',
                    editGroup: '編輯群組',
                    checkAll: '全選'
                },
                searchPage: {
                    firstResultText: '搜索結果（',
                    lastResultText: '）',
                    close: '關閉'
                },
                successMessage: {
                    saveGroup: '群組保存成功！',
                    editGroup: '修改群組信息成功！',
                    deleteGroup: '刪除群組成功！',
                    appendOrganization: '添加組織成功！',
                    deleteOrganization: '刪除組織成功！',
                },
                errorMessage: {
                    mapFields: '字段映射中未添加組織唯一標識。',
                    multiSelect: '單選模式只允許選中一條數據，請檢查！',
                    limit: '群組内暫不支持保存超過1000個組織，請修改。',
                    saveGroup: '群組保存失敗！',
                    editGroup: '修改群組信息失敗！',
                    deleteGroup: '刪除群組失敗！',
                    getGroup: '獲取群組數據失敗！',
                    saveOrganization: '群組内組織保存失敗！',
                    appendOrganization: '添加組織失敗！',
                    deleteOrganization: '刪除組織失敗！',
                    getOrganization: '獲取群組内組織數據失敗！'
                },
                confirmMessage: {
                    deleteGroup: '是否刪除群組：',
                    deleteOrganization: '是否刪除組織：',
                    mark: '？'
                }
            }
        },
        en: {
            organizationSelector: {
                selection: {
                    selectionDialogTitle: 'Select Organization',
                    organization: 'Organizations',
                    group: 'Groups',
                    favorites: 'Favorites',
                    placeHolder: 'Please select',
                    searchPlaceHolder: 'Search Organization By Code or Name',
                    confirm: 'Confirm',
                    cancel: 'Cancel',
                    firstSelectionText: 'Total',
                    lastSelectionText: ' items',
                    clear: 'Clear'
                },
                tabCommon: {
                    firstCheckAllText: 'All(',
                    lastCheckAllText: ')',
                    noOrgData: 'Empty Data',
                    more: 'More Data',
                    noMore: 'Empty Selected Data'
                },
                organization: {
                    orgCode: 'Code',
                    orgName: 'Name',
                    favorite: 'Favorites'
                },
                group: {
                    newGroupName: 'Name',
                    newGroupNote: 'Note',
                    newGroupPlaceHolder: 'Please input',
                    publicGroup: 'Public Group',
                    privateGroup: 'Private Group',
                    appendMembers: 'Append Organizations',
                    items: ' organizations',
                    saveGroup: 'Save Group',
                    editGroup: 'Edit Group',
                    checkAll: 'All'
                },
                searchPage: {
                    firstResultText: 'Search Result(',
                    lastResultText: ')',
                    close: 'Close'
                },
                successMessage: {
                    saveGroup: 'Group Saved Successfully!',
                    editGroup: 'Group Info Modified Successfully!',
                    deleteGroup: 'Group Deleted Successfully!',
                    appendOrganization: 'Organization Appended Successfully!',
                    deleteOrganization: 'Organization Deleted Successfully!',
                },
                errorMessage: {
                    mapFields: 'OrgId is not included in Mapping-Fields.',
                    multiSelect: 'Only one item can be selected in single-select mode, please check! ',
                    limit: 'Organizations saved in group cannot exceed 1,000 temporarily, please correct.',
                    saveGroup: 'Failed to Save Group!',
                    editGroup: 'Failed to Modify Group Info!',
                    deleteGroup: 'Failed to Delete Group!',
                    getGroup: 'Failed to Get Group Data!',
                    saveOrganization: 'Failed to Save Organization!',
                    appendOrganization: 'Failed to Append Organization!',
                    deleteOrganization: 'Failed to Delete Organization!',
                    getOrganization: 'Failed to Get Organization Data!'
                },
                confirmMessage: {
                    deleteGroup: 'Delete Group: ',
                    deleteOrganization: 'Delete Organization: ',
                    mark: '?'
                }
            }
        }
    };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/organization-selector.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrganizationSelectorComponent = /** @class */ (function () {
        function OrganizationSelectorComponent(render, injector, favoritesTool, apiService, ngZone, stateMgr) {
            var _this = this;
            this.render = render;
            this.injector = injector;
            this.favoritesTool = favoritesTool;
            this.apiService = apiService;
            this.ngZone = ngZone;
            this.stateMgr = stateMgr;
            this.baseCls = true;
            this.width = '100%';
            // input框是否显示
            this.showInput = true;
            // 业务标识
            this.busNum = 'common';
            this.multiSelect = true;
            this.placeholder = '请选择';
            this.searchPlaceholder = '请输入编号或名称搜索';
            this.readonly = false;
            // 传入的url
            this.absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';
            this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
            this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
            this.groupApiUrl = "/api/runtime/sys/v1.0/org-group";
            this.groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';
            /**
             * 数据源类型
             * 默认为： System_organization  系统数据源   获取系统人员、系统组织
             * Administrative_organization  已扩展数据源  获取行政组织、行政人员
             * absOrgType {string}
             * PersonnelSelectorComponent
             */
            this.absOrgType = 'System_organization';
            // 启用分层加载
            this.enableHierarchicalLoading = true;
            // 不包含停用组织
            this.notGetStopOrg = true;
            this.primaryField = 'orgId';
            this.displayField = 'name';
            this.orgIds = [];
            // 展开层级
            this.layer = 1;
            // 是否启用级联选中
            this.cascadeCheck = true;
            // 级联选中下级
            this.cascadeDown = true;
            // 级联选中上级
            this.cascadeUp = false;
            // 显示全选按钮
            this.showCheckAll = false;
            this.keepSelect = false;
            // 一次性最多选中多少条
            this.selectedLimit = 50;
            this.showTabIds = 'organization,favorites';
            this.activeTabId = 'organization';
            // 搜索前端分页50条
            this.searchPageSize = 50;
            /**
             * 多选分隔符
             */
            this.multipleChoiceSeparator = ',';
            this.draggable = true;
            this.virtualizedLoad = false;
            this.dataPermission = false;
            this.dataPermissionIds = [];
            this.filterType = 'none';
            this.selectionsChange = new core.EventEmitter();
            // 全部清除按钮触发回调
            this.inputClear = new core.EventEmitter();
            // 标签删除按钮出发回调
            this.tagRemoved = new core.EventEmitter();
            this.viewType = 'tag'; // 默认为tag标签形式，可支持text，后续改为input类型属性 
            // 默认为tag标签形式，可支持text，后续改为input类型属性 
            this.selections = [];
            this.originalSelections = [];
            this.finalText = [];
            this.lookupIcon = '<i class="f-icon f-icon-lookup"></i>';
            this.searchIcon = '<span class="k-icon k-i-search"></span>';
            this.organizationTabId = 'organization';
            this.groupTabId = 'group';
            this.favoritesTabId = 'favorites';
            this.dialogHeight = 548;
            this.dialogId = 'dialogId';
            this.isShow = false;
            this.confirmToken = false;
            this.hideSearchPanel = true;
            this.searchText = '';
            this.groupDialogOpend = false;
            this.groupDialogTitle = '';
            this.validGroupTitle = true;
            this.groupTitleStream = new rxjs.Subject();
            this.selectionsShow = false;
            this.orgTabActive = false;
            this.groupTabActive = false;
            this.againstSingleSelect = false;
            this.localeService = null;
            this.languagesArray = [
                { code: 'zh-CHS', name: '中文简体', default: true },
                { code: 'en', name: 'English' },
                { code: 'zh-CHT', name: '中文繁体' }
            ];
            this._disableOrgList = [];
            this.farrisDialogbeforeClose = ( /**
             * @return {?}
             */function () {
                _this.isShow = false;
                if (_this.confirmToken) {
                    _this.originalSelections = _.cloneDeep(_this.selections);
                }
                else {
                    _this.selections = _.cloneDeep(_this.originalSelections);
                }
                if (!_this.hideSearchPanel || _this.searchText) {
                    _this.searchText = null;
                    _this.clearSearch();
                }
                _this.confirmToken = false;
                return true;
            });
            this.onModelChange = ( /**
             * @param {?=} val
             * @return {?}
             */function (val) { });
            this.onModelTouched = ( /**
             * @param {?=} val
             * @return {?}
             */function (val) { });
            this.apiService.absUrl = this.absUserOrgUrl;
            this.apiService.groupApiUrl = this.groupApiUrl;
            this.cdRef = this.injector.get(core.ChangeDetectorRef);
            this.messageService = this.injector.get(uiMessager.MessagerService, null);
            this.notifyService = this.injector.get(uiNotify.NotifyService, null);
            this.localeService = this.injector.get(uiLocale.LocaleService);
            if (!this.localeService.langData['organizationSelector']) {
                this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
            }
        }
        Object.defineProperty(OrganizationSelectorComponent.prototype, "disableOrgList", {
            get: /**
             * @return {?}
             */ function () {
                return this._disableOrgList;
            },
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (this.filterType == 'disable') {
                    if (typeof value == 'object' && Array.isArray(value)) {
                        this._disableOrgList = value;
                    }
                    else if (typeof value == 'string') {
                        this._disableOrgList = value.split(',');
                    }
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(OrganizationSelectorComponent.prototype, "filterOrgList", {
            // 自定义过滤feature：不可选中组织，历史属性兼容保留
            set: 
            // 自定义过滤feature：不可选中组织，历史属性兼容保留
            /**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (typeof value == 'object' && Array.isArray(value)) {
                    this._disableOrgList = value;
                }
                else if (typeof value == 'string') {
                    this._disableOrgList = value.split(',');
                }
                this.filterType = this._disableOrgList.length ? 'disable' : this.filterType;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} obj
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.writeValue = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                if (this.viewType == 'tag') {
                    if (!!obj && typeof obj === 'string') {
                        this.finalText = obj.split(this.multipleChoiceSeparator);
                    }
                    else {
                        this.finalText = [];
                    }
                }
                else if (this.viewType == 'text') {
                    this.finalText = obj;
                }
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.registerOnChange = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onModelChange = fn;
            };
        /**
         * @param {?} fn
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.registerOnTouched = /**
         * @param {?} fn
         * @return {?}
         */
            function (fn) {
                this.onModelTouched = fn;
            };
        /**
         * @param {?} isDisabled
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.setDisabledState = /**
         * @param {?} isDisabled
         * @return {?}
         */
            function (isDisabled) {
                throw new Error('Method not implemented.');
            };
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.initDialogHeight();
                this.listenSelectionsChange();
                this.initTabs();
                this.initGroupSearch();
                this.ngControl = this.injector.get(forms.NgControl, null);
                this.mapFields && this.mapFields2Component();
                this.viewType = this.dataPermission ? 'text' : 'tag';
            };
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                this.listenWindowResize();
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                /** @type {?} */
                var orgIdsChange = changes.orgIds;
                if (orgIdsChange && orgIdsChange.currentValue) {
                    this.assembleDataByOrgIds(orgIdsChange.currentValue);
                }
            };
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.selectionsSub.unsubscribe();
            };
        /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.emitSelections = /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
            function (selections, changeType, from) {
                if (changeType === void 0) {
                    changeType = ChangeType.ValueChanged;
                }
                if (from === void 0) {
                    from = 'form';
                }
                this.stateMgr.emitSelections(selections, changeType, from);
            };
        // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
        // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
        /**
         * @private
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.mapFields2Component =
            // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
            /**
             * @private
             * @return {?}
             */
            function () {
                /** @type {?} */
                var helpFields = Object.keys(this.mapFields);
                if (!helpFields.includes(this.primaryField)) {
                    // this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
                    return;
                }
                if (this.ngControl &&
                    this.ngControl.formDirective &&
                    this.ngControl.formDirective.form &&
                    this.ngControl.formDirective.form.bindingData) {
                    /** @type {?} */
                    var bindingData = this.ngControl.formDirective.form.bindingData;
                    if (bindingData.setValue) {
                        /** @type {?} */
                        var bindingPath = this.ngControl.formDirective.form.bindingPath;
                        /** @type {?} */
                        var pathArr = [];
                        if (bindingPath) {
                            pathArr = bindingPath.split('/').filter(( /**
                             * @param {?} n
                             * @return {?}
                             */function (n) { return n !== ''; }));
                        }
                        /** @type {?} */
                        var multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);
                        /** @type {?} */
                        var fieldPaths = pathArr.concat(multiPath[0].split('.'));
                        /** @type {?} */
                        var ids = bindingData.getValue(fieldPaths);
                        if (!ids) {
                            this.emitSelections([]);
                            return;
                        }
                        this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));
                    }
                }
            };
        // 根据传入的组织id数组获取对应的组织
        // 由ngOnChanges()、mapFields2Component()调用
        // 根据传入的组织id数组获取对应的组织
        // 由ngOnChanges()、mapFields2Component()调用
        /**
         * @private
         * @param {?} ids
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.assembleDataByOrgIds =
            // 根据传入的组织id数组获取对应的组织
            // 由ngOnChanges()、mapFields2Component()调用
            /**
             * @private
             * @param {?} ids
             * @return {?}
             */
            function (ids) {
                var _this = this;
                if (!ids || ids.length === 0) {
                    return;
                }
                if (ids && ids.length > 1 && !this.multiSelect) {
                    this.againstSingleSelect = true;
                    return;
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    idList: this.filterType == 'disable' ? ids.filter(( /**
                     * @param {?} id
                     * @return {?}
                     */function (id) { return !_this._disableOrgList.includes(id); })) : ids,
                    getOrgAllPath: true,
                    getCurUser: false
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (res && res.data) {
                        if (_this.absOrgType == 'System_organization') {
                            _this.selections = res.data;
                        }
                        else {
                            _this.selections = res.data.filter(( /**
                             * @param {?} data
                             * @return {?}
                             */function (data) {
                                return ids.find(( /**
                                 * @param {?} id
                                 * @return {?}
                                 */function (id) { return id == data[_this.primaryField]; }));
                            }));
                        }
                        if (!_this.mapFields) {
                            _this.assembleFinalText();
                            if (_this.dataPermission) {
                                _this.emitSelections(_this.selections);
                            }
                        }
                        else {
                            _this.emitSelections(_this.selections);
                        }
                    }
                }));
            };
        // 构造回显至input文本框的内容
        // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
        // 构造回显至input文本框的内容
        // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
        /**
         * @private
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.assembleFinalText =
            // 构造回显至input文本框的内容
            // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
            /**
             * @private
             * @return {?}
             */
            function () {
                var _this = this;
                this.finalText = [];
                this.selections.forEach(( /**
                 * @param {?} item
                 * @param {?} index
                 * @return {?}
                 */function (item, index) {
                    /** @type {?} */
                    var formatedName = _this.formatFn && _this.formatFn(item);
                    /** @type {?} */
                    var finalText = formatedName ? formatedName : item[_this.displayField];
                    _this.finalText.push(finalText);
                }));
                this.finalText = this.finalText.slice();
            };
        // 初始化弹窗id及高度
        // 由ngOnInit()调用
        // 初始化弹窗id及高度
        // 由ngOnInit()调用
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.initDialogHeight =
            // 初始化弹窗id及高度
            // 由ngOnInit()调用
            /**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var uuid = CommonUtil.newGuid();
                this.dialogId += uuid;
                /** @type {?} */
                var windowInnerHeight = window.innerHeight;
                this.dialogHeight = windowInnerHeight - 60;
                if (this.dialogHeight > 680) {
                    this.dialogHeight = 680;
                }
            };
        // 监听selections的变更，变更包含三种形式：valueChange、append、remove
        // 由ngOnInit()调用
        // 监听selections的变更，变更包含三种形式：valueChange、append、remove
        // 由ngOnInit()调用
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenSelectionsChange =
            // 监听selections的变更，变更包含三种形式：valueChange、append、remove
            // 由ngOnInit()调用
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.selections = _.cloneDeep(data.value);
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.selections = _this.selections.filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.primaryField] !== data.value[_this.primaryField]; }));
                    }
                    else if (data.changeType === ChangeType.Append) {
                        CommonUtil.findIndex(data.value[_this.primaryField], _this.primaryField, _this.selections) === -1 ? _this.selections.push(data.value) : null;
                    }
                    _this.cdRef.detectChanges();
                }));
            };
        // 根据showTabIds判断是否启用收藏功能、群组功能
        // 由ngOnInit()调用
        // 根据showTabIds判断是否启用收藏功能、群组功能
        // 由ngOnInit()调用
        /**
         * @private
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.initTabs =
            // 根据showTabIds判断是否启用收藏功能、群组功能
            // 由ngOnInit()调用
            /**
             * @private
             * @return {?}
             */
            function () {
                if (!this.showTabIds.includes(this.activeTabId)) {
                    this.activeTabId = this.showTabIds.split(',')[0];
                }
                if (this.dataPermission) {
                    this.showTabIds = this.organizationTabId;
                    this.activeTabId = this.organizationTabId;
                    this.orgTabActive = true;
                    return;
                }
                this.currentTabId = this.activeTabId;
                if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
                    this.enableFavorites = true;
                }
                else {
                    this.enableFavorites = false;
                }
                if (this.showTabIds.indexOf(this.groupTabId) !== -1) {
                    this.enableGroup = true;
                }
                else {
                    this.enableGroup = false;
                }
                if (this.activeTabId == this.organizationTabId) {
                    this.orgTabActive = true;
                }
                else if (this.activeTabId == this.groupTabId) {
                    this.groupTabActive = true;
                }
                // 启用群组功能扩展函数
                /*
                if (this.enableGroup) {
                  const ccwork = window.top.document.createElement("script")
                  ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();
                  window.document.head.appendChild(ccwork);
                }
                */
            };
        // 判断群组名称是否合法
        // 由ngOnInit()调用
        // 判断群组名称是否合法
        // 由ngOnInit()调用
        /**
         * @private
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.initGroupSearch =
            // 判断群组名称是否合法
            // 由ngOnInit()调用
            /**
             * @private
             * @return {?}
             */
            function () {
                var _this = this;
                if (this.enableGroup) {
                    this.groupTitleStream.pipe(operators.debounceTime(500), operators.distinctUntilChanged()).subscribe(( /**
                     * @param {?} data
                     * @return {?}
                     */function (data) {
                        if (!!data) {
                            _this.validGroupTitle = true;
                        }
                        else {
                            _this.validGroupTitle = false;
                        }
                    }));
                }
            };
        // 当浏览器窗口大小变更时，变更弹窗的大小
        // 由ngAfterViewInit()调用
        // 当浏览器窗口大小变更时，变更弹窗的大小
        // 由ngAfterViewInit()调用
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenWindowResize =
            // 当浏览器窗口大小变更时，变更弹窗的大小
            // 由ngAfterViewInit()调用
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                /** @type {?} */
                var dialogElement = document.querySelector('#' + this.dialogId);
                /** @type {?} */
                var targetElement = null;
                if (!!dialogElement) {
                    targetElement = dialogElement.querySelector('.modal-dialog');
                }
                window.addEventListener('resize', ( /**
                 * @return {?}
                 */function () {
                    if (!!targetElement) {
                        /** @type {?} */
                        var height = window.innerHeight - 60;
                        if (height > 680) {
                            height = 680;
                        }
                        _this.dialogHeight = height;
                        /** @type {?} */
                        var innerHeight_1 = height + 'px';
                        /** @type {?} */
                        var marginTop = '-' + height / 2 + 'px';
                        _this.render.setStyle(targetElement, 'height', innerHeight_1);
                        _this.render.setStyle(targetElement, 'margin-top', marginTop);
                    }
                }));
            };
        // 初始化组织收藏数据
        // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
        // 初始化组织收藏数据
        // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
        /**
         * @private
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.initFavorites =
            // 初始化组织收藏数据
            // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
            /**
             * @private
             * @return {?}
             */
            function () {
                var _this = this;
                this.favoritesTool.absOrgType = this.absOrgType;
                this.favoritesTool.busNum = this.busNum;
                this.favoritesTool.idField = this.primaryField;
                this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;
                this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;
                this.favoritesTool.getFavoritesList().subscribe(( /**
                 * @param {?} result
                 * @return {?}
                 */function (result) {
                    /** @type {?} */
                    var resData = result ? (( /** @type {?} */(result))).orgData : [];
                    _this.favoritesTool.favoritesList = resData;
                    _this.favoritesTool.setFavoritesList(resData);
                }));
            };
        // 打开选组织弹窗
        // 打开选组织弹窗
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.showFarrisDialog =
            // 打开选组织弹窗
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                this.isShow = true;
                this.ngZone.runOutsideAngular(( /**
                 * @return {?}
                 */function () {
                    setTimeout(( /**
                     * @return {?}
                     */function () {
                        _this.dialog.show();
                        if (_this.showTabIds.indexOf(_this.favoritesTabId) !== -1) {
                            _this.initFavorites();
                        }
                        if (_this.againstSingleSelect) {
                            _this.notifyService.warning(_this.localeService.getValue("organizationSelector.errorMessage.multiSelect"));
                            return;
                        }
                        if (_this.mapFields && !Object.keys(_this.mapFields).includes(_this.primaryField)) {
                            _this.notifyService.warning(_this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
                            return;
                        }
                        _this.stateMgr.emitSelections(_this.selections, ChangeType.ValueChanged, 'form');
                    }));
                }));
            };
        // input文本框内点击清除按钮时触发
        // input文本框内点击清除按钮时触发
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.clearAll =
            // input文本框内点击清除按钮时触发
            /**
             * @return {?}
             */
            function () {
                this.selections = [];
                this.assembleFinalText();
                this.onModelChange(this.finalText.join());
                this.onModelTouched(this.finalText.join());
                this.emitSelections([]);
                this.inputClear.emit();
            };
        // input文本框内删除某一个已选组织时触发
        // input文本框内删除某一个已选组织时触发
        /**
         * @param {?} data
         * @param {?} index
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.removeItem =
            // input文本框内删除某一个已选组织时触发
            /**
             * @param {?} data
             * @param {?} index
             * @return {?}
             */
            function (data, index) {
                if (this.selections.length > 0) {
                    this.selections.splice(index, 1);
                    this.assembleFinalText();
                    this.emitSelections(data, ChangeType.Remove);
                }
                else {
                    this.finalText = this.finalText.filter(( /**
                     * @param {?} text
                     * @return {?}
                     */function (text) { return text !== data; }));
                }
                this.onModelChange(this.finalText.join());
                this.onModelTouched(this.finalText.join());
                this.tagRemoved.emit({
                    deleteItem: data,
                    deleteIndex: index,
                    selections: this.selections
                });
            };
        // 清空最近已选组织
        // 清空最近已选组织
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.clearSeletions =
            // 清空最近已选组织
            /**
             * @return {?}
             */
            function () {
                this.stateMgr.emitSelections([], ChangeType.ValueChanged, 'form');
            };
        // 点击搜索按钮或者敲击回车时触发
        // 点击搜索按钮或者敲击回车时触发
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.onSearch =
            // 点击搜索按钮或者敲击回车时触发
            /**
             * @return {?}
             */
            function () {
                if (!!this.searchText) {
                    this.hideSearchPanel = false;
                    this.onSearchToken = CommonUtil.newGuid();
                }
            };
        // 清空组织搜索内容时触发
        // 清空组织搜索内容时触发
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.clearSearch =
            // 清空组织搜索内容时触发
            /**
             * @return {?}
             */
            function () {
                this.hideSearchPanel = true;
                this.onSearchToken = false;
                if (this.currentTabId = this.organizationTabId) {
                    this.libOrgTree.farrisTree.clearAll();
                    this.libOrgTree.farrisTree.rowHeight = 28;
                    if (this.multiSelect) {
                        this.libOrgTree.checkOrgTreeNodes();
                    }
                    else {
                        this.libOrgTree.selectOrgTreeNode();
                    }
                }
            };
        // 监听搜索框内输入的文本
        // 监听搜索框内输入的文本
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenSearchText =
            // 监听搜索框内输入的文本
            /**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e.code === 'Backspace' || e.code === 'Delete') {
                    if (!this.searchText) {
                        this.clearSearch();
                    }
                }
            };
        // 监听搜索页的关闭事件，目前只会接收到true
        // 监听搜索页的关闭事件，目前只会接收到true
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenClosePanelChange =
            // 监听搜索页的关闭事件，目前只会接收到true
            /**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                this.hideSearchPanel = e;
                // 关闭搜索结果页后，需要更新树节点的是否选中状态
                if (this.currentTabId == this.organizationTabId) {
                    this.libOrgTree.farrisTree.clearAll();
                    this.libOrgTree.farrisTree.rowHeight = 28;
                    if (this.multiSelect) {
                        this.libOrgTree.checkOrgTreeNodes();
                    }
                    else {
                        this.libOrgTree.selectOrgTreeNode();
                    }
                }
            };
        // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
        // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.closeGroupDialog =
            // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
            /**
             * @return {?}
             */
            function () {
                this.groupDialogOpend = false;
                this.editingGroupId = null;
                this.groupTitle = null;
                this.groupNote = null;
                this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
            };
        // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
        // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenGroupTitle =
            // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
            /**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                this.groupTitleStream.next(this.groupTitle);
            };
        // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
        // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenOpenGroup =
            // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
            /**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                this.groupDialogOpend = e;
                this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
            };
        // 点击群组编辑按钮触发，可修改选中群组的名称及描述
        // 点击群组编辑按钮触发，可修改选中群组的名称及描述
        /**
         * @param {?} item
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.listenGroupChange =
            // 点击群组编辑按钮触发，可修改选中群组的名称及描述
            /**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                this.groupDialogOpend = true;
                this.editingGroupId = item.id;
                this.groupTitle = item.title;
                this.groupNote = item.description;
                this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.editGroup");
            };
        // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
        // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
        /**
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.saveGroup =
            // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (!this.groupTitle) {
                    this.validGroupTitle = false;
                    return;
                }
                /** @type {?} */
                var groupId = CommonUtil.newGuid();
                /** @type {?} */
                var groupCode = 'orgGroup_private_';
                groupCode += Math.random().toString(16).substring(2, 10);
                /** @type {?} */
                var addIds = [];
                this.selections.forEach(( /**
                 * @param {?} selection
                 * @return {?}
                 */function (selection) {
                    addIds.push(selection[_this.primaryField]);
                }));
                if (addIds.length > 1000) {
                    this.messageService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.limit"), true);
                    this.groupDialogOpend = false;
                    this.groupTitle = null;
                    this.groupNote = null;
                    return;
                }
                this.groupDialogOpend = false;
                /** @type {?} */
                var body = {
                    groupId: groupId,
                    groupCode: groupCode,
                    title: this.groupTitle,
                    description: this.groupNote,
                    absOrgType: this.absOrgType,
                    changeType: Number(1)
                };
                if (this.editingGroupId) {
                    body.groupId = this.editingGroupId;
                    body.changeType = Number(2);
                    delete body.groupCode;
                    this.updateNameOrNote(body);
                    return;
                }
                /** @type {?} */
                var newGroup$ = this.apiService.saveGroup(body);
                newGroup$.pipe(operators.switchMap(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (res) {
                        _this.libOrgGroup.selectedGroupId = groupId;
                        _this.groupTitle = null;
                        _this.groupNote = null;
                        /** @type {?} */
                        var addOrgsInNewGroup$ = _this.apiService.saveGroup({ groupId: groupId, addIds: addIds, deleteIds: [], changeType: Number(3) });
                        return addOrgsInNewGroup$.pipe(operators.tap(( /**
                         * @param {?} data
                         * @return {?}
                         */function (data) {
                            if (data) {
                                _this.libOrgGroup.getGroupList({ saveGroup: true });
                            }
                        }), ( /**
                         * @param {?} error
                         * @return {?}
                         */function (error) {
                            throw new Error(_this.localeService.getValue("organizationSelector.errorMessage.saveOrganization"));
                        })));
                    }
                })), operators.tap(( /**
                 * @return {?}
                 */function () {
                }), ( /**
                 * @param {?} error
                 * @return {?}
                 */function (error) {
                    _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.saveGroup"), true);
                }))).subscribe();
            };
        /**
         * @private
         * @param {?} param
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.updateNameOrNote = /**
         * @private
         * @param {?} param
         * @return {?}
         */
            function (param) {
                var _this = this;
                /** @type {?} */
                var updateInfo$ = this.apiService.saveGroup(param);
                updateInfo$.pipe(operators.tap(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data) {
                        _this.editingGroupId = null;
                        _this.groupTitle = null;
                        _this.groupNote = null;
                        _this.groupDialogTitle = _this.localeService.getValue("organizationSelector.group.saveGroup");
                        _this.libOrgGroup.getGroupList({ updateNameOrNote: true });
                    }
                }), ( /**
                 * @param {?} error
                 * @return {?}
                 */function (error) {
                    _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.editGroup"), true);
                }))).subscribe();
            };
        // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
        // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
        /**
         * @param {?} type
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.returnResult =
            // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
            /**
             * @param {?} type
             * @return {?}
             */
            function (type) {
                /** @type {?} */
                var finalText = '';
                if (!!type) {
                    this.confirmToken = true;
                    this.assembleFinalText();
                    finalText = this.finalText.join();
                    if (this.selections && this.selections.length) {
                        this.selectionsChange.emit({
                            selections: this.selections
                        });
                        this.onModelChange(finalText);
                        this.onModelTouched(finalText);
                    }
                    else {
                        this.onModelChange(finalText);
                        this.onModelTouched(finalText);
                        this.selectionsChange.emit({
                            selections: this.selections
                        });
                    }
                }
                else {
                    if (this.mapFields) {
                        this.mapFields2Component();
                    }
                    else {
                        this.assembleDataByOrgIds(this.orgIds);
                    }
                }
                // this.orgIds = [];
                this.dialog.close();
                this.isShow = false;
            };
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationSelectorComponent.prototype.changeTabs = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                if (!this.hideSearchPanel) {
                    this.hideSearchPanel = true;
                    this.onSearchToken = false;
                }
                this.currentTabId = e.nextId;
                if (this.showTabIds.includes(this.organizationTabId)) {
                    this.libOrgTree.currentTabId = this.currentTabId;
                }
                if (e.nextId === this.groupTabId) {
                    if (!this.libOrgGroup.groupData.public.length && !this.libOrgGroup.groupData.personal.length) {
                        this.libOrgGroup.assembleData(true);
                    }
                }
                else if (e.nextId === this.organizationTabId) {
                    if (this.libOrgTree.initLoad) {
                        this.libOrgTree.loadTreeData();
                    }
                    else {
                        this.libOrgTree.farrisTree.clearAll();
                        this.libOrgTree.farrisTree.rowHeight = 28;
                        if (this.multiSelect) {
                            this.libOrgTree.checkOrgTreeNodes();
                        }
                        else {
                            this.libOrgTree.selectOrgTreeNode();
                        }
                    }
                }
            };
        OrganizationSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'farris-organization-selector',
                        template: "<div class=\"org-select-help\" *ngIf=\"showInput\">\r\n  <input-group style=\"flex: 1\" *ngIf=\"!readonly && viewType === 'text'\" [placeholder]=\"'organizationSelector.selection.placeHolder' | locale\"\r\n    [groupText]=\"lookupIcon\" [readonly]=\"false\" [editable]=\"false\" [(ngModel)]=\"finalText\"\r\n    (clickHandle)=\"showFarrisDialog()\" (clear)=\"clearAll()\">\r\n  </input-group>\r\n  <div #tagbox class=\"input-group s-input-group\" *ngIf=\"viewType == 'tag'\" [class.farris-input-group-readonly]=\"readonly\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\">\r\n      <div class=\"multi--content\" *ngFor=\"let item of finalText; index as i\" [title]=\"item\">\r\n        <span class=\"multi--item\">\r\n          {{item}}\r\n        </span>\r\n        <i class=\"f-icon f-icon-close cursor-pointer\" *ngIf=\"!readonly\" style=\"margin-top: 1px;\"\r\n          (click)=\"removeItem(item, i)\"></i>\r\n      </div>\r\n      <span class=\"multi-another\" *ngIf=\"finalText.length === 0\">{{'organizationSelector.selection.placeHolder' | locale}}</span>\r\n    </div>\r\n    <div *ngIf=\"!readonly\" class=\"input-group-append\" title=\"\">\r\n      <span *ngIf=\"finalText && finalText.length > 0\" class=\"input-group-text input-group-clear cursor-pointer\"\r\n        (click)=\"clearAll()\">\r\n        <i class=\"f-icon modal_close\"></i>\r\n      </span>\r\n      <span class=\"input-group-text cursor-pointer\" (click)=\"showFarrisDialog()\">\r\n        <span class=\"f-icon f-icon-lookup\"></span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<farris-dialog #farrisDialog *ngIf=\"isShow\" class=\"fos-dialog\" [resizable]=\"false\" id=\"{{dialogId}}\"\r\n  [draggable]=\"draggable\" [buttons]=\"buttonRef\" [beforeClose]=\"farrisDialogbeforeClose\" [showMaxButton]=\"false\"\r\n  [width]=\"760\" [height]=\"dialogHeight\" [title]=\"'organizationSelector.selection.selectionDialogTitle' | locale\">\r\n  <div class=\"fos-content\">\r\n    <div class=\"fos-content-container\">\r\n      <div class=\"fos-content-main\">\r\n        <lib-search #searchResultPage [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n          [enableFavorites]=\"enableFavorites\" [absOrgType]=\"absOrgType\" [notGetStopOrg]=\"notGetStopOrg\"\r\n          [onSearch]=\"onSearchToken\" [searchText]=\"searchText\" [pageSize]=\"searchPageSize\"\r\n          [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\"\r\n          (closePanelChange)=\"listenClosePanelChange($event)\" [hidden]=\"hideSearchPanel\">\r\n        </lib-search>\r\n        <input-group class=\"fos-search-input\" id=\"org-search-input\" [placeholder]=\"'organizationSelector.selection.searchPlaceHolder' | locale\"\r\n          [(value)]=\"searchText\" [groupText]=\"searchIcon\" (enterHandle)=\"onSearch()\" (clickHandle)=\"onSearch()\"\r\n          (keyup)=\"listenSearchText($event)\" (clear)=\"clearSearch()\" *ngIf=\"!dataPermission\">\r\n        </input-group>\r\n        <farris-tabs #selectTabs class=\"fos-tabs\" [value]=\"activeTabId\" [width]=\"'100%'\" [contentFill]=\"true\" (tabChange)=\"changeTabs($event)\">\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.organization' | locale\" [id]=\"organizationTabId\" *ngIf=\"showTabIds.indexOf(organizationTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-org #libOrgTree [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableFavorites]=\"enableFavorites\" [primaryField]=\"primaryField\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\" [layer]=\"layer\" [orgIds]=\"orgIds\"\r\n                [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [activeTabId]=\"activeTabId\" [isActiveTab]=\"orgTabActive\"\r\n                [dataPermission]=\"dataPermission\" [dataPermissionIds]=\"dataPermissionIds\" [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\">\r\n              </lib-org>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  END -->\r\n          <!-- \u6211\u7684\u6536\u85CF  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.favorites' | locale\" [id]=\"favoritesTabId\" *ngIf=\"showTabIds.indexOf(favoritesTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-favorites #libOrgFavorites [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n                [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\">\r\n              </lib-favorites>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u6211\u7684\u6536\u85CF  END -->\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.group' | locale\" [id]=\"groupTabId\" *ngIf=\"showTabIds.indexOf(groupTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-group #libOrgGroup \r\n                [primaryField]=\"primaryField\" [absOrgType]=\"absOrgType\" [multiSelect]=\"multiSelect\"\r\n                [enableFavorites]=\"enableFavorites\" [groupApiUrl]=\"groupApiUrl\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [layer]=\"layer\" [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [isActiveTab]=\"groupTabActive\"\r\n                [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\" (groupChange)=\"listenGroupChange($event)\">\r\n              </lib-group>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  END -->\r\n        </farris-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"s-personnel-group\" *ngIf=\"groupDialogOpend\">\r\n    <div class=\"s-personnel-group-title\">\r\n      <span class=\"f-icon f-sidebar-close\" (click)=\"closeGroupDialog()\"></span>{{groupDialogTitle}}\r\n    </div>\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\" style=\"margin-top: 22px;\">\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\" for=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\">\r\n              <span class=\"farris-label-info text-danger\">*</span>\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupName' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n                <input class=\"form-control\" id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\"\r\n                (keyup)=\"listenGroupTitle($event)\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"\r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\" [(ngModel)]=\"groupTitle\" />\r\n              <!--\r\n                <language-textbox id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\" \r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\"\r\n                [languages]=\"languagesArray\" [editable]=\"true\" [enableClear]=\"true\" [(ngModel)]=\"groupTitle\"\r\n                (keyup)=\"listenGroupTitle($event)\">\r\n              </language-textbox>\r\n              -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\" style=\"margin-top: 4px;\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\"\r\n              for=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\">\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupNote' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <textarea class=\"form-control\" style=\"height: 66px;\" [(ngModel)]=\"groupNote\"\r\n                id=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"s-personnel-group-footer\">\r\n      <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"saveGroup()\" />\r\n      <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"closeGroupDialog()\" />\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #buttonRef>\r\n  <div class=\"fos-dialog-footer\">\r\n    <span class=\"fosd-footer-selection\" (mouseover)=\"selectionsShow=true\"\r\n      (mouseout)=\"selectionsShow=false\">{{'organizationSelector.selection.firstSelectionText' | locale}}\r\n      <a>{{selections.length}}</a>{{'organizationSelector.selection.lastSelectionText' | locale}}</span>\r\n    <span class=\"fosd-footer-clear\" (click)=\"clearSeletions()\">{{'organizationSelector.selection.clear' | locale}}</span>\r\n    <lib-selection #selectedComponent class=\"fosd-selection-content\" [primaryField]=\"primaryField\"\r\n      [enableGroup]=\"enableGroup\" (mouseover)=\"selectionsShow=true\" (mouseout)=\"selectionsShow=false\"\r\n      [hidden]=\"!selectionsShow\" (openedChange)=\"listenOpenGroup($event)\"></lib-selection>\r\n  </div>\r\n  <input type=\"button\" class=\"btn btn-secondary\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"returnResult(0)\" />\r\n  <input type=\"button\" class=\"btn btn-primary\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"returnResult(1)\" />\r\n</ng-template>",
                        providers: [
                            {
                                provide: forms.NG_VALUE_ACCESSOR,
                                useExisting: core.forwardRef(( /**
                                 * @return {?}
                                 */function () { return OrganizationSelectorComponent; })),
                                multi: true
                            },
                            FavoritesTool, ApiService, StateMgrTool
                        ],
                        styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:-webkit-box;display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{-webkit-box-flex:0;flex:0 0 100%;position:relative;display:-webkit-box;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .org-select-help{display:-webkit-box;display:flex;width:100%}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;-webkit-box-flex:1;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:-webkit-box;display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;-webkit-box-pack:justify;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;-webkit-box-flex:1;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}"]
                    }] }
        ];
        /** @nocollapse */
        OrganizationSelectorComponent.ctorParameters = function () {
            return [
                { type: core.Renderer2 },
                { type: core.Injector },
                { type: FavoritesTool },
                { type: ApiService },
                { type: core.NgZone },
                { type: StateMgrTool }
            ];
        };
        OrganizationSelectorComponent.propDecorators = {
            baseCls: [{ type: core.HostBinding, args: ['class.f-organization-selector',] }],
            width: [{ type: core.HostBinding, args: ['style.width',] }, { type: core.Input }],
            dialog: [{ type: core.ViewChild, args: ['farrisDialog',] }],
            libOrgGroup: [{ type: core.ViewChild, args: ['libOrgGroup',] }],
            libOrgTree: [{ type: core.ViewChild, args: ['libOrgTree',] }],
            libOrgFavorites: [{ type: core.ViewChild, args: ['libOrgFavorites',] }],
            showInput: [{ type: core.Input }],
            busNum: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            placeholder: [{ type: core.Input }],
            searchPlaceholder: [{ type: core.Input }],
            readonly: [{ type: core.Input }],
            absUserOrgUrl: [{ type: core.Input }],
            absRfQueryUrl: [{ type: core.Input }],
            absRfModifyUrl: [{ type: core.Input }],
            groupApiUrl: [{ type: core.Input }],
            groupExtendUrl: [{ type: core.Input }],
            absOrgType: [{ type: core.Input }],
            enableHierarchicalLoading: [{ type: core.Input }],
            notGetStopOrg: [{ type: core.Input }],
            primaryField: [{ type: core.Input }],
            displayField: [{ type: core.Input }],
            orgIds: [{ type: core.Input }],
            layer: [{ type: core.Input }],
            cascadeCheck: [{ type: core.Input }],
            cascadeDown: [{ type: core.Input }],
            cascadeUp: [{ type: core.Input }],
            showCheckAll: [{ type: core.Input }],
            keepSelect: [{ type: core.Input }],
            formatFn: [{ type: core.Input }],
            selectedLimit: [{ type: core.Input }],
            showTabIds: [{ type: core.Input }],
            activeTabId: [{ type: core.Input }],
            searchPageSize: [{ type: core.Input }],
            mapFields: [{ type: core.Input }],
            multipleChoiceSeparator: [{ type: core.Input }],
            draggable: [{ type: core.Input }],
            virtualizedLoad: [{ type: core.Input }],
            dataPermission: [{ type: core.Input }],
            dataPermissionIds: [{ type: core.Input }],
            filterType: [{ type: core.Input }],
            disableOrgList: [{ type: core.Input }],
            filterOrgList: [{ type: core.Input }],
            selectionsChange: [{ type: core.Output }],
            inputClear: [{ type: core.Output }],
            tagRemoved: [{ type: core.Output }]
        };
        return OrganizationSelectorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/tab-organization/to.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrganizationComponent = /** @class */ (function () {
        function OrganizationComponent(apiService, cdr, favoritesTool, injector, ngZone, stateMgr, msgService) {
            var _this = this;
            this.apiService = apiService;
            this.cdr = cdr;
            this.favoritesTool = favoritesTool;
            this.injector = injector;
            this.ngZone = ngZone;
            this.stateMgr = stateMgr;
            this.msgService = msgService;
            this.baseCls = true;
            this.primaryField = 'orgId';
            this.pathLength = 4;
            this.dataPermission = false;
            this.dataPermissionIds = [];
            this.disableOrgList = [];
            this.selectionsChange = new core.EventEmitter();
            this.originalTreeData = [];
            this.locationOrgText = '';
            this.treeListData = [];
            this.treeTableCols = [];
            this.selections = [];
            this.favoritesList = [];
            this.initLoad = true;
            this.checkedOrgs = [];
            this.loadingService = null;
            this.localeService = null;
            this.dataToChecked = [];
            this.beforeClickNode = ( /**
             * @param {?} e
             * @return {?}
             */function (e) {
                if (!_this.enableHierarchicalLoading) {
                    return rxjs.of(true);
                }
                if (!_this.multiSelect) {
                    if (e.rowNode.isSelected) {
                        _this.setSelections([]);
                    }
                    else {
                        _this.setSelections(new Array(e.rowNode.node.data));
                    }
                    return rxjs.of(false);
                }
                // const param: OrgRequestParam = {
                //     absOrgType: this.absOrgType,
                //     notGetStopOrg: this.notGetStopOrg,
                //     getCurUser: false,
                //     parentID: e.rowNode.id,
                //     withAllSub: true,
                //     getOrgAllPath: true
                // };
                // return this.apiService.getOrganization(param).pipe(
                //     switchMap(
                //         (data: any) => {
                //             // if (data['data'].length > this.selectedLimit && !e.rowNode.isChecked) {
                //             //     this.msgService.show('warning', `亲，一次性选择了超过${this.selectedLimit}条数据~`, true);
                //             //     return of(false)
                //             // }
                //             // if (!e.rowNode.isChecked) {
                //             //     // todo 待验证，加入selection，
                //             //     data.data.forEach(item => {
                //             //         if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.selections) === -1) {
                //             //             this.setSelections(item, ChangeType.Append, 'other');
                //             //         }
                //             //     })
                //             // } else {
                //             //     this.selections.forEach((selection, index) => {
                //             //         data.data.forEach(item => {
                //             //             if (selection[this.primaryField] === item[this.primaryField]) {
                //             //                 this.setSelections(item, ChangeType.Remove, 'other');
                //             //             }
                //             //         });
                //             //     });
                //             // }
                //             // this.cdr.detectChanges();
                //             return of(true);
                //         }
                //     )
                // );
            });
            this.beforeCheckAll = ( /**
             * @param {?} e
             * @return {?}
             */function (e) {
                if (!_this.enableHierarchicalLoading) {
                    return rxjs.of(true);
                }
                /** @type {?} */
                var param = {
                    absOrgType: _this.absOrgType,
                    notGetStopOrg: _this.notGetStopOrg,
                    getCurUser: false,
                    parentID: e.instance.data[0].id,
                    withAllSub: true,
                    getOrgAllPath: true
                };
                return _this.apiService.getOrganization(param).pipe(operators.switchMap(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    // if (data['data'].length > this.selectedLimit) {
                    //     this.msgService.show('warning', `亲，一次性选择了超过${this.selectedLimit}条数据~`, true);
                    //     return of(false)
                    // }
                    _this.setSelections(data['data'], ChangeType.ValueChanged, 'other');
                    return rxjs.of(true);
                })));
            });
            this.cdr = this.injector.get(core.ChangeDetectorRef);
            this.loadingService = this.injector.get(uiLoading.LoadingService, null);
            this.localeService = this.injector.get(uiLocale.LocaleService);
            if (!this.localeService.langData['organizationSelector']) {
                this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
            }
        }
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.favoritesSub.unsubscribe();
                this.selectionsSub.unsubscribe();
            };
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.treeTableCols = [
                    { field: 'name', title: this.localeService.getValue("organizationSelector.organization.orgName"), template: this.orgNameCell },
                    { field: 'code', title: this.localeService.getValue("organizationSelector.organization.orgCode") }
                ];
                if (this.enableFavorites) {
                    this.treeTableCols.push({
                        field: '',
                        title: this.localeService.getValue("organizationSelector.organization.favorite"),
                        template: this.favoritesCell
                    });
                    this.treeTableCols[0].width = 300;
                    this.treeTableCols[1].width = 300;
                }
                if (this.initLoad && this.isActiveTab) {
                    if (this.enableHierarchicalLoading) {
                        this.hlAssembleData();
                    }
                    else {
                        this.assembleData();
                    }
                    this.initLoad = false;
                }
                this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var resData = _.cloneDeep(data);
                    _this.favoritesList = resData;
                    _this.setFavorites(_this.treeListData);
                    _this.farrisTree.detectChanges();
                }));
                this.currentTabId = this.activeTabId;
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.selections = _.cloneDeep(data.value);
                        if (_this.selections.length === 0) {
                            _this.dataToSelected = null;
                            _this.dataToChecked = [];
                            _this.farrisTree.clearCheckeds();
                            _this.farrisTree.clearSelections();
                            _this.farrisTree.detectChanges();
                        }
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.selections = _this.selections.filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.primaryField] !== data.value[_this.primaryField]; }));
                        if (data.from == 'selection' && _this.currentTabId == 'organization') {
                            _this.inTreeList(_this.treeListData, data.value);
                            if (data.value.inTreeList) {
                                if (_this.multiSelect) {
                                    _this.farrisTree.unCheckedNode(data.value[_this.primaryField]);
                                }
                                else {
                                    _this.farrisTree.clearAll();
                                }
                            }
                        }
                    }
                    else if (data.changeType === ChangeType.Append) {
                        CommonUtil.findIndex(data.value[_this.primaryField], _this.primaryField, _this.selections) === -1 ? _this.selections.push(data.value) : null;
                    }
                }));
            };
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        OrganizationComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                /*
                const orgIdsChange = changes.orgIds;
                if (orgIdsChange && orgIdsChange.currentValue) {
                    this.checkedOrgs = orgIdsChange.currentValue;
                }
                */
            };
        // 初始tab页不为组织架构，切换至组织架构时获取组织数据
        // 初始tab页不为组织架构，切换至组织架构时获取组织数据
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.loadTreeData =
            // 初始tab页不为组织架构，切换至组织架构时获取组织数据
            /**
             * @return {?}
             */
            function () {
                if (this.initLoad) {
                    if (this.enableHierarchicalLoading) {
                        this.hlAssembleData();
                    }
                    else {
                        this.assembleData();
                    }
                    this.initLoad = false;
                }
            };
        // 设置当前组织树各个节点的收藏状态
        // 设置当前组织树各个节点的收藏状态
        /**
         * @private
         * @param {?} treeListData
         * @return {?}
         */
        OrganizationComponent.prototype.setFavorites =
            // 设置当前组织树各个节点的收藏状态
            /**
             * @private
             * @param {?} treeListData
             * @return {?}
             */
            function (treeListData) {
                for (var i = 0; i < treeListData.length; i++) {
                    if (CommonUtil.findIndex(treeListData[i].id, this.primaryField, this.favoritesList) === -1) {
                        treeListData[i].data.inFavorites = false;
                    }
                    else {
                        treeListData[i].data.inFavorites = true;
                    }
                    if (treeListData[i].children.length) {
                        this.setFavorites(treeListData[i].children);
                    }
                }
            };
        /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
        OrganizationComponent.prototype.setSelections = /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
            function (selections, changeType, from) {
                if (changeType === void 0) {
                    changeType = ChangeType.ValueChanged;
                }
                if (from === void 0) {
                    from = 'tree';
                }
                this.stateMgr.emitSelections(selections, changeType, from);
            };
        // 组织树全选事件
        // 组织树全选事件
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.checkAll =
            // 组织树全选事件
            /**
             * @return {?}
             */
            function () {
                if (!this.enableHierarchicalLoading) {
                    /** @type {?} */
                    var checkeds_1 = [];
                    this.farrisTree.checkeds.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        checkeds_1.push(item.data);
                    }));
                    this.setSelections(checkeds_1);
                }
            };
        // 组织树取消全选事件
        // 组织树取消全选事件
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.unCheckAll =
            // 组织树取消全选事件
            /**
             * @return {?}
             */
            function () {
                this.setSelections([]);
            };
        // 选中（取消选中、勾选、取消勾选）树节点时触发
        // todo 分层加载的时候咋处理数据，beforeUnCheckAll还未支持。
        // 选中（取消选中、勾选、取消勾选）树节点时触发
        // todo 分层加载的时候咋处理数据，beforeUnCheckAll还未支持。
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationComponent.prototype.changeSelections =
            // 选中（取消选中、勾选、取消勾选）树节点时触发
            // todo 分层加载的时候咋处理数据，beforeUnCheckAll还未支持。
            /**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                /*
                if (!this.enableHierarchicalLoading && !!e.originalEvent) {
                    this.multiSelect ? this.toggleChecked(e) : this.toggleSelected(e);
                }
                */
                this.multiSelect ? this.toggleChecked(e) : this.toggleSelected(e);
            };
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationComponent.prototype.toggleChecked = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                /** @type {?} */
                var checkeds = [];
                e && e.instance && e.instance.checkeds.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    checkeds.push(item.data);
                }));
                this.setSelections(checkeds.concat(this.dataToChecked));
            };
        /**
         * @param {?} e
         * @return {?}
         */
        OrganizationComponent.prototype.toggleSelected = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                /** @type {?} */
                var selected = [];
                e && e.instance && e.instance.selections.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    selected.push(item.data);
                }));
                this.setSelections(selected);
            };
        // 根据传入的组织id确定已选择组织
        // 根据传入的组织id确定已选择组织
        /**
         * @private
         * @param {?} ids
         * @return {?}
         */
        OrganizationComponent.prototype.assembleDataByOrgIds =
            // 根据传入的组织id确定已选择组织
            /**
             * @private
             * @param {?} ids
             * @return {?}
             */
            function (ids) {
                var _this = this;
                if (!ids || ids.length === 0) {
                    return;
                }
                if (ids && ids.length > 0 && !this.multiSelect) {
                    this.msgService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.multiSelect"), true);
                    return;
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    idList: ids,
                    getCurUser: false,
                    getOrgAllPath: true,
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (res && res.data && res.data.length > 0) {
                        _this.checkedOrgs = res.data;
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) === -1) {
                                _this.setSelections(item, ChangeType.Append, 'other');
                            }
                        }));
                        _this.tickSelections();
                        _this.cdr.detectChanges();
                    }
                }));
            };
        // 分层加载组织树
        // 分层加载组织树
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.hlAssembleData =
            // 分层加载组织树
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    notGetStopOrg: this.notGetStopOrg,
                    getOrgAllPath: true
                };
                /** @type {?} */
                var layerList = [];
                /** @type {?} */
                var layer = this.layer;
                while (layer > 0) {
                    layerList.push(layer);
                    layer -= 1;
                }
                param.layerList = layerList;
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res || !res.data) {
                        return;
                    }
                    _this.originalTreeData = res.data;
                    if (res && res.curAbsUser && res.curAbsUser.orgAllPathInfo) {
                        /** @type {?} */
                        var curUserOrgPath = (( /** @type {?} */(res.curAbsUser.orgAllPathInfo))).filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            return !res.data.find(( /**
                             * @param {?} data
                             * @return {?}
                             */function (data) { return data[_this.primaryField] == item[_this.primaryField]; }));
                        }));
                        res.data = res.data.concat(curUserOrgPath || []);
                    }
                    if (_this.orgIds.length == 0) {
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            item.selectable = true;
                        }));
                    }
                    if (_this.enableFavorites) {
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.favoritesList) === -1) {
                                item.inFavorites = false;
                            }
                            else {
                                item.inFavorites = true;
                            }
                        }));
                    }
                    _this.treeListData = _this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);
                    _this.farrisTree.loadData(_this.treeListData);
                    if (_this.multiSelect) {
                        _this.checkOrgTreeNodes();
                    }
                    else {
                        _this.selectOrgTreeNode();
                    }
                    _this.cdr.detectChanges();
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                }));
            };
        // 全加载组织树
        // 全加载组织树
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.assembleData =
            // 全加载组织树
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    notGetStopOrg: this.notGetStopOrg,
                    getOrgAllPath: true
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res || !res.data) {
                        return;
                    }
                    if (_this.enableFavorites) {
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.favoritesList) === -1) {
                                item.inFavorites = false;
                            }
                            else {
                                item.inFavorites = true;
                            }
                        }));
                    }
                    _this.originalTreeData = res.data;
                    _this.treeListData = _this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);
                    _this.farrisTree.loadData(_this.treeListData);
                    if (_this.multiSelect) {
                        _this.checkOrgTreeNodes();
                    }
                    else {
                        _this.selectOrgTreeNode();
                    }
                    _this.cdr.detectChanges();
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                }));
            };
        // 确定已选组织是否在当前组织树内
        // 确定已选组织是否在当前组织树内
        /**
         * @private
         * @param {?} treeListData
         * @param {?} item
         * @return {?}
         */
        OrganizationComponent.prototype.inTreeList =
            // 确定已选组织是否在当前组织树内
            /**
             * @private
             * @param {?} treeListData
             * @param {?} item
             * @return {?}
             */
            function (treeListData, item) {
                for (var i = 0; i < treeListData.length; i++) {
                    if (treeListData[i].id === item[this.primaryField]) {
                        item.inTreeList = true;
                        break;
                    }
                    if (treeListData[i].children.length) {
                        this.inTreeList(treeListData[i].children, item);
                    }
                }
            };
        // 在当前组织树内勾选所有已选择的组织
        // 在当前组织树内勾选所有已选择的组织
        /**
         * @private
         * @return {?}
         */
        OrganizationComponent.prototype.tickSelections =
            // 在当前组织树内勾选所有已选择的组织
            /**
             * @private
             * @return {?}
             */
            function () {
                // const ids = [];
                // this.selectedDataNotInTreeList = [];
                // this.selections.forEach(item => {
                //     this.inTreeList(this.treeListData, item);
                //     if (!!item.inTreeList) {
                //         ids.push(item[this.primaryField]);
                //     } else {
                //         if(!this.multiSelect) {
                //             this.singleSelectedData = null;
                //         }
                //         this.selectedDataNotInTreeList.push(item);
                //     }
                // });
                // this.ngZone.runOutsideAngular(() => {
                //     setTimeout(() => {
                //         if (!ids.length) {
                //             return;
                //         }
                //         if (this.multiSelect) {
                //             this.farrisTree.checkedNodes(ids, true, true);
                //         } else {
                //             this.farrisTree.clearSelections();
                //             //
                //             this.farrisTree.detectChanges();
                //             this.selectOrgTreeNode();
                //         }
                //     })
                // })
            };
        /**
        * 组织数据转换
        * @param plainSource 接口原始数据
        * @param layer 层级
        * @returns 返回树形接口的数据
        */
        /**
         * 组织数据转换
         * @private
         * @param {?} plainSource 接口原始数据
         * @param {?} layer 层级
         * @param {?=} expandedPath
         * @return {?} 返回树形接口的数据
         */
        OrganizationComponent.prototype.dataToTree = /**
         * 组织数据转换
         * @private
         * @param {?} plainSource 接口原始数据
         * @param {?} layer 层级
         * @param {?=} expandedPath
         * @return {?} 返回树形接口的数据
         */
            function (plainSource, layer, expandedPath) {
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var treeSource = this.dealData(plainSource, expandedPath ? expandedPath : '');
                // const parents = treeSource.filter(item => {
                //     return item.data.layer === layer;
                // });
                // this.treeData(parents, treeSource, 1);
                return treeSource;
            };
        /**
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
        OrganizationComponent.prototype.dealDataWhenExpandTreeNode = /**
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
            function (data, expandedPath) {
                var _this = this;
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var pathList = [];
                if (expandedPath != '') {
                    /** @type {?} */
                    var maxLength = expandedPath.length / this.pathLength;
                    if (this.enableHierarchicalLoading) {
                        maxLength -= 1;
                    }
                    for (var a = 0; a < maxLength; a++) {
                        pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });
                    }
                }
                /** @type {?} */
                var newDatas = [];
                if (data.length) {
                    data.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        /** @type {?} */
                        var newsDataObj = {
                            data: {
                                orgId: item[_this.primaryField],
                                name: item.name,
                                path: item.path,
                                code: item.code,
                                layer: Number(item.layer),
                                orgAllPath: item.orgAllPath,
                                inFavorites: item.inFavorites
                            },
                            expanded: true,
                            selectable: item.selectable,
                            children: []
                        };
                        // let expanded = [];
                        // if (this.enableHierarchicalLoading) {
                        //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);
                        // }
                        // if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                        //     newsDataObj.expanded = true;
                        // } else {
                        //     if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {
                        //         newsDataObj.leaf = false;
                        //         newsDataObj.expanded = false;
                        //     }
                        // }
                        if (Number(item.layer) >= _this.layer) {
                            newsDataObj.expanded = false;
                        }
                        if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                            newsDataObj.expanded = true;
                        }
                        if (_this.enableHierarchicalLoading && item.isDetail === '0') {
                            newsDataObj.leaf = false;
                        }
                        newDatas.push(newsDataObj);
                    }));
                }
                return newDatas;
            };
        /**
         * 预处理组织数据
         */
        /**
         * 预处理组织数据
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
        OrganizationComponent.prototype.dealData = /**
         * 预处理组织数据
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
            function (data, expandedPath) {
                var _this = this;
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var pathList = [];
                if (expandedPath != '') {
                    /** @type {?} */
                    var maxLength = expandedPath.length / this.pathLength;
                    if (this.enableHierarchicalLoading) {
                        maxLength -= 1;
                    }
                    for (var a = 0; a < maxLength; a++) {
                        pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });
                    }
                }
                /** @type {?} */
                var nodes = new Map();
                /** @type {?} */
                var newDatas = [];
                if (data.length) {
                    data.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        // const newsDataObj: any = {
                        //     data: {
                        //         orgId: item[this.primaryField],
                        //         name: item.name,
                        //         path: item.path,
                        //         code: item.code,
                        //         layer: Number(item.layer),
                        //         orgAllPath: item.orgAllPath,
                        //         inFavorites: item.inFavorites
                        //     },
                        //     expanded: true,
                        //     children: []
                        // };
                        // // let expanded = [];
                        // // if (this.enableHierarchicalLoading) {
                        // //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);
                        // // }
                        // if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                        //     newsDataObj.expanded = true;
                        // } else {
                        //     newsDataObj.expanded = false;
                        //     if (this.enableHierarchicalLoading && item.isDetail === '0') {
                        //         newsDataObj.leaf = false;
                        //     }
                        // }
                        // // todo 分层加载需要
                        // //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {
                        //     //newsDataObj.leaf = false;
                        //    // newsDataObj.expanded = false;
                        // //}
                        // newDatas.push(newsDataObj);
                        /** @type {?} */
                        var path = item['path'];
                        /** @type {?} */
                        var parentPath = Number(item['layer']) > 1 ? (( /** @type {?} */(item['path']))).slice(0, 4 * (Number(item['layer']) - 1)) : 'top';
                        if (!nodes[path]) {
                            nodes[path] = { children: [] };
                        }
                        nodes[path] = {
                            data: {
                                orgId: item[_this.primaryField],
                                name: item.name,
                                path: item.path,
                                code: item.code,
                                layer: Number(item.layer),
                                orgAllPath: item.orgAllPath,
                                inFavorites: item.inFavorites
                            },
                            expanded: true,
                            children: nodes[path]['children']
                        };
                        if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1 || Number(item.layer) < _this.layer) {
                            nodes[path]['expanded'] = true;
                        }
                        else {
                            nodes[path]['expanded'] = false;
                            if (_this.enableHierarchicalLoading && item.isDetail === '0') {
                                nodes[path]['leaf'] = false;
                            }
                        }
                        if (_this.dataPermission && _this.dataPermissionIds.length) {
                            /** @type {?} */
                            var target = _this.dataPermissionIds.find(( /**
                             * @param {?} t
                             * @return {?}
                             */function (t) { return t == item['orgId']; }));
                            nodes[path]['selectable'] = target ? true : false;
                        }
                        if (_this.filterType == 'disable' && _this.disableOrgList.length) {
                            /** @type {?} */
                            var filterTarget = _this.disableOrgList.find(( /**
                             * @param {?} t
                             * @return {?}
                             */function (t) { return t == item['orgId']; }));
                            nodes[path]['selectable'] = filterTarget ? false : true;
                        }
                        // todo 分层加载需要
                        //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {
                        //newsDataObj.leaf = false;
                        // newsDataObj.expanded = false;
                        //}
                        if (parentPath == 'top') {
                            newDatas.push(nodes[path]);
                        }
                        else {
                            if (!nodes[parentPath]) {
                                nodes[parentPath] = { children: [] };
                            }
                            (( /** @type {?} */(nodes[parentPath]['children']))).push(nodes[path]);
                        }
                    }));
                }
                return newDatas;
            };
        /**
         * 数据转换
         * @param parents 父级节点信息
         * @param treeSource 原始数据信息
         * @param layer 层级
         */
        /**
         * 数据转换
         * @param {?} parents 父级节点信息
         * @param {?} treeSource 原始数据信息
         * @param {?} layer 层级
         * @return {?}
         */
        OrganizationComponent.prototype.treeData = /**
         * 数据转换
         * @param {?} parents 父级节点信息
         * @param {?} treeSource 原始数据信息
         * @param {?} layer 层级
         * @return {?}
         */
            function (parents, treeSource, layer) {
                var _this = this;
                parents.forEach(( /**
                 * @param {?} parent
                 * @return {?}
                 */function (parent) {
                    /** @type {?} */
                    var parentPath = parent['data']['path'];
                    /** @type {?} */
                    var parentLayer = parent['data']['layer'];
                    treeSource.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item && item['data'] && item['data']['path']) {
                            /** @type {?} */
                            var itemPath = item['data']['path'];
                            /** @type {?} */
                            var itemLayer = item['data']['layer'];
                            /** @type {?} */
                            var targetPath = void 0;
                            if (itemPath && itemPath.length > parentPath.length) {
                                targetPath = itemPath.substr(0, Number(layer) * 4);
                            }
                            if (parentPath === targetPath && parentLayer === itemLayer - 1) {
                                parent['children'].push(item);
                            }
                            if (parentPath === targetPath) {
                                _this.treeData([item], treeSource, Number(layer) + 1);
                            }
                        }
                    }));
                }));
            };
        // 收藏或取消收藏当前节点对应的组织
        // 收藏或取消收藏当前节点对应的组织
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        OrganizationComponent.prototype.toggleFavorites =
            // 收藏或取消收藏当前节点对应的组织
            /**
             * @param {?} e
             * @param {?} item
             * @return {?}
             */
            function (e, item) {
                this.favoritesTool.toggleFavorites(e, item);
            };
        // 监听组织树展开事件
        // 监听组织树展开事件
        /**
         * @param {?} obj
         * @return {?}
         */
        OrganizationComponent.prototype.listenTreeExpand =
            // 监听组织树展开事件
            /**
             * @param {?} obj
             * @return {?}
             */
            function (obj) {
                // todo 分层加载
                if (this.enableHierarchicalLoading && obj.children.length === 0) {
                    this.getOrganizationByParentNode(obj);
                }
            };
        // 分层加载时，获取下级组织数据并为当前组织树添加子节点
        // 分层加载时，获取下级组织数据并为当前组织树添加子节点
        /**
         * @param {?} parentNode
         * @return {?}
         */
        OrganizationComponent.prototype.getOrganizationByParentNode =
            // 分层加载时，获取下级组织数据并为当前组织树添加子节点
            /**
             * @param {?} parentNode
             * @return {?}
             */
            function (parentNode) {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    parentID: parentNode.id,
                    notGetStopOrg: this.notGetStopOrg,
                    getCurUser: false,
                    getOrgAllPath: true
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (res && res.data) {
                        /** @type {?} */
                        var newDatas_1 = [];
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.originalTreeData) === -1) {
                                item.selectable = true;
                                if (_this.dataPermission && _this.dataPermissionIds.length) {
                                    /** @type {?} */
                                    var target = _this.dataPermissionIds.find(( /**
                                     * @param {?} t
                                     * @return {?}
                                     */function (t) { return t == item['orgId']; }));
                                    if (!target) {
                                        item.selectable = false;
                                    }
                                }
                                if (_this.filterType == 'disable' && _this.disableOrgList.length) {
                                    /** @type {?} */
                                    var disableTarget = _this.disableOrgList.find(( /**
                                     * @param {?} t
                                     * @return {?}
                                     */function (t) { return t == item['orgId']; }));
                                    if (!!disableTarget) {
                                        item.selectable = false;
                                    }
                                }
                                _this.originalTreeData.push(item);
                            }
                            if (_this.enableFavorites) {
                                item.inFavorites = true;
                                if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.favoritesList) === -1) {
                                    item.inFavorites = false;
                                }
                            }
                            newDatas_1.push(item);
                        }));
                        /** @type {?} */
                        var nodes = _this.dealDataWhenExpandTreeNode(newDatas_1);
                        _this.farrisTree.appendChildren(nodes, parentNode);
                        _this.farrisTree.detectChanges();
                        if (_this.multiSelect) {
                            _this.checkOrgTreeNodes();
                        }
                        else {
                            _this.selectOrgTreeNode();
                        }
                        if (_this.loadingService) {
                            _this.loadingService.close();
                        }
                    }
                }));
            };
        // 返回已经该节点是否展开过
        // 返回已经该节点是否展开过
        /**
         * @private
         * @param {?} item
         * @param {?} arr
         * @param {?} expanded
         * @return {?}
         */
        OrganizationComponent.prototype.nodeExpanded =
            // 返回已经该节点是否展开过
            /**
             * @private
             * @param {?} item
             * @param {?} arr
             * @param {?} expanded
             * @return {?}
             */
            function (item, arr, expanded) {
                for (var i = 0; i < arr.length; i++) {
                    if (item.data.id === arr[i].data.id) {
                        expanded[0] = arr[i].expanded;
                    }
                    else if (arr[i].children.length) {
                        this.nodeExpanded(item, arr[i].children, expanded);
                    }
                }
            };
        // 展开节点
        // 展开节点
        /**
         * @private
         * @param {?} treeData
         * @param {?} path
         * @param {?} layer
         * @return {?}
         */
        OrganizationComponent.prototype.expandTreeNode =
            // 展开节点
            /**
             * @private
             * @param {?} treeData
             * @param {?} path
             * @param {?} layer
             * @return {?}
             */
            function (treeData, path, layer) {
                var _this = this;
                treeData.forEach(( /**
                 * @param {?} node
                 * @return {?}
                 */function (node) {
                    if (path.includes(node.data.path)) {
                        _this.farrisTree.expandNode(node.data.id);
                    }
                    if (node.data.layer < layer && node.children.length) {
                        _this.expandTreeNode(node.children, path, layer);
                    }
                }));
            };
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.selectOrgTreeNode = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.treeListData && this.selections.length) {
                    this.dataToSelected = this.selections[0];
                    // if (!this.farrisTree.selectedRow) {
                    //     if (this.orgTreeTimer) {
                    //         clearTimeout(this.orgTreeTimer);
                    //     }
                    //     this.orgTreeTimer = 
                    // } else {
                    //     this.farrisTree.scrollToCurrentNode();
                    // }
                    setTimeout(( /**
                     * @return {?}
                     */function () {
                        _this.inTreeList(_this.treeListData, _this.dataToSelected);
                        if (_this.dataToSelected.inTreeList) {
                            _this.farrisTree.selectNode(_this.dataToSelected[_this.primaryField]);
                            _this.dataToSelected = null;
                        }
                    }), 300);
                }
            };
        /**
         * @return {?}
         */
        OrganizationComponent.prototype.checkOrgTreeNodes = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.treeListData && this.selections.length) {
                    this.dataToChecked = this.selections;
                    /** @type {?} */
                    var checkedNodes_1 = [];
                    setTimeout(( /**
                     * @return {?}
                     */function () {
                        _this.dataToChecked.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            _this.inTreeList(_this.treeListData, item);
                            if (item.inTreeList) {
                                checkedNodes_1.push(item[_this.primaryField]);
                            }
                        }));
                        _this.dataToChecked = _this.dataToChecked.filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return !checkedNodes_1.includes(item[_this.primaryField]); }));
                        if (checkedNodes_1.length) {
                            _this.farrisTree.checkedNodes(checkedNodes_1, true, true);
                        }
                    }), 300);
                }
            };
        OrganizationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'lib-org',
                        template: "<farris-treetable #farristree style=\"cursor:pointer\" [width]=\"'100%'\" [data]=\"treeListData\" [idField]=\"primaryField\"\r\n    [columns]=\"treeTableCols\" [singleSelect]=\"!multiSelect\" [showBorder]=\"false\" [showCheckbox]=\"multiSelect\"\r\n    [showIcon]=\"false\" [showHeader]=\"true\" [fixedHeader]=\"true\" [disabled]=\"false\" [fit]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\"\r\n    [striped]=\"true\" [cascadeCheck]=\"cascadeCheck\" [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\"\r\n    [keepSelect]=\"keepSelect\" [showCheckAll]=\"showCheckAll\" [onlySelectSelf]=\"true\"\r\n    [virtualized]=\"true\"\r\n    (nodeChecked)=\"changeSelections($event)\" (nodeUnChecked)=\"changeSelections($event)\"\r\n    (nodeSelected)=\"changeSelections($event)\" (nodeUnSelect)=\"changeSelections($event)\"\r\n    (checkAll)=\"checkAll()\" (unCheckAll)=\"unCheckAll()\"\r\n    (expand)=\"listenTreeExpand($event)\" class=\"fos-treetable\">\r\n</farris-treetable>\r\n\r\n<!-- \u7EC4\u7EC7\u6811\u6A21\u677F -->\r\n<ng-template #orgNameCell let-ctx>\r\n    <span style=\"font-size: 13px;\" title=\"{{ctx.node.data.name}}\">{{ctx.node.data.name}}</span>\r\n</ng-template>\r\n\r\n<!-- \u7EC4\u7EC7\u6811\u6A21\u677F-\u6536\u85CF\u5217 -->\r\n<ng-template #favoritesCell let-ctx>\r\n    <span class=\"f-icon f-icon-star\" [class.default-light-color]=\"ctx.node.data.inFavorites\"\r\n        [class.default-dark-color]=\"!ctx.node.data.inFavorites\" (click)=\"toggleFavorites($event, ctx.node.data)\"></span>\r\n</ng-template>",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        OrganizationComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: core.ChangeDetectorRef },
                { type: FavoritesTool },
                { type: core.Injector },
                { type: core.NgZone },
                { type: StateMgrTool },
                { type: uiMessager.MessagerService }
            ];
        };
        OrganizationComponent.propDecorators = {
            enableFavorites: [{ type: core.Input }],
            baseCls: [{ type: core.HostBinding, args: ['class.f-utils-fill-flex-column',] }],
            farrisTree: [{ type: core.ViewChild, args: ['farristree',] }],
            orgNameCell: [{ type: core.ViewChild, args: ['orgNameCell',] }],
            favoritesCell: [{ type: core.ViewChild, args: ['favoritesCell',] }],
            primaryField: [{ type: core.Input }],
            enableHierarchicalLoading: [{ type: core.Input }],
            notGetStopOrg: [{ type: core.Input }],
            layer: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            absOrgType: [{ type: core.Input }],
            cascadeCheck: [{ type: core.Input }],
            cascadeUp: [{ type: core.Input }],
            cascadeDown: [{ type: core.Input }],
            showCheckAll: [{ type: core.Input }],
            keepSelect: [{ type: core.Input }],
            pathLength: [{ type: core.Input }],
            orgIds: [{ type: core.Input }],
            selectedLimit: [{ type: core.Input }],
            virtualizedLoad: [{ type: core.Input }],
            isActiveTab: [{ type: core.Input }],
            activeTabId: [{ type: core.Input }],
            dataPermission: [{ type: core.Input }],
            dataPermissionIds: [{ type: core.Input }],
            filterType: [{ type: core.Input }],
            disableOrgList: [{ type: core.Input }],
            selectionsChange: [{ type: core.Output }]
        };
        return OrganizationComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/selections/sl.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SelectionComponent = /** @class */ (function () {
        function SelectionComponent(apiService, cdr, favoritesTool, injector, ngZone, stateMgr) {
            this.apiService = apiService;
            this.cdr = cdr;
            this.favoritesTool = favoritesTool;
            this.injector = injector;
            this.ngZone = ngZone;
            this.stateMgr = stateMgr;
            this.openedChange = new core.EventEmitter();
            this.datas = [];
            this.items = [];
            this.pageIndex = 0;
            this.pageSize = 5;
            this.moreText = '';
            this.localeService = null;
            this.moreDataText = '';
            this.noneDataText = '';
            this.cdr = this.injector.get(core.ChangeDetectorRef);
            this.localeService = this.injector.get(uiLocale.LocaleService);
            if (!this.localeService.langData['organizationSelector']) {
                this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
            }
        }
        /**
         * @return {?}
         */
        SelectionComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.selectionsSub.unsubscribe();
            };
        /**
         * @return {?}
         */
        SelectionComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    _this.pageIndex = 0;
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.datas = _.cloneDeep(data.value);
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.datas = _this.datas.filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.primaryField] !== data.value[_this.primaryField]; }));
                    }
                    else if (data.changeType === ChangeType.Append) {
                        if (CommonUtil.findIndex(data.value[_this.primaryField], _this.primaryField, _this.datas) === -1) {
                            _this.datas.push(data.value);
                        }
                    }
                    _this.items = _this.datas.slice(_this.pageIndex, _this.pageSize);
                    if (_this.datas.length < 1) {
                        _this.moreText = _this.noneDataText;
                    }
                    else {
                        if (_this.items.length < _this.datas.length) {
                            _this.moreText = _this.moreDataText;
                        }
                        else {
                            _this.moreText = null;
                        }
                    }
                    _this.cdr.detectChanges();
                }));
                this.moreDataText = this.localeService.getValue("organizationSelector.tabCommon.more");
                this.noneDataText = this.localeService.getValue("organizationSelector.tabCommon.noMore");
            };
        /**
         * @return {?}
         */
        SelectionComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        SelectionComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
            };
        /**
         * @return {?}
         */
        SelectionComponent.prototype.openGroupDialog = /**
         * @return {?}
         */
            function () {
                this.openedChange.emit(true);
            };
        /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
        SelectionComponent.prototype.trackByFn = /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
            function (index, item) {
                return index;
            };
        /**
         * @return {?}
         */
        SelectionComponent.prototype.loadMore = /**
         * @return {?}
         */
            function () {
                if (this.pageIndex < this.datas.length) {
                    this.pageIndex += 1;
                    /** @type {?} */
                    var currentPageIndex = this.pageIndex * this.pageSize;
                    /** @type {?} */
                    var currentItems = this.datas.slice(currentPageIndex, currentPageIndex + this.pageSize);
                    this.items = this.items.concat(currentItems);
                    if (this.items.length && this.items.length === this.datas.length) {
                        this.moreText = null;
                    }
                    this.cdr.detectChanges;
                }
            };
        /**
         * @param {?} e
         * @param {?} data
         * @param {?} i
         * @return {?}
         */
        SelectionComponent.prototype.removeItem = /**
         * @param {?} e
         * @param {?} data
         * @param {?} i
         * @return {?}
         */
            function (e, data, i) {
                this.stateMgr.emitSelections(data, ChangeType.Remove, 'selection');
                if (i !== 0) {
                    e.stopPropagation();
                    e.cancelBubble = true;
                }
            };
        SelectionComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'lib-selection',
                        template: "<div class=\"selections-content\">\r\n    <perfect-scrollbar style=\"max-height: 340px;min-height: 40px;\">\r\n        <ng-container *ngFor=\"let item of items; let i = index;trackBy: trackByFn\">\r\n            <div class=\"selections-blank-4\"></div>\r\n            <div class=\"selections-item\">\r\n                <span class=\"si-icon-circle\">{{ i + 1 }}</span>\r\n                <dl>\r\n                    <dt>{{ item.name }}</dt>\r\n                    <dd title=\"{{item.orgAllPath}}\">{{ item.orgAllPath }}</dd>\r\n                </dl>\r\n                <span class=\"f-icon f-icon-minus-circle deleteBtn\" (click)=\"removeItem($event, item, i)\"></span>\r\n            </div>\r\n        </ng-container>\r\n        <div class=\"selections-more\">\r\n            <span (click)=\"loadMore()\"\r\n                [ngStyle]=\"{'color': moreText === moreDataText ? '#2A87FF' : '#ded5d5', 'cursor': moreText === moreDataText ? 'pointer' : 'default'}\">{{\r\n                moreText }}</span>\r\n            <div class=\"saved-group\" (click)=\"openGroupDialog()\" *ngIf=\"enableGroup\">\r\n                <span class=\"f-icon f-icon-team\"></span>{{'organizationSelector.group.saveGroup' | locale}}\r\n            </div>\r\n        </div>\r\n        <div class=\"selections-blank-34\"></div>\r\n    </perfect-scrollbar>\r\n</div>\r\n<div class=\"selections-triangle-down\"></div>",
                        styles: [".selections-content{box-shadow:0 1px 12px 0 rgba(73,84,102,.15);border-radius:7px;width:340px;height:auto;overflow:hidden}.selections-item{width:332px;border-radius:6px;margin:0 4px;display:-webkit-box;display:flex}.selections-blank-4{width:100%;height:4px}.selections-blank-34{width:100%;height:34px}.selections-item:hover{background:#ebf4ff}.selections-item .si-icon-circle{border-radius:50%;font-size:12px;width:14px;height:14px;background:#62c8ca;text-align:center;display:block;color:#fff;margin:7px 8px 0 11px;line-height:14px}.selections-item dl{-webkit-box-flex:1;flex:1;margin-top:3px;font-size:13px;overflow:hidden}.selections-item dl dt{font-weight:400;line-height:18px;color:#53565d}.selections-item dl dd{line-height:18px;color:#a8adb8;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.selections-item .deleteBtn{font-size:14px;margin:15px 15px 0;color:#f46160;cursor:pointer}.selections-triangle-down{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:8px solid #fff;margin-left:40px}.selections-more{text-align:center;padding:4px 20px;height:34px;line-height:26px;font-size:13px;color:#2a87ff;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;position:absolute;bottom:0;left:0;right:0;background:#fff}.selections-more .saved-group{width:95px;height:26px;line-height:26px;background:#eaedf2;border-radius:5px;text-align:center;font-size:13px;color:#909ba2;cursor:pointer}.selections-more .saved-group:hover{color:#2a87ff;background:#eaf4ff}.selections-more .saved-group:hover .f-icon{color:#2a87ff}.selections-more .saved-group .f-icon{color:#909ba2;margin-right:5px;cursor:pointer;font-size:14px}"]
                    }] }
        ];
        /** @nocollapse */
        SelectionComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: core.ChangeDetectorRef },
                { type: FavoritesTool },
                { type: core.Injector },
                { type: core.NgZone },
                { type: StateMgrTool }
            ];
        };
        SelectionComponent.propDecorators = {
            primaryField: [{ type: core.Input }],
            enableGroup: [{ type: core.Input }],
            openedChange: [{ type: core.Output }]
        };
        return SelectionComponent;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }

    /**
     * @fileoverview added by tsickle
     * Generated from: assets/resource.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // tslint:disable-next-line:max-line-length
    /** @type {?} */
    var noDataImg = 'url(data:image/png;base64,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)';

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/search/srp.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SearchComponent = /** @class */ (function () {
        function SearchComponent(apiService, favoritesTool, stateMgr, cdr, injector) {
            this.apiService = apiService;
            this.favoritesTool = favoritesTool;
            this.stateMgr = stateMgr;
            this.cdr = cdr;
            this.injector = injector;
            this.disableOrgList = [];
            this.closePanelChange = new core.EventEmitter();
            this.allChecked = false;
            this.selections = [];
            this.cloneSelections = [];
            this.allIndexId = 'allIndexId';
            this.noDataImg = noDataImg;
            this.totalItems = [];
            this.perPageItems = [];
            this.favoritesList = [];
            this.pageIndex = 1;
            this.pageTotal = 0;
            this.itemTotalCount = 0;
        }
        Object.defineProperty(SearchComponent.prototype, "onSearch", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!!value) {
                    this.perPageItems = [];
                    this.cdr.detectChanges();
                    this.loadSearchResult();
                }
                else {
                    this.itemTotalCount = 0;
                    this.totalItems = [];
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        SearchComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.selectionsSub.unsubscribe();
                if (this.enableFavorites) {
                    this.favoritesSub.unsubscribe();
                }
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.enableFavorites) {
                    this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(( /**
                     * @param {?} data
                     * @return {?}
                     */function (data) {
                        _this.favoritesList = data;
                        _this.setFavorites();
                    }));
                }
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.selections = _.cloneDeep(data.value);
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.unSelectLine(data.value);
                    }
                    else if (data.changeType === ChangeType.Append) {
                        _this.selectLine(data.value);
                    }
                    _this.toggleChecked();
                    _this.cdr.detectChanges();
                }));
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @private
         * @return {?}
         */
        SearchComponent.prototype.setFavorites = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                this.perPageItems.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.favoritesList) !== -1) {
                        item.inFavorites = true;
                    }
                    else {
                        item.inFavorites = false;
                    }
                }));
            };
        /**
         * @param {?} dir
         * @param {?} num
         * @return {?}
         */
        SearchComponent.prototype.turnOverPage = /**
         * @param {?} dir
         * @param {?} num
         * @return {?}
         */
            function (dir, num) {
                if ((dir === 'pre' && this.pageIndex === 1) || (dir === 'next' && this.pageIndex === this.pageTotal)) {
                    return;
                }
                this.pageIndex = this.pageIndex + num;
                this.switchPage({ pageIndex: this.pageIndex });
            };
        /**
         * @param {?} inputEl
         * @param {?} maxNumber
         * @return {?}
         */
        SearchComponent.prototype.beforePageIndexChange = /**
         * @param {?} inputEl
         * @param {?} maxNumber
         * @return {?}
         */
            function (inputEl, maxNumber) {
                /** @type {?} */
                var target = ( /** @type {?} */(inputEl.target));
                /** @type {?} */
                var currentPageNumber = Number(target.value);
                if (currentPageNumber > maxNumber) {
                    target.value = maxNumber;
                }
                else {
                    if (currentPageNumber < 1) {
                        target.value = 1;
                    }
                }
                this.pageIndex = Number(target.value);
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.closePanel = /**
         * @return {?}
         */
            function () {
                this.totalItems = [];
                this.perPageItems = [];
                this.itemTotalCount = 0;
                this.pageTotal = 0;
                this.closePanelChange.emit(true);
            };
        /**
         * @return {?}
         */
        SearchComponent.prototype.toggleAll = /**
         * @return {?}
         */
            function () {
                if (!this.allChecked) {
                    this.checkAll();
                }
                else {
                    this.unCheckAll();
                }
                this.emitSelections(this.selections, ChangeType.ValueChanged);
            };
        /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
        SearchComponent.prototype.toggleOne = /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
            function (data, e) {
                if (!data.enable) {
                    e.stopPropagation();
                    e.cancelBubble = true;
                    return;
                }
                if (data.checked) {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Remove);
                    }
                    else {
                        this.emitSelections([]);
                    }
                }
                else {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Append);
                    }
                    else {
                        this.emitSelections(new Array(data));
                    }
                }
                e.preventDefault();
            };
        /**
         * 用于数据展示
         */
        /**
         * 用于数据展示
         * @return {?}
         */
        SearchComponent.prototype.loadSearchResult = /**
         * 用于数据展示
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    notGetStopOrg: this.notGetStopOrg,
                    getCurUser: false,
                    getOrgAllPath: true,
                    codeOrName: this.searchText
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res || !res.data) {
                        return;
                    }
                    /** @type {?} */
                    var resData = _.cloneDeep(res.data);
                    _this.itemTotalCount = resData.length;
                    _this.totalItems = resData;
                    _this.pageTotal = Math.ceil(_this.itemTotalCount / _this.pageSize);
                    _this.switchPage({ pageIndex: 1 });
                    _this.toggleChecked();
                    _this.cdr.detectChanges();
                }));
            };
        /**
         * @param {?} pageInfo
         * @return {?}
         */
        SearchComponent.prototype.switchPage = /**
         * @param {?} pageInfo
         * @return {?}
         */
            function (pageInfo) {
                var _this = this;
                if (!pageInfo || pageInfo.pageIndex < 1) {
                    return;
                }
                /** @type {?} */
                var startIndex = (pageInfo.pageIndex - 1) * this.pageSize;
                /** @type {?} */
                var endIndex = startIndex + this.pageSize;
                this.perPageItems = this.totalItems.slice(startIndex, endIndex);
                this.perPageItems.forEach(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var indexId = CommonUtil.newGuid();
                    res.checked = false;
                    res.inFavorites = false;
                    res.indexId = indexId;
                    res.enable = _this.filterType == 'disable' ? !_this.disableOrgList.includes(res.orgId) : true;
                    if (CommonUtil.findIndex(res[_this.primaryField], _this.primaryField, _this.selections) !== -1) {
                        res.checked = true;
                    }
                    if (CommonUtil.findIndex(res[_this.primaryField], _this.primaryField, _this.favoritesList) !== -1) {
                        res.inFavorites = true;
                    }
                }));
                this.perPageItems = this.perPageItems.slice();
            };
        /**
         * 全选后处理
         * @param dataArr 全选的值
         */
        /**
         * 全选后处理
         * @return {?}
         */
        SearchComponent.prototype.checkAll = /**
         * 全选后处理
         * @return {?}
         */
            function () {
                var e_1, _a;
                try {
                    for (var _b = __values(this.perPageItems), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var item = _c.value;
                        if (!item.enable) {
                            continue;
                        }
                        this._insertOneIntoSelections(item);
                        item.checked = true;
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return))
                            _a.call(_b);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
            };
        /**
         * 全部取消
         * @param dataArr 取消的数据
         * @returns void
         */
        /**
         * 全部取消
         * @return {?} void
         */
        SearchComponent.prototype.unCheckAll = /**
         * 全部取消
         * @return {?} void
         */
            function () {
                var _this = this;
                this.perPageItems.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.selections.forEach(( /**
                     * @param {?} selection
                     * @param {?} index
                     * @return {?}
                     */function (selection, index) {
                        if (item[_this.primaryField] === selection[_this.primaryField]) {
                            _this.selections.splice(index, 1);
                        }
                    }));
                    item.checked = false;
                }));
            };
        /**
         * 当前行选中
         * @param data 当前行的数据（）
         */
        /**
         * 当前行选中
         * @private
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
        SearchComponent.prototype.selectLine = /**
         * 当前行选中
         * @private
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
            function (data) {
                if (this.multiSelect) {
                    this._insertOneIntoSelections(data);
                }
                else {
                    this.selections = [];
                    this.perPageItems.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item.checked) {
                            item.checked = false;
                        }
                    }));
                    this._insertOneIntoSelections(data);
                }
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
            };
        /**
         * 单选取消选中
         * @param data 取消选中行
         */
        /**
         * 单选取消选中
         * @private
         * @param {?} data 取消选中行
         * @return {?}
         */
        SearchComponent.prototype.unSelectLine = /**
         * 单选取消选中
         * @private
         * @param {?} data 取消选中行
         * @return {?}
         */
            function (data) {
                /** @type {?} */
                var index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);
                if (index > -1) {
                    this.selections.splice(index, 1);
                }
                this.setChecked(data, false);
                if (this.allChecked) {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @param {?} data
         * @param {?} checked
         * @return {?}
         */
        SearchComponent.prototype.setChecked = /**
         * @private
         * @param {?} data
         * @param {?} checked
         * @return {?}
         */
            function (data, checked) {
                /** @type {?} */
                var itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.perPageItems);
                if (itemIndex > -1) {
                    this.perPageItems[itemIndex].checked = checked;
                }
            };
        /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
        SearchComponent.prototype.emitSelections = /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
            function (selections, changeType, from) {
                if (changeType === void 0) {
                    changeType = ChangeType.ValueChanged;
                }
                if (from === void 0) {
                    from = 'search';
                }
                this.stateMgr.emitSelections(selections, changeType, from);
            };
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        SearchComponent.prototype.toggleFavorites = /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
            function (e, item) {
                this.favoritesTool.toggleFavorites(e, item);
            };
        /**
         * 选中并插入当前行数据到右侧
         * @param data 当前行的数据
         * @param collection 暂存当前数据的集合
         */
        /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
        SearchComponent.prototype._insertOneIntoSelections = /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
            function (data) {
                // 如果当前数据已经移入右侧数据，则返回。
                if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {
                    return;
                }
                this.setChecked(data, true);
                this.selections.push(data);
                this.selections = this.selections.slice();
            };
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         */
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
        SearchComponent.prototype.toggleChecked = /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
            function () {
                var _this = this;
                this.perPageItems.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) > -1 && item.enable) {
                        item.checked = true;
                    }
                    else {
                        item.checked = false;
                    }
                }));
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
                else {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @return {?}
         */
        SearchComponent.prototype.isAllChecked = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var count = 0;
                /** @type {?} */
                var allChecked = false;
                this.perPageItems.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.selections.forEach(( /**
                     * @param {?} selection
                     * @return {?}
                     */function (selection) {
                        if (item[_this.primaryField] === selection[_this.primaryField]) {
                            count += 1;
                        }
                    }));
                }));
                if (this.perPageItems.filter(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item.enable; })).length === count && count > 0) {
                    allChecked = true;
                }
                return allChecked;
            };
        /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
        SearchComponent.prototype.trackByFn = /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
            function (index, item) {
                return index;
            };
        SearchComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'lib-search',
                        template: "<div class=\"os-card\">\r\n    <div class=\"os-card-title\">\r\n        <span>{{'organizationSelector.searchPage.firstResultText' | locale}}{{itemTotalCount}}{{'organizationSelector.searchPage.lastResultText' | locale}}</span>\r\n        <span class=\"f-icon modal_close\" (click)=\"closePanel()\" title=\"{{'organizationSelector.searchPage.close' | locale}}\"></span>\r\n    </div>\r\n    <perfect-scrollbar>\r\n        <div class=\"os-card-content\">\r\n            <div *ngFor=\"let data of perPageItems; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\" [ngClass]=\"{'disabledPerson': !data.enable}\">\r\n                <div class=\"custom-control custom-checkbox mb-2\">\r\n                    <input class=\"custom-control-input\" [id]=\"data.indexId\" type=\"checkbox\" [disabled]=\"!data.enable\" [checked]=\"data.checked\">\r\n                    <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data, $event)\">\r\n                        <div class=\"src-item-container\">\r\n                            <div class=\"src-item-content\">\r\n                                <p class=\"os-card-content-title\" title=\"{{data.name}}\">\r\n                                    {{data.name}}</p>\r\n                                <p class=\"os-card-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                    {{data.orgAllPath}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <span class=\"f-icon f-icon-star\" *ngIf=\"enableFavorites\" [class.default-light-color]=\"data.inFavorites\"\r\n                    [class.default-dark-color]=\"!data.inFavorites\" (click)=\"toggleFavorites($event, data)\"></span>\r\n            </div>\r\n            <div *ngIf=\"perPageItems.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-os-card-nodata\">\r\n                {{'organizationSelector.tabCommon.noOrgData' | locale}}</div>\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <div class=\"pagination-container\" *ngIf=\"perPageItems.length!==0\">\r\n        <ul class=\"ngx-pagination pagination pager-viewmode-simple\">\r\n            <li class=\"page-item d-flex flex-fill\"></li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === 1\" (click)=\"turnOverPage('pre', -1)\">\r\n                <span class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-pre\"></span>\r\n                </span>\r\n            </li>\r\n            <li class=\"page-item\">\r\n                <input id=\"farris-datagrid-gotopagenumber\" min=\"1\" type=\"number\" max=\"{{pageTotal}}\"\r\n                    [(ngModel)]=\"pageIndex\" style=\"width: 38px;\" (keyup.enter)=\"switchPage({pageIndex: pageIndex})\"\r\n                    (input)=\"beforePageIndexChange($event, pageTotal)\">\r\n            </li>\r\n            <li class=\"page-item page-separator\" style=\"margin-left: 10px\"> / </li>\r\n            <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n                <span style=\"font-size: 16px; font-weight: 600;\"> {{pageTotal}}</span>\r\n            </li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === pageTotal\" (click)=\"turnOverPage('next', 1)\">\r\n                <a class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-next\"></span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>",
                        styles: [":host{position:absolute;z-index:100;background:#fff;top:44px;right:0;left:0;bottom:0;display:-webkit-box;display:flex}.os-card{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1;overflow:hidden}.os-card .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.os-card .os-card-content{padding-top:3px;clear:both}.os-card .os-card-content .src-item-container{display:-webkit-box;display:flex;height:32px;margin:-21px 0 0 15px}.os-card .os-card-content .src-item-content{margin-left:11px;margin-top:-2px;padding-right:10px;overflow:hidden}.os-card .s-selectedPerson{min-width:240px;float:left;width:calc(50% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 10px}.os-card .disabledPerson{color:#a8adb8;background-color:#fafafc}.os-card .disabledPerson:hover{background:#fafafc!important}.os-card .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:15px;font-size:14px}.os-card .s-selectedPerson .default-light-color{color:#f7b500}.os-card .s-selectedPerson .default-dark-color{color:#d8dce6}.os-card .k-checkbox-label::after,.os-card .k-checkbox-label::before{top:10px;font-size:16px;width:14px;height:14px}.os-card .fp-os-card-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;color:#b4bccc;padding-top:110px;position:absolute;left:50%;top:50%;margin:-70px 0 0 -50px}.os-card .os-card-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.os-card .os-card-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.os-card .os-card-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;padding:15px;font-size:14px}.os-card .os-card-title .custom-control{margin:10px 0 0 15px;line-height:35px}.os-card .os-card-title .title-clearall{margin:10px 15px 0 0;color:#2a87ff;cursor:pointer;line-height:35px}.os-card .s-selectedPerson .custom-control-label::before{top:1px}.os-card .os-card-title .f-icon{color:#878d99;cursor:pointer}"]
                    }] }
        ];
        /** @nocollapse */
        SearchComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: FavoritesTool },
                { type: StateMgrTool },
                { type: core.ChangeDetectorRef },
                { type: core.Injector }
            ];
        };
        SearchComponent.propDecorators = {
            primaryField: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            enableFavorites: [{ type: core.Input }],
            searchText: [{ type: core.Input }],
            absOrgType: [{ type: core.Input }],
            notGetStopOrg: [{ type: core.Input }],
            pageSize: [{ type: core.Input }],
            onSearch: [{ type: core.Input }],
            filterType: [{ type: core.Input }],
            disableOrgList: [{ type: core.Input }],
            closePanelChange: [{ type: core.Output }]
        };
        return SearchComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/tab-favorites/favorites.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FavoritesComponent = /** @class */ (function () {
        function FavoritesComponent(apiService, favoritesTool, stateMgr, cdr, injector) {
            this.apiService = apiService;
            this.favoritesTool = favoritesTool;
            this.stateMgr = stateMgr;
            this.cdr = cdr;
            this.injector = injector;
            this.disableOrgList = [];
            this.allChecked = false;
            this.selections = [];
            this.allIndexId = 'allIndexId';
            this.noDataImg = noDataImg;
            this.items = [];
            this.favoritesList = [];
            this.loadingService = null;
            this.allIndexId = CommonUtil.newGuid();
            this.loadingService = this.injector.get(uiLoading.LoadingService, null);
        }
        /**
         * @return {?}
         */
        FavoritesComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.selectionsSub.unsubscribe();
                this.favoritesSub.unsubscribe();
            };
        /**
         * @return {?}
         */
        FavoritesComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    /** @type {?} */
                    var resData = _.cloneDeep(data);
                    _this.favoritesList = resData;
                    _this.loadFavoritesList();
                }));
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.selections = _.cloneDeep(data.value);
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.unSelectLine(data.value);
                    }
                    else if (data.changeType === ChangeType.Append) {
                        _this.selectLine(data.value);
                    }
                    _this.toggleChecked();
                    _this.cdr.detectChanges();
                }));
            };
        /**
         * @return {?}
         */
        FavoritesComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @return {?}
         */
        FavoritesComponent.prototype.assembleData = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    _this.favoritesList = data;
                    _this.loadFavoritesList();
                }));
            };
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        FavoritesComponent.prototype.deleteFromFavorites = /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
            function (e, item) {
                this.favoritesTool.toggleFavorites(e, item);
            };
        /**
         * @param {?} e
         * @return {?}
         */
        FavoritesComponent.prototype.toggleAll = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                if (!this.allChecked) {
                    this.checkAll();
                }
                else {
                    this.unCheckAll();
                }
                e.preventDefault();
            };
        /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
        FavoritesComponent.prototype.toggleOne = /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
            function (data, e) {
                if (!data.enable) {
                    e.stopPropagation();
                    e.cancelBubble = true;
                    return;
                }
                if (data.checked) {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Remove);
                    }
                    else {
                        this.emitSelections([]);
                    }
                }
                else {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Append);
                    }
                    else {
                        this.emitSelections(new Array(data));
                    }
                }
                e.preventDefault();
            };
        /**
         * 用于数据展示
         */
        /**
         * 用于数据展示
         * @return {?}
         */
        FavoritesComponent.prototype.loadFavoritesList = /**
         * 用于数据展示
         * @return {?}
         */
            function () {
                var _this = this;
                this.items = [];
                this.favoritesList.forEach(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    /** @type {?} */
                    var indexId = CommonUtil.newGuid();
                    /** @type {?} */
                    var item = {
                        orgId: res.orgId,
                        code: res.code,
                        name: res.name ? res.name : '',
                        orgAllPath: !res.orgAllPath || res.orgAllPath.split('_').includes('null') ? '' : res.orgAllPath,
                        path: res.path,
                        layer: Number(res.layer),
                        enable: _this.filterType == 'disable' ? !_this.disableOrgList.includes(res.orgId) : true,
                        indexId: indexId
                    };
                    if (CommonUtil.findIndex(res[_this.primaryField], _this.primaryField, _this.selections) !== -1) {
                        item.checked = true;
                    }
                    _this.items.push(item);
                }));
                this.items = this.items.slice();
                this.cdr.detectChanges();
                if (this.loadingService) {
                    this.loadingService.close();
                }
            };
        /**
         * 全选后处理
         * @param dataArr 全选的值
         */
        /**
         * 全选后处理
         * @return {?}
         */
        FavoritesComponent.prototype.checkAll = /**
         * 全选后处理
         * @return {?}
         */
            function () {
                var _this = this;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) === -1 && item.enable) {
                        _this.emitSelections(item, ChangeType.Append);
                    }
                }));
            };
        /**
         * 全部取消
         * @param dataArr 取消的数据
         * @returns void
         */
        /**
         * 全部取消
         * @return {?} void
         */
        FavoritesComponent.prototype.unCheckAll = /**
         * 全部取消
         * @return {?} void
         */
            function () {
                var _this = this;
                /** @type {?} */
                var checkeds = this.items.filter(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item.checked; }));
                checkeds.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.emitSelections(item, ChangeType.Remove);
                }));
            };
        /**
         * 当前行选中
         * @param data 当前行的数据（）
         */
        /**
         * 当前行选中
         * @private
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
        FavoritesComponent.prototype.selectLine = /**
         * 当前行选中
         * @private
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
            function (data) {
                if (this.multiSelect) {
                    this._insertOneIntoSelections(data);
                }
                else {
                    this.selections = [];
                    this.items.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item.checked) {
                            item.checked = false;
                        }
                    }));
                    this._insertOneIntoSelections(data);
                }
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
            };
        /**
         * 单选取消选中
         * @param data 取消选中行
         */
        /**
         * 单选取消选中
         * @private
         * @param {?} data 取消选中行
         * @return {?}
         */
        FavoritesComponent.prototype.unSelectLine = /**
         * 单选取消选中
         * @private
         * @param {?} data 取消选中行
         * @return {?}
         */
            function (data) {
                /** @type {?} */
                var index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);
                if (index > -1) {
                    this.selections.splice(index, 1);
                }
                this.setChecked(data, false);
                if (this.allChecked) {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @param {?} data
         * @param {?} checked
         * @return {?}
         */
        FavoritesComponent.prototype.setChecked = /**
         * @private
         * @param {?} data
         * @param {?} checked
         * @return {?}
         */
            function (data, checked) {
                /** @type {?} */
                var itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.items);
                if (itemIndex > -1) {
                    this.items[itemIndex].checked = checked;
                }
            };
        /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
        FavoritesComponent.prototype.emitSelections = /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
            function (selections, changeType, from) {
                if (changeType === void 0) {
                    changeType = ChangeType.ValueChanged;
                }
                if (from === void 0) {
                    from = 'favorite';
                }
                this.stateMgr.emitSelections(selections, changeType, from);
            };
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        FavoritesComponent.prototype.toggleFavorites = /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
            function (e, item) {
                this.favoritesTool.toggleFavorites(e, item);
            };
        /**
         * 全部取消勾选
         */
        /**
         * 全部取消勾选
         * @return {?}
         */
        FavoritesComponent.prototype.clearCheckeds = /**
         * 全部取消勾选
         * @return {?}
         */
            function () {
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    item.checked = false;
                }));
                this.allChecked = false;
                this.selections = [];
            };
        /**
         * 选中并插入当前行数据到右侧
         * @param data 当前行的数据
         * @param collection 暂存当前数据的集合
         */
        /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
        FavoritesComponent.prototype._insertOneIntoSelections = /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
            function (data) {
                // 如果当前数据已经移入右侧数据，则返回。
                if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {
                    return;
                }
                this.setChecked(data, true);
                this.selections.push(data);
                this.selections = this.selections.slice();
            };
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         */
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
        FavoritesComponent.prototype.toggleChecked = /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
            function () {
                var _this = this;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) > -1 && item.enable) {
                        item.checked = true;
                    }
                    else {
                        item.checked = false;
                    }
                }));
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
                else {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @return {?}
         */
        FavoritesComponent.prototype.isAllChecked = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var count = 0;
                /** @type {?} */
                var allChecked = false;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.selections.forEach(( /**
                     * @param {?} selection
                     * @return {?}
                     */function (selection) {
                        if (item[_this.primaryField] === selection[_this.primaryField]) {
                            count += 1;
                        }
                    }));
                }));
                if (this.items.filter(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item.enable; })).length === count && count > 0) {
                    allChecked = true;
                }
                return allChecked;
            };
        /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
        FavoritesComponent.prototype.trackByFn = /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
            function (index, item) {
                return index;
            };
        FavoritesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'lib-favorites',
                        template: "<div class=\"os-card\">\r\n    <div class=\"os-card-title\" *ngIf=\"multiSelect && items.length > 0\">\r\n        <div class=\"custom-control custom-checkbox\">\r\n            <input class=\"custom-control-input\" [id]=\"allIndexId\" type=\"checkbox\" [checked]=\"allChecked\">\r\n            <label class=\"custom-control-label\" [for]=\"allIndexId\"\r\n                (click)=\"toggleAll($event)\">{{'organizationSelector.tabCommon.firstCheckAllText' | locale}}{{items.length}}{{'organizationSelector.tabCommon.lastCheckAllText' | locale}}</label>\r\n        </div>\r\n    </div>\r\n    <div class=\"os-card-blank\" *ngIf=\"!multiSelect\"></div>\r\n    <perfect-scrollbar>\r\n        <div class=\"os-card-content\">\r\n            <div *ngFor=\"let data of items; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\" [ngClass]=\"{'disabledPerson': !data.enable}\">\r\n                <div class=\"custom-control custom-checkbox mb-2\">\r\n                    <input class=\"custom-control-input\" [id]=\"data.indexId\" type=\"checkbox\" [disabled]=\"!data.enable\" [checked]=\"data.checked\">\r\n                    <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data, $event)\">\r\n                        <div class=\"src-item-container\">\r\n                            <div class=\"src-item-content\">\r\n                                <p class=\"os-card-content-title\" title=\"{{data.name}}\">\r\n                                    {{data.name}}</p>\r\n                                <p class=\"os-card-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                    {{data.orgAllPath}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <span class=\"f-icon f-icon-minus-circle\"\r\n                    (click)=\"deleteFromFavorites($event, data)\"></span>\r\n            </div>\r\n            <div *ngIf=\"items.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-os-card-nodata\">\r\n                {{'organizationSelector.tabCommon.noOrgData' | locale}}</div>\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <!-- \u5206\u9875\r\n    <div class=\"pagination-container\" *ngIf=\"items.length!==0\">\r\n        <ul class=\"ngx-pagination pagination pager-viewmode-simple\">\r\n            <li class=\"page-item d-flex flex-fill\"></li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === 1\" (click)=\"turnOverPage('pre', -1)\">\r\n                <span class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-pre\"></span>\r\n                </span>\r\n            </li>\r\n            <li class=\"page-item\">\r\n                <input id=\"farris-datagrid-gotopagenumber\" min=\"1\" type=\"number\" max=\"{{pageTotal}}\"\r\n                    [(ngModel)]=\"pageIndex\" style=\"width: 38px;\" (keyup.enter)=\"switchPage({pageIndex: pageIndex})\"\r\n                    (input)=\"beforePageIndexChange($event, pageTotal)\">\r\n            </li>\r\n            <li class=\"page-item page-separator\" style=\"margin-left: 10px\"> / </li>\r\n            <li class=\"page-item page-total\" style=\"margin-left: 5px\">\r\n                <span style=\"font-size: 16px; font-weight: 600;\"> {{pageTotal}}</span>\r\n            </li>\r\n            <li class=\"page-item\" [class.disabled]=\"pageIndex === pageTotal\" (click)=\"turnOverPage('next', 1)\">\r\n                <a class=\"page-link border-0\">\r\n                    <span class=\"f-icon f-page-next\"></span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    -->\r\n</div>",
                        styles: [":host{background:#fff;display:-webkit-box;display:flex;width:100%;height:100%}.os-card{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1;overflow:hidden}.os-card .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.os-card .os-card-content{padding-top:3px;clear:both}.os-card .os-card-content .src-item-container{display:-webkit-box;display:flex;height:32px;margin:-21px 0 0 15px}.os-card .os-card-content .src-item-content{margin-left:11px;margin-top:-2px;padding-right:10px;overflow:hidden}.os-card .s-selectedPerson{min-width:240px;float:left;width:calc(50% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 10px}.os-card .disabledPerson{color:#a8adb8;background-color:#fafafc}.os-card .disabledPerson:hover{background:#fafafc!important}.os-card .s-selectedPerson .f-icon-minus-circle,.os-card .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:15px;font-size:14px;cursor:pointer}.os-card .s-selectedPerson .f-icon-minus-circle{color:#f46160}.os-card .s-selectedPerson .default-light-color{color:#f7b500}.os-card .s-selectedPerson .default-dark-color{color:#d8dce6}.os-card .k-checkbox-label::after,.os-card .k-checkbox-label::before{top:10px;font-size:16px;width:14px;height:14px}.os-card .fp-os-card-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;color:#b4bccc;padding-top:110px;position:absolute;left:50%;top:50%;margin:-70px 0 0 -50px}.os-card .os-card-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.os-card .os-card-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.os-card .os-card-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;font-size:14px}.os-card .os-card-title .custom-control{margin-left:15px;line-height:35px}.os-card .os-card-title .title-clearall{margin:10px 15px 0 0;color:#2a87ff;cursor:pointer;line-height:35px}.os-card .s-selectedPerson .custom-control-label::before{top:1px}.os-card .os-card-title .f-icon{color:#878d99;cursor:pointer}.os-card .os-card-blank{width:100%;height:20px}"]
                    }] }
        ];
        /** @nocollapse */
        FavoritesComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: FavoritesTool },
                { type: StateMgrTool },
                { type: core.ChangeDetectorRef },
                { type: core.Injector }
            ];
        };
        FavoritesComponent.propDecorators = {
            primaryField: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            filterType: [{ type: core.Input }],
            disableOrgList: [{ type: core.Input }]
        };
        return FavoritesComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/tab-group/group.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GroupComponent = /** @class */ (function () {
        function GroupComponent(apiService, favoritesTool, stateMgr, cdr, injector) {
            this.apiService = apiService;
            this.favoritesTool = favoritesTool;
            this.stateMgr = stateMgr;
            this.cdr = cdr;
            this.injector = injector;
            this.primaryField = 'orgId';
            this.disableOrgList = [];
            this.groupChange = new core.EventEmitter();
            this.groupIdField = 'id';
            this.userIdField = 'userId';
            this.selections = [];
            this.noDataImg = noDataImg;
            this.allChecked = false;
            this.items = [];
            this.favoritesList = [];
            this.groupData = { public: [], personal: [] };
            this.personnelList = [];
            this.groupPersonnels = [];
            this.publicVisible = true;
            this.personalVisible = true;
            this.publicToken = 'public';
            this.personalToken = 'personal';
            this.showGroupOrgDialog = false;
            this.currentGroupType = 'public';
            this.showCheckAllIcon = true;
            this.messageService = null;
            this.loadingService = null;
            this.notifyService = null;
            this.localeService = null;
            this.allIndexId = CommonUtil.newGuid();
            this.messageService = this.injector.get(uiMessager.MessagerService, null);
            this.loadingService = this.injector.get(uiLoading.LoadingService, null);
            this.notifyService = this.injector.get(uiNotify.NotifyService, null);
            this.localeService = this.injector.get(uiLocale.LocaleService);
            if (!this.localeService.langData['organizationSelector']) {
                this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
            }
        }
        /**
         * @return {?}
         */
        GroupComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.enableFavorites) {
                    this.favoritesSub.unsubscribe();
                }
                this.selectionsSub.unsubscribe();
            };
        /**
         * @return {?}
         */
        GroupComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.enableFavorites) {
                    this.favoritesSub = this.favoritesTool.favoritesSubject.subscribe(( /**
                     * @param {?} data
                     * @return {?}
                     */function (data) {
                        _this.favoritesList = data;
                        _this.setFavorites();
                    }));
                }
                this.selectionsSub = this.stateMgr.selectionsSubject.subscribe(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data.changeType === ChangeType.ValueChanged) {
                        _this.selections = _.cloneDeep(data.value);
                    }
                    else if (data.changeType === ChangeType.Remove) {
                        _this.unSelectLine(data.value);
                    }
                    else if (data.changeType === ChangeType.Append) {
                        _this.selectLine(data.value);
                    }
                    _this.toggleChecked();
                    _this.cdr.detectChanges();
                }));
                if (this.isActiveTab) {
                    this.getGroupList();
                }
            };
        /**
         * @return {?}
         */
        GroupComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?=} reload
         * @return {?}
         */
        GroupComponent.prototype.assembleData = /**
         * @param {?=} reload
         * @return {?}
         */
            function (reload) {
                if (reload === void 0) {
                    reload = false;
                }
                if (reload) {
                    this.getGroupList();
                }
            };
        // 变更群组内的组织
        // 变更群组内的组织
        /**
         * @return {?}
         */
        GroupComponent.prototype.updateGroup =
            // 变更群组内的组织
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                /** @type {?} */
                var addList = [];
                /** @type {?} */
                var primaryIds = this.items.map(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item[_this.primaryField]; })).join();
                this.appendOrg.currentOrgs.forEach(( /**
                 * @param {?} org
                 * @return {?}
                 */function (org) {
                    if (primaryIds.indexOf(org[_this.primaryField]) === -1) {
                        addList.push(org[_this.primaryField]);
                    }
                }));
                if ((this.selectedGroupTotal + addList.length) > 1000) {
                    this.messageService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.limit"), true);
                    this.toggleGroupOrgDialog(false);
                    return;
                }
                /** @type {?} */
                var addOrgsInCurrentGroup$ = this.apiService.saveGroup({
                    groupId: this.selectedGroupId,
                    addIds: addList,
                    deleteIds: [],
                    changeType: Number(3)
                });
                addOrgsInCurrentGroup$.pipe(operators.tap(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    if (data) {
                        _this.getOrgsByGroup({ id: _this.selectedGroupId }, _this.currentGroupType, { updateGroup: true });
                        _this.toggleGroupOrgDialog(false);
                    }
                }), ( /**
                 * @param {?} error
                 * @return {?}
                 */function (error) {
                    _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.appendOrganization"), true);
                }))).subscribe();
            };
        // 删除群组
        // 删除群组
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        GroupComponent.prototype.deleteGroup =
            // 删除群组
            /**
             * @param {?} e
             * @param {?} item
             * @return {?}
             */
            function (e, item) {
                var _this = this;
                e.stopPropagation();
                e.cancelBubble = true;
                // 暂时以此方式处理国际化未适配之处（TFS：486401）
                item['title'] = item['title'] ? item['title'] : '';
                this.messageService.confirm(this.localeService.getValue("organizationSelector.confirmMessage.deleteGroup") +
                    item['title'] + this.localeService.getValue("organizationSelector.confirmMessage.mark")).pipe(operators.switchMap(( /**
             * @param {?} result
             * @return {?}
             */function (result) {
                    if (!!result) {
                        if (item[_this.groupIdField] === _this.selectedGroupId) {
                            _this.selectedGroupId = null;
                            _this.selectedGroupTotal = 0;
                            _this.currentGroupType = _this.publicToken;
                        }
                        /** @type {?} */
                        var deleteGroup$ = _this.apiService.saveGroup({
                            groupId: item[_this.groupIdField],
                            changeType: Number(4)
                        });
                        return deleteGroup$.pipe(operators.tap(( /**
                         * @param {?} data
                         * @return {?}
                         */function (data) {
                            if (data) {
                                _this.getGroupList({ deleteGroup: true });
                            }
                        }), ( /**
                         * @param {?} error
                         * @return {?}
                         */function (error) {
                            _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.deleteGroup"), true);
                        })));
                    }
                    else {
                        return rxjs.EMPTY;
                    }
                }))).subscribe();
            };
        // 变更群组基本信息（名称、描述）
        // 变更群组基本信息（名称、描述）
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        GroupComponent.prototype.editGroup =
            // 变更群组基本信息（名称、描述）
            /**
             * @param {?} e
             * @param {?} item
             * @return {?}
             */
            function (e, item) {
                this.selectedGroupId = item[this.groupIdField];
                this.selectedGroupTotal = item['total'];
                this.groupChange.next(item);
                e.stopPropagation();
                e.cancelBubble = true;
            };
        // 删除群组内的组织
        // 删除群组内的组织
        /**
         * @param {?} e
         * @param {?} data
         * @return {?}
         */
        GroupComponent.prototype.removeOrg =
            // 删除群组内的组织
            /**
             * @param {?} e
             * @param {?} data
             * @return {?}
             */
            function (e, data) {
                var _this = this;
                this.messageService.confirm(this.localeService.getValue("organizationSelector.confirmMessage.deleteOrganization") +
                    data['name'] + this.localeService.getValue("organizationSelector.confirmMessage.mark")).pipe(operators.switchMap(( /**
             * @param {?} result
             * @return {?}
             */function (result) {
                    if (!!result) {
                        /** @type {?} */
                        var deleteOrg$ = _this.apiService.saveGroup({
                            groupId: _this.selectedGroupId,
                            addIds: [],
                            deleteIds: [data[_this.primaryField]],
                            changeType: Number(3)
                        });
                        return deleteOrg$.pipe(operators.tap(( /**
                         * @param {?} data
                         * @return {?}
                         */function (data) {
                            if (data) {
                                _this.getOrgsByGroup({ id: _this.selectedGroupId }, _this.currentGroupType, { removeOrg: true });
                                e.stopPropagation();
                                e.cancelBubble = true;
                            }
                        }), ( /**
                         * @param {?} error
                         * @return {?}
                         */function (error) {
                            _this.messageService.show('error', _this.localeService.getValue("organizationSelector.errorMessage.deleteOrganization"), true);
                        })));
                    }
                    else {
                        return rxjs.EMPTY;
                    }
                }))).subscribe();
            };
        // 设置群组内组织的勾选状态
        // 设置群组内组织的勾选状态
        /**
         * @private
         * @param {?} data
         * @param {?} checked
         * @return {?}
         */
        GroupComponent.prototype.setChecked =
            // 设置群组内组织的勾选状态
            /**
             * @private
             * @param {?} data
             * @param {?} checked
             * @return {?}
             */
            function (data, checked) {
                /** @type {?} */
                var itemIndex = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.items);
                if (itemIndex > -1) {
                    this.items[itemIndex].checked = checked;
                }
            };
        // 设置群组内组织的收藏状态
        // 设置群组内组织的收藏状态
        /**
         * @private
         * @return {?}
         */
        GroupComponent.prototype.setFavorites =
            // 设置群组内组织的收藏状态
            /**
             * @private
             * @return {?}
             */
            function () {
                var _this = this;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.favoritesList) !== -1) {
                        item.inFavorites = true;
                    }
                    else {
                        item.inFavorites = false;
                    }
                }));
            };
        // 通过弹窗增加群组内的组织
        // 通过弹窗增加群组内的组织
        /**
         * @param {?} show
         * @param {?=} groupType
         * @return {?}
         */
        GroupComponent.prototype.toggleGroupOrgDialog =
            // 通过弹窗增加群组内的组织
            /**
             * @param {?} show
             * @param {?=} groupType
             * @return {?}
             */
            function (show, groupType) {
                if (groupType === void 0) {
                    groupType = this.personalToken;
                }
                if (groupType === this.personalToken) {
                    this.showGroupOrgDialog = show;
                }
            };
        // 获取某个群组内的所有组织
        // 获取某个群组内的所有组织
        /**
         * @param {?} item
         * @param {?=} groupType
         * @param {?=} changeType
         * @return {?}
         */
        GroupComponent.prototype.getOrgsByGroup =
            // 获取某个群组内的所有组织
            /**
             * @param {?} item
             * @param {?=} groupType
             * @param {?=} changeType
             * @return {?}
             */
            function (item, groupType, changeType) {
                var _this = this;
                if (groupType === void 0) {
                    groupType = this.publicToken;
                }
                if (changeType === void 0) {
                    changeType = null;
                }
                if (this.loadingService) {
                    this.loadingService.show();
                }
                this.currentGroupType = groupType;
                this.allChecked = false;
                this.selectedGroupId = item[this.groupIdField];
                //this.selectedGroupTotal = item['total'];
                /** @type {?} */
                var getOrgGroupMembers$ = this.apiService.getGroupMembers(this.selectedGroupId, this.absOrgType);
                getOrgGroupMembers$.pipe(operators.tap(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    _this.items = data ? data : [];
                    _this.groupData.personal.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item[_this.groupIdField] === _this.selectedGroupId) {
                            _this.selectedGroupTotal = _this.items.length;
                            if (item.total !== _this.items.length) {
                                item.total = _this.items.length;
                            }
                        }
                    }));
                    _this.items.forEach(( /**
                     * @param {?} it
                     * @return {?}
                     */function (it) {
                        it.indexId = Math.random().toString(16).substring(2);
                        it.enable = _this.filterType == 'disable' ? !_this.disableOrgList.includes(it.orgId) : true;
                    }));
                    _this.items = _this.items.slice();
                    _this.showCheckAllIcon = _this.items.length ? true : false;
                    _this.toggleChecked();
                    _this.setFavorites();
                    _this.cdr.detectChanges();
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                    if (changeType && changeType['updateGroup']) {
                        _this.notifyService.success(_this.localeService.getValue("organizationSelector.successMessage.appendOrganization"));
                    }
                    else if (changeType && changeType['removeOrg']) {
                        _this.notifyService.success(_this.localeService.getValue("organizationSelector.successMessage.deleteOrganization"));
                    }
                }), ( /**
                 * @param {?} error
                 * @return {?}
                 */function (error) {
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                    throw new Error(_this.localeService.getValue("organizationSelector.errorMessage.getOrganization"));
                }))).subscribe();
            };
        // 获取组织群组数据
        // 获取组织群组数据
        /**
         * @param {?=} changeType
         * @return {?}
         */
        GroupComponent.prototype.getGroupList =
            // 获取组织群组数据
            /**
             * @param {?=} changeType
             * @return {?}
             */
            function (changeType) {
                var _this = this;
                if (changeType === void 0) {
                    changeType = null;
                }
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var getOrgGroups$ = this.apiService.getOrgGroups(this.absOrgType);
                getOrgGroups$.pipe(operators.switchMap(( /**
                 * @param {?} data
                 * @return {?}
                 */function (data) {
                    _this.groupData.public = data && data.publicGroup ? data.publicGroup : [];
                    _this.groupData.personal = data && data.privateGroup ? data.privateGroup : [];
                    if (_this.groupData.public.length == 0 && _this.groupData.personal.length == 0) {
                        _this.items = [];
                    }
                    if (!_this.selectedGroupId) {
                        /** @type {?} */
                        var firstPublicGroupId = _this.groupData.public[0] && _this.groupData.public[0][_this.groupIdField];
                        /** @type {?} */
                        var firstPersonalGroupId = _this.groupData.personal[0] && _this.groupData.personal[0][_this.groupIdField];
                        _this.selectedGroupId = firstPublicGroupId ? firstPublicGroupId : firstPersonalGroupId;
                    }
                    if (!!_this.selectedGroupId) {
                        if (_this.groupData.public.findIndex(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.groupIdField] === _this.selectedGroupId; })) !== -1) {
                            _this.currentGroupType = _this.publicToken;
                        }
                        else if (_this.groupData.personal.findIndex(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) { return item[_this.groupIdField] === _this.selectedGroupId; })) !== -1) {
                            _this.currentGroupType = _this.personalToken;
                        }
                        /** @type {?} */
                        var getOrgGroupMembers$ = _this.apiService.getGroupMembers(_this.selectedGroupId, _this.absOrgType);
                        return getOrgGroupMembers$.pipe(operators.tap(( /**
                         * @param {?} resData
                         * @return {?}
                         */function (resData) {
                            _this.items = resData ? resData : [];
                            _this.groupData.personal.forEach(( /**
                             * @param {?} item
                             * @return {?}
                             */function (item) {
                                if (item[_this.groupIdField] === _this.selectedGroupId) {
                                    _this.selectedGroupTotal = _this.items.length;
                                    if (item.total !== _this.items.length) {
                                        item.total = _this.items.length;
                                    }
                                }
                            }));
                            _this.items.forEach(( /**
                             * @param {?} it
                             * @return {?}
                             */function (it) {
                                it.indexId = Math.random().toString(16).substring(2);
                                it.enable = _this.filterType == 'disable' ? !_this.disableOrgList.includes(it.orgId) : true;
                            }));
                            _this.items = _this.items.slice();
                            _this.toggleChecked();
                            _this.setFavorites();
                            _this.cdr.detectChanges();
                        }), ( /**
                         * @param {?} error
                         * @return {?}
                         */function (error) {
                            if (_this.loadingService) {
                                _this.loadingService.close();
                            }
                            throw new Error(_this.localeService.getValue("organizationSelector.errorMessage.getOrganization"));
                        })));
                    }
                    else {
                        return rxjs.of(true);
                    }
                })), operators.tap(( /**
                 * @return {?}
                 */function () {
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                    if (changeType && changeType['saveGroup']) {
                        _this.notifyService.success(_this.localeService.getValue("organizationSelector.successMessage.saveGroup"));
                    }
                    else if (changeType && changeType['updateNameOrNote']) {
                        _this.notifyService.success(_this.localeService.getValue("organizationSelector.successMessage.editGroup"));
                    }
                    else if (changeType && changeType['deleteGroup']) {
                        _this.notifyService.success(_this.localeService.getValue("organizationSelector.successMessage.deleteGroup"));
                    }
                }), ( /**
                 * @param {?} error
                 * @return {?}
                 */function (error) {
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                    throw new Error(_this.localeService.getValue("organizationSelector.errorMessage.getGroup"));
                }))).subscribe();
            };
        // 收藏或者取消收藏组织
        // 收藏或者取消收藏组织
        /**
         * @param {?} e
         * @param {?} item
         * @return {?}
         */
        GroupComponent.prototype.toggleFavorites =
            // 收藏或者取消收藏组织
            /**
             * @param {?} e
             * @param {?} item
             * @return {?}
             */
            function (e, item) {
                this.favoritesTool.toggleFavorites(e, item);
                this.setFavorites();
            };
        // 切换公共群组或者个人群组的收折状态
        // 切换公共群组或者个人群组的收折状态
        /**
         * @param {?} e
         * @param {?} type
         * @return {?}
         */
        GroupComponent.prototype.toggleVisible =
            // 切换公共群组或者个人群组的收折状态
            /**
             * @param {?} e
             * @param {?} type
             * @return {?}
             */
            function (e, type) {
                if (type === this.publicToken) {
                    this.publicVisible = !this.publicVisible;
                }
                else if (type === this.personalToken) {
                    this.personalVisible = !this.personalVisible;
                }
                e.stopPropagation();
                e.cancelBubble = true;
            };
        /**
         * @param {?} e
         * @return {?}
         */
        GroupComponent.prototype.toggleAll = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                if (!this.allChecked) {
                    this.checkAll();
                }
                else {
                    this.unCheckAll();
                }
                e.preventDefault();
            };
        /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
        GroupComponent.prototype.toggleOne = /**
         * @param {?} data
         * @param {?} e
         * @return {?}
         */
            function (data, e) {
                if (!data.enable) {
                    e.stopPropagation();
                    e.cancelBubble = true;
                    return;
                }
                if (data.checked) {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Remove);
                    }
                    else {
                        this.emitSelections([]);
                    }
                }
                else {
                    if (this.multiSelect) {
                        this.emitSelections(data, ChangeType.Append);
                    }
                    else {
                        this.emitSelections(new Array(data));
                    }
                }
                e.preventDefault();
            };
        /**
         * 全选后处理
         * @param dataArr 全选的值
         */
        /**
         * 全选后处理
         * @return {?}
         */
        GroupComponent.prototype.checkAll = /**
         * 全选后处理
         * @return {?}
         */
            function () {
                var _this = this;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) === -1 && item.enable) {
                        _this.emitSelections(item, ChangeType.Append);
                    }
                }));
            };
        /**
         * 全部取消
         * @param dataArr 取消的数据
         * @returns void
         */
        /**
         * 全部取消
         * @return {?} void
         */
        GroupComponent.prototype.unCheckAll = /**
         * 全部取消
         * @return {?} void
         */
            function () {
                var _this = this;
                /** @type {?} */
                var checkeds = this.items.filter(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item.checked; }));
                checkeds.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.emitSelections(item, ChangeType.Remove);
                }));
            };
        /**
         * 当前行选中
         * @param data 当前行的数据（）
         */
        /**
         * 当前行选中
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
        GroupComponent.prototype.selectLine = /**
         * 当前行选中
         * @param {?} data 当前行的数据（）
         * @return {?}
         */
            function (data) {
                if (this.multiSelect) {
                    this._insertOneIntoSelections(data);
                }
                else {
                    this.selections = [];
                    this.items.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item.checked) {
                            item.checked = false;
                        }
                    }));
                    this._insertOneIntoSelections(data);
                }
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
            };
        /**
         * 单选取消选中
         * @param data 取消选中行
         */
        /**
         * 单选取消选中
         * @param {?} data 取消选中行
         * @return {?}
         */
        GroupComponent.prototype.unSelectLine = /**
         * 单选取消选中
         * @param {?} data 取消选中行
         * @return {?}
         */
            function (data) {
                /** @type {?} */
                var index = CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections);
                if (index > -1) {
                    this.selections.splice(index, 1);
                }
                this.setChecked(data, false);
                if (this.allChecked) {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
        GroupComponent.prototype.emitSelections = /**
         * @private
         * @param {?} selections
         * @param {?=} changeType
         * @param {?=} from
         * @return {?}
         */
            function (selections, changeType, from) {
                if (changeType === void 0) {
                    changeType = ChangeType.ValueChanged;
                }
                if (from === void 0) {
                    from = 'group';
                }
                this.stateMgr.emitSelections(selections, changeType, from);
            };
        /**
         * 选中并插入当前行数据到右侧
         * @param data 当前行的数据
         * @param collection 暂存当前数据的集合
         */
        /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
        GroupComponent.prototype._insertOneIntoSelections = /**
         * 选中并插入当前行数据到右侧
         * @param {?} data 当前行的数据
         * @return {?}
         */
            function (data) {
                // 如果当前数据已经移入右侧数据，则返回。
                if (CommonUtil.findIndex(data[this.primaryField], this.primaryField, this.selections) > -1) {
                    return;
                }
                this.setChecked(data, true);
                this.selections.push(data);
                this.selections = this.selections.slice();
            };
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         */
        /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
        GroupComponent.prototype.toggleChecked = /**
         * 翻页检查：人员展示区的勾选状态与已选人员区是否对应
         * @return {?}
         */
            function () {
                var _this = this;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.selections) > -1 && item.enable) {
                        item.checked = true;
                    }
                    else {
                        item.checked = false;
                    }
                }));
                if (this.isAllChecked()) {
                    this.allChecked = true;
                }
                else {
                    this.allChecked = false;
                }
            };
        /**
         * @private
         * @return {?}
         */
        GroupComponent.prototype.isAllChecked = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var count = 0;
                /** @type {?} */
                var allChecked = false;
                this.items.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.selections.forEach(( /**
                     * @param {?} selection
                     * @return {?}
                     */function (selection) {
                        if (item[_this.primaryField] === selection[_this.primaryField]) {
                            count += 1;
                        }
                    }));
                }));
                if (this.items.filter(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) { return item.enable; })).length === count && count > 0) {
                    allChecked = true;
                }
                return allChecked;
            };
        /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
        GroupComponent.prototype.trackByFn = /**
         * @param {?} index
         * @param {?} item
         * @return {?}
         */
            function (index, item) {
                return index;
            };
        GroupComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'lib-group',
                        template: "<div class=\"candidate flex-left\">\r\n    <perfect-scrollbar *ngIf=\"groupData.personal.length || groupData.public.length\">\r\n        <div class=\"h-100\">\r\n            <div class=\"group_blank_15\"></div>\r\n            <div class=\"group-top-tree\">\r\n                <span class=\"f-icon\" [class.f-icon-minus-outline]=\"publicVisible\"\r\n                    [class.f-icon-plus-outline]=\"!publicVisible\" (click)=\"toggleVisible($event, publicToken)\"></span>\r\n                    {{'organizationSelector.group.publicGroup' | locale}}\r\n            </div>\r\n            <ng-template [ngIf]=\"publicVisible\">\r\n                <div class=\"s-opCell-f\" [class.active]=\"selectedGroupId === item[groupIdField]\" title=\"\"\r\n                    *ngFor=\"let item of groupData.public\" (click)=\"getOrgsByGroup(item, publicToken)\">\r\n                    <div class=\"s-opCell-f-group\">\r\n                        <!--\r\n                        <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"item['avatar']\" [readonly]=\"true\"\r\n                            class=\"s-opCell-a\">\r\n                        </farris-avatar>\r\n                        -->\r\n                        <div class=\"s-opCell-d\">\r\n                            <p class=\"s-opCell-d1\">{{item.title}} {{item.total}}{{'organizationSelector.group.items' | locale}}</p>\r\n                            <p class=\"s-opCell-d2\" title=\"{{item.description}}\">{{item.description}}</p>\r\n                        </div>\r\n                    </div>\r\n                    <!-- <span class=\"span-find-details\">\u67E5\u770B\u8BE6\u60C5</span> -->\r\n                </div>\r\n            </ng-template>\r\n            <div class=\"group_blank_15\"></div>\r\n            <div class=\"group-top-tree\">\r\n                <span class=\"f-icon\" [class.f-icon-minus-outline]=\"personalVisible\"\r\n                    [class.f-icon-plus-outline]=\"!personalVisible\"\r\n                    (click)=\"toggleVisible($event, personalToken)\"></span>\r\n                    {{'organizationSelector.group.privateGroup' | locale}}\r\n            </div>\r\n            <ng-template [ngIf]=\"personalVisible\">\r\n                <div class=\"s-opCell-f\" [class.active]=\"selectedGroupId === item[groupIdField]\"\r\n                    *ngFor=\"let item of groupData.personal\" (click)=\"getOrgsByGroup(item, personalToken)\">\r\n                    <div class=\"s-opCell-f-group\">\r\n                        <!--\r\n                        <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"item['avatar']\" [readonly]=\"true\"\r\n                            class=\"s-opCell-a\">\r\n                        </farris-avatar>\r\n                        -->\r\n                        <div class=\"s-opCell-d\">\r\n                            <p class=\"s-opCell-d1\">{{item.title}} {{item.total}}{{'organizationSelector.group.items' | locale}}</p>\r\n                            <p class=\"s-opCell-d2\" title=\"{{item.description}}\">{{item.description}}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"s-opCell-edit\">\r\n                        <span class=\"f-icon f-icon-new-edit\" (click)=\"editGroup($event, item)\"></span>\r\n                        <span class=\"f-icon f-icon-minus-circle default-light-color\"\r\n                            (click)=\"deleteGroup($event, item)\"></span>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <div *ngIf=\"groupData.personal.length === 0 && groupData.public.length === 0\"\r\n        [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-candidate-nodata\">\r\n        {{'organizationSelector.tabCommon.noOrgData' | locale}}</div>\r\n</div>\r\n<div class=\"candidate flex-right\">\r\n    <div class=\"candidate-title\" *ngIf=\"groupData?.public.length > 0 || groupData?.personal.length > 0\">\r\n        <div class=\"custom-control custom-checkbox mb-2\" *ngIf=\"multiSelect && showCheckAllIcon\">\r\n            <input class=\"custom-control-input\" [id]=\"allIndexId\" type=\"checkbox\" [(ngModel)]=\"allChecked\">\r\n            <label class=\"custom-control-label\" [for]=\"allIndexId\" (click)=\"toggleAll($event)\">{{'organizationSelector.group.checkAll' | locale}}</label>\r\n        </div>\r\n        <div *ngIf=\"!multiSelect\"></div>\r\n        <div (click)=\"toggleGroupOrgDialog(true, currentGroupType)\"\r\n            [ngStyle]=\"{'color': currentGroupType === publicToken ? '#d8d8d8' : '#2a87ff', 'cursor': currentGroupType === publicToken ? 'not-allowed' : 'pointer'}\">\r\n            <span class=\"f-icon f-icon-department\"></span>\r\n            {{'organizationSelector.group.appendMembers' | locale}}\r\n        </div>\r\n    </div>\r\n    <perfect-scrollbar *ngIf=\"items.length!==0\">\r\n        <div class=\"candidate-content\">\r\n            <div *ngFor=\"let data of items; let i = index;trackBy: trackByFn\" class=\"s-selectedPerson\" [ngClass]=\"{'disabledPerson': !data.enable}\">\r\n                <div class=\"custom-control custom-checkbox mb-2\">\r\n                    <input class=\"custom-control-input\" [ngModel]=\"data.checked\" [id]=\"data.indexId\" type=\"checkbox\" [disabled]=\"!data.enable\">\r\n                    <label class=\"custom-control-label\" [for]=\"data.indexId\" (click)=\"toggleOne(data, $event)\">\r\n                        <div style=\"display: flex; height: 32px; margin: -21px 0 0 24px;\">\r\n                            <!-- <farris-avatar [avatarWidth]=\"32\" [avatarHeight]=\"32\" [cover]=\"data.ext1\" [readonly]=\"true\">\r\n                            </farris-avatar> -->\r\n                            <div style=\"margin-left: 11px; margin-top: -2px;  padding-right: 10px; overflow: hidden;\">\r\n                                <p class=\"candidate-content-title\" title=\"{{data.name}}\">\r\n                                    {{data.name}}</p>\r\n                                <p class=\"candidate-content-orgpath\" title=\"{{data.orgAllPath}}\">\r\n                                    {{data.orgAllPath}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </label>\r\n                </div>\r\n                <span class=\"f-icon f-icon-minus-circle deleteBtn\" *ngIf=\"currentGroupType===personalToken\" (click)=\"removeOrg($event, data)\"></span>\r\n                <span class=\"f-icon f-icon-star\" *ngIf=\"enableFavorites\" [class.default-light-color]=\"data.inFavorites\"\r\n                    [class.default-dark-color]=\"!data.inFavorites\" (click)=\"toggleFavorites($event, data)\"></span>\r\n            </div>\r\n\r\n        </div>\r\n    </perfect-scrollbar>\r\n    <div *ngIf=\"items.length===0\" [ngStyle]=\"{'background-image': noDataImg}\" class=\"fp-candidate-nodata\">\r\n        {{'organizationSelector.tabCommon.noOrgData' | locale}}</div>\r\n</div>\r\n\r\n<!--\u7FA4\u7EC4\u5F39\u7A97\u9009\u7EC4\u7EC7--->\r\n<div class=\"s-group-dialog-container\" *ngIf=\"showGroupOrgDialog\">\r\n    <div class=\"s-org-group-title\">\r\n        <span class=\"f-icon f-sidebar-close\" (click)=\"toggleGroupOrgDialog(false)\"></span>{{'organizationSelector.group.appendMembers' | locale}}\r\n    </div>\r\n    <append-group-org #appendOrg style=\"margin-top: 15px;\"\r\n        [primaryField]=\"primaryField\" [enableHierarchicalLoading]=\"enableHierarchicalLoading\"\r\n        [notGetStopOrg]=\"notGetStopOrg\" [layer]=\"layer\" [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\"\r\n        [cascadeCheck]=\"cascadeCheck\" [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\"\r\n        [showCheckAll]=\"showCheckAll\" [selectedLimit]=\"selectedLimit\" [virtualizedLoad]=\"virtualizedLoad\">\r\n    </append-group-org>\r\n    <div class=\"s-org-group-footer\">\r\n        <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\"\r\n            (click)=\"updateGroup()\" />\r\n        <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"toggleGroupOrgDialog(false)\" />\r\n    </div>\r\n</div>\r\n<div class=\"s-help-bg\" *ngIf=\"showGroupOrgDialog\"></div>",
                        styles: [":host{display:-webkit-box;display:flex;height:100%;-webkit-box-flex:1;flex:1;overflow:hidden;position:static}.candidate{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:relative;border-right:1px solid #dee1ea;overflow:hidden}.candidate.flex-left{-webkit-box-flex:0;flex:0 0 42%}.candidate.flex-right{-webkit-box-flex:0;flex:0 0 58%}.candidate .s-opCell-f{display:-webkit-box;display:flex;height:40px;border-radius:6px;padding-left:10px;-webkit-box-pack:justify;justify-content:space-between;margin:1px 5px 0;cursor:pointer}.candidate .s-opCell-f .s-opCell-f-group{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}.candidate .s-opCell-f.active,.candidate .s-opCell-f:hover{background-color:#eef5ff}.candidate .s-opCell-f:hover .s-opCell-edit{visibility:visible}.candidate .s-opCell-a{margin-top:4px;margin-left:6px}.candidate .s-opCell-d{-webkit-box-flex:1;flex:1;overflow:hidden;margin:1.5px 10px 0}.candidate .s-opCell-d1{line-height:20px;font-size:13px;height:20px;color:#2d2f33;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin:0;padding:0;max-width:210px}.candidate .s-opCell-d2{color:#a8adb8;font-size:12px;line-height:14px;height:14px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin:0;padding:0;max-width:210px}.candidate .s-opCell-f .f-avatar .f-avatar-image{display:block!important}.candidate .fp-candidate-nodata{width:100px;height:100px;text-align:center;background-repeat:no-repeat;background-size:contain;color:#b4bccc;padding-top:110px;position:absolute;left:50%;top:50%;margin:-70px 0 0 -50px}.candidate .s-opCell-f:hover .span-find-details{display:block}.candidate .s-opCell-f .span-find-details{margin-right:5px;line-height:40px;color:#2a87ff;width:60px;display:none}.candidate .s-opCell-f .s-opCell-edit{line-height:40px;width:60px;text-align:center;visibility:hidden}.candidate .s-opCell-f .s-opCell-edit .f-icon-new-edit{margin-right:10px;color:#949aa6}.candidate .s-opCell-f .s-opCell-edit .f-icon-minus-circle{color:#f46160}.candidate .group-top-tree{margin:0 15px 10px;font-size:13px}.candidate .group_blank_15{width:100%;height:15px}.candidate .group-top-tree .f-icon{color:#d5d4d7;margin-right:8px}.candidate .group-top-tree .k-checkbox-label::after,.candidate .group-top-tree .k-checkbox-label::before{top:1px}.candidate .candidate-content{clear:both}.candidate .s-selectedPerson:first-child{margin-top:0}.candidate .s-selectedPerson{min-width:240px;float:left;width:calc(100% - 6px);position:relative;height:40px;padding:5px 12px;margin:0 3px 1px}.candidate .s-selectedPerson:hover{background:#eef5ff;border-radius:5px}.candidate .disabledPerson{color:#a8adb8;background-color:#fafafc}.candidate .disabledPerson:hover{background:#fafafc!important}.candidate .f-icon{font-size:14px}.candidate .s-selectedPerson .deleteBtn{font-size:14px;color:#f46160;cursor:pointer;position:absolute;right:60px;top:13px;visibility:hidden}.candidate .s-selectedPerson:hover .deleteBtn{visibility:visible}.candidate .s-selectedPerson .f-icon-star{position:absolute;top:13px;right:15px;font-size:14px}.candidate .s-selectedPerson .default-light-color{color:#f7b500}.candidate .s-selectedPerson .default-dark-color{color:#d8dce6}.candidate .k-checkbox-label::before{top:10px;font-size:16px;width:14px;height:14px}.candidate .k-checkbox-label::after{top:10px;font-size:16px;width:15px;height:14px}.candidate .candidate-content-title{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:13px}.candidate .candidate-content-orgpath{margin:0;font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#c7ccd7}.candidate .candidate-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.candidate .candidate-title .custom-control{margin:10px 0 0 15px;line-height:35px}.candidate .s-selectedPerson .custom-control-label::before{top:8px}.candidate .candidate-title .title-clearall{margin:5px 15px 0 0;color:#2a87ff;cursor:pointer;line-height:35px}.candidate .candidate-title div{line-height:35px;margin:9px 10px 0 0;color:#2a87ff;cursor:pointer}.candidate .saved-group{position:absolute;width:111px;height:26px;line-height:26px;background:#eaedf2;border-radius:5px;text-align:center;font-size:13px;bottom:10px;left:13px;z-index:999;color:#909ba2;cursor:pointer}.candidate .saved-group:hover{color:#2a87ff;background:#eaf4ff}.candidate .saved-group:hover .f-icon{color:#2a87ff}.candidate .saved-group .f-icon{color:#909ba2;margin-right:5px;cursor:pointer;font-size:14px}.s-group-dialog-container{height:520px;width:700px;position:fixed;left:50%;top:50%;margin:-260px 0 0 -350px;background:#fff;padding:15px 20px;border-radius:10px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;z-index:9999}.s-group-dialog-container .s-org-group-footer{margin-top:15px}.s-help-bg{background:rgb(0 0 0 / 15%);position:fixed;left:0;top:0;right:0;bottom:0;z-index:9997}.s-group-dialog-container .s-org-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.s-group-dialog-container .s-org-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.s-group-dialog-container .s-org-group-footer .fr{float:right;height:32px}"]
                    }] }
        ];
        /** @nocollapse */
        GroupComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: FavoritesTool },
                { type: StateMgrTool },
                { type: core.ChangeDetectorRef },
                { type: core.Injector, decorators: [{ type: core.Optional }] }
            ];
        };
        GroupComponent.propDecorators = {
            appendOrg: [{ type: core.ViewChild, args: ['appendOrg',] }],
            primaryField: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            absOrgType: [{ type: core.Input }],
            busNum: [{ type: core.Input }],
            enableFavorites: [{ type: core.Input }],
            notGetStopOrg: [{ type: core.Input }],
            groupApiUrl: [{ type: core.Input }],
            enableHierarchicalLoading: [{ type: core.Input }],
            cascadeCheck: [{ type: core.Input }],
            cascadeDown: [{ type: core.Input }],
            cascadeUp: [{ type: core.Input }],
            keepSelect: [{ type: core.Input }],
            layer: [{ type: core.Input }],
            selectedLimit: [{ type: core.Input }],
            showCheckAll: [{ type: core.Input }],
            virtualizedLoad: [{ type: core.Input }],
            isActiveTab: [{ type: core.Input }],
            filterType: [{ type: core.Input }],
            disableOrgList: [{ type: core.Input }],
            groupChange: [{ type: core.Output }]
        };
        return GroupComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/append-group-org/appendorg.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AppendGroupOrgComponent = /** @class */ (function () {
        function AppendGroupOrgComponent(apiService, cdr, injector, ngZone, msgService) {
            var _this = this;
            this.apiService = apiService;
            this.cdr = cdr;
            this.injector = injector;
            this.ngZone = ngZone;
            this.msgService = msgService;
            this.baseCls = true;
            this.primaryField = 'orgId';
            this.pathLength = 4;
            this.originalTreeData = [];
            this.treeListData = [];
            this.treeTableCols = [];
            this.initLoad = true;
            this.loadingService = null;
            this.localeService = null;
            this.beforeClickNode = ( /**
             * @param {?} e
             * @return {?}
             */function (e) {
                if (!_this.enableHierarchicalLoading) {
                    return rxjs.of(true);
                }
                /*
                if (!this.multiSelect) {
                    if (e.rowNode.isSelected) {
                        this.currentOrgs = [];
                    } else {
                        this.currentOrgs = new Array(e.rowNode.node.data);
                    }
                    return of(false);
                }
                */
                // const param: OrgRequestParam = {
                //     absOrgType: this.absOrgType,
                //     notGetStopOrg: this.notGetStopOrg,
                //     getCurUser: false,
                //     parentID: e.rowNode.id,
                //     withAllSub: true,
                //     getOrgAllPath: true
                // };
                // return this.apiService.getOrganization(param).pipe(
                //     switchMap(
                //         (data: any) => {
                //             // if (data['data'].length > this.selectedLimit && !e.rowNode.isChecked) {
                //             //     this.msgService.show('warning', `亲，一次性选择了超过${this.selectedLimit}条数据~`, true);
                //             //     return of(false)
                //             // }
                //             // if (!e.rowNode.isChecked) {
                //             //     data.data.forEach(item => {
                //             //         if (CommonUtil.findIndex(item[this.primaryField], this.primaryField, this.currentOrgs) === -1) {
                //             //             this.currentOrgs.push(item);
                //             //         }
                //             //     })
                //             // } else {
                //             //     this.currentOrgs.forEach((org, index) => {
                //             //         data.data.forEach(item => {
                //             //             if (org[this.primaryField] === item[this.primaryField]) {
                //             //                 this.currentOrgs.splice(index, 1);
                //             //             }
                //             //         });
                //             //     });
                //             // }
                //             // this.cdr.detectChanges();
                //             return of(true);
                //         }
                //     )
                // );
            });
            this.cdr = this.injector.get(core.ChangeDetectorRef);
            this.loadingService = this.injector.get(uiLoading.LoadingService, null);
            this.localeService = this.injector.get(uiLocale.LocaleService);
            if (!this.localeService.langData['organizationSelector']) {
                this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
            }
        }
        /**
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.treeTableCols = [
                    { field: 'name', title: this.localeService.getValue("organizationSelector.organization.orgName"), template: this.orgName },
                    { field: 'code', title: this.localeService.getValue("organizationSelector.organization.orgCode") }
                ];
                if (this.initLoad) {
                    if (this.enableHierarchicalLoading) {
                        this.hlAssembleData();
                    }
                    else {
                        this.assembleData();
                    }
                    this.initLoad = false;
                }
            };
        /**
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
            };
        /**
         * @param {?} e
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.changeSelections = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                //this.multiSelect ? this.toggleChecked(e) : this.toggleSelected(e);
                this.toggleChecked(e);
            };
        /**
         * @param {?} e
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.toggleChecked = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                /** @type {?} */
                var checkeds = [];
                e && e.instance && e.instance.checkeds.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    checkeds.push(item.data);
                }));
                this.currentOrgs = _.cloneDeep(checkeds);
                if (this.currentOrgs.length == 0) {
                    this.orgTree.clearCheckeds();
                    this.orgTree.clearSelections();
                    this.orgTree.detectChanges();
                }
            };
        /**
         * @param {?} e
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.toggleSelected = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                /** @type {?} */
                var selected = [];
                e && e.instance && e.instance.selections.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    selected.push(item.data);
                }));
                this.currentOrgs = _.cloneDeep(selected);
                if (this.currentOrgs.length == 0) {
                    this.orgTree.clearCheckeds();
                    this.orgTree.clearSelections();
                    this.orgTree.detectChanges();
                }
            };
        // 分层加载组织树
        // 分层加载组织树
        /**
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.hlAssembleData =
            // 分层加载组织树
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    notGetStopOrg: this.notGetStopOrg,
                    getOrgAllPath: true
                };
                /** @type {?} */
                var layerList = [];
                /** @type {?} */
                var layer = this.layer;
                while (layer > 0) {
                    layerList.push(layer);
                    layer -= 1;
                }
                param.layerList = layerList;
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res || !res.data) {
                        return;
                    }
                    _this.originalTreeData = res.data;
                    if (res && res.curAbsUser && res.curAbsUser.orgAllPathInfo) {
                        /** @type {?} */
                        var curUserOrgPath = (( /** @type {?} */(res.curAbsUser.orgAllPathInfo))).filter(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            return !res.data.find(( /**
                             * @param {?} data
                             * @return {?}
                             */function (data) { return data[_this.primaryField] == item[_this.primaryField]; }));
                        }));
                        res.data = res.data.concat(curUserOrgPath || []);
                    }
                    _this.treeListData = _this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);
                    _this.orgTree.loadData(_this.treeListData);
                    //this.tickCheckedNodes();
                    _this.cdr.detectChanges();
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                }));
            };
        // 全加载组织树
        // 全加载组织树
        /**
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.assembleData =
            // 全加载组织树
            /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    notGetStopOrg: this.notGetStopOrg,
                    getOrgAllPath: true
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (!res || !res.data) {
                        return;
                    }
                    _this.originalTreeData = res.data;
                    _this.treeListData = _this.dataToTree(res.data, 1, res.curAbsUser.defaultOrgPath);
                    _this.orgTree.loadData(_this.treeListData);
                    // this.tickCheckedNodes();
                    _this.cdr.detectChanges();
                    if (_this.loadingService) {
                        _this.loadingService.close();
                    }
                }));
            };
        // 确定组织是否在当前组织树内
        // 确定组织是否在当前组织树内
        /**
         * @private
         * @param {?} treeListData
         * @param {?} item
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.inTreeList =
            // 确定组织是否在当前组织树内
            /**
             * @private
             * @param {?} treeListData
             * @param {?} item
             * @return {?}
             */
            function (treeListData, item) {
                for (var i = 0; i < treeListData.length; i++) {
                    if (treeListData[i].id === item[this.primaryField]) {
                        item.inTreeList = true;
                        break;
                    }
                    if (treeListData[i].children.length) {
                        this.inTreeList(treeListData[i].children, item);
                    }
                }
            };
        // 在当前组织树内勾选所有已在群组内的组织
        // 在当前组织树内勾选所有已在群组内的组织
        /**
         * @private
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.tickCheckedNodes =
            // 在当前组织树内勾选所有已在群组内的组织
            /**
             * @private
             * @return {?}
             */
            function () {
                var _this = this;
                /** @type {?} */
                var ids = [];
                this.currentOrgs.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    _this.inTreeList(_this.treeListData, item);
                    if (!!item.inTreeList) {
                        ids.push(item[_this.primaryField]);
                    }
                }));
                this.ngZone.runOutsideAngular(( /**
                 * @return {?}
                 */function () {
                    setTimeout(( /**
                     * @return {?}
                     */function () {
                        if (!ids.length) {
                            return;
                        }
                        if (_this.multiSelect) {
                            _this.orgTree.checkedNodes(ids, true, true);
                        }
                        else {
                            if (ids.length > 1) {
                                _this.msgService.show('warning', _this.localeService.getValue("organizationSelector.errorMessage.multiSelect"), true);
                                return;
                            }
                            _this.orgTree.clearSelections();
                            _this.orgTree.detectChanges();
                            _this.orgTree.selectNode(ids.join());
                        }
                    }));
                }));
            };
        /**
        * 组织数据转换
        * @param plainSource 接口原始数据
        * @param layer 层级
        * @returns 返回树形接口的数据
        */
        /**
         * 组织数据转换
         * @private
         * @param {?} plainSource 接口原始数据
         * @param {?} layer 层级
         * @param {?=} expandedPath
         * @return {?} 返回树形接口的数据
         */
        AppendGroupOrgComponent.prototype.dataToTree = /**
         * 组织数据转换
         * @private
         * @param {?} plainSource 接口原始数据
         * @param {?} layer 层级
         * @param {?=} expandedPath
         * @return {?} 返回树形接口的数据
         */
            function (plainSource, layer, expandedPath) {
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var treeSource = this.dealData(plainSource, expandedPath ? expandedPath : '');
                // const parents = treeSource.filter(item => {
                //     return item.data.layer === layer;
                // });
                // this.treeData(parents, treeSource, 1);
                return treeSource;
            };
        /**
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.dealDataWhenExpandTreeNode = /**
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
            function (data, expandedPath) {
                var _this = this;
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var pathList = [];
                if (expandedPath != '') {
                    /** @type {?} */
                    var maxLength = expandedPath.length / this.pathLength;
                    if (this.enableHierarchicalLoading) {
                        maxLength -= 1;
                    }
                    for (var a = 0; a < maxLength; a++) {
                        pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });
                    }
                }
                /** @type {?} */
                var newDatas = [];
                if (data.length) {
                    data.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        /** @type {?} */
                        var newsDataObj = {
                            data: {
                                orgId: item[_this.primaryField],
                                name: item.name,
                                path: item.path,
                                code: item.code,
                                layer: Number(item.layer),
                                orgAllPath: item.orgAllPath,
                                inFavorites: item.inFavorites
                            },
                            expanded: true,
                            children: []
                        };
                        // let expanded = [];
                        // if (this.enableHierarchicalLoading) {
                        //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);
                        // }
                        // if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                        //     newsDataObj.expanded = true;
                        // } else {
                        //     newsDataObj.expanded = false;
                        //     if (this.enableHierarchicalLoading && item.isDetail === '0') {
                        //         newsDataObj.leaf = false;
                        //     }
                        // }
                        if (Number(item.layer) >= _this.layer) {
                            newsDataObj.expanded = false;
                        }
                        if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                            newsDataObj.expanded = true;
                        }
                        if (_this.enableHierarchicalLoading && item.isDetail === '0') {
                            newsDataObj.leaf = false;
                        }
                        newDatas.push(newsDataObj);
                    }));
                }
                return newDatas;
            };
        // 预处理组织数据
        // 预处理组织数据
        /**
         * @private
         * @param {?} data
         * @param {?=} expandedPath
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.dealData =
            // 预处理组织数据
            /**
             * @private
             * @param {?} data
             * @param {?=} expandedPath
             * @return {?}
             */
            function (data, expandedPath) {
                var _this = this;
                if (expandedPath === void 0) {
                    expandedPath = '';
                }
                /** @type {?} */
                var pathList = [];
                if (expandedPath != '') {
                    /** @type {?} */
                    var maxLength = expandedPath.length / this.pathLength;
                    if (this.enableHierarchicalLoading) {
                        maxLength -= 1;
                    }
                    for (var a = 0; a < maxLength; a++) {
                        pathList.push({ path: expandedPath.substring(0, 4 * (a + 1)) });
                    }
                }
                /** @type {?} */
                var nodes = new Map();
                /** @type {?} */
                var newDatas = [];
                if (data.length) {
                    data.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        // const newsDataObj: any = {
                        //     data: {
                        //         orgId: item[this.primaryField],
                        //         name: item.name,
                        //         path: item.path,
                        //         code: item.code,
                        //         layer: Number(item.layer),
                        //         orgAllPath: item.orgAllPath,
                        //         inFavorites: item.inFavorites
                        //     },
                        //     expanded: true,
                        //     children: []
                        // };
                        // // let expanded = [];
                        // // if (this.enableHierarchicalLoading) {
                        // //     this.nodeExpanded(newsDataObj, this.treeListData, expanded);
                        // // }
                        // if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1) {
                        //     newsDataObj.expanded = true;
                        // } else {
                        //     newsDataObj.expanded = false;
                        //     if (this.enableHierarchicalLoading && item.isDetail === '0') {
                        //         newsDataObj.leaf = false;
                        //     }
                        // }
                        // // todo 分层加载需要
                        // //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {
                        //     //newsDataObj.leaf = false;
                        //    // newsDataObj.expanded = false;
                        // //}
                        // newDatas.push(newsDataObj);
                        /** @type {?} */
                        var path = item['path'];
                        /** @type {?} */
                        var parentPath = Number(item['layer']) > 1 ? (( /** @type {?} */(item['path']))).slice(0, 4 * (Number(item['layer']) - 1)) : 'top';
                        if (!nodes[path]) {
                            nodes[path] = { children: [] };
                        }
                        nodes[path] = {
                            data: {
                                orgId: item[_this.primaryField],
                                name: item.name,
                                path: item.path,
                                code: item.code,
                                layer: Number(item.layer),
                                orgAllPath: item.orgAllPath,
                                inFavorites: item.inFavorites
                            },
                            expanded: true,
                            children: nodes[path]['children']
                        };
                        if (CommonUtil.findIndex(item.path, 'path', pathList) !== -1 || Number(item.layer) < _this.layer) {
                            nodes[path]['expanded'] = true;
                        }
                        else {
                            nodes[path]['expanded'] = false;
                            if (_this.enableHierarchicalLoading && item.isDetail === '0') {
                                nodes[path]['leaf'] = false;
                            }
                        }
                        // todo 分层加载需要
                        //if (this.enableHierarchicalLoading && item.isDetail === '0' && Number(item.layer) >= this.layer) {
                        //newsDataObj.leaf = false;
                        // newsDataObj.expanded = false;
                        //}
                        if (parentPath == 'top') {
                            newDatas.push(nodes[path]);
                        }
                        else {
                            if (!nodes[parentPath]) {
                                nodes[parentPath] = { children: [] };
                            }
                            (( /** @type {?} */(nodes[parentPath]['children']))).push(nodes[path]);
                        }
                    }));
                }
                return newDatas;
            };
        /**
         * 数据转换
         * @param parents 父级节点信息
         * @param treeSource 原始数据信息
         * @param layer 层级
         */
        /**
         * 数据转换
         * @param {?} parents 父级节点信息
         * @param {?} treeSource 原始数据信息
         * @param {?} layer 层级
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.treeData = /**
         * 数据转换
         * @param {?} parents 父级节点信息
         * @param {?} treeSource 原始数据信息
         * @param {?} layer 层级
         * @return {?}
         */
            function (parents, treeSource, layer) {
                var _this = this;
                parents.forEach(( /**
                 * @param {?} parent
                 * @return {?}
                 */function (parent) {
                    /** @type {?} */
                    var parentPath = parent['data']['path'];
                    /** @type {?} */
                    var parentLayer = parent['data']['layer'];
                    treeSource.forEach(( /**
                     * @param {?} item
                     * @return {?}
                     */function (item) {
                        if (item && item['data'] && item['data']['path']) {
                            /** @type {?} */
                            var itemPath = item['data']['path'];
                            /** @type {?} */
                            var itemLayer = item['data']['layer'];
                            /** @type {?} */
                            var targetPath = void 0;
                            if (itemPath && itemPath.length > parentPath.length) {
                                targetPath = itemPath.substr(0, Number(layer) * 4);
                            }
                            if (parentPath === targetPath && parentLayer === itemLayer - 1) {
                                parent['children'].push(item);
                            }
                            if (parentPath === targetPath) {
                                _this.treeData([item], treeSource, Number(layer) + 1);
                            }
                        }
                    }));
                }));
            };
        // 监听组织树展开事件
        // 监听组织树展开事件
        /**
         * @param {?} obj
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.listenTreeExpand =
            // 监听组织树展开事件
            /**
             * @param {?} obj
             * @return {?}
             */
            function (obj) {
                // 分层加载
                if (this.enableHierarchicalLoading && obj.children.length === 0) {
                    this.getOrganizationByParentNode(obj);
                }
            };
        // 分层加载时，获取下级组织数据并为当前组织树添加子节点
        // 分层加载时，获取下级组织数据并为当前组织树添加子节点
        /**
         * @param {?} parentNode
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.getOrganizationByParentNode =
            // 分层加载时，获取下级组织数据并为当前组织树添加子节点
            /**
             * @param {?} parentNode
             * @return {?}
             */
            function (parentNode) {
                var _this = this;
                if (this.loadingService) {
                    this.loadingService.show();
                }
                /** @type {?} */
                var param = {
                    absOrgType: this.absOrgType,
                    parentID: parentNode.id,
                    notGetStopOrg: this.notGetStopOrg,
                    getCurUser: false,
                    getOrgAllPath: true
                };
                this.apiService.getOrganization(param).subscribe(( /**
                 * @param {?} res
                 * @return {?}
                 */function (res) {
                    if (res && res.data) {
                        /** @type {?} */
                        var newDatas_1 = [];
                        res.data.forEach(( /**
                         * @param {?} item
                         * @return {?}
                         */function (item) {
                            if (CommonUtil.findIndex(item[_this.primaryField], _this.primaryField, _this.originalTreeData) === -1) {
                                item.selectable = true;
                                _this.originalTreeData.push(item);
                            }
                            newDatas_1.push(item);
                        }));
                        /** @type {?} */
                        var nodes = _this.dealDataWhenExpandTreeNode(newDatas_1);
                        _this.orgTree.appendChildren(nodes, parentNode);
                        _this.orgTree.detectChanges();
                        //this.tickCheckedNodes();
                        if (_this.loadingService) {
                            _this.loadingService.close();
                        }
                    }
                }));
            };
        // 返回已经该节点是否展开过
        // 返回已经该节点是否展开过
        /**
         * @private
         * @param {?} item
         * @param {?} arr
         * @param {?} expanded
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.nodeExpanded =
            // 返回已经该节点是否展开过
            /**
             * @private
             * @param {?} item
             * @param {?} arr
             * @param {?} expanded
             * @return {?}
             */
            function (item, arr, expanded) {
                for (var i = 0; i < arr.length; i++) {
                    if (item.data.id === arr[i].data.id) {
                        expanded[0] = arr[i].expanded;
                    }
                    else if (arr[i].children.length) {
                        this.nodeExpanded(item, arr[i].children, expanded);
                    }
                }
            };
        // 展开节点
        // 展开节点
        /**
         * @private
         * @param {?} treeData
         * @param {?} path
         * @param {?} layer
         * @return {?}
         */
        AppendGroupOrgComponent.prototype.expandTreeNode =
            // 展开节点
            /**
             * @private
             * @param {?} treeData
             * @param {?} path
             * @param {?} layer
             * @return {?}
             */
            function (treeData, path, layer) {
                var _this = this;
                treeData.forEach(( /**
                 * @param {?} node
                 * @return {?}
                 */function (node) {
                    if (path.includes(node.data.path)) {
                        _this.orgTree.expandNode(node.data.id);
                    }
                    if (node.data.layer < layer && node.children.length) {
                        _this.expandTreeNode(node.children, path, layer);
                    }
                }));
            };
        AppendGroupOrgComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'append-group-org',
                        template: "<!--\r\n<div style=\"background: #f9f9fc; display: flex; justify-content: space-between; border-bottom: 1px solid #EAEDF3\">\r\n    <span style=\"line-height: 22px;margin-left: 10px;font-weight: 600;color: #2a87ff;border-bottom: 2px solid #2a87ff;\r\n    padding: 8px 0;\">\u7EC4\u7EC7\u67B6\u6784</span>\r\n    <input-group style=\"width: 240px; margin: 6px 10px 6px 0;\"\r\n        [placeholder]=\"searchPlaceholder\" [(value)]=\"searchText\" [groupText]=\"groupIcon\" (enterHandle)=\"onSearch({pageIndex: 1})\"\r\n        (clickHahndle)=\"onSearch({pageIndex: 1})\" (keyup)=\"listenSearchText($event)\" (clear)=\"searchClear()\">\r\n    </input-group>\r\n</div>\r\n-->\r\n<farris-treetable #orgTree style=\"cursor:pointer\" [width]=\"'100%'\" [data]=\"treeListData\" [idField]=\"primaryField\"\r\n    [columns]=\"treeTableCols\" [singleSelect]=\"false\" [showBorder]=\"false\" [showCheckbox]=\"true\"\r\n    [showIcon]=\"false\" [showHeader]=\"true\" [fixedHeader]=\"true\" [disabled]=\"false\" [fit]=\"true\" [checkOnSelect]=\"true\" [selectOnCheck]=\"true\"\r\n    [striped]=\"true\" [cascadeCheck]=\"cascadeCheck\" [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [virtualized]=\"true\"\r\n    [keepSelect]=\"keepSelect\" [showCheckAll]=\"showCheckAll\" [onlySelectSelf]=\"true\"\r\n    (nodeChecked)=\"changeSelections($event)\" (nodeUnChecked)=\"changeSelections($event)\"\r\n    (nodeSelected)=\"changeSelections($event)\" (nodeUnSelect)=\"changeSelections($event)\"\r\n    (expand)=\"listenTreeExpand($event)\" class=\"fos-treetable\">\r\n</farris-treetable>\r\n\r\n<!-- \u7EC4\u7EC7\u6811\u6A21\u677F -->\r\n<ng-template #orgName let-ctx>\r\n    <span style=\"font-size: 13px;\" title=\"{{ctx.node.data.name}}\">{{ctx.node.data.name}}</span>\r\n</ng-template>",
                        styles: [":host{height:100%;overflow:hidden;display:-webkit-box;display:flex;background:#fff;width:100%;border-radius:10px;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;border:1px solid #dee1ea}"]
                    }] }
        ];
        /** @nocollapse */
        AppendGroupOrgComponent.ctorParameters = function () {
            return [
                { type: ApiService },
                { type: core.ChangeDetectorRef },
                { type: core.Injector },
                { type: core.NgZone },
                { type: uiMessager.MessagerService }
            ];
        };
        AppendGroupOrgComponent.propDecorators = {
            baseCls: [{ type: core.HostBinding, args: ['class.f-utils-fill-flex-column',] }],
            orgTree: [{ type: core.ViewChild, args: ['orgTree',] }],
            orgName: [{ type: core.ViewChild, args: ['orgName',] }],
            primaryField: [{ type: core.Input }],
            enableHierarchicalLoading: [{ type: core.Input }],
            notGetStopOrg: [{ type: core.Input }],
            layer: [{ type: core.Input }],
            multiSelect: [{ type: core.Input }],
            absOrgType: [{ type: core.Input }],
            cascadeCheck: [{ type: core.Input }],
            cascadeDown: [{ type: core.Input }],
            cascadeUp: [{ type: core.Input }],
            keepSelect: [{ type: core.Input }],
            showCheckAll: [{ type: core.Input }],
            selectedLimit: [{ type: core.Input }],
            pathLength: [{ type: core.Input }],
            virtualizedLoad: [{ type: core.Input }]
        };
        return AppendGroupOrgComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/grid-organization-selector/grid-organization-selector.component.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var organizationSelectorDefautOption = {
        absOrgType: 'System_organization',
        readonly: false,
        placeholder: '请选择',
        busNum: 'common',
        primaryField: 'orgId',
        displayField: 'name'
    };
    var GridOrganizationSelectorComponent = /** @class */ (function (_super) {
        __extends(GridOrganizationSelectorComponent, _super);
        function GridOrganizationSelectorComponent(render, el, rts, utils, injector) {
            var _this = _super.call(this, render, el, injector) || this;
            _this.rts = rts;
            _this.utils = utils;
            _this.lookupFieldMap = ( /**
             * @param {?} helpData
             * @param {?} mapFields
             * @param {?} dataObj
             * @return {?}
             */function (helpData, mapFields, dataObj) {
                if (mapFields) {
                    /** @type {?} */
                    var helpFields = Object.keys(mapFields);
                    helpFields.forEach(( /**
                     * @param {?} helpField
                     * @return {?}
                     */function (helpField) {
                        /** @type {?} */
                        var val = '';
                        if (helpData) {
                            if (helpData instanceof Array) {
                                val = helpData.map(( /**
                                 * @param {?} data
                                 * @return {?}
                                 */function (data) { return _this.utils.getValue(helpField, data); })).join(',');
                            }
                            else {
                                val = _this.utils.getValue(helpField, helpData);
                            }
                        }
                        mapFields[helpField].split(',').forEach(( /**
                         * @param {?} ff
                         * @return {?}
                         */function (ff) {
                            /** @type {?} */
                            var formField = _.trim(ff);
                            _this.utils.setValue(dataObj, formField, val);
                        }));
                    }));
                }
            });
            return _this;
        }
        /**
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                _super.prototype.ngOnInit.call(this);
                this.options = Object.assign({}, organizationSelectorDefautOption, _.omitBy(this.options, ( /**
                 * @param {?} itemValue
                 * @return {?}
                 */function (itemValue) { return _.isUndefined(itemValue) || _.isNull(itemValue); })));
                this.instance.selectedData = new core.EventEmitter();
                this.instance.clear = new core.EventEmitter();
            };
        /**
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.inputElement = this.el.nativeElement;
                _super.prototype.ngAfterViewInit.call(this);
                if (this.instance.ngControl &&
                    this.instance.ngControl.formDirective &&
                    this.instance.ngControl.formDirective.form &&
                    this.instance.ngControl.formDirective.form.bindingData) {
                    this.bindingData = this.instance.ngControl.formDirective.form.bindingData;
                    this.bindingData.setValue = ( /**
                     * @param {?} fieldPath
                     * @return {?}
                     */function (fieldPath) {
                        return _this.utils.setValue(fieldPath.join('.'), _this.bindingData, true);
                    });
                    this.bindingData.getValue = ( /**
                     * @param {?} fieldPath
                     * @return {?}
                     */function (fieldPath) {
                        return _this.utils.getValue(fieldPath.join('.'), _this.bindingData, true);
                    });
                }
            };
        /**
         * @param {?} selectedRow
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.updateControlValue = /**
         * @param {?} selectedRow
         * @return {?}
         */
            function (selectedRow) {
                if (this.instance.mapFields && this.bindingData) {
                    this.lookupFieldMap(selectedRow, this.instance.mapFields, this.bindingData);
                }
            };
        /**
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.inputClear = /**
         * @return {?}
         */
            function () {
                this.updateControlValue(null);
                this.instance.clear.emit();
                // 设计器上配置的清空事件
                if (this.options.inputClear) {
                    this.options.inputClear();
                }
            };
        /**
         * @param {?} removedItem
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.tagRemoved = /**
         * @param {?} removedItem
         * @return {?}
         */
            function (removedItem) {
                var _this = this;
                /** @type {?} */
                var mapFields = this.instance.mapFields;
                /** @type {?} */
                var helpFields = Object.keys(mapFields);
                /** @type {?} */
                var bindingData = _.cloneDeep(this.bindingData);
                /** @type {?} */
                var selectedData = [];
                helpFields.forEach(( /**
                 * @param {?} key
                 * @return {?}
                 */function (key) {
                    /** @type {?} */
                    var value = _this.utils.getValue(mapFields[key], bindingData);
                    /** @type {?} */
                    var vArr = value.split(',');
                    vArr.splice(removedItem.deleteIndex, 1);
                    vArr.forEach(( /**
                     * @param {?} v
                     * @param {?} i
                     * @return {?}
                     */function (v, i) {
                        if (!selectedData[i]) {
                            selectedData.push({ index: i });
                            selectedData[i][key] = v;
                        }
                        else {
                            selectedData[i][key] = v;
                        }
                    }));
                    value = vArr.join(',');
                    _this.utils.setValue(_this.bindingData, mapFields[key], value);
                }));
                if (selectedData.length) {
                    this.instance.selectedData.emit(selectedData);
                }
                else {
                    this.instance.clear.emit();
                }
                // 设计器上配置的删除单个标签事件
                if (this.options.tagRemoved) {
                    this.options.tagRemoved(this.eventPrams(removedItem));
                }
            };
        /**
         * @param {?} changeData
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.selectionsChange = /**
         * @param {?} changeData
         * @return {?}
         */
            function (changeData) {
                /** @type {?} */
                var formedSelections = this.formSelectedRowData();
                this.updateControlValue(formedSelections);
                this.instance.selectedData.emit(formedSelections);
                // 设计器上配置的选中数据后事件
                if (this.options.selectionsChange) {
                    this.options.selectionsChange(this.eventPrams(changeData));
                }
            };
        /**
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.formSelectedRowData = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var selectedRowData = [];
                this.instance.selections.forEach(( /**
                 * @param {?} item
                 * @return {?}
                 */function (item) {
                    /** @type {?} */
                    var defaultDisplayName = _this.instance.displayField ? item[_this.instance.displayField] : "" + item.name;
                    /** @type {?} */
                    var displayName = _this.instance.formatFn ? _this.instance.formatFn(item) : defaultDisplayName;
                    selectedRowData.push(Object.assign({}, item, { displayName: displayName }));
                }));
                return selectedRowData.length ? selectedRowData : null;
            };
        /**
         * @private
         * @param {?} $event
         * @return {?}
         */
        GridOrganizationSelectorComponent.prototype.eventPrams = /**
         * @private
         * @param {?} $event
         * @return {?}
         */
            function ($event) {
                /** @type {?} */
                var p = this.eventParams($event);
                p['instance'] = this.instance;
                p['editor'] = this;
                return p;
            };
        GridOrganizationSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'grid-organization-selector',
                        template: "<div [formGroup]=\"group\" class=\"f-datagrid-cell-formgroup farris-group-auto\">\r\n    <farris-organization-selector #orgSelection style=\"width: 100%\"\r\n    [placeholder]=\"options.placeholder\" [readonly]=\"options.readonly\" [absOrgType]=\"options.absOrgType\"\r\n    [multiSelect]=\"options.multiSelect\"  [mapFields]=\"options.mapFields\" [formControlName]=\"column.field\" \r\n    [primaryField]=\"options.primaryField\" [displayField]=\"options.displayField\" [formatFn]=\"options.formatter\"\r\n    [layer]=\"options.expandLevel\" [enableHierarchicalLoading]=\"options.enableHierarchicalLoading\"\r\n    [cascadeCheck]=\"options.cascadeCheck\" [cascadeDown]=\"options.cascadeDown\" [cascadeUp]=\"options.cascadeUp\"\r\n    [showTabIds]=\"options.showTabIds\" [activeTabId]=\"options.activeTabId\" [busNum]=\"options.busNum\"\r\n    (inputClear)=\"inputClear()\" (selectionsChange)=\"selectionsChange($event)\" (tagRemoved)=\"tagRemoved($event)\">\r\n    </farris-organization-selector>\r\n</div>\r\n",
                        styles: [""]
                    }] }
        ];
        /** @nocollapse */
        GridOrganizationSelectorComponent.ctorParameters = function () {
            return [
                { type: core.Renderer2 },
                { type: core.ElementRef },
                { type: uiCommon.RuntimeStateService },
                { type: uiCommon.CommonUtils },
                { type: core.Injector }
            ];
        };
        GridOrganizationSelectorComponent.propDecorators = {
            instance: [{ type: core.ViewChild, args: ['orgSelection',] }]
        };
        return GridOrganizationSelectorComponent;
    }(uiDatagridEditors.DatagridBaseEditorDirective));
    /** @type {?} */
    var OrganizationSelectorDataGridEditorProvider = { provide: uiDatagrid.GRID_EDITORS, useValue: { name: 'OrganizationSelector', value: GridOrganizationSelectorComponent }, multi: true };

    /**
     * @fileoverview added by tsickle
     * Generated from: lib/organization-selector.module.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrganizationSelectorModule = /** @class */ (function () {
        function OrganizationSelectorModule() {
        }
        OrganizationSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [
                            OrganizationSelectorComponent,
                            OrganizationComponent,
                            SelectionComponent,
                            SearchComponent,
                            FavoritesComponent,
                            GroupComponent,
                            AppendGroupOrgComponent,
                            GridOrganizationSelectorComponent
                        ],
                        imports: [
                            common.CommonModule,
                            uiInputGroup.InputGroupModule,
                            uiTreetable.TreeTableModule,
                            uiDialog.FarrisDialogModule,
                            uiTabs.FarrisTabsModule,
                            uiPerfectScrollbar.PerfectScrollbarModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            uiMessager.MessagerModule.forRoot(),
                            uiAvatar.AvatarModule,
                            uiLoading.LoadingModule.forRoot(),
                            uiNotify.NotifyModule.forRoot(),
                            uiCommon.FarrisCommonModule,
                            uiDatagrid.DatagridModule,
                            uiLocale.LocaleModule,
                            uiLanguageTextbox.LanguageTextboxModule,
                            uiDatagridEditors.DatagridEditorsModule
                        ],
                        exports: [
                            OrganizationSelectorComponent,
                            GridOrganizationSelectorComponent
                        ],
                        entryComponents: [
                            OrganizationSelectorComponent,
                            GridOrganizationSelectorComponent
                        ],
                        providers: []
                    },] }
        ];
        return OrganizationSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * Generated from: public-api.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * Generated from: farris-ui-organization-selector.ts
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.ApiService = ApiService;
    exports.FavoritesTool = FavoritesTool;
    exports.StateMgrTool = StateMgrTool;
    exports.OrganizationSelectorComponent = OrganizationSelectorComponent;
    exports.OrganizationSelectorModule = OrganizationSelectorModule;
    exports.OrganizationComponent = OrganizationComponent;
    exports.SearchComponent = SearchComponent;
    exports.SelectionComponent = SelectionComponent;
    exports.FavoritesComponent = FavoritesComponent;
    exports.GridOrganizationSelectorComponent = GridOrganizationSelectorComponent;
    exports.OrganizationSelectorDataGridEditorProvider = OrganizationSelectorDataGridEditorProvider;
    exports.ɵb = AppendGroupOrgComponent;
    exports.ɵa = GroupComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=farris-ui-organization-selector.umd.js.map