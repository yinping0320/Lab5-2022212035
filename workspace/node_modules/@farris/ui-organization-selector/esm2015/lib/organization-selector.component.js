/**
 * @fileoverview added by tsickle
 * Generated from: lib/organization-selector.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, forwardRef, HostBinding, Injector, Input, NgZone, Output, Renderer2, ViewChild, ChangeDetectorRef } from '@angular/core';
import { NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DialogComponent } from '@farris/ui-dialog';
import { ApiService } from '../utils/api.service';
import { CommonUtil } from '../utils/common.tool';
import { FavoritesTool } from '../utils/favorites.tool';
import { ChangeType } from '../utils/index.type';
import { StateMgrTool } from '../utils/state.mgr.tool';
import { Subject } from 'rxjs';
import * as _ from 'lodash-es';
import { debounceTime, distinctUntilChanged, switchMap, tap } from 'rxjs/operators';
import { GroupComponent } from './tab-group/group.component';
import { OrganizationComponent } from './tab-organization/to.component';
import { FavoritesComponent } from './tab-favorites/favorites.component';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { LocaleService } from '@farris/ui-locale';
import { ORGANIZATION_SELECTOR_LOCALE } from '../utils/locale';
export class OrganizationSelectorComponent {
    /**
     * @param {?} render
     * @param {?} injector
     * @param {?} favoritesTool
     * @param {?} apiService
     * @param {?} ngZone
     * @param {?} stateMgr
     */
    constructor(render, injector, favoritesTool, apiService, ngZone, stateMgr) {
        this.render = render;
        this.injector = injector;
        this.favoritesTool = favoritesTool;
        this.apiService = apiService;
        this.ngZone = ngZone;
        this.stateMgr = stateMgr;
        this.baseCls = true;
        this.width = '100%';
        // input框是否显示
        this.showInput = true;
        // 业务标识
        this.busNum = 'common';
        this.multiSelect = true;
        this.placeholder = '请选择';
        this.searchPlaceholder = '请输入编号或名称搜索';
        this.readonly = false;
        // 传入的url
        this.absUserOrgUrl = '/api/runtime/sys/v1.0/absUserOrg';
        this.absRfQueryUrl = '/api/runtime/sys/v1.0/absRecentContacts/query';
        this.absRfModifyUrl = '/api/runtime/sys/v1.0/absRecentContacts/modify';
        this.groupApiUrl = "/api/runtime/sys/v1.0/org-group";
        this.groupExtendUrl = '/platform/runtime/wf/webapp/ng-farris-mobile-ui/extend-org.js';
        /**
         * 数据源类型
         * 默认为： System_organization  系统数据源   获取系统人员、系统组织
         * Administrative_organization  已扩展数据源  获取行政组织、行政人员
         * absOrgType {string}
         * PersonnelSelectorComponent
         */
        this.absOrgType = 'System_organization';
        // 启用分层加载
        this.enableHierarchicalLoading = true;
        // 不包含停用组织
        this.notGetStopOrg = true;
        this.primaryField = 'orgId';
        this.displayField = 'name';
        this.orgIds = [];
        // 展开层级
        this.layer = 1;
        // 是否启用级联选中
        this.cascadeCheck = true;
        // 级联选中下级
        this.cascadeDown = true;
        // 级联选中上级
        this.cascadeUp = false;
        // 显示全选按钮
        this.showCheckAll = false;
        this.keepSelect = false;
        // 一次性最多选中多少条
        this.selectedLimit = 50;
        this.showTabIds = 'organization,favorites';
        this.activeTabId = 'organization';
        // 搜索前端分页50条
        this.searchPageSize = 50;
        /**
         * 多选分隔符
         */
        this.multipleChoiceSeparator = ',';
        this.draggable = true;
        this.virtualizedLoad = false;
        this.dataPermission = false;
        this.dataPermissionIds = [];
        this.filterType = 'none';
        this.selectionsChange = new EventEmitter();
        // 全部清除按钮触发回调
        this.inputClear = new EventEmitter();
        // 标签删除按钮出发回调
        this.tagRemoved = new EventEmitter();
        this.viewType = 'tag'; // 默认为tag标签形式，可支持text，后续改为input类型属性 
        // 默认为tag标签形式，可支持text，后续改为input类型属性 
        this.selections = [];
        this.originalSelections = [];
        this.finalText = [];
        this.lookupIcon = '<i class="f-icon f-icon-lookup"></i>';
        this.searchIcon = '<span class="k-icon k-i-search"></span>';
        this.organizationTabId = 'organization';
        this.groupTabId = 'group';
        this.favoritesTabId = 'favorites';
        this.dialogHeight = 548;
        this.dialogId = 'dialogId';
        this.isShow = false;
        this.confirmToken = false;
        this.hideSearchPanel = true;
        this.searchText = '';
        this.groupDialogOpend = false;
        this.groupDialogTitle = '';
        this.validGroupTitle = true;
        this.groupTitleStream = new Subject();
        this.selectionsShow = false;
        this.orgTabActive = false;
        this.groupTabActive = false;
        this.againstSingleSelect = false;
        this.localeService = null;
        this.languagesArray = [
            { code: 'zh-CHS', name: '中文简体', default: true },
            { code: 'en', name: 'English' },
            { code: 'zh-CHT', name: '中文繁体' }
        ];
        this._disableOrgList = [];
        this.farrisDialogbeforeClose = (/**
         * @return {?}
         */
        () => {
            this.isShow = false;
            if (this.confirmToken) {
                this.originalSelections = _.cloneDeep(this.selections);
            }
            else {
                this.selections = _.cloneDeep(this.originalSelections);
            }
            if (!this.hideSearchPanel || this.searchText) {
                this.searchText = null;
                this.clearSearch();
            }
            this.confirmToken = false;
            return true;
        });
        this.onModelChange = (/**
         * @param {?=} val
         * @return {?}
         */
        (val) => { });
        this.onModelTouched = (/**
         * @param {?=} val
         * @return {?}
         */
        (val) => { });
        this.apiService.absUrl = this.absUserOrgUrl;
        this.apiService.groupApiUrl = this.groupApiUrl;
        this.cdRef = this.injector.get(ChangeDetectorRef);
        this.messageService = this.injector.get(MessagerService, null);
        this.notifyService = this.injector.get(NotifyService, null);
        this.localeService = this.injector.get(LocaleService);
        if (!this.localeService.langData['organizationSelector']) {
            this.localeService.setLocaleData(ORGANIZATION_SELECTOR_LOCALE);
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set disableOrgList(value) {
        if (this.filterType == 'disable') {
            if (typeof value == 'object' && Array.isArray(value)) {
                this._disableOrgList = value;
            }
            else if (typeof value == 'string') {
                this._disableOrgList = value.split(',');
            }
        }
    }
    /**
     * @return {?}
     */
    get disableOrgList() {
        return this._disableOrgList;
    }
    // 自定义过滤feature：不可选中组织，历史属性兼容保留
    /**
     * @param {?} value
     * @return {?}
     */
    set filterOrgList(value) {
        if (typeof value == 'object' && Array.isArray(value)) {
            this._disableOrgList = value;
        }
        else if (typeof value == 'string') {
            this._disableOrgList = value.split(',');
        }
        this.filterType = this._disableOrgList.length ? 'disable' : this.filterType;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    writeValue(obj) {
        if (this.viewType == 'tag') {
            if (!!obj && typeof obj === 'string') {
                this.finalText = obj.split(this.multipleChoiceSeparator);
            }
            else {
                this.finalText = [];
            }
        }
        else if (this.viewType == 'text') {
            this.finalText = obj;
        }
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.onModelChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
        this.onModelTouched = fn;
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        throw new Error('Method not implemented.');
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.initDialogHeight();
        this.listenSelectionsChange();
        this.initTabs();
        this.initGroupSearch();
        this.ngControl = this.injector.get(NgControl, null);
        this.mapFields && this.mapFields2Component();
        this.viewType = this.dataPermission ? 'text' : 'tag';
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.listenWindowResize();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        /** @type {?} */
        const orgIdsChange = changes.orgIds;
        if (orgIdsChange && orgIdsChange.currentValue) {
            this.assembleDataByOrgIds(orgIdsChange.currentValue);
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.selectionsSub.unsubscribe();
    }
    /**
     * @private
     * @param {?} selections
     * @param {?=} changeType
     * @param {?=} from
     * @return {?}
     */
    emitSelections(selections, changeType = ChangeType.ValueChanged, from = 'form') {
        this.stateMgr.emitSelections(selections, changeType, from);
    }
    // 根据字段映射关系获取当前已选组织的id，进而在打开选组织弹窗时进行相应展示
    /**
     * @private
     * @return {?}
     */
    mapFields2Component() {
        /** @type {?} */
        const helpFields = Object.keys(this.mapFields);
        if (!helpFields.includes(this.primaryField)) {
            // this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
            return;
        }
        if (this.ngControl &&
            this.ngControl.formDirective &&
            this.ngControl.formDirective.form &&
            this.ngControl.formDirective.form.bindingData) {
            /** @type {?} */
            const bindingData = this.ngControl.formDirective.form.bindingData;
            if (bindingData.setValue) {
                /** @type {?} */
                const bindingPath = this.ngControl.formDirective.form.bindingPath;
                /** @type {?} */
                let pathArr = [];
                if (bindingPath) {
                    pathArr = bindingPath.split('/').filter((/**
                     * @param {?} n
                     * @return {?}
                     */
                    n => n !== ''));
                }
                /** @type {?} */
                const multiPath = this.mapFields[this.primaryField].split(this.multipleChoiceSeparator);
                /** @type {?} */
                const fieldPaths = pathArr.concat(multiPath[0].split('.'));
                /** @type {?} */
                const ids = bindingData.getValue(fieldPaths);
                if (!ids) {
                    this.emitSelections([]);
                    return;
                }
                this.assembleDataByOrgIds(ids.split(this.multipleChoiceSeparator));
            }
        }
    }
    // 根据传入的组织id数组获取对应的组织
    // 由ngOnChanges()、mapFields2Component()调用
    /**
     * @private
     * @param {?} ids
     * @return {?}
     */
    assembleDataByOrgIds(ids) {
        if (!ids || ids.length === 0) {
            return;
        }
        if (ids && ids.length > 1 && !this.multiSelect) {
            this.againstSingleSelect = true;
            return;
        }
        /** @type {?} */
        const param = {
            absOrgType: this.absOrgType,
            idList: this.filterType == 'disable' ? ids.filter((/**
             * @param {?} id
             * @return {?}
             */
            id => !this._disableOrgList.includes(id))) : ids,
            getOrgAllPath: true,
            getCurUser: false
        };
        this.apiService.getOrganization(param).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            if (res && res.data) {
                if (this.absOrgType == 'System_organization') {
                    this.selections = res.data;
                }
                else {
                    this.selections = res.data.filter((/**
                     * @param {?} data
                     * @return {?}
                     */
                    data => ids.find((/**
                     * @param {?} id
                     * @return {?}
                     */
                    id => id == data[this.primaryField]))));
                }
                if (!this.mapFields) {
                    this.assembleFinalText();
                    if (this.dataPermission) {
                        this.emitSelections(this.selections);
                    }
                }
                else {
                    this.emitSelections(this.selections);
                }
            }
        }));
    }
    // 构造回显至input文本框的内容
    // 在有mapFields的前提下，由assembleDataByOrgIds()调用，clearAll()、removeItem()、returnResult()也会调用
    /**
     * @private
     * @return {?}
     */
    assembleFinalText() {
        this.finalText = [];
        this.selections.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        (item, index) => {
            /** @type {?} */
            const formatedName = this.formatFn && this.formatFn(item);
            /** @type {?} */
            const finalText = formatedName ? formatedName : item[this.displayField];
            this.finalText.push(finalText);
        }));
        this.finalText = this.finalText.slice();
    }
    // 初始化弹窗id及高度
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    initDialogHeight() {
        /** @type {?} */
        const uuid = CommonUtil.newGuid();
        this.dialogId += uuid;
        /** @type {?} */
        const windowInnerHeight = window.innerHeight;
        this.dialogHeight = windowInnerHeight - 60;
        if (this.dialogHeight > 680) {
            this.dialogHeight = 680;
        }
    }
    // 监听selections的变更，变更包含三种形式：valueChange、append、remove
    // 由ngOnInit()调用
    /**
     * @return {?}
     */
    listenSelectionsChange() {
        this.selectionsSub = this.stateMgr.selectionsSubject.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            if (data.changeType === ChangeType.ValueChanged) {
                this.selections = _.cloneDeep(data.value);
            }
            else if (data.changeType === ChangeType.Remove) {
                this.selections = this.selections.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => item[this.primaryField] !== data.value[this.primaryField]));
            }
            else if (data.changeType === ChangeType.Append) {
                CommonUtil.findIndex(data.value[this.primaryField], this.primaryField, this.selections) === -1 ? this.selections.push(data.value) : null;
            }
            this.cdRef.detectChanges();
        }));
    }
    // 根据showTabIds判断是否启用收藏功能、群组功能
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    initTabs() {
        if (!this.showTabIds.includes(this.activeTabId)) {
            this.activeTabId = this.showTabIds.split(',')[0];
        }
        if (this.dataPermission) {
            this.showTabIds = this.organizationTabId;
            this.activeTabId = this.organizationTabId;
            this.orgTabActive = true;
            return;
        }
        this.currentTabId = this.activeTabId;
        if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
            this.enableFavorites = true;
        }
        else {
            this.enableFavorites = false;
        }
        if (this.showTabIds.indexOf(this.groupTabId) !== -1) {
            this.enableGroup = true;
        }
        else {
            this.enableGroup = false;
        }
        if (this.activeTabId == this.organizationTabId) {
            this.orgTabActive = true;
        }
        else if (this.activeTabId == this.groupTabId) {
            this.groupTabActive = true;
        }
        // 启用群组功能扩展函数
        /*
        if (this.enableGroup) {
          const ccwork = window.top.document.createElement("script")
          ccwork.src = this.groupExtendUrl + '?vs=' + Math.random();
          window.document.head.appendChild(ccwork);
        }
        */
    }
    // 判断群组名称是否合法
    // 由ngOnInit()调用
    /**
     * @private
     * @return {?}
     */
    initGroupSearch() {
        if (this.enableGroup) {
            this.groupTitleStream.pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                if (!!data) {
                    this.validGroupTitle = true;
                }
                else {
                    this.validGroupTitle = false;
                }
            }));
        }
    }
    // 当浏览器窗口大小变更时，变更弹窗的大小
    // 由ngAfterViewInit()调用
    /**
     * @return {?}
     */
    listenWindowResize() {
        /** @type {?} */
        const dialogElement = document.querySelector('#' + this.dialogId);
        /** @type {?} */
        let targetElement = null;
        if (!!dialogElement) {
            targetElement = dialogElement.querySelector('.modal-dialog');
        }
        window.addEventListener('resize', (/**
         * @return {?}
         */
        () => {
            if (!!targetElement) {
                /** @type {?} */
                let height = window.innerHeight - 60;
                if (height > 680) {
                    height = 680;
                }
                this.dialogHeight = height;
                /** @type {?} */
                const innerHeight = height + 'px';
                /** @type {?} */
                const marginTop = '-' + height / 2 + 'px';
                this.render.setStyle(targetElement, 'height', innerHeight);
                this.render.setStyle(targetElement, 'margin-top', marginTop);
            }
        }));
    }
    // 初始化组织收藏数据
    // 由showFarrisDialog()调用，即打开选组织弹窗时发送请求
    /**
     * @private
     * @return {?}
     */
    initFavorites() {
        this.favoritesTool.absOrgType = this.absOrgType;
        this.favoritesTool.busNum = this.busNum;
        this.favoritesTool.idField = this.primaryField;
        this.favoritesTool.absRfQueryUrl = this.absRfQueryUrl;
        this.favoritesTool.absRfModifyUrl = this.absRfModifyUrl;
        this.favoritesTool.getFavoritesList().subscribe((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            /** @type {?} */
            const resData = result ? ((/** @type {?} */ (result))).orgData : [];
            this.favoritesTool.favoritesList = resData;
            this.favoritesTool.setFavoritesList(resData);
        }));
    }
    // 打开选组织弹窗
    /**
     * @return {?}
     */
    showFarrisDialog() {
        this.isShow = true;
        this.ngZone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.dialog.show();
                if (this.showTabIds.indexOf(this.favoritesTabId) !== -1) {
                    this.initFavorites();
                }
                if (this.againstSingleSelect) {
                    this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.multiSelect"));
                    return;
                }
                if (this.mapFields && !Object.keys(this.mapFields).includes(this.primaryField)) {
                    this.notifyService.warning(this.localeService.getValue("organizationSelector.errorMessage.mapFields"));
                    return;
                }
                this.stateMgr.emitSelections(this.selections, ChangeType.ValueChanged, 'form');
            }));
        }));
    }
    // input文本框内点击清除按钮时触发
    /**
     * @return {?}
     */
    clearAll() {
        this.selections = [];
        this.assembleFinalText();
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.emitSelections([]);
        this.inputClear.emit();
    }
    // input文本框内删除某一个已选组织时触发
    /**
     * @param {?} data
     * @param {?} index
     * @return {?}
     */
    removeItem(data, index) {
        if (this.selections.length > 0) {
            this.selections.splice(index, 1);
            this.assembleFinalText();
            this.emitSelections(data, ChangeType.Remove);
        }
        else {
            this.finalText = this.finalText.filter((/**
             * @param {?} text
             * @return {?}
             */
            text => text !== data));
        }
        this.onModelChange(this.finalText.join());
        this.onModelTouched(this.finalText.join());
        this.tagRemoved.emit({
            deleteItem: data,
            deleteIndex: index,
            selections: this.selections
        });
    }
    // 清空最近已选组织
    /**
     * @return {?}
     */
    clearSeletions() {
        this.stateMgr.emitSelections([], ChangeType.ValueChanged, 'form');
    }
    // 点击搜索按钮或者敲击回车时触发
    /**
     * @return {?}
     */
    onSearch() {
        if (!!this.searchText) {
            this.hideSearchPanel = false;
            this.onSearchToken = CommonUtil.newGuid();
        }
    }
    // 清空组织搜索内容时触发
    /**
     * @return {?}
     */
    clearSearch() {
        this.hideSearchPanel = true;
        this.onSearchToken = false;
        if (this.currentTabId = this.organizationTabId) {
            this.libOrgTree.farrisTree.clearAll();
            this.libOrgTree.farrisTree.rowHeight = 28;
            if (this.multiSelect) {
                this.libOrgTree.checkOrgTreeNodes();
            }
            else {
                this.libOrgTree.selectOrgTreeNode();
            }
        }
    }
    // 监听搜索框内输入的文本
    /**
     * @param {?} e
     * @return {?}
     */
    listenSearchText(e) {
        if (e.code === 'Backspace' || e.code === 'Delete') {
            if (!this.searchText) {
                this.clearSearch();
            }
        }
    }
    // 监听搜索页的关闭事件，目前只会接收到true
    /**
     * @param {?} e
     * @return {?}
     */
    listenClosePanelChange(e) {
        this.hideSearchPanel = e;
        // 关闭搜索结果页后，需要更新树节点的是否选中状态
        if (this.currentTabId == this.organizationTabId) {
            this.libOrgTree.farrisTree.clearAll();
            this.libOrgTree.farrisTree.rowHeight = 28;
            if (this.multiSelect) {
                this.libOrgTree.checkOrgTreeNodes();
            }
            else {
                this.libOrgTree.selectOrgTreeNode();
            }
        }
    }
    // 关闭保存群组的弹窗时点击“取消”或者右上角叉号触发
    /**
     * @return {?}
     */
    closeGroupDialog() {
        this.groupDialogOpend = false;
        this.editingGroupId = null;
        this.groupTitle = null;
        this.groupNote = null;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    }
    // 在保存群组的弹窗内，修改群组名称时触发，监听keyup事件
    /**
     * @param {?} e
     * @return {?}
     */
    listenGroupTitle(e) {
        this.groupTitleStream.next(this.groupTitle);
    }
    // 选组织的弹窗内有一个“已选”标志，鼠标移上去后会显示已选组织的页面，该页面内有“保存为群组”的按钮，点击后可以打开保存群组的弹窗
    /**
     * @param {?} e
     * @return {?}
     */
    listenOpenGroup(e) {
        this.groupDialogOpend = e;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
    }
    // 点击群组编辑按钮触发，可修改选中群组的名称及描述
    /**
     * @param {?} item
     * @return {?}
     */
    listenGroupChange(item) {
        this.groupDialogOpend = true;
        this.editingGroupId = item.id;
        this.groupTitle = item.title;
        this.groupNote = item.description;
        this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.editGroup");
    }
    // 关闭保存群组的弹窗时点击“确定”触发，将当前已选组织保存为一个新的群组
    /**
     * @return {?}
     */
    saveGroup() {
        if (!this.groupTitle) {
            this.validGroupTitle = false;
            return;
        }
        /** @type {?} */
        const groupId = CommonUtil.newGuid();
        /** @type {?} */
        let groupCode = 'orgGroup_private_';
        groupCode += Math.random().toString(16).substring(2, 10);
        /** @type {?} */
        const addIds = [];
        this.selections.forEach((/**
         * @param {?} selection
         * @return {?}
         */
        selection => {
            addIds.push(selection[this.primaryField]);
        }));
        if (addIds.length > 1000) {
            this.messageService.show('warning', this.localeService.getValue("organizationSelector.errorMessage.limit"), true);
            this.groupDialogOpend = false;
            this.groupTitle = null;
            this.groupNote = null;
            return;
        }
        this.groupDialogOpend = false;
        /** @type {?} */
        const body = {
            groupId,
            groupCode,
            title: this.groupTitle,
            description: this.groupNote,
            absOrgType: this.absOrgType,
            changeType: Number(1)
        };
        if (this.editingGroupId) {
            body.groupId = this.editingGroupId;
            body.changeType = Number(2);
            delete body.groupCode;
            this.updateNameOrNote(body);
            return;
        }
        /** @type {?} */
        const newGroup$ = this.apiService.saveGroup(body);
        newGroup$.pipe(switchMap((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            if (res) {
                this.libOrgGroup.selectedGroupId = groupId;
                this.groupTitle = null;
                this.groupNote = null;
                /** @type {?} */
                const addOrgsInNewGroup$ = this.apiService.saveGroup({ groupId, addIds, deleteIds: [], changeType: Number(3) });
                return addOrgsInNewGroup$.pipe(tap((/**
                 * @param {?} data
                 * @return {?}
                 */
                (data) => {
                    if (data) {
                        this.libOrgGroup.getGroupList({ saveGroup: true });
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                (error) => {
                    throw new Error(this.localeService.getValue("organizationSelector.errorMessage.saveOrganization"));
                })));
            }
        })), tap((/**
         * @return {?}
         */
        () => {
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            this.messageService.show('error', this.localeService.getValue("organizationSelector.errorMessage.saveGroup"), true);
        }))).subscribe();
    }
    /**
     * @private
     * @param {?} param
     * @return {?}
     */
    updateNameOrNote(param) {
        /** @type {?} */
        const updateInfo$ = this.apiService.saveGroup(param);
        updateInfo$.pipe(tap((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            if (data) {
                this.editingGroupId = null;
                this.groupTitle = null;
                this.groupNote = null;
                this.groupDialogTitle = this.localeService.getValue("organizationSelector.group.saveGroup");
                this.libOrgGroup.getGroupList({ updateNameOrNote: true });
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            this.messageService.show('error', this.localeService.getValue("organizationSelector.errorMessage.editGroup"), true);
        }))).subscribe();
    }
    // 点击选组织弹窗的确定或者取消按钮时触发，1为确定，0为取消
    /**
     * @param {?} type
     * @return {?}
     */
    returnResult(type) {
        /** @type {?} */
        let finalText = '';
        if (!!type) {
            this.confirmToken = true;
            this.assembleFinalText();
            finalText = this.finalText.join();
            if (this.selections && this.selections.length) {
                this.selectionsChange.emit({
                    selections: this.selections
                });
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
            }
            else {
                this.onModelChange(finalText);
                this.onModelTouched(finalText);
                this.selectionsChange.emit({
                    selections: this.selections
                });
            }
        }
        else {
            if (this.mapFields) {
                this.mapFields2Component();
            }
            else {
                this.assembleDataByOrgIds(this.orgIds);
            }
        }
        // this.orgIds = [];
        this.dialog.close();
        this.isShow = false;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    changeTabs(e) {
        if (!this.hideSearchPanel) {
            this.hideSearchPanel = true;
            this.onSearchToken = false;
        }
        this.currentTabId = e.nextId;
        if (this.showTabIds.includes(this.organizationTabId)) {
            this.libOrgTree.currentTabId = this.currentTabId;
        }
        if (e.nextId === this.groupTabId) {
            if (!this.libOrgGroup.groupData.public.length && !this.libOrgGroup.groupData.personal.length) {
                this.libOrgGroup.assembleData(true);
            }
        }
        else if (e.nextId === this.organizationTabId) {
            if (this.libOrgTree.initLoad) {
                this.libOrgTree.loadTreeData();
            }
            else {
                this.libOrgTree.farrisTree.clearAll();
                this.libOrgTree.farrisTree.rowHeight = 28;
                if (this.multiSelect) {
                    this.libOrgTree.checkOrgTreeNodes();
                }
                else {
                    this.libOrgTree.selectOrgTreeNode();
                }
            }
        }
    }
}
OrganizationSelectorComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-organization-selector',
                template: "<div class=\"org-select-help\" *ngIf=\"showInput\">\r\n  <input-group style=\"flex: 1\" *ngIf=\"!readonly && viewType === 'text'\" [placeholder]=\"'organizationSelector.selection.placeHolder' | locale\"\r\n    [groupText]=\"lookupIcon\" [readonly]=\"false\" [editable]=\"false\" [(ngModel)]=\"finalText\"\r\n    (clickHandle)=\"showFarrisDialog()\" (clear)=\"clearAll()\">\r\n  </input-group>\r\n  <div #tagbox class=\"input-group s-input-group\" *ngIf=\"viewType == 'tag'\" [class.farris-input-group-readonly]=\"readonly\">\r\n    <div class=\"form-control f-cmp-inputgroup--multi-wrapper multi-more\">\r\n      <div class=\"multi--content\" *ngFor=\"let item of finalText; index as i\" [title]=\"item\">\r\n        <span class=\"multi--item\">\r\n          {{item}}\r\n        </span>\r\n        <i class=\"f-icon f-icon-close cursor-pointer\" *ngIf=\"!readonly\" style=\"margin-top: 1px;\"\r\n          (click)=\"removeItem(item, i)\"></i>\r\n      </div>\r\n      <span class=\"multi-another\" *ngIf=\"finalText.length === 0\">{{'organizationSelector.selection.placeHolder' | locale}}</span>\r\n    </div>\r\n    <div *ngIf=\"!readonly\" class=\"input-group-append\" title=\"\">\r\n      <span *ngIf=\"finalText && finalText.length > 0\" class=\"input-group-text input-group-clear cursor-pointer\"\r\n        (click)=\"clearAll()\">\r\n        <i class=\"f-icon modal_close\"></i>\r\n      </span>\r\n      <span class=\"input-group-text cursor-pointer\" (click)=\"showFarrisDialog()\">\r\n        <span class=\"f-icon f-icon-lookup\"></span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<farris-dialog #farrisDialog *ngIf=\"isShow\" class=\"fos-dialog\" [resizable]=\"false\" id=\"{{dialogId}}\"\r\n  [draggable]=\"draggable\" [buttons]=\"buttonRef\" [beforeClose]=\"farrisDialogbeforeClose\" [showMaxButton]=\"false\"\r\n  [width]=\"760\" [height]=\"dialogHeight\" [title]=\"'organizationSelector.selection.selectionDialogTitle' | locale\">\r\n  <div class=\"fos-content\">\r\n    <div class=\"fos-content-container\">\r\n      <div class=\"fos-content-main\">\r\n        <lib-search #searchResultPage [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n          [enableFavorites]=\"enableFavorites\" [absOrgType]=\"absOrgType\" [notGetStopOrg]=\"notGetStopOrg\"\r\n          [onSearch]=\"onSearchToken\" [searchText]=\"searchText\" [pageSize]=\"searchPageSize\"\r\n          [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\"\r\n          (closePanelChange)=\"listenClosePanelChange($event)\" [hidden]=\"hideSearchPanel\">\r\n        </lib-search>\r\n        <input-group class=\"fos-search-input\" id=\"org-search-input\" [placeholder]=\"'organizationSelector.selection.searchPlaceHolder' | locale\"\r\n          [(value)]=\"searchText\" [groupText]=\"searchIcon\" (enterHandle)=\"onSearch()\" (clickHandle)=\"onSearch()\"\r\n          (keyup)=\"listenSearchText($event)\" (clear)=\"clearSearch()\" *ngIf=\"!dataPermission\">\r\n        </input-group>\r\n        <farris-tabs #selectTabs class=\"fos-tabs\" [value]=\"activeTabId\" [width]=\"'100%'\" [contentFill]=\"true\" (tabChange)=\"changeTabs($event)\">\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.organization' | locale\" [id]=\"organizationTabId\" *ngIf=\"showTabIds.indexOf(organizationTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-org #libOrgTree [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableFavorites]=\"enableFavorites\" [primaryField]=\"primaryField\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [multiSelect]=\"multiSelect\" [absOrgType]=\"absOrgType\" [layer]=\"layer\" [orgIds]=\"orgIds\"\r\n                [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [activeTabId]=\"activeTabId\" [isActiveTab]=\"orgTabActive\"\r\n                [dataPermission]=\"dataPermission\" [dataPermissionIds]=\"dataPermissionIds\" [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\">\r\n              </lib-org>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u7EC4\u7EC7\u673A\u6784  END -->\r\n          <!-- \u6211\u7684\u6536\u85CF  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.favorites' | locale\" [id]=\"favoritesTabId\" *ngIf=\"showTabIds.indexOf(favoritesTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-favorites #libOrgFavorites [primaryField]=\"primaryField\" [multiSelect]=\"multiSelect\"\r\n                [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\">\r\n              </lib-favorites>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u6211\u7684\u6536\u85CF  END -->\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  START -->\r\n          <farris-tab [title]=\"'organizationSelector.selection.group' | locale\" [id]=\"groupTabId\" *ngIf=\"showTabIds.indexOf(groupTabId) !== -1\">\r\n            <ng-template #content>\r\n              <lib-group #libOrgGroup \r\n                [primaryField]=\"primaryField\" [absOrgType]=\"absOrgType\" [multiSelect]=\"multiSelect\"\r\n                [enableFavorites]=\"enableFavorites\" [groupApiUrl]=\"groupApiUrl\" [notGetStopOrg]=\"notGetStopOrg\"\r\n                [enableHierarchicalLoading]=\"enableHierarchicalLoading\" [cascadeCheck]=\"cascadeCheck\"\r\n                [cascadeDown]=\"cascadeDown\" [cascadeUp]=\"cascadeUp\" [keepSelect]=\"keepSelect\" [virtualizedLoad]=\"virtualizedLoad\"\r\n                [layer]=\"layer\" [selectedLimit]=\"selectedLimit\" [showCheckAll]=\"showCheckAll\" [isActiveTab]=\"groupTabActive\"\r\n                [filterType]=\"filterType\" [disableOrgList]=\"disableOrgList\" (groupChange)=\"listenGroupChange($event)\">\r\n              </lib-group>\r\n            </ng-template>\r\n          </farris-tab>\r\n          <!-- \u5E38\u7528\u7FA4\u7EC4\u5C55\u793A\u533A  END -->\r\n        </farris-tabs>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"s-personnel-group\" *ngIf=\"groupDialogOpend\">\r\n    <div class=\"s-personnel-group-title\">\r\n      <span class=\"f-icon f-sidebar-close\" (click)=\"closeGroupDialog()\"></span>{{groupDialogTitle}}\r\n    </div>\r\n    <div class=\"f-form-layout farris-form farris-form-controls-inline\" style=\"margin-top: 22px;\">\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\" for=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\">\r\n              <span class=\"farris-label-info text-danger\">*</span>\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupName' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n                <input class=\"form-control\" id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\"\r\n                (keyup)=\"listenGroupTitle($event)\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"\r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\" [(ngModel)]=\"groupTitle\" />\r\n              <!--\r\n                <language-textbox id=\"month_4c7f0115_7796_42b4_bf41_beb7299dd84f_caum\" \r\n                [ngStyle]=\"{'border-color': !validGroupTitle ? 'red' : '#D8DCE6'}\"\r\n                [languages]=\"languagesArray\" [editable]=\"true\" [enableClear]=\"true\" [(ngModel)]=\"groupTitle\"\r\n                (keyup)=\"listenGroupTitle($event)\">\r\n              </language-textbox>\r\n              -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-12 col-xl-12 col-el-12\" style=\"margin-top: 4px;\">\r\n        <div class=\"farris-group-wrap\">\r\n          <div class=\"form-group farris-form-group\">\r\n            <label class=\"col-form-label\" style=\"width: 4.2rem\"\r\n              for=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\">\r\n              <span class=\"farris-label-text\">{{'organizationSelector.group.newGroupNote' | locale}}</span>\r\n            </label>\r\n            <div class=\"farris-input-wrap\">\r\n              <textarea class=\"form-control\" style=\"height: 66px;\" [(ngModel)]=\"groupNote\"\r\n                id=\"billNote_7b43d269_2dd3_4777_8cfb_bd0c721575cf_hh9s\" placeholder=\"{{'organizationSelector.group.newGroupPlaceHolder' | locale}}\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"s-personnel-group-footer\">\r\n      <input type=\"button\" class=\"btn btn-primary fr\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"saveGroup()\" />\r\n      <input type=\"button\" class=\"btn btn-secondary fr mr-3\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"closeGroupDialog()\" />\r\n    </div>\r\n  </div>\r\n</farris-dialog>\r\n\r\n<ng-template #buttonRef>\r\n  <div class=\"fos-dialog-footer\">\r\n    <span class=\"fosd-footer-selection\" (mouseover)=\"selectionsShow=true\"\r\n      (mouseout)=\"selectionsShow=false\">{{'organizationSelector.selection.firstSelectionText' | locale}}\r\n      <a>{{selections.length}}</a>{{'organizationSelector.selection.lastSelectionText' | locale}}</span>\r\n    <span class=\"fosd-footer-clear\" (click)=\"clearSeletions()\">{{'organizationSelector.selection.clear' | locale}}</span>\r\n    <lib-selection #selectedComponent class=\"fosd-selection-content\" [primaryField]=\"primaryField\"\r\n      [enableGroup]=\"enableGroup\" (mouseover)=\"selectionsShow=true\" (mouseout)=\"selectionsShow=false\"\r\n      [hidden]=\"!selectionsShow\" (openedChange)=\"listenOpenGroup($event)\"></lib-selection>\r\n  </div>\r\n  <input type=\"button\" class=\"btn btn-secondary\" value=\"{{'organizationSelector.selection.cancel' | locale}}\" (click)=\"returnResult(0)\" />\r\n  <input type=\"button\" class=\"btn btn-primary\" style=\"width: 100px;\" value=\"{{'organizationSelector.selection.confirm' | locale}}\" (click)=\"returnResult(1)\" />\r\n</ng-template>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => OrganizationSelectorComponent)),
                        multi: true
                    },
                    FavoritesTool, ApiService, StateMgrTool
                ],
                styles: [".fos-dialog .fos-content{width:100%;height:100%;min-width:760px;overflow:hidden}.fos-dialog ::ng-deep .modal-content{border-radius:10px}.fos-dialog ::ng-deep .modal-header{color:#2d2f33;border-bottom:none;padding:15px 0 15px 24px}.fos-dialog ::ng-deep .actions{padding-right:22px;font-size:20px}.fos-dialog ::ng-deep .modal-title-label{font-size:17px;font-weight:600}.fos-dialog ::ng-deep .modal-footer{padding:17px 24px;background:#fff;border-top:none}.fos-dialog .fos-content .fos-content-container{display:-webkit-box;display:flex;width:calc(100% - 48px);height:100%;margin:0 24px;border:1px solid #dee1ea;border-radius:3px}.fos-dialog .fos-content .fos-content-container .fos-content-main{-webkit-box-flex:0;flex:0 0 100%;position:relative;display:-webkit-box;display:flex}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-search-input{position:absolute;top:7px;right:14px;color:#959ab1;z-index:99;width:320px}.fos-dialog .fos-content .fos-content-container .fos-content-main .fos-tabs{min-width:575px}.fos-dialog ::ng-deep .fos-tabs .nav-link{line-height:18px;padding:11px 0!important}.fos-dialog ::ng-deep .fos-tabs .farris-tabs-header{background:#f9f9f9}.fos-dialog ::ng-deep .fos-tabs .nav-item{margin-right:30px}.fos-dialog ::ng-deep .fos-tabs .nav{padding-left:14px;font-size:16px;font-weight:600}.fos-dialog ::ng-deep .fos-tabs .nav-item .st-tab-text{color:#6f8cb4}.fos-dialog ::ng-deep .fos-tabs .nav-item .active .st-tab-text{color:#2a87ff}.fos-dialog::ng-deep input::-webkit-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-moz-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep input::-ms-input-placeholder{color:#b4bccc;font-size:13px;line-height:24px}.fos-dialog ::ng-deep .fos-search-input .form-control{line-height:26px;height:26px;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead{background:#fff;font-size:13px}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th .tt-checkbox .custom-control-label::before{top:2px;margin:0}.fos-dialog ::ng-deep .fos-treetable .farris-treetable-thead th:hover{background:#fff}.fos-dialog ::ng-deep .fos-treetable .treetable-cell-content span{font-size:13px}:host .org-select-help{display:-webkit-box;display:flex;width:100%}:host .input-group .input-group-append{background:#fff}:host .s-input-group .input-group-text{color:rgba(0,0,0,.25)}:host .cursor-pointer{cursor:pointer}:host .s-input-group .multi-more{padding:0 0 2px 8px;height:auto;min-height:24px;-webkit-box-flex:1;flex:1;overflow:hidden}:host .s-input-group .multi--content{display:-webkit-box;display:flex;flex-wrap:nowrap;cursor:default;padding:0 5px;background:#ebf7fe;border:1px solid #cfedff;margin:3px 3px 0 0;float:left;height:17px;border-radius:3px;line-height:17px;-webkit-box-pack:justify;justify-content:space-between;box-sizing:content-box;max-width:calc(100% - 10px)}:host .s-input-group .multi--item{line-height:16px;text-overflow:ellipsis;height:16px;-webkit-box-flex:1;flex:1;overflow:hidden;word-break:break-all}:host .s-input-group .multi-another{padding:3px 3px 0 0;line-height:16px;float:left;height:17px;box-sizing:content-box;border:1px solid #fff;color:#bfbfbf}.fos-dialog ::ng-deep .fos-dialog-footer{width:200px;height:30px;line-height:30px;position:absolute;left:24px;text-align:left;cursor:default}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection{font-size:14px;color:#2d2f33;background:#f4f9ff;border-radius:5px;padding:2px 5px}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-selection a{font-size:17px;color:#2a87ff}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-footer-clear{font-size:13px;color:#2a87ff;margin-left:1rem;cursor:pointer}.fos-dialog ::ng-deep .fos-dialog-footer .fosd-selection-content{position:absolute;bottom:25px;left:-10px;background:#fff;z-index:102}.fos-dialog::ng-deep .pagination-container{height:1.5rem;margin-bottom:21px}.fos-dialog::ng-deep .pagination-container input::-webkit-inner-spin-button,.fos-dialog::ng-deep .pagination-container input::-webkit-outer-spin-button{-webkit-appearance:none}.fos-dialog::ng-deep .pagination-container input[type=number]{-moz-appearance:textfield;text-align:center;width:38px;line-height:20px;border:1px solid #e9ecf3;border-radius:6px;box-shadow:0 2px 6px 0 rgba(31,35,41,.06);margin-left:4px;outline:0}.fos-dialog::ng-deep .pagination-container input[type=number]:focus{border:1px solid #0084ff}.fos-dialog::ng-deep .pagination-container li{line-height:22px}.fos-dialog ::ng-deep .fos-treetable td{border-color:#fff}.fos-dialog ::ng-deep .default-light-color{color:#f7b500}.fos-dialog ::ng-deep .default-dark-color{color:#d8dce6}.fos-dialog ::ng-deep .s-personnel-group{width:440px;height:250px;border-radius:5px;background:#fff;box-shadow:0 0 40px 0 rgba(0,0,0,.2);padding:16px 24px;position:fixed;top:50%;left:50%;margin-left:-220px;margin-top:-125px;z-index:9999}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title{font-size:17px;line-height:24px;color:#2d2f33;font-weight:600}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-title .f-icon{float:right;font-size:20px;color:#878d99;margin-top:3px;cursor:pointer}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer{margin-top:20px}.fos-dialog ::ng-deep .s-personnel-group .col-12{padding:0}.fos-dialog ::ng-deep .s-personnel-group-footer .title-checkall{margin-top:6px}.fos-dialog ::ng-deep .s-personnel-group .farris-label-text{color:#5a5e66}.fos-dialog ::ng-deep .s-personnel-group .s-personnel-group-footer .fr{float:right;height:32px}"]
            }] }
];
/** @nocollapse */
OrganizationSelectorComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: Injector },
    { type: FavoritesTool },
    { type: ApiService },
    { type: NgZone },
    { type: StateMgrTool }
];
OrganizationSelectorComponent.propDecorators = {
    baseCls: [{ type: HostBinding, args: ['class.f-organization-selector',] }],
    width: [{ type: HostBinding, args: ['style.width',] }, { type: Input }],
    dialog: [{ type: ViewChild, args: ['farrisDialog',] }],
    libOrgGroup: [{ type: ViewChild, args: ['libOrgGroup',] }],
    libOrgTree: [{ type: ViewChild, args: ['libOrgTree',] }],
    libOrgFavorites: [{ type: ViewChild, args: ['libOrgFavorites',] }],
    showInput: [{ type: Input }],
    busNum: [{ type: Input }],
    multiSelect: [{ type: Input }],
    placeholder: [{ type: Input }],
    searchPlaceholder: [{ type: Input }],
    readonly: [{ type: Input }],
    absUserOrgUrl: [{ type: Input }],
    absRfQueryUrl: [{ type: Input }],
    absRfModifyUrl: [{ type: Input }],
    groupApiUrl: [{ type: Input }],
    groupExtendUrl: [{ type: Input }],
    absOrgType: [{ type: Input }],
    enableHierarchicalLoading: [{ type: Input }],
    notGetStopOrg: [{ type: Input }],
    primaryField: [{ type: Input }],
    displayField: [{ type: Input }],
    orgIds: [{ type: Input }],
    layer: [{ type: Input }],
    cascadeCheck: [{ type: Input }],
    cascadeDown: [{ type: Input }],
    cascadeUp: [{ type: Input }],
    showCheckAll: [{ type: Input }],
    keepSelect: [{ type: Input }],
    formatFn: [{ type: Input }],
    selectedLimit: [{ type: Input }],
    showTabIds: [{ type: Input }],
    activeTabId: [{ type: Input }],
    searchPageSize: [{ type: Input }],
    mapFields: [{ type: Input }],
    multipleChoiceSeparator: [{ type: Input }],
    draggable: [{ type: Input }],
    virtualizedLoad: [{ type: Input }],
    dataPermission: [{ type: Input }],
    dataPermissionIds: [{ type: Input }],
    filterType: [{ type: Input }],
    disableOrgList: [{ type: Input }],
    filterOrgList: [{ type: Input }],
    selectionsChange: [{ type: Output }],
    inputClear: [{ type: Output }],
    tagRemoved: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    OrganizationSelectorComponent.prototype.baseCls;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.width;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialog;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgTree;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.libOrgFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showInput;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.busNum;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.multiSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.placeholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPlaceholder;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.readonly;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absUserOrgUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfQueryUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.absRfModifyUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupApiUrl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupExtendUrl;
    /**
     * 数据源类型
     * 默认为： System_organization  系统数据源   获取系统人员、系统组织
     * Administrative_organization  已扩展数据源  获取行政组织、行政人员
     * absOrgType {string}
     * PersonnelSelectorComponent
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.absOrgType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableHierarchicalLoading;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.notGetStopOrg;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.primaryField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.displayField;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.layer;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeCheck;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeDown;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.cascadeUp;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showCheckAll;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.keepSelect;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.formatFn;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectedLimit;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.showTabIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.activeTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchPageSize;
    /**
     * 字段映射, 仅在farris form中使用{ 帮助数据字段：表单字段 }
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.mapFields;
    /**
     * 多选分隔符
     * @type {?}
     */
    OrganizationSelectorComponent.prototype.multipleChoiceSeparator;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.draggable;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.virtualizedLoad;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermission;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dataPermissionIds;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.filterType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.inputClear;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.tagRemoved;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.viewType;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.originalSelections;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.finalText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.lookupIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchIcon;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.organizationTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.favoritesTabId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogHeight;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.dialogId;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.isShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.selectionsSub;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.confirmToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.hideSearchPanel;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.searchText;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onSearchToken;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableFavorites;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.enableGroup;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogOpend;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupDialogTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTitle;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupNote;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.validGroupTitle;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.groupTitleStream;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.ngControl;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.selectionsShow;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.editingGroupId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.cdRef;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.currentTabId;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.messageService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.notifyService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.orgTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.groupTabActive;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.againstSingleSelect;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.localeService;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.languagesArray;
    /** @type {?} */
    OrganizationSelectorComponent.prototype._disableOrgList;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.farrisDialogbeforeClose;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelChange;
    /** @type {?} */
    OrganizationSelectorComponent.prototype.onModelTouched;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.render;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.favoritesTool;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    OrganizationSelectorComponent.prototype.stateMgr;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktb3JnYW5pemF0aW9uLXNlbGVjdG9yLyIsInNvdXJjZXMiOlsibGliL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQWlCLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBZ0MsTUFBTSxFQUFFLFNBQVMsRUFBaUIsU0FBUyxFQUFFLGlCQUFpQixFQUFZLE1BQU0sZUFBZSxDQUFDO0FBQ2pPLE9BQU8sRUFBd0IsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3hELE9BQU8sRUFBRSxVQUFVLEVBQTBDLE1BQU0scUJBQXFCLENBQUM7QUFDekYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDO0FBQy9CLE9BQU8sRUFBRSxZQUFZLEVBQUUsb0JBQW9CLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXBGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM3RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUN4RSxP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aXQsIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmLCBIb3N0QmluZGluZywgSW5qZWN0b3IsIElucHV0LCBOZ1pvbmUsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgUmVuZGVyZXIyLCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQsIENoYW5nZURldGVjdG9yUmVmLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTmdDb250cm9sLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vdXRpbHMvYXBpLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb21tb25VdGlsIH0gZnJvbSAnLi4vdXRpbHMvY29tbW9uLnRvb2wnO1xyXG5pbXBvcnQgeyBGYXZvcml0ZXNUb29sIH0gZnJvbSAnLi4vdXRpbHMvZmF2b3JpdGVzLnRvb2wnO1xyXG5pbXBvcnQgeyBDaGFuZ2VUeXBlLCBPcmdSZXF1ZXN0UGFyYW0sIFNhdmVHcm91cFJlcWV1c3RQYXJhbSB9IGZyb20gJy4uL3V0aWxzL2luZGV4LnR5cGUnO1xyXG5pbXBvcnQgeyBTdGF0ZU1nclRvb2wgfSBmcm9tICcuLi91dGlscy9zdGF0ZS5tZ3IudG9vbCc7XHJcbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWQsIHN3aXRjaE1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyByZXN1bHQgfSBmcm9tICdsb2Rhc2gnO1xyXG5pbXBvcnQgeyBHcm91cENvbXBvbmVudCB9IGZyb20gJy4vdGFiLWdyb3VwL2dyb3VwLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE9yZ2FuaXphdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vdGFiLW9yZ2FuaXphdGlvbi90by5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBGYXZvcml0ZXNDb21wb25lbnQgfSBmcm9tICcuL3RhYi1mYXZvcml0ZXMvZmF2b3JpdGVzLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBPUkdBTklaQVRJT05fU0VMRUNUT1JfTE9DQUxFIH0gZnJvbSAnLi4vdXRpbHMvbG9jYWxlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZmFycmlzLW9yZ2FuaXphdGlvbi1zZWxlY3RvcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL29yZ2FuaXphdGlvbi1zZWxlY3Rvci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vb3JnYW5pemF0aW9uLXNlbGVjdG9yLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE9yZ2FuaXphdGlvblNlbGVjdG9yQ29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWVcclxuICAgIH0sXHJcbiAgICBGYXZvcml0ZXNUb29sLCBBcGlTZXJ2aWNlLCBTdGF0ZU1nclRvb2xcclxuICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBPcmdhbml6YXRpb25TZWxlY3RvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3ksIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mLW9yZ2FuaXphdGlvbi1zZWxlY3RvcicpIGJhc2VDbHMgPSB0cnVlO1xyXG4gIEBIb3N0QmluZGluZygnc3R5bGUud2lkdGgnKSBASW5wdXQoKSB3aWR0aCA9ICcxMDAlJztcclxuICBAVmlld0NoaWxkKCdmYXJyaXNEaWFsb2cnKSBkaWFsb2c6IERpYWxvZ0NvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdsaWJPcmdHcm91cCcpIGxpYk9yZ0dyb3VwOiBHcm91cENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdsaWJPcmdUcmVlJykgbGliT3JnVHJlZTogT3JnYW5pemF0aW9uQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ2xpYk9yZ0Zhdm9yaXRlcycpIGxpYk9yZ0Zhdm9yaXRlczogRmF2b3JpdGVzQ29tcG9uZW50O1xyXG4gIC8vIGlucHV05qGG5piv5ZCm5pi+56S6XHJcbiAgQElucHV0KCkgc2hvd0lucHV0ID0gdHJ1ZTtcclxuICAvLyDkuJrliqHmoIfor4ZcclxuICBASW5wdXQoKSBidXNOdW0gPSAnY29tbW9uJztcclxuICBASW5wdXQoKSBtdWx0aVNlbGVjdCA9IHRydWU7XHJcbiAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAn6K+36YCJ5oupJztcclxuICBASW5wdXQoKSBzZWFyY2hQbGFjZWhvbGRlciA9ICfor7fovpPlhaXnvJblj7fmiJblkI3np7DmkJzntKInO1xyXG4gIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgLy8g5Lyg5YWl55qEdXJsXHJcbiAgQElucHV0KCkgYWJzVXNlck9yZ1VybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzVXNlck9yZyc7XHJcbiAgQElucHV0KCkgYWJzUmZRdWVyeVVybCA9ICcvYXBpL3J1bnRpbWUvc3lzL3YxLjAvYWJzUmVjZW50Q29udGFjdHMvcXVlcnknO1xyXG4gIEBJbnB1dCgpIGFic1JmTW9kaWZ5VXJsID0gJy9hcGkvcnVudGltZS9zeXMvdjEuMC9hYnNSZWNlbnRDb250YWN0cy9tb2RpZnknO1xyXG4gIEBJbnB1dCgpIGdyb3VwQXBpVXJsID0gXCIvYXBpL3J1bnRpbWUvc3lzL3YxLjAvb3JnLWdyb3VwXCI7XHJcbiAgQElucHV0KCkgZ3JvdXBFeHRlbmRVcmwgPSAnL3BsYXRmb3JtL3J1bnRpbWUvd2Yvd2ViYXBwL25nLWZhcnJpcy1tb2JpbGUtdWkvZXh0ZW5kLW9yZy5qcyc7XHJcbiAgLyoqXHJcbiAgICog5pWw5o2u5rqQ57G75Z6LXHJcbiAgICog6buY6K6k5Li677yaIFN5c3RlbV9vcmdhbml6YXRpb24gIOezu+e7n+aVsOaNrua6kCAgIOiOt+WPluezu+e7n+S6uuWRmOOAgeezu+e7n+e7hOe7h1xyXG4gICAqIEFkbWluaXN0cmF0aXZlX29yZ2FuaXphdGlvbiAg5bey5omp5bGV5pWw5o2u5rqQICDojrflj5booYzmlL/nu4Tnu4fjgIHooYzmlL/kurrlkZhcclxuICAgKiBhYnNPcmdUeXBlIHtzdHJpbmd9XHJcbiAgICogUGVyc29ubmVsU2VsZWN0b3JDb21wb25lbnRcclxuICAgKi9cclxuICBASW5wdXQoKSBhYnNPcmdUeXBlID0gJ1N5c3RlbV9vcmdhbml6YXRpb24nO1xyXG4gIC8vIOWQr+eUqOWIhuWxguWKoOi9vVxyXG4gIEBJbnB1dCgpIGVuYWJsZUhpZXJhcmNoaWNhbExvYWRpbmcgPSB0cnVlO1xyXG4gIC8vIOS4jeWMheWQq+WBnOeUqOe7hOe7h1xyXG4gIEBJbnB1dCgpIG5vdEdldFN0b3BPcmcgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIHByaW1hcnlGaWVsZCA9ICdvcmdJZCc7XHJcbiAgQElucHV0KCkgZGlzcGxheUZpZWxkID0gJ25hbWUnO1xyXG4gIEBJbnB1dCgpIG9yZ0lkczogc3RyaW5nW10gPSBbXTtcclxuICAvLyDlsZXlvIDlsYLnuqdcclxuICBASW5wdXQoKSBsYXllciA9IDE7XHJcbiAgLy8g5piv5ZCm5ZCv55So57qn6IGU6YCJ5LitXHJcbiAgQElucHV0KCkgY2FzY2FkZUNoZWNrID0gdHJ1ZTtcclxuICAvLyDnuqfogZTpgInkuK3kuIvnuqdcclxuICBASW5wdXQoKSBjYXNjYWRlRG93biA9IHRydWU7XHJcbiAgLy8g57qn6IGU6YCJ5Lit5LiK57qnXHJcbiAgQElucHV0KCkgY2FzY2FkZVVwID0gZmFsc2U7XHJcbiAgLy8g5pi+56S65YWo6YCJ5oyJ6ZKuXHJcbiAgQElucHV0KCkgc2hvd0NoZWNrQWxsID0gZmFsc2U7XHJcbiAgQElucHV0KCkga2VlcFNlbGVjdCA9IGZhbHNlO1xyXG4gIC8vIOWHveaVsOiHquWumuS5iei+k+WHuuagt+W8j1xyXG4gIEBJbnB1dCgpIGZvcm1hdEZuOiAob2JqOiBhbnkpID0+IHN0cmluZztcclxuICAvLyDkuIDmrKHmgKfmnIDlpJrpgInkuK3lpJrlsJHmnaFcclxuICBASW5wdXQoKSBzZWxlY3RlZExpbWl0ID0gNTA7XHJcbiAgQElucHV0KCkgc2hvd1RhYklkcyA9ICdvcmdhbml6YXRpb24sZmF2b3JpdGVzJztcclxuICBASW5wdXQoKSBhY3RpdmVUYWJJZCA9ICdvcmdhbml6YXRpb24nO1xyXG4gIC8vIOaQnOe0ouWJjeerr+WIhumhtTUw5p2hXHJcbiAgQElucHV0KCkgc2VhcmNoUGFnZVNpemUgPSA1MDtcclxuICAvKiog5a2X5q615pig5bCELCDku4XlnKhmYXJyaXMgZm9ybeS4reS9v+eUqHsg5biu5Yqp5pWw5o2u5a2X5q6177ya6KGo5Y2V5a2X5q61IH0gKi9cclxuICBASW5wdXQoKSBtYXBGaWVsZHM6IHsgW3NvdXJjZUZpZWxkOiBzdHJpbmddOiBzdHJpbmcgfTtcclxuICAvKiog5aSa6YCJ5YiG6ZqU56ymICovXHJcbiAgQElucHV0KCkgbXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IgPSAnLCc7XHJcbiAgQElucHV0KCkgZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICBASW5wdXQoKSB2aXJ0dWFsaXplZExvYWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBkYXRhUGVybWlzc2lvbiA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIGRhdGFQZXJtaXNzaW9uSWRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIEBJbnB1dCgpIGZpbHRlclR5cGU6IHN0cmluZyA9ICdub25lJztcclxuICBASW5wdXQoKSBcclxuICBzZXQgZGlzYWJsZU9yZ0xpc3QodmFsdWU6IGFueSkge1xyXG4gICAgaWYodGhpcy5maWx0ZXJUeXBlID09ICdkaXNhYmxlJykge1xyXG4gICAgICBpZih0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICB0aGlzLl9kaXNhYmxlT3JnTGlzdCA9IHZhbHVlO1xyXG4gICAgICB9IGVsc2UgaWYodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZU9yZ0xpc3QgPSB2YWx1ZS5zcGxpdCgnLCcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBkaXNhYmxlT3JnTGlzdCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlT3JnTGlzdDtcclxuICB9XHJcbiAgLy8g6Ieq5a6a5LmJ6L+H5rukZmVhdHVyZe+8muS4jeWPr+mAieS4ree7hOe7h++8jOWOhuWPsuWxnuaAp+WFvOWuueS/neeVmVxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGZpbHRlck9yZ0xpc3QodmFsdWU6IGFueSkge1xyXG4gICAgaWYodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVPcmdMaXN0ID0gdmFsdWU7XHJcbiAgICB9IGVsc2UgaWYodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVPcmdMaXN0ID0gdmFsdWUuc3BsaXQoJywnKTtcclxuICAgIH1cclxuICAgIHRoaXMuZmlsdGVyVHlwZSA9IHRoaXMuX2Rpc2FibGVPcmdMaXN0Lmxlbmd0aCA/ICdkaXNhYmxlJyA6IHRoaXMuZmlsdGVyVHlwZTtcclxuICB9XHJcbiAgQE91dHB1dCgpIHNlbGVjdGlvbnNDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAvLyDlhajpg6jmuIXpmaTmjInpkq7op6blj5Hlm57osINcclxuICBAT3V0cHV0KCkgaW5wdXRDbGVhciA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIC8vIOagh+etvuWIoOmZpOaMiemSruWHuuWPkeWbnuiwg1xyXG4gIEBPdXRwdXQoKSB0YWdSZW1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIHZpZXdUeXBlID0gJ3RhZyc7IC8vIOm7mOiupOS4unRhZ+agh+etvuW9ouW8j++8jOWPr+aUr+aMgXRleHTvvIzlkI7nu63mlLnkuLppbnB1dOexu+Wei+WxnuaApyBcclxuICBzZWxlY3Rpb25zID0gW107XHJcbiAgb3JpZ2luYWxTZWxlY3Rpb25zID0gW107XHJcbiAgZmluYWxUZXh0ID0gW107XHJcbiAgbG9va3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24tbG9va3VwXCI+PC9pPic7XHJcbiAgc2VhcmNoSWNvbiA9ICc8c3BhbiBjbGFzcz1cImstaWNvbiBrLWktc2VhcmNoXCI+PC9zcGFuPic7XHJcbiAgb3JnYW5pemF0aW9uVGFiSWQgPSAnb3JnYW5pemF0aW9uJztcclxuICBncm91cFRhYklkID0gJ2dyb3VwJztcclxuICBmYXZvcml0ZXNUYWJJZCA9ICdmYXZvcml0ZXMnO1xyXG4gIGRpYWxvZ0hlaWdodCA9IDU0ODtcclxuICBkaWFsb2dJZCA9ICdkaWFsb2dJZCc7XHJcbiAgaXNTaG93ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBzZWxlY3Rpb25zU3ViOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSBjb25maXJtVG9rZW4gPSBmYWxzZTtcclxuICBoaWRlU2VhcmNoUGFuZWwgPSB0cnVlO1xyXG4gIHNlYXJjaFRleHQgPSAnJztcclxuICBvblNlYXJjaFRva2VuOiBhbnk7XHJcbiAgZW5hYmxlRmF2b3JpdGVzOiBib29sZWFuO1xyXG4gIGVuYWJsZUdyb3VwOiBib29sZWFuO1xyXG4gIGdyb3VwRGlhbG9nT3BlbmQgPSBmYWxzZTtcclxuICBncm91cERpYWxvZ1RpdGxlID0gJyc7XHJcbiAgZ3JvdXBUaXRsZTogc3RyaW5nO1xyXG4gIGdyb3VwTm90ZTogc3RyaW5nO1xyXG4gIHZhbGlkR3JvdXBUaXRsZSA9IHRydWU7XHJcbiAgcHJpdmF0ZSBncm91cFRpdGxlU3RyZWFtOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XHJcbiAgcHVibGljIG5nQ29udHJvbDogYW55O1xyXG4gIHNlbGVjdGlvbnNTaG93ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBlZGl0aW5nR3JvdXBJZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmO1xyXG4gIHByaXZhdGUgY3VycmVudFRhYklkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBtZXNzYWdlU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlO1xyXG4gIHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZTtcclxuICBvcmdUYWJBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBncm91cFRhYkFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGFnYWluc3RTaW5nbGVTZWxlY3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UgPSBudWxsO1xyXG4gIGxhbmd1YWdlc0FycmF5ID0gW1xyXG4gICAgeyBjb2RlOiAnemgtQ0hTJywgbmFtZTogJ+S4reaWh+eugOS9kycsIGRlZmF1bHQ6IHRydWUgfSxcclxuICAgIHsgY29kZTogJ2VuJywgbmFtZTogJ0VuZ2xpc2gnIH0sXHJcbiAgICB7IGNvZGU6ICd6aC1DSFQnLCBuYW1lOiAn5Lit5paH57mB5L2TJyB9XHJcbiAgXTtcclxuICBfZGlzYWJsZU9yZ0xpc3Q6IHN0cmluZ1tdID0gW107XHJcblxyXG4gIGZhcnJpc0RpYWxvZ2JlZm9yZUNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5pc1Nob3cgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLmNvbmZpcm1Ub2tlbikge1xyXG4gICAgICB0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyA9IF8uY2xvbmVEZWVwKHRoaXMuc2VsZWN0aW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbnMgPSBfLmNsb25lRGVlcCh0aGlzLm9yaWdpbmFsU2VsZWN0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpZighdGhpcy5oaWRlU2VhcmNoUGFuZWwgfHwgdGhpcy5zZWFyY2hUZXh0KSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoVGV4dCA9IG51bGw7XHJcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2goKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29uZmlybVRva2VuID0gZmFsc2U7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG9uTW9kZWxDaGFuZ2U6IGFueSA9ICh2YWw/OiBhbnkpID0+IHsgfTtcclxuICBvbk1vZGVsVG91Y2hlZDogYW55ID0gKHZhbD86IGFueSkgPT4geyB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgcmVuZGVyOiBSZW5kZXJlcjIsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgZmF2b3JpdGVzVG9vbDogRmF2b3JpdGVzVG9vbCxcclxuICAgIHByaXZhdGUgYXBpU2VydmljZTogQXBpU2VydmljZSxcclxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXHJcbiAgICBwcml2YXRlIHN0YXRlTWdyOiBTdGF0ZU1nclRvb2xcclxuICApIHtcclxuICAgIHRoaXMuYXBpU2VydmljZS5hYnNVcmwgPSB0aGlzLmFic1VzZXJPcmdVcmw7XHJcbiAgICB0aGlzLmFwaVNlcnZpY2UuZ3JvdXBBcGlVcmwgPSB0aGlzLmdyb3VwQXBpVXJsO1xyXG4gICAgdGhpcy5jZFJlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmKTtcclxuICAgIHRoaXMubWVzc2FnZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChNZXNzYWdlclNlcnZpY2UsIG51bGwpO1xyXG4gICAgdGhpcy5ub3RpZnlTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTm90aWZ5U2VydmljZSwgbnVsbCk7XHJcbiAgICB0aGlzLmxvY2FsZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChMb2NhbGVTZXJ2aWNlKTtcclxuICAgIGlmKCF0aGlzLmxvY2FsZVNlcnZpY2UubGFuZ0RhdGFbJ29yZ2FuaXphdGlvblNlbGVjdG9yJ10pIHtcclxuICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlLnNldExvY2FsZURhdGEoT1JHQU5JWkFUSU9OX1NFTEVDVE9SX0xPQ0FMRSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKG9iajogYW55KTogdm9pZCB7XHJcbiAgICBpZih0aGlzLnZpZXdUeXBlID09ICd0YWcnKSB7XHJcbiAgICAgIGlmICghIW9iaiAmJiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHRoaXMuZmluYWxUZXh0ID0gb2JqLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZmluYWxUZXh0ID0gW107XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZih0aGlzLnZpZXdUeXBlID09ICd0ZXh0Jykge1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dCA9IG9iajtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkID0gZm47XHJcbiAgfVxyXG5cclxuICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdERpYWxvZ0hlaWdodCgpO1xyXG4gICAgdGhpcy5saXN0ZW5TZWxlY3Rpb25zQ2hhbmdlKCk7XHJcbiAgICB0aGlzLmluaXRUYWJzKCk7XHJcbiAgICB0aGlzLmluaXRHcm91cFNlYXJjaCgpO1xyXG4gICAgdGhpcy5uZ0NvbnRyb2wgPSB0aGlzLmluamVjdG9yLmdldChOZ0NvbnRyb2wsIG51bGwpO1xyXG4gICAgdGhpcy5tYXBGaWVsZHMgJiYgdGhpcy5tYXBGaWVsZHMyQ29tcG9uZW50KCk7XHJcbiAgICB0aGlzLnZpZXdUeXBlID0gdGhpcy5kYXRhUGVybWlzc2lvbiA/ICd0ZXh0JyA6ICd0YWcnO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5saXN0ZW5XaW5kb3dSZXNpemUoKTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGNvbnN0IG9yZ0lkc0NoYW5nZSA9IGNoYW5nZXMub3JnSWRzO1xyXG4gICAgaWYgKG9yZ0lkc0NoYW5nZSAmJiBvcmdJZHNDaGFuZ2UuY3VycmVudFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHMob3JnSWRzQ2hhbmdlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9uc1N1Yi51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbWl0U2VsZWN0aW9ucyhzZWxlY3Rpb25zOiBhbnksIGNoYW5nZVR5cGUgPSBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCwgZnJvbSA9ICdmb3JtJykge1xyXG4gICAgdGhpcy5zdGF0ZU1nci5lbWl0U2VsZWN0aW9ucyhzZWxlY3Rpb25zLCBjaGFuZ2VUeXBlLCBmcm9tKTtcclxuICB9XHJcblxyXG4gIC8vIOagueaNruWtl+auteaYoOWwhOWFs+ezu+iOt+WPluW9k+WJjeW3sumAiee7hOe7h+eahGlk77yM6L+b6ICM5Zyo5omT5byA6YCJ57uE57uH5by556qX5pe26L+b6KGM55u45bqU5bGV56S6XHJcbiAgcHJpdmF0ZSBtYXBGaWVsZHMyQ29tcG9uZW50KCkge1xyXG4gICAgY29uc3QgaGVscEZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMubWFwRmllbGRzKTtcclxuICAgIGlmICghaGVscEZpZWxkcy5pbmNsdWRlcyh0aGlzLnByaW1hcnlGaWVsZCkpIHtcclxuICAgICAgLy8gdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLm1hcEZpZWxkc1wiKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZSAmJlxyXG4gICAgICB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0gJiZcclxuICAgICAgdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdEYXRhXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgYmluZGluZ0RhdGEgPSB0aGlzLm5nQ29udHJvbC5mb3JtRGlyZWN0aXZlLmZvcm0uYmluZGluZ0RhdGE7XHJcbiAgICAgIGlmIChiaW5kaW5nRGF0YS5zZXRWYWx1ZSkge1xyXG4gICAgICAgIGNvbnN0IGJpbmRpbmdQYXRoID0gdGhpcy5uZ0NvbnRyb2wuZm9ybURpcmVjdGl2ZS5mb3JtLmJpbmRpbmdQYXRoO1xyXG4gICAgICAgIGxldCBwYXRoQXJyOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGlmIChiaW5kaW5nUGF0aCkge1xyXG4gICAgICAgICAgcGF0aEFyciA9IGJpbmRpbmdQYXRoLnNwbGl0KCcvJykuZmlsdGVyKG4gPT4gbiAhPT0gJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtdWx0aVBhdGggPSB0aGlzLm1hcEZpZWxkc1t0aGlzLnByaW1hcnlGaWVsZF0uc3BsaXQodGhpcy5tdWx0aXBsZUNob2ljZVNlcGFyYXRvcik7XHJcbiAgICAgICAgY29uc3QgZmllbGRQYXRocyA9IHBhdGhBcnIuY29uY2F0KG11bHRpUGF0aFswXS5zcGxpdCgnLicpKTtcclxuICAgICAgICBjb25zdCBpZHMgPSBiaW5kaW5nRGF0YS5nZXRWYWx1ZShmaWVsZFBhdGhzKTtcclxuICAgICAgICBpZiAoIWlkcykge1xyXG4gICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyhbXSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHMoaWRzLnNwbGl0KHRoaXMubXVsdGlwbGVDaG9pY2VTZXBhcmF0b3IpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5qC55o2u5Lyg5YWl55qE57uE57uHaWTmlbDnu4Tojrflj5blr7nlupTnmoTnu4Tnu4dcclxuICAvLyDnlLFuZ09uQ2hhbmdlcygp44CBbWFwRmllbGRzMkNvbXBvbmVudCgp6LCD55SoXHJcbiAgcHJpdmF0ZSBhc3NlbWJsZURhdGFCeU9yZ0lkcyhpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBpZiAoIWlkcyB8fCBpZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCA+IDEgJiYgIXRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgdGhpcy5hZ2FpbnN0U2luZ2xlU2VsZWN0ID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFyYW06IE9yZ1JlcXVlc3RQYXJhbSA9IHtcclxuICAgICAgYWJzT3JnVHlwZTogdGhpcy5hYnNPcmdUeXBlLFxyXG4gICAgICBpZExpc3Q6IHRoaXMuZmlsdGVyVHlwZSA9PSAnZGlzYWJsZScgPyBpZHMuZmlsdGVyKGlkID0+ICF0aGlzLl9kaXNhYmxlT3JnTGlzdC5pbmNsdWRlcyhpZCkpIDogaWRzLFxyXG4gICAgICBnZXRPcmdBbGxQYXRoOiB0cnVlLFxyXG4gICAgICBnZXRDdXJVc2VyOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIHRoaXMuYXBpU2VydmljZS5nZXRPcmdhbml6YXRpb24ocGFyYW0pLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgIGlmKHRoaXMuYWJzT3JnVHlwZSA9PSAnU3lzdGVtX29yZ2FuaXphdGlvbicpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHJlcy5kYXRhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNlbGVjdGlvbnMgPSByZXMuZGF0YS5maWx0ZXIoZGF0YSA9PiBpZHMuZmluZChpZCA9PiBpZCA9PSBkYXRhW3RoaXMucHJpbWFyeUZpZWxkXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubWFwRmllbGRzKSB7XHJcbiAgICAgICAgICB0aGlzLmFzc2VtYmxlRmluYWxUZXh0KCk7XHJcbiAgICAgICAgICBpZih0aGlzLmRhdGFQZXJtaXNzaW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdFNlbGVjdGlvbnModGhpcy5zZWxlY3Rpb25zKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5lbWl0U2VsZWN0aW9ucyh0aGlzLnNlbGVjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmnoTpgKDlm57mmL7oh7NpbnB1dOaWh+acrOahhueahOWGheWuuVxyXG4gIC8vIOWcqOaciW1hcEZpZWxkc+eahOWJjeaPkOS4i++8jOeUsWFzc2VtYmxlRGF0YUJ5T3JnSWRzKCnosIPnlKjvvIxjbGVhckFsbCgp44CBcmVtb3ZlSXRlbSgp44CBcmV0dXJuUmVzdWx0KCnkuZ/kvJrosIPnlKhcclxuICBwcml2YXRlIGFzc2VtYmxlRmluYWxUZXh0KCkge1xyXG4gICAgdGhpcy5maW5hbFRleHQgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0aW9ucy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBmb3JtYXRlZE5hbWUgPSB0aGlzLmZvcm1hdEZuICYmIHRoaXMuZm9ybWF0Rm4oaXRlbSk7XHJcbiAgICAgIGNvbnN0IGZpbmFsVGV4dCA9IGZvcm1hdGVkTmFtZSA/IGZvcm1hdGVkTmFtZSA6IGl0ZW1bdGhpcy5kaXNwbGF5RmllbGRdO1xyXG4gICAgICB0aGlzLmZpbmFsVGV4dC5wdXNoKGZpbmFsVGV4dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuc2xpY2UoKTtcclxuICB9XHJcblxyXG4gIC8vIOWIneWni+WMluW8ueeql2lk5Y+K6auY5bqmXHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIGluaXREaWFsb2dIZWlnaHQoKSB7XHJcbiAgICBjb25zdCB1dWlkID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICB0aGlzLmRpYWxvZ0lkICs9IHV1aWQ7XHJcbiAgICBjb25zdCB3aW5kb3dJbm5lckhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIHRoaXMuZGlhbG9nSGVpZ2h0ID0gd2luZG93SW5uZXJIZWlnaHQgLSA2MDtcclxuICAgIGlmICh0aGlzLmRpYWxvZ0hlaWdodCA+IDY4MCkge1xyXG4gICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IDY4MDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrHNlbGVjdGlvbnPnmoTlj5jmm7TvvIzlj5jmm7TljIXlkKvkuInnp43lvaLlvI/vvJp2YWx1ZUNoYW5nZeOAgWFwcGVuZOOAgXJlbW92ZVxyXG4gIC8vIOeUsW5nT25Jbml0KCnosIPnlKhcclxuICBsaXN0ZW5TZWxlY3Rpb25zQ2hhbmdlKCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb25zU3ViID0gdGhpcy5zdGF0ZU1nci5zZWxlY3Rpb25zU3ViamVjdC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGlmIChkYXRhLmNoYW5nZVR5cGUgPT09IENoYW5nZVR5cGUuVmFsdWVDaGFuZ2VkKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gXy5jbG9uZURlZXAoZGF0YS52YWx1ZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5jaGFuZ2VUeXBlID09PSBDaGFuZ2VUeXBlLlJlbW92ZSkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IHRoaXMuc2VsZWN0aW9ucy5maWx0ZXIoaXRlbSA9PiBpdGVtW3RoaXMucHJpbWFyeUZpZWxkXSAhPT0gZGF0YS52YWx1ZVt0aGlzLnByaW1hcnlGaWVsZF0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuY2hhbmdlVHlwZSA9PT0gQ2hhbmdlVHlwZS5BcHBlbmQpIHtcclxuICAgICAgICBDb21tb25VdGlsLmZpbmRJbmRleChkYXRhLnZhbHVlW3RoaXMucHJpbWFyeUZpZWxkXSwgdGhpcy5wcmltYXJ5RmllbGQsIHRoaXMuc2VsZWN0aW9ucykgPT09IC0xID8gdGhpcy5zZWxlY3Rpb25zLnB1c2goZGF0YS52YWx1ZSkgOiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2RSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDmoLnmja5zaG93VGFiSWRz5Yik5pat5piv5ZCm5ZCv55So5pS26JeP5Yqf6IO944CB576k57uE5Yqf6IO9XHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIHByaXZhdGUgaW5pdFRhYnMoKSB7XHJcbiAgICBpZighdGhpcy5zaG93VGFiSWRzLmluY2x1ZGVzKHRoaXMuYWN0aXZlVGFiSWQpKSB7XHJcbiAgICAgIHRoaXMuYWN0aXZlVGFiSWQgPSB0aGlzLnNob3dUYWJJZHMuc3BsaXQoJywnKVswXTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuZGF0YVBlcm1pc3Npb24pIHtcclxuICAgICAgdGhpcy5zaG93VGFiSWRzID0gdGhpcy5vcmdhbml6YXRpb25UYWJJZDtcclxuICAgICAgdGhpcy5hY3RpdmVUYWJJZCA9IHRoaXMub3JnYW5pemF0aW9uVGFiSWQ7XHJcbiAgICAgIHRoaXMub3JnVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50VGFiSWQgPSB0aGlzLmFjdGl2ZVRhYklkO1xyXG4gICAgaWYgKHRoaXMuc2hvd1RhYklkcy5pbmRleE9mKHRoaXMuZmF2b3JpdGVzVGFiSWQpICE9PSAtMSkge1xyXG4gICAgICB0aGlzLmVuYWJsZUZhdm9yaXRlcyA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVuYWJsZUZhdm9yaXRlcyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2hvd1RhYklkcy5pbmRleE9mKHRoaXMuZ3JvdXBUYWJJZCkgIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlR3JvdXAgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVHcm91cCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5hY3RpdmVUYWJJZCA9PSB0aGlzLm9yZ2FuaXphdGlvblRhYklkKSB7XHJcbiAgICAgIHRoaXMub3JnVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZih0aGlzLmFjdGl2ZVRhYklkID09IHRoaXMuZ3JvdXBUYWJJZCkge1xyXG4gICAgICB0aGlzLmdyb3VwVGFiQWN0aXZlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIOWQr+eUqOe+pOe7hOWKn+iDveaJqeWxleWHveaVsFxyXG4gICAgLypcclxuICAgIGlmICh0aGlzLmVuYWJsZUdyb3VwKSB7XHJcbiAgICAgIGNvbnN0IGNjd29yayA9IHdpbmRvdy50b3AuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKVxyXG4gICAgICBjY3dvcmsuc3JjID0gdGhpcy5ncm91cEV4dGVuZFVybCArICc/dnM9JyArIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgIHdpbmRvdy5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGNjd29yayk7XHJcbiAgICB9XHJcbiAgICAqL1xyXG4gIH1cclxuXHJcbiAgLy8g5Yik5pat576k57uE5ZCN56ew5piv5ZCm5ZCI5rOVXHJcbiAgLy8g55SxbmdPbkluaXQoKeiwg+eUqFxyXG4gIHByaXZhdGUgaW5pdEdyb3VwU2VhcmNoKCkge1xyXG4gICAgaWYgKHRoaXMuZW5hYmxlR3JvdXApIHtcclxuICAgICAgdGhpcy5ncm91cFRpdGxlU3RyZWFtLnBpcGUoXHJcbiAgICAgICAgZGVib3VuY2VUaW1lKDUwMCksXHJcbiAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKVxyXG4gICAgICApLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICBpZiAoISFkYXRhKSB7XHJcbiAgICAgICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudmFsaWRHcm91cFRpdGxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOW9k+a1j+iniOWZqOeql+WPo+Wkp+Wwj+WPmOabtOaXtu+8jOWPmOabtOW8ueeql+eahOWkp+Wwj1xyXG4gIC8vIOeUsW5nQWZ0ZXJWaWV3SW5pdCgp6LCD55SoXHJcbiAgbGlzdGVuV2luZG93UmVzaXplKCkge1xyXG4gICAgY29uc3QgZGlhbG9nRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdGhpcy5kaWFsb2dJZCk7XHJcbiAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IG51bGw7XHJcbiAgICBpZiAoISFkaWFsb2dFbGVtZW50KSB7XHJcbiAgICAgIHRhcmdldEVsZW1lbnQgPSBkaWFsb2dFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1kaWFsb2cnKTtcclxuICAgIH1cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgIGlmICghIXRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gNjA7XHJcbiAgICAgICAgaWYgKGhlaWdodCA+IDY4MCkge1xyXG4gICAgICAgICAgaGVpZ2h0ID0gNjgwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpYWxvZ0hlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjb25zdCBpbm5lckhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgICAgICAgY29uc3QgbWFyZ2luVG9wID0gJy0nICsgaGVpZ2h0IC8gMiArICdweCc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIuc2V0U3R5bGUodGFyZ2V0RWxlbWVudCwgJ2hlaWdodCcsIGlubmVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0YXJnZXRFbGVtZW50LCAnbWFyZ2luLXRvcCcsIG1hcmdpblRvcCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5Yid5aeL5YyW57uE57uH5pS26JeP5pWw5o2uXHJcbiAgLy8g55Sxc2hvd0ZhcnJpc0RpYWxvZygp6LCD55So77yM5Y2z5omT5byA6YCJ57uE57uH5by556qX5pe25Y+R6YCB6K+35rGCXHJcbiAgcHJpdmF0ZSBpbml0RmF2b3JpdGVzKCkge1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic09yZ1R5cGUgPSB0aGlzLmFic09yZ1R5cGU7XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuYnVzTnVtID0gdGhpcy5idXNOdW07XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuaWRGaWVsZCA9IHRoaXMucHJpbWFyeUZpZWxkO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmFic1JmUXVlcnlVcmwgPSB0aGlzLmFic1JmUXVlcnlVcmw7XHJcbiAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuYWJzUmZNb2RpZnlVcmwgPSB0aGlzLmFic1JmTW9kaWZ5VXJsO1xyXG4gICAgdGhpcy5mYXZvcml0ZXNUb29sLmdldEZhdm9yaXRlc0xpc3QoKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXNEYXRhID0gcmVzdWx0ID8gKHJlc3VsdCBhcyBhbnkpLm9yZ0RhdGEgOiBbXTtcclxuICAgICAgdGhpcy5mYXZvcml0ZXNUb29sLmZhdm9yaXRlc0xpc3QgPSByZXNEYXRhO1xyXG4gICAgICB0aGlzLmZhdm9yaXRlc1Rvb2wuc2V0RmF2b3JpdGVzTGlzdChyZXNEYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5omT5byA6YCJ57uE57uH5by556qXXHJcbiAgc2hvd0ZhcnJpc0RpYWxvZygpIHtcclxuICAgIHRoaXMuaXNTaG93ID0gdHJ1ZTtcclxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaWFsb2cuc2hvdygpO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dUYWJJZHMuaW5kZXhPZih0aGlzLmZhdm9yaXRlc1RhYklkKSAhPT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuaW5pdEZhdm9yaXRlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmFnYWluc3RTaW5nbGVTZWxlY3QpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS53YXJuaW5nKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5tdWx0aVNlbGVjdFwiKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1hcEZpZWxkcyAmJiAhT2JqZWN0LmtleXModGhpcy5tYXBGaWVsZHMpLmluY2x1ZGVzKHRoaXMucHJpbWFyeUZpZWxkKSkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLndhcm5pbmcodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLm1hcEZpZWxkc1wiKSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGVNZ3IuZW1pdFNlbGVjdGlvbnModGhpcy5zZWxlY3Rpb25zLCBDaGFuZ2VUeXBlLlZhbHVlQ2hhbmdlZCwgJ2Zvcm0nKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gaW5wdXTmlofmnKzmoYblhoXngrnlh7vmuIXpmaTmjInpkq7ml7bop6blj5FcclxuICBjbGVhckFsbCgpIHtcclxuICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKFtdKTtcclxuICAgIHRoaXMuaW5wdXRDbGVhci5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBpbnB1dOaWh+acrOahhuWGheWIoOmZpOafkOS4gOS4quW3sumAiee7hOe7h+aXtuinpuWPkVxyXG4gIHJlbW92ZUl0ZW0oZGF0YTogYW55LCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICBpZih0aGlzLnNlbGVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnNlbGVjdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgdGhpcy5hc3NlbWJsZUZpbmFsVGV4dCgpO1xyXG4gICAgICB0aGlzLmVtaXRTZWxlY3Rpb25zKGRhdGEsIENoYW5nZVR5cGUuUmVtb3ZlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuZmlsdGVyKHRleHQgPT4gdGV4dCAhPT0gZGF0YSk7XHJcbiAgICB9IFxyXG4gICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKHRoaXMuZmluYWxUZXh0LmpvaW4oKSk7XHJcbiAgICB0aGlzLnRhZ1JlbW92ZWQuZW1pdCh7XHJcbiAgICAgIGRlbGV0ZUl0ZW06IGRhdGEsXHJcbiAgICAgIGRlbGV0ZUluZGV4OiBpbmRleCxcclxuICAgICAgc2VsZWN0aW9uczogdGhpcy5zZWxlY3Rpb25zXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOa4heepuuacgOi/keW3sumAiee7hOe7h1xyXG4gIGNsZWFyU2VsZXRpb25zKCkge1xyXG4gICAgdGhpcy5zdGF0ZU1nci5lbWl0U2VsZWN0aW9ucyhbXSwgQ2hhbmdlVHlwZS5WYWx1ZUNoYW5nZWQsICdmb3JtJyk7XHJcbiAgfVxyXG5cclxuICAvLyDngrnlh7vmkJzntKLmjInpkq7miJbogIXmlbLlh7vlm57ovabml7bop6blj5FcclxuICBvblNlYXJjaCgpIHtcclxuICAgIGlmICghIXRoaXMuc2VhcmNoVGV4dCkge1xyXG4gICAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLm9uU2VhcmNoVG9rZW4gPSBDb21tb25VdGlsLm5ld0d1aWQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOa4heepuue7hOe7h+aQnOe0ouWGheWuueaXtuinpuWPkVxyXG4gIGNsZWFyU2VhcmNoKCkge1xyXG4gICAgdGhpcy5oaWRlU2VhcmNoUGFuZWwgPSB0cnVlO1xyXG4gICAgdGhpcy5vblNlYXJjaFRva2VuID0gZmFsc2U7XHJcbiAgICBpZih0aGlzLmN1cnJlbnRUYWJJZCA9IHRoaXMub3JnYW5pemF0aW9uVGFiSWQpIHtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUuY2xlYXJBbGwoKTtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUucm93SGVpZ2h0ID0gMjg7XHJcbiAgICAgIGlmKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuY2hlY2tPcmdUcmVlTm9kZXMoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0T3JnVHJlZU5vZGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g55uR5ZCs5pCc57Si5qGG5YaF6L6T5YWl55qE5paH5pysXHJcbiAgbGlzdGVuU2VhcmNoVGV4dChlKSB7XHJcbiAgICBpZiAoZS5jb2RlID09PSAnQmFja3NwYWNlJyB8fCBlLmNvZGUgPT09ICdEZWxldGUnKSB7XHJcbiAgICAgIGlmICghdGhpcy5zZWFyY2hUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlYXJjaCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDnm5HlkKzmkJzntKLpobXnmoTlhbPpl63kuovku7bvvIznm67liY3lj6rkvJrmjqXmlLbliLB0cnVlXHJcbiAgbGlzdGVuQ2xvc2VQYW5lbENoYW5nZShlKSB7XHJcbiAgICB0aGlzLmhpZGVTZWFyY2hQYW5lbCA9IGU7XHJcbiAgICAvLyDlhbPpl63mkJzntKLnu5PmnpzpobXlkI7vvIzpnIDopoHmm7TmlrDmoJHoioLngrnnmoTmmK/lkKbpgInkuK3nirbmgIFcclxuICAgIGlmKHRoaXMuY3VycmVudFRhYklkID09IHRoaXMub3JnYW5pemF0aW9uVGFiSWQpIHtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUuY2xlYXJBbGwoKTtcclxuICAgICAgdGhpcy5saWJPcmdUcmVlLmZhcnJpc1RyZWUucm93SGVpZ2h0ID0gMjg7XHJcbiAgICAgIGlmKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuY2hlY2tPcmdUcmVlTm9kZXMoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0T3JnVHJlZU5vZGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5YWz6Zet5L+d5a2Y576k57uE55qE5by556qX5pe254K55Ye74oCc5Y+W5raI4oCd5oiW6ICF5Y+z5LiK6KeS5Y+J5Y+36Kem5Y+RXHJcbiAgY2xvc2VHcm91cERpYWxvZygpIHtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dPcGVuZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5lZGl0aW5nR3JvdXBJZCA9IG51bGw7XHJcbiAgICB0aGlzLmdyb3VwVGl0bGUgPSBudWxsO1xyXG4gICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ1RpdGxlID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZ3JvdXAuc2F2ZUdyb3VwXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8g5Zyo5L+d5a2Y576k57uE55qE5by556qX5YaF77yM5L+u5pS5576k57uE5ZCN56ew5pe26Kem5Y+R77yM55uR5ZCsa2V5dXDkuovku7ZcclxuICBsaXN0ZW5Hcm91cFRpdGxlKGUpIHtcclxuICAgIHRoaXMuZ3JvdXBUaXRsZVN0cmVhbS5uZXh0KHRoaXMuZ3JvdXBUaXRsZSk7XHJcbiAgfVxyXG5cclxuICAvLyDpgInnu4Tnu4fnmoTlvLnnqpflhoXmnInkuIDkuKrigJzlt7LpgInigJ3moIflv5fvvIzpvKDmoIfnp7vkuIrljrvlkI7kvJrmmL7npLrlt7LpgInnu4Tnu4fnmoTpobXpnaLvvIzor6XpobXpnaLlhoXmnInigJzkv53lrZjkuLrnvqTnu4TigJ3nmoTmjInpkq7vvIzngrnlh7vlkI7lj6/ku6XmiZPlvIDkv53lrZjnvqTnu4TnmoTlvLnnqpdcclxuICBsaXN0ZW5PcGVuR3JvdXAoZSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZTtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmdyb3VwLnNhdmVHcm91cFwiKTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+e+pOe7hOe8lui+keaMiemSruinpuWPke+8jOWPr+S/ruaUuemAieS4ree+pOe7hOeahOWQjeensOWPiuaPj+i/sFxyXG4gIGxpc3Rlbkdyb3VwQ2hhbmdlKGl0ZW06IGFueSkge1xyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gdHJ1ZTtcclxuICAgIHRoaXMuZWRpdGluZ0dyb3VwSWQgPSBpdGVtLmlkO1xyXG4gICAgdGhpcy5ncm91cFRpdGxlID0gaXRlbS50aXRsZTtcclxuICAgIHRoaXMuZ3JvdXBOb3RlID0gaXRlbS5kZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuZ3JvdXBEaWFsb2dUaXRsZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmdyb3VwLmVkaXRHcm91cFwiKTtcclxufVxyXG5cclxuICAvLyDlhbPpl63kv53lrZjnvqTnu4TnmoTlvLnnqpfml7bngrnlh7vigJznoa7lrprigJ3op6blj5HvvIzlsIblvZPliY3lt7LpgInnu4Tnu4fkv53lrZjkuLrkuIDkuKrmlrDnmoTnvqTnu4RcclxuICBzYXZlR3JvdXAoKSB7XHJcbiAgICBpZiAoIXRoaXMuZ3JvdXBUaXRsZSkge1xyXG4gICAgICB0aGlzLnZhbGlkR3JvdXBUaXRsZSA9IGZhbHNlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBncm91cElkID0gQ29tbW9uVXRpbC5uZXdHdWlkKCk7XHJcbiAgICBsZXQgZ3JvdXBDb2RlID0gJ29yZ0dyb3VwX3ByaXZhdGVfJztcclxuICAgIGdyb3VwQ29kZSArPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMiwgMTApO1xyXG4gICAgY29uc3QgYWRkSWRzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xyXG4gICAgICBhZGRJZHMucHVzaChzZWxlY3Rpb25bdGhpcy5wcmltYXJ5RmllbGRdKTtcclxuICAgIH0pO1xyXG4gICAgaWYoYWRkSWRzLmxlbmd0aCA+IDEwMDApIHtcclxuICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5zaG93KCd3YXJuaW5nJywgdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwib3JnYW5pemF0aW9uU2VsZWN0b3IuZXJyb3JNZXNzYWdlLmxpbWl0XCIpLCB0cnVlKTtcclxuICAgICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZ3JvdXBUaXRsZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZ3JvdXBOb3RlID0gbnVsbDtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ncm91cERpYWxvZ09wZW5kID0gZmFsc2U7XHJcbiAgICBjb25zdCBib2R5OiBTYXZlR3JvdXBSZXFldXN0UGFyYW0gPSB7XHJcbiAgICAgIGdyb3VwSWQsXHJcbiAgICAgIGdyb3VwQ29kZSxcclxuICAgICAgdGl0bGU6IHRoaXMuZ3JvdXBUaXRsZSxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZ3JvdXBOb3RlLFxyXG4gICAgICBhYnNPcmdUeXBlOiB0aGlzLmFic09yZ1R5cGUsXHJcbiAgICAgIGNoYW5nZVR5cGU6IE51bWJlcigxKVxyXG4gICAgfTtcclxuICAgIGlmICh0aGlzLmVkaXRpbmdHcm91cElkKSB7XHJcbiAgICAgIGJvZHkuZ3JvdXBJZCA9IHRoaXMuZWRpdGluZ0dyb3VwSWQ7XHJcbiAgICAgIGJvZHkuY2hhbmdlVHlwZSA9IE51bWJlcigyKTtcclxuICAgICAgZGVsZXRlIGJvZHkuZ3JvdXBDb2RlO1xyXG4gICAgICB0aGlzLnVwZGF0ZU5hbWVPck5vdGUoYm9keSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0dyb3VwJCA9IHRoaXMuYXBpU2VydmljZS5zYXZlR3JvdXAoYm9keSk7XHJcbiAgICBuZXdHcm91cCQucGlwZShcclxuICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgIChyZXM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saWJPcmdHcm91cC5zZWxlY3RlZEdyb3VwSWQgPSBncm91cElkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBUaXRsZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZE9yZ3NJbk5ld0dyb3VwJCA9IHRoaXMuYXBpU2VydmljZS5zYXZlR3JvdXAoeyBncm91cElkLCBhZGRJZHMsIGRlbGV0ZUlkczogW10sIGNoYW5nZVR5cGU6IE51bWJlcigzKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkT3Jnc0luTmV3R3JvdXAkLnBpcGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGliT3JnR3JvdXAuZ2V0R3JvdXBMaXN0KHtzYXZlR3JvdXA6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5zYXZlT3JnYW5pemF0aW9uXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICksXHJcbiAgICAgICAgdGFwKFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMubWVzc2FnZVNlcnZpY2Uuc2hvdygnZXJyb3InLCB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5lcnJvck1lc3NhZ2Uuc2F2ZUdyb3VwXCIpLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZU5hbWVPck5vdGUocGFyYW06IFNhdmVHcm91cFJlcWV1c3RQYXJhbSkge1xyXG4gICAgY29uc3QgdXBkYXRlSW5mbyQgPSB0aGlzLmFwaVNlcnZpY2Uuc2F2ZUdyb3VwKHBhcmFtKTtcclxuICAgIHVwZGF0ZUluZm8kLnBpcGUoXHJcbiAgICAgIHRhcChcclxuICAgICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgaWYoZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRpbmdHcm91cElkID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cFRpdGxlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5ncm91cE5vdGUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmdyb3VwRGlhbG9nVGl0bGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJvcmdhbml6YXRpb25TZWxlY3Rvci5ncm91cC5zYXZlR3JvdXBcIik7XHJcbiAgICAgICAgICAgIHRoaXMubGliT3JnR3JvdXAuZ2V0R3JvdXBMaXN0KHt1cGRhdGVOYW1lT3JOb3RlOiB0cnVlfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2VydmljZS5zaG93KCdlcnJvcicsIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcIm9yZ2FuaXphdGlvblNlbGVjdG9yLmVycm9yTWVzc2FnZS5lZGl0R3JvdXBcIiksIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+mAiee7hOe7h+W8ueeql+eahOehruWumuaIluiAheWPlua2iOaMiemSruaXtuinpuWPke+8jDHkuLrnoa7lrprvvIww5Li65Y+W5raIXHJcbiAgcmV0dXJuUmVzdWx0KHR5cGU6IG51bWJlcikge1xyXG4gICAgbGV0IGZpbmFsVGV4dCA9ICcnO1xyXG4gICAgaWYgKCEhdHlwZSkge1xyXG4gICAgICB0aGlzLmNvbmZpcm1Ub2tlbiA9IHRydWU7XHJcbiAgICAgIHRoaXMuYXNzZW1ibGVGaW5hbFRleHQoKTtcclxuICAgICAgZmluYWxUZXh0ID0gdGhpcy5maW5hbFRleHQuam9pbigpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25zICYmIHRoaXMuc2VsZWN0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbnNDaGFuZ2UuZW1pdCh7XHJcbiAgICAgICAgICBzZWxlY3Rpb25zOiB0aGlzLnNlbGVjdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UoZmluYWxUZXh0KTtcclxuICAgICAgICB0aGlzLm9uTW9kZWxUb3VjaGVkKGZpbmFsVGV4dCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKGZpbmFsVGV4dCk7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsVG91Y2hlZChmaW5hbFRleHQpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0NoYW5nZS5lbWl0KHtcclxuICAgICAgICAgIHNlbGVjdGlvbnM6IHRoaXMuc2VsZWN0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZih0aGlzLm1hcEZpZWxkcykge1xyXG4gICAgICAgIHRoaXMubWFwRmllbGRzMkNvbXBvbmVudCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYXNzZW1ibGVEYXRhQnlPcmdJZHModGhpcy5vcmdJZHMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLm9yZ0lkcyA9IFtdO1xyXG4gICAgdGhpcy5kaWFsb2cuY2xvc2UoKTtcclxuICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUYWJzKGU6IGFueSkge1xyXG4gICAgaWYoIXRoaXMuaGlkZVNlYXJjaFBhbmVsKSB7XHJcbiAgICAgIHRoaXMuaGlkZVNlYXJjaFBhbmVsID0gdHJ1ZTtcclxuICAgICAgdGhpcy5vblNlYXJjaFRva2VuID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnRUYWJJZCA9IGUubmV4dElkO1xyXG4gICAgaWYodGhpcy5zaG93VGFiSWRzLmluY2x1ZGVzKHRoaXMub3JnYW5pemF0aW9uVGFiSWQpKSB7XHJcbiAgICAgIHRoaXMubGliT3JnVHJlZS5jdXJyZW50VGFiSWQgPSB0aGlzLmN1cnJlbnRUYWJJZDtcclxuICAgIH1cclxuICAgIGlmIChlLm5leHRJZCA9PT0gdGhpcy5ncm91cFRhYklkKSB7XHJcbiAgICAgIGlmKCF0aGlzLmxpYk9yZ0dyb3VwLmdyb3VwRGF0YS5wdWJsaWMubGVuZ3RoICYmICF0aGlzLmxpYk9yZ0dyb3VwLmdyb3VwRGF0YS5wZXJzb25hbC5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ0dyb3VwLmFzc2VtYmxlRGF0YSh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmKGUubmV4dElkID09PSB0aGlzLm9yZ2FuaXphdGlvblRhYklkKSB7XHJcbiAgICAgIGlmKHRoaXMubGliT3JnVHJlZS5pbml0TG9hZCkge1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5sb2FkVHJlZURhdGEoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuZmFycmlzVHJlZS5jbGVhckFsbCgpO1xyXG4gICAgICAgIHRoaXMubGliT3JnVHJlZS5mYXJyaXNUcmVlLnJvd0hlaWdodCA9IDI4O1xyXG4gICAgICAgIGlmKHRoaXMubXVsdGlTZWxlY3QpIHtcclxuICAgICAgICAgIHRoaXMubGliT3JnVHJlZS5jaGVja09yZ1RyZWVOb2RlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmxpYk9yZ1RyZWUuc2VsZWN0T3JnVHJlZU5vZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19