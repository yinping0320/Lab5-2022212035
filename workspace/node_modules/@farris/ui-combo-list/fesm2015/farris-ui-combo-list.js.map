{"version":3,"file":"farris-ui-combo-list.js.map","sources":["ng://@farris/ui-combo-list/lib/http/ComboHttpService.ts","ng://@farris/ui-combo-list/lib/combo.service.ts","ng://@farris/ui-combo-list/lib/services/combo.locale.service.ts","ng://@farris/ui-combo-list/lib/base-combo.component.ts","ng://@farris/ui-combo-list/lib/combo-list.component.ts","ng://@farris/ui-combo-list/lib/combo-list.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface ComboHttpService {\r\n    /**\r\n     * æ ¹æ®åæ°æ®IDåç¸å³åæ°è·åæ°æ®\r\n     * @param uri æ°æ®ID or Rest API\r\n     * @param data æå¡å¨ç«¯æ¥æ¶åæ° key/value\r\n     */\r\n    context?: any;\r\n    getData(uri: string, params?: any, method?: string): Observable<any>;\r\n}\r\nexport const ComboServerSideToken = new InjectionToken<ComboHttpService>('Combo Grid HTTP service');\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { BehaviorSubject, Subject, Observable, of } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { debounceTime, map, switchMap, catchError, tap, delay } from 'rxjs/operators';\r\nimport { LoadingService, LoadingComponent } from '@farris/ui-loading';\r\nimport { LookupUtils, ServerSideToken } from '@farris/ui-lookup';\r\nimport { ComboServerSideToken, ComboHttpService } from './http/ComboHttpService';\r\nimport { NormalObject } from './combo.interface';\r\n\r\n@Injectable()\r\nexport class ComboService {\r\n\r\n    selections$ = new Subject<any>();\r\n    isOpen$ = new BehaviorSubject<boolean|any>(false);\r\n\r\n    data$ = new BehaviorSubject<any>('');\r\n    serachValue$ = new Subject<any>();\r\n    loadSuccess$ = new Subject();\r\n    treeInfo$ = new BehaviorSubject<any>(null);\r\n\r\n    selections: NormalObject[];\r\n    idField: string;\r\n    valueField: string;\r\n    textField: string;\r\n    multiSelect: boolean;\r\n    displayType = 'LIST';\r\n    separator = ',';\r\n\r\n\r\n    _uri: string;\r\n    get uri() {\r\n        return this._uri;\r\n    }\r\n    set uri(val: string) {\r\n        this._uri = val;\r\n        this.data$.next([]);\r\n    }\r\n\r\n    selectedValues;\r\n    pageInfo: any;\r\n    treeInfo: any;\r\n    columns: NormalObject[] = [];\r\n    context: any;\r\n    remoteSearch = true;\r\n\r\n    panelElement: any = null;\r\n\r\n    treeSearchHandler: any = null;\r\n\r\n    // æ å¸®å©å è½½è®¾ç½®\r\n    private treeloadconfig = null;\r\n    private _data: NormalObject[] = [];\r\n    private loading: LoadingComponent;\r\n    private lookupUtils: LookupUtils;\r\n    private comboHttp: ComboHttpService;\r\n    get data(): NormalObject[] {\r\n        return this._data;\r\n    }\r\n    set data(value: NormalObject[]) {\r\n        this._data = value || [];\r\n        if (Array.isArray(value)) {\r\n            this.data$.next(value);\r\n        }\r\n    }\r\n\r\n\r\n    constructor(public http: HttpClient, public loadingService: LoadingService, private injector: Injector) {\r\n        this.serachValue$.pipe(debounceTime(300)).subscribe(value => {\r\n            if (!this.remoteSearch) {\r\n                this.filterData(value, this.textField);\r\n            } else {\r\n                this.filterDataOnServer(value);\r\n            }\r\n        });\r\n    }\r\n\r\n    injectService() {\r\n        if (this.injector && !this.comboHttp) {\r\n            this.lookupUtils = this.injector.get(LookupUtils, null);\r\n            if (this.displayType.indexOf('LOOKUP') > -1) {\r\n                this.comboHttp = this.injector.get(ServerSideToken, null);\r\n            } else {\r\n                this.comboHttp = this.injector.get(ComboServerSideToken, null);\r\n            }\r\n        }\r\n    }\r\n\r\n    toBoolean(value: any): boolean {\r\n        return value != null && `${value}` !== 'false';\r\n    }\r\n\r\n    selectItem(data: any, index?: number, emitEvent = true) {\r\n        if (!this.multiSelect) {\r\n            this.selections = [];\r\n        }\r\n        if (Array.isArray(data)) {\r\n            data.forEach(n => {\r\n                if (this.selections.findIndex(s => s[this.idField] === n[this.idField]) === -1) {\r\n                    this.selections.push(n);\r\n                }\r\n            });\r\n        } else {\r\n            if (this.selections.findIndex(s => s[this.idField] === data[this.idField]) === -1) {\r\n                this.selections.push(data);\r\n            }\r\n        }\r\n        if (emitEvent) {\r\n            this.selections$.next({action: 'clicked'});\r\n        }\r\n    }\r\n\r\n    unSelectItem(data: any) {\r\n        this.selections = this.selections.filter(item => {\r\n            // return item[this.idField] !== data[this.idField];\r\n            return JSON.stringify(item) !== JSON.stringify(data);\r\n        });\r\n        this.selections$.next({action: 'clicked'});\r\n    }\r\n\r\n\r\n    selectAll(datas) {\r\n        (datas || []).forEach(n => {\r\n            if (!this.selections.find(i => i[this.idField] === n[this.idField])) {\r\n                this.selections.push(n);\r\n            }\r\n        });\r\n        // this.selections = datas;\r\n        this.selections$.next({action: 'clicked'});\r\n    }\r\n\r\n    unSelectAll(datas) {\r\n        // this.selections = [];\r\n        datas = datas || [];\r\n        this.selections = (this.selections || []).filter(n => datas.findIndex(i => i[this.idField] === n[this.idField]) === -1 );\r\n        this.selections$.next({action: 'clicked'});\r\n    }\r\n\r\n    isSelect(id: any) {\r\n        if (this.selections && this.selections.length) {\r\n            return this.selections.find(item => item[this.idField] === id) !== undefined;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    loadData(data: any, selectValues = '', callback) {\r\n        if (data) {\r\n\r\n            if (selectValues === null || selectValues === undefined) {\r\n                selectValues = '';\r\n            }\r\n\r\n            if (typeof selectValues === 'boolean') {\r\n                selectValues = '' + selectValues;\r\n            }\r\n\r\n            // this.data$.next(data);\r\n            if (selectValues) {\r\n                let vals = [(selectValues + '')];\r\n                if (this.multiSelect) {\r\n                    vals = (selectValues + '').split(this.separator);\r\n                }\r\n\r\n                let selectedItems = vals.map(val => {\r\n                    return callback(data, val);\r\n                });\r\n                selectedItems = selectedItems.filter(el => el);\r\n                if ((!this.selections || !this.selections.length) && selectedItems.length) {\r\n                    this.selections = selectedItems;\r\n                }\r\n            } else {\r\n                this.selections = [];\r\n            }\r\n            this.selections$.next({action: 'initData'});\r\n        }\r\n    }\r\n\r\n    filterDataOnServer(params) {\r\n        this.getData(params).subscribe(r => {\r\n            this.closeLoading();\r\n            this.loadingService.clearAll();\r\n            if (r && r.items) {\r\n                switch (this.displayType) {\r\n                    case 'LOOKUPLIST': {\r\n                        this.loadLookUpDataTable(r, true);\r\n                        break;\r\n                    }\r\n                    case 'LOOKUPTREELIST': {\r\n                        this.loadLookUpDataTree(r);\r\n                        break;\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                this.data$.next([]);\r\n            }\r\n        });\r\n    }\r\n\r\n    // å®¢æ·ç«¯è¿æ»¤\r\n    filterData(val: string, field: any = 'text') {\r\n        if (val) {\r\n            let data = [];\r\n\r\n            if (this.displayType === 'LOOKUPLIST' || this.displayType === 'LIST') {\r\n                data = this.data.filter(item => {\r\n                    let itemval = this.getValueByObj(field, item);\r\n                    if (itemval != '' && itemval !== null && itemval !== undefined) {\r\n                        itemval = String(itemval).toLowerCase();\r\n                    }\r\n                    return itemval.indexOf(val.toLowerCase()) > -1;\r\n                });\r\n            }\r\n\r\n            // const data = this.data\r\n            //     ? this.data.filter(item => {\r\n            //         if (this.getValueByObj(filed, item)) {\r\n            //             return String(this.getValueByObj(filed, item)).indexOf(val) > -1;\r\n            //         } else if (item.data && this.getValueByObj(filed, item.data)) {\r\n            //             return String(this.getValueByObj(filed, item.data)).indexOf(val) > -1;\r\n            //         }\r\n            //     })\r\n            //     : [];\r\n            this.data$.next(data);\r\n        } else {\r\n            this.data$.next(this.data);\r\n        }\r\n    }\r\n\r\n\r\n    getSelections() {\r\n        return this.selections;\r\n    }\r\n\r\n    clearSelections() {\r\n        this.selections = [];\r\n    }\r\n\r\n    getValue(prop: string, selections?: any): string {\r\n        selections = selections ? selections : this.selections;\r\n        if (selections && selections.length) {\r\n            const tmp = selections.map(item => {\r\n                return this.getValueByObj(prop, item);\r\n            });\r\n            if (tmp && (tmp.length > 1 || tmp.length === 0)) {\r\n                return tmp.join(this.separator);\r\n            } else {\r\n                return tmp[0];\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    getValueByObj(field: string, data: any) {\r\n        if (!data) {\r\n            return '';\r\n        }\r\n        let resultVal = '';\r\n        if (field.indexOf('.') === -1) {\r\n            if (data.hasOwnProperty(field)) {\r\n                resultVal = data[field];\r\n            } else {\r\n                // console.log(`%cError: The %c\"${field}\"%c is not in `,\r\n                //         'color: #bb0000;font-weight: bold;', 'color: red;font-style: italic', 'color: #bb0000;font-weight: bold;', data);\r\n                resultVal = null;\r\n            }\r\n        } else {\r\n            resultVal = field.split('.').reduce((obj, key) => {\r\n                if (obj) {\r\n                    return obj[key];\r\n                } else {\r\n                    // console.log(`%cError: The %c\"${key}\"%c is not in  `,\r\n                    // 'color: #bb0000;font-weight: bold', 'color: red;font-style: italic', 'color: #bb0000;font-weight: bold;', obj);\r\n                    return null;\r\n                }\r\n            }, data);\r\n        }\r\n        return resultVal;\r\n    }\r\n\r\n    initData(params: any = {}, method = 'get', selectedIds = '') {\r\n        switch (this.displayType) {\r\n            case 'TreeList':\r\n            case 'LIST': {\r\n                if (params.data) {\r\n                    params = params.data;\r\n                }\r\n                this.getData(params, method).subscribe(d => {\r\n                    let __data = d;\r\n                    if (!this.uri) {\r\n                        __data = this.data;\r\n                    }\r\n                    if (this.displayType === 'TreeList') {\r\n                        this.loadDataTree(__data);\r\n                    } else {\r\n                        this.loadDataTable(__data);\r\n                    }\r\n                    this.loadSuccess$.next(true);\r\n                });\r\n                break;\r\n            }\r\n            case 'LOOKUPLIST':\r\n            case 'LOOKUPTREELIST': {\r\n                // TFS 466104\r\n                if (!selectedIds) {\r\n                    this.selections = [];\r\n                    this.selectedValues = '';\r\n                }\r\n\r\n                \r\n                this.loadLookupData(params, selectedIds, 'get', this.displayType === 'LOOKUPTREELIST');\r\n                break;\r\n            }\r\n        }\r\n\r\n        return this.loadSuccess$;\r\n    }\r\n\r\n    // æ­¤æ¹æ³ç¨äºç­ééä¸­çæ°æ®\r\n    // è¿ä¸æ­¥ä¼åï¼éè¦æå¡å¨ç«¯æä¾ä¸ä¸ªä¸æé æ ç»æãæ ¹æ®IDè¿åç®åçåè¡¨å³å¯\r\n    private treeNodesToFlatData(treeNodes: [], arr = []) {\r\n        treeNodes.forEach((n: any) => {\r\n            if (!n['addtional']) {\r\n                arr.push(n.data);\r\n            }\r\n            if (n.children && n.children.length) {\r\n                this.treeNodesToFlatData(n.children, arr);\r\n            }\r\n        });\r\n    }\r\n\r\n    private loadLookupData(params: any, selectedIds, method = 'get', isTree = false) {\r\n        const { data, enableFullTree, loadTreeDataType, searchValue } = params;\r\n        if (data) {\r\n            params = { customData: data };\r\n        }\r\n        if (this.displayType === 'LOOKUPTREELIST' && !this['treeToList']) {\r\n            params.enableFullTree = enableFullTree;\r\n            // params.loadTreeDataType = 'loadall'; \r\n            params.searchValue = {\"category\":\"all\"};\r\n            this.treeloadconfig = { enableFullTree, loadTreeDataType };\r\n\r\n            if (!isNaN(Number(params.expandLevel))) {\r\n                // åç«¯ -1 ä¸å±å¼   0 å¨å±å¼\r\n                // åç«¯  0 ä¸å±å¼  -1 å¨å±å¼\r\n                if (params.expandLevel) {\r\n                    if (params.expandLevel === -1) {\r\n                        params.expandLevel = 0;\r\n                    }\r\n                } else {\r\n                    params.expandLevel = -1;\r\n                }\r\n                params.searchValue['layerNum'] = params.expandLevel;\r\n            }\r\n\r\n            params.searchValue = JSON.stringify(params.searchValue);\r\n        }\r\n\r\n        if (searchValue) {\r\n            params.searchValue = searchValue;\r\n        }\r\n\r\n        if (this['treeToList']) {\r\n            isTree = false;\r\n            this.displayType = 'LOOKUPLIST';\r\n        }\r\n\r\n        this.getData(params, method).pipe(\r\n            switchMap((data) => {\r\n                if (selectedIds) {\r\n                    return this.getSelectedItems(selectedIds).pipe(\r\n                        map(d => {\r\n                            if (d && d.items) {\r\n                                // data.selectedItems = isTree ?  d.items.map(n => n.data) : d.items;\r\n                                if (isTree) {\r\n                                    const arr = [];\r\n                                    this.treeNodesToFlatData(d.items, arr);\r\n                                    data.selectedItems = arr;\r\n                                } else {\r\n                                    data.selectedItems =  d.items;\r\n                                }\r\n                            } else {\r\n                                if (Array.isArray(d)) {\r\n                                    data.selectedItems = (selectedIds + '').split(this.separator).map(val => {\r\n                                        if (isTree) {\r\n                                            return this.treeNodeToFlatData(d, val, this.idField);\r\n                                        } else {\r\n                                            return d.find(n => n[this.idField] + '' == val || n[this.textField] == val);\r\n                                        }\r\n                                    }).filter(n => n !=undefined && n != null);\r\n                                }\r\n                            }\r\n                            return data;\r\n                        }),\r\n                        catchError(() => {\r\n                            return of(data);\r\n                        })\r\n                    );\r\n                } else {\r\n                    data.selectedItems = [];\r\n                }\r\n                return of(data);\r\n            })\r\n        ).subscribe(data => {\r\n            this.loadingService.clearAll();\r\n\r\n            if (data) {\r\n                if (isTree) {\r\n                    this.loadLookUpDataTree(data);\r\n                } else {\r\n                    this.loadLookUpDataTable(data);\r\n                }\r\n            }\r\n\r\n            this.loadSuccess$.next(true);\r\n        });\r\n\r\n    }\r\n\r\n    getSelectedItems(selIds) {\r\n        const searchParam = {\r\n            category: 'fav', favoriteIds: ('' + selIds).split(this.separator)\r\n        };\r\n        const p = {searchValue: JSON.stringify(searchParam),  enableFullTree: false, loadTreeDataType: 'default'};\r\n        return this.getData(p);\r\n    }\r\n\r\n    getData(params = {}, method = 'get', loadChild = false): Observable<any> {\r\n        if (this.uri) {\r\n            // this.data = []\r\n            // tfs 470519\r\n            if (this.data && this.data.length && !loadChild) {\r\n                this.data = [];\r\n            }\r\n\r\n            params['treeToList'] = this['treeToList'];\r\n            params['navTreeToList'] = this['navTreeToList'];\r\n\r\n            if (this['treeToList']) {\r\n                this.displayType = 'LOOKUPLIST';\r\n            }\r\n\r\n            this.showLoading();\r\n            if (this.comboHttp) {\r\n                if (this.context) {\r\n                    this.comboHttp.context = this.context;\r\n                }\r\n                return this.comboHttp.getData(this.uri, params, method).pipe(\r\n                    tap(() => {\r\n                        this.closeLoading();\r\n                    }),\r\n                );\r\n            } else {\r\n                return this.http.request(method, this.uri, params).pipe(\r\n                    tap(() => {\r\n                        this.closeLoading();\r\n                    }),\r\n                );\r\n            }\r\n        } else {\r\n            if (this.data) {\r\n                return of(this.data).pipe(delay(10));\r\n            } else {\r\n                return of([]).pipe(delay(10));\r\n            }\r\n        }\r\n    }\r\n\r\n    loadDataTable(data: any) {\r\n        if (data instanceof Array) {\r\n            this.data = data;\r\n        } else {\r\n            this.data = data ? data.returnValue : [];\r\n        }\r\n        this.loadData(this.data, this.selectedValues, (dataArr, val) => {\r\n            return dataArr.find(d => d[this.idField] + '' == val || d[this.textField] == val);\r\n        });\r\n        this.closeLoading();\r\n    }\r\n\r\n    loadDataTree(data: any) {\r\n        if (data instanceof Array) {\r\n            this.data = data;\r\n        } else {\r\n            this.data = data ? data.returnValue : [];\r\n        }\r\n        this.loadData(this.data, this.selectedValues, (dataArr, val) => {\r\n            return eachData(dataArr, val, this.idField);\r\n            function eachData(paramData, paramVal, idField) {\r\n                let rtnData: any = '';\r\n                paramData.find(d => {\r\n                    if (d.data[idField] == paramVal) {\r\n                        rtnData = d.data;\r\n                        return true;\r\n                    } else if (d.children && d.children.length) {\r\n                        rtnData = eachData(d.children, paramVal, idField);\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                });\r\n                return rtnData;\r\n            }\r\n        });\r\n        this.closeLoading();\r\n    }\r\n\r\n    loadLookUpDataTable(resData: any, sortable = false) {\r\n        this.closeLoading();\r\n\r\n        if (typeof resData === 'object') {\r\n\r\n            if (resData.returnValue) {\r\n                resData = resData.returnValue;\r\n            }\r\n\r\n            if (!sortable &&  resData.columns) {\r\n                this.columns = resData.columns;\r\n            }\r\n            if (resData.pageInfo) {\r\n                this.pageInfo = resData.pageInfo;\r\n                this.pageInfo.total = resData.total ? resData.total : 0;\r\n            }\r\n\r\n            if ( resData.items) {\r\n                this.data = resData.items;\r\n            }\r\n\r\n        }\r\n        if (resData && resData.selectedItems) {\r\n            this.selections = resData.selectedItems || [];\r\n        }\r\n        \r\n        if (this.selections) {\r\n            const ids = this.selections.map(n => n[this.idField]).join(this.separator);\r\n            if (ids !== this['__SELECTEDIDS__']) {\r\n                // this.selectedValues = ids;\r\n                this['__SELECTEDIDS__'] = ids;\r\n            }\r\n        }\r\n\r\n        this.loadData(this.data, this['__SELECTEDIDS__'], (dataArr, val) => {\r\n            let isMaped = dataArr.find(d => d[this.idField] + '' == val);\r\n            if (this.selections) {\r\n                isMaped = !isMaped ? this.selections.find(d => d[this.idField] + '' == val) : isMaped;\r\n            }\r\n            return isMaped;\r\n        });\r\n    }\r\n\r\n    checkNodeCanBeSelect(nodes, allData = true) {\r\n        if (nodes && nodes.length) {\r\n            return nodes.map((node: any) => {\r\n                if (node.hasOwnProperty('addtional')) {\r\n                    node.selectable = !node['addtional'];\r\n                }\r\n\r\n                if (node.children && node.children.length) {\r\n                    this.checkNodeCanBeSelect(node.children, allData);\r\n                } else {\r\n                    if (allData) {\r\n                        node.leaf = true;\r\n                    }\r\n                }\r\n\r\n                return node;\r\n            });\r\n        }\r\n        return nodes;\r\n    }\r\n\r\n    loadLookUpDataTree(resData: any) {\r\n        this.closeLoading();\r\n\r\n        if (!resData) {\r\n            return;\r\n        }\r\n\r\n        if (resData instanceof Array) {\r\n            this.data = resData;\r\n            if (resData['selectedItems']) {\r\n                this.selections = resData['selectedItems'] || [];\r\n            }\r\n        } else {\r\n            if (resData.returnValue) {\r\n                resData = resData.returnValue;\r\n            }\r\n            this.columns = resData.columns;\r\n            this.treeInfo = resData.treeInfo;\r\n\r\n            this.treeInfo$.next(this.treeInfo);\r\n            if (resData.selectedItems) {\r\n                this.selections = resData.selectedItems || [];\r\n            }\r\n           \r\n            if (this.treeInfo && !this.treeInfo['treeDataIsInit']) {\r\n                if (this.treeInfo.layerType.toLowerCase() === 'pathcode') {\r\n                    this.data = this.lookupUtils.makeTree(resData.items, this.treeInfo);\r\n                } else {\r\n                    this.data = this.lookupUtils.makeTreeWithParentID(\r\n                        resData.items,\r\n                        '',\r\n                        `${this.treeInfo.dataField}.${this.treeInfo.parentField}`,\r\n                        this.idField\r\n                    );\r\n                }\r\n            } else if (resData.items) {\r\n                // this.data = resData.items;\r\n\r\n                const isLoadAllTreeData = () => {\r\n                    if (this.treeloadconfig.loadTreeDataType === 'default') {\r\n                        return this.treeInfo.loadDataType === 'all';\r\n                    } else {\r\n                        return this.treeloadconfig.loadTreeDataType === 'loadall';\r\n                    }\r\n                };\r\n\r\n                this.data = this.checkNodeCanBeSelect(resData.items, isLoadAllTreeData());\r\n            }\r\n        }\r\n\r\n        if (this.selections) {\r\n            const ids = this.selections.map(n => n[this.idField]).join(this.separator);\r\n            if (ids !== this['__SELECTEDIDS__']) {\r\n                this['__SELECTEDIDS__'] = ids;\r\n            }\r\n        }\r\n\r\n        this.loadData(this.data, this['__SELECTEDIDS__'], (dataArr, val) => {\r\n            return this.treeNodeToFlatData(dataArr, val, this.idField);\r\n        });\r\n    }\r\n\r\n    treeNodeToFlatData(paramData, paramVal, idField) {\r\n        let rtnData: any = '';\r\n        paramData.find(d => {\r\n            if ((d.data && d.data[idField] == paramVal) || d[idField] == paramVal) {\r\n                rtnData = d.data;\r\n                return true;\r\n            } else if (d.children && d.children.length) {\r\n                rtnData = this.treeNodeToFlatData(d.children, paramVal, idField);\r\n                return rtnData ? true : false;\r\n            } else {\r\n                return false;\r\n            }\r\n        });\r\n        return rtnData;\r\n    }\r\n\r\n    private showLoading() {\r\n        this.loading = this.loadingService.show({ container: this.panelElement, delay: 100 });\r\n    }\r\n\r\n    closeLoading() {\r\n        if (this.loading) {\r\n            this.loading.close();\r\n            this.loading = null;\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Injectable()\r\nexport class ComboLocaleService {\r\n    private localeConfig: any = {\r\n        'ZH_CN' : {\r\n            placeholder: 'è¯·éæ©'\r\n        },\r\n        'EN_US' : {\r\n            placeholder: 'Please Select'\r\n        }\r\n    };\r\n    constructor(private localeService: LocaleService) {}\r\n    public getLocaleConfig() {\r\n        const locale = this.localeService.localeId;\r\n\r\n        this.localeConfig = this.localeService.getResources(`${locale}.combo`);\r\n\r\n        return this.localeConfig;\r\n\r\n        // if (locale && this.localeConfig[locale]) {\r\n        //     return this.localeConfig[locale];\r\n        // } else {\r\n        //     return this.localeConfig.ZH_CN;\r\n        // }\r\n    }\r\n}\r\n","import { NotifyService } from '@farris/ui-notify';\r\nimport {\r\n    OnInit, Input, Output, EventEmitter, ElementRef, ChangeDetectorRef,\r\n    Renderer2, ViewChild, AfterViewInit, OnDestroy, Inject, Injector, NgZone\r\n} from '@angular/core';\r\nimport { Subject, interval, of, Observable, Subscription, fromEvent } from 'rxjs';\r\nimport { ControlValueAccessor, NgControl } from '@angular/forms';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { takeUntil, filter, skip, debounceTime, throttle, take, delayWhen, throwIfEmpty } from 'rxjs/operators';\r\nimport { ComboService } from './combo.service';\r\nimport { InputGroupComponent } from '@farris/ui-input-group';\r\nimport { SelectItem, NormalObject, ComboChanges } from './combo.interface';\r\nimport { ComboLocaleService } from './services/combo.locale.service';\r\nimport { CommonUtils, reqAnimFrame } from '@farris/ui-common';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\n\r\nlet nextUniqueId = 0;\r\nexport class BaseComboComponent implements OnInit, AfterViewInit, OnDestroy, ControlValueAccessor {\r\n    @Input() disabled = false;\r\n    @Input() readonly = false;\r\n    @Input() editable = true;\r\n    @Input() placeholder = '';\r\n    @Input() panelWidth = 300;\r\n    @Input() panelHeight: number | string = 'auto';\r\n    /** ä¸æé¢æ¿å®½åº¦ä¸è¾å¥æ¡å®½åº¦ä¿æä¸è³ï¼ é»è®¤ä¸º true */\r\n    @Input() autoWidth = true;\r\n    @Input() enableClear = true;\r\n    @Input() mapFields: any;\r\n    /** ç¦ç¨åªè¯»æ¶æ¾ç¤º placeholder */\r\n    @Input() forcePlaceholder = false;\r\n\r\n    /** ä»»æè¾å¥ 20210202 */\r\n    @Input() nosearch = false;\r\n    /** åè®¸æå¤§è¾å¥é¿åº¦ */\r\n    @Input() maxLength;\r\n\r\n    // é¼ æ æ»è¿æ¾ç¤ºææ¬åå®¹\r\n    @Input() enableTitle = true;\r\n    /** å±ç¤ºç±»åï¼ textææ¬ï¼tagæ ç­¾ã é»è®¤ text */\r\n    @Input() viewType: 'text' | 'tag' = 'text';\r\n    @Input()\r\n    set context(value) {\r\n        this.comboService.context = value;\r\n    }\r\n    @Input()\r\n    set mappingField(v: any) {\r\n        this.mapFields = v;\r\n    }\r\n    get mappingField(): any {\r\n        return this.mapFields;\r\n    }\r\n    @Input()\r\n    set data(val: NormalObject[]) {\r\n        this.comboService.data = val;\r\n    }\r\n    get data(): NormalObject[] {\r\n        return this.comboService.data;\r\n    }\r\n    \r\n    @Input()\r\n    set idField(val: string) {\r\n        this.comboService.idField = val;\r\n    }\r\n    get idField(): string {\r\n        return this.comboService.idField;\r\n    }\r\n    @Input()\r\n    set valueField(val: string) {\r\n        this.comboService.valueField = val;\r\n    }\r\n    get valueField(): string {\r\n        return this.comboService.valueField ? this.comboService.valueField : this.idField;\r\n    }\r\n    @Input()\r\n    set textField(val: string) {\r\n        this.comboService.textField = val;\r\n    }\r\n    get textField(): string {\r\n        return this.comboService.textField;\r\n    }\r\n    @Input()\r\n    set multiSelect(val: boolean) {\r\n        this.comboService.multiSelect = val;\r\n    }\r\n    get multiSelect(): boolean {\r\n        return this.comboService.multiSelect;\r\n    }\r\n    @Input()\r\n    set uri(val: string) {\r\n        this.comboService.uri = val;\r\n    }\r\n    get uri(): string {\r\n        return this.comboService.uri;\r\n    }\r\n    @Input()\r\n    set selectedValues(val: string) {\r\n        this.comboService.selectedValues = val;\r\n    }\r\n    get selectedValues(): string {\r\n        return this.comboService.selectedValues;\r\n    }\r\n\r\n    get selectedValuesStr() {\r\n        if (this.selectedValues === null || this.selectedValues === undefined) {\r\n            this.selectedValues = '';\r\n        }\r\n        return (this.selectedValues) + '';\r\n    }\r\n    @Input() displayText = '';\r\n    @Input() maxHeight = 200;\r\n    @Input() enableCancelSelected = false;\r\n\r\n    /** è¿ç«¯è¿æ»¤ */\r\n    @Input() get remoteSearch(): boolean {\r\n        return this.comboService.remoteSearch;\r\n    }\r\n    set remoteSearch(val: boolean) {\r\n        this.comboService.remoteSearch = val;\r\n    }\r\n    @Input() beforeShow: (instance?: this) => Observable<any>;\r\n    @Input() beforeHide: (instance?: this) => Observable<any>;\r\n\r\n    // å¦æé¢æ¿å·²æå¼ï¼ ç¹å»æ¸ç©ºæé®æ¶æ¯å¦å³é­é¢æ¿ãtrue: å³é­ï¼ false: ä¸å³é­ï¼\r\n    @Input() hidePanelOnClear = false;\r\n    /** å¼å¯åï¼ngModel çå¼ä¸º valueField or  idField; å¦åä¸ºtextFieldçå¼ */\r\n    @Input() useValue = false;\r\n    /** åéç¬¦ */\r\n    @Input() separator = ',';\r\n\r\n    @Input() treeToList = false;\r\n    @Input() navTreeToList = false;\r\n\r\n    @Input() emptyMsg = 'ææ æ°æ®';\r\n\r\n    @Output() showPanel = new EventEmitter();\r\n    @Output() hidePanel = new EventEmitter();\r\n    @Output() clear = new EventEmitter();\r\n    @Output() valueChange = new EventEmitter<ComboChanges>();\r\n    @Output() selectChange = new EventEmitter<SelectItem>();\r\n\r\n    @ViewChild('comboPanel') set cmbPanel(cmp: ElementRef) {\r\n        if (cmp) {\r\n            this._cmbPanel = cmp;\r\n            this.ro.observe(cmp.nativeElement);\r\n            this._comboPanelCreated$.next(cmp);\r\n        } else {\r\n            this._cmbPanel = null;\r\n            // this.ro.unobserve(this.el.nativeElement);\r\n            if (this.ro) {\r\n                this.ro.disconnect();\r\n            }\r\n            this._comboPanelCreated$.next(null);\r\n        }\r\n\r\n    }\r\n    @ViewChild('input') input: InputGroupComponent;\r\n    @ViewChild('input2') input2: ElementRef;\r\n    public isOpen = false;\r\n    public comPosition = {};\r\n    public destroy$ = new Subject();\r\n    public ngControl: NgControl | any = null;\r\n    public groupIcon = '<span class=\"f-icon f-icon-arrow-60-down\"></span>';\r\n    public localeService: ComboLocaleService;\r\n    public innerPanelHeight: any;\r\n    public commonUtils: CommonUtils;\r\n    private _cmbPanel: ElementRef = null;\r\n    private _comboPanelCreated$ = new Subject();\r\n    // private _hasPosited = false;\r\n    // private _container: Element;\r\n    private willHide$: Subject<void> = new Subject();\r\n    private containerElement: any;\r\n    /** overlay */\r\n    private panelElement: any;\r\n    private _documentClickEvent: any;\r\n    set selections(value: NormalObject[]) {\r\n        this.comboService.selections = value;\r\n    }\r\n    get selections(): NormalObject[] {\r\n        if (this.comboService.selections) {\r\n            return this.comboService.selections.filter(n => n !== null && n !== undefined);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    private panelListener = null;\r\n\r\n    private ngZone: NgZone = null;\r\n    private mouseWheelEvent = null;\r\n    textChangeSubject = new Subject();\r\n    private initdataSubscription: Subscription = null;\r\n\r\n    customData = null;\r\n\r\n    private originalText = '';\r\n    private isTextChange = false;\r\n\r\n    treeClientSearch = new Subject();\r\n\r\n    eventMgr: EventManager;\r\n    private notifySer: NotifyService;\r\n    private ro: ResizeObserver | null = null;\r\n    onChange: (value: string | string[]) => void = () => null;\r\n    onTouched: () => void = () => null;\r\n\r\n    constructor(\r\n        public el: ElementRef,\r\n        public cdr: ChangeDetectorRef,\r\n        @Inject(DOCUMENT) public document: any,\r\n        public render: Renderer2,\r\n        public comboService: ComboService,\r\n        public injector: Injector\r\n    ) {\r\n        this.initToggleAction();\r\n        this.initSelectionsChangeAction();\r\n        this.initDatasChangeAction();\r\n\r\n        this.commonUtils = this.injector.get(CommonUtils, null);\r\n        this.willHide$.pipe(\r\n            takeUntil(this.destroy$),\r\n            debounceTime(110)\r\n        ).subscribe(e => {\r\n            if (!this.nosearch && this.displayText !== this.originalText) {\r\n                this.displayText = this.originalText;\r\n\r\n                if (this.isLookup()) {\r\n                    this.onChange(this.displayText);\r\n                } else {\r\n                    const _displayText = this.comboService.getValue(this.textField);\r\n                    this.onValueChange({ text: _displayText, value: this.selectedValues, selections: this.selections });\r\n                }\r\n\r\n            }\r\n            this['_searchKeyWords'] = '';\r\n            this.onTouched();\r\n            this.hidePanel.emit(this);\r\n        });\r\n\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.eventMgr = this.injector.get(EventManager);\r\n        this.emitTextChange();\r\n\r\n        this.notifySer = this.injector.get(NotifyService, null);\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.localeService = this.injector.get(ComboLocaleService, '');\r\n        if (this.localeService) {\r\n            const localConfig = this.localeService.getLocaleConfig();\r\n            if (localConfig) {\r\n                if (!this.placeholder) {\r\n                    this.placeholder = localConfig['placeholder'] || 'è¯·éæ©';\r\n                }\r\n\r\n                this.emptyMsg =  localConfig['emptyMsg'] || 'ææ æ°æ®';\r\n            }\r\n        }\r\n\r\n        this.comboService.separator = this.separator;\r\n        this.comboService['treeToList'] = this.treeToList;\r\n        this.comboService['navTreeToList'] = this.navTreeToList;\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        const that = this;\r\n        this.ngControl = this.injector.get(NgControl, null);\r\n        fromEvent(window, 'resize').pipe(\r\n            takeUntil(this.destroy$)\r\n        ).pipe(\r\n            debounceTime(100),\r\n            throttle(ev => interval(100)),\r\n        ).subscribe(() => {\r\n            this.updatePanelWidth();\r\n            if (this.isOpen) {\r\n                this.comboService.isOpen$.next(false);\r\n                this.willHide$.next();\r\n            }\r\n        });\r\n\r\n        if (this.ngZone) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    that.updatePanelWidth();\r\n                });\r\n            });\r\n\r\n            let reszieTimer = null;\r\n            this.ro = new ResizeObserver((e) => {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    if (reszieTimer) {\r\n                        clearTimeout(reszieTimer);\r\n                    }\r\n                    reszieTimer = setTimeout(() => {\r\n                        if (that._cmbPanel && that.panelElement) {\r\n                            reqAnimFrame(() => {\r\n                                that.updatePosition(that._cmbPanel.nativeElement);\r\n                                if (that._cmbPanel.nativeElement.className.indexOf('f-area-show') === -1) {\r\n                                    that.render.addClass(that._cmbPanel.nativeElement, 'f-area-show');\r\n                                }\r\n                            });\r\n                        }\r\n                    }, 10);\r\n                });\r\n            });\r\n        }\r\n\r\n        this.comboService.injectService();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n        this.comboService.serachValue$.unsubscribe();\r\n\r\n        if (this.mouseWheelEvent) {\r\n            this.mouseWheelEvent();\r\n        }\r\n    }\r\n\r\n    private updatePanelWidth() {\r\n        const { width } = this.getInputSizeInfo();\r\n        this.panelWidth = this.autoWidth ? width : this.panelWidth;\r\n    }\r\n\r\n    onClick($event: any = null) {\r\n        if ($event) {\r\n            if ($event.stopPropagation) {\r\n                $event.stopPropagation();\r\n            } else {\r\n                if ($event.originalEvent) {\r\n                    $event.originalEvent.stopPropagation();\r\n                }\r\n            }\r\n        }\r\n\r\n        // éå¤æ§è¡é¢æ¿å³é­äºä»¶ ææ³¨éæ 20220917\r\n        // if (this.isOpen) {\r\n        //     this.willHide$.next();\r\n        // } else {\r\n        //     this.comboService.isOpen$.next(!this.isOpen);\r\n        // }\r\n\r\n        this.comboService.isOpen$.next(!this.isOpen);\r\n\r\n        if (this.input && this.input.textbox) {\r\n            this.input.textbox.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    onBlur(event: Event) {\r\n        this.onTouched();\r\n    }\r\n\r\n    onFocus(event: Event) {\r\n        // // å¯ç¨ä»»æè¾å¥åï¼ææ¬æ¡å¾å°ç¦ç¹åä¸å¼¹åºä¸æé¢æ¿ã2021/02/19\r\n        // if (this.nosearch) {\r\n        //     return ;\r\n        // }\r\n\r\n        // if (!this.isOpen) {\r\n        //     this.comboService.isOpen$.next(true);\r\n        //     // å»¶è¿æ§è¡åæ´æ£æµ æ´æ°å¼¹åºæ¡ä½ç½®\r\n        // of('').pipe(debounceTime(0)).subscribe(() => {\r\n        //     this.cdr.detectChanges();\r\n        // });\r\n        // } else {\r\n        //     this.hide();\r\n        // }\r\n    }\r\n\r\n    onInputclick($event?: any) {\r\n        if ($event && $event.stopPropagation) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.comboService.isOpen$.next(!this.isOpen);\r\n    }\r\n\r\n    onEnter(event: Event) { }\r\n\r\n    blur() {\r\n        this.input.textbox.nativeElement.blur();\r\n    }\r\n\r\n    focus() {\r\n        this.input.textbox.nativeElement.focus();\r\n    }\r\n\r\n    onClear() {\r\n        this.selectedValues = '';\r\n        this.selections = [];\r\n        this.comboService.selections = [];\r\n        this.onValueChange({ text: '', value: '', selections: [] });\r\n        this.clear.emit();\r\n        if (this.isOpen && this.hidePanelOnClear) {\r\n            // this.comboService.isOpen$.next(false);\r\n            this.willHide$.next();\r\n        } else {\r\n            if (this.isOpen && this.comboService.displayType === 'LIST') {\r\n                this.comboService.serachValue$.next('');\r\n            }\r\n        }\r\n    }\r\n\r\n    private getInputSizeInfo() {\r\n        const el: any = this.viewType === 'text' ? this.input.inputGroup : this.input2;\r\n        return el.nativeElement.getBoundingClientRect();\r\n    }\r\n\r\n\r\n    private emitTextChange() {\r\n        return this.textChangeSubject.pipe(\r\n            debounceTime(200)\r\n        ).subscribe((r: any) => {\r\n            const _selectedValues = this.selectedValues;\r\n            const val = r ? r : this.displayText;\r\n\r\n            if (r === '') {\r\n                this.onClear();\r\n            } else if (this.nosearch) {\r\n                this.onValueChange({ text: r, value: '', selections: this.selections, nosearch: true });\r\n            }\r\n\r\n            if (!this.remoteSearch) {\r\n                if (!this.multiSelect) {\r\n                    if (this.comboService.displayType === 'LOOKUPTREELIST') {\r\n                        this.treeClientSearch.next(val);\r\n                    } else {\r\n                        this.comboService.serachValue$.next(val);\r\n                    }\r\n                } else {\r\n                    const valArr = (val + '').split(this.separator);\r\n                    const appendVal = valArr[valArr.length - 1] ? valArr[valArr.length - 1] : '';\r\n                    this.comboService.serachValue$.next(appendVal);\r\n                }\r\n                // if (_selectedValues !== this.selectedValues) {\r\n                //     this.onValueChange({ text: this.displayText, value: this.selectedValues, selections: this.selections });\r\n                // }\r\n\r\n            } else {\r\n                this.filterDataOnServer(val, '*');\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private __createPanel(value: any, searchParam = null) {\r\n        let params: any = {\r\n        };\r\n        let method = 'get';\r\n        if (value instanceof Object) {\r\n            const { params: _p, data, method: _m, showDialog } = value;\r\n            if (showDialog === false) {\r\n                return;\r\n            }\r\n\r\n            if (data) {\r\n                params = {data};\r\n                this.customData = data;\r\n            } else {\r\n                if (_p) {\r\n                    params = {data: _p};\r\n                    this.customData = _p;\r\n                } else {\r\n                    this.customData = null;\r\n                }\r\n            }\r\n\r\n            if (_m) {\r\n                method = _m;\r\n            }\r\n        } else if (typeof value === 'boolean') {\r\n            if (value === false) {\r\n                return;\r\n            }\r\n        }\r\n\r\n\r\n        this.initCreatPanelAction();\r\n\r\n        if (this.uri) {\r\n            this.updateSelectedValues();\r\n\r\n            if (this.isLookup()) {\r\n                this.isOpen = true;\r\n            }\r\n        } else {\r\n            this.isOpen = true;\r\n        }\r\n\r\n\r\n        if (this.comboService.displayType === 'LOOKUPTREELIST') {\r\n            params.enableFullTree = this['enableFullTree'];\r\n            params.loadTreeDataType = this['loadTreeDataType'];\r\n        }\r\n\r\n        if (this.isLookup() && this.input && this.nosearch) {\r\n            this.input.textbox.nativeElement.disabled = true;\r\n        }\r\n\r\n        const focusInput = () => {\r\n            if (this.isLookup() && this.input  && this.nosearch) {\r\n                this.input.textbox.nativeElement.disabled = false;\r\n                this.input.focus();\r\n            }\r\n        };\r\n\r\n        if (searchParam) {\r\n            params.searchValue = searchParam.searchValue;\r\n        }\r\n\r\n        let selectedIds = this.selectedValues;\r\n\r\n        if (this.isLookup() ) {\r\n            if (this.el.nativeElement['__zone_symbol__UIStateBindingChangefalse'] || \r\n                (this.mapFields && !this.mapFields[this.idField])) {\r\n                selectedIds = this.comboService['__SELECTEDIDS__'];\r\n            }\r\n            const _expLevel = this['expandLevel'];\r\n            params['expandLevel'] = _expLevel;\r\n        }\r\n\r\n        this.initdataSubscription = this.comboService.initData(params, method, selectedIds).pipe(\r\n            throwIfEmpty(focusInput)\r\n        ).subscribe(n => {\r\n            if (!this.isOpen) {\r\n                this.isOpen = true;\r\n            }\r\n            focusInput();\r\n            this.cdr.detectChanges();\r\n        });\r\n\r\n        // ç¦æ­¢æ»å¨\r\n        // this.render.setStyle(this.containerElement, 'pointer-events', 'auto');\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.registerDocumentEvent();\r\n        });\r\n    }\r\n\r\n    // æ¾ç¤ºåäºä»¶\r\n    private onBeforeShow() {\r\n        if (!this.beforeShow) {\r\n            this.beforeShow = () => of('');\r\n        }\r\n        return this.beforeShow(this).pipe(take(1));\r\n    }\r\n    private isLookup() {\r\n        return this.comboService.displayType.indexOf('LOOKUP') > -1;\r\n    }\r\n\r\n    // éèåäºä»¶\r\n    private onBeforeHide() {\r\n        if (!this.beforeHide) {\r\n            this.beforeHide = () => of('');\r\n        }\r\n        this.beforeHide(this).pipe(\r\n            take(1)\r\n        ).subscribe(value => {\r\n            if (typeof value === 'boolean') {\r\n                if (value) {\r\n                    this.hide(true);\r\n                }\r\n            } else if (typeof value === 'object') {\r\n                if (value.hide) {\r\n                    this.hide(true);\r\n                } else {\r\n                    if (value.message) {\r\n                        if (this.notifySer) {\r\n                            this.notifySer.warning(value.message);\r\n                        } else {\r\n                            // console.info(value.message);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                this.hide(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    // æ¾ç¤ºæéèä¸ææ¡\r\n    private initToggleAction() {\r\n        this.comboService.isOpen$.pipe(\r\n            debounceTime(20),\r\n            takeUntil(this.destroy$),\r\n            skip(1)\r\n        ).subscribe(value => {\r\n            if (this.readonly || this.disabled) {\r\n                return;\r\n            }\r\n\r\n            let open = value;\r\n            let searchParam = null;\r\n            if (typeof value === 'object') {\r\n                open = value.isOpen;\r\n                searchParam = value.search;\r\n            }\r\n\r\n            if (open) {\r\n                this.onBeforeShow().subscribe((v) => {\r\n                    this.__createPanel(v, searchParam);\r\n                });\r\n                return;\r\n            } else {\r\n                this.onBeforeHide();\r\n            }\r\n\r\n            this.cdr.detectChanges();\r\n        });\r\n\r\n        this._comboPanelCreated$.pipe(\r\n            takeUntil(this.destroy$),\r\n            filter(value => !!value)\r\n        ).subscribe((cmp: ElementRef) => {\r\n            cmp.nativeElement.style.display = '';\r\n\r\n            this.initCreatPanelAction();\r\n\r\n\r\n            this.panelElement.appendChild(cmp.nativeElement);\r\n            let transitionFlag = true;\r\n            cmp.nativeElement.addEventListener('transitionend', (e: any) => {\r\n                if (e.target === e.currentTarget && transitionFlag) {\r\n                    transitionFlag = false;\r\n                    this.showPanel.emit(this);\r\n                }\r\n            });\r\n\r\n            if (this.isLookup()) {\r\n                cmp.nativeElement.style.width = `${this.panelWidth}px`;\r\n                cmp.nativeElement.style.height = `${this.panelHeight}px`;\r\n                setTimeout(() => {\r\n                    this.render.addClass(cmp.nativeElement, 'f-area-show');\r\n                }, 0);\r\n            }\r\n         \r\n            // this.updatePosition(cmp.nativeElement);\r\n            // this.cdr.detectChanges();\r\n        });\r\n\r\n        this.destroy$.pipe(take(1)).subscribe(() => {\r\n            this.comboService.closeLoading();\r\n            nextUniqueId = 0;\r\n            if (this.panelListener) {\r\n                this.panelListener();\r\n            }\r\n            if (this.initdataSubscription) {\r\n                this.initdataSubscription.unsubscribe();\r\n                this.initdataSubscription = null;\r\n            }\r\n            this.removePanelElement();\r\n        });\r\n    }\r\n\r\n    private iframeEventHandle(action: 'addEventListener' | 'removeEventListener') {\r\n        const iframes = Array.from(document.querySelectorAll('iframe'));\r\n        if (iframes && iframes.length) {\r\n            for (const iframe of iframes) {\r\n                const iframeDoc = iframe.contentDocument;\r\n                if (iframeDoc) {\r\n                    iframeDoc[action]('mousedown', this._documentClickEvent);\r\n                    iframeDoc[action]('mousewheel', this._documentClickEvent);\r\n                    iframeDoc[action]('DOMMouseScroll', this._documentClickEvent);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private removeDocumentListener() {\r\n        if (this._documentClickEvent) {\r\n            document.removeEventListener('mousedown', this._documentClickEvent, true);\r\n            document.removeEventListener('mousewheel', this._documentClickEvent, true);\r\n            document.removeEventListener('DOMMouseScroll', this._documentClickEvent, true);\r\n\r\n            if (top !== window) {\r\n                top.document.body.removeEventListener('mousedown', this._documentClickEvent, true);\r\n            }\r\n\r\n            this.iframeEventHandle('removeEventListener');\r\n            this._documentClickEvent = null;\r\n        }\r\n    }\r\n\r\n    private registerDocumentEvent() {\r\n        // æ³¨å mousedown äºä»¶ éèpanel\r\n        document.addEventListener('mousedown', (this._documentClickEvent = event => {\r\n\r\n            if (event.type === 'mousewheel' && this.el.nativeElement.contains(event.target)) {\r\n                this.comboService.isOpen$.next(false);\r\n                return;\r\n            }\r\n\r\n            if (\r\n                !this.el.nativeElement.contains(event.target) && this._cmbPanel && !this.contains(this._cmbPanel, event)\r\n            ) {\r\n                this.comboService.isOpen$.next(false);\r\n                // this.willHide$.next();\r\n            }\r\n        }), true);\r\n\r\n        document.addEventListener('mousewheel', this._documentClickEvent, true);\r\n        document.addEventListener('DOMMouseScroll', this._documentClickEvent, true);\r\n\r\n        if (top !== window) {\r\n            top.document.body.addEventListener('mousedown', this._documentClickEvent, true);\r\n        }\r\n\r\n        this.iframeEventHandle('addEventListener');\r\n    }\r\n\r\n\r\n    // åå»ºä¸æé¢æ¿æ¶äºä»¶\r\n    private initCreatPanelAction() {\r\n        if (this.panelElement) {\r\n            return;\r\n        }\r\n        this.createPanel(document.body);\r\n        this.panelListener = this.render.listen(this.panelElement, 'click', (e: Event) => {\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n\r\n    private removePanelElement() {\r\n        reqAnimFrame(() => {\r\n            if (this.panelElement) {\r\n                document.body.removeChild(this.panelElement);\r\n                this.panelElement = null;\r\n            }\r\n        });\r\n    }\r\n\r\n    private initSelectionsChangeAction() {\r\n        this.comboService.selections$.pipe(\r\n            takeUntil(this.destroy$),\r\n            debounceTime(100)\r\n        ).subscribe(value => {\r\n            if (value.action === 'initData') {\r\n                this.onSelectionsChange(this.selections);\r\n            } else {\r\n                this.onSelectionsChangeDefault();\r\n                if(this.isLookup()) {\r\n                    this.updateSelectedValues();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    protected initDatasChangeAction() { }\r\n\r\n    // canNull è§£å³åæ¶éä¸­æ¶ä¾ç¶æ¾ç¤º\r\n    private onSelectionsChangeDefault() {\r\n\r\n        const _displayText = this.comboService.getValue(this.textField);\r\n        const _selectedValues = this.comboService.getValue(this.idField);\r\n\r\n        if (this.displayText !== _displayText && !this.nosearch) {\r\n            this.displayText = _displayText || this.displayText;\r\n            this.displayText = this.displayText || '';\r\n            this.originalText = _selectedValues ? _displayText : this.displayText;\r\n        }\r\n\r\n        if (this.input) {\r\n            this.input.textbox.nativeElement.value = this.displayText;\r\n        }\r\n\r\n        this.selectedValues =\r\n            (_selectedValues !== '' && _selectedValues !== undefined && _selectedValues !== null) ? _selectedValues : this.selectedValues;\r\n\r\n\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    protected onSelectionsChange(v: any[]) { }\r\n\r\n    updateMappingFieldValue(clearMapFields = false) {\r\n        if (\r\n            this.mappingField &&\r\n            this.ngControl &&\r\n            this.ngControl.formDirective &&\r\n            this.ngControl.formDirective.form &&\r\n            this.ngControl.formDirective.form.bindingData\r\n        ) {\r\n            const bindingData = this.ngControl.formDirective.form.bindingData;\r\n\r\n            if (clearMapFields) {\r\n                this.selectedValues = '';\r\n            }\r\n\r\n            if (bindingData.setValue) {\r\n                const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n                let pathArr: string[] = [];\r\n                if (bindingPath) {\r\n                    pathArr = bindingPath.split('/').filter(n => n !== '');\r\n                }\r\n                const mappingField = this.mappingField ? this.mappingField : '';\r\n                bindingData.setValue(pathArr.concat(mappingField.split('.')), this.selectedValues, true, true);\r\n            } else if (this.commonUtils) {\r\n                this.commonUtils.setValue(bindingData, this.mappingField, this.selectedValues);\r\n            }\r\n            // if (!bindingData.setValue && this.commonUtils) {\r\n            //     this.commonUtils.setValue(bindingData, this.mappingField, this.selectedValues);\r\n            // }\r\n        }\r\n    }\r\n\r\n    updateSelectedValues() {\r\n        if (\r\n            this.mappingField &&\r\n            this.ngControl &&\r\n            this.ngControl.formDirective &&\r\n            this.ngControl.formDirective.form &&\r\n            this.ngControl.formDirective.form.bindingData\r\n        ) {\r\n            const bindingData = this.ngControl.formDirective.form.bindingData;\r\n            if (bindingData.getValue) {\r\n                const bindingPath = this.ngControl.formDirective.form.bindingPath;\r\n                let pathArr: string[] = [];\r\n                if (bindingPath) {\r\n                    pathArr = bindingPath.split('/').filter(value => value !== '');\r\n                }\r\n                const mappingField = this.mappingField ? this.mappingField : '';\r\n                this.selectedValues = bindingData.getValue(pathArr.concat(mappingField.split('.')));\r\n            } else if (this.commonUtils) {\r\n                this.selectedValues = this.commonUtils.getValue(this.mappingField, bindingData);\r\n            }\r\n        } else if (!this.mappingField) {\r\n            // this.selectedValues = this.displayText\r\n        }\r\n    }\r\n    onTextChange(val?: string) {\r\n        this.isTextChange = true;\r\n        if (this.nosearch) {\r\n            this.selectedValues = val;\r\n            this.updateMappingFieldValue(this.isLookup());\r\n            this.onChange(val);\r\n        }\r\n\r\n        if (!this.isOpen && this.comboService.displayType === 'LIST') {\r\n            this.isOpen = true;\r\n        }\r\n\r\n        this.textChangeSubject.next(val);\r\n    }\r\n\r\n    onValueChange(changes: ComboChanges) {\r\n        this.displayText = changes.text;\r\n        this.originalText = this.displayText;\r\n        if (!this.uri && this.data && this.data.length > 0 && (!this['displayType'] || this.useValue) ) {\r\n            this.onChange(this.selectedValues);\r\n        } else {\r\n            this.onChange(this.displayText);\r\n        }\r\n        // if (!changes.nosearch) {\r\n        // }\r\n        this.valueChange.emit(changes);\r\n        this.updateMappingFieldValue();\r\n        this.onTouched();\r\n        // if (this.isOpen && changes.emitHidePanel) { this.willHide$.next(); }\r\n    }\r\n\r\n    onSelect(item: any) { }\r\n    onUnSelected(item: any) { }\r\n\r\n    /**\r\n     * emit: é»è®¤ä¸º true;\r\n     */\r\n    hide(emit = true) {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        this.removeDocumentListener();\r\n        this.isOpen = false;\r\n        if (emit) {\r\n            this.willHide$.next();\r\n        }\r\n\r\n        if (this.initdataSubscription) {\r\n            this.initdataSubscription.unsubscribe();\r\n            this.initdataSubscription = null;\r\n        }\r\n        this.removePanelElement();\r\n    }\r\n\r\n    show() {\r\n        if (this.isOpen) {\r\n            return;\r\n        }\r\n        this.onBeforeShow().subscribe((value: any) => {\r\n            this.__createPanel(value);\r\n        });\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    private createPanel(host: HTMLElement) {\r\n        this.panelElement = this.document.createElement('div');\r\n\r\n        this.panelElement.id = `overlay-${nextUniqueId++}`;\r\n        this.panelElement.classList.add('overlay-pane');\r\n\r\n        this.panelElement.style.display = 'none';\r\n\r\n        host.appendChild(this.panelElement);\r\n\r\n        this.comboService.panelElement = this.panelElement;\r\n\r\n        if (this.isLookup()) {\r\n            const { panelWidth, top, left } = this.getPanelSize();\r\n            this.panelElement.style.width = `${panelWidth}px`;\r\n            this.panelElement.style.height = `${this.panelHeight}px`;\r\n            this.panelElement.style.top = `${top}px`;\r\n            this.panelElement.style.left = `${left}px`;\r\n        } else {\r\n            this.panelElement.style.overflow = 'hidden';\r\n            this.render.setStyle(this.panelElement, 'top', '0');\r\n            this.render.setStyle(this.panelElement, 'left', '0');\r\n        }\r\n\r\n        const zindex = this.commonUtils.getFloatingLayerIndex();\r\n        this.panelElement.style.zIndex = zindex;\r\n        this.panelElement.classList.add('f-combo-lookup');\r\n        this.panelElement.style.display = '';\r\n    }\r\n\r\n    private getPanelSize(target?: Element) {\r\n        let panelHeight = this.panelHeight;\r\n        this.innerPanelHeight = 202;\r\n\r\n        if (this.autoWidth) {\r\n            const { width } = this.getInputSizeInfo();\r\n            this.panelWidth = width ? width : this.panelWidth;\r\n        }\r\n        // å¦ætageté«åº¦å­å¨ ä¿®æ¹pnaelHeight ç¨äºéå®ä½å¼¹åºæ¡ä½ç½®\r\n        if (target && target.tagName && panelHeight === 'auto') {\r\n            const targetHeight = target.scrollHeight;\r\n            const isNoRecord = !!target.querySelector('.f-table-norecords-content');\r\n            // if (this.uri) {\r\n            //     if (this.data && this.data.length) {\r\n            //         if (this.comboService.displayType === 'LIST' && target.querySelector('.list-group')) {\r\n            //             this.innerPanelHeight = target.querySelector('.list-group')['offsetHeight'] + 2;\r\n            //         } else {\r\n            //             this.innerPanelHeight = targetHeight;\r\n            //         }\r\n            //     }\r\n            // } else {\r\n            //     this.innerPanelHeight = targetHeight && targetHeight > 10 && !isNoRecord ? Math.floor(targetHeight) : this.panelHeight;\r\n            // }\r\n\r\n            if (this.data && this.data.length) {\r\n                if (this.comboService.displayType === 'LIST' && target.querySelector('.list-group')) {\r\n                    this.innerPanelHeight = target.querySelector('.list-group')['offsetHeight'] + 2;\r\n                } else {\r\n                    this.innerPanelHeight = targetHeight;\r\n                }\r\n            }\r\n\r\n        } else if (target && target.tagName && panelHeight && !String(panelHeight).includes('px')) {\r\n            panelHeight = panelHeight;\r\n        }\r\n        let { top, height, left, right } = this.el.nativeElement.getBoundingClientRect();\r\n        height = height + 1;\r\n        const bottom = window.innerHeight - height - top;\r\n        if (panelHeight === 'auto') {\r\n            if (this.maxHeight && this.maxHeight > this.innerPanelHeight) {\r\n                panelHeight = this.innerPanelHeight;\r\n            } else {\r\n                panelHeight = this.maxHeight;\r\n            }\r\n        }\r\n\r\n        const h = top > bottom ? top : bottom;\r\n        const below = h === bottom;\r\n\r\n        let fx = 'top';\r\n        if (bottom > panelHeight) {\r\n            top = top + height;\r\n        } else {\r\n            if (top > bottom) {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                    top = 10;\r\n                } else {\r\n                    top = top - parseInt('' + panelHeight, 10) - 5;\r\n                }\r\n                fx = 'bottom'\r\n            } else {\r\n                if (h < panelHeight) {\r\n                    panelHeight = h - 10;\r\n                }\r\n                top = top + height;\r\n            }\r\n        }\r\n        let panelWidth = this.panelWidth;\r\n        if (window.innerWidth - left < this.panelWidth) {\r\n            // left = right - 400;\r\n            if (left + this.el.nativeElement.offsetWidth > this.panelWidth) {\r\n                left = left + this.el.nativeElement.offsetWidth - this.panelWidth;\r\n            } else {\r\n                left = 0;\r\n                panelWidth = window.innerWidth> this.panelWidth ? this.panelWidth : window.innerWidth - 10;\r\n            }\r\n        }\r\n\r\n        return { panelWidth, panelHeight, top, left, below, fx };\r\n    }\r\n    private compatibleScrollTop() {\r\n        if (document.scrollingElement) {\r\n            return document.scrollingElement.scrollTop;\r\n        }\r\n\r\n        return Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop);\r\n    }\r\n    private compatibleScrollLeft() {\r\n        if (document.scrollingElement) {\r\n            return document.scrollingElement.scrollLeft;\r\n        }\r\n\r\n        return Math.max(window.pageXOffset, document.documentElement.scrollLeft, document.body.scrollLeft);\r\n    }\r\n    // è®¾ç½®å¼¹åºæ¡ä½ç½®\r\n    updatePosition(target: any) {\r\n        const { panelHeight, left, top, below, fx } = this.getPanelSize(target);\r\n\r\n        if (!this.isLookup()) {\r\n            let _top = top;\r\n            let _height = panelHeight;\r\n            if (top < 0) {\r\n                _height = this.innerPanelHeight + top - 10;\r\n                _top = 10;\r\n            }\r\n            _top += this.compatibleScrollTop();\r\n\r\n            if (this.panelHeight !== 'auto') {\r\n                if (this.maxHeight < _height) {\r\n                    this.maxHeight = _height as number;\r\n                }\r\n            }\r\n\r\n            this.comPosition = {\r\n                'left': left + this.compatibleScrollLeft(),\r\n                'top': _top,\r\n                'width': this.panelWidth,\r\n                height: _height === 'auto' ? 'auto' : _height,\r\n                'max-height': this.maxHeight\r\n            };\r\n        } else {\r\n            this.comPosition = {\r\n                'width': this.panelWidth,\r\n                'height': panelHeight\r\n            };\r\n        }\r\n        this.panelElement.style.overflow = '';\r\n        target['style'].display = '';\r\n\r\n        Object.keys(this.comPosition).forEach(n => {\r\n            let val = this.comPosition[n];\r\n            if (val !== 'auto') {\r\n                val += 'px';\r\n            }\r\n            this.render.setStyle(target, n, val);\r\n        });\r\n        target.style.transformOrigin = '100% ' + fx;\r\n        // target['style'].visibility = 'visible';\r\n        return this.comPosition;\r\n    }\r\n\r\n    contains(el: ElementRef, event: any) {\r\n        return el.nativeElement.contains(event.target);\r\n    }\r\n\r\n    protected filterSelections(value: string, data: any[]) {\r\n        const selectedItems = String(value)\r\n            .split(this.separator)\r\n            .map(selectedItem => {\r\n                const item = data.find(val => selectedItem == this.commonUtils.getValue(this.idField, val) + '');\r\n                return item ? this.commonUtils.getValue(this.textField, item) : '';\r\n            });\r\n        return selectedItems.filter(el => el);\r\n    }\r\n\r\n    protected updateSelections(selectedValues: string, data: any[]) {\r\n        if (selectedValues === null || selectedValues === undefined) {\r\n            this.selections = [];\r\n        }\r\n\r\n        if (typeof selectedValues === 'boolean' || typeof selectedValues === 'number') {\r\n            selectedValues = '' + selectedValues;\r\n        }\r\n\r\n        const selectedItems = selectedValues ? String(selectedValues).split(this.separator).map(val => {\r\n            if (this.comboService.displayType === 'LOOKUPTREELIST') {\r\n                return this.comboService.treeNodeToFlatData(data, val, this.idField);\r\n            }\r\n            return data.find(_data => '' + val == this.commonUtils.getValue(this.idField, _data) + '');\r\n\r\n        }) : [];\r\n        this.selections = selectedItems || [];\r\n    }\r\n\r\n    private getDisplayText(value, data) {\r\n        if (value !== null && value !== undefined) {\r\n            const selectedItems = this.filterSelections(value, data);\r\n            if (!selectedItems || !selectedItems.length) {\r\n                return value;\r\n            } else {\r\n                return selectedItems.filter(v => !!v).join(this.separator);\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    writeValue(value: any): void {\r\n        let data = [];\r\n        if (this.data instanceof Array) {\r\n            data = this.data;\r\n        } else if (this.data) {\r\n            data = (this.data['items'] as any) instanceof Array ? this.data['items'] : data;\r\n        }\r\n\r\n        this.originalText = value;\r\n        // è§£å³ uistate binding ä¸­åæ¬¡ç»å®æ¶è®¾ç½®äº selectedValues å¼ ï¼æ­¤å¤æ¸ç©ºåå¯¼è³ä¸æå¸®å©è·åéä¸­è®°å½ä¸æ­£ç¡®\r\n        // this.selectedValues = '';\r\n\r\n        if (!this.uri && data && data.length > 0) {\r\n            if (this.isLookup()) {\r\n                if (this.selectedValues === undefined || this.selectedValues === null) {\r\n                    this.selectedValues = value;\r\n                }\r\n            } else {\r\n                this.selectedValues = value;\r\n            }\r\n            this.updateSelections(this.selectedValues, data);\r\n            this.displayText = this.getDisplayText(this.selectedValues, this.selections || []);\r\n\r\n            if (this.isLookup()) {\r\n                this.displayText = this.displayText === this.selectedValues ? value: this.displayText;\r\n            }\r\n\r\n            this.originalText = this.displayText;\r\n        } else {\r\n            // this.displayText = this.getDisplayText(value, this.selections);\r\n            this.displayText = value;\r\n            if (this.el.nativeElement['__zone_symbol__UIStateBindingChangefalse']) {\r\n                this.comboService['__SELECTEDIDS__'] = this.selectedValues;\r\n            }\r\n            \r\n            this.updateSelectedValues();\r\n            \r\n            if (this.selectedValues === undefined || this.selectedValues === null) {\r\n                this.selectedValues = value;\r\n            }\r\n            \r\n            if (this.viewType === 'tag' && this.multiSelect && (this.displayText !== null && this.displayText !== undefined)) {\r\n                const txtArr = this.displayText.split(this.separator).filter(n => n);\r\n                this.selections = txtArr.reduce((r, c, i) => {\r\n                    r.push({ [this.textField]: c });\r\n                    return r;\r\n                }, []);\r\n            }\r\n        }\r\n\r\n      \r\n        this.cdr.markForCheck();\r\n    }\r\n    registerOnChange(fn: any): void {\r\n        this.onChange = fn;\r\n    }\r\n    registerOnTouched(fn: any): void {\r\n        this.onTouched = fn;\r\n    }\r\n    setDisabledState?(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    filterDataOnServer(searchValue, searchField) {\r\n    }\r\n}\r\n","\r\nimport { Component, ElementRef, ChangeDetectorRef, Inject, Renderer2, forwardRef, ChangeDetectionStrategy,\r\n         ViewEncapsulation, Input, Injector, OnInit, OnChanges, SimpleChanges, ViewChild, HostBinding, HostListener } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { DatalistComponent } from '@farris/ui-datalist';\r\nimport { BaseComboComponent } from './base-combo.component';\r\nimport { SelectItem } from './combo.interface';\r\nimport { ComboService } from './combo.service';\r\nimport { filter, take, takeUntil } from 'rxjs/operators';\r\n\r\n\r\nexport const INPUT_COMBO_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => ComboListComponent),\r\n    multi: true\r\n};\r\n@Component({\r\n    selector: 'farris-combo-list',\r\n    templateUrl: './combo-list.component.html',\r\n    // styleUrls: ['./combo-list.component.scss'],\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    providers: [INPUT_COMBO_VALUE_ACCESSOR, ComboService]\r\n})\r\nexport class ComboListComponent extends BaseComboComponent implements OnInit, OnChanges {\r\n    @Input() itemTemplate: any;\r\n\r\n    /** æ°æ®ä¸­æ è¯ç¦ç¨çå­æ®µåç§°ï¼é»è®¤ä¸º disabled */\r\n    @Input() disabledField = 'disabled';\r\n    /** åè¡¨ä¸­æ¯å¦æ¾ç¤ºå·²ç¦ç¨çé¡¹ï¼é»è®¤ true */\r\n    @Input() showDisabledItem = true;\r\n\r\n    /**\r\n     * æ¾ç¤ºé¢æ¿æ¹å¼ï¼ click | focus, é»è®¤ï¼ click\r\n     */\r\n    @Input() showPanelType: 'click'|'focus' = 'click';\r\n    @ViewChild('dl') dataListRef: DatalistComponent;\r\n    @Input() itemHeight: number;\r\n    @HostBinding('class.f-combo-list') cls = true;\r\n    @HostBinding('class.f-combo-list--tag')\r\n    get clsTag() {\r\n        return this.viewType === 'tag';\r\n    }\r\n\r\n    private filterData: any[] = [];\r\n    constructor(\r\n        public el: ElementRef,\r\n        public cdr: ChangeDetectorRef,\r\n        @Inject(DOCUMENT) public document: any,\r\n        public render: Renderer2,\r\n        public comboService: ComboService,\r\n        public injector: Injector\r\n    ) {\r\n        super(el, cdr, document, render, comboService, injector);\r\n    }\r\n\r\n    ngOnInit() {\r\n       super.ngOnInit();\r\n       if (this.multiSelect) {\r\n            this.enableCancelSelected = this.multiSelect;\r\n       }\r\n       this.remoteSearch = false;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        /**\r\n         * å¦æç´æ¥ç»å®ä¸ä¸ªæ°ç»ä½ä¸ºåè¡¨æ°æ®å¹¶ä¸ data æ¯å¼æ­¥æ°æ®ï¼éè¦æ­¤æ¹æ³ï¼åæ­¥displayTextä¸selectedValues\r\n         */\r\n        if (changes.data && !changes.data.firstChange && !this.uri && !this.nosearch) {\r\n            const datas = changes.data.currentValue;\r\n            let val = this.ngControl ? this.ngControl.value || this.selectedValues : this.selectedValues;\r\n\r\n            if (this.selectedValues === undefined || this.selectedValues === null) {\r\n                val = this.displayText;\r\n            }\r\n\r\n            if (val !== undefined && val !== null && datas && datas.length > 0) {\r\n                const textArr = this.filterSelections(val, this.data);\r\n                this.displayText = textArr.filter(v => !!v).join(this.separator);\r\n                this.updateSelections(val, this.data);\r\n                this.comboService.selections$.next({action: 'initData'});\r\n            } else {\r\n                this.selections = [];\r\n                this.displayText = '';\r\n            }\r\n        }\r\n\r\n        // if (changes.multiSelect && !changes.multiSelect.isFirstChange()) {\r\n        //     this.enableCancelSelected = this.multiSelect;\r\n        // }\r\n    }\r\n\r\n    @HostListener('keydown', ['$event'])\r\n    registerKeyboardEvent($event: KeyboardEvent) {\r\n\r\n        if (this.multiSelect || (this.readonly || this.disabled))  {\r\n            return;\r\n        }\r\n\r\n        if ($event.code === 'ArrowUp' || $event.code === 'ArrowDown' ||\r\n            (!this.editable && !this.readonly && !this.disabled && $event.code === 'Space')) {\r\n            $event.preventDefault();\r\n            $event.stopPropagation();\r\n        }\r\n\r\n        const selectItem = (index) => {\r\n            this.comboService.selectItem(data[index], index, false);\r\n            const params = {data: data[index], index};\r\n            if (this.isOpen) {\r\n                this.scrollToCurrentItem(index);\r\n            }\r\n            this.updateSelectValues(params);\r\n        };\r\n\r\n\r\n        let data = this.filterData && this.filterData.length ? this.filterData : this.data;\r\n\r\n        if (!this['_cmbPanel']) {\r\n            data = this.data;\r\n        }\r\n\r\n        let _data = [];\r\n\r\n        if (this.disabledField) {\r\n            _data = data.filter(n => !this.commonUtils.getValue(this.disabledField, n))\r\n        }\r\n\r\n        const getrealIndex = (idx, nextIdx, isNext = true) => {\r\n            if (data[nextIdx]) {\r\n                // å¤æ­ä¸ä¸é¡¹æ¯å¦ç¦ç¨\r\n                const isDisabled = this.commonUtils.getValue(this.disabledField, data[nextIdx]);\r\n                if (isDisabled) {\r\n\r\n                    const _idx = _data.findIndex(n => this.commonUtils.getValue(this.idField, n) === this.commonUtils.getValue(this.idField, data[idx]));\r\n                    if (isNext) {\r\n                        nextIdx = _idx + 1;\r\n                    } else {\r\n                        nextIdx = _idx - 1;\r\n                    }\r\n                    if (_data[nextIdx]) {\r\n                        return data.findIndex(n => this.commonUtils.getValue(this.idField, n) === this.commonUtils.getValue(this.idField, _data[nextIdx]));\r\n                    } else {\r\n                        const newIdex = nextIdx > 0 ? 0 : _data.length -1;\r\n                        return data.findIndex(n => this.commonUtils.getValue(this.idField, n) === this.commonUtils.getValue(this.idField, _data[newIdex]) && !this.commonUtils.getValue(this.disabledField, n))\r\n                    }\r\n                }\r\n                return nextIdx;\r\n            }\r\n        }\r\n\r\n        const idx = data.findIndex(n => this.commonUtils.getValue(this.idField, n) == this.selectedValues);\r\n\r\n        if ($event.code === 'ArrowUp') {  // up\r\n            let prevIdx = idx - 1;\r\n            if (prevIdx < 0) {\r\n                prevIdx = data.length - 1;\r\n            }\r\n\r\n            if (this.disabledField) {\r\n                prevIdx = getrealIndex(idx,prevIdx, false);\r\n            }\r\n\r\n            selectItem(prevIdx);\r\n        }\r\n        if ($event.code === 'ArrowDown' || ($event.code === 'Space' && !this.editable)) { // down\r\n            let nextIdx = idx + 1;\r\n            if (nextIdx >= data.length) {\r\n                nextIdx = 0;\r\n            }\r\n\r\n            if (this.disabledField) {\r\n                nextIdx = getrealIndex(idx,nextIdx);\r\n            }\r\n\r\n            selectItem(nextIdx);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    @HostListener('keydown.esc', ['$event'])\r\n    escHandlerEvent($event: KeyboardEvent) {\r\n        if (this.isOpen) {\r\n            this.hide(false);\r\n        }\r\n    }\r\n\r\n\r\n    protected onSelectionsChange(v: any[]) {\r\n        if (this.uri) {\r\n            if (this.selections && this.selections.length) {\r\n                this.selectedValues = this.selections.map(n => n[this.idField]).join(this.separator);\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateSelectValues(item: SelectItem, emitEvent = true) {\r\n        const { data, index } = { ...item };\r\n        this.comboService.selectItem(data, index);\r\n        if (this.dataListRef) {\r\n            this.selectedValues = this.dataListRef.selectedValues;\r\n        }\r\n        if (!this.multiSelect) {\r\n            this.selectedValues = data[this.idField];\r\n        }\r\n\r\n        const _displayText = this.comboService.getValue(this.textField);\r\n        if (emitEvent) {\r\n            this.selectChange.emit({ data, index, instance: this, selections: this.selections });\r\n            this.cdr.markForCheck();\r\n            this.onValueChange({ text: _displayText, value: this.selectedValues, selections: this.selections });\r\n        }\r\n    }\r\n\r\n    private scrollToCurrentItem(index: number) {\r\n        if (this.dataListRef && this.dataListRef.el) {\r\n            const ulEl = this.dataListRef.el.nativeElement.querySelector('ul.list-group');\r\n            if (ulEl && ulEl.children && ulEl.children[index]) {\r\n                ulEl.children[index].scrollIntoView({block: 'nearest'});\r\n            }\r\n        }\r\n    }\r\n\r\n    onSelect(item: SelectItem) {\r\n        this.updateSelectValues(item, true);\r\n\r\n        if (!this.multiSelect) {\r\n            this.comboService.isOpen$.next(false);\r\n        }\r\n    }\r\n\r\n    onUnSelected(value: SelectItem) {\r\n        const { data } = { ...value };\r\n        this.comboService.unSelectItem(data);\r\n        if (this.dataListRef) {\r\n            this.selectedValues = this.dataListRef.selectedValues;\r\n        }\r\n        // if (!this.multiSelect) {\r\n        //     this.selectedValues = data[this.idField];\r\n        // }\r\n        const _displayText = this.comboService.getValue(this.textField);\r\n        this.cdr.markForCheck();\r\n        this.onValueChange({ text: _displayText, value: this.selectedValues, selections: this.selections });\r\n    }\r\n\r\n    onEnter(event: Event) {\r\n        if (this.isOpen) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    onKeyup($event) {\r\n\r\n    }\r\n\r\n    onKeydown($event: KeyboardEvent) {\r\n        if ($event.code === 'Tab') {\r\n            this.hide(false);\r\n        }\r\n    }\r\n\r\n    onFocus($event) {\r\n        if (this.showPanelType === 'focus') {\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    removeSelectItem($event: MouseEvent, item) {\r\n        if ($event) {\r\n            $event.stopPropagation();\r\n        }\r\n        this.comboService.unSelectItem(item);\r\n        this.selectedValues = this.comboService.getValue(this.idField);\r\n        const _displayText = this.comboService.getValue(this.textField);\r\n        this.cdr.detectChanges();\r\n        this.onValueChange({ text: _displayText, value: this.selectedValues, selections: this.selections });\r\n    }\r\n\r\n    protected initDatasChangeAction() {\r\n        this.comboService.data$.subscribe(data => {\r\n            this.filterData = data;\r\n\r\n\r\n            if (data && data.length && !this.editable) {\r\n              \r\n                if (typeof this.selectedValues === 'boolean') {\r\n                    return;\r\n                }\r\n\r\n                if (this.selectedValues) {\r\n                    let idx = -1;\r\n                    let items = [];\r\n                    if (typeof this.selectedValues === 'number' || typeof this.selectedValues === 'boolean') {\r\n                        items = data.filter((n) => {\r\n                            return n[this.idField] === this.selectedValues || n[this.textField] === this.selectedValues;\r\n                        });\r\n                    } else {\r\n                        items = this.selectedValues.split(this.separator).map(val => {\r\n                            return data.find((n, i) => {\r\n                                return n[this.idField] === val || n[this.textField] === val;\r\n                            });\r\n                        });\r\n                    }\r\n\r\n\r\n                    if (!this.selections || !this.selections.length) {\r\n                        if (items && items.length) {\r\n                            this.selectedValues = items.map(i => {\r\n                                return this.commonUtils.getValue(this.idField, i);\r\n                            }).join(this.separator);\r\n                            this.selections = items;\r\n                        }\r\n                    }\r\n                    \r\n                    idx = data.findIndex(n => {\r\n                        return  this.commonUtils.getValue(this.idField, n)  === this.commonUtils.getValue(this.idField, this.selections[0]) || \r\n                        this.commonUtils.getValue(this.textField, n) === this.commonUtils.getValue(this.textField, this.selections[0]);\r\n                    });\r\n\r\n                    if (idx > -1) {\r\n                        setTimeout(() => {\r\n                            this.scrollToCurrentItem(idx);\r\n                        }, 300);\r\n                    }\r\n                }\r\n              \r\n              \r\n            }\r\n\r\n        });\r\n    }\r\n\r\n\r\n}\r\n","import { NotifyModule } from '@farris/ui-notify';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ComboListComponent } from './combo-list.component';\r\nimport { InputGroupModule } from '@farris/ui-input-group';\r\nimport { DatalistModule } from '@farris/ui-datalist';\r\nimport { LoadingModule } from '@farris/ui-loading';\r\nimport { ComboLocaleService } from './services/combo.locale.service';\r\n@NgModule({\r\n    declarations: [\r\n        ComboListComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        HttpClientModule, \r\n        InputGroupModule,\r\n        LoadingModule.forRoot(),\r\n        DatalistModule,\r\n        NotifyModule.forRoot()\r\n    ],\r\n    exports: [ComboListComponent],\r\n    providers: [ComboLocaleService]\r\n})\r\nexport class ComboListModule {}\r\n"],"names":[],"mappings":"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"}
