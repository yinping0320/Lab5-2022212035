/**
 * @fileoverview added by tsickle
 * Generated from: lib/utils/entity_util.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { FieldMetadataUtil } from '@farris/mobile-devkit';
class EntityUtil {
    /**
     * 查找属性的类型
     * @param {?} entityType 实体类型
     * @param {?} targetPropName 属性名称
     * @return {?} 属性信息，包含属性类型（NgField、NgObject、NgList, NgDynamic）和属性对应的实体类型（当NgField类型时为null）
     */
    static getPropInfo(entityType, targetPropName) {
        /** @type {?} */
        let propType;
        /** @type {?} */
        let propEntityType;
        /** @type {?} */
        let propMetadata;
        // NgField
        /** @type {?} */
        const ngFieldProperties = FieldMetadataUtil.getNgFields(entityType);
        Object.keys(ngFieldProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                propType = 'NgField';
                propEntityType = null;
                propMetadata = ngFieldProperties[propName];
            }
        }));
        // NgObject
        /** @type {?} */
        const ngObjectProperties = FieldMetadataUtil.getNgObjects(entityType);
        Object.keys(ngObjectProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                propType = 'NgObject';
                propEntityType = ngObjectProperties[propName].type;
                propMetadata = ngObjectProperties[propName];
            }
        }));
        // NgList
        /** @type {?} */
        const ngListProperties = FieldMetadataUtil.getNgList(entityType);
        Object.keys(ngListProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                propType = 'NgList';
                propEntityType = ngListProperties[propName].type;
                propMetadata = ngListProperties[propName];
            }
        }));
        /** @type {?} */
        const ngDynamicProperties = FieldMetadataUtil.getNgDynamic(entityType);
        Object.keys(ngDynamicProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                propType = 'NgDynamic';
                propEntityType = ngDynamicProperties[propName].type;
                propMetadata = ngDynamicProperties[propName];
            }
        }));
        return { propType, propEntityType, propMetadata };
    }
    /**
     * 获取实体的主键名
     * @param {?} entityType 实体类型
     * @return {?}
     */
    static getPrimaryKey(entityType) {
        /** @type {?} */
        const primaryNgFiledProp = FieldMetadataUtil.getPrimaryFieldMetadata(entityType);
        if (primaryNgFiledProp) {
            return primaryNgFiledProp.dataField;
        }
        else {
            return '';
        }
    }
    /**
     * 是否为对象属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    static isObjectProp(entityType, targetPropName) {
        /** @type {?} */
        let isObjectProp = false;
        /** @type {?} */
        const ngObjectProperties = FieldMetadataUtil.getNgObjects(entityType);
        Object.keys(ngObjectProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                isObjectProp = true;
            }
        }));
        return isObjectProp;
    }
    /**
     * 检查是否是动态列属性
     * @param {?} entityType
     * @param {?} targetPropName
     * @return {?}
     */
    static isDynamicProp(entityType, targetPropName) {
        /** @type {?} */
        let isDynamicProp = false;
        /** @type {?} */
        const ngDynamicProperties = FieldMetadataUtil.getNgDynamic(entityType);
        Object.keys(ngDynamicProperties).forEach((/**
         * @param {?} propName
         * @return {?}
         */
        (propName) => {
            if (propName === targetPropName) {
                isDynamicProp = true;
            }
        }));
        return isDynamicProp;
    }
    /**
     * 为实体增加initialData属性
     * @param {?} entity 实体实例
     * @param {?} initialData 默认值对象
     * @return {?}
     */
    static appendInitialData(entity, initialData) {
        /** @type {?} */
        const data = Object.assign({}, initialData);
        delete data.id;
        delete data.parentID;
        entity['initialData'] = data;
    }
}
export { EntityUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5X3V0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1iZWYvIiwic291cmNlcyI6WyJsaWIvdXRpbHMvZW50aXR5X3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxNQUFNLFVBQVU7Ozs7Ozs7SUFPZCxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQWUsRUFBRSxjQUFzQjs7WUFFcEQsUUFBZ0I7O1lBQ2hCLGNBQW1COztZQUNuQixZQUFpQjs7O2NBR2YsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQztRQUNuRSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsT0FBTzs7OztRQUFDLENBQUMsUUFBZ0IsRUFBRSxFQUFFO1lBQzFELElBQUksUUFBUSxLQUFLLGNBQWMsRUFBRTtnQkFDL0IsUUFBUSxHQUFHLFNBQVMsQ0FBQztnQkFDckIsY0FBYyxHQUFHLElBQUksQ0FBQztnQkFDdEIsWUFBWSxHQUFHLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQzVDO1FBQ0gsQ0FBQyxFQUFDLENBQUM7OztjQUdHLGtCQUFrQixHQUFHLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUM7UUFDckUsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU87Ozs7UUFBQyxDQUFDLFFBQWdCLEVBQUUsRUFBRTtZQUMzRCxJQUFJLFFBQVEsS0FBSyxjQUFjLEVBQUU7Z0JBQy9CLFFBQVEsR0FBRyxVQUFVLENBQUM7Z0JBQ3RCLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ25ELFlBQVksR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUM3QztRQUNILENBQUMsRUFBQyxDQUFDOzs7Y0FHRyxnQkFBZ0IsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDO1FBQ2hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsQ0FBQyxRQUFnQixFQUFFLEVBQUU7WUFDekQsSUFBSSxRQUFRLEtBQUssY0FBYyxFQUFFO2dCQUMvQixRQUFRLEdBQUcsUUFBUSxDQUFDO2dCQUNwQixjQUFjLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNqRCxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDM0M7UUFDSCxDQUFDLEVBQUMsQ0FBQzs7Y0FFRyxtQkFBbUIsR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3RFLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsQ0FBQyxRQUFnQixFQUFFLEVBQUU7WUFDNUQsSUFBSSxRQUFRLEtBQUssY0FBYyxFQUFFO2dCQUMvQixRQUFRLEdBQUcsV0FBVyxDQUFDO2dCQUN2QixjQUFjLEdBQUcsbUJBQW1CLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNwRCxZQUFZLEdBQUcsbUJBQW1CLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDOUM7UUFDSCxDQUFDLEVBQUMsQ0FBQztRQUVILE9BQU8sRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxDQUFDO0lBQ3BELENBQUM7Ozs7OztJQU1ELE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBZTs7Y0FDNUIsa0JBQWtCLEdBQUcsaUJBQWlCLENBQUMsdUJBQXVCLENBQUMsVUFBVSxDQUFDO1FBQ2hGLElBQUksa0JBQWtCLEVBQUU7WUFDdEIsT0FBTyxrQkFBa0IsQ0FBQyxTQUFTLENBQUM7U0FDckM7YUFBTTtZQUNMLE9BQU8sRUFBRSxDQUFDO1NBQ1g7SUFDSCxDQUFDOzs7Ozs7O0lBS0QsTUFBTSxDQUFDLFlBQVksQ0FBQyxVQUFlLEVBQUUsY0FBc0I7O1lBQ3JELFlBQVksR0FBRyxLQUFLOztjQUNsQixrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3JFLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsQ0FBQyxRQUFnQixFQUFFLEVBQUU7WUFDM0QsSUFBSSxRQUFRLEtBQUssY0FBYyxFQUFFO2dCQUMvQixZQUFZLEdBQUcsSUFBSSxDQUFDO2FBQ3JCO1FBQ0gsQ0FBQyxFQUFDLENBQUM7UUFDSCxPQUFPLFlBQVksQ0FBQztJQUN0QixDQUFDOzs7Ozs7O0lBS0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxVQUFlLEVBQUUsY0FBc0I7O1lBQ3RELGFBQWEsR0FBRyxLQUFLOztjQUNuQixtQkFBbUIsR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQ3RFLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsQ0FBQyxRQUFnQixFQUFFLEVBQUU7WUFDNUQsSUFBSSxRQUFRLEtBQUssY0FBYyxFQUFFO2dCQUMvQixhQUFhLEdBQUcsSUFBSSxDQUFDO2FBQ3RCO1FBQ0gsQ0FBQyxFQUFDLENBQUM7UUFDSCxPQUFPLGFBQWEsQ0FBQztJQUN2QixDQUFDOzs7Ozs7O0lBT0QsTUFBTSxDQUFDLGlCQUFpQixDQUFFLE1BQU0sRUFBRSxXQUFXOztjQUNyQyxJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDO1FBQzNDLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNmLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUNyQixNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQy9CLENBQUM7Q0FFRjtBQUVELE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpZWxkTWV0YWRhdGFVdGlsIH0gZnJvbSAnQGZhcnJpcy9tb2JpbGUtZGV2a2l0JztcclxuXHJcbmNsYXNzIEVudGl0eVV0aWwge1xyXG4gIC8qKlxyXG4gICAqIOafpeaJvuWxnuaAp+eahOexu+Wei1xyXG4gICAqIEBwYXJhbSBlbnRpdHlUeXBlIOWunuS9k+exu+Wei1xyXG4gICAqIEBwYXJhbSB0YXJnZXRQcm9wTmFtZSDlsZ7mgKflkI3np7BcclxuICAgKiBAcmV0dXJuIOWxnuaAp+S/oeaBr++8jOWMheWQq+WxnuaAp+exu+Wei++8iE5nRmllbGTjgIFOZ09iamVjdOOAgU5nTGlzdCwgTmdEeW5hbWlj77yJ5ZKM5bGe5oCn5a+55bqU55qE5a6e5L2T57G75Z6L77yI5b2TTmdGaWVsZOexu+Wei+aXtuS4um51bGzvvIlcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0UHJvcEluZm8oZW50aXR5VHlwZTogYW55LCB0YXJnZXRQcm9wTmFtZTogc3RyaW5nKTogeyBwcm9wVHlwZTogc3RyaW5nLCBwcm9wRW50aXR5VHlwZTogYW55LCBwcm9wTWV0YWRhdGE6IGFueX0ge1xyXG5cclxuICAgIGxldCBwcm9wVHlwZTogc3RyaW5nO1xyXG4gICAgbGV0IHByb3BFbnRpdHlUeXBlOiBhbnk7XHJcbiAgICBsZXQgcHJvcE1ldGFkYXRhOiBhbnk7XHJcblxyXG4gICAgLy8gTmdGaWVsZFxyXG4gICAgY29uc3QgbmdGaWVsZFByb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ0ZpZWxkcyhlbnRpdHlUeXBlKTtcclxuICAgIE9iamVjdC5rZXlzKG5nRmllbGRQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBwcm9wVHlwZSA9ICdOZ0ZpZWxkJztcclxuICAgICAgICBwcm9wRW50aXR5VHlwZSA9IG51bGw7XHJcbiAgICAgICAgcHJvcE1ldGFkYXRhID0gbmdGaWVsZFByb3BlcnRpZXNbcHJvcE5hbWVdO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBOZ09iamVjdFxyXG4gICAgY29uc3QgbmdPYmplY3RQcm9wZXJ0aWVzID0gRmllbGRNZXRhZGF0YVV0aWwuZ2V0TmdPYmplY3RzKGVudGl0eVR5cGUpO1xyXG4gICAgT2JqZWN0LmtleXMobmdPYmplY3RQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBwcm9wVHlwZSA9ICdOZ09iamVjdCc7XHJcbiAgICAgICAgcHJvcEVudGl0eVR5cGUgPSBuZ09iamVjdFByb3BlcnRpZXNbcHJvcE5hbWVdLnR5cGU7XHJcbiAgICAgICAgcHJvcE1ldGFkYXRhID0gbmdPYmplY3RQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTmdMaXN0XHJcbiAgICBjb25zdCBuZ0xpc3RQcm9wZXJ0aWVzID0gRmllbGRNZXRhZGF0YVV0aWwuZ2V0TmdMaXN0KGVudGl0eVR5cGUpO1xyXG4gICAgT2JqZWN0LmtleXMobmdMaXN0UHJvcGVydGllcykuZm9yRWFjaCgocHJvcE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZiAocHJvcE5hbWUgPT09IHRhcmdldFByb3BOYW1lKSB7XHJcbiAgICAgICAgcHJvcFR5cGUgPSAnTmdMaXN0JztcclxuICAgICAgICBwcm9wRW50aXR5VHlwZSA9IG5nTGlzdFByb3BlcnRpZXNbcHJvcE5hbWVdLnR5cGU7XHJcbiAgICAgICAgcHJvcE1ldGFkYXRhID0gbmdMaXN0UHJvcGVydGllc1twcm9wTmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG5nRHluYW1pY1Byb3BlcnRpZXMgPSBGaWVsZE1ldGFkYXRhVXRpbC5nZXROZ0R5bmFtaWMoZW50aXR5VHlwZSk7XHJcbiAgICBPYmplY3Qua2V5cyhuZ0R5bmFtaWNQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBwcm9wVHlwZSA9ICdOZ0R5bmFtaWMnO1xyXG4gICAgICAgIHByb3BFbnRpdHlUeXBlID0gbmdEeW5hbWljUHJvcGVydGllc1twcm9wTmFtZV0udHlwZTtcclxuICAgICAgICBwcm9wTWV0YWRhdGEgPSBuZ0R5bmFtaWNQcm9wZXJ0aWVzW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHsgcHJvcFR5cGUsIHByb3BFbnRpdHlUeXBlLCBwcm9wTWV0YWRhdGEgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWunuS9k+eahOS4u+mUruWQjVxyXG4gICAqIEBwYXJhbSBlbnRpdHlUeXBlIOWunuS9k+exu+Wei1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRQcmltYXJ5S2V5KGVudGl0eVR5cGU6IGFueSkge1xyXG4gICAgY29uc3QgcHJpbWFyeU5nRmlsZWRQcm9wID0gRmllbGRNZXRhZGF0YVV0aWwuZ2V0UHJpbWFyeUZpZWxkTWV0YWRhdGEoZW50aXR5VHlwZSk7XHJcbiAgICBpZiAocHJpbWFyeU5nRmlsZWRQcm9wKSB7XHJcbiAgICAgIHJldHVybiBwcmltYXJ5TmdGaWxlZFByb3AuZGF0YUZpZWxkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5piv5ZCm5Li65a+56LGh5bGe5oCnXHJcbiAgICovXHJcbiAgc3RhdGljIGlzT2JqZWN0UHJvcChlbnRpdHlUeXBlOiBhbnksIHRhcmdldFByb3BOYW1lOiBzdHJpbmcsICkge1xyXG4gICAgbGV0IGlzT2JqZWN0UHJvcCA9IGZhbHNlO1xyXG4gICAgY29uc3QgbmdPYmplY3RQcm9wZXJ0aWVzID0gRmllbGRNZXRhZGF0YVV0aWwuZ2V0TmdPYmplY3RzKGVudGl0eVR5cGUpO1xyXG4gICAgT2JqZWN0LmtleXMobmdPYmplY3RQcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gdGFyZ2V0UHJvcE5hbWUpIHtcclxuICAgICAgICBpc09iamVjdFByb3AgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpc09iamVjdFByb3A7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmo4Dmn6XmmK/lkKbmmK/liqjmgIHliJflsZ7mgKdcclxuICAgKi9cclxuICBzdGF0aWMgaXNEeW5hbWljUHJvcChlbnRpdHlUeXBlOiBhbnksIHRhcmdldFByb3BOYW1lOiBzdHJpbmcpIHtcclxuICAgIGxldCBpc0R5bmFtaWNQcm9wID0gZmFsc2U7XHJcbiAgICBjb25zdCBuZ0R5bmFtaWNQcm9wZXJ0aWVzID0gRmllbGRNZXRhZGF0YVV0aWwuZ2V0TmdEeW5hbWljKGVudGl0eVR5cGUpO1xyXG4gICAgT2JqZWN0LmtleXMobmdEeW5hbWljUHJvcGVydGllcykuZm9yRWFjaCgocHJvcE5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgICBpZiAocHJvcE5hbWUgPT09IHRhcmdldFByb3BOYW1lKSB7XHJcbiAgICAgICAgaXNEeW5hbWljUHJvcCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlzRHluYW1pY1Byb3A7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkuLrlrp7kvZPlop7liqBpbml0aWFsRGF0YeWxnuaAp1xyXG4gICAqIEBwYXJhbSBlbnRpdHkg5a6e5L2T5a6e5L6LXHJcbiAgICogQHBhcmFtIGluaXRpYWxEYXRhIOm7mOiupOWAvOWvueixoVxyXG4gICAqL1xyXG4gIHN0YXRpYyBhcHBlbmRJbml0aWFsRGF0YSAoZW50aXR5LCBpbml0aWFsRGF0YSkge1xyXG4gICAgY29uc3QgZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIGluaXRpYWxEYXRhKTtcclxuICAgIGRlbGV0ZSBkYXRhLmlkO1xyXG4gICAgZGVsZXRlIGRhdGEucGFyZW50SUQ7XHJcbiAgICBlbnRpdHlbJ2luaXRpYWxEYXRhJ10gPSBkYXRhO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IEVudGl0eVV0aWwgfTtcclxuIl19