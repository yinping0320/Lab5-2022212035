/**
 * @fileoverview added by tsickle
 * Generated from: lib/utils/request_info.util.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
class RequestInfoUtil {
    /**
     * 构造RequestInfo
     * @param {?} repository
     * @return {?}
     */
    static buildRequestInfo(repository) {
        /** @type {?} */
        const requestInfo = {
            dataChange: repository.entityManager.buildAllEntityChangeDetails(),
            variableChange: repository.variableManager.buildChangeDetail()
        };
        return requestInfo;
    }
    /**
     * 向body中添加RequestInfo
     * @param {?} body
     * @param {?} repository
     * @return {?}
     */
    static appendRequestInfoToBody(body, repository) {
        if (body.requestInfo) {
            return body;
        }
        /** @type {?} */
        const requestInfo = this.buildRequestInfo(repository);
        // body不存在时，body=requestInfo
        if (!body || Object.keys(body).length === 0) {
            return requestInfo;
        }
        /** @type {?} */
        const bodyWithRequestInfo = Object.assign({}, body, { requestInfo: requestInfo });
        return bodyWithRequestInfo;
    }
}
export { RequestInfoUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdF9pbmZvLnV0aWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmFycmlzL21vYmlsZS1iZWYvIiwic291cmNlcyI6WyJsaWIvdXRpbHMvcmVxdWVzdF9pbmZvLnV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFJQSxNQUFNLGVBQWU7Ozs7OztJQUtaLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFpQzs7Y0FDeEQsV0FBVyxHQUFnQjtZQUMvQixVQUFVLEVBQUUsVUFBVSxDQUFDLGFBQWEsQ0FBQywyQkFBMkIsRUFBRTtZQUNsRSxjQUFjLEVBQUUsVUFBVSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsRUFBRTtTQUMvRDtRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3JCLENBQUM7Ozs7Ozs7SUFLTSxNQUFNLENBQUMsdUJBQXVCLENBQUMsSUFBUyxFQUFFLFVBQWlDO1FBQ2hGLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixPQUFPLElBQUksQ0FBQztTQUNiOztjQUNLLFdBQVcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDO1FBRXJELDRCQUE0QjtRQUM1QixJQUFJLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUMzQyxPQUFPLFdBQVcsQ0FBQztTQUNwQjs7Y0FFSyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLENBQUM7UUFDakYsT0FBTyxtQkFBbUIsQ0FBQztJQUM3QixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICdAZmFycmlzL21vYmlsZS1kZXZraXQnO1xyXG5pbXBvcnQgeyBCZWZSZXBvc2l0b3J5IH0gZnJvbSAnLi4vYmVmX3JlcG9zaXRvcnknO1xyXG5pbXBvcnQgeyBSZXF1ZXN0SW5mbyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmNsYXNzIFJlcXVlc3RJbmZvVXRpbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIOaehOmAoFJlcXVlc3RJbmZvXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBidWlsZFJlcXVlc3RJbmZvKHJlcG9zaXRvcnk6IEJlZlJlcG9zaXRvcnk8RW50aXR5Pik6IFJlcXVlc3RJbmZvIHtcclxuICAgIGNvbnN0IHJlcXVlc3RJbmZvOiBSZXF1ZXN0SW5mbyA9IHtcclxuICAgICAgZGF0YUNoYW5nZTogcmVwb3NpdG9yeS5lbnRpdHlNYW5hZ2VyLmJ1aWxkQWxsRW50aXR5Q2hhbmdlRGV0YWlscygpLFxyXG4gICAgICB2YXJpYWJsZUNoYW5nZTogcmVwb3NpdG9yeS52YXJpYWJsZU1hbmFnZXIuYnVpbGRDaGFuZ2VEZXRhaWwoKVxyXG4gICAgfTtcclxuICAgIHJldHVybiByZXF1ZXN0SW5mbztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWQkWJvZHnkuK3mt7vliqBSZXF1ZXN0SW5mb1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgYXBwZW5kUmVxdWVzdEluZm9Ub0JvZHkoYm9keTogYW55LCByZXBvc2l0b3J5OiBCZWZSZXBvc2l0b3J5PEVudGl0eT4pOiBhbnkge1xyXG4gICAgaWYgKGJvZHkucmVxdWVzdEluZm8pIHtcclxuICAgICAgcmV0dXJuIGJvZHk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXF1ZXN0SW5mbyA9IHRoaXMuYnVpbGRSZXF1ZXN0SW5mbyhyZXBvc2l0b3J5KTtcclxuXHJcbiAgICAvLyBib2R55LiN5a2Y5Zyo5pe277yMYm9keT1yZXF1ZXN0SW5mb1xyXG4gICAgaWYgKCFib2R5IHx8IE9iamVjdC5rZXlzKGJvZHkpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gcmVxdWVzdEluZm87XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9keVdpdGhSZXF1ZXN0SW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGJvZHksIHsgcmVxdWVzdEluZm86IHJlcXVlc3RJbmZvIH0pO1xyXG4gICAgcmV0dXJuIGJvZHlXaXRoUmVxdWVzdEluZm87XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSZXF1ZXN0SW5mb1V0aWwgfTtcclxuIl19