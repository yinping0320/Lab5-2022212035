/**
 * @fileoverview added by tsickle
 * Generated from: lib/session/storage-strategies/session_storage_strategy.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * 基于浏览器SessionStorage的BeSession缓存
 * \@summary
 * 1、SeparatedSession模式下：
 *  {
 *    BE_SESSION_ID: {
 *      frmSessionId1_beSessionUri1: beSessionId-1,
 *      frmSessionId2_beSessionUri2: beSessionId-2,
 *    }
 *  }
 * 2、UnifiedSession模式下（在Debug状态，同模式1）：
 * {
 *    BE_SESSION_ID: {
 *      frmSessionId1: beSessionId-1,
 *      frmSessionId2: beSessionId-2,
 *    }
 *  }
 */
var /**
 * 基于浏览器SessionStorage的BeSession缓存
 * \@summary
 * 1、SeparatedSession模式下：
 *  {
 *    BE_SESSION_ID: {
 *      frmSessionId1_beSessionUri1: beSessionId-1,
 *      frmSessionId2_beSessionUri2: beSessionId-2,
 *    }
 *  }
 * 2、UnifiedSession模式下（在Debug状态，同模式1）：
 * {
 *    BE_SESSION_ID: {
 *      frmSessionId1: beSessionId-1,
 *      frmSessionId2: beSessionId-2,
 *    }
 *  }
 */
SessionStorageBeSessionStorageStrategy = /** @class */ (function () {
    function SessionStorageBeSessionStorageStrategy() {
        /**
         * 缓存Token
         */
        this.sessionStorageKey = 'BE_SESSION_ID';
    }
    /**
     * 获取值
     */
    /**
     * 获取值
     * @param {?} beSessionKey
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.getItem = /**
     * 获取值
     * @param {?} beSessionKey
     * @return {?}
     */
    function (beSessionKey) {
        /** @type {?} */
        var beSessions = this.getAllBeSessions();
        return beSessions[beSessionKey];
    };
    /**
     * 设置值
     */
    /**
     * 设置值
     * @param {?} beSessionKey
     * @param {?} beSessionId
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.setItem = /**
     * 设置值
     * @param {?} beSessionKey
     * @param {?} beSessionId
     * @return {?}
     */
    function (beSessionKey, beSessionId) {
        /** @type {?} */
        var beSessions = this.getAllBeSessions();
        beSessions[beSessionKey] = beSessionId;
        this.setAllBeSessions(beSessions);
    };
    /**
     * 删除值
     */
    /**
     * 删除值
     * @param {?} beSessionKey
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.removeItem = /**
     * 删除值
     * @param {?} beSessionKey
     * @return {?}
     */
    function (beSessionKey) {
        /** @type {?} */
        var beSessions = this.getAllBeSessions();
        if (beSessions[beSessionKey]) {
            delete beSessions[beSessionKey];
        }
        this.setAllBeSessions(beSessions);
    };
    /**
     * 根据scope删除值
     */
    /**
     * 根据scope删除值
     * @param {?} beSessionScope
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.removeItemsByScope = /**
     * 根据scope删除值
     * @param {?} beSessionScope
     * @return {?}
     */
    function (beSessionScope) {
        /** @type {?} */
        var beSessions = this.getAllBeSessions();
        Object.keys(beSessions).forEach((/**
         * @param {?} beSessionKey
         * @return {?}
         */
        function (beSessionKey) {
            if (beSessionKey.startsWith(beSessionScope) === true) {
                delete beSessions[beSessionKey];
            }
        }));
        this.setAllBeSessions(beSessions);
    };
    /**
     * 清空所有会话
     */
    /**
     * 清空所有会话
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.clear = /**
     * 清空所有会话
     * @return {?}
     */
    function () {
        window.sessionStorage.removeItem(this.sessionStorageKey);
    };
    /**
     * 从SessionStorage中获取全部BeSessions
     */
    /**
     * 从SessionStorage中获取全部BeSessions
     * @private
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.getAllBeSessions = /**
     * 从SessionStorage中获取全部BeSessions
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var beSessionsJson = window.sessionStorage.getItem(this.sessionStorageKey);
        if (!beSessionsJson) {
            return {};
        }
        return JSON.parse(beSessionsJson);
    };
    /**
     * 设置全部BeSessions到SessionStorage
     */
    /**
     * 设置全部BeSessions到SessionStorage
     * @param {?} beSessions
     * @return {?}
     */
    SessionStorageBeSessionStorageStrategy.prototype.setAllBeSessions = /**
     * 设置全部BeSessions到SessionStorage
     * @param {?} beSessions
     * @return {?}
     */
    function (beSessions) {
        /** @type {?} */
        var beSessionsString = JSON.stringify(beSessions);
        window.sessionStorage.setItem(this.sessionStorageKey, beSessionsString);
    };
    return SessionStorageBeSessionStorageStrategy;
}());
if (false) {
    /**
     * 缓存Token
     * @type {?}
     * @private
     */
    SessionStorageBeSessionStorageStrategy.prototype.sessionStorageKey;
}
export { SessionStorageBeSessionStorageStrategy };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Vzc2lvbl9zdG9yYWdlX3N0cmF0ZWd5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9tb2JpbGUtYmVmLyIsInNvdXJjZXMiOlsibGliL3Nlc3Npb24vc3RvcmFnZS1zdHJhdGVnaWVzL3Nlc3Npb25fc3RvcmFnZV9zdHJhdGVneS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUFBOzs7O1FBS1Usc0JBQWlCLEdBQUcsZUFBZSxDQUFDO0lBb0U5QyxDQUFDO0lBbEVDOztPQUVHOzs7Ozs7SUFDSSx3REFBTzs7Ozs7SUFBZCxVQUFlLFlBQW9COztZQUMzQixVQUFVLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFO1FBQzFDLE9BQU8sVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRDs7T0FFRzs7Ozs7OztJQUNJLHdEQUFPOzs7Ozs7SUFBZCxVQUFlLFlBQW9CLEVBQUUsV0FBbUI7O1lBQ2hELFVBQVUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7UUFDMUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUN2QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSSwyREFBVTs7Ozs7SUFBakIsVUFBa0IsWUFBb0I7O1lBQzlCLFVBQVUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7UUFDMUMsSUFBSSxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUU7WUFDNUIsT0FBTyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDakM7UUFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVEOztPQUVHOzs7Ozs7SUFDSSxtRUFBa0I7Ozs7O0lBQXpCLFVBQTBCLGNBQXNCOztZQUN4QyxVQUFVLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFO1FBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTzs7OztRQUFDLFVBQUMsWUFBb0I7WUFDbkQsSUFBSSxZQUFZLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxLQUFLLElBQUksRUFBRTtnQkFDcEQsT0FBTyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDakM7UUFDSCxDQUFDLEVBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7Ozs7O0lBQ0ksc0RBQUs7Ozs7SUFBWjtRQUNFLE1BQU0sQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0ssaUVBQWdCOzs7OztJQUF4Qjs7WUFDUSxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO1FBQzVFLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDbkIsT0FBTyxFQUFFLENBQUM7U0FDWDtRQUNELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNILGlFQUFnQjs7Ozs7SUFBaEIsVUFBaUIsVUFBZTs7WUFDeEIsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUM7UUFDbkQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUNILDZDQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQzs7Ozs7OztJQXBFQyxtRUFBNEM7O0FBc0U5QyxPQUFPLEVBQUUsc0NBQXNDLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJlU2Vzc2lvblN0b3JhZ2VTdHJhdGVneSB9IGZyb20gJy4vc3RvcmFnZV9zdHJhdGVneSc7XHJcblxyXG4vKipcclxuICog5Z+65LqO5rWP6KeI5ZmoU2Vzc2lvblN0b3JhZ2XnmoRCZVNlc3Npb27nvJPlrZhcclxuICogQHN1bW1hcnlcclxuICogMeOAgVNlcGFyYXRlZFNlc3Npb27mqKHlvI/kuIvvvJpcclxuICogIHtcclxuICogICAgQkVfU0VTU0lPTl9JRDoge1xyXG4gKiAgICAgIGZybVNlc3Npb25JZDFfYmVTZXNzaW9uVXJpMTogYmVTZXNzaW9uSWQtMSxcclxuICogICAgICBmcm1TZXNzaW9uSWQyX2JlU2Vzc2lvblVyaTI6IGJlU2Vzc2lvbklkLTIsXHJcbiAqICAgIH1cclxuICogIH1cclxuICogMuOAgVVuaWZpZWRTZXNzaW9u5qih5byP5LiL77yI5ZyoRGVidWfnirbmgIHvvIzlkIzmqKHlvI8x77yJ77yaXHJcbiAqIHtcclxuICogICAgQkVfU0VTU0lPTl9JRDoge1xyXG4gKiAgICAgIGZybVNlc3Npb25JZDE6IGJlU2Vzc2lvbklkLTEsXHJcbiAqICAgICAgZnJtU2Vzc2lvbklkMjogYmVTZXNzaW9uSWQtMixcclxuICogICAgfVxyXG4gKiAgfVxyXG4gKi9cclxuY2xhc3MgU2Vzc2lvblN0b3JhZ2VCZVNlc3Npb25TdG9yYWdlU3RyYXRlZ3kgaW1wbGVtZW50cyBCZVNlc3Npb25TdG9yYWdlU3RyYXRlZ3kge1xyXG5cclxuICAvKipcclxuICAgKiDnvJPlrZhUb2tlblxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2Vzc2lvblN0b3JhZ2VLZXkgPSAnQkVfU0VTU0lPTl9JRCc7XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWAvFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRJdGVtKGJlU2Vzc2lvbktleTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGJlU2Vzc2lvbnMgPSB0aGlzLmdldEFsbEJlU2Vzc2lvbnMoKTtcclxuICAgIHJldHVybiBiZVNlc3Npb25zW2JlU2Vzc2lvbktleV07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7lgLxcclxuICAgKi9cclxuICBwdWJsaWMgc2V0SXRlbShiZVNlc3Npb25LZXk6IHN0cmluZywgYmVTZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgYmVTZXNzaW9ucyA9IHRoaXMuZ2V0QWxsQmVTZXNzaW9ucygpO1xyXG4gICAgYmVTZXNzaW9uc1tiZVNlc3Npb25LZXldID0gYmVTZXNzaW9uSWQ7XHJcbiAgICB0aGlzLnNldEFsbEJlU2Vzc2lvbnMoYmVTZXNzaW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliKDpmaTlgLxcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlSXRlbShiZVNlc3Npb25LZXk6IHN0cmluZykge1xyXG4gICAgY29uc3QgYmVTZXNzaW9ucyA9IHRoaXMuZ2V0QWxsQmVTZXNzaW9ucygpO1xyXG4gICAgaWYgKGJlU2Vzc2lvbnNbYmVTZXNzaW9uS2V5XSkge1xyXG4gICAgICBkZWxldGUgYmVTZXNzaW9uc1tiZVNlc3Npb25LZXldO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRBbGxCZVNlc3Npb25zKGJlU2Vzc2lvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC55o2uc2NvcGXliKDpmaTlgLxcclxuICAgKi9cclxuICBwdWJsaWMgcmVtb3ZlSXRlbXNCeVNjb3BlKGJlU2Vzc2lvblNjb3BlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGJlU2Vzc2lvbnMgPSB0aGlzLmdldEFsbEJlU2Vzc2lvbnMoKTtcclxuICAgIE9iamVjdC5rZXlzKGJlU2Vzc2lvbnMpLmZvckVhY2goKGJlU2Vzc2lvbktleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmIChiZVNlc3Npb25LZXkuc3RhcnRzV2l0aChiZVNlc3Npb25TY29wZSkgPT09IHRydWUpIHtcclxuICAgICAgICBkZWxldGUgYmVTZXNzaW9uc1tiZVNlc3Npb25LZXldO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc2V0QWxsQmVTZXNzaW9ucyhiZVNlc3Npb25zKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa4heepuuaJgOacieS8muivnVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuc2Vzc2lvblN0b3JhZ2VLZXkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5LuOU2Vzc2lvblN0b3JhZ2XkuK3ojrflj5blhajpg6hCZVNlc3Npb25zXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRBbGxCZVNlc3Npb25zKCk6IGFueSB7XHJcbiAgICBjb25zdCBiZVNlc3Npb25zSnNvbiA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRoaXMuc2Vzc2lvblN0b3JhZ2VLZXkpO1xyXG4gICAgaWYgKCFiZVNlc3Npb25zSnNvbikge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShiZVNlc3Npb25zSnNvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorr7nva7lhajpg6hCZVNlc3Npb25z5YiwU2Vzc2lvblN0b3JhZ2VcclxuICAgKi9cclxuICBzZXRBbGxCZVNlc3Npb25zKGJlU2Vzc2lvbnM6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc3QgYmVTZXNzaW9uc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGJlU2Vzc2lvbnMpO1xyXG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0odGhpcy5zZXNzaW9uU3RvcmFnZUtleSwgYmVTZXNzaW9uc1N0cmluZyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBTZXNzaW9uU3RvcmFnZUJlU2Vzc2lvblN0b3JhZ2VTdHJhdGVneSB9OyJdfQ==