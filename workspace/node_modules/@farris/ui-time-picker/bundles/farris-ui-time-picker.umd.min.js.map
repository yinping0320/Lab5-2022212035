{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://@farris/ui-time-picker/lib/services/update-host-class.service.ts","ng://@farris/ui-time-picker/lib/animations/animation-consts.ts","ng://@farris/ui-time-picker/lib/animations/slide.ts","ng://@farris/ui-time-picker/lib/utils/convert.ts","ng://@farris/ui-time-picker/lib/utils/check.ts","ng://@farris/ui-time-picker/lib/time-value-accessor.directive.ts","ng://@farris/ui-time-picker/lib/utils/date-helper.ts","ng://@farris/ui-time-picker/lib/time-holder.ts","ng://@farris/ui-time-picker/lib/time-picker-panel.component.ts","ng://@farris/ui-time-picker/lib/services/time-picker.locale.service.ts","ng://@farris/ui-time-picker/lib/time-picker.component.ts","ng://@farris/ui-time-picker/lib/time-picker.module.ts"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","UpdateHostClassService","updateHostClass","el","classMap","removeClass","renderer","addClass","Injectable","RendererFactory2","rendererFactory2","createRenderer","AnimationDuration","SLOW","BASE","FAST","AnimationCurves","EASE_BASE_OUT","EASE_BASE_IN","EASE_OUT","EASE_IN","EASE_IN_OUT","EASE_OUT_BACK","EASE_IN_BACK","EASE_IN_OUT_BACK","EASE_OUT_CIRC","EASE_IN_CIRC","EASE_IN_OUT_CIRC","EASE_OUT_QUINT","EASE_IN_QUINT","EASE_IN_OUT_QUINT","ANIMATION_TRANSITION_IN","ANIMATION_TRANSITION_OUT","slideMotion","trigger","state","style","opacity","transform","transformOrigin","transition","animate","toBoolean","convertToDate","format","indexOf","split","fnsParse","Date","convertToStr","date","selected12Hours","isNaN","getTime","fnsFormat","isNotNil","TimeValueAccessorDirective","keyup","changed","blur","touched","_onChange","parseTime","text","elementRef","nativeElement","_onTouch","setRange","focus","setSelectionRange","writeValue","formatStr","nzTime","registerOnChange","fn","registerOnTouched","Directive","args","selector","exportAs","providers","provide","NG_VALUE_ACCESSOR","useExisting","multi","ElementRef","Input","HostListener","TimeHolder","setValueByStep","step","times","Math","floor","setDefaultValueIfNil","_value","defaultOpenValue","setMinutes","disabled","minutes","setHours","hours","setSeconds","seconds","setUse12Hours","_use12Hours","defineProperty","_changes","asObservable","isValid","_hours","getHours","_minutes","getMinutes","_seconds","getSeconds","_selected12Hours","_clear","_text","setValue","use12Hours","clear","update","undefined","isEmpty","defaultHours","defaultMinutes","defaultSeconds","default12Hours","calculateViewHour","toUpperCase","_defaultOpenValue","hourStep","minuteStep","secondStep","setDefaultOpenValue","Subject","makeRange","start","ceil","Array","fill","map","_","TimePickerPanelComponent","replace","_allowEmpty","_opened","opened","initPosition","selectInputRange","time","_disabledHours","buildHours","_disabledMinutes","buildMinutes","_disabledSeconds","buildSeconds","_format","enabledColumns","charSet","Set","hourEnabled","has","minuteEnabled","secondEnabled","build12Hours","panelWidth","cdr","markForCheck","_hourStep","_minuteStep","_secondStep","buildTimes","ngOnInit","_this","inDatePicker","prefixCls","changes","pipe","takeUntil","unsubscribe$","subscribe","valueChange","emit","setClassMap","ngAfterViewInit","ngOnDestroy","complete","ngOnChanges","previousValue","currentValue","timeValueAccessorDirective","hourRanges","disabledHours","startIndex","filter","hourRange","index","temp","__spread","concat","unshift","splice","hideDisabledOptions","minuteRange","disabledMinutes","secondRange","disabledSeconds","isUpperForamt","includes","use12HoursRange","selectHour","event","hour","stopPropagation","scrollToSelected","hourListElement","find","_a","selectMinute","minute","minuteListElement","selectSecond","second","secondListElement","select12Hours","use12HoursListElement","instance","duration","unit","transIndex","translateIndex","currentOption","children","scrollTo","offsetTop","calcIndex","item","element","to","scrollTop","perTick","reqAnimFrame","array","reduce","pre","onChange","onTouch","updateCls","isSelectedHour","viewHours","defaultViewHours","selectCurrentTimeWhenNull","isSelectedMinute","isSelectedSecond","isSelected12Hours","checkMinutes","_date","canuseMinute","checkSeconds","_sdate","canuseSecond","checkDate","canuseHour","mdate","hmsCls","v","type","cls","selected","disabledC","Component","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","template","UpdateCls","ChangeDetectorRef","ViewChild","Output","showHeader","EventEmitter","timePanelTitle","trackByItems","TimePickerLocaleService","getLocaleConfig","locale","localeService","localeId","localeConfig","providedIn","LocaleService","zh-CHS","placeholder","en","zh-CHT","num","TimePickerComponent","_hideDisabledOptions","_autoFocus","updateAutoFocus","_disabled","_readonly","_editable","localConfig","isInit","document","body","querySelector","overlayRef","overlayPanelRef","createElement","appendChild","addEventListener","timeInput","onBlur","removeEventListener","overLayService","destory","onMouseEnter","readonly","target","display","onMouseLeave","open","isOpen","close","creatPanel","openChange","cRef","location","setStyle","registerMouseEvent","contains","setTimeout","setPosition","lastChild","removeChild","destroy","removeStyle","vcRef","createComponent","cfr","resolveComponentFactory","classList","add","changeDetectorRef","detectChanges","val","getBoundingClientRect","elTop","top","elLeft","left","elHeight","height","elWidth","width","window","innerHeight","innerWidth","onClickClearBtn","changeFlag","_onTouched","onValueChange","onClear","setDisabledState","isDisabled","animations","Renderer2","ViewContainerRef","ComponentFactoryResolver","HostBinding","hostCls","groupIcon","clearText","popupClassName","OverLayHiddenService","TimePickerModule","NgModule","declarations","entryComponents","exports","imports","CommonModule","FormsModule"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Renderer2, RendererFactory2 } from '@angular/core';\r\n\r\nimport { NgClassInterface } from '../interfaces/ng-class';\r\n\r\n@Injectable()\r\nexport class UpdateHostClassService {\r\n    private classMap = {};\r\n    readonly renderer: Renderer2;\r\n\r\n    updateHostClass(el: HTMLElement, classMap: object): void {\r\n        this.removeClass(el, this.classMap, this.renderer);\r\n        this.classMap = { ...classMap };\r\n        this.addClass(el, this.classMap, this.renderer);\r\n    }\r\n\r\n    private removeClass(el: HTMLElement, classMap: NgClassInterface, renderer: Renderer2): void {\r\n        for (const i in classMap) {\r\n            if (classMap.hasOwnProperty(i)) {\r\n                renderer.removeClass(el, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    private addClass(el: HTMLElement, classMap: NgClassInterface, renderer: Renderer2): void {\r\n        for (const i in classMap) {\r\n            if (classMap.hasOwnProperty(i) && classMap[i]) {\r\n                renderer.addClass(el, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor(rendererFactory2: RendererFactory2) {\r\n        this.renderer = rendererFactory2.createRenderer(null, null);\r\n    }\r\n}\r\n","export class AnimationDuration {\r\n    static SLOW = '0.3s'; // Modal\r\n    static BASE = '0.2s';\r\n    static FAST = '0.1s'; // Tooltip\r\n}\r\n\r\nexport class AnimationCurves {\r\n    static EASE_BASE_OUT = 'cubic-bezier(0.7, 0.3, 0.1, 1)';\r\n    static EASE_BASE_IN = 'cubic-bezier(0.9, 0, 0.3, 0.7)';\r\n    static EASE_OUT = 'cubic-bezier(0.215, 0.61, 0.355, 1)';\r\n    static EASE_IN = 'cubic-bezier(0.55, 0.055, 0.675, 0.19)';\r\n    static EASE_IN_OUT = 'cubic-bezier(0.645, 0.045, 0.355, 1)';\r\n    static EASE_OUT_BACK = 'cubic-bezier(0.12, 0.4, 0.29, 1.46)';\r\n    static EASE_IN_BACK = 'cubic-bezier(0.71, -0.46, 0.88, 0.6)';\r\n    static EASE_IN_OUT_BACK = 'cubic-bezier(0.71, -0.46, 0.29, 1.46)';\r\n    static EASE_OUT_CIRC = 'cubic-bezier(0.08, 0.82, 0.17, 1)';\r\n    static EASE_IN_CIRC = 'cubic-bezier(0.6, 0.04, 0.98, 0.34)';\r\n    static EASE_IN_OUT_CIRC = 'cubic-bezier(0.78, 0.14, 0.15, 0.86)';\r\n    static EASE_OUT_QUINT = 'cubic-bezier(0.23, 1, 0.32, 1)';\r\n    static EASE_IN_QUINT = 'cubic-bezier(0.755, 0.05, 0.855, 0.06)';\r\n    static EASE_IN_OUT_QUINT = 'cubic-bezier(0.86, 0, 0.07, 1)';\r\n}\r\n","import {\r\n    animate,\r\n    state,\r\n    style,\r\n    transition,\r\n    trigger,\r\n    AnimationTriggerMetadata\r\n} from '@angular/animations';\r\nimport { AnimationCurves, AnimationDuration } from './animation-consts';\r\n\r\nconst ANIMATION_TRANSITION_IN = `${AnimationDuration.BASE} ${AnimationCurves.EASE_OUT_QUINT}`;\r\nconst ANIMATION_TRANSITION_OUT = `${AnimationDuration.BASE} ${AnimationCurves.EASE_IN_QUINT}`;\r\n\r\nexport const slideMotion: AnimationTriggerMetadata = trigger('slideMotion', [\r\n    state(\r\n        'bottom',\r\n        style({\r\n            opacity: 1,\r\n            transform: 'scaleY(1)',\r\n            transformOrigin: '0% 0%'\r\n        })\r\n    ),\r\n    state(\r\n        'top',\r\n        style({\r\n            opacity: 1,\r\n            transform: 'scaleY(1)',\r\n            transformOrigin: '0% 100%'\r\n        })\r\n    ),\r\n    transition('void => bottom', [\r\n        style({\r\n            opacity: 0,\r\n            transform: 'scaleY(0.8)',\r\n            transformOrigin: '0% 0%'\r\n        }),\r\n        animate(ANIMATION_TRANSITION_IN)\r\n    ]),\r\n    transition('bottom => void', [\r\n        animate(\r\n            ANIMATION_TRANSITION_OUT,\r\n            style({\r\n                opacity: 0,\r\n                transform: 'scaleY(0.8)',\r\n                transformOrigin: '0% 0%'\r\n            })\r\n        )\r\n    ]),\r\n    transition('void => top', [\r\n        style({\r\n            opacity: 0,\r\n            transform: 'scaleY(0.8)',\r\n            transformOrigin: '0% 100%'\r\n        }),\r\n        animate(ANIMATION_TRANSITION_IN)\r\n    ]),\r\n    transition('top => void', [\r\n        animate(\r\n            ANIMATION_TRANSITION_OUT,\r\n            style({\r\n                opacity: 0,\r\n                transform: 'scaleY(0.8)',\r\n                transformOrigin: '0% 100%'\r\n            })\r\n        )\r\n    ])\r\n]);\r\n\r\n// export const slideAlertMotion: AnimationTriggerMetadata = trigger(\r\n//     'slideAlertMotion',\r\n//     [\r\n//         transition(':leave', [\r\n//             style({\r\n//                 opacity: 1,\r\n//                 transform: 'scaleY(1)',\r\n//                 transformOrigin: '0% 0%'\r\n//             }),\r\n//             animate(\r\n//                 `${AnimationDuration.SLOW} ${AnimationCurves.EASE_IN_OUT_CIRC}`,\r\n//                 style({\r\n//                     opacity: 0,\r\n//                     transform: 'scaleY(0)',\r\n//                     transformOrigin: '0% 0%'\r\n//                 })\r\n//             )\r\n//         ])\r\n//     ]\r\n// );\r\n","import { format as fnsFormat, parse as fnsParse } from 'date-fns';\r\n\r\nexport function toBoolean(value: boolean | string): boolean {\r\n    return !!value;\r\n}\r\n\r\nexport function convertToDate(value: string, format: string = 'hh:mm:ss'): Date {\r\n    if (!value || !format) {\r\n        return;\r\n    }\r\n    // let hours = '0';\r\n    // let minutes = '0';\r\n    // let seconds = '0';\r\n    // const formatSArr = format.split(' ')[0];\r\n    // const formatEArr = format.split(' ')[1];\r\n    // const formatArr = formatSArr.split(':');\r\n    // const textArr = value.split(' ')[0].split(':');\r\n    // // tslint:disable-next-line:variable-name\r\n    // const AMOrPM = value.split(' ')[1];\r\n    // formatArr.forEach((item: string, index: number) => {\r\n    //     item = item.toUpperCase();\r\n    //     if (item === 'H' || item === 'HH') {\r\n    //         hours = textArr[index];\r\n    //     } else if (item === 'M' || item === 'MM') {\r\n    //         minutes = textArr[index];\r\n    //     } else if (item === 'S' || item === 'SS') {\r\n    //         seconds = textArr[index];\r\n    //     } else if (item === 'A') {\r\n    //     }\r\n    // });\r\n    // if (formatEArr && formatEArr.toUpperCase() === 'A') {\r\n    //     if (AMOrPM === 'PM') {\r\n    //         hours = Number(hours) + 12 + '';\r\n    //     }\r\n    // }\r\n    // return new Date(\r\n    //     1970,\r\n    //     0,\r\n    //     1,\r\n    //     Number(hours),\r\n    //     Number(minutes),\r\n    //     Number(seconds)\r\n    // );\r\n\r\n    if (format.indexOf('ss') === -1 && value.split(':').length === 3) {\r\n        format = format + ':ss';\r\n    }\r\n\r\n    return fnsParse(value, format, new Date());\r\n}\r\n\r\nexport function convertToStr(\r\n    date: Date,\r\n    format: string = 'hh:mm:ss',\r\n    selected12Hours = 'AM'\r\n) {\r\n    if (!date || isNaN(date.getTime())) {\r\n        return '';\r\n    }\r\n    // let _hours = date.getHours();\r\n    // selected12Hours = selected12Hours ? selected12Hours : 'AM';\r\n    // if (selected12Hours === 'PM') {\r\n    //     _hours = _hours > 12 ? _hours - 12 : _hours;\r\n    // }\r\n    // const hours = addZero(_hours);\r\n    // const minutes = addZero(date.getMinutes());\r\n    // const seconds = addZero(date.getSeconds());\r\n    // if (format.indexOf('a') >= 0 || format.indexOf('A') >= 0) {\r\n    //     format = format.replace(/a/i, selected12Hours);\r\n    // }\r\n    // if (format.indexOf('hh') >= 0 || format.indexOf('HH') >= 0) {\r\n    //     format = format.replace(/hh/i, hours);\r\n    // } else if (format.indexOf('h') >= 0 || format.indexOf('H') >= 0) {\r\n    //     format = format.replace(/h/i, hours);\r\n    // }\r\n    // if (format.indexOf('mm') >= 0 || format.indexOf('MM') >= 0) {\r\n    //     format = format.replace(/mm/i, minutes);\r\n    // } else if (format.indexOf('m') >= 0 || format.indexOf('M') >= 0) {\r\n    //     format = format.replace(/m/i, minutes);\r\n    // }\r\n    // if (format.indexOf('ss') >= 0 || format.indexOf('SS') >= 0) {\r\n    //     format = format.replace(/ss/i, seconds);\r\n    // } else if (format.indexOf('s') >= 0 || format.indexOf('S') >= 0) {\r\n    //     format = format.replace(/s/i, seconds);\r\n    // }\r\n    // return format;\r\n    return fnsFormat(date, format);\r\n}\r\n\r\nexport function addZero(val: any) {\r\n    val = String(val);\r\n    if (val.length === 1) {\r\n        return '0' + val;\r\n    }\r\n    return val;\r\n}\r\n","// tslint:disable-next-line:no-any\r\nexport function isNotNil(value: any): boolean {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { parseTime, format } from './utils/date-helper';\r\n\r\n@Directive({\r\n    selector: 'input[format]',\r\n    exportAs: 'format',\r\n    providers: [\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimeValueAccessorDirective,\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class TimeValueAccessorDirective implements ControlValueAccessor {\r\n    private _onChange: (value: Date) => void;\r\n    private _onTouch: () => void;\r\n    @Input() nzTime: string;\r\n\r\n    @HostListener('keyup')\r\n    keyup(): void {\r\n        this.changed();\r\n    }\r\n\r\n    @HostListener('blur')\r\n    blur(): void {\r\n        this.touched();\r\n    }\r\n\r\n    changed(): void {\r\n        if (this._onChange) {\r\n            const value = parseTime(this.elementRef.nativeElement.value);\r\n            this._onChange(value!);\r\n        }\r\n    }\r\n\r\n    touched(): void {\r\n        if (this._onTouch) {\r\n            this._onTouch();\r\n        }\r\n    }\r\n\r\n    setRange(): void {\r\n        this.elementRef.nativeElement.focus();\r\n        this.elementRef.nativeElement.setSelectionRange(\r\n            0,\r\n            this.elementRef.nativeElement.value.length\r\n        );\r\n    }\r\n\r\n    constructor(private elementRef: ElementRef) {}\r\n\r\n    writeValue(value: Date): void {\r\n        this.elementRef.nativeElement.value = format(value, this.nzTime);\r\n    }\r\n\r\n    registerOnChange(fn: (value: Date) => void): void {\r\n        this._onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => void): void {\r\n        this._onTouch = fn;\r\n    }\r\n}\r\n","import { parse, format as fnsFormat } from 'date-fns';\r\n\r\nexport function parseTime(text: string): Date | undefined {\r\n    if (!text) {\r\n        return;\r\n    }\r\n    return new Date(`1970-01-01 ${text}`);\r\n}\r\nexport function format(date: Date, formatStr: string): string {\r\n    return fnsFormat(date, formatStr);\r\n}\r\n","import { Observable, Subject } from 'rxjs';\r\nimport { isNotNil } from './utils/check';\r\nimport { isValid } from 'date-fns';\r\n\r\nexport class TimeHolder {\r\n    private _seconds: number | undefined = undefined;\r\n    private _hours: number | undefined = undefined;\r\n    private _minutes: number | undefined = undefined;\r\n    private _selected12Hours: string | undefined = undefined;\r\n    private _use12Hours = false;\r\n    private _defaultOpenValue: Date = new Date();\r\n    private _value: Date | undefined;\r\n    private _text: string;\r\n    private _changes = new Subject<Date>();\r\n    hourStep: number = 1;\r\n    minuteStep: number = 1;\r\n    secondStep: number = 1;\r\n\r\n    setValueByStep(value: number, step: number) {\r\n        let times = Math.floor(value / step)\r\n        const remainder = value % step\r\n        const halfStep = step / 2\r\n        times = remainder > halfStep ? times + 1 : times\r\n        return step * times\r\n    }\r\n\r\n    setDefaultValueIfNil(): void {\r\n        if (!isNotNil(this._value)) {\r\n            this._value = new Date(this.defaultOpenValue);\r\n        }\r\n    }\r\n\r\n    setMinutes(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.minutes = value;\r\n        return this;\r\n    }\r\n\r\n    setHours(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.hours = value;\r\n        return this;\r\n    }\r\n\r\n    setSeconds(value: number, disabled: boolean): this {\r\n        if (disabled) {\r\n            return this;\r\n        }\r\n        this.setDefaultValueIfNil();\r\n        this.seconds = value;\r\n        return this;\r\n    }\r\n\r\n    setUse12Hours(value: boolean): this {\r\n        this._use12Hours = value;\r\n        return this;\r\n    }\r\n\r\n    get changes(): Observable<Date> {\r\n        return this._changes.asObservable();\r\n    }\r\n\r\n    get value(): Date | undefined {\r\n        return this._value;\r\n    }\r\n\r\n    set value(value: Date | undefined) {\r\n        if (value !== this._value) {\r\n            this._value = value;\r\n            if (isNotNil(this._value) && isValid(this._value)) {\r\n                // tslint:disable-next-line:no-non-null-assertion\r\n                this._hours = this._value!.getHours();\r\n                this._minutes = this._value!.getMinutes();\r\n                this._seconds = this._value!.getSeconds();\r\n                if (this._use12Hours && isNotNil(this._hours)) {\r\n                    this._selected12Hours = this._hours >= 12 ? 'PM' : 'AM';\r\n                }\r\n            } else {\r\n                this._clear();\r\n            }\r\n        }\r\n    }\r\n    get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    set text(value: string) {\r\n        if (value !== this._text) {\r\n            this._text = value;\r\n        }\r\n    }\r\n\r\n    setValue(value: Date | undefined, use12Hours?: boolean): this {\r\n        if (isNotNil(use12Hours)) {\r\n            this._use12Hours = use12Hours as boolean;\r\n        }\r\n        this.value = value;\r\n        return this;\r\n    }\r\n\r\n    clear(): void {\r\n        this._clear();\r\n        this.update();\r\n    }\r\n\r\n    get isEmpty(): boolean {\r\n        return !(isNotNil(this._hours) || isNotNil(this._minutes) || isNotNil(this._seconds));\r\n    }\r\n\r\n    private _clear(): void {\r\n        this._hours = undefined;\r\n        this._minutes = undefined;\r\n        this._seconds = undefined;\r\n        this._selected12Hours = undefined;\r\n        this._value = undefined;\r\n    }\r\n\r\n    private update(): void {\r\n        if (this.isEmpty) {\r\n            this._value = undefined;\r\n        } else {\r\n            if (!isNotNil(this._hours)) {\r\n                this._hours = this.defaultHours;\r\n            } else {\r\n                this._value!.setHours(this.hours!);\r\n            }\r\n\r\n            if (!isNotNil(this._minutes)) {\r\n                this._minutes = this.defaultMinutes;\r\n            } else {\r\n                this._value!.setMinutes(this.minutes!);\r\n            }\r\n\r\n            if (!isNotNil(this._seconds)) {\r\n                this._seconds = this.defaultSeconds;\r\n            } else {\r\n                this._value!.setSeconds(this.seconds!);\r\n            }\r\n\r\n            if (this._use12Hours) {\r\n                if (!isNotNil(this._selected12Hours)) {\r\n                    this._selected12Hours = this.default12Hours;\r\n                }\r\n                if (this.selected12Hours === 'PM' && this._hours! < 12) {\r\n                    this._hours! += 12;\r\n                    this._value!.setHours(this._hours!);\r\n                }\r\n                if (this.selected12Hours === 'AM' && this._hours! >= 12) {\r\n                    this._hours! -= 12;\r\n                    this._value!.setHours(this._hours!);\r\n                }\r\n            }\r\n\r\n            this._value = new Date(this._value!);\r\n        }\r\n        this.changed();\r\n    }\r\n\r\n    changed(): void {\r\n        this._changes.next(this._value);\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * UI view hours\r\n     * Get viewHours which is selected in `time-picker-panel` and its range is [12, 1, 2, ..., 11]\r\n     */\r\n    get viewHours(): number | undefined {\r\n        return this._use12Hours && isNotNil(this._hours) ? this.calculateViewHour(this._hours!) : this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Value hours\r\n     * Get realHours and its range is [0, 1, 2, ..., 22, 23]\r\n     */\r\n    get realHours(): number | undefined {\r\n        return this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Same as realHours\r\n     * @see realHours\r\n     */\r\n    get hours(): number | undefined {\r\n        return this._hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Set viewHours to realHours\r\n     */\r\n    set hours(value: number | undefined) {\r\n        if (value !== this._hours) {\r\n            if (this._use12Hours) {\r\n                if (this.selected12Hours === 'PM' && value !== 12) {\r\n                    this._hours! = (value as number) + 12;\r\n                } else if (this.selected12Hours === 'AM' && value === 12) {\r\n                    this._hours = 0;\r\n                } else {\r\n                    this._hours = value;\r\n                }\r\n            } else {\r\n                this._hours = value;\r\n            }\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get minutes(): number | undefined {\r\n        return this._minutes;\r\n    }\r\n\r\n    set minutes(value: number | undefined) {\r\n        if (value !== this._minutes) {\r\n            this._minutes = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get seconds(): number | undefined {\r\n        return this._seconds;\r\n    }\r\n\r\n    set seconds(value: number | undefined) {\r\n        if (value !== this._seconds) {\r\n            this._seconds = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get selected12Hours(): string | undefined {\r\n        return this._selected12Hours;\r\n    }\r\n\r\n    set selected12Hours(value: string | undefined) {\r\n        if (value!.toUpperCase() !== this._selected12Hours) {\r\n            this._selected12Hours = value!.toUpperCase();\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    get defaultOpenValue(): Date {\r\n        this._defaultOpenValue.setHours(this.setValueByStep(this._defaultOpenValue.getHours(), this.hourStep))\r\n        this._defaultOpenValue.setMinutes(this.setValueByStep(this._defaultOpenValue.getMinutes(), this.minuteStep))\r\n        this._defaultOpenValue.setSeconds(this.setValueByStep(this._defaultOpenValue.getSeconds(), this.secondStep))\r\n        return this._defaultOpenValue;\r\n    }\r\n\r\n    set defaultOpenValue(value: Date) {\r\n        if (this._defaultOpenValue !== value) {\r\n            this._defaultOpenValue = value;\r\n            this.update();\r\n        }\r\n    }\r\n\r\n    setDefaultOpenValue(value: Date): this {\r\n        this.defaultOpenValue = value;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Get deafultViewHours when defaultOpenValue is setted\r\n     * @see viewHours\r\n     */\r\n    get defaultViewHours(): number {\r\n        const hours = this.defaultOpenValue.getHours();\r\n        return this._use12Hours && isNotNil(hours) ? this.calculateViewHour(hours) : hours;\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Get defaultRealHours when defaultOpenValue is setted\r\n     * @see realHours\r\n     */\r\n    get defaultRealHours(): number {\r\n        return this.defaultOpenValue.getHours();\r\n    }\r\n\r\n    /**\r\n     * @description\r\n     * Same as defaultRealHours\r\n     */\r\n    get defaultHours(): number {\r\n        return this.defaultOpenValue.getHours();\r\n    }\r\n\r\n    get defaultMinutes(): number {\r\n        return this.defaultOpenValue.getMinutes();\r\n    }\r\n\r\n    get defaultSeconds(): number {\r\n        return this.defaultOpenValue.getSeconds();\r\n    }\r\n\r\n    get default12Hours(): string {\r\n        return this.defaultOpenValue.getHours() >= 12 ? 'PM' : 'AM';\r\n    }\r\n\r\n    constructor() {}\r\n\r\n    private calculateViewHour(value: number): number {\r\n        const selected12Hours = this._selected12Hours || this.default12Hours;\r\n        if (selected12Hours === 'PM' && value > 12) {\r\n            return value - 12;\r\n        }\r\n        if (selected12Hours === 'AM' && value === 0) {\r\n            return 12;\r\n        }\r\n        return value;\r\n    }\r\n}\r\n","import {\r\n    ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input,OnChanges,OnDestroy,OnInit,\r\n    SimpleChanges, TemplateRef,ViewChild,ViewEncapsulation,Output,EventEmitter,\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { UpdateHostClassService as UpdateCls } from './services/update-host-class.service';\r\nimport { isNotNil } from './utils/check';\r\nimport { reqAnimFrame } from '@farris/ui-common';\r\n\r\nimport { TimeValueAccessorDirective } from './time-value-accessor.directive';\r\nimport { TimeHolder } from './time-holder';\r\nimport { convertToDate, convertToStr } from './utils/convert';\r\n\r\nfunction makeRange(\r\n    length: number,\r\n    step: number = 1,\r\n    start: number = 0\r\n): number[] {\r\n    step = Math.ceil(step);\r\n    return new Array(Math.ceil(length / step))\r\n        .fill(0)\r\n        .map((_, i) => (i + start) * step);\r\n}\r\n\r\nexport type TimePickerUnit = 'hour' | 'minute' | 'second' | '12-hour';\r\n\r\n@Component({\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    selector: 'time-picker-panel',\r\n    exportAs: 'timePickerPanel',\r\n    templateUrl: './time-picker-panel.component.html',\r\n    // styleUrls: ['./style/index.scss'],\r\n    providers: [\r\n        UpdateCls,\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimePickerPanelComponent,\r\n            multi: true\r\n        }\r\n    ],\r\n    styles: [\r\n        `\r\n        .calendar-time-picker-select,\r\n        .time-picker-panel-select {\r\n            overflow: overlay!important;\r\n            overflow-x: hidden!important;\r\n        }\r\n\r\n        .calendar-time-picker-select::-webkit-scrollbar,\r\n        .time-picker-panel-select::-webkit-scrollbar {\r\n            background-color: transparent!important;\r\n        }\r\n        .calendar-time-picker-select::-webkit-scrollbar-track,\r\n        .time-picker-panel-select::-webkit-scrollbar-track {\r\n            background: none;\r\n            background-color: transparent!important;\r\n        }\r\n\r\n        .calendar-time-picker-select::-webkit-scrollbar-thumb,\r\n        .time-picker-panel-select::-webkit-scrollbar-thumb {\r\n            display: none;\r\n        }\r\n        .calendar-time-picker-select:hover::-webkit-scrollbar-thumb,\r\n        .time-picker-panel-select:hover::-webkit-scrollbar-thumb {\r\n            display: block;\r\n        }\r\n      \r\n        .time-picker-panel-select::-webkit-scrollbar-corner {\r\n            background: rgba(0, 0, 0, 0);\r\n        }\r\n\r\n        .time-header-split:after {\r\n            content: ':';\r\n            position: absolute;\r\n            right: 0;\r\n        }\r\n\r\n        .time-picker-panel-header .calendar-time-picker-select,\r\n        .time-picker-panel-header .time-picker-panel-select{\r\n            border-left: 0!important;\r\n            background: white;\r\n            border-bottom: 1px solid #e3e3e3;\r\n            overflow:hidden!important\r\n        }\r\n        `\r\n    ]\r\n})\r\nexport class TimePickerPanelComponent implements ControlValueAccessor, OnInit, OnDestroy, OnChanges {\r\n    private _hourStep = 1;\r\n    private _minuteStep = 1;\r\n    private _secondStep = 1;\r\n    private unsubscribe$ = new Subject<void>();\r\n    private onChange: (value: string) => void;\r\n    private onTouch: () => void;\r\n    private _format = 'HH:mm:ss';\r\n    private _disabledHours: () => number[];\r\n    private _disabledMinutes: (hour: number) => number[];\r\n    private _disabledSeconds: (hour: number, minute: number) => number[];\r\n    private _defaultOpenValue = new Date();\r\n    private _opened = false;\r\n    private _allowEmpty = true;\r\n    private _value = '';\r\n\r\n    prefixCls = 'time-picker-panel';\r\n    time = new TimeHolder();\r\n    hourEnabled = true;\r\n    minuteEnabled = true;\r\n    secondEnabled = true;\r\n    enabledColumns = 3;\r\n    hourRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    minuteRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    secondRange: ReadonlyArray<{ index: number; disabled: boolean }>;\r\n    use12HoursRange: ReadonlyArray<{ index: number; value: string }>;\r\n    @ViewChild(TimeValueAccessorDirective)\r\n    timeValueAccessorDirective: TimeValueAccessorDirective;\r\n\r\n    @ViewChild('hourListElement') hourListElement: ElementRef;\r\n    @ViewChild('minuteListElement') minuteListElement: ElementRef;\r\n    @ViewChild('secondListElement') secondListElement: ElementRef;\r\n    @ViewChild('use12HoursListElement') use12HoursListElement: ElementRef;\r\n\r\n    @Input() inDatePicker = false; // If inside a date-picker, more diff works need to be done\r\n    @Input() addOn: TemplateRef<void>;\r\n    @Input() hideDisabledOptions = false;\r\n    @Input() clearText: string;\r\n    @Input() placeholder: string;\r\n    /** value  true */\r\n    @Input() selectCurrentTimeWhenNull = true;\r\n\r\n    @Input() showHeader = false;\r\n\r\n    @Input()\r\n    set use12Hours(value: boolean) {\r\n        this._use12Hours = !!value;\r\n        if (!this._use12Hours) {\r\n            this.format = this.format ? (this.format + '').replace(/h/g, 'H') : '';\r\n        } else {\r\n            this.format = this.format ? (this.format + '').replace(/H/g, 'h') : '';\r\n        }\r\n    }\r\n    get use12Hours(): boolean {\r\n        return this._use12Hours;\r\n    }\r\n    @Input()\r\n    set allowEmpty(value: boolean) {\r\n        if (isNotNil(value)) {\r\n            this._allowEmpty = value;\r\n        }\r\n    }\r\n\r\n    get allowEmpty(): boolean {\r\n        return this._allowEmpty;\r\n    }\r\n\r\n    @Input()\r\n    set opened(value: boolean) {\r\n        this._opened = value;\r\n        if (this.opened) {\r\n            this.initPosition();\r\n            this.selectInputRange();\r\n        }\r\n    }\r\n\r\n    get opened(): boolean {\r\n        return this._opened;\r\n    }\r\n\r\n    @Input()\r\n    set defaultOpenValue(value: Date) {\r\n        if (isNotNil(value)) {\r\n            this._defaultOpenValue = value;\r\n            this.time.setDefaultOpenValue(this.defaultOpenValue);\r\n        }\r\n    }\r\n\r\n    get defaultOpenValue(): Date {\r\n        return this._defaultOpenValue;\r\n    }\r\n\r\n    @Input()\r\n    set disabledHours(value: () => number[]) {\r\n        this._disabledHours = value;\r\n        if (this._disabledHours) {\r\n            this.buildHours();\r\n        }\r\n    }\r\n\r\n    get disabledHours(): () => number[] {\r\n        return this._disabledHours;\r\n    }\r\n\r\n    @Input()\r\n    set disabledMinutes(value: (hour: number) => number[]) {\r\n        if (isNotNil(value)) {\r\n            this._disabledMinutes = value;\r\n            this.buildMinutes();\r\n        }\r\n    }\r\n\r\n    get disabledMinutes(): (hour: number) => number[] {\r\n        return this._disabledMinutes;\r\n    }\r\n\r\n    @Input()\r\n    set disabledSeconds(value: (hour: number, minute: number) => number[]) {\r\n        if (isNotNil(value)) {\r\n            this._disabledSeconds = value;\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    get disabledSeconds(): (hour: number, minute: number) => number[] {\r\n        return this._disabledSeconds;\r\n    }\r\n\r\n    panelWidth = 0;\r\n\r\n    @Input()\r\n    set format(value: string) {\r\n        if (isNotNil(value)) {\r\n            this._format = value;\r\n            this.enabledColumns = 0;\r\n            const charSet = new Set(value);\r\n            this.hourEnabled = charSet.has('H') || charSet.has('h');\r\n            this.minuteEnabled = charSet.has('m');\r\n            this.secondEnabled = charSet.has('s');\r\n            if (this.hourEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.minuteEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.secondEnabled) {\r\n                this.enabledColumns++;\r\n            }\r\n            if (this.use12Hours) {\r\n                this.enabledColumns++;\r\n                this.build12Hours();\r\n            }\r\n\r\n            this.panelWidth = this.enabledColumns * 66;\r\n            this.cdr.markForCheck();\r\n        }\r\n    }\r\n\r\n    get format(): string {\r\n        return this._format;\r\n    }\r\n\r\n    @Input()\r\n    set hourStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._hourStep = value;\r\n            this.time.hourStep = value;\r\n            this.buildHours();\r\n        }\r\n    }\r\n\r\n    get hourStep(): number {\r\n        return this._hourStep;\r\n    }\r\n\r\n    @Input()\r\n    set minuteStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._minuteStep = value;\r\n            this.time.minuteStep = value;\r\n            this.buildMinutes();\r\n        }\r\n    }\r\n\r\n    get minuteStep(): number {\r\n        return this._minuteStep;\r\n    }\r\n\r\n    @Input()\r\n    set secondStep(value: number) {\r\n        if (isNotNil(value)) {\r\n            this._secondStep = value;\r\n            this.time.secondStep = value;\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    get secondStep(): number {\r\n        return this._secondStep;\r\n    }\r\n\r\n    @Input()\r\n    set value(value: string) {\r\n        if (isNotNil(value)) {\r\n            this.time.text = value;\r\n            const _value = convertToDate(this.time.text, this.format);\r\n            this.time.setValue(_value, this.use12Hours);\r\n            this.buildTimes();\r\n            this.cdr.markForCheck();\r\n        } else {\r\n            this.time.setUse12Hours(this.use12Hours);\r\n        }\r\n    }\r\n\r\n    get value(): string {\r\n        this._value = this.time.text;\r\n        return this._value;\r\n    }\r\n    @Output() valueChange = new EventEmitter<string>();\r\n\r\n    private _use12Hours = false;\r\n\r\n    @Input() timePanelTitle = null;\r\n\r\n    constructor(\r\n        public element: ElementRef,\r\n        private updateCls: UpdateCls,\r\n        public cdr: ChangeDetectorRef\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        if (this.inDatePicker) {\r\n            this.prefixCls = 'calendar-time-picker';\r\n        }\r\n\r\n        this.time.changes.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {\r\n            const dateObj = {\r\n                hours: this.time.hours,\r\n                minutes: this.time.minutes,\r\n                seconds: this.time.seconds\r\n            };\r\n            this.time.text = convertToStr(\r\n                this.time.value,\r\n                this.format,\r\n                this.time.selected12Hours\r\n            );\r\n            this.changed();\r\n            this.touched();\r\n            this.valueChange.emit(this.time.text);\r\n        });\r\n        this.buildTimes();\r\n        this.setClassMap();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        if (this.opened) {\r\n            this.initPosition();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.unsubscribe$.next();\r\n        this.unsubscribe$.complete();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const { use12Hours } = changes;\r\n        if (\r\n            use12Hours &&\r\n            !use12Hours.previousValue &&\r\n            use12Hours.currentValue\r\n        ) {\r\n            this.build12Hours();\r\n            this.enabledColumns++;\r\n        }\r\n    }\r\n\r\n    selectInputRange(): void {\r\n        if (this.timeValueAccessorDirective) {\r\n            this.timeValueAccessorDirective.setRange();\r\n        }\r\n    }\r\n\r\n    buildHours(): void {\r\n        let hourRanges = 24;\r\n        let disabledHours = this.disabledHours && this.disabledHours();\r\n        let startIndex = 0;\r\n        if (this.use12Hours) {\r\n            hourRanges = 12;\r\n            if (disabledHours) {\r\n                if (this.time.selected12Hours === 'PM') {\r\n                    /**\r\n                     * Filter and transform hours which greater or equal to 12\r\n                     * [0, 1, 2, ..., 12, 13, 14, 15, ..., 23] => [12, 1, 2, 3, ..., 11]\r\n                     */\r\n                    disabledHours = disabledHours\r\n                        .filter(i => i >= 12)\r\n                        .map(i => (i > 12 ? i - 12 : i));\r\n                } else {\r\n                    /**\r\n                     * Filter and transform hours which less than 12\r\n                     * [0, 1, 2,..., 12, 13, 14, 15, ...23] => [12, 1, 2, 3, ..., 11]\r\n                     */\r\n                    disabledHours = disabledHours\r\n                        .filter(i => i < 12 || i === 24)\r\n                        .map(i => (i === 24 || i === 0 ? 12 : i));\r\n                }\r\n            }\r\n            startIndex = 1;\r\n        }\r\n        this.hourRange = makeRange(hourRanges, this.hourStep, startIndex).map(\r\n            r => {\r\n                return {\r\n                    index: r,\r\n                    disabled:\r\n                        this.disabledHours && disabledHours.indexOf(r) !== -1\r\n                };\r\n            }\r\n        );\r\n        if (\r\n            this.use12Hours &&\r\n            this.hourRange[this.hourRange.length - 1].index === 12\r\n        ) {\r\n            const temp = [...this.hourRange];\r\n            temp.unshift(temp[temp.length - 1]);\r\n            temp.splice(temp.length - 1, 1);\r\n            this.hourRange = temp;\r\n        }\r\n\r\n\r\n        // \r\n        this.hourRange = this.hourRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    buildMinutes(): void {\r\n        this.minuteRange = makeRange(60, this.minuteStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledMinutes &&\r\n                    this.disabledMinutes(this.time.hours!).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        this.minuteRange = this.minuteRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    buildSeconds(): void {\r\n        this.secondRange = makeRange(60, this.secondStep).map(r => {\r\n            return {\r\n                index: r,\r\n                disabled:\r\n                    this.disabledSeconds &&\r\n                    this.disabledSeconds(\r\n                        this.time.hours!,\r\n                        this.time.minutes!\r\n                    ).indexOf(r) !== -1\r\n            };\r\n        });\r\n\r\n        // \r\n        this.secondRange = this.secondRange.filter( n => {\r\n            return !(this.hideDisabledOptions && n.disabled);\r\n        });\r\n    }\r\n\r\n    build12Hours(): void {\r\n        const isUpperForamt = this._format.includes('A');\r\n        this.use12HoursRange = [\r\n            {\r\n                index: 0,\r\n                value: isUpperForamt ? 'AM' : 'am'\r\n            },\r\n            {\r\n                index: 1,\r\n                value: isUpperForamt ? 'PM' : 'pm'\r\n            }\r\n        ];\r\n\r\n        // \r\n        this.use12HoursRange = this.use12HoursRange.filter( n => {\r\n            return !this.hideDisabledOptions;\r\n        });\r\n    }\r\n\r\n    buildTimes(): void {\r\n        this.buildHours();\r\n        this.buildMinutes();\r\n        this.buildSeconds();\r\n        this.build12Hours();\r\n    }\r\n\r\n    selectHour(\r\n        event: MouseEvent,\r\n        hour: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setHours(hour.index, hour.disabled);\r\n\r\n        if (hour.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.scrollToSelected(\r\n            this.hourListElement.nativeElement,\r\n            hour.index,\r\n            120,\r\n            'hour'\r\n        );\r\n\r\n        if (this._disabledMinutes) {\r\n            this.buildMinutes();\r\n\r\n            const minutes = this.minuteRange.filter(n => !n.disabled);\r\n            if (!minutes.find(n => n.index === this.time.minutes)) {\r\n                const {index, disabled} = minutes[0];\r\n                this.time.setMinutes(index, disabled);\r\n            }\r\n\r\n        }\r\n        if (this._disabledSeconds || this._disabledMinutes) {\r\n            this.buildSeconds();\r\n        }\r\n    }\r\n\r\n    selectMinute(\r\n        event: MouseEvent,\r\n        minute: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setMinutes(minute.index, minute.disabled);\r\n\r\n        if (minute.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.scrollToSelected(\r\n            this.minuteListElement.nativeElement,\r\n            minute.index,\r\n            120,\r\n            'minute'\r\n        );\r\n        if (this._disabledSeconds) {\r\n            this.buildSeconds();\r\n            const seconds = this.secondRange.filter(n => !n.disabled);\r\n            if (!seconds.find(n => n.index === this.time.seconds)) {\r\n                const {index, disabled} = seconds[0];\r\n                this.time.setSeconds(index, disabled);\r\n            }\r\n        }\r\n    }\r\n\r\n    selectSecond(\r\n        event: MouseEvent,\r\n        second: { index: number; disabled: boolean }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.setSeconds(second.index, second.disabled);\r\n\r\n        if (second.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.scrollToSelected(\r\n            this.secondListElement.nativeElement,\r\n            second.index,\r\n            120,\r\n            'second'\r\n        );\r\n    }\r\n\r\n    select12Hours(\r\n        event: MouseEvent,\r\n        value: { index: number; value: string }\r\n    ): void {\r\n        event.stopPropagation();\r\n        this.time.selected12Hours = value.value;\r\n        if (this._disabledHours) {\r\n            this.buildHours();\r\n        }\r\n        if (this._disabledMinutes) {\r\n            this.buildMinutes();\r\n        }\r\n        if (this._disabledSeconds) {\r\n            this.buildSeconds();\r\n        }\r\n        this.scrollToSelected(\r\n            this.use12HoursListElement.nativeElement,\r\n            value.index,\r\n            120,\r\n            '12-hour'\r\n        );\r\n    }\r\n\r\n    scrollToSelected(\r\n        instance: HTMLElement,\r\n        index: number,\r\n        duration: number = 0,\r\n        unit: TimePickerUnit\r\n    ): void {\r\n        const transIndex = this.translateIndex(index, unit);\r\n        const currentOption = (instance.children[0].children[transIndex] ||\r\n            instance.children[0].children[0]) as HTMLElement;\r\n        this.scrollTo(instance, currentOption.offsetTop, duration);\r\n    }\r\n\r\n    translateIndex(index: number, unit: TimePickerUnit): number {\r\n        if (unit === 'hour') {\r\n            const disabledHours = this.disabledHours && this.disabledHours();\r\n            return this.calcIndex(\r\n                disabledHours,\r\n                this.hourRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else if (unit === 'minute') {\r\n            const disabledMinutes =\r\n                this.disabledMinutes && this.disabledMinutes(this.time.hours!);\r\n            return this.calcIndex(\r\n                disabledMinutes,\r\n                this.minuteRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else if (unit === 'second') {\r\n            // second\r\n            const disabledSeconds =\r\n                this.disabledSeconds &&\r\n                this.disabledSeconds(this.time.hours!, this.time.minutes!);\r\n            return this.calcIndex(\r\n                disabledSeconds,\r\n                this.secondRange.map(item => item.index).indexOf(index)\r\n            );\r\n        } else {\r\n            // 12-hour\r\n            return this.calcIndex(\r\n                [],\r\n                this.use12HoursRange.map(item => item.index).indexOf(index)\r\n            );\r\n        }\r\n    }\r\n\r\n    scrollTo(element: HTMLElement, to: number, duration: number): void {\r\n        if (duration <= 0) {\r\n            element.scrollTop = to;\r\n            return;\r\n        }\r\n        const difference = to - element.scrollTop;\r\n        const perTick = (difference / duration) * 10;\r\n\r\n        reqAnimFrame(() => {\r\n            element.scrollTop = element.scrollTop + perTick;\r\n            if (element.scrollTop === to) {\r\n                return;\r\n            }\r\n            this.scrollTo(element, to, duration - 10);\r\n        });\r\n    }\r\n\r\n    calcIndex(array: number[], index: number): number {\r\n        if (array && array.length && this.hideDisabledOptions) {\r\n            return (\r\n                index -\r\n                array.reduce((pre, value) => {\r\n                    return pre + (value < index ? 1 : 0);\r\n                }, 0)\r\n            );\r\n        } else {\r\n            return index;\r\n        }\r\n    }\r\n\r\n    protected changed(): void {\r\n        if (this.onChange) {\r\n            this.onChange(this.time.text);\r\n        }\r\n    }\r\n\r\n    protected touched(): void {\r\n        if (this.onTouch) {\r\n            this.onTouch();\r\n        }\r\n    }\r\n\r\n    private setClassMap(): void {\r\n        this.updateCls.updateHostClass(this.element.nativeElement, {\r\n            [`${this.prefixCls}`]: true,\r\n            [`${this.prefixCls}-column-${this.enabledColumns}`]: this\r\n                .inDatePicker\r\n                ? false\r\n                : true,\r\n            [`${this.prefixCls}-narrow`]: this.enabledColumns < 3,\r\n            [`${this.prefixCls}-placement-bottomLeft`]: this.inDatePicker\r\n                ? false\r\n                : true\r\n        });\r\n    }\r\n\r\n    isSelectedHour(hour: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            hour.index === this.time.viewHours ||\r\n            (!isNotNil(this.time.viewHours) &&\r\n                hour.index === this.time.defaultViewHours && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelectedMinute(minute: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            minute.index === this.time.minutes ||\r\n            (!isNotNil(this.time.minutes) &&\r\n                minute.index === this.time.defaultMinutes && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelectedSecond(second: { index: number; disabled: boolean }): boolean {\r\n        return (\r\n            second.index === this.time.seconds ||\r\n            (!isNotNil(this.time.seconds) &&\r\n                second.index === this.time.defaultSeconds && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    isSelected12Hours(value: { index: number; value: string }): boolean {\r\n        return (\r\n            value.value.toUpperCase() === this.time.selected12Hours ||\r\n            (!isNotNil(this.time.selected12Hours) &&\r\n                value.value.toUpperCase() === this.time.default12Hours && this.selectCurrentTimeWhenNull)\r\n        );\r\n    }\r\n\r\n    initPosition(): void {\r\n        // setTimeout(() => {\r\n        if (this.hourEnabled && this.hourListElement) {\r\n            if (isNotNil(this.time.viewHours)) {\r\n                this.scrollToSelected(\r\n                    this.hourListElement.nativeElement,\r\n                    this.time.viewHours!,\r\n                    0,\r\n                    'hour'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.hourListElement.nativeElement,\r\n                    this.time.defaultViewHours,\r\n                    0,\r\n                    'hour'\r\n                );\r\n            }\r\n        }\r\n        if (this.minuteEnabled && this.minuteListElement) {\r\n            if (isNotNil(this.time.minutes)) {\r\n                this.scrollToSelected(\r\n                    this.minuteListElement.nativeElement,\r\n                    this.time.minutes!,\r\n                    0,\r\n                    'minute'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.minuteListElement.nativeElement,\r\n                    this.time.defaultMinutes,\r\n                    0,\r\n                    'minute'\r\n                );\r\n            }\r\n        }\r\n        if (this.secondEnabled && this.secondListElement) {\r\n            if (isNotNil(this.time.seconds)) {\r\n                this.scrollToSelected(\r\n                    this.secondListElement.nativeElement,\r\n                    this.time.seconds!,\r\n                    0,\r\n                    'second'\r\n                );\r\n            } else {\r\n                this.scrollToSelected(\r\n                    this.secondListElement.nativeElement,\r\n                    this.time.defaultSeconds,\r\n                    0,\r\n                    'second'\r\n                );\r\n            }\r\n        }\r\n        if (this.use12Hours && this.use12HoursListElement) {\r\n            const selectedHours = isNotNil(this.time.selected12Hours)\r\n                ? this.time.selected12Hours\r\n                : this.time.default12Hours;\r\n            const index = selectedHours === 'AM' ? 0 : 1;\r\n            this.scrollToSelected(\r\n                this.use12HoursListElement.nativeElement,\r\n                index,\r\n                0,\r\n                '12-hour'\r\n            );\r\n        }\r\n        // });\r\n    }\r\n\r\n\r\n\r\n    private checkMinutes(date) {\r\n        this.buildMinutes();\r\n        const _date = new Date(date)\r\n        const canuseMinute = this.minuteRange.filter(n => !n.disabled);\r\n        if (canuseMinute && canuseMinute.length) {\r\n            const minutes = canuseMinute.filter(n => !n.disabled)\r\n            if (minutes.length !== 60) {\r\n                const m = minutes.find(n => n.index === _date.getMinutes());\r\n                if (!m) {\r\n                    _date.setMinutes(minutes[0].index);\r\n                }\r\n                this.time.setValue(_date, this.use12Hours);\r\n            }\r\n        }\r\n\r\n        return _date;\r\n    }\r\n\r\n    private checkSeconds(date) {\r\n        this.buildSeconds();\r\n        const _sdate = new Date(date)\r\n        const canuseSecond = this.secondRange.filter(n => !n.disabled);\r\n        if (canuseSecond && canuseSecond.length && canuseSecond.length !== 60) {\r\n            const seconds = canuseSecond.filter(n => !n.disabled)\r\n            if (seconds.length !== 60) {\r\n                const s = seconds.find(n => n.index === _sdate.getSeconds());\r\n                if (!s) {\r\n                    _sdate.setMinutes(seconds[0].index);\r\n                }\r\n                this.time.setValue(_sdate, this.use12Hours);\r\n            }\r\n        }\r\n\r\n        return _sdate;\r\n    }\r\n\r\n    private checkDate(date: Date) {\r\n        const canuseHour =  this.hourRange.filter(n => !n.disabled);\r\n     \r\n        if (canuseHour && canuseHour.length) {\r\n            const hour = canuseHour.filter(n => !n.disabled);\r\n            if (hour.length !== 24) {\r\n                const _h = hour.find((n: any) => n.index === date.getHours());\r\n                if (!_h) {\r\n                    date.setHours(hour[0].index);\r\n                }\r\n                this.time.setValue(date, this.use12Hours);\r\n            }\r\n        }\r\n        \r\n        const mdate = this.checkMinutes(date);\r\n        return this.checkSeconds(mdate);\r\n    }\r\n\r\n\r\n    writeValue(value: string): void {\r\n        this.time.text = value;\r\n        let _value = convertToDate(this.time.text, this.format);\r\n        \r\n        if(_value) {\r\n            _value = this.checkDate(_value);\r\n            this.time.setValue(_value, this.use12Hours);\r\n        }\r\n        \r\n        if (value && this.opened) {\r\n            this.initPosition();\r\n        }\r\n        this.buildTimes();\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    registerOnChange(fn: (value: string) => void): void {\r\n        this.onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => void): void {\r\n        this.onTouch = fn;\r\n    }\r\n\r\n    hmsCls(v, type) {\r\n        let cls = '';\r\n        const selected = ` ${this.prefixCls}-select-option-selected `;\r\n        const disabledC = ` ${this.prefixCls}-select-option-disabled `;\r\n\r\n        let f = false;\r\n        if (type === 'h') {\r\n            f = this.isSelectedHour(v);\r\n        } else if (type === 'm') {\r\n            f = this.isSelectedMinute(v);\r\n        } else if (type === 'r') {\r\n            f = this.isSelected12Hours(v);\r\n        } else {\r\n            f = this.isSelectedSecond(v);\r\n        }\r\n\r\n        if (f) {\r\n            cls += selected;\r\n        }\r\n\r\n        if (type === 'r') {\r\n            return cls;\r\n        }\r\n\r\n        if (v.disabled) {\r\n            cls += disabledC;\r\n        }\r\n        return cls;\r\n    }\r\n\r\n    trackByItems = (index, item) => {\r\n        return index;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { LocaleService } from '@farris/ui-locale';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class TimePickerLocaleService {\r\n    private localeConfig = {\r\n        'zh-CHS' : {\r\n            placeholder: '',\r\n            time: {\r\n                hour: '', minute: '', seconds: '' \r\n            }\r\n        },\r\n        'en' : {\r\n            placeholder: 'Please select a time',\r\n            time: {\r\n                hour: 'h', minute: 'min', seconds: 's' \r\n            }\r\n        },\r\n        'zh-CHT': {\r\n            placeholder: '',\r\n            time: {\r\n                hour: '', minute: '', seconds: '' \r\n            }\r\n        }\r\n    };\r\n    constructor(private localeService: LocaleService) {}\r\n    public getLocaleConfig() {\r\n        const locale = this.localeService.localeId;\r\n        if (locale && this.localeConfig[locale]) {\r\n            return this.localeConfig[locale];\r\n        } else {\r\n            return this.localeConfig['zh-CHS'];\r\n        }\r\n    }\r\n}\r\n","import {\r\n    AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, OnChanges,\r\n    OnInit, Output, Renderer2, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation, HostBinding,\r\n    ComponentRef, ViewContainerRef, ComponentFactoryResolver, HostListener, Injector\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { UpdateHostClassService as UpdateCls } from './services/update-host-class.service';\r\nimport { slideMotion } from './animations/slide';\r\nimport { toBoolean, convertToDate, convertToStr } from './utils/convert';\r\nimport { TimePickerPanelComponent } from './time-picker-panel.component';\r\nimport { TimePickerLocaleService } from './services/time-picker.locale.service';\r\nimport { OverLayHiddenService } from '@farris/ui-common';\r\n\r\nlet num = 0;\r\n@Component({\r\n    encapsulation: ViewEncapsulation.None,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    // tslint:disable-next-line:component-selector\r\n    selector: 'farris-time-picker',\r\n    exportAs: 'timePicker',\r\n    // styleUrls: ['./style/index.scss'],\r\n    templateUrl: './time-picker.component.html',\r\n    animations: [slideMotion],\r\n    providers: [\r\n        UpdateCls,\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            useExisting: TimePickerComponent,\r\n            multi: true\r\n        }\r\n    ]\r\n})\r\nexport class TimePickerComponent implements ControlValueAccessor, OnInit, AfterViewInit, OnChanges {\r\n    @ViewChild('timeInput')\r\n    public timeInput: ElementRef;\r\n\r\n    @HostBinding('class.f-component-timepicker') hostCls = true;\r\n    private _disabled = false;\r\n    private _readonly = false;\r\n    private _editable = true;\r\n    private _value: string;\r\n    private _allowEmpty = true;\r\n    private _autoFocus = false;\r\n    private _onChange: (value: string) => void;\r\n    private _onTouched: (value: string) => void;\r\n    private _hideDisabledOptions = false;\r\n    private cRef: ComponentRef<TimePickerPanelComponent> = null;\r\n    isInit = false;\r\n    groupIcon = '<i class=\"f-icon f-icon-timepicker\"></i>';\r\n\r\n    @HostBinding('style.display') display = 'block';\r\n    @Input() hourStep = 1;\r\n    @Input() minuteStep = 1;\r\n    @Input() secondStep = 1;\r\n    @Input() clearText = 'clear';\r\n    @Input() popupClassName = '';\r\n    @Input() placeholder;\r\n    @Input() addOn: TemplateRef<void>;\r\n    @Input() defaultOpenValue = new Date();\r\n    @Input() disabledHours: () => number[];\r\n    @Input() disabledMinutes: (hour: number) => number[];\r\n    @Input() disabledSeconds: (hour: number, minute: number) => number[];\r\n    @Input() format = 'HH:mm:ss';\r\n    @Input() isOpen = false;\r\n    @Input() showHeader = false;\r\n    @Input()\r\n    set use12Hours(value: boolean) {\r\n        this._use12Hours = !!value;\r\n        if (value && this.format) {\r\n            this.format = this.format.replace(/H/g, 'h');\r\n        } else if (!value && this.format) {\r\n            this.format = this.format.replace(/h/g, 'H');\r\n        }\r\n\r\n        if (this._use12Hours) {\r\n            if (!this.format) {\r\n                this.format = 'hh:mm:ss a';\r\n            } else {\r\n                if (this.format.indexOf('a') === -1 ) {\r\n                    this.format = this.format + ' a';\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    get use12Hours(): boolean {\r\n        return this._use12Hours;\r\n    }\r\n    @Output() readonly openChange = new EventEmitter<boolean>();\r\n    @Output() valueChange = new EventEmitter<string>();\r\n    @Output() clear = new EventEmitter();\r\n\r\n    @Input()\r\n    set hideDisabledOptions(value: boolean) {\r\n        this._hideDisabledOptions = toBoolean(value);\r\n    }\r\n\r\n    get hideDisabledOptions(): boolean {\r\n        return this._hideDisabledOptions;\r\n    }\r\n\r\n    @Input()\r\n    set allowEmpty(value: boolean) {\r\n        this._allowEmpty = toBoolean(value);\r\n    }\r\n\r\n    get allowEmpty(): boolean {\r\n        return this._allowEmpty;\r\n    }\r\n\r\n    @Input()\r\n    set autoFocus(value: boolean) {\r\n        this._autoFocus = toBoolean(value);\r\n        this.updateAutoFocus();\r\n    }\r\n\r\n    get autoFocus(): boolean {\r\n        return this._autoFocus;\r\n    }\r\n\r\n    @Input()\r\n    set disabled(value: boolean | string) {\r\n        this._disabled = toBoolean(value);\r\n    }\r\n\r\n    get disabled(): boolean | string {\r\n        return this._disabled;\r\n    }\r\n    @Input()\r\n    set readonly(value: boolean | string) {\r\n        this._readonly = toBoolean(value);\r\n    }\r\n\r\n    get readonly(): boolean | string {\r\n        return this._readonly;\r\n    }\r\n    @Input()\r\n    set editable(value: boolean | string) {\r\n        this._editable = toBoolean(value);\r\n    }\r\n\r\n    get editable(): boolean | string {\r\n        return this._editable;\r\n    }\r\n\r\n    set value(value: string) {\r\n        this._value = value;\r\n        if (this._onChange) {\r\n            this._onChange(this.value);\r\n        }\r\n    }\r\n\r\n    get value(): string {\r\n        return this._value;\r\n    }\r\n\r\n    private _use12Hours = false;\r\n    private overlayRef: Element;\r\n    private overlayPanelRef: Element;\r\n    private documentClickEvent: any;\r\n    private changeFlag = false;\r\n    private overLayService: OverLayHiddenService;\r\n    localConfig = null;\r\n    constructor(\r\n        private element: ElementRef,\r\n        private renderer: Renderer2,\r\n        private vcRef: ViewContainerRef,\r\n        private cfr: ComponentFactoryResolver,\r\n        public cdr: ChangeDetectorRef,\r\n        private localeService: TimePickerLocaleService\r\n    ) {\r\n        this.overLayService = new OverLayHiddenService();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        if (this.localeService) {\r\n            this.localConfig = this.localeService.getLocaleConfig();\r\n            this.placeholder = this.placeholder?\r\n                this.placeholder :\r\n                this.localConfig.placeholder ? this.localConfig.placeholder : '';\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        const { use12Hours} = changes;\r\n        if (use12Hours && (!this.format || this.format.indexOf('a') === -1 )) {\r\n            if (this.use12Hours) {\r\n                this.format = this.format + ' a';\r\n            }\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.isInit = true;\r\n        this.updateAutoFocus();\r\n        if (!document.body.querySelector('.time-picker-overlay')) {\r\n            this.overlayRef = this.renderer.createElement('div');\r\n            this.overlayPanelRef = this.renderer.createElement('div');\r\n            this.renderer.addClass(this.overlayRef, 'time-picker-overlay');\r\n            this.renderer.addClass(\r\n                this.overlayPanelRef,\r\n                `overlay-panel-${num++}`\r\n            );\r\n            this.renderer.appendChild(this.overlayRef, this.overlayPanelRef);\r\n            document.body.appendChild(this.overlayRef);\r\n\r\n        } else {\r\n            this.overlayRef = document.body.querySelector(\r\n                '.time-picker-overlay'\r\n            );\r\n            this.overlayPanelRef = this.renderer.createElement('div');\r\n            this.renderer.addClass(\r\n                this.overlayPanelRef,\r\n                `overlay-panel-${num++}`\r\n            );\r\n            this.renderer.appendChild(this.overlayRef, this.overlayPanelRef);\r\n\r\n        }\r\n\r\n        this.overlayRef.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n        });\r\n\r\n        this.timeInput.nativeElement.addEventListener('blur', () => {\r\n            this.onBlur();\r\n        });\r\n    }\r\n    \r\n    ngOnDestroy(): void {\r\n        this.timeInput.nativeElement.removeEventListener('blur', this.onBlur);\r\n\r\n        this.overLayService.destory(this.element.nativeElement);\r\n        this.overLayService = null;\r\n    }\r\n\r\n    @HostListener('mouseenter', ['$event'])\r\n    onMouseEnter(event) {\r\n        if (\r\n            this.timeInput.nativeElement.value &&\r\n            !this.readonly &&\r\n            !this.disabled\r\n        ) {\r\n            event.target.querySelector('.input-group-clear').style.display = '';\r\n        }\r\n    }\r\n\r\n    @HostListener('mouseleave', ['$event'])\r\n    onMouseLeave(event) {\r\n        if (!this.readonly && !this.disabled) {\r\n            event.target.querySelector('.input-group-clear').style.display = 'none';\r\n        }\r\n    }\r\n\r\n\r\n    open(event: MouseEvent) {\r\n        event.stopPropagation();\r\n\r\n        if (this.disabled || this.readonly) {\r\n            return;\r\n        }\r\n\r\n        if (this.isOpen) {\r\n            this.close();\r\n            return;\r\n        }\r\n\r\n        this.creatPanel();\r\n        this.isOpen = true;\r\n        this.openChange.emit(this.isOpen);\r\n        this.renderer.appendChild(\r\n            this.overlayPanelRef,\r\n            this.cRef.location.nativeElement\r\n        );\r\n\r\n        this.renderer.setStyle(this.overlayRef, 'display', 'block');\r\n        this.renderer.setStyle(this.overlayRef, 'zIndex', '8888888888' );\r\n\r\n        this.overLayService.registerMouseEvent(this.element.nativeElement, (e: MouseEvent) => {\r\n            if (this.cRef && this.cRef.location.nativeElement.contains(e.target)) {\r\n                return;\r\n            }\r\n            this.renderer.setStyle(this.overlayRef, 'display', 'none');\r\n            this.close();\r\n        });\r\n\r\n\r\n        setTimeout(() => {\r\n            this.setPosition();\r\n            this.renderer.addClass(this.cRef.location.nativeElement, 'f-area-show');\r\n        }, 10);\r\n    }\r\n\r\n    close(): void {\r\n        this.isOpen = false;\r\n        this.cRef.instance.opened = false;\r\n        this.renderer.removeClass(this.cRef.location.nativeElement, 'f-area-show');\r\n        while (this.overlayPanelRef.lastChild) {\r\n            this.overlayPanelRef.removeChild(this.overlayPanelRef.lastChild);\r\n        }\r\n        this.openChange.emit(this.isOpen);\r\n        this.focus();\r\n\r\n        if (this.cRef) {\r\n            this.cRef.destroy();\r\n            this.cRef = null;\r\n        }\r\n\r\n        this.overLayService.destory(this.element.nativeElement);\r\n        this.renderer.removeStyle(this.overlayRef, 'zIndex');\r\n    }\r\n\r\n\r\n    creatPanel() {\r\n        if (this.cRef === null) {\r\n            this.vcRef.clear();\r\n            this.cRef = this.vcRef.createComponent(\r\n                this.cfr.resolveComponentFactory(TimePickerPanelComponent)\r\n            );\r\n\r\n            this.cRef.location.nativeElement.classList.add('f-area-hide');\r\n\r\n            // grid\r\n            this.cRef.changeDetectorRef.detectChanges();\r\n\r\n            this.cRef.instance.format = this.format;\r\n            this.cRef.instance.hourStep = this.hourStep;\r\n            this.cRef.instance.minuteStep = this.minuteStep;\r\n            this.cRef.instance.secondStep = this.secondStep;\r\n            this.cRef.instance.disabledHours = this.disabledHours;\r\n            this.cRef.instance.disabledMinutes = this.disabledMinutes;\r\n            this.cRef.instance.disabledSeconds = this.disabledSeconds;\r\n            this.cRef.instance.hideDisabledOptions = this.hideDisabledOptions;\r\n            this.cRef.instance.use12Hours = this.use12Hours;\r\n            this.cRef.instance.opened = this.isOpen;\r\n            this.cRef.instance.defaultOpenValue = this.defaultOpenValue;\r\n            this.cRef.instance.value = this.value;\r\n            this.cRef.instance.showHeader = this.showHeader;\r\n            this.cRef.instance.timePanelTitle = this.localConfig.time;\r\n\r\n            this.cRef.instance.valueChange.subscribe((val: string) => {\r\n                this.value = val;\r\n                this.cdr.detectChanges();\r\n                this.valueChange.emit(val);\r\n            });\r\n        } else {\r\n            this.cRef.instance.value = this.value;\r\n        }\r\n    }\r\n\r\n    setPosition() {\r\n        const {\r\n            top: elTop,\r\n            left: elLeft,\r\n            height: elHeight,\r\n            width: elWidth\r\n        } = this.element.nativeElement.getBoundingClientRect();\r\n\r\n        const panelHeight = 194;\r\n        if (elTop + panelHeight + 30 > window.innerHeight) {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'top', `${elTop - panelHeight}px`);\r\n        } else {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'top', `${elTop + elHeight}px`);\r\n        }\r\n\r\n        const panelWidth = this.cRef.instance.panelWidth;\r\n\r\n        if (window.innerWidth - elLeft < panelWidth) {\r\n            const r = window.innerWidth - elLeft - elWidth;\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'right', `${r}px`);\r\n        } else {\r\n            this.renderer.setStyle(this.cRef.location.nativeElement, 'left', `${elLeft}px`);\r\n        }\r\n\r\n        this.cRef.instance.opened = true;\r\n    }\r\n\r\n    updateAutoFocus(): void {\r\n    }\r\n\r\n    onClickClearBtn(): void {\r\n        this.value = null;\r\n        this.cRef.instance.time.clear();\r\n    }\r\n\r\n    focus(): void {\r\n        if (this.timeInput.nativeElement) {\r\n            this.timeInput.nativeElement.focus();\r\n        }\r\n    }\r\n\r\n    blur(): void {\r\n        if (this.timeInput.nativeElement) {\r\n            this.timeInput.nativeElement.blur();\r\n        }\r\n    }\r\n    onBlur(): void {\r\n        if (this.value) {\r\n            const date = convertToDate(this.value, this.format);\r\n            if (this.cRef) {\r\n                this.cRef.instance.value = this.value;\r\n            }\r\n            this.value = convertToStr(date, this.format);\r\n            if (this.changeFlag) {\r\n                this.valueChange.emit(this.value);\r\n                this.changeFlag = false;\r\n            }\r\n            if (this._onTouched) {\r\n                this._onTouched(this.value);\r\n            }\r\n        }\r\n    }\r\n    onValueChange(val: string) {\r\n        this.changeFlag = true;\r\n    }\r\n    onClear() {\r\n        this.clear.emit();\r\n        this.value = '';\r\n        if (this.cRef && this.cRef.instance) {\r\n            this.cRef.instance.time.clear();\r\n        }\r\n        if (this._onTouched) {\r\n            this._onTouched(this.value);\r\n        }\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n\r\n\r\n\r\n    writeValue(time: string): void {\r\n        this._value = time;\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    registerOnChange(fn: (time: string) => void): void {\r\n        this._onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: (time: string) => void): void {\r\n        this._onTouched = fn;\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean): void {\r\n        this.disabled = isDisabled;\r\n        this.cdr.markForCheck();\r\n    }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { TimePickerPanelComponent } from './time-picker-panel.component';\r\nimport { TimePickerComponent } from './time-picker.component';\r\nimport { TimeValueAccessorDirective } from './time-value-accessor.directive';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        TimePickerComponent,\r\n        TimePickerPanelComponent,\r\n        TimeValueAccessorDirective\r\n    ],\r\n    entryComponents: [TimePickerPanelComponent],\r\n    exports: [TimePickerPanelComponent, TimePickerComponent],\r\n    imports: [CommonModule, FormsModule]\r\n})\r\nexport class TimePickerModule {}\r\n"]}