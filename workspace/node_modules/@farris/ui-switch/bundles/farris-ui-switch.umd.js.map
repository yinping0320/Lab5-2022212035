{"version":3,"file":"farris-ui-switch.umd.js.map","sources":["ng://@farris/ui-switch/lib/switch.token.ts","ng://@farris/ui-switch/lib/switch.component.ts","ng://@farris/ui-switch/lib/switch.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\n\r\nexport const SWITCH_OPTIONS = new InjectionToken('UI_SWITCH_OPTIONS');\r\n","import {\r\n    ChangeDetectorRef,\r\n    Component,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    HostListener,\r\n    forwardRef,\r\n    Inject,\r\n    Optional,\r\n    ChangeDetectionStrategy,\r\n    Injector,\r\n    OnInit,\r\n    ElementRef,\r\n    ViewChild,\r\n    OnDestroy\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, NgControl } from '@angular/forms';\r\n\r\nimport { SWITCH_OPTIONS } from './switch.token';\r\nimport { SwitchModuleConfig } from './switch.config';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\nconst UI_SWITCH_CONTROL_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    /* tslint:disable-next-line: no-use-before-declare */\r\n    useExisting: forwardRef(() => SwitchComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    // tslint:disable-next-line: component-selector\r\n    // bugNum2:462134 && 506852\r\n    // style=\"display:flex;height:100%;align-items:center;\"\r\n    selector: 'farris-switch',\r\n    template: `\r\n    <div class=\"farris-switch-outlayer\">\r\n        <span #container tabindex=\"0\" role=\"button\" hidefocus=\"true\" class=\"switch f-cmp-switch\"\r\n            [ngClass]=\"{\r\n                checked: checked,\r\n                disabled: disabled || !editable,\r\n                square: square,\r\n                'switch-large': size === 'large',\r\n                'switch-medium': size === 'medium',\r\n                'switch-small': size === 'small'\r\n            }\"\r\n            [ngStyle]=\"{\r\n                'outline': 'none',\r\n                'background-color': getColor(),\r\n                'border-color': getColor('borderColor')\r\n            }\"\r\n        >\r\n            <span class=\"switch-pane\" *ngIf=\"checkedLabel || uncheckedLabel\">\r\n                <span class=\"switch-label-checked\">{{\r\n                    this.checkedLabel\r\n                }}</span>\r\n                <span class=\"switch-label-unchecked\">{{\r\n                    this.uncheckedLabel\r\n                }}</span>\r\n            </span>\r\n            <small [style.background]=\"getColor('switchColor')\">\r\n                <ng-content></ng-content>\r\n            </small>\r\n        </span>\r\n    <div>\r\n    `,\r\n    providers: [UI_SWITCH_CONTROL_VALUE_ACCESSOR]\r\n})\r\nexport class SwitchComponent implements ControlValueAccessor, OnDestroy {\r\n    private _beforeChange: Subscription;\r\n\r\n    @Input() square: boolean;\r\n    @Input() size: string | 'small' | 'medium' | 'large' = 'medium';\r\n    @Input() color: string;\r\n    @Input() switchOffColor: string;\r\n    @Input() switchColor: string;\r\n    @Input() defaultBgColor: string;\r\n    @Input() defaultBoColor: string;\r\n    @Input() checkedLabel: string;\r\n    @Input() uncheckedLabel: string;\r\n\r\n    @Input() checked: boolean;\r\n    @Input() readonly: boolean;\r\n    @Input() disabled: boolean;\r\n    @Input() editable = true;\r\n    @Input() reverse: boolean;\r\n\r\n    @Input() trueValue: any = true;\r\n    @Input() falseValue: any = false;\r\n\r\n    @Input() beforeChange: Observable<boolean>;\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    @Output() changeEvent = new EventEmitter<any>();\r\n    @Output() clickHandle = new EventEmitter<any>();\r\n\r\n    /**\r\n     * Emits changed value\r\n     */\r\n    @Output() valueChange = new EventEmitter<boolean>();\r\n\r\n    @ViewChild('container') switchElRef: ElementRef<any>;\r\n\r\n    constructor(\r\n        @Inject(SWITCH_OPTIONS) @Optional() public config: SwitchModuleConfig = {},\r\n        private cdr: ChangeDetectorRef,\r\n        public injector: Injector\r\n    ) {\r\n        this.square = (config && config.square) || false;\r\n        this.size = (config && config.size) || this.size;\r\n        this.color = config && config.color;\r\n        this.switchOffColor = config && config.switchOffColor;\r\n        this.switchColor = config && config.switchColor;\r\n        this.defaultBgColor = config && config.defaultBgColor;\r\n        this.defaultBoColor = config && config.defaultBoColor;\r\n        this.checkedLabel = config && config.checkedLabel;\r\n        this.uncheckedLabel = config && config.uncheckedLabel;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._beforeChange) {\r\n            this._beforeChange.unsubscribe();\r\n        }\r\n    }\r\n\r\n    getColor(flag = '') {\r\n        if (flag === 'borderColor') {\r\n            return this.defaultBoColor;\r\n        }\r\n        if (flag === 'switchColor') {\r\n            if (this.reverse) {\r\n                return !this.checked\r\n                    ? this.switchColor\r\n                    : this.switchOffColor || this.switchColor;\r\n            }\r\n            return this.checked\r\n                ? this.switchColor\r\n                : this.switchOffColor || this.switchColor;\r\n        }\r\n        if (this.reverse) {\r\n            return !this.checked ? this.color : this.defaultBgColor;\r\n        }\r\n        return this.checked ? this.color : this.defaultBgColor;\r\n    }\r\n\r\n    private updateChecked(event: any, isClick = true) {\r\n        if (this.disabled || !this.editable) {\r\n            return;\r\n        }\r\n\r\n\r\n        this.checked = !this.checked;\r\n        const val = this.getValue(this.checked);\r\n        // Component events\r\n        this.valueChange.emit(val);\r\n        this.changeEvent.emit(event);\r\n        if (isClick) {\r\n            this.clickHandle.emit({ event, checked: this.checked, value: val, instance: this });\r\n        }\r\n\r\n        this.onChangeCallback(val);\r\n        this.onTouchedCallback(val);\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onToggle(event: MouseEvent) {\r\n\r\n        const span = (<any>event.target).closest('.f-cmp-switch')\r\n\r\n        if (!span || span !== this.switchElRef.nativeElement) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.beforeChange) {\r\n            this._beforeChange = this.beforeChange.subscribe((confirm: boolean) => {\r\n                if (confirm) {\r\n                    this.updateChecked(event);\r\n                }\r\n            });\r\n        } else {\r\n            this.updateChecked(event);\r\n        }\r\n    }\r\n\r\n    @HostListener('keydown.Space', ['$event'])\r\n    onSpaceHandle($event: any) {\r\n        $event.preventDefault();\r\n        $event.stopPropagation();\r\n        this.updateChecked($event, false);\r\n    }\r\n\r\n    private getValue(checked: boolean) {\r\n        if (this.trueValue !== undefined && this.falseValue !== undefined) {\r\n            return checked ? this.trueValue : this.falseValue;\r\n        }\r\n        return checked;\r\n    }\r\n\r\n    writeValue(obj: any): void {\r\n        if (this.trueValue !== undefined && this.falseValue !== undefined) {\r\n            this.checked = obj == this.trueValue;\r\n        } else {\r\n            if (obj !== this.checked) {\r\n                this.checked = !!obj;\r\n            }\r\n        }\r\n\r\n        if (this.cdr && !this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    registerOnChange(fn: any) {\r\n        this.onChangeCallback = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any) {\r\n        this.onTouchedCallback = fn;\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean) {\r\n        this.disabled = isDisabled;\r\n    }\r\n\r\n    private onTouchedCallback = (v: any) => { };\r\n    private onChangeCallback = (v: any) => { };\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { SwitchComponent } from './switch.component';\r\nimport { SWITCH_OPTIONS } from './switch.token';\r\nimport { SwitchModuleConfig } from './switch.config';\r\n\r\n@NgModule({\r\n    declarations: [SwitchComponent],\r\n    imports: [CommonModule, FormsModule],\r\n    exports: [FormsModule, SwitchComponent]\r\n})\r\nexport class SwitchModule {\r\n    static forRoot(config?: SwitchModuleConfig | null | undefined): ModuleWithProviders {\r\n        return {\r\n            ngModule: SwitchModule,\r\n            providers: [{ provide: SWITCH_OPTIONS, useValue: config || {} }]\r\n        };\r\n    }\r\n}\r\n"],"names":["InjectionToken","NG_VALUE_ACCESSOR","forwardRef","EventEmitter","Component","Inject","Optional","ChangeDetectorRef","Injector","Input","Output","ViewChild","HostListener","NgModule","CommonModule","FormsModule"],"mappings":";;;;;;;;;;AAAA;AAEA,QAAa,cAAc,GAAG,IAAIA,mBAAc,CAAC,mBAAmB,CAAC;;;;;;ACFrE;QAuBM,gCAAgC,GAAQ;QAC1C,OAAO,EAAEC,uBAAiB;;QAE1B,WAAW,EAAEC,eAAU;;WAAC,cAAM,OAAA,eAAe,GAAA,EAAC;QAC9C,KAAK,EAAE,IAAI;KACd;AAED;QA2EI,yBAC+C,MAA+B,EAClE,GAAsB,EACvB,QAAkB;YAFkB,uBAAA;gBAAA,WAA+B;;YAA/B,WAAM,GAAN,MAAM,CAAyB;YAClE,QAAG,GAAH,GAAG,CAAmB;YACvB,aAAQ,GAAR,QAAQ,CAAU;YApCpB,SAAI,GAA0C,QAAQ,CAAC;YAYvD,aAAQ,GAAG,IAAI,CAAC;YAGhB,cAAS,GAAQ,IAAI,CAAC;YACtB,eAAU,GAAQ,KAAK,CAAC;;;;YAOvB,gBAAW,GAAG,IAAIC,iBAAY,EAAO,CAAC;YACtC,gBAAW,GAAG,IAAIA,iBAAY,EAAO,CAAC;;;;YAKtC,gBAAW,GAAG,IAAIA,iBAAY,EAAW,CAAC;YAiI5C,sBAAiB;;;eAAG,UAAC,CAAM,KAAQ,EAAC;YACpC,qBAAgB;;;eAAG,UAAC,CAAM,KAAQ,EAAC;YAzHvC,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,KAAK,CAAC;YACjD,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;YACjD,IAAI,CAAC,KAAK,GAAG,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC;YACpC,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,MAAM,CAAC,cAAc,CAAC;YACtD,IAAI,CAAC,WAAW,GAAG,MAAM,IAAI,MAAM,CAAC,WAAW,CAAC;YAChD,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,MAAM,CAAC,cAAc,CAAC;YACtD,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,MAAM,CAAC,cAAc,CAAC;YACtD,IAAI,CAAC,YAAY,GAAG,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC;YAClD,IAAI,CAAC,cAAc,GAAG,MAAM,IAAI,MAAM,CAAC,cAAc,CAAC;SACzD;;;;QAED,qCAAW;;;YAAX;gBACI,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;iBACpC;aACJ;;;;;QAED,kCAAQ;;;;YAAR,UAAS,IAAS;gBAAT,qBAAA;oBAAA,SAAS;;gBACd,IAAI,IAAI,KAAK,aAAa,EAAE;oBACxB,OAAO,IAAI,CAAC,cAAc,CAAC;iBAC9B;gBACD,IAAI,IAAI,KAAK,aAAa,EAAE;oBACxB,IAAI,IAAI,CAAC,OAAO,EAAE;wBACd,OAAO,CAAC,IAAI,CAAC,OAAO;8BACd,IAAI,CAAC,WAAW;8BAChB,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,CAAC;qBACjD;oBACD,OAAO,IAAI,CAAC,OAAO;0BACb,IAAI,CAAC,WAAW;0BAChB,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,WAAW,CAAC;iBACjD;gBACD,IAAI,IAAI,CAAC,OAAO,EAAE;oBACd,OAAO,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC;iBAC3D;gBACD,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC;aAC1D;;;;;;;QAEO,uCAAa;;;;;;YAArB,UAAsB,KAAU,EAAE,OAAc;gBAAd,wBAAA;oBAAA,cAAc;;gBAC5C,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACjC,OAAO;iBACV;gBAGD,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;;oBACvB,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC;;gBAEvC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC7B,IAAI,OAAO,EAAE;oBACT,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,OAAA,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;iBACvF;gBAED,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;gBAC3B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;gBAC5B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;oBACxB,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;iBAC5B;aACJ;;;;;QAGD,kCAAQ;;;;YADR,UACS,KAAiB;gBAD1B,iBAmBC;;oBAhBS,IAAI,GAAG,oBAAM,KAAK,CAAC,MAAM,IAAE,OAAO,CAAC,eAAe,CAAC;gBAEzD,IAAI,CAAC,IAAI,IAAI,IAAI,KAAK,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE;oBAClD,OAAO;iBACV;gBAGD,IAAI,IAAI,CAAC,YAAY,EAAE;oBACnB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS;;;uBAAC,UAAC,OAAgB;wBAC9D,IAAI,OAAO,EAAE;4BACT,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;yBAC7B;qBACJ,EAAC,CAAC;iBACN;qBAAM;oBACH,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBAC7B;aACJ;;;;;QAGD,uCAAa;;;;YADb,UACc,MAAW;gBACrB,MAAM,CAAC,cAAc,EAAE,CAAC;gBACxB,MAAM,CAAC,eAAe,EAAE,CAAC;gBACzB,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;aACrC;;;;;;QAEO,kCAAQ;;;;;YAAhB,UAAiB,OAAgB;gBAC7B,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;oBAC/D,OAAO,OAAO,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;iBACrD;gBACD,OAAO,OAAO,CAAC;aAClB;;;;;QAED,oCAAU;;;;YAAV,UAAW,GAAQ;gBACf,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;oBAC/D,IAAI,CAAC,OAAO,GAAG,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC;iBACxC;qBAAM;oBACH,IAAI,GAAG,KAAK,IAAI,CAAC,OAAO,EAAE;wBACtB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC;qBACxB;iBACJ;gBAED,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;oBACpC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;iBAC5B;aACJ;;;;;QAED,0CAAgB;;;;YAAhB,UAAiB,EAAO;gBACpB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;aAC9B;;;;;QAED,2CAAiB;;;;YAAjB,UAAkB,EAAO;gBACrB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;aAC/B;;;;;QAED,0CAAgB;;;;YAAhB,UAAiB,UAAmB;gBAChC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;aAC9B;;oBAtMJC,cAAS,SAAC;;;;wBAIP,QAAQ,EAAE,eAAe;wBACzB,QAAQ,EAAE,kqCA8BT;wBACD,SAAS,EAAE,CAAC,gCAAgC,CAAC;qBAChD;;;;;wDAuCQC,WAAM,SAAC,cAAc,cAAGC,aAAQ;wBAzGrCC,sBAAiB;wBAUjBC,aAAQ;;;;6BA4DPC,UAAK;2BACLA,UAAK;4BACLA,UAAK;qCACLA,UAAK;kCACLA,UAAK;qCACLA,UAAK;qCACLA,UAAK;mCACLA,UAAK;qCACLA,UAAK;8BAELA,UAAK;+BACLA,UAAK;+BACLA,UAAK;+BACLA,UAAK;8BACLA,UAAK;gCAELA,UAAK;iCACLA,UAAK;mCAELA,UAAK;kCAKLC,WAAM;kCACNA,WAAM;kCAKNA,WAAM;kCAENC,cAAS,SAAC,WAAW;+BAkErBC,iBAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;oCAqBhCA,iBAAY,SAAC,eAAe,EAAE,CAAC,QAAQ,CAAC;;QA0C7C,sBAAC;KA1MD;;;;;;AC9BA;QAQA;SAYC;;;;;QANU,oBAAO;;;;YAAd,UAAe,MAA8C;gBACzD,OAAO;oBACH,QAAQ,EAAE,YAAY;oBACtB,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,MAAM,IAAI,EAAE,EAAE,CAAC;iBACnE,CAAC;aACL;;oBAXJC,aAAQ,SAAC;wBACN,YAAY,EAAE,CAAC,eAAe,CAAC;wBAC/B,OAAO,EAAE,CAACC,mBAAY,EAAEC,iBAAW,CAAC;wBACpC,OAAO,EAAE,CAACA,iBAAW,EAAE,eAAe,CAAC;qBAC1C;;QAQD,mBAAC;KAZD;;;;;;;;;;;;;;;;;;;;;;;;"}
