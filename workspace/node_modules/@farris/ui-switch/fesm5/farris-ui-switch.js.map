{"version":3,"file":"farris-ui-switch.js.map","sources":["ng://@farris/ui-switch/lib/switch.token.ts","ng://@farris/ui-switch/lib/switch.component.ts","ng://@farris/ui-switch/lib/switch.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\n\r\nexport const SWITCH_OPTIONS = new InjectionToken('UI_SWITCH_OPTIONS');\r\n","import {\r\n    ChangeDetectorRef,\r\n    Component,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    HostListener,\r\n    forwardRef,\r\n    Inject,\r\n    Optional,\r\n    ChangeDetectionStrategy,\r\n    Injector,\r\n    OnInit,\r\n    ElementRef,\r\n    ViewChild,\r\n    OnDestroy\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, NgControl } from '@angular/forms';\r\n\r\nimport { SWITCH_OPTIONS } from './switch.token';\r\nimport { SwitchModuleConfig } from './switch.config';\r\nimport { Observable, Subscription } from 'rxjs';\r\n\r\nconst UI_SWITCH_CONTROL_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    /* tslint:disable-next-line: no-use-before-declare */\r\n    useExisting: forwardRef(() => SwitchComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    // tslint:disable-next-line: component-selector\r\n    // bugNum2:462134 && 506852\r\n    // style=\"display:flex;height:100%;align-items:center;\"\r\n    selector: 'farris-switch',\r\n    template: `\r\n    <div class=\"farris-switch-outlayer\">\r\n        <span #container tabindex=\"0\" role=\"button\" hidefocus=\"true\" class=\"switch f-cmp-switch\"\r\n            [ngClass]=\"{\r\n                checked: checked,\r\n                disabled: disabled || !editable,\r\n                square: square,\r\n                'switch-large': size === 'large',\r\n                'switch-medium': size === 'medium',\r\n                'switch-small': size === 'small'\r\n            }\"\r\n            [ngStyle]=\"{\r\n                'outline': 'none',\r\n                'background-color': getColor(),\r\n                'border-color': getColor('borderColor')\r\n            }\"\r\n        >\r\n            <span class=\"switch-pane\" *ngIf=\"checkedLabel || uncheckedLabel\">\r\n                <span class=\"switch-label-checked\">{{\r\n                    this.checkedLabel\r\n                }}</span>\r\n                <span class=\"switch-label-unchecked\">{{\r\n                    this.uncheckedLabel\r\n                }}</span>\r\n            </span>\r\n            <small [style.background]=\"getColor('switchColor')\">\r\n                <ng-content></ng-content>\r\n            </small>\r\n        </span>\r\n    <div>\r\n    `,\r\n    providers: [UI_SWITCH_CONTROL_VALUE_ACCESSOR]\r\n})\r\nexport class SwitchComponent implements ControlValueAccessor, OnDestroy {\r\n    private _beforeChange: Subscription;\r\n\r\n    @Input() square: boolean;\r\n    @Input() size: string | 'small' | 'medium' | 'large' = 'medium';\r\n    @Input() color: string;\r\n    @Input() switchOffColor: string;\r\n    @Input() switchColor: string;\r\n    @Input() defaultBgColor: string;\r\n    @Input() defaultBoColor: string;\r\n    @Input() checkedLabel: string;\r\n    @Input() uncheckedLabel: string;\r\n\r\n    @Input() checked: boolean;\r\n    @Input() readonly: boolean;\r\n    @Input() disabled: boolean;\r\n    @Input() editable = true;\r\n    @Input() reverse: boolean;\r\n\r\n    @Input() trueValue: any = true;\r\n    @Input() falseValue: any = false;\r\n\r\n    @Input() beforeChange: Observable<boolean>;\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    @Output() changeEvent = new EventEmitter<any>();\r\n    @Output() clickHandle = new EventEmitter<any>();\r\n\r\n    /**\r\n     * Emits changed value\r\n     */\r\n    @Output() valueChange = new EventEmitter<boolean>();\r\n\r\n    @ViewChild('container') switchElRef: ElementRef<any>;\r\n\r\n    constructor(\r\n        @Inject(SWITCH_OPTIONS) @Optional() public config: SwitchModuleConfig = {},\r\n        private cdr: ChangeDetectorRef,\r\n        public injector: Injector\r\n    ) {\r\n        this.square = (config && config.square) || false;\r\n        this.size = (config && config.size) || this.size;\r\n        this.color = config && config.color;\r\n        this.switchOffColor = config && config.switchOffColor;\r\n        this.switchColor = config && config.switchColor;\r\n        this.defaultBgColor = config && config.defaultBgColor;\r\n        this.defaultBoColor = config && config.defaultBoColor;\r\n        this.checkedLabel = config && config.checkedLabel;\r\n        this.uncheckedLabel = config && config.uncheckedLabel;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this._beforeChange) {\r\n            this._beforeChange.unsubscribe();\r\n        }\r\n    }\r\n\r\n    getColor(flag = '') {\r\n        if (flag === 'borderColor') {\r\n            return this.defaultBoColor;\r\n        }\r\n        if (flag === 'switchColor') {\r\n            if (this.reverse) {\r\n                return !this.checked\r\n                    ? this.switchColor\r\n                    : this.switchOffColor || this.switchColor;\r\n            }\r\n            return this.checked\r\n                ? this.switchColor\r\n                : this.switchOffColor || this.switchColor;\r\n        }\r\n        if (this.reverse) {\r\n            return !this.checked ? this.color : this.defaultBgColor;\r\n        }\r\n        return this.checked ? this.color : this.defaultBgColor;\r\n    }\r\n\r\n    private updateChecked(event: any, isClick = true) {\r\n        if (this.disabled || !this.editable) {\r\n            return;\r\n        }\r\n\r\n\r\n        this.checked = !this.checked;\r\n        const val = this.getValue(this.checked);\r\n        // Component events\r\n        this.valueChange.emit(val);\r\n        this.changeEvent.emit(event);\r\n        if (isClick) {\r\n            this.clickHandle.emit({ event, checked: this.checked, value: val, instance: this });\r\n        }\r\n\r\n        this.onChangeCallback(val);\r\n        this.onTouchedCallback(val);\r\n        if (!this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onToggle(event: MouseEvent) {\r\n\r\n        const span = (<any>event.target).closest('.f-cmp-switch')\r\n\r\n        if (!span || span !== this.switchElRef.nativeElement) {\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.beforeChange) {\r\n            this._beforeChange = this.beforeChange.subscribe((confirm: boolean) => {\r\n                if (confirm) {\r\n                    this.updateChecked(event);\r\n                }\r\n            });\r\n        } else {\r\n            this.updateChecked(event);\r\n        }\r\n    }\r\n\r\n    @HostListener('keydown.Space', ['$event'])\r\n    onSpaceHandle($event: any) {\r\n        $event.preventDefault();\r\n        $event.stopPropagation();\r\n        this.updateChecked($event, false);\r\n    }\r\n\r\n    private getValue(checked: boolean) {\r\n        if (this.trueValue !== undefined && this.falseValue !== undefined) {\r\n            return checked ? this.trueValue : this.falseValue;\r\n        }\r\n        return checked;\r\n    }\r\n\r\n    writeValue(obj: any): void {\r\n        if (this.trueValue !== undefined && this.falseValue !== undefined) {\r\n            this.checked = obj == this.trueValue;\r\n        } else {\r\n            if (obj !== this.checked) {\r\n                this.checked = !!obj;\r\n            }\r\n        }\r\n\r\n        if (this.cdr && !this.cdr['destroyed']) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    registerOnChange(fn: any) {\r\n        this.onChangeCallback = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any) {\r\n        this.onTouchedCallback = fn;\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean) {\r\n        this.disabled = isDisabled;\r\n    }\r\n\r\n    private onTouchedCallback = (v: any) => { };\r\n    private onChangeCallback = (v: any) => { };\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { SwitchComponent } from './switch.component';\r\nimport { SWITCH_OPTIONS } from './switch.token';\r\nimport { SwitchModuleConfig } from './switch.config';\r\n\r\n@NgModule({\r\n    declarations: [SwitchComponent],\r\n    imports: [CommonModule, FormsModule],\r\n    exports: [FormsModule, SwitchComponent]\r\n})\r\nexport class SwitchModule {\r\n    static forRoot(config?: SwitchModuleConfig | null | undefined): ModuleWithProviders {\r\n        return {\r\n            ngModule: SwitchModule,\r\n            providers: [{ provide: SWITCH_OPTIONS, useValue: config || {} }]\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}
