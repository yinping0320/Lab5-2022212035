/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 * @Author: 疯狂秀才(Lucas Huang)
 * @Date: 2019-08-05 10:26:50
 * @LastEditors: 疯狂秀才(Lucas Huang)
 * @LastEditTime: 2020-11-16 11:43:34
 * @QQ: 1055818239
 * @Version: v0.0.1
 */
import { Component, Input, Output, EventEmitter, forwardRef, ViewChild, ElementRef, Injector, Renderer2, HostBinding, ChangeDetectorRef } from '@angular/core';
import { NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { BigNumber } from 'bignumber.js';
import { LocaleService } from '@farris/ui-locale';
import { CommonUtils } from '@farris/ui-common';
/**
 * @record
 */
export function NumberFormatter() { }
if (false) {
    /**
     * 前置符号
     * @type {?|undefined}
     */
    NumberFormatter.prototype.prefix;
    /**
     * 后缀
     * @type {?|undefined}
     */
    NumberFormatter.prototype.suffix;
    /**
     * 小数点
     * @type {?|undefined}
     */
    NumberFormatter.prototype.decimalSeparator;
    /**
     * 千分位符号
     * @type {?|undefined}
     */
    NumberFormatter.prototype.groupSeparator;
    /**
     * 千分位分组
     * @type {?|undefined}
     */
    NumberFormatter.prototype.groupSize;
}
var NumberSpinnerComponent = /** @class */ (function () {
    function NumberSpinnerComponent(el, render, injector) {
        this.el = el;
        this.render = render;
        this.injector = injector;
        this.hostClass = true;
        this.disabled = false;
        this.readonly = false;
        this.editable = true;
        // 空白提示文本
        this.placeholder = '';
        // up or down 步长
        this.step = 1;
        /**
         * 启用大数支持
         */
        this.bigNumber = false;
        // 是否显示加减按钮
        this.showButton = true;
        // 是否使用千分值
        this.useThousands = true;
        // 文本方向
        this.textAlign = 'left';
        // 自动补全小数
        this.autoDecimal = true;
        // 允许为空
        this.canNull = false;
        // 精度
        this.precision = 0;
        // 前缀
        this.prefix = '';
        // 后缀
        this.suffix = '';
        /**
         * 小数点符号
         */
        this.decimalSeparator = '.';
        /**
         * 千分位符号
         */
        this.groupSeparator = ',';
        /**
         * 使用千分位时，每组显示的字符数
         */
        this.groupSize = 3;
        this._value = '';
        /**
         * 显示0值
         */
        this.showZero = true;
        this.valueChange = new EventEmitter();
        this.blur = new EventEmitter();
        this.focus = new EventEmitter();
        this.isFocus = false;
        this.popValue = '';
        this.isActiveTip = false;
        this.formatOptions = {};
        this._realValue = null;
        this.showtipTimer = null;
        this._updateOn = 'change';
        this.localeService = null;
        this.onTouchedCallback = (/**
         * @return {?}
         */
        function () { });
        this.onChangeCallback = (/**
         * @return {?}
         */
        function () { });
        this.cdRef = this.injector.get(ChangeDetectorRef, null);
        this.localeService = this.injector.get(LocaleService, null);
        this.commonUtils = this.injector.get(CommonUtils, new CommonUtils());
    }
    Object.defineProperty(NumberSpinnerComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} val
         * @return {?}
         */
        function (val) {
            this._value = val;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.formatOptions = this.buildFormatOptions();
        this._ngControl = this.injector.get(NgControl, null);
        if (this.localeService) {
            /** @type {?} */
            var defaultPlaceHolder = this.localeService.getValue('numberSpinner.placeholder') || '请输入数字';
            if (!this.placeholder) {
                this.placeholder = defaultPlaceHolder;
            }
        }
    };
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (this._ngControl && this._ngControl.control) {
            this._updateOn = this._ngControl.control.updateOn;
        }
        this.listenInputPasteEvent();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NumberSpinnerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.value && !changes.value.isFirstChange()) {
            this._realValue = this.getRealValue(changes.value.currentValue);
            this.value = this.format(this._realValue);
        }
        if (changes.showZero && !changes.showZero.isFirstChange()) {
            this.value = this.format(this._realValue);
        }
        if (changes.precision && !changes.precision.isFirstChange()) {
            this.onOptionsChanged();
        }
        if (changes.useThousands && !changes.useThousands.isFirstChange()) {
            this.onOptionsChanged();
        }
        if (changes.prefix && !changes.prefix.isFirstChange()) {
            this.onOptionsChanged();
        }
        if (changes.suffix && !changes.suffix.isFirstChange()) {
            this.onOptionsChanged();
        }
    };
    /**
     * @private
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onOptionsChanged = /**
     * @private
     * @return {?}
     */
    function () {
        this.formatOptions = this.buildFormatOptions();
        this.value = this.format(this._realValue);
    };
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () { };
    // 支持粘贴带格式的数据
    // 支持粘贴带格式的数据
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype.listenInputPasteEvent = 
    // 支持粘贴带格式的数据
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.input.nativeElement.addEventListener('paste', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            event.preventDefault();
            /** @type {?} */
            var clipboardData = event.clipboardData || window['clipboardData'];
            /** @type {?} */
            var pasteValue = clipboardData.getData('text');
            /** @type {?} */
            var val = _this.cleanNumString(pasteValue);
            if (_this.isEmpty(val)) {
                return;
            }
            /** @type {?} */
            var target = event.target;
            /** @type {?} */
            var start = ((/** @type {?} */ (target))).selectionStart;
            /** @type {?} */
            var end = ((/** @type {?} */ (target))).selectionEnd;
            if (_this.isEmpty(val)) {
                target.value = '';
            }
            else {
                target.value = target.value.slice(0, start) + val + target.value.slice(end);
            }
            if (_this._updateOn === 'change') {
                _this._realValue = _this.getRealValue(target.value);
                _this.value = _this._realValue;
                _this._modelChanged(_this._realValue);
            }
        }));
    };
    /**
     * @param {?} $event
     * @param {?=} type
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onBlur = /**
     * @param {?} $event
     * @param {?=} type
     * @return {?}
     */
    function ($event, type) {
        if (type === void 0) { type = ''; }
        if (this.readonly || this.disabled) {
            return;
        }
        if (this._updateOn === 'blur') {
            /** @type {?} */
            var val = this.cleanNumString($event.value);
            this._realValue = this.getRealValue(val);
        }
        this.value = this.format(this._realValue);
        this.input.nativeElement.value = this.value;
        this.isFocus = false;
        this.onModelChange(this._realValue, 'blur');
        this.blur.emit({ event: $event, formatted: this.value, value: this._realValue, instance: this });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        $event.stopPropagation();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onFocus = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.readonly || this.disabled) {
            this.isFocus = false;
            return;
        }
        this.value = this.isEmpty(this._realValue) ? '' : ((!this.showZero && this._realValue == '0') ? '' : this._realValue);
        this.isFocus = true;
        this.focus.emit({ event: $event, formatted: this.value, value: this._realValue, instance: this });
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onMouseEnter = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.value) {
            this.popValue = this.value;
            this.isActiveTip = this.isShowPopover();
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onKeyDown = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            this.down(e);
            e.stopPropagation();
        }
        if (e.key === 'ArrowUp') {
            e.preventDefault();
            this.up(e);
            e.stopPropagation();
        }
    };
    /**
     * @private
     * @param {?} realVal
     * @return {?}
     */
    NumberSpinnerComponent.prototype._modelChanged = /**
     * @private
     * @param {?} realVal
     * @return {?}
     */
    function (realVal) {
        this._realValue = realVal;
        this.onChangeCallback(realVal);
        this.onTouchedCallback();
        this.valueChange.emit(realVal);
    };
    /**
     * @param {?} realVal
     * @param {?=} updateOn
     * @return {?}
     */
    NumberSpinnerComponent.prototype.onModelChange = /**
     * @param {?} realVal
     * @param {?=} updateOn
     * @return {?}
     */
    function (realVal, updateOn) {
        if (updateOn === void 0) { updateOn = 'change'; }
        // this._realValue = this.getRealValue(val);
        /** @type {?} */
        var _realValue = realVal;
        if (updateOn === 'change') {
            /** @type {?} */
            var num = this.cleanNumString('' + realVal);
            _realValue = this.getRealValue(num);
        }
        this.isActiveTip = false;
        this.popValue = this.format(_realValue);
        if (this._updateOn === updateOn) {
            this._modelChanged(_realValue);
        }
    };
    /**
     * @param {?} e
     * @param {?=} type
     * @return {?}
     */
    NumberSpinnerComponent.prototype.up = /**
     * @param {?} e
     * @param {?=} type
     * @return {?}
     */
    function (e, type) {
        if (type === void 0) { type = null; }
        this.compute('up');
        e.stopPropagation();
    };
    /**
     * @param {?} e
     * @param {?=} type
     * @return {?}
     */
    NumberSpinnerComponent.prototype.down = /**
     * @param {?} e
     * @param {?=} type
     * @return {?}
     */
    function (e, type) {
        if (type === void 0) { type = null; }
        this.compute('down');
        e.stopPropagation();
    };
    /**
     * @param {?=} tye
     * @return {?}
     */
    NumberSpinnerComponent.prototype.compute = /**
     * @param {?=} tye
     * @return {?}
     */
    function (tye) {
        if (tye === void 0) { tye = 'up'; }
        if (this.isDisableOfBtn(tye)) {
            /** @type {?} */
            var _resultValue = void 0;
            /** @type {?} */
            var realBigNum = new BigNumber(this._realValue || 0);
            if (tye === 'up') {
                _resultValue = realBigNum.plus(Number(this.step));
            }
            else {
                _resultValue = realBigNum.minus(Number(this.step));
            }
            /** @type {?} */
            var s = _resultValue.toFixed();
            if (!this.isFocus) {
                this.value = this.format(s);
            }
            else {
                this.value = s;
            }
            this.input.nativeElement.value = this.value;
            this._modelChanged(this.getRealValue(_resultValue));
        }
    };
    /**
     * @param {?} type
     * @param {?=} value
     * @return {?}
     */
    NumberSpinnerComponent.prototype.isDisableOfBtn = /**
     * @param {?} type
     * @param {?=} value
     * @return {?}
     */
    function (type, value) {
        if (value === undefined) {
            value = this._realValue;
        }
        value = new BigNumber(value);
        if (type === 'up' && !(new BigNumber(this.max)).isNaN() && value.gte(this.max)) {
            return false;
        }
        if (type === 'down' && !(new BigNumber(this.min)).isNaN() && value.lte(this.min)) {
            return false;
        }
        return true;
    };
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype.isShowPopover = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var width = this.input.nativeElement.clientWidth;
        var _a = window.getComputedStyle(this.input.nativeElement), paddingLeft = _a.paddingLeft, paddingRight = _a.paddingRight;
        /** @type {?} */
        var _width = width - (Number(paddingLeft.replace('px', '')) || 0) - (Number(paddingRight.replace('px', '')) || 0);
        /** @type {?} */
        var txtWidth = this.commonUtils.getTextWidth(this.value, window.getComputedStyle(this.input.nativeElement).font);
        if (_width && _width < txtWidth) {
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    NumberSpinnerComponent.prototype._getPrecision = /**
     * @return {?}
     */
    function () {
        return Number(this.precision || 0);
    };
    /**
     * @param {?} n
     * @return {?}
     */
    NumberSpinnerComponent.prototype.toFixed = /**
     * @param {?} n
     * @return {?}
     */
    function (n) {
        /** @type {?} */
        var _n = n;
        if (!BigNumber.isBigNumber(n)) {
            _n = new BigNumber(n);
        }
        if (this.precision !== null && this.precision !== undefined) {
            return n.toFixed(this._getPrecision());
        }
        return n.toFixed();
    };
    /**
     * @param {?} _n
     * @return {?}
     */
    NumberSpinnerComponent.prototype._getRealValue = /**
     * @param {?} _n
     * @return {?}
     */
    function (_n) {
        /** @type {?} */
        var n = this.toFixed(_n);
        return this.bigNumber ? n : Number(n);
    };
    /**
     * @param {?} val
     * @return {?}
     */
    NumberSpinnerComponent.prototype.getRealValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        if (this.parser) {
            if (!isNaN(Number(val))) {
                return val;
            }
            else {
                return this.parser(val);
            }
        }
        /** @type {?} */
        var _n = this.validInterval(new BigNumber(val));
        if (_n.isNaN()) {
            if (this.canNull) {
                return null;
            }
            else {
                /** @type {?} */
                var minBigNum = new BigNumber('' + this.min);
                /** @type {?} */
                var maxBigNum = new BigNumber('' + this.max);
                if (!minBigNum.isNaN()) {
                    _n = minBigNum;
                }
                else if (!maxBigNum.isNaN()) {
                    _n = maxBigNum;
                }
                else {
                    return 0;
                }
            }
            // if (this.canNull || minBigNum.isNaN()) {
            //     return null;
            // } else {
            //     _n = minBigNum;
            // }
        }
        return this._getRealValue(_n);
    };
    /**
     * @private
     * @return {?}
     */
    NumberSpinnerComponent.prototype.buildFormatOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            prefix: this.prefix,
            suffix: this.suffix,
            decimalSeparator: this.decimalSeparator,
            groupSeparator: this.useThousands ? this.groupSeparator : '',
            groupSize: this.groupSize
        };
    };
    /**
     * @param {?} val
     * @return {?}
     */
    NumberSpinnerComponent.prototype.isEmpty = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        return isNaN(val) || val === null || val === undefined || val === '';
    };
    /**
     * @param {?} bn
     * @param {?=} emit
     * @return {?}
     */
    NumberSpinnerComponent.prototype.validInterval = /**
     * @param {?} bn
     * @param {?=} emit
     * @return {?}
     */
    function (bn, emit) {
        if (emit === void 0) { emit = true; }
        /** @type {?} */
        var _bnVal = bn;
        if (!this.isEmpty(this.max)) {
            /** @type {?} */
            var _maxBigNum = new BigNumber('' + this.max);
            if (bn.gt(_maxBigNum)) {
                _bnVal = _maxBigNum;
                /** @type {?} */
                var _realValue = this._getRealValue(_maxBigNum);
                if (emit) {
                    this._modelChanged(_realValue);
                }
            }
        }
        if (!this.isEmpty(this.min)) {
            /** @type {?} */
            var _minBigNum = new BigNumber('' + this.min);
            if (bn.lt(_minBigNum)) {
                _bnVal = _minBigNum;
                /** @type {?} */
                var _realValue = this._getRealValue(_minBigNum);
                if (emit) {
                    this._modelChanged(_realValue);
                }
            }
        }
        return _bnVal;
    };
    /**
     * @param {?} val
     * @param {?=} emit
     * @return {?}
     */
    NumberSpinnerComponent.prototype.format = /**
     * @param {?} val
     * @param {?=} emit
     * @return {?}
     */
    function (val, emit) {
        if (emit === void 0) { emit = true; }
        val = this.cleanNumString(val);
        /** @type {?} */
        var bigVal = new BigNumber(val);
        /** @type {?} */
        var _bgNum = bigVal;
        if (emit) {
            _bgNum = this.validInterval(bigVal);
        }
        if (_bgNum.valueOf() == '0' && !this.showZero) {
            return '';
        }
        if (this.canNull && bigVal.isNaN()) {
            return '';
        }
        else {
            if (_bgNum.isNaN()) {
                return '';
            }
        }
        if (this.formatter) {
            return this.formatter(_bgNum.toNumber());
        }
        else {
            if (!Object.keys(this.formatOptions).length) {
                this.formatOptions = this.buildFormatOptions();
            }
            return this._toFormat(_bgNum, this.formatOptions);
        }
    };
    /**
     * @param {?} _bgNum
     * @param {?} fmt
     * @return {?}
     */
    NumberSpinnerComponent.prototype._toFormat = /**
     * @param {?} _bgNum
     * @param {?} fmt
     * @return {?}
     */
    function (_bgNum, fmt) {
        if (this.precision !== null && this.precision !== undefined) {
            return _bgNum.toFormat(this._getPrecision(), fmt);
        }
        else {
            return _bgNum.toFormat(fmt);
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    NumberSpinnerComponent.prototype.cleanNumString = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        val = (val === null || val === undefined || val === '') ? '' : String(val);
        val = val.replace(new RegExp(this.prefix, 'g'), '')
            .replace(new RegExp(this.suffix, 'g'), '').replace(/\,/g, '');
        if (this.groupSeparator && this.groupSeparator !== ',') {
            val = val.replace(new RegExp("\\" + this.groupSeparator, 'g'), '');
        }
        if (this.decimalSeparator && this.decimalSeparator !== '.') {
            val = val.replace(new RegExp("\\" + this.decimalSeparator, 'g'), '.');
        }
        return val;
    };
    /**
     * @param {?} val
     * @return {?}
     */
    NumberSpinnerComponent.prototype.updateValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        val = this.cleanNumString(val);
        this._realValue = this.getRealValue(val);
        this.value = this.format(this._realValue);
        this.el.nativeElement.value = this.value;
    };
    /**
     * @private
     * @return {?}
     */
    NumberSpinnerComponent.prototype.updateControlValue = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var _val = this.cleanNumString(this.value);
        if (this.parser) {
            _val = this.parser(this.value);
        }
        if (this.isEmpty(this._realValue) && this.isEmpty(_val)) {
            return;
        }
        /** @type {?} */
        var rv = new BigNumber(this._realValue);
        /** @type {?} */
        var cv = new BigNumber(_val);
        if (rv.isNaN() && cv.isNaN()) {
            return;
        }
        // if (!rv.eq(cv)) {
        // }
        if (this._ngControl) {
            /** @type {?} */
            var formgroup = this._ngControl['formDirective'];
            if (formgroup) {
                /** @type {?} */
                var ctrl = formgroup.control.get(this._ngControl.name);
                if (!ctrl && formgroup.control.controls) {
                    ctrl = formgroup.control.controls[this._ngControl.name];
                }
                if (ctrl) {
                    if (ctrl.value !== this._realValue) {
                        ctrl.setValue(this._realValue);
                    }
                }
            }
        }
    };
    /**
     * @param {?} val
     * @return {?}
     */
    NumberSpinnerComponent.prototype.writeValue = /**
     * @param {?} val
     * @return {?}
     */
    function (val) {
        this._realValue = val;
        this.value = this.format(this._realValue, false);
        this.updateControlValue();
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NumberSpinnerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onChangeCallback = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    NumberSpinnerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.onTouchedCallback = fn;
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    NumberSpinnerComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    NumberSpinnerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-number-spinner',
                    template: "\n        <div class=\"input-group  f-state-hover flex-row\"\n            [ngClass]=\"{'f-state-disabled': disabled,'f-state-readonly': readonly,'f-state-focus': isFocus }\"\n            (mouseenter)=\"onMouseEnter($event)\"\n            #popover=\"bs-popover\"\n            farrisPopover\n            [popover]=\"popValue\" [triggers]=\"'hover'\" [popActive]=\"isActiveTip\"\n            [showAction]=\"'show2'\"  [container]=\"'body'\">\n            <input #input\n                type=\"text\"\n                number-only\n                [precision]=\"precision\"\n                autocomplete=\"off\"\n                class=\"form-control f-utils-fill\"\n                [ngModel]=\"value\"\n                [placeholder]=\"disabled||readonly || !editable?'':placeholder\"\n                [readonly]=\"readonly || !editable\"\n                [disabled]=\"disabled\"\n                [style.padding-right]=\"'4px'\"\n                [style.text-align]=\"textAlign\"\n                (ngModelChange)=\"onModelChange($event)\"\n                (blur)=\"onBlur(input)\"\n                (focus)=\"onFocus($event)\"\n                (keydown)=\"onKeyDown($event)\"\n                (click)=\"onClick($event)\"\n            />\n            <div class=\"input-group-append btn-group btn-group-number m-0\" *ngIf=\"!disabled && !readonly && showButton\">\n                <span class=\"icon k-i-arrow-chevron-up number-arrow-chevron\" [style.cursor]=\"isDisableOfBtn('up') ? 'pointer' : 'not-allowed'\"\n                        (click)=\"up($event)\"></span>\n                <span class=\"icon k-i-arrow-chevron-down number-arrow-chevron\" [style.cursor]=\"isDisableOfBtn('down') ? 'pointer' : 'not-allowed'\"\n                        (click)=\"down($event)\"></span>\n                \n            </div>\n        </div>\n    ",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NumberSpinnerComponent; })),
                            multi: true
                        }
                    ],
                    styles: [".input-group .btn-group-number{height:1.50003rem;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;background-color:#fff;border-left:1px solid #d9d9d9;width:1.50003rem}.input-group .btn-group-number .number-arrow-chevron{-webkit-box-flex:1;flex:1;line-height:1;height:50%;text-align:center}.input-group .btn-group-number .number-arrow-chevron:active{background-color:#e6e9f0}.input-group .btn-group-number .number-arrow-chevron:nth-child(2){border-top:1px solid #d9d9d9}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none!important;margin:0}.number-range{position:relative}.number-range .input-container{display:-webkit-box;display:flex;padding:0}.number-range .input-container .sub-input-group{-webkit-box-flex:1;flex:1;position:relative;display:-webkit-box;display:flex;-webkit-transition:.3s ease-out;transition:.3s ease-out}.number-range .input-container .sub-input-group .sub-input{width:100%;border:none;outline:0;background-color:rgba(0,0,0,0);min-width:2px;padding:.125rem 4px .125rem .5rem}.number-range .input-container .spliter{width:15px;text-align:center}"]
                }] }
    ];
    /** @nocollapse */
    NumberSpinnerComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: Injector }
    ]; };
    NumberSpinnerComponent.propDecorators = {
        hostClass: [{ type: HostBinding, args: ['class.f-cmp-number-spinner',] }],
        disabled: [{ type: Input }],
        readonly: [{ type: Input }],
        editable: [{ type: Input }],
        formatter: [{ type: Input }],
        parser: [{ type: Input }],
        placeholder: [{ type: Input }],
        step: [{ type: Input }],
        max: [{ type: Input }],
        min: [{ type: Input }],
        bigNumber: [{ type: Input }],
        showButton: [{ type: Input }],
        useThousands: [{ type: Input }],
        textAlign: [{ type: Input }],
        autoDecimal: [{ type: Input }],
        canNull: [{ type: Input }],
        precision: [{ type: Input }],
        prefix: [{ type: Input }],
        suffix: [{ type: Input }],
        decimalSeparator: [{ type: Input }],
        groupSeparator: [{ type: Input }],
        groupSize: [{ type: Input }],
        value: [{ type: Input }],
        showZero: [{ type: Input }],
        valueChange: [{ type: Output }],
        blur: [{ type: Output }],
        focus: [{ type: Output }],
        input: [{ type: ViewChild, args: ['input',] }]
    };
    return NumberSpinnerComponent;
}());
export { NumberSpinnerComponent };
if (false) {
    /** @type {?} */
    NumberSpinnerComponent.prototype.hostClass;
    /** @type {?} */
    NumberSpinnerComponent.prototype.disabled;
    /** @type {?} */
    NumberSpinnerComponent.prototype.readonly;
    /** @type {?} */
    NumberSpinnerComponent.prototype.editable;
    /** @type {?} */
    NumberSpinnerComponent.prototype.formatter;
    /** @type {?} */
    NumberSpinnerComponent.prototype.parser;
    /** @type {?} */
    NumberSpinnerComponent.prototype.placeholder;
    /** @type {?} */
    NumberSpinnerComponent.prototype.step;
    /** @type {?} */
    NumberSpinnerComponent.prototype.max;
    /** @type {?} */
    NumberSpinnerComponent.prototype.min;
    /**
     * 启用大数支持
     * @type {?}
     */
    NumberSpinnerComponent.prototype.bigNumber;
    /** @type {?} */
    NumberSpinnerComponent.prototype.showButton;
    /** @type {?} */
    NumberSpinnerComponent.prototype.useThousands;
    /** @type {?} */
    NumberSpinnerComponent.prototype.textAlign;
    /** @type {?} */
    NumberSpinnerComponent.prototype.autoDecimal;
    /** @type {?} */
    NumberSpinnerComponent.prototype.canNull;
    /** @type {?} */
    NumberSpinnerComponent.prototype.precision;
    /** @type {?} */
    NumberSpinnerComponent.prototype.prefix;
    /** @type {?} */
    NumberSpinnerComponent.prototype.suffix;
    /**
     * 小数点符号
     * @type {?}
     */
    NumberSpinnerComponent.prototype.decimalSeparator;
    /**
     * 千分位符号
     * @type {?}
     */
    NumberSpinnerComponent.prototype.groupSeparator;
    /**
     * 使用千分位时，每组显示的字符数
     * @type {?}
     */
    NumberSpinnerComponent.prototype.groupSize;
    /**
     * @type {?}
     * @private
     */
    NumberSpinnerComponent.prototype._value;
    /**
     * 显示0值
     * @type {?}
     */
    NumberSpinnerComponent.prototype.showZero;
    /** @type {?} */
    NumberSpinnerComponent.prototype.valueChange;
    /** @type {?} */
    NumberSpinnerComponent.prototype.blur;
    /** @type {?} */
    NumberSpinnerComponent.prototype.focus;
    /** @type {?} */
    NumberSpinnerComponent.prototype.input;
    /** @type {?} */
    NumberSpinnerComponent.prototype.isFocus;
    /** @type {?} */
    NumberSpinnerComponent.prototype.popValue;
    /** @type {?} */
    NumberSpinnerComponent.prototype.isActiveTip;
    /** @type {?} */
    NumberSpinnerComponent.prototype.formatOptions;
    /**
     * @type {?}
     * @private
     */
    NumberSpinnerComponent.prototype._realValue;
    /** @type {?} */
    NumberSpinnerComponent.prototype.cdRef;
    /** @type {?} */
    NumberSpinnerComponent.prototype.commonUtils;
    /**
     * @type {?}
     * @private
     */
    NumberSpinnerComponent.prototype._ngControl;
    /**
     * @type {?}
     * @private
     */
    NumberSpinnerComponent.prototype.showtipTimer;
    /** @type {?} */
    NumberSpinnerComponent.prototype._updateOn;
    /** @type {?} */
    NumberSpinnerComponent.prototype.localeService;
    /** @type {?} */
    NumberSpinnerComponent.prototype.onTouchedCallback;
    /** @type {?} */
    NumberSpinnerComponent.prototype.onChangeCallback;
    /** @type {?} */
    NumberSpinnerComponent.prototype.el;
    /** @type {?} */
    NumberSpinnerComponent.prototype.render;
    /** @type {?} */
    NumberSpinnerComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVyLXNwaW5uZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS1udW1iZXItc3Bpbm5lci8iLCJzb3VyY2VzIjpbImxpYi9udW1iZXItc3Bpbm5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBUUEsT0FBTyxFQUNILFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQVUsU0FBUyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQzNGLFNBQVMsRUFBdUMsV0FBVyxFQUFFLGlCQUFpQixFQUNqRixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXFDLFNBQVMsRUFBVyxpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzFHLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDekMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQzs7OztBQUdoRCxxQ0FXQzs7Ozs7O0lBVEcsaUNBQWdCOzs7OztJQUVoQixpQ0FBZ0I7Ozs7O0lBRWhCLDJDQUEwQjs7Ozs7SUFFMUIseUNBQXdCOzs7OztJQUV4QixvQ0FBbUI7O0FBR3ZCO0lBMkhJLGdDQUFtQixFQUFjLEVBQVMsTUFBaUIsRUFBUyxRQUFrQjtRQUFuRSxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVMsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUFTLGFBQVEsR0FBUixRQUFRLENBQVU7UUE1RTNDLGNBQVMsR0FBRyxJQUFJLENBQUM7UUFDbkQsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGFBQVEsR0FBRyxJQUFJLENBQUM7O1FBTWhCLGdCQUFXLEdBQUcsRUFBRSxDQUFDOztRQUVqQixTQUFJLEdBQUcsQ0FBQyxDQUFDOzs7O1FBT1QsY0FB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NEI7O0lBRTVCLHlDQUF5Qjs7SUFFekIsMkNBQXVCOztJQUV2Qix3Q0FBcUI7O0lBRXJCLHdDQUFxQjs7Ozs7SUFFckIsa0RBQWdDOzs7OztJQUVoQyxnREFBOEI7Ozs7O0lBRTlCLDJDQUF1Qjs7Ozs7SUFFdkIsd0NBQW9COzs7OztJQVVwQiwwQ0FBeUI7O0lBRXpCLDZDQUFnRDs7SUFDaEQsc0NBQW9DOztJQUNwQyx1Q0FBcUM7O0lBRXJDLHVDQUFzQzs7SUFFdEMseUNBQWdCOztJQUNoQiwwQ0FBYzs7SUFDZCw2Q0FBb0I7O0lBQ3BCLCtDQUFvQzs7Ozs7SUFDcEMsNENBQTBCOztJQUMxQix1Q0FBeUI7O0lBQ3pCLDZDQUF5Qjs7Ozs7SUFDekIsNENBQThCOzs7OztJQUM5Qiw4Q0FBNEI7O0lBRTVCLDJDQUFxQjs7SUFDckIsK0NBQW9DOztJQUNwQyxtREFBMEM7O0lBQzFDLGtEQUErQzs7SUFFbkMsb0NBQXFCOztJQUFFLHdDQUF3Qjs7SUFBRSwwQ0FBeUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBAQXV0aG9yOiDnlq/ni4Lnp4DmiY0oTHVjYXMgSHVhbmcpXHJcbiAqIEBEYXRlOiAyMDE5LTA4LTA1IDEwOjI2OjUwXHJcbiAqIEBMYXN0RWRpdG9yczog55av54uC56eA5omNKEx1Y2FzIEh1YW5nKVxyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIwLTExLTE2IDExOjQzOjM0XHJcbiAqIEBRUTogMTA1NTgxODIzOVxyXG4gKiBAVmVyc2lvbjogdjAuMC4xXHJcbiAqL1xyXG5pbXBvcnQge1xyXG4gICAgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYsIE9uSW5pdCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBJbmplY3RvciwgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIFJlbmRlcmVyMiwgT25EZXN0cm95LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEhvc3RCaW5kaW5nLCBDaGFuZ2VEZXRlY3RvclJlZiwgSG9zdExpc3RlbmVyXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBGb3JtQ29udHJvbCwgTmdDb250cm9sLCBOZ01vZGVsLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnYmlnbnVtYmVyLmpzJztcclxuaW1wb3J0IHsgTG9jYWxlU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9jYWxlJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbHMgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbic7XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOdW1iZXJGb3JtYXR0ZXIge1xyXG4gICAgLyoqIOWJjee9ruespuWPtyAqL1xyXG4gICAgcHJlZml4Pzogc3RyaW5nO1xyXG4gICAgLyoqIOWQjue8gCAqL1xyXG4gICAgc3VmZml4Pzogc3RyaW5nO1xyXG4gICAgLyoqIOWwj+aVsOeCuSAqL1xyXG4gICAgZGVjaW1hbFNlcGFyYXRvcj86IHN0cmluZztcclxuICAgIC8qKiDljYPliIbkvY3nrKblj7cgKi9cclxuICAgIGdyb3VwU2VwYXJhdG9yPzogc3RyaW5nO1xyXG4gICAgLyoqIOWNg+WIhuS9jeWIhue7hCAqL1xyXG4gICAgZ3JvdXBTaXplPzogbnVtYmVyO1xyXG59XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnZmFycmlzLW51bWJlci1zcGlubmVyJyxcclxuICAgIHRlbXBsYXRlOiBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwICBmLXN0YXRlLWhvdmVyIGZsZXgtcm93XCJcclxuICAgICAgICAgICAgW25nQ2xhc3NdPVwieydmLXN0YXRlLWRpc2FibGVkJzogZGlzYWJsZWQsJ2Ytc3RhdGUtcmVhZG9ubHknOiByZWFkb25seSwnZi1zdGF0ZS1mb2N1cyc6IGlzRm9jdXMgfVwiXHJcbiAgICAgICAgICAgIChtb3VzZWVudGVyKT1cIm9uTW91c2VFbnRlcigkZXZlbnQpXCJcclxuICAgICAgICAgICAgI3BvcG92ZXI9XCJicy1wb3BvdmVyXCJcclxuICAgICAgICAgICAgZmFycmlzUG9wb3ZlclxyXG4gICAgICAgICAgICBbcG9wb3Zlcl09XCJwb3BWYWx1ZVwiIFt0cmlnZ2Vyc109XCInaG92ZXInXCIgW3BvcEFjdGl2ZV09XCJpc0FjdGl2ZVRpcFwiXHJcbiAgICAgICAgICAgIFtzaG93QWN0aW9uXT1cIidzaG93MidcIiAgW2NvbnRhaW5lcl09XCInYm9keSdcIj5cclxuICAgICAgICAgICAgPGlucHV0ICNpbnB1dFxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgbnVtYmVyLW9ubHlcclxuICAgICAgICAgICAgICAgIFtwcmVjaXNpb25dPVwicHJlY2lzaW9uXCJcclxuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBmLXV0aWxzLWZpbGxcIlxyXG4gICAgICAgICAgICAgICAgW25nTW9kZWxdPVwidmFsdWVcIlxyXG4gICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyXT1cImRpc2FibGVkfHxyZWFkb25seSB8fCAhZWRpdGFibGU/Jyc6cGxhY2Vob2xkZXJcIlxyXG4gICAgICAgICAgICAgICAgW3JlYWRvbmx5XT1cInJlYWRvbmx5IHx8ICFlZGl0YWJsZVwiXHJcbiAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgW3N0eWxlLnBhZGRpbmctcmlnaHRdPVwiJzRweCdcIlxyXG4gICAgICAgICAgICAgICAgW3N0eWxlLnRleHQtYWxpZ25dPVwidGV4dEFsaWduXCJcclxuICAgICAgICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIm9uTW9kZWxDaGFuZ2UoJGV2ZW50KVwiXHJcbiAgICAgICAgICAgICAgICAoYmx1cik9XCJvbkJsdXIoaW5wdXQpXCJcclxuICAgICAgICAgICAgICAgIChmb2N1cyk9XCJvbkZvY3VzKCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgKGtleWRvd24pPVwib25LZXlEb3duKCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soJGV2ZW50KVwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hcHBlbmQgYnRuLWdyb3VwIGJ0bi1ncm91cC1udW1iZXIgbS0wXCIgKm5nSWY9XCIhZGlzYWJsZWQgJiYgIXJlYWRvbmx5ICYmIHNob3dCdXR0b25cIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbiBrLWktYXJyb3ctY2hldnJvbi11cCBudW1iZXItYXJyb3ctY2hldnJvblwiIFtzdHlsZS5jdXJzb3JdPVwiaXNEaXNhYmxlT2ZCdG4oJ3VwJykgPyAncG9pbnRlcicgOiAnbm90LWFsbG93ZWQnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNsaWNrKT1cInVwKCRldmVudClcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb24gay1pLWFycm93LWNoZXZyb24tZG93biBudW1iZXItYXJyb3ctY2hldnJvblwiIFtzdHlsZS5jdXJzb3JdPVwiaXNEaXNhYmxlT2ZCdG4oJ2Rvd24nKSA/ICdwb2ludGVyJyA6ICdub3QtYWxsb3dlZCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiZG93bigkZXZlbnQpXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYCxcclxuICAgIHN0eWxlVXJsczogWycuL251bWJlci5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTnVtYmVyU3Bpbm5lckNvbXBvbmVudCksXHJcbiAgICAgICAgICAgIG11bHRpOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTnVtYmVyU3Bpbm5lckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuZi1jbXAtbnVtYmVyLXNwaW5uZXInKSBob3N0Q2xhc3MgPSB0cnVlO1xyXG4gICAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIEBJbnB1dCgpIHJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICBASW5wdXQoKSBlZGl0YWJsZSA9IHRydWU7XHJcbiAgICAvLyBmb3JtYXR0ZXIg5ZKMIHBhcnNlciDlv4XpobvlkIzml7blrZjlnKhcclxuICAgIEBJbnB1dCgpIGZvcm1hdHRlcjogKHZhbDogbnVtYmVyKSA9PiBzdHJpbmc7XHJcblxyXG4gICAgQElucHV0KCkgcGFyc2VyOiAodmFsOiBzdHJpbmcgfCBudW1iZXIpID0+IG51bWJlcjtcclxuICAgIC8vIOepuueZveaPkOekuuaWh+acrFxyXG4gICAgQElucHV0KCkgcGxhY2Vob2xkZXIgPSAnJztcclxuICAgIC8vIHVwIG9yIGRvd24g5q2l6ZW/XHJcbiAgICBASW5wdXQoKSBzdGVwID0gMTtcclxuICAgIC8vIOacgOWkp+WAvFxyXG4gICAgQElucHV0KCkgbWF4OiBhbnk7XHJcbiAgICAvLyDmnIDlsI/lgLxcclxuICAgIEBJbnB1dCgpIG1pbjogYW55O1xyXG5cclxuICAgIC8qKiDlkK/nlKjlpKfmlbDmlK/mjIEgKi9cclxuICAgIEBJbnB1dCgpIGJpZ051bWJlciA9IGZhbHNlO1xyXG5cclxuICAgIC8vIOaYr+WQpuaYvuekuuWKoOWHj+aMiemSrlxyXG4gICAgQElucHV0KCkgc2hvd0J1dHRvbiA9IHRydWU7XHJcbiAgICAvLyDmmK/lkKbkvb/nlKjljYPliIblgLxcclxuICAgIEBJbnB1dCgpIHVzZVRob3VzYW5kcyA9IHRydWU7XHJcbiAgICAvLyDmlofmnKzmlrnlkJFcclxuICAgIEBJbnB1dCgpIHRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgIC8vIOiHquWKqOihpeWFqOWwj+aVsFxyXG4gICAgQElucHV0KCkgYXV0b0RlY2ltYWwgPSB0cnVlO1xyXG4gICAgLy8g5YWB6K645Li656m6XHJcbiAgICBASW5wdXQoKSBjYW5OdWxsID0gZmFsc2U7XHJcbiAgICAvLyDnsr7luqZcclxuICAgIEBJbnB1dCgpIHByZWNpc2lvbiA9IDA7XHJcbiAgICAvLyDliY3nvIBcclxuICAgIEBJbnB1dCgpIHByZWZpeCA9ICcnO1xyXG4gICAgLy8g5ZCO57yAXHJcbiAgICBASW5wdXQoKSBzdWZmaXggPSAnJztcclxuICAgIC8qKiDlsI/mlbDngrnnrKblj7cgKi9cclxuICAgIEBJbnB1dCgpIGRlY2ltYWxTZXBhcmF0b3IgPSAnLic7XHJcbiAgICAvKiog5Y2D5YiG5L2N56ym5Y+3ICovXHJcbiAgICBASW5wdXQoKSBncm91cFNlcGFyYXRvciA9ICcsJztcclxuICAgIC8qKiDkvb/nlKjljYPliIbkvY3ml7bvvIzmr4/nu4TmmL7npLrnmoTlrZfnrKbmlbAgKi9cclxuICAgIEBJbnB1dCgpIGdyb3VwU2l6ZSA9IDM7XHJcblxyXG4gICAgcHJpdmF0ZSBfdmFsdWUgPSAnJztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHZhbHVlKHZhbDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIOaYvuekujDlgLwgKi9cclxuICAgIEBJbnB1dCgpIHNob3daZXJvID0gdHJ1ZTtcclxuXHJcbiAgICBAT3V0cHV0KCkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBibHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2lucHV0JykgaW5wdXQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gICAgaXNGb2N1cyA9IGZhbHNlO1xyXG4gICAgcG9wVmFsdWUgPSAnJztcclxuICAgIGlzQWN0aXZlVGlwID0gZmFsc2U7XHJcbiAgICBmb3JtYXRPcHRpb25zOiBOdW1iZXJGb3JtYXR0ZXIgPSB7fTtcclxuICAgIHByaXZhdGUgX3JlYWxWYWx1ZSA9IG51bGw7XHJcbiAgICBjZFJlZjogQ2hhbmdlRGV0ZWN0b3JSZWY7XHJcbiAgICBjb21tb25VdGlsczogQ29tbW9uVXRpbHM7XHJcbiAgICBwcml2YXRlIF9uZ0NvbnRyb2w6IE5nQ29udHJvbDtcclxuICAgIHByaXZhdGUgc2hvd3RpcFRpbWVyID0gbnVsbDtcclxuXHJcbiAgICBfdXBkYXRlT24gPSAnY2hhbmdlJztcclxuICAgIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UgPSBudWxsO1xyXG4gICAgb25Ub3VjaGVkQ2FsbGJhY2s6ICgpID0+IHZvaWQgPSAoKSA9PiB7IH07XHJcbiAgICBvbkNoYW5nZUNhbGxiYWNrOiAoXzogYW55KSA9PiB2b2lkID0gKCkgPT4geyB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIHJlbmRlcjogUmVuZGVyZXIyLCBwdWJsaWMgaW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5jZFJlZiA9IHRoaXMuaW5qZWN0b3IuZ2V0KENoYW5nZURldGVjdG9yUmVmLCBudWxsKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29tbW9uVXRpbHMgPSB0aGlzLmluamVjdG9yLmdldChDb21tb25VdGlscywgbmV3IENvbW1vblV0aWxzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZm9ybWF0T3B0aW9ucyA9IHRoaXMuYnVpbGRGb3JtYXRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5fbmdDb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQoTmdDb250cm9sLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubG9jYWxlU2VydmljZSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0UGxhY2VIb2xkZXIgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ251bWJlclNwaW5uZXIucGxhY2Vob2xkZXInKSB8fCAn6K+36L6T5YWl5pWw5a2XJztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gZGVmYXVsdFBsYWNlSG9sZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fbmdDb250cm9sICYmIHRoaXMuX25nQ29udHJvbC5jb250cm9sKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU9uID0gIHRoaXMuX25nQ29udHJvbC5jb250cm9sLnVwZGF0ZU9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5saXN0ZW5JbnB1dFBhc3RlRXZlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnZhbHVlICYmICFjaGFuZ2VzLnZhbHVlLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB0aGlzLmdldFJlYWxWYWx1ZShjaGFuZ2VzLnZhbHVlLmN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZvcm1hdCh0aGlzLl9yZWFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd1plcm8gJiYgIWNoYW5nZXMuc2hvd1plcm8uaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZvcm1hdCh0aGlzLl9yZWFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucHJlY2lzaW9uICYmICFjaGFuZ2VzLnByZWNpc2lvbi5pc0ZpcnN0Q2hhbmdlKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2hhbmdlcy51c2VUaG91c2FuZHMgJiYgIWNoYW5nZXMudXNlVGhvdXNhbmRzLmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjaGFuZ2VzLnByZWZpeCAmJiAhY2hhbmdlcy5wcmVmaXguaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25PcHRpb25zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhbmdlcy5zdWZmaXggJiYgIWNoYW5nZXMuc3VmZml4LmlzRmlyc3RDaGFuZ2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbk9wdGlvbnNDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuZm9ybWF0T3B0aW9ucyA9IHRoaXMuYnVpbGRGb3JtYXRPcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZm9ybWF0KHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKSB7fVxyXG5cclxuICAgIC8vIOaUr+aMgeeymOi0tOW4puagvOW8j+eahOaVsOaNrlxyXG4gICAgbGlzdGVuSW5wdXRQYXN0ZUV2ZW50KCkge1xyXG4gICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgY2xpcGJvYXJkRGF0YSA9IGV2ZW50LmNsaXBib2FyZERhdGEgfHwgd2luZG93WydjbGlwYm9hcmREYXRhJ107XHJcbiAgICAgICAgICAgIGNvbnN0IHBhc3RlVmFsdWUgPSBjbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQnKTtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gdGhpcy5jbGVhbk51bVN0cmluZyhwYXN0ZVZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRW1wdHkodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gKHRhcmdldCBhcyBhbnkpLnNlbGVjdGlvblN0YXJ0O1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSAodGFyZ2V0IGFzIGFueSkuc2VsZWN0aW9uRW5kO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC52YWx1ZSA9IHRhcmdldC52YWx1ZS5zbGljZSgwLCBzdGFydCkgKyB2YWwgKyAgdGFyZ2V0LnZhbHVlLnNsaWNlKGVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl91cGRhdGVPbiA9PT0gJ2NoYW5nZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFZhbHVlKHRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5fcmVhbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW9kZWxDaGFuZ2VkKHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25CbHVyKCRldmVudCwgdHlwZTogc3RyaW5nID0gJycpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFkb25seSB8fCB0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl91cGRhdGVPbiA9PT0gJ2JsdXInKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuY2xlYW5OdW1TdHJpbmcoJGV2ZW50LnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVhbFZhbHVlID0gdGhpcy5nZXRSZWFsVmFsdWUodmFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZvcm1hdCh0aGlzLl9yZWFsVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdGhpcy5pc0ZvY3VzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuX3JlYWxWYWx1ZSwgJ2JsdXInKTtcclxuICAgICAgICB0aGlzLmJsdXIuZW1pdCh7IGV2ZW50OiAkZXZlbnQsIGZvcm1hdHRlZDogdGhpcy52YWx1ZSwgdmFsdWU6IHRoaXMuX3JlYWxWYWx1ZSwgaW5zdGFuY2U6IHRoaXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljaygkZXZlbnQpIHtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Gb2N1cygkZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFkb25seSB8fCB0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGb2N1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pc0VtcHR5KHRoaXMuX3JlYWxWYWx1ZSkgPyAnJyA6ICAoKCF0aGlzLnNob3daZXJvICYmIHRoaXMuX3JlYWxWYWx1ZSA9PSAnMCcpID8gICcnIDogdGhpcy5fcmVhbFZhbHVlICk7XHJcbiAgICAgICAgdGhpcy5pc0ZvY3VzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZvY3VzLmVtaXQoeyBldmVudDogJGV2ZW50LCBmb3JtYXR0ZWQ6IHRoaXMudmFsdWUsIHZhbHVlOiB0aGlzLl9yZWFsVmFsdWUsIGluc3RhbmNlOiB0aGlzICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRW50ZXIoJGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wb3BWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSB0aGlzLmlzU2hvd1BvcG92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5kb3duKGUpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwKGUpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9tb2RlbENoYW5nZWQocmVhbFZhbCkge1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHJlYWxWYWw7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHJlYWxWYWwpO1xyXG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQocmVhbFZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb2RlbENoYW5nZShyZWFsVmFsOiBhbnksIHVwZGF0ZU9uID0gJ2NoYW5nZScpIHtcclxuICAgICAgICAvLyB0aGlzLl9yZWFsVmFsdWUgPSB0aGlzLmdldFJlYWxWYWx1ZSh2YWwpO1xyXG4gICAgICAgIGxldCBfcmVhbFZhbHVlID0gcmVhbFZhbDtcclxuICAgICAgICBpZiAodXBkYXRlT24gPT09ICdjaGFuZ2UnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHRoaXMuY2xlYW5OdW1TdHJpbmcoJycgKyByZWFsVmFsKTtcclxuICAgICAgICAgICAgX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFZhbHVlKG51bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBY3RpdmVUaXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnBvcFZhbHVlID0gdGhpcy5mb3JtYXQoX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZU9uID09PSB1cGRhdGVPbikge1xyXG4gICAgICAgICAgICB0aGlzLl9tb2RlbENoYW5nZWQoX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwKGU6IEV2ZW50LCB0eXBlID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZSgndXAnKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvd24oZTogRXZlbnQsIHR5cGUgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5jb21wdXRlKCdkb3duJyk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlKHR5ZSA9ICd1cCcpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc2FibGVPZkJ0bih0eWUpKSB7XHJcbiAgICAgICAgICAgIGxldCBfcmVzdWx0VmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWxCaWdOdW0gPSBuZXcgQmlnTnVtYmVyKHRoaXMuX3JlYWxWYWx1ZSB8fCAwKTtcclxuICAgICAgICAgICAgaWYgKHR5ZSA9PT0gJ3VwJykge1xyXG4gICAgICAgICAgICAgICAgX3Jlc3VsdFZhbHVlID0gcmVhbEJpZ051bS5wbHVzKE51bWJlcih0aGlzLnN0ZXApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9yZXN1bHRWYWx1ZSA9IHJlYWxCaWdOdW0ubWludXMoTnVtYmVyKHRoaXMuc3RlcCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzID0gX3Jlc3VsdFZhbHVlLnRvRml4ZWQoKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZvcm1hdChzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX21vZGVsQ2hhbmdlZCh0aGlzLmdldFJlYWxWYWx1ZShfcmVzdWx0VmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNEaXNhYmxlT2ZCdG4odHlwZTogc3RyaW5nLCB2YWx1ZT86IGFueSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fcmVhbFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWx1ZSA9IG5ldyBCaWdOdW1iZXIodmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3VwJyAmJiAhKG5ldyBCaWdOdW1iZXIodGhpcy5tYXgpKS5pc05hTigpICYmIHZhbHVlLmd0ZSh0aGlzLm1heCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2Rvd24nICYmICEobmV3IEJpZ051bWJlcih0aGlzLm1pbikpLmlzTmFOKCkgJiYgdmFsdWUubHRlKHRoaXMubWluKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU2hvd1BvcG92ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgIHdpZHRoID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IHsgcGFkZGluZ0xlZnQsIHBhZGRpbmdSaWdodCB9ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50KTtcclxuXHJcbiAgICAgICAgY29uc3QgX3dpZHRoID0gd2lkdGggLSAoTnVtYmVyKHBhZGRpbmdMZWZ0LnJlcGxhY2UoJ3B4JywgJycpKSB8fCAwKSAtIChOdW1iZXIocGFkZGluZ1JpZ2h0LnJlcGxhY2UoJ3B4JywgJycpKSB8fCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgdHh0V2lkdGggPSB0aGlzLmNvbW1vblV0aWxzLmdldFRleHRXaWR0aCh0aGlzLnZhbHVlLCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQpLmZvbnQpO1xyXG4gICAgICAgIGlmIChfd2lkdGggJiYgX3dpZHRoIDwgdHh0V2lkdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UHJlY2lzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5wcmVjaXNpb24gfHwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9GaXhlZChuOiBCaWdOdW1iZXIgfCBudW1iZXIpIHtcclxuICAgICAgICBsZXQgX24gPSBuO1xyXG4gICAgICAgIGlmICghQmlnTnVtYmVyLmlzQmlnTnVtYmVyKG4pKSB7XHJcbiAgICAgICAgICAgIF9uID0gbmV3IEJpZ051bWJlcihuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByZWNpc2lvbiAhPT0gbnVsbCAmJiB0aGlzLnByZWNpc2lvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuLnRvRml4ZWQodGhpcy5fZ2V0UHJlY2lzaW9uKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbi50b0ZpeGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFJlYWxWYWx1ZShfbjogQmlnTnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudG9GaXhlZChfbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmlnTnVtYmVyID8gbiA6IE51bWJlcihuKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZWFsVmFsdWUodmFsOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJzZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodmFsKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIodmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9uID0gdGhpcy52YWxpZEludGVydmFsKG5ldyBCaWdOdW1iZXIodmFsKSk7XHJcbiAgICAgICAgaWYgKF9uLmlzTmFOKCkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbk51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluQmlnTnVtID0gbmV3IEJpZ051bWJlcignJyArIHRoaXMubWluKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heEJpZ051bSA9IG5ldyBCaWdOdW1iZXIoJycgKyB0aGlzLm1heCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtaW5CaWdOdW0uaXNOYU4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9uID0gbWluQmlnTnVtO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbWF4QmlnTnVtLmlzTmFOKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfbiA9IG1heEJpZ051bTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmNhbk51bGwgfHwgbWluQmlnTnVtLmlzTmFOKCkpIHtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgX24gPSBtaW5CaWdOdW07XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZWFsVmFsdWUoX24pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRGb3JtYXRPcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByZWZpeDogdGhpcy5wcmVmaXgsXHJcbiAgICAgICAgICAgIHN1ZmZpeDogdGhpcy5zdWZmaXgsXHJcbiAgICAgICAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IHRoaXMuZGVjaW1hbFNlcGFyYXRvcixcclxuICAgICAgICAgICAgZ3JvdXBTZXBhcmF0b3I6IHRoaXMudXNlVGhvdXNhbmRzID8gdGhpcy5ncm91cFNlcGFyYXRvciA6ICcnLFxyXG4gICAgICAgICAgICBncm91cFNpemU6IHRoaXMuZ3JvdXBTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VtcHR5KHZhbDogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGlzTmFOKHZhbCkgfHwgdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRJbnRlcnZhbChibjogQmlnTnVtYmVyLCBlbWl0ID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBfYm5WYWwgPSBibjtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRW1wdHkodGhpcy5tYXgpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9tYXhCaWdOdW0gPSBuZXcgQmlnTnVtYmVyKCcnICsgdGhpcy5tYXgpO1xyXG4gICAgICAgICAgICBpZiAoYm4uZ3QoX21heEJpZ051bSkgKSB7XHJcbiAgICAgICAgICAgICAgICBfYm5WYWwgPSBfbWF4QmlnTnVtO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgX3JlYWxWYWx1ZSA9IHRoaXMuX2dldFJlYWxWYWx1ZShfbWF4QmlnTnVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kZWxDaGFuZ2VkKF9yZWFsVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNFbXB0eSh0aGlzLm1pbikpIHtcclxuICAgICAgICAgICAgY29uc3QgX21pbkJpZ051bSA9IG5ldyBCaWdOdW1iZXIoJycgKyB0aGlzLm1pbik7XHJcbiAgICAgICAgICAgIGlmIChibi5sdChfbWluQmlnTnVtKSkge1xyXG4gICAgICAgICAgICAgICAgX2JuVmFsID0gX21pbkJpZ051bTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9yZWFsVmFsdWUgPSB0aGlzLl9nZXRSZWFsVmFsdWUoX21pbkJpZ051bSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vZGVsQ2hhbmdlZChfcmVhbFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIF9iblZhbDtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXQodmFsOiBhbnksIGVtaXQgPSB0cnVlKSB7XHJcbiAgICAgICAgdmFsID0gdGhpcy5jbGVhbk51bVN0cmluZyh2YWwpO1xyXG4gICAgICAgIGNvbnN0IGJpZ1ZhbCA9IG5ldyBCaWdOdW1iZXIodmFsKTtcclxuICAgICAgICBsZXQgX2JnTnVtID0gYmlnVmFsO1xyXG4gICAgICAgIGlmIChlbWl0KSB7XHJcbiAgICAgICAgICAgIF9iZ051bSA9IHRoaXMudmFsaWRJbnRlcnZhbChiaWdWYWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKF9iZ051bS52YWx1ZU9mKCkgPT0gJzAnICYmICF0aGlzLnNob3daZXJvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhbk51bGwgJiYgYmlnVmFsLmlzTmFOKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChfYmdOdW0uaXNOYU4oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5mb3JtYXR0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0dGVyKF9iZ051bS50b051bWJlcigpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLmZvcm1hdE9wdGlvbnMpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRPcHRpb25zID0gdGhpcy5idWlsZEZvcm1hdE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RvRm9ybWF0KF9iZ051bSwgdGhpcy5mb3JtYXRPcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RvRm9ybWF0KF9iZ051bTogQmlnTnVtYmVyLCBmbXQ6IE51bWJlckZvcm1hdHRlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnByZWNpc2lvbiAhPT0gbnVsbCAmJiB0aGlzLnByZWNpc2lvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfYmdOdW0udG9Gb3JtYXQodGhpcy5fZ2V0UHJlY2lzaW9uKCksIGZtdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9iZ051bS50b0Zvcm1hdChmbXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhbk51bVN0cmluZyh2YWw6IGFueSkge1xyXG4gICAgICAgIHZhbCA9ICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQgfHwgdmFsID09PSAnJykgPyAnJyA6IFN0cmluZyh2YWwpO1xyXG4gICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5wcmVmaXgsICdnJyksICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5zdWZmaXgsICdnJyksICcnKS5yZXBsYWNlKC9cXCwvZywgJycpO1xyXG4gICAgICAgIGlmICh0aGlzLmdyb3VwU2VwYXJhdG9yICYmIHRoaXMuZ3JvdXBTZXBhcmF0b3IgIT09ICcsJykge1xyXG4gICAgICAgICAgICB2YWwgPSB2YWwucmVwbGFjZShuZXcgUmVnRXhwKGBcXFxcJHt0aGlzLmdyb3VwU2VwYXJhdG9yfWAsICdnJyksICcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRlY2ltYWxTZXBhcmF0b3IgJiYgdGhpcy5kZWNpbWFsU2VwYXJhdG9yICE9PSAnLicpIHtcclxuICAgICAgICAgICAgdmFsID0gdmFsLnJlcGxhY2UobmV3IFJlZ0V4cChgXFxcXCR7dGhpcy5kZWNpbWFsU2VwYXJhdG9yfWAsICdnJyksICcuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVmFsdWUodmFsKSB7XHJcbiAgICAgICAgdmFsID0gdGhpcy5jbGVhbk51bVN0cmluZyh2YWwpO1xyXG4gICAgICAgIHRoaXMuX3JlYWxWYWx1ZSA9IHRoaXMuZ2V0UmVhbFZhbHVlKHZhbCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZm9ybWF0KHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDb250cm9sVmFsdWUoKSB7XHJcbiAgICAgICAgbGV0IF92YWwgPSB0aGlzLmNsZWFuTnVtU3RyaW5nKHRoaXMudmFsdWUpO1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnNlcikge1xyXG4gICAgICAgICAgICBfdmFsID0gdGhpcy5wYXJzZXIodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KHRoaXMuX3JlYWxWYWx1ZSkgJiYgdGhpcy5pc0VtcHR5KF92YWwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJ2ID0gbmV3IEJpZ051bWJlcih0aGlzLl9yZWFsVmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGN2ID0gbmV3IEJpZ051bWJlcihfdmFsKTsgLy8gZGlzcGxheSB2YWx1ZVxyXG5cclxuICAgICAgICBpZiAocnYuaXNOYU4oKSAmJiBjdi5pc05hTigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmICghcnYuZXEoY3YpKSB7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fbmdDb250cm9sICkge1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtZ3JvdXAgPSAgdGhpcy5fbmdDb250cm9sWydmb3JtRGlyZWN0aXZlJ107XHJcbiAgICAgICAgICAgIGlmIChmb3JtZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdHJsID0gZm9ybWdyb3VwLmNvbnRyb2wuZ2V0KHRoaXMuX25nQ29udHJvbC5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWN0cmwgJiYgZm9ybWdyb3VwLmNvbnRyb2wuY29udHJvbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHJsID0gZm9ybWdyb3VwLmNvbnRyb2wuY29udHJvbHNbdGhpcy5fbmdDb250cm9sLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdHJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwudmFsdWUgIT09IHRoaXMuX3JlYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldFZhbHVlKHRoaXMuX3JlYWxWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlVmFsdWUodmFsOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yZWFsVmFsdWUgPSB2YWw7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZm9ybWF0KHRoaXMuX3JlYWxWYWx1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZENhbGxiYWNrID0gZm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==