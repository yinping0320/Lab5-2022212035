/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { BigNumber } from 'bignumber.js';
import { Component, forwardRef, Input, Output, ViewChild, ElementRef, EventEmitter } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { NumberSpinnerComponent } from './number-spinner.component';
import { PopoverDirective } from '@farris/ui-popover';
export class NumberRangeComponent extends NumberSpinnerComponent {
    constructor() {
        super(...arguments);
        this.beginPlaceHolder = '';
        this.endPlaceHolder = '';
        this.separator = '~';
        this.__value = '';
        this.beginValueChange = new EventEmitter();
        this.endValueChange = new EventEmitter();
        /* 开始数字展示值 */
        this.prevValue = '';
        /* 结束数字展示值 */
        this.nextValue = '';
        this._beginValue = '';
        this._endValue = '';
        this.focusState = {
            isFocus: false,
            target: '' // begin | end
        };
        //#endregion
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set beginValue(value) {
        this.prevValue = this.format(value);
        // 开始真实数值
        this._beginValue = this.isEmpty(value) ? '' : value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set endValue(value) {
        this.nextValue = this.format(value);
        // 结束真实数值
        this._endValue = this.isEmpty(value) ? '' : value;
    }
    /**
     * @return {?}
     */
    get value() {
        return this.__value;
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set value(v) {
        if (v !== this.__value) {
            this.__value = v === '~' ? '' : v;
        }
    }
    /**
     * @return {?}
     */
    get preNumValue() {
        /** @type {?} */
        const v = this.getRealValue(this.parser ? this.prevValue : this._beginValue);
        if (this.canNull && this.isEmpty(v)) {
            return '';
        }
        else {
            return v || 0;
        }
    }
    /**
     * @return {?}
     */
    get nextNumValue() {
        /** @type {?} */
        const v = this.getRealValue(this.parser ? this.nextValue : this._endValue);
        if (this.canNull && this.isEmpty(v)) {
            return '';
        }
        else {
            return v || 0;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.showButton = false;
        this.initPlaceHolderInfo();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.documentClick = this.render.listen(document, 'click', (/**
         * @param {?} e
         * @return {?}
         */
        e => {
            this.render.setStyle(this.prevWrapper.nativeElement, 'flex', 1);
            this.render.setStyle(this.nextWrapper.nativeElement, 'flex', 1);
        }));
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        super.ngOnChanges(changes);
        if (changes.value && !changes.value.isFirstChange()) {
            this.setValue(changes.value.currentValue);
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.documentClick) {
            this.documentClick();
        }
    }
    /**
     * @private
     * @return {?}
     */
    initPlaceHolderInfo() {
        if (!this.beginPlaceHolder) {
            this.beginPlaceHolder = this.localeService.getValue('numberSpinner.range.begin') || this.placeholder;
        }
        if (!this.endPlaceHolder) {
            this.endPlaceHolder = this.localeService.getValue('numberSpinner.range.end') || this.placeholder;
        }
    }
    /**
     * @private
     * @return {?}
     */
    getRangeValue() {
        return this.preNumValue + this.separator + this.nextNumValue;
    }
    /**
     * @private
     * @return {?}
     */
    getEndValue() {
        return this.getRealValue(this.nextValue);
    }
    /**
     * @private
     * @return {?}
     */
    getBeginValue() {
        return this.getRealValue(this.prevValue);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    getRealValue(val) {
        if (this.parser) {
            return this.parser(val);
        }
        /** @type {?} */
        let _n = this.validInterval(new BigNumber(val), false);
        if (_n.isNaN()) {
            /** @type {?} */
            const minBigNum = new BigNumber('' + this.min);
            if (this.canNull || minBigNum.isNaN()) {
                return null;
            }
            else {
                _n = minBigNum;
            }
        }
        return (/** @type {?} */ (this._getRealValue(_n)));
    }
    /**
     * @param {?} val
     * @param {?=} type
     * @return {?}
     */
    onModelChange(val, type) {
        if (type === 'begin') {
            this._beginValue = val;
        }
        else if (type === 'end') {
            this._endValue = val;
        }
        this.value = this.getRangeValue();
        this.onChangeCallback(this.value);
        this.onTouchedCallback();
        this.valueChange.emit(this.value);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    onClick($event) {
        $event.stopPropagation();
    }
    /**
     * @param {?} e
     * @param {?} type
     * @return {?}
     */
    onBlur(e, type) {
        if (!this.readonly && !this.disabled) {
            /** @type {?} */
            const tmpValue = e.value;
            this.focusState = { isFocus: false, target: type };
            if (type === 'begin') {
                /** @type {?} */
                const nextVal = this.getEndValue();
                /** @type {?} */
                const minValue = this.isEmpty(tmpValue)
                    ? ''
                    : this.isEmpty(nextVal)
                        ? tmpValue
                        : BigNumber.min(tmpValue, nextVal).toFixed();
                // this.prevValue = this.format(minValue);
                this.beginValue = this.validInterval(new BigNumber(minValue), false).toFixed();
                // this.beginValue = this.getRealValue(this.prevValue);
                this.inputPrev.nativeElement.value = this.prevValue;
                this.onModelChange(this._beginValue, type);
            }
            else {
                /** @type {?} */
                const beginVal = this.getBeginValue();
                /** @type {?} */
                const maxValue = this.isEmpty(tmpValue)
                    ? ''
                    : this.isEmpty(beginVal)
                        ? tmpValue
                        : BigNumber.max(tmpValue, beginVal).toFixed();
                // this.nextValue = this.format(maxValue);
                // this.endValue = this.getRealValue(this.nextValue);
                this.endValue = this.validInterval(new BigNumber(maxValue), false).toFixed();
                this.inputNext.nativeElement.value = this.nextValue;
                this.onModelChange(this._endValue, type);
            }
        }
        this.valueChange.emit(this.value);
        if (type === 'begin') {
            this.beginValueChange.emit(this.preNumValue);
        }
        else {
            this.endValueChange.emit(this.nextNumValue);
        }
        this.blur.emit();
    }
    /**
     * @param {?=} type
     * @return {?}
     */
    onFocus(type) {
        if (!this.readonly && !this.disabled) {
            this.focusState = { isFocus: true, target: type };
            if (type === 'begin') {
                this.inputPrev.nativeElement.value = this._beginValue;
                this.inputPrev.nativeElement.setSelectionRange(0, this._beginValue.length);
                this.expendWidth('begin', 3);
            }
            else {
                this.inputNext.nativeElement.value = this._endValue;
                this.inputNext.nativeElement.setSelectionRange(0, this._endValue.length);
                this.expendWidth('end', 3);
            }
        }
        this.focus.emit(type);
    }
    /**
     * @param {?} which
     * @param {?} num
     * @return {?}
     */
    expendWidth(which, num) {
        /** @type {?} */
        let target;
        /** @type {?} */
        let other;
        if (which === 'begin') {
            target = this.prevWrapper.nativeElement;
            other = this.nextWrapper.nativeElement;
        }
        else {
            target = this.nextWrapper.nativeElement;
            other = this.prevWrapper.nativeElement;
        }
        const { width } = target.getBoundingClientRect();
        if (width < 150) {
            this.render.setStyle(target, 'flex', num);
            this.render.setStyle(other, 'flex', 1);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseEnter(event) {
        this.isActiveTip = this.isShowPopover();
        if (this.nextValue && this.prevValue) {
            this.popValue = this.prevValue + '~' + this.nextValue;
        }
        else {
            this.popValue = '';
        }
    }
    /**
     * @return {?}
     */
    isShowPopover() {
        const { width } = this.el.nativeElement.getBoundingClientRect();
        if (width && width < 200) {
            return true;
        }
        return false;
    }
    /**
     * @param {?} $event
     * @param {?} typ
     * @return {?}
     */
    onKeyDownRange($event, typ) {
        if ($event.key === 'ArrowDown') {
            $event.preventDefault();
            this.down($event, typ);
        }
        if ($event.key === 'ArrowUp') {
            $event.preventDefault();
            this.up($event, typ);
        }
        $event.stopPropagation();
    }
    /**
     * @param {?} val
     * @return {?}
     */
    writeValue(val) {
        this.setValue(val);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    setValue(val) {
        if (typeof val === 'string') {
            /** @type {?} */
            const valArr = val.split(this.separator);
            this._beginValue = valArr[0] ? valArr[0] : '';
            this._endValue = valArr[1] ? valArr[1] : '';
        }
        else {
            this._beginValue = '';
            this._beginValue = '';
        }
        this.prevValue = this.format(this._beginValue);
        this.nextValue = this.format(this._endValue);
    }
    //#region 上下操作按钮 或 上下方向键
    /**
     * @param {?} e
     * @param {?} type
     * @return {?}
     */
    up(e, type) {
        e.stopPropagation();
        this._compute(type, 'up', ((/** @type {?} */ (e.target))).value);
    }
    /**
     * @param {?} e
     * @param {?} type
     * @return {?}
     */
    down(e, type) {
        e.stopPropagation();
        this._compute(type, 'down', ((/** @type {?} */ (e.target))).value);
    }
    /**
     * @private
     * @param {?} type
     * @param {?} dir
     * @param {?} tagVal
     * @return {?}
     */
    _compute(type, dir, tagVal) {
        /** @type {?} */
        const m = dir === 'up' ? 'plus' : 'minus';
        // if (type === 'begin' && this.isDisableOfBtn(dir, this.prevValue)) {
        //     const bv = tagVal || 0;
        //     const ev = this.getRealValue(this.nextValue);
        //     const r = new BigNumber(bv)[m](Number(this.step));
        //     let v = r.toFixed();
        //     const minValue = BigNumber.min(v, ev);
        //     if (!minValue.eq(v) && !this.isEmpty(ev)) {
        //         v = ev;
        //     }
        //     this._beginValue = v;
        //     // this.prevValue = this.format(v);
        //     this.inputPrev.nativeElement.value = v;
        //     this.onModelChange(v, type);
        //     this.beginValueChange.emit(v);
        // } else if (type === 'end' && this.isDisableOfBtn(dir, this.nextValue)) {
        //     const bv = this.getRealValue(this.prevValue);
        //     const ev = tagVal || 0;
        //     const r = new BigNumber(ev)[m](Number(this.step));
        //     let v = r.toFixed();
        //     const maxValue = BigNumber.max(bv, v);
        //     if (!maxValue.eq(v) && !this.isEmpty(bv)) {
        //         v = bv;
        //     }
        //     this._endValue = v;
        //     // this.nextValue = this.format(v);
        //     this.inputNext.nativeElement.value = v;
        //     this.onModelChange(v, type);
        //     this.endValueChange.emit(v);
        // }
        if (type === 'begin' && this.isDisableOfBtn(dir, this.prevValue)) {
            /** @type {?} */
            const tmpValue = this.inputPrev.nativeElement.value;
            /** @type {?} */
            const nextVal = this.getEndValue();
            /** @type {?} */
            const bv = this.cleanNumString(tmpValue) || 0;
            /** @type {?} */
            const r = new BigNumber(bv)[m](Number(this.step));
            /** @type {?} */
            let v = r.toFixed();
            /** @type {?} */
            const minValue = this.isEmpty(v)
                ? ''
                : this.isEmpty(nextVal)
                    ? v
                    : BigNumber.min(v, nextVal).toFixed();
            this.beginValue = this.validInterval(new BigNumber(minValue), false).toFixed();
            this.inputPrev.nativeElement.value = this.prevValue;
            this.onModelChange(this._beginValue, type);
            this.beginValueChange.emit(this._beginValue);
        }
        else if (type === 'end' && this.isDisableOfBtn(dir, this.nextValue)) {
            /** @type {?} */
            const tmpValue = this.inputNext.nativeElement.value;
            /** @type {?} */
            const beginVal = this.getBeginValue();
            /** @type {?} */
            const bv = this.cleanNumString(tmpValue) || 0;
            /** @type {?} */
            const r = new BigNumber(bv)[m](Number(this.step));
            /** @type {?} */
            let v = r.toFixed();
            /** @type {?} */
            const maxValue = this.isEmpty(v)
                ? ''
                : this.isEmpty(beginVal)
                    ? v
                    : BigNumber.max(v, beginVal).toFixed();
            this.endValue = this.validInterval(new BigNumber(maxValue), false).toFixed();
            this.inputNext.nativeElement.value = this.nextValue;
            this.onModelChange(this._endValue, type);
            this.endValueChange.emit(this._endValue);
        }
        this.valueChange.emit(this.value);
        this.expendWidth(type, 3);
    }
}
NumberRangeComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-number-range',
                template: "<div\r\n    class=\"input-group number-range f-cmp-number-spinner\"\r\n    [ngClass]=\"{\r\n        'f-state-disabled': disabled,\r\n        'f-state-readonly': readonly\r\n    }\"\r\n    (click)=\"$event.stopPropagation()\" (mouseenter)=\"onMouseEnter($event)\"\r\n>\r\n    <div class=\"form-control input-container\"\r\n        #popover=\"bs-popover\"\r\n        farrisPopover\r\n        [popover]=\"popValue\"\r\n        [triggers]=\"'hover'\"\r\n        [popActive]=\"isActiveTip\"\r\n        [showAction]=\"'show2'\"\r\n        [container]=\"'body'\"\r\n    >\r\n        <div class=\"sub-input-group\" #prevWrapper>\r\n            <input\r\n                type=\"text\"\r\n                number-only\r\n                [precision]=\"precision\"\r\n                autocomplete=\"off\"\r\n                class=\"sub-input form-control f-state-focus f-state-hover\"\r\n                [(ngModel)]=\"prevValue\"\r\n                #inputPrev\r\n                (blur)=\"onBlur(inputPrev, 'begin')\"\r\n                (focus)=\"onFocus('begin')\"\r\n                (ngModelChange)=\"onModelChange($event, 'begin')\"\r\n                [placeholder]=\"disabled || readonly ?'':beginPlaceHolder\"\r\n                [readOnly]=\"disabled || readonly ? 'readonly' : ''\"\r\n                [style.text-align]=\"textAlign\"\r\n                (keydown)=\"onKeyDownRange($event, 'begin')\"\r\n                (click)=\"onClick($event)\"\r\n            />\r\n            <div class=\"input-group-append btn-group btn-group-number sub-btn-group\" *ngIf=\"!readonly && !disabled && showButton\">\r\n                <span class=\"icon k-i-arrow-chevron-up number-arrow-chevron\" [style.cursor]=\"isDisableOfBtn('up', prevValue) ? 'pointer' : 'not-allowed'\"\r\n                    (click)=\"up($event, 'begin')\"></span>\r\n                <span class=\"icon k-i-arrow-chevron-down number-arrow-chevron\" [style.cursor]=\"isDisableOfBtn('down', prevValue) ? 'pointer' : 'not-allowed'\"\r\n                    (click)=\"down($event, 'begin')\"></span>\r\n            </div>\r\n        </div>\r\n        <span class=\"spliter\">~</span>\r\n        <div class=\"sub-input-group\" #nextWrapper>\r\n            <input\r\n                type=\"text\"\r\n                number-only\r\n                [precision]=\"precision\"\r\n                autocomplete=\"off\"\r\n                class=\"sub-input form-control f-state-focus f-state-hover\"\r\n                [(ngModel)]=\"nextValue\"\r\n                #inputNext\r\n                (blur)=\"onBlur(inputNext, 'end')\"\r\n                (focus)=\"onFocus('end')\"\r\n                (ngModelChange)=\"onModelChange($event, 'end')\"\r\n                [placeholder]=\"disabled || readonly ?'':endPlaceHolder\"\r\n                [readOnly]=\"disabled || readonly ? 'readonly' : ''\"\r\n                [style.text-align]=\"textAlign\"\r\n                (keydown)=\"onKeyDownRange($event, 'end')\"\r\n                (click)=\"onClick($event)\"\r\n            />\r\n            <div class=\"input-group-append btn-group btn-group-number sub-btn-group\" *ngIf=\"!readonly && !disabled  && showButton\"[style.text-align]=\"textAlign\" style=\"border-right:0\">\r\n                    <span class=\"icon k-i-arrow-chevron-up number-arrow-chevron\"  [style.cursor]=\"isDisableOfBtn('up', nextValue) ? 'pointer' : 'not-allowed'\"\r\n                        (click)=\"up($event, 'end')\"></span>\r\n                    <span class=\"icon k-i-arrow-chevron-down number-arrow-chevron\"\r\n                        [style.cursor]=\"isDisableOfBtn('down', nextValue) ? 'pointer' : 'not-allowed'\"\r\n                        (click)=\"down($event, 'end')\"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => NumberRangeComponent)),
                        multi: true
                    }
                ],
                styles: [".input-group .btn-group-number{height:1.50003rem;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;background-color:#fff;border-left:1px solid #d9d9d9;width:1.50003rem}.input-group .btn-group-number .number-arrow-chevron{-webkit-box-flex:1;flex:1;line-height:1;height:50%;text-align:center}.input-group .btn-group-number .number-arrow-chevron:active{background-color:#e6e9f0}.input-group .btn-group-number .number-arrow-chevron:nth-child(2){border-top:1px solid #d9d9d9}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none!important;margin:0}.number-range{position:relative}.number-range .input-container{display:-webkit-box;display:flex;padding:0}.number-range .input-container .sub-input-group{-webkit-box-flex:1;flex:1;position:relative;display:-webkit-box;display:flex;-webkit-transition:.3s ease-out;transition:.3s ease-out}.number-range .input-container .sub-input-group .sub-input{width:100%;border:none;outline:0;background-color:rgba(0,0,0,0);min-width:2px;padding:.125rem 4px .125rem .5rem}.number-range .input-container .spliter{width:15px;text-align:center}"]
            }] }
];
NumberRangeComponent.propDecorators = {
    beginPlaceHolder: [{ type: Input }],
    endPlaceHolder: [{ type: Input }],
    inputPrev: [{ type: ViewChild, args: ['inputPrev',] }],
    inputNext: [{ type: ViewChild, args: ['inputNext',] }],
    prevWrapper: [{ type: ViewChild, args: ['prevWrapper',] }],
    nextWrapper: [{ type: ViewChild, args: ['nextWrapper',] }],
    popover: [{ type: ViewChild, args: ['popover',] }],
    separator: [{ type: Input }],
    beginValue: [{ type: Input }],
    endValue: [{ type: Input }],
    value: [{ type: Input }],
    beginValueChange: [{ type: Output }],
    endValueChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    NumberRangeComponent.prototype.beginPlaceHolder;
    /** @type {?} */
    NumberRangeComponent.prototype.endPlaceHolder;
    /** @type {?} */
    NumberRangeComponent.prototype.inputPrev;
    /** @type {?} */
    NumberRangeComponent.prototype.inputNext;
    /** @type {?} */
    NumberRangeComponent.prototype.prevWrapper;
    /** @type {?} */
    NumberRangeComponent.prototype.nextWrapper;
    /** @type {?} */
    NumberRangeComponent.prototype.popover;
    /** @type {?} */
    NumberRangeComponent.prototype.separator;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype.__value;
    /** @type {?} */
    NumberRangeComponent.prototype.beginValueChange;
    /** @type {?} */
    NumberRangeComponent.prototype.endValueChange;
    /** @type {?} */
    NumberRangeComponent.prototype.prevValue;
    /** @type {?} */
    NumberRangeComponent.prototype.nextValue;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype._beginValue;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype._endValue;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype.documentClick;
    /**
     * @type {?}
     * @private
     */
    NumberRangeComponent.prototype.focusState;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVyLXJhbmdlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvdWktbnVtYmVyLXNwaW5uZXIvIiwic291cmNlcyI6WyJsaWIvbnVtYmVyLXJhbmdlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUV6QyxPQUFPLEVBQ0gsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUNyQixTQUFTLEVBQUUsVUFBVSxFQUNwQyxZQUFZLEVBR2YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFjdEQsTUFBTSxPQUFPLG9CQUFxQixTQUFRLHNCQUFzQjtJQVpoRTs7UUFjYSxxQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFDdEIsbUJBQWMsR0FBRyxFQUFFLENBQUM7UUFRcEIsY0FBUyxHQUFHLEdBQUcsQ0FBQztRQWdCakIsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQVlYLHFCQUFnQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDdEMsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDOztRQUc5QyxjQUFTLEdBQVEsRUFBRSxDQUFDOztRQUVwQixjQUFTLEdBQVEsRUFBRSxDQUFDO1FBRVosZ0JBQVcsR0FBRyxFQUFFLENBQUM7UUFDakIsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQW9CZixlQUFVLEdBQUc7WUFDakIsT0FBTyxFQUFFLEtBQUs7WUFDZCxNQUFNLEVBQUUsRUFBRSxDQUFJLGNBQWM7U0FDL0IsQ0FBQztRQWdTRixZQUFZO0lBRWhCLENBQUM7Ozs7O0lBNVZHLElBQ0ksVUFBVSxDQUFDLEtB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O0lBQzlDLDJDQUFrRDs7SUFDbEQsMkNBQWtEOztJQUNsRCx1Q0FBZ0Q7O0lBRWhELHlDQUF5Qjs7Ozs7SUFnQnpCLHVDQUFxQjs7SUFZckIsZ0RBQWdEOztJQUNoRCw4Q0FBOEM7O0lBRzlDLHlDQUFvQjs7SUFFcEIseUNBQW9COzs7OztJQUVwQiwyQ0FBeUI7Ozs7O0lBQ3pCLHlDQUF1Qjs7Ozs7SUFtQnZCLDZDQUFzQjs7Ozs7SUFDdEIsMENBR0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdiaWdudW1iZXIuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIENvbXBvbmVudCwgZm9yd2FyZFJlZiwgSW5wdXQsIE91dHB1dCxcclxuICAgIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT25EZXN0cm95LCBTaW1wbGVDaGFuZ2VzLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgT25Jbml0LFxyXG4gICAgT25DaGFuZ2VzXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBOdW1iZXJTcGlubmVyQ29tcG9uZW50IH0gZnJvbSAnLi9udW1iZXItc3Bpbm5lci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQb3BvdmVyRGlyZWN0aXZlIH0gZnJvbSAnQGZhcnJpcy91aS1wb3BvdmVyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtbnVtYmVyLXJhbmdlJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi9udW1iZXItcmFuZ2UuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vbnVtYmVyLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOdW1iZXJSYW5nZUNvbXBvbmVudCksXHJcbiAgICAgICAgICAgIG11bHRpOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTnVtYmVyUmFuZ2VDb21wb25lbnQgZXh0ZW5kcyBOdW1iZXJTcGlubmVyQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcblxyXG4gICAgQElucHV0KCkgYmVnaW5QbGFjZUhvbGRlciA9ICcnO1xyXG4gICAgQElucHV0KCkgZW5kUGxhY2VIb2xkZXIgPSAnJztcclxuXHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dFByZXYnKSBpbnB1dFByZXY6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdpbnB1dE5leHQnKSBpbnB1dE5leHQ6IEVsZW1lbnRSZWY7XHJcbiAgICBAVmlld0NoaWxkKCdwcmV2V3JhcHBlcicpIHByZXZXcmFwcGVyOiBFbGVtZW50UmVmO1xyXG4gICAgQFZpZXdDaGlsZCgnbmV4dFdyYXBwZXInKSBuZXh0V3JhcHBlcjogRWxlbWVudFJlZjtcclxuICAgIEBWaWV3Q2hpbGQoJ3BvcG92ZXInKSBwb3BvdmVyOiBQb3BvdmVyRGlyZWN0aXZlO1xyXG5cclxuICAgIEBJbnB1dCgpIHNlcGFyYXRvciA9ICd+JztcclxuXHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2V0IGJlZ2luVmFsdWUodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnByZXZWYWx1ZSA9IHRoaXMuZm9ybWF0KHZhbHVlKTtcclxuICAgICAgICAvLyDlvIDlp4vnnJ/lrp7mlbDlgLxcclxuICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdGhpcy5pc0VtcHR5KHZhbHVlKSA/ICcnIDogdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgQElucHV0KClcclxuICAgIHNldCBlbmRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubmV4dFZhbHVlID0gdGhpcy5mb3JtYXQodmFsdWUpO1xyXG4gICAgICAgIC8vIOe7k+adn+ecn+WunuaVsOWAvFxyXG4gICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdGhpcy5pc0VtcHR5KHZhbHVlKSA/ICcnIDogdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfX3ZhbHVlID0gJyc7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgZ2V0IHZhbHVlKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX192YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdmFsdWUodjogYW55KSB7XHJcbiAgICAgICAgaWYgKHYgIT09IHRoaXMuX192YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9fdmFsdWUgPSB2ID09PSAnficgPyAnJyA6IHY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEBPdXRwdXQoKSBiZWdpblZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIGVuZFZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAgIC8qIOW8gOWni+aVsOWtl+WxleekuuWAvCAqL1xyXG4gICAgcHJldlZhbHVlOiBhbnkgPSAnJztcclxuICAgIC8qIOe7k+adn+aVsOWtl+WxleekuuWAvCAqL1xyXG4gICAgbmV4dFZhbHVlOiBhbnkgPSAnJztcclxuXHJcbiAgICBwcml2YXRlIF9iZWdpblZhbHVlID0gJyc7XHJcbiAgICBwcml2YXRlIF9lbmRWYWx1ZSA9ICcnO1xyXG4gICAgZ2V0IHByZU51bVZhbHVlKCkge1xyXG4gICAgICAgIGNvbnN0IHYgPSB0aGlzLmdldFJlYWxWYWx1ZSh0aGlzLnBhcnNlciA/IHRoaXMucHJldlZhbHVlIDogdGhpcy5fYmVnaW5WYWx1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuTnVsbCAmJiB0aGlzLmlzRW1wdHkodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2IHx8IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBuZXh0TnVtVmFsdWUoKSB7XHJcbiAgICAgICAgY29uc3QgdiA9IHRoaXMuZ2V0UmVhbFZhbHVlKHRoaXMucGFyc2VyID8gdGhpcy5uZXh0VmFsdWUgOiB0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuTnVsbCAmJiB0aGlzLmlzRW1wdHkodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2IHx8IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZG9jdW1lbnRDbGljaztcclxuICAgIHByaXZhdGUgZm9jdXNTdGF0ZSA9IHtcclxuICAgICAgICBpc0ZvY3VzOiBmYWxzZSxcclxuICAgICAgICB0YXJnZXQ6ICcnICAgIC8vIGJlZ2luIHwgZW5kXHJcbiAgICB9O1xyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLm5nT25Jbml0KCk7XHJcbiAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdFBsYWNlSG9sZGVySW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2xpY2sgPSB0aGlzLnJlbmRlci5saXN0ZW4oZG9jdW1lbnQsICdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZSh0aGlzLnByZXZXcmFwcGVyLm5hdGl2ZUVsZW1lbnQsICdmbGV4JywgMSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRoaXMubmV4dFdyYXBwZXIubmF0aXZlRWxlbWVudCwgJ2ZsZXgnLCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIubmdPbkNoYW5nZXMoY2hhbmdlcyk7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMudmFsdWUgJiYgIWNoYW5nZXMudmFsdWUuaXNGaXJzdENoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoY2hhbmdlcy52YWx1ZS5jdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpIHtcclxuICAgICAgICBpZiAodGhpcy5kb2N1bWVudENsaWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRQbGFjZUhvbGRlckluZm8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJlZ2luUGxhY2VIb2xkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblBsYWNlSG9sZGVyID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdudW1iZXJTcGlubmVyLnJhbmdlLmJlZ2luJykgfHwgdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmVuZFBsYWNlSG9sZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kUGxhY2VIb2xkZXIgPSAgdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdudW1iZXJTcGlubmVyLnJhbmdlLmVuZCcpIHx8IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmFuZ2VWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcmVOdW1WYWx1ZSArIHRoaXMuc2VwYXJhdG9yICsgdGhpcy5uZXh0TnVtVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFbmRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZWFsVmFsdWUodGhpcy5uZXh0VmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRCZWdpblZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlYWxWYWx1ZSh0aGlzLnByZXZWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVhbFZhbHVlKHZhbDogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlcih2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgX24gPSB0aGlzLnZhbGlkSW50ZXJ2YWwobmV3IEJpZ051bWJlcih2YWwpLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKF9uLmlzTmFOKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbWluQmlnTnVtID0gbmV3IEJpZ051bWJlcignJyArIHRoaXMubWluKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FuTnVsbCB8fCBtaW5CaWdOdW0uaXNOYU4oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfbiA9IG1pbkJpZ051bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlYWxWYWx1ZShfbikgYXMgYW55O1xyXG4gICAgfVxyXG5cclxuICAgIG9uTW9kZWxDaGFuZ2UodmFsLCB0eXBlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdiZWdpbicpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9IHZhbDtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdlbmQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5nZXRSYW5nZVZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMudmFsdWUpO1xyXG4gICAgICAgIHRoaXMub25Ub3VjaGVkQ2FsbGJhY2soKTtcclxuXHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2soJGV2ZW50KSB7XHJcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQmx1cihlOiBhbnksIHR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCB0bXBWYWx1ZSA9IGUudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IHsgaXNGb2N1czogZmFsc2UsIHRhcmdldDogdHlwZSB9O1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2JlZ2luJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFZhbCA9IHRoaXMuZ2V0RW5kVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblZhbHVlID0gdGhpcy5pc0VtcHR5KHRtcFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgID8gJydcclxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuaXNFbXB0eShuZXh0VmFsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRtcFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogQmlnTnVtYmVyLm1pbih0bXBWYWx1ZSwgbmV4dFZhbCkudG9GaXhlZCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5wcmV2VmFsdWUgPSB0aGlzLmZvcm1hdChtaW5WYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWUgPSB0aGlzLnZhbGlkSW50ZXJ2YWwobmV3IEJpZ051bWJlcihtaW5WYWx1ZSksIGZhbHNlKS50b0ZpeGVkKCk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmJlZ2luVmFsdWUgPSB0aGlzLmdldFJlYWxWYWx1ZSh0aGlzLnByZXZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0UHJldi5uYXRpdmVFbGVtZW50LnZhbHVlID0gdGhpcy5wcmV2VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodGhpcy5fYmVnaW5WYWx1ZSwgdHlwZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZWdpblZhbCA9IHRoaXMuZ2V0QmVnaW5WYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4VmFsdWUgPSB0aGlzLmlzRW1wdHkodG1wVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgPyAnJ1xyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5pc0VtcHR5KGJlZ2luVmFsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRtcFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogQmlnTnVtYmVyLm1heCh0bXBWYWx1ZSwgYmVnaW5WYWwpLnRvRml4ZWQoKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubmV4dFZhbHVlID0gdGhpcy5mb3JtYXQobWF4VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbmRWYWx1ZSA9IHRoaXMuZ2V0UmVhbFZhbHVlKHRoaXMubmV4dFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSB0aGlzLnZhbGlkSW50ZXJ2YWwobmV3IEJpZ051bWJlcihtYXhWYWx1ZSksIGZhbHNlKS50b0ZpeGVkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0TmV4dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gdGhpcy5uZXh0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UodGhpcy5fZW5kVmFsdWUsIHR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdiZWdpbicpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblZhbHVlQ2hhbmdlLmVtaXQodGhpcy5wcmVOdW1WYWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRWYWx1ZUNoYW5nZS5lbWl0KHRoaXMubmV4dE51bVZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYmx1ci5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Gb2N1cyh0eXBlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IHsgaXNGb2N1czogdHJ1ZSwgdGFyZ2V0OiB0eXBlIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYmVnaW4nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0UHJldi5uYXRpdmVFbGVtZW50LnZhbHVlID0gdGhpcy5fYmVnaW5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRQcmV2Lm5hdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5fYmVnaW5WYWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHBlbmRXaWR0aCgnYmVnaW4nLCAzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXROZXh0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB0aGlzLl9lbmRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXROZXh0Lm5hdGl2ZUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5fZW5kVmFsdWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwZW5kV2lkdGgoJ2VuZCcsIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZvY3VzLmVtaXQodHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwZW5kV2lkdGgod2hpY2g6IHN0cmluZywgbnVtOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0OiBFbGVtZW50O1xyXG4gICAgICAgIGxldCBvdGhlcjogRWxlbWVudDtcclxuICAgICAgICBpZiAod2hpY2ggPT09ICdiZWdpbicpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5wcmV2V3JhcHBlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBvdGhlciA9IHRoaXMubmV4dFdyYXBwZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0aGlzLm5leHRXcmFwcGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIG90aGVyID0gdGhpcy5wcmV2V3JhcHBlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHdpZHRoIH0gPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYgKHdpZHRoIDwgMTUwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyLnNldFN0eWxlKHRhcmdldCwgJ2ZsZXgnLCBudW0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlci5zZXRTdHlsZShvdGhlciwgJ2ZsZXgnLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZUVudGVyKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5pc0FjdGl2ZVRpcCA9IHRoaXMuaXNTaG93UG9wb3ZlcigpO1xyXG4gICAgICAgIGlmICh0aGlzLm5leHRWYWx1ZSAmJiB0aGlzLnByZXZWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBvcFZhbHVlID0gdGhpcy5wcmV2VmFsdWUgKyAnficgKyB0aGlzLm5leHRWYWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvcFZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzU2hvd1BvcG92ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgeyB3aWR0aCB9ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmICh3aWR0aCAmJiB3aWR0aCA8IDIwMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uS2V5RG93blJhbmdlKCRldmVudDogS2V5Ym9hcmRFdmVudCwgdHlwOiAnYmVnaW4nfCdlbmQnKSB7XHJcbiAgICAgICAgaWYgKCRldmVudC5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XHJcbiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRvd24oJGV2ZW50LCB0eXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRldmVudC5rZXkgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy51cCgkZXZlbnQsIHR5cCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVWYWx1ZSh2YWw6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZSh2YWw6IGFueSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjb25zdCB2YWxBcnIgPSB2YWwuc3BsaXQodGhpcy5zZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gdmFsQXJyWzBdID8gdmFsQXJyWzBdIDogJyc7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZFZhbHVlID0gdmFsQXJyWzFdID8gdmFsQXJyWzFdIDogJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYmVnaW5WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9iZWdpblZhbHVlID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJldlZhbHVlID0gdGhpcy5mb3JtYXQodGhpcy5fYmVnaW5WYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5uZXh0VmFsdWUgPSB0aGlzLmZvcm1hdCh0aGlzLl9lbmRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiDkuIrkuIvmk43kvZzmjInpkq4g5oiWIOS4iuS4i+aWueWQkemUrlxyXG4gICAgdXAoZTogRXZlbnQsIHR5cGU6IHN0cmluZykge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5fY29tcHV0ZSh0eXBlLCAndXAnLCAoZS50YXJnZXQgYXMgYW55KS52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZG93bihlOiBFdmVudCwgdHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB0aGlzLl9jb21wdXRlKHR5cGUsICdkb3duJywgKGUudGFyZ2V0IGFzIGFueSkudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NvbXB1dGUodHlwZTogc3RyaW5nLCBkaXI6ICd1cCcgfCAnZG93bicsIHRhZ1ZhbCkge1xyXG4gICAgICAgIGNvbnN0IG0gPSBkaXIgPT09ICd1cCcgPyAncGx1cycgOiAnbWludXMnO1xyXG4gICAgICAgIC8vIGlmICh0eXBlID09PSAnYmVnaW4nICYmIHRoaXMuaXNEaXNhYmxlT2ZCdG4oZGlyLCB0aGlzLnByZXZWYWx1ZSkpIHtcclxuICAgICAgICAvLyAgICAgY29uc3QgYnYgPSB0YWdWYWwgfHwgMDtcclxuICAgICAgICAvLyAgICAgY29uc3QgZXYgPSB0aGlzLmdldFJlYWxWYWx1ZSh0aGlzLm5leHRWYWx1ZSk7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHIgPSBuZXcgQmlnTnVtYmVyKGJ2KVttXShOdW1iZXIodGhpcy5zdGVwKSk7XHJcbiAgICAgICAgLy8gICAgIGxldCB2ID0gci50b0ZpeGVkKCk7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IG1pblZhbHVlID0gQmlnTnVtYmVyLm1pbih2LCBldik7XHJcbiAgICAgICAgLy8gICAgIGlmICghbWluVmFsdWUuZXEodikgJiYgIXRoaXMuaXNFbXB0eShldikpIHtcclxuICAgICAgICAvLyAgICAgICAgIHYgPSBldjtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICB0aGlzLl9iZWdpblZhbHVlID0gdjtcclxuICAgICAgICAvLyAgICAgLy8gdGhpcy5wcmV2VmFsdWUgPSB0aGlzLmZvcm1hdCh2KTtcclxuICAgICAgICAvLyAgICAgdGhpcy5pbnB1dFByZXYubmF0aXZlRWxlbWVudC52YWx1ZSA9IHY7XHJcbiAgICAgICAgLy8gICAgIHRoaXMub25Nb2RlbENoYW5nZSh2LCB0eXBlKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5iZWdpblZhbHVlQ2hhbmdlLmVtaXQodik7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmICh0eXBlID09PSAnZW5kJyAmJiB0aGlzLmlzRGlzYWJsZU9mQnRuKGRpciwgdGhpcy5uZXh0VmFsdWUpKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IGJ2ID0gdGhpcy5nZXRSZWFsVmFsdWUodGhpcy5wcmV2VmFsdWUpO1xyXG4gICAgICAgIC8vICAgICBjb25zdCBldiA9IHRhZ1ZhbCB8fCAwO1xyXG4gICAgICAgIC8vICAgICBjb25zdCByID0gbmV3IEJpZ051bWJlcihldilbbV0oTnVtYmVyKHRoaXMuc3RlcCkpO1xyXG4gICAgICAgIC8vICAgICBsZXQgdiA9IHIudG9GaXhlZCgpO1xyXG4gICAgICAgIC8vICAgICBjb25zdCBtYXhWYWx1ZSA9IEJpZ051bWJlci5tYXgoYnYsIHYpO1xyXG4gICAgICAgIC8vICAgICBpZiAoIW1heFZhbHVlLmVxKHYpICYmICF0aGlzLmlzRW1wdHkoYnYpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB2ID0gYnY7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgdGhpcy5fZW5kVmFsdWUgPSB2O1xyXG4gICAgICAgIC8vICAgICAvLyB0aGlzLm5leHRWYWx1ZSA9IHRoaXMuZm9ybWF0KHYpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlucHV0TmV4dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gdjtcclxuICAgICAgICAvLyAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHYsIHR5cGUpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmVuZFZhbHVlQ2hhbmdlLmVtaXQodik7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2JlZ2luJyAmJiB0aGlzLmlzRGlzYWJsZU9mQnRuKGRpciwgdGhpcy5wcmV2VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRtcFZhbHVlID0gdGhpcy5pbnB1dFByZXYubmF0aXZlRWxlbWVudC52YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dFZhbCA9IHRoaXMuZ2V0RW5kVmFsdWUoKTtcclxuICAgICAgICAgICAgY29uc3QgYnYgPSB0aGlzLmNsZWFuTnVtU3RyaW5nKHRtcFZhbHVlKSB8fCAwO1xyXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IEJpZ051bWJlcihidilbbV0oTnVtYmVyKHRoaXMuc3RlcCkpO1xyXG4gICAgICAgICAgICBsZXQgdiA9IHIudG9GaXhlZCgpO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBtaW5WYWx1ZSA9IHRoaXMuaXNFbXB0eSh2KVxyXG4gICAgICAgICAgICAgICAgPyAnJ1xyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmlzRW1wdHkobmV4dFZhbClcclxuICAgICAgICAgICAgICAgICAgICA/IHZcclxuICAgICAgICAgICAgICAgICAgICA6IEJpZ051bWJlci5taW4odiwgbmV4dFZhbCkudG9GaXhlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWUgPSB0aGlzLnZhbGlkSW50ZXJ2YWwobmV3IEJpZ051bWJlcihtaW5WYWx1ZSksIGZhbHNlKS50b0ZpeGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRQcmV2Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB0aGlzLnByZXZWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuX2JlZ2luVmFsdWUsIHR5cGUpO1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luVmFsdWVDaGFuZ2UuZW1pdCh0aGlzLl9iZWdpblZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdlbmQnICYmIHRoaXMuaXNEaXNhYmxlT2ZCdG4oZGlyLCB0aGlzLm5leHRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgdG1wVmFsdWUgPSB0aGlzLmlucHV0TmV4dC5uYXRpdmVFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBiZWdpblZhbCA9IHRoaXMuZ2V0QmVnaW5WYWx1ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBidiA9IHRoaXMuY2xlYW5OdW1TdHJpbmcodG1wVmFsdWUpIHx8IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgQmlnTnVtYmVyKGJ2KVttXShOdW1iZXIodGhpcy5zdGVwKSk7XHJcbiAgICAgICAgICAgIGxldCB2ID0gci50b0ZpeGVkKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXhWYWx1ZSA9IHRoaXMuaXNFbXB0eSh2KVxyXG4gICAgICAgICAgICAgICAgPyAnJ1xyXG4gICAgICAgICAgICAgICAgOiB0aGlzLmlzRW1wdHkoYmVnaW5WYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgPyB2XHJcbiAgICAgICAgICAgICAgICAgICAgOiBCaWdOdW1iZXIubWF4KHYsIGJlZ2luVmFsKS50b0ZpeGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kVmFsdWUgPSB0aGlzLnZhbGlkSW50ZXJ2YWwobmV3IEJpZ051bWJlcihtYXhWYWx1ZSksIGZhbHNlKS50b0ZpeGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXROZXh0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB0aGlzLm5leHRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5vbk1vZGVsQ2hhbmdlKHRoaXMuX2VuZFZhbHVlLCB0eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5lbmRWYWx1ZUNoYW5nZS5lbWl0KHRoaXMuX2VuZFZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcclxuICAgICAgICB0aGlzLmV4cGVuZFdpZHRoKHR5cGUsIDMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxufVxyXG4iXX0=