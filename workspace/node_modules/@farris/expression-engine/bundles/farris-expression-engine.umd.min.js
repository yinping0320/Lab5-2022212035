!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("@farris/expression-engine",["exports"],e):e((t.farris=t.farris||{},t.farris["expression-engine"]={}))}(this,function(t){"use strict";var e=(Object.defineProperty(n.prototype,"contexts",{get:function(){return this._contexts},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"arguments",{get:function(){return this._arguments},enumerable:!0,configurable:!0}),n.prototype.set=function(t,e){this._contexts[t]=e},n.prototype.setArgument=function(t,e){this._arguments[t]=e},n.prototype.clear=function(){this._arguments={}},n);function n(){this._contexts={}}var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}var a=(i.prototype.GetChainedPropertyValue=function(t){return this.eval(t+";")()},i.prototype.GetContextParameter=function(t){return this.eval(""+t)()},i.prototype.GetSessionValue=function(t){return this.eval(""+t)},i.prototype.eval=function(t){var e=this.context&&this.context.contexts||{},n=e.arguments||{},r=Object.keys(n).join(",");t.match(/([\s\r\n{;}]+return)|(^return)\s+/g)||(t="return "+t);var n=Object.getOwnPropertyNames(e),o="__scope__"+(new Date).valueOf();return new Function(o,"\n      "+n.map(function(t){return"var "+t+" = "+o+"['"+t+"'];"}).join("\r\n")+"\n      return function anonymous("+r+") {\n        try{ \n"+t+"\n }catch(e){console.error(e);}\n      };")(e)},i.prototype.GetComputeJsonData=function(t,e){return console.warn("GetComputeJsonData不支持"),null},i.prototype.GetInjectedEntity=function(t){return console.warn("GetInjectedEntity不支持"),null},i.prototype.Sum=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e},i.prototype.SumByProp=function(t,e){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    var result = array.reduce((total,item)=>{\n      const value = DefaultFunction.getPropValue(item,"'+e+"\");\n      if(Object.prototype.toString.call(value) === '[object Number]'){\n        total = total + value;\n      }\n      return total;\n    },0);\n    return result;\n    ")()},i.prototype.CountByProp=function(t,e){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    var result = array.reduce((count,item)=>{\n      const isPropExist = DefaultFunction.hasProp(item,"'+e+'");\n      if(isPropExist){\n        count ++;\n      }\n      return count;\n    },0);\n    return result;\n    ')()},i.prototype.AvgByProp=function(t,e){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    var result = array.reduce((total,item)=>{\n      var value = DefaultFunction.getPropValue(item,"'+e+"\");\n      if(Object.prototype.toString.call(value) === '[object Number]'){\n        total = total + value;\n      }\n      return total;\n    },0);\n    return parseFloat((result/array.length).toFixed(2));\n    ")()},i.prototype.MaxByProp=function(t,e){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    var result = array.reduce((max,item)=>{\n      var value = DefaultFunction.getPropValue(item,"'+e+'");\n      if(value!==undefined){\n        if(Object.prototype.toString.apply(value)!=="[object Number]"){\n          console.warn("对象"+JSON.stringify(item) + "中，属性 '+e+' 不是数字。");\n        }\n        max = max>=value?max:value;\n      }\n      return max;\n    },0);\n    return result;\n    ')()},i.prototype.MinByProp=function(t,e){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    var result = array.reduce((min,item)=>{\n      var value = DefaultFunction.getPropValue(item,"'+e+'");\n      if(value!==undefined){\n        if(Object.prototype.toString.apply(value)!=="[object Number]"){\n          console.warn("对象"+JSON.stringify(item) + "中，属性 '+e+' 不是数字。");\n        }\n        min = min<=value?min:value;\n      }\n      return min;\n    },undefined);\n    return result;\n    ')()},i.prototype.getIterable=function(t){return t&&t.hasOwnProperty("__type__")&&"BindingList"===t.__type__?t.toArray()||[]:t&&t.hasOwnProperty("__type__")&&"EntityList"===t.__type__?t.items||[]:t&&t.hasOwnProperty("__type__")&&("List"===t.__type__||"Entity"===t.__type__)?t.__items__||[]:"[object Array]"===Object.prototype.toString.apply(t)?t:[]},i.prototype.getPropValue=function(t,e){e=e.split(".").filter(function(t){return t});return e&&e.reduce(function(t,e){return t&&t.hasOwnProperty(e)?t[e]:undefined},t)},i.prototype.hasProp=function(t,e){var n=e.split(".").filter(function(t){return t}),r=!0;if(n)for(var o=0;o<n.length;o++){var a=n[o];if(!t.hasOwnProperty(a)){r=!1;break}t=t[a]}else r=!1;return r},i.prototype.StringSubstring=function(t,e,n){return t&&t.substring(e,n)},i.prototype.Length=function(t){return t&&t.hasOwnProperty("length")&&t.length||0},i.prototype.StringLength=function(t){return t&&t.hasOwnProperty("length")&&t.length||0},i.prototype.StringReplace=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},i.prototype.ToUpper=function(t){return t&&t.toUpperCase()},i.prototype.ToLower=function(t){return t&&t.toLowerCase()},i.prototype.IndexOf=function(t,e){return t?t.indexOf(e):-1},i.prototype.LastIndexOf=function(t,e){return t.lastIndexOf(e)},i.prototype.TrimStart=function(t){return t&&t.trimLeft()},i.prototype.TrimEnd=function(t){return t&&t.trimRight()},i.prototype.Trim=function(t){return t.trim()},i.prototype.SubString=function(t,e,n){return this.StringSubstring(t,e,n)},i.prototype.GetStringLength=function(t){return this.StringLength(t)},i.prototype.Replace=function(t,e,n){return this.StringReplace(t,e,n)},i.prototype.CreateGuid=function(){var n=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}).toUpperCase()},i.prototype.CaseToSql=function(t){if(null==t||""==t)return"参数为空";var e=t.split(",");if(0==e.length||1==e.length)return"函数CaseToSql,参数个数不正确";for(var n=" case "+e[0],r=1;r<=e.length;r++)var o=e[r].replace("{","").replace("}","").split(","),n=n+" when "+o[0]+" then "+o[1];return n+="end "},i.prototype.IsNullEmpty=function(t){return null!=t&&""!=t},i.prototype.Add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)n+=t[r];return n},i.prototype.ToByte=function(t){return t>>0},i.prototype.ToStringX=function(t){return JSON.stringify(t)},i.prototype.ToDateTime=function(t){return new Date(t)},i.prototype.ToBoolean=function(t){return null!=JSON.stringify(t)&&"true"==JSON.stringify(t)},i.prototype.ToDecimal=function(t){return Number(t)},i.prototype.ToBigDecimal=function(t){return Number(t)},i.prototype.ToDouble=function(t){return Number(t)},i.prototype.ToFloat=function(t){return Number(t)},i.prototype.ToInt16=function(t){return Number(t)},i.prototype.ToInt32=function(t){return Number(t)},i.prototype.ToChineseMoney=function(t){var e,n=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖"),r=new Array("","拾","佰","仟"),o=new Array("","万","亿","兆"),a=new Array("角","分","毫","厘"),i="";if(1e15<=t)return"";if(0==t)return i=n[0]+"元整";var t=t.toString(),u=-1==t.indexOf(".")?(e=t,""):(e=(t=t.split("."))[0],t[1].substr(0,4));if(0<parseInt(e,10)){for(var s=0,l=e.length,y=0;y<l;y++){var p=l-y-1,f=p/4,p=p%4;"0"==(c=e.substr(y,1))?s++:(0<s&&(i+=n[0]),s=0,i+=n[parseInt(c)]+r[p]),0==p&&s<4&&(i+=o[f])}i+="元"}if(""!=u)for(var c,D=u.length,y=0;y<D;y++)"0"!=(c=u.substr(y,1))&&(i+=n[Number(c)]+a[y]);return""==i?i+=n[0]+"元整":""==u&&(i+="整"),i},i.prototype.IsNull=function(t){return null==t},i.prototype.IsNullOrWhiteSpace=function(t){return null==t||""==t||""==t.trim()},i.prototype.IsNaN=function(t){return isNaN(Number(t))},i.prototype.IsNumber=function(t){return!isNaN(Number(t))},i.prototype.sin=function(t){return Math.sin(t)},i.prototype.cos=function(t){return Math.cos(t)},i.prototype.random=function(t){return Math.random()},i.prototype.ceil=function(t){return Math.ceil(t)},i.prototype.abs=function(t){return Math.abs(t)},i.prototype.floor=function(t){return Math.floor(t)},i.prototype.round=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},i.prototype.bankerRound=function(t,e){return"number"!=typeof t?(console.error("输入值必须是数字！"),undefined):t.toFixed(e)},i.prototype.GetBirthday=function(t){if(!this.IsIDcard(t))return null;var e="";if(15==t.length)e=t.substring(6,8),e=(e=Number(e)<10?"20"+e:"19"+e)+"-"+t.substring(8,10)+"-"+t.substring(10,12);else if(18==t.length)return t.substr(6,4)+"-"+t.substr(10,2)+"-"+t.substr(12,2);return e},i.prototype.GetAge=function(t){if(t){var e=this.GetBirthday(t);if(null==e||""==e)return-1;var n=new Date(e.replace(/-/g,"/")),t=new Date,e=t.getFullYear()-n.getFullYear();return(t.getMonth()<n.getMonth()||t.getMonth()==n.getMonth()&&t.getDate()<n.getDate())&&e--,e}},i.prototype.GetSex=function(t){if(0==this.IsIDcard(t))return null;var e="";return 18==t.length?e=t.substring(14,17):15==t.length&&(e=t.substring(12,15)),e=Number(e)%2==0?"女":"男"},i.prototype.IsIDcard=function(t){return/(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$)|([1-9][0-9]{5}[0-9]{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)[0-9]{3})/.test(t)},i.prototype.DateTimeAddDays=function(t,e){if(!t)return t;t=new Date(t.replace(/-/g,"/"));return t.setDate(t.getDate()+e),t},i.prototype.DateTimeAddMonths=function(t,e){if(!t)return t;t=new Date(t.replace(/-/g,"/"));return t.setMonth(t.getMonth()+e),t},i.prototype.DateTimeAddYears=function(t,e){if(!t)return t;t=new Date(t.replace(/-/g,"/"));return t.setFullYear(t.getFullYear()+e),t},i.prototype.GetFirstDayOfMonth=function(t){if(!t)return t;t=new Date(t.replace(/-/g,"/"));return t.setDate(1),t},i.prototype.GetLastDayOfMonth=function(t){if(!t)return t;var e=new Date(t.replace(/-/g,"/")),t=e.getMonth(),t=++t,t=new Date(e.getFullYear(),t,1);return new Date(Number(t)-864e5)},i.prototype.GetDateTimeNow=function(){return new Date},i.prototype.CompareDate=function(t,e){if(t&&e){t=new Date(t.replace(/-/g,"/")),e=new Date(e.replace(/-/g,"/"));return t.getTime()>e.getTime()?1:t.getTime()==e.getTime()?0:t.getTime()<e.getTime()?-1:void 0}},i.prototype.FormatDate=function(t){return this.FormatDefineDate(t=t||"yyyy-MM-dd",new Date)},i.prototype.FormatDefineDate=function(t,e){var n;if(null==(e=void 0===e?null:e))n=new Date;else if("string"==typeof e)n=new Date(e.replace(/-/g,"/"));else{if("[object Date]"!==Object.prototype.toString.call(e))return console.error("日期参数仅支持日期字符串或日期对象"),null;n=e}var r,o={"M+":n.getMonth()+1,"d+":n.getDate(),"H+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length)));return t},i.prototype.Today=function(t){if(null==(t=void 0===t?null:t)){var e=new Date;return e.setTime(e.getTime()),this.FormatDefineDate("yyyy-MM-dd",e)}t=new Date(t);return t.setDate(t.getDate()),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.Yesterday=function(t){if(null==(t=void 0===t?null:t)){var e=new Date;return e.setTime(e.getTime()-864e5),this.FormatDefineDate("yyyy-MM-dd",e)}t=new Date(t);return t.setDate(t.getDate()-1),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.Tomorrow=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setDate(t.getDate()+1),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.ThisYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setFullYear(t.getFullYear()),t.getFullYear()+""},i.prototype.LastYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setFullYear(t.getFullYear()-1),t.getFullYear()+""},i.prototype.NextYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setFullYear(t.getFullYear()+1),t.getFullYear()+""},i.prototype.ThisMonth=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setMonth(t.getMonth()+1),t.getMonth()+""},i.prototype.LastMonth=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setMonth(t.getMonth()),t.getMonth()+""},i.prototype.NextMonth=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setMonth(t.getMonth()+2),t.getMonth()+""},i.prototype.DayOfWeek=function(t){return null!=(t=void 0===t?null:t)?new Date(t).getDay()+"":(new Date).getDay()+""},i.prototype.isLeapYear=function(t){return t%400==0||t%4==0&&t%100!=0},i.prototype.getMonthDays=function(t,e){return[31,null,31,30,31,30,31,31,30,31,30,31][e]||(this.isLeapYear(t)?29:28)},i.prototype.ThisWeek=function(t){for(var e,n,r=(n=(e=(t=null==(t=void 0===t?null:t)?new Date:new Date(t)).getFullYear(),t.getMonth()),t.getDate()),o=0;o<n;o++)r+=this.getMonthDays(e,o);t=new Date(e,0,1).getDay()||7;return 1==t?Math.ceil(r/t):(r-=7-t+1,Math.ceil(r/7)+1)},i.prototype.LastWeek=function(t){return void 0===t&&(t=null),Number(this.ThisWeek(t))-1+""},i.prototype.NextWeek=function(t){return void 0===t&&(t=null),Number(this.ThisWeek(t))+1+""},i.prototype.FirstDayOfWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(a=(o=new Date).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return this.FormatDefineDate("yyyy-MM-dd",r)}var o,a,e=864e5,n=0!=(a=(o=new Date(t)).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return this.FormatDefineDate("yyyy-MM-dd",r)},i.prototype.LastDayOfWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(i=(a=new Date).getDay())?i-1:6,r=new Date(a.getTime()-n*e),o=new Date(r.getTime()+6*e);return this.FormatDefineDate("yyyy-MM-dd",o)}var a,i,e=864e5,n=0!=(i=(a=new Date(t)).getDay())?i-1:6,r=new Date(a.getTime()-n*e),o=new Date(r.getTime()+6*e);return this.FormatDefineDate("yyyy-MM-dd",o)},i.prototype.FirstDayOfLastWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(o=(r=new Date).getDay())?o-1:6;return(a=new Date(r.getTime()-n*e)).setDate(a.getDate()-7),this.FormatDefineDate("yyyy-MM-dd",a)}var r,o,a,e=864e5,n=0!=(o=(r=new Date(t)).getDay())?o-1:6;return(a=new Date(r.getTime()-n*e)).setDate(a.getDate()-7),this.FormatDefineDate("yyyy-MM-dd",a)},i.prototype.LastDayOfLastWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(a=(o=new Date).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return(i=new Date(r.getTime()+6*e)).setDate(i.getDate()-7),this.FormatDefineDate("yyyy-MM-dd",i)}var o,a,i,e=864e5,n=0!=(a=(o=new Date(t)).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return(i=new Date(r.getTime()+6*e)).setDate(i.getDate()-7),this.FormatDefineDate("yyyy-MM-dd",i)},i.prototype.FirstDayOfNextWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(o=(r=new Date).getDay())?o-1:6;return(a=new Date(r.getTime()-n*e)).setDate(a.getDate()+7),this.FormatDefineDate("yyyy-MM-dd",a)}var r,o,a,e=864e5,n=0!=(o=(r=new Date(t)).getDay())?o-1:6;return(a=new Date(r.getTime()-n*e)).setDate(a.getDate()+7),this.FormatDefineDate("yyyy-MM-dd",a)},i.prototype.LastDayOfNextWeek=function(t){if(null==(t=void 0===t?null:t)){var e=864e5,n=0!=(a=(o=new Date).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return(i=new Date(r.getTime()+6*e)).setDate(i.getDate()+7),this.FormatDefineDate("yyyy-MM-dd",i)}var o,a,i,e=864e5,n=0!=(a=(o=new Date(t)).getDay())?a-1:6,r=new Date(o.getTime()-n*e);return(i=new Date(r.getTime()+6*e)).setDate(i.getDate()+7),this.FormatDefineDate("yyyy-MM-dd",i)},i.prototype.FirstDayOfMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(o=new Date).getMonth(),n=o.getFullYear(),r=new Date(n,e,1);return this.FormatDefineDate("yyyy-MM-dd",r)}var o,e=(o=new Date(t)).getMonth(),n=o.getFullYear(),r=new Date(n,e,1);return this.FormatDefineDate("yyyy-MM-dd",r)},i.prototype.LastDayOfMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(o=new Date).getFullYear(),n=o.getMonth()+1,r=new Date(e,n,0);return this.FormatDefineDate("yyyy-MM-dd",r)}var o,e=(o=new Date(t)).getFullYear(),n=o.getMonth()+1,r=new Date(e,n,0);return this.FormatDefineDate("yyyy-MM-dd",r)},i.prototype.FirstDayOfLastMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(r=new Date).getMonth(),n=r.getFullYear();return(o=new Date(n,e,1)).setMonth(o.getMonth()),this.FormatDefineDate("yyyy-MM-dd",o)}var r,o,e=(r=new Date(t)).getMonth(),n=r.getFullYear();return(o=new Date(n,e,1)).setMonth(o.getMonth()),this.FormatDefineDate("yyyy-MM-dd",o)},i.prototype.LastDayOfLastMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(r=new Date).getFullYear(),n=r.getMonth()+1;return(o=new Date(e,n,0)).setMonth(o.getMonth()),this.FormatDefineDate("yyyy-MM-dd",o)}var r,o,e=(r=new Date(t)).getFullYear(),n=r.getMonth()+1;return(o=new Date(e,n,0)).setMonth(o.getMonth()),this.FormatDefineDate("yyyy-MM-dd",o)},i.prototype.FirstDayOfNextMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(r=new Date).getMonth(),n=r.getFullYear();return(o=new Date(n,e,1)).setMonth(o.getMonth()+2),this.FormatDefineDate("yyyy-MM-dd",o)}var r,o,e=(r=new Date(t)).getMonth(),n=r.getFullYear();return(o=new Date(n,e,1)).setMonth(o.getMonth()+2),this.FormatDefineDate("yyyy-MM-dd",o)},i.prototype.LastDayOfNextMonth=function(t){if(null==(t=void 0===t?null:t)){var e=(r=new Date).getFullYear(),n=r.getMonth()+1;return(o=new Date(e,n,0)).setMonth(o.getMonth()+2),this.FormatDefineDate("yyyy-MM-dd",r)}var r,o,e=(r=new Date(t)).getFullYear(),n=r.getMonth()+1;return(o=new Date(e,n,0)).setMonth(o.getMonth()+2),this.FormatDefineDate("yyyy-MM-dd",r)},i.prototype.FirstDayOfYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setDate(1),t.setMonth(0),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.LastDayOfYear=function(t){return null!=(t=void 0===t?null:t)?((e=new Date(t)).setFullYear(e.getFullYear()+1),e.setDate(0)):(e=new Date).setDate(0),e.setMonth(11),this.FormatDefineDate("yyyy-MM-dd",e);var e},i.prototype.FirstDayOfLastYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setFullYear(t.getFullYear()-1),t.setDate(1),t.setMonth(0),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.LastDayOfLastYear=function(t){return null!=(t=void 0===t?null:t)?(e=new Date(t)).setFullYear(e.getFullYear()):(e=new Date).setFullYear(e.getFullYear()-1),e.setDate(0),e.setMonth(11),this.FormatDefineDate("yyyy-MM-dd",e);var e},i.prototype.FirstDayOfNextYear=function(t){return(t=null!=(t=void 0===t?null:t)?new Date(t):new Date).setFullYear(t.getFullYear()+1),t.setDate(1),t.setMonth(0),this.FormatDefineDate("yyyy-MM-dd",t)},i.prototype.LastDayOfNextYear=function(t){return null!=(t=void 0===t?null:t)?(e=new Date(t)).setFullYear(e.getFullYear()+2):(e=new Date).setFullYear(e.getFullYear()+1),e.setDate(0),e.setMonth(11),this.FormatDefineDate("yyyy-MM-dd",e);var e},i.prototype.GetDate=function(t,e){switch(void 0===e&&(e=null),t){case"DD":return this.Today(e);case"LD":return this.Yesterday(e);case"ND":return this.Tomorrow(e);case"YY":return this.ThisYear(e);case"LY":return this.LastYear(e);case"NY":return this.NextYear(e);case"MM":return this.ThisMonth(e);case"LM":return this.LastMonth(e);case"NM":return this.NextMonth(e);case"WD":return this.DayOfWeek(e);case"WW":return this.ThisWeek(e);case"LW":return this.LastWeek(e);case"NW":return this.NextWeek(e);case"FDW":return this.FirstDayOfWeek(e);case"LDW":return this.LastDayOfWeek(e);case"FDLW":return this.FirstDayOfLastWeek(e);case"LDLW":return this.LastDayOfLastWeek(e);case"FDNW":return this.FirstDayOfNextWeek(e);case"LDNW":return this.LastDayOfNextWeek(e);case"FDM":return this.FirstDayOfMonth(e);case"LDM":return this.LastDayOfMonth(e);case"FDLM":return this.FirstDayOfLastMonth(e);case"LDLM":return this.LastDayOfLastMonth(e);case"FDNM":return this.FirstDayOfNextMonth(e);case"LDNM":return this.LastDayOfNextMonth(e);case"FDY":return this.FirstDayOfYear(e);case"LDY":return this.LastDayOfYear(e);case"FDLY":return this.FirstDayOfLastYear(e);case"LDLY":return this.LastDayOfLastYear(e);case"FDNY":return this.FirstDayOfNextYear(e);case"LDNY":return this.LastDayOfNextYear(e);default:return e}},i.prototype.IsExistRecord=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return array.find(item=>item["'+e+'"] === '+n+")==null?false:true;\n    ")()},i.prototype.ListContains=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return !array.find(item=> item.hasOwnProperty("'+e+'") && item["'+e+'"].toString().indexOf("'+n+'")!==-1)?false:true;\n    ')()},i.prototype.ListGreaterThan=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return !array.find(item=> item.hasOwnProperty("'+e+'") && item["'+e+'"] > '+n+") ? false: true;\n    ")()},i.prototype.ListLessThan=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return !array.find(item=> item.hasOwnProperty("'+e+'") && item["'+e+'"] < '+n+") ? false: true;\n    ")()},i.prototype.ListStartWith=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return !array.find(item=> item.hasOwnProperty("'+e+'") && item["'+e+'"] && item["'+e+'"].toString().startsWith("'+n+'")) ? false: true;\n    ')()},i.prototype.ListEndWith=function(t,e,n){return this.eval("\n    var list = "+t+';\n    var array = DefaultFunction.getIterable(list);\n    return !array.find(item=> item.hasOwnProperty("'+e+'") && item["'+e+'"] && item["'+e+'"].toString().endsWith("'+n+'")) ? false: true;\n    ')()},i.prototype.getComputeJsonData=function(t,e){throw new Error("Method not implemented.")},i.prototype.Contains=function(t,e){return null!=t&&null!=e&&-1!=t.indexOf(e)},i.prototype.NotContains=function(t,e){return null!=t&&null!=e&&!(-1!=t.indexOf(e))},i.prototype.StartsWith=function(t,e){return null!=t&&null!=e&&t.startsWith(e)},i.prototype.NotStartsWith=function(t,e){return null!=t&&null!=e&&!t.startsWith(e)},i.prototype.EndsWith=function(t,e){return null!=t&&null!=e&&t.endsWith(e)},i.prototype.NotEndsWith=function(t,e){return null!=t&&null!=e&&!t.endsWith(e)},i.prototype.trimStart=function(t,e){if(null==t||""==t||t.indexOf(e)<0)return t;e=t.indexOf(e);return t=t.substring(e+1)},i.prototype.trimEnd=function(t,e){if(null==t||""==t||t.indexOf(e)<0)return t;e=t.lastIndexOf(e);return t=0<=e?t.substring(0,e):t},i.prototype.trimStartEnd=function(t,e){return this.trimEnd(this.trimStart(t,e),e)},i);function i(t){this.context=t}var u=(s.prototype.compile=function(t,e){var n=e&&e.contexts||{},r=n.arguments||{},r=Object.keys(r).join(","),e=new a(e);n.DefaultFunction=e,t.match(/([\s\r\n{;}]+return)|(^return)\s+/g)||(t="return "+t);var n=Object.getOwnPropertyNames(n),o="__scope__"+(new Date).valueOf();return new Function(o,"\n      "+n.map(function(t){return"var "+t+" = "+o+"['"+t+"'];"}).join("\r\n")+"\n      return function anonymous("+r+") {\n        try{ \n"+t+"\n }catch(e){console.error(e);}\n      };")},s);function s(){}var l=(y.prototype.eval=function(t,e){var n=e&&e.contexts||{},r=n.arguments||{},r=Object.keys(r).join(","),e=new a(e);n.DefaultFunction=e,t.match(/([\s\r\n{;}]+return)|(^return)\s+/g)||(t="return "+t);var e=Object.getOwnPropertyNames(n),o="__scope__"+(new Date).valueOf();return new Function(o,"\n      "+e.map(function(t){return"var "+t+" = "+o+"['"+t+"'];"}).join("\r\n")+"\n      return function anonymous("+r+") {\n        try{ \n"+t+"\n }catch(e){console.error(e);}\n      };")(n)},y);function y(){}var p=(f.prototype.eval=function(t){var e=(t=t||this.context)&&t.contexts&&t.contexts.arguments||{};if(this.factory){var n=this.buildContext(t);return this.factory(n.contexts)(e)}return(new l).eval(this.expr,t).apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}(Object.values(e)))},f.prototype.compile=function(t){t=t||this.context;var e=new u;return this.factory=e.compile(this.expr,t),this},f.prototype.buildContext=function(t){var e=t&&t.contexts||{},n=new a(t);return e.DefaultFunction=n,t},f);function f(t,e){this.expr=t,this.context=e}var c,D=function(t){this.context=t},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(g,c=D),g.prototype.eval=function(t){return new p(t).eval(this.getContext())},g.prototype.getContext=function(){return this.context||(this.context=new e),this.context},g.prototype.addFun=function(t,e){t&&"function"==typeof e&&this.getContext().set(t,e)},g);function g(t){return c.call(this,t)||this}t.ExpressionContext=e,t.Expression=p,t.Compiler=u,t.Evaler=l,t.DefaultFunctions=a,t.AbstractExpressionEngine=D,t.ExpressionEngine=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=farris-expression-engine.umd.min.js.map