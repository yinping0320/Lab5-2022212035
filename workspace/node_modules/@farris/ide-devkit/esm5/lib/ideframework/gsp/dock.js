/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { PaneContainer } from './pane-container';
import { Emitter } from './event-kit';
/** @enum {number} */
var DockStyle = {
    none: 0,
    left: 1,
    right: 2,
    top: 3,
    bottom: 4,
};
export { DockStyle };
DockStyle[DockStyle.none] = 'none';
DockStyle[DockStyle.left] = 'left';
DockStyle[DockStyle.right] = 'right';
DockStyle[DockStyle.top] = 'top';
DockStyle[DockStyle.bottom] = 'bottom';
var Dock = /** @class */ (function () {
    function Dock(params) {
        this.handleResizeHandleDragStart = this.handleResizeHandleDragStart.bind(this);
        this.handleResizeToFit = this.handleResizeToFit.bind(this);
        this.handleMouseMove = this.handleMouseMove.bind(this);
        this.handleMouseUp = this.handleMouseUp.bind(this);
        this.location = params.location;
        this.widthOrHeight = getWidthOrHeight(this.location);
        this.viewRegistry = params.viewRegistry;
        this.didActivate = params.didActivate;
        this.emitter = new Emitter();
        this.paneContainer = new PaneContainer({
            location: this.location,
            viewRegistry: this.viewRegistry
        });
        this.state = {
            size: null,
            visible: false,
            shouldAnimate: false
        };
    }
    // This method is called explicitly by the object which adds the Dock to the document.
    // This method is called explicitly by the object which adds the Dock to the document.
    /**
     * @return {?}
     */
    Dock.prototype.elementAttached = 
    // This method is called explicitly by the object which adds the Dock to the document.
    /**
     * @return {?}
     */
    function () {
        // Re-render when the dock is attached to make sure we remeasure sizes defined in CSS.
        this.render(this.state);
    };
    /**
     * @return {?}
     */
    Dock.prototype.getElement = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    Dock.prototype.getLocation = /**
     * @return {?}
     */
    function () {
        return this.location;
    };
    /**
     * @return {?}
     */
    Dock.prototype.destroy = /**
     * @return {?}
     */
    function () {
        this.paneContainer.destroy();
        // window.removeEventListener('mousemove', this.handleMouseMove);
        // window.removeEventListener('mouseup', this.handleMouseUp);
        // window.removeEventListener('drag', this.handleDrag);
        // window.removeEventListener('dragend', this.handleDragEnd);
    };
    /**
     * @param {?} hovered
     * @return {?}
     */
    Dock.prototype.setHovered = /**
     * @param {?} hovered
     * @return {?}
     */
    function (hovered) {
        if (hovered === this.state.hovered) {
            return;
        }
        this.setState({ hovered: hovered });
    };
    /**
     * @param {?} draggingItem
     * @return {?}
     */
    Dock.prototype.setDraggingItem = /**
     * @param {?} draggingItem
     * @return {?}
     */
    function (draggingItem) {
        if (draggingItem === this.state.draggingItem) {
            return;
        }
        this.setState({ draggingItem: draggingItem });
    };
    // Extended: Show the dock and focus its active {Pane}.
    // Extended: Show the dock and focus its active {Pane}.
    /**
     * @return {?}
     */
    Dock.prototype.activate = 
    // Extended: Show the dock and focus its active {Pane}.
    /**
     * @return {?}
     */
    function () {
        this.getActivePane().activate();
    };
    // Extended: Show the dock without focusing it.
    // Extended: Show the dock without focusing it.
    /**
     * @return {?}
     */
    Dock.prototype.show = 
    // Extended: Show the dock without focusing it.
    /**
     * @return {?}
     */
    function () {
        this.setState({ visible: true });
    };
    // Extended: Hide the dock and activate the {WorkspaceCenter} if the dock was
    // was previously focused.
    // Extended: Hide the dock and activate the {WorkspaceCenter} if the dock was
    // was previously focused.
    /**
     * @return {?}
     */
    Dock.prototype.hide = 
    // Extended: Hide the dock and activate the {WorkspaceCenter} if the dock was
    // was previously focused.
    /**
     * @return {?}
     */
    function () {
        this.setState({ visible: false });
    };
    // Extended: Toggle the dock's visibility without changing the {Workspace}'s
    // active pane container.
    // Extended: Toggle the dock's visibility without changing the {Workspace}'s
    // active pane container.
    /**
     * @return {?}
     */
    Dock.prototype.toggle = 
    // Extended: Toggle the dock's visibility without changing the {Workspace}'s
    // active pane container.
    /**
     * @return {?}
     */
    function () {
        // const state = { visible: !this.state.visible };
        // if (!state.visible) { state.hovered = false; }
        // this.setState(state);
    };
    // Extended: Check if the dock is visible.
    //
    // Returns a {Boolean}.
    // Extended: Check if the dock is visible.
    //
    // Returns a {Boolean}.
    /**
     * @return {?}
     */
    Dock.prototype.isVisible = 
    // Extended: Check if the dock is visible.
    //
    // Returns a {Boolean}.
    /**
     * @return {?}
     */
    function () {
        return this.state.visible;
    };
    /**
     * @param {?} newState
     * @return {?}
     */
    Dock.prototype.setState = /**
     * @param {?} newState
     * @return {?}
     */
    function (newState) {
        /** @type {?} */
        var prevState = this.state;
        /** @type {?} */
        var nextState = Object.assign({}, prevState, newState);
        // Update the `shouldAnimate` state. This needs to be written to the DOM before updating the
        // class that changes the animated property. Normally we'd have to defer the class change a
        // frame to ensure the property is animated (or not) appropriately, however we luck out in this
        // case because the drag start always happens before the item is dragged into the toggle button.
        if (nextState.visible !== prevState.visible) {
            // Never animate toggling visibility...
            nextState.shouldAnimate = false;
        }
        else if (!nextState.visible && nextState.draggingItem && !prevState.draggingItem) {
            // ...but do animate if you start dragging while the panel is hidden.
            nextState.shouldAnimate = true;
        }
        this.state = nextState;
        this.render(this.state);
        var visible = this.state.visible;
        // if (visible !== prevState.visible) {
        //   this.emitter.emit('did-change-visible', visible);
        // }
    };
    /**
     * @param {?} state
     * @return {?}
     */
    Dock.prototype.render = /**
     * @param {?} state
     * @return {?}
     */
    function (state) {
    };
    /**
     * @return {?}
     */
    Dock.prototype.handleDidAddPaneItem = /**
     * @return {?}
     */
    function () {
        if (this.state.size == null) {
            this.setState({ size: this.getInitialSize() });
        }
    };
    /**
     * @return {?}
     */
    Dock.prototype.handleDidRemovePaneItem = /**
     * @return {?}
     */
    function () {
        // Hide the dock if you remove the last item.
        if (this.paneContainer.getPaneItems().length === 0) {
            this.setState({ visible: false, hovered: false, size: null });
        }
    };
    /**
     * @return {?}
     */
    Dock.prototype.handleResizeHandleDragStart = /**
     * @return {?}
     */
    function () {
        window.addEventListener('mousemove', this.handleMouseMove);
        window.addEventListener('mouseup', this.handleMouseUp);
        this.setState({ resizing: true });
    };
    /**
     * @return {?}
     */
    Dock.prototype.handleResizeToFit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var item = this.getActivePaneItem();
        if (item) {
            /** @type {?} */
            var size = getPreferredSize(item, this.getLocation());
            if (size != null) {
                this.setState({ size: size });
            }
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    Dock.prototype.handleMouseMove = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (event.buttons === 0) { // We missed the mouseup event. For some reason it happens on Windows
            this.handleMouseUp(event);
            return;
        }
        /** @type {?} */
        var size = 0;
        // switch (this.location) {
        //   case 'left':
        //     size = event.pageX - this.element.getBoundingClientRect().left;
        //     break;
        //   case 'bottom':
        //     size = this.element.getBoundingClientRect().bottom - event.pageY;
        //     break;
        //   case 'right':
        //     size = this.element.getBoundingClientRect().right - event.pageX;
        //     break;
        // }
        this.setState({ size: size });
    };
    /**
     * @param {?} event
     * @return {?}
     */
    Dock.prototype.handleMouseUp = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        window.removeEventListener('mousemove', this.handleMouseMove);
        window.removeEventListener('mouseup', this.handleMouseUp);
        this.setState({ resizing: false });
    };
    // Determine whether the cursor is within the dock hover area. This isn't as simple as just using
    // mouseenter/leave because we want to be a little more forgiving. For example, if the cursor is
    // over the footer, we want to show the bottom dock's toggle button. Also note that our criteria
    // for detecting entry are different than detecting exit but, in order for us to avoid jitter, the
    // area considered when detecting exit MUST fully encompass the area considered when detecting
    // entry.
    // Determine whether the cursor is within the dock hover area. This isn't as simple as just using
    // mouseenter/leave because we want to be a little more forgiving. For example, if the cursor is
    // over the footer, we want to show the bottom dock's toggle button. Also note that our criteria
    // for detecting entry are different than detecting exit but, in order for us to avoid jitter, the
    // area considered when detecting exit MUST fully encompass the area considered when detecting
    // entry.
    /**
     * @param {?} point
     * @param {?} detectingExit
     * @return {?}
     */
    Dock.prototype.pointWithinHoverArea = 
    // Determine whether the cursor is within the dock hover area. This isn't as simple as just using
    // mouseenter/leave because we want to be a little more forgiving. For example, if the cursor is
    // over the footer, we want to show the bottom dock's toggle button. Also note that our criteria
    // for detecting entry are different than detecting exit but, in order for us to avoid jitter, the
    // area considered when detecting exit MUST fully encompass the area considered when detecting
    // entry.
    /**
     * @param {?} point
     * @param {?} detectingExit
     * @return {?}
     */
    function (point, detectingExit) {
    };
    /**
     * @return {?}
     */
    Dock.prototype.getInitialSize = /**
     * @return {?}
     */
    function () {
        // The item may not have been activated yet. If that's the case, just use the first item.
        /** @type {?} */
        var activePaneItem = this.paneContainer.getActivePaneItem() || this.paneContainer.getPaneItems()[0];
        // If there are items, we should have an explicit width; if not, we shouldn't.
        return activePaneItem
            ? getPreferredSize(activePaneItem, this.location)
            : null;
    };
    /**
     * @return {?}
     */
    Dock.prototype.serialize = /**
     * @return {?}
     */
    function () {
        return {
            deserializer: 'Dock',
            size: this.state.size,
            paneContainer: this.paneContainer.serialize({}),
            visible: this.state.visible
        };
    };
    /**
     * @param {?} serialized
     * @param {?} deserializerManager
     * @return {?}
     */
    Dock.prototype.deserialize = /**
     * @param {?} serialized
     * @param {?} deserializerManager
     * @return {?}
     */
    function (serialized, deserializerManager) {
        this.paneContainer.deserialize(serialized.paneContainer, deserializerManager);
        this.setState({
            size: serialized.size || this.getInitialSize(),
            // If no items could be deserialized, we don't want to show the dock (even if it was visible last time)
            visible: serialized.visible && (this.paneContainer.getPaneItems().length > 0)
        });
    };
    /*
    Section: Event Subscription
    */
    // Essential: Invoke the given callback when the visibility of the dock changes.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /*
      Section: Event Subscription
      */
    // Essential: Invoke the given callback when the visibility of the dock changes.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidChangeVisible = /*
      Section: Event Subscription
      */
    // Essential: Invoke the given callback when the visibility of the dock changes.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
    };
    // Essential: Invoke the given callback with the current and all future visibilities of the dock.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Essential: Invoke the given callback with the current and all future visibilities of the dock.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.observeVisible = 
    // Essential: Invoke the given callback with the current and all future visibilities of the dock.
    //
    // * `callback` {Function} to be called when the visibility changes.
    //   * `visible` {Boolean} Is the dock now visible?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        callback(this.isVisible());
        return this.onDidChangeVisible(callback);
    };
    // Essential: Invoke the given callback with all current and future panes items
    // in the dock.
    //
    // * `callback` {Function} to be called with current and future pane items.
    //   * `item` An item that is present in {::getPaneItems} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Essential: Invoke the given callback with all current and future panes items
    // in the dock.
    //
    // * `callback` {Function} to be called with current and future pane items.
    //   * `item` An item that is present in {::getPaneItems} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.observePaneItems = 
    // Essential: Invoke the given callback with all current and future panes items
    // in the dock.
    //
    // * `callback` {Function} to be called with current and future pane items.
    //   * `item` An item that is present in {::getPaneItems} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.observePaneItems(callback);
    };
    // Essential: Invoke the given callback when the active pane item changes.
    //
    // Because observers are invoked synchronously, it's important not to perform
    // any expensive operations via this method. Consider
    // {::onDidStopChangingActivePaneItem} to delay operations until after changes
    // stop occurring.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Essential: Invoke the given callback when the active pane item changes.
    //
    // Because observers are invoked synchronously, it's important not to perform
    // any expensive operations via this method. Consider
    // {::onDidStopChangingActivePaneItem} to delay operations until after changes
    // stop occurring.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidChangeActivePaneItem = 
    // Essential: Invoke the given callback when the active pane item changes.
    //
    // Because observers are invoked synchronously, it's important not to perform
    // any expensive operations via this method. Consider
    // {::onDidStopChangingActivePaneItem} to delay operations until after changes
    // stop occurring.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidChangeActivePaneItem(callback);
    };
    // Essential: Invoke the given callback when the active pane item stops
    // changing.
    //
    // Observers are called asynchronously 100ms after the last active pane item
    // change. Handling changes here rather than in the synchronous
    // {::onDidChangeActivePaneItem} prevents unneeded work if the user is quickly
    // changing or closing tabs and ensures critical UI feedback, like changing the
    // highlighted tab, gets priority over work that can be done asynchronously.
    //
    // * `callback` {Function} to be called when the active pane item stopts
    //   changing.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Essential: Invoke the given callback when the active pane item stops
    // changing.
    //
    // Observers are called asynchronously 100ms after the last active pane item
    // change. Handling changes here rather than in the synchronous
    // {::onDidChangeActivePaneItem} prevents unneeded work if the user is quickly
    // changing or closing tabs and ensures critical UI feedback, like changing the
    // highlighted tab, gets priority over work that can be done asynchronously.
    //
    // * `callback` {Function} to be called when the active pane item stopts
    //   changing.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidStopChangingActivePaneItem = 
    // Essential: Invoke the given callback when the active pane item stops
    // changing.
    //
    // Observers are called asynchronously 100ms after the last active pane item
    // change. Handling changes here rather than in the synchronous
    // {::onDidChangeActivePaneItem} prevents unneeded work if the user is quickly
    // changing or closing tabs and ensures critical UI feedback, like changing the
    // highlighted tab, gets priority over work that can be done asynchronously.
    //
    // * `callback` {Function} to be called when the active pane item stopts
    //   changing.
    //   * `item` The active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidStopChangingActivePaneItem(callback);
    };
    // Essential: Invoke the given callback with the current active pane item and
    // with all future active pane items in the dock.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The current active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Essential: Invoke the given callback with the current active pane item and
    // with all future active pane items in the dock.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The current active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.observeActivePaneItem = 
    // Essential: Invoke the given callback with the current active pane item and
    // with all future active pane items in the dock.
    //
    // * `callback` {Function} to be called when the active pane item changes.
    //   * `item` The current active pane item.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.observeActivePaneItem(callback);
    };
    // Extended: Invoke the given callback when a pane is added to the dock.
    //
    // * `callback` {Function} to be called panes are added.
    //   * `event` {Object} with the following keys:
    //     * `pane` The added pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback when a pane is added to the dock.
    //
    // * `callback` {Function} to be called panes are added.
    //   * `event` {Object} with the following keys:
    //     * `pane` The added pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidAddPane = 
    // Extended: Invoke the given callback when a pane is added to the dock.
    //
    // * `callback` {Function} to be called panes are added.
    //   * `event` {Object} with the following keys:
    //     * `pane` The added pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidAddPane(callback);
    };
    // Extended: Invoke the given callback before a pane is destroyed in the
    // dock.
    //
    // * `callback` {Function} to be called before panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The pane to be destroyed.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback before a pane is destroyed in the
    // dock.
    //
    // * `callback` {Function} to be called before panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The pane to be destroyed.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onWillDestroyPane = 
    // Extended: Invoke the given callback before a pane is destroyed in the
    // dock.
    //
    // * `callback` {Function} to be called before panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The pane to be destroyed.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onWillDestroyPane(callback);
    };
    // Extended: Invoke the given callback when a pane is destroyed in the dock.
    //
    // * `callback` {Function} to be called panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The destroyed pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback when a pane is destroyed in the dock.
    //
    // * `callback` {Function} to be called panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The destroyed pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidDestroyPane = 
    // Extended: Invoke the given callback when a pane is destroyed in the dock.
    //
    // * `callback` {Function} to be called panes are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `pane` The destroyed pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidDestroyPane(callback);
    };
    // Extended: Invoke the given callback with all current and future panes in the
    // dock.
    //
    // * `callback` {Function} to be called with current and future panes.
    //   * `pane` A {Pane} that is present in {::getPanes} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback with all current and future panes in the
    // dock.
    //
    // * `callback` {Function} to be called with current and future panes.
    //   * `pane` A {Pane} that is present in {::getPanes} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.observePanes = 
    // Extended: Invoke the given callback with all current and future panes in the
    // dock.
    //
    // * `callback` {Function} to be called with current and future panes.
    //   * `pane` A {Pane} that is present in {::getPanes} at the time of
    //      subscription or that is added at some later time.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.observePanes(callback);
    };
    // Extended: Invoke the given callback when the active pane changes.
    //
    // * `callback` {Function} to be called when the active pane changes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback when the active pane changes.
    //
    // * `callback` {Function} to be called when the active pane changes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidChangeActivePane = 
    // Extended: Invoke the given callback when the active pane changes.
    //
    // * `callback` {Function} to be called when the active pane changes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidChangeActivePane(callback);
    };
    // Extended: Invoke the given callback with the current active pane and when
    // the active pane changes.
    //
    // * `callback` {Function} to be called with the current and future active#
    //   panes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback with the current active pane and when
    // the active pane changes.
    //
    // * `callback` {Function} to be called with the current and future active#
    //   panes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.observeActivePane = 
    // Extended: Invoke the given callback with the current active pane and when
    // the active pane changes.
    //
    // * `callback` {Function} to be called with the current and future active#
    //   panes.
    //   * `pane` A {Pane} that is the current return value of {::getActivePane}.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.observeActivePane(callback);
    };
    // Extended: Invoke the given callback when a pane item is added to the dock.
    //
    // * `callback` {Function} to be called when pane items are added.
    //   * `event` {Object} with the following keys:
    //     * `item` The added pane item.
    //     * `pane` {Pane} containing the added item.
    //     * `index` {Number} indicating the index of the added item in its pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback when a pane item is added to the dock.
    //
    // * `callback` {Function} to be called when pane items are added.
    //   * `event` {Object} with the following keys:
    //     * `item` The added pane item.
    //     * `pane` {Pane} containing the added item.
    //     * `index` {Number} indicating the index of the added item in its pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidAddPaneItem = 
    // Extended: Invoke the given callback when a pane item is added to the dock.
    //
    // * `callback` {Function} to be called when pane items are added.
    //   * `event` {Object} with the following keys:
    //     * `item` The added pane item.
    //     * `pane` {Pane} containing the added item.
    //     * `index` {Number} indicating the index of the added item in its pane.
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidAddPaneItem(callback);
    };
    // Extended: Invoke the given callback when a pane item is about to be
    // destroyed, before the user is prompted to save it.
    //
    // * `callback` {Function} to be called before pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The item to be destroyed.
    //     * `pane` {Pane} containing the item to be destroyed.
    //     * `index` {Number} indicating the index of the item to be destroyed in
    //       its pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    // Extended: Invoke the given callback when a pane item is about to be
    // destroyed, before the user is prompted to save it.
    //
    // * `callback` {Function} to be called before pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The item to be destroyed.
    //     * `pane` {Pane} containing the item to be destroyed.
    //     * `index` {Number} indicating the index of the item to be destroyed in
    //       its pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onWillDestroyPaneItem = 
    // Extended: Invoke the given callback when a pane item is about to be
    // destroyed, before the user is prompted to save it.
    //
    // * `callback` {Function} to be called before pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The item to be destroyed.
    //     * `pane` {Pane} containing the item to be destroyed.
    //     * `index` {Number} indicating the index of the item to be destroyed in
    //       its pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onWillDestroyPaneItem(callback);
    };
    // Extended: Invoke the given callback when a pane item is destroyed.
    //
    // * `callback` {Function} to be called when pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The destroyed item.
    //     * `pane` {Pane} containing the destroyed item.
    //     * `index` {Number} indicating the index of the destroyed item in its
    //       pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    // Extended: Invoke the given callback when a pane item is destroyed.
    //
    // * `callback` {Function} to be called when pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The destroyed item.
    //     * `pane` {Pane} containing the destroyed item.
    //     * `index` {Number} indicating the index of the destroyed item in its
    //       pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidDestroyPaneItem = 
    // Extended: Invoke the given callback when a pane item is destroyed.
    //
    // * `callback` {Function} to be called when pane items are destroyed.
    //   * `event` {Object} with the following keys:
    //     * `item` The destroyed item.
    //     * `pane` {Pane} containing the destroyed item.
    //     * `index` {Number} indicating the index of the destroyed item in its
    //       pane.
    //
    // Returns a {Disposable} on which `.dispose` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.paneContainer.onDidDestroyPaneItem(callback);
    };
    // Extended: Invoke the given callback when the hovered state of the dock changes.
    //
    // * `callback` {Function} to be called when the hovered state changes.
    //   * `hovered` {Boolean} Is the dock now hovered?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    // Extended: Invoke the given callback when the hovered state of the dock changes.
    //
    // * `callback` {Function} to be called when the hovered state changes.
    //   * `hovered` {Boolean} Is the dock now hovered?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    Dock.prototype.onDidChangeHovered = 
    // Extended: Invoke the given callback when the hovered state of the dock changes.
    //
    // * `callback` {Function} to be called when the hovered state changes.
    //   * `hovered` {Boolean} Is the dock now hovered?
    //
    // Returns a {Disposable} on which `.dispose()` can be called to unsubscribe.
    /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        return this.emitter.on('did-change-hovered', callback);
    };
    /*
    Section: Pane Items
    */
    // Essential: Get all pane items in the dock.
    //
    // Returns an {Array} of items.
    /*
      Section: Pane Items
      */
    // Essential: Get all pane items in the dock.
    //
    // Returns an {Array} of items.
    /**
     * @return {?}
     */
    Dock.prototype.getPaneItems = /*
      Section: Pane Items
      */
    // Essential: Get all pane items in the dock.
    //
    // Returns an {Array} of items.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.getPaneItems();
    };
    // Essential: Get the active {Pane}'s active item.
    //
    // Returns an pane item {Object}.
    // Essential: Get the active {Pane}'s active item.
    //
    // Returns an pane item {Object}.
    /**
     * @return {?}
     */
    Dock.prototype.getActivePaneItem = 
    // Essential: Get the active {Pane}'s active item.
    //
    // Returns an pane item {Object}.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.getActivePaneItem();
    };
    // Save all pane items.
    // Save all pane items.
    /**
     * @return {?}
     */
    Dock.prototype.saveAll = 
    // Save all pane items.
    /**
     * @return {?}
     */
    function () {
        this.paneContainer.saveAll();
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Dock.prototype.confirmClose = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.paneContainer.confirmClose(options);
    };
    /*
    Section: Panes
    */
    // Extended: Get all panes in the dock.
    //
    // Returns an {Array} of {Pane}s.
    /*
      Section: Panes
      */
    // Extended: Get all panes in the dock.
    //
    // Returns an {Array} of {Pane}s.
    /**
     * @return {?}
     */
    Dock.prototype.getPanes = /*
      Section: Panes
      */
    // Extended: Get all panes in the dock.
    //
    // Returns an {Array} of {Pane}s.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.getPanes();
    };
    // Extended: Get the active {Pane}.
    //
    // Returns a {Pane}.
    // Extended: Get the active {Pane}.
    //
    // Returns a {Pane}.
    /**
     * @return {?}
     */
    Dock.prototype.getActivePane = 
    // Extended: Get the active {Pane}.
    //
    // Returns a {Pane}.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.getActivePane();
    };
    // Extended: Make the next pane active.
    // Extended: Make the next pane active.
    /**
     * @return {?}
     */
    Dock.prototype.activateNextPane = 
    // Extended: Make the next pane active.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.activateNextPane();
    };
    // Extended: Make the previous pane active.
    // Extended: Make the previous pane active.
    /**
     * @return {?}
     */
    Dock.prototype.activatePreviousPane = 
    // Extended: Make the previous pane active.
    /**
     * @return {?}
     */
    function () {
        return this.paneContainer.activatePreviousPane();
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    Dock.prototype.paneForURI = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        return this.paneContainer.paneForURI(uri);
    };
    /**
     * @param {?} item
     * @return {?}
     */
    Dock.prototype.paneForItem = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return this.paneContainer.paneForItem(item);
    };
    // Destroy (close) the active pane.
    // Destroy (close) the active pane.
    /**
     * @return {?}
     */
    Dock.prototype.destroyActivePane = 
    // Destroy (close) the active pane.
    /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var activePane = this.getActivePane();
        if (activePane != null) {
            activePane.destroy();
        }
    };
    return Dock;
}());
export { Dock };
if (false) {
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.location;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.widthOrHeight;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.viewRegistry;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.didActivate;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.paneContainer;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.state;
    /**
     * @type {?}
     * @private
     */
    Dock.prototype.emitter;
}
/**
 * @param {?} location
 * @return {?}
 */
function getWidthOrHeight(location) {
    return location === 'left' || location === 'right' ? 'width' : 'height';
}
/**
 * @param {?} item
 * @param {?} location
 * @return {?}
 */
function getPreferredSize(item, location) {
    switch (location) {
        case 'left':
        case 'right':
            return typeof item.getPreferredWidth === 'function'
                ? item.getPreferredWidth()
                : null;
        default:
            return typeof item.getPreferredHeight === 'function'
                ? item.getPreferredHeight()
                : null;
    }
}
/**
 * @param {?} location
 * @param {?} visible
 * @return {?}
 */
function getIconName(location, visible) {
    switch (location) {
        case 'right': return visible ? 'icon-chevron-right' : 'icon-chevron-left';
        case 'bottom': return visible ? 'icon-chevron-down' : 'icon-chevron-up';
        case 'left': return visible ? 'icon-chevron-left' : 'icon-chevron-right';
        default: throw new Error("Invalid location: " + location);
    }
}
/**
 * @param {?} rect
 * @param {?} point
 * @return {?}
 */
function rectContainsPoint(rect, point) {
    return (point.x >= rect.left &&
        point.y >= rect.top &&
        point.x <= rect.right &&
        point.y <= rect.bottom);
}
// Is the item allowed in the given location?
/**
 * @param {?} item
 * @param {?} location
 * @return {?}
 */
function isItemAllowed(item, location) {
    if (typeof item.getAllowedLocations !== 'function') {
        return true;
    }
    return item.getAllowedLocations().includes(location);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jay5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvaWRlLWRldmtpdC8iLCJzb3VyY2VzIjpbImxpYi9pZGVmcmFtZXdvcmsvZ3NwL2RvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUdqRCxPQUFPLEVBQUUsT0FBTyxFQUFjLE1BQU0sYUFBYSxDQUFDOzs7SUFHaEQsT0FBSTtJQUNKLE9BQUk7SUFDSixRQUFLO0lBQ0wsTUFBRztJQUNILFNBQU07Ozs7Ozs7O0FBR1I7SUFVRSxjQUFZLE1BQU07UUFDaEIsSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0UsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRW5ELElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNoQyxJQUFJLENBQUMsYUFBYSxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyRCxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDeEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO1FBRXRDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUU3QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksYUFBYSxDQUFDO1lBQ3JDLFFBQVEsRUFBRSxJ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QUFDLENBQUMsbUJBQW1CLENBQUM7UUFDMUUsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLE9BQU8sQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDO1FBQ3hFLEtBQUssTUFBTSxDQUFDLENBQUMsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQztRQUN6RSxPQUFPLENBQUMsQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLHVCQUFxQixRQUFVLENBQUMsQ0FBQztLQUMzRDtBQUNILENBQUM7Ozs7OztBQUVELFNBQVMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLEtBQUs7SUFDcEMsT0FBTyxDQUNMLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUk7UUFDcEIsS0FBSyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRztRQUNuQixLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLO1FBQ3JCLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FDdkIsQ0FBQztBQUNKLENBQUM7Ozs7Ozs7QUFHRCxTQUFTLGFBQWEsQ0FBQyxJQUFJLEVBQUUsUUFBUTtJQUNuQyxJQUFJLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixLQUFLLFVBQVUsRUFBRTtRQUNsRCxPQUFPLElBQUksQ0FBQztLQUNiO0lBQ0QsT0FBTyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhbmVDb250YWluZXIgfSBmcm9tICcuL3BhbmUtY29udGFpbmVyJztcclxuaW1wb3J0IHsgUGFuZSB9IGZyb20gJy4vcGFuZSc7XHJcbmltcG9ydCB7IFZpZXdSZWdpc3RyeSB9IGZyb20gJy4vdmlldy1yZWdpc3RyeSc7XHJcbmltcG9ydCB7IEVtaXR0ZXIsIERpc3Bvc2FibGUgfSBmcm9tICcuL2V2ZW50LWtpdCc7XHJcblxyXG5leHBvcnQgZW51bSBEb2NrU3R5bGUge1xyXG4gIG5vbmUsXHJcbiAgbGVmdCxcclxuICByaWdodCxcclxuICB0b3AsXHJcbiAgYm90dG9tXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEb2NrIHtcclxuICBwcml2YXRlIGxvY2F0aW9uOiBhbnk7XHJcbiAgcHJpdmF0ZSB3aWR0aE9ySGVpZ2h0OiBhbnk7XHJcbiAgcHJpdmF0ZSB2aWV3UmVnaXN0cnk6IFZpZXdSZWdpc3RyeTtcclxuICBwcml2YXRlIGRpZEFjdGl2YXRlOiBib29sZWFuO1xyXG4gIHByaXZhdGUgcGFuZUNvbnRhaW5lcjogUGFuZUNvbnRhaW5lcjtcclxuICBwcml2YXRlIHN0YXRlOiBhbnk7XHJcbiAgcHJpdmF0ZSBlbWl0dGVyOiBFbWl0dGVyO1xyXG5cclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZUhhbmRsZURyYWdTdGFydCA9IHRoaXMuaGFuZGxlUmVzaXplSGFuZGxlRHJhZ1N0YXJ0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmhhbmRsZVJlc2l6ZVRvRml0ID0gdGhpcy5oYW5kbGVSZXNpemVUb0ZpdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVNb3VzZU1vdmUgPSB0aGlzLmhhbmRsZU1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVNb3VzZVVwID0gdGhpcy5oYW5kbGVNb3VzZVVwLmJpbmQodGhpcyk7XHJcblxyXG4gICAgdGhpcy5sb2NhdGlvbiA9IHBhcmFtcy5sb2NhdGlvbjtcclxuICAgIHRoaXMud2lkdGhPckhlaWdodCA9IGdldFdpZHRoT3JIZWlnaHQodGhpcy5sb2NhdGlvbik7XHJcbiAgICB0aGlzLnZpZXdSZWdpc3RyeSA9IHBhcmFtcy52aWV3UmVnaXN0cnk7XHJcbiAgICB0aGlzLmRpZEFjdGl2YXRlID0gcGFyYW1zLmRpZEFjdGl2YXRlO1xyXG5cclxuICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG4gICAgdGhpcy5wYW5lQ29udGFpbmVyID0gbmV3IFBhbmVDb250YWluZXIoe1xyXG4gICAgICBsb2NhdGlvbjogdGhpcy5sb2NhdGlvbixcclxuICAgICAgdmlld1JlZ2lzdHJ5OiB0aGlzLnZpZXdSZWdpc3RyeVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2l6ZTogbnVsbCxcclxuICAgICAgdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIHNob3VsZEFuaW1hdGU6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICB9XHJcblxyXG4gIC8vIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBleHBsaWNpdGx5IGJ5IHRoZSBvYmplY3Qgd2hpY2ggYWRkcyB0aGUgRG9jayB0byB0aGUgZG9jdW1lbnQuXHJcbiAgZWxlbWVudEF0dGFjaGVkKCkge1xyXG4gICAgLy8gUmUtcmVuZGVyIHdoZW4gdGhlIGRvY2sgaXMgYXR0YWNoZWQgdG8gbWFrZSBzdXJlIHdlIHJlbWVhc3VyZSBzaXplcyBkZWZpbmVkIGluIENTUy5cclxuICAgIHRoaXMucmVuZGVyKHRoaXMuc3RhdGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICBnZXRMb2NhdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMucGFuZUNvbnRhaW5lci5kZXN0cm95KCk7XHJcbiAgICAvLyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVNb3VzZU1vdmUpO1xyXG4gICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZU1vdXNlVXApO1xyXG4gICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWcnLCB0aGlzLmhhbmRsZURyYWcpO1xyXG4gICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmhhbmRsZURyYWdFbmQpO1xyXG4gIH1cclxuXHJcbiAgc2V0SG92ZXJlZChob3ZlcmVkKSB7XHJcbiAgICBpZiAoaG92ZXJlZCA9PT0gdGhpcy5zdGF0ZS5ob3ZlcmVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcmVkIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RHJhZ2dpbmdJdGVtKGRyYWdnaW5nSXRlbSkge1xyXG4gICAgaWYgKGRyYWdnaW5nSXRlbSA9PT0gdGhpcy5zdGF0ZS5kcmFnZ2luZ0l0ZW0pIHsgcmV0dXJuOyB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgZHJhZ2dpbmdJdGVtIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IFNob3cgdGhlIGRvY2sgYW5kIGZvY3VzIGl0cyBhY3RpdmUge1BhbmV9LlxyXG4gIGFjdGl2YXRlKCkge1xyXG4gICAgdGhpcy5nZXRBY3RpdmVQYW5lKCkuYWN0aXZhdGUoKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBTaG93IHRoZSBkb2NrIHdpdGhvdXQgZm9jdXNpbmcgaXQuXHJcbiAgc2hvdygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyB2aXNpYmxlOiB0cnVlIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IEhpZGUgdGhlIGRvY2sgYW5kIGFjdGl2YXRlIHRoZSB7V29ya3NwYWNlQ2VudGVyfSBpZiB0aGUgZG9jayB3YXNcclxuICAvLyB3YXMgcHJldmlvdXNseSBmb2N1c2VkLlxyXG4gIGhpZGUoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgdmlzaWJsZTogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogVG9nZ2xlIHRoZSBkb2NrJ3MgdmlzaWJpbGl0eSB3aXRob3V0IGNoYW5naW5nIHRoZSB7V29ya3NwYWNlfSdzXHJcbiAgLy8gYWN0aXZlIHBhbmUgY29udGFpbmVyLlxyXG4gIHRvZ2dsZSgpIHtcclxuICAgIC8vIGNvbnN0IHN0YXRlID0geyB2aXNpYmxlOiAhdGhpcy5zdGF0ZS52aXNpYmxlIH07XHJcbiAgICAvLyBpZiAoIXN0YXRlLnZpc2libGUpIHsgc3RhdGUuaG92ZXJlZCA9IGZhbHNlOyB9XHJcbiAgICAvLyB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBDaGVjayBpZiB0aGUgZG9jayBpcyB2aXNpYmxlLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtCb29sZWFufS5cclxuICBpc1Zpc2libGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS52aXNpYmxlO1xyXG4gIH1cclxuXHJcbiAgc2V0U3RhdGUobmV3U3RhdGUpIHtcclxuICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBuZXh0U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBwcmV2U3RhdGUsIG5ld1N0YXRlKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGBzaG91bGRBbmltYXRlYCBzdGF0ZS4gVGhpcyBuZWVkcyB0byBiZSB3cml0dGVuIHRvIHRoZSBET00gYmVmb3JlIHVwZGF0aW5nIHRoZVxyXG4gICAgLy8gY2xhc3MgdGhhdCBjaGFuZ2VzIHRoZSBhbmltYXRlZCBwcm9wZXJ0eS4gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIGRlZmVyIHRoZSBjbGFzcyBjaGFuZ2UgYVxyXG4gICAgLy8gZnJhbWUgdG8gZW5zdXJlIHRoZSBwcm9wZXJ0eSBpcyBhbmltYXRlZCAob3Igbm90KSBhcHByb3ByaWF0ZWx5LCBob3dldmVyIHdlIGx1Y2sgb3V0IGluIHRoaXNcclxuICAgIC8vIGNhc2UgYmVjYXVzZSB0aGUgZHJhZyBzdGFydCBhbHdheXMgaGFwcGVucyBiZWZvcmUgdGhlIGl0ZW0gaXMgZHJhZ2dlZCBpbnRvIHRoZSB0b2dnbGUgYnV0dG9uLlxyXG4gICAgaWYgKG5leHRTdGF0ZS52aXNpYmxlICE9PSBwcmV2U3RhdGUudmlzaWJsZSkge1xyXG4gICAgICAvLyBOZXZlciBhbmltYXRlIHRvZ2dsaW5nIHZpc2liaWxpdHkuLi5cclxuICAgICAgbmV4dFN0YXRlLnNob3VsZEFuaW1hdGUgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoIW5leHRTdGF0ZS52aXNpYmxlICYmIG5leHRTdGF0ZS5kcmFnZ2luZ0l0ZW0gJiYgIXByZXZTdGF0ZS5kcmFnZ2luZ0l0ZW0pIHtcclxuICAgICAgLy8gLi4uYnV0IGRvIGFuaW1hdGUgaWYgeW91IHN0YXJ0IGRyYWdnaW5nIHdoaWxlIHRoZSBwYW5lbCBpcyBoaWRkZW4uXHJcbiAgICAgIG5leHRTdGF0ZS5zaG91bGRBbmltYXRlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnN0YXRlID0gbmV4dFN0YXRlO1xyXG4gICAgdGhpcy5yZW5kZXIodGhpcy5zdGF0ZSk7XHJcblxyXG4gICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgLy8gaWYgKHZpc2libGUgIT09IHByZXZTdGF0ZS52aXNpYmxlKSB7XHJcbiAgICAvLyAgIHRoaXMuZW1pdHRlci5lbWl0KCdkaWQtY2hhbmdlLXZpc2libGUnLCB2aXNpYmxlKTtcclxuICAgIC8vIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcihzdGF0ZSkge1xyXG5cclxuICB9XHJcblxyXG4gIGhhbmRsZURpZEFkZFBhbmVJdGVtKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuc2l6ZSA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaXplOiB0aGlzLmdldEluaXRpYWxTaXplKCkgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEaWRSZW1vdmVQYW5lSXRlbSgpIHtcclxuICAgIC8vIEhpZGUgdGhlIGRvY2sgaWYgeW91IHJlbW92ZSB0aGUgbGFzdCBpdGVtLlxyXG4gICAgaWYgKHRoaXMucGFuZUNvbnRhaW5lci5nZXRQYW5lSXRlbXMoKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZpc2libGU6IGZhbHNlLCBob3ZlcmVkOiBmYWxzZSwgc2l6ZTogbnVsbCB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZVJlc2l6ZUhhbmRsZURyYWdTdGFydCgpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcCk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgcmVzaXppbmc6IHRydWUgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVSZXNpemVUb0ZpdCgpIHtcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdldEFjdGl2ZVBhbmVJdGVtKCk7XHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICBjb25zdCBzaXplID0gZ2V0UHJlZmVycmVkU2l6ZShpdGVtLCB0aGlzLmdldExvY2F0aW9uKCkpO1xyXG4gICAgICBpZiAoc2l6ZSAhPSBudWxsKSB7IHRoaXMuc2V0U3RhdGUoeyBzaXplIH0pOyB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5idXR0b25zID09PSAwKSB7IC8vIFdlIG1pc3NlZCB0aGUgbW91c2V1cCBldmVudC4gRm9yIHNvbWUgcmVhc29uIGl0IGhhcHBlbnMgb24gV2luZG93c1xyXG4gICAgICB0aGlzLmhhbmRsZU1vdXNlVXAoZXZlbnQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2l6ZSA9IDA7XHJcbiAgICAvLyBzd2l0Y2ggKHRoaXMubG9jYXRpb24pIHtcclxuICAgIC8vICAgY2FzZSAnbGVmdCc6XHJcbiAgICAvLyAgICAgc2l6ZSA9IGV2ZW50LnBhZ2VYIC0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAvLyAgIGNhc2UgJ2JvdHRvbSc6XHJcbiAgICAvLyAgICAgc2l6ZSA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSBldmVudC5wYWdlWTtcclxuICAgIC8vICAgICBicmVhaztcclxuICAgIC8vICAgY2FzZSAncmlnaHQnOlxyXG4gICAgLy8gICAgIHNpemUgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBldmVudC5wYWdlWDtcclxuICAgIC8vICAgICBicmVhaztcclxuICAgIC8vIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoeyBzaXplIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTW91c2VVcChldmVudCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuaGFuZGxlTW91c2VNb3ZlKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5oYW5kbGVNb3VzZVVwKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyByZXNpemluZzogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBEZXRlcm1pbmUgd2hldGhlciB0aGUgY3Vyc29yIGlzIHdpdGhpbiB0aGUgZG9jayBob3ZlciBhcmVhLiBUaGlzIGlzbid0IGFzIHNpbXBsZSBhcyBqdXN0IHVzaW5nXHJcbiAgLy8gbW91c2VlbnRlci9sZWF2ZSBiZWNhdXNlIHdlIHdhbnQgdG8gYmUgYSBsaXR0bGUgbW9yZSBmb3JnaXZpbmcuIEZvciBleGFtcGxlLCBpZiB0aGUgY3Vyc29yIGlzXHJcbiAgLy8gb3ZlciB0aGUgZm9vdGVyLCB3ZSB3YW50IHRvIHNob3cgdGhlIGJvdHRvbSBkb2NrJ3MgdG9nZ2xlIGJ1dHRvbi4gQWxzbyBub3RlIHRoYXQgb3VyIGNyaXRlcmlhXHJcbiAgLy8gZm9yIGRldGVjdGluZyBlbnRyeSBhcmUgZGlmZmVyZW50IHRoYW4gZGV0ZWN0aW5nIGV4aXQgYnV0LCBpbiBvcmRlciBmb3IgdXMgdG8gYXZvaWQgaml0dGVyLCB0aGVcclxuICAvLyBhcmVhIGNvbnNpZGVyZWQgd2hlbiBkZXRlY3RpbmcgZXhpdCBNVVNUIGZ1bGx5IGVuY29tcGFzcyB0aGUgYXJlYSBjb25zaWRlcmVkIHdoZW4gZGV0ZWN0aW5nXHJcbiAgLy8gZW50cnkuXHJcbiAgcG9pbnRXaXRoaW5Ib3ZlckFyZWEgKHBvaW50LCBkZXRlY3RpbmdFeGl0KSB7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsU2l6ZSgpIHtcclxuICAgIC8vIFRoZSBpdGVtIG1heSBub3QgaGF2ZSBiZWVuIGFjdGl2YXRlZCB5ZXQuIElmIHRoYXQncyB0aGUgY2FzZSwganVzdCB1c2UgdGhlIGZpcnN0IGl0ZW0uXHJcbiAgICBjb25zdCBhY3RpdmVQYW5lSXRlbSA9IHRoaXMucGFuZUNvbnRhaW5lci5nZXRBY3RpdmVQYW5lSXRlbSgpIHx8IHRoaXMucGFuZUNvbnRhaW5lci5nZXRQYW5lSXRlbXMoKVswXTtcclxuICAgIC8vIElmIHRoZXJlIGFyZSBpdGVtcywgd2Ugc2hvdWxkIGhhdmUgYW4gZXhwbGljaXQgd2lkdGg7IGlmIG5vdCwgd2Ugc2hvdWxkbid0LlxyXG4gICAgcmV0dXJuIGFjdGl2ZVBhbmVJdGVtXHJcbiAgICAgID8gZ2V0UHJlZmVycmVkU2l6ZShhY3RpdmVQYW5lSXRlbSwgdGhpcy5sb2NhdGlvbilcclxuICAgICAgOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgc2VyaWFsaXplKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGVzZXJpYWxpemVyOiAnRG9jaycsXHJcbiAgICAgIHNpemU6IHRoaXMuc3RhdGUuc2l6ZSxcclxuICAgICAgcGFuZUNvbnRhaW5lcjogdGhpcy5wYW5lQ29udGFpbmVyLnNlcmlhbGl6ZSh7fSksXHJcbiAgICAgIHZpc2libGU6IHRoaXMuc3RhdGUudmlzaWJsZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWQsIGRlc2VyaWFsaXplck1hbmFnZXIpIHtcclxuICAgIHRoaXMucGFuZUNvbnRhaW5lci5kZXNlcmlhbGl6ZShzZXJpYWxpemVkLnBhbmVDb250YWluZXIsIGRlc2VyaWFsaXplck1hbmFnZXIpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHNpemU6IHNlcmlhbGl6ZWQuc2l6ZSB8fCB0aGlzLmdldEluaXRpYWxTaXplKCksXHJcbiAgICAgIC8vIElmIG5vIGl0ZW1zIGNvdWxkIGJlIGRlc2VyaWFsaXplZCwgd2UgZG9uJ3Qgd2FudCB0byBzaG93IHRoZSBkb2NrIChldmVuIGlmIGl0IHdhcyB2aXNpYmxlIGxhc3QgdGltZSlcclxuICAgICAgdmlzaWJsZTogc2VyaWFsaXplZC52aXNpYmxlICYmICh0aGlzLnBhbmVDb250YWluZXIuZ2V0UGFuZUl0ZW1zKCkubGVuZ3RoID4gMClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLypcclxuICBTZWN0aW9uOiBFdmVudCBTdWJzY3JpcHRpb25cclxuICAqL1xyXG5cclxuICAvLyBFc3NlbnRpYWw6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgZG9jayBjaGFuZ2VzLlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHZpc2liaWxpdHkgY2hhbmdlcy5cclxuICAvLyAgICogYHZpc2libGVgIHtCb29sZWFufSBJcyB0aGUgZG9jayBub3cgdmlzaWJsZT9cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlKClgIGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAgb25EaWRDaGFuZ2VWaXNpYmxlKGNhbGxiYWNrKSB7XHJcbiAgfVxyXG5cclxuICAvLyBFc3NlbnRpYWw6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aCB0aGUgY3VycmVudCBhbmQgYWxsIGZ1dHVyZSB2aXNpYmlsaXRpZXMgb2YgdGhlIGRvY2suXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdmlzaWJpbGl0eSBjaGFuZ2VzLlxyXG4gIC8vICAgKiBgdmlzaWJsZWAge0Jvb2xlYW59IElzIHRoZSBkb2NrIG5vdyB2aXNpYmxlP1xyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvYnNlcnZlVmlzaWJsZShjYWxsYmFjaykge1xyXG4gICAgY2FsbGJhY2sodGhpcy5pc1Zpc2libGUoKSk7XHJcbiAgICByZXR1cm4gdGhpcy5vbkRpZENoYW5nZVZpc2libGUoY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXNzZW50aWFsOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGggYWxsIGN1cnJlbnQgYW5kIGZ1dHVyZSBwYW5lcyBpdGVtc1xyXG4gIC8vIGluIHRoZSBkb2NrLlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHdpdGggY3VycmVudCBhbmQgZnV0dXJlIHBhbmUgaXRlbXMuXHJcbiAgLy8gICAqIGBpdGVtYCBBbiBpdGVtIHRoYXQgaXMgcHJlc2VudCBpbiB7OjpnZXRQYW5lSXRlbXN9IGF0IHRoZSB0aW1lIG9mXHJcbiAgLy8gICAgICBzdWJzY3JpcHRpb24gb3IgdGhhdCBpcyBhZGRlZCBhdCBzb21lIGxhdGVyIHRpbWUuXHJcbiAgLy9cclxuICAvLyBSZXR1cm5zIGEge0Rpc3Bvc2FibGV9IG9uIHdoaWNoIGAuZGlzcG9zZSgpYCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlLlxyXG4gIG9ic2VydmVQYW5lSXRlbXMoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub2JzZXJ2ZVBhbmVJdGVtcyhjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvLyBFc3NlbnRpYWw6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiB0aGUgYWN0aXZlIHBhbmUgaXRlbSBjaGFuZ2VzLlxyXG4gIC8vXHJcbiAgLy8gQmVjYXVzZSBvYnNlcnZlcnMgYXJlIGludm9rZWQgc3luY2hyb25vdXNseSwgaXQncyBpbXBvcnRhbnQgbm90IHRvIHBlcmZvcm1cclxuICAvLyBhbnkgZXhwZW5zaXZlIG9wZXJhdGlvbnMgdmlhIHRoaXMgbWV0aG9kLiBDb25zaWRlclxyXG4gIC8vIHs6Om9uRGlkU3RvcENoYW5naW5nQWN0aXZlUGFuZUl0ZW19IHRvIGRlbGF5IG9wZXJhdGlvbnMgdW50aWwgYWZ0ZXIgY2hhbmdlc1xyXG4gIC8vIHN0b3Agb2NjdXJyaW5nLlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGFjdGl2ZSBwYW5lIGl0ZW0gY2hhbmdlcy5cclxuICAvLyAgICogYGl0ZW1gIFRoZSBhY3RpdmUgcGFuZSBpdGVtLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLm9uRGlkQ2hhbmdlQWN0aXZlUGFuZUl0ZW0oY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXNzZW50aWFsOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdoZW4gdGhlIGFjdGl2ZSBwYW5lIGl0ZW0gc3RvcHNcclxuICAvLyBjaGFuZ2luZy5cclxuICAvL1xyXG4gIC8vIE9ic2VydmVycyBhcmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IDEwMG1zIGFmdGVyIHRoZSBsYXN0IGFjdGl2ZSBwYW5lIGl0ZW1cclxuICAvLyBjaGFuZ2UuIEhhbmRsaW5nIGNoYW5nZXMgaGVyZSByYXRoZXIgdGhhbiBpbiB0aGUgc3luY2hyb25vdXNcclxuICAvLyB7OjpvbkRpZENoYW5nZUFjdGl2ZVBhbmVJdGVtfSBwcmV2ZW50cyB1bm5lZWRlZCB3b3JrIGlmIHRoZSB1c2VyIGlzIHF1aWNrbHlcclxuICAvLyBjaGFuZ2luZyBvciBjbG9zaW5nIHRhYnMgYW5kIGVuc3VyZXMgY3JpdGljYWwgVUkgZmVlZGJhY2ssIGxpa2UgY2hhbmdpbmcgdGhlXHJcbiAgLy8gaGlnaGxpZ2h0ZWQgdGFiLCBnZXRzIHByaW9yaXR5IG92ZXIgd29yayB0aGF0IGNhbiBiZSBkb25lIGFzeW5jaHJvbm91c2x5LlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGFjdGl2ZSBwYW5lIGl0ZW0gc3RvcHRzXHJcbiAgLy8gICBjaGFuZ2luZy5cclxuICAvLyAgICogYGl0ZW1gIFRoZSBhY3RpdmUgcGFuZSBpdGVtLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZFN0b3BDaGFuZ2luZ0FjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLm9uRGlkU3RvcENoYW5naW5nQWN0aXZlUGFuZUl0ZW0oY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXNzZW50aWFsOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGggdGhlIGN1cnJlbnQgYWN0aXZlIHBhbmUgaXRlbSBhbmRcclxuICAvLyB3aXRoIGFsbCBmdXR1cmUgYWN0aXZlIHBhbmUgaXRlbXMgaW4gdGhlIGRvY2suXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYWN0aXZlIHBhbmUgaXRlbSBjaGFuZ2VzLlxyXG4gIC8vICAgKiBgaXRlbWAgVGhlIGN1cnJlbnQgYWN0aXZlIHBhbmUgaXRlbS5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlKClgIGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAgb2JzZXJ2ZUFjdGl2ZVBhbmVJdGVtKGNhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLm9ic2VydmVBY3RpdmVQYW5lSXRlbShjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogSW52b2tlIHRoZSBnaXZlbiBjYWxsYmFjayB3aGVuIGEgcGFuZSBpcyBhZGRlZCB0byB0aGUgZG9jay5cclxuICAvL1xyXG4gIC8vICogYGNhbGxiYWNrYCB7RnVuY3Rpb259IHRvIGJlIGNhbGxlZCBwYW5lcyBhcmUgYWRkZWQuXHJcbiAgLy8gICAqIGBldmVudGAge09iamVjdH0gd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6XHJcbiAgLy8gICAgICogYHBhbmVgIFRoZSBhZGRlZCBwYW5lLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZEFkZFBhbmUoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub25EaWRBZGRQYW5lKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIGJlZm9yZSBhIHBhbmUgaXMgZGVzdHJveWVkIGluIHRoZVxyXG4gIC8vIGRvY2suXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgYmVmb3JlIHBhbmVzIGFyZSBkZXN0cm95ZWQuXHJcbiAgLy8gICAqIGBldmVudGAge09iamVjdH0gd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6XHJcbiAgLy8gICAgICogYHBhbmVgIFRoZSBwYW5lIHRvIGJlIGRlc3Ryb3llZC5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlKClgIGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAgb25XaWxsRGVzdHJveVBhbmUoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub25XaWxsRGVzdHJveVBhbmUoY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiBhIHBhbmUgaXMgZGVzdHJveWVkIGluIHRoZSBkb2NrLlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHBhbmVzIGFyZSBkZXN0cm95ZWQuXHJcbiAgLy8gICAqIGBldmVudGAge09iamVjdH0gd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6XHJcbiAgLy8gICAgICogYHBhbmVgIFRoZSBkZXN0cm95ZWQgcGFuZS5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlKClgIGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAgb25EaWREZXN0cm95UGFuZShjYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5vbkRpZERlc3Ryb3lQYW5lKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGggYWxsIGN1cnJlbnQgYW5kIGZ1dHVyZSBwYW5lcyBpbiB0aGVcclxuICAvLyBkb2NrLlxyXG4gIC8vXHJcbiAgLy8gKiBgY2FsbGJhY2tgIHtGdW5jdGlvbn0gdG8gYmUgY2FsbGVkIHdpdGggY3VycmVudCBhbmQgZnV0dXJlIHBhbmVzLlxyXG4gIC8vICAgKiBgcGFuZWAgQSB7UGFuZX0gdGhhdCBpcyBwcmVzZW50IGluIHs6OmdldFBhbmVzfSBhdCB0aGUgdGltZSBvZlxyXG4gIC8vICAgICAgc3Vic2NyaXB0aW9uIG9yIHRoYXQgaXMgYWRkZWQgYXQgc29tZSBsYXRlciB0aW1lLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvYnNlcnZlUGFuZXMoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub2JzZXJ2ZVBhbmVzKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdoZW4gdGhlIGFjdGl2ZSBwYW5lIGNoYW5nZXMuXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYWN0aXZlIHBhbmUgY2hhbmdlcy5cclxuICAvLyAgICogYHBhbmVgIEEge1BhbmV9IHRoYXQgaXMgdGhlIGN1cnJlbnQgcmV0dXJuIHZhbHVlIG9mIHs6OmdldEFjdGl2ZVBhbmV9LlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZENoYW5nZUFjdGl2ZVBhbmUoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub25EaWRDaGFuZ2VBY3RpdmVQYW5lKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8vIEV4dGVuZGVkOiBJbnZva2UgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGggdGhlIGN1cnJlbnQgYWN0aXZlIHBhbmUgYW5kIHdoZW5cclxuICAvLyB0aGUgYWN0aXZlIHBhbmUgY2hhbmdlcy5cclxuICAvL1xyXG4gIC8vICogYGNhbGxiYWNrYCB7RnVuY3Rpb259IHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IGFuZCBmdXR1cmUgYWN0aXZlI1xyXG4gIC8vICAgcGFuZXMuXHJcbiAgLy8gICAqIGBwYW5lYCBBIHtQYW5lfSB0aGF0IGlzIHRoZSBjdXJyZW50IHJldHVybiB2YWx1ZSBvZiB7OjpnZXRBY3RpdmVQYW5lfS5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlKClgIGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAgb2JzZXJ2ZUFjdGl2ZVBhbmUoY2FsbGJhY2spIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXIub2JzZXJ2ZUFjdGl2ZVBhbmUoY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiBhIHBhbmUgaXRlbSBpcyBhZGRlZCB0byB0aGUgZG9jay5cclxuICAvL1xyXG4gIC8vICogYGNhbGxiYWNrYCB7RnVuY3Rpb259IHRvIGJlIGNhbGxlZCB3aGVuIHBhbmUgaXRlbXMgYXJlIGFkZGVkLlxyXG4gIC8vICAgKiBgZXZlbnRgIHtPYmplY3R9IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzOlxyXG4gIC8vICAgICAqIGBpdGVtYCBUaGUgYWRkZWQgcGFuZSBpdGVtLlxyXG4gIC8vICAgICAqIGBwYW5lYCB7UGFuZX0gY29udGFpbmluZyB0aGUgYWRkZWQgaXRlbS5cclxuICAvLyAgICAgKiBgaW5kZXhgIHtOdW1iZXJ9IGluZGljYXRpbmcgdGhlIGluZGV4IG9mIHRoZSBhZGRlZCBpdGVtIGluIGl0cyBwYW5lLlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZEFkZFBhbmVJdGVtKGNhbGxiYWNrKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLm9uRGlkQWRkUGFuZUl0ZW0oY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiBhIHBhbmUgaXRlbSBpcyBhYm91dCB0byBiZVxyXG4gIC8vIGRlc3Ryb3llZCwgYmVmb3JlIHRoZSB1c2VyIGlzIHByb21wdGVkIHRvIHNhdmUgaXQuXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgYmVmb3JlIHBhbmUgaXRlbXMgYXJlIGRlc3Ryb3llZC5cclxuICAvLyAgICogYGV2ZW50YCB7T2JqZWN0fSB3aXRoIHRoZSBmb2xsb3dpbmcga2V5czpcclxuICAvLyAgICAgKiBgaXRlbWAgVGhlIGl0ZW0gdG8gYmUgZGVzdHJveWVkLlxyXG4gIC8vICAgICAqIGBwYW5lYCB7UGFuZX0gY29udGFpbmluZyB0aGUgaXRlbSB0byBiZSBkZXN0cm95ZWQuXHJcbiAgLy8gICAgICogYGluZGV4YCB7TnVtYmVyfSBpbmRpY2F0aW5nIHRoZSBpbmRleCBvZiB0aGUgaXRlbSB0byBiZSBkZXN0cm95ZWQgaW5cclxuICAvLyAgICAgICBpdHMgcGFuZS5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYSB7RGlzcG9zYWJsZX0gb24gd2hpY2ggYC5kaXNwb3NlYCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlLlxyXG4gIG9uV2lsbERlc3Ryb3lQYW5lSXRlbShjYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5vbldpbGxEZXN0cm95UGFuZUl0ZW0oY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLy8gRXh0ZW5kZWQ6IEludm9rZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2hlbiBhIHBhbmUgaXRlbSBpcyBkZXN0cm95ZWQuXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgd2hlbiBwYW5lIGl0ZW1zIGFyZSBkZXN0cm95ZWQuXHJcbiAgLy8gICAqIGBldmVudGAge09iamVjdH0gd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6XHJcbiAgLy8gICAgICogYGl0ZW1gIFRoZSBkZXN0cm95ZWQgaXRlbS5cclxuICAvLyAgICAgKiBgcGFuZWAge1BhbmV9IGNvbnRhaW5pbmcgdGhlIGRlc3Ryb3llZCBpdGVtLlxyXG4gIC8vICAgICAqIGBpbmRleGAge051bWJlcn0gaW5kaWNhdGluZyB0aGUgaW5kZXggb2YgdGhlIGRlc3Ryb3llZCBpdGVtIGluIGl0c1xyXG4gIC8vICAgICAgIHBhbmUuXHJcbiAgLy9cclxuICAvLyBSZXR1cm5zIGEge0Rpc3Bvc2FibGV9IG9uIHdoaWNoIGAuZGlzcG9zZWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZERlc3Ryb3lQYW5lSXRlbShjYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5vbkRpZERlc3Ryb3lQYW5lSXRlbShjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogSW52b2tlIHRoZSBnaXZlbiBjYWxsYmFjayB3aGVuIHRoZSBob3ZlcmVkIHN0YXRlIG9mIHRoZSBkb2NrIGNoYW5nZXMuXHJcbiAgLy9cclxuICAvLyAqIGBjYWxsYmFja2Age0Z1bmN0aW9ufSB0byBiZSBjYWxsZWQgd2hlbiB0aGUgaG92ZXJlZCBzdGF0ZSBjaGFuZ2VzLlxyXG4gIC8vICAgKiBgaG92ZXJlZGAge0Jvb2xlYW59IElzIHRoZSBkb2NrIG5vdyBob3ZlcmVkP1xyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtEaXNwb3NhYmxlfSBvbiB3aGljaCBgLmRpc3Bvc2UoKWAgY2FuIGJlIGNhbGxlZCB0byB1bnN1YnNjcmliZS5cclxuICBvbkRpZENoYW5nZUhvdmVyZWQgKGNhbGxiYWNrKTogRGlzcG9zYWJsZSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyLm9uKCdkaWQtY2hhbmdlLWhvdmVyZWQnLCBjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKlxyXG4gIFNlY3Rpb246IFBhbmUgSXRlbXNcclxuICAqL1xyXG5cclxuICAvLyBFc3NlbnRpYWw6IEdldCBhbGwgcGFuZSBpdGVtcyBpbiB0aGUgZG9jay5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYW4ge0FycmF5fSBvZiBpdGVtcy5cclxuICBnZXRQYW5lSXRlbXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLmdldFBhbmVJdGVtcygpO1xyXG4gIH1cclxuXHJcbiAgLy8gRXNzZW50aWFsOiBHZXQgdGhlIGFjdGl2ZSB7UGFuZX0ncyBhY3RpdmUgaXRlbS5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYW4gcGFuZSBpdGVtIHtPYmplY3R9LlxyXG4gIGdldEFjdGl2ZVBhbmVJdGVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5nZXRBY3RpdmVQYW5lSXRlbSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gU2F2ZSBhbGwgcGFuZSBpdGVtcy5cclxuICBzYXZlQWxsKCkge1xyXG4gICAgdGhpcy5wYW5lQ29udGFpbmVyLnNhdmVBbGwoKTtcclxuICB9XHJcblxyXG4gIGNvbmZpcm1DbG9zZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLmNvbmZpcm1DbG9zZShvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgU2VjdGlvbjogUGFuZXNcclxuICAqL1xyXG5cclxuICAvLyBFeHRlbmRlZDogR2V0IGFsbCBwYW5lcyBpbiB0aGUgZG9jay5cclxuICAvL1xyXG4gIC8vIFJldHVybnMgYW4ge0FycmF5fSBvZiB7UGFuZX1zLlxyXG4gIGdldFBhbmVzKCk6IFBhbmVbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLmdldFBhbmVzKCk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogR2V0IHRoZSBhY3RpdmUge1BhbmV9LlxyXG4gIC8vXHJcbiAgLy8gUmV0dXJucyBhIHtQYW5lfS5cclxuICBnZXRBY3RpdmVQYW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5nZXRBY3RpdmVQYW5lKCk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogTWFrZSB0aGUgbmV4dCBwYW5lIGFjdGl2ZS5cclxuICBhY3RpdmF0ZU5leHRQYW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5hY3RpdmF0ZU5leHRQYW5lKCk7XHJcbiAgfVxyXG5cclxuICAvLyBFeHRlbmRlZDogTWFrZSB0aGUgcHJldmlvdXMgcGFuZSBhY3RpdmUuXHJcbiAgYWN0aXZhdGVQcmV2aW91c1BhbmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLmFjdGl2YXRlUHJldmlvdXNQYW5lKCk7XHJcbiAgfVxyXG5cclxuICBwYW5lRm9yVVJJKHVyaSkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZUNvbnRhaW5lci5wYW5lRm9yVVJJKHVyaSk7XHJcbiAgfVxyXG5cclxuICBwYW5lRm9ySXRlbShpdGVtKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVyLnBhbmVGb3JJdGVtKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRGVzdHJveSAoY2xvc2UpIHRoZSBhY3RpdmUgcGFuZS5cclxuICBkZXN0cm95QWN0aXZlUGFuZSgpIHtcclxuICAgIGNvbnN0IGFjdGl2ZVBhbmUgPSB0aGlzLmdldEFjdGl2ZVBhbmUoKTtcclxuICAgIGlmIChhY3RpdmVQYW5lICE9IG51bGwpIHtcclxuICAgICAgYWN0aXZlUGFuZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodChsb2NhdGlvbikge1xyXG4gIHJldHVybiBsb2NhdGlvbiA9PT0gJ2xlZnQnIHx8IGxvY2F0aW9uID09PSAncmlnaHQnID8gJ3dpZHRoJyA6ICdoZWlnaHQnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcmVmZXJyZWRTaXplKGl0ZW0sIGxvY2F0aW9uKSB7XHJcbiAgc3dpdGNoIChsb2NhdGlvbikge1xyXG4gICAgY2FzZSAnbGVmdCc6XHJcbiAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgIHJldHVybiB0eXBlb2YgaXRlbS5nZXRQcmVmZXJyZWRXaWR0aCA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgID8gaXRlbS5nZXRQcmVmZXJyZWRXaWR0aCgpXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIHR5cGVvZiBpdGVtLmdldFByZWZlcnJlZEhlaWdodCA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgID8gaXRlbS5nZXRQcmVmZXJyZWRIZWlnaHQoKVxyXG4gICAgICAgIDogbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEljb25OYW1lKGxvY2F0aW9uLCB2aXNpYmxlKSB7XHJcbiAgc3dpdGNoIChsb2NhdGlvbikge1xyXG4gICAgY2FzZSAncmlnaHQnOiByZXR1cm4gdmlzaWJsZSA/ICdpY29uLWNoZXZyb24tcmlnaHQnIDogJ2ljb24tY2hldnJvbi1sZWZ0JztcclxuICAgIGNhc2UgJ2JvdHRvbSc6IHJldHVybiB2aXNpYmxlID8gJ2ljb24tY2hldnJvbi1kb3duJyA6ICdpY29uLWNoZXZyb24tdXAnO1xyXG4gICAgY2FzZSAnbGVmdCc6IHJldHVybiB2aXNpYmxlID8gJ2ljb24tY2hldnJvbi1sZWZ0JyA6ICdpY29uLWNoZXZyb24tcmlnaHQnO1xyXG4gICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvY2F0aW9uOiAke2xvY2F0aW9ufWApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVjdENvbnRhaW5zUG9pbnQocmVjdCwgcG9pbnQpIHtcclxuICByZXR1cm4gKFxyXG4gICAgcG9pbnQueCA+PSByZWN0LmxlZnQgJiZcclxuICAgIHBvaW50LnkgPj0gcmVjdC50b3AgJiZcclxuICAgIHBvaW50LnggPD0gcmVjdC5yaWdodCAmJlxyXG4gICAgcG9pbnQueSA8PSByZWN0LmJvdHRvbVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIElzIHRoZSBpdGVtIGFsbG93ZWQgaW4gdGhlIGdpdmVuIGxvY2F0aW9uP1xyXG5mdW5jdGlvbiBpc0l0ZW1BbGxvd2VkKGl0ZW0sIGxvY2F0aW9uKSB7XHJcbiAgaWYgKHR5cGVvZiBpdGVtLmdldEFsbG93ZWRMb2NhdGlvbnMgIT09ICdmdW5jdGlvbicpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gaXRlbS5nZXRBbGxvd2VkTG9jYXRpb25zKCkuaW5jbHVkZXMobG9jYXRpb24pO1xyXG59XHJcbiJdfQ==