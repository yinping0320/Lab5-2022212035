/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { PanelContainer } from './panel-container';
import { Panel } from './panel';
import { Dock } from './dock';
import { WorkspaceCenter } from './workspace-center';
/**
 * @record
 */
export function PaneContainers() { }
if (false) {
    /** @type {?} */
    PaneContainers.prototype.center;
    /** @type {?} */
    PaneContainers.prototype.left;
    /** @type {?} */
    PaneContainers.prototype.right;
    /** @type {?} */
    PaneContainers.prototype.bottom;
}
/**
 * @record
 */
export function PanelContainers() { }
/** @type {?} */
var gsp = {};
/** @type {?} */
var ALL_LOCATIONS = ['center', 'left', 'right', 'bottom'];
var Workspace = /** @class */ (function () {
    function Workspace(params) {
        this.initOptions(params);
        this.initWorkspace();
        this.openers = [];
        this.frmOpeners = [];
        this.useFrmOpener = false;
        this.viewRegistry = params.viewRegistry;
        // this.subscribeToEvents();
    }
    /**
     * @private
     * @param {?} params
     * @return {?}
     */
    Workspace.prototype.initOptions = /**
     * @private
     * @param {?} params
     * @return {?}
     */
    function (params) {
        this.config = params.config || {};
    };
    /**
     * @private
     * @return {?}
     */
    Workspace.prototype.initWorkspace = /**
     * @private
     * @return {?}
     */
    function () {
        // 创建工作区停靠面板容器。
        this.paneContainers = {
            // 创建主区域。
            center: this.createCenter(),
            // 创建左侧面板。
            left: this.createDock('left'),
            // 创建右侧面板。
            right: this.createDock('right'),
            // 创建底部面板。
            bottom: this.createDock('bottom')
        };
        this.activePaneContainer = this.paneContainers.center;
        // 创建面板容器
        this.panelContainers = {
            top: new PanelContainer(this.viewRegistry, 'top'),
            left: new PanelContainer(this.viewRegistry, 'left', this.paneContainers.left),
            right: new PanelContainer(this.viewRegistry, 'right', this.paneContainers.right),
            bottom: new PanelContainer(this.viewRegistry, 'bottom', this.paneContainers.bottom),
            header: new PanelContainer(this.viewRegistry, 'header'),
            footer: new PanelContainer(this.viewRegistry, 'footer'),
            modal: new PanelContainer(this.viewRegistry, 'modal')
        };
    };
    Object.defineProperty(Workspace.prototype, "paneContainer", {
        get: /**
         * @return {?}
         */
        function () {
            return this.paneContainers.center.paneContainer;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 返回工作区元素
     */
    /**
     * 返回工作区元素
     * @return {?}
     */
    Workspace.prototype.getElement = /**
     * 返回工作区元素
     * @return {?}
     */
    function () {
    };
    /**
     * 创建主面板
     */
    /**
     * 创建主面板
     * @return {?}
     */
    Workspace.prototype.createCenter = /**
     * 创建主面板
     * @return {?}
     */
    function () {
        return new WorkspaceCenter({ viewRegistry: this.viewRegistry });
    };
    /**
     * 创建停靠面板
     * @param location 停靠面板位置
     */
    /**
     * 创建停靠面板
     * @param {?} location 停靠面板位置
     * @return {?}
     */
    Workspace.prototype.createDock = /**
     * 创建停靠面板
     * @param {?} location 停靠面板位置
     * @return {?}
     */
    function (location) {
        return new Dock({
            location: location,
            viewRegistry: this.viewRegistry
        });
    };
    /**
     * 重置工作区
     * @param packageManager 包管理器
     */
    /**
     * 重置工作区
     * @param {?} packageManager 包管理器
     * @return {?}
     */
    Workspace.prototype.reset = /**
     * 重置工作区
     * @param {?} packageManager 包管理器
     * @return {?}
     */
    function (packageManager) {
        this.packageManager = packageManager;
        this.destroyed();
        this.initWorkspace();
    };
    // Called by the Serializable mixin during serialization.
    /**
     * 序列化工作区配置
     */
    // Called by the Serializable mixin during serialization.
    /**
     * 序列化工作区配置
     * @return {?}
     */
    Workspace.prototype.serialize = 
    // Called by the Serializable mixin during serialization.
    /**
     * 序列化工作区配置
     * @return {?}
     */
    function () {
    };
    /**
     * 反序列化工作区配置
     * @param state state
     * @param deserializerManager dm
     */
    /**
     * 反序列化工作区配置
     * @param {?} state state
     * @param {?} deserializerManager dm
     * @return {?}
     */
    Workspace.prototype.deserialize = /**
     * 反序列化工作区配置
     * @param {?} state state
     * @param {?} deserializerManager dm
     * @return {?}
     */
    function (state, deserializerManager) {
    };
    // Updates the application's title and proxy icon based on whichever file is
    // open.
    // Updates the application's title and proxy icon based on whichever file is
    // open.
    /**
     * @return {?}
     */
    Workspace.prototype.updateWindowTitle = 
    // Updates the application's title and proxy icon based on whichever file is
    // open.
    /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} itemOrURI
     * @param {?=} options
     * @return {?}
     */
    Workspace.prototype.open = /**
     * @param {?} itemOrURI
     * @param {?=} options
     * @return {?}
     */
    function (itemOrURI, options) {
        if (options === void 0) { options = {}; }
        /** @type {?} */
        var uri;
        /** @type {?} */
        var item;
        if (typeof itemOrURI === 'string') {
            uri = itemOrURI; // this.project.resolvePath(itemOrURI);
        }
        else if (itemOrURI) {
            item = itemOrURI;
            if (typeof item.getURI === 'function') {
                uri = item.getURI();
            }
        }
        if (!this.config.get('core.allowPendingPaneItems')) {
            options.pending = false;
        }
        // Avoid adding URLs as recent documents to work-around this Spotlight crash:
        // https://github.com/atom/atom/issues/10071
        // if (uri && (!url.parse(uri).protocol || process.platform === 'win32')) {
        //   this.applicationDelegate.addRecentDocument(uri);
        // }
        /** @type {?} */
        var pane;
        /** @type {?} */
        var itemExistsInWorkspace;
        // Try to find an existing item in the workspace.
        if (item || uri) {
            if (options.pane) {
                pane = options.pane;
            }
            else if (options.searchAllPanes) {
                pane = item ? this.paneForItem(item) : this.paneForURI(uri);
            }
            else {
                // If an item with the given URI is already in the workspace, assume
                // that item's pane container is the preferred location for that URI.
                /** @type {?} */
                var container = void 0;
                if (uri) {
                    container = this.paneContainerForURI(uri);
                }
                if (!container) {
                    container = this.getActivePaneContainer();
                }
                // The `split` option affects where we search for the item.
                pane = container.getActivePane();
                switch (options.split) {
                    case 'left':
                        pane = pane.findLeftmostSibling();
                        break;
                    case 'right':
                        pane = pane.findRightmostSibling();
                        break;
                    case 'up':
                        pane = pane.findTopmostSibling();
                        break;
                    case 'down':
                        pane = pane.findBottommostSibling();
                        break;
                }
            }
            if (pane) {
                if (item) {
                    itemExistsInWorkspace = pane.getItems().includes(item);
                }
                else {
                    item = pane.itemForURI(uri);
                    itemExistsInWorkspace = item != null;
                }
            }
        }
        // If we already have an item at this stage, we won't need to do an async
        // lookup of the URI, so we yield the event loop to ensure this method
        // is consistently asynchronous.
        if (item) {
            Promise.resolve();
        }
        if (!itemExistsInWorkspace) {
            item = item || this.createItemForURI(uri, options);
            if (!item) {
                return;
            }
            if (options.pane) {
                pane = options.pane;
            }
            else {
                /** @type {?} */
                var location_1 = options.location;
                // if (!location && !options.split && uri && this.enablePersistence) {
                //   // location = await;
                //   this.itemLocationStore.load(uri);
                // }
                if (!location_1 && typeof item.getDefaultLocation === 'function') {
                    location_1 = item.getDefaultLocation();
                }
                /** @type {?} */
                var allowedLocations = typeof item.getAllowedLocations === 'function' ? item.getAllowedLocations() : ALL_LOCATIONS;
                location_1 = allowedLocations.includes(location_1) ? location_1 : allowedLocations[0];
                /** @type {?} */
                var container = this.paneContainers[location_1] || this.getCenter();
                pane = container.getActivePane();
                switch (options.split) {
                    case 'left':
                        pane = pane.findLeftmostSibling();
                        break;
                    case 'right':
                        pane = pane.findOrCreateRightmostSibling();
                        break;
                    case 'up':
                        pane = pane.findTopmostSibling();
                        break;
                    case 'down':
                        pane = pane.findOrCreateBottommostSibling();
                        break;
                }
            }
        }
        if (!options.pending && (pane.getPendingItem() === item)) {
            pane.clearPendingItem();
        }
        this.itemOpened(item);
        if (options.activateItem === false) {
            pane.addItem(item, { pending: options.pending });
        }
        else {
            pane.activateItem(item, { pending: options.pending });
        }
        if (options.activatePane !== false) {
            pane.activate();
        }
        /** @type {?} */
        var initialColumn = 0;
        /** @type {?} */
        var initialLine = 0;
        if (!Number.isNaN(options.initialLine)) {
            initialLine = options.initialLine;
        }
        if (!Number.isNaN(options.initialColumn)) {
            initialColumn = options.initialColumn;
        }
        if (initialLine >= 0 || initialColumn >= 0) {
            if (typeof item.setCursorBufferPosition === 'function') {
                item.setCursorBufferPosition([initialLine, initialColumn]);
            }
        }
        /** @type {?} */
        var index = pane.getActiveItemIndex();
        return item;
    };
    /**
     * @param {?} itemOrURI
     * @return {?}
     */
    Workspace.prototype.hide = /**
     * @param {?} itemOrURI
     * @return {?}
     */
    function (itemOrURI) {
        var e_1, _a, e_2, _b;
        /** @type {?} */
        var foundItems = false;
        try {
            // If any visible item has the given URI, hide it
            for (var _c = tslib_1.__values(this.getPaneContainers()), _d = _c.next(); !_d.done; _d = _c.next()) {
                var container = _d.value;
                /** @type {?} */
                var isCenter = container === this.getCenter();
                if (isCenter || ((/** @type {?} */ (container))).isVisible()) {
                    try {
                        for (var _e = tslib_1.__values(container.getPanes()), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var pane = _f.value;
                            /** @type {?} */
                            var activeItem = pane.getActiveItem();
                            /** @type {?} */
                            var foundItem = (activeItem != null && (activeItem === itemOrURI ||
                                typeof activeItem.getURI === 'function' && activeItem.getURI() === itemOrURI));
                            if (foundItem) {
                                foundItems = true;
                                // We can't really hide the center so we just destroy the item.
                                if (isCenter) {
                                    pane.destroyItem(activeItem);
                                }
                                else {
                                    ((/** @type {?} */ (container))).hide();
                                }
                            }
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return foundItems;
    };
    /**
     * @param {?} itemOrURI
     * @return {?}
     */
    Workspace.prototype.toggle = /**
     * @param {?} itemOrURI
     * @return {?}
     */
    function (itemOrURI) {
        if (this.hide(itemOrURI)) {
            return Promise.resolve();
        }
        else {
            return this.open(itemOrURI, { searchAllPanes: true });
        }
    };
    /**
     * @param {?=} fileUri
     * @param {?=} options
     * @return {?}
     */
    Workspace.prototype.openSync = /**
     * @param {?=} fileUri
     * @param {?=} options
     * @return {?}
     */
    function (fileUri, options) {
        if (fileUri === void 0) { fileUri = ''; }
        if (options === void 0) { options = { initialColumn: '', initialLine: '', activateItem: '', activatePane: '' }; }
        var e_3, _a;
        var initialLine = options.initialLine, initialColumn = options.initialColumn;
        /** @type {?} */
        var activatePane = options.activatePane != null ? options.activatePane : true;
        /** @type {?} */
        var activateItem = options.activateItem != null ? options.activateItem : true;
        /** @type {?} */
        var uri = fileUri;
        // this.project.resolvePath(uri_);
        /** @type {?} */
        var item = this.getActivePane().itemForURI(uri);
        if (uri && (item == null)) {
            try {
                for (var _b = tslib_1.__values(this.getOpeners()), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var opener_1 = _c.value;
                    item = opener_1(uri, options);
                    if (item) {
                        break;
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
        if (item == null) {
            item = this.project.openSync(uri, { initialLine: initialLine, initialColumn: initialColumn });
        }
        if (activateItem) {
            this.getActivePane().activateItem(item);
        }
        this.itemOpened(item);
        if (activatePane) {
            this.getActivePane().activate();
        }
        return item;
    };
    /**
     * @param {?} uri
     * @param {?} pane
     * @return {?}
     */
    Workspace.prototype.openURIInPane = /**
     * @param {?} uri
     * @param {?} pane
     * @return {?}
     */
    function (uri, pane) {
        return this.open(uri, { pane: pane });
    };
    /**
     * @param {?} uri
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.createItemForURI = /**
     * @param {?} uri
     * @param {?} options
     * @return {?}
     */
    function (uri, options) {
        var e_4, _a;
        if (uri != null) {
            try {
                for (var _b = tslib_1.__values(this.getOpeners()), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var opener_2 = _c.value;
                    /** @type {?} */
                    var item = opener_2(uri, options);
                    if (item != null) {
                        if (!item.getURI || typeof item.getURI !== 'function' || !item.getUri || typeof item.getURI !== 'function') {
                            item.getUri = function () { return uri; };
                        }
                        return item;
                    }
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
        try {
            // return this.openTextFile(uri, options);
        }
        catch (error) {
            // switch (error.code) {
            //   case 'CANCELLED':
            //     return Promise.resolve();
            //   case 'EACCES':
            //     this.notificationManager.addWarning(`Permission denied '${error.path}'`);
            //     return Promise.resolve();
            //   case 'EPERM':
            //   case 'EBUSY':
            //   case 'ENXIO':
            //   case 'EIO':
            //   case 'ENOTCONN':
            //   case 'UNKNOWN':
            //   case 'ECONNRESET':
            //   case 'EINVAL':
            //   case 'EMFILE':
            //   case 'ENOTDIR':
            //   case 'EAGAIN':
            //     this.notificationManager.addWarning(
            //       `Unable to open '${error.path != null ? error.path : uri}'`,
            //       { detail: error.message }
            //     );
            //     return Promise.resolve();
            //   default:
            //     throw error;
            // }
        }
    };
    /**
     * @return {?}
     */
    Workspace.prototype.reopenItem = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var uri = this.destroyedItemURIs.pop();
        if (uri) {
            return this.open(uri);
        }
        else {
            return Promise.resolve();
        }
    };
    /**
     * @param {?} opener
     * @return {?}
     */
    Workspace.prototype.addOpener = /**
     * @param {?} opener
     * @return {?}
     */
    function (opener) {
        this.openers.push(opener);
        // return new Disposable(() => { _.remove(this.openers, opener); });
    };
    /**
     * @param {?} opener
     * @return {?}
     */
    Workspace.prototype.addFrmOpener = /**
     * @param {?} opener
     * @return {?}
     */
    function (opener) {
        if (!this.useFrmOpener) {
            this.useFrmOpener = true;
        }
        this.frmOpeners.push(opener);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getOpeners = /**
     * @return {?}
     */
    function () {
        return this.useFrmOpener ? this.frmOpeners : this.openers;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getPaneItems = /**
     * @return {?}
     */
    function () {
        return new Array().concat(this.getPaneContainers().map(function (container) { return container.getPaneItems(); }));
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getActivePaneItem = /**
     * @return {?}
     */
    function () {
        return this.getActivePaneContainer().getActivePaneItem();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.saveAll = /**
     * @return {?}
     */
    function () {
        this.getPaneContainers().forEach(function (container) {
            container.saveAll();
        });
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.confirmClose = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return Promise.all(this.getPaneContainers().map(function (container) {
            return container.confirmClose(options);
        })).then(function (results) { return !results.find(function (item) { return item === false; }); });
    };
    /**
     * @return {?}
     */
    Workspace.prototype.saveActivePaneItem = /**
     * @return {?}
     */
    function () {
        return this.getCenter().getActivePane().saveActiveItem();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.saveActivePaneItemAs = /**
     * @return {?}
     */
    function () {
        this.getCenter().getActivePane().saveActiveItemAs();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.destroyActivePaneItem = /**
     * @return {?}
     */
    function () {
        return this.getActivePane().destroyActiveItem();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getActivePaneContainer = /**
     * @return {?}
     */
    function () {
        return this.activePaneContainer;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getPanes = /**
     * @return {?}
     */
    function () {
        return new Array().concat(this.getPaneContainers().map(function (container) { return container.getPanes(); }));
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getVisiblePanes = /**
     * @return {?}
     */
    function () {
        return new Array().concat(this.getVisiblePaneContainers().map(function (container) { return container.getPanes(); }));
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getActivePane = /**
     * @return {?}
     */
    function () {
        return this.getActivePaneContainer().getActivePane();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.activateNextPane = /**
     * @return {?}
     */
    function () {
        return this.getActivePaneContainer().activateNextPane();
    };
    /**
     * @return {?}
     */
    Workspace.prototype.activatePreviousPane = /**
     * @return {?}
     */
    function () {
        return this.getActivePaneContainer().activatePreviousPane();
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    Workspace.prototype.paneContainerForURI = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        return this.getPaneContainers().find(function (container) { return !!container.paneForURI(uri); });
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    Workspace.prototype.paneContainerForItem = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        return this.getPaneContainers().find(function (container) { return !!container.paneForItem(uri); });
    };
    /**
     * @param {?} uri
     * @return {?}
     */
    Workspace.prototype.paneForURI = /**
     * @param {?} uri
     * @return {?}
     */
    function (uri) {
        var e_5, _a;
        try {
            for (var _b = tslib_1.__values(this.getPaneContainers()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var location_2 = _c.value;
                /** @type {?} */
                var pane = location_2.paneForURI(uri);
                if (pane != null) {
                    return pane;
                }
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    Workspace.prototype.paneForItem = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        var e_6, _a;
        try {
            for (var _b = tslib_1.__values(this.getPaneContainers()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var location_3 = _c.value;
                /** @type {?} */
                var pane = location_3.paneForItem(item);
                if (pane != null) {
                    return pane;
                }
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
    };
    /**
     * @return {?}
     */
    Workspace.prototype.destroyActivePane = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var activePane = this.getActivePane();
        if (activePane != null) {
            activePane.destroy();
        }
    };
    /**
     * @return {?}
     */
    Workspace.prototype.closeActivePaneItemOrEmptyPaneOrWindow = /**
     * @return {?}
     */
    function () {
        if (this.getCenter().getActivePaneItem() != null) {
            this.getCenter().getActivePane().destroyActiveItem();
        }
        else if (this.getCenter().getPanes().length > 1) {
            this.getCenter().destroyActivePane();
        }
        else if (this.config.get('core.closeEmptyWindows')) {
            // 原为关闭atom应用窗口。ide中暂不关闭整个窗口。
            // atom.close();
        }
    };
    /**
     * @param {?} item
     * @return {?}
     */
    Workspace.prototype.itemOpened = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
    };
    /**
     * @return {?}
     */
    Workspace.prototype.destroyed = /**
     * @return {?}
     */
    function () {
        this.paneContainers.center.destroy();
        this.paneContainers.left.destroy();
        this.paneContainers.right.destroy();
        this.paneContainers.bottom.destroy();
        for (var panelLocation in this.panelContainers) {
            if (this.panelContainers.hasOwnProperty(panelLocation)) {
                /** @type {?} */
                var panelContainer = this.panelContainers[panelLocation];
                this.paneContainer.destroy();
            }
        }
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getCenter = /**
     * @return {?}
     */
    function () {
        return this.paneContainers.center;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getLeftDock = /**
     * @return {?}
     */
    function () {
        return this.paneContainers.left;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getRightDock = /**
     * @return {?}
     */
    function () {
        return this.paneContainers.right;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getBottomDock = /**
     * @return {?}
     */
    function () {
        return this.paneContainers.bottom;
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getPaneContainers = /**
     * @return {?}
     */
    function () {
        return [
            this.paneContainers.center,
            this.paneContainers.left,
            this.paneContainers.right,
            this.paneContainers.bottom
        ];
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getVisiblePaneContainers = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var center = this.getCenter();
        return this.getPaneContainers()
            .filter(function (container) { return container === center || ((/** @type {?} */ (container))).isVisible(); });
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getBottomPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('bottom');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addBottomPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('bottom', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getLeftPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('left');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addLeftPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('left', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getRightPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('right');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addRightPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('right', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getTopPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('top');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addTopPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('top', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getHeaderPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('header');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addHeaderPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('header', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getFooterPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('footer');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addFooterPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('footer', options);
    };
    /**
     * @return {?}
     */
    Workspace.prototype.getModalPanels = /**
     * @return {?}
     */
    function () {
        return this.getPanels('modal');
    };
    /**
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addModalPanel = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        return this.addPanel('modal', options);
    };
    /**
     * @param {?} item
     * @return {?}
     */
    Workspace.prototype.panelForItem = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        for (var location_4 in this.panelContainers) {
            if (this.panelContainers.hasOwnProperty(location_4)) {
                /** @type {?} */
                var panel = this.panelContainers[location_4].panelForItem(item);
                if (panel != null) {
                    return panel;
                }
            }
        }
        return null;
    };
    /**
     * @param {?} location
     * @return {?}
     */
    Workspace.prototype.getPanelContainer = /**
     * @param {?} location
     * @return {?}
     */
    function (location) {
        return this.panelContainers[location];
    };
    /**
     * @param {?} location
     * @return {?}
     */
    Workspace.prototype.getPanels = /**
     * @param {?} location
     * @return {?}
     */
    function (location) {
        return this.panelContainers[location].getPanels();
    };
    /**
     * @param {?} location
     * @param {?} options
     * @return {?}
     */
    Workspace.prototype.addPanel = /**
     * @param {?} location
     * @param {?} options
     * @return {?}
     */
    function (location, options) {
        /** @type {?} */
        var panel = new Panel(options, this.viewRegistry);
        return this.panelContainers[location].addPanel(panel);
    };
    return Workspace;
}());
export { Workspace };
if (false) {
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.paneContainers;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.panelContainers;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.activePaneContainer;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.viewRegistry;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.packageManager;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.openers;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.frmOpeners;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.useFrmOpener;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.notificationManager;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.config;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.destroyedItemURIs;
    /**
     * @type {?}
     * @private
     */
    Workspace.prototype.project;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya3NwYWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9pZGUtZGV2a2l0LyIsInNvdXJjZXMiOlsibGliL2lkZWZyYW1ld29yay9nc3Avd29ya3NwYWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxLQUFLLEVBQWdCLE1BQU0sU0FBUyxDQUFDO0FBQzlDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDOUIsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7O0FBTXJELG9DQUtDOzs7SUFKQyxnQ0FBd0I7O0lBQ3hCLDhCQUFXOztJQUNYLCtCQUFZOztJQUNaLGdDQUFhOzs7OztBQUdmLHFDQVNDOztJQUNLLEdBQUcsR0FBUSxFQUFFOztJQUNiLGFBQWEsR0FBRyxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQztBQUMzRDtJQWNFLG1CQUFZLE1BQU07UUFDaEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQ3hDLDRCQUE0QjtJQUM5QixDQUFDOzs7Ozs7SUFFTywrQkFBVzs7Ozs7SUFBbkIsVUFBb0IsTUFBTTtRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDO0lBQ3BDLENBQUM7Ozs7O0lBRU8saUNBQWE7Ozs7SUFBckI7UUFDRSxlQUFlO1FBQ2YsSUFB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QUNwQixzQ0FBaUM7Ozs7O0lBQ2pDLDRCQUFxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhbmVsQ29udGFpbmVyIH0gZnJvbSAnLi9wYW5lbC1jb250YWluZXInO1xyXG5pbXBvcnQgeyBQYW5lbCwgUGFuZWxPcHRpb25zIH0gZnJvbSAnLi9wYW5lbCc7XHJcbmltcG9ydCB7IERvY2sgfSBmcm9tICcuL2RvY2snO1xyXG5pbXBvcnQgeyBXb3Jrc3BhY2VDZW50ZXIgfSBmcm9tICcuL3dvcmtzcGFjZS1jZW50ZXInO1xyXG5pbXBvcnQgeyBWaWV3UmVnaXN0cnkgfSBmcm9tICcuL3ZpZXctcmVnaXN0cnknO1xyXG5pbXBvcnQgeyBQYW5lbExvY2F0aW9uIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IFBhbmVDb250YWluZXIgfSBmcm9tICcuL3BhbmUtY29udGFpbmVyJztcclxuaW1wb3J0IHsgUGFuZSB9IGZyb20gJy4vcGFuZSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBhbmVDb250YWluZXJzIHtcclxuICBjZW50ZXI6IFdvcmtzcGFjZUNlbnRlcjtcclxuICBsZWZ0OiBEb2NrO1xyXG4gIHJpZ2h0OiBEb2NrO1xyXG4gIGJvdHRvbTogRG9jaztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQYW5lbENvbnRhaW5lcnMge1xyXG4gIC8vIHRvcDogUGFuZWxDb250YWluZXI7XHJcbiAgLy8gbGVmdDogUGFuZWxDb250YWluZXI7XHJcbiAgLy8gcmlnaHQ6IFBhbmVsQ29udGFpbmVyO1xyXG4gIC8vIGJvdHRvbTogUGFuZWxDb250YWluZXI7XHJcbiAgLy8gaGVhZGVyOiBQYW5lbENvbnRhaW5lcjtcclxuICAvLyBmb290ZXI6IFBhbmVsQ29udGFpbmVyO1xyXG4gIC8vIG1vZGFsOiBQYW5lbENvbnRhaW5lcjtcclxuICBbbG9jYXRpb246IHN0cmluZ106IFBhbmVsQ29udGFpbmVyO1xyXG59XHJcbmNvbnN0IGdzcDogYW55ID0ge307XHJcbmNvbnN0IEFMTF9MT0NBVElPTlMgPSBbJ2NlbnRlcicsICdsZWZ0JywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xyXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcclxuICBwcml2YXRlIHBhbmVDb250YWluZXJzOiBQYW5lQ29udGFpbmVycztcclxuICBwcml2YXRlIHBhbmVsQ29udGFpbmVyczogUGFuZWxDb250YWluZXJzO1xyXG4gIHByaXZhdGUgYWN0aXZlUGFuZUNvbnRhaW5lcjogRG9jayB8IFdvcmtzcGFjZUNlbnRlcjtcclxuICBwcml2YXRlIHZpZXdSZWdpc3RyeTogVmlld1JlZ2lzdHJ5O1xyXG4gIHByaXZhdGUgcGFja2FnZU1hbmFnZXI6IGFueTtcclxuICBwcml2YXRlIG9wZW5lcnM6IGFueVtdO1xyXG4gIHByaXZhdGUgZnJtT3BlbmVyczogYW55W107XHJcbiAgcHJpdmF0ZSB1c2VGcm1PcGVuZXI6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBub3RpZmljYXRpb25NYW5hZ2VyOiBhbnk7XHJcbiAgcHJpdmF0ZSBjb25maWc6IGFueTtcclxuICBwcml2YXRlIGRlc3Ryb3llZEl0ZW1VUklzOiBhbnlbXTtcclxuICBwcml2YXRlIHByb2plY3Q6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICB0aGlzLmluaXRPcHRpb25zKHBhcmFtcyk7XHJcbiAgICB0aGlzLmluaXRXb3Jrc3BhY2UoKTtcclxuICAgIHRoaXMub3BlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5mcm1PcGVuZXJzID0gW107XHJcbiAgICB0aGlzLnVzZUZybU9wZW5lciA9IGZhbHNlO1xyXG4gICAgdGhpcy52aWV3UmVnaXN0cnkgPSBwYXJhbXMudmlld1JlZ2lzdHJ5O1xyXG4gICAgLy8gdGhpcy5zdWJzY3JpYmVUb0V2ZW50cygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0T3B0aW9ucyhwYXJhbXMpIHtcclxuICAgIHRoaXMuY29uZmlnID0gcGFyYW1zLmNvbmZpZyB8fCB7fTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdFdvcmtzcGFjZSgpIHtcclxuICAgIC8vIOWIm+W7uuW3peS9nOWMuuWBnOmdoOmdouadv+WuueWZqOOAglxyXG4gICAgdGhpcy5wYW5lQ29udGFpbmVycyA9IHtcclxuICAgICAgLy8g5Yib5bu65Li75Yy65Z+f44CCXHJcbiAgICAgIGNlbnRlcjogdGhpcy5jcmVhdGVDZW50ZXIoKSxcclxuICAgICAgLy8g5Yib5bu65bem5L6n6Z2i5p2/44CCXHJcbiAgICAgIGxlZnQ6IHRoaXMuY3JlYXRlRG9jaygnbGVmdCcpLFxyXG4gICAgICAvLyDliJvlu7rlj7PkvqfpnaLmnb/jgIJcclxuICAgICAgcmlnaHQ6IHRoaXMuY3JlYXRlRG9jaygncmlnaHQnKSxcclxuICAgICAgLy8g5Yib5bu65bqV6YOo6Z2i5p2/44CCXHJcbiAgICAgIGJvdHRvbTogdGhpcy5jcmVhdGVEb2NrKCdib3R0b20nKVxyXG4gICAgfTtcclxuICAgIHRoaXMuYWN0aXZlUGFuZUNvbnRhaW5lciA9IHRoaXMucGFuZUNvbnRhaW5lcnMuY2VudGVyO1xyXG4gICAgLy8g5Yib5bu66Z2i5p2/5a655ZmoXHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVycyA9IHtcclxuICAgICAgdG9wOiBuZXcgUGFuZWxDb250YWluZXIodGhpcy52aWV3UmVnaXN0cnksICd0b3AnKSxcclxuICAgICAgbGVmdDogbmV3IFBhbmVsQ29udGFpbmVyKHRoaXMudmlld1JlZ2lzdHJ5LCAnbGVmdCcsIHRoaXMucGFuZUNvbnRhaW5lcnMubGVmdCksXHJcbiAgICAgIHJpZ2h0OiBuZXcgUGFuZWxDb250YWluZXIodGhpcy52aWV3UmVnaXN0cnksICdyaWdodCcsIHRoaXMucGFuZUNvbnRhaW5lcnMucmlnaHQpLFxyXG4gICAgICBib3R0b206IG5ldyBQYW5lbENvbnRhaW5lcih0aGlzLnZpZXdSZWdpc3RyeSwgJ2JvdHRvbScsIHRoaXMucGFuZUNvbnRhaW5lcnMuYm90dG9tKSxcclxuICAgICAgaGVhZGVyOiBuZXcgUGFuZWxDb250YWluZXIodGhpcy52aWV3UmVnaXN0cnksICdoZWFkZXInKSxcclxuICAgICAgZm9vdGVyOiBuZXcgUGFuZWxDb250YWluZXIodGhpcy52aWV3UmVnaXN0cnksICdmb290ZXInKSxcclxuICAgICAgbW9kYWw6IG5ldyBQYW5lbENvbnRhaW5lcih0aGlzLnZpZXdSZWdpc3RyeSwgJ21vZGFsJylcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgcGFuZUNvbnRhaW5lcigpOiBQYW5lQ29udGFpbmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXJzLmNlbnRlci5wYW5lQ29udGFpbmVyO1xyXG4gIH1cclxuICAvKipcclxuICAgKiDov5Tlm57lt6XkvZzljLrlhYPntKBcclxuICAgKi9cclxuICBnZXRFbGVtZW50KCkge1xyXG4gIH1cclxuICAvKipcclxuICAgKiDliJvlu7rkuLvpnaLmnb9cclxuICAgKi9cclxuICBjcmVhdGVDZW50ZXIoKSB7XHJcbiAgICByZXR1cm4gbmV3IFdvcmtzcGFjZUNlbnRlcih7IHZpZXdSZWdpc3RyeTogdGhpcy52aWV3UmVnaXN0cnkgfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWIm+W7uuWBnOmdoOmdouadv1xyXG4gICAqIEBwYXJhbSBsb2NhdGlvbiDlgZzpnaDpnaLmnb/kvY3nva5cclxuICAgKi9cclxuICBjcmVhdGVEb2NrKGxvY2F0aW9uKSB7XHJcbiAgICByZXR1cm4gbmV3IERvY2soe1xyXG4gICAgICBsb2NhdGlvbixcclxuICAgICAgdmlld1JlZ2lzdHJ5OiB0aGlzLnZpZXdSZWdpc3RyeVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOmHjee9ruW3peS9nOWMulxyXG4gICAqIEBwYXJhbSBwYWNrYWdlTWFuYWdlciDljIXnrqHnkIblmahcclxuICAgKi9cclxuICByZXNldChwYWNrYWdlTWFuYWdlcikge1xyXG4gICAgdGhpcy5wYWNrYWdlTWFuYWdlciA9IHBhY2thZ2VNYW5hZ2VyO1xyXG5cclxuICAgIHRoaXMuZGVzdHJveWVkKCk7XHJcblxyXG4gICAgdGhpcy5pbml0V29ya3NwYWNlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxsZWQgYnkgdGhlIFNlcmlhbGl6YWJsZSBtaXhpbiBkdXJpbmcgc2VyaWFsaXphdGlvbi5cclxuICAvKipcclxuICAgKiDluo/liJfljJblt6XkvZzljLrphY3nva5cclxuICAgKi9cclxuICBzZXJpYWxpemUoKSB7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIOWPjeW6j+WIl+WMluW3peS9nOWMuumFjee9rlxyXG4gICAqIEBwYXJhbSBzdGF0ZSBzdGF0ZVxyXG4gICAqIEBwYXJhbSBkZXNlcmlhbGl6ZXJNYW5hZ2VyIGRtXHJcbiAgICovXHJcbiAgZGVzZXJpYWxpemUoc3RhdGUsIGRlc2VyaWFsaXplck1hbmFnZXIpIHtcclxuICB9XHJcblxyXG4gIC8vIFVwZGF0ZXMgdGhlIGFwcGxpY2F0aW9uJ3MgdGl0bGUgYW5kIHByb3h5IGljb24gYmFzZWQgb24gd2hpY2hldmVyIGZpbGUgaXNcclxuICAvLyBvcGVuLlxyXG4gIHVwZGF0ZVdpbmRvd1RpdGxlKCkge1xyXG5cclxuICB9XHJcblxyXG4gIG9wZW4oaXRlbU9yVVJJLCBvcHRpb25zOiBhbnkgPSB7fSkge1xyXG4gICAgbGV0IHVyaSwgaXRlbTtcclxuICAgIGlmICh0eXBlb2YgaXRlbU9yVVJJID09PSAnc3RyaW5nJykge1xyXG4gICAgICB1cmkgPSBpdGVtT3JVUkk7IC8vIHRoaXMucHJvamVjdC5yZXNvbHZlUGF0aChpdGVtT3JVUkkpO1xyXG4gICAgfSBlbHNlIGlmIChpdGVtT3JVUkkpIHtcclxuICAgICAgaXRlbSA9IGl0ZW1PclVSSTtcclxuICAgICAgaWYgKHR5cGVvZiBpdGVtLmdldFVSSSA9PT0gJ2Z1bmN0aW9uJykgeyB1cmkgPSBpdGVtLmdldFVSSSgpOyB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5nZXQoJ2NvcmUuYWxsb3dQZW5kaW5nUGFuZUl0ZW1zJykpIHtcclxuICAgICAgb3B0aW9ucy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXZvaWQgYWRkaW5nIFVSTHMgYXMgcmVjZW50IGRvY3VtZW50cyB0byB3b3JrLWFyb3VuZCB0aGlzIFNwb3RsaWdodCBjcmFzaDpcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL2F0b20vaXNzdWVzLzEwMDcxXHJcbiAgICAvLyBpZiAodXJpICYmICghdXJsLnBhcnNlKHVyaSkucHJvdG9jb2wgfHwgcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykpIHtcclxuICAgIC8vICAgdGhpcy5hcHBsaWNhdGlvbkRlbGVnYXRlLmFkZFJlY2VudERvY3VtZW50KHVyaSk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgbGV0IHBhbmUsIGl0ZW1FeGlzdHNJbldvcmtzcGFjZTtcclxuXHJcbiAgICAvLyBUcnkgdG8gZmluZCBhbiBleGlzdGluZyBpdGVtIGluIHRoZSB3b3Jrc3BhY2UuXHJcbiAgICBpZiAoaXRlbSB8fCB1cmkpIHtcclxuICAgICAgaWYgKG9wdGlvbnMucGFuZSkge1xyXG4gICAgICAgIHBhbmUgPSBvcHRpb25zLnBhbmU7XHJcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zZWFyY2hBbGxQYW5lcykge1xyXG4gICAgICAgIHBhbmUgPSBpdGVtID8gdGhpcy5wYW5lRm9ySXRlbShpdGVtKSA6IHRoaXMucGFuZUZvclVSSSh1cmkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIElmIGFuIGl0ZW0gd2l0aCB0aGUgZ2l2ZW4gVVJJIGlzIGFscmVhZHkgaW4gdGhlIHdvcmtzcGFjZSwgYXNzdW1lXHJcbiAgICAgICAgLy8gdGhhdCBpdGVtJ3MgcGFuZSBjb250YWluZXIgaXMgdGhlIHByZWZlcnJlZCBsb2NhdGlvbiBmb3IgdGhhdCBVUkkuXHJcbiAgICAgICAgbGV0IGNvbnRhaW5lcjtcclxuICAgICAgICBpZiAodXJpKSB7IGNvbnRhaW5lciA9IHRoaXMucGFuZUNvbnRhaW5lckZvclVSSSh1cmkpOyB9XHJcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHsgY29udGFpbmVyID0gdGhpcy5nZXRBY3RpdmVQYW5lQ29udGFpbmVyKCk7IH1cclxuXHJcbiAgICAgICAgLy8gVGhlIGBzcGxpdGAgb3B0aW9uIGFmZmVjdHMgd2hlcmUgd2Ugc2VhcmNoIGZvciB0aGUgaXRlbS5cclxuICAgICAgICBwYW5lID0gY29udGFpbmVyLmdldEFjdGl2ZVBhbmUoKTtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuc3BsaXQpIHtcclxuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgICBwYW5lID0gcGFuZS5maW5kTGVmdG1vc3RTaWJsaW5nKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgICAgICBwYW5lID0gcGFuZS5maW5kUmlnaHRtb3N0U2libGluZygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICAgICAgcGFuZSA9IHBhbmUuZmluZFRvcG1vc3RTaWJsaW5nKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnZG93bic6XHJcbiAgICAgICAgICAgIHBhbmUgPSBwYW5lLmZpbmRCb3R0b21tb3N0U2libGluZygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwYW5lKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgIGl0ZW1FeGlzdHNJbldvcmtzcGFjZSA9IHBhbmUuZ2V0SXRlbXMoKS5pbmNsdWRlcyhpdGVtKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaXRlbSA9IHBhbmUuaXRlbUZvclVSSSh1cmkpO1xyXG4gICAgICAgICAgaXRlbUV4aXN0c0luV29ya3NwYWNlID0gaXRlbSAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSBhbiBpdGVtIGF0IHRoaXMgc3RhZ2UsIHdlIHdvbid0IG5lZWQgdG8gZG8gYW4gYXN5bmNcclxuICAgIC8vIGxvb2t1cCBvZiB0aGUgVVJJLCBzbyB3ZSB5aWVsZCB0aGUgZXZlbnQgbG9vcCB0byBlbnN1cmUgdGhpcyBtZXRob2RcclxuICAgIC8vIGlzIGNvbnNpc3RlbnRseSBhc3luY2hyb25vdXMuXHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWl0ZW1FeGlzdHNJbldvcmtzcGFjZSkge1xyXG4gICAgICBpdGVtID0gaXRlbSB8fCB0aGlzLmNyZWF0ZUl0ZW1Gb3JVUkkodXJpLCBvcHRpb25zKTtcclxuICAgICAgaWYgKCFpdGVtKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgaWYgKG9wdGlvbnMucGFuZSkge1xyXG4gICAgICAgIHBhbmUgPSBvcHRpb25zLnBhbmU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGxvY2F0aW9uID0gb3B0aW9ucy5sb2NhdGlvbjtcclxuICAgICAgICAvLyBpZiAoIWxvY2F0aW9uICYmICFvcHRpb25zLnNwbGl0ICYmIHVyaSAmJiB0aGlzLmVuYWJsZVBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgLy8gICAvLyBsb2NhdGlvbiA9IGF3YWl0O1xyXG4gICAgICAgIC8vICAgdGhpcy5pdGVtTG9jYXRpb25TdG9yZS5sb2FkKHVyaSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmICghbG9jYXRpb24gJiYgdHlwZW9mIGl0ZW0uZ2V0RGVmYXVsdExvY2F0aW9uID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICBsb2NhdGlvbiA9IGl0ZW0uZ2V0RGVmYXVsdExvY2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbGxvd2VkTG9jYXRpb25zID0gdHlwZW9mIGl0ZW0uZ2V0QWxsb3dlZExvY2F0aW9ucyA9PT0gJ2Z1bmN0aW9uJyA/IGl0ZW0uZ2V0QWxsb3dlZExvY2F0aW9ucygpIDogQUxMX0xPQ0FUSU9OUztcclxuICAgICAgICBsb2NhdGlvbiA9IGFsbG93ZWRMb2NhdGlvbnMuaW5jbHVkZXMobG9jYXRpb24pID8gbG9jYXRpb24gOiBhbGxvd2VkTG9jYXRpb25zWzBdO1xyXG5cclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnBhbmVDb250YWluZXJzW2xvY2F0aW9uXSB8fCB0aGlzLmdldENlbnRlcigpO1xyXG4gICAgICAgIHBhbmUgPSBjb250YWluZXIuZ2V0QWN0aXZlUGFuZSgpO1xyXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5zcGxpdCkge1xyXG4gICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgIHBhbmUgPSBwYW5lLmZpbmRMZWZ0bW9zdFNpYmxpbmcoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgIHBhbmUgPSBwYW5lLmZpbmRPckNyZWF0ZVJpZ2h0bW9zdFNpYmxpbmcoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICd1cCc6XHJcbiAgICAgICAgICAgIHBhbmUgPSBwYW5lLmZpbmRUb3Btb3N0U2libGluZygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgICAgICBwYW5lID0gcGFuZS5maW5kT3JDcmVhdGVCb3R0b21tb3N0U2libGluZygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIW9wdGlvbnMucGVuZGluZyAmJiAocGFuZS5nZXRQZW5kaW5nSXRlbSgpID09PSBpdGVtKSkge1xyXG4gICAgICBwYW5lLmNsZWFyUGVuZGluZ0l0ZW0oKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLml0ZW1PcGVuZWQoaXRlbSk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuYWN0aXZhdGVJdGVtID09PSBmYWxzZSkge1xyXG4gICAgICBwYW5lLmFkZEl0ZW0oaXRlbSwgeyBwZW5kaW5nOiBvcHRpb25zLnBlbmRpbmcgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYW5lLmFjdGl2YXRlSXRlbShpdGVtLCB7IHBlbmRpbmc6IG9wdGlvbnMucGVuZGluZyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5hY3RpdmF0ZVBhbmUgIT09IGZhbHNlKSB7XHJcbiAgICAgIHBhbmUuYWN0aXZhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5pdGlhbENvbHVtbiA9IDA7XHJcbiAgICBsZXQgaW5pdGlhbExpbmUgPSAwO1xyXG4gICAgaWYgKCFOdW1iZXIuaXNOYU4ob3B0aW9ucy5pbml0aWFsTGluZSkpIHtcclxuICAgICAgaW5pdGlhbExpbmUgPSBvcHRpb25zLmluaXRpYWxMaW5lO1xyXG4gICAgfVxyXG4gICAgaWYgKCFOdW1iZXIuaXNOYU4ob3B0aW9ucy5pbml0aWFsQ29sdW1uKSkge1xyXG4gICAgICBpbml0aWFsQ29sdW1uID0gb3B0aW9ucy5pbml0aWFsQ29sdW1uO1xyXG4gICAgfVxyXG4gICAgaWYgKGluaXRpYWxMaW5lID49IDAgfHwgaW5pdGlhbENvbHVtbiA+PSAwKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zZXRDdXJzb3JCdWZmZXJQb3NpdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGl0ZW0uc2V0Q3Vyc29yQnVmZmVyUG9zaXRpb24oW2luaXRpYWxMaW5lLCBpbml0aWFsQ29sdW1uXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbmRleCA9IHBhbmUuZ2V0QWN0aXZlSXRlbUluZGV4KCk7XHJcbiAgICByZXR1cm4gaXRlbTtcclxuICB9XHJcblxyXG4gIGhpZGUoaXRlbU9yVVJJKSB7XHJcbiAgICBsZXQgZm91bmRJdGVtcyA9IGZhbHNlO1xyXG5cclxuICAgIC8vIElmIGFueSB2aXNpYmxlIGl0ZW0gaGFzIHRoZSBnaXZlbiBVUkksIGhpZGUgaXRcclxuICAgIGZvciAoY29uc3QgY29udGFpbmVyIG9mIHRoaXMuZ2V0UGFuZUNvbnRhaW5lcnMoKSkge1xyXG4gICAgICBjb25zdCBpc0NlbnRlciA9IGNvbnRhaW5lciA9PT0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgICAgaWYgKGlzQ2VudGVyIHx8IChjb250YWluZXIgYXMgRG9jaykuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhbmUgb2YgY29udGFpbmVyLmdldFBhbmVzKCkpIHtcclxuICAgICAgICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSBwYW5lLmdldEFjdGl2ZUl0ZW0oKTtcclxuICAgICAgICAgIGNvbnN0IGZvdW5kSXRlbSA9IChcclxuICAgICAgICAgICAgYWN0aXZlSXRlbSAhPSBudWxsICYmIChcclxuICAgICAgICAgICAgICBhY3RpdmVJdGVtID09PSBpdGVtT3JVUkkgfHxcclxuICAgICAgICAgICAgICB0eXBlb2YgYWN0aXZlSXRlbS5nZXRVUkkgPT09ICdmdW5jdGlvbicgJiYgYWN0aXZlSXRlbS5nZXRVUkkoKSA9PT0gaXRlbU9yVVJJXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpZiAoZm91bmRJdGVtKSB7XHJcbiAgICAgICAgICAgIGZvdW5kSXRlbXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBXZSBjYW4ndCByZWFsbHkgaGlkZSB0aGUgY2VudGVyIHNvIHdlIGp1c3QgZGVzdHJveSB0aGUgaXRlbS5cclxuICAgICAgICAgICAgaWYgKGlzQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgcGFuZS5kZXN0cm95SXRlbShhY3RpdmVJdGVtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAoY29udGFpbmVyIGFzIERvY2spLmhpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmb3VuZEl0ZW1zO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlKGl0ZW1PclVSSSkge1xyXG4gICAgaWYgKHRoaXMuaGlkZShpdGVtT3JVUkkpKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm9wZW4oaXRlbU9yVVJJLCB7IHNlYXJjaEFsbFBhbmVzOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlblN5bmMoZmlsZVVyaSA9ICcnLCBvcHRpb25zID0geyBpbml0aWFsQ29sdW1uOiAnJywgaW5pdGlhbExpbmU6ICcnLCBhY3RpdmF0ZUl0ZW06ICcnLCBhY3RpdmF0ZVBhbmU6ICcnIH0pIHtcclxuICAgIGNvbnN0IHsgaW5pdGlhbExpbmUsIGluaXRpYWxDb2x1bW4gfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBhY3RpdmF0ZVBhbmUgPSBvcHRpb25zLmFjdGl2YXRlUGFuZSAhPSBudWxsID8gb3B0aW9ucy5hY3RpdmF0ZVBhbmUgOiB0cnVlO1xyXG4gICAgY29uc3QgYWN0aXZhdGVJdGVtID0gb3B0aW9ucy5hY3RpdmF0ZUl0ZW0gIT0gbnVsbCA/IG9wdGlvbnMuYWN0aXZhdGVJdGVtIDogdHJ1ZTtcclxuXHJcbiAgICBjb25zdCB1cmkgPSBmaWxlVXJpOyAvLyB0aGlzLnByb2plY3QucmVzb2x2ZVBhdGgodXJpXyk7XHJcbiAgICBsZXQgaXRlbSA9IHRoaXMuZ2V0QWN0aXZlUGFuZSgpLml0ZW1Gb3JVUkkodXJpKTtcclxuICAgIGlmICh1cmkgJiYgKGl0ZW0gPT0gbnVsbCkpIHtcclxuICAgICAgZm9yIChjb25zdCBvcGVuZXIgb2YgdGhpcy5nZXRPcGVuZXJzKCkpIHtcclxuICAgICAgICBpdGVtID0gb3BlbmVyKHVyaSwgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGl0ZW0pIHsgYnJlYWs7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGl0ZW0gPT0gbnVsbCkge1xyXG4gICAgICBpdGVtID0gdGhpcy5wcm9qZWN0Lm9wZW5TeW5jKHVyaSwgeyBpbml0aWFsTGluZSwgaW5pdGlhbENvbHVtbiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0aXZhdGVJdGVtKSB7XHJcbiAgICAgIHRoaXMuZ2V0QWN0aXZlUGFuZSgpLmFjdGl2YXRlSXRlbShpdGVtKTtcclxuICAgIH1cclxuICAgIHRoaXMuaXRlbU9wZW5lZChpdGVtKTtcclxuICAgIGlmIChhY3RpdmF0ZVBhbmUpIHtcclxuICAgICAgdGhpcy5nZXRBY3RpdmVQYW5lKCkuYWN0aXZhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpdGVtO1xyXG4gIH1cclxuXHJcbiAgb3BlblVSSUluUGFuZSh1cmksIHBhbmUpIHtcclxuICAgIHJldHVybiB0aGlzLm9wZW4odXJpLCB7IHBhbmUgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVJdGVtRm9yVVJJKHVyaSwgb3B0aW9ucykge1xyXG4gICAgaWYgKHVyaSAhPSBudWxsKSB7XHJcbiAgICAgIGZvciAoY29uc3Qgb3BlbmVyIG9mIHRoaXMuZ2V0T3BlbmVycygpKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IG9wZW5lcih1cmksIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChpdGVtICE9IG51bGwpIHtcclxuICAgICAgICAgIGlmICghaXRlbS5nZXRVUkkgfHwgdHlwZW9mIGl0ZW0uZ2V0VVJJICE9PSAnZnVuY3Rpb24nIHx8ICFpdGVtLmdldFVyaSB8fCB0eXBlb2YgaXRlbS5nZXRVUkkgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgaXRlbS5nZXRVcmkgPSAoKSA9PiB1cmk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyByZXR1cm4gdGhpcy5vcGVuVGV4dEZpbGUodXJpLCBvcHRpb25zKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIHN3aXRjaCAoZXJyb3IuY29kZSkge1xyXG4gICAgICAvLyAgIGNhc2UgJ0NBTkNFTExFRCc6XHJcbiAgICAgIC8vICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgIC8vICAgY2FzZSAnRUFDQ0VTJzpcclxuICAgICAgLy8gICAgIHRoaXMubm90aWZpY2F0aW9uTWFuYWdlci5hZGRXYXJuaW5nKGBQZXJtaXNzaW9uIGRlbmllZCAnJHtlcnJvci5wYXRofSdgKTtcclxuICAgICAgLy8gICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgLy8gICBjYXNlICdFUEVSTSc6XHJcbiAgICAgIC8vICAgY2FzZSAnRUJVU1knOlxyXG4gICAgICAvLyAgIGNhc2UgJ0VOWElPJzpcclxuICAgICAgLy8gICBjYXNlICdFSU8nOlxyXG4gICAgICAvLyAgIGNhc2UgJ0VOT1RDT05OJzpcclxuICAgICAgLy8gICBjYXNlICdVTktOT1dOJzpcclxuICAgICAgLy8gICBjYXNlICdFQ09OTlJFU0VUJzpcclxuICAgICAgLy8gICBjYXNlICdFSU5WQUwnOlxyXG4gICAgICAvLyAgIGNhc2UgJ0VNRklMRSc6XHJcbiAgICAgIC8vICAgY2FzZSAnRU5PVERJUic6XHJcbiAgICAgIC8vICAgY2FzZSAnRUFHQUlOJzpcclxuICAgICAgLy8gICAgIHRoaXMubm90aWZpY2F0aW9uTWFuYWdlci5hZGRXYXJuaW5nKFxyXG4gICAgICAvLyAgICAgICBgVW5hYmxlIHRvIG9wZW4gJyR7ZXJyb3IucGF0aCAhPSBudWxsID8gZXJyb3IucGF0aCA6IHVyaX0nYCxcclxuICAgICAgLy8gICAgICAgeyBkZXRhaWw6IGVycm9yLm1lc3NhZ2UgfVxyXG4gICAgICAvLyAgICAgKTtcclxuICAgICAgLy8gICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgLy8gICBkZWZhdWx0OlxyXG4gICAgICAvLyAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIC8vIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlb3Blbkl0ZW0oKSB7XHJcbiAgICBjb25zdCB1cmkgPSB0aGlzLmRlc3Ryb3llZEl0ZW1VUklzLnBvcCgpO1xyXG4gICAgaWYgKHVyaSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5vcGVuKHVyaSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRPcGVuZXIob3BlbmVyKSB7XHJcbiAgICB0aGlzLm9wZW5lcnMucHVzaChvcGVuZXIpO1xyXG4gICAgLy8gcmV0dXJuIG5ldyBEaXNwb3NhYmxlKCgpID0+IHsgXy5yZW1vdmUodGhpcy5vcGVuZXJzLCBvcGVuZXIpOyB9KTtcclxuICB9XHJcblxyXG4gIGFkZEZybU9wZW5lcihvcGVuZXIpIHtcclxuICAgIGlmICghdGhpcy51c2VGcm1PcGVuZXIpIHtcclxuICAgICAgdGhpcy51c2VGcm1PcGVuZXIgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mcm1PcGVuZXJzLnB1c2gob3BlbmVyKTtcclxuICB9XHJcblxyXG4gIGdldE9wZW5lcnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy51c2VGcm1PcGVuZXIgPyB0aGlzLmZybU9wZW5lcnMgOiB0aGlzLm9wZW5lcnM7XHJcbiAgfVxyXG5cclxuICBnZXRQYW5lSXRlbXMoKSB7XHJcbiAgICByZXR1cm4gbmV3IEFycmF5KCkuY29uY2F0KHRoaXMuZ2V0UGFuZUNvbnRhaW5lcnMoKS5tYXAoY29udGFpbmVyID0+IGNvbnRhaW5lci5nZXRQYW5lSXRlbXMoKSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aXZlUGFuZUl0ZW0oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRBY3RpdmVQYW5lQ29udGFpbmVyKCkuZ2V0QWN0aXZlUGFuZUl0ZW0oKTtcclxuICB9XHJcblxyXG4gIHNhdmVBbGwoKSB7XHJcbiAgICB0aGlzLmdldFBhbmVDb250YWluZXJzKCkuZm9yRWFjaChjb250YWluZXIgPT4ge1xyXG4gICAgICBjb250YWluZXIuc2F2ZUFsbCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25maXJtQ2xvc2Uob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuZ2V0UGFuZUNvbnRhaW5lcnMoKS5tYXAoY29udGFpbmVyID0+XHJcbiAgICAgIGNvbnRhaW5lci5jb25maXJtQ2xvc2Uob3B0aW9ucylcclxuICAgICkpLnRoZW4oKHJlc3VsdHMpID0+ICFyZXN1bHRzLmZpbmQoaXRlbSA9PiBpdGVtID09PSBmYWxzZSkpO1xyXG4gIH1cclxuXHJcbiAgc2F2ZUFjdGl2ZVBhbmVJdGVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyKCkuZ2V0QWN0aXZlUGFuZSgpLnNhdmVBY3RpdmVJdGVtKCk7XHJcbiAgfVxyXG5cclxuICBzYXZlQWN0aXZlUGFuZUl0ZW1BcygpIHtcclxuICAgIHRoaXMuZ2V0Q2VudGVyKCkuZ2V0QWN0aXZlUGFuZSgpLnNhdmVBY3RpdmVJdGVtQXMoKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lBY3RpdmVQYW5lSXRlbSgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVBhbmUoKS5kZXN0cm95QWN0aXZlSXRlbSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aXZlUGFuZUNvbnRhaW5lcigpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdGl2ZVBhbmVDb250YWluZXI7XHJcbiAgfVxyXG5cclxuICBnZXRQYW5lcygpIHtcclxuICAgIHJldHVybiBuZXcgQXJyYXkoKS5jb25jYXQodGhpcy5nZXRQYW5lQ29udGFpbmVycygpLm1hcChjb250YWluZXIgPT4gY29udGFpbmVyLmdldFBhbmVzKCkpKTtcclxuICB9XHJcblxyXG4gIGdldFZpc2libGVQYW5lcygpIHtcclxuICAgIHJldHVybiBuZXcgQXJyYXkoKS5jb25jYXQodGhpcy5nZXRWaXNpYmxlUGFuZUNvbnRhaW5lcnMoKS5tYXAoY29udGFpbmVyID0+IGNvbnRhaW5lci5nZXRQYW5lcygpKSk7XHJcbiAgfVxyXG5cclxuICBnZXRBY3RpdmVQYW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWN0aXZlUGFuZUNvbnRhaW5lcigpLmdldEFjdGl2ZVBhbmUoKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTmV4dFBhbmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRBY3RpdmVQYW5lQ29udGFpbmVyKCkuYWN0aXZhdGVOZXh0UGFuZSgpO1xyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVQcmV2aW91c1BhbmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRBY3RpdmVQYW5lQ29udGFpbmVyKCkuYWN0aXZhdGVQcmV2aW91c1BhbmUoKTtcclxuICB9XHJcblxyXG4gIHBhbmVDb250YWluZXJGb3JVUkkodXJpKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRQYW5lQ29udGFpbmVycygpLmZpbmQoY29udGFpbmVyID0+ICEhY29udGFpbmVyLnBhbmVGb3JVUkkodXJpKSk7XHJcbiAgfVxyXG5cclxuICBwYW5lQ29udGFpbmVyRm9ySXRlbSh1cmkpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVDb250YWluZXJzKCkuZmluZChjb250YWluZXIgPT4gISFjb250YWluZXIucGFuZUZvckl0ZW0odXJpKSk7XHJcbiAgfVxyXG5cclxuICBwYW5lRm9yVVJJKHVyaSk6IFBhbmUge1xyXG4gICAgZm9yIChjb25zdCBsb2NhdGlvbiBvZiB0aGlzLmdldFBhbmVDb250YWluZXJzKCkpIHtcclxuICAgICAgY29uc3QgcGFuZSA9IGxvY2F0aW9uLnBhbmVGb3JVUkkodXJpKTtcclxuICAgICAgaWYgKHBhbmUgIT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBwYW5lO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYW5lRm9ySXRlbShpdGVtKTogUGFuZSB7XHJcbiAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIHRoaXMuZ2V0UGFuZUNvbnRhaW5lcnMoKSkge1xyXG4gICAgICBjb25zdCBwYW5lID0gbG9jYXRpb24ucGFuZUZvckl0ZW0oaXRlbSk7XHJcbiAgICAgIGlmIChwYW5lICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcGFuZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVzdHJveUFjdGl2ZVBhbmUoKSB7XHJcbiAgICBjb25zdCBhY3RpdmVQYW5lID0gdGhpcy5nZXRBY3RpdmVQYW5lKCk7XHJcbiAgICBpZiAoYWN0aXZlUGFuZSAhPSBudWxsKSB7XHJcbiAgICAgIGFjdGl2ZVBhbmUuZGVzdHJveSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlQWN0aXZlUGFuZUl0ZW1PckVtcHR5UGFuZU9yV2luZG93KCkge1xyXG4gICAgaWYgKHRoaXMuZ2V0Q2VudGVyKCkuZ2V0QWN0aXZlUGFuZUl0ZW0oKSAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuZ2V0Q2VudGVyKCkuZ2V0QWN0aXZlUGFuZSgpLmRlc3Ryb3lBY3RpdmVJdGVtKCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0Q2VudGVyKCkuZ2V0UGFuZXMoKS5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRoaXMuZ2V0Q2VudGVyKCkuZGVzdHJveUFjdGl2ZVBhbmUoKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jb25maWcuZ2V0KCdjb3JlLmNsb3NlRW1wdHlXaW5kb3dzJykpIHtcclxuICAgICAgLy8g5Y6f5Li65YWz6ZetYXRvbeW6lOeUqOeql+WPo+OAgmlkZeS4reaaguS4jeWFs+mXreaVtOS4queql+WPo+OAglxyXG4gICAgICAvLyBhdG9tLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpdGVtT3BlbmVkKGl0ZW0pIHtcclxuICB9XHJcblxyXG5cclxuICBkZXN0cm95ZWQoKSB7XHJcbiAgICB0aGlzLnBhbmVDb250YWluZXJzLmNlbnRlci5kZXN0cm95KCk7XHJcbiAgICB0aGlzLnBhbmVDb250YWluZXJzLmxlZnQuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5wYW5lQ29udGFpbmVycy5yaWdodC5kZXN0cm95KCk7XHJcbiAgICB0aGlzLnBhbmVDb250YWluZXJzLmJvdHRvbS5kZXN0cm95KCk7XHJcblxyXG4gICAgZm9yIChjb25zdCBwYW5lbExvY2F0aW9uIGluIHRoaXMucGFuZWxDb250YWluZXJzKSB7XHJcbiAgICAgIGlmICh0aGlzLnBhbmVsQ29udGFpbmVycy5oYXNPd25Qcm9wZXJ0eShwYW5lbExvY2F0aW9uKSkge1xyXG4gICAgICAgIGNvbnN0IHBhbmVsQ29udGFpbmVyID0gdGhpcy5wYW5lbENvbnRhaW5lcnNbcGFuZWxMb2NhdGlvbl07XHJcbiAgICAgICAgdGhpcy5wYW5lQ29udGFpbmVyLmRlc3Ryb3koKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2VudGVyKCk6IFdvcmtzcGFjZUNlbnRlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVycy5jZW50ZXI7XHJcbiAgfVxyXG5cclxuICBnZXRMZWZ0RG9jaygpIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVDb250YWluZXJzLmxlZnQ7XHJcbiAgfVxyXG5cclxuICBnZXRSaWdodERvY2soKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVycy5yaWdodDtcclxuICB9XHJcblxyXG4gIGdldEJvdHRvbURvY2soKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYW5lQ29udGFpbmVycy5ib3R0b207XHJcbiAgfVxyXG5cclxuICBnZXRQYW5lQ29udGFpbmVycygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIHRoaXMucGFuZUNvbnRhaW5lcnMuY2VudGVyLFxyXG4gICAgICB0aGlzLnBhbmVDb250YWluZXJzLmxlZnQsXHJcbiAgICAgIHRoaXMucGFuZUNvbnRhaW5lcnMucmlnaHQsXHJcbiAgICAgIHRoaXMucGFuZUNvbnRhaW5lcnMuYm90dG9tXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlzaWJsZVBhbmVDb250YWluZXJzKCkge1xyXG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVDb250YWluZXJzKClcclxuICAgICAgLmZpbHRlcihjb250YWluZXIgPT4gY29udGFpbmVyID09PSBjZW50ZXIgfHwgKGNvbnRhaW5lciBhcyBEb2NrKS5pc1Zpc2libGUoKSk7XHJcbiAgfVxyXG5cclxuICBnZXRCb3R0b21QYW5lbHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRQYW5lbHMoJ2JvdHRvbScpO1xyXG4gIH1cclxuXHJcbiAgYWRkQm90dG9tUGFuZWwob3B0aW9uczogUGFuZWxPcHRpb25zKTogUGFuZWwge1xyXG4gICAgcmV0dXJuIHRoaXMuYWRkUGFuZWwoJ2JvdHRvbScsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGVmdFBhbmVscygpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVscygnbGVmdCcpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGVmdFBhbmVsKG9wdGlvbnM6IFBhbmVsT3B0aW9ucyk6IFBhbmVsIHtcclxuICAgIHJldHVybiB0aGlzLmFkZFBhbmVsKCdsZWZ0Jywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBnZXRSaWdodFBhbmVscygpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVscygncmlnaHQnKTtcclxuICB9XHJcblxyXG4gIGFkZFJpZ2h0UGFuZWwob3B0aW9uczogUGFuZWxPcHRpb25zKTogUGFuZWwge1xyXG4gICAgcmV0dXJuIHRoaXMuYWRkUGFuZWwoJ3JpZ2h0Jywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBnZXRUb3BQYW5lbHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRQYW5lbHMoJ3RvcCcpO1xyXG4gIH1cclxuXHJcbiAgYWRkVG9wUGFuZWwob3B0aW9uczogUGFuZWxPcHRpb25zKTogUGFuZWwge1xyXG4gICAgcmV0dXJuIHRoaXMuYWRkUGFuZWwoJ3RvcCcsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVyUGFuZWxzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0UGFuZWxzKCdoZWFkZXInKTtcclxuICB9XHJcblxyXG4gIGFkZEhlYWRlclBhbmVsKG9wdGlvbnM6IFBhbmVsT3B0aW9ucyk6IFBhbmVsIHtcclxuICAgIHJldHVybiB0aGlzLmFkZFBhbmVsKCdoZWFkZXInLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGdldEZvb3RlclBhbmVscygpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVscygnZm9vdGVyJyk7XHJcbiAgfVxyXG5cclxuICBhZGRGb290ZXJQYW5lbChvcHRpb25zOiBQYW5lbE9wdGlvbnMpOiBQYW5lbCB7XHJcbiAgICByZXR1cm4gdGhpcy5hZGRQYW5lbCgnZm9vdGVyJywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBnZXRNb2RhbFBhbmVscygpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBhbmVscygnbW9kYWwnKTtcclxuICB9XHJcblxyXG4gIGFkZE1vZGFsUGFuZWwob3B0aW9uczogUGFuZWxPcHRpb25zKTogUGFuZWwge1xyXG4gICAgcmV0dXJuIHRoaXMuYWRkUGFuZWwoJ21vZGFsJywgb3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICBwYW5lbEZvckl0ZW0oaXRlbSk6IFBhbmVsIHtcclxuICAgIGZvciAoY29uc3QgbG9jYXRpb24gaW4gdGhpcy5wYW5lbENvbnRhaW5lcnMpIHtcclxuICAgICAgaWYgKHRoaXMucGFuZWxDb250YWluZXJzLmhhc093blByb3BlcnR5KGxvY2F0aW9uKSkge1xyXG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5wYW5lbENvbnRhaW5lcnNbbG9jYXRpb25dLnBhbmVsRm9ySXRlbShpdGVtKTtcclxuICAgICAgICBpZiAocGFuZWwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIHBhbmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRQYW5lbENvbnRhaW5lcihsb2NhdGlvbjogUGFuZWxMb2NhdGlvbik6IFBhbmVsQ29udGFpbmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVsQ29udGFpbmVyc1tsb2NhdGlvbl07XHJcbiAgfVxyXG5cclxuICBnZXRQYW5lbHMobG9jYXRpb246IFBhbmVsTG9jYXRpb24pOiBQYW5lbFtdIHtcclxuICAgIHJldHVybiB0aGlzLnBhbmVsQ29udGFpbmVyc1tsb2NhdGlvbl0uZ2V0UGFuZWxzKCk7XHJcbiAgfVxyXG5cclxuICBhZGRQYW5lbChsb2NhdGlvbjogUGFuZWxMb2NhdGlvbiwgb3B0aW9uczogUGFuZWxPcHRpb25zKTogUGFuZWwge1xyXG4gICAgY29uc3QgcGFuZWwgPSBuZXcgUGFuZWwob3B0aW9ucywgdGhpcy52aWV3UmVnaXN0cnkpO1xyXG4gICAgcmV0dXJuIHRoaXMucGFuZWxDb250YWluZXJzW2xvY2F0aW9uXS5hZGRQYW5lbChwYW5lbCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==