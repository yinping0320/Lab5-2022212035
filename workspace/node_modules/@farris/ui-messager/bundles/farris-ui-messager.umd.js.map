{"version":3,"file":"farris-ui-messager.umd.js.map","sources":["ng://@farris/ui-messager/lib/farris-default-focus.directive.ts","ng://@farris/ui-messager/lib/messager.config.ts","ng://@farris/ui-messager/lib/messager.component.ts","ng://@farris/ui-messager/lib/messager.service.ts","ng://@farris/ui-messager/lib/messager.module.ts"],"sourcesContent":["import { Directive, Input, ElementRef, OnInit, AfterViewInit, NgZone } from '@angular/core';\r\nimport { DialogButton } from '@farris/ui-modal';\r\n\r\n@Directive({\r\n    selector: '[farris-default-focus]'\r\n})\r\nexport class FarrisDefaultFocusDirective implements OnInit, AfterViewInit {\r\n    @Input('farris-default-focus') button: DialogButton;\r\n\r\n    constructor(private el: ElementRef, private ngZone: NgZone) { }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.button.defaultFocus) {\r\n            this.ngZone.runOutsideAngular(() => {\r\n                setTimeout(() => {\r\n                    this.el.nativeElement.focus();\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\n\r\nexport interface MessagerConfig {\r\n    width?: number;\r\n    height?: number;\r\n    title?: string;\r\n    showHeader?: boolean;\r\n}\r\n\r\nexport const MessagerDefaultConfig = {\r\n    // width: 340,\r\n    // height: 220,\r\n    title: 'ç³»ç»æç¤º'\r\n};\r\n\r\nexport const MESSAGER_DEFAULT_CONFIG = new InjectionToken<MessagerConfig>('Messager default options.');\r\n\r\n/**\r\n * æå¡å¨ç«¯å¼å¸¸ç­çº§\r\n */\r\n export const enum ExceptionLevel {\r\n\r\n    /**\r\n     * æç¤ºä¿¡æ¯\r\n     */\r\n    Info = 0,\r\n  \r\n    /**\r\n     * è­¦å\r\n     */\r\n    Warning,\r\n  \r\n    /**\r\n     * éè¯¯\r\n     */\r\n    Error,\r\n  \r\n    /**\r\n     * è´å½éè¯¯\r\n     */\r\n    Fatal\r\n}\r\n\r\nexport interface ServerExceptionEntity {\r\n\r\n    Code: string;\r\n  \r\n    Level: ExceptionLevel;\r\n  \r\n    Message: string;\r\n  \r\n    Detail: string;\r\n  \r\n    RequestId: string;\r\n  \r\n    date?: string;\r\n  \r\n    innerMessage?: string;\r\n}\r\n\r\nexport interface HttpRequestFaildInfo {\r\n    headers: {\r\n        normalizedNames: any,\r\n        lazyUpdate: any\r\n    };\r\n    status: number;\r\n    statusText: string;\r\n    url: string;\r\n    ok: boolean;\r\n    name: string;\r\n    message: string;\r\n    error: ServerExceptionEntity;\r\n}","import { LocaleService } from '@farris/ui-locale';\r\nimport { CommonUtils } from '@farris/ui-common';\r\n/*\r\n * @Author: Lucas.Huangï¼ç¯çç§æï¼\r\n * @Date: 2018-10-13 11:11:50\r\n * @Last Modified by:   Lucas.Huangï¼ç¯çç§æï¼\r\n * @Last Modified time: 2018-10-13 11:11:50\r\n */\r\nimport { ElementRef, Component, OnInit, Input, Injector, HostBinding, ViewChild, AfterViewInit, Renderer2 } from '@angular/core';\r\nimport { DialogButton } from '@farris/ui-modal';\r\n\r\n@Component({\r\n    selector: 'farris-messager',\r\n    templateUrl: './messager.component.html'\r\n})\r\nexport class MessagerComponent implements OnInit, AfterViewInit {\r\n    @Input() type: string;\r\n    @Input() showFontSize = false;\r\n\r\n    private _message = '';\r\n    get message() {\r\n        return this._message;\r\n    }\r\n\r\n    @Input() set message(str) {\r\n        this._message = (str === undefined || str === null) ? '' : '' + str;\r\n        if (this.type === 'prompt' && this.utils) {\r\n            this._message = this.utils.unescapeHtml(this._message);\r\n        }\r\n    }\r\n\r\n    @Input() msg = '';\r\n    utils: CommonUtils;\r\n    localeService: LocaleService;\r\n    render: Renderer2;\r\n    constructor(private injector: Injector) {\r\n        this.utils = this.injector.get(CommonUtils);\r\n        this.localeService = this.injector.get(LocaleService);\r\n        this.render = this.injector.get(Renderer2);\r\n    }\r\n\r\n    @HostBinding('class') cls = 'farris-messager';\r\n\r\n    @Input() okText = '';\r\n    @Input() cancelText = '';\r\n    @Input() showOkButton = true;\r\n    @Input() showCancelButton = true;\r\n\r\n    @Input() readonly = false;\r\n\r\n    @Input() okHandle: () => {};\r\n    @Input() cancelHandle: () => {};\r\n\r\n\r\n    @Input() enableWordCount = false;\r\n    @Input() countType = 'length';\r\n    @Input() maxLength: number;\r\n\r\n    @Input() exception = null;\r\n    @Input() showLines = 4;\r\n\r\n    @ViewChild('promptText') promptText: ElementRef;\r\n    @ViewChild('fontSizeEl') fontSizeEl: ElementRef;\r\n    @ViewChild('wordCount') wordCountEl: ElementRef;\r\n    @ViewChild('excepMsg') excepMsgEl: ElementRef;\r\n    @ViewChild('allexcep') allexcepEl: ElementRef;\r\n    @ViewChild('miniNotify') miniNotifyEl: ElementRef;\r\n    @ViewChild('btnOkEl') btnOkEl: ElementRef;\r\n\r\n    @Input() fontSize = '18';\r\n\r\n    @Input() inputType = 'textarea';\r\n    @Input() placeholder = '';\r\n\r\n    @Input() buttons: DialogButton[] = [];\r\n\r\n    get fontsizeName() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.name');\r\n    }\r\n    get fontSmall() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.small');\r\n    }\r\n    get fontMiddle() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.middle');\r\n    }\r\n    get fontBig() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.big');\r\n    }\r\n    get fontLarge() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.large');\r\n    }\r\n    get fontHuge() {\r\n        return this.localeService.getValue('messager.prompt.fontSize.huge');\r\n    }\r\n\r\n    get expandText() {\r\n        return this.localeService.getValue('messager.exception.expand');\r\n    }\r\n\r\n    get collapseText() {\r\n        return this.localeService.getValue('messager.exception.collapse');\r\n    }\r\n\r\n    get happend() {\r\n        return this.localeService.getValue('messager.exception.happend');\r\n    }\r\n\r\n    get detail() {\r\n        return this.localeService.getValue('messager.exception.detail');\r\n    }\r\n\r\n    get exceptionMsgMaxHeight () {\r\n        return window.innerHeight -10 -10 - 100 -100 -16;\r\n    }\r\n\r\n\r\n    expand = false;\r\n    needShowExpand = false;\r\n\r\n    wordsTotal = '';\r\n    wrodsTotalTips = '';\r\n\r\n    ngOnInit() {\r\n        setTimeout(() => {\r\n            if (this.enableWordCount && this.promptText) {\r\n                this.onTextChange(null);\r\n            }\r\n        });\r\n\r\n        this.type = this.type === 'exception' ? 'error' : this.type;\r\n    }\r\n\r\n    get icon() {\r\n        return 'f-icon-' + (this.type === 'exception' ? 'error' : this.type);\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        setTimeout(() => {\r\n            if (this.exception && this.exception['message']) {\r\n                const realWidth = this.excepMsgEl.nativeElement.getBoundingClientRect().width.toFixed(2) + 'px';\r\n                this.render.setStyle(this.allexcepEl.nativeElement, 'width', realWidth);\r\n                this.needShowExpand = this.allexcepEl.nativeElement.offsetHeight > this.excepMsgEl.nativeElement.offsetHeight;\r\n            } else {\r\n                this.needShowExpand = false;\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    onFontSizeChange(val, textAreaEl) {\r\n        // this.promptText.nativeElement\r\n        // textAreaEl.nativeElement.style['font-size'] = val;\r\n    }\r\n\r\n    private getWordsTotal() {\r\n        const c = this.countType === 'length' ? this.promptText.nativeElement.value.length\r\n                                            : this.maxLength - this.promptText.nativeElement.value.length;\r\n        return c;\r\n    }\r\n\r\n    onTextChange($event) {\r\n        this.wordsTotal = this.getWordsTotal();\r\n        this.wrodsTotalTips = this.localeService.getValue('messager.prompt.tips.' + this.countType).replace('{0}', this.wordsTotal);\r\n    }\r\n\r\n    expandMsg(t: boolean, $event: MouseEvent) {\r\n        $event.stopPropagation();\r\n        if (t) {\r\n            this.render.setStyle(this.excepMsgEl.nativeElement, 'overflow', 'auto');\r\n            this.render.removeStyle(this.excepMsgEl.nativeElement, '-webkit-line-clamp');\r\n        } else {\r\n            this.render.setStyle(this.excepMsgEl.nativeElement, 'overflow', 'hidden');\r\n            this.render.setStyle(this.excepMsgEl.nativeElement, '-webkit-line-clamp', this.showLines);\r\n        }\r\n\r\n        this.expand = t;\r\n    }\r\n\r\n\r\n    onCopyClick($event) {\r\n        $event.stopPropagation();\r\n        if (this.exception && this.exception.copyButton) {\r\n            this.exception.copyButton.onClick({ event: $event, cmpRef: this });\r\n        }\r\n    }\r\n\r\n    showMiniNotify(msg, timeout = 700) {\r\n        if (this.miniNotifyEl) {\r\n            this.miniNotifyEl.nativeElement.innerText = msg;\r\n            this.render.setStyle(this.miniNotifyEl.nativeElement, 'display', '');\r\n            this.render.setStyle(this.miniNotifyEl.nativeElement, 'opacity', 0.8);\r\n\r\n            setTimeout(() => {\r\n                this.render.setStyle(this.miniNotifyEl.nativeElement, 'opacity', 0);\r\n                this.render.setStyle(this.miniNotifyEl.nativeElement, 'display', 'none');\r\n            }, timeout);\r\n        }\r\n    }\r\n}\r\n","/*\r\n * @Author: ç¯çç§æ(Lucas Huang)\r\n * @LastEditors: ç¯çç§æ(Lucas Huang)\r\n * @Company: Inspur\r\n * @Version: v0.0.15\r\n * @Date: 2019-04-02 11:48:08\r\n * @LastEditTime: 2019-10-26 16:38:34\r\n */\r\n\r\nimport { Injectable, Injector, NgZone } from \"@angular/core\";\r\nimport { Subject, Observable, of } from \"rxjs\";\r\nimport { BsModalService, BsModalRef, DialogButton } from \"@farris/ui-modal\";\r\nimport {\r\n    HttpRequestFaildInfo,\r\n    MessagerConfig,\r\n    MessagerDefaultConfig,\r\n    MESSAGER_DEFAULT_CONFIG,\r\n    ServerExceptionEntity,\r\n} from \"./messager.config\";\r\nimport { MessagerComponent } from \"./messager.component\";\r\nimport { LocaleService } from \"@farris/ui-locale\";\r\nimport { unescapeIdentifier } from \"@angular/compiler\";\r\nimport { format } from \"date-fns\";\r\nimport { CommonUtils } from \"@farris/ui-common\";\r\n\r\n@Injectable()\r\nexport class MessagerService {\r\n    version = \"0.0.15\";\r\n    currentId = -1;\r\n    modals: { id: number; ref: BsModalRef }[] = [];\r\n    private defaultMessagerConfig: MessagerConfig = null;\r\n\r\n    private confirmSubject;\r\n    private ngZone: NgZone;\r\n\r\n    private localeService: LocaleService;\r\n    private commonUtils: CommonUtils\r\n    constructor(\r\n        private bsModalService: BsModalService,\r\n        private injector: Injector\r\n    ) {\r\n        const config =\r\n            this.injector.get(MESSAGER_DEFAULT_CONFIG) || MessagerDefaultConfig;\r\n        this.defaultMessagerConfig = Object.assign(\r\n            {},\r\n            MessagerDefaultConfig,\r\n            config\r\n        );\r\n        this.ngZone = this.injector.get(NgZone);\r\n        this.localeService = this.injector.get(LocaleService);\r\n        this.commonUtils = this.injector.get(CommonUtils, null);\r\n    }\r\n    get okText() {\r\n        return this.localeService.getValue(\"messager.ok\");\r\n    }\r\n    get cancelText() {\r\n        return this.localeService.getValue(\"messager.cancel\");\r\n    }\r\n    get yesText() {\r\n        return this.localeService.getValue(\"messager.yes\");\r\n    }\r\n    get noText() {\r\n        return this.localeService.getValue(\"messager.no\");\r\n    }\r\n    get titleText() {\r\n        return this.localeService.getValue(\"messager.title\");\r\n    }\r\n    get errorTitle() {\r\n        return this.localeService.getValue(\"messager.errorTitle\");\r\n    }\r\n\r\n    escapeHtml(str) {\r\n        if (str === null || str === undefined) {\r\n            return \"\";\r\n        }\r\n        return str\r\n            .replace(/&/g, \"&amp;\")\r\n            .replace(/</g, \"&lt;\")\r\n            .replace(/>/g, \"&gt;\")\r\n            .replace(/\\\"/g, \"&quot;\")\r\n            .replace(/\\'/g, \"&#39;\")\r\n            .replace(/\\//g, \"&#x2F;\");\r\n    }\r\n\r\n    /**\r\n     * æ¾ç¤ºä¿¡æ¯æç¤ºæ¡\r\n     * @param msgtype æ¶æ¯ç±»å«\r\n     * @param message æç¤ºæ¶æ¯ä¸\r\n     * @param opts åæ° æä¾å±æ§ fitContent:trueæ¯æèªå¨éåºå®½åº¦\r\n     * @param submsg æç¤ºæ¶æ¯äºçº§\r\n     */\r\n    show(msgtype: string, message: string, opts?: {}, submsg = \"\") {\r\n        if (document.activeElement) {\r\n            (document.activeElement as any).blur();\r\n        }\r\n        const modalHeight = 180;\r\n        let defaultOpts = {\r\n            safeHtml: true,\r\n            title: this.titleText,\r\n            width: 390,\r\n            height: modalHeight,\r\n            showButtons: false,\r\n            showMaxButton: false,\r\n            resizable: false,\r\n            initialState: {\r\n                okText: this.okText,\r\n                okHandle: () => {\r\n                    this.close();\r\n                },\r\n            },\r\n            class:\r\n                \"modal-message \" +\r\n                (msgtype ? \"modal-message-type-\" + msgtype : \"\"),\r\n            showHeader: false,\r\n        };\r\n        defaultOpts = Object.assign(\r\n            {},\r\n            this.defaultMessagerConfig,\r\n            defaultOpts\r\n        );\r\n        let extendOpts = {};\r\n\r\n        switch (msgtype) {\r\n            case \"prompt\":\r\n                // å¼¹åºå¯¹è¯ç±»å\r\n                extendOpts = { showHeader: true, modalHeight: 260 };\r\n                break;\r\n            case \"error\":\r\n                // éè¯¯\r\n                extendOpts = {\r\n                    title: this.errorTitle,\r\n                    width: 446,\r\n                    showHeader: true,\r\n                    showMaxButton: true,\r\n                    fitContent: true,\r\n                };\r\n                break;\r\n            case \"exception\":\r\n                extendOpts = {\r\n                    safeHtml: false,\r\n                    title: this.errorTitle,\r\n                    width: 446,\r\n                    showHeader: true,\r\n                    fitContent: true,\r\n                };\r\n                break;\r\n            default:\r\n                // é»è®¤å¶ä»\r\n                extendOpts = { width: submsg ? 446 : 390, fitContent: true };\r\n        }\r\n        Object.assign(defaultOpts, extendOpts);\r\n        if (opts) {\r\n            Object.assign(defaultOpts, opts);\r\n        }\r\n\r\n        if (message && defaultOpts.safeHtml) {\r\n            message = this.escapeHtml(message);\r\n        }\r\n\r\n        Object.assign(defaultOpts.initialState, {\r\n            type: msgtype,\r\n            message,\r\n            msg: submsg,\r\n            exception: opts && opts[\"exception\"] ? opts[\"exception\"] : null,\r\n            showLines: opts && opts[\"showLines\"] ? opts[\"showLines\"] : 3,\r\n            readonly: opts && opts[\"readonly\"] ? opts[\"readonly\"] : false,\r\n        });\r\n\r\n        if (defaultOpts[\"buttons\"] && defaultOpts[\"buttons\"].length) {\r\n            if (\r\n                !defaultOpts.initialState[\"buttons\"] ||\r\n                !defaultOpts.initialState[\"buttons\"].length\r\n            ) {\r\n                defaultOpts.initialState[\"buttons\"] = defaultOpts[\"buttons\"];\r\n            }\r\n        }\r\n        const _modal = this.bsModalService.show(MessagerComponent, defaultOpts);\r\n        // _modal.content.buttons = defaultOpts['buttons'] || [];\r\n        this.confirmSubject = new Subject<boolean>();\r\n        if (this.modals.length > 0) {\r\n            const modalContainerComponent = _modal.dialog;\r\n            modalContainerComponent.instance.isShown = true;\r\n            modalContainerComponent.instance.moveTo(\r\n                15 * this.modals.length,\r\n                15 * this.modals.length\r\n            );\r\n        }\r\n\r\n        this.ngZone.runOutsideAngular(() => {\r\n            // ç¬¬1ä¸ªæé®è·åç¦ç¹\r\n            setTimeout(() => {\r\n                const btnOk = _modal.content.btnOkEl\r\n                    ? _modal.content.btnOkEl.nativeElement\r\n                    : null;\r\n                if (btnOk) {\r\n                    btnOk[\"focus\"]();\r\n                } else {\r\n                    const btns =\r\n                        _modal.dialog.location.nativeElement.querySelectorAll(\r\n                            \".modal-footer button\"\r\n                        );\r\n                    if (btns.length) {\r\n                        btns.item(0)[\"focus\"]();\r\n                    }\r\n                }\r\n\r\n                // const overlays = Array.from(document.body.querySelectorAll('body>div, body>farris-dialog>.farris-modal,body>.farris-modal')).filter(n => n).map(n => {\r\n                //     return window.getComputedStyle(n).zIndex;\r\n                // }).filter(n => n && n!== 'auto').map(n => {\r\n                //     return parseInt(n, 10);\r\n                // });\r\n                const maxZindex = this.commonUtils.getFloatingLayerIndex();\r\n                _modal.dialog.location.nativeElement.style.zIndex = maxZindex;\r\n            });\r\n        });\r\n\r\n        this.msgMgr(_modal);\r\n        return _modal;\r\n    }\r\n\r\n    private msgMgr(ref: BsModalRef) {\r\n        const id = this.bsModalService.getModalsCount() + 1000;\r\n        if (this.modals.length === 0) {\r\n            this.modals.push({ id, ref });\r\n        } else {\r\n            if (!this.getModalById(id)) {\r\n                this.modals.push({ id, ref });\r\n            } else {\r\n                this.getModalById(id).ref = ref;\r\n            }\r\n        }\r\n\r\n        const cmp = this.getModalCmp();\r\n\r\n        cmp.closed.subscribe((level: number) => {\r\n            this.removeMessager(id);\r\n            this.confirmSubject.unsubscribe();\r\n        });\r\n\r\n        this.currentId = id;\r\n    }\r\n\r\n    question(\r\n        message: string,\r\n        okCallback: () => void,\r\n        cancelCallback?: () => void,\r\n        msg?: string,\r\n        fitContent = true\r\n    ) {\r\n        const questionDlg = this.show(\r\n            \"question\",\r\n            message,\r\n            {\r\n                initialState: {\r\n                    okText: this.yesText,\r\n                    okHandle: () => {\r\n                        questionDlg.close();\r\n                        if (okCallback) {\r\n                            okCallback();\r\n                        }\r\n                    },\r\n                    cancelText: this.noText,\r\n                    cancelHandle: () => {\r\n                        questionDlg.close();\r\n                        if (cancelCallback) {\r\n                            cancelCallback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n        return questionDlg;\r\n    }\r\n\r\n    question2(\r\n        messager: string,\r\n        btns: DialogButton[],\r\n        msg?: string,\r\n        fitContent = true\r\n    ) {\r\n        return this.show(\r\n            \"question\",\r\n            messager,\r\n            {\r\n                initialState: {\r\n                    buttons: btns,\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n    }\r\n    /**\r\n     * 2020å¹´3æ7æ¥å ä¸ºtextareaé«åº¦å¨ä¸åæµè§å¨ä¸ä¸ä¸æ ·ï¼åºå®é«åº¦å¯è½ä¼åºç°æ»å¨æ¡\r\n     * @param title æ é¢\r\n     * @param msg ä¿¡æ¯\r\n     * @param fitContent èªéåºåå®¹\r\n     */\r\n    prompt(title: string, msg?: string, fitContent = true) {\r\n        const promptSubject = new Subject();\r\n        const dlg = this.show(\r\n            \"prompt\",\r\n            msg,\r\n            {\r\n                title,\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        const mc = dlg.content as MessagerComponent;\r\n                        dlg.close();\r\n                        promptSubject.next(mc.promptText.nativeElement.value);\r\n                    },\r\n                    cancelText: this.cancelText,\r\n                    cancelHandle: () => {\r\n                        dlg.close();\r\n                        promptSubject.next(false);\r\n                    },\r\n                },\r\n                fitContent,\r\n                closed: () => {\r\n                    promptSubject.unsubscribe();\r\n                },\r\n            },\r\n            msg\r\n        );\r\n\r\n        return promptSubject;\r\n    }\r\n\r\n    prompt2(title: string, msg?: string, opts?: any) {\r\n        const promptSubject = new Subject();\r\n\r\n        const _opts = {\r\n            showOkButton: true,\r\n            showCloseButton: true,\r\n            showFontSize: false,\r\n            fontSize: 18,\r\n            readonly: false,\r\n            saveSize: false,\r\n            closeWhenever: true,\r\n        };\r\n        if (!opts) {\r\n            opts = _opts;\r\n        } else {\r\n            opts = Object.assign(_opts, opts);\r\n        }\r\n\r\n        const _dialogOpts = {\r\n            title,\r\n            initialState: {\r\n                showOkButton:\r\n                    opts.showOkButton === undefined ? true : opts.showOkButton,\r\n                showCancelButton:\r\n                    opts.showCancelButton === undefined\r\n                        ? true\r\n                        : opts.showCancelButton,\r\n                okText: this.okText,\r\n                okHandle: () => {\r\n                    const mc = dlg.content as MessagerComponent;\r\n                    const val = mc.promptText.nativeElement.value;\r\n                    if (opts.closeWhenever) {\r\n                        dlg.close();\r\n                        promptSubject.next(val);\r\n                    } else {\r\n                        promptSubject.next({ val, dlg });\r\n                    }\r\n                },\r\n                cancelText: this.cancelText,\r\n                cancelHandle: () => {\r\n                    dlg.close();\r\n                    promptSubject.next(false);\r\n                },\r\n                showFontSize: opts.showFontSize,\r\n                fontSize: opts.fontSize || 18,\r\n                enableWordCount: !!opts.enableWordCount,\r\n                countType: opts.countType || \"length\",\r\n                maxLength: opts.maxLength,\r\n                inputType: opts.inputType || \"textarea\",\r\n                placeholder: opts.placeholder || \"\",\r\n            },\r\n            fitContent: false,\r\n            showMaxButton: true,\r\n            resizable: true,\r\n            class: \"\",\r\n            closed: () => {\r\n                promptSubject.unsubscribe();\r\n            },\r\n            opened: () => {\r\n                if (opts.inputType !== \"textarea\") {\r\n                    return;\r\n                } else {\r\n                    setTimeout(() => {\r\n                        const textareaEle =\r\n                            dlg.content.promptText.nativeElement;\r\n                        textareaEle.closest(\"section\").style.padding = \"15px\";\r\n                        textareaEle.style.resize = \"none\";\r\n                        textareaEle.style.height = \"100%\";\r\n\r\n                        if (opts.readonly) {\r\n                            textareaEle.readOnly = true;\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            beforeClose: (modalRef: any) => {\r\n                if (opts.saveSize && !dlg.dialog.instance.isMax) {\r\n                    const data = {\r\n                        fontSize: dlg.content.fontSize,\r\n                        width: modalRef.config.width,\r\n                        height: modalRef.config.height,\r\n                    };\r\n                    this.saveTextAreaSizeInfo(data);\r\n                }\r\n                return of(true);\r\n            },\r\n        };\r\n        let dialogOpts = _dialogOpts;\r\n        if (opts) {\r\n            dialogOpts = Object.assign(dialogOpts, opts);\r\n        }\r\n\r\n        const dlg = this.show(\"prompt\", msg, dialogOpts, msg);\r\n\r\n        if (opts.inputType && dlg.content.promptText) {\r\n            dlg.content.promptText.nativeElement.focus();\r\n        }\r\n\r\n        return promptSubject;\r\n    }\r\n\r\n    getKeyString() {\r\n        // ä¸å°ç»ç«¯å±ç¨ä¸ä¸ªéç½®\r\n        // ä¿çæåä¸æ¬¡çè®¾ç½®ï¼\r\n        // ä¿å­çªå£å¤§å°ï¼å­ä½å¤§å°\r\n        return \"IGIX-FARRIS-UI-TEXTAREA-ZOOM-SETTINGS\";\r\n    }\r\n\r\n    private saveTextAreaSizeInfo(data) {\r\n        if (window.localStorage) {\r\n            const key = this.getKeyString();\r\n            localStorage.setItem(key, JSON.stringify(data));\r\n        }\r\n    }\r\n\r\n    confirm(message: string): Observable<any>;\r\n    confirm(message: string, msg?: string | number, fitContent?: boolean): Observable<any>;\r\n    confirm(message: string, msg?: string, fitContent = true): Observable<any> {\r\n        const confirmSubject = new Subject();\r\n\r\n        const _msg = typeof msg === \"number\" ? null : msg;\r\n        const confirmDlg = this.show(\r\n            \"question\",\r\n            message,\r\n            {\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        confirmDlg.close();\r\n                        confirmSubject.next(true);\r\n                    },\r\n                    cancelText: this.cancelText,\r\n                    cancelHandle: () => {\r\n                        confirmDlg.close();\r\n                        confirmSubject.next(false);\r\n                    },\r\n                },\r\n                fitContent,\r\n                closed: () => {\r\n                    confirmSubject.unsubscribe();\r\n                },\r\n            },\r\n            _msg\r\n        );\r\n\r\n        if (msg && typeof msg === \"number\") {\r\n            confirmDlg.dialog.location.nativeElement.style.zIndex = msg;\r\n        }\r\n\r\n        return confirmSubject.asObservable();\r\n    }\r\n\r\n    info(\r\n        message: string,\r\n        callback?: () => void,\r\n        msg?: string,\r\n        fitContent = true\r\n    ) {\r\n        const infoDlg = this.show(\r\n            \"info\",\r\n            message,\r\n            {\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        infoDlg.close();\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n        return infoDlg;\r\n    }\r\n\r\n    /** æä½æåæç¤ºï¼\r\n     * message: æç¤ºä¿¡æ¯\r\n     * msg: 2çº§ä¿¡æ¯\r\n     * fitCountent: é»è®¤ä¸ºtrue\r\n     * callback: ç¡®å®äºä»¶åè°\r\n     */\r\n    success(\r\n        message: string,\r\n        msg?: string,\r\n        fitContent = true,\r\n        callback: () => void = null\r\n    ) {\r\n        const successDlg = this.show(\r\n            \"success\",\r\n            message,\r\n            {\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        successDlg.close();\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n\r\n        return successDlg;\r\n    }\r\n    /** æç¤ºéè¯¯ä¿¡æ¯ï¼\r\n     * message: æç¤ºä¿¡æ¯\r\n     * msg: 2çº§ä¿¡æ¯\r\n     * fitCountent: é»è®¤ä¸ºtrue\r\n     * callback: ç¡®å®äºä»¶åè°\r\n     */\r\n    error(\r\n        message: string,\r\n        msg?: string,\r\n        fitContent = true,\r\n        callback: () => void = null,\r\n        safeHtml = true\r\n    ) {\r\n        const errorDlg = this.show(\r\n            \"error\",\r\n            message,\r\n            {\r\n                safeHtml,\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        errorDlg.close();\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n\r\n        return errorDlg;\r\n    }\r\n\r\n    warning(\r\n        message: string,\r\n        msg?: string,\r\n        fitContent = true,\r\n        callback: () => void = null\r\n    ) {\r\n        const warningDlg = this.show(\r\n            \"warning\",\r\n            message,\r\n            {\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        warningDlg.close();\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent,\r\n            },\r\n            msg\r\n        );\r\n        return warningDlg;\r\n    }\r\n\r\n    showHtmlMsg(\r\n        type: \"warning\" | \"info\" | \"error\" | \"success\",\r\n        title: string,\r\n        message?: string,\r\n        callback: () => void = null\r\n    ) {\r\n        const msgDlg = this.show(\r\n            type,\r\n            title,\r\n            {\r\n                safeHtml: false,\r\n                initialState: {\r\n                    okText: this.okText,\r\n                    okHandle: () => {\r\n                        msgDlg.close();\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                },\r\n                fitContent: true,\r\n            },\r\n            message\r\n        );\r\n        return msgDlg;\r\n    }\r\n\r\n    private close() {\r\n        if (this.modals.length) {\r\n            const msgbox = this.getModalById(this.currentId);\r\n            if (msgbox) {\r\n                msgbox.ref.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    private getModalById(id: number) {\r\n        return this.modals.find((item) => item.id === id);\r\n    }\r\n\r\n    private getModalCmp() {\r\n        return this.bsModalService.getCurrentModalContainer().instance;\r\n    }\r\n\r\n    private removeMessager(id) {\r\n        this.modals = this.modals.filter((n) => n.id !== id);\r\n        if (!this.modals.length) {\r\n            this.currentId = -1;\r\n        } else {\r\n            this.currentId = this.modals[this.modals.length - 1].id;\r\n        }\r\n    }\r\n\r\n    private copyToClipboard(text): boolean {\r\n        const windowRef: any = window;\r\n        if (windowRef.clipboardData && windowRef.clipboardData.setData) {\r\n            return windowRef.clipboardData.setData(\"Text\", text);\r\n        } else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\r\n            var textarea = document.createElement(\"textarea\");\r\n            textarea.textContent = text;\r\n            textarea.style.position = \"fixed\";\r\n            document.body.appendChild(textarea);\r\n            textarea.select();\r\n            try {\r\n                return document.execCommand(\"copy\");\r\n            } catch (ex) {\r\n            } finally {\r\n                document.body.removeChild(textarea);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /** å°è¯·æ±å¼å¸¸ä¿¡æ¯ä½æ ¼å¼åä¸ºobject */\r\n    private getServerExceptionEntity(requestFailedInfo: HttpRequestFaildInfo): ServerExceptionEntity {\r\n        if (requestFailedInfo.status == 404) {\r\n            const serverExceptionEntity = {} as ServerExceptionEntity;\r\n            serverExceptionEntity.Message = (requestFailedInfo && requestFailedInfo.message) || 'Request Failed!';\r\n            return serverExceptionEntity;\r\n        }\r\n        const serverExceptionEntity = requestFailedInfo && requestFailedInfo.error;\r\n        if (serverExceptionEntity) {\r\n            switch (typeof serverExceptionEntity) {\r\n                case 'string':\r\n                    return JSON.parse(serverExceptionEntity);\r\n                case 'object':\r\n                    return serverExceptionEntity;\r\n                default:\r\n                    console.error('ä¸æ¯æçè¯·æ±å¼å¸¸æ°æ®æ ¼å¼ï¼' + typeof serverExceptionEntity);\r\n                    console.error(serverExceptionEntity);\r\n                    return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    exceptionWithHttpInfo(_error: HttpRequestFaildInfo, opts = { width: 440, height: 200, log: false }) {\r\n        let error: ServerExceptionEntity =  this.getServerExceptionEntity(_error);;\r\n        this.exception(error, opts)\r\n    }\r\n\r\n    exception(error: ServerExceptionEntity, opts = { width: 440, height: 200, log: false }): void {\r\n        const exceptionMsg = error.Message || \"\";\r\n        const date = error.date || format(new Date(), 'yyyy-MM-dd HH:mm:ss')\r\n        const localDate = date;\r\n        // åçæ¶é´\r\n        const happenedTime = this.localeService.getValue('messager.exception.happend');\r\n        // è¯¦ç»ä¿¡æ¯\r\n        const detailInfo = this.localeService.getValue('messager.exception.detail');\r\n        const detail =\r\n            error.Detail ||\r\n            `${error.Message}\\r\\n${happenedTime}ï¼${localDate}\\r\\n${detailInfo}ï¼${error.innerMessage}` ||\r\n            \"\";\r\n\r\n        const innerMessage = error.innerMessage || null;\r\n\r\n        const defaultOptions = { width: 440, height: 200, log: false };\r\n        let exoptions = defaultOptions;\r\n        if (opts) {\r\n            exoptions = Object.assign({}, defaultOptions, opts);\r\n        }\r\n\r\n        let bsModalRef: BsModalRef;\r\n        const options = {\r\n            showMaxButton: false,\r\n            buttons: [\r\n                {\r\n                    text: this.localeService.getValue('messager.exception.roger'),\r\n                    cls: \"btn btn-primary btn-lg\",\r\n                    handle: () => {\r\n                        bsModalRef.close();\r\n                    },\r\n                },\r\n            ],\r\n            // showHeader: false,\r\n            width: exoptions.width,\r\n            height: exoptions.height,\r\n            safeHtml: false,\r\n            exception: {\r\n                date: localDate,\r\n                message: innerMessage,\r\n                copyButton: {\r\n                    text: this.localeService.getValue('messager.exception.copy'),\r\n                    onClick: (e) => {\r\n                        const result = this.copyToClipboard(detail);\r\n                        const text = result\r\n                            ? this.localeService.getValue('messager.exception.copySuccess')\r\n                            : this.localeService.getValue('messager.exception.copyFailed');\r\n                        bsModalRef.content.showMiniNotify(text, 1500);\r\n                    },\r\n                },\r\n            },\r\n        };\r\n        if (exoptions.log) {\r\n            console.error(error);\r\n        }\r\n        // this.displayError(error);\r\n        bsModalRef = this.show(\r\n            \"exception\",\r\n            exceptionMsg,\r\n            options\r\n        );\r\n    }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { FarrisCommonModule } from '@farris/ui-common';\r\n// import { FarrisFormsModule } from '@farris/ui-forms';\r\nimport { ModalModule } from '@farris/ui-modal';\r\nimport { LocaleModule } from '@farris/ui-locale';\r\n\r\nimport { MessagerComponent } from './messager.component';\r\nimport { MessagerService } from './messager.service';\r\nimport { MessagerConfig, MESSAGER_DEFAULT_CONFIG, MessagerDefaultConfig } from './messager.config';\r\nimport { FarrisDefaultFocusDirective } from './farris-default-focus.directive';\r\n\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        FarrisCommonModule.forRoot(),\r\n        // FarrisFormsModule,\r\n        LocaleModule,\r\n        ModalModule.forRoot()\r\n    ],\r\n    declarations: [\r\n        FarrisDefaultFocusDirective,\r\n        MessagerComponent\r\n    ],\r\n    entryComponents: [\r\n        MessagerComponent\r\n    ]\r\n})\r\nexport class MessagerModule {\r\n    static forRoot(config?: MessagerConfig): ModuleWithProviders {\r\n        return {\r\n            ngModule: MessagerModule,\r\n            providers: [\r\n                {provide: MESSAGER_DEFAULT_CONFIG, useValue: config || MessagerDefaultConfig },\r\n                MessagerService\r\n            ]\r\n        };\r\n    }\r\n}\r\n"],"names":["Directive","ElementRef","NgZone","Input","InjectionToken","CommonUtils","LocaleService","Renderer2","Component","Injector","HostBinding","ViewChild","Subject","of","format","Injectable","BsModalService","NgModule","CommonModule","FormsModule","FarrisCommonModule","LocaleModule","ModalModule"],"mappings":"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"}
