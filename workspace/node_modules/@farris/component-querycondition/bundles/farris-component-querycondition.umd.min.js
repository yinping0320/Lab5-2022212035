!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@farris/ui-modal"),require("@angular/common"),require("@farris/ui-dialog"),require("@farris/ui-layout"),require("@farris/ui-lookup"),require("@farris/ui-multi-select"),require("@farris/ui-field-group"),require("@farris/ui-input-group"),require("@farris/ui-dropdown"),require("@farris/ui-loading"),require("@farris/ui-combo-list"),require("@farris/ui-number-spinner"),require("@farris/ui-forms"),require("@farris/ui-datepicker"),require("rxjs/operators"),require("@farris/ui-combo-lookup"),require("@angular/forms"),require("@farris/ui-tooltip"),require("rxjs"),require("@farris/ui-notify"),require("@farris/ui-messager"),require("@farris/ui-locale"),require("@angular/core"),require("@farris/ui-common"),require("lodash-es")):"function"==typeof define&&define.amd?define("@farris/component-querycondition",["exports","@farris/ui-modal","@angular/common","@farris/ui-dialog","@farris/ui-layout","@farris/ui-lookup","@farris/ui-multi-select","@farris/ui-field-group","@farris/ui-input-group","@farris/ui-dropdown","@farris/ui-loading","@farris/ui-combo-list","@farris/ui-number-spinner","@farris/ui-forms","@farris/ui-datepicker","rxjs/operators","@farris/ui-combo-lookup","@angular/forms","@farris/ui-tooltip","rxjs","@farris/ui-notify","@farris/ui-messager","@farris/ui-locale","@angular/core","@farris/ui-common","lodash-es"],t):t((e.farris=e.farris||{},e.farris["component-querycondition"]={}),e.uiModal,e.ng.common,e.uiDialog,e.uiLayout,e.uiLookup,e.uiMultiSelect,e.uiFieldGroup,e.uiInputGroup,e.uiDropdown,e.uiLoading,e.uiComboList,e.uiNumberSpinner,e.uiForms,e.uiDatepicker,e.rxjs.operators,e.uiComboLookup,e.ng.forms,e.uiTooltip,e.rxjs,e.uiNotify,e.uiMessager,e.uiLocale,e.ng.core,e.uiCommon,e.lodashEs)}(this,function(e,t,n,i,r,o,a,l,s,d,u,c,p,h,m,g,f,y,v,C,b,S,T,F,x,w){"use strict";function I(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function V(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function D(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(V(arguments[t]));return e}var k=(O.decorators=[{type:F.Injectable}],O);function O(){this.eventbus=new F.EventEmitter}var q=(L.decorators=[{type:F.Injectable}],L.ctorParameters=function(){return[]},L);function L(){}var M={Text:0,SingleDate:1,SmartHelp:2,DropDownList:3,DateRange:4,NumberRange:5,SingleNumber:6,SingleYear:7,BoolCheck:8,DateTimeRange:9,SingleMonth:10,MonthRange:11,SingleDateTime:12,ComboLookUp:13,Radio:14,InputGroup:15};M[M.Text]="Text",M[M.SingleDate]="SingleDate",M[M.SmartHelp]="SmartHelp",M[M.DropDownList]="DropDownList",M[M.DateRange]="DateRange",M[M.NumberRange]="NumberRange",M[M.SingleNumber]="SingleNumber",M[M.SingleYear]="SingleYear",M[M.BoolCheck]="BoolCheck",M[M.DateTimeRange]="DateTimeRange",M[M.SingleMonth]="SingleMonth",M[M.MonthRange]="MonthRange",M[M.SingleDateTime]="SingleDateTime",M[M.ComboLookUp]="ComboLookUp",M[M.Radio]="Radio",M[M.InputGroup]="InputGroup";var E={IntType:0,StringType:1,BoolType:2};E[E.IntType]="IntType",E[E.StringType]="StringType",E[E.BoolType]="BoolType";var N=(R.prototype.getEnumType=function(){return E.IntType},R.prototype.getEnumValueName=function(){return this.name},R.prototype.getEnumValue=function(){return this.value},R);function R(){}var j=(H.prototype.getEnumType=function(){return E.StringType},H.prototype.getEnumValueName=function(){return this.name},H.prototype.getEnumValue=function(){return this.value},H);function H(){}var P=(_.prototype.getEnumType=function(){return E.BoolType},_.prototype.getEnumValueName=function(){return this.name},_.prototype.getEnumValue=function(){return this.value},_);function _(){}var G=(A.prototype.convertJObject=function(e){var t=e,n=t.getEnumType(),i=new Object;return i.Type=n,i.Content=t,i},A.prototype.initFromJobject=function(e){var t=e.Type,n=e.Content;return t==E.IntType?Object.assign(new N,n):t==E.BoolType?Object.assign(new P,n):Object.assign(new j,n)},A);function A(){}var $=(B.prototype.getControlType=function(){return M.DropDownList},B.prototype.isRequired=function(){return!!this.require},B);function B(){}var z=(J.prototype.convertToObject=function(e){var t=e,n=new Object;if(n.valueType=t.valueType,null!=t.enumValues){var i=n.enumValues=[],r=new G;t.enumValues.forEach(function(e){t.valueType==E.BoolType?i.push(r.convertJObject(Object.assign(new P,e))):t.valueType==E.IntType?i.push(r.convertJObject(Object.assign(new N,e))):i.push(r.convertJObject(Object.assign(new j,e)))})}return n.uri=t.uri,n.beforeShow=t.beforeShow,n.beforeHide=t.beforeHide,n.idField=t.idField,n.textField=t.textField,n.multiSelect=t.multiSelect,n.panelHeight=t.panelHeight,n.placeholder=t.placeholder,n.className=t.className,n.require=t.require,n},J.prototype.initFromObject=function(e){var n=new $;return null!=e.valueType&&(n.valueType=e.valueType),null!=e.enumValues&&(n.enumValues=new Array,e.enumValues.forEach(function(e){var t=new G;n.enumValues.push(t.initFromJobject(e))})),null!=e.uri&&(n.uri=e.uri),null!=e.beforeShow&&(n.beforeShow=e.beforeShow),null!=e.beforeHide&&(n.beforeHide=e.beforeHide),null!=e.idField&&(n.idField=e.idField),null!=e.textField&&(n.textField=e.textField),null!=e.multiSelect&&(n.multiSelect=e.multiSelect),null!=e.panelHeight&&(n.panelHeight=e.panelHeight),null!=e.placeholder&&(n.placeholder=e.placeholder),null!=e.className&&(n.className=e.className),null!=e.require&&(n.require=e.require),n},J);function J(){}var Q=(W.prototype.getControlType=function(){return M.Text},W.prototype.isRequired=function(){return!!this.require},W);function W(){}var Y=(U.prototype.getControlType=function(){return M.DateRange},U.prototype.isRequired=function(){return!!this.require},U);function U(){}var K=(Z.prototype.isRequired=function(){return!!this.require},Z.prototype.getControlType=function(){return M.SingleDate},Z);function Z(){}var X=(ee.prototype.getControlType=function(){return M.SmartHelp},ee.prototype.isRequired=function(){return!!this.require},ee);function ee(){}var te=function sn(){},ne=(ie.prototype.getControlType=function(){return M.NumberRange},ie.prototype.isRequired=function(){return!!this.require},ie);function ie(){}var re=(oe.prototype.getControlType=function(){return M.SingleNumber},oe.prototype.isRequired=function(){return!!this.require},oe);function oe(){}var ae=(le.prototype.getControlType=function(){return M.SingleYear},le.prototype.isRequired=function(){return!!this.require},le);function le(){}var se=(de.prototype.getControlType=function(){return M.BoolCheck},de.prototype.isRequired=function(){return!!this.require},de);function de(){this.data=[],this.separator=",",this.isStringValue=!0}var ue=(ce.prototype.getControlType=function(){return M.DateTimeRange},ce.prototype.isRequired=function(){return!!this.require},ce);function ce(){}var pe=(he.prototype.getControlType=function(){return M.SingleMonth},he.prototype.isRequired=function(){return!!this.require},he);function he(){}var me=(ge.prototype.getControlType=function(){return M.MonthRange},ge.prototype.isRequired=function(){return!!this.require},ge);function ge(){}var fe=(ye.prototype.getControlType=function(){return M.SingleDateTime},ye.prototype.isRequired=function(){return!!this.require},ye);function ye(){}var ve=(Ce.prototype.getControlType=function(){return M.ComboLookUp},Ce.prototype.isRequired=function(){return!!this.require},Ce);function Ce(){}var be=(Se.prototype.getControlType=function(){return M.Radio},Se.prototype.isRequired=function(){return!!this.require},Se);function Se(){}var Te=(Fe.prototype.convertToObject=function(e){var t=e,n=new Object;if(n.valueType=t.valueType,null!=t.enumValues){var i=n.enumValues=[],r=new G;t.enumValues.forEach(function(e){t.valueType==E.BoolType?i.push(r.convertJObject(Object.assign(new P,e))):t.valueType==E.IntType?i.push(r.convertJObject(Object.assign(new N,e))):i.push(r.convertJObject(Object.assign(new j,e)))})}return n.horizontal=t.horizontal,n.showLabel=t.showLabel,n.disabled=t.disabled,n.className=t.className,n.require=t.require,n},Fe.prototype.initFromObject=function(e){var n=new be;return null!=e.valueType&&(n.valueType=e.valueType),null!=e.enumValues&&(n.enumValues=new Array,e.enumValues.forEach(function(e){var t=new G;n.enumValues.push(t.initFromJobject(e))})),null!=e.horizontal&&(n.horizontal=e.horizontal),null!=e.showLabel&&(n.showLabel=e.showLabel),null!=e.disabled&&(n.disabled=e.disabled),null!=e.className&&(n.className=e.className),null!=e.require&&(n.require=e.require),n},Fe);function Fe(){}var xe=(we.prototype.getControlType=function(){return M.InputGroup},we.prototype.isRequired=function(){return!!this.require},we);function we(){}var Ie=function dn(){},Ve=(De.prototype.convertJObject=function(e){var t=e,n=t.getControlType(),i=new Object;if((i.Type=n)==M.DropDownList){var r=new z;i.Content=r.convertToObject(t)}else n==M.Radio?(r=new Te,i.Content=r.convertToObject(t)):i.Content=t;return i},De.prototype.initFromJobject=function(e){var t=e.Type,n=e.Content;return t==M.Text?Object.assign(new Q,n):t==M.InputGroup?Object.assign(new xe,n):t==M.DateRange?Object.assign(new Y,n):t==M.NumberRange?Object.assign(new ne,n):t==M.SingleDate?Object.assign(new K,n):t==M.SingleNumber?Object.assign(new re,n):t==M.DropDownList?(new z).initFromObject(n):t==M.SmartHelp?Object.assign(new X,n):t==M.ComboLookUp?Object.assign(new ve,n):t==M.SingleYear?Object.assign(new ae,n):t==M.SingleMonth?Object.assign(new pe,n):t==M.BoolCheck?Object.assign(new se,n):t==M.Radio?(new Te).initFromObject(n):t==M.DateTimeRange?Object.assign(new ue,n):t==M.MonthRange?Object.assign(new me,n):t==M.SingleDateTime?Object.assign(new fe,n):void 0},De);function De(){}var ke=(Oe.prototype.clearValue=function(){this.value=undefined},Oe.prototype.setOriginalValue=function(e){this.value=e},Oe.prototype.getOriginalValue=function(){return this.value},Oe.prototype.getControlType=function(){return M.Text},Oe.prototype.isEmpty=function(){return!this.value},Oe);function Oe(e){void 0===e&&(e={value:""}),this.value=e.value?e.value:""}var qe=(Le.prototype.isEmpty=function(){return null==this.startValue&&null==this.endValue},Le.prototype.clearValue=function(){this.startValue=undefined,this.endValue=undefined},Le.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},Le.prototype.getOriginalValue=function(){return{begin:this.startValue,end:this.endValue}},Le.prototype.getControlType=function(){return M.NumberRange},Le);function Le(e){void 0===e&&(e={startValue:null,endValue:null}),this.startValue=null==e.startValue?null:parseFloat(e.startValue),this.endValue=null==e.endValue?null:parseFloat(e.endValue)}var Me=(Ee.prototype.convertToObject=function(e){var t=e,n=new Object;return n.startValue=t.startValue,n.endValue=t.endValue,n},Ee.prototype.initFromObject=function(e){var t=new qe;return e.startValue&&(t.startValue=parseFloat(e.startValue)),e.endValue&&(t.endValue=parseFloat(e.endValue)),t},Ee);function Ee(){}var Ne=(Re.prototype.setOriginalValue=function(e){e.formatted?(this.startTime=e.formatted.split(e.delimiter)[0],this.endTime=e.formatted.split(e.delimiter)[1]):this.clearValue()},Re.prototype.getOriginalValue=function(){return this.startTime||this.endTime?this.startTime+"~"+this.endTime:""},Re.prototype.getControlType=function(){return M.DateRange},Re.prototype.clearValue=function(){this.startTime=undefined,this.endTime=undefined},Re.prototype.isEmpty=function(){return!this.startTime&&!this.endTime},Re);function Re(e){void 0===e&&(e={startTime:"",endTime:""}),this.startTime=e.startTime,this.endTime=e.endTime}var je=(He.prototype.getControlType=function(){return M.SmartHelp},He.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},He.prototype.getOriginalValue=function(){var t=this,n=this.valueField.split("."),e=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return e&&e.length?e.join(","):""},He.prototype.clearValue=function(){this.value=[],this.valueField=undefined,this.textValue=undefined,this.isInputText=undefined},He.prototype.isEmpty=function(){return!this.value.length},He.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return i&&i.length?i.join(","):""},He.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):null}return e[t[0]]},He);function He(e){void 0===e&&(e={value:[],valueField:undefined,textValue:undefined,isInputText:undefined}),e.textValue?(this.value=e.value,this.valueField=e.valueField,this.textValue=e.textValue,this.isInputText=e.isInputText):(this.value=e.value,this.valueField=e.valueField?e.valueField:"",this.textValue="help-text-value-null",this.isInputText=!1)}var Pe=(_e.prototype.setOriginalValue=function(e){this.dateValue=e.formatted},_e.prototype.getOriginalValue=function(){return this.dateValue},_e.prototype.getControlType=function(){return M.SingleDate},_e.prototype.isEmpty=function(){return!this.dateValue},_e.prototype.clearValue=function(){this.dateValue=undefined},_e);function _e(e){void 0===e&&(e=""),this.dateValue=e}var Ge=(Ae.prototype.isEmpty=function(){return null==this.numValue},Ae.prototype.clearValue=function(){this.numValue=undefined},Ae.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},Ae.prototype.getOriginalValue=function(){return this.numValue},Ae.prototype.getControlType=function(){return M.SingleNumber},Ae);function Ae(e){void 0===e&&(e=null),this.numValue=null==e?null:parseFloat(e)}var $e=(Be.prototype.setOriginalValue=function(e){this.yearValue=e.formatted},Be.prototype.getOriginalValue=function(){return this.yearValue},Be.prototype.getControlType=function(){return M.SingleYear},Be.prototype.clearValue=function(){this.yearValue=undefined},Be.prototype.isEmpty=function(){return!this.yearValue},Be);function Be(e){void 0===e&&(e=""),this.yearValue=e}var ze=(Je.prototype.clearValue=function(){this.value=[]},Je.prototype.setOriginalValue=function(e){e.length?this.value=e.map(function(e){return"string"==typeof e||e}):this.value=e},Je.prototype.getOriginalValue=function(){return this.value.length?this.value.map(function(e){return!0===e?"true":e}):this.value},Je.prototype.getControlType=function(){return M.BoolCheck},Je.prototype.isEmpty=function(){return 0==this.value.length},Je);function Je(e){void 0===e&&(e=[]),this.value=e}var Qe=(We.prototype.clearValue=function(){this.value=[],this.key=undefined},We.prototype.setOriginalValue=function(e){},We.prototype.getOriginalValue=function(){return this.key},We.prototype.getControlType=function(){return M.DropDownList},We.prototype.isEmpty=function(){return!this.key},We);function We(e){void 0===e&&(e={value:[],key:undefined}),this.value=[],e.value&&0<e.value.length?e.hasOwnProperty("key")?(this.value=e.value,this.key=e.key):(this.value=e.value.Content&&e.value.Content.value?[e.value.Content]:[],this.key=e.value.Content&&e.value.Content.value?e.value.Content.value:undefined):this.clearValue()}var Ye=(Ue.prototype.setOriginalValue=function(e){this.monthValue=e.formatted},Ue.prototype.getOriginalValue=function(){return this.monthValue},Ue.prototype.getControlType=function(){return M.SingleMonth},Ue.prototype.clearValue=function(){this.monthValue=undefined},Ue.prototype.isEmpty=function(){return!this.monthValue},Ue);function Ue(e){void 0===e&&(e=""),this.monthValue=e}var Ke=(Ze.prototype.setOriginalValue=function(e){e.formatted?(this.startTime=e.formatted.split(e.delimiter)[0],this.endTime=e.formatted.split(e.delimiter)[1]):this.clearValue()},Ze.prototype.getOriginalValue=function(){return this.startTime||this.endTime?this.startTime+"~"+this.endTime:""},Ze.prototype.getControlType=function(){return M.MonthRange},Ze.prototype.clearValue=function(){this.startTime=undefined,this.endTime=undefined},Ze.prototype.isEmpty=function(){return!this.startTime&&!this.endTime},Ze);function Ze(e){void 0===e&&(e={startTime:"",endTime:""}),this.startTime=e.startTime,this.endTime=e.endTime}var Xe=(et.prototype.setOriginalValue=function(e){this.datetimeValue=e.formatted},et.prototype.getOriginalValue=function(){return this.datetimeValue},et.prototype.getControlType=function(){return M.SingleDateTime},et.prototype.isEmpty=function(){return!this.datetimeValue},et.prototype.clearValue=function(){this.datetimeValue=undefined},et);function et(e){void 0===e&&(e=""),this.datetimeValue=e}var tt=(nt.prototype.clearValue=function(){this.value=[],this.valueField=undefined,this.textValue=undefined},nt.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},nt.prototype.getOriginalValue=function(){var t=this,n=this.valueField.split("."),e=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return e&&e.length?e.join(","):""},nt.prototype.getControlType=function(){return M.ComboLookUp},nt.prototype.isEmpty=function(){return!this.valueField},nt.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):null}return e[t[0]]},nt.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return i&&i.length?i.join(","):""},nt);function nt(e){void 0===e&&(e={value:[],valueField:undefined,textValue:undefined}),e.textValue?(this.valueField=e.valueField,this.value=e.value,this.textValue=e.textValue):(this.valueField=e.valueField?e.valueField:"",this.value=e.value&&e.value.data?[e.value.data]:[],this.textValue="help-text-value-null")}var it=(rt.prototype.clearValue=function(){this.value=undefined},rt.prototype.setOriginalValue=function(e){this.value=e},rt.prototype.getOriginalValue=function(){return this.value},rt.prototype.getControlType=function(){return M.Radio},rt.prototype.isEmpty=function(){return!this.value},rt);function rt(e){void 0===e&&(e=undefined),this.value=e}var ot=(at.prototype.getControlType=function(){return M.InputGroup},at.prototype.setOriginalValue=function(e){throw new Error("Method not implemented.")},at.prototype.getOriginalValue=function(){var t=this,n=this.textField?this.textField.split("."):[],e=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return e&&e.length?e.join(","):""},at.prototype.clearValue=function(){this.value=[],this.textValue=undefined,this.textField=undefined,this.isInputText=undefined},at.prototype.isEmpty=function(){return!this.textValue},at.prototype.getTextValue=function(e){var t=this,n=e.split("."),i=this.value.map(function(e){return t.getPropValue(e,w.cloneDeep(n))});return i&&i.length?i.join(","):""},at.prototype.getPropValue=function(e,t){if(1<t.length){var n=t.shift();return e[n]?this.getPropValue(e[n],t):""}return e[t[0]]},at);function at(e){void 0===e&&(e={value:[],textValue:undefined,textField:undefined,isInputText:undefined}),this.value=e.value,this.textValue=e.textValue?e.textValue:"",this.textField=e.textField,this.isInputText=e.isInputText}var lt=(st.prototype.convertToObject=function(e){var t=e,n=t.getControlType(),i=new Object;if((i.Type=n)==M.NumberRange){var r=new Me;i.Content=r.convertToObject(t)}else i.Content=t;return i},st.prototype.initFromObject=function(e){var t=e.Content;switch(e.Type){case M.Text:return new ke(e.Content);case M.NumberRange:return new qe(e.Content);case M.DateRange:case M.DateTimeRange:return new Ne(e.Content);case M.DropDownList:return new Qe(e.Content);case M.SmartHelp:return new je(e.Content);case M.ComboLookUp:return new tt(e.Content);case M.SingleDate:return Object.assign(new Pe,t);case M.SingleNumber:return Object.assign(new Ge,t);case M.SingleYear:return Object.assign(new $e,t);case M.BoolCheck:return Object.assign(new ze,t);case M.Radio:return Object.assign(new it,t);case M.SingleMonth:return Object.assign(new Ye,t);case M.MonthRange:return Object.assign(new Ke,t);case M.SingleDateTime:return Object.assign(new Xe,t);case M.InputGroup:return Object.assign(new ot,t)}},st);function st(){}var dt=function un(){this.visible=!0},ut=(ct.prototype.convertJObject=function(e){var t=e,n=new Object;n.ID=t.id,n.FieldCode=t.fieldCode,n.FieldName=t.fieldName,n.ValueType=t.valueType,n.placeHolder=t.placeHolder,n.beginPlaceHolder=t.hasOwnProperty("beginPlaceHolder")?t.beginPlaceHolder:"",n.endPlaceHolder=t.hasOwnProperty("endPlaceHolder")?t.endPlaceHolder:"",n.visible=!t.hasOwnProperty("visible")||t.visible,n.conditionid=t.hasOwnProperty("conditionid")?t.conditionid:undefined,n.compareType=t.hasOwnProperty("compareType")?t.compareType:undefined,n.relation=t.hasOwnProperty("relation")?t.relation:undefined,n.Lbracket=t.hasOwnProperty("Lbracket")?t.Lbracket:undefined,n.Rbracket=t.hasOwnProperty("Rbracket")?t.Rbracket:undefined;var i=new lt;t.value&&(n.Value=i.convertToObject(t.value));var r=new Ve;return t.control&&(n.Control=r.convertJObject(t.control)),n},ct.prototype.initFromJobject=function(e){var t=new dt;t.id=e.ID,t.fieldCode=e.FieldCode,t.fieldName=e.FieldName,t.valueType=e.ValueType,t.placeHolder=e.placeHolder,t.beginPlaceHolder=e.hasOwnProperty("beginPlaceHolder")?e.beginPlaceHolder:"",t.endPlaceHolder=e.hasOwnProperty("endPlaceHolder")?e.endPlaceHolder:"",t.visible=!e.hasOwnProperty("visible")||e.visible,t.conditionid=e.hasOwnProperty("conditionid")?e.conditionid:undefined,t.compareType=e.hasOwnProperty("compareType")?e.compareType:undefined,t.relation=e.hasOwnProperty("relation")?e.relation:undefined,t.Rbracket=e.hasOwnProperty("Rbracket")?e.Rbracket:undefined,t.Lbracket=e.hasOwnProperty("Lbracket")?e.Lbracket:undefined;var n=e.Value;if(n){var i=new lt;t.value=i.initFromObject(n)}var r=e.Control;if(r){var o=new Ve;t.control=o.initFromJobject(r)}return t},ct);function ct(){}var pt={Value:0,SmartHelp:1,Enum:2,Express:3};pt[pt.Value]="Value",pt[pt.SmartHelp]="SmartHelp",pt[pt.Enum]="Enum",pt[pt.Express]="Express";var ht=(mt.prototype.getControlConfigState=function(){return this.controlConfigState},mt.prototype.updateControlConfigState=function(e){this.controlConfigState.next(e)},mt.prototype.convertToSimpleQueryConditions=function(e){var n=this;return e&&0==e.length?[]:e.map(function(e){var t={};return t.fieldCode=e.labelCode,e.hasOwnProperty("visible")&&(t.visible=e.visible),t.control=n.getSimpleControl(e),t})},mt.prototype.getSimpleControl=function(e){var t=e.control,n={};switch(this.controlTypeMap.get(t.controltype)){case"single-year":this.updateSimpleControl(n,["maxDate","minDate"],t);break;default:n={}}return n},mt.prototype.updateSimpleControl=function(e,t,n,i){void 0===i&&(i=[]),0==i.length&&(i=t);for(var r=0;r<t.length;r++)i[r]||(i[r]=t[r]);for(var o=0;o<t.length;o++)n&&n.hasOwnProperty(t[o])&&(e[i[o]]=n[t[o]])},mt.prototype.convertToQueryConditions=function(e){var r,o=this;return e.map(function(e){(r=new dt).id=e.id,r.fieldCode=e.labelCode,r.fieldName=e.name,r.valueType=pt.Value,r.placeHolder=e.placeHolder,r.beginPlaceHolder=e.hasOwnProperty("beginPlaceHolder")?e.beginPlaceHolder:"",r.endPlaceHolder=e.hasOwnProperty("endPlaceHolder")?e.endPlaceHolder:"";var t=o.getControlAndValue(e),n=t.control,i=t.value;return r.control=n,r.value=i,r})},mt.prototype.getControlAndValue=function(e){var t,n,i=e.control,r=e.value;switch(i.controltype){case"text":(t=new Q).className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new ke({value:r});break;case"input-group":(t=new xe).className=i.className,t.require=i.require,t.editable=i.editable,t.groupText=i.groupText,t.usageMode=i.usageMode,t.dialogOptions=this.setInputGroupDialog(e),t.click=i.click,n=new ot(r);break;case"date":(t=new Y).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.weekSelect=i.weekSelect,t.showWeekNumbers=i.showWeekNumbers,t.startFieldCode=i.startFieldCode||e.labelCode,t.endFieldCode=i.endFieldCode||e.labelCode,t.enableSplit=i.enableSplit||!1,n=new Ne(r);break;case"date-time":(t=new ue).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.enableCustomFormat=i.enableCustomFormat,t.enableSplit=i.enableSplit||!1,n=new Ne(r);break;case"month":(t=new me).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.enableSplit=i.enableSplit||!1,n=new Ke(r);break;case"number":(t=new ne).className=i.className,t.placeholder=this.emptyString(i.placeholder),t.require=i.require,t.precision=i.precision,t.textAlign=i.textAlign,t.bigNumber=i.isBigNumber,t.min=i.minValue,t.max=i.maxValue,n=new qe(r);break;case"dropdown":(t=new $).valueType=i.valueType,t.enumValues=i.enumValues,t.uri=i.uri,t.beforeShow=i.beforeShow,t.beforeHide=i.beforeHide,t.idField=i.idField,t.textField=i.textField,t.multiSelect=i.multiSelect,t.className=i.className,t.placeholder=i.placeholder,t.panelHeight=i.panelHeight,t.require=i.require,n=new Qe(r);break;case"help":if((t=new X).uri=i.uri,t.textField=i.textField,t.valueField=i.valueField,t.displayType=i.displayType,t.idField=i.idField,t.mapFields=i.mapFields,t.preEventCmd=i.preEventCmd,t.postEventCmd=i.postEventCmd,t.context=i.context,t.className=i.className,t.enableFullTree=i.enableFullTree,t.loadTreeDataType=i.loadTreeDataType,t.singleSelect=i.singleSelect,t.expandLevel=i.expandLevel,t.enableCascade=i.enableCascade,t.cascadeStatus=i.cascadeStatus,t.placeholder=i.placeholder,t.require=i.require,t.nosearch=i.nosearch,t.displayFields=i.displayFields,t.displayTextSeparator=i.displayTextSeparator,t.editable=i.editable,t.clearFields=i.clearFields,t.clear=i.clear,t.dialogTitle=i.dialogTitle,t.panelHeight=i.panelHeight,t.panelWidth=i.panelWidth,t.enableMultiFieldSearch=i.enableMultiFieldSearch,i.hasOwnProperty("pageSize")&&(t.pageSize=i.pageSize),i.hasOwnProperty("pageList")&&(t.pageList=i.pageList),i.hasOwnProperty("quickSelect")){var o=new te;o.enable=i.quickSelect.enable,o.showItemsCount=i.quickSelect.showItemsCount,o.formatter=i.quickSelect.formatter,o.showMore=i.quickSelect.showMore,t.quickSelect=o}n=new je(r);break;case"combolist-help":(t=new ve).uri=i.uri,t.idField=i.idField,t.valueField=i.valueField,t.textField=i.textField,t.mapFields=i.mapFields,t.displayType=this.displayTypeTransform(i.displayType),t.singleSelect=i.singleSelect,t.preEventCmd=i.preEventCmd,t.postEventCmd=i.postEventCmd,t.enableFullTree=i.enableFullTree,t.loadTreeDataType=i.loadTreeDataType,t.expandLevel=i.expandLevel,t.className=i.className,t.placeholder=i.placeholder,t.panelWidth=i.panelWidth,t.panelHeight=i.panelHeight,t.require=i.require,t.context=i.context,n=new tt(r);break;case"single-date":(t=new K).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.isDynamicDate=!!i.isDynamicDate&&i.isDynamicDate,n=new Pe(r);break;case"single-date-time":(t=new fe).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.enableCustomFormat=i.enableCustomFormat,n=new Xe(r);break;case"single-number":(t=new re).className=i.className,t.placeholder=this.emptyString(i.placeholder),t.precision=i.precision,t.require=i.require,t.textAlign=i.textAlign,t.bigNumber=i.isBigNumber,t.min=i.minValue,t.max=i.maxValue,n=new Ge(r);break;case"single-year":(t=new ae).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,t.maxDate=i.maxDate,t.minDate=i.minDate,n=new $e(r);break;case"single-month":(t=new pe).format=i.format,t.returnFormat=i.returnFormat,t.dateChangedCmd=i.valueChangedCmd?i.valueChangedCmd:i.dateChangedCmd,t.className=i.className,t.placeholder=i.placeholder,t.require=i.require,n=new Ye(r);break;case"bool-check":(t=new se).className=i.className,t.data=[{value:"true",name:e.name}],t.horizontal=i.horizontal,t.disable=i.disable,t.isStringValue=!1,t.require=i.require,n=new ze(r);break;case"radio":(t=new be).valueType=i.valueType,t.enumValues=i.enumValues,t.className=i.className,t.showLabel=i.showLabel,t.horizontal=i.horizontal,t.disabled=i.disabled,t.require=i.require,n=new it(r)}return{control:t,value:n}},mt.prototype.getGuid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},mt.prototype.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},mt.prototype.showInfo=function(e,t,n,i){this.notify.config.position="top-center","success"==t?this.notify.success({title:n,msg:e,timeout:i}):"info"==t?this.notify.info({title:n,msg:e,timeout:i}):"warning"==t?this.notify.warning({title:n,msg:e,timeout:i}):"error"==t&&this.notify.error({title:n,msg:e,timeout:i})},mt.prototype.getConditionItemTitle=function(e){if(e.id&&""!==e.id)return e.fieldName},mt.prototype.setValues=function(e,t,i){var r,o,a=this,l=e.queryConditions?e.queryConditions:[];return t.forEach(function(t){if((r=l.find(function(e){return e.fieldCode==t.labelCode}))&&r.control&&r.value){o=a.controlTypeMap.get(r.control.getControlType()),t.control={controltype:o};var e=a.getControlAndValue(t),n=(e.control,e.value);r.value=a.isNumCheck(r,n,t),r.readonly=i}}),e},mt.prototype.updateControl=function(n,e){var i;0<(n=n||[]).length&&e.forEach(function(t){if((i=n.find(function(e){return e.fieldCode==t.fieldCode}))&&i.hasOwnProperty("visible")&&t.hasOwnProperty("visible")&&t.visible!==i.visible&&(i.visible=t.visible),i&&i.control)for(var e in t.control)i.control[e]=t.control[e]})},mt.prototype.isValid=function(e){return e.map(function(e){if(e.control.isRequired()&&e.value.isEmpty()&&e.visible)return{type:"require",field:e.fieldName}}).filter(function(e){return null!=e})},mt.prototype.emptyString=function(e){return null===e||e===undefined?"":e},mt.prototype.displayTypeTransform=function(e){return"List"===e?"LOOKUPLIST":"LOOKUPTREELIST"},mt.prototype.isNumCheck=function(e,t,n){var i,r;return"single-number"==n.control.controltype&&(i=null==e.control.min||e.control.min==undefined?-2147483648:e.control.min,r=null==e.control.max||e.control.max==undefined?2147483647:e.control.max,t.numValue=0<t.numValue-i?t.numValue:i,t.numValue=t.numValue-r<0?t.numValue:r),"number"==n.control.controltype&&(i=null==e.control.min||e.control.min==undefined?-2147483648:e.control.min,r=null==e.control.max||e.control.max==undefined?2147483647:e.control.max,t.startValue=0<t.startValue-i?t.startValue:i,t.startValue=t.startValue-r<0?t.startValue:r,t.endValue=0<t.endValue-i?t.endValue:i,t.endValue=t.endValue-r<0?t.endValue:r),t},mt.prototype.setInputGroupDialog=function(e){var t=e.control,n=t.modalConfig;if(!e.id||"text"==t.usageMode)return undefined;var i=new Ie;return i.modalId=e.id,n.mapFields&&(i.mapFields=JSON.parse(n.mapFields.replace(/'/g,'"'))),i.showHeader=!n.hasOwnProperty("showHeader")||n.showHeader,i.showCloseButton=!n.hasOwnProperty("showCloseButton")||n.showCloseButton,i.showMaxButton=!n.hasOwnProperty("showMaxButton")||n.showMaxButton,i.title=n.hasOwnProperty("title")?n.title:"",i.width=n.width,i.height=n.height,i},mt.decorators=[{type:F.Injectable}],mt.ctorParameters=function(){return[{type:b.NotifyService}]},mt);function mt(e){this.notify=e,this.controlConfigState=new C.BehaviorSubject([]),this.controlTypeMap=new Map([[M.Text,"text"],[M.BoolCheck,"bool-check"],[M.DateRange,"date"],[M.DateTimeRange,"date-time"],[M.NumberRange,"number"],[M.DropDownList,"dropdown"],[M.SmartHelp,"help"],[M.SingleDate,"single-date"],[M.SingleNumber,"single-number"],[M.SingleYear,"single-year"],[M.SingleMonth,"single-month"],[M.MonthRange,"month"],[M.SingleDateTime,"single-date-time"],[M.ComboLookUp,"combolist-help"],[M.Radio,"radio"],[M.InputGroup,"input-group"]])}var gt=(Object.defineProperty(ft.prototype,"selectSolution",{get:function(){return this._selectSolution},set:function(e){this._selectSolution=e},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"resetFieldConfigs",{get:function(){return this._resetFieldConfigs},set:function(e){e&&0<e.length&&this.solutionService.updateControlConfigState(e),this._resetFieldConfigs=e},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"selectedFieldConditions",{get:function(){return this._selectedFieldConditions},set:function(e){this._selectedFieldConditions=e},enumerable:!0,configurable:!0}),ft.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},ft.prototype.ngOnInit=function(){this.currentLocale===this.localeIds.en&&(this.isControlInline=!1),this.selectedFieldConditions=this.selectedFieldConditions||new Array},ft.prototype.ngAfterViewInit=function(){},ft.prototype.ngAfterViewChecked=function(){},ft.prototype.hasSetMultiClass=function(e){return!!(e.control.className&&-1<e.control.className.indexOf("farris-group-multi-label"))},ft.prototype.getStyle=function(e){var t=e.control.className;return(t=t?t.replace("farris-group-multi-label",""):"")||"col-12 col-md-6 col-xl-3 col-el-2"},ft.prototype.configDialogConfirm=function(e){var t,n,i,r,o=e,a=new Array,l=function(t){var e=s.selectedFieldConditions.find(function(e){return e.fieldCode==t});e?a.push(e):a.push(s.fieldConfigs.find(function(e){return e.fieldCode==t}))},s=this;try{for(var d=I(o),u=d.next();!u.done;u=d.next())l(u.value)}catch(m){t={error:m}}finally{try{u&&!u.done&&(n=d["return"])&&n.call(d)}finally{if(t)throw t.error}}try{for(var c=I(this.selectedFieldConditions),p=c.next();!p.done;p=c.next()){var h=p.value;h.visible||a.push(h)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(r=c["return"])&&r.call(c)}finally{if(i)throw i.error}}this.selectedFieldConditions=a,this.fieldConditionsChange.emit(this.selectedFieldConditions)},ft.prototype.openFieldConfigDialog=function(){this.configDialog.inputSelectedFileds=this.selectedFieldConditions?this.selectedFieldConditions:[],this.configDialog.dialog.show()},ft.prototype.resetSelectedConditionValues=function(t){return void 0===t&&(t=!1),this.selectedFieldConditions.map(function(e){return t&&e.control.isRequired()||e.value.clearValue(),e})},ft.prototype.conditionChange=function(){this.fieldConditionsChange.emit(this.selectedFieldConditions),this.selectSolution&&"2"===this.selectSolution.mode&&(this.selectSolution.queryConditions=this.selectedFieldConditions)},ft.prototype.conditionChangeAdvanced=function(e){this.selectedFieldConditions=e,this.fieldConditionsChange.emit(this.selectedFieldConditions),this.selectSolution&&"2"===this.selectSolution.mode&&(this.selectSolution.queryConditions=this.selectedFieldConditions)},ft.prototype.clearFieldsChange=function(e){e&&e.controlType==M.SmartHelp&&e.canClearRelatedFields&&(this.canClearRelatedFields=!0)},ft.prototype.confirmLabelFormat=function(e){if(this.isControlInline){var t=!(this.labelFormat="farris-form-controls-inline");if(e.length){var n=[];e.forEach(function(e){e.control.getControlType()!=M.BoolCheck&&n.push(e),e.control.className&&"farris-group-multi-label"!=e.control.className&&(t=!0)}),this.labelFormat+=t?" condition-is-custom":" condition-with-fixed";var i=0;n.length&&n.forEach(function(e){i=e.fieldName.length>i?e.fieldName.length:i}),this.showCompleteLabel&&(8<i?this.labelFormat=this.labelFormat.concat(" f-form-label-xl"):i<9&&6<i&&(this.labelFormat=this.labelFormat.concat(" f-form-label-lg")))}}if(this.labelFormat)return this.labelFormat+(this.isControlInline&&this.showCompleteLabel?" condition-with-complete":"")},ft.prototype.buildSmartHelpKey=function(e){var t,n="";return n=location.hash?(t=location.hash.split("?"))?t[0]:"":(t=location.pathname.split("/"))?t[t.length-1]:"",this.idService.encrypt(n+"/querysolution/"+e)},ft.decorators=[{type:F.Component,args:[{selector:"farris-querycondition",template:'<div  *ngIf="!selectSolution || selectSolution.mode !== \'2\'" class="row f-utils-flex-row-wrap farris-form {{confirmLabelFormat(selectedFieldConditions)}} condition-div"  id="querycondition" #queryConditionWrap>\r\n    <ng-container *ngFor="let currentItem of selectedFieldConditions;let i=index;">\r\n        <app-solution-input  \r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.Text && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-input>\r\n\r\n        <app-solution-inputgroup\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.InputGroup && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-inputgroup>\r\n        \r\n        <app-solution-dropdownlist\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DropDownList && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-dropdownlist>\r\n        \r\n        <app-solution-smarthelp\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            (clearFieldsChange)="clearFieldsChange($event)"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SmartHelp && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [instanceId]="buildSmartHelpKey(selectedFieldConditions[i].fieldCode)">\r\n        </app-solution-smarthelp>\r\n        \r\n        <app-solution-single-number\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleNumber && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-single-number>\r\n\r\n        <app-solution-numberrange\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.NumberRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-numberrange>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleDate && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DateRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleYear && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleMonth && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.MonthRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.SingleDateTime && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.DateTimeRange && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]"\r\n            [controlType]="currentItem.control.getControlType()">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-combolookup\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.ComboLookUp && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-combolookup>\r\n\r\n        <app-solution-checkbox\r\n            [ngClass]="getStyle(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.BoolCheck && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-checkbox>\r\n\r\n        <app-solution-radio\r\n            [ngClass]="getStyle(currentItem)"\r\n            [label-text-multi]="hasSetMultiClass(currentItem)"\r\n            [changeFields]="fieldCodeOfClearFields"\r\n            (conditionChange)="conditionChange()"\r\n            *ngIf="currentItem.control.getControlType() == controlType.Radio && currentItem.visible"\r\n            [(item)]="selectedFieldConditions[i]">\r\n        </app-solution-radio>\r\n    </ng-container>\r\n</div>\r\n\r\n<div *ngIf="selectSolution && selectSolution.mode === \'2\'">\r\n    <querycondition-advanced\r\n    [fieldConfig]="unformatFieldConfigs" \r\n    [selectSolution]="selectSolution"\r\n    (conditionChange)="conditionChangeAdvanced($event)"></querycondition-advanced>\r\n</div>\r\n<app-queryconfigdialog \r\n    #configDialog \r\n    [inputSelectedFileds]="selectedFieldConditions" \r\n    [filedsDataSource]="fieldConfigs"\r\n    (confirmEmitter)="configDialogConfirm($event)">\r\n</app-queryconfigdialog>',encapsulation:F.ViewEncapsulation.None,providers:[k],styles:[".condition-div{min-height:30px}.f-solution-radio-group .farris-checkradio-hor{flex-wrap:nowrap;overflow-x:auto}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-track{border-radius:0}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.f-solution-radio-group .farris-checkradio-hor .custom-radio{flex-shrink:0}.split-date-range{width:100%;display:-webkit-box;display:flex}"]}]}],ft.ctorParameters=function(){return[{type:k},{type:q},{type:F.ComponentFactoryResolver},{type:F.Injector},{type:t.BsModalService},{type:T.LocaleService}]},ft.propDecorators={selectSolution:[{type:F.Input}],fieldConfigs:[{type:F.Input}],unformatFieldConfigs:[{type:F.Input}],resetFieldConfigs:[{type:F.Input}],isControlInline:[{type:F.Input}],selectedFieldConditions:[{type:F.Input}],showCompleteLabel:[{type:F.Input}],isDisabled:[{type:F.Input}],fieldConditionsChange:[{type:F.Output}],configDialog:[{type:F.ViewChild,args:["configDialog"]}],openAdvanced:[{type:F.Input}],queryConditionWrapEl:[{type:F.ViewChild,args:["queryConditionWrap"]}]},ft);function ft(e,t,n,i,r,o){this.communicationService=e,this.convertorService=t,this.resolver=n,this.injector=i,this.modalService=r,this.localeService=o,this._resetFieldConfigs=[],this.isControlInline=!0,this.showCompleteLabel=!1,this.fieldConditionsChange=new F.EventEmitter,this.openAdvanced=!0,this.localeIds={en:"en","zh-CHS":"zh-CHS"},this.controlType=M,this.showButton=!1,this.fieldCodeOfClearFields=[],this.canClearRelatedFields=!1,this.destroy$=new C.Subject,this.ngZone=null,this.currentLocale=this.injector.get(F.LOCALE_ID),this.solutionService=this.injector.get(ht),this.idService=this.injector.get(x.IdService),this.ngZone||(this.ngZone=this.injector.get(F.NgZone,null))}var yt=(vt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&this.constructMultiFieldNumberRange(this.item.value)},vt.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.canNull=!0,this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.beginPlaceHolder=this.item.beginPlaceHolder?this.item.beginPlaceHolder:this.placeholder,this.endPlaceHolder=this.item.endPlaceHolder?this.item.endPlaceHolder:this.placeholder,this.precision=this.item.control.precision,this.textAlign=this.item.control.textAlign,this.bigNumber=!!this.item.control.bigNumber&&this.item.control.bigNumber,this.bigNumber||(this.min=this.item.control.min===undefined||null===this.item.control.min?-2147483648:this.item.control.min,this.max=this.item.control.max===undefined||null===this.item.control.max?2147483647:this.item.control.max),this.constructMultiFieldNumberRange(this.item.value)},vt.prototype.valueChange=function(e){if("string"==typeof e){var t=e.split("~"),n=t[0]&&0<t[0].length?t[0]:null,i=t[1]&&0<t[1].length?t[1]:null;if(this.bigNumber){var r=new qe;isNaN(parseFloat(n))?r.startValue=null:r.startValue=parseFloat(n),isNaN(parseFloat(i))?r.endValue=null:r.endValue=parseFloat(i),this.item.value=r}else this.item.value=new qe({startValue:n,endValue:i});this.conditionChange.emit()}},vt.prototype.constructMultiFieldNumberRange=function(e){this.beginValue=null==e.startValue?null:e.startValue,this.endValue=null==e.endValue?null:e.endValue},vt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},vt.prototype.beginValueChange=function(e){this.beginValue=e},vt.prototype.endValueChange=function(e){this.endValue=e},vt.decorators=[{type:F.Component,args:[{selector:"app-solution-numberrange",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n  <div class="form-group farris-form-group  common-group number-range-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n    <label class="col-form-label" *ngIf="item" title="{{getConditionItemTitle(item)}}">\r\n      <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n      <span class="farris-label-text">{{item.fieldName}}</span>\r\n    </label>\r\n    <div class="farris-input-wrap">\r\n      <farris-number-range *ngIf="!bigNumber"\r\n        [beginValue]="beginValue"\r\n        [endValue]="endValue"\r\n        [min]="min"\r\n        [max]="max"\r\n        (beginValueChange)="beginValueChange($event)"\r\n        (endValueChange)="endValueChange($event)"\r\n        (valueChange)="valueChange($event)" \r\n        id="{{testId}}"\r\n        [canNull]="canNull"\r\n        [bigNumber]="bigNumber"\r\n        [placeholder]="placeholder"\r\n        [precision]="precision"\r\n        [textAlign]="textAlign"\r\n        [readonly]="item.readonly"\r\n        [beginPlaceHolder]="beginPlaceHolder"\r\n        [endPlaceHolder]="endPlaceHolder">\r\n      </farris-number-range>\r\n      <farris-number-range *ngIf="bigNumber"\r\n        [beginValue]="beginValue"\r\n        [endValue]="endValue"\r\n        (beginValueChange)="beginValueChange($event)"\r\n        (endValueChange)="endValueChange($event)"\r\n        (valueChange)="valueChange($event)" \r\n        id="{{testId}}"\r\n        [canNull]="canNull"\r\n        [bigNumber]="bigNumber"\r\n        [placeholder]="placeholder"\r\n        [precision]="precision"\r\n        [textAlign]="textAlign"\r\n        [readonly]="item.readonly"        \r\n        [beginPlaceHolder]="beginPlaceHolder"\r\n        [endPlaceHolder]="endPlaceHolder">\r\n      </farris-number-range>\r\n    </div>\r\n  </div>\r\n</div>'}]}],vt.ctorParameters=function(){return[{type:ht}]},vt.propDecorators={item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},vt);function vt(e){this.solutionService=e,this.changeFields=[],this.conditionChange=new F.EventEmitter}var Ct=(Object.defineProperty(bt.prototype,"item",{get:function(){return this.constructTextItem(this._inputItem)},set:function(e){this._inputItem=e},enumerable:!0,configurable:!0}),bt.prototype.constructTextItem=function(e){var t=e.value;return t.value=t.value&&t.value,e.value=t,e},bt.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder},bt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},bt.prototype.onBlur=function(){this.hasError||this.conditionChange.emit()},bt.prototype.hasErrorInfo=function(e){return e.invalid&&(e.dirty||e.touched)&&e.errors.maxlength?this.hasError=!0:this.hasError=!1},bt.decorators=[{type:F.Component,args:[{selector:"app-solution-input",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <input-group [(ngModel)]="item.value.value" name="{{item.fieldName}}" id="{{testId}}"\r\n                (blurHandle)="onBlur()" [placeholder]="placeholder" [readonly]="item.readonly" maxlength="maxLength"\r\n                #textControl="ngModel" (clear)="onBlur()">\r\n            </input-group>\r\n            <ng-container *ngIf="maxLength">\r\n                <div class="farris-feedback" [class.f-state-invalid]="hasErrorInfo(textControl)">\r\n                    <span class="f-feedback-message"></span>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>'}]}],bt.ctorParameters=function(){return[{type:ht}]},bt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},bt);function bt(e){this.solutionService=e,this.hideLabel=!1,this.maxLength=undefined,this.hasError=!1,this.conditionChange=new F.EventEmitter}var St=(Object.defineProperty(Tt.prototype,"item",{get:function(){return this.constructInputGroupItem(this._inputItem)},set:function(e){this._inputItem=e},enumerable:!0,configurable:!0}),Tt.prototype.constructInputGroupItem=function(e){var t=e.value;return t.textValue=t.textValue&&t.textValue,e.value=t,e},Tt.prototype.ngOnInit=function(){this.testId=this.solutionService.getGuid(),this.getInputGroupBindingInfo()},Tt.prototype.ngOnDestroy=function(){this.item=null},Tt.prototype.getInputGroupBindingInfo=function(){var e=this.item.control;this.usageMode=e.usageMode,"open-modal"!=this.usageMode&&"open-remote-modal"!=this.usageMode||(this.dialogOptions=e.dialogOptions,this.dialogOptions.mapFields&&(this.textField=JSON.stringify(this.dialogOptions.mapFields).split('"')[1]))},Tt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Tt.prototype.onClick=function(e){var t=this;if("text"==this.usageMode)this.item.control.click();else{var n=this.dialogOptions;n.handle=function(e){e&&t.textField&&(t.item.value.value=e,t.item.value.textValue=t.item.value.getTextValue(t.textField),t.item.value.textField=t.textField,t.item.value.isInputText=!1,t.isTextFromDialog=!0,t.textFormDialog=t.item.value.textValue,t.onBlur())},this.item.control.click({event:e,options:n})}},Tt.prototype.onBlur=function(){"text"==this.usageMode&&(this.item.value.isInputText=!0),"open-modal"!=this.usageMode&&"open-remote-modal"!=this.usageMode||(this.isTextFromDialog||(this.item.value.isInputText=!0),this.item.value.textValue!=this.textFormDialog&&(this.isTextFromDialog=!1,this.item.value.value=[],this.item.value.textField=undefined,this.item.value.isInputText=!0)),this.conditionChange.emit()},Tt.prototype.clearData=function(){this.item.value.clearValue(),this.conditionChange.emit()},Tt.decorators=[{type:F.Component,args:[{selector:"app-solution-inputgroup",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <input-group \r\n                [(ngModel)]="item.value.textValue" \r\n                name="{{item.fieldName}}" \r\n                id="{{testId}}"\r\n                [groupText]="item.control.groupText"\r\n                [editable]="item.control.editable"\r\n                [placeholder]="item.placeHolder"\r\n                [readonly]="item.readonly"\r\n                (clickHandle)="onClick($event)"\r\n                (blurHandle)="onBlur()"\r\n                (clear)="clearData()">\r\n            </input-group>\r\n        </div>\r\n    </div>\r\n</div>'}]}],Tt.ctorParameters=function(){return[{type:ht}]},Tt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},Tt);function Tt(e){this.solutionService=e,this.hideLabel=!1,this.conditionChange=new F.EventEmitter,this.isTextFromDialog=!1}var Ft=(xt.prototype.ngOnInit=function(){var t=this;this.getSmartHelpBindingInfo(),this.testId=this.instanceId,this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.lookup.textChanged.subscribe(function(e){t.textChangedHandler(e)})},xt.prototype.ngOnChanges=function(e){var t=this;this.getSmartHelpBindingInfo(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.textValue=this.item.value.textValue)},xt.prototype.getSmartHelpBindingInfo=function(){var e=this.item.control;this.uri=e.uri,this.textField=e.textField,this.idField=e.idField,this.valueField=e.valueField,this.displayType=e.displayType,this.mapFields=e.mapFields,this.context=e.context,this.preEventCmd=e.preEventCmd,this.postEventCmd=e.postEventCmd,this.enableFullTree=e.enableFullTree,this.loadTreeDataType=e.loadTreeDataType,this.singleSelect=!1!==e.singleSelect,this.expandLevel=e.expandLevel,this.enableCascade=e.enableCascade,this.cascadeStatus=e.cascadeStatus?e.cascadeStatus:"enable",this.dialogTitle=e.dialogTitle?e.dialogTitle:"",this.dialogWidth=e.panelWidth,this.dialogHeight=e.panelHeight;var t=this.item.value;"help-text-value-null"==t.textValue?this.textValue=t.getTextValue(this.textField):this.textValue=t.textValue,this.nosearch=e.nosearch,this.displayFields=e.displayFields?e.displayFields:"",this.displayTextSeparator=e.displayTextSeparator?e.displayTextSeparator:"_",this.editable=e.editable,this.clearFields=e.clearFields,e.hasOwnProperty("pageSize")&&e.pageSize&&(this.pageSize=e.pageSize),e.hasOwnProperty("pageList")&&e.pageList&&(this.pageList=e.pageList.split(",").map(function(e){return parseInt(e)})),e.hasOwnProperty("quickSelect")&&e.quickSelect&&(this.quickSelect=e.quickSelect),e.hasOwnProperty("enableMultiFieldSearch")&&e.enableMultiFieldSearch&&(this.enableMultiFieldSearch=e.enableMultiFieldSearch)},xt.prototype.clearData=function(e){this.item.value.clearValue(),this.item.control.clear&&this.item.control.clear(),this.conditionChange.emit()},xt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},xt.prototype.textChangedHandler=function(e){if(this.item&&this.item.value){var t=this.item.value;t.value=[e],t.textValue=e,t.isInputText=!0,this.conditionChange.emit()}},xt.prototype.selectedDataHandler=function(e){var t=this.item.value;t.value=this.singleSelect?[e]:e,t.valueField=this.valueField,t.textValue=this.textValue,t.isInputText=!1,this.conditionChange.emit()},xt.decorators=[{type:F.Component,args:[{selector:"app-solution-smarthelp",template:'<div class="farris-group-wrap" id="{{item.id}}" >\r\n    <div class="form-group farris-form-group common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" title="{{getConditionItemTitle(item)}}" *ngIf="item && !hideLabel">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-lookup-grid #lookup\r\n                id="{{testId}}"                \r\n                [clear-fields]="clearFields"\r\n                [uri]="uri"\r\n                [placeholder]="placeholder"\r\n                [(ngModel)]="textValue"\r\n                [textField]="textField"\r\n                [valueField]="valueField"\r\n                [idField]="idField"\r\n                [mapFields]="mapFields"\r\n                [displayType]="displayType"\r\n                [title]="dialogTitle"\r\n                [dialogWidth]="dialogWidth"\r\n                [dialogHeight]="dialogHeight"\r\n                [context]="context"\r\n                [dictPicking]="preEventCmd"\r\n                [dictPicked]="postEventCmd"\r\n                [enableFullTree]="enableFullTree"\r\n                [loadTreeDataType]="loadTreeDataType"\r\n                [singleSelect]="singleSelect"\r\n                [expandLevel]="expandLevel"\r\n                [enableCascade]="enableCascade"\r\n                [cascadeStatus]="cascadeStatus"\r\n                [readonly]="item.readonly"\r\n                [nosearch]="nosearch"\r\n                [beforeOpen]="onBeforeOpen"\r\n                [displayFields]="displayFields"\r\n                [displayTextSeparator]="displayTextSeparator"\r\n                [editable]="editable"\r\n                [pageSize]="pageSize"\r\n                [pageList]="pageList"\r\n                [useFavorite]="true"\r\n                [quickSelect]="quickSelect"\r\n                [enableMultiFieldSearch]="enableMultiFieldSearch"\r\n                (selectedData)="selectedDataHandler($event)"\r\n                (clear)="clearData($event)"\r\n            >\r\n        </farris-lookup-grid>\r\n        \x3c!-- [singleSelect]="true" --\x3e\r\n        </div>\r\n\r\n    </div>\r\n</div>'}]}],xt.ctorParameters=function(){return[{type:ht}]},xt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],instanceId:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}],mappingEmitter:[{type:F.Output,args:["helpMapping"]}],clearFieldsChange:[{type:F.Output,args:["clearFieldsChange"]}],lookup:[{type:F.ViewChild,args:["lookup"]}]},xt);function xt(e){var n=this;this.solutionService=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.mappingEmitter=new F.EventEmitter,this.clearFieldsChange=new F.EventEmitter,this.pageSize=20,this.pageList=[10,20,30,50,100],this.enableMultiFieldSearch=!1,this.onBeforeOpen=function(){var e=n.item.value;if(e&&e.value){var t=e.value.map(function(e){return e[n.idField||"id"]}).join(",");n.lookup.displayValue=t}return n.clearFieldsChange.emit({controlType:n.item.control.getControlType(),canClearRelatedFields:!0}),C.of(!0)}}var wt=(It.prototype.ngOnInit=function(){var t=this;this.getDataSource();var e=this.item.value;e.key&&(this.selectedItemId=e.key),this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.beforeShow=this.item.control.beforeShow,this.beforeHide=this.item.control.beforeHide,this.idField=this.item.control.idField?this.item.control.idField:"value",this.textField=this.item.control.textField?this.item.control.textField:"name",this.uri&&(this.selectedItemId=(e.value||[]).map(function(e){return e[t.textField]}).join(","),this.editable=!0)},It.prototype.ngOnChanges=function(e){var t=this;this.getDataSource(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.selectedItemId=this.item.value.key)},It.prototype.getDataSource=function(){this.dropDownListDataSource=this.item.control.enumValues,this.uri=this.item.control.uri},It.prototype.selectChange=function(e){var t=this,n=e.selections.map(function(e){return{value:t.uri?e[t.textField]:e[t.idField],name:e[t.textField]}});this.item.value=new Qe({value:n,key:e.value}),this.conditionChange.emit()},It.prototype.onClear=function(e){this.item.value=new Qe},It.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},It.decorators=[{type:F.Component,args:[{selector:"app-solution-dropdownlist",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n    <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n      <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n      <span class="farris-label-text">{{item.fieldName}}</span>\r\n    </label>\r\n    <div class="farris-input-wrap">\r\n    <farris-combo-list \r\n        [(ngModel)]="selectedItemId"\r\n        [idField]="idField"\r\n        [valueField]="idField"\r\n        [textField]="textField"\r\n        [editable]="editable"\r\n        [data]="dropDownListDataSource"\r\n        [uri]="uri"\r\n        [beforeShow]="beforeShow"\r\n        [beforeHide]="beforeHide"\r\n        [multiSelect]="item.control.multiSelect"\r\n        [placeholder]="placeholder"\r\n        [panelHeight]="item.control.panelHeight ? item.control.panelHeight : \'auto\'"\r\n        (valueChange)="selectChange($event)"\r\n        (clear)="onClear($event)" \r\n        id="{{testId}}"\r\n        [readonly]="item.readonly">\r\n      </farris-combo-list>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}]}],It.ctorParameters=function(){return[{type:ht}]},It.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},It);function It(e){this.solutionService=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.dropDownListDataSource=new Array,this.selectedItemId="",this.editable=!1}var Vt=(Dt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.number=this.item.value.getOriginalValue())},Dt.prototype.ngOnInit=function(){this.number=this.item.value.getOriginalValue(),this.testId=this.solutionService.getGuid(),this.canNull=!0,this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.precision=this.item.control.precision,this.textAlign=this.item.control.textAlign,this.bigNumber=!!this.item.control.bigNumber&&this.item.control.bigNumber,this.bigNumber||(this.min=this.item.control.min===undefined||null===this.item.control.min?-2147483648:this.item.control.min,this.max=this.item.control.max===undefined||null===this.item.control.max?2147483647:this.item.control.max)},Dt.prototype.valueChange=function(e){var t=new Ge;isNaN(parseFloat(e))?t.numValue=null:t.numValue=e,this.item.value=t,this.conditionChange.emit()},Dt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Dt.decorators=[{type:F.Component,args:[{selector:"app-solution-single-number",template:'<div class="farris-group-wrap" id="{{item.id}}" >\r\n    <div class="form-group farris-form-group  common-group" [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-number-spinner *ngIf="!bigNumber"\r\n                [(ngModel)]="number"\r\n                (valueChange)="valueChange($event)"\r\n                id="{{testId}}"\r\n                [min]="min"\r\n                [max]="max"\r\n                [canNull]="canNull"\r\n                [bigNumber]="bigNumber"\r\n                [placeholder]="placeholder"\r\n                [precision]="precision"\r\n                [textAlign]="textAlign"\r\n                [readonly]="item.readonly">\r\n            </farris-number-spinner>\r\n            <farris-number-spinner *ngIf="bigNumber"\r\n                [(ngModel)]="number"\r\n                (valueChange)="valueChange($event)"\r\n                id="{{testId}}"\r\n                [canNull]="canNull"\r\n                [bigNumber]="bigNumber"\r\n                [placeholder]="placeholder"\r\n                [precision]="precision"\r\n                [textAlign]="textAlign"\r\n                [readonly]="item.readonly">\r\n            </farris-number-spinner>\r\n        </div>\r\n    </div>\r\n</div>'}]}],Dt.ctorParameters=function(){return[{type:ht}]},Dt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},Dt);function Dt(e){this.solutionService=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter}var kt=(Ot.prototype.ngOnChanges=function(e){e.filedsDataSource&&e.filedsDataSource.currentValue&&(this.visibleFields=this.filedsDataSource.filter(function(e){return!!e.visible})),e.inputSelectedFileds&&e.inputSelectedFileds.currentValue&&(this.visibleSelectedFields=this.inputSelectedFileds.filter(function(e){return!!e.visible}),this.visibleSelectedFields.length&&(this.selectedIds=this.visibleSelectedFields.map(function(e){return e.id})))},Ot.prototype.ngOnInit=function(){this.title=this.localeService.getValue("queryCondition.container.config"),this.filedsDataSource&&(this.visibleFields=this.filedsDataSource.filter(function(e){return!!e.visible}))},Ot.prototype.ngAfterViewInit=function(){this.multiSelectCmp.enableMoveMore!==undefined&&(this.multiSelectCmp.enableMoveMore=!0)},Ot.prototype.cancel=function(){this.selectedIds=this.visibleSelectedFields.map(function(e){return e.id}),this.selectedIds.length||this.multiSelectCmp.moveAllToLeft(),this.cancelEmitter.emit(!0),this.multiSelectCmp.searchValue="",this.dialog.close()},Ot.prototype.confirm=function(){var n=this,e=this.visibleFields.filter(function(e){return e.control&&e.control.isRequired()}).filter(function(e){return!n.selectedIds.includes(e.id)});if(e&&e.length){var t=e.map(function(e){return e.fieldName}).join("")+"";this.notify.error(t)}else{var i,r=[];this.selectedIds.forEach(function(t){var e=n.visibleSelectedFields.findIndex(function(e){return e.id==t});-1<e?r.push(n.visibleSelectedFields[e].fieldCode):((i=n.visibleFields.find(function(e){return e.id==t})).value.clearValue(),r.push(i.fieldCode))}),this.confirmEmitter.emit(r),this.multiSelectCmp.searchValue="",this.dialog.close()}},Ot.prototype.reset=function(){},Ot.decorators=[{type:F.Component,args:[{selector:"app-queryconfigdialog",template:'<farris-dialog #dialog [buttons]="configDialogButtonRef" [width]="699" [height]="544" [title]="title">\r\n    <multi-select #searchMulti \r\n    [dataSource]="visibleFields"\r\n     [idField]="\'id\'" \r\n     [textField]="\'fieldName\'" \r\n     [displayType]="\'List\'" \r\n     [(selectedId)]="selectedIds" \r\n     [showCheckbox]="true">\r\n        <ng-template farrisTemplate="text" let-data>\r\n            {{ data[\'fieldName\'] }}\r\n        </ng-template>\r\n    </multi-select>\r\n</farris-dialog>\r\n<ng-template #configDialogButtonRef>\r\n    <button class="btn btn-primary" (click)="confirm()">{{\'queryCondition.configDialog.confirm\' | locale}}</button>\r\n    <button class="btn btn-secondary" (click)="cancel()">{{\'queryCondition.configDialog.cancel\' | locale}}</button>\r\n</ng-template>',encapsulation:F.ViewEncapsulation.None,styles:[""]}]}],Ot.ctorParameters=function(){return[{type:ht},{type:T.LocaleService},{type:b.NotifyService}]},Ot.propDecorators={inputSelectedFileds:[{type:F.Input}],filedsDataSource:[{type:F.Input}],cancelEmitter:[{type:F.Output}],confirmEmitter:[{type:F.Output}],dialog:[{type:F.ViewChild,args:["dialog"]}],multiSelectCmp:[{type:F.ViewChild,args:["searchMulti"]}]},Ot);function Ot(e,t,n){this.solutionService=e,this.localeService=t,this.notify=n,this.inputSelectedFileds=[],this.cancelEmitter=new F.EventEmitter,this.confirmEmitter=new F.EventEmitter,this.selectedIds=[]}var qt=(Object.defineProperty(Lt.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),Lt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.checkValue=this.item.value.getOriginalValue())},Lt.prototype.ngOnInit=function(){this.checkValue=this.item.value.getOriginalValue(),this.controlData=this.item.control,this.testId=this.solutionService.getGuid()},Lt.prototype.valueChanged=function(e){e.length?this._item.value.setOriginalValue(e):this._item.value.setOriginalValue([!1]),this.conditionChange.emit()},Lt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Lt.decorators=[{type:F.Component,args:[{selector:"app-solution-checkbox",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group qcheckbox-group" style="overflow: auto;white-space: nowrap">\r\n        <label class="col-form-label mr-0" style="width:auto;" *ngIf="item && !hideLabel">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n        </label>\r\n        \x3c!-- <div class="farris-input-wrap">\r\n            <div class="custom-control custom-checkbox">\r\n                <input class="custom-control-input" type="checkbox" id="item.fieldCode" (change)="valueChange($event.target.checked)" [(ngModel)]="item.value[\'value\']"/>\r\n                <label class="custom-control-label" for="item.fieldCode">{{item.fieldName}}</label>\r\n            </div>\r\n          <div class="farris-feedback valid-feedback"></div>\r\n        </div> --\x3e\r\n        <farris-checkboxgroup\r\n            [isStringValue]="controlData.isStringValue" \r\n            [data]="controlData.data" \r\n            [horizontal]="controlData.horizontal" \r\n            [disable]="item.readonly" \r\n            [(ngModel)]="checkValue"\r\n            (changeValue)="valueChanged($event)"\r\n            id="{{testId}}"\r\n        ></farris-checkboxgroup>\r\n    </div>\r\n</div>'}]}],Lt.ctorParameters=function(){return[{type:F.Injector}]},Lt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},Lt);function Lt(e){this.injector=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.solutionService=this.injector.get(ht)}var Mt=(Object.defineProperty(Et.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),Et.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.radioValue=this.item.value.getOriginalValue())},Et.prototype.ngOnInit=function(){this.radioControl=this.item.control,this.radioValue=this.item.value.getOriginalValue(),this.testId=this.solutionService.getGuid(),this.showLabel=this.radioControl.showLabel},Et.prototype.valueChanged=function(e){this._item.value.setOriginalValue(e),this.conditionChange.emit()},Et.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Et.decorators=[{type:F.Component,args:[{selector:"app-solution-radio",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group qradio-group"  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text" *ngIf="showLabel">{{item.fieldName}}</span>\r\n        </label>\r\n        <farris-radiogroup\r\n            class="f-solution-radio-group"\r\n            [(ngModel)]="radioValue"\r\n            [data]="radioControl.enumValues"\r\n            [horizontal]="radioControl.horizontal"\r\n            [disabled]="item.readonly"\r\n            (changeValue)="valueChanged($event)"\r\n            id="{{testId}}"\r\n        ></farris-radiogroup>\r\n    </div>\r\n</div>'}]}],Et.ctorParameters=function(){return[{type:F.Injector}]},Et.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}],cls:[{type:F.HostBinding,args:["class.f-solution-radio-group-wrapper"]}]},Et);function Et(e){this.injector=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.cls=!0,this.solutionService=this.injector.get(ht)}var Nt=(Rt.prototype.ngOnChanges=function(e){var t=this;e.changeFields&&e.changeFields.currentValue&&!e.changeFields.firstChange&&e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.dateRange&&(this.beginValue=this.item.value&&this.item.value.startTime?this.item.value.startTime.toString().trim():"",this.endValue=this.item.value&&this.item.value.endTime?this.item.value.endTime.toString().trim():""),this.bindValue=this.item.value.getOriginalValue())},Rt.prototype.ngOnInit=function(){var n=this;switch(this.testId=this.solutionService.getGuid(),this.controlType){case M.DateRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateRange=!0;break;case M.SingleDate:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateRange=!1,this.enableDynamic=!!this.item.control.isDynamicDate&&this.item.control.isDynamicDate;break;case M.SingleYear:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy",this.showType=m.ShowType.noDateAndMonth,this.dateRange=!1;break;case M.DateTimeRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd HH:mm:ss",this.item.control.enableCustomFormat?this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd HH:mm:ss":(this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateFormat=this.dateFormat+" HH:mm:ss"),this.showTime=!0,this.dateRange=!0;break;case M.SingleMonth:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM",this.showType=m.ShowType.noDate,this.dateRange=!1;break;case M.MonthRange:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM",this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM",this.showType=m.ShowType.noDate,this.dateRange=!0;break;case M.SingleDateTime:this.returnFormat=this.item.control.returnFormat?this.item.control.returnFormat:"yyyy-MM-dd HH:mm:ss",this.item.control.enableCustomFormat?this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd HH:mm:ss":(this.dateFormat=this.item.control.format?this.item.control.format:"yyyy-MM-dd",this.dateFormat=this.dateFormat+" HH:mm:ss"),this.showTime=!0,this.dateRange=!1}this.enableSplit=this.item.control.enableSplit||!1,this.updateParamsByCondition(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.dateRange&&(this.beginValue=this.item.value&&this.item.value.startTime?this.item.value.startTime.toString().trim():"",this.endValue=this.item.value&&this.item.value.endTime?this.item.value.endTime.toString().trim():"",this.beginPlaceHolder=this.item.beginPlaceHolder?this.item.beginPlaceHolder:this.placeholder,this.endPlaceHolder=this.item.endPlaceHolder?this.item.endPlaceHolder:this.placeholder),this.bindValue=this.item.value.getOriginalValue(),this.item.control.weekSelect&&this.controlType==M.DateRange&&(this.showType=m.ShowType.selectWeek),this.dateChangedCmd=this.item.control.dateChangedCmd,this.dateChangedCmd||(this.dateChangedCmd=function(){return C.of({closeDateSelect:!0})}),this.solutionService.getControlConfigState().pipe(g.takeUntil(this.destroy$)).subscribe(function(e){var t=e.find(function(e){return e.fieldCode==n.item.fieldCode});t&&n.updateParamsByCondition(t)})},Rt.prototype.ngOnDestroy=function(){this.dateChangedCmdSubscription&&this.dateChangedCmdSubscription.unsubscribe()},Rt.prototype.updateParamsByCondition=function(e){void 0===e&&(e=null);var t=null;switch(t=e?e.control:this.item.control,this.controlType){case M.SingleYear:this.maxDate=t.hasOwnProperty("maxDate")?t.maxDate:this.maxDate,this.minDate=t.hasOwnProperty("minDate")?t.minDate:this.minDate}},Rt.prototype.onDateChange=function(e){e.returnFormatted!==this.item.value.getOriginalValue()&&(this.item.value.setOriginalValue({formatted:e.returnFormatted,delimiter:this.dateRangeDatesDelimiter}),this.runDateChangedEvent(this.item.value.getOriginalValue()))},Rt.prototype.onSpiltDateChange=function(e,t){var n=this.item.value.getOriginalValue(),i="",r="",o="";if(n){var a=n.split(this.dateRangeDatesDelimiter);a[0]&&(i=a[0]),a[1]&&(r=a[1])}o="start"===t?e.returnFormatted+this.dateRangeDatesDelimiter+r:i+this.dateRangeDatesDelimiter+e.returnFormatted,e.returnFormatted!==this.item.value.getOriginalValue()&&(this.item.value.setOriginalValue({formatted:o,delimiter:this.dateRangeDatesDelimiter}),this.runDateChangedEvent(this.item.value.getOriginalValue()))},Rt.prototype.onDynamicValueChange=function(e){this.item.value.setOriginalValue({formatted:e}),this.runDateChangedEvent(this.item.value.getOriginalValue())},Rt.prototype.onDynamicViewChanged=function(e){this.item.value.setOriginalValue(e.showDynamicView?{formatted:e.dynamicValue}:{formatted:e.singleValue,delimiter:this.dateRangeDatesDelimiter}),this.runDateChangedEvent(this.item.value.getOriginalValue())},Rt.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Rt.prototype.beginValueChange=function(e){},Rt.prototype.endValueChange=function(e){},Rt.prototype.runDateChangedEvent=function(e){var t=this;this.dateChangedCmd?this.dateChangedCmdSubscription=this.dateChangedCmd(e).subscribe(function(e){"boolean"==typeof e?e&&t.conditionChange.emit():"object"!=typeof e||e.closeDateSelect===undefined||e.closeDateSelect?t.conditionChange.emit():e.message?t.messageService.warning(e.message):t.conditionChange.emit()}):this.conditionChange.emit()},Rt.decorators=[{type:F.Component,args:[{selector:"app-solution-datepicker",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group  common-group"  [ngClass]="{\'q-state-readonly\':item.readonly,\'datepicker-range-group\':dateRange}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-datepicker *ngIf="!dateRange"\r\n                [(ngModel)]="bindValue"\r\n                [dateRange]="dateRange"\r\n                [placeholder]="placeholder"\r\n                [returnFormat]="returnFormat"\r\n                [dateFormat]="dateFormat"\r\n                [editable]="editable"\r\n                [showType]="showType"\r\n                [showTime]="showTime"\r\n                [readonly]="item.readonly"\r\n                (valueChange)="onDateChange($event)"\r\n                [maxDate]="maxDate"\r\n                [minDate]="minDate"\r\n                [enableDynamic]="enableDynamic"\r\n                (dynamicValueChange)="onDynamicValueChange($event)"\r\n                (dynamicViewChanged)="onDynamicViewChanged($event)"\r\n                id="{{testId}}"\r\n            >\r\n            </farris-datepicker>\r\n            <farris-datepicker *ngIf="dateRange && !enableSplit"\r\n                [dateRange]="dateRange"\r\n                [placeholder]="placeholder"      \r\n                [beginPlaceholder]="beginPlaceHolder"\r\n                [endPlaceholder]="endPlaceHolder"\r\n                [returnFormat]="returnFormat"\r\n                [dateFormat]="dateFormat"\r\n                [editable]="editable"\r\n                [showType]="showType"\r\n                [showTime]="showTime"\r\n                [readonly]="item.readonly"\r\n                [(ngModel)]="bindValue"\r\n                (valueChange)="onDateChange($event)"\r\n                id="{{testId}}"\r\n            >\r\n            </farris-datepicker>\r\n            <div *ngIf="dateRange && enableSplit" class="split-date-range">\r\n                <farris-datepicker\r\n                    [(ngModel)]="beginValue"\r\n                    [dateRange]="false"\r\n                    [placeholder]="beginPlaceHolder"\r\n                    [returnFormat]="returnFormat"\r\n                    [dateFormat]="dateFormat"\r\n                    [editable]="editable"\r\n                    [showType]="showType"\r\n                    [showTime]="showTime"\r\n                    [readonly]="item.readonly"\r\n                    (valueChange)="onSpiltDateChange($event, \'start\')"\r\n                    [maxDate]="maxDate"\r\n                    [minDate]="minDate"\r\n                    id="{{testId}}"\r\n                >\r\n                </farris-datepicker>\r\n                <span>~</span>\r\n                <farris-datepicker\r\n                    [(ngModel)]="endValue"\r\n                    [dateRange]="false"\r\n                    [placeholder]="endPlaceHolder"\r\n                    [returnFormat]="returnFormat"\r\n                    [dateFormat]="dateFormat"\r\n                    [editable]="editable"\r\n                    [showType]="showType"\r\n                    [showTime]="showTime"\r\n                    [readonly]="item.readonly"\r\n                    (valueChange)="onSpiltDateChange($event, \'end\')"\r\n                    [maxDate]="maxDate"\r\n                    [minDate]="minDate"\r\n                    id="{{testId + \'more\'}}"\r\n                >\r\n                </farris-datepicker>\r\n        \r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}]}],Rt.ctorParameters=function(){return[{type:F.Injector}]},Rt.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],controlType:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},Rt);function Rt(e){this.injector=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.showType=m.ShowType.all,this.maxDate="",this.minDate="",this.editable=!1,this.dateRangeDatesDelimiter="~",this.enableDynamic=!1,this.enableSplit=!1,this.solutionService=this.injector.get(ht),this.messageService=this.injector.get(S.MessagerService);var t=this.injector.get(gt,null);this.destroy$=t?t.destroy$:new C.Subject}var jt=(Ht.prototype.ngOnInit=function(){this.getComboLookUpBindingInfo(),this.testId=this.solutionService.getGuid(),this.placeholder=this.item.placeHolder?this.item.placeHolder:this.item.control.placeholder,this.autoWidth=!1},Ht.prototype.ngOnChanges=function(e){var t=this;this.getComboLookUpBindingInfo(),!e.changeFields||!e.changeFields.currentValue||e.changeFields.firstChange||e.changeFields.currentValue.some(function(e){return e==t.item.fieldCode})&&(this.textValue=this.item.value.textValue)},Ht.prototype.valueChangeHandler=function(e){var t=this.item.value;t.value=e.selections,t.valueField=this.valueField,t.textValue=t.getTextValue(this.textField),this.textValue=t.textValue,this.conditionChange.emit()},Ht.prototype.getComboLookUpBindingInfo=function(){var t=this,e=this.item.control;this.uri=e.uri,this.idField=e.idField,this.valueField=e.valueField,this.textField=e.textField,this.mapFields=e.mapFields,this.displayType=e.displayType,this.preEventCmd=e.preEventCmd,this.postEventCmd=e.postEventCmd,this.enableFullTree=e.enableFullTree,this.multiSelect=!0!==e.singleSelect,this.panelWidth=e.panelWidth?e.panelWidth:300,this.panelHeight=e.panelHeight?e.panelHeight:300,this.loadTreeDataType=e.loadTreeDataType,this.context=e.context;var n=this.item.value;"help-text-value-null"==n.textValue?this.textValue=n.getTextValue(this.textField):this.textValue=n.textValue,n&&n.value&&(this.selectedValues=(n.value||[]).map(function(e){return e[t.idField]}).join(","))},Ht.prototype.clearData=function(e){this.item.value.clearValue(),this.conditionChange.emit()},Ht.prototype.getConditionItemTitle=function(e){return this.solutionService.getConditionItemTitle(e)},Ht.decorators=[{type:F.Component,args:[{selector:"app-solution-combolookup",template:'<div class="farris-group-wrap" id="{{item.id}}">\r\n    <div class="form-group farris-form-group common-group "  [ngClass]="{\'q-state-readonly\':item.readonly}">\r\n        <label class="col-form-label" *ngIf="item && !hideLabel" title="{{getConditionItemTitle(item)}}">\r\n            <span class="farris-label-info text-danger" *ngIf="item.control.isRequired()">*</span>\r\n            <span class="farris-label-text">{{item.fieldName}}</span>\r\n        </label>\r\n        <div class="farris-input-wrap">\r\n            <farris-combo-lookup *ngIf="item"\r\n                [uri]="uri"\r\n                [placeholder]="placeholder"\r\n                [(ngModel)]="textValue"\r\n                [idField]="idField"\r\n                [valueField]="valueField"\r\n                [textField]="textField"\r\n                [mapFields]="mapFields"\r\n                [displayType]="displayType"\r\n                [multiSelect]="multiSelect"\r\n                [enableFullTree]="enableFullTree"\r\n                [selectedValues]="selectedValues"\r\n                [beforeShow]="preEventCmd"\r\n                [beforeHide]="postEventCmd"\r\n                (valueChange)="valueChangeHandler($event)"\r\n                (clear)="clearData($event)"\r\n                [autoWidth]="autoWidth"\r\n                [panelWidth]="panelWidth"\r\n                [panelHeight]="panelHeight"\r\n                [readonly]="item.readonly"\r\n                [loadTreeDataType]="loadTreeDataType"\r\n                [context]="context"\r\n                id="{{testId}}"\r\n            >\r\n        </farris-combo-lookup>\r\n        </div>\r\n    </div>\r\n</div>'}]}],Ht.ctorParameters=function(){return[{type:ht}]},Ht.propDecorators={hideLabel:[{type:F.Input}],item:[{type:F.Input}],changeFields:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}]},Ht);function Ht(e){this.solutionService=e,this.hideLabel=!1,this.changeFields=[],this.conditionChange=new F.EventEmitter,this.selectedValues=""}var Pt=(_t.prototype.ngOnInit=function(){var n=this;this.qcc&&this.clearFields&&this.ngCtrl&&this.ngCtrl.valueChanges.subscribe(function(e){n.qcc.canClearRelatedFields&&(n.qcc.fieldCodeOfClearFields=[],n.clearFields.split(",").forEach(function(t){var e=n.qcc.selectedFieldConditions.filter(function(e){return!!e.visible}).find(function(e){return e.fieldCode===t});e&&(n.qcc.fieldCodeOfClearFields.push(t),e.value.clearValue())}))})},_t.decorators=[{type:F.Directive,args:[{selector:"[clear-fields]"}]}],_t.ctorParameters=function(){return[{type:y.NgControl,decorators:[{type:F.Optional},{type:F.Self}]},{type:gt,decorators:[{type:F.Optional}]},{type:F.Injector}]},_t.propDecorators={clearFields:[{type:F.Input,args:["clear-fields"]}]},_t);function _t(e,t,n){this.ngCtrl=e,this.qcc=t,this.inject=n,this.clearFields=""}var Gt=(Object.defineProperty(At.prototype,"enableMulti",{get:function(){return this._enableMulti},set:function(e){this._enableMulti=e,this.judgeMulti()},enumerable:!0,configurable:!0}),At.prototype.ngOnInit=function(){},At.prototype.judgeMulti=function(){var t=this;this._enableMulti&&this.ngZone.runOutsideAngular(function(){setTimeout(function(){var e=t.el.nativeElement.querySelector(".farris-label-text");e&&(e.clientWidth<e.scrollWidth?t.el.nativeElement.className=t.el.nativeElement.className+" "+t.multiCls:t.el.nativeElement.className=t.el.nativeElement.className.replace(t.multiCls,""))},20)})},At.decorators=[{type:F.Directive,args:[{selector:"[label-text-multi]"}]}],At.ctorParameters=function(){return[{type:F.ElementRef},{type:F.Injector}]},At.propDecorators={enableMulti:[{type:F.Input,args:["label-text-multi"]}]},At);function At(e,t){this.el=e,this.injector=t,this.multiCls="farris-group-multi-label",this._enableMulti=!1,this.ngZone=null,this.ngZone||(this.ngZone=this.injector.get(F.NgZone,null))}var $t=(Bt.prototype.reset=function(){this.queryconditionData={relation:1,items:[],children:[],path:[1],groupid:1},this.queryconditionData$.next(this.queryconditionData),this.updateQueryConditionListData()},Bt.prototype.changeQueryconditionData=function(e,t,n){void 0===n&&(n=!0);var i=e.item,r=e.path,o=e.addPositionItem,a=e.deleteItems,l=this.queryconditionData;switch(r.forEach(function(t){1!==t&&(l=l.children.find(function(e){return e.groupid===t}))}),t){case"add":if(i.conditionid=this.getMaxConditionid()+1,i.compareType=0,o){var s=l.items.findIndex(function(e){return e.conditionid===o.conditionid});-1<s?l.items.splice(s,0,i):l.items.push(i)}else l.items.push(i);this.clearCheckedList();break;case"delete-item":a&&a.forEach(function(t){var e=l.items.findIndex(function(e){return e.conditionid===t.conditionid});l.items.splice(e,1)}),this.clearCheckedList(),this.treeshake(this.queryconditionData);break;case"delete-items":a&&a.forEach(function(t){var e=l.items.findIndex(function(e){return e.conditionid===t.conditionid});l.items.splice(e,1)}),this.clearCheckedList();break;case"modify":var d=l.items.findIndex(function(e){return e.conditionid===i.conditionid});l.items[d]=i}n&&(this.queryconditionData$.next(this.queryconditionData),this.updateQueryConditionListData())},Bt.prototype.changeGroupData=function(e,t){e.item;var n=e.path,i=e.relation,r=this.queryconditionData;switch(n.forEach(function(t){1!==t&&(r=r.children.find(function(e){return e.groupid===t}))}),t){case"modify-relation":r.relation=i}this.queryconditionData$.next(this.queryconditionData),this.updateQueryConditionListData()},Bt.prototype.addGroup=function(){var i=this,t=Object.keys(this.checkedList).filter(function(e){return i.checkedList[e].length});if(t.length)if(1===t.length){var e=t[0].split("-").map(function(e){return Number(e)}),n=this.queryconditionData;e.forEach(function(t){1!==t&&(n=n.children.find(function(e){return e.groupid===t}))});var r=this.getFlatConditions(n).filter(function(e){return i.checkedList[t[0]].includes(e.conditionid)});if(!n.children.length&&r.length===n.items.length)return void this.notifySer.warning(this.localeService.getValue("advancedMode.info.existGroupInfo"));this.generateGroup(n,r,[])}else{for(var o=1,a=[1],l=t.map(function(e){return e.split("-").map(function(e){return Number(e)})}),s=l.map(function(e){return e.length}).sort(function(e,t){return e-t})[0],d=function(t){var n=l[0][t];return n&&l.filter(function(e){return e[t]===n}).length===l.length?(o=n,void a.push(n)):"break"},u=1;u<s&&"break"!==d(u);u++);var c=this.getFlatChildren(this.queryconditionData),p=c.find(function(e){return e.groupid===o});if(this.getFlatConditions(p).length===t.map(function(e){return i.checkedList[e].length}).reduce(function(e,t){return e+t}))return void this.notifySer.warning(this.localeService.getValue("advancedMode.info.existGroupInfo"));var h=!0,m=[];l.forEach(function(e){var t=e[a.length];t&&!m.includes(t)&&m.push(t)});var g=0;m.forEach(function(t){var e=c.find(function(e){return e.groupid===t});if(e){var n=i.getFlatConditions(e).length;g+=n}});var f=0;if(t.filter(function(e){return e!==a.join("-")}).forEach(function(e){return f+=i.checkedList[e].length}),g!==f&&(this.notifySer.error(this.localeService.getValue("advancedMode.info.checkedGroupInfo")),h=!1),h){var y=this.checkedList[a.join("-")]||[],v=c.find(function(e){return e.path.join("-")===a.join("-")}),C=(r=v.items.filter(function(e){return y.includes(e.conditionid)}),l.map(function(e){return e[a.length]}).filter(function(e){return e})),b=v.children.filter(function(e){return C.includes(e.groupid)});this.generateGroup(v,r,b)}}else this.notifySer.warning(this.localeService.getValue("advancedMode.info.noConditionInfo"));this.queryconditionData$.next(this.queryconditionData),this.updateQueryConditionListData(),this.clearCheckedList()},Bt.prototype.deleteGroup=function(t,e,n,i){var r,o;if(void 0===n&&(n=!0),void 0===i&&(i=!1),1===t)this.notifySer.info(this.localeService.getValue("advancedMode.info.deleteGroupInfo"));else{var a=this.queryconditionData,l=null;e.forEach(function(t){1!==t&&(a=(l=a).children.find(function(e){return e.groupid===t}))}),l.children=l.children.filter(function(e){return e.groupid!==t}),1!==l.groupid||!i||l.items.length||l.children.length||(l.relation=a.relation),(r=l.children).push.apply(r,D(a.children)),(o=l.items).push.apply(o,D(a.items)),this.getFlatChildren(l).forEach(function(e){return e.path=e.path.filter(function(e){return e!==t})}),n&&(this.queryconditionData$.next(this.queryconditionData),this.updateQueryConditionListData(),this.clearCheckedList())}},Bt.prototype.generateGroup=function(n,e,t){var i=this.getMaxGroupid()+1;this.changeQueryconditionData({deleteItems:e,path:n.path},"delete-items",!1);var r=this.getFlatChildren(n),o=n.path.findIndex(function(e){return e===n.groupid});t.forEach(function(t){n.children=n.children.filter(function(e){return e.groupid!==t.groupid}),r.forEach(function(e){e.path.includes(t.groupid)&&e.path.splice(o+1,0,i)})});var a={groupid:i,relation:1,items:e,children:t,path:n.path.concat(i)};n.children.push(a)},Bt.prototype.setQueryconditionData=function(e){this.queryconditionData=e,this.queryconditionData$.next(e)},Bt.prototype.getQueryconditionData=function(){return this.queryconditionData},Bt.prototype.changeFieldConfig=function(e){this.fieldConfig=e,this.fieldConfig$.next(e)},Bt.prototype.getFieldConfig=function(){return this.fieldConfig},Bt.prototype.changeCheckedList=function(e,t){var n=e.join("-");if(this.checkedList[n]){var i=this.checkedList[n].indexOf(t);i<0?this.checkedList[n].push(t):(this.checkedList[n].splice(i,1),this.checkedList[n].length||delete this.checkedList[n])}else this.checkedList[n]=[t];this.checkedList$.next(this.checkedList)},Bt.prototype.clearCheckedList=function(){this.checkedList={},this.checkedList$.next(this.checkedList)},Bt.prototype.getFlatConditions=function(e){var t=this;return e.children?[].concat.apply([],D([e.items],e.children.map(function(e){return t.getFlatConditions(e)}))):[].concat(e.items)},Bt.prototype.getFlatChildren=function(e){var t=this;return e.children?[].concat.apply([],D([e],e.children.map(function(e){return t.getFlatChildren(e)}))):[].concat(e)},Bt.prototype.getMaxConditionid=function(){var e=0,t=this.getFlatConditions(this.queryconditionData).sort(function(e,t){return t.conditionid-e.conditionid});return t.length&&(e=t[0].conditionid),e},Bt.prototype.getMaxGroupid=function(){var e=0,t=this.getFlatChildren(this.queryconditionData).sort(function(e,t){return t.groupid-e.groupid});return t.length&&(e=t[0].groupid),e},Bt.prototype.objToArrayData=function(t,e){var n=this,i=t.items,r=t.children;return i.forEach(function(e){return e.relation=t.relation}),r.length&&(i=[].concat.apply([],D(i,r.map(function(e){return n.objToArrayData(e,t.relation)})))),i.length&&e&&(i[i.length-1].relation=e,i[0].Lbracket?i[0].Lbracket+="(":i[0].Lbracket="(",i[i.length-1].Rbracket?i[i.length-1].Rbracket+=")":i[i.length-1].Rbracket=")"),D(i)},Bt.prototype.updateQueryConditionListData=function(){var e=this.objToArrayData(w.cloneDeep(this.queryconditionData));this.queryconditionListData=e,this.queryconditionListData$.next(this.queryconditionListData)},Bt.prototype.treeshake=function(t,e){var n=this;t.children.length&&t.children.forEach(function(e){return n.treeshake(e,t)}),t.items.length||1<t.children.length||(1===t.groupid?t.items.length||1!==t.children.length||this.deleteGroup(t.children[0].groupid,t.children[0].path,!1,!0):t.children.length?1===t.children.length&&this.deleteGroup(t.groupid,t.path,!1,!0):e.children=e.children.filter(function(e){return e.groupid!==t.groupid}))},Bt.decorators=[{type:F.Injectable}],Bt.ctorParameters=function(){return[{type:b.NotifyService},{type:T.LocaleService}]},Bt);function Bt(e,t){this.notifySer=e,this.localeService=t,this.fieldConfig=[],this.fieldConfig$=new C.Subject,this.queryconditionData$=new C.Subject,this.queryconditionListData$=new C.Subject,this.checkedList={},this.checkedList$=new C.Subject}var zt=(Object.defineProperty(Jt.prototype,"selectSolution",{get:function(){return this._selectSolution},set:function(e){e&&this._selectSolution&&e.id===this._selectSolution.id||(this._selectSolution=e,this.queryconditionData=e.queryConditionsAdvanced,this.stateSer.setQueryconditionData(e.queryConditionsAdvanced))},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"fieldConfig",{get:function(){return this._fieldConfig},set:function(e){var t=w.cloneDeep(e);t.forEach(function(e){"single-date"===e.control.controltype?e.control.isDynamicDate=!1:"radio"===e.control.controltype&&(e.control.horizontal=!0)});var n=this.rangeToSimpleControlType(t);this._fieldConfig=this.solutionService.convertToQueryConditions(n),this._fieldConfig.forEach(function(e){8!==e.control.getControlType()||e.value.getOriginalValue().length||e.value.setOriginalValue([!1])}),this.stateSer.changeFieldConfig(this._fieldConfig)},enumerable:!0,configurable:!0}),Jt.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.handleResizeChange()},1e3)},Jt.prototype.ngOnInit=function(){},Jt.prototype.ngOnDestroy=function(){this.dataSubscribe.unsubscribe(),this.dataListSubscribe.unsubscribe()},Jt.prototype.addItem=function(){if(this.fieldConfig.length){var e=w.cloneDeep(this.fieldConfig[0]);this.stateSer.changeQueryconditionData({item:e,path:[1]},"add",!0),this.advancedContent.nativeElement.scrollTo({top:this.advancedContent.nativeElement.scrollHeight})}else this.notifySer.error("")},Jt.prototype.addGroup=function(){this.stateSer.addGroup()},Jt.prototype.reset=function(){var n=this;this.msgSer.confirm(this.localeService.getValue("advancedMode.info.resetInfo")).subscribe(function(e){if(e){n.stateSer.reset();var t=document.createEvent("Event");t.initEvent("keydown",!0,!1),t=Object.assign(t,{ctrlKey:!1,metaKey:!1,altKey:!1,which:13,keyCode:13,key:"Enter",code:"Enter"}),n._self.nativeElement.dispatchEvent(t)}})},Jt.prototype.rangeToSimpleControlType=function(e){var t=this,n=w.cloneDeep(e);return n.forEach(function(e){e.control&&e.control.controltype&&(e.control.controltype=t.rangeToSimpleTypeModify(e.control.controltype))}),n},Jt.prototype.rangeToSimpleTypeModify=function(e){var t="";switch(e){case"date":t="single-date";break;case"date-time":t="single-date-time";break;case"month":t="single-month";break;case"number":t="single-number";break;default:t=e}return t},Jt.prototype.handleResizeChange=function(){var t=this;new ResizeObserver(function(e){e.forEach(function(e){e.target.style.height<431?t.isLimitHeight=!0:t.isLimitHeight=!1})}).observe(this.advancedElement.nativeElement)},Jt.decorators=[{type:F.Component,args:[{selector:"querycondition-advanced",template:'<div class="querycondition-advanced" #advancedElement>\r\n\r\n    <div class="querycondition-advanced-body" #advancedContent [ngClass]="{\'querycondition-advanced-body-maxh\':isLimitHeight}">\r\n        <querycondition-group [data]="queryconditionData"></querycondition-group>\r\n\r\n    </div>\r\n    <div class="querycondition-advanced-bottom">\r\n        <div class="add-condition-btn mb-1 mr-3" (click)="addItem()"><span class="f-icon f-icon-filter-add"></span><span\r\n                class="ml-1">{{\'advancedMode.text.addCondition\' | locale}}</span></div>\r\n        <div class="add-condition-btn mb-1" (click)="addGroup()"><span\r\n                class="f-icon f-icon-filter-grouping"></span><span class="ml-1">{{\'advancedMode.text.addConditionGroup\'\r\n                | locale}}</span></div>\r\n        <div *ngIf="queryconditionData && (queryconditionData.items.length || queryconditionData.children.length)" class="querycondition-advanced-reset add-condition-btn" (click)="reset()">{{\'advancedMode.text.reset\' |\r\n            locale}}</div>\r\n    </div>\r\n\r\n</div>',providers:[ht],styles:[".querycondition-advanced{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-y:hidden;resize:vertical;min-height:50px}.querycondition-advanced-body{height:calc(100% - 32px);overflow-y:auto}.querycondition-advanced-body-maxh{max-height:380px}.querycondition-advanced-bottom{position:relative;margin:14px 0 14px 6px}.querycondition-advanced-reset{position:absolute;right:32px;bottom:4px}.add-group-btn{width:100%;background:rgb(239,245,255,.65);border:1px solid rgba(219,233,255,1);border-radius:6px;color:#2a87ff;font-size:13px}.add-condition-btn{font-size:13px;display:inline-block}.add-condition-btn:hover{cursor:pointer}.add-condition-btn .f-icon{vertical-align:text-bottom;position:relative;width:16px;height:16px;border-radius:50%}.add-condition-btn .f-icon-filter-add::before{position:relative;bottom:3px;left:2px;font-size:12px}.add-condition-btn .f-icon-filter-grouping::before{position:relative;bottom:3px;left:1px;font-size:12px}"]}]}],Jt.ctorParameters=function(){return[{type:b.NotifyService},{type:S.MessagerService},{type:T.LocaleService},{type:ht},{type:$t},{type:F.Injector}]},Jt.propDecorators={selectSolution:[{type:F.Input}],fieldConfig:[{type:F.Input}],conditionChange:[{type:F.Output,args:["conditionChange"]}],advancedContent:[{type:F.ViewChild,args:["advancedContent"]}],advancedElement:[{type:F.ViewChild,args:["advancedElement"]}]},Jt);function Jt(e,t,n,i,r,o){var a=this;this.notifySer=e,this.msgSer=t,this.localeService=n,this.solutionService=i,this.stateSer=r,this.injector=o,this.dataSubscribe=null,this.dataListSubscribe=null,this._self=null,this.isLimitHeight=!0,this.conditionChange=new F.EventEmitter,this.dataSubscribe=this.stateSer.queryconditionData$.subscribe(function(e){a.queryconditionData=e,a.selectSolution.queryConditionsAdvanced=e}),this.dataListSubscribe=this.stateSer.queryconditionListData$.subscribe(function(e){a.conditionChange.emit(e)}),this._self=this.injector.get(F.ElementRef)}var Qt=["","","","","","","","",""],Wt=[[0,6,7,8],[0,2,3,4,5],[0,1],[0,1],[],[],[0,1,2,3,4,5],[0,2,3,4,5],[0],[],[0,2,3,4,5],[],[0,2,3,4,5],[0,1],[0],[0,6,7,8]],Yt=(Ut.prototype.ngOnInit=function(){},Ut.prototype.ngOnDestroy=function(){this.fieldConfigSubscribe.unsubscribe(),this.checkedListSubscribe.unsubscribe()},Ut.prototype.dpStateHandler=function(e,t){var n=this;e&&"number"==typeof t?(this.activeConditionType=t.toString(),this.forceState=[],this.overLayService.registerMouseEvent(this._self.nativeElement,function(e){if(n.activeConditionType&&("wheel"===e.type||"mousewheel"===e.type)){var t=e.target;!Array.from(t.classList||[]).includes("dropdown-item-noopen")&&n.activeConditionType&&(n.activeConditionType=null,n.forceState=[!1],n.overLayService.destory(n._self.nativeElement))}})):this.overLayService.destory(this._self.nativeElement)},Ut.prototype.changeConditionType=function(e,t){var n=e.conditionid;(e=w.cloneDeep(t)).conditionid=n,e.compareType=0,this.stateSer.changeQueryconditionData({item:e,path:this.data.path},"modify")},Ut.prototype.changeCompareType=function(e,t){e.compareType=t,this.stateSer.changeQueryconditionData({item:e,path:this.data.path},"modify")},Ut.prototype.addItem=function(e){var t=w.cloneDeep(this.fieldConfig[0]);this.stateSer.changeQueryconditionData({item:t,path:this.data.path,addPositionItem:e},"add")},Ut.prototype.deleteItem=function(e){this.stateSer.changeQueryconditionData({deleteItems:[e],path:this.data.path},"delete-item")},Ut.prototype.changeRelation=function(){var e=1===this.data.relation?2:1;this.stateSer.changeGroupData({relation:e,path:this.data.path},"modify-relation")},Ut.prototype.handleCheckItem=function(e){this.stateSer.changeCheckedList(this.data.path,e.conditionid)},Ut.prototype.deleteGroup=function(){var t=this;this.msgSer.confirm(this.localeService.getValue("advancedMode.info.deleteGroup")).subscribe(function(e){e&&t.stateSer.deleteGroup(t.data.groupid,t.data.path)})},Ut.decorators=[{type:F.Component,args:[{selector:"querycondition-group",template:'<div class="querycondition-advanced-content">\r\n\r\n\r\n  <div>\r\n    <div class="querycondition-advanced-item" *ngFor="let item of data.items;let i = index">\r\n      <div class="querycondition-advanced-item-type mr-3" fDropdown (dpChangeEvent)="dpStateHandler($event, i)" [forceState]="forceState" [autoRectify]="true">\r\n        <button class="btn btn-secondary dropdown-toggle" fDropdownToggle type="button" [title]="item.fieldName">\r\n          {{item.fieldName}}\r\n          <span class="f-icon f-icon-arrow-chevron-down"></span>\r\n        </button>\r\n        <div class="dropdown-menu" fDropdownMenu #dropdownMenu>\r\n          <li class="dropdown-item dropdown-item-noopen" *ngFor="let fieldItem of fieldConfig;let i = index"\r\n            (click)="changeConditionType(item, fieldItem)"><span class="dropdown-item-noopen">{{fieldItem.fieldName}}</span></li>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="querycondition-advanced-item-compare mr-3" fDropdown (dpChangeEvent)="dpStateHandler($event, i)" [forceState]="forceState" *ngIf="(item.control.singleSelect === undefined &&  item.control.multiSelect === undefined) || item.control.singleSelect === true || item.control.multiSelect === false">\r\n        <button class="btn btn-secondary dropdown-toggle" fDropdownToggle type="button">\r\n          {{COMPARE_TYPE_NAME[item.compareType]}}\r\n          <span class="f-icon f-icon-arrow-chevron-down"></span>\r\n        </button>\r\n        <div class="dropdown-menu" fDropdownMenu>\r\n          <ng-container *ngFor="let label of COMPARE_TYPE_NAME;let i = index">\r\n            <li class="dropdown-item dropdown-item-noopen" [hidden]="!COMPARE_TYPE_IN_CONTROL[item.control.getControlType()].includes(i)"\r\n            (click)="changeCompareType(item, i)"><span  class="dropdown-item-noopen">{{label}}</span></li>\r\n          </ng-container>\r\n          \r\n\r\n        </div>\r\n      </div>\r\n      <div class="querycondition-advanced-item-compare mr-3" fDropdown (dpChangeEvent)="dpStateHandler($event)" [forceState]="forceState" *ngIf=" item.control.singleSelect === false || item.control.multiSelect === true">\r\n        <button class="btn btn-secondary dropdown-toggle" fDropdownToggle type="button">\r\n          {{COMPARE_TYPE_NAME_MULTI[item.compareType]}}\r\n          <span class="f-icon f-icon-arrow-chevron-down"></span>\r\n        </button>\r\n        <div class="dropdown-menu" fDropdownMenu>\r\n          <ng-container *ngFor="let label of COMPARE_TYPE_NAME_MULTI;let i = index">\r\n            <li class="dropdown-item  dropdown-item-noopen" [hidden]="!COMPARE_TYPE_IN_CONTROL[item.control.getControlType()].includes(i)"\r\n            (click)="changeCompareType(item, i)" class="dropdown-item-noopen"><span >{{label}}</span></li>\r\n          </ng-container>\r\n          \r\n\r\n        </div>\r\n      </div>\r\n      \x3c!-- <div class="querycondition-advanced-item-control mr-3">{{data.path.join(\'-\') + \' , \' + data.groupid + \' , \' + item.conditionid}}</div> --\x3e\r\n      <div class="querycondition-advanced-item-control mr-3">\r\n        <querycondition-item [item]="item" ></querycondition-item>\r\n      </div>\r\n      <div class="querycondition-advanced-item-extend">\r\n\r\n        <span class="f-icon f-icon-plus-sm mr-2" (click)="addItem(item)"></span>\r\n        <span class="f-icon f-icon-minus-sm" (click)="deleteItem(item)"></span>\r\n      </div>\r\n      <div class="custom-control custom-checkbox">\r\n        <input #input class="custom-control-input" type="checkbox" \r\n          [checked]="checklist.includes(item.conditionid)" />\r\n        <label class="custom-control-label"\r\n          (click)="handleCheckItem(item)"></label>\r\n      </div>\r\n\r\n\r\n\r\n    </div>\r\n    <querycondition-group [data]="children" *ngFor="let children of data.children"></querycondition-group>\r\n  </div>\r\n\r\n  <div class="querycondition-advanced-relation"  *ngIf="(data.items.length + data.children.length) > 0">\r\n    <span *ngIf="data.groupid !== 1" class="querycondition-advanced-relation-close f-icon-filter-cancel btn-link" (click)="deleteGroup()" farrisTooltip [content]="deleteGroupText"></span>\r\n    <span class="querycondition-advanced-relation-text btn-link" (click)="changeRelation()" >{{(data.relation === 1 ? \'advancedMode.text.and\' : \'advancedMode.text.or\') | locale}}</span>\r\n    \x3c!-- <span (click)="deleteGroup()"></span> --\x3e\r\n  </div>\r\n\r\n</div>',styles:[".querycondition-advanced-content{display:-webkit-box;display:flex}.querycondition-advanced-item{padding:4px;display:-webkit-box;display:flex;height:40px}.querycondition-advanced-item-type button{text-align:left;width:240px;position:relative;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.querycondition-advanced-item-compare button{text-align:left;width:134px;position:relative}.querycondition-advanced-item-compare .f-icon-arrow-chevron-down::before,.querycondition-advanced-item-type .f-icon-arrow-chevron-down::before{position:absolute;right:8px;bottom:4px}.querycondition-advanced-content .dropdown-toggle::after{display:none}.querycondition-advanced-item-control{line-height:26px;width:240px}.querycondition-advanced-item-extend .f-icon{vertical-align:text-bottom}.querycondition-advanced-item-extend .f-icon:hover{cursor:pointer}.querycondition-advanced-item-extend .f-icon-plus-sm::before{font-size:14px;color:#2a87ff;background-color:#e8f2ff;border-radius:50%;position:relative;top:1px}.querycondition-advanced-item-extend .f-icon-minus-sm::before{font-size:14px;color:#f46160;background-color:#fadcdd;border-radius:50%;position:relative;top:1px}.querycondition-advanced-relation{margin:2px 0 2px 12px;border-left:1px solid rgba(222,227,240,1);position:relative;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding-left:12px;font-size:13px;color:#2a87ff;text-align:center;cursor:pointer}.querycondition-advanced-relation:hover .querycondition-advanced-relation-close{display:inline}.querycondition-advanced-relation-close{position:absolute;top:-4px;display:none}.querycondition-advanced-relation:hover .querycondition-advanced-relation-text{text-decoration:underline}.querycondition-advanced-item .custom-control-label:before{position:relative;top:2px}.querycondition-advanced-relation button{width:20px}.dropdown-menu{-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb;overflow-y:overlay;max-height:45%}"]}]}],Ut.ctorParameters=function(){return[{type:$t},{type:F.ChangeDetectorRef},{type:S.MessagerService},{type:T.LocaleService},{type:F.Injector}]},Ut.propDecorators={data:[{type:F.Input}]},Ut);function Ut(e,t,n,i,r){var o=this;this.stateSer=e,this.cd=t,this.msgSer=n,this.localeService=i,this.injector=r,this.COMPARE_TYPE_NAME=Qt,this.COMPARE_TYPE_NAME_MULTI=Qt,this.COMPARE_TYPE_IN_CONTROL=Wt,this.fieldConfig=[],this.checklist=[],this.deleteGroupText=this.localeService.getValue("advancedMode.info.deleteGroupTooltip"),this.fieldConfigSubscribe=null,this.checkedListSubscribe=null,this.forceState=[],this._self=null,this.activeConditionType=null,this.overLayService=null,this.fieldConfig=this.stateSer.getFieldConfig(),this.fieldConfigSubscribe=this.stateSer.fieldConfig$.subscribe(function(e){o.fieldConfig=e}),this.checkedListSubscribe=this.stateSer.checkedList$.subscribe(function(e){var t=o.data.path.join("-");e[t]?o.checklist=e[t]:o.checklist=[]}),this.COMPARE_TYPE_NAME=[this.localeService.getValue("advancedMode.compareType.Equal"),this.localeService.getValue("advancedMode.compareType.NotEqual"),this.localeService.getValue("advancedMode.compareType.Greater"),this.localeService.getValue("advancedMode.compareType.GreaterOrEqual"),this.localeService.getValue("advancedMode.compareType.Less"),this.localeService.getValue("advancedMode.compareType.LessOrEqual"),this.localeService.getValue("advancedMode.compareType.Like"),this.localeService.getValue("advancedMode.compareType.LikeStartWith"),this.localeService.getValue("advancedMode.compareType.LikeEndWith")],this.COMPARE_TYPE_NAME_MULTI=[this.localeService.getValue("advancedMode.compareType.Like"),this.localeService.getValue("advancedMode.compareType.NotLike"),this.localeService.getValue("advancedMode.compareType.Greater"),this.localeService.getValue("advancedMode.compareType.GreaterOrEqual"),this.localeService.getValue("advancedMode.compareType.Less"),this.localeService.getValue("advancedMode.compareType.LessOrEqual"),this.localeService.getValue("advancedMode.compareType.Like"),this.localeService.getValue("advancedMode.compareType.LikeStartWith"),this.localeService.getValue("advancedMode.compareType.LikeEndWith")],this.overLayService=new x.OverLayHiddenService,this._self=this.injector.get(F.ElementRef)}var Kt=(Zt.prototype.ngOnInit=function(){},Zt.prototype.conditionChange=function(){this.stateSer.updateQueryConditionListData()},Zt.prototype.getStyle=function(e){return""},Zt.prototype.buildSmartHelpKey=function(e){var t,n="";return n=location.hash?(t=location.hash.split("?"))?t[0]:"":(t=location.pathname.split("/"))?t[t.length-1]:"",this.idService.encrypt(n+"/querysolution/"+e)},Zt.prototype.clearFieldsChange=function(e){},Zt.decorators=[{type:F.Component,args:[{selector:"querycondition-item",template:'<app-solution-input  \r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.Text && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-input>\r\n\r\n<app-solution-inputgroup\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.InputGroup && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-inputgroup>\r\n\r\n<app-solution-dropdownlist\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.DropDownList && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-dropdownlist>\r\n\r\n<app-solution-smarthelp\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    (clearFieldsChange)="clearFieldsChange($event)"\r\n    *ngIf="item.control.getControlType() == controlType.SmartHelp && item.visible"\r\n    [(item)]="item"\r\n    [instanceId]="buildSmartHelpKey(item.fieldCode)"\r\n    [hideLabel]="true">\r\n</app-solution-smarthelp>\r\n\r\n<app-solution-single-number\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.SingleNumber && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-single-number>\r\n\r\n\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.SingleDate && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.DateRange && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.SingleYear && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.SingleMonth && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.MonthRange && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.SingleDateTime && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-datepicker\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.DateTimeRange && item.visible"\r\n    [(item)]="item"\r\n    [controlType]="item.control.getControlType()"\r\n    [hideLabel]="true">\r\n</app-solution-datepicker>\r\n\r\n<app-solution-combolookup\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.ComboLookUp && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-combolookup>\r\n\r\n<app-solution-checkbox\r\n    [ngClass]="getStyle(item)"\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.BoolCheck && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-checkbox>\r\n\r\n<app-solution-radio\r\n    [ngClass]="getStyle(item)"\r\n    class=""\r\n    [changeFields]="fieldCodeOfClearFields"\r\n    (conditionChange)="conditionChange()"\r\n    *ngIf="item.control.getControlType() == controlType.Radio && item.visible"\r\n    [(item)]="item"\r\n    [hideLabel]="true">\r\n</app-solution-radio>',styles:[""]}]}],Zt.ctorParameters=function(){return[{type:F.Injector}]},Zt.propDecorators={item:[{type:F.Input}]},Zt);function Zt(e){this.injector=e,this.controlType=M,this.fieldCodeOfClearFields=[],this.idService=this.injector.get(x.IdService),this.stateSer=this.injector.get($t)}var Xt=(en.decorators=[{type:F.NgModule,args:[{imports:[n.CommonModule,y.FormsModule,y.ReactiveFormsModule,i.FarrisDialogModule,r.LayoutModule,o.LookupModule,a.MultiSelectModule,l.FieldGroupModule,s.InputGroupModule,d.FDropdownDirectiveTypeModule,u.LoadingModule.forRoot(),b.NotifyModule.forRoot(),m.FarrisDatePickerModule,T.LocaleModule.forRoot(),c.ComboListModule,p.NumberSpinnerModule,h.FarrisFormsModule,f.ComboLookupModule,v.FarrisTooltipModule],declarations:[gt,kt,Nt,yt,Ft,Ct,wt,Vt,qt,jt,Mt,St,Pt,Gt,zt,Yt,Kt],entryComponents:[kt],providers:[ht,b.NotifyService,q,$t],bootstrap:[gt],exports:[gt,kt,Nt,yt,Ft,Ct,wt,Vt,qt,jt,Mt,St]}]}],en);function en(){}var tn=function cn(){this.isDefault=!1,this.isChanged=!1,this.extendId="query-scheme-1"},nn=(rn.prototype.convertJObject=function(e){var t=e,n=new Object;if(n.id=t.id,n.belongId=t.belongId,n.code=t.code,n.name=t.name,n.isSystem=t.isSystem,n.isDefault=t.isDefault,n.type=t.type,n.extendId=t.extendId,n.extendInfo=t.extendInfo,n.code_chs=t.code_chs,n.code_en=t.code_en,n.code_cht=t.code_cht,n.mode=t.mode||"1","2"===t.mode){var i=this.simplifyTreeData(w.cloneDeep(t.queryConditionsAdvanced));n.advancedQueryConditionsString=JSON.stringify(i)}if(t.queryConditions&&0<t.queryConditions.length){var r=[],o=new ut;t.queryConditions.forEach(function(e){r.push(o.convertJObject(e))}),n.queryConditionString=JSON.stringify(r)}return n},rn.prototype.initFromJobject=function(e){var t=new tn;t.id=e.id,t.code=e.code,t.name=e.name,t.belongId=e.belongId,t.isSystem=e.isSystem,t.isDefault=e.isDefault,t.type=e.hasOwnProperty("type")?e.type:"",t.extendId=e.hasOwnProperty("extendId")?e.extendId:"",t.queryConditions=new Array,t.mode=e.mode||1;var n=e.queryConditionString;if(n){var i=JSON.parse(n),r=new ut;i.forEach(function(e){t.queryConditions.push(r.initFromJobject(e))})}return t.queryConditionsAdvanced=e.advancedQueryConditionsString?JSON.parse(e.advancedQueryConditionsString):null,t},rn.prototype.formatFromJobject=function(e){var t,n=new Array;t="string"==typeof e?JSON.parse(e):e;var i=new ut;return t.forEach(function(e){n.push(i.initFromJobject(e))}),n},rn.prototype.formatConvertJObject=function(e){var t=[],n=new ut;return e.forEach(function(e){t.push(n.convertJObject(e))}),t},rn.prototype.getFlatConditions=function(e){var t=this;return e.children?[].concat.apply([],D([e.items],e.children.map(function(e){return t.getFlatConditions(e)}))):[].concat(e.items)},rn.prototype.simplifyTreeData=function(e){var t=this;if(e.items&&e.items.length){var n=e.items.map(function(e){return{conditionid:e.conditionid}});e.items=n}return e.children&&e.children.forEach(function(e){return t.simplifyTreeData(e)}),e},rn.prototype.complicateTreeData=function(e,i){var t=function(e){return e.items&&e.items.length&&(e.items=e.items.map(function(t){var e=i.find(function(e){return e.conditionid===t.conditionid});if(e){var n=w.cloneDeep(e);return n.groupid=undefined,n.Lbracket=undefined,n.Rbracket=undefined,n}return null})),e.children&&e.children.length&&e.children.forEach(function(e){t(e)}),e};return t(e)},rn);function rn(){}var on=function pn(){},an={Equal:0,GreaterThan:2,GreaterThanOrEqual:3,LessThan:4,LessThanOrEqual:5,Like:6};an[an.Equal]="Equal",an[an.GreaterThan]="GreaterThan",an[an.GreaterThanOrEqual]="GreaterThanOrEqual",an[an.LessThan]="LessThan",an[an.LessThanOrEqual]="LessThanOrEqual",an[an.Like]="Like";var ln=function hn(e){this.visible=!0,this.id=e.id,this.labelCode=e.fieldCode,this.name=e.fieldName};e.QueryConditionModule=Xt,e.QueryConditionComponent=gt,e.QuerySolutionVo=tn,e.QuerySolutionExtendVo=on,e.QueryCondition=dt,e.CompareType=an,e.ValueType=pt,e.FieldConfig=ln,e.ControlType=M,e.DateRangeControl=Y,e.DropDownListControl=$,e.EnumBoolValue=P,e.EnumType=E,e.EnumIntegerValue=N,e.EnumStringValue=j,e.NumberRangeControl=ne,e.SmartHelpContol=X,e.TextControl=Q,e.InputGroupControl=xe,e.DateRangeValue=Ne,e.DropDownListValue=Qe,e.NumberRangeValue=qe,e.SmartHelpValue=je,e.TextValue=ke,e.InputGroupValue=ot,e.SolutionService=ht,e.QuerySolutionVoConvertor=nn,e.ConvertorService=q,e.SingleDateValue=Pe,e.SingleNumberValue=Ge,e.SingleDateControl=K,e.SingleNumberControl=re,e.SingleYearValue=$e,e.SingleYearControl=ae,e.CheckBoxControl=se,e.CheckBoxValue=ze,e.SingleMonthControl=pe,e.SingleMonthValue=Ye,e.MonthRangeControl=me,e.MonthRangeValue=Ke,e.SingleDateTimeControl=fe,e.SingleDateTimeValue=Xe,e.ComboLookUpControl=ve,e.ComboLookUpValue=tt,e.RadioControl=be,e.RadioValue=it,e.StateService=$t,e.i=qt,e.j=jt,e.c=Nt,e.g=wt,e.f=Ct,e.l=St,e.h=Vt,e.d=yt,e.k=Mt,e.e=Ft,e.m=Pt,e.n=Gt,e.b=kt,e.o=zt,e.p=Yt,e.q=Kt,e.a=k,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=farris-component-querycondition.umd.min.js.map