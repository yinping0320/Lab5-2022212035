/**
 * @fileoverview added by tsickle
 * Generated from: lib/querycondition-advanced/querycondition-advanced.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ElementRef, Injector, ViewChild } from '@angular/core';
import { StateService } from './service/state.service';
import { NotifyService } from '@farris/ui-notify';
import { cloneDeep } from 'lodash-es';
import { SolutionService } from '../service/solution.service';
import { QuerySolutionVo } from '../entity/querysolutionvo';
import { MessagerService } from '@farris/ui-messager';
import { LocaleService } from '@farris/ui-locale';
export class QueryconditionAdvancedComponent {
    /**
     * @param {?} notifySer
     * @param {?} msgSer
     * @param {?} localeService
     * @param {?} solutionService
     * @param {?} stateSer
     * @param {?} injector
     */
    constructor(notifySer, msgSer, localeService, solutionService, stateSer, injector) {
        this.notifySer = notifySer;
        this.msgSer = msgSer;
        this.localeService = localeService;
        this.solutionService = solutionService;
        this.stateSer = stateSer;
        this.injector = injector;
        this.dataSubscribe = null;
        this.dataListSubscribe = null;
        this._self = null;
        //子组件受否需要限定最大高度，默认true拖动高度后false
        this.isLimitHeight = true;
        this.conditionChange = new EventEmitter();
        // this.fieldConfig = this.stateSer.getFieldConfig()
        this.dataSubscribe = this.stateSer.queryconditionData$.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            this.queryconditionData = data;
            this.selectSolution.queryConditionsAdvanced = data;
        }));
        this.dataListSubscribe = this.stateSer.queryconditionListData$.subscribe((/**
         * @param {?} queryconditionListData
         * @return {?}
         */
        (queryconditionListData) => {
            this.conditionChange.emit(queryconditionListData);
        }));
        this._self = this.injector.get(ElementRef);
    }
    /**
     * @return {?}
     */
    get selectSolution() {
        return this._selectSolution;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectSolution(value) {
        if (value && this._selectSolution && value.id === this._selectSolution.id) {
            return;
        }
        this._selectSolution = value;
        this.queryconditionData = value.queryConditionsAdvanced;
        this.stateSer.setQueryconditionData(value.queryConditionsAdvanced);
    }
    /**
     * @return {?}
     */
    get fieldConfig() {
        return this._fieldConfig;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set fieldConfig(value) {
        //undo 范围型的组件暂不支持 
        //doing 将范围型组件重置为单值类型，方法，先反格式化，拿到基础值，遍历rangeList，将相关控件类型替换后再进行格式化
        //undo 范围型的组件暂不支持 
        //doing 将范围型组件重置为单值类型，方法，先反格式化，拿到基础值，遍历rangeList，将相关控件类型替换后再进行格式化
        /** @type {?} */
        let _value = cloneDeep(value);
        _value.forEach((/**
         * @param {?} val
         * @return {?}
         */
        val => {
            if (val.control.controltype === 'single-date') {
                val.control.isDynamicDate = false;
            }
            else if (val.control.controltype === 'radio') {
                val.control.horizontal = true;
            }
        }));
        //将单日期里面的支持动态日期属性群不改为false
        /** @type {?} */
        let modifyFieldConfig = this.rangeToSimpleControlType(_value);
        this._fieldConfig = this.solutionService.convertToQueryConditions(modifyFieldConfig);
        //波尔选择控件如果没有默认值，赋值位false，为什么不放在上面。因为不敢动之前的构造函数
        this._fieldConfig.forEach((/**
         * @param {?} val
         * @return {?}
         */
        val => {
            if (val.control.getControlType() === 8 && !val.value.getOriginalValue().length) {
                val.value.setOriginalValue([false]);
            }
        }));
        this.stateSer.changeFieldConfig(this._fieldConfig);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        //监听resize事件变化
        setTimeout((/**
         * @return {?}
         */
        () => { this.handleResizeChange(); }), 1000);
    }
    /**
     * @return {?}
     */
    ngOnInit() { }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.dataSubscribe.unsubscribe();
        this.dataListSubscribe.unsubscribe();
    }
    //最外层增加筛选条件
    /**
     * @return {?}
     */
    addItem() {
        if (!this.fieldConfig.length) {
            this.notifySer.error('未检测到存在筛选条件。');
        }
        else {
            /** @type {?} */
            let item = cloneDeep(this.fieldConfig[0]);
            this.stateSer.changeQueryconditionData({ item, path: [1] }, 'add', true);
            this.advancedContent.nativeElement.scrollTo({ top: this.advancedContent.nativeElement.scrollHeight });
        }
    }
    //增加分组
    /**
     * @return {?}
     */
    addGroup() {
        this.stateSer.addGroup();
    }
    //重置
    /**
     * @return {?}
     */
    reset() {
        this.msgSer.confirm(this.localeService.getValue('advancedMode.info.resetInfo')).subscribe((/**
         * @param {?} isConfirm
         * @return {?}
         */
        (isConfirm) => {
            if (isConfirm) {
                this.stateSer.reset();
                //触发回车，进行查询操作
                /** @type {?} */
                let event = document.createEvent('Event');
                event.initEvent('keydown', true, false);
                event = Object.assign(event, {
                    ctrlKey: false,
                    metaKey: false,
                    altKey: false,
                    which: 13,
                    keyCode: 13,
                    key: 'Enter',
                    code: 'Enter'
                });
                this._self.nativeElement.dispatchEvent(event);
            }
        }));
    }
    /**
     * @param {?} configs
     * @return {?}
     */
    rangeToSimpleControlType(configs) {
        /** @type {?} */
        let unformatConfigs = cloneDeep(configs);
        unformatConfigs.forEach((/**
         * @param {?} val
         * @return {?}
         */
        val => {
            if (val.control && val.control.controltype) {
                val.control.controltype = this.rangeToSimpleTypeModify(val.control.controltype);
            }
        }));
        return unformatConfigs;
    }
    //转化部分控件类型
    /**
     * @param {?} controlType
     * @return {?}
     */
    rangeToSimpleTypeModify(controlType) {
        /** @type {?} */
        let result = '';
        switch (controlType) {
            case 'date':
                result = 'single-date';
                break;
            case 'date-time':
                result = 'single-date-time';
                break;
            case 'month':
                result = 'single-month';
                break;
            case 'number':
                result = 'single-number';
                break;
            default:
                result = controlType;
        }
        return result;
    }
    /**
     * 监听筛选条件组件大小变化的方法，高度超过指定值时取消内部组件最大高度值限制
     * @return {?}
     */
    handleResizeChange() {
        //@ts-ignore
        /** @type {?} */
        const myObserver = new ResizeObserver((/**
         * @param {?} entries
         * @return {?}
         */
        entries => {
            entries.forEach((/**
             * @param {?} entry
             * @return {?}
             */
            entry => {
                if (entry.target.style.height < 431) {
                    this.isLimitHeight = true;
                }
                else {
                    this.isLimitHeight = false;
                }
            }));
        }));
        myObserver.observe(this.advancedElement.nativeElement);
    }
}
QueryconditionAdvancedComponent.decorators = [
    { type: Component, args: [{
                selector: 'querycondition-advanced',
                template: "<div class=\"querycondition-advanced\" #advancedElement>\r\n\r\n    <div class=\"querycondition-advanced-body\" #advancedContent [ngClass]=\"{'querycondition-advanced-body-maxh':isLimitHeight}\">\r\n        <querycondition-group [data]=\"queryconditionData\"></querycondition-group>\r\n\r\n    </div>\r\n    <div class=\"querycondition-advanced-bottom\">\r\n        <div class=\"add-condition-btn mb-1 mr-3\" (click)=\"addItem()\"><span class=\"f-icon f-icon-filter-add\"></span><span\r\n                class=\"ml-1\">{{'advancedMode.text.addCondition' | locale}}</span></div>\r\n        <div class=\"add-condition-btn mb-1\" (click)=\"addGroup()\"><span\r\n                class=\"f-icon f-icon-filter-grouping\"></span><span class=\"ml-1\">{{'advancedMode.text.addConditionGroup'\r\n                | locale}}</span></div>\r\n        <div *ngIf=\"queryconditionData && (queryconditionData.items.length || queryconditionData.children.length)\" class=\"querycondition-advanced-reset add-condition-btn\" (click)=\"reset()\">{{'advancedMode.text.reset' |\r\n            locale}}</div>\r\n    </div>\r\n\r\n</div>",
                providers: [SolutionService],
                styles: [".querycondition-advanced{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow-y:hidden;resize:vertical;min-height:50px}.querycondition-advanced-body{height:calc(100% - 32px);overflow-y:auto}.querycondition-advanced-body-maxh{max-height:380px}.querycondition-advanced-bottom{position:relative;margin:14px 0 14px 6px}.querycondition-advanced-reset{position:absolute;right:32px;bottom:4px}.add-group-btn{width:100%;background:rgb(239,245,255,.65);border:1px solid rgba(219,233,255,1);border-radius:6px;color:#2a87ff;font-size:13px}.add-condition-btn{font-size:13px;display:inline-block}.add-condition-btn:hover{cursor:pointer}.add-condition-btn .f-icon{vertical-align:text-bottom;position:relative;width:16px;height:16px;border-radius:50%}.add-condition-btn .f-icon-filter-add::before{position:relative;bottom:3px;left:2px;font-size:12px}.add-condition-btn .f-icon-filter-grouping::before{position:relative;bottom:3px;left:1px;font-size:12px}"]
            }] }
];
/** @nocollapse */
QueryconditionAdvancedComponent.ctorParameters = () => [
    { type: NotifyService },
    { type: MessagerService },
    { type: LocaleService },
    { type: SolutionService },
    { type: StateService },
    { type: Injector }
];
QueryconditionAdvancedComponent.propDecorators = {
    selectSolution: [{ type: Input }],
    fieldConfig: [{ type: Input }],
    conditionChange: [{ type: Output, args: ['conditionChange',] }],
    advancedContent: [{ type: ViewChild, args: ['advancedContent',] }],
    advancedElement: [{ type: ViewChild, args: ['advancedElement',] }]
};
if (false) {
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.queryconditionData;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype._selectSolution;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype._fieldConfig;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.dataSubscribe;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.dataListSubscribe;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype._self;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.isLimitHeight;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.conditionChange;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.advancedContent;
    /** @type {?} */
    QueryconditionAdvancedComponent.prototype.advancedElement;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.notifySer;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.msgSer;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.solutionService;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.stateSer;
    /**
     * @type {?}
     * @private
     */
    QueryconditionAdvancedComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnljb25kaXRpb24tYWR2YW5jZWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21wb25lbnQtcXVlcnljb25kaXRpb24vIiwic291cmNlcyI6WyJsaWIvcXVlcnljb25kaXRpb24tYWR2YW5jZWQvcXVlcnljb25kaXRpb24tYWR2YW5jZWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQW9CLE1BQU0sRUFBRSxZQUFZLEVBQWEsVUFBVSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBR3BKLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUV2RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFOUQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDJCQUEyQixDQUFBO0FBQzNELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFTbEQsTUFBTSxPQUFPLCtCQUErQjs7Ozs7Ozs7O0lBc0QxQyxZQUFvQixTQUF3QixFQUFVLE1BQXVCLEVBQVUsYUFBNEIsRUFBVSxlQUFnQyxFQUFVLFFBQXNCLEVBQVUsUUFBa0I7UUFBck0sY0FBUyxHQUFULFNBQVMsQ0FBZTtRQUFVLFdBQU0sR0FBTixNQUFNLENBQWlCO1FBQVUsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFBVSxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFjO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQVZ6TixrQkFBYSxHQUFpQixJ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Qiw2REFBOEM7O0lBQzlDLDBEQUFnQzs7SUF3Q2hDLHVEQUFtQzs7SUFDbkMsd0RBQWtDOztJQUNsQyw0REFBc0M7O0lBQ3RDLGdEQUFZOztJQUdaLHdEQUFvQjs7SUFDcEIsMERBQWdFOztJQUVoRSwwREFBMEQ7O0lBQzFELDBEQUEwRDs7Ozs7SUFDOUMsb0RBQWdDOzs7OztJQUFFLGlEQUErQjs7Ozs7SUFBRSx3REFBb0M7Ozs7O0lBQUUsMERBQXdDOzs7OztJQUFFLG1EQUE4Qjs7Ozs7SUFBRSxtREFBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQsIE9wdGlvbmFsLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25EZXN0cm95LCBFbGVtZW50UmVmLCBJbmplY3RvciwgVmlld0NoaWxkLCBBZnRlclZpZXdJbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBRdWVyeWNvbmRpdGlvbkFkdmFuY2VkRGF0YSB9IGZyb20gJy4vdHlwZS90eXBlJ1xyXG5pbXBvcnQgeyBTdGF0ZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2Uvc3RhdGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uIH0gZnJvbSAnLi4vZW50aXR5L3F1ZXJ5Q29uZGl0aW9uJ1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gtZXMnO1xyXG5pbXBvcnQgeyBTb2x1dGlvblNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL3NvbHV0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb250cm9sVHlwZSB9IGZyb20gJy4uL2VudGl0eS9jb250cm9sdHlwZSc7XHJcbmltcG9ydCB7IFF1ZXJ5U29sdXRpb25WbyB9IGZyb20gJy4uL2VudGl0eS9xdWVyeXNvbHV0aW9udm8nXHJcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzL2ludGVybmFsL1N1YnNjcmlwdGlvbic7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncXVlcnljb25kaXRpb24tYWR2YW5jZWQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9xdWVyeWNvbmRpdGlvbi1hZHZhbmNlZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vcXVlcnljb25kaXRpb24tYWR2YW5jZWQuY29tcG9uZW50LmNzcyddLFxyXG4gIHByb3ZpZGVyczogW1NvbHV0aW9uU2VydmljZV1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBRdWVyeWNvbmRpdGlvbkFkdmFuY2VkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0luaXQge1xyXG5cclxuICBxdWVyeWNvbmRpdGlvbkRhdGE6IFF1ZXJ5Y29uZGl0aW9uQWR2YW5jZWREYXRhXHJcbiAgX3NlbGVjdFNvbHV0aW9uOiBRdWVyeVNvbHV0aW9uVm9cclxuICBASW5wdXQoKSBnZXQgc2VsZWN0U29sdXRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0U29sdXRpb25cclxuICB9XHJcbiAgc2V0IHNlbGVjdFNvbHV0aW9uKHZhbHVlOiBRdWVyeVNvbHV0aW9uVm8pIHtcclxuICAgIGlmICh2YWx1ZSAmJiB0aGlzLl9zZWxlY3RTb2x1dGlvbiAmJiB2YWx1ZS5pZCA9PT0gdGhpcy5fc2VsZWN0U29sdXRpb24uaWQpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZWxlY3RTb2x1dGlvbiA9IHZhbHVlXHJcbiAgICB0aGlzLnF1ZXJ5Y29uZGl0aW9uRGF0YSA9IHZhbHVlLnF1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkXHJcbiAgICB0aGlzLnN0YXRlU2VyLnNldFF1ZXJ5Y29uZGl0aW9uRGF0YSh2YWx1ZS5xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZClcclxuICB9XHJcbiAgQElucHV0KCkgZ2V0IGZpZWxkQ29uZmlnKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkQ29uZmlnXHJcbiAgfVxyXG4gIHNldCBmaWVsZENvbmZpZyh2YWx1ZSkge1xyXG4gICAgLy91bmRvIOiMg+WbtOWei+eahOe7hOS7tuaaguS4jeaUr+aMgSBcclxuICAgIC8vZG9pbmcg5bCG6IyD5Zu05Z6L57uE5Lu26YeN572u5Li65Y2V5YC857G75Z6L77yM5pa55rOV77yM5YWI5Y+N5qC85byP5YyW77yM5ou/5Yiw5Z+656GA5YC877yM6YGN5Y6GcmFuZ2VMaXN077yM5bCG55u45YWz5o6n5Lu257G75Z6L5pu/5o2i5ZCO5YaN6L+b6KGM5qC85byP5YyWXHJcblxyXG4gICAgbGV0IF92YWx1ZSA9IGNsb25lRGVlcCh2YWx1ZSlcclxuICAgIF92YWx1ZS5mb3JFYWNoKHZhbCA9PiB7XHJcbiAgICAgIGlmICh2YWwuY29udHJvbC5jb250cm9sdHlwZSA9PT0gJ3NpbmdsZS1kYXRlJykge1xyXG4gICAgICAgIHZhbC5jb250cm9sLmlzRHluYW1pY0RhdGUgPSBmYWxzZVxyXG4gICAgICB9IGVsc2UgaWYodmFsLmNvbnRyb2wuY29udHJvbHR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICB2YWwuY29udHJvbC5ob3Jpem9udGFsID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgfSlcclxuICAgIC8v5bCG5Y2V5pel5pyf6YeM6Z2i55qE5pSv5oyB5Yqo5oCB5pel5pyf5bGe5oCn576k5LiN5pS55Li6ZmFsc2VcclxuICAgIGxldCBtb2RpZnlGaWVsZENvbmZpZyA9IHRoaXMucmFuZ2VUb1NpbXBsZUNvbnRyb2xUeXBlKF92YWx1ZSlcclxuICAgIHRoaXMuX2ZpZWxkQ29uZmlnID0gdGhpcy5zb2x1dGlvblNlcnZpY2UuY29udmVydFRvUXVlcnlDb25kaXRpb25zKG1vZGlmeUZpZWxkQ29uZmlnKTtcclxuICAgIC8v5rOi5bCU6YCJ5oup5o6n5Lu25aaC5p6c5rKh5pyJ6buY6K6k5YC877yM6LWL5YC85L2NZmFsc2XvvIzkuLrku4DkuYjkuI3mlL7lnKjkuIrpnaLjgILlm6DkuLrkuI3mlaLliqjkuYvliY3nmoTmnoTpgKDlh73mlbBcclxuICAgIHRoaXMuX2ZpZWxkQ29uZmlnLmZvckVhY2godmFsID0+IHtcclxuICAgICAgaWYgKHZhbC5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgPT09IDggJiYgIXZhbC52YWx1ZS5nZXRPcmlnaW5hbFZhbHVlKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFsLnZhbHVlLnNldE9yaWdpbmFsVmFsdWUoW2ZhbHNlXSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHRoaXMuc3RhdGVTZXIuY2hhbmdlRmllbGRDb25maWcodGhpcy5fZmllbGRDb25maWcpXHJcblxyXG4gIH1cclxuICBfZmllbGRDb25maWc6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPlxyXG4gIGRhdGFTdWJzY3JpYmU6IFN1YnNjcmlwdGlvbiA9IG51bGxcclxuICBkYXRhTGlzdFN1YnNjcmliZTogU3Vic2NyaXB0aW9uID0gbnVsbFxyXG4gIF9zZWxmID0gbnVsbFxyXG4gIC8v5a2Q57uE5Lu25Y+X5ZCm6ZyA6KaB6ZmQ5a6a5pyA5aSn6auY5bqm77yM6buY6K6kdHJ1ZeaLluWKqOmrmOW6puWQjmZhbHNlXHJcblxyXG4gIGlzTGltaXRIZWlnaHQgPSB0cnVlXHJcbiAgQE91dHB1dCgnY29uZGl0aW9uQ2hhbmdlJykgY29uZGl0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBAVmlld0NoaWxkKCdhZHZhbmNlZENvbnRlbnQnKSBhZHZhbmNlZENvbnRlbnQ6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnYWR2YW5jZWRFbGVtZW50JykgYWR2YW5jZWRFbGVtZW50OiBFbGVtZW50UmVmO1xyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbm90aWZ5U2VyOiBOb3RpZnlTZXJ2aWNlLCBwcml2YXRlIG1zZ1NlcjogTWVzc2FnZXJTZXJ2aWNlLCBwcml2YXRlIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2UsIHByaXZhdGUgc29sdXRpb25TZXJ2aWNlOiBTb2x1dGlvblNlcnZpY2UsIHByaXZhdGUgc3RhdGVTZXI6IFN0YXRlU2VydmljZSwgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcclxuXHJcbiAgICAvLyB0aGlzLmZpZWxkQ29uZmlnID0gdGhpcy5zdGF0ZVNlci5nZXRGaWVsZENvbmZpZygpXHJcbiAgICB0aGlzLmRhdGFTdWJzY3JpYmUgPSB0aGlzLnN0YXRlU2VyLnF1ZXJ5Y29uZGl0aW9uRGF0YSQuc3Vic2NyaWJlKChkYXRhOiBRdWVyeWNvbmRpdGlvbkFkdmFuY2VkRGF0YSkgPT4ge1xyXG4gICAgICB0aGlzLnF1ZXJ5Y29uZGl0aW9uRGF0YSA9IGRhdGFcclxuICAgICAgdGhpcy5zZWxlY3RTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZCA9IGRhdGFcclxuICAgIH0pXHJcbiAgICB0aGlzLmRhdGFMaXN0U3Vic2NyaWJlID0gdGhpcy5zdGF0ZVNlci5xdWVyeWNvbmRpdGlvbkxpc3REYXRhJC5zdWJzY3JpYmUoKHF1ZXJ5Y29uZGl0aW9uTGlzdERhdGE6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikgPT4ge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbkNoYW5nZS5lbWl0KHF1ZXJ5Y29uZGl0aW9uTGlzdERhdGEpO1xyXG5cclxuICAgIH0pXHJcbiAgICB0aGlzLl9zZWxmID0gdGhpcy5pbmplY3Rvci5nZXQoRWxlbWVudFJlZik7XHJcblxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgLy/nm5HlkKxyZXNpemXkuovku7blj5jljJZcclxuICAgIHNldFRpbWVvdXQoKCk9Pnt0aGlzLmhhbmRsZVJlc2l6ZUNoYW5nZSgpfSwxMDAwKVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7fVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGF0YVN1YnNjcmliZS51bnN1YnNjcmliZSgpXHJcbiAgICB0aGlzLmRhdGFMaXN0U3Vic2NyaWJlLnVuc3Vic2NyaWJlKClcclxuICB9XHJcblxyXG4gIC8v5pyA5aSW5bGC5aKe5Yqg562b6YCJ5p2h5Lu2XHJcbiAgYWRkSXRlbSgpIHtcclxuICAgIGlmICghdGhpcy5maWVsZENvbmZpZy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5ub3RpZnlTZXIuZXJyb3IoJ+acquajgOa1i+WIsOWtmOWcqOetm+mAieadoeS7tuOAgicpXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgbGV0IGl0ZW0gPSBjbG9uZURlZXAodGhpcy5maWVsZENvbmZpZ1swXSlcclxuICAgICAgdGhpcy5zdGF0ZVNlci5jaGFuZ2VRdWVyeWNvbmRpdGlvbkRhdGEoeyBpdGVtLCBwYXRoOiBbMV0gfSwgJ2FkZCcsIHRydWUpXHJcbiAgICAgIHRoaXMuYWR2YW5jZWRDb250ZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG8oeyB0b3A6IHRoaXMuYWR2YW5jZWRDb250ZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0IH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL+WinuWKoOWIhue7hFxyXG4gIGFkZEdyb3VwKCkge1xyXG4gICAgdGhpcy5zdGF0ZVNlci5hZGRHcm91cCgpXHJcbiAgfVxyXG5cclxuICAvL+mHjee9rlxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5tc2dTZXIuY29uZmlybSh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2FkdmFuY2VkTW9kZS5pbmZvLnJlc2V0SW5mbycpKS5zdWJzY3JpYmUoKGlzQ29uZmlybSkgPT4ge1xyXG4gICAgICBpZiAoaXNDb25maXJtKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVNlci5yZXNldCgpXHJcbiAgICAgICAgLy/op6blj5Hlm57ovabvvIzov5vooYzmn6Xor6Lmk43kvZxcclxuICAgICAgICBsZXQgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKVxyXG4gICAgICAgIGV2ZW50LmluaXRFdmVudCgna2V5ZG93bicsIHRydWUsIGZhbHNlKVxyXG5cclxuICAgICAgICBldmVudCA9IE9iamVjdC5hc3NpZ24oZXZlbnQsIHtcclxuICAgICAgICAgIGN0cmxLZXk6IGZhbHNlLFxyXG4gICAgICAgICAgbWV0YUtleTogZmFsc2UsXHJcbiAgICAgICAgICBhbHRLZXk6IGZhbHNlLFxyXG4gICAgICAgICAgd2hpY2g6IDEzLFxyXG4gICAgICAgICAga2V5Q29kZTogMTMsXHJcbiAgICAgICAgICBrZXk6ICdFbnRlcicsXHJcbiAgICAgICAgICBjb2RlOiAnRW50ZXInXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLl9zZWxmLm5hdGl2ZUVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudClcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIHJhbmdlVG9TaW1wbGVDb250cm9sVHlwZShjb25maWdzKSB7XHJcbiAgICBsZXQgdW5mb3JtYXRDb25maWdzID0gY2xvbmVEZWVwKGNvbmZpZ3MpXHJcbiAgICB1bmZvcm1hdENvbmZpZ3MuZm9yRWFjaCh2YWwgPT4ge1xyXG4gICAgICBpZiAodmFsLmNvbnRyb2wgJiYgdmFsLmNvbnRyb2wuY29udHJvbHR5cGUpIHtcclxuXHJcbiAgICAgICAgdmFsLmNvbnRyb2wuY29udHJvbHR5cGUgPSB0aGlzLnJhbmdlVG9TaW1wbGVUeXBlTW9kaWZ5KHZhbC5jb250cm9sLmNvbnRyb2x0eXBlKVxyXG4gICAgICB9XHJcblxyXG4gICAgfSlcclxuICAgIHJldHVybiB1bmZvcm1hdENvbmZpZ3NcclxuXHJcbiAgfVxyXG5cclxuICAvL+i9rOWMlumDqOWIhuaOp+S7tuexu+Wei1xyXG4gIHJhbmdlVG9TaW1wbGVUeXBlTW9kaWZ5KGNvbnRyb2xUeXBlKSB7XHJcblxyXG4gICAgbGV0IHJlc3VsdCA9ICcnXHJcbiAgICBzd2l0Y2ggKGNvbnRyb2xUeXBlKSB7XHJcblxyXG4gICAgICBjYXNlICdkYXRlJzpcclxuICAgICAgICByZXN1bHQgPSAnc2luZ2xlLWRhdGUnXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnZGF0ZS10aW1lJzpcclxuICAgICAgICByZXN1bHQgPSAnc2luZ2xlLWRhdGUtdGltZSdcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdtb250aCc6XHJcbiAgICAgICAgcmVzdWx0ID0gJ3NpbmdsZS1tb250aCdcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICAgIHJlc3VsdCA9ICdzaW5nbGUtbnVtYmVyJ1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmVzdWx0ID0gY29udHJvbFR5cGVcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOebkeWQrOetm+mAieadoeS7tue7hOS7tuWkp+Wwj+WPmOWMlueahOaWueazle+8jOmrmOW6pui2hei/h+aMh+WumuWAvOaXtuWPlua2iOWGhemDqOe7hOS7tuacgOWkp+mrmOW6puWAvOmZkOWItlxyXG4gICAqL1xyXG4gIGhhbmRsZVJlc2l6ZUNoYW5nZSgpIHtcclxuICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgY29uc3QgbXlPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHtcclxuICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgICBpZihlbnRyeS50YXJnZXQuc3R5bGUuaGVpZ2h0IDwgNDMxICkge1xyXG4gICAgICAgICAgdGhpcy5pc0xpbWl0SGVpZ2h0ID0gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmlzTGltaXRIZWlnaHQgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBteU9ic2VydmVyLm9ic2VydmUodGhpcy5hZHZhbmNlZEVsZW1lbnQubmF0aXZlRWxlbWVudClcclxuICB9XHJcblxyXG59XHJcbiJdfQ==