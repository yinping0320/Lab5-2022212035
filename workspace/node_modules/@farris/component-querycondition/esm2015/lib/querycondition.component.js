/**
 * @fileoverview added by tsickle
 * Generated from: lib/querycondition.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewEncapsulation, Input, ComponentFactoryResolver, Injector, Output, EventEmitter, LOCALE_ID, ViewChild, NgZone } from '@angular/core';
import { CommunicationService } from './service/communicationservice';
import { ConvertorService } from './service/convertorservice';
import { ControlType } from './entity/controltype';
import { ConfigDialogComponent } from './fieldconfigdialog/configdialog.component';
import { BsModalService } from '@farris/ui-modal';
import { SolutionService } from './service/solution.service';
import { LocaleService } from '@farris/ui-locale';
import { Subject } from 'rxjs';
import { IdService } from '@farris/ui-common';
export class QueryConditionComponent {
    /**
     * @param {?} communicationService
     * @param {?} convertorService
     * @param {?} resolver
     * @param {?} injector
     * @param {?} modalService
     * @param {?} localeService
     */
    constructor(communicationService, convertorService, resolver, injector, modalService, localeService) {
        this.communicationService = communicationService;
        this.convertorService = convertorService;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.localeService = localeService;
        this._resetFieldConfigs = [];
        this.isControlInline = true;
        this.showCompleteLabel = false;
        this.fieldConditionsChange = new EventEmitter();
        //是否启用高级模式，默认为false
        this.openAdvanced = true;
        this.localeIds = {
            'en': 'en',
            'zh-CHS': 'zh-CHS'
        };
        this.controlType = ControlType;
        this.showButton = false;
        this.fieldCodeOfClearFields = [];
        this.canClearRelatedFields = false;
        this.destroy$ = new Subject();
        // 获取ngZone
        this.ngZone = null;
        this.currentLocale = this.injector.get(LOCALE_ID);
        this.solutionService = this.injector.get(SolutionService);
        this.idService = this.injector.get(IdService);
        if (!this.ngZone) {
            this.ngZone = this.injector.get(NgZone, null);
        }
    }
    /**
     * @return {?}
     */
    get selectSolution() {
        return this._selectSolution;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectSolution(value) {
        this._selectSolution = value;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set resetFieldConfigs(value) {
        if (value && value.length > 0) {
            this.solutionService.updateControlConfigState(value);
        }
        this._resetFieldConfigs = value;
    }
    /**
     * @return {?}
     */
    get resetFieldConfigs() {
        return this._resetFieldConfigs;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectedFieldConditions(value) {
        this._selectedFieldConditions = value;
    }
    /**
     * @return {?}
     */
    get selectedFieldConditions() {
        return this._selectedFieldConditions;
    }
    ;
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.currentLocale === this.localeIds['en']) {
            this.isControlInline = false;
        }
        this.selectedFieldConditions = this.selectedFieldConditions || new Array();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
    }
    /**
     * @param {?} currentItem
     * @return {?}
     */
    hasSetMultiClass(currentItem) {
        if (currentItem.control.className && currentItem.control.className.indexOf('farris-group-multi-label') > -1) {
            return true;
        }
        return false;
    }
    /* */
    /**
     * @param {?} currentItem
     * @return {?}
     */
    getStyle(currentItem) {
        /** @type {?} */
        const defaultCondtionStyle = 'col-12 col-md-6 col-xl-3 col-el-2';
        // 设置显示标签全并且显示了折行
        // if(this.showCompleteLabel && currentItem.control.className == 'farris-group-multi-label'){
        //     return defaultCondtionStyle.concat(" farris-group-multi-label");
        // }
        /** @type {?} */
        let className = currentItem.control.className;
        className = className ? className.replace('farris-group-multi-label', '') : '';
        return className ? className : defaultCondtionStyle;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    configDialogConfirm(event) {
        /** @type {?} */
        const configData = (/** @type {?} */ ((/** @type {?} */ (event))));
        /** @type {?} */
        const reConfigConditions = new Array();
        for (const data of configData) {
            /** @type {?} */
            const target = this.selectedFieldConditions.find((/**
             * @param {?} condition
             * @return {?}
             */
            condition => condition.fieldCode == data));
            if (target) {
                reConfigConditions.push(target);
            }
            else {
                reConfigConditions.push(this.fieldConfigs.find((/**
                 * @param {?} condition
                 * @return {?}
                 */
                condition => condition.fieldCode == data)));
            }
        }
        for (const condition of this.selectedFieldConditions) {
            if (!condition.visible) {
                reConfigConditions.push(condition);
            }
        }
        this.selectedFieldConditions = reConfigConditions;
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
    }
    /**
     * @return {?}
     */
    openFieldConfigDialog() {
        this.configDialog.inputSelectedFileds = this.selectedFieldConditions ? this.selectedFieldConditions : [];
        this.configDialog.dialog.show();
    }
    /**
     * @param {?=} exceptRequired
     * @return {?}
     */
    resetSelectedConditionValues(exceptRequired = false) {
        return this.selectedFieldConditions.map((/**
         * @param {?} fieldCondition
         * @return {?}
         */
        fieldCondition => {
            if (exceptRequired) {
                if (!fieldCondition.control.isRequired()) {
                    fieldCondition.value.clearValue();
                }
            }
            else {
                fieldCondition.value.clearValue();
            }
            return fieldCondition;
        }));
    }
    /**
     * @return {?}
     */
    conditionChange() {
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
        if (this.selectSolution && this.selectSolution.mode === '2') {
            this.selectSolution.queryConditions = this.selectedFieldConditions;
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    conditionChangeAdvanced(data) {
        this.selectedFieldConditions = data;
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
        if (this.selectSolution && this.selectSolution.mode === '2') {
            this.selectSolution.queryConditions = this.selectedFieldConditions;
        }
    }
    // 弹出帮助控件面板前，更改canClearRelatedFields，避免赋默认值和帮助值变化清空两个特性的冲突
    /**
     * @param {?} e
     * @return {?}
     */
    clearFieldsChange(e) {
        if (e && e['controlType'] == ControlType.SmartHelp && e['canClearRelatedFields']) {
            this.canClearRelatedFields = true;
        }
    }
    /**
     * @param {?} conditions
     * @return {?}
     */
    confirmLabelFormat(conditions) {
        if (this.isControlInline) {
            this.labelFormat = 'farris-form-controls-inline';
            /** @type {?} */
            let hasCustom = false;
            if (conditions.length) {
                // 复选框label标签目前在框的右侧，超出宽度后下方出现滚动条，计算标签最大长度时需将其排除
                /** @type {?} */
                let noCheckBoxConditions = [];
                conditions.forEach((/**
                 * @param {?} condition
                 * @return {?}
                 */
                condition => {
                    if (condition.control.getControlType() != ControlType.BoolCheck) {
                        noCheckBoxConditions.push(condition);
                    }
                    if (condition.control['className'] && condition.control['className'] != 'farris-group-multi-label') {
                        hasCustom = true;
                    }
                }));
                this.labelFormat += hasCustom ? ' condition-is-custom' : ' condition-with-fixed';
                /** @type {?} */
                let maxLength = 0;
                if (noCheckBoxConditions.length) {
                    noCheckBoxConditions.forEach((/**
                     * @param {?} item
                     * @return {?}
                     */
                    item => {
                        maxLength = (item.fieldName.length > maxLength) ? (item.fieldName.length) : maxLength;
                    }));
                }
                //需要完整显示控件标签时，根据标签最大长度确定标签栏每行可显示的字符数
                if (this.showCompleteLabel) {
                    if (maxLength > 8) {
                        //标签超出8个字符后，设置每行最多可显示10个字符
                        this.labelFormat = this.labelFormat.concat(" f-form-label-xl");
                    }
                    else if ((maxLength < 9) && (maxLength > 6)) {
                        //标签超出6个字符、不超过8个字符时，设置每行最多可显示8个字符
                        this.labelFormat = this.labelFormat.concat(" f-form-label-lg");
                    }
                }
            }
        }
        if (this.labelFormat) {
            return this.labelFormat + (this.isControlInline && this.showCompleteLabel ? ' condition-with-complete' : '');
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    buildSmartHelpKey(value) {
        /** @type {?} */
        let prefix = '';
        if (location.hash) {
            /** @type {?} */
            const pathArr = location.hash.split('?');
            prefix = pathArr ? pathArr[0] : '';
        }
        else {
            /** @type {?} */
            const pathArr = location.pathname.split('/');
            prefix = pathArr ? pathArr[pathArr.length - 1] : '';
        }
        return this.idService.encrypt(prefix + '/querysolution/' + value);
    }
}
QueryConditionComponent.decorators = [
    { type: Component, args: [{
                selector: 'farris-querycondition',
                template: "<div  *ngIf=\"!selectSolution || selectSolution.mode !== '2'\" class=\"row f-utils-flex-row-wrap farris-form {{confirmLabelFormat(selectedFieldConditions)}} condition-div\"  id=\"querycondition\" #queryConditionWrap>\r\n    <ng-container *ngFor=\"let currentItem of selectedFieldConditions;let i=index;\">\r\n        <app-solution-input  \r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.Text && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-input>\r\n\r\n        <app-solution-inputgroup\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.InputGroup && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-inputgroup>\r\n        \r\n        <app-solution-dropdownlist\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DropDownList && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-dropdownlist>\r\n        \r\n        <app-solution-smarthelp\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            (clearFieldsChange)=\"clearFieldsChange($event)\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SmartHelp && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [instanceId]=\"buildSmartHelpKey(selectedFieldConditions[i].fieldCode)\">\r\n        </app-solution-smarthelp>\r\n        \r\n        <app-solution-single-number\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleNumber && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-single-number>\r\n\r\n        <app-solution-numberrange\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.NumberRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-numberrange>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleDate && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DateRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleYear && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleMonth && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.MonthRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleDateTime && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DateTimeRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-combolookup\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.ComboLookUp && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-combolookup>\r\n\r\n        <app-solution-checkbox\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.BoolCheck && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-checkbox>\r\n\r\n        <app-solution-radio\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.Radio && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-radio>\r\n    </ng-container>\r\n</div>\r\n\r\n<div *ngIf=\"selectSolution && selectSolution.mode === '2'\">\r\n    <querycondition-advanced\r\n    [fieldConfig]=\"unformatFieldConfigs\" \r\n    [selectSolution]=\"selectSolution\"\r\n    (conditionChange)=\"conditionChangeAdvanced($event)\"></querycondition-advanced>\r\n</div>\r\n<app-queryconfigdialog \r\n    #configDialog \r\n    [inputSelectedFileds]=\"selectedFieldConditions\" \r\n    [filedsDataSource]=\"fieldConfigs\"\r\n    (confirmEmitter)=\"configDialogConfirm($event)\">\r\n</app-queryconfigdialog>",
                encapsulation: ViewEncapsulation.None,
                providers: [CommunicationService],
                styles: [".condition-div{min-height:30px}.f-solution-radio-group .farris-checkradio-hor{flex-wrap:nowrap;overflow-x:auto}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-track{border-radius:0}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.f-solution-radio-group .farris-checkradio-hor .custom-radio{flex-shrink:0}.split-date-range{width:100%;display:-webkit-box;display:flex}"]
            }] }
];
/** @nocollapse */
QueryConditionComponent.ctorParameters = () => [
    { type: CommunicationService },
    { type: ConvertorService },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: BsModalService },
    { type: LocaleService }
];
QueryConditionComponent.propDecorators = {
    selectSolution: [{ type: Input }],
    fieldConfigs: [{ type: Input }],
    unformatFieldConfigs: [{ type: Input }],
    resetFieldConfigs: [{ type: Input }],
    isControlInline: [{ type: Input }],
    selectedFieldConditions: [{ type: Input }],
    showCompleteLabel: [{ type: Input }],
    isDisabled: [{ type: Input }],
    fieldConditionsChange: [{ type: Output }],
    configDialog: [{ type: ViewChild, args: ['configDialog',] }],
    openAdvanced: [{ type: Input }],
    queryConditionWrapEl: [{ type: ViewChild, args: ["queryConditionWrap",] }]
};
if (false) {
    /** @type {?} */
    QueryConditionComponent.prototype._selectSolution;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldConfigs;
    /** @type {?} */
    QueryConditionComponent.prototype.unformatFieldConfigs;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype._resetFieldConfigs;
    /** @type {?} */
    QueryConditionComponent.prototype.isControlInline;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype._selectedFieldConditions;
    /** @type {?} */
    QueryConditionComponent.prototype.showCompleteLabel;
    /** @type {?} */
    QueryConditionComponent.prototype.isDisabled;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldConditionsChange;
    /** @type {?} */
    QueryConditionComponent.prototype.configDialog;
    /** @type {?} */
    QueryConditionComponent.prototype.openAdvanced;
    /** @type {?} */
    QueryConditionComponent.prototype.localeIds;
    /** @type {?} */
    QueryConditionComponent.prototype.currentLocale;
    /** @type {?} */
    QueryConditionComponent.prototype.solutionService;
    /** @type {?} */
    QueryConditionComponent.prototype.controlType;
    /** @type {?} */
    QueryConditionComponent.prototype.labelFormat;
    /** @type {?} */
    QueryConditionComponent.prototype.showButton;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldCodeOfClearFields;
    /** @type {?} */
    QueryConditionComponent.prototype.canClearRelatedFields;
    /** @type {?} */
    QueryConditionComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.idService;
    /** @type {?} */
    QueryConditionComponent.prototype.queryConditionWrapEl;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.communicationService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.convertorService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.localeService;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnljb25kaXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21wb25lbnQtcXVlcnljb25kaXRpb24vIiwic291cmNlcyI6WyJsaWIvcXVlcnljb25kaXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUM1RSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQXVDLE1BQU0sRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFFbEksT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDdEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDOUQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBQ25GLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBVTlDLE1BQU0sT0FBTyx1QkFBdUI7Ozs7Ozs7OztJQW9FaEMsWUFDWSxvQkFBMEMsRUFDMUMsZ0JBQWtDLEVBQ2xDLFFBQWtDLEVBQ2xDLFFBQWtCLEVBQ2xCLFlBQTRCLEVBQzVCLGFBQTRCO1FBTDVCLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxhQUFRLEdBQVIsUUFB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SUEvRC9CLGtEQUFnQzs7SUFPaEMsK0NBQTZDOztJQUM3Qyx1REFBMEM7Ozs7O0lBQzFDLHFEQUFnQzs7SUFXaEMsa0RBQXlDOzs7OztJQUN6QywyREFBdUQ7O0lBU3ZELG9EQUE0Qzs7SUFFNUMsNkNBQTZCOztJQUU3Qix3REFBNkU7O0lBRTdFLCtDQUErRDs7SUFHL0QsK0NBQXNDOztJQUV0Qyw0Q0FHQzs7SUFDRCxnREFBc0I7O0lBRXRCLGtEQUFpQzs7SUFFakMsOENBQTBCOztJQUUxQiw4Q0FBb0I7O0lBRXBCLDZDQUE0Qjs7SUFFNUIseURBQTJDOztJQUUzQyx3REFBdUM7O0lBRXZDLDJDQUE0Qzs7Ozs7SUFFNUMsNENBQTZCOztJQUU3Qix1REFBc0Q7Ozs7O0lBRXRELHlDQUFzQjs7Ozs7SUFFbEIsdURBQWtEOzs7OztJQUNsRCxtREFBMEM7Ozs7O0lBQzFDLDJDQUEwQzs7Ozs7SUFDMUMsMkNBQTBCOzs7OztJQUMxQiwrQ0FBb0M7Ozs7O0lBQ3BDLGdEQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24sIElucHV0LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yLCBDb21wb25lbnRGYWN0b3J5LFxyXG4gICAgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIExPQ0FMRV9JRCwgVmlld0NoaWxkLCBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3Q2hlY2tlZCwgTmdab25lLCBBZnRlclZpZXdJbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uIH0gZnJvbSAnLi9lbnRpdHkvcXVlcnljb25kaXRpb24nO1xyXG5pbXBvcnQgeyBDb21tdW5pY2F0aW9uU2VydmljZSB9IGZyb20gJy4vc2VydmljZS9jb21tdW5pY2F0aW9uc2VydmljZSc7XHJcbmltcG9ydCB7IENvbnZlcnRvclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvY29udmVydG9yc2VydmljZSc7XHJcbmltcG9ydCB7IENvbnRyb2xUeXBlIH0gZnJvbSAnLi9lbnRpdHkvY29udHJvbHR5cGUnO1xyXG5pbXBvcnQgeyBDb25maWdEaWFsb2dDb21wb25lbnQgfSBmcm9tICcuL2ZpZWxkY29uZmlnZGlhbG9nL2NvbmZpZ2RpYWxvZy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBTb2x1dGlvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2Uvc29sdXRpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSWRTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24nO1xyXG5pbXBvcnQge1F1ZXJ5U29sdXRpb25Wb30gZnJvbSAnLi9lbnRpdHkvcXVlcnlzb2x1dGlvbnZvJ1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2ZhcnJpcy1xdWVyeWNvbmRpdGlvbicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vcXVlcnljb25kaXRpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vcXVlcnljb25kaXRpb24uY29tcG9uZW50LmNzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIHByb3ZpZGVyczogW0NvbW11bmljYXRpb25TZXJ2aWNlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgUXVlcnlDb25kaXRpb25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3Q2hlY2tlZCwgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gICAgX3NlbGVjdFNvbHV0aW9uOiBRdWVyeVNvbHV0aW9uVm9cclxuICAgIEBJbnB1dCgpIGdldCBzZWxlY3RTb2x1dGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0U29sdXRpb25cclxuICAgIH1cclxuICAgIHNldCBzZWxlY3RTb2x1dGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdFNvbHV0aW9uID0gdmFsdWVcclxuICAgIH1cclxuICAgIEBJbnB1dCgpIGZpZWxkQ29uZmlnczogQXJyYXk8UXVlcnlDb25kaXRpb24+O1xyXG4gICAgQElucHV0KCkgdW5mb3JtYXRGaWVsZENvbmZpZ3M6IEFycmF5PGFueT47XHJcbiAgICBwcml2YXRlIF9yZXNldEZpZWxkQ29uZmlncyA9IFtdO1xyXG4gICAgQElucHV0KCkgXHJcbiAgICBzZXQgcmVzZXRGaWVsZENvbmZpZ3ModmFsdWU6IEFycmF5PGFueT4pIHtcclxuICAgICAgICBpZih2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnVwZGF0ZUNvbnRyb2xDb25maWdTdGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3Jlc2V0RmllbGRDb25maWdzID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVzZXRGaWVsZENvbmZpZ3MoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVzZXRGaWVsZENvbmZpZ3M7XHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBpc0NvbnRyb2xJbmxpbmU6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM6QXJyYXk8UXVlcnlDb25kaXRpb24+O1xyXG4gICAgQElucHV0KCkgXHJcbiAgICBzZXQgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnModmFsdWU6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXQgc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMoKTogQXJyYXk8UXVlcnlDb25kaXRpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnM7XHJcbiAgICB9O1xyXG5cclxuICAgIEBJbnB1dCgpIHNob3dDb21wbGV0ZUxhYmVsOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgQElucHV0KCkgaXNEaXNhYmxlZDogYm9vbGVhbjtcclxuXHJcbiAgICBAT3V0cHV0KCkgZmllbGRDb25kaXRpb25zQ2hhbmdlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAgIEBWaWV3Q2hpbGQoJ2NvbmZpZ0RpYWxvZycpIGNvbmZpZ0RpYWxvZzogQ29uZmlnRGlhbG9nQ29tcG9uZW50O1xyXG5cclxuICAgIC8v5piv5ZCm5ZCv55So6auY57qn5qih5byP77yM6buY6K6k5Li6ZmFsc2VcclxuICAgIEBJbnB1dCgpIG9wZW5BZHZhbmNlZDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgbG9jYWxlSWRzID0ge1xyXG4gICAgICAgICdlbic6ICdlbicsXHJcbiAgICAgICAgJ3poLUNIUyc6ICd6aC1DSFMnXHJcbiAgICB9XHJcbiAgICBjdXJyZW50TG9jYWxlOiBzdHJpbmc7XHJcbiAgICBcclxuICAgIHNvbHV0aW9uU2VydmljZTogU29sdXRpb25TZXJ2aWNlO1xyXG4gICAgXHJcbiAgICBjb250cm9sVHlwZSA9IENvbnRyb2xUeXBlO1xyXG4gICAgXHJcbiAgICBsYWJlbEZvcm1hdDogc3RyaW5nO1xyXG5cclxuICAgIHNob3dCdXR0b246IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBmaWVsZENvZGVPZkNsZWFyRmllbGRzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG4gICAgY2FuQ2xlYXJSZWxhdGVkRmllbGRzOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgZGVzdHJveSQ6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgICBwcml2YXRlIGlkU2VydmljZTogSWRTZXJ2aWNlO1xyXG4gICAgXHJcbiAgICBAVmlld0NoaWxkKFwicXVlcnlDb25kaXRpb25XcmFwXCIpIHF1ZXJ5Q29uZGl0aW9uV3JhcEVsO1xyXG4gICAgLy8g6I635Y+Wbmdab25lXHJcbiAgICBwcml2YXRlIG5nWm9uZSA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGNvbW11bmljYXRpb25TZXJ2aWNlOiBDb21tdW5pY2F0aW9uU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGNvbnZlcnRvclNlcnZpY2U6IENvbnZlcnRvclNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGxvY2FsZVNlcnZpY2U6IExvY2FsZVNlcnZpY2VcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudExvY2FsZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KExPQ0FMRV9JRCk7XHJcbiAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChTb2x1dGlvblNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuaWRTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoSWRTZXJ2aWNlKTtcclxuICAgICAgICBpZiAoIXRoaXMubmdab25lKSB7ICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLm5nWm9uZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PE5nWm9uZT4oTmdab25lLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudExvY2FsZSA9PT0gdGhpcy5sb2NhbGVJZHNbJ2VuJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRyb2xJbmxpbmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgfHwgbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0NoZWNrZWQoKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgaGFzU2V0TXVsdGlDbGFzcyhjdXJyZW50SXRlbTogYW55KTpib29sZWFue1xyXG4gICAgICAgIGlmKGN1cnJlbnRJdGVtLmNvbnRyb2wuY2xhc3NOYW1lJiZjdXJyZW50SXRlbS5jb250cm9sLmNsYXNzTmFtZS5pbmRleE9mKCdmYXJyaXMtZ3JvdXAtbXVsdGktbGFiZWwnKT4tMSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKiAqL1xyXG4gICAgZ2V0U3R5bGUoY3VycmVudEl0ZW06IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmR0aW9uU3R5bGUgPSAnY29sLTEyIGNvbC1tZC02IGNvbC14bC0zIGNvbC1lbC0yJztcclxuICAgICAgICAvLyDorr7nva7mmL7npLrmoIfnrb7lhajlubbkuJTmmL7npLrkuobmipjooYxcclxuICAgICAgICAvLyBpZih0aGlzLnNob3dDb21wbGV0ZUxhYmVsICYmIGN1cnJlbnRJdGVtLmNvbnRyb2wuY2xhc3NOYW1lID09ICdmYXJyaXMtZ3JvdXAtbXVsdGktbGFiZWwnKXtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGRlZmF1bHRDb25kdGlvblN0eWxlLmNvbmNhdChcIiBmYXJyaXMtZ3JvdXAtbXVsdGktbGFiZWxcIik7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBjdXJyZW50SXRlbS5jb250cm9sLmNsYXNzTmFtZTtcclxuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgPyBjbGFzc05hbWUucmVwbGFjZSgnZmFycmlzLWdyb3VwLW11bHRpLWxhYmVsJywnJykgOiAnJzsgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBjbGFzc05hbWUgPyBjbGFzc05hbWUgOiBkZWZhdWx0Q29uZHRpb25TdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25maWdEaWFsb2dDb25maXJtKGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZ0RhdGEgPSBldmVudCBhcyB1bmtub3duIGFzIEFycmF5PHN0cmluZz47XHJcbiAgICAgICAgY29uc3QgcmVDb25maWdDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIGZvcihjb25zdCBkYXRhIG9mIGNvbmZpZ0RhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5maW5kKGNvbmRpdGlvbiA9PiBjb25kaXRpb24uZmllbGRDb2RlID09IGRhdGEpO1xyXG4gICAgICAgICAgICBpZih0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJlQ29uZmlnQ29uZGl0aW9ucy5wdXNoKHRhcmdldCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZUNvbmZpZ0NvbmRpdGlvbnMucHVzaCh0aGlzLmZpZWxkQ29uZmlncy5maW5kKGNvbmRpdGlvbiA9PiBjb25kaXRpb24uZmllbGRDb2RlID09IGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IoY29uc3QgY29uZGl0aW9uIG9mIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYoIWNvbmRpdGlvbi52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZUNvbmZpZ0NvbmRpdGlvbnMucHVzaChjb25kaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSByZUNvbmZpZ0NvbmRpdGlvbnM7XHJcbiAgICAgICAgdGhpcy5maWVsZENvbmRpdGlvbnNDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuRmllbGRDb25maWdEaWFsb2coKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdEaWFsb2cuaW5wdXRTZWxlY3RlZEZpbGVkcyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPyB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zIDogW107XHJcbiAgICAgICAgdGhpcy5jb25maWdEaWFsb2cuZGlhbG9nLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFNlbGVjdGVkQ29uZGl0aW9uVmFsdWVzKGV4Y2VwdFJlcXVpcmVkID0gZmFsc2UpOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zLm1hcChmaWVsZENvbmRpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGlmKGV4Y2VwdFJlcXVpcmVkKXtcclxuICAgICAgICAgICAgICAgIGlmKCFmaWVsZENvbmRpdGlvbi5jb250cm9sLmlzUmVxdWlyZWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRDb25kaXRpb24udmFsdWUuY2xlYXJWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZpZWxkQ29uZGl0aW9uLnZhbHVlLmNsZWFyVmFsdWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkQ29uZGl0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbmRpdGlvbkNoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLmZpZWxkQ29uZGl0aW9uc0NoYW5nZS5lbWl0KHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0U29sdXRpb24gJiYgdGhpcy5zZWxlY3RTb2x1dGlvbi5tb2RlID09PSAnMicpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbmRpdGlvbkNoYW5nZUFkdmFuY2VkKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gZGF0YVxyXG4gICAgICAgIHRoaXMuZmllbGRDb25kaXRpb25zQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgaWYodGhpcy5zZWxlY3RTb2x1dGlvbiAmJiB0aGlzLnNlbGVjdFNvbHV0aW9uLm1vZGUgPT09ICcyJykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnNcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDlvLnlh7rluK7liqnmjqfku7bpnaLmnb/liY3vvIzmm7TmlLljYW5DbGVhclJlbGF0ZWRGaWVsZHPvvIzpgb/lhY3otYvpu5jorqTlgLzlkozluK7liqnlgLzlj5jljJbmuIXnqbrkuKTkuKrnibnmgKfnmoTlhrLnqoFcclxuICAgIGNsZWFyRmllbGRzQ2hhbmdlKGU6IGFueSkge1xyXG4gICAgICAgIGlmKGUgJiYgZVsnY29udHJvbFR5cGUnXSA9PSBDb250cm9sVHlwZS5TbWFydEhlbHAgJiYgZVsnY2FuQ2xlYXJSZWxhdGVkRmllbGRzJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5jYW5DbGVhclJlbGF0ZWRGaWVsZHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25maXJtTGFiZWxGb3JtYXQoY29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+KSB7XHJcbiAgICAgICAgaWYodGhpcy5pc0NvbnRyb2xJbmxpbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbEZvcm1hdCA9ICdmYXJyaXMtZm9ybS1jb250cm9scy1pbmxpbmUnO1xyXG4gICAgICAgICAgICBsZXQgaGFzQ3VzdG9tID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmKGNvbmRpdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpI3pgInmoYZsYWJlbOagh+etvuebruWJjeWcqOahhueahOWPs+S+p++8jOi2heWHuuWuveW6puWQjuS4i+aWueWHuueOsOa7muWKqOadoe+8jOiuoeeul+agh+etvuacgOWkp+mVv+W6puaXtumcgOWwhuWFtuaOkumZpFxyXG4gICAgICAgICAgICAgICAgbGV0IG5vQ2hlY2tCb3hDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbnMuZm9yRWFjaChjb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbmRpdGlvbi5jb250cm9sLmdldENvbnRyb2xUeXBlKCkgIT0gQ29udHJvbFR5cGUuQm9vbENoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vQ2hlY2tCb3hDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY29uZGl0aW9uLmNvbnRyb2xbJ2NsYXNzTmFtZSddJiYgY29uZGl0aW9uLmNvbnRyb2xbJ2NsYXNzTmFtZSddIT0gJ2ZhcnJpcy1ncm91cC1tdWx0aS1sYWJlbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ3VzdG9tID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsRm9ybWF0ICs9IGhhc0N1c3RvbSA/ICcgY29uZGl0aW9uLWlzLWN1c3RvbScgOiAnIGNvbmRpdGlvbi13aXRoLWZpeGVkJzsgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBtYXhMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYobm9DaGVja0JveENvbmRpdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9DaGVja0JveENvbmRpdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoID0gKGl0ZW0uZmllbGROYW1lLmxlbmd0aCA+IG1heExlbmd0aCkgPyAoaXRlbS5maWVsZE5hbWUubGVuZ3RoKSA6IG1heExlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6ZyA6KaB5a6M5pW05pi+56S65o6n5Lu25qCH562+5pe277yM5qC55o2u5qCH562+5pyA5aSn6ZW/5bqm56Gu5a6a5qCH562+5qCP5q+P6KGM5Y+v5pi+56S655qE5a2X56ym5pWwXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnNob3dDb21wbGV0ZUxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobWF4TGVuZ3RoID4gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+agh+etvui2heWHujjkuKrlrZfnrKblkI7vvIzorr7nva7mr4/ooYzmnIDlpJrlj6/mmL7npLoxMOS4quWtl+esplxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYmVsRm9ybWF0ID0gdGhpcy5sYWJlbEZvcm1hdC5jb25jYXQoXCIgZi1mb3JtLWxhYmVsLXhsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKChtYXhMZW5ndGggPCA5KSAmJiAobWF4TGVuZ3RoID4gNikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/moIfnrb7otoXlh7o25Liq5a2X56ym44CB5LiN6LaF6L+HOOS4quWtl+espuaXtu+8jOiuvue9ruavj+ihjOacgOWkmuWPr+aYvuekujjkuKrlrZfnrKZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYWJlbEZvcm1hdCA9IHRoaXMubGFiZWxGb3JtYXQuY29uY2F0KFwiIGYtZm9ybS1sYWJlbC1sZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5sYWJlbEZvcm1hdCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsRm9ybWF0ICsgKHRoaXMuaXNDb250cm9sSW5saW5lJiZ0aGlzLnNob3dDb21wbGV0ZUxhYmVsPycgY29uZGl0aW9uLXdpdGgtY29tcGxldGUnOicnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRTbWFydEhlbHBLZXkodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBwcmVmaXggPSAnJztcclxuICAgICAgICBpZiAobG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoQXJyID0gbG9jYXRpb24uaGFzaC5zcGxpdCgnPycpO1xyXG4gICAgICAgICAgICBwcmVmaXggPSBwYXRoQXJyID8gcGF0aEFyclswXSA6ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhBcnIgID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgcHJlZml4ID0gcGF0aEFyciA/IHBhdGhBcnJbcGF0aEFyci5sZW5ndGggLSAxXSA6ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pZFNlcnZpY2UuZW5jcnlwdChwcmVmaXggKyAnL3F1ZXJ5c29sdXRpb24vJyArIHZhbHVlKTtcclxuICAgIH1cclxufVxyXG4iXX0=