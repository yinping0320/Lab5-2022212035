/**
 * @fileoverview added by tsickle
 * Generated from: lib/querycondition.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewEncapsulation, Input, ComponentFactoryResolver, Injector, Output, EventEmitter, LOCALE_ID, ViewChild, NgZone } from '@angular/core';
import { CommunicationService } from './service/communicationservice';
import { ConvertorService } from './service/convertorservice';
import { ControlType } from './entity/controltype';
import { ConfigDialogComponent } from './fieldconfigdialog/configdialog.component';
import { BsModalService } from '@farris/ui-modal';
import { SolutionService } from './service/solution.service';
import { LocaleService } from '@farris/ui-locale';
import { Subject } from 'rxjs';
import { IdService } from '@farris/ui-common';
var QueryConditionComponent = /** @class */ (function () {
    function QueryConditionComponent(communicationService, convertorService, resolver, injector, modalService, localeService) {
        this.communicationService = communicationService;
        this.convertorService = convertorService;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.localeService = localeService;
        this._resetFieldConfigs = [];
        this.isControlInline = true;
        this.showCompleteLabel = false;
        this.fieldConditionsChange = new EventEmitter();
        //是否启用高级模式，默认为false
        this.openAdvanced = true;
        this.localeIds = {
            'en': 'en',
            'zh-CHS': 'zh-CHS'
        };
        this.controlType = ControlType;
        this.showButton = false;
        this.fieldCodeOfClearFields = [];
        this.canClearRelatedFields = false;
        this.destroy$ = new Subject();
        // 获取ngZone
        this.ngZone = null;
        this.currentLocale = this.injector.get(LOCALE_ID);
        this.solutionService = this.injector.get(SolutionService);
        this.idService = this.injector.get(IdService);
        if (!this.ngZone) {
            this.ngZone = this.injector.get(NgZone, null);
        }
    }
    Object.defineProperty(QueryConditionComponent.prototype, "selectSolution", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectSolution;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._selectSolution = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryConditionComponent.prototype, "resetFieldConfigs", {
        get: /**
         * @return {?}
         */
        function () {
            return this._resetFieldConfigs;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value && value.length > 0) {
                this.solutionService.updateControlConfigState(value);
            }
            this._resetFieldConfigs = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryConditionComponent.prototype, "selectedFieldConditions", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedFieldConditions;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._selectedFieldConditions = value;
        },
        enumerable: true,
        configurable: true
    });
    ;
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.currentLocale === this.localeIds['en']) {
            this.isControlInline = false;
        }
        this.selectedFieldConditions = this.selectedFieldConditions || new Array();
    };
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} currentItem
     * @return {?}
     */
    QueryConditionComponent.prototype.hasSetMultiClass = /**
     * @param {?} currentItem
     * @return {?}
     */
    function (currentItem) {
        if (currentItem.control.className && currentItem.control.className.indexOf('farris-group-multi-label') > -1) {
            return true;
        }
        return false;
    };
    /* */
    /* */
    /**
     * @param {?} currentItem
     * @return {?}
     */
    QueryConditionComponent.prototype.getStyle = /* */
    /**
     * @param {?} currentItem
     * @return {?}
     */
    function (currentItem) {
        /** @type {?} */
        var defaultCondtionStyle = 'col-12 col-md-6 col-xl-3 col-el-2';
        // 设置显示标签全并且显示了折行
        // if(this.showCompleteLabel && currentItem.control.className == 'farris-group-multi-label'){
        //     return defaultCondtionStyle.concat(" farris-group-multi-label");
        // }
        /** @type {?} */
        var className = currentItem.control.className;
        className = className ? className.replace('farris-group-multi-label', '') : '';
        return className ? className : defaultCondtionStyle;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    QueryConditionComponent.prototype.configDialogConfirm = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var e_1, _a, e_2, _b;
        /** @type {?} */
        var configData = (/** @type {?} */ ((/** @type {?} */ (event))));
        /** @type {?} */
        var reConfigConditions = new Array();
        var _loop_1 = function (data) {
            /** @type {?} */
            var target = this_1.selectedFieldConditions.find((/**
             * @param {?} condition
             * @return {?}
             */
            function (condition) { return condition.fieldCode == data; }));
            if (target) {
                reConfigConditions.push(target);
            }
            else {
                reConfigConditions.push(this_1.fieldConfigs.find((/**
                 * @param {?} condition
                 * @return {?}
                 */
                function (condition) { return condition.fieldCode == data; })));
            }
        };
        var this_1 = this;
        try {
            for (var configData_1 = tslib_1.__values(configData), configData_1_1 = configData_1.next(); !configData_1_1.done; configData_1_1 = configData_1.next()) {
                var data = configData_1_1.value;
                _loop_1(data);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (configData_1_1 && !configData_1_1.done && (_a = configData_1.return)) _a.call(configData_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        try {
            for (var _c = tslib_1.__values(this.selectedFieldConditions), _d = _c.next(); !_d.done; _d = _c.next()) {
                var condition = _d.value;
                if (!condition.visible) {
                    reConfigConditions.push(condition);
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.selectedFieldConditions = reConfigConditions;
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
    };
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.openFieldConfigDialog = /**
     * @return {?}
     */
    function () {
        this.configDialog.inputSelectedFileds = this.selectedFieldConditions ? this.selectedFieldConditions : [];
        this.configDialog.dialog.show();
    };
    /**
     * @param {?=} exceptRequired
     * @return {?}
     */
    QueryConditionComponent.prototype.resetSelectedConditionValues = /**
     * @param {?=} exceptRequired
     * @return {?}
     */
    function (exceptRequired) {
        if (exceptRequired === void 0) { exceptRequired = false; }
        return this.selectedFieldConditions.map((/**
         * @param {?} fieldCondition
         * @return {?}
         */
        function (fieldCondition) {
            if (exceptRequired) {
                if (!fieldCondition.control.isRequired()) {
                    fieldCondition.value.clearValue();
                }
            }
            else {
                fieldCondition.value.clearValue();
            }
            return fieldCondition;
        }));
    };
    /**
     * @return {?}
     */
    QueryConditionComponent.prototype.conditionChange = /**
     * @return {?}
     */
    function () {
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
        if (this.selectSolution && this.selectSolution.mode === '2') {
            this.selectSolution.queryConditions = this.selectedFieldConditions;
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    QueryConditionComponent.prototype.conditionChangeAdvanced = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.selectedFieldConditions = data;
        this.fieldConditionsChange.emit(this.selectedFieldConditions);
        if (this.selectSolution && this.selectSolution.mode === '2') {
            this.selectSolution.queryConditions = this.selectedFieldConditions;
        }
    };
    // 弹出帮助控件面板前，更改canClearRelatedFields，避免赋默认值和帮助值变化清空两个特性的冲突
    // 弹出帮助控件面板前，更改canClearRelatedFields，避免赋默认值和帮助值变化清空两个特性的冲突
    /**
     * @param {?} e
     * @return {?}
     */
    QueryConditionComponent.prototype.clearFieldsChange = 
    // 弹出帮助控件面板前，更改canClearRelatedFields，避免赋默认值和帮助值变化清空两个特性的冲突
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (e && e['controlType'] == ControlType.SmartHelp && e['canClearRelatedFields']) {
            this.canClearRelatedFields = true;
        }
    };
    /**
     * @param {?} conditions
     * @return {?}
     */
    QueryConditionComponent.prototype.confirmLabelFormat = /**
     * @param {?} conditions
     * @return {?}
     */
    function (conditions) {
        if (this.isControlInline) {
            this.labelFormat = 'farris-form-controls-inline';
            /** @type {?} */
            var hasCustom_1 = false;
            if (conditions.length) {
                // 复选框label标签目前在框的右侧，超出宽度后下方出现滚动条，计算标签最大长度时需将其排除
                /** @type {?} */
                var noCheckBoxConditions_1 = [];
                conditions.forEach((/**
                 * @param {?} condition
                 * @return {?}
                 */
                function (condition) {
                    if (condition.control.getControlType() != ControlType.BoolCheck) {
                        noCheckBoxConditions_1.push(condition);
                    }
                    if (condition.control['className'] && condition.control['className'] != 'farris-group-multi-label') {
                        hasCustom_1 = true;
                    }
                }));
                this.labelFormat += hasCustom_1 ? ' condition-is-custom' : ' condition-with-fixed';
                /** @type {?} */
                var maxLength_1 = 0;
                if (noCheckBoxConditions_1.length) {
                    noCheckBoxConditions_1.forEach((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) {
                        maxLength_1 = (item.fieldName.length > maxLength_1) ? (item.fieldName.length) : maxLength_1;
                    }));
                }
                //需要完整显示控件标签时，根据标签最大长度确定标签栏每行可显示的字符数
                if (this.showCompleteLabel) {
                    if (maxLength_1 > 8) {
                        //标签超出8个字符后，设置每行最多可显示10个字符
                        this.labelFormat = this.labelFormat.concat(" f-form-label-xl");
                    }
                    else if ((maxLength_1 < 9) && (maxLength_1 > 6)) {
                        //标签超出6个字符、不超过8个字符时，设置每行最多可显示8个字符
                        this.labelFormat = this.labelFormat.concat(" f-form-label-lg");
                    }
                }
            }
        }
        if (this.labelFormat) {
            return this.labelFormat + (this.isControlInline && this.showCompleteLabel ? ' condition-with-complete' : '');
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    QueryConditionComponent.prototype.buildSmartHelpKey = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var prefix = '';
        if (location.hash) {
            /** @type {?} */
            var pathArr = location.hash.split('?');
            prefix = pathArr ? pathArr[0] : '';
        }
        else {
            /** @type {?} */
            var pathArr = location.pathname.split('/');
            prefix = pathArr ? pathArr[pathArr.length - 1] : '';
        }
        return this.idService.encrypt(prefix + '/querysolution/' + value);
    };
    QueryConditionComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-querycondition',
                    template: "<div  *ngIf=\"!selectSolution || selectSolution.mode !== '2'\" class=\"row f-utils-flex-row-wrap farris-form {{confirmLabelFormat(selectedFieldConditions)}} condition-div\"  id=\"querycondition\" #queryConditionWrap>\r\n    <ng-container *ngFor=\"let currentItem of selectedFieldConditions;let i=index;\">\r\n        <app-solution-input  \r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.Text && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-input>\r\n\r\n        <app-solution-inputgroup\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.InputGroup && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-inputgroup>\r\n        \r\n        <app-solution-dropdownlist\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DropDownList && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-dropdownlist>\r\n        \r\n        <app-solution-smarthelp\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            (clearFieldsChange)=\"clearFieldsChange($event)\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SmartHelp && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [instanceId]=\"buildSmartHelpKey(selectedFieldConditions[i].fieldCode)\">\r\n        </app-solution-smarthelp>\r\n        \r\n        <app-solution-single-number\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleNumber && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-single-number>\r\n\r\n        <app-solution-numberrange\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.NumberRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-numberrange>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleDate && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DateRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleYear && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleMonth && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.MonthRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.SingleDateTime && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n        \r\n        <app-solution-datepicker\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.DateTimeRange && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\"\r\n            [controlType]=\"currentItem.control.getControlType()\">\r\n        </app-solution-datepicker>\r\n\r\n        <app-solution-combolookup\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.ComboLookUp && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-combolookup>\r\n\r\n        <app-solution-checkbox\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.BoolCheck && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-checkbox>\r\n\r\n        <app-solution-radio\r\n            [ngClass]=\"getStyle(currentItem)\"\r\n            [label-text-multi]=\"hasSetMultiClass(currentItem)\"\r\n            [changeFields]=\"fieldCodeOfClearFields\"\r\n            (conditionChange)=\"conditionChange()\"\r\n            *ngIf=\"currentItem.control.getControlType() == controlType.Radio && currentItem.visible\"\r\n            [(item)]=\"selectedFieldConditions[i]\">\r\n        </app-solution-radio>\r\n    </ng-container>\r\n</div>\r\n\r\n<div *ngIf=\"selectSolution && selectSolution.mode === '2'\">\r\n    <querycondition-advanced\r\n    [fieldConfig]=\"unformatFieldConfigs\" \r\n    [selectSolution]=\"selectSolution\"\r\n    (conditionChange)=\"conditionChangeAdvanced($event)\"></querycondition-advanced>\r\n</div>\r\n<app-queryconfigdialog \r\n    #configDialog \r\n    [inputSelectedFileds]=\"selectedFieldConditions\" \r\n    [filedsDataSource]=\"fieldConfigs\"\r\n    (confirmEmitter)=\"configDialogConfirm($event)\">\r\n</app-queryconfigdialog>",
                    encapsulation: ViewEncapsulation.None,
                    providers: [CommunicationService],
                    styles: [".condition-div{min-height:30px}.f-solution-radio-group .farris-checkradio-hor{flex-wrap:nowrap;overflow-x:auto}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar{width:6px;height:6px;background-color:#eee}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-track{border-radius:0}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.15);-webkit-transition:.2s;transition:.2s;border-radius:6px}.f-solution-radio-group .farris-checkradio-hor::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,.45)}.f-solution-radio-group .farris-checkradio-hor .custom-radio{flex-shrink:0}.split-date-range{width:100%;display:-webkit-box;display:flex}"]
                }] }
    ];
    /** @nocollapse */
    QueryConditionComponent.ctorParameters = function () { return [
        { type: CommunicationService },
        { type: ConvertorService },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: LocaleService }
    ]; };
    QueryConditionComponent.propDecorators = {
        selectSolution: [{ type: Input }],
        fieldConfigs: [{ type: Input }],
        unformatFieldConfigs: [{ type: Input }],
        resetFieldConfigs: [{ type: Input }],
        isControlInline: [{ type: Input }],
        selectedFieldConditions: [{ type: Input }],
        showCompleteLabel: [{ type: Input }],
        isDisabled: [{ type: Input }],
        fieldConditionsChange: [{ type: Output }],
        configDialog: [{ type: ViewChild, args: ['configDialog',] }],
        openAdvanced: [{ type: Input }],
        queryConditionWrapEl: [{ type: ViewChild, args: ["queryConditionWrap",] }]
    };
    return QueryConditionComponent;
}());
export { QueryConditionComponent };
if (false) {
    /** @type {?} */
    QueryConditionComponent.prototype._selectSolution;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldConfigs;
    /** @type {?} */
    QueryConditionComponent.prototype.unformatFieldConfigs;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype._resetFieldConfigs;
    /** @type {?} */
    QueryConditionComponent.prototype.isControlInline;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype._selectedFieldConditions;
    /** @type {?} */
    QueryConditionComponent.prototype.showCompleteLabel;
    /** @type {?} */
    QueryConditionComponent.prototype.isDisabled;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldConditionsChange;
    /** @type {?} */
    QueryConditionComponent.prototype.configDialog;
    /** @type {?} */
    QueryConditionComponent.prototype.openAdvanced;
    /** @type {?} */
    QueryConditionComponent.prototype.localeIds;
    /** @type {?} */
    QueryConditionComponent.prototype.currentLocale;
    /** @type {?} */
    QueryConditionComponent.prototype.solutionService;
    /** @type {?} */
    QueryConditionComponent.prototype.controlType;
    /** @type {?} */
    QueryConditionComponent.prototype.labelFormat;
    /** @type {?} */
    QueryConditionComponent.prototype.showButton;
    /** @type {?} */
    QueryConditionComponent.prototype.fieldCodeOfClearFields;
    /** @type {?} */
    QueryConditionComponent.prototype.canClearRelatedFields;
    /** @type {?} */
    QueryConditionComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.idService;
    /** @type {?} */
    QueryConditionComponent.prototype.queryConditionWrapEl;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.ngZone;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.communicationService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.convertorService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    QueryConditionComponent.prototype.localeService;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnljb25kaXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy9jb21wb25lbnQtcXVlcnljb25kaXRpb24vIiwic291cmNlcyI6WyJsaWIvcXVlcnljb25kaXRpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLHdCQUF3QixFQUFFLFFBQVEsRUFDNUUsTUFBTSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUF1QyxNQUFNLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBRWxJLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzlELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUNuRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQy9CLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUc5QztJQTJFSSxpQ0FDWSxvQkFBMEMsRUFDMUMsZ0JBQWtDLEVBQ2xDLFFBQWtDLEVBQ2xDLFFBQWtCLEVBQ2xCLFlBQTRCLEVBQzVCLGFBQTRCO1FBTDVCLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxhQUFRLEdBQVIs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RSxDQUFDLG9CQUFvQixDQUFDOztpQkFDcEM7Ozs7Z0JBakJRLG9CQUFvQjtnQkFDcEIsZ0JBQWdCO2dCQUpxQix3QkFBd0I7Z0JBQUUsUUFBUTtnQkFPdkUsY0FBYztnQkFFZCxhQUFhOzs7aUNBZWpCLEtBQUs7K0JBTUwsS0FBSzt1Q0FDTCxLQUFLO29DQUVMLEtBQUs7a0NBVUwsS0FBSzswQ0FFTCxLQUFLO29DQVFMLEtBQUs7NkJBRUwsS0FBSzt3Q0FFTCxNQUFNOytCQUVOLFNBQVMsU0FBQyxjQUFjOytCQUd4QixLQUFLO3VDQXdCTCxTQUFTLFNBQUMsb0JBQW9COztJQXdLbkMsOEJBQUM7Q0FBQSxBQWhQRCxJQWdQQztTQXpPWSx1QkFBdUI7OztJQUVoQyxrREFBZ0M7O0lBT2hDLCtDQUE2Qzs7SUFDN0MsdURBQTBDOzs7OztJQUMxQyxxREFBZ0M7O0lBV2hDLGtEQUF5Qzs7Ozs7SUFDekMsMkRBQXVEOztJQVN2RCxvREFBNEM7O0lBRTVDLDZDQUE2Qjs7SUFFN0Isd0RBQTZFOztJQUU3RSwrQ0FBK0Q7O0lBRy9ELCtDQUFzQzs7SUFFdEMsNENBR0M7O0lBQ0QsZ0RBQXNCOztJQUV0QixrREFBaUM7O0lBRWpDLDhDQUEwQjs7SUFFMUIsOENBQW9COztJQUVwQiw2Q0FBNEI7O0lBRTVCLHlEQUEyQzs7SUFFM0Msd0RBQXVDOztJQUV2QywyQ0FBNEM7Ozs7O0lBRTVDLDRDQUE2Qjs7SUFFN0IsdURBQXNEOzs7OztJQUV0RCx5Q0FBc0I7Ozs7O0lBRWxCLHVEQUFrRDs7Ozs7SUFDbEQsbURBQTBDOzs7OztJQUMxQywyQ0FBMEM7Ozs7O0lBQzFDLDJDQUEwQjs7Ozs7SUFDMUIsK0NBQW9DOzs7OztJQUNwQyxnREFBb0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uLCBJbnB1dCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeSxcclxuICAgIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBMT0NBTEVfSUQsIFZpZXdDaGlsZCwgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0NoZWNrZWQsIE5nWm9uZSwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBRdWVyeUNvbmRpdGlvbiB9IGZyb20gJy4vZW50aXR5L3F1ZXJ5Y29uZGl0aW9uJztcclxuaW1wb3J0IHsgQ29tbXVuaWNhdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvY29tbXVuaWNhdGlvbnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb252ZXJ0b3JTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL2NvbnZlcnRvcnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb250cm9sVHlwZSB9IGZyb20gJy4vZW50aXR5L2NvbnRyb2x0eXBlJztcclxuaW1wb3J0IHsgQ29uZmlnRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi9maWVsZGNvbmZpZ2RpYWxvZy9jb25maWdkaWFsb2cuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgU29sdXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL3NvbHV0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IElkU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHtRdWVyeVNvbHV0aW9uVm99IGZyb20gJy4vZW50aXR5L3F1ZXJ5c29sdXRpb252bydcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtcXVlcnljb25kaXRpb24nLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3F1ZXJ5Y29uZGl0aW9uLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL3F1ZXJ5Y29uZGl0aW9uLmNvbXBvbmVudC5jc3MnXSxcclxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgICBwcm92aWRlcnM6IFtDb21tdW5pY2F0aW9uU2VydmljZV1cclxufSlcclxuZXhwb3J0IGNsYXNzIFF1ZXJ5Q29uZGl0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3ksIEFmdGVyVmlld0NoZWNrZWQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICAgIF9zZWxlY3RTb2x1dGlvbjogUXVlcnlTb2x1dGlvblZvXHJcbiAgICBASW5wdXQoKSBnZXQgc2VsZWN0U29sdXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdFNvbHV0aW9uXHJcbiAgICB9XHJcbiAgICBzZXQgc2VsZWN0U29sdXRpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RTb2x1dGlvbiA9IHZhbHVlXHJcbiAgICB9XHJcbiAgICBASW5wdXQoKSBmaWVsZENvbmZpZ3M6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPjtcclxuICAgIEBJbnB1dCgpIHVuZm9ybWF0RmllbGRDb25maWdzOiBBcnJheTxhbnk+O1xyXG4gICAgcHJpdmF0ZSBfcmVzZXRGaWVsZENvbmZpZ3MgPSBbXTtcclxuICAgIEBJbnB1dCgpIFxyXG4gICAgc2V0IHJlc2V0RmllbGRDb25maWdzKHZhbHVlOiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgaWYodmFsdWUgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS51cGRhdGVDb250cm9sQ29uZmlnU3RhdGUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZXNldEZpZWxkQ29uZmlncyA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlc2V0RmllbGRDb25maWdzKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc2V0RmllbGRDb25maWdzO1xyXG4gICAgfVxyXG4gICAgQElucHV0KCkgaXNDb250cm9sSW5saW5lOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX3NlbGVjdGVkRmllbGRDb25kaXRpb25zOkFycmF5PFF1ZXJ5Q29uZGl0aW9uPjtcclxuICAgIEBJbnB1dCgpIFxyXG4gICAgc2V0IHNlbGVjdGVkRmllbGRDb25kaXRpb25zKHZhbHVlOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4pIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNlbGVjdGVkRmllbGRDb25kaXRpb25zKCk6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgfTtcclxuXHJcbiAgICBASW5wdXQoKSBzaG93Q29tcGxldGVMYWJlbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIEBJbnB1dCgpIGlzRGlzYWJsZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgQE91dHB1dCgpIGZpZWxkQ29uZGl0aW9uc0NoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdjb25maWdEaWFsb2cnKSBjb25maWdEaWFsb2c6IENvbmZpZ0RpYWxvZ0NvbXBvbmVudDtcclxuXHJcbiAgICAvL+aYr+WQpuWQr+eUqOmrmOe6p+aooeW8j++8jOm7mOiupOS4umZhbHNlXHJcbiAgICBASW5wdXQoKSBvcGVuQWR2YW5jZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIGxvY2FsZUlkcyA9IHtcclxuICAgICAgICAnZW4nOiAnZW4nLFxyXG4gICAgICAgICd6aC1DSFMnOiAnemgtQ0hTJ1xyXG4gICAgfVxyXG4gICAgY3VycmVudExvY2FsZTogc3RyaW5nO1xyXG4gICAgXHJcbiAgICBzb2x1dGlvblNlcnZpY2U6IFNvbHV0aW9uU2VydmljZTtcclxuICAgIFxyXG4gICAgY29udHJvbFR5cGUgPSBDb250cm9sVHlwZTtcclxuICAgIFxyXG4gICAgbGFiZWxGb3JtYXQ6IHN0cmluZztcclxuXHJcbiAgICBzaG93QnV0dG9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgZmllbGRDb2RlT2ZDbGVhckZpZWxkczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cclxuICAgIGNhbkNsZWFyUmVsYXRlZEZpZWxkczogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGRlc3Ryb3kkOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcblxyXG4gICAgcHJpdmF0ZSBpZFNlcnZpY2U6IElkU2VydmljZTtcclxuICAgIFxyXG4gICAgQFZpZXdDaGlsZChcInF1ZXJ5Q29uZGl0aW9uV3JhcFwiKSBxdWVyeUNvbmRpdGlvbldyYXBFbDtcclxuICAgIC8vIOiOt+WPlm5nWm9uZVxyXG4gICAgcHJpdmF0ZSBuZ1pvbmUgPSBudWxsO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBjb21tdW5pY2F0aW9uU2VydmljZTogQ29tbXVuaWNhdGlvblNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjb252ZXJ0b3JTZXJ2aWNlOiBDb252ZXJ0b3JTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgICAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRMb2NhbGUgPSB0aGlzLmluamVjdG9yLmdldChMT0NBTEVfSUQpO1xyXG4gICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoU29sdXRpb25TZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmlkU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0KElkU2VydmljZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm5nWm9uZSkgeyAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5uZ1pvbmUgPSB0aGlzLmluamVjdG9yLmdldDxOZ1pvbmU+KE5nWm9uZSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRMb2NhbGUgPT09IHRoaXMubG9jYWxlSWRzWydlbiddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDb250cm9sSW5saW5lID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zIHx8IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdDaGVja2VkKCk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGhhc1NldE11bHRpQ2xhc3MoY3VycmVudEl0ZW06IGFueSk6Ym9vbGVhbntcclxuICAgICAgICBpZihjdXJyZW50SXRlbS5jb250cm9sLmNsYXNzTmFtZSYmY3VycmVudEl0ZW0uY29udHJvbC5jbGFzc05hbWUuaW5kZXhPZignZmFycmlzLWdyb3VwLW11bHRpLWxhYmVsJyk+LTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyogKi9cclxuICAgIGdldFN0eWxlKGN1cnJlbnRJdGVtOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb25kdGlvblN0eWxlID0gJ2NvbC0xMiBjb2wtbWQtNiBjb2wteGwtMyBjb2wtZWwtMic7XHJcbiAgICAgICAgLy8g6K6+572u5pi+56S65qCH562+5YWo5bm25LiU5pi+56S65LqG5oqY6KGMXHJcbiAgICAgICAgLy8gaWYodGhpcy5zaG93Q29tcGxldGVMYWJlbCAmJiBjdXJyZW50SXRlbS5jb250cm9sLmNsYXNzTmFtZSA9PSAnZmFycmlzLWdyb3VwLW11bHRpLWxhYmVsJyl7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBkZWZhdWx0Q29uZHRpb25TdHlsZS5jb25jYXQoXCIgZmFycmlzLWdyb3VwLW11bHRpLWxhYmVsXCIpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBsZXQgY2xhc3NOYW1lID0gY3VycmVudEl0ZW0uY29udHJvbC5jbGFzc05hbWU7XHJcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lID8gY2xhc3NOYW1lLnJlcGxhY2UoJ2ZhcnJpcy1ncm91cC1tdWx0aS1sYWJlbCcsJycpIDogJyc7ICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lID8gY2xhc3NOYW1lIDogZGVmYXVsdENvbmR0aW9uU3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uZmlnRGlhbG9nQ29uZmlybShldmVudDogRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBjb25maWdEYXRhID0gZXZlbnQgYXMgdW5rbm93biBhcyBBcnJheTxzdHJpbmc+O1xyXG4gICAgICAgIGNvbnN0IHJlQ29uZmlnQ29uZGl0aW9ucyA9IG5ldyBBcnJheTxRdWVyeUNvbmRpdGlvbj4oKTtcclxuICAgICAgICBmb3IoY29uc3QgZGF0YSBvZiBjb25maWdEYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMuZmluZChjb25kaXRpb24gPT4gY29uZGl0aW9uLmZpZWxkQ29kZSA9PSBkYXRhKTtcclxuICAgICAgICAgICAgaWYodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZUNvbmZpZ0NvbmRpdGlvbnMucHVzaCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVDb25maWdDb25kaXRpb25zLnB1c2godGhpcy5maWVsZENvbmZpZ3MuZmluZChjb25kaXRpb24gPT4gY29uZGl0aW9uLmZpZWxkQ29kZSA9PSBkYXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGNvbnN0IGNvbmRpdGlvbiBvZiB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmKCFjb25kaXRpb24udmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmVDb25maWdDb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gcmVDb25maWdDb25kaXRpb25zO1xyXG4gICAgICAgIHRoaXMuZmllbGRDb25kaXRpb25zQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkZpZWxkQ29uZmlnRGlhbG9nKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnRGlhbG9nLmlucHV0U2VsZWN0ZWRGaWxlZHMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID8gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA6IFtdO1xyXG4gICAgICAgIHRoaXMuY29uZmlnRGlhbG9nLmRpYWxvZy5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRTZWxlY3RlZENvbmRpdGlvblZhbHVlcyhleGNlcHRSZXF1aXJlZCA9IGZhbHNlKTogQXJyYXk8UXVlcnlDb25kaXRpb24+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5tYXAoZmllbGRDb25kaXRpb24gPT4ge1xyXG4gICAgICAgICAgICBpZihleGNlcHRSZXF1aXJlZCl7XHJcbiAgICAgICAgICAgICAgICBpZighZmllbGRDb25kaXRpb24uY29udHJvbC5pc1JlcXVpcmVkKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkQ29uZGl0aW9uLnZhbHVlLmNsZWFyVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmaWVsZENvbmRpdGlvbi52YWx1ZS5jbGVhclZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBmaWVsZENvbmRpdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25kaXRpb25DaGFuZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZENvbmRpdGlvbnNDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zKTtcclxuICAgICAgICBpZih0aGlzLnNlbGVjdFNvbHV0aW9uICYmIHRoaXMuc2VsZWN0U29sdXRpb24ubW9kZSA9PT0gJzInKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0U29sdXRpb24ucXVlcnlDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9uc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25kaXRpb25DaGFuZ2VBZHZhbmNlZChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IGRhdGFcclxuICAgICAgICB0aGlzLmZpZWxkQ29uZGl0aW9uc0NoYW5nZS5lbWl0KHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0U29sdXRpb24gJiYgdGhpcy5zZWxlY3RTb2x1dGlvbi5tb2RlID09PSAnMicpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8g5by55Ye65biu5Yqp5o6n5Lu26Z2i5p2/5YmN77yM5pu05pS5Y2FuQ2xlYXJSZWxhdGVkRmllbGRz77yM6YG/5YWN6LWL6buY6K6k5YC85ZKM5biu5Yqp5YC85Y+Y5YyW5riF56m65Lik5Liq54m55oCn55qE5Yay56qBXHJcbiAgICBjbGVhckZpZWxkc0NoYW5nZShlOiBhbnkpIHtcclxuICAgICAgICBpZihlICYmIGVbJ2NvbnRyb2xUeXBlJ10gPT0gQ29udHJvbFR5cGUuU21hcnRIZWxwICYmIGVbJ2NhbkNsZWFyUmVsYXRlZEZpZWxkcyddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuQ2xlYXJSZWxhdGVkRmllbGRzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uZmlybUxhYmVsRm9ybWF0KGNvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPikge1xyXG4gICAgICAgIGlmKHRoaXMuaXNDb250cm9sSW5saW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxGb3JtYXQgPSAnZmFycmlzLWZvcm0tY29udHJvbHMtaW5saW5lJztcclxuICAgICAgICAgICAgbGV0IGhhc0N1c3RvbSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZihjb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8g5aSN6YCJ5qGGbGFiZWzmoIfnrb7nm67liY3lnKjmoYbnmoTlj7PkvqfvvIzotoXlh7rlrr3luqblkI7kuIvmlrnlh7rnjrDmu5rliqjmnaHvvIzorqHnrpfmoIfnrb7mnIDlpKfplb/luqbml7bpnIDlsIblhbbmjpLpmaRcclxuICAgICAgICAgICAgICAgIGxldCBub0NoZWNrQm94Q29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25zLmZvckVhY2goY29uZGl0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpICE9IENvbnRyb2xUeXBlLkJvb2xDaGVjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub0NoZWNrQm94Q29uZGl0aW9ucy5wdXNoKGNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbmRpdGlvbi5jb250cm9sWydjbGFzc05hbWUnXSYmIGNvbmRpdGlvbi5jb250cm9sWydjbGFzc05hbWUnXSE9ICdmYXJyaXMtZ3JvdXAtbXVsdGktbGFiZWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0N1c3RvbSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbEZvcm1hdCArPSBoYXNDdXN0b20gPyAnIGNvbmRpdGlvbi1pcy1jdXN0b20nIDogJyBjb25kaXRpb24td2l0aC1maXhlZCc7ICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4TGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGlmKG5vQ2hlY2tCb3hDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vQ2hlY2tCb3hDb25kaXRpb25zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aCA9IChpdGVtLmZpZWxkTmFtZS5sZW5ndGggPiBtYXhMZW5ndGgpID8gKGl0ZW0uZmllbGROYW1lLmxlbmd0aCkgOiBtYXhMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+mcgOimgeWujOaVtOaYvuekuuaOp+S7tuagh+etvuaXtu+8jOagueaNruagh+etvuacgOWkp+mVv+W6puehruWumuagh+etvuagj+avj+ihjOWPr+aYvuekuueahOWtl+espuaVsFxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zaG93Q29tcGxldGVMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1heExlbmd0aCA+IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/moIfnrb7otoXlh7o45Liq5a2X56ym5ZCO77yM6K6+572u5q+P6KGM5pyA5aSa5Y+v5pi+56S6MTDkuKrlrZfnrKZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYWJlbEZvcm1hdCA9IHRoaXMubGFiZWxGb3JtYXQuY29uY2F0KFwiIGYtZm9ybS1sYWJlbC14bFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZigobWF4TGVuZ3RoIDwgOSkgJiYgKG1heExlbmd0aCA+IDYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5qCH562+6LaF5Ye6NuS4quWtl+espuOAgeS4jei2hei/hzjkuKrlrZfnrKbml7bvvIzorr7nva7mr4/ooYzmnIDlpJrlj6/mmL7npLo45Liq5a2X56ymXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiZWxGb3JtYXQgPSB0aGlzLmxhYmVsRm9ybWF0LmNvbmNhdChcIiBmLWZvcm0tbGFiZWwtbGdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMubGFiZWxGb3JtYXQpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYWJlbEZvcm1hdCArICh0aGlzLmlzQ29udHJvbElubGluZSYmdGhpcy5zaG93Q29tcGxldGVMYWJlbD8nIGNvbmRpdGlvbi13aXRoLWNvbXBsZXRlJzonJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkU21hcnRIZWxwS2V5KHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcHJlZml4ID0gJyc7XHJcbiAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2gpIHtcclxuICAgICAgICAgICAgY29uc3QgcGF0aEFyciA9IGxvY2F0aW9uLmhhc2guc3BsaXQoJz8nKTtcclxuICAgICAgICAgICAgcHJlZml4ID0gcGF0aEFyciA/IHBhdGhBcnJbMF0gOiAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoQXJyICA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgIHByZWZpeCA9IHBhdGhBcnIgPyBwYXRoQXJyW3BhdGhBcnIubGVuZ3RoIC0gMV0gOiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRTZXJ2aWNlLmVuY3J5cHQocHJlZml4ICsgJy9xdWVyeXNvbHV0aW9uLycgKyB2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuIl19