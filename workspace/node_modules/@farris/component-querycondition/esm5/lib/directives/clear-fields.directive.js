/**
 * @fileoverview added by tsickle
 * Generated from: lib/directives/clear-fields.directive.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, Optional, Self, Injector } from '@angular/core';
import { NgControl } from '@angular/forms';
import { QueryConditionComponent } from '../querycondition.component';
var ClearFieldsDirective = /** @class */ (function () {
    function ClearFieldsDirective(ngCtrl, qcc, inject) {
        this.ngCtrl = ngCtrl;
        this.qcc = qcc;
        this.inject = inject;
        this.clearFields = '';
    }
    /**
     * @return {?}
     */
    ClearFieldsDirective.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        //弹出帮助组件指定调用了父附件QueryConditionComponent，单独使用时无父组件
        if (!this.qcc)
            return;
        if (this.clearFields && this.ngCtrl) {
            this.ngCtrl.valueChanges.subscribe((/**
             * @param {?} v
             * @return {?}
             */
            function (v) {
                if (_this.qcc.canClearRelatedFields) {
                    _this.qcc.fieldCodeOfClearFields = [];
                    _this.clearFields.split(',').forEach((/**
                     * @param {?} n
                     * @return {?}
                     */
                    function (n) {
                        /** @type {?} */
                        var visibleConditions = _this.qcc.selectedFieldConditions.filter((/**
                         * @param {?} condition
                         * @return {?}
                         */
                        function (condition) { return !!condition.visible; }));
                        /** @type {?} */
                        var conditionItem = visibleConditions.find((/**
                         * @param {?} c
                         * @return {?}
                         */
                        function (c) { return c.fieldCode === n; }));
                        if (conditionItem) {
                            _this.qcc.fieldCodeOfClearFields.push(n);
                            conditionItem.value.clearValue();
                        }
                    }));
                }
            }));
        }
    };
    ClearFieldsDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[clear-fields]'
                },] }
    ];
    /** @nocollapse */
    ClearFieldsDirective.ctorParameters = function () { return [
        { type: NgControl, decorators: [{ type: Optional }, { type: Self }] },
        { type: QueryConditionComponent, decorators: [{ type: Optional }] },
        { type: Injector }
    ]; };
    ClearFieldsDirective.propDecorators = {
        clearFields: [{ type: Input, args: ['clear-fields',] }]
    };
    return ClearFieldsDirective;
}());
export { ClearFieldsDirective };
if (false) {
    /** @type {?} */
    ClearFieldsDirective.prototype.clearFields;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.ngCtrl;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.qcc;
    /**
     * @type {?}
     * @private
     */
    ClearFieldsDirective.prototype.inject;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xlYXItZmllbGRzLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmYXJyaXMvY29tcG9uZW50LXF1ZXJ5Y29uZGl0aW9uLyIsInNvdXJjZXMiOlsibGliL2RpcmVjdGl2ZXMvY2xlYXItZmllbGRzLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25GLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUV0RTtJQU1JLDhCQUF3QyxNQUFpQixFQUFzQixHQUE0QixFQUFVLE1BQWdCO1FBQTdGLFdBQU0sR0FBTixNQUFNLENBQVc7UUFBc0IsUUFBRyxHQUFILEdBQUcsQ0FBeUI7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFVO1FBRjlHLGdCQUFXLEdBQUcsRUFBRSxDQUFDO0lBRWdHLENBQUM7Ozs7SUFFekksdUNBQVE7OztJQUFSO1FBQUEsaUJBa0JDO1FBakJHLGlEQUFpRDtRQUNqRCxJQUFHLENBQUMsSUFBSSxDQUFDLEdBQUc7WUFBRSxPQUFNO1FBQ3BCLElBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVM7Ozs7WUFBRSxVQUFDLENBQUM7Z0JBQ2xDLElBQUcsS0FBSSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRTtvQkFDL0IsS0FBSSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsR0FBRyxFQUFFLENBQUM7b0JBQ3JDLEtBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU87Ozs7b0JBQUMsVUFBQSxDQUFDOzs0QkFDM0IsaUJBQWlCLEdBQUcsS0FBSSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNOzs7O3dCQUFDLFVBQUEsU0FBUyxJQUFLLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUEsQ0FBQSxDQUFDLEVBQUM7OzRCQUN0RyxhQUFhLEdBQUcsaUJBQWlCLENBQUMsSUFBSTs7Ozt3QkFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxTQUFTLEtBQUssQ0FBQyxFQUFqQixDQUFpQixFQUFDO3dCQUNwRSxJQUFJLGFBQWEsRUFBRTs0QkFDZixLQUFJLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDeEMsYUFBYSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQzt5QkFDcEM7b0JBQ0wsQ0FBQyxFQUFDLENBQUM7aUJBQ047WUFDTCxDQUFDLEVBQUMsQ0FBQztTQUNOO0lBQ0wsQ0FBQzs7Z0JBMUJKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsZ0JBQWdCO2lCQUM3Qjs7OztnQkFMUSxTQUFTLHVCQVNELFFBQVEsWUFBSSxJQUFJO2dCQVJ4Qix1QkFBdUIsdUJBUWdDLFFBQVE7Z0JBVnJCLFFBQVE7Ozs4QkFRdEQsS0FBSyxTQUFDLGNBQWM7O0lBdUJ6QiwyQkFBQztDQUFBLEFBM0JELElBMkJDO1NBeEJZLG9CQUFvQjs7O0lBQzdCLDJDQUF3Qzs7Ozs7SUFFNUIsc0NBQTZDOzs7OztJQUFFLG1DQUFnRDs7Ozs7SUFBRSxzQ0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBPbkluaXQsIE9wdGlvbmFsLCBTZWxmLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOZ0NvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi4vcXVlcnljb25kaXRpb24uY29tcG9uZW50JztcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6ICdbY2xlYXItZmllbGRzXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIENsZWFyRmllbGRzRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHsgXHJcbiAgICBASW5wdXQoJ2NsZWFyLWZpZWxkcycpIGNsZWFyRmllbGRzID0gJyc7XHJcbiAgIFxyXG4gICAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNlbGYoKSBwcml2YXRlIG5nQ3RybDogTmdDb250cm9sLCBAT3B0aW9uYWwoKSBwcml2YXRlIHFjYzogUXVlcnlDb25kaXRpb25Db21wb25lbnQsIHByaXZhdGUgaW5qZWN0OiBJbmplY3Rvcikge30gXHJcblxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgLy/lvLnlh7rluK7liqnnu4Tku7bmjIflrprosIPnlKjkuobniLbpmYTku7ZRdWVyeUNvbmRpdGlvbkNvbXBvbmVudO+8jOWNleeLrOS9v+eUqOaXtuaXoOeItue7hOS7tlxyXG4gICAgICAgIGlmKCF0aGlzLnFjYykgcmV0dXJuXHJcbiAgICAgICAgaWYodGhpcy5jbGVhckZpZWxkcyAmJiB0aGlzLm5nQ3RybCkge1xyXG4gICAgICAgICAgICB0aGlzLm5nQ3RybC52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKCAodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5xY2MuY2FuQ2xlYXJSZWxhdGVkRmllbGRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xY2MuZmllbGRDb2RlT2ZDbGVhckZpZWxkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWVsZHMuc3BsaXQoJywnKS5mb3JFYWNoKG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlQ29uZGl0aW9ucyA9IHRoaXMucWNjLnNlbGVjdGVkRmllbGRDb25kaXRpb25zLmZpbHRlcihjb25kaXRpb24gPT4ge3JldHVybiAhIWNvbmRpdGlvbi52aXNpYmxlfSk7ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uSXRlbSA9IHZpc2libGVDb25kaXRpb25zLmZpbmQoYyA9PiBjLmZpZWxkQ29kZSA9PT0gbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25JdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnFjYy5maWVsZENvZGVPZkNsZWFyRmllbGRzLnB1c2gobik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25JdGVtLnZhbHVlLmNsZWFyVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=