{"version":3,"file":"farris-ui-view-change.js.map","sources":["ng://@farris/ui-view-change/lib/view-change-manage.service.ts","ng://@farris/ui-view-change/lib/view-change.service.ts","ng://@farris/ui-view-change/lib/view-change.component.ts","ng://@farris/ui-view-change/lib/view-change.directive.ts","ng://@farris/ui-view-change/lib/view-change.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\ninterface ViewItems {\r\n  items: Array<string>;\r\n}\r\ninterface viewContainer {\r\n  [viewGroupIdId: string]: ViewItems;\r\n}\r\n\r\ninterface CurrentViewChange{\r\n  [viewGroupIdId: string]: BehaviorSubject<any>;\r\n}\r\n\r\n@Injectable()\r\nexport class ViewChangeManageService {\r\n  /**é»è®¤è§å¾åæ¢åç»åç§° */\r\n  private readonly defaultId:string = 'default';\r\n  //å½åæ¾ç¤ºè§å¾\r\n  currentViewType:any = {};\r\n\r\n  /**contents */\r\n  viewContainers:viewContainer = {};\r\n  /**\r\n   * ä¿å­ææåç»ççå¬å¯¹è±¡ï¼å½¢å¦{åç»Id:åæ´çå¬å¯¹è±¡}\r\n   */\r\n  changeCurrentViewId:CurrentViewChange={};\r\n\r\n  constructor() {\r\n   }\r\n  /**\r\n   * æ·»å è§å¾é¡¹ç®\r\n   * @param itemId \r\n   * @param viewContainerId:å¯¹åºçå°±æ¯groupId \r\n   */\r\n  addViewItem(itemId:string, viewContainerId = this.defaultId){\r\n    if(this.viewContainers[viewContainerId]){\r\n      if (this.hasElement(itemId, viewContainerId)) {\r\n        return;\r\n      }\r\n      else{\r\n        this.viewContainers[viewContainerId].items.push(itemId);\r\n      }\r\n    }\r\n    else{\r\n      this.viewContainers[viewContainerId] = {\r\n        items: []\r\n      } as ViewItems;\r\n      this.createViewContainerChange(viewContainerId);\r\n      this.viewContainers[viewContainerId].items.push(itemId);\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param itemId åå®¹çæä»¤æ è®°\r\n   * @param viewContainerId fGroupId\r\n   * @returns \r\n   */\r\n  removeViewItem(itemId, viewContainerId = this.defaultId){\r\n    if(this.viewContainers && this.viewContainers[viewContainerId]){\r\n      const leftItems = this.viewContainers[viewContainerId].items.filter(el=>{\r\n        return el !== itemId;\r\n      });\r\n      if (!leftItems.length) {\r\n        // å¦æå½ååç»ä¸çé¡¹é½ä¸å¨\r\n        delete this.viewContainers[viewContainerId];\r\n        if(this.changeCurrentViewId[viewContainerId]){\r\n          this.changeCurrentViewId[viewContainerId].unsubscribe();\r\n          this.changeCurrentViewId[viewContainerId]=null;\r\n          delete this.changeCurrentViewId[viewContainerId];\r\n        }\r\n        return;\r\n      }\r\n      this.viewContainers[viewContainerId].items = leftItems;\r\n    }\r\n  }\r\n\r\n  /**å­å¨currentpageid */\r\n  updateCurrentViewId(type:string, viewContainerId = this.defaultId){\r\n    this.currentViewType[viewContainerId] = type;\r\n    let changeView={};\r\n    changeView[viewContainerId]=this.currentViewType[viewContainerId];\r\n    this.createViewContainerChange(viewContainerId);\r\n    this.changeCurrentViewId[viewContainerId].next(changeView);\r\n  }\r\n  /**\r\n   * è·åæå±åç»çåæ´çå¬å¯¹è±¡\r\n   * @param viewContainerId \r\n   * @returns \r\n   */\r\n  getChangeCurrentViewId(viewContainerId = this.defaultId){\r\n    return this.changeCurrentViewId[viewContainerId];\r\n  }\r\n  /**\r\n   * æä¾ç»view-changeç»ä»¶ä½¿ç¨\r\n   * @param type \r\n   * @param viewContainerId \r\n   */\r\n  changeCurrentViewIdFromCMP(type:string,viewContainerId = this.defaultId){\r\n      if(!this.currentViewType[viewContainerId]){\r\n        this.currentViewType[viewContainerId]=type;\r\n      }\r\n      this.updateCurrentViewId(this.currentViewType[viewContainerId],viewContainerId);\r\n  }\r\n\r\n  private hasElement(itemId: string, groupId: string): boolean {\r\n    return this.viewContainers[groupId].items.some((item): boolean => item === itemId);\r\n  }\r\n  private createViewContainerChange(viewContainerId = this.defaultId){\r\n    if(!this.changeCurrentViewId[viewContainerId]){\r\n      this.changeCurrentViewId[viewContainerId]= new BehaviorSubject<any>(null);\r\n    }\r\n  }\r\n  hasViewContainer(){\r\n    return Object.keys(this.viewContainers).length==0&&Object.keys(this.changeCurrentViewId).length==0;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ViewChangeManageService } from './view-change-manage.service';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\n\r\ninterface StoreViewService {\r\n  [guid: string]: ViewChangeManageService;\r\n}\r\n\r\ninterface StoreCurrentInfo {\r\n  guid: string;\r\n  groupId: string;\r\n  count: number;\r\n}\r\ninterface StoreCurrentDirectiveIns {\r\n  groupId: string;\r\n  instances: Array<any>;\r\n}\r\ninterface StoreViewChangeCmp{\r\n  groupId:string;\r\n  cmpId:string;\r\n  cmpEl:HTMLElement|null;\r\n  guid:string;\r\n  count:number;\r\n  parentEl:HTMLElement|null;//å½æä»¤åå§åä»¥åæ¬¡å±æ§æä¼æå¼\r\n}\r\n/**\r\n * ximena\r\n * 20240301ä¿®æ¹\r\n * 1ãæ­¤æå¡åæ¬çåè½è¢«æåå°view-change-manage.service.tsé\r\n * 2ãè§£å³ï¼å¨æ¡æ¶éæå¼ä¸åè¡¨åï¼ä½æ¯åç»idä¸æ ·å¼èµ·çåæ¢èååçä¸å°çé¢çé®é¢\r\n * 3ãæ¹å¼ï¼æårootçæå¡å°ä¸ä¸ªæ®éæå¡éï¼rootæå¡åªç¨æ¥åºåModule\r\n * ----------------------------å¯è½é®é¢\r\n *  1ãå­å¨æ¾ç¤ºéèåæ¢ngIfæ¹å¼åæ¢çview-changeåç´ ï¼å½éä¸å°ä¸ä¸ªæ¨¡åidä¸\r\n * å½éå°å¶ä»çæ¨¡åä¸ï¼ä½æ¯ä¸å½±åå±ç¤º\r\n * \r\n */\r\n/**\r\n * ximena\r\n * 20240410ä¿®æ¹\r\n * ä¸æ¬¡çæ¬ä¿®æ¹ï¼å©ç¨moduleåå§åï¼åå»ºåä¸guidï¼åºåä¸åè¡¨åä¸çå¤è§å¾ã\r\n * ç¼ºç¹ï¼\r\n * 1ãmoduleåªè½åå§åä¸æ¬¡ï¼åé¢å ä¸ºç¼å­æºå¶ï¼ä¸ä¼åæ¬¡åå§åï¼å¯¼è´ç¬¬äºæ¬¡æå¼åæ®å¯è½åºç°é®é¢\r\n * 2ãåä¸ä¸ªç»ä»¶è¢«å¤ä¸ªèåç»åä¸æ¯æ\r\n * æ¬æ¬¡ä¿®æ¹æ¹æ¡ï¼\r\n * 1ãéè¿currentInfosï¼å­å¨ç»ä»¶åå»ºæ¶çguidå¯¹è±¡ï¼å½å¯¹åºçæä»¤åå§åå®æ¯ï¼å é¤è¿ä¸ªå¯¹è±¡\r\n * 2ãéè¿BehaviorSubjectï¼ç»ä»¶åå»ºæ¶çguidå¯¹è±¡æ¶ï¼nextåécurrentInfos\r\n * 3ãéè¿storeDirectiveInstancesï¼è§£å³ç»ä»¶åæä»¤åå»ºé¡ºåºååçé®é¢\r\n * 4ãéè¿storeViewChangeCmpsï¼è§£å³å¨æ ç­¾é¡µä¸ï¼æä»¤åå§åä¸æ¬¡ï¼å¤è§å¾ç»ä»¶ä¼è¢«å¤æ¬¡åå§åï¼æ­¤æ¶åæ¹æ æ³å¹éçé®é¢ \r\n * æ¯æçåºæ¯\r\n * 1ãåä¸ä¸ªç»ä»¶è¢«å¤ä¸ªèåç»åï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 2ãåä¸ªè¡¨ååï¼å¤ä¸ªå¤è§å¾ï¼åªè¦ç»ä»¶ãæä»¤å¹éï¼æ è®ºgroupidæ¯å¦ä¸æ ·ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 3ãåä¸ªè¡¨ååï¼å¨æä¸ªå¤è§å¾çæä»¤åååµå¥å¶ä»å¤è§å¾ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 4ãæ ç­¾é¡µä¸ä½¿ç¨æ¶ï¼å¤ä¸ªå¤è§å¾ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewChangeService {\r\n  /**\r\n   * æ¯æ¬¡view-changeç»ä»¶åå»ºå®ä¼åå»ºcurrentå¯¹è±¡ï¼ç¶åæ¾å°æ­¤å¤ä¿å­ã\r\n   * å½å¯¹åºçæä»¤é½åå§ååï¼å¼å§éæ¯\r\n   */\r\n  private currentInfos: Array<StoreCurrentInfo> = [];\r\n  private current: StoreCurrentInfo = {\r\n    guid: '',\r\n    groupId: '',\r\n    count: 0\r\n  };\r\n  private storeDirectiveInstances: Array<StoreCurrentDirectiveIns> = [];\r\n  private currentDirectiveInstance = [];\r\n  private guidChangeSubject = new BehaviorSubject<Array<StoreCurrentInfo>>([{\r\n    guid: '',\r\n    groupId: '',\r\n    count: 0\r\n  }]);\r\n  private storeViewChangeSer: StoreViewService = {};\r\n  /**\r\n   * è§£å³æ ç­¾é¡µä¸æç»ä»¶åæä»¤\r\n   * å½ç»ä»¶éæ¯æ¶ï¼æä»¤è¿å­å¨ï¼è¿æ ·æ ¹æ®åæ¥çé»è¾æ¾ä¸å°ç»ä»¶ä¸æä»¤çå¯¹åºå³ç³»\r\n   */\r\n  private storeViewChangeCmps:Array<StoreViewChangeCmp>=[];\r\n\r\n  constructor() {}\r\n  /**\r\n   * è·åå½åæ¨¡åä¿¡æ¯\r\n   * @param id \r\n   */\r\n  getModuleInfo(id = '') {\r\n    id = id ? id : this.current.guid;\r\n    return this.storeViewChangeSer[id];\r\n  }\r\n  /**\r\n   * å é¤å¯¹åºçæ¨¡åä¿¡æ¯\r\n   * @param id \r\n   */\r\n  removeModuleInfo(guid) {\r\n    if (guid && this.storeViewChangeSer.hasOwnProperty(guid)) {\r\n      this.storeViewChangeSer[guid] = null;\r\n      delete this.storeViewChangeSer[guid];      \r\n      let findCmpIndex=this.storeViewChangeCmps.findIndex(item => item.guid == guid);\r\n      this.storeViewChangeCmps.splice(findCmpIndex, 1);  \r\n    }\r\n  }\r\n  /**\r\n   * è¢«ç¨äºæä»¤ç»å®\r\n   * @returns \r\n   */\r\n  getModuleChange() {\r\n    return this.guidChangeSubject;\r\n  }\r\n  /**\r\n   * åå»ºå®ä¾\r\n   */\r\n  createViewChangeCmp(moduleCount,viewChangeCmpEl:HTMLElement) {\r\n    // æ¯å¦åºæ¯æ ç­¾é¡µä¸æè§å¾ç»ä»¶ï¼ä½æ¯æ ç­¾é¡µåå®¹åºåææä»¤ï¼è§å¾ç»ä»¶ä¼åå§åå¤æ¬¡\r\n     let existsGuid=this.getGuidFromStoreViewChangeCmp(moduleCount[\"groupId\"],viewChangeCmpEl);\r\n     if(existsGuid){\r\n      return existsGuid\r\n     }\r\n    // å­å¨å½åæ¨¡åID\r\n    this.current = Object.assign({\r\n      guid: this.createGuid(),\r\n    }, moduleCount);\r\n    // åå»ºå¯¹è±¡\r\n    if (!this.storeViewChangeSer.hasOwnProperty(this.current.guid)) {\r\n      this.storeViewChangeSer[this.current.guid] = new ViewChangeManageService();\r\n    }\r\n    let tCurrent=Object.assign({},this.current);    \r\n    // ä¿å­å½åå¯¹åºä¿¡æ¯\r\n    this.currentInfos.push(tCurrent);\r\n    // å­å¨èµ·æ¥\r\n    this.storeViewChangeCmps.push(Object.assign({cmpId:viewChangeCmpEl.id,cmpEl:viewChangeCmpEl,parentEl:null},this.current));\r\n    if (this.currentDirectiveInstance.length > 0) {\r\n      // å½åæä»¤å®ä¾å­å¨åºæå¼\r\n      let curInsGroupId = this.currentDirectiveInstance[0]['fViewGroupId'];\r\n      if (this.current.groupId == curInsGroupId) {\r\n        // å±äºåä¸ä¸ªåç»\r\n        this.doDirectiveInstanceInit(this.currentDirectiveInstance, this.current.guid);\r\n      } else {\r\n        // æ£æ¥ä¹åå­å¨æ¯å¦æå¼  \r\n        this.storeDirectiveInstances.push({ groupId: curInsGroupId, instances: [].concat(this.currentDirectiveInstance) });\r\n        this.currentDirectiveInstance = [];\r\n        this.findInstoreDirectiveInstances();\r\n      }\r\n    } else {\r\n      this.findInstoreDirectiveInstances();\r\n    }    \r\n    this.guidChangeSubject.next(this.currentInfos);    \r\n    return tCurrent.guid;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  private findInstoreDirectiveInstances() {\r\n    //æ¥æ¾ å·²æçå®ä¾éé¢æ¯å¦æå¯¹åºçgroupdId\r\n    let findGroupIdIndex = this.storeDirectiveInstances.findIndex(item => item['groupId'] == this.current.groupId);\r\n    if (findGroupIdIndex > -1) {\r\n      this.doDirectiveInstanceInit(this.storeDirectiveInstances[findGroupIdIndex]['instances'], this.current.guid);\r\n    }\r\n  }\r\n  /**\r\n   * æ§è¡æä»¤å®ä¾çåå§å\r\n   */\r\n  private doDirectiveInstanceInit(instances, guid) {\r\n    let maxLen = instances.length;\r\n    for (var k = 0; k < maxLen; k++) {\r\n      if (!instances || instances.length != maxLen) {\r\n        break;\r\n      } else {\r\n        instances[k][\"viewChangeOnInit\"](guid);\r\n      }\r\n    }\r\n    if (instances && instances.length > 0) {\r\n      if (instances.length != maxLen) {\r\n        // å¨å¤é¢è¢«å é¤\r\n        this.doDirectiveInstanceInit(instances, guid);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * å­å¨æä»¤å®ä¾\r\n   * @param tInstance \r\n   */\r\n  storeViewChangeDirectiveInstance(tInstance) {\r\n    if (!this.current.groupId || this.current.groupId == tInstance['fViewGroupId']) {\r\n      // ä¸å½åå¹é\r\n      this.currentDirectiveInstance.push(tInstance);\r\n    } else {\r\n      // ä¸å½åä¸å¹é\r\n      let findGroupInfo = this.storeDirectiveInstances.find((item) => item['groupId'] == tInstance['fViewGroupId']);\r\n      if (findGroupInfo) {\r\n        findGroupInfo.instances.push(tInstance);\r\n      } else {\r\n        this.storeDirectiveInstances.push({ groupId: tInstance['fViewGroupId'], instances: [tInstance] })\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * ç§»é¤æä»¤å®ä¾\r\n   * @param tInstance \r\n   */\r\n  removeViewChangeDirectiveInstance(viewItemType: string, guid: string) {\r\n    if (guid == this.current.guid) {\r\n      if (this.currentDirectiveInstance.length > 0) {\r\n        let tfindIndex = this.currentDirectiveInstance.findIndex((item) => item['viewItemType'] == viewItemType);\r\n        if (tfindIndex > -1) {\r\n          this.currentDirectiveInstance.splice(tfindIndex, 1);\r\n        }\r\n      }\r\n    }\r\n    let findModuleIndex = this.currentInfos.findIndex(item => item.guid == guid);\r\n    if (findModuleIndex > -1) {\r\n      let findModuleInfo = this.currentInfos[findModuleIndex];\r\n      findModuleInfo['count'] = findModuleInfo['count'] - 1;\r\n      if (findModuleInfo['count'] <= 0) {\r\n        this.currentInfos.splice(findModuleIndex, 1);\r\n        let findGroupIndex = this.storeDirectiveInstances.findIndex((item) => item['groupId'] == findModuleInfo[\"groupId\"]);\r\n        this.storeDirectiveInstances.splice(findGroupIndex, 1);      \r\n        if(this.current.guid==guid){\r\n          // éç½®å½å\r\n          this.current={guid: '',\r\n            groupId: '',\r\n            count: 0\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  private createGuid(){\r\n    const S4 = function () {\r\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    };\r\n    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\r\n  }\r\n  /**\r\n   * æ´æ°å¤è§å¾ç»ä»¶\r\n   * @param guid \r\n   * @param groupId \r\n   * @param viewChangeDirectiveEl \r\n   */\r\n  updatedStoreViewChangeCmp(guid:string,groupId:string,viewChangeDirectiveEl:HTMLElement){\r\n      let findStoreViewChangeCmp=this.storeViewChangeCmps.find(item=>!item[\"parentEl\"]&&item['guid']==guid);\r\n      if(findStoreViewChangeCmp){\r\n        // æ²¡æèµå¼çåç´ \r\n        let findParent= this.findCommonParent(viewChangeDirectiveEl,findStoreViewChangeCmp.cmpEl);\r\n        findStoreViewChangeCmp[\"parentEl\"]=findParent;\r\n        findStoreViewChangeCmp[\"cmpEl\"]=null;\r\n      }   \r\n  }\r\n  /**\r\n   * æ¾ä¸¤ä¸ªåç´ çå¬å±ç¶åç´ \r\n   * @param element1 \r\n   * @param element2 \r\n   * @returns \r\n   */\r\n  private findCommonParent(element1, element2) {\r\n    var parent1 = element1;\r\n    \r\n    while (parent1 !== null) {\r\n      if (parent1.contains(element2)) {\r\n        return parent1;\r\n      }\r\n      parent1 = parent1.parentElement;\r\n    }    \r\n    return null; // å¦ææ²¡æå±åç¶åç´ ï¼åè¿å null\r\n  }\r\n\r\n  private getGuidFromStoreViewChangeCmp(groupId,cmpEl){\r\n    let findCmp=this.storeViewChangeCmps.find(item=>{\r\n      if(item[\"groupId\"]==groupId&&item[\"cmpId\"]==cmpEl.id){\r\n          return item[\"parentEl\"]?item[\"parentEl\"].contains(cmpEl):false;\r\n      } \r\n    });\r\n    return findCmp?findCmp[\"guid\"]:\"\"\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ElementRef, ViewChild, Renderer2, AfterViewInit, ViewEncapsulation, Optional, NgZone, Injector, OnDestroy } from '@angular/core';\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\nimport { ViewChangeService } from './view-change.service';\r\n\r\n@Component({\r\n  selector: 'farris-view-change',\r\n  templateUrl: './view-change.component.html',\r\n  styleUrls: ['./view-change.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n  // providers:[ ViewChangeService ]\r\n})\r\nexport class ViewChangeComponent implements OnInit ,AfterViewInit,OnDestroy{\r\n\r\n  @Input() toolbarData;\r\n  // è§å¾ç±»åçåç°æ¹å¼ï¼tileå°ç£è´´ç±»åï¼dropdownä¸æç±»å\r\n  @Input() viewType: string = 'tile';\r\n  // é»è®¤çè§å¾ç±»å\r\n  @Input() defaultType: string;\r\n  // è§å¾ç»\r\n  @Input() viewGroupId:string = 'default';\r\n  activeTypeItem;\r\n  // è§å¾ç±»ååæ¢æ¶ï¼æåºçäºä»¶\r\n  @Output() toolTypeChange = new EventEmitter();\r\n\r\n  @ViewChild('typelist') typelist: ElementRef;\r\n  @ViewChild('viewchangewrapper') viewchangewrapper: ElementRef;\r\n  // è®°å½Moduleçæ è®°ï¼ç¨æ¥è·åå½åmoduleä¸çæå¡\r\n  private guid=\"\";\r\n // å¤çngzone\r\n private ngZone = null;\r\n // è®°å½åç´ å°ºå¯¸åæ´\r\n private ro: ResizeObserver | null = null;\r\n private viewChangeManageSer;\r\n \r\n\r\n  constructor(private _renderer: Renderer2,\r\n    @Optional() private viewChangeService: ViewChangeService, @Optional() private inject: Injector) { \r\n      if(!this.viewChangeService){\r\n        this.viewChangeService= new ViewChangeService();\r\n      }\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.guid=this.viewChangeService.createViewChangeCmp({groupId:this.viewGroupId,count:this.toolbarData.length},this.viewchangewrapper.nativeElement.parentElement);\r\n    this.viewChangeManageSer=this.viewChangeService.getModuleInfo(this.guid);\r\n    if (this.toolbarData && this.toolbarData.length) {\r\n      if (this.defaultType) {\r\n        let item = this.toolbarData.find((bar) => {\r\n          return bar['type'] === this.defaultType;\r\n        })\r\n        this.activeTypeItem = item;\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }\r\n      else {\r\n        this.activeTypeItem = this.toolbarData[0];\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }         \r\n    }    \r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.observerElement();    \r\n  }\r\n  ngOnDestroy(): void {\r\n    if(this.ro){\r\n      this.ro.unobserve(this.viewchangewrapper.nativeElement);\r\n      this.ro = null;\r\n    }\r\n  }\r\n\r\n  listItemClick(item) {\r\n    if (item.disable || this.activeTypeItem['type'] === item['type']) {\r\n      return;\r\n    }\r\n    this.activeTypeItem = item;\r\n    this.viewChangeManageSer.updateCurrentViewId(this.activeTypeItem['type'],this.viewGroupId);\r\n    this.toolTypeChange.emit(item);\r\n    if (this.typelist) {\r\n      this._renderer.setStyle(\r\n        this.typelist.nativeElement,\r\n        'display',\r\n        'none'\r\n      );\r\n    }\r\n  }\r\n\r\n  dropdownMouseEnter() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'block'\r\n    );\r\n  }\r\n  dropdownMouseLeave() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'none'\r\n    );\r\n  }\r\n  /**\r\n   * è§£å³å¡çååè¡¨ä¸¤ä¸ªèååæ¶æå¼ï¼åæ­¥æ°æ®æ¶åï¼å½åçæ ç­¾æ¾ç¤ºä¸å¯¹çé®é¢\r\n   */\r\n  private observerElement() {\r\n        if(!this.inject){\r\n          // åå§æ´æ°ä¸æ¬¡å½åç±»å\r\n          this.viewChangeManageSer['changeCurrentViewIdFromCMP'](this.activeTypeItem['type'],this.viewGroupId);\r\n          return;\r\n        }\r\n        if (!this.ngZone) {\r\n            this.ngZone = this.inject.get<NgZone>(NgZone, null);\r\n        }\r\n        if (!this.ro) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    this.ro = new ResizeObserver((entries, observer) => {\r\n                      if(entries[0].contentRect.width>0){\r\n                        this.viewChangeManageSer['changeCurrentViewIdFromCMP'](this.activeTypeItem['type'],this.viewGroupId);\r\n                      }\r\n                    });\r\n                    this.ro.observe(this.viewchangewrapper.nativeElement);\r\n          });\r\n       }\r\n  }\r\n}\r\n","import { Directive, Input, ElementRef, OnInit, OnDestroy, Renderer2 } from '@angular/core';\r\nimport { ViewChangeService } from './view-change.service';\r\nimport { Subject } from 'rxjs';\r\nimport { filter, takeUntil } from 'rxjs/operators';\r\n//è§å¾åºå\r\n@Directive({\r\n    selector: '[fViewItem]'\r\n})\r\nexport class FarrisViewItemDirective implements OnInit, OnDestroy {\r\n    /**ä½¿ç¨æ¹å¼\r\n     * <div [fViewItem]=\"'type11'\" [fViewGroupId]=\"'group2'\">\r\n         è§å¾çåå®¹åºå\r\n       </div>\r\n     */\r\n    // å½åé¡¹çæ è®°\r\n    @Input('fViewItem') viewItemType: string;\r\n    // å½åé¡¹æå±çç»\r\n    @Input('fViewGroupId') fViewGroupId: string = 'default';\r\n    private viewChangeManageSer;\r\n    // è®°å½Moduleçæ è®°ï¼ç¨æ¥è·åå½åmoduleä¸çæå¡\r\n    private guid = \"\";\r\n    // è§£å³viewChangeOnInitä¸çå¬æ§è¡å¤æ¡æ°æ®çååé¡ºåºä¸ä¸è´\r\n    private hasInit=false;\r\n    /**\r\n     * åªè¦æ§è¡è¿åå§æ¹æ³ï¼å°±è°ç¨ã\r\n     * ä¿è¯åªæ§è¡ä¸æ¬¡\r\n     */\r\n    private cancelSignal = new Subject();\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private viewChangeService: ViewChangeService,\r\n        private render: Renderer2\r\n    ) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        // åå­å¨å°æå¡é,å¨è¿ä¸ªæ¹æ³éå¯è½ä¼æ§è¡viewChangeOnInit,ä¿®æ¹hasInitçå¼ã\r\n        this.viewChangeService['storeViewChangeDirectiveInstance'](this);\r\n        // è§£å³ç»ä»¶ä¸æä»¤åå»ºååçé®é¢\r\n        this.viewChangeService.getModuleChange().pipe(takeUntil(this.cancelSignal)).subscribe((curModuleGroupdInfos) => {\r\n            if(this.hasInit) return;\r\n            let findModuleInfo=curModuleGroupdInfos.find(item=>item['groupId'] == this.fViewGroupId)\r\n            if (findModuleInfo) {\r\n                this.viewChangeOnInit(findModuleInfo['guid']);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * æ è®°è¿ä¸ªæ¹æ³\r\n     * @param guid \r\n     * @returns \r\n     */\r\n    viewChangeOnInit(newGuid: string) {\r\n        if(this.hasInit) return;\r\n        this.guid = newGuid;\r\n        this.hasInit=true;\r\n        this.cancelSignal.next();\r\n        this.cancelSignal.complete();\r\n        this.viewChangeManageSer = this.viewChangeService.getModuleInfo(newGuid);\r\n        // ä¿å­\r\n        this.viewChangeService.updatedStoreViewChangeCmp(this.guid,this.fViewGroupId,this.elementRef.nativeElement)\r\n        // å é¤\r\n        this.viewChangeService['removeViewChangeDirectiveInstance'](this.viewItemType, this.guid);\r\n        // è¿½å å°æå¡ä¸­ç»ä¸ç®¡ç\r\n        this.viewChangeManageSer['addViewItem'](this.viewItemType, this.fViewGroupId);\r\n        this.viewChangeManageSer['getChangeCurrentViewId'](this.fViewGroupId).subscribe((currentViewType: any): void => {\r\n            if (!currentViewType||!currentViewType[this.fViewGroupId]) return;\r\n            if (currentViewType[this.fViewGroupId] == this.viewItemType) {\r\n                this.render.removeClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n                }\r\n            else {\r\n                this.render.addClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n                 }\r\n        });\r\n\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        // éæ¯æ¶å é¤æ°æ®\r\n        if(this.viewChangeManageSer){\r\n            this.viewChangeManageSer['removeViewItem'](this.viewItemType, this.fViewGroupId);\r\n            if (this.viewChangeManageSer['hasViewContainer']()) {\r\n                this.viewChangeService['removeModuleInfo'](this.guid);\r\n            }\r\n        }else{\r\n            //æªæ§è¡æ¹æ³viewChangeOnInit\r\n            this.cancelSignal=null;\r\n        }\r\n    }\r\n\r\n}","import { NgModule, Optional } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ViewChangeComponent } from './view-change.component';\r\nimport { FarrisViewItemDirective } from './view-change.directive';\r\nimport { ViewChangeService } from './view-change.service';\r\nimport {ViewChangeManageService} from './view-change-manage.service';\r\n\r\n@NgModule({\r\n  declarations: [ViewChangeComponent,FarrisViewItemDirective],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  providers:[\r\n    ViewChangeService,ViewChangeManageService\r\n  ],\r\n  exports: [ViewChangeComponent,FarrisViewItemDirective]\r\n})\r\nexport class ViewChangeModule {\r\n  constructor(){\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
