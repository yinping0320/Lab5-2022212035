{"version":3,"file":"farris-ui-view-change.umd.js.map","sources":["ng://@farris/ui-view-change/lib/view-change-manage.service.ts","ng://@farris/ui-view-change/lib/view-change.service.ts","ng://@farris/ui-view-change/lib/view-change.component.ts","ng://@farris/ui-view-change/lib/view-change.directive.ts","ng://@farris/ui-view-change/lib/view-change.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\ninterface ViewItems {\r\n  items: Array<string>;\r\n}\r\ninterface viewContainer {\r\n  [viewGroupIdId: string]: ViewItems;\r\n}\r\n\r\ninterface CurrentViewChange{\r\n  [viewGroupIdId: string]: BehaviorSubject<any>;\r\n}\r\n\r\n@Injectable()\r\nexport class ViewChangeManageService {\r\n  /**é»è®¤è§å¾åæ¢åç»åç§° */\r\n  private readonly defaultId:string = 'default';\r\n  //å½åæ¾ç¤ºè§å¾\r\n  currentViewType:any = {};\r\n\r\n  /**contents */\r\n  viewContainers:viewContainer = {};\r\n  /**\r\n   * ä¿å­ææåç»ççå¬å¯¹è±¡ï¼å½¢å¦{åç»Id:åæ´çå¬å¯¹è±¡}\r\n   */\r\n  changeCurrentViewId:CurrentViewChange={};\r\n\r\n  constructor() {\r\n   }\r\n  /**\r\n   * æ·»å è§å¾é¡¹ç®\r\n   * @param itemId \r\n   * @param viewContainerId:å¯¹åºçå°±æ¯groupId \r\n   */\r\n  addViewItem(itemId:string, viewContainerId = this.defaultId){\r\n    if(this.viewContainers[viewContainerId]){\r\n      if (this.hasElement(itemId, viewContainerId)) {\r\n        return;\r\n      }\r\n      else{\r\n        this.viewContainers[viewContainerId].items.push(itemId);\r\n      }\r\n    }\r\n    else{\r\n      this.viewContainers[viewContainerId] = {\r\n        items: []\r\n      } as ViewItems;\r\n      this.createViewContainerChange(viewContainerId);\r\n      this.viewContainers[viewContainerId].items.push(itemId);\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param itemId åå®¹çæä»¤æ è®°\r\n   * @param viewContainerId fGroupId\r\n   * @returns \r\n   */\r\n  removeViewItem(itemId, viewContainerId = this.defaultId){\r\n    if(this.viewContainers && this.viewContainers[viewContainerId]){\r\n      const leftItems = this.viewContainers[viewContainerId].items.filter(el=>{\r\n        return el !== itemId;\r\n      });\r\n      if (!leftItems.length) {\r\n        // å¦æå½ååç»ä¸çé¡¹é½ä¸å¨\r\n        delete this.viewContainers[viewContainerId];\r\n        if(this.changeCurrentViewId[viewContainerId]){\r\n          this.changeCurrentViewId[viewContainerId].unsubscribe();\r\n          this.changeCurrentViewId[viewContainerId]=null;\r\n          delete this.changeCurrentViewId[viewContainerId];\r\n        }\r\n        return;\r\n      }\r\n      this.viewContainers[viewContainerId].items = leftItems;\r\n    }\r\n  }\r\n\r\n  /**å­å¨currentpageid */\r\n  updateCurrentViewId(type:string, viewContainerId = this.defaultId){\r\n    this.currentViewType[viewContainerId] = type;\r\n    let changeView={};\r\n    changeView[viewContainerId]=this.currentViewType[viewContainerId];\r\n    this.createViewContainerChange(viewContainerId);\r\n    this.changeCurrentViewId[viewContainerId].next(changeView);\r\n  }\r\n  /**\r\n   * è·åæå±åç»çåæ´çå¬å¯¹è±¡\r\n   * @param viewContainerId \r\n   * @returns \r\n   */\r\n  getChangeCurrentViewId(viewContainerId = this.defaultId){\r\n    return this.changeCurrentViewId[viewContainerId];\r\n  }\r\n  /**\r\n   * æä¾ç»view-changeç»ä»¶ä½¿ç¨\r\n   * @param type \r\n   * @param viewContainerId \r\n   */\r\n  changeCurrentViewIdFromCMP(type:string,viewContainerId = this.defaultId){\r\n      if(!this.currentViewType[viewContainerId]){\r\n        this.currentViewType[viewContainerId]=type;\r\n      }\r\n      this.updateCurrentViewId(this.currentViewType[viewContainerId],viewContainerId);\r\n  }\r\n\r\n  private hasElement(itemId: string, groupId: string): boolean {\r\n    return this.viewContainers[groupId].items.some((item): boolean => item === itemId);\r\n  }\r\n  private createViewContainerChange(viewContainerId = this.defaultId){\r\n    if(!this.changeCurrentViewId[viewContainerId]){\r\n      this.changeCurrentViewId[viewContainerId]= new BehaviorSubject<any>(null);\r\n    }\r\n  }\r\n  hasViewContainer(){\r\n    return Object.keys(this.viewContainers).length==0&&Object.keys(this.changeCurrentViewId).length==0;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ViewChangeManageService } from './view-change-manage.service';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\n\r\ninterface StoreViewService {\r\n  [guid: string]: ViewChangeManageService;\r\n}\r\n\r\ninterface StoreCurrentInfo {\r\n  guid: string;\r\n  groupId: string;\r\n  count: number;\r\n}\r\ninterface StoreCurrentDirectiveIns {\r\n  groupId: string;\r\n  instances: Array<any>;\r\n}\r\ninterface StoreViewChangeCmp{\r\n  groupId:string;\r\n  cmpId:string;\r\n  cmpEl:HTMLElement|null;\r\n  guid:string;\r\n  count:number;\r\n  parentEl:HTMLElement|null;//å½æä»¤åå§åä»¥åæ¬¡å±æ§æä¼æå¼\r\n}\r\n/**\r\n * ximena\r\n * 20240301ä¿®æ¹\r\n * 1ãæ­¤æå¡åæ¬çåè½è¢«æåå°view-change-manage.service.tsé\r\n * 2ãè§£å³ï¼å¨æ¡æ¶éæå¼ä¸åè¡¨åï¼ä½æ¯åç»idä¸æ ·å¼èµ·çåæ¢èååçä¸å°çé¢çé®é¢\r\n * 3ãæ¹å¼ï¼æårootçæå¡å°ä¸ä¸ªæ®éæå¡éï¼rootæå¡åªç¨æ¥åºåModule\r\n * ----------------------------å¯è½é®é¢\r\n *  1ãå­å¨æ¾ç¤ºéèåæ¢ngIfæ¹å¼åæ¢çview-changeåç´ ï¼å½éä¸å°ä¸ä¸ªæ¨¡åidä¸\r\n * å½éå°å¶ä»çæ¨¡åä¸ï¼ä½æ¯ä¸å½±åå±ç¤º\r\n * \r\n */\r\n/**\r\n * ximena\r\n * 20240410ä¿®æ¹\r\n * ä¸æ¬¡çæ¬ä¿®æ¹ï¼å©ç¨moduleåå§åï¼åå»ºåä¸guidï¼åºåä¸åè¡¨åä¸çå¤è§å¾ã\r\n * ç¼ºç¹ï¼\r\n * 1ãmoduleåªè½åå§åä¸æ¬¡ï¼åé¢å ä¸ºç¼å­æºå¶ï¼ä¸ä¼åæ¬¡åå§åï¼å¯¼è´ç¬¬äºæ¬¡æå¼åæ®å¯è½åºç°é®é¢\r\n * 2ãåä¸ä¸ªç»ä»¶è¢«å¤ä¸ªèåç»åä¸æ¯æ\r\n * æ¬æ¬¡ä¿®æ¹æ¹æ¡ï¼\r\n * 1ãéè¿currentInfosï¼å­å¨ç»ä»¶åå»ºæ¶çguidå¯¹è±¡ï¼å½å¯¹åºçæä»¤åå§åå®æ¯ï¼å é¤è¿ä¸ªå¯¹è±¡\r\n * 2ãéè¿BehaviorSubjectï¼ç»ä»¶åå»ºæ¶çguidå¯¹è±¡æ¶ï¼nextåécurrentInfos\r\n * 3ãéè¿storeDirectiveInstancesï¼è§£å³ç»ä»¶åæä»¤åå»ºé¡ºåºååçé®é¢\r\n * 4ãéè¿storeViewChangeCmpsï¼è§£å³å¨æ ç­¾é¡µä¸ï¼æä»¤åå§åä¸æ¬¡ï¼å¤è§å¾ç»ä»¶ä¼è¢«å¤æ¬¡åå§åï¼æ­¤æ¶åæ¹æ æ³å¹éçé®é¢ \r\n * æ¯æçåºæ¯\r\n * 1ãåä¸ä¸ªç»ä»¶è¢«å¤ä¸ªèåç»åï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 2ãåä¸ªè¡¨ååï¼å¤ä¸ªå¤è§å¾ï¼åªè¦ç»ä»¶ãæä»¤å¹éï¼æ è®ºgroupidæ¯å¦ä¸æ ·ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 3ãåä¸ªè¡¨ååï¼å¨æä¸ªå¤è§å¾çæä»¤åååµå¥å¶ä»å¤è§å¾ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n * 4ãæ ç­¾é¡µä¸ä½¿ç¨æ¶ï¼å¤ä¸ªå¤è§å¾ï¼å¯ä»¥æ­£å¸¸æ¾ç¤º\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ViewChangeService {\r\n  /**\r\n   * æ¯æ¬¡view-changeç»ä»¶åå»ºå®ä¼åå»ºcurrentå¯¹è±¡ï¼ç¶åæ¾å°æ­¤å¤ä¿å­ã\r\n   * å½å¯¹åºçæä»¤é½åå§ååï¼å¼å§éæ¯\r\n   */\r\n  private currentInfos: Array<StoreCurrentInfo> = [];\r\n  private current: StoreCurrentInfo = {\r\n    guid: '',\r\n    groupId: '',\r\n    count: 0\r\n  };\r\n  private storeDirectiveInstances: Array<StoreCurrentDirectiveIns> = [];\r\n  private currentDirectiveInstance = [];\r\n  private guidChangeSubject = new BehaviorSubject<Array<StoreCurrentInfo>>([{\r\n    guid: '',\r\n    groupId: '',\r\n    count: 0\r\n  }]);\r\n  private storeViewChangeSer: StoreViewService = {};\r\n  /**\r\n   * è§£å³æ ç­¾é¡µä¸æç»ä»¶åæä»¤\r\n   * å½ç»ä»¶éæ¯æ¶ï¼æä»¤è¿å­å¨ï¼è¿æ ·æ ¹æ®åæ¥çé»è¾æ¾ä¸å°ç»ä»¶ä¸æä»¤çå¯¹åºå³ç³»\r\n   */\r\n  private storeViewChangeCmps:Array<StoreViewChangeCmp>=[];\r\n\r\n  constructor() {}\r\n  /**\r\n   * è·åå½åæ¨¡åä¿¡æ¯\r\n   * @param id \r\n   */\r\n  getModuleInfo(id = '') {\r\n    id = id ? id : this.current.guid;\r\n    return this.storeViewChangeSer[id];\r\n  }\r\n  /**\r\n   * å é¤å¯¹åºçæ¨¡åä¿¡æ¯\r\n   * @param id \r\n   */\r\n  removeModuleInfo(guid) {\r\n    if (guid && this.storeViewChangeSer.hasOwnProperty(guid)) {\r\n      this.storeViewChangeSer[guid] = null;\r\n      delete this.storeViewChangeSer[guid];      \r\n      let findCmpIndex=this.storeViewChangeCmps.findIndex(item => item.guid == guid);\r\n      this.storeViewChangeCmps.splice(findCmpIndex, 1);  \r\n    }\r\n  }\r\n  /**\r\n   * è¢«ç¨äºæä»¤ç»å®\r\n   * @returns \r\n   */\r\n  getModuleChange() {\r\n    return this.guidChangeSubject;\r\n  }\r\n  /**\r\n   * åå»ºå®ä¾\r\n   */\r\n  createViewChangeCmp(moduleCount,viewChangeCmpEl:HTMLElement) {\r\n    // æ¯å¦åºæ¯æ ç­¾é¡µä¸æè§å¾ç»ä»¶ï¼ä½æ¯æ ç­¾é¡µåå®¹åºåææä»¤ï¼è§å¾ç»ä»¶ä¼åå§åå¤æ¬¡\r\n     let existsGuid=this.getGuidFromStoreViewChangeCmp(moduleCount[\"groupId\"],viewChangeCmpEl);\r\n     if(existsGuid){\r\n      return existsGuid\r\n     }\r\n    // å­å¨å½åæ¨¡åID\r\n    this.current = Object.assign({\r\n      guid: this.createGuid(),\r\n    }, moduleCount);\r\n    // åå»ºå¯¹è±¡\r\n    if (!this.storeViewChangeSer.hasOwnProperty(this.current.guid)) {\r\n      this.storeViewChangeSer[this.current.guid] = new ViewChangeManageService();\r\n    }\r\n    let tCurrent=Object.assign({},this.current);    \r\n    // ä¿å­å½åå¯¹åºä¿¡æ¯\r\n    this.currentInfos.push(tCurrent);\r\n    // å­å¨èµ·æ¥\r\n    this.storeViewChangeCmps.push(Object.assign({cmpId:viewChangeCmpEl.id,cmpEl:viewChangeCmpEl,parentEl:null},this.current));\r\n    if (this.currentDirectiveInstance.length > 0) {\r\n      // å½åæä»¤å®ä¾å­å¨åºæå¼\r\n      let curInsGroupId = this.currentDirectiveInstance[0]['fViewGroupId'];\r\n      if (this.current.groupId == curInsGroupId) {\r\n        // å±äºåä¸ä¸ªåç»\r\n        this.doDirectiveInstanceInit(this.currentDirectiveInstance, this.current.guid);\r\n      } else {\r\n        // æ£æ¥ä¹åå­å¨æ¯å¦æå¼  \r\n        this.storeDirectiveInstances.push({ groupId: curInsGroupId, instances: [].concat(this.currentDirectiveInstance) });\r\n        this.currentDirectiveInstance = [];\r\n        this.findInstoreDirectiveInstances();\r\n      }\r\n    } else {\r\n      this.findInstoreDirectiveInstances();\r\n    }    \r\n    this.guidChangeSubject.next(this.currentInfos);    \r\n    return tCurrent.guid;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  private findInstoreDirectiveInstances() {\r\n    //æ¥æ¾ å·²æçå®ä¾éé¢æ¯å¦æå¯¹åºçgroupdId\r\n    let findGroupIdIndex = this.storeDirectiveInstances.findIndex(item => item['groupId'] == this.current.groupId);\r\n    if (findGroupIdIndex > -1) {\r\n      this.doDirectiveInstanceInit(this.storeDirectiveInstances[findGroupIdIndex]['instances'], this.current.guid);\r\n    }\r\n  }\r\n  /**\r\n   * æ§è¡æä»¤å®ä¾çåå§å\r\n   */\r\n  private doDirectiveInstanceInit(instances, guid) {\r\n    let maxLen = instances.length;\r\n    for (var k = 0; k < maxLen; k++) {\r\n      if (!instances || instances.length != maxLen) {\r\n        break;\r\n      } else {\r\n        instances[k][\"viewChangeOnInit\"](guid);\r\n      }\r\n    }\r\n    if (instances && instances.length > 0) {\r\n      if (instances.length != maxLen) {\r\n        // å¨å¤é¢è¢«å é¤\r\n        this.doDirectiveInstanceInit(instances, guid);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * å­å¨æä»¤å®ä¾\r\n   * @param tInstance \r\n   */\r\n  storeViewChangeDirectiveInstance(tInstance) {\r\n    if (!this.current.groupId || this.current.groupId == tInstance['fViewGroupId']) {\r\n      // ä¸å½åå¹é\r\n      this.currentDirectiveInstance.push(tInstance);\r\n    } else {\r\n      // ä¸å½åä¸å¹é\r\n      let findGroupInfo = this.storeDirectiveInstances.find((item) => item['groupId'] == tInstance['fViewGroupId']);\r\n      if (findGroupInfo) {\r\n        findGroupInfo.instances.push(tInstance);\r\n      } else {\r\n        this.storeDirectiveInstances.push({ groupId: tInstance['fViewGroupId'], instances: [tInstance] })\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * ç§»é¤æä»¤å®ä¾\r\n   * @param tInstance \r\n   */\r\n  removeViewChangeDirectiveInstance(viewItemType: string, guid: string) {\r\n    if (guid == this.current.guid) {\r\n      if (this.currentDirectiveInstance.length > 0) {\r\n        let tfindIndex = this.currentDirectiveInstance.findIndex((item) => item['viewItemType'] == viewItemType);\r\n        if (tfindIndex > -1) {\r\n          this.currentDirectiveInstance.splice(tfindIndex, 1);\r\n        }\r\n      }\r\n    }\r\n    let findModuleIndex = this.currentInfos.findIndex(item => item.guid == guid);\r\n    if (findModuleIndex > -1) {\r\n      let findModuleInfo = this.currentInfos[findModuleIndex];\r\n      findModuleInfo['count'] = findModuleInfo['count'] - 1;\r\n      if (findModuleInfo['count'] <= 0) {\r\n        this.currentInfos.splice(findModuleIndex, 1);\r\n        let findGroupIndex = this.storeDirectiveInstances.findIndex((item) => item['groupId'] == findModuleInfo[\"groupId\"]);\r\n        this.storeDirectiveInstances.splice(findGroupIndex, 1);      \r\n        if(this.current.guid==guid){\r\n          // éç½®å½å\r\n          this.current={guid: '',\r\n            groupId: '',\r\n            count: 0\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  private createGuid(){\r\n    const S4 = function () {\r\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    };\r\n    return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\r\n  }\r\n  /**\r\n   * æ´æ°å¤è§å¾ç»ä»¶\r\n   * @param guid \r\n   * @param groupId \r\n   * @param viewChangeDirectiveEl \r\n   */\r\n  updatedStoreViewChangeCmp(guid:string,groupId:string,viewChangeDirectiveEl:HTMLElement){\r\n      let findStoreViewChangeCmp=this.storeViewChangeCmps.find(item=>!item[\"parentEl\"]&&item['guid']==guid);\r\n      if(findStoreViewChangeCmp){\r\n        // æ²¡æèµå¼çåç´ \r\n        let findParent= this.findCommonParent(viewChangeDirectiveEl,findStoreViewChangeCmp.cmpEl);\r\n        findStoreViewChangeCmp[\"parentEl\"]=findParent;\r\n        findStoreViewChangeCmp[\"cmpEl\"]=null;\r\n      }   \r\n  }\r\n  /**\r\n   * æ¾ä¸¤ä¸ªåç´ çå¬å±ç¶åç´ \r\n   * @param element1 \r\n   * @param element2 \r\n   * @returns \r\n   */\r\n  private findCommonParent(element1, element2) {\r\n    var parent1 = element1;\r\n    \r\n    while (parent1 !== null) {\r\n      if (parent1.contains(element2)) {\r\n        return parent1;\r\n      }\r\n      parent1 = parent1.parentElement;\r\n    }    \r\n    return null; // å¦ææ²¡æå±åç¶åç´ ï¼åè¿å null\r\n  }\r\n\r\n  private getGuidFromStoreViewChangeCmp(groupId,cmpEl){\r\n    let findCmp=this.storeViewChangeCmps.find(item=>{\r\n      if(item[\"groupId\"]==groupId&&item[\"cmpId\"]==cmpEl.id){\r\n          return item[\"parentEl\"]?item[\"parentEl\"].contains(cmpEl):false;\r\n      } \r\n    });\r\n    return findCmp?findCmp[\"guid\"]:\"\"\r\n  }\r\n}\r\n","import { Component, OnInit, Input, Output, EventEmitter, ElementRef, ViewChild, Renderer2, AfterViewInit, ViewEncapsulation, Optional, NgZone, Injector, OnDestroy } from '@angular/core';\r\nimport ResizeObserver from \"resize-observer-polyfill\";\r\nimport { ViewChangeService } from './view-change.service';\r\n\r\n@Component({\r\n  selector: 'farris-view-change',\r\n  templateUrl: './view-change.component.html',\r\n  styleUrls: ['./view-change.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n  // providers:[ ViewChangeService ]\r\n})\r\nexport class ViewChangeComponent implements OnInit ,AfterViewInit,OnDestroy{\r\n\r\n  @Input() toolbarData;\r\n  // è§å¾ç±»åçåç°æ¹å¼ï¼tileå°ç£è´´ç±»åï¼dropdownä¸æç±»å\r\n  @Input() viewType: string = 'tile';\r\n  // é»è®¤çè§å¾ç±»å\r\n  @Input() defaultType: string;\r\n  // è§å¾ç»\r\n  @Input() viewGroupId:string = 'default';\r\n  activeTypeItem;\r\n  // è§å¾ç±»ååæ¢æ¶ï¼æåºçäºä»¶\r\n  @Output() toolTypeChange = new EventEmitter();\r\n\r\n  @ViewChild('typelist') typelist: ElementRef;\r\n  @ViewChild('viewchangewrapper') viewchangewrapper: ElementRef;\r\n  // è®°å½Moduleçæ è®°ï¼ç¨æ¥è·åå½åmoduleä¸çæå¡\r\n  private guid=\"\";\r\n // å¤çngzone\r\n private ngZone = null;\r\n // è®°å½åç´ å°ºå¯¸åæ´\r\n private ro: ResizeObserver | null = null;\r\n private viewChangeManageSer;\r\n \r\n\r\n  constructor(private _renderer: Renderer2,\r\n    @Optional() private viewChangeService: ViewChangeService, @Optional() private inject: Injector) { \r\n      if(!this.viewChangeService){\r\n        this.viewChangeService= new ViewChangeService();\r\n      }\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.guid=this.viewChangeService.createViewChangeCmp({groupId:this.viewGroupId,count:this.toolbarData.length},this.viewchangewrapper.nativeElement.parentElement);\r\n    this.viewChangeManageSer=this.viewChangeService.getModuleInfo(this.guid);\r\n    if (this.toolbarData && this.toolbarData.length) {\r\n      if (this.defaultType) {\r\n        let item = this.toolbarData.find((bar) => {\r\n          return bar['type'] === this.defaultType;\r\n        })\r\n        this.activeTypeItem = item;\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }\r\n      else {\r\n        this.activeTypeItem = this.toolbarData[0];\r\n        this.toolTypeChange.emit(this.activeTypeItem);\r\n      }         \r\n    }    \r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.observerElement();    \r\n  }\r\n  ngOnDestroy(): void {\r\n    if(this.ro){\r\n      this.ro.unobserve(this.viewchangewrapper.nativeElement);\r\n      this.ro = null;\r\n    }\r\n  }\r\n\r\n  listItemClick(item) {\r\n    if (item.disable || this.activeTypeItem['type'] === item['type']) {\r\n      return;\r\n    }\r\n    this.activeTypeItem = item;\r\n    this.viewChangeManageSer.updateCurrentViewId(this.activeTypeItem['type'],this.viewGroupId);\r\n    this.toolTypeChange.emit(item);\r\n    if (this.typelist) {\r\n      this._renderer.setStyle(\r\n        this.typelist.nativeElement,\r\n        'display',\r\n        'none'\r\n      );\r\n    }\r\n  }\r\n\r\n  dropdownMouseEnter() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'block'\r\n    );\r\n  }\r\n  dropdownMouseLeave() {\r\n    this._renderer.setStyle(\r\n      this.typelist.nativeElement,\r\n      'display',\r\n      'none'\r\n    );\r\n  }\r\n  /**\r\n   * è§£å³å¡çååè¡¨ä¸¤ä¸ªèååæ¶æå¼ï¼åæ­¥æ°æ®æ¶åï¼å½åçæ ç­¾æ¾ç¤ºä¸å¯¹çé®é¢\r\n   */\r\n  private observerElement() {\r\n        if(!this.inject){\r\n          // åå§æ´æ°ä¸æ¬¡å½åç±»å\r\n          this.viewChangeManageSer['changeCurrentViewIdFromCMP'](this.activeTypeItem['type'],this.viewGroupId);\r\n          return;\r\n        }\r\n        if (!this.ngZone) {\r\n            this.ngZone = this.inject.get<NgZone>(NgZone, null);\r\n        }\r\n        if (!this.ro) {\r\n                this.ngZone.runOutsideAngular(() => {\r\n                    this.ro = new ResizeObserver((entries, observer) => {\r\n                      if(entries[0].contentRect.width>0){\r\n                        this.viewChangeManageSer['changeCurrentViewIdFromCMP'](this.activeTypeItem['type'],this.viewGroupId);\r\n                      }\r\n                    });\r\n                    this.ro.observe(this.viewchangewrapper.nativeElement);\r\n          });\r\n       }\r\n  }\r\n}\r\n","import { Directive, Input, ElementRef, OnInit, OnDestroy, Renderer2 } from '@angular/core';\r\nimport { ViewChangeService } from './view-change.service';\r\nimport { Subject } from 'rxjs';\r\nimport { filter, takeUntil } from 'rxjs/operators';\r\n//è§å¾åºå\r\n@Directive({\r\n    selector: '[fViewItem]'\r\n})\r\nexport class FarrisViewItemDirective implements OnInit, OnDestroy {\r\n    /**ä½¿ç¨æ¹å¼\r\n     * <div [fViewItem]=\"'type11'\" [fViewGroupId]=\"'group2'\">\r\n         è§å¾çåå®¹åºå\r\n       </div>\r\n     */\r\n    // å½åé¡¹çæ è®°\r\n    @Input('fViewItem') viewItemType: string;\r\n    // å½åé¡¹æå±çç»\r\n    @Input('fViewGroupId') fViewGroupId: string = 'default';\r\n    private viewChangeManageSer;\r\n    // è®°å½Moduleçæ è®°ï¼ç¨æ¥è·åå½åmoduleä¸çæå¡\r\n    private guid = \"\";\r\n    // è§£å³viewChangeOnInitä¸çå¬æ§è¡å¤æ¡æ°æ®çååé¡ºåºä¸ä¸è´\r\n    private hasInit=false;\r\n    /**\r\n     * åªè¦æ§è¡è¿åå§æ¹æ³ï¼å°±è°ç¨ã\r\n     * ä¿è¯åªæ§è¡ä¸æ¬¡\r\n     */\r\n    private cancelSignal = new Subject();\r\n    constructor(\r\n        private elementRef: ElementRef,\r\n        private viewChangeService: ViewChangeService,\r\n        private render: Renderer2\r\n    ) {\r\n    }\r\n\r\n    public ngOnInit(): void {\r\n        // åå­å¨å°æå¡é,å¨è¿ä¸ªæ¹æ³éå¯è½ä¼æ§è¡viewChangeOnInit,ä¿®æ¹hasInitçå¼ã\r\n        this.viewChangeService['storeViewChangeDirectiveInstance'](this);\r\n        // è§£å³ç»ä»¶ä¸æä»¤åå»ºååçé®é¢\r\n        this.viewChangeService.getModuleChange().pipe(takeUntil(this.cancelSignal)).subscribe((curModuleGroupdInfos) => {\r\n            if(this.hasInit) return;\r\n            let findModuleInfo=curModuleGroupdInfos.find(item=>item['groupId'] == this.fViewGroupId)\r\n            if (findModuleInfo) {\r\n                this.viewChangeOnInit(findModuleInfo['guid']);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * æ è®°è¿ä¸ªæ¹æ³\r\n     * @param guid \r\n     * @returns \r\n     */\r\n    viewChangeOnInit(newGuid: string) {\r\n        if(this.hasInit) return;\r\n        this.guid = newGuid;\r\n        this.hasInit=true;\r\n        this.cancelSignal.next();\r\n        this.cancelSignal.complete();\r\n        this.viewChangeManageSer = this.viewChangeService.getModuleInfo(newGuid);\r\n        // ä¿å­\r\n        this.viewChangeService.updatedStoreViewChangeCmp(this.guid,this.fViewGroupId,this.elementRef.nativeElement)\r\n        // å é¤\r\n        this.viewChangeService['removeViewChangeDirectiveInstance'](this.viewItemType, this.guid);\r\n        // è¿½å å°æå¡ä¸­ç»ä¸ç®¡ç\r\n        this.viewChangeManageSer['addViewItem'](this.viewItemType, this.fViewGroupId);\r\n        this.viewChangeManageSer['getChangeCurrentViewId'](this.fViewGroupId).subscribe((currentViewType: any): void => {\r\n            if (!currentViewType||!currentViewType[this.fViewGroupId]) return;\r\n            if (currentViewType[this.fViewGroupId] == this.viewItemType) {\r\n                this.render.removeClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n                }\r\n            else {\r\n                this.render.addClass(this.elementRef.nativeElement, 'f-viewchange-view-none');\r\n                 }\r\n        });\r\n\r\n    }\r\n\r\n    public ngOnDestroy(): void {\r\n        // éæ¯æ¶å é¤æ°æ®\r\n        if(this.viewChangeManageSer){\r\n            this.viewChangeManageSer['removeViewItem'](this.viewItemType, this.fViewGroupId);\r\n            if (this.viewChangeManageSer['hasViewContainer']()) {\r\n                this.viewChangeService['removeModuleInfo'](this.guid);\r\n            }\r\n        }else{\r\n            //æªæ§è¡æ¹æ³viewChangeOnInit\r\n            this.cancelSignal=null;\r\n        }\r\n    }\r\n\r\n}","import { NgModule, Optional } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ViewChangeComponent } from './view-change.component';\r\nimport { FarrisViewItemDirective } from './view-change.directive';\r\nimport { ViewChangeService } from './view-change.service';\r\nimport {ViewChangeManageService} from './view-change-manage.service';\r\n\r\n@NgModule({\r\n  declarations: [ViewChangeComponent,FarrisViewItemDirective],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  providers:[\r\n    ViewChangeService,ViewChangeManageService\r\n  ],\r\n  exports: [ViewChangeComponent,FarrisViewItemDirective]\r\n})\r\nexport class ViewChangeModule {\r\n  constructor(){\r\n  }\r\n}\r\n"],"names":["BehaviorSubject","Injectable","EventEmitter","NgZone","Component","ViewEncapsulation","Renderer2","Optional","Injector","Input","Output","ViewChild","Subject","takeUntil","Directive","ElementRef","NgModule","CommonModule"],"mappings":"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"}
