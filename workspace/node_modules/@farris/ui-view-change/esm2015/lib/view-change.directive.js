/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, Input, ElementRef, Renderer2 } from '@angular/core';
import { ViewChangeService } from './view-change.service';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
//视图区域
export class FarrisViewItemDirective {
    /**
     * @param {?} elementRef
     * @param {?} viewChangeService
     * @param {?} render
     */
    constructor(elementRef, viewChangeService, render) {
        this.elementRef = elementRef;
        this.viewChangeService = viewChangeService;
        this.render = render;
        // 当前项所属的组
        this.fViewGroupId = 'default';
        // 记录Module的标记，用来获取当前module下的服务
        this.guid = "";
        // 解决viewChangeOnInit与监听执行多条数据的先后顺序不一致
        this.hasInit = false;
        /**
         * 只要执行过初始方法，就调用。
         * 保证只执行一次
         */
        this.cancelSignal = new Subject();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // 先存储到服务里,在这个方法里可能会执行viewChangeOnInit,修改hasInit的值。
        this.viewChangeService['storeViewChangeDirectiveInstance'](this);
        // 解决组件与指令创建先后的问题
        this.viewChangeService.getModuleChange().pipe(takeUntil(this.cancelSignal)).subscribe((/**
         * @param {?} curModuleGroupdInfos
         * @return {?}
         */
        (curModuleGroupdInfos) => {
            if (this.hasInit)
                return;
            /** @type {?} */
            let findModuleInfo = curModuleGroupdInfos.find((/**
             * @param {?} item
             * @return {?}
             */
            item => item['groupId'] == this.fViewGroupId));
            if (findModuleInfo) {
                this.viewChangeOnInit(findModuleInfo['guid']);
            }
        }));
    }
    /**
     * 标记这个方法
     * @param {?} newGuid
     * @return {?}
     */
    viewChangeOnInit(newGuid) {
        if (this.hasInit)
            return;
        this.guid = newGuid;
        this.hasInit = true;
        this.cancelSignal.next();
        this.cancelSignal.complete();
        this.viewChangeManageSer = this.viewChangeService.getModuleInfo(newGuid);
        // 保存
        this.viewChangeService.updatedStoreViewChangeCmp(this.guid, this.fViewGroupId, this.elementRef.nativeElement);
        // 删除
        this.viewChangeService['removeViewChangeDirectiveInstance'](this.viewItemType, this.guid);
        // 追加到服务中统一管理
        this.viewChangeManageSer['addViewItem'](this.viewItemType, this.fViewGroupId);
        this.viewChangeManageSer['getChangeCurrentViewId'](this.fViewGroupId).subscribe((/**
         * @param {?} currentViewType
         * @return {?}
         */
        (currentViewType) => {
            if (!currentViewType || !currentViewType[this.fViewGroupId])
                return;
            if (currentViewType[this.fViewGroupId] == this.viewItemType) {
                this.render.removeClass(this.elementRef.nativeElement, 'f-viewchange-view-none');
            }
            else {
                this.render.addClass(this.elementRef.nativeElement, 'f-viewchange-view-none');
            }
        }));
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        // 销毁时删除数据
        if (this.viewChangeManageSer) {
            this.viewChangeManageSer['removeViewItem'](this.viewItemType, this.fViewGroupId);
            if (this.viewChangeManageSer['hasViewContainer']()) {
                this.viewChangeService['removeModuleInfo'](this.guid);
            }
        }
        else {
            //未执行方法viewChangeOnInit
            this.cancelSignal = null;
        }
    }
}
FarrisViewItemDirective.decorators = [
    { type: Directive, args: [{
                selector: '[fViewItem]'
            },] }
];
/** @nocollapse */
FarrisViewItemDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: ViewChangeService },
    { type: Renderer2 }
];
FarrisViewItemDirective.propDecorators = {
    viewItemType: [{ type: Input, args: ['fViewItem',] }],
    fViewGroupId: [{ type: Input, args: ['fViewGroupId',] }]
};
if (false) {
    /**
     * 使用方式
     * <div [fViewItem]="'type11'" [fViewGroupId]="'group2'">
     * 视图的内容区域
     * </div>
     * @type {?}
     */
    FarrisViewItemDirective.prototype.viewItemType;
    /** @type {?} */
    FarrisViewItemDirective.prototype.fViewGroupId;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.viewChangeManageSer;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.guid;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.hasInit;
    /**
     * 只要执行过初始方法，就调用。
     * 保证只执行一次
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.cancelSignal;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.viewChangeService;
    /**
     * @type {?}
     * @private
     */
    FarrisViewItemDirective.prototype.render;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy1jaGFuZ2UuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZhcnJpcy91aS12aWV3LWNoYW5nZS8iLCJzb3VyY2VzIjpbImxpYi92aWV3LWNoYW5nZS5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBcUIsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNGLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFVLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOztBQUtuRCxNQUFNLE9BQU8sdUJBQXVCOzs7Ozs7SUFvQmhDLFlBQ1ksVUFBc0IsRUFDdEIsaUJBQW9DLEVBQ3BDLE1BQWlCO1FBRmpCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUNwQyxXQUFNLEdBQU4sTUFBTSxDQUFXOztRQWROLGlCQUFZLEdBQVcsU0FBUyxDQUFDOztRQUdoRCxTQUFJLEdBQUcsRUFBRSxDQUFDOztRQUVWLFlBQU8sR0FBQyxLQUFLLENBQUM7Ozs7O1FBS2QsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBTXJDLENBQUM7Ozs7SUFFTSxRQUFRO1FBQ1gsbURBQW1EO1FBQ25ELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pFLGlCQUFpQjtRQUNqQixJQUFJLENBQUMsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxTQUFTOzs7O1FBQUMsQ0FBQyxvQkFBb0IsRUFBRSxFQUFFO1lBQzNHLElBQUcsSUFBSSxDQUFDLE9BQU87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QiwrQ0FBeUM7O0lBRXpDLCtDQUF3RDs7Ozs7SUFDeEQsc0RBQTRCOzs7OztJQUU1Qix1Q0FBa0I7Ozs7O0lBRWxCLDBDQUFzQjs7Ozs7OztJQUt0QiwrQ0FBcUM7Ozs7O0lBRWpDLDZDQUE4Qjs7Ozs7SUFDOUIsb0RBQTRDOzs7OztJQUM1Qyx5Q0FBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBFbGVtZW50UmVmLCBPbkluaXQsIE9uRGVzdHJveSwgUmVuZGVyZXIyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFZpZXdDaGFuZ2VTZXJ2aWNlIH0gZnJvbSAnLi92aWV3LWNoYW5nZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBmaWx0ZXIsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuLy/op4blm77ljLrln59cclxuQERpcmVjdGl2ZSh7XHJcbiAgICBzZWxlY3RvcjogJ1tmVmlld0l0ZW1dJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRmFycmlzVmlld0l0ZW1EaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcbiAgICAvKirkvb/nlKjmlrnlvI9cclxuICAgICAqIDxkaXYgW2ZWaWV3SXRlbV09XCIndHlwZTExJ1wiIFtmVmlld0dyb3VwSWRdPVwiJ2dyb3VwMidcIj5cclxuICAgICAgICAg6KeG5Zu+55qE5YaF5a655Yy65Z+fXHJcbiAgICAgICA8L2Rpdj5cclxuICAgICAqL1xyXG4gICAgLy8g5b2T5YmN6aG555qE5qCH6K6wXHJcbiAgICBASW5wdXQoJ2ZWaWV3SXRlbScpIHZpZXdJdGVtVHlwZTogc3RyaW5nO1xyXG4gICAgLy8g5b2T5YmN6aG55omA5bGe55qE57uEXHJcbiAgICBASW5wdXQoJ2ZWaWV3R3JvdXBJZCcpIGZWaWV3R3JvdXBJZDogc3RyaW5nID0gJ2RlZmF1bHQnO1xyXG4gICAgcHJpdmF0ZSB2aWV3Q2hhbmdlTWFuYWdlU2VyO1xyXG4gICAgLy8g6K6w5b2VTW9kdWxl55qE5qCH6K6w77yM55So5p2l6I635Y+W5b2T5YmNbW9kdWxl5LiL55qE5pyN5YqhXHJcbiAgICBwcml2YXRlIGd1aWQgPSBcIlwiO1xyXG4gICAgLy8g6Kej5Yazdmlld0NoYW5nZU9uSW5pdOS4juebkeWQrOaJp+ihjOWkmuadoeaVsOaNrueahOWFiOWQjumhuuW6j+S4jeS4gOiHtFxyXG4gICAgcHJpdmF0ZSBoYXNJbml0PWZhbHNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlj6ropoHmiafooYzov4fliJ3lp4vmlrnms5XvvIzlsLHosIPnlKjjgIJcclxuICAgICAqIOS/neivgeWPquaJp+ihjOS4gOasoVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbmNlbFNpZ25hbCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSB2aWV3Q2hhbmdlU2VydmljZTogVmlld0NoYW5nZVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXI6IFJlbmRlcmVyMlxyXG4gICAgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vIOWFiOWtmOWCqOWIsOacjeWKoemHjCzlnKjov5nkuKrmlrnms5Xph4zlj6/og73kvJrmiafooYx2aWV3Q2hhbmdlT25Jbml0LOS/ruaUuWhhc0luaXTnmoTlgLzjgIJcclxuICAgICAgICB0aGlzLnZpZXdDaGFuZ2VTZXJ2aWNlWydzdG9yZVZpZXdDaGFuZ2VEaXJlY3RpdmVJbnN0YW5jZSddKHRoaXMpO1xyXG4gICAgICAgIC8vIOino+WGs+e7hOS7tuS4juaMh+S7pOWIm+W7uuWFiOWQjueahOmXrumimFxyXG4gICAgICAgIHRoaXMudmlld0NoYW5nZVNlcnZpY2UuZ2V0TW9kdWxlQ2hhbmdlKCkucGlwZSh0YWtlVW50aWwodGhpcy5jYW5jZWxTaWduYWwpKS5zdWJzY3JpYmUoKGN1ck1vZHVsZUdyb3VwZEluZm9zKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaGFzSW5pdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgZmluZE1vZHVsZUluZm89Y3VyTW9kdWxlR3JvdXBkSW5mb3MuZmluZChpdGVtPT5pdGVtWydncm91cElkJ10gPT0gdGhpcy5mVmlld0dyb3VwSWQpXHJcbiAgICAgICAgICAgIGlmIChmaW5kTW9kdWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlT25Jbml0KGZpbmRNb2R1bGVJbmZvWydndWlkJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOagh+iusOi/meS4quaWueazlVxyXG4gICAgICogQHBhcmFtIGd1aWQgXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqL1xyXG4gICAgdmlld0NoYW5nZU9uSW5pdChuZXdHdWlkOiBzdHJpbmcpIHtcclxuICAgICAgICBpZih0aGlzLmhhc0luaXQpIHJldHVybjtcclxuICAgICAgICB0aGlzLmd1aWQgPSBuZXdHdWlkO1xyXG4gICAgICAgIHRoaXMuaGFzSW5pdD10cnVlO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsU2lnbmFsLm5leHQoKTtcclxuICAgICAgICB0aGlzLmNhbmNlbFNpZ25hbC5jb21wbGV0ZSgpO1xyXG4gICAgICAgIHRoaXMudmlld0NoYW5nZU1hbmFnZVNlciA9IHRoaXMudmlld0NoYW5nZVNlcnZpY2UuZ2V0TW9kdWxlSW5mbyhuZXdHdWlkKTtcclxuICAgICAgICAvLyDkv53lrZhcclxuICAgICAgICB0aGlzLnZpZXdDaGFuZ2VTZXJ2aWNlLnVwZGF0ZWRTdG9yZVZpZXdDaGFuZ2VDbXAodGhpcy5ndWlkLHRoaXMuZlZpZXdHcm91cElkLHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KVxyXG4gICAgICAgIC8vIOWIoOmZpFxyXG4gICAgICAgIHRoaXMudmlld0NoYW5nZVNlcnZpY2VbJ3JlbW92ZVZpZXdDaGFuZ2VEaXJlY3RpdmVJbnN0YW5jZSddKHRoaXMudmlld0l0ZW1UeXBlLCB0aGlzLmd1aWQpO1xyXG4gICAgICAgIC8vIOi/veWKoOWIsOacjeWKoeS4ree7n+S4gOeuoeeQhlxyXG4gICAgICAgIHRoaXMudmlld0NoYW5nZU1hbmFnZVNlclsnYWRkVmlld0l0ZW0nXSh0aGlzLnZpZXdJdGVtVHlwZSwgdGhpcy5mVmlld0dyb3VwSWQpO1xyXG4gICAgICAgIHRoaXMudmlld0NoYW5nZU1hbmFnZVNlclsnZ2V0Q2hhbmdlQ3VycmVudFZpZXdJZCddKHRoaXMuZlZpZXdHcm91cElkKS5zdWJzY3JpYmUoKGN1cnJlbnRWaWV3VHlwZTogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudFZpZXdUeXBlfHwhY3VycmVudFZpZXdUeXBlW3RoaXMuZlZpZXdHcm91cElkXSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFZpZXdUeXBlW3RoaXMuZlZpZXdHcm91cElkXSA9PSB0aGlzLnZpZXdJdGVtVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICdmLXZpZXdjaGFuZ2Utdmlldy1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIuYWRkQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICdmLXZpZXdjaGFuZ2Utdmlldy1ub25lJyk7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6ZSA5q+B5pe25Yig6Zmk5pWw5o2uXHJcbiAgICAgICAgaWYodGhpcy52aWV3Q2hhbmdlTWFuYWdlU2VyKXtcclxuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTWFuYWdlU2VyWydyZW1vdmVWaWV3SXRlbSddKHRoaXMudmlld0l0ZW1UeXBlLCB0aGlzLmZWaWV3R3JvdXBJZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdDaGFuZ2VNYW5hZ2VTZXJbJ2hhc1ZpZXdDb250YWluZXInXSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdDaGFuZ2VTZXJ2aWNlWydyZW1vdmVNb2R1bGVJbmZvJ10odGhpcy5ndWlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+acquaJp+ihjOaWueazlXZpZXdDaGFuZ2VPbkluaXRcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxTaWduYWw9bnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59Il19