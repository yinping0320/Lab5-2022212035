/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { JsonConvertableImpl } from '../JsonConvertableImpl';
import { BpmnModelJsonHelper } from '../BpmnModelJsonHelper';
import { BillDataField } from './BillDataField';
import { BillDataFields } from './BillDataFields';
import { BillDataTables } from './BillDataTables';
import { BillDataTable } from './BillDataTable';
import { BillDataRowPersistenceType } from './BillDataRowPersistenceType';
var BillDataRow = /** @class */ (function (_super) {
    tslib_1.__extends(BillDataRow, _super);
    function BillDataRow() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fields = new BillDataFields();
        _this.childTables = new BillDataTables();
        _this.persistenceType = BillDataRowPersistenceType.Unchanged;
        return _this;
        //public String getDataIdPath()
        //{
        //    return dataId;
        //}
    }
    /**
     * @protected
     * @return {?}
     */
    BillDataRow.prototype.ResetBeforeLoadFrom = /**
     * @protected
     * @return {?}
     */
    function () {
        _super.prototype.ResetBeforeLoadFrom.call(this);
        this.dataId = null;
        this.fields.Clear();
        this.childTables.Clear();
        this.attachedTable = null;
        this.persistenceType = BillDataRowPersistenceType.Unchanged;
    };
    /**
     * @return {?}
     */
    BillDataRow.prototype.ConvertToJsonObject = /**
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b;
        /** @type {?} */
        var obj = _super.prototype.ConvertToJsonObject.call(this);
        BpmnModelJsonHelper.SetAttributeValue(obj, "dataId", this.dataId);
        if (this.persistenceType != BillDataRowPersistenceType.Unchanged) {
            BpmnModelJsonHelper.SetAttributeValue(obj, "persist", this.persistenceType);
        }
        /** @type {?} */
        var fields = [];
        try {
            for (var _c = tslib_1.__values(this.fields.GetList()), _d = _c.next(); !_d.done; _d = _c.next()) {
                var value = _d.value;
                fields.push(value.ConvertToJsonObject());
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        BpmnModelJsonHelper.SetAttributeValue(obj, "fields", fields);
        if (this.childTables.GetList().length > 0) {
            /** @type {?} */
            var childTables = [];
            try {
                for (var _e = tslib_1.__values(this.childTables.GetList()), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var value = _f.value;
                    childTables.push(value.ConvertToJsonObject());
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            BpmnModelJsonHelper.SetAttributeValue(obj, "childTables", childTables);
        }
        return obj;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BillDataRow.prototype.LoadFromJsonObject = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        var e_3, _a, e_4, _b;
        _super.prototype.LoadFromJsonObject.call(this, obj);
        this.dataId = BpmnModelJsonHelper.GetAttributeValueAsString(obj, "dataId");
        /** @type {?} */
        var persistenceType = BpmnModelJsonHelper.GetAttributeValueAsString(obj, "persist");
        if (persistenceType != null) {
            this.persistenceType = BillDataRowPersistenceType[persistenceType];
        }
        /** @type {?} */
        var fields = BpmnModelJsonHelper.GetAttributeValue(obj, "fields");
        try {
            for (var fields_1 = tslib_1.__values(fields), fields_1_1 = fields_1.next(); !fields_1_1.done; fields_1_1 = fields_1.next()) {
                var item = fields_1_1.value;
                /** @type {?} */
                var value = new BillDataField();
                value.LoadFromJsonObject(item);
                this.fields.Add(value);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (fields_1_1 && !fields_1_1.done && (_a = fields_1.return)) _a.call(fields_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        /** @type {?} */
        var childTables = BpmnModelJsonHelper.GetAttributeValue(obj, "childTables");
        if (childTables != null) {
            try {
                for (var childTables_1 = tslib_1.__values(childTables), childTables_1_1 = childTables_1.next(); !childTables_1_1.done; childTables_1_1 = childTables_1.next()) {
                    var item = childTables_1_1.value;
                    /** @type {?} */
                    var value = new BillDataTable();
                    value.LoadFromJsonObject(item);
                    this.childTables.Add(value);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (childTables_1_1 && !childTables_1_1.done && (_b = childTables_1.return)) _b.call(childTables_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        }
    };
    /**
     * @return {?}
     */
    BillDataRow.prototype.GetFieldMap = /**
     * @return {?}
     */
    function () {
        return this.fields.GetMap();
    };
    /**
     * @return {?}
     */
    BillDataRow.prototype.GetFieldList = /**
     * @return {?}
     */
    function () {
        return this.fields.GetList();
    };
    /**
     * @return {?}
     */
    BillDataRow.prototype.GetChildTableMap = /**
     * @return {?}
     */
    function () {
        return this.childTables.GetMap();
    };
    /**
     * @return {?}
     */
    BillDataRow.prototype.GetChildTableList = /**
     * @return {?}
     */
    function () {
        return this.childTables.GetList();
    };
    /**
     * @param {?} field
     * @return {?}
     */
    BillDataRow.prototype.AddField = /**
     * @param {?} field
     * @return {?}
     */
    function (field) {
        this.fields.Add(field);
    };
    /**
     * @param {?} table
     * @return {?}
     */
    BillDataRow.prototype.AddChildTable = /**
     * @param {?} table
     * @return {?}
     */
    function (table) {
        this.childTables.Add(table);
    };
    return BillDataRow;
}(JsonConvertableImpl));
export { BillDataRow };
if (false) {
    /** @type {?} */
    BillDataRow.prototype.dataId;
    /** @type {?} */
    BillDataRow.prototype.fields;
    /** @type {?} */
    BillDataRow.prototype.childTables;
    /** @type {?} */
    BillDataRow.prototype.attachedTable;
    /** @type {?} */
    BillDataRow.prototype.persistenceType;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmlsbERhdGFSb3cuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZWRwLWFpZi9jb21tb24tYXBpLyIsInNvdXJjZXMiOlsibGliL2JpbGxraXQvQmlsbERhdGFSb3cudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM3RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFMUU7SUFBaUMsdUNBQW1CO0lBQXBEO1FBQUEscUVBa0dDO1FBaEdHLFlBQU0sR0FBbUIsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUM5QyxpQkFBVyxHQUFtQixJQUFJLGNBQWMsRUFBRSxDQUFDO1FBRW5ELHFCQUFlLEdBQStCLDBCQUEwQixDQUFDLFNBQVMsQ0FBQzs7UUF5Rm5GLCtCQUErQjtRQUMvQixHQUFHO1FBQ0gsb0JBQW9CO1FBQ3BCLEdBQUc7SUFDUCxDQUFDOzs7OztJQTNGYSx5Q0FBbUI7Ozs7SUFBN0I7UUFDSSxpQkFBTSxtQkFBbUIsV0FBRSxDQUFDO1FBRTVCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsZUFBZSxHQUFHLDBC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OztTQUNKO0lBQ0wsQ0FBQzs7OztJQUVNLGlDQUFXOzs7SUFBbEI7UUFDSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEMsQ0FBQzs7OztJQUVNLGtDQUFZOzs7SUFBbkI7UUFDSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDakMsQ0FBQzs7OztJQUVNLHNDQUFnQjs7O0lBQXZCO1FBQ0ksT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3JDLENBQUM7Ozs7SUFFTSx1Q0FBaUI7OztJQUF4QjtRQUNJLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN0QyxDQUFDOzs7OztJQUVNLDhCQUFROzs7O0lBQWYsVUFBZ0IsS0FBb0I7UUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDM0IsQ0FBQzs7Ozs7SUFFTSxtQ0FBYTs7OztJQUFwQixVQUFxQixLQUFvQjtRQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBTUwsa0JBQUM7QUFBRCxDQUFDLEFBbEdELENBQWlDLG1CQUFtQixHQWtHbkQ7Ozs7SUFqR0csNkJBQWU7O0lBQ2YsNkJBQThDOztJQUM5QyxrQ0FBbUQ7O0lBQ25ELG9DQUE2Qjs7SUFDN0Isc0NBQW1GIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSnNvbkNvbnZlcnRhYmxlSW1wbCB9IGZyb20gJy4uL0pzb25Db252ZXJ0YWJsZUltcGwnO1xyXG5pbXBvcnQgeyBCcG1uTW9kZWxKc29uSGVscGVyIH0gZnJvbSAnLi4vQnBtbk1vZGVsSnNvbkhlbHBlcic7XHJcbmltcG9ydCB7IEJpbGxEYXRhRmllbGQgfSBmcm9tICcuL0JpbGxEYXRhRmllbGQnO1xyXG5pbXBvcnQgeyBCaWxsRGF0YUZpZWxkcyB9IGZyb20gJy4vQmlsbERhdGFGaWVsZHMnO1xyXG5pbXBvcnQgeyBCaWxsRGF0YVRhYmxlcyB9IGZyb20gJy4vQmlsbERhdGFUYWJsZXMnO1xyXG5pbXBvcnQgeyBCaWxsRGF0YVRhYmxlIH0gZnJvbSAnLi9CaWxsRGF0YVRhYmxlJztcclxuaW1wb3J0IHsgQmlsbERhdGFSb3dQZXJzaXN0ZW5jZVR5cGUgfSBmcm9tICcuL0JpbGxEYXRhUm93UGVyc2lzdGVuY2VUeXBlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCaWxsRGF0YVJvdyBleHRlbmRzIEpzb25Db252ZXJ0YWJsZUltcGwge1xyXG4gICAgZGF0YUlkOiBzdHJpbmc7XHJcbiAgICBmaWVsZHM6IEJpbGxEYXRhRmllbGRzID0gbmV3IEJpbGxEYXRhRmllbGRzKCk7XHJcbiAgICBjaGlsZFRhYmxlczogQmlsbERhdGFUYWJsZXMgPSBuZXcgQmlsbERhdGFUYWJsZXMoKTtcclxuICAgIGF0dGFjaGVkVGFibGU6IEJpbGxEYXRhVGFibGU7XHJcbiAgICBwZXJzaXN0ZW5jZVR5cGU6IEJpbGxEYXRhUm93UGVyc2lzdGVuY2VUeXBlID0gQmlsbERhdGFSb3dQZXJzaXN0ZW5jZVR5cGUuVW5jaGFuZ2VkO1xyXG5cclxuICAgIHByb3RlY3RlZCBSZXNldEJlZm9yZUxvYWRGcm9tKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLlJlc2V0QmVmb3JlTG9hZEZyb20oKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhSWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmllbGRzLkNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5jaGlsZFRhYmxlcy5DbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoZWRUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZVR5cGUgPSBCaWxsRGF0YVJvd1BlcnNpc3RlbmNlVHlwZS5VbmNoYW5nZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIENvbnZlcnRUb0pzb25PYmplY3QoKToge30ge1xyXG4gICAgICAgIGxldCBvYmogPSBzdXBlci5Db252ZXJ0VG9Kc29uT2JqZWN0KCk7XHJcblxyXG4gICAgICAgIEJwbW5Nb2RlbEpzb25IZWxwZXIuU2V0QXR0cmlidXRlVmFsdWUob2JqLCBcImRhdGFJZFwiLCB0aGlzLmRhdGFJZCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlVHlwZSAhPSBCaWxsRGF0YVJvd1BlcnNpc3RlbmNlVHlwZS5VbmNoYW5nZWQpIHtcclxuICAgICAgICAgICAgQnBtbk1vZGVsSnNvbkhlbHBlci5TZXRBdHRyaWJ1dGVWYWx1ZShvYmosIFwicGVyc2lzdFwiLCB0aGlzLnBlcnNpc3RlbmNlVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZmllbGRzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHZhbHVlIG9mIHRoaXMuZmllbGRzLkdldExpc3QoKSkge1xyXG4gICAgICAgICAgICBmaWVsZHMucHVzaCh2YWx1ZS5Db252ZXJ0VG9Kc29uT2JqZWN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBCcG1uTW9kZWxKc29uSGVscGVyLlNldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJmaWVsZHNcIiwgZmllbGRzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRUYWJsZXMuR2V0TGlzdCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGNoaWxkVGFibGVzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiB0aGlzLmNoaWxkVGFibGVzLkdldExpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRUYWJsZXMucHVzaCh2YWx1ZS5Db252ZXJ0VG9Kc29uT2JqZWN0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJwbW5Nb2RlbEpzb25IZWxwZXIuU2V0QXR0cmlidXRlVmFsdWUob2JqLCBcImNoaWxkVGFibGVzXCIsIGNoaWxkVGFibGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIExvYWRGcm9tSnNvbk9iamVjdChvYmo6IHt9KTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuTG9hZEZyb21Kc29uT2JqZWN0KG9iaik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YUlkID0gQnBtbk1vZGVsSnNvbkhlbHBlci5HZXRBdHRyaWJ1dGVWYWx1ZUFzU3RyaW5nKG9iaiwgXCJkYXRhSWRcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IHBlcnNpc3RlbmNlVHlwZSA9IEJwbW5Nb2RlbEpzb25IZWxwZXIuR2V0QXR0cmlidXRlVmFsdWVBc1N0cmluZyhvYmosIFwicGVyc2lzdFwiKTtcclxuICAgICAgICBpZiAocGVyc2lzdGVuY2VUeXBlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZVR5cGUgPSBCaWxsRGF0YVJvd1BlcnNpc3RlbmNlVHlwZVtwZXJzaXN0ZW5jZVR5cGVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpZWxkczogYW55W10gPSBCcG1uTW9kZWxKc29uSGVscGVyLkdldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJmaWVsZHNcIik7XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBmaWVsZHMpIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gbmV3IEJpbGxEYXRhRmllbGQoKTtcclxuICAgICAgICAgICAgdmFsdWUuTG9hZEZyb21Kc29uT2JqZWN0KGl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLmZpZWxkcy5BZGQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGNoaWxkVGFibGVzOiBhbnlbXSA9IEJwbW5Nb2RlbEpzb25IZWxwZXIuR2V0QXR0cmlidXRlVmFsdWUob2JqLCBcImNoaWxkVGFibGVzXCIpO1xyXG4gICAgICAgIGlmIChjaGlsZFRhYmxlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgY2hpbGRUYWJsZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG5ldyBCaWxsRGF0YVRhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5Mb2FkRnJvbUpzb25PYmplY3QoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkVGFibGVzLkFkZCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEdldEZpZWxkTWFwKCk6IHsgW2tleTogc3RyaW5nXTogQmlsbERhdGFGaWVsZCB9IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZHMuR2V0TWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEdldEZpZWxkTGlzdCgpOiBBcnJheTxCaWxsRGF0YUZpZWxkPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzLkdldExpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgR2V0Q2hpbGRUYWJsZU1hcCgpOiB7IFtrZXk6IHN0cmluZ106IEJpbGxEYXRhVGFibGUgfSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRUYWJsZXMuR2V0TWFwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEdldENoaWxkVGFibGVMaXN0KCk6IEFycmF5PEJpbGxEYXRhVGFibGU+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZFRhYmxlcy5HZXRMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEFkZEZpZWxkKGZpZWxkOiBCaWxsRGF0YUZpZWxkKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMuQWRkKGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgQWRkQ2hpbGRUYWJsZSh0YWJsZTogQmlsbERhdGFUYWJsZSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2hpbGRUYWJsZXMuQWRkKHRhYmxlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL3B1YmxpYyBTdHJpbmcgZ2V0RGF0YUlkUGF0aCgpXHJcbiAgICAvL3tcclxuICAgIC8vICAgIHJldHVybiBkYXRhSWQ7XHJcbiAgICAvL31cclxufSJdfQ==