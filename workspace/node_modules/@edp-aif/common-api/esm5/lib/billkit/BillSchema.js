/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { BpmnModelJsonHelper } from '../BpmnModelJsonHelper';
import { KitBill } from './KitBill';
import { BillSchemaTable } from './BillSchemaTable';
var BillSchema = /** @class */ (function (_super) {
    tslib_1.__extends(BillSchema, _super);
    function BillSchema() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @protected
     * @return {?}
     */
    BillSchema.prototype.ResetBeforeLoadFrom = /**
     * @protected
     * @return {?}
     */
    function () {
        _super.prototype.ResetBeforeLoadFrom.call(this);
        this.mainTable = null;
    };
    /**
     * @return {?}
     */
    BillSchema.prototype.ConvertToJsonObject = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var obj = _super.prototype.ConvertToJsonObject.call(this);
        BpmnModelJsonHelper.SetAttributeValue(obj, "mainTable", this.mainTable);
        return obj;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    BillSchema.prototype.LoadFromJsonObject = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        _super.prototype.LoadFromJsonObject.call(this, obj);
        this.mainTable = BpmnModelJsonHelper.GetAttributeValueAsJsonSerializable(obj, "mainTable", BillSchemaTable);
        this.ApplyRelationship();
    };
    /*
     * 将架构、主表、子表、列、字段之间的隶属关系应用到各个对象上。
     * */
    /*
         * 将架构、主表、子表、列、字段之间的隶属关系应用到各个对象上。
         * */
    /**
     * @return {?}
     */
    BillSchema.prototype.ApplyRelationship = /*
         * 将架构、主表、子表、列、字段之间的隶属关系应用到各个对象上。
         * */
    /**
     * @return {?}
     */
    function () {
        this.Apply2Table(this, null, this.mainTable);
        return this;
    };
    /**
     * @private
     * @param {?} attachedBillSchema
     * @param {?} attachedTable
     * @param {?} table
     * @return {?}
     */
    BillSchema.prototype.Apply2Table = /**
     * @private
     * @param {?} attachedBillSchema
     * @param {?} attachedTable
     * @param {?} table
     * @return {?}
     */
    function (attachedBillSchema, attachedTable, table) {
        var e_1, _a, e_2, _b;
        table.attachedBillSchema = attachedBillSchema;
        table.attachedTable = attachedTable;
        try {
            for (var _c = tslib_1.__values(table.getFieldList()), _d = _c.next(); !_d.done; _d = _c.next()) {
                var field = _d.value;
                this.Apply2Field(table, field);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        try {
            for (var _e = tslib_1.__values(table.GetChildTableList()), _f = _e.next(); !_f.done; _f = _e.next()) {
                var childTable = _f.value;
                this.Apply2Table(table.attachedBillSchema, table, childTable);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    /**
     * @private
     * @param {?} attachedTable
     * @param {?} field
     * @return {?}
     */
    BillSchema.prototype.Apply2Field = /**
     * @private
     * @param {?} attachedTable
     * @param {?} field
     * @return {?}
     */
    function (attachedTable, field) {
        var e_3, _a;
        field.attachedTable = attachedTable;
        try {
            for (var _b = tslib_1.__values(field.GetSubFieldList()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var subField = _c.value;
                this.Apply2SubField(field, subField);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
    };
    /**
     * @private
     * @param {?} attachedField
     * @param {?} field
     * @return {?}
     */
    BillSchema.prototype.Apply2SubField = /**
     * @private
     * @param {?} attachedField
     * @param {?} field
     * @return {?}
     */
    function (attachedField, field) {
        var e_4, _a;
        field.attachedField = attachedField;
        try {
            for (var _b = tslib_1.__values(field.GetSubFieldList()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var subField = _c.value;
                this.Apply2SubField(field, subField);
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    return BillSchema;
}(KitBill));
export { BillSchema };
if (false) {
    /** @type {?} */
    BillSchema.prototype.mainTable;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmlsbFNjaGVtYS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlZHAtYWlmL2NvbW1vbi1hcGkvIiwic291cmNlcyI6WyJsaWIvYmlsbGtpdC9CaWxsU2NoZW1hLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNwQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFLcEQ7SUFBZ0Msc0NBQU87SUFBdkM7O0lBZ0VBLENBQUM7Ozs7O0lBN0RhLHdDQUFtQjs7OztJQUE3QjtRQUNJLGlCQUFNLG1CQUFtQixXQUFFLENBQUM7UUFFNUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFDMUIsQ0FBQzs7OztJQUdNLHdDQUFtQjs7O0lBQTFCOztZQUNRLEdBQUcsR0FBRyxpQkFBTSxtQkFBbUIsV0FBRTtRQUVyQyxtQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUV4RSxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7Ozs7O0lBR00sdUNBQWtCOzs7O0lBQXpCLFVBQTBCLEdBQU87UUFDN0IsaUJBQU0sa0JBQWtCLFlBQUMsR0FBRyxDQUFDLENBQUM7UUFFOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQyxtQ0FBbUMsQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBRTVHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRDs7U0FFSzs7Ozs7OztJQUNFLHNDQUFpQjs7Ozs7O0lBQXhCO1FBQ0ksSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUU3QyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDOzs7Ozs7OztJQUVPLGdDQUFXOzs7Ozs7O0lBQW5CLFVBQW9CLGtCQUE4QixFQUFFLGFBQThCLEVBQUUsS0FBc0I7O1FBQ3RHLEtBQUssQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztRQUM5QyxLQUFLLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQzs7WUFFcEMsS0FBa0IsSUFBQSxLQUFBLGlCQUFBLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQSxnQkFBQSw0QkFBRTtnQkFBbkMsSUFBSSxLQUFLLFdBQUE7Z0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDbEM7Ozs7Ozs7Ozs7WUFFRCxLQUF1QixJQUFBLEtBQUEsaUJBQUEsS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUEsZ0JBQUEsNEJBQUU7Z0JBQTdDLElBQUksVUFBVSxXQUFBO2dCQUNmLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQzthQUNqRTs7Ozs7Ozs7O0lBQ0wsQ0FBQzs7Ozs7OztJQUVPLGdDQUFXOzs7Ozs7SUFBbkIsVUFBb0IsYUFBOEIsRUFBRSxLQUFzQjs7UUFDdEUsS0FBSyxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7O1lBRXBDLEtBQXFCLElBQUEsS0FBQSxpQkFBQSxLQUFLLENBQUMsZUFBZSxFQUFFLENBQUEsZ0JBQUEsNEJBQUU7Z0JBQXpDLElBQUksUUFBUSxXQUFBO2dCQUNiLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBQ3hDOzs7Ozs7Ozs7SUFDTCxDQUFDOzs7Ozs7O0lBRU8sbUNBQWM7Ozs7OztJQUF0QixVQUF1QixhQUFrQyxFQUFFLEtBQXlCOztRQUNoRixLQUFLLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQzs7WUFFcEMsS0FBcUIsSUFBQSxLQUFBLGlCQUFBLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQSxnQkFBQSw0QkFBRTtnQkFBekMsSUFBSSxRQUFRLFdBQUE7Z0JBQ2IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDeEM7Ozs7Ozs7OztJQUNMLENBQUM7SUFDTCxpQkFBQztBQUFELENBQUMsQUFoRUQsQ0FBZ0MsT0FBTyxHQWdFdEM7Ozs7SUEvREcsK0JBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnBtbk1vZGVsSnNvbkhlbHBlciB9IGZyb20gJy4uL0JwbW5Nb2RlbEpzb25IZWxwZXInO1xyXG5pbXBvcnQgeyBLaXRCaWxsIH0gZnJvbSAnLi9LaXRCaWxsJztcclxuaW1wb3J0IHsgQmlsbFNjaGVtYVRhYmxlIH0gZnJvbSAnLi9CaWxsU2NoZW1hVGFibGUnO1xyXG5pbXBvcnQgeyBCaWxsU2NoZW1hRmllbGQgfSBmcm9tICcuL0JpbGxTY2hlbWFGaWVsZCc7XHJcbmltcG9ydCB7IEJpbGxTY2hlbWFGaWVsZEJhc2UgfSBmcm9tICcuL0JpbGxTY2hlbWFGaWVsZEJhc2UnO1xyXG5pbXBvcnQgeyBCaWxsU2NoZW1hU3ViRmllbGQgfSBmcm9tICcuL0JpbGxTY2hlbWFTdWJGaWVsZCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmlsbFNjaGVtYSBleHRlbmRzIEtpdEJpbGwge1xyXG4gICAgbWFpblRhYmxlOiBCaWxsU2NoZW1hVGFibGU7XHJcblxyXG4gICAgcHJvdGVjdGVkIFJlc2V0QmVmb3JlTG9hZEZyb20oKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuUmVzZXRCZWZvcmVMb2FkRnJvbSgpO1xyXG5cclxuICAgICAgICB0aGlzLm1haW5UYWJsZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBDb252ZXJ0VG9Kc29uT2JqZWN0KCk6IHt9IHtcclxuICAgICAgICBsZXQgb2JqID0gc3VwZXIuQ29udmVydFRvSnNvbk9iamVjdCgpO1xyXG5cclxuICAgICAgICBCcG1uTW9kZWxKc29uSGVscGVyLlNldEF0dHJpYnV0ZVZhbHVlKG9iaiwgXCJtYWluVGFibGVcIiwgdGhpcy5tYWluVGFibGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgTG9hZEZyb21Kc29uT2JqZWN0KG9iajoge30pOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5Mb2FkRnJvbUpzb25PYmplY3Qob2JqKTtcclxuXHJcbiAgICAgICAgdGhpcy5tYWluVGFibGUgPSBCcG1uTW9kZWxKc29uSGVscGVyLkdldEF0dHJpYnV0ZVZhbHVlQXNKc29uU2VyaWFsaXphYmxlKG9iaiwgXCJtYWluVGFibGVcIiwgQmlsbFNjaGVtYVRhYmxlKTtcclxuXHJcbiAgICAgICAgdGhpcy5BcHBseVJlbGF0aW9uc2hpcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiDlsIbmnrbmnoTjgIHkuLvooajjgIHlrZDooajjgIHliJfjgIHlrZfmrrXkuYvpl7TnmoTpmrblsZ7lhbPns7vlupTnlKjliLDlkITkuKrlr7nosaHkuIrjgIJcclxuICAgICAqICovXHJcbiAgICBwdWJsaWMgQXBwbHlSZWxhdGlvbnNoaXAoKTogQmlsbFNjaGVtYSB7XHJcbiAgICAgICAgdGhpcy5BcHBseTJUYWJsZSh0aGlzLCBudWxsLCB0aGlzLm1haW5UYWJsZSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgQXBwbHkyVGFibGUoYXR0YWNoZWRCaWxsU2NoZW1hOiBCaWxsU2NoZW1hLCBhdHRhY2hlZFRhYmxlOiBCaWxsU2NoZW1hVGFibGUsIHRhYmxlOiBCaWxsU2NoZW1hVGFibGUpOiB2b2lkIHtcclxuICAgICAgICB0YWJsZS5hdHRhY2hlZEJpbGxTY2hlbWEgPSBhdHRhY2hlZEJpbGxTY2hlbWE7XHJcbiAgICAgICAgdGFibGUuYXR0YWNoZWRUYWJsZSA9IGF0dGFjaGVkVGFibGU7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGZpZWxkIG9mIHRhYmxlLmdldEZpZWxkTGlzdCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQXBwbHkyRmllbGQodGFibGUsIGZpZWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNoaWxkVGFibGUgb2YgdGFibGUuR2V0Q2hpbGRUYWJsZUxpc3QoKSkge1xyXG4gICAgICAgICAgICB0aGlzLkFwcGx5MlRhYmxlKHRhYmxlLmF0dGFjaGVkQmlsbFNjaGVtYSwgdGFibGUsIGNoaWxkVGFibGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEFwcGx5MkZpZWxkKGF0dGFjaGVkVGFibGU6IEJpbGxTY2hlbWFUYWJsZSwgZmllbGQ6IEJpbGxTY2hlbWFGaWVsZCk6IHZvaWQge1xyXG4gICAgICAgIGZpZWxkLmF0dGFjaGVkVGFibGUgPSBhdHRhY2hlZFRhYmxlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzdWJGaWVsZCBvZiBmaWVsZC5HZXRTdWJGaWVsZExpc3QoKSkge1xyXG4gICAgICAgICAgICB0aGlzLkFwcGx5MlN1YkZpZWxkKGZpZWxkLCBzdWJGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgQXBwbHkyU3ViRmllbGQoYXR0YWNoZWRGaWVsZDogQmlsbFNjaGVtYUZpZWxkQmFzZSwgZmllbGQ6IEJpbGxTY2hlbWFTdWJGaWVsZCk6IHZvaWQge1xyXG4gICAgICAgIGZpZWxkLmF0dGFjaGVkRmllbGQgPSBhdHRhY2hlZEZpZWxkO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzdWJGaWVsZCBvZiBmaWVsZC5HZXRTdWJGaWVsZExpc3QoKSkge1xyXG4gICAgICAgICAgICB0aGlzLkFwcGx5MlN1YkZpZWxkKGZpZWxkLCBzdWJGaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19