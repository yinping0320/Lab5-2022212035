/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { StructuredReferType } from '../../define/data-type/structured-type-refer-type/structured-refer-type';
var ReferReplaceUtil = /** @class */ (function () {
    function ReferReplaceUtil() {
    }
    /**
     * @param {?} allStructureTypes
     * @param {?} operations
     * @return {?}
     */
    ReferReplaceUtil.replaceOperationRefer = /**
     * @param {?} allStructureTypes
     * @param {?} operations
     * @return {?}
     */
    function (allStructureTypes, operations) {
        var _this = this;
        if (operations != null) {
            operations.forEach((/**
             * @param {?} op
             * @return {?}
             */
            function (op) {
                /** @type {?} */
                var retType = op.returnType;
                if (retType != null && retType instanceof StructuredReferType) {
                    /** @type {?} */
                    var structureTypeId = ((/** @type {?} */ (retType))).refId;
                    /** @type {?} */
                    var queryStructureType = _this.getRefStructureType(allStructureTypes, structureTypeId);
                    op.returnType = queryStructureType;
                }
                if (op.parameters != null) {
                    op.parameters.forEach((/**
                     * @param {?} parameter
                     * @return {?}
                     */
                    function (parameter) {
                        /** @type {?} */
                        var parameterType = parameter.parameterType;
                        if (parameterType instanceof StructuredReferType) {
                            /** @type {?} */
                            var structureTypeId = ((/** @type {?} */ (parameterType))).refId;
                            /** @type {?} */
                            var queryStructureType = _this.getRefStructureType(allStructureTypes, structureTypeId);
                            parameter.parameterType = queryStructureType;
                        }
                    }));
                }
            }));
        }
    };
    /**
     * @param {?} structure
     * @return {?}
     */
    ReferReplaceUtil.replacePropertyRefer = /**
     * @param {?} structure
     * @return {?}
     */
    function (structure) {
        var _this = this;
        /** @type {?} */
        var allStructures = this.getAllStructuredTypes(structure);
        if (structure.structuredTypes != null) {
            structure.structuredTypes.forEach((/**
             * @param {?} structureType
             * @return {?}
             */
            function (structureType) {
                if (structureType.properties != null) {
                    structureType.properties.forEach((/**
                     * @param {?} prop
                     * @return {?}
                     */
                    function (prop) {
                        if (prop.propertyType instanceof StructuredReferType) {
                            /** @type {?} */
                            var structureTypeId = ((/** @type {?} */ (prop.propertyType))).refId;
                            /** @type {?} */
                            var queryStructureType = _this.getRefStructureType(allStructures, structureTypeId);
                            prop.propertyType = queryStructureType;
                        }
                    }));
                }
            }));
        }
        if (structure.refStructures != null) {
            structure.refStructures.forEach((/**
             * @param {?} refStructure
             * @return {?}
             */
            function (refStructure) {
                _this.replacePropertyRefer(refStructure);
            }));
        }
    };
    /**
     * @param {?} allStructures
     * @param {?} structureId
     * @return {?}
     */
    ReferReplaceUtil.getRefStructureType = /**
     * @param {?} allStructures
     * @param {?} structureId
     * @return {?}
     */
    function (allStructures, structureId) {
        /** @type {?} */
        var queryStructureType = allStructures.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id == structureId; }));
        return queryStructureType;
    };
    /**
     * @param {?} structure
     * @return {?}
     */
    ReferReplaceUtil.getAllStructuredTypes = /**
     * @param {?} structure
     * @return {?}
     */
    function (structure) {
        /** @type {?} */
        var array = new Array();
        if (structure.structuredTypes != null) {
            array = array.concat(structure.structuredTypes);
        }
        if (structure.refStructures != null) {
            structure.refStructures.forEach((/**
             * @param {?} refStructure
             * @return {?}
             */
            function (refStructure) {
                if (refStructure.structuredTypes != null) {
                    array = array.concat(refStructure.structuredTypes);
                }
            }));
        }
        return array;
    };
    return ReferReplaceUtil;
}());
export { ReferReplaceUtil };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVmZXItcmVwbGFjZS11dGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGVjcC1jYWYvY29tbW9uLXN0cnVjdHVyZS8iLCJzb3VyY2VzIjpbImxpYi9jb252ZXJ0b3IvdXRpbHMvcmVmZXItcmVwbGFjZS11dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFHQSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5RUFBeUUsQ0FBQztBQUs5RztJQUFBO0lBcUVBLENBQUM7Ozs7OztJQXBFVSxzQ0FBcUI7Ozs7O0lBQTVCLFVBQTZCLGlCQUFtQyxFQUFFLFVBQXVCO1FBQXpGLGlCQXFCQztRQXBCRyxJQUFJLFVBQVUsSUFBSSxJQUFJLEVBQUU7WUFDcEIsVUFBVSxDQUFDLE9BQU87Ozs7WUFBQyxVQUFBLEVBQUU7O29CQUNiLE9BQU8sR0FBRyxFQUFFLENBQUMsVUFBVTtnQkFDM0IsSUFBSSxPQUFPLElBQUksSUFBSSxJQUFJLE9BQU8sWUFBWSxtQkFBbUIsRUFBRTs7d0JBQ3ZELGVBQWUsR0FBVyxDQUFDLG1CQUFBLE9BQU8sRUFBdUIsQ0FBQyxDQUFDLEtBQUs7O3dCQUNoRSxrQkFBa0IsR0FBRyxLQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsZUFBZSxDQUFDO29CQUNyRixFQUFFLENBQUMsVUFBVSxHQUFHLGtCQUFrQixDQUFDO2lCQUN0QztnQkFDRCxJQUFJLEVBQUUsQ0FBQyxVQUFVLElBQUksSUFBSSxFQUFFO29CQUN2QixFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU87Ozs7b0JBQUMsVUFBQSxTQUFTOzs0QkFDdkIsYUFBYSxHQUFHLFNBQVMsQ0FBQyxhQUFhO3dCQUMzQyxJQUFJLGFBQWEsWUFBWSxtQkFBbUIsRUFBRTs7Z0NBQzFDLGVBQWUsR0FBVyxDQUFDLG1CQUFBLGFBQWEsRUFBdUIsQ0FBQyxDQUFDLEtBQUs7O2dDQUN0RSxrQkFBa0IsR0FBRyxLQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsZUFBZSxDQUFDOzRCQUNyRixTQUFTLENBQUMsYUFBYSxHQUFHLGtCQUFrQixDQUFDO3lCQUNoRDtvQkFDTCxDQUFDLEVBQUMsQ0FBQTtpQkFDTDtZQUNMLENBQUMsRUFBQyxDQUFBO1NBQ0w7SUFDTCxDQUFDOzs7OztJQUdNLHFDQUFvQjs7OztJQUEzQixVQUE0QixTQUEwQjtRQUF0RCxpQkFvQkM7O1lBbkJPLGFBQWEsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsU0FBUyxDQUFDO1FBQ3pELElBQUksU0FBUyxDQUFDLGVBQWUsSUFBSSxJQUFJLEVBQUU7WUFDbkMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxhQUFhO2dCQUMzQyxJQUFJLGFBQWEsQ0FBQyxVQUFVLElBQUksSUFBSSxFQUFFO29CQUNsQyxhQUFhLENBQUMsVUFBVSxDQUFDLE9BQU87Ozs7b0JBQUMsVUFBQSxJQUFJO3dCQUNqQyxJQUFJLElBQUksQ0FBQyxZQUFZLFlBQVksbUJBQW1CLEVBQUU7O2dDQUM5QyxlQUFlLEdBQUcsQ0FBQyxtQkFBQSxJQUFJLENBQUMsWUFBWSxFQUF1QixDQUFDLENBQUMsS0FBSzs7Z0NBQ2xFLGtCQUFrQixHQUFHLEtBQUksQ0FBQyxtQkFBbUIsQ0FBQyxhQUFhLEVBQUUsZUFBZSxDQUFDOzRCQUNqRixJQUFJLENBQUMsWUFBWSxHQUFHLGtCQUFrQixDQUFDO3lCQUMxQztvQkFDTCxDQUFDLEVBQUMsQ0FBQTtpQkFDTDtZQUNMLENBQUMsRUFBQyxDQUFBO1NBQ0w7UUFDRCxJQUFJLFNBQVMsQ0FBQyxhQUFhLElBQUksSUFBSSxFQUFFO1lBQ2pDLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTzs7OztZQUFDLFVBQUEsWUFBWTtnQkFDeEMsS0FBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzVDLENBQUMsRUFBQyxDQUFBO1NBQ0w7SUFDTCxDQUFDOzs7Ozs7SUFFTSxvQ0FBbUI7Ozs7O0lBQTFCLFVBQTJCLGFBQStCLEVBQUUsV0FBbUI7O1lBQ3ZFLGtCQUFrQixHQUFHLGFBQWEsQ0FBQyxJQUFJOzs7O1FBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsRUFBRSxJQUFJLFdBQVcsRUFBbkIsQ0FBbUIsRUFBQztRQUNyRSxPQUFPLGtCQUFrQixDQUFDO0lBQzlCLENBQUM7Ozs7O0lBRU0sc0NBQXFCOzs7O0lBQTVCLFVBQTZCLFNBQTBCOztZQUMvQyxLQUFLLEdBQTBCLElBQUksS0FBSyxFQUFrQjtRQUM5RCxJQUFJLFNBQVMsQ0FBQyxlQUFlLElBQUksSUFBSSxFQUFFO1lBQ25DLEtBQUssR0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUNqRDtRQUNELElBQUksU0FBUyxDQUFDLGFBQWEsSUFBSSxJQUFJLEVBQUU7WUFDakMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxZQUFZO2dCQUN4QyxJQUFJLFlBQVksQ0FBQyxlQUFlLElBQUksSUFBSSxFQUFFO29CQUN0QyxLQUFLLEdBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7aUJBQ3BEO1lBQ0wsQ0FBQyxFQUFDLENBQUE7U0FDTDtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFJTCx1QkFBQztBQUFELENBQUMsQUFyRUQsSUFxRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tb25TdHJ1Y3R1cmUgfSBmcm9tICcuLi8uLi9kZWZpbmUvc3RydWN0dXJlL2NvbW1vbi1zdHJ1Y3R1cmUnO1xyXG5pbXBvcnQgeyBTdHJ1Y3R1cmVkVHlwZSB9IGZyb20gJy4uLy4uL2RlZmluZS9kYXRhLXR5cGUvc3RydWN0dXJlZC10eXBlL3N0cnVjdHVyZWQtdHlwZSc7XHJcbmltcG9ydCB7IElEYXRhVHlwZSB9IGZyb20gJy4uLy4uL2RlZmluZS9kYXRhLXR5cGUvaS1kYXRhLXR5cGUnO1xyXG5pbXBvcnQgeyBTdHJ1Y3R1cmVkUmVmZXJUeXBlIH0gZnJvbSAnLi4vLi4vZGVmaW5lL2RhdGEtdHlwZS9zdHJ1Y3R1cmVkLXR5cGUtcmVmZXItdHlwZS9zdHJ1Y3R1cmVkLXJlZmVyLXR5cGUnO1xyXG5pbXBvcnQgeyBFbnRpdHlPYmplY3QgfSBmcm9tICcuLi8uLi9kZWZpbmUvc3RydWN0dXJlL2VudGl0eS1vYmplY3QnO1xyXG5pbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi8uLi9kZWZpbmUvb3BlcmF0aW9uL29wZXJhdGlvbic7XHJcbmltcG9ydCB7IERhdGFUeXBlIH0gZnJvbSAnLi4vLi4vZGVmaW5lL2RhdGEtdHlwZS9kYXRhLXR5cGUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlZmVyUmVwbGFjZVV0aWwge1xyXG4gICAgc3RhdGljIHJlcGxhY2VPcGVyYXRpb25SZWZlcihhbGxTdHJ1Y3R1cmVUeXBlczogU3RydWN0dXJlZFR5cGVbXSwgb3BlcmF0aW9uczogT3BlcmF0aW9uW10pIHtcclxuICAgICAgICBpZiAob3BlcmF0aW9ucyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbnMuZm9yRWFjaChvcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmV0VHlwZSA9IG9wLnJldHVyblR5cGU7XHJcbiAgICAgICAgICAgICAgICBpZiAocmV0VHlwZSAhPSBudWxsICYmIHJldFR5cGUgaW5zdGFuY2VvZiBTdHJ1Y3R1cmVkUmVmZXJUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0cnVjdHVyZVR5cGVJZDogc3RyaW5nID0gKHJldFR5cGUgYXMgU3RydWN0dXJlZFJlZmVyVHlwZSkucmVmSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHF1ZXJ5U3RydWN0dXJlVHlwZSA9IHRoaXMuZ2V0UmVmU3RydWN0dXJlVHlwZShhbGxTdHJ1Y3R1cmVUeXBlcywgc3RydWN0dXJlVHlwZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBvcC5yZXR1cm5UeXBlID0gcXVlcnlTdHJ1Y3R1cmVUeXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wLnBhcmFtZXRlcnMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wLnBhcmFtZXRlcnMuZm9yRWFjaChwYXJhbWV0ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVyVHlwZSA9IHBhcmFtZXRlci5wYXJhbWV0ZXJUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVyVHlwZSBpbnN0YW5jZW9mIFN0cnVjdHVyZWRSZWZlclR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHJ1Y3R1cmVUeXBlSWQ6IHN0cmluZyA9IChwYXJhbWV0ZXJUeXBlIGFzIFN0cnVjdHVyZWRSZWZlclR5cGUpLnJlZklkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHF1ZXJ5U3RydWN0dXJlVHlwZSA9IHRoaXMuZ2V0UmVmU3RydWN0dXJlVHlwZShhbGxTdHJ1Y3R1cmVUeXBlcywgc3RydWN0dXJlVHlwZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlci5wYXJhbWV0ZXJUeXBlID0gcXVlcnlTdHJ1Y3R1cmVUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyByZXBsYWNlUHJvcGVydHlSZWZlcihzdHJ1Y3R1cmU6IENvbW1vblN0cnVjdHVyZSkge1xyXG4gICAgICAgIGxldCBhbGxTdHJ1Y3R1cmVzID0gdGhpcy5nZXRBbGxTdHJ1Y3R1cmVkVHlwZXMoc3RydWN0dXJlKTtcclxuICAgICAgICBpZiAoc3RydWN0dXJlLnN0cnVjdHVyZWRUeXBlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHN0cnVjdHVyZS5zdHJ1Y3R1cmVkVHlwZXMuZm9yRWFjaChzdHJ1Y3R1cmVUeXBlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJ1Y3R1cmVUeXBlLnByb3BlcnRpZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZVR5cGUucHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcC5wcm9wZXJ0eVR5cGUgaW5zdGFuY2VvZiBTdHJ1Y3R1cmVkUmVmZXJUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RydWN0dXJlVHlwZUlkID0gKHByb3AucHJvcGVydHlUeXBlIGFzIFN0cnVjdHVyZWRSZWZlclR5cGUpLnJlZklkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHF1ZXJ5U3RydWN0dXJlVHlwZSA9IHRoaXMuZ2V0UmVmU3RydWN0dXJlVHlwZShhbGxTdHJ1Y3R1cmVzLCBzdHJ1Y3R1cmVUeXBlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcC5wcm9wZXJ0eVR5cGUgPSBxdWVyeVN0cnVjdHVyZVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RydWN0dXJlLnJlZlN0cnVjdHVyZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdHJ1Y3R1cmUucmVmU3RydWN0dXJlcy5mb3JFYWNoKHJlZlN0cnVjdHVyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VQcm9wZXJ0eVJlZmVyKHJlZlN0cnVjdHVyZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRSZWZTdHJ1Y3R1cmVUeXBlKGFsbFN0cnVjdHVyZXM6IFN0cnVjdHVyZWRUeXBlW10sIHN0cnVjdHVyZUlkOiBzdHJpbmcpOiBTdHJ1Y3R1cmVkVHlwZSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5U3RydWN0dXJlVHlwZSA9IGFsbFN0cnVjdHVyZXMuZmluZCh4ID0+IHguaWQgPT0gc3RydWN0dXJlSWQpO1xyXG4gICAgICAgIHJldHVybiBxdWVyeVN0cnVjdHVyZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEFsbFN0cnVjdHVyZWRUeXBlcyhzdHJ1Y3R1cmU6IENvbW1vblN0cnVjdHVyZSkge1xyXG4gICAgICAgIGxldCBhcnJheTogQXJyYXk8U3RydWN0dXJlZFR5cGU+ID0gbmV3IEFycmF5PFN0cnVjdHVyZWRUeXBlPigpO1xyXG4gICAgICAgIGlmIChzdHJ1Y3R1cmUuc3RydWN0dXJlZFR5cGVzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgYXJyYXk9YXJyYXkuY29uY2F0KHN0cnVjdHVyZS5zdHJ1Y3R1cmVkVHlwZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RydWN0dXJlLnJlZlN0cnVjdHVyZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzdHJ1Y3R1cmUucmVmU3RydWN0dXJlcy5mb3JFYWNoKHJlZlN0cnVjdHVyZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVmU3RydWN0dXJlLnN0cnVjdHVyZWRUeXBlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXk9YXJyYXkuY29uY2F0KHJlZlN0cnVjdHVyZS5zdHJ1Y3R1cmVkVHlwZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn0iXX0=