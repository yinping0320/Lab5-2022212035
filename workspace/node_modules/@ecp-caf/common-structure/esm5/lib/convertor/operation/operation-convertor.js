/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ParameterConvertor } from '../parameter/parameter-convertor';
import { DataTypeConvertUtil } from '../utils/data-type-convert-util';
import { ExtensionConvertor } from '../extension/extension-convertor';
var OperationConvertor = /** @class */ (function () {
    function OperationConvertor() {
    }
    /**
     * @param {?} obj
     * @param {?} operation
     * @param {?} ctxt
     * @return {?}
     */
    OperationConvertor.prototype.convertToObject = /**
     * @param {?} obj
     * @param {?} operation
     * @param {?} ctxt
     * @return {?}
     */
    function (obj, operation, ctxt) {
        if (!operation) {
            return;
        }
        obj['kind'] = operation.kind;
        obj['code'] = operation.code;
        obj['name'] = operation.name;
        obj['uri'] = operation.uri;
        obj['description'] = operation.description;
        obj['returnType'] = null;
        if (operation.returnType) {
            /** @type {?} */
            var kind = operation.returnType.getKind();
            if (!kind) {
                throw new Error('操作序列化时返回值类型的TypeKind为空!');
            }
            obj['returnType'] = DataTypeConvertUtil.convertToObject(operation.returnType, ctxt);
        }
        obj['parameters'] = new Array();
        if (operation.parameters) {
            /** @type {?} */
            var parameterConvertor = new ParameterConvertor();
            operation.parameters.forEach((/**
             * @param {?} parameter
             * @return {?}
             */
            function (parameter) {
                /** @type {?} */
                var kind = parameter.kind;
                /** @type {?} */
                var serializer = ctxt.getParameterSerializerFactory().get(kind);
                /** @type {?} */
                var parameterObj = serializer.deserialize(parameter, ctxt);
                obj["parameters"].push(parameterObj);
            }));
        }
        if (operation.extension) {
            /** @type {?} */
            var extensionConvertor = new ExtensionConvertor();
            extensionConvertor.addToJObj(operation, obj);
        }
    };
    /**
     * @param {?} operation
     * @param {?} obj
     * @param {?} ctxt
     * @return {?}
     */
    OperationConvertor.prototype.initFromObject = /**
     * @param {?} operation
     * @param {?} obj
     * @param {?} ctxt
     * @return {?}
     */
    function (operation, obj, ctxt) {
        if (!obj) {
            return;
        }
        operation.kind = obj['kind'];
        operation.code = obj['code'];
        operation.name = obj['name'];
        operation.uri = obj['uri'];
        operation.description = obj['description'];
        if (obj['parameters']) {
            operation.parameters = new Array();
            /** @type {?} */
            var parameterConvertor = new ParameterConvertor();
            obj['parameters'].forEach((/**
             * @param {?} parameterObj
             * @return {?}
             */
            function (parameterObj) {
                /** @type {?} */
                var kind = parameterObj['kind'];
                /** @type {?} */
                var serializer = ctxt.getParameterSerializerFactory().get(kind);
                /** @type {?} */
                var parameter = serializer.deserialize(parameterObj, ctxt);
                operation.parameters.push(parameter);
            }));
        }
        if (obj['returnType']) {
            /** @type {?} */
            var kind = obj['returnType']['kind'];
            if (!kind) {
                throw new Error('解析操作的返回值时TypeKind为空！');
            }
            operation.returnType = DataTypeConvertUtil.initFromObject(obj['returnType'], ctxt);
        }
        if (obj["extension"]) {
            /** @type {?} */
            var extensionConvertor = new ExtensionConvertor();
            extensionConvertor.addToObj(operation, obj);
        }
    };
    return OperationConvertor;
}());
export { OperationConvertor };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlcmF0aW9uLWNvbnZlcnRvci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlY3AtY2FmL2NvbW1vbi1zdHJ1Y3R1cmUvIiwic291cmNlcyI6WyJsaWIvY29udmVydG9yL29wZXJhdGlvbi9vcGVyYXRpb24tY29udmVydG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN0RSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUV0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUV0RTtJQUFBO0lBd0VBLENBQUM7Ozs7Ozs7SUF0RUcsNENBQWU7Ozs7OztJQUFmLFVBQWdCLEdBQVUsRUFBQyxTQUFtQixFQUFDLElBQXNCO1FBQ2pFLElBQUcsQ0FBQyxTQUFTLEVBQUM7WUFDVixPQUFRO1NBQ1g7UUFDRCxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztRQUUzQixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztRQUMzQixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztRQUMzQixHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQztRQUN6QixHQUFHLENBQUMsYUFBYSxDQUFDLEdBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQztRQUV6QyxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUMsSUFBSSxDQUFDO1FBQ3ZCLElBQUcsU0FBUyxDQUFDLFVBQVUsRUFBQzs7Z0JBQ2hCLElBQUksR0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRTtZQUN2QyxJQUFHLENBQUMsSUFBSSxFQUFDO2dCQUNMLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQzthQUM5QztZQUNELEdBQUcsQ0FB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QUMsQUF4RUQsSUF3RUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi8uLi9kZWZpbmUvb3BlcmF0aW9uL29wZXJhdGlvbic7XHJcbmltcG9ydCB7IFBhcmFtZXRlciB9IGZyb20gJy4uLy4uL2RlZmluZS9wYXJhbWV0ZXIvcGFyYW1ldGVyJztcclxuaW1wb3J0IHsgUGFyYW1ldGVyQ29udmVydG9yIH0gZnJvbSAnLi4vcGFyYW1ldGVyL3BhcmFtZXRlci1jb252ZXJ0b3InO1xyXG5pbXBvcnQgeyBEYXRhVHlwZUNvbnZlcnRVdGlsIH0gZnJvbSAnLi4vdXRpbHMvZGF0YS10eXBlLWNvbnZlcnQtdXRpbCc7XHJcbmltcG9ydCB7IElTZXJpYWxpemVDb250ZXh0IH0gZnJvbSAnLi4vLi4vc2VyaWFsaXplLWNvbnRleHQvZXh0ZW5zaW9uL2ktc2VyaWFsaXplLWNvbnRleHQnO1xyXG5pbXBvcnQgeyBFeHRlbnNpb25Db252ZXJ0b3IgfSBmcm9tICcuLi9leHRlbnNpb24vZXh0ZW5zaW9uLWNvbnZlcnRvcic7XHJcblxyXG5leHBvcnQgY2xhc3MgT3BlcmF0aW9uQ29udmVydG9ye1xyXG5cclxuICAgIGNvbnZlcnRUb09iamVjdChvYmo6T2JqZWN0LG9wZXJhdGlvbjpPcGVyYXRpb24sY3R4dDpJU2VyaWFsaXplQ29udGV4dCk6dm9pZHtcclxuICAgICAgICBpZighb3BlcmF0aW9uKXtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqWydraW5kJ109b3BlcmF0aW9uLmtpbmQ7XHJcblxyXG4gICAgICAgIG9ialsnY29kZSddPW9wZXJhdGlvbi5jb2RlO1xyXG4gICAgICAgIG9ialsnbmFtZSddPW9wZXJhdGlvbi5uYW1lO1xyXG4gICAgICAgIG9ialsndXJpJ109b3BlcmF0aW9uLnVyaTtcclxuICAgICAgICBvYmpbJ2Rlc2NyaXB0aW9uJ109b3BlcmF0aW9uLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICBvYmpbJ3JldHVyblR5cGUnXT1udWxsO1xyXG4gICAgICAgIGlmKG9wZXJhdGlvbi5yZXR1cm5UeXBlKXtcclxuICAgICAgICAgICAgbGV0IGtpbmQ9b3BlcmF0aW9uLnJldHVyblR5cGUuZ2V0S2luZCgpO1xyXG4gICAgICAgICAgICBpZigha2luZCl7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aTjeS9nOW6j+WIl+WMluaXtui/lOWbnuWAvOexu+Wei+eahFR5cGVLaW5k5Li656m6IScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9ialsncmV0dXJuVHlwZSddPURhdGFUeXBlQ29udmVydFV0aWwuY29udmVydFRvT2JqZWN0KG9wZXJhdGlvbi5yZXR1cm5UeXBlLGN0eHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBvYmpbJ3BhcmFtZXRlcnMnXT1uZXcgQXJyYXk8T2JqZWN0PigpO1xyXG4gICAgICAgIGlmKG9wZXJhdGlvbi5wYXJhbWV0ZXJzKXtcclxuICAgICAgICAgICAgbGV0IHBhcmFtZXRlckNvbnZlcnRvcj1uZXcgUGFyYW1ldGVyQ29udmVydG9yKCk7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbi5wYXJhbWV0ZXJzLmZvckVhY2gocGFyYW1ldGVyID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBraW5kPXBhcmFtZXRlci5raW5kO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcmlhbGl6ZXI9Y3R4dC5nZXRQYXJhbWV0ZXJTZXJpYWxpemVyRmFjdG9yeSgpLmdldChraW5kKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJPYmo9c2VyaWFsaXplci5kZXNlcmlhbGl6ZShwYXJhbWV0ZXIsY3R4dCk7XHJcbiAgICAgICAgICAgICAgICBvYmpbXCJwYXJhbWV0ZXJzXCJdLnB1c2gocGFyYW1ldGVyT2JqKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvcGVyYXRpb24uZXh0ZW5zaW9uKXtcclxuICAgICAgICAgICAgbGV0IGV4dGVuc2lvbkNvbnZlcnRvcj1uZXcgRXh0ZW5zaW9uQ29udmVydG9yKCk7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbkNvbnZlcnRvci5hZGRUb0pPYmoob3BlcmF0aW9uLG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRGcm9tT2JqZWN0KG9wZXJhdGlvbjpPcGVyYXRpb24sb2JqOk9iamVjdCxjdHh0OklTZXJpYWxpemVDb250ZXh0KTp2b2lke1xyXG4gICAgICAgIGlmKCFvYmope1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvcGVyYXRpb24ua2luZD1vYmpbJ2tpbmQnXTtcclxuICAgICAgICBvcGVyYXRpb24uY29kZT1vYmpbJ2NvZGUnXTtcclxuICAgICAgICBvcGVyYXRpb24ubmFtZT1vYmpbJ25hbWUnXTtcclxuICAgICAgICBvcGVyYXRpb24udXJpPW9ialsndXJpJ107XHJcbiAgICAgICAgb3BlcmF0aW9uLmRlc2NyaXB0aW9uPW9ialsnZGVzY3JpcHRpb24nXTtcclxuXHJcbiAgICAgICAgaWYob2JqWydwYXJhbWV0ZXJzJ10pe1xyXG4gICAgICAgICAgICBvcGVyYXRpb24ucGFyYW1ldGVycz1uZXcgQXJyYXk8UGFyYW1ldGVyPigpO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW1ldGVyQ29udmVydG9yPW5ldyBQYXJhbWV0ZXJDb252ZXJ0b3IoKTtcclxuICAgICAgICAgICAgb2JqWydwYXJhbWV0ZXJzJ10uZm9yRWFjaChwYXJhbWV0ZXJPYmogPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtpbmQ9cGFyYW1ldGVyT2JqWydraW5kJ107XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWFsaXplcj1jdHh0LmdldFBhcmFtZXRlclNlcmlhbGl6ZXJGYWN0b3J5KCkuZ2V0KGtpbmQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcj1zZXJpYWxpemVyLmRlc2VyaWFsaXplKHBhcmFtZXRlck9iaixjdHh0KTtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5wYXJhbWV0ZXJzLnB1c2gocGFyYW1ldGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG9ialsncmV0dXJuVHlwZSddKXtcclxuICAgICAgICAgICAgbGV0IGtpbmQ9b2JqWydyZXR1cm5UeXBlJ11bJ2tpbmQnXTtcclxuICAgICAgICAgICAgaWYoIWtpbmQpe1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfop6PmnpDmk43kvZznmoTov5Tlm57lgLzml7ZUeXBlS2luZOS4uuepuu+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbi5yZXR1cm5UeXBlPURhdGFUeXBlQ29udmVydFV0aWwuaW5pdEZyb21PYmplY3Qob2JqWydyZXR1cm5UeXBlJ10sY3R4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKG9ialtcImV4dGVuc2lvblwiXSl7XHJcbiAgICAgICAgICAgIGxldCBleHRlbnNpb25Db252ZXJ0b3I9bmV3IEV4dGVuc2lvbkNvbnZlcnRvcigpO1xyXG4gICAgICAgICAgICBleHRlbnNpb25Db252ZXJ0b3IuYWRkVG9PYmoob3BlcmF0aW9uLG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19