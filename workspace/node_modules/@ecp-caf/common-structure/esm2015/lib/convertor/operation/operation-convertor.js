/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ParameterConvertor } from '../parameter/parameter-convertor';
import { DataTypeConvertUtil } from '../utils/data-type-convert-util';
import { ExtensionConvertor } from '../extension/extension-convertor';
export class OperationConvertor {
    /**
     * @param {?} obj
     * @param {?} operation
     * @param {?} ctxt
     * @return {?}
     */
    convertToObject(obj, operation, ctxt) {
        if (!operation) {
            return;
        }
        obj['kind'] = operation.kind;
        obj['code'] = operation.code;
        obj['name'] = operation.name;
        obj['uri'] = operation.uri;
        obj['description'] = operation.description;
        obj['returnType'] = null;
        if (operation.returnType) {
            /** @type {?} */
            let kind = operation.returnType.getKind();
            if (!kind) {
                throw new Error('操作序列化时返回值类型的TypeKind为空!');
            }
            obj['returnType'] = DataTypeConvertUtil.convertToObject(operation.returnType, ctxt);
        }
        obj['parameters'] = new Array();
        if (operation.parameters) {
            /** @type {?} */
            let parameterConvertor = new ParameterConvertor();
            operation.parameters.forEach((/**
             * @param {?} parameter
             * @return {?}
             */
            parameter => {
                /** @type {?} */
                var kind = parameter.kind;
                /** @type {?} */
                var serializer = ctxt.getParameterSerializerFactory().get(kind);
                /** @type {?} */
                var parameterObj = serializer.deserialize(parameter, ctxt);
                obj["parameters"].push(parameterObj);
            }));
        }
        if (operation.extension) {
            /** @type {?} */
            let extensionConvertor = new ExtensionConvertor();
            extensionConvertor.addToJObj(operation, obj);
        }
    }
    /**
     * @param {?} operation
     * @param {?} obj
     * @param {?} ctxt
     * @return {?}
     */
    initFromObject(operation, obj, ctxt) {
        if (!obj) {
            return;
        }
        operation.kind = obj['kind'];
        operation.code = obj['code'];
        operation.name = obj['name'];
        operation.uri = obj['uri'];
        operation.description = obj['description'];
        if (obj['parameters']) {
            operation.parameters = new Array();
            /** @type {?} */
            let parameterConvertor = new ParameterConvertor();
            obj['parameters'].forEach((/**
             * @param {?} parameterObj
             * @return {?}
             */
            parameterObj => {
                /** @type {?} */
                var kind = parameterObj['kind'];
                /** @type {?} */
                var serializer = ctxt.getParameterSerializerFactory().get(kind);
                /** @type {?} */
                var parameter = serializer.deserialize(parameterObj, ctxt);
                operation.parameters.push(parameter);
            }));
        }
        if (obj['returnType']) {
            /** @type {?} */
            let kind = obj['returnType']['kind'];
            if (!kind) {
                throw new Error('解析操作的返回值时TypeKind为空！');
            }
            operation.returnType = DataTypeConvertUtil.initFromObject(obj['returnType'], ctxt);
        }
        if (obj["extension"]) {
            /** @type {?} */
            let extensionConvertor = new ExtensionConvertor();
            extensionConvertor.addToObj(operation, obj);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlcmF0aW9uLWNvbnZlcnRvci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BlY3AtY2FmL2NvbW1vbi1zdHJ1Y3R1cmUvIiwic291cmNlcyI6WyJsaWIvY29udmVydG9yL29wZXJhdGlvbi9vcGVyYXRpb24tY29udmVydG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN0RSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUV0RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUV0RSxNQUFNLE9BQU8sa0JBQWtCOzs7Ozs7O0lBRTNCLGVBQWUsQ0FBQyxHQUFVLEVBQUMsU0FBbUIsRUFBQyxJQUFzQjtRQUNqRSxJQUFHLENBQUMsU0FBUyxFQUFDO1lBQ1YsT0FBUTtTQUNYO1FBQ0QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFFM0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDM0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDM0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUM7UUFDekIsR0FBRyxDQUFDLGFBQWEsQ0FBQyxHQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFekMsR0FBRyxDQUFDLFlBQVksQ0FBQyxHQUFDLElBQUksQ0FBQztRQUN2QixJQUFHLFNBQVMsQ0FBQyxVQUFVLEVBQUM7O2dCQUNoQixJQUFJLEdBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUU7WUFDdkMsSUFBRyxDQUFDLElBQUksRUFBQztnQkFDTCxNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7YUFDOUM7WUFDRCxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUMsSUFBSSxDQUFDLENBQUM7U0FDcEY7UUFFRCxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUMsSUFBSSxLQUFLLEVBQVUsQ0FBQztRQUN0QyxJQUFHLFNBQVMsQ0FBQyxVQUFVLEVBQUM7O2dCQUNoQixrQkFBa0IsR0FBQyxJQUFJLGtCQUFrQixFQUFFO1lBQy9DLFNBQVMsQ0FBQyxVQUFVLENBQUMsT0FBTzs7OztZQUFDLFNBQVMsQ0FBQyxFQUFFOztvQkFDakMsSUFBSSxHQUFDLFNBQVMsQ0FBQyxJQUFJOztvQkFDbkIsVUFBVSxHQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7O29CQUN6RCxZQUFZLEdBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUMsSUFBSSxDQUFDO2dCQUN2RCxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3pDLENBQUMsRUFBQyxDQUFDO1NBQ047UUFFRCxJQUFHLFNBQVMsQ0FBQyxTQUFTLEVBQUM7O2dCQUNmLGtCQUFrQixHQUFDLElBQUksa0JBQWtCLEVBQUU7WUFDL0Msa0JBQWtCLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQztTQUMvQztJQUNMLENBQUM7Ozs7Ozs7SUFFRCxjQUFjLENBQUMsU0FBbUIsRUFBQyxHQUFVLEVBQUMsSUFBc0I7UUFDaEUsSUFBRyxDQUFDLEdBQUcsRUFBQztZQUNKLE9BQVE7U0FDWDtRQUNELFNBQVMsQ0FBQyxJQUFJLEdBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxJQUFJLEdBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxJQUFJLEdBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxHQUFHLEdBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pCLFNBQVMsQ0FBQyxXQUFXLEdBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRXpDLElBQUcsR0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFDO1lBQ2pCLFNBQVMsQ0FBQyxVQUFVLEdBQUMsSUFBSSxLQUFLLEVBQWEsQ0FBQzs7Z0JBQ3hDLGtCQUFrQixHQUFDLElBQUksa0JBQWtCLEVBQUU7WUFDL0MsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU87Ozs7WUFBQyxZQUFZLENBQUMsRUFBRTs7b0JBQ2pDLElBQUksR0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDOztvQkFDekIsVUFBVSxHQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7O29CQUN6RCxTQUFTLEdBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUMsSUFBSSxDQUFDO2dCQUN2RCxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN6QyxDQUFDLEVBQUMsQ0FBQztTQUNOO1FBQ0QsSUFBRyxHQUFHLENBQUMsWUFBWSxDQUFDLEVBQUM7O2dCQUNiLElBQUksR0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDO1lBQ2xDLElBQUcsQ0FBQyxJQUFJLEVBQUM7Z0JBQ0wsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO2FBQzNDO1lBQ0QsU0FBUyxDQUFDLFVBQVUsR0FBQyxtQkFBbUIsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFDLElBQUksQ0FBQyxDQUFDO1NBQ25GO1FBRUQsSUFBRyxHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUM7O2dCQUNaLGtCQUFrQixHQUFDLElBQUksa0JBQWtCLEVBQUU7WUFDL0Msa0JBQWtCLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBQyxHQUFHLENBQUMsQ0FBQztTQUM5QztJQUNMLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZXJhdGlvbiB9IGZyb20gJy4uLy4uL2RlZmluZS9vcGVyYXRpb24vb3BlcmF0aW9uJztcclxuaW1wb3J0IHsgUGFyYW1ldGVyIH0gZnJvbSAnLi4vLi4vZGVmaW5lL3BhcmFtZXRlci9wYXJhbWV0ZXInO1xyXG5pbXBvcnQgeyBQYXJhbWV0ZXJDb252ZXJ0b3IgfSBmcm9tICcuLi9wYXJhbWV0ZXIvcGFyYW1ldGVyLWNvbnZlcnRvcic7XHJcbmltcG9ydCB7IERhdGFUeXBlQ29udmVydFV0aWwgfSBmcm9tICcuLi91dGlscy9kYXRhLXR5cGUtY29udmVydC11dGlsJztcclxuaW1wb3J0IHsgSVNlcmlhbGl6ZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zZXJpYWxpemUtY29udGV4dC9leHRlbnNpb24vaS1zZXJpYWxpemUtY29udGV4dCc7XHJcbmltcG9ydCB7IEV4dGVuc2lvbkNvbnZlcnRvciB9IGZyb20gJy4uL2V4dGVuc2lvbi9leHRlbnNpb24tY29udmVydG9yJztcclxuXHJcbmV4cG9ydCBjbGFzcyBPcGVyYXRpb25Db252ZXJ0b3J7XHJcblxyXG4gICAgY29udmVydFRvT2JqZWN0KG9iajpPYmplY3Qsb3BlcmF0aW9uOk9wZXJhdGlvbixjdHh0OklTZXJpYWxpemVDb250ZXh0KTp2b2lke1xyXG4gICAgICAgIGlmKCFvcGVyYXRpb24pe1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmpbJ2tpbmQnXT1vcGVyYXRpb24ua2luZDtcclxuXHJcbiAgICAgICAgb2JqWydjb2RlJ109b3BlcmF0aW9uLmNvZGU7XHJcbiAgICAgICAgb2JqWyduYW1lJ109b3BlcmF0aW9uLm5hbWU7XHJcbiAgICAgICAgb2JqWyd1cmknXT1vcGVyYXRpb24udXJpO1xyXG4gICAgICAgIG9ialsnZGVzY3JpcHRpb24nXT1vcGVyYXRpb24uZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIG9ialsncmV0dXJuVHlwZSddPW51bGw7XHJcbiAgICAgICAgaWYob3BlcmF0aW9uLnJldHVyblR5cGUpe1xyXG4gICAgICAgICAgICBsZXQga2luZD1vcGVyYXRpb24ucmV0dXJuVHlwZS5nZXRLaW5kKCk7XHJcbiAgICAgICAgICAgIGlmKCFraW5kKXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5pON5L2c5bqP5YiX5YyW5pe26L+U5Zue5YC857G75Z6L55qEVHlwZUtpbmTkuLrnqbohJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqWydyZXR1cm5UeXBlJ109RGF0YVR5cGVDb252ZXJ0VXRpbC5jb252ZXJ0VG9PYmplY3Qob3BlcmF0aW9uLnJldHVyblR5cGUsY3R4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIG9ialsncGFyYW1ldGVycyddPW5ldyBBcnJheTxPYmplY3Q+KCk7XHJcbiAgICAgICAgaWYob3BlcmF0aW9uLnBhcmFtZXRlcnMpe1xyXG4gICAgICAgICAgICBsZXQgcGFyYW1ldGVyQ29udmVydG9yPW5ldyBQYXJhbWV0ZXJDb252ZXJ0b3IoKTtcclxuICAgICAgICAgICAgb3BlcmF0aW9uLnBhcmFtZXRlcnMuZm9yRWFjaChwYXJhbWV0ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtpbmQ9cGFyYW1ldGVyLmtpbmQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWFsaXplcj1jdHh0LmdldFBhcmFtZXRlclNlcmlhbGl6ZXJGYWN0b3J5KCkuZ2V0KGtpbmQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlck9iaj1zZXJpYWxpemVyLmRlc2VyaWFsaXplKHBhcmFtZXRlcixjdHh0KTtcclxuICAgICAgICAgICAgICAgIG9ialtcInBhcmFtZXRlcnNcIl0ucHVzaChwYXJhbWV0ZXJPYmopO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9wZXJhdGlvbi5leHRlbnNpb24pe1xyXG4gICAgICAgICAgICBsZXQgZXh0ZW5zaW9uQ29udmVydG9yPW5ldyBFeHRlbnNpb25Db252ZXJ0b3IoKTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uQ29udmVydG9yLmFkZFRvSk9iaihvcGVyYXRpb24sb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEZyb21PYmplY3Qob3BlcmF0aW9uOk9wZXJhdGlvbixvYmo6T2JqZWN0LGN0eHQ6SVNlcmlhbGl6ZUNvbnRleHQpOnZvaWR7XHJcbiAgICAgICAgaWYoIW9iail7XHJcbiAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9wZXJhdGlvbi5raW5kPW9ialsna2luZCddO1xyXG4gICAgICAgIG9wZXJhdGlvbi5jb2RlPW9ialsnY29kZSddO1xyXG4gICAgICAgIG9wZXJhdGlvbi5uYW1lPW9ialsnbmFtZSddO1xyXG4gICAgICAgIG9wZXJhdGlvbi51cmk9b2JqWyd1cmknXTtcclxuICAgICAgICBvcGVyYXRpb24uZGVzY3JpcHRpb249b2JqWydkZXNjcmlwdGlvbiddO1xyXG5cclxuICAgICAgICBpZihvYmpbJ3BhcmFtZXRlcnMnXSl7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbi5wYXJhbWV0ZXJzPW5ldyBBcnJheTxQYXJhbWV0ZXI+KCk7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbWV0ZXJDb252ZXJ0b3I9bmV3IFBhcmFtZXRlckNvbnZlcnRvcigpO1xyXG4gICAgICAgICAgICBvYmpbJ3BhcmFtZXRlcnMnXS5mb3JFYWNoKHBhcmFtZXRlck9iaiA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2luZD1wYXJhbWV0ZXJPYmpbJ2tpbmQnXTtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJpYWxpemVyPWN0eHQuZ2V0UGFyYW1ldGVyU2VyaWFsaXplckZhY3RvcnkoKS5nZXQoa2luZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVyPXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocGFyYW1ldGVyT2JqLGN0eHQpO1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uLnBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYob2JqWydyZXR1cm5UeXBlJ10pe1xyXG4gICAgICAgICAgICBsZXQga2luZD1vYmpbJ3JldHVyblR5cGUnXVsna2luZCddO1xyXG4gICAgICAgICAgICBpZigha2luZCl7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ino+aekOaTjeS9nOeahOi/lOWbnuWAvOaXtlR5cGVLaW5k5Li656m677yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3BlcmF0aW9uLnJldHVyblR5cGU9RGF0YVR5cGVDb252ZXJ0VXRpbC5pbml0RnJvbU9iamVjdChvYmpbJ3JldHVyblR5cGUnXSxjdHh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYob2JqW1wiZXh0ZW5zaW9uXCJdKXtcclxuICAgICAgICAgICAgbGV0IGV4dGVuc2lvbkNvbnZlcnRvcj1uZXcgRXh0ZW5zaW9uQ29udmVydG9yKCk7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbkNvbnZlcnRvci5hZGRUb09iaihvcGVyYXRpb24sb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=