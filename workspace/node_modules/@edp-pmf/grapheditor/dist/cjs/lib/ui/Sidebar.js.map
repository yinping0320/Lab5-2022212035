{"version":3,"file":"Sidebar.js","sourceRoot":"","sources":["../../../../src/lib/ui/Sidebar.ts"],"names":[],"mappings":"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","sourcesContent":["import { MxGraphNS, mxCell, mxClient, mxConstants, mxDragSource, mxEvent, mxEventObject, mxGeometry, mxGraph, mxPoint, mxPopupMenu, mxRectangle, mxResources, mxStylesheet, mxUtils } from \"@edp-pmf/mxgraph-ts\";\r\nimport { Toolbox } from \"../toolbox/ToolBox\";\r\nimport { BpmnCellHelper } from \"../util/BpmnCellHelper\";\r\nimport { Constant } from \"../util/Constant\";\r\nimport { PmfEvents } from \"../util/PmfEvents\";\r\nimport { IEditorUi } from \"./IEditorUi\";\r\nimport { Graph } from \"./Graph\";\r\n\r\n/**\r\n * 侧边栏\r\n */\r\nexport class Sidebar {\r\n    /**\r\n     * 侧边栏容器\r\n     */\r\n    container: HTMLDivElement;\r\n\r\n    /**\r\n     * EditorUi\r\n     */\r\n    editorUi: IEditorUi;\r\n\r\n    /**\r\n     * 工具箱画布\r\n     */\r\n    graph: MxGraphNS.mxGraph;\r\n    /**\r\n     * 提示信息画布\r\n     */\r\n    graph2: MxGraphNS.mxGraph;\r\n\r\n    /**\r\n     * 缩略图宽度\r\n     */\r\n    thumbWidth = 36;\r\n    /**\r\n     * 缩略图高度\r\n     */\r\n    thumbHeight = 36;\r\n    /**\r\n     * 缩略图内边距\r\n     */\r\n    thumbPadding = (document.documentMode >= 5) ? 0 : 1;\r\n    /**\r\n     * 缩略图边框宽度\r\n     */\r\n    thumbBorder = 2;\r\n\r\n    /**\r\n     * 工具箱分组标题字体大小\r\n     */\r\n    sidebarTitleSize = 12;\r\n    /**\r\n     * 显示分组标题\r\n     */\r\n    sidebarTitles: boolean = true;\r\n    /**\r\n     * 显示提示信息\r\n     */\r\n    tooltipTitles = true;\r\n    /**\r\n     * 启用提示信息\r\n     */\r\n    enableTooltips: boolean = true;\r\n    /**\r\n     * 显示提示信息\r\n     */\r\n    showTooltips: boolean = true;\r\n    /**\r\n     * 提示信息元素\r\n     */\r\n    tooltip: HTMLDivElement;\r\n    /**\r\n     * 提示信息标题元素\r\n     */\r\n    tooltipTitle: HTMLDivElement;\r\n    /**\r\n     * 提示信息图片\r\n     */\r\n    tooltipImageSrc = Constant.IMAGE_PATH + '/tooltip.png';\r\n    /**\r\n     * 提示信息显示延迟\r\n     */\r\n    tooltipDelay: number = 300;\r\n    /**\r\n     * 提示信息图片元素\r\n     */\r\n    tooltipImage: HTMLImageElement;\r\n    /**\r\n     * 提示信息边框宽度\r\n     */\r\n    tooltipBorder = 16;\r\n    /**\r\n     * 提示信息最大宽度\r\n     */\r\n    maxTooltipWidth = 400;\r\n    /**\r\n     * 提示信息最大高度\r\n     */\r\n    maxTooltipHeight = 400;\r\n    /**\r\n     * 分组折叠图片\r\n     */\r\n    collapsedImage = Constant.IMAGE_PATH + '/collapsed.gif';\r\n    /**\r\n     * 分组展开图片\r\n     */\r\n    expandedImage = Constant.IMAGE_PATH + '/expanded.gif';\r\n\r\n    /**\r\n     * 拖拽至画布后元素高度\r\n     */\r\n    defaultImageHeight = 36;\r\n    /**\r\n     * 拖拽至画布后元素宽度\r\n     */\r\n    defaultImageWidth = 36;\r\n    /**\r\n     * 拖拽预览边框样式\r\n     */\r\n    dragPreviewBorder = '1px dashed black';\r\n    /**\r\n     * 线程号，取值为setInterval返回值\r\n     */\r\n    thread: number;\r\n    /**\r\n     * 当前元素\r\n     */\r\n    currentElt: HTMLAnchorElement;\r\n    /**\r\n     * 工具箱分组Map\r\n     */\r\n    palettes: { [key: string]: any } = {};\r\n\r\n    constructor(editorUi: IEditorUi, container: HTMLDivElement) {\r\n        this.editorUi = editorUi;\r\n        this.container = container;\r\n\r\n        this.graph = this.createTemporaryGraph(this.editorUi.graph.getStylesheet());\r\n        this.graph.cellRenderer.antiAlias = false;\r\n        this.graph.foldingEnabled = false;\r\n\r\n        // Workaround for blank output in IE11-\r\n        if (!mxClient.IS_IE && !mxClient.IS_IE11) {\r\n            this.graph.container.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建临时画布\r\n     * @param stylesheet \r\n     * @returns \r\n     */\r\n    createTemporaryGraph(stylesheet: MxGraphNS.mxStylesheet): MxGraphNS.mxGraph {\r\n        const graph = new mxGraph(document.createElement('div'), null, null, stylesheet);\r\n        graph.resetViewOnRootChange = false;\r\n        graph.setConnectable(false);\r\n        graph.gridEnabled = false;\r\n        graph.autoScroll = false;\r\n        graph.setTooltips(false);\r\n        graph.setEnabled(false);\r\n\r\n        // Container must be in the DOM for correct HTML rendering\r\n        graph.container.style.visibility = 'hidden';\r\n        graph.container.style.position = 'absolute';\r\n        graph.container.style.overflow = 'hidden';\r\n        graph.container.style.height = '1px';\r\n        graph.container.style.width = '1px';\r\n\r\n        return graph;\r\n    }\r\n\r\n    /**\r\n     * 重置工具箱\r\n     * @param toolbox \r\n     */\r\n    reset(toolbox: Toolbox) {\r\n        // 内置工具箱分组\r\n        toolbox && toolbox.groups && toolbox.groups.forEach(g => {\r\n            const factories: (() => HTMLAnchorElement)[] = [];\r\n            g.items && g.items.forEach(it => {\r\n                const cell = BpmnCellHelper.generate(it.clrTypeId, undefined, new mxGeometry(0, 0, this.defaultImageWidth, this.defaultImageHeight));\r\n                if (cell.edge) {\r\n                    cell.geometry.setTerminalPoint(new mxPoint(0, this.defaultImageHeight), true);\r\n                    cell.geometry.setTerminalPoint(new mxPoint(this.defaultImageWidth, 0), false);\r\n                    cell.geometry.relative = true;\r\n                }\r\n                // 先取多语名称，取不到再取默认名称\r\n                factories.push(this.createItemFactory([cell], (cell.nameLanguage && cell.nameLanguage[this.editorUi.langCode]) || cell.name, this.defaultImageWidth, this.defaultImageHeight));\r\n            });\r\n            this.addPaletteFunctions(g.name, g.name, true, factories);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 添加带创建元素工厂方法的工具箱显示项分组\r\n     * @param id \r\n     * @param title \r\n     * @param expanded \r\n     * @param factories \r\n     */\r\n    addPaletteFunctions(id: string, title: string, expanded: boolean, factories: (() => HTMLAnchorElement)[]) {\r\n        let onInit = (content: HTMLDivElement) => {\r\n            for (let i = 0; i < factories.length; i++) {\r\n                content.appendChild(factories[i]());\r\n            }\r\n        };\r\n\r\n        this.addPalette(id, title, expanded, onInit);\r\n    }\r\n\r\n    /**\r\n     * 添加工具箱显示项分组\r\n     * @param id \r\n     * @param title \r\n     * @param expanded \r\n     * @param onInit \r\n     */\r\n    addPalette(id: string, title: string, expanded: boolean, onInit: Function) {\r\n        let elt = this.createPaletteTitle(title);\r\n        this.container.appendChild(elt);\r\n\r\n        let div = document.createElement('div');\r\n        div.className = 'geSidebar';\r\n\r\n        // Disables built-in pan and zoom in IE10 and later\r\n        if (mxClient.IS_POINTER) {\r\n            div.style.touchAction = 'none';\r\n        }\r\n\r\n        if (expanded) {\r\n            onInit(div);\r\n            onInit = null;\r\n        }\r\n        else {\r\n            div.style.display = 'none';\r\n        }\r\n\r\n        this.addFoldingHandler(elt, div, onInit);\r\n\r\n        let outer = document.createElement('div');\r\n        outer.appendChild(div);\r\n        this.container.appendChild(outer);\r\n\r\n        // Keeps references to the DOM nodes\r\n        if (id != null) {\r\n            this.palettes[id] = [elt, outer];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建工具箱显示项分组标题栏\r\n     * @param label \r\n     * @returns \r\n     */\r\n    createPaletteTitle(label: string): HTMLAnchorElement {\r\n        let elt = document.createElement('a');\r\n        elt.setAttribute('href', 'javascript:void(0);');\r\n        elt.setAttribute('title', mxResources.get('sidebarTooltip'));\r\n        elt.className = 'geTitle';\r\n        mxUtils.write(elt, label);\r\n\r\n        return elt;\r\n    }\r\n\r\n    /**\r\n     * 添加工具箱显示项分组标题栏折叠处理器\r\n     * @param title \r\n     * @param content \r\n     * @param onInit \r\n     */\r\n    addFoldingHandler(title: HTMLAnchorElement, content: HTMLDivElement, onInit: Function) {\r\n        let that = this;\r\n        let initialized = false;\r\n\r\n        // Avoids mixed content warning in IE6-8\r\n        if (!mxClient.IS_IE || document.documentMode >= 8) {\r\n            title.style.backgroundImage = (content.style.display == 'none') ?\r\n                'url(\\'' + this.collapsedImage + '\\')' : 'url(\\'' + this.expandedImage + '\\')';\r\n        }\r\n\r\n        title.style.backgroundRepeat = 'no-repeat';\r\n        title.style.backgroundPosition = '0% 50%';\r\n\r\n        mxEvent.addListener(title, 'click', (evt: PointerEvent) => {\r\n            if (content.style.display == 'none') {\r\n                if (!initialized) {\r\n                    initialized = true;\r\n\r\n                    if (onInit != null) {\r\n                        // Wait cursor does not show up on Mac\r\n                        title.style.cursor = 'wait';\r\n                        let prev = title.innerHTML;\r\n                        title.innerHTML = mxResources.get('loading') + '...';\r\n\r\n                        window.setTimeout(() => {\r\n                            let fo = mxClient.NO_FO;\r\n                            mxClient.NO_FO = Constant.ORIGINAL_NO_FO;\r\n                            onInit(content);\r\n                            mxClient.NO_FO = fo;\r\n                            content.style.display = 'block';\r\n                            title.style.cursor = '';\r\n                            title.innerHTML = prev;\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        content.style.display = 'block';\r\n                    }\r\n                }\r\n                else {\r\n                    content.style.display = 'block';\r\n                }\r\n\r\n                title.style.backgroundImage = 'url(\\'' + that.expandedImage + '\\')';\r\n            }\r\n            else {\r\n                title.style.backgroundImage = 'url(\\'' + that.collapsedImage + '\\')';\r\n                content.style.display = 'none';\r\n            }\r\n\r\n            mxEvent.consume(evt);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 创建工具箱显示项的工厂方法\r\n     * @param cells \r\n     * @param title \r\n     * @param width \r\n     * @param height \r\n     * @param showLabel \r\n     * @param showTitle \r\n     * @param allowCellsInserted \r\n     * @returns \r\n     */\r\n    createItemFactory(cells: MxGraphNS.mxCell[], title: string, width: number, height: number, showLabel: boolean = true, showTitle: boolean = true, allowCellsInserted: boolean = true) {\r\n        const func = () => {\r\n            return this.createItem(cells, title, showLabel, showTitle, width, height, allowCellsInserted);\r\n        };\r\n\r\n        return func;\r\n    }\r\n\r\n    /**\r\n     * 创建工具箱显示项\r\n     * @param cells \r\n     * @param title \r\n     * @param showLabel \r\n     * @param showTitle \r\n     * @param width \r\n     * @param height \r\n     * @param allowCellsInserted \r\n     * @returns \r\n     */\r\n    createItem(cells: MxGraphNS.mxCell[], title: string, showLabel: boolean, showTitle: boolean, width: number, height: number, allowCellsInserted: boolean): HTMLAnchorElement {\r\n        let elt = document.createElement('a');\r\n        elt.setAttribute('href', 'javascript:void(0);');\r\n        elt.className = 'geItem';\r\n        elt.style.overflow = 'hidden';\r\n\r\n        let border = (mxClient.IS_QUIRKS) ? 8 + 2 * this.thumbPadding : 2 * this.thumbBorder;\r\n        elt.style.width = 70 + 'px';\r\n        elt.style.height = 70 + 'px';\r\n        // elt.style.padding = this.thumbPadding + 'px';\r\n\r\n        if (mxClient.IS_IE6) {\r\n            elt.style.border = 'none';\r\n        }\r\n\r\n        // Blocks default click action\r\n        mxEvent.addListener(elt, 'click', (evt: PointerEvent) => {\r\n            mxEvent.consume(evt);\r\n        });\r\n\r\n        this.createThumb(cells, this.thumbWidth, this.thumbHeight, elt, title, showLabel, showTitle, width, height);\r\n        let bounds = new mxRectangle(0, 0, width, height);\r\n\r\n        if (cells.length > 0) {\r\n            const dropHandler = this.createDropHandler(cells, false, allowCellsInserted, bounds);\r\n            const dragPreview = this.createDragPreview(width, height);\r\n            let ds: MxGraphNS.mxDragSource = this.createDragSource(elt, dropHandler, dragPreview, cells, bounds);\r\n        }\r\n\r\n        // Shows a tooltip with the rendered cell\r\n        if (!mxClient.IS_IOS) {\r\n            mxEvent.addGestureListeners(elt, null, (evt: PointerEvent) => {\r\n                if (mxEvent.isMouseEvent(evt)) {\r\n                    this.showTooltip(elt, cells, bounds.width, bounds.height, title, showLabel);\r\n                }\r\n            });\r\n\r\n            mxEvent.addListener(elt, (mxClient.IS_POINTER) ? 'pointerdown' : 'mousedown', () => {\r\n                this.hideTooltip();\r\n                this.showTooltips = false;\r\n            });\r\n\r\n            mxEvent.addListener(elt, (mxClient.IS_POINTER) ? 'pointerup' : 'mouseup', () => {\r\n                this.showTooltips = true;\r\n            });\r\n\r\n            mxEvent.addListener(elt, (mxClient.IS_POINTER) ? 'pointerleave' : 'mouseleave', (evt: PointerEvent) => {\r\n                this.hideTooltip();\r\n                this.showTooltips = true;\r\n            });\r\n        }\r\n\r\n        return elt;\r\n    }\r\n\r\n    /**\r\n     * 创建显示项缩略图\r\n     * @param cells \r\n     * @param width \r\n     * @param height \r\n     * @param parent \r\n     * @param title \r\n     * @param showLabel \r\n     * @param showTitle \r\n     * @param realWidth \r\n     * @param realHeight \r\n     */\r\n    createThumb(cells: MxGraphNS.mxCell[], width: number, height: number, parent: HTMLAnchorElement, title: string, showLabel: boolean, showTitle: boolean, realWidth: number, realHeight: number) {\r\n        this.graph.labelsVisible = (showLabel == null || showLabel);\r\n        let fo = mxClient.NO_FO;\r\n        mxClient.NO_FO = Constant.ORIGINAL_NO_FO;\r\n        this.graph.view.scaleAndTranslate(1, 0, 0);\r\n        this.graph.addCells(cells);\r\n        let bounds = this.graph.getGraphBounds();\r\n        let s = Math.floor(Math.min((width - 2 * this.thumbBorder) / bounds.width,\r\n            (height - 2 * this.thumbBorder) / bounds.height) * 100) / 100;\r\n        this.graph.view.scaleAndTranslate(s, Math.floor((width - bounds.width * s) / 2 / s - bounds.x),\r\n            Math.floor((height - bounds.height * s) / 2 / s - bounds.y));\r\n\r\n        let node: HTMLElement = null;\r\n\r\n        // For supporting HTML labels in IE9 standards mode the container is cloned instead\r\n        if (this.graph.dialect == mxConstants.DIALECT_SVG && !mxClient.NO_FO) {\r\n            node = (this.graph.view.getCanvas() as SVGGElement).ownerSVGElement.cloneNode(true) as HTMLElement;\r\n        }\r\n\r\n        // LATER: Check if deep clone can be used for quirks if container in DOM\r\n        else {\r\n            node = this.graph.container.cloneNode(false) as HTMLElement;\r\n            node.innerHTML = this.graph.container.innerHTML;\r\n        }\r\n\r\n        this.graph.getModel().clear();\r\n        mxClient.NO_FO = fo;\r\n\r\n        // Catch-all event handling\r\n        if (mxClient.IS_IE6) {\r\n            parent.style.backgroundImage = 'url(' + Constant.TRANSPARENT_IMAGE + ')';\r\n        }\r\n\r\n        node.style.position = 'relative';\r\n        node.style.overflow = 'hidden';\r\n        node.style.cursor = 'move';\r\n        node.style.left = this.thumbBorder + 'px';\r\n        node.style.top = this.thumbBorder + 'px';\r\n        node.style.width = width + 'px';\r\n        node.style.height = height + 'px';\r\n        node.style.visibility = '';\r\n        node.style.minWidth = '';\r\n        node.style.minHeight = '';\r\n        node.style.display = 'block';\r\n        node.style.margin = '0 auto';\r\n        node.style.paddingTop = '4px';\r\n        parent.appendChild(node);\r\n\r\n        // Adds title for sidebar entries\r\n        if (this.sidebarTitles && title != null && showTitle != false) {\r\n            let border = (mxClient.IS_QUIRKS) ? 2 * this.thumbPadding + 2 : 0;\r\n            // parent.style.height = (this.thumbHeight + border + this.sidebarTitleSize + 20) + 'px';\r\n            // parent.style.width = (this.thumbWidth + border + 8) + 'px';\r\n\r\n            let div = document.createElement('div');\r\n            div.style.fontSize = mxClient.IS_FF ? (this.sidebarTitleSize + 2) + 'px' : this.sidebarTitleSize + 'px';\r\n            div.style.color = '#303030';\r\n            div.style.textAlign = 'center';\r\n            div.style.whiteSpace = 'nowrap';\r\n\r\n            if (mxClient.IS_IE) {\r\n                div.style.height = (this.sidebarTitleSize + 12) + 'px';\r\n            }\r\n\r\n            div.style.paddingTop = '5px';\r\n            mxUtils.write(div, title);\r\n            parent.appendChild(div);\r\n        }\r\n\r\n        //return bounds;\r\n    }\r\n\r\n    /**\r\n     * 显示提示信息\r\n     * @param elt \r\n     * @param cells \r\n     * @param w \r\n     * @param h \r\n     * @param title \r\n     * @param showLabel \r\n     */\r\n    showTooltip(elt: HTMLAnchorElement, cells: MxGraphNS.mxCell[], w: number, h: number, title: string, showLabel: boolean) {\r\n        if (this.enableTooltips && this.showTooltips) {\r\n            if (this.currentElt != elt) {\r\n                if (this.thread != null) {\r\n                    window.clearTimeout(this.thread);\r\n                    this.thread = null;\r\n                }\r\n\r\n                let show = () => {\r\n                    // Lazy creation of the DOM nodes and graph instance\r\n                    if (this.tooltip == null) {\r\n                        this.tooltip = document.createElement('div');\r\n                        this.tooltip.className = 'geSidebarTooltip';\r\n                        this.tooltip.style.zIndex = (mxPopupMenu.prototype.zIndex - 1).toString();\r\n                        document.body.appendChild(this.tooltip);\r\n\r\n                        this.graph2 = new mxGraph(this.tooltip, null, null, this.editorUi.graph.getStylesheet());\r\n                        this.graph2.resetViewOnRootChange = false;\r\n                        this.graph2.foldingEnabled = false;\r\n                        this.graph2.gridEnabled = false;\r\n                        this.graph2.autoScroll = false;\r\n                        this.graph2.setTooltips(false);\r\n                        this.graph2.setConnectable(false);\r\n                        this.graph2.setEnabled(false);\r\n\r\n                        if (!mxClient.IS_SVG) {\r\n                            this.graph2.view.canvas.style.position = 'relative';\r\n                        }\r\n\r\n                        this.tooltipImage = mxUtils.createImage(this.tooltipImageSrc);\r\n                        this.tooltipImage.className = 'geSidebarTooltipImage';\r\n                        this.tooltipImage.style.zIndex = (mxPopupMenu.prototype.zIndex - 1).toString();\r\n                        this.tooltipImage.style.position = 'absolute';\r\n                        this.tooltipImage.style.width = '14px';\r\n                        this.tooltipImage.style.height = '27px';\r\n\r\n                        document.body.appendChild(this.tooltipImage);\r\n                    }\r\n\r\n                    this.graph2.model.clear();\r\n                    this.graph2.view.setTranslate(this.tooltipBorder, this.tooltipBorder);\r\n\r\n                    if (w > this.maxTooltipWidth || h > this.maxTooltipHeight) {\r\n                        this.graph2.view.scale = Math.round(Math.min(this.maxTooltipWidth / w, this.maxTooltipHeight / h) * 100) / 100;\r\n                    }\r\n                    else {\r\n                        this.graph2.view.scale = 1;\r\n                    }\r\n\r\n                    this.tooltip.style.display = 'block';\r\n                    this.graph2.labelsVisible = (showLabel == null || showLabel);\r\n                    let fo = mxClient.NO_FO;\r\n                    mxClient.NO_FO = Constant.ORIGINAL_NO_FO;\r\n                    this.graph2.addCells(cells);\r\n                    mxClient.NO_FO = fo;\r\n\r\n                    let bounds = this.graph2.getGraphBounds();\r\n                    let width = bounds.width + 2 * this.tooltipBorder + 4;\r\n                    let height = bounds.height + 2 * this.tooltipBorder;\r\n\r\n                    if (mxClient.IS_QUIRKS) {\r\n                        height += 4;\r\n                        this.tooltip.style.overflow = 'hidden';\r\n                    }\r\n                    else {\r\n                        this.tooltip.style.overflow = 'visible';\r\n                    }\r\n\r\n                    this.tooltipImage.style.visibility = 'visible';\r\n                    this.tooltip.style.width = width + 'px';\r\n\r\n                    // Adds title for entry\r\n                    if (this.tooltipTitles && title != null && title.length > 0) {\r\n                        if (this.tooltipTitle == null) {\r\n                            this.tooltipTitle = document.createElement('div');\r\n                            this.tooltipTitle.style.borderTop = '1px solid gray';\r\n                            this.tooltipTitle.style.textAlign = 'center';\r\n                            this.tooltipTitle.style.width = '100%';\r\n\r\n                            // Oversize titles are cut-off currently. Should make tooltip wider later.\r\n                            this.tooltipTitle.style.overflow = 'hidden';\r\n\r\n                            if (mxClient.IS_SVG) {\r\n                                this.tooltipTitle.style.paddingTop = '6px';\r\n                            }\r\n                            else {\r\n                                this.tooltipTitle.style.position = 'absolute';\r\n                                this.tooltipTitle.style.paddingTop = '6px';\r\n                            }\r\n\r\n                            this.tooltip.appendChild(this.tooltipTitle);\r\n                        }\r\n                        else {\r\n                            this.tooltipTitle.innerHTML = '';\r\n                        }\r\n\r\n                        this.tooltipTitle.style.display = '';\r\n                        mxUtils.write(this.tooltipTitle, title);\r\n\r\n                        let ddy = this.tooltipTitle.offsetHeight + 10;\r\n                        height += ddy;\r\n\r\n                        if (mxClient.IS_SVG) {\r\n                            this.tooltipTitle.style.marginTop = (2 - ddy) + 'px';\r\n                        }\r\n                        else {\r\n                            height -= 6;\r\n                            this.tooltipTitle.style.top = (height - ddy) + 'px';\r\n                        }\r\n                    }\r\n                    else if (this.tooltipTitle != null && this.tooltipTitle.parentNode != null) {\r\n                        this.tooltipTitle.style.display = 'none';\r\n                    }\r\n\r\n                    this.tooltip.style.height = height + 'px';\r\n                    let x0 = -Math.round(bounds.x - this.tooltipBorder);\r\n                    let y0 = -Math.round(bounds.y - this.tooltipBorder);\r\n\r\n                    let b = document.body;\r\n                    let d = document.documentElement;\r\n                    let off = new mxPoint(0, 0);\r\n                    let bottom = Math.max(b.clientHeight || 0, d.clientHeight);\r\n                    let left = this.container.clientWidth + this.editorUi.sidebarSplitSize + 3 + this.editorUi.container.offsetLeft + off.x;\r\n                    let top = Math.min(bottom - height - 20 /*status bar*/, Math.max(0, (this.editorUi.container.offsetTop +\r\n                        this.container.offsetTop + elt.offsetTop - this.container.scrollTop - height / 2 + 16))) + off.y;\r\n\r\n                    if (mxClient.IS_SVG) {\r\n                        if (x0 != 0 || y0 != 0) {\r\n                            this.graph2.view.canvas.setAttribute('transform', 'translate(' + x0 + ',' + y0 + ')');\r\n                        }\r\n                        else {\r\n                            this.graph2.view.canvas.removeAttribute('transform');\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.graph2.view.drawPane.style.left = x0 + 'px';\r\n                        this.graph2.view.drawPane.style.top = y0 + 'px';\r\n                    }\r\n\r\n                    // Workaround for ignored position CSS style in IE9\r\n                    // (changes to relative without the following line)\r\n                    this.tooltip.style.position = 'absolute';\r\n                    this.tooltip.style.left = left + 'px';\r\n                    this.tooltip.style.top = top + 'px';\r\n                    this.tooltipImage.style.left = (left - 13) + 'px';\r\n                    this.tooltipImage.style.top = (top + height / 2 - 13) + 'px';\r\n                };\r\n\r\n                if (this.tooltip != null && this.tooltip.style.display != 'none') {\r\n                    show();\r\n                }\r\n                else {\r\n                    this.thread = window.setTimeout(show, this.tooltipDelay);\r\n                }\r\n\r\n                this.currentElt = elt;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏提示信息\r\n     */\r\n    hideTooltip() {\r\n        if (this.thread != null) {\r\n            window.clearTimeout(this.thread);\r\n            this.thread = null;\r\n        }\r\n\r\n        if (this.tooltip != null) {\r\n            this.tooltip.style.display = 'none';\r\n            this.tooltipImage.style.visibility = 'hidden';\r\n            this.currentElt = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建可拖动对象\r\n     * @param elt \r\n     * @param dropHandler \r\n     * @param preview \r\n     * @param cells \r\n     * @param bounds \r\n     * @returns \r\n     */\r\n    createDragSource(elt: HTMLAnchorElement, dropHandler: (graph: Graph, evt: PointerEvent, target: MxGraphNS.mxCell, x: number, y: number) => void, preview: HTMLDivElement, cells: MxGraphNS.mxCell[], bounds: MxGraphNS.mxRectangle) {\r\n        let dragSource: MxGraphNS.mxDragSource = mxUtils.makeDraggable(elt, this.editorUi.graph,\r\n            (graph: Graph, evt: PointerEvent, target: any, x: number, y: number) => {\r\n                dropHandler(graph, evt, target, x, y);\r\n            },\r\n            preview, 0, 0, null, true, true);\r\n        // 拖拽时支持对标画布节点\r\n        dragSource.isGuidesEnabled = () => true;\r\n        return dragSource;\r\n    }\r\n\r\n    /**\r\n     * 创建拖拽对象落地后处理器\r\n     * @param cells \r\n     * @param allowSplit \r\n     * @param allowCellsInserted \r\n     * @param bounds \r\n     * @returns \r\n     */\r\n    createDropHandler(cells: MxGraphNS.mxCell[], allowSplit: boolean, allowCellsInserted: boolean = true, bounds: MxGraphNS.mxRectangle) {\r\n        const handler = (graph: Graph, evt: PointerEvent, target: MxGraphNS.mxCell, x: number, y: number, force?: boolean) => {\r\n            let elt = (force) ? null : ((mxEvent.isTouchEvent(evt) || mxEvent.isPenEvent(evt)) ?\r\n                document.elementFromPoint(mxEvent.getClientX(evt), mxEvent.getClientY(evt)) :\r\n                mxEvent.getSource(evt));\r\n\r\n            while (elt != null && elt != this.container) {\r\n                elt = elt.parentNode;\r\n            }\r\n\r\n            if (elt == null && graph.isEnabled()) {\r\n                cells = graph.getImportableCells(cells);\r\n\r\n                if (cells.length > 0) {\r\n                    graph.stopEditing();\r\n\r\n                    // Holding alt while mouse is released ignores drop target\r\n                    let validDropTarget = (target != null && !mxEvent.isAltDown(evt)) ?\r\n                        graph.isValidDropTarget(target, cells, evt) : false;\r\n\r\n                    let select: MxGraphNS.mxCell[] = null;\r\n\r\n                    if (target != null && !validDropTarget) {\r\n                        target = null;\r\n                    }\r\n\r\n                    if (!graph.isCellLocked(target || graph.getDefaultParent())) {\r\n                        graph.model.beginUpdate();\r\n                        try {\r\n                            x = Math.round(x);\r\n                            y = Math.round(y);\r\n\r\n                            // Splits the target edge or inserts into target group\r\n                            if (allowSplit && graph.isSplitTarget(target, cells, evt)) {\r\n                                let s = graph.view.scale;\r\n                                let tr = graph.view.translate;\r\n                                let tx = (x + tr.x) * s;\r\n                                let ty = (y + tr.y) * s;\r\n\r\n                                let clones = graph.cloneCells(cells);\r\n                                graph.splitEdge(target, clones, null, x - bounds.width / 2, y - bounds.height / 2, tx, ty);\r\n                                select = clones;\r\n                            }\r\n                            else if (cells.length > 0) {\r\n                                select = graph.importCells(cells, x, y, target);\r\n                            }\r\n\r\n                            // Executes parent layout hooks for position/order\r\n                            if (graph.layoutManager != null) {\r\n                                let layout = graph.layoutManager.getLayout(target);\r\n\r\n                                if (layout != null) {\r\n                                    let s = graph.view.scale;\r\n                                    let tr = graph.view.translate;\r\n                                    let tx = (x + tr.x) * s;\r\n                                    let ty = (y + tr.y) * s;\r\n\r\n                                    for (let i = 0; i < select.length; i++) {\r\n                                        layout.moveCell(select[i], tx, ty);\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            // 绑定BPMN相关属性\r\n                            graph.bindBpmnElements(select);\r\n\r\n                            if (allowCellsInserted && (evt == null || !mxEvent.isShiftDown(evt))) {\r\n                                graph.fireEvent(new mxEventObject(PmfEvents.CellsInserted, 'cells', select));\r\n                            }\r\n                        }\r\n                        finally {\r\n                            graph.model.endUpdate();\r\n                        }\r\n\r\n                        if (select != null && select.length > 0) {\r\n                            graph.scrollCellToVisible(select[0]);\r\n                            graph.setSelectionCells(select);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                mxEvent.consume(evt);\r\n            }\r\n        };\r\n\r\n        return handler;\r\n    }\r\n\r\n    /**\r\n     * 创建拖拽源预览\r\n     * @param width \r\n     * @param height \r\n     * @returns \r\n     */\r\n    createDragPreview(width: number, height: number) {\r\n        let elt = document.createElement('div');\r\n        elt.style.border = this.dragPreviewBorder;\r\n        elt.style.width = width + 'px';\r\n        elt.style.height = height + 'px';\r\n\r\n        return elt;\r\n    }\r\n\r\n    /**\r\n     * 销毁\r\n     */\r\n    destroy(): void {\r\n        if (this.graph != null) {\r\n            if (this.graph.container != null && this.graph.container.parentNode != null) {\r\n                this.graph.container.parentNode.removeChild(this.graph.container);\r\n            }\r\n\r\n            this.graph.destroy();\r\n            this.graph = null;\r\n        }\r\n    }\r\n}"]}