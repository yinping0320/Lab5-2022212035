"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var mxgraph_ts_1 = require("@edp-pmf/mxgraph-ts");
/**
 * 本文件下为js加载完成后立即执行代码
 */
(function () {
    if (window.mxiGIXBasePath == null) {
        var topWindow = window.top;
        var gspframeworkService = topWindow.gspframeworkService;
        var igixBasePath = gspframeworkService && gspframeworkService.common && gspframeworkService.common.getBasePath && gspframeworkService.common.getBasePath.get ? gspframeworkService.common.getBasePath.get() : "";
        window.mxiGIXBasePath = igixBasePath || "";
    }
    // 重写加载默认资源文件方法，在url后加参数以更新缓存
    var originGetDefaultBundle = mxgraph_ts_1.mxResources.getDefaultBundle;
    mxgraph_ts_1.mxResources.getDefaultBundle = function (basename, lan) {
        var bundle = originGetDefaultBundle.apply(this, [basename, lan]);
        if (bundle) {
            bundle = bundle + "?v=" + new Date().getTime();
        }
        return bundle;
    };
    // 重写加载特定资源文件方法，在url后加参数以更新缓存
    var originGetSpecialBundle = mxgraph_ts_1.mxResources.getSpecialBundle;
    mxgraph_ts_1.mxResources.getSpecialBundle = function (basename, lan) {
        var bundle = originGetSpecialBundle.apply(this, [basename, lan]);
        if (bundle) {
            bundle = bundle + "?v=" + new Date().getTime();
        }
        return bundle;
    };
    // 引入资源文件
    mxgraph_ts_1.mxResources.add((window.mxiGIXBasePath ? window.mxiGIXBasePath : "") + "/platform/runtime/common/web/@edp-pmf/grapheditor/resources/grapheditor");
})();
//# sourceMappingURL=Init.js.map