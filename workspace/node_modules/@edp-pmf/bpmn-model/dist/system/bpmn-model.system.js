System.register([],(function(t){"use strict";return{execute:function(){
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.

            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.

            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */
var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},e(t,o)};function o(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}var n,r,i=function(){return i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)},s=t("RadixConvert",function(){function t(){}return t.Decimal2String=function(t){var e="";do{var o=t%this.exponent;e=this.keys[o]+e,t=(t-o)/this.exponent}while(t>0);return e},t.Pow=function(t,e){for(var o=1;e>0;)o*=t,e--;return o},t.exponent=34,t.keys="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ",t}()),a=t("BpmnModelHelper",function(){function t(){}return t.GenerateElementId=function(){return++this.generatedId,"_"+s.Decimal2String(this.generatedId)},t.SetAttributeValue=function(t,e,o){null!=t&&null!=t&&null!=o&&null!=o&&(t[e]=o)},t.RegisterElementType=function(e){t.elementTypeDic[e.ClrTypeID]=e},t.GetElementType=function(e){return t.elementTypeDic[e].NewInstance()},t.elementTypeDic={},t.generatedId=parseInt(Date.now().toString()),t}()),l=t("BpmnModelElement",function(){function t(t){if(null==t)throw new Error("BpmnModel不能为null.");this.Model=t}return t.prototype.ConvertToJsonObject=function(){return{}},t.prototype.LoadFromJsonObject=function(t){this.ResetBeforeLoadFrom()},t.prototype.ResetBeforeLoadFrom=function(){},t.prototype.Validate=function(t){},t.prototype.clone=function(){return null},t}()),u=t("OmgdiElement",function(t){function e(e){var o=t.call(this,e)||this;return o.Id=a.GenerateElementId(),o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Id=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Id",this.Id),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Id=e.Id},e}(l)),c=t("Diagram",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Name=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Name",this.Name),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name},e}(u)),p=t("BpmnElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(l)),h=t("BaseElement",function(t){function e(e){var o=t.call(this,e)||this;return o.Id=a.GenerateElementId(),o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Id=null,this.Documentation=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);if(a.SetAttributeValue(e,"Id",this.Id),a.SetAttributeValue(e,"Documentation",this.Documentation),this.GetExtensionElements4ConvertTo().length>0){for(var o=new Array,n=0,r=this.GetExtensionElements4ConvertTo();n<r.length;n++){var i=r[n];o.push(i.ConvertToJsonObject())}a.SetAttributeValue(e,"extensionElements",o)}return e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),this.Id=e.Id,this.Documentation=e.Documentation,e.hasOwnProperty("extensionElements")&&Array.isArray(e.extensionElements)){for(var o=new Array,n=0,r=e.extensionElements;n<r.length;n++){var i=r[n],s=a.GetElementType(i.ClrTypeID);null!=s&&(s.LoadFromJsonObject(i),o.push(s))}this.SetExtensionElements4LoadFrom(o)}},e.prototype.GetExtensionElements4ConvertTo=function(){return new Array},e.prototype.SetExtensionElements4LoadFrom=function(t){},e}(p)),d=t("ValidationError",(function(){})),m=t("ValidationLevel",function(){function t(){}return t.$_Error="Error",t.$_Warning="Warning",t}());t("BasicDataTypes",n),function(t){t.String="String",t.Integer="Integer",t.Decimal="Decimal",t.Boolean="Boolean",t.DateTime="DateTime"}(n||t("BasicDataTypes",n={})),t("DataTypes",r),function(t){t.BasicType="BasicType",t.SchemaType="SchemaType",t.CustomType="CustomType"}(r||t("DataTypes",r={}));var y,f=t("ExtensionElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.MexTag=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),a.SetAttributeValue(e,"MexTag",this.MexTag),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.MexTag=e.MexTag},e}(l)),b=t("MexExtensionElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(f)),v=t("MexElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(l)),I=t("BeSchema",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BeId=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"BeId",this.BeId),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.BeId=e.BeId},e}(v));t("SchemaTypes",y),function(t){t.BeSchema="BeSchema",t.XmlSchema="XmlSchema"}(y||t("SchemaTypes",y={}));var A,E=t("XmlSchema",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Xsd=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Xsd",this.Xsd),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Xsd=e.Xsd},e}(v)),g=t("SchemaType",function(t){function e(e){var o=t.call(this,e)||this;return o.Category=y.BeSchema,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Category=y.BeSchema,this.BeSchema=null,this.XmlSchema=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);switch(a.SetAttributeValue(e,"Category",this.Category),this.Category){case y.BeSchema:this.BeSchema&&a.SetAttributeValue(e,"BeSchema",this.BeSchema.ConvertToJsonObject());break;case y.XmlSchema:this.XmlSchema&&a.SetAttributeValue(e,"XmlSchema",this.XmlSchema.ConvertToJsonObject());break;default:throw new Error("Invalid argument!")}return e},e.prototype.LoadFromJsonObject=function(e){switch(t.prototype.LoadFromJsonObject.call(this,e),this.Category=e.Category,this.Category){case y.BeSchema:e.BeSchema&&(this.BeSchema=new I(this.Model),this.BeSchema.LoadFromJsonObject(e.BeSchema));break;case y.XmlSchema:e.XmlSchema&&(this.XmlSchema=new E(this.Model),this.XmlSchema.LoadFromJsonObject(e.XmlSchema));break;default:throw new Error("Invalid argument!")}},e.prototype.Validate=function(e){var o;(t.prototype.Validate.call(this,e),this.Category==y.BeSchema)&&(null==this.BeSchema?((o=new d).Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定 BeSchema",e.push(o)):this.BeSchema.Validate(e));this.Category==y.XmlSchema&&(null==this.XmlSchema?((o=new d).Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定 XmlSchema",e.push(o)):this.XmlSchema.Validate(e))},e}(v)),T=t("DataType",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.DataType",o.BasicType=n.String,o.Category=r.BasicType,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BasicType=n.String,this.Category=r.BasicType,this.Description=null,this.InitialValue=null,this.SchemaType=null,this.CustomType=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);switch(a.SetAttributeValue(e,"Category",this.Category),a.SetAttributeValue(e,"Description",this.Description),this.Category){case r.BasicType:if(a.SetAttributeValue(e,"BasicType",this.BasicType),null!=this.InitialValue)try{switch(this.BasicType){case n.String:case n.Integer:case n.Decimal:a.SetAttributeValue(e,"InitialValue",this.InitialValue);break;case n.DateTime:a.SetAttributeValue(e,"InitialValue",this.DateFormat("yyyyMMddhhmmssS",this.InitialValue));break;case n.Boolean:a.SetAttributeValue(e,"InitialValue",this.InitialValue);break;default:throw new Error("Invalid argument!")}}catch(t){throw new Error("无法将给定的值转成 "+this.BasicType.toString()+" 基本数据类型.")}break;case r.SchemaType:null!=this.SchemaType&&(e.SchemaType=this.SchemaType.ConvertToJsonObject()),null!=this.InitialValue&&(e.InitialValue=this.InitialValue);break;case r.CustomType:null!=this.CustomType&&(e.CustomType=this.CustomType.ConvertToJsonObject());break;default:throw new Error("Invalid argument!")}return e},e.prototype.LoadFromJsonObject=function(e){switch(t.prototype.LoadFromJsonObject.call(this,e),this.Category=e.Category,this.Description=e.Description,this.Category){case r.BasicType:if(this.BasicType=e.BasicType,e.hasOwnProperty("InitialValue"))switch(this.BasicType){case n.String:case n.Integer:case n.Decimal:this.InitialValue=e.InitialValue;break;case n.DateTime:this.InitialValue=this.DateParse(e.InitialValue);break;case n.Boolean:this.InitialValue=e.InitialValue;break;default:throw new Error("Invalid argument!")}break;case r.SchemaType:e.hasOwnProperty("SchemaType")&&(this.SchemaType=new g(this.Model),this.SchemaType.LoadFromJsonObject(e.SchemaType)),this.InitialValue=e.InitialValue;break;case r.CustomType:e.hasOwnProperty("CustomType")&&(this.CustomType=a.GetElementType(e.CustomType.ClrTypeID),this.CustomType.LoadFromJsonObject(e.CustomType));break;default:throw new Error("Invalid argument!")}},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),this.Category==r.SchemaType)if(null==this.SchemaType){var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定 Schema 数据类型",e.push(o)}else this.SchemaType.Validate(e)},e.prototype.DateFormat=function(t,e){var o={"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"h+":e.getUTCHours(),"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getUTCMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t},e.prototype.DateParse=function(t){var e=new Date;return e.setUTCFullYear(parseInt(t.slice(0,4)),parseInt(t.slice(4,6))-1,parseInt(t.slice(6,8))),e.setUTCHours(parseInt(t.slice(8,10)),parseInt(t.slice(10,12)),parseInt(t.slice(12,14)),parseInt(t.slice(14,17))),e},e}(b)),O=t("DataInput",function(t){function e(e){var o=t.call(this,e)||this;return o.MEXTAG="bpmn.DataInput",o.IsAllowNull=!0,o.IsRequired=!0,o.IsCollection=!1,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.IsAllowNull=!0,this.IsRequired=!0,this.Name=null,this.DataType=null,this.IsCollection=!1},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"IsAllowNull",this.IsAllowNull),a.SetAttributeValue(e,"IsRequired",this.IsRequired),a.SetAttributeValue(e,"IsCollection",this.IsCollection),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name,this.IsAllowNull=e.IsAllowNull,this.IsRequired=e.IsRequired,this.IsCollection=e.IsCollection},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);return null!=this.DataType&&(this.DataType.MexTag=this.MEXTAG,e.push(this.DataType)),e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof T&&r.MexTag==this.MEXTAG&&(this.DataType=r)}},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),null!=this.DataType)this.DataType.Validate(e);else{var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定变量类型",e.push(o)}},e}(h)),D=t("DataOutput",function(t){function e(e){var o=t.call(this,e)||this;return o.MEXTAG="bpmn.DataOutput",o.IsAllowNull=!0,o.IsCollection=!1,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.IsAllowNull=!0,this.Name=null,this.DataType=null,this.IsCollection=!1},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"IsAllowNull",this.IsAllowNull),a.SetAttributeValue(e,"IsCollection",this.IsCollection),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name,this.IsAllowNull=e.IsAllowNull,this.IsCollection=e.IsCollection},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);return null!=this.DataType&&(this.DataType.MexTag=this.MEXTAG,e.push(this.DataType)),e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof T&&r.MexTag==this.MEXTAG&&(this.DataType=r)}},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),null!=this.DataType)this.DataType.Validate(e);else{var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定变量类型",e.push(o)}},e}(h)),C=t("MexExpression",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(b)),S=t("Expression",function(t){function e(e){var o=t.call(this,e)||this;return o.MEXTAG="bpmn.Expression",o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.MexExpression=null},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);return null!=this.MexExpression&&(this.MexExpression.MexTag=this.MEXTAG,e.push(this.MexExpression)),e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof C&&r.MexTag==this.MEXTAG&&(this.MexExpression=r)}},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e),null!=this.MexExpression&&this.MexExpression.Validate(e)},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.clone=function(){var t=new e(this.Model);return this.MexExpression&&(t.MexExpression=this.MexExpression.clone()),t},e}(h)),w=t("FormalExpression",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(S)),L=t("DataAssociation",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.TargetRef=null,this.Transformation=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);if(a.SetAttributeValue(e,"TargetRef",this.TargetRef),null==this.Transformation)throw new Error("Transformation is null.");return a.SetAttributeValue(e,"Transformation",this.Transformation.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.TargetRef=e.TargetRef,e.hasOwnProperty("Transformation")&&(this.Transformation=new w(this.Model),this.Transformation.LoadFromJsonObject(e.Transformation))},e.prototype.Validate=function(e){var o;(t.prototype.Validate.call(this,e),null!=this.Transformation)?this.Transformation.Validate(e):((o=new d).Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定赋值表达式",e.push(o));null==this.TargetRef&&((o=new d).Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定关联的目标",e.push(o))},e}(h)),F=t("DataInputAssociation",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(L)),V=t("EventDefinition",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(h)),J=t("BpmnModelJsonHelper",function(){function t(){}return t.GetAttributeValue=function(t,e){return null==t?null:t.hasOwnProperty(e)?t[e]:null},t.SetAttributeValue=function(e,o,n){if(null!=e&&null!=n){var r=[];if(n instanceof Array){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(null==a.ConvertToJsonObject||null==a.LoadFromJsonObject)break;r.push(a.ConvertToJsonObject())}r.length==n.length?e[o]=r:e[o]=n}else if(null!=n.ConvertToJsonObject&&null!=n.LoadFromJsonObject)e[o]=n.ConvertToJsonObject();else if(n instanceof Date){var l=t.DateTimeToString(n);t.SetAttributeValue(e,o,l)}else e[o]=n}},t.GetAttributeValueAsString=function(t,e){return null==t?null:1==t.hasOwnProperty(e)&&"string"==typeof t[e]?t[e]:null},t.GetAttributeValueAsBoolean=function(t,e){return null==t?null:1==t.hasOwnProperty(e)&&"boolean"==typeof t[e]?t[e]:null},t.GetAttributeValueAsNumber=function(t,e){return null==t?null:1==t.hasOwnProperty(e)&&"number"==typeof t[e]?t[e]:null},t.GetAttributeValueAsList=function(e,o,n){var r=t.GetAttributeValue(e,o);if(null==r)return null;for(var i=[],s=0,a=r;s<a.length;s++){var l=a[s],u=null;try{u=new n}catch(t){throw t}u.LoadFromJsonObject(l),i.push(u)}return i},t.GetAttributeValueAsDateTime=function(e,o){return t.DateTimeFromString(t.GetAttributeValueAsString(e,o))},t.GetAttributeValueAsJsonSerializable=function(e,o,n){var r=t.GetAttributeValue(e,o);if(null==r)return null;var i=null;try{i=new n}catch(t){throw t}return i.LoadFromJsonObject(r),i},t.DateTimeToString=function(e){if(null==e)return null;var o=e.getTime();if(o<t.MIN_OFFSETDATETIME.getTime()||o>t.MAX_OFFSETDATETIME.getTime())throw"给定的日期时间值 "+e.toISOString()+" 超出支持范围(0001-01-01T12:00:00.000Z - 9999-12-31T23:59:59.000Z):";return t.dateFormat(e,"yyyyMMddHHmmssSSS")},t.DateTimeFromString=function(t){if(null==t)return null;var e=new Date;return e.setUTCFullYear(parseInt(t.substring(0,4))),e.setUTCMonth(parseInt(t.substring(4,6))-1),e.setUTCDate(parseInt(t.substring(6,8))),e.setUTCHours(parseInt(t.substring(8,10))),e.setUTCMinutes(parseInt(t.substring(10,12))),e.setUTCSeconds(parseInt(t.substring(12,14))),e.setUTCMilliseconds(parseInt(t.substring(14))),e},t.ToJson=function(t){if(null==t)return null;for(var e=[],o=0,n=t;o<n.length;o++){var r=n[o];e.push(r.ConvertToJsonObject())}return JSON.stringify(e)},t.FromJson=function(e,o){if(t.IsNullOrWhiteSpace(e))return null;var n=new Array,r=JSON.parse(e);return null==r||!1===Array.isArray(r)||r.forEach((function(t){var e=new o;e.LoadFromJsonObject(t),n.push(e)})),n},t.StringListToJsonArray=function(t){if(null==t)return null;for(var e=new Array,o=0,n=t;o<n.length;o++){var r=n[o];e.push(r)}return e},t.StringListFromJsonArray=function(t){if(null==t)return null;for(var e=new Array,o=0,n=t;o<n.length;o++){var r=n[o];"object"==typeof r?e.push(JSON.stringify(r)):e.push(String(r))}return e},t.StringListToJson=function(e){var o=t.StringListToJsonArray(e);return null==o?null:JSON.stringify(o)},t.StringListFromJson=function(e){if(t.IsNullOrWhiteSpace(e))return null;var o=JSON.parse(e);return null==o?null:t.StringListFromJsonArray(o)},t.IsNullOrWhiteSpace=function(t){return null==t||0==t.replace(/(^s*)|(s*$)/g,"").length},t.GetDateFromISO=function(t){var e=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t);return e?new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],+e[6])):null},t.dateFormat=function(e,o){var n,r={"y+":e.getUTCFullYear().toString(),"M+":(e.getUTCMonth()+1).toString(),"d+":e.getUTCDate().toString(),"H+":e.getUTCHours().toString(),"m+":e.getUTCMinutes().toString(),"s+":e.getUTCSeconds().toString(),"S+":e.getUTCMilliseconds().toString()};for(var i in r)(n=new RegExp("("+i+")").exec(o))&&(o=String.prototype.padStart?o.replace(n[1],1==n[1].length?r[i]:r[i].padStart(n[1].length,"0")):o.replace(n[1],1==n[1].length?r[i]:t.myPadStart(r[i],n[1].length,"0")));return o},t.myPadStart=function(t,e,o){return e>>=0,o=String(void 0!==o?o:" "),t.length>e?String(t):((e-=t.length)>o.length&&(o+=o.repeat(e/o.length)),o.slice(0,e)+String(t))},t.MIN_OFFSETDATETIME=t.GetDateFromISO("0001-01-01T12:00:00.000Z"),t.MAX_OFFSETDATETIME=t.GetDateFromISO("9999-12-31T23:59:59.000Z"),t}()),j=t("ExtensionMethod",function(){function t(){}return t.GetAttributeValue=function(t,e){return J.GetAttributeValue(t,e)},t.GetAttributeValue4Boolean=function(t,e){return J.GetAttributeValueAsBoolean(t,e)},t.GetAttributeValue4Decimal=function(t,e){return J.GetAttributeValueAsNumber(t,e)},t.GetAttributeValue4Double=function(t,e){return J.GetAttributeValueAsNumber(t,e)},t.GetAttributeValue4Int64=function(t,e){return J.GetAttributeValueAsNumber(t,e)},t.GetAttributeValue4String=function(t,e){return J.GetAttributeValueAsString(t,e)},t.SetAttributeValue=function(t,e,o){J.SetAttributeValue(t,e,o)},t.GetDataInputWithName=function(t,e){for(var o=0,n=t.GetDataInputs();o<n.length;o++){var r=n[o];if(r.Name==e)return r}return null},t.GetDataOutputWithName=function(t,e){for(var o=0,n=t.GetDataOutputs();o<n.length;o++){var r=n[o];if(r.Name==e)return r}return null},t.GetDataObjectWithName=function(t,e){for(var o=0,n=t.GetDataObjects();o<n.length;o++){var r=n[o];if(r.Name==e)return r}return null},t}()),R=t("EventHelper",function(){function t(t,e){this.callback=null,this.context=null;this.callback=t,this.context=e}return t.prototype.notify=function(t){this.callback.call(this.context,t)},t.prototype.compar=function(t){return t==this.context},t}()),M=t("FlowElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.RegisterEvent=function(t,o,n){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push(new R(o,n))},e.prototype.FireEvent=function(t){var o=e.listeners[t];if(o)for(var n=o.length,r=0;r<n;r++){o[r].notify(t)}},e.prototype.RemoveEvent=function(t,o,n){var r=e.listeners[t];if(r){for(var i=r.length,s=0;s<i;s++){if(r[s].compar(n)){r.splice(s,1);break}}0==r.length&&delete e.listeners[t]}},e.prototype.clone=function(){var t=this.NewInstance();return t.Name=this.Name,t.NameLanguage=this.NameLanguage&&i({},this.NameLanguage),t},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Name=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),a.SetAttributeValue(e,"nameLanguage",this.NameLanguage),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name,this.NameLanguage=e.nameLanguage},e.listeners={},e}(h));t("GatewayType",A),function(t){t.Exclusive="Exclusive",t.Inclusive="Inclusive",t.Parallel="Parallel"}(A||t("GatewayType",A={}));var G,P,x=t("ExecutionListener",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.ExecutionListener",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Class=null,this.Event=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Event",this.Event),a.SetAttributeValue(e,"Class",this.Class),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Event=e.Event,this.Class=e.Class},e}(b)),B=t("ObjectHelper",function(){function t(){}return t.getPrototypeNames=function(t){for(var e=[];null!=t;)e.push(t.constructor.name),t=t.__proto__;return e},t.extendFromClass=function(e,o){return t.getPrototypeNames(e).includes(o)},t}()),N=t("FlowNode",function(t){function e(e){var o=t.call(this,e)||this;return o.executionListeners=new Array,o.IncomingGatewayType=A.Exclusive,o.Incomings=new Array,o.OutgoingGatewayType=A.Exclusive,o.Outgoings=new Array,o.MEXTAG="bpmn.FlowNode",o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.executionListeners=new Array,this.IncomingGatewayType=A.Exclusive,this.Incomings=new Array,this.OutgoingGatewayType=A.Exclusive,this.Outgoings=new Array},e.prototype.GetExecutionListeners=function(){return this.executionListeners},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);0==B.extendFromClass(this,"Gateway")&&(this.IncomingGatewayType!=A.Exclusive&&a.SetAttributeValue(e,"IncomingGatewayType",this.IncomingGatewayType),this.OutgoingGatewayType!=A.Exclusive&&a.SetAttributeValue(e,"OutgoingGatewayType",this.OutgoingGatewayType));for(var o=new Array,n=0,r=this.Incomings;n<r.length;n++){var i=r[n];o.push(i)}o.length>0&&a.SetAttributeValue(e,"incomings",o);for(var s=new Array,l=0,u=this.Outgoings;l<u.length;l++){i=u[l];s.push(i)}return s.length>0&&a.SetAttributeValue(e,"outgoings",s),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),0==B.extendFromClass(this,"Gateway")&&(e.hasOwnProperty("IncomingGatewayType")&&(this.IncomingGatewayType=e.IncomingGatewayType),e.hasOwnProperty("OutgoingGatewayType")&&(this.OutgoingGatewayType=e.OutgoingGatewayType)),e.hasOwnProperty("incomings")&&Array.isArray(e.incomings))for(var o=0,n=e.incomings;o<n.length;o++){var r=n[o];this.Incomings.push(r)}if(e.hasOwnProperty("outgoings")&&Array.isArray(e.outgoings))for(var i=0,s=e.outgoings;i<s.length;i++){r=s[i];this.Outgoings.push(r)}},e.prototype.GetExtensionElements4ConvertTo=function(){for(var e=t.prototype.GetExtensionElements4ConvertTo.call(this),o=0,n=this.executionListeners;o<n.length;o++){var r=n[o];r.MexTag=this.MEXTAG,e.push(r)}return e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof x&&r.MexTag==this.MEXTAG&&this.executionListeners.push(r)}},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e);for(var o=0,n=this.executionListeners;o<n.length;o++){(s=n[o]).Validate(e)}for(var r=0,i=this.Incomings;r<i.length;r++){var s=i[r];if(null==this.Model.GetHasIdElement(s))(u=new d).Element=this,u.ErrorLevel=m.$_Error,u.ErrorCode="",u.ErrorMessage="找不到 id 为 "+s+" 的连线。",e.push(u)}for(var a=0,l=this.Outgoings;a<l.length;a++){var u;s=l[a];if(null==this.Model.GetHasIdElement(s))(u=new d).Element=this,u.ErrorLevel=m.$_Error,u.ErrorCode="",u.ErrorMessage="找不到 id 为 "+s+" 的连线。",e.push(u)}},e}(M)),k=t("Event",function(t){function e(e){var o=t.call(this,e)||this;return o.EventDefinitions=new Array,o}return o(e,t),e.prototype.ConvertToJsonObject=function(){for(var e=t.prototype.ConvertToJsonObject.call(this),o=new Array,n=0,r=this.EventDefinitions;n<r.length;n++){var i=r[n];o.push(i.ConvertToJsonObject())}return o.length>0&&j.SetAttributeValue(e,"eventDefinitions",o),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e);var o=j.GetAttributeValue(e,"eventDefinitions");if(o instanceof Array)for(var n=null,r=0,i=o;r<i.length;r++){var s=i[r],l=a.GetElementType(j.GetAttributeValue4String(s,"ClrTypeID"));if(null!=l){(n=l.NewInstance()).Model=this.Model;var u=n instanceof V?n:null;null!=u&&(u.LoadFromJsonObject(s),this.EventDefinitions.push(u))}}},e}(N)),H=t("ThrowEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.dataInputAssociationDic={},o.dataInputDIc={},o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.dataInputAssociationDic={},this.dataInputDIc={}},e.prototype.AddDataInput=function(t){this.CheckVariableElement(t),this.dataInputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInput=function(t){return null==t?null:this.dataInputDIc.hasOwnProperty("dataInputId")?this.dataInputDIc[t]:null},e.prototype.GetDataInputs=function(){var t=new Array;for(var e in this.dataInputDIc)t.push(this.dataInputDIc[e]);return t},e.prototype.RemoveDataInput=function(t){delete this.dataInputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataInputAssociation=function(t){W.CheckHasIdElement(t),this.dataInputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInputAssociation=function(t){return null==t?null:this.dataInputAssociationDic.hasOwnProperty("associationId")?this.dataInputAssociationDic[t]:null},e.prototype.GetDataInputAssociations=function(){var t=new Array;for(var e in this.dataInputAssociationDic)t.push(this.dataInputAssociationDic[e]);return t},e.prototype.RemoveDataInputAssociation=function(t){delete this.dataInputAssociationDic[t],this.Model.RemoveHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=new Array;for(var n in this.dataInputDIc){var r=this.dataInputDIc[n].ConvertToJsonObject();o.push(r)}o.length>0&&a.SetAttributeValue(e,"dataInputs",o);var i=new Array;for(var n in this.dataInputAssociationDic){r=this.dataInputAssociationDic[n].ConvertToJsonObject();i.push(r)}return i.length>0&&a.SetAttributeValue(e,"dataInputAssociations",i),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("dataInputs")&&Array.isArray(e.dataInputs))for(var o=0,n=e.dataInputs;o<n.length;o++){var r=n[o],i=new O(this.Model);i.LoadFromJsonObject(r),this.AddDataInput(i)}if(e.hasOwnProperty("dataInputAssociations")&&Array.isArray(e.dataInputAssociations))for(var r in e.dataInputAssociations){var s=new F(this.Model);s.LoadFromJsonObject(r),this.AddDataInputAssociation(s)}},e.prototype.Validate=function(e){for(var o in t.prototype.Validate.call(this,e),this.dataInputDIc)this.dataInputDIc[o].Validate(e);for(var o in this.dataInputAssociationDic)this.dataInputAssociationDic[o].Validate(e)},e.prototype.CheckVariableElement=function(t){W.CheckVariableElement(t,this,null,null)},e}(k)),X=t("EndEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.EndEvent",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e}(H)),_=t("SequenceFlow",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.SequenceFlow",o.executionListeners=new Array,o.MEXTAG="bpmn.SequenceFlow",o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.ConditionExpression=null,this.SkipExpression=null,this.SourceRef=null,this.TargetRef=null,this.executionListeners=new Array},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.GetExecutionListeners=function(){return this.executionListeners},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"SkipExpression",this.SkipExpression),a.SetAttributeValue(e,"SourceRef",this.SourceRef),a.SetAttributeValue(e,"TargetRef",this.TargetRef),null!=this.ConditionExpression&&a.SetAttributeValue(e,"ConditionExpression",this.ConditionExpression.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.SkipExpression=e.SkipExpression,this.SourceRef=e.SourceRef,this.TargetRef=e.TargetRef,e.hasOwnProperty("ConditionExpression")&&(this.ConditionExpression=new S(this.Model),this.ConditionExpression.LoadFromJsonObject(e.ConditionExpression))},e.prototype.GetExtensionElements4ConvertTo=function(){for(var e=t.prototype.GetExtensionElements4ConvertTo.call(this),o=0,n=this.executionListeners;o<n.length;o++){var r=n[o];r.MexTag=this.MEXTAG,e.push(r)}return e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof x&&r.MexTag==this.MEXTAG&&this.executionListeners.push(r)}},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e);for(var o=0,n=this.executionListeners;o<n.length;o++){n[o].Validate(e)}},e}(M)),U=t("DataOutputAssociation",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(L)),z=t("CatchEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.dataOutputAssociationDic={},o.dataOutputDIc={},o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.dataOutputAssociationDic={},this.dataOutputDIc={}},e.prototype.AddDataOutput=function(t){this.CheckVariableElement(t),this.dataOutputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutput=function(t){return null==t?null:this.dataOutputDIc.hasOwnProperty("dataOutputId")?this.dataOutputDIc[t]:null},e.prototype.GetDataOutputs=function(){var t=new Array;for(var e in this.dataOutputDIc)t.push(this.dataOutputDIc[e]);return t},e.prototype.RemoveDataOutput=function(t){delete this.dataOutputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataOutputAssociation=function(t){W.CheckHasIdElement(t),this.dataOutputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutputAssociation=function(t){return null==t?null:this.dataOutputAssociationDic.hasOwnProperty("associationId")?this.dataOutputAssociationDic[t]:null},e.prototype.GetDataOutputAssociations=function(){var t=new Array;for(var e in this.dataOutputAssociationDic)t.push(this.dataOutputAssociationDic[e]);return t},e.prototype.RemoveDataOutputAssociation=function(t){delete this.dataOutputAssociationDic[t],this.Model.RemoveHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=new Array;for(var n in this.dataOutputDIc){var r=this.dataOutputDIc[n].ConvertToJsonObject();o.push(r)}o.length>0&&a.SetAttributeValue(e,"dataOutputs",o);var i=new Array;for(var n in this.dataOutputAssociationDic){r=this.dataOutputAssociationDic[n].ConvertToJsonObject();i.push(r)}return i.length>0&&a.SetAttributeValue(e,"dataOutputAssociations",i),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("dataOutputs")&&Array.isArray(e.dataOutputs))for(var o=0,n=e.dataOutputs;o<n.length;o++){var r=n[o],i=new D(this.Model);i.LoadFromJsonObject(r),this.AddDataOutput(i)}if(e.hasOwnProperty("dataOutputAssociations")&&Array.isArray(e.dataOutputAssociations))for(var r in e.dataOutputAssociations){var s=new U(this.Model);s.LoadFromJsonObject(r),this.AddDataOutputAssociation(s)}},e.prototype.Validate=function(e){for(var o in t.prototype.Validate.call(this,e),this.dataOutputDIc)this.dataOutputDIc[o].Validate(e);for(var o in this.dataOutputAssociationDic)this.dataOutputAssociationDic[o].Validate(e)},e.prototype.CheckVariableElement=function(t){W.CheckVariableElement(t,null,this,null)},e}(k)),$=t("StartEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.StartEvent",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e}(z)),W=t("ValidateHelper",function(){function t(){}return t.CheckHasIdElement=function(e){if(null==e)throw new Error("流程元素不能为 null.");if(null==e.Id)throw new Error("流程元素 id 不能为 null.");if(0==t.IsMatchVariableNameRules(e.Id))throw new Error("流程元素 id 只能包含字母、数字和下划线，且不能以数字开头。");if(null!=e.Model.GetHasIdElement(e.Id))throw new Error("已经存在 id 为 "+e.Id+" 的流程元素。")},t.IsMatchVariableNameRules=function(t){return!!/^[a-zA-Z_][a-zA-Z_0-9]{0,}/.test(t)},t.ValidateProcess=function(t,e){for(var o in this.ValidateStartEvents(t,e),this.ValidateEndEvents(t,e),this.ValidateSequenceFlow(t,e),this.ValidateFlowNode(t,e),t.GetFlowElements());for(var o in t.GetFlowElements());},t.CheckVariableElement=function(e,o,n,r){if(this.CheckHasIdElement(e),null==e.Name)throw new Error("变量名、参数名不能为 null.");if(0==t.IsMatchVariableNameRules(e.Name))throw new Error("变量名、参数名只能包含字母、数字和下划线，且不能以数字开头。");if(null!=o)for(var i=0,s=o.GetDataInputs();i<s.length;i++){var a=s[i];if(e.Name==a.Name)throw new Error("已存在名为 "+e.Name+" 的输入参数")}if(null!=n)for(var l=0,u=n.GetDataOutputs();l<u.length;l++){a=u[l];if(e.Name==a.Name)throw new Error("已存在名为 "+e.Name+" 的输出参数")}if(null!=r)for(var c=0,p=r.GetDataObjects();c<p.length;c++){a=p[c];if(e.Name==a.Name)throw new Error("已存在名为 "+e.Name+" 的流程变量")}},t.ValidateEndEvents=function(t,e){var o=new Array;for(var n in t.GetFlowElements()){var r=t.GetFlowElements()[n];r instanceof X&&o.push(r)}if(0==o.length){var i=new d;i.ErrorLevel=m.$_Error,i.ErrorCode="",i.ErrorMessage="未设置结束活动",e.push(i)}},t.ValidateFlowNode=function(t,e){for(var o in t.GetFlowElements()){var n=t.GetFlowElements()[o];if(n instanceof N!=0){var r,i=new Array,s=new Array;for(var a in t.GetFlowElements()){var l=t.GetFlowElements()[a];l instanceof _!=0&&(l.SourceRef==n.Id&&s.push(l),l.TargetRef==n.Id&&i.push(l))}if(0==i.length&&n instanceof $==0)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="没有入口连线",e.push(r);if(i.length>0&&n instanceof $==1)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="开始活动不能有入口连线",e.push(r);if(0==s.length&&n instanceof X==0)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="没有出口连线",e.push(r);if(s.length>0&&n instanceof X==1)if(s.length>0&&n instanceof X==1)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="结束活动不能有出口连线",e.push(r)}}},t.ValidateIDataInputAssociationContainer=function(t,e,o){for(var n=0,r=o.GetDataInputAssociations();n<r.length;n++){var i=r[n],s=o;if(s instanceof{AddDataOutput:function(t){},GetDataOutput:function(t){return new O(null)},GetDataOutputs:function(){return new Array},RemoveDataOutput:function(t){}})(c=new d).Element=i,c.ErrorLevel=m.$_Error,c.ErrorCode="",c.ErrorMessage="id 为 "+o.Id+" 的元素没有实现接口 IDataInputContainer。",e.push();if(null==s.GetDataInput(i.TargetRef))(c=new d).Element=i,c.ErrorLevel=m.$_Error,c.ErrorCode="",c.ErrorMessage="没有找到 id 为 "+i.TargetRef+" 的参数。",e.push(c)}for(var a=0,l=o.GetDataInputs();a<l.length;a++){var u=l[a];if(0!=u.IsRequired){for(var c,p=null,h=0,y=o.GetDataInputAssociations();h<y.length;h++){if((i=y[h]).TargetRef==u.Id){p=i;break}}if(null==p)(c=new d).ErrorLevel=m.$_Error,c.ErrorCode="",c.ErrorMessage="没有找到 id 为 "+u.Id+" ，名称为 "+u.Name+" 的输入参数的赋值表达式。",e.push(c)}}},t.ValidateIDataOutputAssociationContainer=function(t,e,o){for(var n=0,r=o.GetDataOutputAssociations();n<r.length;n++){var i,s=r[n];if(o instanceof{AddDataOutput:function(t){},GetDataOutput:function(t){return new D(null)},GetDataOutputs:function(){return new Array},RemoveDataOutput:function(t){}})(i=new d).Element=s,i.ErrorLevel=m.$_Error,i.ErrorCode="",i.ErrorMessage="id 为 "+o.Id+" 的元素没有实现接口 IDataOutputContainer。",e.push();if(null==t.GetDataObject(s.TargetRef)&&null==t.GetDataInput(s.TargetRef)&&null==t.GetDataOutput(s.TargetRef))(i=new d).Element=s,i.ErrorLevel=m.$_Error,i.ErrorCode="",i.ErrorMessage="没有找到 id 为 "+s.TargetRef+" 的参数或流程变量。",e.push()}},t.ValidateSequenceFlow=function(t,e){for(var o in t.GetFlowElements()){var n=t.GetFlowElements()[o];if(n instanceof _!=0){var r;if(null==n.SourceRef)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="没有设定连线的来源",e.push(r);else if(null==t.GetFlowElement(n.SourceRef))(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="连线的来源设置有误，没有找到 id 为 "+n.SourceRef+" 的活动",e.push(r);if(null==n.TargetRef)(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="没有设定连线的目标",e.push(r);else if(null==t.GetFlowElement(n.TargetRef))(r=new d).Element=n,r.ErrorLevel=m.$_Error,r.ErrorCode="",r.ErrorMessage="连线的目标设置有误，没有找到 id 为 "+n.TargetRef+" 的活动",e.push(r)}}},t.ValidateStartEvents=function(t,e){var o=new Array;for(var n in t.GetFlowElements()){var r=t.GetFlowElements()[n];r instanceof $&&o.push(r)}if(0==o.length)(i=new d).ErrorLevel=m.$_Error,i.ErrorCode="",i.ErrorMessage="未设置开始活动",e.push(i);else if(o.length>1){var i;(i=new d).ErrorLevel=m.$_Error,i.ErrorCode="",i.ErrorMessage="只能设置1个开始活动",e.push(i)}},t}()),q=t("OmgdcElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(l)),Y=t("Font",function(t){function e(e){var o=t.call(this,e)||this;return o.IsBold=!1,o.IsItalic=!1,o.IsStrikeThrough=!1,o.IsUnderline=!1,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.IsBold=!1,this.IsItalic=!1,this.IsStrikeThrough=!1,this.IsUnderline=!1,this.Name=null,this.Size=0},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"IsBold",this.IsBold),a.SetAttributeValue(e,"IsItalic",this.IsItalic),a.SetAttributeValue(e,"IsStrikeThrough",this.IsStrikeThrough),a.SetAttributeValue(e,"IsUnderline",this.IsUnderline),a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"Size",this.Size),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.IsBold=e.IsBold,this.IsItalic=e.IsItalic,this.IsStrikeThrough=e.IsStrikeThrough,this.IsUnderline=e.IsUnderline,this.Name=e.Name,this.Size=e.Size},e}(q)),Z=t("Style",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(u)),K=t("BPMNLabelStyle",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Font=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return null!=this.Font&&a.SetAttributeValue(e,"Font",this.Font.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("Font")&&(this.Font=new Y(this.Model),this.Font.LoadFromJsonObject(e.Font))},e}(Z)),Q=t("DiagramElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID);var o={};return this.WriteExtensionElements(o),Object.getOwnPropertyNames(o).length>0&&a.SetAttributeValue(e,"extensionElements",o),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("extensionElements")&&this.LoadExtensionElements(e.extensionElements)},e.prototype.LoadExtensionElements=function(t){},e.prototype.WriteExtensionElements=function(t){},e}(u)),tt=t("Node",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Q)),et=t("Plane",function(t){function e(e){var o=t.call(this,e)||this;return o.diagramElementDic={},o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.diagramElementDic={}},e.prototype.AddDiagramElement=function(t){this.CheckDiagramElement(t),this.diagramElementDic[t.Id]=t},e.prototype.GetDiagramElement=function(t){return null==t?null:this.diagramElementDic.hasOwnProperty(t)?this.diagramElementDic[t]:null},e.prototype.GetDiagramElements=function(){var t=new Array;for(var e in this.diagramElementDic){var o=this.diagramElementDic[e];t.push(o)}return t},e.prototype.RemoveDiagramElement=function(t){delete this.diagramElementDic[t]},e.prototype.CheckDiagramElement=function(t){W.CheckHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=new Array;for(var n in this.diagramElementDic){var r=this.diagramElementDic[n].ConvertToJsonObject();o.push(r)}return o.length>0&&a.SetAttributeValue(e,"diagramElements",o),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("diagramElements")&&Array.isArray(e.diagramElements))for(var o=0,n=e.diagramElements;o<n.length;o++){var r=n[o],i=a.GetElementType(r.ClrTypeID);null!=i&&(i.Model=this.Model,i.LoadFromJsonObject(r),this.AddDiagramElement(i))}},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e);for(var o=0,n=this.GetDiagramElements();o<n.length;o++){n[o].Validate(e)}},e}(tt));t("OrganizationLevel",G),function(t){t.DEPARTMENT="DEPARTMENT",t.UNIT="UNIT"}(G||t("OrganizationLevel",G={})),t("PalParticipantType",P),function(t){t.Position="Position",t.Organization="Organization",t.User="User"}(P||t("PalParticipantType",P={}));var ot,nt=t("Participant",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"Id",this.id),j.SetAttributeValue(e,"Name",this.name),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.id=j.GetAttributeValue4String(e,"Id"),this.name=j.GetAttributeValue4String(e,"Name")},e.prototype.clone=function(){var t=this.NewInstance();return t.id=this.id,t.name=this.name,t},e}(f)),rt=t("PalParticipant",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="pal.PositionParticipant",o.palParticipantType=P.Position,o.organizationLevel=G.DEPARTMENT,o.positionOrgType="Sys",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.palParticipantType=P.Position,this.organizationLevel=G.DEPARTMENT,this.organizationId=null,this.organizationCode=null,this.organizationName=null,this.positionId=null,this.positionCode=null,this.positionName=null,this.positionType=null,this.positionOrgId=null,this.positionOrgName=null,this.positionOrgType=null,this.userId=null,this.userCode=null,this.userName=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"PalParticipantType",this.palParticipantType),j.SetAttributeValue(e,"OrganizationLevel",this.organizationLevel),j.SetAttributeValue(e,"OrganizationId",this.organizationId),j.SetAttributeValue(e,"OrganizationCode",this.organizationCode),j.SetAttributeValue(e,"OrganizationName",this.organizationName),j.SetAttributeValue(e,"PositionId",this.positionId),j.SetAttributeValue(e,"PositionCode",this.positionCode),j.SetAttributeValue(e,"PositionName",this.positionName),j.SetAttributeValue(e,"PositionType",this.positionType),j.SetAttributeValue(e,"PositionOrgId",this.positionOrgId),j.SetAttributeValue(e,"PositionOrgName",this.positionOrgName),j.SetAttributeValue(e,"PositionOrgType",this.positionOrgType),j.SetAttributeValue(e,"UserId",this.userId),j.SetAttributeValue(e,"UserCode",this.userCode),j.SetAttributeValue(e,"UserName",this.userName),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.palParticipantType=P[j.GetAttributeValue4String(e,"PalParticipantType")],this.organizationLevel=G[j.GetAttributeValue4String(e,"OrganizationLevel")],this.organizationId=j.GetAttributeValue4String(e,"OrganizationId"),this.organizationCode=j.GetAttributeValue4String(e,"OrganizationCode"),this.organizationName=j.GetAttributeValue4String(e,"OrganizationName"),this.positionId=j.GetAttributeValue4String(e,"PositionId"),this.positionCode=j.GetAttributeValue4String(e,"PositionCode"),this.positionName=j.GetAttributeValue4String(e,"PositionName"),this.positionType=j.GetAttributeValue4String(e,"PositionType"),this.positionOrgId=j.GetAttributeValue4String(e,"PositionOrgId"),this.positionOrgName=j.GetAttributeValue4String(e,"PositionOrgName"),this.positionOrgType=j.GetAttributeValue4String(e,"PositionOrgType"),this.userId=j.GetAttributeValue4String(e,"UserId"),this.userCode=j.GetAttributeValue4String(e,"UserCode"),this.userName=j.GetAttributeValue4String(e,"UserName")},e.prototype.clone=function(){var t=this.NewInstance();return t.palParticipantType=this.palParticipantType,t.organizationId=this.organizationId,t.organizationCode=this.organizationCode,t.organizationName=this.organizationName,t.organizationLevel=this.organizationLevel,t.positionId=this.positionId,t.positionCode=this.positionCode,t.positionName=this.positionName,t.positionOrgId=this.positionOrgId,t.positionOrgName=this.positionOrgName,t.positionOrgType=this.positionOrgType,t.positionType=this.positionType,t.userId=this.userId,t.userCode=this.userCode,t.userName=this.userName,t},e}(nt)),it=t("PalProcessAttribute",function(t){function e(e){var o=t.call(this,e)||this;return o.layer=0,o.departments=[],o.responsiblePersons=[],o.executiveDepartments=[],o.itSystemIds=[],o.preProcessIds=[],o.postProcessIds=[],o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.name=null,this.layer=0,this.description=null,this.code=null,this.processType=null,this.input=null,this.output=null,this.departments=[],this.responsiblePersons=[],this.executiveDepartments=[],this.securityClass=null,this.itSystemIds=[],this.preProcessIds=[],this.postProcessIds=[]},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"name",this.name),j.SetAttributeValue(e,"layer",this.layer),j.SetAttributeValue(e,"description",this.description),j.SetAttributeValue(e,"code",this.code),j.SetAttributeValue(e,"processType",this.processType),j.SetAttributeValue(e,"input",this.input),j.SetAttributeValue(e,"output",this.output),j.SetAttributeValue(e,"departments",this.departments?this.departments.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"responsiblePersons",this.responsiblePersons?this.responsiblePersons.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"executiveDepartments",this.executiveDepartments?this.executiveDepartments.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"securityClass",this.securityClass),j.SetAttributeValue(e,"itSystemIds",J.StringListToJson(this.itSystemIds)),j.SetAttributeValue(e,"preProcessIds",J.StringListToJson(this.preProcessIds)),j.SetAttributeValue(e,"postProcessIds",J.StringListToJson(this.postProcessIds)),e},e.prototype.LoadFromJsonObject=function(e){var o=this;t.prototype.LoadFromJsonObject.call(this,e),this.name=j.GetAttributeValue4String(e,"name"),this.layer=j.GetAttributeValue4Int64(e,"layer"),this.description=j.GetAttributeValue4String(e,"description"),this.code=j.GetAttributeValue4String(e,"code"),this.processType=j.GetAttributeValue4String(e,"processType"),this.input=j.GetAttributeValue4String(e,"input"),this.output=j.GetAttributeValue4String(e,"output");var n=j.GetAttributeValue(e,"departments");this.departments=n?n.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[];var r=j.GetAttributeValue(e,"responsiblePersons");this.responsiblePersons=r?r.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[];var i=j.GetAttributeValue(e,"executiveDepartments");this.executiveDepartments=i?i.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[],this.securityClass=j.GetAttributeValue4String(e,"securityClass"),this.itSystemIds=J.StringListFromJson(j.GetAttributeValue4String(e,"itSystemIds")),this.preProcessIds=J.StringListFromJson(j.GetAttributeValue4String(e,"preProcessIds")),this.postProcessIds=J.StringListFromJson(j.GetAttributeValue4String(e,"postProcessIds"))},e.prototype.clone=function(){var t=new e(this.Model);return t.name=this.name,t.layer=this.layer,t.description=this.description,t.code=this.code,t.processType=this.processType,t.input=this.input,t.output=this.output,t.departments=this.departments.map((function(t){return t.clone()})),t.responsiblePersons=this.responsiblePersons.map((function(t){return t.clone()})),t.executiveDepartments=this.executiveDepartments.map((function(t){return t.clone()})),t.securityClass=this.securityClass,t.itSystemIds=this.itSystemIds?this.itSystemIds.map((function(t){return t})):[],t.preProcessIds=this.preProcessIds?this.preProcessIds.map((function(t){return t})):[],t.postProcessIds=this.postProcessIds?this.postProcessIds.map((function(t){return t})):[],t},e}(v)),st=t("BPMNPlane",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.bpmndi.BPMNPlane",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BpmnElementId=null,this.palProcessAttribute=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"BpmnElementId",this.BpmnElementId),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.BpmnElementId=e.BpmnElementId},e.prototype.LoadExtensionElements=function(e){t.prototype.LoadExtensionElements.call(this,e);var o=j.GetAttributeValue(e,"palProcessAttribute");null!=o&&(this.palProcessAttribute=new it(this.Model),this.palProcessAttribute.LoadFromJsonObject(o))},e.prototype.WriteExtensionElements=function(e){t.prototype.WriteExtensionElements.call(this,e),null!=this.palProcessAttribute&&j.SetAttributeValue(e,"palProcessAttribute",this.palProcessAttribute.ConvertToJsonObject())},e.MEXTAG="plane.bpa",e}(et)),at=t("BPMNDiagram",function(t){function e(e){var o=t.call(this,e)||this;return o.bpmnLabelStyleDic={},o.BpmnPlane=new st(e),o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BpmnPlane=null,this.bpmnLabelStyleDic={}},e.prototype.AddBPMNLabelStyle=function(t){this.CheckBPMNLabelStyle(t),this.bpmnLabelStyleDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetBPMNLabelStyle=function(t){return null==t?null:this.bpmnLabelStyleDic.hasOwnProperty(t)?this.bpmnLabelStyleDic[t]:null},e.prototype.GetBPMNLabelStyles=function(){var t=new Array;for(var e in this.bpmnLabelStyleDic)t.push(this.bpmnLabelStyleDic[e]);return t},e.prototype.RemoveBPMNLabelStyle=function(t){delete this.bpmnLabelStyleDic[t]},e.prototype.CheckBPMNLabelStyle=function(t){W.CheckHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);null!=this.BpmnPlane&&a.SetAttributeValue(e,"BpmnPlane",this.BpmnPlane.ConvertToJsonObject());var o=new Array;for(var n in this.bpmnLabelStyleDic){var r=this.bpmnLabelStyleDic[n].ConvertToJsonObject();o.push(r)}return o.length>0&&a.SetAttributeValue(e,"bpmnLabelStyles",o),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("BpmnPlane")&&(this.BpmnPlane=new st(this.Model),this.BpmnPlane.LoadFromJsonObject(e.BpmnPlane)),e.hasOwnProperty("bpmnLabelStyles")&&Array.isArray(e.bpmnLabelStyles))for(var o=0,n=e.bpmnLabelStyles;o<n.length;o++){var r=n[o],i=new K(this.Model);i.LoadFromJsonObject(r),this.AddBPMNLabelStyle(i)}},e}(c));t("RectangularLineType",ot),function(t){t.V2H="V2H",t.H2V="H2V"}(ot||t("RectangularLineType",ot={}));var lt,ut=t("RectangularLine",function(t){function e(e){var o=t.call(this,e)||this;return o.LineType=ot.H2V,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.LineType=ot.H2V},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"LineType",this.LineType),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.LineType=e.LineType},e}(v)),ct=t("Point",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.X=0,this.Y=0},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"X",this.X),a.SetAttributeValue(e,"Y",this.Y),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.X=e.X,this.Y=e.Y},e}(q)),pt=t("Edge",function(t){function e(e){var o=t.call(this,e)||this;return o.Points=new Array,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Points=new Array},e.prototype.ConvertToJsonObject=function(){for(var e=t.prototype.ConvertToJsonObject.call(this),o=new Array,n=0,r=this.Points;n<r.length;n++){var i=r[n];o.push(i.ConvertToJsonObject())}return o.length>0&&a.SetAttributeValue(e,"points",o),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("points")&&Array.isArray(e.points))for(var o=0,n=e.points;o<n.length;o++){var r=n[o],i=new ct(this.Model);i.LoadFromJsonObject(r),this.Points.push(i)}},e}(Q)),ht=t("LabeledEdge",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(pt)),dt=t("Bounds",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Height=0,this.Width=0,this.X=0,this.Y=0},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Height",this.Height),a.SetAttributeValue(e,"Width",this.Width),a.SetAttributeValue(e,"X",this.X),a.SetAttributeValue(e,"Y",this.Y),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Height=e.Height,this.Width=e.Width,this.X=e.X,this.Y=e.Y},e}(q)),mt=t("Label",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Bounds=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return null!=this.Bounds&&a.SetAttributeValue(e,"Bounds",this.Bounds.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("Bounds")&&(this.Bounds=new dt(this.Model),this.Bounds.LoadFromJsonObject(e.Bounds))},e}(tt)),yt=t("BPMNLabel",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.bpmndi.BPMNLabel",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.LabelStyle=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"LabelStyle",this.LabelStyle),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.LabelStyle=e.LabelStyle},e}(mt));t("SequenceFlowLineType",lt),function(t){t.PolyLine="PolyLine",t.RectangularLineType="RectangularLineType"}(lt||t("SequenceFlowLineType",lt={}));var ft,bt=t("BPMNEdge",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.bpmndi.BPMNEdge",o.LineType=lt.PolyLine,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BpmnElementId=null,this.LineType=lt.PolyLine,this.SourceShapeElementId=null,this.TargetShapeElementId=null,this.BpmnLabel=null,this.RectangularLine=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"BpmnElementId",this.BpmnElementId),a.SetAttributeValue(e,"SourceShapeElementId",this.SourceShapeElementId),a.SetAttributeValue(e,"TargetShapeElementId",this.TargetShapeElementId),a.SetAttributeValue(e,"LineType",this.LineType),null!=this.BpmnLabel&&a.SetAttributeValue(e,"BpmnLabel",this.BpmnLabel.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.BpmnElementId=e.BpmnElementId,this.SourceShapeElementId=e.SourceShapeElementId,this.TargetShapeElementId=e.TargetShapeElementId,this.LineType=e.LineType,e.hasOwnProperty("BpmnLabel")&&(this.BpmnLabel=new yt(this.Model),this.BpmnLabel.LoadFromJsonObject(e.BpmnLabel))},e.prototype.LoadExtensionElements=function(e){t.prototype.LoadExtensionElements.call(this,e),e.hasOwnProperty("RectangularLine")&&(this.RectangularLine=new ut(this.Model),this.RectangularLine.LoadFromJsonObject(e.RectangularLine))},e.prototype.WriteExtensionElements=function(e){if(t.prototype.WriteExtensionElements.call(this,e),this.LineType===lt.RectangularLineType)a.SetAttributeValue(e,"RectangularLine",this.RectangularLine.ConvertToJsonObject())},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),null==this.Model.GetHasIdElement(this.BpmnElementId)){var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="找不到 id 为 "+this.BpmnElementId+" 的元素",e.push(o)}},e}(ht)),vt=t("PalUserTaskAttribute",function(t){function e(e){var o=t.call(this,e)||this;return o.responsiblePersons=[],o.accountablePersons=[],o.consultedPersons=[],o.informedPersons=[],o.formDataIds=[],o.itSystemIds=[],o.riskIds=[],o.riskManagementIds=[],o.systemIds=[],o.kpiIds=[],o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.name=null,this.layer=0,this.description=null,this.code=null,this.input=null,this.output=null,this.responsiblePersons=[],this.accountablePersons=[],this.consultedPersons=[],this.informedPersons=[],this.formDataIds=[],this.itSystemIds=[],this.riskIds=[],this.riskManagementIds=[],this.systemIds=[],this.kpiIds=[]},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"name",this.name),j.SetAttributeValue(e,"layer",this.layer),j.SetAttributeValue(e,"description",this.description),j.SetAttributeValue(e,"code",this.code),j.SetAttributeValue(e,"input",this.input),j.SetAttributeValue(e,"output",this.output),j.SetAttributeValue(e,"responsiblePersons",this.responsiblePersons?this.responsiblePersons.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"accountablePersons",this.accountablePersons?this.accountablePersons.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"consultedPersons",this.consultedPersons?this.consultedPersons.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"informedPersons",this.informedPersons?this.informedPersons.map((function(t){return t.ConvertToJsonObject()})):[]),j.SetAttributeValue(e,"formDataIds",J.StringListToJson(this.formDataIds)),j.SetAttributeValue(e,"itSystemIds",J.StringListToJson(this.itSystemIds)),j.SetAttributeValue(e,"riskIds",J.StringListToJson(this.riskIds)),j.SetAttributeValue(e,"riskManagementIds",J.StringListToJson(this.riskManagementIds)),j.SetAttributeValue(e,"systemIds",J.StringListToJson(this.systemIds)),j.SetAttributeValue(e,"kpiIds",J.StringListToJson(this.kpiIds)),e},e.prototype.LoadFromJsonObject=function(e){var o=this;t.prototype.LoadFromJsonObject.call(this,e),this.name=j.GetAttributeValue4String(e,"name"),this.layer=j.GetAttributeValue4Int64(e,"layer"),this.description=j.GetAttributeValue4String(e,"description"),this.code=j.GetAttributeValue4String(e,"code"),this.input=j.GetAttributeValue4String(e,"input"),this.output=j.GetAttributeValue4String(e,"output");var n=j.GetAttributeValue(e,"responsiblePersons");this.responsiblePersons=n?n.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[];var r=j.GetAttributeValue(e,"accountablePersons");this.accountablePersons=r?r.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[];var i=j.GetAttributeValue(e,"consultedPersons");this.consultedPersons=i?i.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[];var s=j.GetAttributeValue(e,"informedPersons");this.informedPersons=s?s.map((function(t){var e=new rt(o.Model);return e.LoadFromJsonObject(t),e})):[],this.formDataIds=J.StringListFromJson(j.GetAttributeValue4String(e,"formDataIds")),this.itSystemIds=J.StringListFromJson(j.GetAttributeValue4String(e,"itSystemIds")),this.riskIds=J.StringListFromJson(j.GetAttributeValue4String(e,"riskIds")),this.riskManagementIds=J.StringListFromJson(j.GetAttributeValue4String(e,"riskManagementIds")),this.systemIds=J.StringListFromJson(j.GetAttributeValue4String(e,"systemIds")),this.kpiIds=J.StringListFromJson(j.GetAttributeValue4String(e,"kpiIds"))},e.prototype.clone=function(){var t=new e(this.Model);return t.name=this.name,t.layer=this.layer,t.description=this.description,t.code=this.code,t.input=this.input,t.output=this.output,t.responsiblePersons=this.responsiblePersons.map((function(t){return t.clone()})),t.accountablePersons=this.accountablePersons.map((function(t){return t.clone()})),t.consultedPersons=this.consultedPersons.map((function(t){return t.clone()})),t.informedPersons=this.informedPersons.map((function(t){return t.clone()})),t.formDataIds=this.formDataIds?this.formDataIds.map((function(t){return t})):[],t.itSystemIds=this.itSystemIds?this.itSystemIds.map((function(t){return t})):[],t.riskIds=this.riskIds?this.riskIds.map((function(t){return t})):[],t.riskManagementIds=this.riskManagementIds?this.riskManagementIds.map((function(t){return t})):[],t.systemIds=this.systemIds?this.systemIds.map((function(t){return t})):[],t.kpiIds=this.kpiIds?this.kpiIds.map((function(t){return t})):[],t},e}(v)),It=t("Shape",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Bounds=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return null!=this.Bounds&&a.SetAttributeValue(e,"Bounds",this.Bounds.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("Bounds")&&(this.Bounds=new dt(this.Model),this.Bounds.LoadFromJsonObject(e.Bounds))},e}(tt)),At=t("LabeledShape",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(It)),Et=t("BPMNShape",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.bpmndi.BPMNShape",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.BpmnElementId=null,this.BpmnLabel=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"BpmnElementId",this.BpmnElementId),null!=this.BpmnLabel&&a.SetAttributeValue(e,"BpmnLabel",this.BpmnLabel.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.BpmnElementId=e.BpmnElementId,e.hasOwnProperty("BpmnLabel")&&(this.BpmnLabel=new yt(this.Model),this.BpmnLabel.LoadFromJsonObject(e.BpmnLabel))},e.prototype.LoadExtensionElements=function(e){t.prototype.LoadExtensionElements.call(this,e);var o=j.GetAttributeValue(e,"palUserTaskAttribute");null!=o&&(this.palUserTaskAttribute=new vt(this.Model),this.palUserTaskAttribute.LoadFromJsonObject(o))},e.prototype.WriteExtensionElements=function(e){t.prototype.WriteExtensionElements.call(this,e),null!=this.palUserTaskAttribute&&j.SetAttributeValue(e,"palUserTaskAttribute",this.palUserTaskAttribute.ConvertToJsonObject())},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),null==this.Model.GetHasIdElement(this.BpmnElementId)){var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="找不到 id 为 "+this.BpmnElementId+" 的元素",e.push(o)}},e.MEXTAG="shape.bpa",e}(At)),gt=(t("ConstantExpression",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.ConstantExpression",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Value=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Value",this.Value),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Value=e.Value},e}(C)),t("CustomType",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.CustomType",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.AssemblyName=null,this.TypeName=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"AssemblyName",this.AssemblyName),a.SetAttributeValue(e,"TypeName",this.TypeName),a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.AssemblyName=e.AssemblyName,this.TypeName=e.TypeName},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e)},e}(v)));t("ExpressionTypes",ft),function(t){t.ConstantExpression="ConstantExpression",t.VariableExpression="VariableExpression",t.SemanticExpression="SemanticExpression"}(ft||t("ExpressionTypes",ft={}));var Tt,Ot=t("SubProcessDataAssociations",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.SubProcessDataAssociations",o.dataInputAssociationDic={},o.dataOutputAssociationDic={},o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.dataInputAssociationDic={},this.dataOutputAssociationDic={}},e.prototype.AddDataInputAssociation=function(t){W.CheckHasIdElement(t),this.dataInputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInputAssociation=function(t){return null==t?null:this.dataInputAssociationDic.hasOwnProperty(t)?this.dataInputAssociationDic[t]:null},e.prototype.GetDataInputAssociations=function(){var t=new Array;for(var e in this.dataInputAssociationDic)t.push(this.dataInputAssociationDic[e]);return t},e.prototype.RemoveSubProcessDataInputAssociation=function(t){delete this.dataInputAssociationDic[t]},e.prototype.AddDataOutputAssociation=function(t){W.CheckHasIdElement(t),this.dataOutputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutputAssociation=function(t){return null==t?null:this.dataOutputAssociationDic.hasOwnProperty(t)?this.dataOutputAssociationDic[t]:null},e.prototype.GetDataOutputAssociations=function(){var t=new Array;for(var e in this.dataOutputAssociationDic)t.push(this.dataOutputAssociationDic[e]);return t},e.prototype.RemoveDataOutputAssociation=function(t){delete this.dataOutputAssociationDic[t]},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=new Array;for(var n in this.dataInputAssociationDic)o.push(this.dataInputAssociationDic[n].ConvertToJsonObject());o.length>0&&a.SetAttributeValue(e,"dataInputAssociations",o);var r=new Array;for(var n in this.dataOutputAssociationDic)r.push(this.dataOutputAssociationDic[n].ConvertToJsonObject());return r.length>0&&a.SetAttributeValue(e,"dataOutputAssociations",r),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("dataInputAssociations")&&Array.isArray(e.dataInputAssociations))for(var o=0,n=e.dataInputAssociations;o<n.length;o++){var r=n[o],i=new F(this.Model);i.LoadFromJsonObject(r),this.AddDataInputAssociation(i)}if(e.hasOwnProperty("dataOutputAssociations")&&Array.isArray(e.dataOutputAssociations))for(var s=0,a=e.dataOutputAssociations;s<a.length;s++){r=a[s];var l=new U(this.Model);l.LoadFromJsonObject(r),this.AddDataOutputAssociation(l)}},e}(b));t("VariableExpressionDirection",Tt),function(t){t.ActivityDataInputAssociation="ActivityDataInputAssociation",t.ActivityDataOutputAssociation="ActivityDataOutputAssociation",t.SubProcessDataInputAssociation="SubProcessDataInputAssociation",t.SubProcessDataOutputAssociation="SubProcessDataOutputAssociation",t.TransitionCondition="TransitionCondition"}(Tt||t("VariableExpressionDirection",Tt={}));t("VariableExpression",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Mex.VariableExpression",o.Direction=Tt.ActivityDataInputAssociation,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Direction=null,this.SourceRef=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"SourceRef",this.SourceRef),a.SetAttributeValue(e,"Direction",this.Direction),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.SourceRef=e.SourceRef,this.Direction=e.Direction},e}(C));var Dt,Ct=t("ExtensionCompletionConditionRuler",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(f)),St=t("LoopCharacteristics",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(h)),wt=t("MultiInstanceLoopCharacteristics",function(t){function e(o){var n=t.call(this,o)||this;return n.ClrTypeID=e.Clr_Type_ID,n.completionConditionRules=new Array,n.MEXTAG="bpmn.MultiInstanceLoopCharacteristics",n}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.loopCardinality=null,this.completionCondition=null,this.completionConditionRules=new Array},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"Enable",this.enable),j.SetAttributeValue(e,"IsSequential",this.sequential),null!=this.loopCardinality&&j.SetAttributeValue(e,"LoopCardinality",this.loopCardinality.ConvertToJsonObject()),null!=this.completionCondition&&j.SetAttributeValue(e,"CompletionCondition",this.completionCondition.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.enable=e.Enable,this.sequential=e.IsSequential,e.hasOwnProperty("LoopCardinality")&&(this.loopCardinality=new S(this.Model),this.loopCardinality.LoadFromJsonObject(e.LoopCardinality)),e.hasOwnProperty("CompletionCondition")&&(this.completionCondition=new S(this.Model),this.completionCondition.LoadFromJsonObject(e.CompletionCondition))},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);if(this.completionConditionRules)for(var o=0,n=this.completionConditionRules;o<n.length;o++){var r=n[o];r.MexTag=this.MEXTAG,e.push(r)}return e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof Ct&&r.MexTag==this.MEXTAG&&this.completionConditionRules.push(r)}},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.clone=function(){var t=new e(this.Model);return t.enable=this.enable,t.sequential=this.sequential,this.loopCardinality&&(t.loopCardinality=this.loopCardinality.clone()),t.completionCondition=this.completionCondition,t.completionConditionRules=new Array,this.completionConditionRules&&this.completionConditionRules.forEach((function(e){return t.completionConditionRules.push(e.clone())})),t},e.Clr_Type_ID="wf.MultiInstanceLoopCharacteristics",e.MEXTAG="wf.CallActivitySubProcess",e}(St)),Lt=t("Activity",function(t){function e(e){var o=t.call(this,e)||this;return o.dataInputAssociationDic={},o.dataInputDIc={},o.dataOutputAssociationDic={},o.dataOutputDIc={},o.resourceRoleDIc={},o.IsForCompensation=!1,o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Default=null,this.LoopCharacteristics=null,this.IsForCompensation=!1,this.dataInputAssociationDic={},this.dataInputDIc={},this.dataOutputAssociationDic={},this.dataOutputDIc={},this.resourceRoleDIc={}},e.prototype.AddDataInput=function(t){this.CheckVariableElement(t),this.dataInputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInput=function(t){return null==t?null:this.dataInputDIc.hasOwnProperty("dataInputId")?this.dataInputDIc[t]:null},e.prototype.GetDataInputs=function(){var t=new Array;for(var e in this.dataInputDIc)t.push(this.dataInputDIc[e]);return t},e.prototype.RemoveDataInput=function(t){delete this.dataInputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataOutput=function(t){this.CheckVariableElement(t),this.dataOutputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutput=function(t){return null==t?null:this.dataOutputDIc.hasOwnProperty("dataOutputId")?this.dataOutputDIc[t]:null},e.prototype.GetDataOutputs=function(){var t=new Array;for(var e in this.dataOutputDIc)t.push(this.dataOutputDIc[e]);return t},e.prototype.RemoveDataOutput=function(t){delete this.dataOutputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataInputAssociation=function(t){W.CheckHasIdElement(t),this.dataInputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInputAssociation=function(t){return null==t?null:this.dataInputAssociationDic.hasOwnProperty("associationId")?this.dataInputAssociationDic[t]:null},e.prototype.GetDataInputAssociations=function(){var t=new Array;for(var e in this.dataInputAssociationDic)t.push(this.dataInputAssociationDic[e]);return t},e.prototype.RemoveDataInputAssociation=function(t){delete this.dataInputAssociationDic[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataOutputAssociation=function(t){W.CheckHasIdElement(t),this.dataOutputAssociationDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutputAssociation=function(t){return null==t?null:this.dataOutputAssociationDic.hasOwnProperty("associationId")?this.dataOutputAssociationDic[t]:null},e.prototype.GetDataOutputAssociations=function(){var t=new Array;for(var e in this.dataOutputAssociationDic)t.push(this.dataOutputAssociationDic[e]);return t},e.prototype.RemoveDataOutputAssociation=function(t){delete this.dataOutputAssociationDic[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddResourceRole=function(t){this.resourceRoleDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetResourceRole=function(t){return null==t?null:this.resourceRoleDIc.hasOwnProperty(t)?this.resourceRoleDIc[t]:null},e.prototype.GetResourceRoles=function(){var t=new Array;for(var e in this.resourceRoleDIc)t.push(this.resourceRoleDIc[e]);return t},e.prototype.RemoveResourceRole=function(t){delete this.resourceRoleDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);a.SetAttributeValue(e,"Default",this.Default),a.SetAttributeValue(e,"IsForCompensation",this.IsForCompensation);var o=new Array;for(var n in this.dataInputDIc){var r=this.dataInputDIc[n].ConvertToJsonObject();o.push(r)}o.length>0&&a.SetAttributeValue(e,"dataInputs",o);var i=new Array;for(var n in this.dataOutputDIc){r=this.dataOutputDIc[n].ConvertToJsonObject();i.push(r)}i.length>0&&a.SetAttributeValue(e,"dataOutputs",i);var s=new Array;for(var n in this.dataInputAssociationDic){r=this.dataInputAssociationDic[n].ConvertToJsonObject();s.push(r)}s.length>0&&a.SetAttributeValue(e,"dataInputAssociations",s);var l=new Array;for(var n in this.dataOutputAssociationDic){r=this.dataOutputAssociationDic[n].ConvertToJsonObject();l.push(r)}l.length>0&&a.SetAttributeValue(e,"dataOutputAssociations",l);var u=new Array;for(var n in this.resourceRoleDIc)u.push(this.resourceRoleDIc[n].ConvertToJsonObject());return u.length>0&&a.SetAttributeValue(e,"resourceRoles",u),null!=this.LoopCharacteristics&&a.SetAttributeValue(e,"loopCharacteristics",this.LoopCharacteristics.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),this.Default=e.Default,this.IsForCompensation=e.IsForCompensation,e.hasOwnProperty("dataInputs")&&Array.isArray(e.dataInputs))for(var o=0,n=e.dataInputs;o<n.length;o++){var r=n[o],i=new O(this.Model);i.LoadFromJsonObject(r),this.AddDataInput(i)}if(e.hasOwnProperty("dataOutputs")&&Array.isArray(e.dataOutputs))for(var s=0,l=e.dataOutputs;s<l.length;s++){r=l[s];var u=new D(this.Model);u.LoadFromJsonObject(r),this.AddDataOutput(u)}if(e.hasOwnProperty("dataInputAssociations")&&Array.isArray(e.dataInputAssociations))for(var c=0,p=e.dataInputAssociations;c<p.length;c++){r=p[c];var h=new F(this.Model);h.LoadFromJsonObject(r),this.AddDataInputAssociation(h)}if(e.hasOwnProperty("dataOutputAssociations")&&Array.isArray(e.dataOutputAssociations))for(var d=0,m=e.dataOutputAssociations;d<m.length;d++){r=m[d];var y=new U(this.Model);y.LoadFromJsonObject(r),this.AddDataOutputAssociation(y)}if(e.hasOwnProperty("resourceRoles")&&Array.isArray(e.resourceRoles))for(var f=0,b=e.resourceRoles;f<b.length;f++){r=b[f];var v=a.GetElementType(r.ClrTypeID);null!=v&&(v.LoadFromJsonObject(r),this.AddResourceRole(v))}e.hasOwnProperty("loopCharacteristics")&&(this.LoopCharacteristics=new wt(this.Model),this.LoopCharacteristics.LoadFromJsonObject(e.loopCharacteristics))},e.prototype.Validate=function(e){for(var o in t.prototype.Validate.call(this,e),this.dataInputAssociationDic)this.dataInputAssociationDic[o].Validate(e);for(var o in this.dataOutputAssociationDic)this.dataOutputAssociationDic[o].Validate(e)},e.prototype.CheckVariableElement=function(t){W.CheckVariableElement(t,this,this,null)},e}(N)),Ft=t("Artifact",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(h));t("AssociationDirection",Dt),function(t){t.NONE="None",t.ONE="One",t.BOTH="Both"}(Dt||t("AssociationDirection",Dt={}));var Vt,Jt=t("Association",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Association",o.AssociationDirection=Dt.NONE,o}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"SourceRef",this.SourceRef),j.SetAttributeValue(e,"TargetRef",this.TargetRef),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.SourceRef=j.GetAttributeValue4String(e,"SourceRef"),this.TargetRef=j.GetAttributeValue4String(e,"TargetRef")},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e)},e.prototype.NewInstance=function(){return new e(this.Model)},e}(Ft)),jt=(t("BoundaryEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.BoundaryEvent",o.CancelActivity=!0,o}return o(e,t),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.AttachedToRef=this.AttachedToRef,e.CancelActivity=this.CancelActivity,e},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.AttachedToRef=null,this.CancelActivity=!0},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"AttachedToRef",this.AttachedToRef),a.SetAttributeValue(e,"CancelActivity",this.CancelActivity),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.AttachedToRef=e.AttachedToRef,this.CancelActivity=e.CancelActivity},e}(z)),t("RootElement",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),e},e}(h))),Rt=t("CallableElement",function(t){function e(e){var o=t.call(this,e)||this;return o.dataInputDIc={},o.dataOutputDIc={},o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Name=null,this.dataInputDIc={},this.dataOutputDIc={}},e.prototype.AddDataInput=function(t){this.CheckVariableElement(t),this.dataInputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataInput=function(t){return null==t?null:this.dataInputDIc.hasOwnProperty(t)?this.dataInputDIc[t]:null},e.prototype.GetDataInputs=function(){var t=new Array;for(var e in this.dataInputDIc)t.push(this.dataInputDIc[e]);return t},e.prototype.RemoveDataInput=function(t){delete this.dataInputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.AddDataOutput=function(t){this.CheckVariableElement(t),this.dataOutputDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetDataOutput=function(t){return null==t?null:this.dataInputDIc.hasOwnProperty(t)?this.dataOutputDIc[t]:null},e.prototype.GetDataOutputs=function(){var t=new Array;for(var e in this.dataOutputDIc)t.push(this.dataOutputDIc[e]);return t},e.prototype.RemoveDataOutput=function(t){delete this.dataOutputDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"nameLanguage",this.NameLanguage);var o=new Array;for(var n in this.dataInputDIc){var r=this.dataInputDIc[n].ConvertToJsonObject();o.push(r)}o.length>0&&a.SetAttributeValue(e,"dataInputs",o);var i=new Array;for(var n in this.dataOutputDIc){r=this.dataOutputDIc[n].ConvertToJsonObject();i.push(r)}return i.length>0&&a.SetAttributeValue(e,"dataOutputs",i),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name,this.NameLanguage=e.nameLanguage,e.hasOwnProperty("dataInputs")&&Array.isArray(e.dataInputs))for(var o=0,n=e.dataInputs;o<n.length;o++){var r=n[o],i=new O(this.Model);i.LoadFromJsonObject(r),this.AddDataInput(i)}if(e.hasOwnProperty("dataOutputs")&&Array.isArray(e.dataOutputs))for(var s=0,a=e.dataOutputs;s<a.length;s++){r=a[s];var l=new D(this.Model);l.LoadFromJsonObject(r),this.AddDataOutput(l)}},e.prototype.CheckVariableElement=function(t){W.CheckVariableElement(t,this,this,null)},e}(jt)),Mt=t("DataObject",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.DataObject",o.MEXTAG="bpmn.DataObject",o.IsAllowNull=!0,o.IsCollection=!1,o}return o(e,t),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.DataType=this.DataType,e.IsAllowNull=this.IsAllowNull,e.IsCollection=this.IsCollection,e},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.DataType=null,this.IsAllowNull=!0,this.IsCollection=!1},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"IsAllowNull",this.IsAllowNull),a.SetAttributeValue(e,"IsCollection",this.IsCollection),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.IsAllowNull=e.IsAllowNull,this.IsCollection=e.IsCollection},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);return null!=this.DataType&&(this.DataType.MexTag=this.MEXTAG,e.push(this.DataType)),e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof T&&r.MexTag==this.MEXTAG&&(this.DataType=r)}},e.prototype.Validate=function(e){if(t.prototype.Validate.call(this,e),null!=this.DataType)this.DataType.Validate(e);else{var o=new d;o.Element=this,o.ErrorLevel=m.$_Error,o.ErrorCode="",o.ErrorMessage="没有设定变量类型",e.push(o)}},e}(M)),Gt=t("Process",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Process",o.flowElementsDic={},o.resourceRoleDIc={},o.executionListeners=new Array,o.extensionElements=new Array,o.MEXTAG="bpmn.Process",o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Key=null,this.flowElementsDic={},this.resourceRoleDIc={},this.executionListeners=new Array,this.extensionElements=new Array},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.AddDataObject=function(t){this.CheckVariableElement(t),this.InnerAddFlowElement(t)},e.prototype.GetDataObject=function(t){return null==t?null:this.flowElementsDic.hasOwnProperty(t)&&this.flowElementsDic[t]instanceof Mt?this.flowElementsDic[t]:null},e.prototype.GetDataObjects=function(){var t=new Array;for(var e in this.flowElementsDic)this.flowElementsDic[e]instanceof Mt&&t.push(this.flowElementsDic[e]);return t},e.prototype.RemoveDataObject=function(t){this.RemoveFlowElement(t)},e.prototype.AddFlowElement=function(t){if(t instanceof Mt)throw new Error("请使用 AddDataObjcet 方法添加流程变量");W.CheckHasIdElement(t),this.InnerAddFlowElement(t)},e.prototype.GetFlowElement=function(t){return null==t?null:this.flowElementsDic.hasOwnProperty(t)?this.flowElementsDic[t]:null},e.prototype.GetFlowElements=function(){return this.flowElementsDic},e.prototype.RemoveFlowElement=function(t){var e=this.GetFlowElement(t);null!=e&&(e instanceof _&&this.RemoveSequenceFlow(e),e instanceof N&&this.RemoveFlowNode(e),e instanceof Mt&&this.InnerRemoveDataObject(e),delete this.flowElementsDic[t],this.Model.RemoveHasIdElement(t))},e.prototype.GetExecutionListeners=function(){return this.executionListeners},e.prototype.AddResourceRole=function(t){this.resourceRoleDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetResourceRole=function(t){return null==t?null:this.resourceRoleDIc.hasOwnProperty(t)?this.resourceRoleDIc[t]:null},e.prototype.GetResourceRoles=function(){var t=new Array;for(var e in this.resourceRoleDIc)t.push(this.resourceRoleDIc[e]);return t},e.prototype.RemoveResourceRole=function(t){delete this.resourceRoleDIc[t],this.Model.RemoveHasIdElement(t)},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);a.SetAttributeValue(e,"Key",this.Key);var o=[];for(var n in this.flowElementsDic){var r=this.flowElementsDic[n].ConvertToJsonObject();o.push(r)}a.SetAttributeValue(e,"flowElements",o);var i=new Array;for(var s in this.resourceRoleDIc)i.push(this.resourceRoleDIc[s].ConvertToJsonObject());return i.length>0&&a.SetAttributeValue(e,"resourceRoles",i),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),this.Key=e.Key,e.hasOwnProperty("flowElements")&&Array.isArray(e.flowElements))for(var o=0,n=e.flowElements;o<n.length;o++){var r=n[o],i=a.GetElementType(r.ClrTypeID);null!=i&&(i.Model=this.Model,i.LoadFromJsonObject(r),this.InnerAddFlowElement(i))}if(e.hasOwnProperty("resourceRoles")&&Array.isArray(e.resourceRoles))for(var s=0,l=e.resourceRoles;s<l.length;s++){var u=l[s],c=a.GetElementType(u.ClrTypeID);null!=c&&(c.LoadFromJsonObject(u),this.AddResourceRole(c))}},e.prototype.GetExtensionElements4ConvertTo=function(){for(var e=t.prototype.GetExtensionElements4ConvertTo.call(this),o=0,n=this.executionListeners;o<n.length;o++){(s=n[o]).MexTag=this.MEXTAG,e.push(s)}for(var r=0,i=this.extensionElements;r<i.length;r++){var s;(s=i[r]).MexTag=this.MEXTAG,e.push(s)}return e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof x&&r.MexTag==this.MEXTAG?this.executionListeners.push(r):r.MexTag==this.MEXTAG&&this.extensionElements.push(r)}},e.prototype.GetExtensionElements=function(){return this.extensionElements},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e);for(var o=0,n=this.executionListeners;o<n.length;o++){(r=n[o]).Validate(e)}for(var r in this.flowElementsDic)this.flowElementsDic[r].Validate(e);W.ValidateProcess(this,e)},e.prototype.CheckVariableElement=function(e){t.prototype.CheckVariableElement.call(this,e),W.CheckVariableElement(e,null,null,this)},e.prototype.InnerAddFlowElement=function(t){this.flowElementsDic[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.RemoveSequenceFlow=function(t){},e.prototype.InnerRemoveDataObject=function(t){},e.prototype.RemoveFlowNode=function(t){var e=new Array;for(var o in this.GetFlowElements()){var n=this.GetFlowElements()[o];null!=n&&(n instanceof _&&(n.SourceRef==t.Id||n.TargetRef==t.Id)&&e.push(n))}for(var r=0,i=e;r<i.length;r++){o=i[r];delete this.flowElementsDic[o.Id]}},e}(Rt)),Pt=t("Signal",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Signal",o}return o(e,t),e.prototype.convertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),j.SetAttributeValue(e,"Name",this.Name),j.SetAttributeValue(e,"Scope",this.Scope),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=j.GetAttributeValue4String(e,"Name"),this.Scope=j.GetAttributeValue4String(e,"Scope")},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.Name=this.Name,e.Scope=this.Scope,e},e.prototype.NewInstance=function(){return new e(this.Model)},e}(z)),xt=t("BpmnModel",function(){function t(){this.hasIdElementDic={},this.signals=new Array}return t.prototype.ResetBeforeLoadFrom=function(){this.hasIdElementDic={},this.MetadataContentID=null,this.MetadataContentCode=null,this.MetadataContentName=null,this.TargetNamespace=null,this.DefaultProcess=null,this.DefaultDiagram=null},t.prototype.ConvertToJson=function(){var t={};if(t.TargetNamespace=this.TargetNamespace,t.MetadataContentID=this.MetadataContentID,t.MetadataContentCode=this.MetadataContentCode,t.MetadataContentName=this.MetadataContentName,null!=this.DefaultProcess&&(t.DefaultProcess=this.DefaultProcess.ConvertToJsonObject()),null!=this.DefaultDiagram&&(t.DefaultDiagram=this.DefaultDiagram.ConvertToJsonObject()),null!=this.signals&&this.signals.length>0){for(var e=new Array,o=0,n=this.signals;o<n.length;o++){var r=n[o];e.push(r.convertToJsonObject())}e.length>0&&j.SetAttributeValue(t,"signals",e)}return JSON.stringify(t)},t.prototype.LoadFromJson=function(t){var e=JSON.parse(t);this.TargetNamespace=e.TargetNamespace,this.MetadataContentID=e.MetadataContentID,this.MetadataContentCode=e.MetadataContentCode,this.MetadataContentName=e.MetadataContentName,this.DefaultProcess=new Gt(this),e.DefaultProcess&&this.DefaultProcess.LoadFromJsonObject(e.DefaultProcess),this.DefaultDiagram=new at(this),e.DefaultDiagram&&this.DefaultDiagram.LoadFromJsonObject(e.DefaultDiagram);var o=j.GetAttributeValue(e,"signals");if(o instanceof Array)for(var n=0,r=o;n<r.length;n++){var i=r[n],s=new Pt(this);s.LoadFromJsonObject(i),this.signals.push(s)}},t.prototype.AddHasIdElement=function(t){if(null==t)throw new Error("element is null");if(null==t.Id)throw new Error("元素 Id 不能为 null");if(0==W.IsMatchVariableNameRules(t.Id))throw new Error("元素 Id 只能包含字母、数字和下划线，且不能以数字开头。");if(this.hasIdElementDic.hasOwnProperty(t.Id))throw new Error("已经存在 Id 为 "+t.Id+" 的流程元素。");this.hasIdElementDic[t.Id]=t},t.prototype.RemoveHasIdElement=function(t){delete this.hasIdElementDic[t]},t.prototype.GetHasIdElement=function(t){return null==t?null:this.hasIdElementDic.hasOwnProperty(t)?this.hasIdElementDic[t]:null},t.prototype.Validate=function(){var t=new Array;return null!=this.DefaultProcess&&this.DefaultProcess.Validate(t),null!=this.DefaultDiagram&&this.DefaultDiagram.Validate(t),t},t}()),Bt=t("CallActivity",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.CallActivity",o.CALLACTIVITYMEXTAG="bpmn.CallActivity",o.SubProcessDataAssociations=new Ot(e),o}return o(e,t),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.CalledElement=this.CalledElement,e.SubProcessDataAssociations=this.SubProcessDataAssociations,e},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.CalledElement=null,this.SubProcessDataAssociations=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"CalledElement",this.CalledElement),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.CalledElement=e.CalledElement},e.prototype.GetExtensionElements4ConvertTo=function(){var e=t.prototype.GetExtensionElements4ConvertTo.call(this);return null!=this.SubProcessDataAssociations&&this.SubProcessDataAssociations.GetDataInputAssociations().length>0&&this.SubProcessDataAssociations.GetDataOutputAssociations().length>0&&(this.SubProcessDataAssociations.MexTag=this.CALLACTIVITYMEXTAG,e.push(this.SubProcessDataAssociations)),e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof Ot&&r.MexTag==this.CALLACTIVITYMEXTAG&&(this.SubProcessDataAssociations=r)}},e}(Lt)),Nt=t("CompensateEventDefinition",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.Association",o.WaitForCompletion=!0,o}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"ActivityRef",this.ActivityRef),j.SetAttributeValue(e,"WaitForCompletion",this.WaitForCompletion),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.ActivityRef=j.GetAttributeValue4String(e,"ActivityRef"),this.WaitForCompletion=j.GetAttributeValue4Boolean(e,"WaitForCompletion")},e.prototype.Validate=function(e){t.prototype.Validate.call(this,e)},e.prototype.NewInstance=function(){var t=new e(this.Model);return t.ActivityRef=this.ActivityRef,t.WaitForCompletion=this.WaitForCompletion,t},e}(V)),kt=t("Gateway",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(N)),Ht=t("ExclusiveGateway",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.ExclusiveGateway",o.IncomingGatewayType=A.Exclusive,o.OutgoingGatewayType=A.Exclusive,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Default=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Default",this.Default),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Default=e.Default},e}(kt));t("FlowNodeState",Vt),function(t){t.Default="Default",t.Selected="Selected",t.Running="Running",t.Completed="Completed",t.Terminated="Terminated"}(Vt||t("FlowNodeState",Vt={}));var Xt,_t=t("ResourceAssignmentExpression",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Expression=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return null!=this.Expression&&a.SetAttributeValue(e,"Expression",this.Expression.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("Expression")&&(this.Expression=new S(this.Model),this.Expression.LoadFromJsonObject(e.Expression))},e}(h)),Ut=t("ResourceRole",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Name=null,this.ResourceAssignmentExpression=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Name",this.Name),a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),null!=this.ResourceAssignmentExpression&&a.SetAttributeValue(e,"ResourceAssignmentExpression",this.ResourceAssignmentExpression.ConvertToJsonObject()),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Name=e.Name,e.hasOwnProperty("ResourceAssignmentExpression")&&(this.ResourceAssignmentExpression=new _t(this.Model),this.ResourceAssignmentExpression.LoadFromJsonObject(e.ResourceAssignmentExpression))},e}(h)),zt=t("Performer",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Ut)),$t=(t("HumanPerformer",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(zt)),t("InclusiveGateway",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.InclusiveGateway",o.IncomingGatewayType=A.Inclusive,o.OutgoingGatewayType=A.Inclusive,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.Default=null},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"Default",this.Default),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.Default=e.Default},e}(kt))),Wt=t("IntermediateCatchEvent",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.IntermediateCatchEvent",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e}(z)),qt=t("ParallelGateway",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.ParallelGateway",o.IncomingGatewayType=A.Parallel,o.OutgoingGatewayType=A.Parallel,o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e}(kt));t("PotentialOwner",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(zt)),t("Rendering",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return a.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),e},e}(h));t("SequenceFlowState",Xt),function(t){t.Default="Default",t.Completed="Completed",t.Cut="Cut",t.Add="Add",t.Simulation="Simulation"}(Xt||t("SequenceFlowState",Xt={}));var Yt=t("Task",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Lt)),Zt=t("ServiceTask",function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Yt)),Kt=t("SignalEventDefinition",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.SignalEventDefinition",o}return o(e,t),e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this);return j.SetAttributeValue(e,"ClrTypeID",this.ClrTypeID),j.SetAttributeValue(e,"SignalRef",this.SignalRef),j.SetAttributeValue(e,"SignalExpression",this.SignalExpression),j.SetAttributeValue(e,"Async",this.Async),e},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e),this.SignalRef=j.GetAttributeValue4String(e,"SignalRef"),this.SignalExpression=j.GetAttributeValue4String(e,"SignalExpression"),this.Async=j.GetAttributeValue4Boolean(e,"Async")},e.prototype.NewInstance=function(){var t=new e(this.Model);return t.SignalRef=this.SignalRef,t.SignalExpression=this.SignalExpression,t.Async=this.Async,t},e}(V)),Qt=t("SubProcess",function(t){function e(e){var o=t.call(this,e)||this;return o.ClrTypeID="bpmn.SubProcess",o.extensionElements=new Array,o.flowElementsDic={},o.SubProcessMEXTAG="bpmn.SubProcess",o}return o(e,t),e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.extensionElements=[],this.flowElementsDic={}},e.prototype.AddDataObject=function(t){this.CheckVariableElement(t),this.InnerAddFlowElement(t)},e.prototype.GetDataObject=function(t){return null==t?null:this.flowElementsDic.hasOwnProperty(t)?this.flowElementsDic[t]:null},e.prototype.GetDataObjects=function(){var t=new Array;for(var e in this.flowElementsDic){var o=this.flowElementsDic[e];null!=o&&t.push(o)}return t},e.prototype.RemoveDataObject=function(t){this.RemoveFlowElement(t)},e.prototype.AddFlowElement=function(t){if(t instanceof Mt)throw new Error("请使用 AddDataObjcet 方法添加流程变量");W.CheckHasIdElement(t),this.InnerAddFlowElement(t)},e.prototype.GetFlowElement=function(t){return null==t?null:this.flowElementsDic.hasOwnProperty(t)?this.flowElementsDic[t]:null},e.prototype.GetFlowElements=function(){return this.flowElementsDic},e.prototype.RemoveFlowElement=function(t){var e=this.GetFlowElement(t);null!=e&&(e instanceof _&&this.RemoveSequenceFlow(e),e instanceof N&&this.RemoveFlowNode(e),e instanceof Mt&&this.InnerRemoveDataObject(e),delete this.flowElementsDic[t],this.Model.RemoveHasIdElement(t))},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=[];for(var n in this.flowElementsDic){var r=this.flowElementsDic[n].ConvertToJsonObject();o.push(r)}return a.SetAttributeValue(e,"flowElements",o),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("flowElements")&&Array.isArray(e.FlowElements))for(var o=0,n=e.FlowElements;o<n.length;o++){var r=n[o],i=a.GetElementType(r.ClrTypeID);null!=i&&(i.Model=this.Model,i.LoadFromJsonObject(r),this.InnerAddFlowElement(i))}},e.prototype.GetExtensionElements4ConvertTo=function(){for(var e=t.prototype.GetExtensionElements4ConvertTo.call(this),o=0,n=this.extensionElements;o<n.length;o++){var r=n[o];r.MexTag=this.SubProcessMEXTAG,e.push(r)}return e},e.prototype.SetExtensionElements4LoadFrom=function(e){t.prototype.SetExtensionElements4LoadFrom.call(this,e);for(var o=0,n=e;o<n.length;o++){var r=n[o];r.MexTag==this.SubProcessMEXTAG&&this.extensionElements.push(r)}},e.prototype.GetExtensionElements=function(){return this.extensionElements},e.prototype.Validate=function(e){for(var o in t.prototype.Validate.call(this,e),this.flowElementsDic)this.flowElementsDic[o].Validate(e);W.ValidateProcess(this,e)},e.prototype.CheckVariableElement=function(e){t.prototype.CheckVariableElement.call(this,e),W.CheckVariableElement(e,null,null,this)},e.prototype.RemoveSequenceFlow=function(t){},e.prototype.InnerRemoveDataObject=function(t){},e.prototype.RemoveFlowNode=function(t){var e=new Array;for(var o in this.GetFlowElements()){var n=this.GetFlowElements()[o];null!=n&&(n.SourceRef!=t.Id&&n.TargetRef!=t.Id||e.push(n))}for(var r=0,i=e;r<i.length;r++){o=i[r];delete this.flowElementsDic[o.Id]}},e.prototype.InnerAddFlowElement=function(t){this.flowElementsDic[t.Id]=t,this.Model.AddHasIdElement(t)},e}(Lt)),te=(t("UserTask",function(t){function e(e){var o=t.call(this,e)||this;return o.renderingDIc={},o}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this),this.renderingDIc={}},e.prototype.AddRendering=function(t){this.renderingDIc[t.Id]=t,this.Model.AddHasIdElement(t)},e.prototype.GetRendering=function(t){return null==t?null:this.renderingDIc.hasOwnProperty(t)?this.renderingDIc[t]:null},e.prototype.GetRenderings=function(){var t=new Array;for(var e in this.renderingDIc)t.push(this.renderingDIc[e]);return t},e.prototype.RemoveRendering=function(t){delete this.renderingDIc[t]},e.prototype.ConvertToJsonObject=function(){var e=t.prototype.ConvertToJsonObject.call(this),o=new Array;for(var n in this.renderingDIc)o.push(this.renderingDIc[n].ConvertToJsonObject());return o.length>0&&a.SetAttributeValue(e,"renderings",o),e},e.prototype.LoadFromJsonObject=function(e){if(t.prototype.LoadFromJsonObject.call(this,e),e.hasOwnProperty("renderings")&&Array.isArray(e.renderings))for(var o=0,n=e.renderings;o<n.length;o++){var r=n[o],i=a.GetElementType(r.ClrTypeID);null!=i&&(i.LoadFromJsonObject(r),this.AddRendering(i))}},e}(Yt)),t("MergeActivity",function(t){function e(o){var n=t.call(this,o)||this;return n.ClrTypeID=e.Clr_Type_ID,n}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this)},e.prototype.ConvertToJsonObject=function(){return t.prototype.ConvertToJsonObject.call(this)},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e)},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.Name=this.Name,e.NameLanguage=this.NameLanguage&&i({},this.NameLanguage),e},e.Clr_Type_ID="bpmn.MergeActivity",e.MEXTAG="bpmn.MergeActivity",e}(Zt))),ee=t("SplitActivity",function(t){function e(o){var n=t.call(this,o)||this;return n.ClrTypeID=e.Clr_Type_ID,n}return o(e,t),e.prototype.ResetBeforeLoadFrom=function(){t.prototype.ResetBeforeLoadFrom.call(this)},e.prototype.ConvertToJsonObject=function(){return t.prototype.ConvertToJsonObject.call(this)},e.prototype.LoadFromJsonObject=function(e){t.prototype.LoadFromJsonObject.call(this,e)},e.prototype.NewInstance=function(){return new e(this.Model)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.Name=this.Name,e.NameLanguage=this.NameLanguage&&i({},this.NameLanguage),e},e.Clr_Type_ID="bpmn.SplitActivity",e.MEXTAG="bpmn.SplitActivity",e}(Zt)),oe=new xt;a.RegisterElementType(new Gt(oe)),a.RegisterElementType(new _(oe)),a.RegisterElementType(new Mt(oe)),a.RegisterElementType(new Qt(oe)),a.RegisterElementType(new Bt(oe)),a.RegisterElementType(new X(oe)),a.RegisterElementType(new $(oe)),a.RegisterElementType(new Ht(oe)),a.RegisterElementType(new $t(oe)),a.RegisterElementType(new qt(oe)),a.RegisterElementType(new T(oe)),a.RegisterElementType(new gt(oe)),a.RegisterElementType(new st(oe)),a.RegisterElementType(new Et(oe)),a.RegisterElementType(new yt(oe)),a.RegisterElementType(new bt(oe)),a.RegisterElementType(new Nt(oe)),a.RegisterElementType(new Jt(oe)),a.RegisterElementType(new Wt(oe)),a.RegisterElementType(new Kt(oe)),a.RegisterElementType(new Pt(oe)),a.RegisterElementType(new ee(oe)),a.RegisterElementType(new te(oe))}}}));
//# sourceMappingURL=bpmn-model.system.js.map
