{"version":3,"file":"MultiInstanceLoopCharacteristics.js","sourceRoot":"","sources":["../../../../src/lib/model/MultiInstanceLoopCharacteristics.ts"],"names":[],"mappings":"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","sourcesContent":["import { BpmnModel } from \"./BpmnModel\";\r\nimport { Expression } from \"./Expression\";\r\nimport { LoopCharacteristics } from \"./LoopCharacteristics\";\r\nimport { ExtensionCompletionConditionRuler } from \"./mex/ExtensionCompletionConditionRuler\";\r\nimport { ExtensionMethod } from \"./ExtensionMethod\";\r\nimport { ExtensionElement } from \"./ExtensionElement\";\r\n\r\nexport class MultiInstanceLoopCharacteristics extends LoopCharacteristics {\r\n    constructor(model: BpmnModel) {\r\n        super(model);\r\n    }\r\n    static Clr_Type_ID: string = \"wf.MultiInstanceLoopCharacteristics\";\r\n    ClrTypeID: string = MultiInstanceLoopCharacteristics.Clr_Type_ID;\r\n    private static MEXTAG: string = \"wf.CallActivitySubProcess\";\r\n\r\n    enable: boolean;\r\n    sequential: boolean;\r\n    loopCardinality: Expression;\r\n    completionCondition: Expression;\r\n    completionConditionRules: Array<ExtensionCompletionConditionRuler> = new Array<ExtensionCompletionConditionRuler>();\r\n\r\n    private readonly MEXTAG: string = \"bpmn.MultiInstanceLoopCharacteristics\";\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.loopCardinality= null;\r\n        this.completionCondition = null;\r\n        this.completionConditionRules = new Array<ExtensionCompletionConditionRuler>();\r\n    }\r\n\r\n    ConvertToJsonObject(): any {\r\n        let obj: any = super.ConvertToJsonObject();\r\n\r\n        ExtensionMethod.SetAttributeValue(obj, \"Enable\", this.enable);\r\n        ExtensionMethod.SetAttributeValue(obj, \"IsSequential\", this.sequential);\r\n\r\n        if (this.loopCardinality != null) {\r\n            ExtensionMethod.SetAttributeValue(obj, \"LoopCardinality\", this.loopCardinality.ConvertToJsonObject());\r\n        }\r\n\r\n        if (this.completionCondition != null) {\r\n            ExtensionMethod.SetAttributeValue(obj, \"CompletionCondition\", this.completionCondition.ConvertToJsonObject());\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    LoadFromJsonObject(obj: any): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.enable = obj.Enable;\r\n        this.sequential = obj.IsSequential;\r\n\r\n        if (obj.hasOwnProperty(\"LoopCardinality\")) {\r\n            this.loopCardinality = new Expression(this.Model);\r\n            this.loopCardinality.LoadFromJsonObject(obj.LoopCardinality);\r\n        }\r\n\r\n        if (obj.hasOwnProperty(\"CompletionCondition\")) {\r\n            this.completionCondition = new Expression(this.Model);\r\n            this.completionCondition.LoadFromJsonObject(obj.CompletionCondition);\r\n        }\r\n    }\r\n\r\n    protected GetExtensionElements4ConvertTo(): Array<ExtensionElement> {\r\n        let list: Array<ExtensionElement> = super.GetExtensionElements4ConvertTo();\r\n\r\n        if(this.completionConditionRules) {\r\n            for (let item of this.completionConditionRules) {\r\n                item.MexTag = this.MEXTAG;\r\n                list.push(item);\r\n            }\r\n        }\r\n        \r\n        return list;\r\n    }\r\n\r\n    protected SetExtensionElements4LoadFrom(extensionElements: Array<ExtensionElement>): void {\r\n        super.SetExtensionElements4LoadFrom(extensionElements);\r\n\r\n        for (let extensionElement of extensionElements) {\r\n            if (extensionElement instanceof ExtensionCompletionConditionRuler && extensionElement.MexTag == this.MEXTAG) {\r\n                this.completionConditionRules.push(extensionElement as ExtensionCompletionConditionRuler);\r\n            }\r\n        }\r\n    }\r\n\r\n    NewInstance(): MultiInstanceLoopCharacteristics {\r\n        return new MultiInstanceLoopCharacteristics(this.Model);\r\n    }\r\n\r\n    clone(): MultiInstanceLoopCharacteristics {\r\n        const loopCharacteristics = new MultiInstanceLoopCharacteristics(this.Model);\r\n        loopCharacteristics.enable = this.enable;\r\n        loopCharacteristics.sequential = this.sequential;\r\n        if(this.loopCardinality) {\r\n            loopCharacteristics.loopCardinality = this.loopCardinality.clone();\r\n        }\r\n        loopCharacteristics.completionCondition = this.completionCondition;\r\n        loopCharacteristics.completionConditionRules = new Array<ExtensionCompletionConditionRuler>();\r\n        if(this.completionConditionRules) {\r\n            this.completionConditionRules.forEach(com => loopCharacteristics.completionConditionRules.push(com.clone() as any));\r\n        }\r\n        // loopCharacteristics.completionConditionRules = this.completionConditionRules;\r\n\r\n        return loopCharacteristics;\r\n    }\r\n}"]}