"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Event = void 0;
var tslib_1 = require("tslib");
var BpmnModelHelper_1 = require("./BpmnModelHelper");
var EventDefinition_1 = require("./EventDefinition");
var ExtensionMethod_1 = require("./ExtensionMethod");
var FlowNode_1 = require("./FlowNode");
var Event = /** @class */ (function (_super) {
    tslib_1.__extends(Event, _super);
    function Event(model) {
        var _this = _super.call(this, model) || this;
        _this.EventDefinitions = new Array();
        return _this;
    }
    Event.prototype.ConvertToJsonObject = function () {
        var obj = _super.prototype.ConvertToJsonObject.call(this);
        var eventDefinitionsJsonArray = new Array();
        for (var _i = 0, _a = this.EventDefinitions; _i < _a.length; _i++) {
            var item = _a[_i];
            eventDefinitionsJsonArray.push(item.ConvertToJsonObject());
        }
        if (eventDefinitionsJsonArray.length > 0) {
            ExtensionMethod_1.ExtensionMethod.SetAttributeValue(obj, "eventDefinitions", eventDefinitionsJsonArray);
        }
        return obj;
    };
    Event.prototype.LoadFromJsonObject = function (obj) {
        _super.prototype.LoadFromJsonObject.call(this, obj);
        var eventDefinitionsElement = ExtensionMethod_1.ExtensionMethod.GetAttributeValue(obj, "eventDefinitions");
        if (eventDefinitionsElement instanceof Array) {
            var eventDefinitionsJsonArray = eventDefinitionsElement;
            var tempVar = null;
            for (var _i = 0, eventDefinitionsJsonArray_1 = eventDefinitionsJsonArray; _i < eventDefinitionsJsonArray_1.length; _i++) {
                var item = eventDefinitionsJsonArray_1[_i];
                var type = BpmnModelHelper_1.BpmnModelHelper.GetElementType(ExtensionMethod_1.ExtensionMethod.GetAttributeValue4String(item, "ClrTypeID"));
                if (type == null) {
                    continue;
                }
                tempVar = type.NewInstance();
                tempVar.Model = this.Model;
                var eventDefinition = (tempVar instanceof EventDefinition_1.EventDefinition) ? tempVar : null;
                if (eventDefinition == null) {
                    continue;
                }
                eventDefinition.LoadFromJsonObject(item);
                this.EventDefinitions.push(eventDefinition);
            }
        }
    };
    return Event;
}(FlowNode_1.FlowNode));
exports.Event = Event;
//# sourceMappingURL=Event.js.map