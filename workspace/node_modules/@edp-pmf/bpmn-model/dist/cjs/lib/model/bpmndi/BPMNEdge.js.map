{"version":3,"file":"BPMNEdge.js","sourceRoot":"","sources":["../../../../../src/lib/model/bpmndi/BPMNEdge.ts"],"names":[],"mappings":"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","sourcesContent":["import { BpmnModel } from \"../BpmnModel\";\r\nimport { BpmnModelHelper } from \"../BpmnModelHelper\";\r\nimport { RectangularLine } from \"../mex/RectangularLine\";\r\nimport { LabeledEdge } from \"../omgdi/LabeledEdge\";\r\nimport { ValidationError } from \"../ValidationError\";\r\nimport { ValidationLevel } from \"../ValidationLevel\";\r\nimport { BPMNLabel } from \"./BPMNLabel\";\r\nimport { SequenceFlowLineType } from \"./SequenceFlowLineType\";\r\n\r\nexport class BPMNEdge extends LabeledEdge {\r\n    constructor(model: BpmnModel) {\r\n        super(model);\r\n\r\n        this.LineType = SequenceFlowLineType.PolyLine;\r\n    }\r\n\r\n    ClrTypeID: string = \"bpmn.bpmndi.BPMNEdge\";\r\n    NewInstance(): BPMNEdge {\r\n        return new BPMNEdge(this.Model);\r\n    }\r\n\r\n    BpmnElementId: string;\r\n    LineType: string;\r\n    SourceShapeElementId: string;\r\n    TargetShapeElementId: string;\r\n    BpmnLabel: BPMNLabel;\r\n    RectangularLine: RectangularLine;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.BpmnElementId = null;\r\n        this.LineType = SequenceFlowLineType.PolyLine;\r\n        this.SourceShapeElementId = null;\r\n        this.TargetShapeElementId = null;\r\n        this.BpmnLabel = null;\r\n        this.RectangularLine = null;\r\n    }\r\n\r\n    ConvertToJsonObject(): any {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        BpmnModelHelper.SetAttributeValue(obj, \"BpmnElementId\", this.BpmnElementId);\r\n        BpmnModelHelper.SetAttributeValue(obj, \"SourceShapeElementId\", this.SourceShapeElementId);\r\n        BpmnModelHelper.SetAttributeValue(obj, \"TargetShapeElementId\", this.TargetShapeElementId);\r\n        BpmnModelHelper.SetAttributeValue(obj, \"LineType\", this.LineType);\r\n\r\n        if (this.BpmnLabel != null) {\r\n            BpmnModelHelper.SetAttributeValue(obj, \"BpmnLabel\", this.BpmnLabel.ConvertToJsonObject());\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    LoadFromJsonObject(obj: any): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.BpmnElementId = obj.BpmnElementId;\r\n        this.SourceShapeElementId = obj.SourceShapeElementId;\r\n        this.TargetShapeElementId = obj.TargetShapeElementId;\r\n        this.LineType = obj.LineType;\r\n\r\n        if (obj.hasOwnProperty(\"BpmnLabel\")) {\r\n            this.BpmnLabel = new BPMNLabel(this.Model);\r\n            this.BpmnLabel.LoadFromJsonObject(obj.BpmnLabel);\r\n        }\r\n\r\n    }\r\n\r\n    LoadExtensionElements(extensionElementsObj: any): void {\r\n        super.LoadExtensionElements(extensionElementsObj);\r\n\r\n        if (extensionElementsObj.hasOwnProperty(\"RectangularLine\")) {\r\n            this.RectangularLine = new RectangularLine(this.Model);\r\n            this.RectangularLine.LoadFromJsonObject(extensionElementsObj.RectangularLine);\r\n        }\r\n    }\r\n\r\n    WriteExtensionElements(extensionElementsObj: any): void {\r\n        super.WriteExtensionElements(extensionElementsObj);\r\n\r\n        switch (this.LineType) {\r\n            case SequenceFlowLineType.RectangularLineType:\r\n                BpmnModelHelper.SetAttributeValue(extensionElementsObj, \"RectangularLine\", this.RectangularLine.ConvertToJsonObject());\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    Validate(errors: Array<ValidationError>): void {\r\n        super.Validate(errors);\r\n\r\n        if (this.Model.GetHasIdElement(this.BpmnElementId) == null) {\r\n            let error: ValidationError = new ValidationError();\r\n            error.Element = this;\r\n            error.ErrorLevel = ValidationLevel.$_Error;\r\n            error.ErrorCode = \"\";\r\n            error.ErrorMessage = `找不到 id 为 ${this.BpmnElementId} 的元素`;\r\n\r\n            errors.push(error);\r\n        }\r\n    }\r\n}"]}