{"version":3,"file":"BPMNDiagram.js","sourceRoot":"","sources":["../../../../../src/lib/model/bpmndi/BPMNDiagram.ts"],"names":[],"mappings":"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","sourcesContent":["import { BpmnModel } from \"../BpmnModel\";\r\nimport { BpmnModelHelper } from \"../BpmnModelHelper\";\r\nimport { Diagram } from \"../omgdi/Diagram\";\r\nimport { ValidateHelper } from \"../ValidateHelper\";\r\nimport { BPMNLabelStyle } from \"./BPMNLabelStyle\";\r\nimport { BPMNPlane } from \"./BPMNPlane\";\r\n\r\nexport class BPMNDiagram extends Diagram {\r\n    constructor(model: BpmnModel) {\r\n        super(model);\r\n\r\n        this.BpmnPlane = new BPMNPlane(model);\r\n    }\r\n\r\n    BpmnPlane: BPMNPlane;\r\n    bpmnLabelStyleDic: { [Key: string]: BPMNLabelStyle } = {};\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.BpmnPlane = null;\r\n        this.bpmnLabelStyleDic = {};\r\n    }\r\n\r\n    AddBPMNLabelStyle(element: any): void {\r\n        this.CheckBPMNLabelStyle(element);\r\n        this.bpmnLabelStyleDic[element.Id] = element;\r\n        this.Model.AddHasIdElement(element);\r\n    }\r\n\r\n    GetBPMNLabelStyle(elementId: string): any {\r\n        if (elementId == null)\r\n            return null;\r\n\r\n        if (this.bpmnLabelStyleDic.hasOwnProperty(elementId))\r\n            return this.bpmnLabelStyleDic[elementId];\r\n\r\n        return null;\r\n    }\r\n\r\n    GetBPMNLabelStyles(): Array<BPMNLabelStyle> {\r\n        let bpmnLabelStyles: Array<BPMNLabelStyle> = new Array<BPMNLabelStyle>();\r\n\r\n        for (let item in this.bpmnLabelStyleDic) {\r\n            bpmnLabelStyles.push(this.bpmnLabelStyleDic[item]);\r\n        }\r\n\r\n        return bpmnLabelStyles;\r\n    }\r\n\r\n    RemoveBPMNLabelStyle(elementId: string): void {\r\n        delete this.bpmnLabelStyleDic[elementId];\r\n    }\r\n\r\n    CheckBPMNLabelStyle(element: BPMNLabelStyle): void {\r\n        ValidateHelper.CheckHasIdElement(element);\r\n    }\r\n\r\n    ConvertToJsonObject(): any {\r\n        let obj = super.ConvertToJsonObject();\r\n\r\n        if (this.BpmnPlane != null) {\r\n            BpmnModelHelper.SetAttributeValue(obj, \"BpmnPlane\", this.BpmnPlane.ConvertToJsonObject());\r\n        }\r\n\r\n        let bpmnLabelStyles: Array<any> = new Array<any>();\r\n        for (let item in this.bpmnLabelStyleDic) {\r\n            let bpmnLabelStyle = this.bpmnLabelStyleDic[item].ConvertToJsonObject();\r\n\r\n            bpmnLabelStyles.push(bpmnLabelStyle);\r\n        }\r\n\r\n        if (bpmnLabelStyles.length > 0) {\r\n            BpmnModelHelper.SetAttributeValue(obj, \"bpmnLabelStyles\", bpmnLabelStyles);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    LoadFromJsonObject(obj: any): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        if (obj.hasOwnProperty(\"BpmnPlane\")) {\r\n            this.BpmnPlane = new BPMNPlane(this.Model);\r\n            this.BpmnPlane.LoadFromJsonObject(obj.BpmnPlane);\r\n        }\r\n\r\n        if (obj.hasOwnProperty(\"bpmnLabelStyles\") && Array.isArray(obj.bpmnLabelStyles)) {\r\n            for (let item of obj.bpmnLabelStyles) {\r\n                let bpmnLabelStyle = new BPMNLabelStyle(this.Model);\r\n                bpmnLabelStyle.LoadFromJsonObject(item);\r\n                this.AddBPMNLabelStyle(bpmnLabelStyle);\r\n            }\r\n        }\r\n    }\r\n}"]}