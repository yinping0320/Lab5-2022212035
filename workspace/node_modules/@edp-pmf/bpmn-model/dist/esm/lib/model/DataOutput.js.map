{"version":3,"file":"DataOutput.js","sourceRoot":"","sources":["../../../../src/lib/model/DataOutput.ts"],"names":[],"mappings":"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","sourcesContent":["import { BaseElement } from \"./BaseElement\";\r\nimport { BpmnModel } from \"./BpmnModel\";\r\nimport { BpmnModelHelper } from \"./BpmnModelHelper\";\r\nimport { ExtensionElement } from \"./ExtensionElement\";\r\nimport { IHasNameElement } from \"./IHasNameElement\";\r\nimport { IVariableElement } from \"./IVariableElement\";\r\nimport { DataType } from \"./mex/DataType\";\r\nimport { ValidationError } from \"./ValidationError\";\r\nimport { ValidationLevel } from \"./ValidationLevel\";\r\n\r\nexport class DataOutput extends BaseElement implements IVariableElement, IHasNameElement {\r\n    constructor(model: BpmnModel) {\r\n        super(model);\r\n\r\n        this.IsAllowNull = true;\r\n        this.IsCollection = false;\r\n    }\r\n\r\n    IsAllowNull: boolean;\r\n    Name: string;\r\n    DataType: DataType;\r\n    IsCollection: boolean;\r\n\r\n    protected ResetBeforeLoadFrom(): void {\r\n        super.ResetBeforeLoadFrom();\r\n\r\n        this.IsAllowNull = true;\r\n        this.Name = null;\r\n        this.DataType = null;\r\n        this.IsCollection = false;\r\n    }\r\n\r\n    ConvertToJsonObject(): any {\r\n        let obj: any = super.ConvertToJsonObject();\r\n\r\n        BpmnModelHelper.SetAttributeValue(obj, \"Name\", this.Name);\r\n        BpmnModelHelper.SetAttributeValue(obj, \"IsAllowNull\", this.IsAllowNull);\r\n        BpmnModelHelper.SetAttributeValue(obj, \"IsCollection\", this.IsCollection);\r\n\r\n        return obj;\r\n    }\r\n\r\n    LoadFromJsonObject(obj: any): void {\r\n        super.LoadFromJsonObject(obj);\r\n\r\n        this.Name = obj.Name;\r\n        this.IsAllowNull = obj.IsAllowNull;\r\n        this.IsCollection = obj.IsCollection;\r\n    }\r\n\r\n    private readonly MEXTAG: string = \"bpmn.DataOutput\";\r\n\r\n    protected GetExtensionElements4ConvertTo(): Array<ExtensionElement> {\r\n        let list: Array<ExtensionElement> = super.GetExtensionElements4ConvertTo();\r\n\r\n        if (this.DataType != null) {\r\n            this.DataType.MexTag = this.MEXTAG;\r\n            list.push(this.DataType);\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    protected SetExtensionElements4LoadFrom(extensionElements: Array<ExtensionElement>): void {\r\n        super.SetExtensionElements4LoadFrom(extensionElements);\r\n\r\n        for (let extensionElement of extensionElements) {\r\n            if (extensionElement instanceof DataType && extensionElement.MexTag == this.MEXTAG) {\r\n                this.DataType = extensionElement as DataType;\r\n            }\r\n        }\r\n    }\r\n\r\n    Validate(errors: Array<ValidationError>): void {\r\n        super.Validate(errors);\r\n\r\n        if (this.DataType != null) {\r\n            this.DataType.Validate(errors);\r\n        }\r\n        else {\r\n            let error: ValidationError = new ValidationError();\r\n            error.Element = this;\r\n            error.ErrorLevel = ValidationLevel.$_Error;\r\n            error.ErrorCode = \"\";\r\n            error.ErrorMessage = \"没有设定变量类型\";\r\n\r\n            errors.push(error);\r\n        }\r\n    }\r\n}"]}