/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { DefaultLang } from '../../i18n/default-lang';
import { of, Subject } from 'rxjs';
import { FileConst } from '../../model/utils/FileConst';
/**
 * @param {?} obj
 * @return {?}
 */
export function isNullOrUndefined(obj) {
    if (obj === undefined) {
        return true;
    }
    if (obj === null) {
        return true;
    }
    return false;
}
/**
 * @param {?} obj
 * @return {?}
 */
export function isNullOrEmpty(obj) {
    if (obj === undefined) {
        return true;
    }
    if (obj === null) {
        return true;
    }
    if (obj.length == 0) {
        return true;
    }
    return false;
}
/**
 * @param {?} str
 * @return {?}
 */
export function isNullOrBlank(str) {
    if (str == null) {
        return true;
    }
    if (str.trim().length == 0) {
        return true;
    }
    return false;
}
/**
 * @param {?} paraName
 * @return {?}
 */
export function getQueryString(paraName) {
    /** @type {?} */
    var url = window.location.hash;
    /** @type {?} */
    var arrObj = url.split('?');
    if (arrObj.length > 1) {
        /** @type {?} */
        var arrPara = arrObj[1].split('&');
        /** @type {?} */
        var arr = void 0;
        // tslint:disable-next-line: prefer-for-of
        for (var i = 0; i < arrPara.length; i++) {
            arr = arrPara[i].split('=');
            if (arr != null && arr[0] === paraName) {
                return arr[1];
            }
        }
        return '';
    }
    else {
        return '';
    }
}
var FileTypeUtil = /** @class */ (function () {
    function FileTypeUtil() {
    }
    /**
     * @param {?} valueField
     * @return {?}
     */
    FileTypeUtil.getFileExtension = /**
     * @param {?} valueField
     * @return {?}
     */
    function (valueField) {
        /** @type {?} */
        var suffix = null;
        switch (valueField) {
            case FileConst.xls:
                suffix = '.xls';
                break;
            case FileConst.xlsx:
                suffix = '.xlsx';
                break;
            case FileConst.xlsm:
                suffix = '.xlsm';
                break;
            case FileConst.et:
                suffix = '.et';
                break;
            case FileConst.xml:
                suffix = '.xml';
                break;
            case FileConst.pdf:
                suffix = '.pdf';
                break;
            case FileConst.csv:
                suffix = '.csv';
                break;
            default:
                break;
        }
        return suffix;
    };
    /**
     * @param {?} fileType
     * @return {?}
     */
    FileTypeUtil.getFileTypeName = /**
     * @param {?} fileType
     * @return {?}
     */
    function (fileType) {
        /** @type {?} */
        var fileTypeName = '';
        switch (fileType) {
            case 'XLS':
                fileTypeName = FileConst.xls;
                break;
            case 'XLSX':
                fileTypeName = FileConst.xlsx;
                break;
            case 'XLSM':
                fileTypeName = FileConst.xlsm;
                break;
            case 'ET':
                fileTypeName = FileConst.et;
                break;
            case 'XML':
                fileTypeName = FileConst.xml;
                break;
            case 'PDF':
                fileTypeName = FileConst.pdf;
                break;
            case 'CSV':
                fileTypeName = FileConst.csv;
                break;
            default:
                break;
        }
        return fileTypeName;
    };
    return FileTypeUtil;
}());
export { FileTypeUtil };
var DataIEUtils = /** @class */ (function () {
    function DataIEUtils() {
    }
    /**
     * @param {?} repository
     * @param {?} option
     * @return {?}
     */
    DataIEUtils.ChooseSu = /**
     * @param {?} repository
     * @param {?} option
     * @return {?}
     */
    function (repository, option) {
        /** @type {?} */
        var su = '';
        // 通用导入导出仓库存在，使用下面分支
        if (repository !== null) {
            /** @type {?} */
            var befRestService = DataIEUtils.GetBefRestService(repository);
            su = DataIEUtils.getSu(befRestService.baseUri);
        }
        // 手工开发的仓库不存在，采用传入的su
        if (option['su'] !== undefined && option['su'] !== null) {
            su = option['su'];
        }
        return su;
    };
    /**
     * @param {?} preurl
     * @return {?}
     */
    DataIEUtils.getSu = /**
     * @param {?} preurl
     * @return {?}
     */
    function (preurl) {
        /** @type {?} */
        var str = preurl.substring(preurl.indexOf("//") + 2);
        /** @type {?} */
        var strs = str.split('/');
        /** @type {?} */
        var su = strs[3];
        return su;
    };
    /**
     * @param {?} preurl
     * @return {?}
     */
    DataIEUtils.getApp = /**
     * @param {?} preurl
     * @return {?}
     */
    function (preurl) {
        /** @type {?} */
        var str = preurl.substring(preurl.indexOf("//") + 2);
        /** @type {?} */
        var strs = str.split('/');
        /** @type {?} */
        var app = strs[2];
        return app;
    };
    /**
     * @param {?} preurl
     * @return {?}
     */
    DataIEUtils.getPort = /**
     * @param {?} preurl
     * @return {?}
     */
    function (preurl) {
        // "http://localhost:5000/api/scm/sd/v1.0"
        /** @type {?} */
        var str = preurl.substring(preurl.indexOf("//") + 2);
        // 只取前两位，51xx,50xx,52xx
        /** @type {?} */
        var port = str.substr(str.indexOf(':') + 1, 2);
        return port;
    };
    /**
     * @param {?} repository
     * @return {?}
     */
    DataIEUtils.GetBefRestService = /**
     * @param {?} repository
     * @return {?}
     */
    function (repository) {
        /** @type {?} */
        var befRepository = (/** @type {?} */ (repository));
        return befRepository.restService;
    };
    /**
     * @param {?} baseUrl
     * @return {?}
     */
    DataIEUtils.GetPreUrl = /**
     * @param {?} baseUrl
     * @return {?}
     */
    function (baseUrl) {
        /** @type {?} */
        var lastIndex = baseUrl.lastIndexOf('/');
        /** @type {?} */
        var preurl = baseUrl.substr(0, lastIndex);
        return preurl;
    };
    /**
     * @param {?} str
     * @return {?}
     */
    DataIEUtils.JudgeIllegalChar = /**
     * @param {?} str
     * @return {?}
     */
    function (str) {
        /** @type {?} */
        var illegalChar = ['?', '、', '\\', '/', '*', '\'', '"', '“', '”', '<', '>', '|', ',', ' '];
        illegalChar.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (str.indexOf(item) !== -1) {
                return true;
            }
        }));
        return false;
    };
    /**
     * @param {?} http
     * @return {?}
     */
    DataIEUtils.getTranslateValue = /**
     * @param {?} http
     * @return {?}
     */
    function (http) {
        /** @type {?} */
        var lang;
        if (localStorage === undefined || localStorage === null) {
            return of(DefaultLang['zh-CHS']);
        }
        lang = localStorage.getItem('languageCode');
        if (lang === undefined || lang === null || lang === 'zh-CHS') {
            return of(DefaultLang['zh-CHS']);
        }
        if (http === undefined || http === null) {
            return of(DefaultLang['zh-CHS']);
        }
        /** @type {?} */
        var subject = new Subject();
        /** @type {?} */
        var url = "/platform/common/web/@gsp-dip/i18n/" + lang + ".json";
        http.get(url).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            console.log(data);
            subject.next(data);
        }));
        return subject;
    };
    return DataIEUtils;
}());
export { DataIEUtils };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YUlFVXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWRpcC9kYXRhLWltcC1leHAvIiwic291cmNlcyI6WyJsaWIvc2VydmljZS9VdGlscy9EYXRhSUVVdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRXBELE9BQU8sRUFBYSxFQUFFLEVBQUUsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQzs7Ozs7QUFFdEQsTUFBTSxVQUFVLGlCQUFpQixDQUFDLEdBQVE7SUFDeEMsSUFBSSxHQUFHLEtBQUssU0FBUyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQzs7Ozs7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUFDLEdBQVE7SUFDcEMsSUFBSSxHQUFHLEtBQUssU0FBUyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELElBQUksR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDbkIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQzs7Ozs7QUFDRCxNQUFNLFVBQVUsYUFBYSxDQUFDLEdBQVc7SUFDdkMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFO1FBQ2YsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxD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SUFBL0IsVUFBZ0MsSUFBZ0I7O1lBQzFDLElBQVk7UUFDaEIsSUFBSSxZQUFZLEtBQUssU0FBUyxJQUFJLFlBQVksS0FBSyxJQUFJLEVBQUU7WUFDdkQsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDbEM7UUFDRCxJQUFJLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUU1QyxJQUFJLElBQUksS0FBSyxTQUFTLElBQUksSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssUUFBUSxFQUFFO1lBQzVELE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1NBQ2xDO1FBQ0QsSUFBSSxJQUFJLEtBQUssU0FBUyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7WUFDdkMsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDbEM7O1lBQ0ssT0FBTyxHQUFHLElBQUksT0FBTyxFQUFPOztZQUM5QixHQUFHLEdBQVcsd0NBQXNDLElBQUksVUFBTztRQUNuRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVM7Ozs7UUFBQyxVQUFBLElBQUk7WUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JCLENBQUMsRUFBQyxDQUFDO1FBQ0gsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUNILGtCQUFDO0FBQUQsQ0FBQyxBQS9FRCxJQStFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UmVwb3NpdG9yeX0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQge0JlZlJlcG9zaXRvcnksIEJlZlJlc3RTZXJ2aWNlfSBmcm9tICdAZmFycmlzL2JlZic7XHJcbmltcG9ydCB7RGVmYXVsdExhbmd9IGZyb20gJy4uLy4uL2kxOG4vZGVmYXVsdC1sYW5nJztcclxuaW1wb3J0IHtIdHRwQ2xpZW50fSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZSwgb2YsIFN1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge0ZpbGVDb25zdH0gZnJvbSAnLi4vLi4vbW9kZWwvdXRpbHMvRmlsZUNvbnN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChvYmo6IGFueSk6IGJvb2xlYW4ge1xyXG4gIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGlmIChvYmogPT09IG51bGwpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPckVtcHR5KG9iajogYW55KTogYm9vbGVhbiB7XHJcbiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGlmIChvYmoubGVuZ3RoID09IDApIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yQmxhbmsoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICBpZiAoc3RyID09IG51bGwpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBpZiAoc3RyLnRyaW0oKS5sZW5ndGggPT0gMCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5U3RyaW5nKHBhcmFOYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcclxuICBjb25zdCBhcnJPYmogPSB1cmwuc3BsaXQoJz8nKTtcclxuICBpZiAoYXJyT2JqLmxlbmd0aCA+IDEpIHtcclxuICAgIGNvbnN0IGFyclBhcmEgPSBhcnJPYmpbMV0uc3BsaXQoJyYnKTtcclxuICAgIGxldCBhcnI6IGFueVtdO1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBwcmVmZXItZm9yLW9mXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyclBhcmEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgYXJyID0gYXJyUGFyYVtpXS5zcGxpdCgnPScpO1xyXG4gICAgICBpZiAoYXJyICE9IG51bGwgJiYgYXJyWzBdID09PSBwYXJhTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBhcnJbMV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAnJztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVUeXBlVXRpbCB7XHJcbiAgcHVibGljIHN0YXRpYyBnZXRGaWxlRXh0ZW5zaW9uKHZhbHVlRmllbGQ6IGFueSk6IGFueSB7XHJcbiAgICBsZXQgc3VmZml4ID0gbnVsbDtcclxuICAgIHN3aXRjaCAodmFsdWVGaWVsZCkge1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bHM6XHJcbiAgICAgICAgc3VmZml4ID0gJy54bHMnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bHN4OlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueGxzeCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0Lnhsc206XHJcbiAgICAgICAgc3VmZml4ID0gJy54bHNtJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QuZXQ6XHJcbiAgICAgICAgc3VmZml4ID0gJy5ldCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LnhtbDpcclxuICAgICAgICBzdWZmaXggPSAnLnhtbCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LnBkZjpcclxuICAgICAgICBzdWZmaXggPSAnLnBkZic7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LmNzdjpcclxuICAgICAgICBzdWZmaXggPSAnLmNzdic7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3VmZml4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRGaWxlVHlwZU5hbWUoZmlsZVR5cGUpIHtcclxuICAgIGxldCBmaWxlVHlwZU5hbWUgPSAnJztcclxuICAgIHN3aXRjaCAoZmlsZVR5cGUpIHtcclxuICAgICAgY2FzZSAnWExTJzpcclxuICAgICAgICBmaWxlVHlwZU5hbWUgPSBGaWxlQ29uc3QueGxzO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdYTFNYJzpcclxuICAgICAgICBmaWxlVHlwZU5hbWUgPSBGaWxlQ29uc3QueGxzeDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnWExTTSc6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0Lnhsc207XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0VUJzpcclxuICAgICAgICBmaWxlVHlwZU5hbWUgPSBGaWxlQ29uc3QuZXQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1hNTCc6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0LnhtbDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnUERGJzpcclxuICAgICAgICBmaWxlVHlwZU5hbWUgPSBGaWxlQ29uc3QucGRmO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdDU1YnOlxyXG4gICAgICAgIGZpbGVUeXBlTmFtZSA9IEZpbGVDb25zdC5jc3Y7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsZVR5cGVOYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFJRVV0aWxzIHtcclxuICBzdGF0aWMgQ2hvb3NlU3UocmVwb3NpdG9yeTogYW55LCBvcHRpb246IGFueSk6IGFueSB7XHJcbiAgICBsZXQgc3UgPSAnJztcclxuICAgIC8vIOmAmueUqOWvvOWFpeWvvOWHuuS7k+W6k+WtmOWcqO+8jOS9v+eUqOS4i+mdouWIhuaUr1xyXG4gICAgaWYgKHJlcG9zaXRvcnkgIT09IG51bGwpIHtcclxuICAgICAgY29uc3QgYmVmUmVzdFNlcnZpY2UgPSBEYXRhSUVVdGlscy5HZXRCZWZSZXN0U2VydmljZShyZXBvc2l0b3J5KTtcclxuICAgICAgc3UgPSBEYXRhSUVVdGlscy5nZXRTdShiZWZSZXN0U2VydmljZS5iYXNlVXJpKTtcclxuICAgIH1cclxuICAgIC8vIOaJi+W3peW8gOWPkeeahOS7k+W6k+S4jeWtmOWcqO+8jOmHh+eUqOS8oOWFpeeahHN1XHJcbiAgICBpZiAob3B0aW9uWydzdSddICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uWydzdSddICE9PSBudWxsKSB7XHJcbiAgICAgIHN1ID0gb3B0aW9uWydzdSddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFN1KHByZXVybDogc3RyaW5nKTogYW55IHtcclxuICAgIGNvbnN0IHN0ciA9IHByZXVybC5zdWJzdHJpbmcocHJldXJsLmluZGV4T2YoXCIvL1wiKSArIDIpO1xyXG4gICAgbGV0IHN0cnM6IHN0cmluZ1tdID0gc3RyLnNwbGl0KCcvJyk7XHJcbiAgICBjb25zdCBzdSA9IHN0cnNbM107XHJcbiAgICByZXR1cm4gc3U7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0QXBwKHByZXVybDogc3RyaW5nKTogYW55IHtcclxuICAgIGNvbnN0IHN0ciA9IHByZXVybC5zdWJzdHJpbmcocHJldXJsLmluZGV4T2YoXCIvL1wiKSArIDIpO1xyXG4gICAgbGV0IHN0cnM6IHN0cmluZ1tdID0gc3RyLnNwbGl0KCcvJyk7XHJcbiAgICBjb25zdCBhcHAgPSBzdHJzWzJdO1xyXG4gICAgcmV0dXJuIGFwcDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UG9ydChwcmV1cmw6IHN0cmluZyk6IGFueSB7XHJcbiAgICAvLyBcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hcGkvc2NtL3NkL3YxLjBcIlxyXG4gICAgY29uc3Qgc3RyID0gcHJldXJsLnN1YnN0cmluZyhwcmV1cmwuaW5kZXhPZihcIi8vXCIpICsgMik7XHJcbiAgICAvLyDlj6rlj5bliY3kuKTkvY3vvIw1MXh4LDUweHgsNTJ4eFxyXG4gICAgY29uc3QgcG9ydCA9IHN0ci5zdWJzdHIoc3RyLmluZGV4T2YoJzonKSArIDEsIDIpO1xyXG4gICAgcmV0dXJuIHBvcnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEdldEJlZlJlc3RTZXJ2aWNlKHJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8YW55Pik6IEJlZlJlc3RTZXJ2aWNlIHtcclxuICAgIGNvbnN0IGJlZlJlcG9zaXRvcnkgPSA8QmVmUmVwb3NpdG9yeTxhbnk+PnJlcG9zaXRvcnk7XHJcbiAgICByZXR1cm4gYmVmUmVwb3NpdG9yeS5yZXN0U2VydmljZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgR2V0UHJlVXJsKGJhc2VVcmw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBsYXN0SW5kZXggPSBiYXNlVXJsLmxhc3RJbmRleE9mKCcvJyk7XHJcbiAgICBjb25zdCBwcmV1cmwgPSBiYXNlVXJsLnN1YnN0cigwLCBsYXN0SW5kZXgpO1xyXG4gICAgcmV0dXJuIHByZXVybDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgSnVkZ2VJbGxlZ2FsQ2hhcihzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgaWxsZWdhbENoYXIgPSBbJz8nLCAn44CBJywgJ1xcXFwnLCAnLycsICcqJywgJ1xcJycsICdcIicsICfigJwnLCAn4oCdJywgJzwnLCAnPicsICd8JywgJywnLCAnICddO1xyXG4gICAgaWxsZWdhbENoYXIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgaWYgKHN0ci5pbmRleE9mKGl0ZW0pICE9PSAtMSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0VHJhbnNsYXRlVmFsdWUoaHR0cDogSHR0cENsaWVudCk6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICBsZXQgbGFuZzogc3RyaW5nO1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZSA9PT0gdW5kZWZpbmVkIHx8IGxvY2FsU3RvcmFnZSA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gb2YoRGVmYXVsdExhbmdbJ3poLUNIUyddKTtcclxuICAgIH1cclxuICAgIGxhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJyk7XHJcblxyXG4gICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCB8fCBsYW5nID09PSBudWxsIHx8IGxhbmcgPT09ICd6aC1DSFMnKSB7XHJcbiAgICAgIHJldHVybiBvZihEZWZhdWx0TGFuZ1snemgtQ0hTJ10pO1xyXG4gICAgfVxyXG4gICAgaWYgKGh0dHAgPT09IHVuZGVmaW5lZCB8fCBodHRwID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBvZihEZWZhdWx0TGFuZ1snemgtQ0hTJ10pO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAgIGxldCB1cmw6IHN0cmluZyA9IGAvcGxhdGZvcm0vY29tbW9uL3dlYi9AZ3NwLWRpcC9pMThuLyR7bGFuZ30uanNvbmA7XHJcbiAgICBodHRwLmdldCh1cmwpLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgIHN1YmplY3QubmV4dChkYXRhKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN1YmplY3Q7XHJcbiAgfVxyXG59XHJcbiJdfQ==