/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild, TemplateRef, ComponentFactoryResolver } from '@angular/core';
import { FrameContext } from '@farris/devkit';
import { NotifyService } from '@farris/ui-notify';
import { DataExportService } from '../service/DataIEService/data-export.service';
import { FileOperateService } from '../service/DataIEService/file-operate.service';
import { EntityListService } from '@farris/command-services';
import { ElementSelectComponent } from '../element-select/element-select.component';
import { CustomDataIEService } from '../service/DataIEService/custom-data-ie.service';
// import { FilterAndSortComponent } from '../filter-and-sort/filter-and-sort.component';
import { BsModalService } from '@farris/ui-modal';
import { DataIEUtils } from '../service/Utils/DataIEUtils';
import { HttpClient } from '@angular/common/http';
import { MethodType } from '../model/DataIEType/MethodType';
var ExportDialogComponent = /** @class */ (function () {
    function ExportDialogComponent(dataExportService, notify, fileService, entityService, customIEService, resolver, modalService, http) {
        var _this = this;
        this.dataExportService = dataExportService;
        this.notify = notify;
        this.fileService = fileService;
        this.entityService = entityService;
        this.customIEService = customIEService;
        this.resolver = resolver;
        this.modalService = modalService;
        this.http = http;
        // 规则ID
        this.ruleId = '';
        this.i18nId = '';
        this.exportOption = null;
        this.isHandCraft = false;
        this.subject = null;
        // repository = null;
        this.frameContext = null;
        this.show = false;
        this.needDestroy = new EventEmitter();
        this.valueField = 'Office Excel97-2003(*.xls)';
        this.Model = null;
        this.components = null;
        this.filter = null;
        this.InnerModel = null;
        this.CustomModel = null;
        this.isCustomExport = null;
        // public fileListItems = [
        //     {id:'Office Excel97-2003(*.xls)',label:'Office Excel97-2003(*.xls)'},
        //     {id:'Office Excel(*.xlsx)',label:'Office Excel(*.xlsx)'},
        //     {id:'Office Excel Macro(*.xlsm)',label:'Office Excel Macro(*.xlsm)'},
        //     {id:'WPS Table(*.et)',label:'WPS Table(*.et)'}
        //     // 'WPS Table(Template File)(*.ett)'
        // ];
        this.fileListItems = [
            'Office Excel97-2003(*.xls)',
            'Office Excel(*.xlsx)',
            'Office Excel Macro(*.xlsm)',
            'WPS Table(*.et)'
            // 'WPS Table(Template File)(*.ett)'
        ];
        DataIEUtils.getTranslateValue(http).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.export_success = res['export_success'];
            _this.export_fail = res['export_fail'];
            _this.file_type = res['file_type'];
            _this.download_vsto = res['download_vsto'];
            _this.ie_cancel = res['ie_cancel'];
            _this.ie_ok = res['ie_ok'];
            _this.customexport_no_column = res['customexport_no_column'];
            _this.vsto_component = res['vsto_component'];
        }));
    }
    /**
     * @return {?}
     */
    ExportDialogComponent.prototype.DownloadVSTO = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var repository = this.frameContext === null ? null : this.frameContext.repository;
        if (this.isHandCraft === true) {
            /** @type {?} */
            var su = DataIEUtils.ChooseSu(repository, this.exportOption);
            this.fileService.DownloadFile4HandCraft('数据导出组件.msi', this.vsto_component, su, false);
        }
        else {
            /** @type {?} */
            var befService = DataIEUtils.GetBefRestService(repository);
            this.fileService.DownloadFile('数据导出组件.msi', this.vsto_component, befService.baseUri, false);
        }
    };
    /**
     * @return {?}
     */
    ExportDialogComponent.prototype.close = /**
     * @return {?}
     */
    function () {
        this.needDestroy.emit();
    };
    /**
     * @return {?}
     */
    ExportDialogComponent.prototype.Ok = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.ruleId === '' && this.InnerModel === null) {
            return;
        }
        /** @type {?} */
        var suffix = '.xls';
        switch (this.valueField) {
            case 'Office Excel97-2003(*.xls)':
                suffix = '.xls';
                break;
            case 'Office Excel(*.xlsx)':
                suffix = '.xlsx';
                break;
            case 'Office Excel Macro(*.xlsm)':
                suffix = '.xlsm';
                break;
            case 'WPS Table(*.et)':
                suffix = '.et';
                break;
            case 'WPS Table(Template File)(*.ett)':
                suffix = '.ett';
                break;
            default:
                break;
        }
        if (this.isCustomExport === false) {
            suffix = null;
        }
        //自定义导出分支
        if (this.InnerModel !== null) {
            this.eleSelectComp.Save();
            /** @type {?} */
            var elements = this.InnerModel.MainObject.Elements;
            /** @type {?} */
            var mainObjName = this.InnerModel.MainObject.FileObjectName;
            if (elements == null || elements === undefined || elements.length === 0) {
                this.notify.info(mainObjName + ' ' + this.customexport_no_column);
                return;
            }
            this.customIEService.SaveCustomExportRule(this.InnerModel, this.components, this.frameContext, suffix, this.i18nId, this.exportOption.dimension).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data['success'] === true) {
                    _this.customIEService.ExportByRule(['DataExport', _this.Model['MainObject']['Source']['SourceMetadataID'], _this.exportOption.dimension], _this.filter, _this.exportOption, _this.frameContext);
                }
                else {
                    _this.notify.error(_this.export_fail + data['message']);
                }
            }));
            /** @type {?} */
            var unscriber_1 = this.customIEService.export.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data === '') {
                    _this.notify.success(_this.export_success);
                    unscriber_1.unsubscribe();
                    _this.subject.next(true);
                    _this.subject.complete();
                }
                else {
                    /** @type {?} */
                    var errorlevel = _this.customIEService.errorlevel;
                    if (errorlevel === 'Info') {
                        _this.notify.info(data);
                    }
                    else if (errorlevel === 'Warning') {
                        _this.notify.warning(data);
                    }
                    else {
                        _this.notify.error(_this.export_fail + data);
                    }
                    // this.notify.error('导出失败！');
                    unscriber_1.unsubscribe();
                    _this.subject.next(false);
                    _this.subject.complete();
                }
                _this.needDestroy.emit();
            }));
        }
        //选VSTO特性下的普通导出分支
        if (this.ruleId !== '') {
            switch (this.methodType) {
                case MethodType.CommonExport:
                    this.dataExportService.ExportById(this.ruleId, this.frameContext, this.exportOption, suffix);
                    /** @type {?} */
                    var unscriber_2 = this.dataExportService.export.subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        if (data === '') {
                            _this.notify.success(_this.export_success);
                            unscriber_2.unsubscribe();
                            _this.subject.next(true);
                            _this.subject.complete();
                        }
                        else {
                            /** @type {?} */
                            var errorlevel = _this.dataExportService.errorlevel;
                            if (errorlevel === 'Info') {
                                _this.notify.info(data);
                            }
                            else if (errorlevel === 'Warning') {
                                _this.notify.warning(data);
                            }
                            else {
                                _this.notify.error(_this.export_fail + data);
                            }
                            // this.notify.error('导出失败！');
                            unscriber_2.unsubscribe();
                            _this.subject.next(false);
                            _this.subject.complete();
                        }
                        _this.needDestroy.emit();
                    }));
                    break;
                case MethodType.ExportCurrentTableData:
                    this.dataExportService.ExportCurrentData(this.ruleId, this.frameContext, this.entityService.pageIndex, this.entityService.pageSize, this.exportOption, suffix);
                    /** @type {?} */
                    var exportUnscribe_1 = this.dataExportService.export.subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        if (data === '') {
                            _this.notify.success(_this.export_success);
                            exportUnscribe_1.unsubscribe();
                            _this.subject.next(true);
                            _this.subject.complete();
                        }
                        else {
                            /** @type {?} */
                            var errorlevel = _this.dataExportService.errorlevel;
                            if (errorlevel === 'Info') {
                                _this.notify.info(data);
                            }
                            else if (errorlevel === 'Warning') {
                                _this.notify.warning(data);
                            }
                            else {
                                _this.notify.error(_this.export_fail + data);
                            }
                            exportUnscribe_1.unsubscribe();
                            _this.subject.next(false);
                            _this.subject.complete();
                        }
                        _this.needDestroy.emit();
                    }));
                    break;
            }
            // this.needDestroy.emit();
        }
    };
    /**
     * @return {?}
     */
    ExportDialogComponent.prototype.Cancel = /**
     * @return {?}
     */
    function () {
        this.needDestroy.emit(true);
    };
    ExportDialogComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-export-dialog',
                    template: "<div class=\"d-flex flex-column\" style=\"width: 100%; height: 100%;\">\r\n    <div region=\"north\" class=\"north\">\r\n        <div class=\"row\" style=\"margin-top: 12px\">\r\n            <!--\r\n            <div class=\"div-inline\">\r\n                <input type=\"text\" style=\"text-align: center;width: 100px; border: 0px\" name=\"expfiltercond\" id=\"expfiltercond\" value=\"\u8FC7\u6EE4\u6392\u5E8F\u6761\u4EF6\">\r\n            </div>\r\n            <div class=\"div-inline\">\r\n                <input style=\"width:680px\" type=\"text\" id=\"filterExpression\" name=\"filterExpression\" placeholder=\"\u8BBE\u7F6E\u8FC7\u6EE4\u4E0E\u6392\u5E8F\u6761\u4EF6\" />\r\n            </div>\r\n            <div class=\"div-inline\">\r\n                <button class=\" btn btn-primary\" style=\"width:60px\" type=\"button\" (click)=\"SetFilter()\">\u8BBE\u7F6E</button>\r\n            </div>\r\n            -->\r\n            \r\n            <!--<label>\u8FC7\u6EE4</label>\r\n            <filter [columns]=\"columns\", [(ngModel)]=\"filterConditions\"></filter>-->\r\n            <!--\r\n            <label>\u6392\u5E8F</label>\r\n            <sorter [columns]=\"columns\" [(ngModel)]=\"conditions\"></sorter>\r\n            -->\r\n        </div>\r\n        <div style=\"margin-top: 12px\">\r\n            <div class=\"div-inline\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div region=\"center\" class=\"center flex-fill\">\r\n      <div *ngIf=\"isCustomExport\">\r\n          <app-element-select [Model]=\"Model\" [InnerModel]=\"InnerModel\" [CustomModel]=\"CustomModel\"></app-element-select>\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"isCustomExport\" region=\"south\" class=\"south mgleft\">\r\n        <!-- \u81EA\u5B9A\u4E49\u5BFC\u51FA -->\r\n      <label>{{file_type}}</label>\r\n      <kendo-dropdownlist class=\"longleng\" id=\"fileType\" [data]=\"fileListItems\" [(ngModel)] = \"valueField\">\r\n      </kendo-dropdownlist>\r\n      <!-- <farris-combo-list id=\"fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\" [textField]=\"'label'\" [data]=\"fileListItems\"></farris-combo-list> -->\r\n    </div>\r\n</div>\r\n<ng-template #selectFooter>\r\n    <!-- <div class=\"btns\">\r\n        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm px-3\" (click)=\"DownloadVSTO()\" *ngIf=\"show\">{{download_vsto}}</button>\r\n        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm px-3\" (click)=\"Cancel()\">{{ie_cancel}}</button>\r\n        <button type=\"button\" class=\"btn btn-outline-primary btn-sm px-3\" (click)=\"Ok()\">{{ie_ok}}</button>\r\n    </div> -->\r\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"DownloadVSTO()\" *ngIf=\"show\">{{download_vsto}}</button>\r\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"Cancel()\">{{ie_cancel}}</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"Ok()\">{{ie_ok}}</button>\r\n</ng-template>",
                    providers: [NotifyService],
                    styles: [".barmanager{position:absolute;bottom:0;height:50px;right:30px;padding-left:50px}*{padding:0;margin:0}#filePath,#fileType,#filterExpression{margin-left:7px}.input-group{margin-bottom:12px}.btngroup{margin-top:12px}.exchange{margin-top:30px}#IsSave{margin:6px}.pos{position:relative}.left{float:right}.mkwidth{width:75px;line-height:28px}.div-inline{display:inline}.mgleft{margin-left:20px;margin-top:10px}.longleng{width:820px}"]
                }] }
    ];
    /** @nocollapse */
    ExportDialogComponent.ctorParameters = function () { return [
        { type: DataExportService },
        { type: NotifyService },
        { type: FileOperateService },
        { type: EntityListService },
        { type: CustomDataIEService },
        { type: ComponentFactoryResolver },
        { type: BsModalService },
        { type: HttpClient }
    ]; };
    ExportDialogComponent.propDecorators = {
        modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
        ruleId: [{ type: Input }],
        i18nId: [{ type: Input }],
        exportOption: [{ type: Input }],
        isHandCraft: [{ type: Input }],
        frameContext: [{ type: Input }],
        methodType: [{ type: Input }],
        show: [{ type: Input }],
        needDestroy: [{ type: Output }],
        eleSelectComp: [{ type: ViewChild, args: [ElementSelectComponent,] }],
        Model: [{ type: Input }],
        components: [{ type: Input }],
        filter: [{ type: Input }],
        InnerModel: [{ type: Input }],
        CustomModel: [{ type: Input }],
        isCustomExport: [{ type: Input }]
    };
    return ExportDialogComponent;
}());
export { ExportDialogComponent };
if (false) {
    /** @type {?} */
    ExportDialogComponent.prototype.modalFooter;
    /** @type {?} */
    ExportDialogComponent.prototype.ruleId;
    /** @type {?} */
    ExportDialogComponent.prototype.i18nId;
    /** @type {?} */
    ExportDialogComponent.prototype.exportOption;
    /** @type {?} */
    ExportDialogComponent.prototype.isHandCraft;
    /** @type {?} */
    ExportDialogComponent.prototype.subject;
    /** @type {?} */
    ExportDialogComponent.prototype.frameContext;
    /** @type {?} */
    ExportDialogComponent.prototype.methodType;
    /** @type {?} */
    ExportDialogComponent.prototype.show;
    /** @type {?} */
    ExportDialogComponent.prototype.needDestroy;
    /** @type {?} */
    ExportDialogComponent.prototype.valueField;
    /** @type {?} */
    ExportDialogComponent.prototype.exportRule;
    /** @type {?} */
    ExportDialogComponent.prototype.eleSelectComp;
    /** @type {?} */
    ExportDialogComponent.prototype.Model;
    /** @type {?} */
    ExportDialogComponent.prototype.components;
    /** @type {?} */
    ExportDialogComponent.prototype.filter;
    /** @type {?} */
    ExportDialogComponent.prototype.InnerModel;
    /** @type {?} */
    ExportDialogComponent.prototype.CustomModel;
    /** @type {?} */
    ExportDialogComponent.prototype.isCustomExport;
    /** @type {?} */
    ExportDialogComponent.prototype.export_success;
    /** @type {?} */
    ExportDialogComponent.prototype.export_fail;
    /** @type {?} */
    ExportDialogComponent.prototype.file_type;
    /** @type {?} */
    ExportDialogComponent.prototype.download_vsto;
    /** @type {?} */
    ExportDialogComponent.prototype.ie_cancel;
    /** @type {?} */
    ExportDialogComponent.prototype.ie_ok;
    /** @type {?} */
    ExportDialogComponent.prototype.customexport_no_column;
    /** @type {?} */
    ExportDialogComponent.prototype.vsto_component;
    /** @type {?} */
    ExportDialogComponent.prototype.fileListItems;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.dataExportService;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.fileService;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.entityService;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.customIEService;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ExportDialogComponent.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0LWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWRpcC9kYXRhLWltcC1leHAvIiwic291cmNlcyI6WyJsaWIvY3VzdG9tLWV4cG9ydC1kaWFsb2cvZXhwb3J0LWRpYWxvZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSx3QkFBd0IsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUNuSSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBSWpGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLCtDQUErQyxDQUFDO0FBQ25GLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzdELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDOztBQUV0RixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRTNELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVsRCxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFFMUQ7SUF1REksK0JBQ1ksaUJBQW9DLEVBQ3BDLE1BQXFCLEVBQ3JCLFdBQStCLEVBQy9CLGFBQWdDLEVBQ2hDLGVBQW9DLEVBQ3BDLFFBQWtDLEVBQ2xDLFlBQTRCLEVBQzVCLElBQWdCO1FBUjVCLGlCQW9CQztRQW5CVyxz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QzVDLHVDQUE2Qjs7Ozs7SUFDN0IsNENBQXVDOzs7OztJQUN2Qyw4Q0FBd0M7Ozs7O0lBQ3hDLGdEQUE0Qzs7Ozs7SUFDNUMseUNBQTBDOzs7OztJQUMxQyw2Q0FBb0M7Ozs7O0lBQ3BDLHFDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZyYW1lQ29udGV4dCB9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgRGF0YUV4cG9ydFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL0RhdGFJRVNlcnZpY2UvZGF0YS1leHBvcnQuc2VydmljZSc7XHJcbmltcG9ydCB7IERhdGFFeGNoYW5nZU1vZGVsIH0gZnJvbSAnLi4vbW9kZWwvTW9kZWwvRGF0YUV4Y2hhbmdlTW9kZWwnO1xyXG5pbXBvcnQgeyBEYXRhSW1wb3J0RXhwb3J0UnVsZSB9IGZyb20gJy4uL21vZGVsL0RhdGFJbXBvcnRFeHBvcnRSdWxlJztcclxuaW1wb3J0IHsgRXhwb3J0TWV0aG9kVHlwZSB9IGZyb20gJy4uL21vZGVsL0RhdGFJRVR5cGUvRXhwb3J0TWV0aG9kVHlwZSc7XHJcbmltcG9ydCB7IEZpbGVPcGVyYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2UvRGF0YUlFU2VydmljZS9maWxlLW9wZXJhdGUuc2VydmljZSc7XHJcbmltcG9ydCB7IEVudGl0eUxpc3RTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy9jb21tYW5kLXNlcnZpY2VzJztcclxuaW1wb3J0IHsgRWxlbWVudFNlbGVjdENvbXBvbmVudCB9IGZyb20gJy4uL2VsZW1lbnQtc2VsZWN0L2VsZW1lbnQtc2VsZWN0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEN1c3RvbURhdGFJRVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL0RhdGFJRVNlcnZpY2UvY3VzdG9tLWRhdGEtaWUuc2VydmljZSc7XHJcbi8vIGltcG9ydCB7IEZpbHRlckFuZFNvcnRDb21wb25lbnQgfSBmcm9tICcuLi9maWx0ZXItYW5kLXNvcnQvZmlsdGVyLWFuZC1zb3J0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IERhdGFJRVV0aWxzIH0gZnJvbSAnLi4vc2VydmljZS9VdGlscy9EYXRhSUVVdGlscyc7XHJcbmltcG9ydCB7IExvYWRpbmdTZXJ2aWNlLCBMb2FkaW5nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge01ldGhvZFR5cGV9IGZyb20gJy4uL21vZGVsL0RhdGFJRVR5cGUvTWV0aG9kVHlwZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnYXBwLWV4cG9ydC1kaWFsb2cnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2V4cG9ydC1kaWFsb2cuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vZXhwb3J0LWRpYWxvZy5jb21wb25lbnQuY3NzJ10sXHJcbiAgICBwcm92aWRlcnM6IFtOb3RpZnlTZXJ2aWNlXVxyXG59KVxyXG4vL+iHquWumuS5ieWvvOWHulxyXG5leHBvcnQgY2xhc3MgRXhwb3J0RGlhbG9nQ29tcG9uZW50IHtcclxuICAgIEBWaWV3Q2hpbGQoJ3NlbGVjdEZvb3RlcicpIG1vZGFsRm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gICAgLy8g6KeE5YiZSURcclxuICAgIEBJbnB1dCgpXHJcbiAgICBydWxlSWQgPSAnJztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBpMThuSWQgPSAnJztcclxuICAgIEBJbnB1dCgpXHJcbiAgICBleHBvcnRPcHRpb246IGFueSA9IG51bGw7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgaXNIYW5kQ3JhZnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHN1YmplY3Q6IFN1YmplY3Q8Qm9vbGVhbj4gPSBudWxsO1xyXG4gICAgQElucHV0KClcclxuICAgIC8vIHJlcG9zaXRvcnkgPSBudWxsO1xyXG4gICAgZnJhbWVDb250ZXh0OiBGcmFtZUNvbnRleHQgPSBudWxsO1xyXG4gICAgQElucHV0KClcclxuICAgIG1ldGhvZFR5cGU6IE1ldGhvZFR5cGU7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgc2hvdzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgQE91dHB1dCgpXHJcbiAgICBuZWVkRGVzdHJveSA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcclxuICAgIHZhbHVlRmllbGQ6IHN0cmluZyA9ICdPZmZpY2UgRXhjZWw5Ny0yMDAzKCoueGxzKSc7XHJcbiAgICBleHBvcnRSdWxlOiBEYXRhSW1wb3J0RXhwb3J0UnVsZTtcclxuICAgIEBWaWV3Q2hpbGQoRWxlbWVudFNlbGVjdENvbXBvbmVudClcclxuICAgIGVsZVNlbGVjdENvbXA6IEVsZW1lbnRTZWxlY3RDb21wb25lbnQ7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgTW9kZWw6IGFueSA9IG51bGw7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgY29tcG9uZW50czogYW55ID0gbnVsbDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBmaWx0ZXI6IGFueSA9IG51bGw7XHJcbiAgICBASW5wdXQoKVxyXG4gICAgSW5uZXJNb2RlbDogYW55ID0gbnVsbDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBDdXN0b21Nb2RlbDogYW55ID0gbnVsbDtcclxuICAgIEBJbnB1dCgpXHJcbiAgICBpc0N1c3RvbUV4cG9ydDogYW55ID0gbnVsbDtcclxuXHJcblxyXG5cclxuICAgIGV4cG9ydF9zdWNjZXNzOiBzdHJpbmc7XHJcbiAgICBleHBvcnRfZmFpbDogc3RyaW5nO1xyXG4gICAgZmlsZV90eXBlOiBzdHJpbmc7XHJcbiAgICBkb3dubG9hZF92c3RvOiBzdHJpbmc7XHJcbiAgICBpZV9jYW5jZWw6IHN0cmluZztcclxuICAgIGllX29rOiBzdHJpbmc7XHJcbiAgICBjdXN0b21leHBvcnRfbm9fY29sdW1uOiBzdHJpbmc7XHJcbiAgICB2c3RvX2NvbXBvbmVudDogc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBkYXRhRXhwb3J0U2VydmljZTogRGF0YUV4cG9ydFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBub3RpZnk6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBmaWxlU2VydmljZTogRmlsZU9wZXJhdGVTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZW50aXR5U2VydmljZTogRW50aXR5TGlzdFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21JRVNlcnZpY2U6IEN1c3RvbURhdGFJRVNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnRcclxuICAgICkge1xyXG4gICAgICAgIERhdGFJRVV0aWxzLmdldFRyYW5zbGF0ZVZhbHVlKGh0dHApLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV4cG9ydF9zdWNjZXNzID0gcmVzWydleHBvcnRfc3VjY2VzcyddO1xyXG4gICAgICAgICAgICB0aGlzLmV4cG9ydF9mYWlsID0gcmVzWydleHBvcnRfZmFpbCddO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVfdHlwZSA9IHJlc1snZmlsZV90eXBlJ107XHJcbiAgICAgICAgICAgIHRoaXMuZG93bmxvYWRfdnN0byA9IHJlc1snZG93bmxvYWRfdnN0byddO1xyXG4gICAgICAgICAgICB0aGlzLmllX2NhbmNlbCA9IHJlc1snaWVfY2FuY2VsJ107XHJcbiAgICAgICAgICAgIHRoaXMuaWVfb2sgPSByZXNbJ2llX29rJ107XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tZXhwb3J0X25vX2NvbHVtbiA9IHJlc1snY3VzdG9tZXhwb3J0X25vX2NvbHVtbiddO1xyXG4gICAgICAgICAgICB0aGlzLnZzdG9fY29tcG9uZW50ID0gcmVzWyd2c3RvX2NvbXBvbmVudCddO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIERvd25sb2FkVlNUTygpIHtcclxuICAgICAgICBjb25zdCByZXBvc2l0b3J5ID0gdGhpcy5mcmFtZUNvbnRleHQgPT09IG51bGwgPyBudWxsIDogdGhpcy5mcmFtZUNvbnRleHQucmVwb3NpdG9yeTtcclxuICAgICAgICBpZiAodGhpcy5pc0hhbmRDcmFmdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdSA9IERhdGFJRVV0aWxzLkNob29zZVN1KHJlcG9zaXRvcnksIHRoaXMuZXhwb3J0T3B0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5maWxlU2VydmljZS5Eb3dubG9hZEZpbGU0SGFuZENyYWZ0KCfmlbDmja7lr7zlh7rnu4Tku7YubXNpJywgdGhpcy52c3RvX2NvbXBvbmVudCwgc3UsIGZhbHNlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZlNlcnZpY2UgPSBEYXRhSUVVdGlscy5HZXRCZWZSZXN0U2VydmljZShyZXBvc2l0b3J5KTtcclxuICAgICAgICAgICAgdGhpcy5maWxlU2VydmljZS5Eb3dubG9hZEZpbGUoJ+aVsOaNruWvvOWHuue7hOS7ti5tc2knLCB0aGlzLnZzdG9fY29tcG9uZW50LCBiZWZTZXJ2aWNlLmJhc2VVcmksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICB9XHJcbiAgICAvLyBwdWJsaWMgZmlsZUxpc3RJdGVtcyA9IFtcclxuICAgIC8vICAgICB7aWQ6J09mZmljZSBFeGNlbDk3LTIwMDMoKi54bHMpJyxsYWJlbDonT2ZmaWNlIEV4Y2VsOTctMjAwMygqLnhscyknfSxcclxuICAgIC8vICAgICB7aWQ6J09mZmljZSBFeGNlbCgqLnhsc3gpJyxsYWJlbDonT2ZmaWNlIEV4Y2VsKCoueGxzeCknfSxcclxuICAgIC8vICAgICB7aWQ6J09mZmljZSBFeGNlbCBNYWNybygqLnhsc20pJyxsYWJlbDonT2ZmaWNlIEV4Y2VsIE1hY3JvKCoueGxzbSknfSxcclxuICAgIC8vICAgICB7aWQ6J1dQUyBUYWJsZSgqLmV0KScsbGFiZWw6J1dQUyBUYWJsZSgqLmV0KSd9XHJcbiAgICAvLyAgICAgLy8gJ1dQUyBUYWJsZShUZW1wbGF0ZSBGaWxlKSgqLmV0dCknXHJcbiAgICAvLyBdO1xyXG4gICAgcHVibGljIGZpbGVMaXN0SXRlbXMgPSBbXHJcbiAgICAgICAgJ09mZmljZSBFeGNlbDk3LTIwMDMoKi54bHMpJyxcclxuICAgICAgICAnT2ZmaWNlIEV4Y2VsKCoueGxzeCknLFxyXG4gICAgICAgICdPZmZpY2UgRXhjZWwgTWFjcm8oKi54bHNtKScsXHJcbiAgICAgICAgJ1dQUyBUYWJsZSgqLmV0KSdcclxuICAgICAgICAvLyAnV1BTIFRhYmxlKFRlbXBsYXRlIEZpbGUpKCouZXR0KSdcclxuICAgIF07XHJcbiAgICBwdWJsaWMgT2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucnVsZUlkID09PSAnJyAmJiB0aGlzLklubmVyTW9kZWwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3VmZml4ID0gJy54bHMnO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy52YWx1ZUZpZWxkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ09mZmljZSBFeGNlbDk3LTIwMDMoKi54bHMpJzpcclxuICAgICAgICAgICAgICAgIHN1ZmZpeCA9ICcueGxzJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdPZmZpY2UgRXhjZWwoKi54bHN4KSc6XHJcbiAgICAgICAgICAgICAgICBzdWZmaXggPSAnLnhsc3gnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ09mZmljZSBFeGNlbCBNYWNybygqLnhsc20pJzpcclxuICAgICAgICAgICAgICAgIHN1ZmZpeCA9ICcueGxzbSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnV1BTIFRhYmxlKCouZXQpJzpcclxuICAgICAgICAgICAgICAgIHN1ZmZpeCA9ICcuZXQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1dQUyBUYWJsZShUZW1wbGF0ZSBGaWxlKSgqLmV0dCknOlxyXG4gICAgICAgICAgICAgICAgc3VmZml4ID0gJy5ldHQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDdXN0b21FeHBvcnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHN1ZmZpeCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6Ieq5a6a5LmJ5a+85Ye65YiG5pSvXHJcbiAgICAgICAgaWYgKHRoaXMuSW5uZXJNb2RlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZVNlbGVjdENvbXAuU2F2ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMuSW5uZXJNb2RlbC5NYWluT2JqZWN0LkVsZW1lbnRzO1xyXG4gICAgICAgICAgICBjb25zdCBtYWluT2JqTmFtZSA9IHRoaXMuSW5uZXJNb2RlbC5NYWluT2JqZWN0LkZpbGVPYmplY3ROYW1lO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHMgPT0gbnVsbCB8fCBlbGVtZW50cyA9PT0gdW5kZWZpbmVkIHx8IGVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyhtYWluT2JqTmFtZSArICcgJyArIHRoaXMuY3VzdG9tZXhwb3J0X25vX2NvbHVtbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21JRVNlcnZpY2UuU2F2ZUN1c3RvbUV4cG9ydFJ1bGUodGhpcy5Jbm5lck1vZGVsLCB0aGlzLmNvbXBvbmVudHMsIHRoaXMuZnJhbWVDb250ZXh0LCBzdWZmaXgsIHRoaXMuaTE4bklkLHRoaXMuZXhwb3J0T3B0aW9uLmRpbWVuc2lvbikuc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgICAgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbJ3N1Y2Nlc3MnXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUlFU2VydmljZS5FeHBvcnRCeVJ1bGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ0RhdGFFeHBvcnQnLCB0aGlzLk1vZGVsWydNYWluT2JqZWN0J11bJ1NvdXJjZSddWydTb3VyY2VNZXRhZGF0YUlEJ10sdGhpcy5leHBvcnRPcHRpb24uZGltZW5zaW9uXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBvcnRPcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkuZXJyb3IodGhpcy5leHBvcnRfZmFpbCArIGRhdGFbJ21lc3NhZ2UnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCB1bnNjcmliZXIgPSB0aGlzLmN1c3RvbUlFU2VydmljZS5leHBvcnQuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmV4cG9ydF9zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB1bnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JsZXZlbCA9IHRoaXMuY3VzdG9tSUVTZXJ2aWNlLmVycm9ybGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ybGV2ZWwgPT09ICdJbmZvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JsZXZlbCA9PT0gJ1dhcm5pbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkuZXJyb3IodGhpcy5leHBvcnRfZmFpbCArIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm5vdGlmeS5lcnJvcign5a+85Ye65aSx6LSl77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5zY3JpYmVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+mAiVZTVE/nibnmgKfkuIvnmoTmma7pgJrlr7zlh7rliIbmlK9cclxuICAgICAgICBpZiAodGhpcy5ydWxlSWQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5tZXRob2RUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1ldGhvZFR5cGUuQ29tbW9uRXhwb3J0OlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRhdGFFeHBvcnRTZXJ2aWNlLkV4cG9ydEJ5SWQodGhpcy5ydWxlSWQsIHRoaXMuZnJhbWVDb250ZXh0LCB0aGlzLmV4cG9ydE9wdGlvbiwgc3VmZml4KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgdW5zY3JpYmVyID0gdGhpcy5kYXRhRXhwb3J0U2VydmljZS5leHBvcnQuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5leHBvcnRfc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcmxldmVsID0gdGhpcy5kYXRhRXhwb3J0U2VydmljZS5lcnJvcmxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ybGV2ZWwgPT09ICdJbmZvJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5LmluZm8oZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9ybGV2ZWwgPT09ICdXYXJuaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5LmVycm9yKHRoaXMuZXhwb3J0X2ZhaWwgKyBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubm90aWZ5LmVycm9yKCflr7zlh7rlpLHotKXvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2NyaWJlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1ldGhvZFR5cGUuRXhwb3J0Q3VycmVudFRhYmxlRGF0YTpcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhRXhwb3J0U2VydmljZS5FeHBvcnRDdXJyZW50RGF0YSh0aGlzLnJ1bGVJZCwgdGhpcy5mcmFtZUNvbnRleHQsIHRoaXMuZW50aXR5U2VydmljZS5wYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRpdHlTZXJ2aWNlLnBhZ2VTaXplLCB0aGlzLmV4cG9ydE9wdGlvbiwgc3VmZml4KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZXhwb3J0VW5zY3JpYmUgPSB0aGlzLmRhdGFFeHBvcnRTZXJ2aWNlLmV4cG9ydC5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmV4cG9ydF9zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydFVuc2NyaWJlLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JsZXZlbCA9IHRoaXMuZGF0YUV4cG9ydFNlcnZpY2UuZXJyb3JsZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcmxldmVsID09PSAnSW5mbycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvcmxldmVsID09PSAnV2FybmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeS5lcnJvcih0aGlzLmV4cG9ydF9mYWlsICsgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRVbnNjcmliZS51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIENhbmNlbCgpIHtcclxuICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQodHJ1ZSk7XHJcbiAgICB9XHJcbn1cclxuIl19