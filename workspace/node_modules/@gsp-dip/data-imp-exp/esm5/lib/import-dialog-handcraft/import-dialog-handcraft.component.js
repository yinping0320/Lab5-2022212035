/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, ElementRef, EventEmitter, Injector, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { FileUploader } from '../service/UploaderService/FileUpload/file-uploader';
import { DataImportService } from '../service/DataIEService/data-import.service';
import { NotifyService } from '@farris/ui-notify';
import { LoadingService } from '@farris/ui-loading';
import { MethodType } from '../model/DataIEType/MethodType';
import { Subject } from 'rxjs';
import { DataIEUtils, FileTypeUtil, isNullOrEmpty, isNullOrUndefined } from '../service/Utils/DataIEUtils';
import { HttpClient } from '@angular/common/http';
import { BsModalService } from '@farris/ui-modal';
import { RuleSelectComponent } from '../rule-select/rule-select.component';
import { MessagerService } from '@farris/ui-messager';
import { FileConst } from '../model/utils/FileConst';
import { CommonParams } from "../service/Entity/CommonParams";
import { ValidateFormComponent } from "../validate-form/validate-form.component";
var ImportDialogHandcraftComponent = /** @class */ (function () {
    function ImportDialogHandcraftComponent(dataImportService, notify, loadingService, http, injector, modalService, msgService, resolver) {
        var _this = this;
        this.dataImportService = dataImportService;
        this.notify = notify;
        this.loadingService = loadingService;
        this.http = http;
        this.injector = injector;
        this.modalService = modalService;
        this.msgService = msgService;
        this.resolver = resolver;
        // 规则ID 该id为表单上配置的规则id
        this.ruleId = '';
        // 过滤条件
        this.importOption = null;
        this.subject = null;
        this.selectrule = false;
        // 记录的规则
        this.recordRule = null;
        this.selectfiletype = null;
        this.currentRuleName = '';
        this.currentRuleId = '';
        this.currentRuleFileType = '';
        this.enableTemplate = true;
        this.closeXLSX = false;
        this.enableSecurityLevelSelect = false;
        this.securityLevelName = '';
        this.ImportSecretRemindInfo = '';
        this.acceptFileType = '.csv,.xlsm,.xlsx,.xls,.pdf,.xml,.et';
        // 文件名称
        this.fileName = '';
        this.origin = window.location.origin;
        this.uploader = new FileUploader({
            url: '',
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile'
        });
        // 控制Destroy表单中的输入组件
        this.needDestroy = new EventEmitter();
        this.showfiletype = true;
        this.enableRuntimeCustom = false;
        this.valueField = null;
        this.lookupIcon = '<i class="f-icon f-icon-windows"></i>';
        this.fileListItems = [
            { id: FileConst.xls, label: FileConst.xls },
            { id: FileConst.xlsx, label: FileConst.xlsx },
            { id: FileConst.xlsm, label: FileConst.xlsm },
            { id: FileConst.et, label: FileConst.et },
        ];
        this.securityLevelItems = [];
        this.uploader.onSuccessItem = this.Import.bind(this);
        this.uploader.onErrorItem = this.ErrorLog.bind(this);
        this.uploader.onAfterAddingFile = this.afterAddFile;
        DataIEUtils.getTranslateValue(http).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.import_file = res['import_file'];
            _this.choose_file = res['choose_file'];
            _this.file_type = res['file_type'];
            _this.import_placeholder = res['import_placeholder'];
            _this.download_template = res['download_template'];
            _this.ie_cancel = res['ie_cancel'];
            _this.ie_ok = res['ie_ok'];
            _this.choose_truefile = res['choose_truefile'];
            _this.download_template_ok = res['download_template_ok'];
            _this.download_template_fail = res['download_template_fail'];
            _this.upload_fail = res['upload_fail'];
            _this.import_success = res['import_success'];
            _this.import_form_success = res['import_form_success'];
            _this.import_fail = res['import_fail'];
            _this.rule_list = res['rule_list'];
            _this.select_xlsx_notify = res['select_xlsx_notify'];
            _this.i18nResource = res;
        }));
    }
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.importOption.selectfiletype === true) {
            this.selectfiletype = this.importOption.selectfiletype;
            if (this.importOption.suffix !== undefined && this.importOption.suffix !== null) {
                this.valueField = FileTypeUtil.getFileTypeName(this.importOption.suffix.toUpperCase());
            }
        }
        /** @type {?} */
        var extendInfo = this.recordRule.extendInfo;
        if (!isNullOrUndefined(extendInfo)) {
            this.extendInfo = JSON.parse(extendInfo);
            this.ImportSecretRemindInfo = this.extendInfo['ImportSecretRemindInfo'];
            this.closeXLSX = this.extendInfo['closeXLSX'];
            if (this.closeXLSX === true) {
                this.fileListItems = [
                    { id: FileConst.xls, label: FileConst.xls },
                    { id: FileConst.xlsm, label: FileConst.xlsm },
                    { id: FileConst.et, label: FileConst.et }
                ];
            }
        }
        /** @type {?} */
        var securityLevels = this.recordRule.securityLevels;
        if (!isNullOrEmpty(securityLevels)) {
            this.enableSecurityLevelSelect = true;
            securityLevels.forEach((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                /** @type {?} */
                var level = {
                    value: e.name,
                    label: e.name
                };
                _this.securityLevelItems.push(level);
            }));
            this.securityLevelName = this.securityLevelItems[0].value;
        }
        this.currentRuleId = this.recordRule.ruleId;
        this.currentRuleName = this.recordRule.ruleName;
        this.valueField = FileTypeUtil.getFileTypeName(this.recordRule.fileType);
        if (this.valueField === '') {
            //未在当前可选文件的类型时，不显示选文件类型控件
            this.showfiletype = false;
        }
        this.currentRuleFileType = this.valueField;
        this.controlFileType();
        if (this.importOption.enableRuntimeCustom === true) {
            this.enableRuntimeCustom = true;
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.openSelectRule = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        this.loadingService.show();
        //过滤规则时用表单命令处配置的规则来过滤，因此用ruleId，而不是currentRuleId
        /** @type {?} */
        var url = '/api/runtime/dip/v1.0/dataIeRuleManage/filterRulesByRuleIdAndVoId';
        /** @type {?} */
        var body = {
            ruleId: this.ruleId,
            ruleType: 0,
            voId: this.importOption.voId,
            methodType: this.methodType,
            importChildNodeCode: this.importOption.importChildNodeCode,
            closeXlsx: this.closeXLSX
        };
        this.http.post(url, body).subscribe((/**
         * @param {?} RuleMgrs
         * @return {?}
         */
        function (RuleMgrs) {
            _this.loadingService.clearAll();
            if (RuleMgrs.length === 0) {
                _this.notify.info(_this.i18nResource['ruleselect_listempty']);
                return;
            }
            /** @type {?} */
            var compFactory = _this.resolver.resolveComponentFactory(RuleSelectComponent);
            /** @type {?} */
            var compRef = compFactory.create(_this.injector);
            compRef.instance.ruleId = _this.ruleId;
            compRef.instance.voId = _this.importOption.voId;
            compRef.instance.ruleType = 0;
            compRef.instance.RuleMgrsData = RuleMgrs;
            /** @type {?} */
            var modalConfig = {
                title: _this.rule_list,
                width: 950,
                height: 500,
                buttons: compRef.instance.modalFooter,
                showHeader: true,
                showMaxButton: false,
                showButtons: true
            };
            /** @type {?} */
            var dialog = _this.modalService.show(compRef, modalConfig);
            compRef.instance.closeModal.subscribe((/**
             * @return {?}
             */
            function () {
                dialog.close();
            }));
            compRef.instance.okModal.subscribe((/**
             * @param {?} RuleMgr
             * @return {?}
             */
            function (RuleMgr) {
                _this.currentRuleId = RuleMgr.id;
                _this.currentRuleName = RuleMgr.name;
                _this.valueField = FileTypeUtil.getFileTypeName(RuleMgr.fileType);
                _this.currentRuleFileType = _this.valueField;
                _this.controlFileType();
                dialog.close();
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.loadingService.clearAll();
            _this.notify.error(error.error.Message);
            console.log(error.error.Message);
        }));
    };
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.getFileExtension = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var suffix = null;
        switch (this.valueField) {
            case FileConst.xls:
                suffix = '.xls';
                break;
            case FileConst.xlsx:
                suffix = '.xlsx';
                break;
            case FileConst.xlsm:
                suffix = '.xlsm';
                break;
            case FileConst.et:
                suffix = '.et';
                break;
            case FileConst.xml:
                suffix = '.xml';
                break;
            case FileConst.pdf:
                suffix = '.pdf';
                break;
            case FileConst.csv:
                suffix = '.csv';
                break;
            default:
                break;
        }
        return suffix;
    };
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.canDownloadTemplate = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var suffix = this.getFileExtension();
        /** @type {?} */
        var canList = ['.xls', '.xlsx', '.xlsm', '.et'];
        if (canList.findIndex((/**
         * @param {?} t
         * @return {?}
         */
        function (t) { return t === suffix; })) < 0) {
            return false;
        }
        return true;
    };
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
    };
    // 选择文件后事件
    // 选择文件后事件
    /**
     * @param {?} event
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.selectedFileOnChange = 
    // 选择文件后事件
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var str = event.target.value;
        if (str === '') {
            return;
        }
        /** @type {?} */
        var index = str.lastIndexOf('\\');
        this.fileName = str.substring(index + 1);
        if (this.fileName.split(".").length === 2 && this.fileName.split(".")[1] === "jpg") {
            this.uploader.queue = [];
            this.notify.info(this.choose_truefile);
            return;
        }
        // console.log('队列中的文件' + this.uploader.queue[0]);
    };
    // 关闭窗口
    // 关闭窗口
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.Close = 
    // 关闭窗口
    /**
     * @return {?}
     */
    function () {
        this.needDestroy.emit();
    };
    // 选择文件事件
    // 选择文件事件
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.SelectFile = 
    // 选择文件事件
    /**
     * @return {?}
     */
    function () {
        this.fileUpload.nativeElement.click();
    };
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.fileTypeValueChange = /**
     * @return {?}
     */
    function () {
        if (this.controlFileType() === '.xlsx') {
            this.notify.info(this.select_xlsx_notify);
        }
    };
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.controlFileType = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var suffix = FileTypeUtil.getFileExtension(this.valueField);
        if (suffix !== null) {
            this.acceptFileType = suffix;
        }
        else {
            this.acceptFileType = '*';
        }
        return suffix;
    };
    // 下载模板
    // 下载模板
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.DownloadTemplate = 
    // 下载模板
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.loadingService.show();
        /** @type {?} */
        var suffix = null;
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        this.importOption['securityLevelName'] = this.securityLevelName;
        this.dataImportService.DowmloadTemplate4HandCraft(this.currentRuleId, this.importOption, suffix);
        // this.dataImportService.complete.unsubscribe();
        /** @type {?} */
        var unsubscriber = this.dataImportService.complete.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.loadingService.clearAll();
            if (data === '') {
                _this.notify.success(_this.download_template_ok);
                unsubscriber.unsubscribe();
            }
            else {
                _this.notify.error(_this.download_template_fail + data);
                unsubscriber.unsubscribe();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.loadingService.clearAll();
            _this.notify.error(error.message);
        }));
    };
    // 添加文件后事件
    // 添加文件后事件
    /**
     * @param {?} fileItem
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.afterAddFile = 
    // 添加文件后事件
    /**
     * @param {?} fileItem
     * @return {?}
     */
    function (fileItem) {
    };
    // 开始导入
    // 开始导入
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.Ok = 
    // 开始导入
    /**
     * @return {?}
     */
    function () {
        console.log('开始上传！');
        console.log(this.uploader.queue);
        /** @type {?} */
        var loadingConfig = {
            message: this.i18nResource['import_loading']
        };
        this.loadingService.show(loadingConfig);
        /** @type {?} */
        var len = this.uploader.queue.length;
        if (len === 0) {
            this.notify.info(this.choose_truefile);
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        var lastFileItem = this.uploader.queue[len - 1];
        /** @type {?} */
        var maxFileSize = this.recordRule.importFileMaxSize * 1024 * 1024;
        if (lastFileItem.file.size > maxFileSize) {
            this.notify.warning(this.i18nResource['importfile_toobig'] + this.recordRule.importFileMaxSize + 'MB');
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        var su = this.importOption.su;
        /** @type {?} */
        var fixedUrl = this.origin + '/api/runtime/dip/v1.0/AllSteps/dataimportvmaction?su=' + su;
        /** @type {?} */
        var headers = [{ name: 'su', value: su }];
        if (!isNullOrUndefined(this.extendInfo)) {
            /** @type {?} */
            var enableSecurityLevel = (/** @type {?} */ (this.extendInfo['enableSecurityLevel']));
            if (enableSecurityLevel) {
                headers.push({ name: 'enableSecurityLevel', value: enableSecurityLevel });
                /** @type {?} */
                var securityLevelPrefix = this.extendInfo['securityLevelPrefix'];
                /** @type {?} */
                var securityLevelSuffix = this.extendInfo['securityLevelSuffix'];
                headers.push({ name: 'securityLevelPrefix', value: encodeURIComponent(securityLevelPrefix) });
                headers.push({ name: 'securityLevelSuffix', value: encodeURIComponent(securityLevelSuffix) });
                headers.push({ name: 'securityLevelName', value: encodeURIComponent(this.securityLevelName) });
            }
        }
        /** @type {?} */
        var suffix = '';
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        /** @type {?} */
        var globalVar = '';
        if (!isNullOrUndefined(this.importOption['GlobalParam'])) {
            if (typeof (this.importOption['GlobalParam']) === 'object') {
                globalVar = JSON.stringify(this.importOption['GlobalParam']);
            }
            else {
                globalVar = this.importOption['GlobalParam'];
            }
        }
        /** @type {?} */
        var funcId = '';
        if (!isNullOrUndefined(this.importOption.funcId)) {
            funcId = this.importOption.funcId;
        }
        headers.push({ name: 'ruleId', value: this.currentRuleId });
        headers.push({ name: 'globalParam', value: globalVar });
        headers.push({ name: 'suffix', value: suffix });
        headers.push({ name: 'funcId', value: funcId });
        headers.push({ name: 'securityLevelName', value: this.securityLevelName });
        this.uploader.setOptions({
            url: fixedUrl,
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile',
            headers: headers
        });
        this.uploader.uploadItem(lastFileItem);
    };
    // 取消事件
    // 取消事件
    /**
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.Cancel = 
    // 取消事件
    /**
     * @return {?}
     */
    function () {
        this.needDestroy.emit();
    };
    // 上传失败后方法
    // 上传失败后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.ErrorLog = 
    // 上传失败后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    function (item, response, status, headers) {
        this.loadingService.clearAll();
        try {
            /** @type {?} */
            var temRes = JSON.parse(response);
            this.msgService.error(this.upload_fail + temRes.message);
        }
        catch (_a) {
            this.msgService.error(this.upload_fail + response);
        }
        this.Close();
        /** @type {?} */
        var len = this.uploader.queue.length;
        if (len > 0) {
            this.uploader.queue.splice(0, 1);
        }
    };
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.Import = /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    function (item, response, status, headers) {
        switch (this.methodType) {
            case MethodType.CommonImport:
                this.DataImportById(item, response, status, headers);
                break;
            case MethodType.ImportSubTableDetail:
                // this.ImportSubTable(item, response, status, headers, suffix);
                break;
        }
    };
    // 显示校验结果
    // 显示校验结果
    /**
     * @private
     * @param {?} commonParams
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.ShowValidatedResult = 
    // 显示校验结果
    /**
     * @private
     * @param {?} commonParams
     * @return {?}
     */
    function (commonParams) {
        var _this = this;
        /** @type {?} */
        var importResult = commonParams.importResult;
        /** @type {?} */
        var loadingParam = commonParams.loadingParam;
        if (importResult.validatedResults && importResult.validatedResults.length > 0) {
            loadingParam.loadingService.clearAll();
            /** @type {?} */
            var compFactory = this.resolver.resolveComponentFactory(ValidateFormComponent);
            /** @type {?} */
            var cmpRef = compFactory.create(this.injector);
            cmpRef.instance.validateResult = importResult.validatedResults;
            cmpRef.instance.su = commonParams.su;
            cmpRef.instance.i18nResource = commonParams.i18nResource;
            cmpRef.instance.loadingParam = loadingParam;
            /** @type {?} */
            var validateModalConfig = {
                title: this.i18nResource['validate_result_show'],
                width: 950,
                height: 550,
                buttons: cmpRef.instance.modalFooter,
                showHeader: true,
                showMaxButton: false,
                showButtons: true
            };
            /** @type {?} */
            var dialog_1 = this.modalService.show(cmpRef, validateModalConfig);
            //0代表按钮中止或X点击；1代表按钮继续
            /** @type {?} */
            var closed_1 = 0;
            dialog_1.dialog.instance.closed.subscribe((/**
             * @return {?}
             */
            function () {
                if (closed_1 === 0) {
                    _this.notify.info(_this.i18nResource['after_validate_suspend']);
                    _this.needDestroy.emit();
                }
            }));
            cmpRef.instance.closeModal.subscribe((/**
             * @return {?}
             */
            function () {
                closed_1 = 0;
                dialog_1.close();
            }));
            cmpRef.instance.okModal.subscribe((/**
             * @param {?} validatedInfoList
             * @return {?}
             */
            function (validatedInfoList) {
                closed_1 = 1;
                dialog_1.close();
                loadingParam.loadingService.show(loadingParam.loadingConfig);
                commonParams.importParam['validatedInfoList'] = validatedInfoList;
                //todo
                // this.Import4HandCraft(commonParams);
            }));
        }
    };
    // 上传成功后方法
    // 上传成功后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    ImportDialogHandcraftComponent.prototype.DataImportById = 
    // 上传成功后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    function (item, response, status, headers) {
        console.log(status);
        this.loadingService.clearAll();
        /** @type {?} */
        var importResult = (/** @type {?} */ (JSON.parse(response)));
        /** @type {?} */
        var loadingConfig = {
            message: this.i18nResource['import_loading']
        };
        /** @type {?} */
        var loadingParam = {
            loadingService: this.loadingService,
            loadingConfig: loadingConfig
        };
        /** @type {?} */
        var commonParams = new CommonParams();
        commonParams.loadingParam = loadingParam;
        commonParams.i18nResource = this.i18nResource;
        commonParams.su = this.importOption.su;
        commonParams.importResult = importResult;
        if (importResult.succeed === true) {
            if (importResult.formData && importResult.formData.length > 0) {
                if (typeof (importResult.formData[0]) !== 'object') {
                    /** @type {?} */
                    var formDataObjArray_1 = [];
                    importResult.formData.forEach((/**
                     * @param {?} e
                     * @return {?}
                     */
                    function (e) {
                        formDataObjArray_1.push(JSON.parse(e));
                    }));
                    importResult.formData = formDataObjArray_1;
                }
            }
            this.needDestroy.emit(importResult);
            //导入成功如果展示校验结果，只能是校验策略是忽略，所有校验结果都是error
            this.ShowValidatedResult(commonParams);
        }
        else {
            if (importResult.validatedResults && importResult.validatedResults.length > 0) {
                this.ShowValidatedResult(commonParams);
            }
            else {
                /** @type {?} */
                var errorlevel = importResult.errorLevel;
                if (errorlevel === 'Info') {
                    this.notify.info(importResult.message);
                }
                else if (errorlevel === 'Warning') {
                    this.msgService.warning(importResult.message);
                }
                else {
                    this.msgService.error(this.import_fail + importResult.message);
                }
                this.needDestroy.emit(importResult);
            }
        }
    };
    ImportDialogHandcraftComponent.decorators = [
        { type: Component, args: [{
                    selector: 'hlo-import-dialog-handcraft',
                    template: "<!-- <div class=\"container\">\n    <div region=\"south\" class=\"south mgleft\">\n        <table>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n                <td>\n                    <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectrule\">\n                <td class=\"mkwidth\">\n                    <label for=\"f_select_rule\">{{rule_list}}</label>\n                </td>\n                <td>\n                    <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\" [enableClear]=\"false\"\n                        [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\n                    </input-group>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectrule === false\">\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectfiletype\">\n                <td class=\"mkwidth\">\n                    <label for=\"f_select_fileType\">{{file_type}}</label>\n                </td>\n                <td>\n                    <farris-combo-list id=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\" [textField]=\"'label'\" [data]=\"fileListItems\"\n                        (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\n                    <i class=\"material-icons\" style=\"color: lightblue;\">file_download</i>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label for=\"f_upload\">{{import_file}}</label>\n                </td>\n                <td>\n                    <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\" [accept]=\"acceptFileType\"\n                        (change)=\"selectedFileOnChange($event)\" />\n                    <input type=\"text\" id=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\">\n                    <i class=\"material-icons\" style=\"color: lightblue;\">create_new_folder</i>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div> -->\n\n<form class=\"px-3 px-md-4 farris-form d-flex flex-wrap\">\n  <div class=\"col-12\" style=\"margin-top: 67px\">\n    <div *ngIf=\"enableRuntimeCustom === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\">\n        <label class=\" col-form-label\">\n          <span class=\"farris-label-text\">{{rule_list}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\"\n                       [enableClear]=\"false\"\n                       [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\n          </input-group>\n        </div>\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"openSelectRule($event)\">filter_none</i> -->\n      </div>\n    </div>\n    <div *ngIf=\"enableRuntimeCustom === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <span>&nbsp;</span>\n    </div>\n    <div *ngIf=\"showfiletype === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <span>&nbsp;</span>\n    </div>\n    <div *ngIf=\"showfiletype === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\" style=\"width: 450px\">\n        <label class=\"col-form-label\">\n          <span class=\"farris-label-text\">{{file_type}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <farris-combo-list id=\"f_select_fileType\" name=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\"\n                             [textField]=\"'label'\"\n                             [readonly]=\"canDownloadTemplate() === false\" [editable]=\"false\" [enableClear]=\"false\"\n                             [data]=\"fileListItems\" (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\n        </div>\n        <span>&nbsp;</span>\n        <button [disabled]=\"canDownloadTemplate() === false\" class=\"btn btn-secondary mr-2\" type=\"button\"\n                (click)=\"DownloadTemplate()\">{{download_template}}</button>\n        <!-- <i *ngIf=\"canDownloadTemplate() === true\" class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"DownloadTemplate()\">file_download</i> -->\n        <!-- <i *ngIf=\"canDownloadTemplate() === false\" class=\"material-icons\" style=\"color: white;\">file_download</i> -->\n        <!-- <span *ngIf=\"enableRuntimeCustom === true\"  class=\"f-icon f-icon-custom\" style=\"color: #388FFF;cursor: pointer;\"></span>\n        <span *ngIf=\"enableRuntimeCustom === false\"  class=\"f-icon f-icon-custom\" style=\"color:white\"></span> -->\n        <span class=\"f-icon f-icon-custom\" style=\"color:white\"></span>\n\n      </div>\n    </div>\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\">\n        <label class=\" col-form-label\">\n          <span class=\"farris-label-text\">{{import_file}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\"\n                 [accept]=\"acceptFileType\"\n                 (change)=\"selectedFileOnChange($event)\"/>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"f_upload\" name=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\"\n                   [(ngModel)]=\"fileName\"\n                   [placeholder]=\"import_placeholder\">\n            <span class=\"input-group-btn\">\n                            <button class=\"btn btn-primary\" type=\"button\"\n                                    (click)=\"SelectFile()\">{{choose_file}}</button>\n                        </span>\n          </div>\n          <!-- <input-group id=\"f_upload\" name=\"f_upload\" [editable]=\"false\" [enableClear]=\"false\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\"></input-group> -->\n        </div>\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"SelectFile()\">attachment</i> -->\n      </div>\n    </div>\n    <div *ngIf=\"enableSecurityLevelSelect\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\" style=\"width: 340px\">\n        <label class=\"col-form-label\">\n          <span class=\"farris-label-text\">{{i18nResource.security_level}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <farris-combo-list name=\"f_select_securitylevel\"  [(ngModel)]=\"securityLevelName\" [idField]=\"'value'\"\n                             [valueField]=\"'value'\" [textField]=\"'label'\" [editable]=\"false\" [enableClear]=\"false\" [data]=\"securityLevelItems\"></farris-combo-list>\n        </div>\n      </div>\n    </div>\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\n      <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\n    </div>\n\n\n  </div>\n</form>\n\n\n<ng-template #selectFooter>\n  <!-- <img class=\"setting\" src=\"/platform/common/web/@gsp-dip/img/setting.svg\" alt=\"\u8BBE\u7F6E\" (click)=\"clickSetting()\" /> -->\n\n  <!-- <button *ngIf=\"enableTemplate\" type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"DownloadTemplate()\">{{download_template}}</button> -->\n  <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"Cancel()\">{{ie_cancel}}</button>\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"Ok()\">{{ie_ok}}</button>\n</ng-template>\n",
                    styles: [".barmanager{position:absolute;bottom:0;height:50px;right:30px;padding-left:50px}.top{top:100px;position:relative}table{width:100%}.mkwidth{width:75px;line-height:28px}.longlen{width:400px}.setting{position:absolute;top:286px;right:550px;width:16px;height:16px;-webkit-transition:.3s;transition:.3s;cursor:pointer;opacity:.2;z-index:2}.setting:hover{-webkit-transform:rotate(100deg);transform:rotate(100deg)}.downloadicon,.fileicon{position:absolute;width:26px;height:26px}"]
                }] }
    ];
    /** @nocollapse */
    ImportDialogHandcraftComponent.ctorParameters = function () { return [
        { type: DataImportService },
        { type: NotifyService },
        { type: LoadingService },
        { type: HttpClient },
        { type: Injector },
        { type: BsModalService },
        { type: MessagerService },
        { type: ComponentFactoryResolver }
    ]; };
    ImportDialogHandcraftComponent.propDecorators = {
        modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
        ruleId: [{ type: Input }],
        importOption: [{ type: Input }],
        methodType: [{ type: Input }],
        subject: [{ type: Input }],
        recordRule: [{ type: Input }],
        fileUpload: [{ type: ViewChild, args: ['fileUpload',] }],
        needDestroy: [{ type: Output }]
    };
    return ImportDialogHandcraftComponent;
}());
export { ImportDialogHandcraftComponent };
if (false) {
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.modalFooter;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ruleId;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.importOption;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.methodType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.subject;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.selectrule;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.recordRule;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.selectfiletype;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.extendInfo;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleId;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleFileType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableTemplate;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.closeXLSX;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableSecurityLevelSelect;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.securityLevelName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ImportSecretRemindInfo;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.acceptFileType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileUpload;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.origin;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.uploader;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.needDestroy;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.showfiletype;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableRuntimeCustom;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.valueField;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_file;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.choose_file;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_placeholder;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.file_type;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ie_cancel;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ie_ok;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.choose_truefile;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template_ok;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.upload_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_success;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_form_success;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.rule_list;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.select_xlsx_notify;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.i18nResource;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.lookupIcon;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileListItems;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.securityLevelItems;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.dataImportService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.resolver;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0LWRpYWxvZy1oYW5kY3JhZnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1kaXAvZGF0YS1pbXAtZXhwLyIsInNvdXJjZXMiOlsibGliL2ltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0L2ltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCx3QkFBd0IsRUFDeEIsVUFBVSxFQUNWLFlBQVksRUFDWixRQUFRLEVBQ1IsS0FBSyxFQUVMLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxxREFBcUQsQ0FBQztBQUlqRixPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSw4Q0FBOEMsQ0FBQztBQUMvRSxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ2xELE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMxRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFDTCxXQUFXLEVBQ1gsWUFBWSxFQUVaLGFBQWEsRUFDYixpQkFBaUIsRUFDbEIsTUFBTSw4QkFBOEIsQ0FBQztBQUN0QyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFDaEQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHNDQUFzQyxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDbkQsT0FBTyxFQUFDLFlB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M0IsbURBQWtCOztJQUNsQiwyREFBMEI7O0lBQzFCLG1EQUFrQjs7SUFDbEIsK0NBQWM7O0lBQ2QseURBQXdCOztJQUN4Qiw4REFBNkI7O0lBQzdCLGdFQUErQjs7SUFDL0IscURBQW9COztJQUNwQix3REFBdUI7O0lBQ3ZCLDZEQUE0Qjs7SUFDNUIscURBQW9COztJQUNwQixtREFBa0I7O0lBQ2xCLDREQUEyQjs7SUFDM0Isc0RBQWtCOztJQXFDbEIsb0RBQXFEOztJQUVyRCx1REFRRTs7SUFDRiw0REFBd0I7Ozs7O0lBN0N0QiwyREFBNEM7Ozs7O0lBQzVDLGdEQUE2Qjs7Ozs7SUFDN0Isd0RBQXNDOzs7OztJQUN0Qyw4Q0FBd0I7Ozs7O0lBQ3hCLGtEQUEwQjs7Ozs7SUFDMUIsc0RBQW9DOzs7OztJQUNwQyxvREFBbUM7Ozs7O0lBQ25DLGtEQUEwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbmplY3RvcixcclxuICBJbnB1dCxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT3V0cHV0LFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIFZpZXdDaGlsZFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0ZpbGVVcGxvYWRlcn0gZnJvbSAnLi4vc2VydmljZS9VcGxvYWRlclNlcnZpY2UvRmlsZVVwbG9hZC9maWxlLXVwbG9hZGVyJztcclxuaW1wb3J0IHtGaWxlSXRlbX0gZnJvbSAnLi4vc2VydmljZS9VcGxvYWRlclNlcnZpY2UvRmlsZVVwbG9hZC9maWxlLWl0ZW0nO1xyXG5pbXBvcnQge1BhcnNlZFJlc3BvbnNlSGVhZGVyc30gZnJvbSAnLi4vc2VydmljZS9VcGxvYWRlclNlcnZpY2UvRmlsZVVwbG9hZC9wYXJzZWQtcmVzcG9uc2UtaGVhZGVycyc7XHJcblxyXG5pbXBvcnQge0RhdGFJbXBvcnRTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlL0RhdGFJRVNlcnZpY2UvZGF0YS1pbXBvcnQuc2VydmljZSc7XHJcbmltcG9ydCB7Tm90aWZ5U2VydmljZX0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQge0xvYWRpbmdTZXJ2aWNlfSBmcm9tICdAZmFycmlzL3VpLWxvYWRpbmcnO1xyXG5pbXBvcnQge01ldGhvZFR5cGV9IGZyb20gJy4uL21vZGVsL0RhdGFJRVR5cGUvTWV0aG9kVHlwZSc7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7XHJcbiAgRGF0YUlFVXRpbHMsXHJcbiAgRmlsZVR5cGVVdGlsLFxyXG4gIGdldFF1ZXJ5U3RyaW5nLFxyXG4gIGlzTnVsbE9yRW1wdHksXHJcbiAgaXNOdWxsT3JVbmRlZmluZWRcclxufSBmcm9tICcuLi9zZXJ2aWNlL1V0aWxzL0RhdGFJRVV0aWxzJztcclxuaW1wb3J0IHtIdHRwQ2xpZW50fSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7QnNNb2RhbFNlcnZpY2V9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQge1J1bGVTZWxlY3RDb21wb25lbnR9IGZyb20gJy4uL3J1bGUtc2VsZWN0L3J1bGUtc2VsZWN0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7TWVzc2FnZXJTZXJ2aWNlfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHtGaWxlQ29uc3R9IGZyb20gJy4uL21vZGVsL3V0aWxzL0ZpbGVDb25zdCc7XHJcbmltcG9ydCB7Q29tbW9uUGFyYW1zfSBmcm9tIFwiLi4vc2VydmljZS9FbnRpdHkvQ29tbW9uUGFyYW1zXCI7XHJcbmltcG9ydCB7RGF0YUlFUmVzdWx0fSBmcm9tIFwiLi4vc2VydmljZS9FbnRpdHkvRGF0YUlFUmVzdWx0XCI7XHJcbmltcG9ydCB7VmFsaWRhdGVGb3JtQ29tcG9uZW50fSBmcm9tIFwiLi4vdmFsaWRhdGUtZm9ybS92YWxpZGF0ZS1mb3JtLmNvbXBvbmVudFwiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdobG8taW1wb3J0LWRpYWxvZy1oYW5kY3JhZnQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9pbXBvcnQtZGlhbG9nLWhhbmRjcmFmdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vaW1wb3J0LWRpYWxvZy1oYW5kY3JhZnQuY29tcG9uZW50LnNjc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgSW1wb3J0RGlhbG9nSGFuZGNyYWZ0Q29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcclxuICBAVmlld0NoaWxkKCdzZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICAvLyDop4TliJlJRCDor6VpZOS4uuihqOWNleS4iumFjee9rueahOinhOWImWlkXHJcbiAgQElucHV0KClcclxuICBydWxlSWQgPSAnJztcclxuICAvLyDov4fmu6TmnaHku7ZcclxuICBASW5wdXQoKVxyXG4gIGltcG9ydE9wdGlvbjogYW55ID0gbnVsbDtcclxuICBASW5wdXQoKVxyXG4gIG1ldGhvZFR5cGU6IE1ldGhvZFR5cGU7XHJcbiAgQElucHV0KClcclxuICBzdWJqZWN0OiBTdWJqZWN0PGFueT4gPSBudWxsO1xyXG4gIHNlbGVjdHJ1bGUgPSBmYWxzZTtcclxuICAvLyDorrDlvZXnmoTop4TliJlcclxuICBASW5wdXQoKVxyXG4gIHJlY29yZFJ1bGUgPSBudWxsO1xyXG4gIHNlbGVjdGZpbGV0eXBlID0gbnVsbDtcclxuICBleHRlbmRJbmZvOiBhbnk7XHJcbiAgY3VycmVudFJ1bGVOYW1lID0gJyc7XHJcbiAgY3VycmVudFJ1bGVJZCA9ICcnO1xyXG4gIGN1cnJlbnRSdWxlRmlsZVR5cGUgPSAnJztcclxuICBlbmFibGVUZW1wbGF0ZSA9IHRydWU7XHJcbiAgY2xvc2VYTFNYID0gZmFsc2U7XHJcbiAgZW5hYmxlU2VjdXJpdHlMZXZlbFNlbGVjdCA9IGZhbHNlO1xyXG4gIHNlY3VyaXR5TGV2ZWxOYW1lID0gJyc7XHJcblxyXG4gIEltcG9ydFNlY3JldFJlbWluZEluZm8gPSAnJztcclxuXHJcbiAgYWNjZXB0RmlsZVR5cGUgPSAnLmNzdiwueGxzbSwueGxzeCwueGxzLC5wZGYsLnhtbCwuZXQnO1xyXG4gIC8vIOaWh+S7tuWQjeensFxyXG4gIGZpbGVOYW1lID0gJyc7XHJcbiAgLy8gICBsb2FkaW5nQ29tcDogTG9hZGluZ0NvbXBvbmVudCA9IG51bGw7XHJcbiAgQFZpZXdDaGlsZCgnZmlsZVVwbG9hZCcpXHJcbiAgZmlsZVVwbG9hZDogRWxlbWVudFJlZjtcclxuICBwcml2YXRlIG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XHJcbiAgdXBsb2FkZXIgPSBuZXcgRmlsZVVwbG9hZGVyKHtcclxuICAgIHVybDogJycsXHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGF1dG9VcGxvYWQ6IGZhbHNlLFxyXG4gICAgaXRlbUFsaWFzOiAndXBsb2FkZWRmaWxlJ1xyXG4gIH0pO1xyXG4gIC8vIOaOp+WItkRlc3Ryb3nooajljZXkuK3nmoTovpPlhaXnu4Tku7ZcclxuICBAT3V0cHV0KClcclxuICBuZWVkRGVzdHJveSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgc2hvd2ZpbGV0eXBlID0gdHJ1ZTtcclxuICBlbmFibGVSdW50aW1lQ3VzdG9tID0gZmFsc2U7XHJcbiAgdmFsdWVGaWVsZDogYW55ID0gbnVsbDtcclxuXHJcbiAgLy/lm73pmYXljJbnm7jlhbPlj5jph49cclxuICBpbXBvcnRfZmlsZTogc3RyaW5nO1xyXG4gIGNob29zZV9maWxlOiBzdHJpbmc7XHJcbiAgaW1wb3J0X3BsYWNlaG9sZGVyOiBzdHJpbmc7XHJcbiAgZmlsZV90eXBlOiBzdHJpbmc7XHJcbiAgZG93bmxvYWRfdGVtcGxhdGU6IHN0cmluZztcclxuICBpZV9jYW5jZWw6IHN0cmluZztcclxuICBpZV9vazogc3RyaW5nO1xyXG4gIGNob29zZV90cnVlZmlsZTogc3RyaW5nO1xyXG4gIGRvd25sb2FkX3RlbXBsYXRlX29rOiBzdHJpbmc7XHJcbiAgZG93bmxvYWRfdGVtcGxhdGVfZmFpbDogc3RyaW5nO1xyXG4gIHVwbG9hZF9mYWlsOiBzdHJpbmc7XHJcbiAgaW1wb3J0X3N1Y2Nlc3M6IHN0cmluZztcclxuICBpbXBvcnRfZm9ybV9zdWNjZXNzOiBzdHJpbmc7XHJcbiAgaW1wb3J0X2ZhaWw6IHN0cmluZztcclxuICBydWxlX2xpc3Q6IHN0cmluZztcclxuICBzZWxlY3RfeGxzeF9ub3RpZnk6IHN0cmluZztcclxuICBpMThuUmVzb3VyY2U6IGFueTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGRhdGFJbXBvcnRTZXJ2aWNlOiBEYXRhSW1wb3J0U2VydmljZSxcclxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBsb2FkaW5nU2VydmljZTogTG9hZGluZ1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxcclxuICAgIHByaXZhdGUgbXNnU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyXHJcbiAgKSB7XHJcbiAgICB0aGlzLnVwbG9hZGVyLm9uU3VjY2Vzc0l0ZW0gPSB0aGlzLkltcG9ydC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy51cGxvYWRlci5vbkVycm9ySXRlbSA9IHRoaXMuRXJyb3JMb2cuYmluZCh0aGlzKTtcclxuICAgIHRoaXMudXBsb2FkZXIub25BZnRlckFkZGluZ0ZpbGUgPSB0aGlzLmFmdGVyQWRkRmlsZTtcclxuICAgIERhdGFJRVV0aWxzLmdldFRyYW5zbGF0ZVZhbHVlKGh0dHApLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICB0aGlzLmltcG9ydF9maWxlID0gcmVzWydpbXBvcnRfZmlsZSddO1xyXG4gICAgICB0aGlzLmNob29zZV9maWxlID0gcmVzWydjaG9vc2VfZmlsZSddO1xyXG4gICAgICB0aGlzLmZpbGVfdHlwZSA9IHJlc1snZmlsZV90eXBlJ107XHJcbiAgICAgIHRoaXMuaW1wb3J0X3BsYWNlaG9sZGVyID0gcmVzWydpbXBvcnRfcGxhY2Vob2xkZXInXTtcclxuICAgICAgdGhpcy5kb3dubG9hZF90ZW1wbGF0ZSA9IHJlc1snZG93bmxvYWRfdGVtcGxhdGUnXTtcclxuICAgICAgdGhpcy5pZV9jYW5jZWwgPSByZXNbJ2llX2NhbmNlbCddO1xyXG4gICAgICB0aGlzLmllX29rID0gcmVzWydpZV9vayddO1xyXG4gICAgICB0aGlzLmNob29zZV90cnVlZmlsZSA9IHJlc1snY2hvb3NlX3RydWVmaWxlJ107XHJcbiAgICAgIHRoaXMuZG93bmxvYWRfdGVtcGxhdGVfb2sgPSByZXNbJ2Rvd25sb2FkX3RlbXBsYXRlX29rJ107XHJcbiAgICAgIHRoaXMuZG93bmxvYWRfdGVtcGxhdGVfZmFpbCA9IHJlc1snZG93bmxvYWRfdGVtcGxhdGVfZmFpbCddO1xyXG4gICAgICB0aGlzLnVwbG9hZF9mYWlsID0gcmVzWyd1cGxvYWRfZmFpbCddO1xyXG4gICAgICB0aGlzLmltcG9ydF9zdWNjZXNzID0gcmVzWydpbXBvcnRfc3VjY2VzcyddO1xyXG4gICAgICB0aGlzLmltcG9ydF9mb3JtX3N1Y2Nlc3MgPSByZXNbJ2ltcG9ydF9mb3JtX3N1Y2Nlc3MnXTtcclxuICAgICAgdGhpcy5pbXBvcnRfZmFpbCA9IHJlc1snaW1wb3J0X2ZhaWwnXTtcclxuICAgICAgdGhpcy5ydWxlX2xpc3QgPSByZXNbJ3J1bGVfbGlzdCddO1xyXG4gICAgICB0aGlzLnNlbGVjdF94bHN4X25vdGlmeSA9IHJlc1snc2VsZWN0X3hsc3hfbm90aWZ5J107XHJcbiAgICAgIHRoaXMuaTE4blJlc291cmNlID0gcmVzO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgbG9va3VwSWNvbiA9ICc8aSBjbGFzcz1cImYtaWNvbiBmLWljb24td2luZG93c1wiPjwvaT4nO1xyXG5cclxuICBwdWJsaWMgZmlsZUxpc3RJdGVtcyA9IFtcclxuICAgIHtpZDogRmlsZUNvbnN0LnhscywgbGFiZWw6IEZpbGVDb25zdC54bHN9LFxyXG4gICAge2lkOiBGaWxlQ29uc3QueGxzeCwgbGFiZWw6IEZpbGVDb25zdC54bHN4fSxcclxuICAgIHtpZDogRmlsZUNvbnN0Lnhsc20sIGxhYmVsOiBGaWxlQ29uc3QueGxzbX0sXHJcbiAgICB7aWQ6IEZpbGVDb25zdC5ldCwgbGFiZWw6IEZpbGVDb25zdC5ldH0sXHJcbiAgICAvLyB7IGlkOiBGaWxlQ29uc3QuY3N2LCBsYWJlbDogRmlsZUNvbnN0LmNzdiB9LFxyXG4gICAgLy8geyBpZDogRmlsZUNvbnN0LnBkZiwgbGFiZWw6IEZpbGVDb25zdC5wZGYgfSxcclxuICAgIC8vIHsgaWQ6IEZpbGVDb25zdC54bWwsIGxhYmxlOiBGaWxlQ29uc3QueG1sIH1cclxuICBdO1xyXG4gIHNlY3VyaXR5TGV2ZWxJdGVtcyA9IFtdO1xyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmltcG9ydE9wdGlvbi5zZWxlY3RmaWxldHlwZSA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGZpbGV0eXBlID0gdGhpcy5pbXBvcnRPcHRpb24uc2VsZWN0ZmlsZXR5cGU7XHJcbiAgICAgIGlmICh0aGlzLmltcG9ydE9wdGlvbi5zdWZmaXggIT09IHVuZGVmaW5lZCAmJiB0aGlzLmltcG9ydE9wdGlvbi5zdWZmaXggIT09IG51bGwpIHtcclxuICAgICAgICB0aGlzLnZhbHVlRmllbGQgPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZVR5cGVOYW1lKHRoaXMuaW1wb3J0T3B0aW9uLnN1ZmZpeC50b1VwcGVyQ2FzZSgpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGV4dGVuZEluZm8gPSB0aGlzLnJlY29yZFJ1bGUuZXh0ZW5kSW5mbztcclxuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoZXh0ZW5kSW5mbykpIHtcclxuICAgICAgdGhpcy5leHRlbmRJbmZvID0gSlNPTi5wYXJzZShleHRlbmRJbmZvKTtcclxuICAgICAgdGhpcy5JbXBvcnRTZWNyZXRSZW1pbmRJbmZvID0gdGhpcy5leHRlbmRJbmZvWydJbXBvcnRTZWNyZXRSZW1pbmRJbmZvJ107XHJcbiAgICAgIHRoaXMuY2xvc2VYTFNYID0gdGhpcy5leHRlbmRJbmZvWydjbG9zZVhMU1gnXTtcclxuICAgICAgaWYgKHRoaXMuY2xvc2VYTFNYID09PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5maWxlTGlzdEl0ZW1zID0gW1xyXG4gICAgICAgICAge2lkOiBGaWxlQ29uc3QueGxzLCBsYWJlbDogRmlsZUNvbnN0Lnhsc30sXHJcbiAgICAgICAgICB7aWQ6IEZpbGVDb25zdC54bHNtLCBsYWJlbDogRmlsZUNvbnN0Lnhsc219LFxyXG4gICAgICAgICAge2lkOiBGaWxlQ29uc3QuZXQsIGxhYmVsOiBGaWxlQ29uc3QuZXR9XHJcbiAgICAgICAgXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VjdXJpdHlMZXZlbHMgPSB0aGlzLnJlY29yZFJ1bGUuc2VjdXJpdHlMZXZlbHM7XHJcbiAgICBpZiAoIWlzTnVsbE9yRW1wdHkoc2VjdXJpdHlMZXZlbHMpKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlU2VjdXJpdHlMZXZlbFNlbGVjdCA9IHRydWU7XHJcbiAgICAgIHNlY3VyaXR5TGV2ZWxzLmZvckVhY2goZSA9PiB7XHJcbiAgICAgICAgY29uc3QgbGV2ZWwgPSB7XHJcbiAgICAgICAgICB2YWx1ZTogZS5uYW1lLFxyXG4gICAgICAgICAgbGFiZWw6IGUubmFtZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZWN1cml0eUxldmVsSXRlbXMucHVzaChsZXZlbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnNlY3VyaXR5TGV2ZWxOYW1lID0gdGhpcy5zZWN1cml0eUxldmVsSXRlbXNbMF0udmFsdWU7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnRSdWxlSWQgPSB0aGlzLnJlY29yZFJ1bGUucnVsZUlkO1xyXG4gICAgdGhpcy5jdXJyZW50UnVsZU5hbWUgPSB0aGlzLnJlY29yZFJ1bGUucnVsZU5hbWU7XHJcbiAgICB0aGlzLnZhbHVlRmllbGQgPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZVR5cGVOYW1lKHRoaXMucmVjb3JkUnVsZS5maWxlVHlwZSk7XHJcbiAgICBpZiAodGhpcy52YWx1ZUZpZWxkID09PSAnJykge1xyXG4gICAgICAvL+acquWcqOW9k+WJjeWPr+mAieaWh+S7tueahOexu+Wei+aXtu+8jOS4jeaYvuekuumAieaWh+S7tuexu+Wei+aOp+S7tlxyXG4gICAgICB0aGlzLnNob3dmaWxldHlwZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50UnVsZUZpbGVUeXBlID0gdGhpcy52YWx1ZUZpZWxkO1xyXG4gICAgdGhpcy5jb250cm9sRmlsZVR5cGUoKTtcclxuICAgIGlmICh0aGlzLmltcG9ydE9wdGlvbi5lbmFibGVSdW50aW1lQ3VzdG9tID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlUnVudGltZUN1c3RvbSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgb3BlblNlbGVjdFJ1bGUoJGV2ZW50KSB7XHJcbiAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLnNob3coKTtcclxuICAgIC8v6L+H5ruk6KeE5YiZ5pe255So6KGo5Y2V5ZG95Luk5aSE6YWN572u55qE6KeE5YiZ5p2l6L+H5ruk77yM5Zug5q2k55SocnVsZUlk77yM6ICM5LiN5pivY3VycmVudFJ1bGVJZFxyXG4gICAgY29uc3QgdXJsID0gJy9hcGkvcnVudGltZS9kaXAvdjEuMC9kYXRhSWVSdWxlTWFuYWdlL2ZpbHRlclJ1bGVzQnlSdWxlSWRBbmRWb0lkJztcclxuICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgIHJ1bGVJZDogdGhpcy5ydWxlSWQsXHJcbiAgICAgIHJ1bGVUeXBlOiAwLFxyXG4gICAgICB2b0lkOiB0aGlzLmltcG9ydE9wdGlvbi52b0lkLFxyXG4gICAgICBtZXRob2RUeXBlOiB0aGlzLm1ldGhvZFR5cGUsXHJcbiAgICAgIGltcG9ydENoaWxkTm9kZUNvZGU6IHRoaXMuaW1wb3J0T3B0aW9uLmltcG9ydENoaWxkTm9kZUNvZGUsXHJcbiAgICAgIGNsb3NlWGxzeDogdGhpcy5jbG9zZVhMU1hcclxuICAgIH07XHJcbiAgICB0aGlzLmh0dHAucG9zdCh1cmwsIGJvZHkpLnN1YnNjcmliZSgoUnVsZU1ncnM6IGFueSkgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIGlmIChSdWxlTWdycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuaTE4blJlc291cmNlWydydWxlc2VsZWN0X2xpc3RlbXB0eSddKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFJ1bGVTZWxlY3RDb21wb25lbnQpO1xyXG4gICAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICBjb21wUmVmLmluc3RhbmNlLnJ1bGVJZCA9IHRoaXMucnVsZUlkO1xyXG4gICAgICBjb21wUmVmLmluc3RhbmNlLnZvSWQgPSB0aGlzLmltcG9ydE9wdGlvbi52b0lkO1xyXG4gICAgICBjb21wUmVmLmluc3RhbmNlLnJ1bGVUeXBlID0gMDtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5SdWxlTWdyc0RhdGEgPSBSdWxlTWdycztcclxuICAgICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMucnVsZV9saXN0LFxyXG4gICAgICAgIHdpZHRoOiA5NTAsXHJcbiAgICAgICAgaGVpZ2h0OiA1MDAsXHJcbiAgICAgICAgYnV0dG9uczogY29tcFJlZi5pbnN0YW5jZS5tb2RhbEZvb3RlcixcclxuICAgICAgICBzaG93SGVhZGVyOiB0cnVlLFxyXG4gICAgICAgIHNob3dNYXhCdXR0b246IGZhbHNlLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gICAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlTW9kYWwuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5va01vZGFsLnN1YnNjcmliZShSdWxlTWdyID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRSdWxlSWQgPSBSdWxlTWdyLmlkO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJ1bGVOYW1lID0gUnVsZU1nci5uYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWVGaWVsZCA9IEZpbGVUeXBlVXRpbC5nZXRGaWxlVHlwZU5hbWUoUnVsZU1nci5maWxlVHlwZSk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UnVsZUZpbGVUeXBlID0gdGhpcy52YWx1ZUZpZWxkO1xyXG4gICAgICAgIHRoaXMuY29udHJvbEZpbGVUeXBlKCk7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIHRoaXMubm90aWZ5LmVycm9yKGVycm9yLmVycm9yLk1lc3NhZ2UpO1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5lcnJvci5NZXNzYWdlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldEZpbGVFeHRlbnNpb24oKTogYW55IHtcclxuICAgIGxldCBzdWZmaXggPSBudWxsO1xyXG4gICAgc3dpdGNoICh0aGlzLnZhbHVlRmllbGQpIHtcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueGxzOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueGxzJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueGxzeDpcclxuICAgICAgICBzdWZmaXggPSAnLnhsc3gnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bHNtOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueGxzbSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LmV0OlxyXG4gICAgICAgIHN1ZmZpeCA9ICcuZXQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bWw6XHJcbiAgICAgICAgc3VmZml4ID0gJy54bWwnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC5wZGY6XHJcbiAgICAgICAgc3VmZml4ID0gJy5wZGYnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC5jc3Y6XHJcbiAgICAgICAgc3VmZml4ID0gJy5jc3YnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1ZmZpeDtcclxuICB9XHJcblxyXG4gIGNhbkRvd25sb2FkVGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBzdWZmaXggPSB0aGlzLmdldEZpbGVFeHRlbnNpb24oKTtcclxuICAgIGNvbnN0IGNhbkxpc3QgPSBbJy54bHMnLCAnLnhsc3gnLCAnLnhsc20nLCAnLmV0J107XHJcbiAgICBpZiAoY2FuTGlzdC5maW5kSW5kZXgodCA9PiB0ID09PSBzdWZmaXgpIDwgMCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICB9XHJcblxyXG4gIC8vIOmAieaLqeaWh+S7tuWQjuS6i+S7tlxyXG4gIHNlbGVjdGVkRmlsZU9uQ2hhbmdlKGV2ZW50KSB7XHJcbiAgICBjb25zdCBzdHI6IHN0cmluZyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgIGlmIChzdHIgPT09ICcnKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGluZGV4ID0gc3RyLmxhc3RJbmRleE9mKCdcXFxcJyk7XHJcbiAgICB0aGlzLmZpbGVOYW1lID0gc3RyLnN1YnN0cmluZyhpbmRleCArIDEpO1xyXG4gICAgaWYgKHRoaXMuZmlsZU5hbWUuc3BsaXQoXCIuXCIpLmxlbmd0aCA9PT0gMiAmJiB0aGlzLmZpbGVOYW1lLnNwbGl0KFwiLlwiKVsxXSA9PT0gXCJqcGdcIikge1xyXG4gICAgICB0aGlzLnVwbG9hZGVyLnF1ZXVlID0gW107XHJcbiAgICAgIHRoaXMubm90aWZ5LmluZm8odGhpcy5jaG9vc2VfdHJ1ZWZpbGUpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZygn6Zif5YiX5Lit55qE5paH5Lu2JyArIHRoaXMudXBsb2FkZXIucXVldWVbMF0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5YWz6Zet56qX5Y+jXHJcbiAgcHVibGljIENsb3NlKCkge1xyXG4gICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyDpgInmi6nmlofku7bkuovku7ZcclxuICBwdWJsaWMgU2VsZWN0RmlsZSgpOiBhbnkge1xyXG4gICAgdGhpcy5maWxlVXBsb2FkLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcclxuICB9XHJcblxyXG4gIGZpbGVUeXBlVmFsdWVDaGFuZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5jb250cm9sRmlsZVR5cGUoKSA9PT0gJy54bHN4Jykge1xyXG4gICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuc2VsZWN0X3hsc3hfbm90aWZ5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnRyb2xGaWxlVHlwZSgpIHtcclxuICAgIGNvbnN0IHN1ZmZpeCA9IEZpbGVUeXBlVXRpbC5nZXRGaWxlRXh0ZW5zaW9uKHRoaXMudmFsdWVGaWVsZCk7XHJcbiAgICBpZiAoc3VmZml4ICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuYWNjZXB0RmlsZVR5cGUgPSBzdWZmaXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFjY2VwdEZpbGVUeXBlID0gJyonO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1ZmZpeDtcclxuICB9XHJcblxyXG4gIC8vIOS4i+i9veaooeadv1xyXG4gIHB1YmxpYyBEb3dubG9hZFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICBsZXQgc3VmZml4ID0gbnVsbDtcclxuICAgIGlmICh0aGlzLmNhbkRvd25sb2FkVGVtcGxhdGUoKSAmJiB0aGlzLnZhbHVlRmllbGQgIT09IHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSkge1xyXG4gICAgICBzdWZmaXggPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZUV4dGVuc2lvbih0aGlzLnZhbHVlRmllbGQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbXBvcnRPcHRpb25bJ3NlY3VyaXR5TGV2ZWxOYW1lJ10gPSB0aGlzLnNlY3VyaXR5TGV2ZWxOYW1lO1xyXG4gICAgdGhpcy5kYXRhSW1wb3J0U2VydmljZS5Eb3dtbG9hZFRlbXBsYXRlNEhhbmRDcmFmdCh0aGlzLmN1cnJlbnRSdWxlSWQsIHRoaXMuaW1wb3J0T3B0aW9uLCBzdWZmaXgpO1xyXG5cclxuICAgIC8vIHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuY29tcGxldGUudW5zdWJzY3JpYmUoKTtcclxuICAgIGNvbnN0IHVuc3Vic2NyaWJlciA9IHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuY29tcGxldGUuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIGlmIChkYXRhID09PSAnJykge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5kb3dubG9hZF90ZW1wbGF0ZV9vayk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuZXJyb3IodGhpcy5kb3dubG9hZF90ZW1wbGF0ZV9mYWlsICsgZGF0YSk7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICB0aGlzLm5vdGlmeS5lcnJvcihlcnJvci5tZXNzYWdlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5re75Yqg5paH5Lu25ZCO5LqL5Lu2XHJcbiAgYWZ0ZXJBZGRGaWxlKGZpbGVJdGVtOiBGaWxlSXRlbSk6IGFueSB7XHJcbiAgfVxyXG5cclxuICAvLyDlvIDlp4vlr7zlhaVcclxuICBwdWJsaWMgT2soKSB7XHJcbiAgICBjb25zb2xlLmxvZygn5byA5aeL5LiK5Lyg77yBJyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnVwbG9hZGVyLnF1ZXVlKTtcclxuICAgIGNvbnN0IGxvYWRpbmdDb25maWcgPSB7XHJcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRfbG9hZGluZyddXHJcbiAgICB9O1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KGxvYWRpbmdDb25maWcpO1xyXG4gICAgY29uc3QgbGVuID0gdGhpcy51cGxvYWRlci5xdWV1ZS5sZW5ndGg7XHJcbiAgICBpZiAobGVuID09PSAwKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5LmluZm8odGhpcy5jaG9vc2VfdHJ1ZWZpbGUpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGxhc3RGaWxlSXRlbSA9IHRoaXMudXBsb2FkZXIucXVldWVbbGVuIC0gMV07XHJcbiAgICBjb25zdCBtYXhGaWxlU2l6ZSA9IHRoaXMucmVjb3JkUnVsZS5pbXBvcnRGaWxlTWF4U2l6ZSAqIDEwMjQgKiAxMDI0O1xyXG4gICAgaWYgKGxhc3RGaWxlSXRlbS5maWxlLnNpemUgPiBtYXhGaWxlU2l6ZSkge1xyXG4gICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRmaWxlX3Rvb2JpZyddICsgdGhpcy5yZWNvcmRSdWxlLmltcG9ydEZpbGVNYXhTaXplICsgJ01CJyk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3UgPSB0aGlzLmltcG9ydE9wdGlvbi5zdTtcclxuICAgIGNvbnN0IGZpeGVkVXJsID0gdGhpcy5vcmlnaW4gKyAnL2FwaS9ydW50aW1lL2RpcC92MS4wL0FsbFN0ZXBzL2RhdGFpbXBvcnR2bWFjdGlvbj9zdT0nICsgc3U7XHJcbiAgICBsZXQgaGVhZGVycyA9IFt7bmFtZTogJ3N1JywgdmFsdWU6IHN1fV07XHJcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuZXh0ZW5kSW5mbykpIHtcclxuICAgICAgY29uc3QgZW5hYmxlU2VjdXJpdHlMZXZlbCA9IHRoaXMuZXh0ZW5kSW5mb1snZW5hYmxlU2VjdXJpdHlMZXZlbCddIGFzIGJvb2xlYW47XHJcbiAgICAgIGlmIChlbmFibGVTZWN1cml0eUxldmVsKSB7XHJcbiAgICAgICAgaGVhZGVycy5wdXNoKHtuYW1lOiAnZW5hYmxlU2VjdXJpdHlMZXZlbCcsIHZhbHVlOiBlbmFibGVTZWN1cml0eUxldmVsfSk7XHJcbiAgICAgICAgY29uc3Qgc2VjdXJpdHlMZXZlbFByZWZpeCA9IHRoaXMuZXh0ZW5kSW5mb1snc2VjdXJpdHlMZXZlbFByZWZpeCddO1xyXG4gICAgICAgIGNvbnN0IHNlY3VyaXR5TGV2ZWxTdWZmaXggPSB0aGlzLmV4dGVuZEluZm9bJ3NlY3VyaXR5TGV2ZWxTdWZmaXgnXTtcclxuICAgICAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdzZWN1cml0eUxldmVsUHJlZml4JywgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudChzZWN1cml0eUxldmVsUHJlZml4KX0pO1xyXG4gICAgICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ3NlY3VyaXR5TGV2ZWxTdWZmaXgnLCB2YWx1ZTogZW5jb2RlVVJJQ29tcG9uZW50KHNlY3VyaXR5TGV2ZWxTdWZmaXgpfSk7XHJcbiAgICAgICAgaGVhZGVycy5wdXNoKHtuYW1lOiAnc2VjdXJpdHlMZXZlbE5hbWUnLCB2YWx1ZTogZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuc2VjdXJpdHlMZXZlbE5hbWUpfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBzdWZmaXggPSAnJztcclxuICAgIGlmICh0aGlzLmNhbkRvd25sb2FkVGVtcGxhdGUoKSAmJiB0aGlzLnZhbHVlRmllbGQgIT09IHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSkge1xyXG4gICAgICBzdWZmaXggPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZUV4dGVuc2lvbih0aGlzLnZhbHVlRmllbGQpO1xyXG4gICAgfVxyXG4gICAgbGV0IGdsb2JhbFZhciA9ICcnO1xyXG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmltcG9ydE9wdGlvblsnR2xvYmFsUGFyYW0nXSkpIHtcclxuICAgICAgaWYgKHR5cGVvZiAodGhpcy5pbXBvcnRPcHRpb25bJ0dsb2JhbFBhcmFtJ10pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGdsb2JhbFZhciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuaW1wb3J0T3B0aW9uWydHbG9iYWxQYXJhbSddKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBnbG9iYWxWYXIgPSB0aGlzLmltcG9ydE9wdGlvblsnR2xvYmFsUGFyYW0nXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGZ1bmNJZCA9ICcnO1xyXG4gICAgaWYoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMuaW1wb3J0T3B0aW9uLmZ1bmNJZCkpe1xyXG4gICAgICBmdW5jSWQgPSB0aGlzLmltcG9ydE9wdGlvbi5mdW5jSWQ7XHJcbiAgICB9XHJcbiAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdydWxlSWQnLCB2YWx1ZTogdGhpcy5jdXJyZW50UnVsZUlkfSk7XHJcbiAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdnbG9iYWxQYXJhbScsIHZhbHVlOiBnbG9iYWxWYXJ9KTtcclxuICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ3N1ZmZpeCcsIHZhbHVlOiBzdWZmaXh9KTtcclxuICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ2Z1bmNJZCcsIHZhbHVlOiBmdW5jSWR9KTtcclxuICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ3NlY3VyaXR5TGV2ZWxOYW1lJywgdmFsdWU6IHRoaXMuc2VjdXJpdHlMZXZlbE5hbWV9KTtcclxuXHJcbiAgICB0aGlzLnVwbG9hZGVyLnNldE9wdGlvbnMoe1xyXG4gICAgICB1cmw6IGZpeGVkVXJsLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYXV0b1VwbG9hZDogZmFsc2UsXHJcbiAgICAgIGl0ZW1BbGlhczogJ3VwbG9hZGVkZmlsZScsXHJcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgIH0pO1xyXG4gICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKGxhc3RGaWxlSXRlbSk7XHJcbiAgfVxyXG5cclxuICAvLyDlj5bmtojkuovku7ZcclxuICBwdWJsaWMgQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyDkuIrkvKDlpLHotKXlkI7mlrnms5VcclxuICBFcnJvckxvZyhpdGVtOiBGaWxlSXRlbSwgcmVzcG9uc2U6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIGhlYWRlcnM6IFBhcnNlZFJlc3BvbnNlSGVhZGVycyk6IGFueSB7XHJcbiAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICB0cnl7XHJcbiAgICAgIGNvbnN0IHRlbVJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IodGhpcy51cGxvYWRfZmFpbCArIHRlbVJlcy5tZXNzYWdlKTtcclxuICAgIH0gY2F0Y2h7XHJcbiAgICAgIHRoaXMubXNnU2VydmljZS5lcnJvcih0aGlzLnVwbG9hZF9mYWlsICsgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgY29uc3QgbGVuID0gdGhpcy51cGxvYWRlci5xdWV1ZS5sZW5ndGg7XHJcbiAgICBpZiAobGVuID4gMCkge1xyXG4gICAgICB0aGlzLnVwbG9hZGVyLnF1ZXVlLnNwbGljZSgwLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEltcG9ydChpdGVtOiBGaWxlSXRlbSwgcmVzcG9uc2U6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIGhlYWRlcnM6IFBhcnNlZFJlc3BvbnNlSGVhZGVycyk6IGFueSB7XHJcbiAgICBzd2l0Y2ggKHRoaXMubWV0aG9kVHlwZSkge1xyXG4gICAgICBjYXNlIE1ldGhvZFR5cGUuQ29tbW9uSW1wb3J0OlxyXG4gICAgICAgIHRoaXMuRGF0YUltcG9ydEJ5SWQoaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgTWV0aG9kVHlwZS5JbXBvcnRTdWJUYWJsZURldGFpbDpcclxuICAgICAgICAvLyB0aGlzLkltcG9ydFN1YlRhYmxlKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMsIHN1ZmZpeCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDmmL7npLrmoKHpqoznu5PmnpxcclxuICBwcml2YXRlIFNob3dWYWxpZGF0ZWRSZXN1bHQoY29tbW9uUGFyYW1zOiBDb21tb25QYXJhbXMpIHtcclxuICAgIGNvbnN0IGltcG9ydFJlc3VsdCA9IGNvbW1vblBhcmFtcy5pbXBvcnRSZXN1bHQ7XHJcbiAgICBjb25zdCBsb2FkaW5nUGFyYW0gPSBjb21tb25QYXJhbXMubG9hZGluZ1BhcmFtO1xyXG4gICAgaWYgKGltcG9ydFJlc3VsdC52YWxpZGF0ZWRSZXN1bHRzICYmIGltcG9ydFJlc3VsdC52YWxpZGF0ZWRSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbG9hZGluZ1BhcmFtLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShWYWxpZGF0ZUZvcm1Db21wb25lbnQpO1xyXG4gICAgICBjb25zdCBjbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhpcy5pbmplY3Rvcik7XHJcbiAgICAgIGNtcFJlZi5pbnN0YW5jZS52YWxpZGF0ZVJlc3VsdCA9IGltcG9ydFJlc3VsdC52YWxpZGF0ZWRSZXN1bHRzO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2Uuc3UgPSBjb21tb25QYXJhbXMuc3U7XHJcbiAgICAgIGNtcFJlZi5pbnN0YW5jZS5pMThuUmVzb3VyY2UgPSBjb21tb25QYXJhbXMuaTE4blJlc291cmNlO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2UubG9hZGluZ1BhcmFtID0gbG9hZGluZ1BhcmFtO1xyXG4gICAgICBjb25zdCB2YWxpZGF0ZU1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiB0aGlzLmkxOG5SZXNvdXJjZVsndmFsaWRhdGVfcmVzdWx0X3Nob3cnXSxcclxuICAgICAgICB3aWR0aDogOTUwLFxyXG4gICAgICAgIGhlaWdodDogNTUwLFxyXG4gICAgICAgIGJ1dHRvbnM6IGNtcFJlZi5pbnN0YW5jZS5tb2RhbEZvb3RlcixcclxuICAgICAgICBzaG93SGVhZGVyOiB0cnVlLFxyXG4gICAgICAgIHNob3dNYXhCdXR0b246IGZhbHNlLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNtcFJlZiwgdmFsaWRhdGVNb2RhbENvbmZpZyk7XHJcbiAgICAgIC8vMOS7o+ihqOaMiemSruS4reatouaIlljngrnlh7vvvJsx5Luj6KGo5oyJ6ZKu57un57utXHJcbiAgICAgIGxldCBjbG9zZWQgPSAwO1xyXG4gICAgICBkaWFsb2cuZGlhbG9nLmluc3RhbmNlLmNsb3NlZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIGlmIChjbG9zZWQgPT09IDApIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5LmluZm8odGhpcy5pMThuUmVzb3VyY2VbJ2FmdGVyX3ZhbGlkYXRlX3N1c3BlbmQnXSk7XHJcbiAgICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2UuY2xvc2VNb2RhbC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlZCA9IDA7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2Uub2tNb2RhbC5zdWJzY3JpYmUoKHZhbGlkYXRlZEluZm9MaXN0KSA9PiB7XHJcbiAgICAgICAgY2xvc2VkID0gMTtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICBsb2FkaW5nUGFyYW0ubG9hZGluZ1NlcnZpY2Uuc2hvdyhsb2FkaW5nUGFyYW0ubG9hZGluZ0NvbmZpZyk7XHJcbiAgICAgICAgY29tbW9uUGFyYW1zLmltcG9ydFBhcmFtWyd2YWxpZGF0ZWRJbmZvTGlzdCddID0gdmFsaWRhdGVkSW5mb0xpc3Q7XHJcbiAgICAgICAgLy90b2RvXHJcbiAgICAgICAgLy8gdGhpcy5JbXBvcnQ0SGFuZENyYWZ0KGNvbW1vblBhcmFtcyk7XHJcblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOS4iuS8oOaIkOWKn+WQjuaWueazlVxyXG4gIERhdGFJbXBvcnRCeUlkKGl0ZW06IEZpbGVJdGVtLCByZXNwb25zZTogc3RyaW5nLCBzdGF0dXM6IG51bWJlciwgaGVhZGVyczogUGFyc2VkUmVzcG9uc2VIZWFkZXJzKTogYW55IHtcclxuICAgIGNvbnNvbGUubG9nKHN0YXR1cyk7XHJcbiAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICBsZXQgaW1wb3J0UmVzdWx0ID0gSlNPTi5wYXJzZShyZXNwb25zZSkgYXMgRGF0YUlFUmVzdWx0O1xyXG4gICAgY29uc3QgbG9hZGluZ0NvbmZpZyA9IHtcclxuICAgICAgbWVzc2FnZTogdGhpcy5pMThuUmVzb3VyY2VbJ2ltcG9ydF9sb2FkaW5nJ11cclxuICAgIH07XHJcbiAgICBjb25zdCBsb2FkaW5nUGFyYW0gPSB7XHJcbiAgICAgIGxvYWRpbmdTZXJ2aWNlOiB0aGlzLmxvYWRpbmdTZXJ2aWNlLFxyXG4gICAgICBsb2FkaW5nQ29uZmlnOiBsb2FkaW5nQ29uZmlnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgY29tbW9uUGFyYW1zID0gbmV3IENvbW1vblBhcmFtcygpO1xyXG4gICAgY29tbW9uUGFyYW1zLmxvYWRpbmdQYXJhbSA9IGxvYWRpbmdQYXJhbTtcclxuICAgIGNvbW1vblBhcmFtcy5pMThuUmVzb3VyY2UgPSB0aGlzLmkxOG5SZXNvdXJjZTtcclxuICAgIGNvbW1vblBhcmFtcy5zdSA9IHRoaXMuaW1wb3J0T3B0aW9uLnN1O1xyXG4gICAgY29tbW9uUGFyYW1zLmltcG9ydFJlc3VsdCA9IGltcG9ydFJlc3VsdDtcclxuICAgIGlmIChpbXBvcnRSZXN1bHQuc3VjY2VlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICBpZiAoaW1wb3J0UmVzdWx0LmZvcm1EYXRhICYmIGltcG9ydFJlc3VsdC5mb3JtRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgaWYodHlwZW9mIChpbXBvcnRSZXN1bHQuZm9ybURhdGFbMF0pICE9PSAnb2JqZWN0Jyl7XHJcbiAgICAgICAgICBjb25zdCBmb3JtRGF0YU9iakFycmF5ID0gW107XHJcbiAgICAgICAgICBpbXBvcnRSZXN1bHQuZm9ybURhdGEuZm9yRWFjaChlPT57XHJcbiAgICAgICAgICAgIGZvcm1EYXRhT2JqQXJyYXkucHVzaChKU09OLnBhcnNlKGUpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaW1wb3J0UmVzdWx0LmZvcm1EYXRhID0gZm9ybURhdGFPYmpBcnJheTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KGltcG9ydFJlc3VsdCk7XHJcbiAgICAgIC8v5a+85YWl5oiQ5Yqf5aaC5p6c5bGV56S65qCh6aqM57uT5p6c77yM5Y+q6IO95piv5qCh6aqM562W55Wl5piv5b+955Wl77yM5omA5pyJ5qCh6aqM57uT5p6c6YO95pivZXJyb3JcclxuICAgICAgdGhpcy5TaG93VmFsaWRhdGVkUmVzdWx0KGNvbW1vblBhcmFtcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaW1wb3J0UmVzdWx0LnZhbGlkYXRlZFJlc3VsdHMgJiYgaW1wb3J0UmVzdWx0LnZhbGlkYXRlZFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMuU2hvd1ZhbGlkYXRlZFJlc3VsdChjb21tb25QYXJhbXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGVycm9ybGV2ZWwgPSBpbXBvcnRSZXN1bHQuZXJyb3JMZXZlbDtcclxuICAgICAgICBpZiAoZXJyb3JsZXZlbCA9PT0gJ0luZm8nKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKGltcG9ydFJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9ybGV2ZWwgPT09ICdXYXJuaW5nJykge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcoaW1wb3J0UmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IodGhpcy5pbXBvcnRfZmFpbCArIGltcG9ydFJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KGltcG9ydFJlc3VsdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxufVxyXG4iXX0=