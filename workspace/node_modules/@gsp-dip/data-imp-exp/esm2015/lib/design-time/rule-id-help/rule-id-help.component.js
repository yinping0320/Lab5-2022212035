/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { DatagridComponent } from "@farris/ui-datagrid";
import { NotifyService } from "@farris/ui-notify";
import { LoadingService } from "@farris/ui-loading";
import { HttpClient } from "@angular/common/http";
import { RuleFileType } from "../../rule-select/RuleFileType";
export class RuleIdHelpComponent {
    /**
     * @param {?} notify
     * @param {?} http
     * @param {?} loadingService
     */
    constructor(notify, http, loadingService) {
        this.notify = notify;
        this.http = http;
        this.loadingService = loadingService;
        this.closeModal = new EventEmitter();
        this.afterHelpConfirm = new EventEmitter();
        this.fileTypes = [
            { label: 'Office Excel97-2003(*.xls)', value: RuleFileType[0] },
            { label: 'Office Excel Macro(*.xlsm)', value: RuleFileType[1] },
            { label: 'Office Excel(*.xlsx)', value: RuleFileType[2] },
            { label: 'WPS Table(*.et)', value: RuleFileType[3] },
            { label: 'WPS Table(Template File)(*.ett)', value: RuleFileType[4] },
            { label: 'XML Table(*.xml)', value: RuleFileType[5] },
            { label: 'PDF File(*.pdf)', value: RuleFileType[6] },
            { label: 'CSV File(*.csv)', value: RuleFileType[7] }
        ];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.RuleIdHelpColumn = [
            { field: 'code', width: 180, title: '编号', halign: 'center', align: 'center', sortable: true },
            { field: 'name', width: 180, title: '名称', halign: 'center', align: 'center', sortable: true },
            // { field: 'bizEntityName', width: 150, title: '数据实体', halign: 'center', align: 'center', sortable: true },
            {
                field: 'fileType', width: 180, title: '文件类型', halign: 'center', align: 'center', sortable: true,
                formatter: { type: 'enum', options: { valueField: 'value', textField: 'label', data: this.fileTypes } }
            },
            { field: 'lastModifiedTime', width: 150, title: '最后修改时间', halign: 'center', align: 'center', sortable: true }
            // { field: 'creator', width: 150, title: this.ruleselect_creator, halign: 'center', align: 'center', sortable: true }
        ];
        this.loadingService.show();
        /** @type {?} */
        const url = "/api/runtime/dip/v1.0/dataIeRuleManage/getImpExpHelpRules";
        /** @type {?} */
        const requestBody = {
            "ruleType": this.ruleType,
            //导入为0，导出为1
            "beId": this.beId,
            "voId": this.voId
        };
        this.http.post(url, requestBody).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.loadingService.clearAll();
            this.RuleIdHelpData = res;
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.loadingService.clearAll();
            this.notify.error(error.error.Message);
            console.log(error.error.Message);
        }));
    }
    /**
     * @return {?}
     */
    okHandler() {
        /** @type {?} */
        const selectedRow = this.RuleIdHelpGrid.selectedRow;
        if (selectedRow === null) {
            this.notify.info('请选择一条规则');
            return;
        }
        this.ruleId = selectedRow.data.id;
        this.closeModal.emit(this.ruleId);
    }
    /**
     * @return {?}
     */
    cancelHandler() {
        this.closeModal.emit();
    }
}
RuleIdHelpComponent.decorators = [
    { type: Component, args: [{
                selector: 'rule-id-help',
                template: "\n  <div class=\"d-flex flex-fill\" style=\"height:100%;\">\n    <farris-datagrid #RuleIdHelpGrid id=\"rule-mgrs-data\" [fit]=\"true\" [fitColumns]=\"true\" [columns]=\"RuleIdHelpColumn\"\n                     [pagination]=\"false\"\n                     [showLineNumber]=\"true\" [keepSelect]=\"true\" [sizeType]=\"'sm'\" [data]=\"RuleIdHelpData\">\n    </farris-datagrid>\n  </div>\n\n  <ng-template #selectFooter>\n    <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"cancelHandler()\">\u53D6\u6D88</button>\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"okHandler()\">\u786E\u5B9A</button>\n  </ng-template>\n\n\n",
                styles: [""]
            }] }
];
/** @nocollapse */
RuleIdHelpComponent.ctorParameters = () => [
    { type: NotifyService },
    { type: HttpClient },
    { type: LoadingService }
];
RuleIdHelpComponent.propDecorators = {
    modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
    RuleIdHelpGrid: [{ type: ViewChild, args: ['RuleIdHelpGrid',] }],
    ruleId: [{ type: Output }],
    closeModal: [{ type: Output }],
    afterHelpConfirm: [{ type: Output }],
    ruleType: [{ type: Input }],
    beId: [{ type: Input }],
    voId: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    RuleIdHelpComponent.prototype.modalFooter;
    /** @type {?} */
    RuleIdHelpComponent.prototype.RuleIdHelpGrid;
    /** @type {?} */
    RuleIdHelpComponent.prototype.RuleIdHelpColumn;
    /** @type {?} */
    RuleIdHelpComponent.prototype.RuleIdHelpData;
    /** @type {?} */
    RuleIdHelpComponent.prototype.ruleId;
    /** @type {?} */
    RuleIdHelpComponent.prototype.closeModal;
    /** @type {?} */
    RuleIdHelpComponent.prototype.afterHelpConfirm;
    /** @type {?} */
    RuleIdHelpComponent.prototype.ruleType;
    /** @type {?} */
    RuleIdHelpComponent.prototype.beId;
    /** @type {?} */
    RuleIdHelpComponent.prototype.voId;
    /** @type {?} */
    RuleIdHelpComponent.prototype.fileTypes;
    /**
     * @type {?}
     * @private
     */
    RuleIdHelpComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    RuleIdHelpComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    RuleIdHelpComponent.prototype.loadingService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVsZS1pZC1oZWxwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3AtZGlwL2RhdGEtaW1wLWV4cC8iLCJzb3VyY2VzIjpbImxpYi9kZXNpZ24tdGltZS9ydWxlLWlkLWhlbHAvcnVsZS1pZC1oZWxwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUNoRCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFDbEQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQVc1RCxNQUFNLE9BQU8sbUJBQW1COzs7Ozs7SUErQjlCLFlBQ1UsTUFBcUIsRUFDckIsSUFBZ0IsRUFFaEIsY0FBOEI7UUFIOUIsV0FBTSxHQUFOLE1BQU0sQ0FBZTtRQUNyQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBRWhCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQTFCOUIsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDckMscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQVVyRCxjQUFTLEdBQUc7WUFDVixFQUFDLEtBQUssRUFBRSw0QkFBNEIsRUFBRSxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFDO1lBQzdELEVBQUMsS0FBSyxFQUFFLDRCQUE0QixFQUFFLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUM7WUFDN0QsRUFBQyxLQUFLLEVBQUUsc0JBQXNCLEVB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QUU7WUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDNUIsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNsQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQzs7OztJQUVELGFBQWE7UUFDWCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3pCLENBQUM7OztZQXhGRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGNBQWM7Z0JBQ3hCLDRwQkFBNEM7O2FBRTdDOzs7O1lBYk8sYUFBYTtZQUViLFVBQVU7WUFEVixjQUFjOzs7MEJBY25CLFNBQVMsU0FBQyxjQUFjOzZCQUN4QixTQUFTLFNBQUMsZ0JBQWdCO3FCQUsxQixNQUFNO3lCQUVOLE1BQU07K0JBQ04sTUFBTTt1QkFHTixLQUFLO21CQUVMLEtBQUs7bUJBRUwsS0FBSzs7OztJQWhCTiwwQ0FBeUQ7O0lBQ3pELDZDQUErRDs7SUFFL0QsK0NBQXNCOztJQUN0Qiw2Q0FBb0I7O0lBRXBCLHFDQUNlOztJQUNmLHlDQUErQzs7SUFDL0MsK0NBQXFEOztJQUdyRCx1Q0FDaUI7O0lBQ2pCLG1DQUNhOztJQUNiLG1DQUNhOztJQUViLHdDQVNFOzs7OztJQUdBLHFDQUE2Qjs7Ozs7SUFDN0IsbUNBQXdCOzs7OztJQUV4Qiw2Q0FBc0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgRXZlbnRFbWl0dGVyLCBJbmplY3RvcixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtEYXRhZ3JpZENvbXBvbmVudH0gZnJvbSBcIkBmYXJyaXMvdWktZGF0YWdyaWRcIjtcbmltcG9ydCB7Tm90aWZ5U2VydmljZX0gZnJvbSBcIkBmYXJyaXMvdWktbm90aWZ5XCI7XG5pbXBvcnQge0xvYWRpbmdTZXJ2aWNlfSBmcm9tIFwiQGZhcnJpcy91aS1sb2FkaW5nXCI7XG5pbXBvcnQge0h0dHBDbGllbnR9IGZyb20gXCJAYW5ndWxhci9jb21tb24vaHR0cFwiO1xuaW1wb3J0IHtSdWxlRmlsZVR5cGV9IGZyb20gXCIuLi8uLi9ydWxlLXNlbGVjdC9SdWxlRmlsZVR5cGVcIjtcbmltcG9ydCB7UnVsZVNlbGVjdENvbXBvbmVudH0gZnJvbSBcIi4uLy4uL3J1bGUtc2VsZWN0L3J1bGUtc2VsZWN0LmNvbXBvbmVudFwiO1xuaW1wb3J0IHtGaWxlVHlwZVV0aWx9IGZyb20gXCIuLi8uLi9zZXJ2aWNlL1V0aWxzL0RhdGFJRVV0aWxzXCI7XG5pbXBvcnQge0JzTW9kYWxTZXJ2aWNlfSBmcm9tIFwiQGZhcnJpcy91aS1tb2RhbFwiO1xuaW1wb3J0IHtPYnNlcnZhYmxlLCBTdWJqZWN0fSBmcm9tIFwicnhqc1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdydWxlLWlkLWhlbHAnLFxuICB0ZW1wbGF0ZVVybDogJy4vcnVsZS1pZC1oZWxwLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vcnVsZS1pZC1oZWxwLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBSdWxlSWRIZWxwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQFZpZXdDaGlsZCgnc2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XG4gIEBWaWV3Q2hpbGQoJ1J1bGVJZEhlbHBHcmlkJykgUnVsZUlkSGVscEdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xuXG4gIFJ1bGVJZEhlbHBDb2x1bW46IGFueTtcbiAgUnVsZUlkSGVscERhdGE6IGFueTtcblxuICBAT3V0cHV0KClcbiAgcnVsZUlkOiBzdHJpbmc7XG4gIEBPdXRwdXQoKSBjbG9zZU1vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBhZnRlckhlbHBDb25maXJtID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cblxuICBASW5wdXQoKVxuICBydWxlVHlwZTogbnVtYmVyO1xuICBASW5wdXQoKVxuICBiZUlkOiBzdHJpbmc7XG4gIEBJbnB1dCgpXG4gIHZvSWQ6IHN0cmluZztcblxuICBmaWxlVHlwZXMgPSBbXG4gICAge2xhYmVsOiAnT2ZmaWNlIEV4Y2VsOTctMjAwMygqLnhscyknLCB2YWx1ZTogUnVsZUZpbGVUeXBlWzBdfSxcbiAgICB7bGFiZWw6ICdPZmZpY2UgRXhjZWwgTWFjcm8oKi54bHNtKScsIHZhbHVlOiBSdWxlRmlsZVR5cGVbMV19LFxuICAgIHtsYWJlbDogJ09mZmljZSBFeGNlbCgqLnhsc3gpJywgdmFsdWU6IFJ1bGVGaWxlVHlwZVsyXX0sXG4gICAge2xhYmVsOiAnV1BTIFRhYmxlKCouZXQpJywgdmFsdWU6IFJ1bGVGaWxlVHlwZVszXX0sXG4gICAge2xhYmVsOiAnV1BTIFRhYmxlKFRlbXBsYXRlIEZpbGUpKCouZXR0KScsIHZhbHVlOiBSdWxlRmlsZVR5cGVbNF19LFxuICAgIHtsYWJlbDogJ1hNTCBUYWJsZSgqLnhtbCknLCB2YWx1ZTogUnVsZUZpbGVUeXBlWzVdfSxcbiAgICB7bGFiZWw6ICdQREYgRmlsZSgqLnBkZiknLCB2YWx1ZTogUnVsZUZpbGVUeXBlWzZdfSxcbiAgICB7bGFiZWw6ICdDU1YgRmlsZSgqLmNzdiknLCB2YWx1ZTogUnVsZUZpbGVUeXBlWzddfVxuICBdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLFxuICAgIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCxcblxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlXG4gICkge1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5SdWxlSWRIZWxwQ29sdW1uID0gW1xuICAgICAge2ZpZWxkOiAnY29kZScsIHdpZHRoOiAxODAsIHRpdGxlOiAn57yW5Y+3JywgaGFsaWduOiAnY2VudGVyJywgYWxpZ246ICdjZW50ZXInLCBzb3J0YWJsZTogdHJ1ZX0sXG4gICAgICB7ZmllbGQ6ICduYW1lJywgd2lkdGg6IDE4MCwgdGl0bGU6ICflkI3np7AnLCBoYWxpZ246ICdjZW50ZXInLCBhbGlnbjogJ2NlbnRlcicsIHNvcnRhYmxlOiB0cnVlfSxcblxuICAgICAgLy8geyBmaWVsZDogJ2JpekVudGl0eU5hbWUnLCB3aWR0aDogMTUwLCB0aXRsZTogJ+aVsOaNruWunuS9kycsIGhhbGlnbjogJ2NlbnRlcicsIGFsaWduOiAnY2VudGVyJywgc29ydGFibGU6IHRydWUgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6ICdmaWxlVHlwZScsIHdpZHRoOiAxODAsIHRpdGxlOiAn5paH5Lu257G75Z6LJywgaGFsaWduOiAnY2VudGVyJywgYWxpZ246ICdjZW50ZXInLCBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgZm9ybWF0dGVyOiB7dHlwZTogJ2VudW0nLCBvcHRpb25zOiB7dmFsdWVGaWVsZDogJ3ZhbHVlJywgdGV4dEZpZWxkOiAnbGFiZWwnLCBkYXRhOiB0aGlzLmZpbGVUeXBlc319XG4gICAgICB9LFxuICAgICAge2ZpZWxkOiAnbGFzdE1vZGlmaWVkVGltZScsIHdpZHRoOiAxNTAsIHRpdGxlOiAn5pyA5ZCO5L+u5pS55pe26Ze0JywgaGFsaWduOiAnY2VudGVyJywgYWxpZ246ICdjZW50ZXInLCBzb3J0YWJsZTogdHJ1ZX1cblxuICAgICAgLy8geyBmaWVsZDogJ2NyZWF0b3InLCB3aWR0aDogMTUwLCB0aXRsZTogdGhpcy5ydWxlc2VsZWN0X2NyZWF0b3IsIGhhbGlnbjogJ2NlbnRlcicsIGFsaWduOiAnY2VudGVyJywgc29ydGFibGU6IHRydWUgfVxuICAgIF07XG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XG4gICAgY29uc3QgdXJsID0gXCIvYXBpL3J1bnRpbWUvZGlwL3YxLjAvZGF0YUllUnVsZU1hbmFnZS9nZXRJbXBFeHBIZWxwUnVsZXNcIjtcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgIFwicnVsZVR5cGVcIjogdGhpcy5ydWxlVHlwZSwgICAvL+WvvOWFpeS4ujDvvIzlr7zlh7rkuLoxXG4gICAgICBcImJlSWRcIjogdGhpcy5iZUlkLFxuICAgICAgXCJ2b0lkXCI6IHRoaXMudm9JZFxuICAgIH1cbiAgICB0aGlzLmh0dHAucG9zdCh1cmwsIHJlcXVlc3RCb2R5KS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcbiAgICAgIHRoaXMuUnVsZUlkSGVscERhdGEgPSByZXM7XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xuICAgICAgdGhpcy5ub3RpZnkuZXJyb3IoZXJyb3IuZXJyb3IuTWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5lcnJvci5NZXNzYWdlKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgb2tIYW5kbGVyKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5SdWxlSWRIZWxwR3JpZC5zZWxlY3RlZFJvdztcbiAgICBpZiAoc2VsZWN0ZWRSb3cgPT09IG51bGwpIHtcbiAgICAgIHRoaXMubm90aWZ5LmluZm8oJ+ivt+mAieaLqeS4gOadoeinhOWImScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJ1bGVJZCA9IHNlbGVjdGVkUm93LmRhdGEuaWQ7XG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQodGhpcy5ydWxlSWQpO1xuICB9XG5cbiAgY2FuY2VsSGFuZGxlcigpIHtcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xuICB9XG59XG4iXX0=