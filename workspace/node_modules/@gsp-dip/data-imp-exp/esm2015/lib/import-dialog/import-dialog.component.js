/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, ElementRef, EventEmitter, Injector, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { FileUploader } from '../service/UploaderService/FileUpload/file-uploader';
import { DataImportService } from '../service/DataIEService/data-import.service';
import { FrameContext } from '@farris/devkit';
import { NotifyService } from '@farris/ui-notify';
import { LoadingService } from '@farris/ui-loading';
import { MethodType } from '../model/DataIEType/MethodType';
import { Subject } from 'rxjs';
import { DataIEUtils, FileTypeUtil, isNullOrEmpty, isNullOrUndefined } from '../service/Utils/DataIEUtils';
import { HttpClient } from '@angular/common/http';
import { BsModalService } from '@farris/ui-modal';
import { RuleSelectComponent } from '../rule-select/rule-select.component';
import { MessagerService } from '@farris/ui-messager';
import { ListDataService } from '@farris/command-services';
import { FileConst } from '../model/utils/FileConst';
import { DataieProgressComponent } from '../bakcomponents/dataie-progress/dataie-progress.component';
import { CommonParams } from "../service/Entity/CommonParams";
export class ImportDialogComponent {
    /**
     * @param {?} dataImportService
     * @param {?} notify
     * @param {?} loadingService
     * @param {?} http
     * @param {?} injector
     * @param {?} modalService
     * @param {?} listDataSer
     * @param {?} msgService
     * @param {?} resolver
     */
    constructor(dataImportService, notify, loadingService, http, injector, modalService, listDataSer, msgService, resolver) {
        this.dataImportService = dataImportService;
        this.notify = notify;
        this.loadingService = loadingService;
        this.http = http;
        this.injector = injector;
        this.modalService = modalService;
        this.listDataSer = listDataSer;
        this.msgService = msgService;
        this.resolver = resolver;
        // 规则ID 该id为表单上配置的规则id
        this.ruleId = '';
        // 过滤条件
        this.importOption = null;
        this.frameContext = null;
        this.subject = null;
        this.showfiletype = true;
        this.enableRuntimeCustom = false;
        // 记录的规则
        this.recordRule = null;
        //当前选择规则的id、名称和文件类型
        this.currentRuleName = '';
        this.currentRuleId = '';
        this.currentRuleFileType = '';
        this.enableTemplate = true;
        this.closeXLSX = false;
        this.enableSecurityLevelSelect = false;
        this.securityLevelName = '';
        this.acceptFileType = '.csv,.xlsm,.xlsx,.xls,.pdf,.xml,.et';
        this.ImportSecretRemindInfo = '';
        // 文件名称
        this.fileName = '';
        this.origin = window.location.origin;
        this.uploader = new FileUploader({
            url: '',
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile'
        });
        // 控制Destroy表单中的输入组件
        this.needDestroy = new EventEmitter();
        this.valueField = null;
        this.lookupIcon = '<i class="f-icon f-icon-windows"></i>';
        this.fileListItems = [
            { id: FileConst.xls, label: FileConst.xls },
            { id: FileConst.xlsx, label: FileConst.xlsx },
            { id: FileConst.xlsm, label: FileConst.xlsm },
            { id: FileConst.et, label: FileConst.et },
        ];
        this.securityLevelItems = [];
        this.uploader.onSuccessItem = this.Import.bind(this);
        this.uploader.onErrorItem = this.ErrorLog.bind(this);
        this.uploader.onAfterAddingFile = this.afterAddFile;
        DataIEUtils.getTranslateValue(http).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.import_file = res['import_file'];
            this.choose_file = res['choose_file'];
            this.file_type = res['file_type'];
            this.import_placeholder = res['import_placeholder'];
            this.download_template = res['download_template'];
            this.ie_cancel = res['ie_cancel'];
            this.ie_ok = res['ie_ok'];
            this.choose_truefile = res['choose_truefile'];
            this.download_template_ok = res['download_template_ok'];
            this.download_template_fail = res['download_template_fail'];
            this.upload_fail = res['upload_fail'];
            this.import_success = res['import_success'];
            this.import_form_success = res['import_form_success'];
            this.import_fail = res['import_fail'];
            this.rule_list = res['rule_list'];
            this.select_xlsx_notify = res['select_xlsx_notify'];
            this.i18nResource = res;
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let extendInfo = this.recordRule.extendInfo;
        if (!isNullOrUndefined(extendInfo)) {
            this.extendInfo = JSON.parse(extendInfo);
            this.ImportSecretRemindInfo = this.extendInfo['ImportSecretRemindInfo'];
            this.closeXLSX = this.extendInfo['closeXLSX'];
            if (this.closeXLSX === true) {
                this.fileListItems = [
                    { id: FileConst.xls, label: FileConst.xls },
                    { id: FileConst.xlsm, label: FileConst.xlsm },
                    { id: FileConst.et, label: FileConst.et }
                ];
            }
        }
        /** @type {?} */
        const securityLevels = this.recordRule.securityLevels;
        if (!isNullOrEmpty(securityLevels)) {
            this.enableSecurityLevelSelect = true;
            securityLevels.forEach((/**
             * @param {?} e
             * @return {?}
             */
            e => {
                /** @type {?} */
                const level = {
                    value: e.name,
                    label: e.name
                };
                this.securityLevelItems.push(level);
            }));
            this.securityLevelName = this.securityLevelItems[0].value;
        }
        this.currentRuleId = this.recordRule.ruleId;
        this.currentRuleName = this.recordRule.ruleName;
        this.valueField = FileTypeUtil.getFileTypeName(this.recordRule.fileType);
        if (this.valueField === '') {
            //未在当前可选文件的类型时，不显示选文件类型控件
            this.showfiletype = false;
        }
        this.currentRuleFileType = this.valueField;
        this.controlFileType();
        if (this.importOption.enableRuntimeCustom === true) {
            this.enableRuntimeCustom = true;
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    openSelectRule($event) {
        this.loadingService.show();
        //过滤规则时用表单命令处配置的规则来过滤，因此用ruleId，而不是currentRuleId
        /** @type {?} */
        const url = '/api/runtime/dip/v1.0/dataIeRuleManage/filterRulesByRuleIdAndVoId';
        /** @type {?} */
        const body = {
            ruleId: this.ruleId,
            ruleType: 0,
            voId: this.importOption.voId,
            methodType: this.methodType,
            importChildNodeCode: this.importOption.importChildNodeCode,
            closeXlsx: this.closeXLSX
        };
        this.http.post(url, body).subscribe((/**
         * @param {?} RuleMgrs
         * @return {?}
         */
        (RuleMgrs) => {
            this.loadingService.clearAll();
            if (RuleMgrs.length === 0) {
                this.notify.info(this.i18nResource['ruleselect_listempty']);
                return;
            }
            /** @type {?} */
            const compFactory = this.resolver.resolveComponentFactory(RuleSelectComponent);
            /** @type {?} */
            const compRef = compFactory.create(this.injector);
            compRef.instance.ruleId = this.ruleId;
            compRef.instance.voId = this.importOption.voId;
            compRef.instance.ruleType = 0;
            compRef.instance.RuleMgrsData = RuleMgrs;
            /** @type {?} */
            const modalConfig = {
                title: this.rule_list,
                width: 950,
                height: 500,
                buttons: compRef.instance.modalFooter,
                showHeader: true,
                showMaxButton: false,
                showButtons: true
            };
            /** @type {?} */
            const dialog = this.modalService.show(compRef, modalConfig);
            compRef.instance.closeModal.subscribe((/**
             * @return {?}
             */
            () => {
                dialog.close();
            }));
            compRef.instance.okModal.subscribe((/**
             * @param {?} RuleMgr
             * @return {?}
             */
            RuleMgr => {
                this.currentRuleId = RuleMgr.id;
                this.currentRuleName = RuleMgr.name;
                this.valueField = FileTypeUtil.getFileTypeName(RuleMgr.fileType);
                this.currentRuleFileType = this.valueField;
                this.controlFileType();
                dialog.close();
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.loadingService.clearAll();
            this.notify.error(error.error.Message);
            console.log(error.error.Message);
        }));
    }
    /**
     * @return {?}
     */
    canDownloadTemplate() {
        /** @type {?} */
        const suffix = FileTypeUtil.getFileExtension(this.valueField);
        /** @type {?} */
        const canList = ['.xls', '.xlsx', '.xlsm', '.et'];
        if (canList.findIndex((/**
         * @param {?} t
         * @return {?}
         */
        t => t === suffix)) < 0) {
            return false;
        }
        return true;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
    }
    // 选择文件后事件
    /**
     * @param {?} event
     * @return {?}
     */
    selectedFileOnChange(event) {
        /** @type {?} */
        const str = event.target.value;
        if (str === '') {
            return;
        }
        /** @type {?} */
        const index = str.lastIndexOf('\\');
        this.fileName = str.substring(index + 1);
        if (this.fileName.split(".").length === 2 && this.fileName.split(".")[1] === "jpg") {
            this.uploader.queue = [];
            this.notify.info(this.choose_truefile);
            return;
        }
        // console.log('队列中的文件' + this.uploader.queue[0]);
    }
    // 关闭窗口
    /**
     * @return {?}
     */
    Close() {
        this.needDestroy.emit();
    }
    // 选择文件事件
    /**
     * @return {?}
     */
    SelectFile() {
        this.fileUpload.nativeElement.click();
    }
    /**
     * @return {?}
     */
    fileTypeValueChange() {
        if (this.controlFileType() === '.xlsx') {
            this.notify.info(this.select_xlsx_notify);
        }
    }
    /**
     * @return {?}
     */
    controlFileType() {
        /** @type {?} */
        const suffix = FileTypeUtil.getFileExtension(this.valueField);
        if (suffix !== null) {
            this.acceptFileType = suffix;
        }
        else {
            this.acceptFileType = '*';
        }
        return suffix;
    }
    /**
     * @return {?}
     */
    clickSetting() {
        this.notify.info('设置一下');
    }
    // 下载模板
    /**
     * @return {?}
     */
    DownloadTemplate() {
        this.loadingService.show();
        /** @type {?} */
        let suffix = null;
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        this.importOption['securityLevelName'] = this.securityLevelName;
        this.dataImportService.DowmloadTemplate(this.currentRuleId, this.frameContext.repository, this.importOption, suffix);
        /** @type {?} */
        const unsubscriber = this.dataImportService.complete.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.loadingService.clearAll();
            if (data === '') {
                this.notify.success(this.download_template_ok);
                unsubscriber.unsubscribe();
            }
            else {
                this.notify.error(this.download_template_fail + data);
                unsubscriber.unsubscribe();
            }
        }));
    }
    /**
     * @return {?}
     */
    showProgressDialog() {
        /** @type {?} */
        const compFactory = this.resolver.resolveComponentFactory(DataieProgressComponent);
        /** @type {?} */
        const compRef = compFactory.create(this.injector);
        compRef.instance.DataIeProgressParams = this.dataImportService.DataIeProgressParams;
        /** @type {?} */
        const modalConfig = {
            width: 530,
            height: 50,
            title: '',
            showHeader: false,
            showMaxButton: false,
            showMinButton: false,
            showButtons: false,
            showCloseButton: false,
            resizable: false
        };
        return this.modalService.show(compRef, modalConfig);
    }
    // 添加文件后事件
    /**
     * @param {?} fileItem
     * @return {?}
     */
    afterAddFile(fileItem) {
    }
    // 开始导入
    /**
     * @return {?}
     */
    Ok() {
        console.log('开始上传！');
        console.log(this.uploader.queue);
        /** @type {?} */
        const loadingConfig = {
            message: this.i18nResource['import_loading']
        };
        this.loadingService.show(loadingConfig);
        // this.DataIeProgressDialog = this.showProgressDialog();
        /** @type {?} */
        const len = this.uploader.queue.length;
        if (len === 0) {
            this.notify.info(this.choose_truefile);
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        const lastFileItem = this.uploader.queue[len - 1];
        /** @type {?} */
        const maxFileSize = this.recordRule.importFileMaxSize * 1024 * 1024;
        if (lastFileItem.file.size > maxFileSize) {
            this.notify.warning(this.i18nResource['importfile_toobig'] + this.recordRule.importFileMaxSize + 'MB');
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        const befRestService = DataIEUtils.GetBefRestService(this.frameContext.repository);
        /** @type {?} */
        const preUrl = DataIEUtils.GetPreUrl(befRestService.baseUri);
        /** @type {?} */
        let tempUrl = `${preUrl}/import/Upload`;
        /** @type {?} */
        let su = DataIEUtils.getSu(tempUrl);
        if (this.importOption['su'] !== null && this.importOption['su'] !== undefined) {
            su = this.importOption['su'];
        }
        /** @type {?} */
        const fixedUrl = this.origin + '/api/runtime/dip/v1.0/rpcimport/Upload?su=' + su;
        /** @type {?} */
        let headers = [{ name: 'su', value: su }];
        if (!isNullOrUndefined(this.extendInfo)) {
            /** @type {?} */
            const enableSecurityLevel = (/** @type {?} */ (this.extendInfo['enableSecurityLevel']));
            if (enableSecurityLevel) {
                headers.push({ name: 'enableSecurityLevel', value: enableSecurityLevel });
                /** @type {?} */
                const securityLevelPrefix = this.extendInfo['securityLevelPrefix'];
                /** @type {?} */
                const securityLevelSuffix = this.extendInfo['securityLevelSuffix'];
                headers.push({ name: 'securityLevelPrefix', value: encodeURIComponent(securityLevelPrefix) });
                headers.push({ name: 'securityLevelSuffix', value: encodeURIComponent(securityLevelSuffix) });
                headers.push({ name: 'securityLevelName', value: encodeURIComponent(this.securityLevelName) });
            }
        }
        this.uploader.setOptions({
            url: fixedUrl,
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile',
            headers: headers
        });
        this.uploader.uploadItem(lastFileItem);
    }
    // 取消事件
    /**
     * @return {?}
     */
    Cancel() {
        this.needDestroy.emit();
    }
    // 上传失败后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    ErrorLog(item, response, status, headers) {
        console.log('上传失败');
        console.log('错误代码：' + status);
        console.log(response);
        console.log(headers);
        this.loadingService.clearAll();
        try {
            /** @type {?} */
            const temRes = JSON.parse(response);
            this.msgService.error(this.upload_fail + temRes.message);
        }
        catch (_a) {
            this.msgService.error(this.upload_fail + response);
        }
        this.Close();
        /** @type {?} */
        const len = this.uploader.queue.length;
        if (len > 0) {
            this.uploader.queue.splice(0, 1);
        }
    }
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    Import(item, response, status, headers) {
        /** @type {?} */
        let suffix = null;
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        // this.dataImportService.DataIeProgressParams['ImportProgressValue'] = 45;
        switch (this.methodType) {
            case MethodType.CommonImport:
            case MethodType.CardFormDataImport:
                this.DataImportById(item, response, status, headers, suffix);
                break;
            case MethodType.ImportSubTableDetail:
                this.ImportSubTable(item, response, status, headers, suffix);
                break;
        }
    }
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @param {?} suffix
     * @return {?}
     */
    ImportSubTable(item, response, status, headers, suffix) {
        if (status === 200) {
            /** @type {?} */
            const temRes = JSON.parse(response);
            /** @type {?} */
            const loadingConfig = {
                message: this.i18nResource['import_loading']
            };
            /** @type {?} */
            const loadingParam = {
                loadingService: this.loadingService,
                loadingConfig: loadingConfig
            };
            /** @type {?} */
            const commonParams = new CommonParams();
            commonParams.methodType = this.methodType;
            commonParams.ruleId = this.currentRuleId;
            commonParams.option = this.importOption;
            commonParams.fileName = temRes['fileName'];
            commonParams.frameContext = this.frameContext;
            commonParams.suffix = suffix;
            commonParams.loadingParam = loadingParam;
            commonParams.i18nResource = this.i18nResource;
            commonParams.securityLevelName = this.securityLevelName;
            this.dataImportService.ImportSubTable(commonParams);
            /** @type {?} */
            const subscriber = this.dataImportService.complete.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.loadingService.clearAll();
                // this.DataIeProgressDialog.close();
                subscriber.unsubscribe();
                if (data === '') {
                    this.notify.success(this.import_success);
                    this.subject.next(true);
                    this.subject.complete();
                    this.needDestroy.emit();
                }
                else if (data === '导入表单成功') {
                    this.notify.success(this.import_form_success);
                    this.subject.next(true);
                    this.subject.complete();
                    this.needDestroy.emit();
                }
                else if (data === '部分数据导入完成') {
                    this.notify.success(this.i18nResource['partdata-import-success']);
                    this.subject.next(true);
                    this.subject.complete();
                    this.needDestroy.emit();
                }
                else if (data === '校验中止') {
                    this.notify.info(this.i18nResource['after_validate_suspend']);
                    this.needDestroy.emit();
                    this.subject.next(false);
                    this.subject.complete();
                }
                else {
                    /** @type {?} */
                    const errorlevel = this.dataImportService.errorlevel;
                    if (errorlevel === 'Info') {
                        this.messageShow('info', data);
                    }
                    else if (errorlevel === 'Warning') {
                        this.messageShow('warning', data);
                    }
                    else {
                        this.messageShow('error', this.import_fail + data);
                    }
                    this.needDestroy.emit();
                    this.subject.next(false);
                    this.subject.complete();
                }
            }));
        }
    }
    // 上传成功后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @param {?} suffix
     * @return {?}
     */
    DataImportById(item, response, status, headers, suffix) {
        console.log(status);
        console.log('上传完成！');
        if (status === 200) {
            //上传成功后清空上传队列
            this.uploader.queue = [];
            /** @type {?} */
            const temRes = JSON.parse(response);
            console.log('上传成功');
            console.log(temRes);
            /** @type {?} */
            const loadingConfig = {
                message: this.i18nResource['import_loading']
            };
            /** @type {?} */
            const loadingParam = {
                loadingService: this.loadingService,
                loadingConfig: loadingConfig
            };
            /** @type {?} */
            const commonParams = new CommonParams();
            commonParams.methodType = this.methodType;
            commonParams.ruleId = this.currentRuleId;
            commonParams.option = this.importOption;
            commonParams.fileName = temRes['fileName'];
            commonParams.repository = this.frameContext.repository;
            commonParams.suffix = suffix;
            commonParams.loadingParam = loadingParam;
            commonParams.i18nResource = this.i18nResource;
            commonParams.securityLevelName = this.securityLevelName;
            this.dataImportService.ImportByRuleId(commonParams);
            /** @type {?} */
            const unsubscriber = this.dataImportService.complete.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                this.loadingService.clearAll();
                // this.dataImportService.DataIeProgressParams['ImportProgressValue'] = 100;
                // this.DataIeProgressDialog.close();
                if (data === '') {
                    this.notify.success(this.import_success);
                    unsubscriber.unsubscribe();
                    //导入数据库后刷新界面数据
                    if (this.importOption.importdbRefresh === true) {
                        if (this.listDataSer !== null && this.frameContext !== null) {
                            /** @type {?} */
                            const filterConditionList = this.frameContext.uiState['filterConditionList'];
                            if (filterConditionList !== undefined && filterConditionList !== null && typeof (filterConditionList) === 'string') {
                                this.listDataSer.load(filterConditionList).subscribe((/**
                                 * @return {?}
                                 */
                                () => {
                                    console.log('导入数据库后带过滤条件重新加载表单数据');
                                }), (/**
                                 * @param {?} error
                                 * @return {?}
                                 */
                                error => {
                                    console.log('导入数据库后带过滤条件重新加载表单数据异常');
                                }));
                            }
                            else {
                                this.listDataSer.load().subscribe((/**
                                 * @return {?}
                                 */
                                () => {
                                    console.log('导入数据库后重新加载表单数据');
                                }), (/**
                                 * @param {?} error
                                 * @return {?}
                                 */
                                error => {
                                    console.log('导入数据库后重新加载表单数据异常');
                                }));
                            }
                        }
                    }
                    this.needDestroy.emit();
                    this.subject.next(true);
                    this.subject.complete();
                }
                else if (data === '导入表单成功') {
                    this.notify.success(this.import_form_success);
                    unsubscriber.unsubscribe();
                    this.needDestroy.emit();
                    this.subject.next(true);
                    this.subject.complete();
                }
                else if (data === '部分数据导入完成') {
                    this.notify.success(this.i18nResource['partdata-import-success']);
                    unsubscriber.unsubscribe();
                    this.needDestroy.emit();
                    this.subject.next(true);
                    this.subject.complete();
                }
                else if (data === '校验中止') {
                    this.notify.info(this.i18nResource['after_validate_suspend']);
                    unsubscriber.unsubscribe();
                    this.needDestroy.emit();
                    this.subject.next(false);
                    this.subject.complete();
                }
                else {
                    /** @type {?} */
                    const errorlevel = this.dataImportService.errorlevel;
                    if (errorlevel === 'Info') {
                        this.messageShow('info', data);
                    }
                    else if (errorlevel === 'Warning') {
                        this.messageShow('warning', data);
                    }
                    else {
                        this.messageShow('error', this.import_fail + data);
                    }
                    unsubscriber.unsubscribe();
                    this.needDestroy.emit();
                    this.subject.next(false);
                    this.subject.complete();
                }
            }));
        }
    }
    /**
     * @param {?} type
     * @param {?} message
     * @return {?}
     */
    messageShow(type, message) {
        if (this.msgService) {
            if (type === 'info') {
                this.msgService.info(message);
            }
            else if (type === 'warning') {
                this.msgService.warning(message);
            }
            else {
                this.msgService.error(message);
            }
        }
        else {
            if (type === 'info') {
                this.notify.info(message);
            }
            else if (type === 'warning') {
                this.notify.warning(message);
            }
            else {
                this.notify.error(message);
            }
        }
    }
}
ImportDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-import-dialog',
                template: "<!-- <div class=\"container\">\r\n    <div region=\"south\" class=\"south mgleft\">\r\n        <table>\r\n            <tr>\r\n                <td class=\"mkwidth\">\r\n                    <label> </label>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"mkwidth\">\r\n                    <label> </label>\r\n                </td>\r\n                <td>\r\n                    <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\r\n                </td>\r\n            </tr>\r\n            <tr *ngIf=\"selectrule\">\r\n                <td class=\"mkwidth\">\r\n                    <label for=\"f_select_rule\">{{rule_list}}</label>\r\n                </td>\r\n                <td>\r\n                    <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\" [enableClear]=\"false\"\r\n                        [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\r\n                    </input-group>\r\n                </td>\r\n            </tr>\r\n            <tr *ngIf=\"selectrule === false\">\r\n                <td class=\"mkwidth\">\r\n                    <label> </label>\r\n                </td>\r\n            </tr>\r\n            <tr *ngIf=\"selectfiletype\">\r\n                <td class=\"mkwidth\">\r\n                    <label for=\"f_select_fileType\">{{file_type}}</label>\r\n                </td>\r\n                <td>\r\n                    <farris-combo-list id=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\" [textField]=\"'label'\" [data]=\"fileListItems\"\r\n                        (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\r\n                    <i class=\"material-icons\" style=\"color: lightblue;\">file_download</i>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td class=\"mkwidth\">\r\n                    <label for=\"f_upload\">{{import_file}}</label>\r\n                </td>\r\n                <td>\r\n                    <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\" [accept]=\"acceptFileType\"\r\n                        (change)=\"selectedFileOnChange($event)\" />\r\n                    <input type=\"text\" id=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\">\r\n                    <i class=\"material-icons\" style=\"color: lightblue;\">create_new_folder</i>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n</div> -->\r\n\r\n<form class=\"px-3 px-md-4 farris-form d-flex flex-wrap\">\r\n  <div class=\"col-12\" style=\"margin-top: 67px\">\r\n    <div *ngIf=\"enableRuntimeCustom === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <div class=\"form-group farris-form-group\">\r\n        <label class=\" col-form-label\">\r\n          <span class=\"farris-label-text\">{{rule_list}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap\">\r\n          <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\"\r\n                       [enableClear]=\"false\"\r\n                       [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\r\n          </input-group>\r\n        </div>\r\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"openSelectRule($event)\">filter_none</i> -->\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"enableRuntimeCustom === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <span>&nbsp;</span>\r\n    </div>\r\n    <div *ngIf=\"showfiletype === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <span>&nbsp;</span>\r\n    </div>\r\n    <div *ngIf=\"showfiletype === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <div class=\"form-group farris-form-group\" style=\"width: 450px\">\r\n        <label class=\"col-form-label\">\r\n          <span class=\"farris-label-text\">{{file_type}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap\">\r\n          <farris-combo-list id=\"f_select_fileType\" name=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\"\r\n                             [textField]=\"'label'\"\r\n                             [readonly]=\"canDownloadTemplate() === false\" [editable]=\"false\" [enableClear]=\"false\"\r\n                             [data]=\"fileListItems\" (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\r\n        </div>\r\n        <span>&nbsp;</span>\r\n        <button [disabled]=\"canDownloadTemplate() === false\" class=\"btn btn-secondary mr-2\" type=\"button\"\r\n                (click)=\"DownloadTemplate()\">{{download_template}}</button>\r\n        <!-- <i *ngIf=\"canDownloadTemplate() === true\" class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"DownloadTemplate()\">file_download</i> -->\r\n        <!-- <i *ngIf=\"canDownloadTemplate() === false\" class=\"material-icons\" style=\"color: white;\">file_download</i> -->\r\n        <!-- <span *ngIf=\"enableRuntimeCustom === true\"  class=\"f-icon f-icon-custom\" style=\"color: #388FFF;cursor: pointer;\"></span>\r\n        <span *ngIf=\"enableRuntimeCustom === false\"  class=\"f-icon f-icon-custom\" style=\"color:white\"></span> -->\r\n        <span class=\"f-icon f-icon-custom\" style=\"color:white\"></span>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <div class=\"form-group farris-form-group\">\r\n        <label class=\" col-form-label\">\r\n          <span class=\"farris-label-text\">{{import_file}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap\">\r\n          <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\"\r\n                 [accept]=\"acceptFileType\"\r\n                 (change)=\"selectedFileOnChange($event)\"/>\r\n          <div class=\"input-group\">\r\n            <input type=\"text\" id=\"f_upload\" name=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\"\r\n                   [(ngModel)]=\"fileName\"\r\n                   [placeholder]=\"import_placeholder\">\r\n            <span class=\"input-group-btn\">\r\n                            <button class=\"btn btn-primary\" type=\"button\"\r\n                                    (click)=\"SelectFile()\">{{choose_file}}</button>\r\n                        </span>\r\n          </div>\r\n          <!-- <input-group id=\"f_upload\" name=\"f_upload\" [editable]=\"false\" [enableClear]=\"false\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\"></input-group> -->\r\n        </div>\r\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"SelectFile()\">attachment</i> -->\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"enableSecurityLevelSelect\" class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <div class=\"form-group farris-form-group\" style=\"width: 340px\">\r\n        <label class=\"col-form-label\">\r\n          <span class=\"farris-label-text\">{{i18nResource.security_level}}</span>\r\n        </label>\r\n        <div class=\"farris-input-wrap\">\r\n          <farris-combo-list name=\"f_select_securitylevel\"  [(ngModel)]=\"securityLevelName\" [idField]=\"'value'\"\r\n                             [valueField]=\"'value'\" [textField]=\"'label'\" [editable]=\"false\" [enableClear]=\"false\" [data]=\"securityLevelItems\"></farris-combo-list>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\r\n      <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</form>\r\n\r\n\r\n<ng-template #selectFooter>\r\n  <!-- <img class=\"setting\" src=\"/platform/common/web/@gsp-dip/img/setting.svg\" alt=\"\u8BBE\u7F6E\" (click)=\"clickSetting()\" /> -->\r\n\r\n  <!-- <button *ngIf=\"enableTemplate\" type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"DownloadTemplate()\">{{download_template}}</button> -->\r\n  <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"Cancel()\">{{ie_cancel}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"Ok()\">{{ie_ok}}</button>\r\n</ng-template>\r\n",
                providers: [NotifyService, DataImportService
                ],
                styles: [".barmanager{position:absolute;bottom:0;height:50px;right:30px;padding-left:50px}.top{top:100px;position:relative}table{width:100%}.mkwidth{width:75px;line-height:28px}.longlen{width:400px}.setting{position:absolute;top:286px;right:550px;width:16px;height:16px;-webkit-transition:.3s;transition:.3s;cursor:pointer;opacity:.2;z-index:2}.setting:hover{-webkit-transform:rotate(100deg);transform:rotate(100deg)}.downloadicon,.fileicon{position:absolute;width:26px;height:26px}"]
            }] }
];
/** @nocollapse */
ImportDialogComponent.ctorParameters = () => [
    { type: DataImportService },
    { type: NotifyService },
    { type: LoadingService },
    { type: HttpClient },
    { type: Injector },
    { type: BsModalService },
    { type: ListDataService },
    { type: MessagerService },
    { type: ComponentFactoryResolver }
];
ImportDialogComponent.propDecorators = {
    modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
    ruleId: [{ type: Input }],
    importOption: [{ type: Input }],
    frameContext: [{ type: Input }],
    methodType: [{ type: Input }],
    subject: [{ type: Input }],
    fileUpload: [{ type: ViewChild, args: ['fileUpload',] }],
    needDestroy: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    ImportDialogComponent.prototype.modalFooter;
    /** @type {?} */
    ImportDialogComponent.prototype.ruleId;
    /** @type {?} */
    ImportDialogComponent.prototype.importOption;
    /** @type {?} */
    ImportDialogComponent.prototype.frameContext;
    /** @type {?} */
    ImportDialogComponent.prototype.methodType;
    /** @type {?} */
    ImportDialogComponent.prototype.subject;
    /** @type {?} */
    ImportDialogComponent.prototype.DataIeProgressDialog;
    /** @type {?} */
    ImportDialogComponent.prototype.showfiletype;
    /** @type {?} */
    ImportDialogComponent.prototype.enableRuntimeCustom;
    /** @type {?} */
    ImportDialogComponent.prototype.recordRule;
    /** @type {?} */
    ImportDialogComponent.prototype.extendInfo;
    /** @type {?} */
    ImportDialogComponent.prototype.currentRuleName;
    /** @type {?} */
    ImportDialogComponent.prototype.currentRuleId;
    /** @type {?} */
    ImportDialogComponent.prototype.currentRuleFileType;
    /** @type {?} */
    ImportDialogComponent.prototype.enableTemplate;
    /** @type {?} */
    ImportDialogComponent.prototype.closeXLSX;
    /** @type {?} */
    ImportDialogComponent.prototype.enableSecurityLevelSelect;
    /** @type {?} */
    ImportDialogComponent.prototype.securityLevelName;
    /** @type {?} */
    ImportDialogComponent.prototype.acceptFileType;
    /** @type {?} */
    ImportDialogComponent.prototype.ImportSecretRemindInfo;
    /** @type {?} */
    ImportDialogComponent.prototype.fileName;
    /** @type {?} */
    ImportDialogComponent.prototype.fileUpload;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.origin;
    /** @type {?} */
    ImportDialogComponent.prototype.uploader;
    /** @type {?} */
    ImportDialogComponent.prototype.needDestroy;
    /** @type {?} */
    ImportDialogComponent.prototype.valueField;
    /** @type {?} */
    ImportDialogComponent.prototype.import_file;
    /** @type {?} */
    ImportDialogComponent.prototype.choose_file;
    /** @type {?} */
    ImportDialogComponent.prototype.import_placeholder;
    /** @type {?} */
    ImportDialogComponent.prototype.file_type;
    /** @type {?} */
    ImportDialogComponent.prototype.download_template;
    /** @type {?} */
    ImportDialogComponent.prototype.ie_cancel;
    /** @type {?} */
    ImportDialogComponent.prototype.ie_ok;
    /** @type {?} */
    ImportDialogComponent.prototype.choose_truefile;
    /** @type {?} */
    ImportDialogComponent.prototype.download_template_ok;
    /** @type {?} */
    ImportDialogComponent.prototype.download_template_fail;
    /** @type {?} */
    ImportDialogComponent.prototype.upload_fail;
    /** @type {?} */
    ImportDialogComponent.prototype.import_success;
    /** @type {?} */
    ImportDialogComponent.prototype.import_form_success;
    /** @type {?} */
    ImportDialogComponent.prototype.import_fail;
    /** @type {?} */
    ImportDialogComponent.prototype.rule_list;
    /** @type {?} */
    ImportDialogComponent.prototype.select_xlsx_notify;
    /** @type {?} */
    ImportDialogComponent.prototype.i18nResource;
    /** @type {?} */
    ImportDialogComponent.prototype.lookupIcon;
    /** @type {?} */
    ImportDialogComponent.prototype.fileListItems;
    /** @type {?} */
    ImportDialogComponent.prototype.securityLevelItems;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.dataImportService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.listDataSer;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogComponent.prototype.resolver;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0LWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWRpcC9kYXRhLWltcC1leHAvIiwic291cmNlcyI6WyJsaWIvaW1wb3J0LWRpYWxvZy9pbXBvcnQtZGlhbG9nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCx3QkFBd0IsRUFDeEIsVUFBVSxFQUNWLFlBQVksRUFDWixRQUFRLEVBQ1IsS0FBSyxFQUVMLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxxREFBcUQsQ0FBQztBQUlqRixPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSw4Q0FBOEMsQ0FBQztBQUMvRSxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUMsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRCxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFDMUQsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUM3QixPQUFPLEVBQUMsV0FBVyxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsaUJBQWlCLEVBQUMsTUFBTSw4QkFBOEIsQ0FBQztBQUN6RyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFDaEQsT0FBTyxFQUFhLGNBQWMsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQzVELE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHNDQUFzQyxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDekQs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Qiw0Q0FBb0I7O0lBQ3BCLDBDQUFrQjs7SUFDbEIsbURBQTJCOztJQUMzQiw2Q0FBa0I7O0lBc0NsQiwyQ0FBcUQ7O0lBR3JELDhDQVFFOztJQUVGLG1EQUF3Qjs7Ozs7SUFoRHRCLGtEQUE0Qzs7Ozs7SUFDNUMsdUNBQTZCOzs7OztJQUM3QiwrQ0FBc0M7Ozs7O0lBQ3RDLHFDQUF3Qjs7Ozs7SUFDeEIseUNBQTBCOzs7OztJQUMxQiw2Q0FBb0M7Ozs7O0lBQ3BDLDRDQUFvQzs7Ozs7SUFDcEMsMkNBQW1DOzs7OztJQUNuQyx5Q0FBMEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5qZWN0b3IsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE91dHB1dCxcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3Q2hpbGRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtGaWxlVXBsb2FkZXJ9IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvZmlsZS11cGxvYWRlcic7XHJcbmltcG9ydCB7RmlsZUl0ZW19IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvZmlsZS1pdGVtJztcclxuaW1wb3J0IHtQYXJzZWRSZXNwb25zZUhlYWRlcnN9IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvcGFyc2VkLXJlc3BvbnNlLWhlYWRlcnMnO1xyXG5cclxuaW1wb3J0IHtEYXRhSW1wb3J0U2VydmljZX0gZnJvbSAnLi4vc2VydmljZS9EYXRhSUVTZXJ2aWNlL2RhdGEtaW1wb3J0LnNlcnZpY2UnO1xyXG5pbXBvcnQge0ZyYW1lQ29udGV4dH0gZnJvbSAnQGZhcnJpcy9kZXZraXQnO1xyXG5pbXBvcnQge05vdGlmeVNlcnZpY2V9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHtMb2FkaW5nU2VydmljZX0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHtNZXRob2RUeXBlfSBmcm9tICcuLi9tb2RlbC9EYXRhSUVUeXBlL01ldGhvZFR5cGUnO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge0RhdGFJRVV0aWxzLCBGaWxlVHlwZVV0aWwsIGlzTnVsbE9yRW1wdHksIGlzTnVsbE9yVW5kZWZpbmVkfSBmcm9tICcuLi9zZXJ2aWNlL1V0aWxzL0RhdGFJRVV0aWxzJztcclxuaW1wb3J0IHtIdHRwQ2xpZW50fSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7QnNNb2RhbFJlZiwgQnNNb2RhbFNlcnZpY2V9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQge1J1bGVTZWxlY3RDb21wb25lbnR9IGZyb20gJy4uL3J1bGUtc2VsZWN0L3J1bGUtc2VsZWN0LmNvbXBvbmVudCc7XHJcbmltcG9ydCB7TWVzc2FnZXJTZXJ2aWNlfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHtMaXN0RGF0YVNlcnZpY2V9IGZyb20gJ0BmYXJyaXMvY29tbWFuZC1zZXJ2aWNlcyc7XHJcbmltcG9ydCB7RmlsZUNvbnN0fSBmcm9tICcuLi9tb2RlbC91dGlscy9GaWxlQ29uc3QnO1xyXG5pbXBvcnQge0RhdGFpZVByb2dyZXNzQ29tcG9uZW50fSBmcm9tICcuLi9iYWtjb21wb25lbnRzL2RhdGFpZS1wcm9ncmVzcy9kYXRhaWUtcHJvZ3Jlc3MuY29tcG9uZW50JztcclxuaW1wb3J0IHtDb21tb25QYXJhbXN9IGZyb20gXCIuLi9zZXJ2aWNlL0VudGl0eS9Db21tb25QYXJhbXNcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLWltcG9ydC1kaWFsb2cnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9pbXBvcnQtZGlhbG9nLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9pbXBvcnQtZGlhbG9nLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtOb3RpZnlTZXJ2aWNlLCBEYXRhSW1wb3J0U2VydmljZVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEltcG9ydERpYWxvZ0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgQFZpZXdDaGlsZCgnc2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgLy8g6KeE5YiZSUQg6K+laWTkuLrooajljZXkuIrphY3nva7nmoTop4TliJlpZFxyXG4gIEBJbnB1dCgpXHJcbiAgcnVsZUlkID0gJyc7XHJcbiAgLy8g6L+H5ruk5p2h5Lu2XHJcbiAgQElucHV0KClcclxuICBpbXBvcnRPcHRpb246IGFueSA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBmcmFtZUNvbnRleHQ6IEZyYW1lQ29udGV4dCA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBtZXRob2RUeXBlOiBNZXRob2RUeXBlO1xyXG4gIEBJbnB1dCgpXHJcbiAgc3ViamVjdDogU3ViamVjdDxCb29sZWFuPiA9IG51bGw7XHJcblxyXG4gIERhdGFJZVByb2dyZXNzRGlhbG9nOiBCc01vZGFsUmVmO1xyXG5cclxuICBzaG93ZmlsZXR5cGUgPSB0cnVlO1xyXG4gIGVuYWJsZVJ1bnRpbWVDdXN0b20gPSBmYWxzZTtcclxuICAvLyDorrDlvZXnmoTop4TliJlcclxuICByZWNvcmRSdWxlID0gbnVsbDtcclxuICBleHRlbmRJbmZvOiBhbnk7XHJcbiAgLy/lvZPliY3pgInmi6nop4TliJnnmoRpZOOAgeWQjeensOWSjOaWh+S7tuexu+Wei1xyXG4gIGN1cnJlbnRSdWxlTmFtZSA9ICcnO1xyXG4gIGN1cnJlbnRSdWxlSWQgPSAnJztcclxuICBjdXJyZW50UnVsZUZpbGVUeXBlID0gJyc7XHJcbiAgZW5hYmxlVGVtcGxhdGUgPSB0cnVlO1xyXG4gIGNsb3NlWExTWCA9IGZhbHNlO1xyXG4gIGVuYWJsZVNlY3VyaXR5TGV2ZWxTZWxlY3QgPSBmYWxzZTtcclxuICBzZWN1cml0eUxldmVsTmFtZSA9ICcnO1xyXG5cclxuXHJcbiAgYWNjZXB0RmlsZVR5cGUgPSAnLmNzdiwueGxzbSwueGxzeCwueGxzLC5wZGYsLnhtbCwuZXQnO1xyXG4gIEltcG9ydFNlY3JldFJlbWluZEluZm8gPSAnJztcclxuICAvLyDmlofku7blkI3np7BcclxuICBmaWxlTmFtZSA9ICcnO1xyXG4gIC8vIGxvYWRpbmdDb21wOiBMb2FkaW5nQ29tcG9uZW50ID0gbnVsbDtcclxuICBAVmlld0NoaWxkKCdmaWxlVXBsb2FkJylcclxuICBmaWxlVXBsb2FkOiBFbGVtZW50UmVmO1xyXG4gIHByaXZhdGUgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuICB1cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xyXG4gICAgdXJsOiAnJyxcclxuICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgYXV0b1VwbG9hZDogZmFsc2UsXHJcbiAgICBpdGVtQWxpYXM6ICd1cGxvYWRlZGZpbGUnXHJcbiAgfSk7XHJcbiAgLy8g5o6n5Yi2RGVzdHJveeihqOWNleS4reeahOi+k+WFpee7hOS7tlxyXG4gIEBPdXRwdXQoKVxyXG4gIG5lZWREZXN0cm95ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIHZhbHVlRmllbGQ6IGFueSA9IG51bGw7XHJcblxyXG4gIC8v5Zu96ZmF5YyW55u45YWz5Y+Y6YePXHJcbiAgaW1wb3J0X2ZpbGU6IHN0cmluZztcclxuICBjaG9vc2VfZmlsZTogc3RyaW5nO1xyXG4gIGltcG9ydF9wbGFjZWhvbGRlcjogc3RyaW5nO1xyXG4gIGZpbGVfdHlwZTogc3RyaW5nO1xyXG4gIGRvd25sb2FkX3RlbXBsYXRlOiBzdHJpbmc7XHJcbiAgaWVfY2FuY2VsOiBzdHJpbmc7XHJcbiAgaWVfb2s6IHN0cmluZztcclxuICBjaG9vc2VfdHJ1ZWZpbGU6IHN0cmluZztcclxuICBkb3dubG9hZF90ZW1wbGF0ZV9vazogc3RyaW5nO1xyXG4gIGRvd25sb2FkX3RlbXBsYXRlX2ZhaWw6IHN0cmluZztcclxuICB1cGxvYWRfZmFpbDogc3RyaW5nO1xyXG4gIGltcG9ydF9zdWNjZXNzOiBzdHJpbmc7XHJcbiAgaW1wb3J0X2Zvcm1fc3VjY2Vzczogc3RyaW5nO1xyXG4gIGltcG9ydF9mYWlsOiBzdHJpbmc7XHJcbiAgcnVsZV9saXN0OiBzdHJpbmc7XHJcbiAgc2VsZWN0X3hsc3hfbm90aWZ5OiBzdHJpbmc7XHJcbiAgaTE4blJlc291cmNlOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBkYXRhSW1wb3J0U2VydmljZTogRGF0YUltcG9ydFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxpc3REYXRhU2VyOiBMaXN0RGF0YVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxyXG4gICkge1xyXG4gICAgdGhpcy51cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gdGhpcy5JbXBvcnQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMudXBsb2FkZXIub25FcnJvckl0ZW0gPSB0aGlzLkVycm9yTG9nLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdGaWxlID0gdGhpcy5hZnRlckFkZEZpbGU7XHJcbiAgICBEYXRhSUVVdGlscy5nZXRUcmFuc2xhdGVWYWx1ZShodHRwKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgdGhpcy5pbXBvcnRfZmlsZSA9IHJlc1snaW1wb3J0X2ZpbGUnXTtcclxuICAgICAgdGhpcy5jaG9vc2VfZmlsZSA9IHJlc1snY2hvb3NlX2ZpbGUnXTtcclxuICAgICAgdGhpcy5maWxlX3R5cGUgPSByZXNbJ2ZpbGVfdHlwZSddO1xyXG4gICAgICB0aGlzLmltcG9ydF9wbGFjZWhvbGRlciA9IHJlc1snaW1wb3J0X3BsYWNlaG9sZGVyJ107XHJcbiAgICAgIHRoaXMuZG93bmxvYWRfdGVtcGxhdGUgPSByZXNbJ2Rvd25sb2FkX3RlbXBsYXRlJ107XHJcbiAgICAgIHRoaXMuaWVfY2FuY2VsID0gcmVzWydpZV9jYW5jZWwnXTtcclxuICAgICAgdGhpcy5pZV9vayA9IHJlc1snaWVfb2snXTtcclxuICAgICAgdGhpcy5jaG9vc2VfdHJ1ZWZpbGUgPSByZXNbJ2Nob29zZV90cnVlZmlsZSddO1xyXG4gICAgICB0aGlzLmRvd25sb2FkX3RlbXBsYXRlX29rID0gcmVzWydkb3dubG9hZF90ZW1wbGF0ZV9vayddO1xyXG4gICAgICB0aGlzLmRvd25sb2FkX3RlbXBsYXRlX2ZhaWwgPSByZXNbJ2Rvd25sb2FkX3RlbXBsYXRlX2ZhaWwnXTtcclxuICAgICAgdGhpcy51cGxvYWRfZmFpbCA9IHJlc1sndXBsb2FkX2ZhaWwnXTtcclxuICAgICAgdGhpcy5pbXBvcnRfc3VjY2VzcyA9IHJlc1snaW1wb3J0X3N1Y2Nlc3MnXTtcclxuICAgICAgdGhpcy5pbXBvcnRfZm9ybV9zdWNjZXNzID0gcmVzWydpbXBvcnRfZm9ybV9zdWNjZXNzJ107XHJcbiAgICAgIHRoaXMuaW1wb3J0X2ZhaWwgPSByZXNbJ2ltcG9ydF9mYWlsJ107XHJcbiAgICAgIHRoaXMucnVsZV9saXN0ID0gcmVzWydydWxlX2xpc3QnXTtcclxuICAgICAgdGhpcy5zZWxlY3RfeGxzeF9ub3RpZnkgPSByZXNbJ3NlbGVjdF94bHN4X25vdGlmeSddO1xyXG4gICAgICB0aGlzLmkxOG5SZXNvdXJjZSA9IHJlcztcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGxvb2t1cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXdpbmRvd3NcIj48L2k+JztcclxuXHJcblxyXG4gIHB1YmxpYyBmaWxlTGlzdEl0ZW1zID0gW1xyXG4gICAge2lkOiBGaWxlQ29uc3QueGxzLCBsYWJlbDogRmlsZUNvbnN0Lnhsc30sXHJcbiAgICB7aWQ6IEZpbGVDb25zdC54bHN4LCBsYWJlbDogRmlsZUNvbnN0Lnhsc3h9LFxyXG4gICAge2lkOiBGaWxlQ29uc3QueGxzbSwgbGFiZWw6IEZpbGVDb25zdC54bHNtfSxcclxuICAgIHtpZDogRmlsZUNvbnN0LmV0LCBsYWJlbDogRmlsZUNvbnN0LmV0fSxcclxuICAgIC8vIHsgaWQ6IEZpbGVDb25zdC5jc3YsIGxhYmVsOiBGaWxlQ29uc3QuY3N2IH0sXHJcbiAgICAvLyB7IGlkOiBGaWxlQ29uc3QucGRmLCBsYWJlbDogRmlsZUNvbnN0LnBkZiB9LFxyXG4gICAgLy8geyBpZDogRmlsZUNvbnN0LnhtbCwgbGFibGU6IEZpbGVDb25zdC54bWwgfVxyXG4gIF07XHJcblxyXG4gIHNlY3VyaXR5TGV2ZWxJdGVtcyA9IFtdO1xyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIGxldCBleHRlbmRJbmZvID0gdGhpcy5yZWNvcmRSdWxlLmV4dGVuZEluZm87XHJcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGV4dGVuZEluZm8pKSB7XHJcbiAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IEpTT04ucGFyc2UoZXh0ZW5kSW5mbyk7XHJcbiAgICAgIHRoaXMuSW1wb3J0U2VjcmV0UmVtaW5kSW5mbyA9IHRoaXMuZXh0ZW5kSW5mb1snSW1wb3J0U2VjcmV0UmVtaW5kSW5mbyddO1xyXG4gICAgICB0aGlzLmNsb3NlWExTWCA9IHRoaXMuZXh0ZW5kSW5mb1snY2xvc2VYTFNYJ107XHJcbiAgICAgIGlmICh0aGlzLmNsb3NlWExTWCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuZmlsZUxpc3RJdGVtcyA9IFtcclxuICAgICAgICAgIHtpZDogRmlsZUNvbnN0LnhscywgbGFiZWw6IEZpbGVDb25zdC54bHN9LFxyXG4gICAgICAgICAge2lkOiBGaWxlQ29uc3QueGxzbSwgbGFiZWw6IEZpbGVDb25zdC54bHNtfSxcclxuICAgICAgICAgIHtpZDogRmlsZUNvbnN0LmV0LCBsYWJlbDogRmlsZUNvbnN0LmV0fVxyXG4gICAgICAgIF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHNlY3VyaXR5TGV2ZWxzID0gdGhpcy5yZWNvcmRSdWxlLnNlY3VyaXR5TGV2ZWxzO1xyXG4gICAgaWYgKCFpc051bGxPckVtcHR5KHNlY3VyaXR5TGV2ZWxzKSkge1xyXG4gICAgICB0aGlzLmVuYWJsZVNlY3VyaXR5TGV2ZWxTZWxlY3QgPSB0cnVlO1xyXG4gICAgICBzZWN1cml0eUxldmVscy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxldmVsID0ge1xyXG4gICAgICAgICAgdmFsdWU6IGUubmFtZSxcclxuICAgICAgICAgIGxhYmVsOiBlLm5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2VjdXJpdHlMZXZlbEl0ZW1zLnB1c2gobGV2ZWwpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZWN1cml0eUxldmVsTmFtZSA9IHRoaXMuc2VjdXJpdHlMZXZlbEl0ZW1zWzBdLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50UnVsZUlkID0gdGhpcy5yZWNvcmRSdWxlLnJ1bGVJZDtcclxuICAgIHRoaXMuY3VycmVudFJ1bGVOYW1lID0gdGhpcy5yZWNvcmRSdWxlLnJ1bGVOYW1lO1xyXG4gICAgdGhpcy52YWx1ZUZpZWxkID0gRmlsZVR5cGVVdGlsLmdldEZpbGVUeXBlTmFtZSh0aGlzLnJlY29yZFJ1bGUuZmlsZVR5cGUpO1xyXG4gICAgaWYgKHRoaXMudmFsdWVGaWVsZCA9PT0gJycpIHtcclxuICAgICAgLy/mnKrlnKjlvZPliY3lj6/pgInmlofku7bnmoTnsbvlnovml7bvvIzkuI3mmL7npLrpgInmlofku7bnsbvlnovmjqfku7ZcclxuICAgICAgdGhpcy5zaG93ZmlsZXR5cGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSA9IHRoaXMudmFsdWVGaWVsZDtcclxuICAgIHRoaXMuY29udHJvbEZpbGVUeXBlKCk7XHJcbiAgICBpZiAodGhpcy5pbXBvcnRPcHRpb24uZW5hYmxlUnVudGltZUN1c3RvbSA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmVuYWJsZVJ1bnRpbWVDdXN0b20gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIG9wZW5TZWxlY3RSdWxlKCRldmVudCkge1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAvL+i/h+a7pOinhOWImeaXtueUqOihqOWNleWRveS7pOWkhOmFjee9rueahOinhOWImeadpei/h+a7pO+8jOWboOatpOeUqHJ1bGVJZO+8jOiAjOS4jeaYr2N1cnJlbnRSdWxlSWRcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvZGlwL3YxLjAvZGF0YUllUnVsZU1hbmFnZS9maWx0ZXJSdWxlc0J5UnVsZUlkQW5kVm9JZCc7XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICBydWxlSWQ6IHRoaXMucnVsZUlkLFxyXG4gICAgICBydWxlVHlwZTogMCxcclxuICAgICAgdm9JZDogdGhpcy5pbXBvcnRPcHRpb24udm9JZCxcclxuICAgICAgbWV0aG9kVHlwZTogdGhpcy5tZXRob2RUeXBlLFxyXG4gICAgICBpbXBvcnRDaGlsZE5vZGVDb2RlOiB0aGlzLmltcG9ydE9wdGlvbi5pbXBvcnRDaGlsZE5vZGVDb2RlLFxyXG4gICAgICBjbG9zZVhsc3g6IHRoaXMuY2xvc2VYTFNYXHJcbiAgICB9O1xyXG4gICAgdGhpcy5odHRwLnBvc3QodXJsLCBib2R5KS5zdWJzY3JpYmUoKFJ1bGVNZ3JzOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICBpZiAoUnVsZU1ncnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmkxOG5SZXNvdXJjZVsncnVsZXNlbGVjdF9saXN0ZW1wdHknXSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShSdWxlU2VsZWN0Q29tcG9uZW50KTtcclxuICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5ydWxlSWQgPSB0aGlzLnJ1bGVJZDtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS52b0lkID0gdGhpcy5pbXBvcnRPcHRpb24udm9JZDtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5ydWxlVHlwZSA9IDA7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UuUnVsZU1ncnNEYXRhID0gUnVsZU1ncnM7XHJcbiAgICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiB0aGlzLnJ1bGVfbGlzdCxcclxuICAgICAgICB3aWR0aDogOTUwLFxyXG4gICAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICAgIGJ1dHRvbnM6IGNvbXBSZWYuaW5zdGFuY2UubW9kYWxGb290ZXIsXHJcbiAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZSxcclxuICAgICAgICBzaG93TWF4QnV0dG9uOiBmYWxzZSxcclxuICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2Uub2tNb2RhbC5zdWJzY3JpYmUoUnVsZU1nciA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UnVsZUlkID0gUnVsZU1nci5pZDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRSdWxlTmFtZSA9IFJ1bGVNZ3IubmFtZTtcclxuICAgICAgICB0aGlzLnZhbHVlRmllbGQgPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZVR5cGVOYW1lKFJ1bGVNZ3IuZmlsZVR5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSA9IHRoaXMudmFsdWVGaWVsZDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xGaWxlVHlwZSgpO1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICB0aGlzLm5vdGlmeS5lcnJvcihlcnJvci5lcnJvci5NZXNzYWdlKTtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IuZXJyb3IuTWVzc2FnZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNhbkRvd25sb2FkVGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBzdWZmaXggPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZUV4dGVuc2lvbih0aGlzLnZhbHVlRmllbGQpO1xyXG4gICAgY29uc3QgY2FuTGlzdCA9IFsnLnhscycsICcueGxzeCcsICcueGxzbScsICcuZXQnXTtcclxuICAgIGlmIChjYW5MaXN0LmZpbmRJbmRleCh0ID0+IHQgPT09IHN1ZmZpeCkgPCAwKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gIH1cclxuXHJcbiAgLy8g6YCJ5oup5paH5Lu25ZCO5LqL5Lu2XHJcbiAgc2VsZWN0ZWRGaWxlT25DaGFuZ2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IHN0cjogc3RyaW5nID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG4gICAgaWYgKHN0ciA9PT0gJycpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaW5kZXggPSBzdHIubGFzdEluZGV4T2YoJ1xcXFwnKTtcclxuICAgIHRoaXMuZmlsZU5hbWUgPSBzdHIuc3Vic3RyaW5nKGluZGV4ICsgMSk7XHJcbiAgICBpZiAodGhpcy5maWxlTmFtZS5zcGxpdChcIi5cIikubGVuZ3RoID09PSAyICYmIHRoaXMuZmlsZU5hbWUuc3BsaXQoXCIuXCIpWzFdID09PSBcImpwZ1wiKSB7XHJcbiAgICAgIHRoaXMudXBsb2FkZXIucXVldWUgPSBbXTtcclxuICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmNob29zZV90cnVlZmlsZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKCfpmJ/liJfkuK3nmoTmlofku7YnICsgdGhpcy51cGxvYWRlci5xdWV1ZVswXSk7XHJcbiAgfVxyXG5cclxuICAvLyDlhbPpl63nqpflj6NcclxuICBwdWJsaWMgQ2xvc2UoKSB7XHJcbiAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICB9XHJcblxyXG4gIC8vIOmAieaLqeaWh+S7tuS6i+S7tlxyXG4gIHB1YmxpYyBTZWxlY3RGaWxlKCk6IGFueSB7XHJcbiAgICB0aGlzLmZpbGVVcGxvYWQubmF0aXZlRWxlbWVudC5jbGljaygpO1xyXG4gIH1cclxuXHJcbiAgZmlsZVR5cGVWYWx1ZUNoYW5nZSgpIHtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xGaWxlVHlwZSgpID09PSAnLnhsc3gnKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5LmluZm8odGhpcy5zZWxlY3RfeGxzeF9ub3RpZnkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29udHJvbEZpbGVUeXBlKCkge1xyXG4gICAgY29uc3Qgc3VmZml4ID0gRmlsZVR5cGVVdGlsLmdldEZpbGVFeHRlbnNpb24odGhpcy52YWx1ZUZpZWxkKTtcclxuICAgIGlmIChzdWZmaXggIT09IG51bGwpIHtcclxuICAgICAgdGhpcy5hY2NlcHRGaWxlVHlwZSA9IHN1ZmZpeDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWNjZXB0RmlsZVR5cGUgPSAnKic7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3VmZml4O1xyXG4gIH1cclxuXHJcbiAgY2xpY2tTZXR0aW5nKCkge1xyXG4gICAgdGhpcy5ub3RpZnkuaW5mbygn6K6+572u5LiA5LiLJyk7XHJcbiAgfVxyXG5cclxuICAvLyDkuIvovb3mqKHmnb9cclxuICBwdWJsaWMgRG93bmxvYWRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgbGV0IHN1ZmZpeCA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5jYW5Eb3dubG9hZFRlbXBsYXRlKCkgJiYgdGhpcy52YWx1ZUZpZWxkICE9PSB0aGlzLmN1cnJlbnRSdWxlRmlsZVR5cGUpIHtcclxuICAgICAgc3VmZml4ID0gRmlsZVR5cGVVdGlsLmdldEZpbGVFeHRlbnNpb24odGhpcy52YWx1ZUZpZWxkKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW1wb3J0T3B0aW9uWydzZWN1cml0eUxldmVsTmFtZSddID0gdGhpcy5zZWN1cml0eUxldmVsTmFtZTtcclxuICAgIHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuRG93bWxvYWRUZW1wbGF0ZSh0aGlzLmN1cnJlbnRSdWxlSWQsIHRoaXMuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnksIHRoaXMuaW1wb3J0T3B0aW9uLCBzdWZmaXgpO1xyXG4gICAgY29uc3QgdW5zdWJzY3JpYmVyID0gdGhpcy5kYXRhSW1wb3J0U2VydmljZS5jb21wbGV0ZS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgaWYgKGRhdGEgPT09ICcnKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuc3VjY2Vzcyh0aGlzLmRvd25sb2FkX3RlbXBsYXRlX29rKTtcclxuICAgICAgICB1bnN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5lcnJvcih0aGlzLmRvd25sb2FkX3RlbXBsYXRlX2ZhaWwgKyBkYXRhKTtcclxuICAgICAgICB1bnN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93UHJvZ3Jlc3NEaWFsb2coKSB7XHJcbiAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoRGF0YWllUHJvZ3Jlc3NDb21wb25lbnQpO1xyXG4gICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgIGNvbXBSZWYuaW5zdGFuY2UuRGF0YUllUHJvZ3Jlc3NQYXJhbXMgPSB0aGlzLmRhdGFJbXBvcnRTZXJ2aWNlLkRhdGFJZVByb2dyZXNzUGFyYW1zO1xyXG4gICAgY29uc3QgbW9kYWxDb25maWcgPSB7XHJcbiAgICAgIHdpZHRoOiA1MzAsXHJcbiAgICAgIGhlaWdodDogNTAsXHJcbiAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgc2hvd0hlYWRlcjogZmFsc2UsXHJcbiAgICAgIHNob3dNYXhCdXR0b246IGZhbHNlLFxyXG4gICAgICBzaG93TWluQnV0dG9uOiBmYWxzZSxcclxuICAgICAgc2hvd0J1dHRvbnM6IGZhbHNlLFxyXG4gICAgICBzaG93Q2xvc2VCdXR0b246IGZhbHNlLFxyXG4gICAgICByZXNpemFibGU6IGZhbHNlXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHRoaXMubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwgbW9kYWxDb25maWcpO1xyXG4gIH1cclxuXHJcbiAgLy8g5re75Yqg5paH5Lu25ZCO5LqL5Lu2XHJcbiAgYWZ0ZXJBZGRGaWxlKGZpbGVJdGVtOiBGaWxlSXRlbSk6IGFueSB7XHJcbiAgfVxyXG5cclxuICAvLyDlvIDlp4vlr7zlhaVcclxuICBwdWJsaWMgT2soKSB7XHJcbiAgICBjb25zb2xlLmxvZygn5byA5aeL5LiK5Lyg77yBJyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLnVwbG9hZGVyLnF1ZXVlKTtcclxuICAgIGNvbnN0IGxvYWRpbmdDb25maWcgPSB7XHJcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRfbG9hZGluZyddXHJcbiAgICB9O1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KGxvYWRpbmdDb25maWcpO1xyXG4gICAgLy8gdGhpcy5EYXRhSWVQcm9ncmVzc0RpYWxvZyA9IHRoaXMuc2hvd1Byb2dyZXNzRGlhbG9nKCk7XHJcbiAgICBjb25zdCBsZW4gPSB0aGlzLnVwbG9hZGVyLnF1ZXVlLmxlbmd0aDtcclxuICAgIGlmIChsZW4gPT09IDApIHtcclxuICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmNob29zZV90cnVlZmlsZSk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGFzdEZpbGVJdGVtID0gdGhpcy51cGxvYWRlci5xdWV1ZVtsZW4gLSAxXTtcclxuICAgIGNvbnN0IG1heEZpbGVTaXplID0gdGhpcy5yZWNvcmRSdWxlLmltcG9ydEZpbGVNYXhTaXplICogMTAyNCAqIDEwMjQ7XHJcbiAgICBpZiAobGFzdEZpbGVJdGVtLmZpbGUuc2l6ZSA+IG1heEZpbGVTaXplKSB7XHJcbiAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5pMThuUmVzb3VyY2VbJ2ltcG9ydGZpbGVfdG9vYmlnJ10gKyB0aGlzLnJlY29yZFJ1bGUuaW1wb3J0RmlsZU1heFNpemUgKyAnTUInKTtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBiZWZSZXN0U2VydmljZSA9IERhdGFJRVV0aWxzLkdldEJlZlJlc3RTZXJ2aWNlKHRoaXMuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnkpO1xyXG4gICAgY29uc3QgcHJlVXJsID0gRGF0YUlFVXRpbHMuR2V0UHJlVXJsKGJlZlJlc3RTZXJ2aWNlLmJhc2VVcmkpO1xyXG4gICAgbGV0IHRlbXBVcmwgPSBgJHtwcmVVcmx9L2ltcG9ydC9VcGxvYWRgO1xyXG4gICAgbGV0IHN1ID0gRGF0YUlFVXRpbHMuZ2V0U3UodGVtcFVybCk7XHJcbiAgICBpZiAodGhpcy5pbXBvcnRPcHRpb25bJ3N1J10gIT09IG51bGwgJiYgdGhpcy5pbXBvcnRPcHRpb25bJ3N1J10gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBzdSA9IHRoaXMuaW1wb3J0T3B0aW9uWydzdSddO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZml4ZWRVcmwgPSB0aGlzLm9yaWdpbiArICcvYXBpL3J1bnRpbWUvZGlwL3YxLjAvcnBjaW1wb3J0L1VwbG9hZD9zdT0nICsgc3U7XHJcbiAgICBsZXQgaGVhZGVycyA9IFt7bmFtZTogJ3N1JywgdmFsdWU6IHN1fV07XHJcblxyXG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmV4dGVuZEluZm8pKSB7XHJcbiAgICAgIGNvbnN0IGVuYWJsZVNlY3VyaXR5TGV2ZWwgPSB0aGlzLmV4dGVuZEluZm9bJ2VuYWJsZVNlY3VyaXR5TGV2ZWwnXSBhcyBib29sZWFuO1xyXG4gICAgICBpZiAoZW5hYmxlU2VjdXJpdHlMZXZlbCkge1xyXG4gICAgICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ2VuYWJsZVNlY3VyaXR5TGV2ZWwnLCB2YWx1ZTogZW5hYmxlU2VjdXJpdHlMZXZlbH0pO1xyXG4gICAgICAgIGNvbnN0IHNlY3VyaXR5TGV2ZWxQcmVmaXggPSB0aGlzLmV4dGVuZEluZm9bJ3NlY3VyaXR5TGV2ZWxQcmVmaXgnXTtcclxuICAgICAgICBjb25zdCBzZWN1cml0eUxldmVsU3VmZml4ID0gdGhpcy5leHRlbmRJbmZvWydzZWN1cml0eUxldmVsU3VmZml4J107XHJcbiAgICAgICAgaGVhZGVycy5wdXNoKHtuYW1lOiAnc2VjdXJpdHlMZXZlbFByZWZpeCcsIHZhbHVlOiBlbmNvZGVVUklDb21wb25lbnQoc2VjdXJpdHlMZXZlbFByZWZpeCl9KTtcclxuICAgICAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdzZWN1cml0eUxldmVsU3VmZml4JywgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudChzZWN1cml0eUxldmVsU3VmZml4KX0pO1xyXG4gICAgICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ3NlY3VyaXR5TGV2ZWxOYW1lJywgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnNlY3VyaXR5TGV2ZWxOYW1lKX0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwbG9hZGVyLnNldE9wdGlvbnMoe1xyXG4gICAgICB1cmw6IGZpeGVkVXJsLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYXV0b1VwbG9hZDogZmFsc2UsXHJcbiAgICAgIGl0ZW1BbGlhczogJ3VwbG9hZGVkZmlsZScsXHJcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgIH0pO1xyXG4gICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKGxhc3RGaWxlSXRlbSk7XHJcbiAgfVxyXG5cclxuICAvLyDlj5bmtojkuovku7ZcclxuICBwdWJsaWMgQ2FuY2VsKCkge1xyXG4gICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICAvLyDkuIrkvKDlpLHotKXlkI7mlrnms5VcclxuICBFcnJvckxvZyhpdGVtOiBGaWxlSXRlbSwgcmVzcG9uc2U6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIGhlYWRlcnM6IFBhcnNlZFJlc3BvbnNlSGVhZGVycyk6IGFueSB7XHJcbiAgICBjb25zb2xlLmxvZygn5LiK5Lyg5aSx6LSlJyk7XHJcbiAgICBjb25zb2xlLmxvZygn6ZSZ6K+v5Luj56CB77yaJyArIHN0YXR1cyk7XHJcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICBjb25zb2xlLmxvZyhoZWFkZXJzKTtcclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRlbVJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IodGhpcy51cGxvYWRfZmFpbCArIHRlbVJlcy5tZXNzYWdlKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IodGhpcy51cGxvYWRfZmFpbCArIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgIGNvbnN0IGxlbiA9IHRoaXMudXBsb2FkZXIucXVldWUubGVuZ3RoO1xyXG4gICAgaWYgKGxlbiA+IDApIHtcclxuICAgICAgdGhpcy51cGxvYWRlci5xdWV1ZS5zcGxpY2UoMCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBJbXBvcnQoaXRlbTogRmlsZUl0ZW0sIHJlc3BvbnNlOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBoZWFkZXJzOiBQYXJzZWRSZXNwb25zZUhlYWRlcnMpOiBhbnkge1xyXG4gICAgbGV0IHN1ZmZpeCA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5jYW5Eb3dubG9hZFRlbXBsYXRlKCkgJiYgdGhpcy52YWx1ZUZpZWxkICE9PSB0aGlzLmN1cnJlbnRSdWxlRmlsZVR5cGUpIHtcclxuICAgICAgc3VmZml4ID0gRmlsZVR5cGVVdGlsLmdldEZpbGVFeHRlbnNpb24odGhpcy52YWx1ZUZpZWxkKTtcclxuICAgIH1cclxuICAgIC8vIHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuRGF0YUllUHJvZ3Jlc3NQYXJhbXNbJ0ltcG9ydFByb2dyZXNzVmFsdWUnXSA9IDQ1O1xyXG4gICAgc3dpdGNoICh0aGlzLm1ldGhvZFR5cGUpIHtcclxuICAgICAgY2FzZSBNZXRob2RUeXBlLkNvbW1vbkltcG9ydDpcclxuICAgICAgY2FzZSBNZXRob2RUeXBlLkNhcmRGb3JtRGF0YUltcG9ydDpcclxuICAgICAgICB0aGlzLkRhdGFJbXBvcnRCeUlkKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMsIHN1ZmZpeCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgTWV0aG9kVHlwZS5JbXBvcnRTdWJUYWJsZURldGFpbDpcclxuICAgICAgICB0aGlzLkltcG9ydFN1YlRhYmxlKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMsIHN1ZmZpeCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBJbXBvcnRTdWJUYWJsZShpdGVtOiBGaWxlSXRlbSwgcmVzcG9uc2U6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIGhlYWRlcnM6IFBhcnNlZFJlc3BvbnNlSGVhZGVycywgc3VmZml4OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIGNvbnN0IHRlbVJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICBjb25zdCBsb2FkaW5nQ29uZmlnID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRfbG9hZGluZyddXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGxvYWRpbmdQYXJhbSA9IHtcclxuICAgICAgICBsb2FkaW5nU2VydmljZTogdGhpcy5sb2FkaW5nU2VydmljZSxcclxuICAgICAgICBsb2FkaW5nQ29uZmlnOiBsb2FkaW5nQ29uZmlnXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGNvbW1vblBhcmFtcyA9IG5ldyBDb21tb25QYXJhbXMoKTtcclxuICAgICAgY29tbW9uUGFyYW1zLm1ldGhvZFR5cGUgPSB0aGlzLm1ldGhvZFR5cGU7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5ydWxlSWQgPSB0aGlzLmN1cnJlbnRSdWxlSWQ7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5vcHRpb24gPSB0aGlzLmltcG9ydE9wdGlvbjtcclxuICAgICAgY29tbW9uUGFyYW1zLmZpbGVOYW1lID0gdGVtUmVzWydmaWxlTmFtZSddO1xyXG4gICAgICBjb21tb25QYXJhbXMuZnJhbWVDb250ZXh0ID0gdGhpcy5mcmFtZUNvbnRleHQ7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5zdWZmaXggPSBzdWZmaXg7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5sb2FkaW5nUGFyYW0gPSBsb2FkaW5nUGFyYW07XHJcbiAgICAgIGNvbW1vblBhcmFtcy5pMThuUmVzb3VyY2UgPSB0aGlzLmkxOG5SZXNvdXJjZTtcclxuICAgICAgY29tbW9uUGFyYW1zLnNlY3VyaXR5TGV2ZWxOYW1lID0gdGhpcy5zZWN1cml0eUxldmVsTmFtZTtcclxuICAgICAgdGhpcy5kYXRhSW1wb3J0U2VydmljZS5JbXBvcnRTdWJUYWJsZShjb21tb25QYXJhbXMpO1xyXG4gICAgICBjb25zdCBzdWJzY3JpYmVyID0gdGhpcy5kYXRhSW1wb3J0U2VydmljZS5jb21wbGV0ZS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICAgIC8vIHRoaXMuRGF0YUllUHJvZ3Jlc3NEaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICBzdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgaWYgKGRhdGEgPT09ICcnKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaW1wb3J0X3N1Y2Nlc3MpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QuY29tcGxldGUoKTtcclxuICAgICAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ+WvvOWFpeihqOWNleaIkOWKnycpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pbXBvcnRfZm9ybV9zdWNjZXNzKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICfpg6jliIbmlbDmja7lr7zlhaXlrozmiJAnKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blJlc291cmNlWydwYXJ0ZGF0YS1pbXBvcnQtc3VjY2VzcyddKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICfmoKHpqozkuK3mraInKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuaTE4blJlc291cmNlWydhZnRlcl92YWxpZGF0ZV9zdXNwZW5kJ10pO1xyXG4gICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dChmYWxzZSk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QuY29tcGxldGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JsZXZlbCA9IHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuZXJyb3JsZXZlbDtcclxuICAgICAgICAgIGlmIChlcnJvcmxldmVsID09PSAnSW5mbycpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2hvdygnaW5mbycsZGF0YSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGVycm9ybGV2ZWwgPT09ICdXYXJuaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTaG93KCd3YXJuaW5nJyxkYXRhKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVNob3coJ2Vycm9yJyx0aGlzLmltcG9ydF9mYWlsICsgZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KGZhbHNlKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLy8g5LiK5Lyg5oiQ5Yqf5ZCO5pa55rOVXHJcbiAgRGF0YUltcG9ydEJ5SWQoaXRlbTogRmlsZUl0ZW0sIHJlc3BvbnNlOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBoZWFkZXJzOiBQYXJzZWRSZXNwb25zZUhlYWRlcnMsIHN1ZmZpeDogc3RyaW5nKTogYW55IHtcclxuICAgIGNvbnNvbGUubG9nKHN0YXR1cyk7XHJcbiAgICBjb25zb2xlLmxvZygn5LiK5Lyg5a6M5oiQ77yBJyk7XHJcbiAgICBpZiAoc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgLy/kuIrkvKDmiJDlip/lkI7muIXnqbrkuIrkvKDpmJ/liJdcclxuICAgICAgdGhpcy51cGxvYWRlci5xdWV1ZSA9IFtdO1xyXG4gICAgICBjb25zdCB0ZW1SZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0ZW1SZXMpO1xyXG4gICAgICBjb25zdCBsb2FkaW5nQ29uZmlnID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRfbG9hZGluZyddXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGxvYWRpbmdQYXJhbSA9IHtcclxuICAgICAgICBsb2FkaW5nU2VydmljZTogdGhpcy5sb2FkaW5nU2VydmljZSxcclxuICAgICAgICBsb2FkaW5nQ29uZmlnOiBsb2FkaW5nQ29uZmlnXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGNvbW1vblBhcmFtcyA9IG5ldyBDb21tb25QYXJhbXMoKTtcclxuICAgICAgY29tbW9uUGFyYW1zLm1ldGhvZFR5cGUgPSB0aGlzLm1ldGhvZFR5cGU7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5ydWxlSWQgPSB0aGlzLmN1cnJlbnRSdWxlSWQ7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5vcHRpb24gPSB0aGlzLmltcG9ydE9wdGlvbjtcclxuICAgICAgY29tbW9uUGFyYW1zLmZpbGVOYW1lID0gdGVtUmVzWydmaWxlTmFtZSddO1xyXG4gICAgICBjb21tb25QYXJhbXMucmVwb3NpdG9yeSA9IHRoaXMuZnJhbWVDb250ZXh0LnJlcG9zaXRvcnk7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5zdWZmaXggPSBzdWZmaXg7XHJcbiAgICAgIGNvbW1vblBhcmFtcy5sb2FkaW5nUGFyYW0gPSBsb2FkaW5nUGFyYW07XHJcbiAgICAgIGNvbW1vblBhcmFtcy5pMThuUmVzb3VyY2UgPSB0aGlzLmkxOG5SZXNvdXJjZTtcclxuICAgICAgY29tbW9uUGFyYW1zLnNlY3VyaXR5TGV2ZWxOYW1lID0gdGhpcy5zZWN1cml0eUxldmVsTmFtZTtcclxuICAgICAgdGhpcy5kYXRhSW1wb3J0U2VydmljZS5JbXBvcnRCeVJ1bGVJZChjb21tb25QYXJhbXMpO1xyXG4gICAgICBjb25zdCB1bnN1YnNjcmliZXIgPSB0aGlzLmRhdGFJbXBvcnRTZXJ2aWNlLmNvbXBsZXRlLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgLy8gdGhpcy5kYXRhSW1wb3J0U2VydmljZS5EYXRhSWVQcm9ncmVzc1BhcmFtc1snSW1wb3J0UHJvZ3Jlc3NWYWx1ZSddID0gMTAwO1xyXG4gICAgICAgIC8vIHRoaXMuRGF0YUllUHJvZ3Jlc3NEaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICBpZiAoZGF0YSA9PT0gJycpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5LnN1Y2Nlc3ModGhpcy5pbXBvcnRfc3VjY2Vzcyk7XHJcbiAgICAgICAgICB1bnN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuXHJcbiAgICAgICAgICAvL+WvvOWFpeaVsOaNruW6k+WQjuWIt+aWsOeVjOmdouaVsOaNrlxyXG4gICAgICAgICAgaWYgKHRoaXMuaW1wb3J0T3B0aW9uLmltcG9ydGRiUmVmcmVzaCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0RGF0YVNlciAhPT0gbnVsbCAmJiB0aGlzLmZyYW1lQ29udGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGZpbHRlckNvbmRpdGlvbkxpc3QgPSB0aGlzLmZyYW1lQ29udGV4dC51aVN0YXRlWydmaWx0ZXJDb25kaXRpb25MaXN0J107XHJcbiAgICAgICAgICAgICAgaWYgKGZpbHRlckNvbmRpdGlvbkxpc3QgIT09IHVuZGVmaW5lZCAmJiBmaWx0ZXJDb25kaXRpb25MaXN0ICE9PSBudWxsICYmIHR5cGVvZiAoZmlsdGVyQ29uZGl0aW9uTGlzdCkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3REYXRhU2VyLmxvYWQoZmlsdGVyQ29uZGl0aW9uTGlzdCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WvvOWFpeaVsOaNruW6k+WQjuW4pui/h+a7pOadoeS7tumHjeaWsOWKoOi9veihqOWNleaVsOaNricpO1xyXG4gICAgICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5a+85YWl5pWw5o2u5bqT5ZCO5bim6L+H5ruk5p2h5Lu26YeN5paw5Yqg6L296KGo5Y2V5pWw5o2u5byC5bi4Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0RGF0YVNlci5sb2FkKCkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WvvOWFpeaVsOaNruW6k+WQjumHjeaWsOWKoOi9veihqOWNleaVsOaNricpO1xyXG4gICAgICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5a+85YWl5pWw5o2u5bqT5ZCO6YeN5paw5Yqg6L296KGo5Y2V5pWw5o2u5byC5bi4Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QuY29tcGxldGUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICflr7zlhaXooajljZXmiJDlip8nKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaW1wb3J0X2Zvcm1fc3VjY2Vzcyk7XHJcbiAgICAgICAgICB1bnN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQodHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QuY29tcGxldGUoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEgPT09ICfpg6jliIbmlbDmja7lr7zlhaXlrozmiJAnKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuaTE4blJlc291cmNlWydwYXJ0ZGF0YS1pbXBvcnQtc3VjY2VzcyddKTtcclxuICAgICAgICAgIHVuc3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgICB0aGlzLnN1YmplY3QubmV4dCh0cnVlKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSA9PT0gJ+agoemqjOS4reatoicpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5LmluZm8odGhpcy5pMThuUmVzb3VyY2VbJ2FmdGVyX3ZhbGlkYXRlX3N1c3BlbmQnXSk7XHJcbiAgICAgICAgICB1bnN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm5leHQoZmFsc2UpO1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGVycm9ybGV2ZWwgPSB0aGlzLmRhdGFJbXBvcnRTZXJ2aWNlLmVycm9ybGV2ZWw7XHJcbiAgICAgICAgICBpZiAoZXJyb3JsZXZlbCA9PT0gJ0luZm8nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVNob3coJ2luZm8nLGRhdGEpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChlcnJvcmxldmVsID09PSAnV2FybmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlU2hvdygnd2FybmluZycsZGF0YSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VTaG93KCdlcnJvcicsdGhpcy5pbXBvcnRfZmFpbCArIGRhdGEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdW5zdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICB0aGlzLm5lZWREZXN0cm95LmVtaXQoKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5uZXh0KGZhbHNlKTtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdC5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG1lc3NhZ2VTaG93KHR5cGU6c3RyaW5nLG1lc3NhZ2U6c3RyaW5nKXtcclxuICAgIGlmKHRoaXMubXNnU2VydmljZSl7XHJcbiAgICAgIGlmKHR5cGUgPT09ICdpbmZvJyl7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmluZm8obWVzc2FnZSk7XHJcbiAgICAgIH1lbHNlIGlmKHR5cGUgPT09ICd3YXJuaW5nJyl7XHJcbiAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLndhcm5pbmcobWVzc2FnZSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMubXNnU2VydmljZS5lcnJvcihtZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgIGlmKHR5cGUgPT09ICdpbmZvJyl7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyhtZXNzYWdlKTtcclxuICAgICAgfWVsc2UgaWYodHlwZSA9PT0gJ3dhcm5pbmcnKXtcclxuICAgICAgICB0aGlzLm5vdGlmeS53YXJuaW5nKG1lc3NhZ2UpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLm5vdGlmeS5lcnJvcihtZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcbn1cclxuIl19