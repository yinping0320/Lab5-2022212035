/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { DatagridComponent } from '@farris/ui-datagrid';
import { DataValidateStrategy } from './ValidateEntity/DataValidateStrategy';
export class ValidateFormComponent {
    /**
     * @param {?} http
     */
    constructor(http) {
        this.http = http;
        this.closeModal = new EventEmitter();
        this.okModal = new EventEmitter();
        this.validateInfoAllWarning = false;
        this.onlyOneObject = false;
        this.showInfo = '';
        this.ValidateInfoColumns = [];
        this.radioData = [];
        this.checkboxData1 = [];
        this.checkboxData2 = [];
        this.checkBoxValue1 = DataValidateStrategy[0];
        this.checkBoxValue2 = '';
        this.validatedInfoList = [];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const res = this.i18nResource;
        this.order = res['order'];
        this.validate_type = res['validate_type'];
        this.table_name = res['table_name'];
        this.illegal_data_location = res['illegal_data_location'];
        this.validate_result = res['validate_result'];
        this.export_validate_result = res['export_validate_result'];
        this.continue = res['continue'];
        this.checkboxData1 = [
            { value: DataValidateStrategy[0], name: this.i18nResource['AllIgnore'] }
        ];
        this.checkboxData2 = [
            { value: DataValidateStrategy[1], name: this.i18nResource['AllMandatoryImport'] }
        ];
        this.radioData = [
            { value: DataValidateStrategy[0], name: this.i18nResource['Ignore'] },
            { value: DataValidateStrategy[1], name: this.i18nResource['MandatoryImport'] }
        ];
        this.validateResult.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            if (element.validateInfoAllWarning) {
                this.validateInfoAllWarning = true;
            }
            if (element.onlyOneObject) {
                this.onlyOneObject = true;
            }
            if (element.newValidatedInfoList !== null && element.newValidatedInfoList !== undefined) {
                this.validatedInfoList = this.validatedInfoList.concat(element.newValidatedInfoList);
            }
            if (element.validateShowInfo) {
                this.customShowInfo = element.validateShowInfo;
            }
        }));
        if (this.validateInfoAllWarning) {
            this.cancel = res['cancel'];
        }
        else {
            this.cancel = res['ie_ok'];
        }
        if (this.validateInfoAllWarning) {
            this.showInfo = this.customShowInfo ? this.customShowInfo : this.i18nResource['you_have'] + this.validatedInfoList.length + this.i18nResource['warning_info'];
            if (this.onlyOneObject) {
                this.ValidateInfoColumns = [
                    { field: 'validateShowInfo', width: 140, title: this.illegal_data_location, sortable: false, showTips: true },
                    {
                        field: 'operation', width: 80, title: '操作', headerTemplate: this.headerTemplate,
                        template: this.columnOperation, sortable: false, showTips: true
                    }
                ];
            }
            else {
                this.ValidateInfoColumns = [
                    { field: 'dataObjectName', width: 40, title: this.table_name, sortable: false, showTips: true },
                    { field: 'validateShowInfo', width: 140, title: this.illegal_data_location, sortable: false, showTips: true },
                    {
                        field: 'operation', width: 80, title: '操作', headerTemplate: this.headerTemplate,
                        template: this.columnOperation, sortable: false, showTips: true
                    }
                ];
            }
        }
        else {
            this.showInfo = this.customShowInfo ? this.customShowInfo : this.i18nResource['you_have'] + this.validatedInfoList.length + this.i18nResource['error_info'];
            if (this.onlyOneObject) {
                this.ValidateInfoColumns = [
                    { field: 'validateShowInfo', width: 140, title: this.illegal_data_location, sortable: false, showTips: true }
                ];
            }
            else {
                this.ValidateInfoColumns = [
                    { field: 'dataObjectName', width: 40, title: this.table_name, sortable: false, showTips: true },
                    { field: 'validateShowInfo', width: 140, title: this.illegal_data_location, sortable: false, showTips: true }
                ];
            }
        }
    }
    /**
     * @return {?}
     */
    checkBoxChange1() {
        if (this.checkBoxValue1) {
            this.checkBoxValue2 = '';
            if (this.validatedInfoList) {
                this.validatedInfoList.forEach((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => t.dataValidateStrategy = DataValidateStrategy[0]));
            }
        }
    }
    /**
     * @return {?}
     */
    checkBoxChange2() {
        if (this.checkBoxValue2) {
            this.checkBoxValue1 = '';
            if (this.validatedInfoList) {
                this.validatedInfoList.forEach((/**
                 * @param {?} t
                 * @return {?}
                 */
                t => t.dataValidateStrategy = DataValidateStrategy[1]));
            }
        }
    }
    /**
     * @param {?} ctx
     * @return {?}
     */
    radioChange(ctx) {
        /** @type {?} */
        const ignoreList = this.validatedInfoList.filter((/**
         * @param {?} t
         * @return {?}
         */
        t => t.dataValidateStrategy == DataValidateStrategy[0]));
        if (ignoreList.length == this.validatedInfoList.length) {
            this.checkBoxValue1 = DataValidateStrategy[0];
            this.checkBoxValue2 = '';
        }
        else if (ignoreList.length == 0) {
            this.checkBoxValue1 = '';
            this.checkBoxValue2 = DataValidateStrategy[1];
        }
        else {
            this.checkBoxValue1 = '';
            this.checkBoxValue2 = '';
        }
    }
    /**
     * @return {?}
     */
    continueHandler() {
        this.okModal.emit(this.validatedInfoList);
    }
    /**
     * @return {?}
     */
    cancelHandler() {
        this.closeModal.emit();
    }
    /**
     * @return {?}
     */
    exportPdf() {
        /** @type {?} */
        const url = '/api/runtime/dip/v1.0/rpcfileoper/DownloadValidateFile';
        /** @type {?} */
        const body = {
            su: this.su,
            validateTitles: [this.order, this.table_name, this.illegal_data_location],
            validatedInfos: this.validatedInfoList
        };
        this.loadingParam.loadingService.show();
        this.http.post(url, body, {
            responseType: 'blob',
            observe: 'response',
            params: { su: this.su }
        }).subscribe((/**
         * @param {?} filedata
         * @return {?}
         */
        filedata => {
            this.loadingParam.loadingService.clearAll();
            if (!filedata || filedata.body.size == 0) {
                return;
            }
            else {
                /** @type {?} */
                const blob = new Blob([filedata.body]);
                if (navigator.msSaveOrOpenBlob) {
                    navigator.msSaveOrOpenBlob(blob, this.validate_result);
                }
                else {
                    /** @type {?} */
                    const link = document.createElement('a');
                    link.setAttribute('href', window.URL.createObjectURL(blob));
                    // 设置下载的文件名
                    link.setAttribute('download', this.validate_result);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
                /** @type {?} */
                const delUrl = '/api/runtime/dip/v1.0/rpcfileoper/DeleteFile';
                /** @type {?} */
                const delParam = {
                    relativePath: "VALIDATEPDFFILE/test.pdf",
                    su: this.su
                };
                this.http.post(delUrl, delParam, { params: { su: this.su } }).subscribe();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.loadingParam.loadingService.clearAll();
            console.log(error);
        }));
    }
}
ValidateFormComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-validate-form',
                template: "<!-- <div>\r\n  <div>\r\n    <kendo-tabstrip (tabSelect)=\"OnTableSelect($event)\">\r\n      <kendo-tabstrip-tab *ngFor=\"let result of validateResult; let i = index\" [title]=\"result.componentName\" [selected]=\"i === 0?true: false\">\r\n        <ng-template kendoTabContent>\r\n          <kendo-grid [height]=\"350\" [data]=\"result.validatedInfoList\">\r\n            <kendo-grid-column field=\"order\" title=\"\u5E8F\u53F7\" [width]=\"40\"></kendo-grid-column>\r\n            <kendo-grid-column field=\"message\" title=\"\u6821\u9A8C\u7ED3\u679C\" [width]=\"100\"></kendo-grid-column>\r\n            <kendo-grid-column field=\"tableName\" title=\"\u5BF9\u8C61\u540D\u79F0\" [width]=\"80\"></kendo-grid-column>\r\n            <kendo-grid-column field=\"illegalDataLocation\" title=\"\u975E\u6CD5\u6570\u636E\u4F4D\u7F6E\" [width]=\"300\"></kendo-grid-column>\r\n          </kendo-grid>\r\n        </ng-template>\r\n      </kendo-tabstrip-tab>\r\n    </kendo-tabstrip>\r\n  </div>\r\n  <div>\r\n    <kendo-excelexport class=\"excelExport\" *ngFor=\"let result of validateResult; let i = index\" [data]=\"result.validatedInfoList\" fileName=\"\u6821\u9A8C\u7ED3\u679C.xlsx\">\r\n      <kendo-excelexport-column field=\"order\" title=\"\u5E8F\u53F7\" [width]=\"80\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"message\" title=\"\u6821\u9A8C\u7ED3\u679C\" [width]=\"300\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"tableName\" title=\"\u5BF9\u8C61\u540D\u79F0\" [width]=\"160\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"illegalDataLocation\" title=\"\u975E\u6CD5\u6570\u636E\u4F4D\u7F6E\" [width]=\"160\"></kendo-excelexport-column>\r\n    </kendo-excelexport>\r\n  </div>\r\n  <ng-template #selectFooter>\r\n    <div class=\"btns\">\r\n        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm px-3\" (click)=\"Cancel()\">\u53D6\u6D88</button>\r\n        <button type=\"button\" class=\"btn btn-outline-primary btn-sm px-3\" (click)=\"Export()\">\u5BFC\u51FA</button>\r\n    </div>\r\n  </ng-template>\r\n</div> -->\r\n\r\n<!-- <kendo-grid [kendoGridBinding]=\"validatedInfoList\" [pageable]=\"true\" [pageSize]=\"20\" [height]=\"450\" [reorderable]=\"true\"\r\n  [resizable]=\"true\">\r\n  <ng-template kendoGridToolbarTemplate>\r\n    <button kendoGridPDFCommand icon=\"file-pdf\">{{export_pdf}}</button>\r\n  </ng-template>\r\n  <kendo-grid-column field=\"order\" [title]=\"order\" [width]=\"35\">\r\n  </kendo-grid-column>\r\n  <kendo-grid-column field=\"message\" [title]=\"validate_type\" [width]=\"60\">\r\n  </kendo-grid-column>\r\n  <kendo-grid-column field=\"tableName\" [title]=\"table_name\" [width]=\"60\">\r\n  </kendo-grid-column>\r\n  <kendo-grid-column field=\"illegalDataLocation\" [title]=\"illegal_data_location\" [width]=\"350\">\r\n  </kendo-grid-column>\r\n\r\n  <kendo-grid-pdf [fileName]=\"validate_result\" [allPages]=\"true\">\r\n    <kendo-grid-pdf-margin top=\"1cm\" left=\"1cm\" right=\"1cm\" bottom=\"1cm\"></kendo-grid-pdf-margin>\r\n  </kendo-grid-pdf>\r\n</kendo-grid> -->\r\n<!-- <div>\r\n    <kendo-excelexport class=\"excelExport\" *ngFor=\"let result of validateResult; let i = index\" [data]=\"result.validatedInfoList\"  fileName=\"ValidateResult.xlsx\">\r\n      <kendo-excelexport-column field=\"order\" title=\"\u5E8F\u53F7\" [width]=\"40\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"message\" title=\"\u6821\u9A8C\u7C7B\u578B\" [width]=\"80\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"tableName\" title=\"\u5BF9\u8C61\u540D\u79F0\" [width]=\"80\"></kendo-excelexport-column>\r\n      <kendo-excelexport-column field=\"illegalDataLocation\" title=\"\u975E\u6CD5\u6570\u636E\u4F4D\u7F6E\" [width]=\"350\"></kendo-excelexport-column>\r\n    </kendo-excelexport>\r\n  </div> -->\r\n<!-- <kendo-grid-excel fileName=\"ValidateResult.xlsx\"></kendo-grid-excel> -->\r\n<div class=\"d-flex flex-fill\" style=\"height: 100px;\">\r\n  <div style=\"\r\n    width: 80px;\r\n    height: 80px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-radius: 100px;\r\n    border: 6px solid cornflowerblue;\r\n    margin-left: 80px;\r\n    margin-top: 10px;\r\n    font-size: 30px;\r\n    color: inherit;\r\n\">{{validatedInfoList.length}}\r\n  </div>\r\n  <div style=\"margin-top: 40px;margin-left: 30px;\">{{showInfo}}</div>\r\n</div>\r\n<div class=\"d-flex flex-fill\" style=\"height: 350px;\">\r\n  <farris-datagrid #ValidateInfoGrid id=\"validate-info-grid\" [idField]=\"'id'\" [fit]=\"true\" [fitColumns]=\"true\"\r\n                   [columns]=\"ValidateInfoColumns\" [showLineNumber]=\"true\" [pagination]=\"false\" [showBorder]=\"true\"\r\n                   [striped]=\"true\" [sizeType]=\"'sm'\" [data]=\"validatedInfoList\">\r\n  </farris-datagrid>\r\n  <ng-template #headerTemplate let-ctx>\r\n    <farris-checkboxgroup [(ngModel)]=\"checkBoxValue1\" [disable]=\"checkBoxValue1.length != 0\" [horizontal]=\"true\" [data]=\"checkboxData1\"\r\n                          (changeValue)=\"checkBoxChange1()\">\r\n    </farris-checkboxgroup>\r\n    <farris-checkboxgroup [(ngModel)]=\"checkBoxValue2\" [disable]=\"checkBoxValue2.length != 0\" [horizontal]=\"true\" [data]=\"checkboxData2\"\r\n                          (changeValue)=\"checkBoxChange2()\">\r\n    </farris-checkboxgroup>\r\n  </ng-template>\r\n  <ng-template #columnOperation let-ctx>\r\n    <farris-radiogroup  [(ngModel)]=\"validatedInfoList[ctx.rowIndex].dataValidateStrategy\" [horizontal]=\"true\" [data]=\"radioData\"\r\n                       (changeValue)=\"radioChange(ctx)\">\r\n    </farris-radiogroup>\r\n  </ng-template>\r\n</div>\r\n\r\n<ng-template #selectFooter>\r\n  <button type=\"button\" class=\"btn btn-outline-secondary \" (click)=\"exportPdf()\">{{export_validate_result}}</button>\r\n  <button *ngIf=\"validateInfoAllWarning\" type=\"button\" class=\"btn btn-outline-secondary \" (click)=\"continueHandler()\">{{continue}}</button>\r\n  <button type=\"button\" class=\"btn btn-primary \" (click)=\"cancelHandler()\">{{cancel}}</button>\r\n</ng-template>\r\n",
                styles: [".barmanager{position:absolute;bottom:0;height:30px;right:30px;padding-left:50px}@font-face{font-family:\"DejaVu Sans\";src:url(/platform/common/web/@gsp-dip/fonts/microsoft-yahei.ttf) format(\"truetype\")}.k-grid{font-family:\"DejaVu Sans\",Arial,sans-serif}"]
            }] }
];
/** @nocollapse */
ValidateFormComponent.ctorParameters = () => [
    { type: HttpClient }
];
ValidateFormComponent.propDecorators = {
    ValidateInfoGrid: [{ type: ViewChild, args: ['ValidateInfoGrid',] }],
    modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
    columnOperation: [{ type: ViewChild, args: ['columnOperation',] }],
    headerTemplate: [{ type: ViewChild, args: ['headerTemplate',] }],
    closeModal: [{ type: Output }],
    okModal: [{ type: Output }],
    validateResult: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ValidateFormComponent.prototype.ValidateInfoGrid;
    /** @type {?} */
    ValidateFormComponent.prototype.modalFooter;
    /** @type {?} */
    ValidateFormComponent.prototype.columnOperation;
    /** @type {?} */
    ValidateFormComponent.prototype.headerTemplate;
    /** @type {?} */
    ValidateFormComponent.prototype.closeModal;
    /** @type {?} */
    ValidateFormComponent.prototype.okModal;
    /** @type {?} */
    ValidateFormComponent.prototype.validateResult;
    /** @type {?} */
    ValidateFormComponent.prototype.su;
    /** @type {?} */
    ValidateFormComponent.prototype.loadingParam;
    /** @type {?} */
    ValidateFormComponent.prototype.order;
    /** @type {?} */
    ValidateFormComponent.prototype.validate_type;
    /** @type {?} */
    ValidateFormComponent.prototype.table_name;
    /** @type {?} */
    ValidateFormComponent.prototype.illegal_data_location;
    /** @type {?} */
    ValidateFormComponent.prototype.validate_result;
    /** @type {?} */
    ValidateFormComponent.prototype.export_validate_result;
    /** @type {?} */
    ValidateFormComponent.prototype.continue;
    /** @type {?} */
    ValidateFormComponent.prototype.cancel;
    /** @type {?} */
    ValidateFormComponent.prototype.i18nResource;
    /** @type {?} */
    ValidateFormComponent.prototype.validateInfoAllWarning;
    /** @type {?} */
    ValidateFormComponent.prototype.onlyOneObject;
    /** @type {?} */
    ValidateFormComponent.prototype.customShowInfo;
    /** @type {?} */
    ValidateFormComponent.prototype.showInfo;
    /** @type {?} */
    ValidateFormComponent.prototype.ValidateInfoColumns;
    /** @type {?} */
    ValidateFormComponent.prototype.radioData;
    /** @type {?} */
    ValidateFormComponent.prototype.checkboxData1;
    /** @type {?} */
    ValidateFormComponent.prototype.checkboxData2;
    /** @type {?} */
    ValidateFormComponent.prototype.checkBoxValue1;
    /** @type {?} */
    ValidateFormComponent.prototype.checkBoxValue2;
    /** @type {?} */
    ValidateFormComponent.prototype.validatedInfoList;
    /**
     * @type {?}
     * @private
     */
    ValidateFormComponent.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGUtZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWRpcC9kYXRhLWltcC1leHAvIiwic291cmNlcyI6WyJsaWIvdmFsaWRhdGUtZm9ybS92YWxpZGF0ZS1mb3JtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRXJHLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUNoRCxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUMsb0JBQW9CLEVBQUMsTUFBTSx1Q0FBdUMsQ0FBQztBQVUzRSxNQUFNLE9BQU8scUJBQXFCOzs7O0lBd0JoQyxZQUNVLElBQWdCO1FBQWhCLFNBQUksR0FBSixJQUFJLENBQVk7UUFwQmhCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3JDLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBdUI1QywyQkFBc0IsR0FBRyxLQUFLLENBQUM7UUFDL0Isa0JBQWEsR0FBRyxLQUFLLENBQUM7UUFFdEIsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLHdCQUFtQixHQUFHLEVBQUUsQ0FBQztRQUN6QixjQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ2Ysa0JBQWEsR0FBRyxFQUFFLENBQUM7UUFDbkIsa0JBQWEsR0FBRyxFQUFFLENBQUM7UUFDbkIsbUJBQWMsR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUVwQixzQkFBaUIsR0FBeUIsRUFBRSxDQUFDO0lBYjdDLENBQUM7Ozs7SUFlRCxRQUFROztjQUNBLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWTtRQUM3QixJQUFJLENB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QUNsQyxtQ0FBVzs7SUFDWCw2Q0FBa0I7O0lBRWxCLHNDQUFjOztJQUNkLDhDQUFzQjs7SUFDdEIsMkNBQW1COztJQUNuQixzREFBOEI7O0lBQzlCLGdEQUF3Qjs7SUFDeEIsdURBQStCOztJQUMvQix5Q0FBaUI7O0lBQ2pCLHVDQUFlOztJQUNmLDZDQUFrQjs7SUFPbEIsdURBQStCOztJQUMvQiw4Q0FBc0I7O0lBQ3RCLCtDQUFlOztJQUNmLHlDQUFjOztJQUNkLG9EQUF5Qjs7SUFDekIsMENBQWU7O0lBQ2YsOENBQW1COztJQUNuQiw4Q0FBbUI7O0lBQ25CLCtDQUF5Qzs7SUFDekMsK0NBQW9COztJQUVwQixrREFBNkM7Ozs7O0lBZjNDLHFDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7VmFsaWRhdGVkUmVzdWx0fSBmcm9tICcuL1ZhbGlkYXRlRW50aXR5L1ZhbGlkYXRlZFJlc3VsdCc7XHJcbmltcG9ydCB7SHR0cENsaWVudH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQge0RhdGFncmlkQ29tcG9uZW50fSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHtEYXRhVmFsaWRhdGVTdHJhdGVneX0gZnJvbSAnLi9WYWxpZGF0ZUVudGl0eS9EYXRhVmFsaWRhdGVTdHJhdGVneSc7XHJcbmltcG9ydCB7VmFsaWRhdGVkSW5mb30gZnJvbSBcIi4vVmFsaWRhdGVFbnRpdHkvVmFsaWRhdGVkSW5mb1wiO1xyXG5pbXBvcnQge2VsZW1lbnR9IGZyb20gXCJwcm90cmFjdG9yXCI7XHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtdmFsaWRhdGUtZm9ybScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3ZhbGlkYXRlLWZvcm0uY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3ZhbGlkYXRlLWZvcm0uY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0ZUZvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBWaWV3Q2hpbGQoJ1ZhbGlkYXRlSW5mb0dyaWQnKSBWYWxpZGF0ZUluZm9HcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdzZWxlY3RGb290ZXInKSBtb2RhbEZvb3RlcjogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdjb2x1bW5PcGVyYXRpb24nKSBjb2x1bW5PcGVyYXRpb246IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgQFZpZXdDaGlsZCgnaGVhZGVyVGVtcGxhdGUnKSBoZWFkZXJUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG4gIEBPdXRwdXQoKSBva01vZGFsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgICAvL+WunumZheWPquacieS4gOadoVxyXG4gIHZhbGlkYXRlUmVzdWx0OiBWYWxpZGF0ZWRSZXN1bHRbXTtcclxuICBzdTogc3RyaW5nO1xyXG4gIGxvYWRpbmdQYXJhbTogYW55O1xyXG5cclxuICBvcmRlcjogc3RyaW5nO1xyXG4gIHZhbGlkYXRlX3R5cGU6IHN0cmluZztcclxuICB0YWJsZV9uYW1lOiBzdHJpbmc7XHJcbiAgaWxsZWdhbF9kYXRhX2xvY2F0aW9uOiBzdHJpbmc7XHJcbiAgdmFsaWRhdGVfcmVzdWx0OiBzdHJpbmc7XHJcbiAgZXhwb3J0X3ZhbGlkYXRlX3Jlc3VsdDogc3RyaW5nO1xyXG4gIGNvbnRpbnVlOiBzdHJpbmc7XHJcbiAgY2FuY2VsOiBzdHJpbmc7XHJcbiAgaTE4blJlc291cmNlOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50XHJcbiAgKSB7XHJcbiAgfVxyXG5cclxuICB2YWxpZGF0ZUluZm9BbGxXYXJuaW5nID0gZmFsc2U7XHJcbiAgb25seU9uZU9iamVjdCA9IGZhbHNlO1xyXG4gIGN1c3RvbVNob3dJbmZvO1xyXG4gIHNob3dJbmZvID0gJyc7XHJcbiAgVmFsaWRhdGVJbmZvQ29sdW1ucyA9IFtdO1xyXG4gIHJhZGlvRGF0YSA9IFtdO1xyXG4gIGNoZWNrYm94RGF0YTEgPSBbXTtcclxuICBjaGVja2JveERhdGEyID0gW107XHJcbiAgY2hlY2tCb3hWYWx1ZTEgPSBEYXRhVmFsaWRhdGVTdHJhdGVneVswXTtcclxuICBjaGVja0JveFZhbHVlMiA9ICcnO1xyXG5cclxuICB2YWxpZGF0ZWRJbmZvTGlzdDogQXJyYXk8VmFsaWRhdGVkSW5mbz4gPSBbXTtcclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBjb25zdCByZXMgPSB0aGlzLmkxOG5SZXNvdXJjZTtcclxuICAgIHRoaXMub3JkZXIgPSByZXNbJ29yZGVyJ107XHJcbiAgICB0aGlzLnZhbGlkYXRlX3R5cGUgPSByZXNbJ3ZhbGlkYXRlX3R5cGUnXTtcclxuICAgIHRoaXMudGFibGVfbmFtZSA9IHJlc1sndGFibGVfbmFtZSddO1xyXG4gICAgdGhpcy5pbGxlZ2FsX2RhdGFfbG9jYXRpb24gPSByZXNbJ2lsbGVnYWxfZGF0YV9sb2NhdGlvbiddO1xyXG4gICAgdGhpcy52YWxpZGF0ZV9yZXN1bHQgPSByZXNbJ3ZhbGlkYXRlX3Jlc3VsdCddO1xyXG4gICAgdGhpcy5leHBvcnRfdmFsaWRhdGVfcmVzdWx0ID0gcmVzWydleHBvcnRfdmFsaWRhdGVfcmVzdWx0J107XHJcbiAgICB0aGlzLmNvbnRpbnVlID0gcmVzWydjb250aW51ZSddO1xyXG5cclxuXHJcbiAgICB0aGlzLmNoZWNrYm94RGF0YTEgPSBbXHJcbiAgICAgIHt2YWx1ZTogRGF0YVZhbGlkYXRlU3RyYXRlZ3lbMF0sIG5hbWU6IHRoaXMuaTE4blJlc291cmNlWydBbGxJZ25vcmUnXX1cclxuICAgIF07XHJcbiAgICB0aGlzLmNoZWNrYm94RGF0YTIgPSBbXHJcbiAgICAgIHt2YWx1ZTogRGF0YVZhbGlkYXRlU3RyYXRlZ3lbMV0sIG5hbWU6IHRoaXMuaTE4blJlc291cmNlWydBbGxNYW5kYXRvcnlJbXBvcnQnXX1cclxuICAgIF07XHJcbiAgICB0aGlzLnJhZGlvRGF0YSA9IFtcclxuICAgICAge3ZhbHVlOiBEYXRhVmFsaWRhdGVTdHJhdGVneVswXSwgbmFtZTogdGhpcy5pMThuUmVzb3VyY2VbJ0lnbm9yZSddfSxcclxuICAgICAge3ZhbHVlOiBEYXRhVmFsaWRhdGVTdHJhdGVneVsxXSwgbmFtZTogdGhpcy5pMThuUmVzb3VyY2VbJ01hbmRhdG9yeUltcG9ydCddfVxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLnZhbGlkYXRlUmVzdWx0LmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIGlmIChlbGVtZW50LnZhbGlkYXRlSW5mb0FsbFdhcm5pbmcpIHtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlSW5mb0FsbFdhcm5pbmcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlbGVtZW50Lm9ubHlPbmVPYmplY3QpIHtcclxuICAgICAgICB0aGlzLm9ubHlPbmVPYmplY3QgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChlbGVtZW50Lm5ld1ZhbGlkYXRlZEluZm9MaXN0ICE9PSBudWxsICYmIGVsZW1lbnQubmV3VmFsaWRhdGVkSW5mb0xpc3QgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVkSW5mb0xpc3QgPSB0aGlzLnZhbGlkYXRlZEluZm9MaXN0LmNvbmNhdChlbGVtZW50Lm5ld1ZhbGlkYXRlZEluZm9MaXN0KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZWxlbWVudC52YWxpZGF0ZVNob3dJbmZvKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21TaG93SW5mbyA9IGVsZW1lbnQudmFsaWRhdGVTaG93SW5mbztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy52YWxpZGF0ZUluZm9BbGxXYXJuaW5nKSB7XHJcbiAgICAgIHRoaXMuY2FuY2VsID0gcmVzWydjYW5jZWwnXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2FuY2VsID0gcmVzWydpZV9vayddO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudmFsaWRhdGVJbmZvQWxsV2FybmluZykge1xyXG4gICAgICB0aGlzLnNob3dJbmZvID0gdGhpcy5jdXN0b21TaG93SW5mbyA/IHRoaXMuY3VzdG9tU2hvd0luZm8gOiB0aGlzLmkxOG5SZXNvdXJjZVsneW91X2hhdmUnXSArIHRoaXMudmFsaWRhdGVkSW5mb0xpc3QubGVuZ3RoICsgdGhpcy5pMThuUmVzb3VyY2VbJ3dhcm5pbmdfaW5mbyddO1xyXG4gICAgICBpZiAodGhpcy5vbmx5T25lT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5WYWxpZGF0ZUluZm9Db2x1bW5zID0gW1xyXG4gICAgICAgICAge2ZpZWxkOiAndmFsaWRhdGVTaG93SW5mbycsIHdpZHRoOiAxNDAsIHRpdGxlOiB0aGlzLmlsbGVnYWxfZGF0YV9sb2NhdGlvbiwgc29ydGFibGU6IGZhbHNlLCBzaG93VGlwczogdHJ1ZX0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpZWxkOiAnb3BlcmF0aW9uJywgd2lkdGg6IDgwLCB0aXRsZTogJ+aTjeS9nCcsIGhlYWRlclRlbXBsYXRlOiB0aGlzLmhlYWRlclRlbXBsYXRlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy5jb2x1bW5PcGVyYXRpb24sIHNvcnRhYmxlOiBmYWxzZSwgc2hvd1RpcHM6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuVmFsaWRhdGVJbmZvQ29sdW1ucyA9IFtcclxuICAgICAgICAgIHtmaWVsZDogJ2RhdGFPYmplY3ROYW1lJywgd2lkdGg6IDQwLCB0aXRsZTogdGhpcy50YWJsZV9uYW1lLCBzb3J0YWJsZTogZmFsc2UsIHNob3dUaXBzOiB0cnVlfSxcclxuICAgICAgICAgIHtmaWVsZDogJ3ZhbGlkYXRlU2hvd0luZm8nLCB3aWR0aDogMTQwLCB0aXRsZTogdGhpcy5pbGxlZ2FsX2RhdGFfbG9jYXRpb24sIHNvcnRhYmxlOiBmYWxzZSwgc2hvd1RpcHM6IHRydWV9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBmaWVsZDogJ29wZXJhdGlvbicsIHdpZHRoOiA4MCwgdGl0bGU6ICfmk43kvZwnLCBoZWFkZXJUZW1wbGF0ZTogdGhpcy5oZWFkZXJUZW1wbGF0ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMuY29sdW1uT3BlcmF0aW9uLCBzb3J0YWJsZTogZmFsc2UsIHNob3dUaXBzOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd0luZm8gPSB0aGlzLmN1c3RvbVNob3dJbmZvID8gdGhpcy5jdXN0b21TaG93SW5mbyA6IHRoaXMuaTE4blJlc291cmNlWyd5b3VfaGF2ZSddICsgdGhpcy52YWxpZGF0ZWRJbmZvTGlzdC5sZW5ndGggKyB0aGlzLmkxOG5SZXNvdXJjZVsnZXJyb3JfaW5mbyddO1xyXG4gICAgICBpZiAodGhpcy5vbmx5T25lT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5WYWxpZGF0ZUluZm9Db2x1bW5zID0gW1xyXG4gICAgICAgICAge2ZpZWxkOiAndmFsaWRhdGVTaG93SW5mbycsIHdpZHRoOiAxNDAsIHRpdGxlOiB0aGlzLmlsbGVnYWxfZGF0YV9sb2NhdGlvbiwgc29ydGFibGU6IGZhbHNlLCBzaG93VGlwczogdHJ1ZX1cclxuICAgICAgICBdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuVmFsaWRhdGVJbmZvQ29sdW1ucyA9IFtcclxuICAgICAgICAgIHtmaWVsZDogJ2RhdGFPYmplY3ROYW1lJywgd2lkdGg6IDQwLCB0aXRsZTogdGhpcy50YWJsZV9uYW1lLCBzb3J0YWJsZTogZmFsc2UsIHNob3dUaXBzOiB0cnVlfSxcclxuICAgICAgICAgIHtmaWVsZDogJ3ZhbGlkYXRlU2hvd0luZm8nLCB3aWR0aDogMTQwLCB0aXRsZTogdGhpcy5pbGxlZ2FsX2RhdGFfbG9jYXRpb24sIHNvcnRhYmxlOiBmYWxzZSwgc2hvd1RpcHM6IHRydWV9XHJcbiAgICAgICAgXTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBjaGVja0JveENoYW5nZTEoKSB7XHJcbiAgICBpZiAodGhpcy5jaGVja0JveFZhbHVlMSkge1xyXG4gICAgICB0aGlzLmNoZWNrQm94VmFsdWUyID0gJyc7XHJcbiAgICAgIGlmICh0aGlzLnZhbGlkYXRlZEluZm9MaXN0KSB7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZWRJbmZvTGlzdC5mb3JFYWNoKHQgPT4gdC5kYXRhVmFsaWRhdGVTdHJhdGVneSA9IERhdGFWYWxpZGF0ZVN0cmF0ZWd5WzBdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hlY2tCb3hDaGFuZ2UyKCkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2tCb3hWYWx1ZTIpIHtcclxuICAgICAgdGhpcy5jaGVja0JveFZhbHVlMSA9ICcnO1xyXG4gICAgICBpZiAodGhpcy52YWxpZGF0ZWRJbmZvTGlzdCkge1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVkSW5mb0xpc3QuZm9yRWFjaCh0ID0+IHQuZGF0YVZhbGlkYXRlU3RyYXRlZ3kgPSBEYXRhVmFsaWRhdGVTdHJhdGVneVsxXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICByYWRpb0NoYW5nZShjdHgpIHtcclxuICAgIGNvbnN0IGlnbm9yZUxpc3QgPSB0aGlzLnZhbGlkYXRlZEluZm9MaXN0LmZpbHRlcih0ID0+IHQuZGF0YVZhbGlkYXRlU3RyYXRlZ3kgPT0gRGF0YVZhbGlkYXRlU3RyYXRlZ3lbMF0pO1xyXG4gICAgaWYgKGlnbm9yZUxpc3QubGVuZ3RoID09IHRoaXMudmFsaWRhdGVkSW5mb0xpc3QubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuY2hlY2tCb3hWYWx1ZTEgPSBEYXRhVmFsaWRhdGVTdHJhdGVneVswXTtcclxuICAgICAgdGhpcy5jaGVja0JveFZhbHVlMiA9ICcnO1xyXG4gICAgfSBlbHNlIGlmIChpZ25vcmVMaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgIHRoaXMuY2hlY2tCb3hWYWx1ZTEgPSAnJztcclxuICAgICAgdGhpcy5jaGVja0JveFZhbHVlMiA9IERhdGFWYWxpZGF0ZVN0cmF0ZWd5WzFdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jaGVja0JveFZhbHVlMSA9ICcnO1xyXG4gICAgICB0aGlzLmNoZWNrQm94VmFsdWUyID0gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb250aW51ZUhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLm9rTW9kYWwuZW1pdCh0aGlzLnZhbGlkYXRlZEluZm9MaXN0KTtcclxuICB9XHJcblxyXG4gIGNhbmNlbEhhbmRsZXIoKSB7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwuZW1pdCgpO1xyXG4gIH1cclxuXHJcblxyXG4gIGV4cG9ydFBkZigpIHtcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvZGlwL3YxLjAvcnBjZmlsZW9wZXIvRG93bmxvYWRWYWxpZGF0ZUZpbGUnO1xyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgc3U6IHRoaXMuc3UsXHJcbiAgICAgIHZhbGlkYXRlVGl0bGVzOiBbdGhpcy5vcmRlciwgdGhpcy50YWJsZV9uYW1lLCB0aGlzLmlsbGVnYWxfZGF0YV9sb2NhdGlvbl0sXHJcbiAgICAgIHZhbGlkYXRlZEluZm9zOiB0aGlzLnZhbGlkYXRlZEluZm9MaXN0XHJcbiAgICB9O1xyXG4gICAgdGhpcy5sb2FkaW5nUGFyYW0ubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgdGhpcy5odHRwLnBvc3QodXJsLCBib2R5LCB7XHJcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLFxyXG4gICAgICBvYnNlcnZlOiAncmVzcG9uc2UnLFxyXG4gICAgICBwYXJhbXM6IHtzdTogdGhpcy5zdX1cclxuICAgIH0pLnN1YnNjcmliZShmaWxlZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1BhcmFtLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIGlmICghZmlsZWRhdGEgfHwgZmlsZWRhdGEuYm9keS5zaXplID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtmaWxlZGF0YS5ib2R5XSk7XHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XHJcbiAgICAgICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihibG9iLCB0aGlzLnZhbGlkYXRlX3Jlc3VsdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcclxuICAgICAgICAgIC8vIOiuvue9ruS4i+i9veeahOaWh+S7tuWQjVxyXG4gICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgdGhpcy52YWxpZGF0ZV9yZXN1bHQpO1xyXG4gICAgICAgICAgbGluay5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgICAgICAgbGluay5jbGljaygpO1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGVsVXJsID0gJy9hcGkvcnVudGltZS9kaXAvdjEuMC9ycGNmaWxlb3Blci9EZWxldGVGaWxlJztcclxuICAgICAgICBjb25zdCBkZWxQYXJhbSA9IHtcclxuICAgICAgICAgIHJlbGF0aXZlUGF0aDogXCJWQUxJREFURVBERkZJTEUvdGVzdC5wZGZcIixcclxuICAgICAgICAgIHN1OiB0aGlzLnN1XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmh0dHAucG9zdChkZWxVcmwsIGRlbFBhcmFtLCB7cGFyYW1zOiB7c3U6IHRoaXMuc3V9fSkuc3Vic2NyaWJlKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nUGFyYW0ubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19