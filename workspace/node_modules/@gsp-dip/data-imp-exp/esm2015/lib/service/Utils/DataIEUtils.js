/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { DefaultLang } from '../../i18n/default-lang';
import { of, Subject } from 'rxjs';
import { FileConst } from '../../model/utils/FileConst';
/**
 * @param {?} obj
 * @return {?}
 */
export function isNullOrUndefined(obj) {
    if (obj === undefined) {
        return true;
    }
    if (obj === null) {
        return true;
    }
    return false;
}
/**
 * @param {?} obj
 * @return {?}
 */
export function isNullOrEmpty(obj) {
    if (obj === undefined) {
        return true;
    }
    if (obj === null) {
        return true;
    }
    if (obj.length == 0) {
        return true;
    }
    return false;
}
/**
 * @param {?} str
 * @return {?}
 */
export function isNullOrBlank(str) {
    if (str == null) {
        return true;
    }
    if (str.trim().length == 0) {
        return true;
    }
    return false;
}
/**
 * @param {?} paraName
 * @return {?}
 */
export function getQueryString(paraName) {
    /** @type {?} */
    const url = window.location.hash;
    /** @type {?} */
    const arrObj = url.split('?');
    if (arrObj.length > 1) {
        /** @type {?} */
        const arrPara = arrObj[1].split('&');
        /** @type {?} */
        let arr;
        // tslint:disable-next-line: prefer-for-of
        for (let i = 0; i < arrPara.length; i++) {
            arr = arrPara[i].split('=');
            if (arr != null && arr[0] === paraName) {
                return arr[1];
            }
        }
        return '';
    }
    else {
        return '';
    }
}
export class FileTypeUtil {
    /**
     * @param {?} valueField
     * @return {?}
     */
    static getFileExtension(valueField) {
        /** @type {?} */
        let suffix = null;
        switch (valueField) {
            case FileConst.xls:
                suffix = '.xls';
                break;
            case FileConst.xlsx:
                suffix = '.xlsx';
                break;
            case FileConst.xlsm:
                suffix = '.xlsm';
                break;
            case FileConst.et:
                suffix = '.et';
                break;
            case FileConst.xml:
                suffix = '.xml';
                break;
            case FileConst.pdf:
                suffix = '.pdf';
                break;
            case FileConst.csv:
                suffix = '.csv';
                break;
            default:
                break;
        }
        return suffix;
    }
    /**
     * @param {?} fileType
     * @return {?}
     */
    static getFileTypeName(fileType) {
        /** @type {?} */
        let fileTypeName = '';
        switch (fileType) {
            case 'XLS':
                fileTypeName = FileConst.xls;
                break;
            case 'XLSX':
                fileTypeName = FileConst.xlsx;
                break;
            case 'XLSM':
                fileTypeName = FileConst.xlsm;
                break;
            case 'ET':
                fileTypeName = FileConst.et;
                break;
            case 'XML':
                fileTypeName = FileConst.xml;
                break;
            case 'PDF':
                fileTypeName = FileConst.pdf;
                break;
            case 'CSV':
                fileTypeName = FileConst.csv;
                break;
            default:
                break;
        }
        return fileTypeName;
    }
}
export class DataIEUtils {
    /**
     * @param {?} repository
     * @param {?} option
     * @return {?}
     */
    static ChooseSu(repository, option) {
        /** @type {?} */
        let su = '';
        // 通用导入导出仓库存在，使用下面分支
        if (repository !== null) {
            /** @type {?} */
            const befRestService = DataIEUtils.GetBefRestService(repository);
            su = DataIEUtils.getSu(befRestService.baseUri);
        }
        // 手工开发的仓库不存在，采用传入的su
        if (option['su'] !== undefined && option['su'] !== null) {
            su = option['su'];
        }
        return su;
    }
    /**
     * @param {?} preurl
     * @return {?}
     */
    static getSu(preurl) {
        /** @type {?} */
        const str = preurl.substring(preurl.indexOf("//") + 2);
        /** @type {?} */
        let strs = str.split('/');
        /** @type {?} */
        const su = strs[3];
        return su;
    }
    /**
     * @param {?} preurl
     * @return {?}
     */
    static getApp(preurl) {
        /** @type {?} */
        const str = preurl.substring(preurl.indexOf("//") + 2);
        /** @type {?} */
        let strs = str.split('/');
        /** @type {?} */
        const app = strs[2];
        return app;
    }
    /**
     * @param {?} preurl
     * @return {?}
     */
    static getPort(preurl) {
        // "http://localhost:5000/api/scm/sd/v1.0"
        /** @type {?} */
        const str = preurl.substring(preurl.indexOf("//") + 2);
        // 只取前两位，51xx,50xx,52xx
        /** @type {?} */
        const port = str.substr(str.indexOf(':') + 1, 2);
        return port;
    }
    /**
     * @param {?} repository
     * @return {?}
     */
    static GetBefRestService(repository) {
        /** @type {?} */
        const befRepository = (/** @type {?} */ (repository));
        return befRepository.restService;
    }
    /**
     * @param {?} baseUrl
     * @return {?}
     */
    static GetPreUrl(baseUrl) {
        /** @type {?} */
        const lastIndex = baseUrl.lastIndexOf('/');
        /** @type {?} */
        const preurl = baseUrl.substr(0, lastIndex);
        return preurl;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static JudgeIllegalChar(str) {
        /** @type {?} */
        const illegalChar = ['?', '、', '\\', '/', '*', '\'', '"', '“', '”', '<', '>', '|', ',', ' '];
        illegalChar.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (str.indexOf(item) !== -1) {
                return true;
            }
        }));
        return false;
    }
    /**
     * @param {?} http
     * @return {?}
     */
    static getTranslateValue(http) {
        /** @type {?} */
        let lang;
        if (localStorage === undefined || localStorage === null) {
            return of(DefaultLang['zh-CHS']);
        }
        lang = localStorage.getItem('languageCode');
        if (lang === undefined || lang === null || lang === 'zh-CHS') {
            return of(DefaultLang['zh-CHS']);
        }
        if (http === undefined || http === null) {
            return of(DefaultLang['zh-CHS']);
        }
        /** @type {?} */
        const subject = new Subject();
        /** @type {?} */
        let url = `/platform/common/web/@gsp-dip/i18n/${lang}.json`;
        http.get(url).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            console.log(data);
            subject.next(data);
        }));
        return subject;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YUlFVXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWRpcC9kYXRhLWltcC1leHAvIiwic291cmNlcyI6WyJsaWIvc2VydmljZS9VdGlscy9EYXRhSUVVdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRXBELE9BQU8sRUFBYSxFQUFFLEVBQUUsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQzs7Ozs7QUFFdEQsTUFBTSxVQUFVLGlCQUFpQixDQUFDLEdBQVE7SUFDeEMsSUFBSSxHQUFHLEtBQUssU0FBUyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQzs7Ozs7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUFDLEdBQVE7SUFDcEMsSUFBSSxHQUFHLEtBQUssU0FBUyxFQUFFO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFDRCxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELElBQUksR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDbkIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQzs7Ozs7QUFDRCxNQUFNLFVBQVUsYUFBYSxDQUFDLEdBQVc7SUFDdkMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFO1FBQ2YsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQzs7Ozs7QUFFRCxNQUFNLFVBQVUsY0FBYyxDQUFDLFFBQWdCOztVQUN2QyxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJOztVQUMxQixNQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFDN0IsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTs7Y0FDZixPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7O1lBQ2hDLEdBQVU7UUFDZCwwQ0FBMEM7UUFDMUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdkMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDNUIsSUFBSSxHQUFHLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7Z0JBQ3RDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2Y7U0FDRjtRQUNELE9BQU8sRUFBRSxDQUFDO0tBQ1g7U0FBTTtRQUNMLE9BQU8sRUFBRSxDQUFDO0tBQ1g7QUFDSCxDQUFDO0FBRUQsTUFBTSxPQUFPLFlBQVk7Ozs7O0lBQ2hCLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFlOztZQUN4QyxNQUFNLEdBQUcsSUFBSTtRQUNqQixRQUFRLFVBQVUsRUFBRTtZQUNsQixLQUFLLFNBQVMsQ0FBQyxHQUFHO2dCQUNoQixNQUFNLEdBQUcsTUFBTSxDQUFDO2dCQUNoQixNQUFNO1lBQ1IsS0FBSyxTQUFTLENBQUMsSUFBSTtnQkFDakIsTUFBTSxHQUFHLE9BQU8sQ0FBQztnQkFDakIsTUFBTTtZQUNSLEtBQUssU0FBUyxDQUFDLElBQUk7Z0JBQ2pCLE1BQU0sR0FBRyxPQUFPLENBQUM7Z0JBQ2pCLE1BQU07WUFDUixLQUFLLFNBQVMsQ0FBQyxFQUFFO2dCQUNmLE1BQU0sR0FBRyxLQUFLLENBQUM7Z0JBQ2YsTUFBTTtZQUNSLEtBQUssU0FBUyxDQUFDLEdBQUc7Z0JBQ2hCLE1BQU0sR0FBRyxNQUFNLENBQUM7Z0JBQ2hCLE1BQU07WUFDUixLQUFLLFNBQVMsQ0FBQyxHQUFHO2dCQUNoQixNQUFNLEdBQUcsTUFBTSxDQUFDO2dCQUNoQixNQUFNO1lBQ1IsS0FBSyxTQUFTLENBQUMsR0FBRztnQkFDaEIsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDaEIsTUFBTTtZQUNSO2dCQUNFLE1BQU07U0FDVDtRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBRU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxRQUFROztZQUNoQyxZQUFZLEdBQUcsRUFBRTtRQUNyQixRQUFRLFFBQVEsRUFBRTtZQUNoQixLQUFLLEtBQUs7Z0JBQ1IsWUFBWSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUM7Z0JBQzdCLE1BQU07WUFDUixLQUFLLE1BQU07Z0JBQ1QsWUFBWSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7Z0JBQzlCLE1BQU07WUFDUixLQUFLLE1BQU07Z0JBQ1QsWUFBWSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7Z0JBQzlCLE1BQU07WUFDUixLQUFLLElBQUk7Z0JBQ1AsWUFBWSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUM7Z0JBQzVCLE1BQU07WUFDUixLQUFLLEtBQUs7Z0JBQ1IsWUFBWSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUM7Z0JBQzdCLE1BQU07WUFDUixLQUFLLEtBQUs7Z0JBQ1IsWUFBWSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUM7Z0JBQzdCLE1BQU07WUFDUixLQUFLLEtBQUs7Z0JBQ1IsWUFBWSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUM7Z0JBQzdCLE1BQU07WUFDUjtnQkFDRSxNQUFNO1NBQ1Q7UUFDRCxPQUFPLFlBQVksQ0FBQztJQUN0QixDQUFDO0NBQ0Y7QUFFRCxNQUFNLE9BQU8sV0FBVzs7Ozs7O0lBQ3RCLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBZSxFQUFFLE1BQVc7O1lBQ3RDLEVBQUUsR0FBRyxFQUFFO1FBQ1gsb0JBQW9CO1FBQ3BCLElBQUksVUFBVSxLQUFLLElBQUksRUFBRTs7a0JBQ2pCLGNBQWMsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDO1lBQ2hFLEVBQUUsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNoRDtRQUNELHFCQUFxQjtRQUNyQixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxTQUFTLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtZQUN2RCxFQUFFLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDOzs7OztJQUVELE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBYzs7Y0FDbkIsR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O1lBQ2xELElBQUksR0FBYSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7Y0FDN0IsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbEIsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDOzs7OztJQUVELE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBYzs7Y0FDcEIsR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O1lBQ2xELElBQUksR0FBYSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQzs7Y0FDN0IsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkIsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7OztJQUVNLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBYzs7O2NBRTVCLEdBQUcsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOzs7Y0FFaEQsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQzs7Ozs7SUFFTSxNQUFNLENBQUMsaUJBQWlCLENBQUMsVUFBMkI7O2NBQ25ELGFBQWEsR0FBRyxtQkFBb0IsVUFBVSxFQUFBO1FBQ3BELE9BQU8sYUFBYSxDQUFDLFdBQVcsQ0FBQztJQUNuQyxDQUFDOzs7OztJQUVNLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBZTs7Y0FDL0IsU0FBUyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDOztjQUNwQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDO1FBQzNDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBRU0sTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQVc7O2NBQ2xDLFdBQVcsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7UUFDNUYsV0FBVyxDQUFDLE9BQU87Ozs7UUFBQyxJQUFJLENBQUMsRUFBRTtZQUN6QixJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7Z0JBQzVCLE9BQU8sSUFBSSxDQUFDO2FBQ2I7UUFDSCxDQUFDLEVBQUMsQ0FBQztRQUNILE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQzs7Ozs7SUFFTSxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBZ0I7O1lBQzFDLElBQVk7UUFDaEIsSUFBSSxZQUFZLEtBQUssU0FBUyxJQUFJLFlBQVksS0FBSyxJQUFJLEVBQUU7WUFDdkQsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDbEM7UUFDRCxJQUFJLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUU1QyxJQUFJLElBQUksS0FBSyxTQUFTLElBQUksSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssUUFBUSxFQUFFO1lBQzVELE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1NBQ2xDO1FBQ0QsSUFBSSxJQUFJLEtBQUssU0FBUyxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7WUFDdkMsT0FBTyxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7U0FDbEM7O2NBQ0ssT0FBTyxHQUFHLElBQUksT0FBTyxFQUFPOztZQUM5QixHQUFHLEdBQVcsc0NBQXNDLElBQUksT0FBTztRQUNuRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVM7Ozs7UUFBQyxJQUFJLENBQUMsRUFBRTtZQUM3QixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckIsQ0FBQyxFQUFDLENBQUM7UUFDSCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JlcG9zaXRvcnl9IGZyb20gJ0BmYXJyaXMvZGV2a2l0JztcclxuaW1wb3J0IHtCZWZSZXBvc2l0b3J5LCBCZWZSZXN0U2VydmljZX0gZnJvbSAnQGZhcnJpcy9iZWYnO1xyXG5pbXBvcnQge0RlZmF1bHRMYW5nfSBmcm9tICcuLi8uLi9pMThuL2RlZmF1bHQtbGFuZyc7XHJcbmltcG9ydCB7SHR0cENsaWVudH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQge09ic2VydmFibGUsIG9mLCBTdWJqZWN0fSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtGaWxlQ29uc3R9IGZyb20gJy4uLy4uL21vZGVsL3V0aWxzL0ZpbGVDb25zdCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQob2JqOiBhbnkpOiBib29sZWFuIHtcclxuICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBpZiAob2JqID09PSBudWxsKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsT3JFbXB0eShvYmo6IGFueSk6IGJvb2xlYW4ge1xyXG4gIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGlmIChvYmogPT09IG51bGwpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBpZiAob2JqLmxlbmd0aCA9PSAwKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPckJsYW5rKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgaWYgKHN0ciA9PSBudWxsKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgaWYgKHN0ci50cmltKCkubGVuZ3RoID09IDApIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeVN0cmluZyhwYXJhTmFtZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhhc2g7XHJcbiAgY29uc3QgYXJyT2JqID0gdXJsLnNwbGl0KCc/Jyk7XHJcbiAgaWYgKGFyck9iai5sZW5ndGggPiAxKSB7XHJcbiAgICBjb25zdCBhcnJQYXJhID0gYXJyT2JqWzFdLnNwbGl0KCcmJyk7XHJcbiAgICBsZXQgYXJyOiBhbnlbXTtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZvci1vZlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJQYXJhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGFyciA9IGFyclBhcmFbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgaWYgKGFyciAhPSBudWxsICYmIGFyclswXSA9PT0gcGFyYU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gYXJyWzFdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlVHlwZVV0aWwge1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RmlsZUV4dGVuc2lvbih2YWx1ZUZpZWxkOiBhbnkpOiBhbnkge1xyXG4gICAgbGV0IHN1ZmZpeCA9IG51bGw7XHJcbiAgICBzd2l0Y2ggKHZhbHVlRmllbGQpIHtcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueGxzOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueGxzJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueGxzeDpcclxuICAgICAgICBzdWZmaXggPSAnLnhsc3gnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bHNtOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueGxzbSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LmV0OlxyXG4gICAgICAgIHN1ZmZpeCA9ICcuZXQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC54bWw6XHJcbiAgICAgICAgc3VmZml4ID0gJy54bWwnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC5wZGY6XHJcbiAgICAgICAgc3VmZml4ID0gJy5wZGYnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC5jc3Y6XHJcbiAgICAgICAgc3VmZml4ID0gJy5jc3YnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN1ZmZpeDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0RmlsZVR5cGVOYW1lKGZpbGVUeXBlKSB7XHJcbiAgICBsZXQgZmlsZVR5cGVOYW1lID0gJyc7XHJcbiAgICBzd2l0Y2ggKGZpbGVUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ1hMUyc6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0LnhscztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnWExTWCc6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0Lnhsc3g7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1hMU00nOlxyXG4gICAgICAgIGZpbGVUeXBlTmFtZSA9IEZpbGVDb25zdC54bHNtO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdFVCc6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0LmV0O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdYTUwnOlxyXG4gICAgICAgIGZpbGVUeXBlTmFtZSA9IEZpbGVDb25zdC54bWw7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1BERic6XHJcbiAgICAgICAgZmlsZVR5cGVOYW1lID0gRmlsZUNvbnN0LnBkZjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnQ1NWJzpcclxuICAgICAgICBmaWxlVHlwZU5hbWUgPSBGaWxlQ29uc3QuY3N2O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpbGVUeXBlTmFtZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRhSUVVdGlscyB7XHJcbiAgc3RhdGljIENob29zZVN1KHJlcG9zaXRvcnk6IGFueSwgb3B0aW9uOiBhbnkpOiBhbnkge1xyXG4gICAgbGV0IHN1ID0gJyc7XHJcbiAgICAvLyDpgJrnlKjlr7zlhaXlr7zlh7rku5PlupPlrZjlnKjvvIzkvb/nlKjkuIvpnaLliIbmlK9cclxuICAgIGlmIChyZXBvc2l0b3J5ICE9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IGJlZlJlc3RTZXJ2aWNlID0gRGF0YUlFVXRpbHMuR2V0QmVmUmVzdFNlcnZpY2UocmVwb3NpdG9yeSk7XHJcbiAgICAgIHN1ID0gRGF0YUlFVXRpbHMuZ2V0U3UoYmVmUmVzdFNlcnZpY2UuYmFzZVVyaSk7XHJcbiAgICB9XHJcbiAgICAvLyDmiYvlt6XlvIDlj5HnmoTku5PlupPkuI3lrZjlnKjvvIzph4fnlKjkvKDlhaXnmoRzdVxyXG4gICAgaWYgKG9wdGlvblsnc3UnXSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvblsnc3UnXSAhPT0gbnVsbCkge1xyXG4gICAgICBzdSA9IG9wdGlvblsnc3UnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTdShwcmV1cmw6IHN0cmluZyk6IGFueSB7XHJcbiAgICBjb25zdCBzdHIgPSBwcmV1cmwuc3Vic3RyaW5nKHByZXVybC5pbmRleE9mKFwiLy9cIikgKyAyKTtcclxuICAgIGxldCBzdHJzOiBzdHJpbmdbXSA9IHN0ci5zcGxpdCgnLycpO1xyXG4gICAgY29uc3Qgc3UgPSBzdHJzWzNdO1xyXG4gICAgcmV0dXJuIHN1O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEFwcChwcmV1cmw6IHN0cmluZyk6IGFueSB7XHJcbiAgICBjb25zdCBzdHIgPSBwcmV1cmwuc3Vic3RyaW5nKHByZXVybC5pbmRleE9mKFwiLy9cIikgKyAyKTtcclxuICAgIGxldCBzdHJzOiBzdHJpbmdbXSA9IHN0ci5zcGxpdCgnLycpO1xyXG4gICAgY29uc3QgYXBwID0gc3Ryc1syXTtcclxuICAgIHJldHVybiBhcHA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldFBvcnQocHJldXJsOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgLy8gXCJodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL3NjbS9zZC92MS4wXCJcclxuICAgIGNvbnN0IHN0ciA9IHByZXVybC5zdWJzdHJpbmcocHJldXJsLmluZGV4T2YoXCIvL1wiKSArIDIpO1xyXG4gICAgLy8g5Y+q5Y+W5YmN5Lik5L2N77yMNTF4eCw1MHh4LDUyeHhcclxuICAgIGNvbnN0IHBvcnQgPSBzdHIuc3Vic3RyKHN0ci5pbmRleE9mKCc6JykgKyAxLCAyKTtcclxuICAgIHJldHVybiBwb3J0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBHZXRCZWZSZXN0U2VydmljZShyZXBvc2l0b3J5OiBSZXBvc2l0b3J5PGFueT4pOiBCZWZSZXN0U2VydmljZSB7XHJcbiAgICBjb25zdCBiZWZSZXBvc2l0b3J5ID0gPEJlZlJlcG9zaXRvcnk8YW55Pj5yZXBvc2l0b3J5O1xyXG4gICAgcmV0dXJuIGJlZlJlcG9zaXRvcnkucmVzdFNlcnZpY2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEdldFByZVVybChiYXNlVXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbGFzdEluZGV4ID0gYmFzZVVybC5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgY29uc3QgcHJldXJsID0gYmFzZVVybC5zdWJzdHIoMCwgbGFzdEluZGV4KTtcclxuICAgIHJldHVybiBwcmV1cmw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIEp1ZGdlSWxsZWdhbENoYXIoc3RyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGlsbGVnYWxDaGFyID0gWyc/JywgJ+OAgScsICdcXFxcJywgJy8nLCAnKicsICdcXCcnLCAnXCInLCAn4oCcJywgJ+KAnScsICc8JywgJz4nLCAnfCcsICcsJywgJyAnXTtcclxuICAgIGlsbGVnYWxDaGFyLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGlmIChzdHIuaW5kZXhPZihpdGVtKSAhPT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldFRyYW5zbGF0ZVZhbHVlKGh0dHA6IEh0dHBDbGllbnQpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgbGV0IGxhbmc6IHN0cmluZztcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UgPT09IHVuZGVmaW5lZCB8fCBsb2NhbFN0b3JhZ2UgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIG9mKERlZmF1bHRMYW5nWyd6aC1DSFMnXSk7XHJcbiAgICB9XHJcbiAgICBsYW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlQ29kZScpO1xyXG5cclxuICAgIGlmIChsYW5nID09PSB1bmRlZmluZWQgfHwgbGFuZyA9PT0gbnVsbCB8fCBsYW5nID09PSAnemgtQ0hTJykge1xyXG4gICAgICByZXR1cm4gb2YoRGVmYXVsdExhbmdbJ3poLUNIUyddKTtcclxuICAgIH1cclxuICAgIGlmIChodHRwID09PSB1bmRlZmluZWQgfHwgaHR0cCA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gb2YoRGVmYXVsdExhbmdbJ3poLUNIUyddKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICBsZXQgdXJsOiBzdHJpbmcgPSBgL3BsYXRmb3JtL2NvbW1vbi93ZWIvQGdzcC1kaXAvaTE4bi8ke2xhbmd9Lmpzb25gO1xyXG4gICAgaHR0cC5nZXQodXJsKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICBzdWJqZWN0Lm5leHQoZGF0YSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdWJqZWN0O1xyXG4gIH1cclxufVxyXG4iXX0=