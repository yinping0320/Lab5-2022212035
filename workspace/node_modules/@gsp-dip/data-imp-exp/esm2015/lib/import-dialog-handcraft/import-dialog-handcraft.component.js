/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ComponentFactoryResolver, ElementRef, EventEmitter, Injector, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { FileUploader } from '../service/UploaderService/FileUpload/file-uploader';
import { DataImportService } from '../service/DataIEService/data-import.service';
import { NotifyService } from '@farris/ui-notify';
import { LoadingService } from '@farris/ui-loading';
import { MethodType } from '../model/DataIEType/MethodType';
import { Subject } from 'rxjs';
import { DataIEUtils, FileTypeUtil, isNullOrEmpty, isNullOrUndefined } from '../service/Utils/DataIEUtils';
import { HttpClient } from '@angular/common/http';
import { BsModalService } from '@farris/ui-modal';
import { RuleSelectComponent } from '../rule-select/rule-select.component';
import { MessagerService } from '@farris/ui-messager';
import { FileConst } from '../model/utils/FileConst';
import { CommonParams } from "../service/Entity/CommonParams";
import { ValidateFormComponent } from "../validate-form/validate-form.component";
export class ImportDialogHandcraftComponent {
    /**
     * @param {?} dataImportService
     * @param {?} notify
     * @param {?} loadingService
     * @param {?} http
     * @param {?} injector
     * @param {?} modalService
     * @param {?} msgService
     * @param {?} resolver
     */
    constructor(dataImportService, notify, loadingService, http, injector, modalService, msgService, resolver) {
        this.dataImportService = dataImportService;
        this.notify = notify;
        this.loadingService = loadingService;
        this.http = http;
        this.injector = injector;
        this.modalService = modalService;
        this.msgService = msgService;
        this.resolver = resolver;
        // 规则ID 该id为表单上配置的规则id
        this.ruleId = '';
        // 过滤条件
        this.importOption = null;
        this.subject = null;
        this.selectrule = false;
        // 记录的规则
        this.recordRule = null;
        this.selectfiletype = null;
        this.currentRuleName = '';
        this.currentRuleId = '';
        this.currentRuleFileType = '';
        this.enableTemplate = true;
        this.closeXLSX = false;
        this.enableSecurityLevelSelect = false;
        this.securityLevelName = '';
        this.ImportSecretRemindInfo = '';
        this.acceptFileType = '.csv,.xlsm,.xlsx,.xls,.pdf,.xml,.et';
        // 文件名称
        this.fileName = '';
        this.origin = window.location.origin;
        this.uploader = new FileUploader({
            url: '',
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile'
        });
        // 控制Destroy表单中的输入组件
        this.needDestroy = new EventEmitter();
        this.showfiletype = true;
        this.enableRuntimeCustom = false;
        this.valueField = null;
        this.lookupIcon = '<i class="f-icon f-icon-windows"></i>';
        this.fileListItems = [
            { id: FileConst.xls, label: FileConst.xls },
            { id: FileConst.xlsx, label: FileConst.xlsx },
            { id: FileConst.xlsm, label: FileConst.xlsm },
            { id: FileConst.et, label: FileConst.et },
        ];
        this.securityLevelItems = [];
        this.uploader.onSuccessItem = this.Import.bind(this);
        this.uploader.onErrorItem = this.ErrorLog.bind(this);
        this.uploader.onAfterAddingFile = this.afterAddFile;
        DataIEUtils.getTranslateValue(http).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.import_file = res['import_file'];
            this.choose_file = res['choose_file'];
            this.file_type = res['file_type'];
            this.import_placeholder = res['import_placeholder'];
            this.download_template = res['download_template'];
            this.ie_cancel = res['ie_cancel'];
            this.ie_ok = res['ie_ok'];
            this.choose_truefile = res['choose_truefile'];
            this.download_template_ok = res['download_template_ok'];
            this.download_template_fail = res['download_template_fail'];
            this.upload_fail = res['upload_fail'];
            this.import_success = res['import_success'];
            this.import_form_success = res['import_form_success'];
            this.import_fail = res['import_fail'];
            this.rule_list = res['rule_list'];
            this.select_xlsx_notify = res['select_xlsx_notify'];
            this.i18nResource = res;
        }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.importOption.selectfiletype === true) {
            this.selectfiletype = this.importOption.selectfiletype;
            if (this.importOption.suffix !== undefined && this.importOption.suffix !== null) {
                this.valueField = FileTypeUtil.getFileTypeName(this.importOption.suffix.toUpperCase());
            }
        }
        /** @type {?} */
        let extendInfo = this.recordRule.extendInfo;
        if (!isNullOrUndefined(extendInfo)) {
            this.extendInfo = JSON.parse(extendInfo);
            this.ImportSecretRemindInfo = this.extendInfo['ImportSecretRemindInfo'];
            this.closeXLSX = this.extendInfo['closeXLSX'];
            if (this.closeXLSX === true) {
                this.fileListItems = [
                    { id: FileConst.xls, label: FileConst.xls },
                    { id: FileConst.xlsm, label: FileConst.xlsm },
                    { id: FileConst.et, label: FileConst.et }
                ];
            }
        }
        /** @type {?} */
        const securityLevels = this.recordRule.securityLevels;
        if (!isNullOrEmpty(securityLevels)) {
            this.enableSecurityLevelSelect = true;
            securityLevels.forEach((/**
             * @param {?} e
             * @return {?}
             */
            e => {
                /** @type {?} */
                const level = {
                    value: e.name,
                    label: e.name
                };
                this.securityLevelItems.push(level);
            }));
            this.securityLevelName = this.securityLevelItems[0].value;
        }
        this.currentRuleId = this.recordRule.ruleId;
        this.currentRuleName = this.recordRule.ruleName;
        this.valueField = FileTypeUtil.getFileTypeName(this.recordRule.fileType);
        if (this.valueField === '') {
            //未在当前可选文件的类型时，不显示选文件类型控件
            this.showfiletype = false;
        }
        this.currentRuleFileType = this.valueField;
        this.controlFileType();
        if (this.importOption.enableRuntimeCustom === true) {
            this.enableRuntimeCustom = true;
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    openSelectRule($event) {
        this.loadingService.show();
        //过滤规则时用表单命令处配置的规则来过滤，因此用ruleId，而不是currentRuleId
        /** @type {?} */
        const url = '/api/runtime/dip/v1.0/dataIeRuleManage/filterRulesByRuleIdAndVoId';
        /** @type {?} */
        const body = {
            ruleId: this.ruleId,
            ruleType: 0,
            voId: this.importOption.voId,
            methodType: this.methodType,
            importChildNodeCode: this.importOption.importChildNodeCode,
            closeXlsx: this.closeXLSX
        };
        this.http.post(url, body).subscribe((/**
         * @param {?} RuleMgrs
         * @return {?}
         */
        (RuleMgrs) => {
            this.loadingService.clearAll();
            if (RuleMgrs.length === 0) {
                this.notify.info(this.i18nResource['ruleselect_listempty']);
                return;
            }
            /** @type {?} */
            const compFactory = this.resolver.resolveComponentFactory(RuleSelectComponent);
            /** @type {?} */
            const compRef = compFactory.create(this.injector);
            compRef.instance.ruleId = this.ruleId;
            compRef.instance.voId = this.importOption.voId;
            compRef.instance.ruleType = 0;
            compRef.instance.RuleMgrsData = RuleMgrs;
            /** @type {?} */
            const modalConfig = {
                title: this.rule_list,
                width: 950,
                height: 500,
                buttons: compRef.instance.modalFooter,
                showHeader: true,
                showMaxButton: false,
                showButtons: true
            };
            /** @type {?} */
            const dialog = this.modalService.show(compRef, modalConfig);
            compRef.instance.closeModal.subscribe((/**
             * @return {?}
             */
            () => {
                dialog.close();
            }));
            compRef.instance.okModal.subscribe((/**
             * @param {?} RuleMgr
             * @return {?}
             */
            RuleMgr => {
                this.currentRuleId = RuleMgr.id;
                this.currentRuleName = RuleMgr.name;
                this.valueField = FileTypeUtil.getFileTypeName(RuleMgr.fileType);
                this.currentRuleFileType = this.valueField;
                this.controlFileType();
                dialog.close();
            }));
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.loadingService.clearAll();
            this.notify.error(error.error.Message);
            console.log(error.error.Message);
        }));
    }
    /**
     * @return {?}
     */
    getFileExtension() {
        /** @type {?} */
        let suffix = null;
        switch (this.valueField) {
            case FileConst.xls:
                suffix = '.xls';
                break;
            case FileConst.xlsx:
                suffix = '.xlsx';
                break;
            case FileConst.xlsm:
                suffix = '.xlsm';
                break;
            case FileConst.et:
                suffix = '.et';
                break;
            case FileConst.xml:
                suffix = '.xml';
                break;
            case FileConst.pdf:
                suffix = '.pdf';
                break;
            case FileConst.csv:
                suffix = '.csv';
                break;
            default:
                break;
        }
        return suffix;
    }
    /**
     * @return {?}
     */
    canDownloadTemplate() {
        /** @type {?} */
        const suffix = this.getFileExtension();
        /** @type {?} */
        const canList = ['.xls', '.xlsx', '.xlsm', '.et'];
        if (canList.findIndex((/**
         * @param {?} t
         * @return {?}
         */
        t => t === suffix)) < 0) {
            return false;
        }
        return true;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
    }
    // 选择文件后事件
    /**
     * @param {?} event
     * @return {?}
     */
    selectedFileOnChange(event) {
        /** @type {?} */
        const str = event.target.value;
        if (str === '') {
            return;
        }
        /** @type {?} */
        const index = str.lastIndexOf('\\');
        this.fileName = str.substring(index + 1);
        if (this.fileName.split(".").length === 2 && this.fileName.split(".")[1] === "jpg") {
            this.uploader.queue = [];
            this.notify.info(this.choose_truefile);
            return;
        }
        // console.log('队列中的文件' + this.uploader.queue[0]);
    }
    // 关闭窗口
    /**
     * @return {?}
     */
    Close() {
        this.needDestroy.emit();
    }
    // 选择文件事件
    /**
     * @return {?}
     */
    SelectFile() {
        this.fileUpload.nativeElement.click();
    }
    /**
     * @return {?}
     */
    fileTypeValueChange() {
        if (this.controlFileType() === '.xlsx') {
            this.notify.info(this.select_xlsx_notify);
        }
    }
    /**
     * @return {?}
     */
    controlFileType() {
        /** @type {?} */
        const suffix = FileTypeUtil.getFileExtension(this.valueField);
        if (suffix !== null) {
            this.acceptFileType = suffix;
        }
        else {
            this.acceptFileType = '*';
        }
        return suffix;
    }
    // 下载模板
    /**
     * @return {?}
     */
    DownloadTemplate() {
        this.loadingService.show();
        /** @type {?} */
        let suffix = null;
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        this.importOption['securityLevelName'] = this.securityLevelName;
        this.dataImportService.DowmloadTemplate4HandCraft(this.currentRuleId, this.importOption, suffix);
        // this.dataImportService.complete.unsubscribe();
        /** @type {?} */
        const unsubscriber = this.dataImportService.complete.subscribe((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.loadingService.clearAll();
            if (data === '') {
                this.notify.success(this.download_template_ok);
                unsubscriber.unsubscribe();
            }
            else {
                this.notify.error(this.download_template_fail + data);
                unsubscriber.unsubscribe();
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => {
            this.loadingService.clearAll();
            this.notify.error(error.message);
        }));
    }
    // 添加文件后事件
    /**
     * @param {?} fileItem
     * @return {?}
     */
    afterAddFile(fileItem) {
    }
    // 开始导入
    /**
     * @return {?}
     */
    Ok() {
        console.log('开始上传！');
        console.log(this.uploader.queue);
        /** @type {?} */
        const loadingConfig = {
            message: this.i18nResource['import_loading']
        };
        this.loadingService.show(loadingConfig);
        /** @type {?} */
        const len = this.uploader.queue.length;
        if (len === 0) {
            this.notify.info(this.choose_truefile);
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        const lastFileItem = this.uploader.queue[len - 1];
        /** @type {?} */
        const maxFileSize = this.recordRule.importFileMaxSize * 1024 * 1024;
        if (lastFileItem.file.size > maxFileSize) {
            this.notify.warning(this.i18nResource['importfile_toobig'] + this.recordRule.importFileMaxSize + 'MB');
            this.loadingService.clearAll();
            return;
        }
        /** @type {?} */
        const su = this.importOption.su;
        /** @type {?} */
        const fixedUrl = this.origin + '/api/runtime/dip/v1.0/AllSteps/dataimportvmaction?su=' + su;
        /** @type {?} */
        let headers = [{ name: 'su', value: su }];
        if (!isNullOrUndefined(this.extendInfo)) {
            /** @type {?} */
            const enableSecurityLevel = (/** @type {?} */ (this.extendInfo['enableSecurityLevel']));
            if (enableSecurityLevel) {
                headers.push({ name: 'enableSecurityLevel', value: enableSecurityLevel });
                /** @type {?} */
                const securityLevelPrefix = this.extendInfo['securityLevelPrefix'];
                /** @type {?} */
                const securityLevelSuffix = this.extendInfo['securityLevelSuffix'];
                headers.push({ name: 'securityLevelPrefix', value: encodeURIComponent(securityLevelPrefix) });
                headers.push({ name: 'securityLevelSuffix', value: encodeURIComponent(securityLevelSuffix) });
                headers.push({ name: 'securityLevelName', value: encodeURIComponent(this.securityLevelName) });
            }
        }
        /** @type {?} */
        let suffix = '';
        if (this.canDownloadTemplate() && this.valueField !== this.currentRuleFileType) {
            suffix = FileTypeUtil.getFileExtension(this.valueField);
        }
        /** @type {?} */
        let globalVar = '';
        if (!isNullOrUndefined(this.importOption['GlobalParam'])) {
            if (typeof (this.importOption['GlobalParam']) === 'object') {
                globalVar = JSON.stringify(this.importOption['GlobalParam']);
            }
            else {
                globalVar = this.importOption['GlobalParam'];
            }
        }
        /** @type {?} */
        let funcId = '';
        if (!isNullOrUndefined(this.importOption.funcId)) {
            funcId = this.importOption.funcId;
        }
        headers.push({ name: 'ruleId', value: this.currentRuleId });
        headers.push({ name: 'globalParam', value: globalVar });
        headers.push({ name: 'suffix', value: suffix });
        headers.push({ name: 'funcId', value: funcId });
        headers.push({ name: 'securityLevelName', value: this.securityLevelName });
        this.uploader.setOptions({
            url: fixedUrl,
            method: 'POST',
            autoUpload: false,
            itemAlias: 'uploadedfile',
            headers: headers
        });
        this.uploader.uploadItem(lastFileItem);
    }
    // 取消事件
    /**
     * @return {?}
     */
    Cancel() {
        this.needDestroy.emit();
    }
    // 上传失败后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    ErrorLog(item, response, status, headers) {
        this.loadingService.clearAll();
        try {
            /** @type {?} */
            const temRes = JSON.parse(response);
            this.msgService.error(this.upload_fail + temRes.message);
        }
        catch (_a) {
            this.msgService.error(this.upload_fail + response);
        }
        this.Close();
        /** @type {?} */
        const len = this.uploader.queue.length;
        if (len > 0) {
            this.uploader.queue.splice(0, 1);
        }
    }
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    Import(item, response, status, headers) {
        switch (this.methodType) {
            case MethodType.CommonImport:
                this.DataImportById(item, response, status, headers);
                break;
            case MethodType.ImportSubTableDetail:
                // this.ImportSubTable(item, response, status, headers, suffix);
                break;
        }
    }
    // 显示校验结果
    /**
     * @private
     * @param {?} commonParams
     * @return {?}
     */
    ShowValidatedResult(commonParams) {
        /** @type {?} */
        const importResult = commonParams.importResult;
        /** @type {?} */
        const loadingParam = commonParams.loadingParam;
        if (importResult.validatedResults && importResult.validatedResults.length > 0) {
            loadingParam.loadingService.clearAll();
            /** @type {?} */
            const compFactory = this.resolver.resolveComponentFactory(ValidateFormComponent);
            /** @type {?} */
            const cmpRef = compFactory.create(this.injector);
            cmpRef.instance.validateResult = importResult.validatedResults;
            cmpRef.instance.su = commonParams.su;
            cmpRef.instance.i18nResource = commonParams.i18nResource;
            cmpRef.instance.loadingParam = loadingParam;
            /** @type {?} */
            const validateModalConfig = {
                title: this.i18nResource['validate_result_show'],
                width: 950,
                height: 550,
                buttons: cmpRef.instance.modalFooter,
                showHeader: true,
                showMaxButton: false,
                showButtons: true
            };
            /** @type {?} */
            const dialog = this.modalService.show(cmpRef, validateModalConfig);
            //0代表按钮中止或X点击；1代表按钮继续
            /** @type {?} */
            let closed = 0;
            dialog.dialog.instance.closed.subscribe((/**
             * @return {?}
             */
            () => {
                if (closed === 0) {
                    this.notify.info(this.i18nResource['after_validate_suspend']);
                    this.needDestroy.emit();
                }
            }));
            cmpRef.instance.closeModal.subscribe((/**
             * @return {?}
             */
            () => {
                closed = 0;
                dialog.close();
            }));
            cmpRef.instance.okModal.subscribe((/**
             * @param {?} validatedInfoList
             * @return {?}
             */
            (validatedInfoList) => {
                closed = 1;
                dialog.close();
                loadingParam.loadingService.show(loadingParam.loadingConfig);
                commonParams.importParam['validatedInfoList'] = validatedInfoList;
                //todo
                // this.Import4HandCraft(commonParams);
            }));
        }
    }
    // 上传成功后方法
    /**
     * @param {?} item
     * @param {?} response
     * @param {?} status
     * @param {?} headers
     * @return {?}
     */
    DataImportById(item, response, status, headers) {
        console.log(status);
        this.loadingService.clearAll();
        /** @type {?} */
        let importResult = (/** @type {?} */ (JSON.parse(response)));
        /** @type {?} */
        const loadingConfig = {
            message: this.i18nResource['import_loading']
        };
        /** @type {?} */
        const loadingParam = {
            loadingService: this.loadingService,
            loadingConfig: loadingConfig
        };
        /** @type {?} */
        const commonParams = new CommonParams();
        commonParams.loadingParam = loadingParam;
        commonParams.i18nResource = this.i18nResource;
        commonParams.su = this.importOption.su;
        commonParams.importResult = importResult;
        if (importResult.succeed === true) {
            if (importResult.formData && importResult.formData.length > 0) {
                if (typeof (importResult.formData[0]) !== 'object') {
                    /** @type {?} */
                    const formDataObjArray = [];
                    importResult.formData.forEach((/**
                     * @param {?} e
                     * @return {?}
                     */
                    e => {
                        formDataObjArray.push(JSON.parse(e));
                    }));
                    importResult.formData = formDataObjArray;
                }
            }
            this.needDestroy.emit(importResult);
            //导入成功如果展示校验结果，只能是校验策略是忽略，所有校验结果都是error
            this.ShowValidatedResult(commonParams);
        }
        else {
            if (importResult.validatedResults && importResult.validatedResults.length > 0) {
                this.ShowValidatedResult(commonParams);
            }
            else {
                /** @type {?} */
                const errorlevel = importResult.errorLevel;
                if (errorlevel === 'Info') {
                    this.notify.info(importResult.message);
                }
                else if (errorlevel === 'Warning') {
                    this.msgService.warning(importResult.message);
                }
                else {
                    this.msgService.error(this.import_fail + importResult.message);
                }
                this.needDestroy.emit(importResult);
            }
        }
    }
}
ImportDialogHandcraftComponent.decorators = [
    { type: Component, args: [{
                selector: 'hlo-import-dialog-handcraft',
                template: "<!-- <div class=\"container\">\n    <div region=\"south\" class=\"south mgleft\">\n        <table>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n                <td>\n                    <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectrule\">\n                <td class=\"mkwidth\">\n                    <label for=\"f_select_rule\">{{rule_list}}</label>\n                </td>\n                <td>\n                    <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\" [enableClear]=\"false\"\n                        [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\n                    </input-group>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectrule === false\">\n                <td class=\"mkwidth\">\n                    <label> </label>\n                </td>\n            </tr>\n            <tr *ngIf=\"selectfiletype\">\n                <td class=\"mkwidth\">\n                    <label for=\"f_select_fileType\">{{file_type}}</label>\n                </td>\n                <td>\n                    <farris-combo-list id=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\" [textField]=\"'label'\" [data]=\"fileListItems\"\n                        (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\n                    <i class=\"material-icons\" style=\"color: lightblue;\">file_download</i>\n                </td>\n            </tr>\n            <tr>\n                <td class=\"mkwidth\">\n                    <label for=\"f_upload\">{{import_file}}</label>\n                </td>\n                <td>\n                    <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\" [accept]=\"acceptFileType\"\n                        (change)=\"selectedFileOnChange($event)\" />\n                    <input type=\"text\" id=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\">\n                    <i class=\"material-icons\" style=\"color: lightblue;\">create_new_folder</i>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div> -->\n\n<form class=\"px-3 px-md-4 farris-form d-flex flex-wrap\">\n  <div class=\"col-12\" style=\"margin-top: 67px\">\n    <div *ngIf=\"enableRuntimeCustom === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\">\n        <label class=\" col-form-label\">\n          <span class=\"farris-label-text\">{{rule_list}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <input-group class=\"ng-untouched ng-pristine ng-valid\" [editable]=\"false\" [groupText]=\"lookupIcon\"\n                       [enableClear]=\"false\"\n                       [value]=\"currentRuleName\" (clickHandle)=\"openSelectRule($event)\">\n          </input-group>\n        </div>\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"openSelectRule($event)\">filter_none</i> -->\n      </div>\n    </div>\n    <div *ngIf=\"enableRuntimeCustom === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <span>&nbsp;</span>\n    </div>\n    <div *ngIf=\"showfiletype === false\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <span>&nbsp;</span>\n    </div>\n    <div *ngIf=\"showfiletype === true\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\" style=\"width: 450px\">\n        <label class=\"col-form-label\">\n          <span class=\"farris-label-text\">{{file_type}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <farris-combo-list id=\"f_select_fileType\" name=\"f_select_fileType\" [(ngModel)]=\"valueField\" [idField]=\"'id'\"\n                             [textField]=\"'label'\"\n                             [readonly]=\"canDownloadTemplate() === false\" [editable]=\"false\" [enableClear]=\"false\"\n                             [data]=\"fileListItems\" (valueChange)=\"fileTypeValueChange()\"></farris-combo-list>\n        </div>\n        <span>&nbsp;</span>\n        <button [disabled]=\"canDownloadTemplate() === false\" class=\"btn btn-secondary mr-2\" type=\"button\"\n                (click)=\"DownloadTemplate()\">{{download_template}}</button>\n        <!-- <i *ngIf=\"canDownloadTemplate() === true\" class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"DownloadTemplate()\">file_download</i> -->\n        <!-- <i *ngIf=\"canDownloadTemplate() === false\" class=\"material-icons\" style=\"color: white;\">file_download</i> -->\n        <!-- <span *ngIf=\"enableRuntimeCustom === true\"  class=\"f-icon f-icon-custom\" style=\"color: #388FFF;cursor: pointer;\"></span>\n        <span *ngIf=\"enableRuntimeCustom === false\"  class=\"f-icon f-icon-custom\" style=\"color:white\"></span> -->\n        <span class=\"f-icon f-icon-custom\" style=\"color:white\"></span>\n\n      </div>\n    </div>\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\">\n        <label class=\" col-form-label\">\n          <span class=\"farris-label-text\">{{import_file}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <input #fileUpload name=\"fileinput\" hidden=true type=\"file\" libFileSelect [uploader]=\"uploader\"\n                 [accept]=\"acceptFileType\"\n                 (change)=\"selectedFileOnChange($event)\"/>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"f_upload\" name=\"f_upload\" readonly=\"readonly\" class=\"form-control flie-loading\"\n                   [(ngModel)]=\"fileName\"\n                   [placeholder]=\"import_placeholder\">\n            <span class=\"input-group-btn\">\n                            <button class=\"btn btn-primary\" type=\"button\"\n                                    (click)=\"SelectFile()\">{{choose_file}}</button>\n                        </span>\n          </div>\n          <!-- <input-group id=\"f_upload\" name=\"f_upload\" [editable]=\"false\" [enableClear]=\"false\" [(ngModel)]=\"fileName\" [placeholder]=\"import_placeholder\"></input-group> -->\n        </div>\n        <!-- <i class=\"material-icons\" style=\"color: rosybrown; cursor: pointer;\" (click)=\"SelectFile()\">attachment</i> -->\n      </div>\n    </div>\n    <div *ngIf=\"enableSecurityLevelSelect\" class=\"farris-group-wrap form-inline farris-form-inline\">\n      <div class=\"form-group farris-form-group\" style=\"width: 340px\">\n        <label class=\"col-form-label\">\n          <span class=\"farris-label-text\">{{i18nResource.security_level}}</span>\n        </label>\n        <div class=\"farris-input-wrap\">\n          <farris-combo-list name=\"f_select_securitylevel\"  [(ngModel)]=\"securityLevelName\" [idField]=\"'value'\"\n                             [valueField]=\"'value'\" [textField]=\"'label'\" [editable]=\"false\" [enableClear]=\"false\" [data]=\"securityLevelItems\"></farris-combo-list>\n        </div>\n      </div>\n    </div>\n    <div class=\"farris-group-wrap form-inline farris-form-inline\">\n      <label style=\"color: red; font-size: 18px;\">{{ImportSecretRemindInfo}}</label>\n    </div>\n\n\n  </div>\n</form>\n\n\n<ng-template #selectFooter>\n  <!-- <img class=\"setting\" src=\"/platform/common/web/@gsp-dip/img/setting.svg\" alt=\"\u8BBE\u7F6E\" (click)=\"clickSetting()\" /> -->\n\n  <!-- <button *ngIf=\"enableTemplate\" type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"DownloadTemplate()\">{{download_template}}</button> -->\n  <button type=\"button\" class=\"btn btn-outline-secondary\" (click)=\"Cancel()\">{{ie_cancel}}</button>\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"Ok()\">{{ie_ok}}</button>\n</ng-template>\n",
                styles: [".barmanager{position:absolute;bottom:0;height:50px;right:30px;padding-left:50px}.top{top:100px;position:relative}table{width:100%}.mkwidth{width:75px;line-height:28px}.longlen{width:400px}.setting{position:absolute;top:286px;right:550px;width:16px;height:16px;-webkit-transition:.3s;transition:.3s;cursor:pointer;opacity:.2;z-index:2}.setting:hover{-webkit-transform:rotate(100deg);transform:rotate(100deg)}.downloadicon,.fileicon{position:absolute;width:26px;height:26px}"]
            }] }
];
/** @nocollapse */
ImportDialogHandcraftComponent.ctorParameters = () => [
    { type: DataImportService },
    { type: NotifyService },
    { type: LoadingService },
    { type: HttpClient },
    { type: Injector },
    { type: BsModalService },
    { type: MessagerService },
    { type: ComponentFactoryResolver }
];
ImportDialogHandcraftComponent.propDecorators = {
    modalFooter: [{ type: ViewChild, args: ['selectFooter',] }],
    ruleId: [{ type: Input }],
    importOption: [{ type: Input }],
    methodType: [{ type: Input }],
    subject: [{ type: Input }],
    recordRule: [{ type: Input }],
    fileUpload: [{ type: ViewChild, args: ['fileUpload',] }],
    needDestroy: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.modalFooter;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ruleId;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.importOption;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.methodType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.subject;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.selectrule;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.recordRule;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.selectfiletype;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.extendInfo;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleId;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.currentRuleFileType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableTemplate;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.closeXLSX;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableSecurityLevelSelect;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.securityLevelName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ImportSecretRemindInfo;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.acceptFileType;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileName;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileUpload;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.origin;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.uploader;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.needDestroy;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.showfiletype;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.enableRuntimeCustom;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.valueField;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_file;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.choose_file;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_placeholder;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.file_type;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ie_cancel;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.ie_ok;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.choose_truefile;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template_ok;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.download_template_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.upload_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_success;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_form_success;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.import_fail;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.rule_list;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.select_xlsx_notify;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.i18nResource;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.lookupIcon;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.fileListItems;
    /** @type {?} */
    ImportDialogHandcraftComponent.prototype.securityLevelItems;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.dataImportService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.loadingService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.http;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    ImportDialogHandcraftComponent.prototype.resolver;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0LWRpYWxvZy1oYW5kY3JhZnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1kaXAvZGF0YS1pbXAtZXhwLyIsInNvdXJjZXMiOlsibGliL2ltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0L2ltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCx3QkFBd0IsRUFDeEIsVUFBVSxFQUNWLFlBQVksRUFDWixRQUFRLEVBQ1IsS0FBSyxFQUVMLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxxREFBcUQsQ0FBQztBQUlqRixPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSw4Q0FBOEMsQ0FBQztBQUMvRSxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ2xELE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMxRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFDTCxXQUFXLEVBQ1gsWUFBWSxFQUVaLGFBQWEsRUFDYixpQkFBaUIsRUFDbEIsTUFBTSw4QkFBOEIsQ0FBQztBQUN0QyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFDaEQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHNDQUFzQyxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDbkQsT0FBTyxFQUFDLFlB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Ozs7OztJQUN4QixrREFBMEI7Ozs7O0lBQzFCLHNEQUFvQzs7Ozs7SUFDcEMsb0RBQW1DOzs7OztJQUNuQyxrREFBMEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5qZWN0b3IsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE91dHB1dCxcclxuICBUZW1wbGF0ZVJlZixcclxuICBWaWV3Q2hpbGRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtGaWxlVXBsb2FkZXJ9IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvZmlsZS11cGxvYWRlcic7XHJcbmltcG9ydCB7RmlsZUl0ZW19IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvZmlsZS1pdGVtJztcclxuaW1wb3J0IHtQYXJzZWRSZXNwb25zZUhlYWRlcnN9IGZyb20gJy4uL3NlcnZpY2UvVXBsb2FkZXJTZXJ2aWNlL0ZpbGVVcGxvYWQvcGFyc2VkLXJlc3BvbnNlLWhlYWRlcnMnO1xyXG5cclxuaW1wb3J0IHtEYXRhSW1wb3J0U2VydmljZX0gZnJvbSAnLi4vc2VydmljZS9EYXRhSUVTZXJ2aWNlL2RhdGEtaW1wb3J0LnNlcnZpY2UnO1xyXG5pbXBvcnQge05vdGlmeVNlcnZpY2V9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHtMb2FkaW5nU2VydmljZX0gZnJvbSAnQGZhcnJpcy91aS1sb2FkaW5nJztcclxuaW1wb3J0IHtNZXRob2RUeXBlfSBmcm9tICcuLi9tb2RlbC9EYXRhSUVUeXBlL01ldGhvZFR5cGUnO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQge1xyXG4gIERhdGFJRVV0aWxzLFxyXG4gIEZpbGVUeXBlVXRpbCxcclxuICBnZXRRdWVyeVN0cmluZyxcclxuICBpc051bGxPckVtcHR5LFxyXG4gIGlzTnVsbE9yVW5kZWZpbmVkXHJcbn0gZnJvbSAnLi4vc2VydmljZS9VdGlscy9EYXRhSUVVdGlscyc7XHJcbmltcG9ydCB7SHR0cENsaWVudH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQge0JzTW9kYWxTZXJ2aWNlfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHtSdWxlU2VsZWN0Q29tcG9uZW50fSBmcm9tICcuLi9ydWxlLXNlbGVjdC9ydWxlLXNlbGVjdC5jb21wb25lbnQnO1xyXG5pbXBvcnQge01lc3NhZ2VyU2VydmljZX0gZnJvbSAnQGZhcnJpcy91aS1tZXNzYWdlcic7XHJcbmltcG9ydCB7RmlsZUNvbnN0fSBmcm9tICcuLi9tb2RlbC91dGlscy9GaWxlQ29uc3QnO1xyXG5pbXBvcnQge0NvbW1vblBhcmFtc30gZnJvbSBcIi4uL3NlcnZpY2UvRW50aXR5L0NvbW1vblBhcmFtc1wiO1xyXG5pbXBvcnQge0RhdGFJRVJlc3VsdH0gZnJvbSBcIi4uL3NlcnZpY2UvRW50aXR5L0RhdGFJRVJlc3VsdFwiO1xyXG5pbXBvcnQge1ZhbGlkYXRlRm9ybUNvbXBvbmVudH0gZnJvbSBcIi4uL3ZhbGlkYXRlLWZvcm0vdmFsaWRhdGUtZm9ybS5jb21wb25lbnRcIjtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnaGxvLWltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vaW1wb3J0LWRpYWxvZy1oYW5kY3JhZnQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2ltcG9ydC1kaWFsb2ctaGFuZGNyYWZ0LmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIEltcG9ydERpYWxvZ0hhbmRjcmFmdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgQFZpZXdDaGlsZCgnc2VsZWN0Rm9vdGVyJykgbW9kYWxGb290ZXI6IFRlbXBsYXRlUmVmPGFueT47XHJcbiAgLy8g6KeE5YiZSUQg6K+laWTkuLrooajljZXkuIrphY3nva7nmoTop4TliJlpZFxyXG4gIEBJbnB1dCgpXHJcbiAgcnVsZUlkID0gJyc7XHJcbiAgLy8g6L+H5ruk5p2h5Lu2XHJcbiAgQElucHV0KClcclxuICBpbXBvcnRPcHRpb246IGFueSA9IG51bGw7XHJcbiAgQElucHV0KClcclxuICBtZXRob2RUeXBlOiBNZXRob2RUeXBlO1xyXG4gIEBJbnB1dCgpXHJcbiAgc3ViamVjdDogU3ViamVjdDxhbnk+ID0gbnVsbDtcclxuICBzZWxlY3RydWxlID0gZmFsc2U7XHJcbiAgLy8g6K6w5b2V55qE6KeE5YiZXHJcbiAgQElucHV0KClcclxuICByZWNvcmRSdWxlID0gbnVsbDtcclxuICBzZWxlY3RmaWxldHlwZSA9IG51bGw7XHJcbiAgZXh0ZW5kSW5mbzogYW55O1xyXG4gIGN1cnJlbnRSdWxlTmFtZSA9ICcnO1xyXG4gIGN1cnJlbnRSdWxlSWQgPSAnJztcclxuICBjdXJyZW50UnVsZUZpbGVUeXBlID0gJyc7XHJcbiAgZW5hYmxlVGVtcGxhdGUgPSB0cnVlO1xyXG4gIGNsb3NlWExTWCA9IGZhbHNlO1xyXG4gIGVuYWJsZVNlY3VyaXR5TGV2ZWxTZWxlY3QgPSBmYWxzZTtcclxuICBzZWN1cml0eUxldmVsTmFtZSA9ICcnO1xyXG5cclxuICBJbXBvcnRTZWNyZXRSZW1pbmRJbmZvID0gJyc7XHJcblxyXG4gIGFjY2VwdEZpbGVUeXBlID0gJy5jc3YsLnhsc20sLnhsc3gsLnhscywucGRmLC54bWwsLmV0JztcclxuICAvLyDmlofku7blkI3np7BcclxuICBmaWxlTmFtZSA9ICcnO1xyXG4gIC8vICAgbG9hZGluZ0NvbXA6IExvYWRpbmdDb21wb25lbnQgPSBudWxsO1xyXG4gIEBWaWV3Q2hpbGQoJ2ZpbGVVcGxvYWQnKVxyXG4gIGZpbGVVcGxvYWQ6IEVsZW1lbnRSZWY7XHJcbiAgcHJpdmF0ZSBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xyXG4gIHVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XHJcbiAgICB1cmw6ICcnLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBhdXRvVXBsb2FkOiBmYWxzZSxcclxuICAgIGl0ZW1BbGlhczogJ3VwbG9hZGVkZmlsZSdcclxuICB9KTtcclxuICAvLyDmjqfliLZEZXN0cm956KGo5Y2V5Lit55qE6L6T5YWl57uE5Lu2XHJcbiAgQE91dHB1dCgpXHJcbiAgbmVlZERlc3Ryb3kgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIHNob3dmaWxldHlwZSA9IHRydWU7XHJcbiAgZW5hYmxlUnVudGltZUN1c3RvbSA9IGZhbHNlO1xyXG4gIHZhbHVlRmllbGQ6IGFueSA9IG51bGw7XHJcblxyXG4gIC8v5Zu96ZmF5YyW55u45YWz5Y+Y6YePXHJcbiAgaW1wb3J0X2ZpbGU6IHN0cmluZztcclxuICBjaG9vc2VfZmlsZTogc3RyaW5nO1xyXG4gIGltcG9ydF9wbGFjZWhvbGRlcjogc3RyaW5nO1xyXG4gIGZpbGVfdHlwZTogc3RyaW5nO1xyXG4gIGRvd25sb2FkX3RlbXBsYXRlOiBzdHJpbmc7XHJcbiAgaWVfY2FuY2VsOiBzdHJpbmc7XHJcbiAgaWVfb2s6IHN0cmluZztcclxuICBjaG9vc2VfdHJ1ZWZpbGU6IHN0cmluZztcclxuICBkb3dubG9hZF90ZW1wbGF0ZV9vazogc3RyaW5nO1xyXG4gIGRvd25sb2FkX3RlbXBsYXRlX2ZhaWw6IHN0cmluZztcclxuICB1cGxvYWRfZmFpbDogc3RyaW5nO1xyXG4gIGltcG9ydF9zdWNjZXNzOiBzdHJpbmc7XHJcbiAgaW1wb3J0X2Zvcm1fc3VjY2Vzczogc3RyaW5nO1xyXG4gIGltcG9ydF9mYWlsOiBzdHJpbmc7XHJcbiAgcnVsZV9saXN0OiBzdHJpbmc7XHJcbiAgc2VsZWN0X3hsc3hfbm90aWZ5OiBzdHJpbmc7XHJcbiAgaTE4blJlc291cmNlOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBkYXRhSW1wb3J0U2VydmljZTogRGF0YUltcG9ydFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG5vdGlmeTogTm90aWZ5U2VydmljZSxcclxuICAgIHByaXZhdGUgbG9hZGluZ1NlcnZpY2U6IExvYWRpbmdTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1zZ1NlcnZpY2U6IE1lc3NhZ2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxyXG4gICkge1xyXG4gICAgdGhpcy51cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gdGhpcy5JbXBvcnQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMudXBsb2FkZXIub25FcnJvckl0ZW0gPSB0aGlzLkVycm9yTG9nLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdGaWxlID0gdGhpcy5hZnRlckFkZEZpbGU7XHJcbiAgICBEYXRhSUVVdGlscy5nZXRUcmFuc2xhdGVWYWx1ZShodHRwKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgdGhpcy5pbXBvcnRfZmlsZSA9IHJlc1snaW1wb3J0X2ZpbGUnXTtcclxuICAgICAgdGhpcy5jaG9vc2VfZmlsZSA9IHJlc1snY2hvb3NlX2ZpbGUnXTtcclxuICAgICAgdGhpcy5maWxlX3R5cGUgPSByZXNbJ2ZpbGVfdHlwZSddO1xyXG4gICAgICB0aGlzLmltcG9ydF9wbGFjZWhvbGRlciA9IHJlc1snaW1wb3J0X3BsYWNlaG9sZGVyJ107XHJcbiAgICAgIHRoaXMuZG93bmxvYWRfdGVtcGxhdGUgPSByZXNbJ2Rvd25sb2FkX3RlbXBsYXRlJ107XHJcbiAgICAgIHRoaXMuaWVfY2FuY2VsID0gcmVzWydpZV9jYW5jZWwnXTtcclxuICAgICAgdGhpcy5pZV9vayA9IHJlc1snaWVfb2snXTtcclxuICAgICAgdGhpcy5jaG9vc2VfdHJ1ZWZpbGUgPSByZXNbJ2Nob29zZV90cnVlZmlsZSddO1xyXG4gICAgICB0aGlzLmRvd25sb2FkX3RlbXBsYXRlX29rID0gcmVzWydkb3dubG9hZF90ZW1wbGF0ZV9vayddO1xyXG4gICAgICB0aGlzLmRvd25sb2FkX3RlbXBsYXRlX2ZhaWwgPSByZXNbJ2Rvd25sb2FkX3RlbXBsYXRlX2ZhaWwnXTtcclxuICAgICAgdGhpcy51cGxvYWRfZmFpbCA9IHJlc1sndXBsb2FkX2ZhaWwnXTtcclxuICAgICAgdGhpcy5pbXBvcnRfc3VjY2VzcyA9IHJlc1snaW1wb3J0X3N1Y2Nlc3MnXTtcclxuICAgICAgdGhpcy5pbXBvcnRfZm9ybV9zdWNjZXNzID0gcmVzWydpbXBvcnRfZm9ybV9zdWNjZXNzJ107XHJcbiAgICAgIHRoaXMuaW1wb3J0X2ZhaWwgPSByZXNbJ2ltcG9ydF9mYWlsJ107XHJcbiAgICAgIHRoaXMucnVsZV9saXN0ID0gcmVzWydydWxlX2xpc3QnXTtcclxuICAgICAgdGhpcy5zZWxlY3RfeGxzeF9ub3RpZnkgPSByZXNbJ3NlbGVjdF94bHN4X25vdGlmeSddO1xyXG4gICAgICB0aGlzLmkxOG5SZXNvdXJjZSA9IHJlcztcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGxvb2t1cEljb24gPSAnPGkgY2xhc3M9XCJmLWljb24gZi1pY29uLXdpbmRvd3NcIj48L2k+JztcclxuXHJcbiAgcHVibGljIGZpbGVMaXN0SXRlbXMgPSBbXHJcbiAgICB7aWQ6IEZpbGVDb25zdC54bHMsIGxhYmVsOiBGaWxlQ29uc3QueGxzfSxcclxuICAgIHtpZDogRmlsZUNvbnN0Lnhsc3gsIGxhYmVsOiBGaWxlQ29uc3QueGxzeH0sXHJcbiAgICB7aWQ6IEZpbGVDb25zdC54bHNtLCBsYWJlbDogRmlsZUNvbnN0Lnhsc219LFxyXG4gICAge2lkOiBGaWxlQ29uc3QuZXQsIGxhYmVsOiBGaWxlQ29uc3QuZXR9LFxyXG4gICAgLy8geyBpZDogRmlsZUNvbnN0LmNzdiwgbGFiZWw6IEZpbGVDb25zdC5jc3YgfSxcclxuICAgIC8vIHsgaWQ6IEZpbGVDb25zdC5wZGYsIGxhYmVsOiBGaWxlQ29uc3QucGRmIH0sXHJcbiAgICAvLyB7IGlkOiBGaWxlQ29uc3QueG1sLCBsYWJsZTogRmlsZUNvbnN0LnhtbCB9XHJcbiAgXTtcclxuICBzZWN1cml0eUxldmVsSXRlbXMgPSBbXTtcclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5pbXBvcnRPcHRpb24uc2VsZWN0ZmlsZXR5cGUgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5zZWxlY3RmaWxldHlwZSA9IHRoaXMuaW1wb3J0T3B0aW9uLnNlbGVjdGZpbGV0eXBlO1xyXG4gICAgICBpZiAodGhpcy5pbXBvcnRPcHRpb24uc3VmZml4ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pbXBvcnRPcHRpb24uc3VmZml4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZUZpZWxkID0gRmlsZVR5cGVVdGlsLmdldEZpbGVUeXBlTmFtZSh0aGlzLmltcG9ydE9wdGlvbi5zdWZmaXgudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBleHRlbmRJbmZvID0gdGhpcy5yZWNvcmRSdWxlLmV4dGVuZEluZm87XHJcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGV4dGVuZEluZm8pKSB7XHJcbiAgICAgIHRoaXMuZXh0ZW5kSW5mbyA9IEpTT04ucGFyc2UoZXh0ZW5kSW5mbyk7XHJcbiAgICAgIHRoaXMuSW1wb3J0U2VjcmV0UmVtaW5kSW5mbyA9IHRoaXMuZXh0ZW5kSW5mb1snSW1wb3J0U2VjcmV0UmVtaW5kSW5mbyddO1xyXG4gICAgICB0aGlzLmNsb3NlWExTWCA9IHRoaXMuZXh0ZW5kSW5mb1snY2xvc2VYTFNYJ107XHJcbiAgICAgIGlmICh0aGlzLmNsb3NlWExTWCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuZmlsZUxpc3RJdGVtcyA9IFtcclxuICAgICAgICAgIHtpZDogRmlsZUNvbnN0LnhscywgbGFiZWw6IEZpbGVDb25zdC54bHN9LFxyXG4gICAgICAgICAge2lkOiBGaWxlQ29uc3QueGxzbSwgbGFiZWw6IEZpbGVDb25zdC54bHNtfSxcclxuICAgICAgICAgIHtpZDogRmlsZUNvbnN0LmV0LCBsYWJlbDogRmlsZUNvbnN0LmV0fVxyXG4gICAgICAgIF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHNlY3VyaXR5TGV2ZWxzID0gdGhpcy5yZWNvcmRSdWxlLnNlY3VyaXR5TGV2ZWxzO1xyXG4gICAgaWYgKCFpc051bGxPckVtcHR5KHNlY3VyaXR5TGV2ZWxzKSkge1xyXG4gICAgICB0aGlzLmVuYWJsZVNlY3VyaXR5TGV2ZWxTZWxlY3QgPSB0cnVlO1xyXG4gICAgICBzZWN1cml0eUxldmVscy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxldmVsID0ge1xyXG4gICAgICAgICAgdmFsdWU6IGUubmFtZSxcclxuICAgICAgICAgIGxhYmVsOiBlLm5hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2VjdXJpdHlMZXZlbEl0ZW1zLnB1c2gobGV2ZWwpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZWN1cml0eUxldmVsTmFtZSA9IHRoaXMuc2VjdXJpdHlMZXZlbEl0ZW1zWzBdLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdXJyZW50UnVsZUlkID0gdGhpcy5yZWNvcmRSdWxlLnJ1bGVJZDtcclxuICAgIHRoaXMuY3VycmVudFJ1bGVOYW1lID0gdGhpcy5yZWNvcmRSdWxlLnJ1bGVOYW1lO1xyXG4gICAgdGhpcy52YWx1ZUZpZWxkID0gRmlsZVR5cGVVdGlsLmdldEZpbGVUeXBlTmFtZSh0aGlzLnJlY29yZFJ1bGUuZmlsZVR5cGUpO1xyXG4gICAgaWYgKHRoaXMudmFsdWVGaWVsZCA9PT0gJycpIHtcclxuICAgICAgLy/mnKrlnKjlvZPliY3lj6/pgInmlofku7bnmoTnsbvlnovml7bvvIzkuI3mmL7npLrpgInmlofku7bnsbvlnovmjqfku7ZcclxuICAgICAgdGhpcy5zaG93ZmlsZXR5cGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSA9IHRoaXMudmFsdWVGaWVsZDtcclxuICAgIHRoaXMuY29udHJvbEZpbGVUeXBlKCk7XHJcbiAgICBpZiAodGhpcy5pbXBvcnRPcHRpb24uZW5hYmxlUnVudGltZUN1c3RvbSA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmVuYWJsZVJ1bnRpbWVDdXN0b20gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIG9wZW5TZWxlY3RSdWxlKCRldmVudCkge1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5zaG93KCk7XHJcbiAgICAvL+i/h+a7pOinhOWImeaXtueUqOihqOWNleWRveS7pOWkhOmFjee9rueahOinhOWImeadpei/h+a7pO+8jOWboOatpOeUqHJ1bGVJZO+8jOiAjOS4jeaYr2N1cnJlbnRSdWxlSWRcclxuICAgIGNvbnN0IHVybCA9ICcvYXBpL3J1bnRpbWUvZGlwL3YxLjAvZGF0YUllUnVsZU1hbmFnZS9maWx0ZXJSdWxlc0J5UnVsZUlkQW5kVm9JZCc7XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICBydWxlSWQ6IHRoaXMucnVsZUlkLFxyXG4gICAgICBydWxlVHlwZTogMCxcclxuICAgICAgdm9JZDogdGhpcy5pbXBvcnRPcHRpb24udm9JZCxcclxuICAgICAgbWV0aG9kVHlwZTogdGhpcy5tZXRob2RUeXBlLFxyXG4gICAgICBpbXBvcnRDaGlsZE5vZGVDb2RlOiB0aGlzLmltcG9ydE9wdGlvbi5pbXBvcnRDaGlsZE5vZGVDb2RlLFxyXG4gICAgICBjbG9zZVhsc3g6IHRoaXMuY2xvc2VYTFNYXHJcbiAgICB9O1xyXG4gICAgdGhpcy5odHRwLnBvc3QodXJsLCBib2R5KS5zdWJzY3JpYmUoKFJ1bGVNZ3JzOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICBpZiAoUnVsZU1ncnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLmkxOG5SZXNvdXJjZVsncnVsZXNlbGVjdF9saXN0ZW1wdHknXSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShSdWxlU2VsZWN0Q29tcG9uZW50KTtcclxuICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5ydWxlSWQgPSB0aGlzLnJ1bGVJZDtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS52b0lkID0gdGhpcy5pbXBvcnRPcHRpb24udm9JZDtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5ydWxlVHlwZSA9IDA7XHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2UuUnVsZU1ncnNEYXRhID0gUnVsZU1ncnM7XHJcbiAgICAgIGNvbnN0IG1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiB0aGlzLnJ1bGVfbGlzdCxcclxuICAgICAgICB3aWR0aDogOTUwLFxyXG4gICAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICAgIGJ1dHRvbnM6IGNvbXBSZWYuaW5zdGFuY2UubW9kYWxGb290ZXIsXHJcbiAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZSxcclxuICAgICAgICBzaG93TWF4QnV0dG9uOiBmYWxzZSxcclxuICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIG1vZGFsQ29uZmlnKTtcclxuICAgICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIGNvbXBSZWYuaW5zdGFuY2Uub2tNb2RhbC5zdWJzY3JpYmUoUnVsZU1nciA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UnVsZUlkID0gUnVsZU1nci5pZDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRSdWxlTmFtZSA9IFJ1bGVNZ3IubmFtZTtcclxuICAgICAgICB0aGlzLnZhbHVlRmllbGQgPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZVR5cGVOYW1lKFJ1bGVNZ3IuZmlsZVR5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFJ1bGVGaWxlVHlwZSA9IHRoaXMudmFsdWVGaWVsZDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xGaWxlVHlwZSgpO1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0sIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICB0aGlzLm5vdGlmeS5lcnJvcihlcnJvci5lcnJvci5NZXNzYWdlKTtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IuZXJyb3IuTWVzc2FnZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBnZXRGaWxlRXh0ZW5zaW9uKCk6IGFueSB7XHJcbiAgICBsZXQgc3VmZml4ID0gbnVsbDtcclxuICAgIHN3aXRjaCAodGhpcy52YWx1ZUZpZWxkKSB7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0LnhsczpcclxuICAgICAgICBzdWZmaXggPSAnLnhscyc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgRmlsZUNvbnN0Lnhsc3g6XHJcbiAgICAgICAgc3VmZml4ID0gJy54bHN4JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueGxzbTpcclxuICAgICAgICBzdWZmaXggPSAnLnhsc20nO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIEZpbGVDb25zdC5ldDpcclxuICAgICAgICBzdWZmaXggPSAnLmV0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QueG1sOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcueG1sJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QucGRmOlxyXG4gICAgICAgIHN1ZmZpeCA9ICcucGRmJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBGaWxlQ29uc3QuY3N2OlxyXG4gICAgICAgIHN1ZmZpeCA9ICcuY3N2JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBzdWZmaXg7XHJcbiAgfVxyXG5cclxuICBjYW5Eb3dubG9hZFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3Qgc3VmZml4ID0gdGhpcy5nZXRGaWxlRXh0ZW5zaW9uKCk7XHJcbiAgICBjb25zdCBjYW5MaXN0ID0gWycueGxzJywgJy54bHN4JywgJy54bHNtJywgJy5ldCddO1xyXG4gICAgaWYgKGNhbkxpc3QuZmluZEluZGV4KHQgPT4gdCA9PT0gc3VmZml4KSA8IDApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgfVxyXG5cclxuICAvLyDpgInmi6nmlofku7blkI7kuovku7ZcclxuICBzZWxlY3RlZEZpbGVPbkNoYW5nZShldmVudCkge1xyXG4gICAgY29uc3Qgc3RyOiBzdHJpbmcgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICBpZiAoc3RyID09PSAnJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZignXFxcXCcpO1xyXG4gICAgdGhpcy5maWxlTmFtZSA9IHN0ci5zdWJzdHJpbmcoaW5kZXggKyAxKTtcclxuICAgIGlmICh0aGlzLmZpbGVOYW1lLnNwbGl0KFwiLlwiKS5sZW5ndGggPT09IDIgJiYgdGhpcy5maWxlTmFtZS5zcGxpdChcIi5cIilbMV0gPT09IFwianBnXCIpIHtcclxuICAgICAgdGhpcy51cGxvYWRlci5xdWV1ZSA9IFtdO1xyXG4gICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuY2hvb3NlX3RydWVmaWxlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ+mYn+WIl+S4reeahOaWh+S7ticgKyB0aGlzLnVwbG9hZGVyLnF1ZXVlWzBdKTtcclxuICB9XHJcblxyXG4gIC8vIOWFs+mXreeql+WPo1xyXG4gIHB1YmxpYyBDbG9zZSgpIHtcclxuICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgLy8g6YCJ5oup5paH5Lu25LqL5Lu2XHJcbiAgcHVibGljIFNlbGVjdEZpbGUoKTogYW55IHtcclxuICAgIHRoaXMuZmlsZVVwbG9hZC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XHJcbiAgfVxyXG5cclxuICBmaWxlVHlwZVZhbHVlQ2hhbmdlKCkge1xyXG4gICAgaWYgKHRoaXMuY29udHJvbEZpbGVUeXBlKCkgPT09ICcueGxzeCcpIHtcclxuICAgICAgdGhpcy5ub3RpZnkuaW5mbyh0aGlzLnNlbGVjdF94bHN4X25vdGlmeSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb250cm9sRmlsZVR5cGUoKSB7XHJcbiAgICBjb25zdCBzdWZmaXggPSBGaWxlVHlwZVV0aWwuZ2V0RmlsZUV4dGVuc2lvbih0aGlzLnZhbHVlRmllbGQpO1xyXG4gICAgaWYgKHN1ZmZpeCAhPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmFjY2VwdEZpbGVUeXBlID0gc3VmZml4O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hY2NlcHRGaWxlVHlwZSA9ICcqJztcclxuICAgIH1cclxuICAgIHJldHVybiBzdWZmaXg7XHJcbiAgfVxyXG5cclxuICAvLyDkuIvovb3mqKHmnb9cclxuICBwdWJsaWMgRG93bmxvYWRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdygpO1xyXG4gICAgbGV0IHN1ZmZpeCA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5jYW5Eb3dubG9hZFRlbXBsYXRlKCkgJiYgdGhpcy52YWx1ZUZpZWxkICE9PSB0aGlzLmN1cnJlbnRSdWxlRmlsZVR5cGUpIHtcclxuICAgICAgc3VmZml4ID0gRmlsZVR5cGVVdGlsLmdldEZpbGVFeHRlbnNpb24odGhpcy52YWx1ZUZpZWxkKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW1wb3J0T3B0aW9uWydzZWN1cml0eUxldmVsTmFtZSddID0gdGhpcy5zZWN1cml0eUxldmVsTmFtZTtcclxuICAgIHRoaXMuZGF0YUltcG9ydFNlcnZpY2UuRG93bWxvYWRUZW1wbGF0ZTRIYW5kQ3JhZnQodGhpcy5jdXJyZW50UnVsZUlkLCB0aGlzLmltcG9ydE9wdGlvbiwgc3VmZml4KTtcclxuXHJcbiAgICAvLyB0aGlzLmRhdGFJbXBvcnRTZXJ2aWNlLmNvbXBsZXRlLnVuc3Vic2NyaWJlKCk7XHJcbiAgICBjb25zdCB1bnN1YnNjcmliZXIgPSB0aGlzLmRhdGFJbXBvcnRTZXJ2aWNlLmNvbXBsZXRlLnN1YnNjcmliZShkYXRhID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICBpZiAoZGF0YSA9PT0gJycpIHtcclxuICAgICAgICB0aGlzLm5vdGlmeS5zdWNjZXNzKHRoaXMuZG93bmxvYWRfdGVtcGxhdGVfb2spO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubm90aWZ5LmVycm9yKHRoaXMuZG93bmxvYWRfdGVtcGxhdGVfZmFpbCArIGRhdGEpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NlcnZpY2UuY2xlYXJBbGwoKTtcclxuICAgICAgdGhpcy5ub3RpZnkuZXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIOa3u+WKoOaWh+S7tuWQjuS6i+S7tlxyXG4gIGFmdGVyQWRkRmlsZShmaWxlSXRlbTogRmlsZUl0ZW0pOiBhbnkge1xyXG4gIH1cclxuXHJcbiAgLy8g5byA5aeL5a+85YWlXHJcbiAgcHVibGljIE9rKCkge1xyXG4gICAgY29uc29sZS5sb2coJ+W8gOWni+S4iuS8oO+8gScpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy51cGxvYWRlci5xdWV1ZSk7XHJcbiAgICBjb25zdCBsb2FkaW5nQ29uZmlnID0ge1xyXG4gICAgICBtZXNzYWdlOiB0aGlzLmkxOG5SZXNvdXJjZVsnaW1wb3J0X2xvYWRpbmcnXVxyXG4gICAgfTtcclxuICAgIHRoaXMubG9hZGluZ1NlcnZpY2Uuc2hvdyhsb2FkaW5nQ29uZmlnKTtcclxuICAgIGNvbnN0IGxlbiA9IHRoaXMudXBsb2FkZXIucXVldWUubGVuZ3RoO1xyXG4gICAgaWYgKGxlbiA9PT0gMCkge1xyXG4gICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuY2hvb3NlX3RydWVmaWxlKTtcclxuICAgICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBsYXN0RmlsZUl0ZW0gPSB0aGlzLnVwbG9hZGVyLnF1ZXVlW2xlbiAtIDFdO1xyXG4gICAgY29uc3QgbWF4RmlsZVNpemUgPSB0aGlzLnJlY29yZFJ1bGUuaW1wb3J0RmlsZU1heFNpemUgKiAxMDI0ICogMTAyNDtcclxuICAgIGlmIChsYXN0RmlsZUl0ZW0uZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcclxuICAgICAgdGhpcy5ub3RpZnkud2FybmluZyh0aGlzLmkxOG5SZXNvdXJjZVsnaW1wb3J0ZmlsZV90b29iaWcnXSArIHRoaXMucmVjb3JkUnVsZS5pbXBvcnRGaWxlTWF4U2l6ZSArICdNQicpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdTZXJ2aWNlLmNsZWFyQWxsKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHN1ID0gdGhpcy5pbXBvcnRPcHRpb24uc3U7XHJcbiAgICBjb25zdCBmaXhlZFVybCA9IHRoaXMub3JpZ2luICsgJy9hcGkvcnVudGltZS9kaXAvdjEuMC9BbGxTdGVwcy9kYXRhaW1wb3J0dm1hY3Rpb24/c3U9JyArIHN1O1xyXG4gICAgbGV0IGhlYWRlcnMgPSBbe25hbWU6ICdzdScsIHZhbHVlOiBzdX1dO1xyXG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmV4dGVuZEluZm8pKSB7XHJcbiAgICAgIGNvbnN0IGVuYWJsZVNlY3VyaXR5TGV2ZWwgPSB0aGlzLmV4dGVuZEluZm9bJ2VuYWJsZVNlY3VyaXR5TGV2ZWwnXSBhcyBib29sZWFuO1xyXG4gICAgICBpZiAoZW5hYmxlU2VjdXJpdHlMZXZlbCkge1xyXG4gICAgICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ2VuYWJsZVNlY3VyaXR5TGV2ZWwnLCB2YWx1ZTogZW5hYmxlU2VjdXJpdHlMZXZlbH0pO1xyXG4gICAgICAgIGNvbnN0IHNlY3VyaXR5TGV2ZWxQcmVmaXggPSB0aGlzLmV4dGVuZEluZm9bJ3NlY3VyaXR5TGV2ZWxQcmVmaXgnXTtcclxuICAgICAgICBjb25zdCBzZWN1cml0eUxldmVsU3VmZml4ID0gdGhpcy5leHRlbmRJbmZvWydzZWN1cml0eUxldmVsU3VmZml4J107XHJcbiAgICAgICAgaGVhZGVycy5wdXNoKHtuYW1lOiAnc2VjdXJpdHlMZXZlbFByZWZpeCcsIHZhbHVlOiBlbmNvZGVVUklDb21wb25lbnQoc2VjdXJpdHlMZXZlbFByZWZpeCl9KTtcclxuICAgICAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdzZWN1cml0eUxldmVsU3VmZml4JywgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudChzZWN1cml0eUxldmVsU3VmZml4KX0pO1xyXG4gICAgICAgIGhlYWRlcnMucHVzaCh7bmFtZTogJ3NlY3VyaXR5TGV2ZWxOYW1lJywgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnNlY3VyaXR5TGV2ZWxOYW1lKX0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgc3VmZml4ID0gJyc7XHJcbiAgICBpZiAodGhpcy5jYW5Eb3dubG9hZFRlbXBsYXRlKCkgJiYgdGhpcy52YWx1ZUZpZWxkICE9PSB0aGlzLmN1cnJlbnRSdWxlRmlsZVR5cGUpIHtcclxuICAgICAgc3VmZml4ID0gRmlsZVR5cGVVdGlsLmdldEZpbGVFeHRlbnNpb24odGhpcy52YWx1ZUZpZWxkKTtcclxuICAgIH1cclxuICAgIGxldCBnbG9iYWxWYXIgPSAnJztcclxuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5pbXBvcnRPcHRpb25bJ0dsb2JhbFBhcmFtJ10pKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgKHRoaXMuaW1wb3J0T3B0aW9uWydHbG9iYWxQYXJhbSddKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBnbG9iYWxWYXIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmltcG9ydE9wdGlvblsnR2xvYmFsUGFyYW0nXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ2xvYmFsVmFyID0gdGhpcy5pbXBvcnRPcHRpb25bJ0dsb2JhbFBhcmFtJ107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBmdW5jSWQgPSAnJztcclxuICAgIGlmKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmltcG9ydE9wdGlvbi5mdW5jSWQpKXtcclxuICAgICAgZnVuY0lkID0gdGhpcy5pbXBvcnRPcHRpb24uZnVuY0lkO1xyXG4gICAgfVxyXG4gICAgaGVhZGVycy5wdXNoKHtuYW1lOiAncnVsZUlkJywgdmFsdWU6IHRoaXMuY3VycmVudFJ1bGVJZH0pO1xyXG4gICAgaGVhZGVycy5wdXNoKHtuYW1lOiAnZ2xvYmFsUGFyYW0nLCB2YWx1ZTogZ2xvYmFsVmFyfSk7XHJcbiAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdzdWZmaXgnLCB2YWx1ZTogc3VmZml4fSk7XHJcbiAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdmdW5jSWQnLCB2YWx1ZTogZnVuY0lkfSk7XHJcbiAgICBoZWFkZXJzLnB1c2goe25hbWU6ICdzZWN1cml0eUxldmVsTmFtZScsIHZhbHVlOiB0aGlzLnNlY3VyaXR5TGV2ZWxOYW1lfSk7XHJcblxyXG4gICAgdGhpcy51cGxvYWRlci5zZXRPcHRpb25zKHtcclxuICAgICAgdXJsOiBmaXhlZFVybCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGF1dG9VcGxvYWQ6IGZhbHNlLFxyXG4gICAgICBpdGVtQWxpYXM6ICd1cGxvYWRlZGZpbGUnLFxyXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzXHJcbiAgICB9KTtcclxuICAgIHRoaXMudXBsb2FkZXIudXBsb2FkSXRlbShsYXN0RmlsZUl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgLy8g5Y+W5raI5LqL5Lu2XHJcbiAgcHVibGljIENhbmNlbCgpIHtcclxuICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgLy8g5LiK5Lyg5aSx6LSl5ZCO5pa55rOVXHJcbiAgRXJyb3JMb2coaXRlbTogRmlsZUl0ZW0sIHJlc3BvbnNlOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBoZWFkZXJzOiBQYXJzZWRSZXNwb25zZUhlYWRlcnMpOiBhbnkge1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgdHJ5e1xyXG4gICAgICBjb25zdCB0ZW1SZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgdGhpcy5tc2dTZXJ2aWNlLmVycm9yKHRoaXMudXBsb2FkX2ZhaWwgKyB0ZW1SZXMubWVzc2FnZSk7XHJcbiAgICB9IGNhdGNoe1xyXG4gICAgICB0aGlzLm1zZ1NlcnZpY2UuZXJyb3IodGhpcy51cGxvYWRfZmFpbCArIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgIGNvbnN0IGxlbiA9IHRoaXMudXBsb2FkZXIucXVldWUubGVuZ3RoO1xyXG4gICAgaWYgKGxlbiA+IDApIHtcclxuICAgICAgdGhpcy51cGxvYWRlci5xdWV1ZS5zcGxpY2UoMCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBJbXBvcnQoaXRlbTogRmlsZUl0ZW0sIHJlc3BvbnNlOiBzdHJpbmcsIHN0YXR1czogbnVtYmVyLCBoZWFkZXJzOiBQYXJzZWRSZXNwb25zZUhlYWRlcnMpOiBhbnkge1xyXG4gICAgc3dpdGNoICh0aGlzLm1ldGhvZFR5cGUpIHtcclxuICAgICAgY2FzZSBNZXRob2RUeXBlLkNvbW1vbkltcG9ydDpcclxuICAgICAgICB0aGlzLkRhdGFJbXBvcnRCeUlkKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIE1ldGhvZFR5cGUuSW1wb3J0U3ViVGFibGVEZXRhaWw6XHJcbiAgICAgICAgLy8gdGhpcy5JbXBvcnRTdWJUYWJsZShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdWZmaXgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g5pi+56S65qCh6aqM57uT5p6cXHJcbiAgcHJpdmF0ZSBTaG93VmFsaWRhdGVkUmVzdWx0KGNvbW1vblBhcmFtczogQ29tbW9uUGFyYW1zKSB7XHJcbiAgICBjb25zdCBpbXBvcnRSZXN1bHQgPSBjb21tb25QYXJhbXMuaW1wb3J0UmVzdWx0O1xyXG4gICAgY29uc3QgbG9hZGluZ1BhcmFtID0gY29tbW9uUGFyYW1zLmxvYWRpbmdQYXJhbTtcclxuICAgIGlmIChpbXBvcnRSZXN1bHQudmFsaWRhdGVkUmVzdWx0cyAmJiBpbXBvcnRSZXN1bHQudmFsaWRhdGVkUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxvYWRpbmdQYXJhbS5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoVmFsaWRhdGVGb3JtQ29tcG9uZW50KTtcclxuICAgICAgY29uc3QgY21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2UudmFsaWRhdGVSZXN1bHQgPSBpbXBvcnRSZXN1bHQudmFsaWRhdGVkUmVzdWx0cztcclxuICAgICAgY21wUmVmLmluc3RhbmNlLnN1ID0gY29tbW9uUGFyYW1zLnN1O1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2UuaTE4blJlc291cmNlID0gY29tbW9uUGFyYW1zLmkxOG5SZXNvdXJjZTtcclxuICAgICAgY21wUmVmLmluc3RhbmNlLmxvYWRpbmdQYXJhbSA9IGxvYWRpbmdQYXJhbTtcclxuICAgICAgY29uc3QgdmFsaWRhdGVNb2RhbENvbmZpZyA9IHtcclxuICAgICAgICB0aXRsZTogdGhpcy5pMThuUmVzb3VyY2VbJ3ZhbGlkYXRlX3Jlc3VsdF9zaG93J10sXHJcbiAgICAgICAgd2lkdGg6IDk1MCxcclxuICAgICAgICBoZWlnaHQ6IDU1MCxcclxuICAgICAgICBidXR0b25zOiBjbXBSZWYuaW5zdGFuY2UubW9kYWxGb290ZXIsXHJcbiAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZSxcclxuICAgICAgICBzaG93TWF4QnV0dG9uOiBmYWxzZSxcclxuICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZGlhbG9nID0gdGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyhjbXBSZWYsIHZhbGlkYXRlTW9kYWxDb25maWcpO1xyXG4gICAgICAvLzDku6PooajmjInpkq7kuK3mraLmiJZY54K55Ye777ybMeS7o+ihqOaMiemSrue7p+e7rVxyXG4gICAgICBsZXQgY2xvc2VkID0gMDtcclxuICAgICAgZGlhbG9nLmRpYWxvZy5pbnN0YW5jZS5jbG9zZWQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICBpZiAoY2xvc2VkID09PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeS5pbmZvKHRoaXMuaTE4blJlc291cmNlWydhZnRlcl92YWxpZGF0ZV9zdXNwZW5kJ10pO1xyXG4gICAgICAgICAgdGhpcy5uZWVkRGVzdHJveS5lbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgY21wUmVmLmluc3RhbmNlLmNsb3NlTW9kYWwuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICBjbG9zZWQgPSAwO1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgY21wUmVmLmluc3RhbmNlLm9rTW9kYWwuc3Vic2NyaWJlKCh2YWxpZGF0ZWRJbmZvTGlzdCkgPT4ge1xyXG4gICAgICAgIGNsb3NlZCA9IDE7XHJcbiAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgbG9hZGluZ1BhcmFtLmxvYWRpbmdTZXJ2aWNlLnNob3cobG9hZGluZ1BhcmFtLmxvYWRpbmdDb25maWcpO1xyXG4gICAgICAgIGNvbW1vblBhcmFtcy5pbXBvcnRQYXJhbVsndmFsaWRhdGVkSW5mb0xpc3QnXSA9IHZhbGlkYXRlZEluZm9MaXN0O1xyXG4gICAgICAgIC8vdG9kb1xyXG4gICAgICAgIC8vIHRoaXMuSW1wb3J0NEhhbmRDcmFmdChjb21tb25QYXJhbXMpO1xyXG5cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDkuIrkvKDmiJDlip/lkI7mlrnms5VcclxuICBEYXRhSW1wb3J0QnlJZChpdGVtOiBGaWxlSXRlbSwgcmVzcG9uc2U6IHN0cmluZywgc3RhdHVzOiBudW1iZXIsIGhlYWRlcnM6IFBhcnNlZFJlc3BvbnNlSGVhZGVycyk6IGFueSB7XHJcbiAgICBjb25zb2xlLmxvZyhzdGF0dXMpO1xyXG4gICAgdGhpcy5sb2FkaW5nU2VydmljZS5jbGVhckFsbCgpO1xyXG4gICAgbGV0IGltcG9ydFJlc3VsdCA9IEpTT04ucGFyc2UocmVzcG9uc2UpIGFzIERhdGFJRVJlc3VsdDtcclxuICAgIGNvbnN0IGxvYWRpbmdDb25maWcgPSB7XHJcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4blJlc291cmNlWydpbXBvcnRfbG9hZGluZyddXHJcbiAgICB9O1xyXG4gICAgY29uc3QgbG9hZGluZ1BhcmFtID0ge1xyXG4gICAgICBsb2FkaW5nU2VydmljZTogdGhpcy5sb2FkaW5nU2VydmljZSxcclxuICAgICAgbG9hZGluZ0NvbmZpZzogbG9hZGluZ0NvbmZpZ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGNvbW1vblBhcmFtcyA9IG5ldyBDb21tb25QYXJhbXMoKTtcclxuICAgIGNvbW1vblBhcmFtcy5sb2FkaW5nUGFyYW0gPSBsb2FkaW5nUGFyYW07XHJcbiAgICBjb21tb25QYXJhbXMuaTE4blJlc291cmNlID0gdGhpcy5pMThuUmVzb3VyY2U7XHJcbiAgICBjb21tb25QYXJhbXMuc3UgPSB0aGlzLmltcG9ydE9wdGlvbi5zdTtcclxuICAgIGNvbW1vblBhcmFtcy5pbXBvcnRSZXN1bHQgPSBpbXBvcnRSZXN1bHQ7XHJcbiAgICBpZiAoaW1wb3J0UmVzdWx0LnN1Y2NlZWQgPT09IHRydWUpIHtcclxuICAgICAgaWYgKGltcG9ydFJlc3VsdC5mb3JtRGF0YSAmJiBpbXBvcnRSZXN1bHQuZm9ybURhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGlmKHR5cGVvZiAoaW1wb3J0UmVzdWx0LmZvcm1EYXRhWzBdKSAhPT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgY29uc3QgZm9ybURhdGFPYmpBcnJheSA9IFtdO1xyXG4gICAgICAgICAgaW1wb3J0UmVzdWx0LmZvcm1EYXRhLmZvckVhY2goZT0+e1xyXG4gICAgICAgICAgICBmb3JtRGF0YU9iakFycmF5LnB1c2goSlNPTi5wYXJzZShlKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGltcG9ydFJlc3VsdC5mb3JtRGF0YSA9IGZvcm1EYXRhT2JqQXJyYXk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdChpbXBvcnRSZXN1bHQpO1xyXG4gICAgICAvL+WvvOWFpeaIkOWKn+WmguaenOWxleekuuagoemqjOe7k+aenO+8jOWPquiDveaYr+agoemqjOetlueVpeaYr+W/veeVpe+8jOaJgOacieagoemqjOe7k+aenOmDveaYr2Vycm9yXHJcbiAgICAgIHRoaXMuU2hvd1ZhbGlkYXRlZFJlc3VsdChjb21tb25QYXJhbXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGltcG9ydFJlc3VsdC52YWxpZGF0ZWRSZXN1bHRzICYmIGltcG9ydFJlc3VsdC52YWxpZGF0ZWRSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLlNob3dWYWxpZGF0ZWRSZXN1bHQoY29tbW9uUGFyYW1zKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBlcnJvcmxldmVsID0gaW1wb3J0UmVzdWx0LmVycm9yTGV2ZWw7XHJcbiAgICAgICAgaWYgKGVycm9ybGV2ZWwgPT09ICdJbmZvJykge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkuaW5mbyhpbXBvcnRSZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcmxldmVsID09PSAnV2FybmluZycpIHtcclxuICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKGltcG9ydFJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5tc2dTZXJ2aWNlLmVycm9yKHRoaXMuaW1wb3J0X2ZhaWwgKyBpbXBvcnRSZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmVlZERlc3Ryb3kuZW1pdChpbXBvcnRSZXN1bHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19