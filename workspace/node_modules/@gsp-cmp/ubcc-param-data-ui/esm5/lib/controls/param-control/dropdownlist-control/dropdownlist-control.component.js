/**
 * @fileoverview added by tsickle
 * Generated from: lib/controls/param-control/dropdownlist-control/dropdownlist-control.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { DataTypeConst } from '@ecp-caf/common-structure';
import { UbccParamTemplate, DataTypeExtensionConst } from '@gsp-cmp/ubcc-param-vo';
var DropdownlistControlComponent = /** @class */ (function () {
    function DropdownlistControlComponent() {
        this.canEdit = true;
        this.enumerationItems = [];
        this.isMultiSelect = false;
        this.isEnumInfoLoad = false;
    }
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.param = this.param || {};
        this.template = this.template || new UbccParamTemplate();
        if (!this.isEnumInfoLoad) {
            this.enumConfigInit();
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    DropdownlistControlComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (!this.isEnumInfoLoad) {
            this.enumConfigInit();
        }
    };
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.enumConfigInit = /**
     * @return {?}
     */
    function () {
        this.isMultiSelect = this.isCollection();
        this.getEnumItems();
    };
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.getEnumItems = /**
     * @return {?}
     */
    function () {
        if (!this.param || !this.param.parameterType || !this.template.structuredTypes) {
            return;
        }
        if (this.param.parameterType.kind === DataTypeConst.DEFAULT_COLLECTION) {
            /** @type {?} */
            var elementType = this.getCollectionElementType(this.param.parameterType);
            this.get(elementType);
        }
        else if (this.param.parameterType.kind === DataTypeExtensionConst.UBCC_STRUCTURE_TYPE_REF) {
            /** @type {?} */
            var typeRef = (/** @type {?} */ (this.param.parameterType));
            this.get(typeRef);
        }
        else {
            throw new Error("\u679A\u4E3E\u4E0D\u652F\u6301\u7684\u53C2\u6570\u7C7B\u578B" + this.param.parameterType.kind);
        }
    };
    /**
     * @param {?} refType
     * @return {?}
     */
    DropdownlistControlComponent.prototype.get = /**
     * @param {?} refType
     * @return {?}
     */
    function (refType) {
        var _this = this;
        /** @type {?} */
        var enumType = (/** @type {?} */ (this.template.structuredTypes.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id === refType.refId; }))));
        if (!enumType || !enumType.enumerationItems) {
            return;
        }
        enumType.enumerationItems.map((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return _this.enumerationItems.push(x); }));
        this.isEnumInfoLoad = true;
    };
    /**
     * @param {?} dataType
     * @return {?}
     */
    DropdownlistControlComponent.prototype.getCollectionElementType = /**
     * @param {?} dataType
     * @return {?}
     */
    function (dataType) {
        /** @type {?} */
        var kind = dataType.getKind();
        switch (kind) {
            case DataTypeConst.DEFAULT_COLLECTION:
                /** @type {?} */
                var elementType = ((/** @type {?} */ (dataType))).elementType;
                return this.getCollectionElementType(elementType);
            default:
                return dataType;
        }
    };
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.isCollection = /**
     * @return {?}
     */
    function () {
        if (!this.param || !this.param.parameterType) {
            return false;
        }
        if (this.param.parameterType.getKind() === DataTypeConst.DEFAULT_COLLECTION) {
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    DropdownlistControlComponent.prototype.valueChangeHandler = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.param.value = $event.value;
    };
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.isReadonly = /**
     * @return {?}
     */
    function () {
        if (!this.canEdit) {
            return true;
        }
        else {
            return !this.param || !this.param.readonly ? false : true;
        }
    };
    /**
     * @return {?}
     */
    DropdownlistControlComponent.prototype.show = /**
     * @return {?}
     */
    function () {
        return !this.param || !this.param.description ? false : true;
    };
    DropdownlistControlComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-dropdownlist-control',
                    template: "<div class=\"farris-form-controls-inline farris-group-wrap col-12\">\n  <div class=\"form-group farris-form-group\">\n    <label class=\"col-form-label col-4\">\n      <span class=\"farris-label-text\" style=\"float:right\">{{param.name}}</span>\n    </label>\n    <div class=\"farris-input-wrap col-6\">\n      <farris-combo-list [idField]=\"'code'\" [textField]=\"'description'\" [data]=\"enumerationItems\" [multiSelect]=\"isMultiSelect\"\n        (valueChange)=\"valueChangeHandler($event)\" [readonly]=\"isReadonly()\" [(ngModel)]=\"param.value\" name=\"{{param.code}}\">\n      </farris-combo-list>\n    </div>\n    <span *ngIf=\"show()\" farrisTooltip [placement]=\"'right-top'\" [content]=\"param.description\" class=\"f-icon f-icon-info\"></span>\n  </div>\n</div>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    DropdownlistControlComponent.ctorParameters = function () { return []; };
    DropdownlistControlComponent.propDecorators = {
        param: [{ type: Input }],
        template: [{ type: Input }],
        canEdit: [{ type: Input }]
    };
    return DropdownlistControlComponent;
}());
export { DropdownlistControlComponent };
if (false) {
    /** @type {?} */
    DropdownlistControlComponent.prototype.param;
    /** @type {?} */
    DropdownlistControlComponent.prototype.template;
    /** @type {?} */
    DropdownlistControlComponent.prototype.canEdit;
    /** @type {?} */
    DropdownlistControlComponent.prototype.enumerationItems;
    /** @type {?} */
    DropdownlistControlComponent.prototype.isMultiSelect;
    /** @type {?} */
    DropdownlistControlComponent.prototype.isEnumInfoLoad;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd25saXN0LWNvbnRyb2wuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvdWJjYy1wYXJhbS1kYXRhLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbnRyb2xzL3BhcmFtLWNvbnRyb2wvZHJvcGRvd25saXN0LWNvbnRyb2wvZHJvcGRvd25saXN0LWNvbnRyb2wuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQTRCLE1BQU0sZUFBZSxDQUFDO0FBQ25GLE9BQU8sRUFBRSxhQUFhLEVBQThDLE1BQU0sMkJBQTJCLENBQUM7QUFDdEcsT0FBTyxFQUFFLGlCQUFpQixFQUFvQixzQkFBc0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRXJHO0lBbUJJO1FBUlMsWUFBTyxHQUFTLElBQUksQ0FBQztRQUU5QixxQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFFdEIsa0JBQWEsR0FBRyxLQUFLLENBQUM7UUFFdEIsbUJBQWMsR0FBWSxLQUFLLENBQUM7SUFFaEIsQ0FBQzs7OztJQUVqQiwrQ0FBUTs7O0lBQVI7UUFDSSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLGlCQUFpQixFQUFFLENBQUM7UUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3pCO0lBQ0wsQ0FBQzs7Ozs7SUFFRCxrREFBVzs7OztJQUFYLFVBQVksT0FBc0I7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3pCO0lBQ0wsQ0FBQzs7OztJQUVELHFEQUFjOzs7SUFBZDtRQUNJLElBQUksQ0FBQyxhQUFhLEdB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QU8sSUFBSSxDQUFDO1NBQ2Y7YUFDRztZQUNBLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUEsQ0FBQyxDQUFBLEtBQUssQ0FBQSxDQUFDLENBQUEsSUFBSSxDQUFDO1NBQ3ZEO0lBQ0wsQ0FBQzs7OztJQUVELDJDQUFJOzs7SUFBSjtRQUNJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUEsQ0FBQyxDQUFBLEtBQUssQ0FBQSxDQUFDLENBQUEsSUFBSSxDQUFDO0lBQzNELENBQUM7O2dCQXpHSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLDBCQUEwQjtvQkFDcEMsaXhCQUFvRDs7aUJBRXZEOzs7Ozt3QkFHSSxLQUFLOzJCQUVMLEtBQUs7MEJBRUwsS0FBSzs7SUFnR1YsbUNBQUM7Q0FBQSxBQTNHRCxJQTJHQztTQXRHWSw0QkFBNEI7OztJQUVyQyw2Q0FBb0I7O0lBRXBCLGdEQUFxQzs7SUFFckMsK0NBQThCOztJQUU5Qix3REFBc0I7O0lBRXRCLHFEQUFzQjs7SUFFdEIsc0RBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGFUeXBlQ29uc3QsIEVudW1lcmF0aW9uVHlwZSwgSURhdGFUeXBlLCBDb2xsZWN0aW9uVHlwZSB9IGZyb20gJ0BlY3AtY2FmL2NvbW1vbi1zdHJ1Y3R1cmUnO1xuaW1wb3J0IHsgVWJjY1BhcmFtVGVtcGxhdGUsIFN0cnVjdHVyZVR5cGVSZWYsIERhdGFUeXBlRXh0ZW5zaW9uQ29uc3QgfSBmcm9tICdAZ3NwLWNtcC91YmNjLXBhcmFtLXZvJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdsaWItZHJvcGRvd25saXN0LWNvbnRyb2wnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9kcm9wZG93bmxpc3QtY29udHJvbC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vZHJvcGRvd25saXN0LWNvbnRyb2wuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIERyb3Bkb3dubGlzdENvbnRyb2xDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG5cbiAgICBASW5wdXQoKSBwYXJhbTogYW55O1xuXG4gICAgQElucHV0KCkgdGVtcGxhdGU6IFViY2NQYXJhbVRlbXBsYXRlO1xuXG4gICAgQElucHV0KCkgY2FuRWRpdDpib29sZWFuPXRydWU7XG5cbiAgICBlbnVtZXJhdGlvbkl0ZW1zID0gW107XG5cbiAgICBpc011bHRpU2VsZWN0ID0gZmFsc2U7XG5cbiAgICBpc0VudW1JbmZvTG9hZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnBhcmFtID0gdGhpcy5wYXJhbSB8fCB7fTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGUgfHwgbmV3IFViY2NQYXJhbVRlbXBsYXRlKCk7XG4gICAgICAgIGlmICghdGhpcy5pc0VudW1JbmZvTG9hZCkge1xuICAgICAgICAgICAgdGhpcy5lbnVtQ29uZmlnSW5pdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaXNFbnVtSW5mb0xvYWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW51bUNvbmZpZ0luaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVudW1Db25maWdJbml0KCkge1xuICAgICAgICB0aGlzLmlzTXVsdGlTZWxlY3QgPSB0aGlzLmlzQ29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLmdldEVudW1JdGVtcygpO1xuICAgIH1cblxuICAgIGdldEVudW1JdGVtcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmFtIHx8ICF0aGlzLnBhcmFtLnBhcmFtZXRlclR5cGUgfHwgIXRoaXMudGVtcGxhdGUuc3RydWN0dXJlZFR5cGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGFyYW0ucGFyYW1ldGVyVHlwZS5raW5kID09PSBEYXRhVHlwZUNvbnN0LkRFRkFVTFRfQ09MTEVDVElPTikge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnRUeXBlID0gdGhpcy5nZXRDb2xsZWN0aW9uRWxlbWVudFR5cGUodGhpcy5wYXJhbS5wYXJhbWV0ZXJUeXBlKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0KGVsZW1lbnRUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmFtLnBhcmFtZXRlclR5cGUua2luZCA9PT0gRGF0YVR5cGVFeHRlbnNpb25Db25zdC5VQkNDX1NUUlVDVFVSRV9UWVBFX1JFRikge1xuICAgICAgICAgICAgbGV0IHR5cGVSZWYgPSB0aGlzLnBhcmFtLnBhcmFtZXRlclR5cGUgYXMgU3RydWN0dXJlVHlwZVJlZjtcbiAgICAgICAgICAgIHRoaXMuZ2V0KHR5cGVSZWYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDmnprkuL7kuI3mlK/mjIHnmoTlj4LmlbDnsbvlnoske3RoaXMucGFyYW0ucGFyYW1ldGVyVHlwZS5raW5kfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0KHJlZlR5cGU6IFN0cnVjdHVyZVR5cGVSZWYpIHtcbiAgICAgICAgbGV0IGVudW1UeXBlID0gdGhpcy50ZW1wbGF0ZS5zdHJ1Y3R1cmVkVHlwZXMuZmluZCh4ID0+IHguaWQgPT09IHJlZlR5cGUucmVmSWQpIGFzIEVudW1lcmF0aW9uVHlwZTtcbiAgICAgICAgaWYgKCFlbnVtVHlwZSB8fCAhZW51bVR5cGUuZW51bWVyYXRpb25JdGVtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVudW1UeXBlLmVudW1lcmF0aW9uSXRlbXMubWFwKHggPT4gdGhpcy5lbnVtZXJhdGlvbkl0ZW1zLnB1c2goeCkpO1xuICAgICAgICB0aGlzLmlzRW51bUluZm9Mb2FkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRDb2xsZWN0aW9uRWxlbWVudFR5cGUoZGF0YVR5cGU6IElEYXRhVHlwZSkge1xuICAgICAgICBsZXQga2luZCA9IGRhdGFUeXBlLmdldEtpbmQoKTtcbiAgICAgICAgc3dpdGNoIChraW5kKSB7XG4gICAgICAgICAgICBjYXNlIERhdGFUeXBlQ29uc3QuREVGQVVMVF9DT0xMRUNUSU9OOlxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50VHlwZSA9IChkYXRhVHlwZSBhcyBDb2xsZWN0aW9uVHlwZSkuZWxlbWVudFR5cGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sbGVjdGlvbkVsZW1lbnRUeXBlKGVsZW1lbnRUeXBlKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFUeXBlO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBpc0NvbGxlY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXJhbSB8fCAhdGhpcy5wYXJhbS5wYXJhbWV0ZXJUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGFyYW0ucGFyYW1ldGVyVHlwZS5nZXRLaW5kKCkgPT09IERhdGFUeXBlQ29uc3QuREVGQVVMVF9DT0xMRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhbHVlQ2hhbmdlSGFuZGxlcigkZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wYXJhbS52YWx1ZT0kZXZlbnQudmFsdWU7XG4gICAgfVxuXG4gICAgaXNSZWFkb25seSgpe1xuICAgICAgICBpZighdGhpcy5jYW5FZGl0KXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMucGFyYW18fCF0aGlzLnBhcmFtLnJlYWRvbmx5P2ZhbHNlOnRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93KCl7XG4gICAgICAgIHJldHVybiAhdGhpcy5wYXJhbXx8IXRoaXMucGFyYW0uZGVzY3JpcHRpb24/ZmFsc2U6dHJ1ZTtcbiAgICB9XG5cbn1cbiJdfQ==