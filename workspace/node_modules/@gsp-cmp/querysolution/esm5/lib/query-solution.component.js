/**
 * @fileoverview added by tsickle
 * Generated from: lib/query-solution.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewEncapsulation, HostBinding, ComponentFactoryResolver, Injector, Input, Output, EventEmitter, ViewChild, InjectFlags, ElementRef, ChangeDetectorRef } from '@angular/core';
import { SaveAsDialogComponent } from './saveasdialog/saveasdialog.component';
import { SolutionManangerComponent } from './solutionmanager/solutionmanager.component';
import { Observable } from 'rxjs/Observable';
import { ConvertorService, QueryConditionComponent, QuerySolutionVo } from '@farris/component-querycondition';
import { NotifyService } from '@farris/ui-notify';
import { BsModalService } from '@farris/ui-modal';
import { HttpService } from './service/httpservice';
import { FieldConfigService } from './service/fieldconfig.service';
import { QuerySolutionVoConvertor, SolutionService } from '@farris/component-querycondition';
import { QUERYSOLUTION_HANDLER_TOKEN } from './interface/IQuerySolutionHandler';
import { LocaleService } from '@farris/ui-locale';
import { cloneDeep } from 'lodash-es';
import { SolutionCacheService } from './service/solution.cache.service';
import { EventManager } from '@angular/platform-browser';
import { IdService } from '@farris/ui-common';
import { BehaviorSubject, of, Subject } from 'rxjs';
import { switchMap, takeUntil, tap } from 'rxjs/operators';
import { EXTEND_QUERYSOLUTION_LOCALE } from './utils/extend-locale';
import { MessagerService } from '@farris/ui-messager';
var QuerySolutionComponent = /** @class */ (function () {
    function QuerySolutionComponent(notify, resolver, injector, modalService, convertService, solutionService, httpService, fieldConfigService, localeService) {
        var _this = this;
        this.notify = notify;
        this.resolver = resolver;
        this.injector = injector;
        this.modalService = modalService;
        this.convertService = convertService;
        this.solutionService = solutionService;
        this.httpService = httpService;
        this.fieldConfigService = fieldConfigService;
        this.localeService = localeService;
        this._fieldConfigs = [];
        this._presetFieldConfigs = [];
        this._resetFieldConfigs = [];
        /**
         * 高级模式需要原始fieldConfigs，需要将范围类控件改为单值控件
         */
        this.unformatFieldConfigs = [];
        /**
         * 此值由设计器传入
         * 组件在设计时无法点击被禁用，true
         * 组件在运行时可以点击使用，false
         */
        this.isDisabled = false;
        /**
         * 查询条件列表
         */
        this.queryEmitter = new EventEmitter();
        /**
         * 查询方案cls
         */
        this.cls = 'query-solution';
        /**
         * 查询方案数据源
         */
        this.querySolutionVos = new Array();
        this.querySolutionAdvancedVos = new Array();
        /**
         * 当前所选的方案，有可能不是方案
         */
        this.selectedSolution = new QuerySolutionVo();
        /**
         * 是否折叠
         */
        this.isFold = false;
        /**
         * label和控件是否排成一行，默认是；false时排成上下两行
         */
        this.isControlInline = true;
        /**
         * 是否需要完整显示超过6个字符的标签，默认false
         */
        this.showCompleteLabel = false;
        /**
         * 是否启用加载后查询
         */
        this.enableInitQuery = false;
        /**
         * 选择的控件展示列表
         */
        this.selectedFieldConditions = new Array();
        /**
         * visible属性为true的过滤条件，是变量selectedFieldConditions的子级
         */
        this.visibleSelectedConditions = new Array();
        //方案是否赋默认值
        this.isSetDefaultValue = false;
        //方案是否已赋默认值
        this.doneSetDefaultValue = false;
        //是否已完成自动查询，默认值为true，当enableInitQuery输入值为true时，首次执行ngOnchanges()时将其设为false
        this.doneInitQuery = true;
        //字段显示隐藏动态状态
        this.conditionVisibleState = new BehaviorSubject([]);
        //表单关闭时停止监听BehaviorSubject相关
        this.destroy$ = new Subject();
        /**
         * 条件概要
         */
        this.summaryConditions = [];
        /**
         * 是否启用记录历史方式
         * 上次查询——不能删除、可以另存、不存在变更
         * 方案列表只有上次查询时，上次查询、系统默认都存在
         * 方案列表多个时，有上次查询，上次查询选中
         * 方案列表没有上次查询时，但是LocalStorage有,构造一个上次查询
         *
         */
        this.enableHistory = false;
        /**
         * 是否启动高级模式
         */
        this.openAdvancedMode = false;
        this.filterText = this.localeService.getValue("queryCondition.container.query");
        this.queryAfterValueChange = false;
        this.hideOrgselector = false;
        this.historyRefer = {
            schemeKey: '',
            // 历史记录scheme
            foundSchme: null,
            // 历史方案保存
            schemeKeyLS: '',
            //LocalStorage 历史记录标记
            initCondition: false //LocalStorage是否按照执行完查询
        };
        this.newSaveAsSolutionVo = (/**
         * @return {?}
         */
        function () {
            //当前选中的方案，再修改筛选条件后，其原来的筛选条件并没有变化，仅仅this.selectedFieldConditions有变化
            /** @type {?} */
            var solution = cloneDeep(_this.selectedSolution);
            //新增的方案要清空查询方案编号
            solution.code = '';
            //是否系统属性必须设置为False
            solution.isSystem = false;
            //解决方案所属表单
            solution.belongId = _this.formId;
            //新增方案Id需要Guid
            solution.id = _this.solutionService.getGuid();
            //新增方案isDefault需要设置为false
            solution.isDefault = false;
            //新增方案的筛选条件，是当前选中的筛选条件
            solution.queryConditions = _this.selectedFieldConditions;
            //设置类型要清空
            solution.type = "private";
            solution.isChanged = false;
            solution.extendId = 'query-scheme-1';
            solution.extendInfo = new Array();
            return solution;
        });
        this.handleKeyDown = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (event.key == 'Enter') {
                //高级模式下数据格式的问题，输入状态中直接回车，输入框类型控件无法更新value，手动触发一下失去焦点，更新状态
                if (_this.selectedSolution.mode === '2') {
                    /** @type {?} */
                    var activeEle = (/** @type {?} */ (document.activeElement));
                    activeEle.blur();
                    activeEle.focus();
                }
                _this.query();
            }
        });
        this._idSer = new IdService();
        this.solutionHandler = this.injector.get(QUERYSOLUTION_HANDLER_TOKEN, null, InjectFlags.Optional);
        this.msgSer = this.injector.get(MessagerService);
        this._self = this.injector.get(ElementRef);
        this.cdf = this.injector.get(ChangeDetectorRef);
        this.eventManager = this.injector.get(EventManager);
        if (!this.localeService.langData['extendQuerySolution']) {
            this.localeService.setLocaleData(EXTEND_QUERYSOLUTION_LOCALE);
        }
    }
    Object.defineProperty(QuerySolutionComponent.prototype, "fieldConfigs", {
        get: /**
         * @return {?}
         */
        function () {
            return this._fieldConfigs;
        },
        /**
         * 字段配置数据源，用于选择字段配置
         */
        set: /**
         * 字段配置数据源，用于选择字段配置
         * @param {?} fieldConfigJson
         * @return {?}
         */
        function (fieldConfigJson) {
            this._fieldConfigs = this.solutionService.convertToQueryConditions(fieldConfigJson);
            this.unformatFieldConfigs = fieldConfigJson;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QuerySolutionComponent.prototype, "resetFieldConfigs", {
        get: /**
         * @return {?}
         */
        function () {
            return this._resetFieldConfigs;
        },
        set: /**
         * @param {?} resetFieldConfigJson
         * @return {?}
         */
        function (resetFieldConfigJson) {
            var _this = this;
            if (!resetFieldConfigJson || !Array.isArray(resetFieldConfigJson) || resetFieldConfigJson.length == 0) {
                return;
            }
            // 规范数据
            /** @type {?} */
            var formatResetConfigJson = resetFieldConfigJson.map((/**
             * @param {?} tConfigItem
             * @return {?}
             */
            function (tConfigItem) {
                /** @type {?} */
                var findItem = _this.fieldConfigs.find((/**
                 * @param {?} presetItem
                 * @return {?}
                 */
                function (presetItem) { return presetItem['fieldCode'] == tConfigItem['labelCode']; }));
                if (findItem) {
                    if (!tConfigItem.hasOwnProperty('control')) {
                        tConfigItem['control'] = {};
                    }
                    tConfigItem['control']['controltype'] = findItem.control.getControlType();
                    return tConfigItem;
                }
            }));
            this._resetFieldConfigs = this.solutionService.convertToSimpleQueryConditions(formatResetConfigJson.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item; })));
            if (this._resetFieldConfigs.length > 0) {
                this.updateConditionVisibleState(this._resetFieldConfigs);
            }
            // 更新已有配置
            this.solutionService.updateControl(this._presetFieldConfigs, this._resetFieldConfigs);
            this.solutionService.updateControl(this._fieldConfigs, this._resetFieldConfigs);
            this._fieldConfigs = this._fieldConfigs.slice();
            // 更新已有的方案
            this.sysQuerySolutionVo && this.solutionService.updateControl(this.sysQuerySolutionVo.queryConditions, this._resetFieldConfigs);
            // 更新历史记录
            this.historyRefer['foundSchme'] && this.solutionService.updateControl(this.historyRefer['foundSchme'].queryConditions, this._resetFieldConfigs);
            // 更新已选
            this.selectedSolution && this.solutionService.updateControl(this.selectedSolution.queryConditions, this._resetFieldConfigs);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QuerySolutionComponent.prototype, "presetFieldConfigs", {
        get: /**
         * @return {?}
         */
        function () {
            return this._presetFieldConfigs;
        },
        /**
         * 预置查询字段
         */
        set: /**
         * 预置查询字段
         * @param {?} presetFieldConfigJson
         * @return {?}
         */
        function (presetFieldConfigJson) {
            this._presetFieldConfigs = this.solutionService.convertToQueryConditions(presetFieldConfigJson);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    QuerySolutionComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._self.nativeElement.removeEventListener("keydown", this.handleKeyDown);
        //this.removeCurrentSolutionCache();
        this.destroy$.next();
        this.destroy$.complete();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    QuerySolutionComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['defaultConfigs']) {
            this.isSetDefaultValue = true;
            if (changes['defaultConfigs'].currentValue && !changes['defaultConfigs'].firstChange) { //设计时不会给defaultConfigs赋值
                this.setQueryConditionValues(changes['defaultConfigs'].currentValue, this.selectedSolution);
                this.initAutoQuery(this.selectedSolution);
            }
        }
        if (changes['enableInitQuery'] && changes['enableInitQuery'].firstChange && changes['enableInitQuery'].currentValue) {
            this.doneInitQuery = false;
        }
    };
    /**
     * 组件初始化
     */
    /**
     * 组件初始化
     * @return {?}
     */
    QuerySolutionComponent.prototype.ngOnInit = /**
     * 组件初始化
     * @return {?}
     */
    function () {
        var _this = this;
        //只在运行时 获取sessionId，查询已存储方案
        this.initSysQuerySolution();
        if (!this.isDisabled) {
            this.sessionId = this.solutionHandler.getUserSessionId();
            // 缓存历史方案
            this.initAutoQueryByLS();
            // 加载方案列表
            this.loadQuerySolutions();
            //注册键盘监听事件
            this.listenKeyBoard();
            this.getConditionVisibleState().pipe(takeUntil(this.destroy$)).subscribe((/**
             * @param {?} simpleConditions
             * @return {?}
             */
            function (simpleConditions) {
                if (_this.selectedFieldConditions.length > 0) {
                    _this.updateFieldParams(simpleConditions);
                }
                else {
                    _this.templateSimpleConditions = simpleConditions;
                }
                _this.visibleSelectedConditions = _this.selectedFieldConditions.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return !!item.visible; }));
                _this.whenFoldSetSummaryConditions();
                !_this.isDisabled && _this.solutionHandler.setCurrentQueryConditions(cloneDeep(_this.visibleSelectedConditions));
            }));
        }
        else {
            //设计时只加载系统预置方案
            this.loadSysQuerySolution();
        }
    };
    /**
     * @return {?}
     */
    QuerySolutionComponent.prototype.initSysQuerySolution = /**
     * @return {?}
     */
    function () {
        if (this.presetQuerySolutionName && this.presetQuerySolutionName != '') {
            this.sysQuerySolutionVo = new QuerySolutionVo();
            this.sysQuerySolutionVo.id = this.solutionService.getGuid();
            this.sysQuerySolutionVo.code = (this.presetQuerySolutionName != this.localeService.getValue("querySolution.container.sysPresetName")) ? this.presetQuerySolutionName : this.localeService.getValue("querySolution.container.defaultName");
            this.sysQuerySolutionVo.queryConditions = cloneDeep(this.presetFieldConfigs);
            this.sysQuerySolutionVo.belongId = this.formId;
            this.sysQuerySolutionVo.isSystem = true;
            this.sysQuerySolutionVo.mode = '1';
            // this.querySolutionVos.push(this.sysQuerySolutionVo);
        }
    };
    /**
     * 加载系统预置方案
     */
    /**
     * 加载系统预置方案
     * @return {?}
     */
    QuerySolutionComponent.prototype.loadSysQuerySolution = /**
     * 加载系统预置方案
     * @return {?}
     */
    function () {
        this.querySolutionVos.push(this.sysQuerySolutionVo);
        this.selectedSolution = cloneDeep(this.sysQuerySolutionVo);
        this.loadQueryConditions();
    };
    /**
     * 规范方案条件
     */
    /**
     * 规范方案条件
     * @private
     * @param {?} tConvertor
     * @param {?} element
     * @param {?=} fromJobject
     * @return {?}
     */
    QuerySolutionComponent.prototype.formatQuerySolutionVO = /**
     * 规范方案条件
     * @private
     * @param {?} tConvertor
     * @param {?} element
     * @param {?=} fromJobject
     * @return {?}
     */
    function (tConvertor, element, fromJobject) {
        var _this = this;
        if (fromJobject === void 0) { fromJobject = false; }
        /** @type {?} */
        var querysolutionVO;
        /** @type {?} */
        var sourceData;
        /** @type {?} */
        var _fieldCodeArr = [];
        /** @type {?} */
        var _tQueryConditions;
        if (fromJobject) {
            querysolutionVO = tConvertor.initFromJobject(element);
        }
        else {
            querysolutionVO = element;
        }
        this.fieldConfigs.forEach((/**
         * @param {?} _item
         * @return {?}
         */
        function (_item) { _fieldCodeArr.push(_item.fieldCode); }));
        if (querysolutionVO && querysolutionVO.queryConditions && querysolutionVO.queryConditions.length > 0) {
            //若表单上删除了某个字段，但已保存的自定义方案中包含该字段时，在加载方案过程中将该字段剔除
            _tQueryConditions = querysolutionVO.queryConditions.filter((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                return _fieldCodeArr.indexOf(element.fieldCode) > -1;
            }));
            querysolutionVO.queryConditions = _tQueryConditions;
            //对自定义方案的国际化信息、帮助控件的帮助前及帮助后事件进行动态赋值
            querysolutionVO.queryConditions.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                sourceData = _this.fieldConfigs.find((/**
                 * @param {?} _item
                 * @return {?}
                 */
                function (_item) { return _item.fieldCode == element.fieldCode; }));
                element.fieldName = sourceData.fieldName;
                element.placeHolder = sourceData.placeHolder;
                element.beginPlaceHolder = sourceData.hasOwnProperty('beginPlaceHolder') ? sourceData['beginPlaceHolder'] : '';
                element.endPlaceHolder = sourceData.hasOwnProperty('endPlaceHolder') ? sourceData['endPlaceHolder'] : '';
                if (sourceData.control.preEventCmd) {
                    ((/** @type {?} */ (element.control))).preEventCmd = sourceData.control.preEventCmd;
                }
                if (sourceData.control.postEventCmd) {
                    ((/** @type {?} */ (element.control))).postEventCmd = sourceData.control.postEventCmd;
                }
                if (sourceData.control.clear) {
                    ((/** @type {?} */ (element.control))).clear = sourceData.control.clear;
                }
                if (sourceData.control.click) {
                    ((/** @type {?} */ (element.control))).click = sourceData.control.click;
                }
                if (sourceData.control.beforeShow) {
                    ((/** @type {?} */ (element.control))).beforeShow = sourceData.control.beforeShow;
                }
                if (sourceData.control.beforeHide) {
                    ((/** @type {?} */ (element.control))).beforeHide = sourceData.control.beforeHide;
                }
                if (sourceData.control.dateChangedCmd) {
                    ((/** @type {?} */ (element.control))).dateChangedCmd = sourceData.control.dateChangedCmd;
                }
                if (sourceData.control.enumValues && sourceData.control.enumValues.length > 0) {
                    ((/** @type {?} */ (element.control))).enumValues = sourceData.control.enumValues;
                    ((/** @type {?} */ (element.control))).enumValues = sourceData.control.enumValues;
                }
                if (sourceData.control.data && sourceData.control.data.length > 0) {
                    ((/** @type {?} */ (element.control))).data = sourceData.control.data;
                }
            }));
            //在此处querycondition处理完毕，需要将querycondition内容填充至queryConditionsAdvanced
            if (querysolutionVO.queryConditionsAdvanced) {
                /** @type {?} */
                var _queryConditionsAdvanced = tConvertor.complicateTreeData(querysolutionVO.queryConditionsAdvanced, querysolutionVO.queryConditions);
                querysolutionVO.queryConditionsAdvanced = cloneDeep(_queryConditionsAdvanced);
            }
        }
        return querysolutionVO;
    };
    /**
     * 加载查询方案数据
     */
    /**
     * 加载查询方案数据
     * @return {?}
     */
    QuerySolutionComponent.prototype.loadQuerySolutions = /**
     * 加载查询方案数据
     * @return {?}
     */
    function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var self;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                self = this;
                this.httpService.query(this.formId, this.sessionId).subscribe((/**
                 * @param {?} items
                 * @return {?}
                 */
                function (items) {
                    /** @type {?} */
                    var convertor = new QuerySolutionVoConvertor();
                    /** @type {?} */
                    var querysolutionVO;
                    if (items && items.length > 0) {
                        //高级模式未开启状态下，过滤掉相关数据
                        if (!_this.openAdvancedMode) {
                            items = items.filter((/**
                             * @param {?} val
                             * @return {?}
                             */
                            function (val) { return val.mode !== '2'; }));
                        }
                        items.forEach((/**
                         * @param {?} element
                         * @return {?}
                         */
                        function (element) {
                            querysolutionVO = _this.formatQuerySolutionVO(convertor, element, true);
                            if (_this.enableHistory && querysolutionVO['type'] == 'pre' && querysolutionVO.mode !== '2') {
                                // 如果返回列表内存在历史记录                        
                                querysolutionVO.code = _this.localeService.getValue("querySolution.container.histroyName");
                                _this.historyRefer['schemeKey'] = querysolutionVO.id;
                                _this.historyRefer['foundSchme'] = cloneDeep(querysolutionVO);
                                _this.historyRefer['initCondition'] = true;
                                //  this.defaultQuerySolution = cloneDeep(querysolutionVO);
                            }
                            else if (querysolutionVO['type'] != 'pre') {
                                //根据version 选择存入哪一个数据 1为标准，2为高级
                                if (querysolutionVO.mode === '2') {
                                    _this.querySolutionAdvancedVos.push(querysolutionVO);
                                }
                                else {
                                    _this.querySolutionVos.push(querysolutionVO);
                                }
                                if (querysolutionVO.isDefault) {
                                    //如果有默认方案，则设置全局默认方案
                                    _this.defaultQuerySolution = cloneDeep(querysolutionVO);
                                }
                            }
                        }));
                        //self.setSolutionCache(this.querySolutionVos);
                    }
                    if (_this.enableHistory && !_this.historyRefer['initCondition']) {
                        //如果还没有设置条件
                        _this.formatInitQuerySolution();
                    }
                    if (_this.enableHistory && _this.historyRefer['initCondition']) {
                        _this.selectedSolution = cloneDeep(_this.historyRefer['foundSchme']);
                        //只有缓存记录
                        _this.querySolutionVos.splice(0, 0, _this.historyRefer['foundSchme']);
                        //历史记录不支持高级模式
                        // if(this.historyRefer['foundSchme'].mode === '2' ) {
                        //     this.querySolutionAdvancedVos.splice(0, 0, this.historyRefer['foundSchme']);
                        // } else {
                        //     this.querySolutionVos.splice(0, 0, this.historyRefer['foundSchme']);
                        // }
                        if (_this.querySolutionVos.length === 1) {
                            // 只有上次查询时
                            _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                        }
                        if (_this.querySolutionAdvancedVos.length === 0) {
                            // 只有上次查询时
                            _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                        }
                        //self.setSolutionCache(this.querySolutionVos);
                        _this.loadQueryConditions();
                        // if(this.historyRefer['schemeKey'] !== ''){
                        //     //更新一次缓存
                        //     this.changeQueryHistroy(false);
                        // }                
                    }
                    else if (_this.defaultQuerySolution || _this.querySolutionVos.length || _this.querySolutionAdvancedVos.length) {
                        //如果已查到有默认方案，或已有存储的方案
                        //不再加载系统配置的方案，首先加载默认方案，没有默认则加载第一个方案
                        if (_this.defaultQuerySolution && _this.defaultQuerySolution.id != '') {
                            _this.selectedSolution = cloneDeep(_this.defaultQuerySolution);
                        }
                        else {
                            /** @type {?} */
                            var publicSolution = tslib_1.__spread(_this.querySolutionVos, _this.querySolutionAdvancedVos).find((/**
                             * @param {?} item
                             * @return {?}
                             */
                            function (item) { return item.type == 'public'; }));
                            if (publicSolution) {
                                _this.selectedSolution = publicSolution;
                            }
                            else {
                                /** @type {?} */
                                var orgSolution = tslib_1.__spread(_this.querySolutionVos, _this.querySolutionAdvancedVos).find((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.type == 'org'; }));
                                _this.selectedSolution = !!orgSolution ? orgSolution : cloneDeep(tslib_1.__spread(_this.querySolutionVos, _this.querySolutionAdvancedVos)[0]);
                            }
                        }
                        if (_this.querySolutionVos.length < 1) {
                            _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                        }
                        if (_this.querySolutionAdvancedVos.length < 1) {
                            _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                        }
                        _this.loadQueryConditions();
                    }
                    else {
                        //如果没有任何已存储的方案，则加载系统配置方案
                        _this.loadSysQuerySolution();
                        _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                    }
                    if (_this.isSetDefaultValue && !_this.historyRefer['initCondition']) {
                        _this.setQueryConditionValues(_this.defaultConfigs, _this.selectedSolution);
                    }
                    _this.initAutoQuery(_this.selectedSolution);
                }), (/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (e && e.message) {
                        _this.msgSer.show('error', e.message, { showHeader: false });
                    }
                }));
                return [2 /*return*/];
            });
        });
    };
    /**
     * @param {?} querySolutionVos
     * @return {?}
     */
    QuerySolutionComponent.prototype.setSolutionCache = /**
     * @param {?} querySolutionVos
     * @return {?}
     */
    function (querySolutionVos) {
        if (!this.isDisabled && gspframeworkService && querySolutionVos && querySolutionVos.length) {
            // 获取当前功能菜单信息, 并以功能菜单ID为缓存key
            /** @type {?} */
            var option = gspframeworkService.rtf.session.getCommonVariable();
            SolutionCacheService.setSolutionCache(option.tabId, querySolutionVos);
            SolutionCacheService.solutionListChanged.next(true);
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    QuerySolutionComponent.prototype.setCurrentSolutionCache = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (!this.isDisabled && gspframeworkService && value) {
            // 获取当前功能菜单信息, 并以功能菜单ID为缓存key
            /** @type {?} */
            var option = gspframeworkService.rtf.session.getCommonVariable();
            if (option && option.tabId) {
                SolutionCacheService.setCurrentSolution(option.tabId, value);
            }
        }
    };
    /*
    removeCurrentSolutionCache() {
        if (!this.isDisabled && gspframeworkService) {
            // 获取当前功能菜单信息, 并以功能菜单ID为缓存key
            const option = gspframeworkService.rtf.session.getCommonVariable();
            if (option && option.tabId) {
                SolutionCacheService.removeCurrentSolution(option.tabId);
            }
        }
    }
    */
    /*
        removeCurrentSolutionCache() {
            if (!this.isDisabled && gspframeworkService) {
                // 获取当前功能菜单信息, 并以功能菜单ID为缓存key
                const option = gspframeworkService.rtf.session.getCommonVariable();
                if (option && option.tabId) {
                    SolutionCacheService.removeCurrentSolution(option.tabId);
                }
            }
        }
        */
    /**
     * @return {?}
     */
    QuerySolutionComponent.prototype.loadQueryConditions = /*
        removeCurrentSolutionCache() {
            if (!this.isDisabled && gspframeworkService) {
                // 获取当前功能菜单信息, 并以功能菜单ID为缓存key
                const option = gspframeworkService.rtf.session.getCommonVariable();
                if (option && option.tabId) {
                    SolutionCacheService.removeCurrentSolution(option.tabId);
                }
            }
        }
        */
    /**
     * @return {?}
     */
    function () {
        //加载筛选条件
        this.selectedFieldConditions = new Array();
        if (this.selectedSolution && this.selectedSolution.queryConditions && this.selectedSolution.queryConditions.length > 0) {
            // this.selectedFieldConditions = this.selectedSolution.queryConditions as Array<QueryCondition>;
            this.selectedFieldConditions = this.selectedSolution.queryConditions;
            if (this.templateSimpleConditions && this.templateSimpleConditions.length > 0) {
                this.updateFieldParams(this.templateSimpleConditions);
                this.templateSimpleConditions = new Array();
            }
        }
        this.visibleSelectedConditions = this.selectedFieldConditions.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !!item.visible; }));
        // 如果方案的变更是在収折时
        this.whenFoldSetSummaryConditions();
        this.showSaveButton = this.selectedSolution.isSystem ? false : true;
        !this.isDisabled && this.solutionHandler.setCurrentQueryConditions(cloneDeep(this.visibleSelectedConditions));
        //this.setCurrentSolutionCache(this.selectedSolution);
    };
    /**
     * @return {?}
     */
    QuerySolutionComponent.prototype.getConditionVisibleState = /**
     * @return {?}
     */
    function () {
        return this.conditionVisibleState;
    };
    /**
     * 传递过来的是已经处理过的条件
     * @param simpleCondition
     */
    /**
     * 传递过来的是已经处理过的条件
     * @param {?} simpleCondition
     * @return {?}
     */
    QuerySolutionComponent.prototype.updateConditionVisibleState = /**
     * 传递过来的是已经处理过的条件
     * @param {?} simpleCondition
     * @return {?}
     */
    function (simpleCondition) {
        this.conditionVisibleState.next(simpleCondition);
    };
    // 监听resetFieldConfigs变化后，更新selectedFieldConditions，并同步至querycondition，可实现筛选条件动态显示隐藏
    // 监听resetFieldConfigs变化后，更新selectedFieldConditions，并同步至querycondition，可实现筛选条件动态显示隐藏
    /**
     * @private
     * @param {?} simpleConditions
     * @return {?}
     */
    QuerySolutionComponent.prototype.updateFieldParams = 
    // 监听resetFieldConfigs变化后，更新selectedFieldConditions，并同步至querycondition，可实现筛选条件动态显示隐藏
    /**
     * @private
     * @param {?} simpleConditions
     * @return {?}
     */
    function (simpleConditions) {
        var _this = this;
        if (!simpleConditions || !simpleConditions.length) {
            return;
        }
        /** @type {?} */
        var currentConditions = cloneDeep(this.selectedFieldConditions);
        /** @type {?} */
        var updatedConditions = currentConditions.map((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            var e_1, _a;
            try {
                for (var simpleConditions_1 = tslib_1.__values(simpleConditions), simpleConditions_1_1 = simpleConditions_1.next(); !simpleConditions_1_1.done; simpleConditions_1_1 = simpleConditions_1.next()) {
                    var simpleCondition = simpleConditions_1_1.value;
                    if (simpleCondition.hasOwnProperty('visible') && item.fieldCode == simpleCondition['fieldCode'] && item.visible !== simpleCondition['visible']) {
                        item.visible = simpleCondition['visible'];
                        item.value.clearValue();
                        _this.markAsChanged(true, _this.selectedSolution.id);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (simpleConditions_1_1 && !simpleConditions_1_1.done && (_a = simpleConditions_1.return)) _a.call(simpleConditions_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return item;
        }));
        this.selectedFieldConditions = updatedConditions.slice();
    };
    /**
     * @return {?}
     */
    QuerySolutionComponent.prototype.saveAs = /**
     * @return {?}
     */
    function () {
        this.openSaveAsDialog(this.localeService.getValue("querySolution.saveAsDialog.title"));
    };
    /**
     * 获取默认标签
     * @param solution
     */
    /**
     * 获取默认标签
     * @param {?} solution
     * @return {?}
     */
    QuerySolutionComponent.prototype.getDefaultLabel = /**
     * 获取默认标签
     * @param {?} solution
     * @return {?}
     */
    function (solution) {
        if (!(this.defaultQuerySolution)) {
            return { 'visibility': 'hidden' };
        }
        else {
            if (solution.id == this.defaultQuerySolution.id) {
                // //不处理了
            }
            else {
                return { 'visibility': 'hidden' };
            }
        }
    };
    /**
     * 方案选择事件
     * @param solution 当前选中的方案
     */
    /**
     * 方案选择事件
     * @param {?} solution 当前选中的方案
     * @return {?}
     */
    QuerySolutionComponent.prototype.select = /**
     * 方案选择事件
     * @param {?} solution 当前选中的方案
     * @return {?}
     */
    function (solution) {
        this.selectedSolution = Object.assign(new QuerySolutionVo(), solution);
        if (solution.queryConditions && solution.queryConditions.length > 0) {
            this.selectedFieldConditions = this.selectedSolution.queryConditions;
        }
        else {
            this.selectedFieldConditions = new Array();
        }
        this.showSaveButton = this.selectedSolution.isSystem ? false : true;
        this.visibleSelectedConditions = this.selectedFieldConditions.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !!item.visible; }));
        !this.isDisabled && this.solutionHandler.setCurrentQueryConditions(cloneDeep(this.visibleSelectedConditions));
        //this.setCurrentSolutionCache(this.selectedSolution);
        // 如果方案的变更是在収折时
        this.whenFoldSetSummaryConditions();
    };
    /**
     * @param {?} solution
     * @return {?}
     */
    QuerySolutionComponent.prototype.selectAndQuery = /**
     * @param {?} solution
     * @return {?}
     */
    function (solution) {
        //高级模式不使用默认值
        if (solution.mode !== '2' && (this.defaultConfigs && this.defaultConfigs.isCurrent || (solution.isSystem && solution.type !== 'pre'))) {
            this.setQueryConditionValues(this.defaultConfigs, solution); //已包含select操作
        }
        else {
            if (solution.mode !== '2' && this.enableHistory && solution.type == 'pre') {
                /** @type {?} */
                var conditions = cloneDeep(this.historyRefer['foundSchme']['queryConditions']);
                if (conditions.length > 0) {
                    solution.queryConditions = conditions;
                }
            }
            this.select(solution);
        }
        this.query();
    };
    /**
     * 打开字段配置窗口
     */
    /**
     * 打开字段配置窗口
     * @return {?}
     */
    QuerySolutionComponent.prototype.openFieldConfigDialog = /**
     * 打开字段配置窗口
     * @return {?}
     */
    function () {
        this.farrisQueryCondition.openFieldConfigDialog();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    QuerySolutionComponent.prototype.fieldConditionsChangeHander = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        var _this = this;
        /** @type {?} */
        var data = $event;
        if (this.selectedSolution.mode === '2') {
            this.selectedSolution.queryConditions = data;
            /** @type {?} */
            var target = this.querySolutionAdvancedVos.find((/**
             * @param {?} val
             * @return {?}
             */
            function (val) { return val.id === _this.selectedSolution.id; }));
            if (target) {
                target.queryConditions = this.selectedSolution.queryConditions;
                target.queryConditionsAdvanced = this.selectedSolution.queryConditionsAdvanced;
            }
        }
        // this.selectedSolution.queryConditions = data;此时不改变当前选中的方案，等到保存时，直接调用this.selectedFieldConditions来保存。
        this.selectedFieldConditions = data;
        this.visibleSelectedConditions = this.selectedFieldConditions.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return !!item.visible; }));
        if (!this.isDisabled) {
            this.solutionHandler.setCurrentQueryConditions(cloneDeep(this.visibleSelectedConditions));
            this.solutionHandler.setFilterConditions(this.visibleSelectedConditions);
            //this.setCurrentSolutionCache(this.selectedSolution);
        }
        if (this.queryAfterValueChange) {
            this.query();
        }
        this.markAsChanged(true, this.selectedSolution.id);
    };
    //高级模式新增，高级模式下不仅需要修改conditions，还需要修改solution的相关属性
    //高级模式新增，高级模式下不仅需要修改conditions，还需要修改solution的相关属性
    /**
     * @param {?} $event
     * @return {?}
     */
    QuerySolutionComponent.prototype.fieldSolutionChangeHander = 
    //高级模式新增，高级模式下不仅需要修改conditions，还需要修改solution的相关属性
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var data = $event;
        this.selectedSolution = data;
    };
    /**
     * 保存方案
     */
    /**
     * 保存方案
     * @return {?}
     */
    QuerySolutionComponent.prototype.save = /**
     * 保存方案
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.formId) {
            this.solutionService.showInfo(this.localeService.getValue("querySolution.container.pleaseInput"), 'error', '', 1500);
            return;
        }
        //id为空则表示没有预置方案，则此时保存方案相当于新增一个方案
        if (!this.selectedSolution.id) {
            this.openSaveAsDialog(this.localeService.getValue("querySolution.container.save"));
        }
        //直接保存
        else {
            /** @type {?} */
            var checkAuthority$ = this.httpService.getAuth('QuerySolution', this.sessionId);
            checkAuthority$.pipe(switchMap((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (!data['success'] && (_this.selectedSolution.type == 'public' || _this.selectedSolution.type == 'org')) {
                    _this.solutionService.showInfo(_this.localeService.getValue('extendQuerySolution.auth.updateError'), 'warning', '', 1500);
                    return of(false);
                }
                else {
                    _this.selectedSolution.queryConditions = _this.selectedFieldConditions;
                    /** @type {?} */
                    var save$ = _this.httpService.update(_this.selectedSolution, _this.sessionId);
                    return save$.pipe(tap((/**
                     * @return {?}
                     */
                    function () {
                        if (_this.selectedSolution.mode === '2') {
                            /** @type {?} */
                            var tempIndex = _this.querySolutionAdvancedVos.findIndex((/**
                             * @param {?} x
                             * @return {?}
                             */
                            function (x) { return x.id == _this.selectedSolution.id; }));
                            // this.selectedFieldConditions = this.selectedSolution.queryConditions;
                            _this.querySolutionAdvancedVos.splice(tempIndex, 1, _this.selectedSolution);
                        }
                        else {
                            /** @type {?} */
                            var tempIndex = _this.querySolutionVos.findIndex((/**
                             * @param {?} x
                             * @return {?}
                             */
                            function (x) { return x.id == _this.selectedSolution.id; }));
                            // this.selectedFieldConditions = this.selectedSolution.queryConditions;
                            _this.querySolutionVos.splice(tempIndex, 1, _this.selectedSolution);
                        }
                        _this.markAsChanged(false, _this.selectedSolution.id);
                        _this.farrisQueryCondition.canClearRelatedFields = false;
                        _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveSuccess"), 'success', '', 1500);
                    }), (/**
                     * @param {?} error
                     * @return {?}
                     */
                    function (error) {
                        _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveFail"), 'error', '', 1500);
                        throw error;
                    })));
                }
            })), tap((/**
             * @return {?}
             */
            function () { }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                console.warn(_this.localeService.getValue('extendQuerySolution.auth.apiError'));
            }))).subscribe();
        }
    };
    /**
     * 打开另存为对话框，点击保存按钮时也走该逻辑
     * @param title
     */
    /**
     * 打开另存为对话框，点击保存按钮时也走该逻辑
     * @param {?} title
     * @return {?}
     */
    QuerySolutionComponent.prototype.openSaveAsDialog = /**
     * 打开另存为对话框，点击保存按钮时也走该逻辑
     * @param {?} title
     * @return {?}
     */
    function (title) {
        if (!this.formId) {
            this.solutionService.showInfo(this.localeService.getValue("querySolution.container.pleaseInput"), 'error', '', 1500);
            return;
        }
        this.saveAsDialog.title = title;
        this.saveAsDialog.querySolution = this.newSaveAsSolutionVo();
        this.saveAsDialog.radioGroupValue = 'private';
        this.saveAsDialog.show();
    };
    /**
     * 另存为确定事件处理
     * @param solution 新增的查询方案
     */
    /**
     * 另存为确定事件处理
     * @param {?} _event
     * @return {?}
     */
    QuerySolutionComponent.prototype.saveAsConfrimHandler = /**
     * 另存为确定事件处理
     * @param {?} _event
     * @return {?}
     */
    function (_event) {
        var _this = this;
        /** @type {?} */
        var solution = _event['querySolution'];
        if (solution.queryConditions && solution.queryConditions.length) {
            solution.queryConditions.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                if (!!element.readonly) {
                    element.readonly = false;
                }
            }));
        }
        this.httpService.create(solution, this.sessionId).subscribe((/**
         * @return {?}
         */
        function () {
            //重新设置全局的默认方案
            if (solution.isDefault) { //被设置为默认方案
                _this.defaultQuerySolution = solution;
                _this.querySolutionVos = _this.querySolutionVos.map((/**
                 * @param {?} vo
                 * @return {?}
                 */
                function (vo) {
                    vo.isDefault = false;
                    return vo;
                }));
                _this.querySolutionAdvancedVos = _this.querySolutionAdvancedVos.map((/**
                 * @param {?} vo
                 * @return {?}
                 */
                function (vo) {
                    vo.isDefault = false;
                    return vo;
                }));
            }
            //用户保存自己的筛选方案后，不再显示系统默认的方案，操作方案为高级模式时不影响标准
            if (_this.querySolutionVos.length === 1 && _this.querySolutionVos[0].isSystem && solution.mode === '1') {
                //用户没有配置自己的筛选方案时，或者用户只配置了一个筛选方案时，此数组都有一个方案；若此方案是系统默认方案，则应在另存为时删掉
                _this.querySolutionVos = new Array();
            }
            else if (_this.querySolutionVos.length === 2 && _this.enableHistory) {
                /** @type {?} */
                var filterSolutionVos = new Array();
                filterSolutionVos = _this.querySolutionVos.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    if (item.type == 'pre') {
                        return true;
                    }
                    return !item.isSystem;
                }));
                _this.querySolutionVos = filterSolutionVos;
            }
            //高级模式同理
            if (_this.querySolutionAdvancedVos.length === 1 && _this.querySolutionAdvancedVos[0].isSystem && solution.mode === '2') {
                _this.querySolutionAdvancedVos = new Array();
            }
            else if (_this.querySolutionAdvancedVos.length === 2 && _this.enableHistory) {
                /** @type {?} */
                var filterSolutionVos = new Array();
                filterSolutionVos = _this.querySolutionAdvancedVos.filter((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) {
                    if (item.type == 'pre') {
                        return true;
                    }
                    return !item.isSystem;
                }));
                _this.querySolutionAdvancedVos = filterSolutionVos;
            }
            solution.mode === '2' ? _this.querySolutionAdvancedVos.push(solution) : _this.querySolutionVos.push(solution);
            _this.selectedSolution = solution;
            _this.showSaveButton = _this.selectedSolution.isSystem ? false : true;
            _this.selectedFieldConditions = _this.selectedSolution.queryConditions;
            _this.visibleSelectedConditions = _this.selectedFieldConditions.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return !!item.visible; }));
            _this.farrisQueryCondition.canClearRelatedFields = false;
            _this.saveAsDialog.isDefault = false;
            _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveSuccess"), 'success', '', 1500);
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveFail"), 'error', '', 1500);
            throw error;
        }));
    };
    /**
     * 打开管理界面
     */
    /**
     * 打开管理界面
     * @return {?}
     */
    QuerySolutionComponent.prototype.openManangerDialog = /**
     * 打开管理界面
     * @return {?}
     */
    function () {
        var _this = this;
        this.httpService.getAuth('QuerySolution', this.sessionId).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.manageDialog.authorityError = data['success'] ? false : true;
            _this.manageDialog.show(cloneDeep(tslib_1.__spread(_this.querySolutionVos, _this.querySolutionAdvancedVos)));
        }));
    };
    /**
     * 管理界面确定处理
     * @param _event
     * @param dialog
     */
    /**
     * 管理界面确定处理
     * @param {?} _event
     * @return {?}
     */
    QuerySolutionComponent.prototype.managerConfirmHandler = /**
     * 管理界面确定处理
     * @param {?} _event
     * @return {?}
     */
    function (_event) {
        var _this = this;
        /** @type {?} */
        var obj = _event;
        if (obj['validator'] == true) {
            //点击checkbox时，newDefaultQuerySolution被赋值； 全局默认方案被删除时，newDefaultQuerySolution变为null
            /** @type {?} */
            var defaultId_1 = obj['newDefaultQuerySolution'] ? obj['newDefaultQuerySolution'].id : '';
            /** @type {?} */
            var belongId = this.formId;
            //若没有删除任何方案，deletedQuerySolutionVos会是一个空数组
            /** @type {?} */
            var deletedIds_1 = obj['deletedQuerySolutionIds'];
            this.httpService.batchUpdate({ defaultId: defaultId_1, belongId: belongId, deletedIds: deletedIds_1 }, this.sessionId).subscribe((/**
             * @return {?}
             */
            function () {
                //把删除后的vo赋值给 this.querySolutionVos；如果没删除方案， this.querySolutionVos跟obj['splicedQuerySolutionVos']同值
                //默认方案的变化也记录在updatedQuerySolutionVos中
                _this.querySolutionVos = obj['updatedQuerySolutionVos'].filter((/**
                 * @param {?} val
                 * @return {?}
                 */
                function (val) { return val.mode !== '2'; }));
                _this.querySolutionAdvancedVos = obj['updatedQuerySolutionVos'].filter((/**
                 * @param {?} val
                 * @return {?}
                 */
                function (val) { return val.mode === '2'; }));
                if (!obj['currentDefaultQuerySolutionId']) { //如果传过来的当前默认方案id是空，代表所有默认方案都取消了
                    _this.defaultQuerySolution = null;
                }
                //如果有默认方案先显示默认方案，如果没有默认方案则直接显示当前查询方案的第一个；如果没有任何查询方案则直接清空查询方案，则显示系统预置的默认方案
                if (defaultId_1) {
                    //已设置默认方案
                    _this.select(obj['newDefaultQuerySolution']);
                    _this.defaultQuerySolution = obj['newDefaultQuerySolution'];
                    if (_this.querySolutionVos.length === 0 || (_this.enableHistory && _this.querySolutionVos.length === 1 && _this.querySolutionVos[0].type == 'pre')) {
                        _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                    }
                    if (!_this.querySolutionAdvancedVos.length) {
                        _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                    }
                }
                else {
                    //未更改默认方案，判断当前选择的查询方案是否已被删除
                    if (deletedIds_1.includes(_this.selectedSolution.id)) { //如果被删除
                        if (_this.querySolutionVos.length > 0) {
                            if (_this.enableHistory && _this.querySolutionVos.length == 1 && _this.querySolutionVos[0].type == 'pre') {
                                _this.select(_this.sysQuerySolutionVo);
                                _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                            }
                            else {
                                /** @type {?} */
                                var publicSolution = _this.querySolutionVos.find((/**
                                 * @param {?} item
                                 * @return {?}
                                 */
                                function (item) { return item.type == 'public'; }));
                                if (publicSolution) {
                                    _this.select(publicSolution);
                                }
                                else {
                                    /** @type {?} */
                                    var orgSolution = _this.querySolutionVos.find((/**
                                     * @param {?} item
                                     * @return {?}
                                     */
                                    function (item) { return item.type == 'org'; }));
                                    _this.select(!!orgSolution ? orgSolution : cloneDeep(_this.querySolutionVos[0]));
                                }
                            }
                        }
                        else {
                            _this.select(_this.sysQuerySolutionVo);
                            _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                        }
                        //高级模式没有的话也需要增加默认
                        if (!_this.querySolutionAdvancedVos.length) {
                            _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                        }
                    }
                    else {
                        //什么也没发生
                        //把所有的默认都取消了
                        if (_this.querySolutionVos.length === 0 || (_this.enableHistory && _this.querySolutionVos.length === 1 && _this.querySolutionVos[0].type == 'pre')) {
                            _this.querySolutionVos.push(_this.sysQuerySolutionVo);
                        }
                        if (!_this.querySolutionAdvancedVos.length) {
                            _this.querySolutionAdvancedVos.push(_this.initAdvancedSolution());
                        }
                    }
                }
                _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveSuccess"), 'success', '', 1500);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.solutionService.showInfo(_this.localeService.getValue("querySolution.container.saveFail"), 'error', '', 1500);
                return Observable.throw(error);
            }));
        }
        else {
            //校验失败
        }
    };
    /**
     * 执行筛选
     */
    /**
     * 执行筛选
     * @return {?}
     */
    QuerySolutionComponent.prototype.query = /**
     * 执行筛选
     * @return {?}
     */
    function () {
        if (!this.isDisabled) {
            /** @type {?} */
            var errorArr = this.solutionService.isValid(this.visibleSelectedConditions);
            //高级模式下不用判断require，有自己的校验逻辑
            if (errorArr && errorArr.length && this.selectedSolution.mode !== '2') {
                /** @type {?} */
                var errorFields = errorArr.map((/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) { return error.field; }));
                this.solutionService.showInfo(this.localeService.getValue("querySolution.container.require").replace('{fields}', errorFields.join(', ')), 'warning', '', 2500);
            }
            else {
                //高级模式下必须所有条件都有值，否则会影响层级与关联关系
                /** @type {?} */
                var queryConditions = cloneDeep(this.visibleSelectedConditions);
                if (this.selectedSolution.mode === '2') {
                    queryConditions = cloneDeep(this.selectedFieldConditions);
                    /** @type {?} */
                    var emptyFlag = queryConditions.find((/**
                     * @param {?} val
                     * @return {?}
                     */
                    function (val) { return val.value.isEmpty(); }));
                    if (emptyFlag) {
                        this.notify.warning(this.localeService.getValue('advancedMode.auth.conditionEmptyError'));
                        return;
                    }
                }
                this.solutionHandler.setFilterConditions(queryConditions);
                this.queryEmitter.emit(queryConditions);
                // 更新历史记录
                this.changeQueryHistroy();
            }
        }
    };
    /**
     * 清空->条件全部重置为空
     */
    /**
     * 清空->条件全部重置为空
     * @return {?}
     */
    QuerySolutionComponent.prototype.clear = /**
     * 清空->条件全部重置为空
     * @return {?}
     */
    function () {
        // this.isFold = !this.isFold;
        /** @type {?} */
        var isNotEmpty = this.visibleSelectedConditions.some((/**
         * @param {?} condition
         * @return {?}
         */
        function (condition) { return condition.value.isEmpty() == false; }));
        if (isNotEmpty) {
            /** @type {?} */
            var newList = cloneDeep(this.farrisQueryCondition.resetSelectedConditionValues(true));
            this.selectedFieldConditions = newList;
            this.selectedSolution.queryConditions = newList;
            this.visibleSelectedConditions = this.selectedFieldConditions.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return !!item.visible; }));
            this.solutionHandler.setCurrentQueryConditions(cloneDeep(this.visibleSelectedConditions));
            this.solutionHandler.setFilterConditions(this.visibleSelectedConditions);
            this.markAsChanged(true, this.selectedSolution.id);
            this.query();
        }
    };
    /**
     * 折叠按钮的清空
     */
    /**
     * 折叠按钮的清空
     * @return {?}
     */
    QuerySolutionComponent.prototype.foldClearHandler = /**
     * 折叠按钮的清空
     * @return {?}
     */
    function () {
        if (this.isFold) {
            // 如果点击的时候是収折的
            this.isFold = false;
            if (this.summaryConditions.length > 0) {
                this.summaryConditions = [];
                this.clear();
            }
        }
        else {
            // 如果点击的时候是展开的
            this.clear();
        }
    };
    /**
     * 箭头点击事件
     */
    /**
     * 箭头点击事件
     * @return {?}
     */
    QuerySolutionComponent.prototype.arrowClick = /**
     * 箭头点击事件
     * @return {?}
     */
    function () {
        this.isFold = !this.isFold;
        this.whenFoldSetSummaryConditions();
        if (!this.isFold) {
            this.summaryConditions = [];
        }
    };
    /**
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.whenFoldSetSummaryConditions = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.isFold) {
            // 如果収折
            /** @type {?} */
            var isNotEmpty = this.visibleSelectedConditions.some((/**
             * @param {?} condition
             * @return {?}
             */
            function (condition) { return condition.value.isEmpty() == false; }));
            if (isNotEmpty) {
                this.summaryConditions = this.visibleSelectedConditions.filter((/**
                 * @param {?} condition
                 * @return {?}
                 */
                function (condition) { return condition.value.isEmpty() == false; }));
            }
            else {
                this.summaryConditions = [];
            }
        }
    };
    /**
     * 为系统预置方案或者自定义查询方案设置筛选条件默认值
     * @param configs 默认值设置
     * @param selectedSolution 当前选择的筛选方案
     */
    /**
     * 为系统预置方案或者自定义查询方案设置筛选条件默认值
     * @param {?} configs 默认值设置
     * @param {?} selectedSolution 当前选择的筛选方案
     * @return {?}
     */
    QuerySolutionComponent.prototype.setQueryConditionValues = /**
     * 为系统预置方案或者自定义查询方案设置筛选条件默认值
     * @param {?} configs 默认值设置
     * @param {?} selectedSolution 当前选择的筛选方案
     * @return {?}
     */
    function (configs, selectedSolution) {
        /** @type {?} */
        var targetSolution;
        /** @type {?} */
        var targetSolutionWithValues;
        //高级模式下不支持默认值
        if (configs && Array.isArray(configs.fieldConfigs) && configs.fieldConfigs.length && selectedSolution.mode !== '2') {
            if (selectedSolution.hasOwnProperty('type') && selectedSolution['type'] == 'pre') {
                //如果是历史记录
                targetSolution = null;
                this.select(selectedSolution);
            }
            else {
                targetSolution = configs.isCurrent ? selectedSolution : (selectedSolution.isSystem ? selectedSolution : null);
            }
            if (targetSolution && targetSolution.queryConditions && targetSolution.queryConditions.length) {
                targetSolutionWithValues = cloneDeep(this.solutionService.setValues(targetSolution, configs.fieldConfigs, !!configs.readonly));
                this.doneSetDefaultValue = true;
                this.select(targetSolutionWithValues);
            }
            else {
                //不为自定义方案设置默认值时，标记下要为其赋默认值的意图，但未成功
                this.doneSetDefaultValue = true;
                //如果没有设置默认值，就把当前选中方案的条件的值传出
                this.solutionHandler.setCurrentQueryConditions(this.selectedSolution.queryConditions);
            }
        }
        else {
            this.select(selectedSolution);
        }
    };
    /**
     * 加载筛选方案后自动查询
     * @param currentSolution 当前筛选方案
     */
    /**
     * 加载筛选方案后自动查询
     * @param {?} currentSolution 当前筛选方案
     * @return {?}
     */
    QuerySolutionComponent.prototype.initAutoQuery = /**
     * 加载筛选方案后自动查询
     * @param {?} currentSolution 当前筛选方案
     * @return {?}
     */
    function (currentSolution) {
        var _this = this;
        if (this.enableInitQuery && this.doneInitQuery && this.enableHistory && currentSolution.mode !== '2') {
            // 已通过历史记录进行过查询
            return;
        }
        /** @type {?} */
        var enableQuery = true;
        if (currentSolution && currentSolution.queryConditions && currentSolution.queryConditions.length) {
            if (this.isSetDefaultValue && !this.doneSetDefaultValue) {
                enableQuery = false;
            }
        }
        else {
            enableQuery = false;
        }
        if (enableQuery && this.enableInitQuery) {
            // this.solutionHandler.setFilterConditions(this.selectedSolution.queryConditions); 执行query方法时，已经执行setFilterConditions
            //if(this._self.nativeElement.querySelector('.farris-panel .btn-group .btn-primary')){
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.query();
                _this.doneInitQuery = true;
            }));
            //}
        }
    };
    /**
     * 当前查询方案的筛选条件发生变化时，标记方案处于编辑状态
     * @param isChanged 方案是否处于编辑状态
     * @param solutionId 需要标记是否处于编辑状态的方案的id
     */
    /**
     * 当前查询方案的筛选条件发生变化时，标记方案处于编辑状态
     * @param {?} isChanged 方案是否处于编辑状态
     * @param {?} solutionId 需要标记是否处于编辑状态的方案的id
     * @return {?}
     */
    QuerySolutionComponent.prototype.markAsChanged = /**
     * 当前查询方案的筛选条件发生变化时，标记方案处于编辑状态
     * @param {?} isChanged 方案是否处于编辑状态
     * @param {?} solutionId 需要标记是否处于编辑状态的方案的id
     * @return {?}
     */
    function (isChanged, solutionId) {
        this.querySolutionVos.forEach((/**
         * @param {?} solution
         * @return {?}
         */
        function (solution) {
            if (solution.id == solutionId)
                solution.isChanged = isChanged;
        }));
        this.querySolutionAdvancedVos.forEach((/**
         * @param {?} solution
         * @return {?}
         */
        function (solution) {
            if (solution.id == solutionId)
                solution.isChanged = isChanged;
        }));
        this.selectedSolution.isChanged = isChanged;
        this.cdf.detectChanges();
    };
    /**
     * 处理筛选按钮和清空按钮的响应式位置变更
     * @param $event farris-querycondition组件内部是否显示按钮
     */
    // showButtonHandle($event: any) {
    //     if(!this.isDisabled){
    //         let data = $event;
    //         this.queryButtonOnRight = !data;
    //         if(this.enableInitQuery && !this.doneInitQuery) {
    //             this.initAutoQuery(this.selectedSolution);
    //         }
    //     }
    // }
    /**
     * 键盘监听函数，当按下回车键时相当于按下筛选按钮
     */
    /**
         * 处理筛选按钮和清空按钮的响应式位置变更
         * @param $event farris-querycondition组件内部是否显示按钮
         */
    // showButtonHandle($event: any) {
    //     if(!this.isDisabled){
    //         let data = $event;
    //         this.queryButtonOnRight = !data;
    //         if(this.enableInitQuery && !this.doneInitQuery) {
    //             this.initAutoQuery(this.selectedSolution);
    //         }
    //     }
    // }
    /**
     * 键盘监听函数，当按下回车键时相当于按下筛选按钮
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.listenKeyBoard = /**
         * 处理筛选按钮和清空按钮的响应式位置变更
         * @param $event farris-querycondition组件内部是否显示按钮
         */
    // showButtonHandle($event: any) {
    //     if(!this.isDisabled){
    //         let data = $event;
    //         this.queryButtonOnRight = !data;
    //         if(this.enableInitQuery && !this.doneInitQuery) {
    //             this.initAutoQuery(this.selectedSolution);
    //         }
    //     }
    // }
    /**
     * 键盘监听函数，当按下回车键时相当于按下筛选按钮
     * @private
     * @return {?}
     */
    function () {
        this._self.nativeElement.addEventListener("keydown", this.handleKeyDown);
    };
    /**
     * 自动初始化查询
     * 启用历史记录，并且启用了初始化查询，如果有条件，就进行查询
     */
    /**
     * 自动初始化查询
     * 启用历史记录，并且启用了初始化查询，如果有条件，就进行查询
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.initAutoQueryByLS = /**
     * 自动初始化查询
     * 启用历史记录，并且启用了初始化查询，如果有条件，就进行查询
     * @private
     * @return {?}
     */
    function () {
        // 启用历史
        if (this.enableHistory && !this.isDisabled) {
            // key
            this.setLSKey();
            // 初始化对象
            this.initQuerySolution();
            // 如果设置了初始查询
            if (this.enableInitQuery) {
                this.formatInitQuerySolution();
                if (this.historyRefer['foundSchme']['queryConditions'].length > 0) {
                    /** @type {?} */
                    var queryConditions = cloneDeep(this.historyRefer['foundSchme']['queryConditions']);
                    this.selectedFieldConditions = queryConditions;
                    this.visibleSelectedConditions = this.selectedFieldConditions.filter((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) { return !!item.visible; }));
                    /** @type {?} */
                    var visibleConditions = cloneDeep(this.visibleSelectedConditions);
                    // 设置查询条件
                    this.solutionHandler.setFilterConditions(visibleConditions);
                    // 抛出查询事件
                    this.queryEmitter.emit(visibleConditions);
                    // 标记
                    this.doneInitQuery = true;
                }
            }
        }
    };
    /**
     * 初始化
     */
    /**
     * 初始化
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.initQuerySolution = /**
     * 初始化
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var querysolutionVO = new QuerySolutionVo();
        querysolutionVO.id = this.solutionService.getGuid();
        querysolutionVO.code = this.localeService.getValue("querySolution.container.histroyName");
        querysolutionVO.queryConditions = [];
        querysolutionVO.belongId = this.formId;
        querysolutionVO.isSystem = true;
        querysolutionVO.type = 'pre';
        querysolutionVO.mode = '1';
        querysolutionVO.queryConditionsAdvanced = { relation: 1, items: [], children: [], path: [1], groupid: 1 };
        this.historyRefer['foundSchme'] = querysolutionVO;
    };
    /**
     * 初始化高级模式
     */
    /**
     * 初始化高级模式
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.initAdvancedSolution = /**
     * 初始化高级模式
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var querysolutionVO = new QuerySolutionVo();
        querysolutionVO.id = this.solutionService.getGuid();
        querysolutionVO.code = ((this.presetQuerySolutionName != this.localeService.getValue("querySolution.container.sysPresetName")) ? this.presetQuerySolutionName : this.localeService.getValue("querySolution.container.defaultName")) + this.localeService.getValue("advancedMode.text.sysAdvancedName");
        ;
        querysolutionVO.queryConditions = [];
        querysolutionVO.belongId = this.formId;
        querysolutionVO.isSystem = true;
        querysolutionVO.type = 'pre';
        querysolutionVO.mode = '2';
        querysolutionVO.queryConditionsAdvanced = { relation: 1, items: [], children: [], path: [1], groupid: 1 };
        return querysolutionVO;
    };
    /**
     * 初始化来自LS的条件
     */
    /**
     * 初始化来自LS的条件
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.formatInitQuerySolution = /**
     * 初始化来自LS的条件
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var histroyCondition = this.httpService.getLS(this.historyRefer.schemeKeyLS);
        if (histroyCondition.length > 0) {
            /** @type {?} */
            var convertor = new QuerySolutionVoConvertor();
            this.historyRefer['foundSchme']['queryConditions'] = histroyCondition;
            // 规范化条件
            this.historyRefer['foundSchme'] = this.formatQuerySolutionVO(convertor, this.historyRefer['foundSchme']);
            // 更新配置
            this.solutionService.updateControl(this.historyRefer['foundSchme'], this.resetFieldConfigs);
            this.historyRefer.initCondition = true;
        }
    };
    /**
     * 保存之后更新历史
     */
    /**
     * 保存之后更新历史
     * @private
     * @param {?=} updateAll
     * @return {?}
     */
    QuerySolutionComponent.prototype.changeQueryHistroy = /**
     * 保存之后更新历史
     * @private
     * @param {?=} updateAll
     * @return {?}
     */
    function (updateAll) {
        if (updateAll === void 0) { updateAll = true; }
        if (!this.enableHistory || this.selectedSolution.mode !== '1') {
            return;
        }
        /** @type {?} */
        var preIndex = this.querySolutionVos.findIndex((/**
         * @param {?} qsolutionVO
         * @return {?}
         */
        function (qsolutionVO) {
            return qsolutionVO['type'] == 'pre';
        }));
        // 执行查询之后，上次查询的修改就不认为是变更了
        if (preIndex > -1) {
            this.querySolutionVos[preIndex]['isChanged'] = false;
        }
        if (this.selectedSolution['type'] == 'pre') {
            this.selectedSolution['isChanged'] = false;
        }
        /** @type {?} */
        var queryConditions = cloneDeep(this.selectedFieldConditions);
        this.historyRefer['foundSchme'].queryConditions = queryConditions;
        // 更新缓存
        this.httpService.setLS(this.historyRefer.schemeKeyLS, this.historyRefer['foundSchme'].queryConditions);
        if (updateAll) {
            // 发起请求保存历史记录
            this.httpService.saveHistroy(this.historyRefer['foundSchme'], this.sessionId).subscribe((/**
             * @return {?}
             */
            function () {
            }));
        }
    };
    /**
     * 处理iframe嵌套
     */
    /**
     * 处理iframe嵌套
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.getTopWindow = /**
     * 处理iframe嵌套
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var curWin = window.self;
        try {
            while (curWin.location.origin === curWin.parent.location.origin) {
                if (curWin !== curWin.parent && !((/** @type {?} */ (curWin))).isRTFTopWin) {
                    curWin = curWin.parent;
                }
                else {
                    break;
                }
            }
        }
        catch (e) { }
        return curWin;
    };
    /**
     * 设置key
     */
    /**
     * 设置key
     * @private
     * @return {?}
     */
    QuerySolutionComponent.prototype.setLSKey = /**
     * 设置key
     * @private
     * @return {?}
     */
    function () {
        // 获取window
        /** @type {?} */
        var curWindow = this.getTopWindow();
        /** @type {?} */
        var userCode = '';
        if (curWindow['gspframeworkService'] && curWindow['gspframeworkService'].hasOwnProperty('common')) {
            userCode = curWindow['gspframeworkService']['common'].userInfos.get().code;
        }
        this.historyRefer.schemeKeyLS = userCode ? 'Scheme' + this._idSer.encrypt(userCode + this.formId) : '';
    };
    // 判断当前用户是否有权限设置公共类型筛选方案
    // 判断当前用户是否有权限设置公共类型筛选方案
    /**
     * @param {?} e
     * @return {?}
     */
    QuerySolutionComponent.prototype.checkAuthority = 
    // 判断当前用户是否有权限设置公共类型筛选方案
    /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        if (e != 'private') {
            this.httpService.getAuth('QuerySolution', this.sessionId).subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (data) {
                    if (!data['success']) {
                        _this.solutionService.showInfo(_this.localeService.getValue('extendQuerySolution.auth.createError'), 'warning', '', 1500);
                        _this.saveAsDialog.authorityError = true;
                        _this.saveAsDialog.radioGroupValue = _this.saveAsDialog.pRadioGroupValue;
                    }
                    else {
                        if (e == 'org') {
                            /** @type {?} */
                            var orgData = data['authOrganizationData'];
                            if (Array.isArray(orgData) && orgData.length) {
                                _this.saveAsDialog.dataPermissionIds = orgData;
                                if (orgData.toString() != '*' && !_this.saveAsDialog.selectedOrgIds.length) {
                                    _this.saveAsDialog.selectedOrgIds = _this.saveAsDialog.dataPermissionIds;
                                }
                                _this.saveAsDialog.noDataAuthority = false;
                                _this.saveAsDialog.pRadioGroupValue = e;
                            }
                            else {
                                _this.solutionService.showInfo(_this.localeService.getValue('extendQuerySolution.auth.noDataAuthority'), 'warning', '', 1500);
                                _this.saveAsDialog.noDataAuthority = true;
                                _this.saveAsDialog.radioGroupValue = _this.saveAsDialog.pRadioGroupValue;
                            }
                        }
                        else {
                            _this.saveAsDialog.pRadioGroupValue = e;
                        }
                    }
                }
                else {
                    console.warn(_this.localeService.getValue('extendQuerySolution.auth.apiError'));
                }
            }));
        }
        else {
            this.saveAsDialog.pRadioGroupValue = e;
            this.saveAsDialog.authorityError = false;
        }
    };
    QuerySolutionComponent.decorators = [
        { type: Component, args: [{
                    selector: 'farris-querysolution',
                    template: "<div #querysolution class=\"farris-panel position-relative\" tabindex=\"1\" style=\"outline: none;\">\r\n    <div class=\"solution-header\">\r\n        <div class=\"btn-group mr-3\" fDropdown>\r\n            <div class=\"solution-header-title\" fDropdownToggle>               \r\n                <span style=\"max-width: 288px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap\"\r\n                    title=\"{{selectedSolution.code}}\">{{selectedSolution.code}}</span>\r\n                <b class=\"header-title--change\" *ngIf=\"selectedSolution.isChanged\">*</b>\r\n                <span class=\"f-icon f-accordion-expand\"></span>\r\n            </div>\r\n            <div class=\"query-solution dropdown-menu solution-header-title-menu\" fDropdownMenu>\r\n                <div class=\"solution-header-title-menu-inner\">\r\n                    <div class=\"solution-header-title-menu-arrow\"></div>\r\n                    <span class=\"solution-header-managerList-type ml-2 mb-2\" *ngIf=\"openAdvancedMode\">{{'advancedMode.text.standardMode' | locale}}</span>\r\n                    <li class=\"dropdown-item solution-header-dropdown-item\"\r\n                        [ngClass]=\"{'solution-header-dropdown-item-active': solution.id === selectedSolution.id }\"\r\n                        (click)=\"selectAndQuery(solution)\" *ngFor=\"let solution of querySolutionVos\">\r\n                        <b *ngIf=\"solution.isChanged\"  class=\"menu-item--change\" >*</b>\r\n                        <span class=\"solution-header-dropdown-item-title\" [title]=\"solution.code\">{{solution.code}}</span>\r\n                        <span class=\"solution-header-dropdown-item-tip\"\r\n                            [ngStyle]=\"getDefaultLabel(solution)\">{{'querySolution.container.default' | locale}}</span>\r\n                        <span class=\"solution-header-dropdown-item-public\" *ngIf=\"solution.type == 'public'\">\r\n                            {{'extendQuerySolution.public.label' | locale}}</span>\r\n                        <span class=\"solution-header-dropdown-item-public\" *ngIf=\"solution.type == 'org'\">\r\n                            {{'extendQuerySolution.org.label' | locale}}</span>\r\n                    </li>\r\n                    <!-- <li class=\"dropdown-item solution-header-dropdown-item-btns\" style=\"background-color: white!important;cursor: default;\">\r\n                        <span class=\"dropdown-item-btn\" *ngIf=\"showSaveButton\"\r\n                            (click)=\"save()\">{{'queryCondition.container.save' | locale}}</span>\r\n                        <span class=\"dropdown-item-btn\"\r\n                            (click)=\"saveAs()\">{{'queryCondition.container.saveAs' | locale}}</span>\r\n                        <span class=\"dropdown-item-btn\"\r\n                            (click)=\"openManangerDialog()\">{{'querySolution.container.manage' | locale}}</span>\r\n                    </li> -->\r\n                    <ng-container *ngIf=\"openAdvancedMode\">\r\n                        <span class=\"solution-header-managerList-type ml-2 mb-2\">{{'advancedMode.text.advancedMode' | locale}}</span>\r\n                        <li class=\"dropdown-item solution-header-dropdown-item\"\r\n                            [ngClass]=\"{'solution-header-dropdown-item-active': solution.id === selectedSolution.id }\"\r\n                            (click)=\"selectAndQuery(solution)\" *ngFor=\"let solution of querySolutionAdvancedVos\">\r\n                            <b *ngIf=\"solution.isChanged\" class=\"menu-item--change\">*</b>\r\n                            <span class=\"solution-header-dropdown-item-title\" [title]=\"solution.code\">{{solution.code}}</span>\r\n                            <span class=\"solution-header-dropdown-item-tip\"\r\n                                [ngStyle]=\"getDefaultLabel(solution)\">{{'querySolution.container.default' | locale}}</span>\r\n                            <span class=\"solution-header-dropdown-item-public\" *ngIf=\"solution.type == 'public'\">\r\n                                {{'extendQuerySolution.public.label' | locale}}</span>\r\n                            <span class=\"solution-header-dropdown-item-public\" *ngIf=\"solution.type == 'org'\">\r\n                                {{'extendQuerySolution.org.label' | locale}}</span>\r\n                        </li>\r\n                    </ng-container>\r\n                    <li class=\"dropdown-item solution-header-dropdown-item-btns\" style=\"background-color: white!important;cursor: default;\">\r\n                        <span class=\"dropdown-item-btn\" *ngIf=\"showSaveButton\"\r\n                            (click)=\"save()\">{{'queryCondition.container.save' | locale}}</span>\r\n                        <span class=\"dropdown-item-btn\"\r\n                            (click)=\"saveAs()\">{{'queryCondition.container.saveAs' | locale}}</span>\r\n                        <span class=\"dropdown-item-btn\"\r\n                            (click)=\"openManangerDialog()\">{{'querySolution.container.manage' | locale}}</span>\r\n                    </li>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"summary-condition\" *ngIf=\"isFold && summaryConditions.length > 0\">\r\n            <lib-summary-list [conditions]=\"summaryConditions\"></lib-summary-list>\r\n        </div>\r\n        <div class=\"solution-action\">\r\n            <div class=\"btn-group\" *ngIf=\"!isFold\">\r\n                <button *ngIf=\"isFold==false\" (click)=\"query()\" type=\"button\"\r\n                    class=\"btn btn-primary \">{{filterText}}</button>\r\n            </div>\r\n            <div class=\"icon-group\">\r\n                <!--\u6E05\u7A7A\u6309\u94AE-->\r\n                <span *ngIf=\"(!isFold || summaryConditions.length > 0) && selectedSolution.mode !== '2'\" class=\"icon-group-remove\" (click)=\"foldClearHandler()\"\r\n                    title=\"{{'querySolution.container.clear' | locale}}\">\r\n                    <span class=\"f-icon f-icon-remove\"></span>\r\n                </span>                \r\n                <ng-container *ngIf=\"!isFold\">\r\n                    <span class=\"divide\"></span>\r\n                    <!--\u914D\u7F6E\u6309\u94AE-->\r\n                    <span *ngIf=\"selectedSolution.mode !== '2'\" class=\"icon-group-setup\" (click)=\"openFieldConfigDialog()\"\r\n                        title=\"{{'queryCondition.container.config' | locale}}\">\r\n                        <span class=\"f-icon f-icon-home-setup\"></span>\r\n                    </span>\r\n                    <!--\u5C55\u5F00\u6536\u8D77-->\r\n                    <span class=\"icon-group-packup\" (click)=\"arrowClick()\"\r\n                        title=\"{{'querySolution.container.arrowUp' | locale}}\">\r\n                        <span class=\"f-icon f-icon-packup\"></span>\r\n                    </span>\r\n                </ng-container>\r\n                <!--\u5C55\u5F00\u6536\u8D77-->\r\n                <span *ngIf=\"isFold\" class=\"icon-group-packup\" (click)=\"arrowClick()\"\r\n                    title=\"{{'querySolution.container.arrowDown' | locale}}\">\r\n                    <span class=\"f-icon f-icon-packup\" style=\"transform: rotate(180deg);\"></span>\r\n                </span>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <farris-querycondition [ngClass]=\"{'d-none':isFold}\" #farrisQueryCondition\r\n            [(selectedFieldConditions)]=\"selectedFieldConditions\" [fieldConfigs]=\"fieldConfigs\"\r\n            [isControlInline]=\"isControlInline\" [showCompleteLabel]=\"showCompleteLabel\"\r\n            [isDisabled]=\"isDisabled\" [resetFieldConfigs]=\"resetFieldConfigs\"\r\n            [unformatFieldConfigs]=\"unformatFieldConfigs\"\r\n            (fieldConditionsChange)=\"fieldConditionsChangeHander($event)\"\r\n            [selectSolution]=\"selectedSolution\">\r\n        </farris-querycondition>\r\n    </div>\r\n\r\n    <app-solutionmanager #manageDialog (confirmEmitter)=\"managerConfirmHandler($event)\"></app-solutionmanager>\r\n    <app-saveasdialog #saveAsDialog\r\n        (confirmEmitter)=\"saveAsConfrimHandler($event)\"\r\n        (getAuthority)=\"checkAuthority($event)\"\r\n        [hideOrgselector]=\"hideOrgselector\"></app-saveasdialog>\r\n    <div *ngIf=\"isDisabled\" style=\"position:absolute;top:0;bottom:0;left:0;right:0;z-index: 99;\"></div>\r\n</div>",
                    encapsulation: ViewEncapsulation.None,
                    providers: [HttpService, ConvertorService, FieldConfigService],
                    styles: [".solution-action{float:right}.solution-action span{vertical-align:middle;margin:0 3px}.solution-action .divide{font-size:12px;padding:3px 0}.solution-header{height:30px;margin-bottom:5px;-webkit-box-pack:start;justify-content:flex-start}.solution-action .f-icon{cursor:pointer}.solution-action .icon-group{display:inline-block}.solution-header-title-text{overflow:initial!important}.query-solution .solution-header-dropdown-item .solution-header-dropdown-item-public{flex-shrink:0;height:1.125rem;min-width:2.5rem;padding:0 4px;line-height:1.125rem;font-size:.75rem;background:#2a87ff;color:#fff;border-radius:2px;text-align:center}.solution-header-managerList-type{font-weight:700}"]
                }] }
    ];
    /** @nocollapse */
    QuerySolutionComponent.ctorParameters = function () { return [
        { type: NotifyService },
        { type: ComponentFactoryResolver },
        { type: Injector },
        { type: BsModalService },
        { type: ConvertorService },
        { type: SolutionService },
        { type: HttpService },
        { type: FieldConfigService },
        { type: LocaleService }
    ]; };
    QuerySolutionComponent.propDecorators = {
        defaultConfigs: [{ type: Input }],
        fieldConfigs: [{ type: Input }],
        presetQuerySolutionName: [{ type: Input }],
        resetFieldConfigs: [{ type: Input }],
        presetFieldConfigs: [{ type: Input }],
        isDisabled: [{ type: Input }],
        formId: [{ type: Input }],
        queryEmitter: [{ type: Output }],
        cls: [{ type: HostBinding, args: ['class',] }],
        isFold: [{ type: Input }],
        isControlInline: [{ type: Input }],
        showCompleteLabel: [{ type: Input }],
        enableInitQuery: [{ type: Input }],
        enableHistory: [{ type: Input }],
        openAdvancedMode: [{ type: Input }],
        filterText: [{ type: Input }],
        queryAfterValueChange: [{ type: Input }],
        hideOrgselector: [{ type: Input }],
        farrisQueryCondition: [{ type: ViewChild, args: ['farrisQueryCondition',] }],
        manageDialog: [{ type: ViewChild, args: ['manageDialog',] }],
        saveAsDialog: [{ type: ViewChild, args: ['saveAsDialog',] }]
    };
    return QuerySolutionComponent;
}());
export { QuerySolutionComponent };
if (false) {
    /** @type {?} */
    QuerySolutionComponent.prototype._fieldConfigs;
    /** @type {?} */
    QuerySolutionComponent.prototype._presetFieldConfigs;
    /** @type {?} */
    QuerySolutionComponent.prototype._resetFieldConfigs;
    /**
     *  筛选方案默认值配置
     * @type {?}
     */
    QuerySolutionComponent.prototype.defaultConfigs;
    /**
     * 高级模式需要原始fieldConfigs，需要将范围类控件改为单值控件
     * @type {?}
     */
    QuerySolutionComponent.prototype.unformatFieldConfigs;
    /**
     * 系统预置查询方案名称
     * @type {?}
     */
    QuerySolutionComponent.prototype.presetQuerySolutionName;
    /**
     * 此值由设计器传入
     * 组件在设计时无法点击被禁用，true
     * 组件在运行时可以点击使用，false
     * @type {?}
     */
    QuerySolutionComponent.prototype.isDisabled;
    /**
     * 表单ID，必选字段，表示查询方案所属的表单
     * @type {?}
     */
    QuerySolutionComponent.prototype.formId;
    /**
     * sessionId
     * @type {?}
     */
    QuerySolutionComponent.prototype.sessionId;
    /**
     * 查询条件列表
     * @type {?}
     */
    QuerySolutionComponent.prototype.queryEmitter;
    /**
     * 查询方案cls
     * @type {?}
     */
    QuerySolutionComponent.prototype.cls;
    /**
     * 查询方案数据源
     * @type {?}
     */
    QuerySolutionComponent.prototype.querySolutionVos;
    /** @type {?} */
    QuerySolutionComponent.prototype.querySolutionAdvancedVos;
    /**
     * 当前所选的方案，有可能不是方案
     * @type {?}
     */
    QuerySolutionComponent.prototype.selectedSolution;
    /**
     * 是否折叠
     * @type {?}
     */
    QuerySolutionComponent.prototype.isFold;
    /**
     * label和控件是否排成一行，默认是；false时排成上下两行
     * @type {?}
     */
    QuerySolutionComponent.prototype.isControlInline;
    /**
     * 是否需要完整显示超过6个字符的标签，默认false
     * @type {?}
     */
    QuerySolutionComponent.prototype.showCompleteLabel;
    /**
     * 是否启用加载后查询
     * @type {?}
     */
    QuerySolutionComponent.prototype.enableInitQuery;
    /**
     * 默认方案
     * @type {?}
     */
    QuerySolutionComponent.prototype.defaultQuerySolution;
    /**
     * 选择的控件展示列表
     * @type {?}
     */
    QuerySolutionComponent.prototype.selectedFieldConditions;
    /**
     * visible属性为true的过滤条件，是变量selectedFieldConditions的子级
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.visibleSelectedConditions;
    /** @type {?} */
    QuerySolutionComponent.prototype.sysQuerySolutionVo;
    /** @type {?} */
    QuerySolutionComponent.prototype.showSaveButton;
    /** @type {?} */
    QuerySolutionComponent.prototype.isSetDefaultValue;
    /** @type {?} */
    QuerySolutionComponent.prototype.doneSetDefaultValue;
    /** @type {?} */
    QuerySolutionComponent.prototype.doneInitQuery;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.conditionVisibleState;
    /** @type {?} */
    QuerySolutionComponent.prototype.destroy$;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.templateSimpleConditions;
    /**
     * 组件服务接口
     * @type {?}
     */
    QuerySolutionComponent.prototype.solutionHandler;
    /** @type {?} */
    QuerySolutionComponent.prototype.cdf;
    /**
     * 条件概要
     * @type {?}
     */
    QuerySolutionComponent.prototype.summaryConditions;
    /** @type {?} */
    QuerySolutionComponent.prototype.eventManager;
    /**
     * 是否启用记录历史方式
     * 上次查询——不能删除、可以另存、不存在变更
     * 方案列表只有上次查询时，上次查询、系统默认都存在
     * 方案列表多个时，有上次查询，上次查询选中
     * 方案列表没有上次查询时，但是LocalStorage有,构造一个上次查询
     *
     * @type {?}
     */
    QuerySolutionComponent.prototype.enableHistory;
    /**
     * 是否启动高级模式
     * @type {?}
     */
    QuerySolutionComponent.prototype.openAdvancedMode;
    /** @type {?} */
    QuerySolutionComponent.prototype.filterText;
    /** @type {?} */
    QuerySolutionComponent.prototype.queryAfterValueChange;
    /** @type {?} */
    QuerySolutionComponent.prototype.hideOrgselector;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.historyRefer;
    /** @type {?} */
    QuerySolutionComponent.prototype.farrisQueryCondition;
    /** @type {?} */
    QuerySolutionComponent.prototype.manageDialog;
    /** @type {?} */
    QuerySolutionComponent.prototype.saveAsDialog;
    /** @type {?} */
    QuerySolutionComponent.prototype._self;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype._idSer;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.msgSer;
    /** @type {?} */
    QuerySolutionComponent.prototype.newSaveAsSolutionVo;
    /** @type {?} */
    QuerySolutionComponent.prototype.handleKeyDown;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.notify;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.convertService;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.solutionService;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.httpService;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.fieldConfigService;
    /**
     * @type {?}
     * @private
     */
    QuerySolutionComponent.prototype.localeService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlcnktc29sdXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvcXVlcnlzb2x1dGlvbi8iLCJzb3VyY2VzIjpbImxpYi9xdWVyeS1zb2x1dGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsT0FBTyxFQUNILFNBQVMsRUFBVSxpQkFBaUIsRUFBRSxXQUFXLEVBQW9CLHdCQUF3QixFQUM3RixRQUFRLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQTRCLGlCQUFpQixFQUN6SCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUM5RSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN4RixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDN0MsT0FBTyxFQUNVLGdCQUFnQixFQUFrQix1QkFBdUIsRUFBRSxlQUFlLEVBRTFGLE1BQU0sa0NBQWtDLENBQUM7QUFDMUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxjQUFjLEVBQWMsTUFBTSxrQkFBa0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDbkUsT0FBTyxFQUFFLHdCQUF3QixFQUFFLGVBQWUsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzdGLE9BQU8sRUFBeUIsMkJBQTJCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUN2RyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFP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Ozs7SUFRN0MsaURBQXVDOztJQUN2QyxxQ0FBdUI7Ozs7O0lBSXZCLG1EQUFzQjs7SUFDdEIsOENBQTJCOzs7Ozs7Ozs7O0lBUzNCLCtDQUF3Qzs7Ozs7SUFLeEMsa0RBQTJDOztJQUMzQyw0Q0FBNEY7O0lBQzVGLHVEQUErQzs7SUFDL0MsaURBQXlDOzs7OztJQUN6Qyw4Q0FLQzs7SUFFRCxzREFBaUY7O0lBQ2pGLDhDQUFtRTs7SUFDbkUsOENBQStEOztJQUMvRCx1Q0FBVzs7Ozs7SUFDWCx3Q0FBMEI7Ozs7O0lBQzFCLHdDQUFvQjs7SUFxZ0JwQixxREFxQkM7O0lBbVdELCtDQVdDOzs7OztJQXQ0Qlcsd0NBQTZCOzs7OztJQUFFLDBDQUEwQzs7Ozs7SUFBRSwwQ0FBMEI7Ozs7O0lBQzdHLDhDQUFvQzs7Ozs7SUFBRSxnREFBd0M7Ozs7O0lBQUUsaURBQXdDOzs7OztJQUN4SCw2Q0FBZ0M7Ozs7O0lBQUUsb0RBQThDOzs7OztJQUFFLCtDQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBDb21wb25lbnQsIE9uSW5pdCwgVmlld0VuY2Fwc3VsYXRpb24sIEhvc3RCaW5kaW5nLCBDb21wb25lbnRGYWN0b3J5LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXHJcbiAgICBJbmplY3RvciwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIEluamVjdEZsYWdzLCBFbGVtZW50UmVmLCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIENoYW5nZURldGVjdG9yUmVmLCBPbkRlc3Ryb3ksIE9wdGlvbmFsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFNhdmVBc0RpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vc2F2ZWFzZGlhbG9nL3NhdmVhc2RpYWxvZy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTb2x1dGlvbk1hbmFuZ2VyQ29tcG9uZW50IH0gZnJvbSAnLi9zb2x1dGlvbm1hbmFnZXIvc29sdXRpb25tYW5hZ2VyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xyXG5pbXBvcnQge1xyXG4gICAgRmllbGRDb25maWcsIENvbnZlcnRvclNlcnZpY2UsIFF1ZXJ5Q29uZGl0aW9uLCBRdWVyeUNvbmRpdGlvbkNvbXBvbmVudCwgUXVlcnlTb2x1dGlvblZvLFxyXG4gICAgU21hcnRIZWxwQ29udG9sLCBEcm9wRG93bkxpc3RDb250cm9sLCBDaGVja0JveENvbnRyb2wsIFJhZGlvQ29udHJvbCwgSW5wdXRHcm91cENvbnRyb2wsIFF1ZXJ5U29sdXRpb25FeHRlbmRWb1xyXG59IGZyb20gJ0BmYXJyaXMvY29tcG9uZW50LXF1ZXJ5Y29uZGl0aW9uJztcclxuaW1wb3J0IHsgTm90aWZ5U2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbm90aWZ5JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UsIEJzTW9kYWxSZWYgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvaHR0cHNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGaWVsZENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2UvZmllbGRjb25maWcuc2VydmljZSc7XHJcbmltcG9ydCB7IFF1ZXJ5U29sdXRpb25Wb0NvbnZlcnRvciwgU29sdXRpb25TZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy9jb21wb25lbnQtcXVlcnljb25kaXRpb24nO1xyXG5pbXBvcnQgeyBJUXVlcnlTb2x1dGlvbkhhbmRsZXIsIFFVRVJZU09MVVRJT05fSEFORExFUl9UT0tFTiB9IGZyb20gJy4vaW50ZXJmYWNlL0lRdWVyeVNvbHV0aW9uSGFuZGxlcic7XHJcbmltcG9ydCB7IExvY2FsZVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWxvY2FsZSc7XHJcbmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaC1lcyc7XHJcbmltcG9ydCB7IFNvbHV0aW9uQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlL3NvbHV0aW9uLmNhY2hlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEZWZhdWx0Q29uZmlncyB9IGZyb20gJy4vaW50ZXJmYWNlL0RlZmF1bHRDb25maWdzJztcclxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XHJcbmltcG9ydCB7IElkU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktY29tbW9uJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBvZiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBzd2l0Y2hNYXAsIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBFWFRFTkRfUVVFUllTT0xVVElPTl9MT0NBTEUgfSBmcm9tICcuL3V0aWxzL2V4dGVuZC1sb2NhbGUnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuXHJcbmRlY2xhcmUgdmFyIGdzcGZyYW1ld29ya1NlcnZpY2U6IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdmYXJyaXMtcXVlcnlzb2x1dGlvbicsXHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vcXVlcnktc29sdXRpb24uY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vcXVlcnktc29sdXRpb24uY29tcG9uZW50LmNzcyddLFxyXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAgIHByb3ZpZGVyczogW0h0dHBTZXJ2aWNlLCBDb252ZXJ0b3JTZXJ2aWNlLCBGaWVsZENvbmZpZ1NlcnZpY2VdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBRdWVyeVNvbHV0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XHJcblxyXG4gICAgX2ZpZWxkQ29uZmlnczogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gW107XHJcbiAgICBfcHJlc2V0RmllbGRDb25maWdzOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBbXTtcclxuICAgIF9yZXNldEZpZWxkQ29uZmlnczogQXJyYXk8YW55PiA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOetm+mAieaWueahiOm7mOiupOWAvOmFjee9rlxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKVxyXG4gICAgZGVmYXVsdENvbmZpZ3M6IERlZmF1bHRDb25maWdzO1xyXG4gICAgLyoqXHJcbiAgICAgKiDlrZfmrrXphY3nva7mlbDmja7mupDvvIznlKjkuo7pgInmi6nlrZfmrrXphY3nva5cclxuICAgICAqL1xyXG4gICAgQElucHV0KClcclxuICAgIHNldCBmaWVsZENvbmZpZ3MoZmllbGRDb25maWdKc29uOiBBcnJheTxhbnk+KSB7XHJcbiAgICAgICAgdGhpcy5fZmllbGRDb25maWdzID0gdGhpcy5zb2x1dGlvblNlcnZpY2UuY29udmVydFRvUXVlcnlDb25kaXRpb25zKGZpZWxkQ29uZmlnSnNvbik7XHJcbiAgICAgICAgdGhpcy51bmZvcm1hdEZpZWxkQ29uZmlncyA9IGZpZWxkQ29uZmlnSnNvblxyXG4gICAgfVxyXG4gICAgZ2V0IGZpZWxkQ29uZmlncygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmllbGRDb25maWdzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6auY57qn5qih5byP6ZyA6KaB5Y6f5aeLZmllbGRDb25maWdz77yM6ZyA6KaB5bCG6IyD5Zu057G75o6n5Lu25pS55Li65Y2V5YC85o6n5Lu2XHJcbiAgICAgKi9cclxuICAgIHVuZm9ybWF0RmllbGRDb25maWdzOiBBcnJheTxhbnk+ID0gW11cclxuICAgIC8qKlxyXG4gICAgICog57O757uf6aKE572u5p+l6K+i5pa55qGI5ZCN56ewXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIHByZXNldFF1ZXJ5U29sdXRpb25OYW1lOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBcclxuICAgIHNldCByZXNldEZpZWxkQ29uZmlncyhyZXNldEZpZWxkQ29uZmlnSnNvbjogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIGlmKCFyZXNldEZpZWxkQ29uZmlnSnNvbiB8fCAhQXJyYXkuaXNBcnJheShyZXNldEZpZWxkQ29uZmlnSnNvbikgfHwgcmVzZXRGaWVsZENvbmZpZ0pzb24ubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDop4TojIPmlbDmja5cclxuICAgICAgICBsZXQgZm9ybWF0UmVzZXRDb25maWdKc29uOiBBcnJheTxhbnk+ID0gcmVzZXRGaWVsZENvbmZpZ0pzb24ubWFwKHRDb25maWdJdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IGZpbmRJdGVtID0gdGhpcy5maWVsZENvbmZpZ3MuZmluZChwcmVzZXRJdGVtID0+IHByZXNldEl0ZW1bJ2ZpZWxkQ29kZSddID09IHRDb25maWdJdGVtWydsYWJlbENvZGUnXSk7XHJcbiAgICAgICAgICAgIGlmKGZpbmRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZighdENvbmZpZ0l0ZW0uaGFzT3duUHJvcGVydHkoJ2NvbnRyb2wnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRDb25maWdJdGVtWydjb250cm9sJ10gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRDb25maWdJdGVtWydjb250cm9sJ11bJ2NvbnRyb2x0eXBlJ10gPSBmaW5kSXRlbS5jb250cm9sLmdldENvbnRyb2xUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdENvbmZpZ0l0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9yZXNldEZpZWxkQ29uZmlncyA9IHRoaXMuc29sdXRpb25TZXJ2aWNlLmNvbnZlcnRUb1NpbXBsZVF1ZXJ5Q29uZGl0aW9ucyhmb3JtYXRSZXNldENvbmZpZ0pzb24uZmlsdGVyKGl0ZW0gPT4gaXRlbSkpO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9yZXNldEZpZWxkQ29uZmlncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29uZGl0aW9uVmlzaWJsZVN0YXRlKHRoaXMuX3Jlc2V0RmllbGRDb25maWdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5pu05paw5bey5pyJ6YWN572uXHJcbiAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2UudXBkYXRlQ29udHJvbCh0aGlzLl9wcmVzZXRGaWVsZENvbmZpZ3MsIHRoaXMuX3Jlc2V0RmllbGRDb25maWdzKTtcclxuICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS51cGRhdGVDb250cm9sKHRoaXMuX2ZpZWxkQ29uZmlncywgdGhpcy5fcmVzZXRGaWVsZENvbmZpZ3MpO1xyXG4gICAgICAgIHRoaXMuX2ZpZWxkQ29uZmlncyA9IHRoaXMuX2ZpZWxkQ29uZmlncy5zbGljZSgpO1xyXG4gICAgICAgIC8vIOabtOaWsOW3suacieeahOaWueahiFxyXG4gICAgICAgIHRoaXMuc3lzUXVlcnlTb2x1dGlvblZvICYmIHRoaXMuc29sdXRpb25TZXJ2aWNlLnVwZGF0ZUNvbnRyb2wodGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8ucXVlcnlDb25kaXRpb25zLCB0aGlzLl9yZXNldEZpZWxkQ29uZmlncyk7XHJcbiAgICAgICAgLy8g5pu05paw5Y6G5Y+y6K6w5b2VXHJcbiAgICAgICAgdGhpcy5oaXN0b3J5UmVmZXJbJ2ZvdW5kU2NobWUnXSAmJiB0aGlzLnNvbHV0aW9uU2VydmljZS51cGRhdGVDb250cm9sKHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ10ucXVlcnlDb25kaXRpb25zLCB0aGlzLl9yZXNldEZpZWxkQ29uZmlncyk7XHJcbiAgICAgICAgLy8g5pu05paw5bey6YCJXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNvbHV0aW9uICYmIHRoaXMuc29sdXRpb25TZXJ2aWNlLnVwZGF0ZUNvbnRyb2wodGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucywgdGhpcy5fcmVzZXRGaWVsZENvbmZpZ3MpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlc2V0RmllbGRDb25maWdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNldEZpZWxkQ29uZmlncztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aKE572u5p+l6K+i5a2X5q61XHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpXHJcbiAgICBzZXQgcHJlc2V0RmllbGRDb25maWdzKHByZXNldEZpZWxkQ29uZmlnSnNvbjogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIHRoaXMuX3ByZXNldEZpZWxkQ29uZmlncyA9IHRoaXMuc29sdXRpb25TZXJ2aWNlLmNvbnZlcnRUb1F1ZXJ5Q29uZGl0aW9ucyhwcmVzZXRGaWVsZENvbmZpZ0pzb24pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHByZXNldEZpZWxkQ29uZmlncygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcHJlc2V0RmllbGRDb25maWdzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5q2k5YC855Sx6K6+6K6h5Zmo5Lyg5YWlXHJcbiAgICAgKiDnu4Tku7blnKjorr7orqHml7bml6Dms5Xngrnlh7vooqvnpoHnlKjvvIx0cnVlXHJcbiAgICAgKiDnu4Tku7blnKjov5DooYzml7blj6/ku6Xngrnlh7vkvb/nlKjvvIxmYWxzZVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBpc0Rpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOihqOWNlUlE77yM5b+F6YCJ5a2X5q6177yM6KGo56S65p+l6K+i5pa55qGI5omA5bGe55qE6KGo5Y2VXHJcbiAgICAgKi9cclxuICAgIEBJbnB1dCgpIGZvcm1JZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2Vzc2lvbklkXHJcbiAgICAgKi9cclxuICAgIHNlc3Npb25JZDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l6K+i5p2h5Lu25YiX6KGoXHJcbiAgICAgKi9cclxuICAgIEBPdXRwdXQoKSBxdWVyeUVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxBcnJheTxRdWVyeUNvbmRpdGlvbj4+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6Xor6LmlrnmoYhjbHNcclxuICAgICAqL1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGNscyA9ICdxdWVyeS1zb2x1dGlvbic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6Xor6LmlrnmoYjmlbDmja7mupBcclxuICAgICAqL1xyXG4gICAgcXVlcnlTb2x1dGlvblZvczogQXJyYXk8UXVlcnlTb2x1dGlvblZvPiA9IG5ldyBBcnJheTxRdWVyeVNvbHV0aW9uVm8+KCk7XHJcbiAgICBxdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3M6IEFycmF5PFF1ZXJ5U29sdXRpb25Wbz4gPSBuZXcgQXJyYXk8UXVlcnlTb2x1dGlvblZvPigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5b2T5YmN5omA6YCJ55qE5pa55qGI77yM5pyJ5Y+v6IO95LiN5piv5pa55qGIXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGVkU29sdXRpb246IFF1ZXJ5U29sdXRpb25WbyA9IG5ldyBRdWVyeVNvbHV0aW9uVm8oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuaKmOWPoFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBpc0ZvbGQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGxhYmVs5ZKM5o6n5Lu25piv5ZCm5o6S5oiQ5LiA6KGM77yM6buY6K6k5piv77ybZmFsc2Xml7bmjpLmiJDkuIrkuIvkuKTooYxcclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgaXNDb250cm9sSW5saW5lOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpumcgOimgeWujOaVtOaYvuekuui2hei/hzbkuKrlrZfnrKbnmoTmoIfnrb7vvIzpu5jorqRmYWxzZVxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBzaG93Q29tcGxldGVMYWJlbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm5ZCv55So5Yqg6L295ZCO5p+l6K+iXHJcbiAgICAqL1xyXG4gICAgQElucHV0KCkgZW5hYmxlSW5pdFF1ZXJ5OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAvKipcclxuICAgICAqIOm7mOiupOaWueahiFxyXG4gICAgICovXHJcbiAgICBkZWZhdWx0UXVlcnlTb2x1dGlvbjogUXVlcnlTb2x1dGlvblZvO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5oup55qE5o6n5Lu25bGV56S65YiX6KGoXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdGVkRmllbGRDb25kaXRpb25zOiBBcnJheTxRdWVyeUNvbmRpdGlvbj4gPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB2aXNpYmxl5bGe5oCn5Li6dHJ1ZeeahOi/h+a7pOadoeS7tu+8jOaYr+WPmOmHj3NlbGVjdGVkRmllbGRDb25kaXRpb25z55qE5a2Q57qnXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdmlzaWJsZVNlbGVjdGVkQ29uZGl0aW9uczogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG5cclxuICAgIHN5c1F1ZXJ5U29sdXRpb25WbzogUXVlcnlTb2x1dGlvblZvO1xyXG5cclxuICAgIHNob3dTYXZlQnV0dG9uOiBib29sZWFuO1xyXG5cclxuICAgIC8v5pa55qGI5piv5ZCm6LWL6buY6K6k5YC8XHJcbiAgICBpc1NldERlZmF1bHRWYWx1ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8v5pa55qGI5piv5ZCm5bey6LWL6buY6K6k5YC8XHJcbiAgICBkb25lU2V0RGVmYXVsdFZhbHVlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLy/mmK/lkKblt7LlrozmiJDoh6rliqjmn6Xor6LvvIzpu5jorqTlgLzkuLp0cnVl77yM5b2TZW5hYmxlSW5pdFF1ZXJ56L6T5YWl5YC85Li6dHJ1ZeaXtu+8jOmmluasoeaJp+ihjG5nT25jaGFuZ2VzKCnml7blsIblhbborr7kuLpmYWxzZVxyXG4gICAgZG9uZUluaXRRdWVyeTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgLy/lrZfmrrXmmL7npLrpmpDol4/liqjmgIHnirbmgIFcclxuICAgIHByaXZhdGUgY29uZGl0aW9uVmlzaWJsZVN0YXRlOiBCZWhhdmlvclN1YmplY3Q8YW55PiA9IG5ldyBCZWhhdmlvclN1YmplY3QoW10pO1xyXG4gICAgLy/ooajljZXlhbPpl63ml7blgZzmraLnm5HlkKxCZWhhdmlvclN1YmplY3Tnm7jlhbNcclxuICAgIGRlc3Ryb3kkOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcblxyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZVNpbXBsZUNvbmRpdGlvbnM6IEFycmF5PGFueT47XHJcblxyXG4gICAgLy/nrZvpgInmjInpkq7mmK/lkKblnKjnlYzpnaLlj7PkvqdcclxuICAgIC8vcXVlcnlCdXR0b25PblJpZ2h0OiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOe7hOS7tuacjeWKoeaOpeWPo1xyXG4gICAgKi9cclxuICAgIHNvbHV0aW9uSGFuZGxlcjogSVF1ZXJ5U29sdXRpb25IYW5kbGVyO1xyXG4gICAgY2RmOiBDaGFuZ2VEZXRlY3RvclJlZjtcclxuICAgIC8qKlxyXG4gICAgICog5p2h5Lu25qaC6KaBXHJcbiAgICAgKi9cclxuICAgIHN1bW1hcnlDb25kaXRpb25zID0gW11cclxuICAgIGV2ZW50TWFuYWdlcjogRXZlbnRNYW5hZ2VyO1xyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKblkK/nlKjorrDlvZXljoblj7LmlrnlvI9cclxuICAgICAqIOS4iuasoeafpeivouKAlOKAlOS4jeiDveWIoOmZpOOAgeWPr+S7peWPpuWtmOOAgeS4jeWtmOWcqOWPmOabtFxyXG4gICAgICog5pa55qGI5YiX6KGo5Y+q5pyJ5LiK5qyh5p+l6K+i5pe277yM5LiK5qyh5p+l6K+i44CB57O757uf6buY6K6k6YO95a2Y5ZyoXHJcbiAgICAgKiDmlrnmoYjliJfooajlpJrkuKrml7bvvIzmnInkuIrmrKHmn6Xor6LvvIzkuIrmrKHmn6Xor6LpgInkuK1cclxuICAgICAqIOaWueahiOWIl+ihqOayoeacieS4iuasoeafpeivouaXtu+8jOS9huaYr0xvY2FsU3RvcmFnZeaciSzmnoTpgKDkuIDkuKrkuIrmrKHmn6Xor6JcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBASW5wdXQoKSBlbmFibGVIaXN0b3J5OiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmmK/lkKblkK/liqjpq5jnuqfmqKHlvI9cclxuICAgICAqL1xyXG4gICAgQElucHV0KCkgb3BlbkFkdmFuY2VkTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgQElucHV0KCkgZmlsdGVyVGV4dDogc3RyaW5nID0gdGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicXVlcnlDb25kaXRpb24uY29udGFpbmVyLnF1ZXJ5XCIpO1xyXG4gICAgQElucHV0KCkgcXVlcnlBZnRlclZhbHVlQ2hhbmdlOiBib29sZWFuID0gZmFsc2VcclxuICAgIEBJbnB1dCgpIGhpZGVPcmdzZWxlY3RvcjogYm9vbGVhbiA9IGZhbHNlXHJcbiAgICBwcml2YXRlIGhpc3RvcnlSZWZlciA9IHtcclxuICAgICAgICBzY2hlbWVLZXk6ICcnLC8vIOWOhuWPsuiusOW9lXNjaGVtZVxyXG4gICAgICAgIGZvdW5kU2NobWU6IG51bGwsLy8g5Y6G5Y+y5pa55qGI5L+d5a2YXHJcbiAgICAgICAgc2NoZW1lS2V5TFM6ICcnLC8vTG9jYWxTdG9yYWdlIOWOhuWPsuiusOW9leagh+iusFxyXG4gICAgICAgIGluaXRDb25kaXRpb246IGZhbHNlLy9Mb2NhbFN0b3JhZ2XmmK/lkKbmjInnhafmiafooYzlrozmn6Xor6JcclxuICAgIH1cclxuXHJcbiAgICBAVmlld0NoaWxkKCdmYXJyaXNRdWVyeUNvbmRpdGlvbicpIGZhcnJpc1F1ZXJ5Q29uZGl0aW9uOiBRdWVyeUNvbmRpdGlvbkNvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ21hbmFnZURpYWxvZycpIG1hbmFnZURpYWxvZzogU29sdXRpb25NYW5hbmdlckNvbXBvbmVudDtcclxuICAgIEBWaWV3Q2hpbGQoJ3NhdmVBc0RpYWxvZycpIHNhdmVBc0RpYWxvZzogU2F2ZUFzRGlhbG9nQ29tcG9uZW50O1xyXG4gICAgX3NlbGY6IGFueTtcclxuICAgIHByaXZhdGUgX2lkU2VyOiBJZFNlcnZpY2U7XHJcbiAgICBwcml2YXRlIG1zZ1NlcjogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbm90aWZ5OiBOb3RpZnlTZXJ2aWNlLCBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSwgcHJpdmF0ZSBjb252ZXJ0U2VydmljZTogQ29udmVydG9yU2VydmljZSwgcHJpdmF0ZSBzb2x1dGlvblNlcnZpY2U6IFNvbHV0aW9uU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGh0dHBTZXJ2aWNlOiBIdHRwU2VydmljZSwgcHJpdmF0ZSBmaWVsZENvbmZpZ1NlcnZpY2U6IEZpZWxkQ29uZmlnU2VydmljZSwgcHJpdmF0ZSBsb2NhbGVTZXJ2aWNlOiBMb2NhbGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5faWRTZXIgPSBuZXcgSWRTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5zb2x1dGlvbkhhbmRsZXIgPSB0aGlzLmluamVjdG9yLmdldDxJUXVlcnlTb2x1dGlvbkhhbmRsZXI+KFFVRVJZU09MVVRJT05fSEFORExFUl9UT0tFTiwgbnVsbCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xyXG4gICAgICAgIHRoaXMubXNnU2VyID0gdGhpcy5pbmplY3Rvci5nZXQoTWVzc2FnZXJTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLl9zZWxmID0gdGhpcy5pbmplY3Rvci5nZXQoRWxlbWVudFJlZik7XHJcbiAgICAgICAgdGhpcy5jZGYgPSB0aGlzLmluamVjdG9yLmdldChDaGFuZ2VEZXRlY3RvclJlZik7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmluamVjdG9yLmdldChFdmVudE1hbmFnZXIpO1xyXG4gICAgICAgIGlmKCF0aGlzLmxvY2FsZVNlcnZpY2UubGFuZ0RhdGFbJ2V4dGVuZFF1ZXJ5U29sdXRpb24nXSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsZVNlcnZpY2Uuc2V0TG9jYWxlRGF0YShFWFRFTkRfUVVFUllTT0xVVElPTl9MT0NBTEUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9zZWxmLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVLZXlEb3duKTtcclxuICAgICAgICAvL3RoaXMucmVtb3ZlQ3VycmVudFNvbHV0aW9uQ2FjaGUoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjaGFuZ2VzWydkZWZhdWx0Q29uZmlncyddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZXREZWZhdWx0VmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlc1snZGVmYXVsdENvbmZpZ3MnXS5jdXJyZW50VmFsdWUgJiYgIWNoYW5nZXNbJ2RlZmF1bHRDb25maWdzJ10uZmlyc3RDaGFuZ2UpIHsvL+iuvuiuoeaXtuS4jeS8mue7mWRlZmF1bHRDb25maWdz6LWL5YC8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFF1ZXJ5Q29uZGl0aW9uVmFsdWVzKGNoYW5nZXNbJ2RlZmF1bHRDb25maWdzJ10uY3VycmVudFZhbHVlLCB0aGlzLnNlbGVjdGVkU29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0QXV0b1F1ZXJ5KHRoaXMuc2VsZWN0ZWRTb2x1dGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYW5nZXNbJ2VuYWJsZUluaXRRdWVyeSddICYmIGNoYW5nZXNbJ2VuYWJsZUluaXRRdWVyeSddLmZpcnN0Q2hhbmdlICYmIGNoYW5nZXNbJ2VuYWJsZUluaXRRdWVyeSddLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRvbmVJbml0UXVlcnkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu4Tku7bliJ3lp4vljJZcclxuICAgICAqL1xyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy/lj6rlnKjov5DooYzml7Yg6I635Y+Wc2Vzc2lvbklk77yM5p+l6K+i5bey5a2Y5YKo5pa55qGIXHJcbiAgICAgICAgdGhpcy5pbml0U3lzUXVlcnlTb2x1dGlvbigpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkID0gdGhpcy5zb2x1dGlvbkhhbmRsZXIuZ2V0VXNlclNlc3Npb25JZCgpO1xyXG4gICAgICAgICAgICAvLyDnvJPlrZjljoblj7LmlrnmoYhcclxuICAgICAgICAgICAgdGhpcy5pbml0QXV0b1F1ZXJ5QnlMUygpO1xyXG4gICAgICAgICAgICAvLyDliqDovb3mlrnmoYjliJfooahcclxuICAgICAgICAgICAgdGhpcy5sb2FkUXVlcnlTb2x1dGlvbnMoKTtcclxuICAgICAgICAgICAgLy/ms6jlhozplK7nm5jnm5HlkKzkuovku7ZcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5LZXlCb2FyZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmdldENvbmRpdGlvblZpc2libGVTdGF0ZSgpLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKHNpbXBsZUNvbmRpdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmllbGRQYXJhbXMoc2ltcGxlQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVTaW1wbGVDb25kaXRpb25zID0gc2ltcGxlQ29uZGl0aW9ucztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlbGVjdGVkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMuZmlsdGVyKChpdGVtOiBRdWVyeUNvbmRpdGlvbikgPT4geyByZXR1cm4gISFpdGVtLnZpc2libGUgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndoZW5Gb2xkU2V0U3VtbWFyeUNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICF0aGlzLmlzRGlzYWJsZWQgJiYgdGhpcy5zb2x1dGlvbkhhbmRsZXIuc2V0Q3VycmVudFF1ZXJ5Q29uZGl0aW9ucyhjbG9uZURlZXAodGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8v6K6+6K6h5pe25Y+q5Yqg6L2957O757uf6aKE572u5pa55qGIXHJcbiAgICAgICAgICAgIHRoaXMubG9hZFN5c1F1ZXJ5U29sdXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFN5c1F1ZXJ5U29sdXRpb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJlc2V0UXVlcnlTb2x1dGlvbk5hbWUgJiYgdGhpcy5wcmVzZXRRdWVyeVNvbHV0aW9uTmFtZSAhPSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLnN5c1F1ZXJ5U29sdXRpb25WbyA9IG5ldyBRdWVyeVNvbHV0aW9uVm8oKTtcclxuICAgICAgICAgICAgdGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8uaWQgPSB0aGlzLnNvbHV0aW9uU2VydmljZS5nZXRHdWlkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3lzUXVlcnlTb2x1dGlvblZvLmNvZGUgPSAodGhpcy5wcmVzZXRRdWVyeVNvbHV0aW9uTmFtZSAhPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5zeXNQcmVzZXROYW1lXCIpKSA/IHRoaXMucHJlc2V0UXVlcnlTb2x1dGlvbk5hbWUgOiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5kZWZhdWx0TmFtZVwiKTtcclxuICAgICAgICAgICAgdGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8ucXVlcnlDb25kaXRpb25zID0gY2xvbmVEZWVwKHRoaXMucHJlc2V0RmllbGRDb25maWdzKTtcclxuICAgICAgICAgICAgdGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8uYmVsb25nSWQgPSB0aGlzLmZvcm1JZDtcclxuICAgICAgICAgICAgdGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8uaXNTeXN0ZW0gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN5c1F1ZXJ5U29sdXRpb25Wby5tb2RlID0gJzEnO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MucHVzaCh0aGlzLnN5c1F1ZXJ5U29sdXRpb25Wbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L2957O757uf6aKE572u5pa55qGIXHJcbiAgICAgKi9cclxuICAgIGxvYWRTeXNRdWVyeVNvbHV0aW9uKCkge1xyXG4gICAgICAgIHRoaXMucXVlcnlTb2x1dGlvblZvcy5wdXNoKHRoaXMuc3lzUXVlcnlTb2x1dGlvblZvKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSBjbG9uZURlZXAodGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8pO1xyXG4gICAgICAgIHRoaXMubG9hZFF1ZXJ5Q29uZGl0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6KeE6IyD5pa55qGI5p2h5Lu2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9ybWF0UXVlcnlTb2x1dGlvblZPKHRDb252ZXJ0b3I6IFF1ZXJ5U29sdXRpb25Wb0NvbnZlcnRvciwgZWxlbWVudCwgZnJvbUpvYmplY3QgPSBmYWxzZSk6IFF1ZXJ5U29sdXRpb25WbyB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5c29sdXRpb25WTzogUXVlcnlTb2x1dGlvblZvO1xyXG4gICAgICAgIGxldCBzb3VyY2VEYXRhOiBhbnk7XHJcbiAgICAgICAgbGV0IF9maWVsZENvZGVBcnI6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgICAgICBsZXQgX3RRdWVyeUNvbmRpdGlvbnM6IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPjtcclxuICAgICAgICBpZiAoZnJvbUpvYmplY3QpIHtcclxuICAgICAgICAgICAgcXVlcnlzb2x1dGlvblZPID0gdENvbnZlcnRvci5pbml0RnJvbUpvYmplY3QoZWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcXVlcnlzb2x1dGlvblZPID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maWVsZENvbmZpZ3MuZm9yRWFjaChfaXRlbSA9PiB7IF9maWVsZENvZGVBcnIucHVzaChfaXRlbS5maWVsZENvZGUpIH0pO1xyXG4gICAgICAgIGlmIChxdWVyeXNvbHV0aW9uVk8gJiYgcXVlcnlzb2x1dGlvblZPLnF1ZXJ5Q29uZGl0aW9ucyAmJiBxdWVyeXNvbHV0aW9uVk8ucXVlcnlDb25kaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy/oi6XooajljZXkuIrliKDpmaTkuobmn5DkuKrlrZfmrrXvvIzkvYblt7Lkv53lrZjnmoToh6rlrprkuYnmlrnmoYjkuK3ljIXlkKvor6XlrZfmrrXml7bvvIzlnKjliqDovb3mlrnmoYjov4fnqIvkuK3lsIbor6XlrZfmrrXliZTpmaRcclxuICAgICAgICAgICAgX3RRdWVyeUNvbmRpdGlvbnMgPSBxdWVyeXNvbHV0aW9uVk8ucXVlcnlDb25kaXRpb25zLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9maWVsZENvZGVBcnIuaW5kZXhPZihlbGVtZW50LmZpZWxkQ29kZSkgPiAtMTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnMgPSBfdFF1ZXJ5Q29uZGl0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8v5a+56Ieq5a6a5LmJ5pa55qGI55qE5Zu96ZmF5YyW5L+h5oGv44CB5biu5Yqp5o6n5Lu255qE5biu5Yqp5YmN5Y+K5biu5Yqp5ZCO5LqL5Lu26L+b6KGM5Yqo5oCB6LWL5YC8XHJcbiAgICAgICAgICAgIHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZURhdGEgPSB0aGlzLmZpZWxkQ29uZmlncy5maW5kKF9pdGVtID0+IF9pdGVtLmZpZWxkQ29kZSA9PSBlbGVtZW50LmZpZWxkQ29kZSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmZpZWxkTmFtZSA9IHNvdXJjZURhdGEuZmllbGROYW1lO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wbGFjZUhvbGRlciA9IHNvdXJjZURhdGEucGxhY2VIb2xkZXI7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmJlZ2luUGxhY2VIb2xkZXIgPSBzb3VyY2VEYXRhLmhhc093blByb3BlcnR5KCdiZWdpblBsYWNlSG9sZGVyJykgPyBzb3VyY2VEYXRhWydiZWdpblBsYWNlSG9sZGVyJ10gOiAnJztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZW5kUGxhY2VIb2xkZXIgPSBzb3VyY2VEYXRhLmhhc093blByb3BlcnR5KCdlbmRQbGFjZUhvbGRlcicpID8gc291cmNlRGF0YVsnZW5kUGxhY2VIb2xkZXInXSA6ICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlRGF0YS5jb250cm9sLnByZUV2ZW50Q21kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnQuY29udHJvbCBhcyBTbWFydEhlbHBDb250b2wpLnByZUV2ZW50Q21kID0gc291cmNlRGF0YS5jb250cm9sLnByZUV2ZW50Q21kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZURhdGEuY29udHJvbC5wb3N0RXZlbnRDbWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAoZWxlbWVudC5jb250cm9sIGFzIFNtYXJ0SGVscENvbnRvbCkucG9zdEV2ZW50Q21kID0gc291cmNlRGF0YS5jb250cm9sLnBvc3RFdmVudENtZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VEYXRhLmNvbnRyb2wuY2xlYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAoZWxlbWVudC5jb250cm9sIGFzIFNtYXJ0SGVscENvbnRvbCkuY2xlYXIgPSBzb3VyY2VEYXRhLmNvbnRyb2wuY2xlYXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlRGF0YS5jb250cm9sLmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnQuY29udHJvbCBhcyBJbnB1dEdyb3VwQ29udHJvbCkuY2xpY2sgPSBzb3VyY2VEYXRhLmNvbnRyb2wuY2xpY2s7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihzb3VyY2VEYXRhLmNvbnRyb2wuYmVmb3JlU2hvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIChlbGVtZW50LmNvbnRyb2wgYXMgRHJvcERvd25MaXN0Q29udHJvbCkuYmVmb3JlU2hvdyA9IHNvdXJjZURhdGEuY29udHJvbC5iZWZvcmVTaG93O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoc291cmNlRGF0YS5jb250cm9sLmJlZm9yZUhpZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAoZWxlbWVudC5jb250cm9sIGFzIERyb3BEb3duTGlzdENvbnRyb2wpLmJlZm9yZUhpZGUgPSBzb3VyY2VEYXRhLmNvbnRyb2wuYmVmb3JlSGlkZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHNvdXJjZURhdGEuY29udHJvbC5kYXRlQ2hhbmdlZENtZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIChlbGVtZW50LmNvbnRyb2wgYXMgYW55KS5kYXRlQ2hhbmdlZENtZCA9IHNvdXJjZURhdGEuY29udHJvbC5kYXRlQ2hhbmdlZENtZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VEYXRhLmNvbnRyb2wuZW51bVZhbHVlcyAmJiBzb3VyY2VEYXRhLmNvbnRyb2wuZW51bVZhbHVlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnQuY29udHJvbCBhcyBEcm9wRG93bkxpc3RDb250cm9sKS5lbnVtVmFsdWVzID0gc291cmNlRGF0YS5jb250cm9sLmVudW1WYWx1ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnQuY29udHJvbCBhcyBSYWRpb0NvbnRyb2wpLmVudW1WYWx1ZXMgPSBzb3VyY2VEYXRhLmNvbnRyb2wuZW51bVZhbHVlcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VEYXRhLmNvbnRyb2wuZGF0YSAmJiBzb3VyY2VEYXRhLmNvbnRyb2wuZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnQuY29udHJvbCBhcyBDaGVja0JveENvbnRyb2wpLmRhdGEgPSBzb3VyY2VEYXRhLmNvbnRyb2wuZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8v5Zyo5q2k5aSEcXVlcnljb25kaXRpb27lpITnkIblrozmr5XvvIzpnIDopoHlsIZxdWVyeWNvbmRpdGlvbuWGheWuueWhq+WFheiHs3F1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkXHJcbiAgICAgICAgICAgIGlmKHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IF9xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZCA9IHRDb252ZXJ0b3IuY29tcGxpY2F0ZVRyZWVEYXRhKHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZCwgcXVlcnlzb2x1dGlvblZPLnF1ZXJ5Q29uZGl0aW9ucylcclxuICAgICAgICAgICAgICAgIHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnNBZHZhbmNlZCA9IGNsb25lRGVlcChfcXVlcnlDb25kaXRpb25zQWR2YW5jZWQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5c29sdXRpb25WTztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9veafpeivouaWueahiOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkUXVlcnlTb2x1dGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5odHRwU2VydmljZS5xdWVyeSh0aGlzLmZvcm1JZCwgdGhpcy5zZXNzaW9uSWQpLnN1YnNjcmliZSgoaXRlbXM6IEFycmF5PGFueT4pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udmVydG9yID0gbmV3IFF1ZXJ5U29sdXRpb25Wb0NvbnZlcnRvcigpO1xyXG4gICAgICAgICAgICBsZXQgcXVlcnlzb2x1dGlvblZPOiBRdWVyeVNvbHV0aW9uVm87XHJcbiAgICAgICAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL+mrmOe6p+aooeW8j+acquW8gOWQr+eKtuaAgeS4i++8jOi/h+a7pOaOieebuOWFs+aVsOaNrlxyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMub3BlbkFkdmFuY2VkTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKHZhbCA9PiB2YWwubW9kZSAhPT0gJzInKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeXNvbHV0aW9uVk8gPSB0aGlzLmZvcm1hdFF1ZXJ5U29sdXRpb25WTyhjb252ZXJ0b3IsIGVsZW1lbnQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUhpc3RvcnkgJiYgcXVlcnlzb2x1dGlvblZPWyd0eXBlJ10gPT0gJ3ByZScgJiYgcXVlcnlzb2x1dGlvblZPLm1vZGUgIT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5Tlm57liJfooajlhoXlrZjlnKjljoblj7LorrDlvZUgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlzb2x1dGlvblZPLmNvZGUgPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5oaXN0cm95TmFtZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5UmVmZXJbJ3NjaGVtZUtleSddID0gcXVlcnlzb2x1dGlvblZPLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddID0gY2xvbmVEZWVwKHF1ZXJ5c29sdXRpb25WTyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeVJlZmVyWydpbml0Q29uZGl0aW9uJ10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgdGhpcy5kZWZhdWx0UXVlcnlTb2x1dGlvbiA9IGNsb25lRGVlcChxdWVyeXNvbHV0aW9uVk8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihxdWVyeXNvbHV0aW9uVk9bJ3R5cGUnXSAhPSAncHJlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+agueaNrnZlcnNpb24g6YCJ5oup5a2Y5YWl5ZOq5LiA5Liq5pWw5o2uIDHkuLrmoIflh4bvvIwy5Li66auY57qnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHF1ZXJ5c29sdXRpb25WTy5tb2RlID09PSAnMicgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5wdXNoKHF1ZXJ5c29sdXRpb25WTylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MucHVzaChxdWVyeXNvbHV0aW9uVk8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5c29sdXRpb25WTy5pc0RlZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ6buY6K6k5pa55qGI77yM5YiZ6K6+572u5YWo5bGA6buY6K6k5pa55qGIXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uID0gY2xvbmVEZWVwKHF1ZXJ5c29sdXRpb25WTyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vc2VsZi5zZXRTb2x1dGlvbkNhY2hlKHRoaXMucXVlcnlTb2x1dGlvblZvcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlSGlzdG9yeSAmJiAhdGhpcy5oaXN0b3J5UmVmZXJbJ2luaXRDb25kaXRpb24nXSkge1xyXG4gICAgICAgICAgICAgICAgLy/lpoLmnpzov5jmsqHmnInorr7nva7mnaHku7ZcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0SW5pdFF1ZXJ5U29sdXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVIaXN0b3J5ICYmIHRoaXMuaGlzdG9yeVJlZmVyWydpbml0Q29uZGl0aW9uJ10pIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSBjbG9uZURlZXAodGhpcy5oaXN0b3J5UmVmZXJbJ2ZvdW5kU2NobWUnXSk7XHJcbiAgICAgICAgICAgICAgICAvL+WPquaciee8k+WtmOiusOW9lVxyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnNwbGljZSgwLCAwLCB0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddKTtcclxuICAgICAgICAgICAgICAgIC8v5Y6G5Y+y6K6w5b2V5LiN5pSv5oyB6auY57qn5qih5byPXHJcbiAgICAgICAgICAgICAgICAvLyBpZih0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddLm1vZGUgPT09ICcyJyApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5zcGxpY2UoMCwgMCwgdGhpcy5oaXN0b3J5UmVmZXJbJ2ZvdW5kU2NobWUnXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnF1ZXJ5U29sdXRpb25Wb3Muc3BsaWNlKDAsIDAsIHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ10pO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5U29sdXRpb25Wb3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5pyJ5LiK5qyh5p+l6K+i5pe2XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnB1c2godGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5pyJ5LiK5qyh5p+l6K+i5pe2XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MucHVzaCh0aGlzLmluaXRBZHZhbmNlZFNvbHV0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL3NlbGYuc2V0U29sdXRpb25DYWNoZSh0aGlzLnF1ZXJ5U29sdXRpb25Wb3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkUXVlcnlDb25kaXRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGlmKHRoaXMuaGlzdG9yeVJlZmVyWydzY2hlbWVLZXknXSAhPT0gJycpe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8v5pu05paw5LiA5qyh57yT5a2YXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5jaGFuZ2VRdWVyeUhpc3Ryb3koZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gfSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uIHx8IHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggfHwgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOW3suafpeWIsOaciem7mOiupOaWueahiO+8jOaIluW3suacieWtmOWCqOeahOaWueahiFxyXG4gICAgICAgICAgICAgICAgLy/kuI3lho3liqDovb3ns7vnu5/phY3nva7nmoTmlrnmoYjvvIzpppblhYjliqDovb3pu5jorqTmlrnmoYjvvIzmsqHmnInpu5jorqTliJnliqDovb3nrKzkuIDkuKrmlrnmoYhcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uICYmIHRoaXMuZGVmYXVsdFF1ZXJ5U29sdXRpb24uaWQgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSBjbG9uZURlZXAodGhpcy5kZWZhdWx0UXVlcnlTb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY1NvbHV0aW9uID0gWy4uLnRoaXMucXVlcnlTb2x1dGlvblZvcywgLi4udGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3NdLmZpbmQoaXRlbSA9PiBpdGVtLnR5cGUgPT0gJ3B1YmxpYycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHB1YmxpY1NvbHV0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbiA9IHB1YmxpY1NvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yZ1NvbHV0aW9uID0gWy4uLnRoaXMucXVlcnlTb2x1dGlvblZvcywgLi4udGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3NdLmZpbmQoaXRlbSA9PiBpdGVtLnR5cGUgPT0gJ29yZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSAhIW9yZ1NvbHV0aW9uID8gb3JnU29sdXRpb24gOiBjbG9uZURlZXAoWy4uLnRoaXMucXVlcnlTb2x1dGlvblZvcywgLi4udGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3NdWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVyeVNvbHV0aW9uVm9zLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MucHVzaCh0aGlzLnN5c1F1ZXJ5U29sdXRpb25WbylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MucHVzaCh0aGlzLmluaXRBZHZhbmNlZFNvbHV0aW9uKCkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRRdWVyeUNvbmRpdGlvbnMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ5Lu75L2V5bey5a2Y5YKo55qE5pa55qGI77yM5YiZ5Yqg6L2957O757uf6YWN572u5pa55qGIXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRTeXNRdWVyeVNvbHV0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5wdXNoKHRoaXMuaW5pdEFkdmFuY2VkU29sdXRpb24oKSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNTZXREZWZhdWx0VmFsdWUgJiYgIXRoaXMuaGlzdG9yeVJlZmVyWydpbml0Q29uZGl0aW9uJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UXVlcnlDb25kaXRpb25WYWx1ZXModGhpcy5kZWZhdWx0Q29uZmlncywgdGhpcy5zZWxlY3RlZFNvbHV0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0QXV0b1F1ZXJ5KHRoaXMuc2VsZWN0ZWRTb2x1dGlvbik7XHJcbiAgICAgICAgfSwgZSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGUgJiYgZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1zZ1Nlci5zaG93KCdlcnJvcicsIGUubWVzc2FnZSwge3Nob3dIZWFkZXI6IGZhbHNlfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNvbHV0aW9uQ2FjaGUocXVlcnlTb2x1dGlvblZvczogYW55KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQgJiYgZ3NwZnJhbWV3b3JrU2VydmljZSAmJiBxdWVyeVNvbHV0aW9uVm9zICYmIHF1ZXJ5U29sdXRpb25Wb3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeWKn+iDveiPnOWNleS/oeaBrywg5bm25Lul5Yqf6IO96I+c5Y2VSUTkuLrnvJPlrZhrZXlcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZ3NwZnJhbWV3b3JrU2VydmljZS5ydGYuc2Vzc2lvbi5nZXRDb21tb25WYXJpYWJsZSgpO1xyXG4gICAgICAgICAgICBTb2x1dGlvbkNhY2hlU2VydmljZS5zZXRTb2x1dGlvbkNhY2hlKG9wdGlvbi50YWJJZCwgcXVlcnlTb2x1dGlvblZvcyk7XHJcbiAgICAgICAgICAgIFNvbHV0aW9uQ2FjaGVTZXJ2aWNlLnNvbHV0aW9uTGlzdENoYW5nZWQubmV4dCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q3VycmVudFNvbHV0aW9uQ2FjaGUodmFsdWU6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkICYmIGdzcGZyYW1ld29ya1NlcnZpY2UgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN5Yqf6IO96I+c5Y2V5L+h5oGvLCDlubbku6Xlip/og73oj5zljZVJROS4uue8k+WtmGtleVxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldENvbW1vblZhcmlhYmxlKCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnRhYklkKSB7XHJcbiAgICAgICAgICAgICAgICBTb2x1dGlvbkNhY2hlU2VydmljZS5zZXRDdXJyZW50U29sdXRpb24ob3B0aW9uLnRhYklkLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIHJlbW92ZUN1cnJlbnRTb2x1dGlvbkNhY2hlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0Rpc2FibGVkICYmIGdzcGZyYW1ld29ya1NlcnZpY2UpIHtcclxuICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN5Yqf6IO96I+c5Y2V5L+h5oGvLCDlubbku6Xlip/og73oj5zljZVJROS4uue8k+WtmGtleVxyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBnc3BmcmFtZXdvcmtTZXJ2aWNlLnJ0Zi5zZXNzaW9uLmdldENvbW1vblZhcmlhYmxlKCk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLnRhYklkKSB7XHJcbiAgICAgICAgICAgICAgICBTb2x1dGlvbkNhY2hlU2VydmljZS5yZW1vdmVDdXJyZW50U29sdXRpb24ob3B0aW9uLnRhYklkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICovXHJcblxyXG4gICAgbG9hZFF1ZXJ5Q29uZGl0aW9ucygpIHtcclxuICAgICAgICAvL+WKoOi9veetm+mAieadoeS7tlxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBuZXcgQXJyYXk8UXVlcnlDb25kaXRpb24+KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbiAmJiB0aGlzLnNlbGVjdGVkU29sdXRpb24ucXVlcnlDb25kaXRpb25zICYmIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyBhcyBBcnJheTxRdWVyeUNvbmRpdGlvbj47XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkU29sdXRpb24ucXVlcnlDb25kaXRpb25zO1xyXG4gICAgICAgICAgICBpZih0aGlzLnRlbXBsYXRlU2ltcGxlQ29uZGl0aW9ucyAmJiB0aGlzLnRlbXBsYXRlU2ltcGxlQ29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpZWxkUGFyYW1zKHRoaXMudGVtcGxhdGVTaW1wbGVDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVTaW1wbGVDb25kaXRpb25zID0gbmV3IEFycmF5PGFueT4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zLmZpbHRlcigoaXRlbTogUXVlcnlDb25kaXRpb24pID0+IHsgcmV0dXJuICEhaXRlbS52aXNpYmxlIH0pO1xyXG4gICAgICAgIC8vIOWmguaenOaWueahiOeahOWPmOabtOaYr+WcqOWPjuaKmOaXtlxyXG4gICAgICAgIHRoaXMud2hlbkZvbGRTZXRTdW1tYXJ5Q29uZGl0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuc2hvd1NhdmVCdXR0b24gPSB0aGlzLnNlbGVjdGVkU29sdXRpb24uaXNTeXN0ZW0gPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgIXRoaXMuaXNEaXNhYmxlZCAmJiB0aGlzLnNvbHV0aW9uSGFuZGxlci5zZXRDdXJyZW50UXVlcnlDb25kaXRpb25zKGNsb25lRGVlcCh0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMpKTtcclxuICAgICAgICAvL3RoaXMuc2V0Q3VycmVudFNvbHV0aW9uQ2FjaGUodGhpcy5zZWxlY3RlZFNvbHV0aW9uKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZGl0aW9uVmlzaWJsZVN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblZpc2libGVTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS8oOmAkui/h+adpeeahOaYr+W3sue7j+WkhOeQhui/h+eahOadoeS7tlxyXG4gICAgICogQHBhcmFtIHNpbXBsZUNvbmRpdGlvbiBcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQ29uZGl0aW9uVmlzaWJsZVN0YXRlKHNpbXBsZUNvbmRpdGlvbjogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIHRoaXMuY29uZGl0aW9uVmlzaWJsZVN0YXRlLm5leHQoc2ltcGxlQ29uZGl0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnm5HlkKxyZXNldEZpZWxkQ29uZmlnc+WPmOWMluWQju+8jOabtOaWsHNlbGVjdGVkRmllbGRDb25kaXRpb25z77yM5bm25ZCM5q2l6IezcXVlcnljb25kaXRpb27vvIzlj6/lrp7njrDnrZvpgInmnaHku7bliqjmgIHmmL7npLrpmpDol49cclxuICAgIHByaXZhdGUgdXBkYXRlRmllbGRQYXJhbXMoc2ltcGxlQ29uZGl0aW9uczogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIGlmKCFzaW1wbGVDb25kaXRpb25zIHx8ICFzaW1wbGVDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb25kaXRpb25zID0gY2xvbmVEZWVwKHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb25kaXRpb25zID0gY3VycmVudENvbmRpdGlvbnMubWFwKChpdGVtOiBRdWVyeUNvbmRpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBmb3IoY29uc3Qgc2ltcGxlQ29uZGl0aW9uIG9mIHNpbXBsZUNvbmRpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmKHNpbXBsZUNvbmRpdGlvbi5oYXNPd25Qcm9wZXJ0eSgndmlzaWJsZScpICYmIGl0ZW0uZmllbGRDb2RlID09IHNpbXBsZUNvbmRpdGlvblsnZmllbGRDb2RlJ10gJiYgaXRlbS52aXNpYmxlICE9PSBzaW1wbGVDb25kaXRpb25bJ3Zpc2libGUnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmlzaWJsZSA9IHNpbXBsZUNvbmRpdGlvblsndmlzaWJsZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUuY2xlYXJWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFya0FzQ2hhbmdlZCh0cnVlLCB0aGlzLnNlbGVjdGVkU29sdXRpb24uaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSB1cGRhdGVkQ29uZGl0aW9ucy5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVBcygpIHtcclxuICAgICAgICB0aGlzLm9wZW5TYXZlQXNEaWFsb2codGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicXVlcnlTb2x1dGlvbi5zYXZlQXNEaWFsb2cudGl0bGVcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6buY6K6k5qCH562+XHJcbiAgICAgKiBAcGFyYW0gc29sdXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0RGVmYXVsdExhYmVsKHNvbHV0aW9uOiBRdWVyeVNvbHV0aW9uVm8pIHtcclxuICAgICAgICBpZiAoISh0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyAndmlzaWJpbGl0eSc6ICdoaWRkZW4nIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzb2x1dGlvbi5pZCA9PSB0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAvL+S4jeWkhOeQhuS6hlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3Zpc2liaWxpdHknOiAnaGlkZGVuJyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmlrnmoYjpgInmi6nkuovku7ZcclxuICAgICAqIEBwYXJhbSBzb2x1dGlvbiDlvZPliY3pgInkuK3nmoTmlrnmoYhcclxuICAgICAqL1xyXG4gICAgc2VsZWN0KHNvbHV0aW9uOiBRdWVyeVNvbHV0aW9uVm8pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSBPYmplY3QuYXNzaWduKG5ldyBRdWVyeVNvbHV0aW9uVm8oKSwgc29sdXRpb24pO1xyXG4gICAgICAgIGlmIChzb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMgJiYgc29sdXRpb24ucXVlcnlDb25kaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gbmV3IEFycmF5PFF1ZXJ5Q29uZGl0aW9uPigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3dTYXZlQnV0dG9uID0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLmlzU3lzdGVtID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVNlbGVjdGVkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMuZmlsdGVyKChpdGVtOiBRdWVyeUNvbmRpdGlvbikgPT4geyByZXR1cm4gISFpdGVtLnZpc2libGUgfSk7XHJcbiAgICAgICAgIXRoaXMuaXNEaXNhYmxlZCAmJiB0aGlzLnNvbHV0aW9uSGFuZGxlci5zZXRDdXJyZW50UXVlcnlDb25kaXRpb25zKGNsb25lRGVlcCh0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMpKTtcclxuICAgICAgICAvL3RoaXMuc2V0Q3VycmVudFNvbHV0aW9uQ2FjaGUodGhpcy5zZWxlY3RlZFNvbHV0aW9uKTtcclxuICAgICAgICAvLyDlpoLmnpzmlrnmoYjnmoTlj5jmm7TmmK/lnKjlj47mipjml7ZcclxuICAgICAgICB0aGlzLndoZW5Gb2xkU2V0U3VtbWFyeUNvbmRpdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxlY3RBbmRRdWVyeShzb2x1dGlvbjogUXVlcnlTb2x1dGlvblZvKSB7XHJcbiAgICAgICAgLy/pq5jnuqfmqKHlvI/kuI3kvb/nlKjpu5jorqTlgLxcclxuICAgICAgICBpZiAoc29sdXRpb24ubW9kZSAhPT0gJzInICYmICh0aGlzLmRlZmF1bHRDb25maWdzICYmIHRoaXMuZGVmYXVsdENvbmZpZ3MuaXNDdXJyZW50IHx8IChzb2x1dGlvbi5pc1N5c3RlbSAmJiBzb2x1dGlvbi50eXBlICE9PSAncHJlJykpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UXVlcnlDb25kaXRpb25WYWx1ZXModGhpcy5kZWZhdWx0Q29uZmlncywgc29sdXRpb24pOy8v5bey5YyF5ZCrc2VsZWN05pON5L2cXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNvbHV0aW9uLm1vZGUgIT09ICcyJyAmJiB0aGlzLmVuYWJsZUhpc3RvcnkgJiYgc29sdXRpb24udHlwZSA9PSAncHJlJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbmRpdGlvbnMgPSBjbG9uZURlZXAodGhpcy5oaXN0b3J5UmVmZXJbJ2ZvdW5kU2NobWUnXVsncXVlcnlDb25kaXRpb25zJ10pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyA9IGNvbmRpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Qoc29sdXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnF1ZXJ5KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICog5omT5byA5a2X5q616YWN572u56qX5Y+jXHJcbiAgICAgKi9cclxuICAgIG9wZW5GaWVsZENvbmZpZ0RpYWxvZygpIHtcclxuICAgICAgICB0aGlzLmZhcnJpc1F1ZXJ5Q29uZGl0aW9uLm9wZW5GaWVsZENvbmZpZ0RpYWxvZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpZWxkQ29uZGl0aW9uc0NoYW5nZUhhbmRlcigkZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGxldCBkYXRhID0gJGV2ZW50O1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5tb2RlID09PSAnMicpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyA9IGRhdGFcclxuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zLmZpbmQodmFsID0+IHZhbC5pZCA9PT0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLmlkKVxyXG4gICAgICAgICAgICBpZih0YXJnZXQgKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucXVlcnlDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9uc1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnF1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkID0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyA9IGRhdGE75q2k5pe25LiN5pS55Y+Y5b2T5YmN6YCJ5Lit55qE5pa55qGI77yM562J5Yiw5L+d5a2Y5pe277yM55u05o6l6LCD55SodGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9uc+adpeS/neWtmOOAglxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVNlbGVjdGVkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMuZmlsdGVyKChpdGVtOiBRdWVyeUNvbmRpdGlvbikgPT4geyByZXR1cm4gISFpdGVtLnZpc2libGUgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zb2x1dGlvbkhhbmRsZXIuc2V0Q3VycmVudFF1ZXJ5Q29uZGl0aW9ucyhjbG9uZURlZXAodGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc29sdXRpb25IYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnModGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgLy90aGlzLnNldEN1cnJlbnRTb2x1dGlvbkNhY2hlKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMucXVlcnlBZnRlclZhbHVlQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnkoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcmtBc0NoYW5nZWQodHJ1ZSwgdGhpcy5zZWxlY3RlZFNvbHV0aW9uLmlkKTtcclxuICAgIH1cclxuICAgIC8v6auY57qn5qih5byP5paw5aKe77yM6auY57qn5qih5byP5LiL5LiN5LuF6ZyA6KaB5L+u5pS5Y29uZGl0aW9uc++8jOi/mOmcgOimgeS/ruaUuXNvbHV0aW9u55qE55u45YWz5bGe5oCnXHJcbiAgICBmaWVsZFNvbHV0aW9uQ2hhbmdlSGFuZGVyKCRldmVudDogYW55KSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSAkZXZlbnQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNvbHV0aW9uID0gZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L+d5a2Y5pa55qGIXHJcbiAgICAgKi9cclxuICAgIHNhdmUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1JZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS5zaG93SW5mbyh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5wbGVhc2VJbnB1dFwiKSwgJ2Vycm9yJywgJycsIDE1MDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vaWTkuLrnqbrliJnooajnpLrmsqHmnInpooTnva7mlrnmoYjvvIzliJnmraTml7bkv53lrZjmlrnmoYjnm7jlvZPkuo7mlrDlop7kuIDkuKrmlrnmoYhcclxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5TYXZlQXNEaWFsb2codGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicXVlcnlTb2x1dGlvbi5jb250YWluZXIuc2F2ZVwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v55u05o6l5L+d5a2YXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrQXV0aG9yaXR5JCA9IHRoaXMuaHR0cFNlcnZpY2UuZ2V0QXV0aCgnUXVlcnlTb2x1dGlvbicsIHRoaXMuc2Vzc2lvbklkKTtcclxuICAgICAgICAgICAgY2hlY2tBdXRob3JpdHkkLnBpcGUoXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hNYXAoXHJcbiAgICAgICAgICAgICAgICAgICAgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighZGF0YVsnc3VjY2VzcyddICYmICh0aGlzLnNlbGVjdGVkU29sdXRpb24udHlwZSA9PSAncHVibGljJyB8fCB0aGlzLnNlbGVjdGVkU29sdXRpb24udHlwZSA9PSAnb3JnJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnNob3dJbmZvKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZXh0ZW5kUXVlcnlTb2x1dGlvbi5hdXRoLnVwZGF0ZUVycm9yJyksICd3YXJuaW5nJywgJycsIDE1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9mKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMgPSB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2F2ZSQgPSB0aGlzLmh0dHBTZXJ2aWNlLnVwZGF0ZSh0aGlzLnNlbGVjdGVkU29sdXRpb24sIHRoaXMuc2Vzc2lvbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzYXZlJC5waXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RlZFNvbHV0aW9uLm1vZGUgPT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wSW5kZXggPSB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5maW5kSW5kZXgoeCA9PiB4LmlkID09IHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3Muc3BsaWNlKHRlbXBJbmRleCwgMSwgdGhpcy5zZWxlY3RlZFNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBJbmRleCA9IHRoaXMucXVlcnlTb2x1dGlvblZvcy5maW5kSW5kZXgoeCA9PiB4LmlkID09IHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnNwbGljZSh0ZW1wSW5kZXgsIDEsIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya0FzQ2hhbmdlZChmYWxzZSwgdGhpcy5zZWxlY3RlZFNvbHV0aW9uLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmFycmlzUXVlcnlDb25kaXRpb24uY2FuQ2xlYXJSZWxhdGVkRmllbGRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS5zaG93SW5mbyh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5zYXZlU3VjY2Vzc1wiKSwgJ3N1Y2Nlc3MnLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnNob3dJbmZvKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcInF1ZXJ5U29sdXRpb24uY29udGFpbmVyLnNhdmVGYWlsXCIpLCAnZXJyb3InLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICB0YXAoXHJcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4geyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgnZXh0ZW5kUXVlcnlTb2x1dGlvbi5hdXRoLmFwaUVycm9yJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKS5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiZPlvIDlj6blrZjkuLrlr7nor53moYbvvIzngrnlh7vkv53lrZjmjInpkq7ml7bkuZ/otbDor6XpgLvovpFcclxuICAgICAqIEBwYXJhbSB0aXRsZVxyXG4gICAgICovXHJcbiAgICBvcGVuU2F2ZUFzRGlhbG9nKHRpdGxlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZm9ybUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnNob3dJbmZvKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcInF1ZXJ5U29sdXRpb24uY29udGFpbmVyLnBsZWFzZUlucHV0XCIpLCAnZXJyb3InLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zYXZlQXNEaWFsb2cudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5xdWVyeVNvbHV0aW9uID0gdGhpcy5uZXdTYXZlQXNTb2x1dGlvblZvKCk7XHJcbiAgICAgICAgdGhpcy5zYXZlQXNEaWFsb2cucmFkaW9Hcm91cFZhbHVlID0gJ3ByaXZhdGUnO1xyXG4gICAgICAgIHRoaXMuc2F2ZUFzRGlhbG9nLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXdTYXZlQXNTb2x1dGlvblZvID0gKCkgPT4ge1xyXG4gICAgICAgIC8v5b2T5YmN6YCJ5Lit55qE5pa55qGI77yM5YaN5L+u5pS5562b6YCJ5p2h5Lu25ZCO77yM5YW25Y6f5p2l55qE562b6YCJ5p2h5Lu25bm25rKh5pyJ5Y+Y5YyW77yM5LuF5LuFdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9uc+acieWPmOWMllxyXG4gICAgICAgIGNvbnN0IHNvbHV0aW9uID0gY2xvbmVEZWVwKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbik7XHJcbiAgICAgICAgLy/mlrDlop7nmoTmlrnmoYjopoHmuIXnqbrmn6Xor6LmlrnmoYjnvJblj7dcclxuICAgICAgICBzb2x1dGlvbi5jb2RlID0gJyc7XHJcbiAgICAgICAgLy/mmK/lkKbns7vnu5/lsZ7mgKflv4Xpobvorr7nva7kuLpGYWxzZVxyXG4gICAgICAgIHNvbHV0aW9uLmlzU3lzdGVtID0gZmFsc2U7XHJcbiAgICAgICAgLy/op6PlhrPmlrnmoYjmiYDlsZ7ooajljZVcclxuICAgICAgICBzb2x1dGlvbi5iZWxvbmdJZCA9IHRoaXMuZm9ybUlkO1xyXG4gICAgICAgIC8v5paw5aKe5pa55qGISWTpnIDopoFHdWlkXHJcbiAgICAgICAgc29sdXRpb24uaWQgPSB0aGlzLnNvbHV0aW9uU2VydmljZS5nZXRHdWlkKCk7XHJcbiAgICAgICAgLy/mlrDlop7mlrnmoYhpc0RlZmF1bHTpnIDopoHorr7nva7kuLpmYWxzZVxyXG4gICAgICAgIHNvbHV0aW9uLmlzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgIC8v5paw5aKe5pa55qGI55qE562b6YCJ5p2h5Lu277yM5piv5b2T5YmN6YCJ5Lit55qE562b6YCJ5p2h5Lu2XHJcbiAgICAgICAgc29sdXRpb24ucXVlcnlDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucztcclxuICAgICAgICAvL+iuvue9ruexu+Wei+imgea4heepulxyXG4gICAgICAgIHNvbHV0aW9uLnR5cGUgPSBcInByaXZhdGVcIjtcclxuICAgICAgICBzb2x1dGlvbi5pc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICBzb2x1dGlvbi5leHRlbmRJZCA9ICdxdWVyeS1zY2hlbWUtMSc7XHJcbiAgICAgICAgc29sdXRpb24uZXh0ZW5kSW5mbyA9IG5ldyBBcnJheTxRdWVyeVNvbHV0aW9uRXh0ZW5kVm8+KCk7XHJcbiAgICAgICAgcmV0dXJuIHNvbHV0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y+m5a2Y5Li656Gu5a6a5LqL5Lu25aSE55CGXHJcbiAgICAgKiBAcGFyYW0gc29sdXRpb24g5paw5aKe55qE5p+l6K+i5pa55qGIXHJcbiAgICAgKi9cclxuICAgIHNhdmVBc0NvbmZyaW1IYW5kbGVyKF9ldmVudDogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgc29sdXRpb246IFF1ZXJ5U29sdXRpb25WbyA9IF9ldmVudFsncXVlcnlTb2x1dGlvbiddO1xyXG4gICAgICAgIGlmIChzb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMgJiYgc29sdXRpb24ucXVlcnlDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghIWVsZW1lbnQucmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlYWRvbmx5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlLmNyZWF0ZShzb2x1dGlvbiwgdGhpcy5zZXNzaW9uSWQpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy/ph43mlrDorr7nva7lhajlsYDnmoTpu5jorqTmlrnmoYhcclxuICAgICAgICAgICAgICAgIGlmIChzb2x1dGlvbi5pc0RlZmF1bHQpIHsvL+iiq+iuvue9ruS4uum7mOiupOaWueahiFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFF1ZXJ5U29sdXRpb24gPSBzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MgPSB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MubWFwKHZvID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm8uaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2bztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcyA9IHRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zLm1hcCh2byA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvLmlzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm87XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+eUqOaIt+S/neWtmOiHquW3seeahOetm+mAieaWueahiOWQju+8jOS4jeWGjeaYvuekuuezu+e7n+m7mOiupOeahOaWueahiO+8jOaTjeS9nOaWueahiOS4uumrmOe6p+aooeW8j+aXtuS4jeW9seWTjeagh+WHhlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggPT09IDEgJiYgdGhpcy5xdWVyeVNvbHV0aW9uVm9zWzBdLmlzU3lzdGVtICYmIHNvbHV0aW9uLm1vZGUgPT09ICcxJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v55So5oi35rKh5pyJ6YWN572u6Ieq5bex55qE562b6YCJ5pa55qGI5pe277yM5oiW6ICF55So5oi35Y+q6YWN572u5LqG5LiA5Liq562b6YCJ5pa55qGI5pe277yM5q2k5pWw57uE6YO95pyJ5LiA5Liq5pa55qGI77yb6Iul5q2k5pa55qGI5piv57O757uf6buY6K6k5pa55qGI77yM5YiZ5bqU5Zyo5Y+m5a2Y5Li65pe25Yig5o6JXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zID0gbmV3IEFycmF5PFF1ZXJ5U29sdXRpb25Wbz4oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLnF1ZXJ5U29sdXRpb25Wb3MubGVuZ3RoID09PSAyICYmIHRoaXMuZW5hYmxlSGlzdG9yeSkgeyAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJTb2x1dGlvblZvcyA9IG5ldyBBcnJheTxRdWVyeVNvbHV0aW9uVm8+KCk7ICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJTb2x1dGlvblZvcyA9IHRoaXMucXVlcnlTb2x1dGlvblZvcy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0udHlwZSA9PSAncHJlJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNTeXN0ZW1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTb2x1dGlvblZvcyA9IGZpbHRlclNvbHV0aW9uVm9zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/pq5jnuqfmqKHlvI/lkIznkIZcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5sZW5ndGggPT09IDEgJiYgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3NbMF0uaXNTeXN0ZW0gJiYgc29sdXRpb24ubW9kZSA9PT0gJzInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MgPSBuZXcgQXJyYXk8UXVlcnlTb2x1dGlvblZvPigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zLmxlbmd0aCA9PT0gMiAmJiB0aGlzLmVuYWJsZUhpc3RvcnkpIHsgICBcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyU29sdXRpb25Wb3MgPSBuZXcgQXJyYXk8UXVlcnlTb2x1dGlvblZvPigpOyAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU29sdXRpb25Wb3MgPSB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5maWx0ZXIoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0udHlwZSA9PSAncHJlJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNTeXN0ZW1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zID0gZmlsdGVyU29sdXRpb25Wb3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc29sdXRpb24ubW9kZSA9PT0gJzInID8gdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MucHVzaChzb2x1dGlvbikgOiB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MucHVzaChzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24gPSBzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NhdmVCdXR0b24gPSB0aGlzLnNlbGVjdGVkU29sdXRpb24uaXNTeXN0ZW0gPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmllbGRDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucztcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlbGVjdGVkQ29uZGl0aW9ucyA9IHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMuZmlsdGVyKChpdGVtOiBRdWVyeUNvbmRpdGlvbikgPT4geyByZXR1cm4gISFpdGVtLnZpc2libGUgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhcnJpc1F1ZXJ5Q29uZGl0aW9uLmNhbkNsZWFyUmVsYXRlZEZpZWxkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlQXNEaWFsb2cuaXNEZWZhdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS5zaG93SW5mbyh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5zYXZlU3VjY2Vzc1wiKSwgJ3N1Y2Nlc3MnLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnNob3dJbmZvKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcInF1ZXJ5U29sdXRpb24uY29udGFpbmVyLnNhdmVGYWlsXCIpLCAnZXJyb3InLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiZPlvIDnrqHnkIbnlYzpnaJcclxuICAgICAqL1xyXG4gICAgb3Blbk1hbmFuZ2VyRGlhbG9nKCkge1xyXG4gICAgICAgIHRoaXMuaHR0cFNlcnZpY2UuZ2V0QXV0aCgnUXVlcnlTb2x1dGlvbicsIHRoaXMuc2Vzc2lvbklkKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlRGlhbG9nLmF1dGhvcml0eUVycm9yID0gZGF0YVsnc3VjY2VzcyddID8gZmFsc2U6IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlRGlhbG9nLnNob3coY2xvbmVEZWVwKFsuLi50aGlzLnF1ZXJ5U29sdXRpb25Wb3MsIC4uLnRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog566h55CG55WM6Z2i56Gu5a6a5aSE55CGXHJcbiAgICAgKiBAcGFyYW0gX2V2ZW50XHJcbiAgICAgKiBAcGFyYW0gZGlhbG9nXHJcbiAgICAgKi9cclxuICAgIG1hbmFnZXJDb25maXJtSGFuZGxlcihfZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGxldCBvYmo6IG9iamVjdCA9IF9ldmVudDtcclxuICAgICAgICBpZiAob2JqWyd2YWxpZGF0b3InXSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIC8v54K55Ye7Y2hlY2tib3jml7bvvIxuZXdEZWZhdWx0UXVlcnlTb2x1dGlvbuiiq+i1i+WAvO+8myDlhajlsYDpu5jorqTmlrnmoYjooqvliKDpmaTml7bvvIxuZXdEZWZhdWx0UXVlcnlTb2x1dGlvbuWPmOS4um51bGxcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdElkID0gb2JqWyduZXdEZWZhdWx0UXVlcnlTb2x1dGlvbiddID8gb2JqWyduZXdEZWZhdWx0UXVlcnlTb2x1dGlvbiddLmlkIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlbG9uZ0lkID0gdGhpcy5mb3JtSWQ7XHJcbiAgICAgICAgICAgIC8v6Iul5rKh5pyJ5Yig6Zmk5Lu75L2V5pa55qGI77yMZGVsZXRlZFF1ZXJ5U29sdXRpb25Wb3PkvJrmmK/kuIDkuKrnqbrmlbDnu4RcclxuICAgICAgICAgICAgY29uc3QgZGVsZXRlZElkcyA9IG9ialsnZGVsZXRlZFF1ZXJ5U29sdXRpb25JZHMnXTtcclxuICAgICAgICAgICAgdGhpcy5odHRwU2VydmljZS5iYXRjaFVwZGF0ZSh7IGRlZmF1bHRJZCwgYmVsb25nSWQsIGRlbGV0ZWRJZHMgfSwgdGhpcy5zZXNzaW9uSWQpLnN1YnNjcmliZShcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvL+aKiuWIoOmZpOWQjueahHZv6LWL5YC857uZIHRoaXMucXVlcnlTb2x1dGlvblZvc++8m+WmguaenOayoeWIoOmZpOaWueahiO+8jCB0aGlzLnF1ZXJ5U29sdXRpb25Wb3Pot59vYmpbJ3NwbGljZWRRdWVyeVNvbHV0aW9uVm9zJ13lkIzlgLxcclxuICAgICAgICAgICAgICAgICAgICAvL+m7mOiupOaWueahiOeahOWPmOWMluS5n+iusOW9leWcqHVwZGF0ZWRRdWVyeVNvbHV0aW9uVm9z5LitXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zID0gb2JqWyd1cGRhdGVkUXVlcnlTb2x1dGlvblZvcyddLmZpbHRlcih2YWwgPT4gdmFsLm1vZGUgIT09ICcyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MgPSBvYmpbJ3VwZGF0ZWRRdWVyeVNvbHV0aW9uVm9zJ10uZmlsdGVyKHZhbCA9PiB2YWwubW9kZSA9PT0gJzInKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9ialsnY3VycmVudERlZmF1bHRRdWVyeVNvbHV0aW9uSWQnXSkgey8v5aaC5p6c5Lyg6L+H5p2l55qE5b2T5YmN6buY6K6k5pa55qGIaWTmmK/nqbrvvIzku6PooajmiYDmnInpu5jorqTmlrnmoYjpg73lj5bmtojkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0UXVlcnlTb2x1dGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ6buY6K6k5pa55qGI5YWI5pi+56S66buY6K6k5pa55qGI77yM5aaC5p6c5rKh5pyJ6buY6K6k5pa55qGI5YiZ55u05o6l5pi+56S65b2T5YmN5p+l6K+i5pa55qGI55qE56ys5LiA5Liq77yb5aaC5p6c5rKh5pyJ5Lu75L2V5p+l6K+i5pa55qGI5YiZ55u05o6l5riF56m65p+l6K+i5pa55qGI77yM5YiZ5pi+56S657O757uf6aKE572u55qE6buY6K6k5pa55qGIXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+W3suiuvue9rum7mOiupOaWueahiFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChvYmpbJ25ld0RlZmF1bHRRdWVyeVNvbHV0aW9uJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRRdWVyeVNvbHV0aW9uID0gb2JqWyduZXdEZWZhdWx0UXVlcnlTb2x1dGlvbiddO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggPT09IDAgfHwgKHRoaXMuZW5hYmxlSGlzdG9yeSAmJiB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MubGVuZ3RoID09PSAxICYmIHRoaXMucXVlcnlTb2x1dGlvblZvc1swXS50eXBlID09ICdwcmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnB1c2godGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5wdXNoKHRoaXMuaW5pdEFkdmFuY2VkU29sdXRpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyq5pu05pS56buY6K6k5pa55qGI77yM5Yik5pat5b2T5YmN6YCJ5oup55qE5p+l6K+i5pa55qGI5piv5ZCm5bey6KKr5Yig6ZmkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVkSWRzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pZCkpIHsvL+WmguaenOiiq+WIoOmZpFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lbmFibGVIaXN0b3J5ICYmIHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggPT0gMSAmJiB0aGlzLnF1ZXJ5U29sdXRpb25Wb3NbMF0udHlwZSA9PSAncHJlJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc3lzUXVlcnlTb2x1dGlvblZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnB1c2godGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY1NvbHV0aW9uID0gdGhpcy5xdWVyeVNvbHV0aW9uVm9zLmZpbmQoaXRlbSA9PiBpdGVtLnR5cGUgPT0gJ3B1YmxpYycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwdWJsaWNTb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QocHVibGljU29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JnU29sdXRpb24gPSB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MuZmluZChpdGVtID0+IGl0ZW0udHlwZSA9PSAnb3JnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdCghIW9yZ1NvbHV0aW9uID8gb3JnU29sdXRpb24gOiBjbG9uZURlZXAodGhpcy5xdWVyeVNvbHV0aW9uVm9zWzBdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc3lzUXVlcnlTb2x1dGlvblZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zLnB1c2godGhpcy5zeXNRdWVyeVNvbHV0aW9uVm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pq5jnuqfmqKHlvI/msqHmnInnmoTor53kuZ/pnIDopoHlop7liqDpu5jorqRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25BZHZhbmNlZFZvcy5wdXNoKHRoaXMuaW5pdEFkdmFuY2VkU29sdXRpb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LuA5LmI5Lmf5rKh5Y+R55SfXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKiuaJgOacieeahOm7mOiupOmDveWPlua2iOS6hlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5xdWVyeVNvbHV0aW9uVm9zLmxlbmd0aCA9PT0gMCB8fCAodGhpcy5lbmFibGVIaXN0b3J5ICYmIHRoaXMucXVlcnlTb2x1dGlvblZvcy5sZW5ndGggPT09IDEgJiYgdGhpcy5xdWVyeVNvbHV0aW9uVm9zWzBdLnR5cGUgPT0gJ3ByZScpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U29sdXRpb25Wb3MucHVzaCh0aGlzLnN5c1F1ZXJ5U29sdXRpb25Wbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTb2x1dGlvbkFkdmFuY2VkVm9zLnB1c2godGhpcy5pbml0QWR2YW5jZWRTb2x1dGlvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25TZXJ2aWNlLnNob3dJbmZvKHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcInF1ZXJ5U29sdXRpb24uY29udGFpbmVyLnNhdmVTdWNjZXNzXCIpLCAnc3VjY2VzcycsICcnLCAxNTAwKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2Uuc2hvd0luZm8odGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicXVlcnlTb2x1dGlvbi5jb250YWluZXIuc2F2ZUZhaWxcIiksICdlcnJvcicsICcnLCAxNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+agoemqjOWksei0pVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaJp+ihjOetm+mAiVxyXG4gICAgICovXHJcbiAgICBxdWVyeSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckFyciA9IHRoaXMuc29sdXRpb25TZXJ2aWNlLmlzVmFsaWQodGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgLy/pq5jnuqfmqKHlvI/kuIvkuI3nlKjliKTmlq1yZXF1aXJl77yM5pyJ6Ieq5bex55qE5qCh6aqM6YC76L6RXHJcbiAgICAgICAgICAgIGlmIChlcnJvckFyciAmJiBlcnJvckFyci5sZW5ndGggJiYgdGhpcy5zZWxlY3RlZFNvbHV0aW9uLm1vZGUgIT09ICcyJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JGaWVsZHMgPSBlcnJvckFyci5tYXAoZXJyb3IgPT4gZXJyb3IuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2Uuc2hvd0luZm8odGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKFwicXVlcnlTb2x1dGlvbi5jb250YWluZXIucmVxdWlyZVwiKS5yZXBsYWNlKCd7ZmllbGRzfScsIGVycm9yRmllbGRzLmpvaW4oJywgJykpLCAnd2FybmluZycsICcnLCAyNTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v6auY57qn5qih5byP5LiL5b+F6aG75omA5pyJ5p2h5Lu26YO95pyJ5YC877yM5ZCm5YiZ5Lya5b2x5ZON5bGC57qn5LiO5YWz6IGU5YWz57O7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBxdWVyeUNvbmRpdGlvbnMgPSBjbG9uZURlZXAodGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5tb2RlID09PSAnMicpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUNvbmRpdGlvbnMgPSBjbG9uZURlZXAodGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVtcHR5RmxhZyA9IHF1ZXJ5Q29uZGl0aW9ucy5maW5kKHZhbCA9PiB2YWwudmFsdWUuaXNFbXB0eSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBlbXB0eUZsYWcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5Lndhcm5pbmcodGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdhZHZhbmNlZE1vZGUuYXV0aC5jb25kaXRpb25FbXB0eUVycm9yJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25IYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnMocXVlcnlDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlFbWl0dGVyLmVtaXQocXVlcnlDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIC8vIOabtOaWsOWOhuWPsuiusOW9lVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VRdWVyeUhpc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4heepui0+5p2h5Lu25YWo6YOo6YeN572u5Li656m6XHJcbiAgICAgKi9cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaXNGb2xkID0gIXRoaXMuaXNGb2xkO1xyXG4gICAgICAgIGNvbnN0IGlzTm90RW1wdHkgPSB0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMuc29tZShjb25kaXRpb24gPT4gY29uZGl0aW9uLnZhbHVlLmlzRW1wdHkoKSA9PSBmYWxzZSk7XHJcbiAgICAgICAgaWYgKGlzTm90RW1wdHkpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGlzdDogQXJyYXk8UXVlcnlDb25kaXRpb24+ID0gY2xvbmVEZWVwKHRoaXMuZmFycmlzUXVlcnlDb25kaXRpb24ucmVzZXRTZWxlY3RlZENvbmRpdGlvblZhbHVlcyh0cnVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBuZXdMaXN0O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU29sdXRpb24ucXVlcnlDb25kaXRpb25zID0gbmV3TGlzdDtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5maWx0ZXIoKGl0ZW06IFF1ZXJ5Q29uZGl0aW9uKSA9PiB7IHJldHVybiAhIWl0ZW0udmlzaWJsZSB9KTtcclxuICAgICAgICAgICAgdGhpcy5zb2x1dGlvbkhhbmRsZXIuc2V0Q3VycmVudFF1ZXJ5Q29uZGl0aW9ucyhjbG9uZURlZXAodGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc29sdXRpb25IYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnModGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5tYXJrQXNDaGFuZ2VkKHRydWUsIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pZCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmipjlj6DmjInpkq7nmoTmuIXnqbpcclxuICAgICAqL1xyXG4gICAgZm9sZENsZWFySGFuZGxlcigpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0ZvbGQpIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c54K55Ye755qE5pe25YCZ5piv5Y+O5oqY55qEXHJcbiAgICAgICAgICAgIHRoaXMuaXNGb2xkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN1bW1hcnlDb25kaXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3VtbWFyeUNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOeCueWHu+eahOaXtuWAmeaYr+WxleW8gOeahFxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog566t5aS054K55Ye75LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIGFycm93Q2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5pc0ZvbGQgPSAhdGhpcy5pc0ZvbGQ7XHJcbiAgICAgICAgdGhpcy53aGVuRm9sZFNldFN1bW1hcnlDb25kaXRpb25zKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRm9sZCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlDb25kaXRpb25zID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgd2hlbkZvbGRTZXRTdW1tYXJ5Q29uZGl0aW9ucygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0ZvbGQpIHtcclxuICAgICAgICAgICAgLy8g5aaC5p6c5Y+O5oqYXHJcbiAgICAgICAgICAgIGNvbnN0IGlzTm90RW1wdHkgPSB0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMuc29tZShjb25kaXRpb24gPT4gY29uZGl0aW9uLnZhbHVlLmlzRW1wdHkoKSA9PSBmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmIChpc05vdEVtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1bW1hcnlDb25kaXRpb25zID0gdGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zLmZpbHRlcihjb25kaXRpb24gPT4gY29uZGl0aW9uLnZhbHVlLmlzRW1wdHkoKSA9PSBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1bW1hcnlDb25kaXRpb25zID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkuLrns7vnu5/pooTnva7mlrnmoYjmiJbogIXoh6rlrprkuYnmn6Xor6LmlrnmoYjorr7nva7nrZvpgInmnaHku7bpu5jorqTlgLxcclxuICAgICAqIEBwYXJhbSBjb25maWdzIOm7mOiupOWAvOiuvue9rlxyXG4gICAgICogQHBhcmFtIHNlbGVjdGVkU29sdXRpb24g5b2T5YmN6YCJ5oup55qE562b6YCJ5pa55qGIXHJcbiAgICAgKi9cclxuICAgIHNldFF1ZXJ5Q29uZGl0aW9uVmFsdWVzKGNvbmZpZ3M6IERlZmF1bHRDb25maWdzLCBzZWxlY3RlZFNvbHV0aW9uOiBRdWVyeVNvbHV0aW9uVm8pOiB2b2lkIHtcclxuICAgICAgICBsZXQgdGFyZ2V0U29sdXRpb246IFF1ZXJ5U29sdXRpb25WbztcclxuICAgICAgICBsZXQgdGFyZ2V0U29sdXRpb25XaXRoVmFsdWVzOiBRdWVyeVNvbHV0aW9uVm87XHJcbiAgICAgICAgLy/pq5jnuqfmqKHlvI/kuIvkuI3mlK/mjIHpu5jorqTlgLxcclxuICAgICAgICBpZiAoY29uZmlncyAmJiBBcnJheS5pc0FycmF5KGNvbmZpZ3MuZmllbGRDb25maWdzKSAmJiBjb25maWdzLmZpZWxkQ29uZmlncy5sZW5ndGggJiYgc2VsZWN0ZWRTb2x1dGlvbi5tb2RlICE9PSAnMicpIHtcclxuICAgICAgICAgICAgaWYoc2VsZWN0ZWRTb2x1dGlvbi5oYXNPd25Qcm9wZXJ0eSgndHlwZScpICYmIHNlbGVjdGVkU29sdXRpb25bJ3R5cGUnXSA9PSAncHJlJykge1xyXG4gICAgICAgICAgICAgICAgLy/lpoLmnpzmmK/ljoblj7LorrDlvZVcclxuICAgICAgICAgICAgICAgIHRhcmdldFNvbHV0aW9uID0gbnVsbDsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChzZWxlY3RlZFNvbHV0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFNvbHV0aW9uID0gY29uZmlncy5pc0N1cnJlbnQgPyBzZWxlY3RlZFNvbHV0aW9uIDogKHNlbGVjdGVkU29sdXRpb24uaXNTeXN0ZW0gPyBzZWxlY3RlZFNvbHV0aW9uIDogbnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRhcmdldFNvbHV0aW9uICYmIHRhcmdldFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyAmJiB0YXJnZXRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRTb2x1dGlvbldpdGhWYWx1ZXMgPSBjbG9uZURlZXAodGhpcy5zb2x1dGlvblNlcnZpY2Uuc2V0VmFsdWVzKHRhcmdldFNvbHV0aW9uLCBjb25maWdzLmZpZWxkQ29uZmlncywgISFjb25maWdzLnJlYWRvbmx5KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmVTZXREZWZhdWx0VmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGFyZ2V0U29sdXRpb25XaXRoVmFsdWVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v5LiN5Li66Ieq5a6a5LmJ5pa55qGI6K6+572u6buY6K6k5YC85pe277yM5qCH6K6w5LiL6KaB5Li65YW26LWL6buY6K6k5YC855qE5oSP5Zu+77yM5L2G5pyq5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmVTZXREZWZhdWx0VmFsdWUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ6K6+572u6buY6K6k5YC877yM5bCx5oqK5b2T5YmN6YCJ5Lit5pa55qGI55qE5p2h5Lu255qE5YC85Lyg5Ye6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvbHV0aW9uSGFuZGxlci5zZXRDdXJyZW50UXVlcnlDb25kaXRpb25zKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3Qoc2VsZWN0ZWRTb2x1dGlvbilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb3nrZvpgInmlrnmoYjlkI7oh6rliqjmn6Xor6JcclxuICAgICAqIEBwYXJhbSBjdXJyZW50U29sdXRpb24g5b2T5YmN562b6YCJ5pa55qGIIFxyXG4gICAgICovXHJcbiAgICBpbml0QXV0b1F1ZXJ5KGN1cnJlbnRTb2x1dGlvbjogUXVlcnlTb2x1dGlvblZvKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlSW5pdFF1ZXJ5ICYmIHRoaXMuZG9uZUluaXRRdWVyeSAmJiB0aGlzLmVuYWJsZUhpc3RvcnkgJiYgY3VycmVudFNvbHV0aW9uLm1vZGUgIT09ICcyJykge1xyXG4gICAgICAgICAgICAvLyDlt7LpgJrov4fljoblj7LorrDlvZXov5vooYzov4fmn6Xor6JcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZW5hYmxlUXVlcnk6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGlmIChjdXJyZW50U29sdXRpb24gJiYgY3VycmVudFNvbHV0aW9uLnF1ZXJ5Q29uZGl0aW9ucyAmJiBjdXJyZW50U29sdXRpb24ucXVlcnlDb25kaXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1NldERlZmF1bHRWYWx1ZSAmJiAhdGhpcy5kb25lU2V0RGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGVRdWVyeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZW5hYmxlUXVlcnkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVRdWVyeSAmJiB0aGlzLmVuYWJsZUluaXRRdWVyeSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzLnNvbHV0aW9uSGFuZGxlci5zZXRGaWx0ZXJDb25kaXRpb25zKHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5xdWVyeUNvbmRpdGlvbnMpOyDmiafooYxxdWVyeeaWueazleaXtu+8jOW3sue7j+aJp+ihjHNldEZpbHRlckNvbmRpdGlvbnNcclxuICAgICAgICAgICAgLy9pZih0aGlzLl9zZWxmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZhcnJpcy1wYW5lbCAuYnRuLWdyb3VwIC5idG4tcHJpbWFyeScpKXtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmVJbml0UXVlcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5b2T5YmN5p+l6K+i5pa55qGI55qE562b6YCJ5p2h5Lu25Y+R55Sf5Y+Y5YyW5pe277yM5qCH6K6w5pa55qGI5aSE5LqO57yW6L6R54q25oCBXHJcbiAgICAgKiBAcGFyYW0gaXNDaGFuZ2VkIOaWueahiOaYr+WQpuWkhOS6jue8lui+keeKtuaAgVxyXG4gICAgICogQHBhcmFtIHNvbHV0aW9uSWQg6ZyA6KaB5qCH6K6w5piv5ZCm5aSE5LqO57yW6L6R54q25oCB55qE5pa55qGI55qEaWRcclxuICAgICAqL1xyXG4gICAgbWFya0FzQ2hhbmdlZChpc0NoYW5nZWQ6IGJvb2xlYW4sIHNvbHV0aW9uSWQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucXVlcnlTb2x1dGlvblZvcy5mb3JFYWNoKHNvbHV0aW9uID0+IHtcclxuICAgICAgICAgICAgaWYgKHNvbHV0aW9uLmlkID09IHNvbHV0aW9uSWQpXHJcbiAgICAgICAgICAgICAgICBzb2x1dGlvbi5pc0NoYW5nZWQgPSBpc0NoYW5nZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uQWR2YW5jZWRWb3MuZm9yRWFjaChzb2x1dGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzb2x1dGlvbi5pZCA9PSBzb2x1dGlvbklkKVxyXG4gICAgICAgICAgICAgICAgc29sdXRpb24uaXNDaGFuZ2VkID0gaXNDaGFuZ2VkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTb2x1dGlvbi5pc0NoYW5nZWQgPSBpc0NoYW5nZWQ7XHJcbiAgICAgICAgdGhpcy5jZGYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5aSE55CG562b6YCJ5oyJ6ZKu5ZKM5riF56m65oyJ6ZKu55qE5ZON5bqU5byP5L2N572u5Y+Y5pu0XHJcbiAgICAgKiBAcGFyYW0gJGV2ZW50IGZhcnJpcy1xdWVyeWNvbmRpdGlvbue7hOS7tuWGhemDqOaYr+WQpuaYvuekuuaMiemSrlxyXG4gICAgICovXHJcbiAgICAvLyBzaG93QnV0dG9uSGFuZGxlKCRldmVudDogYW55KSB7XHJcbiAgICAvLyAgICAgaWYoIXRoaXMuaXNEaXNhYmxlZCl7XHJcbiAgICAvLyAgICAgICAgIGxldCBkYXRhID0gJGV2ZW50O1xyXG4gICAgLy8gICAgICAgICB0aGlzLnF1ZXJ5QnV0dG9uT25SaWdodCA9ICFkYXRhO1xyXG4gICAgLy8gICAgICAgICBpZih0aGlzLmVuYWJsZUluaXRRdWVyeSAmJiAhdGhpcy5kb25lSW5pdFF1ZXJ5KSB7XHJcbiAgICAvLyAgICAgICAgICAgICB0aGlzLmluaXRBdXRvUXVlcnkodGhpcy5zZWxlY3RlZFNvbHV0aW9uKTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOmUruebmOebkeWQrOWHveaVsO+8jOW9k+aMieS4i+Wbnui9pumUruaXtuebuOW9k+S6juaMieS4i+etm+mAieaMiemSrlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxpc3RlbktleUJvYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX3NlbGYubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleURvd24pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgLy/pq5jnuqfmqKHlvI/kuIvmlbDmja7moLzlvI/nmoTpl67popjvvIzovpPlhaXnirbmgIHkuK3nm7TmjqXlm57ovabvvIzovpPlhaXmoYbnsbvlnovmjqfku7bml6Dms5Xmm7TmlrB2YWx1Ze+8jOaJi+WKqOinpuWPkeS4gOS4i+WkseWOu+eEpueCue+8jOabtOaWsOeKtuaAgVxyXG4gICAgICAgICAgICBpZih0aGlzLnNlbGVjdGVkU29sdXRpb24ubW9kZSA9PT0gJzInKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRWxlICA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZS5ibHVyKClcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUVsZS5mb2N1cygpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5xdWVyeSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6Ieq5Yqo5Yid5aeL5YyW5p+l6K+iXHJcbiAgICAgKiDlkK/nlKjljoblj7LorrDlvZXvvIzlubbkuJTlkK/nlKjkuobliJ3lp4vljJbmn6Xor6LvvIzlpoLmnpzmnInmnaHku7bvvIzlsLHov5vooYzmn6Xor6JcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0QXV0b1F1ZXJ5QnlMUygpIHtcclxuICAgICAgICAvLyDlkK/nlKjljoblj7JcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVIaXN0b3J5ICYmICF0aGlzLmlzRGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgLy8ga2V5XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TFNLZXkoKTtcclxuICAgICAgICAgICAgLy8g5Yid5aeL5YyW5a+56LGhXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFF1ZXJ5U29sdXRpb24oKTtcclxuICAgICAgICAgICAgLy8g5aaC5p6c6K6+572u5LqG5Yid5aeL5p+l6K+iXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUluaXRRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRJbml0UXVlcnlTb2x1dGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ11bJ3F1ZXJ5Q29uZGl0aW9ucyddLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeUNvbmRpdGlvbnMgPSBjbG9uZURlZXAodGhpcy5oaXN0b3J5UmVmZXJbJ2ZvdW5kU2NobWUnXVsncXVlcnlDb25kaXRpb25zJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMgPSBxdWVyeUNvbmRpdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlU2VsZWN0ZWRDb25kaXRpb25zID0gdGhpcy5zZWxlY3RlZEZpZWxkQ29uZGl0aW9ucy5maWx0ZXIoKGl0ZW06IFF1ZXJ5Q29uZGl0aW9uKSA9PiB7IHJldHVybiAhIWl0ZW0udmlzaWJsZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aXNpYmxlQ29uZGl0aW9ucyA9IGNsb25lRGVlcCh0aGlzLnZpc2libGVTZWxlY3RlZENvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiuvue9ruafpeivouadoeS7tlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29sdXRpb25IYW5kbGVyLnNldEZpbHRlckNvbmRpdGlvbnModmlzaWJsZUNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaKm+WHuuafpeivouS6i+S7tlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlFbWl0dGVyLmVtaXQodmlzaWJsZUNvbmRpdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOagh+iusFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9uZUluaXRRdWVyeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0UXVlcnlTb2x1dGlvbigpIHtcclxuICAgICAgICBsZXQgcXVlcnlzb2x1dGlvblZPID0gbmV3IFF1ZXJ5U29sdXRpb25WbygpO1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy5pZCA9IHRoaXMuc29sdXRpb25TZXJ2aWNlLmdldEd1aWQoKTtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uY29kZSA9IHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZShcInF1ZXJ5U29sdXRpb24uY29udGFpbmVyLmhpc3Ryb3lOYW1lXCIpO1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uYmVsb25nSWQgPSB0aGlzLmZvcm1JZDtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uaXNTeXN0ZW0gPSB0cnVlO1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy50eXBlID0gJ3ByZSc7XHJcbiAgICAgICAgcXVlcnlzb2x1dGlvblZPLm1vZGUgPSAnMSc7XHJcbiAgICAgICAgcXVlcnlzb2x1dGlvblZPLnF1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkID0ge3JlbGF0aW9uOjEsIGl0ZW1zOltdLCBjaGlsZHJlbjogW10sIHBhdGg6IFsxXSwgZ3JvdXBpZDoxfVxyXG4gICAgICAgIHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ10gPSBxdWVyeXNvbHV0aW9uVk87XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMlumrmOe6p+aooeW8j1xyXG4gICAgICovXHJcbiAgICAgcHJpdmF0ZSBpbml0QWR2YW5jZWRTb2x1dGlvbigpIHtcclxuICAgICAgICBsZXQgcXVlcnlzb2x1dGlvblZPID0gbmV3IFF1ZXJ5U29sdXRpb25WbygpO1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy5pZCA9IHRoaXMuc29sdXRpb25TZXJ2aWNlLmdldEd1aWQoKTtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uY29kZSA9ICgodGhpcy5wcmVzZXRRdWVyeVNvbHV0aW9uTmFtZSAhPSB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5zeXNQcmVzZXROYW1lXCIpKSA/IHRoaXMucHJlc2V0UXVlcnlTb2x1dGlvbk5hbWUgOiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJxdWVyeVNvbHV0aW9uLmNvbnRhaW5lci5kZWZhdWx0TmFtZVwiKSkgKyB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoXCJhZHZhbmNlZE1vZGUudGV4dC5zeXNBZHZhbmNlZE5hbWVcIik7O1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy5xdWVyeUNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uYmVsb25nSWQgPSB0aGlzLmZvcm1JZDtcclxuICAgICAgICBxdWVyeXNvbHV0aW9uVk8uaXNTeXN0ZW0gPSB0cnVlO1xyXG4gICAgICAgIHF1ZXJ5c29sdXRpb25WTy50eXBlID0gJ3ByZSc7XHJcbiAgICAgICAgcXVlcnlzb2x1dGlvblZPLm1vZGUgPSAnMic7XHJcbiAgICAgICAgcXVlcnlzb2x1dGlvblZPLnF1ZXJ5Q29uZGl0aW9uc0FkdmFuY2VkID0ge3JlbGF0aW9uOjEsIGl0ZW1zOltdLCBjaGlsZHJlbjogW10sIHBhdGg6IFsxXSwgZ3JvdXBpZDoxfVxyXG4gICAgICAgIHJldHVybiBxdWVyeXNvbHV0aW9uVk9cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluadpeiHqkxT55qE5p2h5Lu2XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9ybWF0SW5pdFF1ZXJ5U29sdXRpb24oKSB7XHJcbiAgICAgICAgbGV0IGhpc3Ryb3lDb25kaXRpb24gPSB0aGlzLmh0dHBTZXJ2aWNlLmdldExTKHRoaXMuaGlzdG9yeVJlZmVyLnNjaGVtZUtleUxTKTtcclxuICAgICAgICBpZiAoaGlzdHJveUNvbmRpdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBjb252ZXJ0b3IgPSBuZXcgUXVlcnlTb2x1dGlvblZvQ29udmVydG9yKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ11bJ3F1ZXJ5Q29uZGl0aW9ucyddID0gaGlzdHJveUNvbmRpdGlvbjtcclxuICAgICAgICAgICAgLy8g6KeE6IyD5YyW5p2h5Lu2XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ10gPSB0aGlzLmZvcm1hdFF1ZXJ5U29sdXRpb25WTyhjb252ZXJ0b3IsIHRoaXMuaGlzdG9yeVJlZmVyWydmb3VuZFNjaG1lJ10pO1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDphY3nva5cclxuICAgICAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2UudXBkYXRlQ29udHJvbCh0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddLCB0aGlzLnJlc2V0RmllbGRDb25maWdzKTtcclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5UmVmZXIuaW5pdENvbmRpdGlvbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L+d5a2Y5LmL5ZCO5pu05paw5Y6G5Y+yXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hhbmdlUXVlcnlIaXN0cm95KHVwZGF0ZUFsbCA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlSGlzdG9yeSB8fCB0aGlzLnNlbGVjdGVkU29sdXRpb24ubW9kZSAhPT0gJzEnKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHByZUluZGV4ID0gdGhpcy5xdWVyeVNvbHV0aW9uVm9zLmZpbmRJbmRleCgocXNvbHV0aW9uVk8pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHFzb2x1dGlvblZPWyd0eXBlJ10gPT0gJ3ByZSc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5omn6KGM5p+l6K+i5LmL5ZCO77yM5LiK5qyh5p+l6K+i55qE5L+u5pS55bCx5LiN6K6k5Li65piv5Y+Y5pu05LqGXHJcbiAgICAgICAgaWYgKHByZUluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVNvbHV0aW9uVm9zW3ByZUluZGV4XVsnaXNDaGFuZ2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTb2x1dGlvblsndHlwZSddID09ICdwcmUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb2x1dGlvblsnaXNDaGFuZ2VkJ10gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnlDb25kaXRpb25zID0gY2xvbmVEZWVwKHRoaXMuc2VsZWN0ZWRGaWVsZENvbmRpdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddLnF1ZXJ5Q29uZGl0aW9ucyA9IHF1ZXJ5Q29uZGl0aW9ucztcclxuICAgICAgICAvLyDmm7TmlrDnvJPlrZhcclxuICAgICAgICB0aGlzLmh0dHBTZXJ2aWNlLnNldExTKHRoaXMuaGlzdG9yeVJlZmVyLnNjaGVtZUtleUxTLCB0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddLnF1ZXJ5Q29uZGl0aW9ucyk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZUFsbCkge1xyXG4gICAgICAgICAgICAvLyDlj5Hotbfor7fmsYLkv53lrZjljoblj7LorrDlvZVcclxuICAgICAgICAgICAgdGhpcy5odHRwU2VydmljZS5zYXZlSGlzdHJveSh0aGlzLmhpc3RvcnlSZWZlclsnZm91bmRTY2htZSddLCB0aGlzLnNlc3Npb25JZCkuc3Vic2NyaWJlKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWkhOeQhmlmcmFtZeW1jOWll1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRvcFdpbmRvdygpOiBXaW5kb3cge1xyXG4gICAgICAgIGxldCBjdXJXaW46IFdpbmRvdyA9IHdpbmRvdy5zZWxmO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJXaW4ubG9jYXRpb24ub3JpZ2luID09PSBjdXJXaW4ucGFyZW50LmxvY2F0aW9uLm9yaWdpbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cldpbiAhPT0gY3VyV2luLnBhcmVudCAmJiAhKGN1cldpbiBhcyBhbnkpLmlzUlRGVG9wV2luKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyV2luID0gY3VyV2luLnBhcmVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICByZXR1cm4gY3VyV2luO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572ua2V5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0TFNLZXkoKSB7XHJcbiAgICAgICAgLy8g6I635Y+Wd2luZG93XHJcbiAgICAgICAgbGV0IGN1cldpbmRvdyA9IHRoaXMuZ2V0VG9wV2luZG93KCk7XHJcbiAgICAgICAgbGV0IHVzZXJDb2RlID0gJyc7XHJcbiAgICAgICAgaWYgKGN1cldpbmRvd1snZ3NwZnJhbWV3b3JrU2VydmljZSddICYmIGN1cldpbmRvd1snZ3NwZnJhbWV3b3JrU2VydmljZSddLmhhc093blByb3BlcnR5KCdjb21tb24nKSkge1xyXG4gICAgICAgICAgICB1c2VyQ29kZSA9IGN1cldpbmRvd1snZ3NwZnJhbWV3b3JrU2VydmljZSddWydjb21tb24nXS51c2VySW5mb3MuZ2V0KCkuY29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5UmVmZXIuc2NoZW1lS2V5TFMgPSB1c2VyQ29kZSA/ICdTY2hlbWUnICsgdGhpcy5faWRTZXIuZW5jcnlwdCh1c2VyQ29kZSArIHRoaXMuZm9ybUlkKSA6ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWIpOaWreW9k+WJjeeUqOaIt+aYr+WQpuacieadg+mZkOiuvue9ruWFrOWFseexu+Wei+etm+mAieaWueahiFxyXG4gICAgY2hlY2tBdXRob3JpdHkoZTogYW55KSB7XHJcbiAgICAgICAgaWYoZSAhPSAncHJpdmF0ZScpIHsgXHJcbiAgICAgICAgICAgIHRoaXMuaHR0cFNlcnZpY2UuZ2V0QXV0aCgnUXVlcnlTb2x1dGlvbicsIHRoaXMuc2Vzc2lvbklkKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWRhdGFbJ3N1Y2Nlc3MnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvbHV0aW9uU2VydmljZS5zaG93SW5mbyh0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ2V4dGVuZFF1ZXJ5U29sdXRpb24uYXV0aC5jcmVhdGVFcnJvcicpLCAnd2FybmluZycsICcnLCAxNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQXNEaWFsb2cuYXV0aG9yaXR5RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5yYWRpb0dyb3VwVmFsdWUgPSB0aGlzLnNhdmVBc0RpYWxvZy5wUmFkaW9Hcm91cFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUgPT0gJ29yZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yZ0RhdGEgPSBkYXRhWydhdXRoT3JnYW5pemF0aW9uRGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3JnRGF0YSkgJiYgb3JnRGF0YS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5kYXRhUGVybWlzc2lvbklkcyA9IG9yZ0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZ0RhdGEudG9TdHJpbmcoKSAhPSAnKicgJiYgIXRoaXMuc2F2ZUFzRGlhbG9nLnNlbGVjdGVkT3JnSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5zZWxlY3RlZE9yZ0lkcyA9IHRoaXMuc2F2ZUFzRGlhbG9nLmRhdGFQZXJtaXNzaW9uSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5ub0RhdGFBdXRob3JpdHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5wUmFkaW9Hcm91cFZhbHVlID0gZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb2x1dGlvblNlcnZpY2Uuc2hvd0luZm8odGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdleHRlbmRRdWVyeVNvbHV0aW9uLmF1dGgubm9EYXRhQXV0aG9yaXR5JyksICd3YXJuaW5nJywgJycsIDE1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUFzRGlhbG9nLm5vRGF0YUF1dGhvcml0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlQXNEaWFsb2cucmFkaW9Hcm91cFZhbHVlID0gdGhpcy5zYXZlQXNEaWFsb2cucFJhZGlvR3JvdXBWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUFzRGlhbG9nLnBSYWRpb0dyb3VwVmFsdWUgPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4odGhpcy5sb2NhbGVTZXJ2aWNlLmdldFZhbHVlKCdleHRlbmRRdWVyeVNvbHV0aW9uLmF1dGguYXBpRXJyb3InKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUFzRGlhbG9nLnBSYWRpb0dyb3VwVmFsdWUgPSBlO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVBc0RpYWxvZy5hdXRob3JpdHlFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG59XHJcbiJdfQ==