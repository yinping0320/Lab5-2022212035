/**
 * @fileoverview added by tsickle
 * Generated from: lib/summary-condition/summary-condition.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Injector } from '@angular/core';
import { QueryCondition, ControlType } from '@farris/component-querycondition';
import { DateTimeHelperService } from '@farris/ui-common/date';
import { NumberHelperService } from '@farris/ui-common/number';
import { LocaleService } from '@farris/ui-locale';
export class SummaryConditionComponent {
    /**
     * @param {?} dtHelper
     * @param {?} numberHelper
     * @param {?} injector
     */
    constructor(dtHelper, numberHelper, injector) {
        this.dtHelper = dtHelper;
        this.numberHelper = numberHelper;
        this.injector = injector;
        // 分隔符
        this._spliter = '';
        // 是否区间
        this._isRange = false;
        this.showTime = false;
        this.textField = 'name';
        this.valueField = 'value';
        // 从服务器端取值是格式化后的
        this.returnFormat = '';
        // 文本显示
        this.text = "";
        // 千分位符号
        this.thousand = ',';
        // 小数点处符号
        this.decimal = '.';
        // 货币符号及值展现形式
        this.expression = '%s%v';
        // formControl显示的文本
        /**
         * 国际化类型
         * \@Input() localizationType: string;
         */
        // 货币符号，默认是RMB
        this.currencySymbol = '￥';
        // 十进制前面填充的符号
        this.filledSymbol = '0';
        this.localeService = this.injector.get(LocaleService);
    }
    /**
     * @param {?} qCondition
     * @return {?}
     */
    set condition(qCondition) {
        this._condition = qCondition;
        this.formatCondition();
    }
    /**
     * @return {?}
     */
    get condition() {
        return this._condition;
    }
    ;
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    formatCondition() {
        /** @type {?} */
        let qCondition = this.condition;
        if (qCondition) {
            this._conditionType = qCondition.control.getControlType();
            /** @type {?} */
            let textValueObj;
            /** @type {?} */
            let textOriginalValue = qCondition.value.getOriginalValue();
            /** @type {?} */
            let startValue;
            /** @type {?} */
            let endValue;
            switch (this._conditionType) {
                case ControlType.Text:
                    //文本
                    textValueObj = (/** @type {?} */ (qCondition.value));
                    textOriginalValue = textValueObj.value && textValueObj.value.trim();
                    break;
                case ControlType.SingleNumber:
                    // 数值
                    this.numberOptions = { precision: qCondition.control['precision'], type: 'number' };
                    break;
                case ControlType.NumberRange:
                    // 数值区间
                    this._isRange = true;
                    this._spliter = '~';
                    this.numberOptions = { precision: qCondition.control['precision'], type: 'number' };
                    startValue = qCondition.value['startValue'] ? qCondition.value['startValue'] : '';
                    endValue = qCondition.value['endValue'] ? qCondition.value['endValue'] : '';
                    textOriginalValue = [startValue, endValue].join(this._spliter);
                    break;
                case ControlType.SingleDate:
                    //单个日期
                    this.returnFormat = qCondition.control && qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : "yyyy-MM-dd";
                    this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] : "yyyy-MM-dd";
                    break;
                case ControlType.DateRange:
                    //日期区间
                    this._isRange = true;
                    this._spliter = '~';
                    this.returnFormat = qCondition.control && qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : "yyyy-MM-dd";
                    this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] : "yyyy-MM-dd";
                    startValue = qCondition.value['startTime'] ? qCondition.value['startTime'] : '';
                    endValue = qCondition.value['endTime'] ? qCondition.value['endTime'] : '';
                    textOriginalValue = [startValue, endValue].join(this._spliter);
                    break;
                case ControlType.SingleYear:
                    // 只有年
                    this.returnFormat = qCondition.control && qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : "yyyy";
                    this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] : "yyyy";
                    break;
                case ControlType.SingleMonth:
                    // 只有月
                    this.returnFormat = qCondition.control && qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : "yyyy-MM";
                    this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] : "yyyy-MM";
                    break;
                case ControlType.MonthRange:
                    // 月范围
                    this._isRange = true;
                    this._spliter = '~';
                    this.returnFormat = qCondition.control && qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : "yyyy-MM";
                    this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] : "yyyy-MM";
                    startValue = qCondition.value['startTime'] ? qCondition.value['startTime'] : '';
                    endValue = qCondition.value['endTime'] ? qCondition.value['endTime'] : '';
                    break;
                case ControlType.SingleDateTime:
                    // 时间
                    this.showTime = true;
                    this.returnFormat = qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : this.returnFormat;
                    this.format = 'yyyy-MM-dd HH:mm:ss';
                    if (qCondition.control) {
                        if (qCondition.control['enableCustomFormat']) {
                            this.format = qCondition.control['format'] ? qCondition.control['format'] : this.returnFormat;
                        }
                        else {
                            this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] + ' HH:mm:ss' : this.returnFormat;
                        }
                    }
                    break;
                case ControlType.DateTimeRange:
                    // 时间区间
                    this.showTime = true;
                    this._isRange = true;
                    this._spliter = '~';
                    this.returnFormat = qCondition.control['returnFormat'] ? qCondition.control['returnFormat'] : this.returnFormat;
                    this.format = 'yyyy-MM-dd HH:mm:ss';
                    if (qCondition.control) {
                        if (qCondition.control['enableCustomFormat']) {
                            this.format = qCondition.control['format'] ? qCondition.control['format'] : this.returnFormat;
                        }
                        else {
                            this.format = qCondition.control && qCondition.control['format'] ? qCondition.control['format'] + ' HH:mm:ss' : this.returnFormat;
                        }
                    }
                    startValue = qCondition.value['startTime'] ? qCondition.value['startTime'] : '';
                    endValue = qCondition.value['endTime'] ? qCondition.value['endTime'] : '';
                    break;
                case ControlType.BoolCheck:
                    // 布尔值-单个值
                    /** @type {?} */
                    let checkValue = ((/** @type {?} */ (qCondition.value))).value;
                    textOriginalValue = checkValue.length > 0 ? checkValue['0'] : null;
                    break;
                case ControlType.DropDownList:
                    // 下拉
                    this._spliter = ',';
                    if (qCondition.control['uri'] && !qCondition.control['enumValues']) {
                        textOriginalValue = ((/** @type {?} */ (qCondition.value['value']))).map((/**
                         * @param {?} t
                         * @return {?}
                         */
                        t => t[this.valueField])).join(this._spliter);
                    }
                    break;
                case ControlType.Radio:
                    // 单选组
                    this._spliter = ',';
                    break;
                case ControlType.InputGroup:
                    // inputgroup
                    textValueObj = (/** @type {?} */ (qCondition.value));
                    textOriginalValue = textValueObj.textValue && textValueObj.textValue.trim();
                    break;
                case ControlType.SmartHelp:
                    // 帮助
                    textValueObj = (/** @type {?} */ (qCondition.value));
                    textOriginalValue = textValueObj.textValue && textValueObj.textValue.trim();
                    break;
                default:
                    textOriginalValue = qCondition.value.getOriginalValue();
            }
            this.text = this.formatValue(textOriginalValue);
        }
        else {
            this.text = '';
        }
    }
    /**
     * 处理多语言，待定
     * @param {?} value
     * @return {?}
     */
    formatLang(value) {
        return value && value[this.currentLanguage] ? value[this.currentLanguage] : '';
    }
    /**
     * C货币
     * D十进制
     * F浮点数
     * N数字，带千分位
     * P百分比
     * @param {?} value
     * @return {?}
     */
    getFormatNumberValue(value) {
        if (!this.format && !this.numberOptions) {
            return value.toString();
        }
        if (this.numberOptions && this.numberOptions.type && this.numberOptions.type == 'number') {
            if (this.numberOptions.formatter) {
                return this.numberOptions.formatter(value);
            }
            else {
                if (this.numberOptions.useThousands) {
                    // 设置了千分位
                    if (this.numberOptions.precision != undefined) {
                        this.format = 'n' + this.numberOptions.precision;
                    }
                    else {
                        this.format = 'n';
                    }
                }
                else {
                    // 没有设置千分位
                    if (this.numberOptions.precision != undefined) {
                        this.format = 'f' + this.numberOptions.precision;
                    }
                    else {
                        // 没有设置精度，没有设置千分位
                        return value.toString();
                    }
                }
            }
        }
        else {
            return value.toString();
        }
        /** @type {?} */
        const firstLetter = this.currencyToUpperCase(this.format.substring(0, 1));
        /** @type {?} */
        const precision = Number(this.format.substring(1));
        /** @type {?} */
        let config = {};
        /** @type {?} */
        let result;
        if (!/C|D|F|N|P/g.test(firstLetter)) {
            console.warn(`不支持format为 ${this.format} 类型的数字格式化`);
            return;
        }
        if (this.thousand) {
            Object.assign(config, { thousand: this.thousand });
        }
        if (this.decimal) {
            Object.assign(config, { decimal: this.decimal });
        }
        if (this.expression) {
            Object.assign(config, { format: this.expression });
        }
        switch (firstLetter) {
            case 'C':
                Object.assign(config, { prefix: this.currencySymbol, precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'D':
                result = this.toDecimal(value, precision);
                break;
            case 'F':
                Object.assign(config, { prefix: '', thousand: '', precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'N':
                Object.assign(config, { prefix: '', precision });
                result = this.numberHelper.formatMoney(value, config);
                break;
            case 'P':
                result = this.toPercent(value, precision);
                break;
        }
        return result;
    }
    /**
     * @param {?} value 转换成十进制的数字
     * @param {?} precision 十进制数字的长度
     * @return {?}
     */
    toDecimal(value, precision) {
        if (value.toString().indexOf('.') > -1) {
            console.warn('十进制转换仅限整型类型');
            return;
        }
        return (Array(precision).join(this.filledSymbol) + value).slice(-precision);
    }
    /**
     * @param {?} value 转换成百分数的数字
     * @param {?} precision
     * @return {?}
     */
    toPercent(value, precision) {
        return Number(value * 100).toFixed(Number(precision)) + '%';
    }
    /**
     * 将货币符号首字母转换成大写
     * @param {?} value
     * @return {?}
     */
    currencyToUpperCase(value) {
        return value.replace(/[a-z]+/g, (/**
         * @param {?} word
         * @return {?}
         */
        (word) => {
            return word.toUpperCase();
        }));
    }
    /**
     * 处理年，Y=>y, D=>d
     * @param {?} value
     * @return {?}
     */
    dateToUpperCase(value) {
        /** @type {?} */
        let newFormat;
        if (/Y/g.test(value) === true) {
            newFormat = value.replace(/Y/g, 'y');
        }
        else {
            newFormat = value;
        }
        if (/D/g.test(newFormat) === true) {
            newFormat = newFormat.replace(/D/g, 'd');
        }
        return newFormat;
    }
    /**
     * 枚举类型处理
     * @param {?} value
     * @return {?}
     */
    getFormatEnumValue(value) {
        if (value == undefined || value === null || value === '') {
            return '';
        }
        if (this.dataSource && this.dataSource.length) {
            // 可能存在多选枚举，作为分隔符  
            // let curVals = ('' + value).split(',');
            /** @type {?} */
            let curVals = ('' + value).split(this._spliter);
            /** @type {?} */
            let nameResult = [];
            for (let k = 0; k < curVals.length; k++) {
                /** @type {?} */
                let findObj = this.dataSource.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                item => {
                    return item[this.valueField] == curVals[k];
                }));
                if (findObj) {
                    nameResult.push(findObj[this.textField]);
                }
                else {
                    nameResult.push(curVals[k]);
                }
            }
            if (nameResult.length > 0) {
                // return nameResult.join(',');
                return nameResult.join(this._spliter);
            }
            return '';
        }
        else {
            return value;
        }
    }
    /**
     * boolean值处理
     * @param {?} value
     * @return {?}
     */
    getFormatCheckBoxValue(value) {
        if (value === true) {
            return this.localeService.getValue('text.yes');
        }
        else if (value === false || value == null || typeof value === 'undefined') {
            return this.localeService.getValue('text.no');
        }
        else {
            return value;
        }
    }
    /*
      * 日期格式化
      */
    /**
     * @param {?} value
     * @return {?}
     */
    dateformat(value) {
        /** @type {?} */
        let str;
        if (!this.format) {
            this.format = 'YYYY-MM-dd';
        }
        // 当前值是已经格式化后的日期字符串
        if (this.returnFormat && typeof value == 'string') {
            value = this.getDateFromFormatedString(value, this.returnFormat);
        }
        if (this.format === 'hh:mm:ss' || this.format === 'HH:mm:ss') {
            // 格式化时间  临时处理
            str = value;
        }
        else {
            // 格式化日期
            str = this.dtHelper.formatTo(value, this.dateToUpperCase(this.format));
        }
        return str;
    }
    /**
     * @private
     * @param {?} dateString
     * @param {?} format
     * @return {?}
     */
    getDateFromFormatedString(dateString, format) {
        /** @type {?} */
        var result = { year: 0, month: 0, day: 0, hour: 0, minite: 0, second: 0 };
        if (dateString) {
            format.replace(/y{4}|Y{4}|M+|d+|D+|h+|H+|m+|s+/g, (/**
             * @param {?} m
             * @param {?} a
             * @param {?} b
             * @param {?} c
             * @return {?}
             */
            function (m, a, b, c) {
                dateString.substring(a).replace(/\d+/, (/**
                 * @param {?} d
                 * @return {?}
                 */
                function (d) {
                    if (d) {
                        c = parseInt(d.substr(0, m.length), 10);
                    }
                }));
                if (/y+/i.test(m) && !result.year)
                    result.year = c;
                if (/M+/.test(m) && !result.month)
                    result.month = c;
                if (/d+/i.test(m) && !result.day)
                    result.day = c;
                if (/h+/i.test(m) && !result.hour)
                    result.hour = c;
                if (/m+/.test(m) && !result.minite)
                    result.minite = c;
                if (/s+/.test(m) && !result.second)
                    result.second = c;
            }));
        }
        result.day = result.day ? result.day : 1;
        result.month = result.month ? result.month : 1;
        /** @type {?} */
        var resultDate = new Date(result.year + '/' + result.month + '/' + result.day + ' ' + result.hour + ':' + result.minite + ':' + result.second);
        return resultDate;
    }
    /**
     * @param {?} date
     * @param {?} fmt
     * @return {?}
     */
    function(date, fmt) {
        /** @type {?} */
        var o = {
            'M+': date.getMonth() + 1,
            //月份
            'd+': date.getDate(),
            //日
            'h+': date.getHours(),
            //小时
            'm+': date.getMinutes(),
            //分
            's+': date.getSeconds(),
            //秒
            'q+': Math.floor((date.getMonth() + 3) / 3),
            //季度
            'S': date.getMilliseconds() //毫秒
        };
        if (!fmt) {
            fmt = 'yyyy-MM-dd hh:mm:ss';
        }
        if (/(y+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));
        }
        for (var k in o) {
            if (new RegExp('(' + k + ')').test(fmt)) {
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)));
            }
        }
        return fmt;
    }
    /**
     * 格式化处理
     * @param {?} value
     * @return {?}
     */
    formatValue(value) {
        /** @type {?} */
        let str;
        if (this.currentLanguage) {
            return this.formatLang(value);
        }
        // 标记类型
        if (this._conditionType !== ControlType.BoolCheck && (value == null || typeof value === 'undefined')) {
            return '';
        }
        switch (this._conditionType) {
            case ControlType.Text:
                str = value;
                break;
            case ControlType.DateRange:
            case ControlType.MonthRange:
            case ControlType.DateTimeRange:
                /** @type {?} */
                const dateValues = value.split(this._spliter);
                /** @type {?} */
                let dataStr = [];
                if (dateValues && dateValues.length) {
                    dateValues.forEach((/**
                     * @param {?} date
                     * @return {?}
                     */
                    date => {
                        /** @type {?} */
                        let val = this.dateformat(date);
                        dataStr.push(val);
                    }));
                }
                str = dataStr.join(this._spliter);
                break;
            case ControlType.SingleDate:
                if (value && value.text) {
                    str = value.text;
                }
                else {
                    str = this.dateformat(value);
                }
                break;
            case ControlType.SingleDateTime:
            case ControlType.SingleMonth:
            case ControlType.SingleYear:
                str = this.dateformat(value);
                break;
            case ControlType.SingleNumber:
                // 数字
                str = this.getFormatNumberValue(value);
                break;
            case ControlType.NumberRange:
                // 数字 区间     
                /** @type {?} */
                const numberValues = value.split(this._spliter);
                /** @type {?} */
                let resultStr = [];
                if (numberValues && numberValues.length) {
                    numberValues.forEach((/**
                     * @param {?} date
                     * @return {?}
                     */
                    date => {
                        /** @type {?} */
                        let val = this.getFormatNumberValue(date);
                        resultStr.push(val);
                    }));
                }
                str = resultStr.join(this._spliter);
                break;
            case ControlType.Radio:
                // 单选组
                this.dataSource = ((/** @type {?} */ (this.condition.control))).enumValues;
                str = this.getFormatEnumValue(value);
                break;
            case ControlType.DropDownList:
                // 下拉
                this.dataSource = ((/** @type {?} */ (this.condition.control))).enumValues;
                str = this.getFormatEnumValue(value);
                break;
            case ControlType.BoolCheck:
                // 布尔
                //this.dataSource = (this.condition.control as CheckBoxControl).data;
                str = this.getFormatCheckBoxValue(value);
                break;
            //帮助的话兼容旧数据，部分值为help-text-value-null的转化为空字符串
            case ControlType.SmartHelp:
                str = value === 'help-text-value-null' ? '' : value;
                break;
            case ControlType.ComboLookUp:
                str = value === 'help-text-value-null' ? '' : value;
                break;
            default:
                str = value;
        }
        return str;
    }
}
SummaryConditionComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-summary-condition',
                template: "<span class=\"summary-condition--label\">{{condition.fieldName}}</span>:<span class=\"summary-condition--text\">{{text}}</span>",
                styles: [""]
            }] }
];
/** @nocollapse */
SummaryConditionComponent.ctorParameters = () => [
    { type: DateTimeHelperService },
    { type: NumberHelperService },
    { type: Injector }
];
SummaryConditionComponent.propDecorators = {
    condition: [{ type: Input }],
    filledSymbol: [{ type: Input }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype._condition;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype._conditionType;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype._spliter;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype._isRange;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.showTime;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.textField;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.valueField;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.returnFormat;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.format;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.dataSource;
    /** @type {?} */
    SummaryConditionComponent.prototype.text;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.currentLanguage;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.thousand;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.decimal;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.expression;
    /**
     * 国际化类型
     * \@Input() localizationType: string;
     * @type {?}
     */
    SummaryConditionComponent.prototype.currencySymbol;
    /** @type {?} */
    SummaryConditionComponent.prototype.filledSymbol;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.numberOptions;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.localeService;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.dtHelper;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.numberHelper;
    /**
     * @type {?}
     * @private
     */
    SummaryConditionComponent.prototype.injector;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VtbWFyeS1jb25kaXRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvcXVlcnlzb2x1dGlvbi8iLCJzb3VyY2VzIjpbImxpYi9zdW1tYXJ5LWNvbmRpdGlvbi9zdW1tYXJ5LWNvbmRpdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxRQUFRLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFDOUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxXQUFXLEVBQW1JLE1BQU0sa0NBQWtDLENBQUM7QUFDaE4sT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDL0QsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDL0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBT2xELE1BQU0sT0FBTyx5QkFBeUI7Ozs7OztJQW9EcEMsWUFDVSxRQUErQixFQUMvQixZQUFpQyxFQUNqQyxRQUFrQjtRQUZsQixhQUFRLEdBQVIsUUFBUSxDQUF1QjtRQUMvQixpQkFBWSxHQUFaLFlBQVksQ0FBcUI7UUFDakMsYUFBUSxHQUFSLFFBQVEsQ0FBVTs7UUFoRHBCLGFBQVEsR0FBRyxFQUFFLENBQUM7O1FBRWQsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGNBQVMsR0FBRyxNQUFNLENBQUM7UUFDbkIsZUFBVSxHQUFHLE9BQU8sQ0FBQzs7UUFFckIsaUJBQVksR0FBRyxFQUFFLENBQUM7O1FBTTFCLFNBQUksR0FBRyxFQUFFLENBQUM7O1FBYUYsYUFBUSxHQUFHLEdBQUcsQ0FBQzs7UUFFZixZQUFPLEdBQUcsR0FBRyxDQUFDOztRQUVkLGVBQVUsR0FBRyxNQUFNLENBQUM7Ozs7Ozs7UUFRNUIsbUJBQWMsR0FBRyxHQUFHLENBQUM7O1FBRVosaUJBQVksR0FBRyxHQUFHLENBQUM7UUFVMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN4RCxDQUFDOzs7OztJQXBDRCxJQUNJLFNBQVMsQ0FBQyxVQUFVO1FBQ3RCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDOzs7O0lBQ0QsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFBQSxDQUFDOzs7O0lBK0JGLFFBQVE7SUFFUixDQUFDOzs7O0lBRUQsZUFBZTs7WUFDVCxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVM7UUFDL0IsSUFBSSxVQUFVLEVBQUU7WUFDZCxJQUFJLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7O2dCQUN0RCxZQUFZOztnQkFDWixpQkFBaUIsR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFOztnQkFDdkQsVUFBVTs7Z0JBQ1YsUUFBUTtZQUNaLFFBQVEsSUFBSSxDQUFDLGNBQWMsRUFBRTtnQkFDM0IsS0FBSyxXQUFXLENBQUMsSUFBSTtvQkFDbkIsSUFBSTtvQkFDSixZQUFZLEdBQUcsbUJBQUEsVUFBVSxDQUFDLEtBQUssRUFBYSxDQUFDO29CQUM3QyxpQkFBaUIsR0FBRyxZQUFZLENBQUMsS0FBSyxJQUFJLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7b0JBQ3BFLE1BQU07Z0JBQ1IsS0FBSyxXQUFXLENBQUMsWUFBWTtvQkFDM0IsS0FBSztvQkFDTCxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsU0FBUyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFBO29CQUNuRixNQUFNO2dCQUNSLEtBQUssV0FBVyxDQUFDLFdBQVc7b0JBQzFCLE9BQU87b0JBQ1AsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO29CQUNwQixJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsU0FBUyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDO29CQUNwRixVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNsRixRQUFRLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUM1RSxpQkFBaUIsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUMvRCxNQUFNO2dCQUNSLEtBQUssV0FBVyxDQUFDLFVBQVU7b0JBQ3pCLE1BQU07b0JBQ04sSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztvQkFDakksSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztvQkFDL0csTUFBTTtnQkFFUixLQUFLLFdBQVcsQ0FBQyxTQUFTO29CQUN4QixNQUFNO29CQUNOLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO29CQUNyQixJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztvQkFDcEIsSUFBSSxDQUFDLFlBQVksR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztvQkFDakksSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztvQkFFL0csVUFBVSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDaEYsUUFBUSxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDMUUsaUJBQWlCLEdBQUcsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDL0QsTUFBTTtnQkFFUixLQUFLLFdBQVcsQ0FBQyxVQUFVO29CQUN6QixNQUFNO29CQUNOLElBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLE9BQU8sSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7b0JBQzNILElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLE9BQU8sSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7b0JBQ3pHLE1BQU07Z0JBQ1IsS0FBSyxXQUFXLENBQUMsV0FBVztvQkFDMUIsTUFBTTtvQkFDTixJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO29CQUM5SCxJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO29CQUM1RyxNQUFNO2dCQUNSLEtBQUssV0FBVyxDQUFDLFVBQVU7b0JBQ3pCLE1BQU07b0JBQ04sSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO29CQUNwQixJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO29CQUM5SCxJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO29CQUM1RyxVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNoRixRQUFRLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUMxRSxNQUFNO2dCQUNSLEtBQUssV0FBVyxDQUFDLGNBQWM7b0JBQzdCLEtBQUs7b0JBQ0wsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztvQkFDaEgsSUFBSSxDQUFDLE1BQU0sR0FBRyxxQkFBcUIsQ0FBQztvQkFDcEMsSUFBRyxVQUFVLENBQUMsT0FBTyxFQUFFO3dCQUNyQixJQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsRUFBRTs0QkFDM0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO3lCQUMvRjs2QkFBSTs0QkFDSCxJQUFJLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7eUJBQ25JO3FCQUNGO29CQUNELE1BQU07Z0JBQ1IsS0FBSyxXQUFXLENBQUMsYUFBYTtvQkFDNUIsT0FBTztvQkFDUCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztvQkFDckIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7b0JBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO29CQUNwQixJQUFJLENBQUMsWUFBWSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7b0JBQ2hILElBQUksQ0FBQyxNQUFNLEdBQUcscUJBQXFCLENBQUM7b0JBQ3BDLElBQUcsVUFBVSxDQUFDLE9BQU8sRUFBRTt3QkFDckIsSUFBRyxVQUFVLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEVBQUU7NEJBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQzt5QkFDL0Y7NkJBQUk7NEJBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO3lCQUNuSTtxQkFDRjtvQkFDRCxVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNoRixRQUFRLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUMxRSxNQUFNO2dCQUVSLEtBQUssV0FBVyxDQUFDLFNBQVM7Ozt3QkFFcEIsVUFBVSxHQUFHLENBQUMsbUJBQUEsVUFBVSxDQUFDLEtBQUssRUFBaUIsQ0FBQyxDQUFDLEtBQUs7b0JBQzFELGlCQUFpQixHQUFHLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztvQkFDbkUsTUFBTTtnQkFDUixLQUFLLFdBQVcsQ0FBQyxZQUFZO29CQUMzQixLQUFLO29CQUNMLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO29CQUNwQixJQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO3dCQUNqRSxpQkFBaUIsR0FBRyxDQUFDLG1CQUFBLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQWMsQ0FBQyxDQUFDLEdBQUc7Ozs7d0JBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztxQkFDaEg7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLFdBQVcsQ0FBQyxLQUFLO29CQUNwQixNQUFNO29CQUNOLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO29CQUNwQixNQUFNO2dCQUNSLEtBQUssV0FBVyxDQUFDLFVBQVU7b0JBQ3pCLGFBQWE7b0JBQ2IsWUFBWSxHQUFHLG1CQUFBLFVBQVUsQ0FBQyxLQUFLLEVBQW1CLENBQUM7b0JBQ25ELGlCQUFpQixHQUFHLFlBQVksQ0FBQyxTQUFTLElBQUksWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDNUUsTUFBTTtnQkFDUixLQUFLLFdBQVcsQ0FBQyxTQUFTO29CQUN4QixLQUFLO29CQUNMLFlBQVksR0FBRyxtQkFBQSxVQUFVLENBQUMsS0FBSyxFQUFrQixDQUFDO29CQUNsRCxpQkFBaUIsR0FBRyxZQUFZLENBQUMsU0FBUyxJQUFJLFlBQVksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7b0JBQzVFLE1BQU07Z0JBQ1I7b0JBQ0UsaUJBQWlCLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQzNEO1lBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDakQ7YUFBTTtZQUNMLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1NBQ2hCO0lBQ0gsQ0FBQzs7Ozs7O0lBSUQsVUFBVSxDQUFDLEtBQVU7UUFDbkIsT0FBTyxLQUFLLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ2pGLENBQUM7Ozs7Ozs7Ozs7SUFRRCxvQkFBb0IsQ0FBQyxLQUFVO1FBQzdCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN2QyxPQUFPLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUN6QjtRQUNELElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUU7WUFDeEYsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsRUFBRTtnQkFDaEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUM1QztpQkFDSTtnQkFDSCxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBWSxFQUFFO29CQUNuQyxTQUFTO29CQUNULElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLElBQUksU0FBUyxFQUFFO3dCQUM3QyxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQztxQkFDbEQ7eUJBQ0k7d0JBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7cUJBQ25CO2lCQUNGO3FCQUNJO29CQUNILFVBQVU7b0JBQ1YsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsSUFBSSxTQUFTLEVBQUU7d0JBQzdDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDO3FCQUNsRDt5QkFDSTt3QkFDSCxpQkFBaUI7d0JBQ2pCLE9BQU8sS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO3FCQUN6QjtpQkFDRjthQUNGO1NBQ0Y7YUFBSTtZQUNILE9BQU8sS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ3pCOztjQUNLLFdBQVcsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOztjQUNuRSxTQUFTLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDOztZQUM5QyxNQUFNLEdBQUcsRUFBRTs7WUFDWCxNQUFXO1FBQ2YsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDbkMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksQ0FBQyxNQUFNLFdBQVcsQ0FBQyxDQUFDO1lBQ25ELE9BQU87U0FDUjtRQUNELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztTQUNwRDtRQUNELElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztTQUNsRDtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztTQUNwRDtRQUNELFFBQVEsV0FBVyxFQUFFO1lBQ25CLEtBQUssR0FBRztnQkFDTixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7Z0JBQ2xFLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQ3RELE1BQU07WUFDUixLQUFLLEdBQUc7Z0JBQ04sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUMxQyxNQUFNO1lBQ1IsS0FBSyxHQUFHO2dCQUNOLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7Z0JBQy9ELE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQ3RELE1BQU07WUFDUixLQUFLLEdBQUc7Z0JBQ04sTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQ3RELE1BQU07WUFDUixLQUFLLEdBQUc7Z0JBQ04sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUMxQyxNQUFNO1NBQ1Q7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzs7Ozs7SUFLRCxTQUFTLENBQUMsS0FBVSxFQUFFLFNBQWM7UUFDbEMsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3RDLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDNUIsT0FBTztTQUNSO1FBQ0QsT0FBTyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQzlFLENBQUM7Ozs7OztJQUtELFNBQVMsQ0FBQyxLQUFVLEVBQUUsU0FBYztRQUNsQyxPQUFPLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUM5RCxDQUFDOzs7Ozs7SUFLRCxtQkFBbUIsQ0FBQyxLQUFVO1FBQzVCLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTOzs7O1FBQUUsQ0FBQyxJQUFTLEVBQUUsRUFBRTtZQUM1QyxPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM1QixDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7OztJQUtELGVBQWUsQ0FBQyxLQUFVOztZQUNwQixTQUFjO1FBQ2xCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLEVBQUU7WUFDN0IsU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3RDO2FBQU07WUFDTCxTQUFTLEdBQUcsS0FBSyxDQUFDO1NBQ25CO1FBQ0QsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNqQyxTQUFTLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7U0FDMUM7UUFFRCxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDOzs7Ozs7SUFJRCxrQkFBa0IsQ0FBQyxLQUFVO1FBQzNCLElBQUksS0FBSyxJQUFJLFNBQVMsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFLEVBQUU7WUFDeEQsT0FBTyxFQUFFLENBQUM7U0FDWDtRQUNELElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRTs7OztnQkFHekMsT0FBTyxHQUFHLENBQUMsRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDOztnQkFDM0MsVUFBVSxHQUFHLEVBQUU7WUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7O29CQUNuQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJOzs7O2dCQUFDLElBQUksQ0FBQyxFQUFFO29CQUN4QyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3QyxDQUFDLEVBQUM7Z0JBQ0YsSUFBSSxPQUFPLEVBQUU7b0JBQ1gsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7aUJBQzFDO3FCQUNJO29CQUNILFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzdCO2FBQ0Y7WUFDRCxJQUFJLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN6QiwrQkFBK0I7Z0JBQy9CLE9BQU8sVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7YUFDdEM7WUFDRCxPQUFPLEVBQUUsQ0FBQztTQUNYO2FBQU07WUFDTCxPQUFPLEtBQUssQ0FBQztTQUNkO0lBQ0gsQ0FBQzs7Ozs7O0lBSUQsc0JBQXNCLENBQUMsS0FBYztRQUNuQyxJQUFJLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDbEIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNoRDthQUFNLElBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sS0FBSyxLQUFLLFdBQVcsRUFBRTtZQUMzRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQy9DO2FBQU07WUFDTCxPQUFPLEtBQUssQ0FBQztTQUNkO0lBQ0gsQ0FBQzs7Ozs7Ozs7SUFJRCxVQUFVLENBQUMsS0FBSzs7WUFDVixHQUFHO1FBQ1AsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUM7U0FDNUI7UUFDRCxtQkFBbUI7UUFDbkIsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFLLE9BQU8sS0FBSyxJQUFJLFFBQVEsRUFBRTtZQUNsRCxLQUFLLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDbEU7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssVUFBVSxFQUFFO1lBQzVELGNBQWM7WUFDZCxHQUFHLEdBQUcsS0FBSyxDQUFDO1NBQ2I7YUFBTTtZQUNILFFBQVE7WUFDUixHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7U0FDMUU7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7Ozs7Ozs7SUFDTyx5QkFBeUIsQ0FBQyxVQUFVLEVBQUUsTUFBTTs7WUFDOUMsTUFBTSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUU7UUFDekUsSUFBSSxVQUFVLEVBQUU7WUFDZCxNQUFNLENBQUMsT0FBTyxDQUFDLGlDQUFpQzs7Ozs7OztZQUFFLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDcEUsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSzs7OztnQkFBRSxVQUFVLENBQUM7b0JBQy9DLElBQUcsQ0FBQyxFQUFDO3dCQUNGLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3FCQUN4QztnQkFDTCxDQUFDLEVBQUMsQ0FBQztnQkFDSCxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtvQkFBRSxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztnQkFDbkQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUs7b0JBQUUsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQ3BELElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHO29CQUFFLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUNqRCxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtvQkFBRSxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztnQkFDbkQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU07b0JBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7Z0JBQ3RELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNO29CQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQ3hELENBQUMsRUFBQyxDQUFDO1NBQ0o7UUFDRCxNQUFNLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7WUFDM0MsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDOUksT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQzs7Ozs7O0lBRUQsUUFBUSxDQUFFLElBQUksRUFBRSxHQUFHOztZQUNiLENBQUMsR0FBRztZQUNOLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQzs7WUFDekIsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUU7O1lBQ3BCLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFOztZQUNyQixJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRTs7WUFDdkIsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUU7O1lBQ3ZCLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7WUFDM0MsR0FBRyxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxJQUFJO1NBQ2pDO1FBQ0QsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNSLEdBQUcsR0FBRyxxQkFBcUIsQ0FBQztTQUM3QjtRQUNELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUNwQixHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQ3RGO1FBQ0QsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDZixJQUFJLElBQUksTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN2QyxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM3RztTQUNGO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7Ozs7SUFLRCxXQUFXLENBQUMsS0FBVTs7WUFDaEIsR0FBUTtRQUNaLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN4QixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDL0I7UUFDRCxPQUFPO1FBQ1AsSUFBSSxJQUFJLENBQUMsY0FBYyxLQUFLLFdBQVcsQ0FBQyxTQUFTLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sS0FBSyxLQUFLLFdBQVcsQ0FBQyxFQUFFO1lBQ3BHLE9BQU8sRUFBRSxDQUFDO1NBQ1g7UUFDRCxRQUFRLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDM0IsS0FBSyxXQUFXLENBQUMsSUFBSTtnQkFDbkIsR0FBRyxHQUFHLEtBQUssQ0FBQztnQkFDWixNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsU0FBUyxDQUFDO1lBQzNCLEtBQUssV0FBVyxDQUFDLFVBQVUsQ0FBQztZQUM1QixLQUFLLFdBQVcsQ0FBQyxhQUFhOztzQkFDdEIsVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7b0JBQ3pDLE9BQU8sR0FBRyxFQUFFO2dCQUNoQixJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFO29CQUNuQyxVQUFVLENBQUMsT0FBTzs7OztvQkFBQyxJQUFJLENBQUMsRUFBRTs7NEJBQ3BCLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQzt3QkFDL0IsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDcEIsQ0FBQyxFQUFDLENBQUM7aUJBQ0o7Z0JBQ0QsR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNsQyxNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsVUFBVTtnQkFDekIsSUFBRyxLQUFLLElBQUksS0FBSyxDQUFDLElBQUksRUFBRTtvQkFDdEIsR0FBRyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUE7aUJBQ2pCO3FCQUFNO29CQUNMLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFBO2lCQUM3QjtnQkFDRCxNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsY0FBYyxDQUFDO1lBQ2hDLEtBQUssV0FBVyxDQUFDLFdBQVcsQ0FBQztZQUM3QixLQUFLLFdBQVcsQ0FBQyxVQUFVO2dCQUN6QixHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDN0IsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLFlBQVk7Z0JBQzNCLEtBQUs7Z0JBQ0wsR0FBRyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDdkMsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLFdBQVc7OztzQkFFcEIsWUFBWSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7b0JBQzNDLFNBQVMsR0FBRyxFQUFFO2dCQUNsQixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsTUFBTSxFQUFFO29CQUN2QyxZQUFZLENBQUMsT0FBTzs7OztvQkFBQyxJQUFJLENBQUMsRUFBRTs7NEJBQ3RCLEdBQUcsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO3dCQUN6QyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUN0QixDQUFDLEVBQUMsQ0FBQztpQkFDSjtnQkFDRCxHQUFHLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3BDLE1BQU07WUFDUixLQUFLLFdBQVcsQ0FBQyxLQUFLO2dCQUNwQixNQUFNO2dCQUNOLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxtQkFBQSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBZ0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQztnQkFDdEUsR0FBRyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckMsTUFBTTtZQUNSLEtBQUssV0FBVyxDQUFDLFlBQVk7Z0JBQzNCLEtBQUs7Z0JBQ0wsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLG1CQUFBLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUF1QixDQUFDLENBQUMsVUFBVSxDQUFDO2dCQUM3RSxHQUFHLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyQyxNQUFNO1lBQ1IsS0FBSyxXQUFXLENBQUMsU0FBUztnQkFDeEIsS0FBSztnQkFDTCxxRUFBcUU7Z0JBQ3JFLEdBQUcsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3pDLE1BQU07WUFDTiw0Q0FBNEM7WUFDOUMsS0FBSyxXQUFXLENBQUMsU0FBUztnQkFDeEIsR0FBRyxHQUFHLEtBQUssS0FBSyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQ3BELE1BQU07WUFDUixLQUFLLFdBQVcsQ0FBQyxXQUFXO2dCQUMxQixHQUFHLEdBQUcsS0FBSyxLQUFLLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDcEQsTUFBTTtZQUVSO2dCQUNFLEdBQUcsR0FBRyxLQUFLLENBQUM7U0FDZjtRQUVELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7O1lBM2dCRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLHVCQUF1QjtnQkFDakMsMklBQWlEOzthQUVsRDs7OztZQVJRLHFCQUFxQjtZQUNyQixtQkFBbUI7WUFITyxRQUFROzs7d0JBaUN4QyxLQUFLOzJCQXlCTCxLQUFLOzs7Ozs7O0lBNUNOLCtDQUFtQzs7Ozs7SUFFbkMsbURBQXVCOzs7OztJQUV2Qiw2Q0FBc0I7Ozs7O0lBRXRCLDZDQUF5Qjs7Ozs7SUFDekIsNkNBQXlCOzs7OztJQUN6Qiw4Q0FBMkI7Ozs7O0lBQzNCLCtDQUE2Qjs7Ozs7SUFFN0IsaURBQTBCOzs7OztJQUUxQiwyQ0FBb0I7Ozs7O0lBRXBCLCtDQUFtQjs7SUFFbkIseUNBQVU7Ozs7O0lBV1Ysb0RBQWdDOzs7OztJQUVoQyw2Q0FBdUI7Ozs7O0lBRXZCLDRDQUFzQjs7Ozs7SUFFdEIsK0NBQTRCOzs7Ozs7SUFRNUIsbURBQXFCOztJQUVyQixpREFBNEI7Ozs7O0lBRTVCLGtEQUFzQjs7Ozs7SUFFdEIsa0RBQTJCOzs7OztJQUV6Qiw2Q0FBdUM7Ozs7O0lBQ3ZDLGlEQUF5Qzs7Ozs7SUFDekMsNkNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBJbmplY3RvciwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFF1ZXJ5Q29uZGl0aW9uLCBDb250cm9sVHlwZSwgVGV4dFZhbHVlLCBEcm9wRG93bkxpc3RDb250cm9sLCBJbnB1dEdyb3VwVmFsdWUsIFNtYXJ0SGVscFZhbHVlLCBOdW1iZXJSYW5nZVZhbHVlLCBSYWRpb0NvbnRyb2wsIENoZWNrQm94Q29udHJvbCwgQ2hlY2tCb3hWYWx1ZSB9IGZyb20gJ0BmYXJyaXMvY29tcG9uZW50LXF1ZXJ5Y29uZGl0aW9uJztcclxuaW1wb3J0IHsgRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1jb21tb24vZGF0ZSc7XHJcbmltcG9ydCB7IE51bWJlckhlbHBlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLWNvbW1vbi9udW1iZXInO1xyXG5pbXBvcnQgeyBMb2NhbGVTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1sb2NhbGUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdsaWItc3VtbWFyeS1jb25kaXRpb24nLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9zdW1tYXJ5LWNvbmRpdGlvbi5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vc3VtbWFyeS1jb25kaXRpb24uY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTdW1tYXJ5Q29uZGl0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcblxyXG4gIHByaXZhdGUgX2NvbmRpdGlvbjogUXVlcnlDb25kaXRpb247XHJcbiAgLy8g5b2T5YmNY29udHJvbFR5cGVcclxuICBwcml2YXRlIF9jb25kaXRpb25UeXBlO1xyXG4gIC8vIOWIhumalOesplxyXG4gIHByaXZhdGUgX3NwbGl0ZXIgPSAnJztcclxuICAvLyDmmK/lkKbljLrpl7RcclxuICBwcml2YXRlIF9pc1JhbmdlID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBzaG93VGltZSA9IGZhbHNlO1xyXG4gIHByaXZhdGUgdGV4dEZpZWxkID0gJ25hbWUnO1xyXG4gIHByaXZhdGUgdmFsdWVGaWVsZCA9ICd2YWx1ZSc7XHJcbiAgLy8g5LuO5pyN5Yqh5Zmo56uv5Y+W5YC85piv5qC85byP5YyW5ZCO55qEXHJcbiAgcHJpdmF0ZSByZXR1cm5Gb3JtYXQgPSAnJztcclxuICAvLyDpnIDopoHovazljJbnsbvlnovmoLzlvI/nmoTooajovr7lvI9cclxuICBwcml2YXRlIGZvcm1hdDogYW55O1xyXG4gIC8vIOi9rOaNouexu+Wei+eUqOWIsOeahOaVsOaNrlxyXG4gIHByaXZhdGUgZGF0YVNvdXJjZTtcclxuICAvLyDmlofmnKzmmL7npLpcclxuICB0ZXh0ID0gXCJcIjtcclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgY29uZGl0aW9uKHFDb25kaXRpb24pIHtcclxuICAgIHRoaXMuX2NvbmRpdGlvbiA9IHFDb25kaXRpb247XHJcbiAgICB0aGlzLmZvcm1hdENvbmRpdGlvbigpO1xyXG4gIH1cclxuICBnZXQgY29uZGl0aW9uKCk6IFF1ZXJ5Q29uZGl0aW9uIHtcclxuICAgIHJldHVybiB0aGlzLl9jb25kaXRpb247XHJcbiAgfTtcclxuICAvLyDlpJror63oqIBcclxuICBwcml2YXRlIGN1cnJlbnRMYW5ndWFnZTogc3RyaW5nO1xyXG4gIC8vIOWNg+WIhuS9jeespuWPt1xyXG4gIHByaXZhdGUgdGhvdXNhbmQgPSAnLCc7XHJcbiAgLy8g5bCP5pWw54K55aSE56ym5Y+3XHJcbiAgcHJpdmF0ZSBkZWNpbWFsID0gJy4nO1xyXG4gIC8vIOi0p+W4geespuWPt+WPiuWAvOWxleeOsOW9ouW8j1xyXG4gIHByaXZhdGUgZXhwcmVzc2lvbiA9ICclcyV2JztcclxuXHJcbiAgLy8gZm9ybUNvbnRyb2zmmL7npLrnmoTmlofmnKxcclxuICAvKipcclxuICAgKiDlm73pmYXljJbnsbvlnotcclxuICAgXHJcbiAgQElucHV0KCkgbG9jYWxpemF0aW9uVHlwZTogc3RyaW5nOyovXHJcbiAgLy8g6LSn5biB56ym5Y+377yM6buY6K6k5pivUk1CXHJcbiAgY3VycmVuY3lTeW1ib2wgPSAn77+lJztcclxuICAvLyDljYHov5vliLbliY3pnaLloavlhYXnmoTnrKblj7dcclxuICBASW5wdXQoKSBmaWxsZWRTeW1ib2wgPSAnMCc7XHJcbiAgLy/mlbDlgLzmoLzlvI/lj4LmlbBcclxuICBwcml2YXRlIG51bWJlck9wdGlvbnM7XHJcblxyXG4gIHByaXZhdGUgbG9jYWxlU2VydmljZTogYW55O1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBkdEhlbHBlcjogRGF0ZVRpbWVIZWxwZXJTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBudW1iZXJIZWxwZXI6IE51bWJlckhlbHBlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5sb2NhbGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoTG9jYWxlU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICBmb3JtYXRDb25kaXRpb24oKSB7XHJcbiAgICBsZXQgcUNvbmRpdGlvbiA9IHRoaXMuY29uZGl0aW9uO1xyXG4gICAgaWYgKHFDb25kaXRpb24pIHtcclxuICAgICAgdGhpcy5fY29uZGl0aW9uVHlwZSA9IHFDb25kaXRpb24uY29udHJvbC5nZXRDb250cm9sVHlwZSgpO1xyXG4gICAgICBsZXQgdGV4dFZhbHVlT2JqO1xyXG4gICAgICBsZXQgdGV4dE9yaWdpbmFsVmFsdWUgPSBxQ29uZGl0aW9uLnZhbHVlLmdldE9yaWdpbmFsVmFsdWUoKTtcclxuICAgICAgbGV0IHN0YXJ0VmFsdWU7XHJcbiAgICAgIGxldCBlbmRWYWx1ZTtcclxuICAgICAgc3dpdGNoICh0aGlzLl9jb25kaXRpb25UeXBlKSB7XHJcbiAgICAgICAgY2FzZSBDb250cm9sVHlwZS5UZXh0OlxyXG4gICAgICAgICAgLy/mlofmnKxcclxuICAgICAgICAgIHRleHRWYWx1ZU9iaiA9IHFDb25kaXRpb24udmFsdWUgYXMgVGV4dFZhbHVlO1xyXG4gICAgICAgICAgdGV4dE9yaWdpbmFsVmFsdWUgPSB0ZXh0VmFsdWVPYmoudmFsdWUgJiYgdGV4dFZhbHVlT2JqLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlTnVtYmVyOlxyXG4gICAgICAgICAgLy8g5pWw5YC8XHJcbiAgICAgICAgICB0aGlzLm51bWJlck9wdGlvbnMgPSB7IHByZWNpc2lvbjogcUNvbmRpdGlvbi5jb250cm9sWydwcmVjaXNpb24nXSwgdHlwZTogJ251bWJlcicgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDb250cm9sVHlwZS5OdW1iZXJSYW5nZTpcclxuICAgICAgICAgIC8vIOaVsOWAvOWMuumXtFxyXG4gICAgICAgICAgdGhpcy5faXNSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLl9zcGxpdGVyID0gJ34nO1xyXG4gICAgICAgICAgdGhpcy5udW1iZXJPcHRpb25zID0geyBwcmVjaXNpb246IHFDb25kaXRpb24uY29udHJvbFsncHJlY2lzaW9uJ10sIHR5cGU6ICdudW1iZXInIH07XHJcbiAgICAgICAgICBzdGFydFZhbHVlID0gcUNvbmRpdGlvbi52YWx1ZVsnc3RhcnRWYWx1ZSddID8gcUNvbmRpdGlvbi52YWx1ZVsnc3RhcnRWYWx1ZSddIDogJyc7XHJcbiAgICAgICAgICBlbmRWYWx1ZSA9IHFDb25kaXRpb24udmFsdWVbJ2VuZFZhbHVlJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydlbmRWYWx1ZSddIDogJyc7XHJcbiAgICAgICAgICB0ZXh0T3JpZ2luYWxWYWx1ZSA9IFtzdGFydFZhbHVlLCBlbmRWYWx1ZV0uam9pbih0aGlzLl9zcGxpdGVyKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlRGF0ZTpcclxuICAgICAgICAgIC8v5Y2V5Liq5pel5pyfXHJcbiAgICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9IHFDb25kaXRpb24uY29udHJvbCAmJiBxQ29uZGl0aW9uLmNvbnRyb2xbJ3JldHVybkZvcm1hdCddID8gcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA6IFwieXl5eS1NTS1kZFwiO1xyXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gOiBcInl5eXktTU0tZGRcIjtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIENvbnRyb2xUeXBlLkRhdGVSYW5nZTpcclxuICAgICAgICAgIC8v5pel5pyf5Yy66Ze0XHJcbiAgICAgICAgICB0aGlzLl9pc1JhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuX3NwbGl0ZXIgPSAnfic7XHJcbiAgICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9IHFDb25kaXRpb24uY29udHJvbCAmJiBxQ29uZGl0aW9uLmNvbnRyb2xbJ3JldHVybkZvcm1hdCddID8gcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA6IFwieXl5eS1NTS1kZFwiO1xyXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gOiBcInl5eXktTU0tZGRcIjtcclxuXHJcbiAgICAgICAgICBzdGFydFZhbHVlID0gcUNvbmRpdGlvbi52YWx1ZVsnc3RhcnRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydzdGFydFRpbWUnXSA6ICcnO1xyXG4gICAgICAgICAgZW5kVmFsdWUgPSBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gOiAnJztcclxuICAgICAgICAgIHRleHRPcmlnaW5hbFZhbHVlID0gW3N0YXJ0VmFsdWUsIGVuZFZhbHVlXS5qb2luKHRoaXMuX3NwbGl0ZXIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlWWVhcjpcclxuICAgICAgICAgIC8vIOWPquacieW5tFxyXG4gICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsncmV0dXJuRm9ybWF0J10gOiBcInl5eXlcIjtcclxuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gcUNvbmRpdGlvbi5jb250cm9sICYmIHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gPyBxQ29uZGl0aW9uLmNvbnRyb2xbJ2Zvcm1hdCddIDogXCJ5eXl5XCI7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbnRyb2xUeXBlLlNpbmdsZU1vbnRoOlxyXG4gICAgICAgICAgLy8g5Y+q5pyJ5pyIXHJcbiAgICAgICAgICB0aGlzLnJldHVybkZvcm1hdCA9IHFDb25kaXRpb24uY29udHJvbCAmJiBxQ29uZGl0aW9uLmNvbnRyb2xbJ3JldHVybkZvcm1hdCddID8gcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA6IFwieXl5eS1NTVwiO1xyXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gOiBcInl5eXktTU1cIjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuTW9udGhSYW5nZTpcclxuICAgICAgICAgIC8vIOaciOiMg+WbtFxyXG4gICAgICAgICAgdGhpcy5faXNSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLl9zcGxpdGVyID0gJ34nO1xyXG4gICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsncmV0dXJuRm9ybWF0J10gOiBcInl5eXktTU1cIjtcclxuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gcUNvbmRpdGlvbi5jb250cm9sICYmIHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gPyBxQ29uZGl0aW9uLmNvbnRyb2xbJ2Zvcm1hdCddIDogXCJ5eXl5LU1NXCI7XHJcbiAgICAgICAgICBzdGFydFZhbHVlID0gcUNvbmRpdGlvbi52YWx1ZVsnc3RhcnRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydzdGFydFRpbWUnXSA6ICcnO1xyXG4gICAgICAgICAgZW5kVmFsdWUgPSBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gOiAnJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlRGF0ZVRpbWU6XHJcbiAgICAgICAgICAvLyDml7bpl7RcclxuICAgICAgICAgIHRoaXMuc2hvd1RpbWUgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2xbJ3JldHVybkZvcm1hdCddID8gcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA6IHRoaXMucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSAneXl5eS1NTS1kZCBISDptbTpzcyc7XHJcbiAgICAgICAgICBpZihxQ29uZGl0aW9uLmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgaWYocUNvbmRpdGlvbi5jb250cm9sWydlbmFibGVDdXN0b21Gb3JtYXQnXSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gOiB0aGlzLnJldHVybkZvcm1hdDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gKyAnIEhIOm1tOnNzJyA6IHRoaXMucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9ICAgICAgICAgXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbnRyb2xUeXBlLkRhdGVUaW1lUmFuZ2U6XHJcbiAgICAgICAgICAvLyDml7bpl7TljLrpl7RcclxuICAgICAgICAgIHRoaXMuc2hvd1RpbWUgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5faXNSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLl9zcGxpdGVyID0gJ34nO1xyXG4gICAgICAgICAgdGhpcy5yZXR1cm5Gb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2xbJ3JldHVybkZvcm1hdCddID8gcUNvbmRpdGlvbi5jb250cm9sWydyZXR1cm5Gb3JtYXQnXSA6IHRoaXMucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSAneXl5eS1NTS1kZCBISDptbTpzcyc7XHJcbiAgICAgICAgICBpZihxQ29uZGl0aW9uLmNvbnRyb2wpIHtcclxuICAgICAgICAgICAgaWYocUNvbmRpdGlvbi5jb250cm9sWydlbmFibGVDdXN0b21Gb3JtYXQnXSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9ybWF0ID0gcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gOiB0aGlzLnJldHVybkZvcm1hdDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBxQ29uZGl0aW9uLmNvbnRyb2wgJiYgcUNvbmRpdGlvbi5jb250cm9sWydmb3JtYXQnXSA/IHFDb25kaXRpb24uY29udHJvbFsnZm9ybWF0J10gKyAnIEhIOm1tOnNzJyA6IHRoaXMucmV0dXJuRm9ybWF0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzdGFydFZhbHVlID0gcUNvbmRpdGlvbi52YWx1ZVsnc3RhcnRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydzdGFydFRpbWUnXSA6ICcnO1xyXG4gICAgICAgICAgZW5kVmFsdWUgPSBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gPyBxQ29uZGl0aW9uLnZhbHVlWydlbmRUaW1lJ10gOiAnJztcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIENvbnRyb2xUeXBlLkJvb2xDaGVjazpcclxuICAgICAgICAgIC8vIOW4g+WwlOWAvC3ljZXkuKrlgLxcclxuICAgICAgICAgIGxldCBjaGVja1ZhbHVlID0gKHFDb25kaXRpb24udmFsdWUgYXMgQ2hlY2tCb3hWYWx1ZSkudmFsdWU7XHJcbiAgICAgICAgICB0ZXh0T3JpZ2luYWxWYWx1ZSA9IGNoZWNrVmFsdWUubGVuZ3RoID4gMCA/IGNoZWNrVmFsdWVbJzAnXSA6IG51bGw7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbnRyb2xUeXBlLkRyb3BEb3duTGlzdDpcclxuICAgICAgICAgIC8vIOS4i+aLiVxyXG4gICAgICAgICAgdGhpcy5fc3BsaXRlciA9ICcsJztcclxuICAgICAgICAgIGlmKHFDb25kaXRpb24uY29udHJvbFsndXJpJ10gJiYgIXFDb25kaXRpb24uY29udHJvbFsnZW51bVZhbHVlcyddKSB7XHJcbiAgICAgICAgICAgIHRleHRPcmlnaW5hbFZhbHVlID0gKHFDb25kaXRpb24udmFsdWVbJ3ZhbHVlJ10gYXMgQXJyYXk8YW55PikubWFwKHQgPT4gdFt0aGlzLnZhbHVlRmllbGRdKS5qb2luKHRoaXMuX3NwbGl0ZXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDb250cm9sVHlwZS5SYWRpbzpcclxuICAgICAgICAgIC8vIOWNlemAiee7hFxyXG4gICAgICAgICAgdGhpcy5fc3BsaXRlciA9ICcsJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ29udHJvbFR5cGUuSW5wdXRHcm91cDpcclxuICAgICAgICAgIC8vIGlucHV0Z3JvdXBcclxuICAgICAgICAgIHRleHRWYWx1ZU9iaiA9IHFDb25kaXRpb24udmFsdWUgYXMgSW5wdXRHcm91cFZhbHVlO1xyXG4gICAgICAgICAgdGV4dE9yaWdpbmFsVmFsdWUgPSB0ZXh0VmFsdWVPYmoudGV4dFZhbHVlICYmIHRleHRWYWx1ZU9iai50ZXh0VmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDb250cm9sVHlwZS5TbWFydEhlbHA6XHJcbiAgICAgICAgICAvLyDluK7liqlcclxuICAgICAgICAgIHRleHRWYWx1ZU9iaiA9IHFDb25kaXRpb24udmFsdWUgYXMgU21hcnRIZWxwVmFsdWU7XHJcbiAgICAgICAgICB0ZXh0T3JpZ2luYWxWYWx1ZSA9IHRleHRWYWx1ZU9iai50ZXh0VmFsdWUgJiYgdGV4dFZhbHVlT2JqLnRleHRWYWx1ZS50cmltKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgdGV4dE9yaWdpbmFsVmFsdWUgPSBxQ29uZGl0aW9uLnZhbHVlLmdldE9yaWdpbmFsVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnRleHQgPSB0aGlzLmZvcm1hdFZhbHVlKHRleHRPcmlnaW5hbFZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGV4dCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiDlpITnkIblpJror63oqIDvvIzlvoXlrppcclxuICAgKi9cclxuICBmb3JtYXRMYW5nKHZhbHVlOiBhbnkpIHtcclxuICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZVt0aGlzLmN1cnJlbnRMYW5ndWFnZV0gPyB2YWx1ZVt0aGlzLmN1cnJlbnRMYW5ndWFnZV0gOiAnJztcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQ+i0p+W4gVxyXG4gICAqIETljYHov5vliLZcclxuICAgKiBG5rWu54K55pWwXHJcbiAgICogTuaVsOWtl++8jOW4puWNg+WIhuS9jVxyXG4gICAqIFDnmb7liIbmr5RcclxuICAgKi9cclxuICBnZXRGb3JtYXROdW1iZXJWYWx1ZSh2YWx1ZTogYW55KSB7XHJcbiAgICBpZiAoIXRoaXMuZm9ybWF0ICYmICF0aGlzLm51bWJlck9wdGlvbnMpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5udW1iZXJPcHRpb25zICYmIHRoaXMubnVtYmVyT3B0aW9ucy50eXBlICYmIHRoaXMubnVtYmVyT3B0aW9ucy50eXBlID09ICdudW1iZXInKSB7XHJcbiAgICAgIGlmICh0aGlzLm51bWJlck9wdGlvbnMuZm9ybWF0dGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtYmVyT3B0aW9ucy5mb3JtYXR0ZXIodmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLm51bWJlck9wdGlvbnMudXNlVGhvdXNhbmRzKSB7XHJcbiAgICAgICAgICAvLyDorr7nva7kuobljYPliIbkvY1cclxuICAgICAgICAgIGlmICh0aGlzLm51bWJlck9wdGlvbnMucHJlY2lzaW9uICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICduJyArIHRoaXMubnVtYmVyT3B0aW9ucy5wcmVjaXNpb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSAnbic7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgLy8g5rKh5pyJ6K6+572u5Y2D5YiG5L2NXHJcbiAgICAgICAgICBpZiAodGhpcy5udW1iZXJPcHRpb25zLnByZWNpc2lvbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSAnZicgKyB0aGlzLm51bWJlck9wdGlvbnMucHJlY2lzaW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOayoeacieiuvue9rueyvuW6pu+8jOayoeacieiuvue9ruWNg+WIhuS9jVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGZpcnN0TGV0dGVyID0gdGhpcy5jdXJyZW5jeVRvVXBwZXJDYXNlKHRoaXMuZm9ybWF0LnN1YnN0cmluZygwLCAxKSk7XHJcbiAgICBjb25zdCBwcmVjaXNpb24gPSBOdW1iZXIodGhpcy5mb3JtYXQuc3Vic3RyaW5nKDEpKTtcclxuICAgIGxldCBjb25maWcgPSB7fTtcclxuICAgIGxldCByZXN1bHQ6IGFueTtcclxuICAgIGlmICghL0N8RHxGfE58UC9nLnRlc3QoZmlyc3RMZXR0ZXIpKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybihg5LiN5pSv5oyBZm9ybWF05Li6ICR7dGhpcy5mb3JtYXR9IOexu+Wei+eahOaVsOWtl+agvOW8j+WMlmApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50aG91c2FuZCkge1xyXG4gICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyB0aG91c2FuZDogdGhpcy50aG91c2FuZCB9KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmRlY2ltYWwpIHtcclxuICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHsgZGVjaW1hbDogdGhpcy5kZWNpbWFsIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZXhwcmVzc2lvbikge1xyXG4gICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyBmb3JtYXQ6IHRoaXMuZXhwcmVzc2lvbiB9KTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoZmlyc3RMZXR0ZXIpIHtcclxuICAgICAgY2FzZSAnQyc6XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHsgcHJlZml4OiB0aGlzLmN1cnJlbmN5U3ltYm9sLCBwcmVjaXNpb24gfSk7XHJcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5udW1iZXJIZWxwZXIuZm9ybWF0TW9uZXkodmFsdWUsIGNvbmZpZyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0QnOlxyXG4gICAgICAgIHJlc3VsdCA9IHRoaXMudG9EZWNpbWFsKHZhbHVlLCBwcmVjaXNpb24pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdGJzpcclxuICAgICAgICBPYmplY3QuYXNzaWduKGNvbmZpZywgeyBwcmVmaXg6ICcnLCB0aG91c2FuZDogJycsIHByZWNpc2lvbiB9KTtcclxuICAgICAgICByZXN1bHQgPSB0aGlzLm51bWJlckhlbHBlci5mb3JtYXRNb25leSh2YWx1ZSwgY29uZmlnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnTic6XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihjb25maWcsIHsgcHJlZml4OiAnJywgcHJlY2lzaW9uIH0pO1xyXG4gICAgICAgIHJlc3VsdCA9IHRoaXMubnVtYmVySGVscGVyLmZvcm1hdE1vbmV5KHZhbHVlLCBjb25maWcpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdQJzpcclxuICAgICAgICByZXN1bHQgPSB0aGlzLnRvUGVyY2VudCh2YWx1ZSwgcHJlY2lzaW9uKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB2YWx1ZSDovazmjaLmiJDljYHov5vliLbnmoTmlbDlrZdcclxuICAgKiBAcGFyYW0gcHJlY2lzaW9uIOWNgei/m+WItuaVsOWtl+eahOmVv+W6plxyXG4gICAqL1xyXG4gIHRvRGVjaW1hbCh2YWx1ZTogYW55LCBwcmVjaXNpb246IGFueSkge1xyXG4gICAgaWYgKHZhbHVlLnRvU3RyaW5nKCkuaW5kZXhPZignLicpID4gLTEpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfljYHov5vliLbovazmjaLku4XpmZDmlbTlnovnsbvlnosnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChBcnJheShwcmVjaXNpb24pLmpvaW4odGhpcy5maWxsZWRTeW1ib2wpICsgdmFsdWUpLnNsaWNlKC1wcmVjaXNpb24pO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gdmFsdWUg6L2s5o2i5oiQ55m+5YiG5pWw55qE5pWw5a2XXHJcbiAgICogQHBhcmFtIGRlY2ltYWwg5bCP5pWw54K55L+d55WZ5Yeg5L2NXHJcbiAgICovXHJcbiAgdG9QZXJjZW50KHZhbHVlOiBhbnksIHByZWNpc2lvbjogYW55KSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHZhbHVlICogMTAwKS50b0ZpeGVkKE51bWJlcihwcmVjaXNpb24pKSArICclJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhui0p+W4geespuWPt+mmluWtl+avjei9rOaNouaIkOWkp+WGmVxyXG4gICAqL1xyXG4gIGN1cnJlbmN5VG9VcHBlckNhc2UodmFsdWU6IGFueSkge1xyXG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1thLXpdKy9nLCAod29yZDogYW55KSA9PiB7XHJcbiAgICAgIHJldHVybiB3b3JkLnRvVXBwZXJDYXNlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuW5tO+8jFk9PnksIEQ9PmRcclxuICAgKi9cclxuICBkYXRlVG9VcHBlckNhc2UodmFsdWU6IGFueSkge1xyXG4gICAgbGV0IG5ld0Zvcm1hdDogYW55O1xyXG4gICAgaWYgKC9ZL2cudGVzdCh2YWx1ZSkgPT09IHRydWUpIHtcclxuICAgICAgbmV3Rm9ybWF0ID0gdmFsdWUucmVwbGFjZSgvWS9nLCAneScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3Rm9ybWF0ID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBpZiAoL0QvZy50ZXN0KG5ld0Zvcm1hdCkgPT09IHRydWUpIHtcclxuICAgICAgbmV3Rm9ybWF0ID0gbmV3Rm9ybWF0LnJlcGxhY2UoL0QvZywgJ2QnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3Rm9ybWF0O1xyXG4gIH1cclxuICAvKipcclxuICAgKiDmnprkuL7nsbvlnovlpITnkIZcclxuICAgKi9cclxuICBnZXRGb3JtYXRFbnVtVmFsdWUodmFsdWU6IGFueSkge1xyXG4gICAgaWYgKHZhbHVlID09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZGF0YVNvdXJjZSAmJiB0aGlzLmRhdGFTb3VyY2UubGVuZ3RoKSB7XHJcbiAgICAgIC8vIOWPr+iDveWtmOWcqOWkmumAieaemuS4vu+8jOS9nOS4uuWIhumalOespiAgXHJcbiAgICAgIC8vIGxldCBjdXJWYWxzID0gKCcnICsgdmFsdWUpLnNwbGl0KCcsJyk7XHJcbiAgICAgIGxldCBjdXJWYWxzID0gKCcnICsgdmFsdWUpLnNwbGl0KHRoaXMuX3NwbGl0ZXIpO1xyXG4gICAgICBsZXQgbmFtZVJlc3VsdCA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IGN1clZhbHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICBsZXQgZmluZE9iaiA9IHRoaXMuZGF0YVNvdXJjZS5maW5kKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGl0ZW1bdGhpcy52YWx1ZUZpZWxkXSA9PSBjdXJWYWxzW2tdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChmaW5kT2JqKSB7XHJcbiAgICAgICAgICBuYW1lUmVzdWx0LnB1c2goZmluZE9ialt0aGlzLnRleHRGaWVsZF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIG5hbWVSZXN1bHQucHVzaChjdXJWYWxzW2tdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5hbWVSZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIHJldHVybiBuYW1lUmVzdWx0LmpvaW4oJywnKTtcclxuICAgICAgICByZXR1cm4gbmFtZVJlc3VsdC5qb2luKHRoaXMuX3NwbGl0ZXIpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBib29sZWFu5YC85aSE55CGXHJcbiAgICovXHJcbiAgZ2V0Rm9ybWF0Q2hlY2tCb3hWYWx1ZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxvY2FsZVNlcnZpY2UuZ2V0VmFsdWUoJ3RleHQueWVzJyk7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubG9jYWxlU2VydmljZS5nZXRWYWx1ZSgndGV4dC5ubycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKlxyXG4gICog5pel5pyf5qC85byP5YyWXHJcbiAgKi9cclxuICBkYXRlZm9ybWF0KHZhbHVlKSB7XHJcbiAgICBsZXQgc3RyO1xyXG4gICAgaWYgKCF0aGlzLmZvcm1hdCkge1xyXG4gICAgICB0aGlzLmZvcm1hdCA9ICdZWVlZLU1NLWRkJztcclxuICAgIH1cclxuICAgIC8vIOW9k+WJjeWAvOaYr+W3sue7j+agvOW8j+WMluWQjueahOaXpeacn+Wtl+espuS4slxyXG4gICAgaWYgKHRoaXMucmV0dXJuRm9ybWF0ICAmJiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcclxuICAgICAgdmFsdWUgPSB0aGlzLmdldERhdGVGcm9tRm9ybWF0ZWRTdHJpbmcodmFsdWUsIHRoaXMucmV0dXJuRm9ybWF0KTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gJ2hoOm1tOnNzJyB8fCB0aGlzLmZvcm1hdCA9PT0gJ0hIOm1tOnNzJykge1xyXG4gICAgICAvLyDmoLzlvI/ljJbml7bpl7QgIOS4tOaXtuWkhOeQhlxyXG4gICAgICBzdHIgPSB2YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g5qC85byP5YyW5pel5pyfXHJcbiAgICAgICAgc3RyID0gdGhpcy5kdEhlbHBlci5mb3JtYXRUbyh2YWx1ZSwgdGhpcy5kYXRlVG9VcHBlckNhc2UodGhpcy5mb3JtYXQpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHI7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0RGF0ZUZyb21Gb3JtYXRlZFN0cmluZyhkYXRlU3RyaW5nLCBmb3JtYXQpIHtcclxuICAgIHZhciByZXN1bHQgPSB7IHllYXI6IDAsIG1vbnRoOiAwLCBkYXk6IDAsIGhvdXI6IDAsIG1pbml0ZTogMCwgc2Vjb25kOiAwIH07Ly/lvZPnhLbov5nph4zlj6/ku6Xpu5jorqQxOTcwLTEtMeaXpVxyXG4gICAgaWYgKGRhdGVTdHJpbmcpIHtcclxuICAgICAgZm9ybWF0LnJlcGxhY2UoL3l7NH18WXs0fXxNK3xkK3xEK3xoK3xIK3xtK3xzKy9nLCBmdW5jdGlvbiAobSwgYSwgYiwgYykgey8v6L+Z6YeM5Y+q5YGa5LqG5bm05pyI5pelICDliqDml7bliIbnp5LkuZ/mmK/lj6/ku6XnmoRcclxuICAgICAgICBkYXRlU3RyaW5nLnN1YnN0cmluZyhhKS5yZXBsYWNlKC9cXGQrLywgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICBpZihkKXtcclxuICAgICAgICAgICAgICBjID0gcGFyc2VJbnQoZC5zdWJzdHIoMCxtLmxlbmd0aCksIDEwKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoL3krL2kudGVzdChtKSAmJiAhcmVzdWx0LnllYXIpIHJlc3VsdC55ZWFyID0gYztcclxuICAgICAgICBpZiAoL00rLy50ZXN0KG0pICYmICFyZXN1bHQubW9udGgpIHJlc3VsdC5tb250aCA9IGM7XHJcbiAgICAgICAgaWYgKC9kKy9pLnRlc3QobSkgJiYgIXJlc3VsdC5kYXkpIHJlc3VsdC5kYXkgPSBjO1xyXG4gICAgICAgIGlmICgvaCsvaS50ZXN0KG0pICYmICFyZXN1bHQuaG91cikgcmVzdWx0LmhvdXIgPSBjO1xyXG4gICAgICAgIGlmICgvbSsvLnRlc3QobSkgJiYgIXJlc3VsdC5taW5pdGUpIHJlc3VsdC5taW5pdGUgPSBjO1xyXG4gICAgICAgIGlmICgvcysvLnRlc3QobSkgJiYgIXJlc3VsdC5zZWNvbmQpIHJlc3VsdC5zZWNvbmQgPSBjO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJlc3VsdC5kYXkgPSByZXN1bHQuZGF5ID8gcmVzdWx0LmRheSA6IDE7XHJcbiAgICByZXN1bHQubW9udGggPSByZXN1bHQubW9udGggPyByZXN1bHQubW9udGggOiAxO1xyXG4gICAgdmFyIHJlc3VsdERhdGUgPSBuZXcgRGF0ZShyZXN1bHQueWVhciArICcvJyArIHJlc3VsdC5tb250aCArICcvJyArIHJlc3VsdC5kYXkgKyAnICcgKyByZXN1bHQuaG91ciArICc6JyArIHJlc3VsdC5taW5pdGUgKyAnOicgKyByZXN1bHQuc2Vjb25kKTtcclxuICAgIHJldHVybiByZXN1bHREYXRlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gKGRhdGUsIGZtdCkge1xyXG4gICAgdmFyIG8gPSB7XHJcbiAgICAgICdNKyc6IGRhdGUuZ2V0TW9udGgoKSArIDEsIC8v5pyI5Lu9XHJcbiAgICAgICdkKyc6IGRhdGUuZ2V0RGF0ZSgpLCAvL+aXpVxyXG4gICAgICAnaCsnOiBkYXRlLmdldEhvdXJzKCksIC8v5bCP5pe2XHJcbiAgICAgICdtKyc6IGRhdGUuZ2V0TWludXRlcygpLCAvL+WIhlxyXG4gICAgICAncysnOiBkYXRlLmdldFNlY29uZHMoKSwgLy/np5JcclxuICAgICAgJ3ErJzogTWF0aC5mbG9vcigoZGF0ZS5nZXRNb250aCgpICsgMykgLyAzKSwgLy/lraPluqZcclxuICAgICAgJ1MnOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSXHJcbiAgICB9O1xyXG4gICAgaWYgKCFmbXQpIHtcclxuICAgICAgZm10ID0gJ3l5eXktTU0tZGQgaGg6bW06c3MnO1xyXG4gICAgfVxyXG4gICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpIHtcclxuICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoZGF0ZS5nZXRGdWxsWWVhcigpICsgJycpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgayBpbiBvKSB7XHJcbiAgICAgIGlmIChuZXcgUmVnRXhwKCcoJyArIGsgKyAnKScpLnRlc3QoZm10KSkge1xyXG4gICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT0gMSkgPyAob1trXSkgOiAoKCcwMCcgKyBvW2tdKS5zdWJzdHIoKCcnICsgb1trXSkubGVuZ3RoKSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm10O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qC85byP5YyW5aSE55CGXHJcbiAgICovXHJcbiAgZm9ybWF0VmFsdWUodmFsdWU6IGFueSkge1xyXG4gICAgbGV0IHN0cjogYW55O1xyXG4gICAgaWYgKHRoaXMuY3VycmVudExhbmd1YWdlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmcodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8g5qCH6K6w57G75Z6LXHJcbiAgICBpZiAodGhpcy5fY29uZGl0aW9uVHlwZSAhPT0gQ29udHJvbFR5cGUuQm9vbENoZWNrICYmICh2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIHN3aXRjaCAodGhpcy5fY29uZGl0aW9uVHlwZSkge1xyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLlRleHQ6XHJcbiAgICAgICAgc3RyID0gdmFsdWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuRGF0ZVJhbmdlOlxyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLk1vbnRoUmFuZ2U6XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuRGF0ZVRpbWVSYW5nZTpcclxuICAgICAgICBjb25zdCBkYXRlVmFsdWVzID0gdmFsdWUuc3BsaXQodGhpcy5fc3BsaXRlcik7XHJcbiAgICAgICAgbGV0IGRhdGFTdHIgPSBbXTtcclxuICAgICAgICBpZiAoZGF0ZVZhbHVlcyAmJiBkYXRlVmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgZGF0ZVZhbHVlcy5mb3JFYWNoKGRhdGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmFsID0gdGhpcy5kYXRlZm9ybWF0KGRhdGUpO1xyXG4gICAgICAgICAgICBkYXRhU3RyLnB1c2godmFsKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdHIgPSBkYXRhU3RyLmpvaW4odGhpcy5fc3BsaXRlcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlRGF0ZTpcclxuICAgICAgICBpZih2YWx1ZSAmJiB2YWx1ZS50ZXh0KSB7XHJcbiAgICAgICAgICBzdHIgPSB2YWx1ZS50ZXh0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHN0ciA9IHRoaXMuZGF0ZWZvcm1hdCh2YWx1ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlRGF0ZVRpbWU6XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlTW9udGg6XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuU2luZ2xlWWVhcjpcclxuICAgICAgICBzdHIgPSB0aGlzLmRhdGVmb3JtYXQodmFsdWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLlNpbmdsZU51bWJlcjpcclxuICAgICAgICAvLyDmlbDlrZdcclxuICAgICAgICBzdHIgPSB0aGlzLmdldEZvcm1hdE51bWJlclZhbHVlKHZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb250cm9sVHlwZS5OdW1iZXJSYW5nZTpcclxuICAgICAgICAvLyDmlbDlrZcg5Yy66Ze0ICAgICBcclxuICAgICAgICBjb25zdCBudW1iZXJWYWx1ZXMgPSB2YWx1ZS5zcGxpdCh0aGlzLl9zcGxpdGVyKTtcclxuICAgICAgICBsZXQgcmVzdWx0U3RyID0gW107XHJcbiAgICAgICAgaWYgKG51bWJlclZhbHVlcyAmJiBudW1iZXJWYWx1ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBudW1iZXJWYWx1ZXMuZm9yRWFjaChkYXRlID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbCA9IHRoaXMuZ2V0Rm9ybWF0TnVtYmVyVmFsdWUoZGF0ZSk7XHJcbiAgICAgICAgICAgIHJlc3VsdFN0ci5wdXNoKHZhbCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RyID0gcmVzdWx0U3RyLmpvaW4odGhpcy5fc3BsaXRlcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuUmFkaW86XHJcbiAgICAgICAgLy8g5Y2V6YCJ57uEXHJcbiAgICAgICAgdGhpcy5kYXRhU291cmNlID0gKHRoaXMuY29uZGl0aW9uLmNvbnRyb2wgYXMgUmFkaW9Db250cm9sKS5lbnVtVmFsdWVzO1xyXG4gICAgICAgIHN0ciA9IHRoaXMuZ2V0Rm9ybWF0RW51bVZhbHVlKHZhbHVlKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBDb250cm9sVHlwZS5Ecm9wRG93bkxpc3Q6XHJcbiAgICAgICAgLy8g5LiL5ouJXHJcbiAgICAgICAgdGhpcy5kYXRhU291cmNlID0gKHRoaXMuY29uZGl0aW9uLmNvbnRyb2wgYXMgRHJvcERvd25MaXN0Q29udHJvbCkuZW51bVZhbHVlcztcclxuICAgICAgICBzdHIgPSB0aGlzLmdldEZvcm1hdEVudW1WYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuQm9vbENoZWNrOlxyXG4gICAgICAgIC8vIOW4g+WwlFxyXG4gICAgICAgIC8vdGhpcy5kYXRhU291cmNlID0gKHRoaXMuY29uZGl0aW9uLmNvbnRyb2wgYXMgQ2hlY2tCb3hDb250cm9sKS5kYXRhO1xyXG4gICAgICAgIHN0ciA9IHRoaXMuZ2V0Rm9ybWF0Q2hlY2tCb3hWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy/luK7liqnnmoTor53lhbzlrrnml6fmlbDmja7vvIzpg6jliIblgLzkuLpoZWxwLXRleHQtdmFsdWUtbnVsbOeahOi9rOWMluS4uuepuuWtl+espuS4slxyXG4gICAgICBjYXNlIENvbnRyb2xUeXBlLlNtYXJ0SGVscDpcclxuICAgICAgICBzdHIgPSB2YWx1ZSA9PT0gJ2hlbHAtdGV4dC12YWx1ZS1udWxsJyA/ICcnIDogdmFsdWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQ29udHJvbFR5cGUuQ29tYm9Mb29rVXA6XHJcbiAgICAgICAgc3RyID0gdmFsdWUgPT09ICdoZWxwLXRleHQtdmFsdWUtbnVsbCcgPyAnJyA6IHZhbHVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBzdHIgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3RyO1xyXG4gIH1cclxufVxyXG4iXX0=