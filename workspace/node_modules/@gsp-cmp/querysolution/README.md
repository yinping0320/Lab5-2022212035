# FarrisUi QuerySolution

FarrisUi查询方案模块

# FarrisUi QuerySolution模块说明

1. 输入属性：

    *fieldConfigs：字段配置数据源，用于展示可选择字段配置的列表，参数类型:Array<any>，必传属性；

    formId：表单ID，必传属性；

    presetQuerySolutionName: 系统预置查询方案名称，必传；

    *presetFieldConfigs*:系统预置查询方案字段列表；参数类型:Array<any>，必传属性；

2. 输出事件：

    queryEmitter：点击筛选按钮后的查询结果事件，输出参数类型：Array<QueryCondition>。

# FarrisUi QuerySolution模块引入步骤

1. 引入模块QuerySolutionModule

2. 在HTML模板中引入
   
    ```js
    <farris-querysolution>
    [fieldConfigs]="[字段配置]"
    [presetFieldConfigs]="[系统预置查询方案选择字段]"
    [formId]="[表单ID]"
    [sessionId]="[sessionId]" 
    [presetQuerySolutionName]="[系统预置查询方案名称]"
    </farris-querysolution>
    ```

# QuerySolution发包步骤

> 请使用 NodeJS 版本 8.11.3，否则在第四步会出错。
>
> 请使用node_modules.zip包里的代码，不需要npm install

第一步，在代码根目录``/farris-querysolution-angular7``下，运行命令

```npm run ngc-farris-querysolution```

运行完成，会在根目录``/farris-querysolution-angular7``下生成```out-tsc```文件夹。

第二步，在```out-tsc/app/projects/farris-querysolution-designer/src/```文件夹下添加三个文件：

分别是```ui.js```，```querycondition.js```，```querysolution.js```，内容如下：

```javascript
//ui.js ---start
export * from '@farris/ui-common';
export * from '@farris/ui-common/column';
export * from '@farris/ui-common/date';
export * from '@farris/ui-common/events';
export * from '@farris/ui-common/lib';
export * from '@farris/ui-common/number';
export * from '@farris/ui-common/types';
export * from '@farris/ui-datatable';
export * from '@farris/ui-dialog';
export * from '@farris/ui-draggable';
export * from '@farris/ui-dropdown';
export * from '@farris/ui-field-group';
export * from '@farris/ui-filter-editor';
export * from '@farris/ui-flex-layout';
export * from '@farris/ui-forms';
export * from '@farris/ui-input-group';
export * from '@farris/ui-language-textbox';
export * from '@farris/ui-layout';
export * from '@farris/ui-loading';
export * from '@farris/ui-lookup';
export * from '@farris/ui-messager';
export * from '@farris/ui-modal';
export * from '@farris/ui-multi-select';
export * from '@farris/ui-notify';
export * from '@farris/ui-pagination';
export * from '@farris/ui-panel';
export * from '@farris/ui-perfect-scrollbar';
export * from '@farris/ui-popover';
export * from '@farris/ui-property-panel';
export * from '@farris/ui-response-toolbar';
export * from '@farris/ui-responsive';
export * from '@farris/ui-shortcuts';
export * from '@farris/ui-sort-editor';
export * from '@farris/ui-tabs';
export * from '@farris/ui-treetable';
//ui.js ---end

//querycondition.js ---start
export * from '@farris/component-querycondition';
//querycondition.js ---end

//querysolution.js ---start
export * from '@gsp-cmp/querysolution';
//querysolution.js ---end
```

第三步，在代码根目录``/farris-querysolution-angular7``下，运行命令

```npm run rollup-farris-querysolution```

运行完成后，会生成```dist-rollup-prod```文件夹。

> /dist-rollup-prod/farris-querysolution-designer/@gsp-cmp/querysolution.js 需要复制到
>
> 安装盘/platform/common/web/@gsp-cmp文件夹下

第四步，在代码根目录``/farris-querysolution-angular7``下，运行命令

```npm run build farris-querysolution -c=production```

运行完成后，会生成```dist```文件夹

第五步，发布npm包。

在```dist```文件夹下```package.json```同级目录下运行命令：

```javascript
npm login
npm publish -access=public -tag=latest
```

