/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, EventEmitter, Output, ViewChild, TemplateRef, ComponentFactoryResolver, Injector } from '@angular/core';
import { ViewUtils } from '../view-utils/view-utils';
import { ComponentInfo } from '../params/component-info';
import { BsModalService } from '@farris/ui-modal';
import { ComponentConvertor } from '../convertor/convertor';
var CommonComponentSelectorComponent = /** @class */ (function () {
    function CommonComponentSelectorComponent(utils, modalService, resolver, injector) {
        var _this = this;
        this.utils = utils;
        this.modalService = modalService;
        this.resolver = resolver;
        this.injector = injector;
        this.selectedOpUris = [];
        this.isRowSelected = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return _this.selectedOpUris.indexOf(e.dataItem.uri) >= 0; });
        this.confirmEmitter = new EventEmitter();
        this.closeEmitter = new EventEmitter();
    }
    Object.defineProperty(CommonComponentSelectorComponent.prototype, "componentInfo", {
        set: /**
         * @param {?} _componentInfo
         * @return {?}
         */
        function (_componentInfo) {
            this._componentInfo = _componentInfo;
            this.metadata = _componentInfo.metadata;
            /** @type {?} */
            var convertor = new ComponentConvertor();
            this.metadata = convertor.initFromObject(convertor.convertorToObject(_componentInfo.metadata));
            this.metadata.operations = new Array();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    CommonComponentSelectorComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this._componentInfo = this._componentInfo || new ComponentInfo();
    };
    /**
     * @return {?}
     */
    CommonComponentSelectorComponent.prototype.confirm = /**
     * @return {?}
     */
    function () {
        if (!this._componentInfo.metadata || !this._componentInfo.metadata.operations) {
            if (this._componentInfo.metadata.operations.length <= 0) {
                this.utils.showInfo('没有可选的构件操作', 'info', '', 1500);
                return;
            }
        }
        if (!this.metadata.operations || this.metadata.operations.length <= 0) {
            this.utils.showInfo('请选择构件操作', 'info', '', 1500);
            return;
        }
        if (this.dialog) {
            this.dialog.close();
        }
        this.confirmEmitter.emit(this.metadata);
    };
    /**
     * @return {?}
     */
    CommonComponentSelectorComponent.prototype.close = /**
     * @return {?}
     */
    function () {
        if (this.dialog) {
            this.dialog.close();
        }
        this.closeEmitter.emit();
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    CommonComponentSelectorComponent.prototype.cellClickHandler = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.selectedOpUris = [$event.dataItem.uri];
        this.metadata.operations = [$event.dataItem];
    };
    CommonComponentSelectorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'common-component-selector',
                    template: "<div class=\"d-flex\" style=\"position: absolute;top: 0;bottom: 0;left: 0;right: 0;min-width: 300px;\">\n    <kendo-grid class=\"f-utils-flex-column\" style=\"flex:1 1 auto;padding: 0px 8px 0px 8px;\" [data]=\"_componentInfo?.metadata?.operations\"\n        [selectable]=\"{enabled: true, checkboxOnly: false,mode:'single' }\" [kendoGridSelectBy]=\"'uri'\" (cellClick)=\"cellClickHandler($event)\"\n        [rowSelected]=\"isRowSelected\">\n        <kendo-grid-column field=\"code\" title=\"\u64CD\u4F5C\u7F16\u53F7\"></kendo-grid-column>\n        <kendo-grid-column field=\"name\" title=\"\u64CD\u4F5C\u540D\u79F0\"></kendo-grid-column>\n        <!-- <kendo-grid-column width=\"100\" title=\"\u53C2\u6570\u4FE1\u606F\">\n            <ng-template kendoGridCellTemplate let-dataItem>\n                <span style=\"float:left;font-size: 14px;color: #1890ff;cursor: pointer;\" (click)=\"view(dataItem)\">\u67E5\u770B<span\n                        class=\"f-icon f-accordion-collapse\"></span></span>\n            </ng-template>\n        </kendo-grid-column> -->\n    </kendo-grid>\n</div>\n\n<ng-template #btnRef>\n    <div style=\"width: 100%;line-height: 50px; text-align: center;min-width: 140px;\">\n        <button class=\"btn btn-secondary\" (click)=\"close()\" style=\"float:right;margin-right: 5px\">\u53D6\u6D88</button>\n        <button class=\"btn btn-primary\" (click)=confirm() style=\"float:right;margin-right: 5px\">\u786E\u5B9A</button>\n    </div>\n</ng-template>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    CommonComponentSelectorComponent.ctorParameters = function () { return [
        { type: ViewUtils },
        { type: BsModalService },
        { type: ComponentFactoryResolver },
        { type: Injector }
    ]; };
    CommonComponentSelectorComponent.propDecorators = {
        componentInfo: [{ type: Input }],
        btnRef: [{ type: ViewChild, args: ['btnRef',] }],
        confirmEmitter: [{ type: Output }],
        closeEmitter: [{ type: Output }]
    };
    return CommonComponentSelectorComponent;
}());
export { CommonComponentSelectorComponent };
if (false) {
    /** @type {?} */
    CommonComponentSelectorComponent.prototype._componentInfo;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.dialog;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.metadata;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.selectedOpUris;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.isRowSelected;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.btnRef;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.confirmEmitter;
    /** @type {?} */
    CommonComponentSelectorComponent.prototype.closeEmitter;
    /**
     * @type {?}
     * @private
     */
    CommonComponentSelectorComponent.prototype.utils;
    /**
     * @type {?}
     * @private
     */
    CommonComponentSelectorComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    CommonComponentSelectorComponent.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    CommonComponentSelectorComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLWNvbXBvbmVudC1zZWxlY3Rvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLWNtcC9jY21wLXVpLyIsInNvdXJjZXMiOlsibGliL2NjbXAtc2VsZWN0b3IvY29tbW9uLWNvbXBvbmVudC1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSx3QkFBd0IsRUFBRSxRQUFRLEVBQWdCLE1BQU0sZUFBZSxDQUFDO0FBRXpKLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDekQsT0FBTyxFQUFjLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRTlELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRzVEO0lBZ0NJLDBDQUFvQixLQUFnQixFQUFVLFlBQTRCLEVBQVMsUUFBa0MsRUFBVSxRQUFrQjtRQUFqSixpQkFBc0o7UUFBbEksVUFBSyxHQUFMLEtBQUssQ0FBVztRQUFVLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtRQUFTLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQVZqSixtQkFBYyxHQUFhLEVBQUUsQ0FBQztRQUU5QixrQkFBYTs7OztRQUFHLFVBQUMsQ0FBVSxJQUFLLE9BQUEsS0FBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQWhELENBQWdELEVBQUM7UUFJdkUsbUJBQWMsR0FBK0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVoRSxpQkFBWSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO0lBRXNGLENBQUM7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cnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdG9yLCBDb21wb25lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgR3NwQ29tcG9uZW50IH0gZnJvbSAnQGdzcC1jbXAvY29tbW9uLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFZpZXdVdGlscyB9IGZyb20gJy4uL3ZpZXctdXRpbHMvdmlldy11dGlscyc7XHJcbmltcG9ydCB7IENvbXBvbmVudEluZm8gfSBmcm9tICcuLi9wYXJhbXMvY29tcG9uZW50LWluZm8nO1xyXG5pbXBvcnQgeyBCc01vZGFsUmVmLCBCc01vZGFsU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbW9kYWwnO1xyXG5pbXBvcnQgeyBSb3dBcmdzLCBDZWxsQ2xpY2tFdmVudCB9IGZyb20gJ0Bwcm9ncmVzcy9rZW5kby1hbmd1bGFyLWdyaWQnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRDb252ZXJ0b3IgfSBmcm9tICcuLi9jb252ZXJ0b3IvY29udmVydG9yJztcclxuaW1wb3J0IHsgT3BlcmF0aW9uLCBTdHJ1Y3R1cmVkVHlwZSB9IGZyb20gJ0BlY3AtY2FmL2NvbW1vbi1zdHJ1Y3R1cmUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2NvbW1vbi1jb21wb25lbnQtc2VsZWN0b3InLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2NvbW1vbi1jb21wb25lbnQtc2VsZWN0b3IuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vY29tbW9uLWNvbXBvbmVudC1zZWxlY3Rvci5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIENvbW1vbkNvbXBvbmVudFNlbGVjdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgICBfY29tcG9uZW50SW5mbzogQ29tcG9uZW50SW5mbztcclxuXHJcbiAgICBASW5wdXQoKSBzZXQgY29tcG9uZW50SW5mbyhfY29tcG9uZW50SW5mbzogQ29tcG9uZW50SW5mbykge1xyXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudEluZm8gPSBfY29tcG9uZW50SW5mbztcclxuICAgICAgICB0aGlzLm1ldGFkYXRhPV9jb21wb25lbnRJbmZvLm1ldGFkYXRhO1xyXG5cclxuICAgICAgICBsZXQgY29udmVydG9yID0gbmV3IENvbXBvbmVudENvbnZlcnRvcigpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBjb252ZXJ0b3IuaW5pdEZyb21PYmplY3QoY29udmVydG9yLmNvbnZlcnRvclRvT2JqZWN0KF9jb21wb25lbnRJbmZvLm1ldGFkYXRhKSk7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YS5vcGVyYXRpb25zID0gbmV3IEFycmF5PE9wZXJhdGlvbj4oKTtcclxuICAgIH1cclxuXHJcbiAgICBkaWFsb2c6IEJzTW9kYWxSZWY7XHJcblxyXG4gICAgbWV0YWRhdGE6IEdzcENvbXBvbmVudDtcclxuXHJcbiAgICBzZWxlY3RlZE9wVXJpczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBpc1Jvd1NlbGVjdGVkID0gKGU6IFJvd0FyZ3MpID0+IHRoaXMuc2VsZWN0ZWRPcFVyaXMuaW5kZXhPZihlLmRhdGFJdGVtLnVyaSkgPj0gMDtcclxuXHJcbiAgICBAVmlld0NoaWxkKCdidG5SZWYnKSBidG5SZWY6IFRlbXBsYXRlUmVmPGFueT47XHJcblxyXG4gICAgQE91dHB1dCgpIGNvbmZpcm1FbWl0dGVyOiBFdmVudEVtaXR0ZXI8R3NwQ29tcG9uZW50PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBAT3V0cHV0KCkgY2xvc2VFbWl0dGVyOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHV0aWxzOiBWaWV3VXRpbHMsIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZSxwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yKSB7IH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgICAgICB0aGlzLl9jb21wb25lbnRJbmZvID0gdGhpcy5fY29tcG9uZW50SW5mbyB8fCBuZXcgQ29tcG9uZW50SW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbmZpcm0oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jb21wb25lbnRJbmZvLm1ldGFkYXRhIHx8ICF0aGlzLl9jb21wb25lbnRJbmZvLm1ldGFkYXRhLm9wZXJhdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBvbmVudEluZm8ubWV0YWRhdGEub3BlcmF0aW9ucy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlscy5zaG93SW5mbygn5rKh5pyJ5Y+v6YCJ55qE5p6E5Lu25pON5L2cJywgJ2luZm8nLCAnJywgMTUwMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLm1ldGFkYXRhLm9wZXJhdGlvbnMgfHwgdGhpcy5tZXRhZGF0YS5vcGVyYXRpb25zLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuc2hvd0luZm8oJ+ivt+mAieaLqeaehOS7tuaTjeS9nCcsICdpbmZvJywgJycsIDE1MDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbmZpcm1FbWl0dGVyLmVtaXQodGhpcy5tZXRhZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xvc2VFbWl0dGVyLmVtaXQoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2VsbENsaWNrSGFuZGxlcigkZXZlbnQ6IENlbGxDbGlja0V2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wVXJpcyA9IFskZXZlbnQuZGF0YUl0ZW0udXJpXTtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhLm9wZXJhdGlvbnMgPSBbJGV2ZW50LmRhdGFJdGVtXTtcclxuICAgIH1cclxufVxyXG4iXX0=