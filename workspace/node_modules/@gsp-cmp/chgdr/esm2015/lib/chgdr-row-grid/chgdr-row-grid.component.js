/**
 * @fileoverview added by tsickle
 * Generated from: lib/chgdr-row-grid/chgdr-row-grid.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector, Input, ViewChild } from '@angular/core';
import { DatagridComponent } from '@farris/ui-datagrid';
import { ChgdrTreeNode } from '../chgdr-data-viewer/chgdr-tree-builder';
import { OperateType } from '../model/operate-type';
import { I18nUtil } from '../service/i18n-service';
export class ChgdrRowGridComponent {
    /**
     * @param {?} injector
     */
    constructor(injector) {
        this.injector = injector;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.columns = [
            { field: 'fieldName', width: 130, title: this.fieldNameColumnTitle },
            { field: 'oldValue', width: 130, title: this.oldValueColumnTitle, showTips: true },
            { field: 'newValue', width: 130, title: this.newValueColumnTitle, showTips: true }
        ];
        /** @type {?} */
        let oldValueField = this.columns[1];
        /** @type {?} */
        let newValueField = this.columns[2];
        if (!!this.chgdrTreeNode) {
            //根据初始的变更类型更改显示列的信息
            //此处不能直接调用DataGrid组件的方法更改，因为此处尚未创建DataGrid
            /** @type {?} */
            let type = this.chgdrTreeNode.chgdrRow.operateType;
            if (type == OperateType.ADD) {
                oldValueField.visible = false;
                newValueField.title = this.valueColumnTitle;
            }
            else if (type == OperateType.DELETE) {
                newValueField.visible = false;
                oldValueField.title = this.valueColumnTitle;
            }
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        //原来变更行类型
        /** @type {?} */
        let oldType;
        if (!changes.chgdrTreeNode) {
            oldType = null;
        }
        else if (!changes.chgdrTreeNode.previousValue) {
            oldType = null;
        }
        else {
            oldType = changes.chgdrTreeNode.previousValue.chgdrRow.operateType;
        }
        //现在变更行类型
        /** @type {?} */
        let newType;
        if (!changes.chgdrTreeNode) {
            newType = null;
        }
        else if (!changes.chgdrTreeNode.currentValue) {
            newType = null;
        }
        else {
            newType = changes.chgdrTreeNode.currentValue.chgdrRow.operateType;
        }
        if (oldType == newType || !this.dataGrid || !this.dataGrid.columns) {
            //如果新老类型一致(或DataGrid尚未创建)，则不变动
            //do nothing
        }
        else if (newType == OperateType.ADD) {
            this.dataGrid.showColumn("newValue");
            this.dataGrid.hideColumn("oldValue");
            this.dataGrid.setColumnTitle("newValue", this.valueColumnTitle);
        }
        else if (newType == OperateType.DELETE) {
            this.dataGrid.showColumn("oldValue");
            this.dataGrid.hideColumn("newValue");
            this.dataGrid.setColumnTitle("oldValue", this.valueColumnTitle);
        }
        else {
            this.dataGrid.showColumn("oldValue");
            this.dataGrid.showColumn("newValue");
            this.dataGrid.setColumnTitle("oldValue", this.oldValueColumnTitle);
            this.dataGrid.setColumnTitle("newValue", this.newValueColumnTitle);
        }
        if (changes.chgdrTreeNode && changes.chgdrTreeNode.currentValue) {
            this.data = changes.chgdrTreeNode.currentValue.chgdrRow.changes;
        }
    }
    /**
     * @private
     * @return {?}
     */
    get fieldNameColumnTitle() {
        return I18nUtil.instant("field-name-column-title");
    }
    /**
     * @private
     * @return {?}
     */
    get valueColumnTitle() {
        return I18nUtil.instant("value-column-title");
    }
    /**
     * @private
     * @return {?}
     */
    get oldValueColumnTitle() {
        return I18nUtil.instant("old-value-column-title");
    }
    /**
     * @private
     * @return {?}
     */
    get newValueColumnTitle() {
        return I18nUtil.instant("new-value-column-title");
    }
}
ChgdrRowGridComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-chgdr-row-grid',
                template: "<farris-datagrid \r\n   #chgdrRowGrid \r\n   idField=\"fieldLabel\" \r\n   [columns]=\"columns\" \r\n   [data]=\"data\" \r\n   [fit]=\"true\"\r\n   [fitColumns]=\"true\"\r\n   [pagination]=\"false\" \r\n>",
                styles: [""]
            }] }
];
/** @nocollapse */
ChgdrRowGridComponent.ctorParameters = () => [
    { type: Injector }
];
ChgdrRowGridComponent.propDecorators = {
    chgdrTreeNode: [{ type: Input }],
    dataGrid: [{ type: ViewChild, args: ["chgdrRowGrid",] }]
};
if (false) {
    /** @type {?} */
    ChgdrRowGridComponent.prototype.chgdrTreeNode;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.dataGrid;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.columns;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.data;
    /**
     * @type {?}
     * @private
     */
    ChgdrRowGridComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hnZHItcm93LWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvY2hnZHIvIiwic291cmNlcyI6WyJsaWIvY2hnZHItcm93LWdyaWQvY2hnZHItcm93LWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFvQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFPbkQsTUFBTSxPQUFPLHFCQUFxQjs7OztJQVNoQyxZQUFvQixRQUFrQjtRQUFsQixhQUFRLEdBQVIsUUFBUSxDQUFVO0lBQ3RDLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNiLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7WUFDcEUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO1lBQ2xGLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtTQUNuRixDQUFDOztZQUNFLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzs7WUFDL0IsYUFBYSxHQUFH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QUksR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1NBQ2pFO0lBQ0gsQ0FBQzs7Ozs7SUFFRCxJQUFZLG9CQUFvQjtRQUM5QixPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQztJQUNyRCxDQUFDOzs7OztJQUVELElBQVksZ0JBQWdCO1FBQzFCLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ2hELENBQUM7Ozs7O0lBRUQsSUFBWSxtQkFBbUI7UUFDN0IsT0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7SUFDcEQsQ0FBQzs7Ozs7SUFFRCxJQUFZLG1CQUFtQjtRQUM3QixPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUNwRCxDQUFDOzs7WUFsR0YsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxvQkFBb0I7Z0JBQzlCLHdOQUE4Qzs7YUFFL0M7Ozs7WUFYbUIsUUFBUTs7OzRCQWF6QixLQUFLO3VCQUVMLFNBQVMsU0FBQyxjQUFjOzs7O0lBRnpCLDhDQUM2Qjs7SUFDN0IseUNBQzRCOztJQUU1Qix3Q0FBZTs7SUFDZixxQ0FBeUI7Ozs7O0lBRWIseUNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbmplY3RvciwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRGF0YWdyaWRDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLWRhdGFncmlkJztcclxuaW1wb3J0IHsgQ2hhbmdlQ29sdW1uSXRlbSwgQ2hnZHJEYXRhUm93Tm9kZSB9IGZyb20gJy4uL2NoZ2RyLWRhdGEtdmlld2VyL2NoZ2RyLWRhdGEnO1xyXG5pbXBvcnQgeyBDaGdkclRyZWVOb2RlIH0gZnJvbSAnLi4vY2hnZHItZGF0YS12aWV3ZXIvY2hnZHItdHJlZS1idWlsZGVyJztcclxuaW1wb3J0IHsgT3BlcmF0ZVR5cGUgfSBmcm9tICcuLi9tb2RlbC9vcGVyYXRlLXR5cGUnO1xyXG5pbXBvcnQgeyBJMThuVXRpbCB9IGZyb20gJy4uL3NlcnZpY2UvaTE4bi1zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbGliLWNoZ2RyLXJvdy1ncmlkJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vY2hnZHItcm93LWdyaWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2NoZ2RyLXJvdy1ncmlkLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2hnZHJSb3dHcmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpXHJcbiAgY2hnZHJUcmVlTm9kZTogQ2hnZHJUcmVlTm9kZTtcclxuICBAVmlld0NoaWxkKFwiY2hnZHJSb3dHcmlkXCIpXHJcbiAgZGF0YUdyaWQ6IERhdGFncmlkQ29tcG9uZW50O1xyXG5cclxuICBjb2x1bW5zOiBhbnlbXTtcclxuICBkYXRhOiBDaGFuZ2VDb2x1bW5JdGVtW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yKSB7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuY29sdW1ucyA9IFtcclxuICAgICAgeyBmaWVsZDogJ2ZpZWxkTmFtZScsIHdpZHRoOiAxMzAsIHRpdGxlOiB0aGlzLmZpZWxkTmFtZUNvbHVtblRpdGxlIH0sXHJcbiAgICAgIHsgZmllbGQ6ICdvbGRWYWx1ZScsIHdpZHRoOiAxMzAsIHRpdGxlOiB0aGlzLm9sZFZhbHVlQ29sdW1uVGl0bGUsIHNob3dUaXBzOiB0cnVlIH0sXHJcbiAgICAgIHsgZmllbGQ6ICduZXdWYWx1ZScsIHdpZHRoOiAxMzAsIHRpdGxlOiB0aGlzLm5ld1ZhbHVlQ29sdW1uVGl0bGUsIHNob3dUaXBzOiB0cnVlIH1cclxuICAgIF07XHJcbiAgICBsZXQgb2xkVmFsdWVGaWVsZCA9IHRoaXMuY29sdW1uc1sxXTtcclxuICAgIGxldCBuZXdWYWx1ZUZpZWxkID0gdGhpcy5jb2x1bW5zWzJdO1xyXG5cclxuICAgIGlmICghIXRoaXMuY2hnZHJUcmVlTm9kZSkge1xyXG4gICAgICAvL+agueaNruWIneWni+eahOWPmOabtOexu+Wei+abtOaUueaYvuekuuWIl+eahOS/oeaBr1xyXG4gICAgICAvL+atpOWkhOS4jeiDveebtOaOpeiwg+eUqERhdGFHcmlk57uE5Lu255qE5pa55rOV5pu05pS577yM5Zug5Li65q2k5aSE5bCa5pyq5Yib5bu6RGF0YUdyaWRcclxuICAgICAgbGV0IHR5cGU6IE9wZXJhdGVUeXBlID0gdGhpcy5jaGdkclRyZWVOb2RlLmNoZ2RyUm93Lm9wZXJhdGVUeXBlO1xyXG4gICAgICBpZiAodHlwZSA9PSBPcGVyYXRlVHlwZS5BREQpIHtcclxuICAgICAgICBvbGRWYWx1ZUZpZWxkLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBuZXdWYWx1ZUZpZWxkLnRpdGxlID0gdGhpcy52YWx1ZUNvbHVtblRpdGxlO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gT3BlcmF0ZVR5cGUuREVMRVRFKSB7XHJcbiAgICAgICAgbmV3VmFsdWVGaWVsZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgb2xkVmFsdWVGaWVsZC50aXRsZSA9IHRoaXMudmFsdWVDb2x1bW5UaXRsZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgLy/ljp/mnaXlj5jmm7TooYznsbvlnotcclxuICAgIGxldCBvbGRUeXBlOiBPcGVyYXRlVHlwZTtcclxuICAgIGlmICghY2hhbmdlcy5jaGdkclRyZWVOb2RlKSB7XHJcbiAgICAgIG9sZFR5cGUgPSBudWxsO1xyXG4gICAgfSBlbHNlIGlmICghY2hhbmdlcy5jaGdkclRyZWVOb2RlLnByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgb2xkVHlwZSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvbGRUeXBlID0gY2hhbmdlcy5jaGdkclRyZWVOb2RlLnByZXZpb3VzVmFsdWUuY2hnZHJSb3cub3BlcmF0ZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy/njrDlnKjlj5jmm7TooYznsbvlnotcclxuICAgIGxldCBuZXdUeXBlOiBPcGVyYXRlVHlwZTtcclxuICAgIGlmICghY2hhbmdlcy5jaGdkclRyZWVOb2RlKSB7XHJcbiAgICAgIG5ld1R5cGUgPSBudWxsO1xyXG4gICAgfSBlbHNlIGlmICghY2hhbmdlcy5jaGdkclRyZWVOb2RlLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICBuZXdUeXBlID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5ld1R5cGUgPSBjaGFuZ2VzLmNoZ2RyVHJlZU5vZGUuY3VycmVudFZhbHVlLmNoZ2RyUm93Lm9wZXJhdGVUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvbGRUeXBlID09IG5ld1R5cGUgfHwgIXRoaXMuZGF0YUdyaWQgfHwgIXRoaXMuZGF0YUdyaWQuY29sdW1ucykge1xyXG4gICAgICAvL+WmguaenOaWsOiAgeexu+Wei+S4gOiHtCjmiJZEYXRhR3JpZOWwmuacquWIm+W7uinvvIzliJnkuI3lj5jliqhcclxuICAgICAgLy9kbyBub3RoaW5nXHJcbiAgICB9IGVsc2UgaWYgKG5ld1R5cGUgPT0gT3BlcmF0ZVR5cGUuQUREKSB7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2hvd0NvbHVtbihcIm5ld1ZhbHVlXCIpO1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLmhpZGVDb2x1bW4oXCJvbGRWYWx1ZVwiKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5zZXRDb2x1bW5UaXRsZShcIm5ld1ZhbHVlXCIsIHRoaXMudmFsdWVDb2x1bW5UaXRsZSk7XHJcbiAgICB9IGVsc2UgaWYgKG5ld1R5cGUgPT0gT3BlcmF0ZVR5cGUuREVMRVRFKSB7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2hvd0NvbHVtbihcIm9sZFZhbHVlXCIpO1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLmhpZGVDb2x1bW4oXCJuZXdWYWx1ZVwiKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5zZXRDb2x1bW5UaXRsZShcIm9sZFZhbHVlXCIsIHRoaXMudmFsdWVDb2x1bW5UaXRsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLnNob3dDb2x1bW4oXCJvbGRWYWx1ZVwiKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5zaG93Q29sdW1uKFwibmV3VmFsdWVcIik7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2V0Q29sdW1uVGl0bGUoXCJvbGRWYWx1ZVwiLCB0aGlzLm9sZFZhbHVlQ29sdW1uVGl0bGUpO1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLnNldENvbHVtblRpdGxlKFwibmV3VmFsdWVcIiwgdGhpcy5uZXdWYWx1ZUNvbHVtblRpdGxlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hhbmdlcy5jaGdkclRyZWVOb2RlICYmIGNoYW5nZXMuY2hnZHJUcmVlTm9kZS5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgdGhpcy5kYXRhID0gY2hhbmdlcy5jaGdkclRyZWVOb2RlLmN1cnJlbnRWYWx1ZS5jaGdkclJvdy5jaGFuZ2VzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXQgZmllbGROYW1lQ29sdW1uVGl0bGUoKSB7XHJcbiAgICByZXR1cm4gSTE4blV0aWwuaW5zdGFudChcImZpZWxkLW5hbWUtY29sdW1uLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXQgdmFsdWVDb2x1bW5UaXRsZSgpIHtcclxuICAgIHJldHVybiBJMThuVXRpbC5pbnN0YW50KFwidmFsdWUtY29sdW1uLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXQgb2xkVmFsdWVDb2x1bW5UaXRsZSgpIHtcclxuICAgIHJldHVybiBJMThuVXRpbC5pbnN0YW50KFwib2xkLXZhbHVlLWNvbHVtbi10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IG5ld1ZhbHVlQ29sdW1uVGl0bGUoKSB7XHJcbiAgICByZXR1cm4gSTE4blV0aWwuaW5zdGFudChcIm5ldy12YWx1ZS1jb2x1bW4tdGl0bGVcIik7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=