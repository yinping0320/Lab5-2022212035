{"version":3,"file":"gsp-cmp-chgdr.umd.js.map","sources":["ng://@gsp-cmp/chgdr/lib/chgdr-data-viewer/chgdr-data.ts","ng://@gsp-cmp/chgdr/lib/service/i18n/en.ts","ng://@gsp-cmp/chgdr/lib/service/i18n/zh-CHS.ts","ng://@gsp-cmp/chgdr/lib/service/i18n/zh-CHT.ts","ng://@gsp-cmp/chgdr/lib/service/i18n-service.ts","ng://@gsp-cmp/chgdr/lib/chgdr-data-viewer/chgdr-data-builder.ts","ng://@gsp-cmp/chgdr/lib/util/guid.util.ts","ng://@gsp-cmp/chgdr/lib/chgdr-data-viewer/chgdr-tree-builder.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr-metadata.service.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr-config.service.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr-config-handler.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr-inner.service.ts","ng://@gsp-cmp/chgdr/lib/chgdr-data-viewer/chgdr-data-viewer.component.ts","ng://@gsp-cmp/chgdr/lib/model/operate-type.ts","node_modules/tslib/tslib.es6.js","ng://@gsp-cmp/chgdr/lib/util/map.util.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr.service.ts","ng://@gsp-cmp/chgdr/lib/model/change-data-query-param.ts","ng://@gsp-cmp/chgdr/lib/model/change-data-query-result.ts","ng://@gsp-cmp/chgdr/lib/util/error.util.ts","ng://@gsp-cmp/chgdr/lib/util/time.util.ts","ng://@gsp-cmp/chgdr/lib/chgdr-list/chgdr-list.component.ts","ng://@gsp-cmp/chgdr/lib/chgdr-row-baseinfo-form/chgdr-row-baseinfo-form.component.ts","ng://@gsp-cmp/chgdr/lib/chgdr-row-grid/chgdr-row-grid.component.ts","ng://@gsp-cmp/chgdr/lib/chgdr-list-dialog-content/chgdr-list-dialog-content.component.ts","ng://@gsp-cmp/chgdr/lib/model/chgdr-ui-config.ts","ng://@gsp-cmp/chgdr/lib/service/chgdr-list-ui.service.ts","ng://@gsp-cmp/chgdr/lib/chgdr-header-datagrid/chgdr-header-datagrid.component.ts","ng://@gsp-cmp/chgdr/lib/chgdr.module.ts","ng://@gsp-cmp/chgdr/lib/model/change-data-header.ts","ng://@gsp-cmp/chgdr/lib/model/change-data-row.ts","ng://@gsp-cmp/chgdr/lib/model/chgdr-item-query-param.ts"],"sourcesContent":["import { OperateType } from '../model/operate-type';\r\n\r\n/** 基本信息 */\r\nexport class ChgdrData {\r\n    entityName: string;\r\n    userName: string;\r\n    operateType: OperateType;\r\n    reason: string;\r\n    dataId: string;\r\n    dataCode: Map<string, string>;\r\n    dataCodes: DataCodeField[];\r\n    changeTime: Date;\r\n    /** 本变更日志的根节点 */\r\n    entityNodes: ChgdrDataEntityNode[];\r\n}\r\n\r\n/** 发生变更的实体节点 */\r\nexport class ChgdrDataEntityNode {\r\n    entityCode: string;\r\n    entityName: string;\r\n    rows: ChgdrDataRowNode[];\r\n}\r\n\r\n/** 发生变更的行 */\r\nexport class ChgdrDataRowNode {\r\n    id: string;\r\n    entityCode: string;\r\n    entityName: string;\r\n    parentDataId: string;\r\n    dataId: string;\r\n    dataCode: Map<string, string>;\r\n    dataCodes: DataCodeField[];\r\n    operateType: OperateType;\r\n    changes: ChangeColumnItem[];\r\n    /** 发生变更的行的下级实体 */\r\n    entityNodes: ChgdrDataEntityNode[];\r\n}\r\n\r\nexport class ChangeColumnItem {\r\n    fieldLabel: string;\r\n    fieldName: string;\r\n    oldValue: string;\r\n    newValue: string;\r\n    /** 是否关联字段 */\r\n    hasAssociation: boolean;\r\n    /** 原始关联字段 */\r\n    originalColumnItem: ChangeColumnItem;\r\n    /** 是否关联带出字段 */\r\n    isAssociationRefField: boolean;\r\n    /** 关联带出字段所属的字段 */\r\n    belongFieldLabelId: string;\r\n    /** 如果当前字段为关联字段，则属性为当前字段的关联带出字段 */\r\n    children: ChangeColumnItem[] = [];\r\n}\r\n\r\nexport class DataCodeField {\r\n    fieldLabelId: string;\r\n    fieldName: string;\r\n    fieldValue: string;\r\n}","export const LangDataEn = {\r\n  \"chgdr-list-dialog-title\": \"Change data records\",\r\n  \"base-info-section-title\": \"Base info\",\r\n  \"change-detail-section-title\": \"Change detail\",\r\n  \"empty-data-text\": \"Empty Data\",\r\n  \"get-business-code-config-error\": \"Get business code config error: {{errorMessage}}\",\r\n  \"user-name-column-title\": \"User\",\r\n  \"change-time-column-title\": \"Time\",\r\n  \"change-time-column-format\": \"yyyy-MM-dd HH:mm:ss\",\r\n  \"operation-type-title\": \"Type\",\r\n  \"tech-pk-column-title\": \"Tech PK\",\r\n  \"operation-column-title\": \"Operation\",\r\n  \"can-not-found-change-record-by-id\": \"Can not found change record 【{{headerId}}】\",\r\n  \"query-change-data-record-error\": \"Query change data record error: {{errorMessage}}\",\r\n  \"show-change-detail-btn\": \"Detail\",\r\n  \"change-detail-dialog-title\": \"Change detail\",\r\n  \"start-time-label\": \"Start\",\r\n  \"end-time-label\": \"End\",\r\n  \"query-btn\": \"Query\",\r\n  \"technology-primary-key-label\": \"Tech PK\",\r\n  \"change-user-label\": \"User\",\r\n  \"change-time-label\": \"Time\",\r\n  \"change-operate-type\": \"Type\",\r\n  \"field-name-column-title\": \"Field\",\r\n  \"value-column-title\": \"Value\",\r\n  \"old-value-column-title\": \"Old value\",\r\n  \"new-value-column-title\": \"New value\",\r\n  \"operate-type-name-ADD\": \"Add\",\r\n  \"operate-type-name-MODIFY\": \"Modify\",\r\n  \"operate-type-name-DELETE\": \"Delete\",\r\n  \"yes-text\": \"Yes\",\r\n  \"no-text\": \"No\",\r\n  \"business-code-text\": \"Business code\"\r\n}","export const LangDataZhChs = {\r\n  \"chgdr-list-dialog-title\": \"变更日志列表\",\r\n  \"base-info-section-title\": \"基本信息\",\r\n  \"change-detail-section-title\": \"变更详情\",\r\n  \"empty-data-text\": \"无数据\",\r\n  \"get-business-code-config-error\": \"获取业务编号配置失败：{{errorMessage}}\",\r\n  \"user-name-column-title\": \"用户\",\r\n  \"change-time-column-title\": \"时间\",\r\n  \"change-time-column-format\": \"yyyy年MM月dd日 HH:mm:ss\",\r\n  \"operation-type-title\": \"操作类型\",\r\n  \"tech-pk-column-title\": \"技术主键\",\r\n  \"operation-column-title\": \"操作\",\r\n  \"can-not-found-change-record-by-id\": \"未找到编号为【{{headerId}}】的变更日志\",\r\n  \"query-change-data-record-error\": \"查询业务变更日志出错：{{errorMessage}}\",\r\n  \"show-change-detail-btn\": \"变更详情\",\r\n  \"change-detail-dialog-title\": \"变更日志详情\",\r\n  \"start-time-label\": \"开始时间\",\r\n  \"end-time-label\": \"结束时间\",\r\n  \"query-btn\": \"查询\",\r\n  \"technology-primary-key-label\": \"技术主键\",\r\n  \"change-user-label\": \"变更人\",\r\n  \"change-time-label\": \"变更时间\",\r\n  \"change-operate-type\": \"变更方式\",\r\n  \"field-name-column-title\": \"字段名\",\r\n  \"value-column-title\": \"值\",\r\n  \"old-value-column-title\": \"原值\",\r\n  \"new-value-column-title\": \"变更值\",\r\n  \"operate-type-name-ADD\": \"新增\",\r\n  \"operate-type-name-MODIFY\": \"修改\",\r\n  \"operate-type-name-DELETE\": \"删除\",\r\n  \"yes-text\": \"是\",\r\n  \"no-text\": \"否\",\r\n  \"business-code-text\": \"业务编号\"\r\n}","export const LangDataZhCht = {\r\n  \"chgdr-list-dialog-title\": \"變更日志列表\",\r\n  \"base-info-section-title\": \"基本信息\",\r\n  \"change-detail-section-title\": \"變更詳情\",\r\n  \"empty-data-text\": \"無數據\",\r\n  \"get-business-code-config-error\": \"獲取業務編號配置失敗：{{errorMessage}}\",\r\n  \"user-name-column-title\": \"用戶\",\r\n  \"change-time-column-title\": \"時間\",\r\n  \"change-time-column-format\": \"yyyy年MM月dd日 HH:mm:ss\",\r\n  \"operation-type-title\": \"操作類型\",\r\n  \"tech-pk-column-title\": \"技術主鍵\",\r\n  \"operation-column-title\": \"操作\",\r\n  \"can-not-found-change-record-by-id\": \"未找到編號爲【{{headerId}}】的變更日志\",\r\n  \"query-change-data-record-error\": \"查詢業務變更日志出錯：{{errorMessage}}\",\r\n  \"show-change-detail-btn\": \"變更詳情\",\r\n  \"change-detail-dialog-title\": \"變更日志詳情\",\r\n  \"start-time-label\": \"開始時間\",\r\n  \"end-time-label\": \"結束時間\",\r\n  \"query-btn\": \"查詢\",\r\n  \"technology-primary-key-label\": \"技術主鍵\",\r\n  \"change-user-label\": \"變更人\",\r\n  \"change-time-label\": \"變更時間\",\r\n  \"change-operate-type\": \"變更方式\",\r\n  \"field-name-column-title\": \"字段名\",\r\n  \"value-column-title\": \"值\",\r\n  \"old-value-column-title\": \"原值\",\r\n  \"new-value-column-title\": \"變更值\",\r\n  \"operate-type-name-ADD\": \"新增\",\r\n  \"operate-type-name-MODIFY\": \"修改\",\r\n  \"operate-type-name-DELETE\": \"刪除\",\r\n  \"yes-text\": \"是\",\r\n  \"no-text\": \"否\",\r\n  \"business-code-text\": \"業務編號\"\r\n}","import { Pipe, PipeTransform, Injectable } from '@angular/core';\r\nimport { TranslateDefaultParser, TranslateParser, TranslateService } from '@ngx-translate/core';\r\nimport { LangDataEn } from './i18n/en';\r\nimport { LangDataZhChs } from './i18n/zh-CHS';\r\nimport { LangDataZhCht } from './i18n/zh-CHT';\r\n\r\nlet I18nServiceInstance: any;\r\n\r\nlet langResourceMap: Map<string, any> = new Map();\r\nlangResourceMap.set(\"en\", LangDataEn);\r\nlangResourceMap.set(\"zh-CHS\", LangDataZhChs);\r\nlangResourceMap.set(\"zh-CHT\", LangDataZhCht);\r\n\r\nlet currentLang: string = localStorage.getItem('languageCode');\r\nif (!currentLang) {\r\n  currentLang = \"zh-CHS\";\r\n  console.log(\"未找到设置的语言，默认使用\" + currentLang);\r\n}\r\n\r\nlet parser: TranslateParser = new TranslateDefaultParser();\r\n\r\nexport class I18nUtil {\r\n  public static instant(key: string, param?: any): string {\r\n    let statement = I18nUtil.getCurrentLangResource()[key];\r\n    if (statement === undefined || statement === null) {\r\n      return key;\r\n    }\r\n\r\n    let result = parser.interpolate(statement, param);\r\n    if (result === undefined || result === null) {\r\n      return key;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private static getCurrentLangResource() {\r\n    return langResourceMap.get(currentLang) || {};\r\n  }\r\n\r\n  public static instantOrDefault(key: string, defaultText: string) {\r\n    let statement = I18nUtil.getCurrentLangResource()[key];\r\n    if (statement === undefined || statement === null) {\r\n      return defaultText;\r\n    }\r\n\r\n    let result = parser.interpolate(statement);\r\n    if (result === undefined || result === null) {\r\n      return defaultText;\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class I18nService {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public instant(key: string, param?: any): string {\r\n    return I18nUtil.instant(key, param);\r\n  }\r\n\r\n  private getCurrentLangResource() {\r\n    return langResourceMap.get(currentLang) || {};\r\n  }\r\n\r\n  public static staticInstant(key: string, defaultText: string) {\r\n    return I18nUtil.instantOrDefault(key, defaultText);\r\n  }\r\n}\r\n","import { isToday, format } from 'date-fns';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { IGSPCommonObject, IGSPCommonElement, GSPAssociation, GSPCommonElement, GSPElementDataType, GSPElementObjectType, GSPEnumValue } from '@gsp-bef/gsp-cm-metadata';\r\nimport { ChangeDataHeader } from '../model/change-data-header';\r\nimport { ChangeDataRow } from '../model/change-data-row';\r\nimport { MapUtil } from '../util/map.util';\r\nimport { ChgdrData, ChgdrDataRowNode, ChangeColumnItem, ChgdrDataEntityNode, DataCodeField } from './chgdr-data';\r\nimport { ChgdrConfigHandler } from '../service/chgdr-config-handler';\r\nimport { I18nUtil } from '../service/i18n-service';\r\n\r\nexport class ChgdrDataBuilder {\r\n    private handler: ChgdrConfigHandler;\r\n\r\n    buildChgdrData(data: ChangeDataHeader, handler: ChgdrConfigHandler): ChgdrData {\r\n        this.handler = handler;\r\n        //初始化变更日志基本信息\r\n        let chgdrData = new ChgdrData();\r\n        chgdrData.entityName = this.handler.getBeName();\r\n        chgdrData.operateType = data.operateType;\r\n        chgdrData.userName = data.userName;\r\n        chgdrData.dataId = data.dataId;\r\n        chgdrData.dataCode = data.dataCode;\r\n        chgdrData.dataCodes = this.buildDataCodes(data.dataCode, this.handler.getMainObjectCode());\r\n        chgdrData.reason = data.reason;\r\n        chgdrData.changeTime = data.changeTime;\r\n        chgdrData.entityNodes = [];\r\n\r\n        //分层组织变更日志行\r\n        let rowNodes: ChgdrDataRowNode[] = [];\r\n        !!data.rows && data.rows.forEach(row => {\r\n            if (!row) {\r\n                return;\r\n            }\r\n            let rowNode = new ChgdrDataRowNode();\r\n            rowNode.id = row.id;\r\n            rowNode.parentDataId = row.parentDataId;\r\n            rowNode.dataId = row.dataId;\r\n            rowNode.dataCode = row.dataCode;\r\n            rowNode.dataCodes = this.buildDataCodes(row.dataCode, row.entityCode);\r\n            rowNode.entityCode = row.entityCode;\r\n            rowNode.entityName = this.handler.getEntityNameOrDefault(row.entityCode);\r\n            rowNode.operateType = row.operateType;\r\n            rowNode.entityNodes = [];\r\n\r\n            //组织列的变更信息\r\n            let changeColumnKeys: string[] = this.extractChangeColumnKeys(row);\r\n            let columnValueChanges: ChangeColumnItem[] = [];\r\n            changeColumnKeys.forEach((key) => {\r\n                let column = new ChangeColumnItem();\r\n                column.fieldLabel = key;\r\n                column.fieldName = this.handler.getEntityFieldNameOrDefault(row.entityCode, key);\r\n                column.oldValue = this.handler.formatFieldValue(row.oldContent.get(key), row.entityCode, key);\r\n                column.newValue = this.handler.formatFieldValue(row.newContent.get(key), row.entityCode, key);\r\n\r\n                let ele: IGSPCommonElement = this.handler.getElement(row.entityCode, key);\r\n                if (ele) {\r\n                    //判断是否是关联字段\r\n                    column.hasAssociation = ele.ObjectType == \"Association\" && ele.IsUdt == false;\r\n                    column.isAssociationRefField = ele.IsRefElement;\r\n                    let parentElement = this.handler.getParentElement(row.entityCode, key);\r\n                    if (parentElement) {\r\n                        column.belongFieldLabelId = parentElement.LabelID;\r\n                    }\r\n                }\r\n\r\n                columnValueChanges.push(column);\r\n            })\r\n            //变更值排序\r\n            this.handler.sort(columnValueChanges, row.entityCode, (column) => column.fieldLabel);\r\n\r\n            //合并关联带出字段\r\n            let columnMap: Map<string, ChangeColumnItem> = new Map();\r\n            columnValueChanges.forEach((column) => {\r\n                columnMap.set(column.fieldLabel, column);\r\n            });\r\n            //1. 移除所有关联带出字段，并附加到其所属关联字段的children属性上\r\n            columnValueChanges = columnValueChanges.filter((column) => {\r\n                if (column.isAssociationRefField) {\r\n                    let parentColumn: ChangeColumnItem = columnMap.get(column.belongFieldLabelId);\r\n                    if (parentColumn) {\r\n                        //找到父级字段则添加为父\r\n                        parentColumn.children.push(column);\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            });\r\n            //2. 转换关联字段，将其子级的变更值拼接作为其变更值\r\n            columnValueChanges = columnValueChanges.map<ChangeColumnItem>(column => {\r\n                if (column.hasAssociation && column.children.length > 0) {\r\n                    //如果是关联字段，且存在关联带出字段\r\n                    let virtualColumn: ChangeColumnItem = Object.assign(new ChangeColumnItem(), column);\r\n                    virtualColumn.originalColumnItem = column;\r\n                    virtualColumn.oldValue = column.children.map(child => child.oldValue).join(\";\");\r\n                    virtualColumn.newValue = column.children.map(child => child.newValue).join(\";\");\r\n                    return virtualColumn;\r\n                } else {\r\n                    return column;\r\n                }\r\n            });\r\n\r\n            rowNode.changes = columnValueChanges;\r\n\r\n            rowNodes.push(rowNode);\r\n        });\r\n\r\n        /** dataId与变更行的Map */\r\n        let dataIdRowMap: Map<string, ChgdrDataRowNode> = new Map();\r\n        rowNodes.forEach(node => dataIdRowMap.set(node.dataId, node));\r\n\r\n        rowNodes.forEach(node => {\r\n            if (!node.parentDataId) {\r\n                //根节点\r\n                let entityNode = this.genChgdrDataEntityNode(node.entityCode, node.entityName);\r\n                entityNode.rows.push(node);\r\n                chgdrData.entityNodes.push(entityNode);\r\n                return;\r\n            }\r\n            let parentRowNode = dataIdRowMap.get(node.parentDataId);\r\n            if (!!parentRowNode) {\r\n                //上级节点存在的节点\r\n                let entityNode = parentRowNode.entityNodes.find(en => en.entityCode == node.entityCode);\r\n                if (!entityNode) {\r\n                    entityNode = this.genChgdrDataEntityNode(node.entityCode, node.entityName);\r\n                    parentRowNode.entityNodes.push(entityNode);\r\n                }\r\n                entityNode.rows.push(node);\r\n            } else {\r\n                //上级节点不存在的节点\r\n                //TODO 上级节点不存在的节点是否需要构造完整的上级结构？\r\n                let entityNode = this.genChgdrDataEntityNode(node.entityCode, node.entityName);\r\n                entityNode.rows.push(node);\r\n                chgdrData.entityNodes.push(entityNode);\r\n            }\r\n        })\r\n\r\n        return chgdrData;\r\n    }\r\n\r\n    private buildDataCodes(dataCode: Map<string, string>, entityCode: string): DataCodeField[] {\r\n        let dataCodes: DataCodeField[] = [];\r\n        dataCode && dataCode.forEach((value, key) => {\r\n            let dataCodeField: DataCodeField = new DataCodeField();\r\n            if (key == \"_$dataCode\") {\r\n                dataCodeField.fieldLabelId = \"dataCode\";\r\n                dataCodeField.fieldName = I18nUtil.instantOrDefault(\"business-code-text\", \"业务编号\");\r\n                dataCodeField.fieldValue = value;\r\n            } else {\r\n                dataCodeField.fieldLabelId = key;\r\n                dataCodeField.fieldName = this.handler.getEntityFieldNameOrDefault(entityCode, key);\r\n                dataCodeField.fieldValue = this.handler.formatFieldValue(value, entityCode, key);\r\n            }\r\n            dataCodes.push(dataCodeField);\r\n        })\r\n\r\n        //业务编号排序\r\n        this.handler.sort(dataCodes, entityCode, (dataCode) => dataCode.fieldLabelId);\r\n\r\n        return dataCodes;\r\n    }\r\n\r\n    /** 得到新旧内容中所有的key */\r\n    private extractChangeColumnKeys(row: ChangeDataRow): string[] {\r\n        let keysSet: Set<string> = new Set();\r\n        row.oldContent && row.oldContent.forEach((value, key) => keysSet.add(key));\r\n        row.newContent && row.newContent.forEach((value, key) => keysSet.add(key));\r\n        const keys: string[] = Array.from(keysSet.keys());\r\n        return keys;\r\n    }\r\n\r\n\r\n    private genChgdrDataEntityNode(entityCode: string, entityName: string): ChgdrDataEntityNode {\r\n        let node = new ChgdrDataEntityNode();\r\n        node.entityCode = entityCode;\r\n        node.entityName = entityName;\r\n        node.rows = [];\r\n        return node;\r\n    }\r\n\r\n}","export class Guid {\r\n  static newGuid() {\r\n    const initString = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n    const result = initString.replace(/[xy]/g, (c) => {\r\n      return this.convert(c);\r\n    });\r\n    return result;\r\n  }\r\n\r\n  private static convert(c) {\r\n    // tslint:disable-next-line:no-bitwise\r\n    const r = Math.random() * 16 | 0;\r\n    // tslint:disable-next-line:no-bitwise\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  }\r\n}\r\n","import { Guid } from '../util/guid.util';\r\nimport { ChgdrData, ChgdrDataRowNode } from './chgdr-data';\r\n\r\n// 参考： Farris TreeTable的节点结构\r\n// export interface TreeNode {\r\n//     id?: string;\r\n//     data: any;\r\n//     /** 叶子节点图标 */\r\n//     icon?: any;\r\n//     /** 节点展开图标 */\r\n//     expandedIcon?: any;\r\n//     /** 节点折叠图标 */\r\n//     collapsedIcon?: any;\r\n//     /** 子节点 */\r\n//     children?: TreeNode[];\r\n//     /** 是否为叶子节点 */\r\n//     leaf?: boolean;\r\n//     /** 是否展开 */\r\n//     expanded?: boolean;\r\n//     type?: string;\r\n//     /** 父节点 */\r\n//     parent?: TreeNode;\r\n//     /** 是否允许选中 */\r\n//     selectable?: boolean;\r\n//  }\r\n\r\nexport class ChgdrTreeNode {\r\n    // 树配置中设置了idField的情况下，id会被自动赋值为data[idField]的值。所以在此设置必须设置为与data.id中相同。\r\n    /** 节点ID，用于内部处理，请勿使用 */\r\n    id: string;\r\n    /** 节点名称 */\r\n    name: string;\r\n\r\n    /** 父节点 */\r\n    parent: ChgdrTreeNode;\r\n    /** 子节点列表 */\r\n    children: ChgdrTreeNode[];\r\n\r\n    /** 是否展开 */\r\n    expanded: boolean;\r\n    /** 是否隐藏 */\r\n    hidden: boolean;\r\n\r\n    /** 展示树结构用的数据实体 */\r\n    data: any;\r\n    chgdrRow: ChgdrDataRowNode;\r\n    chgdrData: ChgdrData;\r\n    isRoot: boolean;\r\n}\r\n\r\nexport class ChgdrTreeBuilder {\r\n    private chgdrData: ChgdrData;\r\n\r\n    public build(chgdrData: ChgdrData): ChgdrTreeNode[] {\r\n        this.chgdrData = chgdrData;\r\n        if (chgdrData.entityNodes.length == 0) {\r\n            console.warn(\"无变更日志\");\r\n            return [];\r\n        }\r\n        let rootEntityNode = chgdrData.entityNodes[0];\r\n        let rootRows = rootEntityNode.rows;\r\n        if (rootRows.length == 0) {\r\n            console.warn(\"无根变更日志行\");\r\n            return [];\r\n        }\r\n        let rootRow = rootRows[0];\r\n\r\n        let node = this.rowToNode(rootRow);\r\n        node.isRoot = true;\r\n        node.expanded = true;\r\n\r\n        return [node];\r\n    }\r\n\r\n    private rowToNode(row: ChgdrDataRowNode): ChgdrTreeNode {\r\n        const node: ChgdrTreeNode = new ChgdrTreeNode();\r\n        node.id = Guid.newGuid();\r\n        node.name = this.buildTreeNodeName(row);\r\n        node.data = {\r\n            id: node.id,\r\n            name: node.name\r\n        };\r\n        node.chgdrRow = row;\r\n        node.chgdrData = this.chgdrData;\r\n        node.children = [];\r\n        row.entityNodes.forEach(entityNode => {\r\n            entityNode.rows.forEach(childRow => {\r\n                const childNode: ChgdrTreeNode = this.rowToNode(childRow);\r\n                childNode.parent = node;\r\n                node.children.push(childNode);\r\n            })\r\n        })\r\n        return node;\r\n    }\r\n\r\n    private buildTreeNodeName(row: ChgdrDataRowNode): string {\r\n        let dataCodeName;\r\n        if (row.dataCodes && row.dataCodes.length > 0) {\r\n            dataCodeName = row.dataCodes[0].fieldValue;\r\n        }\r\n        if (dataCodeName) {\r\n            return row.entityName + \"-\" + dataCodeName + \"【\" + row.operateType.name + \"】\";\r\n        } else {\r\n            return row.entityName + \"【\" + row.operateType.name + \"】\";\r\n        }\r\n    }\r\n}","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { ChangeDataHeader } from '../model/change-data-header';\r\nimport { ChangeDataQueryParam } from '../model/change-data-query-param';\r\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\r\nimport { OperateType } from '../model/operate-type';\r\nimport { MapUtil } from '../util/map.util';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ChgdrMetadataService {\r\n  private beMetadataCache: Map<string, GSPBusinessEntity> = new Map();\r\n\r\n  constructor(private http: HttpService,\r\n    private sessionService: SessionService,\r\n    private metadataService: GSPMetadataRTService,\r\n    private injector: Injector) { }\r\n\r\n    /** 获取BE元数据 */\r\n    public getGSPBusinessEntity(beId: string):Observable<GSPBusinessEntity>{\r\n      if(this.beMetadataCache.has(beId)){\r\n        let be = this.beMetadataCache.get(beId);\r\n        return of(be);\r\n      }else{\r\n        return this.metadataService.GetMetadataRT(beId).pipe(map(metadata => {\r\n          const be: GSPBusinessEntity = JSON.parse(metadata.content);\r\n          this.beMetadataCache.set(beId, be);\r\n          return be;\r\n        }));\r\n      }\r\n    }\r\n\r\n  // public getBeMetadataAndUdts(beId: string): Observable<any> {\r\n  //   this.metadataService.GetMetadataRT(beId).subscribe((metadata) => {\r\n  //     const be: GSPBusinessEntity = JSON.parse(metadata.content);\r\n  //     let udtids:string[] = this.getAllUdtIds(be.MainObject);\r\n  //     this.metadataService.\r\n  //   });\r\n  // }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\r\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\r\nimport { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { ChgLogConfigEntity } from '../model/chgdr-config-entity';\r\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\r\nimport { ChgdrInnerService } from './chgdr-inner.service';\r\n\r\nconst CHGDR_CONFIG_ROUTER = '/api/runtime/bcc/v1.0/chgdr/config';\r\nconst CHGDR_CONFIG_GET_BY_BIZOBJID_AND_MODELID = `${CHGDR_CONFIG_ROUTER}/{bizObjId}/{modelId}`;\r\n\r\nconst ServerIP = '/';\r\nconst chgdrUrl = `${ServerIP}api/runtime/chgdr/v1.0`;\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ChgdrConfigService {\r\n\r\n    constructor(private http: HttpService,\r\n        private sessionService: SessionService,\r\n        private injector: Injector) {\r\n    }\r\n\r\n    /**\r\n     * 根据业务实体ID获取所有的配置信息\r\n     */\r\n    getBeChgdrConfig(beId: string): Observable<ChgLogConfigEntity[]> {\r\n        let queryUrl = `${chgdrUrl}/config?beId=${beId}`;\r\n        return (<Observable<ChgLogConfigEntity[]>><unknown>this.http.get(queryUrl)).pipe(tap(data => {\r\n            let configEntities: ChgLogConfigEntity[] = data || [];\r\n            configEntities.forEach(entity => {\r\n                //处理字段顺序号\r\n                let fields: Array<ChgLogConfigField> = entity.fields || [];\r\n                //赋予老数据默认顺序号\r\n                fields.forEach((field, index) => {\r\n                    if (field.showIndex === undefined || field.showIndex === null) {\r\n                        field.showIndex = index;\r\n                    }\r\n                });\r\n                //按照顺序号排序\r\n                entity.fields = fields.sort((a, b) => a.showIndex - b.showIndex);\r\n                //根据排序结果重置顺序号\r\n                fields.forEach((field, index) => {\r\n                    field.showIndex = index;\r\n                })\r\n            })\r\n        }));\r\n    }\r\n}","import { isToday, format } from 'date-fns';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { IGSPCommonObject, IGSPCommonElement, GSPAssociation, GSPCommonElement, GSPElementDataType, GSPElementObjectType, GSPEnumValue } from '@gsp-bef/gsp-cm-metadata';\r\nimport { ChgLogConfigEntity } from '../model/chgdr-config-entity';\r\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\r\nimport { I18nUtil } from './i18n-service';\r\n\r\nexport class ChgdrConfigHandler {\r\n    private be: GSPBusinessEntity;\r\n    private entityCodeMap: Map<string, IGSPCommonObject> = new Map();\r\n    private entityFieldMap: Map<string, IGSPCommonElement> = new Map();\r\n    private entityFieldShowOrderMap: Map<string, number> = new Map();\r\n    private entityFieldParentMap: Map<string, IGSPCommonElement> = new Map();\r\n\r\n    private entityConfigs: ChgLogConfigEntity[];\r\n    private entityFieldConfigMap: Map<string, ChgLogConfigField> = new Map();\r\n\r\n    public constructor(be: GSPBusinessEntity, entityConfigs: ChgLogConfigEntity[]) {\r\n        //初始化所有BE对象信息\r\n        this.be = be;\r\n        if (!!be) {\r\n            let mainObject = be.MainObject;\r\n            this.updateEntityMap(mainObject, this.entityCodeMap, this.entityFieldMap);\r\n        }\r\n\r\n        //初始化配置信息\r\n        this.entityConfigs = entityConfigs || [];\r\n        this.updateEntityConfigs();\r\n\r\n        //更新显示顺序\r\n        this.updateShowIndex();\r\n    }\r\n\r\n    /** 更新显示顺序号 */\r\n    private updateShowIndex() {\r\n        let entityFieldShowOrderMap: Map<string, number> = new Map();\r\n        //首先用BE字段顺序赋予初始顺序，避免配置中无顺序号造成显示错乱\r\n        this.entityFieldMap.forEach((value, key) => {\r\n            entityFieldShowOrderMap.set(key, entityFieldShowOrderMap.size);\r\n        });\r\n        //然后用配置顺序替代初始顺序\r\n        this.entityFieldConfigMap.forEach((value, key) => {\r\n            if (value.showIndex !== undefined && value.showIndex !== null) {\r\n                entityFieldShowOrderMap.set(key, value.showIndex);\r\n            }\r\n        })\r\n\r\n        this.entityFieldShowOrderMap = entityFieldShowOrderMap;\r\n    }\r\n\r\n    /** 更新配置信息的相关数据 */\r\n    private updateEntityConfigs() {\r\n        let fieldConfigMap: Map<string, ChgLogConfigField> = new Map();\r\n        this.entityConfigs.forEach(entityConfig => {\r\n            let tabCode = entityConfig.tabCode;\r\n            (entityConfig.fields || []).forEach(field => {\r\n                let fieldLabel = field.fieldLabelId;\r\n                let key = tabCode + \"#\" + fieldLabel;\r\n                fieldConfigMap.set(key, field);\r\n            })\r\n        });\r\n        this.entityFieldConfigMap = fieldConfigMap;\r\n    }\r\n\r\n    private updateEntityMap(entity: IGSPCommonObject, entityCodeMap: Map<string, IGSPCommonObject>, entityFieldMap: Map<string, IGSPCommonElement>) {\r\n        if (!entity) {\r\n            return;\r\n        }\r\n        entityCodeMap.set(entity.Code, entity);\r\n\r\n        //实体对象的字段信息\r\n        entity.ContainElements.forEach(ele => {\r\n            this.updateEntityFieldMap(entity, ele, null, entityFieldMap);\r\n        })\r\n\r\n        //处理子节点信息\r\n        let children: IGSPCommonObject[] = entity.ContainChildObjects;\r\n        if (!children || !children.length) {\r\n            return;\r\n        }\r\n\r\n        children.forEach(childEntity => {\r\n            this.updateEntityMap(childEntity, entityCodeMap, entityFieldMap);\r\n        })\r\n    }\r\n\r\n    /** 更新BE节点的指定字段信息，如果该字段是关联字段，同时更新其带出字段 */\r\n    private updateEntityFieldMap(entity: IGSPCommonObject, element: IGSPCommonElement, parentElement: IGSPCommonElement, entityFieldMap: Map<string, IGSPCommonElement>): void {\r\n        let key = entity.Code + \"#\" + element.LabelID;\r\n        entityFieldMap.set(key, element);\r\n        if (parentElement) {\r\n            this.entityFieldParentMap.set(key, parentElement);\r\n        }\r\n\r\n        const childAssociations: GSPAssociation[] = element.ChildAssociations;\r\n        if (!!childAssociations && childAssociations.length > 0) {\r\n            childAssociations.forEach(childAssociation => {\r\n                const refElementCollection: GSPCommonElement[] = childAssociation.RefElementCollection;\r\n                if (!!refElementCollection && refElementCollection.length > 0) {\r\n                    refElementCollection.forEach(rele => {\r\n                        this.updateEntityFieldMap(entity, rele, element, entityFieldMap);\r\n                    })\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public sort(items: any[], entityCode: string, fieldLabelIdFunc: (item: any) => string) {\r\n        items.sort((a, b) => {\r\n            const aKey = entityCode + \"#\" + fieldLabelIdFunc(a);\r\n            const bKey = entityCode + \"#\" + fieldLabelIdFunc(b);\r\n            if (!this.entityFieldShowOrderMap.has(aKey) && !this.entityFieldShowOrderMap.has(bKey)) {\r\n                //如果双方均无顺序号，则按照自然排序\r\n                return aKey.localeCompare(bKey);\r\n            } else if (!this.entityFieldShowOrderMap.has(aKey)) {\r\n                //如果有一方无顺序号，则无顺序号的靠后\r\n                return -1;\r\n            } else if (!this.entityFieldShowOrderMap.has(bKey)) {\r\n                //如果有一方无顺序号，则无顺序号的靠后\r\n                return 1;\r\n            } else {\r\n                //如果两方都有顺序号，则按照顺序号排序\r\n                const aOrder = this.entityFieldShowOrderMap.get(aKey);\r\n                const bOrder = this.entityFieldShowOrderMap.get(bKey);\r\n                return aOrder - bOrder;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** 格式化主对象节点中字段的值 */\r\n    public formatMainObjectFieldValue(originalValue: string, fieldLabelId: string) {\r\n        let entityCode = this.getMainObjectCode();\r\n        return this.formatFieldValue(originalValue, entityCode, fieldLabelId);\r\n    }\r\n\r\n    /** 格式化字段值 */\r\n    public formatFieldValue(originalValue: string, entityCode: string, fieldLabelId: string): string {\r\n        let element: IGSPCommonElement = this.getElement(entityCode, fieldLabelId);\r\n        if (!element) {\r\n            console.error(\"未找到业务实体【\" + this.be.ID + \"-\" + this.be.Name + \"】节点【\" + entityCode + \"】的字段【\" + fieldLabelId + \"】\");\r\n            return originalValue;\r\n        }\r\n        if (!element) {\r\n            return originalValue;\r\n        }\r\n\r\n        try {\r\n            //处理历史遗留的数字格式\r\n            if ((element.MDataType == GSPElementDataType.Decimal || element.MDataType == GSPElementDataType.Integer)\r\n                && originalValue && originalValue.toLowerCase().includes(\"e\")) {\r\n                //如果字段是数字类型，且是科学计数法格式\r\n                //转为十进制格式显示\r\n                let num = Number(originalValue);\r\n                if (isNaN(num)) {\r\n                    console.log(\"业务实体【\" + this.be.ID + \"-\" + this.be.Name + \"】节点【\" + entityCode + \"】的字段【\" + fieldLabelId + \"】的值不是有效的数字格式：\" + originalValue);\r\n                    return originalValue;\r\n                } else {\r\n                    let result = this.toNonExponential(num);\r\n                    return result;\r\n                }\r\n            }\r\n\r\n            //处理布尔值类型\r\n            if (element.MDataType == GSPElementDataType.Boolean) {\r\n                //注意：new Boolean(\"false\") == true\r\n                if (originalValue === null || originalValue === undefined || originalValue.length == 0) {\r\n                    return originalValue;\r\n                } else if (originalValue.toLowerCase() == \"false\") {\r\n                    return I18nUtil.instantOrDefault(\"no-text\", \"否\");\r\n                } else if (originalValue.toLowerCase() == \"true\") {\r\n                    return I18nUtil.instantOrDefault(\"yes-text\", \"是\");\r\n                } else {\r\n                    return originalValue;\r\n                }\r\n            }\r\n\r\n            //处理日期格式\r\n            if (element.MDataType == GSPElementDataType.Date) {\r\n                if (originalValue === null || originalValue === undefined || originalValue.length == 0) {\r\n                    //不包含值，直接返回原始值\r\n                    return originalValue;\r\n                } else {\r\n                    let date = new Date(originalValue);\r\n                    let str = format(date, \"yyyy-MM-dd\");\r\n                    return str;\r\n                }\r\n            }\r\n\r\n            //处理日期时间格式\r\n            if (element.MDataType == GSPElementDataType.DateTime) {\r\n                if (originalValue === null || originalValue === undefined || originalValue.length == 0) {\r\n                    //不包含值，直接返回原始值\r\n                    return originalValue;\r\n                } else {\r\n                    let date = new Date(originalValue);\r\n                    let str = format(date, \"yyyy-MM-dd HH:mm:ss\");\r\n                    return str;\r\n                }\r\n            }\r\n\r\n            //处理枚举格式\r\n            if (element.ObjectType == GSPElementObjectType.Enum) {\r\n                let enumValues: GSPEnumValue[] = element.ContainEnumValues || [];\r\n                let enumValue = enumValues.find(item => item.Value == originalValue);\r\n                if (enumValue) {\r\n                    return enumValue.Name;\r\n                } else if (originalValue === null || originalValue === undefined || originalValue.length == 0) {\r\n                    //如果找不到对应的枚举项，并且原始值为空，说明未赋值，不报错\r\n                    return originalValue;\r\n                } else {\r\n                    //打印异常\r\n                    console.log(\"业务实体【\" + this.be.ID + \"-\" + this.be.Name + \"】节点【\" + entityCode + \"】的字段【\" + fieldLabelId + \"】的值未找到匹配的枚举项：\" + originalValue);\r\n                    return originalValue;\r\n                }\r\n            }\r\n\r\n            return originalValue;\r\n        } catch (error) {\r\n            console.error(\"业务实体【\" + this.be.ID + \"-\" + this.be.Name + \"】节点【\" + entityCode + \"】的字段【\" + fieldLabelId + \"】的值【\" + originalValue + \"】格式化出错：\", error);\r\n            return originalValue;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /** JavaScript中科学计数法转化为数值字符串形式。\r\n     * 以下两种情况，JavaScript 会自动将数值转为科学计数法表示\r\n     * (1) 小于1且小数点后面带有6个0以上的浮点数值：\r\n     * (2) 整数位数字多于21位：\r\n     * 首先看看整数位数字多于21位的情况，其实这个一般不会碰到，整数位数字多于21位已经超出了 JavaScript 精确整数范围。\r\n     * 这个方法用于处理小数问题\r\n     * from：https://www.cnblogs.com/xianfengzhike/p/9939029.html */\r\n    private toNonExponential(num) {\r\n        var m = num.toExponential().match(/\\d(?:\\.(\\d*))?e([+-]\\d+)/);\r\n        return num.toFixed(Math.max(0, (m[1] || '').length - m[2]));\r\n    }\r\n\r\n    public getBeName(): string {\r\n        return this.be ? this.be.Name : null;\r\n    }\r\n\r\n    public getMainObjectCode(): string {\r\n        return this.be && this.be.MainObject ? this.be.MainObject.Code : null;\r\n    }\r\n\r\n    public getElement(entityCode: string, fieldLabelId: string): IGSPCommonElement {\r\n        let key = entityCode + \"#\" + fieldLabelId;\r\n        return this.entityFieldMap.get(key);\r\n    }\r\n\r\n    public getParentElement(entityCode: string, fieldLabelId: string): IGSPCommonElement {\r\n        let key = entityCode + \"#\" + fieldLabelId;\r\n        return this.entityFieldParentMap.get(key);\r\n    }\r\n\r\n    public getEntityNameOrDefault(entityCode: string) {\r\n        let entity = this.entityCodeMap.get(entityCode);\r\n        return !!entity ? entity.Name : entityCode;\r\n    }\r\n\r\n    public getEntityFieldNameOrDefault(entityCode: string, fieldLabelId: string) {\r\n        let key = entityCode + \"#\" + fieldLabelId;\r\n        let fieldConfig = this.entityFieldConfigMap.get(key);\r\n        if (fieldConfig && fieldConfig.fieldName && fieldConfig.fieldName != \"\") {\r\n            //优先返回配置的名称\r\n            return fieldConfig.fieldName;\r\n        }\r\n        //如果不存在配置名称，则返回BE字段名称\r\n        let ele = this.entityFieldMap.get(key);\r\n        return !!ele ? ele.Name : fieldLabelId;\r\n    }\r\n}","import { Injectable, Injector } from '@angular/core';\r\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { forkJoin, Observable, of } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { ChangeDataHeader } from '../model/change-data-header';\r\nimport { ChangeDataQueryParam } from '../model/change-data-query-param';\r\nimport { ChgLogConfigEntity } from '../model/chgdr-config-entity';\r\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\r\nimport { OperateType } from '../model/operate-type';\r\nimport { MapUtil } from '../util/map.util';\r\nimport { ChgdrConfigHandler } from './chgdr-config-handler';\r\nimport { ChgdrConfigService } from './chgdr-config.service';\r\nimport { ChgdrMetadataService } from './chgdr-metadata.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ChgdrInnerService {\r\n    private beMetadataCache: Map<string, ChgdrConfigHandler> = new Map();\r\n\r\n    constructor(private http: HttpService,\r\n        private sessionService: SessionService,\r\n        private metadataService: GSPMetadataRTService,\r\n        private chgdrMetadataService: ChgdrMetadataService,\r\n        private chgdrConfigService: ChgdrConfigService,\r\n        private injector: Injector\r\n    ) { }\r\n\r\n    /** 获取BE元数据 */\r\n    public getChgdrConfigHandler(beId: string): Observable<ChgdrConfigHandler> {\r\n        if (this.beMetadataCache.has(beId)) {\r\n            let be = this.beMetadataCache.get(beId);\r\n            return of(be);\r\n        } else {\r\n            let requests = [];\r\n            requests.push(this.chgdrMetadataService.getGSPBusinessEntity(beId));\r\n            requests.push(this.chgdrConfigService.getBeChgdrConfig(beId));\r\n\r\n            return forkJoin(requests).pipe(map(data => {\r\n                const be = data[0];\r\n                const entityConfigs: ChgLogConfigEntity[] = data[1] || [];\r\n                const handler = new ChgdrConfigHandler(be, entityConfigs);\r\n                this.beMetadataCache.set(beId, handler);\r\n                return handler;\r\n            }));\r\n        }\r\n    }\r\n}\r\n","import { Component, Injector, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { ChangeDataHeader } from '../model/change-data-header';\r\nimport { ChangeColumnItem, ChgdrData, ChgdrDataEntityNode, ChgdrDataRowNode } from './chgdr-data';\r\nimport { GSPAssociation, GSPCommonElement, GSPCommonObject, IGSPCommonElement, IGSPCommonObject } from '@gsp-bef/gsp-cm-metadata';\r\nimport { ChangeDataRow } from '../model/change-data-row';\r\nimport { ChgdrDataBuilder } from './chgdr-data-builder';\r\nimport { ChgdrTreeBuilder, ChgdrTreeNode } from './chgdr-tree-builder';\r\nimport { TreeTableComponent } from '@farris/ui-treetable';\r\nimport { ChgdrMetadataService } from '../service/chgdr-metadata.service';\r\nimport { ChgdrConfigService } from '../service/chgdr-config.service';\r\nimport { forkJoin } from 'rxjs';\r\nimport { ChgLogConfigEntity } from '../model/chgdr-config-entity';\r\nimport { ChgdrInnerService } from '../service/chgdr-inner.service';\r\nimport { I18nUtil } from '../service/i18n-service';\r\n\r\n@Component({\r\n  selector: 'chgdr-data-viewer',\r\n  templateUrl: './chgdr-data-viewer.component.html',\r\n  styleUrls: ['./chgdr-data-viewer.component.css']\r\n})\r\nexport class ChgdrDataViewerComponent implements OnInit, OnChanges {\r\n  @Input()\r\n  data: ChangeDataHeader;\r\n  @Input() showDataId: boolean = false;\r\n  @ViewChild(\"treeTable\")\r\n  private treeTableComponent: TreeTableComponent\r\n\r\n  treeConfig: any = {\r\n    idField: 'id',\r\n    columns: [\r\n      { field: 'name', title: 'Name', width: 200 }\r\n    ],\r\n    /** 叶子节点图标 */\r\n    leafIcon: 'f-icon f-icon-page-title-type text-info mr-2',\r\n    /** 节点展开图标 */\r\n    expandIcon: 'f-icon f-icon-file-folder-open text-info mr-2',\r\n    /** 节点折叠图标 */\r\n    collapseIcon: 'f-icon f-icon-file-folder-close text-info mr-2',\r\n    showLevel: -1,\r\n    disabled: false,\r\n    init: false,\r\n    selectValues: []\r\n  };\r\n\r\n  chgdrData: ChgdrData;\r\n  treeData: ChgdrTreeNode[];\r\n  currentNode: ChgdrTreeNode;\r\n\r\n  constructor(private metadataService: GSPMetadataRTService,\r\n    private injector: Injector,\r\n    private chgdrMetadataService: ChgdrMetadataService,\r\n    private chgdrConfigService: ChgdrConfigService,\r\n    private chgdrInnerService: ChgdrInnerService) {\r\n    }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!!this.data) {\r\n      let beId = this.data.entityId;\r\n      this.chgdrInnerService.getChgdrConfigHandler(beId).subscribe(handler=>{\r\n        this.chgdrData = new ChgdrDataBuilder().buildChgdrData(this.data, handler);\r\n        this.treeData = new ChgdrTreeBuilder().build(this.chgdrData);\r\n        if (this.treeTableComponent) {\r\n          //移除已选中项。\r\n          //避免更换数据源后，treeGrid找不到之前的选中数据，导致控制台告警\r\n          this.treeTableComponent.clearSelections();\r\n        }\r\n        setTimeout(() => {\r\n          this.treeTableComponent.selectNode(this.treeData[0].id);\r\n        }, 0);\r\n      })\r\n    }\r\n  }\r\n\r\n  public handleTreeSelection($event): void {\r\n    const node: ChgdrTreeNode = $event.node;\r\n    if (this.currentNode != null && this.currentNode.id == node.id) {\r\n      //如果选中相同节点，直接返回\r\n      return;\r\n    }\r\n    this.currentNode = node;\r\n  }\r\n\r\n  public get baseInfoSectionTitle(){\r\n    return I18nUtil.instant(\"base-info-section-title\")\r\n  }\r\n\r\n  public get changeDetailSectionTitle(){\r\n    return I18nUtil.instant(\"change-detail-section-title\");\r\n  }\r\n\r\n  public get  emptyDataText(){\r\n    return I18nUtil.instant(\"empty-data-text\");\r\n  }\r\n}\r\n","import { I18nUtil } from \"../service/i18n-service\";\r\n\r\nexport class OperateType {\r\n    /** 新增 */\r\n    static ADD: OperateType = new OperateType(0, \"ADD\", \"新增\");\r\n    /** 修改 */\r\n    static MODIFY: OperateType = new OperateType(1, \"MODIFY\", \"修改\");\r\n    /** 删除 */\r\n    static DELETE: OperateType = new OperateType(2, \"DELETE\", \"删除\");\r\n\r\n    private constructor(public ordinal: number, public code: string, private defaultName: string) {\r\n    }\r\n\r\n    public get name() {\r\n        return I18nUtil.instantOrDefault(\"operate-type-name-\" + this.code, this.defaultName);\r\n    }\r\n\r\n    public static values(): OperateType[] {\r\n        return [OperateType.ADD, OperateType.MODIFY, OperateType.DELETE];\r\n    }\r\n\r\n    public toJson() {\r\n        return this.code;\r\n    }\r\n\r\n    public static parse(obj: any): OperateType {\r\n        if (obj === undefined || obj === null) {\r\n            return null;\r\n        }\r\n        if (obj instanceof OperateType) {\r\n            return obj;\r\n        }\r\n        if (typeof obj === \"string\") {\r\n            return OperateType.values().find(ot => ot.code == obj);\r\n        }\r\n        if (typeof obj === \"number\") {\r\n            return OperateType.values().find(ot => ot.ordinal == obj);\r\n        }\r\n        if (!!obj.code) {\r\n            return OperateType.values().find(ot => ot.code == obj.code);\r\n        }\r\n        return null;\r\n    }\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class MapUtil {\r\n    /** 将Map转为Object，便于序列化。（因为JSON.stringfy(Map)返回的值总为{}） */\r\n    static convertMapToObject(map: Map<String, any>) {\r\n        if (!map) {\r\n            return null;\r\n        }\r\n        let obj = Object.create(null);\r\n        map.forEach((value, key: any) => {\r\n            obj[key] = value;\r\n        })\r\n        return obj;\r\n    }\r\n\r\n    /** 将Object转为Map，因为JSON.parse无法识别类型，反序列化后只能是Object类型 */\r\n    static convertObjectToMap(obj: any): Map<string, any> {\r\n        if (obj === undefined || obj === null) {\r\n            return null;\r\n        }\r\n\r\n        let strMap = new Map();\r\n        for (let k of Object.keys(obj)) {\r\n            strMap.set(k, obj[k]);\r\n        }\r\n        return strMap;\r\n    }\r\n}","import { Injectable, Injector } from '@angular/core';\nimport { HttpService, SessionService } from '@ecp-caf/caf-common';\nimport { Observable, of } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { ChangeDataCompHeader, ChangeDataHeader } from '../model/change-data-header';\nimport { ChangeDataQueryParam } from '../model/change-data-query-param';\nimport { ChangeDataQueryResult } from '../model/change-data-query-result';\nimport { ChangeDataRow } from '../model/change-data-row';\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\nimport { ChgdrItemQueryParam } from '../model/chgdr-item-query-param';\nimport { OperateType } from '../model/operate-type';\nimport { MapUtil } from '../util/map.util';\n\nconst ServerIP = '/';\nconst chgdrUrl = `${ServerIP}api/runtime/chgdr/v1.0`;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChgdrService {\n  private rootDataCodeFieldsMap: Map<string, ChgLogConfigField[]> = new Map();\n\n  constructor(private http: HttpService,\n    private sessionService: SessionService,\n    private injector: Injector) { }\n\n  public queryChangeDataHeader(currentQueryParam: ChangeDataQueryParam): Observable<any> {\n    let obj: any = Object.assign({}, currentQueryParam);\n    if (currentQueryParam.dataCode) {\n      obj.dataCode = MapUtil.convertMapToObject(currentQueryParam.dataCode);\n    }\n\n    let json = JSON.stringify(obj);\n    let queryParam = encodeURIComponent(json);\n    let url = `${chgdrUrl}?queryParam=${queryParam}`;\n    return this.http.get(url).pipe(map(data => {\n      if (!data) {\n        return data;\n      }\n      let queryResult: ChangeDataQueryResult = <ChangeDataQueryResult><unknown>data;\n      queryResult && queryResult.headers && queryResult.headers.forEach(header => {\n        //TODO 待删，兼容老数据格式\n        if (typeof header.dataCode == \"string\") {\n          header.dataCode = JSON.parse(header.dataCode);\n        }\n\n        header.dataCode = MapUtil.convertObjectToMap(header.dataCode);\n        header.changeTime = this.toDate(header.changeTime);\n        header.operateType = OperateType.parse(header.operateType);\n      })\n      return queryResult;\n    }));\n  }\n\n  public getRootEntityDataCodeFields(beId: string): Observable<ChgLogConfigField[]> {\n    if (!beId) {\n      return of([]);\n    }\n    if (this.rootDataCodeFieldsMap.has(beId)) {\n      //直接从缓存中获取\n      return of(this.rootDataCodeFieldsMap.get(beId));\n    } else {\n      //获取结果并存入缓存\n      let url = `${chgdrUrl}/rootDataCodeFields?beId=${beId}`;\n      return (<Observable<ChgLogConfigField[]>><unknown>(this.http.get(url)))\n        .pipe(tap(data => this.rootDataCodeFieldsMap.set(beId, data)));\n    }\n  }\n\n  /** 将字符串或数字转为Date */\n  private toDate(date: any): Date {\n    if (typeof date == \"string\") {\n      return new Date(date);\n    } else if (typeof date == \"number\") {\n      return new Date(date);\n    } else {\n      return date;\n    }\n  }\n\n  /**\n   * 查询业务变更日志详细数据。\n   * @param id headerId\n   * @param changeTime 变更时间，和header.changeTime保持一致\n   */\n  public getChangeData(headerId: string, changeTime: Date): Observable<any>\n  public getChangeData(param: ChgdrItemQueryParam): Observable<any>\n  public getChangeData(idOrParam: ChgdrItemQueryParam | string, changeTime?: Date): Observable<any> {\n    if (idOrParam == null) {\n      throw new Error(\"id can not be null\");\n    }\n    if (idOrParam instanceof String || typeof idOrParam == \"string\") {\n      return this.getChangeDataById(<string>idOrParam, changeTime);\n    } else {\n      return this.getChangeDataByParam(idOrParam);\n    }\n  }\n\n  private getChangeDataById(id: string, changeTime: Date): Observable<any> {\n    let json = JSON.stringify(changeTime);\n    let queryParam = encodeURIComponent(json);\n    let url = `${chgdrUrl}/${id}?changeTime=${queryParam}`;\n    return this.http.get(url).pipe(map(data => {\n      return this.transChangeDataFromResponse(data);\n    }));\n  }\n\n  private getChangeDataByParam(param: ChgdrItemQueryParam): Observable<any> {\n    if (param == null) {\n      throw new Error(\"ChgdrItemQueryParam can not be null\");\n    }\n\n    let requestParam: any = {};\n    Object.assign(requestParam, param);\n    //将Map转为Object，否则无法正常序列化\n    requestParam.dataIds = MapUtil.convertMapToObject(param.dataIds);\n\n    let url = `${chgdrUrl}`;\n    return this.http.post(url, requestParam).pipe(map(data => {\n      return this.transChangeDataFromResponse(data);\n    }));\n  }\n\n  private transChangeDataFromResponse(data): ChangeDataCompHeader {\n    if (!data) {\n      return data;\n    }\n    let sh: ChangeDataCompHeader = <ChangeDataCompHeader><unknown>data;\n    //TODO 待删，兼容老数据格式\n    if (typeof sh.dataCode == \"string\") {\n      sh.dataCode = JSON.parse(sh.dataCode);\n    }\n    sh.dataCode = MapUtil.convertObjectToMap(sh.dataCode);\n    sh.changeTime = this.toDate(sh.changeTime);\n    sh.operateType = OperateType.parse(sh.operateType);\n    sh.rows = this.transChangeDataRowsFromResponse(sh.rows || []);\n    return sh;\n  }\n\n  private transChangeDataRowsFromResponse(rows: ChangeDataRow[]): ChangeDataRow[] {\n    if (!rows || rows.length == 0) {\n      return rows;\n    }\n\n    rows.forEach(row => {\n      if (!row) {\n        return;\n      }\n      row.operateType = OperateType.parse(row.operateType);\n      //TODO 待删，兼容老数据格式\n      if (typeof row.dataCode == \"string\") {\n        row.dataCode = JSON.parse(row.dataCode);\n      }\n      row.dataCode = MapUtil.convertObjectToMap(row.dataCode);\n      row.oldContent = <Map<string, string>>MapUtil.convertObjectToMap(row.oldContent) || new Map();\n      row.newContent = <Map<string, string>>MapUtil.convertObjectToMap(row.newContent) || new Map();\n    });\n\n    return rows;\n  }\n}\n","export class ChangeDataQueryParam {\r\n    /** 用户ID */\r\n    userId: string;\r\n    /** 实体ID */\r\n    entityId: string;\r\n    /** 数据主键 */\r\n    dataId: string;\r\n    /** 数据编号 */\r\n    dataCode: Map<string, string>;\r\n    /** 变更时间-起始 */\r\n    changeTimeStart: Date;\r\n    /** 变更时间-结束 */\r\n    changeTimeEnd: Date;\r\n    /** 每页数量 */\r\n    pageSize: number;\r\n    /** 页码，从1开始 */\r\n    pageIndex: number;\r\n}","import { ChangeDataHeader } from './change-data-header';\r\n\r\nexport class ChangeDataQueryResult {\r\n    /** 当前页面，从1开始 */\r\n    pageIndex: number;\r\n    /** 每页数量 */\r\n    pageSize: number;\r\n    /** 总条数 */\r\n    total: number;\r\n    /** 当前页数据 */\r\n    headers: ChangeDataHeader[];\r\n}","export class ErrorUtil {\r\n    static getErrorMessage(e: any) {\r\n        if (!e) {\r\n            return \"\";\r\n        } else if (!e.error) {\r\n            return \"\";\r\n        } else if (!e.error.Message) {\r\n            return \"\";\r\n        } else {\r\n            return e.error.Message;\r\n        }\r\n    }\r\n}","export class TimeUtil{\r\n    public static getStartTimeInDay(date:Date){\r\n        let d:Date = new Date(date);\r\n        d.setHours(0);\r\n        d.setMinutes(0);\r\n        d.setSeconds(0);\r\n        d.setMilliseconds(0);\r\n        return d;\r\n    }\r\n\r\n    public static getEndTimeInDay(date:Date){\r\n        let d:Date = new Date(date);\r\n        d.setHours(23);\r\n        d.setMinutes(59);\r\n        d.setSeconds(59);\r\n        d.setMilliseconds(999);\r\n        return d;\r\n    }\r\n}","import { Component, HostBinding, Injector, Input, OnChanges, OnInit, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\nimport { DialogComponent } from '@farris/ui-dialog';\nimport { MessagerService } from '@farris/ui-messager';\nimport { NotifyService } from '@farris/ui-notify';\nimport { ChgdrService } from '../service/chgdr.service';\nimport { ChangeDataHeader } from '../model/change-data-header';\nimport { ChangeDataQueryParam } from '../model/change-data-query-param';\nimport { ChangeDataQueryResult } from '../model/change-data-query-result';\nimport { OperateType } from '../model/operate-type';\nimport { ErrorUtil } from '../util/error.util';\nimport { TimeUtil } from '../util/time.util';\nimport { I18nUtil } from '../service/i18n-service';\nimport { BeforeShowChangeDetailEvent } from '../model/chgdr-ui-config';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'chgdr-list',\n  templateUrl: './chgdr-list.component.html',\n  styleUrls: ['./chgdr-list.component.css']\n})\nexport class ChgdrListComponent implements OnInit, OnChanges {\n  @HostBinding('class.f-utils-fill-flex-column') baseCls = true;\n\n  @Input()\n  /** 业务实体ID */\n  entityId: string;\n  @Input()\n  /** 数据ID */\n  dataId: string;\n  @Input()\n  /** 变更时间-起始 */\n  changeTimeStart: Date;\n  @Input()\n  /** 变更时间-结束 */\n  changeTimeEnd: Date;\n\n  @Input()\n  /** 打开详情前的回调 */\n  beforeShowChangeDetail: (event: BeforeShowChangeDetailEvent) => Observable<boolean>;\n\n  private currentQueryParam: ChangeDataQueryParam;\n  chgdrs: ChangeDataQueryResult;\n\n  constructor(private chgdrService: ChgdrService,\n    private messageService: MessagerService,\n    private notifyService: NotifyService,\n    private injector: Injector) {\n  }\n\n  ngOnInit() {\n    let chgdrs = new ChangeDataQueryResult();\n    chgdrs.total = 0;\n    chgdrs.pageSize = 20;\n    chgdrs.pageIndex = 1;\n    chgdrs.headers = [];\n    this.chgdrs = chgdrs;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!this.changeTimeStart && !this.changeTimeEnd) {\n      //未录入变更时间范围，则查询最近一周的\n      this.changeTimeEnd = TimeUtil.getEndTimeInDay(new Date());\n      this.changeTimeStart = TimeUtil.getStartTimeInDay(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000));\n    } else if (!this.changeTimeEnd) {\n      //如果未设置截至时间，则与开始时间相同\n      this.changeTimeEnd = TimeUtil.getEndTimeInDay(this.changeTimeStart);\n    } else if (!this.changeTimeStart) {\n      //如果未设置开始时间，则与截至时间相同\n      this.changeTimeStart = TimeUtil.getEndTimeInDay(this.changeTimeEnd);\n    }\n    if (!!this.entityId) {\n      let param = this.buildQueryParam();\n      this.doQuery(param);\n    }\n  }\n\n  public query() {\n    let param = this.buildQueryParam();\n    this.doQuery(param);\n  }\n\n  private buildQueryParam() {\n    let param = new ChangeDataQueryParam();\n    param.pageIndex = 1;\n    param.pageSize = 20;\n    param.entityId = this.entityId;\n    param.dataId = this.dataId;\n    param.changeTimeStart = this.changeTimeStart;\n    param.changeTimeEnd = this.changeTimeEnd;\n    return param;\n  }\n\n  private doQuery(param) {\n    this.chgdrService.queryChangeDataHeader(param).subscribe(data => {\n      this.currentQueryParam = param;\n      this.chgdrs = data;\n    }, error => {\n      console.error(\"查询业务变更日志出错\", error);\n      this.messageService.error(I18nUtil.instant(\"query-change-data-record-error\", { errorMessage: ErrorUtil.getErrorMessage(error) }));\n    });\n  }\n\n  onPageChanged($event) {\n    if (!$event) {\n      return;\n    }\n\n    if ($event.pageIndex) {\n      this.currentQueryParam.pageIndex = $event.pageIndex;\n    }\n    if ($event.pageSize) {\n      this.currentQueryParam.pageSize = $event.pageSize;\n    }\n    this.doQuery(this.currentQueryParam);\n  }\n\n  onPageSizeChanged($event) {\n    this.currentQueryParam.pageSize = $event;\n    this.doQuery(this.currentQueryParam);\n  }\n\n  public get startTimeLabel() {\n    return I18nUtil.instant(\"start-time-label\");\n  }\n\n  public get endTimeLabel() {\n    return I18nUtil.instant(\"end-time-label\");\n  }\n\n  public get queryBtn() {\n    return I18nUtil.instant(\"query-btn\");\n  }\n}\n","import { Component, Injector, Input, OnInit } from '@angular/core';\r\nimport { ChgdrTreeNode } from '../chgdr-data-viewer/chgdr-tree-builder';\r\nimport { I18nUtil } from '../service/i18n-service';\r\n\r\n@Component({\r\n  selector: 'lib-chgdr-row-baseinfo-form',\r\n  templateUrl: './chgdr-row-baseinfo-form.component.html',\r\n  styleUrls: ['./chgdr-row-baseinfo-form.component.css']\r\n})\r\nexport class ChgdrRowBaseinfoFormComponent implements OnInit {\r\n  @Input()\r\n  chgdrTreeNode: ChgdrTreeNode;\r\n  @Input() showDataId: boolean = false;\r\n\r\n  constructor(private injector: Injector) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public get technologyPrimaryKeyLabel() {\r\n    return I18nUtil.instant(\"technology-primary-key-label\");\r\n  }\r\n  public get changeUserLabel() {\r\n    return I18nUtil.instant(\"change-user-label\");\r\n  }\r\n  public get changeTimeLabel() {\r\n    return I18nUtil.instant(\"change-time-label\");\r\n  }\r\n  public get changeOperateType() {\r\n    return I18nUtil.instant(\"change-operate-type\");\r\n  }\r\n}\r\n","import { Component, Injector, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\r\nimport { DatagridComponent } from '@farris/ui-datagrid';\r\nimport { ChangeColumnItem, ChgdrDataRowNode } from '../chgdr-data-viewer/chgdr-data';\r\nimport { ChgdrTreeNode } from '../chgdr-data-viewer/chgdr-tree-builder';\r\nimport { OperateType } from '../model/operate-type';\r\nimport { I18nUtil } from '../service/i18n-service';\r\n\r\n@Component({\r\n  selector: 'lib-chgdr-row-grid',\r\n  templateUrl: './chgdr-row-grid.component.html',\r\n  styleUrls: ['./chgdr-row-grid.component.css']\r\n})\r\nexport class ChgdrRowGridComponent implements OnInit, OnChanges {\r\n  @Input()\r\n  chgdrTreeNode: ChgdrTreeNode;\r\n  @ViewChild(\"chgdrRowGrid\")\r\n  dataGrid: DatagridComponent;\r\n\r\n  columns: any[];\r\n  data: ChangeColumnItem[];\r\n\r\n  constructor(private injector: Injector) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.columns = [\r\n      { field: 'fieldName', width: 130, title: this.fieldNameColumnTitle },\r\n      { field: 'oldValue', width: 130, title: this.oldValueColumnTitle, showTips: true },\r\n      { field: 'newValue', width: 130, title: this.newValueColumnTitle, showTips: true }\r\n    ];\r\n    let oldValueField = this.columns[1];\r\n    let newValueField = this.columns[2];\r\n\r\n    if (!!this.chgdrTreeNode) {\r\n      //根据初始的变更类型更改显示列的信息\r\n      //此处不能直接调用DataGrid组件的方法更改，因为此处尚未创建DataGrid\r\n      let type: OperateType = this.chgdrTreeNode.chgdrRow.operateType;\r\n      if (type == OperateType.ADD) {\r\n        oldValueField.visible = false;\r\n        newValueField.title = this.valueColumnTitle;\r\n      } else if (type == OperateType.DELETE) {\r\n        newValueField.visible = false;\r\n        oldValueField.title = this.valueColumnTitle;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    //原来变更行类型\r\n    let oldType: OperateType;\r\n    if (!changes.chgdrTreeNode) {\r\n      oldType = null;\r\n    } else if (!changes.chgdrTreeNode.previousValue) {\r\n      oldType = null;\r\n    } else {\r\n      oldType = changes.chgdrTreeNode.previousValue.chgdrRow.operateType;\r\n    }\r\n\r\n    //现在变更行类型\r\n    let newType: OperateType;\r\n    if (!changes.chgdrTreeNode) {\r\n      newType = null;\r\n    } else if (!changes.chgdrTreeNode.currentValue) {\r\n      newType = null;\r\n    } else {\r\n      newType = changes.chgdrTreeNode.currentValue.chgdrRow.operateType;\r\n    }\r\n\r\n    if (oldType == newType || !this.dataGrid || !this.dataGrid.columns) {\r\n      //如果新老类型一致(或DataGrid尚未创建)，则不变动\r\n      //do nothing\r\n    } else if (newType == OperateType.ADD) {\r\n      this.dataGrid.showColumn(\"newValue\");\r\n      this.dataGrid.hideColumn(\"oldValue\");\r\n      this.dataGrid.setColumnTitle(\"newValue\", this.valueColumnTitle);\r\n    } else if (newType == OperateType.DELETE) {\r\n      this.dataGrid.showColumn(\"oldValue\");\r\n      this.dataGrid.hideColumn(\"newValue\");\r\n      this.dataGrid.setColumnTitle(\"oldValue\", this.valueColumnTitle);\r\n    } else {\r\n      this.dataGrid.showColumn(\"oldValue\");\r\n      this.dataGrid.showColumn(\"newValue\");\r\n      this.dataGrid.setColumnTitle(\"oldValue\", this.oldValueColumnTitle);\r\n      this.dataGrid.setColumnTitle(\"newValue\", this.newValueColumnTitle);\r\n    }\r\n\r\n    if (changes.chgdrTreeNode && changes.chgdrTreeNode.currentValue) {\r\n      this.data = changes.chgdrTreeNode.currentValue.chgdrRow.changes;\r\n    }\r\n  }\r\n\r\n  private get fieldNameColumnTitle() {\r\n    return I18nUtil.instant(\"field-name-column-title\");\r\n  }\r\n\r\n  private get valueColumnTitle() {\r\n    return I18nUtil.instant(\"value-column-title\");\r\n  }\r\n\r\n  private get oldValueColumnTitle() {\r\n    return I18nUtil.instant(\"old-value-column-title\");\r\n  }\r\n\r\n  private get newValueColumnTitle() {\r\n    return I18nUtil.instant(\"new-value-column-title\");\r\n  }\r\n\r\n}\r\n","import { Component, Injector, Input, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { BeforeShowChangeDetailEvent } from '../model/chgdr-ui-config';\n\n@Component({\n  selector: 'lib-chgdr-list-dialog-content',\n  templateUrl: './chgdr-list-dialog-content.component.html',\n  styleUrls: ['./chgdr-list-dialog-content.component.css']\n})\nexport class ChgdrListDialogContentComponent implements OnInit {\n  @Input()\n  /** 业务实体ID */\n  entityId: string;\n\n  @Input()\n  /** 数据ID */\n  dataId: string;\n\n  @Input()\n  /** 打开详情前的回调 */\n  beforeShowChangeDetail: (event: BeforeShowChangeDetailEvent) => Observable<boolean>;\n\n  constructor(private injector: Injector) { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Observable } from \"rxjs\";\r\nimport { ChangeDataHeader } from \"./change-data-header\";\r\n\r\nexport class BeforeShowChangeDetailEvent {\r\n  /** 业务变更日志抬头信息 */\r\n  header: ChangeDataHeader;\r\n}\r\n\r\n/**\r\n * 对于业务变更日志对话框的设置\r\n */\r\nexport class ChgdrListDialogConfig {\r\n  /** 业务实体ID */\r\n  entityId: string;\r\n  /** 数据ID */\r\n  dataId: string;\r\n  /** 显示变更详情前的回调，返回false表示不使用内置界面显示变更详情。 */\r\n  beforeShowChangeDetail: (event: BeforeShowChangeDetailEvent) => Observable<boolean>\r\n}","import { Injectable, ComponentFactoryResolver, Injector } from '@angular/core';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { BsModalService, ModalOptions } from '@farris/ui-modal';\r\nimport { of } from 'rxjs';\r\nimport { ChgdrListDialogContentComponent } from '../chgdr-list-dialog-content/chgdr-list-dialog-content.component';\r\nimport { ChgdrListDialogConfig } from '../model/chgdr-ui-config';\r\nimport { I18nUtil } from './i18n-service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ChgdrListUiService {\r\n\r\n    constructor(\r\n        private resolver: ComponentFactoryResolver,\r\n        private injector: Injector,\r\n        private modalService: BsModalService,\r\n        private messagerService: MessagerService\r\n    ) {\r\n    }\r\n\r\n    showDialog(entityId: string, dataId: string)\r\n    showDialog(config: ChgdrListDialogConfig)\r\n    showDialog(arg1: string | ChgdrListDialogConfig, dataId?: string) {\r\n        if (!arg1) {\r\n            console.error(\"创建业务变更日志列表组件失败，业务实体不能为空，请检查\", arg1, dataId);\r\n            throw new Error(\"创建业务变更日志列表组件失败，业务实体不能为空，请检查\");\r\n        }\r\n        if (arg1 instanceof String || typeof arg1 == \"string\") {\r\n            let config = new ChgdrListDialogConfig();\r\n            config.entityId = arg1.toString();\r\n            config.dataId = dataId;\r\n            this.create(config);\r\n        } else {\r\n            this.create(arg1);\r\n        }\r\n    }\r\n\r\n    private create(config: ChgdrListDialogConfig) {\r\n        if (config.entityId == null) {\r\n            console.error(\"创建业务变更日志列表组件失败，业务实体不能为空，请检查\", config);\r\n            throw new Error(\"创建业务变更日志列表组件失败，业务实体不能为空，请检查\");\r\n        }\r\n\r\n        let fac = this.resolver.resolveComponentFactory(ChgdrListDialogContentComponent);\r\n        let cmpRef = fac.create(this.injector);\r\n        let modalConfig: ModalOptions = {\r\n            title: I18nUtil.instant(\"chgdr-list-dialog-title\"),\r\n            width: 1000,\r\n            height: 550,\r\n            resizable: true,\r\n            showButtons: false,\r\n            showMaxButton: true,\r\n            beforeOpen: () => {\r\n                return of(true);\r\n            }\r\n        }\r\n\r\n        cmpRef.instance.entityId = config.entityId;\r\n        cmpRef.instance.dataId = config.dataId;\r\n        cmpRef.instance.beforeShowChangeDetail = config.beforeShowChangeDetail;\r\n        let dialog = this.modalService.show(cmpRef, modalConfig);\r\n    }\r\n\r\n}\r\n","import { ChangeDetectorRef, Component, EventEmitter, HostBinding, Injector, Input, OnInit, Output, SimpleChanges, TemplateRef, ViewChild } from '@angular/core';\r\nimport { DataColumn } from '@farris/ui-common/column';\r\nimport { DialogComponent } from '@farris/ui-dialog';\r\nimport { MessagerService } from '@farris/ui-messager';\r\nimport { NotifyService } from '@farris/ui-notify';\r\nimport { ChgdrService } from '../service/chgdr.service';\r\nimport { ChangeDataHeader } from '../model/change-data-header';\r\nimport { ChangeDataQueryResult } from '../model/change-data-query-result';\r\nimport { OperateType } from '../model/operate-type';\r\nimport { ErrorUtil } from '../util/error.util';\r\nimport { ChgLogConfigField } from '../model/chgdr-config-field';\r\nimport { tap } from 'rxjs/operators';\r\nimport { forkJoin, Observable, of } from 'rxjs';\r\nimport { MapUtil } from '../util/map.util';\r\nimport { ChgdrMetadataService } from '../service/chgdr-metadata.service';\r\nimport { GSPBusinessEntity } from '@gsp-bef/gsp-be-metadata';\r\nimport { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';\r\nimport { GSPCommonElement } from '@gsp-bef/gsp-cm-metadata';\r\nimport { ChgdrInnerService } from '../service/chgdr-inner.service';\r\nimport { ChgdrConfigHandler } from '../service/chgdr-config-handler';\r\nimport { I18nUtil } from '../service/i18n-service';\r\nimport { BeforeShowChangeDetailEvent } from '../model/chgdr-ui-config';\r\n\r\n@Component({\r\n  selector: 'lib-chgdr-header-datagrid',\r\n  templateUrl: './chgdr-header-datagrid.component.html',\r\n  styleUrls: ['./chgdr-header-datagrid.component.css']\r\n})\r\nexport class ChgdrHeaderDatagridComponent implements OnInit {\r\n  @HostBinding('class.f-utils-fill') baseCls = true;\r\n  @Input() chgdrs: ChangeDataQueryResult;\r\n  @Input() showDataId: boolean = true;\r\n\r\n  @Input()\r\n  /** 打开详情前的回调 */\r\n  beforeShowChangeDetail: (event: BeforeShowChangeDetailEvent) => Observable<boolean>;\r\n\r\n  headers: ChangeDataHeader[] = [];\r\n  dataCodeFields: ChgLogConfigField[] = [];\r\n  private chgdrConfigHandler: ChgdrConfigHandler;\r\n  @Output()\r\n  pageChanged: EventEmitter<number> = new EventEmitter();\r\n  @Output()\r\n  pageSizeChanged: EventEmitter<number> = new EventEmitter();\r\n\r\n  // 获取定义的单元格模板\r\n  @ViewChild('opCell') opCell: TemplateRef<any>;\r\n  @ViewChild(\"chgdrInfoDialog\")\r\n  chgdrInfoDialog: DialogComponent;\r\n\r\n  columns: any[];\r\n\r\n  currentChgdrData: ChangeDataHeader;\r\n  I18nUtil: I18nUtil;\r\n\r\n  constructor(private chgdrService: ChgdrService,\r\n    private messageService: MessagerService,\r\n    private notifyService: NotifyService,\r\n    private ref: ChangeDetectorRef,\r\n    private chgdrInnerService: ChgdrInnerService,\r\n    private injector: Injector) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.resetColumnAndData(null, []);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (!changes.chgdrs) {\r\n      //如果chgdrs没有更新，则直接返回\r\n      return;\r\n    }\r\n\r\n    let prevEntityId = this.getEntityId(changes.chgdrs.previousValue);\r\n    let curEntityId = this.getEntityId(changes.chgdrs.currentValue);\r\n    let requests = [\r\n      this.updateChgdrConfigHandler(curEntityId),\r\n      this.updateDataCodeFields(prevEntityId, curEntityId)\r\n    ]\r\n    forkJoin(requests).subscribe(data => {\r\n      let chgdrDatas: ChangeDataQueryResult = changes.chgdrs.currentValue;\r\n      if (!!chgdrDatas) {\r\n        this.formatHeaders(chgdrDatas.headers);\r\n      }\r\n\r\n      //如果业务实体变更，则重置列信息\r\n      if (curEntityId != null && curEntityId != prevEntityId) {\r\n        this.resetColumnAndData(curEntityId, chgdrDatas.headers);\r\n      } else {\r\n        this.headers = chgdrDatas.headers;\r\n      }\r\n    }, err => {\r\n      console.error(\"获取BE【\" + curEntityId + \"】的配置的业务变更日志的业务编号失败：\", err);\r\n      this.messageService.error(I18nUtil.instant(\"get-business-code-config-error\", { errorMessage: ErrorUtil.getErrorMessage(err) }));\r\n    });\r\n  }\r\n\r\n  /** 更新业务实体元数据 */\r\n  private updateChgdrConfigHandler(entityId: string) {\r\n    if (entityId) {\r\n      return this.chgdrInnerService.getChgdrConfigHandler(entityId).pipe(tap(data => this.chgdrConfigHandler = data));\r\n    } else {\r\n      return of(this.chgdrConfigHandler);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新dataCodeField数据\r\n   * @param prevEntityId 原BeId\r\n   * @param curEntityId 当前BeId\r\n   */\r\n  updateDataCodeFields(prevEntityId: string, curEntityId: string) {\r\n    if (curEntityId != null && curEntityId != prevEntityId) {\r\n      //只有发生变更时才更新\r\n      return this.chgdrService.getRootEntityDataCodeFields(curEntityId).pipe(tap(data => this.dataCodeFields = data || []));\r\n    } else {\r\n      //否则直接返回当前值\r\n      return of(this.dataCodeFields);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 格式化headers。主要是解析其中的dataCode，将其转为Object\r\n   * 使用dataCodeObj存放dataCode解析后的结果\r\n   * dataCodeObj属性在ChangeDataHeader中不存在，此处通过强制赋值使用，并且只限于该处使用。\r\n   */\r\n  private formatHeaders(headers: ChangeDataHeader[]) {\r\n    if (!headers) {\r\n      return;\r\n    }\r\n    headers.forEach(header => {\r\n      let dataCodeObj: any;\r\n      this.formatDataCodeMap(header.dataCode);\r\n      if (header.dataCode && header.dataCode.size == 1 && header.dataCode.has(\"_$dataCode\")) {\r\n        //兼容老数据\r\n        //老数据dataCode为自由文本\r\n        dataCodeObj = {};\r\n        if (this.dataCodeFields && this.dataCodeFields.length > 0) {\r\n          dataCodeObj[this.dataCodeFields[0].fieldLabelId] = header.dataCode.get(\"_$dataCode\");\r\n        }\r\n      } else {\r\n        dataCodeObj = MapUtil.convertMapToObject(header.dataCode);\r\n      }\r\n      (<any>header).dataCodeObj = dataCodeObj;\r\n    })\r\n  }\r\n\r\n  /** 格式化业务主键Map */\r\n  private formatDataCodeMap(dataCode: Map<string, string>): void {\r\n    if (!dataCode || !this.chgdrConfigHandler) {\r\n      return;\r\n    }\r\n    Array.from(dataCode.keys()).forEach(fieldLabelId => {\r\n      let value = dataCode.get(fieldLabelId);\r\n      let formatedValue = this.chgdrConfigHandler.formatMainObjectFieldValue(value, fieldLabelId);\r\n      dataCode.set(fieldLabelId, formatedValue);\r\n    })\r\n  }\r\n\r\n  private getEntityId(chgdrs: ChangeDataQueryResult): string {\r\n    if (!chgdrs || !chgdrs.headers || chgdrs.headers.length == 0) {\r\n      return null;\r\n    } else {\r\n      return chgdrs.headers[0].entityId;\r\n    }\r\n  }\r\n\r\n  private resetColumnAndData(entityId: string, headers: ChangeDataHeader[]) {\r\n    let columns: any[] = [\r\n      { field: 'userName', width: 130, title: I18nUtil.instant(\"user-name-column-title\") },\r\n      { field: 'changeTime', width: 130, title: I18nUtil.instant(\"change-time-column-title\"), formatter: { type: 'datetime', options: { format: I18nUtil.instant(\"change-time-column-format\") } } },\r\n      { field: 'operateType.name', width: 60, title: I18nUtil.instant(\"operation-type-title\") },\r\n      { field: 'dataId', width: 130, title: I18nUtil.instant(\"tech-pk-column-title\"), visible: this.showDataId }];\r\n    //{field: 'dataCode', width: 130, title: '业务编号'},\r\n    // {field: 'reason', width: 130, title: '变更原因'},\r\n    this.dataCodeFields.forEach((field) => {\r\n      let column: DataColumn = {\r\n        field: \"dataCodeObj.\" + field.fieldLabelId,\r\n        title: field.fieldName,\r\n        width: 130\r\n      };\r\n      columns.push(column);\r\n    })\r\n    let opColumn = { title: I18nUtil.instant(\"operation-column-title\"), width: 130, template: this.opCell, halign: 'center', align: 'center' };\r\n    columns.push(opColumn);\r\n\r\n    this.columns = columns;\r\n    this.headers = headers;\r\n  }\r\n\r\n  onPageChanged($event) {\r\n    this.pageChanged.emit($event);\r\n  }\r\n\r\n  onPageSizeChanged($event) {\r\n    this.pageSizeChanged.emit($event);\r\n  }\r\n\r\n  clickShowChangeDetail(ctx) {\r\n    let header: ChangeDataHeader = ctx.rowData;\r\n    if (!header) {\r\n      return;\r\n    }\r\n    if (!this.beforeShowChangeDetail) {\r\n      //如果没有打开详情前回调，则按照默认方式打开\r\n      this.showChangeDetail(header);\r\n    } else {\r\n      let event: BeforeShowChangeDetailEvent = new BeforeShowChangeDetailEvent();\r\n      event.header = header;\r\n      this.beforeShowChangeDetail(event).subscribe((isShow) => {\r\n        if (isShow) {\r\n          this.showChangeDetail(header);\r\n        }\r\n      }, (err) => {\r\n        console.error(\"执行业务变更详情打开前事件报错：\", err);\r\n        this.messageService.error(\"执行业务变更详情打开前事件报错：\" + ErrorUtil.getErrorMessage(err));\r\n      })\r\n    }\r\n  }\r\n\r\n  private showChangeDetail(header: ChangeDataHeader) {\r\n    this.chgdrService.getChangeData(header.id, header.changeTime).subscribe(data => {\r\n      if (!data) {\r\n        this.notifyService.error(I18nUtil.instant(\"can-not-found-change-record-by-id\", { headerId: header.id }));\r\n      } else {\r\n        this.currentChgdrData = data;\r\n        this.chgdrInfoDialog.show();\r\n      }\r\n    }, error => {\r\n      console.error(\"查询业务变更日志出错\", error);\r\n      this.messageService.error(I18nUtil.instant(\"query-change-data-record-error\", { errorMessage: ErrorUtil.getErrorMessage(error) }));\r\n    })\r\n  }\r\n\r\n  public get showChangeDetailBtn() {\r\n    return I18nUtil.instant(\"show-change-detail-btn\");\r\n  }\r\n\r\n  public get changeDetailDialogTitle() {\r\n    return I18nUtil.instant(\"change-detail-dialog-title\");\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule, registerLocaleData } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { SplitterModule } from \"@farris/ui-splitter\";\r\nimport { AngularDraggableModule } from '@farris/ui-draggable';\r\nimport { DatagridModule } from \"@farris/ui-datagrid\";\r\nimport { TreeTableModule } from '@farris/ui-treetable';\r\nimport { FarrisSectionModule } from \"@farris/ui-section\";\r\nimport { MessagerModule, MessagerService } from '@farris/ui-messager';\r\nimport { NotifyModule, NotifyService } from '@farris/ui-notify';\r\nimport { FarrisDialogModule } from '@farris/ui-dialog';\r\nimport { FarrisDatePickerModule } from '@farris/ui-datepicker';\r\n\r\nimport { HttpService, SessionService, CacheService } from '@ecp-caf/caf-common';\r\nimport { MetadataRTSelectModule, SelectMetadataRTComponent, GSPMetadataRTServiceModule } from '@gsp-lcm/metadatart-selector';\r\n\r\nimport { ChgdrDataViewerComponent } from './chgdr-data-viewer/chgdr-data-viewer.component';\r\n\r\nimport zh from '@angular/common/locales/zh';\r\nimport { ChgdrListComponent } from './chgdr-list/chgdr-list.component';\r\nimport { ChgdrRowBaseinfoFormComponent } from './chgdr-row-baseinfo-form/chgdr-row-baseinfo-form.component';\r\nimport { ChgdrRowGridComponent } from './chgdr-row-grid/chgdr-row-grid.component';\r\nimport { ChgdrListUiService } from './service/chgdr-list-ui.service';\r\nimport { ChgdrListDialogContentComponent } from './chgdr-list-dialog-content/chgdr-list-dialog-content.component';\r\nimport { ChgdrHeaderDatagridComponent } from './chgdr-header-datagrid/chgdr-header-datagrid.component';\r\nimport { ChgdrMetadataService } from './service/chgdr-metadata.service';\r\nimport { ChgdrConfigService } from './service/chgdr-config.service';\r\nimport { ChgdrInnerService } from './service/chgdr-inner.service';\r\nimport { ChgdrService } from './service/chgdr.service';\r\nimport { I18nService } from './service/i18n-service';\r\nregisterLocaleData(zh);\r\n\r\n@NgModule({\r\n  declarations: [ChgdrDataViewerComponent, ChgdrListComponent, ChgdrRowBaseinfoFormComponent, ChgdrRowGridComponent, ChgdrListDialogContentComponent, ChgdrHeaderDatagridComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    TranslateModule.forRoot(),\r\n    SplitterModule,\r\n    AngularDraggableModule,\r\n    DatagridModule,\r\n    TreeTableModule,\r\n    FarrisSectionModule,\r\n    MessagerModule.forRoot(),\r\n    NotifyModule,\r\n    FarrisDialogModule,\r\n    FarrisDatePickerModule,\r\n    MetadataRTSelectModule,\r\n    GSPMetadataRTServiceModule.forRoot('')\r\n  ],\r\n  providers: [\r\n    MessagerService,\r\n    NotifyService,\r\n    HttpService,\r\n    SessionService,\r\n    CacheService,\r\n    ChgdrListUiService,\r\n    ChgdrMetadataService,\r\n    ChgdrConfigService,\r\n    ChgdrInnerService,\r\n    ChgdrService,\r\n    I18nService\r\n  ],\r\n  entryComponents: [\r\n    ChgdrDataViewerComponent,\r\n    ChgdrListComponent,\r\n    ChgdrListDialogContentComponent\r\n  ],\r\n  exports: [ChgdrDataViewerComponent, ChgdrListComponent, ChgdrHeaderDatagridComponent]\r\n})\r\nexport class ChgdrModule { }\r\n","import { ChangeDataRow } from './change-data-row';\r\nimport { OperateType } from './operate-type';\r\n\r\nexport class ChangeDataHeader {\r\n    id: string;\r\n    /**\r\n     * 用户ID\r\n     */\r\n    userId: string;\r\n    /**\r\n     * 用户编号\r\n     */\r\n    userCode: string;\r\n    /**\r\n     * 用户名称\r\n     */\r\n    userName: string;\r\n    /**\r\n     * 实体ID\r\n     */\r\n    entityId: string;\r\n    /**\r\n     * 数据主键\r\n     */\r\n    dataId: string;\r\n    /**\r\n     * 数据编号\r\n     */\r\n    dataCode: Map<string, string>;\r\n    /**\r\n     * 变更时间\r\n     */\r\n    changeTime: Date;\r\n    /**\r\n     * 变更类型\r\n     */\r\n    operateType: OperateType;\r\n    /**\r\n     * 变更原因\r\n     */\r\n    reason: string;\r\n    /**\r\n     * 分组ID\r\n     */\r\n    groupId: string;\r\n\r\n    /**\r\n     * 变更行列表\r\n     */\r\n    rows: ChangeDataRow[];\r\n}\r\n\r\nexport class ChangeDataCompHeader extends ChangeDataHeader {\r\n    extEntityRows: Map<String, ChangeDataRow[]>;\r\n}","import { OperateType } from './operate-type';\r\n\r\nexport class ChangeDataRow {\r\n    id: string;\r\n    /**\r\n     * header内码\r\n     */\r\n    headerId: string;\r\n    /**\r\n     * 实体编号\r\n     */\r\n    entityCode: string;\r\n    /**\r\n     * 数据主键\r\n     */\r\n    dataId: string;\r\n    /**\r\n     * 数据编号\r\n     */\r\n    dataCode: Map<string, string>;\r\n    /**\r\n     * 操作类型\r\n     */\r\n    operateType: OperateType;\r\n    /**\r\n     * 旧内容\r\n     */\r\n    oldContent: Map<string, string>;\r\n    /**\r\n     * 新内容\r\n     */\r\n    newContent: Map<string, string>;\r\n    /**\r\n     * 父数据主键\r\n     */\r\n    parentDataId: string;\r\n}","/**\r\n * 业务变更日志详情数据查询参数\r\n */\r\nexport class ChgdrItemQueryParam {\r\n  /**\r\n   * 主业务实体变更Header id\r\n   */\r\n  public id: string;\r\n  /**\r\n   * 变更时间\r\n   */\r\n  public changeTime: Date;\r\n  /**\r\n   * 关联的其他业务实体业务变更日志列表。key为实体ID，value为对应实体的数据主键\r\n   */\r\n  public dataIds: Map<string, string[]>;\r\n}"],"names":["TranslateDefaultParser","Injectable","of","map","HttpService","SessionService","GSPMetadataRTService","Injector","tap","GSPElementDataType","format","GSPElementObjectType","forkJoin","Component","Input","ViewChild","tslib_1.__values","ServerIP","chgdrUrl","MessagerService","NotifyService","HostBinding","ComponentFactoryResolver","BsModalService","EventEmitter","ChangeDetectorRef","Output","registerLocaleData","NgModule","CommonModule","FormsModule","TranslateModule","SplitterModule","AngularDraggableModule","DatagridModule","TreeTableModule","FarrisSectionModule","MessagerModule","NotifyModule","FarrisDialogModule","FarrisDatePickerModule","MetadataRTSelectModule","GSPMetadataRTServiceModule","CacheService","tslib_1.__extends"],"mappings":";;;;;;;;;;;;;;;;IAGA;;;QAAA;SAWC;QAAD,gBAAC;IAAD,CAAC,IAAA;;;;IAGD;;;QAAA;SAIC;QAAD,0BAAC;IAAD,CAAC,IAAA;;;;IAGD;;;QAAA;SAYC;QAAD,uBAAC;IAAD,CAAC,IAAA;IAED;QAAA;;;;YAcI,aAAQ,GAAuB,EAAE,CAAC;SACrC;QAAD,uBAAC;IAAD,CAAC,IAAA;IAED;QAAA;SAIC;QAAD,oBAAC;IAAD,CAAC,IAAA;;;;;;;;AC3DD,QAAa,UAAU,GAAG;QACxB,yBAAyB,EAAE,qBAAqB;QAChD,yBAAyB,EAAE,WAAW;QACtC,6BAA6B,EAAE,eAAe;QAC9C,iBAAiB,EAAE,YAAY;QAC/B,gCAAgC,EAAE,kDAAkD;QACpF,wBAAwB,EAAE,MAAM;QAChC,0BAA0B,EAAE,MAAM;QAClC,2BAA2B,EAAE,qBAAqB;QAClD,sBAAsB,EAAE,MAAM;QAC9B,sBAAsB,EAAE,SAAS;QACjC,wBAAwB,EAAE,WAAW;QACrC,mCAAmC,EAAE,4CAA4C;QACjF,gCAAgC,EAAE,kDAAkD;QACpF,wBAAwB,EAAE,QAAQ;QAClC,4BAA4B,EAAE,eAAe;QAC7C,kBAAkB,EAAE,OAAO;QAC3B,gBAAgB,EAAE,KAAK;QACvB,WAAW,EAAE,OAAO;QACpB,8BAA8B,EAAE,SAAS;QACzC,mBAAmB,EAAE,MAAM;QAC3B,mBAAmB,EAAE,MAAM;QAC3B,qBAAqB,EAAE,MAAM;QAC7B,yBAAyB,EAAE,OAAO;QAClC,oBAAoB,EAAE,OAAO;QAC7B,wBAAwB,EAAE,WAAW;QACrC,wBAAwB,EAAE,WAAW;QACrC,uBAAuB,EAAE,KAAK;QAC9B,0BAA0B,EAAE,QAAQ;QACpC,0BAA0B,EAAE,QAAQ;QACpC,UAAU,EAAE,KAAK;QACjB,SAAS,EAAE,IAAI;QACf,oBAAoB,EAAE,eAAe;KACtC;;;;;;;;ACjCD,QAAa,aAAa,GAAG;QAC3B,yBAAyB,EAAE,QAAQ;QACnC,yBAAyB,EAAE,MAAM;QACjC,6BAA6B,EAAE,MAAM;QACrC,iBAAiB,EAAE,KAAK;QACxB,gCAAgC,EAAE,6BAA6B;QAC/D,wBAAwB,EAAE,IAAI;QAC9B,0BAA0B,EAAE,IAAI;QAChC,2BAA2B,EAAE,sBAAsB;QACnD,sBAAsB,EAAE,MAAM;QAC9B,sBAAsB,EAAE,MAAM;QAC9B,wBAAwB,EAAE,IAAI;QAC9B,mCAAmC,EAAE,2BAA2B;QAChE,gCAAgC,EAAE,6BAA6B;QAC/D,wBAAwB,EAAE,MAAM;QAChC,4BAA4B,EAAE,QAAQ;QACtC,kBAAkB,EAAE,MAAM;QAC1B,gBAAgB,EAAE,MAAM;QACxB,WAAW,EAAE,IAAI;QACjB,8BAA8B,EAAE,MAAM;QACtC,mBAAmB,EAAE,KAAK;QAC1B,mBAAmB,EAAE,MAAM;QAC3B,qBAAqB,EAAE,MAAM;QAC7B,yBAAyB,EAAE,KAAK;QAChC,oBAAoB,EAAE,GAAG;QACzB,wBAAwB,EAAE,IAAI;QAC9B,wBAAwB,EAAE,KAAK;QAC/B,uBAAuB,EAAE,IAAI;QAC7B,0BAA0B,EAAE,IAAI;QAChC,0BAA0B,EAAE,IAAI;QAChC,UAAU,EAAE,GAAG;QACf,SAAS,EAAE,GAAG;QACd,oBAAoB,EAAE,MAAM;KAC7B;;;;;;;;ACjCD,QAAa,aAAa,GAAG;QAC3B,yBAAyB,EAAE,QAAQ;QACnC,yBAAyB,EAAE,MAAM;QACjC,6BAA6B,EAAE,MAAM;QACrC,iBAAiB,EAAE,KAAK;QACxB,gCAAgC,EAAE,6BAA6B;QAC/D,wBAAwB,EAAE,IAAI;QAC9B,0BAA0B,EAAE,IAAI;QAChC,2BAA2B,EAAE,sBAAsB;QACnD,sBAAsB,EAAE,MAAM;QAC9B,sBAAsB,EAAE,MAAM;QAC9B,wBAAwB,EAAE,IAAI;QAC9B,mCAAmC,EAAE,2BAA2B;QAChE,gCAAgC,EAAE,6BAA6B;QAC/D,wBAAwB,EAAE,MAAM;QAChC,4BAA4B,EAAE,QAAQ;QACtC,kBAAkB,EAAE,MAAM;QAC1B,gBAAgB,EAAE,MAAM;QACxB,WAAW,EAAE,IAAI;QACjB,8BAA8B,EAAE,MAAM;QACtC,mBAAmB,EAAE,KAAK;QAC1B,mBAAmB,EAAE,MAAM;QAC3B,qBAAqB,EAAE,MAAM;QAC7B,yBAAyB,EAAE,KAAK;QAChC,oBAAoB,EAAE,GAAG;QACzB,wBAAwB,EAAE,IAAI;QAC9B,wBAAwB,EAAE,KAAK;QAC/B,uBAAuB,EAAE,IAAI;QAC7B,0BAA0B,EAAE,IAAI;QAChC,0BAA0B,EAAE,IAAI;QAChC,UAAU,EAAE,GAAG;QACf,SAAS,EAAE,GAAG;QACd,oBAAoB,EAAE,MAAM;KAC7B;;;;;;;ACjCD;QAQI,eAAe,GAAqB,IAAI,GAAG,EAAE;IACjD,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACtC,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;IAC7C,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;;QAEzC,WAAW,GAAW,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC;IAC9D,IAAI,CAAC,WAAW,EAAE;QAChB,WAAW,GAAG,QAAQ,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,WAAW,CAAC,CAAC;KAC5C;;QAEG,MAAM,GAAoB,IAAIA,2BAAsB,EAAE;AAE1D;QAAA;SAgCC;;;;;;QA/Be,gBAAO;;;;;YAArB,UAAsB,GAAW,EAAE,KAAW;;oBACxC,SAAS,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC,GAAG,CAAC;gBACtD,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,IAAI,EAAE;oBACjD,OAAO,GAAG,CAAC;iBACZ;;oBAEG,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,KAAK,CAAC;gBACjD,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;oBAC3C,OAAO,GAAG,CAAC;iBACZ;gBAED,OAAO,MAAM,CAAC;aACf;;;;;QAEc,+BAAsB;;;;YAArC;gBACE,OAAO,eAAe,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;aAC/C;;;;;;QAEa,yBAAgB;;;;;YAA9B,UAA+B,GAAW,EAAE,WAAmB;;oBACzD,SAAS,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC,GAAG,CAAC;gBACtD,IAAI,SAAS,KAAK,SAAS,IAAI,SAAS,KAAK,IAAI,EAAE;oBACjD,OAAO,WAAW,CAAC;iBACpB;;oBAEG,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC;gBAC1C,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;oBAC3C,OAAO,WAAW,CAAC;iBACpB;gBAED,OAAO,MAAM,CAAC;aACf;QACH,eAAC;IAAD,CAAC,IAAA;;QAKC;SACC;;;;;;QAEM,6BAAO;;;;;YAAd,UAAe,GAAW,EAAE,KAAW;gBACrC,OAAO,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;aACrC;;;;;QAEO,4CAAsB;;;;YAA9B;gBACE,OAAO,eAAe,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;aAC/C;;;;;;QAEa,yBAAa;;;;;YAA3B,UAA4B,GAAW,EAAE,WAAmB;gBAC1D,OAAO,QAAQ,CAAC,gBAAgB,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;aACpD;;oBAhBFC,aAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;;0BAvDlC;KAuDA;;;;;;;ACjDA,IAIA;QAAA;SA4KC;;;;;;QAzKG,yCAAc;;;;;YAAd,UAAe,IAAsB,EAAE,OAA2B;gBAAlE,iBA+HC;gBA9HG,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;;;oBAEnB,SAAS,GAAG,IAAI,SAAS,EAAE;gBAC/B,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;gBAChD,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;gBACzC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;gBACnC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC/B,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;gBACnC,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAC;gBAC3F,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC/B,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;gBACvC,SAAS,CAAC,WAAW,GAAG,EAAE,CAAC;;;oBAGvB,QAAQ,GAAuB,EAAE;gBACrC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO;;;mBAAC,UAAA,GAAG;oBAChC,IAAI,CAAC,GAAG,EAAE;wBACN,OAAO;qBACV;;wBACG,OAAO,GAAG,IAAI,gBAAgB,EAAE;oBACpC,OAAO,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC;oBACpB,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC,YAAY,CAAC;oBACxC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;oBAC5B,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;oBAChC,OAAO,CAAC,SAAS,GAAG,KAAI,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC;oBACtE,OAAO,CAAC,UAAU,GAAG,GAAG,CAAC,UAAU,CAAC;oBACpC,OAAO,CAAC,UAAU,GAAG,KAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBACzE,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;oBACtC,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC;;;wBAGrB,gBAAgB,GAAa,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC;;wBAC9D,kBAAkB,GAAuB,EAAE;oBAC/C,gBAAgB,CAAC,OAAO;;;uBAAC,UAAC,GAAG;;4BACrB,MAAM,GAAG,IAAI,gBAAgB,EAAE;wBACnC,MAAM,CAAC,UAAU,GAAG,GAAG,CAAC;wBACxB,MAAM,CAAC,SAAS,GAAG,KAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;wBACjF,MAAM,CAAC,QAAQ,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;wBAC9F,MAAM,CAAC,QAAQ,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;;4BAE1F,GAAG,GAAsB,KAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC;wBACzE,IAAI,GAAG,EAAE;;4BAEL,MAAM,CAAC,cAAc,GAAG,GAAG,CAAC,UAAU,IAAI,aAAa,IAAI,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC;4BAC9E,MAAM,CAAC,qBAAqB,GAAG,GAAG,CAAC,YAAY,CAAC;;gCAC5C,aAAa,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC;4BACtE,IAAI,aAAa,EAAE;gCACf,MAAM,CAAC,kBAAkB,GAAG,aAAa,CAAC,OAAO,CAAC;6BACrD;yBACJ;wBAED,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;qBACnC,EAAC,CAAA;;oBAEF,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,EAAE,GAAG,CAAC,UAAU;;;uBAAE,UAAC,MAAM,IAAK,OAAA,MAAM,CAAC,UAAU,GAAA,EAAC,CAAC;;;wBAGjF,SAAS,GAAkC,IAAI,GAAG,EAAE;oBACxD,kBAAkB,CAAC,OAAO;;;uBAAC,UAAC,MAAM;wBAC9B,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;qBAC5C,EAAC,CAAC;;oBAEH,kBAAkB,GAAG,kBAAkB,CAAC,MAAM;;;uBAAC,UAAC,MAAM;wBAClD,IAAI,MAAM,CAAC,qBAAqB,EAAE;;gCAC1B,YAAY,GAAqB,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,kBAAkB,CAAC;4BAC7E,IAAI,YAAY,EAAE;;gCAEd,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gCACnC,OAAO,KAAK,CAAC;6BAChB;iCAAM;gCACH,OAAO,IAAI,CAAC;6BACf;yBACJ;6BAAM;4BACH,OAAO,IAAI,CAAC;yBACf;qBACJ,EAAC,CAAC;;oBAEH,kBAAkB,GAAG,kBAAkB,CAAC,GAAG;;;uBAAmB,UAAA,MAAM;wBAChE,IAAI,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;;;gCAEjD,aAAa,GAAqB,MAAM,CAAC,MAAM,CAAC,IAAI,gBAAgB,EAAE,EAAE,MAAM,CAAC;4BACnF,aAAa,CAAC,kBAAkB,GAAG,MAAM,CAAC;4BAC1C,aAAa,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG;;;+BAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,QAAQ,GAAA,EAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BAChF,aAAa,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG;;;+BAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,QAAQ,GAAA,EAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BAChF,OAAO,aAAa,CAAC;yBACxB;6BAAM;4BACH,OAAO,MAAM,CAAC;yBACjB;qBACJ,EAAC,CAAC;oBAEH,OAAO,CAAC,OAAO,GAAG,kBAAkB,CAAC;oBAErC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC1B,EAAC,CAAC;;;;;oBAGC,YAAY,GAAkC,IAAI,GAAG,EAAE;gBAC3D,QAAQ,CAAC,OAAO;;;mBAAC,UAAA,IAAI,IAAI,OAAA,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,GAAA,EAAC,CAAC;gBAE9D,QAAQ,CAAC,OAAO;;;mBAAC,UAAA,IAAI;oBACjB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;;;4BAEhB,UAAU,GAAG,KAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC;wBAC9E,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBAC3B,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;wBACvC,OAAO;qBACV;;wBACG,aAAa,GAAG,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;oBACvD,IAAI,CAAC,CAAC,aAAa,EAAE;;;4BAEb,UAAU,GAAG,aAAa,CAAC,WAAW,CAAC,IAAI;;;2BAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAA,EAAC;wBACvF,IAAI,CAAC,UAAU,EAAE;4BACb,UAAU,GAAG,KAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;4BAC3E,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;yBAC9C;wBACD,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC9B;yBAAM;;;;4BAGC,UAAU,GAAG,KAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC;wBAC9E,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBAC3B,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;qBAC1C;iBACJ,EAAC,CAAA;gBAEF,OAAO,SAAS,CAAC;aACpB;;;;;;;QAEO,yCAAc;;;;;;YAAtB,UAAuB,QAA6B,EAAE,UAAkB;gBAAxE,iBAoBC;;oBAnBO,SAAS,GAAoB,EAAE;gBACnC,QAAQ,IAAI,QAAQ,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAG;;wBAChC,aAAa,GAAkB,IAAI,aAAa,EAAE;oBACtD,IAAI,GAAG,IAAI,YAAY,EAAE;wBACrB,aAAa,CAAC,YAAY,GAAG,UAAU,CAAC;wBACxC,aAAa,CAAC,SAAS,GAAG,QAAQ,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;wBAClF,aAAa,CAAC,UAAU,GAAG,KAAK,CAAC;qBACpC;yBAAM;wBACH,aAAa,CAAC,YAAY,GAAG,GAAG,CAAC;wBACjC,aAAa,CAAC,SAAS,GAAG,KAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;wBACpF,aAAa,CAAC,UAAU,GAAG,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC;qBACpF;oBACD,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;iBACjC,EAAC,CAAA;;gBAGF,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU;;;mBAAE,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,YAAY,GAAA,EAAC,CAAC;gBAE9E,OAAO,SAAS,CAAC;aACpB;;;;;;;;QAGO,kDAAuB;;;;;;YAA/B,UAAgC,GAAkB;;oBAC1C,OAAO,GAAgB,IAAI,GAAG,EAAE;gBACpC,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAG,IAAK,OAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAA,EAAC,CAAC;gBAC3E,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAG,IAAK,OAAA,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAA,EAAC,CAAC;;oBACrE,IAAI,GAAa,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACjD,OAAO,IAAI,CAAC;aACf;;;;;;;QAGO,iDAAsB;;;;;;YAA9B,UAA+B,UAAkB,EAAE,UAAkB;;oBAC7D,IAAI,GAAG,IAAI,mBAAmB,EAAE;gBACpC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;gBAC7B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;gBAC7B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;gBACf,OAAO,IAAI,CAAC;aACf;QAEL,uBAAC;IAAD,CAAC,IAAA;;;;;;;ICtLD;QAAA;SAgBC;;;;QAfQ,YAAO;;;YAAd;gBAAA,iBAMC;;oBALO,UAAU,GAAG,sCAAsC;;oBACnD,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO;;;mBAAE,UAAC,CAAC;oBAC3C,OAAO,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;iBACxB,EAAC;gBACF,OAAO,MAAM,CAAC;aACf;;;;;;QAEc,YAAO;;;;;YAAtB,UAAuB,CAAC;;;oBAEhB,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;;;oBAE1B,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;gBACzC,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;aACvB;QACH,WAAC;IAAD,CAAC,IAAA;;;;;;;AChBD;;;;;;;;;;;;;;;;;;;;;;IA0BA;;;;;;;;;;;;;;;;;;;;;;;;QAAA;SAsBC;QAAD,oBAAC;IAAD,CAAC,IAAA;IAED;QAAA;SAwDC;;;;;QArDU,gCAAK;;;;YAAZ,UAAa,SAAoB;gBAC7B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;gBAC3B,IAAI,SAAS,CAAC,WAAW,CAAC,MAAM,IAAI,CAAC,EAAE;oBACnC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACtB,OAAO,EAAE,CAAC;iBACb;;oBACG,cAAc,GAAG,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;;oBACzC,QAAQ,GAAG,cAAc,CAAC,IAAI;gBAClC,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;oBACtB,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACxB,OAAO,EAAE,CAAC;iBACb;;oBACG,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC;;oBAErB,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;gBAClC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAErB,OAAO,CAAC,IAAI,CAAC,CAAC;aACjB;;;;;;QAEO,oCAAS;;;;;YAAjB,UAAkB,GAAqB;gBAAvC,iBAmBC;;oBAlBS,IAAI,GAAkB,IAAI,aAAa,EAAE;gBAC/C,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;gBACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;gBACxC,IAAI,CAAC,IAAI,GAAG;oBACR,EAAE,EAAE,IAAI,CAAC,EAAE;oBACX,IAAI,EAAE,IAAI,CAAC,IAAI;iBAClB,CAAC;gBACF,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;gBAChC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACnB,GAAG,CAAC,WAAW,CAAC,OAAO;;;mBAAC,UAAA,UAAU;oBAC9B,UAAU,CAAC,IAAI,CAAC,OAAO;;;uBAAC,UAAA,QAAQ;;4BACtB,SAAS,GAAkB,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;wBACzD,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;wBACxB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;qBACjC,EAAC,CAAA;iBACL,EAAC,CAAA;gBACF,OAAO,IAAI,CAAC;aACf;;;;;;QAEO,4CAAiB;;;;;YAAzB,UAA0B,GAAqB;;oBACvC,YAAY;gBAChB,IAAI,GAAG,CAAC,SAAS,IAAI,GAAG,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC3C,YAAY,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;iBAC9C;gBACD,IAAI,YAAY,EAAE;oBACd,OAAO,GAAG,CAAC,UAAU,GAAG,GAAG,GAAG,YAAY,GAAG,GAAG,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,GAAG,GAAG,CAAC;iBACjF;qBAAM;oBACH,OAAO,GAAG,CAAC,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,GAAG,GAAG,CAAC;iBAC5D;aACJ;QACL,uBAAC;IAAD,CAAC,IAAA;;;;;;;AC1GD;QAgBE,8BAAoB,IAAiB,EAC3B,cAA8B,EAC9B,eAAqC,EACrC,QAAkB;YAHR,SAAI,GAAJ,IAAI,CAAa;YAC3B,mBAAc,GAAd,cAAc,CAAgB;YAC9B,oBAAe,GAAf,eAAe,CAAsB;YACrC,aAAQ,GAAR,QAAQ,CAAU;YALpB,oBAAe,GAAmC,IAAI,GAAG,EAAE,CAAC;SAKnC;;;;;;;QAGxB,mDAAoB;;;;;YAA3B,UAA4B,IAAY;gBAAxC,iBAWC;gBAVC,IAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,EAAC;;wBAC5B,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC;oBACvC,OAAOC,OAAE,CAAC,EAAE,CAAC,CAAC;iBACf;qBAAI;oBACH,OAAO,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,CAACC,aAAG;;;uBAAC,UAAA,QAAQ;;4BACzD,EAAE,GAAsB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC;wBAC1D,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;wBACnC,OAAO,EAAE,CAAC;qBACX,EAAC,CAAC,CAAC;iBACL;aACF;;oBArBJF,aAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;;wBAXzBG,cAAW;wBAAEC,iBAAc;wBAE3BC,uBAAoB;wBAHRC,WAAQ;;;;mCAA7B;KAYA;;;;;;;ACZA;QAYM,QAAQ,GAAG,GAAG;;QACd,QAAQ,GAAM,QAAQ,2BAAwB;AAEpD;QAGI,4BAAoB,IAAiB,EACzB,cAA8B,EAC9B,QAAkB;YAFV,SAAI,GAAJ,IAAI,CAAa;YACzB,mBAAc,GAAd,cAAc,CAAgB;YAC9B,aAAQ,GAAR,QAAQ,CAAU;SAC7B;;;;;;;;;QAKD,6CAAgB;;;;;YAAhB,UAAiB,IAAY;;oBACrB,QAAQ,GAAM,QAAQ,qBAAgB,IAAM;gBAChD,OAAO,uCAA4C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAE,IAAI,CAACC,aAAG;;;mBAAC,UAAA,IAAI;;wBACjF,cAAc,GAAyB,IAAI,IAAI,EAAE;oBACrD,cAAc,CAAC,OAAO;;;uBAAC,UAAA,MAAM;;;4BAErB,MAAM,GAA6B,MAAM,CAAC,MAAM,IAAI,EAAE;;wBAE1D,MAAM,CAAC,OAAO;;;;2BAAC,UAAC,KAAK,EAAE,KAAK;4BACxB,IAAI,KAAK,CAAC,SAAS,KAAK,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,IAAI,EAAE;gCAC3D,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;6BAC3B;yBACJ,EAAC,CAAC;;wBAEH,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI;;;;2BAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,GAAA,EAAC,CAAC;;wBAEjE,MAAM,CAAC,OAAO;;;;2BAAC,UAAC,KAAK,EAAE,KAAK;4BACxB,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;yBAC3B,EAAC,CAAA;qBACL,EAAC,CAAA;iBACL,EAAC,CAAC,CAAC;aACP;;oBAhCJP,aAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;;wBAbzBG,cAAW;wBAAEC,iBAAc;wBAFfE,WAAQ;;;;iCAA7B;KAeA;;;;;;;ACfA,IAOA;QAUI,4BAAmB,EAAqB,EAAE,aAAmC;YARrE,kBAAa,GAAkC,IAAI,GAAG,EAAE,CAAC;YACzD,mBAAc,GAAmC,IAAI,GAAG,EAAE,CAAC;YAC3D,4BAAuB,GAAwB,IAAI,GAAG,EAAE,CAAC;YACzD,yBAAoB,GAAmC,IAAI,GAAG,EAAE,CAAC;YAGjE,yBAAoB,GAAmC,IAAI,GAAG,EAAE,CAAC;;YAIrE,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;YACb,IAAI,CAAC,CAAC,EAAE,EAAE;;oBACF,UAAU,GAAG,EAAE,CAAC,UAAU;gBAC9B,IAAI,CAAC,eAAe,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;aAC7E;;YAGD,IAAI,CAAC,aAAa,GAAG,aAAa,IAAI,EAAE,CAAC;YACzC,IAAI,CAAC,mBAAmB,EAAE,CAAC;;YAG3B,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1B;;;;;;;QAGO,4CAAe;;;;;YAAvB;;oBACQ,uBAAuB,GAAwB,IAAI,GAAG,EAAE;;gBAE5D,IAAI,CAAC,cAAc,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAG;oBACnC,uBAAuB,CAAC,GAAG,CAAC,GAAG,EAAE,uBAAuB,CAAC,IAAI,CAAC,CAAC;iBAClE,EAAC,CAAC;;gBAEH,IAAI,CAAC,oBAAoB,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAG;oBACzC,IAAI,KAAK,CAAC,SAAS,KAAK,SAAS,IAAI,KAAK,CAAC,SAAS,KAAK,IAAI,EAAE;wBAC3D,uBAAuB,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;qBACrD;iBACJ,EAAC,CAAA;gBAEF,IAAI,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;aAC1D;;;;;;;QAGO,gDAAmB;;;;;YAA3B;;oBACQ,cAAc,GAAmC,IAAI,GAAG,EAAE;gBAC9D,IAAI,CAAC,aAAa,CAAC,OAAO;;;mBAAC,UAAA,YAAY;;wBAC/B,OAAO,GAAG,YAAY,CAAC,OAAO;oBAClC,CAAC,YAAY,CAAC,MAAM,IAAI,EAAE,EAAE,OAAO;;;uBAAC,UAAA,KAAK;;4BACjC,UAAU,GAAG,KAAK,CAAC,YAAY;;4BAC/B,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,UAAU;wBACpC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;qBAClC,EAAC,CAAA;iBACL,EAAC,CAAC;gBACH,IAAI,CAAC,oBAAoB,GAAG,cAAc,CAAC;aAC9C;;;;;;;;QAEO,4CAAe;;;;;;;YAAvB,UAAwB,MAAwB,EAAE,aAA4C,EAAE,cAA8C;gBAA9I,iBAoBC;gBAnBG,IAAI,CAAC,MAAM,EAAE;oBACT,OAAO;iBACV;gBACD,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;gBAGvC,MAAM,CAAC,eAAe,CAAC,OAAO;;;mBAAC,UAAA,GAAG;oBAC9B,KAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;iBAChE,EAAC,CAAA;;;oBAGE,QAAQ,GAAuB,MAAM,CAAC,mBAAmB;gBAC7D,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;oBAC/B,OAAO;iBACV;gBAED,QAAQ,CAAC,OAAO;;;mBAAC,UAAA,WAAW;oBACxB,KAAI,CAAC,eAAe,CAAC,WAAW,EAAE,aAAa,EAAE,cAAc,CAAC,CAAC;iBACpE,EAAC,CAAA;aACL;;;;;;;;;;;QAGO,iDAAoB;;;;;;;;;YAA5B,UAA6B,MAAwB,EAAE,OAA0B,EAAE,aAAgC,EAAE,cAA8C;gBAAnK,iBAkBC;;oBAjBO,GAAG,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,GAAG,OAAO,CAAC,OAAO;gBAC7C,cAAc,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACjC,IAAI,aAAa,EAAE;oBACf,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,GAAG,EAAE,aAAa,CAAC,CAAC;iBACrD;;oBAEK,iBAAiB,GAAqB,OAAO,CAAC,iBAAiB;gBACrE,IAAI,CAAC,CAAC,iBAAiB,IAAI,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE;oBACrD,iBAAiB,CAAC,OAAO;;;uBAAC,UAAA,gBAAgB;;4BAChC,oBAAoB,GAAuB,gBAAgB,CAAC,oBAAoB;wBACtF,IAAI,CAAC,CAAC,oBAAoB,IAAI,oBAAoB,CAAC,MAAM,GAAG,CAAC,EAAE;4BAC3D,oBAAoB,CAAC,OAAO;;;+BAAC,UAAA,IAAI;gCAC7B,KAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,cAAc,CAAC,CAAC;6BACpE,EAAC,CAAA;yBACL;qBACJ,EAAC,CAAC;iBACN;aACJ;;;;;;;QAEM,iCAAI;;;;;;YAAX,UAAY,KAAY,EAAE,UAAkB,EAAE,gBAAuC;gBAArF,iBAoBC;gBAnBG,KAAK,CAAC,IAAI;;;;mBAAC,UAAC,CAAC,EAAE,CAAC;;wBACN,IAAI,GAAG,UAAU,GAAG,GAAG,GAAG,gBAAgB,CAAC,CAAC,CAAC;;wBAC7C,IAAI,GAAG,UAAU,GAAG,GAAG,GAAG,gBAAgB,CAAC,CAAC,CAAC;oBACnD,IAAI,CAAC,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;wBAEpF,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;qBACnC;yBAAM,IAAI,CAAC,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;wBAEhD,OAAO,CAAC,CAAC,CAAC;qBACb;yBAAM,IAAI,CAAC,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;wBAEhD,OAAO,CAAC,CAAC;qBACZ;yBAAM;;;4BAEG,MAAM,GAAG,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC;;4BAC/C,MAAM,GAAG,KAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC;wBACrD,OAAO,MAAM,GAAG,MAAM,CAAC;qBAC1B;iBACJ,EAAC,CAAC;aACN;;;;;;;;QAGM,uDAA0B;;;;;;YAAjC,UAAkC,aAAqB,EAAE,YAAoB;;oBACrE,UAAU,GAAG,IAAI,CAAC,iBAAiB,EAAE;gBACzC,OAAO,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;aACzE;;;;;;;;;QAGM,6CAAgB;;;;;;;YAAvB,UAAwB,aAAqB,EAAE,UAAkB,EAAE,YAAoB;;oBAC/E,OAAO,GAAsB,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,YAAY,CAAC;gBAC1E,IAAI,CAAC,OAAO,EAAE;oBACV,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,MAAM,GAAG,UAAU,GAAG,OAAO,GAAG,YAAY,GAAG,GAAG,CAAC,CAAC;oBACjH,OAAO,aAAa,CAAC;iBACxB;gBACD,IAAI,CAAC,OAAO,EAAE;oBACV,OAAO,aAAa,CAAC;iBACxB;gBAED,IAAI;;oBAEA,IAAI,CAAC,OAAO,CAAC,SAAS,IAAIE,gCAAkB,CAAC,OAAO,IAAI,OAAO,CAAC,SAAS,IAAIA,gCAAkB,CAAC,OAAO;2BAChG,aAAa,IAAI,aAAa,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;;;;4BAG3D,GAAG,GAAG,MAAM,CAAC,aAAa,CAAC;wBAC/B,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;4BACZ,OAAO,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,MAAM,GAAG,UAAU,GAAG,OAAO,GAAG,YAAY,GAAG,eAAe,GAAG,aAAa,CAAC,CAAC;4BACxI,OAAO,aAAa,CAAC;yBACxB;6BAAM;;gCACC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC;4BACvC,OAAO,MAAM,CAAC;yBACjB;qBACJ;;oBAGD,IAAI,OAAO,CAAC,SAAS,IAAIA,gCAAkB,CAAC,OAAO,EAAE;;wBAEjD,IAAI,aAAa,KAAK,IAAI,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE;4BACpF,OAAO,aAAa,CAAC;yBACxB;6BAAM,IAAI,aAAa,CAAC,WAAW,EAAE,IAAI,OAAO,EAAE;4BAC/C,OAAO,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;yBACpD;6BAAM,IAAI,aAAa,CAAC,WAAW,EAAE,IAAI,MAAM,EAAE;4BAC9C,OAAO,QAAQ,CAAC,gBAAgB,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;yBACrD;6BAAM;4BACH,OAAO,aAAa,CAAC;yBACxB;qBACJ;;oBAGD,IAAI,OAAO,CAAC,SAAS,IAAIA,gCAAkB,CAAC,IAAI,EAAE;wBAC9C,IAAI,aAAa,KAAK,IAAI,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE;;4BAEpF,OAAO,aAAa,CAAC;yBACxB;6BAAM;;gCACC,IAAI,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC;;gCAC9B,GAAG,GAAGC,cAAM,CAAC,IAAI,EAAE,YAAY,CAAC;4BACpC,OAAO,GAAG,CAAC;yBACd;qBACJ;;oBAGD,IAAI,OAAO,CAAC,SAAS,IAAID,gCAAkB,CAAC,QAAQ,EAAE;wBAClD,IAAI,aAAa,KAAK,IAAI,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE;;4BAEpF,OAAO,aAAa,CAAC;yBACxB;6BAAM;;gCACC,IAAI,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC;;gCAC9B,GAAG,GAAGC,cAAM,CAAC,IAAI,EAAE,qBAAqB,CAAC;4BAC7C,OAAO,GAAG,CAAC;yBACd;qBACJ;;oBAGD,IAAI,OAAO,CAAC,UAAU,IAAIC,kCAAoB,CAAC,IAAI,EAAE;;4BAC7C,UAAU,GAAmB,OAAO,CAAC,iBAAiB,IAAI,EAAE;;4BAC5D,SAAS,GAAG,UAAU,CAAC,IAAI;;;2BAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,KAAK,IAAI,aAAa,GAAA,EAAC;wBACpE,IAAI,SAAS,EAAE;4BACX,OAAO,SAAS,CAAC,IAAI,CAAC;yBACzB;6BAAM,IAAI,aAAa,KAAK,IAAI,IAAI,aAAa,KAAK,SAAS,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,EAAE;;4BAE3F,OAAO,aAAa,CAAC;yBACxB;6BAAM;;4BAEH,OAAO,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,MAAM,GAAG,UAAU,GAAG,OAAO,GAAG,YAAY,GAAG,eAAe,GAAG,aAAa,CAAC,CAAC;4BACxI,OAAO,aAAa,CAAC;yBACxB;qBACJ;oBAED,OAAO,aAAa,CAAC;iBACxB;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,MAAM,GAAG,UAAU,GAAG,OAAO,GAAG,YAAY,GAAG,MAAM,GAAG,aAAa,GAAG,SAAS,EAAE,KAAK,CAAC,CAAC;oBACpJ,OAAO,aAAa,CAAC;iBACxB;aACJ;;;;;;;;;;;;;;;;;;;;QAWO,6CAAgB;;;;;;;;;;;;YAAxB,UAAyB,GAAG;;oBACpB,CAAC,GAAG,GAAG,CAAC,aAAa,EAAE,CAAC,KAAK,CAAC,0BAA0B,CAAC;gBAC7D,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC/D;;;;QAEM,sCAAS;;;YAAhB;gBACI,OAAO,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC;aACxC;;;;QAEM,8CAAiB;;;YAAxB;gBACI,OAAO,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;aACzE;;;;;;QAEM,uCAAU;;;;;YAAjB,UAAkB,UAAkB,EAAE,YAAoB;;oBAClD,GAAG,GAAG,UAAU,GAAG,GAAG,GAAG,YAAY;gBACzC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aACvC;;;;;;QAEM,6CAAgB;;;;;YAAvB,UAAwB,UAAkB,EAAE,YAAoB;;oBACxD,GAAG,GAAG,UAAU,GAAG,GAAG,GAAG,YAAY;gBACzC,OAAO,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aAC7C;;;;;QAEM,mDAAsB;;;;YAA7B,UAA8B,UAAkB;;oBACxC,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,UAAU,CAAC;gBAC/C,OAAO,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,UAAU,CAAC;aAC9C;;;;;;QAEM,wDAA2B;;;;;YAAlC,UAAmC,UAAkB,EAAE,YAAoB;;oBACnE,GAAG,GAAG,UAAU,GAAG,GAAG,GAAG,YAAY;;oBACrC,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,GAAG,CAAC;gBACpD,IAAI,WAAW,IAAI,WAAW,CAAC,SAAS,IAAI,WAAW,CAAC,SAAS,IAAI,EAAE,EAAE;;oBAErE,OAAO,WAAW,CAAC,SAAS,CAAC;iBAChC;;;oBAEG,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC;gBACtC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC;aAC1C;QACL,yBAAC;IAAD,CAAC,IAAA;;;;;;;AC/QD;QAoBI,2BAAoB,IAAiB,EACzB,cAA8B,EAC9B,eAAqC,EACrC,oBAA0C,EAC1C,kBAAsC,EACtC,QAAkB;YALV,SAAI,GAAJ,IAAI,CAAa;YACzB,mBAAc,GAAd,cAAc,CAAgB;YAC9B,oBAAe,GAAf,eAAe,CAAsB;YACrC,yBAAoB,GAApB,oBAAoB,CAAsB;YAC1C,uBAAkB,GAAlB,kBAAkB,CAAoB;YACtC,aAAQ,GAAR,QAAQ,CAAU;YAPtB,oBAAe,GAAoC,IAAI,GAAG,EAAE,CAAC;SAQhE;;;;;;;QAGE,iDAAqB;;;;;YAA5B,UAA6B,IAAY;gBAAzC,iBAiBC;gBAhBG,IAAI,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;wBAC5B,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC;oBACvC,OAAOT,OAAE,CAAC,EAAE,CAAC,CAAC;iBACjB;qBAAM;;wBACC,QAAQ,GAAG,EAAE;oBACjB,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC;oBACpE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;oBAE9D,OAAOU,aAAQ,CAAC,QAAQ,CAAC,CAAC,IAAI,CAACT,aAAG;;;uBAAC,UAAA,IAAI;;4BAC7B,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;;4BACZ,aAAa,GAAyB,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE;;4BACnD,OAAO,GAAG,IAAI,kBAAkB,CAAC,EAAE,EAAE,aAAa,CAAC;wBACzD,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;wBACxC,OAAO,OAAO,CAAC;qBAClB,EAAC,CAAC,CAAC;iBACP;aACJ;;oBA9BJF,aAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;;wBAfzBG,cAAW;wBAAEC,iBAAc;wBAE3BC,uBAAoB;wBAWpB,oBAAoB;wBADpB,kBAAkB;wBAbNC,WAAQ;;;;gCAA7B;KAgBA;;;;;;;AChBA;QAkDE,kCAAoB,eAAqC,EAC/C,QAAkB,EAClB,oBAA0C,EAC1C,kBAAsC,EACtC,iBAAoC;YAJ1B,oBAAe,GAAf,eAAe,CAAsB;YAC/C,aAAQ,GAAR,QAAQ,CAAU;YAClB,yBAAoB,GAApB,oBAAoB,CAAsB;YAC1C,uBAAkB,GAAlB,kBAAkB,CAAoB;YACtC,sBAAiB,GAAjB,iBAAiB,CAAmB;YA7BrC,eAAU,GAAY,KAAK,CAAC;YAIrC,eAAU,GAAQ;gBAChB,OAAO,EAAE,IAAI;gBACb,OAAO,EAAE;oBACP,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE;iBAC7C;;;;gBAED,QAAQ,EAAE,8CAA8C;;;;gBAExD,UAAU,EAAE,+CAA+C;;;;gBAE3D,YAAY,EAAE,gDAAgD;gBAC9D,SAAS,EAAE,CAAC,CAAC;gBACb,QAAQ,EAAE,KAAK;gBACf,IAAI,EAAE,KAAK;gBACX,YAAY,EAAE,EAAE;aACjB,CAAC;SAWC;;;;QAEH,2CAAQ;;;YAAR;aACC;;;;;QAED,8CAAW;;;;YAAX,UAAY,OAAsB;gBAAlC,iBAgBC;gBAfC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE;;wBACX,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ;oBAC7B,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,SAAS;;;uBAAC,UAAA,OAAO;wBAClE,KAAI,CAAC,SAAS,GAAG,IAAI,gBAAgB,EAAE,CAAC,cAAc,CAAC,KAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;wBAC3E,KAAI,CAAC,QAAQ,GAAG,IAAI,gBAAgB,EAAE,CAAC,KAAK,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;wBAC7D,IAAI,KAAI,CAAC,kBAAkB,EAAE;;;4BAG3B,KAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,CAAC;yBAC3C;wBACD,UAAU;;2BAAC;4BACT,KAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;yBACzD,GAAE,CAAC,CAAC,CAAC;qBACP,EAAC,CAAA;iBACH;aACF;;;;;QAEM,sDAAmB;;;;YAA1B,UAA2B,MAAM;;oBACzB,IAAI,GAAkB,MAAM,CAAC,IAAI;gBACvC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,EAAE;;oBAE9D,OAAO;iBACR;gBACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;QAED,sBAAW,0DAAoB;;;gBAA/B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAA;aACnD;;;WAAA;QAED,sBAAW,8DAAwB;;;gBAAnC;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC;aACxD;;;WAAA;QAED,sBAAY,mDAAa;;;gBAAzB;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;aAC5C;;;WAAA;;oBAhFFM,YAAS,SAAC;wBACT,QAAQ,EAAE,mBAAmB;wBAC7B,0+DAAiD;;qBAElD;;;;;wBApBQP,uBAAoB;wBADTC,WAAQ;wBAUnB,oBAAoB;wBACpB,kBAAkB;wBAGlB,iBAAiB;;;;2BASvBO,QAAK;iCAELA,QAAK;yCACLC,YAAS,SAAC,WAAW;;QAwExB,+BAAC;KAjFD;;;;;;;ACjBA;QAUI,qBAA2B,OAAe,EAAS,IAAY,EAAU,WAAmB;YAAjE,YAAO,GAAP,OAAO,CAAQ;YAAS,SAAI,GAAJ,IAAI,CAAQ;YAAU,gBAAW,GAAX,WAAW,CAAQ;SAC3F;QAED,sBAAW,6BAAI;;;gBAAf;gBACI,OAAO,QAAQ,CAAC,gBAAgB,CAAC,oBAAoB,GAAG,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;aACxF;;;WAAA;;;;QAEa,kBAAM;;;YAApB;gBACI,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,CAAC,MAAM,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;aACpE;;;;QAEM,4BAAM;;;YAAb;gBACI,OAAO,IAAI,CAAC,IAAI,CAAC;aACpB;;;;;QAEa,iBAAK;;;;YAAnB,UAAoB,GAAQ;gBACxB,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI,EAAE;oBACnC,OAAO,IAAI,CAAC;iBACf;gBACD,IAAI,GAAG,YAAY,WAAW,EAAE;oBAC5B,OAAO,GAAG,CAAC;iBACd;gBACD,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;oBACzB,OAAO,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI;;;uBAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,IAAI,IAAI,GAAG,GAAA,EAAC,CAAC;iBAC1D;gBACD,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;oBACzB,OAAO,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI;;;uBAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,OAAO,IAAI,GAAG,GAAA,EAAC,CAAC;iBAC7D;gBACD,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE;oBACZ,OAAO,WAAW,CAAC,MAAM,EAAE,CAAC,IAAI;;;uBAAC,UAAA,EAAE,IAAI,OAAA,EAAE,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,GAAA,EAAC,CAAC;iBAC/D;gBACD,OAAO,IAAI,CAAC;aACf;;;;QAtCM,eAAG,GAAgB,IAAI,WAAW,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;;;;QAEnD,kBAAM,GAAgB,IAAI,WAAW,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;;;;QAEzD,kBAAM,GAAgB,IAAI,WAAW,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;QAmCpE,kBAAC;KAzCD;;ICFA;;;;;;;;;;;;;;IAcA;IAEA,IAAI,aAAa,GAAG,UAAS,CAAC,EAAE,CAAC;QAC7B,aAAa,GAAG,MAAM,CAAC,cAAc;aAChC,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;YAC5E,UAAU,CAAC,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;gBAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;oBAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/E,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;AAEF,aAAgB,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1B,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpB,SAAS,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;QACvC,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AAED,aA6EgB,QAAQ,CAAC,CAAC;QACtB,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAClE,IAAI,CAAC;YAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxB,OAAO;YACH,IAAI,EAAE;gBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM;oBAAE,CAAC,GAAG,KAAK,CAAC,CAAC;gBACnC,OAAO,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC;aAC3C;SACJ,CAAC;IACN,CAAC;;;;;;;ICnHD;QAAA;SAyBC;;;;;;;QAvBU,0BAAkB;;;;;YAAzB,UAA0B,GAAqB;gBAC3C,IAAI,CAAC,GAAG,EAAE;oBACN,OAAO,IAAI,CAAC;iBACf;;oBACG,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;gBAC7B,GAAG,CAAC,OAAO;;;;mBAAC,UAAC,KAAK,EAAE,GAAQ;oBACxB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;iBACpB,EAAC,CAAA;gBACF,OAAO,GAAG,CAAC;aACd;;;;;;;QAGM,0BAAkB;;;;;YAAzB,UAA0B,GAAQ;;gBAC9B,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI,EAAE;oBACnC,OAAO,IAAI,CAAC;iBACf;;oBAEG,MAAM,GAAG,IAAI,GAAG,EAAE;;oBACtB,KAAc,IAAA,KAAAC,SAAA,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA,gBAAA,4BAAE;wBAA3B,IAAI,CAAC,WAAA;wBACN,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;qBACzB;;;;;;;;;;;;;;;gBACD,OAAO,MAAM,CAAC;aACjB;QACL,cAAC;IAAD,CAAC,IAAA;;;;;;;ACzBD;QAaMC,UAAQ,GAAG,GAAG;;QACdC,UAAQ,GAAMD,UAAQ,2BAAwB;AAEpD;QAME,sBAAoB,IAAiB,EAC3B,cAA8B,EAC9B,QAAkB;YAFR,SAAI,GAAJ,IAAI,CAAa;YAC3B,mBAAc,GAAd,cAAc,CAAgB;YAC9B,aAAQ,GAAR,QAAQ,CAAU;YAJpB,0BAAqB,GAAqC,IAAI,GAAG,EAAE,CAAC;SAI3C;;;;;QAE1B,4CAAqB;;;;YAA5B,UAA6B,iBAAuC;gBAApE,iBA0BC;;oBAzBK,GAAG,GAAQ,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,iBAAiB,CAAC;gBACnD,IAAI,iBAAiB,CAAC,QAAQ,EAAE;oBAC9B,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;iBACvE;;oBAEG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;;oBAC1B,UAAU,GAAG,kBAAkB,CAAC,IAAI,CAAC;;oBACrC,GAAG,GAAMC,UAAQ,oBAAe,UAAY;gBAChD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAACf,aAAG;;;mBAAC,UAAA,IAAI;oBACrC,IAAI,CAAC,IAAI,EAAE;wBACT,OAAO,IAAI,CAAC;qBACb;;wBACG,WAAW,yCAA0D,IAAI,IAAA;oBAC7E,WAAW,IAAI,WAAW,CAAC,OAAO,IAAI,WAAW,CAAC,OAAO,CAAC,OAAO;;;uBAAC,UAAA,MAAM;;wBAEtE,IAAI,OAAO,MAAM,CAAC,QAAQ,IAAI,QAAQ,EAAE;4BACtC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;yBAC/C;wBAED,MAAM,CAAC,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;wBAC9D,MAAM,CAAC,UAAU,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;wBACnD,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;qBAC5D,EAAC,CAAA;oBACF,OAAO,WAAW,CAAC;iBACpB,EAAC,CAAC,CAAC;aACL;;;;;QAEM,kDAA2B;;;;YAAlC,UAAmC,IAAY;gBAA/C,iBAaC;gBAZC,IAAI,CAAC,IAAI,EAAE;oBACT,OAAOD,OAAE,CAAC,EAAE,CAAC,CAAC;iBACf;gBACD,IAAI,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;;oBAExC,OAAOA,OAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;iBACjD;qBAAM;;;wBAED,GAAG,GAAMgB,UAAQ,iCAA4B,IAAM;oBACvD,OAAO,wCAA4C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;yBAClE,IAAI,CAACV,aAAG;;;mBAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAA,EAAC,CAAC,CAAC;iBAClE;aACF;;;;;;;;QAGO,6BAAM;;;;;;YAAd,UAAe,IAAS;gBACtB,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;oBAC3B,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;iBACvB;qBAAM,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;oBAClC,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;iBACvB;qBAAM;oBACL,OAAO,IAAI,CAAC;iBACb;aACF;;;;;;QASM,oCAAa;;;;;YAApB,UAAqB,SAAuC,EAAE,UAAiB;gBAC7E,IAAI,SAAS,IAAI,IAAI,EAAE;oBACrB,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;iBACvC;gBACD,IAAI,SAAS,YAAY,MAAM,IAAI,OAAO,SAAS,IAAI,QAAQ,EAAE;oBAC/D,OAAO,IAAI,CAAC,iBAAiB,oBAAS,SAAS,IAAE,UAAU,CAAC,CAAC;iBAC9D;qBAAM;oBACL,OAAO,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;iBAC7C;aACF;;;;;;;QAEO,wCAAiB;;;;;;YAAzB,UAA0B,EAAU,EAAE,UAAgB;gBAAtD,iBAOC;;oBANK,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;;oBACjC,UAAU,GAAG,kBAAkB,CAAC,IAAI,CAAC;;oBACrC,GAAG,GAAMU,UAAQ,SAAI,EAAE,oBAAe,UAAY;gBACtD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAACf,aAAG;;;mBAAC,UAAA,IAAI;oBACrC,OAAO,KAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC;iBAC/C,EAAC,CAAC,CAAC;aACL;;;;;;QAEO,2CAAoB;;;;;YAA5B,UAA6B,KAA0B;gBAAvD,iBAcC;gBAbC,IAAI,KAAK,IAAI,IAAI,EAAE;oBACjB,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;iBACxD;;oBAEG,YAAY,GAAQ,EAAE;gBAC1B,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;;gBAEnC,YAAY,CAAC,OAAO,GAAG,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;;oBAE7D,GAAG,GAAG,KAAGe,UAAU;gBACvB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,IAAI,CAACf,aAAG;;;mBAAC,UAAA,IAAI;oBACpD,OAAO,KAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC;iBAC/C,EAAC,CAAC,CAAC;aACL;;;;;;QAEO,kDAA2B;;;;;YAAnC,UAAoC,IAAI;gBACtC,IAAI,CAAC,IAAI,EAAE;oBACT,OAAO,IAAI,CAAC;iBACb;;oBACG,EAAE,yCAAwD,IAAI,IAAA;;gBAElE,IAAI,OAAO,EAAE,CAAC,QAAQ,IAAI,QAAQ,EAAE;oBAClC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;iBACvC;gBACD,EAAE,CAAC,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;gBACtD,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;gBAC3C,EAAE,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;gBACnD,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,+BAA+B,CAAC,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;gBAC9D,OAAO,EAAE,CAAC;aACX;;;;;;QAEO,sDAA+B;;;;;YAAvC,UAAwC,IAAqB;gBAC3D,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;oBAC7B,OAAO,IAAI,CAAC;iBACb;gBAED,IAAI,CAAC,OAAO;;;mBAAC,UAAA,GAAG;oBACd,IAAI,CAAC,GAAG,EAAE;wBACR,OAAO;qBACR;oBACD,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;;oBAErD,IAAI,OAAO,GAAG,CAAC,QAAQ,IAAI,QAAQ,EAAE;wBACnC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;qBACzC;oBACD,GAAG,CAAC,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACxD,GAAG,CAAC,UAAU,GAAG,mBAAqB,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,UAAU,CAAC,MAAI,IAAI,GAAG,EAAE,CAAC;oBAC9F,GAAG,CAAC,UAAU,GAAG,mBAAqB,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,UAAU,CAAC,MAAI,IAAI,GAAG,EAAE,CAAC;iBAC/F,EAAC,CAAC;gBAEH,OAAO,IAAI,CAAC;aACb;;oBA/IFF,aAAU,SAAC;wBACV,UAAU,EAAE,MAAM;qBACnB;;;;;wBAjBQG,cAAW;wBAAEC,iBAAc;wBADfE,WAAQ;;;;2BAA7B;KAgBA;;;;;;;AChBA;QAAA;SAiBC;QAAD,2BAAC;IAAD,CAAC;;;;;;;ACfD;QAAA;SASC;QAAD,4BAAC;IAAD,CAAC;;;;;;;ICXD;QAAA;SAYC;;;;;QAXU,yBAAe;;;;YAAtB,UAAuB,CAAM;gBACzB,IAAI,CAAC,CAAC,EAAE;oBACJ,OAAO,EAAE,CAAC;iBACb;qBAAM,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE;oBACjB,OAAO,EAAE,CAAC;iBACb;qBAAM,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE;oBACzB,OAAO,EAAE,CAAC;iBACb;qBAAM;oBACH,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC;iBAC1B;aACJ;QACL,gBAAC;IAAD,CAAC,IAAA;;;;;;;ICZD;QAAA;SAkBC;;;;;QAjBiB,0BAAiB;;;;YAA/B,UAAgC,IAAS;;oBACjC,CAAC,GAAQ,IAAI,IAAI,CAAC,IAAI,CAAC;gBAC3B,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACd,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBAChB,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBAChB,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBACrB,OAAO,CAAC,CAAC;aACZ;;;;;QAEa,wBAAe;;;;YAA7B,UAA8B,IAAS;;oBAC/B,CAAC,GAAQ,IAAI,IAAI,CAAC,IAAI,CAAC;gBAC3B,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBACf,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACjB,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACjB,CAAC,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;gBACvB,OAAO,CAAC,CAAC;aACZ;QACL,eAAC;IAAD,CAAC,IAAA;;;;;;;AClBD;QA2CE,4BAAoB,YAA0B,EACpC,cAA+B,EAC/B,aAA4B,EAC5B,QAAkB;YAHR,iBAAY,GAAZ,YAAY,CAAc;YACpC,mBAAc,GAAd,cAAc,CAAiB;YAC/B,kBAAa,GAAb,aAAa,CAAe;YAC5B,aAAQ,GAAR,QAAQ,CAAU;YAzBmB,YAAO,GAAG,IAAI,CAAC;SA0B7D;;;;QAED,qCAAQ;;;YAAR;;oBACM,MAAM,GAAG,IAAI,qBAAqB,EAAE;gBACxC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;gBACjB,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACrB,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;gBACrB,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC;gBACpB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;aACtB;;;;;QAED,wCAAW;;;;YAAX,UAAY,OAAsB;gBAChC,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;;oBAEhD,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,eAAe,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;oBAC1D,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;iBAC7G;qBAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;;oBAE9B,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;iBACrE;qBAAM,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;;oBAEhC,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;iBACrE;gBACD,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE;;wBACf,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE;oBAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACrB;aACF;;;;QAEM,kCAAK;;;YAAZ;;oBACM,KAAK,GAAG,IAAI,CAAC,eAAe,EAAE;gBAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;aACrB;;;;;QAEO,4CAAe;;;;YAAvB;;oBACM,KAAK,GAAG,IAAI,oBAAoB,EAAE;gBACtC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;gBACpB,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACpB,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;gBAC/B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC3B,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;gBAC7C,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;gBACzC,OAAO,KAAK,CAAC;aACd;;;;;;QAEO,oCAAO;;;;;YAAf,UAAgB,KAAK;gBAArB,iBAQC;gBAPC,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,SAAS;;;mBAAC,UAAA,IAAI;oBAC3D,KAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;oBAC/B,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;iBACpB;;;mBAAE,UAAA,KAAK;oBACN,OAAO,CAAC,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;oBACnC,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,gCAAgC,EAAE,EAAE,YAAY,EAAE,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;iBACnI,EAAC,CAAC;aACJ;;;;;QAED,0CAAa;;;;YAAb,UAAc,MAAM;gBAClB,IAAI,CAAC,MAAM,EAAE;oBACX,OAAO;iBACR;gBAED,IAAI,MAAM,CAAC,SAAS,EAAE;oBACpB,IAAI,CAAC,iBAAiB,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;iBACrD;gBACD,IAAI,MAAM,CAAC,QAAQ,EAAE;oBACnB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;iBACnD;gBACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;aACtC;;;;;QAED,8CAAiB;;;;YAAjB,UAAkB,MAAM;gBACtB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,MAAM,CAAC;gBACzC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;aACtC;QAED,sBAAW,8CAAc;;;gBAAzB;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;aAC7C;;;WAAA;QAED,sBAAW,4CAAY;;;gBAAvB;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;aAC3C;;;WAAA;QAED,sBAAW,wCAAQ;;;gBAAnB;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;aACtC;;;WAAA;;oBApHFM,YAAS,SAAC;wBACT,QAAQ,EAAE,YAAY;wBACtB,w2FAA0C;;qBAE3C;;;;;wBAfQ,YAAY;wBAFZM,oBAAe;wBACfC,sBAAa;wBAHWb,WAAQ;;;;8BAqBtCc,cAAW,SAAC,gCAAgC;+BAE5CP,QAAK;6BAGLA,QAAK;sCAGLA,QAAK;oCAGLA,QAAK;6CAILA,QAAK;;QAgGR,yBAAC;KArHD;;;;;;;ACfA;QAcE,uCAAoB,QAAkB;YAAlB,aAAQ,GAAR,QAAQ,CAAU;YAF7B,eAAU,GAAY,KAAK,CAAC;SAGpC;;;;QAED,gDAAQ;;;YAAR;aACC;QAED,sBAAW,oEAAyB;;;gBAApC;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAAC;aACzD;;;WAAA;QACD,sBAAW,0DAAe;;;gBAA1B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;aAC9C;;;WAAA;QACD,sBAAW,0DAAe;;;gBAA1B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;aAC9C;;;WAAA;QACD,sBAAW,4DAAiB;;;gBAA5B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;aAChD;;;WAAA;;oBA3BFD,YAAS,SAAC;wBACT,QAAQ,EAAE,6BAA6B;wBACvC,87GAAuD;;qBAExD;;;;;wBARmBN,WAAQ;;;;oCAUzBO,QAAK;iCAELA,QAAK;;QAoBR,oCAAC;KA5BD;;;;;;;ACJA;QAqBE,+BAAoB,QAAkB;YAAlB,aAAQ,GAAR,QAAQ,CAAU;SACrC;;;;QAED,wCAAQ;;;YAAR;gBACE,IAAI,CAAC,OAAO,GAAG;oBACb,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,oBAAoB,EAAE;oBACpE,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,QAAQ,EAAE,IAAI,EAAE;oBAClF,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,mBAAmB,EAAE,QAAQ,EAAE,IAAI,EAAE;iBACnF,CAAC;;oBACE,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;;oBAC/B,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBAEnC,IAAI,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE;;;;wBAGpB,IAAI,GAAgB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW;oBAC/D,IAAI,IAAI,IAAI,WAAW,CAAC,GAAG,EAAE;wBAC3B,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBAC9B,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;qBAC7C;yBAAM,IAAI,IAAI,IAAI,WAAW,CAAC,MAAM,EAAE;wBACrC,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;wBAC9B,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;qBAC7C;iBACF;aACF;;;;;QAED,2CAAW;;;;YAAX,UAAY,OAAsB;;;oBAE5B,OAAoB;gBACxB,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;oBAC1B,OAAO,GAAG,IAAI,CAAC;iBAChB;qBAAM,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE;oBAC/C,OAAO,GAAG,IAAI,CAAC;iBAChB;qBAAM;oBACL,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,CAAC;iBACpE;;;oBAGG,OAAoB;gBACxB,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;oBAC1B,OAAO,GAAG,IAAI,CAAC;iBAChB;qBAAM,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,EAAE;oBAC9C,OAAO,GAAG,IAAI,CAAC;iBAChB;qBAAM;oBACL,OAAO,GAAG,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;iBACnE;gBAED,IAAI,OAAO,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAGnE;qBAAM,IAAI,OAAO,IAAI,WAAW,CAAC,GAAG,EAAE;oBACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;iBACjE;qBAAM,IAAI,OAAO,IAAI,WAAW,CAAC,MAAM,EAAE;oBACxC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;iBACjE;qBAAM;oBACL,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;oBACnE,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;iBACpE;gBAED,IAAI,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,YAAY,EAAE;oBAC/D,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC;iBACjE;aACF;QAED,sBAAY,uDAAoB;;;;gBAAhC;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;aACpD;;;WAAA;QAED,sBAAY,mDAAgB;;;;gBAA5B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;aAC/C;;;WAAA;QAED,sBAAY,sDAAmB;;;;gBAA/B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;aACnD;;;WAAA;QAED,sBAAY,sDAAmB;;;;gBAA/B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;aACnD;;;WAAA;;oBAlGFD,YAAS,SAAC;wBACT,QAAQ,EAAE,oBAAoB;wBAC9B,wNAA8C;;qBAE/C;;;;;wBAXmBN,WAAQ;;;;oCAazBO,QAAK;+BAELC,YAAS,SAAC,cAAc;;QA4F3B,4BAAC;KApGD;;;;;;;ACPA;QAsBE,yCAAoB,QAAkB;YAAlB,aAAQ,GAAR,QAAQ,CAAU;SAAK;;;;QAE3C,kDAAQ;;;YAAR;aACC;;oBArBFF,YAAS,SAAC;wBACT,QAAQ,EAAE,+BAA+B;wBACzC,qLAAyD;;qBAE1D;;;;;wBARmBN,WAAQ;;;;+BAUzBO,QAAK;6BAILA,QAAK;6CAILA,QAAK;;QASR,sCAAC;KAvBD;;;;;;;ACDA;QAAA;SAGC;QAAD,kCAAC;IAAD,CAAC,IAAA;;;;AAKD;;;QAAA;SAOC;QAAD,4BAAC;IAAD,CAAC;;;;;;;AClBD;QAWI,4BACY,QAAkC,EAClC,QAAkB,EAClB,YAA4B,EAC5B,eAAgC;YAHhC,aAAQ,GAAR,QAAQ,CAA0B;YAClC,aAAQ,GAAR,QAAQ,CAAU;YAClB,iBAAY,GAAZ,YAAY,CAAgB;YAC5B,oBAAe,GAAf,eAAe,CAAiB;SAE3C;;;;;;QAID,uCAAU;;;;;YAAV,UAAW,IAAoC,EAAE,MAAe;gBAC5D,IAAI,CAAC,IAAI,EAAE;oBACP,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;oBAC3D,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;iBAClD;gBACD,IAAI,IAAI,YAAY,MAAM,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;;wBAC/C,MAAM,GAAG,IAAI,qBAAqB,EAAE;oBACxC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;oBAClC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;oBACvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;iBACvB;qBAAM;oBACH,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBACrB;aACJ;;;;;;QAEO,mCAAM;;;;;YAAd,UAAe,MAA6B;gBACxC,IAAI,MAAM,CAAC,QAAQ,IAAI,IAAI,EAAE;oBACzB,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;oBACrD,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;iBAClD;;oBAEG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,+BAA+B,CAAC;;oBAC5E,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;;oBAClC,WAAW,GAAiB;oBAC5B,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,yBAAyB,CAAC;oBAClD,KAAK,EAAE,IAAI;oBACX,MAAM,EAAE,GAAG;oBACX,SAAS,EAAE,IAAI;oBACf,WAAW,EAAE,KAAK;oBAClB,aAAa,EAAE,IAAI;oBACnB,UAAU;;uBAAE;wBACR,OAAOZ,OAAE,CAAC,IAAI,CAAC,CAAC;qBACnB,CAAA;iBACJ;gBAED,MAAM,CAAC,QAAQ,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;gBAC3C,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;gBACvC,MAAM,CAAC,QAAQ,CAAC,sBAAsB,GAAG,MAAM,CAAC,sBAAsB,CAAC;;oBACnE,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC;aAC3D;;oBApDJD,aAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;;wBARbqB,2BAAwB;wBAAEf,WAAQ;wBAE9CgB,mBAAc;wBADdJ,oBAAe;;;;iCADxB;KAQA;;;;;;;ACRA;QAuDE,sCAAoB,YAA0B,EACpC,cAA+B,EAC/B,aAA4B,EAC5B,GAAsB,EACtB,iBAAoC,EACpC,QAAkB;YALR,iBAAY,GAAZ,YAAY,CAAc;YACpC,mBAAc,GAAd,cAAc,CAAiB;YAC/B,kBAAa,GAAb,aAAa,CAAe;YAC5B,QAAG,GAAH,GAAG,CAAmB;YACtB,sBAAiB,GAAjB,iBAAiB,CAAmB;YACpC,aAAQ,GAAR,QAAQ,CAAU;YA/BO,YAAO,GAAG,IAAI,CAAC;YAEzC,eAAU,GAAY,IAAI,CAAC;YAMpC,YAAO,GAAuB,EAAE,CAAC;YACjC,mBAAc,GAAwB,EAAE,CAAC;YAGzC,gBAAW,GAAyB,IAAIK,eAAY,EAAE,CAAC;YAEvD,oBAAe,GAAyB,IAAIA,eAAY,EAAE,CAAC;SAkB1D;;;;QAED,+CAAQ;;;YAAR;gBACE,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;aACnC;;;;;QAED,kDAAW;;;;YAAX,UAAY,OAAsB;gBAAlC,iBA4BC;gBA3BC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;;oBAEnB,OAAO;iBACR;;oBAEG,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC;;oBAC7D,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC;;oBAC3D,QAAQ,GAAG;oBACb,IAAI,CAAC,wBAAwB,CAAC,WAAW,CAAC;oBAC1C,IAAI,CAAC,oBAAoB,CAAC,YAAY,EAAE,WAAW,CAAC;iBACrD;gBACDZ,aAAQ,CAAC,QAAQ,CAAC,CAAC,SAAS;;;mBAAC,UAAA,IAAI;;wBAC3B,UAAU,GAA0B,OAAO,CAAC,MAAM,CAAC,YAAY;oBACnE,IAAI,CAAC,CAAC,UAAU,EAAE;wBAChB,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;qBACxC;;oBAGD,IAAI,WAAW,IAAI,IAAI,IAAI,WAAW,IAAI,YAAY,EAAE;wBACtD,KAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC;qBAC1D;yBAAM;wBACL,KAAI,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;qBACnC;iBACF;;;mBAAE,UAAA,GAAG;oBACJ,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,WAAW,GAAG,qBAAqB,EAAE,GAAG,CAAC,CAAC;oBAClE,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,gCAAgC,EAAE,EAAE,YAAY,EAAE,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;iBACjI,EAAC,CAAC;aACJ;;;;;;;;QAGO,+DAAwB;;;;;;YAAhC,UAAiC,QAAgB;gBAAjD,iBAMC;gBALC,IAAI,QAAQ,EAAE;oBACZ,OAAO,IAAI,CAAC,iBAAiB,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC,IAAI,CAACJ,aAAG;;;uBAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,kBAAkB,GAAG,IAAI,GAAA,EAAC,CAAC,CAAC;iBACjH;qBAAM;oBACL,OAAON,OAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;iBACpC;aACF;;;;;;;;;;;;QAOD,2DAAoB;;;;;;YAApB,UAAqB,YAAoB,EAAE,WAAmB;gBAA9D,iBAQC;gBAPC,IAAI,WAAW,IAAI,IAAI,IAAI,WAAW,IAAI,YAAY,EAAE;;oBAEtD,OAAO,IAAI,CAAC,YAAY,CAAC,2BAA2B,CAAC,WAAW,CAAC,CAAC,IAAI,CAACM,aAAG;;;uBAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,cAAc,GAAG,IAAI,IAAI,EAAE,GAAA,EAAC,CAAC,CAAC;iBACvH;qBAAM;;oBAEL,OAAON,OAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;iBAChC;aACF;;;;;;;;;;;;;;QAOO,oDAAa;;;;;;;;YAArB,UAAsB,OAA2B;gBAAjD,iBAmBC;gBAlBC,IAAI,CAAC,OAAO,EAAE;oBACZ,OAAO;iBACR;gBACD,OAAO,CAAC,OAAO;;;mBAAC,UAAA,MAAM;;wBAChB,WAAgB;oBACpB,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;oBACxC,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,IAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;;;wBAGrF,WAAW,GAAG,EAAE,CAAC;wBACjB,IAAI,KAAI,CAAC,cAAc,IAAI,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;4BACzD,WAAW,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;yBACtF;qBACF;yBAAM;wBACL,WAAW,GAAG,OAAO,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;qBAC3D;oBACD,oBAAM,MAAM,IAAE,WAAW,GAAG,WAAW,CAAC;iBACzC,EAAC,CAAA;aACH;;;;;;;;QAGO,wDAAiB;;;;;;YAAzB,UAA0B,QAA6B;gBAAvD,iBASC;gBARC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;oBACzC,OAAO;iBACR;gBACD,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO;;;mBAAC,UAAA,YAAY;;wBAC1C,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC;;wBAClC,aAAa,GAAG,KAAI,CAAC,kBAAkB,CAAC,0BAA0B,CAAC,KAAK,EAAE,YAAY,CAAC;oBAC3F,QAAQ,CAAC,GAAG,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;iBAC3C,EAAC,CAAA;aACH;;;;;;QAEO,kDAAW;;;;;YAAnB,UAAoB,MAA6B;gBAC/C,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;oBAC5D,OAAO,IAAI,CAAC;iBACb;qBAAM;oBACL,OAAO,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;iBACnC;aACF;;;;;;;QAEO,yDAAkB;;;;;;YAA1B,UAA2B,QAAgB,EAAE,OAA2B;;oBAClE,OAAO,GAAU;oBACnB,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,EAAE;oBACpF,EAAE,KAAK,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,0BAA0B,CAAC,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,MAAM,EAAE,QAAQ,CAAC,OAAO,CAAC,2BAA2B,CAAC,EAAE,EAAE,EAAE;oBAC7L,EAAE,KAAK,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE;oBACzF,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE;iBAAC;;;gBAG7G,IAAI,CAAC,cAAc,CAAC,OAAO;;;mBAAC,UAAC,KAAK;;wBAC5B,MAAM,GAAe;wBACvB,KAAK,EAAE,cAAc,GAAG,KAAK,CAAC,YAAY;wBAC1C,KAAK,EAAE,KAAK,CAAC,SAAS;wBACtB,KAAK,EAAE,GAAG;qBACX;oBACD,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACtB,EAAC,CAAA;;oBACE,QAAQ,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE;gBAC1I,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAEvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;gBACvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;aACxB;;;;;QAED,oDAAa;;;;YAAb,UAAc,MAAM;gBAClB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC/B;;;;;QAED,wDAAiB;;;;YAAjB,UAAkB,MAAM;gBACtB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACnC;;;;;QAED,4DAAqB;;;;YAArB,UAAsB,GAAG;gBAAzB,iBAoBC;;oBAnBK,MAAM,GAAqB,GAAG,CAAC,OAAO;gBAC1C,IAAI,CAAC,MAAM,EAAE;oBACX,OAAO;iBACR;gBACD,IAAI,CAAC,IAAI,CAAC,sBAAsB,EAAE;;oBAEhC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;iBAC/B;qBAAM;;wBACD,OAAK,GAAgC,IAAI,2BAA2B,EAAE;oBAC1E,OAAK,CAAC,MAAM,GAAG,MAAM,CAAC;oBACtB,IAAI,CAAC,sBAAsB,CAAC,OAAK,CAAC,CAAC,SAAS;;;uBAAC,UAAC,MAAM;wBAClD,IAAI,MAAM,EAAE;4BACV,KAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;yBAC/B;qBACF;;;uBAAE,UAAC,GAAG;wBACL,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,GAAG,CAAC,CAAC;wBACvC,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,kBAAkB,GAAG,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC;qBAChF,EAAC,CAAA;iBACH;aACF;;;;;;QAEO,uDAAgB;;;;;YAAxB,UAAyB,MAAwB;gBAAjD,iBAYC;gBAXC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC,SAAS;;;mBAAC,UAAA,IAAI;oBAC1E,IAAI,CAAC,IAAI,EAAE;wBACT,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,mCAAmC,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;qBAC1G;yBAAM;wBACL,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;wBAC7B,KAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC;qBAC7B;iBACF;;;mBAAE,UAAA,KAAK;oBACN,OAAO,CAAC,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;oBACnC,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,gCAAgC,EAAE,EAAE,YAAY,EAAE,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;iBACnI,EAAC,CAAA;aACH;QAED,sBAAW,6DAAmB;;;gBAA9B;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;aACnD;;;WAAA;QAED,sBAAW,iEAAuB;;;gBAAlC;gBACE,OAAO,QAAQ,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC;aACvD;;;WAAA;;oBAzNFW,YAAS,SAAC;wBACT,QAAQ,EAAE,2BAA2B;wBACrC,o4BAAqD;;qBAEtD;;;;;wBAtBQ,YAAY;wBAFZM,oBAAe;wBACfC,sBAAa;wBAJbK,oBAAiB;wBAkBjB,iBAAiB;wBAlBwClB,WAAQ;;;;8BA6BvEc,cAAW,SAAC,oBAAoB;6BAChCP,QAAK;iCACLA,QAAK;6CAELA,QAAK;kCAOLY,SAAM;sCAENA,SAAM;6BAINX,YAAS,SAAC,QAAQ;sCAClBA,YAAS,SAAC,iBAAiB;;QAkM9B,mCAAC;KA1ND;;;;;;;ACvBA,AAkCAY,6BAAkB,CAAC,EAAE,CAAC,CAAC;AAEvB;QAAA;SAsC4B;;oBAtC3BC,WAAQ,SAAC;wBACR,YAAY,EAAE,CAAC,wBAAwB,EAAE,kBAAkB,EAAE,6BAA6B,EAAE,qBAAqB,EAAE,+BAA+B,EAAE,4BAA4B,CAAC;wBACjL,OAAO,EAAE;4BACPC,mBAAY;4BACZC,iBAAW;4BACXC,oBAAe,CAAC,OAAO,EAAE;4BACzBC,yBAAc;4BACdC,kCAAsB;4BACtBC,yBAAc;4BACdC,2BAAe;4BACfC,6BAAmB;4BACnBC,mBAAc,CAAC,OAAO,EAAE;4BACxBC,qBAAY;4BACZC,2BAAkB;4BAClBC,mCAAsB;4BACtBC,yBAAsB;4BACtBC,6BAA0B,CAAC,OAAO,CAAC,EAAE,CAAC;yBACvC;wBACD,SAAS,EAAE;4BACTvB,oBAAe;4BACfC,sBAAa;4BACbhB,cAAW;4BACXC,iBAAc;4BACdsC,eAAY;4BACZ,kBAAkB;4BAClB,oBAAoB;4BACpB,kBAAkB;4BAClB,iBAAiB;4BACjB,YAAY;4BACZ,WAAW;yBACZ;wBACD,eAAe,EAAE;4BACf,wBAAwB;4BACxB,kBAAkB;4BAClB,+BAA+B;yBAChC;wBACD,OAAO,EAAE,CAAC,wBAAwB,EAAE,kBAAkB,EAAE,4BAA4B,CAAC;qBACtF;;QAC0B,kBAAC;KAtC5B;;;;;;;;QCjCA;SA+CC;QAAD,uBAAC;IAAD,CAAC,IAAA;;QAEyCC,wCAAgB;QAA1D;;SAEC;QAAD,2BAAC;IAAD,CAFA,CAA0C,gBAAgB;;;;;;;AClD1D;QAAA;SAkCC;QAAD,oBAAC;IAAD,CAAC;;;;;;;;;;ACjCD;;;QAAA;SAaC;QAAD,0BAAC;IAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
