/**
 * @fileoverview added by tsickle
 * Generated from: lib/chgdr-data-viewer/chgdr-data-viewer.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector, Input, ViewChild } from '@angular/core';
import { GSPMetadataRTService } from '@gsp-lcm/metadatart-selector';
import { ChangeDataHeader } from '../model/change-data-header';
import { ChgdrDataBuilder } from './chgdr-data-builder';
import { ChgdrTreeBuilder } from './chgdr-tree-builder';
import { TreeTableComponent } from '@farris/ui-treetable';
import { ChgdrMetadataService } from '../service/chgdr-metadata.service';
import { ChgdrConfigService } from '../service/chgdr-config.service';
import { ChgdrInnerService } from '../service/chgdr-inner.service';
import { I18nUtil } from '../service/i18n-service';
var ChgdrDataViewerComponent = /** @class */ (function () {
    function ChgdrDataViewerComponent(metadataService, injector, chgdrMetadataService, chgdrConfigService, chgdrInnerService) {
        this.metadataService = metadataService;
        this.injector = injector;
        this.chgdrMetadataService = chgdrMetadataService;
        this.chgdrConfigService = chgdrConfigService;
        this.chgdrInnerService = chgdrInnerService;
        this.showDataId = false;
        this.treeConfig = {
            idField: 'id',
            columns: [
                { field: 'name', title: 'Name', width: 200 }
            ],
            /**
             * 叶子节点图标
             */
            leafIcon: 'f-icon f-icon-page-title-type text-info mr-2',
            /**
             * 节点展开图标
             */
            expandIcon: 'f-icon f-icon-file-folder-open text-info mr-2',
            /**
             * 节点折叠图标
             */
            collapseIcon: 'f-icon f-icon-file-folder-close text-info mr-2',
            showLevel: -1,
            disabled: false,
            init: false,
            selectValues: []
        };
    }
    /**
     * @return {?}
     */
    ChgdrDataViewerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    ChgdrDataViewerComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (!!this.data) {
            /** @type {?} */
            var beId = this.data.entityId;
            this.chgdrInnerService.getChgdrConfigHandler(beId).subscribe((/**
             * @param {?} handler
             * @return {?}
             */
            function (handler) {
                _this.chgdrData = new ChgdrDataBuilder().buildChgdrData(_this.data, handler);
                _this.treeData = new ChgdrTreeBuilder().build(_this.chgdrData);
                if (_this.treeTableComponent) {
                    //移除已选中项。
                    //避免更换数据源后，treeGrid找不到之前的选中数据，导致控制台告警
                    _this.treeTableComponent.clearSelections();
                }
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.treeTableComponent.selectNode(_this.treeData[0].id);
                }), 0);
            }));
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ChgdrDataViewerComponent.prototype.handleTreeSelection = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        /** @type {?} */
        var node = $event.node;
        if (this.currentNode != null && this.currentNode.id == node.id) {
            //如果选中相同节点，直接返回
            return;
        }
        this.currentNode = node;
    };
    Object.defineProperty(ChgdrDataViewerComponent.prototype, "baseInfoSectionTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return I18nUtil.instant("base-info-section-title");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChgdrDataViewerComponent.prototype, "changeDetailSectionTitle", {
        get: /**
         * @return {?}
         */
        function () {
            return I18nUtil.instant("change-detail-section-title");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChgdrDataViewerComponent.prototype, "emptyDataText", {
        get: /**
         * @return {?}
         */
        function () {
            return I18nUtil.instant("empty-data-text");
        },
        enumerable: true,
        configurable: true
    });
    ChgdrDataViewerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'chgdr-data-viewer',
                    template: "<farris-splitter *ngIf=\"!!chgdrData\" class=\"row flex-fill farris-split-section\" style=\"margin: 0px;\">\r\n  <farris-splitter-pane [ngResizable]=true [rzMinWidth]=\"250\" [rzHandles]=\"'e'\" style=\"padding:0.3rem 0 0.3rem 0.3rem;\"\r\n    class=\"d-flex flex-column farris-lsection f-col-w4\">\r\n    <farris-treetable #treeTable class=\"f-utils-fill\" style=\"overflow-y: auto;\" [columns]=\"treeConfig.columns\" [showBorder]=\"false\" [showHeader]=\"false\"\r\n      [data]=\"treeData\" [idField]=\"treeConfig.idField\" [singleSelect]=\"true\" [showCheckbox]=\"false\"\r\n      [showIcon]=\"true\" [disabled]=\"treeConfig.disabled\" [checkOnSelect]=\"true\"\r\n      (nodeSelected)=\"handleTreeSelection($event)\" [leafIcon]=\"treeConfig.leafIcon\"\r\n      [expandIcon]=\"treeConfig.expandIcon\" [collapseIcon]=\"treeConfig.collapseIcon\"\r\n      [selectValues]=\"treeConfig.selectValues\">\r\n    </farris-treetable>\r\n  </farris-splitter-pane>\r\n  <farris-splitter-pane class=\"farris-rsection farris-overflow-y-auto f-utils-fill-flex-column\" style=\"padding:0 0 0 0.3rem\">\r\n    <farris-section [mainTitle]=\"baseInfoSectionTitle\" [enableMaximize]=\"false\" [enableAccordion]=\"'default'\">\r\n      <lib-chgdr-row-baseinfo-form [chgdrTreeNode]=\"currentNode\" [showDataId]=\"showDataId\"></lib-chgdr-row-baseinfo-form>\r\n    </farris-section>\r\n    <farris-section [mainTitle]=\"changeDetailSectionTitle\" [enableMaximize]=\"false\" [fill]=\"true\" class=\"pt-0\">\r\n      <lib-chgdr-row-grid *ngIf=\"!!currentNode && currentNode.chgdrRow.changes.length>0\" [chgdrTreeNode]=\"currentNode\" class=\"f-utils-fill\"></lib-chgdr-row-grid>\r\n      <div class=\"f-datagrid-norecords\" *ngIf=\"!currentNode || currentNode.chgdrRow.changes.length==0\" style=\"height: 250px;\">\r\n        <div class=\"f-datagrid-norecords-content\" style=\"width: 100%;\">\r\n            {{emptyDataText}}\r\n        </div>\r\n      </div>\r\n    </farris-section>\r\n  </farris-splitter-pane>\r\n</farris-splitter>",
                    styles: [":host{display:flex;height:100%}"]
                }] }
    ];
    /** @nocollapse */
    ChgdrDataViewerComponent.ctorParameters = function () { return [
        { type: GSPMetadataRTService },
        { type: Injector },
        { type: ChgdrMetadataService },
        { type: ChgdrConfigService },
        { type: ChgdrInnerService }
    ]; };
    ChgdrDataViewerComponent.propDecorators = {
        data: [{ type: Input }],
        showDataId: [{ type: Input }],
        treeTableComponent: [{ type: ViewChild, args: ["treeTable",] }]
    };
    return ChgdrDataViewerComponent;
}());
export { ChgdrDataViewerComponent };
if (false) {
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.data;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.showDataId;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.treeTableComponent;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.treeConfig;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.chgdrData;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.treeData;
    /** @type {?} */
    ChgdrDataViewerComponent.prototype.currentNode;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.metadataService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrMetadataService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrConfigService;
    /**
     * @type {?}
     * @private
     */
    ChgdrDataViewerComponent.prototype.chgdrInnerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvY2hnZHIvIiwic291cmNlcyI6WyJsaWIvY2hnZHItZGF0YS12aWV3ZXIvY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFvQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEcsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFcEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFJL0QsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGdCQUFnQixFQUFpQixNQUFNLHNCQUFzQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQzFELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQ3pFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBR3JFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUVuRDtJQWlDRSxrQ0FBb0IsZUFBcUMsRUFDL0MsUUFBa0IsRUFDbEIsb0JBQTBDLEVBQzFDLGtCQUFzQyxFQUN0QyxpQkFBb0M7UUFKMUIsb0JBQWUsR0FBZixlQUFlLENBQXNCO1FBQy9DLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBQ3RDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUE3QnJDLGVBQVUsR0FB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Qzs7SUFFOUMsOENBZUU7O0lBRUYsNkNBQXFCOztJQUNyQiw0Q0FBMEI7O0lBQzFCLCtDQUEyQjs7Ozs7SUFFZixtREFBNkM7Ozs7O0lBQ3ZELDRDQUEwQjs7Ozs7SUFDMUIsd0RBQWtEOzs7OztJQUNsRCxzREFBOEM7Ozs7O0lBQzlDLHFEQUE0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0b3IsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEdTUE1ldGFkYXRhUlRTZXJ2aWNlIH0gZnJvbSAnQGdzcC1sY20vbWV0YWRhdGFydC1zZWxlY3Rvcic7XHJcbmltcG9ydCB7IEdTUEJ1c2luZXNzRW50aXR5IH0gZnJvbSAnQGdzcC1iZWYvZ3NwLWJlLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgQ2hhbmdlRGF0YUhlYWRlciB9IGZyb20gJy4uL21vZGVsL2NoYW5nZS1kYXRhLWhlYWRlcic7XHJcbmltcG9ydCB7IENoYW5nZUNvbHVtbkl0ZW0sIENoZ2RyRGF0YSwgQ2hnZHJEYXRhRW50aXR5Tm9kZSwgQ2hnZHJEYXRhUm93Tm9kZSB9IGZyb20gJy4vY2hnZHItZGF0YSc7XHJcbmltcG9ydCB7IEdTUEFzc29jaWF0aW9uLCBHU1BDb21tb25FbGVtZW50LCBHU1BDb21tb25PYmplY3QsIElHU1BDb21tb25FbGVtZW50LCBJR1NQQ29tbW9uT2JqZWN0IH0gZnJvbSAnQGdzcC1iZWYvZ3NwLWNtLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgQ2hhbmdlRGF0YVJvdyB9IGZyb20gJy4uL21vZGVsL2NoYW5nZS1kYXRhLXJvdyc7XHJcbmltcG9ydCB7IENoZ2RyRGF0YUJ1aWxkZXIgfSBmcm9tICcuL2NoZ2RyLWRhdGEtYnVpbGRlcic7XHJcbmltcG9ydCB7IENoZ2RyVHJlZUJ1aWxkZXIsIENoZ2RyVHJlZU5vZGUgfSBmcm9tICcuL2NoZ2RyLXRyZWUtYnVpbGRlcic7XHJcbmltcG9ydCB7IFRyZWVUYWJsZUNvbXBvbmVudCB9IGZyb20gJ0BmYXJyaXMvdWktdHJlZXRhYmxlJztcclxuaW1wb3J0IHsgQ2hnZHJNZXRhZGF0YVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2NoZ2RyLW1ldGFkYXRhLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDaGdkckNvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL2NoZ2RyLWNvbmZpZy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgZm9ya0pvaW4gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQ2hnTG9nQ29uZmlnRW50aXR5IH0gZnJvbSAnLi4vbW9kZWwvY2hnZHItY29uZmlnLWVudGl0eSc7XHJcbmltcG9ydCB7IENoZ2RySW5uZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZS9jaGdkci1pbm5lci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgSTE4blV0aWwgfSBmcm9tICcuLi9zZXJ2aWNlL2kxOG4tc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2NoZ2RyLWRhdGEtdmlld2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vY2hnZHItZGF0YS12aWV3ZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2NoZ2RyLWRhdGEtdmlld2VyLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2hnZHJEYXRhVmlld2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpXHJcbiAgZGF0YTogQ2hhbmdlRGF0YUhlYWRlcjtcclxuICBASW5wdXQoKSBzaG93RGF0YUlkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQFZpZXdDaGlsZChcInRyZWVUYWJsZVwiKVxyXG4gIHByaXZhdGUgdHJlZVRhYmxlQ29tcG9uZW50OiBUcmVlVGFibGVDb21wb25lbnRcclxuXHJcbiAgdHJlZUNvbmZpZzogYW55ID0ge1xyXG4gICAgaWRGaWVsZDogJ2lkJyxcclxuICAgIGNvbHVtbnM6IFtcclxuICAgICAgeyBmaWVsZDogJ25hbWUnLCB0aXRsZTogJ05hbWUnLCB3aWR0aDogMjAwIH1cclxuICAgIF0sXHJcbiAgICAvKiog5Y+25a2Q6IqC54K55Zu+5qCHICovXHJcbiAgICBsZWFmSWNvbjogJ2YtaWNvbiBmLWljb24tcGFnZS10aXRsZS10eXBlIHRleHQtaW5mbyBtci0yJyxcclxuICAgIC8qKiDoioLngrnlsZXlvIDlm77moIcgKi9cclxuICAgIGV4cGFuZEljb246ICdmLWljb27CoGYtaWNvbi1maWxlLWZvbGRlci1vcGVuIHRleHQtaW5mbyBtci0yJyxcclxuICAgIC8qKiDoioLngrnmipjlj6Dlm77moIcgKi9cclxuICAgIGNvbGxhcHNlSWNvbjogJ2YtaWNvbsKgZi1pY29uLWZpbGUtZm9sZGVyLWNsb3NlIHRleHQtaW5mbyBtci0yJyxcclxuICAgIHNob3dMZXZlbDogLTEsXHJcbiAgICBkaXNhYmxlZDogZmFsc2UsXHJcbiAgICBpbml0OiBmYWxzZSxcclxuICAgIHNlbGVjdFZhbHVlczogW11cclxuICB9O1xyXG5cclxuICBjaGdkckRhdGE6IENoZ2RyRGF0YTtcclxuICB0cmVlRGF0YTogQ2hnZHJUcmVlTm9kZVtdO1xyXG4gIGN1cnJlbnROb2RlOiBDaGdkclRyZWVOb2RlO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1ldGFkYXRhU2VydmljZTogR1NQTWV0YWRhdGFSVFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICAgIHByaXZhdGUgY2hnZHJNZXRhZGF0YVNlcnZpY2U6IENoZ2RyTWV0YWRhdGFTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjaGdkckNvbmZpZ1NlcnZpY2U6IENoZ2RyQ29uZmlnU2VydmljZSxcclxuICAgIHByaXZhdGUgY2hnZHJJbm5lclNlcnZpY2U6IENoZ2RySW5uZXJTZXJ2aWNlKSB7XHJcbiAgICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKCEhdGhpcy5kYXRhKSB7XHJcbiAgICAgIGxldCBiZUlkID0gdGhpcy5kYXRhLmVudGl0eUlkO1xyXG4gICAgICB0aGlzLmNoZ2RySW5uZXJTZXJ2aWNlLmdldENoZ2RyQ29uZmlnSGFuZGxlcihiZUlkKS5zdWJzY3JpYmUoaGFuZGxlcj0+e1xyXG4gICAgICAgIHRoaXMuY2hnZHJEYXRhID0gbmV3IENoZ2RyRGF0YUJ1aWxkZXIoKS5idWlsZENoZ2RyRGF0YSh0aGlzLmRhdGEsIGhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMudHJlZURhdGEgPSBuZXcgQ2hnZHJUcmVlQnVpbGRlcigpLmJ1aWxkKHRoaXMuY2hnZHJEYXRhKTtcclxuICAgICAgICBpZiAodGhpcy50cmVlVGFibGVDb21wb25lbnQpIHtcclxuICAgICAgICAgIC8v56e76Zmk5bey6YCJ5Lit6aG544CCXHJcbiAgICAgICAgICAvL+mBv+WFjeabtOaNouaVsOaNrua6kOWQju+8jHRyZWVHcmlk5om+5LiN5Yiw5LmL5YmN55qE6YCJ5Lit5pWw5o2u77yM5a+86Ie05o6n5Yi25Y+w5ZGK6K2mXHJcbiAgICAgICAgICB0aGlzLnRyZWVUYWJsZUNvbXBvbmVudC5jbGVhclNlbGVjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnRyZWVUYWJsZUNvbXBvbmVudC5zZWxlY3ROb2RlKHRoaXMudHJlZURhdGFbMF0uaWQpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGhhbmRsZVRyZWVTZWxlY3Rpb24oJGV2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBub2RlOiBDaGdkclRyZWVOb2RlID0gJGV2ZW50Lm5vZGU7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSAhPSBudWxsICYmIHRoaXMuY3VycmVudE5vZGUuaWQgPT0gbm9kZS5pZCkge1xyXG4gICAgICAvL+WmguaenOmAieS4reebuOWQjOiKgueCue+8jOebtOaOpei/lOWbnlxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlID0gbm9kZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgYmFzZUluZm9TZWN0aW9uVGl0bGUoKXtcclxuICAgIHJldHVybiBJMThuVXRpbC5pbnN0YW50KFwiYmFzZS1pbmZvLXNlY3Rpb24tdGl0bGVcIilcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgY2hhbmdlRGV0YWlsU2VjdGlvblRpdGxlKCl7XHJcbiAgICByZXR1cm4gSTE4blV0aWwuaW5zdGFudChcImNoYW5nZS1kZXRhaWwtc2VjdGlvbi10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgIGVtcHR5RGF0YVRleHQoKXtcclxuICAgIHJldHVybiBJMThuVXRpbC5pbnN0YW50KFwiZW1wdHktZGF0YS10ZXh0XCIpO1xyXG4gIH1cclxufVxyXG4iXX0=