/**
 * @fileoverview added by tsickle
 * Generated from: lib/chgdr-row-grid/chgdr-row-grid.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector, Input, ViewChild } from '@angular/core';
import { DatagridComponent } from '@farris/ui-datagrid';
import { ChgdrTreeNode } from '../chgdr-data-viewer/chgdr-tree-builder';
import { OperateType } from '../model/operate-type';
import { I18nUtil } from '../service/i18n-service';
var ChgdrRowGridComponent = /** @class */ (function () {
    function ChgdrRowGridComponent(injector) {
        this.injector = injector;
    }
    /**
     * @return {?}
     */
    ChgdrRowGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.columns = [
            { field: 'fieldName', width: 130, title: this.fieldNameColumnTitle },
            { field: 'oldValue', width: 130, title: this.oldValueColumnTitle, showTips: true },
            { field: 'newValue', width: 130, title: this.newValueColumnTitle, showTips: true }
        ];
        /** @type {?} */
        var oldValueField = this.columns[1];
        /** @type {?} */
        var newValueField = this.columns[2];
        if (!!this.chgdrTreeNode) {
            //根据初始的变更类型更改显示列的信息
            //此处不能直接调用DataGrid组件的方法更改，因为此处尚未创建DataGrid
            /** @type {?} */
            var type = this.chgdrTreeNode.chgdrRow.operateType;
            if (type == OperateType.ADD) {
                oldValueField.visible = false;
                newValueField.title = this.valueColumnTitle;
            }
            else if (type == OperateType.DELETE) {
                newValueField.visible = false;
                oldValueField.title = this.valueColumnTitle;
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    ChgdrRowGridComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        //原来变更行类型
        /** @type {?} */
        var oldType;
        if (!changes.chgdrTreeNode) {
            oldType = null;
        }
        else if (!changes.chgdrTreeNode.previousValue) {
            oldType = null;
        }
        else {
            oldType = changes.chgdrTreeNode.previousValue.chgdrRow.operateType;
        }
        //现在变更行类型
        /** @type {?} */
        var newType;
        if (!changes.chgdrTreeNode) {
            newType = null;
        }
        else if (!changes.chgdrTreeNode.currentValue) {
            newType = null;
        }
        else {
            newType = changes.chgdrTreeNode.currentValue.chgdrRow.operateType;
        }
        if (oldType == newType || !this.dataGrid || !this.dataGrid.columns) {
            //如果新老类型一致(或DataGrid尚未创建)，则不变动
            //do nothing
        }
        else if (newType == OperateType.ADD) {
            this.dataGrid.showColumn("newValue");
            this.dataGrid.hideColumn("oldValue");
            this.dataGrid.setColumnTitle("newValue", this.valueColumnTitle);
        }
        else if (newType == OperateType.DELETE) {
            this.dataGrid.showColumn("oldValue");
            this.dataGrid.hideColumn("newValue");
            this.dataGrid.setColumnTitle("oldValue", this.valueColumnTitle);
        }
        else {
            this.dataGrid.showColumn("oldValue");
            this.dataGrid.showColumn("newValue");
            this.dataGrid.setColumnTitle("oldValue", this.oldValueColumnTitle);
            this.dataGrid.setColumnTitle("newValue", this.newValueColumnTitle);
        }
        if (changes.chgdrTreeNode && changes.chgdrTreeNode.currentValue) {
            this.data = changes.chgdrTreeNode.currentValue.chgdrRow.changes;
        }
    };
    Object.defineProperty(ChgdrRowGridComponent.prototype, "fieldNameColumnTitle", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return I18nUtil.instant("field-name-column-title");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChgdrRowGridComponent.prototype, "valueColumnTitle", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return I18nUtil.instant("value-column-title");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChgdrRowGridComponent.prototype, "oldValueColumnTitle", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return I18nUtil.instant("old-value-column-title");
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChgdrRowGridComponent.prototype, "newValueColumnTitle", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return I18nUtil.instant("new-value-column-title");
        },
        enumerable: true,
        configurable: true
    });
    ChgdrRowGridComponent.decorators = [
        { type: Component, args: [{
                    selector: 'lib-chgdr-row-grid',
                    template: "<farris-datagrid \r\n   #chgdrRowGrid \r\n   idField=\"fieldLabel\" \r\n   [columns]=\"columns\" \r\n   [data]=\"data\" \r\n   [fit]=\"true\"\r\n   [fitColumns]=\"true\"\r\n   [pagination]=\"false\" \r\n>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ChgdrRowGridComponent.ctorParameters = function () { return [
        { type: Injector }
    ]; };
    ChgdrRowGridComponent.propDecorators = {
        chgdrTreeNode: [{ type: Input }],
        dataGrid: [{ type: ViewChild, args: ["chgdrRowGrid",] }]
    };
    return ChgdrRowGridComponent;
}());
export { ChgdrRowGridComponent };
if (false) {
    /** @type {?} */
    ChgdrRowGridComponent.prototype.chgdrTreeNode;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.dataGrid;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.columns;
    /** @type {?} */
    ChgdrRowGridComponent.prototype.data;
    /**
     * @type {?}
     * @private
     */
    ChgdrRowGridComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hnZHItcm93LWdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1jbXAvY2hnZHIvIiwic291cmNlcyI6WyJsaWIvY2hnZHItcm93LWdyaWQvY2hnZHItcm93LWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFvQyxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFbkQ7SUFjRSwrQkFBb0IsUUFBa0I7UUFBbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtJQUN0QyxDQUFDOzs7O0lBRUQsd0NBQVE7OztJQUFSO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNiLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7WUFDcEUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFO1lBQ2xGLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtTQUNuRixDQUFDOztZQUNFLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzs7WUFDL0IsYUFBYSxHQUFHLElBQUksQ0FBQyxP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R0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1NBQ2pFO0lBQ0gsQ0FBQztJQUVELHNCQUFZLHVEQUFvQjs7Ozs7UUFBaEM7WUFDRSxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUNyRCxDQUFDOzs7T0FBQTtJQUVELHNCQUFZLG1EQUFnQjs7Ozs7UUFBNUI7WUFDRSxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNoRCxDQUFDOzs7T0FBQTtJQUVELHNCQUFZLHNEQUFtQjs7Ozs7UUFBL0I7WUFDRSxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUNwRCxDQUFDOzs7T0FBQTtJQUVELHNCQUFZLHNEQUFtQjs7Ozs7UUFBL0I7WUFDRSxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUNwRCxDQUFDOzs7T0FBQTs7Z0JBbEdGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsb0JBQW9CO29CQUM5Qix3TkFBOEM7O2lCQUUvQzs7OztnQkFYbUIsUUFBUTs7O2dDQWF6QixLQUFLOzJCQUVMLFNBQVMsU0FBQyxjQUFjOztJQTRGM0IsNEJBQUM7Q0FBQSxBQXBHRCxJQW9HQztTQS9GWSxxQkFBcUI7OztJQUNoQyw4Q0FDNkI7O0lBQzdCLHlDQUM0Qjs7SUFFNUIsd0NBQWU7O0lBQ2YscUNBQXlCOzs7OztJQUViLHlDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0b3IsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERhdGFncmlkQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kYXRhZ3JpZCc7XHJcbmltcG9ydCB7IENoYW5nZUNvbHVtbkl0ZW0sIENoZ2RyRGF0YVJvd05vZGUgfSBmcm9tICcuLi9jaGdkci1kYXRhLXZpZXdlci9jaGdkci1kYXRhJztcclxuaW1wb3J0IHsgQ2hnZHJUcmVlTm9kZSB9IGZyb20gJy4uL2NoZ2RyLWRhdGEtdmlld2VyL2NoZ2RyLXRyZWUtYnVpbGRlcic7XHJcbmltcG9ydCB7IE9wZXJhdGVUeXBlIH0gZnJvbSAnLi4vbW9kZWwvb3BlcmF0ZS10eXBlJztcclxuaW1wb3J0IHsgSTE4blV0aWwgfSBmcm9tICcuLi9zZXJ2aWNlL2kxOG4tc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2xpYi1jaGdkci1yb3ctZ3JpZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2NoZ2RyLXJvdy1ncmlkLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9jaGdkci1yb3ctZ3JpZC5jb21wb25lbnQuY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIENoZ2RyUm93R3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuICBASW5wdXQoKVxyXG4gIGNoZ2RyVHJlZU5vZGU6IENoZ2RyVHJlZU5vZGU7XHJcbiAgQFZpZXdDaGlsZChcImNoZ2RyUm93R3JpZFwiKVxyXG4gIGRhdGFHcmlkOiBEYXRhZ3JpZENvbXBvbmVudDtcclxuXHJcbiAgY29sdW1uczogYW55W107XHJcbiAgZGF0YTogQ2hhbmdlQ29sdW1uSXRlbVtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmNvbHVtbnMgPSBbXHJcbiAgICAgIHsgZmllbGQ6ICdmaWVsZE5hbWUnLCB3aWR0aDogMTMwLCB0aXRsZTogdGhpcy5maWVsZE5hbWVDb2x1bW5UaXRsZSB9LFxyXG4gICAgICB7IGZpZWxkOiAnb2xkVmFsdWUnLCB3aWR0aDogMTMwLCB0aXRsZTogdGhpcy5vbGRWYWx1ZUNvbHVtblRpdGxlLCBzaG93VGlwczogdHJ1ZSB9LFxyXG4gICAgICB7IGZpZWxkOiAnbmV3VmFsdWUnLCB3aWR0aDogMTMwLCB0aXRsZTogdGhpcy5uZXdWYWx1ZUNvbHVtblRpdGxlLCBzaG93VGlwczogdHJ1ZSB9XHJcbiAgICBdO1xyXG4gICAgbGV0IG9sZFZhbHVlRmllbGQgPSB0aGlzLmNvbHVtbnNbMV07XHJcbiAgICBsZXQgbmV3VmFsdWVGaWVsZCA9IHRoaXMuY29sdW1uc1syXTtcclxuXHJcbiAgICBpZiAoISF0aGlzLmNoZ2RyVHJlZU5vZGUpIHtcclxuICAgICAgLy/moLnmja7liJ3lp4vnmoTlj5jmm7Tnsbvlnovmm7TmlLnmmL7npLrliJfnmoTkv6Hmga9cclxuICAgICAgLy/mraTlpITkuI3og73nm7TmjqXosIPnlKhEYXRhR3JpZOe7hOS7tueahOaWueazleabtOaUue+8jOWboOS4uuatpOWkhOWwmuacquWIm+W7ukRhdGFHcmlkXHJcbiAgICAgIGxldCB0eXBlOiBPcGVyYXRlVHlwZSA9IHRoaXMuY2hnZHJUcmVlTm9kZS5jaGdkclJvdy5vcGVyYXRlVHlwZTtcclxuICAgICAgaWYgKHR5cGUgPT0gT3BlcmF0ZVR5cGUuQUREKSB7XHJcbiAgICAgICAgb2xkVmFsdWVGaWVsZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgbmV3VmFsdWVGaWVsZC50aXRsZSA9IHRoaXMudmFsdWVDb2x1bW5UaXRsZTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlID09IE9wZXJhdGVUeXBlLkRFTEVURSkge1xyXG4gICAgICAgIG5ld1ZhbHVlRmllbGQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIG9sZFZhbHVlRmllbGQudGl0bGUgPSB0aGlzLnZhbHVlQ29sdW1uVGl0bGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIC8v5Y6f5p2l5Y+Y5pu06KGM57G75Z6LXHJcbiAgICBsZXQgb2xkVHlwZTogT3BlcmF0ZVR5cGU7XHJcbiAgICBpZiAoIWNoYW5nZXMuY2hnZHJUcmVlTm9kZSkge1xyXG4gICAgICBvbGRUeXBlID0gbnVsbDtcclxuICAgIH0gZWxzZSBpZiAoIWNoYW5nZXMuY2hnZHJUcmVlTm9kZS5wcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgIG9sZFR5cGUgPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb2xkVHlwZSA9IGNoYW5nZXMuY2hnZHJUcmVlTm9kZS5wcmV2aW91c1ZhbHVlLmNoZ2RyUm93Lm9wZXJhdGVUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8v546w5Zyo5Y+Y5pu06KGM57G75Z6LXHJcbiAgICBsZXQgbmV3VHlwZTogT3BlcmF0ZVR5cGU7XHJcbiAgICBpZiAoIWNoYW5nZXMuY2hnZHJUcmVlTm9kZSkge1xyXG4gICAgICBuZXdUeXBlID0gbnVsbDtcclxuICAgIH0gZWxzZSBpZiAoIWNoYW5nZXMuY2hnZHJUcmVlTm9kZS5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgbmV3VHlwZSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuZXdUeXBlID0gY2hhbmdlcy5jaGdkclRyZWVOb2RlLmN1cnJlbnRWYWx1ZS5jaGdkclJvdy5vcGVyYXRlVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob2xkVHlwZSA9PSBuZXdUeXBlIHx8ICF0aGlzLmRhdGFHcmlkIHx8ICF0aGlzLmRhdGFHcmlkLmNvbHVtbnMpIHtcclxuICAgICAgLy/lpoLmnpzmlrDogIHnsbvlnovkuIDoh7Qo5oiWRGF0YUdyaWTlsJrmnKrliJvlu7op77yM5YiZ5LiN5Y+Y5YqoXHJcbiAgICAgIC8vZG8gbm90aGluZ1xyXG4gICAgfSBlbHNlIGlmIChuZXdUeXBlID09IE9wZXJhdGVUeXBlLkFERCkge1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLnNob3dDb2x1bW4oXCJuZXdWYWx1ZVwiKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5oaWRlQ29sdW1uKFwib2xkVmFsdWVcIik7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2V0Q29sdW1uVGl0bGUoXCJuZXdWYWx1ZVwiLCB0aGlzLnZhbHVlQ29sdW1uVGl0bGUpO1xyXG4gICAgfSBlbHNlIGlmIChuZXdUeXBlID09IE9wZXJhdGVUeXBlLkRFTEVURSkge1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLnNob3dDb2x1bW4oXCJvbGRWYWx1ZVwiKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5oaWRlQ29sdW1uKFwibmV3VmFsdWVcIik7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2V0Q29sdW1uVGl0bGUoXCJvbGRWYWx1ZVwiLCB0aGlzLnZhbHVlQ29sdW1uVGl0bGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5zaG93Q29sdW1uKFwib2xkVmFsdWVcIik7XHJcbiAgICAgIHRoaXMuZGF0YUdyaWQuc2hvd0NvbHVtbihcIm5ld1ZhbHVlXCIpO1xyXG4gICAgICB0aGlzLmRhdGFHcmlkLnNldENvbHVtblRpdGxlKFwib2xkVmFsdWVcIiwgdGhpcy5vbGRWYWx1ZUNvbHVtblRpdGxlKTtcclxuICAgICAgdGhpcy5kYXRhR3JpZC5zZXRDb2x1bW5UaXRsZShcIm5ld1ZhbHVlXCIsIHRoaXMubmV3VmFsdWVDb2x1bW5UaXRsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYW5nZXMuY2hnZHJUcmVlTm9kZSAmJiBjaGFuZ2VzLmNoZ2RyVHJlZU5vZGUuY3VycmVudFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IGNoYW5nZXMuY2hnZHJUcmVlTm9kZS5jdXJyZW50VmFsdWUuY2hnZHJSb3cuY2hhbmdlcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IGZpZWxkTmFtZUNvbHVtblRpdGxlKCkge1xyXG4gICAgcmV0dXJuIEkxOG5VdGlsLmluc3RhbnQoXCJmaWVsZC1uYW1lLWNvbHVtbi10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IHZhbHVlQ29sdW1uVGl0bGUoKSB7XHJcbiAgICByZXR1cm4gSTE4blV0aWwuaW5zdGFudChcInZhbHVlLWNvbHVtbi10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IG9sZFZhbHVlQ29sdW1uVGl0bGUoKSB7XHJcbiAgICByZXR1cm4gSTE4blV0aWwuaW5zdGFudChcIm9sZC12YWx1ZS1jb2x1bW4tdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBuZXdWYWx1ZUNvbHVtblRpdGxlKCkge1xyXG4gICAgcmV0dXJuIEkxOG5VdGlsLmluc3RhbnQoXCJuZXctdmFsdWUtY29sdW1uLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbn1cclxuIl19