/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * 云打印函数工具类
 */
export class PrintFunctionUtils {
    /**
     * 将数字转为汉字
     * @param {?} number 数值
     * @return {?}
     */
    static FormatToCurrencyNumber(number) {
        /** @type {?} */
        var result = PrintFunctionUtils.FormatToCurrencyNumberCN(number);
        // 把类似 【一十二】中的一去掉，改为【十二】
        if (result.startsWith('一十')) {
            result = result.substring(1);
        }
        return result;
    }
    /**
     * 将数字转换为汉字
     * @param {?} number 数值
     * @return {?}
     */
    static FormatToCurrencyNumberCN(number) {
        /** @type {?} */
        var res = PrintFunctionUtils.ConvertCurrency(number);
        /** @type {?} */
        var result = res;
        result = result.replace(new RegExp("壹", "gm"), "一");
        result = result.replace(new RegExp("贰", "gm"), "二");
        result = result.replace(new RegExp("叁", "gm"), "三");
        result = result.replace(new RegExp("肆", "gm"), "四");
        result = result.replace(new RegExp("伍", "gm"), "五");
        result = result.replace(new RegExp("陆", "gm"), "六");
        result = result.replace(new RegExp("柒", "gm"), "七");
        result = result.replace(new RegExp("捌", "gm"), "八");
        result = result.replace(new RegExp("玖", "gm"), "九");
        result = result.replace(new RegExp("拾", "gm"), "十");
        result = result.replace(new RegExp("佰", "gm"), "百");
        result = result.replace(new RegExp("仟", "gm"), "千");
        result = result.replace("元", "点");
        result = result.replace("角", "");
        result = result.replace("分", "");
        result = result.replace("整", "");
        if (result[result.length - 1] == '点') {
            result = result.substring(0, result.length - 1);
        }
        return result;
    }
    /**
     * @param {?} money
     * @return {?}
     */
    static ConvertCurrency(money) {
        //汉字的数字
        /** @type {?} */
        var cnNums = new Array('零', '壹', '贰', '叁', '肆', '伍', '陆', '柒', '捌', '玖');
        //基本单位
        /** @type {?} */
        var cnIntRadice = new Array('', '拾', '佰', '仟');
        //对应整数部分扩展单位
        /** @type {?} */
        var cnIntUnits = new Array('', '万', '亿', '兆');
        //对应小数部分单位
        /** @type {?} */
        var cnDecUnits = new Array('角', '分', '毫', '厘');
        //整数金额时后面跟的字符
        /** @type {?} */
        var cnInteger = '整';
        //整型完以后的单位
        /** @type {?} */
        var cnIntLast = '元';
        //最大处理的数字
        /** @type {?} */
        var maxNum = 999999999999999.9999;
        //金额整数部分
        /** @type {?} */
        var integerNum;
        //金额小数部分
        /** @type {?} */
        var decimalNum;
        //输出的中文金额字符串
        /** @type {?} */
        var chineseStr = '';
        //分离金额后用的数组，预定义
        /** @type {?} */
        var parts;
        if (money == '') {
            return '';
        }
        money = parseFloat(money);
        if (money >= maxNum) {
            //超出最大处理数字
            return '';
        }
        if (money == 0) {
            chineseStr = cnNums[0] + cnIntLast + cnInteger;
            return chineseStr;
        }
        //转换为字符串
        money = money.toString();
        if (money.indexOf('.') == -1) {
            integerNum = money;
            decimalNum = '';
        }
        else {
            parts = money.split('.');
            integerNum = parts[0];
            decimalNum = parts[1].substr(0, 4);
        }
        //获取整型部分转换
        if (parseInt(integerNum, 10) > 0) {
            /** @type {?} */
            var zeroCount = 0;
            /** @type {?} */
            var IntLen = integerNum.length;
            for (var i = 0; i < IntLen; i++) {
                /** @type {?} */
                var n = integerNum.substr(i, 1);
                /** @type {?} */
                var p = IntLen - i - 1;
                /** @type {?} */
                var q = p / 4;
                /** @type {?} */
                var m = p % 4;
                if (n == '0') {
                    zeroCount++;
                }
                else {
                    if (zeroCount > 0) {
                        chineseStr += cnNums[0];
                    }
                    //归零
                    zeroCount = 0;
                    chineseStr += cnNums[parseInt(n)] + cnIntRadice[m];
                }
                if (m == 0 && zeroCount < 4) {
                    chineseStr += cnIntUnits[q];
                }
            }
            chineseStr += cnIntLast;
        }
        //小数部分
        if (decimalNum != '') {
            /** @type {?} */
            var decLen = decimalNum.length;
            //处理到分
            if (decLen > 2) {
                decLen = 2;
            }
            for (var i = 0; i < decLen; i++) {
                /** @type {?} */
                var n = decimalNum.substr(i, 1);
                if (n != '0') {
                    chineseStr += cnNums[Number(n)] + cnDecUnits[i];
                }
            }
        }
        if (chineseStr == '') {
            chineseStr += cnNums[0] + cnIntLast + cnInteger;
        }
        else if (decimalNum == '') {
            chineseStr += cnInteger;
        }
        return chineseStr;
    }
    /**
     * 将数值格式化为中文大写货币金额，形如【壹拾万柒仟元零伍角叁分】
     * @param {?} money
     * @return {?}
     */
    static FormatToCurrencyCN(money) {
        return PrintFunctionUtils.ConvertCurrency(money);
    }
    /**
     * @param {?} money
     * @return {?}
     */
    static FormatToCurrency(money) {
        /** @type {?} */
        let str = this.FormatToCurrencyCN(money);
        str = str.replace('零', '');
        return str;
    }
    /**
     * @private
     * @param {?} str
     * @param {?} item
     * @param {?} index
     * @return {?}
     */
    static insert_item(str, item, index) {
        // 初始化一个空字符串
        /** @type {?} */
        let newstr = '';
        /** @type {?} */
        const tmp = str.substring(0, index);
        /** @type {?} */
        const estr = str.substring(index, str.length);
        newstr += tmp + item + estr;
        return newstr;
    }
    /**
     * 对日期进行格式化， 和C#大致一致 默认yyyy-MM-dd HH:mm:ss
     * 可不带参数 一个日期参数 或一个格式化参数
     * @author adswads\@gmail.com
     * @param {?=} date 要格式化的日期
     * @param {?=} format 进行格式化的模式字符串
     *     支持的模式字母有：
     *     y:年,
     *     M:年中的月份(1-12),
     *     d:月份中的天(1-31),
     *     H:小时(0-23),
     *     h:小时(0-11),
     *     m:分(0-59),
     *     s:秒(0-59),
     *     f:毫秒(0-999),
     *     q:季度(1-4)
     * @return {?} String
     */
    static dateFormat(date, format) {
        // 无参数
        if (date === undefined && format === undefined) {
            date = new Date();
            format = 'yyyy-MM-dd HH:mm:ss';
        }
        else if (typeof (date) === 'string') { // 无日期
            format = date;
            date = new Date();
        }
        else if (format === undefined) { // 无格式化参数
            format = 'yyyy-MM-dd HH:mm:ss';
        }
        else { } // 没有分隔符的特殊处理
        // 没有分隔符的特殊处理
        /** @type {?} */
        const map = {
            y: date.getFullYear() + '',
            // 年份
            M: date.getMonth() + 1 + '',
            // 月份
            d: date.getDate() + '',
            // 日
            H: date.getHours(),
            // 小时 24
            m: date.getMinutes() + '',
            // 分
            s: date.getSeconds() + '',
            // 秒
            q: Math.floor((date.getMonth() + 3) / 3) + '',
            // 季度
            f: date.getMilliseconds() + '' // 毫秒
        };
        // 小时 12
        if (map['H'] > 12) {
            map['h'] = map['H'] - 12 + '';
        }
        else {
            map['h'] = map['H'] + '';
        }
        map['H'] += '';
        /** @type {?} */
        const reg = 'yMdHhmsqf';
        /** @type {?} */
        let all = '';
        /** @type {?} */
        let str = '';
        for (let i = 0, n = 0; i < reg.length; i++) {
            n = format.indexOf(reg[i]);
            if (n < 0) {
                continue;
            }
            all = '';
            for (; n < format.length; n++) {
                if (format[n] !== reg[i]) {
                    break;
                }
                all += reg[i];
            }
            if (all.length > 0) {
                if (all.length === map[reg[i]].length) {
                    str = map[reg[i]];
                }
                else if (all.length > map[reg[i]].length) {
                    if (reg[i] === 'f') {
                        str = map[reg[i]] + this.charString('0', all.length - map[reg[i]].length);
                    }
                    else {
                        str = this.charString('0', all.length - map[reg[i]].length) + map[reg[i]];
                    }
                }
                else {
                    switch (reg[i]) {
                        case 'y':
                            str = map[reg[i]].substr(map[reg[i]].length - all.length);
                            break;
                        case 'f':
                            str = map[reg[i]].substr(0, all.length);
                            break;
                        default:
                            str = map[reg[i]];
                            break;
                    }
                }
                format = format.replace(all, str);
            }
        }
        return format;
    }
    /**
     * 返回字符串 为n个char构成
     * @author adswads\@gmail.com
     * @private
     * @param {?} char 重复的字符
     * @param {?} count 次数
     * @return {?} String
     */
    static charString(char, count) {
        /** @type {?} */
        let str = '';
        while (count--) {
            str += char;
        }
        return str;
    }
    /**
     * 格式化数字
     * @private
     * @param {?} number  [要格式化的数字]
     * @param {?} decimals         [保留几位小数]
     * @param {?} dec_point        [小数点符号]
     * @param {?} thousands_sep    [千分位符号]
     * @param {?} roundtag         [舍入参数，默认 "ceil" 向上取,"floor"向下取,"round" 四舍五入]
     * @return {?} 格式化后的结果
     */
    static number_format(number, decimals, dec_point, thousands_sep, roundtag) {
        number = (number + '').replace(/[^0-9+-Ee.]/g, '');
        roundtag = roundtag || 'ceil'; // "ceil","floor","round"
        // "ceil","floor","round"
        /** @type {?} */
        let n = !isFinite(+number) ? 0 : +number;
        /** @type {?} */
        let prec = !isFinite(+decimals) ? 0 : Math.abs(decimals);
        /** @type {?} */
        let sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep;
        /** @type {?} */
        let dec = (typeof dec_point === 'undefined') ? '.' : dec_point;
        /** @type {?} */
        let s = [];
        /** @type {?} */
        let toFixedFix = (/**
         * @param {?} n
         * @param {?} prec
         * @return {?}
         */
        function (n, prec) {
            /** @type {?} */
            const k = Math.pow(10, prec);
            console.log();
            return '' + parseFloat(Math[roundtag](parseFloat((n * k).toFixed(prec * 2))).toFixed(prec * 2)) / k;
        });
        s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');
        /** @type {?} */
        const re = /(-?\d+)(\d{3})/;
        while (re.test(s[0])) {
            s[0] = s[0].replace(re, '$1' + sep + '$2');
        }
        if ((s[1] || '').length < prec) {
            s[1] = s[1] || '';
            s[1] += new Array(prec - s[1].length + 1).join('0');
        }
        return s.join(dec);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWRwcmludC5mdW5jdGlvbi51dGlscy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3ZjL2Nsb3VkcHJpbnQvIiwic291cmNlcyI6WyJsaWIvZnVuY3Rpb25zL2Nsb3VkcHJpbnQuZnVuY3Rpb24udXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdBLE1BQU0sT0FBTyxrQkFBa0I7Ozs7OztJQU9wQixNQUFNLENBQUMsc0JBQXNCLENBQUMsTUFBYzs7WUFFM0MsTUFBTSxHQUFHLGtCQUFrQixDQUFDLHdCQUF3QixDQUFDLE1BQU0sQ0FBQztRQUNoRSx3QkFBd0I7UUFDeEIsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3pCLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hDO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7Ozs7O0lBTU0sTUFBTSxDQUFDLHdCQUF3QixDQUFDLE1BQWM7O1lBQzdDLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDOztZQUNoRCxNQUFNLEdBQUcsR0FBRztRQUVoQixNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNuRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNuRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNuRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUVuRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbEMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFakMsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQ3BDO1lBQ0ksTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUMsQ0FBQyxDQUFDLENBQUM7U0FDakQ7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDOzs7OztJQUVNLE1BQU0sQ0FBQyxlQUFlLENBQUMsS0FBSzs7O1lBRTNCLE1BQU0sR0FBRyxJQUFJLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7OztZQUVwRSxXQUFXLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDOzs7WUFFMUMsVUFBVSxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQzs7O1lBRXpDLFVBQVUsR0FBRyxJQUFJLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7OztZQUUxQyxTQUFTLEdBQUcsR0FBRzs7O1lBRWYsU0FBUyxHQUFHLEdBQUc7OztZQUVmLE1BQU0sR0FBRyxvQkFBb0I7OztZQUU3QixVQUFVOzs7WUFFVixVQUFVOzs7WUFFVixVQUFVLEdBQUcsRUFBRTs7O1lBRWYsS0FBSztRQUNULElBQUksS0FBSyxJQUFJLEVBQUUsRUFBRTtZQUFFLE9BQU8sRUFBRSxDQUFDO1NBQUU7UUFDL0IsS0FBSyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQixJQUFJLEtBQUssSUFBSSxNQUFNLEVBQUU7WUFDbkIsVUFBVTtZQUNWLE9BQU8sRUFBRSxDQUFDO1NBQ1g7UUFDRCxJQUFJLEtBQUssSUFBSSxDQUFDLEVBQUU7WUFDZCxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDL0MsT0FBTyxVQUFVLENBQUM7U0FDbkI7UUFDRCxRQUFRO1FBQ1IsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN6QixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUU7WUFDNUIsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUNuQixVQUFVLEdBQUcsRUFBRSxDQUFDO1NBQ2pCO2FBQU07WUFDTCxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QixVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNwQztRQUNELFVBQVU7UUFDVixJQUFJLFFBQVEsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFOztnQkFDNUIsU0FBUyxHQUFHLENBQUM7O2dCQUNiLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTTtZQUM5QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFOztvQkFDM0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7b0JBQzNCLENBQUMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUM7O29CQUNsQixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7O29CQUNULENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztnQkFDYixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUU7b0JBQ1osU0FBUyxFQUFFLENBQUM7aUJBQ2I7cUJBQU07b0JBQ0wsSUFBSSxTQUFTLEdBQUcsQ0FBQyxFQUFFO3dCQUNqQixVQUFVLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUN6QjtvQkFDRCxJQUFJO29CQUNKLFNBQVMsR0FBRyxDQUFDLENBQUM7b0JBQ2QsVUFBVSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ3BEO2dCQUNELElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxTQUFTLEdBQUcsQ0FBQyxFQUFFO29CQUMzQixVQUFVLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUM3QjthQUNGO1lBQ0QsVUFBVSxJQUFJLFNBQVMsQ0FBQztTQUN6QjtRQUNELE1BQU07UUFDTixJQUFJLFVBQVUsSUFBSSxFQUFFLEVBQUU7O2dCQUNoQixNQUFNLEdBQUcsVUFBVSxDQUFDLE1BQU07WUFDOUIsTUFBTTtZQUNOLElBQUksTUFBTSxHQUFHLENBQUMsRUFDZDtnQkFDSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO2FBQ2Q7WUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFOztvQkFDM0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFO29CQUNaLFVBQVUsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNqRDthQUNGO1NBQ0Y7UUFDRCxJQUFJLFVBQVUsSUFBSSxFQUFFLEVBQUU7WUFDcEIsVUFBVSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLEdBQUcsU0FBUyxDQUFDO1NBQ2pEO2FBQU0sSUFBSSxVQUFVLElBQUksRUFBRSxFQUFFO1lBQzNCLFVBQVUsSUFBSSxTQUFTLENBQUM7U0FDekI7UUFDRCxPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDOzs7Ozs7SUFLTSxNQUFNLENBQUMsa0JBQWtCLENBQUMsS0FBYTtRQUMxQyxPQUFPLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyRCxDQUFDOzs7OztJQUVNLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFhOztZQUNwQyxHQUFHLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQztRQUN4QyxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUMsRUFBRSxDQUFDLENBQUM7UUFDMUIsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDOzs7Ozs7OztJQUdPLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLOzs7WUFFbkMsTUFBTSxHQUFHLEVBQUU7O2NBQ1QsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQzs7Y0FDN0IsSUFBSSxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUM7UUFDN0MsTUFBTSxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQzVCLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFvQk0sTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFVLEVBQUUsTUFBZTtRQUNoRCxNQUFNO1FBQ04sSUFBSSxJQUFJLEtBQUssU0FBUyxJQUFJLE1BQU0sS0FBSyxTQUFTLEVBQUU7WUFDNUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7WUFDbEIsTUFBTSxHQUFHLHFCQUFxQixDQUFDO1NBQ2xDO2FBQU0sSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssUUFBUSxFQUFFLEVBQUMsTUFBTTtZQUMxQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ2QsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7U0FDckI7YUFBTSxJQUFJLE1BQU0sS0FBSyxTQUFTLEVBQUUsRUFBQyxTQUFTO1lBQ3ZDLE1BQU0sR0FBRyxxQkFBcUIsQ0FBQztTQUNsQzthQUFNLEdBQUcsQ0FBQSxhQUFhOzs7Y0FFakIsR0FBRyxHQUFHO1lBQ1IsQ0FBQyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFOztZQUMxQixDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFOztZQUMzQixDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7O1lBQ3RCLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFOztZQUNsQixDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7O1lBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTs7WUFDekIsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTs7WUFDN0MsQ0FBQyxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSztTQUN2QztRQUNELFFBQVE7UUFDUixJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7U0FBRTthQUFNO1lBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7U0FBRTtRQUN4RixHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDOztjQUVULEdBQUcsR0FBRyxXQUFXOztZQUNuQixHQUFHLEdBQUcsRUFBRTs7WUFBRSxHQUFHLEdBQUcsRUFBRTtRQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hDLENBQUMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFBRSxTQUFTO2FBQUU7WUFDeEIsR0FBRyxHQUFHLEVBQUUsQ0FBQztZQUNULE9BQU8sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzNCLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDdEIsTUFBTTtpQkFDVDtnQkFDRCxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2pCO1lBQ0QsSUFBSSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDaEIsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7b0JBQ25DLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ3JCO3FCQUFNLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO29CQUN4QyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7d0JBQ2hCLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7cUJBQzdFO3lCQUFPO3dCQUNKLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQzdFO2lCQUNKO3FCQUFNO29CQUNILFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO3dCQUNaLEtBQUssR0FBRzs0QkFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzs0QkFBQyxNQUFNO3dCQUMzRSxLQUFLLEdBQUc7NEJBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzs0QkFBQyxNQUFNO3dCQUN6RDs0QkFBUyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUFDLE1BQU07cUJBQ3JDO2lCQUNKO2dCQUNELE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQzthQUNyQztTQUNKO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7Ozs7Ozs7O0lBU00sTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFZLEVBQUUsS0FBYTs7WUFDNUMsR0FBRyxHQUFHLEVBQUU7UUFDWixPQUFPLEtBQUssRUFBRSxFQUFFO1lBQ1osR0FBRyxJQUFJLElBQUksQ0FBQztTQUNmO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDOzs7Ozs7Ozs7OztJQWFPLE1BQU0sQ0FBRSxhQUFhLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsYUFBYSxFQUFFLFFBQVE7UUFDOUUsTUFBTSxHQUFHLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDbkQsUUFBUSxHQUFHLFFBQVEsSUFBSSxNQUFNLENBQUMsQ0FBQyx5QkFBeUI7OztZQUNwRCxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07O1lBQ3BDLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDOztZQUNwRCxHQUFHLEdBQUcsQ0FBQyxPQUFPLGFBQWEsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxhQUFhOztZQUNsRSxHQUFHLEdBQUcsQ0FBQyxPQUFPLFNBQVMsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxTQUFTOztZQUMxRCxDQUFDLEdBQUcsRUFBRTs7WUFDTixVQUFVOzs7OztRQUFHLFVBQVUsQ0FBQyxFQUFFLElBQUk7O2tCQUVwQixDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDO1lBQzVCLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUVkLE9BQU8sRUFBRSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEcsQ0FBQyxDQUFBO1FBQ0wsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Y0FDM0QsRUFBRSxHQUFHLGdCQUFnQjtRQUMzQixPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDbEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDOUM7UUFFRCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLEVBQUU7WUFDNUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN2RDtRQUNELE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0NBRUoiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog5LqR5omT5Y2w5Ye95pWw5bel5YW357G7XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJpbnRGdW5jdGlvblV0aWxzIHtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsIbmlbDlrZfovazkuLrmsYnlrZdcclxuICAgICAqIEBwYXJhbSBudW1iZXIg5pWw5YC8XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRm9ybWF0VG9DdXJyZW5jeU51bWJlcihudW1iZXI6IG51bWJlcik6IHN0cmluZyB7XHJcblxyXG4gICAgICAgIHZhciByZXN1bHQgPSBQcmludEZ1bmN0aW9uVXRpbHMuRm9ybWF0VG9DdXJyZW5jeU51bWJlckNOKG51bWJlcik7XHJcbiAgICAgICAgLy8g5oqK57G75Ly8IOOAkOS4gOWNgeS6jOOAkeS4reeahOS4gOWOu+aOie+8jOaUueS4uuOAkOWNgeS6jOOAkVxyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhcnRzV2l0aCgn5LiA5Y2BJykpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuaVsOWtl+i9rOaNouS4uuaxieWtl1xyXG4gICAgICogQHBhcmFtIG51bWJlciDmlbDlgLxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBGb3JtYXRUb0N1cnJlbmN5TnVtYmVyQ04obnVtYmVyOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIHZhciByZXMgPSBQcmludEZ1bmN0aW9uVXRpbHMuQ29udmVydEN1cnJlbmN5KG51bWJlcik7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlcztcclxuXHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cChcIuWjuVwiLFwiZ21cIiksIFwi5LiAXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoXCLotLBcIixcImdtXCIpLCBcIuS6jFwiKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKFwi5Y+BXCIsXCJnbVwiKSwgXCLkuIlcIik7XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cChcIuiChlwiLFwiZ21cIiksIFwi5ZubXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoXCLkvI1cIixcImdtXCIpLCBcIuS6lFwiKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKFwi6ZmGXCIsXCJnbVwiKSwgXCLlha1cIik7XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cChcIuafklwiLFwiZ21cIiksIFwi5LiDXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoXCLmjYxcIixcImdtXCIpLCBcIuWFq1wiKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKFwi546WXCIsXCJnbVwiKSwgXCLkuZ1cIik7XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UobmV3IFJlZ0V4cChcIuaLvlwiLFwiZ21cIiksIFwi5Y2BXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoXCLkvbBcIixcImdtXCIpLCBcIueZvlwiKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKFwi5LufXCIsXCJnbVwiKSwgXCLljYNcIik7XHJcblxyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFwi5YWDXCIsIFwi54K5XCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFwi6KeSXCIsIFwiXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFwi5YiGXCIsIFwiXCIpO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFwi5pW0XCIsIFwiXCIpO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9PSAn54K5JykgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIHJlc3VsdC5sZW5ndGgtMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ29udmVydEN1cnJlbmN5KG1vbmV5KSB7XHJcbiAgICAgICAgLy/msYnlrZfnmoTmlbDlrZdcclxuICAgICAgICB2YXIgY25OdW1zID0gbmV3IEFycmF5KCfpm7YnLCAn5aO5JywgJ+i0sCcsICflj4EnLCAn6IKGJywgJ+S8jScsICfpmYYnLCAn5p+SJywgJ+aNjCcsICfnjpYnKTtcclxuICAgICAgICAvL+WfuuacrOWNleS9jVxyXG4gICAgICAgIHZhciBjbkludFJhZGljZSA9IG5ldyBBcnJheSgnJywgJ+aLvicsICfkvbAnLCAn5LufJyk7XHJcbiAgICAgICAgLy/lr7nlupTmlbTmlbDpg6jliIbmianlsZXljZXkvY1cclxuICAgICAgICB2YXIgY25JbnRVbml0cyA9IG5ldyBBcnJheSgnJywgJ+S4hycsICfkur8nLCAn5YWGJyk7XHJcbiAgICAgICAgLy/lr7nlupTlsI/mlbDpg6jliIbljZXkvY1cclxuICAgICAgICB2YXIgY25EZWNVbml0cyA9IG5ldyBBcnJheSgn6KeSJywgJ+WIhicsICfmr6snLCAn5Y6YJyk7XHJcbiAgICAgICAgLy/mlbTmlbDph5Hpop3ml7blkI7pnaLot5/nmoTlrZfnrKZcclxuICAgICAgICB2YXIgY25JbnRlZ2VyID0gJ+aVtCc7XHJcbiAgICAgICAgLy/mlbTlnovlrozku6XlkI7nmoTljZXkvY1cclxuICAgICAgICB2YXIgY25JbnRMYXN0ID0gJ+WFgyc7XHJcbiAgICAgICAgLy/mnIDlpKflpITnkIbnmoTmlbDlrZdcclxuICAgICAgICB2YXIgbWF4TnVtID0gOTk5OTk5OTk5OTk5OTk5Ljk5OTk7XHJcbiAgICAgICAgLy/ph5Hpop3mlbTmlbDpg6jliIZcclxuICAgICAgICB2YXIgaW50ZWdlck51bTtcclxuICAgICAgICAvL+mHkemineWwj+aVsOmDqOWIhlxyXG4gICAgICAgIHZhciBkZWNpbWFsTnVtO1xyXG4gICAgICAgIC8v6L6T5Ye655qE5Lit5paH6YeR6aKd5a2X56ym5LiyXHJcbiAgICAgICAgdmFyIGNoaW5lc2VTdHIgPSAnJztcclxuICAgICAgICAvL+WIhuemu+mHkemineWQjueUqOeahOaVsOe7hO+8jOmihOWumuS5iVxyXG4gICAgICAgIHZhciBwYXJ0cztcclxuICAgICAgICBpZiAobW9uZXkgPT0gJycpIHsgcmV0dXJuICcnOyB9XHJcbiAgICAgICAgbW9uZXkgPSBwYXJzZUZsb2F0KG1vbmV5KTtcclxuICAgICAgICBpZiAobW9uZXkgPj0gbWF4TnVtKSB7XHJcbiAgICAgICAgICAvL+i2heWHuuacgOWkp+WkhOeQhuaVsOWtl1xyXG4gICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW9uZXkgPT0gMCkge1xyXG4gICAgICAgICAgY2hpbmVzZVN0ciA9IGNuTnVtc1swXSArIGNuSW50TGFzdCArIGNuSW50ZWdlcjtcclxuICAgICAgICAgIHJldHVybiBjaGluZXNlU3RyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+i9rOaNouS4uuWtl+espuS4slxyXG4gICAgICAgIG1vbmV5ID0gbW9uZXkudG9TdHJpbmcoKTtcclxuICAgICAgICBpZiAobW9uZXkuaW5kZXhPZignLicpID09IC0xKSB7XHJcbiAgICAgICAgICBpbnRlZ2VyTnVtID0gbW9uZXk7XHJcbiAgICAgICAgICBkZWNpbWFsTnVtID0gJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHBhcnRzID0gbW9uZXkuc3BsaXQoJy4nKTtcclxuICAgICAgICAgIGludGVnZXJOdW0gPSBwYXJ0c1swXTtcclxuICAgICAgICAgIGRlY2ltYWxOdW0gPSBwYXJ0c1sxXS5zdWJzdHIoMCwgNCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6I635Y+W5pW05Z6L6YOo5YiG6L2s5o2iXHJcbiAgICAgICAgaWYgKHBhcnNlSW50KGludGVnZXJOdW0sIDEwKSA+IDApIHtcclxuICAgICAgICAgIHZhciB6ZXJvQ291bnQgPSAwO1xyXG4gICAgICAgICAgdmFyIEludExlbiA9IGludGVnZXJOdW0ubGVuZ3RoO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBJbnRMZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IGludGVnZXJOdW0uc3Vic3RyKGksIDEpO1xyXG4gICAgICAgICAgICB2YXIgcCA9IEludExlbiAtIGkgLSAxO1xyXG4gICAgICAgICAgICB2YXIgcSA9IHAgLyA0O1xyXG4gICAgICAgICAgICB2YXIgbSA9IHAgJSA0O1xyXG4gICAgICAgICAgICBpZiAobiA9PSAnMCcpIHtcclxuICAgICAgICAgICAgICB6ZXJvQ291bnQrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoemVyb0NvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbmVzZVN0ciArPSBjbk51bXNbMF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8v5b2S6Zu2XHJcbiAgICAgICAgICAgICAgemVyb0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICBjaGluZXNlU3RyICs9IGNuTnVtc1twYXJzZUludChuKV0gKyBjbkludFJhZGljZVttXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobSA9PSAwICYmIHplcm9Db3VudCA8IDQpIHtcclxuICAgICAgICAgICAgICBjaGluZXNlU3RyICs9IGNuSW50VW5pdHNbcV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNoaW5lc2VTdHIgKz0gY25JbnRMYXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+Wwj+aVsOmDqOWIhlxyXG4gICAgICAgIGlmIChkZWNpbWFsTnVtICE9ICcnKSB7XHJcbiAgICAgICAgICB2YXIgZGVjTGVuID0gZGVjaW1hbE51bS5sZW5ndGg7XHJcbiAgICAgICAgICAvL+WkhOeQhuWIsOWIhlxyXG4gICAgICAgICAgaWYgKGRlY0xlbiA+IDIpIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGRlY0xlbiA9IDI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlY0xlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gZGVjaW1hbE51bS5zdWJzdHIoaSwgMSk7XHJcbiAgICAgICAgICAgIGlmIChuICE9ICcwJykge1xyXG4gICAgICAgICAgICAgIGNoaW5lc2VTdHIgKz0gY25OdW1zW051bWJlcihuKV0gKyBjbkRlY1VuaXRzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjaGluZXNlU3RyID09ICcnKSB7XHJcbiAgICAgICAgICBjaGluZXNlU3RyICs9IGNuTnVtc1swXSArIGNuSW50TGFzdCArIGNuSW50ZWdlcjtcclxuICAgICAgICB9IGVsc2UgaWYgKGRlY2ltYWxOdW0gPT0gJycpIHtcclxuICAgICAgICAgIGNoaW5lc2VTdHIgKz0gY25JbnRlZ2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2hpbmVzZVN0cjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhuaVsOWAvOagvOW8j+WMluS4uuS4reaWh+Wkp+WGmei0p+W4gemHkemine+8jOW9ouWmguOAkOWjueaLvuS4h+afkuS7n+WFg+mbtuS8jeinkuWPgeWIhuOAkVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIEZvcm1hdFRvQ3VycmVuY3lDTihtb25leTogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIFByaW50RnVuY3Rpb25VdGlscy5Db252ZXJ0Q3VycmVuY3kobW9uZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgRm9ybWF0VG9DdXJyZW5jeShtb25leTogbnVtYmVyKXtcclxuICAgICAgICBsZXQgc3RyID0gdGhpcy5Gb3JtYXRUb0N1cnJlbmN5Q04obW9uZXkpO1xyXG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKCfpm7YnLCcnKTtcclxuICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnNlcnRfaXRlbShzdHIsIGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgLy8g5Yid5aeL5YyW5LiA5Liq56m65a2X56ym5LiyXHJcbiAgICAgICAgbGV0IG5ld3N0ciA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHRtcCA9IHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICAgIGNvbnN0IGVzdHIgPSBzdHIuc3Vic3RyaW5nKGluZGV4LCBzdHIubGVuZ3RoKTtcclxuICAgICAgICBuZXdzdHIgKz0gdG1wICsgaXRlbSArIGVzdHI7XHJcbiAgICAgICAgcmV0dXJuIG5ld3N0cjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICog5a+55pel5pyf6L+b6KGM5qC85byP5YyW77yMIOWSjEMj5aSn6Ie05LiA6Ie0IOm7mOiupHl5eXktTU0tZGQgSEg6bW06c3NcclxuICAgICog5Y+v5LiN5bim5Y+C5pWwIOS4gOS4quaXpeacn+WPguaVsCDmiJbkuIDkuKrmoLzlvI/ljJblj4LmlbBcclxuICAgICogQHBhcmFtIGRhdGUg6KaB5qC85byP5YyW55qE5pel5pyfIFxyXG4gICAgKiBAcGFyYW0gZm9ybWF0IOi/m+ihjOagvOW8j+WMlueahOaooeW8j+Wtl+espuS4slxyXG4gICAgKiAgICAg5pSv5oyB55qE5qih5byP5a2X5q+N5pyJ77yaIFxyXG4gICAgKiAgICAgeTrlubQsIFxyXG4gICAgKiAgICAgTTrlubTkuK3nmoTmnIjku70oMS0xMiksIFxyXG4gICAgKiAgICAgZDrmnIjku73kuK3nmoTlpKkoMS0zMSksIFxyXG4gICAgKiAgICAgSDrlsI/ml7YoMC0yMyksIFxyXG4gICAgKiAgICAgaDrlsI/ml7YoMC0xMSksIFxyXG4gICAgKiAgICAgbTrliIYoMC01OSksIFxyXG4gICAgKiAgICAgczrnp5IoMC01OSksIFxyXG4gICAgKiAgICAgZjrmr6vnp5IoMC05OTkpLFxyXG4gICAgKiAgICAgcTrlraPluqYoMS00KVxyXG4gICAgKiBAcmV0dXJuIFN0cmluZ1xyXG4gICAgKiBAYXV0aG9yIGFkc3dhZHNAZ21haWwuY29tXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkYXRlRm9ybWF0KGRhdGU/OiBhbnksIGZvcm1hdD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8g5peg5Y+C5pWwXHJcbiAgICAgICAgaWYgKGRhdGUgPT09IHVuZGVmaW5lZCAmJiBmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZm9ybWF0ID0gJ3l5eXktTU0tZGQgSEg6bW06c3MnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChkYXRlKSA9PT0gJ3N0cmluZycpIHsvLyDml6Dml6XmnJ9cclxuICAgICAgICAgICAgZm9ybWF0ID0gZGF0ZTtcclxuICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkgey8vIOaXoOagvOW8j+WMluWPguaVsFxyXG4gICAgICAgICAgICBmb3JtYXQgPSAneXl5eS1NTS1kZCBISDptbTpzcyc7XHJcbiAgICAgICAgfSBlbHNlIHsgfS8vIOayoeacieWIhumalOespueahOeJueauiuWkhOeQhlxyXG5cclxuICAgICAgICBjb25zdCBtYXAgPSB7XHJcbiAgICAgICAgICAgIHk6IGRhdGUuZ2V0RnVsbFllYXIoKSArICcnLCAvLyDlubTku71cclxuICAgICAgICAgICAgTTogZGF0ZS5nZXRNb250aCgpICsgMSArICcnLCAvLyDmnIjku71cclxuICAgICAgICAgICAgZDogZGF0ZS5nZXREYXRlKCkgKyAnJywgLy8g5pelXHJcbiAgICAgICAgICAgIEg6IGRhdGUuZ2V0SG91cnMoKSwgLy8g5bCP5pe2IDI0XHJcbiAgICAgICAgICAgIG06IGRhdGUuZ2V0TWludXRlcygpICsgJycsIC8vIOWIhlxyXG4gICAgICAgICAgICBzOiBkYXRlLmdldFNlY29uZHMoKSArICcnLCAvLyDnp5JcclxuICAgICAgICAgICAgcTogTWF0aC5mbG9vcigoZGF0ZS5nZXRNb250aCgpICsgMykgLyAzKSArICcnLCAvLyDlraPluqZcclxuICAgICAgICAgICAgZjogZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSArICcnIC8vIOavq+enklxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8g5bCP5pe2IDEyXHJcbiAgICAgICAgaWYgKG1hcFsnSCddID4gMTIpIHsgbWFwWydoJ10gPSBtYXBbJ0gnXSAtIDEyICsgJyc7IH0gZWxzZSB7IG1hcFsnaCddID0gbWFwWydIJ10gKyAnJzsgfVxyXG4gICAgICAgIG1hcFsnSCddICs9ICcnO1xyXG5cclxuICAgICAgICBjb25zdCByZWcgPSAneU1kSGhtc3FmJztcclxuICAgICAgICBsZXQgYWxsID0gJycsIHN0ciA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gMDsgaSA8IHJlZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuID0gZm9ybWF0LmluZGV4T2YocmVnW2ldKTtcclxuICAgICAgICAgICAgaWYgKG4gPCAwKSB7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgIGFsbCA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKDsgbiA8IGZvcm1hdC5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcm1hdFtuXSAhPT0gcmVnW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhbGwgKz0gcmVnW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhbGwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsbC5sZW5ndGggPT09IG1hcFtyZWdbaV1dLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IG1hcFtyZWdbaV1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGwubGVuZ3RoID4gbWFwW3JlZ1tpXV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ1tpXSA9PT0gJ2YnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IG1hcFtyZWdbaV1dICsgdGhpcy5jaGFyU3RyaW5nKCcwJywgYWxsLmxlbmd0aCAtIG1hcFtyZWdbaV1dLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHRoaXMuY2hhclN0cmluZygnMCcsIGFsbC5sZW5ndGggLSBtYXBbcmVnW2ldXS5sZW5ndGgpICsgbWFwW3JlZ1tpXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZ1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd5Jzogc3RyID0gbWFwW3JlZ1tpXV0uc3Vic3RyKG1hcFtyZWdbaV1dLmxlbmd0aCAtIGFsbC5sZW5ndGgpOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6IHN0ciA9IG1hcFtyZWdbaV1dLnN1YnN0cigwLCBhbGwubGVuZ3RoKTsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHN0ciA9IG1hcFtyZWdbaV1dOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShhbGwsIHN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICog6L+U5Zue5a2X56ym5LiyIOS4um7kuKpjaGFy5p6E5oiQXHJcbiAgICAqIEBwYXJhbSBjaGFyIOmHjeWkjeeahOWtl+esplxyXG4gICAgKiBAcGFyYW0gY291bnQg5qyh5pWwXHJcbiAgICAqIEByZXR1cm4gU3RyaW5nXHJcbiAgICAqIEBhdXRob3IgYWRzd2Fkc0BnbWFpbC5jb21cclxuICAgICovXHJcbiAgIHByaXZhdGUgc3RhdGljIGNoYXJTdHJpbmcoY2hhcjogc3RyaW5nLCBjb3VudDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgc3RyID0gJyc7XHJcbiAgICAgICAgd2hpbGUgKGNvdW50LS0pIHtcclxuICAgICAgICAgICAgc3RyICs9IGNoYXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagvOW8j+WMluaVsOWtl1xyXG4gICAgICogQHBhcmFtICBudW1iZXIgIFvopoHmoLzlvI/ljJbnmoTmlbDlrZddXHJcbiAgICAgKiBAcGFyYW0gIGRlY2ltYWxzICAgICAgICAgW+S/neeVmeWHoOS9jeWwj+aVsF1cclxuICAgICAqIEBwYXJhbSAgZGVjX3BvaW50ICAgICAgICBb5bCP5pWw54K556ym5Y+3XVxyXG4gICAgICogQHBhcmFtICB0aG91c2FuZHNfc2VwICAgIFvljYPliIbkvY3nrKblj7ddXHJcbiAgICAgKiBAcGFyYW0gIHJvdW5kdGFnICAgICAgICAgW+iIjeWFpeWPguaVsO+8jOm7mOiupCBcImNlaWxcIiDlkJHkuIrlj5YsXCJmbG9vclwi5ZCR5LiL5Y+WLFwicm91bmRcIiDlm5voiI3kupTlhaVdXHJcbiAgICAgKiBAcmV0dXJuICDmoLzlvI/ljJblkI7nmoTnu5PmnpxcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgIG51bWJlcl9mb3JtYXQobnVtYmVyLCBkZWNpbWFscywgZGVjX3BvaW50LCB0aG91c2FuZHNfc2VwLCByb3VuZHRhZykge1xyXG4gICAgICAgIG51bWJlciA9IChudW1iZXIgKyAnJykucmVwbGFjZSgvW14wLTkrLUVlLl0vZywgJycpO1xyXG4gICAgICAgIHJvdW5kdGFnID0gcm91bmR0YWcgfHwgJ2NlaWwnOyAvLyBcImNlaWxcIixcImZsb29yXCIsXCJyb3VuZFwiXHJcbiAgICAgICAgbGV0IG4gPSAhaXNGaW5pdGUoK251bWJlcikgPyAwIDogK251bWJlcixcclxuICAgICAgICAgICAgcHJlYyA9ICFpc0Zpbml0ZSgrZGVjaW1hbHMpID8gMCA6IE1hdGguYWJzKGRlY2ltYWxzKSxcclxuICAgICAgICAgICAgc2VwID0gKHR5cGVvZiB0aG91c2FuZHNfc2VwID09PSAndW5kZWZpbmVkJykgPyAnLCcgOiB0aG91c2FuZHNfc2VwLFxyXG4gICAgICAgICAgICBkZWMgPSAodHlwZW9mIGRlY19wb2ludCA9PT0gJ3VuZGVmaW5lZCcpID8gJy4nIDogZGVjX3BvaW50LFxyXG4gICAgICAgICAgICBzID0gW10sXHJcbiAgICAgICAgICAgIHRvRml4ZWRGaXggPSBmdW5jdGlvbiAobiwgcHJlYykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBNYXRoLnBvdygxMCwgcHJlYyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJycgKyBwYXJzZUZsb2F0KE1hdGhbcm91bmR0YWddKHBhcnNlRmxvYXQoKG4gKiBrKS50b0ZpeGVkKHByZWMgKiAyKSkpLnRvRml4ZWQocHJlYyAqIDIpKSAvIGs7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgcyA9IChwcmVjID8gdG9GaXhlZEZpeChuLCBwcmVjKSA6ICcnICsgTWF0aC5yb3VuZChuKSkuc3BsaXQoJy4nKTtcclxuICAgICAgICBjb25zdCByZSA9IC8oLT9cXGQrKShcXGR7M30pLztcclxuICAgICAgICB3aGlsZSAocmUudGVzdChzWzBdKSkge1xyXG4gICAgICAgICAgICBzWzBdID0gc1swXS5yZXBsYWNlKHJlLCAnJDEnICsgc2VwICsgJyQyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKChzWzFdIHx8ICcnKS5sZW5ndGggPCBwcmVjKSB7XHJcbiAgICAgICAgICAgIHNbMV0gPSBzWzFdIHx8ICcnO1xyXG4gICAgICAgICAgICBzWzFdICs9IG5ldyBBcnJheShwcmVjIC0gc1sxXS5sZW5ndGggKyAxKS5qb2luKCcwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzLmpvaW4oZGVjKTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19