/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Injector, ApplicationRef } from '@angular/core';
import { ComponentFactoryResolver } from '@angular/core';
import { PrintEntity } from './entitys/printEntity';
import { NotifyService } from '@farris/ui-notify';
import { Urls } from './utils/cloudprint.Urls';
import { AppService } from '@gsp-sys/rtf-common';
import { PrintFormatService } from './services/printFormatService';
import { WindowService } from '@progress/kendo-angular-dialog';
import { DataValidator } from './utils/cloudprint.datavalidator';
import { BsModalService } from '@farris/ui-modal';
export class CloudprintInternalService {
    /**
     * @param {?} formatSrv
     * @param {?} resolver
     * @param {?} injector
     * @param {?} applicationRef
     * @param {?} notifyService
     * @param {?} appService
     * @param {?} windowService
     * @param {?} modalService
     */
    constructor(formatSrv, resolver, injector, applicationRef, notifyService, appService, windowService, modalService) {
        this.formatSrv = formatSrv;
        this.resolver = resolver;
        this.injector = injector;
        this.applicationRef = applicationRef;
        this.notifyService = notifyService;
        this.appService = appService;
        this.windowService = windowService;
        this.modalService = modalService;
        /**
         * 打印参数实体
         */
        this.printEntity = new PrintEntity();
        // 设置printEntity的默认值
        this.printEntity.appUrl = Urls.CloudPrintBaseUrl;
        this.printEntity.isUseMetaData = true;
        this.printEntity.language = localStorage.getItem("languageCode") || 'zh-CHS';
        this.formatSrv.printEntity = this.printEntity;
    }
    /**
     * 设置PrintEntity参数
     * \@description 如果外界new新的PrintEntity，则需要调用该方法同步service的entity
     *              外界没有new新的PrintEntity，则不需要调用该方法
     * @param {?} entity
     * @return {?}
     */
    set setPrintEntity(entity) {
        this.printEntity = entity;
        // this.designerSrv.printEntity = this.printEntity;
        // this.viewerSrv.printEntity = this.printEntity;
        this.formatSrv.printEntity = this.printEntity;
    }
    /**
     * be数据源创建格式
     * @param {?} beId
     * @return {?}
     */
    createPrintFormatWithBE(beId) {
        return this.formatSrv.createPrintFormatWithBE(beId);
    }
    /**
     * vo数据源创建格式
     * @param {?} voId
     * @return {?}
     */
    createPrintFormatWithVO(voId) {
        return this.formatSrv.createPrintFormatWithVO(voId);
    }
    /**
     * 根据数据源id获取格式
     * @param {?} sourceId
     * @return {?}
     */
    getPrintFormatByDataSrouceId(sourceId) {
        return this.formatSrv.getFormatBySourceId(sourceId);
    }
    /**
     * 根据数据源和维度获取格式
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    getPrintFormatByDataSrouceAndDimension(billCategoryId, sourceId, firstDimension, secondDimension) {
        return this.formatSrv.getPrintFormatByDataSrouceAndDimension(billCategoryId, sourceId, firstDimension, secondDimension);
    }
    /**
     * 根据业务对象id获取数据源
     * @param {?} boId
     * @return {?}
     */
    getDataSourceByBOId(boId) {
        return this.formatSrv.getDataSourceByBOId(boId);
    }
    /**
     * 根据格式id获取格式
     * @param {?} formatId
     * @return {?}
     */
    getFormatByFormatId(formatId) {
        return this.formatSrv.getFormatByFormatId(formatId);
    }
    /**
     * 根据已有的格式id和数据源id，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @return {?}
     */
    getNewSourceFormatByFormatId(formatId) {
        return this.formatSrv.getNewSourceFormatByFormatId(formatId);
    }
    /**
     * 根据已有的格式id和数据源id，语言，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @param {?} lang
     * @return {?}
     */
    getNewSourceFormatByFormatIdAndLang(formatId, lang) {
        return this.formatSrv.getNewSourceFormatByFormatIdAndLang(formatId, lang);
    }
    /**
     * 保存格式
     * @param {?} data
     * @return {?}
     */
    save(data) {
        return this.formatSrv.save(data);
    }
    /**
     * 保存格式
     * @param {?} data
     * @return {?}
     */
    saveWithRes(data) {
        return this.formatSrv.saveWithRes(data);
    }
    /**
     * 删除格式
     * @param {?} formatId
     * @return {?}
     */
    remove(formatId) {
        return this.formatSrv.remove(formatId);
    }
    /**
     * 根据格式id获取格式
     * @param {?} id
     * @return {?}
     */
    getFormatById(id) {
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info('未配置正确的appUrl');
            return;
        }
        return this.formatSrv.loadFormat(id, 'CloudPrint');
    }
}
CloudprintInternalService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
CloudprintInternalService.ctorParameters = () => [
    { type: PrintFormatService },
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: ApplicationRef },
    { type: NotifyService },
    { type: AppService },
    { type: WindowService },
    { type: BsModalService }
];
if (false) {
    /**
     * 打印参数实体
     * @type {?}
     */
    CloudprintInternalService.prototype.printEntity;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.formatSrv;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.applicationRef;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.appService;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.windowService;
    /**
     * @type {?}
     * @private
     */
    CloudprintInternalService.prototype.modalService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWRwcmludC5pbnRlcm5hbHNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN2Yy9jbG91ZHByaW50LyIsInNvdXJjZXMiOlsibGliL2Nsb3VkcHJpbnQuaW50ZXJuYWxzZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQWtDLE1BQU0sZUFBZSxDQUFDO0FBQ3JHLE9BQU8sRUFBRSx3QkFBd0IsRUFBbUQsTUFBTSxlQUFlLENBQUM7QUFJMUcsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRXBELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFJL0MsT0FBTyxFQUFFLFVBQVUsRUFBd0MsTUFBTSxxQkFBcUIsQ0FBQztBQUl2RixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQU1uRSxPQUFPLEVBR0wsYUFBYSxFQUNkLE1BQU0sZ0NBQWdDLENBQUM7QUFReEMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBR2pFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUtsRCxNQUFNLE9BQU8seUJBQXlCOzs7Ozs7Ozs7OztJQWtCcEMsWUFDVSxTQUE2QixFQUM3QixRQUFrQyxFQUNsQyxRQUFrQixFQUNsQixjQUE4QixFQUM5QixhQUE0QixFQUM1QixVQUFzQixFQUN0QixhQUE0QixFQUM1QixZQUE0QjtRQVA1QixjQUFTLEdBQVQsU0FBUyxDQUFvQjtRQUM3QixhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixlQUFV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SUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3hDLE9BQU87U0FDVjtRQUNELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRXZELENBQUM7OztZQXZHSixVQUFVOzs7O1lBekJGLGtCQUFrQjtZQWhCbEIsd0JBQXdCO1lBRFosUUFBUTtZQUFFLGNBQWM7WUFPcEMsYUFBYTtZQU1iLFVBQVU7WUFhakIsYUFBYTtZQVlOLGNBQWM7Ozs7Ozs7SUFVckIsZ0RBQWdDOzs7OztJQWM5Qiw4Q0FBcUM7Ozs7O0lBQ3JDLDZDQUEwQzs7Ozs7SUFDMUMsNkNBQTBCOzs7OztJQUMxQixtREFBc0M7Ozs7O0lBQ3RDLGtEQUFvQzs7Ozs7SUFDcEMsK0NBQThCOzs7OztJQUM5QixrREFBb0M7Ozs7O0lBQ3BDLGlEQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdG9yLCBBcHBsaWNhdGlvblJlZiwgRXZlbnRFbWl0dGVyLCBRdWVyeSwgTE9DQUxFX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29tcG9uZW50UmVmLCBFbWJlZGRlZFZpZXdSZWYsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IENsb3VkcHJpbnREZXNpZ25lckNvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1kZXNpZ25lci9jbG91ZHByaW50LWRlc2lnbmVyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENsb3VkcHJpbnRWaWV3ZXJDb21wb25lbnQgfSBmcm9tICcuL2Nsb3VkcHJpbnQtdmlld2VyL2Nsb3VkcHJpbnQtdmlld2VyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFByaW50RW50aXR5IH0gZnJvbSAnLi9lbnRpdHlzL3ByaW50RW50aXR5JztcclxuXHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IE91dHB1dE9wdGlvbnMgfSBmcm9tICcuL2VudGl0eXMvb3V0cHV0b3B0aW9ucy9vdXRwdXRPcHRpb25zJztcclxuaW1wb3J0IHsgVXJscyB9IGZyb20gJy4vdXRpbHMvY2xvdWRwcmludC5VcmxzJztcclxuaW1wb3J0IHsgU291cmNlT3B0aW9ucyB9IGZyb20gJy4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9zb3VyY2VPcHRpb25zJztcclxuaW1wb3J0IHsgU291cmNlRmlsdGVyT3B0aW9ucyB9IGZyb20gJy4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9zb3VyY2VGaWx0ZXJPcHRpb25zJztcclxuaW1wb3J0IHsgQk9PcHRpb25zIH0gZnJvbSAnLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL2Jvb3B0aW9ucyc7XHJcbmltcG9ydCB7IEFwcFNlcnZpY2UsIEFwcE9wdGlvbnMsIEZyYW1ld29ya1ZhcmlhYmxlU2VydmljZSB9IGZyb20gJ0Bnc3Atc3lzL3J0Zi1jb21tb24nO1xyXG5pbXBvcnQgeyBGaWxlVHlwZSB9IGZyb20gJy4vZW50aXR5cy9vdXRwdXRvcHRpb25zL2ZpbGVUeXBlJztcclxuaW1wb3J0IHsgQ21wVHlwZSB9IGZyb20gJy4vZW50aXR5cy9lbnVtcy9jbXBUeXBlJztcclxuaW1wb3J0IHsgT3V0cHV0UGFyYW0gfSBmcm9tICcuL2VudGl0eXMvb3V0cHV0b3B0aW9ucy9vdXRwdXRQYXJhbSc7XHJcbmltcG9ydCB7IFByaW50Rm9ybWF0U2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvcHJpbnRGb3JtYXRTZXJ2aWNlJztcclxuaW1wb3J0IHsgU291cmNlVHlwZSB9IGZyb20gJy4vZW50aXR5cy9lbnVtcy9zb3VyY2VUeXBlJztcclxuXHJcbmltcG9ydCB7IFByaW50Rm9ybWF0IH0gZnJvbSAnLi9lbnRpdHlzL3ByaW50Rm9ybWF0JztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gIFdpbmRvd1JlZixcclxuICBXaW5kb3dDbG9zZVJlc3VsdCxcclxuICBXaW5kb3dTZXJ2aWNlXHJcbn0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZGlhbG9nJztcclxuaW1wb3J0IHsgRm9ybWF0bGlzdENvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1mb3JtYXRsaXN0L2Zvcm1hdGxpc3QuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzL2Nsb3VkcHJpbnQudXRpbHMnO1xyXG5pbXBvcnQgeyBDbG91ZHByaW50ZGVzaWduZXJTZXJ2aWNlIH0gZnJvbSAnLi9jbG91ZHByaW50LWRlc2lnbmVyL2Nsb3VkcHJpbnQtZGVzaWduZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IENsb3VkcHJpbnR2aWV3ZXJTZXJ2aWNlIH0gZnJvbSAnLi9jbG91ZHByaW50LXZpZXdlci9jbG91ZHByaW50LXZpZXdlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBRdWVyeVR5cGUgfSBmcm9tICcuL2VudGl0eXMvZW51bXMvcXVlcnl0eXBlJztcclxuaW1wb3J0IHsgUHJpbnRUeXBlIH0gZnJvbSAnLi9lbnRpdHlzL2VudW1zL3ByaW50dHlwZSc7XHJcbmltcG9ydCB7IERhdGFWYWxpZGF0b3IgfSBmcm9tICcuL3V0aWxzL2Nsb3VkcHJpbnQuZGF0YXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IEJhc2VTb3VyY2VPcHRpb25zIH0gZnJvbSAnLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL2Jhc2Vzb3VyY2VvcHRpb25zJztcclxuaW1wb3J0IHsgRm9ybWF0bGlzdGpvYkNvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1mb3JtYXRsaXN0am9iL2Zvcm1hdGxpc3Rqb2IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgTG9jYWxMYW5nUGlwZSB9IGZyb20gJy4vbG9jYWwucGlwZSc7XHJcblxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ2xvdWRwcmludEludGVybmFsU2VydmljZSB7XHJcbiBcclxuICAvKipcclxuICAgKiDmiZPljbDlj4LmlbDlrp7kvZNcclxuICAgKi9cclxuICBwcmludEVudGl0eSA9IG5ldyBQcmludEVudGl0eSgpO1xyXG5cclxuICAvKipcclxuICAgKiDorr7nva5QcmludEVudGl0eeWPguaVsFxyXG4gICAqIEBkZXNjcmlwdGlvbiDlpoLmnpzlpJbnlYxuZXfmlrDnmoRQcmludEVudGl0ee+8jOWImemcgOimgeiwg+eUqOivpeaWueazleWQjOatpXNlcnZpY2XnmoRlbnRpdHlcclxuICAgKiAgICAgICAgICAgICAg5aSW55WM5rKh5pyJbmV35paw55qEUHJpbnRFbnRpdHnvvIzliJnkuI3pnIDopoHosIPnlKjor6Xmlrnms5VcclxuICAgKi9cclxuICBzZXQgc2V0UHJpbnRFbnRpdHkoZW50aXR5KSB7XHJcbiAgICB0aGlzLnByaW50RW50aXR5ID0gZW50aXR5O1xyXG4gICAgLy8gdGhpcy5kZXNpZ25lclNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcbiAgICAvLyB0aGlzLnZpZXdlclNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcbiAgICB0aGlzLmZvcm1hdFNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcbiAgfVxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBmb3JtYXRTcnY6IFByaW50Rm9ybWF0U2VydmljZSxcclxuICAgIHByaXZhdGUgcmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBhcHBsaWNhdGlvblJlZjogQXBwbGljYXRpb25SZWYsXHJcbiAgICBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGFwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHdpbmRvd1NlcnZpY2U6IFdpbmRvd1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICApIHtcclxuICAgICAgXHJcbiAgICAgICAgLy8g6K6+572ucHJpbnRFbnRpdHnnmoTpu5jorqTlgLxcclxuICAgICAgICB0aGlzLnByaW50RW50aXR5LmFwcFVybCA9IFVybHMuQ2xvdWRQcmludEJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eS5pc1VzZU1ldGFEYXRhID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnByaW50RW50aXR5Lmxhbmd1YWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsYW5ndWFnZUNvZGVcIikgfHwgJ3poLUNIUyc7XHJcbiAgICBcclxuICAgICAgICB0aGlzLmZvcm1hdFNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipiZeaVsOaNrua6kOWIm+W7uuagvOW8jyovXHJcbiAgICBjcmVhdGVQcmludEZvcm1hdFdpdGhCRShiZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5jcmVhdGVQcmludEZvcm1hdFdpdGhCRShiZUlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKip2b+aVsOaNrua6kOWIm+W7uuagvOW8jyovXHJcbiAgICBjcmVhdGVQcmludEZvcm1hdFdpdGhWTyh2b0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5jcmVhdGVQcmludEZvcm1hdFdpdGhWTyh2b0lkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirmoLnmja7mlbDmja7mupBpZOiOt+WPluagvOW8jyovXHJcbiAgICBnZXRQcmludEZvcm1hdEJ5RGF0YVNyb3VjZUlkKHNvdXJjZUlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmdldEZvcm1hdEJ5U291cmNlSWQoc291cmNlSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuagueaNruaVsOaNrua6kOWSjOe7tOW6puiOt+WPluagvOW8jyovXHJcbiAgICBnZXRQcmludEZvcm1hdEJ5RGF0YVNyb3VjZUFuZERpbWVuc2lvbihiaWxsQ2F0ZWdvcnlJZCxzb3VyY2VJZCxmaXJzdERpbWVuc2lvbixzZWNvbmREaW1lbnNpb24pOiBQcm9taXNlPGFueT57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmdldFByaW50Rm9ybWF0QnlEYXRhU3JvdWNlQW5kRGltZW5zaW9uKGJpbGxDYXRlZ29yeUlkLHNvdXJjZUlkLGZpcnN0RGltZW5zaW9uLHNlY29uZERpbWVuc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoq5qC55o2u5Lia5Yqh5a+56LGhaWTojrflj5bmlbDmja7mupAqL1xyXG4gICAgZ2V0RGF0YVNvdXJjZUJ5Qk9JZChib0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueT57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmdldERhdGFTb3VyY2VCeUJPSWQoYm9JZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoq5qC55o2u5qC85byPaWTojrflj5bmoLzlvI8qL1xyXG4gICAgZ2V0Rm9ybWF0QnlGb3JtYXRJZChmb3JtYXRJZDpzdHJpbmcpIDogUHJvbWlzZTxhbnk+e1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5nZXRGb3JtYXRCeUZvcm1hdElkKGZvcm1hdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirmoLnmja7lt7LmnInnmoTmoLzlvI9pZOWSjOaVsOaNrua6kGlk77yM5a6e5pe26I635Y+W5pWw5o2u5rqQ57uT5p6E5ZCO57uE5oiQ5paw55qE5qC85byPKi9cclxuICAgIGdldE5ld1NvdXJjZUZvcm1hdEJ5Rm9ybWF0SWQoZm9ybWF0SWQ6c3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYuZ2V0TmV3U291cmNlRm9ybWF0QnlGb3JtYXRJZChmb3JtYXRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoq5qC55o2u5bey5pyJ55qE5qC85byPaWTlkozmlbDmja7mupBpZO+8jOivreiogO+8jOWunuaXtuiOt+WPluaVsOaNrua6kOe7k+aehOWQjue7hOaIkOaWsOeahOagvOW8jyovXHJcbiAgICBnZXROZXdTb3VyY2VGb3JtYXRCeUZvcm1hdElkQW5kTGFuZyhmb3JtYXRJZDpzdHJpbmcsbGFuZzpzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5nZXROZXdTb3VyY2VGb3JtYXRCeUZvcm1hdElkQW5kTGFuZyhmb3JtYXRJZCxsYW5nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirkv53lrZjmoLzlvI8qL1xyXG4gICAgc2F2ZShkYXRhOiBQcmludEZvcm1hdCkgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5zYXZlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuS/neWtmOagvOW8jyovXHJcbiAgICBzYXZlV2l0aFJlcyhkYXRhOiBQcmludEZvcm1hdCkgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5zYXZlV2l0aFJlcyhkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirliKDpmaTmoLzlvI8qL1xyXG4gICAgcmVtb3ZlKGZvcm1hdElkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYucmVtb3ZlKGZvcm1hdElkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirmoLnmja7moLzlvI9pZOiOt+WPluagvOW8jyovXHJcbiAgICBnZXRGb3JtYXRCeUlkKGlkOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGlmKERhdGFWYWxpZGF0b3IuY2hlY2tBcHBVcmwodGhpcy5wcmludEVudGl0eS5hcHBVcmwpPT1mYWxzZSl7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5U2VydmljZS5pbmZvKCfmnKrphY3nva7mraPnoa7nmoRhcHBVcmwnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYubG9hZEZvcm1hdChpZCwgJ0Nsb3VkUHJpbnQnKTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcbiJdfQ==