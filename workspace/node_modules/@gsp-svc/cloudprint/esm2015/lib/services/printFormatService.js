/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { PrintFormat } from '../entitys/printFormat';
import { Urls } from '../utils/cloudprint.Urls';
import { PrintEntity } from '../entitys/printEntity';
import { HttpClient } from '@angular/common/http';
import { Subject } from 'rxjs';
import { Config } from '../entitys/config';
import { DataValidator } from '../utils/cloudprint.datavalidator';
export class PrintFormatService {
    /**
     * @param {?} httpClient
     */
    constructor(httpClient) {
        this.httpClient = httpClient;
        this.printEntity = new PrintEntity();
        this.curSu = Config.PRINT_SU;
    }
    /**
     * @param {?} beId
     * @return {?}
     */
    createPrintFormatWithBE(beId) {
        /** @type {?} */
        const url = this.printEntity.appUrl + Urls.CreatePrintFormatWithBE + 'beId=' + beId + '&su=' + this.curSu;
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    }
    /**
     * @param {?} voId
     * @return {?}
     */
    createPrintFormatWithVO(voId) {
        /** @type {?} */
        const url = this.printEntity.appUrl + Urls.CreatePrintFormatWithVO + 'voId=' + voId + '&su=' + this.curSu;
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    }
    /**
     * @param {?} biznessObjectClassInfo
     * @return {?}
     */
    createPrintFormatWithBO(biznessObjectClassInfo) {
        /** @type {?} */
        const url = this.printEntity.appUrl + Urls.CreatePrintFormatWithBO + 'biznessObjectClassInfo=' + biznessObjectClassInfo + '&su=' + this.curSu;
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    }
    /**
     * @param {?} boId
     * @return {?}
     */
    getDataSourceByBOId(boId) {
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        /** @type {?} */
        const url = this.printEntity.appUrl + Urls.GetDataSourceByBOId;
        return this.httpClient.get(url + 'boId=' + boId + '&su=' + this.curSu).toPromise();
    }
    /**
     * @param {?} dataSourceId
     * @return {?}
     */
    getFormatBySourceId(dataSourceId) {
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.GetPrintFormatByDataSrouceId + 'dataSrouceId=' + dataSourceId + '&su=' + this.curSu, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    getPrintFormatByDataSrouceAndDimension(billCategoryId, sourceId, firstDimension, secondDimension) {
        firstDimension = firstDimension || '';
        secondDimension = secondDimension || '';
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.GetPrintFormatByDataSrouceAndDimension + 'billCategoryId=' + billCategoryId + '&sourceId=' + sourceId + '&firstDimension=' + firstDimension + '&secondDimension=' + secondDimension + '&su=' + this.curSu, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    getPrintFormatAndDevice(billCategoryId, sourceId, firstDimension, secondDimension) {
        firstDimension = firstDimension || '';
        secondDimension = secondDimension || '';
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        /** @type {?} */
        const data = {
            billCategoryId: billCategoryId,
            sourceId: sourceId,
            firstDimension: firstDimension,
            secondDimension: secondDimension
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.GetPrintFormatAndDevice + 'su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @return {?}
     */
    getPrintDevice() {
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(Urls.CloudPrintDeviceUrl + Urls.GetPrintDevice + 'su=' + this.curSu, null, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @param {?} formatId
     * @return {?}
     */
    getFormatByFormatId(formatId) {
        /** @type {?} */
        const url = this.printEntity.appUrl + Urls.LoadPrintFormatById + 'metadataId=' + formatId + '&su=' + this.curSu;
        // LoadPrintFormatById是个Get请求
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise()
            .then((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            return data;
        }));
    }
    /**
     * 根据已有的格式id和数据源id，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @return {?}
     */
    getNewSourceFormatByFormatId(formatId) {
        /** @type {?} */
        const url = Urls.CloudPrintBaseUrl + Urls.LoadNewSourcePrintFormatById;
        return this.httpClient.get(url + 'formatId=' + formatId).toPromise();
    }
    /**
     * 根据已有的格式id和数据源id,语言，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @param {?} lang
     * @return {?}
     */
    getNewSourceFormatByFormatIdAndLang(formatId, lang) {
        /** @type {?} */
        const url = Urls.CloudPrintBaseUrl + Urls.LoadNewSourcePrintFormatByIdAndLang;
        return this.httpClient.get(url + 'formatId=' + formatId + '&lang=' + lang).toPromise();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    save(data) {
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SavePrintFormat + '?su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    saveWithRes(data) {
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SavePrintFormatWithRes + '?su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    remove(data) {
        // const body = { 'printFormatId':data};
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.DeletePrintFormat + '/' + data + '?su=' + this.curSu, null, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * 加载格式
     * @param {?} reportID id
     * @param {?} flag
     * @return {?}
     */
    loadFormat(reportID, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /**
         * 对于GS内部集成，再外层其实已经给this.printEntity.format赋值了
         */
        if (this.printEntity.format) {
            /** @type {?} */
            const sub = new Subject();
            sub.complete(); // 没有这句话toPromise()里的内容不跑
            return sub.toPromise()
                .then((/**
             * @return {?}
             */
            () => {
                this.printEntity.printFormat = this.printEntity.printFormat || new PrintFormat();
                this.printEntity.printFormat.content = this.printEntity.format;
                return this.printEntity.format;
            }));
        }
        /**
         * 这块主要还是针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现CreatePrintFormatWithBE,CreatePrintFormatWithSchema和GetPrintFormatById这俩个get请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        let url;
        /** @type {?} */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (reportID && reportID.length > 0) { // 加载已有的格式
            url = this.printEntity.appUrl + Urls.LoadPrintFormatById + 'metadataId=' + reportID + '&su=' + this.curSu;
            // LoadPrintFormatById是个Get请求
            return this.httpClient.get(url, httpoptions).toPromise()
                .then((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                // 加载了格式后把格式记住
                this.printEntity.printFormat = data;
                this.printEntity.format = data.content;
                return data.content;
            }));
        }
        else {
            console.log(this.printEntity.format);
            console.log(reportID);
            console.error('格式id为空，无法获取格式信息');
        }
    }
    /**
     * 加载数据
     * @param {?} dataIds 要加载的数据Id
     * @param {?} flag
     * @return {?}
     */
    loadData(dataIds, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /**
         * 对于GS内部集成，再外层其实已经给this.printEntity.data赋值了
         */
        if (this.printEntity.data) {
            /** @type {?} */
            const sub = new Subject();
            sub.complete(); // 没有这句话toPromise()里的内容不跑
            return sub.toPromise()
                .then((/**
             * @return {?}
             */
            () => {
                return this.printEntity.data;
            }));
        }
        /**
         * 这块主要还是针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现GetPrintData这个get请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.LoadPrintData + 'dataIds=' + dataIds + '&su=' + this.curSu, httpoptions).toPromise()
            .then((/**
         * @param {?} data2
         * @return {?}
         */
        (data2) => {
            return data2;
        }));
    }
    /**
     * 单格式数据id渲染打印
     * GS内部/第三方
     * @param {?} beOptions 数据源选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    printSingleById(beOptions, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        const body = {
            BEOptions: beOptions,
            Options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (!beOptions.ServiceUnit) {
            return this.getSuByFormatId(beOptions.FormatId)
                .then((/**
             * @param {?} sucode
             * @return {?}
             */
            (sucode) => {
                beOptions.ServiceUnit = sucode;
                su = su || beOptions.ServiceUnit;
                return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleById + 'su=' + su, body, httpoptions).toPromise()
                    .then((/**
                 * @param {?} ret
                 * @return {?}
                 */
                (ret) => {
                    return ret;
                }));
            }));
        }
        else {
            su = su || beOptions.ServiceUnit;
            return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleById + 'su=' + su, body, httpoptions).toPromise()
                .then((/**
             * @param {?} ret
             * @return {?}
             */
            (ret) => {
                return ret;
            }));
        }
    }
    /**
     * 单格式过滤条件渲染打印
     * GS内部/第三方
     * @param {?} beOptions BEFilter选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    printSingleByFilter(beOptions, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        const body = {
            BEOptions: beOptions,
            Options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (!beOptions.ServiceUnit) {
            return this.getSuByFormatId(beOptions.FormatId)
                .then((/**
             * @param {?} sucode
             * @return {?}
             */
            (sucode) => {
                beOptions.ServiceUnit = sucode;
                su = su || beOptions.ServiceUnit;
                return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleByFilter + 'su=' + su, body, httpoptions).toPromise()
                    .then((/**
                 * @param {?} ret
                 * @return {?}
                 */
                (ret) => {
                    return ret;
                }));
            }));
        }
        else {
            su = su || beOptions.ServiceUnit;
            return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleByFilter + 'su=' + su, body, httpoptions).toPromise()
                .then((/**
             * @param {?} ret
             * @return {?}
             */
            (ret) => {
                return ret;
            }));
        }
    }
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    printMultiById(beOptionsList, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        const body = {
            sourceOptionsList: beOptionsList,
            options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintMultiById + 'su=' + su, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    printMultiByFilter(beOptionsList, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        const body = {
            sourceFilterOptionsList: beOptionsList,
            options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintMultiByFilter + 'su=' + su, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * 渲染测试数据
     * @param {?} formats
     * @param {?} datas
     * @param {?} flag
     * @return {?}
     */
    printTestData(formats, datas, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        const body = {
            format: formats,
            data: JSON.stringify(datas),
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintTestData + 'su=' + this.curSu, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * 触发打印事件
     * @param {?} data
     * @param {?} flag
     * @return {?}
     */
    sendPrintEvent(data, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        // const body = {
        //     formatid:formatid,
        //     su:su,
        // };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        const httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SendPrintEvent + 'su=' + this.curSu, data, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        (ret) => {
            return ret;
        }));
    }
    /**
     * @return {?}
     */
    isRemotePrint() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const url = this.printEntity.appUrl + Urls.IsRemotePrint + 'su=' + this.curSu;
            // LoadPrintFormatById是个Get请求
            /** @type {?} */
            const httpoptions = {};
            httpoptions['headers'] = {
                SessionId: this.printEntity.sessionId || '',
                'Content-Type': 'application/json'
            };
            // var httpops = Object.assign({},httpoptions);
            // httpops['responseType']="text/html";
            return yield this.httpClient.get(url, httpoptions).toPromise()
                .then((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                return data;
            }));
        });
    }
    /**
     * @return {?}
     */
    getEnableFonts() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const url = this.printEntity.appUrl + Urls.GetEnableFonts + 'su=' + this.curSu;
            // LoadPrintFormatById是个Get请求
            /** @type {?} */
            const httpoptions = {};
            httpoptions['headers'] = {
                SessionId: this.printEntity.sessionId || '',
                'Content-Type': 'application/json'
            };
            return yield this.httpClient.get(url, httpoptions).toPromise()
                .then((/**
             * @param {?} data
             * @return {?}
             */
            (data) => {
                return data;
            }));
        });
    }
    /**
     * 通过打印格式，获取bo，在获取su（这是一个临时方案）
     * @private
     * @param {?} formatId
     * @return {?}
     */
    getSuByFormatId(formatId) {
        /** @type {?} */
        const url = this.printEntity.appUrl + '/getSuByFormatId?formatId=' + formatId + '&su=cloudprint';
        /** @type {?} */
        const httpoptions = {};
        httpoptions['responseType'] = 'text/html';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise()
            .then((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            return data;
        }));
    }
}
PrintFormatService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
PrintFormatService.ctorParameters = () => [
    { type: HttpClient }
];
if (false) {
    /** @type {?} */
    PrintFormatService.prototype.printEntity;
    /**
     * @type {?}
     * @private
     */
    PrintFormatService.prototype.curSu;
    /**
     * @type {?}
     * @private
     */
    PrintFormatService.prototype.httpClient;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnRGb3JtYXRTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1zdmMvY2xvdWRwcmludC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9wcmludEZvcm1hdFNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDaEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3JELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVsRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSy9CLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFJbEUsTUFBTSxPQUFPLGtCQUFrQjs7OztJQU0zQixZQUFvQixVQUFzQjtRQUF0QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBSjFDLGdCQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztRQUV4QixVQUFLLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUdoQyxDQUFDOzs7OztJQUVELHVCQUF1QixDQUFDLElBQVk7O2NBQzFCLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsdUJBQXVCLEdBQUMsT0FBTyxHQUFFLElBQUksR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUs7O2NBQ2hHLFdBQVcsR0FBRyxFQUFFO1FBQ3RCLFdBQVcsQ0FBQyxTQUFTLENBQUMsR0FBRztZQUNyQixTQUFTLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLElBQUksRUFBRTtZ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QVcsQ0FBQyxTQUFTLElBQUksRUFBRTtZQUMzQyxjQUFjLEVBQUMsa0JBQWtCO1NBQ3BDLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBQyxXQUFXLENBQUMsQ0FBQyxTQUFTLEVBQUU7YUFDdEQsSUFBSTs7OztRQUFDLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDbEIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7OztZQXZpQkosVUFBVTs7OztZQVhGLFVBQVU7Ozs7SUFjZix5Q0FBZ0M7Ozs7O0lBRWhDLG1DQUFnQzs7Ozs7SUFFcEIsd0NBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgUHJpbnRGb3JtYXQgfSBmcm9tICcuLi9lbnRpdHlzL3ByaW50Rm9ybWF0JztcclxuaW1wb3J0IHsgVXJscyB9IGZyb20gJy4uL3V0aWxzL2Nsb3VkcHJpbnQuVXJscyc7XHJcbmltcG9ydCB7IFByaW50RW50aXR5IH0gZnJvbSAnLi4vZW50aXR5cy9wcmludEVudGl0eSc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnLi4vdXRpbHMvY2xvdWRwcmludC51dGlscyc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgU291cmNlT3B0aW9ucyB9IGZyb20gJy4uL2VudGl0eXMvZGF0YXNvdXJjZW9wdGlvbnMvc291cmNlT3B0aW9ucyc7XHJcbmltcG9ydCB7IE91dHB1dE9wdGlvbnMgfSBmcm9tICcuLi9lbnRpdHlzL291dHB1dG9wdGlvbnMvb3V0cHV0T3B0aW9ucyc7XHJcbmltcG9ydCB7IFNvdXJjZUZpbHRlck9wdGlvbnMgfSBmcm9tICcuLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL3NvdXJjZUZpbHRlck9wdGlvbnMnO1xyXG5pbXBvcnQgeyBCT09wdGlvbnMgfSBmcm9tICcuLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL2Jvb3B0aW9ucyc7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gJy4uL2VudGl0eXMvY29uZmlnJztcclxuaW1wb3J0IHsgRGF0YVZhbGlkYXRvciB9IGZyb20gJy4uL3V0aWxzL2Nsb3VkcHJpbnQuZGF0YXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IEJhc2VTb3VyY2VPcHRpb25zIH0gZnJvbSAnLi4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9iYXNlc291cmNlb3B0aW9ucyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBQcmludEZvcm1hdFNlcnZpY2Uge1xyXG5cclxuICAgIHByaW50RW50aXR5ID0gbmV3IFByaW50RW50aXR5KCk7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJTdSA9IENvbmZpZy5QUklOVF9TVTtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwQ2xpZW50OiBIdHRwQ2xpZW50KSB7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUHJpbnRGb3JtYXRXaXRoQkUoYmVJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuQ3JlYXRlUHJpbnRGb3JtYXRXaXRoQkUrJ2JlSWQ9JysgYmVJZCArICcmc3U9JyArIHRoaXMuY3VyU3U7XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCAsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVByaW50Rm9ybWF0V2l0aFZPKHZvSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5DcmVhdGVQcmludEZvcm1hdFdpdGhWTysndm9JZD0nICsgdm9JZCArICcmc3U9JyArIHRoaXMuY3VyU3U7XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCxodHRwb3B0aW9ucykudG9Qcm9taXNlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBjcmVhdGVQcmludEZvcm1hdFdpdGhCTyhiaXpuZXNzT2JqZWN0Q2xhc3NJbmZvOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuQ3JlYXRlUHJpbnRGb3JtYXRXaXRoQk8rJ2Jpem5lc3NPYmplY3RDbGFzc0luZm89JyArIGJpem5lc3NPYmplY3RDbGFzc0luZm8gKyAnJnN1PScgKyB0aGlzLmN1clN1O1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGdldERhdGFTb3VyY2VCeUJPSWQoYm9JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+e1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuR2V0RGF0YVNvdXJjZUJ5Qk9JZDtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwgKyAnYm9JZD0nICsgIGJvSWQgKyAnJnN1PScrdGhpcy5jdXJTdSkudG9Qcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Rm9ybWF0QnlTb3VyY2VJZChkYXRhU291cmNlSWQ6c3RyaW5nKSA6IFByb21pc2U8YW55PntcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkdldFByaW50Rm9ybWF0QnlEYXRhU3JvdWNlSWQrJ2RhdGFTcm91Y2VJZD0nICsgZGF0YVNvdXJjZUlkKycmc3U9Jyt0aGlzLmN1clN1LGh0dHBvcHRpb25zKVxyXG4gICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmludEZvcm1hdEJ5RGF0YVNyb3VjZUFuZERpbWVuc2lvbihiaWxsQ2F0ZWdvcnlJZCxzb3VyY2VJZCxmaXJzdERpbWVuc2lvbixzZWNvbmREaW1lbnNpb24pIDogUHJvbWlzZTxhbnk+e1xyXG5cclxuICAgICAgICBmaXJzdERpbWVuc2lvbiA9IGZpcnN0RGltZW5zaW9uIHx8ICcnO1xyXG4gICAgICAgIHNlY29uZERpbWVuc2lvbiA9IHNlY29uZERpbWVuc2lvbiB8fCAnJ1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuR2V0UHJpbnRGb3JtYXRCeURhdGFTcm91Y2VBbmREaW1lbnNpb24rJ2JpbGxDYXRlZ29yeUlkPScrYmlsbENhdGVnb3J5SWQrJyZzb3VyY2VJZD0nK3NvdXJjZUlkKycmZmlyc3REaW1lbnNpb249JytmaXJzdERpbWVuc2lvbisnJnNlY29uZERpbWVuc2lvbj0nK3NlY29uZERpbWVuc2lvbisnJnN1PScrdGhpcy5jdXJTdSxodHRwb3B0aW9ucylcclxuICAgICAgICAudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigocmV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJpbnRGb3JtYXRBbmREZXZpY2UoYmlsbENhdGVnb3J5SWQsc291cmNlSWQsZmlyc3REaW1lbnNpb24sc2Vjb25kRGltZW5zaW9uKSA6IFByb21pc2U8YW55PntcclxuXHJcbiAgICAgICAgZmlyc3REaW1lbnNpb24gPSBmaXJzdERpbWVuc2lvbiB8fCAnJztcclxuICAgICAgICBzZWNvbmREaW1lbnNpb24gPSBzZWNvbmREaW1lbnNpb24gfHwgJydcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICAgICAgYmlsbENhdGVnb3J5SWQ6YmlsbENhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgIHNvdXJjZUlkOnNvdXJjZUlkLFxyXG4gICAgICAgICAgICBmaXJzdERpbWVuc2lvbjpmaXJzdERpbWVuc2lvbixcclxuICAgICAgICAgICAgc2Vjb25kRGltZW5zaW9uOnNlY29uZERpbWVuc2lvblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkdldFByaW50Rm9ybWF0QW5kRGV2aWNlKydzdT0nK3RoaXMuY3VyU3UsIGRhdGEsaHR0cG9wdGlvbnMpXHJcbiAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByaW50RGV2aWNlKCkgOiBQcm9taXNlPGFueT57XHJcblxyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KFVybHMuQ2xvdWRQcmludERldmljZVVybCArIFVybHMuR2V0UHJpbnREZXZpY2UrJ3N1PScrdGhpcy5jdXJTdSwgbnVsbCxodHRwb3B0aW9ucylcclxuICAgICAgICAudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigocmV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Rm9ybWF0QnlGb3JtYXRJZChmb3JtYXRJZDpzdHJpbmcpIDogUHJvbWlzZTxhbnk+e1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5Mb2FkUHJpbnRGb3JtYXRCeUlkKydtZXRhZGF0YUlkPScgKyBmb3JtYXRJZCsnJnN1PScrdGhpcy5jdXJTdTtcclxuICAgICAgICAvLyBMb2FkUHJpbnRGb3JtYXRCeUlk5piv5LiqR2V06K+35rGCXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCxodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruW3suacieeahOagvOW8j2lk5ZKM5pWw5o2u5rqQaWTvvIzlrp7ml7bojrflj5bmlbDmja7mupDnu5PmnoTlkI7nu4TmiJDmlrDnmoTmoLzlvI9cclxuICAgICAqL1xyXG4gICAgZ2V0TmV3U291cmNlRm9ybWF0QnlGb3JtYXRJZChmb3JtYXRJZDpzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFVybHMuQ2xvdWRQcmludEJhc2VVcmwgKyBVcmxzLkxvYWROZXdTb3VyY2VQcmludEZvcm1hdEJ5SWQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCArICdmb3JtYXRJZD0nICsgIGZvcm1hdElkKS50b1Byb21pc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruW3suacieeahOagvOW8j2lk5ZKM5pWw5o2u5rqQaWQs6K+t6KiA77yM5a6e5pe26I635Y+W5pWw5o2u5rqQ57uT5p6E5ZCO57uE5oiQ5paw55qE5qC85byPXHJcbiAgICAgKi9cclxuICAgIGdldE5ld1NvdXJjZUZvcm1hdEJ5Rm9ybWF0SWRBbmRMYW5nKGZvcm1hdElkOnN0cmluZyxsYW5nOnN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gVXJscy5DbG91ZFByaW50QmFzZVVybCArIFVybHMuTG9hZE5ld1NvdXJjZVByaW50Rm9ybWF0QnlJZEFuZExhbmc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCArICdmb3JtYXRJZD0nICsgIGZvcm1hdElkICsnJmxhbmc9JytsYW5nKS50b1Byb21pc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlKGRhdGE6IFByaW50Rm9ybWF0KSA6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuU2F2ZVByaW50Rm9ybWF0Kyc/c3U9Jyt0aGlzLmN1clN1LCBkYXRhLGh0dHBvcHRpb25zKVxyXG4gICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlV2l0aFJlcyhkYXRhOiBQcmludEZvcm1hdCkgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlNhdmVQcmludEZvcm1hdFdpdGhSZXMrJz9zdT0nK3RoaXMuY3VyU3UsIGRhdGEsaHR0cG9wdGlvbnMpXHJcbiAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZShkYXRhOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBjb25zdCBib2R5ID0geyAncHJpbnRGb3JtYXRJZCc6ZGF0YX07XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuRGVsZXRlUHJpbnRGb3JtYXQrJy8nK2RhdGErJz9zdT0nK3RoaXMuY3VyU3UsIG51bGwsaHR0cG9wdGlvbnMpXHJcbiAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295qC85byPXHJcbiAgICAgKiBAcGFyYW0gcmVwb3J0SUQgaWRcclxuICAgICAqL1xyXG4gICAgbG9hZEZvcm1hdChyZXBvcnRJRDogc3RyaW5nLCBmbGFnOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGlmIChEYXRhVmFsaWRhdG9yLmNoZWNrRmxhZyhmbGFnKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ+WGhemDqOaWueazle+8jOWklumDqOivt+S9v+eUqGNsb3VkcHJpbnQuc2VydmljZeS4i+eahOacjeWKoScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5a+55LqOR1PlhoXpg6jpm4bmiJDvvIzlho3lpJblsYLlhbblrp7lt7Lnu4/nu5l0aGlzLnByaW50RW50aXR5LmZvcm1hdOi1i+WAvOS6hlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmICh0aGlzLnByaW50RW50aXR5LmZvcm1hdCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWIgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgICAgIHN1Yi5jb21wbGV0ZSgpOyAvLyDmsqHmnInov5nlj6Xor510b1Byb21pc2UoKemHjOeahOWGheWuueS4jei3kVxyXG4gICAgICAgICAgICByZXR1cm4gc3ViLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQgPSB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0IHx8IG5ldyBQcmludEZvcm1hdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdC5jb250ZW50ID0gdGhpcy5wcmludEVudGl0eS5mb3JtYXQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmludEVudGl0eS5mb3JtYXQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5Li76KaB6L+Y5piv6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBDcmVhdGVQcmludEZvcm1hdFdpdGhCRSxDcmVhdGVQcmludEZvcm1hdFdpdGhTY2hlbWHlkoxHZXRQcmludEZvcm1hdEJ5SWTov5nkv6nkuKpnZXTor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCB1cmw6IHN0cmluZyA7XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChyZXBvcnRJRCAmJiByZXBvcnRJRC5sZW5ndGggPiAwKSB7Ly8g5Yqg6L295bey5pyJ55qE5qC85byPXHJcbiAgICAgICAgICAgIHVybCA9IHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5Mb2FkUHJpbnRGb3JtYXRCeUlkKydtZXRhZGF0YUlkPScgKyByZXBvcnRJRCsnJnN1PScrdGhpcy5jdXJTdTtcclxuICAgICAgICAgICAgLy8gTG9hZFByaW50Rm9ybWF0QnlJZOaYr+S4qkdldOivt+axglxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOWKoOi9veS6huagvOW8j+WQjuaKiuagvOW8j+iusOS9j1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50RW50aXR5LmZvcm1hdCA9IGRhdGEuY29udGVudDsgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnByaW50RW50aXR5LmZvcm1hdCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcG9ydElEKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign5qC85byPaWTkuLrnqbrvvIzml6Dms5Xojrflj5bmoLzlvI/kv6Hmga8nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb3mlbDmja5cclxuICAgICAqIEBwYXJhbSBkYXRhSWRzIOimgeWKoOi9veeahOaVsOaNrklkXHJcbiAgICAgKi9cclxuICAgIGxvYWREYXRhKGRhdGFJZHM6IHN0cmluZywgZmxhZzogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWvueS6jkdT5YaF6YOo6ZuG5oiQ77yM5YaN5aSW5bGC5YW25a6e5bey57uP57uZdGhpcy5wcmludEVudGl0eS5kYXRh6LWL5YC85LqGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKHRoaXMucHJpbnRFbnRpdHkuZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWIgPSBuZXcgU3ViamVjdDxhbnk+KCk7XHJcbiAgICAgICAgICAgIHN1Yi5jb21wbGV0ZSgpOyAvLyDmsqHmnInov5nlj6Xor510b1Byb21pc2UoKemHjOeahOWGheWuueS4jei3kVxyXG4gICAgICAgICAgICByZXR1cm4gc3ViLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaW50RW50aXR5LmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5Li76KaB6L+Y5piv6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBHZXRQcmludERhdGHov5nkuKpnZXTor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuTG9hZFByaW50RGF0YSArICdkYXRhSWRzPScgKyBkYXRhSWRzKycmc3U9Jyt0aGlzLmN1clN1LCBodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V5qC85byP5pWw5o2uaWTmuLLmn5PmiZPljbBcclxuICAgICAqIEdT5YaF6YOoL+esrOS4ieaWuVxyXG4gICAgICogQHBhcmFtIGJlT3B0aW9ucyDmlbDmja7mupDpgInpoblcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIOWvvOWHuumAiemhuVxyXG4gICAgICogQHBhcmFtIHN1OuWPjOagiOaooeW8j+S4i++8jOivpXN15Y+q5piv55So5p2l57uZbmdpbnjmnaXphY3nva7ot6/nlLFcclxuICAgICAqL1xyXG4gICAgcHJpbnRTaW5nbGVCeUlkKGJlT3B0aW9uczogU291cmNlT3B0aW9ucywgb3B0aW9uczogT3V0cHV0T3B0aW9ucyAsc3U6c3RyaW5nLCAgZmxhZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgQkVPcHRpb25zOiBiZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIE9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+WmguaenOmSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wUHJpbnTov5nkuKpwb3N06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydyZXNwb25zZVR5cGUnXSA9ICdibG9iJztcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZighYmVPcHRpb25zLlNlcnZpY2VVbml0KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3VCeUZvcm1hdElkKGJlT3B0aW9ucy5Gb3JtYXRJZClcclxuICAgICAgICAgICAgLnRoZW4oKHN1Y29kZSk9PntcclxuICAgICAgICAgICAgICAgIGJlT3B0aW9ucy5TZXJ2aWNlVW5pdCA9IHN1Y29kZTtcclxuICAgICAgICAgICAgICAgIHN1ID0gc3UgfHwgYmVPcHRpb25zLlNlcnZpY2VVbml0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5QcmludFNpbmdsZUJ5SWQgKyAnc3U9JytzdSwgYm9keSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmV0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzdSA9IHN1IHx8IGJlT3B0aW9ucy5TZXJ2aWNlVW5pdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5QcmludFNpbmdsZUJ5SWQgKyAnc3U9JytzdSwgYm9keSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Y2V5qC85byP6L+H5ruk5p2h5Lu25riy5p+T5omT5Y2wXHJcbiAgICAgKiBHU+WGhemDqC/nrKzkuInmlrlcclxuICAgICAqIEBwYXJhbSBiZU9wdGlvbnMgQkVGaWx0ZXLpgInpoblcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIOWvvOWHuumAiemhuVxyXG4gICAgICogQHBhcmFtIHN1OuWPjOagiOaooeW8j+S4i++8jOivpXN15Y+q5piv55So5p2l57uZbmdpbnjmnaXphY3nva7ot6/nlLFcclxuICAgICAqL1xyXG4gICAgcHJpbnRTaW5nbGVCeUZpbHRlcihiZU9wdGlvbnM6IFNvdXJjZUZpbHRlck9wdGlvbnMsIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsc3U6c3RyaW5nLCBmbGFnKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBCRU9wdGlvbnM6IGJlT3B0aW9ucyxcclxuICAgICAgICAgICAgT3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+WmguaenOmSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wUHJpbnTov5nkuKpwb3N06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydyZXNwb25zZVR5cGUnXSA9ICdibG9iJztcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZighYmVPcHRpb25zLlNlcnZpY2VVbml0KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3VCeUZvcm1hdElkKGJlT3B0aW9ucy5Gb3JtYXRJZClcclxuICAgICAgICAgICAgLnRoZW4oKHN1Y29kZSk9PntcclxuICAgICAgICAgICAgICAgIGJlT3B0aW9ucy5TZXJ2aWNlVW5pdCA9IHN1Y29kZTtcclxuICAgICAgICAgICAgICAgIHN1ID0gc3UgfHwgYmVPcHRpb25zLlNlcnZpY2VVbml0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5QcmludFNpbmdsZUJ5RmlsdGVyICsgJ3N1PScrc3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc3UgPSBzdSB8fCBiZU9wdGlvbnMuU2VydmljZVVuaXQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRTaW5nbGVCeUZpbHRlciArICdzdT0nK3N1LCBib2R5LCBodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc3U65Y+M5qCI5qih5byP5LiL77yM6K+lc3Xlj6rmmK/nlKjmnaXnu5luZ2lueOadpemFjee9rui3r+eUsVxyXG4gICAgICovXHJcbiAgICBwcmludE11bHRpQnlJZChiZU9wdGlvbnNMaXN0OiBBcnJheTxTb3VyY2VPcHRpb25zPiwgb3B0aW9uczogT3V0cHV0T3B0aW9ucywgc3U6U3RyaW5nICwgZmxhZyk6IFByb21pc2U8c3RyaW5nPntcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBzb3VyY2VPcHRpb25zTGlzdDogYmVPcHRpb25zTGlzdCxcclxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5aaC5p6c6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBQcmludOi/meS4qnBvc3Tor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ3Jlc3BvbnNlVHlwZSddID0gJ2Jsb2InO1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRNdWx0aUJ5SWQgKyAnc3U9JytzdSwgYm9keSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzdTrlj4zmoIjmqKHlvI/kuIvvvIzor6VzdeWPquaYr+eUqOadpee7mW5naW545p2l6YWN572u6Lev55SxXHJcbiAgICAgKi9cclxuICAgIHByaW50TXVsdGlCeUZpbHRlcihiZU9wdGlvbnNMaXN0OiBBcnJheTxTb3VyY2VGaWx0ZXJPcHRpb25zPiwgb3B0aW9uczogT3V0cHV0T3B0aW9ucywgc3U6U3RyaW5nICwgZmxhZyk6IFByb21pc2U8c3RyaW5nPntcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgICAgICBzb3VyY2VGaWx0ZXJPcHRpb25zTGlzdDogYmVPcHRpb25zTGlzdCxcclxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5aaC5p6c6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBQcmludOi/meS4qnBvc3Tor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ3Jlc3BvbnNlVHlwZSddID0gJ2Jsb2InO1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRNdWx0aUJ5RmlsdGVyICsgJ3N1PScrc3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5riy5p+T5rWL6K+V5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIHByaW50VGVzdERhdGEoZm9ybWF0czpTdHJpbmcsIGRhdGFzOlN0cmluZyAsIGZsYWcpOiBQcm9taXNlPHN0cmluZz57XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXRzLFxyXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhcyksXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDov5nlnZflpoLmnpzpkojlr7nnmoTnrKzkuInmlrnvvIznrKzkuInmlrnpgJrov4fovazosIPnmoTmlrnlvI9cclxuICAgICAgICAgKiAxLuesrOS4ieaWueacjeWKoeerr+WunueOsFByaW506L+Z5LiqcG9zdOivt+axguaOpeWPo1xyXG4gICAgICAgICAqIDIu56ys5LiJ5pa55pyN5Yqh56uv6L+Z5L+p6K+35rGC5o6l5Y+j6LCD55So5LqR5omT5Y2w55qE5pyN5YqhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1sncmVzcG9uc2VUeXBlJ10gPSAnYmxvYic7XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5QcmludFRlc3REYXRhICsgJ3N1PScrdGhpcy5jdXJTdSwgYm9keSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDop6blj5HmiZPljbDkuovku7ZcclxuICAgICAqL1xyXG4gICAgc2VuZFByaW50RXZlbnQoZGF0YSwgZmxhZyk6IFByb21pc2U8c3RyaW5nPntcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgIC8vICAgICBmb3JtYXRpZDpmb3JtYXRpZCxcclxuICAgICAgICAvLyAgICAgc3U6c3UsXHJcbiAgICAgICAgLy8gfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDov5nlnZflpoLmnpzpkojlr7nnmoTnrKzkuInmlrnvvIznrKzkuInmlrnpgJrov4fovazosIPnmoTmlrnlvI9cclxuICAgICAgICAgKiAxLuesrOS4ieaWueacjeWKoeerr+WunueOsFByaW506L+Z5LiqcG9zdOivt+axguaOpeWPo1xyXG4gICAgICAgICAqIDIu56ys5LiJ5pa55pyN5Yqh56uv6L+Z5L+p6K+35rGC5o6l5Y+j6LCD55So5LqR5omT5Y2w55qE5pyN5YqhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlNlbmRQcmludEV2ZW50ICsgJ3N1PScrdGhpcy5jdXJTdSwgZGF0YSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaXNSZW1vdGVQcmludCgpIDogUHJvbWlzZTxhbnk+e1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5Jc1JlbW90ZVByaW50KydzdT0nK3RoaXMuY3VyU3U7XHJcbiAgICAgICAgLy8gTG9hZFByaW50Rm9ybWF0QnlJZOaYr+S4qkdldOivt+axglxyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gdmFyIGh0dHBvcHMgPSBPYmplY3QuYXNzaWduKHt9LGh0dHBvcHRpb25zKTtcclxuICAgICAgICAvLyBodHRwb3BzWydyZXNwb25zZVR5cGUnXT1cInRleHQvaHRtbFwiO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IFxyXG5cclxuICAgIGFzeW5jIGdldEVuYWJsZUZvbnRzKCkgOiBQcm9taXNlPGFueT57XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkdldEVuYWJsZUZvbnRzKydzdT0nK3RoaXMuY3VyU3U7XHJcbiAgICAgICAgLy8gTG9hZFByaW50Rm9ybWF0QnlJZOaYr+S4qkdldOivt+axglxyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaHR0cENsaWVudC5nZXQodXJsLGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4fmiZPljbDmoLzlvI/vvIzojrflj5Zib++8jOWcqOiOt+WPlnN177yI6L+Z5piv5LiA5Liq5Li05pe25pa55qGI77yJXHJcbiAgICAgKiBAcGFyYW0gaWQgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U3VCeUZvcm1hdElkKGZvcm1hdElkKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArJy9nZXRTdUJ5Rm9ybWF0SWQ/Zm9ybWF0SWQ9JyArIGZvcm1hdElkKycmc3U9Y2xvdWRwcmludCc7XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1sncmVzcG9uc2VUeXBlJ10gPSAndGV4dC9odG1sJztcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCxodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuIFxyXG59XHJcbiJdfQ==