/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable, Injector, ApplicationRef, LOCALE_ID } from '@angular/core';
import { ComponentFactoryResolver } from '@angular/core';
import { CloudprintDesignerComponent } from './cloudprint-designer/cloudprint-designer.component';
import { CloudprintViewerComponent } from './cloudprint-viewer/cloudprint-viewer.component';
import { PrintEntity } from './entitys/printEntity';
import { NotifyService } from '@farris/ui-notify';
import { Urls } from './utils/cloudprint.Urls';
import { AppService } from '@gsp-sys/rtf-common';
import { CmpType } from './entitys/enums/cmpType';
import { OutputParam } from './entitys/outputoptions/outputParam';
import { PrintFormatService } from './services/printFormatService';
import { SourceType } from './entitys/enums/sourceType';
import { PrintFormat } from './entitys/printFormat';
import { WindowService } from '@progress/kendo-angular-dialog';
import { FormatlistComponent } from './cloudprint-formatlist/formatlist.component';
import { Utils } from './utils/cloudprint.utils';
import { CloudprintdesignerService } from './cloudprint-designer/cloudprint-designer.service';
import { CloudprintviewerService } from './cloudprint-viewer/cloudprint-viewer.service';
import { QueryType } from './entitys/enums/querytype';
import { PrintType } from './entitys/enums/printtype';
import { DataValidator } from './utils/cloudprint.datavalidator';
import { FormatlistjobComponent } from './cloudprint-formatlistjob/formatlistjob.component';
import { BsModalService } from '@farris/ui-modal';
import { LocalLangPipe } from './local.pipe';
var CloudprintService = /** @class */ (function () {
    function CloudprintService(formatSrv, resolver, designerSrv, viewerSrv, injector, applicationRef, notifyService, appService, windowService, modalService) {
        this.formatSrv = formatSrv;
        this.resolver = resolver;
        this.designerSrv = designerSrv;
        this.viewerSrv = viewerSrv;
        this.injector = injector;
        this.applicationRef = applicationRef;
        this.notifyService = notifyService;
        this.appService = appService;
        this.windowService = windowService;
        this.modalService = modalService;
        /**
         * 打印参数实体
         */
        this.printEntity = new PrintEntity();
        //#region 格式选择列表相关接口
        this.windowRef = undefined;
        // 设置printEntity的默认值
        this.printEntity.appUrl = Urls.CloudPrintBaseUrl;
        this.printEntity.isUseMetaData = true;
        this.printEntity.language = localStorage.getItem("languageCode") || 'zh-CHS';
        // 将printEntity设置到designer service上（不设置，后面调用服务会发现服务的printEntity是空的）
        // this.designerSrv.printEntity = this.printEntity;
        // 将printEntity设置到viewer service上（不设置，后面调用服务会发现服务的printEntity是空的）
        // this.viewerSrv.printEntity = this.printEntity;
        this.formatSrv.printEntity = this.printEntity;
        if (this.injector) {
            this.modalService = this.injector.get(BsModalService);
            this.localeid = localStorage.getItem("languageCode") || this.injector.get(LOCALE_ID);
            this.localpipe = new LocalLangPipe(this.localeid);
        }
    }
    Object.defineProperty(CloudprintService.prototype, "setPrintEntity", {
        /**
         * 设置PrintEntity参数
         * @description 如果外界new新的PrintEntity，则需要调用该方法同步service的entity
         *              外界没有new新的PrintEntity，则不需要调用该方法
         */
        set: /**
         * 设置PrintEntity参数
         * \@description 如果外界new新的PrintEntity，则需要调用该方法同步service的entity
         *              外界没有new新的PrintEntity，则不需要调用该方法
         * @param {?} entity
         * @return {?}
         */
        function (entity) {
            this.printEntity = entity;
            // this.designerSrv.printEntity = this.printEntity;
            // this.viewerSrv.printEntity = this.printEntity;
            this.formatSrv.printEntity = this.printEntity;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 运行时打印时根据维度过滤弹出打印格式选择列表
     * @param dataSourceId 数据源Id
     * @param filter 是否过滤条件
     * @param beOptions beOptions
     * @param options 输出options
     * @param ele 指定的element元素
     */
    /**
     * 运行时打印时根据维度过滤弹出打印格式选择列表
     * @private
     * @param {?} beOptions beOptions
     * @param {?} options 输出options
     * @param {?} ele 指定的element元素
     * @param {?} filter 是否过滤条件
     * @return {?}
     */
    CloudprintService.prototype.openFormatListByDimension = /**
     * 运行时打印时根据维度过滤弹出打印格式选择列表
     * @private
     * @param {?} beOptions beOptions
     * @param {?} options 输出options
     * @param {?} ele 指定的element元素
     * @param {?} filter 是否过滤条件
     * @return {?}
     */
    function (beOptions, options, ele, filter) {
        var _this = this;
        /** @type {?} */
        var that = this;
        /** @type {?} */
        var dataSourceId = beOptions.SourceId;
        /** @type {?} */
        var billCategoryId = beOptions.billCategoryId;
        return this.formatSrv.getPrintFormatByDataSrouceAndDimension(billCategoryId, dataSourceId, ((/** @type {?} */ (beOptions))).FirstDimensionVal, ((/** @type {?} */ (beOptions))).SecondDimensionVal).then((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            /** @type {?} */
            var format = (res != null && res.length != undefined) ? res : [];
            //只有一条打印格式，直接输出预览
            if (format.length === 1) {
                return that.outputBySingleSelectionFormat({
                    'id': format[0].id,
                    'isFilter': filter,
                    'beoptions': Object.assign({}, beOptions),
                    'options': options,
                    'isJob': false,
                    'printerName': '',
                    'boxId': '',
                    'printSetting': null,
                    'ele': ele
                });
            }
            /** @type {?} */
            var factory = that.resolver.resolveComponentFactory(FormatlistComponent);
            /** @type {?} */
            var printsetting = factory.create(that.injector);
            printsetting.instance.formats = tslib_1.__spread(format);
            printsetting.instance.localepip = that.localpipe;
            /** @type {?} */
            var dlg = _this.modalService.show(printsetting, {
                title: _this.localpipe.transform('printformat'),
                width: 400,
                height: 500,
                showButtons: true,
                showMaxButton: false,
                buttons: [
                    { text: _this.localpipe.transform('print'), cls: 'btn btn-primary', handle: (/**
                         * @return {?}
                         */
                        function () {
                            printsetting.instance.printJob();
                        }) },
                    { text: _this.localpipe.transform('cancel'), cls: 'btn btn-secondary', handle: (/**
                         * @return {?}
                         */
                        function () {
                            dlg.close();
                        }) }
                ],
            });
            // printsetting.instance.dlg = dlg;
            //订阅了弹出的格式选择列表的关闭事件
            printsetting.instance.print.subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                dlg.close();
                return that.outputBySingleSelectionFormat({
                    'id': data.id,
                    'isFilter': filter,
                    'beoptions': Object.assign({}, beOptions),
                    'options': options,
                    'isJob': false,
                    'printerName': '',
                    'boxId': '',
                    'printSetting': null,
                    'ele': ele
                });
            }));
        }));
    };
    /**
     * 后台打印任务的格式选择和打印配置列表
     */
    /**
     * 后台打印任务的格式选择和打印配置列表
     * @private
     * @param {?} beOptions
     * @param {?} options
     * @param {?} filter
     * @param {?} isMulti
     * @return {?}
     */
    CloudprintService.prototype.openFormatListByDimension4Job = /**
     * 后台打印任务的格式选择和打印配置列表
     * @private
     * @param {?} beOptions
     * @param {?} options
     * @param {?} filter
     * @param {?} isMulti
     * @return {?}
     */
    function (beOptions, options, filter, isMulti) {
        var _this = this;
        /** @type {?} */
        var that = this;
        if (isMulti) { //批量打印
            return this.formatSrv.getPrintDevice().then((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                /** @type {?} */
                var device = data || [];
                /** @type {?} */
                var ids = '';
                beOptions.forEach((/**
                 * @param {?} x
                 * @return {?}
                 */
                function (x) { return ids += x.FormatId + ','; }));
                /** @type {?} */
                var factory = that.resolver.resolveComponentFactory(FormatlistjobComponent);
                /** @type {?} */
                var printsetting = factory.create(that.injector);
                printsetting.instance.boxlist = device;
                printsetting.instance.formatId = ids.length > 0 ? ids.substr(0, ids.length - 1) : ids;
                printsetting.instance.isShowFormat = false;
                printsetting.instance.localepip = that.localpipe;
                /** @type {?} */
                var dlg = _this.modalService.show(printsetting, {
                    title: _this.localpipe.transform('printset'),
                    width: 800,
                    height: 500,
                    showButtons: true,
                    showMaxButton: false,
                    buttons: [
                        { text: _this.localpipe.transform('print'), cls: 'btn btn-primary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                printsetting.instance.printJob();
                            }) },
                        { text: _this.localpipe.transform('cancel'), cls: 'btn btn-secondary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                dlg.close();
                            }) }
                    ],
                });
                //订阅了弹出的格式选择列表的关闭事件
                printsetting.instance.print.subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    dlg.close();
                    return that.outputByMultiSelectionFormat({
                        'isFilter': filter,
                        'beoptions': tslib_1.__spread(beOptions),
                        'options': Object.assign({}, options),
                        'isJob': true,
                        'printerName': data.printter,
                        'boxId': data.boxId,
                        'printSetting': data.printSetting,
                        'ele': null
                    });
                }));
            }));
        }
        else {
            /** @type {?} */
            var billCategoryId = beOptions[0].billCategoryId;
            /** @type {?} */
            var dataSourceId = beOptions[0].SourceId;
            return this.formatSrv.getPrintFormatAndDevice(billCategoryId, dataSourceId, ((/** @type {?} */ (beOptions))).FirstDimensionVal, ((/** @type {?} */ (beOptions))).SecondDimensionVal).then((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                /** @type {?} */
                var format = res.format || [];
                /** @type {?} */
                var device = res.device || [];
                //只有一条打印格式，则不用再选择格式
                if (format.length === 1) {
                    beOptions[0].FormatId = format[0].id;
                }
                /** @type {?} */
                var factory = that.resolver.resolveComponentFactory(FormatlistjobComponent);
                /** @type {?} */
                var printsetting = factory.create(that.injector);
                printsetting.instance.formats = format;
                printsetting.instance.boxlist = device;
                printsetting.instance.formatId = beOptions[0].FormatId;
                printsetting.instance.isShowFormat = beOptions[0].FormatId ? false : true;
                printsetting.instance.localepip = that.localpipe;
                /** @type {?} */
                var dlg = _this.modalService.show(printsetting, {
                    title: _this.localpipe.transform('printset'),
                    width: 800,
                    height: 500,
                    showButtons: true,
                    showMaxButton: false,
                    buttons: [
                        { text: _this.localpipe.transform('print'), cls: 'btn btn-primary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                printsetting.instance.printJob();
                            }) },
                        { text: _this.localpipe.transform('cancel'), cls: 'btn btn-secondary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                dlg.close();
                            }) }
                    ],
                });
                //订阅了弹出的格式选择列表的关闭事件
                printsetting.instance.print.subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    dlg.close();
                    return that.outputBySingleSelectionFormat({
                        'id': data.id,
                        'isFilter': filter,
                        'beoptions': Object.assign({}, beOptions[0]),
                        'options': Object.assign({}, options),
                        'isJob': true,
                        'printerName': data.printter,
                        'boxId': data.boxId,
                        'printSetting': data.printSetting,
                        'ele': null
                    });
                }));
            }));
        }
    };
    // 选了格式后的输出
    // 选了格式后的输出
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    CloudprintService.prototype.outputBySingleSelectionFormat = 
    // 选了格式后的输出
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        var _this = this;
        console.log('选完格式准备渲染: ' + JSON.stringify(res));
        /** @type {?} */
        var self = this;
        if (!res.id) {
            return;
        }
        res.beoptions.FormatId = res.id;
        res.options.DeviceId = res.boxId;
        res.options.printerName = res.printerName;
        res.options.printSetting = res.printSetting;
        res.options.printJob = res.isJob;
        if (res.isJob) { //后台打印
            if (res.isFilter === true) {
                return this.formatSrv.printSingleByFilter(res.beoptions, res.options, res.su, 'CloudPrint')
                    .then((/**
                 * @return {?}
                 */
                function () {
                    self.notifyService.success(_this.localpipe.transform('sendprintjob'));
                }));
            }
            else {
                return this.formatSrv.printSingleById(res.beoptions, res.options, res.su, 'CloudPrint')
                    .then((/**
                 * @return {?}
                 */
                function () {
                    self.notifyService.success(_this.localpipe.transform('sendprintjob'));
                }));
            }
        }
        else { //前台打印
            if (res.ele) { //有ele，则引擎负责渲染
                if (res.isFilter === true) {
                    if (res.ele === 'download') {
                        return this.formatSrv.printSingleByFilter(res.beoptions, res.options, res.su, 'CloudPrint')
                            .then((/**
                         * @param {?} data
                         * @return {?}
                         */
                        function (data) {
                            self.downloadFile(data);
                        }));
                    }
                    else {
                        self.openRendedViewer(res.ele, null, res.options, [res.beoptions], res.isFilter);
                    }
                }
                else {
                    if (res.ele === 'download') {
                        return this.formatSrv.printSingleById(res.beoptions, res.options, res.su, 'CloudPrint')
                            .then((/**
                         * @param {?} data
                         * @return {?}
                         */
                        function (data) {
                            self.downloadFile(data);
                        }));
                    }
                    else {
                        self.openRendedViewer(res.ele, null, res.options, [res.beoptions], res.isFilter);
                    }
                }
            }
            else { //没有ele，则只返回后台的渲染结果，给调用方自己处理
                if (res.filter === true) {
                    return this.formatSrv.printSingleByFilter(res.beoptions, res.options, res.su, 'CloudPrint');
                }
                else {
                    return this.formatSrv.printSingleById(res.beoptions, res.options, res.su, 'CloudPrint');
                }
            }
        }
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    CloudprintService.prototype.outputByMultiSelectionFormat = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        var _this = this;
        console.log('选完格式准备渲染: ' + JSON.stringify(res));
        /** @type {?} */
        var self = this;
        res.options.DeviceId = res.boxId;
        res.options.printerName = res.printerName;
        res.options.printSetting = res.printSetting;
        res.options.printJob = res.isJob;
        if (res.isJob) { //后台打印
            if (res.isFilter === true) {
                return this.formatSrv.printMultiByFilter(res.beoptions, res.options, res.su, 'CloudPrint')
                    .then((/**
                 * @return {?}
                 */
                function () {
                    self.notifyService.success(_this.localpipe.transform('sendprintjob'));
                }));
            }
            else {
                return this.formatSrv.printMultiById(res.beoptions, res.options, res.su, 'CloudPrint')
                    .then((/**
                 * @return {?}
                 */
                function () {
                    self.notifyService.success(_this.localpipe.transform('sendprintjob'));
                }));
            }
        }
    };
    //#endregion
    //#region 对外设计器和预览器接口
    /**
     * 在当前页面Body上打开Designer
     * @param format 格式
     * @param data 数据
     * @param formatId 格式id
     * @param dataIds 数据ids
     */
    //#endregion
    //#region 对外设计器和预览器接口
    /**
     * 在当前页面Body上打开Designer
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    CloudprintService.prototype.openDesigner = 
    //#endregion
    //#region 对外设计器和预览器接口
    /**
     * 在当前页面Body上打开Designer
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    function (format, data, formatId, dataIds) {
        this.openDesignerInternal(window.document.body, format, data, formatId, dataIds);
    };
    /**
     * 在当前页面的指定的元素上打开Designer
     * @param ele 指定的元素
     * @param format 格式
     * @param data 数据
     * @param formatId 格式id
     * @param dataIds 数据ids
     */
    /**
     * 在当前页面的指定的元素上打开Designer
     * @param {?} ele 指定的元素
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    CloudprintService.prototype.openDesignerOnEle = /**
     * 在当前页面的指定的元素上打开Designer
     * @param {?} ele 指定的元素
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    function (ele, format, data, formatId, dataIds) {
        this.openDesignerInternal(ele, format, data, formatId, dataIds);
    };
    /**
     * 在新的tab页面上打开Designer
     * @param format 格式
     * @param data 数据
     * @param formatId 格式id
     * @param dataIds 数据ids
     */
    /**
     * 在新的tab页面上打开Designer
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    CloudprintService.prototype.openDesignerNewTab = /**
     * 在新的tab页面上打开Designer
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    function (format, data, formatId, dataIds) {
        this.openDesignerInternal(null, format, data, formatId, dataIds);
    };
    /**
     * 运行时在当前页面的指定的元素上打开Designer
     * @param ele 指定的元素
     * @param formatCode 格式编号
     * @param formatName 格式名称
     * @param bizObjectId 业务对象Id
     * @param datasourceId 数据源Id, BEId/VOId/BesinessObjectClassInfo
     * @param sourceType 数据源类型, SourceType.BE/SourceType.VO/SourceType.BO
     */
    /**
     * 运行时在当前页面的指定的元素上打开Designer
     * @param {?} ele 指定的元素
     * @param {?} formatId
     * @param {?} formatCode 格式编号
     * @param {?} formatName 格式名称
     * @param {?} bizObjectId 业务对象Id
     * @param {?} datasourceId 数据源Id, BEId/VOId/BesinessObjectClassInfo
     * @param {?} sourceType 数据源类型, SourceType.BE/SourceType.VO/SourceType.BO
     * @return {?}
     */
    CloudprintService.prototype.openDesignerOnEleForRuntime = /**
     * 运行时在当前页面的指定的元素上打开Designer
     * @param {?} ele 指定的元素
     * @param {?} formatId
     * @param {?} formatCode 格式编号
     * @param {?} formatName 格式名称
     * @param {?} bizObjectId 业务对象Id
     * @param {?} datasourceId 数据源Id, BEId/VOId/BesinessObjectClassInfo
     * @param {?} sourceType 数据源类型, SourceType.BE/SourceType.VO/SourceType.BO
     * @return {?}
     */
    function (ele, formatId, formatCode, formatName, bizObjectId, datasourceId, sourceType) {
        var _this = this;
        this.printEntity.printFormat = new PrintFormat();
        this.printEntity.isUseMetaData = true;
        if (formatId && formatId.length > 0) {
            // 编辑
            this.formatSrv.getNewSourceFormatByFormatId(formatId)
                .then((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                _this.printEntity.printFormat = res;
                //打开设计器
                _this.openDesignerOnEle(ele, _this.printEntity.printFormat.content, {}, '', '');
            }));
        }
        else {
            //初始化
            this.initPrintFormat(datasourceId, sourceType)
                .then((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                _this.printEntity.printFormat.id = Utils.uuid();
                _this.printEntity.printFormat.code = formatCode;
                _this.printEntity.printFormat.name = formatName;
                _this.printEntity.printFormat.bizObjectId = bizObjectId;
                _this.printEntity.printFormat.dataSourceId = datasourceId;
                _this.printEntity.printFormat.sourceType = sourceType;
                _this.printEntity.printFormat.isUseTemplate = false;
                _this.printEntity.printFormat.content = res.format; //打印格式mrt   
                _this.printEntity.printFormat.dataSchema = res.printschema; //PrintDataSchemaView描述   
                //打开设计器
                _this.openDesignerOnEle(ele, _this.printEntity.printFormat.content, {}, '', '');
            }));
        }
    };
    /**
     * 在指定的元素上打开Designer(前端渲染)
     * @param ele 指定的元素
     * @param format 格式
     * @param data 数据
     * @param formatId 格式id
     * @param dataIds 数据ids
     */
    /**
     * 在指定的元素上打开Designer(前端渲染)
     * @private
     * @param {?} ele 指定的元素
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    CloudprintService.prototype.openDesignerInternal = /**
     * 在指定的元素上打开Designer(前端渲染)
     * @private
     * @param {?} ele 指定的元素
     * @param {?} format 格式
     * @param {?} data 数据
     * @param {?} formatId 格式id
     * @param {?} dataIds 数据ids
     * @return {?}
     */
    function (ele, format, data, formatId, dataIds) {
        if (ele) {
            this.printEntity.format = format;
            this.printEntity.data = data;
            this.printEntity.foramtId = formatId;
            this.printEntity.dataId = dataIds;
            this.createDesignerRef();
            // 给视图添加脏检查(这个方式是配合@ViewChild的方法使用的)
            // this.applicationRef.attachView(this.designercomponentRef.hostView);
            // 将创建好的组件引用append到指定标签下
            // 这里将动态组件加载到指定的html里有两种方式：
            //  1.上面的@ViewChil
            //  2.如下的ele.appendChild(this.getComponentRootNode(this.viewercomponentRef));方式
            ele.appendChild(this.getComponentRootNode(this.designercomponentRef));
        }
        else {
            /** @type {?} */
            var param = new OutputParam();
            param.prnFormat = format;
            param.prnData = data;
            param.prnFormatId = formatId;
            param.prnDataId = dataIds;
            param.prnType = CmpType.Designer;
            this.appService.openAppByOptions({
                appType: 'app',
                funcId: '',
                tabName: this.localpipe.transform('printdesigner'),
                appId: 'cloudprint-view-index',
                appEntrance: 'cloudprint-view-index',
                tabId: Utils.uuid(),
                entityParams: {
                    foramtParam: param,
                    formatEntity: null,
                },
            });
        }
    };
    /**
     * 获取空白打印格式
     */
    /**
     * 获取空白打印格式
     * @private
     * @param {?} datasourceId
     * @param {?} sourceType
     * @return {?}
     */
    CloudprintService.prototype.initPrintFormat = /**
     * 获取空白打印格式
     * @private
     * @param {?} datasourceId
     * @param {?} sourceType
     * @return {?}
     */
    function (datasourceId, sourceType) {
        if (sourceType === SourceType.BE) {
            //bo数据源
            return this.formatSrv.createPrintFormatWithBE(datasourceId);
        }
        else if (sourceType === SourceType.VO) {
            // vo数据源
            return this.formatSrv.createPrintFormatWithVO(datasourceId);
        }
        else {
            // 默认用BE数据源
            return this.formatSrv.createPrintFormatWithBO(datasourceId);
        }
    };
    /**
     * 创建Designer构件的引用对象
     */
    /**
     * 创建Designer构件的引用对象
     * @private
     * @return {?}
     */
    CloudprintService.prototype.createDesignerRef = /**
     * 创建Designer构件的引用对象
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var factory = this.resolver.resolveComponentFactory(CloudprintDesignerComponent);
        if (!this.viewContainer) {
            this.designercomponentRef = factory.create(this.injector);
            this.applicationRef.attachView(this.designercomponentRef.hostView);
        }
        else {
            this.viewContainer.clear();
            this.designercomponentRef = this.viewContainer.createComponent(factory);
        }
        // 同步组件和组件上依赖的服务的printEntity
        this.designercomponentRef.instance.setPrintEntity(this.printEntity);
        // this.designercomponentRef.instance.localeid = this.localeid;
        // 订阅退出事件
        this.designercomponentRef.instance.printEntity.onExitEvent.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this.designercomponentRef.destroy();
            if (!_this.viewContainer) {
                _this.applicationRef.detachView(_this.designercomponentRef.hostView);
            }
            else {
                _this.viewContainer.clear();
            }
        }));
    };
    /**
     * 打开已经渲染的Viewer（后端渲染）
     * @param ele 指定的元素
     * @param data 已经渲染的格式(后端渲染是pdf的二进制流)
     */
    /**
     * 打开已经渲染的Viewer（后端渲染）
     * @param {?} ele 指定的元素
     * @param {?} data 已经渲染的格式(后端渲染是pdf的二进制流)
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} isFilter
     * @param {?=} printEntity
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.openRendedViewer = /**
     * 打开已经渲染的Viewer（后端渲染）
     * @param {?} ele 指定的元素
     * @param {?} data 已经渲染的格式(后端渲染是pdf的二进制流)
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} isFilter
     * @param {?=} printEntity
     * @param {?=} param
     * @return {?}
     */
    function (ele, data, options, sourceOptions, isFilter, printEntity, param) {
        if (sourceOptions === void 0) { sourceOptions = null; }
        if (isFilter === void 0) { isFilter = false; }
        if (printEntity === void 0) { printEntity = null; }
        if (param === void 0) { param = null; }
        if (printEntity != null) { //用外界的printEntity属性覆盖当前的printEntity的属性
            // tslint:disable-next-line:forin
            for (var key in printEntity) {
                this.printEntity[key] = printEntity[key];
            }
        }
        if (data) { //数据已渲染，直接打印，不存在后台打印了
            this.preViewLocal(ele, data, options, sourceOptions, printEntity, isFilter, param);
        }
        else {
            this.preViewRemote(ele, options, sourceOptions, isFilter, printEntity, param);
        }
    };
    /**
     * 打开已经渲染的Viewer（后端渲染,给附件用的）
     * @param ele 指定的元素
     * @param data 已经渲染的格式(后端渲染是pdf的二进制流)
     */
    /**
     * 打开已经渲染的Viewer（后端渲染,给附件用的）
     * @param {?} ele 指定的元素
     * @param {?} data 已经渲染的格式(后端渲染是pdf的二进制流)
     * @param {?} options
     * @return {?}
     */
    CloudprintService.prototype.openRendedViewer4Attachment = /**
     * 打开已经渲染的Viewer（后端渲染,给附件用的）
     * @param {?} ele 指定的元素
     * @param {?} data 已经渲染的格式(后端渲染是pdf的二进制流)
     * @param {?} options
     * @return {?}
     */
    function (ele, data, options) {
        this.openRendedViewer(ele, data, options, null, false, this.printEntity);
    };
    /**
     * 本地直接打印
     */
    /**
     * 本地直接打印
     * @private
     * @param {?} ele
     * @param {?} data
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} printEntity
     * @param {?=} isFilter
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.preViewLocal = /**
     * 本地直接打印
     * @private
     * @param {?} ele
     * @param {?} data
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} printEntity
     * @param {?=} isFilter
     * @param {?=} param
     * @return {?}
     */
    function (ele, data, options, sourceOptions, printEntity, isFilter, param) {
        if (sourceOptions === void 0) { sourceOptions = null; }
        if (printEntity === void 0) { printEntity = null; }
        if (param === void 0) { param = null; }
        /** @type {?} */
        var self = this;
        /** @type {?} */
        var b = new Blob([data]);
        /** @type {?} */
        var reader = new FileReader();
        reader.readAsArrayBuffer(b);
        reader.onload = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
                var rendedFormat, param, remotePrint;
                return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            rendedFormat = (/** @type {?} */ (reader.result));
                            param = new OutputParam();
                            param.prnRendedFormat = btoa((/** @type {?} */ (new Uint8Array(rendedFormat))));
                            param.prnType = CmpType.Viewer;
                            param.prnOutputOps = Object.assign({}, options);
                            param.prnSourceOptions = sourceOptions ? tslib_1.__spread(sourceOptions) : [];
                            param.isFilter = isFilter;
                            if (!(ele === 'tab')) return [3 /*break*/, 1];
                            self.appService.openAppByOptions({
                                appType: 'app',
                                funcId: '',
                                tabName: self.localpipe.transform('printview'),
                                appId: 'cloudprint-view-index',
                                appEntrance: 'cloudprint-view-index',
                                tabId: Utils.uuid(),
                                entityParams: {
                                    foramtParam: param,
                                    formatEntity: null,
                                },
                            });
                            return [3 /*break*/, 3];
                        case 1: return [4 /*yield*/, self.formatSrv.isRemotePrint()];
                        case 2:
                            remotePrint = _a.sent();
                            self.createViewerRef();
                            self.printEntity.rendedFormat = rendedFormat;
                            self.viewercomponentRef.instance.outputParam = param;
                            self.viewercomponentRef.instance.isRemotePrint = remotePrint;
                            ele.appendChild(self.getComponentRootNode(self.viewercomponentRef));
                            _a.label = 3;
                        case 3: return [2 /*return*/];
                    }
                });
            });
        });
    };
    /**
     * 远程打印
     */
    /**
     * 远程打印
     * @private
     * @param {?} ele
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} isFilter
     * @param {?=} printEntity
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.preViewRemote = /**
     * 远程打印
     * @private
     * @param {?} ele
     * @param {?} options
     * @param {?=} sourceOptions
     * @param {?=} isFilter
     * @param {?=} printEntity
     * @param {?=} param
     * @return {?}
     */
    function (ele, options, sourceOptions, isFilter, printEntity, param) {
        if (sourceOptions === void 0) { sourceOptions = null; }
        if (printEntity === void 0) { printEntity = null; }
        if (param === void 0) { param = null; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var self, outputparam, remotePrint;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        self = this;
                        outputparam = new OutputParam();
                        outputparam.prnType = CmpType.Viewer;
                        outputparam.prnOutputOps = Object.assign({}, options);
                        outputparam.prnSourceOptions = tslib_1.__spread(sourceOptions);
                        outputparam.isFilter = isFilter;
                        if (!(ele === 'tab')) return [3 /*break*/, 1];
                        self.appService.openAppByOptions({
                            appType: 'app',
                            funcId: '',
                            tabName: self.localpipe.transform('printview'),
                            appId: 'cloudprint-view-index',
                            appEntrance: 'cloudprint-view-index',
                            tabId: Utils.uuid(),
                            entityParams: {
                                foramtParam: outputparam,
                                formatEntity: null,
                            },
                        });
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, self.formatSrv.isRemotePrint()];
                    case 2:
                        remotePrint = _a.sent();
                        self.createViewerRef();
                        self.viewercomponentRef.instance.outputParam = outputparam;
                        self.viewercomponentRef.instance.isRemotePrint = remotePrint;
                        ele.appendChild(self.getComponentRootNode(self.viewercomponentRef));
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * 创建Viewer构件的引用对象
     */
    /**
     * 创建Viewer构件的引用对象
     * @private
     * @return {?}
     */
    CloudprintService.prototype.createViewerRef = /**
     * 创建Viewer构件的引用对象
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var factory = this.resolver.resolveComponentFactory(CloudprintViewerComponent);
        if (!this.viewContainer) {
            this.viewercomponentRef = factory.create(this.injector);
            this.applicationRef.attachView(this.viewercomponentRef.hostView);
        }
        else {
            this.viewContainer.clear();
            this.viewercomponentRef = this.viewContainer.createComponent(factory);
        }
        // 同步组件和组件上依赖的服务的printEntity
        this.viewercomponentRef.instance.setPrintEntity(this.printEntity);
        this.viewercomponentRef.instance.localpipe = this.localpipe;
        // 订阅退出事件
        this.viewercomponentRef.instance.printEntity.onExitEvent.subscribe((/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this.viewercomponentRef.destroy();
            if (!_this.viewContainer) {
                _this.applicationRef.detachView(_this.viewercomponentRef.hostView);
            }
            else {
                _this.viewContainer.clear();
            }
        }));
    };
    /**
     * 将ComponentRef类型的组件引用转换为DOM节点（参考自Material2）
     * @param cpRef 组件的引用对象
     */
    /**
     * 将ComponentRef类型的组件引用转换为DOM节点（参考自Material2）
     * @private
     * @param {?} cpRef 组件的引用对象
     * @return {?}
     */
    CloudprintService.prototype.getComponentRootNode = /**
     * 将ComponentRef类型的组件引用转换为DOM节点（参考自Material2）
     * @private
     * @param {?} cpRef 组件的引用对象
     * @return {?}
     */
    function (cpRef) {
        return (/** @type {?} */ (((/** @type {?} */ (cpRef.hostView))).rootNodes[0]));
    };
    //#endregion
    //#region 对外打印服务接口
    /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     */
    //#endregion
    //#region 对外打印服务接口
    /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beoptions
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printSingleById = 
    //#endregion
    //#region 对外打印服务接口
    /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beoptions
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beoptions, options, ele, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (beoptions.queryType == undefined) { //兼容以前的逻辑
            beoptions.queryType = QueryType.Unknown;
        }
        if (options.printType == undefined) { //兼容以前的逻辑这里默认为表单打印
            options.printType = PrintType.Form;
        }
        //与表单集成时，表单打印时有多个打印格式，需要选择，这时候格式id是空的
        if (beoptions.FormatId == undefined || beoptions.FormatId == '') {
            return this.openFormatListByDimension(beoptions, options, ele, false);
        }
        else {
            if (ele) {
                /** @type {?} */
                var self_1 = this;
                if (ele === 'download') {
                    return this.formatSrv.printSingleById(beoptions, options, su, 'CloudPrint')
                        .then((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        self_1.downloadFile(data);
                    }));
                }
                else {
                    self_1.openRendedViewer(ele, null, options, [beoptions], false);
                }
            }
            else {
                return this.formatSrv.printSingleById(beoptions, options, su, 'CloudPrint');
            }
        }
    };
    /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     */
    /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printSingleByFilter = /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beFilteroptions, options, ele, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (beFilteroptions.queryType == undefined) { //兼容以前的逻辑
            beFilteroptions.queryType = QueryType.Unknown;
        }
        if (options.printType == undefined) { //兼容以前的逻辑这里默认为表单打印
            options.printType = PrintType.Form;
        }
        //与表单集成时，表单打印时有多个打印格式，需要选择，这时候格式id是空的
        if (beFilteroptions.FormatId == undefined || beFilteroptions.FormatId == '') {
            return this.openFormatListByDimension(beFilteroptions, options, ele, true);
        }
        else {
            if (ele) {
                /** @type {?} */
                var self_2 = this;
                if (ele === 'download') {
                    return this.formatSrv.printSingleByFilter(beFilteroptions, options, su, 'CloudPrint')
                        .then((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        self_2.downloadFile(data);
                    }));
                }
                else {
                    self_2.openRendedViewer(ele, null, options, [beFilteroptions], true);
                }
            }
            else {
                return this.formatSrv.printSingleByFilter(beFilteroptions, options, su, 'CloudPrint');
            }
        }
    };
    /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     */
    /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printMultiById = /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beOptionsList, options, ele, su, param) {
        var _this = this;
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        for (var i = 0; i < beOptionsList.length; i++) {
            DataValidator.checkForNullReference(beOptionsList[i].queryType, 'queryType');
        }
        DataValidator.checkForNullReference(options.printType, 'printType');
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (ele) {
            /** @type {?} */
            var self_3 = this;
            if (ele === 'download') {
                return this.formatSrv.printMultiById(beOptionsList, options, su, 'CloudPrint')
                    .then((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    _this.downloadFile(data);
                }));
            }
            else {
                self_3.openRendedViewer(ele, null, options, beOptionsList, false);
            }
        }
        else {
            return this.formatSrv.printMultiById(beOptionsList, options, su, 'CloudPrint');
        }
    };
    /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     */
    /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printMultiByFilter = /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器,需要外界组织好格式和数据的对应关系
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} ele
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beOptionsList, options, ele, su, param) {
        var _this = this;
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        for (var i = 0; i < beOptionsList.length; i++) {
            DataValidator.checkForNullReference(beOptionsList[i].queryType, 'queryType');
        }
        DataValidator.checkForNullReference(options.printType, 'printType');
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (ele) {
            /** @type {?} */
            var self_4 = this;
            if (ele === 'download') {
                return this.formatSrv.printMultiByFilter(beOptionsList, options, su, 'CloudPrint')
                    .then((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    _this.downloadFile(data);
                }));
            }
            else {
                self_4.openRendedViewer(ele, null, options, beOptionsList, true);
            }
        }
        else {
            return this.formatSrv.printMultiByFilter(beOptionsList, options, su, 'CloudPrint');
        }
    };
    /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     */
    /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beoptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printSingleById4Job = /**
     * 单格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beoptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beoptions, options, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (beoptions.queryType == undefined) { //兼容以前的逻辑
            beoptions.queryType = QueryType.Unknown;
        }
        if (options.printType == undefined) { //兼容以前的逻辑这里默认为表单打印
            options.printType = PrintType.Form;
        }
        return this.openFormatListByDimension4Job([beoptions], options, false, false);
    };
    /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     */
    /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printSingleByFilter4Job = /**
     * 单格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * 1.带维度过滤格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beFilteroptions, options, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        if (beFilteroptions.queryType == undefined) { //兼容以前的逻辑
            beFilteroptions.queryType = QueryType.Unknown;
        }
        if (options.printType == undefined) { //兼容以前的逻辑这里默认为表单打印
            options.printType = PrintType.Form;
        }
        return this.openFormatListByDimension4Job([beFilteroptions], options, true, false);
    };
    /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     */
    /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printMultiById4Job = /**
     * 多格式数据id打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beOptionsList, options, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        // tslint:disable-next-line:forin
        for (var b in beOptionsList) {
            DataValidator.checkForNullReference(beOptionsList[0].queryType, 'queryType');
        }
        DataValidator.checkForNullReference(options.printType, 'printType');
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        return this.openFormatListByDimension4Job(beOptionsList, options, false, true);
    };
    /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     */
    /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    CloudprintService.prototype.printMultiByFilter4Job = /**
     * 多格式过滤器打印
     * su：双栈模式下nginx路由的su
     *
     * TODO: 目前不带格式选择器
     * @param {?} beFilteroptions
     * @param {?} options
     * @param {?=} su
     * @param {?=} param
     * @return {?}
     */
    function (beFilteroptions, options, su, param) {
        if (su === void 0) { su = null; }
        if (param === void 0) { param = null; }
        // tslint:disable-next-line:forin
        for (var b in beFilteroptions) {
            DataValidator.checkForNullReference(beFilteroptions[0].queryType, 'queryType');
        }
        DataValidator.checkForNullReference(options.printType, 'printType');
        if (DataValidator.checkAppUrl(this.printEntity.appUrl) == false) {
            this.notifyService.info(this.localpipe.transform('appurlerror'));
            return;
        }
        return this.openFormatListByDimension4Job(beFilteroptions, options, true, true);
    };
    /**
     * 创建blob对象，并利用浏览器打开url进行下载
     * @param data 文件流数据
     */
    /**
     * 创建blob对象，并利用浏览器打开url进行下载
     * @param {?} data 文件流数据
     * @return {?}
     */
    CloudprintService.prototype.downloadFile = /**
     * 创建blob对象，并利用浏览器打开url进行下载
     * @param {?} data 文件流数据
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var link = document.createElement('a');
        /** @type {?} */
        var blob = new Blob([data], { type: 'application/pdf;charset=UTF-8' });
        link.setAttribute('href', window.URL.createObjectURL(blob));
        link.setAttribute('download', this.printEntity.downLoadFileName + '.pdf');
        link.style.visibility = 'hidden';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };
    //#endregion
    /**
     * 打印（过期了，改为printSingleById）
     * @param beoptions 数据源选项
     * @param options 导出选项
     * @param ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载，
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     */
    //#endregion
    /**
     * 打印（过期了，改为printSingleById）
     * @param {?} beoptions 数据源选项
     * @param {?} options 导出选项
     * @param {?} ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载，
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     * @return {?}
     */
    CloudprintService.prototype.outputBEData = 
    //#endregion
    /**
     * 打印（过期了，改为printSingleById）
     * @param {?} beoptions 数据源选项
     * @param {?} options 导出选项
     * @param {?} ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载，
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     * @return {?}
     */
    function (beoptions, options, ele) {
        return this.printSingleById(beoptions, options, ele);
    };
    /**
     * 打印（过期了，改为printSingleByFilter）
     * @param beoptions BEFilter选项
     * @param options 导出选项
     * @param ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     */
    /**
     * 打印（过期了，改为printSingleByFilter）
     * @param {?} beFilteroptions
     * @param {?} options 导出选项
     * @param {?} ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     * @return {?}
     */
    CloudprintService.prototype.outputBEDataWithFilter = /**
     * 打印（过期了，改为printSingleByFilter）
     * @param {?} beFilteroptions
     * @param {?} options 导出选项
     * @param {?} ele 预览时要渲染的主体
     * ele为空时：返回渲染流，
     * ele为tab字符串时：新的tab页打开预览器，
     * ele为download字符串时：下载
     * ele为element元素时，当前页的element上渲染预览器
     *
     * 注意beoptions里的RetrieveParam内的属性值都需要小写字母开头
     * @return {?}
     */
    function (beFilteroptions, options, ele) {
        return this.printSingleByFilter(beFilteroptions, options, ele);
    };
    CloudprintService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    CloudprintService.ctorParameters = function () { return [
        { type: PrintFormatService },
        { type: ComponentFactoryResolver },
        { type: CloudprintdesignerService },
        { type: CloudprintviewerService },
        { type: Injector },
        { type: ApplicationRef },
        { type: NotifyService },
        { type: AppService },
        { type: WindowService },
        { type: BsModalService }
    ]; };
    return CloudprintService;
}());
export { CloudprintService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.designercomponentRef;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.viewercomponentRef;
    /**
     * Saas应用通过构造函数注入的ViewContainerRef对象
     *
     * 例子：
     *    xxx.html
     *          <ng-container #prndesigner></ng-container>
     *
     *    xxx.component.ts
     * \@ViewChild('prndesigner', {read: ViewContainerRef})
     *          private container: ViewContainerRef;
     * @type {?}
     */
    CloudprintService.prototype.viewContainer;
    /**
     * 打印参数实体
     * @type {?}
     */
    CloudprintService.prototype.printEntity;
    /** @type {?} */
    CloudprintService.prototype.localeid;
    /** @type {?} */
    CloudprintService.prototype.localpipe;
    /** @type {?} */
    CloudprintService.prototype.windowRef;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.formatSrv;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.resolver;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.designerSrv;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.viewerSrv;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.applicationRef;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.appService;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.windowService;
    /**
     * @type {?}
     * @private
     */
    CloudprintService.prototype.modalService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWRwcmludC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1zdmMvY2xvdWRwcmludC8iLCJzb3VyY2VzIjpbImxpYi9jbG91ZHByaW50LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQXVCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyRyxPQUFPLEVBQUUsd0JBQXdCLEVBQW1ELE1BQU0sZUFBZSxDQUFDO0FBRTFHLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFEQUFxRCxDQUFDO0FBQ2xHLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQzVGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVwRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFbEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBSS9DLE9BQU8sRUFBRSxVQUFVLEVBQXdDLE1BQU0scUJBQXFCLENBQUM7QUFFdkYsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNsRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNuRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBR3BELE9BQU8sRUFHTCxhQUFhLEVBQ2QsTUFBTSxnQ0FBZ0MsQ0FBQztBQUN4QyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUNuRixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDakQsT0FBTyxFQUFFLHlCQUF5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QUM5QiwwQ0FBb0M7Ozs7O0lBQ3BDLHlDQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdG9yLCBBcHBsaWNhdGlvblJlZiwgRXZlbnRFbWl0dGVyLCBRdWVyeSwgTE9DQUxFX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29tcG9uZW50UmVmLCBFbWJlZGRlZFZpZXdSZWYsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IENsb3VkcHJpbnREZXNpZ25lckNvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1kZXNpZ25lci9jbG91ZHByaW50LWRlc2lnbmVyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENsb3VkcHJpbnRWaWV3ZXJDb21wb25lbnQgfSBmcm9tICcuL2Nsb3VkcHJpbnQtdmlld2VyL2Nsb3VkcHJpbnQtdmlld2VyLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFByaW50RW50aXR5IH0gZnJvbSAnLi9lbnRpdHlzL3ByaW50RW50aXR5JztcclxuXHJcbmltcG9ydCB7IE5vdGlmeVNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW5vdGlmeSc7XHJcbmltcG9ydCB7IE91dHB1dE9wdGlvbnMgfSBmcm9tICcuL2VudGl0eXMvb3V0cHV0b3B0aW9ucy9vdXRwdXRPcHRpb25zJztcclxuaW1wb3J0IHsgVXJscyB9IGZyb20gJy4vdXRpbHMvY2xvdWRwcmludC5VcmxzJztcclxuaW1wb3J0IHsgU291cmNlT3B0aW9ucyB9IGZyb20gJy4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9zb3VyY2VPcHRpb25zJztcclxuaW1wb3J0IHsgU291cmNlRmlsdGVyT3B0aW9ucyB9IGZyb20gJy4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9zb3VyY2VGaWx0ZXJPcHRpb25zJztcclxuaW1wb3J0IHsgQk9PcHRpb25zIH0gZnJvbSAnLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL2Jvb3B0aW9ucyc7XHJcbmltcG9ydCB7IEFwcFNlcnZpY2UsIEFwcE9wdGlvbnMsIEZyYW1ld29ya1ZhcmlhYmxlU2VydmljZSB9IGZyb20gJ0Bnc3Atc3lzL3J0Zi1jb21tb24nO1xyXG5pbXBvcnQgeyBGaWxlVHlwZSB9IGZyb20gJy4vZW50aXR5cy9vdXRwdXRvcHRpb25zL2ZpbGVUeXBlJztcclxuaW1wb3J0IHsgQ21wVHlwZSB9IGZyb20gJy4vZW50aXR5cy9lbnVtcy9jbXBUeXBlJztcclxuaW1wb3J0IHsgT3V0cHV0UGFyYW0gfSBmcm9tICcuL2VudGl0eXMvb3V0cHV0b3B0aW9ucy9vdXRwdXRQYXJhbSc7XHJcbmltcG9ydCB7IFByaW50Rm9ybWF0U2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvcHJpbnRGb3JtYXRTZXJ2aWNlJztcclxuaW1wb3J0IHsgU291cmNlVHlwZSB9IGZyb20gJy4vZW50aXR5cy9lbnVtcy9zb3VyY2VUeXBlJztcclxuXHJcbmltcG9ydCB7IFByaW50Rm9ybWF0IH0gZnJvbSAnLi9lbnRpdHlzL3ByaW50Rm9ybWF0JztcclxuXHJcblxyXG5pbXBvcnQge1xyXG4gIFdpbmRvd1JlZixcclxuICBXaW5kb3dDbG9zZVJlc3VsdCxcclxuICBXaW5kb3dTZXJ2aWNlXHJcbn0gZnJvbSAnQHByb2dyZXNzL2tlbmRvLWFuZ3VsYXItZGlhbG9nJztcclxuaW1wb3J0IHsgRm9ybWF0bGlzdENvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1mb3JtYXRsaXN0L2Zvcm1hdGxpc3QuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzL2Nsb3VkcHJpbnQudXRpbHMnO1xyXG5pbXBvcnQgeyBDbG91ZHByaW50ZGVzaWduZXJTZXJ2aWNlIH0gZnJvbSAnLi9jbG91ZHByaW50LWRlc2lnbmVyL2Nsb3VkcHJpbnQtZGVzaWduZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IENsb3VkcHJpbnR2aWV3ZXJTZXJ2aWNlIH0gZnJvbSAnLi9jbG91ZHByaW50LXZpZXdlci9jbG91ZHByaW50LXZpZXdlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBRdWVyeVR5cGUgfSBmcm9tICcuL2VudGl0eXMvZW51bXMvcXVlcnl0eXBlJztcclxuaW1wb3J0IHsgUHJpbnRUeXBlIH0gZnJvbSAnLi9lbnRpdHlzL2VudW1zL3ByaW50dHlwZSc7XHJcbmltcG9ydCB7IERhdGFWYWxpZGF0b3IgfSBmcm9tICcuL3V0aWxzL2Nsb3VkcHJpbnQuZGF0YXZhbGlkYXRvcic7XHJcbmltcG9ydCB7IEJhc2VTb3VyY2VPcHRpb25zIH0gZnJvbSAnLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL2Jhc2Vzb3VyY2VvcHRpb25zJztcclxuaW1wb3J0IHsgRm9ybWF0bGlzdGpvYkNvbXBvbmVudCB9IGZyb20gJy4vY2xvdWRwcmludC1mb3JtYXRsaXN0am9iL2Zvcm1hdGxpc3Rqb2IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgTG9jYWxMYW5nUGlwZSB9IGZyb20gJy4vbG9jYWwucGlwZSc7XHJcblxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgQ2xvdWRwcmludFNlcnZpY2Uge1xyXG4gIC8vIOe7hOS7tuW8leeUqOWPmOmHj1xyXG4gIHByaXZhdGUgZGVzaWduZXJjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxDbG91ZHByaW50RGVzaWduZXJDb21wb25lbnQ+O1xyXG4gIHByaXZhdGUgdmlld2VyY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8Q2xvdWRwcmludFZpZXdlckNvbXBvbmVudD47XHJcbiAgLyoqXHJcbiAgICogU2Fhc+W6lOeUqOmAmui/h+aehOmAoOWHveaVsOazqOWFpeeahFZpZXdDb250YWluZXJSZWblr7nosaFcclxuICAgKiBcclxuICAgKiDkvovlrZDvvJpcclxuICAgKiAgICB4eHguaHRtbFxyXG4gICAqICAgICAgICAgIDxuZy1jb250YWluZXIgI3BybmRlc2lnbmVyPjwvbmctY29udGFpbmVyPlxyXG4gICAqIFxyXG4gICAqICAgIHh4eC5jb21wb25lbnQudHNcclxuICAgKiAgICAgICAgICBAVmlld0NoaWxkKCdwcm5kZXNpZ25lcicsIHtyZWFkOiBWaWV3Q29udGFpbmVyUmVmfSkgXHJcbiAgICogICAgICAgICAgcHJpdmF0ZSBjb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgICovXHJcbiAgdmlld0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZjtcclxuXHJcbiAgLyoqXHJcbiAgICog5omT5Y2w5Y+C5pWw5a6e5L2TXHJcbiAgICovXHJcbiAgcHJpbnRFbnRpdHkgPSBuZXcgUHJpbnRFbnRpdHkoKTtcclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572uUHJpbnRFbnRpdHnlj4LmlbBcclxuICAgKiBAZGVzY3JpcHRpb24g5aaC5p6c5aSW55WMbmV35paw55qEUHJpbnRFbnRpdHnvvIzliJnpnIDopoHosIPnlKjor6Xmlrnms5XlkIzmraVzZXJ2aWNl55qEZW50aXR5XHJcbiAgICogICAgICAgICAgICAgIOWklueVjOayoeaciW5ld+aWsOeahFByaW50RW50aXR577yM5YiZ5LiN6ZyA6KaB6LCD55So6K+l5pa55rOVXHJcbiAgICovXHJcbiAgc2V0IHNldFByaW50RW50aXR5KGVudGl0eSkge1xyXG4gICAgdGhpcy5wcmludEVudGl0eSA9IGVudGl0eTtcclxuICAgIC8vIHRoaXMuZGVzaWduZXJTcnYucHJpbnRFbnRpdHkgPSB0aGlzLnByaW50RW50aXR5O1xyXG4gICAgLy8gdGhpcy52aWV3ZXJTcnYucHJpbnRFbnRpdHkgPSB0aGlzLnByaW50RW50aXR5O1xyXG4gICAgdGhpcy5mb3JtYXRTcnYucHJpbnRFbnRpdHkgPSB0aGlzLnByaW50RW50aXR5O1xyXG4gIH1cclxuXHJcbiAgbG9jYWxlaWQ6c3RyaW5nO1xyXG4gIGxvY2FscGlwZTogTG9jYWxMYW5nUGlwZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGZvcm1hdFNydjogUHJpbnRGb3JtYXRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxyXG4gICAgcHJpdmF0ZSBkZXNpZ25lclNydjogQ2xvdWRwcmludGRlc2lnbmVyU2VydmljZSxcclxuICAgIHByaXZhdGUgdmlld2VyU3J2OiBDbG91ZHByaW50dmlld2VyU2VydmljZSxcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgcHJpdmF0ZSBhcHBsaWNhdGlvblJlZjogQXBwbGljYXRpb25SZWYsXHJcbiAgICBwcml2YXRlIG5vdGlmeVNlcnZpY2U6IE5vdGlmeVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGFwcFNlcnZpY2U6IEFwcFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHdpbmRvd1NlcnZpY2U6IFdpbmRvd1NlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgICApIHtcclxuICAgICAgXHJcbiAgICAvLyDorr7nva5wcmludEVudGl0eeeahOm7mOiupOWAvFxyXG4gICAgdGhpcy5wcmludEVudGl0eS5hcHBVcmwgPSBVcmxzLkNsb3VkUHJpbnRCYXNlVXJsO1xyXG4gICAgdGhpcy5wcmludEVudGl0eS5pc1VzZU1ldGFEYXRhID0gdHJ1ZTtcclxuICAgIHRoaXMucHJpbnRFbnRpdHkubGFuZ3VhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxhbmd1YWdlQ29kZVwiKSB8fCAnemgtQ0hTJztcclxuICAgIFxyXG4gICAgLy8g5bCGcHJpbnRFbnRpdHnorr7nva7liLBkZXNpZ25lciBzZXJ2aWNl5LiK77yI5LiN6K6+572u77yM5ZCO6Z2i6LCD55So5pyN5Yqh5Lya5Y+R546w5pyN5Yqh55qEcHJpbnRFbnRpdHnmmK/nqbrnmoTvvIlcclxuICAgIC8vIHRoaXMuZGVzaWduZXJTcnYucHJpbnRFbnRpdHkgPSB0aGlzLnByaW50RW50aXR5O1xyXG4gICAgLy8g5bCGcHJpbnRFbnRpdHnorr7nva7liLB2aWV3ZXIgc2VydmljZeS4iu+8iOS4jeiuvue9ru+8jOWQjumdouiwg+eUqOacjeWKoeS8muWPkeeOsOacjeWKoeeahHByaW50RW50aXR55piv56m655qE77yJXHJcbiAgICAvLyB0aGlzLnZpZXdlclNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcbiAgICB0aGlzLmZvcm1hdFNydi5wcmludEVudGl0eSA9IHRoaXMucHJpbnRFbnRpdHk7XHJcblxyXG4gICAgaWYodGhpcy5pbmplY3RvcilcclxuICAgIHtcclxuICAgICAgdGhpcy5tb2RhbFNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldChCc01vZGFsU2VydmljZSk7XHJcbiAgICAgIHRoaXMubG9jYWxlaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxhbmd1YWdlQ29kZVwiKSB8fCB0aGlzLmluamVjdG9yLmdldChMT0NBTEVfSUQpO1xyXG4gICAgICB0aGlzLmxvY2FscGlwZSA9IG5ldyBMb2NhbExhbmdQaXBlKHRoaXMubG9jYWxlaWQpO1xyXG4gICAgfSBcclxuICAgXHJcbiAgfVxyXG5cclxuXHJcbiAgLy8jcmVnaW9uIOagvOW8j+mAieaLqeWIl+ihqOebuOWFs+aOpeWPo1xyXG4gIHdpbmRvd1JlZjogV2luZG93UmVmID0gdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiDov5DooYzml7bmiZPljbDml7bmoLnmja7nu7Tluqbov4fmu6TlvLnlh7rmiZPljbDmoLzlvI/pgInmi6nliJfooahcclxuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkIOaVsOaNrua6kElkXHJcbiAgICogQHBhcmFtIGZpbHRlciDmmK/lkKbov4fmu6TmnaHku7ZcclxuICAgKiBAcGFyYW0gYmVPcHRpb25zIGJlT3B0aW9uc1xyXG4gICAqIEBwYXJhbSBvcHRpb25zIOi+k+WHum9wdGlvbnNcclxuICAgKiBAcGFyYW0gZWxlIOaMh+WumueahGVsZW1lbnTlhYPntKBcclxuICAgKi9cclxuICBwcml2YXRlIG9wZW5Gb3JtYXRMaXN0QnlEaW1lbnNpb24oYmVPcHRpb25zOkJhc2VTb3VyY2VPcHRpb25zLCBvcHRpb25zOiBPdXRwdXRPcHRpb25zLCBlbGU6YW55LGZpbHRlcjpib29sZWFuKXtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gYmVPcHRpb25zLlNvdXJjZUlkO1xyXG4gICAgY29uc3QgYmlsbENhdGVnb3J5SWQgPSBiZU9wdGlvbnMuYmlsbENhdGVnb3J5SWQ7XHJcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYuZ2V0UHJpbnRGb3JtYXRCeURhdGFTcm91Y2VBbmREaW1lbnNpb24oYmlsbENhdGVnb3J5SWQsZGF0YVNvdXJjZUlkLChiZU9wdGlvbnMgYXMgYW55KS5GaXJzdERpbWVuc2lvblZhbCwoYmVPcHRpb25zIGFzIGFueSkuU2Vjb25kRGltZW5zaW9uVmFsKS50aGVuKChyZXMpPT57XHJcbiAgICAgIGNvbnN0IGZvcm1hdCA6IFByaW50Rm9ybWF0W10gPSAocmVzICE9IG51bGwgJiYgcmVzLmxlbmd0aCAhPSB1bmRlZmluZWQpID8gcmVzIDogW107XHJcblxyXG4gICAgICAvL+WPquacieS4gOadoeaJk+WNsOagvOW8j++8jOebtOaOpei+k+WHuumihOiniFxyXG4gICAgICBpZihmb3JtYXQubGVuZ3RoID09PSAxKXtcclxuICAgICAgICByZXR1cm4gdGhhdC5vdXRwdXRCeVNpbmdsZVNlbGVjdGlvbkZvcm1hdCh7XHJcbiAgICAgICAgICAnaWQnOiBmb3JtYXRbMF0uaWQsIFxyXG4gICAgICAgICAgJ2lzRmlsdGVyJyA6IGZpbHRlciwgXHJcbiAgICAgICAgICAnYmVvcHRpb25zJzogT2JqZWN0LmFzc2lnbih7fSwgYmVPcHRpb25zKSwgXHJcbiAgICAgICAgICAnb3B0aW9ucyc6b3B0aW9ucyxcclxuICAgICAgICAgICdpc0pvYic6IGZhbHNlLCBcclxuICAgICAgICAgICdwcmludGVyTmFtZSc6JycsXHJcbiAgICAgICAgICAnYm94SWQnOicnLFxyXG4gICAgICAgICAgJ3ByaW50U2V0dGluZyc6bnVsbCxcclxuICAgICAgICAgICdlbGUnOmVsZX0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmYWN0b3J5ID0gdGhhdC5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShGb3JtYXRsaXN0Q29tcG9uZW50KTtcclxuICAgICAgY29uc3QgcHJpbnRzZXR0aW5nID0gZmFjdG9yeS5jcmVhdGUodGhhdC5pbmplY3Rvcik7XHJcbiAgICAgIFxyXG4gICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UuZm9ybWF0cyA9IFsuLi5mb3JtYXRdO1xyXG4gICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UubG9jYWxlcGlwID0gdGhhdC5sb2NhbHBpcGU7XHJcblxyXG4gICAgICBjb25zdCBkbGcgPSB0aGlzLm1vZGFsU2VydmljZS5zaG93KHByaW50c2V0dGluZyx7XHJcbiAgICAgICAgdGl0bGU6IHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgncHJpbnRmb3JtYXQnKSxcclxuICAgICAgICB3aWR0aDo0MDAsIFxyXG4gICAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlLFxyXG4gICAgICAgIHNob3dNYXhCdXR0b246ZmFsc2UsXHJcbiAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgeyB0ZXh0OiB0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50JyksIGNsczogJ2J0biBidG4tcHJpbWFyeScsIGhhbmRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UucHJpbnRKb2IoKTtcclxuICAgICAgICAgIH19LFxyXG4gICAgICAgICAgeyB0ZXh0OiB0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ2NhbmNlbCcpLCBjbHM6ICdidG4gYnRuLXNlY29uZGFyeScsIGhhbmRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBkbGcuY2xvc2UoKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgXSxcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIHByaW50c2V0dGluZy5pbnN0YW5jZS5kbGcgPSBkbGc7XHJcbiAgICAgIC8v6K6i6ZiF5LqG5by55Ye655qE5qC85byP6YCJ5oup5YiX6KGo55qE5YWz6Zet5LqL5Lu2XHJcbiAgICAgIHByaW50c2V0dGluZy5pbnN0YW5jZS5wcmludC5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgICAgICAgIGRsZy5jbG9zZSgpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoYXQub3V0cHV0QnlTaW5nbGVTZWxlY3Rpb25Gb3JtYXQoe1xyXG4gICAgICAgICAgICAgICdpZCc6IGRhdGEuaWQsIFxyXG4gICAgICAgICAgICAgICdpc0ZpbHRlcicgOiBmaWx0ZXIsIFxyXG4gICAgICAgICAgICAgICdiZW9wdGlvbnMnOiBPYmplY3QuYXNzaWduKHt9LCBiZU9wdGlvbnMpLCBcclxuICAgICAgICAgICAgICAnb3B0aW9ucyc6b3B0aW9ucywgXHJcbiAgICAgICAgICAgICAgJ2lzSm9iJzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgJ3ByaW50ZXJOYW1lJzonJyxcclxuICAgICAgICAgICAgICAnYm94SWQnOicnLFxyXG4gICAgICAgICAgICAgICdwcmludFNldHRpbmcnOm51bGwsXHJcbiAgICAgICAgICAgICAgJ2VsZSc6ZWxlfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5ZCO5Y+w5omT5Y2w5Lu75Yqh55qE5qC85byP6YCJ5oup5ZKM5omT5Y2w6YWN572u5YiX6KGoXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBvcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uNEpvYihiZU9wdGlvbnM6QXJyYXk8QmFzZVNvdXJjZU9wdGlvbnM+LCBvcHRpb25zOiBPdXRwdXRPcHRpb25zLGZpbHRlcjpib29sZWFuLGlzTXVsdGk6Ym9vbGVhbil7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuXHJcbiAgICBpZihpc011bHRpKXsvL+aJuemHj+aJk+WNsFxyXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYuZ2V0UHJpbnREZXZpY2UoKS50aGVuKChkYXRhKT0+e1xyXG4gICAgICAgIGNvbnN0IGRldmljZSA9IGRhdGEgfHwgW107XHJcblxyXG4gICAgICAgIGxldCBpZHMgPSAnJztcclxuICAgICAgICBiZU9wdGlvbnMuZm9yRWFjaCh4PT5pZHMrPXguRm9ybWF0SWQrJywnKTtcclxuICBcclxuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhhdC5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShGb3JtYXRsaXN0am9iQ29tcG9uZW50KTtcclxuICAgICAgICBjb25zdCBwcmludHNldHRpbmcgPSBmYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICBcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UuYm94bGlzdCA9IGRldmljZTtcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UuZm9ybWF0SWQgPSBpZHMubGVuZ3RoPjA/aWRzLnN1YnN0cigwLGlkcy5sZW5ndGgtMSk6aWRzO1xyXG4gICAgICAgIHByaW50c2V0dGluZy5pbnN0YW5jZS5pc1Nob3dGb3JtYXQgPSBmYWxzZTtcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UubG9jYWxlcGlwID0gdGhhdC5sb2NhbHBpcGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGRsZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3cocHJpbnRzZXR0aW5nLHtcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50c2V0JyksXHJcbiAgICAgICAgICB3aWR0aDogODAwLCBcclxuICAgICAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXHJcbiAgICAgICAgICBzaG93TWF4QnV0dG9uOmZhbHNlLFxyXG4gICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICB7IHRleHQ6IHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgncHJpbnQnKSwgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcHJpbnRzZXR0aW5nLmluc3RhbmNlLnByaW50Sm9iKCk7XHJcbiAgICAgICAgICAgIH19LFxyXG4gICAgICAgICAgICB7IHRleHQ6IHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgnY2FuY2VsJyksIGNsczogJ2J0biBidG4tc2Vjb25kYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgZGxnLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0pOyAgXHJcbiAgICAgICAgLy/orqLpmIXkuoblvLnlh7rnmoTmoLzlvI/pgInmi6nliJfooajnmoTlhbPpl63kuovku7ZcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UucHJpbnQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGRsZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhhdC5vdXRwdXRCeU11bHRpU2VsZWN0aW9uRm9ybWF0KHtcclxuICAgICAgICAgICAgICAnaXNGaWx0ZXInIDogZmlsdGVyLCBcclxuICAgICAgICAgICAgICAnYmVvcHRpb25zJzogWy4uLmJlT3B0aW9uc10sIFxyXG4gICAgICAgICAgICAgICdvcHRpb25zJzogT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgJ2lzSm9iJzogdHJ1ZSxcclxuICAgICAgICAgICAgICAncHJpbnRlck5hbWUnOmRhdGEucHJpbnR0ZXIsXHJcbiAgICAgICAgICAgICAgJ2JveElkJzpkYXRhLmJveElkLFxyXG4gICAgICAgICAgICAgICdwcmludFNldHRpbmcnOmRhdGEucHJpbnRTZXR0aW5nLFxyXG4gICAgICAgICAgICAgICdlbGUnOm51bGx9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgY29uc3QgYmlsbENhdGVnb3J5SWQgPSBiZU9wdGlvbnNbMF0uYmlsbENhdGVnb3J5SWQ7XHJcbiAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9IGJlT3B0aW9uc1swXS5Tb3VyY2VJZDtcclxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmdldFByaW50Rm9ybWF0QW5kRGV2aWNlKGJpbGxDYXRlZ29yeUlkLGRhdGFTb3VyY2VJZCwoYmVPcHRpb25zIGFzIGFueSkuRmlyc3REaW1lbnNpb25WYWwsKGJlT3B0aW9ucyBhcyBhbnkpLlNlY29uZERpbWVuc2lvblZhbCkudGhlbigocmVzKT0+e1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHJlcy5mb3JtYXQgfHwgW107XHJcbiAgICAgICAgY29uc3QgZGV2aWNlID0gcmVzLmRldmljZSB8fCBbXTtcclxuICAgICAgICAvL+WPquacieS4gOadoeaJk+WNsOagvOW8j++8jOWImeS4jeeUqOWGjemAieaLqeagvOW8j1xyXG4gICAgICAgIGlmKGZvcm1hdC5sZW5ndGggPT09IDEpe1xyXG4gICAgICAgICAgYmVPcHRpb25zWzBdLkZvcm1hdElkID0gZm9ybWF0WzBdLmlkO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhhdC5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShGb3JtYXRsaXN0am9iQ29tcG9uZW50KTtcclxuICAgICAgICBjb25zdCBwcmludHNldHRpbmcgPSBmYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICAgXHJcbiAgICAgICAgcHJpbnRzZXR0aW5nLmluc3RhbmNlLmZvcm1hdHMgPSBmb3JtYXQ7XHJcbiAgICAgICAgcHJpbnRzZXR0aW5nLmluc3RhbmNlLmJveGxpc3QgPSBkZXZpY2U7XHJcbiAgICAgICAgcHJpbnRzZXR0aW5nLmluc3RhbmNlLmZvcm1hdElkID0gYmVPcHRpb25zWzBdLkZvcm1hdElkO1xyXG4gICAgICAgIHByaW50c2V0dGluZy5pbnN0YW5jZS5pc1Nob3dGb3JtYXQgPSBiZU9wdGlvbnNbMF0uRm9ybWF0SWQ/ZmFsc2U6dHJ1ZTtcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UubG9jYWxlcGlwID0gdGhhdC5sb2NhbHBpcGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGRsZyA9IHRoaXMubW9kYWxTZXJ2aWNlLnNob3cocHJpbnRzZXR0aW5nLHtcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50c2V0JyksXHJcbiAgICAgICAgICB3aWR0aDogODAwLCBcclxuICAgICAgICAgIGhlaWdodDogNTAwLFxyXG4gICAgICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXHJcbiAgICAgICAgICBzaG93TWF4QnV0dG9uOmZhbHNlLFxyXG4gICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICB7IHRleHQ6IHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgncHJpbnQnKSwgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcHJpbnRzZXR0aW5nLmluc3RhbmNlLnByaW50Sm9iKCk7XHJcbiAgICAgICAgICAgIH19LFxyXG4gICAgICAgICAgICB7IHRleHQ6IHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgnY2FuY2VsJyksIGNsczogJ2J0biBidG4tc2Vjb25kYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgZGxnLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0pOyAgXHJcbiAgICAgICAgLy/orqLpmIXkuoblvLnlh7rnmoTmoLzlvI/pgInmi6nliJfooajnmoTlhbPpl63kuovku7ZcclxuICAgICAgICBwcmludHNldHRpbmcuaW5zdGFuY2UucHJpbnQuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGRsZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhhdC5vdXRwdXRCeVNpbmdsZVNlbGVjdGlvbkZvcm1hdCh7XHJcbiAgICAgICAgICAgICAgJ2lkJzogZGF0YS5pZCwgXHJcbiAgICAgICAgICAgICAgJ2lzRmlsdGVyJyA6IGZpbHRlciwgXHJcbiAgICAgICAgICAgICAgJ2Jlb3B0aW9ucyc6IE9iamVjdC5hc3NpZ24oe30sIGJlT3B0aW9uc1swXSksIFxyXG4gICAgICAgICAgICAgICdvcHRpb25zJzogT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksXHJcbiAgICAgICAgICAgICAgJ2lzSm9iJzogdHJ1ZSxcclxuICAgICAgICAgICAgICAncHJpbnRlck5hbWUnOmRhdGEucHJpbnR0ZXIsXHJcbiAgICAgICAgICAgICAgJ2JveElkJzpkYXRhLmJveElkLFxyXG4gICAgICAgICAgICAgICdwcmludFNldHRpbmcnOmRhdGEucHJpbnRTZXR0aW5nLFxyXG4gICAgICAgICAgICAgICdlbGUnOm51bGx9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICB9XHJcblxyXG4gIC8vIOmAieS6huagvOW8j+WQjueahOi+k+WHulxyXG4gIHByaXZhdGUgb3V0cHV0QnlTaW5nbGVTZWxlY3Rpb25Gb3JtYXQocmVzOiBhbnkpOiBhbnl7XHJcbiAgICBjb25zb2xlLmxvZygn6YCJ5a6M5qC85byP5YeG5aSH5riy5p+TOiAnICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICBpZighcmVzLmlkKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcmVzLmJlb3B0aW9ucy5Gb3JtYXRJZCA9IHJlcy5pZDtcclxuICAgIHJlcy5vcHRpb25zLkRldmljZUlkID0gcmVzLmJveElkO1xyXG4gICAgcmVzLm9wdGlvbnMucHJpbnRlck5hbWUgPSByZXMucHJpbnRlck5hbWU7XHJcbiAgICByZXMub3B0aW9ucy5wcmludFNldHRpbmcgPSByZXMucHJpbnRTZXR0aW5nO1xyXG4gICAgcmVzLm9wdGlvbnMucHJpbnRKb2IgPSByZXMuaXNKb2I7XHJcblxyXG4gICAgaWYocmVzLmlzSm9iKXsvL+WQjuWPsOaJk+WNsFxyXG4gICAgICBpZihyZXMuaXNGaWx0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYucHJpbnRTaW5nbGVCeUZpbHRlcihyZXMuYmVvcHRpb25zLCByZXMub3B0aW9ucywgcmVzLnN1LCdDbG91ZFByaW50JylcclxuICAgICAgICAudGhlbigoKT0+e1xyXG4gICAgICAgICAgc2VsZi5ub3RpZnlTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbHBpcGUudHJhbnNmb3JtKCdzZW5kcHJpbnRqb2InKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5wcmludFNpbmdsZUJ5SWQocmVzLmJlb3B0aW9ucywgcmVzLm9wdGlvbnMsIHJlcy5zdSwnQ2xvdWRQcmludCcpXHJcbiAgICAgICAgLnRoZW4oKCk9PntcclxuICAgICAgICAgIHNlbGYubm90aWZ5U2VydmljZS5zdWNjZXNzKHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgnc2VuZHByaW50am9iJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9ZWxzZXsvL+WJjeWPsOaJk+WNsFxyXG4gICAgICBpZihyZXMuZWxlKSB7Ly/mnIllbGXvvIzliJnlvJXmk47otJ/otKPmuLLmn5NcclxuICAgICAgICBpZihyZXMuaXNGaWx0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgIGlmKHJlcy5lbGU9PT0nZG93bmxvYWQnKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50U2luZ2xlQnlGaWx0ZXIocmVzLmJlb3B0aW9ucywgcmVzLm9wdGlvbnMsIHJlcy5zdSwnQ2xvdWRQcmludCcpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgc2VsZi5kb3dubG9hZEZpbGUoZGF0YSk7ICBcclxuICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYub3BlblJlbmRlZFZpZXdlcihyZXMuZWxlLG51bGwscmVzLm9wdGlvbnMsW3Jlcy5iZW9wdGlvbnNdLHJlcy5pc0ZpbHRlcik7XHJcbiAgICAgICAgICB9ICBcclxuICAgICAgICB9IGVsc2UgeyAgXHJcbiAgICAgICAgICBpZihyZXMuZWxlPT09J2Rvd25sb2FkJyl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5wcmludFNpbmdsZUJ5SWQocmVzLmJlb3B0aW9ucywgcmVzLm9wdGlvbnMsIHJlcy5zdSwnQ2xvdWRQcmludCcpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgc2VsZi5kb3dubG9hZEZpbGUoZGF0YSk7ICBcclxuICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYub3BlblJlbmRlZFZpZXdlcihyZXMuZWxlLG51bGwscmVzLm9wdGlvbnMsW3Jlcy5iZW9wdGlvbnNdLHJlcy5pc0ZpbHRlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9ZWxzZXsvL+ayoeaciWVsZe+8jOWImeWPqui/lOWbnuWQjuWPsOeahOa4suafk+e7k+aenO+8jOe7meiwg+eUqOaWueiHquW3seWkhOeQhlxyXG4gICAgICAgIGlmKHJlcy5maWx0ZXIgPT09IHRydWUpe1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50U2luZ2xlQnlGaWx0ZXIocmVzLmJlb3B0aW9ucywgcmVzLm9wdGlvbnMsIHJlcy5zdSwnQ2xvdWRQcmludCcpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50U2luZ2xlQnlJZChyZXMuYmVvcHRpb25zLCByZXMub3B0aW9ucywgcmVzLnN1LCdDbG91ZFByaW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG91dHB1dEJ5TXVsdGlTZWxlY3Rpb25Gb3JtYXQocmVzOiBhbnkpOiBhbnl7XHJcbiAgICBjb25zb2xlLmxvZygn6YCJ5a6M5qC85byP5YeG5aSH5riy5p+TOiAnICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuXHJcbiAgICByZXMub3B0aW9ucy5EZXZpY2VJZCA9IHJlcy5ib3hJZDtcclxuICAgIHJlcy5vcHRpb25zLnByaW50ZXJOYW1lID0gcmVzLnByaW50ZXJOYW1lO1xyXG4gICAgcmVzLm9wdGlvbnMucHJpbnRTZXR0aW5nID0gcmVzLnByaW50U2V0dGluZztcclxuICAgIHJlcy5vcHRpb25zLnByaW50Sm9iID0gcmVzLmlzSm9iO1xyXG5cclxuICAgIGlmKHJlcy5pc0pvYil7Ly/lkI7lj7DmiZPljbBcclxuICAgICAgaWYocmVzLmlzRmlsdGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50TXVsdGlCeUZpbHRlcihyZXMuYmVvcHRpb25zLCByZXMub3B0aW9ucywgcmVzLnN1LCdDbG91ZFByaW50JylcclxuICAgICAgICAudGhlbigoKT0+e1xyXG4gICAgICAgICAgc2VsZi5ub3RpZnlTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbHBpcGUudHJhbnNmb3JtKCdzZW5kcHJpbnRqb2InKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5wcmludE11bHRpQnlJZChyZXMuYmVvcHRpb25zLCByZXMub3B0aW9ucywgcmVzLnN1LCdDbG91ZFByaW50JylcclxuICAgICAgICAudGhlbigoKT0+e1xyXG4gICAgICAgICAgc2VsZi5ub3RpZnlTZXJ2aWNlLnN1Y2Nlc3ModGhpcy5sb2NhbHBpcGUudHJhbnNmb3JtKCdzZW5kcHJpbnRqb2InKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiDlr7nlpJborr7orqHlmajlkozpooTop4jlmajmjqXlj6NcclxuXHJcbiAgLyoqXHJcbiAgICog5Zyo5b2T5YmN6aG16Z2iQm9keeS4iuaJk+W8gERlc2lnbmVyXHJcbiAgICogQHBhcmFtIGZvcm1hdCDmoLzlvI9cclxuICAgKiBAcGFyYW0gZGF0YSDmlbDmja5cclxuICAgKiBAcGFyYW0gZm9ybWF0SWQg5qC85byPaWRcclxuICAgKiBAcGFyYW0gZGF0YUlkcyDmlbDmja5pZHNcclxuICAgKi9cclxuICBvcGVuRGVzaWduZXIoZm9ybWF0OiBzdHJpbmcsIGRhdGE6IG9iamVjdCwgZm9ybWF0SWQ6IHN0cmluZywgZGF0YUlkczogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm9wZW5EZXNpZ25lckludGVybmFsKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBmb3JtYXQsIGRhdGEsIGZvcm1hdElkLCBkYXRhSWRzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWcqOW9k+WJjemhtemdoueahOaMh+WumueahOWFg+e0oOS4iuaJk+W8gERlc2lnbmVyXHJcbiAgICogQHBhcmFtIGVsZSDmjIflrprnmoTlhYPntKBcclxuICAgKiBAcGFyYW0gZm9ybWF0IOagvOW8j1xyXG4gICAqIEBwYXJhbSBkYXRhIOaVsOaNrlxyXG4gICAqIEBwYXJhbSBmb3JtYXRJZCDmoLzlvI9pZFxyXG4gICAqIEBwYXJhbSBkYXRhSWRzIOaVsOaNrmlkc1xyXG4gICAqL1xyXG4gIG9wZW5EZXNpZ25lck9uRWxlKGVsZTogSFRNTEVsZW1lbnQsIGZvcm1hdDogc3RyaW5nLCBkYXRhOiBvYmplY3QsIGZvcm1hdElkOiBzdHJpbmcsIGRhdGFJZHM6IHN0cmluZykge1xyXG4gICAgdGhpcy5vcGVuRGVzaWduZXJJbnRlcm5hbChlbGUsIGZvcm1hdCwgZGF0YSwgZm9ybWF0SWQsIGRhdGFJZHMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Zyo5paw55qEdGFi6aG16Z2i5LiK5omT5byARGVzaWduZXJcclxuICAgKiBAcGFyYW0gZm9ybWF0IOagvOW8j1xyXG4gICAqIEBwYXJhbSBkYXRhIOaVsOaNrlxyXG4gICAqIEBwYXJhbSBmb3JtYXRJZCDmoLzlvI9pZFxyXG4gICAqIEBwYXJhbSBkYXRhSWRzIOaVsOaNrmlkc1xyXG4gICAqL1xyXG4gIG9wZW5EZXNpZ25lck5ld1RhYihmb3JtYXQ6IHN0cmluZywgZGF0YTogb2JqZWN0LCBmb3JtYXRJZDogc3RyaW5nLCBkYXRhSWRzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMub3BlbkRlc2lnbmVySW50ZXJuYWwobnVsbCwgZm9ybWF0LCBkYXRhLCBmb3JtYXRJZCwgZGF0YUlkcyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIOi/kOihjOaXtuWcqOW9k+WJjemhtemdoueahOaMh+WumueahOWFg+e0oOS4iuaJk+W8gERlc2lnbmVyXHJcbiAgICogQHBhcmFtIGVsZSDmjIflrprnmoTlhYPntKBcclxuICAgKiBAcGFyYW0gZm9ybWF0Q29kZSDmoLzlvI/nvJblj7dcclxuICAgKiBAcGFyYW0gZm9ybWF0TmFtZSDmoLzlvI/lkI3np7BcclxuICAgKiBAcGFyYW0gYml6T2JqZWN0SWQg5Lia5Yqh5a+56LGhSWRcclxuICAgKiBAcGFyYW0gZGF0YXNvdXJjZUlkIOaVsOaNrua6kElkLCBCRUlkL1ZPSWQvQmVzaW5lc3NPYmplY3RDbGFzc0luZm9cclxuICAgKiBAcGFyYW0gc291cmNlVHlwZSDmlbDmja7mupDnsbvlnossIFNvdXJjZVR5cGUuQkUvU291cmNlVHlwZS5WTy9Tb3VyY2VUeXBlLkJPXHJcbiAgICovXHJcbiAgb3BlbkRlc2lnbmVyT25FbGVGb3JSdW50aW1lKGVsZTogSFRNTEVsZW1lbnQsZm9ybWF0SWQ6IHN0cmluZywgZm9ybWF0Q29kZTogc3RyaW5nLCBmb3JtYXROYW1lOiBzdHJpbmcsIGJpek9iamVjdElkOiBzdHJpbmcsIGRhdGFzb3VyY2VJZDogc3RyaW5nLCBzb3VyY2VUeXBlOiBTb3VyY2VUeXBlKSB7XHJcbiAgICB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0ID0gbmV3IFByaW50Rm9ybWF0KCk7XHJcbiAgICB0aGlzLnByaW50RW50aXR5LmlzVXNlTWV0YURhdGEgPSB0cnVlO1xyXG5cclxuICAgIGlmKGZvcm1hdElkICYmIGZvcm1hdElkLmxlbmd0aD4wKXtcclxuICAgICAgLy8g57yW6L6RXHJcbiAgICAgIHRoaXMuZm9ybWF0U3J2LmdldE5ld1NvdXJjZUZvcm1hdEJ5Rm9ybWF0SWQoZm9ybWF0SWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0ID0gcmVzO1xyXG4gICAgICAgIC8v5omT5byA6K6+6K6h5ZmoXHJcbiAgICAgICAgdGhpcy5vcGVuRGVzaWduZXJPbkVsZShlbGUsIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQuY29udGVudCwge30sICcnLCAnJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIC8v5Yid5aeL5YyWXHJcbiAgICAgIHRoaXMuaW5pdFByaW50Rm9ybWF0KGRhdGFzb3VyY2VJZCwgc291cmNlVHlwZSlcclxuICAgICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgICB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0LmlkID0gVXRpbHMudXVpZCgpO1xyXG4gICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQuY29kZSA9IGZvcm1hdENvZGU7XHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdC5uYW1lID0gZm9ybWF0TmFtZTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdC5iaXpPYmplY3RJZCA9IGJpek9iamVjdElkO1xyXG4gICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQuZGF0YVNvdXJjZUlkID0gZGF0YXNvdXJjZUlkO1xyXG4gICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQuc291cmNlVHlwZSA9IHNvdXJjZVR5cGU7XHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdC5pc1VzZVRlbXBsYXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdC5jb250ZW50ID0gcmVzLmZvcm1hdDsgLy/miZPljbDmoLzlvI9tcnQgICBcclxuICAgICAgICB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0LmRhdGFTY2hlbWEgPSAgcmVzLnByaW50c2NoZW1hOy8vUHJpbnREYXRhU2NoZW1hVmlld+aPj+i/sCAgIFxyXG5cclxuICAgICAgICAvL+aJk+W8gOiuvuiuoeWZqFxyXG4gICAgICAgIHRoaXMub3BlbkRlc2lnbmVyT25FbGUoZWxlLCB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0LmNvbnRlbnQsIHt9LCAnJywgJycpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWcqOaMh+WumueahOWFg+e0oOS4iuaJk+W8gERlc2lnbmVyKOWJjeerr+a4suafkylcclxuICAgKiBAcGFyYW0gZWxlIOaMh+WumueahOWFg+e0oFxyXG4gICAqIEBwYXJhbSBmb3JtYXQg5qC85byPXHJcbiAgICogQHBhcmFtIGRhdGEg5pWw5o2uXHJcbiAgICogQHBhcmFtIGZvcm1hdElkIOagvOW8j2lkXHJcbiAgICogQHBhcmFtIGRhdGFJZHMg5pWw5o2uaWRzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBvcGVuRGVzaWduZXJJbnRlcm5hbChlbGU6IEhUTUxFbGVtZW50LCBmb3JtYXQ6IHN0cmluZywgZGF0YTogb2JqZWN0LCBmb3JtYXRJZDogc3RyaW5nLCBkYXRhSWRzOiBzdHJpbmcpIHtcclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgdGhpcy5wcmludEVudGl0eS5mb3JtYXQgPSBmb3JtYXQ7XHJcbiAgICAgIHRoaXMucHJpbnRFbnRpdHkuZGF0YSA9IGRhdGE7XHJcbiAgICAgIHRoaXMucHJpbnRFbnRpdHkuZm9yYW10SWQgPSBmb3JtYXRJZDtcclxuICAgICAgdGhpcy5wcmludEVudGl0eS5kYXRhSWQgPSBkYXRhSWRzO1xyXG4gICAgICB0aGlzLmNyZWF0ZURlc2lnbmVyUmVmKCk7XHJcbiAgICAgIC8vIOe7meinhuWbvua3u+WKoOiEj+ajgOafpSjov5nkuKrmlrnlvI/mmK/phY3lkIhAVmlld0NoaWxk55qE5pa55rOV5L2/55So55qEKVxyXG4gICAgICAvLyB0aGlzLmFwcGxpY2F0aW9uUmVmLmF0dGFjaFZpZXcodGhpcy5kZXNpZ25lcmNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XHJcbiAgICAgIC8vIOWwhuWIm+W7uuWlveeahOe7hOS7tuW8leeUqGFwcGVuZOWIsOaMh+Wumuagh+etvuS4i1xyXG4gICAgICAvLyDov5nph4zlsIbliqjmgIHnu4Tku7bliqDovb3liLDmjIflrprnmoRodG1s6YeM5pyJ5Lik56eN5pa55byP77yaXHJcbiAgICAgIC8vICAxLuS4iumdoueahEBWaWV3Q2hpbFxyXG4gICAgICAvLyAgMi7lpoLkuIvnmoRlbGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb21wb25lbnRSb290Tm9kZSh0aGlzLnZpZXdlcmNvbXBvbmVudFJlZikpO+aWueW8j1xyXG4gICAgICBlbGUuYXBwZW5kQ2hpbGQodGhpcy5nZXRDb21wb25lbnRSb290Tm9kZSh0aGlzLmRlc2lnbmVyY29tcG9uZW50UmVmKSk7IFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcGFyYW0gPSBuZXcgT3V0cHV0UGFyYW0oKTtcclxuICAgICAgcGFyYW0ucHJuRm9ybWF0ID0gZm9ybWF0O1xyXG4gICAgICBwYXJhbS5wcm5EYXRhID0gZGF0YTtcclxuICAgICAgcGFyYW0ucHJuRm9ybWF0SWQgPSBmb3JtYXRJZDtcclxuICAgICAgcGFyYW0ucHJuRGF0YUlkID0gZGF0YUlkcztcclxuICAgICAgcGFyYW0ucHJuVHlwZSA9IENtcFR5cGUuRGVzaWduZXI7XHJcblxyXG4gICAgICB0aGlzLmFwcFNlcnZpY2Uub3BlbkFwcEJ5T3B0aW9ucyh7XHJcbiAgICAgICAgYXBwVHlwZTonYXBwJyxcclxuICAgICAgICBmdW5jSWQ6JycsXHJcbiAgICAgICAgdGFiTmFtZTp0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50ZGVzaWduZXInKSxcclxuICAgICAgICBhcHBJZDonY2xvdWRwcmludC12aWV3LWluZGV4JyxcclxuICAgICAgICBhcHBFbnRyYW5jZTonY2xvdWRwcmludC12aWV3LWluZGV4JyxcclxuICAgICAgICB0YWJJZDpVdGlscy51dWlkKCksXHJcbiAgICAgICAgZW50aXR5UGFyYW1zOntcclxuICAgICAgICAgIGZvcmFtdFBhcmFtOnBhcmFtLFxyXG4gICAgICAgICAgZm9ybWF0RW50aXR5Om51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnqbrnmb3miZPljbDmoLzlvI9cclxuICAgKi9cclxuICBwcml2YXRlIGluaXRQcmludEZvcm1hdChkYXRhc291cmNlSWQ6IHN0cmluZywgc291cmNlVHlwZTogU291cmNlVHlwZSk6UHJvbWlzZTxhbnk+e1xyXG5cclxuICAgIGlmKHNvdXJjZVR5cGUgPT09IFNvdXJjZVR5cGUuQkUpXHJcbiAgICB7XHJcbiAgICAgIC8vYm/mlbDmja7mupBcclxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmNyZWF0ZVByaW50Rm9ybWF0V2l0aEJFKGRhdGFzb3VyY2VJZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChzb3VyY2VUeXBlID09PSBTb3VyY2VUeXBlLlZPKSBcclxuICAgIHtcclxuICAgICAgLy8gdm/mlbDmja7mupBcclxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LmNyZWF0ZVByaW50Rm9ybWF0V2l0aFZPKGRhdGFzb3VyY2VJZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIC8vIOm7mOiupOeUqEJF5pWw5o2u5rqQXHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5jcmVhdGVQcmludEZvcm1hdFdpdGhCTyhkYXRhc291cmNlSWQpO1xyXG4gICAgfSAgXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliJvlu7pEZXNpZ25lcuaehOS7tueahOW8leeUqOWvueixoVxyXG4gICAqL1xyXG4gIHByaXZhdGUgY3JlYXRlRGVzaWduZXJSZWYoKTogdm9pZCB7XHJcblxyXG4gICAgY29uc3QgZmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQ2xvdWRwcmludERlc2lnbmVyQ29tcG9uZW50KTtcclxuICAgIGlmICghdGhpcy52aWV3Q29udGFpbmVyKSB7XHJcbiAgICAgIHRoaXMuZGVzaWduZXJjb21wb25lbnRSZWYgPSBmYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcclxuICAgICAgdGhpcy5hcHBsaWNhdGlvblJlZi5hdHRhY2hWaWV3KHRoaXMuZGVzaWduZXJjb21wb25lbnRSZWYuaG9zdFZpZXcpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudmlld0NvbnRhaW5lci5jbGVhcigpO1xyXG4gICAgICB0aGlzLmRlc2lnbmVyY29tcG9uZW50UmVmID0gdGhpcy52aWV3Q29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlkIzmraXnu4Tku7blkoznu4Tku7bkuIrkvp3otZbnmoTmnI3liqHnmoRwcmludEVudGl0eVxyXG4gICAgdGhpcy5kZXNpZ25lcmNvbXBvbmVudFJlZi5pbnN0YW5jZS5zZXRQcmludEVudGl0eSh0aGlzLnByaW50RW50aXR5KTtcclxuICAgIC8vIHRoaXMuZGVzaWduZXJjb21wb25lbnRSZWYuaW5zdGFuY2UubG9jYWxlaWQgPSB0aGlzLmxvY2FsZWlkO1xyXG5cclxuICAgIC8vIOiuoumYhemAgOWHuuS6i+S7tlxyXG4gICAgdGhpcy5kZXNpZ25lcmNvbXBvbmVudFJlZi5pbnN0YW5jZS5wcmludEVudGl0eS5vbkV4aXRFdmVudC5zdWJzY3JpYmUoKGUpID0+IHtcclxuICAgICAgdGhpcy5kZXNpZ25lcmNvbXBvbmVudFJlZi5kZXN0cm95KCk7XHJcbiAgICAgIGlmICghdGhpcy52aWV3Q29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvblJlZi5kZXRhY2hWaWV3KHRoaXMuZGVzaWduZXJjb21wb25lbnRSZWYuaG9zdFZpZXcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lci5jbGVhcigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+W8gOW3sue7j+a4suafk+eahFZpZXdlcu+8iOWQjuerr+a4suafk++8iVxyXG4gICAqIEBwYXJhbSBlbGUg5oyH5a6a55qE5YWD57SgXHJcbiAgICogQHBhcmFtIGRhdGEg5bey57uP5riy5p+T55qE5qC85byPKOWQjuerr+a4suafk+aYr3BkZueahOS6jOi/m+WItua1gSlcclxuICAgKi9cclxuICBvcGVuUmVuZGVkVmlld2VyKGVsZTogYW55LCBkYXRhOiBhbnksIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsc291cmNlT3B0aW9uczogQXJyYXk8QmFzZVNvdXJjZU9wdGlvbnM+PW51bGwsaXNGaWx0ZXI6Ym9vbGVhbj1mYWxzZSxwcmludEVudGl0eTpQcmludEVudGl0eT1udWxsLHBhcmFtOmFueT1udWxsKSB7XHJcbiAgICBcclxuICAgIGlmKHByaW50RW50aXR5IT1udWxsKXsvL+eUqOWklueVjOeahHByaW50RW50aXR55bGe5oCn6KaG55uW5b2T5YmN55qEcHJpbnRFbnRpdHnnmoTlsZ7mgKdcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXHJcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHByaW50RW50aXR5KSB7XHJcbiAgICAgICAgdGhpcy5wcmludEVudGl0eVtrZXldID0gcHJpbnRFbnRpdHlba2V5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGRhdGEpey8v5pWw5o2u5bey5riy5p+T77yM55u05o6l5omT5Y2w77yM5LiN5a2Y5Zyo5ZCO5Y+w5omT5Y2w5LqGXHJcbiAgICAgIHRoaXMucHJlVmlld0xvY2FsKGVsZSxkYXRhLG9wdGlvbnMsc291cmNlT3B0aW9ucyxwcmludEVudGl0eSxpc0ZpbHRlcixwYXJhbSk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgdGhpcy5wcmVWaWV3UmVtb3RlKGVsZSxvcHRpb25zLHNvdXJjZU9wdGlvbnMsaXNGaWx0ZXIscHJpbnRFbnRpdHkscGFyYW0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+W8gOW3sue7j+a4suafk+eahFZpZXdlcu+8iOWQjuerr+a4suafkyznu5npmYTku7bnlKjnmoTvvIlcclxuICAgKiBAcGFyYW0gZWxlIOaMh+WumueahOWFg+e0oFxyXG4gICAqIEBwYXJhbSBkYXRhIOW3sue7j+a4suafk+eahOagvOW8jyjlkI7nq6/muLLmn5PmmK9wZGbnmoTkuozov5vliLbmtYEpXHJcbiAgICovXHJcbiAgb3BlblJlbmRlZFZpZXdlcjRBdHRhY2htZW50KGVsZTogYW55LCBkYXRhOiBhbnksIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMpIHtcclxuICAgIFxyXG4gICAgdGhpcy5vcGVuUmVuZGVkVmlld2VyKGVsZSxkYXRhLG9wdGlvbnMsbnVsbCxmYWxzZSx0aGlzLnByaW50RW50aXR5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOacrOWcsOebtOaOpeaJk+WNsFxyXG4gICAqL1xyXG4gIHByaXZhdGUgcHJlVmlld0xvY2FsKGVsZTogYW55LCBkYXRhOiBhbnksIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsc291cmNlT3B0aW9uczogQXJyYXk8QmFzZVNvdXJjZU9wdGlvbnM+PW51bGwscHJpbnRFbnRpdHk6UHJpbnRFbnRpdHk9bnVsbCxpc0ZpbHRlcjpib29sZWFuLHBhcmFtOmFueT1udWxsKXtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIGNvbnN0IGIgPSBuZXcgQmxvYihbZGF0YV0pO1xyXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihiKTtcclxuICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBjb25zdCByZW5kZWRGb3JtYXQgPSByZWFkZXIucmVzdWx0IGFzIGFueTtcclxuICAgICAgY29uc3QgcGFyYW0gPSBuZXcgT3V0cHV0UGFyYW0oKTtcclxuICAgICAgcGFyYW0ucHJuUmVuZGVkRm9ybWF0ID0gYnRvYShuZXcgVWludDhBcnJheShyZW5kZWRGb3JtYXQpIGFzIGFueSk7XHJcbiAgICAgIHBhcmFtLnByblR5cGUgPSBDbXBUeXBlLlZpZXdlcjtcclxuICAgICAgcGFyYW0ucHJuT3V0cHV0T3BzID0gT2JqZWN0LmFzc2lnbih7fSxvcHRpb25zKTtcclxuICAgICAgcGFyYW0ucHJuU291cmNlT3B0aW9ucyA9IHNvdXJjZU9wdGlvbnM/Wy4uLnNvdXJjZU9wdGlvbnNdOltdO1xyXG4gICAgICBwYXJhbS5pc0ZpbHRlciA9IGlzRmlsdGVyO1xyXG5cclxuICAgICAgaWYgKGVsZSA9PT0gJ3RhYicpIHtcclxuICAgICAgICBzZWxmLmFwcFNlcnZpY2Uub3BlbkFwcEJ5T3B0aW9ucyh7XHJcbiAgICAgICAgICBhcHBUeXBlOidhcHAnLFxyXG4gICAgICAgICAgZnVuY0lkOicnLFxyXG4gICAgICAgICAgdGFiTmFtZTpzZWxmLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50dmlldycpLFxyXG4gICAgICAgICAgYXBwSWQ6J2Nsb3VkcHJpbnQtdmlldy1pbmRleCcsXHJcbiAgICAgICAgICBhcHBFbnRyYW5jZTonY2xvdWRwcmludC12aWV3LWluZGV4JyxcclxuICAgICAgICAgIHRhYklkOlV0aWxzLnV1aWQoKSxcclxuICAgICAgICAgIGVudGl0eVBhcmFtczp7XHJcbiAgICAgICAgICAgIGZvcmFtdFBhcmFtOnBhcmFtLFxyXG4gICAgICAgICAgICBmb3JtYXRFbnRpdHk6bnVsbCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgcmVtb3RlUHJpbnQgPSBhd2FpdCBzZWxmLmZvcm1hdFNydi5pc1JlbW90ZVByaW50KCk7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVWaWV3ZXJSZWYoKTsgICAgICAgIFxyXG4gICAgICAgIHNlbGYucHJpbnRFbnRpdHkucmVuZGVkRm9ybWF0ID0gcmVuZGVkRm9ybWF0O1xyXG4gICAgICAgIHNlbGYudmlld2VyY29tcG9uZW50UmVmLmluc3RhbmNlLm91dHB1dFBhcmFtID0gcGFyYW07XHJcbiAgICAgICAgc2VsZi52aWV3ZXJjb21wb25lbnRSZWYuaW5zdGFuY2UuaXNSZW1vdGVQcmludCA9IHJlbW90ZVByaW50O1xyXG4gICAgICAgIGVsZS5hcHBlbmRDaGlsZChzZWxmLmdldENvbXBvbmVudFJvb3ROb2RlKHNlbGYudmlld2VyY29tcG9uZW50UmVmKSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDov5znqIvmiZPljbBcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIHByZVZpZXdSZW1vdGUoZWxlOiBhbnksIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsc291cmNlT3B0aW9uczogQXJyYXk8QmFzZVNvdXJjZU9wdGlvbnM+PW51bGwsaXNGaWx0ZXI6Ym9vbGVhbixwcmludEVudGl0eTpQcmludEVudGl0eT1udWxsLHBhcmFtOmFueT1udWxsKXtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIGNvbnN0IG91dHB1dHBhcmFtID0gbmV3IE91dHB1dFBhcmFtKCk7XHJcbiAgICBvdXRwdXRwYXJhbS5wcm5UeXBlID0gQ21wVHlwZS5WaWV3ZXI7XHJcbiAgICBvdXRwdXRwYXJhbS5wcm5PdXRwdXRPcHMgPSBPYmplY3QuYXNzaWduKHt9LG9wdGlvbnMpO1xyXG4gICAgb3V0cHV0cGFyYW0ucHJuU291cmNlT3B0aW9ucyA9Wy4uLnNvdXJjZU9wdGlvbnNdO1xyXG4gICAgb3V0cHV0cGFyYW0uaXNGaWx0ZXIgPSBpc0ZpbHRlcjtcclxuICAgIGlmIChlbGUgPT09ICd0YWInKSB7XHJcblxyXG4gICAgICBzZWxmLmFwcFNlcnZpY2Uub3BlbkFwcEJ5T3B0aW9ucyh7XHJcbiAgICAgICAgYXBwVHlwZTonYXBwJyxcclxuICAgICAgICBmdW5jSWQ6JycsXHJcbiAgICAgICAgdGFiTmFtZTpzZWxmLmxvY2FscGlwZS50cmFuc2Zvcm0oJ3ByaW50dmlldycpLFxyXG4gICAgICAgIGFwcElkOidjbG91ZHByaW50LXZpZXctaW5kZXgnLFxyXG4gICAgICAgIGFwcEVudHJhbmNlOidjbG91ZHByaW50LXZpZXctaW5kZXgnLFxyXG4gICAgICAgIHRhYklkOlV0aWxzLnV1aWQoKSxcclxuICAgICAgICBlbnRpdHlQYXJhbXM6e1xyXG4gICAgICAgICAgZm9yYW10UGFyYW06b3V0cHV0cGFyYW0sXHJcbiAgICAgICAgICBmb3JtYXRFbnRpdHk6bnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJlbW90ZVByaW50ID0gYXdhaXQgc2VsZi5mb3JtYXRTcnYuaXNSZW1vdGVQcmludCgpO1xyXG4gICAgICBzZWxmLmNyZWF0ZVZpZXdlclJlZigpO1xyXG4gICAgICBzZWxmLnZpZXdlcmNvbXBvbmVudFJlZi5pbnN0YW5jZS5vdXRwdXRQYXJhbSA9IG91dHB1dHBhcmFtO1xyXG4gICAgICBzZWxmLnZpZXdlcmNvbXBvbmVudFJlZi5pbnN0YW5jZS5pc1JlbW90ZVByaW50ID0gcmVtb3RlUHJpbnQ7XHJcbiAgICAgIGVsZS5hcHBlbmRDaGlsZChzZWxmLmdldENvbXBvbmVudFJvb3ROb2RlKHNlbGYudmlld2VyY29tcG9uZW50UmVmKSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu6Vmlld2Vy5p6E5Lu255qE5byV55So5a+56LGhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVWaWV3ZXJSZWYoKTogdm9pZCB7XHJcblxyXG4gICAgY29uc3QgZmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQ2xvdWRwcmludFZpZXdlckNvbXBvbmVudCk7XHJcbiAgICBpZiAoIXRoaXMudmlld0NvbnRhaW5lcikge1xyXG4gICAgICB0aGlzLnZpZXdlcmNvbXBvbmVudFJlZiA9IGZhY3RvcnkuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICB0aGlzLmFwcGxpY2F0aW9uUmVmLmF0dGFjaFZpZXcodGhpcy52aWV3ZXJjb21wb25lbnRSZWYuaG9zdFZpZXcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy52aWV3Q29udGFpbmVyLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMudmlld2VyY29tcG9uZW50UmVmID0gdGhpcy52aWV3Q29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlkIzmraXnu4Tku7blkoznu4Tku7bkuIrkvp3otZbnmoTmnI3liqHnmoRwcmludEVudGl0eVxyXG4gICAgdGhpcy52aWV3ZXJjb21wb25lbnRSZWYuaW5zdGFuY2Uuc2V0UHJpbnRFbnRpdHkodGhpcy5wcmludEVudGl0eSk7XHJcbiAgICB0aGlzLnZpZXdlcmNvbXBvbmVudFJlZi5pbnN0YW5jZS5sb2NhbHBpcGUgPSB0aGlzLmxvY2FscGlwZTtcclxuICAgIC8vIOiuoumYhemAgOWHuuS6i+S7tlxyXG4gICAgdGhpcy52aWV3ZXJjb21wb25lbnRSZWYuaW5zdGFuY2UucHJpbnRFbnRpdHkub25FeGl0RXZlbnQuc3Vic2NyaWJlKChlKSA9PiB7XHJcbiAgICAgIHRoaXMudmlld2VyY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcclxuICAgICAgaWYgKCF0aGlzLnZpZXdDb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uUmVmLmRldGFjaFZpZXcodGhpcy52aWV3ZXJjb21wb25lbnRSZWYuaG9zdFZpZXcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lci5jbGVhcigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWwhkNvbXBvbmVudFJlZuexu+Wei+eahOe7hOS7tuW8leeUqOi9rOaNouS4ukRPTeiKgueCue+8iOWPguiAg+iHqk1hdGVyaWFsMu+8iVxyXG4gICAqIEBwYXJhbSBjcFJlZiDnu4Tku7bnmoTlvJXnlKjlr7nosaFcclxuICAgKi9cclxuICBwcml2YXRlIGdldENvbXBvbmVudFJvb3ROb2RlKGNwUmVmOiBDb21wb25lbnRSZWY8YW55Pik6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiAoY3BSZWYuaG9zdFZpZXcgYXMgRW1iZWRkZWRWaWV3UmVmPGFueT4pLnJvb3ROb2Rlc1swXSBhcyBIVE1MRWxlbWVudDtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG4gIC8vI3JlZ2lvbiDlr7nlpJbmiZPljbDmnI3liqHmjqXlj6NcclxuICAvKipcclxuICAgKiDljZXmoLzlvI/mlbDmja5pZOaJk+WNsFxyXG4gICAqIHN177ya5Y+M5qCI5qih5byP5LiLbmdpbnjot6/nlLHnmoRzdVxyXG4gICAqIFxyXG4gICAqIDEu5bim57u05bqm6L+H5ruk5qC85byP6YCJ5oup5ZmoXHJcbiAgICovXHJcbiAgcHJpbnRTaW5nbGVCeUlkKGJlb3B0aW9uczogU291cmNlT3B0aW9ucywgb3B0aW9uczogT3V0cHV0T3B0aW9ucywgZWxlOiBhbnksc3U9bnVsbCxwYXJhbT1udWxsKTogYW55IHtcclxuICAgIGlmKERhdGFWYWxpZGF0b3IuY2hlY2tBcHBVcmwodGhpcy5wcmludEVudGl0eS5hcHBVcmwpPT1mYWxzZSl7XHJcbiAgICAgIHRoaXMubm90aWZ5U2VydmljZS5pbmZvKHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgnYXBwdXJsZXJyb3InKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZihiZW9wdGlvbnMucXVlcnlUeXBlPT11bmRlZmluZWQpey8v5YW85a655Lul5YmN55qE6YC76L6RXHJcbiAgICAgIGJlb3B0aW9ucy5xdWVyeVR5cGUgPSBRdWVyeVR5cGUuVW5rbm93bjtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMucHJpbnRUeXBlPT11bmRlZmluZWQpey8v5YW85a655Lul5YmN55qE6YC76L6R6L+Z6YeM6buY6K6k5Li66KGo5Y2V5omT5Y2wXHJcbiAgICAgIG9wdGlvbnMucHJpbnRUeXBlID0gUHJpbnRUeXBlLkZvcm07XHJcbiAgICB9XHJcblxyXG4gICAgLy/kuI7ooajljZXpm4bmiJDml7bvvIzooajljZXmiZPljbDml7bmnInlpJrkuKrmiZPljbDmoLzlvI/vvIzpnIDopoHpgInmi6nvvIzov5nml7blgJnmoLzlvI9pZOaYr+epuueahFxyXG4gICAgaWYoYmVvcHRpb25zLkZvcm1hdElkID09IHVuZGVmaW5lZCB8fCBiZW9wdGlvbnMuRm9ybWF0SWQgPT0gJycpIHtcclxuICAgICAgcmV0dXJuIHRoaXMub3BlbkZvcm1hdExpc3RCeURpbWVuc2lvbihiZW9wdGlvbnMsIG9wdGlvbnMsIGVsZSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGVsZSkge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGlmKGVsZT09PSdkb3dubG9hZCcpe1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50U2luZ2xlQnlJZChiZW9wdGlvbnMsIG9wdGlvbnMsc3UsICdDbG91ZFByaW50JylcclxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYuZG93bmxvYWRGaWxlKGRhdGEpOyBcclxuICAgICAgICAgIH0pOyBcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHNlbGYub3BlblJlbmRlZFZpZXdlcihlbGUsbnVsbCxvcHRpb25zLFtiZW9wdGlvbnNdLGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50U2luZ2xlQnlJZChiZW9wdGlvbnMsIG9wdGlvbnMsc3UsICdDbG91ZFByaW50Jyk7XHJcbiAgICAgIH0gICAgICBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWNleagvOW8j+i/h+a7pOWZqOaJk+WNsFxyXG4gICAqIHN177ya5Y+M5qCI5qih5byP5LiLbmdpbnjot6/nlLHnmoRzdVxyXG4gICAqIFxyXG4gICAqIDEu5bim57u05bqm6L+H5ruk5qC85byP6YCJ5oup5ZmoXHJcbiAgICovXHJcbiAgcHJpbnRTaW5nbGVCeUZpbHRlcihiZUZpbHRlcm9wdGlvbnM6IFNvdXJjZUZpbHRlck9wdGlvbnMsIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIGVsZTogYW55LHN1PW51bGwscGFyYW09bnVsbCk6IGFueSB7XHJcbiAgICBpZihEYXRhVmFsaWRhdG9yLmNoZWNrQXBwVXJsKHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsKT09ZmFsc2Upe1xyXG4gICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuaW5mbyh0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ2FwcHVybGVycm9yJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmKGJlRmlsdGVyb3B0aW9ucy5xdWVyeVR5cGU9PXVuZGVmaW5lZCl7Ly/lhbzlrrnku6XliY3nmoTpgLvovpFcclxuICAgICAgYmVGaWx0ZXJvcHRpb25zLnF1ZXJ5VHlwZSA9IFF1ZXJ5VHlwZS5Vbmtub3duO1xyXG4gICAgfVxyXG4gICAgaWYob3B0aW9ucy5wcmludFR5cGU9PXVuZGVmaW5lZCl7Ly/lhbzlrrnku6XliY3nmoTpgLvovpHov5nph4zpu5jorqTkuLrooajljZXmiZPljbBcclxuICAgICAgb3B0aW9ucy5wcmludFR5cGUgPSBQcmludFR5cGUuRm9ybTtcclxuICAgIH1cclxuXHJcbiAgICAvL+S4juihqOWNlembhuaIkOaXtu+8jOihqOWNleaJk+WNsOaXtuacieWkmuS4quaJk+WNsOagvOW8j++8jOmcgOimgemAieaLqe+8jOi/meaXtuWAmeagvOW8j2lk5piv56m655qEXHJcbiAgICBpZihiZUZpbHRlcm9wdGlvbnMuRm9ybWF0SWQgPT0gdW5kZWZpbmVkIHx8IGJlRmlsdGVyb3B0aW9ucy5Gb3JtYXRJZCA9PSAnJykge1xyXG4gICAgICByZXR1cm4gdGhpcy5vcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uKGJlRmlsdGVyb3B0aW9ucywgb3B0aW9ucywgZWxlLCB0cnVlKTtcclxuICAgIH0gZWxzZSAge1xyXG4gICAgICBpZiAoZWxlKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYoZWxlPT09J2Rvd25sb2FkJyl7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYucHJpbnRTaW5nbGVCeUZpbHRlcihiZUZpbHRlcm9wdGlvbnMsIG9wdGlvbnMsc3UsICdDbG91ZFByaW50JylcclxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYuZG93bmxvYWRGaWxlKGRhdGEpO1xyXG4gICAgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHNlbGYub3BlblJlbmRlZFZpZXdlcihlbGUsbnVsbCxvcHRpb25zLFtiZUZpbHRlcm9wdGlvbnNdLHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYucHJpbnRTaW5nbGVCeUZpbHRlcihiZUZpbHRlcm9wdGlvbnMsIG9wdGlvbnMsIHN1LCdDbG91ZFByaW50Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkmuagvOW8j+aVsOaNrmlk5omT5Y2wXHJcbiAgICogc3XvvJrlj4zmoIjmqKHlvI/kuItuZ2lueOi3r+eUseeahHN1XHJcbiAgICogXHJcbiAgICogVE9ETzog55uu5YmN5LiN5bim5qC85byP6YCJ5oup5ZmoLOmcgOimgeWklueVjOe7hOe7h+WlveagvOW8j+WSjOaVsOaNrueahOWvueW6lOWFs+ezu1xyXG4gICAqL1xyXG4gIHByaW50TXVsdGlCeUlkKGJlT3B0aW9uc0xpc3Q6IEFycmF5PFNvdXJjZU9wdGlvbnM+LCBvcHRpb25zOiBPdXRwdXRPcHRpb25zLGVsZTogYW55LCBzdT1udWxsLCBwYXJhbT1udWxsKTogYW55e1xyXG4gICAgZm9yKGxldCBpPTA7IGk8IGJlT3B0aW9uc0xpc3QubGVuZ3RoO2krKyl7XHJcbiAgICAgIERhdGFWYWxpZGF0b3IuY2hlY2tGb3JOdWxsUmVmZXJlbmNlKGJlT3B0aW9uc0xpc3RbaV0ucXVlcnlUeXBlLCdxdWVyeVR5cGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXRhVmFsaWRhdG9yLmNoZWNrRm9yTnVsbFJlZmVyZW5jZShvcHRpb25zLnByaW50VHlwZSwncHJpbnRUeXBlJyk7XHJcblxyXG4gICAgaWYoRGF0YVZhbGlkYXRvci5jaGVja0FwcFVybCh0aGlzLnByaW50RW50aXR5LmFwcFVybCk9PWZhbHNlKXtcclxuICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmluZm8odGhpcy5sb2NhbHBpcGUudHJhbnNmb3JtKCdhcHB1cmxlcnJvcicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGVsZSl7XHJcbiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICBpZihlbGU9PT0nZG93bmxvYWQnKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRTcnYucHJpbnRNdWx0aUJ5SWQoYmVPcHRpb25zTGlzdCxvcHRpb25zLHN1LCdDbG91ZFByaW50JylcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5kb3dubG9hZEZpbGUoZGF0YSk7XHJcbiAgICAgICAgfSk7IFxyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBzZWxmLm9wZW5SZW5kZWRWaWV3ZXIoZWxlLCBudWxsLCBvcHRpb25zLGJlT3B0aW9uc0xpc3QsZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3J2LnByaW50TXVsdGlCeUlkKGJlT3B0aW9uc0xpc3Qsb3B0aW9ucyxzdSwnQ2xvdWRQcmludCcpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkmuagvOW8j+i/h+a7pOWZqOaJk+WNsFxyXG4gICAqIHN177ya5Y+M5qCI5qih5byP5LiLbmdpbnjot6/nlLHnmoRzdVxyXG4gICAqIFxyXG4gICAqIFRPRE86IOebruWJjeS4jeW4puagvOW8j+mAieaLqeWZqCzpnIDopoHlpJbnlYznu4Tnu4flpb3moLzlvI/lkozmlbDmja7nmoTlr7nlupTlhbPns7tcclxuICAgKi9cclxuICBwcmludE11bHRpQnlGaWx0ZXIoYmVPcHRpb25zTGlzdDogQXJyYXk8U291cmNlRmlsdGVyT3B0aW9ucz4sIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIGVsZTogYW55LHN1PW51bGwsIHBhcmFtPW51bGwpOiBhbnl7XHJcbiAgICBmb3IobGV0IGk9MDsgaTwgYmVPcHRpb25zTGlzdC5sZW5ndGg7aSsrKXtcclxuICAgICAgRGF0YVZhbGlkYXRvci5jaGVja0Zvck51bGxSZWZlcmVuY2UoYmVPcHRpb25zTGlzdFtpXS5xdWVyeVR5cGUsJ3F1ZXJ5VHlwZScpO1xyXG4gICAgfVxyXG5cclxuICAgIERhdGFWYWxpZGF0b3IuY2hlY2tGb3JOdWxsUmVmZXJlbmNlKG9wdGlvbnMucHJpbnRUeXBlLCdwcmludFR5cGUnKTtcclxuICAgIGlmKERhdGFWYWxpZGF0b3IuY2hlY2tBcHBVcmwodGhpcy5wcmludEVudGl0eS5hcHBVcmwpID09IGZhbHNlKXtcclxuICAgICAgdGhpcy5ub3RpZnlTZXJ2aWNlLmluZm8odGhpcy5sb2NhbHBpcGUudHJhbnNmb3JtKCdhcHB1cmxlcnJvcicpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYoZWxlKXtcclxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgIGlmKGVsZT09PSdkb3dubG9hZCcpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5wcmludE11bHRpQnlGaWx0ZXIoYmVPcHRpb25zTGlzdCxvcHRpb25zLHN1LCdDbG91ZFByaW50JylcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5kb3dubG9hZEZpbGUoZGF0YSk7XHJcbiAgICAgICAgfSk7ICBcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgc2VsZi5vcGVuUmVuZGVkVmlld2VyKGVsZSwgbnVsbCwgb3B0aW9ucyxiZU9wdGlvbnNMaXN0LHRydWUpO1xyXG4gICAgICB9XHJcbiAgIFxyXG4gICAgfWVsc2V7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFNydi5wcmludE11bHRpQnlGaWx0ZXIoYmVPcHRpb25zTGlzdCxvcHRpb25zLHN1LCdDbG91ZFByaW50Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDljZXmoLzlvI/mlbDmja5pZOaJk+WNsFxyXG4gICAqIHN177ya5Y+M5qCI5qih5byP5LiLbmdpbnjot6/nlLHnmoRzdVxyXG4gICAqIFxyXG4gICAqIDEu5bim57u05bqm6L+H5ruk5qC85byP6YCJ5oup5ZmoXHJcbiAgICovXHJcbiAgcHJpbnRTaW5nbGVCeUlkNEpvYihiZW9wdGlvbnM6IFNvdXJjZU9wdGlvbnMsIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsc3U9bnVsbCxwYXJhbT1udWxsKTogYW55IHtcclxuICAgIGlmKERhdGFWYWxpZGF0b3IuY2hlY2tBcHBVcmwodGhpcy5wcmludEVudGl0eS5hcHBVcmwpPT1mYWxzZSl7XHJcbiAgICAgIHRoaXMubm90aWZ5U2VydmljZS5pbmZvKHRoaXMubG9jYWxwaXBlLnRyYW5zZm9ybSgnYXBwdXJsZXJyb3InKSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmKGJlb3B0aW9ucy5xdWVyeVR5cGU9PXVuZGVmaW5lZCl7Ly/lhbzlrrnku6XliY3nmoTpgLvovpFcclxuICAgICAgYmVvcHRpb25zLnF1ZXJ5VHlwZSA9IFF1ZXJ5VHlwZS5Vbmtub3duO1xyXG4gICAgfVxyXG4gICAgaWYob3B0aW9ucy5wcmludFR5cGU9PXVuZGVmaW5lZCl7Ly/lhbzlrrnku6XliY3nmoTpgLvovpHov5nph4zpu5jorqTkuLrooajljZXmiZPljbBcclxuICAgICAgb3B0aW9ucy5wcmludFR5cGUgPSBQcmludFR5cGUuRm9ybTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5vcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uNEpvYihbYmVvcHRpb25zXSwgb3B0aW9ucywgZmFsc2UsZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Y2V5qC85byP6L+H5ruk5Zmo5omT5Y2wXHJcbiAgICogc3XvvJrlj4zmoIjmqKHlvI/kuItuZ2lueOi3r+eUseeahHN1XHJcbiAgICogXHJcbiAgICogMS7luKbnu7Tluqbov4fmu6TmoLzlvI/pgInmi6nlmahcclxuICAgKi9cclxuICBwcmludFNpbmdsZUJ5RmlsdGVyNEpvYihiZUZpbHRlcm9wdGlvbnM6IFNvdXJjZUZpbHRlck9wdGlvbnMsIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIHN1PW51bGwscGFyYW09bnVsbCk6IGFueSB7XHJcbiAgICBpZihEYXRhVmFsaWRhdG9yLmNoZWNrQXBwVXJsKHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsKT09ZmFsc2Upe1xyXG4gICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuaW5mbyh0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ2FwcHVybGVycm9yJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZihiZUZpbHRlcm9wdGlvbnMucXVlcnlUeXBlPT11bmRlZmluZWQpey8v5YW85a655Lul5YmN55qE6YC76L6RXHJcbiAgICAgIGJlRmlsdGVyb3B0aW9ucy5xdWVyeVR5cGUgPSBRdWVyeVR5cGUuVW5rbm93bjtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMucHJpbnRUeXBlPT11bmRlZmluZWQpey8v5YW85a655Lul5YmN55qE6YC76L6R6L+Z6YeM6buY6K6k5Li66KGo5Y2V5omT5Y2wXHJcbiAgICAgIG9wdGlvbnMucHJpbnRUeXBlID0gUHJpbnRUeXBlLkZvcm07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5vcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uNEpvYihbYmVGaWx0ZXJvcHRpb25zXSwgb3B0aW9ucywgdHJ1ZSxmYWxzZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpJrmoLzlvI/mlbDmja5pZOaJk+WNsFxyXG4gICAqIHN177ya5Y+M5qCI5qih5byP5LiLbmdpbnjot6/nlLHnmoRzdVxyXG4gICAqIFxyXG4gICAqIFRPRE86IOebruWJjeS4jeW4puagvOW8j+mAieaLqeWZqFxyXG4gICAqL1xyXG4gIHByaW50TXVsdGlCeUlkNEpvYihiZU9wdGlvbnNMaXN0OiBBcnJheTxTb3VyY2VPcHRpb25zPiwgb3B0aW9uczogT3V0cHV0T3B0aW9ucywgc3U9bnVsbCwgcGFyYW09bnVsbCk6IGFueXtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxyXG4gICAgZm9yKGNvbnN0IGIgaW4gYmVPcHRpb25zTGlzdCl7XHJcbiAgICAgIERhdGFWYWxpZGF0b3IuY2hlY2tGb3JOdWxsUmVmZXJlbmNlKGJlT3B0aW9uc0xpc3RbMF0ucXVlcnlUeXBlLCdxdWVyeVR5cGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXRhVmFsaWRhdG9yLmNoZWNrRm9yTnVsbFJlZmVyZW5jZShvcHRpb25zLnByaW50VHlwZSwncHJpbnRUeXBlJyk7XHJcbiAgICBpZihEYXRhVmFsaWRhdG9yLmNoZWNrQXBwVXJsKHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsKT09ZmFsc2Upe1xyXG4gICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuaW5mbyh0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ2FwcHVybGVycm9yJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5vcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uNEpvYihiZU9wdGlvbnNMaXN0LCBvcHRpb25zLCBmYWxzZSx0cnVlKTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpJrmoLzlvI/ov4fmu6TlmajmiZPljbBcclxuICAgKiBzde+8muWPjOagiOaooeW8j+S4i25naW546Lev55Sx55qEc3VcclxuICAgKiBcclxuICAgKiBUT0RPOiDnm67liY3kuI3luKbmoLzlvI/pgInmi6nlmahcclxuICAgKi9cclxuICBwcmludE11bHRpQnlGaWx0ZXI0Sm9iKGJlRmlsdGVyb3B0aW9uczogQXJyYXk8U291cmNlRmlsdGVyT3B0aW9ucz4sIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIHN1PW51bGwsIHBhcmFtPW51bGwpOiBhbnl7XHJcblxyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXHJcbiAgICBmb3IoY29uc3QgYiBpbiBiZUZpbHRlcm9wdGlvbnMpe1xyXG4gICAgICBEYXRhVmFsaWRhdG9yLmNoZWNrRm9yTnVsbFJlZmVyZW5jZShiZUZpbHRlcm9wdGlvbnNbMF0ucXVlcnlUeXBlLCdxdWVyeVR5cGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBEYXRhVmFsaWRhdG9yLmNoZWNrRm9yTnVsbFJlZmVyZW5jZShvcHRpb25zLnByaW50VHlwZSwncHJpbnRUeXBlJyk7XHJcbiAgICBpZihEYXRhVmFsaWRhdG9yLmNoZWNrQXBwVXJsKHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsKT09ZmFsc2Upe1xyXG4gICAgICB0aGlzLm5vdGlmeVNlcnZpY2UuaW5mbyh0aGlzLmxvY2FscGlwZS50cmFuc2Zvcm0oJ2FwcHVybGVycm9yJykpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5vcGVuRm9ybWF0TGlzdEJ5RGltZW5zaW9uNEpvYihiZUZpbHRlcm9wdGlvbnMsIG9wdGlvbnMsIHRydWUsdHJ1ZSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIOWIm+W7umJsb2Llr7nosaHvvIzlubbliKnnlKjmtY/op4jlmajmiZPlvIB1cmzov5vooYzkuIvovb1cclxuICAgKiBAcGFyYW0gZGF0YSDmlofku7bmtYHmlbDmja5cclxuICAgKi9cclxuICBkb3dubG9hZEZpbGUoZGF0YSkge1xyXG4gIFxyXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmO2NoYXJzZXQ9VVRGLTgnfSk7XHJcbiAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcclxuICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIHRoaXMucHJpbnRFbnRpdHkuZG93bkxvYWRGaWxlTmFtZSsnLnBkZicpO1xyXG4gICAgbGluay5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgbGluay5jbGljaygpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbiAgXHJcbiAgLyoqXHJcbiAgICog5omT5Y2w77yI6L+H5pyf5LqG77yM5pS55Li6cHJpbnRTaW5nbGVCeUlk77yJXHJcbiAgICogQHBhcmFtIGJlb3B0aW9ucyDmlbDmja7mupDpgInpoblcclxuICAgKiBAcGFyYW0gb3B0aW9ucyDlr7zlh7rpgInpoblcclxuICAgKiBAcGFyYW0gZWxlIOmihOiniOaXtuimgea4suafk+eahOS4u+S9k1xyXG4gICAqIGVsZeS4uuepuuaXtu+8mui/lOWbnua4suafk+a1ge+8jFxyXG4gICAqIGVsZeS4unRhYuWtl+espuS4suaXtu+8muaWsOeahHRhYumhteaJk+W8gOmihOiniOWZqO+8jFxyXG4gICAqIGVsZeS4umRvd25sb2Fk5a2X56ym5Liy5pe277ya5LiL6L2977yMXHJcbiAgICogZWxl5Li6ZWxlbWVudOWFg+e0oOaXtu+8jOW9k+WJjemhteeahGVsZW1lbnTkuIrmuLLmn5PpooTop4jlmahcclxuICAgKiBcclxuICAgKiDms6jmhI9iZW9wdGlvbnPph4znmoRSZXRyaWV2ZVBhcmFt5YaF55qE5bGe5oCn5YC86YO96ZyA6KaB5bCP5YaZ5a2X5q+N5byA5aS0XHJcbiAgICovXHJcbiAgb3V0cHV0QkVEYXRhKGJlb3B0aW9uczogYW55LCBvcHRpb25zOiBPdXRwdXRPcHRpb25zLCBlbGU6IGFueSk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcmludFNpbmdsZUJ5SWQoYmVvcHRpb25zLG9wdGlvbnMsZWxlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaJk+WNsO+8iOi/h+acn+S6hu+8jOaUueS4unByaW50U2luZ2xlQnlGaWx0ZXLvvIlcclxuICAgKiBAcGFyYW0gYmVvcHRpb25zIEJFRmlsdGVy6YCJ6aG5XHJcbiAgICogQHBhcmFtIG9wdGlvbnMg5a+85Ye66YCJ6aG5XHJcbiAgICogQHBhcmFtIGVsZSDpooTop4jml7bopoHmuLLmn5PnmoTkuLvkvZNcclxuICAgKiBlbGXkuLrnqbrml7bvvJrov5Tlm57muLLmn5PmtYHvvIxcclxuICAgKiBlbGXkuLp0YWLlrZfnrKbkuLLml7bvvJrmlrDnmoR0YWLpobXmiZPlvIDpooTop4jlmajvvIxcclxuICAgKiBlbGXkuLpkb3dubG9hZOWtl+espuS4suaXtu+8muS4i+i9vVxyXG4gICAqIGVsZeS4umVsZW1lbnTlhYPntKDml7bvvIzlvZPliY3pobXnmoRlbGVtZW505LiK5riy5p+T6aKE6KeI5ZmoXHJcbiAgICogXHJcbiAgICog5rOo5oSPYmVvcHRpb25z6YeM55qEUmV0cmlldmVQYXJhbeWGheeahOWxnuaAp+WAvOmDvemcgOimgeWwj+WGmeWtl+avjeW8gOWktFxyXG4gICAqL1xyXG4gIG91dHB1dEJFRGF0YVdpdGhGaWx0ZXIoYmVGaWx0ZXJvcHRpb25zOiBhbnksIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIGVsZTogYW55KTogYW55IHtcclxuICAgIHJldHVybiB0aGlzLnByaW50U2luZ2xlQnlGaWx0ZXIoYmVGaWx0ZXJvcHRpb25zLCBvcHRpb25zLGVsZSk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=