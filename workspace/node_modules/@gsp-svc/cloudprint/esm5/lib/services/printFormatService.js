/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { PrintFormat } from '../entitys/printFormat';
import { Urls } from '../utils/cloudprint.Urls';
import { PrintEntity } from '../entitys/printEntity';
import { HttpClient } from '@angular/common/http';
import { Subject } from 'rxjs';
import { Config } from '../entitys/config';
import { DataValidator } from '../utils/cloudprint.datavalidator';
var PrintFormatService = /** @class */ (function () {
    function PrintFormatService(httpClient) {
        this.httpClient = httpClient;
        this.printEntity = new PrintEntity();
        this.curSu = Config.PRINT_SU;
    }
    /**
     * @param {?} beId
     * @return {?}
     */
    PrintFormatService.prototype.createPrintFormatWithBE = /**
     * @param {?} beId
     * @return {?}
     */
    function (beId) {
        /** @type {?} */
        var url = this.printEntity.appUrl + Urls.CreatePrintFormatWithBE + 'beId=' + beId + '&su=' + this.curSu;
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    };
    /**
     * @param {?} voId
     * @return {?}
     */
    PrintFormatService.prototype.createPrintFormatWithVO = /**
     * @param {?} voId
     * @return {?}
     */
    function (voId) {
        /** @type {?} */
        var url = this.printEntity.appUrl + Urls.CreatePrintFormatWithVO + 'voId=' + voId + '&su=' + this.curSu;
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    };
    /**
     * @param {?} biznessObjectClassInfo
     * @return {?}
     */
    PrintFormatService.prototype.createPrintFormatWithBO = /**
     * @param {?} biznessObjectClassInfo
     * @return {?}
     */
    function (biznessObjectClassInfo) {
        /** @type {?} */
        var url = this.printEntity.appUrl + Urls.CreatePrintFormatWithBO + 'biznessObjectClassInfo=' + biznessObjectClassInfo + '&su=' + this.curSu;
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise();
    };
    /**
     * @param {?} boId
     * @return {?}
     */
    PrintFormatService.prototype.getDataSourceByBOId = /**
     * @param {?} boId
     * @return {?}
     */
    function (boId) {
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        /** @type {?} */
        var url = this.printEntity.appUrl + Urls.GetDataSourceByBOId;
        return this.httpClient.get(url + 'boId=' + boId + '&su=' + this.curSu).toPromise();
    };
    /**
     * @param {?} dataSourceId
     * @return {?}
     */
    PrintFormatService.prototype.getFormatBySourceId = /**
     * @param {?} dataSourceId
     * @return {?}
     */
    function (dataSourceId) {
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.GetPrintFormatByDataSrouceId + 'dataSrouceId=' + dataSourceId + '&su=' + this.curSu, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    PrintFormatService.prototype.getPrintFormatByDataSrouceAndDimension = /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    function (billCategoryId, sourceId, firstDimension, secondDimension) {
        firstDimension = firstDimension || '';
        secondDimension = secondDimension || '';
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.GetPrintFormatByDataSrouceAndDimension + 'billCategoryId=' + billCategoryId + '&sourceId=' + sourceId + '&firstDimension=' + firstDimension + '&secondDimension=' + secondDimension + '&su=' + this.curSu, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    PrintFormatService.prototype.getPrintFormatAndDevice = /**
     * @param {?} billCategoryId
     * @param {?} sourceId
     * @param {?} firstDimension
     * @param {?} secondDimension
     * @return {?}
     */
    function (billCategoryId, sourceId, firstDimension, secondDimension) {
        firstDimension = firstDimension || '';
        secondDimension = secondDimension || '';
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        /** @type {?} */
        var data = {
            billCategoryId: billCategoryId,
            sourceId: sourceId,
            firstDimension: firstDimension,
            secondDimension: secondDimension
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.GetPrintFormatAndDevice + 'su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @return {?}
     */
    PrintFormatService.prototype.getPrintDevice = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(Urls.CloudPrintDeviceUrl + Urls.GetPrintDevice + 'su=' + this.curSu, null, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @param {?} formatId
     * @return {?}
     */
    PrintFormatService.prototype.getFormatByFormatId = /**
     * @param {?} formatId
     * @return {?}
     */
    function (formatId) {
        /** @type {?} */
        var url = this.printEntity.appUrl + Urls.LoadPrintFormatById + 'metadataId=' + formatId + '&su=' + this.curSu;
        // LoadPrintFormatById是个Get请求
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise()
            .then((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return data;
        }));
    };
    /**
     * 根据已有的格式id和数据源id，实时获取数据源结构后组成新的格式
     */
    /**
     * 根据已有的格式id和数据源id，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @return {?}
     */
    PrintFormatService.prototype.getNewSourceFormatByFormatId = /**
     * 根据已有的格式id和数据源id，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @return {?}
     */
    function (formatId) {
        /** @type {?} */
        var url = Urls.CloudPrintBaseUrl + Urls.LoadNewSourcePrintFormatById;
        return this.httpClient.get(url + 'formatId=' + formatId).toPromise();
    };
    /**
     * 根据已有的格式id和数据源id,语言，实时获取数据源结构后组成新的格式
     */
    /**
     * 根据已有的格式id和数据源id,语言，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @param {?} lang
     * @return {?}
     */
    PrintFormatService.prototype.getNewSourceFormatByFormatIdAndLang = /**
     * 根据已有的格式id和数据源id,语言，实时获取数据源结构后组成新的格式
     * @param {?} formatId
     * @param {?} lang
     * @return {?}
     */
    function (formatId, lang) {
        /** @type {?} */
        var url = Urls.CloudPrintBaseUrl + Urls.LoadNewSourcePrintFormatByIdAndLang;
        return this.httpClient.get(url + 'formatId=' + formatId + '&lang=' + lang).toPromise();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PrintFormatService.prototype.save = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SavePrintFormat + '?su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PrintFormatService.prototype.saveWithRes = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SavePrintFormatWithRes + '?su=' + this.curSu, data, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @param {?} data
     * @return {?}
     */
    PrintFormatService.prototype.remove = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        // const body = { 'printFormatId':data};
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.DeletePrintFormat + '/' + data + '?su=' + this.curSu, null, httpoptions)
            .toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * 加载格式
     * @param reportID id
     */
    /**
     * 加载格式
     * @param {?} reportID id
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.loadFormat = /**
     * 加载格式
     * @param {?} reportID id
     * @param {?} flag
     * @return {?}
     */
    function (reportID, flag) {
        var _this = this;
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /**
         * 对于GS内部集成，再外层其实已经给this.printEntity.format赋值了
         */
        if (this.printEntity.format) {
            /** @type {?} */
            var sub = new Subject();
            sub.complete(); // 没有这句话toPromise()里的内容不跑
            return sub.toPromise()
                .then((/**
             * @return {?}
             */
            function () {
                _this.printEntity.printFormat = _this.printEntity.printFormat || new PrintFormat();
                _this.printEntity.printFormat.content = _this.printEntity.format;
                return _this.printEntity.format;
            }));
        }
        /**
         * 这块主要还是针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现CreatePrintFormatWithBE,CreatePrintFormatWithSchema和GetPrintFormatById这俩个get请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var url;
        /** @type {?} */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (reportID && reportID.length > 0) { // 加载已有的格式
            url = this.printEntity.appUrl + Urls.LoadPrintFormatById + 'metadataId=' + reportID + '&su=' + this.curSu;
            // LoadPrintFormatById是个Get请求
            return this.httpClient.get(url, httpoptions).toPromise()
                .then((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                // 加载了格式后把格式记住
                _this.printEntity.printFormat = data;
                _this.printEntity.format = data.content;
                return data.content;
            }));
        }
        else {
            console.log(this.printEntity.format);
            console.log(reportID);
            console.error('格式id为空，无法获取格式信息');
        }
    };
    /**
     * 加载数据
     * @param dataIds 要加载的数据Id
     */
    /**
     * 加载数据
     * @param {?} dataIds 要加载的数据Id
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.loadData = /**
     * 加载数据
     * @param {?} dataIds 要加载的数据Id
     * @param {?} flag
     * @return {?}
     */
    function (dataIds, flag) {
        var _this = this;
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /**
         * 对于GS内部集成，再外层其实已经给this.printEntity.data赋值了
         */
        if (this.printEntity.data) {
            /** @type {?} */
            var sub = new Subject();
            sub.complete(); // 没有这句话toPromise()里的内容不跑
            return sub.toPromise()
                .then((/**
             * @return {?}
             */
            function () {
                return _this.printEntity.data;
            }));
        }
        /**
         * 这块主要还是针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现GetPrintData这个get请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(this.printEntity.appUrl + Urls.LoadPrintData + 'dataIds=' + dataIds + '&su=' + this.curSu, httpoptions).toPromise()
            .then((/**
         * @param {?} data2
         * @return {?}
         */
        function (data2) {
            return data2;
        }));
    };
    /**
     * 单格式数据id渲染打印
     * GS内部/第三方
     * @param beOptions 数据源选项
     * @param options 导出选项
     * @param su:双栈模式下，该su只是用来给nginx来配置路由
     */
    /**
     * 单格式数据id渲染打印
     * GS内部/第三方
     * @param {?} beOptions 数据源选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.printSingleById = /**
     * 单格式数据id渲染打印
     * GS内部/第三方
     * @param {?} beOptions 数据源选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    function (beOptions, options, su, flag) {
        var _this = this;
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        var body = {
            BEOptions: beOptions,
            Options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (!beOptions.ServiceUnit) {
            return this.getSuByFormatId(beOptions.FormatId)
                .then((/**
             * @param {?} sucode
             * @return {?}
             */
            function (sucode) {
                beOptions.ServiceUnit = sucode;
                su = su || beOptions.ServiceUnit;
                return _this.httpClient.post(_this.printEntity.appUrl + Urls.PrintSingleById + 'su=' + su, body, httpoptions).toPromise()
                    .then((/**
                 * @param {?} ret
                 * @return {?}
                 */
                function (ret) {
                    return ret;
                }));
            }));
        }
        else {
            su = su || beOptions.ServiceUnit;
            return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleById + 'su=' + su, body, httpoptions).toPromise()
                .then((/**
             * @param {?} ret
             * @return {?}
             */
            function (ret) {
                return ret;
            }));
        }
    };
    /**
     * 单格式过滤条件渲染打印
     * GS内部/第三方
     * @param beOptions BEFilter选项
     * @param options 导出选项
     * @param su:双栈模式下，该su只是用来给nginx来配置路由
     */
    /**
     * 单格式过滤条件渲染打印
     * GS内部/第三方
     * @param {?} beOptions BEFilter选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.printSingleByFilter = /**
     * 单格式过滤条件渲染打印
     * GS内部/第三方
     * @param {?} beOptions BEFilter选项
     * @param {?} options 导出选项
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    function (beOptions, options, su, flag) {
        var _this = this;
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        var body = {
            BEOptions: beOptions,
            Options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        if (!beOptions.ServiceUnit) {
            return this.getSuByFormatId(beOptions.FormatId)
                .then((/**
             * @param {?} sucode
             * @return {?}
             */
            function (sucode) {
                beOptions.ServiceUnit = sucode;
                su = su || beOptions.ServiceUnit;
                return _this.httpClient.post(_this.printEntity.appUrl + Urls.PrintSingleByFilter + 'su=' + su, body, httpoptions).toPromise()
                    .then((/**
                 * @param {?} ret
                 * @return {?}
                 */
                function (ret) {
                    return ret;
                }));
            }));
        }
        else {
            su = su || beOptions.ServiceUnit;
            return this.httpClient.post(this.printEntity.appUrl + Urls.PrintSingleByFilter + 'su=' + su, body, httpoptions).toPromise()
                .then((/**
             * @param {?} ret
             * @return {?}
             */
            function (ret) {
                return ret;
            }));
        }
    };
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     */
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.printMultiById = /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    function (beOptionsList, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        var body = {
            sourceOptionsList: beOptionsList,
            options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintMultiById + 'su=' + su, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     */
    /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.printMultiByFilter = /**
     * su:双栈模式下，该su只是用来给nginx来配置路由
     * @param {?} beOptionsList
     * @param {?} options
     * @param {?} su
     * @param {?} flag
     * @return {?}
     */
    function (beOptionsList, options, su, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        var body = {
            sourceFilterOptionsList: beOptionsList,
            options: options
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintMultiByFilter + 'su=' + su, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * 渲染测试数据
     */
    /**
     * 渲染测试数据
     * @param {?} formats
     * @param {?} datas
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.printTestData = /**
     * 渲染测试数据
     * @param {?} formats
     * @param {?} datas
     * @param {?} flag
     * @return {?}
     */
    function (formats, datas, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        /** @type {?} */
        var body = {
            format: formats,
            data: JSON.stringify(datas),
        };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['responseType'] = 'blob';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.PrintTestData + 'su=' + this.curSu, body, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * 触发打印事件
     */
    /**
     * 触发打印事件
     * @param {?} data
     * @param {?} flag
     * @return {?}
     */
    PrintFormatService.prototype.sendPrintEvent = /**
     * 触发打印事件
     * @param {?} data
     * @param {?} flag
     * @return {?}
     */
    function (data, flag) {
        if (DataValidator.checkFlag(flag) === false) {
            alert('内部方法，外部请使用cloudprint.service下的服务');
            return null;
        }
        // const body = {
        //     formatid:formatid,
        //     su:su,
        // };
        /**
         * 这块如果针对的第三方，第三方通过转调的方式
         * 1.第三方服务端实现Print这个post请求接口
         * 2.第三方服务端这俩请求接口调用云打印的服务
         * @type {?}
         */
        var httpoptions = {};
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.post(this.printEntity.appUrl + Urls.SendPrintEvent + 'su=' + this.curSu, data, httpoptions).toPromise()
            .then((/**
         * @param {?} ret
         * @return {?}
         */
        function (ret) {
            return ret;
        }));
    };
    /**
     * @return {?}
     */
    PrintFormatService.prototype.isRemotePrint = /**
     * @return {?}
     */
    function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var url, httpoptions;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = this.printEntity.appUrl + Urls.IsRemotePrint + 'su=' + this.curSu;
                        // LoadPrintFormatById是个Get请求
                        httpoptions = {};
                        httpoptions['headers'] = {
                            SessionId: this.printEntity.sessionId || '',
                            'Content-Type': 'application/json'
                        };
                        return [4 /*yield*/, this.httpClient.get(url, httpoptions).toPromise()
                                .then((/**
                             * @param {?} data
                             * @return {?}
                             */
                            function (data) {
                                return data;
                            }))];
                    case 1: 
                    // var httpops = Object.assign({},httpoptions);
                    // httpops['responseType']="text/html";
                    return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    /**
     * @return {?}
     */
    PrintFormatService.prototype.getEnableFonts = /**
     * @return {?}
     */
    function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var url, httpoptions;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = this.printEntity.appUrl + Urls.GetEnableFonts + 'su=' + this.curSu;
                        // LoadPrintFormatById是个Get请求
                        httpoptions = {};
                        httpoptions['headers'] = {
                            SessionId: this.printEntity.sessionId || '',
                            'Content-Type': 'application/json'
                        };
                        return [4 /*yield*/, this.httpClient.get(url, httpoptions).toPromise()
                                .then((/**
                             * @param {?} data
                             * @return {?}
                             */
                            function (data) {
                                return data;
                            }))];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    /**
     * 通过打印格式，获取bo，在获取su（这是一个临时方案）
     * @param id
     */
    /**
     * 通过打印格式，获取bo，在获取su（这是一个临时方案）
     * @private
     * @param {?} formatId
     * @return {?}
     */
    PrintFormatService.prototype.getSuByFormatId = /**
     * 通过打印格式，获取bo，在获取su（这是一个临时方案）
     * @private
     * @param {?} formatId
     * @return {?}
     */
    function (formatId) {
        /** @type {?} */
        var url = this.printEntity.appUrl + '/getSuByFormatId?formatId=' + formatId + '&su=cloudprint';
        /** @type {?} */
        var httpoptions = {};
        httpoptions['responseType'] = 'text/html';
        httpoptions['headers'] = {
            SessionId: this.printEntity.sessionId || '',
            'Content-Type': 'application/json'
        };
        return this.httpClient.get(url, httpoptions).toPromise()
            .then((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            return data;
        }));
    };
    PrintFormatService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    PrintFormatService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    return PrintFormatService;
}());
export { PrintFormatService };
if (false) {
    /** @type {?} */
    PrintFormatService.prototype.printEntity;
    /**
     * @type {?}
     * @private
     */
    PrintFormatService.prototype.curSu;
    /**
     * @type {?}
     * @private
     */
    PrintFormatService.prototype.httpClient;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbnRGb3JtYXRTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1zdmMvY2xvdWRwcmludC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9wcmludEZvcm1hdFNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNyRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDaEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3JELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVsRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSy9CLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFHbEU7SUFPSSw0QkFBb0IsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUoxQyxnQkFBVyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFFeEIsVUFBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFHaEMsQ0FBQzs7Ozs7SUFFRCxvREFBdUI7Ozs7SUFBdkIsVUFBd0IsSUFBWTs7WUFDMUIsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyx1QkFBdUIsR0FBQyxPQUFPLEdBQUUsSUFBSSxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSzs7WUFDaEcsV0FBVyxHQUFHLEVBQUU7UUFDdEIsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHO1lBQ3JCLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsSUFBSSxFQUFFO1lBQzNDLGNBQWMs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Ozs7OztJQUNLLDRDQUFlOzs7Ozs7SUFBdkIsVUFBd0IsUUFBUTs7WUFDdEIsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFFLDRCQUE0QixHQUFHLFFBQVEsR0FBQyxnQkFBZ0I7O1lBQ3ZGLFdBQVcsR0FBRyxFQUFFO1FBQ3RCLFdBQVcsQ0FBQyxjQUFjLENBQUMsR0FBRyxXQUFXLENBQUM7UUFDMUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHO1lBQ3JCLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsSUFBSSxFQUFFO1lBQzNDLGNBQWMsRUFBQyxrQkFBa0I7U0FDcEMsQ0FBQztRQUNGLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsRUFBRTthQUN0RCxJQUFJOzs7O1FBQUMsVUFBQyxJQUFTO1lBQ2QsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7O2dCQXZpQkosVUFBVTs7OztnQkFYRixVQUFVOztJQW9qQm5CLHlCQUFDO0NBQUEsQUF6aUJELElBeWlCQztTQXhpQlksa0JBQWtCOzs7SUFFM0IseUNBQWdDOzs7OztJQUVoQyxtQ0FBZ0M7Ozs7O0lBRXBCLHdDQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IFByaW50Rm9ybWF0IH0gZnJvbSAnLi4vZW50aXR5cy9wcmludEZvcm1hdCc7XHJcbmltcG9ydCB7IFVybHMgfSBmcm9tICcuLi91dGlscy9jbG91ZHByaW50LlVybHMnO1xyXG5pbXBvcnQgeyBQcmludEVudGl0eSB9IGZyb20gJy4uL2VudGl0eXMvcHJpbnRFbnRpdHknO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4uL3V0aWxzL2Nsb3VkcHJpbnQudXRpbHMnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IFNvdXJjZU9wdGlvbnMgfSBmcm9tICcuLi9lbnRpdHlzL2RhdGFzb3VyY2VvcHRpb25zL3NvdXJjZU9wdGlvbnMnO1xyXG5pbXBvcnQgeyBPdXRwdXRPcHRpb25zIH0gZnJvbSAnLi4vZW50aXR5cy9vdXRwdXRvcHRpb25zL291dHB1dE9wdGlvbnMnO1xyXG5pbXBvcnQgeyBTb3VyY2VGaWx0ZXJPcHRpb25zIH0gZnJvbSAnLi4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9zb3VyY2VGaWx0ZXJPcHRpb25zJztcclxuaW1wb3J0IHsgQk9PcHRpb25zIH0gZnJvbSAnLi4vZW50aXR5cy9kYXRhc291cmNlb3B0aW9ucy9ib29wdGlvbnMnO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tICcuLi9lbnRpdHlzL2NvbmZpZyc7XHJcbmltcG9ydCB7IERhdGFWYWxpZGF0b3IgfSBmcm9tICcuLi91dGlscy9jbG91ZHByaW50LmRhdGF2YWxpZGF0b3InO1xyXG5pbXBvcnQgeyBCYXNlU291cmNlT3B0aW9ucyB9IGZyb20gJy4uL2VudGl0eXMvZGF0YXNvdXJjZW9wdGlvbnMvYmFzZXNvdXJjZW9wdGlvbnMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUHJpbnRGb3JtYXRTZXJ2aWNlIHtcclxuXHJcbiAgICBwcmludEVudGl0eSA9IG5ldyBQcmludEVudGl0eSgpO1xyXG5cclxuICAgIHByaXZhdGUgY3VyU3UgPSBDb25maWcuUFJJTlRfU1U7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cENsaWVudDogSHR0cENsaWVudCkge1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVByaW50Rm9ybWF0V2l0aEJFKGJlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkNyZWF0ZVByaW50Rm9ybWF0V2l0aEJFKydiZUlkPScrIGJlSWQgKyAnJnN1PScgKyB0aGlzLmN1clN1O1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwgLGh0dHBvcHRpb25zKS50b1Byb21pc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQcmludEZvcm1hdFdpdGhWTyh2b0lkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuQ3JlYXRlUHJpbnRGb3JtYXRXaXRoVk8rJ3ZvSWQ9JyArIHZvSWQgKyAnJnN1PScgKyB0aGlzLmN1clN1O1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgY3JlYXRlUHJpbnRGb3JtYXRXaXRoQk8oYml6bmVzc09iamVjdENsYXNzSW5mbzogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkNyZWF0ZVByaW50Rm9ybWF0V2l0aEJPKydiaXpuZXNzT2JqZWN0Q2xhc3NJbmZvPScgKyBiaXpuZXNzT2JqZWN0Q2xhc3NJbmZvICsgJyZzdT0nICsgdGhpcy5jdXJTdTtcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodXJsLGh0dHBvcHRpb25zKS50b1Byb21pc2UoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICBnZXREYXRhU291cmNlQnlCT0lkKGJvSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PntcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkdldERhdGFTb3VyY2VCeUJPSWQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodXJsICsgJ2JvSWQ9JyArICBib0lkICsgJyZzdT0nK3RoaXMuY3VyU3UpLnRvUHJvbWlzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvcm1hdEJ5U291cmNlSWQoZGF0YVNvdXJjZUlkOnN0cmluZykgOiBQcm9taXNlPGFueT57XHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5HZXRQcmludEZvcm1hdEJ5RGF0YVNyb3VjZUlkKydkYXRhU3JvdWNlSWQ9JyArIGRhdGFTb3VyY2VJZCsnJnN1PScrdGhpcy5jdXJTdSxodHRwb3B0aW9ucylcclxuICAgICAgICAudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigocmV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJpbnRGb3JtYXRCeURhdGFTcm91Y2VBbmREaW1lbnNpb24oYmlsbENhdGVnb3J5SWQsc291cmNlSWQsZmlyc3REaW1lbnNpb24sc2Vjb25kRGltZW5zaW9uKSA6IFByb21pc2U8YW55PntcclxuXHJcbiAgICAgICAgZmlyc3REaW1lbnNpb24gPSBmaXJzdERpbWVuc2lvbiB8fCAnJztcclxuICAgICAgICBzZWNvbmREaW1lbnNpb24gPSBzZWNvbmREaW1lbnNpb24gfHwgJydcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkdldFByaW50Rm9ybWF0QnlEYXRhU3JvdWNlQW5kRGltZW5zaW9uKydiaWxsQ2F0ZWdvcnlJZD0nK2JpbGxDYXRlZ29yeUlkKycmc291cmNlSWQ9Jytzb3VyY2VJZCsnJmZpcnN0RGltZW5zaW9uPScrZmlyc3REaW1lbnNpb24rJyZzZWNvbmREaW1lbnNpb249JytzZWNvbmREaW1lbnNpb24rJyZzdT0nK3RoaXMuY3VyU3UsaHR0cG9wdGlvbnMpXHJcbiAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByaW50Rm9ybWF0QW5kRGV2aWNlKGJpbGxDYXRlZ29yeUlkLHNvdXJjZUlkLGZpcnN0RGltZW5zaW9uLHNlY29uZERpbWVuc2lvbikgOiBQcm9taXNlPGFueT57XHJcblxyXG4gICAgICAgIGZpcnN0RGltZW5zaW9uID0gZmlyc3REaW1lbnNpb24gfHwgJyc7XHJcbiAgICAgICAgc2Vjb25kRGltZW5zaW9uID0gc2Vjb25kRGltZW5zaW9uIHx8ICcnXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGJpbGxDYXRlZ29yeUlkOmJpbGxDYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICBzb3VyY2VJZDpzb3VyY2VJZCxcclxuICAgICAgICAgICAgZmlyc3REaW1lbnNpb246Zmlyc3REaW1lbnNpb24sXHJcbiAgICAgICAgICAgIHNlY29uZERpbWVuc2lvbjpzZWNvbmREaW1lbnNpb25cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5HZXRQcmludEZvcm1hdEFuZERldmljZSsnc3U9Jyt0aGlzLmN1clN1LCBkYXRhLGh0dHBvcHRpb25zKVxyXG4gICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmludERldmljZSgpIDogUHJvbWlzZTxhbnk+e1xyXG5cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdChVcmxzLkNsb3VkUHJpbnREZXZpY2VVcmwgKyBVcmxzLkdldFByaW50RGV2aWNlKydzdT0nK3RoaXMuY3VyU3UsIG51bGwsaHR0cG9wdGlvbnMpXHJcbiAgICAgICAgLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKHJldCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvcm1hdEJ5Rm9ybWF0SWQoZm9ybWF0SWQ6c3RyaW5nKSA6IFByb21pc2U8YW55PntcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuTG9hZFByaW50Rm9ybWF0QnlJZCsnbWV0YWRhdGFJZD0nICsgZm9ybWF0SWQrJyZzdT0nK3RoaXMuY3VyU3U7XHJcbiAgICAgICAgLy8gTG9hZFByaW50Rm9ybWF0QnlJZOaYr+S4qkdldOivt+axglxyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lt7LmnInnmoTmoLzlvI9pZOWSjOaVsOaNrua6kGlk77yM5a6e5pe26I635Y+W5pWw5o2u5rqQ57uT5p6E5ZCO57uE5oiQ5paw55qE5qC85byPXHJcbiAgICAgKi9cclxuICAgIGdldE5ld1NvdXJjZUZvcm1hdEJ5Rm9ybWF0SWQoZm9ybWF0SWQ6c3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBVcmxzLkNsb3VkUHJpbnRCYXNlVXJsICsgVXJscy5Mb2FkTmV3U291cmNlUHJpbnRGb3JtYXRCeUlkO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwgKyAnZm9ybWF0SWQ9JyArICBmb3JtYXRJZCkudG9Qcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lt7LmnInnmoTmoLzlvI9pZOWSjOaVsOaNrua6kGlkLOivreiogO+8jOWunuaXtuiOt+WPluaVsOaNrua6kOe7k+aehOWQjue7hOaIkOaWsOeahOagvOW8j1xyXG4gICAgICovXHJcbiAgICBnZXROZXdTb3VyY2VGb3JtYXRCeUZvcm1hdElkQW5kTGFuZyhmb3JtYXRJZDpzdHJpbmcsbGFuZzpzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFVybHMuQ2xvdWRQcmludEJhc2VVcmwgKyBVcmxzLkxvYWROZXdTb3VyY2VQcmludEZvcm1hdEJ5SWRBbmRMYW5nO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwgKyAnZm9ybWF0SWQ9JyArICBmb3JtYXRJZCArJyZsYW5nPScrbGFuZykudG9Qcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZShkYXRhOiBQcmludEZvcm1hdCkgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlNhdmVQcmludEZvcm1hdCsnP3N1PScrdGhpcy5jdXJTdSwgZGF0YSxodHRwb3B0aW9ucylcclxuICAgICAgICAudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigocmV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVdpdGhSZXMoZGF0YTogUHJpbnRGb3JtYXQpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5TYXZlUHJpbnRGb3JtYXRXaXRoUmVzKyc/c3U9Jyt0aGlzLmN1clN1LCBkYXRhLGh0dHBvcHRpb25zKVxyXG4gICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoZGF0YTogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gY29uc3QgYm9keSA9IHsgJ3ByaW50Rm9ybWF0SWQnOmRhdGF9O1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkRlbGV0ZVByaW50Rm9ybWF0KycvJytkYXRhKyc/c3U9Jyt0aGlzLmN1clN1LCBudWxsLGh0dHBvcHRpb25zKVxyXG4gICAgICAgIC50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9veagvOW8j1xyXG4gICAgICogQHBhcmFtIHJlcG9ydElEIGlkXHJcbiAgICAgKi9cclxuICAgIGxvYWRGb3JtYXQocmVwb3J0SUQ6IHN0cmluZywgZmxhZzogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoRGF0YVZhbGlkYXRvci5jaGVja0ZsYWcoZmxhZykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCflhoXpg6jmlrnms5XvvIzlpJbpg6jor7fkvb/nlKhjbG91ZHByaW50LnNlcnZpY2XkuIvnmoTmnI3liqEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWvueS6jkdT5YaF6YOo6ZuG5oiQ77yM5YaN5aSW5bGC5YW25a6e5bey57uP57uZdGhpcy5wcmludEVudGl0eS5mb3JtYXTotYvlgLzkuoZcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAodGhpcy5wcmludEVudGl0eS5mb3JtYXQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ViID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgICAgICAgICBzdWIuY29tcGxldGUoKTsgLy8g5rKh5pyJ6L+Z5Y+l6K+ddG9Qcm9taXNlKCnph4znmoTlhoXlrrnkuI3ot5FcclxuICAgICAgICAgICAgcmV0dXJuIHN1Yi50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50RW50aXR5LnByaW50Rm9ybWF0ID0gdGhpcy5wcmludEVudGl0eS5wcmludEZvcm1hdCB8fCBuZXcgUHJpbnRGb3JtYXQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQuY29udGVudCA9IHRoaXMucHJpbnRFbnRpdHkuZm9ybWF0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpbnRFbnRpdHkuZm9ybWF0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+S4u+imgei/mOaYr+mSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wQ3JlYXRlUHJpbnRGb3JtYXRXaXRoQkUsQ3JlYXRlUHJpbnRGb3JtYXRXaXRoU2NoZW1h5ZKMR2V0UHJpbnRGb3JtYXRCeUlk6L+Z5L+p5LiqZ2V06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBsZXQgdXJsOiBzdHJpbmcgO1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAocmVwb3J0SUQgJiYgcmVwb3J0SUQubGVuZ3RoID4gMCkgey8vIOWKoOi9veW3suacieeahOagvOW8j1xyXG4gICAgICAgICAgICB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuTG9hZFByaW50Rm9ybWF0QnlJZCsnbWV0YWRhdGFJZD0nICsgcmVwb3J0SUQrJyZzdT0nK3RoaXMuY3VyU3U7XHJcbiAgICAgICAgICAgIC8vIExvYWRQcmludEZvcm1hdEJ5SWTmmK/kuKpHZXTor7fmsYJcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodXJsLGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDliqDovb3kuobmoLzlvI/lkI7miormoLzlvI/orrDkvY9cclxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRFbnRpdHkucHJpbnRGb3JtYXQgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludEVudGl0eS5mb3JtYXQgPSBkYXRhLmNvbnRlbnQ7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29udGVudDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wcmludEVudGl0eS5mb3JtYXQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXBvcnRJRCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+agvOW8j2lk5Li656m677yM5peg5rOV6I635Y+W5qC85byP5L+h5oGvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gZGF0YUlkcyDopoHliqDovb3nmoTmlbDmja5JZFxyXG4gICAgICovXHJcbiAgICBsb2FkRGF0YShkYXRhSWRzOiBzdHJpbmcsIGZsYWc6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlr7nkuo5HU+WGhemDqOmbhuaIkO+8jOWGjeWkluWxguWFtuWunuW3sue7j+e7mXRoaXMucHJpbnRFbnRpdHkuZGF0Yei1i+WAvOS6hlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmICh0aGlzLnByaW50RW50aXR5LmRhdGEpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ViID0gbmV3IFN1YmplY3Q8YW55PigpO1xyXG4gICAgICAgICAgICBzdWIuY29tcGxldGUoKTsgLy8g5rKh5pyJ6L+Z5Y+l6K+ddG9Qcm9taXNlKCnph4znmoTlhoXlrrnkuI3ot5FcclxuICAgICAgICAgICAgcmV0dXJuIHN1Yi50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmludEVudGl0eS5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+S4u+imgei/mOaYr+mSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wR2V0UHJpbnREYXRh6L+Z5LiqZ2V06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5nZXQodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLkxvYWRQcmludERhdGEgKyAnZGF0YUlkcz0nICsgZGF0YUlkcysnJnN1PScrdGhpcy5jdXJTdSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhMjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleagvOW8j+aVsOaNrmlk5riy5p+T5omT5Y2wXHJcbiAgICAgKiBHU+WGhemDqC/nrKzkuInmlrlcclxuICAgICAqIEBwYXJhbSBiZU9wdGlvbnMg5pWw5o2u5rqQ6YCJ6aG5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyDlr7zlh7rpgInpoblcclxuICAgICAqIEBwYXJhbSBzdTrlj4zmoIjmqKHlvI/kuIvvvIzor6VzdeWPquaYr+eUqOadpee7mW5naW545p2l6YWN572u6Lev55SxXHJcbiAgICAgKi9cclxuICAgIHByaW50U2luZ2xlQnlJZChiZU9wdGlvbnM6IFNvdXJjZU9wdGlvbnMsIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMgLHN1OnN0cmluZywgIGZsYWcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGlmIChEYXRhVmFsaWRhdG9yLmNoZWNrRmxhZyhmbGFnKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ+WGhemDqOaWueazle+8jOWklumDqOivt+S9v+eUqGNsb3VkcHJpbnQuc2VydmljZeS4i+eahOacjeWKoScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIEJFT3B0aW9uczogYmVPcHRpb25zLFxyXG4gICAgICAgICAgICBPcHRpb25zOiBvcHRpb25zXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDov5nlnZflpoLmnpzpkojlr7nnmoTnrKzkuInmlrnvvIznrKzkuInmlrnpgJrov4fovazosIPnmoTmlrnlvI9cclxuICAgICAgICAgKiAxLuesrOS4ieaWueacjeWKoeerr+WunueOsFByaW506L+Z5LiqcG9zdOivt+axguaOpeWPo1xyXG4gICAgICAgICAqIDIu56ys5LiJ5pa55pyN5Yqh56uv6L+Z5L+p6K+35rGC5o6l5Y+j6LCD55So5LqR5omT5Y2w55qE5pyN5YqhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1sncmVzcG9uc2VUeXBlJ10gPSAnYmxvYic7XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYoIWJlT3B0aW9ucy5TZXJ2aWNlVW5pdCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN1QnlGb3JtYXRJZChiZU9wdGlvbnMuRm9ybWF0SWQpXHJcbiAgICAgICAgICAgIC50aGVuKChzdWNvZGUpPT57XHJcbiAgICAgICAgICAgICAgICBiZU9wdGlvbnMuU2VydmljZVVuaXQgPSBzdWNvZGU7XHJcbiAgICAgICAgICAgICAgICBzdSA9IHN1IHx8IGJlT3B0aW9ucy5TZXJ2aWNlVW5pdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRTaW5nbGVCeUlkICsgJ3N1PScrc3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJldDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc3UgPSBzdSB8fCBiZU9wdGlvbnMuU2VydmljZVVuaXQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRTaW5nbGVCeUlkICsgJ3N1PScrc3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgICAgICAudGhlbigocmV0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleagvOW8j+i/h+a7pOadoeS7tua4suafk+aJk+WNsFxyXG4gICAgICogR1PlhoXpg6gv56ys5LiJ5pa5XHJcbiAgICAgKiBAcGFyYW0gYmVPcHRpb25zIEJFRmlsdGVy6YCJ6aG5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyDlr7zlh7rpgInpoblcclxuICAgICAqIEBwYXJhbSBzdTrlj4zmoIjmqKHlvI/kuIvvvIzor6VzdeWPquaYr+eUqOadpee7mW5naW545p2l6YWN572u6Lev55SxXHJcbiAgICAgKi9cclxuICAgIHByaW50U2luZ2xlQnlGaWx0ZXIoYmVPcHRpb25zOiBTb3VyY2VGaWx0ZXJPcHRpb25zLCBvcHRpb25zOiBPdXRwdXRPcHRpb25zLHN1OnN0cmluZywgZmxhZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgQkVPcHRpb25zOiBiZU9wdGlvbnMsXHJcbiAgICAgICAgICAgIE9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDov5nlnZflpoLmnpzpkojlr7nnmoTnrKzkuInmlrnvvIznrKzkuInmlrnpgJrov4fovazosIPnmoTmlrnlvI9cclxuICAgICAgICAgKiAxLuesrOS4ieaWueacjeWKoeerr+WunueOsFByaW506L+Z5LiqcG9zdOivt+axguaOpeWPo1xyXG4gICAgICAgICAqIDIu56ys5LiJ5pa55pyN5Yqh56uv6L+Z5L+p6K+35rGC5o6l5Y+j6LCD55So5LqR5omT5Y2w55qE5pyN5YqhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3QgaHR0cG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBodHRwb3B0aW9uc1sncmVzcG9uc2VUeXBlJ10gPSAnYmxvYic7XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYoIWJlT3B0aW9ucy5TZXJ2aWNlVW5pdCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN1QnlGb3JtYXRJZChiZU9wdGlvbnMuRm9ybWF0SWQpXHJcbiAgICAgICAgICAgIC50aGVuKChzdWNvZGUpPT57XHJcbiAgICAgICAgICAgICAgICBiZU9wdGlvbnMuU2VydmljZVVuaXQgPSBzdWNvZGU7XHJcbiAgICAgICAgICAgICAgICBzdSA9IHN1IHx8IGJlT3B0aW9ucy5TZXJ2aWNlVW5pdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRTaW5nbGVCeUZpbHRlciArICdzdT0nK3N1LCBib2R5LCBodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHN1ID0gc3UgfHwgYmVPcHRpb25zLlNlcnZpY2VVbml0O1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlByaW50U2luZ2xlQnlGaWx0ZXIgKyAnc3U9JytzdSwgYm9keSwgaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHN1OuWPjOagiOaooeW8j+S4i++8jOivpXN15Y+q5piv55So5p2l57uZbmdpbnjmnaXphY3nva7ot6/nlLFcclxuICAgICAqL1xyXG4gICAgcHJpbnRNdWx0aUJ5SWQoYmVPcHRpb25zTGlzdDogQXJyYXk8U291cmNlT3B0aW9ucz4sIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIHN1OlN0cmluZyAsIGZsYWcpOiBQcm9taXNlPHN0cmluZz57XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgc291cmNlT3B0aW9uc0xpc3Q6IGJlT3B0aW9uc0xpc3QsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+WmguaenOmSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wUHJpbnTov5nkuKpwb3N06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydyZXNwb25zZVR5cGUnXSA9ICdibG9iJztcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlByaW50TXVsdGlCeUlkICsgJ3N1PScrc3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc3U65Y+M5qCI5qih5byP5LiL77yM6K+lc3Xlj6rmmK/nlKjmnaXnu5luZ2lueOadpemFjee9rui3r+eUsVxyXG4gICAgICovXHJcbiAgICBwcmludE11bHRpQnlGaWx0ZXIoYmVPcHRpb25zTGlzdDogQXJyYXk8U291cmNlRmlsdGVyT3B0aW9ucz4sIG9wdGlvbnM6IE91dHB1dE9wdGlvbnMsIHN1OlN0cmluZyAsIGZsYWcpOiBQcm9taXNlPHN0cmluZz57XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICAgICAgc291cmNlRmlsdGVyT3B0aW9uc0xpc3Q6IGJlT3B0aW9uc0xpc3QsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOi/meWdl+WmguaenOmSiOWvueeahOesrOS4ieaWue+8jOesrOS4ieaWuemAmui/h+i9rOiwg+eahOaWueW8j1xyXG4gICAgICAgICAqIDEu56ys5LiJ5pa55pyN5Yqh56uv5a6e546wUHJpbnTov5nkuKpwb3N06K+35rGC5o6l5Y+jXHJcbiAgICAgICAgICogMi7nrKzkuInmlrnmnI3liqHnq6/ov5nkv6nor7fmsYLmjqXlj6PosIPnlKjkupHmiZPljbDnmoTmnI3liqFcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydyZXNwb25zZVR5cGUnXSA9ICdibG9iJztcclxuICAgICAgICBodHRwb3B0aW9uc1snaGVhZGVycyddID0ge1xyXG4gICAgICAgICAgICBTZXNzaW9uSWQ6IHRoaXMucHJpbnRFbnRpdHkuc2Vzc2lvbklkIHx8ICcnLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LnBvc3QodGhpcy5wcmludEVudGl0eS5hcHBVcmwgKyBVcmxzLlByaW50TXVsdGlCeUZpbHRlciArICdzdT0nK3N1LCBib2R5LCBodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigocmV0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4suafk+a1i+ivleaVsOaNrlxyXG4gICAgICovXHJcbiAgICBwcmludFRlc3REYXRhKGZvcm1hdHM6U3RyaW5nLCBkYXRhczpTdHJpbmcgLCBmbGFnKTogUHJvbWlzZTxzdHJpbmc+e1xyXG4gICAgICAgIGlmIChEYXRhVmFsaWRhdG9yLmNoZWNrRmxhZyhmbGFnKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ+WGhemDqOaWueazle+8jOWklumDqOivt+S9v+eUqGNsb3VkcHJpbnQuc2VydmljZeS4i+eahOacjeWKoScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0cyxcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YXMpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5aaC5p6c6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBQcmludOi/meS4qnBvc3Tor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ3Jlc3BvbnNlVHlwZSddID0gJ2Jsb2InO1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdCh0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuUHJpbnRUZXN0RGF0YSArICdzdT0nK3RoaXMuY3VyU3UsIGJvZHksIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kem5Y+R5omT5Y2w5LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIHNlbmRQcmludEV2ZW50KGRhdGEsIGZsYWcpOiBQcm9taXNlPHN0cmluZz57XHJcbiAgICAgICAgaWYgKERhdGFWYWxpZGF0b3IuY2hlY2tGbGFnKGZsYWcpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBhbGVydCgn5YaF6YOo5pa55rOV77yM5aSW6YOo6K+35L2/55SoY2xvdWRwcmludC5zZXJ2aWNl5LiL55qE5pyN5YqhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc3QgYm9keSA9IHtcclxuICAgICAgICAvLyAgICAgZm9ybWF0aWQ6Zm9ybWF0aWQsXHJcbiAgICAgICAgLy8gICAgIHN1OnN1LFxyXG4gICAgICAgIC8vIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6L+Z5Z2X5aaC5p6c6ZKI5a+555qE56ys5LiJ5pa577yM56ys5LiJ5pa56YCa6L+H6L2s6LCD55qE5pa55byPXHJcbiAgICAgICAgICogMS7nrKzkuInmlrnmnI3liqHnq6/lrp7njrBQcmludOi/meS4qnBvc3Tor7fmsYLmjqXlj6NcclxuICAgICAgICAgKiAyLuesrOS4ieaWueacjeWKoeerr+i/meS/qeivt+axguaOpeWPo+iwg+eUqOS6keaJk+WNsOeahOacjeWKoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cENsaWVudC5wb3N0KHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5TZW5kUHJpbnRFdmVudCArICdzdT0nK3RoaXMuY3VyU3UsIGRhdGEsIGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChyZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGlzUmVtb3RlUHJpbnQoKSA6IFByb21pc2U8YW55PntcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLnByaW50RW50aXR5LmFwcFVybCArIFVybHMuSXNSZW1vdGVQcmludCsnc3U9Jyt0aGlzLmN1clN1O1xyXG4gICAgICAgIC8vIExvYWRQcmludEZvcm1hdEJ5SWTmmK/kuKpHZXTor7fmsYJcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHZhciBodHRwb3BzID0gT2JqZWN0LmFzc2lnbih7fSxodHRwb3B0aW9ucyk7XHJcbiAgICAgICAgLy8gaHR0cG9wc1sncmVzcG9uc2VUeXBlJ109XCJ0ZXh0L2h0bWxcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaHR0cENsaWVudC5nZXQodXJsLGh0dHBvcHRpb25zKS50b1Byb21pc2UoKVxyXG4gICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBcclxuXHJcbiAgICBhc3luYyBnZXRFbmFibGVGb250cygpIDogUHJvbWlzZTxhbnk+e1xyXG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMucHJpbnRFbnRpdHkuYXBwVXJsICsgVXJscy5HZXRFbmFibGVGb250cysnc3U9Jyt0aGlzLmN1clN1O1xyXG4gICAgICAgIC8vIExvYWRQcmludEZvcm1hdEJ5SWTmmK/kuKpHZXTor7fmsYJcclxuICAgICAgICBjb25zdCBodHRwb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGh0dHBvcHRpb25zWydoZWFkZXJzJ10gPSB7XHJcbiAgICAgICAgICAgIFNlc3Npb25JZDogdGhpcy5wcmludEVudGl0eS5zZXNzaW9uSWQgfHwgJycsXHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmh0dHBDbGllbnQuZ2V0KHVybCxodHRwb3B0aW9ucykudG9Qcm9taXNlKClcclxuICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH0gXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6YCa6L+H5omT5Y2w5qC85byP77yM6I635Y+WYm/vvIzlnKjojrflj5Zzde+8iOi/meaYr+S4gOS4quS4tOaXtuaWueahiO+8iVxyXG4gICAgICogQHBhcmFtIGlkIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFN1QnlGb3JtYXRJZChmb3JtYXRJZCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5wcmludEVudGl0eS5hcHBVcmwgKycvZ2V0U3VCeUZvcm1hdElkP2Zvcm1hdElkPScgKyBmb3JtYXRJZCsnJnN1PWNsb3VkcHJpbnQnO1xyXG4gICAgICAgIGNvbnN0IGh0dHBvcHRpb25zID0ge307XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ3Jlc3BvbnNlVHlwZSddID0gJ3RleHQvaHRtbCc7XHJcbiAgICAgICAgaHR0cG9wdGlvbnNbJ2hlYWRlcnMnXSA9IHtcclxuICAgICAgICAgICAgU2Vzc2lvbklkOiB0aGlzLnByaW50RW50aXR5LnNlc3Npb25JZCB8fCAnJyxcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50LmdldCh1cmwsaHR0cG9wdGlvbnMpLnRvUHJvbWlzZSgpXHJcbiAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiBcclxufVxyXG4iXX0=