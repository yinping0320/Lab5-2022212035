/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { HttpService } from '@ecp-caf/caf-common';
import { HttpClient } from '@angular/common/http';
import { catchError, tap } from 'rxjs/operators';
import { of } from 'rxjs';
import { ConfigService, Api } from './config.service';
import { RotateDocumentPagesRequest } from '../doc-viewer/entity/RotateDocumentPagesRequest';
import * as i0 from "@angular/core";
import * as i1 from "@ecp-caf/caf-common";
import * as i2 from "@angular/common/http";
import * as i3 from "./config.service";
export class DocViewerService {
    /**
     * @param {?} http
     * @param {?} _http
     * @param {?} _config
     */
    constructor(http, _http, _config) {
        this.http = http;
        this._http = _http;
        this._config = _config;
    }
    /**
     * @private
     * @param {?} options
     * @return {?}
     */
    setHeader(options) {
        options.headers = {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*'
        };
        return options;
    }
    /**
     * @param {?} body
     * @return {?}
     */
    loadFileInfo(body) {
        /** @type {?} */
        let url = '/api/runtime/dfs/v1.0/docviewer/loaddocument';
        return this.http.request('Post', url, this.setHeader({ body })).pipe(tap((/**
         * @param {?} res
         * @return {?}
         */
        res => { })), catchError((/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            return of(error);
        })));
    }
    // loadFiles(path: string) {
    //   return this._http.post(this._config.getViewerApiEndpoint() + Api.LOAD_FILE_TREE, {'path': path}, Api.httpOptionsJson);
    // }
    // loadFile(credentials: FileCredentials) {
    //   return this._http.post(this._config.getViewerApiEndpoint() + Api.LOAD_DOCUMENT_DESCRIPTION, credentials, Api.httpOptionsJson);
    // }
    // upload(file: File, url: string, rewrite: boolean) {
    //   const formData = new FormData();
    //   formData.append("file", file);
    //   formData.append('rewrite', String(rewrite));
    //   if (url) {
    //     formData.append("url", url);
    //   }
    //   return this._http.post(this._config.getViewerApiEndpoint() + Api.UPLOAD_DOCUMENTS, formData);
    // }
    /**
     * @param {?} credentials
     * @param {?} page
     * @return {?}
     */
    loadPage(credentials, page) {
        return this._http.post('/api/runtime/dfs/v1.0/docviewer/loaddocumentPage', {
            'filePath': credentials.guid,
            'password': credentials.password,
            'page': page
        }, Api.httpOptionsJson);
    }
    /**
     * @param {?} credentials
     * @param {?} angle
     * @param {?} page
     * @return {?}
     */
    rotate(credentials, angle, page) {
        /** @type {?} */
        let url = '/api/runtime/dfs/v1.0/docviewer/rotatedocumentPage';
        // return this._http.post(url, {
        //   'filePath': credentials.guid,
        //   'password': credentials.password,
        //   'pages': [page],
        //   'angle': angle
        // }, Api.httpOptionsJson);
        /** @type {?} */
        let body = new RotateDocumentPagesRequest;
        body.filePath = credentials.guid;
        body.angle = angle;
        body.pages = [page];
        return this.http.request('Post', url, this.setHeader({ body })).pipe(tap((/**
         * @param {?} res
         * @return {?}
         */
        res => { })), catchError((/**
         * @param {?} error
         * @return {?}
         */
        (error) => {
            return of(error);
        })));
    }
}
DocViewerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
DocViewerService.ctorParameters = () => [
    { type: HttpService },
    { type: HttpClient },
    { type: ConfigService }
];
/** @nocollapse */ DocViewerService.ngInjectableDef = i0.defineInjectable({ factory: function DocViewerService_Factory() { return new DocViewerService(i0.inject(i1.HttpService), i0.inject(i2.HttpClient), i0.inject(i3.ConfigService)); }, token: DocViewerService, providedIn: "root" });
if (false) {
    /**
     * @type {?}
     * @private
     */
    DocViewerService.prototype.http;
    /**
     * @type {?}
     * @private
     */
    DocViewerService.prototype._http;
    /**
     * @type {?}
     * @private
     */
    DocViewerService.prototype._config;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jLXZpZXdlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGdzcC1zdmMvZmlsZS12aWV3ZXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZS9kb2Mtdmlld2VyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBcUIsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDckUsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsRUFBRSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBR3RDLE9BQU8sRUFBRSxhQUFhLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDdEQsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0saURBQWlELENBQUM7Ozs7O0FBSzdGLE1BQU0sT0FBTyxnQkFBZ0I7Ozs7OztJQUUzQixZQUFvQixJQUFpQixFQUFTLEtBQWlCLEVBQVUsT0FBc0I7UUFBM0UsU0FBSSxHQUFKLElBQUksQ0FBYTtRQUFTLFVBQUssR0FBTCxLQUFLLENBQVk7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFlO0lBQUksQ0FBQzs7Ozs7O0lBRzVGLFNBQVMsQ0FBQyxPQUFZO1FBRTVCLE9BQU8sQ0FBQyxPQUFPLEdBQUc7WUFDaEIsY0FBYyxFQUFFLGtCQUFrQjtZQUNsQyw2QkFBNkIsRUFBRSxHQUFHO1NBQ25DLENBQUM7UUFFRixPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDOzs7OztJQUVELFlBQVksQ0FBQyxJQUFtQjs7WUFDMUIsR0FBRyxHQUFDLDhDQUE4QztRQUN0RCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ2xFLEdBQUc7Ozs7UUFBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBQyxFQUNmLFVBQVU7Ozs7UUFBQyxDQUFDLEtBQXdCLEVBQUUsRUFBRTtZQUN0QyxPQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ1IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBcUJELFFBQVEsQ0FBQyxXQUE0QixFQUFFLElBQVk7UUFDakQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxrREFBa0QsRUFBRTtZQUN6RSxVQUFVLEVBQUUsV0FBVyxDQUFDLElBQUk7WUFDNUIsVUFBVSxFQUFFLFdBQVcsQ0FBQyxRQUFRO1lBQ2hDLE1BQU0sRUFBRSxJQUFJO1NBQ2IsRUFBRSxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDMUIsQ0FBQzs7Ozs7OztJQUVELE1BQU0sQ0FBQyxXQUE0QixFQUFFLEtBQWEsRUFBRSxJQUFZOztZQUMxRCxHQUFHLEdBQUMsb0RBQW9EOzs7Ozs7OztZQU94RCxJQUFJLEdBQTRCLElBQUksMEJBQTBCO1FBQ2xFLElBQUksQ0FBQyxRQUFRLEdBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztRQUMvQixJQUFJLENBQUMsS0FBSyxHQUFDLEtBQUssQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUNsRSxHQUFHOzs7O1FBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUMsRUFDZixVQUFVOzs7O1FBQUMsQ0FBQyxLQUF3QixFQUFFLEVBQUU7WUFDdEMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNSLENBQUM7OztZQXhFRixVQUFVLFNBQUM7Z0JBQ1YsVUFBVSxFQUFFLE1BQU07YUFDbkI7Ozs7WUFYUSxXQUFXO1lBQ1EsVUFBVTtZQUs3QixhQUFhOzs7Ozs7OztJQVFSLGdDQUF5Qjs7Ozs7SUFBQyxpQ0FBeUI7Ozs7O0lBQUUsbUNBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cFNlcnZpY2UgfSBmcm9tICdAZWNwLWNhZi9jYWYtY29tbW9uJztcbmltcG9ydCB7IEh0dHBFcnJvclJlc3BvbnNlLCBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgb2YsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IERvY1ZpZXdSZXF1ZXN0IH0gZnJvbSAnLi4vZG9jLXZpZXdlci9lbnRpdHkvZG9jdmlld3JlcXVlc3QnO1xuaW1wb3J0IHsgRmlsZUNyZWRlbnRpYWxzIH0gZnJvbSAnLi9maWxlLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uZmlnU2VydmljZSwgQXBpIH0gZnJvbSAnLi9jb25maWcuc2VydmljZSc7XG5pbXBvcnQgeyBSb3RhdGVEb2N1bWVudFBhZ2VzUmVxdWVzdCB9IGZyb20gJy4uL2RvYy12aWV3ZXIvZW50aXR5L1JvdGF0ZURvY3VtZW50UGFnZXNSZXF1ZXN0JztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgRG9jVmlld2VyU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwU2VydmljZSxwcml2YXRlIF9odHRwOiBIdHRwQ2xpZW50LCBwcml2YXRlIF9jb25maWc6IENvbmZpZ1NlcnZpY2UpIHsgfVxuXG5cbiAgcHJpdmF0ZSBzZXRIZWFkZXIob3B0aW9uczogYW55KSB7XG5cbiAgICBvcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJ1xuICAgIH07XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIGxvYWRGaWxlSW5mbyhib2R5OkRvY1ZpZXdSZXF1ZXN0KTogT2JzZXJ2YWJsZTxhbnk+e1xuICAgIGxldCB1cmw9Jy9hcGkvcnVudGltZS9kZnMvdjEuMC9kb2N2aWV3ZXIvbG9hZGRvY3VtZW50JztcbiAgICByZXR1cm4gdGhpcy5odHRwLnJlcXVlc3QoJ1Bvc3QnLCB1cmwsIHRoaXMuc2V0SGVhZGVyKHsgYm9keSB9KSkucGlwZShcbiAgICAgIHRhcChyZXMgPT4geyB9KSxcbiAgICAgIGNhdGNoRXJyb3IoKGVycm9yOiBIdHRwRXJyb3JSZXNwb25zZSkgPT4ge1xuICAgICAgICByZXR1cm4gb2YoZXJyb3IpO1xuICAgICAgfSkpO1xuICB9XG5cbiAgLy8gbG9hZEZpbGVzKHBhdGg6IHN0cmluZykge1xuICAvLyAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5fY29uZmlnLmdldFZpZXdlckFwaUVuZHBvaW50KCkgKyBBcGkuTE9BRF9GSUxFX1RSRUUsIHsncGF0aCc6IHBhdGh9LCBBcGkuaHR0cE9wdGlvbnNKc29uKTtcbiAgLy8gfVxuXG4gIC8vIGxvYWRGaWxlKGNyZWRlbnRpYWxzOiBGaWxlQ3JlZGVudGlhbHMpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5faHR0cC5wb3N0KHRoaXMuX2NvbmZpZy5nZXRWaWV3ZXJBcGlFbmRwb2ludCgpICsgQXBpLkxPQURfRE9DVU1FTlRfREVTQ1JJUFRJT04sIGNyZWRlbnRpYWxzLCBBcGkuaHR0cE9wdGlvbnNKc29uKTtcbiAgLy8gfVxuXG4gIC8vIHVwbG9hZChmaWxlOiBGaWxlLCB1cmw6IHN0cmluZywgcmV3cml0ZTogYm9vbGVhbikge1xuICAvLyAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gIC8vICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcbiAgLy8gICBmb3JtRGF0YS5hcHBlbmQoJ3Jld3JpdGUnLCBTdHJpbmcocmV3cml0ZSkpO1xuICAvLyAgIGlmICh1cmwpIHtcbiAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZChcInVybFwiLCB1cmwpO1xuICAvLyAgIH1cblxuICAvLyAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5fY29uZmlnLmdldFZpZXdlckFwaUVuZHBvaW50KCkgKyBBcGkuVVBMT0FEX0RPQ1VNRU5UUywgZm9ybURhdGEpO1xuICAvLyB9XG5cbiAgbG9hZFBhZ2UoY3JlZGVudGlhbHM6IEZpbGVDcmVkZW50aWFscywgcGFnZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCgnL2FwaS9ydW50aW1lL2Rmcy92MS4wL2RvY3ZpZXdlci9sb2FkZG9jdW1lbnRQYWdlJywge1xuICAgICAgJ2ZpbGVQYXRoJzogY3JlZGVudGlhbHMuZ3VpZCxcbiAgICAgICdwYXNzd29yZCc6IGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxuICAgICAgJ3BhZ2UnOiBwYWdlXG4gICAgfSwgQXBpLmh0dHBPcHRpb25zSnNvbik7XG4gIH1cblxuICByb3RhdGUoY3JlZGVudGlhbHM6IEZpbGVDcmVkZW50aWFscywgYW5nbGU6IG51bWJlciwgcGFnZTogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBsZXQgdXJsPScvYXBpL3J1bnRpbWUvZGZzL3YxLjAvZG9jdmlld2VyL3JvdGF0ZWRvY3VtZW50UGFnZSc7XG4gICAgLy8gcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh1cmwsIHtcbiAgICAvLyAgICdmaWxlUGF0aCc6IGNyZWRlbnRpYWxzLmd1aWQsXG4gICAgLy8gICAncGFzc3dvcmQnOiBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAvLyAgICdwYWdlcyc6IFtwYWdlXSxcbiAgICAvLyAgICdhbmdsZSc6IGFuZ2xlXG4gICAgLy8gfSwgQXBpLmh0dHBPcHRpb25zSnNvbik7XG4gICAgbGV0IGJvZHk6Um90YXRlRG9jdW1lbnRQYWdlc1JlcXVlc3Q9bmV3IFJvdGF0ZURvY3VtZW50UGFnZXNSZXF1ZXN0O1xuICAgIGJvZHkuZmlsZVBhdGg9Y3JlZGVudGlhbHMuZ3VpZDtcbiAgICBib2R5LmFuZ2xlPWFuZ2xlO1xuICAgIGJvZHkucGFnZXM9W3BhZ2VdO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KCdQb3N0JywgdXJsLCB0aGlzLnNldEhlYWRlcih7IGJvZHkgfSkpLnBpcGUoXG4gICAgICB0YXAocmVzID0+IHsgfSksXG4gICAgICBjYXRjaEVycm9yKChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmV0dXJuIG9mKGVycm9yKTtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8vIGdldERvd25sb2FkVXJsKGNyZWRlbnRpYWxzOiBGaWxlQ3JlZGVudGlhbHMpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5fY29uZmlnLmdldFZpZXdlckFwaUVuZHBvaW50KCkgKyBBcGkuRE9XTkxPQURfRE9DVU1FTlRTICsgJy8/cGF0aD0nICsgY3JlZGVudGlhbHMuZ3VpZDtcbiAgLy8gfVxuXG4gIC8vIGxvYWRQcmludChjcmVkZW50aWFsczogRmlsZUNyZWRlbnRpYWxzKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLl9jb25maWcuZ2V0Vmlld2VyQXBpRW5kcG9pbnQoKSArIEFwaS5MT0FEX1BSSU5ULCB7XG4gIC8vICAgICAnZ3VpZCc6IGNyZWRlbnRpYWxzLmd1aWQsXG4gIC8vICAgICAncGFzc3dvcmQnOiBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgLy8gICB9LCBBcGkuaHR0cE9wdGlvbnNKc29uKTtcbiAgLy8gfVxuXG4gIC8vIGxvYWRQcmludFBkZihjcmVkZW50aWFsczogRmlsZUNyZWRlbnRpYWxzKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLl9jb25maWcuZ2V0Vmlld2VyQXBpRW5kcG9pbnQoKSArIEFwaS5MT0FEX1BSSU5UX1BERiwge1xuICAvLyAgICAgJ2d1aWQnOiBjcmVkZW50aWFscy5ndWlkLFxuICAvLyAgICAgJ3Bhc3N3b3JkJzogY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gIC8vICAgfSwgQXBpLmh0dHBPcHRpb25zSnNvblJlc3BvbnNlVHlwZUJsb2IpO1xuICAvLyB9XG5cbiAgLy8gbG9hZFRodW1ibmFpbHMoY3JlZGVudGlhbHM6IEZpbGVDcmVkZW50aWFscykge1xuICAvLyAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5fY29uZmlnLmdldFZpZXdlckFwaUVuZHBvaW50KCkgKyBBcGkuTE9BRF9USFVNQk5BSUxTLCB7XG4gIC8vICAgICAnZ3VpZCc6IGNyZWRlbnRpYWxzLmd1aWQsXG4gIC8vICAgICAncGFzc3dvcmQnOiBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgLy8gICB9LCBBcGkuaHR0cE9wdGlvbnNKc29uKTtcbiAgLy8gfVxufVxuIl19