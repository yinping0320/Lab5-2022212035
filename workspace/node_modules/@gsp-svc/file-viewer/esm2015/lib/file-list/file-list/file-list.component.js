/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild, Input, Injector, ChangeDetectorRef } from '@angular/core';
import { LoadingService } from '@farris/ui-loading';
import { FileListService } from '../../service/file-list.service';
import { ImageViewerComponent } from '../../image-viewer/image-viewer/image-viewer.component';
import { MessagerService } from '@farris/ui-messager';
import { DocViewerComponent } from '../../doc-viewer/doc-viewer/doc-viewer.component';
import { OfdViewerComponent } from '../../ofd-viewer/ofd-viewer/ofd-viewer.component';
import { GspFileViewType } from '../../file-list-mobile/entity/gspfileviewtype';
import { PdfViewerComponent } from '../../pdf-viewer/pdf-viewer/pdf-viewer.component';
import { PdfViewOptions } from '../../pdf-viewer/entitires/pdfviewoptions';
import { PptViewerComponent } from '../../ppt-viewer/ppt-viewer/ppt-viewer.component';
export class FileListComponent {
    /**
     * @param {?} listService
     * @param {?} msgService
     * @param {?} loadService
     * @param {?=} injector
     */
    constructor(listService, msgService, loadService, injector) {
        this.listService = listService;
        this.msgService = msgService;
        this.loadService = loadService;
        this.injector = injector;
        this.formId = '123456';
        this.rootId = 'default-root';
        this.metadataIdList = [];
        this.index = 0;
        this.metadataId = "";
        this.fileList = [];
        this.isImage = true;
        this.isOfd = true;
        this.isPdf = true;
        this.isPpt = true;
        //srcList: string[] = [];
        this.isDocShow = false;
        this.isOfdShow = false;
        this.isPdfShow = false;
        this.isPptShow = false;
        this.isFileListOpend = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const loading = this.loadService.show({
            message: '拼命的请求中'
        });
        if (this.metadataIdList.length > 0) {
            this.listService.getFileList(this.metadataIdList, this.rootId).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                loading.close();
                if (res.error != null) {
                    this.msgService.warning('获取表单附件信息失败,请稍后重试。');
                }
                else {
                    this.fileList = res;
                    this.getFileIcon();
                    this.getIndex();
                    this.fileChange();
                    if (this.injector) {
                        /** @type {?} */
                        let changeDetector = this.injector.get(ChangeDetectorRef);
                        changeDetector.detectChanges();
                    }
                }
            }));
        }
        else {
            this.listService.getFormFileList(this.formId, this.rootId).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                loading.close();
                if (res.error != null) {
                    this.msgService.warning('获取表单附件信息失败,请稍后重试。');
                }
                else {
                    this.fileList = res;
                    this.getFileIcon();
                    this.getIndex();
                    this.fileChange();
                    if (this.injector) {
                        /** @type {?} */
                        let changeDetector = this.injector.get(ChangeDetectorRef);
                        changeDetector.detectChanges();
                    }
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    getIndex() {
        if (this.metadataId == null || this.metadataId == "") {
            this.index = 0;
        }
        else if (this.fileList.filter((/**
         * @param {?} x
         * @return {?}
         */
        x => x.metadataId == this.metadataId)).length == 0) {
            this.index = 0;
        }
        else {
            this.index = this.fileList.indexOf(this.fileList.filter((/**
             * @param {?} x
             * @return {?}
             */
            x => x.metadataId == this.metadataId))[0]);
        }
    }
    /**
     * @return {?}
     */
    fileChange() {
        this.file = this.fileList[this.index];
        //this.file=src;
        this.isImage = this.file.fileType == GspFileViewType.Image || this.file.fileType == 'Image';
        this.isOfd = this.file.fileType == GspFileViewType.Ofd || this.file.fileType == 'Ofd';
        this.isPdf = this.file.fileType == GspFileViewType.Pdf || this.file.fileType == 'Pdf';
        this.isPpt = this.file.fileType == GspFileViewType.Ppt || this.file.fileType == 'Ppt';
        if (this.isImage) {
            this.isDocShow = false;
            this.isOfdShow = false; //this.imageChange(this.file.fileUrl);
            this.isPptShow = false;
            return;
        }
        else if (this.isOfd) {
            //this.file.fileUrl="/platform/runtime/dfs/images/file.jpg";
            if (this.isOfdShow)
                this.ofdChange(this.file.filePath);
            else {
                this.isDocShow = false;
                this.isOfdShow = true;
                this.isPdfShow = false;
                this.isPptShow = false;
            }
        }
        else if (this.isPdf) {
            if (this.isPdfShow)
                this.pdfChange(this.file.filePath);
            else {
                this.isDocShow = false;
                this.isOfdShow = false;
                this.isPdfShow = true;
                this.isPptShow = false;
            }
        }
        else if (this.isPpt) {
            if (this.isPptShow)
                this.pptChange(this.file.filePath);
            else {
                this.isDocShow = false;
                this.isOfdShow = false;
                this.isPdfShow = false;
                this.isPptShow = true;
            }
        }
        else {
            if (this.isDocShow)
                this.docChange(this.file.filePath);
            else {
                this.isDocShow = true;
                this.isOfdShow = false;
                this.isPdfShow = false;
                this.isPptShow = false;
            }
        }
    }
    /**
     * @param {?} src
     * @return {?}
     */
    listBackColor(src) {
        if (this.file == src)
            return { "background-color": "#E6F7FF" };
    }
    /**
     * @param {?} src
     * @return {?}
     */
    fileSelect(src) {
        // this.file==src;
        this.index = this.fileList.indexOf(src);
        this.fileChange();
        //this.imageViewer.changeFile(this.index);
    }
    /**
     * @param {?} url
     * @return {?}
     */
    imageChange(url) {
        this.imageUrl = url;
        this.imageViewer.imageChange(url);
    }
    /**
     * @param {?} filePath
     * @return {?}
     */
    docChange(filePath) {
        this.docPath = filePath;
        this.docViewer.docChange(filePath);
    }
    /**
     * @param {?} filePath
     * @return {?}
     */
    pdfChange(filePath) {
        //this.docPath = filePath;
        this.pdfViewer.pdfChange(filePath);
    }
    /**
     * @param {?} filePath
     * @return {?}
     */
    pptChange(filePath) {
        //this.docPath = filePath;
        this.pptViewer.pptChange(filePath);
    }
    /**
     * @param {?} filePath
     * @return {?}
     */
    ofdChange(filePath) {
        this.ofdViewer.fileChange(filePath);
    }
    /**
     * @return {?}
     */
    getFileIcon() {
        /** @type {?} */
        let elementIsImage = true;
        /** @type {?} */
        let elementIsOfd = false;
        this.fileList.forEach((/**
         * @param {?} element
         * @return {?}
         */
        element => {
            elementIsImage = element.fileType == GspFileViewType.Image || element.fileType == 'Image';
            elementIsOfd = element.fileType == GspFileViewType.Ofd || element.fileType == 'Ofd';
            if (!elementIsImage && !elementIsOfd) {
                if (element.fileName.substring(element.fileName.lastIndexOf(".")).includes("doc") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("docx") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("wps"))
                    element.fileUrl = "/platform/runtime/dfs/images/word.png";
                else if (element.fileName.substring(element.fileName.lastIndexOf(".")).includes("xls") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("xlsx") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("et"))
                    element.fileUrl = "/platform/runtime/dfs/images/excel.png";
                else if (element.fileName.substring(element.fileName.lastIndexOf(".")).includes("ppt") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("pptx") || element.fileName.substring(element.fileName.lastIndexOf(".")).includes("dps"))
                    element.fileUrl = "/platform/runtime/dfs/images/ppt.png";
                else if (element.fileName.substring(element.fileName.lastIndexOf(".")).includes("pdf"))
                    element.fileUrl = "/platform/runtime/dfs/images/pdf.png";
                else if (element.fileName.substring(element.fileName.lastIndexOf(".")).includes("txt"))
                    element.fileUrl = "/platform/runtime/dfs/images/txt.png";
                else
                    element.fileUrl = "/platform/runtime/dfs/images/file.png";
            }
            if (elementIsOfd)
                element.fileUrl = "/platform/runtime/dfs/images/file.png";
        }));
    }
    /**
     * @return {?}
     */
    isShowFileList() {
        this.isFileListOpend = !this.isFileListOpend;
    }
    /**
     * @return {?}
     */
    download() {
        window.open(this.file.downloadUrl);
    }
    /**
     * @return {?}
     */
    zoomIn() {
        if (this.isImage) {
            this.imageViewer.zoomIn();
        }
        else if (this.isOfd) {
        }
        else {
            this.docViewer.zoomIn();
        }
    }
    /**
     * @return {?}
     */
    zoomOut() {
        if (this.isImage) {
            this.imageViewer.zoomOut();
        }
        else if (this.isOfd) {
        }
        else {
            this.docViewer.zoomOut();
        }
    }
    /**
     * @return {?}
     */
    zoomReset() {
        if (this.isImage) {
            this.imageViewer.zoomReset();
        }
        else if (this.isOfd) {
        }
        else {
            this.docViewer.zoomReset();
        }
    }
    /**
     * @return {?}
     */
    rotateClockwise() {
        if (this.isImage) {
            this.imageViewer.rotateClockwise();
        }
        else if (this.isOfd) {
        }
        else {
            this.docViewer.rotateClockwise();
        }
    }
    /**
     * @return {?}
     */
    rotateCounterClockwise() {
        if (this.isImage) {
            this.imageViewer.rotateCounterClockwise();
        }
        else if (this.isOfd) {
        }
        else {
            this.docViewer.rotateCounterClockwise();
        }
    }
}
FileListComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-file-list',
                template: "<div class=\"f-utils-absolute-all\">\n    <kendo-splitter style=\"height:100%;width:100%\" orientation=\"vertical\">\n        <kendo-splitter-pane [collapsible]=\"true\" size=\"50px\" [resizable]='false'>\n\n            <div style=\"width: 100%\">\n                <div class=\"btn btn-secondary upload_button\" (click)=\"isShowFileList()\" style=\"left:40px;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/discount.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u6587\u6863\u5217\u8868'\">\n                </div>\n                <div class=\"btn btn-secondary upload_button\" (click)=\"download()\" style=\"left:90px;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/download.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u4E0B\u8F7D'\">\n                </div>\n                <div *ngIf=\"!isOfd && !isPdf && !isPpt\" class=\"btn btn-secondary upload_button\" (click)=\"zoomIn()\" style=\"left:50%; margin-left: -12.5px;;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/zoomin.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u653E\u5927'\">\n                </div>\n                <div *ngIf=\"!isOfd && !isPdf && !isPpt\" class=\"btn btn-secondary upload_button\" (click)=\"zoomOut()\" style=\"left:50%; margin-left: -62.5px;;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/zoomout.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u7F29\u5C0F'\">\n                </div>\n                <div *ngIf=\"!isOfd && !isPdf && !isPpt\" class=\"btn btn-secondary upload_button\" (click)=\"zoomReset()\" style=\"left:50%; margin-left: 37.5px;;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/zoomreset.png'\" class=\"upload_button\" style=\"top:2.5px;left:2.5px;width:20px;height:20px\" title=\"'\u91CD\u7F6E'\">\n                </div>\n                <div *ngIf=\"!isOfd && !isPdf && !isPpt\" class=\"btn btn-secondary upload_button\" (click)=\"rotateClockwise()\" style=\"right:40px;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/rotate.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u987A\u65F6\u9488\u65CB\u8F6C'\">\n                </div>\n                <div *ngIf=\"!isOfd && !isPdf && !isPpt\" class=\"btn btn-secondary upload_button\" (click)=\"rotateCounterClockwise()\" style=\"right:90px;border:0\">\n                    <img [src]=\"'/platform/runtime/dfs/images/conrotate.png'\" class=\"upload_button\" style=\"top:0;left:0\" title=\"'\u9006\u65F6\u9488\u65CB\u8F6C'\">\n                </div>\n            </div>\n\n        </kendo-splitter-pane>\n        <kendo-splitter-pane>\n            <kendo-splitter style=\"height:100%;width:100%\">\n                <kendo-splitter-pane [collapsible]=\"true\" size=\"200px\" [collapsed]=\"isFileListOpend\" [resizable]='false' [scrollable]='true' style=\"overflow-x:hidden\">\n                    <ul *ngFor=\"let src of fileList\" class=\"pic_list\" [ngStyle]=\"listBackColor(src)\">\n                        <a (click)=\"fileSelect(src)\">\n                            <div>\n                                <img [src]='src.fileUrl'>\n                            </div>\n                            <p>{{src.fileName}}</p>\n                        </a>\n                    </ul>\n                </kendo-splitter-pane>\n                <kendo-splitter-pane id=\"paneContent\" [scrollable]='true'>\n                    <div *ngIf='isImage&&!isOfd&&!isPdf&&!isPpt'>\n                        <app-image-viewer [imageUrl]=\"file.fileUrl\"></app-image-viewer>\n                    </div>\n                    <div *ngIf='!isImage&&!isOfd&&!isPdf&&!isPpt'>\n                        <app-doc-viewer [filePath]=\"file.filePath\"></app-doc-viewer>\n                    </div>\n                    <div *ngIf='!isImage&&isOfd&&!isPdf&&!isPpt'>\n                        <app-ofd-viewer [filePath]=\"file.filePath\"></app-ofd-viewer>\n                    </div>\n                    <div *ngIf='!isImage&&!isOfd&&!isPdf&&isPpt'>\n                        <app-ppt-viewer [pptUrl]=\"file.filePath\"></app-ppt-viewer>\n                    </div>\n                    <div *ngIf='!isImage&&!isOfd&&isPdf&&!isPpt' class=\"f-utils-fill\" style=\"height: 100%\">\n                        <app-pdf-viewer [pdfUrl]=\"file.filePath\" [viewOptions]=\"viewOptions\"></app-pdf-viewer>\n                    </div>\n                </kendo-splitter-pane>\n            </kendo-splitter>\n        </kendo-splitter-pane>\n    </kendo-splitter>\n</div>",
                styles: [".button-group{width:100%;height:50px;display:table-cell}.button-group button{width:25px;height:25px;vertical-align:middle;position:absolute;top:12.5px}.button-group button img{width:25px;height:25px;vertical-align:middle}.pic_list{border:1px solid #ddd;padding:0;list-style:none;width:200px;height:200px;text-align:center}.pic_list a div{display:table-cell;vertical-align:middle;text-align:center;width:120px;height:140px;margin:20px 40px 10px}.pic_list a div img{vertical-align:middle;text-align:center;max-width:120px;max-height:140px}.pic_list a p{width:170px;height:40px;font-size:14px;text-align:center;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;word-break:break-all;white-space:nowrap;margin:10px 15px 0}.upload_button{width:25px;height:25px;vertical-align:middle;position:absolute;top:12.5px}"]
            }] }
];
/** @nocollapse */
FileListComponent.ctorParameters = () => [
    { type: FileListService },
    { type: MessagerService },
    { type: LoadingService },
    { type: Injector }
];
FileListComponent.propDecorators = {
    formId: [{ type: Input }],
    rootId: [{ type: Input }],
    metadataIdList: [{ type: Input }],
    index: [{ type: Input }],
    metadataId: [{ type: Input }],
    viewOptions: [{ type: Input }],
    imageViewer: [{ type: ViewChild, args: [ImageViewerComponent,] }],
    docViewer: [{ type: ViewChild, args: [DocViewerComponent,] }],
    ofdViewer: [{ type: ViewChild, args: [OfdViewerComponent,] }],
    pdfViewer: [{ type: ViewChild, args: [PdfViewerComponent,] }],
    pptViewer: [{ type: ViewChild, args: [PptViewerComponent,] }]
};
if (false) {
    /** @type {?} */
    FileListComponent.prototype.formId;
    /** @type {?} */
    FileListComponent.prototype.rootId;
    /** @type {?} */
    FileListComponent.prototype.metadataIdList;
    /** @type {?} */
    FileListComponent.prototype.index;
    /** @type {?} */
    FileListComponent.prototype.metadataId;
    /** @type {?} */
    FileListComponent.prototype.viewOptions;
    /** @type {?} */
    FileListComponent.prototype.fileList;
    /** @type {?} */
    FileListComponent.prototype.file;
    /** @type {?} */
    FileListComponent.prototype.fileConent;
    /** @type {?} */
    FileListComponent.prototype.isImage;
    /** @type {?} */
    FileListComponent.prototype.isOfd;
    /** @type {?} */
    FileListComponent.prototype.isPdf;
    /** @type {?} */
    FileListComponent.prototype.isPpt;
    /** @type {?} */
    FileListComponent.prototype.imageUrl;
    /** @type {?} */
    FileListComponent.prototype.docPath;
    /** @type {?} */
    FileListComponent.prototype.isDocShow;
    /** @type {?} */
    FileListComponent.prototype.isOfdShow;
    /** @type {?} */
    FileListComponent.prototype.isPdfShow;
    /** @type {?} */
    FileListComponent.prototype.isPptShow;
    /** @type {?} */
    FileListComponent.prototype.isFileListOpend;
    /** @type {?} */
    FileListComponent.prototype.imageViewer;
    /** @type {?} */
    FileListComponent.prototype.docViewer;
    /** @type {?} */
    FileListComponent.prototype.ofdViewer;
    /** @type {?} */
    FileListComponent.prototype.pdfViewer;
    /** @type {?} */
    FileListComponent.prototype.pptViewer;
    /**
     * @type {?}
     * @private
     */
    FileListComponent.prototype.listService;
    /**
     * @type {?}
     * @private
     */
    FileListComponent.prototype.msgService;
    /**
     * @type {?}
     * @private
     */
    FileListComponent.prototype.loadService;
    /**
     * @type {?}
     * @private
     */
    FileListComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS1saXN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3ZjL2ZpbGUtdmlld2VyLyIsInNvdXJjZXMiOlsibGliL2ZpbGUtbGlzdC9maWxlLWxpc3QvZmlsZS1saXN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUdqRyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBQzlGLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQUN0RixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQUN0RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDaEYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDdEYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDJDQUEyQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtEQUFrRCxDQUFDO0FBU3RGLE1BQU0sT0FBTyxpQkFBaUI7Ozs7Ozs7SUEyQjVCLFlBQW9CLFdBQTRCLEVBQVUsVUFBMkIsRUFBVSxXQUEyQixFQUFVLFFBQW1CO1FBQW5JLGdCQUFXLEdBQVgsV0FBVyxDQUFpQjtRQUFVLGVBQVUsR0FBVixVQUFVLENBQWlCO1FBQVUsZ0JBQVcsR0FBWCxXQUFXLENBQWdCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQXpCOUksV0FBTSxHQUFX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QUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztvQkFDbFAsT0FBTyxDQUFDLE9BQU8sR0FBRyx1Q0FBdUMsQ0FBQztxQkFDdkQsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7b0JBQ3RQLE9BQU8sQ0FBQyxPQUFPLEdBQUcsd0NBQXdDLENBQUM7cUJBQ3hELElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO29CQUN2UCxPQUFPLENBQUMsT0FBTyxHQUFHLHNDQUFzQyxDQUFDO3FCQUN0RCxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FB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QUFxQzs7SUFHckMscUNBQWM7O0lBQ2QsaUNBQVU7O0lBQ1YsdUNBQWdCOztJQUNoQixvQ0FBd0I7O0lBQ3hCLGtDQUFzQjs7SUFDdEIsa0NBQXNCOztJQUN0QixrQ0FBc0I7O0lBQ3RCLHFDQUFpQjs7SUFDakIsb0NBQWdCOztJQUdoQixzQ0FBa0I7O0lBQ2xCLHNDQUFrQjs7SUFDbEIsc0NBQWtCOztJQUNsQixzQ0FBa0I7O0lBRWxCLDRDQUF3Qjs7SUFHeEIsd0NBQW1FOztJQUNuRSxzQ0FBNkQ7O0lBQzdELHNDQUE2RDs7SUFDN0Qsc0NBQTZEOztJQUM3RCxzQ0FBNkQ7Ozs7O0lBTmpELHdDQUFvQzs7Ozs7SUFBRSx1Q0FBbUM7Ozs7O0lBQUUsd0NBQW1DOzs7OztJQUFFLHFDQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIElucHV0LCBJbmplY3RvciwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuXG5pbXBvcnQgeyBMb2FkaW5nU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbG9hZGluZyc7XG5pbXBvcnQgeyBGaWxlTGlzdFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlL2ZpbGUtbGlzdC5zZXJ2aWNlJztcbmltcG9ydCB7IEltYWdlVmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaW1hZ2Utdmlld2VyL2ltYWdlLXZpZXdlci9pbWFnZS12aWV3ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IE1lc3NhZ2VyU2VydmljZSB9IGZyb20gJ0BmYXJyaXMvdWktbWVzc2FnZXInO1xuaW1wb3J0IHsgRG9jVmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZG9jLXZpZXdlci9kb2Mtdmlld2VyL2RvYy12aWV3ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IE9mZFZpZXdlckNvbXBvbmVudCB9IGZyb20gJy4uLy4uL29mZC12aWV3ZXIvb2ZkLXZpZXdlci9vZmQtdmlld2VyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBHc3BGaWxlVmlld1R5cGUgfSBmcm9tICcuLi8uLi9maWxlLWxpc3QtbW9iaWxlL2VudGl0eS9nc3BmaWxldmlld3R5cGUnO1xuaW1wb3J0IHsgUGRmVmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vcGRmLXZpZXdlci9wZGYtdmlld2VyL3BkZi12aWV3ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IFBkZlZpZXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vcGRmLXZpZXdlci9lbnRpdGlyZXMvcGRmdmlld29wdGlvbnMnO1xuaW1wb3J0IHsgUHB0Vmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vcHB0LXZpZXdlci9wcHQtdmlld2VyL3BwdC12aWV3ZXIuY29tcG9uZW50JztcblxuXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1maWxlLWxpc3QnLFxuICB0ZW1wbGF0ZVVybDogJy4vZmlsZS1saXN0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZmlsZS1saXN0LmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBGaWxlTGlzdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgQElucHV0KCkgZm9ybUlkOiBzdHJpbmcgPSAnMTIzNDU2JztcbiAgQElucHV0KCkgcm9vdElkOiBzdHJpbmcgPSAnZGVmYXVsdC1yb290JztcbiAgQElucHV0KCkgbWV0YWRhdGFJZExpc3Q6IHN0cmluZ1tdID0gW107XG4gIEBJbnB1dCgpIGluZGV4OiBudW1iZXIgPSAwO1xuICBASW5wdXQoKSBtZXRhZGF0YUlkOiBzdHJpbmcgPSBcIlwiO1xuICBASW5wdXQoKSB2aWV3T3B0aW9uczogUGRmVmlld09wdGlvbnM7XG5cblxuICBmaWxlTGlzdCA9IFtdO1xuICBmaWxlOiBhbnk7XG4gIGZpbGVDb25lbnQ6IGFueTtcbiAgaXNJbWFnZTogYm9vbGVhbiA9IHRydWU7XG4gIGlzT2ZkOiBib29sZWFuID0gdHJ1ZTtcbiAgaXNQZGY6IGJvb2xlYW4gPSB0cnVlO1xuICBpc1BwdDogYm9vbGVhbiA9IHRydWU7XG4gIGltYWdlVXJsOiBzdHJpbmc7XG4gIGRvY1BhdGg6IHN0cmluZztcbiAgLy9zcmNMaXN0OiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlzRG9jU2hvdyA9IGZhbHNlO1xuICBpc09mZFNob3cgPSBmYWxzZTtcbiAgaXNQZGZTaG93ID0gZmFsc2U7XG4gIGlzUHB0U2hvdyA9IGZhbHNlO1xuXG4gIGlzRmlsZUxpc3RPcGVuZCA9IGZhbHNlO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxpc3RTZXJ2aWNlOiBGaWxlTGlzdFNlcnZpY2UsIHByaXZhdGUgbXNnU2VydmljZTogTWVzc2FnZXJTZXJ2aWNlLCBwcml2YXRlIGxvYWRTZXJ2aWNlOiBMb2FkaW5nU2VydmljZSwgcHJpdmF0ZSBpbmplY3Rvcj86IEluamVjdG9yKSB7IH1cblxuICBAVmlld0NoaWxkKEltYWdlVmlld2VyQ29tcG9uZW50KSBpbWFnZVZpZXdlcjogSW1hZ2VWaWV3ZXJDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoRG9jVmlld2VyQ29tcG9uZW50KSBkb2NWaWV3ZXI6IERvY1ZpZXdlckNvbXBvbmVudDtcbiAgQFZpZXdDaGlsZChPZmRWaWV3ZXJDb21wb25lbnQpIG9mZFZpZXdlcjogT2ZkVmlld2VyQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKFBkZlZpZXdlckNvbXBvbmVudCkgcGRmVmlld2VyOiBQZGZWaWV3ZXJDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoUHB0Vmlld2VyQ29tcG9uZW50KSBwcHRWaWV3ZXI6IFBwdFZpZXdlckNvbXBvbmVudDtcblxuICBuZ09uSW5pdCgpIHtcbiAgICBjb25zdCBsb2FkaW5nID0gdGhpcy5sb2FkU2VydmljZS5zaG93KHtcbiAgICAgIG1lc3NhZ2U6ICfmi7zlkb3nmoTor7fmsYLkuK0nXG4gICAgfSk7XG4gICAgaWYgKHRoaXMubWV0YWRhdGFJZExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5saXN0U2VydmljZS5nZXRGaWxlTGlzdCh0aGlzLm1ldGFkYXRhSWRMaXN0LCB0aGlzLnJvb3RJZCkuc3Vic2NyaWJlKFxuICAgICAgICByZXMgPT4ge1xuICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTtcbiAgICAgICAgICBpZiAocmVzLmVycm9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKCfojrflj5booajljZXpmYTku7bkv6Hmga/lpLHotKUs6K+356iN5ZCO6YeN6K+V44CCJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSByZXM7XG4gICAgICAgICAgICB0aGlzLmdldEZpbGVJY29uKCk7XG4gICAgICAgICAgICB0aGlzLmdldEluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLmZpbGVDaGFuZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmluamVjdG9yKSB7XG4gICAgICAgICAgICAgIGxldCBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYgPSB0aGlzLmluamVjdG9yLmdldChDaGFuZ2VEZXRlY3RvclJlZik7XG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGlzdFNlcnZpY2UuZ2V0Rm9ybUZpbGVMaXN0KHRoaXMuZm9ybUlkLCB0aGlzLnJvb3RJZCkuc3Vic2NyaWJlKFxuICAgICAgICByZXMgPT4ge1xuICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTtcbiAgICAgICAgICBpZiAocmVzLmVycm9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubXNnU2VydmljZS53YXJuaW5nKCfojrflj5booajljZXpmYTku7bkv6Hmga/lpLHotKUs6K+356iN5ZCO6YeN6K+V44CCJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSByZXM7XG4gICAgICAgICAgICB0aGlzLmdldEZpbGVJY29uKCk7XG4gICAgICAgICAgICB0aGlzLmdldEluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLmZpbGVDaGFuZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmluamVjdG9yKSB7XG4gICAgICAgICAgICAgIGxldCBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYgPSB0aGlzLmluamVjdG9yLmdldChDaGFuZ2VEZXRlY3RvclJlZik7XG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5kZXgoKSB7XG4gICAgaWYgKHRoaXMubWV0YWRhdGFJZCA9PSBudWxsIHx8IHRoaXMubWV0YWRhdGFJZCA9PSBcIlwiKSB7XG4gICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5maWxlTGlzdC5maWx0ZXIoeCA9PiB4Lm1ldGFkYXRhSWQgPT0gdGhpcy5tZXRhZGF0YUlkKS5sZW5ndGggPT0gMCkge1xuICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmZpbGVMaXN0LmluZGV4T2YodGhpcy5maWxlTGlzdC5maWx0ZXIoeCA9PiB4Lm1ldGFkYXRhSWQgPT0gdGhpcy5tZXRhZGF0YUlkKVswXSk7XG4gICAgfVxuICB9XG5cbiAgZmlsZUNoYW5nZSgpIHtcbiAgICB0aGlzLmZpbGUgPSB0aGlzLmZpbGVMaXN0W3RoaXMuaW5kZXhdO1xuICAgIC8vdGhpcy5maWxlPXNyYztcbiAgICB0aGlzLmlzSW1hZ2UgPSB0aGlzLmZpbGUuZmlsZVR5cGUgPT0gR3NwRmlsZVZpZXdUeXBlLkltYWdlIHx8IHRoaXMuZmlsZS5maWxlVHlwZSA9PSAnSW1hZ2UnO1xuICAgIHRoaXMuaXNPZmQgPSB0aGlzLmZpbGUuZmlsZVR5cGUgPT0gR3NwRmlsZVZpZXdUeXBlLk9mZCB8fCB0aGlzLmZpbGUuZmlsZVR5cGUgPT0gJ09mZCc7XG4gICAgdGhpcy5pc1BkZiA9IHRoaXMuZmlsZS5maWxlVHlwZSA9PSBHc3BGaWxlVmlld1R5cGUuUGRmIHx8IHRoaXMuZmlsZS5maWxlVHlwZSA9PSAnUGRmJztcbiAgICB0aGlzLmlzUHB0ID0gdGhpcy5maWxlLmZpbGVUeXBlID09IEdzcEZpbGVWaWV3VHlwZS5QcHQgfHwgdGhpcy5maWxlLmZpbGVUeXBlID09ICdQcHQnO1xuICAgIGlmICh0aGlzLmlzSW1hZ2UpIHtcbiAgICAgIHRoaXMuaXNEb2NTaG93ID0gZmFsc2U7XG4gICAgICB0aGlzLmlzT2ZkU2hvdyA9IGZhbHNlOyAgLy90aGlzLmltYWdlQ2hhbmdlKHRoaXMuZmlsZS5maWxlVXJsKTtcbiAgICAgIHRoaXMuaXNQcHRTaG93ID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT2ZkKSB7XG4gICAgICAvL3RoaXMuZmlsZS5maWxlVXJsPVwiL3BsYXRmb3JtL3J1bnRpbWUvZGZzL2ltYWdlcy9maWxlLmpwZ1wiO1xuICAgICAgaWYgKHRoaXMuaXNPZmRTaG93KVxuICAgICAgICB0aGlzLm9mZENoYW5nZSh0aGlzLmZpbGUuZmlsZVBhdGgpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuaXNEb2NTaG93ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNPZmRTaG93ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc1BkZlNob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BwdFNob3cgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQZGYpIHtcbiAgICAgIGlmICh0aGlzLmlzUGRmU2hvdylcbiAgICAgICAgdGhpcy5wZGZDaGFuZ2UodGhpcy5maWxlLmZpbGVQYXRoKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmlzRG9jU2hvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzT2ZkU2hvdyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzUGRmU2hvdyA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNQcHRTaG93ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHB0KSB7XG4gICAgICBpZiAodGhpcy5pc1BwdFNob3cpXG4gICAgICAgIHRoaXMucHB0Q2hhbmdlKHRoaXMuZmlsZS5maWxlUGF0aCk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5pc0RvY1Nob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc09mZFNob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BkZlNob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BwdFNob3cgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmlzRG9jU2hvdylcbiAgICAgICAgdGhpcy5kb2NDaGFuZ2UodGhpcy5maWxlLmZpbGVQYXRoKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmlzRG9jU2hvdyA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNPZmRTaG93ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNQZGZTaG93ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNQcHRTaG93ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBsaXN0QmFja0NvbG9yKHNyYykge1xuICAgIGlmICh0aGlzLmZpbGUgPT0gc3JjKVxuICAgICAgcmV0dXJuIHsgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiI0U2RjdGRlwiIH1cbiAgfVxuXG4gIGZpbGVTZWxlY3Qoc3JjKSB7XG4gICAgLy8gdGhpcy5maWxlPT1zcmM7XG4gICAgdGhpcy5pbmRleCA9IHRoaXMuZmlsZUxpc3QuaW5kZXhPZihzcmMpO1xuICAgIHRoaXMuZmlsZUNoYW5nZSgpO1xuICAgIC8vdGhpcy5pbWFnZVZpZXdlci5jaGFuZ2VGaWxlKHRoaXMuaW5kZXgpO1xuICB9XG5cbiAgaW1hZ2VDaGFuZ2UodXJsOiBhbnkpIHtcbiAgICB0aGlzLmltYWdlVXJsID0gdXJsO1xuICAgIHRoaXMuaW1hZ2VWaWV3ZXIuaW1hZ2VDaGFuZ2UodXJsKTtcbiAgfVxuXG4gIGRvY0NoYW5nZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgdGhpcy5kb2NQYXRoID0gZmlsZVBhdGg7XG4gICAgdGhpcy5kb2NWaWV3ZXIuZG9jQ2hhbmdlKGZpbGVQYXRoKTtcbiAgfVxuXG4gIHBkZkNoYW5nZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgLy90aGlzLmRvY1BhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLnBkZlZpZXdlci5wZGZDaGFuZ2UoZmlsZVBhdGgpO1xuICB9XG5cbiAgcHB0Q2hhbmdlKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgICAvL3RoaXMuZG9jUGF0aCA9IGZpbGVQYXRoO1xuICAgIHRoaXMucHB0Vmlld2VyLnBwdENoYW5nZShmaWxlUGF0aCk7XG4gIH1cblxuICBvZmRDaGFuZ2UoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIHRoaXMub2ZkVmlld2VyLmZpbGVDaGFuZ2UoZmlsZVBhdGgpO1xuICB9XG5cbiAgZ2V0RmlsZUljb24oKSB7XG4gICAgbGV0IGVsZW1lbnRJc0ltYWdlID0gdHJ1ZTtcbiAgICBsZXQgZWxlbWVudElzT2ZkID0gZmFsc2U7XG4gICAgdGhpcy5maWxlTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZWxlbWVudElzSW1hZ2UgPSBlbGVtZW50LmZpbGVUeXBlID09IEdzcEZpbGVWaWV3VHlwZS5JbWFnZSB8fCBlbGVtZW50LmZpbGVUeXBlID09ICdJbWFnZSc7XG4gICAgICBlbGVtZW50SXNPZmQgPSBlbGVtZW50LmZpbGVUeXBlID09IEdzcEZpbGVWaWV3VHlwZS5PZmQgfHwgZWxlbWVudC5maWxlVHlwZSA9PSAnT2ZkJztcbiAgICAgIGlmICghZWxlbWVudElzSW1hZ2UgJiYgIWVsZW1lbnRJc09mZCkge1xuICAgICAgICBpZiAoZWxlbWVudC5maWxlTmFtZS5zdWJzdHJpbmcoZWxlbWVudC5maWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLmluY2x1ZGVzKFwiZG9jXCIpIHx8IGVsZW1lbnQuZmlsZU5hbWUuc3Vic3RyaW5nKGVsZW1lbnQuZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS5pbmNsdWRlcyhcImRvY3hcIikgfHwgZWxlbWVudC5maWxlTmFtZS5zdWJzdHJpbmcoZWxlbWVudC5maWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLmluY2x1ZGVzKFwid3BzXCIpKVxuICAgICAgICAgIGVsZW1lbnQuZmlsZVVybCA9IFwiL3BsYXRmb3JtL3J1bnRpbWUvZGZzL2ltYWdlcy93b3JkLnBuZ1wiO1xuICAgICAgICBlbHNlIGlmIChlbGVtZW50LmZpbGVOYW1lLnN1YnN0cmluZyhlbGVtZW50LmZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkuaW5jbHVkZXMoXCJ4bHNcIikgfHwgZWxlbWVudC5maWxlTmFtZS5zdWJzdHJpbmcoZWxlbWVudC5maWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLmluY2x1ZGVzKFwieGxzeFwiKSB8fCBlbGVtZW50LmZpbGVOYW1lLnN1YnN0cmluZyhlbGVtZW50LmZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkuaW5jbHVkZXMoXCJldFwiKSlcbiAgICAgICAgICBlbGVtZW50LmZpbGVVcmwgPSBcIi9wbGF0Zm9ybS9ydW50aW1lL2Rmcy9pbWFnZXMvZXhjZWwucG5nXCI7XG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnQuZmlsZU5hbWUuc3Vic3RyaW5nKGVsZW1lbnQuZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS5pbmNsdWRlcyhcInBwdFwiKSB8fCBlbGVtZW50LmZpbGVOYW1lLnN1YnN0cmluZyhlbGVtZW50LmZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkuaW5jbHVkZXMoXCJwcHR4XCIpIHx8IGVsZW1lbnQuZmlsZU5hbWUuc3Vic3RyaW5nKGVsZW1lbnQuZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS5pbmNsdWRlcyhcImRwc1wiKSlcbiAgICAgICAgICBlbGVtZW50LmZpbGVVcmwgPSBcIi9wbGF0Zm9ybS9ydW50aW1lL2Rmcy9pbWFnZXMvcHB0LnBuZ1wiO1xuICAgICAgICBlbHNlIGlmIChlbGVtZW50LmZpbGVOYW1lLnN1YnN0cmluZyhlbGVtZW50LmZpbGVOYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkuaW5jbHVkZXMoXCJwZGZcIikpXG4gICAgICAgICAgZWxlbWVudC5maWxlVXJsID0gXCIvcGxhdGZvcm0vcnVudGltZS9kZnMvaW1hZ2VzL3BkZi5wbmdcIjtcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5maWxlTmFtZS5zdWJzdHJpbmcoZWxlbWVudC5maWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLmluY2x1ZGVzKFwidHh0XCIpKVxuICAgICAgICAgIGVsZW1lbnQuZmlsZVVybCA9IFwiL3BsYXRmb3JtL3J1bnRpbWUvZGZzL2ltYWdlcy90eHQucG5nXCI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBlbGVtZW50LmZpbGVVcmwgPSBcIi9wbGF0Zm9ybS9ydW50aW1lL2Rmcy9pbWFnZXMvZmlsZS5wbmdcIjtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50SXNPZmQpXG4gICAgICAgIGVsZW1lbnQuZmlsZVVybCA9IFwiL3BsYXRmb3JtL3J1bnRpbWUvZGZzL2ltYWdlcy9maWxlLnBuZ1wiO1xuICAgIH0pO1xuICB9XG5cbiAgaXNTaG93RmlsZUxpc3QoKSB7XG4gICAgdGhpcy5pc0ZpbGVMaXN0T3BlbmQgPSAhdGhpcy5pc0ZpbGVMaXN0T3BlbmQ7XG4gIH1cblxuICBkb3dubG9hZCgpIHtcbiAgICB3aW5kb3cub3Blbih0aGlzLmZpbGUuZG93bmxvYWRVcmwpO1xuICB9XG5cbiAgem9vbUluKCkge1xuICAgIGlmICh0aGlzLmlzSW1hZ2UpIHtcbiAgICAgIHRoaXMuaW1hZ2VWaWV3ZXIuem9vbUluKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT2ZkKSB7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb2NWaWV3ZXIuem9vbUluKCk7XG4gICAgfVxuICB9XG5cbiAgem9vbU91dCgpIHtcbiAgICBpZiAodGhpcy5pc0ltYWdlKSB7XG4gICAgICB0aGlzLmltYWdlVmlld2VyLnpvb21PdXQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNPZmQpIHtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvY1ZpZXdlci56b29tT3V0KCk7XG4gICAgfVxuICB9XG5cbiAgem9vbVJlc2V0KCkge1xuICAgIGlmICh0aGlzLmlzSW1hZ2UpIHtcbiAgICAgIHRoaXMuaW1hZ2VWaWV3ZXIuem9vbVJlc2V0KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT2ZkKSB7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb2NWaWV3ZXIuem9vbVJlc2V0KCk7XG4gICAgfVxuICB9XG5cbiAgcm90YXRlQ2xvY2t3aXNlKCkge1xuICAgIGlmICh0aGlzLmlzSW1hZ2UpIHtcbiAgICAgIHRoaXMuaW1hZ2VWaWV3ZXIucm90YXRlQ2xvY2t3aXNlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzT2ZkKSB7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb2NWaWV3ZXIucm90YXRlQ2xvY2t3aXNlKCk7XG4gICAgfVxuICB9XG5cbiAgcm90YXRlQ291bnRlckNsb2Nrd2lzZSgpIHtcbiAgICBpZiAodGhpcy5pc0ltYWdlKSB7XG4gICAgICB0aGlzLmltYWdlVmlld2VyLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNPZmQpIHtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvY1ZpZXdlci5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlKCk7XG4gICAgfVxuICB9XG5cbn1cbiJdfQ==