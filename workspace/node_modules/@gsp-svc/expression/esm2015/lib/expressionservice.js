/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Injector, ApplicationRef, ComponentFactoryResolver } from '@angular/core';
import { ComputeRuleComponent } from './compute-rule/compute-rule.component';
import { BsModalService } from '@farris/ui-modal';
import { ExprEditMode } from './expression-type';
import { ExpressioneditorComponent } from './expressioneditor/expressioneditor.component';
import { ExpressionContextEntity } from './expression-context-entity';
import { Adapter } from './adapter';
import { Schema, EntitySet } from './schema';
import { InjectedEntity } from './injected-entity';
import { InjectedType } from './injected-type';
import InputStream from 'antlr4/InputStream';
import CommonTokenStream from 'antlr4/CommonTokenStream';
import JavaScriptLexer from 'JavaScriptLexer';
import { HttpClient } from "@angular/common/http";
import { FunctionI18nResources } from './i18n/FunctionI18nResource';
import { ExpressionEditorLocalePipe } from './expression-editor-locale.pipe';
import { NewEntitySet, NewSchema } from './i18n/NewSchema';
/**
 * 表达式对外提供服务类
 * 功能：提供打开、预置等接口
 */
export class ExpressionService {
    /**
     * @param {?} injector
     * @param {?} applicationRef
     * @param {?} compFactRes
     * @param {?} http
     */
    constructor(injector, applicationRef, compFactRes, http) {
        this.injector = injector;
        this.applicationRef = applicationRef;
        this.compFactRes = compFactRes;
        this.http = http;
        this.exprEditMode = ExprEditMode.Advanced;
        this.simpleModalConfig = {
            title: "条件表达式",
            width: 750,
            height: 350,
            showButtons: false
        };
        this.exprEntity = new ExpressionContextEntity();
        this.adapter = new Adapter();
        //定义语义化资源
        this.allFunctions = []; //所有函数，包含不规范
        this.modalService = injector.get(BsModalService);
        //初始化i18n标识
        this.localeId = localStorage.getItem('languageCode');
        this.localePipe = new ExpressionEditorLocalePipe(this.localeId);
        //初始化i18n函数
        this.allFunctions = FunctionI18nResources[this.localeId] || FunctionI18nResources["zh-CHS"];
        //初始化titile,save,cancel
        this.ExpressionTitle = this.localePipe.transform("ExpressionTitle");
        this.ExpressionSave = this.localePipe.transform("ExpressionSave");
        this.ExpressionCancel = this.localePipe.transform("ExpressionCancel");
    }
    /**
     * 创建表达式
     * 功能：打开表达式窗口，then方法获得表达式结果
     * @return {?}
     */
    buildExpression() {
        /** @type {?} */
        let that = this;
        return new Promise((/**
         * @param {?} resolve
         * @return {?}
         */
        function (resolve) {
            if (that.exprEditMode == ExprEditMode.Conditional) {
                if ((that.exprEntity.expr != null && that.exprEntity.expr != "") && (that.exprEntity.sexpr == null || that.exprEntity.sexpr == "")) {
                    /** @type {?} */
                    const compFactory = that.compFactRes.resolveComponentFactory(ExpressioneditorComponent);
                    /** @type {?} */
                    const compRef = compFactory.create(that.injector);
                    compRef.instance.expressionEntity = that.exprEntity;
                    /** @type {?} */
                    let dialog = that.modalService.show(compRef, {
                        title: that.ExpressionTitle,
                        width: 1060,
                        height: 610,
                        buttons: [
                            {
                                text: that.ExpressionSave, cls: 'btn btn-primary', handle: (/**
                                 * @return {?}
                                 */
                                () => {
                                    compRef.instance.getExprs();
                                    dialog.close();
                                })
                            },
                            {
                                text: that.ExpressionCancel, cls: 'btn btn-secondary', handle: (/**
                                 * @return {?}
                                 */
                                () => {
                                    dialog.close();
                                })
                            }
                        ],
                        showButtons: true
                    });
                    compRef.instance.result.subscribe((/**
                     * @param {?} expressionContent
                     * @return {?}
                     */
                    (expressionContent) => {
                        return resolve(expressionContent);
                    }));
                }
                else {
                    /** @type {?} */
                    const compFactory = that.compFactRes.resolveComponentFactory(ComputeRuleComponent);
                    /** @type {?} */
                    const compRef = compFactory.create(that.injector);
                    compRef.instance.contextEntity = that.exprEntity;
                    /** @type {?} */
                    const dialog = that.modalService.show(compRef, that.simpleModalConfig);
                    compRef.instance.closeModalEmitter.subscribe((/**
                     * @param {?} $event
                     * @return {?}
                     */
                    $event => dialog.close()));
                    compRef.instance.result.subscribe((/**
                     * @param {?} expressionContent
                     * @return {?}
                     */
                    (expressionContent) => {
                        return resolve(expressionContent);
                    }));
                }
            }
            else {
                /** @type {?} */
                const compFactory = that.compFactRes.resolveComponentFactory(ExpressioneditorComponent);
                /** @type {?} */
                const compRef = compFactory.create(that.injector);
                compRef.instance.expressionEntity = that.exprEntity;
                /** @type {?} */
                let dialog = that.modalService.show(compRef, {
                    title: that.ExpressionTitle,
                    width: 1060,
                    height: 610,
                    buttons: [
                        {
                            text: that.ExpressionSave, cls: 'btn btn-primary', handle: (/**
                             * @return {?}
                             */
                            () => {
                                compRef.instance.getExprs();
                                dialog.close();
                            })
                        },
                        {
                            text: that.ExpressionCancel, cls: 'btn btn-secondary', handle: (/**
                             * @return {?}
                             */
                            () => {
                                dialog.close();
                            })
                        }
                    ],
                    showButtons: true
                });
                compRef.instance.result.subscribe((/**
                 * @param {?} expressionContent
                 * @return {?}
                 */
                (expressionContent) => {
                    return resolve(expressionContent);
                }));
            }
        }));
    }
    /**
     * 设置表达式展现模式（简易版还是高级版）
     * exprDisplayType
     * @param {?} exprEditMode
     * @return {?}
     */
    setEditPattern(exprEditMode) {
        this.exprEditMode = exprEditMode;
    }
    /**
     * 添加上下文变量方法
     * @param {?} contextEntity 上下文变量实体
     * @return {?}
     */
    addContext(contextEntity) {
        this.exprEntity.contextEntities = this.exprEntity.contextEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.key !== contextEntity.key));
        this.exprEntity.contextEntities.push(contextEntity);
    }
    /**
     * 添加系统变量方法
     * @param {?} sessionEntity 系统变量实体
     * @return {?}
     */
    addSession(sessionEntity) {
        this.exprEntity.sessionEntities = this.exprEntity.sessionEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.key !== sessionEntity.key));
        this.exprEntity.sessionEntities.push(sessionEntity);
    }
    /**
     * 添加函数方法
     * @param {?} funcEntity 函数实体                       !!!待处理：修改FuncEntity--->FunctionEntity
     * @return {?}
     */
    addFunc(funcEntity) {
        this.exprEntity.funcEntities = this.exprEntity.funcEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.key !== funcEntity.key));
        this.exprEntity.funcEntities.push(funcEntity);
    }
    /**
     *
     * 添加函数列表
     * @param {?} funcList 函数json列表
     * @return {?}
     */
    addFuncs(funcList) {
        /** @type {?} */
        let funcs = (/** @type {?} */ (JSON.parse(funcList)));
        funcs.funcs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.exprEntity.funcEntities.push(item);
        }));
    }
    /**
     * 预置表达式
     * @param {?} text 表达式文本
     * 1：text为脚本表达式，需要先Antlr4解析
     * 2：
     * @return {?}
     */
    addExpressionText(text) {
        try {
            /** @type {?} */
            let textEntity = (/** @type {?} */ (JSON.parse(text)));
            if (!(textEntity)) {
                this.exprEntity.expr = text;
            }
            else if (textEntity.expr) {
                //加载Antlr4工具
                /** @type {?} */
                let inputStream = new InputStream.InputStream(textEntity.expr);
                /** @type {?} */
                let lexer = new JavaScriptLexer.JavaScriptLexer(inputStream);
                /** @type {?} */
                let tokens = new CommonTokenStream.CommonTokenStream(lexer);
                tokens.fill();
                //tokens切分的js文本抽取到array中
                /** @type {?} */
                let array = new Array();
                for (let index = 0; index < tokens.tokens.length - 1; index++) {
                    array[index] = tokens.tokens[index].text;
                }
                //遍历array的js文本，每个js文本遍历tokenItems查找对应的语义化文本，封装为str
                /** @type {?} */
                var str = "";
                for (let index = 0; index < array.length; index++) {
                    if (((array[index] == "DefaultFunction") || (array[index] == "Math")) && (array[index + 1] == ".")) {
                        continue;
                    }
                    else if (array[index] == "." && (array[index - 1] == "DefaultFunction" || array[index - 1] == "Math")) {
                        continue;
                    }
                    else {
                        //单个元素计数器
                        /** @type {?} */
                        var num = 0;
                        //遍历上下文变量
                        if (num == 0) {
                            for (let i = 0; i < this.exprEntity.contextEntities.length; i++) {
                                if (array[index] == ("\"" + this.exprEntity.contextEntities[i].key + "\"")) {
                                    str = str + "\"" + this.exprEntity.contextEntities[i].name + "\"";
                                    num = 1;
                                    break;
                                }
                            }
                        }
                        //遍历session变量
                        if (num == 0) {
                            for (let i = 0; i < this.exprEntity.sessionEntities.length; i++) {
                                if (array[index] == ("\"" + this.exprEntity.sessionEntities[i].key + "\"")) {
                                    str = str + "\"" + this.exprEntity.sessionEntities[i].name + "\"";
                                    num = 1;
                                    break;
                                }
                            }
                        }
                        // 遍历数据（暂时先屏蔽）
                        // this.exprEntity.schemaMap.forEach(a=>{
                        //     // for(let j=0;j<a.entitySets[0].length;j++){
                        //     //   if(array[index]==a.entityTypes[0].properties[j].description){
                        //     //     array[index]=a.entityTypes[0].properties[j].name;
                        //     //     break;
                        //     //   }
                        //     // }
                        //     if(array[index]==a.entitySets[0].name){
                        //       array[index]=a.entitySets[0].description;
                        //       str=str+array[index];
                        //       num=1;
                        //     }
                        //     for(let j=0;j<a.entityTypes[0].properties.length;j++){
                        //       if(array[index]==a.entityTypes[0].properties[j].name){
                        //         array[index]=a.entityTypes[0].properties[j].description;
                        //         str=str+array[index];
                        //         num=1;
                        //         break;
                        //       }
                        //     }
                        //   });
                        //计数器num：如果遍历allFunctions没找到对应字段，则直接拼接(num=0)；否则替换(num=1)
                        if (num == 0) {
                            for (let i = 0; i < this.allFunctions.length; i++) {
                                if (array[index] == this.allFunctions[i].key) {
                                    if (this.allFunctions[i].type != "Advanced") {
                                        str = str + this.allFunctions[i].name;
                                        num = 1;
                                        break;
                                    }
                                }
                            }
                        }
                        //如果计数器为0，证明没有语义化匹配。显示原始数据
                        if (num == 0) {
                            str = str + array[index];
                        }
                    }
                }
                this.exprEntity.expr = str;
                if (textEntity.sexpr) {
                    this.exprEntity.sexpr = textEntity.sexpr;
                }
            }
            else {
                this.GetUnCamelParse(textEntity);
                this.exprEntity.expr = textEntity.expr;
                if (textEntity.sexpr) {
                    this.exprEntity.sexpr = textEntity.sexpr;
                }
            }
        }
        catch (_a) {
            this.exprEntity.expr = text;
        }
    }
    /**
     * 预置Schema
     * @param {?} name schema名称
     * @param {?} schema schema实体类
     * @return {?}
     */
    addSchema(name, schema) {
        if (!name) {
            alert("Please Input Schema Name!");
        }
        else
            this.exprEntity.schemaMap.set(name, schema);
    }
    /**
     * 注入实体
     * @param {?} name 注入实体名,默认为typeNameInSchema
     * @param {?=} schemaName 注入实体所在的schema名，默认为CommonObject
     * @param {?=} typeNameInSchema 注入实体在schema中的名称
     * @param {?=} injectedType 注入实体的类型，默认为EntityType
     * @return {?}
     */
    addInjectedEntity(name, schemaName = "CommonObject", typeNameInSchema, injectedType = InjectedType.EntityType) {
        //构造注入实体对象
        /** @type {?} */
        let injectedEntity = new InjectedEntity();
        //若注入的实体名为空，则默认为注入实体在schema中的名称
        injectedEntity.name = name ? name : typeNameInSchema;
        injectedEntity.schemaName = schemaName;
        injectedEntity.injectedName = typeNameInSchema;
        injectedEntity.injectedType = injectedType;
        this.exprEntity.injectedEntities = this.exprEntity.injectedEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.name !== injectedEntity.name));
        this.exprEntity.injectedEntities.push(injectedEntity);
    }
    /**
     * 预置CDT
     * @param {?} gspCDTs CDT集合
     * @return {?}
     */
    addCDT(gspCDTs) {
        /** @type {?} */
        let schema = new Schema();
        //若schemaMap中存在CDT的schema
        if (this.exprEntity.schemaMap.get("CDT")) {
            schema = this.exprEntity.schemaMap.get("CDT");
        }
        //将每一个CDT转化为schema内部结构中的entityType
        gspCDTs.forEach((/**
         * @param {?} gspCDT
         * @return {?}
         */
        gspCDT => {
            /** @type {?} */
            let entityType = this.adapter.convertCDT(gspCDT);
            schema.entityTypes.push(entityType);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addSchema("CDT", schema);
    }
    /**
     * 预置CO
     * @param {?} commonObject CO集合(todo)
     * @return {?}
     */
    addCommonObject(commonObject) {
        /** @type {?} */
        let schema;
        //若schemaMap中存在CO的schema
        if (this.exprEntity.schemaMap.get("CommonObject")) {
            schema = this.exprEntity.schemaMap.get("CommonObject");
        }
        else
            schema = new Schema;
        //将每一个CO转化为schema内部结构中的entityType
        /** @type {?} */
        let entityTypes = this.adapter.convertCO(commonObject);
        entityTypes.forEach((/**
         * @param {?} entityType
         * @return {?}
         */
        entityType => {
            schema.entityTypes.push(entityType);
            /** @type {?} */
            let entitySet = new EntitySet;
            entitySet.name = entityType.name + "s";
            entitySet.entityType = entityType.name;
            entitySet.description = entityType.description;
            schema.entitySets.push(entitySet);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addSchema("CommonObject", schema);
    }
    /**
     * 预置帮助
     * @param {?} shEntity 帮助描述实体
     * @return {?}
     */
    addSmartHelpEntity(shEntity) {
        this.exprEntity.smartHelpEntities = this.exprEntity.smartHelpEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        item => item.code !== shEntity.code));
        this.exprEntity.smartHelpEntities.push(shEntity);
    }
    /**
     * @param {?} windowWidth
     * @return {?}
     */
    addWindowWidth(windowWidth) {
    }
    /**
     * @return {?}
     */
    clearInjectedEntity() {
        this.exprEntity.injectedEntities = [];
    }
    /**
     * @private
     * @param {?} jsonObj
     * @return {?}
     */
    GetUnCamelParse(jsonObj) {
        for (let key in jsonObj) {
            if (typeof (jsonObj[key]) === "object") {
                this.GetUnCamelParse(jsonObj[key]);
            }
            /** @type {?} */
            let temp = jsonObj[key];
            delete (jsonObj[key]);
            jsonObj[this.ConvertToUncamel(key)] = temp;
        }
    }
    //字符串反转换Camel
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    ConvertToUncamel(input) {
        if (input.length > 0) {
            /** @type {?} */
            let len = input.length;
            /** @type {?} */
            var strTemp = "";
            for (let i = 0; i < len; i++) {
                if (i == 0) {
                    strTemp += input[i].toLowerCase(); //第一个
                }
                else {
                    strTemp += input[i];
                }
            }
            return strTemp;
        }
    }
    /**
     * \@description 添加NewSchema
     * @param {?} name NewSchema的名称
     * @param {?} newSchema NewSchema
     * @return {?}
     */
    addNewSchema(name, newSchema) {
        if (!name) {
            alert("Please Input NewSchema Name!");
        }
        else
            this.exprEntity.newSchemaMap.set(name, newSchema);
    }
    /**
     * \@description 添加CO的数据，NewSchema
     * @param {?} commonObject
     * @return {?}
     */
    addCommonObjectOfNewSchema(commonObject) {
        /** @type {?} */
        let newSchema;
        //若newSchemaMap中存在CO的newSchema
        if (this.exprEntity.newSchemaMap.get("CommonObject")) {
            newSchema = this.exprEntity.newSchemaMap.get("CommonObject");
        }
        else
            newSchema = new NewSchema;
        //将每一个CO转化为schema内部结构中的entityType
        /** @type {?} */
        let entityTypes = this.adapter.convertCOOfNewSchema(commonObject);
        entityTypes.forEach((/**
         * @param {?} entityType
         * @return {?}
         */
        entityType => {
            newSchema.entityTypes.push(entityType);
            /** @type {?} */
            let entitySet = new NewEntitySet;
            entitySet.code = entityType.name + "s";
            entitySet.entityType = entityType.code;
            newSchema.entitySets.push(entitySet);
        }));
        //将合并后的newSchema放入内部上下文实体中
        this.addNewSchema("CommonObject", newSchema);
    }
    /**
     * \@description 添加UDT类型，NewSchema
     * @param {?} gspCDTs
     * @return {?}
     */
    addCDTOfNewSchema(gspCDTs) {
        /** @type {?} */
        let newSchema = new NewSchema();
        //若schemaMap中存在CDT的schema
        if (this.exprEntity.newSchemaMap.get("CDT")) {
            newSchema = this.exprEntity.newSchemaMap.get("CDT");
        }
        //将每一个CDT转化为schema内部结构中的entityType
        gspCDTs.forEach((/**
         * @param {?} gspCDT
         * @return {?}
         */
        gspCDT => {
            /** @type {?} */
            let entityType = this.adapter.convertCDTOfNewSchema(gspCDT);
            newSchema.entityTypes.push(entityType);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addNewSchema("CDT", newSchema);
    }
}
ExpressionService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
ExpressionService.ctorParameters = () => [
    { type: Injector },
    { type: ApplicationRef },
    { type: ComponentFactoryResolver },
    { type: HttpClient }
];
if (false) {
    /** @type {?} */
    ExpressionService.prototype.exprEditMode;
    /** @type {?} */
    ExpressionService.prototype.simpleModalConfig;
    /** @type {?} */
    ExpressionService.prototype.exprEntity;
    /** @type {?} */
    ExpressionService.prototype.adapter;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.modalService;
    /** @type {?} */
    ExpressionService.prototype.allFunctions;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.localePipe;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionTitle;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionSave;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionCancel;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.applicationRef;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.compFactRes;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN2Yy9leHByZXNzaW9uLyIsInNvdXJjZXMiOlsibGliL2V4cHJlc3Npb25zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsd0JBQXdCLEVBQThCLE1BQU0sZUFBZSxDQUFDO0FBQzNILE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQzdFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDakQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDMUYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDdEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUlwQyxPQUFPLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUM3QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFHbkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sV0FBVyxNQUFNLG9CQUFvQixDQUFDO0FBQzdDLE9BQU8saUJBQWlCLE1BQU0sMEJBQTBCLENBQUM7QUFDekQsT0FBTyxlQUFlLE1BQU0saUJBQWlCLENBQUM7QUFFOUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ3BFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRTdFLE9BQU8sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sa0JB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O1FBQ3pCLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3pDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDdkQ7UUFDRCxrQ0FBa0M7UUFDbEMsT0FBTyxDQUFDLE9BQU87Ozs7UUFBQyxNQUFNLENBQUMsRUFBRTs7Z0JBQ2pCLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQztZQUMzRCxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMzQyxDQUFDLEVBQUMsQ0FBQztRQUNILHVCQUF1QjtRQUN2QixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN4QyxDQUFDOzs7WUEvYUosVUFBVTs7OztZQTdCVSxRQUFRO1lBQUUsY0FBYztZQUFFLHdCQUF3QjtZQW1COUQsVUFBVTs7OztJQVlmLHlDQUFtRDs7SUFDbkQsOENBS0U7O0lBQ0YsdUNBQW9FOztJQUNwRSxvQ0FBaUM7Ozs7O0lBQ2pDLHlDQUFxQzs7SUFFckMseUNBQWtCOzs7OztJQUVsQixxQ0FBeUI7Ozs7O0lBQ3pCLHVDQUErQzs7Ozs7SUFFL0MsNENBQWdDOzs7OztJQUNoQywyQ0FBK0I7Ozs7O0lBQy9CLDZDQUFpQzs7Ozs7SUFFckIscUNBQTBCOzs7OztJQUFFLDJDQUFzQzs7Ozs7SUFBRSx3Q0FBNkM7Ozs7O0lBQUUsaUNBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IsIEFwcGxpY2F0aW9uUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIFJlZmxlY3RpdmVJbmplY3RvciwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbXB1dGVSdWxlQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wdXRlLXJ1bGUvY29tcHV0ZS1ydWxlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IEV4cHJFZGl0TW9kZSB9IGZyb20gJy4vZXhwcmVzc2lvbi10eXBlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbmVkaXRvckNvbXBvbmVudCB9IGZyb20gJy4vZXhwcmVzc2lvbmVkaXRvci9leHByZXNzaW9uZWRpdG9yLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25Db250ZXh0RW50aXR5IH0gZnJvbSAnLi9leHByZXNzaW9uLWNvbnRleHQtZW50aXR5JztcclxuaW1wb3J0IHsgQWRhcHRlciB9IGZyb20gJy4vYWRhcHRlcic7XHJcbmltcG9ydCB7IFZhckVudGl0eSB9IGZyb20gJy4vdmFyZW50aXR5JztcclxuaW1wb3J0IHsgRnVuY0VudGl0eSwgRnVuY0VudGl0aWVzIH0gZnJvbSAnLi9mdW5jZW50aXR5JztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbkVudGl0eSB9IGZyb20gJy4vZXhwcmVzc2lvbi1lbnRpdHknO1xyXG5pbXBvcnQgeyBTY2hlbWEsIEVudGl0eVNldCB9IGZyb20gJy4vc2NoZW1hJztcclxuaW1wb3J0IHsgSW5qZWN0ZWRFbnRpdHkgfSBmcm9tICcuL2luamVjdGVkLWVudGl0eSc7XHJcbmltcG9ydCB7IEdzcENvbW1vbkRhdGFUeXBlLCBHU1BDb21tb25PYmplY3QgfSBmcm9tICdAZ3NwLWJlZi9nc3AtY20tbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBTbWFydEhlbHBFbnRpdHkgfSBmcm9tICcuL3NtYXJ0SGVscEVudGl0eSc7XHJcbmltcG9ydCB7IEluamVjdGVkVHlwZSB9IGZyb20gJy4vaW5qZWN0ZWQtdHlwZSc7XHJcbmltcG9ydCBJbnB1dFN0cmVhbSBmcm9tICdhbnRscjQvSW5wdXRTdHJlYW0nO1xyXG5pbXBvcnQgQ29tbW9uVG9rZW5TdHJlYW0gZnJvbSAnYW50bHI0L0NvbW1vblRva2VuU3RyZWFtJztcclxuaW1wb3J0IEphdmFTY3JpcHRMZXhlciBmcm9tICdKYXZhU2NyaXB0TGV4ZXInO1xyXG5pbXBvcnQgSmF2YVNjcmlwdFBhcnNlciBmcm9tICdKYXZhU2NyaXB0UGFyc2VyJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gXCJAYW5ndWxhci9jb21tb24vaHR0cFwiO1xyXG5pbXBvcnQgeyBGdW5jdGlvbkkxOG5SZXNvdXJjZXMgfSBmcm9tICcuL2kxOG4vRnVuY3Rpb25JMThuUmVzb3VyY2UnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uRWRpdG9yTG9jYWxlUGlwZSB9IGZyb20gJy4vZXhwcmVzc2lvbi1lZGl0b3ItbG9jYWxlLnBpcGUnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IE5ld0VudGl0eVNldCwgTmV3U2NoZW1hIH0gZnJvbSAnLi9pMThuL05ld1NjaGVtYSc7XHJcblxyXG4vKipcclxuICog6KGo6L6+5byP5a+55aSW5o+Q5L6b5pyN5Yqh57G7XHJcbiAqIOWKn+iDve+8muaPkOS+m+aJk+W8gOOAgemihOe9ruetieaOpeWPo1xyXG4gKi9cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvblNlcnZpY2Uge1xyXG4gICAgZXhwckVkaXRNb2RlOiBFeHByRWRpdE1vZGUgPSBFeHByRWRpdE1vZGUuQWR2YW5jZWQ7XHJcbiAgICBzaW1wbGVNb2RhbENvbmZpZyA9IHtcclxuICAgICAgICB0aXRsZTogXCLmnaHku7booajovr7lvI9cIixcclxuICAgICAgICB3aWR0aDogNzUwLFxyXG4gICAgICAgIGhlaWdodDogMzUwLFxyXG4gICAgICAgIHNob3dCdXR0b25zOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIGV4cHJFbnRpdHk6IEV4cHJlc3Npb25Db250ZXh0RW50aXR5ID0gbmV3IEV4cHJlc3Npb25Db250ZXh0RW50aXR5KCk7XHJcbiAgICBhZGFwdGVyOiBBZGFwdGVyID0gbmV3IEFkYXB0ZXIoKTtcclxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBCc01vZGFsU2VydmljZTtcclxuICAgIC8v5a6a5LmJ6K+t5LmJ5YyW6LWE5rqQXHJcbiAgICBhbGxGdW5jdGlvbnMgPSBbXTsgICAgICAgICAgLy/miYDmnInlh73mlbDvvIzljIXlkKvkuI3op4TojINcclxuICAgIC8v5a6a5LmJaTE4buagh+ivhlxyXG4gICAgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBsb2NhbGVQaXBlOiBFeHByZXNzaW9uRWRpdG9yTG9jYWxlUGlwZTtcclxuICAgIC8v5a6a5LmJ6KGo6L6+5byPdGl0bGXvvIxzYXZl77yMY2FuY2VsXHJcbiAgICBwcml2YXRlIEV4cHJlc3Npb25UaXRsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBFeHByZXNzaW9uU2F2ZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBFeHByZXNzaW9uQ2FuY2VsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsIHByaXZhdGUgYXBwbGljYXRpb25SZWY6IEFwcGxpY2F0aW9uUmVmLCBwcml2YXRlIGNvbXBGYWN0UmVzOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCwpIHtcclxuICAgICAgICB0aGlzLm1vZGFsU2VydmljZSA9IGluamVjdG9yLmdldChCc01vZGFsU2VydmljZSk7XHJcblxyXG4gICAgICAgIC8v5Yid5aeL5YyWaTE4buagh+ivhlxyXG4gICAgICAgIHRoaXMubG9jYWxlSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJyk7XHJcbiAgICAgICAgdGhpcy5sb2NhbGVQaXBlID0gbmV3IEV4cHJlc3Npb25FZGl0b3JMb2NhbGVQaXBlKHRoaXMubG9jYWxlSWQpO1xyXG4gICAgICAgIC8v5Yid5aeL5YyWaTE4buWHveaVsFxyXG4gICAgICAgIHRoaXMuYWxsRnVuY3Rpb25zID0gRnVuY3Rpb25JMThuUmVzb3VyY2VzW3RoaXMubG9jYWxlSWRdIHx8IEZ1bmN0aW9uSTE4blJlc291cmNlc1tcInpoLUNIU1wiXTtcclxuICAgICAgICAvL+WIneWni+WMlnRpdGlsZSxzYXZlLGNhbmNlbFxyXG4gICAgICAgIHRoaXMuRXhwcmVzc2lvblRpdGxlID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIkV4cHJlc3Npb25UaXRsZVwiKTtcclxuICAgICAgICB0aGlzLkV4cHJlc3Npb25TYXZlID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIkV4cHJlc3Npb25TYXZlXCIpO1xyXG4gICAgICAgIHRoaXMuRXhwcmVzc2lvbkNhbmNlbCA9IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJFeHByZXNzaW9uQ2FuY2VsXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICog5Yib5bu66KGo6L6+5byPXHJcbiAgICAgICog5Yqf6IO977ya5omT5byA6KGo6L6+5byP56qX5Y+j77yMdGhlbuaWueazleiOt+W+l+ihqOi+vuW8j+e7k+aenFxyXG4gICAgICAqL1xyXG4gICAgcHVibGljIGJ1aWxkRXhwcmVzc2lvbigpIHtcclxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuZXhwckVkaXRNb2RlID09IEV4cHJFZGl0TW9kZS5Db25kaXRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhhdC5leHByRW50aXR5LmV4cHIgIT0gbnVsbCAmJiB0aGF0LmV4cHJFbnRpdHkuZXhwciAhPSBcIlwiKSAmJiAodGhhdC5leHByRW50aXR5LnNleHByID09IG51bGwgfHwgdGhhdC5leHByRW50aXR5LnNleHByID09IFwiXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhhdC5jb21wRmFjdFJlcy5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShFeHByZXNzaW9uZWRpdG9yQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5leHByZXNzaW9uRW50aXR5ID0gdGhhdC5leHByRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlhbG9nID0gdGhhdC5tb2RhbFNlcnZpY2Uuc2hvdyhjb21wUmVmLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhhdC5FeHByZXNzaW9uVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTA2MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNjEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhhdC5FeHByZXNzaW9uU2F2ZSwgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmdldEV4cHJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGF0LkV4cHJlc3Npb25DYW5jZWwsIGNsczogJ2J0biBidG4tc2Vjb25kYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5yZXN1bHQuc3Vic2NyaWJlKChleHByZXNzaW9uQ29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZXhwcmVzc2lvbkNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhhdC5jb21wRmFjdFJlcy5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShDb21wdXRlUnVsZUNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBSZWYgPSBjb21wRmFjdG9yeS5jcmVhdGUodGhhdC5pbmplY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBSZWYuaW5zdGFuY2UuY29udGV4dEVudGl0eSA9IHRoYXQuZXhwckVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlhbG9nID0gdGhhdC5tb2RhbFNlcnZpY2Uuc2hvdyhjb21wUmVmLCB0aGF0LnNpbXBsZU1vZGFsQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5jbG9zZU1vZGFsRW1pdHRlci5zdWJzY3JpYmUoJGV2ZW50ID0+IGRpYWxvZy5jbG9zZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5yZXN1bHQuc3Vic2NyaWJlKChleHByZXNzaW9uQ29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZXhwcmVzc2lvbkNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wRmFjdG9yeSA9IHRoYXQuY29tcEZhY3RSZXMucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoRXhwcmVzc2lvbmVkaXRvckNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmV4cHJlc3Npb25FbnRpdHkgPSB0aGF0LmV4cHJFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpYWxvZyA9IHRoYXQubW9kYWxTZXJ2aWNlLnNob3coY29tcFJlZiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhhdC5FeHByZXNzaW9uVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDYwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDYxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoYXQuRXhwcmVzc2lvblNhdmUsIGNsczogJ2J0biBidG4tcHJpbWFyeScsIGhhbmRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmdldEV4cHJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhhdC5FeHByZXNzaW9uQ2FuY2VsLCBjbHM6ICdidG4gYnRuLXNlY29uZGFyeScsIGhhbmRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5yZXN1bHQuc3Vic2NyaWJlKChleHByZXNzaW9uQ29udGVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShleHByZXNzaW9uQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruihqOi+vuW8j+WxleeOsOaooeW8j++8iOeugOaYk+eJiOi/mOaYr+mrmOe6p+eJiO+8iVxyXG4gICAgICogZXhwckRpc3BsYXlUeXBlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRFZGl0UGF0dGVybihleHByRWRpdE1vZGU6IEV4cHJFZGl0TW9kZSkge1xyXG4gICAgICAgIHRoaXMuZXhwckVkaXRNb2RlID0gZXhwckVkaXRNb2RlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDkuIrkuIvmloflj5jph4/mlrnms5VcclxuICAgICAqIEBwYXJhbSBjb250ZXh0RW50aXR5IOS4iuS4i+aWh+WPmOmHj+WunuS9k1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQ29udGV4dChjb250ZXh0RW50aXR5OiBWYXJFbnRpdHkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzID0gdGhpcy5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSAhPT0gY29udGV4dEVudGl0eS5rZXkpO1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMucHVzaChjb250ZXh0RW50aXR5KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg57O757uf5Y+Y6YeP5pa55rOVXHJcbiAgICAgKiBAcGFyYW0gc2Vzc2lvbkVudGl0eSDns7vnu5/lj5jph4/lrp7kvZNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFNlc3Npb24oc2Vzc2lvbkVudGl0eTogVmFyRW50aXR5KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LnNlc3Npb25FbnRpdGllcyA9IHRoaXMuZXhwckVudGl0eS5zZXNzaW9uRW50aXRpZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5rZXkgIT09IHNlc3Npb25FbnRpdHkua2V5KTtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc2Vzc2lvbkVudGl0aWVzLnB1c2goc2Vzc2lvbkVudGl0eSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOWHveaVsOaWueazlVxyXG4gICAgICogQHBhcmFtIGZ1bmNFbnRpdHkg5Ye95pWw5a6e5L2TICAgICAgICAgICAgICAgICAgICAgICAhISHlvoXlpITnkIbvvJrkv67mlLlGdW5jRW50aXR5LS0tPkZ1bmN0aW9uRW50aXR5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRGdW5jKGZ1bmNFbnRpdHk6IEZ1bmNFbnRpdHkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuZnVuY0VudGl0aWVzID0gdGhpcy5leHByRW50aXR5LmZ1bmNFbnRpdGllcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSAhPT0gZnVuY0VudGl0eS5rZXkpO1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5mdW5jRW50aXRpZXMucHVzaChmdW5jRW50aXR5KTtcclxuICAgIH1cclxuICAgIC8qKipcclxuICAgICAqIOa3u+WKoOWHveaVsOWIl+ihqFxyXG4gICAgICogQHBhcmFtIGZ1bmNMaXN0IOWHveaVsGpzb27liJfooahcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEZ1bmNzKGZ1bmNMaXN0OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZnVuY3MgPSBKU09OLnBhcnNlKGZ1bmNMaXN0KSBhcyBGdW5jRW50aXRpZXM7XHJcbiAgICAgICAgZnVuY3MuZnVuY3MuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leHByRW50aXR5LmZ1bmNFbnRpdGllcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpooTnva7ooajovr7lvI9cclxuICAgICAqIEBwYXJhbSB0ZXh0IOihqOi+vuW8j+aWh+acrFxyXG4gICAgICogMe+8mnRleHTkuLrohJrmnKzooajovr7lvI/vvIzpnIDopoHlhYhBbnRscjTop6PmnpBcclxuICAgICAqIDLvvJpcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEV4cHJlc3Npb25UZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0RW50aXR5ID0gSlNPTi5wYXJzZSh0ZXh0KSBhcyBFeHByZXNzaW9uRW50aXR5O1xyXG4gICAgICAgICAgICBpZiAoISh0ZXh0RW50aXR5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHByRW50aXR5LmV4cHIgPSB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRleHRFbnRpdHkuZXhwcikge1xyXG4gICAgICAgICAgICAgICAgLy/liqDovb1BbnRscjTlt6XlhbdcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dFN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbS5JbnB1dFN0cmVhbSh0ZXh0RW50aXR5LmV4cHIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxleGVyID0gbmV3IEphdmFTY3JpcHRMZXhlci5KYXZhU2NyaXB0TGV4ZXIoaW5wdXRTdHJlYW0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRva2VucyA9IG5ldyBDb21tb25Ub2tlblN0cmVhbS5Db21tb25Ub2tlblN0cmVhbShsZXhlcik7XHJcbiAgICAgICAgICAgICAgICB0b2tlbnMuZmlsbCgpO1xyXG4gICAgICAgICAgICAgICAgLy90b2tlbnPliIfliIbnmoRqc+aWh+acrOaKveWPluWIsGFycmF55LitXHJcbiAgICAgICAgICAgICAgICBsZXQgYXJyYXkgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0b2tlbnMudG9rZW5zLmxlbmd0aCAtIDE7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJheVtpbmRleF0gPSB0b2tlbnMudG9rZW5zW2luZGV4XS50ZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/pgY3ljoZhcnJheeeahGpz5paH5pys77yM5q+P5LiqanPmlofmnKzpgY3ljoZ0b2tlbkl0ZW1z5p+l5om+5a+55bqU55qE6K+t5LmJ5YyW5paH5pys77yM5bCB6KOF5Li6c3RyXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnJheS5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKChhcnJheVtpbmRleF0gPT0gXCJEZWZhdWx0RnVuY3Rpb25cIikgfHwgKGFycmF5W2luZGV4XSA9PSBcIk1hdGhcIikpICYmIChhcnJheVtpbmRleCArIDFdID09IFwiLlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFycmF5W2luZGV4XSA9PSBcIi5cIiAmJiAoYXJyYXlbaW5kZXggLSAxXSA9PSBcIkRlZmF1bHRGdW5jdGlvblwiIHx8IGFycmF5W2luZGV4IC0gMV0gPT0gXCJNYXRoXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2V5Liq5YWD57Sg6K6h5pWw5ZmoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+mBjeWOhuS4iuS4i+aWh+WPmOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVtpbmRleF0gPT0gKFwiXFxcIlwiICsgdGhpcy5leHByRW50aXR5LmNvbnRleHRFbnRpdGllc1tpXS5rZXkgKyBcIlxcXCJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyICsgXCJcXFwiXCIgKyB0aGlzLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzW2ldLm5hbWUgKyBcIlxcXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6YGN5Y6Gc2Vzc2lvbuWPmOmHj1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5leHByRW50aXR5LnNlc3Npb25FbnRpdGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVtpbmRleF0gPT0gKFwiXFxcIlwiICsgdGhpcy5leHByRW50aXR5LnNlc3Npb25FbnRpdGllc1tpXS5rZXkgKyBcIlxcXCJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyICsgXCJcXFwiXCIgKyB0aGlzLmV4cHJFbnRpdHkuc2Vzc2lvbkVudGl0aWVzW2ldLm5hbWUgKyBcIlxcXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpgY3ljobmlbDmja7vvIjmmoLml7blhYjlsY/olL3vvIlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5leHByRW50aXR5LnNjaGVtYU1hcC5mb3JFYWNoKGE9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIGZvcihsZXQgaj0wO2o8YS5lbnRpdHlTZXRzWzBdLmxlbmd0aDtqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICBpZihhcnJheVtpbmRleF09PWEuZW50aXR5VHlwZXNbMF0ucHJvcGVydGllc1tqXS5kZXNjcmlwdGlvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgYXJyYXlbaW5kZXhdPWEuZW50aXR5VHlwZXNbMF0ucHJvcGVydGllc1tqXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZihhcnJheVtpbmRleF09PWEuZW50aXR5U2V0c1swXS5uYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgYXJyYXlbaW5kZXhdPWEuZW50aXR5U2V0c1swXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RyPXN0cithcnJheVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIG51bT0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgZm9yKGxldCBqPTA7ajxhLmVudGl0eVR5cGVzWzBdLnByb3BlcnRpZXMubGVuZ3RoO2orKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGlmKGFycmF5W2luZGV4XT09YS5lbnRpdHlUeXBlc1swXS5wcm9wZXJ0aWVzW2pdLm5hbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFycmF5W2luZGV4XT1hLmVudGl0eVR5cGVzWzBdLnByb3BlcnRpZXNbal0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgc3RyPXN0cithcnJheVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbnVtPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6K6h5pWw5ZmobnVt77ya5aaC5p6c6YGN5Y6GYWxsRnVuY3Rpb25z5rKh5om+5Yiw5a+55bqU5a2X5q6177yM5YiZ55u05o6l5ou85o6lKG51bT0wKe+8m+WQpuWImeabv+aNoihudW09MSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWxsRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PSB0aGlzLmFsbEZ1bmN0aW9uc1tpXS5rZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxsRnVuY3Rpb25zW2ldLnR5cGUgIT0gXCJBZHZhbmNlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyB0aGlzLmFsbEZ1bmN0aW9uc1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c6K6h5pWw5Zmo5Li6MO+8jOivgeaYjuayoeacieivreS5ieWMluWMuemFjeOAguaYvuekuuWOn+Wni+aVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ciArIGFycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwckVudGl0eS5leHByID0gc3RyO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRFbnRpdHkuc2V4cHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc2V4cHIgPSB0ZXh0RW50aXR5LnNleHByO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5HZXRVbkNhbWVsUGFyc2UodGV4dEVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuZXhwciA9IHRleHRFbnRpdHkuZXhwcjtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0RW50aXR5LnNleHByKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHByRW50aXR5LnNleHByID0gdGV4dEVudGl0eS5zZXhwcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5leHByRW50aXR5LmV4cHIgPSB0ZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aKE572uU2NoZW1hXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBzY2hlbWHlkI3np7BcclxuICAgICAqIEBwYXJhbSBzY2hlbWEgc2NoZW1h5a6e5L2T57G7XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRTY2hlbWEobmFtZTogc3RyaW5nLCBzY2hlbWE6IFNjaGVtYSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBJbnB1dCBTY2hlbWEgTmFtZSFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhpcy5leHByRW50aXR5LnNjaGVtYU1hcC5zZXQobmFtZSwgc2NoZW1hKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5rOo5YWl5a6e5L2TXHJcbiAgICAgKiBAcGFyYW0gbmFtZSDms6jlhaXlrp7kvZPlkI0s6buY6K6k5Li6dHlwZU5hbWVJblNjaGVtYVxyXG4gICAgICogQHBhcmFtIHNjaGVtYU5hbWUg5rOo5YWl5a6e5L2T5omA5Zyo55qEc2NoZW1h5ZCN77yM6buY6K6k5Li6Q29tbW9uT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gdHlwZU5hbWVJblNjaGVtYSDms6jlhaXlrp7kvZPlnKhzY2hlbWHkuK3nmoTlkI3np7BcclxuICAgICAqIEBwYXJhbSBpbmplY3RlZFR5cGUg5rOo5YWl5a6e5L2T55qE57G75Z6L77yM6buY6K6k5Li6RW50aXR5VHlwZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkSW5qZWN0ZWRFbnRpdHkobmFtZTogc3RyaW5nLCBzY2hlbWFOYW1lOiBzdHJpbmcgPSBcIkNvbW1vbk9iamVjdFwiLCB0eXBlTmFtZUluU2NoZW1hOiBzdHJpbmcsIGluamVjdGVkVHlwZTogSW5qZWN0ZWRUeXBlID0gSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpOiB2b2lkIHtcclxuICAgICAgICAvL+aehOmAoOazqOWFpeWunuS9k+WvueixoVxyXG4gICAgICAgIGxldCBpbmplY3RlZEVudGl0eSA9IG5ldyBJbmplY3RlZEVudGl0eSgpO1xyXG4gICAgICAgIC8v6Iul5rOo5YWl55qE5a6e5L2T5ZCN5Li656m677yM5YiZ6buY6K6k5Li65rOo5YWl5a6e5L2T5Zyoc2NoZW1h5Lit55qE5ZCN56ewXHJcbiAgICAgICAgaW5qZWN0ZWRFbnRpdHkubmFtZSA9IG5hbWUgPyBuYW1lIDogdHlwZU5hbWVJblNjaGVtYTtcclxuICAgICAgICBpbmplY3RlZEVudGl0eS5zY2hlbWFOYW1lID0gc2NoZW1hTmFtZTtcclxuICAgICAgICBpbmplY3RlZEVudGl0eS5pbmplY3RlZE5hbWUgPSB0eXBlTmFtZUluU2NoZW1hO1xyXG4gICAgICAgIGluamVjdGVkRW50aXR5LmluamVjdGVkVHlwZSA9IGluamVjdGVkVHlwZTtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuaW5qZWN0ZWRFbnRpdGllcyA9IHRoaXMuZXhwckVudGl0eS5pbmplY3RlZEVudGl0aWVzLmZpbHRlcihpdGVtID0+IGl0ZW0ubmFtZSAhPT0gaW5qZWN0ZWRFbnRpdHkubmFtZSk7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LmluamVjdGVkRW50aXRpZXMucHVzaChpbmplY3RlZEVudGl0eSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmihOe9rkNEVFxyXG4gICAgICogQHBhcmFtIGdzcENEVHMgQ0RU6ZuG5ZCIXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDRFQoZ3NwQ0RUczogR3NwQ29tbW9uRGF0YVR5cGVbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBzY2hlbWEgPSBuZXcgU2NoZW1hKCk7XHJcbiAgICAgICAgLy/oi6VzY2hlbWFNYXDkuK3lrZjlnKhDRFTnmoRzY2hlbWFcclxuICAgICAgICBpZiAodGhpcy5leHByRW50aXR5LnNjaGVtYU1hcC5nZXQoXCJDRFRcIikpIHtcclxuICAgICAgICAgICAgc2NoZW1hID0gdGhpcy5leHByRW50aXR5LnNjaGVtYU1hcC5nZXQoXCJDRFRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5bCG5q+P5LiA5LiqQ0RU6L2s5YyW5Li6c2NoZW1h5YaF6YOo57uT5p6E5Lit55qEZW50aXR5VHlwZVxyXG4gICAgICAgIGdzcENEVHMuZm9yRWFjaChnc3BDRFQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5VHlwZSA9IHRoaXMuYWRhcHRlci5jb252ZXJ0Q0RUKGdzcENEVCk7XHJcbiAgICAgICAgICAgIHNjaGVtYS5lbnRpdHlUeXBlcy5wdXNoKGVudGl0eVR5cGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5bCG5ZCI5bm25ZCO55qEc2NoZW1h5pS+5YWl5YaF6YOo5LiK5LiL5paH5a6e5L2T5LitXHJcbiAgICAgICAgdGhpcy5hZGRTY2hlbWEoXCJDRFRcIiwgc2NoZW1hKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aKE572uQ09cclxuICAgICAqIEBwYXJhbSBjb21tb25PYmplY3QgQ0/pm4blkIgodG9kbylcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbW1vbk9iamVjdChjb21tb25PYmplY3Q6IEdTUENvbW1vbk9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBzY2hlbWE7XHJcbiAgICAgICAgLy/oi6VzY2hlbWFNYXDkuK3lrZjlnKhDT+eahHNjaGVtYVxyXG4gICAgICAgIGlmICh0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLmdldChcIkNvbW1vbk9iamVjdFwiKSkge1xyXG4gICAgICAgICAgICBzY2hlbWEgPSB0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLmdldChcIkNvbW1vbk9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBzY2hlbWEgPSBuZXcgU2NoZW1hO1xyXG4gICAgICAgIC8v5bCG5q+P5LiA5LiqQ0/ovazljJbkuLpzY2hlbWHlhoXpg6jnu5PmnoTkuK3nmoRlbnRpdHlUeXBlXHJcbiAgICAgICAgbGV0IGVudGl0eVR5cGVzID0gdGhpcy5hZGFwdGVyLmNvbnZlcnRDTyhjb21tb25PYmplY3QpO1xyXG4gICAgICAgIGVudGl0eVR5cGVzLmZvckVhY2goZW50aXR5VHlwZSA9PiB7XHJcbiAgICAgICAgICAgIHNjaGVtYS5lbnRpdHlUeXBlcy5wdXNoKGVudGl0eVR5cGUpO1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5U2V0ID0gbmV3IEVudGl0eVNldDtcclxuICAgICAgICAgICAgZW50aXR5U2V0Lm5hbWUgPSBlbnRpdHlUeXBlLm5hbWUgKyBcInNcIjtcclxuICAgICAgICAgICAgZW50aXR5U2V0LmVudGl0eVR5cGUgPSBlbnRpdHlUeXBlLm5hbWU7XHJcbiAgICAgICAgICAgIGVudGl0eVNldC5kZXNjcmlwdGlvbiA9IGVudGl0eVR5cGUuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHNjaGVtYS5lbnRpdHlTZXRzLnB1c2goZW50aXR5U2V0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/lsIblkIjlubblkI7nmoRzY2hlbWHmlL7lhaXlhoXpg6jkuIrkuIvmloflrp7kvZPkuK1cclxuICAgICAgICB0aGlzLmFkZFNjaGVtYShcIkNvbW1vbk9iamVjdFwiLCBzY2hlbWEpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpooTnva7luK7liqlcclxuICAgICAqIEBwYXJhbSBzaEVudGl0eSDluK7liqnmj4/ov7Dlrp7kvZNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFNtYXJ0SGVscEVudGl0eShzaEVudGl0eTogU21hcnRIZWxwRW50aXR5KSB7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LnNtYXJ0SGVscEVudGl0aWVzID0gdGhpcy5leHByRW50aXR5LnNtYXJ0SGVscEVudGl0aWVzLmZpbHRlcihpdGVtID0+IGl0ZW0uY29kZSAhPT0gc2hFbnRpdHkuY29kZSk7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LnNtYXJ0SGVscEVudGl0aWVzLnB1c2goc2hFbnRpdHkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFkZFdpbmRvd1dpZHRoKHdpbmRvd1dpZHRoOiBudW1iZXIpIHtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2xlYXJJbmplY3RlZEVudGl0eSgpIHtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuaW5qZWN0ZWRFbnRpdGllcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBHZXRVbkNhbWVsUGFyc2UoanNvbk9iajogYW55KSB7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIGpzb25PYmopIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoanNvbk9ialtrZXldKSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5HZXRVbkNhbWVsUGFyc2UoanNvbk9ialtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGVtcCA9IGpzb25PYmpba2V5XTtcclxuICAgICAgICAgICAgZGVsZXRlIChqc29uT2JqW2tleV0pO1xyXG4gICAgICAgICAgICBqc29uT2JqW3RoaXMuQ29udmVydFRvVW5jYW1lbChrZXkpXSA9IHRlbXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/lrZfnrKbkuLLlj43ovazmjaJDYW1lbFxyXG4gICAgcHJpdmF0ZSBDb252ZXJ0VG9VbmNhbWVsKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChpbnB1dC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBsZW4gPSBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBzdHJUZW1wID0gXCJcIjsgLy/mlrDlrZfnrKbkuLJcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0clRlbXAgKz0gaW5wdXRbaV0udG9Mb3dlckNhc2UoKTsgLy/nrKzkuIDkuKpcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0clRlbXAgKz0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN0clRlbXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOa3u+WKoE5ld1NjaGVtYVxyXG4gICAgICogQHBhcmFtIG5hbWUgTmV3U2NoZW1h55qE5ZCN56ewXHJcbiAgICAgKiBAcGFyYW0gbmV3U2NoZW1hIE5ld1NjaGVtYVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkTmV3U2NoZW1hKG5hbWU6IHN0cmluZywgbmV3U2NoZW1hOiBOZXdTY2hlbWEpIHtcclxuICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgSW5wdXQgTmV3U2NoZW1hIE5hbWUhXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHRoaXMuZXhwckVudGl0eS5uZXdTY2hlbWFNYXAuc2V0KG5hbWUsIG5ld1NjaGVtYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5re75YqgQ0/nmoTmlbDmja7vvIxOZXdTY2hlbWFcclxuICAgICAqIEBwYXJhbSBjb21tb25PYmplY3QgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDb21tb25PYmplY3RPZk5ld1NjaGVtYShjb21tb25PYmplY3Q6IEdTUENvbW1vbk9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBuZXdTY2hlbWE7XHJcbiAgICAgICAgLy/oi6VuZXdTY2hlbWFNYXDkuK3lrZjlnKhDT+eahG5ld1NjaGVtYVxyXG4gICAgICAgIGlmICh0aGlzLmV4cHJFbnRpdHkubmV3U2NoZW1hTWFwLmdldChcIkNvbW1vbk9iamVjdFwiKSkge1xyXG4gICAgICAgICAgICBuZXdTY2hlbWEgPSB0aGlzLmV4cHJFbnRpdHkubmV3U2NoZW1hTWFwLmdldChcIkNvbW1vbk9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBuZXdTY2hlbWEgPSBuZXcgTmV3U2NoZW1hO1xyXG4gICAgICAgIC8v5bCG5q+P5LiA5LiqQ0/ovazljJbkuLpzY2hlbWHlhoXpg6jnu5PmnoTkuK3nmoRlbnRpdHlUeXBlXHJcbiAgICAgICAgbGV0IGVudGl0eVR5cGVzID0gdGhpcy5hZGFwdGVyLmNvbnZlcnRDT09mTmV3U2NoZW1hKGNvbW1vbk9iamVjdCk7XHJcbiAgICAgICAgZW50aXR5VHlwZXMuZm9yRWFjaChlbnRpdHlUeXBlID0+IHtcclxuICAgICAgICAgICAgbmV3U2NoZW1hLmVudGl0eVR5cGVzLnB1c2goZW50aXR5VHlwZSk7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlTZXQgPSBuZXcgTmV3RW50aXR5U2V0O1xyXG4gICAgICAgICAgICBlbnRpdHlTZXQuY29kZSA9IGVudGl0eVR5cGUubmFtZSArIFwic1wiO1xyXG4gICAgICAgICAgICBlbnRpdHlTZXQuZW50aXR5VHlwZSA9IGVudGl0eVR5cGUuY29kZTtcclxuICAgICAgICAgICAgbmV3U2NoZW1hLmVudGl0eVNldHMucHVzaChlbnRpdHlTZXQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WwhuWQiOW5tuWQjueahG5ld1NjaGVtYeaUvuWFpeWGhemDqOS4iuS4i+aWh+WunuS9k+S4rVxyXG4gICAgICAgIHRoaXMuYWRkTmV3U2NoZW1hKFwiQ29tbW9uT2JqZWN0XCIsIG5ld1NjaGVtYSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDmt7vliqBVRFTnsbvlnovvvIxOZXdTY2hlbWFcclxuICAgICAqIEBwYXJhbSBnc3BDRFRzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQ0RUT2ZOZXdTY2hlbWEoZ3NwQ0RUczogR3NwQ29tbW9uRGF0YVR5cGVbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBuZXdTY2hlbWEgPSBuZXcgTmV3U2NoZW1hKCk7XHJcbiAgICAgICAgLy/oi6VzY2hlbWFNYXDkuK3lrZjlnKhDRFTnmoRzY2hlbWFcclxuICAgICAgICBpZiAodGhpcy5leHByRW50aXR5Lm5ld1NjaGVtYU1hcC5nZXQoXCJDRFRcIikpIHtcclxuICAgICAgICAgICAgbmV3U2NoZW1hID0gdGhpcy5leHByRW50aXR5Lm5ld1NjaGVtYU1hcC5nZXQoXCJDRFRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5bCG5q+P5LiA5LiqQ0RU6L2s5YyW5Li6c2NoZW1h5YaF6YOo57uT5p6E5Lit55qEZW50aXR5VHlwZVxyXG4gICAgICAgIGdzcENEVHMuZm9yRWFjaChnc3BDRFQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5VHlwZSA9IHRoaXMuYWRhcHRlci5jb252ZXJ0Q0RUT2ZOZXdTY2hlbWEoZ3NwQ0RUKTtcclxuICAgICAgICAgICAgbmV3U2NoZW1hLmVudGl0eVR5cGVzLnB1c2goZW50aXR5VHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lsIblkIjlubblkI7nmoRzY2hlbWHmlL7lhaXlhoXpg6jkuIrkuIvmloflrp7kvZPkuK1cclxuICAgICAgICB0aGlzLmFkZE5ld1NjaGVtYShcIkNEVFwiLCBuZXdTY2hlbWEpO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXX0=