/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, Injector, ComponentFactoryResolver } from '@angular/core';
import { MessagerService } from '@farris/ui-messager';
import { NotifyService } from '@farris/ui-notify';
import { ExpressioneditorComponent } from '../expressioneditor/expressioneditor.component';
import { BsModalService } from '@farris/ui-modal';
import { ExpressionEntity } from '../expression-entity';
import { ExpressionContextEntity } from '../expression-context-entity';
import { ComboData } from './entity/combodata';
import { InjectedType } from '../injected-type';
import { NavigationType } from '../schema';
export class ComputeRuleComponent {
    /**
     * @param {?} msgSer
     * @param {?} notifyService
     * @param {?} injector
     * @param {?} modalService
     * @param {?} compFactRes
     */
    constructor(msgSer, notifyService, injector, modalService, compFactRes) {
        this.msgSer = msgSer;
        this.notifyService = notifyService;
        this.injector = injector;
        this.modalService = modalService;
        this.compFactRes = compFactRes;
        this.expr = ""; //表达式串
        //表达式串
        this.result = new EventEmitter();
        this.closeModalEmitter = new EventEmitter();
        this.contextEntity = new ExpressionContextEntity; //表达式内部上下文
        //表达式内部上下文
        this.conditions = [
            {
                computeField: '',
                fieldName: '',
                value: '',
                lbracket: '(',
                rbracket: ')',
                relation: "&&",
                operator: "=="
            }
        ];
        this.advancedModalConfig = {
            title: "高级表达式",
            width: 1060,
            height: 610,
            showButtons: true
        };
        this.title = "条件表达式";
        this.height = 350;
        this.width = 750;
        this.LeftBracketData = ["(", "((", "(((", "(((("];
        this.RighttBracketData = [")", "))", ")))", "))))"];
        this.columnSizeData = [50, 130, 70, 100, 50, 50, 50];
        this.currentCondition = null;
        this.operators = [
            {
                label: "大于",
                value: ">"
            },
            {
                label: "大于等于",
                value: ">="
            },
            {
                label: "等于",
                value: "=="
            },
            {
                label: "不等于",
                value: "!="
            },
            {
                label: "小于",
                value: "<"
            },
            {
                label: "小于等于",
                value: "<="
            },
            {
                label: "等于(字符串)",
                value: "equal"
            },
            {
                label: "不等于(字符串)",
                value: "notequal"
            },
            {
                label: "为空",
                value: "==null"
            },
            {
                label: "不为空",
                value: "!=null"
            },
            {
                label: "包含",
                value: "Contains"
            },
            {
                label: "不包含",
                value: "NotContains"
            },
            {
                label: "开头是",
                value: "StartsWith"
            },
            {
                label: "开头不是",
                value: "NotStartsWith"
            },
            {
                label: "结尾是",
                value: "EndsWith"
            },
            {
                label: "结尾不是",
                value: "NotEndsWith"
            }
        ];
        this.relationData = [
            {
                label: "并且",
                value: "&&"
            },
            {
                label: "或者",
                value: "||"
            }
        ];
        this.notifies = {
            1: { type: 'success', msg: '表达式生成！' },
            2: { type: 'warning', msg: '请确保必填项填写完整！' },
        };
        this.entities = [];
        this.newItem = {
            computeField: '',
            fieldName: '',
            value: '',
            lbracket: '(',
            rbracket: ')',
            relation: "&&",
            operator: "=="
        };
    }
    // propertyList = {
    //   columns:[{
    //             "field": "name",
    //             "title": "名称",
    //             "width": 100,
    //             "hAlign": "left",
    //             "align": "left",
    //             "formatter": null
    //         }],
    //   items:[
    //           {
    //             "id": "order",
    //             "code": "order",
    //             "name": "订单",
    //             "treeInfo": {
    //                 // "isDetail": false,
    //                 "layer": 1,
    //                 "path": "0001"
    //             }
    //           },
    //           {
    //             "id": "orderItem01",
    //             "code": "orderItem01",
    //             "name": "订单明细",
    //             "treeInfo": {
    //                 // "isDetail": true,
    //                 "layer": 2,
    //                 "path": "00010001"
    //             },
    //             "parentHierarchyInfo": {
    //               // "isDetail": true,
    //               // "layer": 2,
    //               // "sequence": 1,
    //               "parentElement": "order"
    //             }
    //           },
    //           {
    //             "id": "orderItem02",
    //             "code": "orderItem02",
    //             "name": "订单明细02",
    //             "treeInfo": {
    //                 // "isDetail": true,
    //                 "layer": 2,
    //                 "path": "00010002"
    //             },
    //             "parentHierarchyInfo": {
    //               // "isDetail": true,
    //               // "layer": 2,
    //               // "sequence": 1,
    //               "parentElement": "order"
    //             }
    //           },
    //           {
    //             "id": "price",
    //             "code": "price",
    //             "name": "数量",
    //             "treeInfo": {
    //                 // "isDetail": true,
    //                 "layer": 3,
    //                 "path": "000100020001"
    //             },
    //             "parentHierarchyInfo": {
    //               // "isDetail": true,
    //               // "layer": 2,
    //               // "sequence": 1,
    //               "parentElement": "orderItem02"
    //             }
    //           }
    //       ],
    //   treeInfo: {
    //         "loadDataType": "all",
    //         "layerType": "pathcode",
    //         "dataField": "treeInfo",
    //         "pathField": "path",
    //         "layerField": "layer",
    //         "isDetailField": "isDetail",
    //         "onlySelectLeaf": false,
    //         "parentField": "parentElement",
    //         "treeDataIsInit": false
    //     },
    //   displayType: "TreeList"
    // }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.contextEntity.sexpr) {
            this.conditions = (/** @type {?} */ (JSON.parse(this.contextEntity.sexpr)));
        }
        if (this.contextEntity.injectedEntities && this.contextEntity.injectedEntities.length > 0) {
            this.OninitSchemaEntity(this.contextEntity.injectedEntities, this.contextEntity.schemaMap);
        }
        this.propertyList = {
            columns: [{
                    "field": "name",
                    "title": "名称",
                    "width": 100,
                    "hAlign": "left",
                    "align": "left",
                    "formatter": null
                }],
            items: this.entities,
            treeInfo: {
                "loadDataType": "all",
                "layerType": "pathcode",
                "dataField": "treeInfo",
                "pathField": "path",
                "layerField": "layer",
                "isDetailField": "isDetail",
                "onlySelectLeaf": false,
                "parentField": "parentElement",
                "treeDataIsInit": false
            },
            displayType: "TreeList"
        };
    }
    /**
     * @param {?} index
     * @return {?}
     */
    insert(index) {
        /** @type {?} */
        const _newItem = Object.assign({}, this.newItem);
        this.conditions.splice(index + 1, 0, _newItem);
        // if (index  === 0) {
        //     this.conditions.unshift(_newItem);
        // } else {
        //     this.conditions.splice(index+1, 0, _newItem);
        // }
        this.changeConditionList();
    }
    /**
     * @param {?} index
     * @return {?}
     */
    remove(index) {
        /** @type {?} */
        let num = index + 1;
        this.msgSer.confirm('确认删除第' + num + '行数据?').subscribe((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            if (result) {
                if (index != 0) {
                    this.conditions.splice(index, 1);
                }
                else if (this.conditions.length > 1) {
                    this.conditions.splice(index, 1);
                }
                else {
                    this.conditions = [
                        {
                            computeField: '',
                            fieldName: '',
                            value: '',
                            lbracket: '(',
                            rbracket: ')',
                            relation: "&&",
                            operator: "=="
                        }
                    ];
                }
                this.changeConditionList();
                if (this.currentCondition) {
                    if (index === this.currentCondition.index) {
                        this.currentCondition = null;
                    }
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    onAddFilter() {
        // this.conditions = [...this.conditions, Object.assign({}, this.newCondition)];
        // this.changeConditionList();
    }
    /**
     * @return {?}
     */
    onClear() {
        // this.messagerService.question('确认要清空当前所有条件吗？', () => {
        //     this.conditions = [];
        //     this.changeConditionList();
        // });
    }
    /**
     * @return {?}
     */
    toTop() {
        if (this.currentCondition) {
            this.conditions.unshift(this.currentCondition.condition);
            this.conditions.splice(this.currentCondition.index + 1, 1);
            this.currentCondition.index = 0;
            this.changeConditionList();
        }
    }
    /**
     * @return {?}
     */
    toUp() {
        if (this.currentCondition) {
            /** @type {?} */
            const index = this.currentCondition.index;
            /** @type {?} */
            const tempArr = this.conditions.splice(index, 1);
            this.conditions.splice(index - 1, 0, ...tempArr);
            this.currentCondition.index = index - 1;
            this.changeConditionList();
        }
    }
    /**
     * @return {?}
     */
    toDown() {
        if (this.currentCondition) {
            /** @type {?} */
            const index = this.currentCondition.index;
            /** @type {?} */
            const tempArr = this.conditions.splice(index, 1);
            this.conditions.splice(index + 1, 0, ...tempArr);
            this.currentCondition.index = index + 1;
            this.changeConditionList();
        }
    }
    /**
     * @return {?}
     */
    toBottom() {
        if (this.currentCondition) {
            this.conditions.push(this.currentCondition.condition);
            this.conditions.splice(this.currentCondition.index, 1);
            this.currentCondition.index = this.conditions.length - 1;
            this.changeConditionList();
        }
    }
    /**
     * @private
     * @return {?}
     */
    changeConditionList() {
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    selected($event) {
        // console.log($event);
        this.currentCondition = $event;
    }
    /**
     * 打开高级表达式
     * @return {?}
     */
    openAdvancedExpression() {
        /** @type {?} */
        let that = this;
        this.openAdvancedExpr().then((/**
         * @param {?} expre
         * @return {?}
         */
        expre => {
            that.result.emit(JSON.stringify(expre));
        }));
        this.closeModalEmitter.emit("close");
    }
    /**
     * @return {?}
     */
    openAdvancedExpr() {
        /** @type {?} */
        let that = this;
        return new Promise((/**
         * @param {?} resolve
         * @return {?}
         */
        function (resolve) {
            /** @type {?} */
            const compFactory = that.compFactRes.resolveComponentFactory(ExpressioneditorComponent);
            /** @type {?} */
            const compRef = compFactory.create(that.injector);
            compRef.instance.expressionEntity = that.contextEntity;
            compRef.instance.expressionEntity.expr = that.convertExpr(that.conditions);
            /** @type {?} */
            let dialog = that.modalService.show(compRef, {
                title: "高级表达式",
                width: 1060,
                height: 610,
                buttons: [
                    { text: '保存', cls: 'btn btn-primary', handle: (/**
                         * @return {?}
                         */
                        () => {
                            compRef.instance.getExprs();
                            dialog.close();
                        }) },
                    { text: '取消', cls: 'btn btn-secondary', handle: (/**
                         * @return {?}
                         */
                        () => {
                            dialog.close();
                        }) }
                ],
                showButtons: true
            });
            compRef.instance.result.subscribe((/**
             * @param {?} expressionContent
             * @return {?}
             */
            (expressionContent) => {
                return resolve(expressionContent);
            }));
        }));
    }
    /**
     * 确认
     * @return {?}
     */
    confirm() {
        /** @type {?} */
        let expression = new ExpressionEntity();
        expression.expr = this.convertExpr(this.conditions);
        expression.sexpr = JSON.stringify(this.conditions);
        this.result.emit(JSON.stringify(expression));
        this.notifyService[this.notifies['1'].type]({
            msg: this.notifies['1'].msg
        });
        this.closeModalEmitter.emit("close");
    }
    /**
     * 重置
     * @return {?}
     */
    reset() {
        this.conditions = [
            {
                computeField: '',
                fieldName: '',
                value: '',
                lbracket: '(',
                rbracket: ')',
                relation: "&&",
                operator: "=="
            }
        ];
    }
    /**
     * 取消
     * @return {?}
     */
    cancle() {
        this.closeModalEmitter.emit("close");
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    isSelected($event) {
        if (this.currentCondition) {
            return this.currentCondition.index === $event;
        }
        return false;
    }
    /**
     * 转化为表达式串
     * @private
     * @param {?} conditions
     * @return {?}
     */
    convertExpr(conditions) {
        this.expr = "";
        if (conditions) {
            /** @type {?} */
            let count = 0;
            /** @type {?} */
            let operator = "";
            /** @type {?} */
            let length = conditions.length;
            conditions.forEach((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                count++;
                if (count < length) {
                    if (item.operator == "==" || item.operator == "!=" || item.operator == ">" ||
                        item.operator == ">=" || item.operator == "<" || item.operator == "<=") {
                        this.expr = this.expr + item.lbracket + item.computeField + item.operator + item.value + item.rbracket + item.relation;
                    }
                    else {
                        switch (item.operator) {
                            case "equal":
                                this.expr = this.expr + item.lbracket + item.computeField + "==\"" + item.value + "\"" + item.rbracket + item.relation;
                                break;
                            case "notequal":
                                this.expr = this.expr + item.lbracket + item.computeField + "!=\"" + item.value + "\"" + item.rbracket + item.relation;
                                break;
                            case "==null":
                                this.expr = this.expr + item.lbracket + item.computeField + "==null" + item.rbracket + item.relation;
                                break;
                            case "!=null":
                                this.expr = this.expr + item.lbracket + item.computeField + "!=null" + item.rbracket + item.relation;
                                break;
                            case "Contains":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.Contains(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                            case "NotContains":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotContains(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                            case "StartsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.StartsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                            case "NotStartsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotStartsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                            case "EndsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.EndsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                            case "NotEndsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotEndsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket + item.relation;
                                break;
                        }
                    }
                }
                else {
                    if (item.operator == "==" || item.operator == "!=" || item.operator == ">" ||
                        item.operator == ">=" || item.operator == "<" || item.operator == "<=") {
                        this.expr = this.expr + item.lbracket + item.computeField + item.operator + item.value + item.rbracket;
                    }
                    else {
                        switch (item.operator) {
                            case "equal":
                                this.expr = this.expr + item.lbracket + item.computeField + "==\"" + item.value + "\"" + item.rbracket;
                                break;
                            case "notequal":
                                this.expr = this.expr + item.lbracket + item.computeField + "!=\"" + item.value + "\"" + item.rbracket;
                                break;
                            case "==null":
                                this.expr = this.expr + item.lbracket + item.computeField + "==null" + item.rbracket;
                                break;
                            case "!=null":
                                this.expr = this.expr + item.lbracket + item.computeField + "!=null" + item.rbracket;
                                break;
                            case "Contains":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.Contains(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                            case "NotContains":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotContains(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                            case "StartsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.StartsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                            case "NotStartsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotStartsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                            case "EndsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.EndsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                            case "NotEndsWith":
                                this.expr = this.expr + item.lbracket + "DefaultFunction.NotEndsWith(" + item.computeField + ",\"" + item.value + "\")" + item.rbracket;
                                break;
                        }
                    }
                }
            }));
        }
        return this.expr;
    }
    //初始化Schema格式的Entity
    /**
     * @param {?} injectedEntities
     * @param {?} schema
     * @return {?}
     */
    OninitSchemaEntity(injectedEntities, schema) {
        if (injectedEntities && injectedEntities.length > 0) {
            this.entities = [];
            //实体显示禁忌表
            /** @type {?} */
            let navigatorMap = new Map();
            /** @type {?} */
            let numcount = 1;
            //解析每一个注入实体，将其转化为TreeNode
            injectedEntities.forEach((/**
             * @param {?} injectEntity
             * @return {?}
             */
            injectEntity => {
                //根据schema名称找到对应的schema
                /** @type {?} */
                let currentSchema = schema.get(injectEntity.schemaName);
                switch (injectEntity.injectedType) {
                    //注入的若为实体集
                    case InjectedType.EntitySet:
                        {
                            // //根据注入实体的名称找到对应的实体集
                            //let entitySet = currentSchema.entitySets.find(entitySet => entitySet.name == injectEntity.injectedName);
                            // //将找到的实体集转化为TreeNode
                            // entityTree = this.ConvertEntitySet(entitySet, currentSchema, navigatorMap);
                        }
                        ;
                        break;
                    //注入的若为实体类型
                    case InjectedType.EntityType:
                        {
                            /** @type {?} */
                            let entityType = currentSchema.entityTypes.find((/**
                             * @param {?} entityType
                             * @return {?}
                             */
                            entityType => entityType.name == injectEntity.injectedName));
                            this.ConvertEntityType(entityType, "", currentSchema, navigatorMap, 1, "", numcount);
                        }
                        ;
                        break;
                }
                numcount++;
            }));
        }
    }
    //实体集转化
    /**
     * @param {?} entitySet
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    ConvertEntitySet(entitySet, schema, navigatorMap) {
        // if (entitySet) {
        //   //将entityset转化为TreeNode结构用于展示
        //   let treeNode= new ComboData;
        //   treeNode.treeInfo.
        //   //将转化完成的实体集添加进禁忌表，防止循环转化
        //   navigatorMap.set(entitySet.name, InjectedType.EntitySet);
        //   //找到实体集对应的实体类型
        //   let entityType = schema.entityTypes.find(entityType => entityType.name == entitySet.entityType);
        //   //将entitytype转化为TreeNode结构用于展示
        //   this.ConvertEntityType(entityType, schema, navigatorMap).children.forEach(child => {
        //     treeNode.children.push(child);
        //   });
        //   return treeNode;
        //}
        //实体集为空或未定义则返回空
        //else return null;
    }
    //实体类型转化
    /**
     * @param {?} entityType
     * @param {?} parentId
     * @param {?} schema
     * @param {?} navigatorMap
     * @param {?} layer
     * @param {?} parentPath
     * @param {?} pathNum
     * @return {?}
     */
    ConvertEntityType(entityType, parentId, schema, navigatorMap, layer, parentPath, pathNum) {
        if (entityType) {
            /** @type {?} */
            let mainTreeNode = new ComboData;
            mainTreeNode.code = entityType.name;
            mainTreeNode.name = entityType.name;
            mainTreeNode.treeInfo.layer = layer;
            mainTreeNode.treeInfo.path = parentPath + this.getPath(pathNum);
            if (parentId) {
                mainTreeNode.id = parentId + "." + entityType.name;
                mainTreeNode.parentHierarchyInfo.parentElement = parentId;
            }
            else {
                mainTreeNode.id = entityType.name;
            }
            this.entities.push(mainTreeNode);
            //将转化的entitytype添加进禁忌表
            navigatorMap.set(entityType.name + entityType.id, InjectedType.EntityType);
            //将每个属性转化为每个TreeNode
            /** @type {?} */
            let propertyNum = 1;
            entityType.properties.forEach((/**
             * @param {?} property
             * @return {?}
             */
            property => {
                /** @type {?} */
                let propertyTree = new ComboData;
                propertyTree.id = mainTreeNode.id + "." + property.name;
                propertyTree.code = property.name;
                propertyTree.name = property.name;
                propertyTree.treeInfo.layer = layer + 1;
                propertyTree.treeInfo.path = mainTreeNode.treeInfo.path + this.getPath(propertyNum);
                propertyNum++;
                propertyTree.parentHierarchyInfo.parentElement = mainTreeNode.id;
                this.entities.push(propertyTree);
            }));
            entityType.navigationProperties.forEach((/**
             * @param {?} navigationProperty
             * @return {?}
             */
            navigationProperty => {
                //判断是否导航属性对应的名称在禁忌表中
                if (!(navigatorMap.get(navigationProperty.name + navigationProperty.navigationId))) {
                    if (navigationProperty.type == NavigationType.EntitySet) {
                        // //若导航属性类型为实体集
                        // let entitySet = schema.entitySets.find(entitySet => entitySet.name == navigationProperty.name);
                        // treeNode.children.push(this.ConvertEntitySet(entitySet, schema, navigatorMap));
                    } //若为实体类型
                    else if (navigationProperty.type == NavigationType.EntityType) {
                        /** @type {?} */
                        let entityType = schema.entityTypes.find((/**
                         * @param {?} entitytype
                         * @return {?}
                         */
                        entitytype => entitytype.id == navigationProperty.navigationId && entitytype.name == navigationProperty.name));
                        this.ConvertEntityType(entityType, mainTreeNode.id, schema, navigatorMap, layer + 1, mainTreeNode.treeInfo.path, propertyNum + 1);
                    }
                }
                //若导航属性在禁忌表中
                else {
                    /** @type {?} */
                    let navigatortree = new ComboData;
                    navigatortree.id = mainTreeNode.id + "." + navigationProperty.name;
                    navigatortree.code = navigationProperty.name;
                    navigatortree.name = navigationProperty.name;
                    navigatortree.treeInfo.layer = layer + 1;
                    navigatortree.treeInfo.path = mainTreeNode.treeInfo.path + this.getPath(propertyNum);
                    navigatortree.parentHierarchyInfo.parentElement = mainTreeNode.id;
                    this.entities.push(navigatortree);
                }
                propertyNum++;
            }));
        }
        //若entitytype为空或未定义
        else
            return null;
    }
    /**
     * @private
     * @param {?} path
     * @return {?}
     */
    getPath(path) {
        /** @type {?} */
        let num = "";
        if (path < 10) {
            num = "000" + path;
        }
        else if (10 <= path && path < 100) {
            num = "00" + path;
        }
        else if (100 <= path && path < 1000) {
            num = "0" + path;
        }
        else {
            num = path + "";
        }
        return num;
    }
}
ComputeRuleComponent.decorators = [
    { type: Component, args: [{
                selector: 'svc-compute-rule',
                template: "    <div style=\"background: #f0ffffe0;width: 100%;\">\r\n        <button type=\"button\" title=\"\u4E0A\u79FB\" class=\"k-button k-button-icon k-flat\" (click)=\"toUp()\"><span class=\"k-icon k-i-arrow-up\"></span></button>\r\n        <button type=\"button\" title=\"\u4E0B\u79FB\" class=\"k-button k-button-icon k-flat\" (click)=\"toDown()\"><span class=\"k-icon k-i-arrow-down\"></span></button>\r\n        <button type=\"button\" title=\"\u7F6E\u9876\" class=\"k-button k-button-icon k-flat\" (click)=\"toTop()\"><span class=\"k-icon k-i-arrow-end-up\"></span></button>\r\n        <button type=\"button\" title=\"\u57AB\u5E95\" class=\"k-button k-button-icon k-flat\" (click)=\"toBottom()\"><span class=\"k-icon k-i-arrow-end-down\"></span></button>\r\n    </div>\r\n    <div class=\"table-header \">\r\n        <table class=\"table table-bordered\" style=\"margin-bottom: 0\">\r\n            <colgroup>\r\n                <col *ngFor=\"let s of columnSizeData\" [style.width]=\" s + 'px'\">\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th align=\"center\"><b>&nbsp;\u5DE6\u62EC\u53F7</b></th>\r\n                    <th align=\"center\"><b>&nbsp;\u6570\u636E</b></th>\r\n                    <th align=\"center\"><b>&nbsp;\u6BD4\u8F83\u7B26</b></th>\r\n                    <th align=\"center\"><b>&nbsp;\u503C</b></th>\r\n                    <th align=\"center\"><b>&nbsp;\u53F3\u62EC\u53F7</b></th>\r\n                    <th align=\"center\"><b>&nbsp;\u5173\u7CFB</b></th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n        </table>\r\n    </div>\r\n    <div class=\"table-body flex-fill\" style=\"overflow: hidden\" #tablebodybox>\r\n        <perfect-scrollbar [config]=\"{}\">\r\n            <table class=\"table table-bordered\">\r\n                <colgroup>\r\n                    <col *ngFor=\"let s of columnSizeData\" [style.width]=\" s + 'px'\">\r\n                </colgroup>\r\n                <tbody>\r\n                    <tr *ngFor=\"let condition of conditions; let index=index;\" (click)=\"selected({'index':index, 'condition': condition})\" [class.selected]=\"isSelected(index)\">\r\n                        <td>\r\n                            <select class=\"form-control filter-select\" [(ngModel)]=\"condition.lbracket\" name=\"lbracket\">\r\n                            <option *ngFor=\"let item of LeftBracketData\" [value]=\"item\">{{ item }}</option>\r\n                            </select>\r\n                        </td>\r\n              <td>\r\n                  <farris-combo-lookup\r\n                    [(ngModel)]=\"condition.computeField\"\r\n                    [idField]=\"'id'\"\r\n                    [textField]=\"'id'\"\r\n                    [displayType]=\"'LOOKUPTREELIST'\"\r\n                    [data]=\"propertyList\"\r\n                  ></farris-combo-lookup>\r\n              </td>\r\n              <td>\r\n                  <select class=\"form-control filter-select\" [(ngModel)]=\"condition.operator\" name=\"operator\">\r\n                      <option *ngFor=\"let item of operators\" [value]=\"item.value\">{{item.label}}</option>\r\n                  </select>\r\n              </td>\r\n              <td>\r\n                  <input type=\"text\" style=\"width:100%\" placeholder=\"\" class=\"k-textbox\" name=\"value\" [(ngModel)]=\"condition.value\">\r\n              </td>\r\n              <td>\r\n                  <select class=\"form-control filter-select\"  [(ngModel)]=\"condition.rbracket\" name=\"rbracket\">\r\n                      <option *ngFor=\"let item of RighttBracketData\" [value]=\"item\">{{ item }}</option>\r\n                  </select>\r\n              </td>\r\n              <td>\r\n                  <select class=\"form-control filter-select\" [(ngModel)]=\"condition.relation\" name=\"relation\">\r\n                    <option *ngFor=\"let item of relationData\" [value]=\"item.value\">{{ item.label }}</option>\r\n                  </select>\r\n              </td>\r\n              <td>\r\n                <button type=\"button\" (click)=\"insert(index)\" class=\"k-button k-button-icon k-flat\"><span class=\"k-icon k-i-plus\"></span></button>\r\n                <button type=\"button\" (click)=\"remove(index)\" class=\"k-button k-button-icon k-flat\"><span class=\"k-icon k-i-delete\"></span></button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n      </table>\r\n  </perfect-scrollbar>\r\n</div>\r\n<div class=\"modal-footer footer\">\r\n    <a class=\"mr-auto\" href=\"javascript: void(0);\" (click)=\"openAdvancedExpression()\" > \u9AD8\u7EA7\u8868\u8FBE\u5F0F \uFF1E</a>\r\n    <button type=\"button\" class=\"btn f-btn-mr btn-primary\" (click)=\"confirm()\">\u786E\u5B9A</button>\r\n    <button type=\"button\" class=\"k-button k-button-icon k-flat\" (click)=\"reset()\">\u91CD\u7F6E</button>\r\n    <button type=\"button\" class=\"k-button k-button-icon k-flat\" (click)=\"cancle()\">\u53D6\u6D88</button>\r\n</div>\r\n\r\n\r\n",
                styles: [".filter-select{width:100%;padding-left:0;padding-right:0}.selected{background:#c2e4ff}.footer{position:absolute;bottom:0;left:0;right:0;justify-content:flex-start}"]
            }] }
];
/** @nocollapse */
ComputeRuleComponent.ctorParameters = () => [
    { type: MessagerService },
    { type: NotifyService },
    { type: Injector },
    { type: BsModalService },
    { type: ComponentFactoryResolver }
];
ComputeRuleComponent.propDecorators = {
    result: [{ type: Output }],
    closeModalEmitter: [{ type: Output }],
    contextEntity: [{ type: Input }],
    conditions: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    ComputeRuleComponent.prototype.expr;
    /** @type {?} */
    ComputeRuleComponent.prototype.result;
    /** @type {?} */
    ComputeRuleComponent.prototype.closeModalEmitter;
    /** @type {?} */
    ComputeRuleComponent.prototype.contextEntity;
    /** @type {?} */
    ComputeRuleComponent.prototype.conditions;
    /** @type {?} */
    ComputeRuleComponent.prototype.advancedModalConfig;
    /** @type {?} */
    ComputeRuleComponent.prototype.title;
    /** @type {?} */
    ComputeRuleComponent.prototype.height;
    /** @type {?} */
    ComputeRuleComponent.prototype.width;
    /** @type {?} */
    ComputeRuleComponent.prototype.LeftBracketData;
    /** @type {?} */
    ComputeRuleComponent.prototype.RighttBracketData;
    /** @type {?} */
    ComputeRuleComponent.prototype.columnSizeData;
    /** @type {?} */
    ComputeRuleComponent.prototype.currentCondition;
    /** @type {?} */
    ComputeRuleComponent.prototype.operators;
    /** @type {?} */
    ComputeRuleComponent.prototype.relationData;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.notifies;
    /** @type {?} */
    ComputeRuleComponent.prototype.entities;
    /** @type {?} */
    ComputeRuleComponent.prototype.propertyList;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.newItem;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.msgSer;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.notifyService;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.modalService;
    /**
     * @type {?}
     * @private
     */
    ComputeRuleComponent.prototype.compFactRes;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcHV0ZS1ydWxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bnc3Atc3ZjL2V4cHJlc3Npb24vIiwic291cmNlcyI6WyJsaWIvY29tcHV0ZS1ydWxlL2NvbXB1dGUtcnVsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFhLE1BQU0sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRzlILE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbEQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDM0YsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUMvQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFaEQsT0FBTyxFQUFzQixjQUFjLEVBQWEsTUFBTSxXQUFXLENBQUM7QUFNMUUsTUFBTSxPQUFPLG9CQUFvQjs7Ozs7Ozs7SUFDL0IsWUFBb0IsTUFBdUIsRUFBUyxhQUE0QixFQUN4RSxRQUFrQixFQUNsQixZQUE0QixFQUM1QixXQUFxQztRQUh6QixXQUFNLEdBQU4sTUFBTSxDQUFpQjtRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQ3hFLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsaUJBQVksR0FBWixZQUFZLENBQWdCO1FBQzVCLGdCQUFXLEdBQVgsV0FBVyxDQUEwQjtRQUM3QyxTQUFJLEdB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Q0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztxQkFDL0Y7eUJBRUQ7d0JBQ0UsUUFBTyxJQUFJLENBQUMsUUFBUSxFQUNwQjs0QkFDRSxLQUFLLE9BQU87Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBRSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRSxJQUFJLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNoSCxLQUFLLFVBQVU7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBRSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRSxJQUFJLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNuSCxLQUFLLFFBQVE7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBRSxRQUFRLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNoRyxLQUFLLFFBQVE7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBRSxRQUFRLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNoRyxLQUFLLFVBQVU7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsMkJBQTJCLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUMzSSxLQUFLLGFBQWE7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsOEJBQThCLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNqSixLQUFLLFlBQVk7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsNkJBQTZCLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUMvSSxLQUFLLGVBQWU7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsZ0NBQWdDLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUNySixLQUFLLFVBQVU7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsMkJBQTJCLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztnQ0FBQSxNQUFNOzRCQUMzSSxLQUFLLGFBQWE7Z0NBQUMsSUFBSSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEdBQUMsOEJBQThCLEdBQUMsSUFBSSxDQUFDLFlBQVksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLEtBQUssR0FBQyxLQUFLLEdBQUMs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O0lBQ0Ysd0NBR0U7O0lBQ0Ysd0NBQVk7O0lBQ1osNENBQWE7Ozs7O0lBc0hiLHVDQVFBOzs7OztJQWhQWSxzQ0FBK0I7Ozs7O0lBQUMsNkNBQW9DOzs7OztJQUNoRix3Q0FBMEI7Ozs7O0lBQzFCLDRDQUFvQzs7Ozs7SUFDcEMsMkNBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbmplY3RvciwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbmRpdGlvblJ1bGUgfSBmcm9tICcuL2VudGl0eS9jb25kaXRpb25ydWxlJztcclxuaW1wb3J0IHsgRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS1kaWFsb2cnO1xyXG5pbXBvcnQgeyBNZXNzYWdlclNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1lc3NhZ2VyJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBOb3RpZnlTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1ub3RpZnknO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uZWRpdG9yQ29tcG9uZW50IH0gZnJvbSAnLi4vZXhwcmVzc2lvbmVkaXRvci9leHByZXNzaW9uZWRpdG9yLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEJzTW9kYWxTZXJ2aWNlIH0gZnJvbSAnQGZhcnJpcy91aS1tb2RhbCc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25FbnRpdHkgfSBmcm9tICcuLi9leHByZXNzaW9uLWVudGl0eSc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25Db250ZXh0RW50aXR5IH0gZnJvbSAnLi4vZXhwcmVzc2lvbi1jb250ZXh0LWVudGl0eSc7XHJcbmltcG9ydCB7IENvbWJvRGF0YSB9IGZyb20gJy4vZW50aXR5L2NvbWJvZGF0YSc7XHJcbmltcG9ydCB7IEluamVjdGVkVHlwZSB9IGZyb20gJy4uL2luamVjdGVkLXR5cGUnO1xyXG5pbXBvcnQgeyBJbmplY3RlZEVudGl0eSB9IGZyb20gJy4uL2luamVjdGVkLWVudGl0eSc7XHJcbmltcG9ydCB7IFNjaGVtYSwgRW50aXR5VHlwZSwgTmF2aWdhdGlvblR5cGUsIEVudGl0eVNldCB9IGZyb20gJy4uL3NjaGVtYSc7XHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnc3ZjLWNvbXB1dGUtcnVsZScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbXB1dGUtcnVsZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vY29tcHV0ZS1ydWxlLmNvbXBvbmVudC5jc3MnXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIENvbXB1dGVSdWxlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1zZ1NlcjogTWVzc2FnZXJTZXJ2aWNlLHByaXZhdGUgbm90aWZ5U2VydmljZTogTm90aWZ5U2VydmljZSxcclxuICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvcixcclxuICBwcml2YXRlIG1vZGFsU2VydmljZTogQnNNb2RhbFNlcnZpY2UsXHJcbiAgcHJpdmF0ZSBjb21wRmFjdFJlczogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKXt9XHJcbiAgZXhwcjpzdHJpbmc9XCJcIjsvL+ihqOi+vuW8j+S4slxyXG4gIEBPdXRwdXQoKSByZXN1bHQgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcclxuICBAT3V0cHV0KCkgY2xvc2VNb2RhbEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBASW5wdXQoKSBjb250ZXh0RW50aXR5OkV4cHJlc3Npb25Db250ZXh0RW50aXR5ID0gbmV3IEV4cHJlc3Npb25Db250ZXh0RW50aXR5Oy8v6KGo6L6+5byP5YaF6YOo5LiK5LiL5paHXHJcbiAgQElucHV0KCkgY29uZGl0aW9uczogQ29uZGl0aW9uUnVsZVtdID0gW1xyXG4gICAge1xyXG4gICAgICBjb21wdXRlRmllbGQ6ICcnLFxyXG4gICAgICBmaWVsZE5hbWU6JycsXHJcbiAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgbGJyYWNrZXQ6ICcoJyxcclxuICAgICAgcmJyYWNrZXQ6ICcpJyxcclxuICAgICAgcmVsYXRpb246IFwiJiZcIixcclxuICAgICAgb3BlcmF0b3I6IFwiPT1cIlxyXG4gICAgfVxyXG4gIF07XHJcbiAgYWR2YW5jZWRNb2RhbENvbmZpZyA9IHtcclxuICAgIHRpdGxlOiBcIumrmOe6p+ihqOi+vuW8j1wiLFxyXG4gICAgd2lkdGg6IDEwNjAsXHJcbiAgICBoZWlnaHQ6IDYxMCxcclxuICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgfTtcclxuXHJcbiAgdGl0bGU6c3RyaW5nID0gXCLmnaHku7booajovr7lvI9cIjtcclxuICBoZWlnaHQ6bnVtYmVyPTM1MDtcclxuICB3aWR0aDpudW1iZXI9NzUwO1xyXG4gIExlZnRCcmFja2V0RGF0YTpzdHJpbmdbXSA9IFtcIihcIixcIigoXCIsXCIoKChcIixcIigoKChcIl07XHJcbiAgUmlnaHR0QnJhY2tldERhdGE6c3RyaW5nW10gPSBbXCIpXCIsXCIpKVwiLFwiKSkpXCIsXCIpKSkpXCJdO1xyXG4gIGNvbHVtblNpemVEYXRhID0gWzUwLCAxMzAsIDcwLCAxMDAsIDUwLCA1MCw1MF07XHJcbiAgY3VycmVudENvbmRpdGlvbjogeyBpbmRleDogbnVtYmVyLCBjb25kaXRpb246IENvbmRpdGlvblJ1bGUgfSA9IG51bGw7XHJcbiAgb3BlcmF0b3JzOntsYWJlbDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nfVtdID0gW1xyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuWkp+S6jlwiLFxyXG4gICAgICB2YWx1ZTpcIj5cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbGFiZWw6XCLlpKfkuo7nrYnkuo5cIixcclxuICAgICAgdmFsdWU6XCI+PVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuetieS6jlwiLFxyXG4gICAgICB2YWx1ZTpcIj09XCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi5LiN562J5LqOXCIsXHJcbiAgICAgIHZhbHVlOlwiIT1cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbGFiZWw6XCLlsI/kuo5cIixcclxuICAgICAgdmFsdWU6XCI8XCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi5bCP5LqO562J5LqOXCIsXHJcbiAgICAgIHZhbHVlOlwiPD1cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbGFiZWw6XCLnrYnkuo4o5a2X56ym5LiyKVwiLFxyXG4gICAgICB2YWx1ZTpcImVxdWFsXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi5LiN562J5LqOKOWtl+espuS4silcIixcclxuICAgICAgdmFsdWU6XCJub3RlcXVhbFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuS4uuepulwiLFxyXG4gICAgICB2YWx1ZTpcIj09bnVsbFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuS4jeS4uuepulwiLFxyXG4gICAgICB2YWx1ZTpcIiE9bnVsbFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuWMheWQq1wiLFxyXG4gICAgICB2YWx1ZTpcIkNvbnRhaW5zXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi5LiN5YyF5ZCrXCIsXHJcbiAgICAgIHZhbHVlOlwiTm90Q29udGFpbnNcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbGFiZWw6XCLlvIDlpLTmmK9cIixcclxuICAgICAgdmFsdWU6XCJTdGFydHNXaXRoXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi5byA5aS05LiN5pivXCIsXHJcbiAgICAgIHZhbHVlOlwiTm90U3RhcnRzV2l0aFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIue7k+WwvuaYr1wiLFxyXG4gICAgICB2YWx1ZTpcIkVuZHNXaXRoXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOlwi57uT5bC+5LiN5pivXCIsXHJcbiAgICAgIHZhbHVlOlwiTm90RW5kc1dpdGhcIlxyXG4gICAgfVxyXG4gIF07XHJcbiAgcmVsYXRpb25EYXRhOiB7bGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZ31bXSA9IFtcclxuICAgIHtcclxuICAgICAgbGFiZWw6XCLlubbkuJRcIixcclxuICAgICAgdmFsdWU6XCImJlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBsYWJlbDpcIuaIluiAhVwiLFxyXG4gICAgICB2YWx1ZTpcInx8XCJcclxuICAgIH1cclxuICBdO1xyXG4gIHByaXZhdGUgbm90aWZpZXMgPSB7XHJcbiAgICAxOiB7IHR5cGU6ICdzdWNjZXNzJywgbXNnOiAn6KGo6L6+5byP55Sf5oiQ77yBJyB9LFxyXG4gICAgMjogeyB0eXBlOiAnd2FybmluZycsIG1zZzogJ+ivt+ehruS/neW/heWhq+mhueWhq+WGmeWujOaVtO+8gScgfSxcclxuICB9OyAgXHJcbiAgZW50aXRpZXM9W107XHJcbiAgcHJvcGVydHlMaXN0O1xyXG4gIC8vIHByb3BlcnR5TGlzdCA9IHtcclxuICAvLyAgIGNvbHVtbnM6W3tcclxuICAvLyAgICAgICAgICAgICBcImZpZWxkXCI6IFwibmFtZVwiLFxyXG4gIC8vICAgICAgICAgICAgIFwidGl0bGVcIjogXCLlkI3np7BcIixcclxuICAvLyAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcclxuICAvLyAgICAgICAgICAgICBcImhBbGlnblwiOiBcImxlZnRcIixcclxuICAvLyAgICAgICAgICAgICBcImFsaWduXCI6IFwibGVmdFwiLFxyXG4gIC8vICAgICAgICAgICAgIFwiZm9ybWF0dGVyXCI6IG51bGxcclxuICAvLyAgICAgICAgIH1dLFxyXG4gIC8vICAgaXRlbXM6W1xyXG4gIC8vICAgICAgICAgICB7XHJcbiAgLy8gICAgICAgICAgICAgXCJpZFwiOiBcIm9yZGVyXCIsXHJcbiAgLy8gICAgICAgICAgICAgXCJjb2RlXCI6IFwib3JkZXJcIixcclxuICAvLyAgICAgICAgICAgICBcIm5hbWVcIjogXCLorqLljZVcIixcclxuICAvLyAgICAgICAgICAgICBcInRyZWVJbmZvXCI6IHtcclxuICAvLyAgICAgICAgICAgICAgICAgLy8gXCJpc0RldGFpbFwiOiBmYWxzZSxcclxuICAvLyAgICAgICAgICAgICAgICAgXCJsYXllclwiOiAxLFxyXG4gIC8vICAgICAgICAgICAgICAgICBcInBhdGhcIjogXCIwMDAxXCJcclxuICAvLyAgICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgIH0sXHJcbiAgLy8gICAgICAgICAgIHtcclxuICAvLyAgICAgICAgICAgICBcImlkXCI6IFwib3JkZXJJdGVtMDFcIixcclxuICAvLyAgICAgICAgICAgICBcImNvZGVcIjogXCJvcmRlckl0ZW0wMVwiLFxyXG4gIC8vICAgICAgICAgICAgIFwibmFtZVwiOiBcIuiuouWNleaYjue7hlwiLFxyXG4gIC8vICAgICAgICAgICAgIFwidHJlZUluZm9cIjoge1xyXG4gIC8vICAgICAgICAgICAgICAgICAvLyBcImlzRGV0YWlsXCI6IHRydWUsXHJcbiAgLy8gICAgICAgICAgICAgICAgIFwibGF5ZXJcIjogMixcclxuICAvLyAgICAgICAgICAgICAgICAgXCJwYXRoXCI6IFwiMDAwMTAwMDFcIlxyXG4gIC8vICAgICAgICAgICAgIH0sXHJcbiAgLy8gICAgICAgICAgICAgXCJwYXJlbnRIaWVyYXJjaHlJbmZvXCI6IHtcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwiaXNEZXRhaWxcIjogdHJ1ZSxcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwibGF5ZXJcIjogMixcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwic2VxdWVuY2VcIjogMSxcclxuICAvLyAgICAgICAgICAgICAgIFwicGFyZW50RWxlbWVudFwiOiBcIm9yZGVyXCJcclxuICAvLyAgICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgIH0sXHJcbiAgLy8gICAgICAgICAgIHtcclxuICAvLyAgICAgICAgICAgICBcImlkXCI6IFwib3JkZXJJdGVtMDJcIixcclxuICAvLyAgICAgICAgICAgICBcImNvZGVcIjogXCJvcmRlckl0ZW0wMlwiLFxyXG4gIC8vICAgICAgICAgICAgIFwibmFtZVwiOiBcIuiuouWNleaYjue7hjAyXCIsXHJcbiAgLy8gICAgICAgICAgICAgXCJ0cmVlSW5mb1wiOiB7XHJcbiAgLy8gICAgICAgICAgICAgICAgIC8vIFwiaXNEZXRhaWxcIjogdHJ1ZSxcclxuICAvLyAgICAgICAgICAgICAgICAgXCJsYXllclwiOiAyLFxyXG4gIC8vICAgICAgICAgICAgICAgICBcInBhdGhcIjogXCIwMDAxMDAwMlwiXHJcbiAgLy8gICAgICAgICAgICAgfSxcclxuICAvLyAgICAgICAgICAgICBcInBhcmVudEhpZXJhcmNoeUluZm9cIjoge1xyXG4gIC8vICAgICAgICAgICAgICAgLy8gXCJpc0RldGFpbFwiOiB0cnVlLFxyXG4gIC8vICAgICAgICAgICAgICAgLy8gXCJsYXllclwiOiAyLFxyXG4gIC8vICAgICAgICAgICAgICAgLy8gXCJzZXF1ZW5jZVwiOiAxLFxyXG4gIC8vICAgICAgICAgICAgICAgXCJwYXJlbnRFbGVtZW50XCI6IFwib3JkZXJcIlxyXG4gIC8vICAgICAgICAgICAgIH1cclxuICAvLyAgICAgICAgICAgfSxcclxuICAvLyAgICAgICAgICAge1xyXG4gIC8vICAgICAgICAgICAgIFwiaWRcIjogXCJwcmljZVwiLFxyXG4gIC8vICAgICAgICAgICAgIFwiY29kZVwiOiBcInByaWNlXCIsXHJcbiAgLy8gICAgICAgICAgICAgXCJuYW1lXCI6IFwi5pWw6YePXCIsXHJcbiAgLy8gICAgICAgICAgICAgXCJ0cmVlSW5mb1wiOiB7XHJcbiAgLy8gICAgICAgICAgICAgICAgIC8vIFwiaXNEZXRhaWxcIjogdHJ1ZSxcclxuICAvLyAgICAgICAgICAgICAgICAgXCJsYXllclwiOiAzLFxyXG4gIC8vICAgICAgICAgICAgICAgICBcInBhdGhcIjogXCIwMDAxMDAwMjAwMDFcIlxyXG4gIC8vICAgICAgICAgICAgIH0sXHJcbiAgLy8gICAgICAgICAgICAgXCJwYXJlbnRIaWVyYXJjaHlJbmZvXCI6IHtcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwiaXNEZXRhaWxcIjogdHJ1ZSxcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwibGF5ZXJcIjogMixcclxuICAvLyAgICAgICAgICAgICAgIC8vIFwic2VxdWVuY2VcIjogMSxcclxuICAvLyAgICAgICAgICAgICAgIFwicGFyZW50RWxlbWVudFwiOiBcIm9yZGVySXRlbTAyXCJcclxuICAvLyAgICAgICAgICAgICB9XHJcbiAgLy8gICAgICAgICAgIH1cclxuICAvLyAgICAgICBdLFxyXG4gIC8vICAgdHJlZUluZm86IHtcclxuICAvLyAgICAgICAgIFwibG9hZERhdGFUeXBlXCI6IFwiYWxsXCIsXHJcbiAgLy8gICAgICAgICBcImxheWVyVHlwZVwiOiBcInBhdGhjb2RlXCIsXHJcbiAgLy8gICAgICAgICBcImRhdGFGaWVsZFwiOiBcInRyZWVJbmZvXCIsXHJcbiAgLy8gICAgICAgICBcInBhdGhGaWVsZFwiOiBcInBhdGhcIixcclxuICAvLyAgICAgICAgIFwibGF5ZXJGaWVsZFwiOiBcImxheWVyXCIsXHJcbiAgLy8gICAgICAgICBcImlzRGV0YWlsRmllbGRcIjogXCJpc0RldGFpbFwiLFxyXG4gIC8vICAgICAgICAgXCJvbmx5U2VsZWN0TGVhZlwiOiBmYWxzZSxcclxuICAvLyAgICAgICAgIFwicGFyZW50RmllbGRcIjogXCJwYXJlbnRFbGVtZW50XCIsXHJcbiAgLy8gICAgICAgICBcInRyZWVEYXRhSXNJbml0XCI6IGZhbHNlXHJcbiAgLy8gICAgIH0sXHJcbiAgLy8gICBkaXNwbGF5VHlwZTogXCJUcmVlTGlzdFwiXHJcbiAgLy8gfVxyXG4gIFxyXG4gIG5nT25Jbml0KCkgXHJcbiAge1xyXG4gICAgaWYodGhpcy5jb250ZXh0RW50aXR5LnNleHByKVxyXG4gICAge1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbnMgPSBKU09OLnBhcnNlKHRoaXMuY29udGV4dEVudGl0eS5zZXhwcikgYXMgQ29uZGl0aW9uUnVsZVtdO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5jb250ZXh0RW50aXR5LmluamVjdGVkRW50aXRpZXMgJiYgdGhpcy5jb250ZXh0RW50aXR5LmluamVjdGVkRW50aXRpZXMubGVuZ3RoPjApXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuT25pbml0U2NoZW1hRW50aXR5KHRoaXMuY29udGV4dEVudGl0eS5pbmplY3RlZEVudGl0aWVzLHRoaXMuY29udGV4dEVudGl0eS5zY2hlbWFNYXApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcm9wZXJ0eUxpc3QgPSB7XHJcbiAgICAgIGNvbHVtbnM6W3tcclxuICAgICAgICAgICAgICAgIFwiZmllbGRcIjogXCJuYW1lXCIsXHJcbiAgICAgICAgICAgICAgICBcInRpdGxlXCI6IFwi5ZCN56ewXCIsXHJcbiAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDEwMCxcclxuICAgICAgICAgICAgICAgIFwiaEFsaWduXCI6IFwibGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgXCJhbGlnblwiOiBcImxlZnRcIixcclxuICAgICAgICAgICAgICAgIFwiZm9ybWF0dGVyXCI6IG51bGxcclxuICAgICAgICAgICAgfV0sXHJcbiAgICAgIGl0ZW1zOnRoaXMuZW50aXRpZXMsXHJcbiAgICAgIHRyZWVJbmZvOiB7XHJcbiAgICAgICAgICAgIFwibG9hZERhdGFUeXBlXCI6IFwiYWxsXCIsXHJcbiAgICAgICAgICAgIFwibGF5ZXJUeXBlXCI6IFwicGF0aGNvZGVcIixcclxuICAgICAgICAgICAgXCJkYXRhRmllbGRcIjogXCJ0cmVlSW5mb1wiLFxyXG4gICAgICAgICAgICBcInBhdGhGaWVsZFwiOiBcInBhdGhcIixcclxuICAgICAgICAgICAgXCJsYXllckZpZWxkXCI6IFwibGF5ZXJcIixcclxuICAgICAgICAgICAgXCJpc0RldGFpbEZpZWxkXCI6IFwiaXNEZXRhaWxcIixcclxuICAgICAgICAgICAgXCJvbmx5U2VsZWN0TGVhZlwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJwYXJlbnRGaWVsZFwiOiBcInBhcmVudEVsZW1lbnRcIixcclxuICAgICAgICAgICAgXCJ0cmVlRGF0YUlzSW5pdFwiOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgIGRpc3BsYXlUeXBlOiBcIlRyZWVMaXN0XCJcclxuICAgIH1cclxuICB9XHJcbiAgcHJpdmF0ZSBuZXdJdGVtOiBDb25kaXRpb25SdWxlID0ge1xyXG4gICAgY29tcHV0ZUZpZWxkOiAnJyxcclxuICAgIGZpZWxkTmFtZTonJyxcclxuICAgIHZhbHVlOiAnJyxcclxuICAgIGxicmFja2V0OiAnKCcsXHJcbiAgICByYnJhY2tldDogJyknLFxyXG4gICAgcmVsYXRpb246IFwiJiZcIixcclxuICAgIG9wZXJhdG9yOiBcIj09XCJcclxufTtcclxuXHJcbiAgaW5zZXJ0KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgY29uc3QgX25ld0l0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm5ld0l0ZW0pO1xyXG4gICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKGluZGV4KzEsIDAsIF9uZXdJdGVtKTtcclxuICAgICAgLy8gaWYgKGluZGV4ICA9PT0gMCkge1xyXG4gICAgICAvLyAgICAgdGhpcy5jb25kaXRpb25zLnVuc2hpZnQoX25ld0l0ZW0pO1xyXG4gICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAvLyAgICAgdGhpcy5jb25kaXRpb25zLnNwbGljZShpbmRleCsxLCAwLCBfbmV3SXRlbSk7XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIHRoaXMuY2hhbmdlQ29uZGl0aW9uTGlzdCgpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKGluZGV4OiBudW1iZXIpIHtcclxuICAgIGxldCBudW0gPSBpbmRleCsxO1xyXG4gICAgdGhpcy5tc2dTZXIuY29uZmlybSgn56Gu6K6k5Yig6Zmk56ysJytudW0rJ+ihjOaVsOaNrj8nKS5zdWJzY3JpYmUoKHJlc3VsdCkgPT4ge1xyXG4gICAgICBpZihyZXN1bHQpe1xyXG4gICAgICAgIGlmKGluZGV4IT0wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRoaXMuY29uZGl0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuY29uZGl0aW9ucy5sZW5ndGg+MSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGhpcy5jb25kaXRpb25zPVtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvbXB1dGVGaWVsZDogJycsXHJcbiAgICAgICAgICAgICAgZmllbGROYW1lOicnLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICBsYnJhY2tldDogJygnLFxyXG4gICAgICAgICAgICAgIHJicmFja2V0OiAnKScsXHJcbiAgICAgICAgICAgICAgcmVsYXRpb246IFwiJiZcIixcclxuICAgICAgICAgICAgICBvcGVyYXRvcjogXCI9PVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VDb25kaXRpb25MaXN0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENvbmRpdGlvbikge1xyXG4gICAgICAgICAgaWYgKGluZGV4ID09PSB0aGlzLmN1cnJlbnRDb25kaXRpb24uaW5kZXgpIHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDb25kaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7ICAgXHJcbiAgfVxyXG5cclxuICBvbkFkZEZpbHRlcigpIHtcclxuICAgICAgLy8gdGhpcy5jb25kaXRpb25zID0gWy4uLnRoaXMuY29uZGl0aW9ucywgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5uZXdDb25kaXRpb24pXTtcclxuICAgICAgLy8gdGhpcy5jaGFuZ2VDb25kaXRpb25MaXN0KCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyKCkge1xyXG4gICAgICAvLyB0aGlzLm1lc3NhZ2VyU2VydmljZS5xdWVzdGlvbign56Gu6K6k6KaB5riF56m65b2T5YmN5omA5pyJ5p2h5Lu25ZCX77yfJywgKCkgPT4ge1xyXG4gICAgICAvLyAgICAgdGhpcy5jb25kaXRpb25zID0gW107XHJcbiAgICAgIC8vICAgICB0aGlzLmNoYW5nZUNvbmRpdGlvbkxpc3QoKTtcclxuICAgICAgLy8gfSk7XHJcbiAgfVxyXG5cclxuICB0b1RvcCgpIHtcclxuICAgICAgaWYgKHRoaXMuY3VycmVudENvbmRpdGlvbikge1xyXG4gICAgICAgICAgdGhpcy5jb25kaXRpb25zLnVuc2hpZnQodGhpcy5jdXJyZW50Q29uZGl0aW9uLmNvbmRpdGlvbik7XHJcbiAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKHRoaXMuY3VycmVudENvbmRpdGlvbi5pbmRleCArIDEsIDEpO1xyXG5cclxuICAgICAgICAgIHRoaXMuY3VycmVudENvbmRpdGlvbi5pbmRleCA9IDA7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZUNvbmRpdGlvbkxpc3QoKTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgdG9VcCgpIHtcclxuICAgICAgaWYgKHRoaXMuY3VycmVudENvbmRpdGlvbikge1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRDb25kaXRpb24uaW5kZXg7XHJcbiAgICAgICAgICBjb25zdCB0ZW1wQXJyID0gdGhpcy5jb25kaXRpb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKGluZGV4IC0gMSwgMCwgLi4udGVtcEFycik7XHJcblxyXG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZGl0aW9uLmluZGV4ID0gaW5kZXggLSAxO1xyXG4gICAgICAgICAgdGhpcy5jaGFuZ2VDb25kaXRpb25MaXN0KCk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgdG9Eb3duKCkge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50Q29uZGl0aW9uKSB7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VycmVudENvbmRpdGlvbi5pbmRleDtcclxuICAgICAgICAgIGNvbnN0IHRlbXBBcnIgPSB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgIHRoaXMuY29uZGl0aW9ucy5zcGxpY2UoaW5kZXggKyAxLCAwLCAuLi50ZW1wQXJyKTtcclxuXHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25kaXRpb24uaW5kZXggPSBpbmRleCArIDE7XHJcbiAgICAgICAgICB0aGlzLmNoYW5nZUNvbmRpdGlvbkxpc3QoKTtcclxuICAgICAgfVxyXG4gIH1cclxuICB0b0JvdHRvbSgpIHtcclxuICAgICAgaWYgKHRoaXMuY3VycmVudENvbmRpdGlvbikge1xyXG4gICAgICAgICAgdGhpcy5jb25kaXRpb25zLnB1c2godGhpcy5jdXJyZW50Q29uZGl0aW9uLmNvbmRpdGlvbik7XHJcbiAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKHRoaXMuY3VycmVudENvbmRpdGlvbi5pbmRleCwgMSk7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25kaXRpb24uaW5kZXggPSB0aGlzLmNvbmRpdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgIHRoaXMuY2hhbmdlQ29uZGl0aW9uTGlzdCgpO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoYW5nZUNvbmRpdGlvbkxpc3QoKSB7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RlZCgkZXZlbnQpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCRldmVudCk7XHJcbiAgICB0aGlzLmN1cnJlbnRDb25kaXRpb24gPSAkZXZlbnQ7XHJcbiAgfVxyXG4gIC8qKuaJk+W8gOmrmOe6p+ihqOi+vuW8jyAqL1xyXG4gIG9wZW5BZHZhbmNlZEV4cHJlc3Npb24oKVxyXG4gIHtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIHRoaXMub3BlbkFkdmFuY2VkRXhwcigpLnRoZW4oXHJcbiAgICAgIGV4cHJlID0+ICB7XHJcbiAgICAgICAgdGhhdC5yZXN1bHQuZW1pdChKU09OLnN0cmluZ2lmeShleHByZSkpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsRW1pdHRlci5lbWl0KFwiY2xvc2VcIik7XHJcbiAgfVxyXG4gIG9wZW5BZHZhbmNlZEV4cHIoKVxyXG4gIHtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShcclxuICAgICAgICBmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGF0LmNvbXBGYWN0UmVzLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KEV4cHJlc3Npb25lZGl0b3JDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICAgICAgICAgICAgICAgIGNvbXBSZWYuaW5zdGFuY2UuZXhwcmVzc2lvbkVudGl0eT10aGF0LmNvbnRleHRFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmV4cHJlc3Npb25FbnRpdHkuZXhwciA9IHRoYXQuY29udmVydEV4cHIodGhhdC5jb25kaXRpb25zKTtcclxuICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSB0aGF0Lm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCLpq5jnuqfooajovr7lvI9cIixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTA2MCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDYxMCxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0ZXh0OiAn5L+d5a2YJywgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmdldEV4cHJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRleHQ6ICflj5bmtognLCBjbHM6ICdidG4gYnRuLXNlY29uZGFyeScsIGhhbmRsZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLnJlc3VsdC5zdWJzY3JpYmUoKGV4cHJlc3Npb25Db250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZXhwcmVzc2lvbkNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICB9XHJcbiAgLyoq56Gu6K6kICovXHJcbiAgY29uZmlybSgpXHJcbiAge1xyXG4gICAgbGV0IGV4cHJlc3Npb24gPSBuZXcgRXhwcmVzc2lvbkVudGl0eSgpO1xyXG4gICAgZXhwcmVzc2lvbi5leHByID0gdGhpcy5jb252ZXJ0RXhwcih0aGlzLmNvbmRpdGlvbnMpO1xyXG4gICAgZXhwcmVzc2lvbi5zZXhwciA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY29uZGl0aW9ucyk7XHJcbiAgICB0aGlzLnJlc3VsdC5lbWl0KEpTT04uc3RyaW5naWZ5KGV4cHJlc3Npb24pKTtcclxuICAgIHRoaXMubm90aWZ5U2VydmljZVt0aGlzLm5vdGlmaWVzWycxJ10udHlwZV0oe1xyXG4gICAgICBtc2c6IHRoaXMubm90aWZpZXNbJzEnXS5tc2dcclxuICAgIH0pOyAgXHJcbiAgICB0aGlzLmNsb3NlTW9kYWxFbWl0dGVyLmVtaXQoXCJjbG9zZVwiKTtcclxuICB9XHJcbiAgLyoq6YeN572uICovXHJcbiAgcmVzZXQoKVxyXG4gIHtcclxuICAgIHRoaXMuY29uZGl0aW9ucz1bXHJcbiAgICAgIHtcclxuICAgICAgICBjb21wdXRlRmllbGQ6ICcnLFxyXG4gICAgICAgIGZpZWxkTmFtZTonJyxcclxuICAgICAgICB2YWx1ZTogJycsXHJcbiAgICAgICAgbGJyYWNrZXQ6ICcoJyxcclxuICAgICAgICByYnJhY2tldDogJyknLFxyXG4gICAgICAgIHJlbGF0aW9uOiBcIiYmXCIsXHJcbiAgICAgICAgb3BlcmF0b3I6IFwiPT1cIlxyXG4gICAgICB9XHJcbiAgICBdO1xyXG4gIH1cclxuICAvKirlj5bmtoggKi9cclxuICBjYW5jbGUoKVxyXG4gIHtcclxuICAgIHRoaXMuY2xvc2VNb2RhbEVtaXR0ZXIuZW1pdChcImNsb3NlXCIpO1xyXG4gIH1cclxuICBpc1NlbGVjdGVkKCRldmVudDogbnVtYmVyKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50Q29uZGl0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudENvbmRpdGlvbi5pbmRleCA9PT0gJGV2ZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICAvKioq6L2s5YyW5Li66KGo6L6+5byP5LiyICovXHJcbiAgcHJpdmF0ZSBjb252ZXJ0RXhwcihjb25kaXRpb25zOkNvbmRpdGlvblJ1bGVbXSk6c3RyaW5nXHJcbiAge1xyXG4gICAgdGhpcy5leHByPVwiXCI7XHJcbiAgICBpZihjb25kaXRpb25zKVxyXG4gICAge1xyXG4gICAgICBsZXQgY291bnQ9MDtcclxuICAgICAgbGV0IG9wZXJhdG9yPVwiXCI7XHJcbiAgICAgIGxldCBsZW5ndGg9Y29uZGl0aW9ucy5sZW5ndGg7XHJcbiAgICAgIGNvbmRpdGlvbnMuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgICAgY291bnQrKztcclxuICAgICAgICBpZihjb3VudDxsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYoaXRlbS5vcGVyYXRvcj09XCI9PVwiIHx8IGl0ZW0ub3BlcmF0b3I9PVwiIT1cIiB8fCBpdGVtLm9wZXJhdG9yPT1cIj5cIiB8fFxyXG4gICAgICAgICAgaXRlbS5vcGVyYXRvcj09XCI+PVwiIHx8IGl0ZW0ub3BlcmF0b3I9PVwiPFwiIHx8IGl0ZW0ub3BlcmF0b3I9PVwiPD1cIilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICsgaXRlbS5vcGVyYXRvciAraXRlbS52YWx1ZStpdGVtLnJicmFja2V0K2l0ZW0ucmVsYXRpb247XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaChpdGVtLm9wZXJhdG9yKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY2FzZSBcImVxdWFsXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICtcIj09XFxcIlwiICsgaXRlbS52YWx1ZSArXCJcXFwiXCIraXRlbS5yYnJhY2tldCtpdGVtLnJlbGF0aW9uO2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJub3RlcXVhbFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtpdGVtLmNvbXB1dGVGaWVsZCArXCIhPVxcXCJcIiArIGl0ZW0udmFsdWUgK1wiXFxcIlwiK2l0ZW0ucmJyYWNrZXQraXRlbS5yZWxhdGlvbjticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiPT1udWxsXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICtcIj09bnVsbFwiK2l0ZW0ucmJyYWNrZXQraXRlbS5yZWxhdGlvbjticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiIT1udWxsXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICtcIiE9bnVsbFwiK2l0ZW0ucmJyYWNrZXQraXRlbS5yZWxhdGlvbjticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiQ29udGFpbnNcIjp0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQrXCJEZWZhdWx0RnVuY3Rpb24uQ29udGFpbnMoXCIraXRlbS5jb21wdXRlRmllbGQrXCIsXFxcIlwiK2l0ZW0udmFsdWUrXCJcXFwiKVwiK2l0ZW0ucmJyYWNrZXQraXRlbS5yZWxhdGlvbjticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiTm90Q29udGFpbnNcIjp0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQrXCJEZWZhdWx0RnVuY3Rpb24uTm90Q29udGFpbnMoXCIraXRlbS5jb21wdXRlRmllbGQrXCIsXFxcIlwiK2l0ZW0udmFsdWUrXCJcXFwiKVwiK2l0ZW0ucmJyYWNrZXQraXRlbS5yZWxhdGlvbjticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiU3RhcnRzV2l0aFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5TdGFydHNXaXRoKFwiK2l0ZW0uY29tcHV0ZUZpZWxkK1wiLFxcXCJcIitpdGVtLnZhbHVlK1wiXFxcIilcIitpdGVtLnJicmFja2V0K2l0ZW0ucmVsYXRpb247YnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSBcIk5vdFN0YXJ0c1dpdGhcIjp0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQrXCJEZWZhdWx0RnVuY3Rpb24uTm90U3RhcnRzV2l0aChcIitpdGVtLmNvbXB1dGVGaWVsZCtcIixcXFwiXCIraXRlbS52YWx1ZStcIlxcXCIpXCIraXRlbS5yYnJhY2tldCtpdGVtLnJlbGF0aW9uO2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJFbmRzV2l0aFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5FbmRzV2l0aChcIitpdGVtLmNvbXB1dGVGaWVsZCtcIixcXFwiXCIraXRlbS52YWx1ZStcIlxcXCIpXCIraXRlbS5yYnJhY2tldCtpdGVtLnJlbGF0aW9uO2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJOb3RFbmRzV2l0aFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5Ob3RFbmRzV2l0aChcIitpdGVtLmNvbXB1dGVGaWVsZCtcIixcXFwiXCIraXRlbS52YWx1ZStcIlxcXCIpXCIraXRlbS5yYnJhY2tldCtpdGVtLnJlbGF0aW9uO2JyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZihpdGVtLm9wZXJhdG9yPT1cIj09XCIgfHwgaXRlbS5vcGVyYXRvcj09XCIhPVwiIHx8IGl0ZW0ub3BlcmF0b3I9PVwiPlwiIHx8XHJcbiAgICAgICAgICBpdGVtLm9wZXJhdG9yPT1cIj49XCIgfHwgaXRlbS5vcGVyYXRvcj09XCI8XCIgfHwgaXRlbS5vcGVyYXRvcj09XCI8PVwiKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQraXRlbS5jb21wdXRlRmllbGQgKyBpdGVtLm9wZXJhdG9yICtpdGVtLnZhbHVlK2l0ZW0ucmJyYWNrZXQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaChpdGVtLm9wZXJhdG9yKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY2FzZSBcImVxdWFsXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICtcIj09XFxcIlwiICsgaXRlbS52YWx1ZSArXCJcXFwiXCIraXRlbS5yYnJhY2tldDticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwibm90ZXF1YWxcIjp0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQraXRlbS5jb21wdXRlRmllbGQgK1wiIT1cXFwiXCIgKyBpdGVtLnZhbHVlICtcIlxcXCJcIitpdGVtLnJicmFja2V0O2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCI9PW51bGxcIjp0aGlzLmV4cHI9dGhpcy5leHByK2l0ZW0ubGJyYWNrZXQraXRlbS5jb21wdXRlRmllbGQgK1wiPT1udWxsXCIraXRlbS5yYnJhY2tldDticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiIT1udWxsXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K2l0ZW0uY29tcHV0ZUZpZWxkICtcIiE9bnVsbFwiK2l0ZW0ucmJyYWNrZXQ7YnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSBcIkNvbnRhaW5zXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K1wiRGVmYXVsdEZ1bmN0aW9uLkNvbnRhaW5zKFwiK2l0ZW0uY29tcHV0ZUZpZWxkK1wiLFxcXCJcIitpdGVtLnZhbHVlK1wiXFxcIilcIitpdGVtLnJicmFja2V0O2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJOb3RDb250YWluc1wiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5Ob3RDb250YWlucyhcIitpdGVtLmNvbXB1dGVGaWVsZCtcIixcXFwiXCIraXRlbS52YWx1ZStcIlxcXCIpXCIraXRlbS5yYnJhY2tldDticmVhaztcclxuICAgICAgICAgICAgICBjYXNlIFwiU3RhcnRzV2l0aFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5TdGFydHNXaXRoKFwiK2l0ZW0uY29tcHV0ZUZpZWxkK1wiLFxcXCJcIitpdGVtLnZhbHVlK1wiXFxcIilcIitpdGVtLnJicmFja2V0O2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJOb3RTdGFydHNXaXRoXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K1wiRGVmYXVsdEZ1bmN0aW9uLk5vdFN0YXJ0c1dpdGgoXCIraXRlbS5jb21wdXRlRmllbGQrXCIsXFxcIlwiK2l0ZW0udmFsdWUrXCJcXFwiKVwiK2l0ZW0ucmJyYWNrZXQ7YnJlYWs7XHJcbiAgICAgICAgICAgICAgY2FzZSBcIkVuZHNXaXRoXCI6dGhpcy5leHByPXRoaXMuZXhwcitpdGVtLmxicmFja2V0K1wiRGVmYXVsdEZ1bmN0aW9uLkVuZHNXaXRoKFwiK2l0ZW0uY29tcHV0ZUZpZWxkK1wiLFxcXCJcIitpdGVtLnZhbHVlK1wiXFxcIilcIitpdGVtLnJicmFja2V0O2JyZWFrO1xyXG4gICAgICAgICAgICAgIGNhc2UgXCJOb3RFbmRzV2l0aFwiOnRoaXMuZXhwcj10aGlzLmV4cHIraXRlbS5sYnJhY2tldCtcIkRlZmF1bHRGdW5jdGlvbi5Ob3RFbmRzV2l0aChcIitpdGVtLmNvbXB1dGVGaWVsZCtcIixcXFwiXCIraXRlbS52YWx1ZStcIlxcXCIpXCIraXRlbS5yYnJhY2tldDticmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmV4cHI7XHJcbiAgfVxyXG4gXHJcbiAgLy/liJ3lp4vljJZTY2hlbWHmoLzlvI/nmoRFbnRpdHlcclxuICBPbmluaXRTY2hlbWFFbnRpdHkoaW5qZWN0ZWRFbnRpdGllczpJbmplY3RlZEVudGl0eVtdLHNjaGVtYTpNYXA8c3RyaW5nLFNjaGVtYT4pIHtcclxuICAgIGlmKGluamVjdGVkRW50aXRpZXMgJiYgaW5qZWN0ZWRFbnRpdGllcy5sZW5ndGg+MClcclxuICAgIHtcclxuICAgICAgdGhpcy5lbnRpdGllcyA9IFtdO1xyXG4gICAgLy/lrp7kvZPmmL7npLrnpoHlv4zooahcclxuICAgIGxldCBuYXZpZ2F0b3JNYXAgPSBuZXcgTWFwPHN0cmluZywgSW5qZWN0ZWRUeXBlPigpO1xyXG4gICAgbGV0IG51bWNvdW50ID0gMTtcclxuICAgIC8v6Kej5p6Q5q+P5LiA5Liq5rOo5YWl5a6e5L2T77yM5bCG5YW26L2s5YyW5Li6VHJlZU5vZGVcclxuICAgIGluamVjdGVkRW50aXRpZXMuZm9yRWFjaChpbmplY3RFbnRpdHkgPT4ge1xyXG4gICAgICBcclxuICAgICAgLy/moLnmja5zY2hlbWHlkI3np7Dmib7liLDlr7nlupTnmoRzY2hlbWFcclxuICAgICAgbGV0IGN1cnJlbnRTY2hlbWEgPSBzY2hlbWEuZ2V0KGluamVjdEVudGl0eS5zY2hlbWFOYW1lKTtcclxuICAgICAgc3dpdGNoIChpbmplY3RFbnRpdHkuaW5qZWN0ZWRUeXBlKSB7XHJcbiAgICAgICAgLy/ms6jlhaXnmoToi6XkuLrlrp7kvZPpm4ZcclxuICAgICAgICBjYXNlIEluamVjdGVkVHlwZS5FbnRpdHlTZXQ6IHtcclxuICAgICAgICAgIC8vIC8v5qC55o2u5rOo5YWl5a6e5L2T55qE5ZCN56ew5om+5Yiw5a+55bqU55qE5a6e5L2T6ZuGXHJcbiAgICAgICAgICAvL2xldCBlbnRpdHlTZXQgPSBjdXJyZW50U2NoZW1hLmVudGl0eVNldHMuZmluZChlbnRpdHlTZXQgPT4gZW50aXR5U2V0Lm5hbWUgPT0gaW5qZWN0RW50aXR5LmluamVjdGVkTmFtZSk7XHJcbiAgICAgICAgICAvLyAvL+WwhuaJvuWIsOeahOWunuS9k+mbhui9rOWMluS4ulRyZWVOb2RlXHJcbiAgICAgICAgICAvLyBlbnRpdHlUcmVlID0gdGhpcy5Db252ZXJ0RW50aXR5U2V0KGVudGl0eVNldCwgY3VycmVudFNjaGVtYSwgbmF2aWdhdG9yTWFwKTtcclxuICAgICAgICB9OyBicmVhaztcclxuICAgICAgICAvL+azqOWFpeeahOiLpeS4uuWunuS9k+exu+Wei1xyXG4gICAgICAgIGNhc2UgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGU6IHtcclxuICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gY3VycmVudFNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKGVudGl0eVR5cGUgPT4gZW50aXR5VHlwZS5uYW1lID09IGluamVjdEVudGl0eS5pbmplY3RlZE5hbWUpO1xyXG4gICAgICAgICAgdGhpcy5Db252ZXJ0RW50aXR5VHlwZShlbnRpdHlUeXBlLFwiXCIsY3VycmVudFNjaGVtYSxuYXZpZ2F0b3JNYXAsMSxcIlwiLG51bWNvdW50KTtcclxuICAgICAgICB9OyBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBudW1jb3VudCsrO1xyXG4gICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcbiAgLy/lrp7kvZPpm4bovazljJZcclxuICBDb252ZXJ0RW50aXR5U2V0KGVudGl0eVNldDogRW50aXR5U2V0LCBzY2hlbWE6IFNjaGVtYSwgbmF2aWdhdG9yTWFwOiBhbnkpIHtcclxuICAgIC8vIGlmIChlbnRpdHlTZXQpIHtcclxuICAgIC8vICAgLy/lsIZlbnRpdHlzZXTovazljJbkuLpUcmVlTm9kZee7k+aehOeUqOS6juWxleekulxyXG4gICAgLy8gICBsZXQgdHJlZU5vZGU9IG5ldyBDb21ib0RhdGE7XHJcbiAgICAvLyAgIHRyZWVOb2RlLnRyZWVJbmZvLlxyXG4gICAgLy8gICAvL+Wwhui9rOWMluWujOaIkOeahOWunuS9k+mbhua3u+WKoOi/m+emgeW/jOihqO+8jOmYsuatouW+queOr+i9rOWMllxyXG4gICAgLy8gICBuYXZpZ2F0b3JNYXAuc2V0KGVudGl0eVNldC5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5U2V0KTtcclxuICAgIC8vICAgLy/mib7liLDlrp7kvZPpm4blr7nlupTnmoTlrp7kvZPnsbvlnotcclxuICAgIC8vICAgbGV0IGVudGl0eVR5cGUgPSBzY2hlbWEuZW50aXR5VHlwZXMuZmluZChlbnRpdHlUeXBlID0+IGVudGl0eVR5cGUubmFtZSA9PSBlbnRpdHlTZXQuZW50aXR5VHlwZSk7XHJcbiAgICAvLyAgIC8v5bCGZW50aXR5dHlwZei9rOWMluS4ulRyZWVOb2Rl57uT5p6E55So5LqO5bGV56S6XHJcbiAgICAvLyAgIHRoaXMuQ29udmVydEVudGl0eVR5cGUoZW50aXR5VHlwZSwgc2NoZW1hLCBuYXZpZ2F0b3JNYXApLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgLy8gICAgIHRyZWVOb2RlLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgLy8gICB9KTtcclxuICAgIC8vICAgcmV0dXJuIHRyZWVOb2RlO1xyXG4gICAgLy99XHJcbiAgICAvL+WunuS9k+mbhuS4uuepuuaIluacquWumuS5ieWImei/lOWbnuepulxyXG4gICAgLy9lbHNlIHJldHVybiBudWxsO1xyXG4gIH1cclxuICAvL+WunuS9k+exu+Wei+i9rOWMllxyXG4gIENvbnZlcnRFbnRpdHlUeXBlKGVudGl0eVR5cGU6IEVudGl0eVR5cGUscGFyZW50SWQ6c3RyaW5nLHNjaGVtYTogU2NoZW1hLCBuYXZpZ2F0b3JNYXA6IGFueSxsYXllcjpudW1iZXIscGFyZW50UGF0aDpzdHJpbmcscGF0aE51bTpudW1iZXIpe1xyXG4gICAgaWYgKGVudGl0eVR5cGUpIHtcclxuICAgICAgbGV0IG1haW5UcmVlTm9kZT1uZXcgQ29tYm9EYXRhO1xyXG4gICAgICBtYWluVHJlZU5vZGUuY29kZSA9IGVudGl0eVR5cGUubmFtZTtcclxuICAgICAgbWFpblRyZWVOb2RlLm5hbWUgPSBlbnRpdHlUeXBlLm5hbWU7XHJcbiAgICAgIG1haW5UcmVlTm9kZS50cmVlSW5mby5sYXllcj1sYXllcjtcclxuICAgICAgbWFpblRyZWVOb2RlLnRyZWVJbmZvLnBhdGg9cGFyZW50UGF0aCt0aGlzLmdldFBhdGgocGF0aE51bSk7XHJcbiAgICAgIGlmKHBhcmVudElkKVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFpblRyZWVOb2RlLmlkID0gcGFyZW50SWQrXCIuXCIrZW50aXR5VHlwZS5uYW1lO1xyXG4gICAgICAgIG1haW5UcmVlTm9kZS5wYXJlbnRIaWVyYXJjaHlJbmZvLnBhcmVudEVsZW1lbnQ9cGFyZW50SWQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFpblRyZWVOb2RlLmlkID0gZW50aXR5VHlwZS5uYW1lO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZW50aXRpZXMucHVzaChtYWluVHJlZU5vZGUpO1xyXG4gICAgICAvL+Wwhui9rOWMlueahGVudGl0eXR5cGXmt7vliqDov5vnpoHlv4zooahcclxuICAgICAgbmF2aWdhdG9yTWFwLnNldChlbnRpdHlUeXBlLm5hbWUrZW50aXR5VHlwZS5pZCwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICAgLy/lsIbmr4/kuKrlsZ7mgKfovazljJbkuLrmr4/kuKpUcmVlTm9kZVxyXG4gICAgICAgbGV0IHByb3BlcnR5TnVtPTE7XHJcbiAgICAgICBlbnRpdHlUeXBlLnByb3BlcnRpZXMuZm9yRWFjaChwcm9wZXJ0eSA9PiB7XHJcbiAgICAgICAgbGV0IHByb3BlcnR5VHJlZT1uZXcgQ29tYm9EYXRhO1xyXG4gICAgICAgIHByb3BlcnR5VHJlZS5pZCA9IG1haW5UcmVlTm9kZS5pZCtcIi5cIitwcm9wZXJ0eS5uYW1lO1xyXG4gICAgICAgIHByb3BlcnR5VHJlZS5jb2RlID0gcHJvcGVydHkubmFtZTtcclxuICAgICAgICBwcm9wZXJ0eVRyZWUubmFtZSA9IHByb3BlcnR5Lm5hbWU7XHJcbiAgICAgICAgcHJvcGVydHlUcmVlLnRyZWVJbmZvLmxheWVyPWxheWVyKzE7XHJcbiAgICAgICAgcHJvcGVydHlUcmVlLnRyZWVJbmZvLnBhdGggPSBtYWluVHJlZU5vZGUudHJlZUluZm8ucGF0aCArIHRoaXMuZ2V0UGF0aChwcm9wZXJ0eU51bSk7XHJcbiAgICAgICAgcHJvcGVydHlOdW0rKztcclxuICAgICAgICBwcm9wZXJ0eVRyZWUucGFyZW50SGllcmFyY2h5SW5mby5wYXJlbnRFbGVtZW50ID0gbWFpblRyZWVOb2RlLmlkO1xyXG4gICAgICAgIHRoaXMuZW50aXRpZXMucHVzaChwcm9wZXJ0eVRyZWUpO1xyXG4gICAgICB9KTtcclxuICAgICAgZW50aXR5VHlwZS5uYXZpZ2F0aW9uUHJvcGVydGllcy5mb3JFYWNoKG5hdmlnYXRpb25Qcm9wZXJ0eSA9PiB7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKblr7zoiKrlsZ7mgKflr7nlupTnmoTlkI3np7DlnKjnpoHlv4zooajkuK1cclxuICAgICAgICBpZiAoIShuYXZpZ2F0b3JNYXAuZ2V0KG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lK25hdmlnYXRpb25Qcm9wZXJ0eS5uYXZpZ2F0aW9uSWQpKSkge1xyXG4gICAgICAgICAgaWYgKG5hdmlnYXRpb25Qcm9wZXJ0eS50eXBlID09IE5hdmlnYXRpb25UeXBlLkVudGl0eVNldCkge1xyXG4gICAgICAgICAgICAvLyAvL+iLpeWvvOiIquWxnuaAp+exu+Wei+S4uuWunuS9k+mbhlxyXG4gICAgICAgICAgICAvLyBsZXQgZW50aXR5U2V0ID0gc2NoZW1hLmVudGl0eVNldHMuZmluZChlbnRpdHlTZXQgPT4gZW50aXR5U2V0Lm5hbWUgPT0gbmF2aWdhdGlvblByb3BlcnR5Lm5hbWUpO1xyXG4gICAgICAgICAgICAvLyB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKHRoaXMuQ29udmVydEVudGl0eVNldChlbnRpdHlTZXQsIHNjaGVtYSwgbmF2aWdhdG9yTWFwKSk7XHJcbiAgICAgICAgICB9Ly/oi6XkuLrlrp7kvZPnsbvlnotcclxuICAgICAgICAgIGVsc2UgaWYgKG5hdmlnYXRpb25Qcm9wZXJ0eS50eXBlID09IE5hdmlnYXRpb25UeXBlLkVudGl0eVR5cGUpIHtcclxuICAgICAgICAgICAgbGV0IGVudGl0eVR5cGUgPSBzY2hlbWEuZW50aXR5VHlwZXMuZmluZChlbnRpdHl0eXBlID0+IGVudGl0eXR5cGUuaWQ9PW5hdmlnYXRpb25Qcm9wZXJ0eS5uYXZpZ2F0aW9uSWQgJiYgZW50aXR5dHlwZS5uYW1lID09IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5Db252ZXJ0RW50aXR5VHlwZShlbnRpdHlUeXBlLG1haW5UcmVlTm9kZS5pZCxzY2hlbWEsbmF2aWdhdG9yTWFwLGxheWVyKzEsbWFpblRyZWVOb2RlLnRyZWVJbmZvLnBhdGgscHJvcGVydHlOdW0rMSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/oi6Xlr7zoiKrlsZ7mgKflnKjnpoHlv4zooajkuK1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGxldCBuYXZpZ2F0b3J0cmVlPW5ldyBDb21ib0RhdGE7XHJcbiAgICAgICAgICBuYXZpZ2F0b3J0cmVlLmlkID0gbWFpblRyZWVOb2RlLmlkK1wiLlwiKyBuYXZpZ2F0aW9uUHJvcGVydHkubmFtZTtcclxuICAgICAgICAgIG5hdmlnYXRvcnRyZWUuY29kZSA9IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lO1xyXG4gICAgICAgICAgbmF2aWdhdG9ydHJlZS5uYW1lID0gbmF2aWdhdGlvblByb3BlcnR5Lm5hbWU7XHJcbiAgICAgICAgICBuYXZpZ2F0b3J0cmVlLnRyZWVJbmZvLmxheWVyPWxheWVyKzE7XHJcbiAgICAgICAgICBuYXZpZ2F0b3J0cmVlLnRyZWVJbmZvLnBhdGg9bWFpblRyZWVOb2RlLnRyZWVJbmZvLnBhdGggKyB0aGlzLmdldFBhdGgocHJvcGVydHlOdW0pO1xyXG4gICAgICAgICAgbmF2aWdhdG9ydHJlZS5wYXJlbnRIaWVyYXJjaHlJbmZvLnBhcmVudEVsZW1lbnQgPSBtYWluVHJlZU5vZGUuaWQ7XHJcbiAgICAgICAgICB0aGlzLmVudGl0aWVzLnB1c2gobmF2aWdhdG9ydHJlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3BlcnR5TnVtKys7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy/oi6VlbnRpdHl0eXBl5Li656m65oiW5pyq5a6a5LmJXHJcbiAgICBlbHNlIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBwcml2YXRlIGdldFBhdGgocGF0aDpudW1iZXIpXHJcbiAge1xyXG4gICAgbGV0IG51bT1cIlwiO1xyXG4gICAgaWYocGF0aDwxMClcclxuICAgIHtcclxuICAgICAgbnVtID0gXCIwMDBcIitwYXRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZigxMDw9cGF0aCAmJiBwYXRoPDEwMClcclxuICAgIHtcclxuICAgICAgbnVtID0gXCIwMFwiK3BhdGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKDEwMDw9cGF0aCAmJiBwYXRoPDEwMDApXHJcbiAgICB7XHJcbiAgICAgIG51bSA9IFwiMFwiK3BhdGg7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG51bSA9IHBhdGgrXCJcIjtcclxuICAgIH0gXHJcbiAgICByZXR1cm4gbnVtO1xyXG4gIH1cclxufVxyXG4iXX0=