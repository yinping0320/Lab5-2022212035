/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { NavigationType } from '../schema';
import { TreeTableComponent } from '@farris/ui-treetable';
import { CurrentNode } from '../currentNode';
import { InjectedType } from '../injected-type';
import { ExpressionEditorLocalePipe } from '../expression-editor-locale.pipe';
import { NewNavigationType } from '../i18n/NewSchema';
import _ from 'lodash';
export class ExpressionEntityGridComponent {
    // data: TreeNode[] = [];
    // temp2: TreeNode;
    // temp3: TreeNode;
    // all: TreeNode[] = [];
    constructor() {
        this.currentNode = new CurrentNode;
        this.entities = [];
        this.currentSchemaName = "";
        this.currentNewSchemaName = "";
        this.currentParent = "";
        this.schema = new Map();
        this.newSchemaMap = new Map();
        this.selectentitychange = new EventEmitter();
        this.dbclickInsert = new EventEmitter();
        this.cols = [];
        this.treedata = [];
        //初始化i18n标识
        this.localeId = localStorage.getItem('languageCode');
        this.localePipe = new ExpressionEditorLocalePipe(this.localeId);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.cols = [
            { field: 'name', title: this.localePipe.transform("EntityList") },
            { field: 'description', title: this.localePipe.transform("EntityName") },
            { field: 'type', title: this.localePipe.transform("EntityType"), width: '100' }
        ];
        if (this.newSchemaMap && this.newSchemaMap.size > 0) {
            this.onInitNewSchema();
            this.treedata = _.cloneDeep(this.entities);
        }
        else if (this.schema && this.schema.size > 0) {
            this.OninitSchemaEntity();
            this.treedata = _.cloneDeep(this.entities);
        }
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    selectRowChange($event) {
        this.currentNode = new CurrentNode;
        this.currentNode.id = $event.node.data.id;
        this.currentNode.name = $event.node.data.name;
        this.currentNode.parentName = this.selectParentString($event.node);
        this.currentParent = this.selectParentString($event.node);
        this.currentNode.schema = $event.node.data.schema;
        this.currentNode.nodeType = $event.node.data.nodeType;
        this.currentNode.description = $event.node.data.description;
        this.selectentitychange.emit(this.currentNode);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    dblClick($event) {
        if (this.currentParent) {
            this.dbclickInsert.emit(this.currentParent + "." + $event.data.name);
        }
        else {
            this.dbclickInsert.emit($event.data.name);
        }
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        if (this.newSchemaMap && this.newSchemaMap.size > 0) {
            this.onInitNewSchema();
            this.treedata = _.cloneDeep(this.entities);
            // this.treedata = this.entities;
            // this.treedata = [...this.treedata];
        }
        else if (this.schema && this.schema.size > 0) {
            this.OninitSchemaEntity();
            this.treedata = _.cloneDeep(this.entities);
            // this.treedata = this.entities;
            // this.treedata = [...this.treedata];
        }
    }
    //递归父节点名
    /**
     * @param {?} node
     * @return {?}
     */
    selectParentString(node) {
        if (node.parent) {
            if (this.selectParentString(node.parent)) {
                if (this.strContain(node.parent.data.type))
                    return this.selectParentString(node.parent) + "." + node.parent.data.name + "[0]";
                else
                    return this.selectParentString(node.parent) + "." + node.parent.data.name;
            }
            else if (this.strContain(node.parent.data.type)) {
                return node.parent.data.name + "[0]";
            }
            else {
                return node.parent.data.name;
            }
        }
        else {
            return "";
        }
    }
    //初始化Schema格式的Entity
    /**
     * @return {?}
     */
    OninitSchemaEntity() {
        if (this.injectedEntities && this.injectedEntities.length > 0) {
            this.entities = [];
            /** @type {?} */
            let entityTree = {
                data: {
                    "id": Math.random(),
                    "name": "",
                    "type": "",
                    "description": "",
                    "schema": "",
                    "nodeType": ""
                },
                children: []
            };
            //实体显示禁忌表
            /** @type {?} */
            let navigatorMap = new Map();
            //解析每一个注入实体，将其转化为TreeNode
            this.injectedEntities.forEach((/**
             * @param {?} injectEntity
             * @return {?}
             */
            injectEntity => {
                //根据schema名称找到对应的schema
                /** @type {?} */
                let currentSchema = this.schema.get(injectEntity.schemaName);
                this.currentSchemaName = injectEntity.schemaName;
                switch (injectEntity.injectedType) {
                    //注入的若为实体集
                    case InjectedType.EntitySet:
                        {
                            //根据注入实体的名称找到对应的实体集
                            /** @type {?} */
                            let entitySet = currentSchema.entitySets.find((/**
                             * @param {?} entitySet
                             * @return {?}
                             */
                            entitySet => entitySet.name == injectEntity.injectedName));
                            //将找到的实体集转化为TreeNode
                            entityTree = this.ConvertEntitySet(entitySet, currentSchema, navigatorMap);
                        }
                        ;
                        break;
                    //注入的若为实体类型
                    case InjectedType.EntityType:
                        {
                            /** @type {?} */
                            let entityType = currentSchema.entityTypes.find((/**
                             * @param {?} entityType
                             * @return {?}
                             */
                            entityType => entityType.name == injectEntity.injectedName));
                            //将实体类型名称改为自定义名称
                            //entityType.name = injectEntity.name;
                            //将找到的实体类型转化为TreeNode
                            entityTree = this.ConvertEntityType(entityType, currentSchema, navigatorMap);
                        }
                        ;
                        break;
                }
                entityTree.data.name = injectEntity.name;
                //将每个预置对象转化后的TreeNode
                this.entities.push(entityTree);
            }));
        }
    }
    //实体集转化
    /**
     * @param {?} entitySet
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    ConvertEntitySet(entitySet, schema, navigatorMap) {
        if (entitySet) {
            //将entityset转化为TreeNode结构用于展示
            /** @type {?} */
            let treeNode = {
                data: {
                    "id": "",
                    "name": entitySet.name,
                    "type": "EntitySet" + "[" + entitySet.entityType + "]",
                    "description": entitySet.description,
                    "schema": this.currentSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化完成的实体集添加进禁忌表，防止循环转化
            navigatorMap.set(entitySet.name, InjectedType.EntitySet);
            //找到实体集对应的实体类型
            /** @type {?} */
            let entityType = schema.entityTypes.find((/**
             * @param {?} entityType
             * @return {?}
             */
            entityType => entityType.name == entitySet.entityType));
            //将entitytype转化为TreeNode结构用于展示
            this.ConvertEntityType(entityType, schema, navigatorMap).children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            child => {
                treeNode.children.push(child);
            }));
            return treeNode;
        }
        //实体集为空或未定义则返回空
        else
            return null;
    }
    //实体类型转化
    /**
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    ConvertEntityType(entityType, schema, navigatorMap) {
        if (entityType) {
            /** @type {?} */
            let treeNode = {
                data: {
                    "id": entityType.id,
                    "name": entityType.name,
                    "type": "EntityType",
                    "description": entityType.description,
                    "schema": this.currentSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化的entitytype添加进禁忌表
            navigatorMap.set(entityType.name + entityType.id, InjectedType.EntityType);
            //将每个属性转化为每个TreeNode
            entityType.properties.forEach((/**
             * @param {?} property
             * @return {?}
             */
            property => {
                /** @type {?} */
                let propertyTree = {
                    data: {
                        "id": Math.random(),
                        "name": "",
                        "type": property.type,
                        "description": property.description,
                        "schema": this.currentSchemaName,
                        "nodeType": "Simple"
                    },
                    children: []
                };
                //根据条件判断该属性是否为主键
                if (property.name == entityType.key) {
                    propertyTree.data.name = property.name + "*";
                }
                else {
                    propertyTree.data.name = property.name;
                }
                propertyTree.parent = treeNode;
                treeNode.children.push(propertyTree);
            }));
            entityType.navigationProperties.forEach((/**
             * @param {?} navigationProperty
             * @return {?}
             */
            navigationProperty => {
                //判断是否导航属性对应的名称不在禁忌表中
                if (!(navigatorMap.get(navigationProperty.name + navigationProperty.navigationId))) {
                    if (navigationProperty.type == NavigationType.EntitySet) {
                        //若导航属性类型为实体集
                        /** @type {?} */
                        let entitySet = schema.entitySets.find((/**
                         * @param {?} entitySet
                         * @return {?}
                         */
                        entitySet => entitySet.name == navigationProperty.name));
                        /** @type {?} */
                        let a = this.ConvertEntitySet(entitySet, schema, navigatorMap);
                        a.parent = treeNode;
                        treeNode.children.push(a);
                    } //若为实体类型
                    else if (navigationProperty.type == NavigationType.EntityType) {
                        /** @type {?} */
                        let entityType = schema.entityTypes.find((/**
                         * @param {?} entitytype
                         * @return {?}
                         */
                        entitytype => entitytype.id == navigationProperty.navigationId && entitytype.name == navigationProperty.name));
                        /** @type {?} */
                        let a = this.ConvertEntityType(entityType, schema, navigatorMap);
                        a.parent = treeNode;
                        treeNode.children.push(a);
                    }
                }
                //若导航属性在禁忌表中
                else {
                    /** @type {?} */
                    let navigatortree = {
                        data: {
                            "id": navigationProperty.navigationId,
                            "name": navigationProperty.name,
                            "type": "",
                            "description": navigationProperty.description,
                            "schema": this.currentSchemaName,
                            "nodeType": "Complex"
                        },
                        children: [],
                    };
                    switch (navigatorMap.get(navigationProperty.name)) {
                        case NavigationType.EntitySet:
                            navigatortree.data.type = "EntitySet";
                            break;
                        case NavigationType.EntityType:
                            navigatortree.data.type = "EntityType";
                            break;
                    }
                    navigatortree.parent = treeNode;
                    treeNode.children.push(navigatortree);
                }
            }));
            return treeNode;
        }
        //若entitytype为空或未定义
        else
            return null;
    }
    /**
     * @private
     * @param {?} strr
     * @return {?}
     */
    strContain(strr) {
        /** @type {?} */
        let temp = strr + "";
        if (temp.indexOf("EntitySet") != -1)
            return true;
        else
            return false;
    }
    //===========分割线==========NewSchema===============
    /**
     * \@description 初始化NewSchema
     * @return {?}
     */
    onInitNewSchema() {
        //注入实体存在且有值
        if (this.injectedEntities && this.injectedEntities.length > 0) {
            //初始化：entities(页面显示内容);rootNode(跟节点);navigatorMap1(禁忌列表)
            this.entities = [];
            /** @type {?} */
            let rootNode = {
                data: {
                    "id": Math.random(),
                    "name": "",
                    "description": "",
                    "type": "",
                    "schema": "",
                    "nodeType": ""
                },
                children: []
            };
            /** @type {?} */
            let navigatorMap1 = new Map();
            //根据注入实体的schemaName找到对应的rootSchema
            this.injectedEntities.forEach((/**
             * @param {?} injectEntity
             * @return {?}
             */
            injectEntity => {
                /** @type {?} */
                let rootSchema = this.newSchemaMap.get(injectEntity.schemaName);
                this.currentNewSchemaName = injectEntity.schemaName;
                //根据注入实体类型--->执行不同方法
                switch (injectEntity.injectedType) {
                    case InjectedType.EntitySet:
                        {
                            /** @type {?} */
                            let entitySet = rootSchema.entitySets.find((/**
                             * @param {?} set
                             * @return {?}
                             */
                            set => set.code == injectEntity.injectedName));
                            rootNode = this.convertNewEntitySet(entitySet, rootSchema, navigatorMap1);
                        }
                        ;
                        break;
                    case InjectedType.EntityType:
                        {
                            /** @type {?} */
                            let entityType = rootSchema.entityTypes.find((/**
                             * @param {?} type
                             * @return {?}
                             */
                            type => type.code == injectEntity.injectedName));
                            rootNode = this.convertNewEntityType(entityType, rootSchema, navigatorMap1);
                        }
                        ;
                        break;
                }
                rootNode.data.name = injectEntity.name;
                this.entities.push(rootNode);
            }));
        }
    }
    /**
     * \@description 转换实体类型(EntityType)
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    convertNewEntityType(entityType, schema, navigatorMap1) {
        if (entityType) {
            //初始化：NewEntityType的节点
            /** @type {?} */
            let treeNode = {
                data: {
                    "id": entityType.code,
                    "name": entityType.code,
                    "description": entityType.name,
                    "type": "EntityType",
                    "schema": this.currentNewSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //pro
            navigatorMap1.set(entityType.name + entityType.code, InjectedType.EntityType);
            entityType.properties.forEach((/**
             * @param {?} pro
             * @return {?}
             */
            pro => {
                /** @type {?} */
                let proNode = {
                    data: {
                        "id": Math.random(),
                        "name": pro.code,
                        "description": pro.name,
                        "type": pro.dataType,
                        "schema": this.currentNewSchemaName,
                        "nodeType": "Simple"
                    },
                    children: []
                };
                proNode.parent = treeNode;
                treeNode.children.push(proNode);
            }));
            //naPro
            entityType.navigationProperties.forEach((/**
             * @param {?} naPro
             * @return {?}
             */
            naPro => {
                //判断是否导航属性对应的名称在禁忌表中
                if (!(navigatorMap1.get(naPro.navigationName + naPro.code))) {
                    if (naPro.navigationType == NewNavigationType.EntityType) {
                        /** @type {?} */
                        let entityType = schema.entityTypes.find((/**
                         * @param {?} type1
                         * @return {?}
                         */
                        type1 => type1.code == naPro.navigationName));
                        /** @type {?} */
                        let a = this.convertNewEntityType(entityType, schema, navigatorMap1);
                        a.parent = treeNode;
                        treeNode.children.push(a);
                    }
                    else if (naPro.navigationType == NewNavigationType.EntitySet) {
                        /** @type {?} */
                        let entitySet = schema.entitySets.find((/**
                         * @param {?} set1
                         * @return {?}
                         */
                        set1 => set1.code == naPro.navigationName));
                        /** @type {?} */
                        let a = this.convertNewEntitySet(entitySet, schema, navigatorMap1);
                        a.parent = treeNode;
                        treeNode.children.push(a);
                    }
                }
                //若导航属性在禁忌表中
                else {
                    /** @type {?} */
                    let naProNode = {
                        data: {
                            "id": naPro.navigationName,
                            "name": naPro.code,
                            "description": naPro.name,
                            "type": "",
                            "schema": this.currentNewSchemaName,
                            "nodeType": "Complex"
                        },
                        children: [],
                    };
                    switch (navigatorMap1.get(naPro.navigationName)) {
                        case NewNavigationType.EntitySet:
                            naProNode.data.type = "EntitySet";
                            break;
                        case NewNavigationType.EntityType:
                            naProNode.data.type = "EntityType";
                            break;
                    }
                    naProNode.parent = treeNode,
                        treeNode.children.push(naProNode);
                }
            }));
            return treeNode;
        }
        return null;
    }
    /**
     * \@description 转换实体集(EntitySet)
     * @param {?} set
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    convertNewEntitySet(set, schema, navigatorMap1) {
        if (set) {
            //将entityset转化为TreeNode结构用于展示
            /** @type {?} */
            let treeNode = {
                data: {
                    "id": Math.random(),
                    "name": set.code,
                    "description": set.name,
                    "type": "EntitySet" + "[" + set.code + "]",
                    "schema": this.currentNewSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化完成的实体集添加进禁忌表，防止循环转化
            navigatorMap1.set(set.name, InjectedType.EntitySet);
            //找到实体集对应的实体类型
            /** @type {?} */
            let entityType = schema.entityTypes.find((/**
             * @param {?} entityType
             * @return {?}
             */
            entityType => entityType.code == set.entityType));
            //将entitytype转化为TreeNode结构用于展示
            this.convertNewEntityType(entityType, schema, navigatorMap1).children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            child => {
                treeNode.children.push(child);
            }));
            return treeNode;
        }
        //实体集为空或未定义则返回空
        else
            return null;
    }
    //顶级过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    searchByFilter($event) {
        //存在过滤值&&treedata有值
        if ($event.value && $event.value != "" && this.treedata) {
            //children元素深度遍历
            for (let i = 0; i < this.treedata.length; i++) {
                this.searchByFilter1($event.value, this.treedata[i]);
            }
            //过滤undefined
            for (let i = 0; i < this.treedata.length; i++) {
                this.filter1(this.treedata[i]);
            }
        }
    }
    //children元素过滤$event.value
    /**
     * @param {?} searchValue
     * @param {?} node
     * @return {?}
     */
    searchByFilter1(searchValue, node) {
        if (node.children && node.children.length > 0) {
            for (let i = 0; i < node.children.length; i++) {
                this.searchByFilter1(searchValue, node.children[i]);
            }
        }
        else if (node.children.length == 0) {
            if (node.data.description.indexOf(searchValue) == -1) {
                //indexOf返回指定字符在字符串中第一次出现的位置
                //-1代表没有出现
                /** @type {?} */
                let temp = -1;
                if (node.parent != null) {
                    for (let ii = 0; ii < node.parent.children.length; ii++) {
                        if (node.parent.children[ii] && node.parent.children[ii].data.description == node.data.description) {
                            temp = ii;
                            delete node.parent.children[temp];
                            break;
                        }
                    }
                }
            }
        }
    }
    //去除undefinde元素
    /**
     * @param {?} node
     * @return {?}
     */
    filter1(node) {
        if (node.children && node.children.length > 0) {
            /** @type {?} */
            var b = node.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            item => item != undefined));
            node.children = b;
            for (let i = 0; i < node.children.length; i++) {
                if (node.children[i].children && node.children[i].children.length > 0) {
                    this.filter1(node.children[i]);
                }
            }
        }
        else if (node.children.length == 0) {
        }
    }
    //过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    filter($event) {
        //开始过滤
        // this.searchByFilter($event);
        // this.searchByFilter($event);
        this.tt.searchHandle.search('description', $event.value, 'client');
    }
}
ExpressionEntityGridComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-expression-entity-grid',
                template: "<farris-treetable #tt \r\n[data]=\"treedata\"\r\n[fit]=\"true\" \r\n[fitColumns]=\"true\"\r\n[fixedHeader]=\"true\"\r\n[columns]=\"cols\" \r\n[idField]=\"'id'\"\r\n[height]=\"268\"\r\n[showFilterBar]=\"true\"\r\n[resizableColumns]=\"true\"\r\n[showHeader]=\"true\"\r\n[enableFindText]=\"true\"\r\n[virtualized]=\"false\"\r\n(dblClick)=\"dblClick($event)\"\r\n(cellClick)=\"selectRowChange($event)\"\r\n(search)=\"filter($event)\"\r\n>\r\n</farris-treetable>",
                styles: [""]
            }] }
];
/** @nocollapse */
ExpressionEntityGridComponent.ctorParameters = () => [];
ExpressionEntityGridComponent.propDecorators = {
    schema: [{ type: Input }],
    newSchemaMap: [{ type: Input }],
    injectedEntities: [{ type: Input }],
    selectentitychange: [{ type: Output }],
    dbclickInsert: [{ type: Output }],
    tt: [{ type: ViewChild, args: ['tt',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ExpressionEntityGridComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ExpressionEntityGridComponent.prototype.localePipe;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentNode;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.entities;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentSchemaName;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentNewSchemaName;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentParent;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.schema;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.newSchemaMap;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.injectedEntities;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.selectentitychange;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.dbclickInsert;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.tt;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.cols;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.treedata;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbi1lbnRpdHktZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN2Yy9leHByZXNzaW9uLyIsInNvdXJjZXMiOlsibGliL2V4cHJlc3Npb24tZW50aXR5LWdyaWQvZXhwcmVzc2lvbi1lbnRpdHktZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXFCLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUNsSCxPQUFPLEVBQVUsY0FBYyxFQUF5QixNQUFNLFdBQVcsQ0FBQztBQUMxRSxPQUFPLEVBQVksa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzlFLE9BQU8sRUFBaUIsaUJBQWlCLEVBQTJCLE1BQU0sbUJBQW1CLENBQUM7QUFDOUYsT0FBTyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBT3ZCLE1BQU0sT0FBTyw2QkFBNkI7Ozs7O0lBMkJ4QztRQXJCQSxnQkFBVyxHQUFnQixJQUFJLFdBQVcsQ0FBQztRQUMzQyxhQUFRLEdBQWUsRUFBRSxDQUFDO1FBQzFCLHNCQUFpQixHQUFXLEVBQUUsQ0FBQztRQUMvQix5QkFBb0IsR0FBVyxFQUFFLENBQUM7UUFDbEMsa0JBQWEsR0FBVyxFQUFFLENBQUM7UUFDbEIsV0FBTSxHQUFHLElBQUksR0FBRyxFQUFrQixDQUFDO1FBQ25DLGlCQUFZLEdBQUcsSUFBSSxHQUFHLEVBQXFCLENBQUM7UUFFM0MsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUN4QyxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFF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LFFBQVEsRUFBRSw0QkFBNEI7Z0JBQ3RDLHFkQUFzRDs7YUFFdkQ7Ozs7O3FCQVlFLEtBQUs7MkJBQ0wsS0FBSzsrQkFDTCxLQUFLO2lDQUNMLE1BQU07NEJBQ04sTUFBTTtpQkFFTixTQUFTLFNBQUMsSUFBSTs7Ozs7OztJQWRmLGlEQUF5Qjs7Ozs7SUFDekIsbURBQStDOztJQUUvQyxvREFBMkM7O0lBQzNDLGlEQUEwQjs7SUFDMUIsMERBQStCOztJQUMvQiw2REFBa0M7O0lBQ2xDLHNEQUEyQjs7SUFDM0IsK0NBQTRDOztJQUM1QyxxREFBcUQ7O0lBQ3JELHlEQUE0Qzs7SUFDNUMsMkRBQWtEOztJQUNsRCxzREFBNkM7O0lBRTdDLDJDQUF3Qzs7SUFFeEMsNkNBQVU7O0lBQ1YsaURBQWlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uQ2hhbmdlcywgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFNjaGVtYSwgTmF2aWdhdGlvblR5cGUsIEVudGl0eVR5cGUsIEVudGl0eVNldCB9IGZyb20gJy4uL3NjaGVtYSc7XHJcbmltcG9ydCB7IFRyZWVOb2RlLCBUcmVlVGFibGVDb21wb25lbnQgfSBmcm9tICdAZmFycmlzL3VpLXRyZWV0YWJsZSc7XHJcbmltcG9ydCB7IEN1cnJlbnROb2RlIH0gZnJvbSAnLi4vY3VycmVudE5vZGUnO1xyXG5pbXBvcnQgeyBJbmplY3RlZEVudGl0eSB9IGZyb20gJy4uL2luamVjdGVkLWVudGl0eSc7XHJcbmltcG9ydCB7IEluamVjdGVkVHlwZSB9IGZyb20gJy4uL2luamVjdGVkLXR5cGUnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uRWRpdG9yTG9jYWxlUGlwZSB9IGZyb20gJy4uL2V4cHJlc3Npb24tZWRpdG9yLWxvY2FsZS5waXBlJztcclxuaW1wb3J0IHsgTmV3RW50aXR5VHlwZSwgTmV3TmF2aWdhdGlvblR5cGUsIE5ld1NjaGVtYSwgTmV3RW50aXR5U2V0IH0gZnJvbSAnLi4vaTE4bi9OZXdTY2hlbWEnO1xyXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAtZXhwcmVzc2lvbi1lbnRpdHktZ3JpZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2V4cHJlc3Npb24tZW50aXR5LWdyaWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2V4cHJlc3Npb24tZW50aXR5LWdyaWQuY29tcG9uZW50LmNzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBFeHByZXNzaW9uRW50aXR5R3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgLy/lrprkuYlpMThu5qCH6K+GXHJcbiAgcHJpdmF0ZSBsb2NhbGVJZDogc3RyaW5nO1xyXG4gIHByaXZhdGUgbG9jYWxlUGlwZTogRXhwcmVzc2lvbkVkaXRvckxvY2FsZVBpcGU7XHJcblxyXG4gIGN1cnJlbnROb2RlOiBDdXJyZW50Tm9kZSA9IG5ldyBDdXJyZW50Tm9kZTtcclxuICBlbnRpdGllczogVHJlZU5vZGVbXSA9IFtdO1xyXG4gIGN1cnJlbnRTY2hlbWFOYW1lOiBzdHJpbmcgPSBcIlwiO1xyXG4gIGN1cnJlbnROZXdTY2hlbWFOYW1lOiBzdHJpbmcgPSBcIlwiO1xyXG4gIGN1cnJlbnRQYXJlbnQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgQElucHV0KCkgc2NoZW1hID0gbmV3IE1hcDxzdHJpbmcsIFNjaGVtYT4oKTtcclxuICBASW5wdXQoKSBuZXdTY2hlbWFNYXAgPSBuZXcgTWFwPHN0cmluZywgTmV3U2NoZW1hPigpO1xyXG4gIEBJbnB1dCgpIGluamVjdGVkRW50aXRpZXM6IEluamVjdGVkRW50aXR5W107XHJcbiAgQE91dHB1dCgpIHNlbGVjdGVudGl0eWNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAT3V0cHV0KCkgZGJjbGlja0luc2VydCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgQFZpZXdDaGlsZCgndHQnKSB0dDogVHJlZVRhYmxlQ29tcG9uZW50O1xyXG5cclxuICBjb2xzID0gW107XHJcbiAgcHVibGljIHRyZWVkYXRhOiBUcmVlTm9kZVtdID0gW107XHJcblxyXG4gIC8vIGRhdGE6IFRyZWVOb2RlW10gPSBbXTtcclxuICAvLyB0ZW1wMjogVHJlZU5vZGU7XHJcbiAgLy8gdGVtcDM6IFRyZWVOb2RlO1xyXG4gIC8vIGFsbDogVHJlZU5vZGVbXSA9IFtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIC8v5Yid5aeL5YyWaTE4buagh+ivhlxyXG4gICAgdGhpcy5sb2NhbGVJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZUNvZGUnKTtcclxuICAgIHRoaXMubG9jYWxlUGlwZSA9IG5ldyBFeHByZXNzaW9uRWRpdG9yTG9jYWxlUGlwZSh0aGlzLmxvY2FsZUlkKTtcclxuICB9XHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmNvbHMgPSBbXHJcbiAgICAgIHsgZmllbGQ6ICduYW1lJywgdGl0bGU6IHRoaXMubG9jYWxlUGlwZS50cmFuc2Zvcm0oXCJFbnRpdHlMaXN0XCIpIH0sXHJcbiAgICAgIHsgZmllbGQ6ICdkZXNjcmlwdGlvbicsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiRW50aXR5TmFtZVwiKSB9LFxyXG4gICAgICB7IGZpZWxkOiAndHlwZScsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiRW50aXR5VHlwZVwiKSwgd2lkdGg6ICcxMDAnIH1cclxuICAgIF07XHJcbiAgICBpZiAodGhpcy5uZXdTY2hlbWFNYXAgJiYgdGhpcy5uZXdTY2hlbWFNYXAuc2l6ZSA+IDApIHtcclxuICAgICAgdGhpcy5vbkluaXROZXdTY2hlbWEoKTtcclxuICAgICAgdGhpcy50cmVlZGF0YSA9IF8uY2xvbmVEZWVwKHRoaXMuZW50aXRpZXMpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjaGVtYSAmJiB0aGlzLnNjaGVtYS5zaXplID4gMCkge1xyXG4gICAgICB0aGlzLk9uaW5pdFNjaGVtYUVudGl0eSgpO1xyXG4gICAgICB0aGlzLnRyZWVkYXRhID0gXy5jbG9uZURlZXAodGhpcy5lbnRpdGllcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNlbGVjdFJvd0NoYW5nZSgkZXZlbnQpIHtcclxuICAgIHRoaXMuY3VycmVudE5vZGUgPSBuZXcgQ3VycmVudE5vZGU7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLmlkID0gJGV2ZW50Lm5vZGUuZGF0YS5pZDtcclxuICAgIHRoaXMuY3VycmVudE5vZGUubmFtZSA9ICRldmVudC5ub2RlLmRhdGEubmFtZTtcclxuICAgIHRoaXMuY3VycmVudE5vZGUucGFyZW50TmFtZSA9IHRoaXMuc2VsZWN0UGFyZW50U3RyaW5nKCRldmVudC5ub2RlKTtcclxuICAgIHRoaXMuY3VycmVudFBhcmVudCA9IHRoaXMuc2VsZWN0UGFyZW50U3RyaW5nKCRldmVudC5ub2RlKTtcclxuICAgIHRoaXMuY3VycmVudE5vZGUuc2NoZW1hID0gJGV2ZW50Lm5vZGUuZGF0YS5zY2hlbWE7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLm5vZGVUeXBlID0gJGV2ZW50Lm5vZGUuZGF0YS5ub2RlVHlwZTtcclxuICAgIHRoaXMuY3VycmVudE5vZGUuZGVzY3JpcHRpb24gPSAkZXZlbnQubm9kZS5kYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5zZWxlY3RlbnRpdHljaGFuZ2UuZW1pdCh0aGlzLmN1cnJlbnROb2RlKTtcclxuICB9XHJcbiAgZGJsQ2xpY2soJGV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50UGFyZW50KSB7XHJcbiAgICAgIHRoaXMuZGJjbGlja0luc2VydC5lbWl0KHRoaXMuY3VycmVudFBhcmVudCArIFwiLlwiICsgJGV2ZW50LmRhdGEubmFtZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5kYmNsaWNrSW5zZXJ0LmVtaXQoJGV2ZW50LmRhdGEubmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG5nT25DaGFuZ2VzKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMubmV3U2NoZW1hTWFwICYmIHRoaXMubmV3U2NoZW1hTWFwLnNpemUgPiAwKSB7XHJcbiAgICAgIHRoaXMub25Jbml0TmV3U2NoZW1hKCk7XHJcbiAgICAgIHRoaXMudHJlZWRhdGEgPSBfLmNsb25lRGVlcCh0aGlzLmVudGl0aWVzKTtcclxuICAgICAgLy8gdGhpcy50cmVlZGF0YSA9IHRoaXMuZW50aXRpZXM7XHJcbiAgICAgIC8vIHRoaXMudHJlZWRhdGEgPSBbLi4udGhpcy50cmVlZGF0YV07XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2NoZW1hICYmIHRoaXMuc2NoZW1hLnNpemUgPiAwKSB7XHJcbiAgICAgIHRoaXMuT25pbml0U2NoZW1hRW50aXR5KCk7XHJcbiAgICAgIHRoaXMudHJlZWRhdGEgPSBfLmNsb25lRGVlcCh0aGlzLmVudGl0aWVzKTtcclxuICAgICAgLy8gdGhpcy50cmVlZGF0YSA9IHRoaXMuZW50aXRpZXM7XHJcbiAgICAgIC8vIHRoaXMudHJlZWRhdGEgPSBbLi4udGhpcy50cmVlZGF0YV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8v6YCS5b2S54i26IqC54K55ZCNXHJcbiAgc2VsZWN0UGFyZW50U3RyaW5nKG5vZGU6IGFueSkge1xyXG4gICAgaWYgKG5vZGUucGFyZW50KSB7XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdFBhcmVudFN0cmluZyhub2RlLnBhcmVudCkpIHtcclxuICAgICAgICBpZiAodGhpcy5zdHJDb250YWluKG5vZGUucGFyZW50LmRhdGEudHlwZSkpXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RQYXJlbnRTdHJpbmcobm9kZS5wYXJlbnQpICsgXCIuXCIgKyBub2RlLnBhcmVudC5kYXRhLm5hbWUgKyBcIlswXVwiO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdFBhcmVudFN0cmluZyhub2RlLnBhcmVudCkgKyBcIi5cIiArIG5vZGUucGFyZW50LmRhdGEubmFtZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLnN0ckNvbnRhaW4obm9kZS5wYXJlbnQuZGF0YS50eXBlKSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudC5kYXRhLm5hbWUgKyBcIlswXVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudC5kYXRhLm5hbWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvL+WIneWni+WMllNjaGVtYeagvOW8j+eahEVudGl0eVxyXG4gIE9uaW5pdFNjaGVtYUVudGl0eSgpIHtcclxuICAgIGlmICh0aGlzLmluamVjdGVkRW50aXRpZXMgJiYgdGhpcy5pbmplY3RlZEVudGl0aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5lbnRpdGllcyA9IFtdO1xyXG4gICAgICBsZXQgZW50aXR5VHJlZTogVHJlZU5vZGUgPSB7XHJcbiAgICAgICAgZGF0YTpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcImlkXCI6IE1hdGgucmFuZG9tKCksXHJcbiAgICAgICAgICBcIm5hbWVcIjogXCJcIixcclxuICAgICAgICAgIFwidHlwZVwiOiBcIlwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxyXG4gICAgICAgICAgXCJzY2hlbWFcIjogXCJcIixcclxuICAgICAgICAgIFwibm9kZVR5cGVcIjogXCJcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIH07XHJcbiAgICAgIC8v5a6e5L2T5pi+56S656aB5b+M6KGoXHJcbiAgICAgIGxldCBuYXZpZ2F0b3JNYXAgPSBuZXcgTWFwPHN0cmluZywgSW5qZWN0ZWRUeXBlPigpO1xyXG4gICAgICAvL+ino+aekOavj+S4gOS4quazqOWFpeWunuS9k++8jOWwhuWFtui9rOWMluS4ulRyZWVOb2RlXHJcbiAgICAgIHRoaXMuaW5qZWN0ZWRFbnRpdGllcy5mb3JFYWNoKGluamVjdEVudGl0eSA9PiB7XHJcblxyXG4gICAgICAgIC8v5qC55o2uc2NoZW1h5ZCN56ew5om+5Yiw5a+55bqU55qEc2NoZW1hXHJcbiAgICAgICAgbGV0IGN1cnJlbnRTY2hlbWEgPSB0aGlzLnNjaGVtYS5nZXQoaW5qZWN0RW50aXR5LnNjaGVtYU5hbWUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNjaGVtYU5hbWUgPSBpbmplY3RFbnRpdHkuc2NoZW1hTmFtZTtcclxuICAgICAgICBzd2l0Y2ggKGluamVjdEVudGl0eS5pbmplY3RlZFR5cGUpIHtcclxuICAgICAgICAgIC8v5rOo5YWl55qE6Iul5Li65a6e5L2T6ZuGXHJcbiAgICAgICAgICBjYXNlIEluamVjdGVkVHlwZS5FbnRpdHlTZXQ6IHtcclxuICAgICAgICAgICAgLy/moLnmja7ms6jlhaXlrp7kvZPnmoTlkI3np7Dmib7liLDlr7nlupTnmoTlrp7kvZPpm4ZcclxuICAgICAgICAgICAgbGV0IGVudGl0eVNldCA9IGN1cnJlbnRTY2hlbWEuZW50aXR5U2V0cy5maW5kKGVudGl0eVNldCA9PiBlbnRpdHlTZXQubmFtZSA9PSBpbmplY3RFbnRpdHkuaW5qZWN0ZWROYW1lKTtcclxuICAgICAgICAgICAgLy/lsIbmib7liLDnmoTlrp7kvZPpm4bovazljJbkuLpUcmVlTm9kZVxyXG4gICAgICAgICAgICBlbnRpdHlUcmVlID0gdGhpcy5Db252ZXJ0RW50aXR5U2V0KGVudGl0eVNldCwgY3VycmVudFNjaGVtYSwgbmF2aWdhdG9yTWFwKTtcclxuICAgICAgICAgIH07IGJyZWFrO1xyXG4gICAgICAgICAgLy/ms6jlhaXnmoToi6XkuLrlrp7kvZPnsbvlnotcclxuICAgICAgICAgIGNhc2UgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGU6IHtcclxuICAgICAgICAgICAgbGV0IGVudGl0eVR5cGUgPSBjdXJyZW50U2NoZW1hLmVudGl0eVR5cGVzLmZpbmQoZW50aXR5VHlwZSA9PiBlbnRpdHlUeXBlLm5hbWUgPT0gaW5qZWN0RW50aXR5LmluamVjdGVkTmFtZSk7XHJcbiAgICAgICAgICAgIC8v5bCG5a6e5L2T57G75Z6L5ZCN56ew5pS55Li66Ieq5a6a5LmJ5ZCN56ewXHJcbiAgICAgICAgICAgIC8vZW50aXR5VHlwZS5uYW1lID0gaW5qZWN0RW50aXR5Lm5hbWU7XHJcbiAgICAgICAgICAgIC8v5bCG5om+5Yiw55qE5a6e5L2T57G75Z6L6L2s5YyW5Li6VHJlZU5vZGVcclxuICAgICAgICAgICAgZW50aXR5VHJlZSA9IHRoaXMuQ29udmVydEVudGl0eVR5cGUoZW50aXR5VHlwZSwgY3VycmVudFNjaGVtYSwgbmF2aWdhdG9yTWFwKTtcclxuICAgICAgICAgIH07IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbnRpdHlUcmVlLmRhdGEubmFtZSA9IGluamVjdEVudGl0eS5uYW1lO1xyXG4gICAgICAgIC8v5bCG5q+P5Liq6aKE572u5a+56LGh6L2s5YyW5ZCO55qEVHJlZU5vZGVcclxuICAgICAgICB0aGlzLmVudGl0aWVzLnB1c2goZW50aXR5VHJlZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgLy/lrp7kvZPpm4bovazljJZcclxuICBDb252ZXJ0RW50aXR5U2V0KGVudGl0eVNldDogRW50aXR5U2V0LCBzY2hlbWE6IFNjaGVtYSwgbmF2aWdhdG9yTWFwOiBhbnkpOiBUcmVlTm9kZSB7XHJcbiAgICBpZiAoZW50aXR5U2V0KSB7XHJcbiAgICAgIC8v5bCGZW50aXR5c2V06L2s5YyW5Li6VHJlZU5vZGXnu5PmnoTnlKjkuo7lsZXnpLpcclxuICAgICAgbGV0IHRyZWVOb2RlOiBUcmVlTm9kZSA9IHtcclxuICAgICAgICBkYXRhOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiaWRcIjogXCJcIixcclxuICAgICAgICAgIFwibmFtZVwiOiBlbnRpdHlTZXQubmFtZSxcclxuICAgICAgICAgIFwidHlwZVwiOiBcIkVudGl0eVNldFwiICsgXCJbXCIgKyBlbnRpdHlTZXQuZW50aXR5VHlwZSArIFwiXVwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBlbnRpdHlTZXQuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBcInNjaGVtYVwiOiB0aGlzLmN1cnJlbnRTY2hlbWFOYW1lLFxyXG4gICAgICAgICAgXCJub2RlVHlwZVwiOiBcIkNvbXBsZXhcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIH07XHJcbiAgICAgIC8v5bCG6L2s5YyW5a6M5oiQ55qE5a6e5L2T6ZuG5re75Yqg6L+b56aB5b+M6KGo77yM6Ziy5q2i5b6q546v6L2s5YyWXHJcbiAgICAgIG5hdmlnYXRvck1hcC5zZXQoZW50aXR5U2V0Lm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlTZXQpO1xyXG4gICAgICAvL+aJvuWIsOWunuS9k+mbhuWvueW6lOeahOWunuS9k+exu+Wei1xyXG4gICAgICBsZXQgZW50aXR5VHlwZSA9IHNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKGVudGl0eVR5cGUgPT4gZW50aXR5VHlwZS5uYW1lID09IGVudGl0eVNldC5lbnRpdHlUeXBlKTtcclxuICAgICAgLy/lsIZlbnRpdHl0eXBl6L2s5YyW5Li6VHJlZU5vZGXnu5PmnoTnlKjkuo7lsZXnpLpcclxuICAgICAgdGhpcy5Db252ZXJ0RW50aXR5VHlwZShlbnRpdHlUeXBlLCBzY2hlbWEsIG5hdmlnYXRvck1hcCkuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChjaGlsZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdHJlZU5vZGU7XHJcbiAgICB9XHJcbiAgICAvL+WunuS9k+mbhuS4uuepuuaIluacquWumuS5ieWImei/lOWbnuepulxyXG4gICAgZWxzZSByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLy/lrp7kvZPnsbvlnovovazljJZcclxuICBDb252ZXJ0RW50aXR5VHlwZShlbnRpdHlUeXBlOiBFbnRpdHlUeXBlLCBzY2hlbWE6IFNjaGVtYSwgbmF2aWdhdG9yTWFwOiBhbnkpOiBUcmVlTm9kZSB7XHJcbiAgICBpZiAoZW50aXR5VHlwZSkge1xyXG4gICAgICBsZXQgdHJlZU5vZGU6IFRyZWVOb2RlID0ge1xyXG4gICAgICAgIGRhdGE6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJpZFwiOiBlbnRpdHlUeXBlLmlkLFxyXG4gICAgICAgICAgXCJuYW1lXCI6IGVudGl0eVR5cGUubmFtZSxcclxuICAgICAgICAgIFwidHlwZVwiOiBcIkVudGl0eVR5cGVcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogZW50aXR5VHlwZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudFNjaGVtYU5hbWUsXHJcbiAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiQ29tcGxleFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgfTtcclxuICAgICAgLy/lsIbovazljJbnmoRlbnRpdHl0eXBl5re75Yqg6L+b56aB5b+M6KGoXHJcbiAgICAgIG5hdmlnYXRvck1hcC5zZXQoZW50aXR5VHlwZS5uYW1lICsgZW50aXR5VHlwZS5pZCwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICAvL+Wwhuavj+S4quWxnuaAp+i9rOWMluS4uuavj+S4qlRyZWVOb2RlXHJcbiAgICAgIGVudGl0eVR5cGUucHJvcGVydGllcy5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuICAgICAgICBsZXQgcHJvcGVydHlUcmVlOiBUcmVlTm9kZSA9IHtcclxuICAgICAgICAgIGRhdGE6XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFwiaWRcIjogTWF0aC5yYW5kb20oKSxcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBwcm9wZXJ0eS50eXBlLFxyXG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IHByb3BlcnR5LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBcInNjaGVtYVwiOiB0aGlzLmN1cnJlbnRTY2hlbWFOYW1lLFxyXG4gICAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiU2ltcGxlXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8v5qC55o2u5p2h5Lu25Yik5pat6K+l5bGe5oCn5piv5ZCm5Li65Li76ZSuXHJcbiAgICAgICAgaWYgKHByb3BlcnR5Lm5hbWUgPT0gZW50aXR5VHlwZS5rZXkpIHtcclxuICAgICAgICAgIHByb3BlcnR5VHJlZS5kYXRhLm5hbWUgPSBwcm9wZXJ0eS5uYW1lICsgXCIqXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcHJvcGVydHlUcmVlLmRhdGEubmFtZSA9IHByb3BlcnR5Lm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3BlcnR5VHJlZS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKHByb3BlcnR5VHJlZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZW50aXR5VHlwZS5uYXZpZ2F0aW9uUHJvcGVydGllcy5mb3JFYWNoKG5hdmlnYXRpb25Qcm9wZXJ0eSA9PiB7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKblr7zoiKrlsZ7mgKflr7nlupTnmoTlkI3np7DkuI3lnKjnpoHlv4zooajkuK1cclxuICAgICAgICBpZiAoIShuYXZpZ2F0b3JNYXAuZ2V0KG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lICsgbmF2aWdhdGlvblByb3BlcnR5Lm5hdmlnYXRpb25JZCkpKSB7XHJcbiAgICAgICAgICBpZiAobmF2aWdhdGlvblByb3BlcnR5LnR5cGUgPT0gTmF2aWdhdGlvblR5cGUuRW50aXR5U2V0KSB7XHJcbiAgICAgICAgICAgIC8v6Iul5a+86Iiq5bGe5oCn57G75Z6L5Li65a6e5L2T6ZuGXHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlTZXQgPSBzY2hlbWEuZW50aXR5U2V0cy5maW5kKGVudGl0eVNldCA9PiBlbnRpdHlTZXQubmFtZSA9PSBuYXZpZ2F0aW9uUHJvcGVydHkubmFtZSk7XHJcbiAgICAgICAgICAgIGxldCBhID0gdGhpcy5Db252ZXJ0RW50aXR5U2V0KGVudGl0eVNldCwgc2NoZW1hLCBuYXZpZ2F0b3JNYXApO1xyXG4gICAgICAgICAgICBhLnBhcmVudCA9IHRyZWVOb2RlO1xyXG4gICAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKGEpO1xyXG4gICAgICAgICAgfS8v6Iul5Li65a6e5L2T57G75Z6LXHJcbiAgICAgICAgICBlbHNlIGlmIChuYXZpZ2F0aW9uUHJvcGVydHkudHlwZSA9PSBOYXZpZ2F0aW9uVHlwZS5FbnRpdHlUeXBlKSB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gc2NoZW1hLmVudGl0eVR5cGVzLmZpbmQoZW50aXR5dHlwZSA9PiBlbnRpdHl0eXBlLmlkID09IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYXZpZ2F0aW9uSWQgJiYgZW50aXR5dHlwZS5uYW1lID09IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lKTtcclxuICAgICAgICAgICAgbGV0IGEgPSB0aGlzLkNvbnZlcnRFbnRpdHlUeXBlKGVudGl0eVR5cGUsIHNjaGVtYSwgbmF2aWdhdG9yTWFwKTtcclxuICAgICAgICAgICAgYS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/oi6Xlr7zoiKrlsZ7mgKflnKjnpoHlv4zooajkuK1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGxldCBuYXZpZ2F0b3J0cmVlOiBUcmVlTm9kZSA9IHtcclxuICAgICAgICAgICAgZGF0YTpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiaWRcIjogbmF2aWdhdGlvblByb3BlcnR5Lm5hdmlnYXRpb25JZCxcclxuICAgICAgICAgICAgICBcIm5hbWVcIjogbmF2aWdhdGlvblByb3BlcnR5Lm5hbWUsXHJcbiAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBuYXZpZ2F0aW9uUHJvcGVydHkuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgXCJzY2hlbWFcIjogdGhpcy5jdXJyZW50U2NoZW1hTmFtZSxcclxuICAgICAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiQ29tcGxleFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBzd2l0Y2ggKG5hdmlnYXRvck1hcC5nZXQobmF2aWdhdGlvblByb3BlcnR5Lm5hbWUpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2aWdhdGlvblR5cGUuRW50aXR5U2V0OlxyXG4gICAgICAgICAgICAgIG5hdmlnYXRvcnRyZWUuZGF0YS50eXBlID0gXCJFbnRpdHlTZXRcIjsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTmF2aWdhdGlvblR5cGUuRW50aXR5VHlwZTpcclxuICAgICAgICAgICAgICBuYXZpZ2F0b3J0cmVlLmRhdGEudHlwZSA9IFwiRW50aXR5VHlwZVwiOyBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5hdmlnYXRvcnRyZWUucGFyZW50ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKG5hdmlnYXRvcnRyZWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB0cmVlTm9kZTtcclxuICAgIH1cclxuICAgIC8v6IulZW50aXR5dHlwZeS4uuepuuaIluacquWumuS5iVxyXG4gICAgZWxzZSByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RyQ29udGFpbihzdHJyOiBhbnkpOiBib29sZWFuIHtcclxuICAgIGxldCB0ZW1wID0gc3RyciArIFwiXCI7XHJcbiAgICBpZiAodGVtcC5pbmRleE9mKFwiRW50aXR5U2V0XCIpICE9IC0xKVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGVsc2VcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy89PT09PT09PT09PeWIhuWJsue6vz09PT09PT09PT1OZXdTY2hlbWE9PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uIOWIneWni+WMlk5ld1NjaGVtYVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkluaXROZXdTY2hlbWEoKSB7XHJcbiAgICAvL+azqOWFpeWunuS9k+WtmOWcqOS4lOacieWAvFxyXG4gICAgaWYgKHRoaXMuaW5qZWN0ZWRFbnRpdGllcyAmJiB0aGlzLmluamVjdGVkRW50aXRpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvL+WIneWni+WMlu+8mmVudGl0aWVzKOmhtemdouaYvuekuuWGheWuuSk7cm9vdE5vZGUo6Lef6IqC54K5KTtuYXZpZ2F0b3JNYXAxKOemgeW/jOWIl+ihqClcclxuICAgICAgdGhpcy5lbnRpdGllcyA9IFtdO1xyXG4gICAgICBsZXQgcm9vdE5vZGU6IFRyZWVOb2RlID1cclxuICAgICAge1xyXG4gICAgICAgIGRhdGE6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJpZFwiOiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJcIixcclxuICAgICAgICAgIFwic2NoZW1hXCI6IFwiXCIsXHJcbiAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICBsZXQgbmF2aWdhdG9yTWFwMSA9IG5ldyBNYXA8c3RyaW5nLCBJbmplY3RlZFR5cGU+KCk7XHJcblxyXG4gICAgICAvL+agueaNruazqOWFpeWunuS9k+eahHNjaGVtYU5hbWXmib7liLDlr7nlupTnmoRyb290U2NoZW1hXHJcbiAgICAgIHRoaXMuaW5qZWN0ZWRFbnRpdGllcy5mb3JFYWNoKGluamVjdEVudGl0eSA9PiB7XHJcbiAgICAgICAgbGV0IHJvb3RTY2hlbWEgPSB0aGlzLm5ld1NjaGVtYU1hcC5nZXQoaW5qZWN0RW50aXR5LnNjaGVtYU5hbWUpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudE5ld1NjaGVtYU5hbWUgPSBpbmplY3RFbnRpdHkuc2NoZW1hTmFtZTtcclxuICAgICAgICAvL+agueaNruazqOWFpeWunuS9k+exu+Weiy0tLT7miafooYzkuI3lkIzmlrnms5VcclxuICAgICAgICBzd2l0Y2ggKGluamVjdEVudGl0eS5pbmplY3RlZFR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgSW5qZWN0ZWRUeXBlLkVudGl0eVNldDoge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5U2V0ID0gcm9vdFNjaGVtYS5lbnRpdHlTZXRzLmZpbmQoc2V0ID0+IHNldC5jb2RlID09IGluamVjdEVudGl0eS5pbmplY3RlZE5hbWUpO1xyXG4gICAgICAgICAgICByb290Tm9kZSA9IHRoaXMuY29udmVydE5ld0VudGl0eVNldChlbnRpdHlTZXQsIHJvb3RTY2hlbWEsIG5hdmlnYXRvck1hcDEpO1xyXG4gICAgICAgICAgfTsgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlOiB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gcm9vdFNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKHR5cGUgPT4gdHlwZS5jb2RlID09IGluamVjdEVudGl0eS5pbmplY3RlZE5hbWUpO1xyXG4gICAgICAgICAgICByb290Tm9kZSA9IHRoaXMuY29udmVydE5ld0VudGl0eVR5cGUoZW50aXR5VHlwZSwgcm9vdFNjaGVtYSwgbmF2aWdhdG9yTWFwMSk7XHJcbiAgICAgICAgICB9OyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcm9vdE5vZGUuZGF0YS5uYW1lID0gaW5qZWN0RW50aXR5Lm5hbWU7XHJcbiAgICAgICAgdGhpcy5lbnRpdGllcy5wdXNoKHJvb3ROb2RlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb24g6L2s5o2i5a6e5L2T57G75Z6LKEVudGl0eVR5cGUpXHJcbiAgICogQHBhcmFtIGVudGl0eVR5cGVcclxuICAgKiBAcGFyYW0gc2NoZW1hXHJcbiAgICogQHBhcmFtIG5hdmlnYXRvck1hcDFcclxuICAgKiBAcmV0dXJuc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb252ZXJ0TmV3RW50aXR5VHlwZShlbnRpdHlUeXBlOiBOZXdFbnRpdHlUeXBlLCBzY2hlbWE6IE5ld1NjaGVtYSwgbmF2aWdhdG9yTWFwMTogYW55KTogVHJlZU5vZGUge1xyXG4gICAgaWYgKGVudGl0eVR5cGUpIHtcclxuICAgICAgLy/liJ3lp4vljJbvvJpOZXdFbnRpdHlUeXBl55qE6IqC54K5XHJcbiAgICAgIGxldCB0cmVlTm9kZTogVHJlZU5vZGUgPVxyXG4gICAgICB7XHJcbiAgICAgICAgZGF0YTpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcImlkXCI6IGVudGl0eVR5cGUuY29kZSxcclxuICAgICAgICAgIFwibmFtZVwiOiBlbnRpdHlUeXBlLmNvZGUsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IGVudGl0eVR5cGUubmFtZSxcclxuICAgICAgICAgIFwidHlwZVwiOiBcIkVudGl0eVR5cGVcIixcclxuICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudE5ld1NjaGVtYU5hbWUsXHJcbiAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiQ29tcGxleFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vcHJvXHJcbiAgICAgIG5hdmlnYXRvck1hcDEuc2V0KGVudGl0eVR5cGUubmFtZSArIGVudGl0eVR5cGUuY29kZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVR5cGUpO1xyXG4gICAgICBlbnRpdHlUeXBlLnByb3BlcnRpZXMuZm9yRWFjaChwcm8gPT4ge1xyXG4gICAgICAgIGxldCBwcm9Ob2RlOiBUcmVlTm9kZSA9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YTpcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCJpZFwiOiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgICBcIm5hbWVcIjogcHJvLmNvZGUsXHJcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogcHJvLm5hbWUsXHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBwcm8uZGF0YVR5cGUsXHJcbiAgICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudE5ld1NjaGVtYU5hbWUsXHJcbiAgICAgICAgICAgIFwibm9kZVR5cGVcIjogXCJTaW1wbGVcIlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcHJvTm9kZS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKHByb05vZGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vbmFQcm9cclxuICAgICAgZW50aXR5VHlwZS5uYXZpZ2F0aW9uUHJvcGVydGllcy5mb3JFYWNoKG5hUHJvID0+IHtcclxuICAgICAgICAvL+WIpOaWreaYr+WQpuWvvOiIquWxnuaAp+WvueW6lOeahOWQjeensOWcqOemgeW/jOihqOS4rVxyXG4gICAgICAgIGlmICghKG5hdmlnYXRvck1hcDEuZ2V0KG5hUHJvLm5hdmlnYXRpb25OYW1lICsgbmFQcm8uY29kZSkpKSB7XHJcbiAgICAgICAgICBpZiAobmFQcm8ubmF2aWdhdGlvblR5cGUgPT0gTmV3TmF2aWdhdGlvblR5cGUuRW50aXR5VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5VHlwZSA9IHNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKHR5cGUxID0+IHR5cGUxLmNvZGUgPT0gbmFQcm8ubmF2aWdhdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICBsZXQgYSA9IHRoaXMuY29udmVydE5ld0VudGl0eVR5cGUoZW50aXR5VHlwZSwgc2NoZW1hLCBuYXZpZ2F0b3JNYXAxKTtcclxuICAgICAgICAgICAgYS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChhKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAobmFQcm8ubmF2aWdhdGlvblR5cGUgPT0gTmV3TmF2aWdhdGlvblR5cGUuRW50aXR5U2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlTZXQgPSBzY2hlbWEuZW50aXR5U2V0cy5maW5kKHNldDEgPT4gc2V0MS5jb2RlID09IG5hUHJvLm5hdmlnYXRpb25OYW1lKTtcclxuICAgICAgICAgICAgbGV0IGEgPSB0aGlzLmNvbnZlcnROZXdFbnRpdHlTZXQoZW50aXR5U2V0LCBzY2hlbWEsIG5hdmlnYXRvck1hcDEpO1xyXG4gICAgICAgICAgICBhLnBhcmVudCA9IHRyZWVOb2RlO1xyXG4gICAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKGEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+iLpeWvvOiIquWxnuaAp+WcqOemgeW/jOihqOS4rVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgbGV0IG5hUHJvTm9kZTogVHJlZU5vZGUgPVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRhOlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCJpZFwiOiBuYVByby5uYXZpZ2F0aW9uTmFtZSxcclxuICAgICAgICAgICAgICBcIm5hbWVcIjogbmFQcm8uY29kZSxcclxuICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IG5hUHJvLm5hbWUsXHJcbiAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgXCJzY2hlbWFcIjogdGhpcy5jdXJyZW50TmV3U2NoZW1hTmFtZSxcclxuICAgICAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiQ29tcGxleFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBzd2l0Y2ggKG5hdmlnYXRvck1hcDEuZ2V0KG5hUHJvLm5hdmlnYXRpb25OYW1lKSkge1xyXG4gICAgICAgICAgICBjYXNlIE5ld05hdmlnYXRpb25UeXBlLkVudGl0eVNldDpcclxuICAgICAgICAgICAgICBuYVByb05vZGUuZGF0YS50eXBlID0gXCJFbnRpdHlTZXRcIjsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTmV3TmF2aWdhdGlvblR5cGUuRW50aXR5VHlwZTpcclxuICAgICAgICAgICAgICBuYVByb05vZGUuZGF0YS50eXBlID0gXCJFbnRpdHlUeXBlXCI7IGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbmFQcm9Ob2RlLnBhcmVudCA9IHRyZWVOb2RlLFxyXG4gICAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKG5hUHJvTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRyZWVOb2RlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZGVzY3JpcHRpb24g6L2s5o2i5a6e5L2T6ZuGKEVudGl0eVNldClcclxuICAgKiBAcGFyYW0gc2V0XHJcbiAgICogQHBhcmFtIHNjaGVtYVxyXG4gICAqIEBwYXJhbSBuYXZpZ2F0b3JNYXAxXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBwdWJsaWMgY29udmVydE5ld0VudGl0eVNldChzZXQ6IE5ld0VudGl0eVNldCwgc2NoZW1hOiBOZXdTY2hlbWEsIG5hdmlnYXRvck1hcDE6IGFueSk6IFRyZWVOb2RlIHtcclxuICAgIGlmIChzZXQpIHtcclxuICAgICAgLy/lsIZlbnRpdHlzZXTovazljJbkuLpUcmVlTm9kZee7k+aehOeUqOS6juWxleekulxyXG4gICAgICBsZXQgdHJlZU5vZGU6IFRyZWVOb2RlID0ge1xyXG4gICAgICAgIGRhdGE6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJpZFwiOiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgXCJuYW1lXCI6IHNldC5jb2RlLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBzZXQubmFtZSxcclxuICAgICAgICAgIFwidHlwZVwiOiBcIkVudGl0eVNldFwiICsgXCJbXCIgKyBzZXQuY29kZSArIFwiXVwiLFxyXG4gICAgICAgICAgXCJzY2hlbWFcIjogdGhpcy5jdXJyZW50TmV3U2NoZW1hTmFtZSxcclxuICAgICAgICAgIFwibm9kZVR5cGVcIjogXCJDb21wbGV4XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICAvL+Wwhui9rOWMluWujOaIkOeahOWunuS9k+mbhua3u+WKoOi/m+emgeW/jOihqO+8jOmYsuatouW+queOr+i9rOWMllxyXG4gICAgICBuYXZpZ2F0b3JNYXAxLnNldChzZXQubmFtZSwgSW5qZWN0ZWRUeXBlLkVudGl0eVNldCk7XHJcbiAgICAgIC8v5om+5Yiw5a6e5L2T6ZuG5a+55bqU55qE5a6e5L2T57G75Z6LXHJcbiAgICAgIGxldCBlbnRpdHlUeXBlID0gc2NoZW1hLmVudGl0eVR5cGVzLmZpbmQoZW50aXR5VHlwZSA9PiBlbnRpdHlUeXBlLmNvZGUgPT0gc2V0LmVudGl0eVR5cGUpO1xyXG4gICAgICAvL+WwhmVudGl0eXR5cGXovazljJbkuLpUcmVlTm9kZee7k+aehOeUqOS6juWxleekulxyXG4gICAgICB0aGlzLmNvbnZlcnROZXdFbnRpdHlUeXBlKGVudGl0eVR5cGUsIHNjaGVtYSwgbmF2aWdhdG9yTWFwMSkuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XHJcbiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChjaGlsZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdHJlZU5vZGU7XHJcbiAgICB9XHJcbiAgICAvL+WunuS9k+mbhuS4uuepuuaIluacquWumuS5ieWImei/lOWbnuepulxyXG4gICAgZWxzZSByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8v6aG257qn6L+H5rukXHJcbiAgc2VhcmNoQnlGaWx0ZXIoJGV2ZW50KSB7XHJcbiAgICAvL+WtmOWcqOi/h+a7pOWAvCYmdHJlZWRhdGHmnInlgLxcclxuICAgIGlmICgkZXZlbnQudmFsdWUgJiYgJGV2ZW50LnZhbHVlICE9IFwiXCIgJiYgdGhpcy50cmVlZGF0YSkge1xyXG5cclxuICAgICAgLy9jaGlsZHJlbuWFg+e0oOa3seW6pumBjeWOhlxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlZWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLnNlYXJjaEJ5RmlsdGVyMSgkZXZlbnQudmFsdWUsIHRoaXMudHJlZWRhdGFbaV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL+i/h+a7pHVuZGVmaW5lZFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJlZWRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmZpbHRlcjEodGhpcy50cmVlZGF0YVtpXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL2NoaWxkcmVu5YWD57Sg6L+H5rukJGV2ZW50LnZhbHVlXHJcbiAgc2VhcmNoQnlGaWx0ZXIxKHNlYXJjaFZhbHVlOiBzdHJpbmcsIG5vZGU6IGFueSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQnlGaWx0ZXIxKHNlYXJjaFZhbHVlLCBub2RlLmNoaWxkcmVuW2ldKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgIGlmIChub2RlLmRhdGEuZGVzY3JpcHRpb24uaW5kZXhPZihzZWFyY2hWYWx1ZSkgPT0gLTEpIHtcclxuICAgICAgICAvL2luZGV4T2bov5Tlm57mjIflrprlrZfnrKblnKjlrZfnrKbkuLLkuK3nrKzkuIDmrKHlh7rnjrDnmoTkvY3nva5cclxuICAgICAgICAvLy0x5Luj6KGo5rKh5pyJ5Ye6546wXHJcbiAgICAgICAgbGV0IHRlbXAgPSAtMTtcclxuICAgICAgICBpZiAobm9kZS5wYXJlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG5vZGUucGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgaWkrKykge1xyXG4gICAgICAgICAgICBpZiAobm9kZS5wYXJlbnQuY2hpbGRyZW5baWldICYmIG5vZGUucGFyZW50LmNoaWxkcmVuW2lpXS5kYXRhLmRlc2NyaXB0aW9uID09IG5vZGUuZGF0YS5kZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgIHRlbXAgPSBpaTtcclxuICAgICAgICAgICAgICBkZWxldGUgbm9kZS5wYXJlbnQuY2hpbGRyZW5bdGVtcF07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v5Y676ZmkdW5kZWZpbmRl5YWD57SgXHJcbiAgZmlsdGVyMShub2RlOiBUcmVlTm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHZhciBiID0gbm9kZS5jaGlsZHJlbi5maWx0ZXIoaXRlbSA9PiBpdGVtICE9IHVuZGVmaW5lZCk7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBiO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAobm9kZS5jaGlsZHJlbltpXS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMuZmlsdGVyMShub2RlLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8v6L+H5rukXHJcbiAgZmlsdGVyKCRldmVudCkge1xyXG4gICAgLy/lvIDlp4vov4fmu6RcclxuICAgIC8vIHRoaXMuc2VhcmNoQnlGaWx0ZXIoJGV2ZW50KTtcclxuICAgIC8vIHRoaXMuc2VhcmNoQnlGaWx0ZXIoJGV2ZW50KTtcclxuXHJcbiAgICB0aGlzLnR0LnNlYXJjaEhhbmRsZS5zZWFyY2goJ2Rlc2NyaXB0aW9uJywgJGV2ZW50LnZhbHVlLCAgJ2NsaWVudCcpXHJcblxyXG4gIH1cclxuXHJcblxyXG59XHJcbiJdfQ==