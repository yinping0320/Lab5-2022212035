/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Injector, ApplicationRef, ComponentFactoryResolver } from '@angular/core';
import { ComputeRuleComponent } from './compute-rule/compute-rule.component';
import { BsModalService } from '@farris/ui-modal';
import { ExprEditMode } from './expression-type';
import { ExpressioneditorComponent } from './expressioneditor/expressioneditor.component';
import { ExpressionContextEntity } from './expression-context-entity';
import { Adapter } from './adapter';
import { Schema, EntitySet } from './schema';
import { InjectedEntity } from './injected-entity';
import { InjectedType } from './injected-type';
import InputStream from 'antlr4/InputStream';
import CommonTokenStream from 'antlr4/CommonTokenStream';
import JavaScriptLexer from 'JavaScriptLexer';
import { HttpClient } from "@angular/common/http";
import { FunctionI18nResources } from './i18n/FunctionI18nResource';
import { ExpressionEditorLocalePipe } from './expression-editor-locale.pipe';
import { NewEntitySet, NewSchema } from './i18n/NewSchema';
/**
 * 表达式对外提供服务类
 * 功能：提供打开、预置等接口
 */
var ExpressionService = /** @class */ (function () {
    function ExpressionService(injector, applicationRef, compFactRes, http) {
        this.injector = injector;
        this.applicationRef = applicationRef;
        this.compFactRes = compFactRes;
        this.http = http;
        this.exprEditMode = ExprEditMode.Advanced;
        this.simpleModalConfig = {
            title: "条件表达式",
            width: 750,
            height: 350,
            showButtons: false
        };
        this.exprEntity = new ExpressionContextEntity();
        this.adapter = new Adapter();
        //定义语义化资源
        this.allFunctions = []; //所有函数，包含不规范
        this.modalService = injector.get(BsModalService);
        //初始化i18n标识
        this.localeId = localStorage.getItem('languageCode');
        this.localePipe = new ExpressionEditorLocalePipe(this.localeId);
        //初始化i18n函数
        this.allFunctions = FunctionI18nResources[this.localeId] || FunctionI18nResources["zh-CHS"];
        //初始化titile,save,cancel
        this.ExpressionTitle = this.localePipe.transform("ExpressionTitle");
        this.ExpressionSave = this.localePipe.transform("ExpressionSave");
        this.ExpressionCancel = this.localePipe.transform("ExpressionCancel");
    }
    /**
      * 创建表达式
      * 功能：打开表达式窗口，then方法获得表达式结果
      */
    /**
     * 创建表达式
     * 功能：打开表达式窗口，then方法获得表达式结果
     * @return {?}
     */
    ExpressionService.prototype.buildExpression = /**
     * 创建表达式
     * 功能：打开表达式窗口，then方法获得表达式结果
     * @return {?}
     */
    function () {
        /** @type {?} */
        var that = this;
        return new Promise((/**
         * @param {?} resolve
         * @return {?}
         */
        function (resolve) {
            if (that.exprEditMode == ExprEditMode.Conditional) {
                if ((that.exprEntity.expr != null && that.exprEntity.expr != "") && (that.exprEntity.sexpr == null || that.exprEntity.sexpr == "")) {
                    /** @type {?} */
                    var compFactory = that.compFactRes.resolveComponentFactory(ExpressioneditorComponent);
                    /** @type {?} */
                    var compRef_1 = compFactory.create(that.injector);
                    compRef_1.instance.expressionEntity = that.exprEntity;
                    /** @type {?} */
                    var dialog_1 = that.modalService.show(compRef_1, {
                        title: that.ExpressionTitle,
                        width: 1060,
                        height: 610,
                        buttons: [
                            {
                                text: that.ExpressionSave, cls: 'btn btn-primary', handle: (/**
                                 * @return {?}
                                 */
                                function () {
                                    compRef_1.instance.getExprs();
                                    dialog_1.close();
                                })
                            },
                            {
                                text: that.ExpressionCancel, cls: 'btn btn-secondary', handle: (/**
                                 * @return {?}
                                 */
                                function () {
                                    dialog_1.close();
                                })
                            }
                        ],
                        showButtons: true
                    });
                    compRef_1.instance.result.subscribe((/**
                     * @param {?} expressionContent
                     * @return {?}
                     */
                    function (expressionContent) {
                        return resolve(expressionContent);
                    }));
                }
                else {
                    /** @type {?} */
                    var compFactory = that.compFactRes.resolveComponentFactory(ComputeRuleComponent);
                    /** @type {?} */
                    var compRef = compFactory.create(that.injector);
                    compRef.instance.contextEntity = that.exprEntity;
                    /** @type {?} */
                    var dialog_2 = that.modalService.show(compRef, that.simpleModalConfig);
                    compRef.instance.closeModalEmitter.subscribe((/**
                     * @param {?} $event
                     * @return {?}
                     */
                    function ($event) { return dialog_2.close(); }));
                    compRef.instance.result.subscribe((/**
                     * @param {?} expressionContent
                     * @return {?}
                     */
                    function (expressionContent) {
                        return resolve(expressionContent);
                    }));
                }
            }
            else {
                /** @type {?} */
                var compFactory = that.compFactRes.resolveComponentFactory(ExpressioneditorComponent);
                /** @type {?} */
                var compRef_2 = compFactory.create(that.injector);
                compRef_2.instance.expressionEntity = that.exprEntity;
                /** @type {?} */
                var dialog_3 = that.modalService.show(compRef_2, {
                    title: that.ExpressionTitle,
                    width: 1060,
                    height: 610,
                    buttons: [
                        {
                            text: that.ExpressionSave, cls: 'btn btn-primary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                compRef_2.instance.getExprs();
                                dialog_3.close();
                            })
                        },
                        {
                            text: that.ExpressionCancel, cls: 'btn btn-secondary', handle: (/**
                             * @return {?}
                             */
                            function () {
                                dialog_3.close();
                            })
                        }
                    ],
                    showButtons: true
                });
                compRef_2.instance.result.subscribe((/**
                 * @param {?} expressionContent
                 * @return {?}
                 */
                function (expressionContent) {
                    return resolve(expressionContent);
                }));
            }
        }));
    };
    /**
     * 设置表达式展现模式（简易版还是高级版）
     * exprDisplayType
     */
    /**
     * 设置表达式展现模式（简易版还是高级版）
     * exprDisplayType
     * @param {?} exprEditMode
     * @return {?}
     */
    ExpressionService.prototype.setEditPattern = /**
     * 设置表达式展现模式（简易版还是高级版）
     * exprDisplayType
     * @param {?} exprEditMode
     * @return {?}
     */
    function (exprEditMode) {
        this.exprEditMode = exprEditMode;
    };
    /**
     * 添加上下文变量方法
     * @param contextEntity 上下文变量实体
     */
    /**
     * 添加上下文变量方法
     * @param {?} contextEntity 上下文变量实体
     * @return {?}
     */
    ExpressionService.prototype.addContext = /**
     * 添加上下文变量方法
     * @param {?} contextEntity 上下文变量实体
     * @return {?}
     */
    function (contextEntity) {
        this.exprEntity.contextEntities = this.exprEntity.contextEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.key !== contextEntity.key; }));
        this.exprEntity.contextEntities.push(contextEntity);
    };
    /**
     * 添加系统变量方法
     * @param sessionEntity 系统变量实体
     */
    /**
     * 添加系统变量方法
     * @param {?} sessionEntity 系统变量实体
     * @return {?}
     */
    ExpressionService.prototype.addSession = /**
     * 添加系统变量方法
     * @param {?} sessionEntity 系统变量实体
     * @return {?}
     */
    function (sessionEntity) {
        this.exprEntity.sessionEntities = this.exprEntity.sessionEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.key !== sessionEntity.key; }));
        this.exprEntity.sessionEntities.push(sessionEntity);
    };
    /**
     * 添加函数方法
     * @param funcEntity 函数实体                       !!!待处理：修改FuncEntity--->FunctionEntity
     */
    /**
     * 添加函数方法
     * @param {?} funcEntity 函数实体                       !!!待处理：修改FuncEntity--->FunctionEntity
     * @return {?}
     */
    ExpressionService.prototype.addFunc = /**
     * 添加函数方法
     * @param {?} funcEntity 函数实体                       !!!待处理：修改FuncEntity--->FunctionEntity
     * @return {?}
     */
    function (funcEntity) {
        this.exprEntity.funcEntities = this.exprEntity.funcEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.key !== funcEntity.key; }));
        this.exprEntity.funcEntities.push(funcEntity);
    };
    /***
     * 添加函数列表
     * @param funcList 函数json列表
     */
    /**
     *
     * 添加函数列表
     * @param {?} funcList 函数json列表
     * @return {?}
     */
    ExpressionService.prototype.addFuncs = /**
     *
     * 添加函数列表
     * @param {?} funcList 函数json列表
     * @return {?}
     */
    function (funcList) {
        var _this = this;
        /** @type {?} */
        var funcs = (/** @type {?} */ (JSON.parse(funcList)));
        funcs.funcs.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            _this.exprEntity.funcEntities.push(item);
        }));
    };
    /**
     * 预置表达式
     * @param text 表达式文本
     * 1：text为脚本表达式，需要先Antlr4解析
     * 2：
     */
    /**
     * 预置表达式
     * @param {?} text 表达式文本
     * 1：text为脚本表达式，需要先Antlr4解析
     * 2：
     * @return {?}
     */
    ExpressionService.prototype.addExpressionText = /**
     * 预置表达式
     * @param {?} text 表达式文本
     * 1：text为脚本表达式，需要先Antlr4解析
     * 2：
     * @return {?}
     */
    function (text) {
        try {
            /** @type {?} */
            var textEntity = (/** @type {?} */ (JSON.parse(text)));
            if (!(textEntity)) {
                this.exprEntity.expr = text;
            }
            else if (textEntity.expr) {
                //加载Antlr4工具
                /** @type {?} */
                var inputStream = new InputStream.InputStream(textEntity.expr);
                /** @type {?} */
                var lexer = new JavaScriptLexer.JavaScriptLexer(inputStream);
                /** @type {?} */
                var tokens = new CommonTokenStream.CommonTokenStream(lexer);
                tokens.fill();
                //tokens切分的js文本抽取到array中
                /** @type {?} */
                var array = new Array();
                for (var index = 0; index < tokens.tokens.length - 1; index++) {
                    array[index] = tokens.tokens[index].text;
                }
                //遍历array的js文本，每个js文本遍历tokenItems查找对应的语义化文本，封装为str
                /** @type {?} */
                var str = "";
                for (var index = 0; index < array.length; index++) {
                    if (((array[index] == "DefaultFunction") || (array[index] == "Math")) && (array[index + 1] == ".")) {
                        continue;
                    }
                    else if (array[index] == "." && (array[index - 1] == "DefaultFunction" || array[index - 1] == "Math")) {
                        continue;
                    }
                    else {
                        //单个元素计数器
                        /** @type {?} */
                        var num = 0;
                        //遍历上下文变量
                        if (num == 0) {
                            for (var i = 0; i < this.exprEntity.contextEntities.length; i++) {
                                if (array[index] == ("\"" + this.exprEntity.contextEntities[i].key + "\"")) {
                                    str = str + "\"" + this.exprEntity.contextEntities[i].name + "\"";
                                    num = 1;
                                    break;
                                }
                            }
                        }
                        //遍历session变量
                        if (num == 0) {
                            for (var i = 0; i < this.exprEntity.sessionEntities.length; i++) {
                                if (array[index] == ("\"" + this.exprEntity.sessionEntities[i].key + "\"")) {
                                    str = str + "\"" + this.exprEntity.sessionEntities[i].name + "\"";
                                    num = 1;
                                    break;
                                }
                            }
                        }
                        // 遍历数据（暂时先屏蔽）
                        // this.exprEntity.schemaMap.forEach(a=>{
                        //     // for(let j=0;j<a.entitySets[0].length;j++){
                        //     //   if(array[index]==a.entityTypes[0].properties[j].description){
                        //     //     array[index]=a.entityTypes[0].properties[j].name;
                        //     //     break;
                        //     //   }
                        //     // }
                        //     if(array[index]==a.entitySets[0].name){
                        //       array[index]=a.entitySets[0].description;
                        //       str=str+array[index];
                        //       num=1;
                        //     }
                        //     for(let j=0;j<a.entityTypes[0].properties.length;j++){
                        //       if(array[index]==a.entityTypes[0].properties[j].name){
                        //         array[index]=a.entityTypes[0].properties[j].description;
                        //         str=str+array[index];
                        //         num=1;
                        //         break;
                        //       }
                        //     }
                        //   });
                        //计数器num：如果遍历allFunctions没找到对应字段，则直接拼接(num=0)；否则替换(num=1)
                        if (num == 0) {
                            for (var i = 0; i < this.allFunctions.length; i++) {
                                if (array[index] == this.allFunctions[i].key) {
                                    if (this.allFunctions[i].type != "Advanced") {
                                        str = str + this.allFunctions[i].name;
                                        num = 1;
                                        break;
                                    }
                                }
                            }
                        }
                        //如果计数器为0，证明没有语义化匹配。显示原始数据
                        if (num == 0) {
                            str = str + array[index];
                        }
                    }
                }
                this.exprEntity.expr = str;
                if (textEntity.sexpr) {
                    this.exprEntity.sexpr = textEntity.sexpr;
                }
            }
            else {
                this.GetUnCamelParse(textEntity);
                this.exprEntity.expr = textEntity.expr;
                if (textEntity.sexpr) {
                    this.exprEntity.sexpr = textEntity.sexpr;
                }
            }
        }
        catch (_a) {
            this.exprEntity.expr = text;
        }
    };
    /**
     * 预置Schema
     * @param name schema名称
     * @param schema schema实体类
     */
    /**
     * 预置Schema
     * @param {?} name schema名称
     * @param {?} schema schema实体类
     * @return {?}
     */
    ExpressionService.prototype.addSchema = /**
     * 预置Schema
     * @param {?} name schema名称
     * @param {?} schema schema实体类
     * @return {?}
     */
    function (name, schema) {
        if (!name) {
            alert("Please Input Schema Name!");
        }
        else
            this.exprEntity.schemaMap.set(name, schema);
    };
    /**
     * 注入实体
     * @param name 注入实体名,默认为typeNameInSchema
     * @param schemaName 注入实体所在的schema名，默认为CommonObject
     * @param typeNameInSchema 注入实体在schema中的名称
     * @param injectedType 注入实体的类型，默认为EntityType
     */
    /**
     * 注入实体
     * @param {?} name 注入实体名,默认为typeNameInSchema
     * @param {?=} schemaName 注入实体所在的schema名，默认为CommonObject
     * @param {?=} typeNameInSchema 注入实体在schema中的名称
     * @param {?=} injectedType 注入实体的类型，默认为EntityType
     * @return {?}
     */
    ExpressionService.prototype.addInjectedEntity = /**
     * 注入实体
     * @param {?} name 注入实体名,默认为typeNameInSchema
     * @param {?=} schemaName 注入实体所在的schema名，默认为CommonObject
     * @param {?=} typeNameInSchema 注入实体在schema中的名称
     * @param {?=} injectedType 注入实体的类型，默认为EntityType
     * @return {?}
     */
    function (name, schemaName, typeNameInSchema, injectedType) {
        if (schemaName === void 0) { schemaName = "CommonObject"; }
        if (injectedType === void 0) { injectedType = InjectedType.EntityType; }
        //构造注入实体对象
        /** @type {?} */
        var injectedEntity = new InjectedEntity();
        //若注入的实体名为空，则默认为注入实体在schema中的名称
        injectedEntity.name = name ? name : typeNameInSchema;
        injectedEntity.schemaName = schemaName;
        injectedEntity.injectedName = typeNameInSchema;
        injectedEntity.injectedType = injectedType;
        this.exprEntity.injectedEntities = this.exprEntity.injectedEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.name !== injectedEntity.name; }));
        this.exprEntity.injectedEntities.push(injectedEntity);
    };
    /**
     * 预置CDT
     * @param gspCDTs CDT集合
     */
    /**
     * 预置CDT
     * @param {?} gspCDTs CDT集合
     * @return {?}
     */
    ExpressionService.prototype.addCDT = /**
     * 预置CDT
     * @param {?} gspCDTs CDT集合
     * @return {?}
     */
    function (gspCDTs) {
        var _this = this;
        /** @type {?} */
        var schema = new Schema();
        //若schemaMap中存在CDT的schema
        if (this.exprEntity.schemaMap.get("CDT")) {
            schema = this.exprEntity.schemaMap.get("CDT");
        }
        //将每一个CDT转化为schema内部结构中的entityType
        gspCDTs.forEach((/**
         * @param {?} gspCDT
         * @return {?}
         */
        function (gspCDT) {
            /** @type {?} */
            var entityType = _this.adapter.convertCDT(gspCDT);
            schema.entityTypes.push(entityType);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addSchema("CDT", schema);
    };
    /**
     * 预置CO
     * @param commonObject CO集合(todo)
     */
    /**
     * 预置CO
     * @param {?} commonObject CO集合(todo)
     * @return {?}
     */
    ExpressionService.prototype.addCommonObject = /**
     * 预置CO
     * @param {?} commonObject CO集合(todo)
     * @return {?}
     */
    function (commonObject) {
        /** @type {?} */
        var schema;
        //若schemaMap中存在CO的schema
        if (this.exprEntity.schemaMap.get("CommonObject")) {
            schema = this.exprEntity.schemaMap.get("CommonObject");
        }
        else
            schema = new Schema;
        //将每一个CO转化为schema内部结构中的entityType
        /** @type {?} */
        var entityTypes = this.adapter.convertCO(commonObject);
        entityTypes.forEach((/**
         * @param {?} entityType
         * @return {?}
         */
        function (entityType) {
            schema.entityTypes.push(entityType);
            /** @type {?} */
            var entitySet = new EntitySet;
            entitySet.name = entityType.name + "s";
            entitySet.entityType = entityType.name;
            entitySet.description = entityType.description;
            schema.entitySets.push(entitySet);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addSchema("CommonObject", schema);
    };
    /**
     * 预置帮助
     * @param shEntity 帮助描述实体
     */
    /**
     * 预置帮助
     * @param {?} shEntity 帮助描述实体
     * @return {?}
     */
    ExpressionService.prototype.addSmartHelpEntity = /**
     * 预置帮助
     * @param {?} shEntity 帮助描述实体
     * @return {?}
     */
    function (shEntity) {
        this.exprEntity.smartHelpEntities = this.exprEntity.smartHelpEntities.filter((/**
         * @param {?} item
         * @return {?}
         */
        function (item) { return item.code !== shEntity.code; }));
        this.exprEntity.smartHelpEntities.push(shEntity);
    };
    /**
     * @param {?} windowWidth
     * @return {?}
     */
    ExpressionService.prototype.addWindowWidth = /**
     * @param {?} windowWidth
     * @return {?}
     */
    function (windowWidth) {
    };
    /**
     * @return {?}
     */
    ExpressionService.prototype.clearInjectedEntity = /**
     * @return {?}
     */
    function () {
        this.exprEntity.injectedEntities = [];
    };
    /**
     * @private
     * @param {?} jsonObj
     * @return {?}
     */
    ExpressionService.prototype.GetUnCamelParse = /**
     * @private
     * @param {?} jsonObj
     * @return {?}
     */
    function (jsonObj) {
        for (var key in jsonObj) {
            if (typeof (jsonObj[key]) === "object") {
                this.GetUnCamelParse(jsonObj[key]);
            }
            /** @type {?} */
            var temp = jsonObj[key];
            delete (jsonObj[key]);
            jsonObj[this.ConvertToUncamel(key)] = temp;
        }
    };
    //字符串反转换Camel
    //字符串反转换Camel
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    ExpressionService.prototype.ConvertToUncamel = 
    //字符串反转换Camel
    /**
     * @private
     * @param {?} input
     * @return {?}
     */
    function (input) {
        if (input.length > 0) {
            /** @type {?} */
            var len = input.length;
            /** @type {?} */
            var strTemp = "";
            for (var i = 0; i < len; i++) {
                if (i == 0) {
                    strTemp += input[i].toLowerCase(); //第一个
                }
                else {
                    strTemp += input[i];
                }
            }
            return strTemp;
        }
    };
    /**
     * @description 添加NewSchema
     * @param name NewSchema的名称
     * @param newSchema NewSchema
     */
    /**
     * \@description 添加NewSchema
     * @param {?} name NewSchema的名称
     * @param {?} newSchema NewSchema
     * @return {?}
     */
    ExpressionService.prototype.addNewSchema = /**
     * \@description 添加NewSchema
     * @param {?} name NewSchema的名称
     * @param {?} newSchema NewSchema
     * @return {?}
     */
    function (name, newSchema) {
        if (!name) {
            alert("Please Input NewSchema Name!");
        }
        else
            this.exprEntity.newSchemaMap.set(name, newSchema);
    };
    /**
     * @description 添加CO的数据，NewSchema
     * @param commonObject
     */
    /**
     * \@description 添加CO的数据，NewSchema
     * @param {?} commonObject
     * @return {?}
     */
    ExpressionService.prototype.addCommonObjectOfNewSchema = /**
     * \@description 添加CO的数据，NewSchema
     * @param {?} commonObject
     * @return {?}
     */
    function (commonObject) {
        /** @type {?} */
        var newSchema;
        //若newSchemaMap中存在CO的newSchema
        if (this.exprEntity.newSchemaMap.get("CommonObject")) {
            newSchema = this.exprEntity.newSchemaMap.get("CommonObject");
        }
        else
            newSchema = new NewSchema;
        //将每一个CO转化为schema内部结构中的entityType
        /** @type {?} */
        var entityTypes = this.adapter.convertCOOfNewSchema(commonObject);
        entityTypes.forEach((/**
         * @param {?} entityType
         * @return {?}
         */
        function (entityType) {
            newSchema.entityTypes.push(entityType);
            /** @type {?} */
            var entitySet = new NewEntitySet;
            entitySet.code = entityType.name + "s";
            entitySet.entityType = entityType.code;
            newSchema.entitySets.push(entitySet);
        }));
        //将合并后的newSchema放入内部上下文实体中
        this.addNewSchema("CommonObject", newSchema);
    };
    /**
     * @description 添加UDT类型，NewSchema
     * @param gspCDTs
     */
    /**
     * \@description 添加UDT类型，NewSchema
     * @param {?} gspCDTs
     * @return {?}
     */
    ExpressionService.prototype.addCDTOfNewSchema = /**
     * \@description 添加UDT类型，NewSchema
     * @param {?} gspCDTs
     * @return {?}
     */
    function (gspCDTs) {
        var _this = this;
        /** @type {?} */
        var newSchema = new NewSchema();
        //若schemaMap中存在CDT的schema
        if (this.exprEntity.newSchemaMap.get("CDT")) {
            newSchema = this.exprEntity.newSchemaMap.get("CDT");
        }
        //将每一个CDT转化为schema内部结构中的entityType
        gspCDTs.forEach((/**
         * @param {?} gspCDT
         * @return {?}
         */
        function (gspCDT) {
            /** @type {?} */
            var entityType = _this.adapter.convertCDTOfNewSchema(gspCDT);
            newSchema.entityTypes.push(entityType);
        }));
        //将合并后的schema放入内部上下文实体中
        this.addNewSchema("CDT", newSchema);
    };
    ExpressionService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ExpressionService.ctorParameters = function () { return [
        { type: Injector },
        { type: ApplicationRef },
        { type: ComponentFactoryResolver },
        { type: HttpClient }
    ]; };
    return ExpressionService;
}());
export { ExpressionService };
if (false) {
    /** @type {?} */
    ExpressionService.prototype.exprEditMode;
    /** @type {?} */
    ExpressionService.prototype.simpleModalConfig;
    /** @type {?} */
    ExpressionService.prototype.exprEntity;
    /** @type {?} */
    ExpressionService.prototype.adapter;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.modalService;
    /** @type {?} */
    ExpressionService.prototype.allFunctions;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.localePipe;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionTitle;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionSave;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.ExpressionCancel;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.applicationRef;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.compFactRes;
    /**
     * @type {?}
     * @private
     */
    ExpressionService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN2Yy9leHByZXNzaW9uLyIsInNvdXJjZXMiOlsibGliL2V4cHJlc3Npb25zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsd0JBQXdCLEVBQThCLE1BQU0sZUFBZSxDQUFDO0FBQzNILE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQzdFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDakQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDMUYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDdEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUlwQyxPQUFPLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUM3QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFHbkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sV0FBVyxNQUFNLG9CQUFvQixDQUFDO0FBQzdDLE9BQU8saUJBQWlCLE1BQU0sMEJBQTBCLENBQUM7QUFDekQsT0FBTyxlQUFlLE1BQU0saUJBQWlCLENBQUM7QUFFOUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ3BFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRTdFLE9BQU8sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sa0JB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O2dCQW1COUQsVUFBVTs7SUEwYm5CLHdCQUFDO0NBQUEsQUFoYkQsSUFnYkM7U0EvYVksaUJBQWlCOzs7SUFDMUIseUNBQW1EOztJQUNuRCw4Q0FLRTs7SUFDRix1Q0FBb0U7O0lBQ3BFLG9DQUFpQzs7Ozs7SUFDakMseUNBQXFDOztJQUVyQyx5Q0FBa0I7Ozs7O0lBRWxCLHFDQUF5Qjs7Ozs7SUFDekIsdUNBQStDOzs7OztJQUUvQyw0Q0FBZ0M7Ozs7O0lBQ2hDLDJDQUErQjs7Ozs7SUFDL0IsNkNBQWlDOzs7OztJQUVyQixxQ0FBMEI7Ozs7O0lBQUUsMkNBQXNDOzs7OztJQUFFLHdDQUE2Qzs7Ozs7SUFBRSxpQ0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3RvciwgQXBwbGljYXRpb25SZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgUmVmbGVjdGl2ZUluamVjdG9yLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29tcHV0ZVJ1bGVDb21wb25lbnQgfSBmcm9tICcuL2NvbXB1dGUtcnVsZS9jb21wdXRlLXJ1bGUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQnNNb2RhbFNlcnZpY2UgfSBmcm9tICdAZmFycmlzL3VpLW1vZGFsJztcclxuaW1wb3J0IHsgRXhwckVkaXRNb2RlIH0gZnJvbSAnLi9leHByZXNzaW9uLXR5cGUnO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uZWRpdG9yQ29tcG9uZW50IH0gZnJvbSAnLi9leHByZXNzaW9uZWRpdG9yL2V4cHJlc3Npb25lZGl0b3IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbkNvbnRleHRFbnRpdHkgfSBmcm9tICcuL2V4cHJlc3Npb24tY29udGV4dC1lbnRpdHknO1xyXG5pbXBvcnQgeyBBZGFwdGVyIH0gZnJvbSAnLi9hZGFwdGVyJztcclxuaW1wb3J0IHsgVmFyRW50aXR5IH0gZnJvbSAnLi92YXJlbnRpdHknO1xyXG5pbXBvcnQgeyBGdW5jRW50aXR5LCBGdW5jRW50aXRpZXMgfSBmcm9tICcuL2Z1bmNlbnRpdHknO1xyXG5pbXBvcnQgeyBFeHByZXNzaW9uRW50aXR5IH0gZnJvbSAnLi9leHByZXNzaW9uLWVudGl0eSc7XHJcbmltcG9ydCB7IFNjaGVtYSwgRW50aXR5U2V0IH0gZnJvbSAnLi9zY2hlbWEnO1xyXG5pbXBvcnQgeyBJbmplY3RlZEVudGl0eSB9IGZyb20gJy4vaW5qZWN0ZWQtZW50aXR5JztcclxuaW1wb3J0IHsgR3NwQ29tbW9uRGF0YVR5cGUsIEdTUENvbW1vbk9iamVjdCB9IGZyb20gJ0Bnc3AtYmVmL2dzcC1jbS1tZXRhZGF0YSc7XHJcbmltcG9ydCB7IFNtYXJ0SGVscEVudGl0eSB9IGZyb20gJy4vc21hcnRIZWxwRW50aXR5JztcclxuaW1wb3J0IHsgSW5qZWN0ZWRUeXBlIH0gZnJvbSAnLi9pbmplY3RlZC10eXBlJztcclxuaW1wb3J0IElucHV0U3RyZWFtIGZyb20gJ2FudGxyNC9JbnB1dFN0cmVhbSc7XHJcbmltcG9ydCBDb21tb25Ub2tlblN0cmVhbSBmcm9tICdhbnRscjQvQ29tbW9uVG9rZW5TdHJlYW0nO1xyXG5pbXBvcnQgSmF2YVNjcmlwdExleGVyIGZyb20gJ0phdmFTY3JpcHRMZXhlcic7XHJcbmltcG9ydCBKYXZhU2NyaXB0UGFyc2VyIGZyb20gJ0phdmFTY3JpcHRQYXJzZXInO1xyXG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XHJcbmltcG9ydCB7IEZ1bmN0aW9uSTE4blJlc291cmNlcyB9IGZyb20gJy4vaTE4bi9GdW5jdGlvbkkxOG5SZXNvdXJjZSc7XHJcbmltcG9ydCB7IEV4cHJlc3Npb25FZGl0b3JMb2NhbGVQaXBlIH0gZnJvbSAnLi9leHByZXNzaW9uLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTmV3RW50aXR5U2V0LCBOZXdTY2hlbWEgfSBmcm9tICcuL2kxOG4vTmV3U2NoZW1hJztcclxuXHJcbi8qKlxyXG4gKiDooajovr7lvI/lr7nlpJbmj5DkvpvmnI3liqHnsbtcclxuICog5Yqf6IO977ya5o+Q5L6b5omT5byA44CB6aKE572u562J5o6l5Y+jXHJcbiAqL1xyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBFeHByZXNzaW9uU2VydmljZSB7XHJcbiAgICBleHByRWRpdE1vZGU6IEV4cHJFZGl0TW9kZSA9IEV4cHJFZGl0TW9kZS5BZHZhbmNlZDtcclxuICAgIHNpbXBsZU1vZGFsQ29uZmlnID0ge1xyXG4gICAgICAgIHRpdGxlOiBcIuadoeS7tuihqOi+vuW8j1wiLFxyXG4gICAgICAgIHdpZHRoOiA3NTAsXHJcbiAgICAgICAgaGVpZ2h0OiAzNTAsXHJcbiAgICAgICAgc2hvd0J1dHRvbnM6IGZhbHNlXHJcbiAgICB9O1xyXG4gICAgZXhwckVudGl0eTogRXhwcmVzc2lvbkNvbnRleHRFbnRpdHkgPSBuZXcgRXhwcmVzc2lvbkNvbnRleHRFbnRpdHkoKTtcclxuICAgIGFkYXB0ZXI6IEFkYXB0ZXIgPSBuZXcgQWRhcHRlcigpO1xyXG4gICAgcHJpdmF0ZSBtb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlO1xyXG4gICAgLy/lrprkuYnor63kuYnljJbotYTmupBcclxuICAgIGFsbEZ1bmN0aW9ucyA9IFtdOyAgICAgICAgICAvL+aJgOacieWHveaVsO+8jOWMheWQq+S4jeinhOiMg1xyXG4gICAgLy/lrprkuYlpMThu5qCH6K+GXHJcbiAgICBwcml2YXRlIGxvY2FsZUlkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGxvY2FsZVBpcGU6IEV4cHJlc3Npb25FZGl0b3JMb2NhbGVQaXBlO1xyXG4gICAgLy/lrprkuYnooajovr7lvI90aXRsZe+8jHNhdmXvvIxjYW5jZWxcclxuICAgIHByaXZhdGUgRXhwcmVzc2lvblRpdGxlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIEV4cHJlc3Npb25TYXZlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIEV4cHJlc3Npb25DYW5jZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3RvciwgcHJpdmF0ZSBhcHBsaWNhdGlvblJlZjogQXBwbGljYXRpb25SZWYsIHByaXZhdGUgY29tcEZhY3RSZXM6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LCkge1xyXG4gICAgICAgIHRoaXMubW9kYWxTZXJ2aWNlID0gaW5qZWN0b3IuZ2V0KEJzTW9kYWxTZXJ2aWNlKTtcclxuXHJcbiAgICAgICAgLy/liJ3lp4vljJZpMThu5qCH6K+GXHJcbiAgICAgICAgdGhpcy5sb2NhbGVJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYW5ndWFnZUNvZGUnKTtcclxuICAgICAgICB0aGlzLmxvY2FsZVBpcGUgPSBuZXcgRXhwcmVzc2lvbkVkaXRvckxvY2FsZVBpcGUodGhpcy5sb2NhbGVJZCk7XHJcbiAgICAgICAgLy/liJ3lp4vljJZpMThu5Ye95pWwXHJcbiAgICAgICAgdGhpcy5hbGxGdW5jdGlvbnMgPSBGdW5jdGlvbkkxOG5SZXNvdXJjZXNbdGhpcy5sb2NhbGVJZF0gfHwgRnVuY3Rpb25JMThuUmVzb3VyY2VzW1wiemgtQ0hTXCJdO1xyXG4gICAgICAgIC8v5Yid5aeL5YyWdGl0aWxlLHNhdmUsY2FuY2VsXHJcbiAgICAgICAgdGhpcy5FeHByZXNzaW9uVGl0bGUgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiRXhwcmVzc2lvblRpdGxlXCIpO1xyXG4gICAgICAgIHRoaXMuRXhwcmVzc2lvblNhdmUgPSB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiRXhwcmVzc2lvblNhdmVcIik7XHJcbiAgICAgICAgdGhpcy5FeHByZXNzaW9uQ2FuY2VsID0gdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIkV4cHJlc3Npb25DYW5jZWxcIik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiDliJvlu7rooajovr7lvI9cclxuICAgICAgKiDlip/og73vvJrmiZPlvIDooajovr7lvI/nqpflj6PvvIx0aGVu5pa55rOV6I635b6X6KGo6L6+5byP57uT5p6cXHJcbiAgICAgICovXHJcbiAgICBwdWJsaWMgYnVpbGRFeHByZXNzaW9uKCkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5leHByRWRpdE1vZGUgPT0gRXhwckVkaXRNb2RlLkNvbmRpdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGF0LmV4cHJFbnRpdHkuZXhwciAhPSBudWxsICYmIHRoYXQuZXhwckVudGl0eS5leHByICE9IFwiXCIpICYmICh0aGF0LmV4cHJFbnRpdHkuc2V4cHIgPT0gbnVsbCB8fCB0aGF0LmV4cHJFbnRpdHkuc2V4cHIgPT0gXCJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGF0LmNvbXBGYWN0UmVzLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KEV4cHJlc3Npb25lZGl0b3JDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoYXQuaW5qZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmV4cHJlc3Npb25FbnRpdHkgPSB0aGF0LmV4cHJFbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaWFsb2cgPSB0aGF0Lm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGF0LkV4cHJlc3Npb25UaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDYwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA2MTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGF0LkV4cHJlc3Npb25TYXZlLCBjbHM6ICdidG4gYnRuLXByaW1hcnknLCBoYW5kbGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBSZWYuaW5zdGFuY2UuZ2V0RXhwcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoYXQuRXhwcmVzc2lvbkNhbmNlbCwgY2xzOiAnYnRuIGJ0bi1zZWNvbmRhcnknLCBoYW5kbGU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b25zOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLnJlc3VsdC5zdWJzY3JpYmUoKGV4cHJlc3Npb25Db250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShleHByZXNzaW9uQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGF0LmNvbXBGYWN0UmVzLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KENvbXB1dGVSdWxlQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcFJlZiA9IGNvbXBGYWN0b3J5LmNyZWF0ZSh0aGF0LmluamVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFJlZi5pbnN0YW5jZS5jb250ZXh0RW50aXR5ID0gdGhhdC5leHByRW50aXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGF0Lm1vZGFsU2VydmljZS5zaG93KGNvbXBSZWYsIHRoYXQuc2ltcGxlTW9kYWxDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLmNsb3NlTW9kYWxFbWl0dGVyLnN1YnNjcmliZSgkZXZlbnQgPT4gZGlhbG9nLmNsb3NlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLnJlc3VsdC5zdWJzY3JpYmUoKGV4cHJlc3Npb25Db250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShleHByZXNzaW9uQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBGYWN0b3J5ID0gdGhhdC5jb21wRmFjdFJlcy5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShFeHByZXNzaW9uZWRpdG9yQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wUmVmID0gY29tcEZhY3RvcnkuY3JlYXRlKHRoYXQuaW5qZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBSZWYuaW5zdGFuY2UuZXhwcmVzc2lvbkVudGl0eSA9IHRoYXQuZXhwckVudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlhbG9nID0gdGhhdC5tb2RhbFNlcnZpY2Uuc2hvdyhjb21wUmVmLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGF0LkV4cHJlc3Npb25UaXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwNjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNjEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhhdC5FeHByZXNzaW9uU2F2ZSwgY2xzOiAnYnRuIGJ0bi1wcmltYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBSZWYuaW5zdGFuY2UuZ2V0RXhwcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGF0LkV4cHJlc3Npb25DYW5jZWwsIGNsczogJ2J0biBidG4tc2Vjb25kYXJ5JywgaGFuZGxlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvbnM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wUmVmLmluc3RhbmNlLnJlc3VsdC5zdWJzY3JpYmUoKGV4cHJlc3Npb25Db250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGV4cHJlc3Npb25Db250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u6KGo6L6+5byP5bGV546w5qih5byP77yI566A5piT54mI6L+Y5piv6auY57qn54mI77yJXHJcbiAgICAgKiBleHByRGlzcGxheVR5cGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEVkaXRQYXR0ZXJuKGV4cHJFZGl0TW9kZTogRXhwckVkaXRNb2RlKSB7XHJcbiAgICAgICAgdGhpcy5leHByRWRpdE1vZGUgPSBleHByRWRpdE1vZGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOa3u+WKoOS4iuS4i+aWh+WPmOmHj+aWueazlVxyXG4gICAgICogQHBhcmFtIGNvbnRleHRFbnRpdHkg5LiK5LiL5paH5Y+Y6YeP5a6e5L2TXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDb250ZXh0KGNvbnRleHRFbnRpdHk6IFZhckVudGl0eSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXMgPSB0aGlzLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmZpbHRlcihpdGVtID0+IGl0ZW0ua2V5ICE9PSBjb250ZXh0RW50aXR5LmtleSk7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LmNvbnRleHRFbnRpdGllcy5wdXNoKGNvbnRleHRFbnRpdHkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDmt7vliqDns7vnu5/lj5jph4/mlrnms5VcclxuICAgICAqIEBwYXJhbSBzZXNzaW9uRW50aXR5IOezu+e7n+WPmOmHj+WunuS9k1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkU2Vzc2lvbihzZXNzaW9uRW50aXR5OiBWYXJFbnRpdHkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc2Vzc2lvbkVudGl0aWVzID0gdGhpcy5leHByRW50aXR5LnNlc3Npb25FbnRpdGllcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSAhPT0gc2Vzc2lvbkVudGl0eS5rZXkpO1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5zZXNzaW9uRW50aXRpZXMucHVzaChzZXNzaW9uRW50aXR5KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg5Ye95pWw5pa55rOVXHJcbiAgICAgKiBAcGFyYW0gZnVuY0VudGl0eSDlh73mlbDlrp7kvZMgICAgICAgICAgICAgICAgICAgICAgICEhIeW+heWkhOeQhu+8muS/ruaUuUZ1bmNFbnRpdHktLS0+RnVuY3Rpb25FbnRpdHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEZ1bmMoZnVuY0VudGl0eTogRnVuY0VudGl0eSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5mdW5jRW50aXRpZXMgPSB0aGlzLmV4cHJFbnRpdHkuZnVuY0VudGl0aWVzLmZpbHRlcihpdGVtID0+IGl0ZW0ua2V5ICE9PSBmdW5jRW50aXR5LmtleSk7XHJcbiAgICAgICAgdGhpcy5leHByRW50aXR5LmZ1bmNFbnRpdGllcy5wdXNoKGZ1bmNFbnRpdHkpO1xyXG4gICAgfVxyXG4gICAgLyoqKlxyXG4gICAgICog5re75Yqg5Ye95pWw5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gZnVuY0xpc3Qg5Ye95pWwanNvbuWIl+ihqFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkRnVuY3MoZnVuY0xpc3Q6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBmdW5jcyA9IEpTT04ucGFyc2UoZnVuY0xpc3QpIGFzIEZ1bmNFbnRpdGllcztcclxuICAgICAgICBmdW5jcy5mdW5jcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuZnVuY0VudGl0aWVzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmihOe9ruihqOi+vuW8j1xyXG4gICAgICogQHBhcmFtIHRleHQg6KGo6L6+5byP5paH5pysXHJcbiAgICAgKiAx77yadGV4dOS4uuiEmuacrOihqOi+vuW8j++8jOmcgOimgeWFiEFudGxyNOino+aekFxyXG4gICAgICogMu+8mlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkRXhwcmVzc2lvblRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHRleHRFbnRpdHkgPSBKU09OLnBhcnNlKHRleHQpIGFzIEV4cHJlc3Npb25FbnRpdHk7XHJcbiAgICAgICAgICAgIGlmICghKHRleHRFbnRpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuZXhwciA9IHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGV4dEVudGl0eS5leHByKSB7XHJcbiAgICAgICAgICAgICAgICAvL+WKoOi9vUFudGxyNOW3peWFt1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0U3RyZWFtID0gbmV3IElucHV0U3RyZWFtLklucHV0U3RyZWFtKHRleHRFbnRpdHkuZXhwcik7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGV4ZXIgPSBuZXcgSmF2YVNjcmlwdExleGVyLkphdmFTY3JpcHRMZXhlcihpbnB1dFN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9rZW5zID0gbmV3IENvbW1vblRva2VuU3RyZWFtLkNvbW1vblRva2VuU3RyZWFtKGxleGVyKTtcclxuICAgICAgICAgICAgICAgIHRva2Vucy5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICAvL3Rva2Vuc+WIh+WIhueahGpz5paH5pys5oq95Y+W5YiwYXJyYXnkuK1cclxuICAgICAgICAgICAgICAgIGxldCBhcnJheSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRva2Vucy50b2tlbnMubGVuZ3RoIC0gMTsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5W2luZGV4XSA9IHRva2Vucy50b2tlbnNbaW5kZXhdLnRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+mBjeWOhmFycmF555qEanPmlofmnKzvvIzmr4/kuKpqc+aWh+acrOmBjeWOhnRva2VuSXRlbXPmn6Xmib7lr7nlupTnmoTor63kuYnljJbmlofmnKzvvIzlsIHoo4XkuLpzdHJcclxuICAgICAgICAgICAgICAgIHZhciBzdHIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFycmF5Lmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoKGFycmF5W2luZGV4XSA9PSBcIkRlZmF1bHRGdW5jdGlvblwiKSB8fCAoYXJyYXlbaW5kZXhdID09IFwiTWF0aFwiKSkgJiYgKGFycmF5W2luZGV4ICsgMV0gPT0gXCIuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJyYXlbaW5kZXhdID09IFwiLlwiICYmIChhcnJheVtpbmRleCAtIDFdID09IFwiRGVmYXVsdEZ1bmN0aW9uXCIgfHwgYXJyYXlbaW5kZXggLSAxXSA9PSBcIk1hdGhcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ljZXkuKrlhYPntKDorqHmlbDlmahcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6YGN5Y6G5LiK5LiL5paH5Y+Y6YePXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PSAoXCJcXFwiXCIgKyB0aGlzLmV4cHJFbnRpdHkuY29udGV4dEVudGl0aWVzW2ldLmtleSArIFwiXFxcIlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyBcIlxcXCJcIiArIHRoaXMuZXhwckVudGl0eS5jb250ZXh0RW50aXRpZXNbaV0ubmFtZSArIFwiXFxcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/pgY3ljoZzZXNzaW9u5Y+Y6YePXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV4cHJFbnRpdHkuc2Vzc2lvbkVudGl0aWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2luZGV4XSA9PSAoXCJcXFwiXCIgKyB0aGlzLmV4cHJFbnRpdHkuc2Vzc2lvbkVudGl0aWVzW2ldLmtleSArIFwiXFxcIlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIgKyBcIlxcXCJcIiArIHRoaXMuZXhwckVudGl0eS5zZXNzaW9uRW50aXRpZXNbaV0ubmFtZSArIFwiXFxcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmBjeWOhuaVsOaNru+8iOaaguaXtuWFiOWxj+iUve+8iVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLmZvckVhY2goYT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLy8gZm9yKGxldCBqPTA7ajxhLmVudGl0eVNldHNbMF0ubGVuZ3RoO2orKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgIGlmKGFycmF5W2luZGV4XT09YS5lbnRpdHlUeXBlc1swXS5wcm9wZXJ0aWVzW2pdLmRlc2NyaXB0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vICAgICBhcnJheVtpbmRleF09YS5lbnRpdHlUeXBlc1swXS5wcm9wZXJ0aWVzW2pdLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmKGFycmF5W2luZGV4XT09YS5lbnRpdHlTZXRzWzBdLm5hbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBhcnJheVtpbmRleF09YS5lbnRpdHlTZXRzWzBdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBzdHI9c3RyK2FycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgbnVtPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBmb3IobGV0IGo9MDtqPGEuZW50aXR5VHlwZXNbMF0ucHJvcGVydGllcy5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgaWYoYXJyYXlbaW5kZXhdPT1hLmVudGl0eVR5cGVzWzBdLnByb3BlcnRpZXNbal0ubmFtZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgYXJyYXlbaW5kZXhdPWEuZW50aXR5VHlwZXNbMF0ucHJvcGVydGllc1tqXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBzdHI9c3RyK2FycmF5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBudW09MTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/orqHmlbDlmahudW3vvJrlpoLmnpzpgY3ljoZhbGxGdW5jdGlvbnPmsqHmib7liLDlr7nlupTlrZfmrrXvvIzliJnnm7TmjqXmi7zmjqUobnVtPTAp77yb5ZCm5YiZ5pu/5o2iKG51bT0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hbGxGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlbaW5kZXhdID09IHRoaXMuYWxsRnVuY3Rpb25zW2ldLmtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGxGdW5jdGlvbnNbaV0udHlwZSAhPSBcIkFkdmFuY2VkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ciArIHRoaXMuYWxsRnVuY3Rpb25zW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzorqHmlbDlmajkuLow77yM6K+B5piO5rKh5pyJ6K+t5LmJ5YyW5Yy56YWN44CC5pi+56S65Y6f5aeL5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyICsgYXJyYXlbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5leHByRW50aXR5LmV4cHIgPSBzdHI7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dEVudGl0eS5zZXhwcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwckVudGl0eS5zZXhwciA9IHRleHRFbnRpdHkuc2V4cHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdldFVuQ2FtZWxQYXJzZSh0ZXh0RW50aXR5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwckVudGl0eS5leHByID0gdGV4dEVudGl0eS5leHByO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRFbnRpdHkuc2V4cHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc2V4cHIgPSB0ZXh0RW50aXR5LnNleHByO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmV4cHJFbnRpdHkuZXhwciA9IHRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpooTnva5TY2hlbWFcclxuICAgICAqIEBwYXJhbSBuYW1lIHNjaGVtYeWQjeensFxyXG4gICAgICogQHBhcmFtIHNjaGVtYSBzY2hlbWHlrp7kvZPnsbtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZFNjaGVtYShuYW1lOiBzdHJpbmcsIHNjaGVtYTogU2NoZW1hKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIElucHV0IFNjaGVtYSBOYW1lIVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLnNldChuYW1lLCBzY2hlbWEpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDms6jlhaXlrp7kvZNcclxuICAgICAqIEBwYXJhbSBuYW1lIOazqOWFpeWunuS9k+WQjSzpu5jorqTkuLp0eXBlTmFtZUluU2NoZW1hXHJcbiAgICAgKiBAcGFyYW0gc2NoZW1hTmFtZSDms6jlhaXlrp7kvZPmiYDlnKjnmoRzY2hlbWHlkI3vvIzpu5jorqTkuLpDb21tb25PYmplY3RcclxuICAgICAqIEBwYXJhbSB0eXBlTmFtZUluU2NoZW1hIOazqOWFpeWunuS9k+WcqHNjaGVtYeS4reeahOWQjeensFxyXG4gICAgICogQHBhcmFtIGluamVjdGVkVHlwZSDms6jlhaXlrp7kvZPnmoTnsbvlnovvvIzpu5jorqTkuLpFbnRpdHlUeXBlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRJbmplY3RlZEVudGl0eShuYW1lOiBzdHJpbmcsIHNjaGVtYU5hbWU6IHN0cmluZyA9IFwiQ29tbW9uT2JqZWN0XCIsIHR5cGVOYW1lSW5TY2hlbWE6IHN0cmluZywgaW5qZWN0ZWRUeXBlOiBJbmplY3RlZFR5cGUgPSBJbmplY3RlZFR5cGUuRW50aXR5VHlwZSk6IHZvaWQge1xyXG4gICAgICAgIC8v5p6E6YCg5rOo5YWl5a6e5L2T5a+56LGhXHJcbiAgICAgICAgbGV0IGluamVjdGVkRW50aXR5ID0gbmV3IEluamVjdGVkRW50aXR5KCk7XHJcbiAgICAgICAgLy/oi6Xms6jlhaXnmoTlrp7kvZPlkI3kuLrnqbrvvIzliJnpu5jorqTkuLrms6jlhaXlrp7kvZPlnKhzY2hlbWHkuK3nmoTlkI3np7BcclxuICAgICAgICBpbmplY3RlZEVudGl0eS5uYW1lID0gbmFtZSA/IG5hbWUgOiB0eXBlTmFtZUluU2NoZW1hO1xyXG4gICAgICAgIGluamVjdGVkRW50aXR5LnNjaGVtYU5hbWUgPSBzY2hlbWFOYW1lO1xyXG4gICAgICAgIGluamVjdGVkRW50aXR5LmluamVjdGVkTmFtZSA9IHR5cGVOYW1lSW5TY2hlbWE7XHJcbiAgICAgICAgaW5qZWN0ZWRFbnRpdHkuaW5qZWN0ZWRUeXBlID0gaW5qZWN0ZWRUeXBlO1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5pbmplY3RlZEVudGl0aWVzID0gdGhpcy5leHByRW50aXR5LmluamVjdGVkRW50aXRpZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5uYW1lICE9PSBpbmplY3RlZEVudGl0eS5uYW1lKTtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuaW5qZWN0ZWRFbnRpdGllcy5wdXNoKGluamVjdGVkRW50aXR5KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog6aKE572uQ0RUXHJcbiAgICAgKiBAcGFyYW0gZ3NwQ0RUcyBDRFTpm4blkIhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENEVChnc3BDRFRzOiBHc3BDb21tb25EYXRhVHlwZVtdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHNjaGVtYSA9IG5ldyBTY2hlbWEoKTtcclxuICAgICAgICAvL+iLpXNjaGVtYU1hcOS4reWtmOWcqENEVOeahHNjaGVtYVxyXG4gICAgICAgIGlmICh0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLmdldChcIkNEVFwiKSkge1xyXG4gICAgICAgICAgICBzY2hlbWEgPSB0aGlzLmV4cHJFbnRpdHkuc2NoZW1hTWFwLmdldChcIkNEVFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lsIbmr4/kuIDkuKpDRFTovazljJbkuLpzY2hlbWHlhoXpg6jnu5PmnoTkuK3nmoRlbnRpdHlUeXBlXHJcbiAgICAgICAgZ3NwQ0RUcy5mb3JFYWNoKGdzcENEVCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gdGhpcy5hZGFwdGVyLmNvbnZlcnRDRFQoZ3NwQ0RUKTtcclxuICAgICAgICAgICAgc2NoZW1hLmVudGl0eVR5cGVzLnB1c2goZW50aXR5VHlwZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lsIblkIjlubblkI7nmoRzY2hlbWHmlL7lhaXlhoXpg6jkuIrkuIvmloflrp7kvZPkuK1cclxuICAgICAgICB0aGlzLmFkZFNjaGVtYShcIkNEVFwiLCBzY2hlbWEpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDpooTnva5DT1xyXG4gICAgICogQHBhcmFtIGNvbW1vbk9iamVjdCBDT+mbhuWQiCh0b2RvKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQ29tbW9uT2JqZWN0KGNvbW1vbk9iamVjdDogR1NQQ29tbW9uT2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHNjaGVtYTtcclxuICAgICAgICAvL+iLpXNjaGVtYU1hcOS4reWtmOWcqENP55qEc2NoZW1hXHJcbiAgICAgICAgaWYgKHRoaXMuZXhwckVudGl0eS5zY2hlbWFNYXAuZ2V0KFwiQ29tbW9uT2JqZWN0XCIpKSB7XHJcbiAgICAgICAgICAgIHNjaGVtYSA9IHRoaXMuZXhwckVudGl0eS5zY2hlbWFNYXAuZ2V0KFwiQ29tbW9uT2JqZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHNjaGVtYSA9IG5ldyBTY2hlbWE7XHJcbiAgICAgICAgLy/lsIbmr4/kuIDkuKpDT+i9rOWMluS4unNjaGVtYeWGhemDqOe7k+aehOS4reeahGVudGl0eVR5cGVcclxuICAgICAgICBsZXQgZW50aXR5VHlwZXMgPSB0aGlzLmFkYXB0ZXIuY29udmVydENPKGNvbW1vbk9iamVjdCk7XHJcbiAgICAgICAgZW50aXR5VHlwZXMuZm9yRWFjaChlbnRpdHlUeXBlID0+IHtcclxuICAgICAgICAgICAgc2NoZW1hLmVudGl0eVR5cGVzLnB1c2goZW50aXR5VHlwZSk7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlTZXQgPSBuZXcgRW50aXR5U2V0O1xyXG4gICAgICAgICAgICBlbnRpdHlTZXQubmFtZSA9IGVudGl0eVR5cGUubmFtZSArIFwic1wiO1xyXG4gICAgICAgICAgICBlbnRpdHlTZXQuZW50aXR5VHlwZSA9IGVudGl0eVR5cGUubmFtZTtcclxuICAgICAgICAgICAgZW50aXR5U2V0LmRlc2NyaXB0aW9uID0gZW50aXR5VHlwZS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgc2NoZW1hLmVudGl0eVNldHMucHVzaChlbnRpdHlTZXQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WwhuWQiOW5tuWQjueahHNjaGVtYeaUvuWFpeWGhemDqOS4iuS4i+aWh+WunuS9k+S4rVxyXG4gICAgICAgIHRoaXMuYWRkU2NoZW1hKFwiQ29tbW9uT2JqZWN0XCIsIHNjaGVtYSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOmihOe9ruW4ruWKqVxyXG4gICAgICogQHBhcmFtIHNoRW50aXR5IOW4ruWKqeaPj+i/sOWunuS9k1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkU21hcnRIZWxwRW50aXR5KHNoRW50aXR5OiBTbWFydEhlbHBFbnRpdHkpIHtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc21hcnRIZWxwRW50aXRpZXMgPSB0aGlzLmV4cHJFbnRpdHkuc21hcnRIZWxwRW50aXRpZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jb2RlICE9PSBzaEVudGl0eS5jb2RlKTtcclxuICAgICAgICB0aGlzLmV4cHJFbnRpdHkuc21hcnRIZWxwRW50aXRpZXMucHVzaChzaEVudGl0eSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkV2luZG93V2lkdGgod2luZG93V2lkdGg6IG51bWJlcikge1xyXG5cclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGVhckluamVjdGVkRW50aXR5KCkge1xyXG4gICAgICAgIHRoaXMuZXhwckVudGl0eS5pbmplY3RlZEVudGl0aWVzID0gW107XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIEdldFVuQ2FtZWxQYXJzZShqc29uT2JqOiBhbnkpIHtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4ganNvbk9iaikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChqc29uT2JqW2tleV0pID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdldFVuQ2FtZWxQYXJzZShqc29uT2JqW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB0ZW1wID0ganNvbk9ialtrZXldO1xyXG4gICAgICAgICAgICBkZWxldGUgKGpzb25PYmpba2V5XSk7XHJcbiAgICAgICAgICAgIGpzb25PYmpbdGhpcy5Db252ZXJ0VG9VbmNhbWVsKGtleSldID0gdGVtcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL+Wtl+espuS4suWPjei9rOaNokNhbWVsXHJcbiAgICBwcml2YXRlIENvbnZlcnRUb1VuY2FtZWwoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGxlbiA9IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHN0clRlbXAgPSBcIlwiOyAvL+aWsOWtl+espuS4slxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyVGVtcCArPSBpbnB1dFtpXS50b0xvd2VyQ2FzZSgpOyAvL+esrOS4gOS4qlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyVGVtcCArPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyVGVtcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5re75YqgTmV3U2NoZW1hXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBOZXdTY2hlbWHnmoTlkI3np7BcclxuICAgICAqIEBwYXJhbSBuZXdTY2hlbWEgTmV3U2NoZW1hXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGROZXdTY2hlbWEobmFtZTogc3RyaW5nLCBuZXdTY2hlbWE6IE5ld1NjaGVtYSkge1xyXG4gICAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBJbnB1dCBOZXdTY2hlbWEgTmFtZSFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhpcy5leHByRW50aXR5Lm5ld1NjaGVtYU1hcC5zZXQobmFtZSwgbmV3U2NoZW1hKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDmt7vliqBDT+eahOaVsOaNru+8jE5ld1NjaGVtYVxyXG4gICAgICogQHBhcmFtIGNvbW1vbk9iamVjdCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbW1vbk9iamVjdE9mTmV3U2NoZW1hKGNvbW1vbk9iamVjdDogR1NQQ29tbW9uT2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IG5ld1NjaGVtYTtcclxuICAgICAgICAvL+iLpW5ld1NjaGVtYU1hcOS4reWtmOWcqENP55qEbmV3U2NoZW1hXHJcbiAgICAgICAgaWYgKHRoaXMuZXhwckVudGl0eS5uZXdTY2hlbWFNYXAuZ2V0KFwiQ29tbW9uT2JqZWN0XCIpKSB7XHJcbiAgICAgICAgICAgIG5ld1NjaGVtYSA9IHRoaXMuZXhwckVudGl0eS5uZXdTY2hlbWFNYXAuZ2V0KFwiQ29tbW9uT2JqZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIG5ld1NjaGVtYSA9IG5ldyBOZXdTY2hlbWE7XHJcbiAgICAgICAgLy/lsIbmr4/kuIDkuKpDT+i9rOWMluS4unNjaGVtYeWGhemDqOe7k+aehOS4reeahGVudGl0eVR5cGVcclxuICAgICAgICBsZXQgZW50aXR5VHlwZXMgPSB0aGlzLmFkYXB0ZXIuY29udmVydENPT2ZOZXdTY2hlbWEoY29tbW9uT2JqZWN0KTtcclxuICAgICAgICBlbnRpdHlUeXBlcy5mb3JFYWNoKGVudGl0eVR5cGUgPT4ge1xyXG4gICAgICAgICAgICBuZXdTY2hlbWEuZW50aXR5VHlwZXMucHVzaChlbnRpdHlUeXBlKTtcclxuICAgICAgICAgICAgbGV0IGVudGl0eVNldCA9IG5ldyBOZXdFbnRpdHlTZXQ7XHJcbiAgICAgICAgICAgIGVudGl0eVNldC5jb2RlID0gZW50aXR5VHlwZS5uYW1lICsgXCJzXCI7XHJcbiAgICAgICAgICAgIGVudGl0eVNldC5lbnRpdHlUeXBlID0gZW50aXR5VHlwZS5jb2RlO1xyXG4gICAgICAgICAgICBuZXdTY2hlbWEuZW50aXR5U2V0cy5wdXNoKGVudGl0eVNldCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5bCG5ZCI5bm25ZCO55qEbmV3U2NoZW1h5pS+5YWl5YaF6YOo5LiK5LiL5paH5a6e5L2T5LitXHJcbiAgICAgICAgdGhpcy5hZGROZXdTY2hlbWEoXCJDb21tb25PYmplY3RcIiwgbmV3U2NoZW1hKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOa3u+WKoFVEVOexu+Wei++8jE5ld1NjaGVtYVxyXG4gICAgICogQHBhcmFtIGdzcENEVHMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDRFRPZk5ld1NjaGVtYShnc3BDRFRzOiBHc3BDb21tb25EYXRhVHlwZVtdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IG5ld1NjaGVtYSA9IG5ldyBOZXdTY2hlbWEoKTtcclxuICAgICAgICAvL+iLpXNjaGVtYU1hcOS4reWtmOWcqENEVOeahHNjaGVtYVxyXG4gICAgICAgIGlmICh0aGlzLmV4cHJFbnRpdHkubmV3U2NoZW1hTWFwLmdldChcIkNEVFwiKSkge1xyXG4gICAgICAgICAgICBuZXdTY2hlbWEgPSB0aGlzLmV4cHJFbnRpdHkubmV3U2NoZW1hTWFwLmdldChcIkNEVFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lsIbmr4/kuIDkuKpDRFTovazljJbkuLpzY2hlbWHlhoXpg6jnu5PmnoTkuK3nmoRlbnRpdHlUeXBlXHJcbiAgICAgICAgZ3NwQ0RUcy5mb3JFYWNoKGdzcENEVCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gdGhpcy5hZGFwdGVyLmNvbnZlcnRDRFRPZk5ld1NjaGVtYShnc3BDRFQpO1xyXG4gICAgICAgICAgICBuZXdTY2hlbWEuZW50aXR5VHlwZXMucHVzaChlbnRpdHlUeXBlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WwhuWQiOW5tuWQjueahHNjaGVtYeaUvuWFpeWGhemDqOS4iuS4i+aWh+WunuS9k+S4rVxyXG4gICAgICAgIHRoaXMuYWRkTmV3U2NoZW1hKFwiQ0RUXCIsIG5ld1NjaGVtYSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==