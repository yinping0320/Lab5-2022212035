/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter, ViewChild } from '@angular/core';
import { NavigationType } from '../schema';
import { TreeTableComponent } from '@farris/ui-treetable';
import { CurrentNode } from '../currentNode';
import { InjectedType } from '../injected-type';
import { ExpressionEditorLocalePipe } from '../expression-editor-locale.pipe';
import { NewNavigationType } from '../i18n/NewSchema';
import _ from 'lodash';
var ExpressionEntityGridComponent = /** @class */ (function () {
    // data: TreeNode[] = [];
    // temp2: TreeNode;
    // temp3: TreeNode;
    // all: TreeNode[] = [];
    function ExpressionEntityGridComponent() {
        this.currentNode = new CurrentNode;
        this.entities = [];
        this.currentSchemaName = "";
        this.currentNewSchemaName = "";
        this.currentParent = "";
        this.schema = new Map();
        this.newSchemaMap = new Map();
        this.selectentitychange = new EventEmitter();
        this.dbclickInsert = new EventEmitter();
        this.cols = [];
        this.treedata = [];
        //初始化i18n标识
        this.localeId = localStorage.getItem('languageCode');
        this.localePipe = new ExpressionEditorLocalePipe(this.localeId);
    }
    /**
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.cols = [
            { field: 'name', title: this.localePipe.transform("EntityList") },
            { field: 'description', title: this.localePipe.transform("EntityName") },
            { field: 'type', title: this.localePipe.transform("EntityType"), width: '100' }
        ];
        if (this.newSchemaMap && this.newSchemaMap.size > 0) {
            this.onInitNewSchema();
            this.treedata = _.cloneDeep(this.entities);
        }
        else if (this.schema && this.schema.size > 0) {
            this.OninitSchemaEntity();
            this.treedata = _.cloneDeep(this.entities);
        }
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.selectRowChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        this.currentNode = new CurrentNode;
        this.currentNode.id = $event.node.data.id;
        this.currentNode.name = $event.node.data.name;
        this.currentNode.parentName = this.selectParentString($event.node);
        this.currentParent = this.selectParentString($event.node);
        this.currentNode.schema = $event.node.data.schema;
        this.currentNode.nodeType = $event.node.data.nodeType;
        this.currentNode.description = $event.node.data.description;
        this.selectentitychange.emit(this.currentNode);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.dblClick = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.currentParent) {
            this.dbclickInsert.emit(this.currentParent + "." + $event.data.name);
        }
        else {
            this.dbclickInsert.emit($event.data.name);
        }
    };
    /**
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        if (this.newSchemaMap && this.newSchemaMap.size > 0) {
            this.onInitNewSchema();
            this.treedata = _.cloneDeep(this.entities);
            // this.treedata = this.entities;
            // this.treedata = [...this.treedata];
        }
        else if (this.schema && this.schema.size > 0) {
            this.OninitSchemaEntity();
            this.treedata = _.cloneDeep(this.entities);
            // this.treedata = this.entities;
            // this.treedata = [...this.treedata];
        }
    };
    //递归父节点名
    //递归父节点名
    /**
     * @param {?} node
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.selectParentString = 
    //递归父节点名
    /**
     * @param {?} node
     * @return {?}
     */
    function (node) {
        if (node.parent) {
            if (this.selectParentString(node.parent)) {
                if (this.strContain(node.parent.data.type))
                    return this.selectParentString(node.parent) + "." + node.parent.data.name + "[0]";
                else
                    return this.selectParentString(node.parent) + "." + node.parent.data.name;
            }
            else if (this.strContain(node.parent.data.type)) {
                return node.parent.data.name + "[0]";
            }
            else {
                return node.parent.data.name;
            }
        }
        else {
            return "";
        }
    };
    //初始化Schema格式的Entity
    //初始化Schema格式的Entity
    /**
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.OninitSchemaEntity = 
    //初始化Schema格式的Entity
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.injectedEntities && this.injectedEntities.length > 0) {
            this.entities = [];
            /** @type {?} */
            var entityTree_1 = {
                data: {
                    "id": Math.random(),
                    "name": "",
                    "type": "",
                    "description": "",
                    "schema": "",
                    "nodeType": ""
                },
                children: []
            };
            //实体显示禁忌表
            /** @type {?} */
            var navigatorMap_1 = new Map();
            //解析每一个注入实体，将其转化为TreeNode
            this.injectedEntities.forEach((/**
             * @param {?} injectEntity
             * @return {?}
             */
            function (injectEntity) {
                //根据schema名称找到对应的schema
                /** @type {?} */
                var currentSchema = _this.schema.get(injectEntity.schemaName);
                _this.currentSchemaName = injectEntity.schemaName;
                switch (injectEntity.injectedType) {
                    //注入的若为实体集
                    case InjectedType.EntitySet:
                        {
                            //根据注入实体的名称找到对应的实体集
                            /** @type {?} */
                            var entitySet = currentSchema.entitySets.find((/**
                             * @param {?} entitySet
                             * @return {?}
                             */
                            function (entitySet) { return entitySet.name == injectEntity.injectedName; }));
                            //将找到的实体集转化为TreeNode
                            entityTree_1 = _this.ConvertEntitySet(entitySet, currentSchema, navigatorMap_1);
                        }
                        ;
                        break;
                    //注入的若为实体类型
                    case InjectedType.EntityType:
                        {
                            /** @type {?} */
                            var entityType = currentSchema.entityTypes.find((/**
                             * @param {?} entityType
                             * @return {?}
                             */
                            function (entityType) { return entityType.name == injectEntity.injectedName; }));
                            //将实体类型名称改为自定义名称
                            //entityType.name = injectEntity.name;
                            //将找到的实体类型转化为TreeNode
                            entityTree_1 = _this.ConvertEntityType(entityType, currentSchema, navigatorMap_1);
                        }
                        ;
                        break;
                }
                entityTree_1.data.name = injectEntity.name;
                //将每个预置对象转化后的TreeNode
                _this.entities.push(entityTree_1);
            }));
        }
    };
    //实体集转化
    //实体集转化
    /**
     * @param {?} entitySet
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.ConvertEntitySet = 
    //实体集转化
    /**
     * @param {?} entitySet
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    function (entitySet, schema, navigatorMap) {
        if (entitySet) {
            //将entityset转化为TreeNode结构用于展示
            /** @type {?} */
            var treeNode_1 = {
                data: {
                    "id": "",
                    "name": entitySet.name,
                    "type": "EntitySet" + "[" + entitySet.entityType + "]",
                    "description": entitySet.description,
                    "schema": this.currentSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化完成的实体集添加进禁忌表，防止循环转化
            navigatorMap.set(entitySet.name, InjectedType.EntitySet);
            //找到实体集对应的实体类型
            /** @type {?} */
            var entityType = schema.entityTypes.find((/**
             * @param {?} entityType
             * @return {?}
             */
            function (entityType) { return entityType.name == entitySet.entityType; }));
            //将entitytype转化为TreeNode结构用于展示
            this.ConvertEntityType(entityType, schema, navigatorMap).children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            function (child) {
                treeNode_1.children.push(child);
            }));
            return treeNode_1;
        }
        //实体集为空或未定义则返回空
        else
            return null;
    };
    //实体类型转化
    //实体类型转化
    /**
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.ConvertEntityType = 
    //实体类型转化
    /**
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap
     * @return {?}
     */
    function (entityType, schema, navigatorMap) {
        var _this = this;
        if (entityType) {
            /** @type {?} */
            var treeNode_2 = {
                data: {
                    "id": entityType.id,
                    "name": entityType.name,
                    "type": "EntityType",
                    "description": entityType.description,
                    "schema": this.currentSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化的entitytype添加进禁忌表
            navigatorMap.set(entityType.name + entityType.id, InjectedType.EntityType);
            //将每个属性转化为每个TreeNode
            entityType.properties.forEach((/**
             * @param {?} property
             * @return {?}
             */
            function (property) {
                /** @type {?} */
                var propertyTree = {
                    data: {
                        "id": Math.random(),
                        "name": "",
                        "type": property.type,
                        "description": property.description,
                        "schema": _this.currentSchemaName,
                        "nodeType": "Simple"
                    },
                    children: []
                };
                //根据条件判断该属性是否为主键
                if (property.name == entityType.key) {
                    propertyTree.data.name = property.name + "*";
                }
                else {
                    propertyTree.data.name = property.name;
                }
                propertyTree.parent = treeNode_2;
                treeNode_2.children.push(propertyTree);
            }));
            entityType.navigationProperties.forEach((/**
             * @param {?} navigationProperty
             * @return {?}
             */
            function (navigationProperty) {
                //判断是否导航属性对应的名称不在禁忌表中
                if (!(navigatorMap.get(navigationProperty.name + navigationProperty.navigationId))) {
                    if (navigationProperty.type == NavigationType.EntitySet) {
                        //若导航属性类型为实体集
                        /** @type {?} */
                        var entitySet = schema.entitySets.find((/**
                         * @param {?} entitySet
                         * @return {?}
                         */
                        function (entitySet) { return entitySet.name == navigationProperty.name; }));
                        /** @type {?} */
                        var a = _this.ConvertEntitySet(entitySet, schema, navigatorMap);
                        a.parent = treeNode_2;
                        treeNode_2.children.push(a);
                    } //若为实体类型
                    else if (navigationProperty.type == NavigationType.EntityType) {
                        /** @type {?} */
                        var entityType_1 = schema.entityTypes.find((/**
                         * @param {?} entitytype
                         * @return {?}
                         */
                        function (entitytype) { return entitytype.id == navigationProperty.navigationId && entitytype.name == navigationProperty.name; }));
                        /** @type {?} */
                        var a = _this.ConvertEntityType(entityType_1, schema, navigatorMap);
                        a.parent = treeNode_2;
                        treeNode_2.children.push(a);
                    }
                }
                //若导航属性在禁忌表中
                else {
                    /** @type {?} */
                    var navigatortree = {
                        data: {
                            "id": navigationProperty.navigationId,
                            "name": navigationProperty.name,
                            "type": "",
                            "description": navigationProperty.description,
                            "schema": _this.currentSchemaName,
                            "nodeType": "Complex"
                        },
                        children: [],
                    };
                    switch (navigatorMap.get(navigationProperty.name)) {
                        case NavigationType.EntitySet:
                            navigatortree.data.type = "EntitySet";
                            break;
                        case NavigationType.EntityType:
                            navigatortree.data.type = "EntityType";
                            break;
                    }
                    navigatortree.parent = treeNode_2;
                    treeNode_2.children.push(navigatortree);
                }
            }));
            return treeNode_2;
        }
        //若entitytype为空或未定义
        else
            return null;
    };
    /**
     * @private
     * @param {?} strr
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.strContain = /**
     * @private
     * @param {?} strr
     * @return {?}
     */
    function (strr) {
        /** @type {?} */
        var temp = strr + "";
        if (temp.indexOf("EntitySet") != -1)
            return true;
        else
            return false;
    };
    //===========分割线==========NewSchema===============
    /**
     * @description 初始化NewSchema
     */
    //===========分割线==========NewSchema===============
    /**
     * \@description 初始化NewSchema
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.onInitNewSchema = 
    //===========分割线==========NewSchema===============
    /**
     * \@description 初始化NewSchema
     * @return {?}
     */
    function () {
        var _this = this;
        //注入实体存在且有值
        if (this.injectedEntities && this.injectedEntities.length > 0) {
            //初始化：entities(页面显示内容);rootNode(跟节点);navigatorMap1(禁忌列表)
            this.entities = [];
            /** @type {?} */
            var rootNode_1 = {
                data: {
                    "id": Math.random(),
                    "name": "",
                    "description": "",
                    "type": "",
                    "schema": "",
                    "nodeType": ""
                },
                children: []
            };
            /** @type {?} */
            var navigatorMap1_1 = new Map();
            //根据注入实体的schemaName找到对应的rootSchema
            this.injectedEntities.forEach((/**
             * @param {?} injectEntity
             * @return {?}
             */
            function (injectEntity) {
                /** @type {?} */
                var rootSchema = _this.newSchemaMap.get(injectEntity.schemaName);
                _this.currentNewSchemaName = injectEntity.schemaName;
                //根据注入实体类型--->执行不同方法
                switch (injectEntity.injectedType) {
                    case InjectedType.EntitySet:
                        {
                            /** @type {?} */
                            var entitySet = rootSchema.entitySets.find((/**
                             * @param {?} set
                             * @return {?}
                             */
                            function (set) { return set.code == injectEntity.injectedName; }));
                            rootNode_1 = _this.convertNewEntitySet(entitySet, rootSchema, navigatorMap1_1);
                        }
                        ;
                        break;
                    case InjectedType.EntityType:
                        {
                            /** @type {?} */
                            var entityType = rootSchema.entityTypes.find((/**
                             * @param {?} type
                             * @return {?}
                             */
                            function (type) { return type.code == injectEntity.injectedName; }));
                            rootNode_1 = _this.convertNewEntityType(entityType, rootSchema, navigatorMap1_1);
                        }
                        ;
                        break;
                }
                rootNode_1.data.name = injectEntity.name;
                _this.entities.push(rootNode_1);
            }));
        }
    };
    /**
     * @description 转换实体类型(EntityType)
     * @param entityType
     * @param schema
     * @param navigatorMap1
     * @returns
     */
    /**
     * \@description 转换实体类型(EntityType)
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.convertNewEntityType = /**
     * \@description 转换实体类型(EntityType)
     * @param {?} entityType
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    function (entityType, schema, navigatorMap1) {
        var _this = this;
        if (entityType) {
            //初始化：NewEntityType的节点
            /** @type {?} */
            var treeNode_3 = {
                data: {
                    "id": entityType.code,
                    "name": entityType.code,
                    "description": entityType.name,
                    "type": "EntityType",
                    "schema": this.currentNewSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //pro
            navigatorMap1.set(entityType.name + entityType.code, InjectedType.EntityType);
            entityType.properties.forEach((/**
             * @param {?} pro
             * @return {?}
             */
            function (pro) {
                /** @type {?} */
                var proNode = {
                    data: {
                        "id": Math.random(),
                        "name": pro.code,
                        "description": pro.name,
                        "type": pro.dataType,
                        "schema": _this.currentNewSchemaName,
                        "nodeType": "Simple"
                    },
                    children: []
                };
                proNode.parent = treeNode_3;
                treeNode_3.children.push(proNode);
            }));
            //naPro
            entityType.navigationProperties.forEach((/**
             * @param {?} naPro
             * @return {?}
             */
            function (naPro) {
                //判断是否导航属性对应的名称在禁忌表中
                if (!(navigatorMap1.get(naPro.navigationName + naPro.code))) {
                    if (naPro.navigationType == NewNavigationType.EntityType) {
                        /** @type {?} */
                        var entityType_2 = schema.entityTypes.find((/**
                         * @param {?} type1
                         * @return {?}
                         */
                        function (type1) { return type1.code == naPro.navigationName; }));
                        /** @type {?} */
                        var a = _this.convertNewEntityType(entityType_2, schema, navigatorMap1);
                        a.parent = treeNode_3;
                        treeNode_3.children.push(a);
                    }
                    else if (naPro.navigationType == NewNavigationType.EntitySet) {
                        /** @type {?} */
                        var entitySet = schema.entitySets.find((/**
                         * @param {?} set1
                         * @return {?}
                         */
                        function (set1) { return set1.code == naPro.navigationName; }));
                        /** @type {?} */
                        var a = _this.convertNewEntitySet(entitySet, schema, navigatorMap1);
                        a.parent = treeNode_3;
                        treeNode_3.children.push(a);
                    }
                }
                //若导航属性在禁忌表中
                else {
                    /** @type {?} */
                    var naProNode = {
                        data: {
                            "id": naPro.navigationName,
                            "name": naPro.code,
                            "description": naPro.name,
                            "type": "",
                            "schema": _this.currentNewSchemaName,
                            "nodeType": "Complex"
                        },
                        children: [],
                    };
                    switch (navigatorMap1.get(naPro.navigationName)) {
                        case NewNavigationType.EntitySet:
                            naProNode.data.type = "EntitySet";
                            break;
                        case NewNavigationType.EntityType:
                            naProNode.data.type = "EntityType";
                            break;
                    }
                    naProNode.parent = treeNode_3,
                        treeNode_3.children.push(naProNode);
                }
            }));
            return treeNode_3;
        }
        return null;
    };
    /**
     * @description 转换实体集(EntitySet)
     * @param set
     * @param schema
     * @param navigatorMap1
     * @returns
     */
    /**
     * \@description 转换实体集(EntitySet)
     * @param {?} set
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.convertNewEntitySet = /**
     * \@description 转换实体集(EntitySet)
     * @param {?} set
     * @param {?} schema
     * @param {?} navigatorMap1
     * @return {?}
     */
    function (set, schema, navigatorMap1) {
        if (set) {
            //将entityset转化为TreeNode结构用于展示
            /** @type {?} */
            var treeNode_4 = {
                data: {
                    "id": Math.random(),
                    "name": set.code,
                    "description": set.name,
                    "type": "EntitySet" + "[" + set.code + "]",
                    "schema": this.currentNewSchemaName,
                    "nodeType": "Complex"
                },
                children: []
            };
            //将转化完成的实体集添加进禁忌表，防止循环转化
            navigatorMap1.set(set.name, InjectedType.EntitySet);
            //找到实体集对应的实体类型
            /** @type {?} */
            var entityType = schema.entityTypes.find((/**
             * @param {?} entityType
             * @return {?}
             */
            function (entityType) { return entityType.code == set.entityType; }));
            //将entitytype转化为TreeNode结构用于展示
            this.convertNewEntityType(entityType, schema, navigatorMap1).children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            function (child) {
                treeNode_4.children.push(child);
            }));
            return treeNode_4;
        }
        //实体集为空或未定义则返回空
        else
            return null;
    };
    //顶级过滤
    //顶级过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.searchByFilter = 
    //顶级过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        //存在过滤值&&treedata有值
        if ($event.value && $event.value != "" && this.treedata) {
            //children元素深度遍历
            for (var i = 0; i < this.treedata.length; i++) {
                this.searchByFilter1($event.value, this.treedata[i]);
            }
            //过滤undefined
            for (var i = 0; i < this.treedata.length; i++) {
                this.filter1(this.treedata[i]);
            }
        }
    };
    //children元素过滤$event.value
    //children元素过滤$event.value
    /**
     * @param {?} searchValue
     * @param {?} node
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.searchByFilter1 = 
    //children元素过滤$event.value
    /**
     * @param {?} searchValue
     * @param {?} node
     * @return {?}
     */
    function (searchValue, node) {
        if (node.children && node.children.length > 0) {
            for (var i = 0; i < node.children.length; i++) {
                this.searchByFilter1(searchValue, node.children[i]);
            }
        }
        else if (node.children.length == 0) {
            if (node.data.description.indexOf(searchValue) == -1) {
                //indexOf返回指定字符在字符串中第一次出现的位置
                //-1代表没有出现
                /** @type {?} */
                var temp = -1;
                if (node.parent != null) {
                    for (var ii = 0; ii < node.parent.children.length; ii++) {
                        if (node.parent.children[ii] && node.parent.children[ii].data.description == node.data.description) {
                            temp = ii;
                            delete node.parent.children[temp];
                            break;
                        }
                    }
                }
            }
        }
    };
    //去除undefinde元素
    //去除undefinde元素
    /**
     * @param {?} node
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.filter1 = 
    //去除undefinde元素
    /**
     * @param {?} node
     * @return {?}
     */
    function (node) {
        if (node.children && node.children.length > 0) {
            /** @type {?} */
            var b = node.children.filter((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item != undefined; }));
            node.children = b;
            for (var i = 0; i < node.children.length; i++) {
                if (node.children[i].children && node.children[i].children.length > 0) {
                    this.filter1(node.children[i]);
                }
            }
        }
        else if (node.children.length == 0) {
        }
    };
    //过滤
    //过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    ExpressionEntityGridComponent.prototype.filter = 
    //过滤
    /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        //开始过滤
        // this.searchByFilter($event);
        // this.searchByFilter($event);
        this.tt.searchHandle.search('description', $event.value, 'client');
    };
    ExpressionEntityGridComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-expression-entity-grid',
                    template: "<farris-treetable #tt \r\n[data]=\"treedata\"\r\n[fit]=\"true\" \r\n[fitColumns]=\"true\"\r\n[fixedHeader]=\"true\"\r\n[columns]=\"cols\" \r\n[idField]=\"'id'\"\r\n[height]=\"268\"\r\n[showFilterBar]=\"true\"\r\n[resizableColumns]=\"true\"\r\n[showHeader]=\"true\"\r\n[enableFindText]=\"true\"\r\n[virtualized]=\"false\"\r\n(dblClick)=\"dblClick($event)\"\r\n(cellClick)=\"selectRowChange($event)\"\r\n(search)=\"filter($event)\"\r\n>\r\n</farris-treetable>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    ExpressionEntityGridComponent.ctorParameters = function () { return []; };
    ExpressionEntityGridComponent.propDecorators = {
        schema: [{ type: Input }],
        newSchemaMap: [{ type: Input }],
        injectedEntities: [{ type: Input }],
        selectentitychange: [{ type: Output }],
        dbclickInsert: [{ type: Output }],
        tt: [{ type: ViewChild, args: ['tt',] }]
    };
    return ExpressionEntityGridComponent;
}());
export { ExpressionEntityGridComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    ExpressionEntityGridComponent.prototype.localeId;
    /**
     * @type {?}
     * @private
     */
    ExpressionEntityGridComponent.prototype.localePipe;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentNode;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.entities;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentSchemaName;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentNewSchemaName;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.currentParent;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.schema;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.newSchemaMap;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.injectedEntities;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.selectentitychange;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.dbclickInsert;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.tt;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.cols;
    /** @type {?} */
    ExpressionEntityGridComponent.prototype.treedata;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbi1lbnRpdHktZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZ3NwLXN2Yy9leHByZXNzaW9uLyIsInNvdXJjZXMiOlsibGliL2V4cHJlc3Npb24tZW50aXR5LWdyaWQvZXhwcmVzc2lvbi1lbnRpdHktZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXFCLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUNsSCxPQUFPLEVBQVUsY0FBYyxFQUF5QixNQUFNLFdBQVcsQ0FBQztBQUMxRSxPQUFPLEVBQVksa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzlFLE9BQU8sRUFBaUIsaUJBQWlCLEVBQTJCLE1BQU0sbUJBQW1CLENBQUM7QUFDOUYsT0FBTyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBRXZCO0lBMkJFLHlCQUF5QjtJQUN6QixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLHdCQUF3QjtJQUV4QjtRQXJCQSxnQkFBVyxHQUFnQixJQUFJLFdBQVcsQ0FBQztRQUMzQyxhQUFRLEdBQWUsRUFBRSxDQUFDO1FBQzFCLHNCQUFpQixHQUFXLEVBQUUsQ0FBQztRQUMvQix5QkFBb0IsR0FBVyxFQUFFLENBQUM7UUFDbEMsa0JBQWEsR0FBVyxFQUFFLENBQUM7UUFDbEIsV0FBTSxHQUFHLElBQUksR0FBRyxFQUFrQixDQUFDO1FBQ25DLGlCQUFZLEdBQUcsSUFBSSxHQUFHLEVBQXFCLENBQUM7UUFFM0MsdUJBQWtCLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztR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dCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkNoYW5nZXMsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTY2hlbWEsIE5hdmlnYXRpb25UeXBlLCBFbnRpdHlUeXBlLCBFbnRpdHlTZXQgfSBmcm9tICcuLi9zY2hlbWEnO1xyXG5pbXBvcnQgeyBUcmVlTm9kZSwgVHJlZVRhYmxlQ29tcG9uZW50IH0gZnJvbSAnQGZhcnJpcy91aS10cmVldGFibGUnO1xyXG5pbXBvcnQgeyBDdXJyZW50Tm9kZSB9IGZyb20gJy4uL2N1cnJlbnROb2RlJztcclxuaW1wb3J0IHsgSW5qZWN0ZWRFbnRpdHkgfSBmcm9tICcuLi9pbmplY3RlZC1lbnRpdHknO1xyXG5pbXBvcnQgeyBJbmplY3RlZFR5cGUgfSBmcm9tICcuLi9pbmplY3RlZC10eXBlJztcclxuaW1wb3J0IHsgRXhwcmVzc2lvbkVkaXRvckxvY2FsZVBpcGUgfSBmcm9tICcuLi9leHByZXNzaW9uLWVkaXRvci1sb2NhbGUucGlwZSc7XHJcbmltcG9ydCB7IE5ld0VudGl0eVR5cGUsIE5ld05hdmlnYXRpb25UeXBlLCBOZXdTY2hlbWEsIE5ld0VudGl0eVNldCB9IGZyb20gJy4uL2kxOG4vTmV3U2NoZW1hJztcclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLWV4cHJlc3Npb24tZW50aXR5LWdyaWQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9leHByZXNzaW9uLWVudGl0eS1ncmlkLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9leHByZXNzaW9uLWVudGl0eS1ncmlkLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbkVudGl0eUdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcblxyXG4gIC8v5a6a5LmJaTE4buagh+ivhlxyXG4gIHByaXZhdGUgbG9jYWxlSWQ6IHN0cmluZztcclxuICBwcml2YXRlIGxvY2FsZVBpcGU6IEV4cHJlc3Npb25FZGl0b3JMb2NhbGVQaXBlO1xyXG5cclxuICBjdXJyZW50Tm9kZTogQ3VycmVudE5vZGUgPSBuZXcgQ3VycmVudE5vZGU7XHJcbiAgZW50aXRpZXM6IFRyZWVOb2RlW10gPSBbXTtcclxuICBjdXJyZW50U2NoZW1hTmFtZTogc3RyaW5nID0gXCJcIjtcclxuICBjdXJyZW50TmV3U2NoZW1hTmFtZTogc3RyaW5nID0gXCJcIjtcclxuICBjdXJyZW50UGFyZW50OiBzdHJpbmcgPSBcIlwiO1xyXG4gIEBJbnB1dCgpIHNjaGVtYSA9IG5ldyBNYXA8c3RyaW5nLCBTY2hlbWE+KCk7XHJcbiAgQElucHV0KCkgbmV3U2NoZW1hTWFwID0gbmV3IE1hcDxzdHJpbmcsIE5ld1NjaGVtYT4oKTtcclxuICBASW5wdXQoKSBpbmplY3RlZEVudGl0aWVzOiBJbmplY3RlZEVudGl0eVtdO1xyXG4gIEBPdXRwdXQoKSBzZWxlY3RlbnRpdHljaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIGRiY2xpY2tJbnNlcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ3R0JykgdHQ6IFRyZWVUYWJsZUNvbXBvbmVudDtcclxuXHJcbiAgY29scyA9IFtdO1xyXG4gIHB1YmxpYyB0cmVlZGF0YTogVHJlZU5vZGVbXSA9IFtdO1xyXG5cclxuICAvLyBkYXRhOiBUcmVlTm9kZVtdID0gW107XHJcbiAgLy8gdGVtcDI6IFRyZWVOb2RlO1xyXG4gIC8vIHRlbXAzOiBUcmVlTm9kZTtcclxuICAvLyBhbGw6IFRyZWVOb2RlW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAvL+WIneWni+WMlmkxOG7moIfor4ZcclxuICAgIHRoaXMubG9jYWxlSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2VDb2RlJyk7XHJcbiAgICB0aGlzLmxvY2FsZVBpcGUgPSBuZXcgRXhwcmVzc2lvbkVkaXRvckxvY2FsZVBpcGUodGhpcy5sb2NhbGVJZCk7XHJcbiAgfVxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5jb2xzID0gW1xyXG4gICAgICB7IGZpZWxkOiAnbmFtZScsIHRpdGxlOiB0aGlzLmxvY2FsZVBpcGUudHJhbnNmb3JtKFwiRW50aXR5TGlzdFwiKSB9LFxyXG4gICAgICB7IGZpZWxkOiAnZGVzY3JpcHRpb24nLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIkVudGl0eU5hbWVcIikgfSxcclxuICAgICAgeyBmaWVsZDogJ3R5cGUnLCB0aXRsZTogdGhpcy5sb2NhbGVQaXBlLnRyYW5zZm9ybShcIkVudGl0eVR5cGVcIiksIHdpZHRoOiAnMTAwJyB9XHJcbiAgICBdO1xyXG4gICAgaWYgKHRoaXMubmV3U2NoZW1hTWFwICYmIHRoaXMubmV3U2NoZW1hTWFwLnNpemUgPiAwKSB7XHJcbiAgICAgIHRoaXMub25Jbml0TmV3U2NoZW1hKCk7XHJcbiAgICAgIHRoaXMudHJlZWRhdGEgPSBfLmNsb25lRGVlcCh0aGlzLmVudGl0aWVzKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zY2hlbWEgJiYgdGhpcy5zY2hlbWEuc2l6ZSA+IDApIHtcclxuICAgICAgdGhpcy5PbmluaXRTY2hlbWFFbnRpdHkoKTtcclxuICAgICAgdGhpcy50cmVlZGF0YSA9IF8uY2xvbmVEZWVwKHRoaXMuZW50aXRpZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZWxlY3RSb3dDaGFuZ2UoJGV2ZW50KSB7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlID0gbmV3IEN1cnJlbnROb2RlO1xyXG4gICAgdGhpcy5jdXJyZW50Tm9kZS5pZCA9ICRldmVudC5ub2RlLmRhdGEuaWQ7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLm5hbWUgPSAkZXZlbnQubm9kZS5kYXRhLm5hbWU7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLnBhcmVudE5hbWUgPSB0aGlzLnNlbGVjdFBhcmVudFN0cmluZygkZXZlbnQubm9kZSk7XHJcbiAgICB0aGlzLmN1cnJlbnRQYXJlbnQgPSB0aGlzLnNlbGVjdFBhcmVudFN0cmluZygkZXZlbnQubm9kZSk7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLnNjaGVtYSA9ICRldmVudC5ub2RlLmRhdGEuc2NoZW1hO1xyXG4gICAgdGhpcy5jdXJyZW50Tm9kZS5ub2RlVHlwZSA9ICRldmVudC5ub2RlLmRhdGEubm9kZVR5cGU7XHJcbiAgICB0aGlzLmN1cnJlbnROb2RlLmRlc2NyaXB0aW9uID0gJGV2ZW50Lm5vZGUuZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuc2VsZWN0ZW50aXR5Y2hhbmdlLmVtaXQodGhpcy5jdXJyZW50Tm9kZSk7XHJcbiAgfVxyXG4gIGRibENsaWNrKCRldmVudCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFBhcmVudCkge1xyXG4gICAgICB0aGlzLmRiY2xpY2tJbnNlcnQuZW1pdCh0aGlzLmN1cnJlbnRQYXJlbnQgKyBcIi5cIiArICRldmVudC5kYXRhLm5hbWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuZGJjbGlja0luc2VydC5lbWl0KCRldmVudC5kYXRhLm5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBuZ09uQ2hhbmdlcygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLm5ld1NjaGVtYU1hcCAmJiB0aGlzLm5ld1NjaGVtYU1hcC5zaXplID4gMCkge1xyXG4gICAgICB0aGlzLm9uSW5pdE5ld1NjaGVtYSgpO1xyXG4gICAgICB0aGlzLnRyZWVkYXRhID0gXy5jbG9uZURlZXAodGhpcy5lbnRpdGllcyk7XHJcbiAgICAgIC8vIHRoaXMudHJlZWRhdGEgPSB0aGlzLmVudGl0aWVzO1xyXG4gICAgICAvLyB0aGlzLnRyZWVkYXRhID0gWy4uLnRoaXMudHJlZWRhdGFdO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNjaGVtYSAmJiB0aGlzLnNjaGVtYS5zaXplID4gMCkge1xyXG4gICAgICB0aGlzLk9uaW5pdFNjaGVtYUVudGl0eSgpO1xyXG4gICAgICB0aGlzLnRyZWVkYXRhID0gXy5jbG9uZURlZXAodGhpcy5lbnRpdGllcyk7XHJcbiAgICAgIC8vIHRoaXMudHJlZWRhdGEgPSB0aGlzLmVudGl0aWVzO1xyXG4gICAgICAvLyB0aGlzLnRyZWVkYXRhID0gWy4uLnRoaXMudHJlZWRhdGFdO1xyXG4gICAgfVxyXG4gIH1cclxuICAvL+mAkuW9kueItuiKgueCueWQjVxyXG4gIHNlbGVjdFBhcmVudFN0cmluZyhub2RlOiBhbnkpIHtcclxuICAgIGlmIChub2RlLnBhcmVudCkge1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3RQYXJlbnRTdHJpbmcobm9kZS5wYXJlbnQpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RyQ29udGFpbihub2RlLnBhcmVudC5kYXRhLnR5cGUpKVxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0UGFyZW50U3RyaW5nKG5vZGUucGFyZW50KSArIFwiLlwiICsgbm9kZS5wYXJlbnQuZGF0YS5uYW1lICsgXCJbMF1cIjtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RQYXJlbnRTdHJpbmcobm9kZS5wYXJlbnQpICsgXCIuXCIgKyBub2RlLnBhcmVudC5kYXRhLm5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGhpcy5zdHJDb250YWluKG5vZGUucGFyZW50LmRhdGEudHlwZSkpIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnQuZGF0YS5uYW1lICsgXCJbMF1cIjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnQuZGF0YS5uYW1lO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy/liJ3lp4vljJZTY2hlbWHmoLzlvI/nmoRFbnRpdHlcclxuICBPbmluaXRTY2hlbWFFbnRpdHkoKSB7XHJcbiAgICBpZiAodGhpcy5pbmplY3RlZEVudGl0aWVzICYmIHRoaXMuaW5qZWN0ZWRFbnRpdGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuZW50aXRpZXMgPSBbXTtcclxuICAgICAgbGV0IGVudGl0eVRyZWU6IFRyZWVOb2RlID0ge1xyXG4gICAgICAgIGRhdGE6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJpZFwiOiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcclxuICAgICAgICAgIFwic2NoZW1hXCI6IFwiXCIsXHJcbiAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICAvL+WunuS9k+aYvuekuuemgeW/jOihqFxyXG4gICAgICBsZXQgbmF2aWdhdG9yTWFwID0gbmV3IE1hcDxzdHJpbmcsIEluamVjdGVkVHlwZT4oKTtcclxuICAgICAgLy/op6PmnpDmr4/kuIDkuKrms6jlhaXlrp7kvZPvvIzlsIblhbbovazljJbkuLpUcmVlTm9kZVxyXG4gICAgICB0aGlzLmluamVjdGVkRW50aXRpZXMuZm9yRWFjaChpbmplY3RFbnRpdHkgPT4ge1xyXG5cclxuICAgICAgICAvL+agueaNrnNjaGVtYeWQjeensOaJvuWIsOWvueW6lOeahHNjaGVtYVxyXG4gICAgICAgIGxldCBjdXJyZW50U2NoZW1hID0gdGhpcy5zY2hlbWEuZ2V0KGluamVjdEVudGl0eS5zY2hlbWFOYW1lKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTY2hlbWFOYW1lID0gaW5qZWN0RW50aXR5LnNjaGVtYU5hbWU7XHJcbiAgICAgICAgc3dpdGNoIChpbmplY3RFbnRpdHkuaW5qZWN0ZWRUeXBlKSB7XHJcbiAgICAgICAgICAvL+azqOWFpeeahOiLpeS4uuWunuS9k+mbhlxyXG4gICAgICAgICAgY2FzZSBJbmplY3RlZFR5cGUuRW50aXR5U2V0OiB7XHJcbiAgICAgICAgICAgIC8v5qC55o2u5rOo5YWl5a6e5L2T55qE5ZCN56ew5om+5Yiw5a+55bqU55qE5a6e5L2T6ZuGXHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlTZXQgPSBjdXJyZW50U2NoZW1hLmVudGl0eVNldHMuZmluZChlbnRpdHlTZXQgPT4gZW50aXR5U2V0Lm5hbWUgPT0gaW5qZWN0RW50aXR5LmluamVjdGVkTmFtZSk7XHJcbiAgICAgICAgICAgIC8v5bCG5om+5Yiw55qE5a6e5L2T6ZuG6L2s5YyW5Li6VHJlZU5vZGVcclxuICAgICAgICAgICAgZW50aXR5VHJlZSA9IHRoaXMuQ29udmVydEVudGl0eVNldChlbnRpdHlTZXQsIGN1cnJlbnRTY2hlbWEsIG5hdmlnYXRvck1hcCk7XHJcbiAgICAgICAgICB9OyBicmVhaztcclxuICAgICAgICAgIC8v5rOo5YWl55qE6Iul5Li65a6e5L2T57G75Z6LXHJcbiAgICAgICAgICBjYXNlIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlOiB7XHJcbiAgICAgICAgICAgIGxldCBlbnRpdHlUeXBlID0gY3VycmVudFNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKGVudGl0eVR5cGUgPT4gZW50aXR5VHlwZS5uYW1lID09IGluamVjdEVudGl0eS5pbmplY3RlZE5hbWUpO1xyXG4gICAgICAgICAgICAvL+WwhuWunuS9k+exu+Wei+WQjeensOaUueS4uuiHquWumuS5ieWQjeensFxyXG4gICAgICAgICAgICAvL2VudGl0eVR5cGUubmFtZSA9IGluamVjdEVudGl0eS5uYW1lO1xyXG4gICAgICAgICAgICAvL+WwhuaJvuWIsOeahOWunuS9k+exu+Wei+i9rOWMluS4ulRyZWVOb2RlXHJcbiAgICAgICAgICAgIGVudGl0eVRyZWUgPSB0aGlzLkNvbnZlcnRFbnRpdHlUeXBlKGVudGl0eVR5cGUsIGN1cnJlbnRTY2hlbWEsIG5hdmlnYXRvck1hcCk7XHJcbiAgICAgICAgICB9OyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZW50aXR5VHJlZS5kYXRhLm5hbWUgPSBpbmplY3RFbnRpdHkubmFtZTtcclxuICAgICAgICAvL+Wwhuavj+S4qumihOe9ruWvueixoei9rOWMluWQjueahFRyZWVOb2RlXHJcbiAgICAgICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eVRyZWUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIC8v5a6e5L2T6ZuG6L2s5YyWXHJcbiAgQ29udmVydEVudGl0eVNldChlbnRpdHlTZXQ6IEVudGl0eVNldCwgc2NoZW1hOiBTY2hlbWEsIG5hdmlnYXRvck1hcDogYW55KTogVHJlZU5vZGUge1xyXG4gICAgaWYgKGVudGl0eVNldCkge1xyXG4gICAgICAvL+WwhmVudGl0eXNldOi9rOWMluS4ulRyZWVOb2Rl57uT5p6E55So5LqO5bGV56S6XHJcbiAgICAgIGxldCB0cmVlTm9kZTogVHJlZU5vZGUgPSB7XHJcbiAgICAgICAgZGF0YTpcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcImlkXCI6IFwiXCIsXHJcbiAgICAgICAgICBcIm5hbWVcIjogZW50aXR5U2V0Lm5hbWUsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJFbnRpdHlTZXRcIiArIFwiW1wiICsgZW50aXR5U2V0LmVudGl0eVR5cGUgKyBcIl1cIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogZW50aXR5U2V0LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgXCJzY2hlbWFcIjogdGhpcy5jdXJyZW50U2NoZW1hTmFtZSxcclxuICAgICAgICAgIFwibm9kZVR5cGVcIjogXCJDb21wbGV4XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICAvL+Wwhui9rOWMluWujOaIkOeahOWunuS9k+mbhua3u+WKoOi/m+emgeW/jOihqO+8jOmYsuatouW+queOr+i9rOWMllxyXG4gICAgICBuYXZpZ2F0b3JNYXAuc2V0KGVudGl0eVNldC5uYW1lLCBJbmplY3RlZFR5cGUuRW50aXR5U2V0KTtcclxuICAgICAgLy/mib7liLDlrp7kvZPpm4blr7nlupTnmoTlrp7kvZPnsbvlnotcclxuICAgICAgbGV0IGVudGl0eVR5cGUgPSBzY2hlbWEuZW50aXR5VHlwZXMuZmluZChlbnRpdHlUeXBlID0+IGVudGl0eVR5cGUubmFtZSA9PSBlbnRpdHlTZXQuZW50aXR5VHlwZSk7XHJcbiAgICAgIC8v5bCGZW50aXR5dHlwZei9rOWMluS4ulRyZWVOb2Rl57uT5p6E55So5LqO5bGV56S6XHJcbiAgICAgIHRoaXMuQ29udmVydEVudGl0eVR5cGUoZW50aXR5VHlwZSwgc2NoZW1hLCBuYXZpZ2F0b3JNYXApLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRyZWVOb2RlO1xyXG4gICAgfVxyXG4gICAgLy/lrp7kvZPpm4bkuLrnqbrmiJbmnKrlrprkuYnliJnov5Tlm57nqbpcclxuICAgIGVsc2UgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIC8v5a6e5L2T57G75Z6L6L2s5YyWXHJcbiAgQ29udmVydEVudGl0eVR5cGUoZW50aXR5VHlwZTogRW50aXR5VHlwZSwgc2NoZW1hOiBTY2hlbWEsIG5hdmlnYXRvck1hcDogYW55KTogVHJlZU5vZGUge1xyXG4gICAgaWYgKGVudGl0eVR5cGUpIHtcclxuICAgICAgbGV0IHRyZWVOb2RlOiBUcmVlTm9kZSA9IHtcclxuICAgICAgICBkYXRhOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiaWRcIjogZW50aXR5VHlwZS5pZCxcclxuICAgICAgICAgIFwibmFtZVwiOiBlbnRpdHlUeXBlLm5hbWUsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJFbnRpdHlUeXBlXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IGVudGl0eVR5cGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBcInNjaGVtYVwiOiB0aGlzLmN1cnJlbnRTY2hlbWFOYW1lLFxyXG4gICAgICAgICAgXCJub2RlVHlwZVwiOiBcIkNvbXBsZXhcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIH07XHJcbiAgICAgIC8v5bCG6L2s5YyW55qEZW50aXR5dHlwZea3u+WKoOi/m+emgeW/jOihqFxyXG4gICAgICBuYXZpZ2F0b3JNYXAuc2V0KGVudGl0eVR5cGUubmFtZSArIGVudGl0eVR5cGUuaWQsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgLy/lsIbmr4/kuKrlsZ7mgKfovazljJbkuLrmr4/kuKpUcmVlTm9kZVxyXG4gICAgICBlbnRpdHlUeXBlLnByb3BlcnRpZXMuZm9yRWFjaChwcm9wZXJ0eSA9PiB7XHJcbiAgICAgICAgbGV0IHByb3BlcnR5VHJlZTogVHJlZU5vZGUgPSB7XHJcbiAgICAgICAgICBkYXRhOlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBcImlkXCI6IE1hdGgucmFuZG9tKCksXHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlwiLFxyXG4gICAgICAgICAgICBcInR5cGVcIjogcHJvcGVydHkudHlwZSxcclxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBwcm9wZXJ0eS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgXCJzY2hlbWFcIjogdGhpcy5jdXJyZW50U2NoZW1hTmFtZSxcclxuICAgICAgICAgICAgXCJub2RlVHlwZVwiOiBcIlNpbXBsZVwiXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+agueaNruadoeS7tuWIpOaWreivpeWxnuaAp+aYr+WQpuS4uuS4u+mUrlxyXG4gICAgICAgIGlmIChwcm9wZXJ0eS5uYW1lID09IGVudGl0eVR5cGUua2V5KSB7XHJcbiAgICAgICAgICBwcm9wZXJ0eVRyZWUuZGF0YS5uYW1lID0gcHJvcGVydHkubmFtZSArIFwiKlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHByb3BlcnR5VHJlZS5kYXRhLm5hbWUgPSBwcm9wZXJ0eS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm9wZXJ0eVRyZWUucGFyZW50ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChwcm9wZXJ0eVRyZWUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGVudGl0eVR5cGUubmF2aWdhdGlvblByb3BlcnRpZXMuZm9yRWFjaChuYXZpZ2F0aW9uUHJvcGVydHkgPT4ge1xyXG4gICAgICAgIC8v5Yik5pat5piv5ZCm5a+86Iiq5bGe5oCn5a+55bqU55qE5ZCN56ew5LiN5Zyo56aB5b+M6KGo5LitXHJcbiAgICAgICAgaWYgKCEobmF2aWdhdG9yTWFwLmdldChuYXZpZ2F0aW9uUHJvcGVydHkubmFtZSArIG5hdmlnYXRpb25Qcm9wZXJ0eS5uYXZpZ2F0aW9uSWQpKSkge1xyXG4gICAgICAgICAgaWYgKG5hdmlnYXRpb25Qcm9wZXJ0eS50eXBlID09IE5hdmlnYXRpb25UeXBlLkVudGl0eVNldCkge1xyXG4gICAgICAgICAgICAvL+iLpeWvvOiIquWxnuaAp+exu+Wei+S4uuWunuS9k+mbhlxyXG4gICAgICAgICAgICBsZXQgZW50aXR5U2V0ID0gc2NoZW1hLmVudGl0eVNldHMuZmluZChlbnRpdHlTZXQgPT4gZW50aXR5U2V0Lm5hbWUgPT0gbmF2aWdhdGlvblByb3BlcnR5Lm5hbWUpO1xyXG4gICAgICAgICAgICBsZXQgYSA9IHRoaXMuQ29udmVydEVudGl0eVNldChlbnRpdHlTZXQsIHNjaGVtYSwgbmF2aWdhdG9yTWFwKTtcclxuICAgICAgICAgICAgYS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChhKTtcclxuICAgICAgICAgIH0vL+iLpeS4uuWunuS9k+exu+Wei1xyXG4gICAgICAgICAgZWxzZSBpZiAobmF2aWdhdGlvblByb3BlcnR5LnR5cGUgPT0gTmF2aWdhdGlvblR5cGUuRW50aXR5VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5VHlwZSA9IHNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKGVudGl0eXR5cGUgPT4gZW50aXR5dHlwZS5pZCA9PSBuYXZpZ2F0aW9uUHJvcGVydHkubmF2aWdhdGlvbklkICYmIGVudGl0eXR5cGUubmFtZSA9PSBuYXZpZ2F0aW9uUHJvcGVydHkubmFtZSk7XHJcbiAgICAgICAgICAgIGxldCBhID0gdGhpcy5Db252ZXJ0RW50aXR5VHlwZShlbnRpdHlUeXBlLCBzY2hlbWEsIG5hdmlnYXRvck1hcCk7XHJcbiAgICAgICAgICAgIGEucGFyZW50ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuLnB1c2goYSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6Iul5a+86Iiq5bGe5oCn5Zyo56aB5b+M6KGo5LitXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBsZXQgbmF2aWdhdG9ydHJlZTogVHJlZU5vZGUgPSB7XHJcbiAgICAgICAgICAgIGRhdGE6XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBcImlkXCI6IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYXZpZ2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lLFxyXG4gICAgICAgICAgICAgIFwidHlwZVwiOiBcIlwiLFxyXG4gICAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogbmF2aWdhdGlvblByb3BlcnR5LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudFNjaGVtYU5hbWUsXHJcbiAgICAgICAgICAgICAgXCJub2RlVHlwZVwiOiBcIkNvbXBsZXhcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgc3dpdGNoIChuYXZpZ2F0b3JNYXAuZ2V0KG5hdmlnYXRpb25Qcm9wZXJ0eS5uYW1lKSkge1xyXG4gICAgICAgICAgICBjYXNlIE5hdmlnYXRpb25UeXBlLkVudGl0eVNldDpcclxuICAgICAgICAgICAgICBuYXZpZ2F0b3J0cmVlLmRhdGEudHlwZSA9IFwiRW50aXR5U2V0XCI7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5hdmlnYXRpb25UeXBlLkVudGl0eVR5cGU6XHJcbiAgICAgICAgICAgICAgbmF2aWdhdG9ydHJlZS5kYXRhLnR5cGUgPSBcIkVudGl0eVR5cGVcIjsgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBuYXZpZ2F0b3J0cmVlLnBhcmVudCA9IHRyZWVOb2RlO1xyXG4gICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChuYXZpZ2F0b3J0cmVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdHJlZU5vZGU7XHJcbiAgICB9XHJcbiAgICAvL+iLpWVudGl0eXR5cGXkuLrnqbrmiJbmnKrlrprkuYlcclxuICAgIGVsc2UgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0ckNvbnRhaW4oc3RycjogYW55KTogYm9vbGVhbiB7XHJcbiAgICBsZXQgdGVtcCA9IHN0cnIgKyBcIlwiO1xyXG4gICAgaWYgKHRlbXAuaW5kZXhPZihcIkVudGl0eVNldFwiKSAhPSAtMSlcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vPT09PT09PT09PT3liIblibLnur89PT09PT09PT09TmV3U2NoZW1hPT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiDliJ3lp4vljJZOZXdTY2hlbWFcclxuICAgKi9cclxuICBwdWJsaWMgb25Jbml0TmV3U2NoZW1hKCkge1xyXG4gICAgLy/ms6jlhaXlrp7kvZPlrZjlnKjkuJTmnInlgLxcclxuICAgIGlmICh0aGlzLmluamVjdGVkRW50aXRpZXMgJiYgdGhpcy5pbmplY3RlZEVudGl0aWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgLy/liJ3lp4vljJbvvJplbnRpdGllcyjpobXpnaLmmL7npLrlhoXlrrkpO3Jvb3ROb2RlKOi3n+iKgueCuSk7bmF2aWdhdG9yTWFwMSjnpoHlv4zliJfooagpXHJcbiAgICAgIHRoaXMuZW50aXRpZXMgPSBbXTtcclxuICAgICAgbGV0IHJvb3ROb2RlOiBUcmVlTm9kZSA9XHJcbiAgICAgIHtcclxuICAgICAgICBkYXRhOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiaWRcIjogTWF0aC5yYW5kb20oKSxcclxuICAgICAgICAgIFwibmFtZVwiOiBcIlwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiXCIsXHJcbiAgICAgICAgICBcInNjaGVtYVwiOiBcIlwiLFxyXG4gICAgICAgICAgXCJub2RlVHlwZVwiOiBcIlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgfTtcclxuICAgICAgbGV0IG5hdmlnYXRvck1hcDEgPSBuZXcgTWFwPHN0cmluZywgSW5qZWN0ZWRUeXBlPigpO1xyXG5cclxuICAgICAgLy/moLnmja7ms6jlhaXlrp7kvZPnmoRzY2hlbWFOYW1l5om+5Yiw5a+55bqU55qEcm9vdFNjaGVtYVxyXG4gICAgICB0aGlzLmluamVjdGVkRW50aXRpZXMuZm9yRWFjaChpbmplY3RFbnRpdHkgPT4ge1xyXG4gICAgICAgIGxldCByb290U2NoZW1hID0gdGhpcy5uZXdTY2hlbWFNYXAuZ2V0KGluamVjdEVudGl0eS5zY2hlbWFOYW1lKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnROZXdTY2hlbWFOYW1lID0gaW5qZWN0RW50aXR5LnNjaGVtYU5hbWU7XHJcbiAgICAgICAgLy/moLnmja7ms6jlhaXlrp7kvZPnsbvlnostLS0+5omn6KGM5LiN5ZCM5pa55rOVXHJcbiAgICAgICAgc3dpdGNoIChpbmplY3RFbnRpdHkuaW5qZWN0ZWRUeXBlKSB7XHJcbiAgICAgICAgICBjYXNlIEluamVjdGVkVHlwZS5FbnRpdHlTZXQ6IHtcclxuICAgICAgICAgICAgbGV0IGVudGl0eVNldCA9IHJvb3RTY2hlbWEuZW50aXR5U2V0cy5maW5kKHNldCA9PiBzZXQuY29kZSA9PSBpbmplY3RFbnRpdHkuaW5qZWN0ZWROYW1lKTtcclxuICAgICAgICAgICAgcm9vdE5vZGUgPSB0aGlzLmNvbnZlcnROZXdFbnRpdHlTZXQoZW50aXR5U2V0LCByb290U2NoZW1hLCBuYXZpZ2F0b3JNYXAxKTtcclxuICAgICAgICAgIH07IGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBJbmplY3RlZFR5cGUuRW50aXR5VHlwZToge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5VHlwZSA9IHJvb3RTY2hlbWEuZW50aXR5VHlwZXMuZmluZCh0eXBlID0+IHR5cGUuY29kZSA9PSBpbmplY3RFbnRpdHkuaW5qZWN0ZWROYW1lKTtcclxuICAgICAgICAgICAgcm9vdE5vZGUgPSB0aGlzLmNvbnZlcnROZXdFbnRpdHlUeXBlKGVudGl0eVR5cGUsIHJvb3RTY2hlbWEsIG5hdmlnYXRvck1hcDEpO1xyXG4gICAgICAgICAgfTsgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvb3ROb2RlLmRhdGEubmFtZSA9IGluamVjdEVudGl0eS5uYW1lO1xyXG4gICAgICAgIHRoaXMuZW50aXRpZXMucHVzaChyb290Tm9kZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uIOi9rOaNouWunuS9k+exu+WeiyhFbnRpdHlUeXBlKVxyXG4gICAqIEBwYXJhbSBlbnRpdHlUeXBlXHJcbiAgICogQHBhcmFtIHNjaGVtYVxyXG4gICAqIEBwYXJhbSBuYXZpZ2F0b3JNYXAxXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBwdWJsaWMgY29udmVydE5ld0VudGl0eVR5cGUoZW50aXR5VHlwZTogTmV3RW50aXR5VHlwZSwgc2NoZW1hOiBOZXdTY2hlbWEsIG5hdmlnYXRvck1hcDE6IGFueSk6IFRyZWVOb2RlIHtcclxuICAgIGlmIChlbnRpdHlUeXBlKSB7XHJcbiAgICAgIC8v5Yid5aeL5YyW77yaTmV3RW50aXR5VHlwZeeahOiKgueCuVxyXG4gICAgICBsZXQgdHJlZU5vZGU6IFRyZWVOb2RlID1cclxuICAgICAge1xyXG4gICAgICAgIGRhdGE6XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJpZFwiOiBlbnRpdHlUeXBlLmNvZGUsXHJcbiAgICAgICAgICBcIm5hbWVcIjogZW50aXR5VHlwZS5jb2RlLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBlbnRpdHlUeXBlLm5hbWUsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJFbnRpdHlUeXBlXCIsXHJcbiAgICAgICAgICBcInNjaGVtYVwiOiB0aGlzLmN1cnJlbnROZXdTY2hlbWFOYW1lLFxyXG4gICAgICAgICAgXCJub2RlVHlwZVwiOiBcIkNvbXBsZXhcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvL3Byb1xyXG4gICAgICBuYXZpZ2F0b3JNYXAxLnNldChlbnRpdHlUeXBlLm5hbWUgKyBlbnRpdHlUeXBlLmNvZGUsIEluamVjdGVkVHlwZS5FbnRpdHlUeXBlKTtcclxuICAgICAgZW50aXR5VHlwZS5wcm9wZXJ0aWVzLmZvckVhY2gocHJvID0+IHtcclxuICAgICAgICBsZXQgcHJvTm9kZTogVHJlZU5vZGUgPVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRhdGE6XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFwiaWRcIjogTWF0aC5yYW5kb20oKSxcclxuICAgICAgICAgICAgXCJuYW1lXCI6IHByby5jb2RlLFxyXG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IHByby5uYW1lLFxyXG4gICAgICAgICAgICBcInR5cGVcIjogcHJvLmRhdGFUeXBlLFxyXG4gICAgICAgICAgICBcInNjaGVtYVwiOiB0aGlzLmN1cnJlbnROZXdTY2hlbWFOYW1lLFxyXG4gICAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiU2ltcGxlXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIHByb05vZGUucGFyZW50ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChwcm9Ob2RlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvL25hUHJvXHJcbiAgICAgIGVudGl0eVR5cGUubmF2aWdhdGlvblByb3BlcnRpZXMuZm9yRWFjaChuYVBybyA9PiB7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKblr7zoiKrlsZ7mgKflr7nlupTnmoTlkI3np7DlnKjnpoHlv4zooajkuK1cclxuICAgICAgICBpZiAoIShuYXZpZ2F0b3JNYXAxLmdldChuYVByby5uYXZpZ2F0aW9uTmFtZSArIG5hUHJvLmNvZGUpKSkge1xyXG4gICAgICAgICAgaWYgKG5hUHJvLm5hdmlnYXRpb25UeXBlID09IE5ld05hdmlnYXRpb25UeXBlLkVudGl0eVR5cGUpIHtcclxuICAgICAgICAgICAgbGV0IGVudGl0eVR5cGUgPSBzY2hlbWEuZW50aXR5VHlwZXMuZmluZCh0eXBlMSA9PiB0eXBlMS5jb2RlID09IG5hUHJvLm5hdmlnYXRpb25OYW1lKTtcclxuICAgICAgICAgICAgbGV0IGEgPSB0aGlzLmNvbnZlcnROZXdFbnRpdHlUeXBlKGVudGl0eVR5cGUsIHNjaGVtYSwgbmF2aWdhdG9yTWFwMSk7XHJcbiAgICAgICAgICAgIGEucGFyZW50ID0gdHJlZU5vZGU7XHJcbiAgICAgICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuLnB1c2goYSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hUHJvLm5hdmlnYXRpb25UeXBlID09IE5ld05hdmlnYXRpb25UeXBlLkVudGl0eVNldCkge1xyXG4gICAgICAgICAgICBsZXQgZW50aXR5U2V0ID0gc2NoZW1hLmVudGl0eVNldHMuZmluZChzZXQxID0+IHNldDEuY29kZSA9PSBuYVByby5uYXZpZ2F0aW9uTmFtZSk7XHJcbiAgICAgICAgICAgIGxldCBhID0gdGhpcy5jb252ZXJ0TmV3RW50aXR5U2V0KGVudGl0eVNldCwgc2NoZW1hLCBuYXZpZ2F0b3JNYXAxKTtcclxuICAgICAgICAgICAgYS5wYXJlbnQgPSB0cmVlTm9kZTtcclxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/oi6Xlr7zoiKrlsZ7mgKflnKjnpoHlv4zooajkuK1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGxldCBuYVByb05vZGU6IFRyZWVOb2RlID1cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGF0YTpcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiaWRcIjogbmFQcm8ubmF2aWdhdGlvbk5hbWUsXHJcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IG5hUHJvLmNvZGUsXHJcbiAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBuYVByby5uYW1lLFxyXG4gICAgICAgICAgICAgIFwidHlwZVwiOiBcIlwiLFxyXG4gICAgICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudE5ld1NjaGVtYU5hbWUsXHJcbiAgICAgICAgICAgICAgXCJub2RlVHlwZVwiOiBcIkNvbXBsZXhcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgc3dpdGNoIChuYXZpZ2F0b3JNYXAxLmdldChuYVByby5uYXZpZ2F0aW9uTmFtZSkpIHtcclxuICAgICAgICAgICAgY2FzZSBOZXdOYXZpZ2F0aW9uVHlwZS5FbnRpdHlTZXQ6XHJcbiAgICAgICAgICAgICAgbmFQcm9Ob2RlLmRhdGEudHlwZSA9IFwiRW50aXR5U2V0XCI7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5ld05hdmlnYXRpb25UeXBlLkVudGl0eVR5cGU6XHJcbiAgICAgICAgICAgICAgbmFQcm9Ob2RlLmRhdGEudHlwZSA9IFwiRW50aXR5VHlwZVwiOyBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5hUHJvTm9kZS5wYXJlbnQgPSB0cmVlTm9kZSxcclxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChuYVByb05vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB0cmVlTm9kZTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uIOi9rOaNouWunuS9k+mbhihFbnRpdHlTZXQpXHJcbiAgICogQHBhcmFtIHNldFxyXG4gICAqIEBwYXJhbSBzY2hlbWFcclxuICAgKiBAcGFyYW0gbmF2aWdhdG9yTWFwMVxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnZlcnROZXdFbnRpdHlTZXQoc2V0OiBOZXdFbnRpdHlTZXQsIHNjaGVtYTogTmV3U2NoZW1hLCBuYXZpZ2F0b3JNYXAxOiBhbnkpOiBUcmVlTm9kZSB7XHJcbiAgICBpZiAoc2V0KSB7XHJcbiAgICAgIC8v5bCGZW50aXR5c2V06L2s5YyW5Li6VHJlZU5vZGXnu5PmnoTnlKjkuo7lsZXnpLpcclxuICAgICAgbGV0IHRyZWVOb2RlOiBUcmVlTm9kZSA9IHtcclxuICAgICAgICBkYXRhOlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiaWRcIjogTWF0aC5yYW5kb20oKSxcclxuICAgICAgICAgIFwibmFtZVwiOiBzZXQuY29kZSxcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogc2V0Lm5hbWUsXHJcbiAgICAgICAgICBcInR5cGVcIjogXCJFbnRpdHlTZXRcIiArIFwiW1wiICsgc2V0LmNvZGUgKyBcIl1cIixcclxuICAgICAgICAgIFwic2NoZW1hXCI6IHRoaXMuY3VycmVudE5ld1NjaGVtYU5hbWUsXHJcbiAgICAgICAgICBcIm5vZGVUeXBlXCI6IFwiQ29tcGxleFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGlsZHJlbjogW11cclxuICAgICAgfTtcclxuICAgICAgLy/lsIbovazljJblrozmiJDnmoTlrp7kvZPpm4bmt7vliqDov5vnpoHlv4zooajvvIzpmLLmraLlvqrnjq/ovazljJZcclxuICAgICAgbmF2aWdhdG9yTWFwMS5zZXQoc2V0Lm5hbWUsIEluamVjdGVkVHlwZS5FbnRpdHlTZXQpO1xyXG4gICAgICAvL+aJvuWIsOWunuS9k+mbhuWvueW6lOeahOWunuS9k+exu+Wei1xyXG4gICAgICBsZXQgZW50aXR5VHlwZSA9IHNjaGVtYS5lbnRpdHlUeXBlcy5maW5kKGVudGl0eVR5cGUgPT4gZW50aXR5VHlwZS5jb2RlID09IHNldC5lbnRpdHlUeXBlKTtcclxuICAgICAgLy/lsIZlbnRpdHl0eXBl6L2s5YyW5Li6VHJlZU5vZGXnu5PmnoTnlKjkuo7lsZXnpLpcclxuICAgICAgdGhpcy5jb252ZXJ0TmV3RW50aXR5VHlwZShlbnRpdHlUeXBlLCBzY2hlbWEsIG5hdmlnYXRvck1hcDEpLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRyZWVOb2RlO1xyXG4gICAgfVxyXG4gICAgLy/lrp7kvZPpm4bkuLrnqbrmiJbmnKrlrprkuYnliJnov5Tlm57nqbpcclxuICAgIGVsc2UgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvL+mhtue6p+i/h+a7pFxyXG4gIHNlYXJjaEJ5RmlsdGVyKCRldmVudCkge1xyXG4gICAgLy/lrZjlnKjov4fmu6TlgLwmJnRyZWVkYXRh5pyJ5YC8XHJcbiAgICBpZiAoJGV2ZW50LnZhbHVlICYmICRldmVudC52YWx1ZSAhPSBcIlwiICYmIHRoaXMudHJlZWRhdGEpIHtcclxuXHJcbiAgICAgIC8vY2hpbGRyZW7lhYPntKDmt7HluqbpgY3ljoZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyZWVkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hCeUZpbHRlcjEoJGV2ZW50LnZhbHVlLCB0aGlzLnRyZWVkYXRhW2ldKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy/ov4fmu6R1bmRlZmluZWRcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyZWVkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIxKHRoaXMudHJlZWRhdGFbaV0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9jaGlsZHJlbuWFg+e0oOi/h+a7pCRldmVudC52YWx1ZVxyXG4gIHNlYXJjaEJ5RmlsdGVyMShzZWFyY2hWYWx1ZTogc3RyaW5nLCBub2RlOiBhbnkpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLnNlYXJjaEJ5RmlsdGVyMShzZWFyY2hWYWx1ZSwgbm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xyXG4gICAgICBpZiAobm9kZS5kYXRhLmRlc2NyaXB0aW9uLmluZGV4T2Yoc2VhcmNoVmFsdWUpID09IC0xKSB7XHJcbiAgICAgICAgLy9pbmRleE9m6L+U5Zue5oyH5a6a5a2X56ym5Zyo5a2X56ym5Liy5Lit56ys5LiA5qyh5Ye6546w55qE5L2N572uXHJcbiAgICAgICAgLy8tMeS7o+ihqOayoeacieWHuueOsFxyXG4gICAgICAgIGxldCB0ZW1wID0gLTE7XHJcbiAgICAgICAgaWYgKG5vZGUucGFyZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBub2RlLnBhcmVudC5jaGlsZHJlbi5sZW5ndGg7IGlpKyspIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50LmNoaWxkcmVuW2lpXSAmJiBub2RlLnBhcmVudC5jaGlsZHJlbltpaV0uZGF0YS5kZXNjcmlwdGlvbiA9PSBub2RlLmRhdGEuZGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICB0ZW1wID0gaWk7XHJcbiAgICAgICAgICAgICAgZGVsZXRlIG5vZGUucGFyZW50LmNoaWxkcmVuW3RlbXBdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL+WOu+mZpHVuZGVmaW5kZeWFg+e0oFxyXG4gIGZpbHRlcjEobm9kZTogVHJlZU5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICB2YXIgYiA9IG5vZGUuY2hpbGRyZW4uZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPSB1bmRlZmluZWQpO1xyXG4gICAgICBub2RlLmNoaWxkcmVuID0gYjtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW5baV0uY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbltpXS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB0aGlzLmZpbHRlcjEobm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09IDApIHtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvL+i/h+a7pFxyXG4gIGZpbHRlcigkZXZlbnQpIHtcclxuICAgIC8v5byA5aeL6L+H5rukXHJcbiAgICAvLyB0aGlzLnNlYXJjaEJ5RmlsdGVyKCRldmVudCk7XHJcbiAgICAvLyB0aGlzLnNlYXJjaEJ5RmlsdGVyKCRldmVudCk7XHJcblxyXG4gICAgdGhpcy50dC5zZWFyY2hIYW5kbGUuc2VhcmNoKCdkZXNjcmlwdGlvbicsICRldmVudC52YWx1ZSwgICdjbGllbnQnKVxyXG5cclxuICB9XHJcblxyXG5cclxufVxyXG4iXX0=